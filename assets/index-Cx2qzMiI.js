(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=r(i);fetch(i.href,s)}})();const Bi=typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{};function OJ(){throw new Error("setTimeout has not been defined")}function BJ(){throw new Error("clearTimeout has not been defined")}var cf=OJ,lf=BJ;typeof Bi.setTimeout=="function"&&(cf=setTimeout);typeof Bi.clearTimeout=="function"&&(lf=clearTimeout);function DJ(t){if(cf===setTimeout)return setTimeout(t,0);if((cf===OJ||!cf)&&setTimeout)return cf=setTimeout,setTimeout(t,0);try{return cf(t,0)}catch{try{return cf.call(null,t,0)}catch{return cf.call(this,t,0)}}}function Mpe(t){if(lf===clearTimeout)return clearTimeout(t);if((lf===BJ||!lf)&&clearTimeout)return lf=clearTimeout,clearTimeout(t);try{return lf(t)}catch{try{return lf.call(null,t)}catch{return lf.call(this,t)}}}var Ql=[],E1=!1,Zd,e3=-1;function Npe(){!E1||!Zd||(E1=!1,Zd.length?Ql=Zd.concat(Ql):e3=-1,Ql.length&&MJ())}function MJ(){if(!E1){var t=DJ(Npe);E1=!0;for(var e=Ql.length;e;){for(Zd=Ql,Ql=[];++e3<e;)Zd&&Zd[e3].run();e3=-1,e=Ql.length}Zd=null,E1=!1,Mpe(t)}}function no(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];Ql.push(new NJ(t,e)),Ql.length===1&&!E1&&DJ(MJ)}function NJ(t,e){this.fun=t,this.array=e}NJ.prototype.run=function(){this.fun.apply(null,this.array)};var Fpe="browser",Lpe="browser",$pe=!0,Upe={},jpe=[],Vpe="",qpe={},zpe={},Hpe={};function i0(){}var Wpe=i0,Gpe=i0,Kpe=i0,Xpe=i0,Ype=i0,Zpe=i0,Jpe=i0;function Qpe(t){throw new Error("process.binding is not supported")}function eme(){return"/"}function tme(t){throw new Error("process.chdir is not supported")}function rme(){return 0}var c1=Bi.performance||{},nme=c1.now||c1.mozNow||c1.msNow||c1.oNow||c1.webkitNow||function(){return new Date().getTime()};function ime(t){var e=nme.call(c1)*.001,r=Math.floor(e),n=Math.floor(e%1*1e9);return t&&(r=r-t[0],n=n-t[1],n<0&&(r--,n+=1e9)),[r,n]}var sme=new Date;function ame(){var t=new Date,e=t-sme;return e/1e3}var ome={nextTick:no,title:Fpe,browser:$pe,env:Upe,argv:jpe,version:Vpe,versions:qpe,on:Wpe,addListener:Gpe,once:Kpe,off:Xpe,removeListener:Ype,removeAllListeners:Zpe,emit:Jpe,binding:Qpe,cwd:eme,chdir:tme,umask:rme,hrtime:ime,platform:Lpe,release:zpe,config:Hpe,uptime:ame},Ut=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function In(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function FJ(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})}),r}var I_={},_m={},nN;function cme(){if(nN)return _m;nN=1,_m.byteLength=o,_m.toByteArray=u,_m.fromByteArray=d;for(var t=[],e=[],r=typeof Uint8Array<"u"?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,s=n.length;i<s;++i)t[i]=n[i],e[n.charCodeAt(i)]=i;e[45]=62,e[95]=63;function a(h){var m=h.length;if(m%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var p=h.indexOf("=");p===-1&&(p=m);var g=p===m?0:4-p%4;return[p,g]}function o(h){var m=a(h),p=m[0],g=m[1];return(p+g)*3/4-g}function c(h,m,p){return(m+p)*3/4-p}function u(h){var m,p=a(h),g=p[0],v=p[1],y=new r(c(h,g,v)),b=0,_=v>0?g-4:g,x;for(x=0;x<_;x+=4)m=e[h.charCodeAt(x)]<<18|e[h.charCodeAt(x+1)]<<12|e[h.charCodeAt(x+2)]<<6|e[h.charCodeAt(x+3)],y[b++]=m>>16&255,y[b++]=m>>8&255,y[b++]=m&255;return v===2&&(m=e[h.charCodeAt(x)]<<2|e[h.charCodeAt(x+1)]>>4,y[b++]=m&255),v===1&&(m=e[h.charCodeAt(x)]<<10|e[h.charCodeAt(x+1)]<<4|e[h.charCodeAt(x+2)]>>2,y[b++]=m>>8&255,y[b++]=m&255),y}function l(h){return t[h>>18&63]+t[h>>12&63]+t[h>>6&63]+t[h&63]}function f(h,m,p){for(var g,v=[],y=m;y<p;y+=3)g=(h[y]<<16&16711680)+(h[y+1]<<8&65280)+(h[y+2]&255),v.push(l(g));return v.join("")}function d(h){for(var m,p=h.length,g=p%3,v=[],y=16383,b=0,_=p-g;b<_;b+=y)v.push(f(h,b,b+y>_?_:b+y));return g===1?(m=h[p-1],v.push(t[m>>2]+t[m<<4&63]+"==")):g===2&&(m=(h[p-2]<<8)+h[p-1],v.push(t[m>>10]+t[m>>4&63]+t[m<<2&63]+"=")),v.join("")}return _m}var I2={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var iN;function lme(){return iN||(iN=1,I2.read=function(t,e,r,n,i){var s,a,o=i*8-n-1,c=(1<<o)-1,u=c>>1,l=-7,f=r?i-1:0,d=r?-1:1,h=t[e+f];for(f+=d,s=h&(1<<-l)-1,h>>=-l,l+=o;l>0;s=s*256+t[e+f],f+=d,l-=8);for(a=s&(1<<-l)-1,s>>=-l,l+=n;l>0;a=a*256+t[e+f],f+=d,l-=8);if(s===0)s=1-u;else{if(s===c)return a?NaN:(h?-1:1)*(1/0);a=a+Math.pow(2,n),s=s-u}return(h?-1:1)*a*Math.pow(2,s-n)},I2.write=function(t,e,r,n,i,s){var a,o,c,u=s*8-i-1,l=(1<<u)-1,f=l>>1,d=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,h=n?0:s-1,m=n?1:-1,p=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(o=isNaN(e)?1:0,a=l):(a=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-a))<1&&(a--,c*=2),a+f>=1?e+=d/c:e+=d*Math.pow(2,1-f),e*c>=2&&(a++,c/=2),a+f>=l?(o=0,a=l):a+f>=1?(o=(e*c-1)*Math.pow(2,i),a=a+f):(o=e*Math.pow(2,f-1)*Math.pow(2,i),a=0));i>=8;t[r+h]=o&255,h+=m,o/=256,i-=8);for(a=a<<i|o,u+=i;u>0;t[r+h]=a&255,h+=m,a/=256,u-=8);t[r+h-m]|=p*128}),I2}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var sN;function _c(){return sN||(sN=1,function(t){const e=cme(),r=lme(),n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=o,t.SlowBuffer=y,t.INSPECT_MAX_BYTES=50;const i=2147483647;t.kMaxLength=i,o.TYPED_ARRAY_SUPPORT=s(),!o.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function s(){try{const re=new Uint8Array(1),K={foo:function(){return 42}};return Object.setPrototypeOf(K,Uint8Array.prototype),Object.setPrototypeOf(re,K),re.foo()===42}catch{return!1}}Object.defineProperty(o.prototype,"parent",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.buffer}}),Object.defineProperty(o.prototype,"offset",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.byteOffset}});function a(re){if(re>i)throw new RangeError('The value "'+re+'" is invalid for option "size"');const K=new Uint8Array(re);return Object.setPrototypeOf(K,o.prototype),K}function o(re,K,X){if(typeof re=="number"){if(typeof K=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return f(re)}return c(re,K,X)}o.poolSize=8192;function c(re,K,X){if(typeof re=="string")return d(re,K);if(ArrayBuffer.isView(re))return m(re);if(re==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof re);if(me(re,ArrayBuffer)||re&&me(re.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(me(re,SharedArrayBuffer)||re&&me(re.buffer,SharedArrayBuffer)))return p(re,K,X);if(typeof re=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const ce=re.valueOf&&re.valueOf();if(ce!=null&&ce!==re)return o.from(ce,K,X);const ye=g(re);if(ye)return ye;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof re[Symbol.toPrimitive]=="function")return o.from(re[Symbol.toPrimitive]("string"),K,X);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof re)}o.from=function(re,K,X){return c(re,K,X)},Object.setPrototypeOf(o.prototype,Uint8Array.prototype),Object.setPrototypeOf(o,Uint8Array);function u(re){if(typeof re!="number")throw new TypeError('"size" argument must be of type number');if(re<0)throw new RangeError('The value "'+re+'" is invalid for option "size"')}function l(re,K,X){return u(re),re<=0?a(re):K!==void 0?typeof X=="string"?a(re).fill(K,X):a(re).fill(K):a(re)}o.alloc=function(re,K,X){return l(re,K,X)};function f(re){return u(re),a(re<0?0:v(re)|0)}o.allocUnsafe=function(re){return f(re)},o.allocUnsafeSlow=function(re){return f(re)};function d(re,K){if((typeof K!="string"||K==="")&&(K="utf8"),!o.isEncoding(K))throw new TypeError("Unknown encoding: "+K);const X=b(re,K)|0;let ce=a(X);const ye=ce.write(re,K);return ye!==X&&(ce=ce.slice(0,ye)),ce}function h(re){const K=re.length<0?0:v(re.length)|0,X=a(K);for(let ce=0;ce<K;ce+=1)X[ce]=re[ce]&255;return X}function m(re){if(me(re,Uint8Array)){const K=new Uint8Array(re);return p(K.buffer,K.byteOffset,K.byteLength)}return h(re)}function p(re,K,X){if(K<0||re.byteLength<K)throw new RangeError('"offset" is outside of buffer bounds');if(re.byteLength<K+(X||0))throw new RangeError('"length" is outside of buffer bounds');let ce;return K===void 0&&X===void 0?ce=new Uint8Array(re):X===void 0?ce=new Uint8Array(re,K):ce=new Uint8Array(re,K,X),Object.setPrototypeOf(ce,o.prototype),ce}function g(re){if(o.isBuffer(re)){const K=v(re.length)|0,X=a(K);return X.length===0||re.copy(X,0,0,K),X}if(re.length!==void 0)return typeof re.length!="number"||be(re.length)?a(0):h(re);if(re.type==="Buffer"&&Array.isArray(re.data))return h(re.data)}function v(re){if(re>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return re|0}function y(re){return+re!=re&&(re=0),o.alloc(+re)}o.isBuffer=function(K){return K!=null&&K._isBuffer===!0&&K!==o.prototype},o.compare=function(K,X){if(me(K,Uint8Array)&&(K=o.from(K,K.offset,K.byteLength)),me(X,Uint8Array)&&(X=o.from(X,X.offset,X.byteLength)),!o.isBuffer(K)||!o.isBuffer(X))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(K===X)return 0;let ce=K.length,ye=X.length;for(let Ee=0,Se=Math.min(ce,ye);Ee<Se;++Ee)if(K[Ee]!==X[Ee]){ce=K[Ee],ye=X[Ee];break}return ce<ye?-1:ye<ce?1:0},o.isEncoding=function(K){switch(String(K).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(K,X){if(!Array.isArray(K))throw new TypeError('"list" argument must be an Array of Buffers');if(K.length===0)return o.alloc(0);let ce;if(X===void 0)for(X=0,ce=0;ce<K.length;++ce)X+=K[ce].length;const ye=o.allocUnsafe(X);let Ee=0;for(ce=0;ce<K.length;++ce){let Se=K[ce];if(me(Se,Uint8Array))Ee+Se.length>ye.length?(o.isBuffer(Se)||(Se=o.from(Se)),Se.copy(ye,Ee)):Uint8Array.prototype.set.call(ye,Se,Ee);else if(o.isBuffer(Se))Se.copy(ye,Ee);else throw new TypeError('"list" argument must be an Array of Buffers');Ee+=Se.length}return ye};function b(re,K){if(o.isBuffer(re))return re.length;if(ArrayBuffer.isView(re)||me(re,ArrayBuffer))return re.byteLength;if(typeof re!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof re);const X=re.length,ce=arguments.length>2&&arguments[2]===!0;if(!ce&&X===0)return 0;let ye=!1;for(;;)switch(K){case"ascii":case"latin1":case"binary":return X;case"utf8":case"utf-8":return J(re).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return X*2;case"hex":return X>>>1;case"base64":return le(re).length;default:if(ye)return ce?-1:J(re).length;K=(""+K).toLowerCase(),ye=!0}}o.byteLength=b;function _(re,K,X){let ce=!1;if((K===void 0||K<0)&&(K=0),K>this.length||((X===void 0||X>this.length)&&(X=this.length),X<=0)||(X>>>=0,K>>>=0,X<=K))return"";for(re||(re="utf8");;)switch(re){case"hex":return R(this,K,X);case"utf8":case"utf-8":return w(this,K,X);case"ascii":return P(this,K,X);case"latin1":case"binary":return O(this,K,X);case"base64":return T(this,K,X);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,K,X);default:if(ce)throw new TypeError("Unknown encoding: "+re);re=(re+"").toLowerCase(),ce=!0}}o.prototype._isBuffer=!0;function x(re,K,X){const ce=re[K];re[K]=re[X],re[X]=ce}o.prototype.swap16=function(){const K=this.length;if(K%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let X=0;X<K;X+=2)x(this,X,X+1);return this},o.prototype.swap32=function(){const K=this.length;if(K%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let X=0;X<K;X+=4)x(this,X,X+3),x(this,X+1,X+2);return this},o.prototype.swap64=function(){const K=this.length;if(K%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let X=0;X<K;X+=8)x(this,X,X+7),x(this,X+1,X+6),x(this,X+2,X+5),x(this,X+3,X+4);return this},o.prototype.toString=function(){const K=this.length;return K===0?"":arguments.length===0?w(this,0,K):_.apply(this,arguments)},o.prototype.toLocaleString=o.prototype.toString,o.prototype.equals=function(K){if(!o.isBuffer(K))throw new TypeError("Argument must be a Buffer");return this===K?!0:o.compare(this,K)===0},o.prototype.inspect=function(){let K="";const X=t.INSPECT_MAX_BYTES;return K=this.toString("hex",0,X).replace(/(.{2})/g,"$1 ").trim(),this.length>X&&(K+=" ... "),"<Buffer "+K+">"},n&&(o.prototype[n]=o.prototype.inspect),o.prototype.compare=function(K,X,ce,ye,Ee){if(me(K,Uint8Array)&&(K=o.from(K,K.offset,K.byteLength)),!o.isBuffer(K))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof K);if(X===void 0&&(X=0),ce===void 0&&(ce=K?K.length:0),ye===void 0&&(ye=0),Ee===void 0&&(Ee=this.length),X<0||ce>K.length||ye<0||Ee>this.length)throw new RangeError("out of range index");if(ye>=Ee&&X>=ce)return 0;if(ye>=Ee)return-1;if(X>=ce)return 1;if(X>>>=0,ce>>>=0,ye>>>=0,Ee>>>=0,this===K)return 0;let Se=Ee-ye,rt=ce-X;const ct=Math.min(Se,rt),we=this.slice(ye,Ee),ke=K.slice(X,ce);for(let Ye=0;Ye<ct;++Ye)if(we[Ye]!==ke[Ye]){Se=we[Ye],rt=ke[Ye];break}return Se<rt?-1:rt<Se?1:0};function E(re,K,X,ce,ye){if(re.length===0)return-1;if(typeof X=="string"?(ce=X,X=0):X>2147483647?X=2147483647:X<-2147483648&&(X=-2147483648),X=+X,be(X)&&(X=ye?0:re.length-1),X<0&&(X=re.length+X),X>=re.length){if(ye)return-1;X=re.length-1}else if(X<0)if(ye)X=0;else return-1;if(typeof K=="string"&&(K=o.from(K,ce)),o.isBuffer(K))return K.length===0?-1:k(re,K,X,ce,ye);if(typeof K=="number")return K=K&255,typeof Uint8Array.prototype.indexOf=="function"?ye?Uint8Array.prototype.indexOf.call(re,K,X):Uint8Array.prototype.lastIndexOf.call(re,K,X):k(re,[K],X,ce,ye);throw new TypeError("val must be string, number or Buffer")}function k(re,K,X,ce,ye){let Ee=1,Se=re.length,rt=K.length;if(ce!==void 0&&(ce=String(ce).toLowerCase(),ce==="ucs2"||ce==="ucs-2"||ce==="utf16le"||ce==="utf-16le")){if(re.length<2||K.length<2)return-1;Ee=2,Se/=2,rt/=2,X/=2}function ct(ke,Ye){return Ee===1?ke[Ye]:ke.readUInt16BE(Ye*Ee)}let we;if(ye){let ke=-1;for(we=X;we<Se;we++)if(ct(re,we)===ct(K,ke===-1?0:we-ke)){if(ke===-1&&(ke=we),we-ke+1===rt)return ke*Ee}else ke!==-1&&(we-=we-ke),ke=-1}else for(X+rt>Se&&(X=Se-rt),we=X;we>=0;we--){let ke=!0;for(let Ye=0;Ye<rt;Ye++)if(ct(re,we+Ye)!==ct(K,Ye)){ke=!1;break}if(ke)return we}return-1}o.prototype.includes=function(K,X,ce){return this.indexOf(K,X,ce)!==-1},o.prototype.indexOf=function(K,X,ce){return E(this,K,X,ce,!0)},o.prototype.lastIndexOf=function(K,X,ce){return E(this,K,X,ce,!1)};function B(re,K,X,ce){X=Number(X)||0;const ye=re.length-X;ce?(ce=Number(ce),ce>ye&&(ce=ye)):ce=ye;const Ee=K.length;ce>Ee/2&&(ce=Ee/2);let Se;for(Se=0;Se<ce;++Se){const rt=parseInt(K.substr(Se*2,2),16);if(be(rt))return Se;re[X+Se]=rt}return Se}function D(re,K,X,ce){return ue(J(K,re.length-X),re,X,ce)}function z(re,K,X,ce){return ue(ee(K),re,X,ce)}function U(re,K,X,ce){return ue(le(K),re,X,ce)}function S(re,K,X,ce){return ue(ie(K,re.length-X),re,X,ce)}o.prototype.write=function(K,X,ce,ye){if(X===void 0)ye="utf8",ce=this.length,X=0;else if(ce===void 0&&typeof X=="string")ye=X,ce=this.length,X=0;else if(isFinite(X))X=X>>>0,isFinite(ce)?(ce=ce>>>0,ye===void 0&&(ye="utf8")):(ye=ce,ce=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const Ee=this.length-X;if((ce===void 0||ce>Ee)&&(ce=Ee),K.length>0&&(ce<0||X<0)||X>this.length)throw new RangeError("Attempt to write outside buffer bounds");ye||(ye="utf8");let Se=!1;for(;;)switch(ye){case"hex":return B(this,K,X,ce);case"utf8":case"utf-8":return D(this,K,X,ce);case"ascii":case"latin1":case"binary":return z(this,K,X,ce);case"base64":return U(this,K,X,ce);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,K,X,ce);default:if(Se)throw new TypeError("Unknown encoding: "+ye);ye=(""+ye).toLowerCase(),Se=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function T(re,K,X){return K===0&&X===re.length?e.fromByteArray(re):e.fromByteArray(re.slice(K,X))}function w(re,K,X){X=Math.min(re.length,X);const ce=[];let ye=K;for(;ye<X;){const Ee=re[ye];let Se=null,rt=Ee>239?4:Ee>223?3:Ee>191?2:1;if(ye+rt<=X){let ct,we,ke,Ye;switch(rt){case 1:Ee<128&&(Se=Ee);break;case 2:ct=re[ye+1],(ct&192)===128&&(Ye=(Ee&31)<<6|ct&63,Ye>127&&(Se=Ye));break;case 3:ct=re[ye+1],we=re[ye+2],(ct&192)===128&&(we&192)===128&&(Ye=(Ee&15)<<12|(ct&63)<<6|we&63,Ye>2047&&(Ye<55296||Ye>57343)&&(Se=Ye));break;case 4:ct=re[ye+1],we=re[ye+2],ke=re[ye+3],(ct&192)===128&&(we&192)===128&&(ke&192)===128&&(Ye=(Ee&15)<<18|(ct&63)<<12|(we&63)<<6|ke&63,Ye>65535&&Ye<1114112&&(Se=Ye))}}Se===null?(Se=65533,rt=1):Se>65535&&(Se-=65536,ce.push(Se>>>10&1023|55296),Se=56320|Se&1023),ce.push(Se),ye+=rt}return F(ce)}const A=4096;function F(re){const K=re.length;if(K<=A)return String.fromCharCode.apply(String,re);let X="",ce=0;for(;ce<K;)X+=String.fromCharCode.apply(String,re.slice(ce,ce+=A));return X}function P(re,K,X){let ce="";X=Math.min(re.length,X);for(let ye=K;ye<X;++ye)ce+=String.fromCharCode(re[ye]&127);return ce}function O(re,K,X){let ce="";X=Math.min(re.length,X);for(let ye=K;ye<X;++ye)ce+=String.fromCharCode(re[ye]);return ce}function R(re,K,X){const ce=re.length;(!K||K<0)&&(K=0),(!X||X<0||X>ce)&&(X=ce);let ye="";for(let Ee=K;Ee<X;++Ee)ye+=_e[re[Ee]];return ye}function I(re,K,X){const ce=re.slice(K,X);let ye="";for(let Ee=0;Ee<ce.length-1;Ee+=2)ye+=String.fromCharCode(ce[Ee]+ce[Ee+1]*256);return ye}o.prototype.slice=function(K,X){const ce=this.length;K=~~K,X=X===void 0?ce:~~X,K<0?(K+=ce,K<0&&(K=0)):K>ce&&(K=ce),X<0?(X+=ce,X<0&&(X=0)):X>ce&&(X=ce),X<K&&(X=K);const ye=this.subarray(K,X);return Object.setPrototypeOf(ye,o.prototype),ye};function C(re,K,X){if(re%1!==0||re<0)throw new RangeError("offset is not uint");if(re+K>X)throw new RangeError("Trying to access beyond buffer length")}o.prototype.readUintLE=o.prototype.readUIntLE=function(K,X,ce){K=K>>>0,X=X>>>0,ce||C(K,X,this.length);let ye=this[K],Ee=1,Se=0;for(;++Se<X&&(Ee*=256);)ye+=this[K+Se]*Ee;return ye},o.prototype.readUintBE=o.prototype.readUIntBE=function(K,X,ce){K=K>>>0,X=X>>>0,ce||C(K,X,this.length);let ye=this[K+--X],Ee=1;for(;X>0&&(Ee*=256);)ye+=this[K+--X]*Ee;return ye},o.prototype.readUint8=o.prototype.readUInt8=function(K,X){return K=K>>>0,X||C(K,1,this.length),this[K]},o.prototype.readUint16LE=o.prototype.readUInt16LE=function(K,X){return K=K>>>0,X||C(K,2,this.length),this[K]|this[K+1]<<8},o.prototype.readUint16BE=o.prototype.readUInt16BE=function(K,X){return K=K>>>0,X||C(K,2,this.length),this[K]<<8|this[K+1]},o.prototype.readUint32LE=o.prototype.readUInt32LE=function(K,X){return K=K>>>0,X||C(K,4,this.length),(this[K]|this[K+1]<<8|this[K+2]<<16)+this[K+3]*16777216},o.prototype.readUint32BE=o.prototype.readUInt32BE=function(K,X){return K=K>>>0,X||C(K,4,this.length),this[K]*16777216+(this[K+1]<<16|this[K+2]<<8|this[K+3])},o.prototype.readBigUInt64LE=xe(function(K){K=K>>>0,Z(K,"offset");const X=this[K],ce=this[K+7];(X===void 0||ce===void 0)&&V(K,this.length-8);const ye=X+this[++K]*2**8+this[++K]*2**16+this[++K]*2**24,Ee=this[++K]+this[++K]*2**8+this[++K]*2**16+ce*2**24;return BigInt(ye)+(BigInt(Ee)<<BigInt(32))}),o.prototype.readBigUInt64BE=xe(function(K){K=K>>>0,Z(K,"offset");const X=this[K],ce=this[K+7];(X===void 0||ce===void 0)&&V(K,this.length-8);const ye=X*2**24+this[++K]*2**16+this[++K]*2**8+this[++K],Ee=this[++K]*2**24+this[++K]*2**16+this[++K]*2**8+ce;return(BigInt(ye)<<BigInt(32))+BigInt(Ee)}),o.prototype.readIntLE=function(K,X,ce){K=K>>>0,X=X>>>0,ce||C(K,X,this.length);let ye=this[K],Ee=1,Se=0;for(;++Se<X&&(Ee*=256);)ye+=this[K+Se]*Ee;return Ee*=128,ye>=Ee&&(ye-=Math.pow(2,8*X)),ye},o.prototype.readIntBE=function(K,X,ce){K=K>>>0,X=X>>>0,ce||C(K,X,this.length);let ye=X,Ee=1,Se=this[K+--ye];for(;ye>0&&(Ee*=256);)Se+=this[K+--ye]*Ee;return Ee*=128,Se>=Ee&&(Se-=Math.pow(2,8*X)),Se},o.prototype.readInt8=function(K,X){return K=K>>>0,X||C(K,1,this.length),this[K]&128?(255-this[K]+1)*-1:this[K]},o.prototype.readInt16LE=function(K,X){K=K>>>0,X||C(K,2,this.length);const ce=this[K]|this[K+1]<<8;return ce&32768?ce|4294901760:ce},o.prototype.readInt16BE=function(K,X){K=K>>>0,X||C(K,2,this.length);const ce=this[K+1]|this[K]<<8;return ce&32768?ce|4294901760:ce},o.prototype.readInt32LE=function(K,X){return K=K>>>0,X||C(K,4,this.length),this[K]|this[K+1]<<8|this[K+2]<<16|this[K+3]<<24},o.prototype.readInt32BE=function(K,X){return K=K>>>0,X||C(K,4,this.length),this[K]<<24|this[K+1]<<16|this[K+2]<<8|this[K+3]},o.prototype.readBigInt64LE=xe(function(K){K=K>>>0,Z(K,"offset");const X=this[K],ce=this[K+7];(X===void 0||ce===void 0)&&V(K,this.length-8);const ye=this[K+4]+this[K+5]*2**8+this[K+6]*2**16+(ce<<24);return(BigInt(ye)<<BigInt(32))+BigInt(X+this[++K]*2**8+this[++K]*2**16+this[++K]*2**24)}),o.prototype.readBigInt64BE=xe(function(K){K=K>>>0,Z(K,"offset");const X=this[K],ce=this[K+7];(X===void 0||ce===void 0)&&V(K,this.length-8);const ye=(X<<24)+this[++K]*2**16+this[++K]*2**8+this[++K];return(BigInt(ye)<<BigInt(32))+BigInt(this[++K]*2**24+this[++K]*2**16+this[++K]*2**8+ce)}),o.prototype.readFloatLE=function(K,X){return K=K>>>0,X||C(K,4,this.length),r.read(this,K,!0,23,4)},o.prototype.readFloatBE=function(K,X){return K=K>>>0,X||C(K,4,this.length),r.read(this,K,!1,23,4)},o.prototype.readDoubleLE=function(K,X){return K=K>>>0,X||C(K,8,this.length),r.read(this,K,!0,52,8)},o.prototype.readDoubleBE=function(K,X){return K=K>>>0,X||C(K,8,this.length),r.read(this,K,!1,52,8)};function M(re,K,X,ce,ye,Ee){if(!o.isBuffer(re))throw new TypeError('"buffer" argument must be a Buffer instance');if(K>ye||K<Ee)throw new RangeError('"value" argument is out of bounds');if(X+ce>re.length)throw new RangeError("Index out of range")}o.prototype.writeUintLE=o.prototype.writeUIntLE=function(K,X,ce,ye){if(K=+K,X=X>>>0,ce=ce>>>0,!ye){const rt=Math.pow(2,8*ce)-1;M(this,K,X,ce,rt,0)}let Ee=1,Se=0;for(this[X]=K&255;++Se<ce&&(Ee*=256);)this[X+Se]=K/Ee&255;return X+ce},o.prototype.writeUintBE=o.prototype.writeUIntBE=function(K,X,ce,ye){if(K=+K,X=X>>>0,ce=ce>>>0,!ye){const rt=Math.pow(2,8*ce)-1;M(this,K,X,ce,rt,0)}let Ee=ce-1,Se=1;for(this[X+Ee]=K&255;--Ee>=0&&(Se*=256);)this[X+Ee]=K/Se&255;return X+ce},o.prototype.writeUint8=o.prototype.writeUInt8=function(K,X,ce){return K=+K,X=X>>>0,ce||M(this,K,X,1,255,0),this[X]=K&255,X+1},o.prototype.writeUint16LE=o.prototype.writeUInt16LE=function(K,X,ce){return K=+K,X=X>>>0,ce||M(this,K,X,2,65535,0),this[X]=K&255,this[X+1]=K>>>8,X+2},o.prototype.writeUint16BE=o.prototype.writeUInt16BE=function(K,X,ce){return K=+K,X=X>>>0,ce||M(this,K,X,2,65535,0),this[X]=K>>>8,this[X+1]=K&255,X+2},o.prototype.writeUint32LE=o.prototype.writeUInt32LE=function(K,X,ce){return K=+K,X=X>>>0,ce||M(this,K,X,4,4294967295,0),this[X+3]=K>>>24,this[X+2]=K>>>16,this[X+1]=K>>>8,this[X]=K&255,X+4},o.prototype.writeUint32BE=o.prototype.writeUInt32BE=function(K,X,ce){return K=+K,X=X>>>0,ce||M(this,K,X,4,4294967295,0),this[X]=K>>>24,this[X+1]=K>>>16,this[X+2]=K>>>8,this[X+3]=K&255,X+4};function L(re,K,X,ce,ye){j(K,ce,ye,re,X,7);let Ee=Number(K&BigInt(4294967295));re[X++]=Ee,Ee=Ee>>8,re[X++]=Ee,Ee=Ee>>8,re[X++]=Ee,Ee=Ee>>8,re[X++]=Ee;let Se=Number(K>>BigInt(32)&BigInt(4294967295));return re[X++]=Se,Se=Se>>8,re[X++]=Se,Se=Se>>8,re[X++]=Se,Se=Se>>8,re[X++]=Se,X}function N(re,K,X,ce,ye){j(K,ce,ye,re,X,7);let Ee=Number(K&BigInt(4294967295));re[X+7]=Ee,Ee=Ee>>8,re[X+6]=Ee,Ee=Ee>>8,re[X+5]=Ee,Ee=Ee>>8,re[X+4]=Ee;let Se=Number(K>>BigInt(32)&BigInt(4294967295));return re[X+3]=Se,Se=Se>>8,re[X+2]=Se,Se=Se>>8,re[X+1]=Se,Se=Se>>8,re[X]=Se,X+8}o.prototype.writeBigUInt64LE=xe(function(K,X=0){return L(this,K,X,BigInt(0),BigInt("0xffffffffffffffff"))}),o.prototype.writeBigUInt64BE=xe(function(K,X=0){return N(this,K,X,BigInt(0),BigInt("0xffffffffffffffff"))}),o.prototype.writeIntLE=function(K,X,ce,ye){if(K=+K,X=X>>>0,!ye){const ct=Math.pow(2,8*ce-1);M(this,K,X,ce,ct-1,-ct)}let Ee=0,Se=1,rt=0;for(this[X]=K&255;++Ee<ce&&(Se*=256);)K<0&&rt===0&&this[X+Ee-1]!==0&&(rt=1),this[X+Ee]=(K/Se>>0)-rt&255;return X+ce},o.prototype.writeIntBE=function(K,X,ce,ye){if(K=+K,X=X>>>0,!ye){const ct=Math.pow(2,8*ce-1);M(this,K,X,ce,ct-1,-ct)}let Ee=ce-1,Se=1,rt=0;for(this[X+Ee]=K&255;--Ee>=0&&(Se*=256);)K<0&&rt===0&&this[X+Ee+1]!==0&&(rt=1),this[X+Ee]=(K/Se>>0)-rt&255;return X+ce},o.prototype.writeInt8=function(K,X,ce){return K=+K,X=X>>>0,ce||M(this,K,X,1,127,-128),K<0&&(K=255+K+1),this[X]=K&255,X+1},o.prototype.writeInt16LE=function(K,X,ce){return K=+K,X=X>>>0,ce||M(this,K,X,2,32767,-32768),this[X]=K&255,this[X+1]=K>>>8,X+2},o.prototype.writeInt16BE=function(K,X,ce){return K=+K,X=X>>>0,ce||M(this,K,X,2,32767,-32768),this[X]=K>>>8,this[X+1]=K&255,X+2},o.prototype.writeInt32LE=function(K,X,ce){return K=+K,X=X>>>0,ce||M(this,K,X,4,2147483647,-2147483648),this[X]=K&255,this[X+1]=K>>>8,this[X+2]=K>>>16,this[X+3]=K>>>24,X+4},o.prototype.writeInt32BE=function(K,X,ce){return K=+K,X=X>>>0,ce||M(this,K,X,4,2147483647,-2147483648),K<0&&(K=4294967295+K+1),this[X]=K>>>24,this[X+1]=K>>>16,this[X+2]=K>>>8,this[X+3]=K&255,X+4},o.prototype.writeBigInt64LE=xe(function(K,X=0){return L(this,K,X,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),o.prototype.writeBigInt64BE=xe(function(K,X=0){return N(this,K,X,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function H(re,K,X,ce,ye,Ee){if(X+ce>re.length)throw new RangeError("Index out of range");if(X<0)throw new RangeError("Index out of range")}function W(re,K,X,ce,ye){return K=+K,X=X>>>0,ye||H(re,K,X,4),r.write(re,K,X,ce,23,4),X+4}o.prototype.writeFloatLE=function(K,X,ce){return W(this,K,X,!0,ce)},o.prototype.writeFloatBE=function(K,X,ce){return W(this,K,X,!1,ce)};function q(re,K,X,ce,ye){return K=+K,X=X>>>0,ye||H(re,K,X,8),r.write(re,K,X,ce,52,8),X+8}o.prototype.writeDoubleLE=function(K,X,ce){return q(this,K,X,!0,ce)},o.prototype.writeDoubleBE=function(K,X,ce){return q(this,K,X,!1,ce)},o.prototype.copy=function(K,X,ce,ye){if(!o.isBuffer(K))throw new TypeError("argument should be a Buffer");if(ce||(ce=0),!ye&&ye!==0&&(ye=this.length),X>=K.length&&(X=K.length),X||(X=0),ye>0&&ye<ce&&(ye=ce),ye===ce||K.length===0||this.length===0)return 0;if(X<0)throw new RangeError("targetStart out of bounds");if(ce<0||ce>=this.length)throw new RangeError("Index out of range");if(ye<0)throw new RangeError("sourceEnd out of bounds");ye>this.length&&(ye=this.length),K.length-X<ye-ce&&(ye=K.length-X+ce);const Ee=ye-ce;return this===K&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(X,ce,ye):Uint8Array.prototype.set.call(K,this.subarray(ce,ye),X),Ee},o.prototype.fill=function(K,X,ce,ye){if(typeof K=="string"){if(typeof X=="string"?(ye=X,X=0,ce=this.length):typeof ce=="string"&&(ye=ce,ce=this.length),ye!==void 0&&typeof ye!="string")throw new TypeError("encoding must be a string");if(typeof ye=="string"&&!o.isEncoding(ye))throw new TypeError("Unknown encoding: "+ye);if(K.length===1){const Se=K.charCodeAt(0);(ye==="utf8"&&Se<128||ye==="latin1")&&(K=Se)}}else typeof K=="number"?K=K&255:typeof K=="boolean"&&(K=Number(K));if(X<0||this.length<X||this.length<ce)throw new RangeError("Out of range index");if(ce<=X)return this;X=X>>>0,ce=ce===void 0?this.length:ce>>>0,K||(K=0);let Ee;if(typeof K=="number")for(Ee=X;Ee<ce;++Ee)this[Ee]=K;else{const Se=o.isBuffer(K)?K:o.from(K,ye),rt=Se.length;if(rt===0)throw new TypeError('The value "'+K+'" is invalid for argument "value"');for(Ee=0;Ee<ce-X;++Ee)this[Ee+X]=Se[Ee%rt]}return this};const G={};function Y(re,K,X){G[re]=class extends X{constructor(){super(),Object.defineProperty(this,"message",{value:K.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${re}]`,this.stack,delete this.name}get code(){return re}set code(ye){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:ye,writable:!0})}toString(){return`${this.name} [${re}]: ${this.message}`}}}Y("ERR_BUFFER_OUT_OF_BOUNDS",function(re){return re?`${re} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Y("ERR_INVALID_ARG_TYPE",function(re,K){return`The "${re}" argument must be of type number. Received type ${typeof K}`},TypeError),Y("ERR_OUT_OF_RANGE",function(re,K,X){let ce=`The value of "${re}" is out of range.`,ye=X;return Number.isInteger(X)&&Math.abs(X)>2**32?ye=te(String(X)):typeof X=="bigint"&&(ye=String(X),(X>BigInt(2)**BigInt(32)||X<-(BigInt(2)**BigInt(32)))&&(ye=te(ye)),ye+="n"),ce+=` It must be ${K}. Received ${ye}`,ce},RangeError);function te(re){let K="",X=re.length;const ce=re[0]==="-"?1:0;for(;X>=ce+4;X-=3)K=`_${re.slice(X-3,X)}${K}`;return`${re.slice(0,X)}${K}`}function Q(re,K,X){Z(K,"offset"),(re[K]===void 0||re[K+X]===void 0)&&V(K,re.length-(X+1))}function j(re,K,X,ce,ye,Ee){if(re>X||re<K){const Se=typeof K=="bigint"?"n":"";let rt;throw K===0||K===BigInt(0)?rt=`>= 0${Se} and < 2${Se} ** ${(Ee+1)*8}${Se}`:rt=`>= -(2${Se} ** ${(Ee+1)*8-1}${Se}) and < 2 ** ${(Ee+1)*8-1}${Se}`,new G.ERR_OUT_OF_RANGE("value",rt,re)}Q(ce,ye,Ee)}function Z(re,K){if(typeof re!="number")throw new G.ERR_INVALID_ARG_TYPE(K,"number",re)}function V(re,K,X){throw Math.floor(re)!==re?(Z(re,X),new G.ERR_OUT_OF_RANGE("offset","an integer",re)):K<0?new G.ERR_BUFFER_OUT_OF_BOUNDS:new G.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${K}`,re)}const ne=/[^+/0-9A-Za-z-_]/g;function se(re){if(re=re.split("=")[0],re=re.trim().replace(ne,""),re.length<2)return"";for(;re.length%4!==0;)re=re+"=";return re}function J(re,K){K=K||1/0;let X;const ce=re.length;let ye=null;const Ee=[];for(let Se=0;Se<ce;++Se){if(X=re.charCodeAt(Se),X>55295&&X<57344){if(!ye){if(X>56319){(K-=3)>-1&&Ee.push(239,191,189);continue}else if(Se+1===ce){(K-=3)>-1&&Ee.push(239,191,189);continue}ye=X;continue}if(X<56320){(K-=3)>-1&&Ee.push(239,191,189),ye=X;continue}X=(ye-55296<<10|X-56320)+65536}else ye&&(K-=3)>-1&&Ee.push(239,191,189);if(ye=null,X<128){if((K-=1)<0)break;Ee.push(X)}else if(X<2048){if((K-=2)<0)break;Ee.push(X>>6|192,X&63|128)}else if(X<65536){if((K-=3)<0)break;Ee.push(X>>12|224,X>>6&63|128,X&63|128)}else if(X<1114112){if((K-=4)<0)break;Ee.push(X>>18|240,X>>12&63|128,X>>6&63|128,X&63|128)}else throw new Error("Invalid code point")}return Ee}function ee(re){const K=[];for(let X=0;X<re.length;++X)K.push(re.charCodeAt(X)&255);return K}function ie(re,K){let X,ce,ye;const Ee=[];for(let Se=0;Se<re.length&&!((K-=2)<0);++Se)X=re.charCodeAt(Se),ce=X>>8,ye=X%256,Ee.push(ye),Ee.push(ce);return Ee}function le(re){return e.toByteArray(se(re))}function ue(re,K,X,ce){let ye;for(ye=0;ye<ce&&!(ye+X>=K.length||ye>=re.length);++ye)K[ye+X]=re[ye];return ye}function me(re,K){return re instanceof K||re!=null&&re.constructor!=null&&re.constructor.name!=null&&re.constructor.name===K.name}function be(re){return re!==re}const _e=function(){const re="0123456789abcdef",K=new Array(256);for(let X=0;X<16;++X){const ce=X*16;for(let ye=0;ye<16;++ye)K[ce+ye]=re[X]+re[ye]}return K}();function xe(re){return typeof BigInt>"u"?Be:re}function Be(){throw new Error("BigInt not supported")}}(I_)),I_}var kh=_c();window.Buffer=kh.Buffer;window.process=ome;/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function GP(t){const e=Object.create(null);for(const r of t.split(","))e[r]=1;return r=>r in e}const gn={},k1=[],ol=()=>{},ume=()=>!1,Q6=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),KP=t=>t.startsWith("onUpdate:"),Li=Object.assign,XP=(t,e)=>{const r=t.indexOf(e);r>-1&&t.splice(r,1)},fme=Object.prototype.hasOwnProperty,Gr=(t,e)=>fme.call(t,e),$t=Array.isArray,T1=t=>e8(t)==="[object Map]",LJ=t=>e8(t)==="[object Set]",Wt=t=>typeof t=="function",Vn=t=>typeof t=="string",Pu=t=>typeof t=="symbol",An=t=>t!==null&&typeof t=="object",$J=t=>(An(t)||Wt(t))&&Wt(t.then)&&Wt(t.catch),UJ=Object.prototype.toString,e8=t=>UJ.call(t),dme=t=>e8(t).slice(8,-1),jJ=t=>e8(t)==="[object Object]",YP=t=>Vn(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,yg=GP(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),t8=t=>{const e=Object.create(null);return r=>e[r]||(e[r]=t(r))},hme=/-(\w)/g,Sa=t8(t=>t.replace(hme,(e,r)=>r?r.toUpperCase():"")),pme=/\B([A-Z])/g,s0=t8(t=>t.replace(pme,"-$1").toLowerCase()),Ru=t8(t=>t.charAt(0).toUpperCase()+t.slice(1)),P_=t8(t=>t?`on${Ru(t)}`:""),Bf=(t,e)=>!Object.is(t,e),R_=(t,...e)=>{for(let r=0;r<t.length;r++)t[r](...e)},VJ=(t,e,r,n=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:n,value:r})},mme=t=>{const e=parseFloat(t);return isNaN(e)?t:e},gme=t=>{const e=Vn(t)?Number(t):NaN;return isNaN(e)?t:e};let aN;const r8=()=>aN||(aN=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof Bi<"u"?Bi:{});function Dp(t){if($t(t)){const e={};for(let r=0;r<t.length;r++){const n=t[r],i=Vn(n)?wme(n):Dp(n);if(i)for(const s in i)e[s]=i[s]}return e}else if(Vn(t)||An(t))return t}const vme=/;(?![^(]*\))/g,yme=/:([^]+)/,bme=/\/\*[^]*?\*\//g;function wme(t){const e={};return t.replace(bme,"").split(vme).forEach(r=>{if(r){const n=r.split(yme);n.length>1&&(e[n[0].trim()]=n[1].trim())}}),e}function rc(t){let e="";if(Vn(t))e=t;else if($t(t))for(let r=0;r<t.length;r++){const n=rc(t[r]);n&&(e+=n+" ")}else if(An(t))for(const r in t)t[r]&&(e+=r+" ");return e.trim()}function _me(t){if(!t)return null;let{class:e,style:r}=t;return e&&!Vn(e)&&(t.class=rc(e)),r&&(t.style=Dp(r)),t}const xme="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Sme=GP(xme);function qJ(t){return!!t||t===""}const zJ=t=>!!(t&&t.__v_isRef===!0),Rr=t=>Vn(t)?t:t==null?"":$t(t)||An(t)&&(t.toString===UJ||!Wt(t.toString))?zJ(t)?Rr(t.value):JSON.stringify(t,HJ,2):String(t),HJ=(t,e)=>zJ(e)?HJ(t,e.value):T1(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((r,[n,i],s)=>(r[O_(n,s)+" =>"]=i,r),{})}:LJ(e)?{[`Set(${e.size})`]:[...e.values()].map(r=>O_(r))}:Pu(e)?O_(e):An(e)&&!$t(e)&&!jJ(e)?String(e):e,O_=(t,e="")=>{var r;return Pu(t)?`Symbol(${(r=t.description)!=null?r:e})`:t};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Ws;class WJ{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Ws,!e&&Ws&&(this.index=(Ws.scopes||(Ws.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,r;if(this.scopes)for(e=0,r=this.scopes.length;e<r;e++)this.scopes[e].pause();for(e=0,r=this.effects.length;e<r;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,r;if(this.scopes)for(e=0,r=this.scopes.length;e<r;e++)this.scopes[e].resume();for(e=0,r=this.effects.length;e<r;e++)this.effects[e].resume()}}run(e){if(this._active){const r=Ws;try{return Ws=this,e()}finally{Ws=r}}}on(){Ws=this}off(){Ws=this.parent}stop(e){if(this._active){this._active=!1;let r,n;for(r=0,n=this.effects.length;r<n;r++)this.effects[r].stop();for(this.effects.length=0,r=0,n=this.cleanups.length;r<n;r++)this.cleanups[r]();if(this.cleanups.length=0,this.scopes){for(r=0,n=this.scopes.length;r<n;r++)this.scopes[r].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0}}}function ZP(t){return new WJ(t)}function Eme(){return Ws}function ka(t,e=!1){Ws&&Ws.cleanups.push(t)}let xn;const B_=new WeakSet;class GJ{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Ws&&Ws.active&&Ws.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,B_.has(this)&&(B_.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||XJ(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,oN(this),YJ(this);const e=xn,r=ac;xn=this,ac=!0;try{return this.fn()}finally{ZJ(this),xn=e,ac=r,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)eR(e);this.deps=this.depsTail=void 0,oN(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?B_.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){OA(this)&&this.run()}get dirty(){return OA(this)}}let KJ=0,bg,wg;function XJ(t,e=!1){if(t.flags|=8,e){t.next=wg,wg=t;return}t.next=bg,bg=t}function JP(){KJ++}function QP(){if(--KJ>0)return;if(wg){let e=wg;for(wg=void 0;e;){const r=e.next;e.next=void 0,e.flags&=-9,e=r}}let t;for(;bg;){let e=bg;for(bg=void 0;e;){const r=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(n){t||(t=n)}e=r}}if(t)throw t}function YJ(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function ZJ(t){let e,r=t.depsTail,n=r;for(;n;){const i=n.prevDep;n.version===-1?(n===r&&(r=i),eR(n),kme(n)):e=n,n.dep.activeLink=n.prevActiveLink,n.prevActiveLink=void 0,n=i}t.deps=e,t.depsTail=r}function OA(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(JJ(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function JJ(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===Zg))return;t.globalVersion=Zg;const e=t.dep;if(t.flags|=2,e.version>0&&!t.isSSR&&t.deps&&!OA(t)){t.flags&=-3;return}const r=xn,n=ac;xn=t,ac=!0;try{YJ(t);const i=t.fn(t._value);(e.version===0||Bf(i,t._value))&&(t._value=i,e.version++)}catch(i){throw e.version++,i}finally{xn=r,ac=n,ZJ(t),t.flags&=-3}}function eR(t,e=!1){const{dep:r,prevSub:n,nextSub:i}=t;if(n&&(n.nextSub=i,t.prevSub=void 0),i&&(i.prevSub=n,t.nextSub=void 0),r.subs===t&&(r.subs=n,!n&&r.computed)){r.computed.flags&=-5;for(let s=r.computed.deps;s;s=s.nextDep)eR(s,!0)}!e&&!--r.sc&&r.map&&r.map.delete(r.key)}function kme(t){const{prevDep:e,nextDep:r}=t;e&&(e.nextDep=r,t.prevDep=void 0),r&&(r.prevDep=e,t.nextDep=void 0)}let ac=!0;const QJ=[];function cd(){QJ.push(ac),ac=!1}function ld(){const t=QJ.pop();ac=t===void 0?!0:t}function oN(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const r=xn;xn=void 0;try{e()}finally{xn=r}}}let Zg=0;class Tme{constructor(e,r){this.sub=e,this.dep=r,this.version=r.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class tR{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(e){if(!xn||!ac||xn===this.computed)return;let r=this.activeLink;if(r===void 0||r.sub!==xn)r=this.activeLink=new Tme(xn,this),xn.deps?(r.prevDep=xn.depsTail,xn.depsTail.nextDep=r,xn.depsTail=r):xn.deps=xn.depsTail=r,eQ(r);else if(r.version===-1&&(r.version=this.version,r.nextDep)){const n=r.nextDep;n.prevDep=r.prevDep,r.prevDep&&(r.prevDep.nextDep=n),r.prevDep=xn.depsTail,r.nextDep=void 0,xn.depsTail.nextDep=r,xn.depsTail=r,xn.deps===r&&(xn.deps=n)}return r}trigger(e){this.version++,Zg++,this.notify(e)}notify(e){JP();try{for(let r=this.subs;r;r=r.prevSub)r.sub.notify()&&r.sub.dep.notify()}finally{QP()}}}function eQ(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let n=e.deps;n;n=n.nextDep)eQ(n)}const r=t.dep.subs;r!==t&&(t.prevSub=r,r&&(r.nextSub=t)),t.dep.subs=t}}const O3=new WeakMap,oh=Symbol(""),BA=Symbol(""),Jg=Symbol("");function Ss(t,e,r){if(ac&&xn){let n=O3.get(t);n||O3.set(t,n=new Map);let i=n.get(r);i||(n.set(r,i=new tR),i.map=n,i.key=r),i.track()}}function Kl(t,e,r,n,i,s){const a=O3.get(t);if(!a){Zg++;return}const o=c=>{c&&c.trigger()};if(JP(),e==="clear")a.forEach(o);else{const c=$t(t),u=c&&YP(r);if(c&&r==="length"){const l=Number(n);a.forEach((f,d)=>{(d==="length"||d===Jg||!Pu(d)&&d>=l)&&o(f)})}else switch((r!==void 0||a.has(void 0))&&o(a.get(r)),u&&o(a.get(Jg)),e){case"add":c?u&&o(a.get("length")):(o(a.get(oh)),T1(t)&&o(a.get(BA)));break;case"delete":c||(o(a.get(oh)),T1(t)&&o(a.get(BA)));break;case"set":T1(t)&&o(a.get(oh));break}}QP()}function Ame(t,e){const r=O3.get(t);return r&&r.get(e)}function V0(t){const e=kt(t);return e===t?e:(Ss(e,"iterate",Jg),So(t)?e:e.map(Es))}function n8(t){return Ss(t=kt(t),"iterate",Jg),t}const Cme={__proto__:null,[Symbol.iterator](){return D_(this,Symbol.iterator,Es)},concat(...t){return V0(this).concat(...t.map(e=>$t(e)?V0(e):e))},entries(){return D_(this,"entries",t=>(t[1]=Es(t[1]),t))},every(t,e){return Rl(this,"every",t,e,void 0,arguments)},filter(t,e){return Rl(this,"filter",t,e,r=>r.map(Es),arguments)},find(t,e){return Rl(this,"find",t,e,Es,arguments)},findIndex(t,e){return Rl(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return Rl(this,"findLast",t,e,Es,arguments)},findLastIndex(t,e){return Rl(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return Rl(this,"forEach",t,e,void 0,arguments)},includes(...t){return M_(this,"includes",t)},indexOf(...t){return M_(this,"indexOf",t)},join(t){return V0(this).join(t)},lastIndexOf(...t){return M_(this,"lastIndexOf",t)},map(t,e){return Rl(this,"map",t,e,void 0,arguments)},pop(){return xm(this,"pop")},push(...t){return xm(this,"push",t)},reduce(t,...e){return cN(this,"reduce",t,e)},reduceRight(t,...e){return cN(this,"reduceRight",t,e)},shift(){return xm(this,"shift")},some(t,e){return Rl(this,"some",t,e,void 0,arguments)},splice(...t){return xm(this,"splice",t)},toReversed(){return V0(this).toReversed()},toSorted(t){return V0(this).toSorted(t)},toSpliced(...t){return V0(this).toSpliced(...t)},unshift(...t){return xm(this,"unshift",t)},values(){return D_(this,"values",Es)}};function D_(t,e,r){const n=n8(t),i=n[e]();return n!==t&&!So(t)&&(i._next=i.next,i.next=()=>{const s=i._next();return s.value&&(s.value=r(s.value)),s}),i}const Ime=Array.prototype;function Rl(t,e,r,n,i,s){const a=n8(t),o=a!==t&&!So(t),c=a[e];if(c!==Ime[e]){const f=c.apply(t,s);return o?Es(f):f}let u=r;a!==t&&(o?u=function(f,d){return r.call(this,Es(f),d,t)}:r.length>2&&(u=function(f,d){return r.call(this,f,d,t)}));const l=c.call(a,u,n);return o&&i?i(l):l}function cN(t,e,r,n){const i=n8(t);let s=r;return i!==t&&(So(t)?r.length>3&&(s=function(a,o,c){return r.call(this,a,o,c,t)}):s=function(a,o,c){return r.call(this,a,Es(o),c,t)}),i[e](s,...n)}function M_(t,e,r){const n=kt(t);Ss(n,"iterate",Jg);const i=n[e](...r);return(i===-1||i===!1)&&iR(r[0])?(r[0]=kt(r[0]),n[e](...r)):i}function xm(t,e,r=[]){cd(),JP();const n=kt(t)[e].apply(t,r);return QP(),ld(),n}const Pme=GP("__proto__,__v_isRef,__isVue"),tQ=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Pu));function Rme(t){Pu(t)||(t=String(t));const e=kt(this);return Ss(e,"has",t),e.hasOwnProperty(t)}class rQ{constructor(e=!1,r=!1){this._isReadonly=e,this._isShallow=r}get(e,r,n){if(r==="__v_skip")return e.__v_skip;const i=this._isReadonly,s=this._isShallow;if(r==="__v_isReactive")return!i;if(r==="__v_isReadonly")return i;if(r==="__v_isShallow")return s;if(r==="__v_raw")return n===(i?s?jme:aQ:s?sQ:iQ).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(n)?e:void 0;const a=$t(e);if(!i){let c;if(a&&(c=Cme[r]))return c;if(r==="hasOwnProperty")return Rme}const o=Reflect.get(e,r,Bn(e)?e:n);return(Pu(r)?tQ.has(r):Pme(r))||(i||Ss(e,"get",r),s)?o:Bn(o)?a&&YP(r)?o:o.value:An(o)?i?ly(o):yi(o):o}}class nQ extends rQ{constructor(e=!1){super(!1,e)}set(e,r,n,i){let s=e[r];if(!this._isShallow){const c=Th(s);if(!So(n)&&!Th(n)&&(s=kt(s),n=kt(n)),!$t(e)&&Bn(s)&&!Bn(n))return c?!1:(s.value=n,!0)}const a=$t(e)&&YP(r)?Number(r)<e.length:Gr(e,r),o=Reflect.set(e,r,n,Bn(e)?e:i);return e===kt(i)&&(a?Bf(n,s)&&Kl(e,"set",r,n):Kl(e,"add",r,n)),o}deleteProperty(e,r){const n=Gr(e,r);e[r];const i=Reflect.deleteProperty(e,r);return i&&n&&Kl(e,"delete",r,void 0),i}has(e,r){const n=Reflect.has(e,r);return(!Pu(r)||!tQ.has(r))&&Ss(e,"has",r),n}ownKeys(e){return Ss(e,"iterate",$t(e)?"length":oh),Reflect.ownKeys(e)}}class Ome extends rQ{constructor(e=!1){super(!0,e)}set(e,r){return!0}deleteProperty(e,r){return!0}}const Bme=new nQ,Dme=new Ome,Mme=new nQ(!0);const DA=t=>t,P2=t=>Reflect.getPrototypeOf(t);function Nme(t,e,r){return function(...n){const i=this.__v_raw,s=kt(i),a=T1(s),o=t==="entries"||t===Symbol.iterator&&a,c=t==="keys"&&a,u=i[t](...n),l=r?DA:e?MA:Es;return!e&&Ss(s,"iterate",c?BA:oh),{next(){const{value:f,done:d}=u.next();return d?{value:f,done:d}:{value:o?[l(f[0]),l(f[1])]:l(f),done:d}},[Symbol.iterator](){return this}}}}function R2(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function Fme(t,e){const r={get(i){const s=this.__v_raw,a=kt(s),o=kt(i);t||(Bf(i,o)&&Ss(a,"get",i),Ss(a,"get",o));const{has:c}=P2(a),u=e?DA:t?MA:Es;if(c.call(a,i))return u(s.get(i));if(c.call(a,o))return u(s.get(o));s!==a&&s.get(i)},get size(){const i=this.__v_raw;return!t&&Ss(kt(i),"iterate",oh),Reflect.get(i,"size",i)},has(i){const s=this.__v_raw,a=kt(s),o=kt(i);return t||(Bf(i,o)&&Ss(a,"has",i),Ss(a,"has",o)),i===o?s.has(i):s.has(i)||s.has(o)},forEach(i,s){const a=this,o=a.__v_raw,c=kt(o),u=e?DA:t?MA:Es;return!t&&Ss(c,"iterate",oh),o.forEach((l,f)=>i.call(s,u(l),u(f),a))}};return Li(r,t?{add:R2("add"),set:R2("set"),delete:R2("delete"),clear:R2("clear")}:{add(i){!e&&!So(i)&&!Th(i)&&(i=kt(i));const s=kt(this);return P2(s).has.call(s,i)||(s.add(i),Kl(s,"add",i,i)),this},set(i,s){!e&&!So(s)&&!Th(s)&&(s=kt(s));const a=kt(this),{has:o,get:c}=P2(a);let u=o.call(a,i);u||(i=kt(i),u=o.call(a,i));const l=c.call(a,i);return a.set(i,s),u?Bf(s,l)&&Kl(a,"set",i,s):Kl(a,"add",i,s),this},delete(i){const s=kt(this),{has:a,get:o}=P2(s);let c=a.call(s,i);c||(i=kt(i),c=a.call(s,i)),o&&o.call(s,i);const u=s.delete(i);return c&&Kl(s,"delete",i,void 0),u},clear(){const i=kt(this),s=i.size!==0,a=i.clear();return s&&Kl(i,"clear",void 0,void 0),a}}),["keys","values","entries",Symbol.iterator].forEach(i=>{r[i]=Nme(i,t,e)}),r}function rR(t,e){const r=Fme(t,e);return(n,i,s)=>i==="__v_isReactive"?!t:i==="__v_isReadonly"?t:i==="__v_raw"?n:Reflect.get(Gr(r,i)&&i in n?r:n,i,s)}const Lme={get:rR(!1,!1)},$me={get:rR(!1,!0)},Ume={get:rR(!0,!1)};const iQ=new WeakMap,sQ=new WeakMap,aQ=new WeakMap,jme=new WeakMap;function Vme(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function qme(t){return t.__v_skip||!Object.isExtensible(t)?0:Vme(dme(t))}function yi(t){return Th(t)?t:nR(t,!1,Bme,Lme,iQ)}function oQ(t){return nR(t,!1,Mme,$me,sQ)}function ly(t){return nR(t,!0,Dme,Ume,aQ)}function nR(t,e,r,n,i){if(!An(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const s=i.get(t);if(s)return s;const a=qme(t);if(a===0)return t;const o=new Proxy(t,a===2?n:r);return i.set(t,o),o}function A1(t){return Th(t)?A1(t.__v_raw):!!(t&&t.__v_isReactive)}function Th(t){return!!(t&&t.__v_isReadonly)}function So(t){return!!(t&&t.__v_isShallow)}function iR(t){return t?!!t.__v_raw:!1}function kt(t){const e=t&&t.__v_raw;return e?kt(e):t}function a0(t){return!Gr(t,"__v_skip")&&Object.isExtensible(t)&&VJ(t,"__v_skip",!0),t}const Es=t=>An(t)?yi(t):t,MA=t=>An(t)?ly(t):t;function Bn(t){return t?t.__v_isRef===!0:!1}function ze(t){return cQ(t,!1)}function Dt(t){return cQ(t,!0)}function cQ(t,e){return Bn(t)?t:new zme(t,e)}class zme{constructor(e,r){this.dep=new tR,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=r?e:kt(e),this._value=r?e:Es(e),this.__v_isShallow=r}get value(){return this.dep.track(),this._value}set value(e){const r=this._rawValue,n=this.__v_isShallow||So(e)||Th(e);e=n?e:kt(e),Bf(e,r)&&(this._rawValue=e,this._value=n?e:Es(e),this.dep.trigger())}}function Ve(t){return Bn(t)?t.value:t}const Hme={get:(t,e,r)=>e==="__v_raw"?t:Ve(Reflect.get(t,e,r)),set:(t,e,r,n)=>{const i=t[e];return Bn(i)&&!Bn(r)?(i.value=r,!0):Reflect.set(t,e,r,n)}};function lQ(t){return A1(t)?t:new Proxy(t,Hme)}function sR(t){const e=$t(t)?new Array(t.length):{};for(const r in t)e[r]=uQ(t,r);return e}class Wme{constructor(e,r,n){this._object=e,this._key=r,this._defaultValue=n,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return Ame(kt(this._object),this._key)}}class Gme{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function Nt(t,e,r){return Bn(t)?t:Wt(t)?new Gme(t):An(t)&&arguments.length>1?uQ(t,e,r):ze(t)}function uQ(t,e,r){const n=t[e];return Bn(n)?n:new Wme(t,e,r)}class Kme{constructor(e,r,n){this.fn=e,this.setter=r,this._value=void 0,this.dep=new tR(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Zg-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!r,this.isSSR=n}notify(){if(this.flags|=16,!(this.flags&8)&&xn!==this)return XJ(this,!0),!0}get value(){const e=this.dep.track();return JJ(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function Xme(t,e,r=!1){let n,i;return Wt(t)?n=t:(n=t.get,i=t.set),new Kme(n,i,r)}const O2={},B3=new WeakMap;let Ud;function Yme(t,e=!1,r=Ud){if(r){let n=B3.get(r);n||B3.set(r,n=[]),n.push(t)}}function Zme(t,e,r=gn){const{immediate:n,deep:i,once:s,scheduler:a,augmentJob:o,call:c}=r,u=_=>i?_:So(_)||i===!1||i===0?Xl(_,1):Xl(_);let l,f,d,h,m=!1,p=!1;if(Bn(t)?(f=()=>t.value,m=So(t)):A1(t)?(f=()=>u(t),m=!0):$t(t)?(p=!0,m=t.some(_=>A1(_)||So(_)),f=()=>t.map(_=>{if(Bn(_))return _.value;if(A1(_))return u(_);if(Wt(_))return c?c(_,2):_()})):Wt(t)?e?f=c?()=>c(t,2):t:f=()=>{if(d){cd();try{d()}finally{ld()}}const _=Ud;Ud=l;try{return c?c(t,3,[h]):t(h)}finally{Ud=_}}:f=ol,e&&i){const _=f,x=i===!0?1/0:i;f=()=>Xl(_(),x)}const g=Eme(),v=()=>{l.stop(),g&&g.active&&XP(g.effects,l)};if(s&&e){const _=e;e=(...x)=>{_(...x),v()}}let y=p?new Array(t.length).fill(O2):O2;const b=_=>{if(!(!(l.flags&1)||!l.dirty&&!_))if(e){const x=l.run();if(i||m||(p?x.some((E,k)=>Bf(E,y[k])):Bf(x,y))){d&&d();const E=Ud;Ud=l;try{const k=[x,y===O2?void 0:p&&y[0]===O2?[]:y,h];c?c(e,3,k):e(...k),y=x}finally{Ud=E}}}else l.run()};return o&&o(b),l=new GJ(f),l.scheduler=a?()=>a(b,!1):b,h=_=>Yme(_,!1,l),d=l.onStop=()=>{const _=B3.get(l);if(_){if(c)c(_,4);else for(const x of _)x();B3.delete(l)}},e?n?b(!0):y=l.run():a?a(b.bind(null,!0),!0):l.run(),v.pause=l.pause.bind(l),v.resume=l.resume.bind(l),v.stop=v,v}function Xl(t,e=1/0,r){if(e<=0||!An(t)||t.__v_skip||(r=r||new Set,r.has(t)))return t;if(r.add(t),e--,Bn(t))Xl(t.value,e,r);else if($t(t))for(let n=0;n<t.length;n++)Xl(t[n],e,r);else if(LJ(t)||T1(t))t.forEach(n=>{Xl(n,e,r)});else if(jJ(t)){for(const n in t)Xl(t[n],e,r);for(const n of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,n)&&Xl(t[n],e,r)}return t}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function uy(t,e,r,n){try{return n?t(...n):t()}catch(i){i8(i,e,r)}}function mc(t,e,r,n){if(Wt(t)){const i=uy(t,e,r,n);return i&&$J(i)&&i.catch(s=>{i8(s,e,r)}),i}if($t(t)){const i=[];for(let s=0;s<t.length;s++)i.push(mc(t[s],e,r,n));return i}}function i8(t,e,r,n=!0){const i=e?e.vnode:null,{errorHandler:s,throwUnhandledErrorInProduction:a}=e&&e.appContext.config||gn;if(e){let o=e.parent;const c=e.proxy,u=`https://vuejs.org/error-reference/#runtime-${r}`;for(;o;){const l=o.ec;if(l){for(let f=0;f<l.length;f++)if(l[f](t,c,u)===!1)return}o=o.parent}if(s){cd(),uy(s,null,10,[t,c,u]),ld();return}}Jme(t,r,i,n,a)}function Jme(t,e,r,n=!0,i=!1){if(i)throw t;console.error(t)}const Xs=[];let Wc=-1;const C1=[];let mf=null,l1=0;const fQ=Promise.resolve();let D3=null;function Cn(t){const e=D3||fQ;return t?e.then(this?t.bind(this):t):e}function Qme(t){let e=Wc+1,r=Xs.length;for(;e<r;){const n=e+r>>>1,i=Xs[n],s=Qg(i);s<t||s===t&&i.flags&2?e=n+1:r=n}return e}function aR(t){if(!(t.flags&1)){const e=Qg(t),r=Xs[Xs.length-1];!r||!(t.flags&2)&&e>=Qg(r)?Xs.push(t):Xs.splice(Qme(e),0,t),t.flags|=1,dQ()}}function dQ(){D3||(D3=fQ.then(pQ))}function ege(t){$t(t)?C1.push(...t):mf&&t.id===-1?mf.splice(l1+1,0,t):t.flags&1||(C1.push(t),t.flags|=1),dQ()}function lN(t,e,r=Wc+1){for(;r<Xs.length;r++){const n=Xs[r];if(n&&n.flags&2){if(t&&n.id!==t.uid)continue;Xs.splice(r,1),r--,n.flags&4&&(n.flags&=-2),n(),n.flags&4||(n.flags&=-2)}}}function hQ(t){if(C1.length){const e=[...new Set(C1)].sort((r,n)=>Qg(r)-Qg(n));if(C1.length=0,mf){mf.push(...e);return}for(mf=e,l1=0;l1<mf.length;l1++){const r=mf[l1];r.flags&4&&(r.flags&=-2),r.flags&8||r(),r.flags&=-2}mf=null,l1=0}}const Qg=t=>t.id==null?t.flags&2?-1:1/0:t.id;function pQ(t){try{for(Wc=0;Wc<Xs.length;Wc++){const e=Xs[Wc];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),uy(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;Wc<Xs.length;Wc++){const e=Xs[Wc];e&&(e.flags&=-2)}Wc=-1,Xs.length=0,hQ(),D3=null,(Xs.length||C1.length)&&pQ()}}let Ki=null,mQ=null;function M3(t){const e=Ki;return Ki=t,mQ=t&&t.type.__scopeId||null,e}function Ge(t,e=Ki,r){if(!e||t._n)return t;const n=(...i)=>{n._d&&SN(-1);const s=M3(e);let a;try{a=t(...i)}finally{M3(s),n._d&&SN(1)}return a};return n._n=!0,n._c=!0,n._d=!0,n}function us(t,e){if(Ki===null)return t;const r=c8(Ki),n=t.dirs||(t.dirs=[]);for(let i=0;i<e.length;i++){let[s,a,o,c=gn]=e[i];s&&(Wt(s)&&(s={mounted:s,updated:s}),s.deep&&Xl(a),n.push({dir:s,instance:r,value:a,oldValue:void 0,arg:o,modifiers:c}))}return t}function Td(t,e,r,n){const i=t.dirs,s=e&&e.dirs;for(let a=0;a<i.length;a++){const o=i[a];s&&(o.oldValue=s[a].value);let c=o.dir[n];c&&(cd(),mc(c,r,8,[t.el,o,t,e]),ld())}}const gQ=Symbol("_vte"),vQ=t=>t.__isTeleport,_g=t=>t&&(t.disabled||t.disabled===""),uN=t=>t&&(t.defer||t.defer===""),fN=t=>typeof SVGElement<"u"&&t instanceof SVGElement,dN=t=>typeof MathMLElement=="function"&&t instanceof MathMLElement,NA=(t,e)=>{const r=t&&t.to;return Vn(r)?e?e(r):null:r},yQ={name:"Teleport",__isTeleport:!0,process(t,e,r,n,i,s,a,o,c,u){const{mc:l,pc:f,pbc:d,o:{insert:h,querySelector:m,createText:p,createComment:g}}=u,v=_g(e.props);let{shapeFlag:y,children:b,dynamicChildren:_}=e;if(t==null){const x=e.el=p(""),E=e.anchor=p("");h(x,r,n),h(E,r,n);const k=(D,z)=>{y&16&&(i&&i.isCE&&(i.ce._teleportTarget=D),l(b,D,z,i,s,a,o,c))},B=()=>{const D=e.target=NA(e.props,m),z=bQ(D,e,p,h);D&&(a!=="svg"&&fN(D)?a="svg":a!=="mathml"&&dN(D)&&(a="mathml"),v||(k(D,z),t3(e,!1)))};v&&(k(r,E),t3(e,!0)),uN(e.props)?Hs(()=>{B(),e.el.__isMounted=!0},s):B()}else{if(uN(e.props)&&!t.el.__isMounted){Hs(()=>{yQ.process(t,e,r,n,i,s,a,o,c,u),delete t.el.__isMounted},s);return}e.el=t.el,e.targetStart=t.targetStart;const x=e.anchor=t.anchor,E=e.target=t.target,k=e.targetAnchor=t.targetAnchor,B=_g(t.props),D=B?r:E,z=B?x:k;if(a==="svg"||fN(E)?a="svg":(a==="mathml"||dN(E))&&(a="mathml"),_?(d(t.dynamicChildren,_,D,i,s,a,o),dR(t,e,!0)):c||f(t,e,D,z,i,s,a,o,!1),v)B?e.props&&t.props&&e.props.to!==t.props.to&&(e.props.to=t.props.to):B2(e,r,x,u,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const U=e.target=NA(e.props,m);U&&B2(e,U,null,u,0)}else B&&B2(e,E,k,u,1);t3(e,v)}},remove(t,e,r,{um:n,o:{remove:i}},s){const{shapeFlag:a,children:o,anchor:c,targetStart:u,targetAnchor:l,target:f,props:d}=t;if(f&&(i(u),i(l)),s&&i(c),a&16){const h=s||!_g(d);for(let m=0;m<o.length;m++){const p=o[m];n(p,e,r,h,!!p.dynamicChildren)}}},move:B2,hydrate:tge};function B2(t,e,r,{o:{insert:n},m:i},s=2){s===0&&n(t.targetAnchor,e,r);const{el:a,anchor:o,shapeFlag:c,children:u,props:l}=t,f=s===2;if(f&&n(a,e,r),(!f||_g(l))&&c&16)for(let d=0;d<u.length;d++)i(u[d],e,r,2);f&&n(o,e,r)}function tge(t,e,r,n,i,s,{o:{nextSibling:a,parentNode:o,querySelector:c,insert:u,createText:l}},f){const d=e.target=NA(e.props,c);if(d){const h=_g(e.props),m=d._lpa||d.firstChild;if(e.shapeFlag&16)if(h)e.anchor=f(a(t),e,o(t),r,n,i,s),e.targetStart=m,e.targetAnchor=m&&a(m);else{e.anchor=a(t);let p=m;for(;p;){if(p&&p.nodeType===8){if(p.data==="teleport start anchor")e.targetStart=p;else if(p.data==="teleport anchor"){e.targetAnchor=p,d._lpa=e.targetAnchor&&a(e.targetAnchor);break}}p=a(p)}e.targetAnchor||bQ(d,e,l,u),f(m&&a(m),e,d,r,n,i,s)}t3(e,h)}return e.anchor&&a(e.anchor)}const rge=yQ;function t3(t,e){const r=t.ctx;if(r&&r.ut){let n,i;for(e?(n=t.el,i=t.anchor):(n=t.targetStart,i=t.targetAnchor);n&&n!==i;)n.nodeType===1&&n.setAttribute("data-v-owner",r.uid),n=n.nextSibling;r.ut()}}function bQ(t,e,r,n){const i=e.targetStart=r(""),s=e.targetAnchor=r("");return i[gQ]=s,t&&(n(i,t),n(s,t)),s}const gf=Symbol("_leaveCb"),D2=Symbol("_enterCb");function wQ(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return hn(()=>{t.isMounted=!0}),hs(()=>{t.isUnmounting=!0}),t}const ao=[Function,Array],_Q={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:ao,onEnter:ao,onAfterEnter:ao,onEnterCancelled:ao,onBeforeLeave:ao,onLeave:ao,onAfterLeave:ao,onLeaveCancelled:ao,onBeforeAppear:ao,onAppear:ao,onAfterAppear:ao,onAppearCancelled:ao},xQ=t=>{const e=t.subTree;return e.component?xQ(e.component):e},nge={name:"BaseTransition",props:_Q,setup(t,{slots:e}){const r=mR(),n=wQ();return()=>{const i=e.default&&oR(e.default(),!0);if(!i||!i.length)return;const s=SQ(i),a=kt(t),{mode:o}=a;if(n.isLeaving)return N_(s);const c=hN(s);if(!c)return N_(s);let u=ev(c,a,n,r,f=>u=f);c.type!==Cs&&Ah(c,u);let l=r.subTree&&hN(r.subTree);if(l&&l.type!==Cs&&!Vd(c,l)&&xQ(r).type!==Cs){let f=ev(l,a,n,r);if(Ah(l,f),o==="out-in"&&c.type!==Cs)return n.isLeaving=!0,f.afterLeave=()=>{n.isLeaving=!1,r.job.flags&8||r.update(),delete f.afterLeave,l=void 0},N_(s);o==="in-out"&&c.type!==Cs?f.delayLeave=(d,h,m)=>{const p=EQ(n,l);p[String(l.key)]=l,d[gf]=()=>{h(),d[gf]=void 0,delete u.delayedLeave,l=void 0},u.delayedLeave=()=>{m(),delete u.delayedLeave,l=void 0}}:l=void 0}else l&&(l=void 0);return s}}};function SQ(t){let e=t[0];if(t.length>1){for(const r of t)if(r.type!==Cs){e=r;break}}return e}const ige=nge;function EQ(t,e){const{leavingVNodes:r}=t;let n=r.get(e.type);return n||(n=Object.create(null),r.set(e.type,n)),n}function ev(t,e,r,n,i){const{appear:s,mode:a,persisted:o=!1,onBeforeEnter:c,onEnter:u,onAfterEnter:l,onEnterCancelled:f,onBeforeLeave:d,onLeave:h,onAfterLeave:m,onLeaveCancelled:p,onBeforeAppear:g,onAppear:v,onAfterAppear:y,onAppearCancelled:b}=e,_=String(t.key),x=EQ(r,t),E=(D,z)=>{D&&mc(D,n,9,z)},k=(D,z)=>{const U=z[1];E(D,z),$t(D)?D.every(S=>S.length<=1)&&U():D.length<=1&&U()},B={mode:a,persisted:o,beforeEnter(D){let z=c;if(!r.isMounted)if(s)z=g||c;else return;D[gf]&&D[gf](!0);const U=x[_];U&&Vd(t,U)&&U.el[gf]&&U.el[gf](),E(z,[D])},enter(D){let z=u,U=l,S=f;if(!r.isMounted)if(s)z=v||u,U=y||l,S=b||f;else return;let T=!1;const w=D[D2]=A=>{T||(T=!0,A?E(S,[D]):E(U,[D]),B.delayedLeave&&B.delayedLeave(),D[D2]=void 0)};z?k(z,[D,w]):w()},leave(D,z){const U=String(t.key);if(D[D2]&&D[D2](!0),r.isUnmounting)return z();E(d,[D]);let S=!1;const T=D[gf]=w=>{S||(S=!0,z(),w?E(p,[D]):E(m,[D]),D[gf]=void 0,x[U]===t&&delete x[U])};x[U]=t,h?k(h,[D,T]):T()},clone(D){const z=ev(D,e,r,n,i);return i&&i(z),z}};return B}function N_(t){if(s8(t))return t=yu(t),t.children=null,t}function hN(t){if(!s8(t))return vQ(t.type)&&t.children?SQ(t.children):t;const{shapeFlag:e,children:r}=t;if(r){if(e&16)return r[0];if(e&32&&Wt(r.default))return r.default()}}function Ah(t,e){t.shapeFlag&6&&t.component?(t.transition=e,Ah(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function oR(t,e=!1,r){let n=[],i=0;for(let s=0;s<t.length;s++){let a=t[s];const o=r==null?a.key:String(r)+String(a.key!=null?a.key:s);a.type===ar?(a.patchFlag&128&&i++,n=n.concat(oR(a.children,e,o))):(e||a.type!==Cs)&&n.push(o!=null?yu(a,{key:o}):a)}if(i>1)for(let s=0;s<n.length;s++)n[s].patchFlag=-2;return n}/*! #__NO_SIDE_EFFECTS__ */function Pn(t,e){return Wt(t)?Li({name:t.name},e,{setup:t}):t}function kQ(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function N3(t,e,r,n,i=!1){if($t(t)){t.forEach((m,p)=>N3(m,e&&($t(e)?e[p]:e),r,n,i));return}if(I1(n)&&!i){n.shapeFlag&512&&n.type.__asyncResolved&&n.component.subTree.component&&N3(t,e,r,n.component.subTree);return}const s=n.shapeFlag&4?c8(n.component):n.el,a=i?null:s,{i:o,r:c}=t,u=e&&e.r,l=o.refs===gn?o.refs={}:o.refs,f=o.setupState,d=kt(f),h=f===gn?()=>!1:m=>Gr(d,m);if(u!=null&&u!==c&&(Vn(u)?(l[u]=null,h(u)&&(f[u]=null)):Bn(u)&&(u.value=null)),Wt(c))uy(c,o,12,[a,l]);else{const m=Vn(c),p=Bn(c);if(m||p){const g=()=>{if(t.f){const v=m?h(c)?f[c]:l[c]:c.value;i?$t(v)&&XP(v,s):$t(v)?v.includes(s)||v.push(s):m?(l[c]=[s],h(c)&&(f[c]=l[c])):(c.value=[s],t.k&&(l[t.k]=c.value))}else m?(l[c]=a,h(c)&&(f[c]=a)):p&&(c.value=a,t.k&&(l[t.k]=a))};a?(g.id=-1,Hs(g,r)):g()}}}r8().requestIdleCallback;r8().cancelIdleCallback;const I1=t=>!!t.type.__asyncLoader,s8=t=>t.type.__isKeepAlive;function sge(t,e){AQ(t,"a",e)}function TQ(t,e){AQ(t,"da",e)}function AQ(t,e,r=os){const n=t.__wdc||(t.__wdc=()=>{let i=r;for(;i;){if(i.isDeactivated)return;i=i.parent}return t()});if(a8(e,n,r),r){let i=r.parent;for(;i&&i.parent;)s8(i.parent.vnode)&&age(n,e,r,i),i=i.parent}}function age(t,e,r,n){const i=a8(e,t,n,!0);ta(()=>{XP(n[e],i)},r)}function a8(t,e,r=os,n=!1){if(r){const i=r[t]||(r[t]=[]),s=e.__weh||(e.__weh=(...a)=>{cd();const o=hy(r),c=mc(e,r,t,a);return o(),ld(),c});return n?i.unshift(s):i.push(s),s}}const Ou=t=>(e,r=os)=>{(!rv||t==="sp")&&a8(t,(...n)=>e(...n),r)},fy=Ou("bm"),hn=Ou("m"),oge=Ou("bu"),cR=Ou("u"),hs=Ou("bum"),ta=Ou("um"),cge=Ou("sp"),lge=Ou("rtg"),uge=Ou("rtc");function fge(t,e=os){a8("ec",t,e)}const lR="components",dge="directives";function hge(t,e){return uR(lR,t,!0,e)||t}const CQ=Symbol.for("v-ndc");function IQ(t){return Vn(t)?uR(lR,t,!1)||t:t||CQ}function ud(t){return uR(dge,t)}function uR(t,e,r=!0,n=!1){const i=Ki||os;if(i){const s=i.type;if(t===lR){const o=Zge(s,!1);if(o&&(o===e||o===Sa(e)||o===Ru(Sa(e))))return s}const a=pN(i[t]||s[t],e)||pN(i.appContext[t],e);return!a&&n?s:a}}function pN(t,e){return t&&(t[e]||t[Sa(e)]||t[Ru(Sa(e))])}function F3(t,e,r,n){let i;const s=r,a=$t(t);if(a||Vn(t)){const o=a&&A1(t);let c=!1;o&&(c=!So(t),t=n8(t)),i=new Array(t.length);for(let u=0,l=t.length;u<l;u++)i[u]=e(c?Es(t[u]):t[u],u,void 0,s)}else if(typeof t=="number"){i=new Array(t);for(let o=0;o<t;o++)i[o]=e(o+1,o,void 0,s)}else if(An(t))if(t[Symbol.iterator])i=Array.from(t,(o,c)=>e(o,c,void 0,s));else{const o=Object.keys(t);i=new Array(o.length);for(let c=0,u=o.length;c<u;c++){const l=o[c];i[c]=e(t[l],l,c,s)}}else i=[];return i}function PQ(t,e,r={},n,i){if(Ki.ce||Ki.parent&&I1(Ki.parent)&&Ki.parent.ce)return e!=="default"&&(r.name=e),Vt(),hr(ar,null,[ae("slot",r,n)],64);let s=t[e];s&&s._c&&(s._d=!1),Vt();const a=s&&RQ(s(r)),o=r.key||a&&a.key,c=hr(ar,{key:(o&&!Pu(o)?o:`_${e}`)+""},a||[],a&&t._===1?64:-2);return c.scopeId&&(c.slotScopeIds=[c.scopeId+"-s"]),s&&s._c&&(s._d=!0),c}function RQ(t){return t.some(e=>j1(e)?!(e.type===Cs||e.type===ar&&!RQ(e.children)):!0)?t:null}const FA=t=>t?ZQ(t)?c8(t):FA(t.parent):null,xg=Li(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>FA(t.parent),$root:t=>FA(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>BQ(t),$forceUpdate:t=>t.f||(t.f=()=>{aR(t.update)}),$nextTick:t=>t.n||(t.n=Cn.bind(t.proxy)),$watch:t=>Dge.bind(t)}),F_=(t,e)=>t!==gn&&!t.__isScriptSetup&&Gr(t,e),pge={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:r,setupState:n,data:i,props:s,accessCache:a,type:o,appContext:c}=t;let u;if(e[0]!=="$"){const h=a[e];if(h!==void 0)switch(h){case 1:return n[e];case 2:return i[e];case 4:return r[e];case 3:return s[e]}else{if(F_(n,e))return a[e]=1,n[e];if(i!==gn&&Gr(i,e))return a[e]=2,i[e];if((u=t.propsOptions[0])&&Gr(u,e))return a[e]=3,s[e];if(r!==gn&&Gr(r,e))return a[e]=4,r[e];LA&&(a[e]=0)}}const l=xg[e];let f,d;if(l)return e==="$attrs"&&Ss(t.attrs,"get",""),l(t);if((f=o.__cssModules)&&(f=f[e]))return f;if(r!==gn&&Gr(r,e))return a[e]=4,r[e];if(d=c.config.globalProperties,Gr(d,e))return d[e]},set({_:t},e,r){const{data:n,setupState:i,ctx:s}=t;return F_(i,e)?(i[e]=r,!0):n!==gn&&Gr(n,e)?(n[e]=r,!0):Gr(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(s[e]=r,!0)},has({_:{data:t,setupState:e,accessCache:r,ctx:n,appContext:i,propsOptions:s}},a){let o;return!!r[a]||t!==gn&&Gr(t,a)||F_(e,a)||(o=s[0])&&Gr(o,a)||Gr(n,a)||Gr(xg,a)||Gr(i.config.globalProperties,a)},defineProperty(t,e,r){return r.get!=null?t._.accessCache[e]=0:Gr(r,"value")&&this.set(t,e,r.value,null),Reflect.defineProperty(t,e,r)}};function mN(t){return $t(t)?t.reduce((e,r)=>(e[r]=null,e),{}):t}let LA=!0;function mge(t){const e=BQ(t),r=t.proxy,n=t.ctx;LA=!1,e.beforeCreate&&gN(e.beforeCreate,t,"bc");const{data:i,computed:s,methods:a,watch:o,provide:c,inject:u,created:l,beforeMount:f,mounted:d,beforeUpdate:h,updated:m,activated:p,deactivated:g,beforeDestroy:v,beforeUnmount:y,destroyed:b,unmounted:_,render:x,renderTracked:E,renderTriggered:k,errorCaptured:B,serverPrefetch:D,expose:z,inheritAttrs:U,components:S,directives:T,filters:w}=e;if(u&&gge(u,n,null),a)for(const P in a){const O=a[P];Wt(O)&&(n[P]=O.bind(r))}if(i){const P=i.call(r,r);An(P)&&(t.data=yi(P))}if(LA=!0,s)for(const P in s){const O=s[P],R=Wt(O)?O.bind(r,r):Wt(O.get)?O.get.bind(r,r):ol,I=!Wt(O)&&Wt(O.set)?O.set.bind(r):ol,C=ve({get:R,set:I});Object.defineProperty(n,P,{enumerable:!0,configurable:!0,get:()=>C.value,set:M=>C.value=M})}if(o)for(const P in o)OQ(o[P],n,r,P);if(c){const P=Wt(c)?c.call(r):c;Reflect.ownKeys(P).forEach(O=>{dn(O,P[O])})}l&&gN(l,t,"c");function F(P,O){$t(O)?O.forEach(R=>P(R.bind(r))):O&&P(O.bind(r))}if(F(fy,f),F(hn,d),F(oge,h),F(cR,m),F(sge,p),F(TQ,g),F(fge,B),F(uge,E),F(lge,k),F(hs,y),F(ta,_),F(cge,D),$t(z))if(z.length){const P=t.exposed||(t.exposed={});z.forEach(O=>{Object.defineProperty(P,O,{get:()=>r[O],set:R=>r[O]=R})})}else t.exposed||(t.exposed={});x&&t.render===ol&&(t.render=x),U!=null&&(t.inheritAttrs=U),S&&(t.components=S),T&&(t.directives=T),D&&kQ(t)}function gge(t,e,r=ol){$t(t)&&(t=$A(t));for(const n in t){const i=t[n];let s;An(i)?"default"in i?s=Zt(i.from||n,i.default,!0):s=Zt(i.from||n):s=Zt(i),Bn(s)?Object.defineProperty(e,n,{enumerable:!0,configurable:!0,get:()=>s.value,set:a=>s.value=a}):e[n]=s}}function gN(t,e,r){mc($t(t)?t.map(n=>n.bind(e.proxy)):t.bind(e.proxy),e,r)}function OQ(t,e,r,n){let i=n.includes(".")?HQ(r,n):()=>r[n];if(Vn(t)){const s=e[t];Wt(s)&&Ft(i,s)}else if(Wt(t))Ft(i,t.bind(r));else if(An(t))if($t(t))t.forEach(s=>OQ(s,e,r,n));else{const s=Wt(t.handler)?t.handler.bind(r):e[t.handler];Wt(s)&&Ft(i,s,t)}}function BQ(t){const e=t.type,{mixins:r,extends:n}=e,{mixins:i,optionsCache:s,config:{optionMergeStrategies:a}}=t.appContext,o=s.get(e);let c;return o?c=o:!i.length&&!r&&!n?c=e:(c={},i.length&&i.forEach(u=>L3(c,u,a,!0)),L3(c,e,a)),An(e)&&s.set(e,c),c}function L3(t,e,r,n=!1){const{mixins:i,extends:s}=e;s&&L3(t,s,r,!0),i&&i.forEach(a=>L3(t,a,r,!0));for(const a in e)if(!(n&&a==="expose")){const o=vge[a]||r&&r[a];t[a]=o?o(t[a],e[a]):e[a]}return t}const vge={data:vN,props:yN,emits:yN,methods:eg,computed:eg,beforeCreate:zs,created:zs,beforeMount:zs,mounted:zs,beforeUpdate:zs,updated:zs,beforeDestroy:zs,beforeUnmount:zs,destroyed:zs,unmounted:zs,activated:zs,deactivated:zs,errorCaptured:zs,serverPrefetch:zs,components:eg,directives:eg,watch:bge,provide:vN,inject:yge};function vN(t,e){return e?t?function(){return Li(Wt(t)?t.call(this,this):t,Wt(e)?e.call(this,this):e)}:e:t}function yge(t,e){return eg($A(t),$A(e))}function $A(t){if($t(t)){const e={};for(let r=0;r<t.length;r++)e[t[r]]=t[r];return e}return t}function zs(t,e){return t?[...new Set([].concat(t,e))]:e}function eg(t,e){return t?Li(Object.create(null),t,e):e}function yN(t,e){return t?$t(t)&&$t(e)?[...new Set([...t,...e])]:Li(Object.create(null),mN(t),mN(e??{})):e}function bge(t,e){if(!t)return e;if(!e)return t;const r=Li(Object.create(null),t);for(const n in e)r[n]=zs(t[n],e[n]);return r}function DQ(){return{app:null,config:{isNativeTag:ume,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let wge=0;function _ge(t,e){return function(n,i=null){Wt(n)||(n=Li({},n)),i!=null&&!An(i)&&(i=null);const s=DQ(),a=new WeakSet,o=[];let c=!1;const u=s.app={_uid:wge++,_component:n,_props:i,_container:null,_context:s,_instance:null,version:Qge,get config(){return s.config},set config(l){},use(l,...f){return a.has(l)||(l&&Wt(l.install)?(a.add(l),l.install(u,...f)):Wt(l)&&(a.add(l),l(u,...f))),u},mixin(l){return s.mixins.includes(l)||s.mixins.push(l),u},component(l,f){return f?(s.components[l]=f,u):s.components[l]},directive(l,f){return f?(s.directives[l]=f,u):s.directives[l]},mount(l,f,d){if(!c){const h=u._ceVNode||ae(n,i);return h.appContext=s,d===!0?d="svg":d===!1&&(d=void 0),t(h,l,d),c=!0,u._container=l,l.__vue_app__=u,c8(h.component)}},onUnmount(l){o.push(l)},unmount(){c&&(mc(o,u._instance,16),t(null,u._container),delete u._container.__vue_app__)},provide(l,f){return s.provides[l]=f,u},runWithContext(l){const f=P1;P1=u;try{return l()}finally{P1=f}}};return u}}let P1=null;function dn(t,e){if(os){let r=os.provides;const n=os.parent&&os.parent.provides;n===r&&(r=os.provides=Object.create(n)),r[t]=e}}function Zt(t,e,r=!1){const n=os||Ki;if(n||P1){const i=P1?P1._context.provides:n?n.parent==null?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:void 0;if(i&&t in i)return i[t];if(arguments.length>1)return r&&Wt(e)?e.call(n&&n.proxy):e}}const MQ={},NQ=()=>Object.create(MQ),FQ=t=>Object.getPrototypeOf(t)===MQ;function xge(t,e,r,n=!1){const i={},s=NQ();t.propsDefaults=Object.create(null),LQ(t,e,i,s);for(const a in t.propsOptions[0])a in i||(i[a]=void 0);r?t.props=n?i:oQ(i):t.type.props?t.props=i:t.props=s,t.attrs=s}function Sge(t,e,r,n){const{props:i,attrs:s,vnode:{patchFlag:a}}=t,o=kt(i),[c]=t.propsOptions;let u=!1;if((n||a>0)&&!(a&16)){if(a&8){const l=t.vnode.dynamicProps;for(let f=0;f<l.length;f++){let d=l[f];if(o8(t.emitsOptions,d))continue;const h=e[d];if(c)if(Gr(s,d))h!==s[d]&&(s[d]=h,u=!0);else{const m=Sa(d);i[m]=UA(c,o,m,h,t,!1)}else h!==s[d]&&(s[d]=h,u=!0)}}}else{LQ(t,e,i,s)&&(u=!0);let l;for(const f in o)(!e||!Gr(e,f)&&((l=s0(f))===f||!Gr(e,l)))&&(c?r&&(r[f]!==void 0||r[l]!==void 0)&&(i[f]=UA(c,o,f,void 0,t,!0)):delete i[f]);if(s!==o)for(const f in s)(!e||!Gr(e,f))&&(delete s[f],u=!0)}u&&Kl(t.attrs,"set","")}function LQ(t,e,r,n){const[i,s]=t.propsOptions;let a=!1,o;if(e)for(let c in e){if(yg(c))continue;const u=e[c];let l;i&&Gr(i,l=Sa(c))?!s||!s.includes(l)?r[l]=u:(o||(o={}))[l]=u:o8(t.emitsOptions,c)||(!(c in n)||u!==n[c])&&(n[c]=u,a=!0)}if(s){const c=kt(r),u=o||gn;for(let l=0;l<s.length;l++){const f=s[l];r[f]=UA(i,c,f,u[f],t,!Gr(u,f))}}return a}function UA(t,e,r,n,i,s){const a=t[r];if(a!=null){const o=Gr(a,"default");if(o&&n===void 0){const c=a.default;if(a.type!==Function&&!a.skipFactory&&Wt(c)){const{propsDefaults:u}=i;if(r in u)n=u[r];else{const l=hy(i);n=u[r]=c.call(null,e),l()}}else n=c;i.ce&&i.ce._setProp(r,n)}a[0]&&(s&&!o?n=!1:a[1]&&(n===""||n===s0(r))&&(n=!0))}return n}const Ege=new WeakMap;function $Q(t,e,r=!1){const n=r?Ege:e.propsCache,i=n.get(t);if(i)return i;const s=t.props,a={},o=[];let c=!1;if(!Wt(t)){const l=f=>{c=!0;const[d,h]=$Q(f,e,!0);Li(a,d),h&&o.push(...h)};!r&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}if(!s&&!c)return An(t)&&n.set(t,k1),k1;if($t(s))for(let l=0;l<s.length;l++){const f=Sa(s[l]);bN(f)&&(a[f]=gn)}else if(s)for(const l in s){const f=Sa(l);if(bN(f)){const d=s[l],h=a[f]=$t(d)||Wt(d)?{type:d}:Li({},d),m=h.type;let p=!1,g=!0;if($t(m))for(let v=0;v<m.length;++v){const y=m[v],b=Wt(y)&&y.name;if(b==="Boolean"){p=!0;break}else b==="String"&&(g=!1)}else p=Wt(m)&&m.name==="Boolean";h[0]=p,h[1]=g,(p||Gr(h,"default"))&&o.push(f)}}const u=[a,o];return An(t)&&n.set(t,u),u}function bN(t){return t[0]!=="$"&&!yg(t)}const UQ=t=>t[0]==="_"||t==="$stable",fR=t=>$t(t)?t.map(Yc):[Yc(t)],kge=(t,e,r)=>{if(e._n)return e;const n=Ge((...i)=>fR(e(...i)),r);return n._c=!1,n},jQ=(t,e,r)=>{const n=t._ctx;for(const i in t){if(UQ(i))continue;const s=t[i];if(Wt(s))e[i]=kge(i,s,n);else if(s!=null){const a=fR(s);e[i]=()=>a}}},VQ=(t,e)=>{const r=fR(e);t.slots.default=()=>r},qQ=(t,e,r)=>{for(const n in e)(r||n!=="_")&&(t[n]=e[n])},Tge=(t,e,r)=>{const n=t.slots=NQ();if(t.vnode.shapeFlag&32){const i=e._;i?(qQ(n,e,r),r&&VJ(n,"_",i,!0)):jQ(e,n)}else e&&VQ(t,e)},Age=(t,e,r)=>{const{vnode:n,slots:i}=t;let s=!0,a=gn;if(n.shapeFlag&32){const o=e._;o?r&&o===1?s=!1:qQ(i,e,r):(s=!e.$stable,jQ(e,i)),a=e}else e&&(VQ(t,e),a={default:1});if(s)for(const o in i)!UQ(o)&&a[o]==null&&delete i[o]},Hs=jge;function Cge(t){return Ige(t)}function Ige(t,e){const r=r8();r.__VUE__=!0;const{insert:n,remove:i,patchProp:s,createElement:a,createText:o,createComment:c,setText:u,setElementText:l,parentNode:f,nextSibling:d,setScopeId:h=ol,insertStaticContent:m}=t,p=(j,Z,V,ne=null,se=null,J=null,ee=void 0,ie=null,le=!!Z.dynamicChildren)=>{if(j===Z)return;j&&!Vd(j,Z)&&(ne=q(j),M(j,se,J,!0),j=null),Z.patchFlag===-2&&(le=!1,Z.dynamicChildren=null);const{type:ue,ref:me,shapeFlag:be}=Z;switch(ue){case dy:g(j,Z,V,ne);break;case Cs:v(j,Z,V,ne);break;case $_:j==null&&y(Z,V,ne,ee);break;case ar:S(j,Z,V,ne,se,J,ee,ie,le);break;default:be&1?x(j,Z,V,ne,se,J,ee,ie,le):be&6?T(j,Z,V,ne,se,J,ee,ie,le):(be&64||be&128)&&ue.process(j,Z,V,ne,se,J,ee,ie,le,te)}me!=null&&se&&N3(me,j&&j.ref,J,Z||j,!Z)},g=(j,Z,V,ne)=>{if(j==null)n(Z.el=o(Z.children),V,ne);else{const se=Z.el=j.el;Z.children!==j.children&&u(se,Z.children)}},v=(j,Z,V,ne)=>{j==null?n(Z.el=c(Z.children||""),V,ne):Z.el=j.el},y=(j,Z,V,ne)=>{[j.el,j.anchor]=m(j.children,Z,V,ne,j.el,j.anchor)},b=({el:j,anchor:Z},V,ne)=>{let se;for(;j&&j!==Z;)se=d(j),n(j,V,ne),j=se;n(Z,V,ne)},_=({el:j,anchor:Z})=>{let V;for(;j&&j!==Z;)V=d(j),i(j),j=V;i(Z)},x=(j,Z,V,ne,se,J,ee,ie,le)=>{Z.type==="svg"?ee="svg":Z.type==="math"&&(ee="mathml"),j==null?E(Z,V,ne,se,J,ee,ie,le):D(j,Z,se,J,ee,ie,le)},E=(j,Z,V,ne,se,J,ee,ie)=>{let le,ue;const{props:me,shapeFlag:be,transition:_e,dirs:xe}=j;if(le=j.el=a(j.type,J,me&&me.is,me),be&8?l(le,j.children):be&16&&B(j.children,le,null,ne,se,L_(j,J),ee,ie),xe&&Td(j,null,ne,"created"),k(le,j,j.scopeId,ee,ne),me){for(const re in me)re!=="value"&&!yg(re)&&s(le,re,null,me[re],J,ne);"value"in me&&s(le,"value",null,me.value,J),(ue=me.onVnodeBeforeMount)&&Mc(ue,ne,j)}xe&&Td(j,null,ne,"beforeMount");const Be=Pge(se,_e);Be&&_e.beforeEnter(le),n(le,Z,V),((ue=me&&me.onVnodeMounted)||Be||xe)&&Hs(()=>{ue&&Mc(ue,ne,j),Be&&_e.enter(le),xe&&Td(j,null,ne,"mounted")},se)},k=(j,Z,V,ne,se)=>{if(V&&h(j,V),ne)for(let J=0;J<ne.length;J++)h(j,ne[J]);if(se){let J=se.subTree;if(Z===J||GQ(J.type)&&(J.ssContent===Z||J.ssFallback===Z)){const ee=se.vnode;k(j,ee,ee.scopeId,ee.slotScopeIds,se.parent)}}},B=(j,Z,V,ne,se,J,ee,ie,le=0)=>{for(let ue=le;ue<j.length;ue++){const me=j[ue]=ie?vf(j[ue]):Yc(j[ue]);p(null,me,Z,V,ne,se,J,ee,ie)}},D=(j,Z,V,ne,se,J,ee)=>{const ie=Z.el=j.el;let{patchFlag:le,dynamicChildren:ue,dirs:me}=Z;le|=j.patchFlag&16;const be=j.props||gn,_e=Z.props||gn;let xe;if(V&&Ad(V,!1),(xe=_e.onVnodeBeforeUpdate)&&Mc(xe,V,Z,j),me&&Td(Z,j,V,"beforeUpdate"),V&&Ad(V,!0),(be.innerHTML&&_e.innerHTML==null||be.textContent&&_e.textContent==null)&&l(ie,""),ue?z(j.dynamicChildren,ue,ie,V,ne,L_(Z,se),J):ee||O(j,Z,ie,null,V,ne,L_(Z,se),J,!1),le>0){if(le&16)U(ie,be,_e,V,se);else if(le&2&&be.class!==_e.class&&s(ie,"class",null,_e.class,se),le&4&&s(ie,"style",be.style,_e.style,se),le&8){const Be=Z.dynamicProps;for(let re=0;re<Be.length;re++){const K=Be[re],X=be[K],ce=_e[K];(ce!==X||K==="value")&&s(ie,K,X,ce,se,V)}}le&1&&j.children!==Z.children&&l(ie,Z.children)}else!ee&&ue==null&&U(ie,be,_e,V,se);((xe=_e.onVnodeUpdated)||me)&&Hs(()=>{xe&&Mc(xe,V,Z,j),me&&Td(Z,j,V,"updated")},ne)},z=(j,Z,V,ne,se,J,ee)=>{for(let ie=0;ie<Z.length;ie++){const le=j[ie],ue=Z[ie],me=le.el&&(le.type===ar||!Vd(le,ue)||le.shapeFlag&70)?f(le.el):V;p(le,ue,me,null,ne,se,J,ee,!0)}},U=(j,Z,V,ne,se)=>{if(Z!==V){if(Z!==gn)for(const J in Z)!yg(J)&&!(J in V)&&s(j,J,Z[J],null,se,ne);for(const J in V){if(yg(J))continue;const ee=V[J],ie=Z[J];ee!==ie&&J!=="value"&&s(j,J,ie,ee,se,ne)}"value"in V&&s(j,"value",Z.value,V.value,se)}},S=(j,Z,V,ne,se,J,ee,ie,le)=>{const ue=Z.el=j?j.el:o(""),me=Z.anchor=j?j.anchor:o("");let{patchFlag:be,dynamicChildren:_e,slotScopeIds:xe}=Z;xe&&(ie=ie?ie.concat(xe):xe),j==null?(n(ue,V,ne),n(me,V,ne),B(Z.children||[],V,me,se,J,ee,ie,le)):be>0&&be&64&&_e&&j.dynamicChildren?(z(j.dynamicChildren,_e,V,se,J,ee,ie),(Z.key!=null||se&&Z===se.subTree)&&dR(j,Z,!0)):O(j,Z,V,me,se,J,ee,ie,le)},T=(j,Z,V,ne,se,J,ee,ie,le)=>{Z.slotScopeIds=ie,j==null?Z.shapeFlag&512?se.ctx.activate(Z,V,ne,ee,le):w(Z,V,ne,se,J,ee,le):A(j,Z,le)},w=(j,Z,V,ne,se,J,ee)=>{const ie=j.component=Wge(j,ne,se);if(s8(j)&&(ie.ctx.renderer=te),Gge(ie,!1,ee),ie.asyncDep){if(se&&se.registerDep(ie,F,ee),!j.el){const le=ie.subTree=ae(Cs);v(null,le,Z,V)}}else F(ie,j,Z,V,se,J,ee)},A=(j,Z,V)=>{const ne=Z.component=j.component;if($ge(j,Z,V))if(ne.asyncDep&&!ne.asyncResolved){P(ne,Z,V);return}else ne.next=Z,ne.update();else Z.el=j.el,ne.vnode=Z},F=(j,Z,V,ne,se,J,ee)=>{const ie=()=>{if(j.isMounted){let{next:be,bu:_e,u:xe,parent:Be,vnode:re}=j;{const Ee=zQ(j);if(Ee){be&&(be.el=re.el,P(j,be,ee)),Ee.asyncDep.then(()=>{j.isUnmounted||ie()});return}}let K=be,X;Ad(j,!1),be?(be.el=re.el,P(j,be,ee)):be=re,_e&&R_(_e),(X=be.props&&be.props.onVnodeBeforeUpdate)&&Mc(X,Be,be,re),Ad(j,!0);const ce=_N(j),ye=j.subTree;j.subTree=ce,p(ye,ce,f(ye.el),q(ye),j,se,J),be.el=ce.el,K===null&&Uge(j,ce.el),xe&&Hs(xe,se),(X=be.props&&be.props.onVnodeUpdated)&&Hs(()=>Mc(X,Be,be,re),se)}else{let be;const{el:_e,props:xe}=Z,{bm:Be,m:re,parent:K,root:X,type:ce}=j,ye=I1(Z);Ad(j,!1),Be&&R_(Be),!ye&&(be=xe&&xe.onVnodeBeforeMount)&&Mc(be,K,Z),Ad(j,!0);{X.ce&&X.ce._injectChildStyle(ce);const Ee=j.subTree=_N(j);p(null,Ee,V,ne,j,se,J),Z.el=Ee.el}if(re&&Hs(re,se),!ye&&(be=xe&&xe.onVnodeMounted)){const Ee=Z;Hs(()=>Mc(be,K,Ee),se)}(Z.shapeFlag&256||K&&I1(K.vnode)&&K.vnode.shapeFlag&256)&&j.a&&Hs(j.a,se),j.isMounted=!0,Z=V=ne=null}};j.scope.on();const le=j.effect=new GJ(ie);j.scope.off();const ue=j.update=le.run.bind(le),me=j.job=le.runIfDirty.bind(le);me.i=j,me.id=j.uid,le.scheduler=()=>aR(me),Ad(j,!0),ue()},P=(j,Z,V)=>{Z.component=j;const ne=j.vnode.props;j.vnode=Z,j.next=null,Sge(j,Z.props,ne,V),Age(j,Z.children,V),cd(),lN(j),ld()},O=(j,Z,V,ne,se,J,ee,ie,le=!1)=>{const ue=j&&j.children,me=j?j.shapeFlag:0,be=Z.children,{patchFlag:_e,shapeFlag:xe}=Z;if(_e>0){if(_e&128){I(ue,be,V,ne,se,J,ee,ie,le);return}else if(_e&256){R(ue,be,V,ne,se,J,ee,ie,le);return}}xe&8?(me&16&&W(ue,se,J),be!==ue&&l(V,be)):me&16?xe&16?I(ue,be,V,ne,se,J,ee,ie,le):W(ue,se,J,!0):(me&8&&l(V,""),xe&16&&B(be,V,ne,se,J,ee,ie,le))},R=(j,Z,V,ne,se,J,ee,ie,le)=>{j=j||k1,Z=Z||k1;const ue=j.length,me=Z.length,be=Math.min(ue,me);let _e;for(_e=0;_e<be;_e++){const xe=Z[_e]=le?vf(Z[_e]):Yc(Z[_e]);p(j[_e],xe,V,null,se,J,ee,ie,le)}ue>me?W(j,se,J,!0,!1,be):B(Z,V,ne,se,J,ee,ie,le,be)},I=(j,Z,V,ne,se,J,ee,ie,le)=>{let ue=0;const me=Z.length;let be=j.length-1,_e=me-1;for(;ue<=be&&ue<=_e;){const xe=j[ue],Be=Z[ue]=le?vf(Z[ue]):Yc(Z[ue]);if(Vd(xe,Be))p(xe,Be,V,null,se,J,ee,ie,le);else break;ue++}for(;ue<=be&&ue<=_e;){const xe=j[be],Be=Z[_e]=le?vf(Z[_e]):Yc(Z[_e]);if(Vd(xe,Be))p(xe,Be,V,null,se,J,ee,ie,le);else break;be--,_e--}if(ue>be){if(ue<=_e){const xe=_e+1,Be=xe<me?Z[xe].el:ne;for(;ue<=_e;)p(null,Z[ue]=le?vf(Z[ue]):Yc(Z[ue]),V,Be,se,J,ee,ie,le),ue++}}else if(ue>_e)for(;ue<=be;)M(j[ue],se,J,!0),ue++;else{const xe=ue,Be=ue,re=new Map;for(ue=Be;ue<=_e;ue++){const ct=Z[ue]=le?vf(Z[ue]):Yc(Z[ue]);ct.key!=null&&re.set(ct.key,ue)}let K,X=0;const ce=_e-Be+1;let ye=!1,Ee=0;const Se=new Array(ce);for(ue=0;ue<ce;ue++)Se[ue]=0;for(ue=xe;ue<=be;ue++){const ct=j[ue];if(X>=ce){M(ct,se,J,!0);continue}let we;if(ct.key!=null)we=re.get(ct.key);else for(K=Be;K<=_e;K++)if(Se[K-Be]===0&&Vd(ct,Z[K])){we=K;break}we===void 0?M(ct,se,J,!0):(Se[we-Be]=ue+1,we>=Ee?Ee=we:ye=!0,p(ct,Z[we],V,null,se,J,ee,ie,le),X++)}const rt=ye?Rge(Se):k1;for(K=rt.length-1,ue=ce-1;ue>=0;ue--){const ct=Be+ue,we=Z[ct],ke=ct+1<me?Z[ct+1].el:ne;Se[ue]===0?p(null,we,V,ke,se,J,ee,ie,le):ye&&(K<0||ue!==rt[K]?C(we,V,ke,2):K--)}}},C=(j,Z,V,ne,se=null)=>{const{el:J,type:ee,transition:ie,children:le,shapeFlag:ue}=j;if(ue&6){C(j.component.subTree,Z,V,ne);return}if(ue&128){j.suspense.move(Z,V,ne);return}if(ue&64){ee.move(j,Z,V,te);return}if(ee===ar){n(J,Z,V);for(let be=0;be<le.length;be++)C(le[be],Z,V,ne);n(j.anchor,Z,V);return}if(ee===$_){b(j,Z,V);return}if(ne!==2&&ue&1&&ie)if(ne===0)ie.beforeEnter(J),n(J,Z,V),Hs(()=>ie.enter(J),se);else{const{leave:be,delayLeave:_e,afterLeave:xe}=ie,Be=()=>n(J,Z,V),re=()=>{be(J,()=>{Be(),xe&&xe()})};_e?_e(J,Be,re):re()}else n(J,Z,V)},M=(j,Z,V,ne=!1,se=!1)=>{const{type:J,props:ee,ref:ie,children:le,dynamicChildren:ue,shapeFlag:me,patchFlag:be,dirs:_e,cacheIndex:xe}=j;if(be===-2&&(se=!1),ie!=null&&N3(ie,null,V,j,!0),xe!=null&&(Z.renderCache[xe]=void 0),me&256){Z.ctx.deactivate(j);return}const Be=me&1&&_e,re=!I1(j);let K;if(re&&(K=ee&&ee.onVnodeBeforeUnmount)&&Mc(K,Z,j),me&6)H(j.component,V,ne);else{if(me&128){j.suspense.unmount(V,ne);return}Be&&Td(j,null,Z,"beforeUnmount"),me&64?j.type.remove(j,Z,V,te,ne):ue&&!ue.hasOnce&&(J!==ar||be>0&&be&64)?W(ue,Z,V,!1,!0):(J===ar&&be&384||!se&&me&16)&&W(le,Z,V),ne&&L(j)}(re&&(K=ee&&ee.onVnodeUnmounted)||Be)&&Hs(()=>{K&&Mc(K,Z,j),Be&&Td(j,null,Z,"unmounted")},V)},L=j=>{const{type:Z,el:V,anchor:ne,transition:se}=j;if(Z===ar){N(V,ne);return}if(Z===$_){_(j);return}const J=()=>{i(V),se&&!se.persisted&&se.afterLeave&&se.afterLeave()};if(j.shapeFlag&1&&se&&!se.persisted){const{leave:ee,delayLeave:ie}=se,le=()=>ee(V,J);ie?ie(j.el,J,le):le()}else J()},N=(j,Z)=>{let V;for(;j!==Z;)V=d(j),i(j),j=V;i(Z)},H=(j,Z,V)=>{const{bum:ne,scope:se,job:J,subTree:ee,um:ie,m:le,a:ue}=j;wN(le),wN(ue),ne&&R_(ne),se.stop(),J&&(J.flags|=8,M(ee,j,Z,V)),ie&&Hs(ie,Z),Hs(()=>{j.isUnmounted=!0},Z),Z&&Z.pendingBranch&&!Z.isUnmounted&&j.asyncDep&&!j.asyncResolved&&j.suspenseId===Z.pendingId&&(Z.deps--,Z.deps===0&&Z.resolve())},W=(j,Z,V,ne=!1,se=!1,J=0)=>{for(let ee=J;ee<j.length;ee++)M(j[ee],Z,V,ne,se)},q=j=>{if(j.shapeFlag&6)return q(j.component.subTree);if(j.shapeFlag&128)return j.suspense.next();const Z=d(j.anchor||j.el),V=Z&&Z[gQ];return V?d(V):Z};let G=!1;const Y=(j,Z,V)=>{j==null?Z._vnode&&M(Z._vnode,null,null,!0):p(Z._vnode||null,j,Z,null,null,null,V),Z._vnode=j,G||(G=!0,lN(),hQ(),G=!1)},te={p,um:M,m:C,r:L,mt:w,mc:B,pc:O,pbc:z,n:q,o:t};return{render:Y,hydrate:void 0,createApp:_ge(Y)}}function L_({type:t,props:e},r){return r==="svg"&&t==="foreignObject"||r==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:r}function Ad({effect:t,job:e},r){r?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function Pge(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function dR(t,e,r=!1){const n=t.children,i=e.children;if($t(n)&&$t(i))for(let s=0;s<n.length;s++){const a=n[s];let o=i[s];o.shapeFlag&1&&!o.dynamicChildren&&((o.patchFlag<=0||o.patchFlag===32)&&(o=i[s]=vf(i[s]),o.el=a.el),!r&&o.patchFlag!==-2&&dR(a,o)),o.type===dy&&(o.el=a.el)}}function Rge(t){const e=t.slice(),r=[0];let n,i,s,a,o;const c=t.length;for(n=0;n<c;n++){const u=t[n];if(u!==0){if(i=r[r.length-1],t[i]<u){e[n]=i,r.push(n);continue}for(s=0,a=r.length-1;s<a;)o=s+a>>1,t[r[o]]<u?s=o+1:a=o;u<t[r[s]]&&(s>0&&(e[n]=r[s-1]),r[s]=n)}}for(s=r.length,a=r[s-1];s-- >0;)r[s]=a,a=e[a];return r}function zQ(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:zQ(e)}function wN(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const Oge=Symbol.for("v-scx"),Bge=()=>Zt(Oge);function $i(t,e){return hR(t,null,e)}function Ft(t,e,r){return hR(t,e,r)}function hR(t,e,r=gn){const{immediate:n,deep:i,flush:s,once:a}=r,o=Li({},r),c=e&&n||!e&&s!=="post";let u;if(rv){if(s==="sync"){const h=Bge();u=h.__watcherHandles||(h.__watcherHandles=[])}else if(!c){const h=()=>{};return h.stop=ol,h.resume=ol,h.pause=ol,h}}const l=os;o.call=(h,m,p)=>mc(h,l,m,p);let f=!1;s==="post"?o.scheduler=h=>{Hs(h,l&&l.suspense)}:s!=="sync"&&(f=!0,o.scheduler=(h,m)=>{m?h():aR(h)}),o.augmentJob=h=>{e&&(h.flags|=4),f&&(h.flags|=2,l&&(h.id=l.uid,h.i=l))};const d=Zme(t,e,o);return rv&&(u?u.push(d):c&&d()),d}function Dge(t,e,r){const n=this.proxy,i=Vn(t)?t.includes(".")?HQ(n,t):()=>n[t]:t.bind(n,n);let s;Wt(e)?s=e:(s=e.handler,r=e);const a=hy(this),o=hR(i,s.bind(n),r);return a(),o}function HQ(t,e){const r=e.split(".");return()=>{let n=t;for(let i=0;i<r.length&&n;i++)n=n[r[i]];return n}}const Mge=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${Sa(e)}Modifiers`]||t[`${s0(e)}Modifiers`];function Nge(t,e,...r){if(t.isUnmounted)return;const n=t.vnode.props||gn;let i=r;const s=e.startsWith("update:"),a=s&&Mge(n,e.slice(7));a&&(a.trim&&(i=r.map(l=>Vn(l)?l.trim():l)),a.number&&(i=r.map(mme)));let o,c=n[o=P_(e)]||n[o=P_(Sa(e))];!c&&s&&(c=n[o=P_(s0(e))]),c&&mc(c,t,6,i);const u=n[o+"Once"];if(u){if(!t.emitted)t.emitted={};else if(t.emitted[o])return;t.emitted[o]=!0,mc(u,t,6,i)}}function WQ(t,e,r=!1){const n=e.emitsCache,i=n.get(t);if(i!==void 0)return i;const s=t.emits;let a={},o=!1;if(!Wt(t)){const c=u=>{const l=WQ(u,e,!0);l&&(o=!0,Li(a,l))};!r&&e.mixins.length&&e.mixins.forEach(c),t.extends&&c(t.extends),t.mixins&&t.mixins.forEach(c)}return!s&&!o?(An(t)&&n.set(t,null),null):($t(s)?s.forEach(c=>a[c]=null):Li(a,s),An(t)&&n.set(t,a),a)}function o8(t,e){return!t||!Q6(e)?!1:(e=e.slice(2).replace(/Once$/,""),Gr(t,e[0].toLowerCase()+e.slice(1))||Gr(t,s0(e))||Gr(t,e))}function _N(t){const{type:e,vnode:r,proxy:n,withProxy:i,propsOptions:[s],slots:a,attrs:o,emit:c,render:u,renderCache:l,props:f,data:d,setupState:h,ctx:m,inheritAttrs:p}=t,g=M3(t);let v,y;try{if(r.shapeFlag&4){const _=i||n,x=_;v=Yc(u.call(x,_,l,f,h,d,m)),y=o}else{const _=e;v=Yc(_.length>1?_(f,{attrs:o,slots:a,emit:c}):_(f,null)),y=e.props?o:Fge(o)}}catch(_){Sg.length=0,i8(_,t,1),v=ae(Cs)}let b=v;if(y&&p!==!1){const _=Object.keys(y),{shapeFlag:x}=b;_.length&&x&7&&(s&&_.some(KP)&&(y=Lge(y,s)),b=yu(b,y,!1,!0))}return r.dirs&&(b=yu(b,null,!1,!0),b.dirs=b.dirs?b.dirs.concat(r.dirs):r.dirs),r.transition&&Ah(b,r.transition),v=b,M3(g),v}const Fge=t=>{let e;for(const r in t)(r==="class"||r==="style"||Q6(r))&&((e||(e={}))[r]=t[r]);return e},Lge=(t,e)=>{const r={};for(const n in t)(!KP(n)||!(n.slice(9)in e))&&(r[n]=t[n]);return r};function $ge(t,e,r){const{props:n,children:i,component:s}=t,{props:a,children:o,patchFlag:c}=e,u=s.emitsOptions;if(e.dirs||e.transition)return!0;if(r&&c>=0){if(c&1024)return!0;if(c&16)return n?xN(n,a,u):!!a;if(c&8){const l=e.dynamicProps;for(let f=0;f<l.length;f++){const d=l[f];if(a[d]!==n[d]&&!o8(u,d))return!0}}}else return(i||o)&&(!o||!o.$stable)?!0:n===a?!1:n?a?xN(n,a,u):!0:!!a;return!1}function xN(t,e,r){const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!0;for(let i=0;i<n.length;i++){const s=n[i];if(e[s]!==t[s]&&!o8(r,s))return!0}return!1}function Uge({vnode:t,parent:e},r){for(;e;){const n=e.subTree;if(n.suspense&&n.suspense.activeBranch===t&&(n.el=t.el),n===t)(t=e.vnode).el=r,e=e.parent;else break}}const GQ=t=>t.__isSuspense;function jge(t,e){e&&e.pendingBranch?$t(t)?e.effects.push(...t):e.effects.push(t):ege(t)}const ar=Symbol.for("v-fgt"),dy=Symbol.for("v-txt"),Cs=Symbol.for("v-cmt"),$_=Symbol.for("v-stc"),Sg=[];let Ha=null;function Vt(t=!1){Sg.push(Ha=t?null:[])}function Vge(){Sg.pop(),Ha=Sg[Sg.length-1]||null}let tv=1;function SN(t,e=!1){tv+=t,t<0&&Ha&&e&&(Ha.hasOnce=!0)}function KQ(t){return t.dynamicChildren=tv>0?Ha||k1:null,Vge(),tv>0&&Ha&&Ha.push(t),t}function Ch(t,e,r,n,i,s){return KQ(bi(t,e,r,n,i,s,!0))}function hr(t,e,r,n,i){return KQ(ae(t,e,r,n,i,!0))}function j1(t){return t?t.__v_isVNode===!0:!1}function Vd(t,e){return t.type===e.type&&t.key===e.key}const XQ=({key:t})=>t??null,r3=({ref:t,ref_key:e,ref_for:r})=>(typeof t=="number"&&(t=""+t),t!=null?Vn(t)||Bn(t)||Wt(t)?{i:Ki,r:t,k:e,f:!!r}:t:null);function bi(t,e=null,r=null,n=0,i=null,s=t===ar?0:1,a=!1,o=!1){const c={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&XQ(e),ref:e&&r3(e),scopeId:mQ,slotScopeIds:null,children:r,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:n,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:Ki};return o?(pR(c,r),s&128&&t.normalize(c)):r&&(c.shapeFlag|=Vn(r)?8:16),tv>0&&!a&&Ha&&(c.patchFlag>0||s&6)&&c.patchFlag!==32&&Ha.push(c),c}const ae=qge;function qge(t,e=null,r=null,n=0,i=null,s=!1){if((!t||t===CQ)&&(t=Cs),j1(t)){const o=yu(t,e,!0);return r&&pR(o,r),tv>0&&!s&&Ha&&(o.shapeFlag&6?Ha[Ha.indexOf(t)]=o:Ha.push(o)),o.patchFlag=-2,o}if(Jge(t)&&(t=t.__vccOpts),e){e=YQ(e);let{class:o,style:c}=e;o&&!Vn(o)&&(e.class=rc(o)),An(c)&&(iR(c)&&!$t(c)&&(c=Li({},c)),e.style=Dp(c))}const a=Vn(t)?1:GQ(t)?128:vQ(t)?64:An(t)?4:Wt(t)?2:0;return bi(t,e,r,n,i,a,s,!0)}function YQ(t){return t?iR(t)||FQ(t)?Li({},t):t:null}function yu(t,e,r=!1,n=!1){const{props:i,ref:s,patchFlag:a,children:o,transition:c}=t,u=e?zt(i||{},e):i,l={__v_isVNode:!0,__v_skip:!0,type:t.type,props:u,key:u&&XQ(u),ref:e&&e.ref?r&&s?$t(s)?s.concat(r3(e)):[s,r3(e)]:r3(e):s,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:o,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==ar?a===-1?16:a|16:a,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:c,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&yu(t.ssContent),ssFallback:t.ssFallback&&yu(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return c&&n&&Ah(l,c.clone(l)),l}function zr(t=" ",e=0){return ae(dy,null,t,e)}function Qs(t="",e=!1){return e?(Vt(),hr(Cs,null,t)):ae(Cs,null,t)}function Yc(t){return t==null||typeof t=="boolean"?ae(Cs):$t(t)?ae(ar,null,t.slice()):j1(t)?vf(t):ae(dy,null,String(t))}function vf(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:yu(t)}function pR(t,e){let r=0;const{shapeFlag:n}=t;if(e==null)e=null;else if($t(e))r=16;else if(typeof e=="object")if(n&65){const i=e.default;i&&(i._c&&(i._d=!1),pR(t,i()),i._c&&(i._d=!0));return}else{r=32;const i=e._;!i&&!FQ(e)?e._ctx=Ki:i===3&&Ki&&(Ki.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else Wt(e)?(e={default:e,_ctx:Ki},r=32):(e=String(e),n&64?(r=16,e=[zr(e)]):r=8);t.children=e,t.shapeFlag|=r}function zt(...t){const e={};for(let r=0;r<t.length;r++){const n=t[r];for(const i in n)if(i==="class")e.class!==n.class&&(e.class=rc([e.class,n.class]));else if(i==="style")e.style=Dp([e.style,n.style]);else if(Q6(i)){const s=e[i],a=n[i];a&&s!==a&&!($t(s)&&s.includes(a))&&(e[i]=s?[].concat(s,a):a)}else i!==""&&(e[i]=n[i])}return e}function Mc(t,e,r,n=null){mc(t,e,7,[r,n])}const zge=DQ();let Hge=0;function Wge(t,e,r){const n=t.type,i=(e?e.appContext:t.appContext)||zge,s={uid:Hge++,vnode:t,type:n,parent:e,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new WJ(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(i.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:$Q(n,i),emitsOptions:WQ(n,i),emit:null,emitted:null,propsDefaults:gn,inheritAttrs:n.inheritAttrs,ctx:gn,data:gn,props:gn,attrs:gn,slots:gn,refs:gn,setupState:gn,setupContext:null,suspense:r,suspenseId:r?r.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=e?e.root:s,s.emit=Nge.bind(null,s),t.ce&&t.ce(s),s}let os=null;const mR=()=>os||Ki;let $3,jA;{const t=r8(),e=(r,n)=>{let i;return(i=t[r])||(i=t[r]=[]),i.push(n),s=>{i.length>1?i.forEach(a=>a(s)):i[0](s)}};$3=e("__VUE_INSTANCE_SETTERS__",r=>os=r),jA=e("__VUE_SSR_SETTERS__",r=>rv=r)}const hy=t=>{const e=os;return $3(t),t.scope.on(),()=>{t.scope.off(),$3(e)}},EN=()=>{os&&os.scope.off(),$3(null)};function ZQ(t){return t.vnode.shapeFlag&4}let rv=!1;function Gge(t,e=!1,r=!1){e&&jA(e);const{props:n,children:i}=t.vnode,s=ZQ(t);xge(t,n,s,e),Tge(t,i,r);const a=s?Kge(t,e):void 0;return e&&jA(!1),a}function Kge(t,e){const r=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,pge);const{setup:n}=r;if(n){cd();const i=t.setupContext=n.length>1?Yge(t):null,s=hy(t),a=uy(n,t,0,[t.props,i]),o=$J(a);if(ld(),s(),(o||t.sp)&&!I1(t)&&kQ(t),o){if(a.then(EN,EN),e)return a.then(c=>{kN(t,c)}).catch(c=>{i8(c,t,0)});t.asyncDep=a}else kN(t,a)}else JQ(t)}function kN(t,e,r){Wt(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:An(e)&&(t.setupState=lQ(e)),JQ(t)}function JQ(t,e,r){const n=t.type;t.render||(t.render=n.render||ol);{const i=hy(t);cd();try{mge(t)}finally{ld(),i()}}}const Xge={get(t,e){return Ss(t,"get",""),t[e]}};function Yge(t){const e=r=>{t.exposed=r||{}};return{attrs:new Proxy(t.attrs,Xge),slots:t.slots,emit:t.emit,expose:e}}function c8(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(lQ(a0(t.exposed)),{get(e,r){if(r in e)return e[r];if(r in xg)return xg[r](t)},has(e,r){return r in e||r in xg}})):t.proxy}function Zge(t,e=!0){return Wt(t)?t.displayName||t.name:t.name||e&&t.__name}function Jge(t){return Wt(t)&&"__vccOpts"in t}const ve=(t,e)=>Xme(t,e,rv);function ps(t,e,r){const n=arguments.length;return n===2?An(e)&&!$t(e)?j1(e)?ae(t,null,[e]):ae(t,e):ae(t,null,e):(n>3?r=Array.prototype.slice.call(arguments,2):n===3&&j1(r)&&(r=[r]),ae(t,e,r))}const Qge="3.5.13";/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let VA;const TN=typeof window<"u"&&window.trustedTypes;if(TN)try{VA=TN.createPolicy("vue",{createHTML:t=>t})}catch{}const QQ=VA?t=>VA.createHTML(t):t=>t,eve="http://www.w3.org/2000/svg",tve="http://www.w3.org/1998/Math/MathML",ql=typeof document<"u"?document:null,AN=ql&&ql.createElement("template"),rve={insert:(t,e,r)=>{e.insertBefore(t,r||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,r,n)=>{const i=e==="svg"?ql.createElementNS(eve,t):e==="mathml"?ql.createElementNS(tve,t):r?ql.createElement(t,{is:r}):ql.createElement(t);return t==="select"&&n&&n.multiple!=null&&i.setAttribute("multiple",n.multiple),i},createText:t=>ql.createTextNode(t),createComment:t=>ql.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>ql.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,r,n,i,s){const a=r?r.previousSibling:e.lastChild;if(i&&(i===s||i.nextSibling))for(;e.insertBefore(i.cloneNode(!0),r),!(i===s||!(i=i.nextSibling)););else{AN.innerHTML=QQ(n==="svg"?`<svg>${t}</svg>`:n==="mathml"?`<math>${t}</math>`:t);const o=AN.content;if(n==="svg"||n==="mathml"){const c=o.firstChild;for(;c.firstChild;)o.appendChild(c.firstChild);o.removeChild(c)}e.insertBefore(o,r)}return[a?a.nextSibling:e.firstChild,r?r.previousSibling:e.lastChild]}},Ku="transition",Sm="animation",V1=Symbol("_vtc"),eee={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},tee=Li({},_Q,eee),nve=t=>(t.displayName="Transition",t.props=tee,t),Hf=nve((t,{slots:e})=>ps(ige,ree(t),e)),Cd=(t,e=[])=>{$t(t)?t.forEach(r=>r(...e)):t&&t(...e)},CN=t=>t?$t(t)?t.some(e=>e.length>1):t.length>1:!1;function ree(t){const e={};for(const S in t)S in eee||(e[S]=t[S]);if(t.css===!1)return e;const{name:r="v",type:n,duration:i,enterFromClass:s=`${r}-enter-from`,enterActiveClass:a=`${r}-enter-active`,enterToClass:o=`${r}-enter-to`,appearFromClass:c=s,appearActiveClass:u=a,appearToClass:l=o,leaveFromClass:f=`${r}-leave-from`,leaveActiveClass:d=`${r}-leave-active`,leaveToClass:h=`${r}-leave-to`}=t,m=ive(i),p=m&&m[0],g=m&&m[1],{onBeforeEnter:v,onEnter:y,onEnterCancelled:b,onLeave:_,onLeaveCancelled:x,onBeforeAppear:E=v,onAppear:k=y,onAppearCancelled:B=b}=e,D=(S,T,w,A)=>{S._enterCancelled=A,uf(S,T?l:o),uf(S,T?u:a),w&&w()},z=(S,T)=>{S._isLeaving=!1,uf(S,f),uf(S,h),uf(S,d),T&&T()},U=S=>(T,w)=>{const A=S?k:y,F=()=>D(T,S,w);Cd(A,[T,F]),IN(()=>{uf(T,S?c:s),qc(T,S?l:o),CN(A)||PN(T,n,p,F)})};return Li(e,{onBeforeEnter(S){Cd(v,[S]),qc(S,s),qc(S,a)},onBeforeAppear(S){Cd(E,[S]),qc(S,c),qc(S,u)},onEnter:U(!1),onAppear:U(!0),onLeave(S,T){S._isLeaving=!0;const w=()=>z(S,T);qc(S,f),S._enterCancelled?(qc(S,d),qA()):(qA(),qc(S,d)),IN(()=>{S._isLeaving&&(uf(S,f),qc(S,h),CN(_)||PN(S,n,g,w))}),Cd(_,[S,w])},onEnterCancelled(S){D(S,!1,void 0,!0),Cd(b,[S])},onAppearCancelled(S){D(S,!0,void 0,!0),Cd(B,[S])},onLeaveCancelled(S){z(S),Cd(x,[S])}})}function ive(t){if(t==null)return null;if(An(t))return[U_(t.enter),U_(t.leave)];{const e=U_(t);return[e,e]}}function U_(t){return gme(t)}function qc(t,e){e.split(/\s+/).forEach(r=>r&&t.classList.add(r)),(t[V1]||(t[V1]=new Set)).add(e)}function uf(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.remove(n));const r=t[V1];r&&(r.delete(e),r.size||(t[V1]=void 0))}function IN(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let sve=0;function PN(t,e,r,n){const i=t._endId=++sve,s=()=>{i===t._endId&&n()};if(r!=null)return setTimeout(s,r);const{type:a,timeout:o,propCount:c}=nee(t,e);if(!a)return n();const u=a+"end";let l=0;const f=()=>{t.removeEventListener(u,d),s()},d=h=>{h.target===t&&++l>=c&&f()};setTimeout(()=>{l<c&&f()},o+1),t.addEventListener(u,d)}function nee(t,e){const r=window.getComputedStyle(t),n=m=>(r[m]||"").split(", "),i=n(`${Ku}Delay`),s=n(`${Ku}Duration`),a=RN(i,s),o=n(`${Sm}Delay`),c=n(`${Sm}Duration`),u=RN(o,c);let l=null,f=0,d=0;e===Ku?a>0&&(l=Ku,f=a,d=s.length):e===Sm?u>0&&(l=Sm,f=u,d=c.length):(f=Math.max(a,u),l=f>0?a>u?Ku:Sm:null,d=l?l===Ku?s.length:c.length:0);const h=l===Ku&&/\b(transform|all)(,|$)/.test(n(`${Ku}Property`).toString());return{type:l,timeout:f,propCount:d,hasTransform:h}}function RN(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((r,n)=>ON(r)+ON(t[n])))}function ON(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function qA(){return document.body.offsetHeight}function ave(t,e,r){const n=t[V1];n&&(e=(e?[e,...n]:[...n]).join(" ")),e==null?t.removeAttribute("class"):r?t.setAttribute("class",e):t.className=e}const U3=Symbol("_vod"),iee=Symbol("_vsh"),bu={beforeMount(t,{value:e},{transition:r}){t[U3]=t.style.display==="none"?"":t.style.display,r&&e?r.beforeEnter(t):Em(t,e)},mounted(t,{value:e},{transition:r}){r&&e&&r.enter(t)},updated(t,{value:e,oldValue:r},{transition:n}){!e!=!r&&(n?e?(n.beforeEnter(t),Em(t,!0),n.enter(t)):n.leave(t,()=>{Em(t,!1)}):Em(t,e))},beforeUnmount(t,{value:e}){Em(t,e)}};function Em(t,e){t.style.display=e?t[U3]:"none",t[iee]=!e}const ove=Symbol(""),cve=/(^|;)\s*display\s*:/;function lve(t,e,r){const n=t.style,i=Vn(r);let s=!1;if(r&&!i){if(e)if(Vn(e))for(const a of e.split(";")){const o=a.slice(0,a.indexOf(":")).trim();r[o]==null&&n3(n,o,"")}else for(const a in e)r[a]==null&&n3(n,a,"");for(const a in r)a==="display"&&(s=!0),n3(n,a,r[a])}else if(i){if(e!==r){const a=n[ove];a&&(r+=";"+a),n.cssText=r,s=cve.test(r)}}else e&&t.removeAttribute("style");U3 in t&&(t[U3]=s?n.display:"",t[iee]&&(n.display="none"))}const BN=/\s*!important$/;function n3(t,e,r){if($t(r))r.forEach(n=>n3(t,e,n));else if(r==null&&(r=""),e.startsWith("--"))t.setProperty(e,r);else{const n=uve(t,e);BN.test(r)?t.setProperty(s0(n),r.replace(BN,""),"important"):t[n]=r}}const DN=["Webkit","Moz","ms"],j_={};function uve(t,e){const r=j_[e];if(r)return r;let n=Sa(e);if(n!=="filter"&&n in t)return j_[e]=n;n=Ru(n);for(let i=0;i<DN.length;i++){const s=DN[i]+n;if(s in t)return j_[e]=s}return e}const MN="http://www.w3.org/1999/xlink";function NN(t,e,r,n,i,s=Sme(e)){n&&e.startsWith("xlink:")?r==null?t.removeAttributeNS(MN,e.slice(6,e.length)):t.setAttributeNS(MN,e,r):r==null||s&&!qJ(r)?t.removeAttribute(e):t.setAttribute(e,s?"":Pu(r)?String(r):r)}function FN(t,e,r,n,i){if(e==="innerHTML"||e==="textContent"){r!=null&&(t[e]=e==="innerHTML"?QQ(r):r);return}const s=t.tagName;if(e==="value"&&s!=="PROGRESS"&&!s.includes("-")){const o=s==="OPTION"?t.getAttribute("value")||"":t.value,c=r==null?t.type==="checkbox"?"on":"":String(r);(o!==c||!("_value"in t))&&(t.value=c),r==null&&t.removeAttribute(e),t._value=r;return}let a=!1;if(r===""||r==null){const o=typeof t[e];o==="boolean"?r=qJ(r):r==null&&o==="string"?(r="",a=!0):o==="number"&&(r=0,a=!0)}try{t[e]=r}catch{}a&&t.removeAttribute(i||e)}function fve(t,e,r,n){t.addEventListener(e,r,n)}function dve(t,e,r,n){t.removeEventListener(e,r,n)}const LN=Symbol("_vei");function hve(t,e,r,n,i=null){const s=t[LN]||(t[LN]={}),a=s[e];if(n&&a)a.value=n;else{const[o,c]=pve(e);if(n){const u=s[e]=vve(n,i);fve(t,o,u,c)}else a&&(dve(t,o,a,c),s[e]=void 0)}}const $N=/(?:Once|Passive|Capture)$/;function pve(t){let e;if($N.test(t)){e={};let n;for(;n=t.match($N);)t=t.slice(0,t.length-n[0].length),e[n[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):s0(t.slice(2)),e]}let V_=0;const mve=Promise.resolve(),gve=()=>V_||(mve.then(()=>V_=0),V_=Date.now());function vve(t,e){const r=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=r.attached)return;mc(yve(n,r.value),e,5,[n])};return r.value=t,r.attached=gve(),r}function yve(t,e){if($t(e)){const r=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{r.call(t),t._stopped=!0},e.map(n=>i=>!i._stopped&&n&&n(i))}else return e}const UN=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,bve=(t,e,r,n,i,s)=>{const a=i==="svg";e==="class"?ave(t,n,a):e==="style"?lve(t,r,n):Q6(e)?KP(e)||hve(t,e,r,n,s):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):wve(t,e,n,a))?(FN(t,e,n),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&NN(t,e,n,a,s,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!Vn(n))?FN(t,Sa(e),n,s,e):(e==="true-value"?t._trueValue=n:e==="false-value"&&(t._falseValue=n),NN(t,e,n,a))};function wve(t,e,r,n){if(n)return!!(e==="innerHTML"||e==="textContent"||e in t&&UN(e)&&Wt(r));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const i=t.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return UN(e)&&Vn(r)?!1:e in t}const see=new WeakMap,aee=new WeakMap,j3=Symbol("_moveCb"),jN=Symbol("_enterCb"),_ve=t=>(delete t.props.mode,t),xve=_ve({name:"TransitionGroup",props:Li({},tee,{tag:String,moveClass:String}),setup(t,{slots:e}){const r=mR(),n=wQ();let i,s;return cR(()=>{if(!i.length)return;const a=t.moveClass||`${t.name||"v"}-move`;if(!Tve(i[0].el,r.vnode.el,a))return;i.forEach(Sve),i.forEach(Eve);const o=i.filter(kve);qA(),o.forEach(c=>{const u=c.el,l=u.style;qc(u,a),l.transform=l.webkitTransform=l.transitionDuration="";const f=u[j3]=d=>{d&&d.target!==u||(!d||/transform$/.test(d.propertyName))&&(u.removeEventListener("transitionend",f),u[j3]=null,uf(u,a))};u.addEventListener("transitionend",f)})}),()=>{const a=kt(t),o=ree(a);let c=a.tag||ar;if(i=[],s)for(let u=0;u<s.length;u++){const l=s[u];l.el&&l.el instanceof Element&&(i.push(l),Ah(l,ev(l,o,n,r)),see.set(l,l.el.getBoundingClientRect()))}s=e.default?oR(e.default()):[];for(let u=0;u<s.length;u++){const l=s[u];l.key!=null&&Ah(l,ev(l,o,n,r))}return ae(c,null,s)}}}),gR=xve;function Sve(t){const e=t.el;e[j3]&&e[j3](),e[jN]&&e[jN]()}function Eve(t){aee.set(t,t.el.getBoundingClientRect())}function kve(t){const e=see.get(t),r=aee.get(t),n=e.left-r.left,i=e.top-r.top;if(n||i){const s=t.el.style;return s.transform=s.webkitTransform=`translate(${n}px,${i}px)`,s.transitionDuration="0s",t}}function Tve(t,e,r){const n=t.cloneNode(),i=t[V1];i&&i.forEach(o=>{o.split(/\s+/).forEach(c=>c&&n.classList.remove(c))}),r.split(/\s+/).forEach(o=>o&&n.classList.add(o)),n.style.display="none";const s=e.nodeType===1?e:e.parentNode;s.appendChild(n);const{hasTransform:a}=nee(n);return s.removeChild(n),a}const Ave=["ctrl","shift","alt","meta"],Cve={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>Ave.some(r=>t[`${r}Key`]&&!e.includes(r))},Ive=(t,e)=>{const r=t._withMods||(t._withMods={}),n=e.join(".");return r[n]||(r[n]=(i,...s)=>{for(let a=0;a<e.length;a++){const o=Cve[e[a]];if(o&&o(i,e))return}return t(i,...s)})},Pve=Li({patchProp:bve},rve);let VN;function oee(){return VN||(VN=Cge(Pve))}const Rve=(...t)=>{oee().render(...t)},Ove=(...t)=>{const e=oee().createApp(...t),{mount:r}=e;return e.mount=n=>{const i=Dve(n);if(!i)return;const s=e._component;!Wt(s)&&!s.render&&!s.template&&(s.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const a=r(i,!1,Bve(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),a},e};function Bve(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function Dve(t){return Vn(t)?document.querySelector(t):t}function Ih(t,e){let r;function n(){r=ZP(),r.run(()=>e.length?e(()=>{r?.stop(),n()}):e())}Ft(t,i=>{i&&!r?n():i||(r?.stop(),r=void 0)},{immediate:!0}),ka(()=>{r?.stop()})}const Lr=typeof window<"u",vR=Lr&&"IntersectionObserver"in window,Mve=Lr&&("ontouchstart"in window||window.navigator.maxTouchPoints>0);function cee(t,e,r){const n=e.length-1;if(n<0)return t===void 0?r:t;for(let i=0;i<n;i++){if(t==null)return r;t=t[e[i]]}return t==null||t[e[n]]===void 0?r:t[e[n]]}function cu(t,e){if(t===e)return!0;if(t instanceof Date&&e instanceof Date&&t.getTime()!==e.getTime()||t!==Object(t)||e!==Object(e))return!1;const r=Object.keys(t);return r.length!==Object.keys(e).length?!1:r.every(n=>cu(t[n],e[n]))}function zA(t,e,r){return t==null||!e||typeof e!="string"?r:t[e]!==void 0?t[e]:(e=e.replace(/\[(\w+)\]/g,".$1"),e=e.replace(/^\./,""),cee(t,e.split("."),r))}function Yl(t,e,r){if(e===!0)return t===void 0?r:t;if(e==null||typeof e=="boolean")return r;if(t!==Object(t)){if(typeof e!="function")return r;const i=e(t,r);return typeof i>"u"?r:i}if(typeof e=="string")return zA(t,e,r);if(Array.isArray(e))return cee(t,e,r);if(typeof e!="function")return r;const n=e(t,r);return typeof n>"u"?r:n}function lee(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return Array.from({length:t},(r,n)=>e+n)}function Ht(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"px";if(t==null||t==="")return;const r=Number(t);return isNaN(r)?String(t):isFinite(r)?`${r}${e}`:void 0}function uee(t){return t!==null&&typeof t=="object"&&!Array.isArray(t)}function qN(t){let e;return t!==null&&typeof t=="object"&&((e=Object.getPrototypeOf(t))===Object.prototype||e===null)}function fee(t){if(t&&"$el"in t){const e=t.$el;return e?.nodeType===Node.TEXT_NODE?e.nextElementSibling:e}return t}const zN=Object.freeze({enter:13,tab:9,delete:46,esc:27,space:32,up:38,down:40,left:37,right:39,end:35,home:36,del:46,backspace:8,insert:45,pageup:33,pagedown:34,shift:16});function dee(t){return Object.keys(t)}function q_(t,e){return e.every(r=>t.hasOwnProperty(r))}function l8(t,e){const r={};for(const n of e)Object.hasOwn(t,n)&&(r[n]=t[n]);return r}function HN(t,e,r){const n=Object.create(null),i=Object.create(null);for(const s in t)e.some(a=>a instanceof RegExp?a.test(s):a===s)?n[s]=t[s]:i[s]=t[s];return[n,i]}function Mp(t,e){const r={...t};return e.forEach(n=>delete r[n]),r}const hee=/^on[^a-z]/,pee=t=>hee.test(t),Nve=["onAfterscriptexecute","onAnimationcancel","onAnimationend","onAnimationiteration","onAnimationstart","onAuxclick","onBeforeinput","onBeforescriptexecute","onChange","onClick","onCompositionend","onCompositionstart","onCompositionupdate","onContextmenu","onCopy","onCut","onDblclick","onFocusin","onFocusout","onFullscreenchange","onFullscreenerror","onGesturechange","onGestureend","onGesturestart","onGotpointercapture","onInput","onKeydown","onKeypress","onKeyup","onLostpointercapture","onMousedown","onMousemove","onMouseout","onMouseover","onMouseup","onMousewheel","onPaste","onPointercancel","onPointerdown","onPointerenter","onPointerleave","onPointermove","onPointerout","onPointerover","onPointerup","onReset","onSelect","onSubmit","onTouchcancel","onTouchend","onTouchmove","onTouchstart","onTransitioncancel","onTransitionend","onTransitionrun","onTransitionstart","onWheel"];function yR(t){const[e,r]=HN(t,[hee]),n=Mp(e,Nve),[i,s]=HN(r,["class","style","id",/^data-/]);return Object.assign(i,e),Object.assign(s,n),[i,s]}function oc(t){return t==null?[]:Array.isArray(t)?t:[t]}function Fve(t,e){let r=0;const n=function(){for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];clearTimeout(r),r=setTimeout(()=>t(...s),Ve(e))};return n.clear=()=>{clearTimeout(r)},n.immediate=t,n}function lu(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;return Math.max(e,Math.min(r,t))}function WN(t,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"0";return t+r.repeat(Math.max(0,e-t.length))}function GN(t,e){return(arguments.length>2&&arguments[2]!==void 0?arguments[2]:"0").repeat(Math.max(0,e-t.length))+t}function Lve(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;const r=[];let n=0;for(;n<t.length;)r.push(t.substr(n,e)),n+=e;return r}function Os(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;const n={};for(const i in t)n[i]=t[i];for(const i in e){const s=t[i],a=e[i];if(qN(s)&&qN(a)){n[i]=Os(s,a,r);continue}if(r&&Array.isArray(s)&&Array.isArray(a)){n[i]=r(s,a);continue}n[i]=a}return n}function mee(t){return t.map(e=>e.type===ar?mee(e.children):e).flat()}function ch(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";if(ch.cache.has(t))return ch.cache.get(t);const e=t.replace(/[^a-z]/gi,"-").replace(/\B([A-Z])/g,"-$1").toLowerCase();return ch.cache.set(t,e),e}ch.cache=new Map;function m1(t,e){if(!e||typeof e!="object")return[];if(Array.isArray(e))return e.map(r=>m1(t,r)).flat(1);if(e.suspense)return m1(t,e.ssContent);if(Array.isArray(e.children))return e.children.map(r=>m1(t,r)).flat(1);if(e.component){if(Object.getOwnPropertySymbols(e.component.provides).includes(t))return[e.component];if(e.component.subTree)return m1(t,e.component.subTree).flat(1)}return[]}function bR(t){const e=yi({}),r=ve(t);return $i(()=>{for(const n in r.value)e[n]=r.value[n]},{flush:"sync"}),sR(e)}function V3(t,e){return t.includes(e)}function gee(t){return t[2].toLowerCase()+t.slice(3)}const ba=()=>[Function,Array];function KN(t,e){return e="on"+Ru(e),!!(t[e]||t[`${e}Once`]||t[`${e}Capture`]||t[`${e}OnceCapture`]||t[`${e}CaptureOnce`])}function vee(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];if(Array.isArray(t))for(const i of t)i(...r);else typeof t=="function"&&t(...r)}function nv(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const r=["button","[href]",'input:not([type="hidden"])',"select","textarea","[tabindex]"].map(n=>`${n}${e?':not([tabindex="-1"])':""}:not([disabled])`).join(", ");return[...t.querySelectorAll(r)]}function yee(t,e,r){let n,i=t.indexOf(document.activeElement);const s=e==="next"?1:-1;do i+=s,n=t[i];while((!n||n.offsetParent==null||!(r?.(n)??!0))&&i<t.length&&i>=0);return n}function Eg(t,e){const r=nv(t);if(!e)(t===document.activeElement||!t.contains(document.activeElement))&&r[0]?.focus();else if(e==="first")r[0]?.focus();else if(e==="last")r.at(-1)?.focus();else if(typeof e=="number")r[e]?.focus();else{const n=yee(r,e);n?n.focus():Eg(t,e==="next"?"first":"last")}}function q3(t,e){if(!(Lr&&typeof CSS<"u"&&typeof CSS.supports<"u"&&CSS.supports(`selector(${e})`)))return null;try{return!!t&&t.matches(e)}catch{return null}}function bee(t){return t.some(e=>j1(e)?e.type===Cs?!1:e.type!==ar||bee(e.children):!0)?t:null}function $ve(t,e){if(!Lr||t===0)return e(),()=>{};const r=window.setTimeout(e,t);return()=>window.clearTimeout(r)}function Uve(t,e){const r=t.clientX,n=t.clientY,i=e.getBoundingClientRect(),s=i.left,a=i.top,o=i.right,c=i.bottom;return r>=s&&r<=o&&n>=a&&n<=c}function HA(){const t=Dt(),e=r=>{t.value=r};return Object.defineProperty(e,"value",{enumerable:!0,get:()=>t.value,set:r=>t.value=r}),Object.defineProperty(e,"el",{enumerable:!0,get:()=>fee(t.value)}),e}function XN(t){const e=t.key.length===1,r=!t.ctrlKey&&!t.metaKey&&!t.altKey;return e&&r}function wee(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"||typeof t=="bigint"}const _ee=["top","bottom"],jve=["start","end","left","right"];function WA(t,e){let[r,n]=t.split(" ");return n||(n=V3(_ee,r)?"start":V3(jve,r)?"top":"center"),{side:YN(r,e),align:YN(n,e)}}function YN(t,e){return t==="start"?e?"right":"left":t==="end"?e?"left":"right":t}function z_(t){return{side:{center:"center",top:"bottom",bottom:"top",left:"right",right:"left"}[t.side],align:t.align}}function H_(t){return{side:t.side,align:{center:"center",top:"bottom",bottom:"top",left:"right",right:"left"}[t.align]}}function ZN(t){return{side:t.align,align:t.side}}function JN(t){return V3(_ee,t.side)?"y":"x"}class lh{constructor(e){let{x:r,y:n,width:i,height:s}=e;this.x=r,this.y=n,this.width=i,this.height=s}get top(){return this.y}get bottom(){return this.y+this.height}get left(){return this.x}get right(){return this.x+this.width}}function QN(t,e){return{x:{before:Math.max(0,e.left-t.left),after:Math.max(0,t.right-e.right)},y:{before:Math.max(0,e.top-t.top),after:Math.max(0,t.bottom-e.bottom)}}}function xee(t){return Array.isArray(t)?new lh({x:t[0],y:t[1],width:0,height:0}):t.getBoundingClientRect()}function wR(t){const e=t.getBoundingClientRect(),r=getComputedStyle(t),n=r.transform;if(n){let i,s,a,o,c;if(n.startsWith("matrix3d("))i=n.slice(9,-1).split(/, /),s=Number(i[0]),a=Number(i[5]),o=Number(i[12]),c=Number(i[13]);else if(n.startsWith("matrix("))i=n.slice(7,-1).split(/, /),s=Number(i[0]),a=Number(i[3]),o=Number(i[4]),c=Number(i[5]);else return new lh(e);const u=r.transformOrigin,l=e.x-o-(1-s)*parseFloat(u),f=e.y-c-(1-a)*parseFloat(u.slice(u.indexOf(" ")+1)),d=s?e.width/s:t.offsetWidth+1,h=a?e.height/a:t.offsetHeight+1;return new lh({x:l,y:f,width:d,height:h})}else return new lh(e)}function g1(t,e,r){if(typeof t.animate>"u")return{finished:Promise.resolve()};let n;try{n=t.animate(e,r)}catch{return{finished:Promise.resolve()}}return typeof n.finished>"u"&&(n.finished=new Promise(i=>{n.onfinish=()=>{i(n)}})),n}const i3=new WeakMap;function Vve(t,e){Object.keys(e).forEach(r=>{if(pee(r)){const n=gee(r),i=i3.get(t);if(e[r]==null)i?.forEach(s=>{const[a,o]=s;a===n&&(t.removeEventListener(n,o),i.delete(s))});else if(!i||![...i].some(s=>s[0]===n&&s[1]===e[r])){t.addEventListener(n,e[r]);const s=i||new Set;s.add([n,e[r]]),i3.has(t)||i3.set(t,s)}}else e[r]==null?t.removeAttribute(r):t.setAttribute(r,e[r])})}function qve(t,e){Object.keys(e).forEach(r=>{if(pee(r)){const n=gee(r),i=i3.get(t);i?.forEach(s=>{const[a,o]=s;a===n&&(t.removeEventListener(n,o),i.delete(s))})}else t.removeAttribute(r)})}const q0=2.4,eF=.2126729,tF=.7151522,rF=.072175,zve=.55,Hve=.58,Wve=.57,Gve=.62,M2=.03,nF=1.45,Kve=5e-4,Xve=1.25,Yve=1.25,Zve=.078,iF=12.82051282051282,N2=.06,Jve=.001;function sF(t,e){const r=(t.r/255)**q0,n=(t.g/255)**q0,i=(t.b/255)**q0,s=(e.r/255)**q0,a=(e.g/255)**q0,o=(e.b/255)**q0;let c=r*eF+n*tF+i*rF,u=s*eF+a*tF+o*rF;if(c<=M2&&(c+=(M2-c)**nF),u<=M2&&(u+=(M2-u)**nF),Math.abs(u-c)<Kve)return 0;let l;if(u>c){const f=(u**zve-c**Hve)*Xve;l=f<Jve?0:f<Zve?f-f*iF*N2:f-N2}else{const f=(u**Gve-c**Wve)*Yve;l=f>-.001?0:f>-.078?f-f*iF*N2:f+N2}return l*100}function Qve(t,e){e=Array.isArray(e)?e.slice(0,-1).map(r=>`'${r}'`).join(", ")+` or '${e.at(-1)}'`:`'${e}'`}const z3=.20689655172413793,eye=t=>t>z3**3?Math.cbrt(t):t/(3*z3**2)+4/29,tye=t=>t>z3?t**3:3*z3**2*(t-4/29);function See(t){const e=eye,r=e(t[1]);return[116*r-16,500*(e(t[0]/.95047)-r),200*(r-e(t[2]/1.08883))]}function Eee(t){const e=tye,r=(t[0]+16)/116;return[e(r+t[1]/500)*.95047,e(r),e(r-t[2]/200)*1.08883]}const rye=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]],nye=t=>t<=.0031308?t*12.92:1.055*t**(1/2.4)-.055,iye=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],sye=t=>t<=.04045?t/12.92:((t+.055)/1.055)**2.4;function kee(t){const e=Array(3),r=nye,n=rye;for(let i=0;i<3;++i)e[i]=Math.round(lu(r(n[i][0]*t[0]+n[i][1]*t[1]+n[i][2]*t[2]))*255);return{r:e[0],g:e[1],b:e[2]}}function _R(t){let{r:e,g:r,b:n}=t;const i=[0,0,0],s=sye,a=iye;e=s(e/255),r=s(r/255),n=s(n/255);for(let o=0;o<3;++o)i[o]=a[o][0]*e+a[o][1]*r+a[o][2]*n;return i}function GA(t){return!!t&&/^(#|var\(--|(rgb|hsl)a?\()/.test(t)}function aye(t){return GA(t)&&!/^((rgb|hsl)a?\()?var\(--/.test(t)}const aF=/^(?<fn>(?:rgb|hsl)a?)\((?<values>.+)\)/,oye={rgb:(t,e,r,n)=>({r:t,g:e,b:r,a:n}),rgba:(t,e,r,n)=>({r:t,g:e,b:r,a:n}),hsl:(t,e,r,n)=>oF({h:t,s:e,l:r,a:n}),hsla:(t,e,r,n)=>oF({h:t,s:e,l:r,a:n}),hsv:(t,e,r,n)=>iv({h:t,s:e,v:r,a:n}),hsva:(t,e,r,n)=>iv({h:t,s:e,v:r,a:n})};function nl(t){if(typeof t=="number")return{r:(t&16711680)>>16,g:(t&65280)>>8,b:t&255};if(typeof t=="string"&&aF.test(t)){const{groups:e}=t.match(aF),{fn:r,values:n}=e,i=n.split(/,\s*/).map(s=>s.endsWith("%")&&["hsl","hsla","hsv","hsva"].includes(r)?parseFloat(s)/100:parseFloat(s));return oye[r](...i)}else if(typeof t=="string"){let e=t.startsWith("#")?t.slice(1):t;return[3,4].includes(e.length)?e=e.split("").map(r=>r+r).join(""):[6,8].includes(e.length),lye(e)}else if(typeof t=="object"){if(q_(t,["r","g","b"]))return t;if(q_(t,["h","s","l"]))return iv(Tee(t));if(q_(t,["h","s","v"]))return iv(t)}throw new TypeError(`Invalid color: ${t==null?t:String(t)||t.constructor.name}
Expected #hex, #hexa, rgb(), rgba(), hsl(), hsla(), object or number`)}function iv(t){const{h:e,s:r,v:n,a:i}=t,s=o=>{const c=(o+e/60)%6;return n-n*r*Math.max(Math.min(c,4-c,1),0)},a=[s(5),s(3),s(1)].map(o=>Math.round(o*255));return{r:a[0],g:a[1],b:a[2],a:i}}function oF(t){return iv(Tee(t))}function Tee(t){const{h:e,s:r,l:n,a:i}=t,s=n+r*Math.min(n,1-n),a=s===0?0:2-2*n/s;return{h:e,s:a,v:s,a:i}}function F2(t){const e=Math.round(t).toString(16);return("00".substr(0,2-e.length)+e).toUpperCase()}function cye(t){let{r:e,g:r,b:n,a:i}=t;return`#${[F2(e),F2(r),F2(n),i!==void 0?F2(Math.round(i*255)):""].join("")}`}function lye(t){t=uye(t);let[e,r,n,i]=Lve(t,2).map(s=>parseInt(s,16));return i=i===void 0?i:i/255,{r:e,g:r,b:n,a:i}}function uye(t){return t.startsWith("#")&&(t=t.slice(1)),t=t.replace(/([^0-9a-f])/gi,"F"),(t.length===3||t.length===4)&&(t=t.split("").map(e=>e+e).join("")),t.length!==6&&(t=WN(WN(t,6),8,"F")),t}function fye(t,e){const r=See(_R(t));return r[0]=r[0]+e*10,kee(Eee(r))}function dye(t,e){const r=See(_R(t));return r[0]=r[0]-e*10,kee(Eee(r))}function hye(t){const e=nl(t);return _R(e)[1]}function Aee(t){const e=Math.abs(sF(nl(0),nl(t)));return Math.abs(sF(nl(16777215),nl(t)))>Math.min(e,50)?"#fff":"#000"}function et(t,e){return r=>Object.keys(t).reduce((n,i)=>{const a=typeof t[i]=="object"&&t[i]!=null&&!Array.isArray(t[i])?t[i]:{type:t[i]};return r&&i in r?n[i]={...a,default:r[i]}:n[i]=a,e&&!n[i].source&&(n[i].source=e),n},{})}const Qt=et({class:[String,Array,Object],style:{type:[String,Array,Object],default:null}},"component");function Si(t,e){const r=mR();if(!r)throw new Error(`[Vuetify] ${t} must be called from inside a setup function`);return r}function yl(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"composables";const e=Si(t).type;return ch(e?.aliasName||e?.name)}let Cee=0,s3=new WeakMap;function xc(){const t=Si("getUid");if(s3.has(t))return s3.get(t);{const e=Cee++;return s3.set(t,e),e}}xc.reset=()=>{Cee=0,s3=new WeakMap};function pye(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Si("injectSelf");const{provides:r}=e;if(r&&t in r)return r[t]}const q1=Symbol.for("vuetify:defaults");function mye(t){return ze(t)}function xR(){const t=Zt(q1);if(!t)throw new Error("[Vuetify] Could not find defaults instance");return t}function Np(t,e){const r=xR(),n=ze(t),i=ve(()=>{if(Ve(e?.disabled))return r.value;const a=Ve(e?.scoped),o=Ve(e?.reset),c=Ve(e?.root);if(n.value==null&&!(a||o||c))return r.value;let u=Os(n.value,{prev:r.value});if(a)return u;if(o||c){const l=Number(o||1/0);for(let f=0;f<=l&&!(!u||!("prev"in u));f++)u=u.prev;return u&&typeof c=="string"&&c in u&&(u=Os(Os(u,{prev:u}),u[c])),u}return u.prev?Os(u.prev,u):u});return dn(q1,i),i}function gye(t,e){return typeof t.props?.[e]<"u"||typeof t.props?.[ch(e)]<"u"}function vye(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:xR();const n=Si("useDefaults");if(e=e??n.type.name??n.type.__name,!e)throw new Error("[Vuetify] Could not determine component name");const i=ve(()=>r.value?.[t._as??e]),s=new Proxy(t,{get(c,u){const l=Reflect.get(c,u);return u==="class"||u==="style"?[i.value?.[u],l].filter(f=>f!=null):typeof u=="string"&&!gye(n.vnode,u)?i.value?.[u]!==void 0?i.value?.[u]:r.value?.global?.[u]!==void 0?r.value?.global?.[u]:l:l}}),a=Dt();$i(()=>{if(i.value){const c=Object.entries(i.value).filter(u=>{let[l]=u;return l.startsWith(l[0].toUpperCase())});a.value=c.length?Object.fromEntries(c):void 0}else a.value=void 0});function o(){const c=pye(q1,n);dn(q1,ve(()=>a.value?Os(c?.value??{},a.value):c?.value))}return{props:s,provideSubDefaults:o}}function Fp(t){if(t._setup=t._setup??t.setup,!t.name)return t;if(t._setup){t.props=et(t.props??{},t.name)();const e=Object.keys(t.props).filter(r=>r!=="class"&&r!=="style");t.filterProps=function(n){return l8(n,e)},t.props._as=String,t.setup=function(n,i){const s=xR();if(!s.value)return t._setup(n,i);const{props:a,provideSubDefaults:o}=vye(n,n._as??t.name,s),c=t._setup(a,i);return o(),c}}return t}function _t(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return e=>(t?Fp:Pn)(e)}function SR(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"div",r=arguments.length>2?arguments[2]:void 0;return _t()({name:r??Ru(Sa(t.replace(/__/g,"-"))),props:{tag:{type:String,default:e},...Qt()},setup(n,i){let{slots:s}=i;return()=>ps(n.tag,{class:[t,n.class],style:n.style},s.default?.())}})}function Iee(t){if(typeof t.getRootNode!="function"){for(;t.parentNode;)t=t.parentNode;return t!==document?null:document}const e=t.getRootNode();return e!==document&&e.getRootNode({composed:!0})!==document?null:e}const H3="cubic-bezier(0.4, 0, 0.2, 1)",yye="cubic-bezier(0.0, 0, 0.2, 1)",bye="cubic-bezier(0.4, 0, 1, 1)";function Pee(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;for(;t;){if(e?wye(t):ER(t))return t;t=t.parentElement}return document.scrollingElement}function W3(t,e){const r=[];if(e&&t&&!e.contains(t))return r;for(;t&&(ER(t)&&r.push(t),t!==e);)t=t.parentElement;return r}function ER(t){if(!t||t.nodeType!==Node.ELEMENT_NODE)return!1;const e=window.getComputedStyle(t);return e.overflowY==="scroll"||e.overflowY==="auto"&&t.scrollHeight>t.clientHeight}function wye(t){if(!t||t.nodeType!==Node.ELEMENT_NODE)return!1;const e=window.getComputedStyle(t);return["scroll","auto"].includes(e.overflowY)}function _ye(t){for(;t;){if(window.getComputedStyle(t).position==="fixed")return!0;t=t.offsetParent}return!1}function Gt(t){const e=Si("useRender");e.render=t}function si(t,e,r){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:f=>f,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:f=>f;const s=Si("useProxiedModel"),a=ze(t[e]!==void 0?t[e]:r),o=ch(e),u=ve(o!==e?()=>(t[e],!!((s.vnode.props?.hasOwnProperty(e)||s.vnode.props?.hasOwnProperty(o))&&(s.vnode.props?.hasOwnProperty(`onUpdate:${e}`)||s.vnode.props?.hasOwnProperty(`onUpdate:${o}`)))):()=>(t[e],!!(s.vnode.props?.hasOwnProperty(e)&&s.vnode.props?.hasOwnProperty(`onUpdate:${e}`))));Ih(()=>!u.value,()=>{Ft(()=>t[e],f=>{a.value=f})});const l=ve({get(){const f=t[e];return n(u.value?f:a.value)},set(f){const d=i(f),h=kt(u.value?t[e]:a.value);h===d||n(h)===f||(a.value=d,s?.emit(`update:${e}`,d))}});return Object.defineProperty(l,"externalValue",{get:()=>u.value?t[e]:a.value}),l}const xye={badge:"Badge",open:"Open",close:"Close",dismiss:"Dismiss",confirmEdit:{ok:"OK",cancel:"Cancel"},dataIterator:{noResultsText:"No matching records found",loadingText:"Loading items..."},dataTable:{itemsPerPageText:"Rows per page:",ariaLabel:{sortDescending:"Sorted descending.",sortAscending:"Sorted ascending.",sortNone:"Not sorted.",activateNone:"Activate to remove sorting.",activateDescending:"Activate to sort descending.",activateAscending:"Activate to sort ascending."},sortBy:"Sort by"},dataFooter:{itemsPerPageText:"Items per page:",itemsPerPageAll:"All",nextPage:"Next page",prevPage:"Previous page",firstPage:"First page",lastPage:"Last page",pageText:"{0}-{1} of {2}"},dateRangeInput:{divider:"to"},datePicker:{itemsSelected:"{0} selected",range:{title:"Select dates",header:"Enter dates"},title:"Select date",header:"Enter date",input:{placeholder:"Enter date"}},noDataText:"No data available",carousel:{prev:"Previous visual",next:"Next visual",ariaLabel:{delimiter:"Carousel slide {0} of {1}"}},calendar:{moreEvents:"{0} more",today:"Today"},input:{clear:"Clear {0}",prependAction:"{0} prepended action",appendAction:"{0} appended action",otp:"Please enter OTP character {0}"},fileInput:{counter:"{0} files",counterSize:"{0} files ({1} in total)"},fileUpload:{title:"Drag and drop files here",divider:"or",browse:"Browse Files"},timePicker:{am:"AM",pm:"PM",title:"Select Time"},pagination:{ariaLabel:{root:"Pagination Navigation",next:"Next page",previous:"Previous page",page:"Go to page {0}",currentPage:"Page {0}, Current page",first:"First page",last:"Last page"}},stepper:{next:"Next",prev:"Previous"},rating:{ariaLabel:{item:"Rating {0} of {1}"}},loading:"Loading...",infiniteScroll:{loadMore:"Load more",empty:"No more"}},cF="$vuetify.",lF=(t,e)=>t.replace(/\{(\d+)\}/g,(r,n)=>String(e[Number(n)])),Ree=(t,e,r)=>function(n){for(var i=arguments.length,s=new Array(i>1?i-1:0),a=1;a<i;a++)s[a-1]=arguments[a];if(!n.startsWith(cF))return lF(n,s);const o=n.replace(cF,""),c=t.value&&r.value[t.value],u=e.value&&r.value[e.value];let l=zA(c,o,null);return l||(`${n}${t.value}`,l=zA(u,o,null)),l||(l=n),typeof l!="string"&&(l=n),lF(l,s)};function Oee(t,e){return(r,n)=>new Intl.NumberFormat([t.value,e.value],n).format(r)}function W_(t,e,r){const n=si(t,e,t[e]??r.value);return n.value=t[e]??r.value,Ft(r,i=>{t[e]==null&&(n.value=r.value)}),n}function Bee(t){return e=>{const r=W_(e,"locale",t.current),n=W_(e,"fallback",t.fallback),i=W_(e,"messages",t.messages);return{name:"vuetify",current:r,fallback:n,messages:i,t:Ree(r,n,i),n:Oee(r,n),provide:Bee({current:r,fallback:n,messages:i})}}}function Sye(t){const e=Dt(t?.locale??"en"),r=Dt(t?.fallback??"en"),n=ze({en:xye,...t?.messages});return{name:"vuetify",current:e,fallback:r,messages:n,t:Ree(e,r,n),n:Oee(e,r),provide:Bee({current:e,fallback:r,messages:n})}}const z1=Symbol.for("vuetify:locale");function Eye(t){return t.name!=null}function kye(t){const e=t?.adapter&&Eye(t?.adapter)?t?.adapter:Sye(t),r=Cye(e,t);return{...e,...r}}function u8(){const t=Zt(z1);if(!t)throw new Error("[Vuetify] Could not find injected locale instance");return t}function Tye(t){const e=Zt(z1);if(!e)throw new Error("[Vuetify] Could not find injected locale instance");const r=e.provide(t),n=Iye(r,e.rtl,t),i={...r,...n};return dn(z1,i),i}function Aye(){return{af:!1,ar:!0,bg:!1,ca:!1,ckb:!1,cs:!1,de:!1,el:!1,en:!1,es:!1,et:!1,fa:!0,fi:!1,fr:!1,hr:!1,hu:!1,he:!0,id:!1,it:!1,ja:!1,km:!1,ko:!1,lv:!1,lt:!1,nl:!1,no:!1,pl:!1,pt:!1,ro:!1,ru:!1,sk:!1,sl:!1,srCyrl:!1,srLatn:!1,sv:!1,th:!1,tr:!1,az:!1,uk:!1,vi:!1,zhHans:!1,zhHant:!1}}function Cye(t,e){const r=ze(e?.rtl??Aye()),n=ve(()=>r.value[t.current.value]??!1);return{isRtl:n,rtl:r,rtlClasses:ve(()=>`v-locale--is-${n.value?"rtl":"ltr"}`)}}function Iye(t,e,r){const n=ve(()=>r.rtl??e.value[t.current.value]??!1);return{isRtl:n,rtl:e,rtlClasses:ve(()=>`v-locale--is-${n.value?"rtl":"ltr"}`)}}function Oo(){const t=Zt(z1);if(!t)throw new Error("[Vuetify] Could not find injected rtl instance");return{isRtl:t.isRtl,rtlClasses:t.rtlClasses}}const f8={"001":1,AD:1,AE:6,AF:6,AG:0,AI:1,AL:1,AM:1,AN:1,AR:1,AS:0,AT:1,AU:1,AX:1,AZ:1,BA:1,BD:0,BE:1,BG:1,BH:6,BM:1,BN:1,BR:0,BS:0,BT:0,BW:0,BY:1,BZ:0,CA:0,CH:1,CL:1,CM:1,CN:1,CO:0,CR:1,CY:1,CZ:1,DE:1,DJ:6,DK:1,DM:0,DO:0,DZ:6,EC:1,EE:1,EG:6,ES:1,ET:0,FI:1,FJ:1,FO:1,FR:1,GB:1,"GB-alt-variant":0,GE:1,GF:1,GP:1,GR:1,GT:0,GU:0,HK:0,HN:0,HR:1,HU:1,ID:0,IE:1,IL:0,IN:0,IQ:6,IR:6,IS:1,IT:1,JM:0,JO:6,JP:0,KE:0,KG:1,KH:0,KR:0,KW:6,KZ:1,LA:0,LB:1,LI:1,LK:1,LT:1,LU:1,LV:1,LY:6,MC:1,MD:1,ME:1,MH:0,MK:1,MM:0,MN:1,MO:0,MQ:1,MT:0,MV:5,MX:0,MY:1,MZ:0,NI:0,NL:1,NO:1,NP:0,NZ:1,OM:6,PA:0,PE:0,PH:0,PK:0,PL:1,PR:0,PT:0,PY:0,QA:6,RE:1,RO:1,RS:1,RU:1,SA:0,SD:6,SE:1,SG:0,SI:1,SK:1,SM:1,SV:0,SY:6,TH:0,TJ:1,TM:1,TR:1,TT:0,TW:0,UA:1,UM:0,US:0,UY:1,UZ:1,VA:1,VE:0,VI:0,VN:1,WS:0,XK:1,YE:0,ZA:0,ZW:0};function Pye(t,e,r){const n=[];let i=[];const s=Dee(t),a=Mee(t),o=r??f8[e.slice(-2).toUpperCase()]??0,c=(s.getDay()-o+7)%7,u=(a.getDay()-o+7)%7;for(let l=0;l<c;l++){const f=new Date(s);f.setDate(f.getDate()-(c-l)),i.push(f)}for(let l=1;l<=a.getDate();l++){const f=new Date(t.getFullYear(),t.getMonth(),l);i.push(f),i.length===7&&(n.push(i),i=[])}for(let l=1;l<7-u;l++){const f=new Date(a);f.setDate(f.getDate()+l),i.push(f)}return i.length>0&&n.push(i),n}function Rye(t,e,r){const n=r??f8[e.slice(-2).toUpperCase()]??0,i=new Date(t);for(;i.getDay()!==n;)i.setDate(i.getDate()-1);return i}function Oye(t,e){const r=new Date(t),n=((f8[e.slice(-2).toUpperCase()]??0)+6)%7;for(;r.getDay()!==n;)r.setDate(r.getDate()+1);return r}function Dee(t){return new Date(t.getFullYear(),t.getMonth(),1)}function Mee(t){return new Date(t.getFullYear(),t.getMonth()+1,0)}function Bye(t){const e=t.split("-").map(Number);return new Date(e[0],e[1]-1,e[2])}const Dye=/^([12]\d{3}-([1-9]|0[1-9]|1[0-2])-([1-9]|0[1-9]|[12]\d|3[01]))$/;function Nee(t){if(t==null)return new Date;if(t instanceof Date)return t;if(typeof t=="string"){let e;if(Dye.test(t))return Bye(t);if(e=Date.parse(t),!isNaN(e))return new Date(e)}return null}const uF=new Date(2e3,0,2);function Mye(t,e){const r=e??f8[t.slice(-2).toUpperCase()]??0;return lee(7).map(n=>{const i=new Date(uF);return i.setDate(uF.getDate()+r+n),new Intl.DateTimeFormat(t,{weekday:"narrow"}).format(i)})}function Nye(t,e,r,n){const i=Nee(t)??new Date,s=n?.[e];if(typeof s=="function")return s(i,e,r);let a={};switch(e){case"fullDate":a={year:"numeric",month:"long",day:"numeric"};break;case"fullDateWithWeekday":a={weekday:"long",year:"numeric",month:"long",day:"numeric"};break;case"normalDate":const o=i.getDate(),c=new Intl.DateTimeFormat(r,{month:"long"}).format(i);return`${o} ${c}`;case"normalDateWithWeekday":a={weekday:"short",day:"numeric",month:"short"};break;case"shortDate":a={month:"short",day:"numeric"};break;case"year":a={year:"numeric"};break;case"month":a={month:"long"};break;case"monthShort":a={month:"short"};break;case"monthAndYear":a={month:"long",year:"numeric"};break;case"monthAndDate":a={month:"long",day:"numeric"};break;case"weekday":a={weekday:"long"};break;case"weekdayShort":a={weekday:"short"};break;case"dayOfMonth":return new Intl.NumberFormat(r).format(i.getDate());case"hours12h":a={hour:"numeric",hour12:!0};break;case"hours24h":a={hour:"numeric",hour12:!1};break;case"minutes":a={minute:"numeric"};break;case"seconds":a={second:"numeric"};break;case"fullTime":a={hour:"numeric",minute:"numeric"};break;case"fullTime12h":a={hour:"numeric",minute:"numeric",hour12:!0};break;case"fullTime24h":a={hour:"numeric",minute:"numeric",hour12:!1};break;case"fullDateTime":a={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric"};break;case"fullDateTime12h":a={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",hour12:!0};break;case"fullDateTime24h":a={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",hour12:!1};break;case"keyboardDate":a={year:"numeric",month:"2-digit",day:"2-digit"};break;case"keyboardDateTime":return a={year:"numeric",month:"2-digit",day:"2-digit",hour:"numeric",minute:"numeric"},new Intl.DateTimeFormat(r,a).format(i).replace(/, /g," ");case"keyboardDateTime12h":return a={year:"numeric",month:"2-digit",day:"2-digit",hour:"numeric",minute:"numeric",hour12:!0},new Intl.DateTimeFormat(r,a).format(i).replace(/, /g," ");case"keyboardDateTime24h":return a={year:"numeric",month:"2-digit",day:"2-digit",hour:"numeric",minute:"numeric",hour12:!1},new Intl.DateTimeFormat(r,a).format(i).replace(/, /g," ");default:a=s??{timeZone:"UTC",timeZoneName:"short"}}return new Intl.DateTimeFormat(r,a).format(i)}function Fye(t,e){const r=t.toJsDate(e),n=r.getFullYear(),i=GN(String(r.getMonth()+1),2,"0"),s=GN(String(r.getDate()),2,"0");return`${n}-${i}-${s}`}function Lye(t){const[e,r,n]=t.split("-").map(Number);return new Date(e,r-1,n)}function $ye(t,e){const r=new Date(t);return r.setMinutes(r.getMinutes()+e),r}function Uye(t,e){const r=new Date(t);return r.setHours(r.getHours()+e),r}function jye(t,e){const r=new Date(t);return r.setDate(r.getDate()+e),r}function Vye(t,e){const r=new Date(t);return r.setDate(r.getDate()+e*7),r}function qye(t,e){const r=new Date(t);return r.setDate(1),r.setMonth(r.getMonth()+e),r}function zye(t){return t.getFullYear()}function Hye(t){return t.getMonth()}function Wye(t){return t.getDate()}function Gye(t){return new Date(t.getFullYear(),t.getMonth()+1,1)}function Kye(t){return new Date(t.getFullYear(),t.getMonth()-1,1)}function Xye(t){return t.getHours()}function Yye(t){return t.getMinutes()}function Zye(t){return new Date(t.getFullYear(),0,1)}function Jye(t){return new Date(t.getFullYear(),11,31)}function Qye(t,e){return G3(t,e[0])&&r2e(t,e[1])}function e2e(t){const e=new Date(t);return e instanceof Date&&!isNaN(e.getTime())}function G3(t,e){return t.getTime()>e.getTime()}function t2e(t,e){return G3(KA(t),KA(e))}function r2e(t,e){return t.getTime()<e.getTime()}function fF(t,e){return t.getTime()===e.getTime()}function n2e(t,e){return t.getDate()===e.getDate()&&t.getMonth()===e.getMonth()&&t.getFullYear()===e.getFullYear()}function i2e(t,e){return t.getMonth()===e.getMonth()&&t.getFullYear()===e.getFullYear()}function s2e(t,e){return t.getFullYear()===e.getFullYear()}function a2e(t,e,r){const n=new Date(t),i=new Date(e);switch(r){case"years":return n.getFullYear()-i.getFullYear();case"quarters":return Math.floor((n.getMonth()-i.getMonth()+(n.getFullYear()-i.getFullYear())*12)/4);case"months":return n.getMonth()-i.getMonth()+(n.getFullYear()-i.getFullYear())*12;case"weeks":return Math.floor((n.getTime()-i.getTime())/(1e3*60*60*24*7));case"days":return Math.floor((n.getTime()-i.getTime())/(1e3*60*60*24));case"hours":return Math.floor((n.getTime()-i.getTime())/(1e3*60*60));case"minutes":return Math.floor((n.getTime()-i.getTime())/(1e3*60));case"seconds":return Math.floor((n.getTime()-i.getTime())/1e3);default:return n.getTime()-i.getTime()}}function o2e(t,e){const r=new Date(t);return r.setHours(e),r}function c2e(t,e){const r=new Date(t);return r.setMinutes(e),r}function l2e(t,e){const r=new Date(t);return r.setMonth(e),r}function u2e(t,e){const r=new Date(t);return r.setDate(e),r}function f2e(t,e){const r=new Date(t);return r.setFullYear(e),r}function KA(t){return new Date(t.getFullYear(),t.getMonth(),t.getDate(),0,0,0,0)}function d2e(t){return new Date(t.getFullYear(),t.getMonth(),t.getDate(),23,59,59,999)}class h2e{constructor(e){this.locale=e.locale,this.formats=e.formats}date(e){return Nee(e)}toJsDate(e){return e}toISO(e){return Fye(this,e)}parseISO(e){return Lye(e)}addMinutes(e,r){return $ye(e,r)}addHours(e,r){return Uye(e,r)}addDays(e,r){return jye(e,r)}addWeeks(e,r){return Vye(e,r)}addMonths(e,r){return qye(e,r)}getWeekArray(e,r){return Pye(e,this.locale,r?Number(r):void 0)}startOfWeek(e,r){return Rye(e,this.locale,r?Number(r):void 0)}endOfWeek(e){return Oye(e,this.locale)}startOfMonth(e){return Dee(e)}endOfMonth(e){return Mee(e)}format(e,r){return Nye(e,r,this.locale,this.formats)}isEqual(e,r){return fF(e,r)}isValid(e){return e2e(e)}isWithinRange(e,r){return Qye(e,r)}isAfter(e,r){return G3(e,r)}isAfterDay(e,r){return t2e(e,r)}isBefore(e,r){return!G3(e,r)&&!fF(e,r)}isSameDay(e,r){return n2e(e,r)}isSameMonth(e,r){return i2e(e,r)}isSameYear(e,r){return s2e(e,r)}setMinutes(e,r){return c2e(e,r)}setHours(e,r){return o2e(e,r)}setMonth(e,r){return l2e(e,r)}setDate(e,r){return u2e(e,r)}setYear(e,r){return f2e(e,r)}getDiff(e,r,n){return a2e(e,r,n)}getWeekdays(e){return Mye(this.locale,e?Number(e):void 0)}getYear(e){return zye(e)}getMonth(e){return Hye(e)}getDate(e){return Wye(e)}getNextMonth(e){return Gye(e)}getPreviousMonth(e){return Kye(e)}getHours(e){return Xye(e)}getMinutes(e){return Yye(e)}startOfDay(e){return KA(e)}endOfDay(e){return d2e(e)}startOfYear(e){return Zye(e)}endOfYear(e){return Jye(e)}}const p2e=Symbol.for("vuetify:date-options"),dF=Symbol.for("vuetify:date-adapter");function m2e(t,e){const r=Os({adapter:h2e,locale:{af:"af-ZA",bg:"bg-BG",ca:"ca-ES",ckb:"",cs:"cs-CZ",de:"de-DE",el:"el-GR",en:"en-US",et:"et-EE",fa:"fa-IR",fi:"fi-FI",hr:"hr-HR",hu:"hu-HU",he:"he-IL",id:"id-ID",it:"it-IT",ja:"ja-JP",ko:"ko-KR",lv:"lv-LV",lt:"lt-LT",nl:"nl-NL",no:"no-NO",pl:"pl-PL",pt:"pt-PT",ro:"ro-RO",ru:"ru-RU",sk:"sk-SK",sl:"sl-SI",srCyrl:"sr-SP",srLatn:"sr-SP",sv:"sv-SE",th:"th-TH",tr:"tr-TR",az:"az-AZ",uk:"uk-UA",vi:"vi-VN",zhHans:"zh-CN",zhHant:"zh-TW"}},t);return{options:r,instance:g2e(r,e)}}function g2e(t,e){const r=yi(typeof t.adapter=="function"?new t.adapter({locale:t.locale[e.current.value]??e.current.value,formats:t.formats}):t.adapter);return Ft(e.current,n=>{r.locale=t.locale[n]??n??r.locale}),r}const d8=["sm","md","lg","xl","xxl"],XA=Symbol.for("vuetify:display"),hF={mobileBreakpoint:"lg",thresholds:{xs:0,sm:600,md:960,lg:1280,xl:1920,xxl:2560}},v2e=function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:hF;return Os(hF,t)};function pF(t){return Lr&&!t?window.innerWidth:typeof t=="object"&&t.clientWidth||0}function mF(t){return Lr&&!t?window.innerHeight:typeof t=="object"&&t.clientHeight||0}function gF(t){const e=Lr&&!t?window.navigator.userAgent:"ssr";function r(m){return!!e.match(m)}const n=r(/android/i),i=r(/iphone|ipad|ipod/i),s=r(/cordova/i),a=r(/electron/i),o=r(/chrome/i),c=r(/edge/i),u=r(/firefox/i),l=r(/opera/i),f=r(/win/i),d=r(/mac/i),h=r(/linux/i);return{android:n,ios:i,cordova:s,electron:a,chrome:o,edge:c,firefox:u,opera:l,win:f,mac:d,linux:h,touch:Mve,ssr:e==="ssr"}}function y2e(t,e){const{thresholds:r,mobileBreakpoint:n}=v2e(t),i=Dt(mF(e)),s=Dt(gF(e)),a=yi({}),o=Dt(pF(e));function c(){i.value=mF(),o.value=pF()}function u(){c(),s.value=gF()}return $i(()=>{const l=o.value<r.sm,f=o.value<r.md&&!l,d=o.value<r.lg&&!(f||l),h=o.value<r.xl&&!(d||f||l),m=o.value<r.xxl&&!(h||d||f||l),p=o.value>=r.xxl,g=l?"xs":f?"sm":d?"md":h?"lg":m?"xl":"xxl",v=typeof n=="number"?n:r[n],y=o.value<v;a.xs=l,a.sm=f,a.md=d,a.lg=h,a.xl=m,a.xxl=p,a.smAndUp=!l,a.mdAndUp=!(l||f),a.lgAndUp=!(l||f||d),a.xlAndUp=!(l||f||d||h),a.smAndDown=!(d||h||m||p),a.mdAndDown=!(h||m||p),a.lgAndDown=!(m||p),a.xlAndDown=!p,a.name=g,a.height=i.value,a.width=o.value,a.mobile=y,a.mobileBreakpoint=n,a.platform=s.value,a.thresholds=r}),Lr&&window.addEventListener("resize",c,{passive:!0}),{...sR(a),update:u,ssr:!!e}}const b2e=et({mobile:{type:Boolean,default:!1},mobileBreakpoint:[Number,String]},"display");function Bu(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{mobile:null},e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:yl();const r=Zt(XA);if(!r)throw new Error("Could not find Vuetify display injection");const n=ve(()=>t.mobile?!0:typeof t.mobileBreakpoint=="number"?r.width.value<t.mobileBreakpoint:t.mobileBreakpoint?r.width.value<r.thresholds.value[t.mobileBreakpoint]:t.mobile===null?r.mobile.value:!1),i=ve(()=>e?{[`${e}--mobile`]:n.value}:{});return{...r,displayClasses:i,mobile:n}}const Fee=Symbol.for("vuetify:goto");function Lee(){return{container:void 0,duration:300,layout:!1,offset:0,easing:"easeInOutCubic",patterns:{linear:t=>t,easeInQuad:t=>t**2,easeOutQuad:t=>t*(2-t),easeInOutQuad:t=>t<.5?2*t**2:-1+(4-2*t)*t,easeInCubic:t=>t**3,easeOutCubic:t=>--t**3+1,easeInOutCubic:t=>t<.5?4*t**3:(t-1)*(2*t-2)*(2*t-2)+1,easeInQuart:t=>t**4,easeOutQuart:t=>1- --t**4,easeInOutQuart:t=>t<.5?8*t**4:1-8*--t**4,easeInQuint:t=>t**5,easeOutQuint:t=>1+--t**5,easeInOutQuint:t=>t<.5?16*t**5:1+16*--t**5}}}function w2e(t){return kR(t)??(document.scrollingElement||document.body)}function kR(t){return typeof t=="string"?document.querySelector(t):fee(t)}function G_(t,e,r){if(typeof t=="number")return e&&r?-t:t;let n=kR(t),i=0;for(;n;)i+=e?n.offsetLeft:n.offsetTop,n=n.offsetParent;return i}function _2e(t,e){return{rtl:e.isRtl,options:Os(Lee(),t)}}async function vF(t,e,r,n){const i=r?"scrollLeft":"scrollTop",s=Os(n?.options??Lee(),e),a=n?.rtl.value,o=(typeof t=="number"?t:kR(t))??0,c=s.container==="parent"&&o instanceof HTMLElement?o.parentElement:w2e(s.container),u=typeof s.easing=="function"?s.easing:s.patterns[s.easing];if(!u)throw new TypeError(`Easing function "${s.easing}" not found.`);let l;if(typeof o=="number")l=G_(o,r,a);else if(l=G_(o,r,a)-G_(c,r,a),s.layout){const m=window.getComputedStyle(o).getPropertyValue("--v-layout-top");m&&(l-=parseInt(m,10))}l+=s.offset,l=S2e(c,l,!!a,!!r);const f=c[i]??0;if(l===f)return Promise.resolve(l);const d=performance.now();return new Promise(h=>requestAnimationFrame(function m(p){const v=(p-d)/s.duration,y=Math.floor(f+(l-f)*u(lu(v,0,1)));if(c[i]=y,v>=1&&Math.abs(y-c[i])<10)return h(l);if(v>2)return h(c[i]);requestAnimationFrame(m)}))}function x2e(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const e=Zt(Fee),{isRtl:r}=Oo();if(!e)throw new Error("[Vuetify] Could not find injected goto instance");const n={...e,rtl:ve(()=>e.rtl.value||r.value)};async function i(s,a){return vF(s,Os(t,a),!1,n)}return i.horizontal=async(s,a)=>vF(s,Os(t,a),!0,n),i}function S2e(t,e,r,n){const{scrollWidth:i,scrollHeight:s}=t,[a,o]=t===document.scrollingElement?[window.innerWidth,window.innerHeight]:[t.offsetWidth,t.offsetHeight];let c,u;return n?r?(c=-(i-a),u=0):(c=0,u=i-a):(c=0,u=s+-o),Math.max(Math.min(e,u),c)}const E2e={collapse:"mdi-chevron-up",complete:"mdi-check",cancel:"mdi-close-circle",close:"mdi-close",delete:"mdi-close-circle",clear:"mdi-close-circle",success:"mdi-check-circle",info:"mdi-information",warning:"mdi-alert-circle",error:"mdi-close-circle",prev:"mdi-chevron-left",next:"mdi-chevron-right",checkboxOn:"mdi-checkbox-marked",checkboxOff:"mdi-checkbox-blank-outline",checkboxIndeterminate:"mdi-minus-box",delimiter:"mdi-circle",sortAsc:"mdi-arrow-up",sortDesc:"mdi-arrow-down",expand:"mdi-chevron-down",menu:"mdi-menu",subgroup:"mdi-menu-down",dropdown:"mdi-menu-down",radioOn:"mdi-radiobox-marked",radioOff:"mdi-radiobox-blank",edit:"mdi-pencil",ratingEmpty:"mdi-star-outline",ratingFull:"mdi-star",ratingHalf:"mdi-star-half-full",loading:"mdi-cached",first:"mdi-page-first",last:"mdi-page-last",unfold:"mdi-unfold-more-horizontal",file:"mdi-paperclip",plus:"mdi-plus",minus:"mdi-minus",calendar:"mdi-calendar",treeviewCollapse:"mdi-menu-down",treeviewExpand:"mdi-menu-right",eyeDropper:"mdi-eyedropper",upload:"mdi-cloud-upload"},k2e={component:t=>ps(Uee,{...t,class:"mdi"})},$r=[String,Function,Object,Array],YA=Symbol.for("vuetify:icons"),h8=et({icon:{type:$r},tag:{type:String,required:!0}},"icon"),yF=_t()({name:"VComponentIcon",props:h8(),setup(t,e){let{slots:r}=e;return()=>{const n=t.icon;return ae(t.tag,null,{default:()=>[t.icon?ae(n,null,null):r.default?.()]})}}}),$ee=Fp({name:"VSvgIcon",inheritAttrs:!1,props:h8(),setup(t,e){let{attrs:r}=e;return()=>ae(t.tag,zt(r,{style:null}),{default:()=>[ae("svg",{class:"v-icon__svg",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",role:"img","aria-hidden":"true"},[Array.isArray(t.icon)?t.icon.map(n=>Array.isArray(n)?ae("path",{d:n[0],"fill-opacity":n[1]},null):ae("path",{d:n},null)):ae("path",{d:t.icon},null)])]})}});Fp({name:"VLigatureIcon",props:h8(),setup(t){return()=>ae(t.tag,null,{default:()=>[t.icon]})}});const Uee=Fp({name:"VClassIcon",props:h8(),setup(t){return()=>ae(t.tag,{class:t.icon},null)}});function T2e(){return{svg:{component:$ee},class:{component:Uee}}}function A2e(t){const e=T2e(),r=t?.defaultSet??"mdi";return r==="mdi"&&!e.mdi&&(e.mdi=k2e),Os({defaultSet:r,sets:e,aliases:{...E2e,vuetify:["M8.2241 14.2009L12 21L22 3H14.4459L8.2241 14.2009Z",["M7.26303 12.4733L7.00113 12L2 3H12.5261C12.5261 3 12.5261 3 12.5261 3L7.26303 12.4733Z",.6]],"vuetify-outline":"svg:M7.26 12.47 12.53 3H2L7.26 12.47ZM14.45 3 8.22 14.2 12 21 22 3H14.45ZM18.6 5 12 16.88 10.51 14.2 15.62 5ZM7.26 8.35 5.4 5H9.13L7.26 8.35Z","vuetify-play":["m6.376 13.184-4.11-7.192C1.505 4.66 2.467 3 4.003 3h8.532l-.953 1.576-.006.01-.396.677c-.429.732-.214 1.507.194 2.015.404.503 1.092.878 1.869.806a3.72 3.72 0 0 1 1.005.022c.276.053.434.143.523.237.138.146.38.635-.25 2.09-.893 1.63-1.553 1.722-1.847 1.677-.213-.033-.468-.158-.756-.406a4.95 4.95 0 0 1-.8-.927c-.39-.564-1.04-.84-1.66-.846-.625-.006-1.316.27-1.693.921l-.478.826-.911 1.506Z",["M9.093 11.552c.046-.079.144-.15.32-.148a.53.53 0 0 1 .43.207c.285.414.636.847 1.046 1.2.405.35.914.662 1.516.754 1.334.205 2.502-.698 3.48-2.495l.014-.028.013-.03c.687-1.574.774-2.852-.005-3.675-.37-.391-.861-.586-1.333-.676a5.243 5.243 0 0 0-1.447-.044c-.173.016-.393-.073-.54-.257-.145-.18-.127-.316-.082-.392l.393-.672L14.287 3h5.71c1.536 0 2.499 1.659 1.737 2.992l-7.997 13.996c-.768 1.344-2.706 1.344-3.473 0l-3.037-5.314 1.377-2.278.004-.006.004-.007.481-.831Z",.6]]}},t)}const C2e=t=>{const e=Zt(YA);if(!e)throw new Error("Missing Vuetify Icons provide!");return{iconData:ve(()=>{const n=Ve(t);if(!n)return{component:yF};let i=n;if(typeof i=="string"&&(i=i.trim(),i.startsWith("$")&&(i=e.aliases?.[i.slice(1)])),Array.isArray(i))return{component:$ee,icon:i};if(typeof i!="string")return{component:yF,icon:i};const s=Object.keys(e.sets).find(c=>typeof i=="string"&&i.startsWith(`${c}:`)),a=s?i.slice(s.length+1):i;return{component:e.sets[s??e.defaultSet].component,icon:a}})}},K3=Symbol.for("vuetify:theme"),Ei=et({theme:String},"theme");function bF(){return{defaultTheme:"light",variations:{colors:[],lighten:0,darken:0},themes:{light:{dark:!1,colors:{background:"#FFFFFF",surface:"#FFFFFF","surface-bright":"#FFFFFF","surface-light":"#EEEEEE","surface-variant":"#424242","on-surface-variant":"#EEEEEE",primary:"#1867C0","primary-darken-1":"#1F5592",secondary:"#48A9A6","secondary-darken-1":"#018786",error:"#B00020",info:"#2196F3",success:"#4CAF50",warning:"#FB8C00"},variables:{"border-color":"#000000","border-opacity":.12,"high-emphasis-opacity":.87,"medium-emphasis-opacity":.6,"disabled-opacity":.38,"idle-opacity":.04,"hover-opacity":.04,"focus-opacity":.12,"selected-opacity":.08,"activated-opacity":.12,"pressed-opacity":.12,"dragged-opacity":.08,"theme-kbd":"#212529","theme-on-kbd":"#FFFFFF","theme-code":"#F5F5F5","theme-on-code":"#000000"}},dark:{dark:!0,colors:{background:"#121212",surface:"#212121","surface-bright":"#ccbfd6","surface-light":"#424242","surface-variant":"#a3a3a3","on-surface-variant":"#424242",primary:"#2196F3","primary-darken-1":"#277CC1",secondary:"#54B6B2","secondary-darken-1":"#48A9A6",error:"#CF6679",info:"#2196F3",success:"#4CAF50",warning:"#FB8C00"},variables:{"border-color":"#FFFFFF","border-opacity":.12,"high-emphasis-opacity":1,"medium-emphasis-opacity":.7,"disabled-opacity":.5,"idle-opacity":.1,"hover-opacity":.04,"focus-opacity":.12,"selected-opacity":.08,"activated-opacity":.12,"pressed-opacity":.16,"dragged-opacity":.08,"theme-kbd":"#212529","theme-on-kbd":"#FFFFFF","theme-code":"#343434","theme-on-code":"#CCCCCC"}}}}}function I2e(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:bF();const e=bF();if(!t)return{...e,isDisabled:!0};const r={};for(const[n,i]of Object.entries(t.themes??{})){const s=i.dark||n==="dark"?e.themes?.dark:e.themes?.light;r[n]=Os(s,i)}return Os(e,{...t,themes:r})}function P2e(t){const e=I2e(t),r=ze(e.defaultTheme),n=ze(e.themes),i=ve(()=>{const l={};for(const[f,d]of Object.entries(n.value)){const h=l[f]={...d,colors:{...d.colors}};if(e.variations)for(const m of e.variations.colors){const p=h.colors[m];if(p)for(const g of["lighten","darken"]){const v=g==="lighten"?fye:dye;for(const y of lee(e.variations[g],1))h.colors[`${m}-${g}-${y}`]=cye(v(nl(p),y))}}for(const m of Object.keys(h.colors)){if(/^on-[a-z]/.test(m)||h.colors[`on-${m}`])continue;const p=`on-${m}`,g=nl(h.colors[m]);h.colors[p]=Aee(g)}}return l}),s=ve(()=>i.value[r.value]),a=ve(()=>{const l=[];s.value?.dark&&Id(l,":root",["color-scheme: dark"]),Id(l,":root",wF(s.value));for(const[m,p]of Object.entries(i.value))Id(l,`.v-theme--${m}`,[`color-scheme: ${p.dark?"dark":"normal"}`,...wF(p)]);const f=[],d=[],h=new Set(Object.values(i.value).flatMap(m=>Object.keys(m.colors)));for(const m of h)/^on-[a-z]/.test(m)?Id(d,`.${m}`,[`color: rgb(var(--v-theme-${m})) !important`]):(Id(f,`.bg-${m}`,[`--v-theme-overlay-multiplier: var(--v-theme-${m}-overlay-multiplier)`,`background-color: rgb(var(--v-theme-${m})) !important`,`color: rgb(var(--v-theme-on-${m})) !important`]),Id(d,`.text-${m}`,[`color: rgb(var(--v-theme-${m})) !important`]),Id(d,`.border-${m}`,[`--v-border-color: var(--v-theme-${m})`]));return l.push(...f,...d),l.map((m,p)=>p===0?m:`    ${m}`).join("")});function o(){return{style:[{textContent:a.value,id:"vuetify-theme-stylesheet",nonce:e.cspNonce||!1}]}}function c(l){if(e.isDisabled)return;const f=l._context.provides.usehead;if(f)if(f.push){const d=f.push(o);Lr&&Ft(a,()=>{d.patch(o)})}else Lr?(f.addHeadObjs(ve(o)),$i(()=>f.updateDOM())):f.addHeadObjs(o());else{let h=function(){if(typeof document<"u"&&!d){const m=document.createElement("style");m.type="text/css",m.id="vuetify-theme-stylesheet",e.cspNonce&&m.setAttribute("nonce",e.cspNonce),d=m,document.head.appendChild(d)}d&&(d.innerHTML=a.value)},d=Lr?document.getElementById("vuetify-theme-stylesheet"):null;Lr?Ft(a,h,{immediate:!0}):h()}}const u=ve(()=>e.isDisabled?void 0:`v-theme--${r.value}`);return{install:c,isDisabled:e.isDisabled,name:r,themes:n,current:s,computedThemes:i,themeClasses:u,styles:a,global:{name:r,current:s}}}function Yi(t){Si("provideTheme");const e=Zt(K3,null);if(!e)throw new Error("Could not find Vuetify theme injection");const r=ve(()=>t.theme??e.name.value),n=ve(()=>e.themes.value[r.value]),i=ve(()=>e.isDisabled?void 0:`v-theme--${r.value}`),s={...e,name:r,current:n,themeClasses:i};return dn(K3,s),s}function Id(t,e,r){t.push(`${e} {
`,...r.map(n=>`  ${n};
`),`}
`)}function wF(t){const e=t.dark?2:1,r=t.dark?1:2,n=[];for(const[i,s]of Object.entries(t.colors)){const a=nl(s);n.push(`--v-theme-${i}: ${a.r},${a.g},${a.b}`),i.startsWith("on-")||n.push(`--v-theme-${i}-overlay-multiplier: ${hye(s)>.18?e:r}`)}for(const[i,s]of Object.entries(t.variables)){const a=typeof s=="string"&&s.startsWith("#")?nl(s):void 0,o=a?`${a.r}, ${a.g}, ${a.b}`:void 0;n.push(`--v-${i}: ${o??s}`)}return n}function H1(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"content";const r=HA(),n=ze();if(Lr){const i=new ResizeObserver(s=>{s.length&&(e==="content"?n.value=s[0].contentRect:n.value=s[0].target.getBoundingClientRect())});hs(()=>{i.disconnect()}),Ft(()=>r.el,(s,a)=>{a&&(i.unobserve(a),n.value=void 0),s&&i.observe(s)},{flush:"post"})}return{resizeRef:r,contentRect:ly(n)}}const ZA=Symbol.for("vuetify:layout"),R2e=Symbol.for("vuetify:layout-item"),_F=1e3,O2e=et({overlaps:{type:Array,default:()=>[]},fullHeight:Boolean},"layout");function B2e(){const t=Zt(ZA);if(!t)throw new Error("[Vuetify] Could not find injected layout");return{getLayoutItem:t.getLayoutItem,mainRect:t.mainRect,mainStyles:t.mainStyles}}const D2e=(t,e,r,n)=>{let i={top:0,left:0,right:0,bottom:0};const s=[{id:"",layer:{...i}}];for(const a of t){const o=e.get(a),c=r.get(a),u=n.get(a);if(!o||!c||!u)continue;const l={...i,[o.value]:parseInt(i[o.value],10)+(u.value?parseInt(c.value,10):0)};s.push({id:a,layer:l}),i=l}return s};function M2e(t){const e=Zt(ZA,null),r=ve(()=>e?e.rootZIndex.value-100:_F),n=ze([]),i=yi(new Map),s=yi(new Map),a=yi(new Map),o=yi(new Map),c=yi(new Map),{resizeRef:u,contentRect:l}=H1(),f=ve(()=>{const E=new Map,k=t.overlaps??[];for(const B of k.filter(D=>D.includes(":"))){const[D,z]=B.split(":");if(!n.value.includes(D)||!n.value.includes(z))continue;const U=i.get(D),S=i.get(z),T=s.get(D),w=s.get(z);!U||!S||!T||!w||(E.set(z,{position:U.value,amount:parseInt(T.value,10)}),E.set(D,{position:S.value,amount:-parseInt(w.value,10)}))}return E}),d=ve(()=>{const E=[...new Set([...a.values()].map(B=>B.value))].sort((B,D)=>B-D),k=[];for(const B of E){const D=n.value.filter(z=>a.get(z)?.value===B);k.push(...D)}return D2e(k,i,s,o)}),h=ve(()=>!Array.from(c.values()).some(E=>E.value)),m=ve(()=>d.value[d.value.length-1].layer),p=ve(()=>({"--v-layout-left":Ht(m.value.left),"--v-layout-right":Ht(m.value.right),"--v-layout-top":Ht(m.value.top),"--v-layout-bottom":Ht(m.value.bottom),...h.value?void 0:{transition:"none"}})),g=ve(()=>d.value.slice(1).map((E,k)=>{let{id:B}=E;const{layer:D}=d.value[k],z=s.get(B),U=i.get(B);return{id:B,...D,size:Number(z.value),position:U.value}})),v=E=>g.value.find(k=>k.id===E),y=Si("createLayout"),b=Dt(!1);hn(()=>{b.value=!0}),dn(ZA,{register:(E,k)=>{let{id:B,order:D,position:z,layoutSize:U,elementSize:S,active:T,disableTransitions:w,absolute:A}=k;a.set(B,D),i.set(B,z),s.set(B,U),o.set(B,T),w&&c.set(B,w);const P=m1(R2e,y?.vnode).indexOf(E);P>-1?n.value.splice(P,0,B):n.value.push(B);const O=ve(()=>g.value.findIndex(M=>M.id===B)),R=ve(()=>r.value+d.value.length*2-O.value*2),I=ve(()=>{const M=z.value==="left"||z.value==="right",L=z.value==="right",N=z.value==="bottom",H=S.value??U.value,W=H===0?"%":"px",q={[z.value]:0,zIndex:R.value,transform:`translate${M?"X":"Y"}(${(T.value?0:-(H===0?100:H))*(L||N?-1:1)}${W})`,position:A.value||r.value!==_F?"absolute":"fixed",...h.value?void 0:{transition:"none"}};if(!b.value)return q;const G=g.value[O.value];if(!G)throw new Error(`[Vuetify] Could not find layout item "${B}"`);const Y=f.value.get(B);return Y&&(G[Y.position]+=Y.amount),{...q,height:M?`calc(100% - ${G.top}px - ${G.bottom}px)`:S.value?`${S.value}px`:void 0,left:L?void 0:`${G.left}px`,right:L?`${G.right}px`:void 0,top:z.value!=="bottom"?`${G.top}px`:void 0,bottom:z.value!=="top"?`${G.bottom}px`:void 0,width:M?S.value?`${S.value}px`:void 0:`calc(100% - ${G.left}px - ${G.right}px)`}}),C=ve(()=>({zIndex:R.value-1}));return{layoutItemStyles:I,layoutItemScrimStyles:C,zIndex:R}},unregister:E=>{a.delete(E),i.delete(E),s.delete(E),o.delete(E),c.delete(E),n.value=n.value.filter(k=>k!==E)},mainRect:m,mainStyles:p,getLayoutItem:v,items:g,layoutRect:l,rootZIndex:r});const _=ve(()=>["v-layout",{"v-layout--full-height":t.fullHeight}]),x=ve(()=>({zIndex:e?r.value:void 0,position:e?"relative":void 0,overflow:e?"hidden":void 0}));return{layoutClasses:_,layoutStyles:x,getLayoutItem:v,items:g,layoutRect:l,layoutRef:u}}function jee(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{blueprint:e,...r}=t,n=Os(e,r),{aliases:i={},components:s={},directives:a={}}=n,o=mye(n.defaults),c=y2e(n.display,n.ssr),u=P2e(n.theme),l=A2e(n.icons),f=kye(n.locale),d=m2e(n.date,f),h=_2e(n.goTo,f);return{install:p=>{for(const g in a)p.directive(g,a[g]);for(const g in s)p.component(g,s[g]);for(const g in i)p.component(g,Fp({...i[g],name:g,aliasName:i[g].name}));if(u.install(p),p.provide(q1,o),p.provide(XA,c),p.provide(K3,u),p.provide(YA,l),p.provide(z1,f),p.provide(p2e,d.options),p.provide(dF,d.instance),p.provide(Fee,h),Lr&&n.ssr)if(p.$nuxt)p.$nuxt.hook("app:suspense:resolve",()=>{c.update()});else{const{mount:g}=p;p.mount=function(){const v=g(...arguments);return Cn(()=>c.update()),p.mount=g,v}}xc.reset(),p.mixin({computed:{$vuetify(){return yi({defaults:z0.call(this,q1),display:z0.call(this,XA),theme:z0.call(this,K3),icons:z0.call(this,YA),locale:z0.call(this,z1),date:z0.call(this,dF)})}}})},defaults:o,display:c,theme:u,icons:l,locale:f,date:d,goTo:h}}const N2e="3.7.18";jee.version=N2e;function z0(t){const e=this.$,r=e.parent?.provides??e.vnode.appContext?.provides;if(r&&t in r)return r[t]}const F2e=jee({});/*!
  * vue-router v4.5.0
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const u1=typeof document<"u";function Vee(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function L2e(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&Vee(t.default)}const Wr=Object.assign;function K_(t,e){const r={};for(const n in e){const i=e[n];r[n]=gc(i)?i.map(t):t(i)}return r}const kg=()=>{},gc=Array.isArray,qee=/#/g,$2e=/&/g,U2e=/\//g,j2e=/=/g,V2e=/\?/g,zee=/\+/g,q2e=/%5B/g,z2e=/%5D/g,Hee=/%5E/g,H2e=/%60/g,Wee=/%7B/g,W2e=/%7C/g,Gee=/%7D/g,G2e=/%20/g;function TR(t){return encodeURI(""+t).replace(W2e,"|").replace(q2e,"[").replace(z2e,"]")}function K2e(t){return TR(t).replace(Wee,"{").replace(Gee,"}").replace(Hee,"^")}function JA(t){return TR(t).replace(zee,"%2B").replace(G2e,"+").replace(qee,"%23").replace($2e,"%26").replace(H2e,"`").replace(Wee,"{").replace(Gee,"}").replace(Hee,"^")}function X2e(t){return JA(t).replace(j2e,"%3D")}function Y2e(t){return TR(t).replace(qee,"%23").replace(V2e,"%3F")}function Z2e(t){return t==null?"":Y2e(t).replace(U2e,"%2F")}function sv(t){try{return decodeURIComponent(""+t)}catch{}return""+t}const J2e=/\/$/,Q2e=t=>t.replace(J2e,"");function X_(t,e,r="/"){let n,i={},s="",a="";const o=e.indexOf("#");let c=e.indexOf("?");return o<c&&o>=0&&(c=-1),c>-1&&(n=e.slice(0,c),s=e.slice(c+1,o>-1?o:e.length),i=t(s)),o>-1&&(n=n||e.slice(0,o),a=e.slice(o,e.length)),n=nbe(n??e,r),{fullPath:n+(s&&"?")+s+a,path:n,query:i,hash:sv(a)}}function ebe(t,e){const r=e.query?t(e.query):"";return e.path+(r&&"?")+r+(e.hash||"")}function xF(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function tbe(t,e,r){const n=e.matched.length-1,i=r.matched.length-1;return n>-1&&n===i&&W1(e.matched[n],r.matched[i])&&Kee(e.params,r.params)&&t(e.query)===t(r.query)&&e.hash===r.hash}function W1(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function Kee(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const r in t)if(!rbe(t[r],e[r]))return!1;return!0}function rbe(t,e){return gc(t)?SF(t,e):gc(e)?SF(e,t):t===e}function SF(t,e){return gc(e)?t.length===e.length&&t.every((r,n)=>r===e[n]):t.length===1&&t[0]===e}function nbe(t,e){if(t.startsWith("/"))return t;if(!t)return e;const r=e.split("/"),n=t.split("/"),i=n[n.length-1];(i===".."||i===".")&&n.push("");let s=r.length-1,a,o;for(a=0;a<n.length;a++)if(o=n[a],o!==".")if(o==="..")s>1&&s--;else break;return r.slice(0,s).join("/")+"/"+n.slice(a).join("/")}const Xu={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var av;(function(t){t.pop="pop",t.push="push"})(av||(av={}));var Tg;(function(t){t.back="back",t.forward="forward",t.unknown=""})(Tg||(Tg={}));function ibe(t){if(!t)if(u1){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),Q2e(t)}const sbe=/^[^#]+#/;function abe(t,e){return t.replace(sbe,"#")+e}function obe(t,e){const r=document.documentElement.getBoundingClientRect(),n=t.getBoundingClientRect();return{behavior:e.behavior,left:n.left-r.left-(e.left||0),top:n.top-r.top-(e.top||0)}}const p8=()=>({left:window.scrollX,top:window.scrollY});function cbe(t){let e;if("el"in t){const r=t.el,n=typeof r=="string"&&r.startsWith("#"),i=typeof r=="string"?n?document.getElementById(r.slice(1)):document.querySelector(r):r;if(!i)return;e=obe(i,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function EF(t,e){return(history.state?history.state.position-e:-1)+t}const QA=new Map;function lbe(t,e){QA.set(t,e)}function ube(t){const e=QA.get(t);return QA.delete(t),e}let fbe=()=>location.protocol+"//"+location.host;function Xee(t,e){const{pathname:r,search:n,hash:i}=e,s=t.indexOf("#");if(s>-1){let o=i.includes(t.slice(s))?t.slice(s).length:1,c=i.slice(o);return c[0]!=="/"&&(c="/"+c),xF(c,"")}return xF(r,t)+n+i}function dbe(t,e,r,n){let i=[],s=[],a=null;const o=({state:d})=>{const h=Xee(t,location),m=r.value,p=e.value;let g=0;if(d){if(r.value=h,e.value=d,a&&a===m){a=null;return}g=p?d.position-p.position:0}else n(h);i.forEach(v=>{v(r.value,m,{delta:g,type:av.pop,direction:g?g>0?Tg.forward:Tg.back:Tg.unknown})})};function c(){a=r.value}function u(d){i.push(d);const h=()=>{const m=i.indexOf(d);m>-1&&i.splice(m,1)};return s.push(h),h}function l(){const{history:d}=window;d.state&&d.replaceState(Wr({},d.state,{scroll:p8()}),"")}function f(){for(const d of s)d();s=[],window.removeEventListener("popstate",o),window.removeEventListener("beforeunload",l)}return window.addEventListener("popstate",o),window.addEventListener("beforeunload",l,{passive:!0}),{pauseListeners:c,listen:u,destroy:f}}function kF(t,e,r,n=!1,i=!1){return{back:t,current:e,forward:r,replaced:n,position:window.history.length,scroll:i?p8():null}}function hbe(t){const{history:e,location:r}=window,n={value:Xee(t,r)},i={value:e.state};i.value||s(n.value,{back:null,current:n.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function s(c,u,l){const f=t.indexOf("#"),d=f>-1?(r.host&&document.querySelector("base")?t:t.slice(f))+c:fbe()+t+c;try{e[l?"replaceState":"pushState"](u,"",d),i.value=u}catch(h){console.error(h),r[l?"replace":"assign"](d)}}function a(c,u){const l=Wr({},e.state,kF(i.value.back,c,i.value.forward,!0),u,{position:i.value.position});s(c,l,!0),n.value=c}function o(c,u){const l=Wr({},i.value,e.state,{forward:c,scroll:p8()});s(l.current,l,!0);const f=Wr({},kF(n.value,c,null),{position:l.position+1},u);s(c,f,!1),n.value=c}return{location:n,state:i,push:o,replace:a}}function pbe(t){t=ibe(t);const e=hbe(t),r=dbe(t,e.state,e.location,e.replace);function n(s,a=!0){a||r.pauseListeners(),history.go(s)}const i=Wr({location:"",base:t,go:n,createHref:abe.bind(null,t)},e,r);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>e.state.value}),i}function mbe(t){return t=location.host?t||location.pathname+location.search:"",t.includes("#")||(t+="#"),pbe(t)}function gbe(t){return typeof t=="string"||t&&typeof t=="object"}function Yee(t){return typeof t=="string"||typeof t=="symbol"}const Zee=Symbol("");var TF;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(TF||(TF={}));function G1(t,e){return Wr(new Error,{type:t,[Zee]:!0},e)}function Ol(t,e){return t instanceof Error&&Zee in t&&(e==null||!!(t.type&e))}const AF="[^/]+?",vbe={sensitive:!1,strict:!1,start:!0,end:!0},ybe=/[.+*?^${}()[\]/\\]/g;function bbe(t,e){const r=Wr({},vbe,e),n=[];let i=r.start?"^":"";const s=[];for(const u of t){const l=u.length?[]:[90];r.strict&&!u.length&&(i+="/");for(let f=0;f<u.length;f++){const d=u[f];let h=40+(r.sensitive?.25:0);if(d.type===0)f||(i+="/"),i+=d.value.replace(ybe,"\\$&"),h+=40;else if(d.type===1){const{value:m,repeatable:p,optional:g,regexp:v}=d;s.push({name:m,repeatable:p,optional:g});const y=v||AF;if(y!==AF){h+=10;try{new RegExp(`(${y})`)}catch(_){throw new Error(`Invalid custom RegExp for param "${m}" (${y}): `+_.message)}}let b=p?`((?:${y})(?:/(?:${y}))*)`:`(${y})`;f||(b=g&&u.length<2?`(?:/${b})`:"/"+b),g&&(b+="?"),i+=b,h+=20,g&&(h+=-8),p&&(h+=-20),y===".*"&&(h+=-50)}l.push(h)}n.push(l)}if(r.strict&&r.end){const u=n.length-1;n[u][n[u].length-1]+=.7000000000000001}r.strict||(i+="/?"),r.end?i+="$":r.strict&&!i.endsWith("/")&&(i+="(?:/|$)");const a=new RegExp(i,r.sensitive?"":"i");function o(u){const l=u.match(a),f={};if(!l)return null;for(let d=1;d<l.length;d++){const h=l[d]||"",m=s[d-1];f[m.name]=h&&m.repeatable?h.split("/"):h}return f}function c(u){let l="",f=!1;for(const d of t){(!f||!l.endsWith("/"))&&(l+="/"),f=!1;for(const h of d)if(h.type===0)l+=h.value;else if(h.type===1){const{value:m,repeatable:p,optional:g}=h,v=m in u?u[m]:"";if(gc(v)&&!p)throw new Error(`Provided param "${m}" is an array but it is not repeatable (* or + modifiers)`);const y=gc(v)?v.join("/"):v;if(!y)if(g)d.length<2&&(l.endsWith("/")?l=l.slice(0,-1):f=!0);else throw new Error(`Missing required param "${m}"`);l+=y}}return l||"/"}return{re:a,score:n,keys:s,parse:o,stringify:c}}function wbe(t,e){let r=0;for(;r<t.length&&r<e.length;){const n=e[r]-t[r];if(n)return n;r++}return t.length<e.length?t.length===1&&t[0]===80?-1:1:t.length>e.length?e.length===1&&e[0]===80?1:-1:0}function Jee(t,e){let r=0;const n=t.score,i=e.score;for(;r<n.length&&r<i.length;){const s=wbe(n[r],i[r]);if(s)return s;r++}if(Math.abs(i.length-n.length)===1){if(CF(n))return 1;if(CF(i))return-1}return i.length-n.length}function CF(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const _be={type:0,value:""},xbe=/[a-zA-Z0-9_]/;function Sbe(t){if(!t)return[[]];if(t==="/")return[[_be]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(h){throw new Error(`ERR (${r})/"${u}": ${h}`)}let r=0,n=r;const i=[];let s;function a(){s&&i.push(s),s=[]}let o=0,c,u="",l="";function f(){u&&(r===0?s.push({type:0,value:u}):r===1||r===2||r===3?(s.length>1&&(c==="*"||c==="+")&&e(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),s.push({type:1,value:u,regexp:l,repeatable:c==="*"||c==="+",optional:c==="*"||c==="?"})):e("Invalid state to consume buffer"),u="")}function d(){u+=c}for(;o<t.length;){if(c=t[o++],c==="\\"&&r!==2){n=r,r=4;continue}switch(r){case 0:c==="/"?(u&&f(),a()):c===":"?(f(),r=1):d();break;case 4:d(),r=n;break;case 1:c==="("?r=2:xbe.test(c)?d():(f(),r=0,c!=="*"&&c!=="?"&&c!=="+"&&o--);break;case 2:c===")"?l[l.length-1]=="\\"?l=l.slice(0,-1)+c:r=3:l+=c;break;case 3:f(),r=0,c!=="*"&&c!=="?"&&c!=="+"&&o--,l="";break;default:e("Unknown state");break}}return r===2&&e(`Unfinished custom RegExp for param "${u}"`),f(),a(),i}function Ebe(t,e,r){const n=bbe(Sbe(t.path),r),i=Wr(n,{record:t,parent:e,children:[],alias:[]});return e&&!i.record.aliasOf==!e.record.aliasOf&&e.children.push(i),i}function kbe(t,e){const r=[],n=new Map;e=OF({strict:!1,end:!0,sensitive:!1},e);function i(f){return n.get(f)}function s(f,d,h){const m=!h,p=PF(f);p.aliasOf=h&&h.record;const g=OF(e,f),v=[p];if("alias"in f){const _=typeof f.alias=="string"?[f.alias]:f.alias;for(const x of _)v.push(PF(Wr({},p,{components:h?h.record.components:p.components,path:x,aliasOf:h?h.record:p})))}let y,b;for(const _ of v){const{path:x}=_;if(d&&x[0]!=="/"){const E=d.record.path,k=E[E.length-1]==="/"?"":"/";_.path=d.record.path+(x&&k+x)}if(y=Ebe(_,d,g),h?h.alias.push(y):(b=b||y,b!==y&&b.alias.push(y),m&&f.name&&!RF(y)&&a(f.name)),Qee(y)&&c(y),p.children){const E=p.children;for(let k=0;k<E.length;k++)s(E[k],y,h&&h.children[k])}h=h||y}return b?()=>{a(b)}:kg}function a(f){if(Yee(f)){const d=n.get(f);d&&(n.delete(f),r.splice(r.indexOf(d),1),d.children.forEach(a),d.alias.forEach(a))}else{const d=r.indexOf(f);d>-1&&(r.splice(d,1),f.record.name&&n.delete(f.record.name),f.children.forEach(a),f.alias.forEach(a))}}function o(){return r}function c(f){const d=Cbe(f,r);r.splice(d,0,f),f.record.name&&!RF(f)&&n.set(f.record.name,f)}function u(f,d){let h,m={},p,g;if("name"in f&&f.name){if(h=n.get(f.name),!h)throw G1(1,{location:f});g=h.record.name,m=Wr(IF(d.params,h.keys.filter(b=>!b.optional).concat(h.parent?h.parent.keys.filter(b=>b.optional):[]).map(b=>b.name)),f.params&&IF(f.params,h.keys.map(b=>b.name))),p=h.stringify(m)}else if(f.path!=null)p=f.path,h=r.find(b=>b.re.test(p)),h&&(m=h.parse(p),g=h.record.name);else{if(h=d.name?n.get(d.name):r.find(b=>b.re.test(d.path)),!h)throw G1(1,{location:f,currentLocation:d});g=h.record.name,m=Wr({},d.params,f.params),p=h.stringify(m)}const v=[];let y=h;for(;y;)v.unshift(y.record),y=y.parent;return{name:g,path:p,params:m,matched:v,meta:Abe(v)}}t.forEach(f=>s(f));function l(){r.length=0,n.clear()}return{addRoute:s,resolve:u,removeRoute:a,clearRoutes:l,getRoutes:o,getRecordMatcher:i}}function IF(t,e){const r={};for(const n of e)n in t&&(r[n]=t[n]);return r}function PF(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:Tbe(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function Tbe(t){const e={},r=t.props||!1;if("component"in t)e.default=r;else for(const n in t.components)e[n]=typeof r=="object"?r[n]:r;return e}function RF(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function Abe(t){return t.reduce((e,r)=>Wr(e,r.meta),{})}function OF(t,e){const r={};for(const n in t)r[n]=n in e?e[n]:t[n];return r}function Cbe(t,e){let r=0,n=e.length;for(;r!==n;){const s=r+n>>1;Jee(t,e[s])<0?n=s:r=s+1}const i=Ibe(t);return i&&(n=e.lastIndexOf(i,n-1)),n}function Ibe(t){let e=t;for(;e=e.parent;)if(Qee(e)&&Jee(t,e)===0)return e}function Qee({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function Pbe(t){const e={};if(t===""||t==="?")return e;const n=(t[0]==="?"?t.slice(1):t).split("&");for(let i=0;i<n.length;++i){const s=n[i].replace(zee," "),a=s.indexOf("="),o=sv(a<0?s:s.slice(0,a)),c=a<0?null:sv(s.slice(a+1));if(o in e){let u=e[o];gc(u)||(u=e[o]=[u]),u.push(c)}else e[o]=c}return e}function BF(t){let e="";for(let r in t){const n=t[r];if(r=X2e(r),n==null){n!==void 0&&(e+=(e.length?"&":"")+r);continue}(gc(n)?n.map(s=>s&&JA(s)):[n&&JA(n)]).forEach(s=>{s!==void 0&&(e+=(e.length?"&":"")+r,s!=null&&(e+="="+s))})}return e}function Rbe(t){const e={};for(const r in t){const n=t[r];n!==void 0&&(e[r]=gc(n)?n.map(i=>i==null?null:""+i):n==null?n:""+n)}return e}const Obe=Symbol(""),DF=Symbol(""),AR=Symbol(""),ete=Symbol(""),eC=Symbol("");function km(){let t=[];function e(n){return t.push(n),()=>{const i=t.indexOf(n);i>-1&&t.splice(i,1)}}function r(){t=[]}return{add:e,list:()=>t.slice(),reset:r}}function yf(t,e,r,n,i,s=a=>a()){const a=n&&(n.enterCallbacks[i]=n.enterCallbacks[i]||[]);return()=>new Promise((o,c)=>{const u=d=>{d===!1?c(G1(4,{from:r,to:e})):d instanceof Error?c(d):gbe(d)?c(G1(2,{from:e,to:d})):(a&&n.enterCallbacks[i]===a&&typeof d=="function"&&a.push(d),o())},l=s(()=>t.call(n&&n.instances[i],e,r,u));let f=Promise.resolve(l);t.length<3&&(f=f.then(u)),f.catch(d=>c(d))})}function Y_(t,e,r,n,i=s=>s()){const s=[];for(const a of t)for(const o in a.components){let c=a.components[o];if(!(e!=="beforeRouteEnter"&&!a.instances[o]))if(Vee(c)){const l=(c.__vccOpts||c)[e];l&&s.push(yf(l,r,n,a,o,i))}else{let u=c();s.push(()=>u.then(l=>{if(!l)throw new Error(`Couldn't resolve component "${o}" at "${a.path}"`);const f=L2e(l)?l.default:l;a.mods[o]=l,a.components[o]=f;const h=(f.__vccOpts||f)[e];return h&&yf(h,r,n,a,o,i)()}))}}return s}function MF(t){const e=Zt(AR),r=Zt(ete),n=ve(()=>{const c=Ve(t.to);return e.resolve(c)}),i=ve(()=>{const{matched:c}=n.value,{length:u}=c,l=c[u-1],f=r.matched;if(!l||!f.length)return-1;const d=f.findIndex(W1.bind(null,l));if(d>-1)return d;const h=NF(c[u-2]);return u>1&&NF(l)===h&&f[f.length-1].path!==h?f.findIndex(W1.bind(null,c[u-2])):d}),s=ve(()=>i.value>-1&&Fbe(r.params,n.value.params)),a=ve(()=>i.value>-1&&i.value===r.matched.length-1&&Kee(r.params,n.value.params));function o(c={}){if(Nbe(c)){const u=e[Ve(t.replace)?"replace":"push"](Ve(t.to)).catch(kg);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>u),u}return Promise.resolve()}return{route:n,href:ve(()=>n.value.href),isActive:s,isExactActive:a,navigate:o}}function Bbe(t){return t.length===1?t[0]:t}const Dbe=Pn({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:MF,setup(t,{slots:e}){const r=yi(MF(t)),{options:n}=Zt(AR),i=ve(()=>({[FF(t.activeClass,n.linkActiveClass,"router-link-active")]:r.isActive,[FF(t.exactActiveClass,n.linkExactActiveClass,"router-link-exact-active")]:r.isExactActive}));return()=>{const s=e.default&&Bbe(e.default(r));return t.custom?s:ps("a",{"aria-current":r.isExactActive?t.ariaCurrentValue:null,href:r.href,onClick:r.navigate,class:i.value},s)}}}),Mbe=Dbe;function Nbe(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function Fbe(t,e){for(const r in e){const n=e[r],i=t[r];if(typeof n=="string"){if(n!==i)return!1}else if(!gc(i)||i.length!==n.length||n.some((s,a)=>s!==i[a]))return!1}return!0}function NF(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const FF=(t,e,r)=>t??e??r,Lbe=Pn({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:r}){const n=Zt(eC),i=ve(()=>t.route||n.value),s=Zt(DF,0),a=ve(()=>{let u=Ve(s);const{matched:l}=i.value;let f;for(;(f=l[u])&&!f.components;)u++;return u}),o=ve(()=>i.value.matched[a.value]);dn(DF,ve(()=>a.value+1)),dn(Obe,o),dn(eC,i);const c=ze();return Ft(()=>[c.value,o.value,t.name],([u,l,f],[d,h,m])=>{l&&(l.instances[f]=u,h&&h!==l&&u&&u===d&&(l.leaveGuards.size||(l.leaveGuards=h.leaveGuards),l.updateGuards.size||(l.updateGuards=h.updateGuards))),u&&l&&(!h||!W1(l,h)||!d)&&(l.enterCallbacks[f]||[]).forEach(p=>p(u))},{flush:"post"}),()=>{const u=i.value,l=t.name,f=o.value,d=f&&f.components[l];if(!d)return LF(r.default,{Component:d,route:u});const h=f.props[l],m=h?h===!0?u.params:typeof h=="function"?h(u):h:null,g=ps(d,Wr({},m,e,{onVnodeUnmounted:v=>{v.component.isUnmounted&&(f.instances[l]=null)},ref:c}));return LF(r.default,{Component:g,route:u})||g}}});function LF(t,e){if(!t)return null;const r=t(e);return r.length===1?r[0]:r}const $be=Lbe;function Ube(t){const e=kbe(t.routes,t),r=t.parseQuery||Pbe,n=t.stringifyQuery||BF,i=t.history,s=km(),a=km(),o=km(),c=Dt(Xu);let u=Xu;u1&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const l=K_.bind(null,q=>""+q),f=K_.bind(null,Z2e),d=K_.bind(null,sv);function h(q,G){let Y,te;return Yee(q)?(Y=e.getRecordMatcher(q),te=G):te=q,e.addRoute(te,Y)}function m(q){const G=e.getRecordMatcher(q);G&&e.removeRoute(G)}function p(){return e.getRoutes().map(q=>q.record)}function g(q){return!!e.getRecordMatcher(q)}function v(q,G){if(G=Wr({},G||c.value),typeof q=="string"){const V=X_(r,q,G.path),ne=e.resolve({path:V.path},G),se=i.createHref(V.fullPath);return Wr(V,ne,{params:d(ne.params),hash:sv(V.hash),redirectedFrom:void 0,href:se})}let Y;if(q.path!=null)Y=Wr({},q,{path:X_(r,q.path,G.path).path});else{const V=Wr({},q.params);for(const ne in V)V[ne]==null&&delete V[ne];Y=Wr({},q,{params:f(V)}),G.params=f(G.params)}const te=e.resolve(Y,G),Q=q.hash||"";te.params=l(d(te.params));const j=ebe(n,Wr({},q,{hash:K2e(Q),path:te.path})),Z=i.createHref(j);return Wr({fullPath:j,hash:Q,query:n===BF?Rbe(q.query):q.query||{}},te,{redirectedFrom:void 0,href:Z})}function y(q){return typeof q=="string"?X_(r,q,c.value.path):Wr({},q)}function b(q,G){if(u!==q)return G1(8,{from:G,to:q})}function _(q){return k(q)}function x(q){return _(Wr(y(q),{replace:!0}))}function E(q){const G=q.matched[q.matched.length-1];if(G&&G.redirect){const{redirect:Y}=G;let te=typeof Y=="function"?Y(q):Y;return typeof te=="string"&&(te=te.includes("?")||te.includes("#")?te=y(te):{path:te},te.params={}),Wr({query:q.query,hash:q.hash,params:te.path!=null?{}:q.params},te)}}function k(q,G){const Y=u=v(q),te=c.value,Q=q.state,j=q.force,Z=q.replace===!0,V=E(Y);if(V)return k(Wr(y(V),{state:typeof V=="object"?Wr({},Q,V.state):Q,force:j,replace:Z}),G||Y);const ne=Y;ne.redirectedFrom=G;let se;return!j&&tbe(n,te,Y)&&(se=G1(16,{to:ne,from:te}),C(te,te,!0,!1)),(se?Promise.resolve(se):z(ne,te)).catch(J=>Ol(J)?Ol(J,2)?J:I(J):O(J,ne,te)).then(J=>{if(J){if(Ol(J,2))return k(Wr({replace:Z},y(J.to),{state:typeof J.to=="object"?Wr({},Q,J.to.state):Q,force:j}),G||ne)}else J=S(ne,te,!0,Z,Q);return U(ne,te,J),J})}function B(q,G){const Y=b(q,G);return Y?Promise.reject(Y):Promise.resolve()}function D(q){const G=N.values().next().value;return G&&typeof G.runWithContext=="function"?G.runWithContext(q):q()}function z(q,G){let Y;const[te,Q,j]=jbe(q,G);Y=Y_(te.reverse(),"beforeRouteLeave",q,G);for(const V of te)V.leaveGuards.forEach(ne=>{Y.push(yf(ne,q,G))});const Z=B.bind(null,q,G);return Y.push(Z),W(Y).then(()=>{Y=[];for(const V of s.list())Y.push(yf(V,q,G));return Y.push(Z),W(Y)}).then(()=>{Y=Y_(Q,"beforeRouteUpdate",q,G);for(const V of Q)V.updateGuards.forEach(ne=>{Y.push(yf(ne,q,G))});return Y.push(Z),W(Y)}).then(()=>{Y=[];for(const V of j)if(V.beforeEnter)if(gc(V.beforeEnter))for(const ne of V.beforeEnter)Y.push(yf(ne,q,G));else Y.push(yf(V.beforeEnter,q,G));return Y.push(Z),W(Y)}).then(()=>(q.matched.forEach(V=>V.enterCallbacks={}),Y=Y_(j,"beforeRouteEnter",q,G,D),Y.push(Z),W(Y))).then(()=>{Y=[];for(const V of a.list())Y.push(yf(V,q,G));return Y.push(Z),W(Y)}).catch(V=>Ol(V,8)?V:Promise.reject(V))}function U(q,G,Y){o.list().forEach(te=>D(()=>te(q,G,Y)))}function S(q,G,Y,te,Q){const j=b(q,G);if(j)return j;const Z=G===Xu,V=u1?history.state:{};Y&&(te||Z?i.replace(q.fullPath,Wr({scroll:Z&&V&&V.scroll},Q)):i.push(q.fullPath,Q)),c.value=q,C(q,G,Y,Z),I()}let T;function w(){T||(T=i.listen((q,G,Y)=>{if(!H.listening)return;const te=v(q),Q=E(te);if(Q){k(Wr(Q,{replace:!0,force:!0}),te).catch(kg);return}u=te;const j=c.value;u1&&lbe(EF(j.fullPath,Y.delta),p8()),z(te,j).catch(Z=>Ol(Z,12)?Z:Ol(Z,2)?(k(Wr(y(Z.to),{force:!0}),te).then(V=>{Ol(V,20)&&!Y.delta&&Y.type===av.pop&&i.go(-1,!1)}).catch(kg),Promise.reject()):(Y.delta&&i.go(-Y.delta,!1),O(Z,te,j))).then(Z=>{Z=Z||S(te,j,!1),Z&&(Y.delta&&!Ol(Z,8)?i.go(-Y.delta,!1):Y.type===av.pop&&Ol(Z,20)&&i.go(-1,!1)),U(te,j,Z)}).catch(kg)}))}let A=km(),F=km(),P;function O(q,G,Y){I(q);const te=F.list();return te.length?te.forEach(Q=>Q(q,G,Y)):console.error(q),Promise.reject(q)}function R(){return P&&c.value!==Xu?Promise.resolve():new Promise((q,G)=>{A.add([q,G])})}function I(q){return P||(P=!q,w(),A.list().forEach(([G,Y])=>q?Y(q):G()),A.reset()),q}function C(q,G,Y,te){const{scrollBehavior:Q}=t;if(!u1||!Q)return Promise.resolve();const j=!Y&&ube(EF(q.fullPath,0))||(te||!Y)&&history.state&&history.state.scroll||null;return Cn().then(()=>Q(q,G,j)).then(Z=>Z&&cbe(Z)).catch(Z=>O(Z,q,G))}const M=q=>i.go(q);let L;const N=new Set,H={currentRoute:c,listening:!0,addRoute:h,removeRoute:m,clearRoutes:e.clearRoutes,hasRoute:g,getRoutes:p,resolve:v,options:t,push:_,replace:x,go:M,back:()=>M(-1),forward:()=>M(1),beforeEach:s.add,beforeResolve:a.add,afterEach:o.add,onError:F.add,isReady:R,install(q){const G=this;q.component("RouterLink",Mbe),q.component("RouterView",$be),q.config.globalProperties.$router=G,Object.defineProperty(q.config.globalProperties,"$route",{enumerable:!0,get:()=>Ve(c)}),u1&&!L&&c.value===Xu&&(L=!0,_(i.location).catch(Q=>{}));const Y={};for(const Q in Xu)Object.defineProperty(Y,Q,{get:()=>c.value[Q],enumerable:!0});q.provide(AR,G),q.provide(ete,oQ(Y)),q.provide(eC,c);const te=q.unmount;N.add(q),q.unmount=function(){N.delete(q),N.size<1&&(u=Xu,T&&T(),T=null,c.value=Xu,L=!1,P=!1),te()}}};function W(q){return q.reduce((G,Y)=>G.then(()=>D(Y)),Promise.resolve())}return H}function jbe(t,e){const r=[],n=[],i=[],s=Math.max(e.matched.length,t.matched.length);for(let a=0;a<s;a++){const o=e.matched[a];o&&(t.matched.find(u=>W1(u,o))?n.push(o):r.push(o));const c=t.matched[a];c&&(e.matched.find(u=>W1(u,c))||i.push(c))}return[r,n,i]}const Vbe="modulepreload",qbe=function(t){return"/egu24/"+t},$F={},qt=function(e,r,n){let i=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),o=a?.nonce||a?.getAttribute("nonce");i=Promise.allSettled(r.map(c=>{if(c=qbe(c),c in $F)return;$F[c]=!0;const u=c.endsWith(".css"),l=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${l}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":Vbe,u||(f.as="script"),f.crossOrigin="",f.href=c,o&&f.setAttribute("nonce",o),document.head.appendChild(f),u)return new Promise((d,h)=>{f.addEventListener("load",d),f.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return i.then(a=>{for(const o of a||[])o.status==="rejected"&&s(o.reason);return e().catch(s)})},zbe="data:image/svg+xml,%3csvg%20id='Layer_1'%20data-name='Layer%201'%20xmlns='http://www.w3.org/2000/svg'%20height='220'%20width='400'%20viewBox='0%200%20200%20110'%3e%3cdefs%3e%3cstyle%3e.cls-1{fill:%231697f6;}.cls-2{fill:%237bc6ff;}.cls-3{fill:%231867c0;}.cls-4{fill:%23aeddff;}.l{stroke:rgb(255,255,255);stroke-width:0.5}%3c/style%3e%3c/defs%3e%3cline%20class='l'%20x1='70.1742129851985'%20y1='1.87'%20x2='34.3464829934943'%20y2='10.01'%20/%3e%3cline%20class='l'%20x1='67.306684713793'%20y1='16.47'%20x2='34.3464829934943'%20y2='10.01'%20/%3e%3cline%20class='l'%20x1='34.3464829934943'%20y1='10.01'%20x2='22.5783740121382'%20y2='31.93'%20/%3e%3cline%20class='l'%20x1='22.5783740121382'%20y1='31.93'%20x2='13.8115094092477'%20y2='56.91'%20/%3e%3cline%20class='l'%20x1='13.8115094092477'%20y1='56.91'%20x2='46.9376282583068'%20y2='69.76'%20/%3e%3cline%20class='l'%20x1='46.9376282583068'%20y1='69.76'%20x2='86.0040169410121'%20y2='61.32'%20/%3e%3cline%20class='l'%20x1='86.0040169410121'%20y1='61.32'%20x2='91.0120944854386'%20y2='54.13'%20/%3e%3cline%20class='l'%20x1='86.0040169410121'%20y1='61.32'%20x2='100.419159062132'%20y2='66.30'%20/%3e%3cline%20class='l'%20x1='91.0120944854386'%20y1='54.13'%20x2='112.68938567'%20y2='63.71'%20/%3e%3cline%20class='l'%20x1='100.419159062132'%20y1='66.30'%20x2='112.68938567'%20y2='63.71'%20/%3e%3cline%20class='l'%20x1='112.68938567'%20y1='63.71'%20x2='97.9593284722526'%20y2='84.10'%20/%3e%3cline%20class='l'%20x1='97.9593284722526'%20y1='84.10'%20x2='88.4938654324761'%20y2='82.18'%20/%3e%3cline%20class='l'%20x1='88.4938654324761'%20y1='82.18'%20x2='69.5525695323757'%20y2='90.44'%20/%3e%3cline%20class='l'%20x1='69.5525695323757'%20y1='90.44'%20x2='64.1411605466533'%20y2='94.60'%20/%3e%3cline%20class='l'%20x1='112.68938567'%20y1='63.71'%20x2='136.188490590752'%20y2='68.42'%20/%3e%3cline%20class='l'%20x1='136.188490590752'%20y1='68.42'%20x2='157.031284111252'%20y2='83.37'%20/%3e%3cline%20class='l'%20x1='136.188490590752'%20y1='68.42'%20x2='142.952888267913'%20y2='53.85'%20/%3e%3cline%20class='l'%20x1='112.68938567'%20y1='63.71'%20x2='142.952888267913'%20y2='53.85'%20/%3e%3cline%20class='l'%20x1='142.952888267913'%20y1='53.85'%20x2='137.021896694756'%20y2='38.01'%20/%3e%3cline%20class='l'%20x1='91.0120944854386'%20y1='54.13'%20x2='137.021896694756'%20y2='38.01'%20/%3e%3cline%20class='l'%20x1='137.021896694756'%20y1='38.01'%20x2='142.973627909008'%20y2='29.65'%20/%3e%3cline%20class='l'%20x1='137.021896694756'%20y1='38.01'%20x2='162.02953761516'%20y2='50.80'%20/%3e%3cline%20class='l'%20x1='142.952888267913'%20y1='53.85'%20x2='162.02953761516'%20y2='50.80'%20/%3e%3cline%20class='l'%20x1='162.02953761516'%20y1='50.80'%20x2='185.910142776055'%20y2='57.71'%20/%3e%3ccircle%20class='cls-1'%20cx='70.1742129851985'%20cy='1.87'%20r='2'/%3e%3ccircle%20class='cls-2'%20cx='67.306684713793'%20cy='16.47'%20r='5'/%3e%3ccircle%20class='cls-3'%20cx='34.3464829934943'%20cy='10.01'%20r='3'/%3e%3ccircle%20class='cls-4'%20cx='22.5783740121382'%20cy='31.93'%20r='3'/%3e%3ccircle%20class='cls-1'%20cx='13.8115094092477'%20cy='56.91'%20r='2'/%3e%3ccircle%20class='cls-2'%20cx='46.9376282583068'%20cy='69.76'%20r='6'/%3e%3ccircle%20class='cls-3'%20cx='86.0040169410121'%20cy='61.32'%20r='4'/%3e%3ccircle%20class='cls-4'%20cx='91.0120944854386'%20cy='54.13'%20r='2'/%3e%3ccircle%20class='cls-1'%20cx='112.68938567'%20cy='63.71'%20r='5'/%3e%3ccircle%20class='cls-2'%20cx='100.419159062132'%20cy='66.30'%20r='2'/%3e%3ccircle%20class='cls-3'%20cx='88.4938654324761'%20cy='82.18'%20r='4'/%3e%3ccircle%20class='cls-4'%20cx='97.9593284722526'%20cy='84.10'%20r='3'/%3e%3ccircle%20class='cls-1'%20cx='69.5525695323757'%20cy='90.44'%20r='5'/%3e%3ccircle%20class='cls-2'%20cx='64.1411605466533'%20cy='94.60'%20r='2'/%3e%3ccircle%20class='cls-3'%20cx='157.031284111252'%20cy='83.37'%20r='3'/%3e%3ccircle%20class='cls-4'%20cx='136.188490590752'%20cy='68.42'%20r='5'/%3e%3ccircle%20class='cls-1'%20cx='142.952888267913'%20cy='53.85'%20r='2'/%3e%3ccircle%20class='cls-2'%20cx='162.02953761516'%20cy='50.80'%20r='4'/%3e%3ccircle%20class='cls-3'%20cx='185.910142776055'%20cy='57.71'%20r='4'/%3e%3ccircle%20class='cls-4'%20cx='137.021896694756'%20cy='38.01'%20r='5'/%3e%3ccircle%20class='cls-1'%20cx='142.973627909008'%20cy='29.65'%20r='3'/%3e%3c/svg%3e",is=[];for(let t=0;t<256;++t)is.push((t+256).toString(16).slice(1));function Hbe(t,e=0){return(is[t[e+0]]+is[t[e+1]]+is[t[e+2]]+is[t[e+3]]+"-"+is[t[e+4]]+is[t[e+5]]+"-"+is[t[e+6]]+is[t[e+7]]+"-"+is[t[e+8]]+is[t[e+9]]+"-"+is[t[e+10]]+is[t[e+11]]+is[t[e+12]]+is[t[e+13]]+is[t[e+14]]+is[t[e+15]]).toLowerCase()}let Z_;const Wbe=new Uint8Array(16);function Gbe(){if(!Z_){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Z_=crypto.getRandomValues.bind(crypto)}return Z_(Wbe)}const Kbe=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),UF={randomUUID:Kbe};function ti(t,e,r){if(UF.randomUUID&&!t)return UF.randomUUID();t=t||{};const n=t.random??t.rng?.()??Gbe();if(n.length<16)throw new Error("Random bytes length must be >= 16");return n[6]=n[6]&15|64,n[8]=n[8]&63|128,Hbe(n)}var tl=[],po=[],Xbe=typeof Uint8Array<"u"?Uint8Array:Array,CR=!1;function tte(){CR=!0;for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=0,r=t.length;e<r;++e)tl[e]=t[e],po[t.charCodeAt(e)]=e;po[45]=62,po[95]=63}function Ybe(t){CR||tte();var e,r,n,i,s,a,o=t.length;if(o%4>0)throw new Error("Invalid string. Length must be a multiple of 4");s=t[o-2]==="="?2:t[o-1]==="="?1:0,a=new Xbe(o*3/4-s),n=s>0?o-4:o;var c=0;for(e=0,r=0;e<n;e+=4,r+=3)i=po[t.charCodeAt(e)]<<18|po[t.charCodeAt(e+1)]<<12|po[t.charCodeAt(e+2)]<<6|po[t.charCodeAt(e+3)],a[c++]=i>>16&255,a[c++]=i>>8&255,a[c++]=i&255;return s===2?(i=po[t.charCodeAt(e)]<<2|po[t.charCodeAt(e+1)]>>4,a[c++]=i&255):s===1&&(i=po[t.charCodeAt(e)]<<10|po[t.charCodeAt(e+1)]<<4|po[t.charCodeAt(e+2)]>>2,a[c++]=i>>8&255,a[c++]=i&255),a}function Zbe(t){return tl[t>>18&63]+tl[t>>12&63]+tl[t>>6&63]+tl[t&63]}function Jbe(t,e,r){for(var n,i=[],s=e;s<r;s+=3)n=(t[s]<<16)+(t[s+1]<<8)+t[s+2],i.push(Zbe(n));return i.join("")}function jF(t){CR||tte();for(var e,r=t.length,n=r%3,i="",s=[],a=16383,o=0,c=r-n;o<c;o+=a)s.push(Jbe(t,o,o+a>c?c:o+a));return n===1?(e=t[r-1],i+=tl[e>>2],i+=tl[e<<4&63],i+="=="):n===2&&(e=(t[r-2]<<8)+t[r-1],i+=tl[e>>10],i+=tl[e>>4&63],i+=tl[e<<2&63],i+="="),s.push(i),s.join("")}function m8(t,e,r,n,i){var s,a,o=i*8-n-1,c=(1<<o)-1,u=c>>1,l=-7,f=r?i-1:0,d=r?-1:1,h=t[e+f];for(f+=d,s=h&(1<<-l)-1,h>>=-l,l+=o;l>0;s=s*256+t[e+f],f+=d,l-=8);for(a=s&(1<<-l)-1,s>>=-l,l+=n;l>0;a=a*256+t[e+f],f+=d,l-=8);if(s===0)s=1-u;else{if(s===c)return a?NaN:(h?-1:1)*(1/0);a=a+Math.pow(2,n),s=s-u}return(h?-1:1)*a*Math.pow(2,s-n)}function rte(t,e,r,n,i,s){var a,o,c,u=s*8-i-1,l=(1<<u)-1,f=l>>1,d=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,h=n?0:s-1,m=n?1:-1,p=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(o=isNaN(e)?1:0,a=l):(a=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-a))<1&&(a--,c*=2),a+f>=1?e+=d/c:e+=d*Math.pow(2,1-f),e*c>=2&&(a++,c/=2),a+f>=l?(o=0,a=l):a+f>=1?(o=(e*c-1)*Math.pow(2,i),a=a+f):(o=e*Math.pow(2,f-1)*Math.pow(2,i),a=0));i>=8;t[r+h]=o&255,h+=m,o/=256,i-=8);for(a=a<<i|o,u+=i;u>0;t[r+h]=a&255,h+=m,a/=256,u-=8);t[r+h-m]|=p*128}var Qbe={}.toString,nte=Array.isArray||function(t){return Qbe.call(t)=="[object Array]"};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */var ewe=50;Me.TYPED_ARRAY_SUPPORT=Bi.TYPED_ARRAY_SUPPORT!==void 0?Bi.TYPED_ARRAY_SUPPORT:!0;X3();function X3(){return Me.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function eu(t,e){if(X3()<e)throw new RangeError("Invalid typed array length");return Me.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e),t.__proto__=Me.prototype):(t===null&&(t=new Me(e)),t.length=e),t}function Me(t,e,r){if(!Me.TYPED_ARRAY_SUPPORT&&!(this instanceof Me))return new Me(t,e,r);if(typeof t=="number"){if(typeof e=="string")throw new Error("If encoding is specified then the first argument must be a string");return IR(this,t)}return ite(this,t,e,r)}Me.poolSize=8192;Me._augment=function(t){return t.__proto__=Me.prototype,t};function ite(t,e,r,n){if(typeof e=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer?nwe(t,e,r,n):typeof e=="string"?rwe(t,e,r):iwe(t,e)}Me.from=function(t,e,r){return ite(null,t,e,r)};Me.TYPED_ARRAY_SUPPORT&&(Me.prototype.__proto__=Uint8Array.prototype,Me.__proto__=Uint8Array,typeof Symbol<"u"&&Symbol.species&&Me[Symbol.species]);function ste(t){if(typeof t!="number")throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function twe(t,e,r,n){return ste(e),e<=0?eu(t,e):r!==void 0?typeof n=="string"?eu(t,e).fill(r,n):eu(t,e).fill(r):eu(t,e)}Me.alloc=function(t,e,r){return twe(null,t,e,r)};function IR(t,e){if(ste(e),t=eu(t,e<0?0:PR(e)|0),!Me.TYPED_ARRAY_SUPPORT)for(var r=0;r<e;++r)t[r]=0;return t}Me.allocUnsafe=function(t){return IR(null,t)};Me.allocUnsafeSlow=function(t){return IR(null,t)};function rwe(t,e,r){if((typeof r!="string"||r==="")&&(r="utf8"),!Me.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=ate(e,r)|0;t=eu(t,n);var i=t.write(e,r);return i!==n&&(t=t.slice(0,i)),t}function tC(t,e){var r=e.length<0?0:PR(e.length)|0;t=eu(t,r);for(var n=0;n<r;n+=1)t[n]=e[n]&255;return t}function nwe(t,e,r,n){if(e.byteLength,r<0||e.byteLength<r)throw new RangeError("'offset' is out of bounds");if(e.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");return r===void 0&&n===void 0?e=new Uint8Array(e):n===void 0?e=new Uint8Array(e,r):e=new Uint8Array(e,r,n),Me.TYPED_ARRAY_SUPPORT?(t=e,t.__proto__=Me.prototype):t=tC(t,e),t}function iwe(t,e){if(dl(e)){var r=PR(e.length)|0;return t=eu(t,r),t.length===0||e.copy(t,0,0,r),t}if(e){if(typeof ArrayBuffer<"u"&&e.buffer instanceof ArrayBuffer||"length"in e)return typeof e.length!="number"||Swe(e.length)?eu(t,0):tC(t,e);if(e.type==="Buffer"&&nte(e.data))return tC(t,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function PR(t){if(t>=X3())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+X3().toString(16)+" bytes");return t|0}Me.isBuffer=Ewe;function dl(t){return!!(t!=null&&t._isBuffer)}Me.compare=function(e,r){if(!dl(e)||!dl(r))throw new TypeError("Arguments must be Buffers");if(e===r)return 0;for(var n=e.length,i=r.length,s=0,a=Math.min(n,i);s<a;++s)if(e[s]!==r[s]){n=e[s],i=r[s];break}return n<i?-1:i<n?1:0};Me.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};Me.concat=function(e,r){if(!nte(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return Me.alloc(0);var n;if(r===void 0)for(r=0,n=0;n<e.length;++n)r+=e[n].length;var i=Me.allocUnsafe(r),s=0;for(n=0;n<e.length;++n){var a=e[n];if(!dl(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(i,s),s+=a.length}return i};function ate(t,e){if(dl(t))return t.length;if(typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;typeof t!="string"&&(t=""+t);var r=t.length;if(r===0)return 0;for(var n=!1;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return Y3(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return r*2;case"hex":return r>>>1;case"base64":return hte(t).length;default:if(n)return Y3(t).length;e=(""+e).toLowerCase(),n=!0}}Me.byteLength=ate;function swe(t,e,r){var n=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((r===void 0||r>this.length)&&(r=this.length),r<=0)||(r>>>=0,e>>>=0,r<=e))return"";for(t||(t="utf8");;)switch(t){case"hex":return mwe(this,e,r);case"utf8":case"utf-8":return lte(this,e,r);case"ascii":return hwe(this,e,r);case"latin1":case"binary":return pwe(this,e,r);case"base64":return fwe(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return gwe(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}Me.prototype._isBuffer=!0;function Jd(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}Me.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var r=0;r<e;r+=2)Jd(this,r,r+1);return this};Me.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var r=0;r<e;r+=4)Jd(this,r,r+3),Jd(this,r+1,r+2);return this};Me.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var r=0;r<e;r+=8)Jd(this,r,r+7),Jd(this,r+1,r+6),Jd(this,r+2,r+5),Jd(this,r+3,r+4);return this};Me.prototype.toString=function(){var e=this.length|0;return e===0?"":arguments.length===0?lte(this,0,e):swe.apply(this,arguments)};Me.prototype.equals=function(e){if(!dl(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:Me.compare(this,e)===0};Me.prototype.inspect=function(){var e="",r=ewe;return this.length>0&&(e=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(e+=" ... ")),"<Buffer "+e+">"};Me.prototype.compare=function(e,r,n,i,s){if(!dl(e))throw new TypeError("Argument must be a Buffer");if(r===void 0&&(r=0),n===void 0&&(n=e?e.length:0),i===void 0&&(i=0),s===void 0&&(s=this.length),r<0||n>e.length||i<0||s>this.length)throw new RangeError("out of range index");if(i>=s&&r>=n)return 0;if(i>=s)return-1;if(r>=n)return 1;if(r>>>=0,n>>>=0,i>>>=0,s>>>=0,this===e)return 0;for(var a=s-i,o=n-r,c=Math.min(a,o),u=this.slice(i,s),l=e.slice(r,n),f=0;f<c;++f)if(u[f]!==l[f]){a=u[f],o=l[f];break}return a<o?-1:o<a?1:0};function ote(t,e,r,n,i){if(t.length===0)return-1;if(typeof r=="string"?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=i?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(i)return-1;r=t.length-1}else if(r<0)if(i)r=0;else return-1;if(typeof e=="string"&&(e=Me.from(e,n)),dl(e))return e.length===0?-1:VF(t,e,r,n,i);if(typeof e=="number")return e=e&255,Me.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?i?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):VF(t,[e],r,n,i);throw new TypeError("val must be string, number or Buffer")}function VF(t,e,r,n,i){var s=1,a=t.length,o=e.length;if(n!==void 0&&(n=String(n).toLowerCase(),n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le")){if(t.length<2||e.length<2)return-1;s=2,a/=2,o/=2,r/=2}function c(h,m){return s===1?h[m]:h.readUInt16BE(m*s)}var u;if(i){var l=-1;for(u=r;u<a;u++)if(c(t,u)===c(e,l===-1?0:u-l)){if(l===-1&&(l=u),u-l+1===o)return l*s}else l!==-1&&(u-=u-l),l=-1}else for(r+o>a&&(r=a-o),u=r;u>=0;u--){for(var f=!0,d=0;d<o;d++)if(c(t,u+d)!==c(e,d)){f=!1;break}if(f)return u}return-1}Me.prototype.includes=function(e,r,n){return this.indexOf(e,r,n)!==-1};Me.prototype.indexOf=function(e,r,n){return ote(this,e,r,n,!0)};Me.prototype.lastIndexOf=function(e,r,n){return ote(this,e,r,n,!1)};function awe(t,e,r,n){r=Number(r)||0;var i=t.length-r;n?(n=Number(n),n>i&&(n=i)):n=i;var s=e.length;if(s%2!==0)throw new TypeError("Invalid hex string");n>s/2&&(n=s/2);for(var a=0;a<n;++a){var o=parseInt(e.substr(a*2,2),16);if(isNaN(o))return a;t[r+a]=o}return a}function owe(t,e,r,n){return y8(Y3(e,t.length-r),t,r,n)}function cte(t,e,r,n){return y8(_we(e),t,r,n)}function cwe(t,e,r,n){return cte(t,e,r,n)}function lwe(t,e,r,n){return y8(hte(e),t,r,n)}function uwe(t,e,r,n){return y8(xwe(e,t.length-r),t,r,n)}Me.prototype.write=function(e,r,n,i){if(r===void 0)i="utf8",n=this.length,r=0;else if(n===void 0&&typeof r=="string")i=r,n=this.length,r=0;else if(isFinite(r))r=r|0,isFinite(n)?(n=n|0,i===void 0&&(i="utf8")):(i=n,n=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var s=this.length-r;if((n===void 0||n>s)&&(n=s),e.length>0&&(n<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var a=!1;;)switch(i){case"hex":return awe(this,e,r,n);case"utf8":case"utf-8":return owe(this,e,r,n);case"ascii":return cte(this,e,r,n);case"latin1":case"binary":return cwe(this,e,r,n);case"base64":return lwe(this,e,r,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return uwe(this,e,r,n);default:if(a)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),a=!0}};Me.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function fwe(t,e,r){return e===0&&r===t.length?jF(t):jF(t.slice(e,r))}function lte(t,e,r){r=Math.min(t.length,r);for(var n=[],i=e;i<r;){var s=t[i],a=null,o=s>239?4:s>223?3:s>191?2:1;if(i+o<=r){var c,u,l,f;switch(o){case 1:s<128&&(a=s);break;case 2:c=t[i+1],(c&192)===128&&(f=(s&31)<<6|c&63,f>127&&(a=f));break;case 3:c=t[i+1],u=t[i+2],(c&192)===128&&(u&192)===128&&(f=(s&15)<<12|(c&63)<<6|u&63,f>2047&&(f<55296||f>57343)&&(a=f));break;case 4:c=t[i+1],u=t[i+2],l=t[i+3],(c&192)===128&&(u&192)===128&&(l&192)===128&&(f=(s&15)<<18|(c&63)<<12|(u&63)<<6|l&63,f>65535&&f<1114112&&(a=f))}}a===null?(a=65533,o=1):a>65535&&(a-=65536,n.push(a>>>10&1023|55296),a=56320|a&1023),n.push(a),i+=o}return dwe(n)}var qF=4096;function dwe(t){var e=t.length;if(e<=qF)return String.fromCharCode.apply(String,t);for(var r="",n=0;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=qF));return r}function hwe(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(t[i]&127);return n}function pwe(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(t[i]);return n}function mwe(t,e,r){var n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);for(var i="",s=e;s<r;++s)i+=wwe(t[s]);return i}function gwe(t,e,r){for(var n=t.slice(e,r),i="",s=0;s<n.length;s+=2)i+=String.fromCharCode(n[s]+n[s+1]*256);return i}Me.prototype.slice=function(e,r){var n=this.length;e=~~e,r=r===void 0?n:~~r,e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),r<0?(r+=n,r<0&&(r=0)):r>n&&(r=n),r<e&&(r=e);var i;if(Me.TYPED_ARRAY_SUPPORT)i=this.subarray(e,r),i.__proto__=Me.prototype;else{var s=r-e;i=new Me(s,void 0);for(var a=0;a<s;++a)i[a]=this[a+e]}return i};function Zi(t,e,r){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}Me.prototype.readUIntLE=function(e,r,n){e=e|0,r=r|0,n||Zi(e,r,this.length);for(var i=this[e],s=1,a=0;++a<r&&(s*=256);)i+=this[e+a]*s;return i};Me.prototype.readUIntBE=function(e,r,n){e=e|0,r=r|0,n||Zi(e,r,this.length);for(var i=this[e+--r],s=1;r>0&&(s*=256);)i+=this[e+--r]*s;return i};Me.prototype.readUInt8=function(e,r){return r||Zi(e,1,this.length),this[e]};Me.prototype.readUInt16LE=function(e,r){return r||Zi(e,2,this.length),this[e]|this[e+1]<<8};Me.prototype.readUInt16BE=function(e,r){return r||Zi(e,2,this.length),this[e]<<8|this[e+1]};Me.prototype.readUInt32LE=function(e,r){return r||Zi(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216};Me.prototype.readUInt32BE=function(e,r){return r||Zi(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])};Me.prototype.readIntLE=function(e,r,n){e=e|0,r=r|0,n||Zi(e,r,this.length);for(var i=this[e],s=1,a=0;++a<r&&(s*=256);)i+=this[e+a]*s;return s*=128,i>=s&&(i-=Math.pow(2,8*r)),i};Me.prototype.readIntBE=function(e,r,n){e=e|0,r=r|0,n||Zi(e,r,this.length);for(var i=r,s=1,a=this[e+--i];i>0&&(s*=256);)a+=this[e+--i]*s;return s*=128,a>=s&&(a-=Math.pow(2,8*r)),a};Me.prototype.readInt8=function(e,r){return r||Zi(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]};Me.prototype.readInt16LE=function(e,r){r||Zi(e,2,this.length);var n=this[e]|this[e+1]<<8;return n&32768?n|4294901760:n};Me.prototype.readInt16BE=function(e,r){r||Zi(e,2,this.length);var n=this[e+1]|this[e]<<8;return n&32768?n|4294901760:n};Me.prototype.readInt32LE=function(e,r){return r||Zi(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24};Me.prototype.readInt32BE=function(e,r){return r||Zi(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]};Me.prototype.readFloatLE=function(e,r){return r||Zi(e,4,this.length),m8(this,e,!0,23,4)};Me.prototype.readFloatBE=function(e,r){return r||Zi(e,4,this.length),m8(this,e,!1,23,4)};Me.prototype.readDoubleLE=function(e,r){return r||Zi(e,8,this.length),m8(this,e,!0,52,8)};Me.prototype.readDoubleBE=function(e,r){return r||Zi(e,8,this.length),m8(this,e,!1,52,8)};function Ta(t,e,r,n,i,s){if(!dl(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<s)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}Me.prototype.writeUIntLE=function(e,r,n,i){if(e=+e,r=r|0,n=n|0,!i){var s=Math.pow(2,8*n)-1;Ta(this,e,r,n,s,0)}var a=1,o=0;for(this[r]=e&255;++o<n&&(a*=256);)this[r+o]=e/a&255;return r+n};Me.prototype.writeUIntBE=function(e,r,n,i){if(e=+e,r=r|0,n=n|0,!i){var s=Math.pow(2,8*n)-1;Ta(this,e,r,n,s,0)}var a=n-1,o=1;for(this[r+a]=e&255;--a>=0&&(o*=256);)this[r+a]=e/o&255;return r+n};Me.prototype.writeUInt8=function(e,r,n){return e=+e,r=r|0,n||Ta(this,e,r,1,255,0),Me.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[r]=e&255,r+1};function g8(t,e,r,n){e<0&&(e=65535+e+1);for(var i=0,s=Math.min(t.length-r,2);i<s;++i)t[r+i]=(e&255<<8*(n?i:1-i))>>>(n?i:1-i)*8}Me.prototype.writeUInt16LE=function(e,r,n){return e=+e,r=r|0,n||Ta(this,e,r,2,65535,0),Me.TYPED_ARRAY_SUPPORT?(this[r]=e&255,this[r+1]=e>>>8):g8(this,e,r,!0),r+2};Me.prototype.writeUInt16BE=function(e,r,n){return e=+e,r=r|0,n||Ta(this,e,r,2,65535,0),Me.TYPED_ARRAY_SUPPORT?(this[r]=e>>>8,this[r+1]=e&255):g8(this,e,r,!1),r+2};function v8(t,e,r,n){e<0&&(e=4294967295+e+1);for(var i=0,s=Math.min(t.length-r,4);i<s;++i)t[r+i]=e>>>(n?i:3-i)*8&255}Me.prototype.writeUInt32LE=function(e,r,n){return e=+e,r=r|0,n||Ta(this,e,r,4,4294967295,0),Me.TYPED_ARRAY_SUPPORT?(this[r+3]=e>>>24,this[r+2]=e>>>16,this[r+1]=e>>>8,this[r]=e&255):v8(this,e,r,!0),r+4};Me.prototype.writeUInt32BE=function(e,r,n){return e=+e,r=r|0,n||Ta(this,e,r,4,4294967295,0),Me.TYPED_ARRAY_SUPPORT?(this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=e&255):v8(this,e,r,!1),r+4};Me.prototype.writeIntLE=function(e,r,n,i){if(e=+e,r=r|0,!i){var s=Math.pow(2,8*n-1);Ta(this,e,r,n,s-1,-s)}var a=0,o=1,c=0;for(this[r]=e&255;++a<n&&(o*=256);)e<0&&c===0&&this[r+a-1]!==0&&(c=1),this[r+a]=(e/o>>0)-c&255;return r+n};Me.prototype.writeIntBE=function(e,r,n,i){if(e=+e,r=r|0,!i){var s=Math.pow(2,8*n-1);Ta(this,e,r,n,s-1,-s)}var a=n-1,o=1,c=0;for(this[r+a]=e&255;--a>=0&&(o*=256);)e<0&&c===0&&this[r+a+1]!==0&&(c=1),this[r+a]=(e/o>>0)-c&255;return r+n};Me.prototype.writeInt8=function(e,r,n){return e=+e,r=r|0,n||Ta(this,e,r,1,127,-128),Me.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[r]=e&255,r+1};Me.prototype.writeInt16LE=function(e,r,n){return e=+e,r=r|0,n||Ta(this,e,r,2,32767,-32768),Me.TYPED_ARRAY_SUPPORT?(this[r]=e&255,this[r+1]=e>>>8):g8(this,e,r,!0),r+2};Me.prototype.writeInt16BE=function(e,r,n){return e=+e,r=r|0,n||Ta(this,e,r,2,32767,-32768),Me.TYPED_ARRAY_SUPPORT?(this[r]=e>>>8,this[r+1]=e&255):g8(this,e,r,!1),r+2};Me.prototype.writeInt32LE=function(e,r,n){return e=+e,r=r|0,n||Ta(this,e,r,4,2147483647,-2147483648),Me.TYPED_ARRAY_SUPPORT?(this[r]=e&255,this[r+1]=e>>>8,this[r+2]=e>>>16,this[r+3]=e>>>24):v8(this,e,r,!0),r+4};Me.prototype.writeInt32BE=function(e,r,n){return e=+e,r=r|0,n||Ta(this,e,r,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),Me.TYPED_ARRAY_SUPPORT?(this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=e&255):v8(this,e,r,!1),r+4};function ute(t,e,r,n,i,s){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function fte(t,e,r,n,i){return i||ute(t,e,r,4),rte(t,e,r,n,23,4),r+4}Me.prototype.writeFloatLE=function(e,r,n){return fte(this,e,r,!0,n)};Me.prototype.writeFloatBE=function(e,r,n){return fte(this,e,r,!1,n)};function dte(t,e,r,n,i){return i||ute(t,e,r,8),rte(t,e,r,n,52,8),r+8}Me.prototype.writeDoubleLE=function(e,r,n){return dte(this,e,r,!0,n)};Me.prototype.writeDoubleBE=function(e,r,n){return dte(this,e,r,!1,n)};Me.prototype.copy=function(e,r,n,i){if(n||(n=0),!i&&i!==0&&(i=this.length),r>=e.length&&(r=e.length),r||(r=0),i>0&&i<n&&(i=n),i===n||e.length===0||this.length===0)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-r<i-n&&(i=e.length-r+n);var s=i-n,a;if(this===e&&n<r&&r<i)for(a=s-1;a>=0;--a)e[a+r]=this[a+n];else if(s<1e3||!Me.TYPED_ARRAY_SUPPORT)for(a=0;a<s;++a)e[a+r]=this[a+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+s),r);return s};Me.prototype.fill=function(e,r,n,i){if(typeof e=="string"){if(typeof r=="string"?(i=r,r=0,n=this.length):typeof n=="string"&&(i=n,n=this.length),e.length===1){var s=e.charCodeAt(0);s<256&&(e=s)}if(i!==void 0&&typeof i!="string")throw new TypeError("encoding must be a string");if(typeof i=="string"&&!Me.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else typeof e=="number"&&(e=e&255);if(r<0||this.length<r||this.length<n)throw new RangeError("Out of range index");if(n<=r)return this;r=r>>>0,n=n===void 0?this.length:n>>>0,e||(e=0);var a;if(typeof e=="number")for(a=r;a<n;++a)this[a]=e;else{var o=dl(e)?e:Y3(new Me(e,i).toString()),c=o.length;for(a=0;a<n-r;++a)this[a+r]=o[a%c]}return this};var vwe=/[^+\/0-9A-Za-z-_]/g;function ywe(t){if(t=bwe(t).replace(vwe,""),t.length<2)return"";for(;t.length%4!==0;)t=t+"=";return t}function bwe(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function wwe(t){return t<16?"0"+t.toString(16):t.toString(16)}function Y3(t,e){e=e||1/0;for(var r,n=t.length,i=null,s=[],a=0;a<n;++a){if(r=t.charCodeAt(a),r>55295&&r<57344){if(!i){if(r>56319){(e-=3)>-1&&s.push(239,191,189);continue}else if(a+1===n){(e-=3)>-1&&s.push(239,191,189);continue}i=r;continue}if(r<56320){(e-=3)>-1&&s.push(239,191,189),i=r;continue}r=(i-55296<<10|r-56320)+65536}else i&&(e-=3)>-1&&s.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;s.push(r)}else if(r<2048){if((e-=2)<0)break;s.push(r>>6|192,r&63|128)}else if(r<65536){if((e-=3)<0)break;s.push(r>>12|224,r>>6&63|128,r&63|128)}else if(r<1114112){if((e-=4)<0)break;s.push(r>>18|240,r>>12&63|128,r>>6&63|128,r&63|128)}else throw new Error("Invalid code point")}return s}function _we(t){for(var e=[],r=0;r<t.length;++r)e.push(t.charCodeAt(r)&255);return e}function xwe(t,e){for(var r,n,i,s=[],a=0;a<t.length&&!((e-=2)<0);++a)r=t.charCodeAt(a),n=r>>8,i=r%256,s.push(i),s.push(n);return s}function hte(t){return Ybe(ywe(t))}function y8(t,e,r,n){for(var i=0;i<n&&!(i+r>=e.length||i>=t.length);++i)e[i+r]=t[i];return i}function Swe(t){return t!==t}function Ewe(t){return t!=null&&(!!t._isBuffer||pte(t)||kwe(t))}function pte(t){return!!t.constructor&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}function kwe(t){return typeof t.readFloatLE=="function"&&typeof t.slice=="function"&&pte(t.slice(0,0))}function mte(){throw new Error("setTimeout has not been defined")}function gte(){throw new Error("clearTimeout has not been defined")}var ff=mte,df=gte;typeof Bi.setTimeout=="function"&&(ff=setTimeout);typeof Bi.clearTimeout=="function"&&(df=clearTimeout);function vte(t){if(ff===setTimeout)return setTimeout(t,0);if((ff===mte||!ff)&&setTimeout)return ff=setTimeout,setTimeout(t,0);try{return ff(t,0)}catch{try{return ff.call(null,t,0)}catch{return ff.call(this,t,0)}}}function Twe(t){if(df===clearTimeout)return clearTimeout(t);if((df===gte||!df)&&clearTimeout)return df=clearTimeout,clearTimeout(t);try{return df(t)}catch{try{return df.call(null,t)}catch{return df.call(this,t)}}}var tu=[],R1=!1,Qd,a3=-1;function Awe(){!R1||!Qd||(R1=!1,Qd.length?tu=Qd.concat(tu):a3=-1,tu.length&&yte())}function yte(){if(!R1){var t=vte(Awe);R1=!0;for(var e=tu.length;e;){for(Qd=tu,tu=[];++a3<e;)Qd&&Qd[a3].run();a3=-1,e=tu.length}Qd=null,R1=!1,Twe(t)}}function Cwe(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];tu.push(new bte(t,e)),tu.length===1&&!R1&&vte(yte)}function bte(t,e){this.fun=t,this.array=e}bte.prototype.run=function(){this.fun.apply(null,this.array)};var Iwe="browser",Pwe="browser",Rwe=!0,Owe={},Bwe=[],Dwe="",Mwe={},Nwe={},Fwe={};function o0(){}var Lwe=o0,$we=o0,Uwe=o0,jwe=o0,Vwe=o0,qwe=o0,zwe=o0;function Hwe(t){throw new Error("process.binding is not supported")}function Wwe(){return"/"}function Gwe(t){throw new Error("process.chdir is not supported")}function Kwe(){return 0}var f1=Bi.performance||{},Xwe=f1.now||f1.mozNow||f1.msNow||f1.oNow||f1.webkitNow||function(){return new Date().getTime()};function Ywe(t){var e=Xwe.call(f1)*.001,r=Math.floor(e),n=Math.floor(e%1*1e9);return t&&(r=r-t[0],n=n-t[1],n<0&&(r--,n+=1e9)),[r,n]}var Zwe=new Date;function Jwe(){var t=new Date,e=t-Zwe;return e/1e3}var fn={nextTick:Cwe,title:Iwe,browser:Rwe,env:Owe,argv:Bwe,version:Dwe,versions:Mwe,on:Lwe,addListener:$we,once:Uwe,off:jwe,removeListener:Vwe,removeAllListeners:qwe,emit:zwe,binding:Hwe,cwd:Wwe,chdir:Gwe,umask:Kwe,hrtime:Ywe,platform:Pwe,release:Nwe,config:Fwe,uptime:Jwe};function tg(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var J_={exports:{}},zF;function Qwe(){return zF||(zF=1,function(t,e){(function(r){t.exports=r()})(function(){return function r(n,i,s){function a(u,l){if(!i[u]){if(!n[u]){var f=typeof tg=="function"&&tg;if(!l&&f)return f(u,!0);if(o)return o(u,!0);var d=new Error("Cannot find module '"+u+"'");throw d.code="MODULE_NOT_FOUND",d}var h=i[u]={exports:{}};n[u][0].call(h.exports,function(m){var p=n[u][1][m];return a(p||m)},h,h.exports,r,n,i,s)}return i[u].exports}for(var o=typeof tg=="function"&&tg,c=0;c<s.length;c++)a(s[c]);return a}({1:[function(r,n,i){var s=r("./utils"),a=r("./support"),o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";i.encode=function(c){for(var u,l,f,d,h,m,p,g=[],v=0,y=c.length,b=y,_=s.getTypeOf(c)!=="string";v<c.length;)b=y-v,f=_?(u=c[v++],l=v<y?c[v++]:0,v<y?c[v++]:0):(u=c.charCodeAt(v++),l=v<y?c.charCodeAt(v++):0,v<y?c.charCodeAt(v++):0),d=u>>2,h=(3&u)<<4|l>>4,m=1<b?(15&l)<<2|f>>6:64,p=2<b?63&f:64,g.push(o.charAt(d)+o.charAt(h)+o.charAt(m)+o.charAt(p));return g.join("")},i.decode=function(c){var u,l,f,d,h,m,p=0,g=0,v="data:";if(c.substr(0,v.length)===v)throw new Error("Invalid base64 input, it looks like a data url.");var y,b=3*(c=c.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(c.charAt(c.length-1)===o.charAt(64)&&b--,c.charAt(c.length-2)===o.charAt(64)&&b--,b%1!=0)throw new Error("Invalid base64 input, bad content length.");for(y=a.uint8array?new Uint8Array(0|b):new Array(0|b);p<c.length;)u=o.indexOf(c.charAt(p++))<<2|(d=o.indexOf(c.charAt(p++)))>>4,l=(15&d)<<4|(h=o.indexOf(c.charAt(p++)))>>2,f=(3&h)<<6|(m=o.indexOf(c.charAt(p++))),y[g++]=u,h!==64&&(y[g++]=l),m!==64&&(y[g++]=f);return y}},{"./support":30,"./utils":32}],2:[function(r,n,i){var s=r("./external"),a=r("./stream/DataWorker"),o=r("./stream/Crc32Probe"),c=r("./stream/DataLengthProbe");function u(l,f,d,h,m){this.compressedSize=l,this.uncompressedSize=f,this.crc32=d,this.compression=h,this.compressedContent=m}u.prototype={getContentWorker:function(){var l=new a(s.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new c("data_length")),f=this;return l.on("end",function(){if(this.streamInfo.data_length!==f.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),l},getCompressedWorker:function(){return new a(s.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},u.createWorkerFrom=function(l,f,d){return l.pipe(new o).pipe(new c("uncompressedSize")).pipe(f.compressWorker(d)).pipe(new c("compressedSize")).withStreamInfo("compression",f)},n.exports=u},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(r,n,i){var s=r("./stream/GenericWorker");i.STORE={magic:"\0\0",compressWorker:function(){return new s("STORE compression")},uncompressWorker:function(){return new s("STORE decompression")}},i.DEFLATE=r("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(r,n,i){var s=r("./utils"),a=function(){for(var o,c=[],u=0;u<256;u++){o=u;for(var l=0;l<8;l++)o=1&o?3988292384^o>>>1:o>>>1;c[u]=o}return c}();n.exports=function(o,c){return o!==void 0&&o.length?s.getTypeOf(o)!=="string"?function(u,l,f,d){var h=a,m=d+f;u^=-1;for(var p=d;p<m;p++)u=u>>>8^h[255&(u^l[p])];return-1^u}(0|c,o,o.length,0):function(u,l,f,d){var h=a,m=d+f;u^=-1;for(var p=d;p<m;p++)u=u>>>8^h[255&(u^l.charCodeAt(p))];return-1^u}(0|c,o,o.length,0):0}},{"./utils":32}],5:[function(r,n,i){i.base64=!1,i.binary=!1,i.dir=!1,i.createFolders=!0,i.date=null,i.compression=null,i.compressionOptions=null,i.comment=null,i.unixPermissions=null,i.dosPermissions=null},{}],6:[function(r,n,i){var s=null;s=typeof Promise<"u"?Promise:r("lie"),n.exports={Promise:s}},{lie:37}],7:[function(r,n,i){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",a=r("pako"),o=r("./utils"),c=r("./stream/GenericWorker"),u=s?"uint8array":"array";function l(f,d){c.call(this,"FlateWorker/"+f),this._pako=null,this._pakoAction=f,this._pakoOptions=d,this.meta={}}i.magic="\b\0",o.inherits(l,c),l.prototype.processChunk=function(f){this.meta=f.meta,this._pako===null&&this._createPako(),this._pako.push(o.transformTo(u,f.data),!1)},l.prototype.flush=function(){c.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},l.prototype.cleanUp=function(){c.prototype.cleanUp.call(this),this._pako=null},l.prototype._createPako=function(){this._pako=new a[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var f=this;this._pako.onData=function(d){f.push({data:d,meta:f.meta})}},i.compressWorker=function(f){return new l("Deflate",f)},i.uncompressWorker=function(){return new l("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(r,n,i){function s(h,m){var p,g="";for(p=0;p<m;p++)g+=String.fromCharCode(255&h),h>>>=8;return g}function a(h,m,p,g,v,y){var b,_,x=h.file,E=h.compression,k=y!==u.utf8encode,B=o.transformTo("string",y(x.name)),D=o.transformTo("string",u.utf8encode(x.name)),z=x.comment,U=o.transformTo("string",y(z)),S=o.transformTo("string",u.utf8encode(z)),T=D.length!==x.name.length,w=S.length!==z.length,A="",F="",P="",O=x.dir,R=x.date,I={crc32:0,compressedSize:0,uncompressedSize:0};m&&!p||(I.crc32=h.crc32,I.compressedSize=h.compressedSize,I.uncompressedSize=h.uncompressedSize);var C=0;m&&(C|=8),k||!T&&!w||(C|=2048);var M=0,L=0;O&&(M|=16),v==="UNIX"?(L=798,M|=function(H,W){var q=H;return H||(q=W?16893:33204),(65535&q)<<16}(x.unixPermissions,O)):(L=20,M|=function(H){return 63&(H||0)}(x.dosPermissions)),b=R.getUTCHours(),b<<=6,b|=R.getUTCMinutes(),b<<=5,b|=R.getUTCSeconds()/2,_=R.getUTCFullYear()-1980,_<<=4,_|=R.getUTCMonth()+1,_<<=5,_|=R.getUTCDate(),T&&(F=s(1,1)+s(l(B),4)+D,A+="up"+s(F.length,2)+F),w&&(P=s(1,1)+s(l(U),4)+S,A+="uc"+s(P.length,2)+P);var N="";return N+=`
\0`,N+=s(C,2),N+=E.magic,N+=s(b,2),N+=s(_,2),N+=s(I.crc32,4),N+=s(I.compressedSize,4),N+=s(I.uncompressedSize,4),N+=s(B.length,2),N+=s(A.length,2),{fileRecord:f.LOCAL_FILE_HEADER+N+B+A,dirRecord:f.CENTRAL_FILE_HEADER+s(L,2)+N+s(U.length,2)+"\0\0\0\0"+s(M,4)+s(g,4)+B+A+U}}var o=r("../utils"),c=r("../stream/GenericWorker"),u=r("../utf8"),l=r("../crc32"),f=r("../signature");function d(h,m,p,g){c.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=m,this.zipPlatform=p,this.encodeFileName=g,this.streamFiles=h,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}o.inherits(d,c),d.prototype.push=function(h){var m=h.meta.percent||0,p=this.entriesCount,g=this._sources.length;this.accumulate?this.contentBuffer.push(h):(this.bytesWritten+=h.data.length,c.prototype.push.call(this,{data:h.data,meta:{currentFile:this.currentFile,percent:p?(m+100*(p-g-1))/p:100}}))},d.prototype.openedSource=function(h){this.currentSourceOffset=this.bytesWritten,this.currentFile=h.file.name;var m=this.streamFiles&&!h.file.dir;if(m){var p=a(h,m,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:p.fileRecord,meta:{percent:0}})}else this.accumulate=!0},d.prototype.closedSource=function(h){this.accumulate=!1;var m=this.streamFiles&&!h.file.dir,p=a(h,m,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(p.dirRecord),m)this.push({data:function(g){return f.DATA_DESCRIPTOR+s(g.crc32,4)+s(g.compressedSize,4)+s(g.uncompressedSize,4)}(h),meta:{percent:100}});else for(this.push({data:p.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},d.prototype.flush=function(){for(var h=this.bytesWritten,m=0;m<this.dirRecords.length;m++)this.push({data:this.dirRecords[m],meta:{percent:100}});var p=this.bytesWritten-h,g=function(v,y,b,_,x){var E=o.transformTo("string",x(_));return f.CENTRAL_DIRECTORY_END+"\0\0\0\0"+s(v,2)+s(v,2)+s(y,4)+s(b,4)+s(E.length,2)+E}(this.dirRecords.length,p,h,this.zipComment,this.encodeFileName);this.push({data:g,meta:{percent:100}})},d.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},d.prototype.registerPrevious=function(h){this._sources.push(h);var m=this;return h.on("data",function(p){m.processChunk(p)}),h.on("end",function(){m.closedSource(m.previous.streamInfo),m._sources.length?m.prepareNextSource():m.end()}),h.on("error",function(p){m.error(p)}),this},d.prototype.resume=function(){return!!c.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},d.prototype.error=function(h){var m=this._sources;if(!c.prototype.error.call(this,h))return!1;for(var p=0;p<m.length;p++)try{m[p].error(h)}catch{}return!0},d.prototype.lock=function(){c.prototype.lock.call(this);for(var h=this._sources,m=0;m<h.length;m++)h[m].lock()},n.exports=d},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(r,n,i){var s=r("../compressions"),a=r("./ZipFileWorker");i.generateWorker=function(o,c,u){var l=new a(c.streamFiles,u,c.platform,c.encodeFileName),f=0;try{o.forEach(function(d,h){f++;var m=function(y,b){var _=y||b,x=s[_];if(!x)throw new Error(_+" is not a valid compression method !");return x}(h.options.compression,c.compression),p=h.options.compressionOptions||c.compressionOptions||{},g=h.dir,v=h.date;h._compressWorker(m,p).withStreamInfo("file",{name:d,dir:g,date:v,comment:h.comment||"",unixPermissions:h.unixPermissions,dosPermissions:h.dosPermissions}).pipe(l)}),l.entriesCount=f}catch(d){l.error(d)}return l}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(r,n,i){function s(){if(!(this instanceof s))return new s;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var a=new s;for(var o in this)typeof this[o]!="function"&&(a[o]=this[o]);return a}}(s.prototype=r("./object")).loadAsync=r("./load"),s.support=r("./support"),s.defaults=r("./defaults"),s.version="3.10.1",s.loadAsync=function(a,o){return new s().loadAsync(a,o)},s.external=r("./external"),n.exports=s},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(r,n,i){var s=r("./utils"),a=r("./external"),o=r("./utf8"),c=r("./zipEntries"),u=r("./stream/Crc32Probe"),l=r("./nodejsUtils");function f(d){return new a.Promise(function(h,m){var p=d.decompressed.getContentWorker().pipe(new u);p.on("error",function(g){m(g)}).on("end",function(){p.streamInfo.crc32!==d.decompressed.crc32?m(new Error("Corrupted zip : CRC32 mismatch")):h()}).resume()})}n.exports=function(d,h){var m=this;return h=s.extend(h||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:o.utf8decode}),l.isNode&&l.isStream(d)?a.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):s.prepareContent("the loaded zip file",d,!0,h.optimizedBinaryString,h.base64).then(function(p){var g=new c(h);return g.load(p),g}).then(function(p){var g=[a.Promise.resolve(p)],v=p.files;if(h.checkCRC32)for(var y=0;y<v.length;y++)g.push(f(v[y]));return a.Promise.all(g)}).then(function(p){for(var g=p.shift(),v=g.files,y=0;y<v.length;y++){var b=v[y],_=b.fileNameStr,x=s.resolve(b.fileNameStr);m.file(x,b.decompressed,{binary:!0,optimizedBinaryString:!0,date:b.date,dir:b.dir,comment:b.fileCommentStr.length?b.fileCommentStr:null,unixPermissions:b.unixPermissions,dosPermissions:b.dosPermissions,createFolders:h.createFolders}),b.dir||(m.file(x).unsafeOriginalName=_)}return g.zipComment.length&&(m.comment=g.zipComment),m})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(r,n,i){var s=r("../utils"),a=r("../stream/GenericWorker");function o(c,u){a.call(this,"Nodejs stream input adapter for "+c),this._upstreamEnded=!1,this._bindStream(u)}s.inherits(o,a),o.prototype._bindStream=function(c){var u=this;(this._stream=c).pause(),c.on("data",function(l){u.push({data:l,meta:{percent:0}})}).on("error",function(l){u.isPaused?this.generatedError=l:u.error(l)}).on("end",function(){u.isPaused?u._upstreamEnded=!0:u.end()})},o.prototype.pause=function(){return!!a.prototype.pause.call(this)&&(this._stream.pause(),!0)},o.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},n.exports=o},{"../stream/GenericWorker":28,"../utils":32}],13:[function(r,n,i){var s=r("readable-stream").Readable;function a(o,c,u){s.call(this,c),this._helper=o;var l=this;o.on("data",function(f,d){l.push(f)||l._helper.pause(),u&&u(d)}).on("error",function(f){l.emit("error",f)}).on("end",function(){l.push(null)})}r("../utils").inherits(a,s),a.prototype._read=function(){this._helper.resume()},n.exports=a},{"../utils":32,"readable-stream":16}],14:[function(r,n,i){n.exports={isNode:typeof Me<"u",newBufferFrom:function(s,a){if(Me.from&&Me.from!==Uint8Array.from)return Me.from(s,a);if(typeof s=="number")throw new Error('The "data" argument must not be a number');return new Me(s,a)},allocBuffer:function(s){if(Me.alloc)return Me.alloc(s);var a=new Me(s);return a.fill(0),a},isBuffer:function(s){return Me.isBuffer(s)},isStream:function(s){return s&&typeof s.on=="function"&&typeof s.pause=="function"&&typeof s.resume=="function"}}},{}],15:[function(r,n,i){function s(x,E,k){var B,D=o.getTypeOf(E),z=o.extend(k||{},l);z.date=z.date||new Date,z.compression!==null&&(z.compression=z.compression.toUpperCase()),typeof z.unixPermissions=="string"&&(z.unixPermissions=parseInt(z.unixPermissions,8)),z.unixPermissions&&16384&z.unixPermissions&&(z.dir=!0),z.dosPermissions&&16&z.dosPermissions&&(z.dir=!0),z.dir&&(x=v(x)),z.createFolders&&(B=g(x))&&y.call(this,B,!0);var U=D==="string"&&z.binary===!1&&z.base64===!1;k&&k.binary!==void 0||(z.binary=!U),(E instanceof f&&E.uncompressedSize===0||z.dir||!E||E.length===0)&&(z.base64=!1,z.binary=!0,E="",z.compression="STORE",D="string");var S=null;S=E instanceof f||E instanceof c?E:m.isNode&&m.isStream(E)?new p(x,E):o.prepareContent(x,E,z.binary,z.optimizedBinaryString,z.base64);var T=new d(x,S,z);this.files[x]=T}var a=r("./utf8"),o=r("./utils"),c=r("./stream/GenericWorker"),u=r("./stream/StreamHelper"),l=r("./defaults"),f=r("./compressedObject"),d=r("./zipObject"),h=r("./generate"),m=r("./nodejsUtils"),p=r("./nodejs/NodejsStreamInputAdapter"),g=function(x){x.slice(-1)==="/"&&(x=x.substring(0,x.length-1));var E=x.lastIndexOf("/");return 0<E?x.substring(0,E):""},v=function(x){return x.slice(-1)!=="/"&&(x+="/"),x},y=function(x,E){return E=E!==void 0?E:l.createFolders,x=v(x),this.files[x]||s.call(this,x,null,{dir:!0,createFolders:E}),this.files[x]};function b(x){return Object.prototype.toString.call(x)==="[object RegExp]"}var _={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(x){var E,k,B;for(E in this.files)B=this.files[E],(k=E.slice(this.root.length,E.length))&&E.slice(0,this.root.length)===this.root&&x(k,B)},filter:function(x){var E=[];return this.forEach(function(k,B){x(k,B)&&E.push(B)}),E},file:function(x,E,k){if(arguments.length!==1)return x=this.root+x,s.call(this,x,E,k),this;if(b(x)){var B=x;return this.filter(function(z,U){return!U.dir&&B.test(z)})}var D=this.files[this.root+x];return D&&!D.dir?D:null},folder:function(x){if(!x)return this;if(b(x))return this.filter(function(D,z){return z.dir&&x.test(D)});var E=this.root+x,k=y.call(this,E),B=this.clone();return B.root=k.name,B},remove:function(x){x=this.root+x;var E=this.files[x];if(E||(x.slice(-1)!=="/"&&(x+="/"),E=this.files[x]),E&&!E.dir)delete this.files[x];else for(var k=this.filter(function(D,z){return z.name.slice(0,x.length)===x}),B=0;B<k.length;B++)delete this.files[k[B].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(x){var E,k={};try{if((k=o.extend(x||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:a.utf8encode})).type=k.type.toLowerCase(),k.compression=k.compression.toUpperCase(),k.type==="binarystring"&&(k.type="string"),!k.type)throw new Error("No output type specified.");o.checkSupport(k.type),k.platform!=="darwin"&&k.platform!=="freebsd"&&k.platform!=="linux"&&k.platform!=="sunos"||(k.platform="UNIX"),k.platform==="win32"&&(k.platform="DOS");var B=k.comment||this.comment||"";E=h.generateWorker(this,k,B)}catch(D){(E=new c("error")).error(D)}return new u(E,k.type||"string",k.mimeType)},generateAsync:function(x,E){return this.generateInternalStream(x).accumulate(E)},generateNodeStream:function(x,E){return(x=x||{}).type||(x.type="nodebuffer"),this.generateInternalStream(x).toNodejsStream(E)}};n.exports=_},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(r,n,i){n.exports=r("stream")},{stream:void 0}],17:[function(r,n,i){var s=r("./DataReader");function a(o){s.call(this,o);for(var c=0;c<this.data.length;c++)o[c]=255&o[c]}r("../utils").inherits(a,s),a.prototype.byteAt=function(o){return this.data[this.zero+o]},a.prototype.lastIndexOfSignature=function(o){for(var c=o.charCodeAt(0),u=o.charCodeAt(1),l=o.charCodeAt(2),f=o.charCodeAt(3),d=this.length-4;0<=d;--d)if(this.data[d]===c&&this.data[d+1]===u&&this.data[d+2]===l&&this.data[d+3]===f)return d-this.zero;return-1},a.prototype.readAndCheckSignature=function(o){var c=o.charCodeAt(0),u=o.charCodeAt(1),l=o.charCodeAt(2),f=o.charCodeAt(3),d=this.readData(4);return c===d[0]&&u===d[1]&&l===d[2]&&f===d[3]},a.prototype.readData=function(o){if(this.checkOffset(o),o===0)return[];var c=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,c},n.exports=a},{"../utils":32,"./DataReader":18}],18:[function(r,n,i){var s=r("../utils");function a(o){this.data=o,this.length=o.length,this.index=0,this.zero=0}a.prototype={checkOffset:function(o){this.checkIndex(this.index+o)},checkIndex:function(o){if(this.length<this.zero+o||o<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+o+"). Corrupted zip ?")},setIndex:function(o){this.checkIndex(o),this.index=o},skip:function(o){this.setIndex(this.index+o)},byteAt:function(){},readInt:function(o){var c,u=0;for(this.checkOffset(o),c=this.index+o-1;c>=this.index;c--)u=(u<<8)+this.byteAt(c);return this.index+=o,u},readString:function(o){return s.transformTo("string",this.readData(o))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var o=this.readInt(4);return new Date(Date.UTC(1980+(o>>25&127),(o>>21&15)-1,o>>16&31,o>>11&31,o>>5&63,(31&o)<<1))}},n.exports=a},{"../utils":32}],19:[function(r,n,i){var s=r("./Uint8ArrayReader");function a(o){s.call(this,o)}r("../utils").inherits(a,s),a.prototype.readData=function(o){this.checkOffset(o);var c=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,c},n.exports=a},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(r,n,i){var s=r("./DataReader");function a(o){s.call(this,o)}r("../utils").inherits(a,s),a.prototype.byteAt=function(o){return this.data.charCodeAt(this.zero+o)},a.prototype.lastIndexOfSignature=function(o){return this.data.lastIndexOf(o)-this.zero},a.prototype.readAndCheckSignature=function(o){return o===this.readData(4)},a.prototype.readData=function(o){this.checkOffset(o);var c=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,c},n.exports=a},{"../utils":32,"./DataReader":18}],21:[function(r,n,i){var s=r("./ArrayReader");function a(o){s.call(this,o)}r("../utils").inherits(a,s),a.prototype.readData=function(o){if(this.checkOffset(o),o===0)return new Uint8Array(0);var c=this.data.subarray(this.zero+this.index,this.zero+this.index+o);return this.index+=o,c},n.exports=a},{"../utils":32,"./ArrayReader":17}],22:[function(r,n,i){var s=r("../utils"),a=r("../support"),o=r("./ArrayReader"),c=r("./StringReader"),u=r("./NodeBufferReader"),l=r("./Uint8ArrayReader");n.exports=function(f){var d=s.getTypeOf(f);return s.checkSupport(d),d!=="string"||a.uint8array?d==="nodebuffer"?new u(f):a.uint8array?new l(s.transformTo("uint8array",f)):new o(s.transformTo("array",f)):new c(f)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(r,n,i){i.LOCAL_FILE_HEADER="PK",i.CENTRAL_FILE_HEADER="PK",i.CENTRAL_DIRECTORY_END="PK",i.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",i.ZIP64_CENTRAL_DIRECTORY_END="PK",i.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(r,n,i){var s=r("./GenericWorker"),a=r("../utils");function o(c){s.call(this,"ConvertWorker to "+c),this.destType=c}a.inherits(o,s),o.prototype.processChunk=function(c){this.push({data:a.transformTo(this.destType,c.data),meta:c.meta})},n.exports=o},{"../utils":32,"./GenericWorker":28}],25:[function(r,n,i){var s=r("./GenericWorker"),a=r("../crc32");function o(){s.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}r("../utils").inherits(o,s),o.prototype.processChunk=function(c){this.streamInfo.crc32=a(c.data,this.streamInfo.crc32||0),this.push(c)},n.exports=o},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(r,n,i){var s=r("../utils"),a=r("./GenericWorker");function o(c){a.call(this,"DataLengthProbe for "+c),this.propName=c,this.withStreamInfo(c,0)}s.inherits(o,a),o.prototype.processChunk=function(c){if(c){var u=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=u+c.data.length}a.prototype.processChunk.call(this,c)},n.exports=o},{"../utils":32,"./GenericWorker":28}],27:[function(r,n,i){var s=r("../utils"),a=r("./GenericWorker");function o(c){a.call(this,"DataWorker");var u=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,c.then(function(l){u.dataIsReady=!0,u.data=l,u.max=l&&l.length||0,u.type=s.getTypeOf(l),u.isPaused||u._tickAndRepeat()},function(l){u.error(l)})}s.inherits(o,a),o.prototype.cleanUp=function(){a.prototype.cleanUp.call(this),this.data=null},o.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,s.delay(this._tickAndRepeat,[],this)),!0)},o.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(s.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},o.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var c=null,u=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":c=this.data.substring(this.index,u);break;case"uint8array":c=this.data.subarray(this.index,u);break;case"array":case"nodebuffer":c=this.data.slice(this.index,u)}return this.index=u,this.push({data:c,meta:{percent:this.max?this.index/this.max*100:0}})},n.exports=o},{"../utils":32,"./GenericWorker":28}],28:[function(r,n,i){function s(a){this.name=a||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}s.prototype={push:function(a){this.emit("data",a)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(a){this.emit("error",a)}return!0},error:function(a){return!this.isFinished&&(this.isPaused?this.generatedError=a:(this.isFinished=!0,this.emit("error",a),this.previous&&this.previous.error(a),this.cleanUp()),!0)},on:function(a,o){return this._listeners[a].push(o),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(a,o){if(this._listeners[a])for(var c=0;c<this._listeners[a].length;c++)this._listeners[a][c].call(this,o)},pipe:function(a){return a.registerPrevious(this)},registerPrevious:function(a){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=a.streamInfo,this.mergeStreamInfo(),this.previous=a;var o=this;return a.on("data",function(c){o.processChunk(c)}),a.on("end",function(){o.end()}),a.on("error",function(c){o.error(c)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var a=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),a=!0),this.previous&&this.previous.resume(),!a},flush:function(){},processChunk:function(a){this.push(a)},withStreamInfo:function(a,o){return this.extraStreamInfo[a]=o,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var a in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,a)&&(this.streamInfo[a]=this.extraStreamInfo[a])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var a="Worker "+this.name;return this.previous?this.previous+" -> "+a:a}},n.exports=s},{}],29:[function(r,n,i){var s=r("../utils"),a=r("./ConvertWorker"),o=r("./GenericWorker"),c=r("../base64"),u=r("../support"),l=r("../external"),f=null;if(u.nodestream)try{f=r("../nodejs/NodejsStreamOutputAdapter")}catch{}function d(m,p){return new l.Promise(function(g,v){var y=[],b=m._internalType,_=m._outputType,x=m._mimeType;m.on("data",function(E,k){y.push(E),p&&p(k)}).on("error",function(E){y=[],v(E)}).on("end",function(){try{var E=function(k,B,D){switch(k){case"blob":return s.newBlob(s.transformTo("arraybuffer",B),D);case"base64":return c.encode(B);default:return s.transformTo(k,B)}}(_,function(k,B){var D,z=0,U=null,S=0;for(D=0;D<B.length;D++)S+=B[D].length;switch(k){case"string":return B.join("");case"array":return Array.prototype.concat.apply([],B);case"uint8array":for(U=new Uint8Array(S),D=0;D<B.length;D++)U.set(B[D],z),z+=B[D].length;return U;case"nodebuffer":return Me.concat(B);default:throw new Error("concat : unsupported type '"+k+"'")}}(b,y),x);g(E)}catch(k){v(k)}y=[]}).resume()})}function h(m,p,g){var v=p;switch(p){case"blob":case"arraybuffer":v="uint8array";break;case"base64":v="string"}try{this._internalType=v,this._outputType=p,this._mimeType=g,s.checkSupport(v),this._worker=m.pipe(new a(v)),m.lock()}catch(y){this._worker=new o("error"),this._worker.error(y)}}h.prototype={accumulate:function(m){return d(this,m)},on:function(m,p){var g=this;return m==="data"?this._worker.on(m,function(v){p.call(g,v.data,v.meta)}):this._worker.on(m,function(){s.delay(p,arguments,g)}),this},resume:function(){return s.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(m){if(s.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new f(this,{objectMode:this._outputType!=="nodebuffer"},m)}},n.exports=h},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(r,n,i){if(i.base64=!0,i.array=!0,i.string=!0,i.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",i.nodebuffer=typeof Me<"u",i.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")i.blob=!1;else{var s=new ArrayBuffer(0);try{i.blob=new Blob([s],{type:"application/zip"}).size===0}catch{try{var a=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);a.append(s),i.blob=a.getBlob("application/zip").size===0}catch{i.blob=!1}}}try{i.nodestream=!!r("readable-stream").Readable}catch{i.nodestream=!1}},{"readable-stream":16}],31:[function(r,n,i){for(var s=r("./utils"),a=r("./support"),o=r("./nodejsUtils"),c=r("./stream/GenericWorker"),u=new Array(256),l=0;l<256;l++)u[l]=252<=l?6:248<=l?5:240<=l?4:224<=l?3:192<=l?2:1;u[254]=u[254]=1;function f(){c.call(this,"utf-8 decode"),this.leftOver=null}function d(){c.call(this,"utf-8 encode")}i.utf8encode=function(h){return a.nodebuffer?o.newBufferFrom(h,"utf-8"):function(m){var p,g,v,y,b,_=m.length,x=0;for(y=0;y<_;y++)(64512&(g=m.charCodeAt(y)))==55296&&y+1<_&&(64512&(v=m.charCodeAt(y+1)))==56320&&(g=65536+(g-55296<<10)+(v-56320),y++),x+=g<128?1:g<2048?2:g<65536?3:4;for(p=a.uint8array?new Uint8Array(x):new Array(x),y=b=0;b<x;y++)(64512&(g=m.charCodeAt(y)))==55296&&y+1<_&&(64512&(v=m.charCodeAt(y+1)))==56320&&(g=65536+(g-55296<<10)+(v-56320),y++),g<128?p[b++]=g:(g<2048?p[b++]=192|g>>>6:(g<65536?p[b++]=224|g>>>12:(p[b++]=240|g>>>18,p[b++]=128|g>>>12&63),p[b++]=128|g>>>6&63),p[b++]=128|63&g);return p}(h)},i.utf8decode=function(h){return a.nodebuffer?s.transformTo("nodebuffer",h).toString("utf-8"):function(m){var p,g,v,y,b=m.length,_=new Array(2*b);for(p=g=0;p<b;)if((v=m[p++])<128)_[g++]=v;else if(4<(y=u[v]))_[g++]=65533,p+=y-1;else{for(v&=y===2?31:y===3?15:7;1<y&&p<b;)v=v<<6|63&m[p++],y--;1<y?_[g++]=65533:v<65536?_[g++]=v:(v-=65536,_[g++]=55296|v>>10&1023,_[g++]=56320|1023&v)}return _.length!==g&&(_.subarray?_=_.subarray(0,g):_.length=g),s.applyFromCharCode(_)}(h=s.transformTo(a.uint8array?"uint8array":"array",h))},s.inherits(f,c),f.prototype.processChunk=function(h){var m=s.transformTo(a.uint8array?"uint8array":"array",h.data);if(this.leftOver&&this.leftOver.length){if(a.uint8array){var p=m;(m=new Uint8Array(p.length+this.leftOver.length)).set(this.leftOver,0),m.set(p,this.leftOver.length)}else m=this.leftOver.concat(m);this.leftOver=null}var g=function(y,b){var _;for((b=b||y.length)>y.length&&(b=y.length),_=b-1;0<=_&&(192&y[_])==128;)_--;return _<0||_===0?b:_+u[y[_]]>b?_:b}(m),v=m;g!==m.length&&(a.uint8array?(v=m.subarray(0,g),this.leftOver=m.subarray(g,m.length)):(v=m.slice(0,g),this.leftOver=m.slice(g,m.length))),this.push({data:i.utf8decode(v),meta:h.meta})},f.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:i.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},i.Utf8DecodeWorker=f,s.inherits(d,c),d.prototype.processChunk=function(h){this.push({data:i.utf8encode(h.data),meta:h.meta})},i.Utf8EncodeWorker=d},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(r,n,i){var s=r("./support"),a=r("./base64"),o=r("./nodejsUtils"),c=r("./external");function u(p){return p}function l(p,g){for(var v=0;v<p.length;++v)g[v]=255&p.charCodeAt(v);return g}r("setimmediate"),i.newBlob=function(p,g){i.checkSupport("blob");try{return new Blob([p],{type:g})}catch{try{var v=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return v.append(p),v.getBlob(g)}catch{throw new Error("Bug : can't construct the Blob.")}}};var f={stringifyByChunk:function(p,g,v){var y=[],b=0,_=p.length;if(_<=v)return String.fromCharCode.apply(null,p);for(;b<_;)g==="array"||g==="nodebuffer"?y.push(String.fromCharCode.apply(null,p.slice(b,Math.min(b+v,_)))):y.push(String.fromCharCode.apply(null,p.subarray(b,Math.min(b+v,_)))),b+=v;return y.join("")},stringifyByChar:function(p){for(var g="",v=0;v<p.length;v++)g+=String.fromCharCode(p[v]);return g},applyCanBeUsed:{uint8array:function(){try{return s.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return s.nodebuffer&&String.fromCharCode.apply(null,o.allocBuffer(1)).length===1}catch{return!1}}()}};function d(p){var g=65536,v=i.getTypeOf(p),y=!0;if(v==="uint8array"?y=f.applyCanBeUsed.uint8array:v==="nodebuffer"&&(y=f.applyCanBeUsed.nodebuffer),y)for(;1<g;)try{return f.stringifyByChunk(p,v,g)}catch{g=Math.floor(g/2)}return f.stringifyByChar(p)}function h(p,g){for(var v=0;v<p.length;v++)g[v]=p[v];return g}i.applyFromCharCode=d;var m={};m.string={string:u,array:function(p){return l(p,new Array(p.length))},arraybuffer:function(p){return m.string.uint8array(p).buffer},uint8array:function(p){return l(p,new Uint8Array(p.length))},nodebuffer:function(p){return l(p,o.allocBuffer(p.length))}},m.array={string:d,array:u,arraybuffer:function(p){return new Uint8Array(p).buffer},uint8array:function(p){return new Uint8Array(p)},nodebuffer:function(p){return o.newBufferFrom(p)}},m.arraybuffer={string:function(p){return d(new Uint8Array(p))},array:function(p){return h(new Uint8Array(p),new Array(p.byteLength))},arraybuffer:u,uint8array:function(p){return new Uint8Array(p)},nodebuffer:function(p){return o.newBufferFrom(new Uint8Array(p))}},m.uint8array={string:d,array:function(p){return h(p,new Array(p.length))},arraybuffer:function(p){return p.buffer},uint8array:u,nodebuffer:function(p){return o.newBufferFrom(p)}},m.nodebuffer={string:d,array:function(p){return h(p,new Array(p.length))},arraybuffer:function(p){return m.nodebuffer.uint8array(p).buffer},uint8array:function(p){return h(p,new Uint8Array(p.length))},nodebuffer:u},i.transformTo=function(p,g){if(g=g||"",!p)return g;i.checkSupport(p);var v=i.getTypeOf(g);return m[v][p](g)},i.resolve=function(p){for(var g=p.split("/"),v=[],y=0;y<g.length;y++){var b=g[y];b==="."||b===""&&y!==0&&y!==g.length-1||(b===".."?v.pop():v.push(b))}return v.join("/")},i.getTypeOf=function(p){return typeof p=="string"?"string":Object.prototype.toString.call(p)==="[object Array]"?"array":s.nodebuffer&&o.isBuffer(p)?"nodebuffer":s.uint8array&&p instanceof Uint8Array?"uint8array":s.arraybuffer&&p instanceof ArrayBuffer?"arraybuffer":void 0},i.checkSupport=function(p){if(!s[p.toLowerCase()])throw new Error(p+" is not supported by this platform")},i.MAX_VALUE_16BITS=65535,i.MAX_VALUE_32BITS=-1,i.pretty=function(p){var g,v,y="";for(v=0;v<(p||"").length;v++)y+="\\x"+((g=p.charCodeAt(v))<16?"0":"")+g.toString(16).toUpperCase();return y},i.delay=function(p,g,v){setImmediate(function(){p.apply(v||null,g||[])})},i.inherits=function(p,g){function v(){}v.prototype=g.prototype,p.prototype=new v},i.extend=function(){var p,g,v={};for(p=0;p<arguments.length;p++)for(g in arguments[p])Object.prototype.hasOwnProperty.call(arguments[p],g)&&v[g]===void 0&&(v[g]=arguments[p][g]);return v},i.prepareContent=function(p,g,v,y,b){return c.Promise.resolve(g).then(function(_){return s.blob&&(_ instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(_))!==-1)&&typeof FileReader<"u"?new c.Promise(function(x,E){var k=new FileReader;k.onload=function(B){x(B.target.result)},k.onerror=function(B){E(B.target.error)},k.readAsArrayBuffer(_)}):_}).then(function(_){var x=i.getTypeOf(_);return x?(x==="arraybuffer"?_=i.transformTo("uint8array",_):x==="string"&&(b?_=a.decode(_):v&&y!==!0&&(_=function(E){return l(E,s.uint8array?new Uint8Array(E.length):new Array(E.length))}(_))),_):c.Promise.reject(new Error("Can't read the data of '"+p+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(r,n,i){var s=r("./reader/readerFor"),a=r("./utils"),o=r("./signature"),c=r("./zipEntry"),u=r("./support");function l(f){this.files=[],this.loadOptions=f}l.prototype={checkSignature:function(f){if(!this.reader.readAndCheckSignature(f)){this.reader.index-=4;var d=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+a.pretty(d)+", expected "+a.pretty(f)+")")}},isSignature:function(f,d){var h=this.reader.index;this.reader.setIndex(f);var m=this.reader.readString(4)===d;return this.reader.setIndex(h),m},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var f=this.reader.readData(this.zipCommentLength),d=u.uint8array?"uint8array":"array",h=a.transformTo(d,f);this.zipComment=this.loadOptions.decodeFileName(h)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var f,d,h,m=this.zip64EndOfCentralSize-44;0<m;)f=this.reader.readInt(2),d=this.reader.readInt(4),h=this.reader.readData(d),this.zip64ExtensibleData[f]={id:f,length:d,value:h}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var f,d;for(f=0;f<this.files.length;f++)d=this.files[f],this.reader.setIndex(d.localHeaderOffset),this.checkSignature(o.LOCAL_FILE_HEADER),d.readLocalPart(this.reader),d.handleUTF8(),d.processAttributes()},readCentralDir:function(){var f;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(o.CENTRAL_FILE_HEADER);)(f=new c({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(f);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var f=this.reader.lastIndexOfSignature(o.CENTRAL_DIRECTORY_END);if(f<0)throw this.isSignature(0,o.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(f);var d=f;if(this.checkSignature(o.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===a.MAX_VALUE_16BITS||this.diskWithCentralDirStart===a.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===a.MAX_VALUE_16BITS||this.centralDirRecords===a.MAX_VALUE_16BITS||this.centralDirSize===a.MAX_VALUE_32BITS||this.centralDirOffset===a.MAX_VALUE_32BITS){if(this.zip64=!0,(f=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(f),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,o.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var h=this.centralDirOffset+this.centralDirSize;this.zip64&&(h+=20,h+=12+this.zip64EndOfCentralSize);var m=d-h;if(0<m)this.isSignature(d,o.CENTRAL_FILE_HEADER)||(this.reader.zero=m);else if(m<0)throw new Error("Corrupted zip: missing "+Math.abs(m)+" bytes.")},prepareReader:function(f){this.reader=s(f)},load:function(f){this.prepareReader(f),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},n.exports=l},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(r,n,i){var s=r("./reader/readerFor"),a=r("./utils"),o=r("./compressedObject"),c=r("./crc32"),u=r("./utf8"),l=r("./compressions"),f=r("./support");function d(h,m){this.options=h,this.loadOptions=m}d.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(h){var m,p;if(h.skip(22),this.fileNameLength=h.readInt(2),p=h.readInt(2),this.fileName=h.readData(this.fileNameLength),h.skip(p),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((m=function(g){for(var v in l)if(Object.prototype.hasOwnProperty.call(l,v)&&l[v].magic===g)return l[v];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+a.pretty(this.compressionMethod)+" unknown (inner file : "+a.transformTo("string",this.fileName)+")");this.decompressed=new o(this.compressedSize,this.uncompressedSize,this.crc32,m,h.readData(this.compressedSize))},readCentralPart:function(h){this.versionMadeBy=h.readInt(2),h.skip(2),this.bitFlag=h.readInt(2),this.compressionMethod=h.readString(2),this.date=h.readDate(),this.crc32=h.readInt(4),this.compressedSize=h.readInt(4),this.uncompressedSize=h.readInt(4);var m=h.readInt(2);if(this.extraFieldsLength=h.readInt(2),this.fileCommentLength=h.readInt(2),this.diskNumberStart=h.readInt(2),this.internalFileAttributes=h.readInt(2),this.externalFileAttributes=h.readInt(4),this.localHeaderOffset=h.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");h.skip(m),this.readExtraFields(h),this.parseZIP64ExtraField(h),this.fileComment=h.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var h=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),h==0&&(this.dosPermissions=63&this.externalFileAttributes),h==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var h=s(this.extraFields[1].value);this.uncompressedSize===a.MAX_VALUE_32BITS&&(this.uncompressedSize=h.readInt(8)),this.compressedSize===a.MAX_VALUE_32BITS&&(this.compressedSize=h.readInt(8)),this.localHeaderOffset===a.MAX_VALUE_32BITS&&(this.localHeaderOffset=h.readInt(8)),this.diskNumberStart===a.MAX_VALUE_32BITS&&(this.diskNumberStart=h.readInt(4))}},readExtraFields:function(h){var m,p,g,v=h.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});h.index+4<v;)m=h.readInt(2),p=h.readInt(2),g=h.readData(p),this.extraFields[m]={id:m,length:p,value:g};h.setIndex(v)},handleUTF8:function(){var h=f.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=u.utf8decode(this.fileName),this.fileCommentStr=u.utf8decode(this.fileComment);else{var m=this.findExtraFieldUnicodePath();if(m!==null)this.fileNameStr=m;else{var p=a.transformTo(h,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(p)}var g=this.findExtraFieldUnicodeComment();if(g!==null)this.fileCommentStr=g;else{var v=a.transformTo(h,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(v)}}},findExtraFieldUnicodePath:function(){var h=this.extraFields[28789];if(h){var m=s(h.value);return m.readInt(1)!==1||c(this.fileName)!==m.readInt(4)?null:u.utf8decode(m.readData(h.length-5))}return null},findExtraFieldUnicodeComment:function(){var h=this.extraFields[25461];if(h){var m=s(h.value);return m.readInt(1)!==1||c(this.fileComment)!==m.readInt(4)?null:u.utf8decode(m.readData(h.length-5))}return null}},n.exports=d},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(r,n,i){function s(m,p,g){this.name=m,this.dir=g.dir,this.date=g.date,this.comment=g.comment,this.unixPermissions=g.unixPermissions,this.dosPermissions=g.dosPermissions,this._data=p,this._dataBinary=g.binary,this.options={compression:g.compression,compressionOptions:g.compressionOptions}}var a=r("./stream/StreamHelper"),o=r("./stream/DataWorker"),c=r("./utf8"),u=r("./compressedObject"),l=r("./stream/GenericWorker");s.prototype={internalStream:function(m){var p=null,g="string";try{if(!m)throw new Error("No output type specified.");var v=(g=m.toLowerCase())==="string"||g==="text";g!=="binarystring"&&g!=="text"||(g="string"),p=this._decompressWorker();var y=!this._dataBinary;y&&!v&&(p=p.pipe(new c.Utf8EncodeWorker)),!y&&v&&(p=p.pipe(new c.Utf8DecodeWorker))}catch(b){(p=new l("error")).error(b)}return new a(p,g,"")},async:function(m,p){return this.internalStream(m).accumulate(p)},nodeStream:function(m,p){return this.internalStream(m||"nodebuffer").toNodejsStream(p)},_compressWorker:function(m,p){if(this._data instanceof u&&this._data.compression.magic===m.magic)return this._data.getCompressedWorker();var g=this._decompressWorker();return this._dataBinary||(g=g.pipe(new c.Utf8EncodeWorker)),u.createWorkerFrom(g,m,p)},_decompressWorker:function(){return this._data instanceof u?this._data.getContentWorker():this._data instanceof l?this._data:new o(this._data)}};for(var f=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],d=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},h=0;h<f.length;h++)s.prototype[f[h]]=d;n.exports=s},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(r,n,i){(function(s){var a,o,c=s.MutationObserver||s.WebKitMutationObserver;if(c){var u=0,l=new c(m),f=s.document.createTextNode("");l.observe(f,{characterData:!0}),a=function(){f.data=u=++u%2}}else if(s.setImmediate||s.MessageChannel===void 0)a="document"in s&&"onreadystatechange"in s.document.createElement("script")?function(){var p=s.document.createElement("script");p.onreadystatechange=function(){m(),p.onreadystatechange=null,p.parentNode.removeChild(p),p=null},s.document.documentElement.appendChild(p)}:function(){setTimeout(m,0)};else{var d=new s.MessageChannel;d.port1.onmessage=m,a=function(){d.port2.postMessage(0)}}var h=[];function m(){var p,g;o=!0;for(var v=h.length;v;){for(g=h,h=[],p=-1;++p<v;)g[p]();v=h.length}o=!1}n.exports=function(p){h.push(p)!==1||o||a()}}).call(this,typeof Ut<"u"?Ut:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(r,n,i){var s=r("immediate");function a(){}var o={},c=["REJECTED"],u=["FULFILLED"],l=["PENDING"];function f(v){if(typeof v!="function")throw new TypeError("resolver must be a function");this.state=l,this.queue=[],this.outcome=void 0,v!==a&&p(this,v)}function d(v,y,b){this.promise=v,typeof y=="function"&&(this.onFulfilled=y,this.callFulfilled=this.otherCallFulfilled),typeof b=="function"&&(this.onRejected=b,this.callRejected=this.otherCallRejected)}function h(v,y,b){s(function(){var _;try{_=y(b)}catch(x){return o.reject(v,x)}_===v?o.reject(v,new TypeError("Cannot resolve promise with itself")):o.resolve(v,_)})}function m(v){var y=v&&v.then;if(v&&(typeof v=="object"||typeof v=="function")&&typeof y=="function")return function(){y.apply(v,arguments)}}function p(v,y){var b=!1;function _(k){b||(b=!0,o.reject(v,k))}function x(k){b||(b=!0,o.resolve(v,k))}var E=g(function(){y(x,_)});E.status==="error"&&_(E.value)}function g(v,y){var b={};try{b.value=v(y),b.status="success"}catch(_){b.status="error",b.value=_}return b}(n.exports=f).prototype.finally=function(v){if(typeof v!="function")return this;var y=this.constructor;return this.then(function(b){return y.resolve(v()).then(function(){return b})},function(b){return y.resolve(v()).then(function(){throw b})})},f.prototype.catch=function(v){return this.then(null,v)},f.prototype.then=function(v,y){if(typeof v!="function"&&this.state===u||typeof y!="function"&&this.state===c)return this;var b=new this.constructor(a);return this.state!==l?h(b,this.state===u?v:y,this.outcome):this.queue.push(new d(b,v,y)),b},d.prototype.callFulfilled=function(v){o.resolve(this.promise,v)},d.prototype.otherCallFulfilled=function(v){h(this.promise,this.onFulfilled,v)},d.prototype.callRejected=function(v){o.reject(this.promise,v)},d.prototype.otherCallRejected=function(v){h(this.promise,this.onRejected,v)},o.resolve=function(v,y){var b=g(m,y);if(b.status==="error")return o.reject(v,b.value);var _=b.value;if(_)p(v,_);else{v.state=u,v.outcome=y;for(var x=-1,E=v.queue.length;++x<E;)v.queue[x].callFulfilled(y)}return v},o.reject=function(v,y){v.state=c,v.outcome=y;for(var b=-1,_=v.queue.length;++b<_;)v.queue[b].callRejected(y);return v},f.resolve=function(v){return v instanceof this?v:o.resolve(new this(a),v)},f.reject=function(v){var y=new this(a);return o.reject(y,v)},f.all=function(v){var y=this;if(Object.prototype.toString.call(v)!=="[object Array]")return this.reject(new TypeError("must be an array"));var b=v.length,_=!1;if(!b)return this.resolve([]);for(var x=new Array(b),E=0,k=-1,B=new this(a);++k<b;)D(v[k],k);return B;function D(z,U){y.resolve(z).then(function(S){x[U]=S,++E!==b||_||(_=!0,o.resolve(B,x))},function(S){_||(_=!0,o.reject(B,S))})}},f.race=function(v){var y=this;if(Object.prototype.toString.call(v)!=="[object Array]")return this.reject(new TypeError("must be an array"));var b=v.length,_=!1;if(!b)return this.resolve([]);for(var x=-1,E=new this(a);++x<b;)k=v[x],y.resolve(k).then(function(B){_||(_=!0,o.resolve(E,B))},function(B){_||(_=!0,o.reject(E,B))});var k;return E}},{immediate:36}],38:[function(r,n,i){var s={};(0,r("./lib/utils/common").assign)(s,r("./lib/deflate"),r("./lib/inflate"),r("./lib/zlib/constants")),n.exports=s},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(r,n,i){var s=r("./zlib/deflate"),a=r("./utils/common"),o=r("./utils/strings"),c=r("./zlib/messages"),u=r("./zlib/zstream"),l=Object.prototype.toString,f=0,d=-1,h=0,m=8;function p(v){if(!(this instanceof p))return new p(v);this.options=a.assign({level:d,method:m,chunkSize:16384,windowBits:15,memLevel:8,strategy:h,to:""},v||{});var y=this.options;y.raw&&0<y.windowBits?y.windowBits=-y.windowBits:y.gzip&&0<y.windowBits&&y.windowBits<16&&(y.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var b=s.deflateInit2(this.strm,y.level,y.method,y.windowBits,y.memLevel,y.strategy);if(b!==f)throw new Error(c[b]);if(y.header&&s.deflateSetHeader(this.strm,y.header),y.dictionary){var _;if(_=typeof y.dictionary=="string"?o.string2buf(y.dictionary):l.call(y.dictionary)==="[object ArrayBuffer]"?new Uint8Array(y.dictionary):y.dictionary,(b=s.deflateSetDictionary(this.strm,_))!==f)throw new Error(c[b]);this._dict_set=!0}}function g(v,y){var b=new p(y);if(b.push(v,!0),b.err)throw b.msg||c[b.err];return b.result}p.prototype.push=function(v,y){var b,_,x=this.strm,E=this.options.chunkSize;if(this.ended)return!1;_=y===~~y?y:y===!0?4:0,typeof v=="string"?x.input=o.string2buf(v):l.call(v)==="[object ArrayBuffer]"?x.input=new Uint8Array(v):x.input=v,x.next_in=0,x.avail_in=x.input.length;do{if(x.avail_out===0&&(x.output=new a.Buf8(E),x.next_out=0,x.avail_out=E),(b=s.deflate(x,_))!==1&&b!==f)return this.onEnd(b),!(this.ended=!0);x.avail_out!==0&&(x.avail_in!==0||_!==4&&_!==2)||(this.options.to==="string"?this.onData(o.buf2binstring(a.shrinkBuf(x.output,x.next_out))):this.onData(a.shrinkBuf(x.output,x.next_out)))}while((0<x.avail_in||x.avail_out===0)&&b!==1);return _===4?(b=s.deflateEnd(this.strm),this.onEnd(b),this.ended=!0,b===f):_!==2||(this.onEnd(f),!(x.avail_out=0))},p.prototype.onData=function(v){this.chunks.push(v)},p.prototype.onEnd=function(v){v===f&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=v,this.msg=this.strm.msg},i.Deflate=p,i.deflate=g,i.deflateRaw=function(v,y){return(y=y||{}).raw=!0,g(v,y)},i.gzip=function(v,y){return(y=y||{}).gzip=!0,g(v,y)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(r,n,i){var s=r("./zlib/inflate"),a=r("./utils/common"),o=r("./utils/strings"),c=r("./zlib/constants"),u=r("./zlib/messages"),l=r("./zlib/zstream"),f=r("./zlib/gzheader"),d=Object.prototype.toString;function h(p){if(!(this instanceof h))return new h(p);this.options=a.assign({chunkSize:16384,windowBits:0,to:""},p||{});var g=this.options;g.raw&&0<=g.windowBits&&g.windowBits<16&&(g.windowBits=-g.windowBits,g.windowBits===0&&(g.windowBits=-15)),!(0<=g.windowBits&&g.windowBits<16)||p&&p.windowBits||(g.windowBits+=32),15<g.windowBits&&g.windowBits<48&&(15&g.windowBits)==0&&(g.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var v=s.inflateInit2(this.strm,g.windowBits);if(v!==c.Z_OK)throw new Error(u[v]);this.header=new f,s.inflateGetHeader(this.strm,this.header)}function m(p,g){var v=new h(g);if(v.push(p,!0),v.err)throw v.msg||u[v.err];return v.result}h.prototype.push=function(p,g){var v,y,b,_,x,E,k=this.strm,B=this.options.chunkSize,D=this.options.dictionary,z=!1;if(this.ended)return!1;y=g===~~g?g:g===!0?c.Z_FINISH:c.Z_NO_FLUSH,typeof p=="string"?k.input=o.binstring2buf(p):d.call(p)==="[object ArrayBuffer]"?k.input=new Uint8Array(p):k.input=p,k.next_in=0,k.avail_in=k.input.length;do{if(k.avail_out===0&&(k.output=new a.Buf8(B),k.next_out=0,k.avail_out=B),(v=s.inflate(k,c.Z_NO_FLUSH))===c.Z_NEED_DICT&&D&&(E=typeof D=="string"?o.string2buf(D):d.call(D)==="[object ArrayBuffer]"?new Uint8Array(D):D,v=s.inflateSetDictionary(this.strm,E)),v===c.Z_BUF_ERROR&&z===!0&&(v=c.Z_OK,z=!1),v!==c.Z_STREAM_END&&v!==c.Z_OK)return this.onEnd(v),!(this.ended=!0);k.next_out&&(k.avail_out!==0&&v!==c.Z_STREAM_END&&(k.avail_in!==0||y!==c.Z_FINISH&&y!==c.Z_SYNC_FLUSH)||(this.options.to==="string"?(b=o.utf8border(k.output,k.next_out),_=k.next_out-b,x=o.buf2string(k.output,b),k.next_out=_,k.avail_out=B-_,_&&a.arraySet(k.output,k.output,b,_,0),this.onData(x)):this.onData(a.shrinkBuf(k.output,k.next_out)))),k.avail_in===0&&k.avail_out===0&&(z=!0)}while((0<k.avail_in||k.avail_out===0)&&v!==c.Z_STREAM_END);return v===c.Z_STREAM_END&&(y=c.Z_FINISH),y===c.Z_FINISH?(v=s.inflateEnd(this.strm),this.onEnd(v),this.ended=!0,v===c.Z_OK):y!==c.Z_SYNC_FLUSH||(this.onEnd(c.Z_OK),!(k.avail_out=0))},h.prototype.onData=function(p){this.chunks.push(p)},h.prototype.onEnd=function(p){p===c.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=p,this.msg=this.strm.msg},i.Inflate=h,i.inflate=m,i.inflateRaw=function(p,g){return(g=g||{}).raw=!0,m(p,g)},i.ungzip=m},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(r,n,i){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";i.assign=function(c){for(var u=Array.prototype.slice.call(arguments,1);u.length;){var l=u.shift();if(l){if(typeof l!="object")throw new TypeError(l+"must be non-object");for(var f in l)l.hasOwnProperty(f)&&(c[f]=l[f])}}return c},i.shrinkBuf=function(c,u){return c.length===u?c:c.subarray?c.subarray(0,u):(c.length=u,c)};var a={arraySet:function(c,u,l,f,d){if(u.subarray&&c.subarray)c.set(u.subarray(l,l+f),d);else for(var h=0;h<f;h++)c[d+h]=u[l+h]},flattenChunks:function(c){var u,l,f,d,h,m;for(u=f=0,l=c.length;u<l;u++)f+=c[u].length;for(m=new Uint8Array(f),u=d=0,l=c.length;u<l;u++)h=c[u],m.set(h,d),d+=h.length;return m}},o={arraySet:function(c,u,l,f,d){for(var h=0;h<f;h++)c[d+h]=u[l+h]},flattenChunks:function(c){return[].concat.apply([],c)}};i.setTyped=function(c){c?(i.Buf8=Uint8Array,i.Buf16=Uint16Array,i.Buf32=Int32Array,i.assign(i,a)):(i.Buf8=Array,i.Buf16=Array,i.Buf32=Array,i.assign(i,o))},i.setTyped(s)},{}],42:[function(r,n,i){var s=r("./common"),a=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch{a=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{o=!1}for(var c=new s.Buf8(256),u=0;u<256;u++)c[u]=252<=u?6:248<=u?5:240<=u?4:224<=u?3:192<=u?2:1;function l(f,d){if(d<65537&&(f.subarray&&o||!f.subarray&&a))return String.fromCharCode.apply(null,s.shrinkBuf(f,d));for(var h="",m=0;m<d;m++)h+=String.fromCharCode(f[m]);return h}c[254]=c[254]=1,i.string2buf=function(f){var d,h,m,p,g,v=f.length,y=0;for(p=0;p<v;p++)(64512&(h=f.charCodeAt(p)))==55296&&p+1<v&&(64512&(m=f.charCodeAt(p+1)))==56320&&(h=65536+(h-55296<<10)+(m-56320),p++),y+=h<128?1:h<2048?2:h<65536?3:4;for(d=new s.Buf8(y),p=g=0;g<y;p++)(64512&(h=f.charCodeAt(p)))==55296&&p+1<v&&(64512&(m=f.charCodeAt(p+1)))==56320&&(h=65536+(h-55296<<10)+(m-56320),p++),h<128?d[g++]=h:(h<2048?d[g++]=192|h>>>6:(h<65536?d[g++]=224|h>>>12:(d[g++]=240|h>>>18,d[g++]=128|h>>>12&63),d[g++]=128|h>>>6&63),d[g++]=128|63&h);return d},i.buf2binstring=function(f){return l(f,f.length)},i.binstring2buf=function(f){for(var d=new s.Buf8(f.length),h=0,m=d.length;h<m;h++)d[h]=f.charCodeAt(h);return d},i.buf2string=function(f,d){var h,m,p,g,v=d||f.length,y=new Array(2*v);for(h=m=0;h<v;)if((p=f[h++])<128)y[m++]=p;else if(4<(g=c[p]))y[m++]=65533,h+=g-1;else{for(p&=g===2?31:g===3?15:7;1<g&&h<v;)p=p<<6|63&f[h++],g--;1<g?y[m++]=65533:p<65536?y[m++]=p:(p-=65536,y[m++]=55296|p>>10&1023,y[m++]=56320|1023&p)}return l(y,m)},i.utf8border=function(f,d){var h;for((d=d||f.length)>f.length&&(d=f.length),h=d-1;0<=h&&(192&f[h])==128;)h--;return h<0||h===0?d:h+c[f[h]]>d?h:d}},{"./common":41}],43:[function(r,n,i){n.exports=function(s,a,o,c){for(var u=65535&s|0,l=s>>>16&65535|0,f=0;o!==0;){for(o-=f=2e3<o?2e3:o;l=l+(u=u+a[c++]|0)|0,--f;);u%=65521,l%=65521}return u|l<<16|0}},{}],44:[function(r,n,i){n.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(r,n,i){var s=function(){for(var a,o=[],c=0;c<256;c++){a=c;for(var u=0;u<8;u++)a=1&a?3988292384^a>>>1:a>>>1;o[c]=a}return o}();n.exports=function(a,o,c,u){var l=s,f=u+c;a^=-1;for(var d=u;d<f;d++)a=a>>>8^l[255&(a^o[d])];return-1^a}},{}],46:[function(r,n,i){var s,a=r("../utils/common"),o=r("./trees"),c=r("./adler32"),u=r("./crc32"),l=r("./messages"),f=0,d=4,h=0,m=-2,p=-1,g=4,v=2,y=8,b=9,_=286,x=30,E=19,k=2*_+1,B=15,D=3,z=258,U=z+D+1,S=42,T=113,w=1,A=2,F=3,P=4;function O(V,ne){return V.msg=l[ne],ne}function R(V){return(V<<1)-(4<V?9:0)}function I(V){for(var ne=V.length;0<=--ne;)V[ne]=0}function C(V){var ne=V.state,se=ne.pending;se>V.avail_out&&(se=V.avail_out),se!==0&&(a.arraySet(V.output,ne.pending_buf,ne.pending_out,se,V.next_out),V.next_out+=se,ne.pending_out+=se,V.total_out+=se,V.avail_out-=se,ne.pending-=se,ne.pending===0&&(ne.pending_out=0))}function M(V,ne){o._tr_flush_block(V,0<=V.block_start?V.block_start:-1,V.strstart-V.block_start,ne),V.block_start=V.strstart,C(V.strm)}function L(V,ne){V.pending_buf[V.pending++]=ne}function N(V,ne){V.pending_buf[V.pending++]=ne>>>8&255,V.pending_buf[V.pending++]=255&ne}function H(V,ne){var se,J,ee=V.max_chain_length,ie=V.strstart,le=V.prev_length,ue=V.nice_match,me=V.strstart>V.w_size-U?V.strstart-(V.w_size-U):0,be=V.window,_e=V.w_mask,xe=V.prev,Be=V.strstart+z,re=be[ie+le-1],K=be[ie+le];V.prev_length>=V.good_match&&(ee>>=2),ue>V.lookahead&&(ue=V.lookahead);do if(be[(se=ne)+le]===K&&be[se+le-1]===re&&be[se]===be[ie]&&be[++se]===be[ie+1]){ie+=2,se++;do;while(be[++ie]===be[++se]&&be[++ie]===be[++se]&&be[++ie]===be[++se]&&be[++ie]===be[++se]&&be[++ie]===be[++se]&&be[++ie]===be[++se]&&be[++ie]===be[++se]&&be[++ie]===be[++se]&&ie<Be);if(J=z-(Be-ie),ie=Be-z,le<J){if(V.match_start=ne,ue<=(le=J))break;re=be[ie+le-1],K=be[ie+le]}}while((ne=xe[ne&_e])>me&&--ee!=0);return le<=V.lookahead?le:V.lookahead}function W(V){var ne,se,J,ee,ie,le,ue,me,be,_e,xe=V.w_size;do{if(ee=V.window_size-V.lookahead-V.strstart,V.strstart>=xe+(xe-U)){for(a.arraySet(V.window,V.window,xe,xe,0),V.match_start-=xe,V.strstart-=xe,V.block_start-=xe,ne=se=V.hash_size;J=V.head[--ne],V.head[ne]=xe<=J?J-xe:0,--se;);for(ne=se=xe;J=V.prev[--ne],V.prev[ne]=xe<=J?J-xe:0,--se;);ee+=xe}if(V.strm.avail_in===0)break;if(le=V.strm,ue=V.window,me=V.strstart+V.lookahead,be=ee,_e=void 0,_e=le.avail_in,be<_e&&(_e=be),se=_e===0?0:(le.avail_in-=_e,a.arraySet(ue,le.input,le.next_in,_e,me),le.state.wrap===1?le.adler=c(le.adler,ue,_e,me):le.state.wrap===2&&(le.adler=u(le.adler,ue,_e,me)),le.next_in+=_e,le.total_in+=_e,_e),V.lookahead+=se,V.lookahead+V.insert>=D)for(ie=V.strstart-V.insert,V.ins_h=V.window[ie],V.ins_h=(V.ins_h<<V.hash_shift^V.window[ie+1])&V.hash_mask;V.insert&&(V.ins_h=(V.ins_h<<V.hash_shift^V.window[ie+D-1])&V.hash_mask,V.prev[ie&V.w_mask]=V.head[V.ins_h],V.head[V.ins_h]=ie,ie++,V.insert--,!(V.lookahead+V.insert<D)););}while(V.lookahead<U&&V.strm.avail_in!==0)}function q(V,ne){for(var se,J;;){if(V.lookahead<U){if(W(V),V.lookahead<U&&ne===f)return w;if(V.lookahead===0)break}if(se=0,V.lookahead>=D&&(V.ins_h=(V.ins_h<<V.hash_shift^V.window[V.strstart+D-1])&V.hash_mask,se=V.prev[V.strstart&V.w_mask]=V.head[V.ins_h],V.head[V.ins_h]=V.strstart),se!==0&&V.strstart-se<=V.w_size-U&&(V.match_length=H(V,se)),V.match_length>=D)if(J=o._tr_tally(V,V.strstart-V.match_start,V.match_length-D),V.lookahead-=V.match_length,V.match_length<=V.max_lazy_match&&V.lookahead>=D){for(V.match_length--;V.strstart++,V.ins_h=(V.ins_h<<V.hash_shift^V.window[V.strstart+D-1])&V.hash_mask,se=V.prev[V.strstart&V.w_mask]=V.head[V.ins_h],V.head[V.ins_h]=V.strstart,--V.match_length!=0;);V.strstart++}else V.strstart+=V.match_length,V.match_length=0,V.ins_h=V.window[V.strstart],V.ins_h=(V.ins_h<<V.hash_shift^V.window[V.strstart+1])&V.hash_mask;else J=o._tr_tally(V,0,V.window[V.strstart]),V.lookahead--,V.strstart++;if(J&&(M(V,!1),V.strm.avail_out===0))return w}return V.insert=V.strstart<D-1?V.strstart:D-1,ne===d?(M(V,!0),V.strm.avail_out===0?F:P):V.last_lit&&(M(V,!1),V.strm.avail_out===0)?w:A}function G(V,ne){for(var se,J,ee;;){if(V.lookahead<U){if(W(V),V.lookahead<U&&ne===f)return w;if(V.lookahead===0)break}if(se=0,V.lookahead>=D&&(V.ins_h=(V.ins_h<<V.hash_shift^V.window[V.strstart+D-1])&V.hash_mask,se=V.prev[V.strstart&V.w_mask]=V.head[V.ins_h],V.head[V.ins_h]=V.strstart),V.prev_length=V.match_length,V.prev_match=V.match_start,V.match_length=D-1,se!==0&&V.prev_length<V.max_lazy_match&&V.strstart-se<=V.w_size-U&&(V.match_length=H(V,se),V.match_length<=5&&(V.strategy===1||V.match_length===D&&4096<V.strstart-V.match_start)&&(V.match_length=D-1)),V.prev_length>=D&&V.match_length<=V.prev_length){for(ee=V.strstart+V.lookahead-D,J=o._tr_tally(V,V.strstart-1-V.prev_match,V.prev_length-D),V.lookahead-=V.prev_length-1,V.prev_length-=2;++V.strstart<=ee&&(V.ins_h=(V.ins_h<<V.hash_shift^V.window[V.strstart+D-1])&V.hash_mask,se=V.prev[V.strstart&V.w_mask]=V.head[V.ins_h],V.head[V.ins_h]=V.strstart),--V.prev_length!=0;);if(V.match_available=0,V.match_length=D-1,V.strstart++,J&&(M(V,!1),V.strm.avail_out===0))return w}else if(V.match_available){if((J=o._tr_tally(V,0,V.window[V.strstart-1]))&&M(V,!1),V.strstart++,V.lookahead--,V.strm.avail_out===0)return w}else V.match_available=1,V.strstart++,V.lookahead--}return V.match_available&&(J=o._tr_tally(V,0,V.window[V.strstart-1]),V.match_available=0),V.insert=V.strstart<D-1?V.strstart:D-1,ne===d?(M(V,!0),V.strm.avail_out===0?F:P):V.last_lit&&(M(V,!1),V.strm.avail_out===0)?w:A}function Y(V,ne,se,J,ee){this.good_length=V,this.max_lazy=ne,this.nice_length=se,this.max_chain=J,this.func=ee}function te(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=y,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new a.Buf16(2*k),this.dyn_dtree=new a.Buf16(2*(2*x+1)),this.bl_tree=new a.Buf16(2*(2*E+1)),I(this.dyn_ltree),I(this.dyn_dtree),I(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new a.Buf16(B+1),this.heap=new a.Buf16(2*_+1),I(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new a.Buf16(2*_+1),I(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Q(V){var ne;return V&&V.state?(V.total_in=V.total_out=0,V.data_type=v,(ne=V.state).pending=0,ne.pending_out=0,ne.wrap<0&&(ne.wrap=-ne.wrap),ne.status=ne.wrap?S:T,V.adler=ne.wrap===2?0:1,ne.last_flush=f,o._tr_init(ne),h):O(V,m)}function j(V){var ne=Q(V);return ne===h&&function(se){se.window_size=2*se.w_size,I(se.head),se.max_lazy_match=s[se.level].max_lazy,se.good_match=s[se.level].good_length,se.nice_match=s[se.level].nice_length,se.max_chain_length=s[se.level].max_chain,se.strstart=0,se.block_start=0,se.lookahead=0,se.insert=0,se.match_length=se.prev_length=D-1,se.match_available=0,se.ins_h=0}(V.state),ne}function Z(V,ne,se,J,ee,ie){if(!V)return m;var le=1;if(ne===p&&(ne=6),J<0?(le=0,J=-J):15<J&&(le=2,J-=16),ee<1||b<ee||se!==y||J<8||15<J||ne<0||9<ne||ie<0||g<ie)return O(V,m);J===8&&(J=9);var ue=new te;return(V.state=ue).strm=V,ue.wrap=le,ue.gzhead=null,ue.w_bits=J,ue.w_size=1<<ue.w_bits,ue.w_mask=ue.w_size-1,ue.hash_bits=ee+7,ue.hash_size=1<<ue.hash_bits,ue.hash_mask=ue.hash_size-1,ue.hash_shift=~~((ue.hash_bits+D-1)/D),ue.window=new a.Buf8(2*ue.w_size),ue.head=new a.Buf16(ue.hash_size),ue.prev=new a.Buf16(ue.w_size),ue.lit_bufsize=1<<ee+6,ue.pending_buf_size=4*ue.lit_bufsize,ue.pending_buf=new a.Buf8(ue.pending_buf_size),ue.d_buf=1*ue.lit_bufsize,ue.l_buf=3*ue.lit_bufsize,ue.level=ne,ue.strategy=ie,ue.method=se,j(V)}s=[new Y(0,0,0,0,function(V,ne){var se=65535;for(se>V.pending_buf_size-5&&(se=V.pending_buf_size-5);;){if(V.lookahead<=1){if(W(V),V.lookahead===0&&ne===f)return w;if(V.lookahead===0)break}V.strstart+=V.lookahead,V.lookahead=0;var J=V.block_start+se;if((V.strstart===0||V.strstart>=J)&&(V.lookahead=V.strstart-J,V.strstart=J,M(V,!1),V.strm.avail_out===0)||V.strstart-V.block_start>=V.w_size-U&&(M(V,!1),V.strm.avail_out===0))return w}return V.insert=0,ne===d?(M(V,!0),V.strm.avail_out===0?F:P):(V.strstart>V.block_start&&(M(V,!1),V.strm.avail_out),w)}),new Y(4,4,8,4,q),new Y(4,5,16,8,q),new Y(4,6,32,32,q),new Y(4,4,16,16,G),new Y(8,16,32,32,G),new Y(8,16,128,128,G),new Y(8,32,128,256,G),new Y(32,128,258,1024,G),new Y(32,258,258,4096,G)],i.deflateInit=function(V,ne){return Z(V,ne,y,15,8,0)},i.deflateInit2=Z,i.deflateReset=j,i.deflateResetKeep=Q,i.deflateSetHeader=function(V,ne){return V&&V.state?V.state.wrap!==2?m:(V.state.gzhead=ne,h):m},i.deflate=function(V,ne){var se,J,ee,ie;if(!V||!V.state||5<ne||ne<0)return V?O(V,m):m;if(J=V.state,!V.output||!V.input&&V.avail_in!==0||J.status===666&&ne!==d)return O(V,V.avail_out===0?-5:m);if(J.strm=V,se=J.last_flush,J.last_flush=ne,J.status===S)if(J.wrap===2)V.adler=0,L(J,31),L(J,139),L(J,8),J.gzhead?(L(J,(J.gzhead.text?1:0)+(J.gzhead.hcrc?2:0)+(J.gzhead.extra?4:0)+(J.gzhead.name?8:0)+(J.gzhead.comment?16:0)),L(J,255&J.gzhead.time),L(J,J.gzhead.time>>8&255),L(J,J.gzhead.time>>16&255),L(J,J.gzhead.time>>24&255),L(J,J.level===9?2:2<=J.strategy||J.level<2?4:0),L(J,255&J.gzhead.os),J.gzhead.extra&&J.gzhead.extra.length&&(L(J,255&J.gzhead.extra.length),L(J,J.gzhead.extra.length>>8&255)),J.gzhead.hcrc&&(V.adler=u(V.adler,J.pending_buf,J.pending,0)),J.gzindex=0,J.status=69):(L(J,0),L(J,0),L(J,0),L(J,0),L(J,0),L(J,J.level===9?2:2<=J.strategy||J.level<2?4:0),L(J,3),J.status=T);else{var le=y+(J.w_bits-8<<4)<<8;le|=(2<=J.strategy||J.level<2?0:J.level<6?1:J.level===6?2:3)<<6,J.strstart!==0&&(le|=32),le+=31-le%31,J.status=T,N(J,le),J.strstart!==0&&(N(J,V.adler>>>16),N(J,65535&V.adler)),V.adler=1}if(J.status===69)if(J.gzhead.extra){for(ee=J.pending;J.gzindex<(65535&J.gzhead.extra.length)&&(J.pending!==J.pending_buf_size||(J.gzhead.hcrc&&J.pending>ee&&(V.adler=u(V.adler,J.pending_buf,J.pending-ee,ee)),C(V),ee=J.pending,J.pending!==J.pending_buf_size));)L(J,255&J.gzhead.extra[J.gzindex]),J.gzindex++;J.gzhead.hcrc&&J.pending>ee&&(V.adler=u(V.adler,J.pending_buf,J.pending-ee,ee)),J.gzindex===J.gzhead.extra.length&&(J.gzindex=0,J.status=73)}else J.status=73;if(J.status===73)if(J.gzhead.name){ee=J.pending;do{if(J.pending===J.pending_buf_size&&(J.gzhead.hcrc&&J.pending>ee&&(V.adler=u(V.adler,J.pending_buf,J.pending-ee,ee)),C(V),ee=J.pending,J.pending===J.pending_buf_size)){ie=1;break}ie=J.gzindex<J.gzhead.name.length?255&J.gzhead.name.charCodeAt(J.gzindex++):0,L(J,ie)}while(ie!==0);J.gzhead.hcrc&&J.pending>ee&&(V.adler=u(V.adler,J.pending_buf,J.pending-ee,ee)),ie===0&&(J.gzindex=0,J.status=91)}else J.status=91;if(J.status===91)if(J.gzhead.comment){ee=J.pending;do{if(J.pending===J.pending_buf_size&&(J.gzhead.hcrc&&J.pending>ee&&(V.adler=u(V.adler,J.pending_buf,J.pending-ee,ee)),C(V),ee=J.pending,J.pending===J.pending_buf_size)){ie=1;break}ie=J.gzindex<J.gzhead.comment.length?255&J.gzhead.comment.charCodeAt(J.gzindex++):0,L(J,ie)}while(ie!==0);J.gzhead.hcrc&&J.pending>ee&&(V.adler=u(V.adler,J.pending_buf,J.pending-ee,ee)),ie===0&&(J.status=103)}else J.status=103;if(J.status===103&&(J.gzhead.hcrc?(J.pending+2>J.pending_buf_size&&C(V),J.pending+2<=J.pending_buf_size&&(L(J,255&V.adler),L(J,V.adler>>8&255),V.adler=0,J.status=T)):J.status=T),J.pending!==0){if(C(V),V.avail_out===0)return J.last_flush=-1,h}else if(V.avail_in===0&&R(ne)<=R(se)&&ne!==d)return O(V,-5);if(J.status===666&&V.avail_in!==0)return O(V,-5);if(V.avail_in!==0||J.lookahead!==0||ne!==f&&J.status!==666){var ue=J.strategy===2?function(me,be){for(var _e;;){if(me.lookahead===0&&(W(me),me.lookahead===0)){if(be===f)return w;break}if(me.match_length=0,_e=o._tr_tally(me,0,me.window[me.strstart]),me.lookahead--,me.strstart++,_e&&(M(me,!1),me.strm.avail_out===0))return w}return me.insert=0,be===d?(M(me,!0),me.strm.avail_out===0?F:P):me.last_lit&&(M(me,!1),me.strm.avail_out===0)?w:A}(J,ne):J.strategy===3?function(me,be){for(var _e,xe,Be,re,K=me.window;;){if(me.lookahead<=z){if(W(me),me.lookahead<=z&&be===f)return w;if(me.lookahead===0)break}if(me.match_length=0,me.lookahead>=D&&0<me.strstart&&(xe=K[Be=me.strstart-1])===K[++Be]&&xe===K[++Be]&&xe===K[++Be]){re=me.strstart+z;do;while(xe===K[++Be]&&xe===K[++Be]&&xe===K[++Be]&&xe===K[++Be]&&xe===K[++Be]&&xe===K[++Be]&&xe===K[++Be]&&xe===K[++Be]&&Be<re);me.match_length=z-(re-Be),me.match_length>me.lookahead&&(me.match_length=me.lookahead)}if(me.match_length>=D?(_e=o._tr_tally(me,1,me.match_length-D),me.lookahead-=me.match_length,me.strstart+=me.match_length,me.match_length=0):(_e=o._tr_tally(me,0,me.window[me.strstart]),me.lookahead--,me.strstart++),_e&&(M(me,!1),me.strm.avail_out===0))return w}return me.insert=0,be===d?(M(me,!0),me.strm.avail_out===0?F:P):me.last_lit&&(M(me,!1),me.strm.avail_out===0)?w:A}(J,ne):s[J.level].func(J,ne);if(ue!==F&&ue!==P||(J.status=666),ue===w||ue===F)return V.avail_out===0&&(J.last_flush=-1),h;if(ue===A&&(ne===1?o._tr_align(J):ne!==5&&(o._tr_stored_block(J,0,0,!1),ne===3&&(I(J.head),J.lookahead===0&&(J.strstart=0,J.block_start=0,J.insert=0))),C(V),V.avail_out===0))return J.last_flush=-1,h}return ne!==d?h:J.wrap<=0?1:(J.wrap===2?(L(J,255&V.adler),L(J,V.adler>>8&255),L(J,V.adler>>16&255),L(J,V.adler>>24&255),L(J,255&V.total_in),L(J,V.total_in>>8&255),L(J,V.total_in>>16&255),L(J,V.total_in>>24&255)):(N(J,V.adler>>>16),N(J,65535&V.adler)),C(V),0<J.wrap&&(J.wrap=-J.wrap),J.pending!==0?h:1)},i.deflateEnd=function(V){var ne;return V&&V.state?(ne=V.state.status)!==S&&ne!==69&&ne!==73&&ne!==91&&ne!==103&&ne!==T&&ne!==666?O(V,m):(V.state=null,ne===T?O(V,-3):h):m},i.deflateSetDictionary=function(V,ne){var se,J,ee,ie,le,ue,me,be,_e=ne.length;if(!V||!V.state||(ie=(se=V.state).wrap)===2||ie===1&&se.status!==S||se.lookahead)return m;for(ie===1&&(V.adler=c(V.adler,ne,_e,0)),se.wrap=0,_e>=se.w_size&&(ie===0&&(I(se.head),se.strstart=0,se.block_start=0,se.insert=0),be=new a.Buf8(se.w_size),a.arraySet(be,ne,_e-se.w_size,se.w_size,0),ne=be,_e=se.w_size),le=V.avail_in,ue=V.next_in,me=V.input,V.avail_in=_e,V.next_in=0,V.input=ne,W(se);se.lookahead>=D;){for(J=se.strstart,ee=se.lookahead-(D-1);se.ins_h=(se.ins_h<<se.hash_shift^se.window[J+D-1])&se.hash_mask,se.prev[J&se.w_mask]=se.head[se.ins_h],se.head[se.ins_h]=J,J++,--ee;);se.strstart=J,se.lookahead=D-1,W(se)}return se.strstart+=se.lookahead,se.block_start=se.strstart,se.insert=se.lookahead,se.lookahead=0,se.match_length=se.prev_length=D-1,se.match_available=0,V.next_in=ue,V.input=me,V.avail_in=le,se.wrap=ie,h},i.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(r,n,i){n.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(r,n,i){n.exports=function(s,a){var o,c,u,l,f,d,h,m,p,g,v,y,b,_,x,E,k,B,D,z,U,S,T,w,A;o=s.state,c=s.next_in,w=s.input,u=c+(s.avail_in-5),l=s.next_out,A=s.output,f=l-(a-s.avail_out),d=l+(s.avail_out-257),h=o.dmax,m=o.wsize,p=o.whave,g=o.wnext,v=o.window,y=o.hold,b=o.bits,_=o.lencode,x=o.distcode,E=(1<<o.lenbits)-1,k=(1<<o.distbits)-1;e:do{b<15&&(y+=w[c++]<<b,b+=8,y+=w[c++]<<b,b+=8),B=_[y&E];t:for(;;){if(y>>>=D=B>>>24,b-=D,(D=B>>>16&255)===0)A[l++]=65535&B;else{if(!(16&D)){if((64&D)==0){B=_[(65535&B)+(y&(1<<D)-1)];continue t}if(32&D){o.mode=12;break e}s.msg="invalid literal/length code",o.mode=30;break e}z=65535&B,(D&=15)&&(b<D&&(y+=w[c++]<<b,b+=8),z+=y&(1<<D)-1,y>>>=D,b-=D),b<15&&(y+=w[c++]<<b,b+=8,y+=w[c++]<<b,b+=8),B=x[y&k];r:for(;;){if(y>>>=D=B>>>24,b-=D,!(16&(D=B>>>16&255))){if((64&D)==0){B=x[(65535&B)+(y&(1<<D)-1)];continue r}s.msg="invalid distance code",o.mode=30;break e}if(U=65535&B,b<(D&=15)&&(y+=w[c++]<<b,(b+=8)<D&&(y+=w[c++]<<b,b+=8)),h<(U+=y&(1<<D)-1)){s.msg="invalid distance too far back",o.mode=30;break e}if(y>>>=D,b-=D,(D=l-f)<U){if(p<(D=U-D)&&o.sane){s.msg="invalid distance too far back",o.mode=30;break e}if(T=v,(S=0)===g){if(S+=m-D,D<z){for(z-=D;A[l++]=v[S++],--D;);S=l-U,T=A}}else if(g<D){if(S+=m+g-D,(D-=g)<z){for(z-=D;A[l++]=v[S++],--D;);if(S=0,g<z){for(z-=D=g;A[l++]=v[S++],--D;);S=l-U,T=A}}}else if(S+=g-D,D<z){for(z-=D;A[l++]=v[S++],--D;);S=l-U,T=A}for(;2<z;)A[l++]=T[S++],A[l++]=T[S++],A[l++]=T[S++],z-=3;z&&(A[l++]=T[S++],1<z&&(A[l++]=T[S++]))}else{for(S=l-U;A[l++]=A[S++],A[l++]=A[S++],A[l++]=A[S++],2<(z-=3););z&&(A[l++]=A[S++],1<z&&(A[l++]=A[S++]))}break}}break}}while(c<u&&l<d);c-=z=b>>3,y&=(1<<(b-=z<<3))-1,s.next_in=c,s.next_out=l,s.avail_in=c<u?u-c+5:5-(c-u),s.avail_out=l<d?d-l+257:257-(l-d),o.hold=y,o.bits=b}},{}],49:[function(r,n,i){var s=r("../utils/common"),a=r("./adler32"),o=r("./crc32"),c=r("./inffast"),u=r("./inftrees"),l=1,f=2,d=0,h=-2,m=1,p=852,g=592;function v(S){return(S>>>24&255)+(S>>>8&65280)+((65280&S)<<8)+((255&S)<<24)}function y(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new s.Buf16(320),this.work=new s.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function b(S){var T;return S&&S.state?(T=S.state,S.total_in=S.total_out=T.total=0,S.msg="",T.wrap&&(S.adler=1&T.wrap),T.mode=m,T.last=0,T.havedict=0,T.dmax=32768,T.head=null,T.hold=0,T.bits=0,T.lencode=T.lendyn=new s.Buf32(p),T.distcode=T.distdyn=new s.Buf32(g),T.sane=1,T.back=-1,d):h}function _(S){var T;return S&&S.state?((T=S.state).wsize=0,T.whave=0,T.wnext=0,b(S)):h}function x(S,T){var w,A;return S&&S.state?(A=S.state,T<0?(w=0,T=-T):(w=1+(T>>4),T<48&&(T&=15)),T&&(T<8||15<T)?h:(A.window!==null&&A.wbits!==T&&(A.window=null),A.wrap=w,A.wbits=T,_(S))):h}function E(S,T){var w,A;return S?(A=new y,(S.state=A).window=null,(w=x(S,T))!==d&&(S.state=null),w):h}var k,B,D=!0;function z(S){if(D){var T;for(k=new s.Buf32(512),B=new s.Buf32(32),T=0;T<144;)S.lens[T++]=8;for(;T<256;)S.lens[T++]=9;for(;T<280;)S.lens[T++]=7;for(;T<288;)S.lens[T++]=8;for(u(l,S.lens,0,288,k,0,S.work,{bits:9}),T=0;T<32;)S.lens[T++]=5;u(f,S.lens,0,32,B,0,S.work,{bits:5}),D=!1}S.lencode=k,S.lenbits=9,S.distcode=B,S.distbits=5}function U(S,T,w,A){var F,P=S.state;return P.window===null&&(P.wsize=1<<P.wbits,P.wnext=0,P.whave=0,P.window=new s.Buf8(P.wsize)),A>=P.wsize?(s.arraySet(P.window,T,w-P.wsize,P.wsize,0),P.wnext=0,P.whave=P.wsize):(A<(F=P.wsize-P.wnext)&&(F=A),s.arraySet(P.window,T,w-A,F,P.wnext),(A-=F)?(s.arraySet(P.window,T,w-A,A,0),P.wnext=A,P.whave=P.wsize):(P.wnext+=F,P.wnext===P.wsize&&(P.wnext=0),P.whave<P.wsize&&(P.whave+=F))),0}i.inflateReset=_,i.inflateReset2=x,i.inflateResetKeep=b,i.inflateInit=function(S){return E(S,15)},i.inflateInit2=E,i.inflate=function(S,T){var w,A,F,P,O,R,I,C,M,L,N,H,W,q,G,Y,te,Q,j,Z,V,ne,se,J,ee=0,ie=new s.Buf8(4),le=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!S||!S.state||!S.output||!S.input&&S.avail_in!==0)return h;(w=S.state).mode===12&&(w.mode=13),O=S.next_out,F=S.output,I=S.avail_out,P=S.next_in,A=S.input,R=S.avail_in,C=w.hold,M=w.bits,L=R,N=I,ne=d;e:for(;;)switch(w.mode){case m:if(w.wrap===0){w.mode=13;break}for(;M<16;){if(R===0)break e;R--,C+=A[P++]<<M,M+=8}if(2&w.wrap&&C===35615){ie[w.check=0]=255&C,ie[1]=C>>>8&255,w.check=o(w.check,ie,2,0),M=C=0,w.mode=2;break}if(w.flags=0,w.head&&(w.head.done=!1),!(1&w.wrap)||(((255&C)<<8)+(C>>8))%31){S.msg="incorrect header check",w.mode=30;break}if((15&C)!=8){S.msg="unknown compression method",w.mode=30;break}if(M-=4,V=8+(15&(C>>>=4)),w.wbits===0)w.wbits=V;else if(V>w.wbits){S.msg="invalid window size",w.mode=30;break}w.dmax=1<<V,S.adler=w.check=1,w.mode=512&C?10:12,M=C=0;break;case 2:for(;M<16;){if(R===0)break e;R--,C+=A[P++]<<M,M+=8}if(w.flags=C,(255&w.flags)!=8){S.msg="unknown compression method",w.mode=30;break}if(57344&w.flags){S.msg="unknown header flags set",w.mode=30;break}w.head&&(w.head.text=C>>8&1),512&w.flags&&(ie[0]=255&C,ie[1]=C>>>8&255,w.check=o(w.check,ie,2,0)),M=C=0,w.mode=3;case 3:for(;M<32;){if(R===0)break e;R--,C+=A[P++]<<M,M+=8}w.head&&(w.head.time=C),512&w.flags&&(ie[0]=255&C,ie[1]=C>>>8&255,ie[2]=C>>>16&255,ie[3]=C>>>24&255,w.check=o(w.check,ie,4,0)),M=C=0,w.mode=4;case 4:for(;M<16;){if(R===0)break e;R--,C+=A[P++]<<M,M+=8}w.head&&(w.head.xflags=255&C,w.head.os=C>>8),512&w.flags&&(ie[0]=255&C,ie[1]=C>>>8&255,w.check=o(w.check,ie,2,0)),M=C=0,w.mode=5;case 5:if(1024&w.flags){for(;M<16;){if(R===0)break e;R--,C+=A[P++]<<M,M+=8}w.length=C,w.head&&(w.head.extra_len=C),512&w.flags&&(ie[0]=255&C,ie[1]=C>>>8&255,w.check=o(w.check,ie,2,0)),M=C=0}else w.head&&(w.head.extra=null);w.mode=6;case 6:if(1024&w.flags&&(R<(H=w.length)&&(H=R),H&&(w.head&&(V=w.head.extra_len-w.length,w.head.extra||(w.head.extra=new Array(w.head.extra_len)),s.arraySet(w.head.extra,A,P,H,V)),512&w.flags&&(w.check=o(w.check,A,H,P)),R-=H,P+=H,w.length-=H),w.length))break e;w.length=0,w.mode=7;case 7:if(2048&w.flags){if(R===0)break e;for(H=0;V=A[P+H++],w.head&&V&&w.length<65536&&(w.head.name+=String.fromCharCode(V)),V&&H<R;);if(512&w.flags&&(w.check=o(w.check,A,H,P)),R-=H,P+=H,V)break e}else w.head&&(w.head.name=null);w.length=0,w.mode=8;case 8:if(4096&w.flags){if(R===0)break e;for(H=0;V=A[P+H++],w.head&&V&&w.length<65536&&(w.head.comment+=String.fromCharCode(V)),V&&H<R;);if(512&w.flags&&(w.check=o(w.check,A,H,P)),R-=H,P+=H,V)break e}else w.head&&(w.head.comment=null);w.mode=9;case 9:if(512&w.flags){for(;M<16;){if(R===0)break e;R--,C+=A[P++]<<M,M+=8}if(C!==(65535&w.check)){S.msg="header crc mismatch",w.mode=30;break}M=C=0}w.head&&(w.head.hcrc=w.flags>>9&1,w.head.done=!0),S.adler=w.check=0,w.mode=12;break;case 10:for(;M<32;){if(R===0)break e;R--,C+=A[P++]<<M,M+=8}S.adler=w.check=v(C),M=C=0,w.mode=11;case 11:if(w.havedict===0)return S.next_out=O,S.avail_out=I,S.next_in=P,S.avail_in=R,w.hold=C,w.bits=M,2;S.adler=w.check=1,w.mode=12;case 12:if(T===5||T===6)break e;case 13:if(w.last){C>>>=7&M,M-=7&M,w.mode=27;break}for(;M<3;){if(R===0)break e;R--,C+=A[P++]<<M,M+=8}switch(w.last=1&C,M-=1,3&(C>>>=1)){case 0:w.mode=14;break;case 1:if(z(w),w.mode=20,T!==6)break;C>>>=2,M-=2;break e;case 2:w.mode=17;break;case 3:S.msg="invalid block type",w.mode=30}C>>>=2,M-=2;break;case 14:for(C>>>=7&M,M-=7&M;M<32;){if(R===0)break e;R--,C+=A[P++]<<M,M+=8}if((65535&C)!=(C>>>16^65535)){S.msg="invalid stored block lengths",w.mode=30;break}if(w.length=65535&C,M=C=0,w.mode=15,T===6)break e;case 15:w.mode=16;case 16:if(H=w.length){if(R<H&&(H=R),I<H&&(H=I),H===0)break e;s.arraySet(F,A,P,H,O),R-=H,P+=H,I-=H,O+=H,w.length-=H;break}w.mode=12;break;case 17:for(;M<14;){if(R===0)break e;R--,C+=A[P++]<<M,M+=8}if(w.nlen=257+(31&C),C>>>=5,M-=5,w.ndist=1+(31&C),C>>>=5,M-=5,w.ncode=4+(15&C),C>>>=4,M-=4,286<w.nlen||30<w.ndist){S.msg="too many length or distance symbols",w.mode=30;break}w.have=0,w.mode=18;case 18:for(;w.have<w.ncode;){for(;M<3;){if(R===0)break e;R--,C+=A[P++]<<M,M+=8}w.lens[le[w.have++]]=7&C,C>>>=3,M-=3}for(;w.have<19;)w.lens[le[w.have++]]=0;if(w.lencode=w.lendyn,w.lenbits=7,se={bits:w.lenbits},ne=u(0,w.lens,0,19,w.lencode,0,w.work,se),w.lenbits=se.bits,ne){S.msg="invalid code lengths set",w.mode=30;break}w.have=0,w.mode=19;case 19:for(;w.have<w.nlen+w.ndist;){for(;Y=(ee=w.lencode[C&(1<<w.lenbits)-1])>>>16&255,te=65535&ee,!((G=ee>>>24)<=M);){if(R===0)break e;R--,C+=A[P++]<<M,M+=8}if(te<16)C>>>=G,M-=G,w.lens[w.have++]=te;else{if(te===16){for(J=G+2;M<J;){if(R===0)break e;R--,C+=A[P++]<<M,M+=8}if(C>>>=G,M-=G,w.have===0){S.msg="invalid bit length repeat",w.mode=30;break}V=w.lens[w.have-1],H=3+(3&C),C>>>=2,M-=2}else if(te===17){for(J=G+3;M<J;){if(R===0)break e;R--,C+=A[P++]<<M,M+=8}M-=G,V=0,H=3+(7&(C>>>=G)),C>>>=3,M-=3}else{for(J=G+7;M<J;){if(R===0)break e;R--,C+=A[P++]<<M,M+=8}M-=G,V=0,H=11+(127&(C>>>=G)),C>>>=7,M-=7}if(w.have+H>w.nlen+w.ndist){S.msg="invalid bit length repeat",w.mode=30;break}for(;H--;)w.lens[w.have++]=V}}if(w.mode===30)break;if(w.lens[256]===0){S.msg="invalid code -- missing end-of-block",w.mode=30;break}if(w.lenbits=9,se={bits:w.lenbits},ne=u(l,w.lens,0,w.nlen,w.lencode,0,w.work,se),w.lenbits=se.bits,ne){S.msg="invalid literal/lengths set",w.mode=30;break}if(w.distbits=6,w.distcode=w.distdyn,se={bits:w.distbits},ne=u(f,w.lens,w.nlen,w.ndist,w.distcode,0,w.work,se),w.distbits=se.bits,ne){S.msg="invalid distances set",w.mode=30;break}if(w.mode=20,T===6)break e;case 20:w.mode=21;case 21:if(6<=R&&258<=I){S.next_out=O,S.avail_out=I,S.next_in=P,S.avail_in=R,w.hold=C,w.bits=M,c(S,N),O=S.next_out,F=S.output,I=S.avail_out,P=S.next_in,A=S.input,R=S.avail_in,C=w.hold,M=w.bits,w.mode===12&&(w.back=-1);break}for(w.back=0;Y=(ee=w.lencode[C&(1<<w.lenbits)-1])>>>16&255,te=65535&ee,!((G=ee>>>24)<=M);){if(R===0)break e;R--,C+=A[P++]<<M,M+=8}if(Y&&(240&Y)==0){for(Q=G,j=Y,Z=te;Y=(ee=w.lencode[Z+((C&(1<<Q+j)-1)>>Q)])>>>16&255,te=65535&ee,!(Q+(G=ee>>>24)<=M);){if(R===0)break e;R--,C+=A[P++]<<M,M+=8}C>>>=Q,M-=Q,w.back+=Q}if(C>>>=G,M-=G,w.back+=G,w.length=te,Y===0){w.mode=26;break}if(32&Y){w.back=-1,w.mode=12;break}if(64&Y){S.msg="invalid literal/length code",w.mode=30;break}w.extra=15&Y,w.mode=22;case 22:if(w.extra){for(J=w.extra;M<J;){if(R===0)break e;R--,C+=A[P++]<<M,M+=8}w.length+=C&(1<<w.extra)-1,C>>>=w.extra,M-=w.extra,w.back+=w.extra}w.was=w.length,w.mode=23;case 23:for(;Y=(ee=w.distcode[C&(1<<w.distbits)-1])>>>16&255,te=65535&ee,!((G=ee>>>24)<=M);){if(R===0)break e;R--,C+=A[P++]<<M,M+=8}if((240&Y)==0){for(Q=G,j=Y,Z=te;Y=(ee=w.distcode[Z+((C&(1<<Q+j)-1)>>Q)])>>>16&255,te=65535&ee,!(Q+(G=ee>>>24)<=M);){if(R===0)break e;R--,C+=A[P++]<<M,M+=8}C>>>=Q,M-=Q,w.back+=Q}if(C>>>=G,M-=G,w.back+=G,64&Y){S.msg="invalid distance code",w.mode=30;break}w.offset=te,w.extra=15&Y,w.mode=24;case 24:if(w.extra){for(J=w.extra;M<J;){if(R===0)break e;R--,C+=A[P++]<<M,M+=8}w.offset+=C&(1<<w.extra)-1,C>>>=w.extra,M-=w.extra,w.back+=w.extra}if(w.offset>w.dmax){S.msg="invalid distance too far back",w.mode=30;break}w.mode=25;case 25:if(I===0)break e;if(H=N-I,w.offset>H){if((H=w.offset-H)>w.whave&&w.sane){S.msg="invalid distance too far back",w.mode=30;break}W=H>w.wnext?(H-=w.wnext,w.wsize-H):w.wnext-H,H>w.length&&(H=w.length),q=w.window}else q=F,W=O-w.offset,H=w.length;for(I<H&&(H=I),I-=H,w.length-=H;F[O++]=q[W++],--H;);w.length===0&&(w.mode=21);break;case 26:if(I===0)break e;F[O++]=w.length,I--,w.mode=21;break;case 27:if(w.wrap){for(;M<32;){if(R===0)break e;R--,C|=A[P++]<<M,M+=8}if(N-=I,S.total_out+=N,w.total+=N,N&&(S.adler=w.check=w.flags?o(w.check,F,N,O-N):a(w.check,F,N,O-N)),N=I,(w.flags?C:v(C))!==w.check){S.msg="incorrect data check",w.mode=30;break}M=C=0}w.mode=28;case 28:if(w.wrap&&w.flags){for(;M<32;){if(R===0)break e;R--,C+=A[P++]<<M,M+=8}if(C!==(4294967295&w.total)){S.msg="incorrect length check",w.mode=30;break}M=C=0}w.mode=29;case 29:ne=1;break e;case 30:ne=-3;break e;case 31:return-4;case 32:default:return h}return S.next_out=O,S.avail_out=I,S.next_in=P,S.avail_in=R,w.hold=C,w.bits=M,(w.wsize||N!==S.avail_out&&w.mode<30&&(w.mode<27||T!==4))&&U(S,S.output,S.next_out,N-S.avail_out)?(w.mode=31,-4):(L-=S.avail_in,N-=S.avail_out,S.total_in+=L,S.total_out+=N,w.total+=N,w.wrap&&N&&(S.adler=w.check=w.flags?o(w.check,F,N,S.next_out-N):a(w.check,F,N,S.next_out-N)),S.data_type=w.bits+(w.last?64:0)+(w.mode===12?128:0)+(w.mode===20||w.mode===15?256:0),(L==0&&N===0||T===4)&&ne===d&&(ne=-5),ne)},i.inflateEnd=function(S){if(!S||!S.state)return h;var T=S.state;return T.window&&(T.window=null),S.state=null,d},i.inflateGetHeader=function(S,T){var w;return S&&S.state?(2&(w=S.state).wrap)==0?h:((w.head=T).done=!1,d):h},i.inflateSetDictionary=function(S,T){var w,A=T.length;return S&&S.state?(w=S.state).wrap!==0&&w.mode!==11?h:w.mode===11&&a(1,T,A,0)!==w.check?-3:U(S,T,A,A)?(w.mode=31,-4):(w.havedict=1,d):h},i.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(r,n,i){var s=r("../utils/common"),a=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],c=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],u=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];n.exports=function(l,f,d,h,m,p,g,v){var y,b,_,x,E,k,B,D,z,U=v.bits,S=0,T=0,w=0,A=0,F=0,P=0,O=0,R=0,I=0,C=0,M=null,L=0,N=new s.Buf16(16),H=new s.Buf16(16),W=null,q=0;for(S=0;S<=15;S++)N[S]=0;for(T=0;T<h;T++)N[f[d+T]]++;for(F=U,A=15;1<=A&&N[A]===0;A--);if(A<F&&(F=A),A===0)return m[p++]=20971520,m[p++]=20971520,v.bits=1,0;for(w=1;w<A&&N[w]===0;w++);for(F<w&&(F=w),S=R=1;S<=15;S++)if(R<<=1,(R-=N[S])<0)return-1;if(0<R&&(l===0||A!==1))return-1;for(H[1]=0,S=1;S<15;S++)H[S+1]=H[S]+N[S];for(T=0;T<h;T++)f[d+T]!==0&&(g[H[f[d+T]]++]=T);if(k=l===0?(M=W=g,19):l===1?(M=a,L-=257,W=o,q-=257,256):(M=c,W=u,-1),S=w,E=p,O=T=C=0,_=-1,x=(I=1<<(P=F))-1,l===1&&852<I||l===2&&592<I)return 1;for(;;){for(B=S-O,z=g[T]<k?(D=0,g[T]):g[T]>k?(D=W[q+g[T]],M[L+g[T]]):(D=96,0),y=1<<S-O,w=b=1<<P;m[E+(C>>O)+(b-=y)]=B<<24|D<<16|z|0,b!==0;);for(y=1<<S-1;C&y;)y>>=1;if(y!==0?(C&=y-1,C+=y):C=0,T++,--N[S]==0){if(S===A)break;S=f[d+g[T]]}if(F<S&&(C&x)!==_){for(O===0&&(O=F),E+=w,R=1<<(P=S-O);P+O<A&&!((R-=N[P+O])<=0);)P++,R<<=1;if(I+=1<<P,l===1&&852<I||l===2&&592<I)return 1;m[_=C&x]=F<<24|P<<16|E-p|0}}return C!==0&&(m[E+C]=S-O<<24|64<<16|0),v.bits=F,0}},{"../utils/common":41}],51:[function(r,n,i){n.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(r,n,i){var s=r("../utils/common"),a=0,o=1;function c(ee){for(var ie=ee.length;0<=--ie;)ee[ie]=0}var u=0,l=29,f=256,d=f+1+l,h=30,m=19,p=2*d+1,g=15,v=16,y=7,b=256,_=16,x=17,E=18,k=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],B=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],D=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],z=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],U=new Array(2*(d+2));c(U);var S=new Array(2*h);c(S);var T=new Array(512);c(T);var w=new Array(256);c(w);var A=new Array(l);c(A);var F,P,O,R=new Array(h);function I(ee,ie,le,ue,me){this.static_tree=ee,this.extra_bits=ie,this.extra_base=le,this.elems=ue,this.max_length=me,this.has_stree=ee&&ee.length}function C(ee,ie){this.dyn_tree=ee,this.max_code=0,this.stat_desc=ie}function M(ee){return ee<256?T[ee]:T[256+(ee>>>7)]}function L(ee,ie){ee.pending_buf[ee.pending++]=255&ie,ee.pending_buf[ee.pending++]=ie>>>8&255}function N(ee,ie,le){ee.bi_valid>v-le?(ee.bi_buf|=ie<<ee.bi_valid&65535,L(ee,ee.bi_buf),ee.bi_buf=ie>>v-ee.bi_valid,ee.bi_valid+=le-v):(ee.bi_buf|=ie<<ee.bi_valid&65535,ee.bi_valid+=le)}function H(ee,ie,le){N(ee,le[2*ie],le[2*ie+1])}function W(ee,ie){for(var le=0;le|=1&ee,ee>>>=1,le<<=1,0<--ie;);return le>>>1}function q(ee,ie,le){var ue,me,be=new Array(g+1),_e=0;for(ue=1;ue<=g;ue++)be[ue]=_e=_e+le[ue-1]<<1;for(me=0;me<=ie;me++){var xe=ee[2*me+1];xe!==0&&(ee[2*me]=W(be[xe]++,xe))}}function G(ee){var ie;for(ie=0;ie<d;ie++)ee.dyn_ltree[2*ie]=0;for(ie=0;ie<h;ie++)ee.dyn_dtree[2*ie]=0;for(ie=0;ie<m;ie++)ee.bl_tree[2*ie]=0;ee.dyn_ltree[2*b]=1,ee.opt_len=ee.static_len=0,ee.last_lit=ee.matches=0}function Y(ee){8<ee.bi_valid?L(ee,ee.bi_buf):0<ee.bi_valid&&(ee.pending_buf[ee.pending++]=ee.bi_buf),ee.bi_buf=0,ee.bi_valid=0}function te(ee,ie,le,ue){var me=2*ie,be=2*le;return ee[me]<ee[be]||ee[me]===ee[be]&&ue[ie]<=ue[le]}function Q(ee,ie,le){for(var ue=ee.heap[le],me=le<<1;me<=ee.heap_len&&(me<ee.heap_len&&te(ie,ee.heap[me+1],ee.heap[me],ee.depth)&&me++,!te(ie,ue,ee.heap[me],ee.depth));)ee.heap[le]=ee.heap[me],le=me,me<<=1;ee.heap[le]=ue}function j(ee,ie,le){var ue,me,be,_e,xe=0;if(ee.last_lit!==0)for(;ue=ee.pending_buf[ee.d_buf+2*xe]<<8|ee.pending_buf[ee.d_buf+2*xe+1],me=ee.pending_buf[ee.l_buf+xe],xe++,ue===0?H(ee,me,ie):(H(ee,(be=w[me])+f+1,ie),(_e=k[be])!==0&&N(ee,me-=A[be],_e),H(ee,be=M(--ue),le),(_e=B[be])!==0&&N(ee,ue-=R[be],_e)),xe<ee.last_lit;);H(ee,b,ie)}function Z(ee,ie){var le,ue,me,be=ie.dyn_tree,_e=ie.stat_desc.static_tree,xe=ie.stat_desc.has_stree,Be=ie.stat_desc.elems,re=-1;for(ee.heap_len=0,ee.heap_max=p,le=0;le<Be;le++)be[2*le]!==0?(ee.heap[++ee.heap_len]=re=le,ee.depth[le]=0):be[2*le+1]=0;for(;ee.heap_len<2;)be[2*(me=ee.heap[++ee.heap_len]=re<2?++re:0)]=1,ee.depth[me]=0,ee.opt_len--,xe&&(ee.static_len-=_e[2*me+1]);for(ie.max_code=re,le=ee.heap_len>>1;1<=le;le--)Q(ee,be,le);for(me=Be;le=ee.heap[1],ee.heap[1]=ee.heap[ee.heap_len--],Q(ee,be,1),ue=ee.heap[1],ee.heap[--ee.heap_max]=le,ee.heap[--ee.heap_max]=ue,be[2*me]=be[2*le]+be[2*ue],ee.depth[me]=(ee.depth[le]>=ee.depth[ue]?ee.depth[le]:ee.depth[ue])+1,be[2*le+1]=be[2*ue+1]=me,ee.heap[1]=me++,Q(ee,be,1),2<=ee.heap_len;);ee.heap[--ee.heap_max]=ee.heap[1],function(K,X){var ce,ye,Ee,Se,rt,ct,we=X.dyn_tree,ke=X.max_code,Ye=X.stat_desc.static_tree,ot=X.stat_desc.has_stree,xt=X.stat_desc.extra_bits,ut=X.stat_desc.extra_base,gt=X.stat_desc.max_length,er=0;for(Se=0;Se<=g;Se++)K.bl_count[Se]=0;for(we[2*K.heap[K.heap_max]+1]=0,ce=K.heap_max+1;ce<p;ce++)gt<(Se=we[2*we[2*(ye=K.heap[ce])+1]+1]+1)&&(Se=gt,er++),we[2*ye+1]=Se,ke<ye||(K.bl_count[Se]++,rt=0,ut<=ye&&(rt=xt[ye-ut]),ct=we[2*ye],K.opt_len+=ct*(Se+rt),ot&&(K.static_len+=ct*(Ye[2*ye+1]+rt)));if(er!==0){do{for(Se=gt-1;K.bl_count[Se]===0;)Se--;K.bl_count[Se]--,K.bl_count[Se+1]+=2,K.bl_count[gt]--,er-=2}while(0<er);for(Se=gt;Se!==0;Se--)for(ye=K.bl_count[Se];ye!==0;)ke<(Ee=K.heap[--ce])||(we[2*Ee+1]!==Se&&(K.opt_len+=(Se-we[2*Ee+1])*we[2*Ee],we[2*Ee+1]=Se),ye--)}}(ee,ie),q(be,re,ee.bl_count)}function V(ee,ie,le){var ue,me,be=-1,_e=ie[1],xe=0,Be=7,re=4;for(_e===0&&(Be=138,re=3),ie[2*(le+1)+1]=65535,ue=0;ue<=le;ue++)me=_e,_e=ie[2*(ue+1)+1],++xe<Be&&me===_e||(xe<re?ee.bl_tree[2*me]+=xe:me!==0?(me!==be&&ee.bl_tree[2*me]++,ee.bl_tree[2*_]++):xe<=10?ee.bl_tree[2*x]++:ee.bl_tree[2*E]++,be=me,re=(xe=0)===_e?(Be=138,3):me===_e?(Be=6,3):(Be=7,4))}function ne(ee,ie,le){var ue,me,be=-1,_e=ie[1],xe=0,Be=7,re=4;for(_e===0&&(Be=138,re=3),ue=0;ue<=le;ue++)if(me=_e,_e=ie[2*(ue+1)+1],!(++xe<Be&&me===_e)){if(xe<re)for(;H(ee,me,ee.bl_tree),--xe!=0;);else me!==0?(me!==be&&(H(ee,me,ee.bl_tree),xe--),H(ee,_,ee.bl_tree),N(ee,xe-3,2)):xe<=10?(H(ee,x,ee.bl_tree),N(ee,xe-3,3)):(H(ee,E,ee.bl_tree),N(ee,xe-11,7));be=me,re=(xe=0)===_e?(Be=138,3):me===_e?(Be=6,3):(Be=7,4)}}c(R);var se=!1;function J(ee,ie,le,ue){N(ee,(u<<1)+(ue?1:0),3),function(me,be,_e,xe){Y(me),L(me,_e),L(me,~_e),s.arraySet(me.pending_buf,me.window,be,_e,me.pending),me.pending+=_e}(ee,ie,le)}i._tr_init=function(ee){se||(function(){var ie,le,ue,me,be,_e=new Array(g+1);for(me=ue=0;me<l-1;me++)for(A[me]=ue,ie=0;ie<1<<k[me];ie++)w[ue++]=me;for(w[ue-1]=me,me=be=0;me<16;me++)for(R[me]=be,ie=0;ie<1<<B[me];ie++)T[be++]=me;for(be>>=7;me<h;me++)for(R[me]=be<<7,ie=0;ie<1<<B[me]-7;ie++)T[256+be++]=me;for(le=0;le<=g;le++)_e[le]=0;for(ie=0;ie<=143;)U[2*ie+1]=8,ie++,_e[8]++;for(;ie<=255;)U[2*ie+1]=9,ie++,_e[9]++;for(;ie<=279;)U[2*ie+1]=7,ie++,_e[7]++;for(;ie<=287;)U[2*ie+1]=8,ie++,_e[8]++;for(q(U,d+1,_e),ie=0;ie<h;ie++)S[2*ie+1]=5,S[2*ie]=W(ie,5);F=new I(U,k,f+1,d,g),P=new I(S,B,0,h,g),O=new I(new Array(0),D,0,m,y)}(),se=!0),ee.l_desc=new C(ee.dyn_ltree,F),ee.d_desc=new C(ee.dyn_dtree,P),ee.bl_desc=new C(ee.bl_tree,O),ee.bi_buf=0,ee.bi_valid=0,G(ee)},i._tr_stored_block=J,i._tr_flush_block=function(ee,ie,le,ue){var me,be,_e=0;0<ee.level?(ee.strm.data_type===2&&(ee.strm.data_type=function(xe){var Be,re=4093624447;for(Be=0;Be<=31;Be++,re>>>=1)if(1&re&&xe.dyn_ltree[2*Be]!==0)return a;if(xe.dyn_ltree[18]!==0||xe.dyn_ltree[20]!==0||xe.dyn_ltree[26]!==0)return o;for(Be=32;Be<f;Be++)if(xe.dyn_ltree[2*Be]!==0)return o;return a}(ee)),Z(ee,ee.l_desc),Z(ee,ee.d_desc),_e=function(xe){var Be;for(V(xe,xe.dyn_ltree,xe.l_desc.max_code),V(xe,xe.dyn_dtree,xe.d_desc.max_code),Z(xe,xe.bl_desc),Be=m-1;3<=Be&&xe.bl_tree[2*z[Be]+1]===0;Be--);return xe.opt_len+=3*(Be+1)+5+5+4,Be}(ee),me=ee.opt_len+3+7>>>3,(be=ee.static_len+3+7>>>3)<=me&&(me=be)):me=be=le+5,le+4<=me&&ie!==-1?J(ee,ie,le,ue):ee.strategy===4||be===me?(N(ee,2+(ue?1:0),3),j(ee,U,S)):(N(ee,4+(ue?1:0),3),function(xe,Be,re,K){var X;for(N(xe,Be-257,5),N(xe,re-1,5),N(xe,K-4,4),X=0;X<K;X++)N(xe,xe.bl_tree[2*z[X]+1],3);ne(xe,xe.dyn_ltree,Be-1),ne(xe,xe.dyn_dtree,re-1)}(ee,ee.l_desc.max_code+1,ee.d_desc.max_code+1,_e+1),j(ee,ee.dyn_ltree,ee.dyn_dtree)),G(ee),ue&&Y(ee)},i._tr_tally=function(ee,ie,le){return ee.pending_buf[ee.d_buf+2*ee.last_lit]=ie>>>8&255,ee.pending_buf[ee.d_buf+2*ee.last_lit+1]=255&ie,ee.pending_buf[ee.l_buf+ee.last_lit]=255&le,ee.last_lit++,ie===0?ee.dyn_ltree[2*le]++:(ee.matches++,ie--,ee.dyn_ltree[2*(w[le]+f+1)]++,ee.dyn_dtree[2*M(ie)]++),ee.last_lit===ee.lit_bufsize-1},i._tr_align=function(ee){N(ee,2,3),H(ee,b,U),function(ie){ie.bi_valid===16?(L(ie,ie.bi_buf),ie.bi_buf=0,ie.bi_valid=0):8<=ie.bi_valid&&(ie.pending_buf[ie.pending++]=255&ie.bi_buf,ie.bi_buf>>=8,ie.bi_valid-=8)}(ee)}},{"../utils/common":41}],53:[function(r,n,i){n.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(r,n,i){(function(s){(function(a,o){if(!a.setImmediate){var c,u,l,f,d=1,h={},m=!1,p=a.document,g=Object.getPrototypeOf&&Object.getPrototypeOf(a);g=g&&g.setTimeout?g:a,c={}.toString.call(a.process)==="[object process]"?function(_){fn.nextTick(function(){y(_)})}:function(){if(a.postMessage&&!a.importScripts){var _=!0,x=a.onmessage;return a.onmessage=function(){_=!1},a.postMessage("","*"),a.onmessage=x,_}}()?(f="setImmediate$"+Math.random()+"$",a.addEventListener?a.addEventListener("message",b,!1):a.attachEvent("onmessage",b),function(_){a.postMessage(f+_,"*")}):a.MessageChannel?((l=new MessageChannel).port1.onmessage=function(_){y(_.data)},function(_){l.port2.postMessage(_)}):p&&"onreadystatechange"in p.createElement("script")?(u=p.documentElement,function(_){var x=p.createElement("script");x.onreadystatechange=function(){y(_),x.onreadystatechange=null,u.removeChild(x),x=null},u.appendChild(x)}):function(_){setTimeout(y,0,_)},g.setImmediate=function(_){typeof _!="function"&&(_=new Function(""+_));for(var x=new Array(arguments.length-1),E=0;E<x.length;E++)x[E]=arguments[E+1];var k={callback:_,args:x};return h[d]=k,c(d),d++},g.clearImmediate=v}function v(_){delete h[_]}function y(_){if(m)setTimeout(y,0,_);else{var x=h[_];if(x){m=!0;try{(function(E){var k=E.callback,B=E.args;switch(B.length){case 0:k();break;case 1:k(B[0]);break;case 2:k(B[0],B[1]);break;case 3:k(B[0],B[1],B[2]);break;default:k.apply(o,B)}})(x)}finally{v(_),m=!1}}}}function b(_){_.source===a&&typeof _.data=="string"&&_.data.indexOf(f)===0&&y(+_.data.slice(f.length))}})(typeof self>"u"?s===void 0?this:s:self)}).call(this,typeof Ut<"u"?Ut:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})}(J_)),J_.exports}var e3e=Qwe();const rC=In(e3e),RR=(()=>{if(typeof self>"u")return!1;if("top"in self&&self!==top)try{top.window.document._=0}catch{return!1}return"showOpenFilePicker"in self})();RR?Promise.resolve().then(function(){return s3e}):Promise.resolve().then(function(){return f3e});RR?Promise.resolve().then(function(){return o3e}):Promise.resolve().then(function(){return h3e});const t3e=RR?Promise.resolve().then(function(){return l3e}):Promise.resolve().then(function(){return m3e});async function r3e(...t){return(await t3e).default(...t)}const n3e=async t=>{const e=await t.getFile();return e.handle=t,e};var i3e=async(t=[{}])=>{Array.isArray(t)||(t=[t]);const e=[];t.forEach((i,s)=>{e[s]={description:i.description||"Files",accept:{}},i.mimeTypes?i.mimeTypes.map(a=>{e[s].accept[a]=i.extensions||[]}):e[s].accept["*/*"]=i.extensions||[]});const r=await window.showOpenFilePicker({id:t[0].id,startIn:t[0].startIn,types:e,multiple:t[0].multiple||!1,excludeAcceptAllOption:t[0].excludeAcceptAllOption||!1}),n=await Promise.all(r.map(n3e));return t[0].multiple?n:n[0]},s3e={__proto__:null,default:i3e};function o3(t){function e(r){if(Object(r)!==r)return Promise.reject(new TypeError(r+" is not an object."));var n=r.done;return Promise.resolve(r.value).then(function(i){return{value:i,done:n}})}return o3=function(r){this.s=r,this.n=r.next},o3.prototype={s:null,n:null,next:function(){return e(this.n.apply(this.s,arguments))},return:function(r){var n=this.s.return;return n===void 0?Promise.resolve({value:r,done:!0}):e(n.apply(this.s,arguments))},throw:function(r){var n=this.s.return;return n===void 0?Promise.reject(r):e(n.apply(this.s,arguments))}},new o3(t)}const wte=async(t,e,r=t.name,n)=>{const i=[],s=[];var a,o=!1,c=!1;try{for(var u,l=function(f){var d,h,m,p=2;for(typeof Symbol<"u"&&(h=Symbol.asyncIterator,m=Symbol.iterator);p--;){if(h&&(d=f[h])!=null)return d.call(f);if(m&&(d=f[m])!=null)return new o3(d.call(f));h="@@asyncIterator",m="@@iterator"}throw new TypeError("Object is not async iterable")}(t.values());o=!(u=await l.next()).done;o=!1){const f=u.value,d=`${r}/${f.name}`;f.kind==="file"?s.push(f.getFile().then(h=>(h.directoryHandle=t,h.handle=f,Object.defineProperty(h,"webkitRelativePath",{configurable:!0,enumerable:!0,get:()=>d})))):f.kind!=="directory"||!e||n&&n(f)||i.push(wte(f,e,d,n))}}catch(f){c=!0,a=f}finally{try{o&&l.return!=null&&await l.return()}finally{if(c)throw a}}return[...(await Promise.all(i)).flat(),...await Promise.all(s)]};var a3e=async(t={})=>{t.recursive=t.recursive||!1,t.mode=t.mode||"read";const e=await window.showDirectoryPicker({id:t.id,startIn:t.startIn,mode:t.mode});return(await(await e.values()).next()).done?[e]:wte(e,t.recursive,void 0,t.skipDirectory)},o3e={__proto__:null,default:a3e},c3e=async(t,e=[{}],r=null,n=!1,i=null)=>{Array.isArray(e)||(e=[e]),e[0].fileName=e[0].fileName||"Untitled";const s=[];let a=null;if(t instanceof Blob&&t.type?a=t.type:t.headers&&t.headers.get("content-type")&&(a=t.headers.get("content-type")),e.forEach((u,l)=>{s[l]={description:u.description||"Files",accept:{}},u.mimeTypes?(l===0&&a&&u.mimeTypes.push(a),u.mimeTypes.map(f=>{s[l].accept[f]=u.extensions||[]})):a?s[l].accept[a]=u.extensions||[]:s[l].accept["*/*"]=u.extensions||[]}),r)try{await r.getFile()}catch(u){if(r=null,n)throw u}const o=r||await window.showSaveFilePicker({suggestedName:e[0].fileName,id:e[0].id,startIn:e[0].startIn,types:s,excludeAcceptAllOption:e[0].excludeAcceptAllOption||!1});!r&&i&&i(o);const c=await o.createWritable();return"stream"in t?(await t.stream().pipeTo(c),o):"body"in t?(await t.body.pipeTo(c),o):(await c.write(await t),await c.close(),o)},l3e={__proto__:null,default:c3e},u3e=async(t=[{}])=>(Array.isArray(t)||(t=[t]),new Promise((e,r)=>{const n=document.createElement("input");n.type="file";const i=[...t.map(c=>c.mimeTypes||[]),...t.map(c=>c.extensions||[])].join();n.multiple=t[0].multiple||!1,n.accept=i||"",n.style.display="none",document.body.append(n);const s=c=>{typeof a=="function"&&a(),e(c)},a=t[0].legacySetup&&t[0].legacySetup(s,()=>a(r),n),o=()=>{window.removeEventListener("focus",o),n.remove()};n.addEventListener("click",()=>{window.addEventListener("focus",o)}),n.addEventListener("change",()=>{window.removeEventListener("focus",o),n.remove(),s(n.multiple?Array.from(n.files):n.files[0])}),"showPicker"in HTMLInputElement.prototype?n.showPicker():n.click()})),f3e={__proto__:null,default:u3e},d3e=async(t=[{}])=>(Array.isArray(t)||(t=[t]),t[0].recursive=t[0].recursive||!1,new Promise((e,r)=>{const n=document.createElement("input");n.type="file",n.webkitdirectory=!0;const i=a=>{typeof s=="function"&&s(),e(a)},s=t[0].legacySetup&&t[0].legacySetup(i,()=>s(r),n);n.addEventListener("change",()=>{let a=Array.from(n.files);t[0].recursive?t[0].recursive&&t[0].skipDirectory&&(a=a.filter(o=>o.webkitRelativePath.split("/").every(c=>!t[0].skipDirectory({name:c,kind:"directory"})))):a=a.filter(o=>o.webkitRelativePath.split("/").length===2),i(a)}),"showPicker"in HTMLInputElement.prototype?n.showPicker():n.click()})),h3e={__proto__:null,default:d3e},p3e=async(t,e={})=>{Array.isArray(e)&&(e=e[0]);const r=document.createElement("a");let n=t;"body"in t&&(n=await async function(a,o){const c=a.getReader(),u=new ReadableStream({start:d=>async function h(){return c.read().then(({done:m,value:p})=>{if(!m)return d.enqueue(p),h();d.close()})}()}),l=new Response(u),f=await l.blob();return c.releaseLock(),new Blob([f],{type:o})}(t.body,t.headers.get("content-type"))),r.download=e.fileName||"Untitled",r.href=URL.createObjectURL(await n);const i=()=>{typeof s=="function"&&s()},s=e.legacySetup&&e.legacySetup(i,()=>s(),r);return r.addEventListener("click",()=>{setTimeout(()=>URL.revokeObjectURL(r.href),3e4),i()}),r.click(),null},m3e={__proto__:null,default:p3e};function _te(t,e){for(var r=0,n=t.length-1;n>=0;n--){var i=t[n];i==="."?t.splice(n,1):i===".."?(t.splice(n,1),r++):r&&(t.splice(n,1),r--)}if(e)for(;r--;r)t.unshift("..");return t}var g3e=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,OR=function(t){return g3e.exec(t).slice(1)};function Z3(){for(var t="",e=!1,r=arguments.length-1;r>=-1&&!e;r--){var n=r>=0?arguments[r]:"/";if(typeof n!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!n)continue;t=n+"/"+t,e=n.charAt(0)==="/"}return t=_te(MR(t.split("/"),function(i){return!!i}),!e).join("/"),(e?"/":"")+t||"."}function BR(t){var e=DR(t),r=v3e(t,-1)==="/";return t=_te(MR(t.split("/"),function(n){return!!n}),!e).join("/"),!t&&!e&&(t="."),t&&r&&(t+="/"),(e?"/":"")+t}function DR(t){return t.charAt(0)==="/"}function xte(){var t=Array.prototype.slice.call(arguments,0);return BR(MR(t,function(e,r){if(typeof e!="string")throw new TypeError("Arguments to path.join must be strings");return e}).join("/"))}function Ste(t,e){t=Z3(t).substr(1),e=Z3(e).substr(1);function r(u){for(var l=0;l<u.length&&u[l]==="";l++);for(var f=u.length-1;f>=0&&u[f]==="";f--);return l>f?[]:u.slice(l,f-l+1)}for(var n=r(t.split("/")),i=r(e.split("/")),s=Math.min(n.length,i.length),a=s,o=0;o<s;o++)if(n[o]!==i[o]){a=o;break}for(var c=[],o=a;o<n.length;o++)c.push("..");return c=c.concat(i.slice(a)),c.join("/")}var Ete="/",kte=":";function Tte(t){var e=OR(t),r=e[0],n=e[1];return!r&&!n?".":(n&&(n=n.substr(0,n.length-1)),r+n)}function Ate(t,e){var r=OR(t)[2];return e&&r.substr(-1*e.length)===e&&(r=r.substr(0,r.length-e.length)),r}function Cte(t){return OR(t)[3]}const uu={extname:Cte,basename:Ate,dirname:Tte,sep:Ete,delimiter:kte,relative:Ste,join:xte,isAbsolute:DR,normalize:BR,resolve:Z3};function MR(t,e){if(t.filter)return t.filter(e);for(var r=[],n=0;n<t.length;n++)e(t[n],n,t)&&r.push(t[n]);return r}var v3e="ab".substr(-1)==="b"?function(t,e,r){return t.substr(e,r)}:function(t,e,r){return e<0&&(e=t.length+e),t.substr(e,r)};const py=Object.freeze(Object.defineProperty({__proto__:null,basename:Ate,default:uu,delimiter:kte,dirname:Tte,extname:Cte,isAbsolute:DR,join:xte,normalize:BR,relative:Ste,resolve:Z3,sep:Ete},Symbol.toStringTag,{value:"Module"}));var Q_,HF;function y3e(){if(HF)return Q_;HF=1;function t(){return!!(typeof window<"u"&&typeof window.process=="object"&&window.process.type==="renderer"||typeof fn<"u"&&typeof fn.versions=="object"&&fn.versions.electron||typeof navigator=="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent.indexOf("Electron")>=0)}return Q_=t,Q_}var b3e=y3e();const w3e=In(b3e),NR=typeof window=="object"&&typeof document=="object"&&document.nodeType===9,b8=w3e(),J3=NR&&!b8,gi=b8&&!NR,_3e=b8&&NR,vi=typeof globalThis.process<"u"&&typeof globalThis.process.release<"u"&&globalThis.process.release.name==="node"&&!b8,nC=typeof importScripts=="function"&&typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,x3e=new Uint8Array(0);function S3e(t){const e=t.match(/../g);return e!=null?new Uint8Array(e.map(r=>parseInt(r,16))):x3e}function E3e(t,e){if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0}function Lp(t){if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")}function k3e(t){return new TextEncoder().encode(t)}function T3e(t){return new TextDecoder().decode(t)}function A3e(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<t.length;i++){var s=t.charAt(i),a=s.charCodeAt(0);if(r[a]!==255)throw new TypeError(s+" is ambiguous");r[a]=i}var o=t.length,c=t.charAt(0),u=Math.log(o)/Math.log(256),l=Math.log(256)/Math.log(o);function f(m){if(m instanceof Uint8Array||(ArrayBuffer.isView(m)?m=new Uint8Array(m.buffer,m.byteOffset,m.byteLength):Array.isArray(m)&&(m=Uint8Array.from(m))),!(m instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(m.length===0)return"";for(var p=0,g=0,v=0,y=m.length;v!==y&&m[v]===0;)v++,p++;for(var b=(y-v)*l+1>>>0,_=new Uint8Array(b);v!==y;){for(var x=m[v],E=0,k=b-1;(x!==0||E<g)&&k!==-1;k--,E++)x+=256*_[k]>>>0,_[k]=x%o>>>0,x=x/o>>>0;if(x!==0)throw new Error("Non-zero carry");g=E,v++}for(var B=b-g;B!==b&&_[B]===0;)B++;for(var D=c.repeat(p);B<b;++B)D+=t.charAt(_[B]);return D}function d(m){if(typeof m!="string")throw new TypeError("Expected String");if(m.length===0)return new Uint8Array;var p=0;if(m[p]!==" "){for(var g=0,v=0;m[p]===c;)g++,p++;for(var y=(m.length-p)*u+1>>>0,b=new Uint8Array(y);m[p];){var _=r[m.charCodeAt(p)];if(_===255)return;for(var x=0,E=y-1;(_!==0||x<v)&&E!==-1;E--,x++)_+=o*b[E]>>>0,b[E]=_%256>>>0,_=_/256>>>0;if(_!==0)throw new Error("Non-zero carry");v=x,p++}if(m[p]!==" "){for(var k=y-v;k!==y&&b[k]===0;)k++;for(var B=new Uint8Array(g+(y-k)),D=g;k!==y;)B[D++]=b[k++];return B}}}function h(m){var p=d(m);if(p)return p;throw new Error(`Non-${e} character`)}return{encode:f,decodeUnsafe:d,decode:h}}var C3e=A3e,I3e=C3e;let P3e=class{name;prefix;baseEncode;constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},R3e=class{name;prefix;baseDecode;prefixCodePoint;constructor(e,r,n){this.name=e,this.prefix=r;const i=r.codePointAt(0);if(i===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=i,this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return Ite(this,e)}},O3e=class{decoders;constructor(e){this.decoders=e}or(e){return Ite(this,e)}decode(e){const r=e[0],n=this.decoders[r];if(n!=null)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};function Ite(t,e){return new O3e({...t.decoders??{[t.prefix]:t},...e.decoders??{[e.prefix]:e}})}let B3e=class{name;prefix;baseEncode;baseDecode;encoder;decoder;constructor(e,r,n,i){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=i,this.encoder=new P3e(e,r,n),this.decoder=new R3e(e,r,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};function w8({name:t,prefix:e,encode:r,decode:n}){return new B3e(t,e,r,n)}function my({name:t,prefix:e,alphabet:r}){const{encode:n,decode:i}=I3e(r,t);return w8({prefix:e,name:t,encode:n,decode:s=>Lp(i(s))})}function D3e(t,e,r,n){const i={};for(let l=0;l<e.length;++l)i[e[l]]=l;let s=t.length;for(;t[s-1]==="=";)--s;const a=new Uint8Array(s*r/8|0);let o=0,c=0,u=0;for(let l=0;l<s;++l){const f=i[t[l]];if(f===void 0)throw new SyntaxError(`Non-${n} character`);c=c<<r|f,o+=r,o>=8&&(o-=8,a[u++]=255&c>>o)}if(o>=r||(255&c<<8-o)!==0)throw new SyntaxError("Unexpected end of data");return a}function M3e(t,e,r){const n=e[e.length-1]==="=",i=(1<<r)-1;let s="",a=0,o=0;for(let c=0;c<t.length;++c)for(o=o<<8|t[c],a+=8;a>r;)a-=r,s+=e[i&o>>a];if(a!==0&&(s+=e[i&o<<r-a]),n)for(;(s.length*r&7)!==0;)s+="=";return s}function ms({name:t,prefix:e,bitsPerChar:r,alphabet:n}){return w8({prefix:e,name:t,encode(i){return M3e(i,n,r)},decode(i){return D3e(i,n,r,t)}})}const ma=ms({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Pte=ms({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),N3e=ms({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),F3e=ms({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),L3e=ms({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),$3e=ms({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),U3e=ms({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),j3e=ms({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),V3e=ms({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),q3e=Object.freeze(Object.defineProperty({__proto__:null,base32:ma,base32hex:L3e,base32hexpad:U3e,base32hexpadupper:j3e,base32hexupper:$3e,base32pad:N3e,base32padupper:F3e,base32upper:Pte,base32z:V3e},Symbol.toStringTag,{value:"Module"})),uh=my({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),z3e=my({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),H3e=Object.freeze(Object.defineProperty({__proto__:null,base36:uh,base36upper:z3e},Symbol.toStringTag,{value:"Module"})),$n=my({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),W3e=my({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),G3e=Object.freeze(Object.defineProperty({__proto__:null,base58btc:$n,base58flickr:W3e},Symbol.toStringTag,{value:"Module"}));var K3e=Rte,WF=128,X3e=-128,Y3e=Math.pow(2,31);function Rte(t,e,r){e=e||[],r=r||0;for(var n=r;t>=Y3e;)e[r++]=t&255|WF,t/=128;for(;t&X3e;)e[r++]=t&255|WF,t>>>=7;return e[r]=t|0,Rte.bytes=r-n+1,e}var Z3e=iC,J3e=128,GF=127;function iC(t,n){var r=0,n=n||0,i=0,s=n,a,o=t.length;do{if(s>=o)throw iC.bytes=0,new RangeError("Could not decode varint");a=t[s++],r+=i<28?(a&GF)<<i:(a&GF)*Math.pow(2,i),i+=7}while(a>=J3e);return iC.bytes=s-n,r}var Q3e=Math.pow(2,7),e4e=Math.pow(2,14),t4e=Math.pow(2,21),r4e=Math.pow(2,28),n4e=Math.pow(2,35),i4e=Math.pow(2,42),s4e=Math.pow(2,49),a4e=Math.pow(2,56),o4e=Math.pow(2,63),c4e=function(t){return t<Q3e?1:t<e4e?2:t<t4e?3:t<r4e?4:t<n4e?5:t<i4e?6:t<s4e?7:t<a4e?8:t<o4e?9:10},l4e={encode:K3e,decode:Z3e,encodingLength:c4e},Q3=l4e;function sC(t,e=0){return[Q3.decode(t,e),Q3.decode.bytes]}function e4(t,e,r=0){return Q3.encode(t,e,r),e}function t4(t){return Q3.encodingLength(t)}function wu(t,e){const r=e.byteLength,n=t4(t),i=n+t4(r),s=new Uint8Array(i+r);return e4(t,s,0),e4(r,s,n),s.set(e,i),new FR(t,r,e,s)}function Zn(t){const e=Lp(t),[r,n]=sC(e),[i,s]=sC(e.subarray(n)),a=e.subarray(n+s);if(a.byteLength!==i)throw new Error("Incorrect length");return new FR(r,i,a,e)}function u4e(t,e){if(t===e)return!0;{const r=e;return t.code===r.code&&t.size===r.size&&r.bytes instanceof Uint8Array&&E3e(t.bytes,r.bytes)}}let FR=class{code;size;digest;bytes;constructor(e,r,n,i){this.code=e,this.size=r,this.digest=n,this.bytes=i}};function KF(t,e){const{bytes:r,version:n}=t;switch(n){case 0:return d4e(r,aC(t),e??$n.encoder);default:return h4e(r,aC(t),e??ma.encoder)}}const XF=new WeakMap;function aC(t){const e=XF.get(t);if(e==null){const r=new Map;return XF.set(t,r),r}return e}let mt=class bs{code;version;multihash;bytes;"/";constructor(e,r,n,i){this.code=r,this.version=e,this.multihash=n,this.bytes=i,this["/"]=i}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{const{code:e,multihash:r}=this;if(e!==Tm)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(r.code!==p4e)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return bs.createV0(r)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{const{code:e,digest:r}=this.multihash,n=wu(e,r);return bs.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(e){return bs.equals(this,e)}static equals(e,r){const n=r;return n!=null&&e.code===n.code&&e.version===n.version&&u4e(e.multihash,n.multihash)}toString(e){return KF(this,e)}toJSON(){return{"/":KF(this)}}link(){return this}[Symbol.toStringTag]="CID";[Symbol.for("nodejs.util.inspect.custom")](){return`CID(${this.toString()})`}static asCID(e){if(e==null)return null;const r=e;if(r instanceof bs)return r;if(r["/"]!=null&&r["/"]===r.bytes||r.asCID===r){const{version:n,code:i,multihash:s,bytes:a}=r;return new bs(n,i,s,a??YF(n,i,s.bytes))}else if(r[m4e]===!0){const{version:n,multihash:i,code:s}=r,a=Zn(i);return bs.create(n,s,a)}else return null}static create(e,r,n){if(typeof r!="number")throw new Error("String codecs are no longer supported");if(!(n.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(e){case 0:{if(r!==Tm)throw new Error(`Version 0 CID must use dag-pb (code: ${Tm}) block encoding`);return new bs(e,r,n,n.bytes)}case 1:{const i=YF(e,r,n.bytes);return new bs(e,r,n,i)}default:throw new Error("Invalid version")}}static createV0(e){return bs.create(0,Tm,e)}static createV1(e,r){return bs.create(1,e,r)}static decode(e){const[r,n]=bs.decodeFirst(e);if(n.length!==0)throw new Error("Incorrect length");return r}static decodeFirst(e){const r=bs.inspectBytes(e),n=r.size-r.multihashSize,i=Lp(e.subarray(n,n+r.multihashSize));if(i.byteLength!==r.multihashSize)throw new Error("Incorrect length");const s=i.subarray(r.multihashSize-r.digestSize),a=new FR(r.multihashCode,r.digestSize,s,i);return[r.version===0?bs.createV0(a):bs.createV1(r.codec,a),e.subarray(r.size)]}static inspectBytes(e){let r=0;const n=()=>{const[f,d]=sC(e.subarray(r));return r+=d,f};let i=n(),s=Tm;if(i===18?(i=0,r=0):s=n(),i!==0&&i!==1)throw new RangeError(`Invalid CID version ${i}`);const a=r,o=n(),c=n(),u=r+c,l=u-a;return{version:i,codec:s,multihashCode:o,digestSize:c,multihashSize:l,size:u}}static parse(e,r){const[n,i]=f4e(e,r),s=bs.decode(i);if(s.version===0&&e[0]!=="Q")throw Error("Version 0 CID string must not include multibase prefix");return aC(s).set(n,e),s}};function f4e(t,e){switch(t[0]){case"Q":{const r=e??$n;return[$n.prefix,r.decode(`${$n.prefix}${t}`)]}case $n.prefix:{const r=e??$n;return[$n.prefix,r.decode(t)]}case ma.prefix:{const r=e??ma;return[ma.prefix,r.decode(t)]}case uh.prefix:{const r=e??uh;return[uh.prefix,r.decode(t)]}default:{if(e==null)throw Error("To parse non base32, base36 or base58btc encoded CID multibase decoder must be provided");return[t[0],e.decode(t)]}}}function d4e(t,e,r){const{prefix:n}=r;if(n!==$n.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);const i=e.get(n);if(i==null){const s=r.encode(t).slice(1);return e.set(n,s),s}else return i}function h4e(t,e,r){const{prefix:n}=r,i=e.get(n);if(i==null){const s=r.encode(t);return e.set(n,s),s}else return i}const Tm=112,p4e=18;function YF(t,e,r){const n=t4(t),i=n+t4(e),s=new Uint8Array(i+r.byteLength);return e4(t,s,0),e4(e,s,n),s.set(r,i),s}const m4e=Symbol.for("@ipld/js-cid/CID");function yr(t=0){return new Uint8Array(t)}function Ea(t=0){return new Uint8Array(t)}function qn(t,e){e==null&&(e=t.reduce((i,s)=>i+s.length,0));const r=Ea(e);let n=0;for(const i of t)r.set(i,n),n+=i.length;return r}var L2={exports:{}},ZF;function $p(){if(ZF)return L2.exports;ZF=1;var t=typeof Reflect=="object"?Reflect:null,e=t&&typeof t.apply=="function"?t.apply:function(x,E,k){return Function.prototype.apply.call(x,E,k)},r;t&&typeof t.ownKeys=="function"?r=t.ownKeys:Object.getOwnPropertySymbols?r=function(x){return Object.getOwnPropertyNames(x).concat(Object.getOwnPropertySymbols(x))}:r=function(x){return Object.getOwnPropertyNames(x)};function n(_){console&&console.warn&&console.warn(_)}var i=Number.isNaN||function(x){return x!==x};function s(){s.init.call(this)}L2.exports=s,L2.exports.once=v,s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var a=10;function o(_){if(typeof _!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof _)}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(_){if(typeof _!="number"||_<0||i(_))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+_+".");a=_}}),s.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(x){if(typeof x!="number"||x<0||i(x))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+x+".");return this._maxListeners=x,this};function c(_){return _._maxListeners===void 0?s.defaultMaxListeners:_._maxListeners}s.prototype.getMaxListeners=function(){return c(this)},s.prototype.emit=function(x){for(var E=[],k=1;k<arguments.length;k++)E.push(arguments[k]);var B=x==="error",D=this._events;if(D!==void 0)B=B&&D.error===void 0;else if(!B)return!1;if(B){var z;if(E.length>0&&(z=E[0]),z instanceof Error)throw z;var U=new Error("Unhandled error."+(z?" ("+z.message+")":""));throw U.context=z,U}var S=D[x];if(S===void 0)return!1;if(typeof S=="function")e(S,this,E);else for(var T=S.length,w=m(S,T),k=0;k<T;++k)e(w[k],this,E);return!0};function u(_,x,E,k){var B,D,z;if(o(E),D=_._events,D===void 0?(D=_._events=Object.create(null),_._eventsCount=0):(D.newListener!==void 0&&(_.emit("newListener",x,E.listener?E.listener:E),D=_._events),z=D[x]),z===void 0)z=D[x]=E,++_._eventsCount;else if(typeof z=="function"?z=D[x]=k?[E,z]:[z,E]:k?z.unshift(E):z.push(E),B=c(_),B>0&&z.length>B&&!z.warned){z.warned=!0;var U=new Error("Possible EventEmitter memory leak detected. "+z.length+" "+String(x)+" listeners added. Use emitter.setMaxListeners() to increase limit");U.name="MaxListenersExceededWarning",U.emitter=_,U.type=x,U.count=z.length,n(U)}return _}s.prototype.addListener=function(x,E){return u(this,x,E,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(x,E){return u(this,x,E,!0)};function l(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function f(_,x,E){var k={fired:!1,wrapFn:void 0,target:_,type:x,listener:E},B=l.bind(k);return B.listener=E,k.wrapFn=B,B}s.prototype.once=function(x,E){return o(E),this.on(x,f(this,x,E)),this},s.prototype.prependOnceListener=function(x,E){return o(E),this.prependListener(x,f(this,x,E)),this},s.prototype.removeListener=function(x,E){var k,B,D,z,U;if(o(E),B=this._events,B===void 0)return this;if(k=B[x],k===void 0)return this;if(k===E||k.listener===E)--this._eventsCount===0?this._events=Object.create(null):(delete B[x],B.removeListener&&this.emit("removeListener",x,k.listener||E));else if(typeof k!="function"){for(D=-1,z=k.length-1;z>=0;z--)if(k[z]===E||k[z].listener===E){U=k[z].listener,D=z;break}if(D<0)return this;D===0?k.shift():p(k,D),k.length===1&&(B[x]=k[0]),B.removeListener!==void 0&&this.emit("removeListener",x,U||E)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(x){var E,k,B;if(k=this._events,k===void 0)return this;if(k.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):k[x]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete k[x]),this;if(arguments.length===0){var D=Object.keys(k),z;for(B=0;B<D.length;++B)z=D[B],z!=="removeListener"&&this.removeAllListeners(z);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(E=k[x],typeof E=="function")this.removeListener(x,E);else if(E!==void 0)for(B=E.length-1;B>=0;B--)this.removeListener(x,E[B]);return this};function d(_,x,E){var k=_._events;if(k===void 0)return[];var B=k[x];return B===void 0?[]:typeof B=="function"?E?[B.listener||B]:[B]:E?g(B):m(B,B.length)}s.prototype.listeners=function(x){return d(this,x,!0)},s.prototype.rawListeners=function(x){return d(this,x,!1)},s.listenerCount=function(_,x){return typeof _.listenerCount=="function"?_.listenerCount(x):h.call(_,x)},s.prototype.listenerCount=h;function h(_){var x=this._events;if(x!==void 0){var E=x[_];if(typeof E=="function")return 1;if(E!==void 0)return E.length}return 0}s.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]};function m(_,x){for(var E=new Array(x),k=0;k<x;++k)E[k]=_[k];return E}function p(_,x){for(;x+1<_.length;x++)_[x]=_[x+1];_.pop()}function g(_){for(var x=new Array(_.length),E=0;E<x.length;++E)x[E]=_[E].listener||_[E];return x}function v(_,x){return new Promise(function(E,k){function B(z){_.removeListener(x,D),k(z)}function D(){typeof _.removeListener=="function"&&_.removeListener("error",B),E([].slice.call(arguments))}b(_,x,D,{once:!0}),x!=="error"&&y(_,B,{once:!0})})}function y(_,x,E){typeof _.on=="function"&&b(_,"error",x,E)}function b(_,x,E,k){if(typeof _.on=="function")k.once?_.once(x,E):_.on(x,E);else if(typeof _.addEventListener=="function")_.addEventListener(x,function B(D){k.once&&_.removeEventListener(x,B),E(D)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof _)}return L2.exports}var Ns=$p();const c0=In(Ns);class g4e{constructor(e){this.queue=void 0,this.maxConcurrent=void 0,this.count=void 0,this.queue=[],this.maxConcurrent=e,this.count=0}get canAcquire(){return this.count<this.maxConcurrent}acquire(){return this.canAcquire?(this.count++,Promise.resolve()):new Promise(e=>this.queue.push(e))}release(){const e=this.queue.shift();e?setTimeout(e,0):this.count--}}const Nc="_default";let Io=class{constructor(e=1){this.semaphoreInstances=void 0,this.maxConcurrent=void 0,this.semaphoreInstances={},this.maxConcurrent=e}hasSemaphoreInstance(e=Nc){return!!this.semaphoreInstances[e]}getSemaphoreInstance(e=Nc){return this.hasSemaphoreInstance(e)||(this.semaphoreInstances[e]=new g4e(this.maxConcurrent)),this.semaphoreInstances[e]}tidy(e=Nc){this.hasSemaphoreInstance(e)&&this.getSemaphoreInstance(e).count===0&&delete this.semaphoreInstances[e]}canAcquire(e=Nc){return this.getSemaphoreInstance(e).canAcquire}acquire(e=Nc){return this.getSemaphoreInstance(e).acquire()}release(e=Nc){this.getSemaphoreInstance(e).release(),this.tidy(e)}count(e=Nc){return this.hasSemaphoreInstance(e)?this.getSemaphoreInstance(e).count:0}hasTasks(e=Nc){return this.count(e)>0}async request(e,r=Nc){try{return await this.acquire(r),await e()}finally{this.release(r)}}async requestIfAvailable(e,r=Nc){return this.canAcquire(r)?this.request(e,r):null}};var ex,JF;function Ote(){if(JF)return ex;JF=1;var t=Object.prototype.toString;return ex=function(r){var n=t.call(r),i=n==="[object Arguments]";return i||(i=n!=="[object Array]"&&r!==null&&typeof r=="object"&&typeof r.length=="number"&&r.length>=0&&t.call(r.callee)==="[object Function]"),i},ex}var tx,QF;function v4e(){if(QF)return tx;QF=1;var t;if(!Object.keys){var e=Object.prototype.hasOwnProperty,r=Object.prototype.toString,n=Ote(),i=Object.prototype.propertyIsEnumerable,s=!i.call({toString:null},"toString"),a=i.call(function(){},"prototype"),o=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],c=function(d){var h=d.constructor;return h&&h.prototype===d},u={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},l=function(){if(typeof window>"u")return!1;for(var d in window)try{if(!u["$"+d]&&e.call(window,d)&&window[d]!==null&&typeof window[d]=="object")try{c(window[d])}catch{return!0}}catch{return!0}return!1}(),f=function(d){if(typeof window>"u"||!l)return c(d);try{return c(d)}catch{return!1}};t=function(h){var m=h!==null&&typeof h=="object",p=r.call(h)==="[object Function]",g=n(h),v=m&&r.call(h)==="[object String]",y=[];if(!m&&!p&&!g)throw new TypeError("Object.keys called on a non-object");var b=a&&p;if(v&&h.length>0&&!e.call(h,0))for(var _=0;_<h.length;++_)y.push(String(_));if(g&&h.length>0)for(var x=0;x<h.length;++x)y.push(String(x));else for(var E in h)!(b&&E==="prototype")&&e.call(h,E)&&y.push(String(E));if(s)for(var k=f(h),B=0;B<o.length;++B)!(k&&o[B]==="constructor")&&e.call(h,o[B])&&y.push(o[B]);return y}}return tx=t,tx}var rx,eL;function LR(){if(eL)return rx;eL=1;var t=Array.prototype.slice,e=Ote(),r=Object.keys,n=r?function(a){return r(a)}:v4e(),i=Object.keys;return n.shim=function(){if(Object.keys){var a=function(){var o=Object.keys(arguments);return o&&o.length===arguments.length}(1,2);a||(Object.keys=function(c){return e(c)?i(t.call(c)):i(c)})}else Object.keys=n;return Object.keys||n},rx=n,rx}var nx,tL;function _8(){if(tL)return nx;tL=1;var t=Object.defineProperty||!1;if(t)try{t({},"a",{value:1})}catch{t=!1}return nx=t,nx}var ix,rL;function $R(){return rL||(rL=1,ix=SyntaxError),ix}var sx,nL;function Bo(){return nL||(nL=1,sx=TypeError),sx}var ax,iL;function y4e(){return iL||(iL=1,ax=Object.getOwnPropertyDescriptor),ax}var ox,sL;function l0(){if(sL)return ox;sL=1;var t=y4e();if(t)try{t([],"length")}catch{t=null}return ox=t,ox}var cx,aL;function UR(){if(aL)return cx;aL=1;var t=_8(),e=$R(),r=Bo(),n=l0();return cx=function(s,a,o){if(!s||typeof s!="object"&&typeof s!="function")throw new r("`obj` must be an object or a function`");if(typeof a!="string"&&typeof a!="symbol")throw new r("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new r("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new r("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new r("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new r("`loose`, if provided, must be a boolean");var c=arguments.length>3?arguments[3]:null,u=arguments.length>4?arguments[4]:null,l=arguments.length>5?arguments[5]:null,f=arguments.length>6?arguments[6]:!1,d=!!n&&n(s,a);if(t)t(s,a,{configurable:l===null&&d?d.configurable:!l,enumerable:c===null&&d?d.enumerable:!c,value:o,writable:u===null&&d?d.writable:!u});else if(f||!c&&!u&&!l)s[a]=o;else throw new e("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},cx}var lx,oL;function jR(){if(oL)return lx;oL=1;var t=_8(),e=function(){return!!t};return e.hasArrayLengthDefineBug=function(){if(!t)return null;try{return t([],"length",{value:1}).length!==1}catch{return!0}},lx=e,lx}var ux,cL;function u0(){if(cL)return ux;cL=1;var t=LR(),e=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",r=Object.prototype.toString,n=Array.prototype.concat,i=UR(),s=function(u){return typeof u=="function"&&r.call(u)==="[object Function]"},a=jR()(),o=function(u,l,f,d){if(l in u){if(d===!0){if(u[l]===f)return}else if(!s(d)||!d())return}a?i(u,l,f,!0):i(u,l,f)},c=function(u,l){var f=arguments.length>2?arguments[2]:{},d=t(l);e&&(d=n.call(d,Object.getOwnPropertySymbols(l)));for(var h=0;h<d.length;h+=1)o(u,d[h],l[d[h]],f[d[h]])};return c.supportsDescriptors=!!a,ux=c,ux}var fx={exports:{}},dx,lL;function VR(){return lL||(lL=1,dx=Object),dx}var hx,uL;function Bte(){return uL||(uL=1,hx=Error),hx}var px,fL;function b4e(){return fL||(fL=1,px=EvalError),px}var mx,dL;function w4e(){return dL||(dL=1,mx=RangeError),mx}var gx,hL;function _4e(){return hL||(hL=1,gx=ReferenceError),gx}var vx,pL;function x4e(){return pL||(pL=1,vx=URIError),vx}var yx,mL;function S4e(){return mL||(mL=1,yx=Math.abs),yx}var bx,gL;function E4e(){return gL||(gL=1,bx=Math.floor),bx}var wx,vL;function k4e(){return vL||(vL=1,wx=Math.max),wx}var _x,yL;function T4e(){return yL||(yL=1,_x=Math.min),_x}var xx,bL;function A4e(){return bL||(bL=1,xx=Math.pow),xx}var Sx,wL;function C4e(){return wL||(wL=1,Sx=Math.round),Sx}var Ex,_L;function I4e(){return _L||(_L=1,Ex=Number.isNaN||function(e){return e!==e}),Ex}var kx,xL;function P4e(){if(xL)return kx;xL=1;var t=I4e();return kx=function(r){return t(r)||r===0?r:r<0?-1:1},kx}var Tx,SL;function x8(){return SL||(SL=1,Tx=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},r=Symbol("test"),n=Object(r);if(typeof r=="string"||Object.prototype.toString.call(r)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var i=42;e[r]=i;for(var s in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var a=Object.getOwnPropertySymbols(e);if(a.length!==1||a[0]!==r||!Object.prototype.propertyIsEnumerable.call(e,r))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var o=Object.getOwnPropertyDescriptor(e,r);if(o.value!==i||o.enumerable!==!0)return!1}return!0}),Tx}var Ax,EL;function qR(){if(EL)return Ax;EL=1;var t=typeof Symbol<"u"&&Symbol,e=x8();return Ax=function(){return typeof t!="function"||typeof Symbol!="function"||typeof t("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:e()},Ax}var Cx,kL;function Dte(){return kL||(kL=1,Cx=typeof Reflect<"u"&&Reflect.getPrototypeOf||null),Cx}var Ix,TL;function Mte(){if(TL)return Ix;TL=1;var t=VR();return Ix=t.getPrototypeOf||null,Ix}var Px,AL;function R4e(){if(AL)return Px;AL=1;var t="Function.prototype.bind called on incompatible ",e=Object.prototype.toString,r=Math.max,n="[object Function]",i=function(c,u){for(var l=[],f=0;f<c.length;f+=1)l[f]=c[f];for(var d=0;d<u.length;d+=1)l[d+c.length]=u[d];return l},s=function(c,u){for(var l=[],f=u,d=0;f<c.length;f+=1,d+=1)l[d]=c[f];return l},a=function(o,c){for(var u="",l=0;l<o.length;l+=1)u+=o[l],l+1<o.length&&(u+=c);return u};return Px=function(c){var u=this;if(typeof u!="function"||e.apply(u)!==n)throw new TypeError(t+u);for(var l=s(arguments,1),f,d=function(){if(this instanceof f){var v=u.apply(this,i(l,arguments));return Object(v)===v?v:this}return u.apply(c,i(l,arguments))},h=r(0,u.length-l.length),m=[],p=0;p<h;p++)m[p]="$"+p;if(f=Function("binder","return function ("+a(m,",")+"){ return binder.apply(this,arguments); }")(d),u.prototype){var g=function(){};g.prototype=u.prototype,f.prototype=new g,g.prototype=null}return f},Px}var Rx,CL;function gy(){if(CL)return Rx;CL=1;var t=R4e();return Rx=Function.prototype.bind||t,Rx}var Ox,IL;function zR(){return IL||(IL=1,Ox=Function.prototype.call),Ox}var Bx,PL;function HR(){return PL||(PL=1,Bx=Function.prototype.apply),Bx}var Dx,RL;function O4e(){return RL||(RL=1,Dx=typeof Reflect<"u"&&Reflect&&Reflect.apply),Dx}var Mx,OL;function Nte(){if(OL)return Mx;OL=1;var t=gy(),e=HR(),r=zR(),n=O4e();return Mx=n||t.call(r,e),Mx}var Nx,BL;function WR(){if(BL)return Nx;BL=1;var t=gy(),e=Bo(),r=zR(),n=Nte();return Nx=function(s){if(s.length<1||typeof s[0]!="function")throw new e("a function is required");return n(t,r,s)},Nx}var Fx,DL;function B4e(){if(DL)return Fx;DL=1;var t=WR(),e=l0(),r;try{r=[].__proto__===Array.prototype}catch(a){if(!a||typeof a!="object"||!("code"in a)||a.code!=="ERR_PROTO_ACCESS")throw a}var n=!!r&&e&&e(Object.prototype,"__proto__"),i=Object,s=i.getPrototypeOf;return Fx=n&&typeof n.get=="function"?t([n.get]):typeof s=="function"?function(o){return s(o==null?o:i(o))}:!1,Fx}var Lx,ML;function S8(){if(ML)return Lx;ML=1;var t=Dte(),e=Mte(),r=B4e();return Lx=t?function(i){return t(i)}:e?function(i){if(!i||typeof i!="object"&&typeof i!="function")throw new TypeError("getProto: not an object");return e(i)}:r?function(i){return r(i)}:null,Lx}var $x,NL;function GR(){if(NL)return $x;NL=1;var t=Function.prototype.call,e=Object.prototype.hasOwnProperty,r=gy();return $x=r.call(t,e),$x}var Ux,FL;function Du(){if(FL)return Ux;FL=1;var t,e=VR(),r=Bte(),n=b4e(),i=w4e(),s=_4e(),a=$R(),o=Bo(),c=x4e(),u=S4e(),l=E4e(),f=k4e(),d=T4e(),h=A4e(),m=C4e(),p=P4e(),g=Function,v=function(Y){try{return g('"use strict"; return ('+Y+").constructor;")()}catch{}},y=l0(),b=_8(),_=function(){throw new o},x=y?function(){try{return arguments.callee,_}catch{try{return y(arguments,"callee").get}catch{return _}}}():_,E=qR()(),k=S8(),B=Mte(),D=Dte(),z=HR(),U=zR(),S={},T=typeof Uint8Array>"u"||!k?t:k(Uint8Array),w={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?t:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?t:ArrayBuffer,"%ArrayIteratorPrototype%":E&&k?k([][Symbol.iterator]()):t,"%AsyncFromSyncIteratorPrototype%":t,"%AsyncFunction%":S,"%AsyncGenerator%":S,"%AsyncGeneratorFunction%":S,"%AsyncIteratorPrototype%":S,"%Atomics%":typeof Atomics>"u"?t:Atomics,"%BigInt%":typeof BigInt>"u"?t:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?t:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?t:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?t:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":r,"%eval%":eval,"%EvalError%":n,"%Float16Array%":typeof Float16Array>"u"?t:Float16Array,"%Float32Array%":typeof Float32Array>"u"?t:Float32Array,"%Float64Array%":typeof Float64Array>"u"?t:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?t:FinalizationRegistry,"%Function%":g,"%GeneratorFunction%":S,"%Int8Array%":typeof Int8Array>"u"?t:Int8Array,"%Int16Array%":typeof Int16Array>"u"?t:Int16Array,"%Int32Array%":typeof Int32Array>"u"?t:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":E&&k?k(k([][Symbol.iterator]())):t,"%JSON%":typeof JSON=="object"?JSON:t,"%Map%":typeof Map>"u"?t:Map,"%MapIteratorPrototype%":typeof Map>"u"||!E||!k?t:k(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":e,"%Object.getOwnPropertyDescriptor%":y,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?t:Promise,"%Proxy%":typeof Proxy>"u"?t:Proxy,"%RangeError%":i,"%ReferenceError%":s,"%Reflect%":typeof Reflect>"u"?t:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?t:Set,"%SetIteratorPrototype%":typeof Set>"u"||!E||!k?t:k(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?t:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":E&&k?k(""[Symbol.iterator]()):t,"%Symbol%":E?Symbol:t,"%SyntaxError%":a,"%ThrowTypeError%":x,"%TypedArray%":T,"%TypeError%":o,"%Uint8Array%":typeof Uint8Array>"u"?t:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?t:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?t:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?t:Uint32Array,"%URIError%":c,"%WeakMap%":typeof WeakMap>"u"?t:WeakMap,"%WeakRef%":typeof WeakRef>"u"?t:WeakRef,"%WeakSet%":typeof WeakSet>"u"?t:WeakSet,"%Function.prototype.call%":U,"%Function.prototype.apply%":z,"%Object.defineProperty%":b,"%Object.getPrototypeOf%":B,"%Math.abs%":u,"%Math.floor%":l,"%Math.max%":f,"%Math.min%":d,"%Math.pow%":h,"%Math.round%":m,"%Math.sign%":p,"%Reflect.getPrototypeOf%":D};if(k)try{null.error}catch(Y){var A=k(k(Y));w["%Error.prototype%"]=A}var F=function Y(te){var Q;if(te==="%AsyncFunction%")Q=v("async function () {}");else if(te==="%GeneratorFunction%")Q=v("function* () {}");else if(te==="%AsyncGeneratorFunction%")Q=v("async function* () {}");else if(te==="%AsyncGenerator%"){var j=Y("%AsyncGeneratorFunction%");j&&(Q=j.prototype)}else if(te==="%AsyncIteratorPrototype%"){var Z=Y("%AsyncGenerator%");Z&&k&&(Q=k(Z.prototype))}return w[te]=Q,Q},P={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},O=gy(),R=GR(),I=O.call(U,Array.prototype.concat),C=O.call(z,Array.prototype.splice),M=O.call(U,String.prototype.replace),L=O.call(U,String.prototype.slice),N=O.call(U,RegExp.prototype.exec),H=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,W=/\\(\\)?/g,q=function(te){var Q=L(te,0,1),j=L(te,-1);if(Q==="%"&&j!=="%")throw new a("invalid intrinsic syntax, expected closing `%`");if(j==="%"&&Q!=="%")throw new a("invalid intrinsic syntax, expected opening `%`");var Z=[];return M(te,H,function(V,ne,se,J){Z[Z.length]=se?M(J,W,"$1"):ne||V}),Z},G=function(te,Q){var j=te,Z;if(R(P,j)&&(Z=P[j],j="%"+Z[0]+"%"),R(w,j)){var V=w[j];if(V===S&&(V=F(j)),typeof V>"u"&&!Q)throw new o("intrinsic "+te+" exists, but is not available. Please file an issue!");return{alias:Z,name:j,value:V}}throw new a("intrinsic "+te+" does not exist!")};return Ux=function(te,Q){if(typeof te!="string"||te.length===0)throw new o("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof Q!="boolean")throw new o('"allowMissing" argument must be a boolean');if(N(/^%?[^%]*%?$/,te)===null)throw new a("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var j=q(te),Z=j.length>0?j[0]:"",V=G("%"+Z+"%",Q),ne=V.name,se=V.value,J=!1,ee=V.alias;ee&&(Z=ee[0],C(j,I([0,1],ee)));for(var ie=1,le=!0;ie<j.length;ie+=1){var ue=j[ie],me=L(ue,0,1),be=L(ue,-1);if((me==='"'||me==="'"||me==="`"||be==='"'||be==="'"||be==="`")&&me!==be)throw new a("property names with quotes must have matching quotes");if((ue==="constructor"||!le)&&(J=!0),Z+="."+ue,ne="%"+Z+"%",R(w,ne))se=w[ne];else if(se!=null){if(!(ue in se)){if(!Q)throw new o("base intrinsic for "+te+" exists, but the property is not available.");return}if(y&&ie+1>=j.length){var _e=y(se,ue);le=!!_e,le&&"get"in _e&&!("originalValue"in _e.get)?se=_e.get:se=se[ue]}else le=R(se,ue),se=se[ue];le&&!J&&(w[ne]=se)}}return se},Ux}var jx,LL;function D4e(){if(LL)return jx;LL=1;var t=Du(),e=UR(),r=jR()(),n=l0(),i=Bo(),s=t("%Math.floor%");return jx=function(o,c){if(typeof o!="function")throw new i("`fn` is not a function");if(typeof c!="number"||c<0||c>4294967295||s(c)!==c)throw new i("`length` must be a positive 32-bit integer");var u=arguments.length>2&&!!arguments[2],l=!0,f=!0;if("length"in o&&n){var d=n(o,"length");d&&!d.configurable&&(l=!1),d&&!d.writable&&(f=!1)}return(l||f||!u)&&(r?e(o,"length",c,!0,!0):e(o,"length",c)),o},jx}var Vx,$L;function M4e(){if($L)return Vx;$L=1;var t=gy(),e=HR(),r=Nte();return Vx=function(){return r(t,e,arguments)},Vx}var UL;function Up(){return UL||(UL=1,function(t){var e=D4e(),r=_8(),n=WR(),i=M4e();t.exports=function(a){var o=n(arguments),c=a.length-(arguments.length-1);return e(o,1+(c>0?c:0),!0)},r?r(t.exports,"apply",{value:i}):t.exports.apply=i}(fx)),fx.exports}var qx,jL;function gs(){if(jL)return qx;jL=1;var t=Du(),e=WR(),r=e([t("%String.prototype.indexOf%")]);return qx=function(i,s){var a=t(i,!!s);return typeof a=="function"&&r(i,".prototype.")>-1?e([a]):a},qx}var zx,VL;function Fte(){if(VL)return zx;VL=1;var t=LR(),e=x8()(),r=gs(),n=VR(),i=r("Array.prototype.push"),s=r("Object.prototype.propertyIsEnumerable"),a=e?n.getOwnPropertySymbols:null;return zx=function(c,u){if(c==null)throw new TypeError("target must be an object");var l=n(c);if(arguments.length===1)return l;for(var f=1;f<arguments.length;++f){var d=n(arguments[f]),h=t(d),m=e&&(n.getOwnPropertySymbols||a);if(m)for(var p=m(d),g=0;g<p.length;++g){var v=p[g];s(d,v)&&i(h,v)}for(var y=0;y<h.length;++y){var b=h[y];if(s(d,b)){var _=d[b];l[b]=_}}}return l},zx}var Hx,qL;function Lte(){if(qL)return Hx;qL=1;var t=Fte(),e=function(){if(!Object.assign)return!1;for(var n="abcdefghijklmnopqrst",i=n.split(""),s={},a=0;a<i.length;++a)s[i[a]]=i[a];var o=Object.assign({},s),c="";for(var u in o)c+=u;return n!==c},r=function(){if(!Object.assign||!Object.preventExtensions)return!1;var n=Object.preventExtensions({1:2});try{Object.assign(n,"xy")}catch{return n[1]==="y"}return!1};return Hx=function(){return!Object.assign||e()||r()?t:Object.assign},Hx}var Wx,zL;function N4e(){if(zL)return Wx;zL=1;var t=u0(),e=Lte();return Wx=function(){var n=e();return t(Object,{assign:n},{assign:function(){return Object.assign!==n}}),n},Wx}var Gx,HL;function F4e(){if(HL)return Gx;HL=1;var t=u0(),e=Up(),r=Fte(),n=Lte(),i=N4e(),s=e.apply(n()),a=function(c,u){return s(Object,arguments)};return t(a,{getPolyfill:n,implementation:r,shim:i}),Gx=a,Gx}var Kx,WL;function $te(){if(WL)return Kx;WL=1;var t=Du(),e=Up(),r=e(t("String.prototype.indexOf"));return Kx=function(i,s){var a=t(i,!!s);return typeof a=="function"&&r(i,".prototype.")>-1?e(a):a},Kx}var Xx,GL;function L4e(){if(GL)return Xx;GL=1;var t=function(){return typeof function(){}.name=="string"},e=Object.getOwnPropertyDescriptor;if(e)try{e([],"length")}catch{e=null}t.functionsHaveConfigurableNames=function(){if(!t()||!e)return!1;var i=e(function(){},"name");return!!i&&!!i.configurable};var r=Function.prototype.bind;return t.boundFunctionsHaveNames=function(){return t()&&typeof r=="function"&&function(){}.bind().name!==""},Xx=t,Xx}var Yx,KL;function $4e(){if(KL)return Yx;KL=1;var t=UR(),e=jR()(),r=L4e().functionsHaveConfigurableNames(),n=Bo();return Yx=function(s,a){if(typeof s!="function")throw new n("`fn` is not a function");var o=arguments.length>2&&!!arguments[2];return(!o||r)&&(e?t(s,"name",a,!0,!0):t(s,"name",a)),s},Yx}var Zx,XL;function Ute(){if(XL)return Zx;XL=1;var t=$4e(),e=Bo(),r=Object;return Zx=t(function(){if(this==null||this!==r(this))throw new e("RegExp.prototype.flags getter called on non-object");var i="";return this.hasIndices&&(i+="d"),this.global&&(i+="g"),this.ignoreCase&&(i+="i"),this.multiline&&(i+="m"),this.dotAll&&(i+="s"),this.unicode&&(i+="u"),this.unicodeSets&&(i+="v"),this.sticky&&(i+="y"),i},"get flags",!0),Zx}var Jx,YL;function jte(){if(YL)return Jx;YL=1;var t=Ute(),e=u0().supportsDescriptors,r=Object.getOwnPropertyDescriptor;return Jx=function(){if(e&&/a/mig.flags==="gim"){var i=r(RegExp.prototype,"flags");if(i&&typeof i.get=="function"&&"dotAll"in RegExp.prototype&&"hasIndices"in RegExp.prototype){var s="",a={};if(Object.defineProperty(a,"hasIndices",{get:function(){s+="d"}}),Object.defineProperty(a,"sticky",{get:function(){s+="y"}}),i.get.call(a),s==="dy")return i.get}}return t},Jx}var Qx,ZL;function U4e(){if(ZL)return Qx;ZL=1;var t=u0().supportsDescriptors,e=jte(),r=l0(),n=Object.defineProperty,i=Bte(),s=S8(),a=/a/;return Qx=function(){if(!t||!s)throw new i("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");var c=e(),u=s(a),l=r(u,"flags");return(!l||l.get!==c)&&n(u,"flags",{configurable:!0,enumerable:!1,get:c}),c},Qx}var e7,JL;function j4e(){if(JL)return e7;JL=1;var t=u0(),e=Up(),r=Ute(),n=jte(),i=U4e(),s=e(n());return t(s,{getPolyfill:n,implementation:r,shim:i}),e7=s,e7}var Am={exports:{}},t7,QL;function fd(){if(QL)return t7;QL=1;var t=x8();return t7=function(){return t()&&!!Symbol.toStringTag},t7}var r7,e$;function KR(){if(e$)return r7;e$=1;var t=fd()(),e=gs(),r=e("Object.prototype.toString"),n=function(o){return t&&o&&typeof o=="object"&&Symbol.toStringTag in o?!1:r(o)==="[object Arguments]"},i=function(o){return n(o)?!0:o!==null&&typeof o=="object"&&"length"in o&&typeof o.length=="number"&&o.length>=0&&r(o)!=="[object Array]"&&"callee"in o&&r(o.callee)==="[object Function]"},s=function(){return n(arguments)}();return n.isLegacyArguments=i,r7=s?n:i,r7}const rg={},Is=Object.freeze(Object.defineProperty({__proto__:null,default:rg},Symbol.toStringTag,{value:"Module"})),jp=FJ(Is);var n7,t$;function E8(){if(t$)return n7;t$=1;var t=typeof Map=="function"&&Map.prototype,e=Object.getOwnPropertyDescriptor&&t?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,r=t&&e&&typeof e.get=="function"?e.get:null,n=t&&Map.prototype.forEach,i=typeof Set=="function"&&Set.prototype,s=Object.getOwnPropertyDescriptor&&i?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,a=i&&s&&typeof s.get=="function"?s.get:null,o=i&&Set.prototype.forEach,c=typeof WeakMap=="function"&&WeakMap.prototype,u=c?WeakMap.prototype.has:null,l=typeof WeakSet=="function"&&WeakSet.prototype,f=l?WeakSet.prototype.has:null,d=typeof WeakRef=="function"&&WeakRef.prototype,h=d?WeakRef.prototype.deref:null,m=Boolean.prototype.valueOf,p=Object.prototype.toString,g=Function.prototype.toString,v=String.prototype.match,y=String.prototype.slice,b=String.prototype.replace,_=String.prototype.toUpperCase,x=String.prototype.toLowerCase,E=RegExp.prototype.test,k=Array.prototype.concat,B=Array.prototype.join,D=Array.prototype.slice,z=Math.floor,U=typeof BigInt=="function"?BigInt.prototype.valueOf:null,S=Object.getOwnPropertySymbols,T=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,w=typeof Symbol=="function"&&typeof Symbol.iterator=="object",A=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===w||!0)?Symbol.toStringTag:null,F=Object.prototype.propertyIsEnumerable,P=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(we){return we.__proto__}:null);function O(we,ke){if(we===1/0||we===-1/0||we!==we||we&&we>-1e3&&we<1e3||E.call(/e/,ke))return ke;var Ye=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof we=="number"){var ot=we<0?-z(-we):z(we);if(ot!==we){var xt=String(ot),ut=y.call(ke,xt.length+1);return b.call(xt,Ye,"$&_")+"."+b.call(b.call(ut,/([0-9]{3})/g,"$&_"),/_$/,"")}}return b.call(ke,Ye,"$&_")}var R=jp,I=R.custom,C=V(I)?I:null,M={__proto__:null,double:'"',single:"'"},L={__proto__:null,double:/(["\\])/g,single:/(['\\])/g};n7=function we(ke,Ye,ot,xt){var ut=Ye||{};if(J(ut,"quoteStyle")&&!J(M,ut.quoteStyle))throw new TypeError('option "quoteStyle" must be "single" or "double"');if(J(ut,"maxStringLength")&&(typeof ut.maxStringLength=="number"?ut.maxStringLength<0&&ut.maxStringLength!==1/0:ut.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var gt=J(ut,"customInspect")?ut.customInspect:!0;if(typeof gt!="boolean"&&gt!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(J(ut,"indent")&&ut.indent!==null&&ut.indent!=="	"&&!(parseInt(ut.indent,10)===ut.indent&&ut.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(J(ut,"numericSeparator")&&typeof ut.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var er=ut.numericSeparator;if(typeof ke>"u")return"undefined";if(ke===null)return"null";if(typeof ke=="boolean")return ke?"true":"false";if(typeof ke=="string")return re(ke,ut);if(typeof ke=="number"){if(ke===0)return 1/0/ke>0?"0":"-0";var ur=String(ke);return er?O(ke,ur):ur}if(typeof ke=="bigint"){var Tt=String(ke)+"n";return er?O(ke,Tt):Tt}var Zr=typeof ut.depth>"u"?5:ut.depth;if(typeof ot>"u"&&(ot=0),ot>=Zr&&Zr>0&&typeof ke=="object")return q(ke)?"[Array]":"[Object]";var Br=Se(ut,ot);if(typeof xt>"u")xt=[];else if(le(xt,ke)>=0)return"[Circular]";function bt(Ie,Pe,Ue){if(Pe&&(xt=D.call(xt),xt.push(Pe)),Ue){var He={depth:ut.depth};return J(ut,"quoteStyle")&&(He.quoteStyle=ut.quoteStyle),we(Ie,He,ot+1,xt)}return we(Ie,ut,ot+1,xt)}if(typeof ke=="function"&&!Y(ke)){var cn=ie(ke),ln=ct(ke,bt);return"[Function"+(cn?": "+cn:" (anonymous)")+"]"+(ln.length>0?" { "+B.call(ln,", ")+" }":"")}if(V(ke)){var jt=w?b.call(String(ke),/^(Symbol\(.*\))_[^)]*$/,"$1"):T.call(ke);return typeof ke=="object"&&!w?X(jt):jt}if(Be(ke)){for(var Cr="<"+x.call(String(ke.nodeName)),Jr=ke.attributes||[],Lt=0;Lt<Jr.length;Lt++)Cr+=" "+Jr[Lt].name+"="+N(H(Jr[Lt].value),"double",ut);return Cr+=">",ke.childNodes&&ke.childNodes.length&&(Cr+="..."),Cr+="</"+x.call(String(ke.nodeName))+">",Cr}if(q(ke)){if(ke.length===0)return"[]";var Qr=ct(ke,bt);return Br&&!Ee(Qr)?"["+rt(Qr,Br)+"]":"[ "+B.call(Qr,", ")+" ]"}if(te(ke)){var oe=ct(ke,bt);return!("cause"in Error.prototype)&&"cause"in ke&&!F.call(ke,"cause")?"{ ["+String(ke)+"] "+B.call(k.call("[cause]: "+bt(ke.cause),oe),", ")+" }":oe.length===0?"["+String(ke)+"]":"{ ["+String(ke)+"] "+B.call(oe,", ")+" }"}if(typeof ke=="object"&&gt){if(C&&typeof ke[C]=="function"&&R)return R(ke,{depth:Zr-ot});if(gt!=="symbol"&&typeof ke.inspect=="function")return ke.inspect()}if(ue(ke)){var he=[];return n&&n.call(ke,function(Ie,Pe){he.push(bt(Pe,ke,!0)+" => "+bt(Ie,ke))}),ye("Map",r.call(ke),he,Br)}if(_e(ke)){var fe=[];return o&&o.call(ke,function(Ie){fe.push(bt(Ie,ke))}),ye("Set",a.call(ke),fe,Br)}if(me(ke))return ce("WeakMap");if(xe(ke))return ce("WeakSet");if(be(ke))return ce("WeakRef");if(j(ke))return X(bt(Number(ke)));if(ne(ke))return X(bt(U.call(ke)));if(Z(ke))return X(m.call(ke));if(Q(ke))return X(bt(String(ke)));if(typeof window<"u"&&ke===window)return"{ [object Window] }";if(typeof globalThis<"u"&&ke===globalThis||typeof Ut<"u"&&ke===Ut)return"{ [object globalThis] }";if(!G(ke)&&!Y(ke)){var de=ct(ke,bt),pe=P?P(ke)===Object.prototype:ke instanceof Object||ke.constructor===Object,ge=ke instanceof Object?"":"null prototype",Ae=!pe&&A&&Object(ke)===ke&&A in ke?y.call(ee(ke),8,-1):ge?"Object":"",De=pe||typeof ke.constructor!="function"?"":ke.constructor.name?ke.constructor.name+" ":"",Ce=De+(Ae||ge?"["+B.call(k.call([],Ae||[],ge||[]),": ")+"] ":"");return de.length===0?Ce+"{}":Br?Ce+"{"+rt(de,Br)+"}":Ce+"{ "+B.call(de,", ")+" }"}return String(ke)};function N(we,ke,Ye){var ot=Ye.quoteStyle||ke,xt=M[ot];return xt+we+xt}function H(we){return b.call(String(we),/"/g,"&quot;")}function W(we){return!A||!(typeof we=="object"&&(A in we||typeof we[A]<"u"))}function q(we){return ee(we)==="[object Array]"&&W(we)}function G(we){return ee(we)==="[object Date]"&&W(we)}function Y(we){return ee(we)==="[object RegExp]"&&W(we)}function te(we){return ee(we)==="[object Error]"&&W(we)}function Q(we){return ee(we)==="[object String]"&&W(we)}function j(we){return ee(we)==="[object Number]"&&W(we)}function Z(we){return ee(we)==="[object Boolean]"&&W(we)}function V(we){if(w)return we&&typeof we=="object"&&we instanceof Symbol;if(typeof we=="symbol")return!0;if(!we||typeof we!="object"||!T)return!1;try{return T.call(we),!0}catch{}return!1}function ne(we){if(!we||typeof we!="object"||!U)return!1;try{return U.call(we),!0}catch{}return!1}var se=Object.prototype.hasOwnProperty||function(we){return we in this};function J(we,ke){return se.call(we,ke)}function ee(we){return p.call(we)}function ie(we){if(we.name)return we.name;var ke=v.call(g.call(we),/^function\s*([\w$]+)/);return ke?ke[1]:null}function le(we,ke){if(we.indexOf)return we.indexOf(ke);for(var Ye=0,ot=we.length;Ye<ot;Ye++)if(we[Ye]===ke)return Ye;return-1}function ue(we){if(!r||!we||typeof we!="object")return!1;try{r.call(we);try{a.call(we)}catch{return!0}return we instanceof Map}catch{}return!1}function me(we){if(!u||!we||typeof we!="object")return!1;try{u.call(we,u);try{f.call(we,f)}catch{return!0}return we instanceof WeakMap}catch{}return!1}function be(we){if(!h||!we||typeof we!="object")return!1;try{return h.call(we),!0}catch{}return!1}function _e(we){if(!a||!we||typeof we!="object")return!1;try{a.call(we);try{r.call(we)}catch{return!0}return we instanceof Set}catch{}return!1}function xe(we){if(!f||!we||typeof we!="object")return!1;try{f.call(we,f);try{u.call(we,u)}catch{return!0}return we instanceof WeakSet}catch{}return!1}function Be(we){return!we||typeof we!="object"?!1:typeof HTMLElement<"u"&&we instanceof HTMLElement?!0:typeof we.nodeName=="string"&&typeof we.getAttribute=="function"}function re(we,ke){if(we.length>ke.maxStringLength){var Ye=we.length-ke.maxStringLength,ot="... "+Ye+" more character"+(Ye>1?"s":"");return re(y.call(we,0,ke.maxStringLength),ke)+ot}var xt=L[ke.quoteStyle||"single"];xt.lastIndex=0;var ut=b.call(b.call(we,xt,"\\$1"),/[\x00-\x1f]/g,K);return N(ut,"single",ke)}function K(we){var ke=we.charCodeAt(0),Ye={8:"b",9:"t",10:"n",12:"f",13:"r"}[ke];return Ye?"\\"+Ye:"\\x"+(ke<16?"0":"")+_.call(ke.toString(16))}function X(we){return"Object("+we+")"}function ce(we){return we+" { ? }"}function ye(we,ke,Ye,ot){var xt=ot?rt(Ye,ot):B.call(Ye,", ");return we+" ("+ke+") {"+xt+"}"}function Ee(we){for(var ke=0;ke<we.length;ke++)if(le(we[ke],`
`)>=0)return!1;return!0}function Se(we,ke){var Ye;if(we.indent==="	")Ye="	";else if(typeof we.indent=="number"&&we.indent>0)Ye=B.call(Array(we.indent+1)," ");else return null;return{base:Ye,prev:B.call(Array(ke+1),Ye)}}function rt(we,ke){if(we.length===0)return"";var Ye=`
`+ke.prev+ke.base;return Ye+B.call(we,","+Ye)+`
`+ke.prev}function ct(we,ke){var Ye=q(we),ot=[];if(Ye){ot.length=we.length;for(var xt=0;xt<we.length;xt++)ot[xt]=J(we,xt)?ke(we[xt],we):""}var ut=typeof S=="function"?S(we):[],gt;if(w){gt={};for(var er=0;er<ut.length;er++)gt["$"+ut[er]]=ut[er]}for(var ur in we)J(we,ur)&&(Ye&&String(Number(ur))===ur&&ur<we.length||w&&gt["$"+ur]instanceof Symbol||(E.call(/[^\w$]/,ur)?ot.push(ke(ur,we)+": "+ke(we[ur],we)):ot.push(ur+": "+ke(we[ur],we))));if(typeof S=="function")for(var Tt=0;Tt<ut.length;Tt++)F.call(we,ut[Tt])&&ot.push("["+ke(ut[Tt])+"]: "+ke(we[ut[Tt]],we));return ot}return n7}var i7,r$;function V4e(){if(r$)return i7;r$=1;var t=E8(),e=Bo(),r=function(o,c,u){for(var l=o,f;(f=l.next)!=null;l=f)if(f.key===c)return l.next=f.next,u||(f.next=o.next,o.next=f),f},n=function(o,c){if(o){var u=r(o,c);return u&&u.value}},i=function(o,c,u){var l=r(o,c);l?l.value=u:o.next={key:c,next:o.next,value:u}},s=function(o,c){return o?!!r(o,c):!1},a=function(o,c){if(o)return r(o,c,!0)};return i7=function(){var c,u={assert:function(l){if(!u.has(l))throw new e("Side channel does not contain "+t(l))},delete:function(l){var f=c&&c.next,d=a(c,l);return d&&f&&f===d&&(c=void 0),!!d},get:function(l){return n(c,l)},has:function(l){return s(c,l)},set:function(l,f){c||(c={next:void 0}),i(c,l,f)}};return u},i7}var s7,n$;function Vte(){if(n$)return s7;n$=1;var t=Du(),e=gs(),r=E8(),n=Bo(),i=t("%Map%",!0),s=e("Map.prototype.get",!0),a=e("Map.prototype.set",!0),o=e("Map.prototype.has",!0),c=e("Map.prototype.delete",!0),u=e("Map.prototype.size",!0);return s7=!!i&&function(){var f,d={assert:function(h){if(!d.has(h))throw new n("Side channel does not contain "+r(h))},delete:function(h){if(f){var m=c(f,h);return u(f)===0&&(f=void 0),m}return!1},get:function(h){if(f)return s(f,h)},has:function(h){return f?o(f,h):!1},set:function(h,m){f||(f=new i),a(f,h,m)}};return d},s7}var a7,i$;function q4e(){if(i$)return a7;i$=1;var t=Du(),e=gs(),r=E8(),n=Vte(),i=Bo(),s=t("%WeakMap%",!0),a=e("WeakMap.prototype.get",!0),o=e("WeakMap.prototype.set",!0),c=e("WeakMap.prototype.has",!0),u=e("WeakMap.prototype.delete",!0);return a7=s?function(){var f,d,h={assert:function(m){if(!h.has(m))throw new i("Side channel does not contain "+r(m))},delete:function(m){if(s&&m&&(typeof m=="object"||typeof m=="function")){if(f)return u(f,m)}else if(n&&d)return d.delete(m);return!1},get:function(m){return s&&m&&(typeof m=="object"||typeof m=="function")&&f?a(f,m):d&&d.get(m)},has:function(m){return s&&m&&(typeof m=="object"||typeof m=="function")&&f?c(f,m):!!d&&d.has(m)},set:function(m,p){s&&m&&(typeof m=="object"||typeof m=="function")?(f||(f=new s),o(f,m,p)):n&&(d||(d=n()),d.set(m,p))}};return h}:n,a7}var o7,s$;function qte(){if(s$)return o7;s$=1;var t=Bo(),e=E8(),r=V4e(),n=Vte(),i=q4e(),s=i||n||r;return o7=function(){var o,c={assert:function(u){if(!c.has(u))throw new t("Side channel does not contain "+e(u))},delete:function(u){return!!o&&o.delete(u)},get:function(u){return o&&o.get(u)},has:function(u){return!!o&&o.has(u)},set:function(u,l){o||(o=s()),o.set(u,l)}};return c},o7}var c7,a$;function z4e(){if(a$)return c7;a$=1;var t=GR(),e=qte()(),r=Bo(),n={assert:function(i,s){if(!i||typeof i!="object"&&typeof i!="function")throw new r("`O` is not an object");if(typeof s!="string")throw new r("`slot` must be a string");if(e.assert(i),!n.has(i,s))throw new r("`"+s+"` is not present on `O`")},get:function(i,s){if(!i||typeof i!="object"&&typeof i!="function")throw new r("`O` is not an object");if(typeof s!="string")throw new r("`slot` must be a string");var a=e.get(i);return a&&a["$"+s]},has:function(i,s){if(!i||typeof i!="object"&&typeof i!="function")throw new r("`O` is not an object");if(typeof s!="string")throw new r("`slot` must be a string");var a=e.get(i);return!!a&&t(a,"$"+s)},set:function(i,s,a){if(!i||typeof i!="object"&&typeof i!="function")throw new r("`O` is not an object");if(typeof s!="string")throw new r("`slot` must be a string");var o=e.get(i);o||(o={},e.set(i,o)),o["$"+s]=a}};return Object.freeze&&Object.freeze(n),c7=n,c7}var l7,o$;function H4e(){if(o$)return l7;o$=1;var t=z4e(),e=$R(),r=typeof StopIteration=="object"?StopIteration:null;return l7=function(i){if(!r)throw new e("this environment lacks StopIteration");t.set(i,"[[Done]]",!1);var s={next:function(){var o=t.get(this,"[[Iterator]]"),c=!!t.get(o,"[[Done]]");try{return{done:c,value:c?void 0:o.next()}}catch(u){if(t.set(o,"[[Done]]",!0),u!==r)throw u;return{done:!0,value:void 0}}}};return t.set(s,"[[Iterator]]",i),s},l7}var u7,c$;function zte(){if(c$)return u7;c$=1;var t={}.toString;return u7=Array.isArray||function(e){return t.call(e)=="[object Array]"},u7}var f7,l$;function Hte(){if(l$)return f7;l$=1;var t=gs(),e=t("String.prototype.valueOf"),r=function(o){try{return e(o),!0}catch{return!1}},n=t("Object.prototype.toString"),i="[object String]",s=fd()();return f7=function(o){return typeof o=="string"?!0:!o||typeof o!="object"?!1:s?r(o):n(o)===i},f7}var d7,u$;function Wte(){if(u$)return d7;u$=1;var t=typeof Map=="function"&&Map.prototype?Map:null,e=typeof Set=="function"&&Set.prototype?Set:null,r;t||(r=function(a){return!1});var n=t?Map.prototype.has:null,i=e?Set.prototype.has:null;return!r&&!n&&(r=function(a){return!1}),d7=r||function(a){if(!a||typeof a!="object")return!1;try{if(n.call(a),i)try{i.call(a)}catch{return!0}return a instanceof t}catch{}return!1},d7}var h7,f$;function Gte(){if(f$)return h7;f$=1;var t=typeof Map=="function"&&Map.prototype?Map:null,e=typeof Set=="function"&&Set.prototype?Set:null,r;e||(r=function(a){return!1});var n=t?Map.prototype.has:null,i=e?Set.prototype.has:null;return!r&&!i&&(r=function(a){return!1}),h7=r||function(a){if(!a||typeof a!="object")return!1;try{if(i.call(a),n)try{n.call(a)}catch{return!0}return a instanceof e}catch{}return!1},h7}var d$;function W4e(){if(d$)return Am.exports;d$=1;var t=KR(),e=H4e();if(qR()()||x8()()){var r=Symbol.iterator;Am.exports=function(D){if(D!=null&&typeof D[r]<"u")return D[r]();if(t(D))return Array.prototype[r].call(D)}}else{var n=zte(),i=Hte(),s=Du(),a=s("%Map%",!0),o=s("%Set%",!0),c=$te(),u=c("Array.prototype.push"),l=c("String.prototype.charCodeAt"),f=c("String.prototype.slice"),d=function(D,z){var U=D.length;if(z+1>=U)return z+1;var S=l(D,z);if(S<55296||S>56319)return z+1;var T=l(D,z+1);return T<56320||T>57343?z+1:z+2},h=function(D){var z=0;return{next:function(){var S=z>=D.length,T;return S||(T=D[z],z+=1),{done:S,value:T}}}},m=function(D,z){if(n(D)||t(D))return h(D);if(i(D)){var U=0;return{next:function(){var T=d(D,U),w=f(D,U,T);return U=T,{done:T>D.length,value:w}}}}if(z&&typeof D["_es6-shim iterator_"]<"u")return D["_es6-shim iterator_"]()};if(!a&&!o)Am.exports=function(D){if(D!=null)return m(D,!0)};else{var p=Wte(),g=Gte(),v=c("Map.prototype.forEach",!0),y=c("Set.prototype.forEach",!0);if(typeof fn>"u"||!fn.versions||!fn.versions.node)var b=c("Map.prototype.iterator",!0),_=c("Set.prototype.iterator",!0);var x=c("Map.prototype.@@iterator",!0)||c("Map.prototype._es6-shim iterator_",!0),E=c("Set.prototype.@@iterator",!0)||c("Set.prototype._es6-shim iterator_",!0),k=function(D){if(p(D)){if(b)return e(b(D));if(x)return x(D);if(v){var z=[];return v(D,function(S,T){u(z,[T,S])}),h(z)}}if(g(D)){if(_)return e(_(D));if(E)return E(D);if(y){var U=[];return y(D,function(S){u(U,S)}),h(U)}}};Am.exports=function(D){return k(D)||m(D)}}}return Am.exports}var p7,h$;function Kte(){if(h$)return p7;h$=1;var t=function(e){return e!==e};return p7=function(r,n){return r===0&&n===0?1/r===1/n:!!(r===n||t(r)&&t(n))},p7}var m7,p$;function Xte(){if(p$)return m7;p$=1;var t=Kte();return m7=function(){return typeof Object.is=="function"?Object.is:t},m7}var g7,m$;function G4e(){if(m$)return g7;m$=1;var t=Xte(),e=u0();return g7=function(){var n=t();return e(Object,{is:n},{is:function(){return Object.is!==n}}),n},g7}var v7,g$;function K4e(){if(g$)return v7;g$=1;var t=u0(),e=Up(),r=Kte(),n=Xte(),i=G4e(),s=e(n(),Object);return t(s,{getPolyfill:n,implementation:r,shim:i}),v7=s,v7}var y7,v$;function Yte(){if(v$)return y7;v$=1;var t=Up(),e=gs(),r=Du(),n=r("%ArrayBuffer%",!0),i=e("ArrayBuffer.prototype.byteLength",!0),s=e("Object.prototype.toString"),a=!!n&&!i&&new n(0).slice,o=!!a&&t(a);return y7=i||o?function(u){if(!u||typeof u!="object")return!1;try{return i?i(u):o(u,0),!0}catch{return!1}}:n?function(u){return s(u)==="[object ArrayBuffer]"}:function(u){return!1},y7}var b7,y$;function X4e(){if(y$)return b7;y$=1;var t=gs(),e=t("Date.prototype.getDay"),r=function(o){try{return e(o),!0}catch{return!1}},n=t("Object.prototype.toString"),i="[object Date]",s=fd()();return b7=function(o){return typeof o!="object"||o===null?!1:s?r(o):n(o)===i},b7}var w7,b$;function Zte(){if(b$)return w7;b$=1;var t=gs(),e=fd()(),r=GR(),n=l0(),i;if(e){var s=t("RegExp.prototype.exec"),a={},o=function(){throw a},c={toString:o,valueOf:o};typeof Symbol.toPrimitive=="symbol"&&(c[Symbol.toPrimitive]=o),i=function(d){if(!d||typeof d!="object")return!1;var h=n(d,"lastIndex"),m=h&&r(h,"value");if(!m)return!1;try{s(d,c)}catch(p){return p===a}}}else{var u=t("Object.prototype.toString"),l="[object RegExp]";i=function(d){return!d||typeof d!="object"&&typeof d!="function"?!1:u(d)===l}}return w7=i,w7}var _7,w$;function Y4e(){if(w$)return _7;w$=1;var t=gs(),e=t("SharedArrayBuffer.prototype.byteLength",!0);return _7=e?function(n){if(!n||typeof n!="object")return!1;try{return e(n),!0}catch{return!1}}:function(n){return!1},_7}var x7,_$;function Z4e(){if(_$)return x7;_$=1;var t=gs(),e=t("Number.prototype.toString"),r=function(o){try{return e(o),!0}catch{return!1}},n=t("Object.prototype.toString"),i="[object Number]",s=fd()();return x7=function(o){return typeof o=="number"?!0:!o||typeof o!="object"?!1:s?r(o):n(o)===i},x7}var S7,x$;function J4e(){if(x$)return S7;x$=1;var t=gs(),e=t("Boolean.prototype.toString"),r=t("Object.prototype.toString"),n=function(o){try{return e(o),!0}catch{return!1}},i="[object Boolean]",s=fd()();return S7=function(o){return typeof o=="boolean"?!0:o===null||typeof o!="object"?!1:s?n(o):r(o)===i},S7}var $2={exports:{}},E7,S$;function Jte(){if(S$)return E7;S$=1;var t=gs(),e=Zte(),r=t("RegExp.prototype.exec"),n=Bo();return E7=function(s){if(!e(s))throw new n("`regex` must be a RegExp");return function(o){return r(s,o)!==null}},E7}var E$;function Q4e(){if(E$)return $2.exports;E$=1;var t=gs(),e=t("Object.prototype.toString"),r=qR()(),n=Jte();if(r){var i=t("Symbol.prototype.toString"),s=n(/^Symbol\(.*\)$/),a=function(c){return typeof c.valueOf()!="symbol"?!1:s(i(c))};$2.exports=function(c){if(typeof c=="symbol")return!0;if(!c||typeof c!="object"||e(c)!=="[object Symbol]")return!1;try{return a(c)}catch{return!1}}}else $2.exports=function(c){return!1};return $2.exports}var U2={exports:{}},k7,k$;function e6e(){if(k$)return k7;k$=1;var t=typeof BigInt<"u"&&BigInt;return k7=function(){return typeof t=="function"&&typeof BigInt=="function"&&typeof t(42)=="bigint"&&typeof BigInt(42)=="bigint"},k7}var T$;function t6e(){if(T$)return U2.exports;T$=1;var t=e6e()();if(t){var e=BigInt.prototype.valueOf,r=function(i){try{return e.call(i),!0}catch{}return!1};U2.exports=function(i){return i===null||typeof i>"u"||typeof i=="boolean"||typeof i=="string"||typeof i=="number"||typeof i=="symbol"||typeof i=="function"?!1:typeof i=="bigint"?!0:r(i)}}else U2.exports=function(i){return!1};return U2.exports}var T7,A$;function r6e(){if(A$)return T7;A$=1;var t=Hte(),e=Z4e(),r=J4e(),n=Q4e(),i=t6e();return T7=function(a){if(a==null||typeof a!="object"&&typeof a!="function")return null;if(t(a))return"String";if(e(a))return"Number";if(r(a))return"Boolean";if(n(a))return"Symbol";if(i(a))return"BigInt"},T7}var A7,C$;function n6e(){if(C$)return A7;C$=1;var t=typeof WeakMap=="function"&&WeakMap.prototype?WeakMap:null,e=typeof WeakSet=="function"&&WeakSet.prototype?WeakSet:null,r;t||(r=function(a){return!1});var n=t?t.prototype.has:null,i=e?e.prototype.has:null;return!r&&!n&&(r=function(a){return!1}),A7=r||function(a){if(!a||typeof a!="object")return!1;try{if(n.call(a,n),i)try{i.call(a,i)}catch{return!0}return a instanceof t}catch{}return!1},A7}var j2={exports:{}},I$;function i6e(){if(I$)return j2.exports;I$=1;var t=Du(),e=gs(),r=t("%WeakSet%",!0),n=e("WeakSet.prototype.has",!0);if(n){var i=e("WeakMap.prototype.has",!0);j2.exports=function(a){if(!a||typeof a!="object")return!1;try{if(n(a,n),i)try{i(a,i)}catch{return!0}return a instanceof r}catch{}return!1}}else j2.exports=function(a){return!1};return j2.exports}var C7,P$;function s6e(){if(P$)return C7;P$=1;var t=Wte(),e=Gte(),r=n6e(),n=i6e();return C7=function(s){if(s&&typeof s=="object"){if(t(s))return"Map";if(e(s))return"Set";if(r(s))return"WeakMap";if(n(s))return"WeakSet"}return!1},C7}var I7,R$;function a6e(){if(R$)return I7;R$=1;var t=Function.prototype.toString,e=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,r,n;if(typeof e=="function"&&typeof Object.defineProperty=="function")try{r=Object.defineProperty({},"length",{get:function(){throw n}}),n={},e(function(){throw 42},null,r)}catch(y){y!==n&&(e=null)}else e=null;var i=/^\s*class\b/,s=function(b){try{var _=t.call(b);return i.test(_)}catch{return!1}},a=function(b){try{return s(b)?!1:(t.call(b),!0)}catch{return!1}},o=Object.prototype.toString,c="[object Object]",u="[object Function]",l="[object GeneratorFunction]",f="[object HTMLAllCollection]",d="[object HTML document.all class]",h="[object HTMLCollection]",m=typeof Symbol=="function"&&!!Symbol.toStringTag,p=!(0 in[,]),g=function(){return!1};if(typeof document=="object"){var v=document.all;o.call(v)===o.call(document.all)&&(g=function(b){if((p||!b)&&(typeof b>"u"||typeof b=="object"))try{var _=o.call(b);return(_===f||_===d||_===h||_===c)&&b("")==null}catch{}return!1})}return I7=e?function(b){if(g(b))return!0;if(!b||typeof b!="function"&&typeof b!="object")return!1;try{e(b,null,r)}catch(_){if(_!==n)return!1}return!s(b)&&a(b)}:function(b){if(g(b))return!0;if(!b||typeof b!="function"&&typeof b!="object")return!1;if(m)return a(b);if(s(b))return!1;var _=o.call(b);return _!==u&&_!==l&&!/^\[object HTML/.test(_)?!1:a(b)},I7}var P7,O$;function o6e(){if(O$)return P7;O$=1;var t=a6e(),e=Object.prototype.toString,r=Object.prototype.hasOwnProperty,n=function(c,u,l){for(var f=0,d=c.length;f<d;f++)r.call(c,f)&&(l==null?u(c[f],f,c):u.call(l,c[f],f,c))},i=function(c,u,l){for(var f=0,d=c.length;f<d;f++)l==null?u(c.charAt(f),f,c):u.call(l,c.charAt(f),f,c)},s=function(c,u,l){for(var f in c)r.call(c,f)&&(l==null?u(c[f],f,c):u.call(l,c[f],f,c))};function a(o){return e.call(o)==="[object Array]"}return P7=function(c,u,l){if(!t(u))throw new TypeError("iterator must be a function");var f;arguments.length>=3&&(f=l),a(c)?n(c,u,f):typeof c=="string"?i(c,u,f):s(c,u,f)},P7}var R7,B$;function c6e(){return B$||(B$=1,R7=["Float16Array","Float32Array","Float64Array","Int8Array","Int16Array","Int32Array","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array"]),R7}var O7,D$;function l6e(){if(D$)return O7;D$=1;var t=c6e(),e=typeof globalThis>"u"?Ut:globalThis;return O7=function(){for(var n=[],i=0;i<t.length;i++)typeof e[t[i]]=="function"&&(n[n.length]=t[i]);return n},O7}var B7,M$;function XR(){if(M$)return B7;M$=1;var t=o6e(),e=l6e(),r=Up(),n=gs(),i=l0(),s=S8(),a=n("Object.prototype.toString"),o=fd()(),c=typeof globalThis>"u"?Ut:globalThis,u=e(),l=n("String.prototype.slice"),f=n("Array.prototype.indexOf",!0)||function(g,v){for(var y=0;y<g.length;y+=1)if(g[y]===v)return y;return-1},d={__proto__:null};o&&i&&s?t(u,function(p){var g=new c[p];if(Symbol.toStringTag in g&&s){var v=s(g),y=i(v,Symbol.toStringTag);if(!y&&v){var b=s(v);y=i(b,Symbol.toStringTag)}d["$"+p]=r(y.get)}}):t(u,function(p){var g=new c[p],v=g.slice||g.set;v&&(d["$"+p]=r(v))});var h=function(g){var v=!1;return t(d,function(y,b){if(!v)try{"$"+y(g)===b&&(v=l(b,1))}catch{}}),v},m=function(g){var v=!1;return t(d,function(y,b){if(!v)try{y(g),v=l(b,1)}catch{}}),v};return B7=function(g){if(!g||typeof g!="object")return!1;if(!o){var v=l(a(g),8,-1);return f(u,v)>-1?v:v!=="Object"?!1:m(g)}return i?h(g):null},B7}var D7,N$;function u6e(){if(N$)return D7;N$=1;var t=gs(),e=t("ArrayBuffer.prototype.byteLength",!0),r=Yte();return D7=function(i){return r(i)?e?e(i):i.byteLength:NaN},D7}var M7,F$;function f6e(){if(F$)return M7;F$=1;var t=F4e(),e=$te(),r=j4e(),n=Du(),i=W4e(),s=qte(),a=K4e(),o=KR(),c=zte(),u=Yte(),l=X4e(),f=Zte(),d=Y4e(),h=LR(),m=r6e(),p=s6e(),g=XR(),v=u6e(),y=e("SharedArrayBuffer.prototype.byteLength",!0),b=e("Date.prototype.getTime"),_=Object.getPrototypeOf,x=e("Object.prototype.toString"),E=n("%Set%",!0),k=e("Map.prototype.has",!0),B=e("Map.prototype.get",!0),D=e("Map.prototype.size",!0),z=e("Set.prototype.add",!0),U=e("Set.prototype.delete",!0),S=e("Set.prototype.has",!0),T=e("Set.prototype.size",!0);function w(N,H,W,q){for(var G=i(N),Y;(Y=G.next())&&!Y.done;)if(R(H,Y.value,W,q))return U(N,Y.value),!0;return!1}function A(N){if(typeof N>"u")return null;if(typeof N!="object")return typeof N=="symbol"?!1:typeof N=="string"||typeof N=="number"?+N==+N:!0}function F(N,H,W,q,G,Y){var te=A(W);if(te!=null)return te;var Q=B(H,te),j=t({},G,{strict:!1});return typeof Q>"u"&&!k(H,te)||!R(q,Q,j,Y)?!1:!k(N,te)&&R(q,Q,j,Y)}function P(N,H,W){var q=A(W);return q??(S(H,q)&&!S(N,q))}function O(N,H,W,q,G,Y){for(var te=i(N),Q,j;(Q=te.next())&&!Q.done;)if(j=Q.value,R(W,j,G,Y)&&R(q,B(H,j),G,Y))return U(N,j),!0;return!1}function R(N,H,W,q){var G=W||{};if(G.strict?a(N,H):N===H)return!0;var Y=m(N),te=m(H);if(Y!==te)return!1;if(!N||!H||typeof N!="object"&&typeof H!="object")return G.strict?a(N,H):N==H;var Q=q.has(N),j=q.has(H),Z;if(Q&&j){if(q.get(N)===q.get(H))return!0}else Z={};return Q||q.set(N,Z),j||q.set(H,Z),L(N,H,G,q)}function I(N){return!N||typeof N!="object"||typeof N.length!="number"||typeof N.copy!="function"||typeof N.slice!="function"||N.length>0&&typeof N[0]!="number"?!1:!!(N.constructor&&N.constructor.isBuffer&&N.constructor.isBuffer(N))}function C(N,H,W,q){if(T(N)!==T(H))return!1;for(var G=i(N),Y=i(H),te,Q,j;(te=G.next())&&!te.done;)if(te.value&&typeof te.value=="object")j||(j=new E),z(j,te.value);else if(!S(H,te.value)){if(W.strict||!P(N,H,te.value))return!1;j||(j=new E),z(j,te.value)}if(j){for(;(Q=Y.next())&&!Q.done;)if(Q.value&&typeof Q.value=="object"){if(!w(j,Q.value,W.strict,q))return!1}else if(!W.strict&&!S(N,Q.value)&&!w(j,Q.value,W.strict,q))return!1;return T(j)===0}return!0}function M(N,H,W,q){if(D(N)!==D(H))return!1;for(var G=i(N),Y=i(H),te,Q,j,Z,V,ne;(te=G.next())&&!te.done;)if(Z=te.value[0],V=te.value[1],Z&&typeof Z=="object")j||(j=new E),z(j,Z);else if(ne=B(H,Z),typeof ne>"u"&&!k(H,Z)||!R(V,ne,W,q)){if(W.strict||!F(N,H,Z,V,W,q))return!1;j||(j=new E),z(j,Z)}if(j){for(;(Q=Y.next())&&!Q.done;)if(Z=Q.value[0],ne=Q.value[1],Z&&typeof Z=="object"){if(!O(j,N,Z,ne,W,q))return!1}else if(!W.strict&&(!N.has(Z)||!R(B(N,Z),ne,W,q))&&!O(j,N,Z,ne,t({},W,{strict:!1}),q))return!1;return T(j)===0}return!0}function L(N,H,W,q){var G,Y;if(typeof N!=typeof H||N==null||H==null||x(N)!==x(H)||o(N)!==o(H))return!1;var te=c(N),Q=c(H);if(te!==Q)return!1;var j=N instanceof Error,Z=H instanceof Error;if(j!==Z||(j||Z)&&(N.name!==H.name||N.message!==H.message))return!1;var V=f(N),ne=f(H);if(V!==ne||(V||ne)&&(N.source!==H.source||r(N)!==r(H)))return!1;var se=l(N),J=l(H);if(se!==J||(se||J)&&b(N)!==b(H)||W.strict&&_&&_(N)!==_(H))return!1;var ee=g(N),ie=g(H);if(ee!==ie)return!1;if(ee||ie){if(N.length!==H.length)return!1;for(G=0;G<N.length;G++)if(N[G]!==H[G])return!1;return!0}var le=I(N),ue=I(H);if(le!==ue)return!1;if(le||ue){if(N.length!==H.length)return!1;for(G=0;G<N.length;G++)if(N[G]!==H[G])return!1;return!0}var me=u(N),be=u(H);if(me!==be)return!1;if(me||be)return v(N)!==v(H)?!1:typeof Uint8Array=="function"&&R(new Uint8Array(N),new Uint8Array(H),W,q);var _e=d(N),xe=d(H);if(_e!==xe)return!1;if(_e||xe)return y(N)!==y(H)?!1:typeof Uint8Array=="function"&&R(new Uint8Array(N),new Uint8Array(H),W,q);if(typeof N!=typeof H)return!1;var Be=h(N),re=h(H);if(Be.length!==re.length)return!1;for(Be.sort(),re.sort(),G=Be.length-1;G>=0;G--)if(Be[G]!=re[G])return!1;for(G=Be.length-1;G>=0;G--)if(Y=Be[G],!R(N[Y],H[Y],W,q))return!1;var K=p(N),X=p(H);return K!==X?!1:K==="Set"||X==="Set"?C(N,H,W,q):K==="Map"?M(N,H,W,q):!0}return M7=function(H,W,q){return R(H,W,q,s())},M7}var d6e=f6e();const k8=In(d6e),h6e=Symbol.for("@libp2p/connection"),K1=Symbol.for("@libp2p/content-routing"),ov=Symbol.for("@libp2p/peer-discovery"),YR=Symbol.for("@libp2p/peer-id");function Qte(t){return!!t?.[YR]}const X1=Symbol.for("@libp2p/peer-routing"),vy="keep-alive",r4="StrictSign",ZR="StrictNoSign";var yo;(function(t){t.Accept="accept",t.Ignore="ignore",t.Reject="reject"})(yo||(yo={}));const yy=Symbol.for("@libp2p/transport");var Wf;(function(t){t[t.FATAL_ALL=0]="FATAL_ALL",t[t.NO_FATAL=1]="NO_FATAL"})(Wf||(Wf={}));let hl=class extends Error{static name="AbortError";constructor(e="The operation was aborted"){super(e),this.name="AbortError"}};class p6e extends Error{static name="UnexpectedPeerError";constructor(e="Unexpected Peer"){super(e),this.name="UnexpectedPeerError"}}let ere=class extends Error{static name="InvalidCryptoExchangeError";constructor(e="Invalid crypto exchange"){super(e),this.name="InvalidCryptoExchangeError"}},Ze=class extends Error{static name="InvalidParametersError";constructor(e="Invalid parameters"){super(e),this.name="InvalidParametersError"}};class n4 extends Error{static name="InvalidPublicKeyError";constructor(e="Invalid public key"){super(e),this.name="InvalidPublicKeyError"}}class tre extends Error{static name="InvalidPrivateKeyError";constructor(e="Invalid private key"){super(e),this.name="InvalidPrivateKeyError"}}class m6e extends Error{static name="ConnectionClosingError";constructor(e="The connection is closing"){super(e),this.name="ConnectionClosingError"}}class rre extends Error{static name="ConnectionClosedError";constructor(e="The connection is closed"){super(e),this.name="ConnectionClosedError"}}class nre extends Error{static name="ConnectionFailedError";constructor(e="Connection failed"){super(e),this.name="ConnectionFailedError"}}class d1 extends Error{static name="MuxerClosedError";constructor(e="The muxer is closed"){super(e),this.name="MuxerClosedError"}}class g6e extends Error{static name="StreamResetError";constructor(e="The stream has been reset"){super(e),this.name="StreamResetError"}}class oC extends Error{static name="StreamStateError";constructor(e="The stream is in an invalid state"){super(e),this.name="StreamStateError"}}let Bs=class extends Error{static name="NotFoundError";constructor(e="Not found"){super(e),this.name="NotFoundError"}};class ire extends Error{static name="InvalidPeerIdError";constructor(e="Invalid PeerID"){super(e),this.name="InvalidPeerIdError"}}class T8 extends Error{static name="InvalidMultiaddrError";constructor(e="Invalid multiaddr"){super(e),this.name="InvalidMultiaddrError"}}class v6e extends Error{static name="InvalidCIDError";constructor(e="Invalid CID"){super(e),this.name="InvalidCIDError"}}class JR extends Error{static name="InvalidMultihashError";constructor(e="Invalid Multihash"){super(e),this.name="InvalidMultihashError"}}class A8 extends Error{static name="UnsupportedProtocolError";constructor(e="Unsupported protocol error"){super(e),this.name="UnsupportedProtocolError"}}class On extends Error{static name="InvalidMessageError";constructor(e="Invalid message"){super(e),this.name="InvalidMessageError"}}class y6e extends Error{static name="ProtocolError";constructor(e="Protocol error"){super(e),this.name="ProtocolError"}}let C8=class extends Error{static name="TimeoutError";constructor(e="Timed out"){super(e),this.name="TimeoutError"}};class cv extends Error{static name="NotStartedError";constructor(e="Not started"){super(e),this.name="NotStartedError"}}class Ag extends Error{static name="DialError";constructor(e="Dial error"){super(e),this.name="DialError"}}class cC extends Error{static name="ListenError";constructor(e="Listen error"){super(e),this.name="ListenError"}}class sre extends Error{static name="LimitedConnectionError";constructor(e="Limited connection"){super(e),this.name="LimitedConnectionError"}}class b6e extends Error{static name="TooManyInboundProtocolStreamsError";constructor(e="Too many inbound protocol streams"){super(e),this.name="TooManyInboundProtocolStreamsError"}}class QR extends Error{static name="TooManyOutboundProtocolStreamsError";constructor(e="Too many outbound protocol streams"){super(e),this.name="TooManyOutboundProtocolStreamsError"}}class Vp extends Error{static name="UnsupportedKeyTypeError";constructor(e="Unsupported key type"){super(e),this.name="UnsupportedKeyTypeError"}}class oi extends EventTarget{#e=new Map;constructor(){super()}listenerCount(e){const r=this.#e.get(e);return r==null?0:r.length}addEventListener(e,r,n){super.addEventListener(e,r,n);let i=this.#e.get(e);i==null&&(i=[],this.#e.set(e,i)),i.push({callback:r,once:(n!==!0&&n!==!1&&n?.once)??!1})}removeEventListener(e,r,n){super.removeEventListener(e.toString(),r??null,n);let i=this.#e.get(e);i!=null&&(i=i.filter(({callback:s})=>s!==r),this.#e.set(e,i))}dispatchEvent(e){const r=super.dispatchEvent(e);let n=this.#e.get(e.type);return n==null||(n=n.filter(({once:i})=>!i),this.#e.set(e.type,n)),r}safeDispatchEvent(e,r={}){return this.dispatchEvent(new CustomEvent(e,r))}}function eO(t){return t!=null&&typeof t.start=="function"&&typeof t.stop=="function"}async function _u(...t){const e=[];for(const r of t)eO(r)&&e.push(r);await Promise.all(e.map(async r=>{r.beforeStart!=null&&await r.beforeStart()})),await Promise.all(e.map(async r=>{await r.start()})),await Promise.all(e.map(async r=>{r.afterStart!=null&&await r.afterStart()}))}async function dd(...t){const e=[];for(const r of t)eO(r)&&e.push(r);await Promise.all(e.map(async r=>{r.beforeStop!=null&&await r.beforeStop()})),await Promise.all(e.map(async r=>{await r.stop()})),await Promise.all(e.map(async r=>{r.afterStop!=null&&await r.afterStop()}))}const Ui=Symbol.for("@libp2p/service-capabilities"),xu=Symbol.for("@libp2p/service-dependencies");let w6e=class extends Ns.EventEmitter{condition;rsultatPrt;fOublier;rsultat;f;constructor(e,r){super(),this.condition=r||(()=>!0),this.rsultatPrt=!1,this.f=e,this.initialiser()}async initialiser(){const e=async r=>{await this.condition(r)&&(this.rsultat=r,this.rsultatPrt=!0,this.fOublier&&this.lorsquePrt())};this.fOublier=await this.f(e),this.lorsquePrt()}lorsquePrt(){if(this.rsultatPrt){if(!this.fOublier)throw new Error("Fuite !!");this.fOublier&&this.fOublier(),this.emit("fini",this.rsultat)}}};const _6e=async({fRacine:t,f:e,fSuivre:r})=>{let n,i,s=!0;const a=await t({fSuivreRacine:async o=>{o===void 0&&s&&(s=!1,await e(void 0)),o!==i&&(i=o,n&&await n(),i?n=await r({id:i,fSuivreBd:e}):(await e(void 0),n=void 0))}});return async()=>{await a(),n&&await n()}},lC=async function(t,e){const r=new w6e(t,e);return(await Ns.once(r,"fini"))[0]},x6e=async()=>{},S6e=t=>async e=>{if(e!==void 0)return await t(e)},E6e=t=>{let e=!1,r,n=x6e;return i=>new Promise(s=>{if(e&&JSON.stringify(i)===r)return;e=!0,n(),r=JSON.stringify(i);const a=setTimeout(()=>s(!0),t);n=()=>{clearTimeout(a),s(!1)}})},k6e=async({fListe:t,f:e,fBranche:r,fIdBdDeBranche:n=a=>a,fRduction:i=a=>[...new Set(a.flat())],fCode:s=a=>a})=>{const a={},o={};let c=!1;const u=async()=>{if(!c||Object.values(a).length&&Object.values(a).every(v=>!v.djvalue))return;const p=Object.values(a).map(v=>v.donnes).filter(v=>v!==void 0),g=i(p);await e(g)},l=new Io,d=await t(async p=>{if(await l.acquire("racine"),p.some(x=>typeof s(x)!="string"))throw console.error("Dfinir fCode si les lments ne sont pas en format texte (chanes)."),new Error("Dfinir fCode si les lments ne sont pas en format texte (chanes).");const g=Object.fromEntries(p.map(x=>[s(x),x])),v=Object.keys(a);let y=Object.keys(g).filter(x=>!v.includes(x));const b=v.filter(x=>!Object.keys(g).includes(x)),_=Object.entries(g).filter(x=>!k8(o[x[0]],x[1])).map(x=>x[0]);y.push(..._),y=[...new Set(y)],await Promise.all(_.map(async x=>{if(a[x]){const E=a[x].fOublier;E&&await E(),delete a[x]}})),await Promise.all(b.map(async x=>{const E=a[x].fOublier;E&&await E(),delete a[x]})),await Promise.all(y.map(async x=>{a[x]={djvalue:!1};const E=g[x];o[x]=E;const k=n(E),D=await r(k,async z=>{a[x].donnes=z,a[x].djvalue=!0,await u()},E);a[x].fOublier=D})),c=!0,await u(),l.release("racine")});let h;const m=async()=>{await h(),await Promise.all(Object.values(a).map(p=>p.fOublier&&p.fOublier()))};return typeof d=="function"?(h=d,m):(h=d.fOublier,Object.assign({},d,{fOublier:m}))};var N7={},L$;function T6e(){return L$||(L$=1,function(t){const e={};function r(l){return typeof l=="function"}function n(l){return l===Object(l)}function i(l,f){let d=!1;return typeof f=="string"?f=[f]:Object.prototype.toString.call(f)==="[object Array]"?f.length===0&&(d=!0):d=!0,l?f:d}function s(l,f){let d;if(r(e[l])){try{d=e[l](f)}catch(h){d=["Problem with custom definition for "+l+": "+h]}if(typeof result=="string"&&(d=[d]),Object.prototype.toString.call(d)==="[object Array]")return d}return[]}t.define=(l,f)=>l in u&&r(f)?(e[l]=f,!0):!1,t.isPosition=(l,f=!1)=>{let d=[];return Array.isArray(l)?(l.length<=1&&d.push("Position must be at least two elements"),l.forEach((h,m)=>{typeof h!="number"&&d.push("Position must only contain numbers. Item "+h+" at index "+m+" is invalid.")})):d.push("Position must be an array"),d=d.concat(s("Position",l)),i(f,d)},t.isGeoJSONObject=t.valid=(l,f=!1)=>{if(n(l)){let d=[];if("type"in l){if(o[l.type])return o[l.type](l,f);if(c[l.type])return c[l.type](l,f);d.push('type must be one of: "Point", "MultiPoint", "LineString", "MultiLineString", "Polygon", "MultiPolygon", "GeometryCollection", "Feature", or "FeatureCollection"')}else d.push('must have a member with the name "type"');return d=d.concat(s("GeoJSONObject",l)),i(f,d)}else return i(f,["must be a JSON Object"])},t.isGeometryObject=(l,f=!1)=>{if(!n(l))return i(f,["must be a JSON Object"]);let d=[];if("type"in l){if(c[l.type])return c[l.type](l,f);d.push('type must be one of: "Point", "MultiPoint", "LineString", "MultiLineString", "Polygon", "MultiPolygon" or "GeometryCollection"')}else d.push('must have a member with the name "type"');return d=d.concat(s("GeometryObject",l)),i(f,d)},t.isPoint=(l,f=!1)=>{if(!n(l))return i(f,["must be a JSON Object"]);let d=[];if("bbox"in l){const h=t.isBbox(l.bbox,!0);h.length&&(d=d.concat(h))}if("type"in l?l.type!=="Point"&&d.push('type must be "Point"'):d.push('must have a member with the name "type"'),"coordinates"in l){const h=t.isPosition(l.coordinates,!0);h.length&&(d=d.concat(h))}else d.push('must have a member with the name "coordinates"');return d=d.concat(s("Point",l)),i(f,d)},t.isMultiPointCoor=(l,f=!1)=>{let d=[];return Array.isArray(l)?l.forEach((h,m)=>{const p=t.isPosition(h,!0);p.length&&(p[0]="at "+m+": ".concat(p[0]),d=d.concat(p))}):d.push("coordinates must be an array"),i(f,d)},t.isMultiPoint=(l,f=!1)=>{if(!n(l))return i(f,["must be a JSON Object"]);let d=[];if("bbox"in l){const h=t.isBbox(l.bbox,!0);h.length&&(d=d.concat(h))}if("type"in l?l.type!=="MultiPoint"&&d.push('type must be "MultiPoint"'):d.push('must have a member with the name "type"'),"coordinates"in l){const h=t.isMultiPointCoor(l.coordinates,!0);h.length&&(d=d.concat(h))}else d.push('must have a member with the name "coordinates"');return d=d.concat(s("MultiPoint",l)),i(f,d)},t.isLineStringCoor=(l,f=!1)=>{let d=[];return Array.isArray(l)?l.length>1?l.forEach((h,m)=>{const p=t.isPosition(h,!0);p.length&&(p[0]="at "+m+": ".concat(p[0]),d=d.concat(p))}):d.push("coordinates must have at least two elements"):d.push("coordinates must be an array"),i(f,d)},t.isLineString=(l,f=!1)=>{if(!n(l))return i(f,["must be a JSON Object"]);let d=[];if("bbox"in l){const h=t.isBbox(l.bbox,!0);h.length&&(d=d.concat(h))}if("type"in l?l.type!=="LineString"&&d.push('type must be "LineString"'):d.push('must have a member with the name "type"'),"coordinates"in l){const h=t.isLineStringCoor(l.coordinates,!0);h.length&&(d=d.concat(h))}else d.push('must have a member with the name "coordinates"');return d=d.concat(s("LineString",l)),i(f,d)},t.isMultiLineStringCoor=(l,f=!1)=>{let d=[];return Array.isArray(l)?l.forEach((h,m)=>{const p=t.isLineStringCoor(h,!0);p.length&&(p[0]="at "+m+": ".concat(p[0]),d=d.concat(p))}):d.push("coordinates must be an array"),i(f,d)},t.isMultiLineString=(l,f=!1)=>{if(!n(l))return i(f,["must be a JSON Object"]);let d=[];if("bbox"in l){const h=t.isBbox(l.bbox,!0);h.length&&(d=d.concat(h))}if("type"in l?l.type!=="MultiLineString"&&d.push('type must be "MultiLineString"'):d.push('must have a member with the name "type"'),"coordinates"in l){const h=t.isMultiLineStringCoor(l.coordinates,!0);h.length&&(d=d.concat(h))}else d.push('must have a member with the name "coordinates"');return d=d.concat(s("MultiPoint",l)),i(f,d)};function a(l,f){let d=[];return Array.isArray(l)?(l.forEach((h,m)=>{const p=t.isPosition(h,!0);p.length&&(p[0]="at "+m+": ".concat(p[0]),d=d.concat(p))}),l[0].toString()!==l[l.length-1].toString()&&d.push("The first and last positions must be equivalent"),l.length<4&&d.push("coordinates must have at least four positions")):d.push("coordinates must be an array"),i(f,d)}t.isPolygonCoor=(l,f=!1)=>{let d=[];return Array.isArray(l)?l.forEach((h,m)=>{const p=a(h,!0);p.length&&(p[0]="at "+m+": ".concat(p[0]),d=d.concat(p))}):d.push("coordinates must be an array"),i(f,d)},t.isPolygon=(l,f=!1)=>{if(!n(l))return i(f,["must be a JSON Object"]);let d=[];if("bbox"in l){const h=t.isBbox(l.bbox,!0);h.length&&(d=d.concat(h))}if("type"in l?l.type!=="Polygon"&&d.push('type must be "Polygon"'):d.push('must have a member with the name "type"'),"coordinates"in l){const h=t.isPolygonCoor(l.coordinates,!0);h.length&&(d=d.concat(h))}else d.push('must have a member with the name "coordinates"');return d=d.concat(s("Polygon",l)),i(f,d)},t.isMultiPolygonCoor=(l,f=!1)=>{let d=[];return Array.isArray(l)?l.forEach((h,m)=>{const p=t.isPolygonCoor(h,!0);p.length&&(p[0]="at "+m+": ".concat(p[0]),d=d.concat(p))}):d.push("coordinates must be an array"),i(f,d)},t.isMultiPolygon=(l,f=!1)=>{if(!n(l))return i(f,["must be a JSON Object"]);let d=[];if("bbox"in l){const h=t.isBbox(l.bbox,!0);h.length&&(d=d.concat(h))}if("type"in l?l.type!=="MultiPolygon"&&d.push('type must be "MultiPolygon"'):d.push('must have a member with the name "type"'),"coordinates"in l){const h=t.isMultiPolygonCoor(l.coordinates,!0);h.length&&(d=d.concat(h))}else d.push('must have a member with the name "coordinates"');return d=d.concat(s("MultiPolygon",l)),i(f,d)},t.isGeometryCollection=(l,f=!1)=>{if(!n(l))return i(f,["must be a JSON Object"]);let d=[];if("bbox"in l){const h=t.isBbox(l.bbox,!0);h.length&&(d=d.concat(h))}return"type"in l?l.type!=="GeometryCollection"&&d.push('type must be "GeometryCollection"'):d.push('must have a member with the name "type"'),"geometries"in l?Array.isArray(l.geometries)?l.geometries.forEach((h,m)=>{const p=t.isGeometryObject(h,!0);p.length&&(p[0]="at "+m+": ".concat(p[0]),d=d.concat(p))}):d.push('"geometries" must be an array'):d.push('must have a member with the name "geometries"'),d=d.concat(s("GeometryCollection",l)),i(f,d)},t.isFeature=(l,f=!1)=>{if(!n(l))return i(f,["must be a JSON Object"]);let d=[];if("bbox"in l){const h=t.isBbox(l.bbox,!0);h.length&&(d=d.concat(h))}if("type"in l?l.type!=="Feature"&&d.push('type must be "Feature"'):d.push('must have a member with the name "type"'),"properties"in l||d.push('must have a member with the name "properties"'),"geometry"in l){if(l.geometry!==null){const h=t.isGeometryObject(l.geometry,!0);h.length&&(d=d.concat(h))}}else d.push('must have a member with the name "geometry"');return d=d.concat(s("Feature",l)),i(f,d)},t.isFeatureCollection=(l,f=!1)=>{if(!n(l))return i(f,["must be a JSON Object"]);let d=[];if("bbox"in l){const h=t.isBbox(l.bbox,!0);h.length&&(d=h)}return"type"in l?l.type!=="FeatureCollection"&&d.push('type must be "FeatureCollection"'):d.push('must have a member with the name "type"'),"features"in l?Array.isArray(l.features)?l.features.forEach((h,m)=>{const p=t.isFeature(h,!0);p.length&&(p[0]="at "+m+": ".concat(p[0]),d=d.concat(p))}):d.push('"Features" must be an array'):d.push('must have a member with the name "Features"'),d=d.concat(s("FeatureCollection",l)),i(f,d)},t.isBbox=(l,f=!1)=>{let d=[];return Array.isArray(l)?l.length%2!==0&&d.push("bbox, must be a 2*n array"):d.push("bbox must be an array"),d=d.concat(s("Bbox",l)),i(f,d)};const o={Feature:t.isFeature,FeatureCollection:t.isFeatureCollection},c={Point:t.isPoint,MultiPoint:t.isMultiPoint,LineString:t.isLineString,MultiLineString:t.isMultiLineString,Polygon:t.isPolygon,MultiPolygon:t.isMultiPolygon,GeometryCollection:t.isGeometryCollection},u={Feature:t.isFeature,FeatureCollection:t.isFeatureCollection,Point:t.isPoint,MultiPoint:t.isMultiPoint,LineString:t.isLineString,MultiLineString:t.isMultiLineString,Polygon:t.isPolygon,MultiPolygon:t.isMultiPolygon,GeometryCollection:t.isGeometryCollection,Bbox:t.isBbox,Position:t.isPosition,GeoJSON:t.isGeoJSONObject,GeometryObject:t.isGeometryObject};t.allTypes=u}(N7)),N7}var A6e=T6e();const C6e=In(A6e);var c3={exports:{}},I6e=c3.exports,$$;function P6e(){return $$||($$=1,function(t,e){(function(r,n){t.exports=n()})(I6e,function(){var r=typeof Promise=="function",n=function(k){if(typeof globalThis=="object")return globalThis;Object.defineProperty(k,"typeDetectGlobalObject",{get:function(){return this},configurable:!0});var B=typeDetectGlobalObject;return delete k.typeDetectGlobalObject,B}(Object.prototype),i=typeof Symbol<"u",s=typeof Map<"u",a=typeof Set<"u",o=typeof WeakMap<"u",c=typeof WeakSet<"u",u=typeof DataView<"u",l=i&&typeof Symbol.iterator<"u",f=i&&typeof Symbol.toStringTag<"u",d=a&&typeof Set.prototype.entries=="function",h=s&&typeof Map.prototype.entries=="function",m=d&&Object.getPrototypeOf(new Set().entries()),p=h&&Object.getPrototypeOf(new Map().entries()),g=l&&typeof Array.prototype[Symbol.iterator]=="function",v=g&&Object.getPrototypeOf([][Symbol.iterator]()),y=l&&typeof String.prototype[Symbol.iterator]=="function",b=y&&Object.getPrototypeOf(""[Symbol.iterator]()),_=8,x=-1;function E(k){var B=typeof k;if(B!=="object")return B;if(k===null)return"null";if(k===n)return"global";if(Array.isArray(k)&&(f===!1||!(Symbol.toStringTag in k)))return"Array";if(typeof window=="object"&&window!==null){if(typeof window.location=="object"&&k===window.location)return"Location";if(typeof window.document=="object"&&k===window.document)return"Document";if(typeof window.navigator=="object"){if(typeof window.navigator.mimeTypes=="object"&&k===window.navigator.mimeTypes)return"MimeTypeArray";if(typeof window.navigator.plugins=="object"&&k===window.navigator.plugins)return"PluginArray"}if((typeof window.HTMLElement=="function"||typeof window.HTMLElement=="object")&&k instanceof window.HTMLElement){if(k.tagName==="BLOCKQUOTE")return"HTMLQuoteElement";if(k.tagName==="TD")return"HTMLTableDataCellElement";if(k.tagName==="TH")return"HTMLTableHeaderCellElement"}}var D=f&&k[Symbol.toStringTag];if(typeof D=="string")return D;var z=Object.getPrototypeOf(k);return z===RegExp.prototype?"RegExp":z===Date.prototype?"Date":r&&z===Promise.prototype?"Promise":a&&z===Set.prototype?"Set":s&&z===Map.prototype?"Map":c&&z===WeakSet.prototype?"WeakSet":o&&z===WeakMap.prototype?"WeakMap":u&&z===DataView.prototype?"DataView":s&&z===p?"Map Iterator":a&&z===m?"Set Iterator":g&&z===v?"Array Iterator":y&&z===b?"String Iterator":z===null?"Object":Object.prototype.toString.call(k).slice(_,x)}return E})}(c3)),c3.exports}var R6e=P6e();const O6e=In(R6e),tO=typeof Buffer<"u",B6e=tO&&typeof Buffer.from<"u",D6e=tO?function(e){return Buffer.isBuffer(e)}:function(){return!1},M6e=B6e?function(e){return Buffer.from(e)}:tO?function(e){return new Buffer(e)}:function(e){return e};function Y1(t){return D6e(t)?"Buffer":O6e(t)}const N6e=new Set(["Arguments","Array","Map","Object","Set"]);function F6e(t,e,r=null){switch(r||Y1(t)){case"Arguments":case"Array":case"Object":return t[e];case"Map":return t.get(e);case"Set":return e}}function uC(t){return N6e.has(t)}function U$(t,e,r,n=null){switch(n||Y1(t)){case"Arguments":case"Array":case"Object":t[e]=r;break;case"Map":t.set(e,r);break;case"Set":t.add(r);break}return t}const L6e=typeof globalThis<"u"&&globalThis!==null&&globalThis.Object===Object&&globalThis,$6e=typeof global<"u"&&global!==null&&global.Object===Object&&global,U6e=typeof self<"u"&&self!==null&&self.Object===Object&&self,F7=L6e||$6e||U6e||Function("return this")();function j6e(t){return t.slice(0)}function V6e(t){return new Boolean(t.valueOf())}function q6e(t){return new DataView(t.buffer)}function z6e(t){return M6e(t)}function H6e(t){return new Date(t.getTime())}function W6e(t){return new Number(t)}function G6e(t){return new RegExp(t.source,t.flags)}function K6e(t){return new String(t)}function Bl(t,e){return F7[e].from?F7[e].from(t):new F7[e](t)}function Vs(t){return t}function j$(){return[]}function X6e(){return new Map}function Y6e(){return{}}function Z6e(){return new Set}const J6e=new Map([["ArrayBuffer",j6e],["Boolean",V6e],["Buffer",z6e],["DataView",q6e],["Date",H6e],["Number",W6e],["RegExp",G6e],["String",K6e],["Float32Array",Bl],["Float64Array",Bl],["Int16Array",Bl],["Int32Array",Bl],["Int8Array",Bl],["Uint16Array",Bl],["Uint32Array",Bl],["Uint8Array",Bl],["Uint8ClampedArray",Bl],["Array Iterator",Vs],["Map Iterator",Vs],["Promise",Vs],["Set Iterator",Vs],["String Iterator",Vs],["function",Vs],["global",Vs],["WeakMap",Vs],["WeakSet",Vs],["boolean",Vs],["null",Vs],["number",Vs],["string",Vs],["symbol",Vs],["undefined",Vs],["Arguments",j$],["Array",j$],["Map",X6e],["Object",Y6e],["Set",Z6e]]);function Q6e(){}function fC(t,e=null,r=Q6e){arguments.length===2&&typeof e=="function"&&(r=e,e=null);const n=e||Y1(t),i=J6e.get(n);if(n==="Object"){const s=r(t,n);if(s!==void 0)return s}return i?i(t,n):t}function qp(t,e={}){typeof e=="function"&&(e={customizer:e});const{customizer:r}=e,n=Y1(t);if(!uC(n))return dC(t,null,null,null);const i=fC(t,n,r),s=new WeakMap([[t,i]]),a=new WeakSet([t]);return dC(t,i,s,a)}function dC(t,e,r,n,i){const s=Y1(t),a=fC(t,s);if(!uC(s))return a;let o;switch(s){case"Arguments":case"Array":o=Object.keys(t);break;case"Object":o=Object.keys(t),o.push(...Object.getOwnPropertySymbols(t));break;case"Map":case"Set":o=t.keys();break}for(let c of o){const u=F6e(t,c,s);if(n.has(u))U$(e,c,r.get(u),s);else{const l=Y1(u),f=fC(u,l);uC(l)&&(r.set(u,f),n.add(u)),U$(e,c,dC(u,f,r,n),s)}}return e}function Df(t,e){const r=e.find(s=>t[s]!==void 0),n=Object.values(t)[0];return r?t[r]:n}async function are(t,e,r){r.endsWith(".zip")||(r=`${r}.zip`);const n=new rC;for(const s of t)n.file(s.nom,s.octets);const i=n.folder("sfip");for(const s of e)i.file(s.nom,s.octets);await hC({fichierZip:n,nomFichier:r})}async function hC({fichierZip:t,nomFichier:e}){if(vi||gi){const r=await qt(()=>Promise.resolve().then(()=>Is),void 0),n=t.generateNodeStream();r.mkdirSync(uu.dirname(e),{recursive:!0});const i=r.createWriteStream(e),s=n.pipe(i);return new Promise(a=>s.on("finish",a))}else{const r=await t.generateAsync({type:"blob"});await r3e(r,{fileName:e})}}function I8(t){if(typeof t=="string")try{return mt.parse(t),!0}catch{return!1}return!1}async function e8e(t,e){let r=new Uint8Array(0);for await(const n of t)if(r=qn([r,n],r.length+n.length),e!==void 0&&r.length>e)return null;return r}class t8e extends Ns.EventEmitter{condition;rsultatPrt;fOublier;rsultat;f;constructor(e,r){super(),this.condition=r||(()=>!0),this.rsultatPrt=!1,this.f=e,this.initialiser()}async initialiser(){const e=async r=>{await this.condition(r)&&(this.rsultat=r,this.rsultatPrt=!0,this.fOublier&&this.lorsquePrt())};this.fOublier=await this.f(e),this.lorsquePrt()}lorsquePrt(){if(this.rsultatPrt){if(!this.fOublier)throw new Error("Fuite !!");this.fOublier&&this.fOublier(),this.emit("fini",this.rsultat)}}}const Fn=async({fRacine:t,f:e,fSuivre:r})=>{let n,i,s=!0;const a=await t({fSuivreRacine:async o=>{o===void 0&&s&&(s=!1,await e(void 0)),o!==i&&(i=o,n&&await n(),i?n=await r({id:i,fSuivreBd:e}):(await e(void 0),n=void 0))}});return async()=>{await a(),n&&await n()}},wr=async function(t,e){const r=new t8e(t,e);return(await Ns.once(r,"fini"))[0]},kn=async()=>{},Kn=t=>async e=>{if(e!==void 0)return await t(e)},ss=t=>{let e=!1,r,n=kn;return i=>new Promise(s=>{if(e&&JSON.stringify(i)===r)return;e=!0,n(),r=JSON.stringify(i);const a=setTimeout(()=>s(!0),t);n=()=>{clearTimeout(a),s(!1)}})},dr=async({fListe:t,f:e,fBranche:r,fIdBdDeBranche:n=a=>a,fRduction:i=a=>[...new Set(a.flat())],fCode:s=a=>a})=>{const a={},o={};let c=!1;const u=async()=>{if(!c||Object.values(a).length&&Object.values(a).every(v=>!v.djvalue))return;const p=Object.values(a).map(v=>v.donnes).filter(v=>v!==void 0),g=i(p);await e(g)},l=new Io,d=await t(async p=>{if(await l.acquire("racine"),p.some(g=>typeof s(g)!="string"))throw console.error("Dfinir fCode si les lments ne sont pas en format texte (chanes)."),l.release("racine"),new Error("Dfinir fCode si les lments ne sont pas en format texte (chanes).");try{const g=Object.fromEntries(p.map(x=>[s(x),x])),v=Object.keys(a);let y=Object.keys(g).filter(x=>!v.includes(x));const b=v.filter(x=>!Object.keys(g).includes(x)),_=Object.entries(g).filter(x=>!k8(o[x[0]],x[1])).map(x=>x[0]);y.push(..._),y=[...new Set(y)],await Promise.all(_.map(async x=>{if(a[x]){const E=a[x].fOublier;E&&await E(),delete a[x]}})),await Promise.all(b.map(async x=>{const E=a[x].fOublier;E&&await E(),delete a[x]})),await Promise.all(y.map(async x=>{a[x]={djvalue:!1};const E=g[x];o[x]=E;const k=n(E),D=await r(k,async z=>{a[x].donnes=z,a[x].djvalue=!0,await u()},E);a[x].fOublier=D})),c=!0,await u()}finally{l.release("racine")}});let h;const m=async()=>{await h(),await Promise.all(Object.values(a).map(p=>p.fOublier&&p.fOublier()))};return typeof d=="function"?(h=d,m):(h=d.fOublier,Object.assign({},d,{fOublier:m}))},r8e=t=>!!t&&typeof t.systme=="string"&&typeof t.val=="string";let n8e=class{lireDate(e){const{systme:r,val:n}=e;switch(r){case"dateJS":case"grgorien":{const i=new Date(n);if(isNaN(i.valueOf()))throw new Error(n);return i}default:throw new Error(r)}}dateValide(e){if(!r8e(e))return!1;try{return this.lireDate(e),!0}catch{return!1}}};const i8e=new n8e,Su=t=>{if(t=t.toString(),!t.startsWith("/orbitdb")&&!t.startsWith("\\orbitdb"))return!1;t=t.replaceAll("/orbitdb/",""),t=t.replaceAll("\\orbitdb\\",""),t=t.replaceAll("/",""),t=t.replaceAll("\\","");let e;try{e=mt.parse(t,$n)}catch{return!1}return e!==void 0},L7={images:["webp","svg","png","jpg","jpeg","jfif","pjpeg","pjp","gif","avif","apng"],vido:["mp4"],audio:["mp3","ogg","m4a"]},V$=t=>{if(["number","string"].includes(typeof t)){const e=new Date(t);return!isNaN(e.valueOf())}else return i8e.dateValide(t)},V2=(t,e)=>{if(typeof t!="string")return!1;let r,n;try{[r,n]=t.split("/")}catch{return!1}if(!n||!I8(r))return!1;if(e){const i=n.split(".").pop();return!!i&&e.includes(i)}return!0},q$=({catgorie:t,val:e})=>{switch(t){case"numrique":return typeof e=="number";case"horoDatage":return V$(e);case"intervaleTemps":return!Array.isArray(e)||e.length!==2?!1:e.every(r=>V$(r));case"chane":return typeof e=="string"&&Su(e);case"chaneNonTraductible":return typeof e=="string";case"boolen":return typeof e=="boolean";case"gojson":return typeof e!="object"?!1:C6e.valid(e);case"vido":return V2(e,L7.vido);case"audio":return V2(e,L7.audio);case"image":return V2(e,L7.images);case"fichier":return V2(e);default:return!1}};function s8e({val:t,catgorie:e}){return t===void 0?!0:e.type==="simple"?q$({catgorie:e.catgorie,val:t}):Array.isArray(t)?t.every(r=>q$({catgorie:e.catgorie,val:r})):!1}const ore=" ",rO="",cre="/orbitdb/zdpuAunUaEc6CRX8wAjNixNioB6hF5SYvwJytx4ynm5wQx1vH",Ph="",nO="/orbitdb/zdpuAkz4jAZW5EM3rK7huQoZAE6L26dtpoVd4UYGGyaQkDmTx",a8e={___:ore,__:rO,__:cre,__:Ph,__:nO},o8e=t=>(t=qp(t),t.tableaux=t.tableaux.map(e=>({clef:e.clef,cols:e.cols.map(r=>({idColonne:r.idColonne,idVariable:r.idVariable,optionnelle:r.optionnelle}))})),t);let pC=class lre{;_;_;;;constructor({:e,_:r,_:n,:i,:s}){this.=e,this._=r,this._=n,i=lre._({:i,_:r,_:n,:s}),this.=o8e(i),this.=Object.assign({},a8e,s)}static _({:e,_:r,_:n,:i}){const s=qp(e),a=s.tableaux.find(c=>c.clef===r);if(!a)throw new Error("    .");return a.cols.find(c=>c.idColonne===(i?.__||Ph))||(a.cols.push({idVariable:i?.__||nO,idColonne:i?.__||Ph}),s.tableaux=s.tableaux.map(c=>c.clef===r?a:c)),s.nues||(s.nues=[]),s.nues.includes(n)||s.nues.push(n),s}static async ({:e,:r,_:n,:i,:s}){if(!e.nues||!e.bds)throw new Error(" ");const a=await e.nues.crerNue({nueParent:i});r=this._({:r,_:n,_:a,:s});for(const u of r.tableaux){const l=await e.nues.ajouterTableauNue({idNue:a,clefTableau:u.clef});for(const f of u.cols)await e.nues.ajouterColonneTableauNue({idTableau:l,idVariable:f.idVariable,idColonne:f.idColonne}),f.index;r.motsClefs&&await e.nues.ajouterMotsClefsNue({idNue:a,idsMotsClefs:r.motsClefs})}const o={licence:r.licence,motsClefs:r.motsClefs,tableaux:r.tableaux.map(u=>u.clef===n?{clef:u.clef,cols:[...u.cols,{idColonne:s?.__||rO,idVariable:s?.__||cre}]}:u)},c=await e.bds.crerBdDeSchma({schma:o});return await e.nues.sauvegarderMtadonneNue({idNue:a,clef:ore,mtadonne:c}),a}async __({:e}){return await dr({fListe:async r=>await this..nues.suivreNuesParents({idNue:this._,f:n=>r([this._,...n].reverse())}),f:async r=>await e(r),fBranche:async(r,n)=>await Fn({fRacine:async({fSuivreRacine:i})=>await this.__({:i,:r}),f:Kn(n),fSuivre:async({id:i,fSuivreBd:s})=>await this..bds.suivreDonnesDeTableauParClef({idBd:i,clefTableau:this._,f:s})})})}async _({:e,:r=!0}){return await this..nues.suivreDonnesTableauNue({idNue:this._,clefTableau:this._,hritage:r?["descendance","ascendance"]:["ascendance"],f:async n=>{await e(n.map(i=>({:i.idCompte,:i.lment.id,:i.lment.donnes})))},nRsultatsDsirs:1e3})}async __({:e}){return await this..bds.suivreDonnesDeTableauUnique({schmaBd:this.,idNueUnique:this._,clefTableau:this._,f:async r=>{const n=await this..obtIdCompte();await e(r.map(i=>({:n,:i.id,:i.donnes})))}})}async ({:e}){const r=i=>i[this..__]?i:{...i,[this..__]:Date.now()};return(await this..bds.ajouterlmentTableauUnique({schmaBd:this.,idNueUnique:this._,clefTableau:this._,vals:r(e)}))[0]}async _({:e}){return await this..bds.effacerlmentDeTableauUnique({schmaBd:this.,idNueUnique:this._,clefTableau:this._,idlment:e})}async _({:e,:r}){await this..bds.modifierlmentDeTableauUnique({schmaBd:this.,idNueUnique:this._,clefTableau:this._,vals:e,idlment:r})}async __({:e,:r}){const n=async i=>{const s=i[this..___];if(typeof s=="string")return await e(s)};return await this..nues.suivreMtadonnesNue({idNue:r||this._,f:n,hriter:!1})}async __(){return await wr(async r=>await this.__({:r}))}async ({:e}){const r=await this.__(),n=Object.assign({},e.,{[this..__]:e.}),s=(await wr(async a=>await this.__({:a}))).find(a=>this.__(a.donnes,n));return s?(await this.__({:e,:s.id}),s.id):(await this..bds.ajouterlmentTableauParClef({idBd:r,clefTableau:this._,vals:n}))[0]}async __({:e}){const r=await this.__();await this..bds.effacerlmentDeTableauParClef({idBd:r,clefTableau:this._,idlment:e})}async __({:e,:r}){const n=await this.__();await this..bds.modifierlmentDeTableauParClef({idBd:n,clefTableau:this._,idlment:r,vals:{...e.,[this..__]:e.}})}__(e,r){return(this..tableaux.find(i=>i.clef===this._)?.cols.filter(i=>i.index).map(i=>i.idColonne)||[]).every(i=>e[i]===r[i])}async _({:e,:r=""}){const n={:[],:[]},i=async()=>{const o=[];for(const c of n.){const u=o.find(l=>this.__(l,c));if(u){const l=u[this..__],f=c[this..__];l&&f&&f>l&&(o.splice(o.indexOf(u),1),o.push(c))}else o.push(c)}for(const c of n.){const u=o.find(l=>this.__(l,c));u&&o.splice(o.indexOf(u),1),o.push(c)}return await e(o)},a=[await this.__({:async o=>{n.=o.map(c=>c.donnes),await i()}})];if(r===""){const o=await this._({:async c=>{n.=c.map(u=>({[this..__]:u.,...u.})),await i()}});a.push(o.fOublier)}else if(r===""){const o=await this.__({:async c=>{n.=c.map(u=>({[this..__]:u.,...u.})),await i()}});a.push(o)}return async()=>{await Promise.all(a.map(o=>o()))}}};const mC="",Z1="",by="_",Zl="_",wy="_",_y="",c8e="/orbitdb/zdpuAyiNBJZCMSTWynQrRynKCbfz7uJhv892B5Dy1qnyQfwP6",l8e="/orbitdb/zdpuAviHxRLaTdUCfJeh1Dw8hbiHkcRsmEkiitX2MXQes3XYY",u8e="/orbitdb/zdpuAyCPoNvoFVRt4y5uA97d8LLjcXnqs2CaoS6oVvbZwkSou",f8e="/orbitdb/zdpuB35kfHohXZQnFFAMhwFPt78vH7e1NuquQ6KcNMPGQ3Hgj",d8e="/orbitdb/zdpuAwxQnCrzYK3kXtM4MGYfdWhM3rjSb1cyQx4hMSwjHzgf9",h8e="/orbitdb/zdpuB3HFW5njgmT9kxvJoxNq7wG27iCj8GLf3F3iKtfecw8De",p8e="/orbitdb/zdpuAnASCNyc198pcsxDYCdZoAvfj5EC3iWbeMyK9FRsAaoaS",m8e="/orbitdb/zdpuAzksPz4pdkBfy1Z74LStFLGPS3njxtD6BEvcPEYdSEv8R",z$={motsClefs:[p8e,m8e],licence:"ODbl-1_0",tableaux:[{clef:mC,cols:[{idVariable:l8e,idColonne:Z1,index:!0},{idVariable:u8e,idColonne:by},{idVariable:f8e,idColonne:Zl,index:!0},{idVariable:d8e,idColonne:wy},{idVariable:h8e,idColonne:_y},{idVariable:nO,idColonne:Ph}]}]},g8e=t=>({:t.donnes[Z1],:new Date(t.donnes[Ph]),:t.donnes[rO],:t.donnes[_y],_:t.donnes[wy],_:t.donnes[by],_:t.donnes[Zl],:t.id}),H$=t=>({:t.,:t.,:{:t.[Z1],:new Date(t.[Ph]),:t.[_y],_:t.[wy],_:t.[by],_:t.[Zl]}}),v8e=t=>({:t.,:t.,:{[Z1]:t..,[Ph]:t...getTime(),[_y]:t..,[wy]:t.._,[by]:t.._,[Zl]:t.._}}),y8e=t=>{const e=new Set(t.map(n=>n.)),r={};for(const n of e){r[n]||(r[n]={});const i=t.filter(s=>s.===n);for(const s of i)r[n][s._]=s.}return r},b8e=(...t)=>{const e={};for(const r of t)for(const n of Object.keys(r)){e[n]||(e[n]={});for(const[i,s]of Object.entries(r[n]))e[n][i]=s}return e},w8e=t=>{const e={};for(const r in t){const n=r.split(".");for(const i of Object.keys(t[r])){e[i]||(e[i]={});let s=e[i];for(const[a,o]of n.entries())a===n.length-1?s[o]=t[r][i]:((s[o]===void 0||typeof s[o]=="string")&&(s[o]={}),s=s[o])}}return e},ure=t=>{const e={};function*r({:n,:i}){i=i||[];for(const[s,a]of Object.entries(n)){const o=[...i,s];if(typeof a=="string")yield{:o.join("."),:a};else for(const{:c,:u}of r({:a,:o}))yield{:c,:u}}}for(const n of Object.keys(t))for(const{:i,:s}of r({:t[n]}))e[i]||(e[i]={}),e[i][n]=s;return e},Cm=async()=>{};class _8e{_;_;_;;constructor({:e,_:r,_:n,:i}={}){if(this._=ti(),i){if(!e)throw new Error;this.=new pC({:e,_:mC,_:i,:z$})}this._=r||{},this._=n}static async ({:e,:r=c8e}){return await pC.({:e,:r,:z$,_:mC})}async _({:e,:r=""}){const n={:Object.keys(this._),:[],:[]},i=async()=>await e([...new Set([...Object.values(n).flat()])]),s=[],a=await this.__({:async o=>(n.=Object.keys(o),await i())});if(s.push(a),r===""){const o=await this.___({:async c=>{n.=c.map(u=>u..),await i()}});s.push(o)}else if(r===""){const o=(await this.__({:async c=>{n.=c.map(u=>u..),await i()}})).fOublier;s.push(o)}return async()=>{await Promise.all(s.map(o=>o()))}}async _({:e="",:r}){const n={:Object.values(this._).map(a=>Object.keys(a)).flat()},i=async()=>{await r([...new Set(Object.values(n).flat())])};i();const s=[];if(this.){const a=await this..__({:async o=>{n.=o.map(c=>c.donnes[Zl]),await i()}});s.push(a),e===""?s.push(await this.___({:async o=>{n.=o.map(c=>c.[Zl]),await i()}})):e===""&&s.push((await this.__({:async o=>{n.=o.map(c=>c.[Zl]),await i()}})).fOublier)}return async()=>{await Promise.all(s.map(a=>a()))}}async __({:e}){const r={:[]},n=async()=>{const i=b8e(y8e(r..map(s=>g8e(s))),this._);await e(i)};return await n(),this.?await this..__({:async i=>{r.=i,await n()}}):Cm}async _({:e,:r=""}){if(await e(this._),!this.)return Cm;const n={},i=await this...obtIdCompte(),s=async()=>{const o=[...new Set([...Object.keys(this._),...(n.||[]).map(u=>u.)])],c={};for(const u of o){const l=n.?.filter(m=>m.===u)||[],f=n.?.filter(m=>m..===u)||[],d=[...new Set([...f.map(m=>m.._),...l.map(m=>m._)])],h={};for(const m of d){const p=f.filter(y=>y.._===m).sort((y,b)=>y.===i&&b.!==i||y...getTime()>b...getTime()?-1:1)[0],g=l.find(y=>y._===m),v=p?g&&g.>p...getTime()?g:p.:g;v&&(h[m]=v.)}c[u]=Object.assign({},this._[u]||{},h)}return await e(c)},a=[];if(this.){const o=await this..__({:async c=>{n.=c.map(u=>u.donnes),await s()}});a.push(o)}return r===""?a.push(await this.___({:async o=>{n.=o,await s()}})):r===""&&a.push((await this.__({:async o=>{n.=o,await s()}})).fOublier),async()=>{await Promise.all(a.map(o=>o()))}}async __({:e,:r,:n}){return this.?await this.._({:async i=>await n(i.filter(s=>(!e||s.[Z1]===e)&&(!r||s.[Zl]===r)).map(H$))}):{fOublier:Cm,fChangerProfondeur:Cm}}async ___({:e}){return this.?await this..__({:r=>{e(r.map(n=>H$(n)))}}):Cm}async _({:e,:r,:n}){const i={},s=l=>{const f=[];for(const d of l)f.find(h=>h..===d..&&h.._===d.._)||f.push(d);return f},a=async()=>{if(i.)if(r===""){const l=i..length,f=i..filter(h=>i.?.[h]?.[e]),d=i.?.filter(h=>h.._===e&&i.?.includes(h..)&&!f.includes(h..))||[];return await n({:l,:f.length,:s(d).length})}else{if(!i.||!i.)return;const l=Object.fromEntries(i..map(p=>[p,this._&&i.?.[p]?.[this._]?.length||(i.?.[p]?Object.values(i.?.[p])[0]?.length:0)])),f=Object.values(l).reduce((p,g)=>p+g,0),d=i..filter(p=>i.?.[p]?.[e]),h=Object.entries(i.).filter(p=>p[1][e]).map(([p,g])=>l[p]).reduce((p,g)=>p+g,0),m=i.?.filter(p=>p.._===e&&i.?.includes(p..)&&!d.includes(p..)).map(p=>l[p..]||0).reduce((p,g)=>p+g,0)||0;return await n({:f,:h,:m})}},o=await Promise.all([this._({:async l=>{i.=l,await a()}}),this._({:"",:async l=>{i.=l,await a()}})]),c=(await this.__({:e,:async l=>{i.=l,await a()}})).fOublier;return async()=>{await Promise.all(o.map(l=>l())),await c()}}async _({:e,:r,_:n,_:i,_:s}){if(!this.)throw new Error;const a={[Z1]:e,[_y]:r,[Zl]:n};i&&(a[by]=i),s&&(a[wy]=s),await this..({:a})}async __({:e}){if(!this.)throw new Error;await this.._({:e})}async ({:e}){if(!this.)throw new Error;return await this..({:v8e(e)})}async __({:e,_:r,:n=1e3}){if(!this.)throw new Error;const i=this.,s=c=>c.===e&&c._===r,o=(await lC(async c=>await i.__({:async u=>await c(u)}),async c=>!!c?.find(u=>s(u.donnes))||await E6e(n)(c)))?.find(c=>s(c.donnes))?.id;if(!o)throw new Error;return await this..__({:o})}async ({:e,:r,:n,:i=""}){const s={},a=async()=>{const o=s.?.[e]?.[r];return await n(o)};return await this._({:i,:async o=>{s.=o,await a()}})}}var fre=typeof Bi=="object"&&Bi&&Bi.Object===Object&&Bi,x8e=typeof self=="object"&&self&&self.Object===Object&&self,Mu=fre||x8e||Function("return this")(),J1=Mu.Symbol,dre=Object.prototype,S8e=dre.hasOwnProperty,E8e=dre.toString,Im=J1?J1.toStringTag:void 0;function k8e(t){var e=S8e.call(t,Im),r=t[Im];try{t[Im]=void 0;var n=!0}catch{}var i=E8e.call(t);return n&&(e?t[Im]=r:delete t[Im]),i}var T8e=Object.prototype,A8e=T8e.toString;function C8e(t){return A8e.call(t)}var I8e="[object Null]",P8e="[object Undefined]",W$=J1?J1.toStringTag:void 0;function xy(t){return t==null?t===void 0?P8e:I8e:W$&&W$ in Object(t)?k8e(t):C8e(t)}function lv(t){return t!=null&&typeof t=="object"}var i4=Array.isArray;function hre(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}function R8e(t){return t}var O8e="[object AsyncFunction]",B8e="[object Function]",D8e="[object GeneratorFunction]",M8e="[object Proxy]";function pre(t){if(!hre(t))return!1;var e=xy(t);return e==B8e||e==D8e||e==O8e||e==M8e}var $7=Mu["__core-js_shared__"],G$=function(){var t=/[^.]+$/.exec($7&&$7.keys&&$7.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function N8e(t){return!!G$&&G$ in t}var F8e=Function.prototype,L8e=F8e.toString;function f0(t){if(t!=null){try{return L8e.call(t)}catch{}try{return t+""}catch{}}return""}var $8e=/[\\^$.*+?()[\]{}|]/g,U8e=/^\[object .+?Constructor\]$/,j8e=Function.prototype,V8e=Object.prototype,q8e=j8e.toString,z8e=V8e.hasOwnProperty,H8e=RegExp("^"+q8e.call(z8e).replace($8e,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function W8e(t){if(!hre(t)||N8e(t))return!1;var e=pre(t)?H8e:U8e;return e.test(f0(t))}function G8e(t,e){return t?.[e]}function zp(t,e){var r=G8e(t,e);return W8e(r)?r:void 0}var gC=zp(Mu,"WeakMap"),K8e=9007199254740991,X8e=/^(?:0|[1-9]\d*)$/;function Y8e(t,e){var r=typeof t;return e=e??K8e,!!e&&(r=="number"||r!="symbol"&&X8e.test(t))&&t>-1&&t%1==0&&t<e}function mre(t,e){return t===e||t!==t&&e!==e}var Z8e=9007199254740991;function gre(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=Z8e}function J8e(t){return t!=null&&gre(t.length)&&!pre(t)}var Q8e=Object.prototype;function e5e(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||Q8e;return t===r}function t5e(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}var r5e="[object Arguments]";function K$(t){return lv(t)&&xy(t)==r5e}var vre=Object.prototype,n5e=vre.hasOwnProperty,i5e=vre.propertyIsEnumerable,s5e=K$(function(){return arguments}())?K$:function(t){return lv(t)&&n5e.call(t,"callee")&&!i5e.call(t,"callee")};function a5e(){return!1}var yre=typeof exports=="object"&&exports&&!exports.nodeType&&exports,X$=yre&&typeof module=="object"&&module&&!module.nodeType&&module,o5e=X$&&X$.exports===yre,Y$=o5e?Mu.Buffer:void 0,c5e=Y$?Y$.isBuffer:void 0,vC=c5e||a5e,l5e="[object Arguments]",u5e="[object Array]",f5e="[object Boolean]",d5e="[object Date]",h5e="[object Error]",p5e="[object Function]",m5e="[object Map]",g5e="[object Number]",v5e="[object Object]",y5e="[object RegExp]",b5e="[object Set]",w5e="[object String]",_5e="[object WeakMap]",x5e="[object ArrayBuffer]",S5e="[object DataView]",E5e="[object Float32Array]",k5e="[object Float64Array]",T5e="[object Int8Array]",A5e="[object Int16Array]",C5e="[object Int32Array]",I5e="[object Uint8Array]",P5e="[object Uint8ClampedArray]",R5e="[object Uint16Array]",O5e="[object Uint32Array]",Rn={};Rn[E5e]=Rn[k5e]=Rn[T5e]=Rn[A5e]=Rn[C5e]=Rn[I5e]=Rn[P5e]=Rn[R5e]=Rn[O5e]=!0;Rn[l5e]=Rn[u5e]=Rn[x5e]=Rn[f5e]=Rn[S5e]=Rn[d5e]=Rn[h5e]=Rn[p5e]=Rn[m5e]=Rn[g5e]=Rn[v5e]=Rn[y5e]=Rn[b5e]=Rn[w5e]=Rn[_5e]=!1;function B5e(t){return lv(t)&&gre(t.length)&&!!Rn[xy(t)]}function D5e(t){return function(e){return t(e)}}var bre=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Cg=bre&&typeof module=="object"&&module&&!module.nodeType&&module,M5e=Cg&&Cg.exports===bre,U7=M5e&&fre.process,Z$=function(){try{var t=Cg&&Cg.require&&Cg.require("util").types;return t||U7&&U7.binding&&U7.binding("util")}catch{}}(),J$=Z$&&Z$.isTypedArray,wre=J$?D5e(J$):B5e,N5e=Object.prototype,F5e=N5e.hasOwnProperty;function L5e(t,e){var r=i4(t),n=!r&&s5e(t),i=!r&&!n&&vC(t),s=!r&&!n&&!i&&wre(t),a=r||n||i||s,o=a?t5e(t.length,String):[],c=o.length;for(var u in t)F5e.call(t,u)&&!(a&&(u=="length"||i&&(u=="offset"||u=="parent")||s&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||Y8e(u,c)))&&o.push(u);return o}function $5e(t,e){return function(r){return t(e(r))}}var U5e=$5e(Object.keys,Object),j5e=Object.prototype,V5e=j5e.hasOwnProperty;function q5e(t){if(!e5e(t))return U5e(t);var e=[];for(var r in Object(t))V5e.call(t,r)&&r!="constructor"&&e.push(r);return e}function z5e(t){return J8e(t)?L5e(t):q5e(t)}var uv=zp(Object,"create");function H5e(){this.__data__=uv?uv(null):{},this.size=0}function W5e(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var G5e="__lodash_hash_undefined__",K5e=Object.prototype,X5e=K5e.hasOwnProperty;function Y5e(t){var e=this.__data__;if(uv){var r=e[t];return r===G5e?void 0:r}return X5e.call(e,t)?e[t]:void 0}var Z5e=Object.prototype,J5e=Z5e.hasOwnProperty;function Q5e(t){var e=this.__data__;return uv?e[t]!==void 0:J5e.call(e,t)}var e_e="__lodash_hash_undefined__";function t_e(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=uv&&e===void 0?e_e:e,this}function Rh(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}Rh.prototype.clear=H5e;Rh.prototype.delete=W5e;Rh.prototype.get=Y5e;Rh.prototype.has=Q5e;Rh.prototype.set=t_e;function r_e(){this.__data__=[],this.size=0}function P8(t,e){for(var r=t.length;r--;)if(mre(t[r][0],e))return r;return-1}var n_e=Array.prototype,i_e=n_e.splice;function s_e(t){var e=this.__data__,r=P8(e,t);if(r<0)return!1;var n=e.length-1;return r==n?e.pop():i_e.call(e,r,1),--this.size,!0}function a_e(t){var e=this.__data__,r=P8(e,t);return r<0?void 0:e[r][1]}function o_e(t){return P8(this.__data__,t)>-1}function c_e(t,e){var r=this.__data__,n=P8(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this}function Nu(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}Nu.prototype.clear=r_e;Nu.prototype.delete=s_e;Nu.prototype.get=a_e;Nu.prototype.has=o_e;Nu.prototype.set=c_e;var fv=zp(Mu,"Map");function l_e(){this.size=0,this.__data__={hash:new Rh,map:new(fv||Nu),string:new Rh}}function u_e(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function R8(t,e){var r=t.__data__;return u_e(e)?r[typeof e=="string"?"string":"hash"]:r.map}function f_e(t){var e=R8(this,t).delete(t);return this.size-=e?1:0,e}function d_e(t){return R8(this,t).get(t)}function h_e(t){return R8(this,t).has(t)}function p_e(t,e){var r=R8(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this}function d0(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}d0.prototype.clear=l_e;d0.prototype.delete=f_e;d0.prototype.get=d_e;d0.prototype.has=h_e;d0.prototype.set=p_e;function m_e(t,e){for(var r=-1,n=e.length,i=t.length;++r<n;)t[i+r]=e[r];return t}function g_e(){this.__data__=new Nu,this.size=0}function v_e(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}function y_e(t){return this.__data__.get(t)}function b_e(t){return this.__data__.has(t)}var w_e=200;function __e(t,e){var r=this.__data__;if(r instanceof Nu){var n=r.__data__;if(!fv||n.length<w_e-1)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new d0(n)}return r.set(t,e),this.size=r.size,this}function Mf(t){var e=this.__data__=new Nu(t);this.size=e.size}Mf.prototype.clear=g_e;Mf.prototype.delete=v_e;Mf.prototype.get=y_e;Mf.prototype.has=b_e;Mf.prototype.set=__e;function x_e(t,e){for(var r=-1,n=t==null?0:t.length,i=0,s=[];++r<n;){var a=t[r];e(a,r,t)&&(s[i++]=a)}return s}function S_e(){return[]}var E_e=Object.prototype,k_e=E_e.propertyIsEnumerable,Q$=Object.getOwnPropertySymbols,T_e=Q$?function(t){return t==null?[]:(t=Object(t),x_e(Q$(t),function(e){return k_e.call(t,e)}))}:S_e;function A_e(t,e,r){var n=e(t);return i4(t)?n:m_e(n,r(t))}function eU(t){return A_e(t,z5e,T_e)}var yC=zp(Mu,"DataView"),bC=zp(Mu,"Promise"),wC=zp(Mu,"Set"),tU="[object Map]",C_e="[object Object]",rU="[object Promise]",nU="[object Set]",iU="[object WeakMap]",sU="[object DataView]",I_e=f0(yC),P_e=f0(fv),R_e=f0(bC),O_e=f0(wC),B_e=f0(gC),bf=xy;(yC&&bf(new yC(new ArrayBuffer(1)))!=sU||fv&&bf(new fv)!=tU||bC&&bf(bC.resolve())!=rU||wC&&bf(new wC)!=nU||gC&&bf(new gC)!=iU)&&(bf=function(t){var e=xy(t),r=e==C_e?t.constructor:void 0,n=r?f0(r):"";if(n)switch(n){case I_e:return sU;case P_e:return tU;case R_e:return rU;case O_e:return nU;case B_e:return iU}return e});var aU=Mu.Uint8Array,D_e="__lodash_hash_undefined__";function M_e(t){return this.__data__.set(t,D_e),this}function N_e(t){return this.__data__.has(t)}function s4(t){var e=-1,r=t==null?0:t.length;for(this.__data__=new d0;++e<r;)this.add(t[e])}s4.prototype.add=s4.prototype.push=M_e;s4.prototype.has=N_e;function F_e(t,e){for(var r=-1,n=t==null?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1}function L_e(t,e){return t.has(e)}var $_e=1,U_e=2;function _re(t,e,r,n,i,s){var a=r&$_e,o=t.length,c=e.length;if(o!=c&&!(a&&c>o))return!1;var u=s.get(t),l=s.get(e);if(u&&l)return u==e&&l==t;var f=-1,d=!0,h=r&U_e?new s4:void 0;for(s.set(t,e),s.set(e,t);++f<o;){var m=t[f],p=e[f];if(n)var g=a?n(p,m,f,e,t,s):n(m,p,f,t,e,s);if(g!==void 0){if(g)continue;d=!1;break}if(h){if(!F_e(e,function(v,y){if(!L_e(h,y)&&(m===v||i(m,v,r,n,s)))return h.push(y)})){d=!1;break}}else if(!(m===p||i(m,p,r,n,s))){d=!1;break}}return s.delete(t),s.delete(e),d}function j_e(t){var e=-1,r=Array(t.size);return t.forEach(function(n,i){r[++e]=[i,n]}),r}function V_e(t){var e=-1,r=Array(t.size);return t.forEach(function(n){r[++e]=n}),r}var q_e=1,z_e=2,H_e="[object Boolean]",W_e="[object Date]",G_e="[object Error]",K_e="[object Map]",X_e="[object Number]",Y_e="[object RegExp]",Z_e="[object Set]",J_e="[object String]",Q_e="[object Symbol]",exe="[object ArrayBuffer]",txe="[object DataView]",oU=J1?J1.prototype:void 0,j7=oU?oU.valueOf:void 0;function rxe(t,e,r,n,i,s,a){switch(r){case txe:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case exe:return!(t.byteLength!=e.byteLength||!s(new aU(t),new aU(e)));case H_e:case W_e:case X_e:return mre(+t,+e);case G_e:return t.name==e.name&&t.message==e.message;case Y_e:case J_e:return t==e+"";case K_e:var o=j_e;case Z_e:var c=n&q_e;if(o||(o=V_e),t.size!=e.size&&!c)return!1;var u=a.get(t);if(u)return u==e;n|=z_e,a.set(t,e);var l=_re(o(t),o(e),n,i,s,a);return a.delete(t),l;case Q_e:if(j7)return j7.call(t)==j7.call(e)}return!1}var nxe=1,ixe=Object.prototype,sxe=ixe.hasOwnProperty;function axe(t,e,r,n,i,s){var a=r&nxe,o=eU(t),c=o.length,u=eU(e),l=u.length;if(c!=l&&!a)return!1;for(var f=c;f--;){var d=o[f];if(!(a?d in e:sxe.call(e,d)))return!1}var h=s.get(t),m=s.get(e);if(h&&m)return h==e&&m==t;var p=!0;s.set(t,e),s.set(e,t);for(var g=a;++f<c;){d=o[f];var v=t[d],y=e[d];if(n)var b=a?n(y,v,d,e,t,s):n(v,y,d,t,e,s);if(!(b===void 0?v===y||i(v,y,r,n,s):b)){p=!1;break}g||(g=d=="constructor")}if(p&&!g){var _=t.constructor,x=e.constructor;_!=x&&"constructor"in t&&"constructor"in e&&!(typeof _=="function"&&_ instanceof _&&typeof x=="function"&&x instanceof x)&&(p=!1)}return s.delete(t),s.delete(e),p}var oxe=1,cU="[object Arguments]",lU="[object Array]",q2="[object Object]",cxe=Object.prototype,uU=cxe.hasOwnProperty;function lxe(t,e,r,n,i,s){var a=i4(t),o=i4(e),c=a?lU:bf(t),u=o?lU:bf(e);c=c==cU?q2:c,u=u==cU?q2:u;var l=c==q2,f=u==q2,d=c==u;if(d&&vC(t)){if(!vC(e))return!1;a=!0,l=!1}if(d&&!l)return s||(s=new Mf),a||wre(t)?_re(t,e,r,n,i,s):rxe(t,e,c,r,n,i,s);if(!(r&oxe)){var h=l&&uU.call(t,"__wrapped__"),m=f&&uU.call(e,"__wrapped__");if(h||m){var p=h?t.value():t,g=m?e.value():e;return s||(s=new Mf),i(p,g,r,n,s)}}return d?(s||(s=new Mf),axe(t,e,r,n,i,s)):!1}function xre(t,e,r,n,i){return t===e?!0:t==null||e==null||!lv(t)&&!lv(e)?t!==t&&e!==e:lxe(t,e,r,n,xre,i)}function uxe(t,e){return xre(t,e)}function fxe(t,e){for(var r,n=-1,i=t.length;++n<i;){var s=e(t[n]);s!==void 0&&(r=r===void 0?s:r+s)}return r}function fU(t){return t&&t.length?fxe(t,R8e):0}const Wl=t=>Ve(t);var V7,dU;function dxe(){if(dU)return V7;dU=1;var t=function(y){return e(y)&&!r(y)};function e(v){return!!v&&typeof v=="object"}function r(v){var y=Object.prototype.toString.call(v);return y==="[object RegExp]"||y==="[object Date]"||s(v)}var n=typeof Symbol=="function"&&Symbol.for,i=n?Symbol.for("react.element"):60103;function s(v){return v.$$typeof===i}function a(v){return Array.isArray(v)?[]:{}}function o(v,y){return y.clone!==!1&&y.isMergeableObject(v)?p(a(v),v,y):v}function c(v,y,b){return v.concat(y).map(function(_){return o(_,b)})}function u(v,y){if(!y.customMerge)return p;var b=y.customMerge(v);return typeof b=="function"?b:p}function l(v){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(v).filter(function(y){return Object.propertyIsEnumerable.call(v,y)}):[]}function f(v){return Object.keys(v).concat(l(v))}function d(v,y){try{return y in v}catch{return!1}}function h(v,y){return d(v,y)&&!(Object.hasOwnProperty.call(v,y)&&Object.propertyIsEnumerable.call(v,y))}function m(v,y,b){var _={};return b.isMergeableObject(v)&&f(v).forEach(function(x){_[x]=o(v[x],b)}),f(y).forEach(function(x){h(v,x)||(d(v,x)&&b.isMergeableObject(y[x])?_[x]=u(x,b)(v[x],y[x],b):_[x]=o(y[x],b))}),_}function p(v,y,b){b=b||{},b.arrayMerge=b.arrayMerge||c,b.isMergeableObject=b.isMergeableObject||t,b.cloneUnlessOtherwiseSpecified=o;var _=Array.isArray(y),x=Array.isArray(v),E=_===x;return E?_?b.arrayMerge(v,y,b):m(v,y,b):o(y,b)}p.all=function(y,b){if(!Array.isArray(y))throw new Error("first argument should be an array");return y.reduce(function(_,x){return p(_,x,b)},{})};var g=p;return V7=g,V7}var hxe=dxe();const _C=In(hxe),Sre=" ",Ere="",kre="/orbitdb/zdpuAunUaEc6CRX8wAjNixNioB6hF5SYvwJytx4ynm5wQx1vH",xC="",Tre="/orbitdb/zdpuAkz4jAZW5EM3rK7huQoZAE6L26dtpoVd4UYGGyaQkDmTx",pxe={___:Sre,__:Ere,__:kre,__:xC,__:Tre},mxe=t=>(t=qp(t),t.tableaux=t.tableaux.map(e=>({clef:e.clef,cols:e.cols.map(r=>({idColonne:r.idColonne,idVariable:r.idVariable,optionnelle:r.optionnelle}))})),t);class a4{;_;_;;;constructor({:e,_:r,_:n,:i,:s}){this.=e,this._=r,this._=n,i=a4._({:i,_:r,_:n,:s}),this.=mxe(i),this.=Object.assign({},pxe,s)}static _({:e,_:r,_:n,:i}){const s=qp(e),a=s.tableaux.find(c=>c.clef===r);if(!a)throw new Error("    .");return a.cols.find(c=>c.idColonne===(i?.__||xC))||(a.cols.push({idVariable:i?.__||Tre,idColonne:i?.__||xC}),s.tableaux=s.tableaux.map(c=>c.clef===r?a:c)),s.nues||(s.nues=[]),s.nues.includes(n)||s.nues.push(n),s}static async ({:e,:r,_:n,:i,:s}){if(!e.nues||!e.bds)throw new Error(" ");const a=await e.nues.crerNue({nueParent:i});r=this._({:r,_:n,_:a,:s});for(const u of r.tableaux){const l=await e.nues.ajouterTableauNue({idNue:a,clefTableau:u.clef});for(const f of u.cols)await e.nues.ajouterColonneTableauNue({idTableau:l,idVariable:f.idVariable,idColonne:f.idColonne}),f.index;r.motsClefs&&await e.nues.ajouterMotsClefsNue({idNue:a,idsMotsClefs:r.motsClefs})}const o={licence:r.licence,motsClefs:r.motsClefs,tableaux:r.tableaux.map(u=>u.clef===n?{clef:u.clef,cols:[...u.cols,{idColonne:s?.__||Ere,idVariable:s?.__||kre}]}:u)},c=await e.bds.crerBdDeSchma({schma:o});return await e.nues.sauvegarderMtadonneNue({idNue:a,clef:Sre,valeur:c}),a}async __({:e}){return await k6e({fListe:async r=>await this..nues.suivreNuesParents({idNue:this._,f:n=>r([this._,...n].reverse())}),f:async r=>await e(r),fBranche:async(r,n)=>await _6e({fRacine:async({fSuivreRacine:i})=>await this.__({:i,:r}),f:S6e(n),fSuivre:async({id:i,fSuivreBd:s})=>await this..bds.suivreDonnesDeTableauParClef({idBd:i,clefTableau:this._,f:s})})})}async _({:e,:r=!0}){return await this..nues.suivreDonnesTableauNue({idNue:this._,clefTableau:this._,hritage:r?["descendance","ascendance"]:["ascendance"],f:async n=>{await e(n.map(i=>({:i.idCompte,:i.lment.id,:i.lment.donnes})))},nRsultatsDsirs:1e3})}async __({:e}){return await this..bds.suivreDonnesDeTableauUnique({schmaBd:this.,idNueUnique:this._,clefTableau:this._,f:async r=>{const n=await this..obtIdCompte();await e(r.map(i=>({:n,:i.id,:i.donnes})))}})}async ({:e}){const r=i=>i[this..__]?i:{...i,[this..__]:Date.now()};return(await this..bds.ajouterlmentTableauUnique({schmaBd:this.,idNueUnique:this._,clefTableau:this._,vals:r(e)}))[0]}async _({:e}){return await this..bds.effacerlmentDeTableauUnique({schmaBd:this.,idNueUnique:this._,clefTableau:this._,idlment:e})}async _({:e,:r}){await this..bds.modifierlmentDeTableauUnique({schmaBd:this.,idNueUnique:this._,clefTableau:this._,vals:e,idlment:r})}async __({:e,:r}){const n=async i=>{const s=i[this..___];if(typeof s=="string")return await e(s)};return await this..nues.suivreMtadonnesNue({idNue:r||this._,f:n,hriter:!1})}async __(){return await lC(async r=>await this.__({:r}))}async ({:e}){const r=await this.__(),n=Object.assign({},e.,{[this..__]:e.}),s=(await lC(async a=>await this.__({:a}))).find(a=>this.__(a.donnes,n));return s?(await this.__({:e,:s.id}),s.id):(await this..bds.ajouterlmentTableauParClef({idBd:r,clefTableau:this._,vals:n}))[0]}async __({:e}){const r=await this.__();await this..bds.effacerlmentDeTableauParClef({idBd:r,clefTableau:this._,idlment:e})}async __({:e,:r}){const n=await this.__();await this..bds.modifierlmentDeTableauParClef({idBd:n,clefTableau:this._,idlment:r,vals:{...e.,[this..__]:e.}})}__(e,r){return(this..tableaux.find(i=>i.clef===this._)?.cols.filter(i=>i.index).map(i=>i.idColonne)||[]).every(i=>e[i]===r[i])}async _({:e,:r=""}){const n={:[],:[]},i=async()=>{const o=[];for(const c of n.){const u=o.find(l=>this.__(l,c));if(u){const l=u[this..__],f=c[this..__];l&&f&&f>l&&(o.splice(o.indexOf(u),1),o.push(c))}else o.push(c)}for(const c of n.){const u=o.find(l=>this.__(l,c));u&&o.splice(o.indexOf(u),1),o.push(c)}return await e(o)},a=[await this.__({:async o=>{n.=o.map(c=>c.donnes),await i()}})];if(r===""){const o=await this._({:async c=>{n.=c.map(u=>({[this..__]:u.,...u.})),await i()}});a.push(o.fOublier)}else if(r===""){const o=await this.__({:async c=>{n.=c.map(u=>({[this..__]:u.,...u.})),await i()}});a.push(o)}return async()=>{await Promise.all(a.map(o=>o()))}}}const Are="chab'l",Cre="tzib'anem",hU="/orbitdb/zdpuB2ZNKMRPnn8kwwL9UDY6VNdXxqxTUiEanjJ4Z6HuxEgWU",gxe="/orbitdb/zdpuAqGK5ndjkaYFM5wkyEk4S6FpDH5hvpEWLq79edP9MmMpY",Ire="runukChabl",Pre="rajilankChabl",Rre="rubiChabl",Ore="rutzibanemChabl",Bre="gl",Dre="i1",Mre="i2",Nre="i3",vxe="/orbitdb/zdpuAqAZSmXwDoEPn4r94LP7yYvaY6kvxofyU2gchbAzkTEjN",yxe="/orbitdb/zdpuAx2asNr8YFLvEy8nP5u16SshcbMAhyHkZQm3hqEX2CEP6",bxe="/orbitdb/zdpuAxRf1zitq3gpB6BnMrSuwcMLeFEUuUUGZZyhCwhjNqUjM",wxe="/orbitdb/zdpuAp5wKQEHAh8L5VGJr4Jdzn5363rX6zZmeFawBS4vRBihV",_xe="/orbitdb/zdpuApxEECg9CrBGKtGqkYMU4zU51q6M1UuRvzz1PhQ5XTQWt",xxe="/orbitdb/zdpuApSr92X1P9KQS5EzJVrWTqA8RZ4rjZnPJwH5DTNmw35CY",Sxe="/orbitdb/zdpuAv9jLJJzgo5FafC3ZeG2nGggEWttcb8hMbfwwbRQKW1DS",Exe="/orbitdb/zdpuApqihbDFFCdHudZaM64ahUMDwkpb38fpjw5gqYkP4xGJC",Fre="runukTzib",Lre="rajilankTzib",$re="rubiTzib",Ure="rucholanemTzib",jre="rutzibTzib",kxe="/orbitdb/zdpuB1o5fEEZFicWiQTL7RE8xv7v7X2SS5A7tNUAXaHQ9c58P",Txe="/orbitdb/zdpuAt4noCPbhfzRAZncCMndUPSCiYS5KnHDCPg17RFqV8qou",Axe="/orbitdb/zdpuApC8sYxrezNAdgNFcLDcrEZhzMi7pv5A7VMZrCCiv2rb6",Cxe="/orbitdb/zdpuB14vFuP6aHNaXxoeWZvq1NRyx6HCUReoT4sxSk3kAFdZe",Ixe="/orbitdb/zdpuAnXpasEMduNSXHxaeyGdZGmyU4NEwA3SEydj7jCDCY3Kz",pU={licence:"ODbl-1_0",motsClefs:[gxe],tableaux:[{cols:[{idColonne:Ire,idVariable:vxe,index:!0},{idColonne:Pre,idVariable:yxe},{idColonne:Rre,idVariable:bxe},{idColonne:Ore,idVariable:wxe},{idColonne:Bre,idVariable:_xe},{idColonne:Dre,idVariable:xxe},{idColonne:Mre,idVariable:Sxe},{idColonne:Nre,idVariable:Exe}],clef:Are},{cols:[{idColonne:Fre,idVariable:kxe,index:!0},{idColonne:Lre,idVariable:Txe},{idColonne:$re,idVariable:Axe},{idColonne:Ure,idVariable:Cxe},{idColonne:jre,idVariable:Ixe}],clef:Cre}]},Pxe=({chumil:t})=>{const e=new a4({:t,_:Are,:pU,_:hU}),r=new a4({:t,_:Cre,:pU,_:hU});return{kelChabl:e,kelTzibanem:r}},Rxe={aj:"Mayab'","rb'":"Kaqchikel",tz:"ltn",rn:{gl:"kaqc1270",i3:"cak"}},Oxe={aj:"latin","rb'":"franais",tz:"ltn",rn:{gl:"stan1290",i1:"fr",i2:"fra",i3:"fra"}},Bxe={aj:"latin","rb'":"castellano",rn:{gl:"stan1288",i1:"es"}},Dxe={aj:"latin","rb'":"Nederlands",rn:{gl:"dutc1256",i1:"nl"}},Mxe={aj:"latin","rb'":"English",rn:{gl:"stan1293",i1:"en",i3:"eng"}},Nxe={"rb'":"Kanyen'k:ha",ajilank:"latin",rn:{}},Fxe={aj:"latin","rb'":"Kiswahili",rn:{}},Lxe={aj:"latin","rb'":"Yorb",rn:{gl:"yoru1245",i1:"yo"}},$xe={"rb'":"Kinyarwanda",rn:{gl:"kiny1244",i1:"rw"},aj:"latin"},Uxe={"rb'":"Deutsch",rn:{i1:"de",gl:"mode1258"},aj:"latin"},jxe={kaq:Rxe,fr:Oxe,:{aj:"","rb'":"",tz:"",rn:{gl:"tami1289",i1:"ta",i2:"tam",i3:"tam"}},cst:Bxe,nl:Dxe,en:Mxe,:{aj:"","rb'":"",tz:"",rn:{gl:"west2386",i3:"pnb"}},:{aj:"","rb'":"",tz:"",rn:{gl:"panj1256",i1:"pa"}},:{aj:"","rb'":"",rn:{gl:"",i1:"hi"}},:{aj:"","rb'":"",rn:{gl:"guja1252",i1:"gu"}},:{aj:"","rb'":"",rn:{gl:"beng1280",i1:"bn"}},:{"rb'":"",rn:{gl:"telu1262",i1:"te"},aj:""},:{"rb'":"",rn:{},aj:""},:{"rb'":"",tz:"",rn:{i1:"ar"}},:{aj:"","rb'":"",tz:"",rn:{gl:"urdu1245",i1:"ur"}},:{aj:"","rb'":"",tz:"",rn:{gl:"cent1989",i1:"km"}},:{aj:"","rb'":"",tz:"",rn:{gl:"west2369",i1:"fa"}},:{aj:"","rb'":"",rn:{gl:"mara1378",i1:"mr"}},:{aj:"","rb'":"",rn:{gl:"mala1464",i1:"ml"}},:{aj:"","rb'":"",rn:{gl:"nepa1254",i1:"ne"}},:{"rb'":"",aj:"",rn:{}},"k'i":{aj:"Mayab'","rb'":"K'iche'",rn:{gl:"kich1262",i3:"quc"}},"tz'u":{aj:"Mayab'","rb'":"Tz'utujil",rn:{gl:"tzut1248",i3:"tzj"}},kny:Nxe,:{aj:"","rb'":"",tz:"",rn:{gl:"sini1245",i1:"zh"}},:{aj:"","rb'":"",tz:"",rn:{gl:"taib1240",i3:"goyu"}},:{aj:"","rb'":"",rn:{gl:"nucl1643",i1:"ja"}},sw:Fxe,yo:Lxe,rw:$xe,de:Uxe},Vxe={"rb'":"latin",ch:"",aj:"latin",tz:"[A-Za-z-----------------------]|\uD801[\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]"},qxe={ltn:Vxe,:{"rb'":"",ch:"",aj:"",tz:"[---------]|\uD807[\uDFC0-\uDFF1\uDFFF]"},:{"rb'":"",ch:"",aj:"",tz:"[--------------------]|\uD803[\uDE60-\uDE7E\uDEFD-\uDEFF]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB\uDEF0\uDEF1]"},:{"rb'":"",ch:"",aj:"",tz:"[--------------------]|\uD803[\uDE60-\uDE7E\uDEFD-\uDEFF]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB\uDEF0\uDEF1]"},:{"rb'":"",ch:"",aj:"",tz:"[--------]"},:{"rb'":"",ch:"",aj:"",tz:"[------------]"},:{"rb'":"",ch:"",aj:"",tz:"[-----------]"},:{"rb'":"",ch:"",aj:"",tz:"[---------]"},:{"rb'":"",ch:"",aj:"",tz:"[----]"},:{"rb'":"",ch:"",aj:"",tz:"[----]|\uD806[\uDF00-\uDF09]"},:{"rb'":"",ch:"",aj:"",tz:"[---------]|\uD81B[\uDFE2\uDFE3\uDFF0\uDFF1]|[\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF]"},:{"rb'":"",ch:"",aj:"",tz:"[---------]|\uD81B[\uDFE2\uDFE3\uDFF0\uDFF1]|[\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF]"},:{"rb'":"",ch:"",aj:"",tz:"[--]|\uD82C[\uDC01-\uDD1F\uDD32\uDD50-\uDD52]||[-------]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00\uDD20-\uDD22\uDD55\uDD64-\uDD67]|[--]"}};class zxe{retamablChablChumil;retamablTzibanemChumil;vnements;chumil;kelChabl;kelTzibanem;tamestajKel;constructor({chumil:e}){this.chumil=e,this.retamablChablChumil={},this.retamablTzibanemChumil={},this.vnements=new Ns.EventEmitter,this._tachojmisajKel()}async _tachojmisajKel(){if(this.chumil){const{kelChabl:e,kelTzibanem:r}=Pxe({chumil:this.chumil});this.kelChabl=e,this.kelTzibanem=r;const n=await e.__({:s=>{this.retamablChablChumil=Hxe(s),this.xujalRi()}}),i=await r.__({:s=>{this.retamablTzibanemChumil=Wxe(s),this.xujalRi()}});this.tamestajKel=async()=>{await Promise.all([n(),i()])}}}xujalRi(){this.vnements.emit("xujalRi'")}get retamablChabl(){return _C(jxe,this.retamablChablChumil)}get retamablTzibanem(){return _C(qxe,this.retamablTzibanemChumil)}get konojelChabl(){return Object.keys(this.retamablChabl)}get konojelTzibanem(){return Object.keys(this.retamablTzibanem)}runukChabl({chabl:e,runukulem:r}){const n=Object.keys(this.retamablChabl).find(s=>this.retamablChabl[s]["rb'"]===e);if(!r||!n)return n;r=r.toLowerCase();const i=this.retamablChabl[n].rn;return r==="iso"?[i.i1,i.i2,i.i3].find(s=>s):i[q7[r]||r]}rubiChabl({runuk:e,runukulem:r}){const n=r?.toLowerCase();let i;return n===void 0?i=this.retamablChabl[e]:n==="iso"?i=Object.values(this.retamablChabl).find(s=>[s.rn.i1,s.rn.i2,s.rn.i3].some(a=>a===e)):Object.keys(q7).includes(n)&&(i=Object.values(this.retamablChabl).find(s=>s.rn[q7[n]]===e)),i?i["rb'"]:void 0}rutzibanemChabl({runuk:e}){const n=this.retamablChabl[e]?.tz;if(n)return n;for(const i in this.konojelTzibanem){const s=this.rutzibTzibanem({runuk:i});if(s&&e.match(new RegExp(s,"g")))return i}}rajilankChabl({runuk:e}){const r=this.retamablChabl[e];if(r)return r.aj;const n=this.rutzibanemChabl({runuk:e});return n?this.rajilankTzibanem({runuk:n}):void 0}rubiTzibanem({runuk:e}){const r=this.retamablTzibanem[e];return r?r["rb'"]:void 0}runukTzibanem({tzibanem:e}){return Object.keys(this.retamablTzibanem).find(r=>this.retamablChabl[r]["rb'"]===e)}rucholanemTzibanem({runuk:e}){return this.retamablTzibanem[e]?.ch}rutzibTzibanem({runuk:e}){return this.retamablTzibanem[e]?.tz}rajilankTzibanem({runuk:e}){return this.retamablTzibanem[e]?.aj}tatzeqelbej(e){return this.vnements.on("xujalRi'",e),e(),()=>{this.vnements.off("xujalRi'",e)}}tatzeqelbejRetamablChabl({sm:e}){return this.tatzeqelbej(()=>e(this.retamablChabl))}tatzeqelbejRetamablTzibanem({sm:e}){return this.tatzeqelbej(()=>e(this.retamablTzibanem))}tatzeqelbejKonojelChabl({sm:e}){return this.tatzeqelbej(()=>e(this.konojelChabl))}tatzeqelbejKonojelTzibanem({sm:e}){return this.tatzeqelbej(()=>e(this.konojelTzibanem))}tatzeqelbejRunukChabl({sm:e,chabl:r,runukulem:n}){return this.tatzeqelbej(()=>e(this.runukChabl({chabl:r,runukulem:n})))}tatzeqelbejRubiChabl({sm:e,runuk:r,runukulem:n}){return this.tatzeqelbej(()=>e(this.rubiChabl({runuk:r,runukulem:n})))}tatzeqelbejRutzibanemChabl({sm:e,runuk:r}){return this.tatzeqelbej(()=>e(this.rutzibanemChabl({runuk:r})))}tatzeqelbejRajilankChabl({sm:e,runuk:r}){return this.tatzeqelbej(()=>e(this.rajilankChabl({runuk:r})))}tatzeqelbejRubiTzibanem({sm:e,runuk:r}){return this.tatzeqelbej(()=>e(this.rubiTzibanem({runuk:r})))}tatzeqelbejRunukTzibanem({sm:e,tzibanem:r}){return this.tatzeqelbej(()=>e(this.runukTzibanem({tzibanem:r})))}tatzeqelbejRucholanemTzibanem({sm:e,runuk:r}){return this.tatzeqelbej(()=>e(this.rucholanemTzibanem({runuk:r})))}tatzeqelbejRajilankTzibanem({sm:e,runuk:r}){return this.tatzeqelbej(()=>e(this.rajilankTzibanem({runuk:r})))}async tachilabejTzibanem(e){return await this.kelTzibanem?.({:e})}async takulTzibanem(e){return await this.kelTzibanem?.({:e})}async tachilabejChabl(e){return await this.kelChabl?.({:e})}async takulChabl(e){return await this.kelChabl?.({:e})}async tatzapij(){this.tamestajKel&&await this.tamestajKel()}}const q7={glottologue:"gl",iso1:"i1",iso2:"i2",iso3:"i3"},Hxe=t=>{const e={};for(const r of t)e[r.donnes[Ire]]={aj:r.donnes[Pre],"rb'":r.donnes[Rre],tz:r.donnes[Ore],rn:{gl:r.donnes[Bre],i1:r.donnes[Dre],i2:r.donnes[Mre],i3:r.donnes[Nre]}};return e},Wxe=t=>{const e={};for(const r of t)e[r.donnes[Fre]]={aj:r.donnes[Lre],"rb'":r.donnes[$re],ch:r.donnes[Ure],tz:r.donnes[jre]};return e},Vre=".",SC=".",qre=()=>{const{_:t,_:e,:r}=Zt("");return $i(()=>{localStorage.setItem(r?.||Vre,JSON.stringify(t.value))}),$i(()=>{e.value?localStorage.setItem(r?.||SC,e.value):localStorage.removeItem(r?.||SC)}),{_:t,_:e}},Gxe=({:t,:e=[],:r})=>({install:n=>{const i=localStorage.getItem(r?.||Vre);let s;try{s=i?JSON.parse(i):void 0}catch{}const a=ze(Array.isArray(s)?s:[t,...e]),o=localStorage.getItem(r?.||SC),c=ze(o||void 0);n.provide("",{:r,_:a,_:c})}}),iO=()=>{const t=Zt("nuch'ab'l");if(!t)throw new Error("Nuch'ab'l .");return t},Hp=()=>{const t=iO(),{_:e}=qre(),r=ve(()=>e.value[0]),n=ve(()=>e.value.slice(1));return{:r,:n,_:o=>{Array.isArray(o)?o.length&&(e.value=o):e.value=[o,...e.value.filter(c=>c!==o)]},_:o=>ve(()=>{if(!o.value)return;for(const u of e.value)if(o.value[u])return o.value[u];const c=t?.rutzibanemChabl({runuk:e.value[0]});if(c){for(const u of e.value)if(c===t?.rutzibanemChabl({runuk:u}))return o.value[u]}return Object.values(o.value)[0]}),__:o=>ve(()=>{const c=t?.rutzibanemChabl({runuk:Wl(o)||r.value});if(!c)return!1;const u=t?.rucholanemTzibanem({runuk:c});return u?u==="":!1})}},Kxe=({:t,:e=[],:r})=>({install:n=>{const i=n.config.globalProperties.$constl;n.use(Gxe({:t,:e,:r}));const s=new zxe({chumil:i});n.provide("nuch'ab'l",s),n.config.globalProperties.$nuchabl=s}}),Xxe={:"",:"latn",:"0123456789",:"eE",:"."},Yxe={latin:Xxe,"Mayab'":{:"",:null,:""},"":{:"",:null,:""},:{:"",:null,:""},:{:"",:"deva",:"",:""},:{:"",:"guru",:"",:""},:{:"",:"gujr",:""}," ":{:"",:"mlym",:""},:{:"",:null,:"",:{"":10,"":100,"":1e3}},:{:"",:"taml",:"",:"",:{"":10,"":100,"":1e3}}," ":{:"",:"tamldec",:"",:""},:{:"",:"arabext",:"",:"",:"."},:{:"",:"arab",:"",:"",:"."},:{:"",:"orya",:""},:{:"",:"beng",:"",:""},:{:"",:"knda",:""},:{:"",:"telu",:""},"":{:"",:"brah",:""},"":{:"",:"cakm",:""},"":{:"",:"nkoo",:""},"":{:"",:"saur",:""}," ":{:"",:"olck",:""}," ":{:"",:"sinh",:""},:{:"",:null,:"",:{"":10,"":100,"":1e3}},"":{:"",:"bali",:""},"":{:"",:"cham",:""},"":{:"",:"java",:""},:{:"",:"thai",:"",:""},:{:"",:"laoo",:""},"":{:"",:"tibt",:""},"":{:"",:"mymrshan",:""},"":{:"",:"mymrtlng",:""},"":{:"",:"mymr",:""}," ":{:"",:"kali",:""},"":{:"",:"talu",:""},"":{:"",:"ahom",:""},"":{:"",:"bhks",:""},"":{:"",:"gong",:""},"":{:"",:""},"":{:"",:"gonm",:""},"":{:"",:"rohg",:""},"  ":{:"",:"hmng",:""},"":{:"",:"hmng",:""},:{:"",:"khmr",:""}," - lek nai tam":{:"",:"lana",:""}," - lek hora":{:"",:"lanatham",:""},"":{:"",:"lepc",:""}," ":{:"",:"limb",:""}," ":{:"",:"mong",:""},"":{:"",:"mtei",:""},"":{:"",:"sund",:""},"":{:"",:"sind",:""},"":{:"",:"modi",:""},"":{:"",:"mroo",:""}," ":{:"",:"newa",:""},"":{:"",:"vaii",:""},"":{:"",:"osma",:""},"":{:"",:"shrd",:""},:{:"",:"ethi",:"0",:{"":10,"":20,"":30,"":40,"":50,"":60,"":70,"":80,"":90,"":100,"":1e4}}," ":{:"",:"sora",:""},"":{:"",:"takr",:""},"":{:"",:"tirh",:""}," ":{:"",:"wara",:""},"":{:"",:null,:""},"":{:"",:"wcho",:""},"":{:"",:"adlm",:""},:{:"",:"hans",:"",:"",:".",:{:10,:100,:1e3,:1e4,:1e8,:1e12,:1e16,:1e20,:1e24,:1e28,:1e32,:1e36,:1e40,:1e44}},:{:"",:"hanidec",:"",:"",:"."},:{:"",:null,:""}},zre="",Zxe="/orbitdb/zdpuB2ZNKMRPnn8kwwL9UDY6VNdXxqxTUiEanjJ4Z6HuxEgWU",Jxe="/orbitdb/zdpuAwiHHcXVqXtC5d2zTBC3kP8LkpMxHyp1BjjxVCboH6nPb",Hre="",Wre="",EC="",kC="",TC="",Gre="",AC="",Qxe="/orbitdb/zdpuAx2asNr8YFLvEy8nP5u16SshcbMAhyHkZQm3hqEX2CEP6",e7e="/orbitdb/zdpuAmMYvS8f9WH95y3tyxDPgLsWjXu2zoB2bAy78JNsMkCWn",t7e="/orbitdb/zdpuApW3gaGcGNtppzQQyzuzygfKiQ1WVtVpjQa21ALjqRUNo",r7e="/orbitdb/zdpuAzeaU4DA5WCaKBr1B23UA9gtvMoRiUtPgA1PsuRJvtA6k",n7e="/orbitdb/zdpuB2xXUJ3kcsmzqhqbvUDNRrRH63dLoj6jw238Xu85oSVJp",i7e="/orbitdb/zdpuAq1CqRxiFvcy7sUuB9wLPJ5Ex9Vrp6uFiyP7YB8G3T74s",s7e="/orbitdb/zdpuAwi62CTtS6Tpu8Zf2pBFKEUGo3F27QZXCib4CVGXyBPVa",a7e={licence:"ODbl-1_0",motsClefs:[Jxe],tableaux:[{cols:[{idColonne:Hre,idVariable:Qxe,index:!0},{idColonne:Wre,idVariable:e7e},{idColonne:EC,idVariable:t7e},{idColonne:kC,idVariable:r7e},{idColonne:TC,idVariable:n7e},{idColonne:Gre,idVariable:i7e},{idColonne:AC,idVariable:s7e}],clef:zre}]},o7e=({:t})=>new pC({:t,_:zre,:a7e,_:Zxe});class Kre{_;;;;_;constructor({:e}){this.=e,this._={},this.=new Ns.EventEmitter,this.__()}async _(){return this.||await new Promise(e=>this..once(" ",e))}async __(){this.&&(this.=o7e({:this.}),this._=await this..__({:e=>{this._=c7e(e),this._()}}),this..emit(" ",this.))}_(){this..emit("")}get (){return _C(Yxe,this._)}get (){return Object.keys(this.)}_({:e}){const r=this.[e];if(!r)throw Error(`   ${e}`);return r}_({:e,_:r}){const{:n,:i}=r,s=r.||".",a=[...n],o=e<0;e=Math.abs(e);const c=e.toString().split(".")[1];let u=this.__(e,a,i);return u.length===0&&(u=a[0]),o&&(u="-"+u),c&&(u+=s[0]+[...c].map(l=>n[parseInt(l)]).join("")),u}_({:e,_:r}){RegExp(`[${r.}${r.||"\\."}]+`,"g").exec(e)?.[0]===e&&this._({:e,_:r});const n=r.,i=[...r.],s=r.||".",a=e[0]==="-";a?e=e.slice(1):e=e.replace(/^\++/,"");const[o,c]=e.split(s[0]);let u=0;if(o){const l=[...o].map(d=>n[d]||i.indexOf(d)).reverse();if(l.some(d=>d<0))throw new Error;const f=d=>{const h=d[0],m=d.slice(1).find(_=>_>h),p=(m?d.slice(1).indexOf(m):d.slice(1).length)+1,g=d.slice(1,p),v=g.length?f(g):1,y=d.slice(p),b=y.length?f(y):0;return h*v+b};u=f(l)}return c!==void 0&&c.length&&(u+=parseFloat("."+[...c].map(l=>i.indexOf(l).toString()).join(""))),a&&(u*=-1),u}_({:e,_:r}){const n=[...r.],i=n.length,s=(r.||".")[0];if(i===10){let l=e.toString();return l.includes(".")&&(l=l.replace(".",s)),Array.prototype.map.call(l,f=>f===s?f:n[parseInt(f)]).join("")}if(e===0)return n[0];const a=e<0;let o=e%1;o=parseFloat(o.toFixed(z7(e))),e=Math.abs(e);let c="";for(;e;)c=n[Math.floor(e%i)]+c,e=Math.floor(e/i);o&&(c+=s);let u;for(;o!==0;)u=z7(o),o*=i,c+=n[Math.floor(o)],o-=Math.floor(o),o=parseFloat(o.toFixed(u));return a&&(c="-"+c),c}_({:e,:r,_:n}){const i=[...n.],s=n.||"eE",a=i.length,o=n.||".";if(e=e.replace(/^\++/,""),s.split("").some(c=>e.includes(c))){const[c,u]=e.split(RegExp(s));return this._({:c,:r,_:n})*a**this.({:u,:r})}if(a===10){for(const[c,u]of i.entries())e=e.replace(u,c.toString());for(const c of o.split(""))e=e.replace(c,".");return parseFloat(e)}else{let c=0;const u=e.split(/\./);let l=u[0];const f=u[1],d=l[0]==="-";if(l=l.replace(/^-+/,""),l)for(const h of l){if(c*=a,i.indexOf(h)===-1)throw new Error;c+=i.indexOf(h)}if(f){let h=a;for(const m of f)c+=i.indexOf(m)/h,c=parseFloat(c.toFixed(z7(1/h))),h*=a}return c=d?-c:c,c}}({:e,:r}){const n=this._({:r});return n.===""?this._({:e,_:n}):this._({:e,_:n})}({:e,:r}){const n=r?[r]:this.;for(const i of n)try{const s=this._({:i}),a=this._({:e,:i,_:s});if(!isNaN(a))return a}catch{continue}throw new Error(`${e}    .`)}_({:e,:r,_:n}){const i=n.;if(i==="")return this._({:e,:r,_:n});if(i==="")return this._({:e,_:n});throw Error(`    ${i}`)}__(e,r,n){let i=e,s="";for(const[a,o]of Object.entries(n).sort((c,u)=>u[1]-c[1])){const c=Math.floor(i/o);c&&(i-=c*o,c!==1&&(s+=this.__(c,r,n)),s+=a)}return i&&(s=s+r[Math.floor(i)]),s}(e){return this..on("",e),e(),()=>{this..off("",e)}}_({:e}){return this.(()=>e(this.))}_({:e,:r,:n}){return this.(()=>n(this.({:e,:r})))}_({:e,:r,:n}){return this.(()=>n(this.({:e,:r})))}async (e){return(await this._()).({:e})}async (e){return(await this._()).({:e})}async (){this._&&await this._()}}function z7(t){const e=t.toString();if(e.includes("e")){const[r,n]=e.split("e-");return parseInt(n)+r.length}else return e.length}function c7e(t){const e={};for(const r of t){const n=r.donnes[Wre],i=r.donnes[Hre];if(n===""){const s={:n,:r.donnes[kC],:r.donnes[EC],:r.donnes[TC],:r.donnes[AC]};e[i]=s}else if(n===""){const s=r.donnes[Gre];if(!s)throw new Error(`${i}     .`);const a={:n,:r.donnes[kC],:r.donnes[EC],:r.donnes[TC],:JSON.parse(s),:r.donnes[AC]};e[i]=a}}return e}const l7e=()=>{const t=Zt("");if(!t)throw new Error(" .");return t},O8=()=>{const t=l7e(),e=iO(),{_:r}=qre(),{:n}=Hp(),i=ze(e.rajilankChabl({runuk:n.value}));let s;$i(()=>{s&&s(),s=e?.tatzeqelbejRajilankChabl({runuk:n.value,sm:d=>i.value=d})}),ta(()=>{s&&s()});const a=ze(t.);let o;$i(()=>{o=t._({:d=>a.value=d})}),ta(()=>{o&&o()});const c=ve(()=>r.value||i.value||"");return{_:r,:c,_:a,_:(d,h)=>ve(()=>{const p=Wl(d);if(p!==void 0)try{return t.({:p,:h?Wl(h):c.value})}catch{return}}),__:(d,h)=>ve(()=>[...Wl(d)].map(p=>{if([""," ","+","-","(",")"].includes(p))return p;try{const g=t.({:p});return t.({:g,:h?Wl(h):c.value})}catch{return p}}).join("")),_:(d,h)=>ve(()=>Wl(d).split(".").map(p=>t.({:parseInt(p),:h?Wl(h):c.value})).join("."))}},u7e=({:t,:e=[],:r})=>({install:n=>{const i=n.config.globalProperties.$constl;if(!n.config.globalProperties.$nuchabl){const o=Kxe({:t,:e,:r});n.use(o)}const a=new Kre({:i});n.provide("",a),n.config.globalProperties.$=a}}),Wp=()=>{const t=Zt("");if(!t)throw new Error(" .");return t};class f7e{;;constructor(){this.={},this.=new Io}_({:e,:r}){return{_:e._,_:e._+r}}({:e,:r}){const{_:n,_:i}=this._({:e,:r});return this.[n]||(this.[n]={:e,:{}}),this.[n].[i]||(this.[n].[i]={:ze({}),:new Set,:void 0,:{:r}}),{:this.[n].[i].,:{:n,:i}}}async ({:e}){const r=ti(),{:n}=this.[e.],i=JSON.stringify(e);if(await this..acquire(i),!this.[e.]?.[e.]?.){const a=this.[e.].[e.].,o=await n._({:c=>{a.value=w8e(c)},:this.[e.].[e.]..});this.[e.].[e.].=o}const{:s}=this.[e.].[e.];return s.add(r),this..release(i),r}async ({:e,_:r}){const n=JSON.stringify(e);await this..acquire(n);const i=this.[e.].[e.];i&&(i..delete(r),i..size===0&&(i.&&await i.(),delete this.[e.].[e.]),Object.keys(this.[e.].).length||delete this.[e.]),this..release(n)}}const d7e=({:t="",:e})=>{e=e||Wp();const r=Zt("");let n;const{:i,:s}=r.({:e,:t});return hn(async()=>{n=await r.({:s})}),ta(async()=>{n&&await r.({:s,_:n})}),{:i}},Xre=({:t="",:e}={:""})=>{const{:r,:n}=Hp(),{_:i}=O8(),{:s}=d7e({:e,:t}),{__:a}=Yre({:t,:e}),o=ze([]),c=(f,d,h)=>ve(()=>{const m=ure(s.value||{});if(!m)return o.value.includes(f)||(o.value=[...o.value,f]),f;const p=u.value.find(_=>!!m[f]?.[_]),g=p?m[f][p]:f,v=_=>typeof _=="number"?i(_).value:_.value?_.value:_,y=(_,x)=>{const E=/@:([^\s\p{P}]+(\.[^\s\p{P}]+)*)/gu;_=_.replaceAll(E,function(B,D){const z=u.value.find(S=>!!m[D]?.[S]);return z?m[D][z]:D});const k=/{([^{]+)}/g;return Array.isArray(x)?_.replace(k,function(B,D){return D>=x.length?D:v(x[D])}):typeof x=="object"?_.replace(k,function(B,D){return(D=x[D])==null?"":v(D)||""}):_},b=g.split("|");return b.length<2?y(b[0],typeof d!="number"?d:void 0):y(b[typeof h=="number"?h:typeof d=="number"?d:0]||b[b.length-1],typeof d=="number"?{:d,n:d}:d)}),u=ve(()=>[r.value,...n.value,...a.value.filter(f=>f!==r.value&&!n.value.includes(f))]);return{:c,$:(f,d,h)=>c(f,d,h).value,_:o}},Yre=({:t,:e}={:""})=>{const r=e||Wp(),n=iO(),i=ze([]);let s;hn(async()=>{s=await r._({:f=>{uxe(f,i.value)||(i.value=f)},:t})}),ta(async()=>{s&&await s()});const a=ze([]);let o;hn(async()=>{o=n.tatzeqelbejKonojelChabl({sm:f=>a.value=f})}),ta(async()=>{o&&o()});const c=ve(()=>[...new Set([...a.value,...i.value])]),u=ve(()=>c.value.map(f=>({:f,:n.rubiChabl({runuk:f})})).filter(f=>f.));return{__:c,_:u,_:f=>ve(()=>{const d=Wl(f);if(d)return u.value.find(h=>h.===d)?.})}},h7e=({:t,:e="",:r})=>{const n=r||Wp(),i=ze();let s;const a=Wl(t);return hn(async()=>{a&&(s=await n._({:a,:e,:o=>i.value=o}))}),ta(async()=>{s&&await s()}),Bn(t)&&$i(async()=>{s&&s(),t.value?s=await n._({:t.value,:e,:o=>i.value=o}):(i.value=void 0,s=void 0)}),{_:i}},p7e=({:t}={})=>{const e=t||Wp(),{_:r}=Xre(),n=ze([]);let i;return hn(async()=>{i=await e._({:a=>n.value=a})}),ta(async()=>{i&&await i()}),{:ve(()=>[...new Set([...r.value,...n.value])])}},m7e=({:t}={})=>{const e=t||Wp(),r=ze({});let n;return hn(async()=>{n=await e.__({:i=>r.value=i})}),ta(async()=>{n&&await n()}),{_:r}},g7e=({:t}={})=>{const e=t||Wp(),r=ze([]);let n;return hn(async()=>{n=(await e.__({:i=>r.value=i})).fOublier}),ta(async()=>{n&&await n()}),{:r}},v7e=({:t,:e=[],:r,:n})=>({install:i=>{if(!i.config.globalProperties.$){const a=u7e({:t,:e,:n});i.use(a)}i.config.globalProperties.$=r,i.provide("",r),i.provide("",new f7e)}}),Fu=()=>({__:Yre,__:h7e,_:p7e,_:g7e,_:m7e,_:Xre}),y7e=({:t,:e=[],_:r,_:n,:i,:s,_:a="$constl"})=>({install:o=>{const c=o.config.globalProperties[a];if(i&&!c)throw Error(" .");const u=new _8e({:c,_:r,_:ure(n),:i}),l=v7e({:t,:e,:u,:s});o.use(l)}}),hd=et({border:[Boolean,Number,String]},"border");function pd(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:yl();return{borderClasses:ve(()=>{const n=Bn(t)?t.value:t.border,i=[];if(n===!0||n==="")i.push(`${e}--border`);else if(typeof n=="string"||n===0)for(const s of String(n).split(" "))i.push(`border-${s}`);return i})}}const b7e=[null,"default","comfortable","compact"],bl=et({density:{type:String,default:"default",validator:t=>b7e.includes(t)}},"density");function Lu(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:yl();return{densityClasses:ve(()=>`${e}--density-${t.density}`)}}const h0=et({elevation:{type:[Number,String],validator(t){const e=parseInt(t);return!isNaN(e)&&e>=0&&e<=24}}},"elevation");function p0(t){return{elevationClasses:ve(()=>{const r=Bn(t)?t.value:t.elevation,n=[];return r==null||n.push(`elevation-${r}`),n})}}const Sc=et({rounded:{type:[Boolean,Number,String],default:void 0},tile:Boolean},"rounded");function Ec(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:yl();return{roundedClasses:ve(()=>{const n=Bn(t)?t.value:t.rounded,i=Bn(t)?t.value:t.tile,s=[];if(n===!0||n==="")s.push(`${e}--rounded`);else if(typeof n=="string"||n===0)for(const a of String(n).split(" "))s.push(`rounded-${a}`);else(i||n===!1)&&s.push("rounded-0");return s})}}const ri=et({tag:{type:String,default:"div"}},"tag");function sO(t){return bR(()=>{const e=[],r={};if(t.value.background)if(GA(t.value.background)){if(r.backgroundColor=t.value.background,!t.value.text&&aye(t.value.background)){const n=nl(t.value.background);if(n.a==null||n.a===1){const i=Aee(n);r.color=i,r.caretColor=i}}}else e.push(`bg-${t.value.background}`);return t.value.text&&(GA(t.value.text)?(r.color=t.value.text,r.caretColor=t.value.text):e.push(`text-${t.value.text}`)),{colorClasses:e,colorStyles:r}})}function Eu(t,e){const r=ve(()=>({text:Bn(t)?t.value:e?t[e]:null})),{colorClasses:n,colorStyles:i}=sO(r);return{textColorClasses:n,textColorStyles:i}}function fu(t,e){const r=ve(()=>({background:Bn(t)?t.value:e?t[e]:null})),{colorClasses:n,colorStyles:i}=sO(r);return{backgroundColorClasses:n,backgroundColorStyles:i}}const w7e=["elevated","flat","tonal","outlined","text","plain"];function Sy(t,e){return ae(ar,null,[t&&ae("span",{key:"overlay",class:`${e}__overlay`},null),ae("span",{key:"underlay",class:`${e}__underlay`},null)])}const md=et({color:String,variant:{type:String,default:"elevated",validator:t=>w7e.includes(t)}},"variant");function Ey(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:yl();const r=ve(()=>{const{variant:s}=Ve(t);return`${e}--variant-${s}`}),{colorClasses:n,colorStyles:i}=sO(ve(()=>{const{variant:s,color:a}=Ve(t);return{[["elevated","flat"].includes(s)?"background":"text"]:a}}));return{colorClasses:n,colorStyles:i,variantClasses:r}}const Zre=et({baseColor:String,divided:Boolean,...hd(),...Qt(),...bl(),...h0(),...Sc(),...ri(),...Ei(),...md()},"VBtnGroup"),mU=_t()({name:"VBtnGroup",props:Zre(),setup(t,e){let{slots:r}=e;const{themeClasses:n}=Yi(t),{densityClasses:i}=Lu(t),{borderClasses:s}=pd(t),{elevationClasses:a}=p0(t),{roundedClasses:o}=Ec(t);Np({VBtn:{height:"auto",baseColor:Nt(t,"baseColor"),color:Nt(t,"color"),density:Nt(t,"density"),flat:!0,variant:Nt(t,"variant")}}),Gt(()=>ae(t.tag,{class:["v-btn-group",{"v-btn-group--divided":t.divided},n.value,s.value,i.value,a.value,o.value,t.class],style:t.style},r))}}),aO=et({modelValue:{type:null,default:void 0},multiple:Boolean,mandatory:[Boolean,String],max:Number,selectedClass:String,disabled:Boolean},"group"),oO=et({value:null,disabled:Boolean,selectedClass:String},"group-item");function cO(t,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;const n=Si("useGroupItem");if(!n)throw new Error("[Vuetify] useGroupItem composable must be used inside a component setup function");const i=xc();dn(Symbol.for(`${e.description}:id`),i);const s=Zt(e,null);if(!s){if(!r)return s;throw new Error(`[Vuetify] Could not find useGroup injection with symbol ${e.description}`)}const a=Nt(t,"value"),o=ve(()=>!!(s.disabled.value||t.disabled));s.register({id:i,value:a,disabled:o},n),hs(()=>{s.unregister(i)});const c=ve(()=>s.isSelected(i)),u=ve(()=>s.items.value[0].id===i),l=ve(()=>s.items.value[s.items.value.length-1].id===i),f=ve(()=>c.value&&[s.selectedClass.value,t.selectedClass]);return Ft(c,d=>{n.emit("group:selected",{value:d})},{flush:"sync"}),{id:i,isSelected:c,isFirst:u,isLast:l,toggle:()=>s.select(i,!c.value),select:d=>s.select(i,d),selectedClass:f,value:a,disabled:o,group:s}}function B8(t,e){let r=!1;const n=yi([]),i=si(t,"modelValue",[],d=>d==null?[]:Jre(n,oc(d)),d=>{const h=x7e(n,d);return t.multiple?h:h[0]}),s=Si("useGroup");function a(d,h){const m=d,p=Symbol.for(`${e.description}:id`),v=m1(p,s?.vnode).indexOf(h);Ve(m.value)==null&&(m.value=v,m.useIndexAsValue=!0),v>-1?n.splice(v,0,m):n.push(m)}function o(d){if(r)return;c();const h=n.findIndex(m=>m.id===d);n.splice(h,1)}function c(){const d=n.find(h=>!h.disabled);d&&t.mandatory==="force"&&!i.value.length&&(i.value=[d.id])}hn(()=>{c()}),hs(()=>{r=!0}),cR(()=>{for(let d=0;d<n.length;d++)n[d].useIndexAsValue&&(n[d].value=d)});function u(d,h){const m=n.find(p=>p.id===d);if(!(h&&m?.disabled))if(t.multiple){const p=i.value.slice(),g=p.findIndex(y=>y===d),v=~g;if(h=h??!v,v&&t.mandatory&&p.length<=1||!v&&t.max!=null&&p.length+1>t.max)return;g<0&&h?p.push(d):g>=0&&!h&&p.splice(g,1),i.value=p}else{const p=i.value.includes(d);if(t.mandatory&&p)return;i.value=h??!p?[d]:[]}}function l(d){if(t.multiple,i.value.length){const h=i.value[0],m=n.findIndex(v=>v.id===h);let p=(m+d)%n.length,g=n[p];for(;g.disabled&&p!==m;)p=(p+d)%n.length,g=n[p];if(g.disabled)return;i.value=[n[p].id]}else{const h=n.find(m=>!m.disabled);h&&(i.value=[h.id])}}const f={register:a,unregister:o,selected:i,select:u,disabled:Nt(t,"disabled"),prev:()=>l(n.length-1),next:()=>l(1),isSelected:d=>i.value.includes(d),selectedClass:ve(()=>t.selectedClass),items:ve(()=>n),getItemIndex:d=>_7e(n,d)};return dn(e,f),f}function _7e(t,e){const r=Jre(t,[e]);return r.length?t.findIndex(n=>n.id===r[0]):-1}function Jre(t,e){const r=[];return e.forEach(n=>{const i=t.find(a=>cu(n,a.value)),s=t[n];i?.value!=null?r.push(i.id):s!=null&&r.push(s.id)}),r}function x7e(t,e){const r=[];return e.forEach(n=>{const i=t.findIndex(s=>s.id===n);if(~i){const s=t[i];r.push(s.value!=null?s.value:i)}}),r}const Qre=Symbol.for("vuetify:v-btn-toggle"),S7e=et({...Zre(),...aO()},"VBtnToggle");_t()({name:"VBtnToggle",props:S7e(),emits:{"update:modelValue":t=>!0},setup(t,e){let{slots:r}=e;const{isSelected:n,next:i,prev:s,select:a,selected:o}=B8(t,Qre);return Gt(()=>{const c=mU.filterProps(t);return ae(mU,zt({class:["v-btn-toggle",t.class]},c,{style:t.style}),{default:()=>[r.default?.({isSelected:n,next:i,prev:s,select:a,selected:o})]})}),{next:i,prev:s,select:a}}});const E7e=et({defaults:Object,disabled:Boolean,reset:[Number,String],root:[Boolean,String],scoped:Boolean},"VDefaultsProvider"),Di=_t(!1)({name:"VDefaultsProvider",props:E7e(),setup(t,e){let{slots:r}=e;const{defaults:n,disabled:i,reset:s,root:a,scoped:o}=sR(t);return Np(n,{reset:s,root:a,scoped:o,disabled:i}),()=>r.default?.()}}),k7e=["x-small","small","default","large","x-large"],ky=et({size:{type:[String,Number],default:"default"}},"size");function Ty(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:yl();return bR(()=>{let r,n;return V3(k7e,t.size)?r=`${e}--size-${t.size}`:t.size&&(n={width:Ht(t.size),height:Ht(t.size)}),{sizeClasses:r,sizeStyles:n}})}const T7e=et({color:String,disabled:Boolean,start:Boolean,end:Boolean,icon:$r,...Qt(),...ky(),...ri({tag:"i"}),...Ei()},"VIcon"),Hr=_t()({name:"VIcon",props:T7e(),setup(t,e){let{attrs:r,slots:n}=e;const i=ze(),{themeClasses:s}=Yi(t),{iconData:a}=C2e(ve(()=>i.value||t.icon)),{sizeClasses:o}=Ty(t),{textColorClasses:c,textColorStyles:u}=Eu(Nt(t,"color"));return Gt(()=>{const l=n.default?.();l&&(i.value=mee(l).filter(d=>d.type===dy&&d.children&&typeof d.children=="string")[0]?.children);const f=!!(r.onClick||r.onClickOnce);return ae(a.value.component,{tag:t.tag,icon:a.value.icon,class:["v-icon","notranslate",s.value,o.value,c.value,{"v-icon--clickable":f,"v-icon--disabled":t.disabled,"v-icon--start":t.start,"v-icon--end":t.end},t.class],style:[o.value?void 0:{fontSize:Ht(t.size),height:Ht(t.size),width:Ht(t.size)},u.value,t.style],role:f?"button":void 0,"aria-hidden":!f,tabindex:f?t.disabled?-1:0:void 0},{default:()=>[l]})}),{}}});function ene(t,e){const r=ze(),n=Dt(!1);if(vR){const i=new IntersectionObserver(s=>{n.value=!!s.find(a=>a.isIntersecting)},e);hs(()=>{i.disconnect()}),Ft(r,(s,a)=>{a&&(i.unobserve(a),n.value=!1),s&&i.observe(s)},{flush:"post"})}return{intersectionRef:r,isIntersecting:n}}const A7e=et({bgColor:String,color:String,indeterminate:[Boolean,String],modelValue:{type:[Number,String],default:0},rotate:{type:[Number,String],default:0},width:{type:[Number,String],default:4},...Qt(),...ky(),...ri({tag:"div"}),...Ei()},"VProgressCircular"),lO=_t()({name:"VProgressCircular",props:A7e(),setup(t,e){let{slots:r}=e;const n=20,i=2*Math.PI*n,s=ze(),{themeClasses:a}=Yi(t),{sizeClasses:o,sizeStyles:c}=Ty(t),{textColorClasses:u,textColorStyles:l}=Eu(Nt(t,"color")),{textColorClasses:f,textColorStyles:d}=Eu(Nt(t,"bgColor")),{intersectionRef:h,isIntersecting:m}=ene(),{resizeRef:p,contentRect:g}=H1(),v=ve(()=>Math.max(0,Math.min(100,parseFloat(t.modelValue)))),y=ve(()=>Number(t.width)),b=ve(()=>c.value?Number(t.size):g.value?g.value.width:Math.max(y.value,32)),_=ve(()=>n/(1-y.value/b.value)*2),x=ve(()=>y.value/b.value*_.value),E=ve(()=>Ht((100-v.value)/100*i));return $i(()=>{h.value=s.value,p.value=s.value}),Gt(()=>ae(t.tag,{ref:s,class:["v-progress-circular",{"v-progress-circular--indeterminate":!!t.indeterminate,"v-progress-circular--visible":m.value,"v-progress-circular--disable-shrink":t.indeterminate==="disable-shrink"},a.value,o.value,u.value,t.class],style:[c.value,l.value,t.style],role:"progressbar","aria-valuemin":"0","aria-valuemax":"100","aria-valuenow":t.indeterminate?void 0:v.value},{default:()=>[ae("svg",{style:{transform:`rotate(calc(-90deg + ${Number(t.rotate)}deg))`},xmlns:"http://www.w3.org/2000/svg",viewBox:`0 0 ${_.value} ${_.value}`},[ae("circle",{class:["v-progress-circular__underlay",f.value],style:d.value,fill:"transparent",cx:"50%",cy:"50%",r:n,"stroke-width":x.value,"stroke-dasharray":i,"stroke-dashoffset":0},null),ae("circle",{class:"v-progress-circular__overlay",fill:"transparent",cx:"50%",cy:"50%",r:n,"stroke-width":x.value,"stroke-dasharray":i,"stroke-dashoffset":E.value},null)]),r.default&&ae("div",{class:"v-progress-circular__content"},[r.default({value:v.value})])]})),{}}}),wl=et({height:[Number,String],maxHeight:[Number,String],maxWidth:[Number,String],minHeight:[Number,String],minWidth:[Number,String],width:[Number,String]},"dimension");function _l(t){return{dimensionStyles:ve(()=>{const r={},n=Ht(t.height),i=Ht(t.maxHeight),s=Ht(t.maxWidth),a=Ht(t.minHeight),o=Ht(t.minWidth),c=Ht(t.width);return n!=null&&(r.height=n),i!=null&&(r.maxHeight=i),s!=null&&(r.maxWidth=s),a!=null&&(r.minHeight=a),o!=null&&(r.minWidth=o),c!=null&&(r.width=c),r})}}const gU={center:"center",top:"bottom",bottom:"top",left:"right",right:"left"},D8=et({location:String},"location");function M8(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=arguments.length>2?arguments[2]:void 0;const{isRtl:n}=Oo();return{locationStyles:ve(()=>{if(!t.location)return{};const{side:s,align:a}=WA(t.location.split(" ").length>1?t.location:`${t.location} center`,n.value);function o(u){return r?r(u):0}const c={};return s!=="center"&&(e?c[gU[s]]=`calc(100% - ${o(s)}px)`:c[s]=0),a!=="center"?e?c[gU[a]]=`calc(100% - ${o(a)}px)`:c[a]=0:(s==="center"?c.top=c.left="50%":c[{top:"left",bottom:"left",left:"top",right:"top"}[s]]="50%",c.transform={top:"translateX(-50%)",bottom:"translateX(-50%)",left:"translateY(-50%)",right:"translateY(-50%)",center:"translate(-50%, -50%)"}[s]),c})}}const C7e=et({absolute:Boolean,active:{type:Boolean,default:!0},bgColor:String,bgOpacity:[Number,String],bufferValue:{type:[Number,String],default:0},bufferColor:String,bufferOpacity:[Number,String],clickable:Boolean,color:String,height:{type:[Number,String],default:4},indeterminate:Boolean,max:{type:[Number,String],default:100},modelValue:{type:[Number,String],default:0},opacity:[Number,String],reverse:Boolean,stream:Boolean,striped:Boolean,roundedBar:Boolean,...Qt(),...D8({location:"top"}),...Sc(),...ri(),...Ei()},"VProgressLinear"),I7e=_t()({name:"VProgressLinear",props:C7e(),emits:{"update:modelValue":t=>!0},setup(t,e){let{slots:r}=e;const n=si(t,"modelValue"),{isRtl:i,rtlClasses:s}=Oo(),{themeClasses:a}=Yi(t),{locationStyles:o}=M8(t),{textColorClasses:c,textColorStyles:u}=Eu(t,"color"),{backgroundColorClasses:l,backgroundColorStyles:f}=fu(ve(()=>t.bgColor||t.color)),{backgroundColorClasses:d,backgroundColorStyles:h}=fu(ve(()=>t.bufferColor||t.bgColor||t.color)),{backgroundColorClasses:m,backgroundColorStyles:p}=fu(t,"color"),{roundedClasses:g}=Ec(t),{intersectionRef:v,isIntersecting:y}=ene(),b=ve(()=>parseFloat(t.max)),_=ve(()=>parseFloat(t.height)),x=ve(()=>lu(parseFloat(t.bufferValue)/b.value*100,0,100)),E=ve(()=>lu(parseFloat(n.value)/b.value*100,0,100)),k=ve(()=>i.value!==t.reverse),B=ve(()=>t.indeterminate?"fade-transition":"slide-x-transition"),D=Lr&&window.matchMedia?.("(forced-colors: active)").matches;function z(U){if(!v.value)return;const{left:S,right:T,width:w}=v.value.getBoundingClientRect(),A=k.value?w-U.clientX+(T-w):U.clientX-S;n.value=Math.round(A/w*b.value)}return Gt(()=>ae(t.tag,{ref:v,class:["v-progress-linear",{"v-progress-linear--absolute":t.absolute,"v-progress-linear--active":t.active&&y.value,"v-progress-linear--reverse":k.value,"v-progress-linear--rounded":t.rounded,"v-progress-linear--rounded-bar":t.roundedBar,"v-progress-linear--striped":t.striped},g.value,a.value,s.value,t.class],style:[{bottom:t.location==="bottom"?0:void 0,top:t.location==="top"?0:void 0,height:t.active?Ht(_.value):0,"--v-progress-linear-height":Ht(_.value),...t.absolute?o.value:{}},t.style],role:"progressbar","aria-hidden":t.active?"false":"true","aria-valuemin":"0","aria-valuemax":t.max,"aria-valuenow":t.indeterminate?void 0:Math.min(parseFloat(n.value),b.value),onClick:t.clickable&&z},{default:()=>[t.stream&&ae("div",{key:"stream",class:["v-progress-linear__stream",c.value],style:{...u.value,[k.value?"left":"right"]:Ht(-_.value),borderTop:`${Ht(_.value/2)} dotted`,opacity:parseFloat(t.bufferOpacity),top:`calc(50% - ${Ht(_.value/4)})`,width:Ht(100-x.value,"%"),"--v-progress-linear-stream-to":Ht(_.value*(k.value?1:-1))}},null),ae("div",{class:["v-progress-linear__background",D?void 0:l.value],style:[f.value,{opacity:parseFloat(t.bgOpacity),width:t.stream?0:void 0}]},null),ae("div",{class:["v-progress-linear__buffer",D?void 0:d.value],style:[h.value,{opacity:parseFloat(t.bufferOpacity),width:Ht(x.value,"%")}]},null),ae(Hf,{name:B.value},{default:()=>[t.indeterminate?ae("div",{class:"v-progress-linear__indeterminate"},[["long","short"].map(U=>ae("div",{key:U,class:["v-progress-linear__indeterminate",U,D?void 0:m.value],style:p.value},null))]):ae("div",{class:["v-progress-linear__determinate",D?void 0:m.value],style:[p.value,{width:Ht(E.value,"%")}]},null)]}),r.default&&ae("div",{class:"v-progress-linear__content"},[r.default({value:E.value,buffer:x.value})])]})),{}}}),uO=et({loading:[Boolean,String]},"loader");function N8(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:yl();return{loaderClasses:ve(()=>({[`${e}--loading`]:t.loading}))}}function fO(t,e){let{slots:r}=e;return ae("div",{class:`${t.name}__loader`},[r.default?.({color:t.color,isActive:t.active})||ae(I7e,{absolute:t.absolute,active:t.active,color:t.color,height:"2",indeterminate:!0},null)])}const P7e=["static","relative","fixed","absolute","sticky"],dO=et({position:{type:String,validator:t=>P7e.includes(t)}},"position");function hO(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:yl();return{positionClasses:ve(()=>t.position?`${e}--${t.position}`:void 0)}}function R7e(){const t=Si("useRoute");return ve(()=>t?.proxy?.$route)}function O7e(){return Si("useRouter")?.proxy?.$router}function F8(t,e){const r=IQ("RouterLink"),n=ve(()=>!!(t.href||t.to)),i=ve(()=>n?.value||KN(e,"click")||KN(t,"click"));if(typeof r=="string"||!("useLink"in r)){const f=Nt(t,"href");return{isLink:n,isClickable:i,href:f,linkProps:yi({href:f})}}const s=ve(()=>({...t,to:Nt(()=>t.to||"")})),a=r.useLink(s.value),o=ve(()=>t.to?a:void 0),c=R7e(),u=ve(()=>o.value?t.exact?c.value?o.value.isExactActive?.value&&cu(o.value.route.value.query,c.value.query):o.value.isExactActive?.value??!1:o.value.isActive?.value??!1:!1),l=ve(()=>t.to?o.value?.route.value.href:t.href);return{isLink:n,isClickable:i,isActive:u,route:o.value?.route,navigate:o.value?.navigate,href:l,linkProps:yi({href:l,"aria-current":ve(()=>u.value?"page":void 0)})}}const L8=et({href:String,replace:Boolean,to:[String,Object],exact:Boolean},"router");let H7=!1;function B7e(t,e){let r=!1,n,i;Lr&&t?.beforeEach&&(Cn(()=>{window.addEventListener("popstate",s),n=t.beforeEach((a,o,c)=>{H7?r?e(c):c():setTimeout(()=>r?e(c):c()),H7=!0}),i=t?.afterEach(()=>{H7=!1})}),ka(()=>{window.removeEventListener("popstate",s),n?.(),i?.()}));function s(a){a.state?.replaced||(r=!0,setTimeout(()=>r=!1))}}function D7e(t,e){Ft(()=>t.isActive?.value,r=>{t.isLink.value&&r&&e&&Cn(()=>{e(!0)})},{immediate:!0})}const CC=Symbol("rippleStop"),M7e=80;function vU(t,e){t.style.transform=e,t.style.webkitTransform=e}function IC(t){return t.constructor.name==="TouchEvent"}function tne(t){return t.constructor.name==="KeyboardEvent"}const N7e=function(t,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=0,i=0;if(!tne(t)){const f=e.getBoundingClientRect(),d=IC(t)?t.touches[t.touches.length-1]:t;n=d.clientX-f.left,i=d.clientY-f.top}let s=0,a=.3;e._ripple?.circle?(a=.15,s=e.clientWidth/2,s=r.center?s:s+Math.sqrt((n-s)**2+(i-s)**2)/4):s=Math.sqrt(e.clientWidth**2+e.clientHeight**2)/2;const o=`${(e.clientWidth-s*2)/2}px`,c=`${(e.clientHeight-s*2)/2}px`,u=r.center?o:`${n-s}px`,l=r.center?c:`${i-s}px`;return{radius:s,scale:a,x:u,y:l,centerX:o,centerY:c}},o4={show(t,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!e?._ripple?.enabled)return;const n=document.createElement("span"),i=document.createElement("span");n.appendChild(i),n.className="v-ripple__container",r.class&&(n.className+=` ${r.class}`);const{radius:s,scale:a,x:o,y:c,centerX:u,centerY:l}=N7e(t,e,r),f=`${s*2}px`;i.className="v-ripple__animation",i.style.width=f,i.style.height=f,e.appendChild(n);const d=window.getComputedStyle(e);d&&d.position==="static"&&(e.style.position="relative",e.dataset.previousPosition="static"),i.classList.add("v-ripple__animation--enter"),i.classList.add("v-ripple__animation--visible"),vU(i,`translate(${o}, ${c}) scale3d(${a},${a},${a})`),i.dataset.activated=String(performance.now()),requestAnimationFrame(()=>{requestAnimationFrame(()=>{i.classList.remove("v-ripple__animation--enter"),i.classList.add("v-ripple__animation--in"),vU(i,`translate(${u}, ${l}) scale3d(1,1,1)`)})})},hide(t){if(!t?._ripple?.enabled)return;const e=t.getElementsByClassName("v-ripple__animation");if(e.length===0)return;const r=e[e.length-1];if(r.dataset.isHiding)return;r.dataset.isHiding="true";const n=performance.now()-Number(r.dataset.activated),i=Math.max(250-n,0);setTimeout(()=>{r.classList.remove("v-ripple__animation--in"),r.classList.add("v-ripple__animation--out"),setTimeout(()=>{t.getElementsByClassName("v-ripple__animation").length===1&&t.dataset.previousPosition&&(t.style.position=t.dataset.previousPosition,delete t.dataset.previousPosition),r.parentNode?.parentNode===t&&t.removeChild(r.parentNode)},300)},i)}};function rne(t){return typeof t>"u"||!!t}function dv(t){const e={},r=t.currentTarget;if(!(!r?._ripple||r._ripple.touched||t[CC])){if(t[CC]=!0,IC(t))r._ripple.touched=!0,r._ripple.isTouch=!0;else if(r._ripple.isTouch)return;if(e.center=r._ripple.centered||tne(t),r._ripple.class&&(e.class=r._ripple.class),IC(t)){if(r._ripple.showTimerCommit)return;r._ripple.showTimerCommit=()=>{o4.show(t,r,e)},r._ripple.showTimer=window.setTimeout(()=>{r?._ripple?.showTimerCommit&&(r._ripple.showTimerCommit(),r._ripple.showTimerCommit=null)},M7e)}else o4.show(t,r,e)}}function yU(t){t[CC]=!0}function qa(t){const e=t.currentTarget;if(e?._ripple){if(window.clearTimeout(e._ripple.showTimer),t.type==="touchend"&&e._ripple.showTimerCommit){e._ripple.showTimerCommit(),e._ripple.showTimerCommit=null,e._ripple.showTimer=window.setTimeout(()=>{qa(t)});return}window.setTimeout(()=>{e._ripple&&(e._ripple.touched=!1)}),o4.hide(e)}}function nne(t){const e=t.currentTarget;e?._ripple&&(e._ripple.showTimerCommit&&(e._ripple.showTimerCommit=null),window.clearTimeout(e._ripple.showTimer))}let hv=!1;function ine(t){!hv&&(t.keyCode===zN.enter||t.keyCode===zN.space)&&(hv=!0,dv(t))}function sne(t){hv=!1,qa(t)}function ane(t){hv&&(hv=!1,qa(t))}function one(t,e,r){const{value:n,modifiers:i}=e,s=rne(n);if(s||o4.hide(t),t._ripple=t._ripple??{},t._ripple.enabled=s,t._ripple.centered=i.center,t._ripple.circle=i.circle,uee(n)&&n.class&&(t._ripple.class=n.class),s&&!r){if(i.stop){t.addEventListener("touchstart",yU,{passive:!0}),t.addEventListener("mousedown",yU);return}t.addEventListener("touchstart",dv,{passive:!0}),t.addEventListener("touchend",qa,{passive:!0}),t.addEventListener("touchmove",nne,{passive:!0}),t.addEventListener("touchcancel",qa),t.addEventListener("mousedown",dv),t.addEventListener("mouseup",qa),t.addEventListener("mouseleave",qa),t.addEventListener("keydown",ine),t.addEventListener("keyup",sne),t.addEventListener("blur",ane),t.addEventListener("dragstart",qa,{passive:!0})}else!s&&r&&cne(t)}function cne(t){t.removeEventListener("mousedown",dv),t.removeEventListener("touchstart",dv),t.removeEventListener("touchend",qa),t.removeEventListener("touchmove",nne),t.removeEventListener("touchcancel",qa),t.removeEventListener("mouseup",qa),t.removeEventListener("mouseleave",qa),t.removeEventListener("keydown",ine),t.removeEventListener("keyup",sne),t.removeEventListener("dragstart",qa),t.removeEventListener("blur",ane)}function F7e(t,e){one(t,e,!1)}function L7e(t){delete t._ripple,cne(t)}function $7e(t,e){if(e.value===e.oldValue)return;const r=rne(e.oldValue);one(t,e,r)}const Ay={mounted:F7e,unmounted:L7e,updated:$7e},U7e=et({active:{type:Boolean,default:void 0},activeColor:String,baseColor:String,symbol:{type:null,default:Qre},flat:Boolean,icon:[Boolean,String,Function,Object],prependIcon:$r,appendIcon:$r,block:Boolean,readonly:Boolean,slim:Boolean,stacked:Boolean,ripple:{type:[Boolean,Object],default:!0},text:{type:[String,Number,Boolean],default:void 0},...hd(),...Qt(),...bl(),...wl(),...h0(),...oO(),...uO(),...D8(),...dO(),...Sc(),...L8(),...ky(),...ri({tag:"button"}),...Ei(),...md({variant:"elevated"})},"VBtn"),Wa=_t()({name:"VBtn",props:U7e(),emits:{"group:selected":t=>!0},setup(t,e){let{attrs:r,slots:n}=e;const{themeClasses:i}=Yi(t),{borderClasses:s}=pd(t),{densityClasses:a}=Lu(t),{dimensionStyles:o}=_l(t),{elevationClasses:c}=p0(t),{loaderClasses:u}=N8(t),{locationStyles:l}=M8(t),{positionClasses:f}=hO(t),{roundedClasses:d}=Ec(t),{sizeClasses:h,sizeStyles:m}=Ty(t),p=cO(t,t.symbol,!1),g=F8(t,r),v=ve(()=>t.active!==void 0?t.active:g.isLink.value?g.isActive?.value:p?.isSelected.value),y=ve(()=>v.value?t.activeColor??t.color:t.color),b=ve(()=>({color:p?.isSelected.value&&(!g.isLink.value||g.isActive?.value)||!p||g.isActive?.value?y.value??t.baseColor:t.baseColor,variant:t.variant})),{colorClasses:_,colorStyles:x,variantClasses:E}=Ey(b),k=ve(()=>p?.disabled.value||t.disabled),B=ve(()=>t.variant==="elevated"&&!(t.disabled||t.flat||t.border)),D=ve(()=>{if(!(t.value===void 0||typeof t.value=="symbol"))return Object(t.value)===t.value?JSON.stringify(t.value,null,0):t.value});function z(U){k.value||g.isLink.value&&(U.metaKey||U.ctrlKey||U.shiftKey||U.button!==0||r.target==="_blank")||(g.navigate?.(U),p?.toggle())}return D7e(g,p?.select),Gt(()=>{const U=g.isLink.value?"a":t.tag,S=!!(t.prependIcon||n.prepend),T=!!(t.appendIcon||n.append),w=!!(t.icon&&t.icon!==!0);return us(ae(U,zt({type:U==="a"?void 0:"button",class:["v-btn",p?.selectedClass.value,{"v-btn--active":v.value,"v-btn--block":t.block,"v-btn--disabled":k.value,"v-btn--elevated":B.value,"v-btn--flat":t.flat,"v-btn--icon":!!t.icon,"v-btn--loading":t.loading,"v-btn--readonly":t.readonly,"v-btn--slim":t.slim,"v-btn--stacked":t.stacked},i.value,s.value,_.value,a.value,c.value,u.value,f.value,d.value,h.value,E.value,t.class],style:[x.value,o.value,l.value,m.value,t.style],"aria-busy":t.loading?!0:void 0,disabled:k.value||void 0,tabindex:t.loading||t.readonly?-1:void 0,onClick:z,value:D.value},g.linkProps),{default:()=>[Sy(!0,"v-btn"),!t.icon&&S&&ae("span",{key:"prepend",class:"v-btn__prepend"},[n.prepend?ae(Di,{key:"prepend-defaults",disabled:!t.prependIcon,defaults:{VIcon:{icon:t.prependIcon}}},n.prepend):ae(Hr,{key:"prepend-icon",icon:t.prependIcon},null)]),ae("span",{class:"v-btn__content","data-no-activator":""},[!n.default&&w?ae(Hr,{key:"content-icon",icon:t.icon},null):ae(Di,{key:"content-defaults",disabled:!w,defaults:{VIcon:{icon:t.icon}}},{default:()=>[n.default?.()??Rr(t.text)]})]),!t.icon&&T&&ae("span",{key:"append",class:"v-btn__append"},[n.append?ae(Di,{key:"append-defaults",disabled:!t.appendIcon,defaults:{VIcon:{icon:t.appendIcon}}},n.append):ae(Hr,{key:"append-icon",icon:t.appendIcon},null)]),!!t.loading&&ae("span",{key:"loader",class:"v-btn__loader"},[n.loader?.()??ae(lO,{color:typeof t.loading=="boolean"?void 0:t.loading,indeterminate:!0,width:"2"},null)])]}),[[Ay,!k.value&&t.ripple,"",{center:!!t.icon}]])}),{group:p}}}),lne=d8.reduce((t,e)=>(t[e]={type:[Boolean,String,Number],default:!1},t),{}),une=d8.reduce((t,e)=>{const r="offset"+Ru(e);return t[r]={type:[String,Number],default:null},t},{}),fne=d8.reduce((t,e)=>{const r="order"+Ru(e);return t[r]={type:[String,Number],default:null},t},{}),bU={col:Object.keys(lne),offset:Object.keys(une),order:Object.keys(fne)};function j7e(t,e,r){let n=t;if(!(r==null||r===!1)){if(e){const i=e.replace(t,"");n+=`-${i}`}return t==="col"&&(n="v-"+n),t==="col"&&(r===""||r===!0)||(n+=`-${r}`),n.toLowerCase()}}const V7e=["auto","start","end","center","baseline","stretch"],q7e=et({cols:{type:[Boolean,String,Number],default:!1},...lne,offset:{type:[String,Number],default:null},...une,order:{type:[String,Number],default:null},...fne,alignSelf:{type:String,default:null,validator:t=>V7e.includes(t)},...Qt(),...ri()},"VCol"),Gi=_t()({name:"VCol",props:q7e(),setup(t,e){let{slots:r}=e;const n=ve(()=>{const i=[];let s;for(s in bU)bU[s].forEach(o=>{const c=t[o],u=j7e(s,o,c);u&&i.push(u)});const a=i.some(o=>o.startsWith("v-col-"));return i.push({"v-col":!a||!t.cols,[`v-col-${t.cols}`]:t.cols,[`offset-${t.offset}`]:t.offset,[`order-${t.order}`]:t.order,[`align-self-${t.alignSelf}`]:t.alignSelf}),i});return()=>ps(t.tag,{class:[n.value,t.class],style:t.style},r.default?.())}}),pO=["start","end","center"],dne=["space-between","space-around","space-evenly"];function mO(t,e){return d8.reduce((r,n)=>{const i=t+Ru(n);return r[i]=e(),r},{})}const z7e=[...pO,"baseline","stretch"],hne=t=>z7e.includes(t),pne=mO("align",()=>({type:String,default:null,validator:hne})),H7e=[...pO,...dne],mne=t=>H7e.includes(t),gne=mO("justify",()=>({type:String,default:null,validator:mne})),W7e=[...pO,...dne,"stretch"],vne=t=>W7e.includes(t),yne=mO("alignContent",()=>({type:String,default:null,validator:vne})),wU={align:Object.keys(pne),justify:Object.keys(gne),alignContent:Object.keys(yne)},G7e={align:"align",justify:"justify",alignContent:"align-content"};function K7e(t,e,r){let n=G7e[t];if(r!=null){if(e){const i=e.replace(t,"");n+=`-${i}`}return n+=`-${r}`,n.toLowerCase()}}const X7e=et({dense:Boolean,noGutters:Boolean,align:{type:String,default:null,validator:hne},...pne,justify:{type:String,default:null,validator:mne},...gne,alignContent:{type:String,default:null,validator:vne},...yne,...Qt(),...ri()},"VRow"),bne=_t()({name:"VRow",props:X7e(),setup(t,e){let{slots:r}=e;const n=ve(()=>{const i=[];let s;for(s in wU)wU[s].forEach(a=>{const o=t[a],c=K7e(s,a,o);c&&i.push(c)});return i.push({"v-row--no-gutters":t.noGutters,"v-row--dense":t.dense,[`align-${t.align}`]:t.align,[`justify-${t.justify}`]:t.justify,[`align-content-${t.alignContent}`]:t.alignContent}),i});return()=>ps(t.tag,{class:["v-row",n.value,t.class],style:t.style},r.default?.())}}),Y7e=SR("v-spacer","div","VSpacer"),Z7e=t=>{const{touchstartX:e,touchendX:r,touchstartY:n,touchendY:i}=t,s=.5,a=16;t.offsetX=r-e,t.offsetY=i-n,Math.abs(t.offsetY)<s*Math.abs(t.offsetX)&&(t.left&&r<e-a&&t.left(t),t.right&&r>e+a&&t.right(t)),Math.abs(t.offsetX)<s*Math.abs(t.offsetY)&&(t.up&&i<n-a&&t.up(t),t.down&&i>n+a&&t.down(t))};function J7e(t,e){const r=t.changedTouches[0];e.touchstartX=r.clientX,e.touchstartY=r.clientY,e.start?.({originalEvent:t,...e})}function Q7e(t,e){const r=t.changedTouches[0];e.touchendX=r.clientX,e.touchendY=r.clientY,e.end?.({originalEvent:t,...e}),Z7e(e)}function e9e(t,e){const r=t.changedTouches[0];e.touchmoveX=r.clientX,e.touchmoveY=r.clientY,e.move?.({originalEvent:t,...e})}function t9e(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const e={touchstartX:0,touchstartY:0,touchendX:0,touchendY:0,touchmoveX:0,touchmoveY:0,offsetX:0,offsetY:0,left:t.left,right:t.right,up:t.up,down:t.down,start:t.start,move:t.move,end:t.end};return{touchstart:r=>J7e(r,e),touchend:r=>Q7e(r,e),touchmove:r=>e9e(r,e)}}function r9e(t,e){const r=e.value,n=r?.parent?t.parentElement:t,i=r?.options??{passive:!0},s=e.instance?.$.uid;if(!n||!s)return;const a=t9e(e.value);n._touchHandlers=n._touchHandlers??Object.create(null),n._touchHandlers[s]=a,dee(a).forEach(o=>{n.addEventListener(o,a[o],i)})}function n9e(t,e){const r=e.value?.parent?t.parentElement:t,n=e.instance?.$.uid;if(!r?._touchHandlers||!n)return;const i=r._touchHandlers[n];dee(i).forEach(s=>{r.removeEventListener(s,i[s])}),delete r._touchHandlers[n]}const wne={mounted:r9e,unmounted:n9e},_ne=Symbol.for("vuetify:v-window"),xne=Symbol.for("vuetify:v-window-group"),i9e=et({continuous:Boolean,nextIcon:{type:[Boolean,String,Function,Object],default:"$next"},prevIcon:{type:[Boolean,String,Function,Object],default:"$prev"},reverse:Boolean,showArrows:{type:[Boolean,String],validator:t=>typeof t=="boolean"||t==="hover"},touch:{type:[Object,Boolean],default:void 0},direction:{type:String,default:"horizontal"},modelValue:null,disabled:Boolean,selectedClass:{type:String,default:"v-window-item--active"},mandatory:{type:[Boolean,String],default:"force"},...Qt(),...ri(),...Ei()},"VWindow"),s9e=_t()({name:"VWindow",directives:{Touch:wne},props:i9e(),emits:{"update:modelValue":t=>!0},setup(t,e){let{slots:r}=e;const{themeClasses:n}=Yi(t),{isRtl:i}=Oo(),{t:s}=u8(),a=B8(t,xne),o=ze(),c=ve(()=>i.value?!t.reverse:t.reverse),u=Dt(!1),l=ve(()=>{const _=t.direction==="vertical"?"y":"x",E=(c.value?!u.value:u.value)?"-reverse":"";return`v-window-${_}${E}-transition`}),f=Dt(0),d=ze(void 0),h=ve(()=>a.items.value.findIndex(_=>a.selected.value.includes(_.id)));Ft(h,(_,x)=>{const E=a.items.value.length,k=E-1;E<=2?u.value=_<x:_===k&&x===0?u.value=!0:_===0&&x===k?u.value=!1:u.value=_<x}),dn(_ne,{transition:l,isReversed:u,transitionCount:f,transitionHeight:d,rootRef:o});const m=ve(()=>t.continuous||h.value!==0),p=ve(()=>t.continuous||h.value!==a.items.value.length-1);function g(){m.value&&a.prev()}function v(){p.value&&a.next()}const y=ve(()=>{const _=[],x={icon:i.value?t.nextIcon:t.prevIcon,class:`v-window__${c.value?"right":"left"}`,onClick:a.prev,"aria-label":s("$vuetify.carousel.prev")};_.push(m.value?r.prev?r.prev({props:x}):ae(Wa,x,null):ae("div",null,null));const E={icon:i.value?t.prevIcon:t.nextIcon,class:`v-window__${c.value?"left":"right"}`,onClick:a.next,"aria-label":s("$vuetify.carousel.next")};return _.push(p.value?r.next?r.next({props:E}):ae(Wa,E,null):ae("div",null,null)),_}),b=ve(()=>t.touch===!1?t.touch:{...{left:()=>{c.value?g():v()},right:()=>{c.value?v():g()},start:x=>{let{originalEvent:E}=x;E.stopPropagation()}},...t.touch===!0?{}:t.touch});return Gt(()=>us(ae(t.tag,{ref:o,class:["v-window",{"v-window--show-arrows-on-hover":t.showArrows==="hover"},n.value,t.class],style:t.style},{default:()=>[ae("div",{class:"v-window__container",style:{height:d.value}},[r.default?.({group:a}),t.showArrows!==!1&&ae("div",{class:"v-window__controls"},[y.value])]),r.additional?.({group:a})]}),[[ud("touch"),b.value]])),{group:a}}}),Sne=et({eager:Boolean},"lazy");function Ene(t,e){const r=Dt(!1),n=ve(()=>r.value||t.eager||e.value);Ft(e,()=>r.value=!0);function i(){t.eager||(r.value=!1)}return{isBooted:r,hasContent:n,onAfterLeave:i}}function gO(){const t=Dt(!1);return hn(()=>{window.requestAnimationFrame(()=>{t.value=!0})}),{ssrBootStyles:ve(()=>t.value?void 0:{transition:"none !important"}),isBooted:ly(t)}}const Cy=et({transition:{type:[Boolean,String,Object],default:"fade-transition",validator:t=>t!==!0}},"transition"),ru=(t,e)=>{let{slots:r}=e;const{transition:n,disabled:i,group:s,...a}=t,{component:o=s?gR:Hf,...c}=typeof n=="object"?n:{};return ps(o,zt(typeof n=="string"?{name:i?"":n}:c,typeof n=="string"?{}:Object.fromEntries(Object.entries({disabled:i,group:s}).filter(u=>{let[l,f]=u;return f!==void 0})),a),r)},a9e=et({reverseTransition:{type:[Boolean,String],default:void 0},transition:{type:[Boolean,String],default:void 0},...Qt(),...oO(),...Sne()},"VWindowItem"),o9e=_t()({name:"VWindowItem",directives:{Touch:wne},props:a9e(),emits:{"group:selected":t=>!0},setup(t,e){let{slots:r}=e;const n=Zt(_ne),i=cO(t,xne),{isBooted:s}=gO();if(!n||!i)throw new Error("[Vuetify] VWindowItem must be used inside VWindow");const a=Dt(!1),o=ve(()=>s.value&&(n.isReversed.value?t.reverseTransition!==!1:t.transition!==!1));function c(){!a.value||!n||(a.value=!1,n.transitionCount.value>0&&(n.transitionCount.value-=1,n.transitionCount.value===0&&(n.transitionHeight.value=void 0)))}function u(){a.value||!n||(a.value=!0,n.transitionCount.value===0&&(n.transitionHeight.value=Ht(n.rootRef.value?.clientHeight)),n.transitionCount.value+=1)}function l(){c()}function f(m){a.value&&Cn(()=>{!o.value||!a.value||!n||(n.transitionHeight.value=Ht(m.clientHeight))})}const d=ve(()=>{const m=n.isReversed.value?t.reverseTransition:t.transition;return o.value?{name:typeof m!="string"?n.transition.value:m,onBeforeEnter:u,onAfterEnter:c,onEnterCancelled:l,onBeforeLeave:u,onAfterLeave:c,onLeaveCancelled:l,onEnter:f}:!1}),{hasContent:h}=Ene(t,i.isSelected);return Gt(()=>ae(ru,{transition:d.value,disabled:!s.value},{default:()=>[us(ae("div",{class:["v-window-item",i.selectedClass.value,t.class],style:t.style},[h.value&&r.default?.()]),[[bu,i.isSelected.value]])]})),{groupItem:i}}}),Iy=Pn({__name:"tapeCours",props:{nEtapes:{},etape:{}},emits:["retour","avancer"],setup(t,{emit:e}){const r=e;return(n,i)=>(Vt(),hr(o9e,{key:n.etape,style:{height:"100%"}},{default:Ge(()=>[ae(bne,{style:{height:"100%"}},{default:Ge(()=>[n.etape>0?(Vt(),hr(Gi,{key:0,cols:12,class:"mt-6 text-center"},{default:Ge(()=>[ae(Wa,{onClick:i[0]||(i[0]=()=>r("retour")),icon:"mdi-chevron-up"})]),_:1})):Qs("",!0),PQ(n.$slots,"default"),n.etape<n.nEtapes-1?(Vt(),hr(Gi,{key:1,cols:12,class:"mt-auto text-center"},{default:Ge(()=>[ae(Wa,{onClick:i[1]||(i[1]=()=>r("avancer")),class:"pa-2",icon:"mdi-chevron-down"})]),_:1})):Qs("",!0)]),_:3})]),_:3}))}}),c9e=et({disabled:Boolean,group:Boolean,hideOnLeave:Boolean,leaveAbsolute:Boolean,mode:String,origin:String},"transition");function io(t,e,r){return _t()({name:t,props:c9e({mode:r,origin:e}),setup(n,i){let{slots:s}=i;const a={onBeforeEnter(o){n.origin&&(o.style.transformOrigin=n.origin)},onLeave(o){if(n.leaveAbsolute){const{offsetTop:c,offsetLeft:u,offsetWidth:l,offsetHeight:f}=o;o._transitionInitialStyles={position:o.style.position,top:o.style.top,left:o.style.left,width:o.style.width,height:o.style.height},o.style.position="absolute",o.style.top=`${c}px`,o.style.left=`${u}px`,o.style.width=`${l}px`,o.style.height=`${f}px`}n.hideOnLeave&&o.style.setProperty("display","none","important")},onAfterLeave(o){if(n.leaveAbsolute&&o?._transitionInitialStyles){const{position:c,top:u,left:l,width:f,height:d}=o._transitionInitialStyles;delete o._transitionInitialStyles,o.style.position=c||"",o.style.top=u||"",o.style.left=l||"",o.style.width=f||"",o.style.height=d||""}}};return()=>{const o=n.group?gR:Hf;return ps(o,{name:n.disabled?"":t,css:!n.disabled,...n.group?void 0:{mode:n.mode},...n.disabled?{}:a},s.default)}}})}function kne(t,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"in-out";return _t()({name:t,props:{mode:{type:String,default:r},disabled:Boolean,group:Boolean},setup(n,i){let{slots:s}=i;const a=n.group?gR:Hf;return()=>ps(a,{name:n.disabled?"":t,css:!n.disabled,...n.disabled?{}:e},s.default)}})}function Tne(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";const r=(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1)?"width":"height",n=Sa(`offset-${r}`);return{onBeforeEnter(a){a._parent=a.parentNode,a._initialStyle={transition:a.style.transition,overflow:a.style.overflow,[r]:a.style[r]}},onEnter(a){const o=a._initialStyle;if(!o)return;a.style.setProperty("transition","none","important"),a.style.overflow="hidden";const c=`${a[n]}px`;a.style[r]="0",a.offsetHeight,a.style.transition=o.transition,t&&a._parent&&a._parent.classList.add(t),requestAnimationFrame(()=>{a.style[r]=c})},onAfterEnter:s,onEnterCancelled:s,onLeave(a){a._initialStyle={transition:"",overflow:a.style.overflow,[r]:a.style[r]},a.style.overflow="hidden",a.style[r]=`${a[n]}px`,a.offsetHeight,requestAnimationFrame(()=>a.style[r]="0")},onAfterLeave:i,onLeaveCancelled:i};function i(a){t&&a._parent&&a._parent.classList.remove(t),s(a)}function s(a){if(!a._initialStyle)return;const o=a._initialStyle[r];a.style.overflow=a._initialStyle.overflow,o!=null&&(a.style[r]=o),delete a._initialStyle}}const l9e=et({target:[Object,Array]},"v-dialog-transition"),vO=_t()({name:"VDialogTransition",props:l9e(),setup(t,e){let{slots:r}=e;const n={onBeforeEnter(i){i.style.pointerEvents="none",i.style.visibility="hidden"},async onEnter(i,s){await new Promise(d=>requestAnimationFrame(d)),await new Promise(d=>requestAnimationFrame(d)),i.style.visibility="";const{x:a,y:o,sx:c,sy:u,speed:l}=xU(t.target,i),f=g1(i,[{transform:`translate(${a}px, ${o}px) scale(${c}, ${u})`,opacity:0},{}],{duration:225*l,easing:yye});_U(i)?.forEach(d=>{g1(d,[{opacity:0},{opacity:0,offset:.33},{}],{duration:225*2*l,easing:H3})}),f.finished.then(()=>s())},onAfterEnter(i){i.style.removeProperty("pointer-events")},onBeforeLeave(i){i.style.pointerEvents="none"},async onLeave(i,s){await new Promise(d=>requestAnimationFrame(d));const{x:a,y:o,sx:c,sy:u,speed:l}=xU(t.target,i);g1(i,[{},{transform:`translate(${a}px, ${o}px) scale(${c}, ${u})`,opacity:0}],{duration:125*l,easing:bye}).finished.then(()=>s()),_U(i)?.forEach(d=>{g1(d,[{},{opacity:0,offset:.2},{opacity:0}],{duration:125*2*l,easing:H3})})},onAfterLeave(i){i.style.removeProperty("pointer-events")}};return()=>t.target?ae(Hf,zt({name:"dialog-transition"},n,{css:!1}),r):ae(Hf,{name:"dialog-transition"},r)}});function _U(t){const e=t.querySelector(":scope > .v-card, :scope > .v-sheet, :scope > .v-list")?.children;return e&&[...e]}function xU(t,e){const r=xee(t),n=wR(e),[i,s]=getComputedStyle(e).transformOrigin.split(" ").map(v=>parseFloat(v)),[a,o]=getComputedStyle(e).getPropertyValue("--v-overlay-anchor-origin").split(" ");let c=r.left+r.width/2;a==="left"||o==="left"?c-=r.width/2:(a==="right"||o==="right")&&(c+=r.width/2);let u=r.top+r.height/2;a==="top"||o==="top"?u-=r.height/2:(a==="bottom"||o==="bottom")&&(u+=r.height/2);const l=r.width/n.width,f=r.height/n.height,d=Math.max(1,l,f),h=l/d||0,m=f/d||0,p=n.width*n.height/(window.innerWidth*window.innerHeight),g=p>.12?Math.min(1.5,(p-.12)*10+1):1;return{x:c-(i+n.left),y:u-(s+n.top),sx:h,sy:m,speed:g}}io("fab-transition","center center","out-in");io("dialog-bottom-transition");io("dialog-top-transition");const SU=io("fade-transition"),u9e=io("scale-transition");io("scroll-x-transition");io("scroll-x-reverse-transition");io("scroll-y-transition");io("scroll-y-reverse-transition");io("slide-x-transition");io("slide-x-reverse-transition");const Ane=io("slide-y-transition");io("slide-y-reverse-transition");const f9e=kne("expand-transition",Tne()),Cne=kne("expand-x-transition",Tne("",!0)),PC=Symbol.for("vuetify:list");function Ine(){const t=Zt(PC,{hasPrepend:Dt(!1),updateHasPrepend:()=>null}),e={hasPrepend:Dt(!1),updateHasPrepend:r=>{r&&(e.hasPrepend.value=r)}};return dn(PC,e),t}function Pne(){return Zt(PC,null)}const yO=t=>{const e={activate:r=>{let{id:n,value:i,activated:s}=r;return n=kt(n),t&&!i&&s.size===1&&s.has(n)||(i?s.add(n):s.delete(n)),s},in:(r,n,i)=>{let s=new Set;if(r!=null)for(const a of oc(r))s=e.activate({id:a,value:!0,activated:new Set(s),children:n,parents:i});return s},out:r=>Array.from(r)};return e},Rne=t=>{const e=yO(t);return{activate:n=>{let{activated:i,id:s,...a}=n;s=kt(s);const o=i.has(s)?new Set([s]):new Set;return e.activate({...a,id:s,activated:o})},in:(n,i,s)=>{let a=new Set;if(n!=null){const o=oc(n);o.length&&(a=e.in(o.slice(0,1),i,s))}return a},out:(n,i,s)=>e.out(n,i,s)}},d9e=t=>{const e=yO(t);return{activate:n=>{let{id:i,activated:s,children:a,...o}=n;return i=kt(i),a.has(i)?s:e.activate({id:i,activated:s,children:a,...o})},in:e.in,out:e.out}},h9e=t=>{const e=Rne(t);return{activate:n=>{let{id:i,activated:s,children:a,...o}=n;return i=kt(i),a.has(i)?s:e.activate({id:i,activated:s,children:a,...o})},in:e.in,out:e.out}},p9e={open:t=>{let{id:e,value:r,opened:n,parents:i}=t;if(r){const s=new Set;s.add(e);let a=i.get(e);for(;a!=null;)s.add(a),a=i.get(a);return s}else return n.delete(e),n},select:()=>null},One={open:t=>{let{id:e,value:r,opened:n,parents:i}=t;if(r){let s=i.get(e);for(n.add(e);s!=null&&s!==e;)n.add(s),s=i.get(s);return n}else n.delete(e);return n},select:()=>null},m9e={open:One.open,select:t=>{let{id:e,value:r,opened:n,parents:i}=t;if(!r)return n;const s=[];let a=i.get(e);for(;a!=null;)s.push(a),a=i.get(a);return new Set(s)}},bO=t=>{const e={select:r=>{let{id:n,value:i,selected:s}=r;if(n=kt(n),t&&!i){const a=Array.from(s.entries()).reduce((o,c)=>{let[u,l]=c;return l==="on"&&o.push(u),o},[]);if(a.length===1&&a[0]===n)return s}return s.set(n,i?"on":"off"),s},in:(r,n,i)=>{const s=new Map;for(const a of r||[])e.select({id:a,value:!0,selected:s,children:n,parents:i});return s},out:r=>{const n=[];for(const[i,s]of r.entries())s==="on"&&n.push(i);return n}};return e},Bne=t=>{const e=bO(t);return{select:n=>{let{selected:i,id:s,...a}=n;s=kt(s);const o=i.has(s)?new Map([[s,i.get(s)]]):new Map;return e.select({...a,id:s,selected:o})},in:(n,i,s)=>n?.length?e.in(n.slice(0,1),i,s):new Map,out:(n,i,s)=>e.out(n,i,s)}},g9e=t=>{const e=bO(t);return{select:n=>{let{id:i,selected:s,children:a,...o}=n;return i=kt(i),a.has(i)?s:e.select({id:i,selected:s,children:a,...o})},in:e.in,out:e.out}},v9e=t=>{const e=Bne(t);return{select:n=>{let{id:i,selected:s,children:a,...o}=n;return i=kt(i),a.has(i)?s:e.select({id:i,selected:s,children:a,...o})},in:e.in,out:e.out}},y9e=t=>{const e={select:r=>{let{id:n,value:i,selected:s,children:a,parents:o}=r;n=kt(n);const c=new Map(s),u=[n];for(;u.length;){const f=u.shift();s.set(kt(f),i?"on":"off"),a.has(f)&&u.push(...a.get(f))}let l=kt(o.get(n));for(;l;){const f=a.get(l),d=f.every(m=>s.get(kt(m))==="on"),h=f.every(m=>!s.has(kt(m))||s.get(kt(m))==="off");s.set(l,d?"on":h?"off":"indeterminate"),l=kt(o.get(l))}return t&&!i&&Array.from(s.entries()).reduce((d,h)=>{let[m,p]=h;return p==="on"&&d.push(m),d},[]).length===0?c:s},in:(r,n,i)=>{let s=new Map;for(const a of r||[])s=e.select({id:a,value:!0,selected:s,children:n,parents:i});return s},out:(r,n)=>{const i=[];for(const[s,a]of r.entries())a==="on"&&!n.has(s)&&i.push(s);return i}};return e},pv=Symbol.for("vuetify:nested"),Dne={id:Dt(),root:{register:()=>null,unregister:()=>null,parents:ze(new Map),children:ze(new Map),open:()=>null,openOnSelect:()=>null,activate:()=>null,select:()=>null,activatable:ze(!1),selectable:ze(!1),opened:ze(new Set),activated:ze(new Set),selected:ze(new Map),selectedValues:ze([]),getPath:()=>[]}},b9e=et({activatable:Boolean,selectable:Boolean,activeStrategy:[String,Function,Object],selectStrategy:[String,Function,Object],openStrategy:[String,Object],opened:null,activated:null,selected:null,mandatory:Boolean},"nested"),w9e=t=>{let e=!1;const r=ze(new Map),n=ze(new Map),i=si(t,"opened",t.opened,m=>new Set(m),m=>[...m.values()]),s=ve(()=>{if(typeof t.activeStrategy=="object")return t.activeStrategy;if(typeof t.activeStrategy=="function")return t.activeStrategy(t.mandatory);switch(t.activeStrategy){case"leaf":return d9e(t.mandatory);case"single-leaf":return h9e(t.mandatory);case"independent":return yO(t.mandatory);case"single-independent":default:return Rne(t.mandatory)}}),a=ve(()=>{if(typeof t.selectStrategy=="object")return t.selectStrategy;if(typeof t.selectStrategy=="function")return t.selectStrategy(t.mandatory);switch(t.selectStrategy){case"single-leaf":return v9e(t.mandatory);case"leaf":return g9e(t.mandatory);case"independent":return bO(t.mandatory);case"single-independent":return Bne(t.mandatory);case"classic":default:return y9e(t.mandatory)}}),o=ve(()=>{if(typeof t.openStrategy=="object")return t.openStrategy;switch(t.openStrategy){case"list":return m9e;case"single":return p9e;case"multiple":default:return One}}),c=si(t,"activated",t.activated,m=>s.value.in(m,r.value,n.value),m=>s.value.out(m,r.value,n.value)),u=si(t,"selected",t.selected,m=>a.value.in(m,r.value,n.value),m=>a.value.out(m,r.value,n.value));hs(()=>{e=!0});function l(m){const p=[];let g=m;for(;g!=null;)p.unshift(g),g=n.value.get(g);return p}const f=Si("nested"),d=new Set,h={id:Dt(),root:{opened:i,activatable:Nt(t,"activatable"),selectable:Nt(t,"selectable"),activated:c,selected:u,selectedValues:ve(()=>{const m=[];for(const[p,g]of u.value.entries())g==="on"&&m.push(p);return m}),register:(m,p,g)=>{if(d.has(m)){l(m).map(String).join(" -> "),l(p).concat(m).map(String).join(" -> ");return}else d.add(m);p&&m!==p&&n.value.set(m,p),g&&r.value.set(m,[]),p!=null&&r.value.set(p,[...r.value.get(p)||[],m])},unregister:m=>{if(e)return;d.delete(m),r.value.delete(m);const p=n.value.get(m);if(p){const g=r.value.get(p)??[];r.value.set(p,g.filter(v=>v!==m))}n.value.delete(m)},open:(m,p,g)=>{f.emit("click:open",{id:m,value:p,path:l(m),event:g});const v=o.value.open({id:m,value:p,opened:new Set(i.value),children:r.value,parents:n.value,event:g});v&&(i.value=v)},openOnSelect:(m,p,g)=>{const v=o.value.select({id:m,value:p,selected:new Map(u.value),opened:new Set(i.value),children:r.value,parents:n.value,event:g});v&&(i.value=v)},select:(m,p,g)=>{f.emit("click:select",{id:m,value:p,path:l(m),event:g});const v=a.value.select({id:m,value:p,selected:new Map(u.value),children:r.value,parents:n.value,event:g});v&&(u.value=v),h.root.openOnSelect(m,p,g)},activate:(m,p,g)=>{if(!t.activatable)return h.root.select(m,!0,g);f.emit("click:activate",{id:m,value:p,path:l(m),event:g});const v=s.value.activate({id:m,value:p,activated:new Set(c.value),children:r.value,parents:n.value,event:g});if(v.size!==c.value.size)c.value=v;else{for(const y of v)if(!c.value.has(y)){c.value=v;return}for(const y of c.value)if(!v.has(y)){c.value=v;return}}},children:r,parents:n,getPath:l}};return dn(pv,h),h.root},Mne=(t,e)=>{const r=Zt(pv,Dne),n=Symbol(xc()),i=ve(()=>t.value!==void 0?t.value:n),s={...r,id:i,open:(a,o)=>r.root.open(i.value,a,o),openOnSelect:(a,o)=>r.root.openOnSelect(i.value,a,o),isOpen:ve(()=>r.root.opened.value.has(i.value)),parent:ve(()=>r.root.parents.value.get(i.value)),activate:(a,o)=>r.root.activate(i.value,a,o),isActivated:ve(()=>r.root.activated.value.has(kt(i.value))),select:(a,o)=>r.root.select(i.value,a,o),isSelected:ve(()=>r.root.selected.value.get(kt(i.value))==="on"),isIndeterminate:ve(()=>r.root.selected.value.get(kt(i.value))==="indeterminate"),isLeaf:ve(()=>!r.root.children.value.get(i.value)),isGroupActivator:r.isGroupActivator};return fy(()=>{!r.isGroupActivator&&r.root.register(i.value,r.id.value,e)}),hs(()=>{!r.isGroupActivator&&r.root.unregister(i.value)}),e&&dn(pv,s),s},_9e=()=>{const t=Zt(pv,Dne);dn(pv,{...t,isGroupActivator:!0})},x9e=Fp({name:"VListGroupActivator",setup(t,e){let{slots:r}=e;return _9e(),()=>r.default?.()}}),S9e=et({activeColor:String,baseColor:String,color:String,collapseIcon:{type:$r,default:"$collapse"},expandIcon:{type:$r,default:"$expand"},prependIcon:$r,appendIcon:$r,fluid:Boolean,subgroup:Boolean,title:String,value:null,...Qt(),...ri()},"VListGroup"),EU=_t()({name:"VListGroup",props:S9e(),setup(t,e){let{slots:r}=e;const{isOpen:n,open:i,id:s}=Mne(Nt(t,"value"),!0),a=ve(()=>`v-list-group--id-${String(s.value)}`),o=Pne(),{isBooted:c}=gO();function u(h){h.stopPropagation(),i(!n.value,h)}const l=ve(()=>({onClick:u,class:"v-list-group__header",id:a.value})),f=ve(()=>n.value?t.collapseIcon:t.expandIcon),d=ve(()=>({VListItem:{active:n.value,activeColor:t.activeColor,baseColor:t.baseColor,color:t.color,prependIcon:t.prependIcon||t.subgroup&&f.value,appendIcon:t.appendIcon||!t.subgroup&&f.value,title:t.title,value:t.value}}));return Gt(()=>ae(t.tag,{class:["v-list-group",{"v-list-group--prepend":o?.hasPrepend.value,"v-list-group--fluid":t.fluid,"v-list-group--subgroup":t.subgroup,"v-list-group--open":n.value},t.class],style:t.style},{default:()=>[r.activator&&ae(Di,{defaults:d.value},{default:()=>[ae(x9e,null,{default:()=>[r.activator({props:l.value,isOpen:n.value})]})]}),ae(ru,{transition:{component:f9e},disabled:!c.value},{default:()=>[us(ae("div",{class:"v-list-group__items",role:"group","aria-labelledby":a.value},[r.default?.()]),[[bu,n.value]])]})]})),{isOpen:n}}}),E9e=et({opacity:[Number,String],...Qt(),...ri()},"VListItemSubtitle"),k9e=_t()({name:"VListItemSubtitle",props:E9e(),setup(t,e){let{slots:r}=e;return Gt(()=>ae(t.tag,{class:["v-list-item-subtitle",t.class],style:[{"--v-list-item-subtitle-opacity":t.opacity},t.style]},r)),{}}}),T9e=SR("v-list-item-title");function A9e(t){return{aspectStyles:ve(()=>{const e=Number(t.aspectRatio);return e?{paddingBottom:String(1/e*100)+"%"}:void 0})}}const Nne=et({aspectRatio:[String,Number],contentClass:null,inline:Boolean,...Qt(),...wl()},"VResponsive"),kU=_t()({name:"VResponsive",props:Nne(),setup(t,e){let{slots:r}=e;const{aspectStyles:n}=A9e(t),{dimensionStyles:i}=_l(t);return Gt(()=>ae("div",{class:["v-responsive",{"v-responsive--inline":t.inline},t.class],style:[i.value,t.style]},[ae("div",{class:"v-responsive__sizer",style:n.value},null),r.additional?.(),r.default&&ae("div",{class:["v-responsive__content",t.contentClass]},[r.default()])])),{}}});function C9e(t,e){if(!vR)return;const r=e.modifiers||{},n=e.value,{handler:i,options:s}=typeof n=="object"?n:{handler:n,options:{}},a=new IntersectionObserver(function(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],c=arguments.length>1?arguments[1]:void 0;const u=t._observe?.[e.instance.$.uid];if(!u)return;const l=o.some(f=>f.isIntersecting);i&&(!r.quiet||u.init)&&(!r.once||l||u.init)&&i(l,o,c),l&&r.once?Fne(t,e):u.init=!0},s);t._observe=Object(t._observe),t._observe[e.instance.$.uid]={init:!1,observer:a},a.observe(t)}function Fne(t,e){const r=t._observe?.[e.instance.$.uid];r&&(r.observer.unobserve(t),delete t._observe[e.instance.$.uid])}const Lne={mounted:C9e,unmounted:Fne},I9e=et({absolute:Boolean,alt:String,cover:Boolean,color:String,draggable:{type:[Boolean,String],default:void 0},eager:Boolean,gradient:String,lazySrc:String,options:{type:Object,default:()=>({root:void 0,rootMargin:void 0,threshold:void 0})},sizes:String,src:{type:[String,Object],default:""},crossorigin:String,referrerpolicy:String,srcset:String,position:String,...Nne(),...Qt(),...Sc(),...Cy()},"VImg"),Q1=_t()({name:"VImg",directives:{intersect:Lne},props:I9e(),emits:{loadstart:t=>!0,load:t=>!0,error:t=>!0},setup(t,e){let{emit:r,slots:n}=e;const{backgroundColorClasses:i,backgroundColorStyles:s}=fu(Nt(t,"color")),{roundedClasses:a}=Ec(t),o=Si("VImg"),c=Dt(""),u=ze(),l=Dt(t.eager?"loading":"idle"),f=Dt(),d=Dt(),h=ve(()=>t.src&&typeof t.src=="object"?{src:t.src.src,srcset:t.srcset||t.src.srcset,lazySrc:t.lazySrc||t.src.lazySrc,aspect:Number(t.aspectRatio||t.src.aspect||0)}:{src:t.src,srcset:t.srcset,lazySrc:t.lazySrc,aspect:Number(t.aspectRatio||0)}),m=ve(()=>h.value.aspect||f.value/d.value||0);Ft(()=>t.src,()=>{p(l.value!=="idle")}),Ft(m,(S,T)=>{!S&&T&&u.value&&_(u.value)}),fy(()=>p());function p(S){if(!(t.eager&&S)&&!(vR&&!S&&!t.eager)){if(l.value="loading",h.value.lazySrc){const T=new Image;T.src=h.value.lazySrc,_(T,null)}h.value.src&&Cn(()=>{r("loadstart",u.value?.currentSrc||h.value.src),setTimeout(()=>{if(!o.isUnmounted)if(u.value?.complete){if(u.value.naturalWidth||v(),l.value==="error")return;m.value||_(u.value,null),l.value==="loading"&&g()}else m.value||_(u.value),y()})})}}function g(){o.isUnmounted||(y(),_(u.value),l.value="loaded",r("load",u.value?.currentSrc||h.value.src))}function v(){o.isUnmounted||(l.value="error",r("error",u.value?.currentSrc||h.value.src))}function y(){const S=u.value;S&&(c.value=S.currentSrc||S.src)}let b=-1;hs(()=>{clearTimeout(b)});function _(S){let T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:100;const w=()=>{if(clearTimeout(b),o.isUnmounted)return;const{naturalHeight:A,naturalWidth:F}=S;A||F?(f.value=F,d.value=A):!S.complete&&l.value==="loading"&&T!=null?b=window.setTimeout(w,T):(S.currentSrc.endsWith(".svg")||S.currentSrc.startsWith("data:image/svg+xml"))&&(f.value=1,d.value=1)};w()}const x=ve(()=>({"v-img__img--cover":t.cover,"v-img__img--contain":!t.cover})),E=()=>{if(!h.value.src||l.value==="idle")return null;const S=ae("img",{class:["v-img__img",x.value],style:{objectPosition:t.position},crossorigin:t.crossorigin,src:h.value.src,srcset:h.value.srcset,alt:t.alt,referrerpolicy:t.referrerpolicy,draggable:t.draggable,sizes:t.sizes,ref:u,onLoad:g,onError:v},null),T=n.sources?.();return ae(ru,{transition:t.transition,appear:!0},{default:()=>[us(T?ae("picture",{class:"v-img__picture"},[T,S]):S,[[bu,l.value==="loaded"]])]})},k=()=>ae(ru,{transition:t.transition},{default:()=>[h.value.lazySrc&&l.value!=="loaded"&&ae("img",{class:["v-img__img","v-img__img--preload",x.value],style:{objectPosition:t.position},crossorigin:t.crossorigin,src:h.value.lazySrc,alt:t.alt,referrerpolicy:t.referrerpolicy,draggable:t.draggable},null)]}),B=()=>n.placeholder?ae(ru,{transition:t.transition,appear:!0},{default:()=>[(l.value==="loading"||l.value==="error"&&!n.error)&&ae("div",{class:"v-img__placeholder"},[n.placeholder()])]}):null,D=()=>n.error?ae(ru,{transition:t.transition,appear:!0},{default:()=>[l.value==="error"&&ae("div",{class:"v-img__error"},[n.error()])]}):null,z=()=>t.gradient?ae("div",{class:"v-img__gradient",style:{backgroundImage:`linear-gradient(${t.gradient})`}},null):null,U=Dt(!1);{const S=Ft(m,T=>{T&&(requestAnimationFrame(()=>{requestAnimationFrame(()=>{U.value=!0})}),S())})}return Gt(()=>{const S=kU.filterProps(t);return us(ae(kU,zt({class:["v-img",{"v-img--absolute":t.absolute,"v-img--booting":!U.value},i.value,a.value,t.class],style:[{width:Ht(t.width==="auto"?f.value:t.width)},s.value,t.style]},S,{aspectRatio:m.value,"aria-label":t.alt,role:t.alt?"img":void 0}),{additional:()=>ae(ar,null,[ae(E,null,null),ae(k,null,null),ae(z,null,null),ae(B,null,null),ae(D,null,null)]),default:n.default}),[[ud("intersect"),{handler:p,options:t.options},null,{once:!0}]])}),{currentSrc:c,image:u,state:l,naturalWidth:f,naturalHeight:d}}}),P9e=et({start:Boolean,end:Boolean,icon:$r,image:String,text:String,...hd(),...Qt(),...bl(),...Sc(),...ky(),...ri(),...Ei(),...md({variant:"flat"})},"VAvatar"),Oh=_t()({name:"VAvatar",props:P9e(),setup(t,e){let{slots:r}=e;const{themeClasses:n}=Yi(t),{borderClasses:i}=pd(t),{colorClasses:s,colorStyles:a,variantClasses:o}=Ey(t),{densityClasses:c}=Lu(t),{roundedClasses:u}=Ec(t),{sizeClasses:l,sizeStyles:f}=Ty(t);return Gt(()=>ae(t.tag,{class:["v-avatar",{"v-avatar--start":t.start,"v-avatar--end":t.end},n.value,i.value,s.value,c.value,u.value,l.value,o.value,t.class],style:[a.value,f.value,t.style]},{default:()=>[r.default?ae(Di,{key:"content-defaults",defaults:{VImg:{cover:!0,src:t.image},VIcon:{icon:t.icon}}},{default:()=>[r.default()]}):t.image?ae(Q1,{key:"image",src:t.image,alt:"",cover:!0},null):t.icon?ae(Hr,{key:"icon",icon:t.icon},null):t.text,Sy(!1,"v-avatar")]})),{}}}),R9e=et({active:{type:Boolean,default:void 0},activeClass:String,activeColor:String,appendAvatar:String,appendIcon:$r,baseColor:String,disabled:Boolean,lines:[Boolean,String],link:{type:Boolean,default:void 0},nav:Boolean,prependAvatar:String,prependIcon:$r,ripple:{type:[Boolean,Object],default:!0},slim:Boolean,subtitle:{type:[String,Number,Boolean],default:void 0},title:{type:[String,Number,Boolean],default:void 0},value:null,onClick:ba(),onClickOnce:ba(),...hd(),...Qt(),...bl(),...wl(),...h0(),...Sc(),...L8(),...ri(),...Ei(),...md({variant:"text"})},"VListItem"),Ys=_t()({name:"VListItem",directives:{Ripple:Ay},props:R9e(),emits:{click:t=>!0},setup(t,e){let{attrs:r,slots:n,emit:i}=e;const s=F8(t,r),a=ve(()=>t.value===void 0?s.href.value:t.value),{activate:o,isActivated:c,select:u,isOpen:l,isSelected:f,isIndeterminate:d,isGroupActivator:h,root:m,parent:p,openOnSelect:g,id:v}=Mne(a,!1),y=Pne(),b=ve(()=>t.active!==!1&&(t.active||s.isActive?.value||(m.activatable.value?c.value:f.value))),_=ve(()=>t.link!==!1&&s.isLink.value),x=ve(()=>!!y&&(m.selectable.value||m.activatable.value||t.value!=null)),E=ve(()=>!t.disabled&&t.link!==!1&&(t.link||s.isClickable.value||x.value)),k=ve(()=>t.rounded||t.nav),B=ve(()=>t.color??t.activeColor),D=ve(()=>({color:b.value?B.value??t.baseColor:t.baseColor,variant:t.variant}));Ft(()=>s.isActive?.value,N=>{N&&z()}),fy(()=>{s.isActive?.value&&z()});function z(){p.value!=null&&m.open(p.value,!0),g(!0)}const{themeClasses:U}=Yi(t),{borderClasses:S}=pd(t),{colorClasses:T,colorStyles:w,variantClasses:A}=Ey(D),{densityClasses:F}=Lu(t),{dimensionStyles:P}=_l(t),{elevationClasses:O}=p0(t),{roundedClasses:R}=Ec(k),I=ve(()=>t.lines?`v-list-item--${t.lines}-line`:void 0),C=ve(()=>({isActive:b.value,select:u,isOpen:l.value,isSelected:f.value,isIndeterminate:d.value}));function M(N){i("click",N),E.value&&(s.navigate?.(N),!h&&(m.activatable.value?o(!c.value,N):(m.selectable.value||t.value!=null)&&u(!f.value,N)))}function L(N){const H=N.target;["INPUT","TEXTAREA"].includes(H.tagName)||(N.key==="Enter"||N.key===" ")&&(N.preventDefault(),N.target.dispatchEvent(new MouseEvent("click",N)))}return Gt(()=>{const N=_.value?"a":t.tag,H=n.title||t.title!=null,W=n.subtitle||t.subtitle!=null,q=!!(t.appendAvatar||t.appendIcon),G=!!(q||n.append),Y=!!(t.prependAvatar||t.prependIcon),te=!!(Y||n.prepend);return y?.updateHasPrepend(te),t.activeColor&&Qve("active-color",["color","base-color"]),us(ae(N,zt({class:["v-list-item",{"v-list-item--active":b.value,"v-list-item--disabled":t.disabled,"v-list-item--link":E.value,"v-list-item--nav":t.nav,"v-list-item--prepend":!te&&y?.hasPrepend.value,"v-list-item--slim":t.slim,[`${t.activeClass}`]:t.activeClass&&b.value},U.value,S.value,T.value,F.value,O.value,I.value,R.value,A.value,t.class],style:[w.value,P.value,t.style],tabindex:E.value?y?-2:0:void 0,"aria-selected":x.value?m.activatable.value?c.value:m.selectable.value?f.value:b.value:void 0,onClick:M,onKeydown:E.value&&!_.value&&L},s.linkProps),{default:()=>[Sy(E.value||b.value,"v-list-item"),te&&ae("div",{key:"prepend",class:"v-list-item__prepend"},[n.prepend?ae(Di,{key:"prepend-defaults",disabled:!Y,defaults:{VAvatar:{density:t.density,image:t.prependAvatar},VIcon:{density:t.density,icon:t.prependIcon},VListItemAction:{start:!0}}},{default:()=>[n.prepend?.(C.value)]}):ae(ar,null,[t.prependAvatar&&ae(Oh,{key:"prepend-avatar",density:t.density,image:t.prependAvatar},null),t.prependIcon&&ae(Hr,{key:"prepend-icon",density:t.density,icon:t.prependIcon},null)]),ae("div",{class:"v-list-item__spacer"},null)]),ae("div",{class:"v-list-item__content","data-no-activator":""},[H&&ae(T9e,{key:"title"},{default:()=>[n.title?.({title:t.title})??Rr(t.title)]}),W&&ae(k9e,{key:"subtitle"},{default:()=>[n.subtitle?.({subtitle:t.subtitle})??Rr(t.subtitle)]}),n.default?.(C.value)]),G&&ae("div",{key:"append",class:"v-list-item__append"},[n.append?ae(Di,{key:"append-defaults",disabled:!q,defaults:{VAvatar:{density:t.density,image:t.appendAvatar},VIcon:{density:t.density,icon:t.appendIcon},VListItemAction:{end:!0}}},{default:()=>[n.append?.(C.value)]}):ae(ar,null,[t.appendIcon&&ae(Hr,{key:"append-icon",density:t.density,icon:t.appendIcon},null),t.appendAvatar&&ae(Oh,{key:"append-avatar",density:t.density,image:t.appendAvatar},null)]),ae("div",{class:"v-list-item__spacer"},null)])]}),[[ud("ripple"),E.value&&t.ripple]])}),{activate:o,isActivated:c,isGroupActivator:h,isSelected:f,list:y,select:u,root:m,id:v,link:s}}}),O9e=et({color:String,inset:Boolean,sticky:Boolean,title:String,...Qt(),...ri()},"VListSubheader"),ng=_t()({name:"VListSubheader",props:O9e(),setup(t,e){let{slots:r}=e;const{textColorClasses:n,textColorStyles:i}=Eu(Nt(t,"color"));return Gt(()=>{const s=!!(r.default||t.title);return ae(t.tag,{class:["v-list-subheader",{"v-list-subheader--inset":t.inset,"v-list-subheader--sticky":t.sticky},n.value,t.class],style:[{textColorStyles:i},t.style]},{default:()=>[s&&ae("div",{class:"v-list-subheader__text"},[r.default?.()??t.title])]})}),{}}}),B9e=et({color:String,inset:Boolean,length:[Number,String],opacity:[Number,String],thickness:[Number,String],vertical:Boolean,...Qt(),...Ei()},"VDivider"),$ne=_t()({name:"VDivider",props:B9e(),setup(t,e){let{attrs:r,slots:n}=e;const{themeClasses:i}=Yi(t),{textColorClasses:s,textColorStyles:a}=Eu(Nt(t,"color")),o=ve(()=>{const c={};return t.length&&(c[t.vertical?"height":"width"]=Ht(t.length)),t.thickness&&(c[t.vertical?"borderRightWidth":"borderTopWidth"]=Ht(t.thickness)),c});return Gt(()=>{const c=ae("hr",{class:[{"v-divider":!0,"v-divider--inset":t.inset,"v-divider--vertical":t.vertical},i.value,s.value,t.class],style:[o.value,a.value,{"--v-border-opacity":t.opacity},t.style],"aria-orientation":!r.role||r.role==="separator"?t.vertical?"vertical":"horizontal":void 0,role:`${r.role||"separator"}`},null);return n.default?ae("div",{class:["v-divider__wrapper",{"v-divider__wrapper--vertical":t.vertical,"v-divider__wrapper--inset":t.inset}]},[c,ae("div",{class:"v-divider__content"},[n.default()]),c]):c}),{}}}),D9e=et({items:Array,returnObject:Boolean},"VListChildren"),Une=_t()({name:"VListChildren",props:D9e(),setup(t,e){let{slots:r}=e;return Ine(),()=>r.default?.()??t.items?.map(n=>{let{children:i,props:s,type:a,raw:o}=n;if(a==="divider")return r.divider?.({props:s})??ae($ne,s,null);if(a==="subheader")return r.subheader?.({props:s})??ae(ng,s,null);const c={subtitle:r.subtitle?l=>r.subtitle?.({...l,item:o}):void 0,prepend:r.prepend?l=>r.prepend?.({...l,item:o}):void 0,append:r.append?l=>r.append?.({...l,item:o}):void 0,title:r.title?l=>r.title?.({...l,item:o}):void 0},u=EU.filterProps(s);return i?ae(EU,zt({value:s?.value},u),{activator:l=>{let{props:f}=l;const d={...s,...f,value:t.returnObject?o:s.value};return r.header?r.header({props:d}):ae(Ys,d,c)},default:()=>ae(Une,{items:i,returnObject:t.returnObject},r)}):r.item?r.item({props:s}):ae(Ys,zt(s,{value:t.returnObject?o:s.value}),c)})}}),jne=et({items:{type:Array,default:()=>[]},itemTitle:{type:[String,Array,Function],default:"title"},itemValue:{type:[String,Array,Function],default:"value"},itemChildren:{type:[Boolean,String,Array,Function],default:"children"},itemProps:{type:[Boolean,String,Array,Function],default:"props"},returnObject:Boolean,valueComparator:Function},"list-items");function RC(t,e){const r=Yl(e,t.itemTitle,e),n=Yl(e,t.itemValue,r),i=Yl(e,t.itemChildren),s=t.itemProps===!0?typeof e=="object"&&e!=null&&!Array.isArray(e)?"children"in e?Mp(e,["children"]):e:void 0:Yl(e,t.itemProps),a={title:r,value:n,...s};return{title:String(a.title??""),value:a.value,props:a,children:Array.isArray(i)?Vne(t,i):void 0,raw:e}}function Vne(t,e){const r=l8(t,["itemTitle","itemValue","itemChildren","itemProps","returnObject","valueComparator"]),n=[];for(const i of e)n.push(RC(r,i));return n}function M9e(t){const e=ve(()=>Vne(t,t.items)),r=ve(()=>e.value.some(o=>o.value===null)),n=Dt(new Map),i=Dt([]);$i(()=>{const o=e.value,c=new Map,u=[];for(let l=0;l<o.length;l++){const f=o[l];if(wee(f.value)||f.value===null){let d=c.get(f.value);d||(d=[],c.set(f.value,d)),d.push(f)}else u.push(f)}n.value=c,i.value=u});function s(o){const c=n.value,u=e.value,l=i.value,f=r.value,d=t.returnObject,h=!!t.valueComparator,m=t.valueComparator||cu,p=l8(t,["itemTitle","itemValue","itemChildren","itemProps","returnObject","valueComparator"]),g=[];e:for(const v of o){if(!f&&v===null)continue;if(d&&typeof v=="string"){g.push(RC(p,v));continue}const y=c.get(v);if(h||!y){for(const b of h?u:l)if(m(v,b.value)){g.push(b);continue e}g.push(RC(p,v));continue}g.push(...y)}return g}function a(o){return t.returnObject?o.map(c=>{let{raw:u}=c;return u}):o.map(c=>{let{value:u}=c;return u})}return{items:e,transformIn:s,transformOut:a}}function N9e(t,e){const r=Yl(e,t.itemType,"item"),n=wee(e)?e:Yl(e,t.itemTitle),i=Yl(e,t.itemValue,void 0),s=Yl(e,t.itemChildren),a=t.itemProps===!0?Mp(e,["children"]):Yl(e,t.itemProps),o={title:n,value:i,...a};return{type:r,title:o.title,value:o.value,props:o,children:r==="item"&&s?qne(t,s):void 0,raw:e}}function qne(t,e){const r=[];for(const n of e)r.push(N9e(t,n));return r}function F9e(t){return{items:ve(()=>qne(t,t.items))}}const L9e=et({baseColor:String,activeColor:String,activeClass:String,bgColor:String,disabled:Boolean,expandIcon:$r,collapseIcon:$r,lines:{type:[Boolean,String],default:"one"},slim:Boolean,nav:Boolean,"onClick:open":ba(),"onClick:select":ba(),"onUpdate:opened":ba(),...b9e({selectStrategy:"single-leaf",openStrategy:"list"}),...hd(),...Qt(),...bl(),...wl(),...h0(),itemType:{type:String,default:"type"},...jne(),...Sc(),...ri(),...Ei(),...md({variant:"text"})},"VList"),ep=_t()({name:"VList",props:L9e(),emits:{"update:selected":t=>!0,"update:activated":t=>!0,"update:opened":t=>!0,"click:open":t=>!0,"click:activate":t=>!0,"click:select":t=>!0},setup(t,e){let{slots:r}=e;const{items:n}=F9e(t),{themeClasses:i}=Yi(t),{backgroundColorClasses:s,backgroundColorStyles:a}=fu(Nt(t,"bgColor")),{borderClasses:o}=pd(t),{densityClasses:c}=Lu(t),{dimensionStyles:u}=_l(t),{elevationClasses:l}=p0(t),{roundedClasses:f}=Ec(t),{children:d,open:h,parents:m,select:p,getPath:g}=w9e(t),v=ve(()=>t.lines?`v-list--${t.lines}-line`:void 0),y=Nt(t,"activeColor"),b=Nt(t,"baseColor"),_=Nt(t,"color");Ine(),Np({VListGroup:{activeColor:y,baseColor:b,color:_,expandIcon:Nt(t,"expandIcon"),collapseIcon:Nt(t,"collapseIcon")},VListItem:{activeClass:Nt(t,"activeClass"),activeColor:y,baseColor:b,color:_,density:Nt(t,"density"),disabled:Nt(t,"disabled"),lines:Nt(t,"lines"),nav:Nt(t,"nav"),slim:Nt(t,"slim"),variant:Nt(t,"variant")}});const x=Dt(!1),E=ze();function k(T){x.value=!0}function B(T){x.value=!1}function D(T){!x.value&&!(T.relatedTarget&&E.value?.contains(T.relatedTarget))&&S()}function z(T){const w=T.target;if(!(!E.value||["INPUT","TEXTAREA"].includes(w.tagName))){if(T.key==="ArrowDown")S("next");else if(T.key==="ArrowUp")S("prev");else if(T.key==="Home")S("first");else if(T.key==="End")S("last");else return;T.preventDefault()}}function U(T){x.value=!0}function S(T){if(E.value)return Eg(E.value,T)}return Gt(()=>ae(t.tag,{ref:E,class:["v-list",{"v-list--disabled":t.disabled,"v-list--nav":t.nav,"v-list--slim":t.slim},i.value,s.value,o.value,c.value,l.value,v.value,f.value,t.class],style:[a.value,u.value,t.style],tabindex:t.disabled?-1:0,role:"listbox","aria-activedescendant":void 0,onFocusin:k,onFocusout:B,onFocus:D,onKeydown:z,onMousedown:U},{default:()=>[ae(Une,{items:n.value,returnObject:t.returnObject},r)]})),{open:h,select:p,focus:S,children:d,parents:m,getPath:g}}}),$9e=Pn({__name:"ItemLangueProgrs",props:{code:{},selectionnee:{type:Boolean}},setup(t){const e=t,{__:r,__:n}=Fu(),{_:i}=r({}),{_:s}=n({:e.code,:""}),a=ve(()=>(s.value?.||0)/(s.value?.||0)),o=i(e.code);return(c,u)=>(Vt(),hr(Ys,null,{prepend:Ge(()=>[c.selectionnee?(Vt(),hr(Hr,{key:0,color:"primary"},{default:Ge(()=>u[0]||(u[0]=[zr(" mdi-check-bold ")])),_:1})):Qs("",!0)]),title:Ge(()=>[zr(Rr(Ve(o)||c.code),1)]),append:Ge(()=>[a.value===1?(Vt(),hr(Hr,{key:0,color:"primary"},{default:Ge(()=>u[1]||(u[1]=[zr(" mdi-check-circle ")])),_:1})):(Vt(),hr(lO,{key:1,"model-value":a.value*100,size:"20",color:"primary"},null,8,["model-value"]))]),_:1}))}});function W7(t,e){return{x:t.x+e.x,y:t.y+e.y}}function U9e(t,e){return{x:t.x-e.x,y:t.y-e.y}}function TU(t,e){if(t.side==="top"||t.side==="bottom"){const{side:r,align:n}=t,i=n==="left"?0:n==="center"?e.width/2:n==="right"?e.width:n,s=r==="top"?0:r==="bottom"?e.height:r;return W7({x:i,y:s},e)}else if(t.side==="left"||t.side==="right"){const{side:r,align:n}=t,i=r==="left"?0:r==="right"?e.width:r,s=n==="top"?0:n==="center"?e.height/2:n==="bottom"?e.height:n;return W7({x:i,y:s},e)}return W7({x:e.width/2,y:e.height/2},e)}const zne={static:q9e,connected:H9e},j9e=et({locationStrategy:{type:[String,Function],default:"static",validator:t=>typeof t=="function"||t in zne},location:{type:String,default:"bottom"},origin:{type:String,default:"auto"},offset:[Number,String,Array]},"VOverlay-location-strategies");function V9e(t,e){const r=ze({}),n=ze();Lr&&Ih(()=>!!(e.isActive.value&&t.locationStrategy),s=>{Ft(()=>t.locationStrategy,s),ka(()=>{window.removeEventListener("resize",i),n.value=void 0}),window.addEventListener("resize",i,{passive:!0}),typeof t.locationStrategy=="function"?n.value=t.locationStrategy(e,t,r)?.updateLocation:n.value=zne[t.locationStrategy](e,t,r)?.updateLocation});function i(s){n.value?.(s)}return{contentStyles:r,updateLocation:n}}function q9e(){}function z9e(t,e){const r=wR(t);return e?r.x+=parseFloat(t.style.right||0):r.x-=parseFloat(t.style.left||0),r.y-=parseFloat(t.style.top||0),r}function H9e(t,e,r){(Array.isArray(t.target.value)||_ye(t.target.value))&&Object.assign(r.value,{position:"fixed",top:0,[t.isRtl.value?"right":"left"]:0});const{preferredAnchor:i,preferredOrigin:s}=bR(()=>{const m=WA(e.location,t.isRtl.value),p=e.origin==="overlap"?m:e.origin==="auto"?z_(m):WA(e.origin,t.isRtl.value);return m.side===p.side&&m.align===H_(p).align?{preferredAnchor:ZN(m),preferredOrigin:ZN(p)}:{preferredAnchor:m,preferredOrigin:p}}),[a,o,c,u]=["minWidth","minHeight","maxWidth","maxHeight"].map(m=>ve(()=>{const p=parseFloat(e[m]);return isNaN(p)?1/0:p})),l=ve(()=>{if(Array.isArray(e.offset))return e.offset;if(typeof e.offset=="string"){const m=e.offset.split(" ").map(parseFloat);return m.length<2&&m.push(0),m}return typeof e.offset=="number"?[e.offset,0]:[0,0]});let f=!1;const d=new ResizeObserver(()=>{f&&h()});Ft([t.target,t.contentEl],(m,p)=>{let[g,v]=m,[y,b]=p;y&&!Array.isArray(y)&&d.unobserve(y),g&&!Array.isArray(g)&&d.observe(g),b&&d.unobserve(b),v&&d.observe(v)},{immediate:!0}),ka(()=>{d.disconnect()});function h(){if(f=!1,requestAnimationFrame(()=>f=!0),!t.target.value||!t.contentEl.value)return;const m=xee(t.target.value),p=z9e(t.contentEl.value,t.isRtl.value),g=W3(t.contentEl.value),v=12;g.length||(g.push(document.documentElement),t.contentEl.value.style.top&&t.contentEl.value.style.left||(p.x-=parseFloat(document.documentElement.style.getPropertyValue("--v-body-scroll-x")||0),p.y-=parseFloat(document.documentElement.style.getPropertyValue("--v-body-scroll-y")||0)));const y=g.reduce((U,S)=>{const T=S.getBoundingClientRect(),w=new lh({x:S===document.documentElement?0:T.x,y:S===document.documentElement?0:T.y,width:S.clientWidth,height:S.clientHeight});return U?new lh({x:Math.max(U.left,w.left),y:Math.max(U.top,w.top),width:Math.min(U.right,w.right)-Math.max(U.left,w.left),height:Math.min(U.bottom,w.bottom)-Math.max(U.top,w.top)}):w},void 0);y.x+=v,y.y+=v,y.width-=v*2,y.height-=v*2;let b={anchor:i.value,origin:s.value};function _(U){const S=new lh(p),T=TU(U.anchor,m),w=TU(U.origin,S);let{x:A,y:F}=U9e(T,w);switch(U.anchor.side){case"top":F-=l.value[0];break;case"bottom":F+=l.value[0];break;case"left":A-=l.value[0];break;case"right":A+=l.value[0];break}switch(U.anchor.align){case"top":F-=l.value[1];break;case"bottom":F+=l.value[1];break;case"left":A-=l.value[1];break;case"right":A+=l.value[1];break}return S.x+=A,S.y+=F,S.width=Math.min(S.width,c.value),S.height=Math.min(S.height,u.value),{overflows:QN(S,y),x:A,y:F}}let x=0,E=0;const k={x:0,y:0},B={x:!1,y:!1};let D=-1;for(;!(D++>10);){const{x:U,y:S,overflows:T}=_(b);x+=U,E+=S,p.x+=U,p.y+=S;{const w=JN(b.anchor),A=T.x.before||T.x.after,F=T.y.before||T.y.after;let P=!1;if(["x","y"].forEach(O=>{if(O==="x"&&A&&!B.x||O==="y"&&F&&!B.y){const R={anchor:{...b.anchor},origin:{...b.origin}},I=O==="x"?w==="y"?H_:z_:w==="y"?z_:H_;R.anchor=I(R.anchor),R.origin=I(R.origin);const{overflows:C}=_(R);(C[O].before<=T[O].before&&C[O].after<=T[O].after||C[O].before+C[O].after<(T[O].before+T[O].after)/2)&&(b=R,P=B[O]=!0)}}),P)continue}T.x.before&&(x+=T.x.before,p.x+=T.x.before),T.x.after&&(x-=T.x.after,p.x-=T.x.after),T.y.before&&(E+=T.y.before,p.y+=T.y.before),T.y.after&&(E-=T.y.after,p.y-=T.y.after);{const w=QN(p,y);k.x=y.width-w.x.before-w.x.after,k.y=y.height-w.y.before-w.y.after,x+=w.x.before,p.x+=w.x.before,E+=w.y.before,p.y+=w.y.before}break}const z=JN(b.anchor);return Object.assign(r.value,{"--v-overlay-anchor-origin":`${b.anchor.side} ${b.anchor.align}`,transformOrigin:`${b.origin.side} ${b.origin.align}`,top:Ht(G7(E)),left:t.isRtl.value?void 0:Ht(G7(x)),right:t.isRtl.value?Ht(G7(-x)):void 0,minWidth:Ht(z==="y"?Math.min(a.value,m.width):a.value),maxWidth:Ht(AU(lu(k.x,a.value===1/0?0:a.value,c.value))),maxHeight:Ht(AU(lu(k.y,o.value===1/0?0:o.value,u.value)))}),{available:k,contentBox:p}}return Ft(()=>[i.value,s.value,e.offset,e.minWidth,e.minHeight,e.maxWidth,e.maxHeight],()=>h()),Cn(()=>{const m=h();if(!m)return;const{available:p,contentBox:g}=m;g.height>p.y&&requestAnimationFrame(()=>{h(),requestAnimationFrame(()=>{h()})})}),{updateLocation:h}}function G7(t){return Math.round(t*devicePixelRatio)/devicePixelRatio}function AU(t){return Math.ceil(t*devicePixelRatio)/devicePixelRatio}let OC=!0;const c4=[];function W9e(t){!OC||c4.length?(c4.push(t),BC()):(OC=!1,t(),BC())}let CU=-1;function BC(){cancelAnimationFrame(CU),CU=requestAnimationFrame(()=>{const t=c4.shift();t&&t(),c4.length?BC():OC=!0})}const Hne={none:null,close:X9e,block:Y9e,reposition:Z9e},G9e=et({scrollStrategy:{type:[String,Function],default:"block",validator:t=>typeof t=="function"||t in Hne}},"VOverlay-scroll-strategies");function K9e(t,e){if(!Lr)return;let r;$i(async()=>{r?.stop(),e.isActive.value&&t.scrollStrategy&&(r=ZP(),await new Promise(n=>setTimeout(n)),r.active&&r.run(()=>{typeof t.scrollStrategy=="function"?t.scrollStrategy(e,t,r):Hne[t.scrollStrategy]?.(e,t,r)}))}),ka(()=>{r?.stop()})}function X9e(t){function e(r){t.isActive.value=!1}Wne(t.targetEl.value??t.contentEl.value,e)}function Y9e(t,e){const r=t.root.value?.offsetParent,n=[...new Set([...W3(t.targetEl.value,e.contained?r:void 0),...W3(t.contentEl.value,e.contained?r:void 0)])].filter(a=>!a.classList.contains("v-overlay-scroll-blocked")),i=window.innerWidth-document.documentElement.offsetWidth,s=(a=>ER(a)&&a)(r||document.documentElement);s&&t.root.value.classList.add("v-overlay--scroll-blocked"),n.forEach((a,o)=>{a.style.setProperty("--v-body-scroll-x",Ht(-a.scrollLeft)),a.style.setProperty("--v-body-scroll-y",Ht(-a.scrollTop)),a!==document.documentElement&&a.style.setProperty("--v-scrollbar-offset",Ht(i)),a.classList.add("v-overlay-scroll-blocked")}),ka(()=>{n.forEach((a,o)=>{const c=parseFloat(a.style.getPropertyValue("--v-body-scroll-x")),u=parseFloat(a.style.getPropertyValue("--v-body-scroll-y")),l=a.style.scrollBehavior;a.style.scrollBehavior="auto",a.style.removeProperty("--v-body-scroll-x"),a.style.removeProperty("--v-body-scroll-y"),a.style.removeProperty("--v-scrollbar-offset"),a.classList.remove("v-overlay-scroll-blocked"),a.scrollLeft=-c,a.scrollTop=-u,a.style.scrollBehavior=l}),s&&t.root.value.classList.remove("v-overlay--scroll-blocked")})}function Z9e(t,e,r){let n=!1,i=-1,s=-1;function a(o){W9e(()=>{const c=performance.now();t.updateLocation.value?.(o),n=(performance.now()-c)/(1e3/60)>2})}s=(typeof requestIdleCallback>"u"?o=>o():requestIdleCallback)(()=>{r.run(()=>{Wne(t.targetEl.value??t.contentEl.value,o=>{n?(cancelAnimationFrame(i),i=requestAnimationFrame(()=>{i=requestAnimationFrame(()=>{a(o)})})):a(o)})})}),ka(()=>{typeof cancelIdleCallback<"u"&&cancelIdleCallback(s),cancelAnimationFrame(i)})}function Wne(t,e){const r=[document,...W3(t)];r.forEach(n=>{n.addEventListener("scroll",e,{passive:!0})}),ka(()=>{r.forEach(n=>{n.removeEventListener("scroll",e)})})}const DC=Symbol.for("vuetify:v-menu"),J9e=et({closeDelay:[Number,String],openDelay:[Number,String]},"delay");function Q9e(t,e){let r=()=>{};function n(a){r?.();const o=Number(a?t.openDelay:t.closeDelay);return new Promise(c=>{r=$ve(o,()=>{e?.(a),c(a)})})}function i(){return n(!0)}function s(){return n(!1)}return{clearDelay:r,runOpenDelay:i,runCloseDelay:s}}const eSe=et({target:[String,Object],activator:[String,Object],activatorProps:{type:Object,default:()=>({})},openOnClick:{type:Boolean,default:void 0},openOnHover:Boolean,openOnFocus:{type:Boolean,default:void 0},closeOnContentClick:Boolean,...J9e()},"VOverlay-activator");function tSe(t,e){let{isActive:r,isTop:n,contentEl:i}=e;const s=Si("useActivator"),a=ze();let o=!1,c=!1,u=!0;const l=ve(()=>t.openOnFocus||t.openOnFocus==null&&t.openOnHover),f=ve(()=>t.openOnClick||t.openOnClick==null&&!t.openOnHover&&!l.value),{runOpenDelay:d,runCloseDelay:h}=Q9e(t,B=>{B===(t.openOnHover&&o||l.value&&c)&&!(t.openOnHover&&r.value&&!n.value)&&(r.value!==B&&(u=!0),r.value=B)}),m=ze(),p={onClick:B=>{B.stopPropagation(),a.value=B.currentTarget||B.target,r.value||(m.value=[B.clientX,B.clientY]),r.value=!r.value},onMouseenter:B=>{B.sourceCapabilities?.firesTouchEvents||(o=!0,a.value=B.currentTarget||B.target,d())},onMouseleave:B=>{o=!1,h()},onFocus:B=>{q3(B.target,":focus-visible")!==!1&&(c=!0,B.stopPropagation(),a.value=B.currentTarget||B.target,d())},onBlur:B=>{c=!1,B.stopPropagation(),h()}},g=ve(()=>{const B={};return f.value&&(B.onClick=p.onClick),t.openOnHover&&(B.onMouseenter=p.onMouseenter,B.onMouseleave=p.onMouseleave),l.value&&(B.onFocus=p.onFocus,B.onBlur=p.onBlur),B}),v=ve(()=>{const B={};if(t.openOnHover&&(B.onMouseenter=()=>{o=!0,d()},B.onMouseleave=()=>{o=!1,h()}),l.value&&(B.onFocusin=()=>{c=!0,d()},B.onFocusout=()=>{c=!1,h()}),t.closeOnContentClick){const D=Zt(DC,null);B.onClick=()=>{r.value=!1,D?.closeParents()}}return B}),y=ve(()=>{const B={};return t.openOnHover&&(B.onMouseenter=()=>{u&&(o=!0,u=!1,d())},B.onMouseleave=()=>{o=!1,h()}),B});Ft(n,B=>{B&&(t.openOnHover&&!o&&(!l.value||!c)||l.value&&!c&&(!t.openOnHover||!o))&&!i.value?.contains(document.activeElement)&&(r.value=!1)}),Ft(r,B=>{B||setTimeout(()=>{m.value=void 0})},{flush:"post"});const b=HA();$i(()=>{b.value&&Cn(()=>{a.value=b.el})});const _=HA(),x=ve(()=>t.target==="cursor"&&m.value?m.value:_.value?_.el:Gne(t.target,s)||a.value),E=ve(()=>Array.isArray(x.value)?void 0:x.value);let k;return Ft(()=>!!t.activator,B=>{B&&Lr?(k=ZP(),k.run(()=>{rSe(t,s,{activatorEl:a,activatorEvents:g})})):k&&k.stop()},{flush:"post",immediate:!0}),ka(()=>{k?.stop()}),{activatorEl:a,activatorRef:b,target:x,targetEl:E,targetRef:_,activatorEvents:g,contentEvents:v,scrimEvents:y}}function rSe(t,e,r){let{activatorEl:n,activatorEvents:i}=r;Ft(()=>t.activator,(c,u)=>{if(u&&c!==u){const l=o(u);l&&a(l)}c&&Cn(()=>s())},{immediate:!0}),Ft(()=>t.activatorProps,()=>{s()}),ka(()=>{a()});function s(){let c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:o(),u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t.activatorProps;c&&Vve(c,zt(i.value,u))}function a(){let c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:o(),u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t.activatorProps;c&&qve(c,zt(i.value,u))}function o(){let c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:t.activator;const u=Gne(c,e);return n.value=u?.nodeType===Node.ELEMENT_NODE?u:void 0,n.value}}function Gne(t,e){if(!t)return;let r;if(t==="parent"){let n=e?.proxy?.$el?.parentNode;for(;n?.hasAttribute("data-no-activator");)n=n.parentNode;r=n}else typeof t=="string"?r=document.querySelector(t):"$el"in t?r=t.$el:r=t;return r}function nSe(){if(!Lr)return Dt(!1);const{ssr:t}=Bu();if(t){const e=Dt(!1);return hn(()=>{e.value=!0}),e}else return Dt(!0)}function wO(){const e=Si("useScopeId").vnode.scopeId;return{scopeId:e?{[e]:""}:void 0}}const IU=Symbol.for("vuetify:stack"),Pm=yi([]);function iSe(t,e,r){const n=Si("useStack"),i=!r,s=Zt(IU,void 0),a=yi({activeChildren:new Set});dn(IU,a);const o=Dt(Number(e.value));Ih(t,()=>{const l=Pm.at(-1)?.[1];o.value=l?l+10:Number(e.value),i&&Pm.push([n.uid,o.value]),s?.activeChildren.add(n.uid),ka(()=>{if(i){const f=kt(Pm).findIndex(d=>d[0]===n.uid);Pm.splice(f,1)}s?.activeChildren.delete(n.uid)})});const c=Dt(!0);i&&$i(()=>{const l=Pm.at(-1)?.[0]===n.uid;setTimeout(()=>c.value=l)});const u=ve(()=>!a.activeChildren.size);return{globalTop:ly(c),localTop:u,stackStyles:ve(()=>({zIndex:o.value}))}}function sSe(t){return{teleportTarget:ve(()=>{const r=t();if(r===!0||!Lr)return;const n=r===!1?document.body:typeof r=="string"?document.querySelector(r):r;if(n==null)return;let i=[...n.children].find(s=>s.matches(".v-overlay-container"));return i||(i=document.createElement("div"),i.className="v-overlay-container",n.appendChild(i)),i})}}function aSe(){return!0}function Kne(t,e,r){if(!t||Xne(t,r)===!1)return!1;const n=Iee(e);if(typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&n.host===t.target)return!1;const i=(typeof r.value=="object"&&r.value.include||(()=>[]))();return i.push(e),!i.some(s=>s?.contains(t.target))}function Xne(t,e){return(typeof e.value=="object"&&e.value.closeConditional||aSe)(t)}function oSe(t,e,r){const n=typeof r.value=="function"?r.value:r.value.handler;t.shadowTarget=t.target,e._clickOutside.lastMousedownWasOutside&&Kne(t,e,r)&&setTimeout(()=>{Xne(t,r)&&n&&n(t)},0)}function PU(t,e){const r=Iee(t);e(document),typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&e(r)}const cSe={mounted(t,e){const r=i=>oSe(i,t,e),n=i=>{t._clickOutside.lastMousedownWasOutside=Kne(i,t,e)};PU(t,i=>{i.addEventListener("click",r,!0),i.addEventListener("mousedown",n,!0)}),t._clickOutside||(t._clickOutside={lastMousedownWasOutside:!1}),t._clickOutside[e.instance.$.uid]={onClick:r,onMousedown:n}},beforeUnmount(t,e){t._clickOutside&&(PU(t,r=>{if(!r||!t._clickOutside?.[e.instance.$.uid])return;const{onClick:n,onMousedown:i}=t._clickOutside[e.instance.$.uid];r.removeEventListener("click",n,!0),r.removeEventListener("mousedown",i,!0)}),delete t._clickOutside[e.instance.$.uid])}};function lSe(t){const{modelValue:e,color:r,...n}=t;return ae(Hf,{name:"fade-transition",appear:!0},{default:()=>[t.modelValue&&ae("div",zt({class:["v-overlay__scrim",t.color.backgroundColorClasses.value],style:t.color.backgroundColorStyles.value},n),null)]})}const _O=et({absolute:Boolean,attach:[Boolean,String,Object],closeOnBack:{type:Boolean,default:!0},contained:Boolean,contentClass:null,contentProps:null,disabled:Boolean,opacity:[Number,String],noClickAnimation:Boolean,modelValue:Boolean,persistent:Boolean,scrim:{type:[Boolean,String],default:!0},zIndex:{type:[Number,String],default:2e3},...eSe(),...Qt(),...wl(),...Sne(),...j9e(),...G9e(),...Ei(),...Cy()},"VOverlay"),l4=_t()({name:"VOverlay",directives:{ClickOutside:cSe},inheritAttrs:!1,props:{_disableGlobalStack:Boolean,..._O()},emits:{"click:outside":t=>!0,"update:modelValue":t=>!0,keydown:t=>!0,afterEnter:()=>!0,afterLeave:()=>!0},setup(t,e){let{slots:r,attrs:n,emit:i}=e;const s=Si("VOverlay"),a=ze(),o=ze(),c=ze(),u=si(t,"modelValue"),l=ve({get:()=>u.value,set:q=>{q&&t.disabled||(u.value=q)}}),{themeClasses:f}=Yi(t),{rtlClasses:d,isRtl:h}=Oo(),{hasContent:m,onAfterLeave:p}=Ene(t,l),g=fu(ve(()=>typeof t.scrim=="string"?t.scrim:null)),{globalTop:v,localTop:y,stackStyles:b}=iSe(l,Nt(t,"zIndex"),t._disableGlobalStack),{activatorEl:_,activatorRef:x,target:E,targetEl:k,targetRef:B,activatorEvents:D,contentEvents:z,scrimEvents:U}=tSe(t,{isActive:l,isTop:y,contentEl:c}),{teleportTarget:S}=sSe(()=>{const q=t.attach||t.contained;if(q)return q;const G=_?.value?.getRootNode()||s.proxy?.$el?.getRootNode();return G instanceof ShadowRoot?G:!1}),{dimensionStyles:T}=_l(t),w=nSe(),{scopeId:A}=wO();Ft(()=>t.disabled,q=>{q&&(l.value=!1)});const{contentStyles:F,updateLocation:P}=V9e(t,{isRtl:h,contentEl:c,target:E,isActive:l});K9e(t,{root:a,contentEl:c,targetEl:k,isActive:l,updateLocation:P});function O(q){i("click:outside",q),t.persistent?N():l.value=!1}function R(q){return l.value&&v.value&&(!t.scrim||q.target===o.value||q instanceof MouseEvent&&q.shadowTarget===o.value)}Lr&&Ft(l,q=>{q?window.addEventListener("keydown",I):window.removeEventListener("keydown",I)},{immediate:!0}),hs(()=>{Lr&&window.removeEventListener("keydown",I)});function I(q){q.key==="Escape"&&v.value&&(c.value?.contains(document.activeElement)||i("keydown",q),t.persistent?N():(l.value=!1,c.value?.contains(document.activeElement)&&_.value?.focus()))}function C(q){q.key==="Escape"&&!v.value||i("keydown",q)}const M=O7e();Ih(()=>t.closeOnBack,()=>{B7e(M,q=>{v.value&&l.value?(q(!1),t.persistent?N():l.value=!1):q()})});const L=ze();Ft(()=>l.value&&(t.absolute||t.contained)&&S.value==null,q=>{if(q){const G=Pee(a.value);G&&G!==document.scrollingElement&&(L.value=G.scrollTop)}});function N(){t.noClickAnimation||c.value&&g1(c.value,[{transformOrigin:"center"},{transform:"scale(1.03)"},{transformOrigin:"center"}],{duration:150,easing:H3})}function H(){i("afterEnter")}function W(){p(),i("afterLeave")}return Gt(()=>ae(ar,null,[r.activator?.({isActive:l.value,targetRef:B,props:zt({ref:x},D.value,t.activatorProps)}),w.value&&m.value&&ae(rge,{disabled:!S.value,to:S.value},{default:()=>[ae("div",zt({class:["v-overlay",{"v-overlay--absolute":t.absolute||t.contained,"v-overlay--active":l.value,"v-overlay--contained":t.contained},f.value,d.value,t.class],style:[b.value,{"--v-overlay-opacity":t.opacity,top:Ht(L.value)},t.style],ref:a,onKeydown:C},A,n),[ae(lSe,zt({color:g,modelValue:l.value&&!!t.scrim,ref:o},U.value),null),ae(ru,{appear:!0,persisted:!0,transition:t.transition,target:E.value,onAfterEnter:H,onAfterLeave:W},{default:()=>[us(ae("div",zt({ref:c,class:["v-overlay__content",t.contentClass],style:[T.value,F.value]},z.value,t.contentProps),[r.default?.({isActive:l})]),[[bu,l.value],[ud("click-outside"),{handler:O,closeConditional:R,include:()=>[_.value]}]])]})])]})])),{activatorEl:_,scrimEl:o,target:E,animateClick:N,contentEl:c,globalTop:v,localTop:y,updateLocation:P}}}),K7=Symbol("Forwarded refs");function X7(t,e){let r=t;for(;r;){const n=Reflect.getOwnPropertyDescriptor(r,e);if(n)return n;r=Object.getPrototypeOf(r)}}function $8(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];return t[K7]=r,new Proxy(t,{get(i,s){if(Reflect.has(i,s))return Reflect.get(i,s);if(!(typeof s=="symbol"||s.startsWith("$")||s.startsWith("__"))){for(const a of r)if(a.value&&Reflect.has(a.value,s)){const o=Reflect.get(a.value,s);return typeof o=="function"?o.bind(a.value):o}}},has(i,s){if(Reflect.has(i,s))return!0;if(typeof s=="symbol"||s.startsWith("$")||s.startsWith("__"))return!1;for(const a of r)if(a.value&&Reflect.has(a.value,s))return!0;return!1},set(i,s,a){if(Reflect.has(i,s))return Reflect.set(i,s,a);if(typeof s=="symbol"||s.startsWith("$")||s.startsWith("__"))return!1;for(const o of r)if(o.value&&Reflect.has(o.value,s))return Reflect.set(o.value,s,a);return!1},getOwnPropertyDescriptor(i,s){const a=Reflect.getOwnPropertyDescriptor(i,s);if(a)return a;if(!(typeof s=="symbol"||s.startsWith("$")||s.startsWith("__"))){for(const o of r){if(!o.value)continue;const c=X7(o.value,s)??("_"in o.value?X7(o.value._?.setupState,s):void 0);if(c)return c}for(const o of r){const c=o.value&&o.value[K7];if(!c)continue;const u=c.slice();for(;u.length;){const l=u.shift(),f=X7(l.value,s);if(f)return f;const d=l.value&&l.value[K7];d&&u.push(...d)}}}}})}const uSe=et({id:String,submenu:Boolean,...Mp(_O({closeDelay:250,closeOnContentClick:!0,locationStrategy:"connected",location:void 0,openDelay:300,scrim:!1,scrollStrategy:"reposition",transition:{component:vO}}),["absolute"])},"VMenu"),u4=_t()({name:"VMenu",props:uSe(),emits:{"update:modelValue":t=>!0},setup(t,e){let{slots:r}=e;const n=si(t,"modelValue"),{scopeId:i}=wO(),{isRtl:s}=Oo(),a=xc(),o=ve(()=>t.id||`v-menu-${a}`),c=ze(),u=Zt(DC,null),l=Dt(new Set);dn(DC,{register(){l.value.add(a)},unregister(){l.value.delete(a)},closeParents(g){setTimeout(()=>{!l.value.size&&!t.persistent&&(g==null||c.value?.contentEl&&!Uve(g,c.value.contentEl))&&(n.value=!1,u?.closeParents())},40)}}),hs(()=>{u?.unregister(),document.removeEventListener("focusin",f)}),TQ(()=>n.value=!1);async function f(g){const v=g.relatedTarget,y=g.target;await Cn(),n.value&&v!==y&&c.value?.contentEl&&c.value?.globalTop&&![document,c.value.contentEl].includes(y)&&!c.value.contentEl.contains(y)&&nv(c.value.contentEl)[0]?.focus()}Ft(n,g=>{g?(u?.register(),Lr&&document.addEventListener("focusin",f,{once:!0})):(u?.unregister(),Lr&&document.removeEventListener("focusin",f))},{immediate:!0});function d(g){u?.closeParents(g)}function h(g){if(!t.disabled)if(g.key==="Tab"||g.key==="Enter"&&!t.closeOnContentClick){if(g.key==="Enter"&&(g.target instanceof HTMLTextAreaElement||g.target instanceof HTMLInputElement&&g.target.closest("form")))return;g.key==="Enter"&&g.preventDefault(),yee(nv(c.value?.contentEl,!1),g.shiftKey?"prev":"next",y=>y.tabIndex>=0)||(n.value=!1,c.value?.activatorEl?.focus())}else t.submenu&&g.key===(s.value?"ArrowRight":"ArrowLeft")&&(n.value=!1,c.value?.activatorEl?.focus())}function m(g){if(t.disabled)return;const v=c.value?.contentEl;v&&n.value?g.key==="ArrowDown"?(g.preventDefault(),g.stopImmediatePropagation(),Eg(v,"next")):g.key==="ArrowUp"?(g.preventDefault(),g.stopImmediatePropagation(),Eg(v,"prev")):t.submenu&&(g.key===(s.value?"ArrowRight":"ArrowLeft")?n.value=!1:g.key===(s.value?"ArrowLeft":"ArrowRight")&&(g.preventDefault(),Eg(v,"first"))):(t.submenu?g.key===(s.value?"ArrowLeft":"ArrowRight"):["ArrowDown","ArrowUp"].includes(g.key))&&(n.value=!0,g.preventDefault(),setTimeout(()=>setTimeout(()=>m(g))))}const p=ve(()=>zt({"aria-haspopup":"menu","aria-expanded":String(n.value),"aria-controls":o.value,onKeydown:m},t.activatorProps));return Gt(()=>{const g=l4.filterProps(t);return ae(l4,zt({ref:c,id:o.value,class:["v-menu",t.class],style:t.style},g,{modelValue:n.value,"onUpdate:modelValue":v=>n.value=v,absolute:!0,activatorProps:p.value,location:t.location??(t.submenu?"end":"bottom"),"onClick:outside":d,onKeydown:h},i),{activator:r.activator,default:function(){for(var v=arguments.length,y=new Array(v),b=0;b<v;b++)y[b]=arguments[b];return ae(Di,{root:"VMenu"},{default:()=>[r.default?.(...y)]})}})}),$8({id:o,openChildren:l},c)}}),fSe=et({active:Boolean,disabled:Boolean,max:[Number,String],value:{type:[Number,String],default:0},...Qt(),...Cy({transition:{component:Ane}})},"VCounter"),dSe=_t()({name:"VCounter",functional:!0,props:fSe(),setup(t,e){let{slots:r}=e;const n=ve(()=>t.max?`${t.value} / ${t.max}`:String(t.value));return Gt(()=>ae(ru,{transition:t.transition},{default:()=>[us(ae("div",{class:["v-counter",{"text-error":t.max&&!t.disabled&&parseFloat(t.value)>parseFloat(t.max)},t.class],style:t.style},[r.default?r.default({counter:n.value,max:t.max,value:t.value}):n.value]),[[bu,t.active]])]})),{}}}),hSe=et({text:String,onClick:ba(),...Qt(),...Ei()},"VLabel"),Yne=_t()({name:"VLabel",props:hSe(),setup(t,e){let{slots:r}=e;return Gt(()=>ae("label",{class:["v-label",{"v-label--clickable":!!t.onClick},t.class],style:t.style,onClick:t.onClick},[t.text,r.default?.()])),{}}}),pSe=et({floating:Boolean,...Qt()},"VFieldLabel"),z2=_t()({name:"VFieldLabel",props:pSe(),setup(t,e){let{slots:r}=e;return Gt(()=>ae(Yne,{class:["v-field-label",{"v-field-label--floating":t.floating},t.class],style:t.style,"aria-hidden":t.floating||void 0},r)),{}}});function Zne(t){const{t:e}=u8();function r(n){let{name:i}=n;const s={prepend:"prependAction",prependInner:"prependAction",append:"appendAction",appendInner:"appendAction",clear:"clear"}[i],a=t[`onClick:${i}`];function o(u){u.key!=="Enter"&&u.key!==" "||(u.preventDefault(),u.stopPropagation(),vee(a,new PointerEvent("click",u)))}const c=a&&s?e(`$vuetify.input.${s}`,t.label??""):void 0;return ae(Hr,{icon:t[`${i}Icon`],"aria-label":c,onClick:a,onKeydown:o},null)}return{InputIcon:r}}const Jne=et({focused:Boolean,"onUpdate:focused":ba()},"focus");function xO(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:yl();const r=si(t,"focused"),n=ve(()=>({[`${e}--focused`]:r.value}));function i(){r.value=!0}function s(){r.value=!1}return{focusClasses:n,isFocused:r,focus:i,blur:s}}const mSe=["underlined","outlined","filled","solo","solo-inverted","solo-filled","plain"],Qne=et({appendInnerIcon:$r,bgColor:String,clearable:Boolean,clearIcon:{type:$r,default:"$clear"},active:Boolean,centerAffix:{type:Boolean,default:void 0},color:String,baseColor:String,dirty:Boolean,disabled:{type:Boolean,default:null},error:Boolean,flat:Boolean,label:String,persistentClear:Boolean,prependInnerIcon:$r,reverse:Boolean,singleLine:Boolean,variant:{type:String,default:"filled",validator:t=>mSe.includes(t)},"onClick:clear":ba(),"onClick:appendInner":ba(),"onClick:prependInner":ba(),...Qt(),...uO(),...Sc(),...Ei()},"VField"),RU=_t()({name:"VField",inheritAttrs:!1,props:{id:String,...Jne(),...Qne()},emits:{"update:focused":t=>!0,"update:modelValue":t=>!0},setup(t,e){let{attrs:r,emit:n,slots:i}=e;const{themeClasses:s}=Yi(t),{loaderClasses:a}=N8(t),{focusClasses:o,isFocused:c,focus:u,blur:l}=xO(t),{InputIcon:f}=Zne(t),{roundedClasses:d}=Ec(t),{rtlClasses:h}=Oo(),m=ve(()=>t.dirty||t.active),p=ve(()=>!!(t.label||i.label)),g=ve(()=>!t.singleLine&&p.value),v=xc(),y=ve(()=>t.id||`input-${v}`),b=ve(()=>`${y.value}-messages`),_=ze(),x=ze(),E=ze(),k=ve(()=>["plain","underlined"].includes(t.variant)),{backgroundColorClasses:B,backgroundColorStyles:D}=fu(Nt(t,"bgColor")),{textColorClasses:z,textColorStyles:U}=Eu(ve(()=>t.error||t.disabled?void 0:m.value&&c.value?t.color:t.baseColor));Ft(m,w=>{if(g.value){const A=_.value.$el,F=x.value.$el;requestAnimationFrame(()=>{const P=wR(A),O=F.getBoundingClientRect(),R=O.x-P.x,I=O.y-P.y-(P.height/2-O.height/2),C=O.width/.75,M=Math.abs(C-P.width)>1?{maxWidth:Ht(C)}:void 0,L=getComputedStyle(A),N=getComputedStyle(F),H=parseFloat(L.transitionDuration)*1e3||150,W=parseFloat(N.getPropertyValue("--v-field-label-scale")),q=N.getPropertyValue("color");A.style.visibility="visible",F.style.visibility="hidden",g1(A,{transform:`translate(${R}px, ${I}px) scale(${W})`,color:q,...M},{duration:H,easing:H3,direction:w?"normal":"reverse"}).finished.then(()=>{A.style.removeProperty("visibility"),F.style.removeProperty("visibility")})})}},{flush:"post"});const S=ve(()=>({isActive:m,isFocused:c,controlRef:E,blur:l,focus:u}));function T(w){w.target!==document.activeElement&&w.preventDefault()}return Gt(()=>{const w=t.variant==="outlined",A=!!(i["prepend-inner"]||t.prependInnerIcon),F=!!(t.clearable||i.clear)&&!t.disabled,P=!!(i["append-inner"]||t.appendInnerIcon||F),O=()=>i.label?i.label({...S.value,label:t.label,props:{for:y.value}}):t.label;return ae("div",zt({class:["v-field",{"v-field--active":m.value,"v-field--appended":P,"v-field--center-affix":t.centerAffix??!k.value,"v-field--disabled":t.disabled,"v-field--dirty":t.dirty,"v-field--error":t.error,"v-field--flat":t.flat,"v-field--has-background":!!t.bgColor,"v-field--persistent-clear":t.persistentClear,"v-field--prepended":A,"v-field--reverse":t.reverse,"v-field--single-line":t.singleLine,"v-field--no-label":!O(),[`v-field--variant-${t.variant}`]:!0},s.value,B.value,o.value,a.value,d.value,h.value,t.class],style:[D.value,t.style],onClick:T},r),[ae("div",{class:"v-field__overlay"},null),ae(fO,{name:"v-field",active:!!t.loading,color:t.error?"error":typeof t.loading=="string"?t.loading:t.color},{default:i.loader}),A&&ae("div",{key:"prepend",class:"v-field__prepend-inner"},[t.prependInnerIcon&&ae(f,{key:"prepend-icon",name:"prependInner"},null),i["prepend-inner"]?.(S.value)]),ae("div",{class:"v-field__field","data-no-activator":""},[["filled","solo","solo-inverted","solo-filled"].includes(t.variant)&&g.value&&ae(z2,{key:"floating-label",ref:x,class:[z.value],floating:!0,for:y.value,style:U.value},{default:()=>[O()]}),p.value&&ae(z2,{key:"label",ref:_,for:y.value},{default:()=>[O()]}),i.default?.({...S.value,props:{id:y.value,class:"v-field__input","aria-describedby":b.value},focus:u,blur:l})]),F&&ae(Cne,{key:"clear"},{default:()=>[us(ae("div",{class:"v-field__clearable",onMousedown:R=>{R.preventDefault(),R.stopPropagation()}},[ae(Di,{defaults:{VIcon:{icon:t.clearIcon}}},{default:()=>[i.clear?i.clear({...S.value,props:{onFocus:u,onBlur:l,onClick:t["onClick:clear"]}}):ae(f,{name:"clear",onFocus:u,onBlur:l},null)]})]),[[bu,t.dirty]])]}),P&&ae("div",{key:"append",class:"v-field__append-inner"},[i["append-inner"]?.(S.value),t.appendInnerIcon&&ae(f,{key:"append-icon",name:"appendInner"},null)]),ae("div",{class:["v-field__outline",z.value],style:U.value},[w&&ae(ar,null,[ae("div",{class:"v-field__outline__start"},null),g.value&&ae("div",{class:"v-field__outline__notch"},[ae(z2,{ref:x,floating:!0,for:y.value},{default:()=>[O()]})]),ae("div",{class:"v-field__outline__end"},null)]),k.value&&g.value&&ae(z2,{ref:x,floating:!0,for:y.value},{default:()=>[O()]})])])}),{controlRef:E}}}),gSe=et({active:Boolean,color:String,messages:{type:[Array,String],default:()=>[]},...Qt(),...Cy({transition:{component:Ane,leaveAbsolute:!0,group:!0}})},"VMessages"),vSe=_t()({name:"VMessages",props:gSe(),setup(t,e){let{slots:r}=e;const n=ve(()=>oc(t.messages)),{textColorClasses:i,textColorStyles:s}=Eu(ve(()=>t.color));return Gt(()=>ae(ru,{transition:t.transition,tag:"div",class:["v-messages",i.value,t.class],style:[s.value,t.style]},{default:()=>[t.active&&n.value.map((a,o)=>ae("div",{class:"v-messages__message",key:`${o}-${n.value}`},[r.message?r.message({message:a}):a]))]})),{}}}),ySe=Symbol.for("vuetify:form");function eie(t){const e=Zt(ySe,null);return{...e,isReadonly:ve(()=>!!(t?.readonly??e?.isReadonly.value)),isDisabled:ve(()=>!!(t?.disabled??e?.isDisabled.value))}}const bSe=et({disabled:{type:Boolean,default:null},error:Boolean,errorMessages:{type:[Array,String],default:()=>[]},maxErrors:{type:[Number,String],default:1},name:String,label:String,readonly:{type:Boolean,default:null},rules:{type:Array,default:()=>[]},modelValue:null,validateOn:String,validationValue:null,...Jne()},"validation");function wSe(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:yl(),r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:xc();const n=si(t,"modelValue"),i=ve(()=>t.validationValue===void 0?n.value:t.validationValue),s=eie(t),a=ze([]),o=Dt(!0),c=ve(()=>!!(oc(n.value===""?null:n.value).length||oc(i.value===""?null:i.value).length)),u=ve(()=>t.errorMessages?.length?oc(t.errorMessages).concat(a.value).slice(0,Math.max(0,Number(t.maxErrors))):a.value),l=ve(()=>{let b=(t.validateOn??s.validateOn?.value)||"input";b==="lazy"&&(b="input lazy"),b==="eager"&&(b="input eager");const _=new Set(b?.split(" ")??[]);return{input:_.has("input"),blur:_.has("blur")||_.has("input")||_.has("invalid-input"),invalidInput:_.has("invalid-input"),lazy:_.has("lazy"),eager:_.has("eager")}}),f=ve(()=>t.error||t.errorMessages?.length?!1:t.rules.length?o.value?a.value.length||l.value.lazy?null:!0:!a.value.length:!0),d=Dt(!1),h=ve(()=>({[`${e}--error`]:f.value===!1,[`${e}--dirty`]:c.value,[`${e}--disabled`]:s.isDisabled.value,[`${e}--readonly`]:s.isReadonly.value})),m=Si("validation"),p=ve(()=>t.name??Ve(r));fy(()=>{s.register?.({id:p.value,vm:m,validate:y,reset:g,resetValidation:v})}),hs(()=>{s.unregister?.(p.value)}),hn(async()=>{l.value.lazy||await y(!l.value.eager),s.update?.(p.value,f.value,u.value)}),Ih(()=>l.value.input||l.value.invalidInput&&f.value===!1,()=>{Ft(i,()=>{if(i.value!=null)y();else if(t.focused){const b=Ft(()=>t.focused,_=>{_||y(),b()})}})}),Ih(()=>l.value.blur,()=>{Ft(()=>t.focused,b=>{b||y()})}),Ft([f,u],()=>{s.update?.(p.value,f.value,u.value)});async function g(){n.value=null,await Cn(),await v()}async function v(){o.value=!0,l.value.lazy?a.value=[]:await y(!l.value.eager)}async function y(){let b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;const _=[];d.value=!0;for(const x of t.rules){if(_.length>=Number(t.maxErrors??1))break;const k=await(typeof x=="function"?x:()=>x)(i.value);if(k!==!0){if(k!==!1&&typeof k!="string"){console.warn(`${k} is not a valid value. Rule functions must return boolean true or a string.`);continue}_.push(k||"")}}return a.value=_,d.value=!1,o.value=b,a.value}return{errorMessages:u,isDirty:c,isDisabled:s.isDisabled,isReadonly:s.isReadonly,isPristine:o,isValid:f,isValidating:d,reset:g,resetValidation:v,validate:y,validationClasses:h}}const SO=et({id:String,appendIcon:$r,centerAffix:{type:Boolean,default:!0},prependIcon:$r,hideDetails:[Boolean,String],hideSpinButtons:Boolean,hint:String,persistentHint:Boolean,messages:{type:[Array,String],default:()=>[]},direction:{type:String,default:"horizontal",validator:t=>["horizontal","vertical"].includes(t)},"onClick:prepend":ba(),"onClick:append":ba(),...Qt(),...bl(),...l8(wl(),["maxWidth","minWidth","width"]),...Ei(),...bSe()},"VInput"),f4=_t()({name:"VInput",props:{...SO()},emits:{"update:modelValue":t=>!0},setup(t,e){let{attrs:r,slots:n,emit:i}=e;const{densityClasses:s}=Lu(t),{dimensionStyles:a}=_l(t),{themeClasses:o}=Yi(t),{rtlClasses:c}=Oo(),{InputIcon:u}=Zne(t),l=xc(),f=ve(()=>t.id||`input-${l}`),d=ve(()=>`${f.value}-messages`),{errorMessages:h,isDirty:m,isDisabled:p,isReadonly:g,isPristine:v,isValid:y,isValidating:b,reset:_,resetValidation:x,validate:E,validationClasses:k}=wSe(t,"v-input",f),B=ve(()=>({id:f,messagesId:d,isDirty:m,isDisabled:p,isReadonly:g,isPristine:v,isValid:y,isValidating:b,reset:_,resetValidation:x,validate:E})),D=ve(()=>t.errorMessages?.length||!v.value&&h.value.length?h.value:t.hint&&(t.persistentHint||t.focused)?t.hint:t.messages);return Gt(()=>{const z=!!(n.prepend||t.prependIcon),U=!!(n.append||t.appendIcon),S=D.value.length>0,T=!t.hideDetails||t.hideDetails==="auto"&&(S||!!n.details);return ae("div",{class:["v-input",`v-input--${t.direction}`,{"v-input--center-affix":t.centerAffix,"v-input--hide-spin-buttons":t.hideSpinButtons},s.value,o.value,c.value,k.value,t.class],style:[a.value,t.style]},[z&&ae("div",{key:"prepend",class:"v-input__prepend"},[n.prepend?.(B.value),t.prependIcon&&ae(u,{key:"prepend-icon",name:"prepend"},null)]),n.default&&ae("div",{class:"v-input__control"},[n.default?.(B.value)]),U&&ae("div",{key:"append",class:"v-input__append"},[t.appendIcon&&ae(u,{key:"append-icon",name:"append"},null),n.append?.(B.value)]),T&&ae("div",{id:d.value,class:"v-input__details",role:"alert","aria-live":"polite"},[ae(vSe,{active:S,messages:D.value},{message:n.message}),n.details?.(B.value)])])}),{reset:_,resetValidation:x,validate:E,isValid:y,errorMessages:h}}}),_Se=["color","file","time","date","datetime-local","week","month"],tie=et({autofocus:Boolean,counter:[Boolean,Number,String],counterValue:[Number,Function],prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,suffix:String,role:String,type:{type:String,default:"text"},modelModifiers:Object,...SO(),...Qne()},"VTextField"),d4=_t()({name:"VTextField",directives:{Intersect:Lne},inheritAttrs:!1,props:tie(),emits:{"click:control":t=>!0,"mousedown:control":t=>!0,"update:focused":t=>!0,"update:modelValue":t=>!0},setup(t,e){let{attrs:r,emit:n,slots:i}=e;const s=si(t,"modelValue"),{isFocused:a,focus:o,blur:c}=xO(t),u=ve(()=>typeof t.counterValue=="function"?t.counterValue(s.value):typeof t.counterValue=="number"?t.counterValue:(s.value??"").toString().length),l=ve(()=>{if(r.maxlength)return r.maxlength;if(!(!t.counter||typeof t.counter!="number"&&typeof t.counter!="string"))return t.counter}),f=ve(()=>["plain","underlined"].includes(t.variant));function d(E,k){!t.autofocus||!E||k[0].target?.focus?.()}const h=ze(),m=ze(),p=ze(),g=ve(()=>_Se.includes(t.type)||t.persistentPlaceholder||a.value||t.active);function v(){p.value!==document.activeElement&&p.value?.focus(),a.value||o()}function y(E){n("mousedown:control",E),E.target!==p.value&&(v(),E.preventDefault())}function b(E){v(),n("click:control",E)}function _(E){E.stopPropagation(),v(),Cn(()=>{s.value=null,vee(t["onClick:clear"],E)})}function x(E){const k=E.target;if(s.value=k.value,t.modelModifiers?.trim&&["text","search","password","tel","url"].includes(t.type)){const B=[k.selectionStart,k.selectionEnd];Cn(()=>{k.selectionStart=B[0],k.selectionEnd=B[1]})}}return Gt(()=>{const E=!!(i.counter||t.counter!==!1&&t.counter!=null),k=!!(E||i.details),[B,D]=yR(r),{modelValue:z,...U}=f4.filterProps(t),S=RU.filterProps(t);return ae(f4,zt({ref:h,modelValue:s.value,"onUpdate:modelValue":T=>s.value=T,class:["v-text-field",{"v-text-field--prefixed":t.prefix,"v-text-field--suffixed":t.suffix,"v-input--plain-underlined":f.value},t.class],style:t.style},B,U,{centerAffix:!f.value,focused:a.value}),{...i,default:T=>{let{id:w,isDisabled:A,isDirty:F,isReadonly:P,isValid:O}=T;return ae(RU,zt({ref:m,onMousedown:y,onClick:b,"onClick:clear":_,"onClick:prependInner":t["onClick:prependInner"],"onClick:appendInner":t["onClick:appendInner"],role:t.role},S,{id:w.value,active:g.value||F.value,dirty:F.value||t.dirty,disabled:A.value,focused:a.value,error:O.value===!1}),{...i,default:R=>{let{props:{class:I,...C}}=R;const M=us(ae("input",zt({ref:p,value:s.value,onInput:x,autofocus:t.autofocus,readonly:P.value,disabled:A.value,name:t.name,placeholder:t.placeholder,size:1,type:t.type,onFocus:v,onBlur:c},C,D),null),[[ud("intersect"),{handler:d},null,{once:!0}]]);return ae(ar,null,[t.prefix&&ae("span",{class:"v-text-field__prefix"},[ae("span",{class:"v-text-field__prefix__text"},[t.prefix])]),i.default?ae("div",{class:I,"data-no-activator":""},[i.default(),M]):yu(M,{class:I}),t.suffix&&ae("span",{class:"v-text-field__suffix"},[ae("span",{class:"v-text-field__suffix__text"},[t.suffix])])])}})},details:k?T=>ae(ar,null,[i.details?.(T),E&&ae(ar,null,[ae("span",null,null),ae(dSe,{active:t.persistentCounter||a.value,value:u.value,max:l.value,disabled:t.disabled},i.counter)])]):void 0})}),$8({},h,m,p)}}),rie=Pn({__name:"MenuLangues",setup(t){const{__:e}=Fu(),{_:r}=e(),{isRtl:n}=Oo(),{:i,_:s}=Hp(),a=ze(),o=ve(()=>r.value.filter(c=>!a.value||c..includes(a.value)||c..includes(a.value)).map(c=>c.));return(c,u)=>(Vt(),hr(u4,{activator:"parent",offset:"10px","min-width":"225",location:Ve(n)?"bottom right":"bottom left"},{default:Ge(()=>[ae(ep,null,{default:Ge(()=>[ae(d4,{modelValue:a.value,"onUpdate:modelValue":u[0]||(u[0]=l=>a.value=l),density:"compact","prepend-inner-icon":"mdi-magnify",autofocus:"","hide-details":"",onClick:u[1]||(u[1]=Ive(()=>{},["stop"]))},null,8,["modelValue"]),ae(ep,{class:"overflow-y-auto","max-height":"400px","min-width":"200px"},{default:Ge(()=>[(Vt(!0),Ch(ar,null,F3(o.value,l=>(Vt(),hr($9e,{key:l,code:l,selectionnee:l===Ve(i),onClick:()=>Ve(s)(l)},null,8,["code","selectionnee","onClick"]))),128))]),_:1})]),_:1})]),_:1},8,["location"]))}}),nie=Symbol.for("vuetify:selection-control-group"),iie=et({color:String,disabled:{type:Boolean,default:null},defaultsTarget:String,error:Boolean,id:String,inline:Boolean,falseIcon:$r,trueIcon:$r,ripple:{type:[Boolean,Object],default:!0},multiple:{type:Boolean,default:null},name:String,readonly:{type:Boolean,default:null},modelValue:null,type:String,valueComparator:{type:Function,default:cu},...Qt(),...bl(),...Ei()},"SelectionControlGroup"),xSe=et({...iie({defaultsTarget:"VSelectionControl"})},"VSelectionControlGroup");_t()({name:"VSelectionControlGroup",props:xSe(),emits:{"update:modelValue":t=>!0},setup(t,e){let{slots:r}=e;const n=si(t,"modelValue"),i=xc(),s=ve(()=>t.id||`v-selection-control-group-${i}`),a=ve(()=>t.name||s.value),o=new Set;return dn(nie,{modelValue:n,forceUpdate:()=>{o.forEach(c=>c())},onForceUpdate:c=>{o.add(c),ka(()=>{o.delete(c)})}}),Np({[t.defaultsTarget]:{color:Nt(t,"color"),disabled:Nt(t,"disabled"),density:Nt(t,"density"),error:Nt(t,"error"),inline:Nt(t,"inline"),modelValue:n,multiple:ve(()=>!!t.multiple||t.multiple==null&&Array.isArray(n.value)),name:a,falseIcon:Nt(t,"falseIcon"),trueIcon:Nt(t,"trueIcon"),readonly:Nt(t,"readonly"),ripple:Nt(t,"ripple"),type:Nt(t,"type"),valueComparator:Nt(t,"valueComparator")}}),Gt(()=>ae("div",{class:["v-selection-control-group",{"v-selection-control-group--inline":t.inline},t.class],style:t.style,role:t.type==="radio"?"radiogroup":void 0},[r.default?.()])),{}}});const EO=et({label:String,baseColor:String,trueValue:null,falseValue:null,value:null,...Qt(),...iie()},"VSelectionControl");function SSe(t){const e=Zt(nie,void 0),{densityClasses:r}=Lu(t),n=si(t,"modelValue"),i=ve(()=>t.trueValue!==void 0?t.trueValue:t.value!==void 0?t.value:!0),s=ve(()=>t.falseValue!==void 0?t.falseValue:!1),a=ve(()=>!!t.multiple||t.multiple==null&&Array.isArray(n.value)),o=ve({get(){const h=e?e.modelValue.value:n.value;return a.value?oc(h).some(m=>t.valueComparator(m,i.value)):t.valueComparator(h,i.value)},set(h){if(t.readonly)return;const m=h?i.value:s.value;let p=m;a.value&&(p=h?[...oc(n.value),m]:oc(n.value).filter(g=>!t.valueComparator(g,i.value))),e?e.modelValue.value=p:n.value=p}}),{textColorClasses:c,textColorStyles:u}=Eu(ve(()=>{if(!(t.error||t.disabled))return o.value?t.color:t.baseColor})),{backgroundColorClasses:l,backgroundColorStyles:f}=fu(ve(()=>o.value&&!t.error&&!t.disabled?t.color:t.baseColor)),d=ve(()=>o.value?t.trueIcon:t.falseIcon);return{group:e,densityClasses:r,trueValue:i,falseValue:s,model:o,textColorClasses:c,textColorStyles:u,backgroundColorClasses:l,backgroundColorStyles:f,icon:d}}const h4=_t()({name:"VSelectionControl",directives:{Ripple:Ay},inheritAttrs:!1,props:EO(),emits:{"update:modelValue":t=>!0},setup(t,e){let{attrs:r,slots:n}=e;const{group:i,densityClasses:s,icon:a,model:o,textColorClasses:c,textColorStyles:u,backgroundColorClasses:l,backgroundColorStyles:f,trueValue:d}=SSe(t),h=xc(),m=Dt(!1),p=Dt(!1),g=ze(),v=ve(()=>t.id||`input-${h}`),y=ve(()=>!t.disabled&&!t.readonly);i?.onForceUpdate(()=>{g.value&&(g.value.checked=o.value)});function b(k){y.value&&(m.value=!0,q3(k.target,":focus-visible")!==!1&&(p.value=!0))}function _(){m.value=!1,p.value=!1}function x(k){k.stopPropagation()}function E(k){if(!y.value){g.value&&(g.value.checked=o.value);return}t.readonly&&i&&Cn(()=>i.forceUpdate()),o.value=k.target.checked}return Gt(()=>{const k=n.label?n.label({label:t.label,props:{for:v.value}}):t.label,[B,D]=yR(r),z=ae("input",zt({ref:g,checked:o.value,disabled:!!t.disabled,id:v.value,onBlur:_,onFocus:b,onInput:E,"aria-disabled":!!t.disabled,"aria-label":t.label,type:t.type,value:d.value,name:t.name,"aria-checked":t.type==="checkbox"?o.value:void 0},D),null);return ae("div",zt({class:["v-selection-control",{"v-selection-control--dirty":o.value,"v-selection-control--disabled":t.disabled,"v-selection-control--error":t.error,"v-selection-control--focused":m.value,"v-selection-control--focus-visible":p.value,"v-selection-control--inline":t.inline},s.value,t.class]},B,{style:t.style}),[ae("div",{class:["v-selection-control__wrapper",c.value],style:u.value},[n.default?.({backgroundColorClasses:l,backgroundColorStyles:f}),us(ae("div",{class:["v-selection-control__input"]},[n.input?.({model:o,textColorClasses:c,textColorStyles:u,backgroundColorClasses:l,backgroundColorStyles:f,inputNode:z,icon:a.value,props:{onFocus:b,onBlur:_,id:v.value}})??ae(ar,null,[a.value&&ae(Hr,{key:"icon",icon:a.value},null),z])]),[[ud("ripple"),t.ripple&&[!t.disabled&&!t.readonly,null,["center","circle"]]]])]),k&&ae(Yne,{for:v.value,onClick:x},{default:()=>[k]})])}),{isFocused:m,input:g}}}),ESe=et({indeterminate:Boolean,indeterminateIcon:{type:$r,default:"$checkboxIndeterminate"},...EO({falseIcon:"$checkboxOff",trueIcon:"$checkboxOn"})},"VCheckboxBtn"),kSe=_t()({name:"VCheckboxBtn",props:ESe(),emits:{"update:modelValue":t=>!0,"update:indeterminate":t=>!0},setup(t,e){let{slots:r}=e;const n=si(t,"indeterminate"),i=si(t,"modelValue");function s(c){n.value&&(n.value=!1)}const a=ve(()=>n.value?t.indeterminateIcon:t.falseIcon),o=ve(()=>n.value?t.indeterminateIcon:t.trueIcon);return Gt(()=>{const c=Mp(h4.filterProps(t),["modelValue"]);return ae(h4,zt(c,{modelValue:i.value,"onUpdate:modelValue":[u=>i.value=u,s],class:["v-checkbox-btn",t.class],style:t.style,type:"checkbox",falseIcon:a.value,trueIcon:o.value,"aria-checked":n.value?"mixed":void 0}),r)}),{}}});function TSe(t){let{selectedElement:e,containerElement:r,isRtl:n,isHorizontal:i}=t;const s=mv(i,r),a=sie(i,n,r),o=mv(i,e),c=aie(i,e),u=o*.4;return a>c?c-u:a+s<c+o?c-s+o+u:a}function ASe(t){let{selectedElement:e,containerElement:r,isHorizontal:n}=t;const i=mv(n,r),s=aie(n,e),a=mv(n,e);return s-i/2+a/2}function OU(t,e){return e?.[t?"scrollWidth":"scrollHeight"]||0}function CSe(t,e){return e?.[t?"clientWidth":"clientHeight"]||0}function sie(t,e,r){if(!r)return 0;const{scrollLeft:n,offsetWidth:i,scrollWidth:s}=r;return t?e?s-i+n:n:r.scrollTop}function mv(t,e){return e?.[t?"offsetWidth":"offsetHeight"]||0}function aie(t,e){return e?.[t?"offsetLeft":"offsetTop"]||0}const ISe=Symbol.for("vuetify:v-slide-group"),oie=et({centerActive:Boolean,direction:{type:String,default:"horizontal"},symbol:{type:null,default:ISe},nextIcon:{type:$r,default:"$next"},prevIcon:{type:$r,default:"$prev"},showArrows:{type:[Boolean,String],validator:t=>typeof t=="boolean"||["always","desktop","mobile"].includes(t)},...Qt(),...b2e({mobile:null}),...ri(),...aO({selectedClass:"v-slide-group-item--active"})},"VSlideGroup"),BU=_t()({name:"VSlideGroup",props:oie(),emits:{"update:modelValue":t=>!0},setup(t,e){let{slots:r}=e;const{isRtl:n}=Oo(),{displayClasses:i,mobile:s}=Bu(t),a=B8(t,t.symbol),o=Dt(!1),c=Dt(0),u=Dt(0),l=Dt(0),f=ve(()=>t.direction==="horizontal"),{resizeRef:d,contentRect:h}=H1(),{resizeRef:m,contentRect:p}=H1(),g=x2e(),v=ve(()=>({container:d.el,duration:200,easing:"easeOutQuart"})),y=ve(()=>a.selected.value.length?a.items.value.findIndex(C=>C.id===a.selected.value[0]):-1),b=ve(()=>a.selected.value.length?a.items.value.findIndex(C=>C.id===a.selected.value[a.selected.value.length-1]):-1);if(Lr){let C=-1;Ft(()=>[a.selected.value,h.value,p.value,f.value],()=>{cancelAnimationFrame(C),C=requestAnimationFrame(()=>{if(h.value&&p.value){const M=f.value?"width":"height";u.value=h.value[M],l.value=p.value[M],o.value=u.value+1<l.value}if(y.value>=0&&m.el){const M=m.el.children[b.value];x(M,t.centerActive)}})})}const _=Dt(!1);function x(C,M){let L=0;M?L=ASe({containerElement:d.el,isHorizontal:f.value,selectedElement:C}):L=TSe({containerElement:d.el,isHorizontal:f.value,isRtl:n.value,selectedElement:C}),E(L)}function E(C){if(!Lr||!d.el)return;const M=mv(f.value,d.el),L=sie(f.value,n.value,d.el);if(!(OU(f.value,d.el)<=M||Math.abs(C-L)<16)){if(f.value&&n.value&&d.el){const{scrollWidth:H,offsetWidth:W}=d.el;C=H-W-C}f.value?g.horizontal(C,v.value):g(C,v.value)}}function k(C){const{scrollTop:M,scrollLeft:L}=C.target;c.value=f.value?L:M}function B(C){if(_.value=!0,!(!o.value||!m.el)){for(const M of C.composedPath())for(const L of m.el.children)if(L===M){x(L);return}}}function D(C){_.value=!1}let z=!1;function U(C){!z&&!_.value&&!(C.relatedTarget&&m.el?.contains(C.relatedTarget))&&A(),z=!1}function S(){z=!0}function T(C){if(!m.el)return;function M(L){C.preventDefault(),A(L)}f.value?C.key==="ArrowRight"?M(n.value?"prev":"next"):C.key==="ArrowLeft"&&M(n.value?"next":"prev"):C.key==="ArrowDown"?M("next"):C.key==="ArrowUp"&&M("prev"),C.key==="Home"?M("first"):C.key==="End"&&M("last")}function w(C,M){if(!C)return;let L=C;do L=L?.[M==="next"?"nextElementSibling":"previousElementSibling"];while(L?.hasAttribute("disabled"));return L}function A(C){if(!m.el)return;let M;if(!C)M=nv(m.el)[0];else if(C==="next"){if(M=w(m.el.querySelector(":focus"),C),!M)return A("first")}else if(C==="prev"){if(M=w(m.el.querySelector(":focus"),C),!M)return A("last")}else C==="first"?(M=m.el.firstElementChild,M?.hasAttribute("disabled")&&(M=w(M,"next"))):C==="last"&&(M=m.el.lastElementChild,M?.hasAttribute("disabled")&&(M=w(M,"prev")));M&&M.focus({preventScroll:!0})}function F(C){const M=f.value&&n.value?-1:1,L=(C==="prev"?-M:M)*u.value;let N=c.value+L;if(f.value&&n.value&&d.el){const{scrollWidth:H,offsetWidth:W}=d.el;N+=H-W}E(N)}const P=ve(()=>({next:a.next,prev:a.prev,select:a.select,isSelected:a.isSelected})),O=ve(()=>{switch(t.showArrows){case"always":return!0;case"desktop":return!s.value;case!0:return o.value||Math.abs(c.value)>0;case"mobile":return s.value||o.value||Math.abs(c.value)>0;default:return!s.value&&(o.value||Math.abs(c.value)>0)}}),R=ve(()=>Math.abs(c.value)>1),I=ve(()=>{if(!d.value)return!1;const C=OU(f.value,d.el),M=CSe(f.value,d.el);return C-M-Math.abs(c.value)>1});return Gt(()=>ae(t.tag,{class:["v-slide-group",{"v-slide-group--vertical":!f.value,"v-slide-group--has-affixes":O.value,"v-slide-group--is-overflowing":o.value},i.value,t.class],style:t.style,tabindex:_.value||a.selected.value.length?-1:0,onFocus:U},{default:()=>[O.value&&ae("div",{key:"prev",class:["v-slide-group__prev",{"v-slide-group__prev--disabled":!R.value}],onMousedown:S,onClick:()=>R.value&&F("prev")},[r.prev?.(P.value)??ae(SU,null,{default:()=>[ae(Hr,{icon:n.value?t.nextIcon:t.prevIcon},null)]})]),ae("div",{key:"container",ref:d,class:"v-slide-group__container",onScroll:k},[ae("div",{ref:m,class:"v-slide-group__content",onFocusin:B,onFocusout:D,onKeydown:T},[r.default?.(P.value)])]),O.value&&ae("div",{key:"next",class:["v-slide-group__next",{"v-slide-group__next--disabled":!I.value}],onMousedown:S,onClick:()=>I.value&&F("next")},[r.next?.(P.value)??ae(SU,null,{default:()=>[ae(Hr,{icon:n.value?t.prevIcon:t.nextIcon},null)]})])]})),{selected:a.selected,scrollTo:F,scrollOffset:c,focus:A,hasPrev:R,hasNext:I}}}),cie=Symbol.for("vuetify:v-chip-group"),PSe=et({column:Boolean,filter:Boolean,valueComparator:{type:Function,default:cu},...oie(),...Qt(),...aO({selectedClass:"v-chip--selected"}),...ri(),...Ei(),...md({variant:"tonal"})},"VChipGroup");_t()({name:"VChipGroup",props:PSe(),emits:{"update:modelValue":t=>!0},setup(t,e){let{slots:r}=e;const{themeClasses:n}=Yi(t),{isSelected:i,select:s,next:a,prev:o,selected:c}=B8(t,cie);return Np({VChip:{color:Nt(t,"color"),disabled:Nt(t,"disabled"),filter:Nt(t,"filter"),variant:Nt(t,"variant")}}),Gt(()=>{const u=BU.filterProps(t);return ae(BU,zt(u,{class:["v-chip-group",{"v-chip-group--column":t.column},n.value,t.class],style:t.style}),{default:()=>[r.default?.({isSelected:i,select:s,next:a,prev:o,selected:c.value})]})}),{}}});const RSe=et({activeClass:String,appendAvatar:String,appendIcon:$r,closable:Boolean,closeIcon:{type:$r,default:"$delete"},closeLabel:{type:String,default:"$vuetify.close"},draggable:Boolean,filter:Boolean,filterIcon:{type:$r,default:"$complete"},label:Boolean,link:{type:Boolean,default:void 0},pill:Boolean,prependAvatar:String,prependIcon:$r,ripple:{type:[Boolean,Object],default:!0},text:{type:[String,Number,Boolean],default:void 0},modelValue:{type:Boolean,default:!0},onClick:ba(),onClickOnce:ba(),...hd(),...Qt(),...bl(),...h0(),...oO(),...Sc(),...L8(),...ky(),...ri({tag:"span"}),...Ei(),...md({variant:"tonal"})},"VChip"),OSe=_t()({name:"VChip",directives:{Ripple:Ay},props:RSe(),emits:{"click:close":t=>!0,"update:modelValue":t=>!0,"group:selected":t=>!0,click:t=>!0},setup(t,e){let{attrs:r,emit:n,slots:i}=e;const{t:s}=u8(),{borderClasses:a}=pd(t),{colorClasses:o,colorStyles:c,variantClasses:u}=Ey(t),{densityClasses:l}=Lu(t),{elevationClasses:f}=p0(t),{roundedClasses:d}=Ec(t),{sizeClasses:h}=Ty(t),{themeClasses:m}=Yi(t),p=si(t,"modelValue"),g=cO(t,cie,!1),v=F8(t,r),y=ve(()=>t.link!==!1&&v.isLink.value),b=ve(()=>!t.disabled&&t.link!==!1&&(!!g||t.link||v.isClickable.value)),_=ve(()=>({"aria-label":s(t.closeLabel),onClick(k){k.preventDefault(),k.stopPropagation(),p.value=!1,n("click:close",k)}}));function x(k){n("click",k),b.value&&(v.navigate?.(k),g?.toggle())}function E(k){(k.key==="Enter"||k.key===" ")&&(k.preventDefault(),x(k))}return()=>{const k=v.isLink.value?"a":t.tag,B=!!(t.appendIcon||t.appendAvatar),D=!!(B||i.append),z=!!(i.close||t.closable),U=!!(i.filter||t.filter)&&g,S=!!(t.prependIcon||t.prependAvatar),T=!!(S||i.prepend),w=!g||g.isSelected.value;return p.value&&us(ae(k,zt({class:["v-chip",{"v-chip--disabled":t.disabled,"v-chip--label":t.label,"v-chip--link":b.value,"v-chip--filter":U,"v-chip--pill":t.pill,[`${t.activeClass}`]:t.activeClass&&v.isActive?.value},m.value,a.value,w?o.value:void 0,l.value,f.value,d.value,h.value,u.value,g?.selectedClass.value,t.class],style:[w?c.value:void 0,t.style],disabled:t.disabled||void 0,draggable:t.draggable,tabindex:b.value?0:void 0,onClick:x,onKeydown:b.value&&!y.value&&E},v.linkProps),{default:()=>[Sy(b.value,"v-chip"),U&&ae(Cne,{key:"filter"},{default:()=>[us(ae("div",{class:"v-chip__filter"},[i.filter?ae(Di,{key:"filter-defaults",disabled:!t.filterIcon,defaults:{VIcon:{icon:t.filterIcon}}},i.filter):ae(Hr,{key:"filter-icon",icon:t.filterIcon},null)]),[[bu,g.isSelected.value]])]}),T&&ae("div",{key:"prepend",class:"v-chip__prepend"},[i.prepend?ae(Di,{key:"prepend-defaults",disabled:!S,defaults:{VAvatar:{image:t.prependAvatar,start:!0},VIcon:{icon:t.prependIcon,start:!0}}},i.prepend):ae(ar,null,[t.prependIcon&&ae(Hr,{key:"prepend-icon",icon:t.prependIcon,start:!0},null),t.prependAvatar&&ae(Oh,{key:"prepend-avatar",image:t.prependAvatar,start:!0},null)])]),ae("div",{class:"v-chip__content","data-no-activator":""},[i.default?.({isSelected:g?.isSelected.value,selectedClass:g?.selectedClass.value,select:g?.select,toggle:g?.toggle,value:g?.value.value,disabled:t.disabled})??Rr(t.text)]),D&&ae("div",{key:"append",class:"v-chip__append"},[i.append?ae(Di,{key:"append-defaults",disabled:!B,defaults:{VAvatar:{end:!0,image:t.appendAvatar},VIcon:{end:!0,icon:t.appendIcon}}},i.append):ae(ar,null,[t.appendIcon&&ae(Hr,{key:"append-icon",end:!0,icon:t.appendIcon},null),t.appendAvatar&&ae(Oh,{key:"append-avatar",end:!0,image:t.appendAvatar},null)])]),z&&ae("button",zt({key:"close",class:"v-chip__close",type:"button","data-testid":"close-chip"},_.value),[i.close?ae(Di,{key:"close-defaults",defaults:{VIcon:{icon:t.closeIcon,size:"x-small"}}},i.close):ae(Hr,{key:"close-icon",icon:t.closeIcon,size:"x-small"},null)])]}),[[ud("ripple"),b.value&&t.ripple,null]])}}}),BSe=et({renderless:Boolean,...Qt()},"VVirtualScrollItem"),DSe=_t()({name:"VVirtualScrollItem",inheritAttrs:!1,props:BSe(),emits:{"update:height":t=>!0},setup(t,e){let{attrs:r,emit:n,slots:i}=e;const{resizeRef:s,contentRect:a}=H1(void 0,"border");Ft(()=>a.value?.height,o=>{o!=null&&n("update:height",o)}),Gt(()=>t.renderless?ae(ar,null,[i.default?.({itemRef:s})]):ae("div",zt({ref:s,class:["v-virtual-scroll__item",t.class],style:t.style},r),[i.default?.()]))}}),MSe=-1,NSe=1,Y7=100,FSe=et({itemHeight:{type:[Number,String],default:null},height:[Number,String]},"virtual");function LSe(t,e){const r=Bu(),n=Dt(0);$i(()=>{n.value=parseFloat(t.itemHeight||0)});const i=Dt(0),s=Dt(Math.ceil((parseInt(t.height)||r.height.value)/(n.value||16))||1),a=Dt(0),o=Dt(0),c=ze(),u=ze();let l=0;const{resizeRef:f,contentRect:d}=H1();$i(()=>{f.value=c.value});const h=ve(()=>c.value===document.documentElement?r.height.value:d.value?.height||parseInt(t.height)||0),m=ve(()=>!!(c.value&&u.value&&h.value&&n.value));let p=Array.from({length:e.value.length}),g=Array.from({length:e.value.length});const v=Dt(0);let y=-1;function b(I){return p[I]||n.value}const _=Fve(()=>{const I=performance.now();g[0]=0;const C=e.value.length;for(let M=1;M<=C-1;M++)g[M]=(g[M-1]||0)+b(M-1);v.value=Math.max(v.value,performance.now()-I)},v),x=Ft(m,I=>{I&&(x(),l=u.value.offsetTop,_.immediate(),F(),~y&&Cn(()=>{Lr&&window.requestAnimationFrame(()=>{O(y),y=-1})}))});ka(()=>{_.clear()});function E(I,C){const M=p[I],L=n.value;n.value=L?Math.min(n.value,C):C,(M!==C||L!==n.value)&&(p[I]=C,_())}function k(I){return I=lu(I,0,e.value.length-1),g[I]||0}function B(I){return $Se(g,I)}let D=0,z=0,U=0;Ft(h,(I,C)=>{C&&(F(),I<C&&requestAnimationFrame(()=>{z=0,F()}))});let S=-1;function T(){if(!c.value||!u.value)return;const I=c.value.scrollTop,C=performance.now();C-U>500?(z=Math.sign(I-D),l=u.value.offsetTop):z=I-D,D=I,U=C,window.clearTimeout(S),S=window.setTimeout(w,500),F()}function w(){!c.value||!u.value||(z=0,U=0,window.clearTimeout(S),F())}let A=-1;function F(){cancelAnimationFrame(A),A=requestAnimationFrame(P)}function P(){if(!c.value||!h.value)return;const I=D-l,C=Math.sign(z),M=Math.max(0,I-Y7),L=lu(B(M),0,e.value.length),N=I+h.value+Y7,H=lu(B(N)+1,L+1,e.value.length);if((C!==MSe||L<i.value)&&(C!==NSe||H>s.value)){const W=k(i.value)-k(L),q=k(H)-k(s.value);Math.max(W,q)>Y7?(i.value=L,s.value=H):(L<=0&&(i.value=L),H>=e.value.length&&(s.value=H))}a.value=k(i.value),o.value=k(e.value.length)-k(s.value)}function O(I){const C=k(I);!c.value||I&&!C?y=I:c.value.scrollTop=C}const R=ve(()=>e.value.slice(i.value,s.value).map((I,C)=>({raw:I,index:C+i.value,key:uee(I)&&"value"in I?I.value:C+i.value})));return Ft(e,()=>{p=Array.from({length:e.value.length}),g=Array.from({length:e.value.length}),_.immediate(),F()},{deep:!0}),{calculateVisibleItems:F,containerRef:c,markerRef:u,computedItems:R,paddingTop:a,paddingBottom:o,scrollToIndex:O,handleScroll:T,handleScrollend:w,handleItemResize:E}}function $Se(t,e){let r=t.length-1,n=0,i=0,s=null,a=-1;if(t[r]<e)return r;for(;n<=r;)if(i=n+r>>1,s=t[i],s>e)r=i-1;else if(s<e)a=i,n=i+1;else return s===e?i:n;return a}const USe=et({items:{type:Array,default:()=>[]},renderless:Boolean,...FSe(),...Qt(),...wl()},"VVirtualScroll"),jSe=_t()({name:"VVirtualScroll",props:USe(),setup(t,e){let{slots:r}=e;const n=Si("VVirtualScroll"),{dimensionStyles:i}=_l(t),{calculateVisibleItems:s,containerRef:a,markerRef:o,handleScroll:c,handleScrollend:u,handleItemResize:l,scrollToIndex:f,paddingTop:d,paddingBottom:h,computedItems:m}=LSe(t,Nt(t,"items"));return Ih(()=>t.renderless,()=>{function p(){const v=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1)?"addEventListener":"removeEventListener";a.value===document.documentElement?(document[v]("scroll",c,{passive:!0}),document[v]("scrollend",u)):(a.value?.[v]("scroll",c,{passive:!0}),a.value?.[v]("scrollend",u))}hn(()=>{a.value=Pee(n.vnode.el,!0),p(!0)}),ka(p)}),Gt(()=>{const p=m.value.map(g=>ae(DSe,{key:g.key,renderless:t.renderless,"onUpdate:height":v=>l(g.index,v)},{default:v=>r.default?.({item:g.raw,index:g.index,...v})}));return t.renderless?ae(ar,null,[ae("div",{ref:o,class:"v-virtual-scroll__spacer",style:{paddingTop:Ht(d.value)}},null),p,ae("div",{class:"v-virtual-scroll__spacer",style:{paddingBottom:Ht(h.value)}},null)]):ae("div",{ref:a,class:["v-virtual-scroll",t.class],onScrollPassive:c,onScrollend:u,style:[i.value,t.style]},[ae("div",{ref:o,class:"v-virtual-scroll__container",style:{paddingTop:Ht(d.value),paddingBottom:Ht(h.value)}},[p])])}),{calculateVisibleItems:s,scrollToIndex:f}}});function VSe(t,e){const r=Dt(!1);let n;function i(o){cancelAnimationFrame(n),r.value=!0,n=requestAnimationFrame(()=>{n=requestAnimationFrame(()=>{r.value=!1})})}async function s(){await new Promise(o=>requestAnimationFrame(o)),await new Promise(o=>requestAnimationFrame(o)),await new Promise(o=>requestAnimationFrame(o)),await new Promise(o=>{if(r.value){const c=Ft(r,()=>{c(),o()})}else o()})}async function a(o){if(o.key==="Tab"&&e.value?.focus(),!["PageDown","PageUp","Home","End"].includes(o.key))return;const c=t.value?.$el;if(!c)return;(o.key==="Home"||o.key==="End")&&c.scrollTo({top:o.key==="Home"?0:c.scrollHeight,behavior:"smooth"}),await s();const u=c.querySelectorAll(":scope > :not(.v-virtual-scroll__spacer)");if(o.key==="PageDown"||o.key==="Home"){const l=c.getBoundingClientRect().top;for(const f of u)if(f.getBoundingClientRect().top>=l){f.focus();break}}else{const l=c.getBoundingClientRect().bottom;for(const f of[...u].reverse())if(f.getBoundingClientRect().bottom<=l){f.focus();break}}}return{onScrollPassive:i,onKeydown:a}}const qSe=et({chips:Boolean,closableChips:Boolean,closeText:{type:String,default:"$vuetify.close"},openText:{type:String,default:"$vuetify.open"},eager:Boolean,hideNoData:Boolean,hideSelected:Boolean,listProps:{type:Object},menu:Boolean,menuIcon:{type:$r,default:"$dropdown"},menuProps:{type:Object},multiple:Boolean,noDataText:{type:String,default:"$vuetify.noDataText"},openOnClear:Boolean,itemColor:String,...jne({itemChildren:!1})},"Select"),zSe=et({...qSe(),...Mp(tie({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...Cy({transition:{component:vO}})},"VSelect"),HSe=_t()({name:"VSelect",props:zSe(),emits:{"update:focused":t=>!0,"update:modelValue":t=>!0,"update:menu":t=>!0},setup(t,e){let{slots:r}=e;const{t:n}=u8(),i=ze(),s=ze(),a=ze(),o=si(t,"menu"),c=ve({get:()=>o.value,set:R=>{o.value&&!R&&s.value?.openChildren.size||(o.value=R)}}),{items:u,transformIn:l,transformOut:f}=M9e(t),d=si(t,"modelValue",[],R=>l(R===null?[null]:oc(R)),R=>{const I=f(R);return t.multiple?I:I[0]??null}),h=ve(()=>typeof t.counterValue=="function"?t.counterValue(d.value):typeof t.counterValue=="number"?t.counterValue:d.value.length),m=eie(t),p=ve(()=>d.value.map(R=>R.value)),g=Dt(!1),v=ve(()=>c.value?t.closeText:t.openText);let y="",b;const _=ve(()=>t.hideSelected?u.value.filter(R=>!d.value.some(I=>(t.valueComparator||cu)(I,R))):u.value),x=ve(()=>t.hideNoData&&!_.value.length||m.isReadonly.value||m.isDisabled.value),E=ve(()=>({...t.menuProps,activatorProps:{...t.menuProps?.activatorProps||{},"aria-haspopup":"listbox"}})),k=ze(),B=VSe(k,i);function D(R){t.openOnClear&&(c.value=!0)}function z(){x.value||(c.value=!c.value)}function U(R){XN(R)&&S(R)}function S(R){if(!R.key||m.isReadonly.value)return;["Enter"," ","ArrowDown","ArrowUp","Home","End"].includes(R.key)&&R.preventDefault(),["Enter","ArrowDown"," "].includes(R.key)&&(c.value=!0),["Escape","Tab"].includes(R.key)&&(c.value=!1),R.key==="Home"?k.value?.focus("first"):R.key==="End"&&k.value?.focus("last");const I=1e3;if(!XN(R))return;const C=performance.now();C-b>I&&(y=""),y+=R.key.toLowerCase(),b=C;const M=u.value.find(L=>L.title.toLowerCase().startsWith(y));if(M!==void 0){d.value=[M];const L=_.value.indexOf(M);Lr&&window.requestAnimationFrame(()=>{L>=0&&a.value?.scrollToIndex(L)})}}function T(R){let I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!R.props.disabled)if(t.multiple){const C=d.value.findIndex(L=>(t.valueComparator||cu)(L.value,R.value)),M=I??!~C;if(~C){const L=M?[...d.value,R]:[...d.value];L.splice(C,1),d.value=L}else M&&(d.value=[...d.value,R])}else{const C=I!==!1;d.value=C?[R]:[],Cn(()=>{c.value=!1})}}function w(R){k.value?.$el.contains(R.relatedTarget)||(c.value=!1)}function A(){t.eager&&a.value?.calculateVisibleItems()}function F(){g.value&&i.value?.focus()}function P(R){g.value=!0}function O(R){if(R==null)d.value=[];else if(q3(i.value,":autofill")||q3(i.value,":-webkit-autofill")){const I=u.value.find(C=>C.title===R);I&&T(I)}else i.value&&(i.value.value="")}return Ft(c,()=>{if(!t.hideSelected&&c.value&&d.value.length){const R=_.value.findIndex(I=>d.value.some(C=>(t.valueComparator||cu)(C.value,I.value)));Lr&&window.requestAnimationFrame(()=>{R>=0&&a.value?.scrollToIndex(R)})}}),Ft(()=>t.items,(R,I)=>{c.value||g.value&&!I.length&&R.length&&(c.value=!0)}),Gt(()=>{const R=!!(t.chips||r.chip),I=!!(!t.hideNoData||_.value.length||r["prepend-item"]||r["append-item"]||r["no-data"]),C=d.value.length>0,M=d4.filterProps(t),L=C||!g.value&&t.label&&!t.persistentPlaceholder?void 0:t.placeholder;return ae(d4,zt({ref:i},M,{modelValue:d.value.map(N=>N.props.value).join(", "),"onUpdate:modelValue":O,focused:g.value,"onUpdate:focused":N=>g.value=N,validationValue:d.externalValue,counterValue:h.value,dirty:C,class:["v-select",{"v-select--active-menu":c.value,"v-select--chips":!!t.chips,[`v-select--${t.multiple?"multiple":"single"}`]:!0,"v-select--selected":d.value.length,"v-select--selection-slot":!!r.selection},t.class],style:t.style,inputmode:"none",placeholder:L,"onClick:clear":D,"onMousedown:control":z,onBlur:w,onKeydown:S,"aria-label":n(v.value),title:n(v.value)}),{...r,default:()=>ae(ar,null,[ae(u4,zt({ref:s,modelValue:c.value,"onUpdate:modelValue":N=>c.value=N,activator:"parent",contentClass:"v-select__content",disabled:x.value,eager:t.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:t.transition,onAfterEnter:A,onAfterLeave:F},E.value),{default:()=>[I&&ae(ep,zt({ref:k,selected:p.value,selectStrategy:t.multiple?"independent":"single-independent",onMousedown:N=>N.preventDefault(),onKeydown:U,onFocusin:P,tabindex:"-1","aria-live":"polite",color:t.itemColor??t.color},B,t.listProps),{default:()=>[r["prepend-item"]?.(),!_.value.length&&!t.hideNoData&&(r["no-data"]?.()??ae(Ys,{key:"no-data",title:n(t.noDataText)},null)),ae(jSe,{ref:a,renderless:!0,items:_.value},{default:N=>{let{item:H,index:W,itemRef:q}=N;const G=zt(H.props,{ref:q,key:H.value,onClick:()=>T(H,null)});return r.item?.({item:H,index:W,props:G})??ae(Ys,zt(G,{role:"option"}),{prepend:Y=>{let{isSelected:te}=Y;return ae(ar,null,[t.multiple&&!t.hideSelected?ae(kSe,{key:H.value,modelValue:te,ripple:!1,tabindex:"-1"},null):void 0,H.props.prependAvatar&&ae(Oh,{image:H.props.prependAvatar},null),H.props.prependIcon&&ae(Hr,{icon:H.props.prependIcon},null)])}})}}),r["append-item"]?.()]})]}),d.value.map((N,H)=>{function W(te){te.stopPropagation(),te.preventDefault(),T(N,!1)}const q={"onClick:close":W,onKeydown(te){te.key!=="Enter"&&te.key!==" "||(te.preventDefault(),te.stopPropagation(),W(te))},onMousedown(te){te.preventDefault(),te.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},G=R?!!r.chip:!!r.selection,Y=G?bee(R?r.chip({item:N,index:H,props:q}):r.selection({item:N,index:H})):void 0;if(!(G&&!Y))return ae("div",{key:N.value,class:"v-select__selection"},[R?r.chip?ae(Di,{key:"chip-defaults",defaults:{VChip:{closable:t.closableChips,size:"small",text:N.title}}},{default:()=>[Y]}):ae(OSe,zt({key:"chip",closable:t.closableChips,size:"small",text:N.title,disabled:N.props.disabled},q),null):Y??ae("span",{class:"v-select__selection-text"},[N.title,t.multiple&&H<d.value.length-1&&ae("span",{class:"v-select__selection-comma"},[zr(",")])])])})]),"append-inner":function(){for(var N=arguments.length,H=new Array(N),W=0;W<N;W++)H[W]=arguments[W];return ae(ar,null,[r["append-inner"]?.(...H),t.menuIcon?ae(Hr,{class:"v-select__menu-icon",icon:t.menuIcon},null):void 0])}})}),$8({isFocused:g,menu:c,select:T},i)}}),WSe=Pn({__name:"SectionAccueil",props:{nEtapes:{},etape:{}},emits:["retour","avancer"],setup(t,{emit:e}){const r=e,{mdAndUp:n}=Bu(),{_:i}=Fu(),{$:s}=i({}),a=[{nom:"egu25",logo:qt(()=>import("./logo egu 25-DGci1IA7.js"),[])},{nom:"nsih24",logo:qt(()=>import("./logo nsih 2024-D3_acZvx.js"),[])},{nom:"egu24",logo:qt(()=>import("./logo cours egu24-DTKkpUat.js"),[])}],o=ze(a[0].nom),c=ze();return $i(async()=>{c.value=(await a.find(u=>u.nom===o.value)?.logo)?.default}),(u,l)=>(Vt(),hr(Iy,{"n-etapes":u.nEtapes,etape:u.etape,onRetour:l[1]||(l[1]=()=>r("retour")),onAvancer:l[2]||(l[2]=()=>r("avancer"))},{default:Ge(()=>[ae(Gi,{cols:Ve(n)?4:12,class:"pa-6 my-auto"},{default:Ge(()=>[ae(Q1,{height:"250",src:zbe})]),_:1},8,["cols"]),ae(Gi,{cols:Ve(n)?8:12,class:rc({"my-auto":!0,"text-center":!Ve(n),"pt-0":!0})},{default:Ge(()=>[ae(Q1,{class:rc({"mx-4":!Ve(n)}),src:c.value,height:"150",width:Ve(n)?600:void 0},null,8,["class","src","width"]),bi("div",{class:rc({"text-h4":Ve(n),"text-h5":!Ve(n),"font-weight-light":!0,"mb-n1":!0,"mx-4":!Ve(n)})},[ae(HSe,{modelValue:o.value,"onUpdate:modelValue":l[0]||(l[0]=f=>o.value=f),items:a.map(f=>f.nom),variant:"plain"},{selection:Ge(({item:f})=>[bi("span",{class:rc({"text-h4":Ve(n),"text-h5":!Ve(n),"font-weight-light":!0})},Rr(Ve(s)(`accueil.titre.${f.value}`)),3)]),_:1},8,["modelValue","items"])],2),ae(Wa,{"prepend-icon":"mdi-earth",class:"my-6"},{default:Ge(()=>[zr(Rr(Ve(s)("accueil.changerLangue"))+" ",1),ae(rie)]),_:1})]),_:1},8,["cols","class"])]),_:1},8,["n-etapes","etape"]))}});function lie(t,e){return function(){return t.apply(e,arguments)}}const{toString:GSe}=Object.prototype,{getPrototypeOf:kO}=Object,U8=(t=>e=>{const r=GSe.call(e);return t[r]||(t[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),kc=t=>(t=t.toLowerCase(),e=>U8(e)===t),j8=t=>e=>typeof e===t,{isArray:Gp}=Array,gv=j8("undefined");function KSe(t){return t!==null&&!gv(t)&&t.constructor!==null&&!gv(t.constructor)&&Xa(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const uie=kc("ArrayBuffer");function XSe(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&uie(t.buffer),e}const YSe=j8("string"),Xa=j8("function"),fie=j8("number"),V8=t=>t!==null&&typeof t=="object",ZSe=t=>t===!0||t===!1,l3=t=>{if(U8(t)!=="object")return!1;const e=kO(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},JSe=kc("Date"),QSe=kc("File"),eEe=kc("Blob"),tEe=kc("FileList"),rEe=t=>V8(t)&&Xa(t.pipe),nEe=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||Xa(t.append)&&((e=U8(t))==="formdata"||e==="object"&&Xa(t.toString)&&t.toString()==="[object FormData]"))},iEe=kc("URLSearchParams"),[sEe,aEe,oEe,cEe]=["ReadableStream","Request","Response","Headers"].map(kc),lEe=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Py(t,e,{allOwnKeys:r=!1}={}){if(t===null||typeof t>"u")return;let n,i;if(typeof t!="object"&&(t=[t]),Gp(t))for(n=0,i=t.length;n<i;n++)e.call(null,t[n],n,t);else{const s=r?Object.getOwnPropertyNames(t):Object.keys(t),a=s.length;let o;for(n=0;n<a;n++)o=s[n],e.call(null,t[o],o,t)}}function die(t,e){e=e.toLowerCase();const r=Object.keys(t);let n=r.length,i;for(;n-- >0;)if(i=r[n],e===i.toLowerCase())return i;return null}const eh=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:Bi,hie=t=>!gv(t)&&t!==eh;function MC(){const{caseless:t}=hie(this)&&this||{},e={},r=(n,i)=>{const s=t&&die(e,i)||i;l3(e[s])&&l3(n)?e[s]=MC(e[s],n):l3(n)?e[s]=MC({},n):Gp(n)?e[s]=n.slice():e[s]=n};for(let n=0,i=arguments.length;n<i;n++)arguments[n]&&Py(arguments[n],r);return e}const uEe=(t,e,r,{allOwnKeys:n}={})=>(Py(e,(i,s)=>{r&&Xa(i)?t[s]=lie(i,r):t[s]=i},{allOwnKeys:n}),t),fEe=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),dEe=(t,e,r,n)=>{t.prototype=Object.create(e.prototype,n),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),r&&Object.assign(t.prototype,r)},hEe=(t,e,r,n)=>{let i,s,a;const o={};if(e=e||{},t==null)return e;do{for(i=Object.getOwnPropertyNames(t),s=i.length;s-- >0;)a=i[s],(!n||n(a,t,e))&&!o[a]&&(e[a]=t[a],o[a]=!0);t=r!==!1&&kO(t)}while(t&&(!r||r(t,e))&&t!==Object.prototype);return e},pEe=(t,e,r)=>{t=String(t),(r===void 0||r>t.length)&&(r=t.length),r-=e.length;const n=t.indexOf(e,r);return n!==-1&&n===r},mEe=t=>{if(!t)return null;if(Gp(t))return t;let e=t.length;if(!fie(e))return null;const r=new Array(e);for(;e-- >0;)r[e]=t[e];return r},gEe=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&kO(Uint8Array)),vEe=(t,e)=>{const n=(t&&t[Symbol.iterator]).call(t);let i;for(;(i=n.next())&&!i.done;){const s=i.value;e.call(t,s[0],s[1])}},yEe=(t,e)=>{let r;const n=[];for(;(r=t.exec(e))!==null;)n.push(r);return n},bEe=kc("HTMLFormElement"),wEe=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,n,i){return n.toUpperCase()+i}),DU=(({hasOwnProperty:t})=>(e,r)=>t.call(e,r))(Object.prototype),_Ee=kc("RegExp"),pie=(t,e)=>{const r=Object.getOwnPropertyDescriptors(t),n={};Py(r,(i,s)=>{let a;(a=e(i,s,t))!==!1&&(n[s]=a||i)}),Object.defineProperties(t,n)},xEe=t=>{pie(t,(e,r)=>{if(Xa(t)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const n=t[r];if(Xa(n)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},SEe=(t,e)=>{const r={},n=i=>{i.forEach(s=>{r[s]=!0})};return Gp(t)?n(t):n(String(t).split(e)),r},EEe=()=>{},kEe=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function TEe(t){return!!(t&&Xa(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const AEe=t=>{const e=new Array(10),r=(n,i)=>{if(V8(n)){if(e.indexOf(n)>=0)return;if(!("toJSON"in n)){e[i]=n;const s=Gp(n)?[]:{};return Py(n,(a,o)=>{const c=r(a,i+1);!gv(c)&&(s[o]=c)}),e[i]=void 0,s}}return n};return r(t,0)},CEe=kc("AsyncFunction"),IEe=t=>t&&(V8(t)||Xa(t))&&Xa(t.then)&&Xa(t.catch),mie=((t,e)=>t?setImmediate:e?((r,n)=>(eh.addEventListener("message",({source:i,data:s})=>{i===eh&&s===r&&n.length&&n.shift()()},!1),i=>{n.push(i),eh.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",Xa(eh.postMessage)),PEe=typeof queueMicrotask<"u"?queueMicrotask.bind(eh):typeof fn<"u"&&fn.nextTick||mie,Fe={isArray:Gp,isArrayBuffer:uie,isBuffer:KSe,isFormData:nEe,isArrayBufferView:XSe,isString:YSe,isNumber:fie,isBoolean:ZSe,isObject:V8,isPlainObject:l3,isReadableStream:sEe,isRequest:aEe,isResponse:oEe,isHeaders:cEe,isUndefined:gv,isDate:JSe,isFile:QSe,isBlob:eEe,isRegExp:_Ee,isFunction:Xa,isStream:rEe,isURLSearchParams:iEe,isTypedArray:gEe,isFileList:tEe,forEach:Py,merge:MC,extend:uEe,trim:lEe,stripBOM:fEe,inherits:dEe,toFlatObject:hEe,kindOf:U8,kindOfTest:kc,endsWith:pEe,toArray:mEe,forEachEntry:vEe,matchAll:yEe,isHTMLForm:bEe,hasOwnProperty:DU,hasOwnProp:DU,reduceDescriptors:pie,freezeMethods:xEe,toObjectSet:SEe,toCamelCase:wEe,noop:EEe,toFiniteNumber:kEe,findKey:die,global:eh,isContextDefined:hie,isSpecCompliantForm:TEe,toJSONObject:AEe,isAsyncFn:CEe,isThenable:IEe,setImmediate:mie,asap:PEe};function Jt(t,e,r,n,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),r&&(this.config=r),n&&(this.request=n),i&&(this.response=i,this.status=i.status?i.status:null)}Fe.inherits(Jt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Fe.toJSONObject(this.config),code:this.code,status:this.status}}});const gie=Jt.prototype,vie={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{vie[t]={value:t}});Object.defineProperties(Jt,vie);Object.defineProperty(gie,"isAxiosError",{value:!0});Jt.from=(t,e,r,n,i,s)=>{const a=Object.create(gie);return Fe.toFlatObject(t,a,function(c){return c!==Error.prototype},o=>o!=="isAxiosError"),Jt.call(a,t.message,e,r,n,i),a.cause=t,a.name=t.name,s&&Object.assign(a,s),a};const REe=null;function NC(t){return Fe.isPlainObject(t)||Fe.isArray(t)}function yie(t){return Fe.endsWith(t,"[]")?t.slice(0,-2):t}function MU(t,e,r){return t?t.concat(e).map(function(i,s){return i=yie(i),!r&&s?"["+i+"]":i}).join(r?".":""):e}function OEe(t){return Fe.isArray(t)&&!t.some(NC)}const BEe=Fe.toFlatObject(Fe,{},null,function(e){return/^is[A-Z]/.test(e)});function q8(t,e,r){if(!Fe.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,r=Fe.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(p,g){return!Fe.isUndefined(g[p])});const n=r.metaTokens,i=r.visitor||l,s=r.dots,a=r.indexes,c=(r.Blob||typeof Blob<"u"&&Blob)&&Fe.isSpecCompliantForm(e);if(!Fe.isFunction(i))throw new TypeError("visitor must be a function");function u(m){if(m===null)return"";if(Fe.isDate(m))return m.toISOString();if(!c&&Fe.isBlob(m))throw new Jt("Blob is not supported. Use a Buffer instead.");return Fe.isArrayBuffer(m)||Fe.isTypedArray(m)?c&&typeof Blob=="function"?new Blob([m]):Me.from(m):m}function l(m,p,g){let v=m;if(m&&!g&&typeof m=="object"){if(Fe.endsWith(p,"{}"))p=n?p:p.slice(0,-2),m=JSON.stringify(m);else if(Fe.isArray(m)&&OEe(m)||(Fe.isFileList(m)||Fe.endsWith(p,"[]"))&&(v=Fe.toArray(m)))return p=yie(p),v.forEach(function(b,_){!(Fe.isUndefined(b)||b===null)&&e.append(a===!0?MU([p],_,s):a===null?p:p+"[]",u(b))}),!1}return NC(m)?!0:(e.append(MU(g,p,s),u(m)),!1)}const f=[],d=Object.assign(BEe,{defaultVisitor:l,convertValue:u,isVisitable:NC});function h(m,p){if(!Fe.isUndefined(m)){if(f.indexOf(m)!==-1)throw Error("Circular reference detected in "+p.join("."));f.push(m),Fe.forEach(m,function(v,y){(!(Fe.isUndefined(v)||v===null)&&i.call(e,v,Fe.isString(y)?y.trim():y,p,d))===!0&&h(v,p?p.concat(y):[y])}),f.pop()}}if(!Fe.isObject(t))throw new TypeError("data must be an object");return h(t),e}function NU(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(n){return e[n]})}function TO(t,e){this._pairs=[],t&&q8(t,this,e)}const bie=TO.prototype;bie.append=function(e,r){this._pairs.push([e,r])};bie.toString=function(e){const r=e?function(n){return e.call(this,n,NU)}:NU;return this._pairs.map(function(i){return r(i[0])+"="+r(i[1])},"").join("&")};function DEe(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function wie(t,e,r){if(!e)return t;const n=r&&r.encode||DEe;Fe.isFunction(r)&&(r={serialize:r});const i=r&&r.serialize;let s;if(i?s=i(e,r):s=Fe.isURLSearchParams(e)?e.toString():new TO(e,r).toString(n),s){const a=t.indexOf("#");a!==-1&&(t=t.slice(0,a)),t+=(t.indexOf("?")===-1?"?":"&")+s}return t}class FU{constructor(){this.handlers=[]}use(e,r,n){return this.handlers.push({fulfilled:e,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Fe.forEach(this.handlers,function(n){n!==null&&e(n)})}}const _ie={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},MEe=typeof URLSearchParams<"u"?URLSearchParams:TO,NEe=typeof FormData<"u"?FormData:null,FEe=typeof Blob<"u"?Blob:null,LEe={isBrowser:!0,classes:{URLSearchParams:MEe,FormData:NEe,Blob:FEe},protocols:["http","https","file","blob","url","data"]},AO=typeof window<"u"&&typeof document<"u",FC=typeof navigator=="object"&&navigator||void 0,$Ee=AO&&(!FC||["ReactNative","NativeScript","NS"].indexOf(FC.product)<0),UEe=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",jEe=AO&&window.location.href||"http://localhost",VEe=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:AO,hasStandardBrowserEnv:$Ee,hasStandardBrowserWebWorkerEnv:UEe,navigator:FC,origin:jEe},Symbol.toStringTag,{value:"Module"})),Ps={...VEe,...LEe};function qEe(t,e){return q8(t,new Ps.classes.URLSearchParams,Object.assign({visitor:function(r,n,i,s){return Ps.isNode&&Fe.isBuffer(r)?(this.append(n,r.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},e))}function zEe(t){return Fe.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function HEe(t){const e={},r=Object.keys(t);let n;const i=r.length;let s;for(n=0;n<i;n++)s=r[n],e[s]=t[s];return e}function xie(t){function e(r,n,i,s){let a=r[s++];if(a==="__proto__")return!0;const o=Number.isFinite(+a),c=s>=r.length;return a=!a&&Fe.isArray(i)?i.length:a,c?(Fe.hasOwnProp(i,a)?i[a]=[i[a],n]:i[a]=n,!o):((!i[a]||!Fe.isObject(i[a]))&&(i[a]=[]),e(r,n,i[a],s)&&Fe.isArray(i[a])&&(i[a]=HEe(i[a])),!o)}if(Fe.isFormData(t)&&Fe.isFunction(t.entries)){const r={};return Fe.forEachEntry(t,(n,i)=>{e(zEe(n),i,r,0)}),r}return null}function WEe(t,e,r){if(Fe.isString(t))try{return(e||JSON.parse)(t),Fe.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(t)}const Ry={transitional:_ie,adapter:["xhr","http","fetch"],transformRequest:[function(e,r){const n=r.getContentType()||"",i=n.indexOf("application/json")>-1,s=Fe.isObject(e);if(s&&Fe.isHTMLForm(e)&&(e=new FormData(e)),Fe.isFormData(e))return i?JSON.stringify(xie(e)):e;if(Fe.isArrayBuffer(e)||Fe.isBuffer(e)||Fe.isStream(e)||Fe.isFile(e)||Fe.isBlob(e)||Fe.isReadableStream(e))return e;if(Fe.isArrayBufferView(e))return e.buffer;if(Fe.isURLSearchParams(e))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let o;if(s){if(n.indexOf("application/x-www-form-urlencoded")>-1)return qEe(e,this.formSerializer).toString();if((o=Fe.isFileList(e))||n.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return q8(o?{"files[]":e}:e,c&&new c,this.formSerializer)}}return s||i?(r.setContentType("application/json",!1),WEe(e)):e}],transformResponse:[function(e){const r=this.transitional||Ry.transitional,n=r&&r.forcedJSONParsing,i=this.responseType==="json";if(Fe.isResponse(e)||Fe.isReadableStream(e))return e;if(e&&Fe.isString(e)&&(n&&!this.responseType||i)){const a=!(r&&r.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(o){if(a)throw o.name==="SyntaxError"?Jt.from(o,Jt.ERR_BAD_RESPONSE,this,null,this.response):o}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Ps.classes.FormData,Blob:Ps.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Fe.forEach(["delete","get","head","post","put","patch"],t=>{Ry.headers[t]={}});const GEe=Fe.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),KEe=t=>{const e={};let r,n,i;return t&&t.split(`
`).forEach(function(a){i=a.indexOf(":"),r=a.substring(0,i).trim().toLowerCase(),n=a.substring(i+1).trim(),!(!r||e[r]&&GEe[r])&&(r==="set-cookie"?e[r]?e[r].push(n):e[r]=[n]:e[r]=e[r]?e[r]+", "+n:n)}),e},LU=Symbol("internals");function Rm(t){return t&&String(t).trim().toLowerCase()}function u3(t){return t===!1||t==null?t:Fe.isArray(t)?t.map(u3):String(t)}function XEe(t){const e=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(t);)e[n[1]]=n[2];return e}const YEe=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Z7(t,e,r,n,i){if(Fe.isFunction(n))return n.call(this,e,r);if(i&&(e=r),!!Fe.isString(e)){if(Fe.isString(n))return e.indexOf(n)!==-1;if(Fe.isRegExp(n))return n.test(e)}}function ZEe(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,r,n)=>r.toUpperCase()+n)}function JEe(t,e){const r=Fe.toCamelCase(" "+e);["get","set","has"].forEach(n=>{Object.defineProperty(t,n+r,{value:function(i,s,a){return this[n].call(this,e,i,s,a)},configurable:!0})})}let wa=class{constructor(e){e&&this.set(e)}set(e,r,n){const i=this;function s(o,c,u){const l=Rm(c);if(!l)throw new Error("header name must be a non-empty string");const f=Fe.findKey(i,l);(!f||i[f]===void 0||u===!0||u===void 0&&i[f]!==!1)&&(i[f||c]=u3(o))}const a=(o,c)=>Fe.forEach(o,(u,l)=>s(u,l,c));if(Fe.isPlainObject(e)||e instanceof this.constructor)a(e,r);else if(Fe.isString(e)&&(e=e.trim())&&!YEe(e))a(KEe(e),r);else if(Fe.isHeaders(e))for(const[o,c]of e.entries())s(c,o,n);else e!=null&&s(r,e,n);return this}get(e,r){if(e=Rm(e),e){const n=Fe.findKey(this,e);if(n){const i=this[n];if(!r)return i;if(r===!0)return XEe(i);if(Fe.isFunction(r))return r.call(this,i,n);if(Fe.isRegExp(r))return r.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,r){if(e=Rm(e),e){const n=Fe.findKey(this,e);return!!(n&&this[n]!==void 0&&(!r||Z7(this,this[n],n,r)))}return!1}delete(e,r){const n=this;let i=!1;function s(a){if(a=Rm(a),a){const o=Fe.findKey(n,a);o&&(!r||Z7(n,n[o],o,r))&&(delete n[o],i=!0)}}return Fe.isArray(e)?e.forEach(s):s(e),i}clear(e){const r=Object.keys(this);let n=r.length,i=!1;for(;n--;){const s=r[n];(!e||Z7(this,this[s],s,e,!0))&&(delete this[s],i=!0)}return i}normalize(e){const r=this,n={};return Fe.forEach(this,(i,s)=>{const a=Fe.findKey(n,s);if(a){r[a]=u3(i),delete r[s];return}const o=e?ZEe(s):String(s).trim();o!==s&&delete r[s],r[o]=u3(i),n[o]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const r=Object.create(null);return Fe.forEach(this,(n,i)=>{n!=null&&n!==!1&&(r[i]=e&&Fe.isArray(n)?n.join(", "):n)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,r])=>e+": "+r).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...r){const n=new this(e);return r.forEach(i=>n.set(i)),n}static accessor(e){const n=(this[LU]=this[LU]={accessors:{}}).accessors,i=this.prototype;function s(a){const o=Rm(a);n[o]||(JEe(i,a),n[o]=!0)}return Fe.isArray(e)?e.forEach(s):s(e),this}};wa.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Fe.reduceDescriptors(wa.prototype,({value:t},e)=>{let r=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(n){this[r]=n}}});Fe.freezeMethods(wa);function J7(t,e){const r=this||Ry,n=e||r,i=wa.from(n.headers);let s=n.data;return Fe.forEach(t,function(o){s=o.call(r,s,i.normalize(),e?e.status:void 0)}),i.normalize(),s}function Sie(t){return!!(t&&t.__CANCEL__)}function Kp(t,e,r){Jt.call(this,t??"canceled",Jt.ERR_CANCELED,e,r),this.name="CanceledError"}Fe.inherits(Kp,Jt,{__CANCEL__:!0});function Eie(t,e,r){const n=r.config.validateStatus;!r.status||!n||n(r.status)?t(r):e(new Jt("Request failed with status code "+r.status,[Jt.ERR_BAD_REQUEST,Jt.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function QEe(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function eke(t,e){t=t||10;const r=new Array(t),n=new Array(t);let i=0,s=0,a;return e=e!==void 0?e:1e3,function(c){const u=Date.now(),l=n[s];a||(a=u),r[i]=c,n[i]=u;let f=s,d=0;for(;f!==i;)d+=r[f++],f=f%t;if(i=(i+1)%t,i===s&&(s=(s+1)%t),u-a<e)return;const h=l&&u-l;return h?Math.round(d*1e3/h):void 0}}function tke(t,e){let r=0,n=1e3/e,i,s;const a=(u,l=Date.now())=>{r=l,i=null,s&&(clearTimeout(s),s=null),t.apply(null,u)};return[(...u)=>{const l=Date.now(),f=l-r;f>=n?a(u,l):(i=u,s||(s=setTimeout(()=>{s=null,a(i)},n-f)))},()=>i&&a(i)]}const p4=(t,e,r=3)=>{let n=0;const i=eke(50,250);return tke(s=>{const a=s.loaded,o=s.lengthComputable?s.total:void 0,c=a-n,u=i(c),l=a<=o;n=a;const f={loaded:a,total:o,progress:o?a/o:void 0,bytes:c,rate:u||void 0,estimated:u&&o&&l?(o-a)/u:void 0,event:s,lengthComputable:o!=null,[e?"download":"upload"]:!0};t(f)},r)},$U=(t,e)=>{const r=t!=null;return[n=>e[0]({lengthComputable:r,total:t,loaded:n}),e[1]]},UU=t=>(...e)=>Fe.asap(()=>t(...e)),rke=Ps.hasStandardBrowserEnv?((t,e)=>r=>(r=new URL(r,Ps.origin),t.protocol===r.protocol&&t.host===r.host&&(e||t.port===r.port)))(new URL(Ps.origin),Ps.navigator&&/(msie|trident)/i.test(Ps.navigator.userAgent)):()=>!0,nke=Ps.hasStandardBrowserEnv?{write(t,e,r,n,i,s){const a=[t+"="+encodeURIComponent(e)];Fe.isNumber(r)&&a.push("expires="+new Date(r).toGMTString()),Fe.isString(n)&&a.push("path="+n),Fe.isString(i)&&a.push("domain="+i),s===!0&&a.push("secure"),document.cookie=a.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function ike(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function ske(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function kie(t,e,r){let n=!ike(e);return t&&(n||r==!1)?ske(t,e):e}const jU=t=>t instanceof wa?{...t}:t;function Bh(t,e){e=e||{};const r={};function n(u,l,f,d){return Fe.isPlainObject(u)&&Fe.isPlainObject(l)?Fe.merge.call({caseless:d},u,l):Fe.isPlainObject(l)?Fe.merge({},l):Fe.isArray(l)?l.slice():l}function i(u,l,f,d){if(Fe.isUndefined(l)){if(!Fe.isUndefined(u))return n(void 0,u,f,d)}else return n(u,l,f,d)}function s(u,l){if(!Fe.isUndefined(l))return n(void 0,l)}function a(u,l){if(Fe.isUndefined(l)){if(!Fe.isUndefined(u))return n(void 0,u)}else return n(void 0,l)}function o(u,l,f){if(f in e)return n(u,l);if(f in t)return n(void 0,u)}const c={url:s,method:s,data:s,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:o,headers:(u,l,f)=>i(jU(u),jU(l),f,!0)};return Fe.forEach(Object.keys(Object.assign({},t,e)),function(l){const f=c[l]||i,d=f(t[l],e[l],l);Fe.isUndefined(d)&&f!==o||(r[l]=d)}),r}const Tie=t=>{const e=Bh({},t);let{data:r,withXSRFToken:n,xsrfHeaderName:i,xsrfCookieName:s,headers:a,auth:o}=e;e.headers=a=wa.from(a),e.url=wie(kie(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),o&&a.set("Authorization","Basic "+btoa((o.username||"")+":"+(o.password?unescape(encodeURIComponent(o.password)):"")));let c;if(Fe.isFormData(r)){if(Ps.hasStandardBrowserEnv||Ps.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if((c=a.getContentType())!==!1){const[u,...l]=c?c.split(";").map(f=>f.trim()).filter(Boolean):[];a.setContentType([u||"multipart/form-data",...l].join("; "))}}if(Ps.hasStandardBrowserEnv&&(n&&Fe.isFunction(n)&&(n=n(e)),n||n!==!1&&rke(e.url))){const u=i&&s&&nke.read(s);u&&a.set(i,u)}return e},ake=typeof XMLHttpRequest<"u",oke=ake&&function(t){return new Promise(function(r,n){const i=Tie(t);let s=i.data;const a=wa.from(i.headers).normalize();let{responseType:o,onUploadProgress:c,onDownloadProgress:u}=i,l,f,d,h,m;function p(){h&&h(),m&&m(),i.cancelToken&&i.cancelToken.unsubscribe(l),i.signal&&i.signal.removeEventListener("abort",l)}let g=new XMLHttpRequest;g.open(i.method.toUpperCase(),i.url,!0),g.timeout=i.timeout;function v(){if(!g)return;const b=wa.from("getAllResponseHeaders"in g&&g.getAllResponseHeaders()),x={data:!o||o==="text"||o==="json"?g.responseText:g.response,status:g.status,statusText:g.statusText,headers:b,config:t,request:g};Eie(function(k){r(k),p()},function(k){n(k),p()},x),g=null}"onloadend"in g?g.onloadend=v:g.onreadystatechange=function(){!g||g.readyState!==4||g.status===0&&!(g.responseURL&&g.responseURL.indexOf("file:")===0)||setTimeout(v)},g.onabort=function(){g&&(n(new Jt("Request aborted",Jt.ECONNABORTED,t,g)),g=null)},g.onerror=function(){n(new Jt("Network Error",Jt.ERR_NETWORK,t,g)),g=null},g.ontimeout=function(){let _=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const x=i.transitional||_ie;i.timeoutErrorMessage&&(_=i.timeoutErrorMessage),n(new Jt(_,x.clarifyTimeoutError?Jt.ETIMEDOUT:Jt.ECONNABORTED,t,g)),g=null},s===void 0&&a.setContentType(null),"setRequestHeader"in g&&Fe.forEach(a.toJSON(),function(_,x){g.setRequestHeader(x,_)}),Fe.isUndefined(i.withCredentials)||(g.withCredentials=!!i.withCredentials),o&&o!=="json"&&(g.responseType=i.responseType),u&&([d,m]=p4(u,!0),g.addEventListener("progress",d)),c&&g.upload&&([f,h]=p4(c),g.upload.addEventListener("progress",f),g.upload.addEventListener("loadend",h)),(i.cancelToken||i.signal)&&(l=b=>{g&&(n(!b||b.type?new Kp(null,t,g):b),g.abort(),g=null)},i.cancelToken&&i.cancelToken.subscribe(l),i.signal&&(i.signal.aborted?l():i.signal.addEventListener("abort",l)));const y=QEe(i.url);if(y&&Ps.protocols.indexOf(y)===-1){n(new Jt("Unsupported protocol "+y+":",Jt.ERR_BAD_REQUEST,t));return}g.send(s||null)})},cke=(t,e)=>{const{length:r}=t=t?t.filter(Boolean):[];if(e||r){let n=new AbortController,i;const s=function(u){if(!i){i=!0,o();const l=u instanceof Error?u:this.reason;n.abort(l instanceof Jt?l:new Kp(l instanceof Error?l.message:l))}};let a=e&&setTimeout(()=>{a=null,s(new Jt(`timeout ${e} of ms exceeded`,Jt.ETIMEDOUT))},e);const o=()=>{t&&(a&&clearTimeout(a),a=null,t.forEach(u=>{u.unsubscribe?u.unsubscribe(s):u.removeEventListener("abort",s)}),t=null)};t.forEach(u=>u.addEventListener("abort",s));const{signal:c}=n;return c.unsubscribe=()=>Fe.asap(o),c}},lke=function*(t,e){let r=t.byteLength;if(r<e){yield t;return}let n=0,i;for(;n<r;)i=n+e,yield t.slice(n,i),n=i},uke=async function*(t,e){for await(const r of fke(t))yield*lke(r,e)},fke=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:r,value:n}=await e.read();if(r)break;yield n}}finally{await e.cancel()}},VU=(t,e,r,n)=>{const i=uke(t,e);let s=0,a,o=c=>{a||(a=!0,n&&n(c))};return new ReadableStream({async pull(c){try{const{done:u,value:l}=await i.next();if(u){o(),c.close();return}let f=l.byteLength;if(r){let d=s+=f;r(d)}c.enqueue(new Uint8Array(l))}catch(u){throw o(u),u}},cancel(c){return o(c),i.return()}},{highWaterMark:2})},z8=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",Aie=z8&&typeof ReadableStream=="function",dke=z8&&(typeof TextEncoder=="function"?(t=>e=>t.encode(e))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),Cie=(t,...e)=>{try{return!!t(...e)}catch{return!1}},hke=Aie&&Cie(()=>{let t=!1;const e=new Request(Ps.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e}),qU=64*1024,LC=Aie&&Cie(()=>Fe.isReadableStream(new Response("").body)),m4={stream:LC&&(t=>t.body)};z8&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!m4[e]&&(m4[e]=Fe.isFunction(t[e])?r=>r[e]():(r,n)=>{throw new Jt(`Response type '${e}' is not supported`,Jt.ERR_NOT_SUPPORT,n)})})})(new Response);const pke=async t=>{if(t==null)return 0;if(Fe.isBlob(t))return t.size;if(Fe.isSpecCompliantForm(t))return(await new Request(Ps.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(Fe.isArrayBufferView(t)||Fe.isArrayBuffer(t))return t.byteLength;if(Fe.isURLSearchParams(t)&&(t=t+""),Fe.isString(t))return(await dke(t)).byteLength},mke=async(t,e)=>{const r=Fe.toFiniteNumber(t.getContentLength());return r??pke(e)},gke=z8&&(async t=>{let{url:e,method:r,data:n,signal:i,cancelToken:s,timeout:a,onDownloadProgress:o,onUploadProgress:c,responseType:u,headers:l,withCredentials:f="same-origin",fetchOptions:d}=Tie(t);u=u?(u+"").toLowerCase():"text";let h=cke([i,s&&s.toAbortSignal()],a),m;const p=h&&h.unsubscribe&&(()=>{h.unsubscribe()});let g;try{if(c&&hke&&r!=="get"&&r!=="head"&&(g=await mke(l,n))!==0){let x=new Request(e,{method:"POST",body:n,duplex:"half"}),E;if(Fe.isFormData(n)&&(E=x.headers.get("content-type"))&&l.setContentType(E),x.body){const[k,B]=$U(g,p4(UU(c)));n=VU(x.body,qU,k,B)}}Fe.isString(f)||(f=f?"include":"omit");const v="credentials"in Request.prototype;m=new Request(e,{...d,signal:h,method:r.toUpperCase(),headers:l.normalize().toJSON(),body:n,duplex:"half",credentials:v?f:void 0});let y=await fetch(m);const b=LC&&(u==="stream"||u==="response");if(LC&&(o||b&&p)){const x={};["status","statusText","headers"].forEach(D=>{x[D]=y[D]});const E=Fe.toFiniteNumber(y.headers.get("content-length")),[k,B]=o&&$U(E,p4(UU(o),!0))||[];y=new Response(VU(y.body,qU,k,()=>{B&&B(),p&&p()}),x)}u=u||"text";let _=await m4[Fe.findKey(m4,u)||"text"](y,t);return!b&&p&&p(),await new Promise((x,E)=>{Eie(x,E,{data:_,headers:wa.from(y.headers),status:y.status,statusText:y.statusText,config:t,request:m})})}catch(v){throw p&&p(),v&&v.name==="TypeError"&&/fetch/i.test(v.message)?Object.assign(new Jt("Network Error",Jt.ERR_NETWORK,t,m),{cause:v.cause||v}):Jt.from(v,v&&v.code,t,m)}}),$C={http:REe,xhr:oke,fetch:gke};Fe.forEach($C,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const zU=t=>`- ${t}`,vke=t=>Fe.isFunction(t)||t===null||t===!1,Iie={getAdapter:t=>{t=Fe.isArray(t)?t:[t];const{length:e}=t;let r,n;const i={};for(let s=0;s<e;s++){r=t[s];let a;if(n=r,!vke(r)&&(n=$C[(a=String(r)).toLowerCase()],n===void 0))throw new Jt(`Unknown adapter '${a}'`);if(n)break;i[a||"#"+s]=n}if(!n){const s=Object.entries(i).map(([o,c])=>`adapter ${o} `+(c===!1?"is not supported by the environment":"is not available in the build"));let a=e?s.length>1?`since :
`+s.map(zU).join(`
`):" "+zU(s[0]):"as no adapter specified";throw new Jt("There is no suitable adapter to dispatch the request "+a,"ERR_NOT_SUPPORT")}return n},adapters:$C};function Q7(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Kp(null,t)}function HU(t){return Q7(t),t.headers=wa.from(t.headers),t.data=J7.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),Iie.getAdapter(t.adapter||Ry.adapter)(t).then(function(n){return Q7(t),n.data=J7.call(t,t.transformResponse,n),n.headers=wa.from(n.headers),n},function(n){return Sie(n)||(Q7(t),n&&n.response&&(n.response.data=J7.call(t,t.transformResponse,n.response),n.response.headers=wa.from(n.response.headers))),Promise.reject(n)})}const Pie="1.8.4",H8={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{H8[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});const WU={};H8.transitional=function(e,r,n){function i(s,a){return"[Axios v"+Pie+"] Transitional option '"+s+"'"+a+(n?". "+n:"")}return(s,a,o)=>{if(e===!1)throw new Jt(i(a," has been removed"+(r?" in "+r:"")),Jt.ERR_DEPRECATED);return r&&!WU[a]&&(WU[a]=!0,console.warn(i(a," has been deprecated since v"+r+" and will be removed in the near future"))),e?e(s,a,o):!0}};H8.spelling=function(e){return(r,n)=>(console.warn(`${n} is likely a misspelling of ${e}`),!0)};function yke(t,e,r){if(typeof t!="object")throw new Jt("options must be an object",Jt.ERR_BAD_OPTION_VALUE);const n=Object.keys(t);let i=n.length;for(;i-- >0;){const s=n[i],a=e[s];if(a){const o=t[s],c=o===void 0||a(o,s,t);if(c!==!0)throw new Jt("option "+s+" must be "+c,Jt.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new Jt("Unknown option "+s,Jt.ERR_BAD_OPTION)}}const f3={assertOptions:yke,validators:H8},Fc=f3.validators;let fh=class{constructor(e){this.defaults=e,this.interceptors={request:new FU,response:new FU}}async request(e,r){try{return await this._request(e,r)}catch(n){if(n instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const s=i.stack?i.stack.replace(/^.+\n/,""):"";try{n.stack?s&&!String(n.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+s):n.stack=s}catch{}}throw n}}_request(e,r){typeof e=="string"?(r=r||{},r.url=e):r=e||{},r=Bh(this.defaults,r);const{transitional:n,paramsSerializer:i,headers:s}=r;n!==void 0&&f3.assertOptions(n,{silentJSONParsing:Fc.transitional(Fc.boolean),forcedJSONParsing:Fc.transitional(Fc.boolean),clarifyTimeoutError:Fc.transitional(Fc.boolean)},!1),i!=null&&(Fe.isFunction(i)?r.paramsSerializer={serialize:i}:f3.assertOptions(i,{encode:Fc.function,serialize:Fc.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),f3.assertOptions(r,{baseUrl:Fc.spelling("baseURL"),withXsrfToken:Fc.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let a=s&&Fe.merge(s.common,s[r.method]);s&&Fe.forEach(["delete","get","head","post","put","patch","common"],m=>{delete s[m]}),r.headers=wa.concat(a,s);const o=[];let c=!0;this.interceptors.request.forEach(function(p){typeof p.runWhen=="function"&&p.runWhen(r)===!1||(c=c&&p.synchronous,o.unshift(p.fulfilled,p.rejected))});const u=[];this.interceptors.response.forEach(function(p){u.push(p.fulfilled,p.rejected)});let l,f=0,d;if(!c){const m=[HU.bind(this),void 0];for(m.unshift.apply(m,o),m.push.apply(m,u),d=m.length,l=Promise.resolve(r);f<d;)l=l.then(m[f++],m[f++]);return l}d=o.length;let h=r;for(f=0;f<d;){const m=o[f++],p=o[f++];try{h=m(h)}catch(g){p.call(this,g);break}}try{l=HU.call(this,h)}catch(m){return Promise.reject(m)}for(f=0,d=u.length;f<d;)l=l.then(u[f++],u[f++]);return l}getUri(e){e=Bh(this.defaults,e);const r=kie(e.baseURL,e.url,e.allowAbsoluteUrls);return wie(r,e.params,e.paramsSerializer)}};Fe.forEach(["delete","get","head","options"],function(e){fh.prototype[e]=function(r,n){return this.request(Bh(n||{},{method:e,url:r,data:(n||{}).data}))}});Fe.forEach(["post","put","patch"],function(e){function r(n){return function(s,a,o){return this.request(Bh(o||{},{method:e,headers:n?{"Content-Type":"multipart/form-data"}:{},url:s,data:a}))}}fh.prototype[e]=r(),fh.prototype[e+"Form"]=r(!0)});let bke=class Rie{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(s){r=s});const n=this;this.promise.then(i=>{if(!n._listeners)return;let s=n._listeners.length;for(;s-- >0;)n._listeners[s](i);n._listeners=null}),this.promise.then=i=>{let s;const a=new Promise(o=>{n.subscribe(o),s=o}).then(i);return a.cancel=function(){n.unsubscribe(s)},a},e(function(s,a,o){n.reason||(n.reason=new Kp(s,a,o),r(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const r=this._listeners.indexOf(e);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const e=new AbortController,r=n=>{e.abort(n)};return this.subscribe(r),e.signal.unsubscribe=()=>this.unsubscribe(r),e.signal}static source(){let e;return{token:new Rie(function(i){e=i}),cancel:e}}};function wke(t){return function(r){return t.apply(null,r)}}function _ke(t){return Fe.isObject(t)&&t.isAxiosError===!0}const UC={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(UC).forEach(([t,e])=>{UC[e]=t});function Oie(t){const e=new fh(t),r=lie(fh.prototype.request,e);return Fe.extend(r,fh.prototype,e,{allOwnKeys:!0}),Fe.extend(r,e,null,{allOwnKeys:!0}),r.create=function(i){return Oie(Bh(t,i))},r}const zn=Oie(Ry);zn.Axios=fh;zn.CanceledError=Kp;zn.CancelToken=bke;zn.isCancel=Sie;zn.VERSION=Pie;zn.toFormData=q8;zn.AxiosError=Jt;zn.Cancel=zn.CanceledError;zn.all=function(e){return Promise.all(e)};zn.spread=wke;zn.isAxiosError=_ke;zn.mergeConfig=Bh;zn.AxiosHeaders=wa;zn.formToJSON=t=>xie(Fe.isHTMLForm(t)?new FormData(t):t);zn.getAdapter=Iie.getAdapter;zn.HttpStatusCode=UC;zn.default=zn;const{Axios:h3t,AxiosError:p3t,CanceledError:m3t,isCancel:g3t,CancelToken:v3t,VERSION:y3t,all:b3t,Cancel:w3t,isAxiosError:_3t,spread:x3t,toFormData:S3t,AxiosHeaders:E3t,HttpStatusCode:k3t,formToJSON:T3t,getAdapter:A3t,mergeConfig:C3t}=zn;var ig={exports:{}};/*!
 * Platform.js v1.3.6
 * Copyright 2014-2020 Benjamin Tan
 * Copyright 2011-2013 John-David Dalton
 * Available under MIT license
 */var xke=ig.exports,GU;function Ske(){return GU||(GU=1,function(t,e){(function(){var r={function:!0,object:!0},n=r[typeof window]&&window||this,i=e,s=t&&!t.nodeType&&t,a=i&&s&&typeof Ut=="object"&&Ut;a&&(a.global===a||a.window===a||a.self===a)&&(n=a);var o=Math.pow(2,53)-1,c=/\bOpera/,u=Object.prototype,l=u.hasOwnProperty,f=u.toString;function d(B){return B=String(B),B.charAt(0).toUpperCase()+B.slice(1)}function h(B,D,z){var U={"10.0":"10","6.4":"10 Technical Preview","6.3":"8.1","6.2":"8","6.1":"Server 2008 R2 / 7","6.0":"Server 2008 / Vista","5.2":"Server 2003 / XP 64-bit","5.1":"XP","5.01":"2000 SP1","5.0":"2000","4.0":"NT","4.90":"ME"};return D&&z&&/^Win/i.test(B)&&!/^Windows Phone /i.test(B)&&(U=U[/[\d.]+$/.exec(B)])&&(B="Windows "+U),B=String(B),D&&z&&(B=B.replace(RegExp(D,"i"),z)),B=p(B.replace(/ ce$/i," CE").replace(/\bhpw/i,"web").replace(/\bMacintosh\b/,"Mac OS").replace(/_PowerPC\b/i," OS").replace(/\b(OS X) [^ \d]+/i,"$1").replace(/\bMac (OS X)\b/,"$1").replace(/\/(\d)/," $1").replace(/_/g,".").replace(/(?: BePC|[ .]*fc[ \d.]+)$/i,"").replace(/\bx86\.64\b/gi,"x86_64").replace(/\b(Windows Phone) OS\b/,"$1").replace(/\b(Chrome OS \w+) [\d.]+\b/,"$1").split(" on ")[0]),B}function m(B,D){var z=-1,U=B?B.length:0;if(typeof U=="number"&&U>-1&&U<=o)for(;++z<U;)D(B[z],z,B);else g(B,D)}function p(B){return B=x(B),/^(?:webOS|i(?:OS|P))/.test(B)?B:d(B)}function g(B,D){for(var z in B)l.call(B,z)&&D(B[z],z,B)}function v(B){return B==null?d(B):f.call(B).slice(8,-1)}function y(B,D){var z=B!=null?typeof B[D]:"number";return!/^(?:boolean|number|string|undefined)$/.test(z)&&(z=="object"?!!B[D]:!0)}function b(B){return String(B).replace(/([ -])(?!$)/g,"$1?")}function _(B,D){var z=null;return m(B,function(U,S){z=D(z,U,S,B)}),z}function x(B){return String(B).replace(/^ +| +$/g,"")}function E(B){var D=n,z=B&&typeof B=="object"&&v(B)!="String";z&&(D=B,B=null);var U=D.navigator||{},S=U.userAgent||"";B||(B=S);var T=z?!!U.likeChrome:/\bChrome\b/.test(B)&&!/internal|\n/i.test(f.toString()),w="Object",A=z?w:"ScriptBridgingProxyObject",F=z?w:"Environment",P=z&&D.java?"JavaPackage":v(D.java),O=z?w:"RuntimeObject",R=/\bJava/.test(P)&&D.java,I=R&&v(D.environment)==F,C=R?"a":"",M=R?"b":"",L=D.document||{},N=D.operamini||D.opera,H=c.test(H=z&&N?N["[[Class]]"]:v(N))?H:N=null,W,q=B,G=[],Y=null,te=B==S,Q=te&&N&&typeof N.version=="function"&&N.version(),j,Z=ee([{label:"EdgeHTML",pattern:"Edge"},"Trident",{label:"WebKit",pattern:"AppleWebKit"},"iCab","Presto","NetFront","Tasman","KHTML","Gecko"]),V=le(["Adobe AIR","Arora","Avant Browser","Breach","Camino","Electron","Epiphany","Fennec","Flock","Galeon","GreenBrowser","iCab","Iceweasel","K-Meleon","Konqueror","Lunascape","Maxthon",{label:"Microsoft Edge",pattern:"(?:Edge|Edg|EdgA|EdgiOS)"},"Midori","Nook Browser","PaleMoon","PhantomJS","Raven","Rekonq","RockMelt",{label:"Samsung Internet",pattern:"SamsungBrowser"},"SeaMonkey",{label:"Silk",pattern:"(?:Cloud9|Silk-Accelerated)"},"Sleipnir","SlimBrowser",{label:"SRWare Iron",pattern:"Iron"},"Sunrise","Swiftfox","Vivaldi","Waterfox","WebPositive",{label:"Yandex Browser",pattern:"YaBrowser"},{label:"UC Browser",pattern:"UCBrowser"},"Opera Mini",{label:"Opera Mini",pattern:"OPiOS"},"Opera",{label:"Opera",pattern:"OPR"},"Chromium","Chrome",{label:"Chrome",pattern:"(?:HeadlessChrome)"},{label:"Chrome Mobile",pattern:"(?:CriOS|CrMo)"},{label:"Firefox",pattern:"(?:Firefox|Minefield)"},{label:"Firefox for iOS",pattern:"FxiOS"},{label:"IE",pattern:"IEMobile"},{label:"IE",pattern:"MSIE"},"Safari"]),ne=me([{label:"BlackBerry",pattern:"BB10"},"BlackBerry",{label:"Galaxy S",pattern:"GT-I9000"},{label:"Galaxy S2",pattern:"GT-I9100"},{label:"Galaxy S3",pattern:"GT-I9300"},{label:"Galaxy S4",pattern:"GT-I9500"},{label:"Galaxy S5",pattern:"SM-G900"},{label:"Galaxy S6",pattern:"SM-G920"},{label:"Galaxy S6 Edge",pattern:"SM-G925"},{label:"Galaxy S7",pattern:"SM-G930"},{label:"Galaxy S7 Edge",pattern:"SM-G935"},"Google TV","Lumia","iPad","iPod","iPhone","Kindle",{label:"Kindle Fire",pattern:"(?:Cloud9|Silk-Accelerated)"},"Nexus","Nook","PlayBook","PlayStation Vita","PlayStation","TouchPad","Transformer",{label:"Wii U",pattern:"WiiU"},"Wii","Xbox One",{label:"Xbox 360",pattern:"Xbox"},"Xoom"]),se=ie({Apple:{iPad:1,iPhone:1,iPod:1},Alcatel:{},Archos:{},Amazon:{Kindle:1,"Kindle Fire":1},Asus:{Transformer:1},"Barnes & Noble":{Nook:1},BlackBerry:{PlayBook:1},Google:{"Google TV":1,Nexus:1},HP:{TouchPad:1},HTC:{},Huawei:{},Lenovo:{},LG:{},Microsoft:{Xbox:1,"Xbox One":1},Motorola:{Xoom:1},Nintendo:{"Wii U":1,Wii:1},Nokia:{Lumia:1},Oppo:{},Samsung:{"Galaxy S":1,"Galaxy S2":1,"Galaxy S3":1,"Galaxy S4":1},Sony:{PlayStation:1,"PlayStation Vita":1},Xiaomi:{Mi:1,Redmi:1}}),J=ue(["Windows Phone","KaiOS","Android","CentOS",{label:"Chrome OS",pattern:"CrOS"},"Debian",{label:"DragonFly BSD",pattern:"DragonFly"},"Fedora","FreeBSD","Gentoo","Haiku","Kubuntu","Linux Mint","OpenBSD","Red Hat","SuSE","Ubuntu","Xubuntu","Cygwin","Symbian OS","hpwOS","webOS ","webOS","Tablet OS","Tizen","Linux","Mac OS X","Macintosh","Mac","Windows 98;","Windows "]);function ee(Be){return _(Be,function(re,K){return re||RegExp("\\b"+(K.pattern||b(K))+"\\b","i").exec(B)&&(K.label||K)})}function ie(Be){return _(Be,function(re,K,X){return re||(K[ne]||K[/^[a-z]+(?: +[a-z]+\b)*/i.exec(ne)]||RegExp("\\b"+b(X)+"(?:\\b|\\w*\\d)","i").exec(B))&&X})}function le(Be){return _(Be,function(re,K){return re||RegExp("\\b"+(K.pattern||b(K))+"\\b","i").exec(B)&&(K.label||K)})}function ue(Be){return _(Be,function(re,K){var X=K.pattern||b(K);return!re&&(re=RegExp("\\b"+X+"(?:/[\\d.]+|[ \\w.]*)","i").exec(B))&&(re=h(re,X,K.label||K)),re})}function me(Be){return _(Be,function(re,K){var X=K.pattern||b(K);return!re&&(re=RegExp("\\b"+X+" *\\d+[.\\w_]*","i").exec(B)||RegExp("\\b"+X+" *\\w+-[\\w]*","i").exec(B)||RegExp("\\b"+X+"(?:; *(?:[a-z]+[_-])?[a-z]+\\d+|[^ ();-]*)","i").exec(B))&&((re=String(K.label&&!RegExp(X,"i").test(K.label)?K.label:re).split("/"))[1]&&!/[\d.]+/.test(re[0])&&(re[0]+=" "+re[1]),K=K.label||K,re=p(re[0].replace(RegExp(X,"i"),K).replace(RegExp("; *(?:"+K+"[_-])?","i")," ").replace(RegExp("("+K+")[-_.]?(\\w)","i"),"$1 $2"))),re})}function be(Be){return _(Be,function(re,K){return re||(RegExp(K+"(?:-[\\d.]+/|(?: for [\\w-]+)?[ /-])([\\d.]+[^ ();/_-]*)","i").exec(B)||0)[1]||null})}function _e(){return this.description||""}if(Z&&(Z=[Z]),/\bAndroid\b/.test(J)&&!ne&&(W=/\bAndroid[^;]*;(.*?)(?:Build|\) AppleWebKit)\b/i.exec(B))&&(ne=x(W[1]).replace(/^[a-z]{2}-[a-z]{2};\s*/i,"")||null),se&&!ne?ne=me([se]):se&&ne&&(ne=ne.replace(RegExp("^("+b(se)+")[-_.\\s]","i"),se+" ").replace(RegExp("^("+b(se)+")[-_.]?(\\w)","i"),se+" $2")),(W=/\bGoogle TV\b/.exec(ne))&&(ne=W[0]),/\bSimulator\b/i.test(B)&&(ne=(ne?ne+" ":"")+"Simulator"),V=="Opera Mini"&&/\bOPiOS\b/.test(B)&&G.push("running in Turbo/Uncompressed mode"),V=="IE"&&/\blike iPhone OS\b/.test(B)?(W=E(B.replace(/like iPhone OS/,"")),se=W.manufacturer,ne=W.product):/^iP/.test(ne)?(V||(V="Safari"),J="iOS"+((W=/ OS ([\d_]+)/i.exec(B))?" "+W[1].replace(/_/g,"."):"")):V=="Konqueror"&&/^Linux\b/i.test(J)?J="Kubuntu":se&&se!="Google"&&(/Chrome/.test(V)&&!/\bMobile Safari\b/i.test(B)||/\bVita\b/.test(ne))||/\bAndroid\b/.test(J)&&/^Chrome/.test(V)&&/\bVersion\//i.test(B)?(V="Android Browser",J=/\bAndroid\b/.test(J)?J:"Android"):V=="Silk"?(/\bMobi/i.test(B)||(J="Android",G.unshift("desktop mode")),/Accelerated *= *true/i.test(B)&&G.unshift("accelerated")):V=="UC Browser"&&/\bUCWEB\b/.test(B)?G.push("speed mode"):V=="PaleMoon"&&(W=/\bFirefox\/([\d.]+)\b/.exec(B))?G.push("identifying as Firefox "+W[1]):V=="Firefox"&&(W=/\b(Mobile|Tablet|TV)\b/i.exec(B))?(J||(J="Firefox OS"),ne||(ne=W[1])):!V||(W=!/\bMinefield\b/i.test(B)&&/\b(?:Firefox|Safari)\b/.exec(V))?(V&&!ne&&/[\/,]|^[^(]+?\)/.test(B.slice(B.indexOf(W+"/")+8))&&(V=null),(W=ne||se||J)&&(ne||se||/\b(?:Android|Symbian OS|Tablet OS|webOS)\b/.test(J))&&(V=/[a-z]+(?: Hat)?/i.exec(/\bAndroid\b/.test(J)?J:W)+" Browser")):V=="Electron"&&(W=(/\bChrome\/([\d.]+)\b/.exec(B)||0)[1])&&G.push("Chromium "+W),Q||(Q=be(["(?:Cloud9|CriOS|CrMo|Edge|Edg|EdgA|EdgiOS|FxiOS|HeadlessChrome|IEMobile|Iron|Opera ?Mini|OPiOS|OPR|Raven|SamsungBrowser|Silk(?!/[\\d.]+$)|UCBrowser|YaBrowser)","Version",b(V),"(?:Firefox|Minefield|NetFront)"])),(W=Z=="iCab"&&parseFloat(Q)>3&&"WebKit"||/\bOpera\b/.test(V)&&(/\bOPR\b/.test(B)?"Blink":"Presto")||/\b(?:Midori|Nook|Safari)\b/i.test(B)&&!/^(?:Trident|EdgeHTML)$/.test(Z)&&"WebKit"||!Z&&/\bMSIE\b/i.test(B)&&(J=="Mac OS"?"Tasman":"Trident")||Z=="WebKit"&&/\bPlayStation\b(?! Vita\b)/i.test(V)&&"NetFront")&&(Z=[W]),V=="IE"&&(W=(/; *(?:XBLWP|ZuneWP)(\d+)/i.exec(B)||0)[1])?(V+=" Mobile",J="Windows Phone "+(/\+$/.test(W)?W:W+".x"),G.unshift("desktop mode")):/\bWPDesktop\b/i.test(B)?(V="IE Mobile",J="Windows Phone 8.x",G.unshift("desktop mode"),Q||(Q=(/\brv:([\d.]+)/.exec(B)||0)[1])):V!="IE"&&Z=="Trident"&&(W=/\brv:([\d.]+)/.exec(B))&&(V&&G.push("identifying as "+V+(Q?" "+Q:"")),V="IE",Q=W[1]),te){if(y(D,"global"))if(R&&(W=R.lang.System,q=W.getProperty("os.arch"),J=J||W.getProperty("os.name")+" "+W.getProperty("os.version")),I){try{Q=D.require("ringo/engine").version.join("."),V="RingoJS"}catch{(W=D.system)&&W.global.system==D.system&&(V="Narwhal",J||(J=W[0].os||null))}V||(V="Rhino")}else typeof D.process=="object"&&!D.process.browser&&(W=D.process)&&(typeof W.versions=="object"&&(typeof W.versions.electron=="string"?(G.push("Node "+W.versions.node),V="Electron",Q=W.versions.electron):typeof W.versions.nw=="string"&&(G.push("Chromium "+Q,"Node "+W.versions.node),V="NW.js",Q=W.versions.nw)),V||(V="Node.js",q=W.arch,J=W.platform,Q=/[\d.]+/.exec(W.version),Q=Q?Q[0]:null));else v(W=D.runtime)==A?(V="Adobe AIR",J=W.flash.system.Capabilities.os):v(W=D.phantom)==O?(V="PhantomJS",Q=(W=W.version||null)&&W.major+"."+W.minor+"."+W.patch):typeof L.documentMode=="number"&&(W=/\bTrident\/(\d+)/i.exec(B))?(Q=[Q,L.documentMode],(W=+W[1]+4)!=Q[1]&&(G.push("IE "+Q[1]+" mode"),Z&&(Z[1]=""),Q[1]=W),Q=V=="IE"?String(Q[1].toFixed(1)):Q[0]):typeof L.documentMode=="number"&&/^(?:Chrome|Firefox)\b/.test(V)&&(G.push("masking as "+V+" "+Q),V="IE",Q="11.0",Z=["Trident"],J="Windows");J=J&&p(J)}if(Q&&(W=/(?:[ab]|dp|pre|[ab]\d+pre)(?:\d+\+?)?$/i.exec(Q)||/(?:alpha|beta)(?: ?\d)?/i.exec(B+";"+(te&&U.appMinorVersion))||/\bMinefield\b/i.test(B)&&"a")&&(Y=/b/i.test(W)?"beta":"alpha",Q=Q.replace(RegExp(W+"\\+?$"),"")+(Y=="beta"?M:C)+(/\d+\+?/.exec(W)||"")),V=="Fennec"||V=="Firefox"&&/\b(?:Android|Firefox OS|KaiOS)\b/.test(J))V="Firefox Mobile";else if(V=="Maxthon"&&Q)Q=Q.replace(/\.[\d.]+/,".x");else if(/\bXbox\b/i.test(ne))ne=="Xbox 360"&&(J=null),ne=="Xbox 360"&&/\bIEMobile\b/.test(B)&&G.unshift("mobile mode");else if((/^(?:Chrome|IE|Opera)$/.test(V)||V&&!ne&&!/Browser|Mobi/.test(V))&&(J=="Windows CE"||/Mobi/i.test(B)))V+=" Mobile";else if(V=="IE"&&te)try{D.external===null&&G.unshift("platform preview")}catch{G.unshift("embedded")}else(/\bBlackBerry\b/.test(ne)||/\bBB10\b/.test(B))&&(W=(RegExp(ne.replace(/ +/g," *")+"/([.\\d]+)","i").exec(B)||0)[1]||Q)?(W=[W,/BB10/.test(B)],J=(W[1]?(ne=null,se="BlackBerry"):"Device Software")+" "+W[0],Q=null):this!=g&&ne!="Wii"&&(te&&N||/Opera/.test(V)&&/\b(?:MSIE|Firefox)\b/i.test(B)||V=="Firefox"&&/\bOS X (?:\d+\.){2,}/.test(J)||V=="IE"&&(J&&!/^Win/.test(J)&&Q>5.5||/\bWindows XP\b/.test(J)&&Q>8||Q==8&&!/\bTrident\b/.test(B)))&&!c.test(W=E.call(g,B.replace(c,"")+";"))&&W.name&&(W="ing as "+W.name+((W=W.version)?" "+W:""),c.test(V)?(/\bIE\b/.test(W)&&J=="Mac OS"&&(J=null),W="identify"+W):(W="mask"+W,H?V=p(H.replace(/([a-z])([A-Z])/g,"$1 $2")):V="Opera",/\bIE\b/.test(W)&&(J=null),te||(Q=null)),Z=["Presto"],G.push(W));(W=(/\bAppleWebKit\/([\d.]+\+?)/i.exec(B)||0)[1])&&(W=[parseFloat(W.replace(/\.(\d)$/,".0$1")),W],V=="Safari"&&W[1].slice(-1)=="+"?(V="WebKit Nightly",Y="alpha",Q=W[1].slice(0,-1)):(Q==W[1]||Q==(W[2]=(/\bSafari\/([\d.]+\+?)/i.exec(B)||0)[1]))&&(Q=null),W[1]=(/\b(?:Headless)?Chrome\/([\d.]+)/i.exec(B)||0)[1],W[0]==537.36&&W[2]==537.36&&parseFloat(W[1])>=28&&Z=="WebKit"&&(Z=["Blink"]),!te||!T&&!W[1]?(Z&&(Z[1]="like Safari"),W=(W=W[0],W<400?1:W<500?2:W<526?3:W<533?4:W<534?"4+":W<535?5:W<537?6:W<538?7:W<601?8:W<602?9:W<604?10:W<606?11:W<608?12:"12")):(Z&&(Z[1]="like Chrome"),W=W[1]||(W=W[0],W<530?1:W<532?2:W<532.05?3:W<533?4:W<534.03?5:W<534.07?6:W<534.1?7:W<534.13?8:W<534.16?9:W<534.24?10:W<534.3?11:W<535.01?12:W<535.02?"13+":W<535.07?15:W<535.11?16:W<535.19?17:W<536.05?18:W<536.1?19:W<537.01?20:W<537.11?"21+":W<537.13?23:W<537.18?24:W<537.24?25:W<537.36?26:Z!="Blink"?"27":"28")),Z&&(Z[1]+=" "+(W+=typeof W=="number"?".x":/[.+]/.test(W)?"":"+")),V=="Safari"&&(!Q||parseInt(Q)>45)?Q=W:V=="Chrome"&&/\bHeadlessChrome/i.test(B)&&G.unshift("headless")),V=="Opera"&&(W=/\bzbov|zvav$/.exec(J))?(V+=" ",G.unshift("desktop mode"),W=="zvav"?(V+="Mini",Q=null):V+="Mobile",J=J.replace(RegExp(" *"+W+"$"),"")):V=="Safari"&&/\bChrome\b/.exec(Z&&Z[1])?(G.unshift("desktop mode"),V="Chrome Mobile",Q=null,/\bOS X\b/.test(J)?(se="Apple",J="iOS 4.3+"):J=null):/\bSRWare Iron\b/.test(V)&&!Q&&(Q=be("Chrome")),Q&&Q.indexOf(W=/[\d.]+$/.exec(J))==0&&B.indexOf("/"+W+"-")>-1&&(J=x(J.replace(W,""))),J&&J.indexOf(V)!=-1&&!RegExp(V+" OS").test(J)&&(J=J.replace(RegExp(" *"+b(V)+" *"),"")),Z&&!/\b(?:Avant|Nook)\b/.test(V)&&(/Browser|Lunascape|Maxthon/.test(V)||V!="Safari"&&/^iOS/.test(J)&&/\bSafari\b/.test(Z[1])||/^(?:Adobe|Arora|Breach|Midori|Opera|Phantom|Rekonq|Rock|Samsung Internet|Sleipnir|SRWare Iron|Vivaldi|Web)/.test(V)&&Z[1])&&(W=Z[Z.length-1])&&G.push(W),G.length&&(G=["("+G.join("; ")+")"]),se&&ne&&ne.indexOf(se)<0&&G.push("on "+se),ne&&G.push((/^on /.test(G[G.length-1])?"":"on ")+ne),J&&(W=/ ([\d.+]+)$/.exec(J),j=W&&J.charAt(J.length-W[0].length-1)=="/",J={architecture:32,family:W&&!j?J.replace(W[0],""):J,version:W?W[1]:null,toString:function(){var Be=this.version;return this.family+(Be&&!j?" "+Be:"")+(this.architecture==64?" 64-bit":"")}}),(W=/\b(?:AMD|IA|Win|WOW|x86_|x)64\b/i.exec(q))&&!/\bi686\b/i.test(q)?(J&&(J.architecture=64,J.family=J.family.replace(RegExp(" *"+W),"")),V&&(/\bWOW64\b/i.test(B)||te&&/\w(?:86|32)$/.test(U.cpuClass||U.platform)&&!/\bWin64; x64\b/i.test(B))&&G.unshift("32-bit")):J&&/^OS X/.test(J.family)&&V=="Chrome"&&parseFloat(Q)>=39&&(J.architecture=64),B||(B=null);var xe={};return xe.description=B,xe.layout=Z&&Z[0],xe.manufacturer=se,xe.name=V,xe.prerelease=Y,xe.product=ne,xe.ua=B,xe.version=V&&Q,xe.os=J||{architecture:null,family:null,version:null,toString:function(){return"null"}},xe.parse=E,xe.toString=_e,xe.version&&G.unshift(Q),xe.name&&G.unshift(V),J&&V&&!(J==String(J).split(" ")[0]&&(J==V.split(" ")[0]||ne))&&G.push(ne?"("+J+")":"on "+J),G.length&&(xe.description=G.join(" ")),xe}var k=E();i&&s?g(k,function(B,D){i[D]=B}):n.platform=k}).call(xke)}(ig,ig.exports)),ig.exports}var Eke=Ske();const O1=In(Eke);var H2={exports:{}},e9,KU;function W8(){if(KU)return e9;KU=1;const t="2.0.0",e=256,r=Number.MAX_SAFE_INTEGER||9007199254740991,n=16,i=e-6;return e9={MAX_LENGTH:e,MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:i,MAX_SAFE_INTEGER:r,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:t,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},e9}var t9,XU;function G8(){if(XU)return t9;XU=1;var t={};return t9=typeof fn=="object"&&t&&t.NODE_DEBUG&&/\bsemver\b/i.test(t.NODE_DEBUG)?(...r)=>console.error("SEMVER",...r):()=>{},t9}var YU;function Oy(){return YU||(YU=1,function(t,e){const{MAX_SAFE_COMPONENT_LENGTH:r,MAX_SAFE_BUILD_LENGTH:n,MAX_LENGTH:i}=W8(),s=G8();e=t.exports={};const a=e.re=[],o=e.safeRe=[],c=e.src=[],u=e.safeSrc=[],l=e.t={};let f=0;const d="[a-zA-Z0-9-]",h=[["\\s",1],["\\d",i],[d,n]],m=g=>{for(const[v,y]of h)g=g.split(`${v}*`).join(`${v}{0,${y}}`).split(`${v}+`).join(`${v}{1,${y}}`);return g},p=(g,v,y)=>{const b=m(v),_=f++;s(g,_,v),l[g]=_,c[_]=v,u[_]=b,a[_]=new RegExp(v,y?"g":void 0),o[_]=new RegExp(b,y?"g":void 0)};p("NUMERICIDENTIFIER","0|[1-9]\\d*"),p("NUMERICIDENTIFIERLOOSE","\\d+"),p("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${d}*`),p("MAINVERSION",`(${c[l.NUMERICIDENTIFIER]})\\.(${c[l.NUMERICIDENTIFIER]})\\.(${c[l.NUMERICIDENTIFIER]})`),p("MAINVERSIONLOOSE",`(${c[l.NUMERICIDENTIFIERLOOSE]})\\.(${c[l.NUMERICIDENTIFIERLOOSE]})\\.(${c[l.NUMERICIDENTIFIERLOOSE]})`),p("PRERELEASEIDENTIFIER",`(?:${c[l.NUMERICIDENTIFIER]}|${c[l.NONNUMERICIDENTIFIER]})`),p("PRERELEASEIDENTIFIERLOOSE",`(?:${c[l.NUMERICIDENTIFIERLOOSE]}|${c[l.NONNUMERICIDENTIFIER]})`),p("PRERELEASE",`(?:-(${c[l.PRERELEASEIDENTIFIER]}(?:\\.${c[l.PRERELEASEIDENTIFIER]})*))`),p("PRERELEASELOOSE",`(?:-?(${c[l.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${c[l.PRERELEASEIDENTIFIERLOOSE]})*))`),p("BUILDIDENTIFIER",`${d}+`),p("BUILD",`(?:\\+(${c[l.BUILDIDENTIFIER]}(?:\\.${c[l.BUILDIDENTIFIER]})*))`),p("FULLPLAIN",`v?${c[l.MAINVERSION]}${c[l.PRERELEASE]}?${c[l.BUILD]}?`),p("FULL",`^${c[l.FULLPLAIN]}$`),p("LOOSEPLAIN",`[v=\\s]*${c[l.MAINVERSIONLOOSE]}${c[l.PRERELEASELOOSE]}?${c[l.BUILD]}?`),p("LOOSE",`^${c[l.LOOSEPLAIN]}$`),p("GTLT","((?:<|>)?=?)"),p("XRANGEIDENTIFIERLOOSE",`${c[l.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),p("XRANGEIDENTIFIER",`${c[l.NUMERICIDENTIFIER]}|x|X|\\*`),p("XRANGEPLAIN",`[v=\\s]*(${c[l.XRANGEIDENTIFIER]})(?:\\.(${c[l.XRANGEIDENTIFIER]})(?:\\.(${c[l.XRANGEIDENTIFIER]})(?:${c[l.PRERELEASE]})?${c[l.BUILD]}?)?)?`),p("XRANGEPLAINLOOSE",`[v=\\s]*(${c[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${c[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${c[l.XRANGEIDENTIFIERLOOSE]})(?:${c[l.PRERELEASELOOSE]})?${c[l.BUILD]}?)?)?`),p("XRANGE",`^${c[l.GTLT]}\\s*${c[l.XRANGEPLAIN]}$`),p("XRANGELOOSE",`^${c[l.GTLT]}\\s*${c[l.XRANGEPLAINLOOSE]}$`),p("COERCEPLAIN",`(^|[^\\d])(\\d{1,${r}})(?:\\.(\\d{1,${r}}))?(?:\\.(\\d{1,${r}}))?`),p("COERCE",`${c[l.COERCEPLAIN]}(?:$|[^\\d])`),p("COERCEFULL",c[l.COERCEPLAIN]+`(?:${c[l.PRERELEASE]})?(?:${c[l.BUILD]})?(?:$|[^\\d])`),p("COERCERTL",c[l.COERCE],!0),p("COERCERTLFULL",c[l.COERCEFULL],!0),p("LONETILDE","(?:~>?)"),p("TILDETRIM",`(\\s*)${c[l.LONETILDE]}\\s+`,!0),e.tildeTrimReplace="$1~",p("TILDE",`^${c[l.LONETILDE]}${c[l.XRANGEPLAIN]}$`),p("TILDELOOSE",`^${c[l.LONETILDE]}${c[l.XRANGEPLAINLOOSE]}$`),p("LONECARET","(?:\\^)"),p("CARETTRIM",`(\\s*)${c[l.LONECARET]}\\s+`,!0),e.caretTrimReplace="$1^",p("CARET",`^${c[l.LONECARET]}${c[l.XRANGEPLAIN]}$`),p("CARETLOOSE",`^${c[l.LONECARET]}${c[l.XRANGEPLAINLOOSE]}$`),p("COMPARATORLOOSE",`^${c[l.GTLT]}\\s*(${c[l.LOOSEPLAIN]})$|^$`),p("COMPARATOR",`^${c[l.GTLT]}\\s*(${c[l.FULLPLAIN]})$|^$`),p("COMPARATORTRIM",`(\\s*)${c[l.GTLT]}\\s*(${c[l.LOOSEPLAIN]}|${c[l.XRANGEPLAIN]})`,!0),e.comparatorTrimReplace="$1$2$3",p("HYPHENRANGE",`^\\s*(${c[l.XRANGEPLAIN]})\\s+-\\s+(${c[l.XRANGEPLAIN]})\\s*$`),p("HYPHENRANGELOOSE",`^\\s*(${c[l.XRANGEPLAINLOOSE]})\\s+-\\s+(${c[l.XRANGEPLAINLOOSE]})\\s*$`),p("STAR","(<|>)?=?\\s*\\*"),p("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),p("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")}(H2,H2.exports)),H2.exports}var r9,ZU;function CO(){if(ZU)return r9;ZU=1;const t=Object.freeze({loose:!0}),e=Object.freeze({});return r9=n=>n?typeof n!="object"?t:n:e,r9}var n9,JU;function Bie(){if(JU)return n9;JU=1;const t=/^[0-9]+$/,e=(n,i)=>{const s=t.test(n),a=t.test(i);return s&&a&&(n=+n,i=+i),n===i?0:s&&!a?-1:a&&!s?1:n<i?-1:1};return n9={compareIdentifiers:e,rcompareIdentifiers:(n,i)=>e(i,n)},n9}var i9,QU;function aa(){if(QU)return i9;QU=1;const t=G8(),{MAX_LENGTH:e,MAX_SAFE_INTEGER:r}=W8(),{safeRe:n,safeSrc:i,t:s}=Oy(),a=CO(),{compareIdentifiers:o}=Bie();class c{constructor(l,f){if(f=a(f),l instanceof c){if(l.loose===!!f.loose&&l.includePrerelease===!!f.includePrerelease)return l;l=l.version}else if(typeof l!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof l}".`);if(l.length>e)throw new TypeError(`version is longer than ${e} characters`);t("SemVer",l,f),this.options=f,this.loose=!!f.loose,this.includePrerelease=!!f.includePrerelease;const d=l.trim().match(f.loose?n[s.LOOSE]:n[s.FULL]);if(!d)throw new TypeError(`Invalid Version: ${l}`);if(this.raw=l,this.major=+d[1],this.minor=+d[2],this.patch=+d[3],this.major>r||this.major<0)throw new TypeError("Invalid major version");if(this.minor>r||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>r||this.patch<0)throw new TypeError("Invalid patch version");d[4]?this.prerelease=d[4].split(".").map(h=>{if(/^[0-9]+$/.test(h)){const m=+h;if(m>=0&&m<r)return m}return h}):this.prerelease=[],this.build=d[5]?d[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(l){if(t("SemVer.compare",this.version,this.options,l),!(l instanceof c)){if(typeof l=="string"&&l===this.version)return 0;l=new c(l,this.options)}return l.version===this.version?0:this.compareMain(l)||this.comparePre(l)}compareMain(l){return l instanceof c||(l=new c(l,this.options)),o(this.major,l.major)||o(this.minor,l.minor)||o(this.patch,l.patch)}comparePre(l){if(l instanceof c||(l=new c(l,this.options)),this.prerelease.length&&!l.prerelease.length)return-1;if(!this.prerelease.length&&l.prerelease.length)return 1;if(!this.prerelease.length&&!l.prerelease.length)return 0;let f=0;do{const d=this.prerelease[f],h=l.prerelease[f];if(t("prerelease compare",f,d,h),d===void 0&&h===void 0)return 0;if(h===void 0)return 1;if(d===void 0)return-1;if(d===h)continue;return o(d,h)}while(++f)}compareBuild(l){l instanceof c||(l=new c(l,this.options));let f=0;do{const d=this.build[f],h=l.build[f];if(t("build compare",f,d,h),d===void 0&&h===void 0)return 0;if(h===void 0)return 1;if(d===void 0)return-1;if(d===h)continue;return o(d,h)}while(++f)}inc(l,f,d){if(l.startsWith("pre")){if(!f&&d===!1)throw new Error("invalid increment argument: identifier is empty");if(f){const h=new RegExp(`^${this.options.loose?i[s.PRERELEASELOOSE]:i[s.PRERELEASE]}$`),m=`-${f}`.match(h);if(!m||m[1]!==f)throw new Error(`invalid identifier: ${f}`)}}switch(l){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",f,d);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",f,d);break;case"prepatch":this.prerelease.length=0,this.inc("patch",f,d),this.inc("pre",f,d);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",f,d),this.inc("pre",f,d);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const h=Number(d)?1:0;if(this.prerelease.length===0)this.prerelease=[h];else{let m=this.prerelease.length;for(;--m>=0;)typeof this.prerelease[m]=="number"&&(this.prerelease[m]++,m=-2);if(m===-1){if(f===this.prerelease.join(".")&&d===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(h)}}if(f){let m=[f,h];d===!1&&(m=[f]),o(this.prerelease[0],f)===0?isNaN(this.prerelease[1])&&(this.prerelease=m):this.prerelease=m}break}default:throw new Error(`invalid increment argument: ${l}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}return i9=c,i9}var s9,ej;function Xp(){if(ej)return s9;ej=1;const t=aa();return s9=(r,n,i=!1)=>{if(r instanceof t)return r;try{return new t(r,n)}catch(s){if(!i)return null;throw s}},s9}var a9,tj;function kke(){if(tj)return a9;tj=1;const t=Xp();return a9=(r,n)=>{const i=t(r,n);return i?i.version:null},a9}var o9,rj;function Tke(){if(rj)return o9;rj=1;const t=Xp();return o9=(r,n)=>{const i=t(r.trim().replace(/^[=v]+/,""),n);return i?i.version:null},o9}var c9,nj;function Ake(){if(nj)return c9;nj=1;const t=aa();return c9=(r,n,i,s,a)=>{typeof i=="string"&&(a=s,s=i,i=void 0);try{return new t(r instanceof t?r.version:r,i).inc(n,s,a).version}catch{return null}},c9}var l9,ij;function Cke(){if(ij)return l9;ij=1;const t=Xp();return l9=(r,n)=>{const i=t(r,null,!0),s=t(n,null,!0),a=i.compare(s);if(a===0)return null;const o=a>0,c=o?i:s,u=o?s:i,l=!!c.prerelease.length;if(!!u.prerelease.length&&!l){if(!u.patch&&!u.minor)return"major";if(u.compareMain(c)===0)return u.minor&&!u.patch?"minor":"patch"}const d=l?"pre":"";return i.major!==s.major?d+"major":i.minor!==s.minor?d+"minor":i.patch!==s.patch?d+"patch":"prerelease"},l9}var u9,sj;function Ike(){if(sj)return u9;sj=1;const t=aa();return u9=(r,n)=>new t(r,n).major,u9}var f9,aj;function Pke(){if(aj)return f9;aj=1;const t=aa();return f9=(r,n)=>new t(r,n).minor,f9}var d9,oj;function Rke(){if(oj)return d9;oj=1;const t=aa();return d9=(r,n)=>new t(r,n).patch,d9}var h9,cj;function Oke(){if(cj)return h9;cj=1;const t=Xp();return h9=(r,n)=>{const i=t(r,n);return i&&i.prerelease.length?i.prerelease:null},h9}var p9,lj;function Tc(){if(lj)return p9;lj=1;const t=aa();return p9=(r,n,i)=>new t(r,i).compare(new t(n,i)),p9}var m9,uj;function Bke(){if(uj)return m9;uj=1;const t=Tc();return m9=(r,n,i)=>t(n,r,i),m9}var g9,fj;function Dke(){if(fj)return g9;fj=1;const t=Tc();return g9=(r,n)=>t(r,n,!0),g9}var v9,dj;function IO(){if(dj)return v9;dj=1;const t=aa();return v9=(r,n,i)=>{const s=new t(r,i),a=new t(n,i);return s.compare(a)||s.compareBuild(a)},v9}var y9,hj;function Mke(){if(hj)return y9;hj=1;const t=IO();return y9=(r,n)=>r.sort((i,s)=>t(i,s,n)),y9}var b9,pj;function Nke(){if(pj)return b9;pj=1;const t=IO();return b9=(r,n)=>r.sort((i,s)=>t(s,i,n)),b9}var w9,mj;function K8(){if(mj)return w9;mj=1;const t=Tc();return w9=(r,n,i)=>t(r,n,i)>0,w9}var _9,gj;function PO(){if(gj)return _9;gj=1;const t=Tc();return _9=(r,n,i)=>t(r,n,i)<0,_9}var x9,vj;function Die(){if(vj)return x9;vj=1;const t=Tc();return x9=(r,n,i)=>t(r,n,i)===0,x9}var S9,yj;function Mie(){if(yj)return S9;yj=1;const t=Tc();return S9=(r,n,i)=>t(r,n,i)!==0,S9}var E9,bj;function RO(){if(bj)return E9;bj=1;const t=Tc();return E9=(r,n,i)=>t(r,n,i)>=0,E9}var k9,wj;function OO(){if(wj)return k9;wj=1;const t=Tc();return k9=(r,n,i)=>t(r,n,i)<=0,k9}var T9,_j;function Nie(){if(_j)return T9;_j=1;const t=Die(),e=Mie(),r=K8(),n=RO(),i=PO(),s=OO();return T9=(o,c,u,l)=>{switch(c){case"===":return typeof o=="object"&&(o=o.version),typeof u=="object"&&(u=u.version),o===u;case"!==":return typeof o=="object"&&(o=o.version),typeof u=="object"&&(u=u.version),o!==u;case"":case"=":case"==":return t(o,u,l);case"!=":return e(o,u,l);case">":return r(o,u,l);case">=":return n(o,u,l);case"<":return i(o,u,l);case"<=":return s(o,u,l);default:throw new TypeError(`Invalid operator: ${c}`)}},T9}var A9,xj;function Fke(){if(xj)return A9;xj=1;const t=aa(),e=Xp(),{safeRe:r,t:n}=Oy();return A9=(s,a)=>{if(s instanceof t)return s;if(typeof s=="number"&&(s=String(s)),typeof s!="string")return null;a=a||{};let o=null;if(!a.rtl)o=s.match(a.includePrerelease?r[n.COERCEFULL]:r[n.COERCE]);else{const h=a.includePrerelease?r[n.COERCERTLFULL]:r[n.COERCERTL];let m;for(;(m=h.exec(s))&&(!o||o.index+o[0].length!==s.length);)(!o||m.index+m[0].length!==o.index+o[0].length)&&(o=m),h.lastIndex=m.index+m[1].length+m[2].length;h.lastIndex=-1}if(o===null)return null;const c=o[2],u=o[3]||"0",l=o[4]||"0",f=a.includePrerelease&&o[5]?`-${o[5]}`:"",d=a.includePrerelease&&o[6]?`+${o[6]}`:"";return e(`${c}.${u}.${l}${f}${d}`,a)},A9}var C9,Sj;function Lke(){if(Sj)return C9;Sj=1;class t{constructor(){this.max=1e3,this.map=new Map}get(r){const n=this.map.get(r);if(n!==void 0)return this.map.delete(r),this.map.set(r,n),n}delete(r){return this.map.delete(r)}set(r,n){if(!this.delete(r)&&n!==void 0){if(this.map.size>=this.max){const s=this.map.keys().next().value;this.delete(s)}this.map.set(r,n)}return this}}return C9=t,C9}var I9,Ej;function Ac(){if(Ej)return I9;Ej=1;const t=/\s+/g;class e{constructor(A,F){if(F=i(F),A instanceof e)return A.loose===!!F.loose&&A.includePrerelease===!!F.includePrerelease?A:new e(A.raw,F);if(A instanceof s)return this.raw=A.value,this.set=[[A]],this.formatted=void 0,this;if(this.options=F,this.loose=!!F.loose,this.includePrerelease=!!F.includePrerelease,this.raw=A.trim().replace(t," "),this.set=this.raw.split("||").map(P=>this.parseRange(P.trim())).filter(P=>P.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const P=this.set[0];if(this.set=this.set.filter(O=>!p(O[0])),this.set.length===0)this.set=[P];else if(this.set.length>1){for(const O of this.set)if(O.length===1&&g(O[0])){this.set=[O];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let A=0;A<this.set.length;A++){A>0&&(this.formatted+="||");const F=this.set[A];for(let P=0;P<F.length;P++)P>0&&(this.formatted+=" "),this.formatted+=F[P].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(A){const P=((this.options.includePrerelease&&h)|(this.options.loose&&m))+":"+A,O=n.get(P);if(O)return O;const R=this.options.loose,I=R?c[u.HYPHENRANGELOOSE]:c[u.HYPHENRANGE];A=A.replace(I,S(this.options.includePrerelease)),a("hyphen replace",A),A=A.replace(c[u.COMPARATORTRIM],l),a("comparator trim",A),A=A.replace(c[u.TILDETRIM],f),a("tilde trim",A),A=A.replace(c[u.CARETTRIM],d),a("caret trim",A);let C=A.split(" ").map(H=>y(H,this.options)).join(" ").split(/\s+/).map(H=>U(H,this.options));R&&(C=C.filter(H=>(a("loose invalid filter",H,this.options),!!H.match(c[u.COMPARATORLOOSE])))),a("range list",C);const M=new Map,L=C.map(H=>new s(H,this.options));for(const H of L){if(p(H))return[H];M.set(H.value,H)}M.size>1&&M.has("")&&M.delete("");const N=[...M.values()];return n.set(P,N),N}intersects(A,F){if(!(A instanceof e))throw new TypeError("a Range is required");return this.set.some(P=>v(P,F)&&A.set.some(O=>v(O,F)&&P.every(R=>O.every(I=>R.intersects(I,F)))))}test(A){if(!A)return!1;if(typeof A=="string")try{A=new o(A,this.options)}catch{return!1}for(let F=0;F<this.set.length;F++)if(T(this.set[F],A,this.options))return!0;return!1}}I9=e;const r=Lke(),n=new r,i=CO(),s=X8(),a=G8(),o=aa(),{safeRe:c,t:u,comparatorTrimReplace:l,tildeTrimReplace:f,caretTrimReplace:d}=Oy(),{FLAG_INCLUDE_PRERELEASE:h,FLAG_LOOSE:m}=W8(),p=w=>w.value==="<0.0.0-0",g=w=>w.value==="",v=(w,A)=>{let F=!0;const P=w.slice();let O=P.pop();for(;F&&P.length;)F=P.every(R=>O.intersects(R,A)),O=P.pop();return F},y=(w,A)=>(a("comp",w,A),w=E(w,A),a("caret",w),w=_(w,A),a("tildes",w),w=B(w,A),a("xrange",w),w=z(w,A),a("stars",w),w),b=w=>!w||w.toLowerCase()==="x"||w==="*",_=(w,A)=>w.trim().split(/\s+/).map(F=>x(F,A)).join(" "),x=(w,A)=>{const F=A.loose?c[u.TILDELOOSE]:c[u.TILDE];return w.replace(F,(P,O,R,I,C)=>{a("tilde",w,P,O,R,I,C);let M;return b(O)?M="":b(R)?M=`>=${O}.0.0 <${+O+1}.0.0-0`:b(I)?M=`>=${O}.${R}.0 <${O}.${+R+1}.0-0`:C?(a("replaceTilde pr",C),M=`>=${O}.${R}.${I}-${C} <${O}.${+R+1}.0-0`):M=`>=${O}.${R}.${I} <${O}.${+R+1}.0-0`,a("tilde return",M),M})},E=(w,A)=>w.trim().split(/\s+/).map(F=>k(F,A)).join(" "),k=(w,A)=>{a("caret",w,A);const F=A.loose?c[u.CARETLOOSE]:c[u.CARET],P=A.includePrerelease?"-0":"";return w.replace(F,(O,R,I,C,M)=>{a("caret",w,O,R,I,C,M);let L;return b(R)?L="":b(I)?L=`>=${R}.0.0${P} <${+R+1}.0.0-0`:b(C)?R==="0"?L=`>=${R}.${I}.0${P} <${R}.${+I+1}.0-0`:L=`>=${R}.${I}.0${P} <${+R+1}.0.0-0`:M?(a("replaceCaret pr",M),R==="0"?I==="0"?L=`>=${R}.${I}.${C}-${M} <${R}.${I}.${+C+1}-0`:L=`>=${R}.${I}.${C}-${M} <${R}.${+I+1}.0-0`:L=`>=${R}.${I}.${C}-${M} <${+R+1}.0.0-0`):(a("no pr"),R==="0"?I==="0"?L=`>=${R}.${I}.${C}${P} <${R}.${I}.${+C+1}-0`:L=`>=${R}.${I}.${C}${P} <${R}.${+I+1}.0-0`:L=`>=${R}.${I}.${C} <${+R+1}.0.0-0`),a("caret return",L),L})},B=(w,A)=>(a("replaceXRanges",w,A),w.split(/\s+/).map(F=>D(F,A)).join(" ")),D=(w,A)=>{w=w.trim();const F=A.loose?c[u.XRANGELOOSE]:c[u.XRANGE];return w.replace(F,(P,O,R,I,C,M)=>{a("xRange",w,P,O,R,I,C,M);const L=b(R),N=L||b(I),H=N||b(C),W=H;return O==="="&&W&&(O=""),M=A.includePrerelease?"-0":"",L?O===">"||O==="<"?P="<0.0.0-0":P="*":O&&W?(N&&(I=0),C=0,O===">"?(O=">=",N?(R=+R+1,I=0,C=0):(I=+I+1,C=0)):O==="<="&&(O="<",N?R=+R+1:I=+I+1),O==="<"&&(M="-0"),P=`${O+R}.${I}.${C}${M}`):N?P=`>=${R}.0.0${M} <${+R+1}.0.0-0`:H&&(P=`>=${R}.${I}.0${M} <${R}.${+I+1}.0-0`),a("xRange return",P),P})},z=(w,A)=>(a("replaceStars",w,A),w.trim().replace(c[u.STAR],"")),U=(w,A)=>(a("replaceGTE0",w,A),w.trim().replace(c[A.includePrerelease?u.GTE0PRE:u.GTE0],"")),S=w=>(A,F,P,O,R,I,C,M,L,N,H,W)=>(b(P)?F="":b(O)?F=`>=${P}.0.0${w?"-0":""}`:b(R)?F=`>=${P}.${O}.0${w?"-0":""}`:I?F=`>=${F}`:F=`>=${F}${w?"-0":""}`,b(L)?M="":b(N)?M=`<${+L+1}.0.0-0`:b(H)?M=`<${L}.${+N+1}.0-0`:W?M=`<=${L}.${N}.${H}-${W}`:w?M=`<${L}.${N}.${+H+1}-0`:M=`<=${M}`,`${F} ${M}`.trim()),T=(w,A,F)=>{for(let P=0;P<w.length;P++)if(!w[P].test(A))return!1;if(A.prerelease.length&&!F.includePrerelease){for(let P=0;P<w.length;P++)if(a(w[P].semver),w[P].semver!==s.ANY&&w[P].semver.prerelease.length>0){const O=w[P].semver;if(O.major===A.major&&O.minor===A.minor&&O.patch===A.patch)return!0}return!1}return!0};return I9}var P9,kj;function X8(){if(kj)return P9;kj=1;const t=Symbol("SemVer ANY");class e{static get ANY(){return t}constructor(l,f){if(f=r(f),l instanceof e){if(l.loose===!!f.loose)return l;l=l.value}l=l.trim().split(/\s+/).join(" "),a("comparator",l,f),this.options=f,this.loose=!!f.loose,this.parse(l),this.semver===t?this.value="":this.value=this.operator+this.semver.version,a("comp",this)}parse(l){const f=this.options.loose?n[i.COMPARATORLOOSE]:n[i.COMPARATOR],d=l.match(f);if(!d)throw new TypeError(`Invalid comparator: ${l}`);this.operator=d[1]!==void 0?d[1]:"",this.operator==="="&&(this.operator=""),d[2]?this.semver=new o(d[2],this.options.loose):this.semver=t}toString(){return this.value}test(l){if(a("Comparator.test",l,this.options.loose),this.semver===t||l===t)return!0;if(typeof l=="string")try{l=new o(l,this.options)}catch{return!1}return s(l,this.operator,this.semver,this.options)}intersects(l,f){if(!(l instanceof e))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new c(l.value,f).test(this.value):l.operator===""?l.value===""?!0:new c(this.value,f).test(l.semver):(f=r(f),f.includePrerelease&&(this.value==="<0.0.0-0"||l.value==="<0.0.0-0")||!f.includePrerelease&&(this.value.startsWith("<0.0.0")||l.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&l.operator.startsWith(">")||this.operator.startsWith("<")&&l.operator.startsWith("<")||this.semver.version===l.semver.version&&this.operator.includes("=")&&l.operator.includes("=")||s(this.semver,"<",l.semver,f)&&this.operator.startsWith(">")&&l.operator.startsWith("<")||s(this.semver,">",l.semver,f)&&this.operator.startsWith("<")&&l.operator.startsWith(">")))}}P9=e;const r=CO(),{safeRe:n,t:i}=Oy(),s=Nie(),a=G8(),o=aa(),c=Ac();return P9}var R9,Tj;function Y8(){if(Tj)return R9;Tj=1;const t=Ac();return R9=(r,n,i)=>{try{n=new t(n,i)}catch{return!1}return n.test(r)},R9}var O9,Aj;function $ke(){if(Aj)return O9;Aj=1;const t=Ac();return O9=(r,n)=>new t(r,n).set.map(i=>i.map(s=>s.value).join(" ").trim().split(" ")),O9}var B9,Cj;function Uke(){if(Cj)return B9;Cj=1;const t=aa(),e=Ac();return B9=(n,i,s)=>{let a=null,o=null,c=null;try{c=new e(i,s)}catch{return null}return n.forEach(u=>{c.test(u)&&(!a||o.compare(u)===-1)&&(a=u,o=new t(a,s))}),a},B9}var D9,Ij;function jke(){if(Ij)return D9;Ij=1;const t=aa(),e=Ac();return D9=(n,i,s)=>{let a=null,o=null,c=null;try{c=new e(i,s)}catch{return null}return n.forEach(u=>{c.test(u)&&(!a||o.compare(u)===1)&&(a=u,o=new t(a,s))}),a},D9}var M9,Pj;function Vke(){if(Pj)return M9;Pj=1;const t=aa(),e=Ac(),r=K8();return M9=(i,s)=>{i=new e(i,s);let a=new t("0.0.0");if(i.test(a)||(a=new t("0.0.0-0"),i.test(a)))return a;a=null;for(let o=0;o<i.set.length;++o){const c=i.set[o];let u=null;c.forEach(l=>{const f=new t(l.semver.version);switch(l.operator){case">":f.prerelease.length===0?f.patch++:f.prerelease.push(0),f.raw=f.format();case"":case">=":(!u||r(f,u))&&(u=f);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${l.operator}`)}}),u&&(!a||r(a,u))&&(a=u)}return a&&i.test(a)?a:null},M9}var N9,Rj;function qke(){if(Rj)return N9;Rj=1;const t=Ac();return N9=(r,n)=>{try{return new t(r,n).range||"*"}catch{return null}},N9}var F9,Oj;function BO(){if(Oj)return F9;Oj=1;const t=aa(),e=X8(),{ANY:r}=e,n=Ac(),i=Y8(),s=K8(),a=PO(),o=OO(),c=RO();return F9=(l,f,d,h)=>{l=new t(l,h),f=new n(f,h);let m,p,g,v,y;switch(d){case">":m=s,p=o,g=a,v=">",y=">=";break;case"<":m=a,p=c,g=s,v="<",y="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(i(l,f,h))return!1;for(let b=0;b<f.set.length;++b){const _=f.set[b];let x=null,E=null;if(_.forEach(k=>{k.semver===r&&(k=new e(">=0.0.0")),x=x||k,E=E||k,m(k.semver,x.semver,h)?x=k:g(k.semver,E.semver,h)&&(E=k)}),x.operator===v||x.operator===y||(!E.operator||E.operator===v)&&p(l,E.semver))return!1;if(E.operator===y&&g(l,E.semver))return!1}return!0},F9}var L9,Bj;function zke(){if(Bj)return L9;Bj=1;const t=BO();return L9=(r,n,i)=>t(r,n,">",i),L9}var $9,Dj;function Hke(){if(Dj)return $9;Dj=1;const t=BO();return $9=(r,n,i)=>t(r,n,"<",i),$9}var U9,Mj;function Wke(){if(Mj)return U9;Mj=1;const t=Ac();return U9=(r,n,i)=>(r=new t(r,i),n=new t(n,i),r.intersects(n,i)),U9}var j9,Nj;function Gke(){if(Nj)return j9;Nj=1;const t=Y8(),e=Tc();return j9=(r,n,i)=>{const s=[];let a=null,o=null;const c=r.sort((d,h)=>e(d,h,i));for(const d of c)t(d,n,i)?(o=d,a||(a=d)):(o&&s.push([a,o]),o=null,a=null);a&&s.push([a,null]);const u=[];for(const[d,h]of s)d===h?u.push(d):!h&&d===c[0]?u.push("*"):h?d===c[0]?u.push(`<=${h}`):u.push(`${d} - ${h}`):u.push(`>=${d}`);const l=u.join(" || "),f=typeof n.raw=="string"?n.raw:String(n);return l.length<f.length?l:n},j9}var V9,Fj;function Kke(){if(Fj)return V9;Fj=1;const t=Ac(),e=X8(),{ANY:r}=e,n=Y8(),i=Tc(),s=(f,d,h={})=>{if(f===d)return!0;f=new t(f,h),d=new t(d,h);let m=!1;e:for(const p of f.set){for(const g of d.set){const v=c(p,g,h);if(m=m||v!==null,v)continue e}if(m)return!1}return!0},a=[new e(">=0.0.0-0")],o=[new e(">=0.0.0")],c=(f,d,h)=>{if(f===d)return!0;if(f.length===1&&f[0].semver===r){if(d.length===1&&d[0].semver===r)return!0;h.includePrerelease?f=a:f=o}if(d.length===1&&d[0].semver===r){if(h.includePrerelease)return!0;d=o}const m=new Set;let p,g;for(const B of f)B.operator===">"||B.operator===">="?p=u(p,B,h):B.operator==="<"||B.operator==="<="?g=l(g,B,h):m.add(B.semver);if(m.size>1)return null;let v;if(p&&g){if(v=i(p.semver,g.semver,h),v>0)return null;if(v===0&&(p.operator!==">="||g.operator!=="<="))return null}for(const B of m){if(p&&!n(B,String(p),h)||g&&!n(B,String(g),h))return null;for(const D of d)if(!n(B,String(D),h))return!1;return!0}let y,b,_,x,E=g&&!h.includePrerelease&&g.semver.prerelease.length?g.semver:!1,k=p&&!h.includePrerelease&&p.semver.prerelease.length?p.semver:!1;E&&E.prerelease.length===1&&g.operator==="<"&&E.prerelease[0]===0&&(E=!1);for(const B of d){if(x=x||B.operator===">"||B.operator===">=",_=_||B.operator==="<"||B.operator==="<=",p){if(k&&B.semver.prerelease&&B.semver.prerelease.length&&B.semver.major===k.major&&B.semver.minor===k.minor&&B.semver.patch===k.patch&&(k=!1),B.operator===">"||B.operator===">="){if(y=u(p,B,h),y===B&&y!==p)return!1}else if(p.operator===">="&&!n(p.semver,String(B),h))return!1}if(g){if(E&&B.semver.prerelease&&B.semver.prerelease.length&&B.semver.major===E.major&&B.semver.minor===E.minor&&B.semver.patch===E.patch&&(E=!1),B.operator==="<"||B.operator==="<="){if(b=l(g,B,h),b===B&&b!==g)return!1}else if(g.operator==="<="&&!n(g.semver,String(B),h))return!1}if(!B.operator&&(g||p)&&v!==0)return!1}return!(p&&_&&!g&&v!==0||g&&x&&!p&&v!==0||k||E)},u=(f,d,h)=>{if(!f)return d;const m=i(f.semver,d.semver,h);return m>0?f:m<0||d.operator===">"&&f.operator===">="?d:f},l=(f,d,h)=>{if(!f)return d;const m=i(f.semver,d.semver,h);return m<0?f:m>0||d.operator==="<"&&f.operator==="<="?d:f};return V9=s,V9}var q9,Lj;function Xke(){if(Lj)return q9;Lj=1;const t=Oy(),e=W8(),r=aa(),n=Bie(),i=Xp(),s=kke(),a=Tke(),o=Ake(),c=Cke(),u=Ike(),l=Pke(),f=Rke(),d=Oke(),h=Tc(),m=Bke(),p=Dke(),g=IO(),v=Mke(),y=Nke(),b=K8(),_=PO(),x=Die(),E=Mie(),k=RO(),B=OO(),D=Nie(),z=Fke(),U=X8(),S=Ac(),T=Y8(),w=$ke(),A=Uke(),F=jke(),P=Vke(),O=qke(),R=BO(),I=zke(),C=Hke(),M=Wke(),L=Gke(),N=Kke();return q9={parse:i,valid:s,clean:a,inc:o,diff:c,major:u,minor:l,patch:f,prerelease:d,compare:h,rcompare:m,compareLoose:p,compareBuild:g,sort:v,rsort:y,gt:b,lt:_,eq:x,neq:E,gte:k,lte:B,cmp:D,coerce:z,Comparator:U,Range:S,satisfies:T,toComparators:w,maxSatisfying:A,minSatisfying:F,minVersion:P,validRange:O,outside:R,gtr:I,ltr:C,intersects:M,simplifyRange:L,subset:N,SemVer:r,re:t.re,src:t.src,tokens:t.t,SEMVER_SPEC_VERSION:e.SEMVER_SPEC_VERSION,RELEASE_TYPES:e.RELEASE_TYPES,compareIdentifiers:n.compareIdentifiers,rcompareIdentifiers:n.rcompareIdentifiers},q9}var Yke=Xke();const Zke=In(Yke),Jke=t=>O1.os?.family?.includes("Ubuntu")?t==="deb":O1.os?.family?.includes("OS X")?t==="dmg":O1.os?.family?.includes("Windows")?t==="exe":!1,Fie=async()=>{const t=(await zn.get(eTe)).data;let e,r;for(const n of t){const i=n.name;if(!e||Zke.gt(i,e))for(const s of n.assets){const a=s.name.split(".").pop();a&&Jke(a)&&(e=i,r=s.browser_download_url)}}return r},Qke={linux:["deb","AppImage"],mac:["dmg"],windows:["exe"],source:["zip","gz"]};Object.values(Qke).flat();const eTe="https://api.github.com/repos/reseau-constellation/iug/releases",Z8=t=>{window.open(t,"_blank")},tTe=_t()({name:"VCardActions",props:Qt(),setup(t,e){let{slots:r}=e;return Np({VBtn:{slim:!0,variant:"text"}}),Gt(()=>ae("div",{class:["v-card-actions",t.class],style:t.style},[r.default?.()])),{}}}),rTe=et({opacity:[Number,String],...Qt(),...ri()},"VCardSubtitle"),DO=_t()({name:"VCardSubtitle",props:rTe(),setup(t,e){let{slots:r}=e;return Gt(()=>ae(t.tag,{class:["v-card-subtitle",t.class],style:[{"--v-card-subtitle-opacity":t.opacity},t.style]},r)),{}}}),By=SR("v-card-title"),nTe=et({appendAvatar:String,appendIcon:$r,prependAvatar:String,prependIcon:$r,subtitle:{type:[String,Number,Boolean],default:void 0},title:{type:[String,Number,Boolean],default:void 0},...Qt(),...bl()},"VCardItem"),Dy=_t()({name:"VCardItem",props:nTe(),setup(t,e){let{slots:r}=e;return Gt(()=>{const n=!!(t.prependAvatar||t.prependIcon),i=!!(n||r.prepend),s=!!(t.appendAvatar||t.appendIcon),a=!!(s||r.append),o=!!(t.title!=null||r.title),c=!!(t.subtitle!=null||r.subtitle);return ae("div",{class:["v-card-item",t.class],style:t.style},[i&&ae("div",{key:"prepend",class:"v-card-item__prepend"},[r.prepend?ae(Di,{key:"prepend-defaults",disabled:!n,defaults:{VAvatar:{density:t.density,image:t.prependAvatar},VIcon:{density:t.density,icon:t.prependIcon}}},r.prepend):ae(ar,null,[t.prependAvatar&&ae(Oh,{key:"prepend-avatar",density:t.density,image:t.prependAvatar},null),t.prependIcon&&ae(Hr,{key:"prepend-icon",density:t.density,icon:t.prependIcon},null)])]),ae("div",{class:"v-card-item__content"},[o&&ae(By,{key:"title"},{default:()=>[r.title?.()??Rr(t.title)]}),c&&ae(DO,{key:"subtitle"},{default:()=>[r.subtitle?.()??Rr(t.subtitle)]}),r.default?.()]),a&&ae("div",{key:"append",class:"v-card-item__append"},[r.append?ae(Di,{key:"append-defaults",disabled:!s,defaults:{VAvatar:{density:t.density,image:t.appendAvatar},VIcon:{density:t.density,icon:t.appendIcon}}},r.append):ae(ar,null,[t.appendIcon&&ae(Hr,{key:"append-icon",density:t.density,icon:t.appendIcon},null),t.appendAvatar&&ae(Oh,{key:"append-avatar",density:t.density,image:t.appendAvatar},null)])])])}),{}}}),iTe=et({opacity:[Number,String],...Qt(),...ri()},"VCardText"),m0=_t()({name:"VCardText",props:iTe(),setup(t,e){let{slots:r}=e;return Gt(()=>ae(t.tag,{class:["v-card-text",t.class],style:[{"--v-card-text-opacity":t.opacity},t.style]},r)),{}}}),sTe=et({appendAvatar:String,appendIcon:$r,disabled:Boolean,flat:Boolean,hover:Boolean,image:String,link:{type:Boolean,default:void 0},prependAvatar:String,prependIcon:$r,ripple:{type:[Boolean,Object],default:!0},subtitle:{type:[String,Number,Boolean],default:void 0},text:{type:[String,Number,Boolean],default:void 0},title:{type:[String,Number,Boolean],default:void 0},...hd(),...Qt(),...bl(),...wl(),...h0(),...uO(),...D8(),...dO(),...Sc(),...L8(),...ri(),...Ei(),...md({variant:"elevated"})},"VCard"),Dh=_t()({name:"VCard",directives:{Ripple:Ay},props:sTe(),setup(t,e){let{attrs:r,slots:n}=e;const{themeClasses:i}=Yi(t),{borderClasses:s}=pd(t),{colorClasses:a,colorStyles:o,variantClasses:c}=Ey(t),{densityClasses:u}=Lu(t),{dimensionStyles:l}=_l(t),{elevationClasses:f}=p0(t),{loaderClasses:d}=N8(t),{locationStyles:h}=M8(t),{positionClasses:m}=hO(t),{roundedClasses:p}=Ec(t),g=F8(t,r),v=ve(()=>t.link!==!1&&g.isLink.value),y=ve(()=>!t.disabled&&t.link!==!1&&(t.link||g.isClickable.value));return Gt(()=>{const b=v.value?"a":t.tag,_=!!(n.title||t.title!=null),x=!!(n.subtitle||t.subtitle!=null),E=_||x,k=!!(n.append||t.appendAvatar||t.appendIcon),B=!!(n.prepend||t.prependAvatar||t.prependIcon),D=!!(n.image||t.image),z=E||B||k,U=!!(n.text||t.text!=null);return us(ae(b,zt({class:["v-card",{"v-card--disabled":t.disabled,"v-card--flat":t.flat,"v-card--hover":t.hover&&!(t.disabled||t.flat),"v-card--link":y.value},i.value,s.value,a.value,u.value,f.value,d.value,m.value,p.value,c.value,t.class],style:[o.value,l.value,h.value,t.style],onClick:y.value&&g.navigate,tabindex:t.disabled?-1:void 0},g.linkProps),{default:()=>[D&&ae("div",{key:"image",class:"v-card__image"},[n.image?ae(Di,{key:"image-defaults",disabled:!t.image,defaults:{VImg:{cover:!0,src:t.image}}},n.image):ae(Q1,{key:"image-img",cover:!0,src:t.image},null)]),ae(fO,{name:"v-card",active:!!t.loading,color:typeof t.loading=="boolean"?void 0:t.loading},{default:n.loader}),z&&ae(Dy,{key:"item",prependAvatar:t.prependAvatar,prependIcon:t.prependIcon,title:t.title,subtitle:t.subtitle,appendAvatar:t.appendAvatar,appendIcon:t.appendIcon},{default:n.item,prepend:n.prepend,title:n.title,subtitle:n.subtitle,append:n.append}),U&&ae(m0,{key:"text"},{default:()=>[n.text?.()??t.text]}),n.default?.(),n.actions&&ae(tTe,null,{default:n.actions}),Sy(y.value,"v-card")]}),[[ud("ripple"),y.value&&t.ripple]])}),{}}}),th=Pn({__name:"CarteLien",props:{lien:{},titre:{},icne:{},emphase:{type:Boolean}},setup(t){return(e,r)=>(Vt(),hr(Dh,{class:"ma-2 pa-2",variant:"outlined",color:e.emphase?"primary":"secondary",onClick:r[0]||(r[0]=()=>Ve(Z8)(e.lien))},{default:Ge(()=>[ae(Dy,null,{default:Ge(()=>[ae(By,null,{default:Ge(()=>[zr(Rr(e.titre),1)]),_:1})]),_:1}),ae(m0,{class:"text-center"},{default:Ge(()=>[ae(Hr,{icon:e.icne,size:"50"},null,8,["icon"])]),_:1})]),_:1},8,["color"]))}});var aTe={};const $j="julien.malard@mail.mcgill.ca",oTe="https://github.com/reseau-constellation",cTe="https://drive.google.com/drive/folders/1L-nZ2rhkJUtyL0L-mpSxzOT9Y5BdCruj?usp=sharing",lTe="https://docs.google.com/spreadsheets/d/15_Kmiu2MRqCf23ZspeD-Ex9x3cUYlisJM9cc9ynayow/",zl=aTe.VITE_ID_NUE_DONNES||"/orbitdb/zdpuAvWUWrZouLuJ5PVdEhNJ85tAPPuJcmw3hiDQMRsMkqgoy",h1="11df704f-0b99-41f9-92fb-e8394ab83f88",uTe="/orbitdb/zdpuAwz2z5zKLHzKrdWY5bytWudXc6B2XCdH8x2uKj7HBxoYq",fTe="/orbitdb/zdpuArcD64xg1vnrGutGyMSESiGQomXFxAxy4kPTUP1L6bDzV",dTe="/orbitdb/zdpuAycMzQDbpJt6xvMjWGAHyn2Wya6RS6hQcKdK9QNZispex",hTe="/orbitdb/zdpuAzaZ3u9oPYqF9gukynpSvM2fMxSCD4wLx4qrxcq9R8A8k",pTe="/orbitdb/zdpuB2fu7mWLyhMxxBatYBPsBCiQcMW6xqsggb9HMKHZcnMtt",jC="idObservation",d3="heureObservation",VC="latitude",qC="longitude",zC="prcipitation",W2={licence:"ODbl-1_0",nues:[zl],tableaux:[{clef:h1,cols:[{idVariable:uTe,idColonne:jC},{idVariable:fTe,idColonne:d3},{idVariable:dTe,idColonne:VC},{idVariable:hTe,idColonne:qC},{idVariable:pTe,idColonne:zC}]}]},mTe={class:"d-flex justify-center flex-wrap mb-6"},gTe=Pn({__name:"SectionObtConstellation",props:{nEtapes:{},etape:{}},emits:["retour","avancer"],setup(t,{emit:e}){const r=e,{_:n}=Fu(),{$:i}=n(),{:s}=Hp(),{mdAndUp:a}=Bu(),o=ze();hn(async()=>{o.value=await Fie()});const c=ve(()=>`https://appli.rseau-constellation.ca/?lg=${s.value}`),u=ve(()=>`https://docu.rseau-constellation.ca/${s.value}`);return(l,f)=>(Vt(),hr(Iy,{"n-etapes":l.nEtapes,etape:l.etape,onRetour:f[0]||(f[0]=()=>r("retour")),onAvancer:f[1]||(f[1]=()=>r("avancer"))},{default:Ge(()=>[ae(Gi,{class:rc([Ve(a)?"text-h2":"text-h3","text-center"]),cols:12},{default:Ge(()=>[zr(Rr(Ve(i)("obtConstellation.titre")),1)]),_:1},8,["class"]),ae(Gi,{cols:12},{default:Ge(()=>[bi("div",mTe,[o.value?(Vt(),hr(th,{key:0,titre:Ve(i)("obtConstellation.options.tlcharger"),icne:"mdi-download-outline",lien:o.value,emphase:""},null,8,["titre","lien"])):Qs("",!0),ae(th,{titre:Ve(i)("obtConstellation.options.navig"),icne:"mdi-open-in-new",lien:c.value,emphase:!o.value},null,8,["titre","lien","emphase"]),ae(th,{titre:Ve(i)("obtConstellation.options.docu"),icne:"mdi-book-outline",lien:u.value},null,8,["titre","lien"]),ae(th,{titre:Ve(i)("obtConstellation.options.codeSource"),icne:"mdi-xml",lien:Ve(oTe)},null,8,["titre","lien"])])]),_:1})]),_:1},8,["n-etapes","etape"]))}}),vTe={class:"d-flex justify-center flex-wrap mb-6"},yTe="https://climate.meteo.gc.ca",bTe=Pn({__name:"SectionTlchargerDonnes",props:{nEtapes:{},etape:{}},emits:["retour","avancer"],setup(t,{emit:e}){const r=e,{mdAndUp:n}=Bu(),{_:i}=Fu(),{$:s}=i({});return(a,o)=>(Vt(),hr(Iy,{"n-etapes":a.nEtapes,etape:a.etape,onRetour:o[1]||(o[1]=()=>r("retour")),onAvancer:o[2]||(o[2]=()=>r("avancer"))},{default:Ge(()=>[ae(Gi,{class:rc([Ve(n)?"text-h2":"text-h3","text-center"]),cols:12},{default:Ge(()=>[zr(Rr(Ve(s)("donnes.titre")),1)]),_:1},8,["class"]),ae(Gi,{cols:12},{default:Ge(()=>[bi("div",vTe,[ae(th,{titre:Ve(s)("donnes.tlcharger"),lien:Ve(cTe),icne:"mdi-download-outline",emphase:""},null,8,["titre","lien"]),ae(th,{titre:Ve(s)("donnes.lienDynamique"),lien:Ve(lTe),icne:"mdi-link"},null,8,["titre","lien"])])]),_:1}),ae(Gi,{cols:12,class:"text-center"},{default:Ge(()=>[bi("span",{class:"text-disabled",onClick:o[0]||(o[0]=()=>Ve(Z8)("https://climate.meteo.gc.ca"))},[zr(Rr(Ve(s)("donnes.crdits"))+" "+Rr(yTe)+" ",1),ae(Hr,{icon:"mdi-open-in-new",size:"small"})])]),_:1})]),_:1},8,["n-etapes","etape"]))}}),Uj=(t,e)=>{for(const r of Object.keys(e))t.on(r,e[r])},Lie=t=>{for(const e of Object.keys(t)){const r=t[e];r&&wf(r.cancel)&&r.cancel()}},wTe=t=>!t||typeof t.charAt!="function"?t:t.charAt(0).toUpperCase()+t.slice(1),wf=t=>typeof t=="function",g0=(t,e,r)=>{for(const n in r){const i="set"+wTe(n);t[i]?Ft(()=>r[n],(s,a)=>{t[i](s,a)}):e[i]&&Ft(()=>r[n],s=>{e[i](s)})}},v0=(t,e,r={})=>{const n={...r};for(const i in t){const s=e[i],a=t[i];s&&(s&&s.custom===!0||a!==void 0&&(n[i]=a))}return n},Yp=t=>{const e={},r={};for(const n in t)if(n.startsWith("on")&&!n.startsWith("onUpdate")&&n!=="onReady"){const i=n.slice(2).toLocaleLowerCase();e[i]=t[n]}else r[n]=t[n];return{listeners:e,attrs:r}},_Te=async t=>{const e=await Promise.all([qt(()=>import("./marker-icon-2x-D4k_ikNW.js"),[]),qt(()=>import("./marker-icon-C2eJqgqv.js"),[]),qt(()=>import("./marker-shadow-DU6CIJ0p.js"),[])]);delete t.Default.prototype._getIconUrl,t.Default.mergeOptions({iconRetinaUrl:e[0].default,iconUrl:e[1].default,shadowUrl:e[2].default})},G2=t=>{const e=ze((...n)=>console.warn(`Method ${t} has been invoked without being replaced`)),r=(...n)=>e.value(...n);return r.wrapped=e,dn(t,r),r},K2=(t,e)=>t.wrapped.value=e,du=typeof self=="object"&&self.self===self&&self||typeof Bi=="object"&&Bi.global===Bi&&Bi||globalThis,cc=t=>{const e=Zt(t);if(e===void 0)throw new Error(`Attempt to inject ${t.description} before it was provided.`);return e},y0=Symbol("useGlobalLeaflet"),My=Symbol("addLayer"),$ie=Symbol("removeLayer"),Uie=Symbol("registerControl"),xTe=Symbol("registerLayerControl"),jie=Symbol("canSetParentHtml"),Vie=Symbol("setParentHtml"),qie=Symbol("setIcon"),zie=Symbol("bindPopup"),STe=Symbol("bindTooltip"),Hie=Symbol("unbindPopup"),ETe=Symbol("unbindTooltip"),Ny={options:{type:Object,default:()=>({}),custom:!0}},Fy=t=>({options:t.options,methods:{}}),Zp={...Ny,pane:{type:String},attribution:{type:String},name:{type:String,custom:!0},layerType:{type:String,custom:!0},visible:{type:Boolean,custom:!0,default:!0}},Wie=(t,e,r)=>{const n=cc(My),i=cc($ie),{options:s,methods:a}=Fy(t),o=v0(t,Zp,s),c=()=>n({leafletObject:e.value}),u=()=>i({leafletObject:e.value}),l={...a,setAttribution(f){u(),e.value.options.attribution=f,t.visible&&c()},setName(){u(),t.visible&&c()},setLayerType(){u(),t.visible&&c()},setVisible(f){e.value&&(f?c():u())},bindPopup(f){if(!e.value||!wf(e.value.bindPopup)){console.warn("Attempt to bind popup before bindPopup method available on layer.");return}e.value.bindPopup(f)},bindTooltip(f){if(!e.value||!wf(e.value.bindTooltip)){console.warn("Attempt to bind tooltip before bindTooltip method available on layer.");return}e.value.bindTooltip(f)},unbindTooltip(){e.value&&(wf(e.value.closeTooltip)&&e.value.closeTooltip(),wf(e.value.unbindTooltip)&&e.value.unbindTooltip())},unbindPopup(){e.value&&(wf(e.value.closePopup)&&e.value.closePopup(),wf(e.value.unbindPopup)&&e.value.unbindPopup())},updateVisibleProp(f){r.emit("update:visible",f)}};return dn(zie,l.bindPopup),dn(STe,l.bindTooltip),dn(Hie,l.unbindPopup),dn(ETe,l.unbindTooltip),ta(()=>{l.unbindPopup(),l.unbindTooltip(),u()}),{options:o,methods:l}},kTe=(t,e)=>{if(t&&e.default)return ps("div",{style:{display:"none"}},e.default())},TTe={...Zp,interactive:{type:Boolean,default:void 0},bubblingMouseEvents:{type:Boolean,default:void 0}},Gie={...TTe,stroke:{type:Boolean,default:void 0},color:{type:String},weight:{type:Number},opacity:{type:Number},lineCap:{type:String},lineJoin:{type:String},dashArray:{type:String},dashOffset:{type:String},fill:{type:Boolean,default:void 0},fillColor:{type:String},fillOpacity:{type:Number},fillRule:{type:String},className:{type:String}},ATe={...Gie,radius:{type:Number},latLng:{type:[Object,Array],required:!0,custom:!0}};({...ATe});const Jp={...Ny,position:{type:String}},CTe=(t,e)=>{const{options:r,methods:n}=Fy(t),i=v0(t,Jp,r),s={...n,setPosition(a){e.value&&e.value.setPosition(a)}};return ta(()=>{e.value&&e.value.remove()}),{options:i,methods:s}},ITe=t=>t.default?ps("div",{ref:"root"},t.default()):null;({...Jp});({...Jp});({...Jp});({...Jp});({...Jp});const Kie={...Zp};({...Kie});({...Kie});const MO={...Zp,opacity:{type:Number},zIndex:{type:Number},tileSize:{type:[Number,Array,Object]},noWrap:{type:Boolean,default:void 0},minZoom:{type:Number},maxZoom:{type:Number},className:{type:String}},Xie=(t,e,r)=>{const{options:n,methods:i}=Wie(t,e,r),s=v0(t,MO,n),a={...i,setTileComponent(){var o;(o=e.value)==null||o.redraw()}};return ta(()=>{e.value.off()}),{options:s,methods:a}},PTe=(t,e,r,n)=>t.extend({initialize(i){this.tileComponents={},this.on("tileunload",this._unloadTile),r.setOptions(this,i)},createTile(i){const s=this._tileCoordsToKey(i);this.tileComponents[s]=e.create("div");const a=ps({setup:n,props:["coords"]},{coords:i});return Rve(a,this.tileComponents[s]),this.tileComponents[s]},_unloadTile(i){const s=this._tileCoordsToKey(i.coords);this.tileComponents[s]&&(this.tileComponents[s].innerHTML="",this.tileComponents[s]=void 0)}});({...MO});const jj={iconUrl:{type:String},iconRetinaUrl:{type:String},iconSize:{type:[Object,Array]},iconAnchor:{type:[Object,Array]},popupAnchor:{type:[Object,Array]},tooltipAnchor:{type:[Object,Array]},shadowUrl:{type:String},shadowRetinaUrl:{type:String},shadowSize:{type:[Object,Array]},shadowAnchor:{type:[Object,Array]},bgPos:{type:[Object,Array]},className:{type:String}};({...jj,...Ny});({...Zp});function Yie(t,e,r){var n,i,s;e===void 0&&(e=50),r===void 0&&(r={});var a=(n=r.isImmediate)!=null&&n,o=(i=r.callback)!=null&&i,c=r.maxWait,u=Date.now(),l=[];function f(){if(c!==void 0){var h=Date.now()-u;if(h+e>=c)return c-h}return e}var d=function(){var h=[].slice.call(arguments),m=this;return new Promise(function(p,g){var v=a&&s===void 0;if(s!==void 0&&clearTimeout(s),s=setTimeout(function(){if(s=void 0,u=Date.now(),!a){var b=t.apply(m,h);o&&o(b),l.forEach(function(_){return(0,_.resolve)(b)}),l=[]}},f()),v){var y=t.apply(m,h);return o&&o(y),p(y)}l.push({resolve:p,reject:g})})};return d.cancel=function(h){s!==void 0&&clearTimeout(s),l.forEach(function(m){return(0,m.reject)(h)}),l=[]},d}const Vj={...Ny,center:{type:[Object,Array]},bounds:{type:[Array,Object]},maxBounds:{type:[Array,Object]},zoom:{type:Number},minZoom:{type:Number},maxZoom:{type:Number},paddingBottomRight:{type:[Object,Array]},paddingTopLeft:{type:Object},padding:{type:Object},worldCopyJump:{type:Boolean,default:void 0},crs:{type:[String,Object]},maxBoundsViscosity:{type:Number},inertia:{type:Boolean,default:void 0},inertiaDeceleration:{type:Number},inertiaMaxSpeed:{type:Number},easeLinearity:{type:Number},zoomAnimation:{type:Boolean,default:void 0},zoomAnimationThreshold:{type:Number},fadeAnimation:{type:Boolean,default:void 0},markerZoomAnimation:{type:Boolean,default:void 0},noBlockingAnimations:{type:Boolean,default:void 0},useGlobalLeaflet:{type:Boolean,default:!0,custom:!0}},RTe=Pn({inheritAttrs:!1,emits:["ready","update:zoom","update:center","update:bounds"],props:Vj,setup(t,e){const r=ze(),n=yi({ready:!1,layersToAdd:[],layersInControl:[]}),{options:i}=Fy(t),s=v0(t,Vj,i),{listeners:a,attrs:o}=Yp(e.attrs),c=G2(My),u=G2($ie),l=G2(Uie),f=G2(xTe);dn(y0,t.useGlobalLeaflet);const d=ve(()=>{const v={};return t.noBlockingAnimations&&(v.animate=!1),v}),h=ve(()=>{const v=d.value;return t.padding&&(v.padding=t.padding),t.paddingTopLeft&&(v.paddingTopLeft=t.paddingTopLeft),t.paddingBottomRight&&(v.paddingBottomRight=t.paddingBottomRight),v}),m={moveend:Yie(v=>{n.leafletRef&&(e.emit("update:zoom",n.leafletRef.getZoom()),e.emit("update:center",n.leafletRef.getCenter()),e.emit("update:bounds",n.leafletRef.getBounds()))}),overlayadd(v){const y=n.layersInControl.find(b=>b.name===v.name);y&&y.updateVisibleProp(!0)},overlayremove(v){const y=n.layersInControl.find(b=>b.name===v.name);y&&y.updateVisibleProp(!1)}};hn(async()=>{t.useGlobalLeaflet&&(du.L=du.L||await qt(()=>import("./leaflet-src-cPpeX4mR.js").then(D=>D.l),[]));const{map:v,CRS:y,Icon:b,latLngBounds:_,latLng:x,stamp:E}=t.useGlobalLeaflet?du.L:await qt(()=>import("./leaflet-src.esm-HdBnhJze.js"),[]);try{s.beforeMapMount&&await s.beforeMapMount()}catch(D){console.error(`The following error occurred running the provided beforeMapMount hook ${D.message}`)}await _Te(b);const k=typeof s.crs=="string"?y[s.crs]:s.crs;s.crs=k||y.EPSG3857;const B={addLayer(D){D.layerType!==void 0&&(n.layerControl===void 0?n.layersToAdd.push(D):n.layersInControl.find(z=>E(z.leafletObject)===E(D.leafletObject))||(n.layerControl.addLayer(D),n.layersInControl.push(D))),D.visible!==!1&&n.leafletRef.addLayer(D.leafletObject)},removeLayer(D){D.layerType!==void 0&&(n.layerControl===void 0?n.layersToAdd=n.layersToAdd.filter(z=>z.name!==D.name):(n.layerControl.removeLayer(D.leafletObject),n.layersInControl=n.layersInControl.filter(z=>E(z.leafletObject)!==E(D.leafletObject)))),n.leafletRef.removeLayer(D.leafletObject)},registerLayerControl(D){n.layerControl=D,n.layersToAdd.forEach(z=>{n.layerControl.addLayer(z)}),n.layersToAdd=[],l(D)},registerControl(D){n.leafletRef.addControl(D.leafletObject)},setZoom(D){const z=n.leafletRef.getZoom();D!==z&&n.leafletRef.setZoom(D,d.value)},setCrs(D){const z=n.leafletRef.getBounds();n.leafletRef.options.crs=D,n.leafletRef.fitBounds(z,{animate:!1,padding:[0,0]})},fitBounds(D){n.leafletRef.fitBounds(D,h.value)},setBounds(D){if(!D)return;const z=_(D);z.isValid()&&!(n.lastSetBounds||n.leafletRef.getBounds()).equals(z,0)&&(n.lastSetBounds=z,n.leafletRef.fitBounds(z))},setCenter(D){if(D==null)return;const z=x(D),U=n.lastSetCenter||n.leafletRef.getCenter();(U.lat!==z.lat||U.lng!==z.lng)&&(n.lastSetCenter=z,n.leafletRef.panTo(z,d.value))}};K2(c,B.addLayer),K2(u,B.removeLayer),K2(l,B.registerControl),K2(f,B.registerLayerControl),n.leafletRef=a0(v(r.value,s)),g0(B,n.leafletRef,t),Uj(n.leafletRef,m),Uj(n.leafletRef,a),n.ready=!0,Cn(()=>e.emit("ready",n.leafletRef))}),hs(()=>{Lie(m),n.leafletRef&&(n.leafletRef.off(),n.leafletRef.remove())});const p=ve(()=>n.leafletRef),g=ve(()=>n.ready);return{root:r,ready:g,leafletObject:p,attrs:o}},render({attrs:t}){return t.style||(t.style={}),t.style.width||(t.style.width="100%"),t.style.height||(t.style.height="100%"),ps("div",{...t,ref:"root"},this.ready&&this.$slots.default?this.$slots.default():{})}}),OTe=["Symbol(Comment)","Symbol(Text)"],BTe=["LTooltip","LPopup"],Zie={...Zp,draggable:{type:Boolean,default:void 0},icon:{type:[Object]},zIndexOffset:{type:Number},latLng:{type:[Object,Array],custom:!0,required:!0}},DTe=(t,e,r)=>{const{options:n,methods:i}=Wie(t,e,r),s=v0(t,Zie,n),a={...i,setDraggable(o){e.value.dragging&&(o?e.value.dragging.enable():e.value.dragging.disable())},latLngSync(o){r.emit("update:latLng",o.latlng),r.emit("update:lat-lng",o.latlng)},setLatLng(o){if(o!=null&&e.value){const c=e.value.getLatLng();(!c||!c.equals(o))&&e.value.setLatLng(o)}}};return{options:s,methods:a}},MTe=(t,e)=>{const r=e.slots.default&&e.slots.default();return r&&r.length&&r.some(NTe)};function NTe(t){return!(OTe.includes(t.type.toString())||BTe.includes(t.type.name))}const FTe=Pn({name:"LMarker",props:Zie,setup(t,e){const r=ze(),n=ze(!1),i=Zt(y0),s=cc(My);dn(jie,()=>{var u;return!!((u=r.value)!=null&&u.getElement())}),dn(Vie,u=>{var l,f;const d=wf((l=r.value)==null?void 0:l.getElement)&&((f=r.value)==null?void 0:f.getElement());d&&(d.innerHTML=u)}),dn(qie,u=>{var l;return((l=r.value)==null?void 0:l.setIcon)&&r.value.setIcon(u)});const{options:a,methods:o}=DTe(t,r,e),c={moveHandler:Yie(o.latLngSync)};return hn(async()=>{const{marker:u,divIcon:l}=i?du.L:await qt(()=>import("./leaflet-src.esm-HdBnhJze.js"),[]);MTe(a,e)&&(a.icon=l({className:""})),r.value=a0(u(t.latLng,a));const{listeners:f}=Yp(e.attrs);r.value.on(f),r.value.on("move",c.moveHandler),g0(o,r.value,t),s({...t,...o,leafletObject:r.value}),n.value=!0,Cn(()=>e.emit("ready",r.value))}),hs(()=>Lie(c)),{ready:n,leafletObject:r}},render(){return kTe(this.ready,this.$slots)}}),LTe={...Gie,smoothFactor:{type:Number},noClip:{type:Boolean,default:void 0},latLngs:{type:Array,required:!0,custom:!0}},qj={...LTe},Jie={...Ny,content:{type:String,default:null}},$Te=(t,e)=>{const{options:r,methods:n}=Fy(t),i={...n,setContent(s){e.value&&s!==null&&s!==void 0&&e.value.setContent(s)}};return{options:r,methods:i}},UTe=t=>t.default?ps("div",{ref:"root"},t.default()):null,jTe={...Jie,latLng:{type:[Object,Array],default:()=>[]}},VTe=(t,e)=>{const{options:r,methods:n}=$Te(t,e);return{options:r,methods:n}},qTe=Pn({name:"LPopup",props:jTe,setup(t,e){const r=ze(),n=ze(null),i=Zt(y0),s=cc(zie),a=cc(Hie),{options:o,methods:c}=VTe(t,r);return hn(async()=>{const{popup:u}=i?du.L:await qt(()=>import("./leaflet-src.esm-HdBnhJze.js"),[]);r.value=a0(u(o)),t.latLng!==void 0&&r.value.setLatLng(t.latLng),g0(c,r.value,t);const{listeners:l}=Yp(e.attrs);r.value.on(l),r.value.setContent(t.content||n.value||""),s(r.value),Cn(()=>e.emit("ready",r.value))}),hs(()=>{a()}),{root:n,leafletObject:r}},render(){return UTe(this.$slots)}});({...qj,latLngs:{...qj.latLngs}});const NO={...MO,tms:{type:Boolean,default:void 0},subdomains:{type:[String,Array],validator:t=>typeof t=="string"?!0:Array.isArray(t)?t.every(e=>typeof e=="string"):!1},detectRetina:{type:Boolean,default:void 0},url:{type:String,required:!0,custom:!0}},zTe=(t,e,r)=>{const{options:n,methods:i}=Xie(t,e,r),s=v0(t,NO,n),a={...i};return{options:s,methods:a}},HTe=Pn({props:NO,setup(t,e){const r=ze(),n=Zt(y0),i=cc(My),{options:s,methods:a}=zTe(t,r,e);return hn(async()=>{const{tileLayer:o}=n?du.L:await qt(()=>import("./leaflet-src.esm-HdBnhJze.js"),[]);r.value=a0(o(t.url,s));const{listeners:c}=Yp(e.attrs);r.value.on(c),g0(a,r.value,t),i({...t,...a,leafletObject:r.value}),Cn(()=>e.emit("ready",r.value))}),{leafletObject:r}},render(){return null}});({...Jie});({...NO});function h3(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function WTe(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function FO(t){let e,r,n;t.length!==2?(e=h3,r=(o,c)=>h3(t(o),c),n=(o,c)=>t(o)-c):(e=t===h3||t===WTe?t:GTe,r=t,n=t);function i(o,c,u=0,l=o.length){if(u<l){if(e(c,c)!==0)return l;do{const f=u+l>>>1;r(o[f],c)<0?u=f+1:l=f}while(u<l)}return u}function s(o,c,u=0,l=o.length){if(u<l){if(e(c,c)!==0)return l;do{const f=u+l>>>1;r(o[f],c)<=0?u=f+1:l=f}while(u<l)}return u}function a(o,c,u=0,l=o.length){const f=i(o,c,u,l-1);return f>u&&n(o[f-1],c)>-n(o[f],c)?f-1:f}return{left:i,center:a,right:s}}function GTe(){return 0}function KTe(t){return t===null?NaN:+t}const XTe=FO(h3),YTe=XTe.right;FO(KTe).center;function ZTe(t,e){let r,n;if(e===void 0)for(const i of t)i!=null&&(r===void 0?i>=i&&(r=n=i):(r>i&&(r=i),n<i&&(n=i)));else{let i=-1;for(let s of t)(s=e(s,++i,t))!=null&&(r===void 0?s>=s&&(r=n=s):(r>s&&(r=s),n<s&&(n=s)))}return[r,n]}const JTe=Math.sqrt(50),QTe=Math.sqrt(10),eAe=Math.sqrt(2);function g4(t,e,r){const n=(e-t)/Math.max(0,r),i=Math.floor(Math.log10(n)),s=n/Math.pow(10,i),a=s>=JTe?10:s>=QTe?5:s>=eAe?2:1;let o,c,u;return i<0?(u=Math.pow(10,-i)/a,o=Math.round(t*u),c=Math.round(e*u),o/u<t&&++o,c/u>e&&--c,u=-u):(u=Math.pow(10,i)*a,o=Math.round(t/u),c=Math.round(e/u),o*u<t&&++o,c*u>e&&--c),c<o&&.5<=r&&r<2?g4(t,e,r*2):[o,c,u]}function tAe(t,e,r){if(e=+e,t=+t,r=+r,!(r>0))return[];if(t===e)return[t];const n=e<t,[i,s,a]=n?g4(e,t,r):g4(t,e,r);if(!(s>=i))return[];const o=s-i+1,c=new Array(o);if(n)if(a<0)for(let u=0;u<o;++u)c[u]=(s-u)/-a;else for(let u=0;u<o;++u)c[u]=(s-u)*a;else if(a<0)for(let u=0;u<o;++u)c[u]=(i+u)/-a;else for(let u=0;u<o;++u)c[u]=(i+u)*a;return c}function HC(t,e,r){return e=+e,t=+t,r=+r,g4(t,e,r)[2]}function WC(t,e,r){e=+e,t=+t,r=+r;const n=e<t,i=n?HC(e,t,r):HC(t,e,r);return(n?-1:1)*(i<0?1/-i:i)}function rAe(t,e){let r;if(e===void 0)for(const n of t)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);else{let n=-1;for(let i of t)(i=e(i,++n,t))!=null&&(r<i||r===void 0&&i>=i)&&(r=i)}return r}function nAe(t){return t}var z9=1,H9=2,GC=3,sg=4,zj=1e-6;function iAe(t){return"translate("+t+",0)"}function sAe(t){return"translate(0,"+t+")"}function aAe(t){return e=>+t(e)}function oAe(t,e){return e=Math.max(0,t.bandwidth()-e*2)/2,t.round()&&(e=Math.round(e)),r=>+t(r)+e}function cAe(){return!this.__axis}function Qie(t,e){var r=[],n=null,i=null,s=6,a=6,o=3,c=typeof window<"u"&&window.devicePixelRatio>1?0:.5,u=t===z9||t===sg?-1:1,l=t===sg||t===H9?"x":"y",f=t===z9||t===GC?iAe:sAe;function d(h){var m=n??(e.ticks?e.ticks.apply(e,r):e.domain()),p=i??(e.tickFormat?e.tickFormat.apply(e,r):nAe),g=Math.max(s,0)+o,v=e.range(),y=+v[0]+c,b=+v[v.length-1]+c,_=(e.bandwidth?oAe:aAe)(e.copy(),c),x=h.selection?h.selection():h,E=x.selectAll(".domain").data([null]),k=x.selectAll(".tick").data(m,e).order(),B=k.exit(),D=k.enter().append("g").attr("class","tick"),z=k.select("line"),U=k.select("text");E=E.merge(E.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),k=k.merge(D),z=z.merge(D.append("line").attr("stroke","currentColor").attr(l+"2",u*s)),U=U.merge(D.append("text").attr("fill","currentColor").attr(l,u*g).attr("dy",t===z9?"0em":t===GC?"0.71em":"0.32em")),h!==x&&(E=E.transition(h),k=k.transition(h),z=z.transition(h),U=U.transition(h),B=B.transition(h).attr("opacity",zj).attr("transform",function(S){return isFinite(S=_(S))?f(S+c):this.getAttribute("transform")}),D.attr("opacity",zj).attr("transform",function(S){var T=this.parentNode.__axis;return f((T&&isFinite(T=T(S))?T:_(S))+c)})),B.remove(),E.attr("d",t===sg||t===H9?a?"M"+u*a+","+y+"H"+c+"V"+b+"H"+u*a:"M"+c+","+y+"V"+b:a?"M"+y+","+u*a+"V"+c+"H"+b+"V"+u*a:"M"+y+","+c+"H"+b),k.attr("opacity",1).attr("transform",function(S){return f(_(S)+c)}),z.attr(l+"2",u*s),U.attr(l,u*g).text(p),x.filter(cAe).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===H9?"start":t===sg?"end":"middle"),x.each(function(){this.__axis=_})}return d.scale=function(h){return arguments.length?(e=h,d):e},d.ticks=function(){return r=Array.from(arguments),d},d.tickArguments=function(h){return arguments.length?(r=h==null?[]:Array.from(h),d):r.slice()},d.tickValues=function(h){return arguments.length?(n=h==null?null:Array.from(h),d):n&&n.slice()},d.tickFormat=function(h){return arguments.length?(i=h,d):i},d.tickSize=function(h){return arguments.length?(s=a=+h,d):s},d.tickSizeInner=function(h){return arguments.length?(s=+h,d):s},d.tickSizeOuter=function(h){return arguments.length?(a=+h,d):a},d.tickPadding=function(h){return arguments.length?(o=+h,d):o},d.offset=function(h){return arguments.length?(c=+h,d):c},d}function lAe(t){return Qie(GC,t)}function uAe(t){return Qie(sg,t)}var fAe={value:()=>{}};function ese(){for(var t=0,e=arguments.length,r={},n;t<e;++t){if(!(n=arguments[t]+"")||n in r||/[\s.]/.test(n))throw new Error("illegal type: "+n);r[n]=[]}return new p3(r)}function p3(t){this._=t}function dAe(t,e){return t.trim().split(/^|\s+/).map(function(r){var n="",i=r.indexOf(".");if(i>=0&&(n=r.slice(i+1),r=r.slice(0,i)),r&&!e.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:n}})}p3.prototype=ese.prototype={constructor:p3,on:function(t,e){var r=this._,n=dAe(t+"",r),i,s=-1,a=n.length;if(arguments.length<2){for(;++s<a;)if((i=(t=n[s]).type)&&(i=hAe(r[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++s<a;)if(i=(t=n[s]).type)r[i]=Hj(r[i],t.name,e);else if(e==null)for(i in r)r[i]=Hj(r[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var r in e)t[r]=e[r].slice();return new p3(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var r=new Array(i),n=0,i,s;n<i;++n)r[n]=arguments[n+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=this._[t],n=0,i=s.length;n<i;++n)s[n].value.apply(e,r)},apply:function(t,e,r){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var n=this._[t],i=0,s=n.length;i<s;++i)n[i].value.apply(e,r)}};function hAe(t,e){for(var r=0,n=t.length,i;r<n;++r)if((i=t[r]).name===e)return i.value}function Hj(t,e,r){for(var n=0,i=t.length;n<i;++n)if(t[n].name===e){t[n]=fAe,t=t.slice(0,n).concat(t.slice(n+1));break}return r!=null&&t.push({name:e,value:r}),t}var KC="http://www.w3.org/1999/xhtml";const Wj={svg:"http://www.w3.org/2000/svg",xhtml:KC,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function J8(t){var e=t+="",r=e.indexOf(":");return r>=0&&(e=t.slice(0,r))!=="xmlns"&&(t=t.slice(r+1)),Wj.hasOwnProperty(e)?{space:Wj[e],local:t}:t}function pAe(t){return function(){var e=this.ownerDocument,r=this.namespaceURI;return r===KC&&e.documentElement.namespaceURI===KC?e.createElement(t):e.createElementNS(r,t)}}function mAe(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function tse(t){var e=J8(t);return(e.local?mAe:pAe)(e)}function gAe(){}function LO(t){return t==null?gAe:function(){return this.querySelector(t)}}function vAe(t){typeof t!="function"&&(t=LO(t));for(var e=this._groups,r=e.length,n=new Array(r),i=0;i<r;++i)for(var s=e[i],a=s.length,o=n[i]=new Array(a),c,u,l=0;l<a;++l)(c=s[l])&&(u=t.call(c,c.__data__,l,s))&&("__data__"in c&&(u.__data__=c.__data__),o[l]=u);return new Ja(n,this._parents)}function yAe(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function bAe(){return[]}function rse(t){return t==null?bAe:function(){return this.querySelectorAll(t)}}function wAe(t){return function(){return yAe(t.apply(this,arguments))}}function _Ae(t){typeof t=="function"?t=wAe(t):t=rse(t);for(var e=this._groups,r=e.length,n=[],i=[],s=0;s<r;++s)for(var a=e[s],o=a.length,c,u=0;u<o;++u)(c=a[u])&&(n.push(t.call(c,c.__data__,u,a)),i.push(c));return new Ja(n,i)}function nse(t){return function(){return this.matches(t)}}function ise(t){return function(e){return e.matches(t)}}var xAe=Array.prototype.find;function SAe(t){return function(){return xAe.call(this.children,t)}}function EAe(){return this.firstElementChild}function kAe(t){return this.select(t==null?EAe:SAe(typeof t=="function"?t:ise(t)))}var TAe=Array.prototype.filter;function AAe(){return Array.from(this.children)}function CAe(t){return function(){return TAe.call(this.children,t)}}function IAe(t){return this.selectAll(t==null?AAe:CAe(typeof t=="function"?t:ise(t)))}function PAe(t){typeof t!="function"&&(t=nse(t));for(var e=this._groups,r=e.length,n=new Array(r),i=0;i<r;++i)for(var s=e[i],a=s.length,o=n[i]=[],c,u=0;u<a;++u)(c=s[u])&&t.call(c,c.__data__,u,s)&&o.push(c);return new Ja(n,this._parents)}function sse(t){return new Array(t.length)}function RAe(){return new Ja(this._enter||this._groups.map(sse),this._parents)}function v4(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}v4.prototype={constructor:v4,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function OAe(t){return function(){return t}}function BAe(t,e,r,n,i,s){for(var a=0,o,c=e.length,u=s.length;a<u;++a)(o=e[a])?(o.__data__=s[a],n[a]=o):r[a]=new v4(t,s[a]);for(;a<c;++a)(o=e[a])&&(i[a]=o)}function DAe(t,e,r,n,i,s,a){var o,c,u=new Map,l=e.length,f=s.length,d=new Array(l),h;for(o=0;o<l;++o)(c=e[o])&&(d[o]=h=a.call(c,c.__data__,o,e)+"",u.has(h)?i[o]=c:u.set(h,c));for(o=0;o<f;++o)h=a.call(t,s[o],o,s)+"",(c=u.get(h))?(n[o]=c,c.__data__=s[o],u.delete(h)):r[o]=new v4(t,s[o]);for(o=0;o<l;++o)(c=e[o])&&u.get(d[o])===c&&(i[o]=c)}function MAe(t){return t.__data__}function NAe(t,e){if(!arguments.length)return Array.from(this,MAe);var r=e?DAe:BAe,n=this._parents,i=this._groups;typeof t!="function"&&(t=OAe(t));for(var s=i.length,a=new Array(s),o=new Array(s),c=new Array(s),u=0;u<s;++u){var l=n[u],f=i[u],d=f.length,h=FAe(t.call(l,l&&l.__data__,u,n)),m=h.length,p=o[u]=new Array(m),g=a[u]=new Array(m),v=c[u]=new Array(d);r(l,f,p,g,v,h,e);for(var y=0,b=0,_,x;y<m;++y)if(_=p[y]){for(y>=b&&(b=y+1);!(x=g[b])&&++b<m;);_._next=x||null}}return a=new Ja(a,n),a._enter=o,a._exit=c,a}function FAe(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function LAe(){return new Ja(this._exit||this._groups.map(sse),this._parents)}function $Ae(t,e,r){var n=this.enter(),i=this,s=this.exit();return typeof t=="function"?(n=t(n),n&&(n=n.selection())):n=n.append(t+""),e!=null&&(i=e(i),i&&(i=i.selection())),r==null?s.remove():r(s),n&&i?n.merge(i).order():i}function UAe(t){for(var e=t.selection?t.selection():t,r=this._groups,n=e._groups,i=r.length,s=n.length,a=Math.min(i,s),o=new Array(i),c=0;c<a;++c)for(var u=r[c],l=n[c],f=u.length,d=o[c]=new Array(f),h,m=0;m<f;++m)(h=u[m]||l[m])&&(d[m]=h);for(;c<i;++c)o[c]=r[c];return new Ja(o,this._parents)}function jAe(){for(var t=this._groups,e=-1,r=t.length;++e<r;)for(var n=t[e],i=n.length-1,s=n[i],a;--i>=0;)(a=n[i])&&(s&&a.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(a,s),s=a);return this}function VAe(t){t||(t=qAe);function e(f,d){return f&&d?t(f.__data__,d.__data__):!f-!d}for(var r=this._groups,n=r.length,i=new Array(n),s=0;s<n;++s){for(var a=r[s],o=a.length,c=i[s]=new Array(o),u,l=0;l<o;++l)(u=a[l])&&(c[l]=u);c.sort(e)}return new Ja(i,this._parents).order()}function qAe(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function zAe(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function HAe(){return Array.from(this)}function WAe(){for(var t=this._groups,e=0,r=t.length;e<r;++e)for(var n=t[e],i=0,s=n.length;i<s;++i){var a=n[i];if(a)return a}return null}function GAe(){let t=0;for(const e of this)++t;return t}function KAe(){return!this.node()}function XAe(t){for(var e=this._groups,r=0,n=e.length;r<n;++r)for(var i=e[r],s=0,a=i.length,o;s<a;++s)(o=i[s])&&t.call(o,o.__data__,s,i);return this}function YAe(t){return function(){this.removeAttribute(t)}}function ZAe(t){return function(){this.removeAttributeNS(t.space,t.local)}}function JAe(t,e){return function(){this.setAttribute(t,e)}}function QAe(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function eCe(t,e){return function(){var r=e.apply(this,arguments);r==null?this.removeAttribute(t):this.setAttribute(t,r)}}function tCe(t,e){return function(){var r=e.apply(this,arguments);r==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,r)}}function rCe(t,e){var r=J8(t);if(arguments.length<2){var n=this.node();return r.local?n.getAttributeNS(r.space,r.local):n.getAttribute(r)}return this.each((e==null?r.local?ZAe:YAe:typeof e=="function"?r.local?tCe:eCe:r.local?QAe:JAe)(r,e))}function ase(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function nCe(t){return function(){this.style.removeProperty(t)}}function iCe(t,e,r){return function(){this.style.setProperty(t,e,r)}}function sCe(t,e,r){return function(){var n=e.apply(this,arguments);n==null?this.style.removeProperty(t):this.style.setProperty(t,n,r)}}function aCe(t,e,r){return arguments.length>1?this.each((e==null?nCe:typeof e=="function"?sCe:iCe)(t,e,r??"")):tp(this.node(),t)}function tp(t,e){return t.style.getPropertyValue(e)||ase(t).getComputedStyle(t,null).getPropertyValue(e)}function oCe(t){return function(){delete this[t]}}function cCe(t,e){return function(){this[t]=e}}function lCe(t,e){return function(){var r=e.apply(this,arguments);r==null?delete this[t]:this[t]=r}}function uCe(t,e){return arguments.length>1?this.each((e==null?oCe:typeof e=="function"?lCe:cCe)(t,e)):this.node()[t]}function ose(t){return t.trim().split(/^|\s+/)}function $O(t){return t.classList||new cse(t)}function cse(t){this._node=t,this._names=ose(t.getAttribute("class")||"")}cse.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function lse(t,e){for(var r=$O(t),n=-1,i=e.length;++n<i;)r.add(e[n])}function use(t,e){for(var r=$O(t),n=-1,i=e.length;++n<i;)r.remove(e[n])}function fCe(t){return function(){lse(this,t)}}function dCe(t){return function(){use(this,t)}}function hCe(t,e){return function(){(e.apply(this,arguments)?lse:use)(this,t)}}function pCe(t,e){var r=ose(t+"");if(arguments.length<2){for(var n=$O(this.node()),i=-1,s=r.length;++i<s;)if(!n.contains(r[i]))return!1;return!0}return this.each((typeof e=="function"?hCe:e?fCe:dCe)(r,e))}function mCe(){this.textContent=""}function gCe(t){return function(){this.textContent=t}}function vCe(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function yCe(t){return arguments.length?this.each(t==null?mCe:(typeof t=="function"?vCe:gCe)(t)):this.node().textContent}function bCe(){this.innerHTML=""}function wCe(t){return function(){this.innerHTML=t}}function _Ce(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function xCe(t){return arguments.length?this.each(t==null?bCe:(typeof t=="function"?_Ce:wCe)(t)):this.node().innerHTML}function SCe(){this.nextSibling&&this.parentNode.appendChild(this)}function ECe(){return this.each(SCe)}function kCe(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function TCe(){return this.each(kCe)}function ACe(t){var e=typeof t=="function"?t:tse(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function CCe(){return null}function ICe(t,e){var r=typeof t=="function"?t:tse(t),n=e==null?CCe:typeof e=="function"?e:LO(e);return this.select(function(){return this.insertBefore(r.apply(this,arguments),n.apply(this,arguments)||null)})}function PCe(){var t=this.parentNode;t&&t.removeChild(this)}function RCe(){return this.each(PCe)}function OCe(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function BCe(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function DCe(t){return this.select(t?BCe:OCe)}function MCe(t){return arguments.length?this.property("__data__",t):this.node().__data__}function NCe(t){return function(e){t.call(this,e,this.__data__)}}function FCe(t){return t.trim().split(/^|\s+/).map(function(e){var r="",n=e.indexOf(".");return n>=0&&(r=e.slice(n+1),e=e.slice(0,n)),{type:e,name:r}})}function LCe(t){return function(){var e=this.__on;if(e){for(var r=0,n=-1,i=e.length,s;r<i;++r)s=e[r],(!t.type||s.type===t.type)&&s.name===t.name?this.removeEventListener(s.type,s.listener,s.options):e[++n]=s;++n?e.length=n:delete this.__on}}}function $Ce(t,e,r){return function(){var n=this.__on,i,s=NCe(e);if(n){for(var a=0,o=n.length;a<o;++a)if((i=n[a]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=r),i.value=e;return}}this.addEventListener(t.type,s,r),i={type:t.type,name:t.name,value:e,listener:s,options:r},n?n.push(i):this.__on=[i]}}function UCe(t,e,r){var n=FCe(t+""),i,s=n.length,a;if(arguments.length<2){var o=this.node().__on;if(o){for(var c=0,u=o.length,l;c<u;++c)for(i=0,l=o[c];i<s;++i)if((a=n[i]).type===l.type&&a.name===l.name)return l.value}return}for(o=e?$Ce:LCe,i=0;i<s;++i)this.each(o(n[i],e,r));return this}function fse(t,e,r){var n=ase(t),i=n.CustomEvent;typeof i=="function"?i=new i(e,r):(i=n.document.createEvent("Event"),r?(i.initEvent(e,r.bubbles,r.cancelable),i.detail=r.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function jCe(t,e){return function(){return fse(this,t,e)}}function VCe(t,e){return function(){return fse(this,t,e.apply(this,arguments))}}function qCe(t,e){return this.each((typeof e=="function"?VCe:jCe)(t,e))}function*zCe(){for(var t=this._groups,e=0,r=t.length;e<r;++e)for(var n=t[e],i=0,s=n.length,a;i<s;++i)(a=n[i])&&(yield a)}var dse=[null];function Ja(t,e){this._groups=t,this._parents=e}function Ly(){return new Ja([[document.documentElement]],dse)}function HCe(){return this}Ja.prototype=Ly.prototype={constructor:Ja,select:vAe,selectAll:_Ae,selectChild:kAe,selectChildren:IAe,filter:PAe,data:NAe,enter:RAe,exit:LAe,join:$Ae,merge:UAe,selection:HCe,order:jAe,sort:VAe,call:zAe,nodes:HAe,node:WAe,size:GAe,empty:KAe,each:XAe,attr:rCe,style:aCe,property:uCe,classed:pCe,text:yCe,html:xCe,raise:ECe,lower:TCe,append:ACe,insert:ICe,remove:RCe,clone:DCe,datum:MCe,on:UCe,dispatch:qCe,[Symbol.iterator]:zCe};function WCe(t){return typeof t=="string"?new Ja([[document.querySelector(t)]],[document.documentElement]):new Ja([[t]],dse)}function UO(t,e,r){t.prototype=e.prototype=r,r.constructor=t}function hse(t,e){var r=Object.create(t.prototype);for(var n in e)r[n]=e[n];return r}function $y(){}var vv=.7,y4=1/vv,B1="\\s*([+-]?\\d+)\\s*",yv="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",cl="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",GCe=/^#([0-9a-f]{3,8})$/,KCe=new RegExp(`^rgb\\(${B1},${B1},${B1}\\)$`),XCe=new RegExp(`^rgb\\(${cl},${cl},${cl}\\)$`),YCe=new RegExp(`^rgba\\(${B1},${B1},${B1},${yv}\\)$`),ZCe=new RegExp(`^rgba\\(${cl},${cl},${cl},${yv}\\)$`),JCe=new RegExp(`^hsl\\(${yv},${cl},${cl}\\)$`),QCe=new RegExp(`^hsla\\(${yv},${cl},${cl},${yv}\\)$`),Gj={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};UO($y,Mh,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Kj,formatHex:Kj,formatHex8:eIe,formatHsl:tIe,formatRgb:Xj,toString:Xj});function Kj(){return this.rgb().formatHex()}function eIe(){return this.rgb().formatHex8()}function tIe(){return pse(this).formatHsl()}function Xj(){return this.rgb().formatRgb()}function Mh(t){var e,r;return t=(t+"").trim().toLowerCase(),(e=GCe.exec(t))?(r=e[1].length,e=parseInt(e[1],16),r===6?Yj(e):r===3?new ya(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):r===8?X2(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):r===4?X2(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=KCe.exec(t))?new ya(e[1],e[2],e[3],1):(e=XCe.exec(t))?new ya(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=YCe.exec(t))?X2(e[1],e[2],e[3],e[4]):(e=ZCe.exec(t))?X2(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=JCe.exec(t))?Qj(e[1],e[2]/100,e[3]/100,1):(e=QCe.exec(t))?Qj(e[1],e[2]/100,e[3]/100,e[4]):Gj.hasOwnProperty(t)?Yj(Gj[t]):t==="transparent"?new ya(NaN,NaN,NaN,0):null}function Yj(t){return new ya(t>>16&255,t>>8&255,t&255,1)}function X2(t,e,r,n){return n<=0&&(t=e=r=NaN),new ya(t,e,r,n)}function rIe(t){return t instanceof $y||(t=Mh(t)),t?(t=t.rgb(),new ya(t.r,t.g,t.b,t.opacity)):new ya}function XC(t,e,r,n){return arguments.length===1?rIe(t):new ya(t,e,r,n??1)}function ya(t,e,r,n){this.r=+t,this.g=+e,this.b=+r,this.opacity=+n}UO(ya,XC,hse($y,{brighter(t){return t=t==null?y4:Math.pow(y4,t),new ya(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?vv:Math.pow(vv,t),new ya(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new ya(dh(this.r),dh(this.g),dh(this.b),b4(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Zj,formatHex:Zj,formatHex8:nIe,formatRgb:Jj,toString:Jj}));function Zj(){return`#${rh(this.r)}${rh(this.g)}${rh(this.b)}`}function nIe(){return`#${rh(this.r)}${rh(this.g)}${rh(this.b)}${rh((isNaN(this.opacity)?1:this.opacity)*255)}`}function Jj(){const t=b4(this.opacity);return`${t===1?"rgb(":"rgba("}${dh(this.r)}, ${dh(this.g)}, ${dh(this.b)}${t===1?")":`, ${t})`}`}function b4(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function dh(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function rh(t){return t=dh(t),(t<16?"0":"")+t.toString(16)}function Qj(t,e,r,n){return n<=0?t=e=r=NaN:r<=0||r>=1?t=e=NaN:e<=0&&(t=NaN),new tc(t,e,r,n)}function pse(t){if(t instanceof tc)return new tc(t.h,t.s,t.l,t.opacity);if(t instanceof $y||(t=Mh(t)),!t)return new tc;if(t instanceof tc)return t;t=t.rgb();var e=t.r/255,r=t.g/255,n=t.b/255,i=Math.min(e,r,n),s=Math.max(e,r,n),a=NaN,o=s-i,c=(s+i)/2;return o?(e===s?a=(r-n)/o+(r<n)*6:r===s?a=(n-e)/o+2:a=(e-r)/o+4,o/=c<.5?s+i:2-s-i,a*=60):o=c>0&&c<1?0:a,new tc(a,o,c,t.opacity)}function iIe(t,e,r,n){return arguments.length===1?pse(t):new tc(t,e,r,n??1)}function tc(t,e,r,n){this.h=+t,this.s=+e,this.l=+r,this.opacity=+n}UO(tc,iIe,hse($y,{brighter(t){return t=t==null?y4:Math.pow(y4,t),new tc(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?vv:Math.pow(vv,t),new tc(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*e,i=2*r-n;return new ya(W9(t>=240?t-240:t+120,i,n),W9(t,i,n),W9(t<120?t+240:t-120,i,n),this.opacity)},clamp(){return new tc(eV(this.h),Y2(this.s),Y2(this.l),b4(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=b4(this.opacity);return`${t===1?"hsl(":"hsla("}${eV(this.h)}, ${Y2(this.s)*100}%, ${Y2(this.l)*100}%${t===1?")":`, ${t})`}`}}));function eV(t){return t=(t||0)%360,t<0?t+360:t}function Y2(t){return Math.max(0,Math.min(1,t||0))}function W9(t,e,r){return(t<60?e+(r-e)*t/60:t<180?r:t<240?e+(r-e)*(240-t)/60:e)*255}const jO=t=>()=>t;function sIe(t,e){return function(r){return t+r*e}}function aIe(t,e,r){return t=Math.pow(t,r),e=Math.pow(e,r)-t,r=1/r,function(n){return Math.pow(t+n*e,r)}}function oIe(t){return(t=+t)==1?mse:function(e,r){return r-e?aIe(e,r,t):jO(isNaN(e)?r:e)}}function mse(t,e){var r=e-t;return r?sIe(t,r):jO(isNaN(t)?e:t)}const w4=function t(e){var r=oIe(e);function n(i,s){var a=r((i=XC(i)).r,(s=XC(s)).r),o=r(i.g,s.g),c=r(i.b,s.b),u=mse(i.opacity,s.opacity);return function(l){return i.r=a(l),i.g=o(l),i.b=c(l),i.opacity=u(l),i+""}}return n.gamma=t,n}(1);function cIe(t,e){e||(e=[]);var r=t?Math.min(e.length,t.length):0,n=e.slice(),i;return function(s){for(i=0;i<r;++i)n[i]=t[i]*(1-s)+e[i]*s;return n}}function lIe(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function uIe(t,e){var r=e?e.length:0,n=t?Math.min(r,t.length):0,i=new Array(n),s=new Array(r),a;for(a=0;a<n;++a)i[a]=VO(t[a],e[a]);for(;a<r;++a)s[a]=e[a];return function(o){for(a=0;a<n;++a)s[a]=i[a](o);return s}}function fIe(t,e){var r=new Date;return t=+t,e=+e,function(n){return r.setTime(t*(1-n)+e*n),r}}function ec(t,e){return t=+t,e=+e,function(r){return t*(1-r)+e*r}}function dIe(t,e){var r={},n={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?r[i]=VO(t[i],e[i]):n[i]=e[i];return function(s){for(i in r)n[i]=r[i](s);return n}}var YC=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,G9=new RegExp(YC.source,"g");function hIe(t){return function(){return t}}function pIe(t){return function(e){return t(e)+""}}function gse(t,e){var r=YC.lastIndex=G9.lastIndex=0,n,i,s,a=-1,o=[],c=[];for(t=t+"",e=e+"";(n=YC.exec(t))&&(i=G9.exec(e));)(s=i.index)>r&&(s=e.slice(r,s),o[a]?o[a]+=s:o[++a]=s),(n=n[0])===(i=i[0])?o[a]?o[a]+=i:o[++a]=i:(o[++a]=null,c.push({i:a,x:ec(n,i)})),r=G9.lastIndex;return r<e.length&&(s=e.slice(r),o[a]?o[a]+=s:o[++a]=s),o.length<2?c[0]?pIe(c[0].x):hIe(e):(e=c.length,function(u){for(var l=0,f;l<e;++l)o[(f=c[l]).i]=f.x(u);return o.join("")})}function VO(t,e){var r=typeof e,n;return e==null||r==="boolean"?jO(e):(r==="number"?ec:r==="string"?(n=Mh(e))?(e=n,w4):gse:e instanceof Mh?w4:e instanceof Date?fIe:lIe(e)?cIe:Array.isArray(e)?uIe:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?dIe:ec)(t,e)}function mIe(t,e){return t=+t,e=+e,function(r){return Math.round(t*(1-r)+e*r)}}var tV=180/Math.PI,ZC={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function vse(t,e,r,n,i,s){var a,o,c;return(a=Math.sqrt(t*t+e*e))&&(t/=a,e/=a),(c=t*r+e*n)&&(r-=t*c,n-=e*c),(o=Math.sqrt(r*r+n*n))&&(r/=o,n/=o,c/=o),t*n<e*r&&(t=-t,e=-e,c=-c,a=-a),{translateX:i,translateY:s,rotate:Math.atan2(e,t)*tV,skewX:Math.atan(c)*tV,scaleX:a,scaleY:o}}var Z2;function gIe(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?ZC:vse(e.a,e.b,e.c,e.d,e.e,e.f)}function vIe(t){return t==null||(Z2||(Z2=document.createElementNS("http://www.w3.org/2000/svg","g")),Z2.setAttribute("transform",t),!(t=Z2.transform.baseVal.consolidate()))?ZC:(t=t.matrix,vse(t.a,t.b,t.c,t.d,t.e,t.f))}function yse(t,e,r,n){function i(u){return u.length?u.pop()+" ":""}function s(u,l,f,d,h,m){if(u!==f||l!==d){var p=h.push("translate(",null,e,null,r);m.push({i:p-4,x:ec(u,f)},{i:p-2,x:ec(l,d)})}else(f||d)&&h.push("translate("+f+e+d+r)}function a(u,l,f,d){u!==l?(u-l>180?l+=360:l-u>180&&(u+=360),d.push({i:f.push(i(f)+"rotate(",null,n)-2,x:ec(u,l)})):l&&f.push(i(f)+"rotate("+l+n)}function o(u,l,f,d){u!==l?d.push({i:f.push(i(f)+"skewX(",null,n)-2,x:ec(u,l)}):l&&f.push(i(f)+"skewX("+l+n)}function c(u,l,f,d,h,m){if(u!==f||l!==d){var p=h.push(i(h)+"scale(",null,",",null,")");m.push({i:p-4,x:ec(u,f)},{i:p-2,x:ec(l,d)})}else(f!==1||d!==1)&&h.push(i(h)+"scale("+f+","+d+")")}return function(u,l){var f=[],d=[];return u=t(u),l=t(l),s(u.translateX,u.translateY,l.translateX,l.translateY,f,d),a(u.rotate,l.rotate,f,d),o(u.skewX,l.skewX,f,d),c(u.scaleX,u.scaleY,l.scaleX,l.scaleY,f,d),u=l=null,function(h){for(var m=-1,p=d.length,g;++m<p;)f[(g=d[m]).i]=g.x(h);return f.join("")}}}var yIe=yse(gIe,"px, ","px)","deg)"),bIe=yse(vIe,", ",")",")"),rp=0,ag=0,Om=0,bse=1e3,_4,og,x4=0,Nh=0,Q8=0,bv=typeof performance=="object"&&performance.now?performance:Date,wse=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function qO(){return Nh||(wse(wIe),Nh=bv.now()+Q8)}function wIe(){Nh=0}function S4(){this._call=this._time=this._next=null}S4.prototype=_se.prototype={constructor:S4,restart:function(t,e,r){if(typeof t!="function")throw new TypeError("callback is not a function");r=(r==null?qO():+r)+(e==null?0:+e),!this._next&&og!==this&&(og?og._next=this:_4=this,og=this),this._call=t,this._time=r,JC()},stop:function(){this._call&&(this._call=null,this._time=1/0,JC())}};function _se(t,e,r){var n=new S4;return n.restart(t,e,r),n}function _Ie(){qO(),++rp;for(var t=_4,e;t;)(e=Nh-t._time)>=0&&t._call.call(void 0,e),t=t._next;--rp}function rV(){Nh=(x4=bv.now())+Q8,rp=ag=0;try{_Ie()}finally{rp=0,SIe(),Nh=0}}function xIe(){var t=bv.now(),e=t-x4;e>bse&&(Q8-=e,x4=t)}function SIe(){for(var t,e=_4,r,n=1/0;e;)e._call?(n>e._time&&(n=e._time),t=e,e=e._next):(r=e._next,e._next=null,e=t?t._next=r:_4=r);og=t,JC(n)}function JC(t){if(!rp){ag&&(ag=clearTimeout(ag));var e=t-Nh;e>24?(t<1/0&&(ag=setTimeout(rV,t-bv.now()-Q8)),Om&&(Om=clearInterval(Om))):(Om||(x4=bv.now(),Om=setInterval(xIe,bse)),rp=1,wse(rV))}}function nV(t,e,r){var n=new S4;return e=e==null?0:+e,n.restart(i=>{n.stop(),t(i+e)},e,r),n}var EIe=ese("start","end","cancel","interrupt"),kIe=[],xse=0,iV=1,QC=2,m3=3,sV=4,eI=5,g3=6;function e5(t,e,r,n,i,s){var a=t.__transition;if(!a)t.__transition={};else if(r in a)return;TIe(t,r,{name:e,index:n,group:i,on:EIe,tween:kIe,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:xse})}function zO(t,e){var r=Cc(t,e);if(r.state>xse)throw new Error("too late; already scheduled");return r}function xl(t,e){var r=Cc(t,e);if(r.state>m3)throw new Error("too late; already running");return r}function Cc(t,e){var r=t.__transition;if(!r||!(r=r[e]))throw new Error("transition not found");return r}function TIe(t,e,r){var n=t.__transition,i;n[e]=r,r.timer=_se(s,0,r.time);function s(u){r.state=iV,r.timer.restart(a,r.delay,r.time),r.delay<=u&&a(u-r.delay)}function a(u){var l,f,d,h;if(r.state!==iV)return c();for(l in n)if(h=n[l],h.name===r.name){if(h.state===m3)return nV(a);h.state===sV?(h.state=g3,h.timer.stop(),h.on.call("interrupt",t,t.__data__,h.index,h.group),delete n[l]):+l<e&&(h.state=g3,h.timer.stop(),h.on.call("cancel",t,t.__data__,h.index,h.group),delete n[l])}if(nV(function(){r.state===m3&&(r.state=sV,r.timer.restart(o,r.delay,r.time),o(u))}),r.state=QC,r.on.call("start",t,t.__data__,r.index,r.group),r.state===QC){for(r.state=m3,i=new Array(d=r.tween.length),l=0,f=-1;l<d;++l)(h=r.tween[l].value.call(t,t.__data__,r.index,r.group))&&(i[++f]=h);i.length=f+1}}function o(u){for(var l=u<r.duration?r.ease.call(null,u/r.duration):(r.timer.restart(c),r.state=eI,1),f=-1,d=i.length;++f<d;)i[f].call(t,l);r.state===eI&&(r.on.call("end",t,t.__data__,r.index,r.group),c())}function c(){r.state=g3,r.timer.stop(),delete n[e];for(var u in n)return;delete t.__transition}}function AIe(t,e){var r=t.__transition,n,i,s=!0,a;if(r){e=e==null?null:e+"";for(a in r){if((n=r[a]).name!==e){s=!1;continue}i=n.state>QC&&n.state<eI,n.state=g3,n.timer.stop(),n.on.call(i?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete r[a]}s&&delete t.__transition}}function CIe(t){return this.each(function(){AIe(this,t)})}function IIe(t,e){var r,n;return function(){var i=xl(this,t),s=i.tween;if(s!==r){n=r=s;for(var a=0,o=n.length;a<o;++a)if(n[a].name===e){n=n.slice(),n.splice(a,1);break}}i.tween=n}}function PIe(t,e,r){var n,i;if(typeof r!="function")throw new Error;return function(){var s=xl(this,t),a=s.tween;if(a!==n){i=(n=a).slice();for(var o={name:e,value:r},c=0,u=i.length;c<u;++c)if(i[c].name===e){i[c]=o;break}c===u&&i.push(o)}s.tween=i}}function RIe(t,e){var r=this._id;if(t+="",arguments.length<2){for(var n=Cc(this.node(),r).tween,i=0,s=n.length,a;i<s;++i)if((a=n[i]).name===t)return a.value;return null}return this.each((e==null?IIe:PIe)(r,t,e))}function HO(t,e,r){var n=t._id;return t.each(function(){var i=xl(this,n);(i.value||(i.value={}))[e]=r.apply(this,arguments)}),function(i){return Cc(i,n).value[e]}}function Sse(t,e){var r;return(typeof e=="number"?ec:e instanceof Mh?w4:(r=Mh(e))?(e=r,w4):gse)(t,e)}function OIe(t){return function(){this.removeAttribute(t)}}function BIe(t){return function(){this.removeAttributeNS(t.space,t.local)}}function DIe(t,e,r){var n,i=r+"",s;return function(){var a=this.getAttribute(t);return a===i?null:a===n?s:s=e(n=a,r)}}function MIe(t,e,r){var n,i=r+"",s;return function(){var a=this.getAttributeNS(t.space,t.local);return a===i?null:a===n?s:s=e(n=a,r)}}function NIe(t,e,r){var n,i,s;return function(){var a,o=r(this),c;return o==null?void this.removeAttribute(t):(a=this.getAttribute(t),c=o+"",a===c?null:a===n&&c===i?s:(i=c,s=e(n=a,o)))}}function FIe(t,e,r){var n,i,s;return function(){var a,o=r(this),c;return o==null?void this.removeAttributeNS(t.space,t.local):(a=this.getAttributeNS(t.space,t.local),c=o+"",a===c?null:a===n&&c===i?s:(i=c,s=e(n=a,o)))}}function LIe(t,e){var r=J8(t),n=r==="transform"?bIe:Sse;return this.attrTween(t,typeof e=="function"?(r.local?FIe:NIe)(r,n,HO(this,"attr."+t,e)):e==null?(r.local?BIe:OIe)(r):(r.local?MIe:DIe)(r,n,e))}function $Ie(t,e){return function(r){this.setAttribute(t,e.call(this,r))}}function UIe(t,e){return function(r){this.setAttributeNS(t.space,t.local,e.call(this,r))}}function jIe(t,e){var r,n;function i(){var s=e.apply(this,arguments);return s!==n&&(r=(n=s)&&UIe(t,s)),r}return i._value=e,i}function VIe(t,e){var r,n;function i(){var s=e.apply(this,arguments);return s!==n&&(r=(n=s)&&$Ie(t,s)),r}return i._value=e,i}function qIe(t,e){var r="attr."+t;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;var n=J8(t);return this.tween(r,(n.local?jIe:VIe)(n,e))}function zIe(t,e){return function(){zO(this,t).delay=+e.apply(this,arguments)}}function HIe(t,e){return e=+e,function(){zO(this,t).delay=e}}function WIe(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?zIe:HIe)(e,t)):Cc(this.node(),e).delay}function GIe(t,e){return function(){xl(this,t).duration=+e.apply(this,arguments)}}function KIe(t,e){return e=+e,function(){xl(this,t).duration=e}}function XIe(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?GIe:KIe)(e,t)):Cc(this.node(),e).duration}function YIe(t,e){if(typeof e!="function")throw new Error;return function(){xl(this,t).ease=e}}function ZIe(t){var e=this._id;return arguments.length?this.each(YIe(e,t)):Cc(this.node(),e).ease}function JIe(t,e){return function(){var r=e.apply(this,arguments);if(typeof r!="function")throw new Error;xl(this,t).ease=r}}function QIe(t){if(typeof t!="function")throw new Error;return this.each(JIe(this._id,t))}function ePe(t){typeof t!="function"&&(t=nse(t));for(var e=this._groups,r=e.length,n=new Array(r),i=0;i<r;++i)for(var s=e[i],a=s.length,o=n[i]=[],c,u=0;u<a;++u)(c=s[u])&&t.call(c,c.__data__,u,s)&&o.push(c);return new ku(n,this._parents,this._name,this._id)}function tPe(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,r=t._groups,n=e.length,i=r.length,s=Math.min(n,i),a=new Array(n),o=0;o<s;++o)for(var c=e[o],u=r[o],l=c.length,f=a[o]=new Array(l),d,h=0;h<l;++h)(d=c[h]||u[h])&&(f[h]=d);for(;o<n;++o)a[o]=e[o];return new ku(a,this._parents,this._name,this._id)}function rPe(t){return(t+"").trim().split(/^|\s+/).every(function(e){var r=e.indexOf(".");return r>=0&&(e=e.slice(0,r)),!e||e==="start"})}function nPe(t,e,r){var n,i,s=rPe(e)?zO:xl;return function(){var a=s(this,t),o=a.on;o!==n&&(i=(n=o).copy()).on(e,r),a.on=i}}function iPe(t,e){var r=this._id;return arguments.length<2?Cc(this.node(),r).on.on(t):this.each(nPe(r,t,e))}function sPe(t){return function(){var e=this.parentNode;for(var r in this.__transition)if(+r!==t)return;e&&e.removeChild(this)}}function aPe(){return this.on("end.remove",sPe(this._id))}function oPe(t){var e=this._name,r=this._id;typeof t!="function"&&(t=LO(t));for(var n=this._groups,i=n.length,s=new Array(i),a=0;a<i;++a)for(var o=n[a],c=o.length,u=s[a]=new Array(c),l,f,d=0;d<c;++d)(l=o[d])&&(f=t.call(l,l.__data__,d,o))&&("__data__"in l&&(f.__data__=l.__data__),u[d]=f,e5(u[d],e,r,d,u,Cc(l,r)));return new ku(s,this._parents,e,r)}function cPe(t){var e=this._name,r=this._id;typeof t!="function"&&(t=rse(t));for(var n=this._groups,i=n.length,s=[],a=[],o=0;o<i;++o)for(var c=n[o],u=c.length,l,f=0;f<u;++f)if(l=c[f]){for(var d=t.call(l,l.__data__,f,c),h,m=Cc(l,r),p=0,g=d.length;p<g;++p)(h=d[p])&&e5(h,e,r,p,d,m);s.push(d),a.push(l)}return new ku(s,a,e,r)}var lPe=Ly.prototype.constructor;function uPe(){return new lPe(this._groups,this._parents)}function fPe(t,e){var r,n,i;return function(){var s=tp(this,t),a=(this.style.removeProperty(t),tp(this,t));return s===a?null:s===r&&a===n?i:i=e(r=s,n=a)}}function Ese(t){return function(){this.style.removeProperty(t)}}function dPe(t,e,r){var n,i=r+"",s;return function(){var a=tp(this,t);return a===i?null:a===n?s:s=e(n=a,r)}}function hPe(t,e,r){var n,i,s;return function(){var a=tp(this,t),o=r(this),c=o+"";return o==null&&(c=o=(this.style.removeProperty(t),tp(this,t))),a===c?null:a===n&&c===i?s:(i=c,s=e(n=a,o))}}function pPe(t,e){var r,n,i,s="style."+e,a="end."+s,o;return function(){var c=xl(this,t),u=c.on,l=c.value[s]==null?o||(o=Ese(e)):void 0;(u!==r||i!==l)&&(n=(r=u).copy()).on(a,i=l),c.on=n}}function mPe(t,e,r){var n=(t+="")=="transform"?yIe:Sse;return e==null?this.styleTween(t,fPe(t,n)).on("end.style."+t,Ese(t)):typeof e=="function"?this.styleTween(t,hPe(t,n,HO(this,"style."+t,e))).each(pPe(this._id,t)):this.styleTween(t,dPe(t,n,e),r).on("end.style."+t,null)}function gPe(t,e,r){return function(n){this.style.setProperty(t,e.call(this,n),r)}}function vPe(t,e,r){var n,i;function s(){var a=e.apply(this,arguments);return a!==i&&(n=(i=a)&&gPe(t,a,r)),n}return s._value=e,s}function yPe(t,e,r){var n="style."+(t+="");if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;return this.tween(n,vPe(t,e,r??""))}function bPe(t){return function(){this.textContent=t}}function wPe(t){return function(){var e=t(this);this.textContent=e??""}}function _Pe(t){return this.tween("text",typeof t=="function"?wPe(HO(this,"text",t)):bPe(t==null?"":t+""))}function xPe(t){return function(e){this.textContent=t.call(this,e)}}function SPe(t){var e,r;function n(){var i=t.apply(this,arguments);return i!==r&&(e=(r=i)&&xPe(i)),e}return n._value=t,n}function EPe(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,SPe(t))}function kPe(){for(var t=this._name,e=this._id,r=kse(),n=this._groups,i=n.length,s=0;s<i;++s)for(var a=n[s],o=a.length,c,u=0;u<o;++u)if(c=a[u]){var l=Cc(c,e);e5(c,t,r,u,a,{time:l.time+l.delay+l.duration,delay:0,duration:l.duration,ease:l.ease})}return new ku(n,this._parents,t,r)}function TPe(){var t,e,r=this,n=r._id,i=r.size();return new Promise(function(s,a){var o={value:a},c={value:function(){--i===0&&s()}};r.each(function(){var u=xl(this,n),l=u.on;l!==t&&(e=(t=l).copy(),e._.cancel.push(o),e._.interrupt.push(o),e._.end.push(c)),u.on=e}),i===0&&s()})}var APe=0;function ku(t,e,r,n){this._groups=t,this._parents=e,this._name=r,this._id=n}function kse(){return++APe}var Dl=Ly.prototype;ku.prototype={constructor:ku,select:oPe,selectAll:cPe,selectChild:Dl.selectChild,selectChildren:Dl.selectChildren,filter:ePe,merge:tPe,selection:uPe,transition:kPe,call:Dl.call,nodes:Dl.nodes,node:Dl.node,size:Dl.size,empty:Dl.empty,each:Dl.each,on:iPe,attr:LIe,attrTween:qIe,style:mPe,styleTween:yPe,text:_Pe,textTween:EPe,remove:aPe,tween:RIe,delay:WIe,duration:XIe,ease:ZIe,easeVarying:QIe,end:TPe,[Symbol.iterator]:Dl[Symbol.iterator]};function CPe(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var IPe={time:null,delay:0,duration:250,ease:CPe};function PPe(t,e){for(var r;!(r=t.__transition)||!(r=r[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return r}function RPe(t){var e,r;t instanceof ku?(e=t._id,t=t._name):(e=kse(),(r=IPe).time=qO(),t=t==null?null:t+"");for(var n=this._groups,i=n.length,s=0;s<i;++s)for(var a=n[s],o=a.length,c,u=0;u<o;++u)(c=a[u])&&e5(c,t,e,u,a,r||PPe(c,e));return new ku(n,this._parents,t,e)}Ly.prototype.interrupt=CIe;Ly.prototype.transition=RPe;const tI=Math.PI,rI=2*tI,jd=1e-6,OPe=rI-jd;function Tse(t){this._+=t[0];for(let e=1,r=t.length;e<r;++e)this._+=arguments[e]+t[e]}function BPe(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return Tse;const r=10**e;return function(n){this._+=n[0];for(let i=1,s=n.length;i<s;++i)this._+=Math.round(arguments[i]*r)/r+n[i]}}class DPe{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?Tse:BPe(e)}moveTo(e,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,r){this._append`L${this._x1=+e},${this._y1=+r}`}quadraticCurveTo(e,r,n,i){this._append`Q${+e},${+r},${this._x1=+n},${this._y1=+i}`}bezierCurveTo(e,r,n,i,s,a){this._append`C${+e},${+r},${+n},${+i},${this._x1=+s},${this._y1=+a}`}arcTo(e,r,n,i,s){if(e=+e,r=+r,n=+n,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let a=this._x1,o=this._y1,c=n-e,u=i-r,l=a-e,f=o-r,d=l*l+f*f;if(this._x1===null)this._append`M${this._x1=e},${this._y1=r}`;else if(d>jd)if(!(Math.abs(f*c-u*l)>jd)||!s)this._append`L${this._x1=e},${this._y1=r}`;else{let h=n-a,m=i-o,p=c*c+u*u,g=h*h+m*m,v=Math.sqrt(p),y=Math.sqrt(d),b=s*Math.tan((tI-Math.acos((p+d-g)/(2*v*y)))/2),_=b/y,x=b/v;Math.abs(_-1)>jd&&this._append`L${e+_*l},${r+_*f}`,this._append`A${s},${s},0,0,${+(f*h>l*m)},${this._x1=e+x*c},${this._y1=r+x*u}`}}arc(e,r,n,i,s,a){if(e=+e,r=+r,n=+n,a=!!a,n<0)throw new Error(`negative radius: ${n}`);let o=n*Math.cos(i),c=n*Math.sin(i),u=e+o,l=r+c,f=1^a,d=a?i-s:s-i;this._x1===null?this._append`M${u},${l}`:(Math.abs(this._x1-u)>jd||Math.abs(this._y1-l)>jd)&&this._append`L${u},${l}`,n&&(d<0&&(d=d%rI+rI),d>OPe?this._append`A${n},${n},0,1,${f},${e-o},${r-c}A${n},${n},0,1,${f},${this._x1=u},${this._y1=l}`:d>jd&&this._append`A${n},${n},0,${+(d>=tI)},${f},${this._x1=e+n*Math.cos(s)},${this._y1=r+n*Math.sin(s)}`)}rect(e,r,n,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}h${n=+n}v${+i}h${-n}Z`}toString(){return this._}}function MPe(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function E4(t,e){if((r=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var r,n=t.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+t.slice(r+1)]}function np(t){return t=E4(Math.abs(t)),t?t[1]:NaN}function NPe(t,e){return function(r,n){for(var i=r.length,s=[],a=0,o=t[0],c=0;i>0&&o>0&&(c+o+1>n&&(o=Math.max(1,n-c)),s.push(r.substring(i-=o,i+o)),!((c+=o+1)>n));)o=t[a=(a+1)%t.length];return s.reverse().join(e)}}function FPe(t){return function(e){return e.replace(/[0-9]/g,function(r){return t[+r]})}}var LPe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function k4(t){if(!(e=LPe.exec(t)))throw new Error("invalid format: "+t);var e;return new WO({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}k4.prototype=WO.prototype;function WO(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}WO.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function $Pe(t){e:for(var e=t.length,r=1,n=-1,i;r<e;++r)switch(t[r]){case".":n=i=r;break;case"0":n===0&&(n=r),i=r;break;default:if(!+t[r])break e;n>0&&(n=0);break}return n>0?t.slice(0,n)+t.slice(i+1):t}var Ase;function UPe(t,e){var r=E4(t,e);if(!r)return t+"";var n=r[0],i=r[1],s=i-(Ase=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,a=n.length;return s===a?n:s>a?n+new Array(s-a+1).join("0"):s>0?n.slice(0,s)+"."+n.slice(s):"0."+new Array(1-s).join("0")+E4(t,Math.max(0,e+s-1))[0]}function aV(t,e){var r=E4(t,e);if(!r)return t+"";var n=r[0],i=r[1];return i<0?"0."+new Array(-i).join("0")+n:n.length>i+1?n.slice(0,i+1)+"."+n.slice(i+1):n+new Array(i-n.length+2).join("0")}const oV={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:MPe,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>aV(t*100,e),r:aV,s:UPe,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function cV(t){return t}var lV=Array.prototype.map,uV=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function jPe(t){var e=t.grouping===void 0||t.thousands===void 0?cV:NPe(lV.call(t.grouping,Number),t.thousands+""),r=t.currency===void 0?"":t.currency[0]+"",n=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",s=t.numerals===void 0?cV:FPe(lV.call(t.numerals,String)),a=t.percent===void 0?"%":t.percent+"",o=t.minus===void 0?"":t.minus+"",c=t.nan===void 0?"NaN":t.nan+"";function u(f){f=k4(f);var d=f.fill,h=f.align,m=f.sign,p=f.symbol,g=f.zero,v=f.width,y=f.comma,b=f.precision,_=f.trim,x=f.type;x==="n"?(y=!0,x="g"):oV[x]||(b===void 0&&(b=12),_=!0,x="g"),(g||d==="0"&&h==="=")&&(g=!0,d="0",h="=");var E=p==="$"?r:p==="#"&&/[boxX]/.test(x)?"0"+x.toLowerCase():"",k=p==="$"?n:/[%p]/.test(x)?a:"",B=oV[x],D=/[defgprs%]/.test(x);b=b===void 0?6:/[gprs]/.test(x)?Math.max(1,Math.min(21,b)):Math.max(0,Math.min(20,b));function z(U){var S=E,T=k,w,A,F;if(x==="c")T=B(U)+T,U="";else{U=+U;var P=U<0||1/U<0;if(U=isNaN(U)?c:B(Math.abs(U),b),_&&(U=$Pe(U)),P&&+U==0&&m!=="+"&&(P=!1),S=(P?m==="("?m:o:m==="-"||m==="("?"":m)+S,T=(x==="s"?uV[8+Ase/3]:"")+T+(P&&m==="("?")":""),D){for(w=-1,A=U.length;++w<A;)if(F=U.charCodeAt(w),48>F||F>57){T=(F===46?i+U.slice(w+1):U.slice(w))+T,U=U.slice(0,w);break}}}y&&!g&&(U=e(U,1/0));var O=S.length+U.length+T.length,R=O<v?new Array(v-O+1).join(d):"";switch(y&&g&&(U=e(R+U,R.length?v-T.length:1/0),R=""),h){case"<":U=S+U+T+R;break;case"=":U=S+R+U+T;break;case"^":U=R.slice(0,O=R.length>>1)+S+U+T+R.slice(O);break;default:U=R+S+U+T;break}return s(U)}return z.toString=function(){return f+""},z}function l(f,d){var h=u((f=k4(f),f.type="f",f)),m=Math.max(-8,Math.min(8,Math.floor(np(d)/3)))*3,p=Math.pow(10,-m),g=uV[8+m/3];return function(v){return h(p*v)+g}}return{format:u,formatPrefix:l}}var J2,Cse,Ise;VPe({thousands:",",grouping:[3],currency:["$",""]});function VPe(t){return J2=jPe(t),Cse=J2.format,Ise=J2.formatPrefix,J2}function qPe(t){return Math.max(0,-np(Math.abs(t)))}function zPe(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(np(e)/3)))*3-np(Math.abs(t)))}function HPe(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,np(e)-np(t))+1}function Pse(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function WPe(t){return function(){return t}}function GPe(t){return+t}var fV=[0,1];function v1(t){return t}function nI(t,e){return(e-=t=+t)?function(r){return(r-t)/e}:WPe(isNaN(e)?NaN:.5)}function KPe(t,e){var r;return t>e&&(r=t,t=e,e=r),function(n){return Math.max(t,Math.min(e,n))}}function XPe(t,e,r){var n=t[0],i=t[1],s=e[0],a=e[1];return i<n?(n=nI(i,n),s=r(a,s)):(n=nI(n,i),s=r(s,a)),function(o){return s(n(o))}}function YPe(t,e,r){var n=Math.min(t.length,e.length)-1,i=new Array(n),s=new Array(n),a=-1;for(t[n]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<n;)i[a]=nI(t[a],t[a+1]),s[a]=r(e[a],e[a+1]);return function(o){var c=YTe(t,o,1,n)-1;return s[c](i[c](o))}}function Rse(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function ZPe(){var t=fV,e=fV,r=VO,n,i,s,a=v1,o,c,u;function l(){var d=Math.min(t.length,e.length);return a!==v1&&(a=KPe(t[0],t[d-1])),o=d>2?YPe:XPe,c=u=null,f}function f(d){return d==null||isNaN(d=+d)?s:(c||(c=o(t.map(n),e,r)))(n(a(d)))}return f.invert=function(d){return a(i((u||(u=o(e,t.map(n),ec)))(d)))},f.domain=function(d){return arguments.length?(t=Array.from(d,GPe),l()):t.slice()},f.range=function(d){return arguments.length?(e=Array.from(d),l()):e.slice()},f.rangeRound=function(d){return e=Array.from(d),r=mIe,l()},f.clamp=function(d){return arguments.length?(a=d?!0:v1,l()):a!==v1},f.interpolate=function(d){return arguments.length?(r=d,l()):r},f.unknown=function(d){return arguments.length?(s=d,f):s},function(d,h){return n=d,i=h,l()}}function Ose(){return ZPe()(v1,v1)}function JPe(t,e,r,n){var i=WC(t,e,r),s;switch(n=k4(n??",f"),n.type){case"s":{var a=Math.max(Math.abs(t),Math.abs(e));return n.precision==null&&!isNaN(s=zPe(i,a))&&(n.precision=s),Ise(n,a)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(s=HPe(i,Math.max(Math.abs(t),Math.abs(e))))&&(n.precision=s-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(s=qPe(i))&&(n.precision=s-(n.type==="%")*2);break}}return Cse(n)}function QPe(t){var e=t.domain;return t.ticks=function(r){var n=e();return tAe(n[0],n[n.length-1],r??10)},t.tickFormat=function(r,n){var i=e();return JPe(i[0],i[i.length-1],r??10,n)},t.nice=function(r){r==null&&(r=10);var n=e(),i=0,s=n.length-1,a=n[i],o=n[s],c,u,l=10;for(o<a&&(u=a,a=o,o=u,u=i,i=s,s=u);l-- >0;){if(u=HC(a,o,r),u===c)return n[i]=a,n[s]=o,e(n);if(u>0)a=Math.floor(a/u)*u,o=Math.ceil(o/u)*u;else if(u<0)a=Math.ceil(a*u)/u,o=Math.floor(o*u)/u;else break;c=u}return t},t}function Bse(){var t=Ose();return t.copy=function(){return Rse(t,Bse())},Pse.apply(t,arguments),QPe(t)}function eRe(t,e){t=t.slice();var r=0,n=t.length-1,i=t[r],s=t[n],a;return s<i&&(a=r,r=n,n=a,a=i,i=s,s=a),t[r]=e.floor(i),t[n]=e.ceil(s),t}const K9=new Date,X9=new Date;function ji(t,e,r,n){function i(s){return t(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(t(s=new Date(+s)),s),i.ceil=s=>(t(s=new Date(s-1)),e(s,1),t(s),s),i.round=s=>{const a=i(s),o=i.ceil(s);return s-a<o-s?a:o},i.offset=(s,a)=>(e(s=new Date(+s),a==null?1:Math.floor(a)),s),i.range=(s,a,o)=>{const c=[];if(s=i.ceil(s),o=o==null?1:Math.floor(o),!(s<a)||!(o>0))return c;let u;do c.push(u=new Date(+s)),e(s,o),t(s);while(u<s&&s<a);return c},i.filter=s=>ji(a=>{if(a>=a)for(;t(a),!s(a);)a.setTime(a-1)},(a,o)=>{if(a>=a)if(o<0)for(;++o<=0;)for(;e(a,-1),!s(a););else for(;--o>=0;)for(;e(a,1),!s(a););}),r&&(i.count=(s,a)=>(K9.setTime(+s),X9.setTime(+a),t(K9),t(X9),Math.floor(r(K9,X9))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(n?a=>n(a)%s===0:a=>i.count(0,a)%s===0):i)),i}const T4=ji(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);T4.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?ji(e=>{e.setTime(Math.floor(e/t)*t)},(e,r)=>{e.setTime(+e+r*t)},(e,r)=>(r-e)/t):T4);T4.range;const nu=1e3,wo=nu*60,iu=wo*60,Tu=iu*24,GO=Tu*7,dV=Tu*30,Y9=Tu*365,y1=ji(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*nu)},(t,e)=>(e-t)/nu,t=>t.getUTCSeconds());y1.range;const KO=ji(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*nu)},(t,e)=>{t.setTime(+t+e*wo)},(t,e)=>(e-t)/wo,t=>t.getMinutes());KO.range;const tRe=ji(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*wo)},(t,e)=>(e-t)/wo,t=>t.getUTCMinutes());tRe.range;const XO=ji(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*nu-t.getMinutes()*wo)},(t,e)=>{t.setTime(+t+e*iu)},(t,e)=>(e-t)/iu,t=>t.getHours());XO.range;const rRe=ji(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*iu)},(t,e)=>(e-t)/iu,t=>t.getUTCHours());rRe.range;const Uy=ji(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*wo)/Tu,t=>t.getDate()-1);Uy.range;const YO=ji(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Tu,t=>t.getUTCDate()-1);YO.range;const nRe=ji(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Tu,t=>Math.floor(t/Tu));nRe.range;function b0(t){return ji(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,r)=>{e.setDate(e.getDate()+r*7)},(e,r)=>(r-e-(r.getTimezoneOffset()-e.getTimezoneOffset())*wo)/GO)}const t5=b0(0),A4=b0(1),iRe=b0(2),sRe=b0(3),ip=b0(4),aRe=b0(5),oRe=b0(6);t5.range;A4.range;iRe.range;sRe.range;ip.range;aRe.range;oRe.range;function w0(t){return ji(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCDate(e.getUTCDate()+r*7)},(e,r)=>(r-e)/GO)}const Dse=w0(0),C4=w0(1),cRe=w0(2),lRe=w0(3),sp=w0(4),uRe=w0(5),fRe=w0(6);Dse.range;C4.range;cRe.range;lRe.range;sp.range;uRe.range;fRe.range;const ZO=ji(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());ZO.range;const dRe=ji(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());dRe.range;const Au=ji(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());Au.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:ji(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,r)=>{e.setFullYear(e.getFullYear()+r*t)});Au.range;const Fh=ji(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Fh.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:ji(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCFullYear(e.getUTCFullYear()+r*t)});Fh.range;function hRe(t,e,r,n,i,s){const a=[[y1,1,nu],[y1,5,5*nu],[y1,15,15*nu],[y1,30,30*nu],[s,1,wo],[s,5,5*wo],[s,15,15*wo],[s,30,30*wo],[i,1,iu],[i,3,3*iu],[i,6,6*iu],[i,12,12*iu],[n,1,Tu],[n,2,2*Tu],[r,1,GO],[e,1,dV],[e,3,3*dV],[t,1,Y9]];function o(u,l,f){const d=l<u;d&&([u,l]=[l,u]);const h=f&&typeof f.range=="function"?f:c(u,l,f),m=h?h.range(u,+l+1):[];return d?m.reverse():m}function c(u,l,f){const d=Math.abs(l-u)/f,h=FO(([,,g])=>g).right(a,d);if(h===a.length)return t.every(WC(u/Y9,l/Y9,f));if(h===0)return T4.every(Math.max(WC(u,l,f),1));const[m,p]=a[d/a[h-1][2]<a[h][2]/d?h-1:h];return m.every(p)}return[o,c]}const[pRe,mRe]=hRe(Au,ZO,t5,Uy,XO,KO);function Z9(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function J9(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Bm(t,e,r){return{y:t,m:e,d:r,H:0,M:0,S:0,L:0}}function gRe(t){var e=t.dateTime,r=t.date,n=t.time,i=t.periods,s=t.days,a=t.shortDays,o=t.months,c=t.shortMonths,u=Dm(i),l=Mm(i),f=Dm(s),d=Mm(s),h=Dm(a),m=Mm(a),p=Dm(o),g=Mm(o),v=Dm(c),y=Mm(c),b={a:P,A:O,b:R,B:I,c:null,d:yV,e:yV,f:$Re,g:XRe,G:ZRe,H:NRe,I:FRe,j:LRe,L:Mse,m:URe,M:jRe,p:C,q:M,Q:_V,s:xV,S:VRe,u:qRe,U:zRe,V:HRe,w:WRe,W:GRe,x:null,X:null,y:KRe,Y:YRe,Z:JRe,"%":wV},_={a:L,A:N,b:H,B:W,c:null,d:bV,e:bV,f:rOe,g:dOe,G:pOe,H:QRe,I:eOe,j:tOe,L:Fse,m:nOe,M:iOe,p:q,q:G,Q:_V,s:xV,S:sOe,u:aOe,U:oOe,V:cOe,w:lOe,W:uOe,x:null,X:null,y:fOe,Y:hOe,Z:mOe,"%":wV},x={a:z,A:U,b:S,B:T,c:w,d:gV,e:gV,f:ORe,g:mV,G:pV,H:vV,I:vV,j:CRe,L:RRe,m:ARe,M:IRe,p:D,q:TRe,Q:DRe,s:MRe,S:PRe,u:_Re,U:xRe,V:SRe,w:wRe,W:ERe,x:A,X:F,y:mV,Y:pV,Z:kRe,"%":BRe};b.x=E(r,b),b.X=E(n,b),b.c=E(e,b),_.x=E(r,_),_.X=E(n,_),_.c=E(e,_);function E(Y,te){return function(Q){var j=[],Z=-1,V=0,ne=Y.length,se,J,ee;for(Q instanceof Date||(Q=new Date(+Q));++Z<ne;)Y.charCodeAt(Z)===37&&(j.push(Y.slice(V,Z)),(J=hV[se=Y.charAt(++Z)])!=null?se=Y.charAt(++Z):J=se==="e"?" ":"0",(ee=te[se])&&(se=ee(Q,J)),j.push(se),V=Z+1);return j.push(Y.slice(V,Z)),j.join("")}}function k(Y,te){return function(Q){var j=Bm(1900,void 0,1),Z=B(j,Y,Q+="",0),V,ne;if(Z!=Q.length)return null;if("Q"in j)return new Date(j.Q);if("s"in j)return new Date(j.s*1e3+("L"in j?j.L:0));if(te&&!("Z"in j)&&(j.Z=0),"p"in j&&(j.H=j.H%12+j.p*12),j.m===void 0&&(j.m="q"in j?j.q:0),"V"in j){if(j.V<1||j.V>53)return null;"w"in j||(j.w=1),"Z"in j?(V=J9(Bm(j.y,0,1)),ne=V.getUTCDay(),V=ne>4||ne===0?C4.ceil(V):C4(V),V=YO.offset(V,(j.V-1)*7),j.y=V.getUTCFullYear(),j.m=V.getUTCMonth(),j.d=V.getUTCDate()+(j.w+6)%7):(V=Z9(Bm(j.y,0,1)),ne=V.getDay(),V=ne>4||ne===0?A4.ceil(V):A4(V),V=Uy.offset(V,(j.V-1)*7),j.y=V.getFullYear(),j.m=V.getMonth(),j.d=V.getDate()+(j.w+6)%7)}else("W"in j||"U"in j)&&("w"in j||(j.w="u"in j?j.u%7:"W"in j?1:0),ne="Z"in j?J9(Bm(j.y,0,1)).getUTCDay():Z9(Bm(j.y,0,1)).getDay(),j.m=0,j.d="W"in j?(j.w+6)%7+j.W*7-(ne+5)%7:j.w+j.U*7-(ne+6)%7);return"Z"in j?(j.H+=j.Z/100|0,j.M+=j.Z%100,J9(j)):Z9(j)}}function B(Y,te,Q,j){for(var Z=0,V=te.length,ne=Q.length,se,J;Z<V;){if(j>=ne)return-1;if(se=te.charCodeAt(Z++),se===37){if(se=te.charAt(Z++),J=x[se in hV?te.charAt(Z++):se],!J||(j=J(Y,Q,j))<0)return-1}else if(se!=Q.charCodeAt(j++))return-1}return j}function D(Y,te,Q){var j=u.exec(te.slice(Q));return j?(Y.p=l.get(j[0].toLowerCase()),Q+j[0].length):-1}function z(Y,te,Q){var j=h.exec(te.slice(Q));return j?(Y.w=m.get(j[0].toLowerCase()),Q+j[0].length):-1}function U(Y,te,Q){var j=f.exec(te.slice(Q));return j?(Y.w=d.get(j[0].toLowerCase()),Q+j[0].length):-1}function S(Y,te,Q){var j=v.exec(te.slice(Q));return j?(Y.m=y.get(j[0].toLowerCase()),Q+j[0].length):-1}function T(Y,te,Q){var j=p.exec(te.slice(Q));return j?(Y.m=g.get(j[0].toLowerCase()),Q+j[0].length):-1}function w(Y,te,Q){return B(Y,e,te,Q)}function A(Y,te,Q){return B(Y,r,te,Q)}function F(Y,te,Q){return B(Y,n,te,Q)}function P(Y){return a[Y.getDay()]}function O(Y){return s[Y.getDay()]}function R(Y){return c[Y.getMonth()]}function I(Y){return o[Y.getMonth()]}function C(Y){return i[+(Y.getHours()>=12)]}function M(Y){return 1+~~(Y.getMonth()/3)}function L(Y){return a[Y.getUTCDay()]}function N(Y){return s[Y.getUTCDay()]}function H(Y){return c[Y.getUTCMonth()]}function W(Y){return o[Y.getUTCMonth()]}function q(Y){return i[+(Y.getUTCHours()>=12)]}function G(Y){return 1+~~(Y.getUTCMonth()/3)}return{format:function(Y){var te=E(Y+="",b);return te.toString=function(){return Y},te},parse:function(Y){var te=k(Y+="",!1);return te.toString=function(){return Y},te},utcFormat:function(Y){var te=E(Y+="",_);return te.toString=function(){return Y},te},utcParse:function(Y){var te=k(Y+="",!0);return te.toString=function(){return Y},te}}}var hV={"-":"",_:" ",0:"0"},Ji=/^\s*\d+/,vRe=/^%/,yRe=/[\\^$*+?|[\]().{}]/g;function Ur(t,e,r){var n=t<0?"-":"",i=(n?-t:t)+"",s=i.length;return n+(s<r?new Array(r-s+1).join(e)+i:i)}function bRe(t){return t.replace(yRe,"\\$&")}function Dm(t){return new RegExp("^(?:"+t.map(bRe).join("|")+")","i")}function Mm(t){return new Map(t.map((e,r)=>[e.toLowerCase(),r]))}function wRe(t,e,r){var n=Ji.exec(e.slice(r,r+1));return n?(t.w=+n[0],r+n[0].length):-1}function _Re(t,e,r){var n=Ji.exec(e.slice(r,r+1));return n?(t.u=+n[0],r+n[0].length):-1}function xRe(t,e,r){var n=Ji.exec(e.slice(r,r+2));return n?(t.U=+n[0],r+n[0].length):-1}function SRe(t,e,r){var n=Ji.exec(e.slice(r,r+2));return n?(t.V=+n[0],r+n[0].length):-1}function ERe(t,e,r){var n=Ji.exec(e.slice(r,r+2));return n?(t.W=+n[0],r+n[0].length):-1}function pV(t,e,r){var n=Ji.exec(e.slice(r,r+4));return n?(t.y=+n[0],r+n[0].length):-1}function mV(t,e,r){var n=Ji.exec(e.slice(r,r+2));return n?(t.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function kRe(t,e,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(r,r+6));return n?(t.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function TRe(t,e,r){var n=Ji.exec(e.slice(r,r+1));return n?(t.q=n[0]*3-3,r+n[0].length):-1}function ARe(t,e,r){var n=Ji.exec(e.slice(r,r+2));return n?(t.m=n[0]-1,r+n[0].length):-1}function gV(t,e,r){var n=Ji.exec(e.slice(r,r+2));return n?(t.d=+n[0],r+n[0].length):-1}function CRe(t,e,r){var n=Ji.exec(e.slice(r,r+3));return n?(t.m=0,t.d=+n[0],r+n[0].length):-1}function vV(t,e,r){var n=Ji.exec(e.slice(r,r+2));return n?(t.H=+n[0],r+n[0].length):-1}function IRe(t,e,r){var n=Ji.exec(e.slice(r,r+2));return n?(t.M=+n[0],r+n[0].length):-1}function PRe(t,e,r){var n=Ji.exec(e.slice(r,r+2));return n?(t.S=+n[0],r+n[0].length):-1}function RRe(t,e,r){var n=Ji.exec(e.slice(r,r+3));return n?(t.L=+n[0],r+n[0].length):-1}function ORe(t,e,r){var n=Ji.exec(e.slice(r,r+6));return n?(t.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function BRe(t,e,r){var n=vRe.exec(e.slice(r,r+1));return n?r+n[0].length:-1}function DRe(t,e,r){var n=Ji.exec(e.slice(r));return n?(t.Q=+n[0],r+n[0].length):-1}function MRe(t,e,r){var n=Ji.exec(e.slice(r));return n?(t.s=+n[0],r+n[0].length):-1}function yV(t,e){return Ur(t.getDate(),e,2)}function NRe(t,e){return Ur(t.getHours(),e,2)}function FRe(t,e){return Ur(t.getHours()%12||12,e,2)}function LRe(t,e){return Ur(1+Uy.count(Au(t),t),e,3)}function Mse(t,e){return Ur(t.getMilliseconds(),e,3)}function $Re(t,e){return Mse(t,e)+"000"}function URe(t,e){return Ur(t.getMonth()+1,e,2)}function jRe(t,e){return Ur(t.getMinutes(),e,2)}function VRe(t,e){return Ur(t.getSeconds(),e,2)}function qRe(t){var e=t.getDay();return e===0?7:e}function zRe(t,e){return Ur(t5.count(Au(t)-1,t),e,2)}function Nse(t){var e=t.getDay();return e>=4||e===0?ip(t):ip.ceil(t)}function HRe(t,e){return t=Nse(t),Ur(ip.count(Au(t),t)+(Au(t).getDay()===4),e,2)}function WRe(t){return t.getDay()}function GRe(t,e){return Ur(A4.count(Au(t)-1,t),e,2)}function KRe(t,e){return Ur(t.getFullYear()%100,e,2)}function XRe(t,e){return t=Nse(t),Ur(t.getFullYear()%100,e,2)}function YRe(t,e){return Ur(t.getFullYear()%1e4,e,4)}function ZRe(t,e){var r=t.getDay();return t=r>=4||r===0?ip(t):ip.ceil(t),Ur(t.getFullYear()%1e4,e,4)}function JRe(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Ur(e/60|0,"0",2)+Ur(e%60,"0",2)}function bV(t,e){return Ur(t.getUTCDate(),e,2)}function QRe(t,e){return Ur(t.getUTCHours(),e,2)}function eOe(t,e){return Ur(t.getUTCHours()%12||12,e,2)}function tOe(t,e){return Ur(1+YO.count(Fh(t),t),e,3)}function Fse(t,e){return Ur(t.getUTCMilliseconds(),e,3)}function rOe(t,e){return Fse(t,e)+"000"}function nOe(t,e){return Ur(t.getUTCMonth()+1,e,2)}function iOe(t,e){return Ur(t.getUTCMinutes(),e,2)}function sOe(t,e){return Ur(t.getUTCSeconds(),e,2)}function aOe(t){var e=t.getUTCDay();return e===0?7:e}function oOe(t,e){return Ur(Dse.count(Fh(t)-1,t),e,2)}function Lse(t){var e=t.getUTCDay();return e>=4||e===0?sp(t):sp.ceil(t)}function cOe(t,e){return t=Lse(t),Ur(sp.count(Fh(t),t)+(Fh(t).getUTCDay()===4),e,2)}function lOe(t){return t.getUTCDay()}function uOe(t,e){return Ur(C4.count(Fh(t)-1,t),e,2)}function fOe(t,e){return Ur(t.getUTCFullYear()%100,e,2)}function dOe(t,e){return t=Lse(t),Ur(t.getUTCFullYear()%100,e,2)}function hOe(t,e){return Ur(t.getUTCFullYear()%1e4,e,4)}function pOe(t,e){var r=t.getUTCDay();return t=r>=4||r===0?sp(t):sp.ceil(t),Ur(t.getUTCFullYear()%1e4,e,4)}function mOe(){return"+0000"}function wV(){return"%"}function _V(t){return+t}function xV(t){return Math.floor(+t/1e3)}var H0,$se;gOe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function gOe(t){return H0=gRe(t),$se=H0.format,H0.parse,H0.utcFormat,H0.utcParse,H0}function vOe(t){return new Date(t)}function yOe(t){return t instanceof Date?+t:+new Date(+t)}function Use(t,e,r,n,i,s,a,o,c,u){var l=Ose(),f=l.invert,d=l.domain,h=u(".%L"),m=u(":%S"),p=u("%I:%M"),g=u("%I %p"),v=u("%a %d"),y=u("%b %d"),b=u("%B"),_=u("%Y");function x(E){return(c(E)<E?h:o(E)<E?m:a(E)<E?p:s(E)<E?g:n(E)<E?i(E)<E?v:y:r(E)<E?b:_)(E)}return l.invert=function(E){return new Date(f(E))},l.domain=function(E){return arguments.length?d(Array.from(E,yOe)):d().map(vOe)},l.ticks=function(E){var k=d();return t(k[0],k[k.length-1],E??10)},l.tickFormat=function(E,k){return k==null?x:u(k)},l.nice=function(E){var k=d();return(!E||typeof E.range!="function")&&(E=e(k[0],k[k.length-1],E??10)),E?d(eRe(k,E)):l},l.copy=function(){return Rse(l,Use(t,e,r,n,i,s,a,o,c,u))},l}function bOe(){return Pse.apply(Use(pRe,mRe,Au,ZO,t5,Uy,XO,KO,y1,$se).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function W0(t){return function(){return t}}function wOe(t){let e=3;return t.digits=function(r){if(!arguments.length)return e;if(r==null)e=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);e=n}return t},()=>new DPe(e)}function _Oe(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function jse(t){this._context=t}jse.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function xOe(t){return new jse(t)}function SOe(t){return t[0]}function EOe(t){return t[1]}function kOe(t,e){var r=W0(!0),n=null,i=xOe,s=null,a=wOe(o);t=typeof t=="function"?t:t===void 0?SOe:W0(t),e=typeof e=="function"?e:e===void 0?EOe:W0(e);function o(c){var u,l=(c=_Oe(c)).length,f,d=!1,h;for(n==null&&(s=i(h=a())),u=0;u<=l;++u)!(u<l&&r(f=c[u],u,c))===d&&((d=!d)?s.lineStart():s.lineEnd()),d&&s.point(+t(f,u,c),+e(f,u,c));if(h)return s=null,h+""||null}return o.x=function(c){return arguments.length?(t=typeof c=="function"?c:W0(+c),o):t},o.y=function(c){return arguments.length?(e=typeof c=="function"?c:W0(+c),o):e},o.defined=function(c){return arguments.length?(r=typeof c=="function"?c:W0(!!c),o):r},o.curve=function(c){return arguments.length?(i=c,n!=null&&(s=i(n)),o):i},o.context=function(c){return arguments.length?(c==null?n=s=null:s=i(n=c),o):n},o}class TOe{constructor(e,r){this._context=e,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,r){switch(e=+e,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,r):this._context.moveTo(e,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,r,e,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,e,this._y0,e,r);break}}this._x0=e,this._y0=r}}function AOe(t){return new TOe(t,!0)}function cg(t,e,r){this.k=t,this.x=e,this.y=r}cg.prototype={constructor:cg,scale:function(t){return t===1?this:new cg(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new cg(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};cg.prototype;const COe=et({color:String,...hd(),...Qt(),...wl(),...h0(),...D8(),...dO(),...Sc(),...ri(),...Ei()},"VSheet"),IOe=_t()({name:"VSheet",props:COe(),setup(t,e){let{slots:r}=e;const{themeClasses:n}=Yi(t),{backgroundColorClasses:i,backgroundColorStyles:s}=fu(Nt(t,"color")),{borderClasses:a}=pd(t),{dimensionStyles:o}=_l(t),{elevationClasses:c}=p0(t),{locationStyles:u}=M8(t),{positionClasses:l}=hO(t),{roundedClasses:f}=Ec(t);return Gt(()=>ae(t.tag,{class:["v-sheet",n.value,i.value,a.value,c.value,l.value,f.value,t.class],style:[s.value,o.value,u.value,t.style]},r)),{}}}),POe={class:"text-center"},ROe={class:"mx-auto text-h6 text-center text-disabled"},OOe=Pn({__name:"GraphiqueStation",props:{hauteur:{},vals:{}},setup(t){const e=t,{_:r}=O8(),{_:n}=Fu(),{$:i}=n(),s=ve(()=>(e.vals||[]).map(p=>({date:new Date(p.date),prcip:p.prcip}))),a=ze(null),o=ve(()=>!!s.value.length),c=(p,g)=>p.getDate()===g.getDate()&&p.getMonth()===g.getMonth()&&p.getFullYear()===g.getFullYear(),u=ve(()=>{const p=[];return s.value.map(v=>v.date).sort((v,y)=>v.getTime()-y.getTime()).forEach(v=>{const y=s.value.filter(b=>c(b.date,v));if(y.length)for(const b of y)p.push({...b,prcip:b.prcip+(p.length?p[p.length-1].prcip:0)});else p.push({date:v,prcip:p.length?p[p.length-1].prcip:0})}),p}),l={},f=p=>(l[p.toString()]||(l[p.toString()]=r(p)),l[p.toString()].value||p.toString());hn(()=>{const p=WCe(a.value);$i(()=>{console.log({donnesCumul:u.value});const{width:g,height:v}=m.dimensions;if(!(g&&v))return;const y=bOe().domain(ZTe(s.value,k=>k.date)).range([0,g]),b=Bse().domain([0,rAe(u.value,k=>k.prcip)]).range([v,0]);p.selectAll(".line").data([u.value]).join("path").attr("class","line").attr("fill","none").attr("stroke","#69b3a2").attr("stroke-width",2.5).attr("d",kOe().x(k=>y(k.date)).y(k=>b(k.prcip)).curve(AOe));const _=y.domain().length>1?Math.round((y.domain()[1].getTime()-y.domain()[0].getTime())/(1e3*60*60*24)):void 0;p.selectAll(".bar").data(s.value).join("rect").attr("class","bar").attr("x",function(k){return y(k.date)}).attr("y",function(k){return b(k.prcip)}).attr("width",_?g/_:5).attr("height",function(k){return v-b(k.prcip)}).attr("fill","steelblue"),p.selectAll(".bar").transition().duration(800).attr("y",function(k){return b(k.prcip)}).attr("height",function(k){return v-b(k.prcip)}).delay((k,B)=>B*100);const x=lAe(y);p.select(".x-axis").style("transform",`translateY(${v}px)`).call(x).append("text");const E=uAe(b);E.tickFormat(k=>f(k.valueOf())),p.select(".y-axis").call(E)})});const d=()=>{const p=ze(),g=yi({dimensions:{}}),v=new ResizeObserver(y=>{y.forEach(b=>{g.dimensions=b.contentRect})});return hn(()=>{g.dimensions=p.value.getBoundingClientRect(),v.observe(p.value)}),hs(()=>{v.unobserve(p.value)}),{resizeState:g,resizeRef:p}},{resizeRef:h,resizeState:m}=d();return(p,g)=>(Vt(),hr(IOe,{width:"100%",height:p.hauteur,class:"text-center mb-2"},{default:Ge(()=>[bi("div",POe,[us(bi("div",{ref_key:"resizeRef",ref:h,class:"ma-6"},[(Vt(),Ch("svg",{ref_key:"svgRef",ref:a,width:"100%"},g[0]||(g[0]=[bi("g",{class:"x-axis"},null,-1),bi("g",{class:"y-axis"},null,-1)]),512))],512),[[bu,o.value]]),us(ae(Dh,{class:"d-flex align-center text-center",variant:"flat",height:p.hauteur},{default:Ge(()=>[ae(m0,null,{default:Ge(()=>[bi("div",ROe,Rr(Ve(i)("dmo.graphique.aucuneDonne")),1)]),_:1})]),_:1},8,["height"]),[[bu,!o.value]])])]),_:1},8,["height"]))}}),BOe=(t,e)=>{const r=t.__vccOpts||t;for(const[n,i]of e)r[n]=i;return r},DOe=BOe(OOe,[["__scopeId","data-v-813dbebf"]]);var MOe=NOe,SV="all values passed to `median` must be numeric";function NOe(t){if(Array.isArray(t)||(t=[].slice.call(arguments)),!t.length)throw new Error("no values were passed to `median`");if(t.length==1){if(Number.isFinite(t[0]))return t[0];throw new Error(SV)}var e=t.sort(function(n,i){if(!Number.isFinite(n))throw new Error(SV);return n>=i?1:-1}),r=Math.floor(t.length/2);return t.length/2!=r?e[r]:(e[r]+e[r-1])/2}const FOe="/egu24/assets/63f33000-3c5b-4ae1-a471-ff320fdd8379-CkFTv_kn.jpg",LOe="/egu24/assets/b61c5c12-80a0-4792-b2dd-863df41e0036-BamqBV64.jpg",$Oe="/egu24/assets/b3cc1b86-e461-4799-adf8-5fbc773ef259-CtnpY-uv.jpg",UOe="/egu24/assets/0fd998f2-1d93-4977-8dfa-8d5e06c5ac66-BPb-konN.jpg",jOe="/egu24/assets/111bb611-4d13-4078-8efe-3dd3ec188023-Bte4qWoZ.jpg",VOe="/egu24/assets/57c27ead-0c8d-430d-bab5-937f4e752655-B5PxNzRd.jpg",qOe="/egu24/assets/354d9aec-847d-4aad-8b03-8b873717295f-rfduqy1g.jpg",zOe="/egu24/assets/54e41355-abe3-4d60-aaae-da2855fbdee9-D74s8Xq4.jpg",HOe="/egu24/assets/3ef4a7d4-b671-4afc-b2b8-edf18985829e-DGis44zM.jpg",WOe="/egu24/assets/fde62246-d40e-49db-830d-5a42a142d676-CtDB5xZv.jpg",GOe="/egu24/assets/7b595502-ea47-451c-a2eb-b8ae000dc38c-CdgnZqW9.jpg",KOe="/egu24/assets/0b875fbb-aab2-46d4-afb5-f2bf8243ab0a-Ds4MXam_.jpg",XOe="/egu24/assets/a6e13eca-69cf-4cae-87ba-1a41d3f4aaad-DRjLarHR.jpg",YOe="/egu24/assets/d48778ee-a7bf-4286-84b3-0a47465fc207-Cieir1Kl.jpg",ZOe="/egu24/assets/daa497ed-32fe-4a2e-9988-6f90edc1f25f-BoJgNGwb.jpg",JOe="/egu24/assets/739bdc0b-4ba4-4c80-949e-bf07ceb163ee-ciTBeehG.jpg",QOe="/egu24/assets/efbf26dc-2984-4406-b6f9-3aba222a66c5-B9uL0lzi.jpg",eBe="/egu24/assets/8af31206-b660-455f-a5db-4bfc5f47f06c-CKSITO_Z.jpg",tBe="/egu24/assets/968020db-99f6-40ca-a012-0e37a81e40f7-Crp4is6-.jpg",rBe="/egu24/assets/c85aa99b-0e7e-4f70-977a-3c7680794163--Ioyqk4t.jpg",nBe="/egu24/assets/91d677dd-e6a6-4ca8-9b4a-89c4ddcb0fa3-B5HRjaqj.jpg",iBe="/egu24/assets/56dd4540-7883-4301-a017-45ac5bac5d92-Br64_Ew0.jpg",sBe="/egu24/assets/b6d1e1c1-3f34-42a5-bdac-d1e394ebe462-CKUxhHV0.jpg",aBe="/egu24/assets/962d99b0-255f-4ba6-994c-521f62cc2f8e-rOU_fhQe.jpg",oBe="/egu24/assets/cb0b9898-f7fc-49bb-8e99-e8111e0e7f98-DsfM0zgs.jpg",cBe="/egu24/assets/0eaefd63-e4da-43c0-8b15-3c8400f84021-CgZbofWN.jpg",lBe="/egu24/assets/4d13176e-272a-4403-913a-785ee36b387a-C15vlNVK.jpg",uBe="/egu24/assets/2965b248-c52d-415b-a1e1-c93c200a195e-BYS-29D3.jpg",fBe="/egu24/assets/7caaf070-680a-47b2-a679-fd315dd39ab9-C8zn8bC8.jpg",dBe="/egu24/assets/1334158a-98be-49c2-ae2d-4099b4c4f12b-ChHdRkF7.jpg",hBe="/egu24/assets/234aba17-250f-412d-b372-c8877b2e4d93-AfSbGPax.jpg",pBe="/egu24/assets/62674979-73f7-4e62-acc3-195a1a685b89-DeLLueeC.jpg",mBe="/egu24/assets/359a050f-82a0-4159-aeb5-07af06413d39-Do93LNez.jpg",gBe="/egu24/assets/46687e4b-6f65-4236-a42e-e05388a21245-DA2t408g.jpg",vBe="/egu24/assets/c8094918-7c33-4268-bd8e-f9db8ca1186c-DCdGGzKv.jpg",yBe="/egu24/assets/33164c8d-8d53-4704-b7c7-9b3205f52d7e-8aOksHiu.jpg",bBe="/egu24/assets/e0e52c25-a3ba-451e-b2bf-c2602b9a8558-BLyLDcWi.jpg",wBe="/egu24/assets/7456682e-e694-439a-9147-9c51e6c1442d-BV1JBNwY.jpg",_Be="/egu24/assets/2ec972f1-b00c-4545-9a6f-ef193f019d22-9L5ksuLL.jpg",xBe="/egu24/assets/e5841584-b3c2-46ff-ab2c-bf3be04099f7-DW0HNInQ.jpg",SBe="/egu24/assets/afbeb567-60af-4883-9e08-3d6a3c8e4e23-fIJc9Bog.jpg",EBe="/egu24/assets/1781e449-1a2c-4bd0-bcf8-f30b240a64a5-CyAASqp3.jpg",kBe="/egu24/assets/7278d014-23b0-46a7-ad3d-ef0593752139-BVk7zWaY.jpg",TBe="/egu24/assets/53b04bef-82e8-491c-8205-d396a1c1b2f7-CMHzjx-q.jpg",ABe="/egu24/assets/aa31f1a6-157f-4835-88e4-b656d4670106-CRpH29qk.jpg",CBe="/egu24/assets/a58abe66-2b57-46d0-a3df-aa6fc2796c49-D5G54F73.jpg",IBe="/egu24/assets/670c1827-eb27-4aa9-8ae6-e2a2d06d364d-B5IrO48o.jpg",PBe="/egu24/assets/53b80ef5-45c9-4865-9490-4081bb527718-BZwHKu09.jpg",RBe="/egu24/assets/7c47d6ab-d169-4d5c-826a-b927fd9bdc88-B8n_3WEu.jpg",OBe="/egu24/assets/33ae48c3-c504-4293-bf59-f149e735a032-DzHCT77v.jpg",BBe="/egu24/assets/1c6502f8-f6e6-4edc-a10e-11b7e1446fd4-5KyNOJsf.jpg",DBe="/egu24/assets/adaadb10-0680-40fc-a536-757d53b4783c-Byi43dg5.jpg",MBe="/egu24/assets/3fb4d462-505b-423f-b233-9fe2fbf2ab7d-BiU1Af2g.jpg",NBe="/egu24/assets/e81a2f8b-4b7e-41b3-aeac-da5795221688-CSJnv5wW.jpg",FBe="/egu24/assets/945a5da9-d77b-4883-83d0-aa719fada1a3-CRPbUL7D.jpg",LBe="/egu24/assets/668dd4b0-2301-4f97-a61c-c1fc072bd467-DzMeFCrT.jpg",$Be="/egu24/assets/2e0f097d-aacd-4fc4-8877-f702b8038288-CMZyZeDu.jpg",UBe="/egu24/assets/1bd59cef-8b8c-4597-9fcd-a8f9145452dc-BZZbkjDp.jpg",jBe="/egu24/assets/0484b83e-287d-4795-870f-214a9394e13f-DVoChBtM.jpg",VBe="/egu24/assets/fd05667b-8d79-427a-b777-8c354ae9d3b5-udZ_OUPv.jpg",qBe="/egu24/assets/73eb1d12-b4f7-4495-b523-03a30391fa0f-dllqGDky.jpg",zBe="/egu24/assets/12fc964f-f3b5-4ece-b649-638cb8c4e40a-Ddye5ji5.jpg",HBe="/egu24/assets/77dcba10-d9ff-4f1e-9243-a84e4ef6ec1f-B9S-Ggt1.jpg",WBe="/egu24/assets/db692e2b-d526-4c66-9121-31fd2c84b2b5-BArZOZ7B.jpg",GBe="/egu24/assets/5e0f59ac-0f24-4255-afc3-a8a731adf9bf-DvLMLAv7.jpg",KBe="/egu24/assets/5e4d704e-f9b0-4f13-9b67-03d20880c93c-1Tvx44Xq.jpg",XBe="/egu24/assets/af7ca033-330c-4743-bd33-96a632dc9bcb-DtcATMCZ.jpg",YBe="/egu24/assets/cbe13669-c709-48ab-9a7b-88c144ffc159-BPiYcZ_3.jpg",ZBe="/egu24/assets/2cd87ee2-dba0-43d4-8d05-573933dd0dfd-NyuNKWqJ.jpg",JBe="/egu24/assets/6cd3c7fd-2785-429a-a0c0-38933de143ba-BkRJv3RK.jpg",QBe="/egu24/assets/bf084015-1c47-4666-b5cb-8ebf3d5336a6-CdidfGV4.jpg",eDe="/egu24/assets/95bc7992-6a98-4948-9bbe-50255cc6421b-bJFfkFf_.jpg",tDe="/egu24/assets/264d90d6-5386-42a9-a02c-7f74c1f5a158-C9wAAN6n.jpg",rDe="/egu24/assets/98cab885-01af-4ed7-b809-43554204ad8e-BdpirE2c.jpg",nDe="/egu24/assets/ca767251-3b63-4c11-ba48-06f3c28e641d-xa4EFVAF.jpg",iDe="/egu24/assets/4dc830d7-ed49-4297-b585-ee040e69987c-DO1922AK.jpg",sDe="/egu24/assets/8f1a194b-4858-4379-99b8-aee921cb9857-CYIavyP2.jpg",aDe="/egu24/assets/125dced1-9367-4f36-9380-cc971a2e6765-npAjQV4B.jpg",oDe="/egu24/assets/6a64c7fa-ab8f-4432-8bd5-bb1ffddfd211-C8E6T7c2.jpg",cDe="/egu24/assets/8b51cf44-9062-4a12-998a-60efd8d4ea63-DiJMF5QD.jpg",lDe="/egu24/assets/d9f0d0d0-82aa-4bd1-91f5-6db508dab992-D70ZvbOs.jpg",uDe="/egu24/assets/acd44583-6881-4a41-afc0-ebcbebf961f4-C9QoUh_D.jpg",fDe="/egu24/assets/918d2d6f-dc5a-4d1b-9dd5-2de96cc56ac6-D536Ezj8.jpg",dDe="/egu24/assets/918d2d6f-dc5a-4d1b-9dd5-2de96cc56ac6-D536Ezj8.jpg",hDe="/egu24/assets/1f756bda-953a-4051-be5b-a71bc2396d32-RM-ZDtX5.jpg",pDe="/egu24/assets/c3ee6e26-d5a6-428d-94df-6f6434c2ac26-Atuek6xN.jpg",mDe="/egu24/assets/9948d540-759c-43af-8564-9cc3eac65542-BuVSgbkf.jpg",gDe="/egu24/assets/c6656497-915d-47e8-a3c1-527dd62e5c66-DlcbY8Xw.jpg",iI=[{id:"PT01072_2887",coords:[27.6461574,85.3402103]},{id:"PT01071_2886",coords:[27.6349734,85.5276167]},{id:"PT00924_2627",coords:[27.6717534,85.3249833]}],Q9=[{id:"63f33000-3c5b-4ae1-a471-ff320fdd8379",station:"PT01072_2887",horo:"2023-05-16T03:27:29.293Z",image:FOe},{id:"b61c5c12-80a0-4792-b2dd-863df41e0036",station:"PT01072_2887",horo:"2023-06-28T11:51:23.389Z",image:LOe},{id:"b3cc1b86-e461-4799-adf8-5fbc773ef259",station:"PT01072_2887",horo:"2023-05-15T01:38:17.329Z",image:$Oe},{id:"0fd998f2-1d93-4977-8dfa-8d5e06c5ac66",station:"PT01072_2887",horo:"2023-05-26T02:03:44.551Z",image:UOe},{id:"111bb611-4d13-4078-8efe-3dd3ec188023",station:"PT01072_2887",horo:"2023-07-04T08:40:23.464Z",image:jOe},{id:"57c27ead-0c8d-430d-bab5-937f4e752655",station:"PT01072_2887",horo:"2023-06-30T01:39:35.89Z",image:VOe},{id:"354d9aec-847d-4aad-8b03-8b873717295f",station:"PT01072_2887",horo:"2023-07-14T07:24:21.685Z",image:qOe},{id:"54e41355-abe3-4d60-aaae-da2855fbdee9",station:"PT01072_2887",horo:"2023-05-27T02:35:10.237Z",image:zOe},{id:"3ef4a7d4-b671-4afc-b2b8-edf18985829e",station:"PT01072_2887",horo:"2023-06-24T06:25:13.393Z",image:HOe},{id:"fde62246-d40e-49db-830d-5a42a142d676",station:"PT01072_2887",horo:"2023-07-01T03:07:13.718Z",image:WOe},{id:"7b595502-ea47-451c-a2eb-b8ae000dc38c",station:"PT01072_2887",horo:"2023-07-06T03:48:57.647Z",image:GOe},{id:"0b875fbb-aab2-46d4-afb5-f2bf8243ab0a",station:"PT01072_2887",horo:"2023-07-12T02:08:54.191Z",image:KOe},{id:"a6e13eca-69cf-4cae-87ba-1a41d3f4aaad",station:"PT01072_2887",horo:"2023-07-02T08:07:27.909Z",image:XOe},{id:"d48778ee-a7bf-4286-84b3-0a47465fc207",station:"PT01072_2887",horo:"2023-07-05T12:51:42.263Z",image:YOe},{id:"daa497ed-32fe-4a2e-9988-6f90edc1f25f",station:"PT01072_2887",horo:"2023-06-14T02:36:57.735Z",image:ZOe},{id:"739bdc0b-4ba4-4c80-949e-bf07ceb163ee",station:"PT01072_2887",horo:"2023-06-19T02:02:22.466Z",image:JOe},{id:"efbf26dc-2984-4406-b6f9-3aba222a66c5",station:"PT01072_2887",horo:"2023-06-13T02:17:46.985Z",image:QOe},{id:"8af31206-b660-455f-a5db-4bfc5f47f06c",station:"PT01072_2887",horo:"2023-06-26T03:16:19.77Z",image:eBe},{id:"968020db-99f6-40ca-a012-0e37a81e40f7",station:"PT01072_2887",horo:"2023-06-27T08:44:29.492Z",image:tBe},{id:"c85aa99b-0e7e-4f70-977a-3c7680794163",station:"PT01072_2887",horo:"2023-06-29T01:55:00.796Z",image:rBe},{id:"91d677dd-e6a6-4ca8-9b4a-89c4ddcb0fa3",station:"PT01072_2887",horo:"2023-07-03T09:05:04.185Z",image:nBe},{id:"56dd4540-7883-4301-a017-45ac5bac5d92",station:"PT01072_2887",horo:"2023-05-29T12:20:36.323Z",image:iBe},{id:"b6d1e1c1-3f34-42a5-bdac-d1e394ebe462",station:"PT01072_2887",horo:"2023-06-20T01:20:51.542Z",image:sBe},{id:"962d99b0-255f-4ba6-994c-521f62cc2f8e",station:"PT01072_2887",horo:"2023-07-09T02:40:49.651Z",image:aBe},{id:"cb0b9898-f7fc-49bb-8e99-e8111e0e7f98",station:"PT01072_2887",horo:"2023-07-15T10:24:16.289Z",image:oBe},{id:"0eaefd63-e4da-43c0-8b15-3c8400f84021",station:"PT01072_2887",horo:"2023-06-15T14:27:02.02Z",image:cBe},{id:"4d13176e-272a-4403-913a-785ee36b387a",station:"PT01072_2887",horo:"2023-06-09T02:29:19.744Z",image:lBe},{id:"2965b248-c52d-415b-a1e1-c93c200a195e",station:"PT01071_2886",horo:"2023-06-28T12:38:36.326Z",image:uBe},{id:"7caaf070-680a-47b2-a679-fd315dd39ab9",station:"PT01071_2886",horo:"2023-06-19T13:54:33.688Z",image:fBe},{id:"1334158a-98be-49c2-ae2d-4099b4c4f12b",station:"PT01071_2886",horo:"2023-07-03T12:21:10.275Z",image:dBe},{id:"234aba17-250f-412d-b372-c8877b2e4d93",station:"PT01071_2886",horo:"2023-07-27T15:26:23.51Z",image:hBe},{id:"62674979-73f7-4e62-acc3-195a1a685b89",station:"PT01071_2886",horo:"2023-09-10T10:32:34.087Z",image:pBe},{id:"359a050f-82a0-4159-aeb5-07af06413d39",station:"PT01071_2886",horo:"2023-07-07T15:41:26.71Z",image:mBe},{id:"46687e4b-6f65-4236-a42e-e05388a21245",station:"PT01071_2886",horo:"2023-07-14T12:19:41.437Z",image:gBe},{id:"c8094918-7c33-4268-bd8e-f9db8ca1186c",station:"PT01071_2886",horo:"2023-08-09T11:10:28.908Z",image:vBe},{id:"33164c8d-8d53-4704-b7c7-9b3205f52d7e",station:"PT01071_2886",horo:"2023-08-15T11:03:36.47Z",image:yBe},{id:"e0e52c25-a3ba-451e-b2bf-c2602b9a8558",station:"PT01071_2886",horo:"2023-07-12T12:51:24.658Z",image:bBe},{id:"7456682e-e694-439a-9147-9c51e6c1442d",station:"PT01071_2886",horo:"2023-08-25T11:57:39.524Z",image:wBe},{id:"2ec972f1-b00c-4545-9a6f-ef193f019d22",station:"PT01071_2886",horo:"2023-07-01T12:57:53.984Z",image:_Be},{id:"e5841584-b3c2-46ff-ab2c-bf3be04099f7",station:"PT01071_2886",horo:"2023-08-26T13:08:20.299Z",image:xBe},{id:"afbeb567-60af-4883-9e08-3d6a3c8e4e23",station:"PT01071_2886",horo:"2023-09-08T10:26:42.18Z",image:SBe},{id:"1781e449-1a2c-4bd0-bcf8-f30b240a64a5",station:"PT01071_2886",horo:"2023-07-23T12:14:36.449Z",image:EBe},{id:"7278d014-23b0-46a7-ad3d-ef0593752139",station:"PT01071_2886",horo:"2023-09-12T11:24:21.149Z",image:kBe},{id:"53b04bef-82e8-491c-8205-d396a1c1b2f7",station:"PT01071_2886",horo:"2023-07-30T07:21:41.777Z",image:TBe},{id:"aa31f1a6-157f-4835-88e4-b656d4670106",station:"PT01071_2886",horo:"2023-08-23T10:37:56.597Z",image:ABe},{id:"a58abe66-2b57-46d0-a3df-aa6fc2796c49",station:"PT01071_2886",horo:"2023-07-20T10:55:21.896Z",image:CBe},{id:"670c1827-eb27-4aa9-8ae6-e2a2d06d364d",station:"PT01071_2886",horo:"2023-08-02T10:38:08.199Z",image:IBe},{id:"53b80ef5-45c9-4865-9490-4081bb527718",station:"PT01071_2886",horo:"2023-06-14T13:21:14.906Z",image:PBe},{id:"7c47d6ab-d169-4d5c-826a-b927fd9bdc88",station:"PT01071_2886",horo:"2023-06-15T13:39:12.805Z",image:RBe},{id:"33ae48c3-c504-4293-bf59-f149e735a032",station:"PT01071_2886",horo:"2023-07-05T12:49:53.05Z",image:OBe},{id:"1c6502f8-f6e6-4edc-a10e-11b7e1446fd4",station:"PT01071_2886",horo:"2023-07-13T16:05:58.231Z",image:BBe},{id:"adaadb10-0680-40fc-a536-757d53b4783c",station:"PT01071_2886",horo:"2023-07-17T12:53:52.158Z",image:DBe},{id:"3fb4d462-505b-423f-b233-9fe2fbf2ab7d",station:"PT01071_2886",horo:"2023-07-24T14:11:41.108Z",image:MBe},{id:"e81a2f8b-4b7e-41b3-aeac-da5795221688",station:"PT01071_2886",horo:"2023-06-27T14:08:33.12Z",image:NBe},{id:"945a5da9-d77b-4883-83d0-aa719fada1a3",station:"PT01071_2886",horo:"2023-07-28T12:34:27.247Z",image:FBe},{id:"668dd4b0-2301-4f97-a61c-c1fc072bd467",station:"PT01071_2886",horo:"2023-09-13T15:01:51.163Z",image:LBe},{id:"2e0f097d-aacd-4fc4-8877-f702b8038288",station:"PT01071_2886",horo:"2023-09-29T10:16:17.987Z",image:$Be},{id:"1bd59cef-8b8c-4597-9fcd-a8f9145452dc",station:"PT01071_2886",horo:"2023-06-20T15:45:11.008Z",image:UBe},{id:"0484b83e-287d-4795-870f-214a9394e13f",station:"PT01071_2886",horo:"2023-07-06T12:45:47.18Z",image:jBe},{id:"fd05667b-8d79-427a-b777-8c354ae9d3b5",station:"PT01071_2886",horo:"2023-06-25T12:48:18.544Z",image:VBe},{id:"73eb1d12-b4f7-4495-b523-03a30391fa0f",station:"PT01071_2886",horo:"2023-08-07T13:43:21.731Z",image:qBe},{id:"12fc964f-f3b5-4ece-b649-638cb8c4e40a",station:"PT01071_2886",horo:"2023-07-25T13:07:31.649Z",image:zBe},{id:"77dcba10-d9ff-4f1e-9243-a84e4ef6ec1f",station:"PT01071_2886",horo:"2023-08-01T10:18:52.581Z",image:HBe},{id:"db692e2b-d526-4c66-9121-31fd2c84b2b5",station:"PT01071_2886",horo:"2023-06-24T12:17:19.301Z",image:WBe},{id:"5e0f59ac-0f24-4255-afc3-a8a731adf9bf",station:"PT01071_2886",horo:"2023-07-04T12:58:42.573Z",image:GBe},{id:"5e4d704e-f9b0-4f13-9b67-03d20880c93c",station:"PT01071_2886",horo:"2023-07-31T10:15:43.933Z",image:KBe},{id:"af7ca033-330c-4743-bd33-96a632dc9bcb",station:"PT01071_2886",horo:"2023-07-30T10:42:00.44Z",image:XBe},{id:"cbe13669-c709-48ab-9a7b-88c144ffc159",station:"PT01071_2886",horo:"2023-08-20T12:28:04.075Z",image:YBe},{id:"2cd87ee2-dba0-43d4-8d05-573933dd0dfd",station:"PT01071_2886",horo:"2023-08-22T13:04:11.47Z",image:ZBe},{id:"6cd3c7fd-2785-429a-a0c0-38933de143ba",station:"PT01071_2886",horo:"2023-09-04T10:17:40.182Z",image:JBe},{id:"bf084015-1c47-4666-b5cb-8ebf3d5336a6",station:"PT01071_2886",horo:"2023-08-13T11:03:44.633Z",image:QBe},{id:"95bc7992-6a98-4948-9bbe-50255cc6421b",station:"PT01071_2886",horo:"2023-10-06T10:21:31.823Z",image:eDe},{id:"264d90d6-5386-42a9-a02c-7f74c1f5a158",station:"PT01071_2886",horo:"2023-05-04T10:42:59.801Z",image:tDe},{id:"98cab885-01af-4ed7-b809-43554204ad8e",station:"PT01071_2886",horo:"2023-07-15T13:29:38.714Z",image:rDe},{id:"ca767251-3b63-4c11-ba48-06f3c28e641d",station:"PT01071_2886",horo:"2023-08-12T10:27:09.541Z",image:nDe},{id:"4dc830d7-ed49-4297-b585-ee040e69987c",station:"PT01071_2886",horo:"2023-08-06T10:30:54.81Z",image:iDe},{id:"8f1a194b-4858-4379-99b8-aee921cb9857",station:"PT01071_2886",horo:"2023-08-08T10:37:08.398Z",image:sDe},{id:"125dced1-9367-4f36-9380-cc971a2e6765",station:"PT00924_2627",horo:"2023-06-28T11:46:27.024Z",image:aDe},{id:"6a64c7fa-ab8f-4432-8bd5-bb1ffddfd211",station:"PT00924_2627",horo:"2023-08-15T02:45:29.529Z",image:oDe},{id:"8b51cf44-9062-4a12-998a-60efd8d4ea63",station:"PT00924_2627",horo:"2023-05-05T03:17:58.429Z",image:cDe},{id:"d9f0d0d0-82aa-4bd1-91f5-6db508dab992",station:"PT00924_2627",horo:"2023-05-27T06:12:14.237Z",image:lDe},{id:"acd44583-6881-4a41-afc0-ebcbebf961f4",station:"PT00924_2627",horo:"2023-05-18T05:00:30.683Z",image:uDe},{id:"d2b938eb-d695-4e14-9ee2-dde1cea47e82",station:"PT00924_2627",horo:"2023-06-25T12:18:03.692Z",image:fDe},{id:"918d2d6f-dc5a-4d1b-9dd5-2de96cc56ac6",station:"PT00924_2627",horo:"2023-07-02T05:26:45.11Z",image:dDe},{id:"1f756bda-953a-4051-be5b-a71bc2396d32",station:"PT00924_2627",horo:"2023-06-16T11:53:00.382Z",image:hDe},{id:"c3ee6e26-d5a6-428d-94df-6f6434c2ac26",station:"PT00924_2627",horo:"2023-06-20T06:17:53Z",image:pDe},{id:"9948d540-759c-43af-8564-9cc3eac65542",station:"PT00924_2627",horo:"2023-06-14T08:08:32.894Z",image:mDe},{id:"c6656497-915d-47e8-a3c1-527dd62e5c66",station:"PT00924_2627",horo:"2023-05-15T13:10:30.802Z",image:gDe}],JO=()=>{const t=Zt("constl");if(t)return t;throw new Error("Constellation n'est pas trouvable.")},hh=(t,e={},r)=>{const n=ze(r);let i;const s={...e,f:a=>n.value=a};return hn(async()=>{const a=await t(s);a instanceof Function?i=a:i=a?.fOublier}),ta(async()=>{i&&await i()}),ve(()=>n.value)},Vse=()=>{const t=JO(),e=hh(t.nues.suivreDonnesTableauNue,{idNue:zl,clefTableau:h1,vrifierAutorisation:!1}),r=hh(t.nues.suivreBdsCorrespondantes,{idNue:zl}),n=({idStation:d})=>ve(()=>{if(!e.value)return;const h=i({id:d}),m=h?.coords[0],p=h?.coords[1],g=e.value.filter(_=>_.lment.donnes[VC]===m&&_.lment.donnes[qC]===p);return[...new Set(g.map(_=>_.lment.donnes[d3]))].map(_=>({date:_,vals:g.filter(x=>x.lment.donnes[d3]===_).map(x=>x.lment.donnes[zC])})).map(_=>({date:_.date,prcip:MOe(_.vals)})).toSorted((_,x)=>_.date>x.date?1:-1)}),i=({id:d})=>iI.find(h=>h.id===d),s=async({prcip:d,obs:h})=>{const m=i({id:h.station});if(!m)throw new Error(`Station ${h.station} introuvable dans les donnes.`);return await t.bds.ajouterlmentTableauUnique({schmaBd:W2,idNueUnique:zl,clefTableau:h1,vals:{[jC]:h.id,[d3]:h.horo,[VC]:m.coords[0],[qC]:m.coords[1],[zC]:d}})},a=hh(t.bds.suivreDonnesDeTableauUnique,{schmaBd:W2,idNueUnique:zl,clefTableau:h1});return{toutesPhotos:Q9,numrises:e,utiliserDonnesStation:n,choisirObservationAlatoire:({idStation:d,idPrsente:h}={})=>{const m=Q9.filter(p=>!a.value?.find(g=>g.donnes[jC]===p.id)).filter(p=>!d||p.station===d).filter(p=>p.id!==h);return m[Math.floor(Math.random()*m.length)]},contribuer:s,effacer:async d=>await t.bds.effacerlmentDeTableauUnique({schmaBd:W2,idNueUnique:zl,clefTableau:h1,idlment:d}),imageDeDonne:d=>Q9.find(h=>h.id===d)?.image,mesContributions:a,exporterDonnes:async()=>{await t.nues.exporterDonnesNue({idNue:zl})},bdsCorresp:r,effacerDonnes:async()=>{const d=a.value;d&&await Promise.all(d.map(h=>t.bds.effacerlmentDeTableauUnique({schmaBd:W2,idNueUnique:zl,clefTableau:h1,idlment:h.id})))}}},vDe=Pn({__name:"MarqueurStation",props:{coords:{},idStation:{}},emits:["prendrePhoto"],setup(t,{emit:e}){const r=t,n=e,{_:i}=O8(),{utiliserDonnesStation:s}=Vse(),a=i(ve(()=>Number.parseFloat(r.coords[0].toFixed(4)))),o=i(ve(()=>Number.parseFloat(r.coords[1].toFixed(4)))),c=s({idStation:r.idStation});return(u,l)=>(Vt(),hr(Ve(FTe),{"lat-lng":u.coords},{default:Ge(()=>[ae(Ve(qTe),null,{default:Ge(()=>[ae(Dh,{variant:"flat",width:"250"},{default:Ge(()=>[ae(Dy,{class:"px-0"},{default:Ge(()=>[ae(By,null,{default:Ge(()=>[zr(Rr(u.idStation),1)]),_:1}),ae(DO,null,{default:Ge(()=>[zr(Rr(`${Ve(a)}, ${Ve(o)}`),1)]),_:1})]),_:1}),ae(m0,{class:"px-0 text-center"},{default:Ge(()=>[ae(DOe,{hauteur:150,vals:Ve(c)},null,8,["vals"]),ae(Wa,{class:"mt-2",variant:"flat",icon:"mdi-camera-outline",size:"small",onClick:l[0]||(l[0]=()=>n("prendrePhoto"))})]),_:1})]),_:1})]),_:1})]),_:1},8,["lat-lng"]))}}),yDe={key:0},EV=Pn({__name:"EntreDonne",props:{station:{},observation:{},enSoumission:{type:Boolean}},emits:["soumettre","prendrePhoto"],setup(t,{emit:e}){const r=t,n=e,{mdAndUp:i}=Bu(),{_:s}=Fu(),{$:a}=s(),{_:o}=O8(),c=o(ve(()=>Number.parseFloat(r.station.coords[0].toFixed(4)||"0"))),u=o(ve(()=>Number.parseFloat(r.station.coords[1].toFixed(4)||"0"))),l=ze(""),f=ve(()=>{try{const p=parseFloat(l.value);if(!isNaN(p))return!0}catch{return!1}}),d=[p=>p===""||f.value?!0:a("dmo.numroInvalid")],h=()=>{n("soumettre",{prcip:parseFloat(l.value)}),l.value=""},m=()=>{n("prendrePhoto")};return(p,g)=>(Vt(),hr(Dh,{variant:"flat",class:"pa-2"},{default:Ge(()=>[ae(Dy,{class:"px-0 pt-0"},{default:Ge(()=>[ae(By,null,{default:Ge(()=>[zr(Rr(p.station.id),1)]),_:1}),ae(DO,null,{default:Ge(()=>[ae(Hr,{icon:"mdi-map-marker-outline",start:""}),zr(Rr(`${Ve(c)}, ${Ve(u)}`)+" ",1),g[3]||(g[3]=bi("br",null,null,-1)),p.observation?(Vt(),Ch("span",yDe,[ae(Hr,{icon:"mdi-clock-time-three-outline",start:""}),zr(" "+Rr(new Date(p.observation.horo).toLocaleString()),1)])):Qs("",!0)]),_:1})]),_:1}),ae(m0,null,{default:Ge(()=>[Ve(i)?Qs("",!0):(Vt(),hr(Q1,{key:0,class:"pb-6",src:p.observation?.image},null,8,["src"])),ae(d4,{modelValue:l.value,"onUpdate:modelValue":g[0]||(g[0]=v=>l.value=v),variant:"outlined",label:Ve(a)("dmo.indicePrcip"),rules:d,disabled:p.enSoumission,clearable:""},null,8,["modelValue","label","disabled"]),ae(Wa,{class:"my-2",width:"100%","append-icon":"mdi-check",variant:"outlined",disabled:!l.value,loading:p.enSoumission,onClick:g[1]||(g[1]=()=>h())},{default:Ge(()=>[zr(Rr(Ve(a)("dmo.soumettre")),1)]),_:1},8,["disabled","loading"]),ae(Wa,{class:"my-2",width:"100%","append-icon":"mdi-camera-flip-outline",variant:"outlined",onClick:g[2]||(g[2]=()=>m())},{default:Ge(()=>[zr(Rr(Ve(a)("dmo.nouvellePhoto")),1)]),_:1})]),_:1})]),_:1}))}}),bDe=(t,e={})=>{const r=ze();return hn(async()=>{const n=await t(e);r.value=n}),ve(()=>r.value)},wDe=et({fullscreen:Boolean,retainFocus:{type:Boolean,default:!0},scrollable:Boolean,..._O({origin:"center center",scrollStrategy:"block",transition:{component:vO},zIndex:2400})},"VDialog"),qse=_t()({name:"VDialog",props:wDe(),emits:{"update:modelValue":t=>!0,afterEnter:()=>!0,afterLeave:()=>!0},setup(t,e){let{emit:r,slots:n}=e;const i=si(t,"modelValue"),{scopeId:s}=wO(),a=ze();function o(l){const f=l.relatedTarget,d=l.target;if(f!==d&&a.value?.contentEl&&a.value?.globalTop&&![document,a.value.contentEl].includes(d)&&!a.value.contentEl.contains(d)){const h=nv(a.value.contentEl);if(!h.length)return;const m=h[0],p=h[h.length-1];f===m?p.focus():m.focus()}}hs(()=>{document.removeEventListener("focusin",o)}),Lr&&Ft(()=>i.value&&t.retainFocus,l=>{l?document.addEventListener("focusin",o):document.removeEventListener("focusin",o)},{immediate:!0});function c(){r("afterEnter"),a.value?.contentEl&&!a.value.contentEl.contains(document.activeElement)&&a.value.contentEl.focus({preventScroll:!0})}function u(){r("afterLeave")}return Ft(i,async l=>{l||(await Cn(),a.value.activatorEl?.focus({preventScroll:!0}))}),Gt(()=>{const l=l4.filterProps(t),f=zt({"aria-haspopup":"dialog"},t.activatorProps),d=zt({tabindex:-1},t.contentProps);return ae(l4,zt({ref:a,class:["v-dialog",{"v-dialog--fullscreen":t.fullscreen,"v-dialog--scrollable":t.scrollable},t.class],style:t.style},l,{modelValue:i.value,"onUpdate:modelValue":h=>i.value=h,"aria-modal":"true",activatorProps:f,contentProps:d,height:t.fullscreen?void 0:t.height,width:t.fullscreen?void 0:t.width,maxHeight:t.fullscreen?void 0:t.maxHeight,maxWidth:t.fullscreen?void 0:t.maxWidth,role:"dialog",onAfterEnter:c,onAfterLeave:u},s),{activator:n.activator,default:function(){for(var h=arguments.length,m=new Array(h),p=0;p<h;p++)m[p]=arguments[p];return ae(Di,{root:"VDialog"},{default:()=>[n.default?.(...m)]})}})}),$8({},a)}}),kV=Pn({__name:"CarteConnexions",setup(t){const e=ze(!1),r=JO(),n=hh(r.rseau.suivreConnexionsPostesSFIP),i=bDe(r.obtIdLibp2p),s=hh(r.suivreIdCompte),a=hh(r.rseau.suivreConnexionsMembres);return(o,c)=>(Vt(),hr(qse,{modelValue:e.value,"onUpdate:modelValue":c[0]||(c[0]=u=>e.value=u)},{activator:Ge(({props:u})=>[PQ(o.$slots,"activator",_me(YQ({props:u})))]),default:Ge(()=>[ae(Dh,{class:"mx-auto"},{default:Ge(()=>[ae(Dy,null,{default:Ge(()=>[ae(By,null,{default:Ge(()=>c[1]||(c[1]=[zr(" Infos ")])),_:1})]),_:1}),ae(m0,null,{default:Ge(()=>[ae(ep,null,{default:Ge(()=>[ae(ng,null,{default:Ge(()=>c[2]||(c[2]=[zr("Mon Id Constellation")])),_:1}),ae(Ys,null,{default:Ge(()=>[zr(Rr(Ve(s)),1)]),_:1}),ae(ng,null,{default:Ge(()=>c[3]||(c[3]=[zr("Connexions Constellation")])),_:1}),(Vt(!0),Ch(ar,null,F3(Ve(a),u=>(Vt(),hr(Ys,{title:u.infoMembre.idCompte,subtitle:u.vu},null,8,["title","subtitle"]))),256)),ae(ng,null,{default:Ge(()=>c[4]||(c[4]=[zr("Mon Id Libp2p")])),_:1}),ae(Ys,null,{default:Ge(()=>[zr(Rr(Ve(i)),1)]),_:1}),ae(ng,null,{default:Ge(()=>c[5]||(c[5]=[zr("Connexions SFIP")])),_:1}),(Vt(!0),Ch(ar,null,F3(Ve(n),u=>(Vt(),hr(Ys,{title:u.pair,subtitle:u.adresses[0]},null,8,["title","subtitle"]))),256))]),_:1})]),_:1})]),_:1})]),_:3},8,["modelValue"]))}}),_De=et({indeterminate:Boolean,inset:Boolean,flat:Boolean,loading:{type:[Boolean,String],default:!1},...SO(),...EO()},"VSwitch"),I3t=_t()({name:"VSwitch",inheritAttrs:!1,props:_De(),emits:{"update:focused":t=>!0,"update:modelValue":t=>!0,"update:indeterminate":t=>!0},setup(t,e){let{attrs:r,slots:n}=e;const i=si(t,"indeterminate"),s=si(t,"modelValue"),{loaderClasses:a}=N8(t),{isFocused:o,focus:c,blur:u}=xO(t),l=ze(),f=Lr&&window.matchMedia("(forced-colors: active)").matches,d=ve(()=>typeof t.loading=="string"&&t.loading!==""?t.loading:t.color),h=xc(),m=ve(()=>t.id||`switch-${h}`);function p(){i.value&&(i.value=!1)}function g(v){v.stopPropagation(),v.preventDefault(),l.value?.input?.click()}return Gt(()=>{const[v,y]=yR(r),b=f4.filterProps(t),_=h4.filterProps(t);return ae(f4,zt({class:["v-switch",{"v-switch--flat":t.flat},{"v-switch--inset":t.inset},{"v-switch--indeterminate":i.value},a.value,t.class]},v,b,{modelValue:s.value,"onUpdate:modelValue":x=>s.value=x,id:m.value,focused:o.value,style:t.style}),{...n,default:x=>{let{id:E,messagesId:k,isDisabled:B,isReadonly:D,isValid:z}=x;const U={model:s,isValid:z};return ae(h4,zt({ref:l},_,{modelValue:s.value,"onUpdate:modelValue":[S=>s.value=S,p],id:E.value,"aria-describedby":k.value,type:"checkbox","aria-checked":i.value?"mixed":void 0,disabled:B.value,readonly:D.value,onFocus:c,onBlur:u},y),{...n,default:S=>{let{backgroundColorClasses:T,backgroundColorStyles:w}=S;return ae("div",{class:["v-switch__track",f?void 0:T.value],style:w.value,onClick:g},[n["track-true"]&&ae("div",{key:"prepend",class:"v-switch__track-true"},[n["track-true"](U)]),n["track-false"]&&ae("div",{key:"append",class:"v-switch__track-false"},[n["track-false"](U)])])},input:S=>{let{inputNode:T,icon:w,backgroundColorClasses:A,backgroundColorStyles:F}=S;return ae(ar,null,[T,ae("div",{class:["v-switch__thumb",{"v-switch__thumb--filled":w||t.loading},t.inset||f?void 0:A.value],style:t.inset?void 0:F.value},[n.thumb?ae(Di,{defaults:{VIcon:{icon:w,size:"x-small"}}},{default:()=>[n.thumb({...U,icon:w})]}):ae(u9e,null,{default:()=>[t.loading?ae(fO,{name:"v-switch",active:!0,color:z.value===!1?void 0:d.value},{default:P=>n.loader?n.loader(P):ae(lO,{active:P.isActive,color:P.color,indeterminate:!0,size:"16",width:"2"},null)}):w&&ae(Hr,{key:String(w),icon:w,size:"x-small"},null)]})])])}})}})}),{}}}),xDe={class:"text-h3"},SDe={class:"text-h5 d-flex"},EDe={key:1,class:"mx-auto my-auto text-h5 text-center text-disabled"},kDe=Pn({__name:"SectionDmo",props:{nEtapes:{},etape:{}},emits:["retour","avancer"],setup(t,{emit:e}){const r=e,{mdAndUp:n}=Bu(),{_:i}=Fu(),{$:s}=i(),{choisirObservationAlatoire:a,exporterDonnes:o,contribuer:c,effacerDonnes:u}=Vse(),l=ze(!1),f=ve(()=>iI.find(x=>x.id===p.value?.station)),d=ze(!1),h=async()=>{d.value=!0,await o(),d.value=!1},m=ze(!1),p=ze();$i(()=>{m.value=!!p.value});const g=ze(!1);let v;const y=async({idStation:x}={})=>{v=x;const E=a({idStation:x,idPrsente:p.value?.id});p.value=E,E||(g.value=!0)},b=ze(!1),_=async x=>{if(!p.value)throw new Error("Observation non slectionne");b.value=!0,await c({prcip:x,obs:p.value}),n.value?y({idStation:v}):p.value=void 0,b.value=!1};return(x,E)=>(Vt(),hr(Iy,{"n-etapes":x.nEtapes,etape:x.etape,onRetour:E[13]||(E[13]=()=>r("retour")),onAvancer:E[14]||(E[14]=()=>r("avancer"))},{default:Ge(()=>[ae(Gi,{cols:12},{default:Ge(()=>[ae(Dh,{class:"px-6",variant:"flat"},{default:Ge(()=>[bi("div",xDe,Rr(Ve(s)("dmo.titre")),1),Ve(n)?Qs("",!0):(Vt(),hr(u4,{key:0},{activator:Ge(({props:k})=>[ae(Wa,zt(k,{icon:"mdi-cog",variant:"flat"}),null,16)]),default:Ge(()=>[ae(ep,null,{default:Ge(()=>[Ve(n)?Qs("",!0):(Vt(),hr(Ys,{key:0,"prepend-icon":"mdi-download",title:Ve(s)("dmo.indiceTlcharger"),onClick:E[0]||(E[0]=()=>h())},null,8,["title"])),ae(Ys,{class:"text-error",title:Ve(s)("dmo.effacerDonnes"),onClick:E[1]||(E[1]=()=>Ve(u)())},{prepend:Ge(()=>[ae(Hr,{icon:"mdi-delete"})]),_:1},8,["title"]),ae(kV,null,{activator:Ge(({props:k})=>[ae(Ys,zt(k,{title:Ve(s)("Networking"),"prepend-icon":"mdi-lan"}),null,16,["title"])]),_:1})]),_:1})]),_:1}))]),_:1}),ae($ne,{class:"my-4"})]),_:1}),Ve(n)?(Vt(),hr(Gi,{key:0,cols:Ve(n)?6:12},{default:Ge(()=>[ae(Dh,{class:"px-6",variant:"flat",height:"65vh",style:{"overflow-y":"scroll"}},{default:Ge(()=>[bi("div",SDe,[zr(Rr(Ve(s)("dmo.sousTitre"))+" ",1),ae(Y7e),Ve(n)?(Vt(),hr(Wa,{key:0,icon:"mdi-download",variant:"flat",loading:d.value,onClick:E[2]||(E[2]=()=>h())},null,8,["loading"])):Qs("",!0),Qs("",!0),ae(u4,null,{activator:Ge(({props:k})=>[ae(Wa,zt(k,{icon:"mdi-cog",variant:"flat"}),null,16)]),default:Ge(()=>[ae(ep,null,{default:Ge(()=>[Ve(n)?Qs("",!0):(Vt(),hr(Ys,{key:0,"prepend-icon":"mdi-download",title:Ve(s)("dmo.indiceTlcharger"),onClick:E[4]||(E[4]=()=>h())},null,8,["title"])),ae(kV,null,{activator:Ge(({props:k})=>[ae(Ys,zt(k,{title:Ve(s)("Networking"),"prepend-icon":"mdi-lan"}),null,16,["title"])]),_:1}),ae(Ys,{class:"text-error",title:Ve(s)("dmo.effacerDonnes"),onClick:E[5]||(E[5]=()=>Ve(u)())},{prepend:Ge(()=>[ae(Hr,{icon:"mdi-delete"})]),_:1},8,["title"])]),_:1})]),_:1})]),ae(m0,{class:"px-0"},{default:Ge(()=>[f.value?(Vt(),hr(bne,{key:0},{default:Ge(()=>[ae(Gi,{cols:8},{default:Ge(()=>[ae(Q1,{src:p.value?.image},null,8,["src"])]),_:1}),ae(Gi,{cols:4},{default:Ge(()=>[ae(EV,{station:f.value,observation:p.value,"en-soumission":b.value,onSoumettre:E[6]||(E[6]=k=>_(k.prcip)),onPrendrePhoto:E[7]||(E[7]=()=>y())},null,8,["station","observation","en-soumission"])]),_:1})]),_:1})):(Vt(),Ch("div",EDe,[zr(Rr(Ve(s)(g.value?"dmo.plusDePhotos":"dmo.choisirStation"))+" ",1),E[15]||(E[15]=bi("br",null,null,-1)),ae(Wa,{icon:"mdi-camera-outline",variant:"flat",onClick:E[8]||(E[8]=()=>y())})]))]),_:1})]),_:1})]),_:1},8,["cols"])):(Vt(),hr(qse,{key:1,modelValue:m.value,"onUpdate:modelValue":E[11]||(E[11]=k=>m.value=k)},{default:Ge(()=>[ae(EV,{station:f.value,observation:p.value,"en-soumission":b.value,onSoumettre:E[9]||(E[9]=k=>_(k.prcip)),onPrendrePhoto:E[10]||(E[10]=()=>y())},null,8,["station","observation","en-soumission"])]),_:1},8,["modelValue"])),ae(Gi,{cols:Ve(n)?6:12},{default:Ge(()=>[bi("div",{class:"mx-auto",style:Dp({height:Ve(n)?"65vh":"60vh",width:Ve(n)?"50vw":"100vw"})},[ae(Ve(RTe),{ref:"map",zoom:10,center:[27.6461574,85.3402103],useGlobalLeaflet:!1},{default:Ge(()=>[ae(Ve(HTe),{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png","layer-type":"base",name:"OpenStreetMap"}),(Vt(!0),Ch(ar,null,F3(Ve(iI),k=>(Vt(),hr(vDe,{key:k.id,coords:k.coords,"id-station":k.id,onPrendrePhoto:()=>y({idStation:k.id})},null,8,["coords","id-station","onPrendrePhoto"]))),128))]),_:1},512)],4)]),_:1},8,["cols"]),ae(Gi,{cols:12,class:"my-0 py-0"},{default:Ge(()=>[bi("div",{class:"px-6 text-disabled",onClick:E[12]||(E[12]=()=>Ve(Z8)("https://data.smartphones4water.org/"))},[zr(Rr(Ve(s)("dmo.source"))+" ",1),ae(Hr,{class:"mx-2",size:"small",icon:"mdi-open-in-new"}),zr(" "+Rr(Ve(s)("dmo.merci"))+" ",1),ae(Hr,{class:"mx-2",icon:"mdi-emoticon-happy-outline",size:"small"})])]),_:1})]),_:1},8,["n-etapes","etape"]))}}),TDe={class:"d-flex justify-center flex-wrap mb-6"};const ADe=Pn({__name:"SectionCode",props:{nEtapes:{},etape:{}},emits:["retour","avancer"],setup(t,{emit:e}){const r=e,{mdAndUp:n}=Bu(),{_:i}=Fu(),{$:s}=i({}),a=JO(),o=hh(a.bds.rechercherBdsParNue,{idNue:zl}),c=ve(()=>o.value?`https://appli.rseau-constellation.ca/#/donnes/bd/${encodeURIComponent(o.value[0])}`:void 0);return(u,l)=>(Vt(),hr(Iy,{"n-etapes":u.nEtapes,etape:u.etape,onRetour:l[1]||(l[1]=()=>r("retour")),onAvancer:l[2]||(l[2]=()=>r("avancer"))},{default:Ge(()=>[ae(Gi,{class:rc([Ve(n)?"text-h2":"text-h3","text-center"]),cols:12},{default:Ge(()=>[zr(Rr(Ve(s)("code.titre")),1)]),_:1},8,["class"]),ae(Gi,{cols:12},{default:Ge(()=>[bi("div",TDe,[c.value?(Vt(),hr(th,{key:0,titre:Ve(s)("code.options.appli"),icne:"mdi-link",lien:c.value,emphase:""},null,8,["titre","lien"])):Qs("",!0),Qs("",!0),Qs("",!0),Qs("",!0)])]),_:1}),ae(Gi,{cols:12,class:"text-center text-h6"},{default:Ge(()=>[zr(Rr(Ve(s)("code.conclusion"))+" ",1),l[3]||(l[3]=bi("br",null,null,-1)),ae(Hr,{icon:"mdi-email-outline",start:"",onClick:l[0]||(l[0]=()=>Ve(Z8)(`mailto://${Ve($j)}`))}),zr(" "+Rr(Ve($j)),1)]),_:1})]),_:1},8,["n-etapes","etape"]))}}),Nm=5,CDe=Pn({__name:"PagePrincipale",setup(t){const e=ze(0),r=ze();return hn(async()=>{r.value=await Fie()}),(n,i)=>(Vt(),hr(s9e,{modelValue:e.value,"onUpdate:modelValue":i[10]||(i[10]=s=>e.value=s),direction:"vertical",style:{height:"100%"},disabled:""},{default:Ge(()=>[ae(WSe,{"n-etapes":Nm,etape:0,onRetour:i[0]||(i[0]=s=>e.value--),onAvancer:i[1]||(i[1]=s=>e.value++)}),ae(kDe,{"n-etapes":Nm,etape:1,onRetour:i[2]||(i[2]=s=>e.value--),onAvancer:i[3]||(i[3]=s=>e.value++)}),ae(gTe,{"n-etapes":Nm,etape:2,onRetour:i[4]||(i[4]=s=>e.value--),onAvancer:i[5]||(i[5]=s=>e.value++)}),ae(bTe,{"n-etapes":Nm,etape:3,onRetour:i[6]||(i[6]=s=>e.value--),onAvancer:i[7]||(i[7]=s=>e.value++)}),ae(ADe,{"n-etapes":Nm,etape:4,onRetour:i[8]||(i[8]=s=>e.value--),onAvancer:i[9]||(i[9]=s=>e.value++)})]),_:1},8,["modelValue"]))}}),IDe=[{path:"/",component:CDe}],zse=Ube({history:mbe(),routes:IDe});zse.afterEach(t=>{const{lg:e}=t.query;if(e&&typeof e=="string"){const{_:r}=Hp();r(e)}});var eS={exports:{}},TV;function PDe(){return TV||(TV=1,function(t){var e=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function i(c,u,l){this.fn=c,this.context=u,this.once=l||!1}function s(c,u,l,f,d){if(typeof l!="function")throw new TypeError("The listener must be a function");var h=new i(l,f||c,d),m=r?r+u:u;return c._events[m]?c._events[m].fn?c._events[m]=[c._events[m],h]:c._events[m].push(h):(c._events[m]=h,c._eventsCount++),c}function a(c,u){--c._eventsCount===0?c._events=new n:delete c._events[u]}function o(){this._events=new n,this._eventsCount=0}o.prototype.eventNames=function(){var u=[],l,f;if(this._eventsCount===0)return u;for(f in l=this._events)e.call(l,f)&&u.push(r?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(l)):u},o.prototype.listeners=function(u){var l=r?r+u:u,f=this._events[l];if(!f)return[];if(f.fn)return[f.fn];for(var d=0,h=f.length,m=new Array(h);d<h;d++)m[d]=f[d].fn;return m},o.prototype.listenerCount=function(u){var l=r?r+u:u,f=this._events[l];return f?f.fn?1:f.length:0},o.prototype.emit=function(u,l,f,d,h,m){var p=r?r+u:u;if(!this._events[p])return!1;var g=this._events[p],v=arguments.length,y,b;if(g.fn){switch(g.once&&this.removeListener(u,g.fn,void 0,!0),v){case 1:return g.fn.call(g.context),!0;case 2:return g.fn.call(g.context,l),!0;case 3:return g.fn.call(g.context,l,f),!0;case 4:return g.fn.call(g.context,l,f,d),!0;case 5:return g.fn.call(g.context,l,f,d,h),!0;case 6:return g.fn.call(g.context,l,f,d,h,m),!0}for(b=1,y=new Array(v-1);b<v;b++)y[b-1]=arguments[b];g.fn.apply(g.context,y)}else{var _=g.length,x;for(b=0;b<_;b++)switch(g[b].once&&this.removeListener(u,g[b].fn,void 0,!0),v){case 1:g[b].fn.call(g[b].context);break;case 2:g[b].fn.call(g[b].context,l);break;case 3:g[b].fn.call(g[b].context,l,f);break;case 4:g[b].fn.call(g[b].context,l,f,d);break;default:if(!y)for(x=1,y=new Array(v-1);x<v;x++)y[x-1]=arguments[x];g[b].fn.apply(g[b].context,y)}}return!0},o.prototype.on=function(u,l,f){return s(this,u,l,f,!1)},o.prototype.once=function(u,l,f){return s(this,u,l,f,!0)},o.prototype.removeListener=function(u,l,f,d){var h=r?r+u:u;if(!this._events[h])return this;if(!l)return a(this,h),this;var m=this._events[h];if(m.fn)m.fn===l&&(!d||m.once)&&(!f||m.context===f)&&a(this,h);else{for(var p=0,g=[],v=m.length;p<v;p++)(m[p].fn!==l||d&&!m[p].once||f&&m[p].context!==f)&&g.push(m[p]);g.length?this._events[h]=g.length===1?g[0]:g:a(this,h)}return this},o.prototype.removeAllListeners=function(u){var l;return u?(l=r?r+u:u,this._events[l]&&a(this,l)):(this._events=new n,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=r,o.EventEmitter=o,t.exports=o}(eS)),eS.exports}var RDe=PDe();const ODe=In(RDe);class Hse extends Error{constructor(e){super(e),this.name="TimeoutError"}}let BDe=class extends Error{constructor(e){super(),this.name="AbortError",this.message=e}};const AV=t=>globalThis.DOMException===void 0?new BDe(t):new DOMException(t),CV=t=>{const e=t.reason===void 0?AV("This operation was aborted."):t.reason;return e instanceof Error?e:AV(e)};function jy(t,e){const{milliseconds:r,fallback:n,message:i,customTimers:s={setTimeout,clearTimeout}}=e;let a,o;const u=new Promise((l,f)=>{if(typeof r!="number"||Math.sign(r)!==1)throw new TypeError(`Expected \`milliseconds\` to be a positive number, got \`${r}\``);if(e.signal){const{signal:h}=e;h.aborted&&f(CV(h)),o=()=>{f(CV(h))},h.addEventListener("abort",o,{once:!0})}if(r===Number.POSITIVE_INFINITY){t.then(l,f);return}const d=new Hse;a=s.setTimeout.call(void 0,()=>{if(n){try{l(n())}catch(h){f(h)}return}typeof t.cancel=="function"&&t.cancel(),i===!1?l():i instanceof Error?f(i):(d.message=i??`Promise timed out after ${r} milliseconds`,f(d))},r),(async()=>{try{l(await t)}catch(h){f(h)}})()}).finally(()=>{u.clear(),o&&e.signal&&e.signal.removeEventListener("abort",o)});return u.clear=()=>{s.clearTimeout.call(void 0,a),a=void 0},u}function DDe(t,e,r){let n=0,i=t.length;for(;i>0;){const s=Math.trunc(i/2);let a=n+s;r(t[a],e)<=0?(n=++a,i-=s+1):i=s}return n}let MDe=class{#e=[];enqueue(e,r){r={priority:0,...r};const n={priority:r.priority,id:r.id,run:e};if(this.size===0||this.#e[this.size-1].priority>=r.priority){this.#e.push(n);return}const i=DDe(this.#e,n,(s,a)=>a.priority-s.priority);this.#e.splice(i,0,n)}setPriority(e,r){const n=this.#e.findIndex(s=>s.id===e);if(n===-1)throw new ReferenceError(`No promise function with the id "${e}" exists in the queue.`);const[i]=this.#e.splice(n,1);this.enqueue(i.run,{priority:r,id:e})}dequeue(){return this.#e.shift()?.run}filter(e){return this.#e.filter(r=>r.priority===e.priority).map(r=>r.run)}get size(){return this.#e.length}};class Cu extends ODe{#e;#t;#r=0;#i;#o;#l=0;#s;#u;#n;#m;#a=0;#f;#c;#g;#b=1n;timeout;constructor(e){if(super(),e={carryoverConcurrencyCount:!1,intervalCap:Number.POSITIVE_INFINITY,interval:0,concurrency:Number.POSITIVE_INFINITY,autoStart:!0,queueClass:MDe,...e},!(typeof e.intervalCap=="number"&&e.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${e.intervalCap?.toString()??""}\` (${typeof e.intervalCap})`);if(e.interval===void 0||!(Number.isFinite(e.interval)&&e.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${e.interval?.toString()??""}\` (${typeof e.interval})`);this.#e=e.carryoverConcurrencyCount,this.#t=e.intervalCap===Number.POSITIVE_INFINITY||e.interval===0,this.#i=e.intervalCap,this.#o=e.interval,this.#n=new e.queueClass,this.#m=e.queueClass,this.concurrency=e.concurrency,this.timeout=e.timeout,this.#g=e.throwOnTimeout===!0,this.#c=e.autoStart===!1}get#w(){return this.#t||this.#r<this.#i}get#_(){return this.#a<this.#f}#x(){this.#a--,this.#d(),this.emit("next")}#S(){this.#y(),this.#v(),this.#u=void 0}get#E(){const e=Date.now();if(this.#s===void 0){const r=this.#l-e;if(r<0)this.#r=this.#e?this.#a:0;else return this.#u===void 0&&(this.#u=setTimeout(()=>{this.#S()},r)),!0}return!1}#d(){if(this.#n.size===0)return this.#s&&clearInterval(this.#s),this.#s=void 0,this.emit("empty"),this.#a===0&&this.emit("idle"),!1;if(!this.#c){const e=!this.#E;if(this.#w&&this.#_){const r=this.#n.dequeue();return r?(this.emit("active"),r(),e&&this.#v(),!0):!1}}return!1}#v(){this.#t||this.#s!==void 0||(this.#s=setInterval(()=>{this.#y()},this.#o),this.#l=Date.now()+this.#o)}#y(){this.#r===0&&this.#a===0&&this.#s&&(clearInterval(this.#s),this.#s=void 0),this.#r=this.#e?this.#a:0,this.#h()}#h(){for(;this.#d(););}get concurrency(){return this.#f}set concurrency(e){if(!(typeof e=="number"&&e>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${e}\` (${typeof e})`);this.#f=e,this.#h()}async#k(e){return new Promise((r,n)=>{e.addEventListener("abort",()=>{n(e.reason)},{once:!0})})}setPriority(e,r){this.#n.setPriority(e,r)}async add(e,r={}){return r.id??=(this.#b++).toString(),r={timeout:this.timeout,throwOnTimeout:this.#g,...r},new Promise((n,i)=>{this.#n.enqueue(async()=>{this.#a++,this.#r++;try{r.signal?.throwIfAborted();let s=e({signal:r.signal});r.timeout&&(s=jy(Promise.resolve(s),{milliseconds:r.timeout})),r.signal&&(s=Promise.race([s,this.#k(r.signal)]));const a=await s;n(a),this.emit("completed",a)}catch(s){if(s instanceof Hse&&!r.throwOnTimeout){n();return}i(s),this.emit("error",s)}finally{this.#x()}},r),this.emit("add"),this.#d()})}async addAll(e,r){return Promise.all(e.map(async n=>this.add(n,r)))}start(){return this.#c?(this.#c=!1,this.#h(),this):this}pause(){this.#c=!0}clear(){this.#n=new this.#m}async onEmpty(){this.#n.size!==0&&await this.#p("empty")}async onSizeLessThan(e){this.#n.size<e||await this.#p("next",()=>this.#n.size<e)}async onIdle(){this.#a===0&&this.#n.size===0||await this.#p("idle")}async#p(e,r){return new Promise(n=>{const i=()=>{r&&!r()||(this.off(e,i),n())};this.on(e,i)})}get size(){return this.#n.size}sizeBy(e){return this.#n.filter(e).length}get pending(){return this.#a}get isPaused(){return this.#c}}function sr(){const t={};return t.promise=new Promise((e,r)=>{t.resolve=e,t.reject=r}),t}class IV{buffer;mask;top;btm;next;constructor(e){if(!(e>0)||(e-1&e)!==0)throw new Error("Max size for a FixedFIFO should be a power of two");this.buffer=new Array(e),this.mask=e-1,this.top=0,this.btm=0,this.next=null}push(e){return this.buffer[this.top]!==void 0?!1:(this.buffer[this.top]=e,this.top=this.top+1&this.mask,!0)}shift(){const e=this.buffer[this.btm];if(e!==void 0)return this.buffer[this.btm]=void 0,this.btm=this.btm+1&this.mask,e}isEmpty(){return this.buffer[this.btm]===void 0}}class tS{size;hwm;head;tail;constructor(e={}){this.hwm=e.splitLimit??16,this.head=new IV(this.hwm),this.tail=this.head,this.size=0}calculateSize(e){return e?.byteLength!=null?e.byteLength:1}push(e){if(e?.value!=null&&(this.size+=this.calculateSize(e.value)),!this.head.push(e)){const r=this.head;this.head=r.next=new IV(2*this.head.buffer.length),this.head.push(e)}}shift(){let e=this.tail.shift();if(e===void 0&&this.tail.next!=null){const r=this.tail.next;this.tail.next=null,this.tail=r,e=this.tail.shift()}return e?.value!=null&&(this.size-=this.calculateSize(e.value)),e}isEmpty(){return this.head.isEmpty()}}let NDe=class extends Error{type;code;constructor(e,r){super(e??"The operation was aborted"),this.type="aborted",this.code=r??"ABORT_ERR"}};function Po(t={}){return FDe(r=>{const n=r.shift();if(n==null)return{done:!0};if(n.error!=null)throw n.error;return{done:n.done===!0,value:n.value}},t)}function FDe(t,e){e=e??{};let r=e.onEnd,n=new tS,i,s,a,o=sr();const c=async()=>{try{return n.isEmpty()?a?{done:!0}:await new Promise((g,v)=>{s=y=>{s=null,n.push(y);try{g(t(n))}catch(b){v(b)}return i}}):t(n)}finally{n.isEmpty()&&queueMicrotask(()=>{o.resolve(),o=sr()})}},u=g=>s!=null?s(g):(n.push(g),i),l=g=>(n=new tS,s!=null?s({error:g}):(n.push({error:g}),i)),f=g=>{if(a)return i;if(e?.objectMode!==!0&&g?.byteLength==null)throw new Error("objectMode was not true but tried to push non-Uint8Array value");return u({done:!1,value:g})},d=g=>a?i:(a=!0,g!=null?l(g):u({done:!0})),h=()=>(n=new tS,d(),{done:!0}),m=g=>(d(g),{done:!0});if(i={[Symbol.asyncIterator](){return this},next:c,return:h,throw:m,push:f,end:d,get readableLength(){return n.size},onEmpty:async g=>{const v=g?.signal;if(v?.throwIfAborted(),n.isEmpty())return;let y,b;v!=null&&(y=new Promise((_,x)=>{b=()=>{x(new NDe)},v.addEventListener("abort",b)}));try{await Promise.race([o.promise,y])}finally{b!=null&&v!=null&&v?.removeEventListener("abort",b)}}},r==null)return i;const p=i;return i={[Symbol.asyncIterator](){return this},next(){return p.next()},throw(g){return p.throw(g),r!=null&&(r(g),r=void 0),{done:!0}},return(){return p.return(),r!=null&&(r(),r=void 0),{done:!0}},push:f,end(g){return p.end(g),r!=null&&(r(g),r=void 0),i},get readableLength(){return p.readableLength},onEmpty:g=>p.onEmpty(g)},i}let PV=class extends Error{type;code;constructor(e,r,n){super(e??"The operation was aborted"),this.type="aborted",this.name=n??"AbortError",this.code=r??"ABORT_ERR"}};async function Mi(t,e,r){if(e==null)return t;if(e.aborted)return t.catch(()=>{}),Promise.reject(new PV(r?.errorMessage,r?.errorCode,r?.errorName));let n;const i=new PV(r?.errorMessage,r?.errorCode,r?.errorName);try{return await Promise.race([t,new Promise((s,a)=>{n=()=>{a(i)},e.addEventListener("abort",n)})])}finally{n!=null&&e.removeEventListener("abort",n)}}let LDe=class{readNext;haveNext;ended;nextResult;error;constructor(){this.ended=!1,this.readNext=sr(),this.haveNext=sr()}[Symbol.asyncIterator](){return this}async next(){if(this.nextResult==null&&await this.haveNext.promise,this.nextResult==null)throw new Error("HaveNext promise resolved but nextResult was undefined");const e=this.nextResult;return this.nextResult=void 0,this.readNext.resolve(),this.readNext=sr(),e}async throw(e){return this.ended=!0,this.error=e,e!=null&&(this.haveNext.promise.catch(()=>{}),this.haveNext.reject(e)),{done:!0,value:void 0}}async return(){const e={done:!0,value:void 0};return this.ended=!0,this.nextResult=e,this.haveNext.resolve(),e}async push(e,r){await this._push(e,r)}async end(e,r){e!=null?await this.throw(e):await this._push(void 0,r)}async _push(e,r){if(e!=null&&this.ended)throw this.error??new Error("Cannot push value onto an ended pushable");for(;this.nextResult!=null;)await this.readNext.promise;e!=null?this.nextResult={done:!1,value:e}:(this.ended=!0,this.nextResult={done:!0,value:void 0}),this.haveNext.resolve(),this.haveNext=sr(),await Mi(this.readNext.promise,r?.signal,r)}};function $De(){return new LDe}function UDe(t){return t[Symbol.asyncIterator]!=null}async function jDe(t,e){try{await Promise.all(t.map(async r=>{for await(const n of r)await e.push(n)})),await e.end()}catch(r){await e.end(r).catch(()=>{})}}async function*VDe(t){const e=$De();jDe(t,e).catch(()=>{}),yield*e}function*qDe(t){for(const e of t)yield*e}function Nf(...t){const e=[];for(const r of t)UDe(r)||e.push(r);return e.length===t.length?qDe(e):VDe(t)}function Un(t,...e){if(t==null)throw new Error("Empty pipeline");if(rS(t)){const n=t;t=()=>n.source}else if(Gse(t)||Wse(t)){const n=t;t=()=>n}const r=[t,...e];if(r.length>1&&rS(r[r.length-1])&&(r[r.length-1]=r[r.length-1].sink),r.length>2)for(let n=1;n<r.length-1;n++)rS(r[n])&&(r[n]=HDe(r[n]));return zDe(...r)}const zDe=(...t)=>{let e;for(;t.length>0;)e=t.shift()(e);return e},Wse=t=>t?.[Symbol.asyncIterator]!=null,Gse=t=>t?.[Symbol.iterator]!=null,rS=t=>t==null?!1:t.sink!=null&&t.source!=null,HDe=t=>e=>{const r=t.sink(e);if(r?.then!=null){const n=Po({objectMode:!0});r.then(()=>{n.end()},a=>{n.end(a)});let i;const s=t.source;if(Wse(s))i=async function*(){yield*s,n.end()};else if(Gse(s))i=function*(){yield*s,n.end()};else throw new Error("Unknown duplex source type - must be Iterable or AsyncIterable");return Nf(n,i())}return t.source};var nS,RV;function WDe(){return RV||(RV=1,nS=function(){return Date.now()}),nS}var iS,OV;function GDe(){if(OV)return iS;OV=1;const t=WDe();class e{constructor(i,s,a){const o=this;this._started=t(),this._rescheduled=0,this._scheduled=s,this._args=a,this._triggered=!1,this._timerWrapper=()=>{o._rescheduled>0?(o._scheduled=o._rescheduled-(t()-o._started),o._schedule(o._scheduled)):(o._triggered=!0,i.apply(null,o._args))},this._timer=setTimeout(this._timerWrapper,s)}reschedule(i){i||(i=this._scheduled);const s=t();s+i-(this._started+this._scheduled)<0?(clearTimeout(this._timer),this._schedule(i)):this._triggered?this._schedule(i):(this._started=s,this._rescheduled=i)}_schedule(i){this._triggered=!1,this._started=t(),this._rescheduled=0,this._scheduled=i,this._timer=setTimeout(this._timerWrapper,i)}clear(){clearTimeout(this._timer)}}function r(){if(typeof arguments[0]!="function")throw new Error("callback needed");if(typeof arguments[1]!="number")throw new Error("timeout needed");let n;if(arguments.length>0){n=new Array(arguments.length-2);for(var i=0;i<n.length;i++)n[i]=arguments[i+2]}return new e(arguments[0],arguments[1],n)}return iS=r,iS}var sS,BV;function KDe(){if(BV)return sS;BV=1;const{AbortController:t}=globalThis,e=GDe();class r extends t{constructor(i){super(),this._ms=i,this._timer=e(()=>this.abort(),i),Object.setPrototypeOf(this,r.prototype)}abort(){return this._timer.clear(),super.abort()}clear(){this._timer.clear()}reset(){this._timer.clear(),this._timer=e(()=>this.abort(),this._ms)}}return sS={TimeoutController:r},sS}var sI=KDe();const Ff=(...t)=>t.join("/").replace(/((?<=\/)\/+)|(^\.\/)|((?<=\/)\.\/)/g,"")||".",XDe=3e4,YDe=async({ipfs:t,log:e,events:r,onSynced:n,start:i,timeout:s})=>{if(!t)throw new Error("An instance of ipfs is required.");if(!e)throw new Error("An instance of log is required.");const a=t.libp2p,o=t.libp2p.services.pubsub,c=e.id,u=Ff("/orbitdb/heads/",c),l=new Cu({concurrency:1}),f=new Set;r=r||new Ns.EventEmitter,s=s||XDe;let d=!1;const h=async k=>{const B=await e.heads();r.emit("join",k,B)},m=k=>async function*(){const B=await e.heads();for await(const{bytes:D}of B)yield D}(),p=k=>async B=>{for await(const D of B){const z=D.subarray();z&&n&&await n(z)}d&&await h(k)},g=async({connection:k,stream:B})=>{const D=String(k.remotePeer);try{f.add(D),await Un(B,p(D),m,B)}catch(z){f.delete(D),r.emit("error",z)}},v=async k=>{const B=async()=>{const{peerId:D,subscriptions:z}=k.detail,U=String(D),S=z.find(T=>T.topic===c);if(S)if(S.subscribe){if(f.has(U))return;const T=new sI.TimeoutController(s),{signal:w}=T;try{f.add(U);const A=await a.dialProtocol(D,u,{signal:w});await Un(m,A,p(U))}catch(A){f.delete(U),A.name==="UnsupportedProtocolError"||r.emit("error",A)}finally{T&&T.clear()}}else f.delete(U),r.emit("leave",U)};l.add(B)},y=async k=>{const{topic:B,data:D}=k.detail,z=async()=>{try{D&&n&&await n(D)}catch(U){r.emit("error",U)}};B===c&&l.add(z)},b=async k=>{f.delete(k.detail.toString())},_=async k=>{d&&await o.publish(c,k.bytes)},x=async()=>{d&&(d=!1,await l.onIdle(),o.removeEventListener("subscription-change",v),o.removeEventListener("message",y),await a.unhandle(u),await o.unsubscribe(c),a.removeEventListener("peer:disconnect",b),f.clear())},E=async()=>{d||(await a.handle(u,g),o.addEventListener("subscription-change",v),o.addEventListener("message",y),await o.subscribe(c),a.addEventListener("peer:disconnect",b),d=!0)};return i!==!1&&await E(),{add:_,stop:x,start:E,events:r,peers:f}};var Q2={exports:{}},DV;function lr(){return DV||(DV=1,typeof Object.create=="function"?Q2.exports=function(e,r){r&&(e.super_=r,e.prototype=Object.create(r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:Q2.exports=function(e,r){if(r){e.super_=r;var n=function(){};n.prototype=r.prototype,e.prototype=new n,e.prototype.constructor=e}}),Q2.exports}var aS,MV;function ZDe(){if(MV)return aS;MV=1;var t=$p(),e=lr();aS=r;function r(n){if(!(this instanceof r))return new r(n);typeof n=="number"&&(n={max:n}),n||(n={}),t.EventEmitter.call(this),this.cache={},this.head=this.tail=null,this.length=0,this.max=n.max||1e3,this.maxAge=n.maxAge||0}return e(r,t.EventEmitter),Object.defineProperty(r.prototype,"keys",{get:function(){return Object.keys(this.cache)}}),r.prototype.clear=function(){this.cache={},this.head=this.tail=null,this.length=0},r.prototype.remove=function(n){if(typeof n!="string"&&(n=""+n),!!this.cache.hasOwnProperty(n)){var i=this.cache[n];return delete this.cache[n],this._unlink(n,i.prev,i.next),i.value}},r.prototype._unlink=function(n,i,s){this.length--,this.length===0?this.head=this.tail=null:this.head===n?(this.head=i,this.cache[this.head].next=null):this.tail===n?(this.tail=s,this.cache[this.tail].prev=null):(this.cache[i].next=s,this.cache[s].prev=i)},r.prototype.peek=function(n){if(this.cache.hasOwnProperty(n)){var i=this.cache[n];if(this._checkAge(n,i))return i.value}},r.prototype.set=function(n,i){typeof n!="string"&&(n=""+n);var s;if(this.cache.hasOwnProperty(n)){if(s=this.cache[n],s.value=i,this.maxAge&&(s.modified=Date.now()),n===this.head)return i;this._unlink(n,s.prev,s.next)}else s={value:i,modified:0,next:null,prev:null},this.maxAge&&(s.modified=Date.now()),this.cache[n]=s,this.length===this.max&&this.evict();return this.length++,s.next=null,s.prev=this.head,this.head&&(this.cache[this.head].next=n),this.head=n,this.tail||(this.tail=n),i},r.prototype._checkAge=function(n,i){return this.maxAge&&Date.now()-i.modified>this.maxAge?(this.remove(n),this.emit("evict",{key:n,value:i.value}),!1):!0},r.prototype.get=function(n){if(typeof n!="string"&&(n=""+n),!!this.cache.hasOwnProperty(n)){var i=this.cache[n];if(this._checkAge(n,i))return this.head!==n&&(n===this.tail?(this.tail=i.next,this.cache[this.tail].prev=null):this.cache[i.prev].next=i.next,this.cache[i.next].prev=i.prev,this.cache[this.head].next=n,i.prev=this.head,i.next=null,this.head=n),i.value}},r.prototype.evict=function(){if(this.tail){var n=this.tail,i=this.remove(this.tail);this.emit("evict",{key:n,value:i})}},aS}var JDe=ZDe();const aI=In(JDe),QDe=(t,e)=>{const r=t.time-e.time;return r===0&&t.id!==e.id?t.id<e.id?-1:1:r},eMe=t=>r5(t.id,++t.time),r5=(t,e)=>(e=e||0,{id:t,time:e}),tMe=(t,e)=>{if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0},QO=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")};function rMe(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<t.length;i++){var s=t.charAt(i),a=s.charCodeAt(0);if(r[a]!==255)throw new TypeError(s+" is ambiguous");r[a]=i}var o=t.length,c=t.charAt(0),u=Math.log(o)/Math.log(256),l=Math.log(256)/Math.log(o);function f(m){if(m instanceof Uint8Array||(ArrayBuffer.isView(m)?m=new Uint8Array(m.buffer,m.byteOffset,m.byteLength):Array.isArray(m)&&(m=Uint8Array.from(m))),!(m instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(m.length===0)return"";for(var p=0,g=0,v=0,y=m.length;v!==y&&m[v]===0;)v++,p++;for(var b=(y-v)*l+1>>>0,_=new Uint8Array(b);v!==y;){for(var x=m[v],E=0,k=b-1;(x!==0||E<g)&&k!==-1;k--,E++)x+=256*_[k]>>>0,_[k]=x%o>>>0,x=x/o>>>0;if(x!==0)throw new Error("Non-zero carry");g=E,v++}for(var B=b-g;B!==b&&_[B]===0;)B++;for(var D=c.repeat(p);B<b;++B)D+=t.charAt(_[B]);return D}function d(m){if(typeof m!="string")throw new TypeError("Expected String");if(m.length===0)return new Uint8Array;var p=0;if(m[p]!==" "){for(var g=0,v=0;m[p]===c;)g++,p++;for(var y=(m.length-p)*u+1>>>0,b=new Uint8Array(y);m[p];){var _=r[m.charCodeAt(p)];if(_===255)return;for(var x=0,E=y-1;(_!==0||x<v)&&E!==-1;E--,x++)_+=o*b[E]>>>0,b[E]=_%256>>>0,_=_/256>>>0;if(_!==0)throw new Error("Non-zero carry");v=x,p++}if(m[p]!==" "){for(var k=y-v;k!==y&&b[k]===0;)k++;for(var B=new Uint8Array(g+(y-k)),D=g;k!==y;)B[D++]=b[k++];return B}}}function h(m){var p=d(m);if(p)return p;throw new Error(`Non-${e} character`)}return{encode:f,decodeUnsafe:d,decode:h}}var nMe=rMe,iMe=nMe;let sMe=class{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},aMe=class{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return Kse(this,e)}};class oMe{constructor(e){this.decoders=e}or(e){return Kse(this,e)}decode(e){const r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const Kse=(t,e)=>new oMe({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class cMe{constructor(e,r,n,i){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=i,this.encoder=new sMe(e,r,n),this.decoder=new aMe(e,r,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const Xse=({name:t,prefix:e,encode:r,decode:n})=>new cMe(t,e,r,n),Yse=({prefix:t,name:e,alphabet:r})=>{const{encode:n,decode:i}=iMe(r,e);return Xse({prefix:t,name:e,encode:n,decode:s=>QO(i(s))})},lMe=(t,e,r,n)=>{const i={};for(let l=0;l<e.length;++l)i[e[l]]=l;let s=t.length;for(;t[s-1]==="=";)--s;const a=new Uint8Array(s*r/8|0);let o=0,c=0,u=0;for(let l=0;l<s;++l){const f=i[t[l]];if(f===void 0)throw new SyntaxError(`Non-${n} character`);c=c<<r|f,o+=r,o>=8&&(o-=8,a[u++]=255&c>>o)}if(o>=r||255&c<<8-o)throw new SyntaxError("Unexpected end of data");return a},uMe=(t,e,r)=>{const n=e[e.length-1]==="=",i=(1<<r)-1;let s="",a=0,o=0;for(let c=0;c<t.length;++c)for(o=o<<8|t[c],a+=8;a>r;)a-=r,s+=e[i&o>>a];if(a&&(s+=e[i&o<<r-a]),n)for(;s.length*r&7;)s+="=";return s},$u=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>Xse({prefix:e,name:t,encode(i){return uMe(i,n,r)},decode(i){return lMe(i,n,r,t)}}),v3=$u({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5});$u({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5});$u({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5});$u({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5});$u({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5});$u({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5});$u({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5});$u({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5});$u({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});const Zs=Yse({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"});Yse({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var fMe=Zse,NV=128,dMe=-128,hMe=Math.pow(2,31);function Zse(t,e,r){e=e||[],r=r||0;for(var n=r;t>=hMe;)e[r++]=t&255|NV,t/=128;for(;t&dMe;)e[r++]=t&255|NV,t>>>=7;return e[r]=t|0,Zse.bytes=r-n+1,e}var pMe=oI,mMe=128,FV=127;function oI(t,n){var r=0,n=n||0,i=0,s=n,a,o=t.length;do{if(s>=o)throw oI.bytes=0,new RangeError("Could not decode varint");a=t[s++],r+=i<28?(a&FV)<<i:(a&FV)*Math.pow(2,i),i+=7}while(a>=mMe);return oI.bytes=s-n,r}var gMe=Math.pow(2,7),vMe=Math.pow(2,14),yMe=Math.pow(2,21),bMe=Math.pow(2,28),wMe=Math.pow(2,35),_Me=Math.pow(2,42),xMe=Math.pow(2,49),SMe=Math.pow(2,56),EMe=Math.pow(2,63),kMe=function(t){return t<gMe?1:t<vMe?2:t<yMe?3:t<bMe?4:t<wMe?5:t<_Me?6:t<xMe?7:t<SMe?8:t<EMe?9:10},TMe={encode:fMe,decode:pMe,encodingLength:kMe},I4=TMe;const cI=(t,e=0)=>[I4.decode(t,e),I4.decode.bytes],P4=(t,e,r=0)=>(I4.encode(t,e,r),e),R4=t=>I4.encodingLength(t),lI=(t,e)=>{const r=e.byteLength,n=R4(t),i=n+R4(r),s=new Uint8Array(i+r);return P4(t,s,0),P4(r,s,n),s.set(e,i),new eB(t,r,e,s)},AMe=t=>{const e=QO(t),[r,n]=cI(e),[i,s]=cI(e.subarray(n)),a=e.subarray(n+s);if(a.byteLength!==i)throw new Error("Incorrect length");return new eB(r,i,a,e)},CMe=(t,e)=>{if(t===e)return!0;{const r=e;return t.code===r.code&&t.size===r.size&&r.bytes instanceof Uint8Array&&tMe(t.bytes,r.bytes)}};class eB{constructor(e,r,n,i){this.code=e,this.size=r,this.digest=n,this.bytes=i}}const LV=(t,e)=>{const{bytes:r,version:n}=t;switch(n){case 0:return PMe(r,uI(t),e||Zs.encoder);default:return RMe(r,uI(t),e||v3.encoder)}},$V=new WeakMap,uI=t=>{const e=$V.get(t);if(e==null){const r=new Map;return $V.set(t,r),r}return e};class mn{constructor(e,r,n,i){this.code=r,this.version=e,this.multihash=n,this.bytes=i,this["/"]=i}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{const{code:e,multihash:r}=this;if(e!==Fm)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(r.code!==OMe)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return mn.createV0(r)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{const{code:e,digest:r}=this.multihash,n=lI(e,r);return mn.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(e){return mn.equals(this,e)}static equals(e,r){const n=r;return n&&e.code===n.code&&e.version===n.version&&CMe(e.multihash,n.multihash)}toString(e){return LV(this,e)}toJSON(){return{"/":LV(this)}}link(){return this}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return`CID(${this.toString()})`}static asCID(e){if(e==null)return null;const r=e;if(r instanceof mn)return r;if(r["/"]!=null&&r["/"]===r.bytes||r.asCID===r){const{version:n,code:i,multihash:s,bytes:a}=r;return new mn(n,i,s,a||UV(n,i,s.bytes))}else if(r[BMe]===!0){const{version:n,multihash:i,code:s}=r,a=AMe(i);return mn.create(n,s,a)}else return null}static create(e,r,n){if(typeof r!="number")throw new Error("String codecs are no longer supported");if(!(n.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(e){case 0:{if(r!==Fm)throw new Error(`Version 0 CID must use dag-pb (code: ${Fm}) block encoding`);return new mn(e,r,n,n.bytes)}case 1:{const i=UV(e,r,n.bytes);return new mn(e,r,n,i)}default:throw new Error("Invalid version")}}static createV0(e){return mn.create(0,Fm,e)}static createV1(e,r){return mn.create(1,e,r)}static decode(e){const[r,n]=mn.decodeFirst(e);if(n.length)throw new Error("Incorrect length");return r}static decodeFirst(e){const r=mn.inspectBytes(e),n=r.size-r.multihashSize,i=QO(e.subarray(n,n+r.multihashSize));if(i.byteLength!==r.multihashSize)throw new Error("Incorrect length");const s=i.subarray(r.multihashSize-r.digestSize),a=new eB(r.multihashCode,r.digestSize,s,i);return[r.version===0?mn.createV0(a):mn.createV1(r.codec,a),e.subarray(r.size)]}static inspectBytes(e){let r=0;const n=()=>{const[f,d]=cI(e.subarray(r));return r+=d,f};let i=n(),s=Fm;if(i===18?(i=0,r=0):s=n(),i!==0&&i!==1)throw new RangeError(`Invalid CID version ${i}`);const a=r,o=n(),c=n(),u=r+c,l=u-a;return{version:i,codec:s,multihashCode:o,digestSize:c,multihashSize:l,size:u}}static parse(e,r){const[n,i]=IMe(e,r),s=mn.decode(i);if(s.version===0&&e[0]!=="Q")throw Error("Version 0 CID string must not include multibase prefix");return uI(s).set(n,e),s}}const IMe=(t,e)=>{switch(t[0]){case"Q":{const r=e||Zs;return[Zs.prefix,r.decode(`${Zs.prefix}${t}`)]}case Zs.prefix:{const r=e||Zs;return[Zs.prefix,r.decode(t)]}case v3.prefix:{const r=e||v3;return[v3.prefix,r.decode(t)]}default:{if(e==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[t[0],e.decode(t)]}}},PMe=(t,e,r)=>{const{prefix:n}=r;if(n!==Zs.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);const i=e.get(n);if(i==null){const s=r.encode(t).slice(1);return e.set(n,s),s}else return i},RMe=(t,e,r)=>{const{prefix:n}=r,i=e.get(n);if(i==null){const s=r.encode(t);return e.set(n,s),s}else return i},Fm=112,OMe=18,UV=(t,e,r)=>{const n=R4(t),i=n+R4(e),s=new Uint8Array(i+r.byteLength);return P4(t,s,0),P4(e,s,n),s.set(r,i),s},BMe=Symbol.for("@ipld/js-cid/CID"),DMe=({name:t,code:e,encode:r})=>new MMe(t,e,r);let MMe=class{constructor(e,r,n){this.name=e,this.code=r,this.encode=n}digest(e){if(e instanceof Uint8Array){const r=this.encode(e);return r instanceof Uint8Array?lI(this.code,r):r.then(n=>lI(this.code,n))}else throw Error("Unknown type, must be binary type")}};function eb({enumerable:t=!0,configurable:e=!1}={}){return{enumerable:t,configurable:e,writable:!1}}function*NMe(t,e){if(e!=null&&typeof e=="object")if(Array.isArray(e))for(const[r,n]of e.entries()){const i=[...t,r],s=mn.asCID(n);s?yield[i.join("/"),s]:typeof n=="object"&&(yield*fI(n,i))}else{const r=mn.asCID(e);r?yield[t.join("/"),r]:yield*fI(e,t)}}function*fI(t,e){if(t==null||t instanceof Uint8Array)return;const r=mn.asCID(t);r&&(yield[e.join("/"),r]);for(const[n,i]of Object.entries(t)){const s=[...e,n];yield*NMe(s,i)}}function*FMe(t,e){if(Array.isArray(e))for(const[r,n]of e.entries()){const i=[...t,r];yield i.join("/"),typeof n=="object"&&!mn.asCID(n)&&(yield*dI(n,i))}else yield*dI(e,t)}function*dI(t,e){if(!(t==null||typeof t!="object"))for(const[r,n]of Object.entries(t)){const i=[...e,r];yield i.join("/"),n!=null&&!(n instanceof Uint8Array)&&typeof n=="object"&&!mn.asCID(n)&&(yield*FMe(i,n))}}function LMe(t,e){let r=t;for(const[n,i]of e.entries()){if(r=r[i],r==null)throw new Error(`Object has no property at ${e.slice(0,n+1).map(a=>`[${JSON.stringify(a)}]`).join("")}`);const s=mn.asCID(r);if(s)return{value:s,remaining:e.slice(n+1).join("/")}}return{value:r}}let Jse=class{constructor({cid:e,bytes:r,value:n}){if(!e||!r||typeof n>"u")throw new Error("Missing required argument");this.cid=e,this.bytes=r,this.value=n,this.asBlock=this,Object.defineProperties(this,{cid:eb(),bytes:eb(),value:eb(),asBlock:eb()})}links(){return fI(this.value,[])}tree(){return dI(this.value,[])}get(e="/"){return LMe(this.value,e.split("/").filter(Boolean))}};async function Qp({value:t,codec:e,hasher:r}){if(typeof t>"u")throw new Error('Missing required argument "value"');if(!e||!r)throw new Error("Missing required argument: codec or hasher");const n=e.encode(t),i=await r.digest(n),s=mn.create(1,e.code,i);return new Jse({value:t,bytes:n,cid:s})}async function n5({bytes:t,codec:e,hasher:r}){if(!t)throw new Error('Missing required argument "bytes"');if(!e||!r)throw new Error("Missing required argument: codec or hasher");const n=e.decode(t),i=await r.digest(t),s=mn.create(1,e.code,i);return new Jse({value:n,bytes:t,cid:s})}const $Me=["string","number","bigint","symbol"],UMe=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","HTMLElement","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];function jMe(t){if(t===null)return"null";if(t===void 0)return"undefined";if(t===!0||t===!1)return"boolean";const e=typeof t;if($Me.includes(e))return e;if(e==="function")return"Function";if(Array.isArray(t))return"Array";if(VMe(t))return"Buffer";const r=qMe(t);return r||"Object"}function VMe(t){return t&&t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer.call(null,t)}function qMe(t){const e=Object.prototype.toString.call(t).slice(8,-1);if(UMe.includes(e))return e}class Re{constructor(e,r,n){this.major=e,this.majorEncoded=e<<5,this.name=r,this.terminal=n}toString(){return`Type[${this.major}].${this.name}`}compare(e){return this.major<e.major?-1:this.major>e.major?1:0}}Re.uint=new Re(0,"uint",!0);Re.negint=new Re(1,"negint",!0);Re.bytes=new Re(2,"bytes",!0);Re.string=new Re(3,"string",!0);Re.array=new Re(4,"array",!1);Re.map=new Re(5,"map",!1);Re.tag=new Re(6,"tag",!1);Re.float=new Re(7,"float",!0);Re.false=new Re(7,"false",!0);Re.true=new Re(7,"true",!0);Re.null=new Re(7,"null",!0);Re.undefined=new Re(7,"undefined",!0);Re.break=new Re(7,"break",!0);class Qe{constructor(e,r,n){this.type=e,this.value=r,this.encodedLength=n,this.encodedBytes=void 0,this.byteValue=void 0}toString(){return`Token[${this.type}].${this.value}`}}const em=globalThis.process&&!globalThis.process.browser&&globalThis.Buffer&&typeof globalThis.Buffer.isBuffer=="function",zMe=new TextDecoder,HMe=new TextEncoder;function O4(t){return em&&globalThis.Buffer.isBuffer(t)}function tB(t){return t instanceof Uint8Array?O4(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t:Uint8Array.from(t)}const WMe=em?(t,e,r)=>r-e>64?globalThis.Buffer.from(t.subarray(e,r)).toString("utf8"):VV(t,e,r):(t,e,r)=>r-e>64?zMe.decode(t.subarray(e,r)):VV(t,e,r),Qse=em?t=>t.length>64?globalThis.Buffer.from(t):jV(t):t=>t.length>64?HMe.encode(t):jV(t),Ml=t=>Uint8Array.from(t),rB=em?(t,e,r)=>O4(t)?new Uint8Array(t.subarray(e,r)):t.slice(e,r):(t,e,r)=>t.slice(e,r),GMe=em?(t,e)=>(t=t.map(r=>r instanceof Uint8Array?r:globalThis.Buffer.from(r)),tB(globalThis.Buffer.concat(t,e))):(t,e)=>{const r=new Uint8Array(e);let n=0;for(let i of t)n+i.length>r.length&&(i=i.subarray(0,r.length-n)),r.set(i,n),n+=i.length;return r},KMe=em?t=>globalThis.Buffer.allocUnsafe(t):t=>new Uint8Array(t);function XMe(t,e){if(O4(t)&&O4(e))return t.compare(e);for(let r=0;r<t.length;r++)if(t[r]!==e[r])return t[r]<e[r]?-1:1;return 0}function jV(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let i=t.charCodeAt(n);i<128?e[r++]=i:i<2048?(e[r++]=i>>6|192,e[r++]=i&63|128):(i&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=i>>18|240,e[r++]=i>>12&63|128,e[r++]=i>>6&63|128,e[r++]=i&63|128):(e[r++]=i>>12|224,e[r++]=i>>6&63|128,e[r++]=i&63|128)}return e}function VV(t,e,r){const n=[];for(;e<r;){const i=t[e];let s=null,a=i>239?4:i>223?3:i>191?2:1;if(e+a<=r){let o,c,u,l;switch(a){case 1:i<128&&(s=i);break;case 2:o=t[e+1],(o&192)===128&&(l=(i&31)<<6|o&63,l>127&&(s=l));break;case 3:o=t[e+1],c=t[e+2],(o&192)===128&&(c&192)===128&&(l=(i&15)<<12|(o&63)<<6|c&63,l>2047&&(l<55296||l>57343)&&(s=l));break;case 4:o=t[e+1],c=t[e+2],u=t[e+3],(o&192)===128&&(c&192)===128&&(u&192)===128&&(l=(i&15)<<18|(o&63)<<12|(c&63)<<6|u&63,l>65535&&l<1114112&&(s=l))}}s===null?(s=65533,a=1):s>65535&&(s-=65536,n.push(s>>>10&1023|55296),s=56320|s&1023),n.push(s),e+=a}return eae(n)}const qV=4096;function eae(t){const e=t.length;if(e<=qV)return String.fromCharCode.apply(String,t);let r="",n=0;for(;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=qV));return r}const YMe=256;class tae{constructor(e=YMe){this.chunkSize=e,this.cursor=0,this.maxCursor=-1,this.chunks=[],this._initReuseChunk=null}reset(){this.cursor=0,this.maxCursor=-1,this.chunks.length&&(this.chunks=[]),this._initReuseChunk!==null&&(this.chunks.push(this._initReuseChunk),this.maxCursor=this._initReuseChunk.length-1)}push(e){let r=this.chunks[this.chunks.length-1];if(this.cursor+e.length<=this.maxCursor+1){const i=r.length-(this.maxCursor-this.cursor)-1;r.set(e,i)}else{if(r){const i=r.length-(this.maxCursor-this.cursor)-1;i<r.length&&(this.chunks[this.chunks.length-1]=r.subarray(0,i),this.maxCursor=this.cursor-1)}e.length<64&&e.length<this.chunkSize?(r=KMe(this.chunkSize),this.chunks.push(r),this.maxCursor+=r.length,this._initReuseChunk===null&&(this._initReuseChunk=r),r.set(e,0)):(this.chunks.push(e),this.maxCursor+=e.length)}this.cursor+=e.length}toBytes(e=!1){let r;if(this.chunks.length===1){const n=this.chunks[0];e&&this.cursor>n.length/2?(r=this.cursor===n.length?n:n.subarray(0,this.cursor),this._initReuseChunk=null,this.chunks=[]):r=rB(n,0,this.cursor)}else r=GMe(this.chunks,this.cursor);return e&&this.reset(),r}}const Et="CBOR decode error:",ph="CBOR encode error:";function tm(t,e,r){if(t.length-e<r)throw new Error(`${Et} not enough data for type`)}const cs=[24,256,65536,4294967296,BigInt("18446744073709551616")];function _0(t,e,r){tm(t,e,1);const n=t[e];if(r.strict===!0&&n<cs[0])throw new Error(`${Et} integer encoded in more bytes than necessary (strict decode)`);return n}function x0(t,e,r){tm(t,e,2);const n=t[e]<<8|t[e+1];if(r.strict===!0&&n<cs[1])throw new Error(`${Et} integer encoded in more bytes than necessary (strict decode)`);return n}function S0(t,e,r){tm(t,e,4);const n=t[e]*16777216+(t[e+1]<<16)+(t[e+2]<<8)+t[e+3];if(r.strict===!0&&n<cs[2])throw new Error(`${Et} integer encoded in more bytes than necessary (strict decode)`);return n}function E0(t,e,r){tm(t,e,8);const n=t[e]*16777216+(t[e+1]<<16)+(t[e+2]<<8)+t[e+3],i=t[e+4]*16777216+(t[e+5]<<16)+(t[e+6]<<8)+t[e+7],s=(BigInt(n)<<BigInt(32))+BigInt(i);if(r.strict===!0&&s<cs[3])throw new Error(`${Et} integer encoded in more bytes than necessary (strict decode)`);if(s<=Number.MAX_SAFE_INTEGER)return Number(s);if(r.allowBigInt===!0)return s;throw new Error(`${Et} integers outside of the safe integer range are not supported`)}function ZMe(t,e,r,n){return new Qe(Re.uint,_0(t,e+1,n),2)}function JMe(t,e,r,n){return new Qe(Re.uint,x0(t,e+1,n),3)}function QMe(t,e,r,n){return new Qe(Re.uint,S0(t,e+1,n),5)}function eNe(t,e,r,n){return new Qe(Re.uint,E0(t,e+1,n),9)}function k0(t,e){return Do(t,0,e.value)}function Do(t,e,r){if(r<cs[0]){const n=Number(r);t.push([e|n])}else if(r<cs[1]){const n=Number(r);t.push([e|24,n])}else if(r<cs[2]){const n=Number(r);t.push([e|25,n>>>8,n&255])}else if(r<cs[3]){const n=Number(r);t.push([e|26,n>>>24&255,n>>>16&255,n>>>8&255,n&255])}else{const n=BigInt(r);if(n<cs[4]){const i=[e|27,0,0,0,0,0,0,0];let s=Number(n&BigInt(4294967295)),a=Number(n>>BigInt(32)&BigInt(4294967295));i[8]=s&255,s=s>>8,i[7]=s&255,s=s>>8,i[6]=s&255,s=s>>8,i[5]=s&255,i[4]=a&255,a=a>>8,i[3]=a&255,a=a>>8,i[2]=a&255,a=a>>8,i[1]=a&255,t.push(i)}else throw new Error(`${Et} encountered BigInt larger than allowable range`)}}k0.encodedSize=function(e){return Do.encodedSize(e.value)};Do.encodedSize=function(e){return e<cs[0]?1:e<cs[1]?2:e<cs[2]?3:e<cs[3]?5:9};k0.compareTokens=function(e,r){return e.value<r.value?-1:e.value>r.value?1:0};function tNe(t,e,r,n){return new Qe(Re.negint,-1-_0(t,e+1,n),2)}function rNe(t,e,r,n){return new Qe(Re.negint,-1-x0(t,e+1,n),3)}function nNe(t,e,r,n){return new Qe(Re.negint,-1-S0(t,e+1,n),5)}const nB=BigInt(-1),rae=BigInt(1);function iNe(t,e,r,n){const i=E0(t,e+1,n);if(typeof i!="bigint"){const s=-1-i;if(s>=Number.MIN_SAFE_INTEGER)return new Qe(Re.negint,s,9)}if(n.allowBigInt!==!0)throw new Error(`${Et} integers outside of the safe integer range are not supported`);return new Qe(Re.negint,nB-BigInt(i),9)}function iB(t,e){const r=e.value,n=typeof r=="bigint"?r*nB-rae:r*-1-1;Do(t,e.type.majorEncoded,n)}iB.encodedSize=function(e){const r=e.value,n=typeof r=="bigint"?r*nB-rae:r*-1-1;return n<cs[0]?1:n<cs[1]?2:n<cs[2]?3:n<cs[3]?5:9};iB.compareTokens=function(e,r){return e.value<r.value?1:e.value>r.value?-1:0};function Vy(t,e,r,n){tm(t,e,r+n);const i=rB(t,e+r,e+r+n);return new Qe(Re.bytes,i,r+n)}function sNe(t,e,r,n){return Vy(t,e,1,r)}function aNe(t,e,r,n){return Vy(t,e,2,_0(t,e+1,n))}function oNe(t,e,r,n){return Vy(t,e,3,x0(t,e+1,n))}function cNe(t,e,r,n){return Vy(t,e,5,S0(t,e+1,n))}function lNe(t,e,r,n){const i=E0(t,e+1,n);if(typeof i=="bigint")throw new Error(`${Et} 64-bit integer bytes lengths not supported`);return Vy(t,e,9,i)}function B4(t){return t.encodedBytes===void 0&&(t.encodedBytes=t.type===Re.string?Qse(t.value):t.value),t.encodedBytes}function i5(t,e){const r=B4(e);Do(t,e.type.majorEncoded,r.length),t.push(r)}i5.encodedSize=function(e){const r=B4(e);return Do.encodedSize(r.length)+r.length};i5.compareTokens=function(e,r){return uNe(B4(e),B4(r))};function uNe(t,e){return t.length<e.length?-1:t.length>e.length?1:XMe(t,e)}function qy(t,e,r,n,i){const s=r+n;tm(t,e,s);const a=new Qe(Re.string,WMe(t,e+r,e+s),s);return i.retainStringBytes===!0&&(a.byteValue=rB(t,e+r,e+s)),a}function fNe(t,e,r,n){return qy(t,e,1,r,n)}function dNe(t,e,r,n){return qy(t,e,2,_0(t,e+1,n),n)}function hNe(t,e,r,n){return qy(t,e,3,x0(t,e+1,n),n)}function pNe(t,e,r,n){return qy(t,e,5,S0(t,e+1,n),n)}function mNe(t,e,r,n){const i=E0(t,e+1,n);if(typeof i=="bigint")throw new Error(`${Et} 64-bit integer string lengths not supported`);return qy(t,e,9,i,n)}const gNe=i5;function rm(t,e,r,n){return new Qe(Re.array,n,r)}function vNe(t,e,r,n){return rm(t,e,1,r)}function yNe(t,e,r,n){return rm(t,e,2,_0(t,e+1,n))}function bNe(t,e,r,n){return rm(t,e,3,x0(t,e+1,n))}function wNe(t,e,r,n){return rm(t,e,5,S0(t,e+1,n))}function _Ne(t,e,r,n){const i=E0(t,e+1,n);if(typeof i=="bigint")throw new Error(`${Et} 64-bit integer array lengths not supported`);return rm(t,e,9,i)}function xNe(t,e,r,n){if(n.allowIndefinite===!1)throw new Error(`${Et} indefinite length items not allowed`);return rm(t,e,1,1/0)}function sB(t,e){Do(t,Re.array.majorEncoded,e.value)}sB.compareTokens=k0.compareTokens;sB.encodedSize=function(e){return Do.encodedSize(e.value)};function nm(t,e,r,n){return new Qe(Re.map,n,r)}function SNe(t,e,r,n){return nm(t,e,1,r)}function ENe(t,e,r,n){return nm(t,e,2,_0(t,e+1,n))}function kNe(t,e,r,n){return nm(t,e,3,x0(t,e+1,n))}function TNe(t,e,r,n){return nm(t,e,5,S0(t,e+1,n))}function ANe(t,e,r,n){const i=E0(t,e+1,n);if(typeof i=="bigint")throw new Error(`${Et} 64-bit integer map lengths not supported`);return nm(t,e,9,i)}function CNe(t,e,r,n){if(n.allowIndefinite===!1)throw new Error(`${Et} indefinite length items not allowed`);return nm(t,e,1,1/0)}function aB(t,e){Do(t,Re.map.majorEncoded,e.value)}aB.compareTokens=k0.compareTokens;aB.encodedSize=function(e){return Do.encodedSize(e.value)};function INe(t,e,r,n){return new Qe(Re.tag,r,1)}function PNe(t,e,r,n){return new Qe(Re.tag,_0(t,e+1,n),2)}function RNe(t,e,r,n){return new Qe(Re.tag,x0(t,e+1,n),3)}function ONe(t,e,r,n){return new Qe(Re.tag,S0(t,e+1,n),5)}function BNe(t,e,r,n){return new Qe(Re.tag,E0(t,e+1,n),9)}function oB(t,e){Do(t,Re.tag.majorEncoded,e.value)}oB.compareTokens=k0.compareTokens;oB.encodedSize=function(e){return Do.encodedSize(e.value)};const DNe=20,MNe=21,NNe=22,FNe=23;function LNe(t,e,r,n){if(n.allowUndefined===!1)throw new Error(`${Et} undefined values are not supported`);return n.coerceUndefinedToNull===!0?new Qe(Re.null,null,1):new Qe(Re.undefined,void 0,1)}function $Ne(t,e,r,n){if(n.allowIndefinite===!1)throw new Error(`${Et} indefinite length items not allowed`);return new Qe(Re.break,void 0,1)}function cB(t,e,r){if(r){if(r.allowNaN===!1&&Number.isNaN(t))throw new Error(`${Et} NaN values are not supported`);if(r.allowInfinity===!1&&(t===1/0||t===-1/0))throw new Error(`${Et} Infinity values are not supported`)}return new Qe(Re.float,t,e)}function UNe(t,e,r,n){return cB(uB(t,e+1),3,n)}function jNe(t,e,r,n){return cB(fB(t,e+1),5,n)}function VNe(t,e,r,n){return cB(aae(t,e+1),9,n)}function lB(t,e,r){const n=e.value;if(n===!1)t.push([Re.float.majorEncoded|DNe]);else if(n===!0)t.push([Re.float.majorEncoded|MNe]);else if(n===null)t.push([Re.float.majorEncoded|NNe]);else if(n===void 0)t.push([Re.float.majorEncoded|FNe]);else{let i,s=!1;(!r||r.float64!==!0)&&(iae(n),i=uB(Go,1),n===i||Number.isNaN(n)?(Go[0]=249,t.push(Go.slice(0,3)),s=!0):(sae(n),i=fB(Go,1),n===i&&(Go[0]=250,t.push(Go.slice(0,5)),s=!0))),s||(qNe(n),i=aae(Go,1),Go[0]=251,t.push(Go.slice(0,9)))}}lB.encodedSize=function(e,r){const n=e.value;if(n===!1||n===!0||n===null||n===void 0)return 1;if(!r||r.float64!==!0){iae(n);let i=uB(Go,1);if(n===i||Number.isNaN(n))return 3;if(sae(n),i=fB(Go,1),n===i)return 5}return 9};const nae=new ArrayBuffer(9),ho=new DataView(nae,1),Go=new Uint8Array(nae,0);function iae(t){if(t===1/0)ho.setUint16(0,31744,!1);else if(t===-1/0)ho.setUint16(0,64512,!1);else if(Number.isNaN(t))ho.setUint16(0,32256,!1);else{ho.setFloat32(0,t);const e=ho.getUint32(0),r=(e&2139095040)>>23,n=e&8388607;if(r===255)ho.setUint16(0,31744,!1);else if(r===0)ho.setUint16(0,(t&2147483648)>>16|n>>13,!1);else{const i=r-127;i<-24?ho.setUint16(0,0):i<-14?ho.setUint16(0,(e&2147483648)>>16|1<<24+i,!1):ho.setUint16(0,(e&2147483648)>>16|i+15<<10|n>>13,!1)}}}function uB(t,e){if(t.length-e<2)throw new Error(`${Et} not enough data for float16`);const r=(t[e]<<8)+t[e+1];if(r===31744)return 1/0;if(r===64512)return-1/0;if(r===32256)return NaN;const n=r>>10&31,i=r&1023;let s;return n===0?s=i*2**-24:n!==31?s=(i+1024)*2**(n-25):s=i===0?1/0:NaN,r&32768?-s:s}function sae(t){ho.setFloat32(0,t,!1)}function fB(t,e){if(t.length-e<4)throw new Error(`${Et} not enough data for float32`);const r=(t.byteOffset||0)+e;return new DataView(t.buffer,r,4).getFloat32(0,!1)}function qNe(t){ho.setFloat64(0,t,!1)}function aae(t,e){if(t.length-e<8)throw new Error(`${Et} not enough data for float64`);const r=(t.byteOffset||0)+e;return new DataView(t.buffer,r,8).getFloat64(0,!1)}lB.compareTokens=k0.compareTokens;function Vr(t,e,r){throw new Error(`${Et} encountered invalid minor (${r}) for major ${t[e]>>>5}`)}function s5(t){return()=>{throw new Error(`${Et} ${t}`)}}const it=[];for(let t=0;t<=23;t++)it[t]=Vr;it[24]=ZMe;it[25]=JMe;it[26]=QMe;it[27]=eNe;it[28]=Vr;it[29]=Vr;it[30]=Vr;it[31]=Vr;for(let t=32;t<=55;t++)it[t]=Vr;it[56]=tNe;it[57]=rNe;it[58]=nNe;it[59]=iNe;it[60]=Vr;it[61]=Vr;it[62]=Vr;it[63]=Vr;for(let t=64;t<=87;t++)it[t]=sNe;it[88]=aNe;it[89]=oNe;it[90]=cNe;it[91]=lNe;it[92]=Vr;it[93]=Vr;it[94]=Vr;it[95]=s5("indefinite length bytes/strings are not supported");for(let t=96;t<=119;t++)it[t]=fNe;it[120]=dNe;it[121]=hNe;it[122]=pNe;it[123]=mNe;it[124]=Vr;it[125]=Vr;it[126]=Vr;it[127]=s5("indefinite length bytes/strings are not supported");for(let t=128;t<=151;t++)it[t]=vNe;it[152]=yNe;it[153]=bNe;it[154]=wNe;it[155]=_Ne;it[156]=Vr;it[157]=Vr;it[158]=Vr;it[159]=xNe;for(let t=160;t<=183;t++)it[t]=SNe;it[184]=ENe;it[185]=kNe;it[186]=TNe;it[187]=ANe;it[188]=Vr;it[189]=Vr;it[190]=Vr;it[191]=CNe;for(let t=192;t<=215;t++)it[t]=INe;it[216]=PNe;it[217]=RNe;it[218]=ONe;it[219]=BNe;it[220]=Vr;it[221]=Vr;it[222]=Vr;it[223]=Vr;for(let t=224;t<=243;t++)it[t]=s5("simple values are not supported");it[244]=Vr;it[245]=Vr;it[246]=Vr;it[247]=LNe;it[248]=s5("simple values are not supported");it[249]=UNe;it[250]=jNe;it[251]=VNe;it[252]=Vr;it[253]=Vr;it[254]=Vr;it[255]=$Ne;const Sl=[];for(let t=0;t<24;t++)Sl[t]=new Qe(Re.uint,t,1);for(let t=-1;t>=-24;t--)Sl[31-t]=new Qe(Re.negint,t,1);Sl[64]=new Qe(Re.bytes,new Uint8Array(0),1);Sl[96]=new Qe(Re.string,"",1);Sl[128]=new Qe(Re.array,0,1);Sl[160]=new Qe(Re.map,0,1);Sl[244]=new Qe(Re.false,!1,1);Sl[245]=new Qe(Re.true,!0,1);Sl[246]=new Qe(Re.null,null,1);function zNe(t){switch(t.type){case Re.false:return Ml([244]);case Re.true:return Ml([245]);case Re.null:return Ml([246]);case Re.bytes:return t.value.length?void 0:Ml([64]);case Re.string:return t.value===""?Ml([96]):void 0;case Re.array:return t.value===0?Ml([128]):void 0;case Re.map:return t.value===0?Ml([160]):void 0;case Re.uint:return t.value<24?Ml([Number(t.value)]):void 0;case Re.negint:if(t.value>=-24)return Ml([31-Number(t.value)])}}const HNe={float64:!1,mapSorter:KNe,quickEncodeToken:zNe};function WNe(){const t=[];return t[Re.uint.major]=k0,t[Re.negint.major]=iB,t[Re.bytes.major]=i5,t[Re.string.major]=gNe,t[Re.array.major]=sB,t[Re.map.major]=aB,t[Re.tag.major]=oB,t[Re.float.major]=lB,t}const oae=WNe(),oS=new tae;class D4{constructor(e,r){this.obj=e,this.parent=r}includes(e){let r=this;do if(r.obj===e)return!0;while(r=r.parent);return!1}static createCheck(e,r){if(e&&e.includes(r))throw new Error(`${ph} object contains circular references`);return new D4(r,e)}}const Yu={null:new Qe(Re.null,null),undefined:new Qe(Re.undefined,void 0),true:new Qe(Re.true,!0),false:new Qe(Re.false,!1),emptyArray:new Qe(Re.array,0),emptyMap:new Qe(Re.map,0)},Gf={number(t,e,r,n){return!Number.isInteger(t)||!Number.isSafeInteger(t)?new Qe(Re.float,t):t>=0?new Qe(Re.uint,t):new Qe(Re.negint,t)},bigint(t,e,r,n){return t>=BigInt(0)?new Qe(Re.uint,t):new Qe(Re.negint,t)},Uint8Array(t,e,r,n){return new Qe(Re.bytes,t)},string(t,e,r,n){return new Qe(Re.string,t)},boolean(t,e,r,n){return t?Yu.true:Yu.false},null(t,e,r,n){return Yu.null},undefined(t,e,r,n){return Yu.undefined},ArrayBuffer(t,e,r,n){return new Qe(Re.bytes,new Uint8Array(t))},DataView(t,e,r,n){return new Qe(Re.bytes,new Uint8Array(t.buffer,t.byteOffset,t.byteLength))},Array(t,e,r,n){if(!t.length)return r.addBreakTokens===!0?[Yu.emptyArray,new Qe(Re.break)]:Yu.emptyArray;n=D4.createCheck(n,t);const i=[];let s=0;for(const a of t)i[s++]=y3(a,r,n);return r.addBreakTokens?[new Qe(Re.array,t.length),i,new Qe(Re.break)]:[new Qe(Re.array,t.length),i]},Object(t,e,r,n){const i=e!=="Object",s=i?t.keys():Object.keys(t),a=i?t.size:s.length;if(!a)return r.addBreakTokens===!0?[Yu.emptyMap,new Qe(Re.break)]:Yu.emptyMap;n=D4.createCheck(n,t);const o=[];let c=0;for(const u of s)o[c++]=[y3(u,r,n),y3(i?t.get(u):t[u],r,n)];return GNe(o,r),r.addBreakTokens?[new Qe(Re.map,a),o,new Qe(Re.break)]:[new Qe(Re.map,a),o]}};Gf.Map=Gf.Object;Gf.Buffer=Gf.Uint8Array;for(const t of"Uint8Clamped Uint16 Uint32 Int8 Int16 Int32 BigUint64 BigInt64 Float32 Float64".split(" "))Gf[`${t}Array`]=Gf.DataView;function y3(t,e={},r){const n=jMe(t),i=e&&e.typeEncoders&&e.typeEncoders[n]||Gf[n];if(typeof i=="function"){const a=i(t,n,e,r);if(a!=null)return a}const s=Gf[n];if(!s)throw new Error(`${ph} unsupported type: ${n}`);return s(t,n,e,r)}function GNe(t,e){e.mapSorter&&t.sort(e.mapSorter)}function KNe(t,e){const r=Array.isArray(t[0])?t[0][0]:t[0],n=Array.isArray(e[0])?e[0][0]:e[0];if(r.type!==n.type)return r.type.compare(n.type);const i=r.type.major,s=oae[i].compareTokens(r,n);return s===0&&console.warn("WARNING: complex key types used, CBOR key sorting guarantees are gone"),s}function cae(t,e,r,n){if(Array.isArray(e))for(const i of e)cae(t,i,r,n);else r[e.type.major](t,e,n)}function lae(t,e,r){const n=y3(t,r);if(!Array.isArray(n)&&r.quickEncodeToken){const i=r.quickEncodeToken(n);if(i)return i;const s=e[n.type.major];if(s.encodedSize){const a=s.encodedSize(n,r),o=new tae(a);if(s(o,n,r),o.chunks.length!==1)throw new Error(`Unexpected error: pre-calculated length for ${n} was wrong`);return tB(o.chunks[0])}}return oS.reset(),cae(oS,n,e,r),oS.toBytes(!0)}function b3(t,e){return e=Object.assign({},HNe,e),lae(t,oae,e)}const XNe={strict:!1,allowIndefinite:!0,allowUndefined:!0,allowBigInt:!0};class YNe{constructor(e,r={}){this._pos=0,this.data=e,this.options=r}pos(){return this._pos}done(){return this._pos>=this.data.length}next(){const e=this.data[this._pos];let r=Sl[e];if(r===void 0){const n=it[e];if(!n)throw new Error(`${Et} no decoder for major type ${e>>>5} (byte 0x${e.toString(16).padStart(2,"0")})`);const i=e&31;r=n(this.data,this._pos,i,this.options)}return this._pos+=r.encodedLength,r}}const wv=Symbol.for("DONE"),a5=Symbol.for("BREAK");function ZNe(t,e,r){const n=[];for(let i=0;i<t.value;i++){const s=_v(e,r);if(s===a5){if(t.value===1/0)break;throw new Error(`${Et} got unexpected break to lengthed array`)}if(s===wv)throw new Error(`${Et} found array but not enough entries (got ${i}, expected ${t.value})`);n[i]=s}return n}function JNe(t,e,r){const n=r.useMaps===!0,i=n?void 0:{},s=n?new Map:void 0;for(let a=0;a<t.value;a++){const o=_v(e,r);if(o===a5){if(t.value===1/0)break;throw new Error(`${Et} got unexpected break to lengthed map`)}if(o===wv)throw new Error(`${Et} found map but not enough entries (got ${a} [no key], expected ${t.value})`);if(n!==!0&&typeof o!="string")throw new Error(`${Et} non-string keys not supported (got ${typeof o})`);if(r.rejectDuplicateMapKeys===!0&&(n&&s.has(o)||!n&&o in i))throw new Error(`${Et} found repeat map key "${o}"`);const c=_v(e,r);if(c===wv)throw new Error(`${Et} found map but not enough entries (got ${a} [no value], expected ${t.value})`);n?s.set(o,c):i[o]=c}return n?s:i}function _v(t,e){if(t.done())return wv;const r=t.next();if(r.type===Re.break)return a5;if(r.type.terminal)return r.value;if(r.type===Re.array)return ZNe(r,t,e);if(r.type===Re.map)return JNe(r,t,e);if(r.type===Re.tag){if(e.tags&&typeof e.tags[r.value]=="function"){const n=_v(t,e);return e.tags[r.value](n)}throw new Error(`${Et} tag not supported (${r.value})`)}throw new Error("unsupported")}function QNe(t,e){if(!(t instanceof Uint8Array))throw new Error(`${Et} data to decode must be a Uint8Array`);e=Object.assign({},XNe,e);const r=e.tokenizer||new YNe(t,e),n=_v(r,e);if(n===wv)throw new Error(`${Et} did not find any content to decode`);if(n===a5)throw new Error(`${Et} got unexpected break`);return[n,t.subarray(r.pos())]}function Ef(t,e){const[r,n]=QNe(t,e);if(n.length>0)throw new Error(`${Et} too many terminals, data makes no sense`);return r}const uae=42;function fae(t){return t instanceof ArrayBuffer?new Uint8Array(t,0,t.byteLength):t}function eFe(t){if(t.asCID!==t&&t["/"]!==t.bytes)return null;const e=mt.asCID(t);if(!e)return null;const r=new Uint8Array(e.bytes.byteLength+1);return r.set(e.bytes,1),[new Qe(Re.tag,uae),new Qe(Re.bytes,r)]}function tFe(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")}function rFe(t){if(Number.isNaN(t))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(t===1/0||t===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}const hI={float64:!0,typeEncoders:{Object:eFe,undefined:tFe,number:rFe}},nFe={...hI,typeEncoders:{...hI.typeEncoders}};function iFe(t){if(t[0]!==0)throw new Error("Invalid CID for CBOR tag 42; expected leading 0x00");return mt.decode(t.subarray(1))}const M4={allowIndefinite:!1,coerceUndefinedToNull:!0,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,rejectDuplicateMapKeys:!0,tags:[]};M4.tags[uae]=iFe;const sFe={...M4,tags:M4.tags.slice()},aFe="dag-cbor",dB=113,oFe=t=>b3(t,hI),dae=t=>Ef(fae(t),M4),T0=Object.freeze(Object.defineProperty({__proto__:null,code:dB,decode:dae,decodeOptions:sFe,encode:oFe,encodeOptions:nFe,name:aFe,toByteView:fae},Symbol.toStringTag,{value:"Module"})),cFe=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),o5=DMe({name:"sha2-256",code:18,encode:cFe("SHA-256")}),c5=T0,l5=o5,hae=Zs,lFe=async(t,e,r,n=null,i=[],s=[])=>{if(t==null)throw new Error("Identity is required, cannot create entry");if(e==null)throw new Error("Entry requires an id");if(r==null)throw new Error("Entry requires a payload");if(i==null||!Array.isArray(i))throw new Error("'next' argument is not an array");n=n||r5(t.publicKey);const a={id:e,payload:r,next:i,refs:s,clock:n,v:2},{bytes:o}=await Qp({value:a,codec:c5,hasher:l5}),c=await t.sign(t,o);return a.key=t.publicKey,a.identity=t.hash,a.sig=c,mae(a)},uFe=async(t,e)=>{if(!t)throw new Error("Identities is required, cannot verify entry");if(!pae(e))throw new Error("Invalid Log entry");if(!e.key)throw new Error("Entry doesn't have a key");if(!e.sig)throw new Error("Entry doesn't have a signature");const r={id:e.id,payload:e.payload,next:e.next,refs:e.refs,clock:e.clock,v:e.v},{bytes:n}=await Qp({value:r,codec:c5,hasher:l5});return t.verify(e.sig,e.key,n)},pae=t=>t&&t.id!==void 0&&t.next!==void 0&&t.payload!==void 0&&t.v!==void 0&&t.clock!==void 0&&t.refs!==void 0,fFe=(t,e)=>t&&e&&t.hash===e.hash,dFe=async t=>{const{cid:e,value:r}=await n5({bytes:t,codec:c5,hasher:l5}),n=e.toString(hae);return{...r,hash:n,bytes:t}},mae=async t=>{const{cid:e,bytes:r}=await Qp({value:t,codec:c5,hasher:l5}),n=e.toString(hae),i=r5(t.clock.id,t.clock.time);return{...t,clock:i,hash:n,bytes:r}},Zc={create:lFe,verify:uFe,decode:dFe,encode:mae,isEntry:pae,isEqual:fFe},hB=async()=>{let t={};const e=async(c,u)=>{t[c]=u};return{put:e,del:async c=>{delete t[c]},get:async c=>t[c],iterator:async function*(){for await(const[c,u]of Object.entries(t))yield[c,u]},merge:async c=>{if(c)for await(const[u,l]of c.iterator())e(u,l)},clear:async()=>{t={}},close:async()=>{}}},hFe=hB,pFe=async({storage:t,heads:e})=>{t=t||await hFe();const r=async l=>{l=zV(l);for(const f of l)await t.put(f.hash,f.bytes)},n=async l=>{await t.clear(),await r(l)},i=async l=>{const f=await o();if(f.find(h=>Zc.isEqual(h,l)))return;const d=zV([...f,l]);return await n(d),d},s=async l=>{const d=(await o()).filter(h=>h.hash!==l);await n(d)},a=async function*(){const l=t.iterator();for await(const[,f]of l)yield await Zc.decode(f)},o=async()=>{const l=[];for await(const f of a())l.push(f);return l},c=async()=>{await t.clear()},u=async()=>{await t.close()};return await r(e||[]),{put:r,set:n,add:i,remove:s,iterator:a,all:o,clear:c,close:u}},zV=t=>{t=new Set(t);const e={};for(const n of t)for(const i of n.next)e[i]=n.hash;const r=[];for(const n of t)e[n.hash]||r.push(n);return r};function mFe(t,e){const r=(s,a)=>s,n=(s,a)=>vFe(s,a,r);return((s,a)=>gFe(s,a,n))(t,e)}function gFe(t,e,r){const n=QDe(t.clock,e.clock);return n===0?r(t,e):n}function vFe(t,e,r){return t.clock.id===e.clock.id?r(t,e):t.clock.id<e.clock.id?-1:1}function yFe(t){const e=`Your log's tiebreaker function, ${t.name}, has returned zero and therefore cannot be`;return(n,i)=>{const s=t(n,i);if(s===0)throw Error(e);return s}}const bFe={LastWriteWins:mFe,NoZeroes:yFe},{LastWriteWins:wFe,NoZeroes:_Fe}=bFe,xFe=()=>new Date().getTime().toString(),SFe=(t,e)=>Math.max(t,e.clock.time),cS=hB,EFe=async()=>({canAppend:async t=>!0}),kFe=async(t,{logId:e,logHeads:r,access:n,entryStorage:i,headsStorage:s,indexStorage:a,sortFn:o}={})=>{if(t==null)throw new Error("Identity is required");if(r!=null&&!Array.isArray(r))throw new Error("'logHeads' argument must be an array");const c=e||xFe();n=n||await EFe();const u=i||await cS(),l=a||await cS();s=s||await cS();const f=await pFe({storage:s,heads:r});o=_Fe(o||wFe);const d=new Cu({concurrency:1}),h=new Cu({concurrency:1}),m=async()=>{const S=Math.max(0,(await p()).reduce(SFe,0));return r5(t.publicKey,S)},p=async()=>(await f.all()).sort(o).reverse(),g=async()=>{const S=[];for await(const T of E())S.unshift(T);return S},v=async S=>{const T=await u.get(S);if(T)return await Zc.decode(T)},y=async S=>await l.get(S)!=null,b=async(S,T={referencesCount:0})=>{const w=async()=>{const A=await p(),F=A.map(I=>I.hash),P=await U(A,T.referencesCount+A.length),O=await Zc.create(t,c,S,eMe(await m()),F,P);if(!await n.canAppend(O))throw new Error(`Could not append entry:
Key "${t.hash}" is not allowed to write to the log`);return await f.set([O]),await u.put(O.hash,O.bytes),await l.put(O.hash,!0),O};return d.add(w)},_=async S=>{if(!S)throw new Error("Log instance not defined");if(!z(S))throw new Error("Given argument is not an instance of Log");u.merge&&await u.merge(S.storage);const T=await S.heads();for(const w of T)await x(w)},x=async S=>{const T=async()=>{if(await y(S.hash))return!1;const A=async C=>{if(C.id!==c)throw new Error(`Entry's id (${C.id}) doesn't match the log's id (${c}).`);if(!await n.canAppend(C))throw new Error(`Could not append entry:
Key "${C.identity}" is not allowed to write to the log`);if(!await Zc.verify(t,C))throw new Error(`Could not validate signature for entry "${C.hash}"`)};await A(S);const F=(await p()).map(C=>C.hash),P=new Set([S.hash]),O=new Set([...S.next,...S.refs]),R=new Set,I=async()=>{const C=Array.from(O.values()).filter(y).map(v),M=await Promise.all(C);for(const L of M){O.delete(L.hash),await A(L),P.add(L.hash);for(const N of[...L.next,...L.refs])!await y(N)&&!P.has(N)?O.add(N):F.includes(N)&&R.add(N)}O.size>0&&await I()};await I();for(const C of P.values())await l.put(C,!0);for(const C of R.values())await f.remove(C);return await u.put(S.hash,S.bytes),await f.add(S),!0};return h.add(T)},E=async function*(S,T){T=T||(()=>!1),S=S||await p();let A=S.sort(o);const F={};let P=[];const O={},R=C=>!(F[C]||O[C]);let I;for(;A.length>0;)if(A=A.sort(o),I=A.pop(),I){const{hash:C,next:M}=I;if(!F[C]){if(yield I,await T(I)===!0)break;F[C]=!0,O[C]=!0,P=[...P,...M].filter(R);const N=W=>{if(!F[W]&&!O[W])return O[W]=!0,v(W)},H=await Promise.all(P.map(N));P=H.filter(W=>W!=null).reduce((W,q)=>Array.from(new Set([...W,...q.next])),[]).filter(R),A=[...H,...A]}}},k=async function*({amount:S=-1,gt:T,gte:w,lt:A,lte:F}={}){if(S===0)return;if(typeof F=="string"&&(F=[await v(F)]),typeof A=="string"){const W=await v(A);A=await Promise.all(W.next.map(G=>v(G)))}if(A!=null&&!Array.isArray(A))throw new Error("lt must be a string or an array of Entries");if(F!=null&&!Array.isArray(F))throw new Error("lte must be a string or an array of Entries");const P=(A||F||await p()).filter(W=>W!=null),O=T||w?await v(T||w):null,R=O||S===-1?-1:S;let I=0;const C=async W=>(I++,W?!!(I>=R&&R!==-1||O&&Zc.isEqual(W,O)):!1),M=O&&S!==-1&&!A&&!F,L=M?new aI(S+2):null;let N=0;const H=E(P,C);for await(const W of H){const q=A&&Zc.isEqual(W,P),G=T&&Zc.isEqual(W,O);q||G||(M?L.set(N++,W.hash):yield W)}if(M){const W=L.keys.length,q=W>S?W-S:0,G=L.keys.slice(q,W);for(const Y of G){const te=L.get(Y);yield await v(te)}}},B=async()=>{await l.clear(),await f.clear(),await u.clear()},D=async()=>{await l.close(),await f.close(),await u.close()},z=S=>S&&S.id!==void 0&&S.clock!==void 0&&S.heads!==void 0&&S.values!==void 0&&S.access!==void 0&&S.identity!==void 0&&S.storage!==void 0,U=async(S,T=0)=>{let w=[];const A=async F=>w.length>=T&&T!==-1;for await(const{hash:F}of E(S,A))w.push(F);return w=w.slice(S.length+1,T),w};return{id:c,clock:m,heads:p,values:g,all:g,get:v,has:y,append:b,join:_,joinEntry:x,traverse:E,iterator:k,clear:B,close:D,access:n,identity:t,storage:u}},hu=async(t,e)=>({put:async(u,l)=>{await t.put(u,l),await e.put(u,l)},get:async u=>{let l=await t.get(u);return l||(l=await e.get(u),l&&await t.put(u,l)),l},del:async u=>{await t.del(u),await e.del(u)},iterator:async function*({amount:u,reverse:l}={}){const f=[],d={amount:u||-1,reverse:l||!1};for(const h of[t,e])for await(const[m,p]of h.iterator(d))f[m]||(f[m]=!0,yield[m,p])},merge:async u=>{await t.merge(u),await e.merge(u),await u.merge(t),await u.merge(e)},clear:async()=>{await t.clear(),await e.clear()},close:async()=>{await t.close(),await e.close()}});function TFe(t){return t[Symbol.asyncIterator]!=null}function vc(t){if(TFe(t))return(async()=>{for await(const e of t);})();for(const e of t);}const HV=3e4,im=async({ipfs:t,pin:e,timeout:r}={})=>{if(!t)throw new Error("An instance of ipfs is required.");return{put:async(l,f)=>{const d=mn.parse(l,Zs),{signal:h}=new sI.TimeoutController(r||HV);await t.blockstore.put(d,f,{signal:h}),e&&!await t.pins.isPinned(d)&&await vc(t.pins.add(d))},del:async l=>{},get:async l=>{const f=mn.parse(l,Zs),{signal:d}=new sI.TimeoutController(r||HV),h=await t.blockstore.get(f,{signal:d});if(h)return h},iterator:async function*(){},merge:async l=>{},clear:async()=>{},close:async()=>{}}};var lS={},uS={},Zu={},tb={},fS={},WV;function AFe(){return WV||(WV=1,fS.supports=function(...e){const r=e.reduce((n,i)=>Object.assign(n,i),{});return Object.assign(r,{snapshots:r.snapshots||!1,permanence:r.permanence||!1,seek:r.seek||!1,clear:r.clear||!1,getMany:r.getMany||!1,keyIterator:r.keyIterator||!1,valueIterator:r.valueIterator||!1,iteratorNextv:r.iteratorNextv||!1,iteratorAll:r.iteratorAll||!1,status:r.status||!1,createIfMissing:r.createIfMissing||!1,errorIfExists:r.errorIfExists||!1,deferredOpen:r.deferredOpen||!1,promises:r.promises||!1,streams:r.streams||!1,encodings:Object.assign({},r.encodings),events:Object.assign({},r.events),additionalMethods:Object.assign({},r.additionalMethods)})}),fS}var dS={},hS,GV;function El(){return GV||(GV=1,hS=class extends Error{constructor(e,r){super(e||""),typeof r=="object"&&r!==null&&(r.code&&(this.code=String(r.code)),r.expected&&(this.expected=!0),r.transient&&(this.transient=!0),r.cause&&(this.cause=r.cause)),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}}),hS}var Ju={},pS,KV;function gae(){if(KV)return pS;KV=1;let t=null;return pS=function(){return t===null&&(t={textEncoder:new TextEncoder,textDecoder:new TextDecoder}),t},pS}var Lm={},mS={},XV;function vae(){if(XV)return mS;XV=1;const t=El(),e=new Set(["buffer","view","utf8"]);class r{constructor(i){if(this.encode=i.encode||this.encode,this.decode=i.decode||this.decode,this.name=i.name||this.name,this.format=i.format||this.format,typeof this.encode!="function")throw new TypeError("The 'encode' property must be a function");if(typeof this.decode!="function")throw new TypeError("The 'decode' property must be a function");if(this.encode=this.encode.bind(this),this.decode=this.decode.bind(this),typeof this.name!="string"||this.name==="")throw new TypeError("The 'name' property must be a string");if(typeof this.format!="string"||!e.has(this.format))throw new TypeError("The 'format' property must be one of 'buffer', 'view', 'utf8'");i.createViewTranscoder&&(this.createViewTranscoder=i.createViewTranscoder),i.createBufferTranscoder&&(this.createBufferTranscoder=i.createBufferTranscoder),i.createUTF8Transcoder&&(this.createUTF8Transcoder=i.createUTF8Transcoder)}get commonName(){return this.name.split("+")[0]}createBufferTranscoder(){throw new t(`Encoding '${this.name}' cannot be transcoded to 'buffer'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}createViewTranscoder(){throw new t(`Encoding '${this.name}' cannot be transcoded to 'view'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}createUTF8Transcoder(){throw new t(`Encoding '${this.name}' cannot be transcoded to 'utf8'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}}return mS.Encoding=r,mS}var YV;function yae(){if(YV)return Lm;YV=1;const{Buffer:t}=_c()||{},{Encoding:e}=vae(),r=gae();class n extends e{constructor(o){super({...o,format:"buffer"})}createViewTranscoder(){return new i({encode:this.encode,decode:o=>this.decode(t.from(o.buffer,o.byteOffset,o.byteLength)),name:`${this.name}+view`})}createBufferTranscoder(){return this}}class i extends e{constructor(o){super({...o,format:"view"})}createBufferTranscoder(){return new n({encode:o=>{const c=this.encode(o);return t.from(c.buffer,c.byteOffset,c.byteLength)},decode:this.decode,name:`${this.name}+buffer`})}createViewTranscoder(){return this}}class s extends e{constructor(o){super({...o,format:"utf8"})}createBufferTranscoder(){return new n({encode:o=>t.from(this.encode(o),"utf8"),decode:o=>this.decode(o.toString("utf8")),name:`${this.name}+buffer`})}createViewTranscoder(){const{textEncoder:o,textDecoder:c}=r();return new i({encode:u=>o.encode(this.encode(u)),decode:u=>this.decode(c.decode(u)),name:`${this.name}+view`})}createUTF8Transcoder(){return this}}return Lm.BufferFormat=n,Lm.ViewFormat=i,Lm.UTF8Format=s,Lm}var ZV;function CFe(){if(ZV)return Ju;ZV=1;const{Buffer:t}=_c()||{Buffer:{isBuffer:()=>!1}},{textEncoder:e,textDecoder:r}=gae()(),{BufferFormat:n,ViewFormat:i,UTF8Format:s}=yae(),a=o=>o;return Ju.utf8=new s({encode:function(o){return t.isBuffer(o)?o.toString("utf8"):ArrayBuffer.isView(o)?r.decode(o):String(o)},decode:a,name:"utf8",createViewTranscoder(){return new i({encode:function(o){return ArrayBuffer.isView(o)?o:e.encode(o)},decode:function(o){return r.decode(o)},name:`${this.name}+view`})},createBufferTranscoder(){return new n({encode:function(o){return t.isBuffer(o)?o:ArrayBuffer.isView(o)?t.from(o.buffer,o.byteOffset,o.byteLength):t.from(String(o),"utf8")},decode:function(o){return o.toString("utf8")},name:`${this.name}+buffer`})}}),Ju.json=new s({encode:JSON.stringify,decode:JSON.parse,name:"json"}),Ju.buffer=new n({encode:function(o){return t.isBuffer(o)?o:ArrayBuffer.isView(o)?t.from(o.buffer,o.byteOffset,o.byteLength):t.from(String(o),"utf8")},decode:a,name:"buffer",createViewTranscoder(){return new i({encode:function(o){return ArrayBuffer.isView(o)?o:t.from(String(o),"utf8")},decode:function(o){return t.from(o.buffer,o.byteOffset,o.byteLength)},name:`${this.name}+view`})}}),Ju.view=new i({encode:function(o){return ArrayBuffer.isView(o)?o:e.encode(o)},decode:a,name:"view",createBufferTranscoder(){return new n({encode:function(o){return t.isBuffer(o)?o:ArrayBuffer.isView(o)?t.from(o.buffer,o.byteOffset,o.byteLength):t.from(String(o),"utf8")},decode:a,name:`${this.name}+buffer`})}}),Ju.hex=new n({encode:function(o){return t.isBuffer(o)?o:t.from(String(o),"hex")},decode:function(o){return o.toString("hex")},name:"hex"}),Ju.base64=new n({encode:function(o){return t.isBuffer(o)?o:t.from(String(o),"base64")},decode:function(o){return o.toString("base64")},name:"base64"}),Ju}var JV;function IFe(){if(JV)return dS;JV=1;const t=El(),e=CFe(),{Encoding:r}=vae(),{BufferFormat:n,ViewFormat:i,UTF8Format:s}=yae(),a=Symbol("formats"),o=Symbol("encodings"),c=new Set(["buffer","view","utf8"]);class u{constructor(g){if(Array.isArray(g)){if(!g.every(v=>c.has(v)))throw new TypeError("Format must be one of 'buffer', 'view', 'utf8'")}else throw new TypeError("The first argument 'formats' must be an array");this[o]=new Map,this[a]=new Set(g);for(const v in e)try{this.encoding(v)}catch(y){if(y.code!=="LEVEL_ENCODING_NOT_SUPPORTED")throw y}}encodings(){return Array.from(new Set(this[o].values()))}encoding(g){let v=this[o].get(g);if(v===void 0){if(typeof g=="string"&&g!==""){if(v=h[g],!v)throw new t(`Encoding '${g}' is not found`,{code:"LEVEL_ENCODING_NOT_FOUND"})}else{if(typeof g!="object"||g===null)throw new TypeError("First argument 'encoding' must be a string or object");v=l(g)}const{name:y,format:b}=v;if(!this[a].has(b))if(this[a].has("view"))v=v.createViewTranscoder();else if(this[a].has("buffer"))v=v.createBufferTranscoder();else if(this[a].has("utf8"))v=v.createUTF8Transcoder();else throw new t(`Encoding '${y}' cannot be transcoded`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"});for(const _ of[g,y,v.name,v.commonName])this[o].set(_,v)}return v}}dS.Transcoder=u;function l(p){if(p instanceof r)return p;const g="type"in p&&typeof p.type=="string"?p.type:void 0,v=p.name||g||`anonymous-${m++}`;switch(f(p)){case"view":return new i({...p,name:v});case"utf8":return new s({...p,name:v});case"buffer":return new n({...p,name:v});default:throw new TypeError("Format must be one of 'buffer', 'view', 'utf8'")}}function f(p){return"format"in p&&p.format!==void 0?p.format:"buffer"in p&&typeof p.buffer=="boolean"?p.buffer?"buffer":"utf8":"code"in p&&Number.isInteger(p.code)?"view":"buffer"}const d={binary:e.buffer,"utf-8":e.utf8},h={...e,...d};let m=0;return dS}var rb={},gS,QV;function PFe(){return QV||(QV=1,gS=typeof queueMicrotask=="function"?queueMicrotask:t=>Promise.resolve().then(t)),gS}var eq;function u5(){if(eq)return rb;eq=1;var t=PFe();return rb.fromCallback=function(e,r){if(e===void 0){var n=new Promise(function(i,s){e=function(a,o){a?s(a):i(o)}});e[r!==void 0?r:"promise"]=n}else if(typeof e!="function")throw new TypeError("Callback must be a function");return e},rb.fromPromise=function(e,r){if(r===void 0)return e;e.then(function(n){t(()=>r(null,n))}).catch(function(n){t(()=>r(n))})},rb}var $m={},nb={},tq;function pB(){return tq||(tq=1,nb.getCallback=function(t,e){return typeof t=="function"?t:e},nb.getOptions=function(t,e){return typeof t=="object"&&t!==null?t:e!==void 0?e:{}}),nb}var rq;function mh(){if(rq)return $m;rq=1;const{fromCallback:t}=u5(),e=El(),{getOptions:r,getCallback:n}=pB(),i=Symbol("promise"),s=Symbol("callback"),a=Symbol("working"),o=Symbol("handleOne"),c=Symbol("handleMany"),u=Symbol("autoClose"),l=Symbol("finishWork"),f=Symbol("returnMany"),d=Symbol("closing"),h=Symbol("handleClose"),m=Symbol("closed"),p=Symbol("closeCallbacks"),g=Symbol("keyEncoding"),v=Symbol("valueEncoding"),y=Symbol("abortOnClose"),b=Symbol("legacy"),_=Symbol("keys"),x=Symbol("values"),E=Symbol("limit"),k=Symbol("count"),B=Object.freeze({}),D=()=>{};let z=!1;class U{constructor(P,O,R){if(typeof P!="object"||P===null){const I=P===null?"null":typeof P;throw new TypeError(`The first argument must be an abstract-level database, received ${I}`)}if(typeof O!="object"||O===null)throw new TypeError("The second argument must be an options object");this[m]=!1,this[p]=[],this[a]=!1,this[d]=!1,this[u]=!1,this[s]=null,this[o]=this[o].bind(this),this[c]=this[c].bind(this),this[h]=this[h].bind(this),this[g]=O[g],this[v]=O[v],this[b]=R,this[E]=Number.isInteger(O.limit)&&O.limit>=0?O.limit:1/0,this[k]=0,this[y]=!!O.abortOnClose,this.db=P,this.db.attachResource(this),this.nextTick=P.nextTick}get count(){return this[k]}get limit(){return this[E]}next(P){let O;if(P===void 0)O=new Promise((R,I)=>{P=(C,M,L)=>{C?I(C):this[b]?M===void 0&&L===void 0?R():R([M,L]):R(M)}});else if(typeof P!="function")throw new TypeError("Callback must be a function");return this[d]?this.nextTick(P,new e("Iterator is not open: cannot call next() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[a]?this.nextTick(P,new e("Iterator is busy: cannot call next() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(this[a]=!0,this[s]=P,this[k]>=this[E]?this.nextTick(this[o],null):this._next(this[o])),O}_next(P){this.nextTick(P)}nextv(P,O,R){return R=n(O,R),R=t(R,i),O=r(O,B),Number.isInteger(P)?(this[d]?this.nextTick(R,new e("Iterator is not open: cannot call nextv() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[a]?this.nextTick(R,new e("Iterator is busy: cannot call nextv() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(P<1&&(P=1),this[E]<1/0&&(P=Math.min(P,this[E]-this[k])),this[a]=!0,this[s]=R,P<=0?this.nextTick(this[c],null,[]):this._nextv(P,O,this[c])),R[i]):(this.nextTick(R,new TypeError("The first argument 'size' must be an integer")),R[i])}_nextv(P,O,R){const I=[],C=(M,L,N)=>{if(M)return R(M);if(this[b]?L===void 0&&N===void 0:L===void 0)return R(null,I);I.push(this[b]?[L,N]:L),I.length===P?R(null,I):this._next(C)};this._next(C)}all(P,O){return O=n(P,O),O=t(O,i),P=r(P,B),this[d]?this.nextTick(O,new e("Iterator is not open: cannot call all() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[a]?this.nextTick(O,new e("Iterator is busy: cannot call all() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(this[a]=!0,this[s]=O,this[u]=!0,this[k]>=this[E]?this.nextTick(this[c],null,[]):this._all(P,this[c])),O[i]}_all(P,O){let R=this[k];const I=[],C=()=>{const L=this[E]<1/0?Math.min(1e3,this[E]-R):1e3;L<=0?this.nextTick(O,null,I):this._nextv(L,B,M)},M=(L,N)=>{L?O(L):N.length===0?O(null,I):(I.push.apply(I,N),R+=N.length,C())};C()}[l](){const P=this[s];return this[y]&&P===null?D:(this[a]=!1,this[s]=null,this[d]&&this._close(this[h]),P)}[f](P,O,R){this[u]?this.close(P.bind(null,O,R)):P(O,R)}seek(P,O){if(O=r(O,B),!this[d]){if(this[a])throw new e("Iterator is busy: cannot call seek() until next() has completed",{code:"LEVEL_ITERATOR_BUSY"});{const R=this.db.keyEncoding(O.keyEncoding||this[g]),I=R.format;O.keyEncoding!==I&&(O={...O,keyEncoding:I});const C=this.db.prefixKey(R.encode(P),I);this._seek(C,O)}}}_seek(P,O){throw new e("Iterator does not support seek()",{code:"LEVEL_NOT_SUPPORTED"})}close(P){return P=t(P,i),this[m]?this.nextTick(P):this[d]?this[p].push(P):(this[d]=!0,this[p].push(P),this[a]?this[y]&&this[l]()(new e("Aborted on iterator close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this._close(this[h])),P[i]}_close(P){this.nextTick(P)}[h](){this[m]=!0,this.db.detachResource(this);const P=this[p];this[p]=[];for(const O of P)O()}async*[Symbol.asyncIterator](){try{let P;for(;(P=await this.next())!==void 0;)yield P}finally{this[m]||await this.close()}}}class S extends U{constructor(P,O){super(P,O,!0),this[_]=O.keys!==!1,this[x]=O.values!==!1}[o](P,O,R){const I=this[l]();if(P)return I(P);try{O=this[_]&&O!==void 0?this[g].decode(O):void 0,R=this[x]&&R!==void 0?this[v].decode(R):void 0}catch(C){return I(new A("entry",C))}O===void 0&&R===void 0||this[k]++,I(null,O,R)}[c](P,O){const R=this[l]();if(P)return this[f](R,P);try{for(const I of O){const C=I[0],M=I[1];I[0]=this[_]&&C!==void 0?this[g].decode(C):void 0,I[1]=this[x]&&M!==void 0?this[v].decode(M):void 0}}catch(I){return this[f](R,new A("entries",I))}this[k]+=O.length,this[f](R,null,O)}end(P){return!z&&typeof console<"u"&&(z=!0,console.warn(new e("The iterator.end() method was renamed to close() and end() is an alias that will be removed in a future version",{code:"LEVEL_LEGACY"}))),this.close(P)}}class T extends U{constructor(P,O){super(P,O,!1)}[o](P,O){const R=this[l]();if(P)return R(P);try{O=O!==void 0?this[g].decode(O):void 0}catch(I){return R(new A("key",I))}O!==void 0&&this[k]++,R(null,O)}[c](P,O){const R=this[l]();if(P)return this[f](R,P);try{for(let I=0;I<O.length;I++){const C=O[I];O[I]=C!==void 0?this[g].decode(C):void 0}}catch(I){return this[f](R,new A("keys",I))}this[k]+=O.length,this[f](R,null,O)}}class w extends U{constructor(P,O){super(P,O,!1)}[o](P,O){const R=this[l]();if(P)return R(P);try{O=O!==void 0?this[v].decode(O):void 0}catch(I){return R(new A("value",I))}O!==void 0&&this[k]++,R(null,O)}[c](P,O){const R=this[l]();if(P)return this[f](R,P);try{for(let I=0;I<O.length;I++){const C=O[I];O[I]=C!==void 0?this[v].decode(C):void 0}}catch(I){return this[f](R,new A("values",I))}this[k]+=O.length,this[f](R,null,O)}}class A extends e{constructor(P,O){super(`Iterator could not decode ${P}`,{code:"LEVEL_DECODE_ERROR",cause:O})}}for(const F of["_ended property","_nexting property","_end method"])Object.defineProperty(S.prototype,F.split(" ")[0],{get(){throw new e(`The ${F} has been removed`,{code:"LEVEL_LEGACY"})},set(){throw new e(`The ${F} has been removed`,{code:"LEVEL_LEGACY"})}});return S.keyEncoding=g,S.valueEncoding=v,$m.AbstractIterator=S,$m.AbstractKeyIterator=T,$m.AbstractValueIterator=w,$m}var ib={},nq;function RFe(){if(nq)return ib;nq=1;const{AbstractKeyIterator:t,AbstractValueIterator:e}=mh(),r=Symbol("iterator"),n=Symbol("callback"),i=Symbol("handleOne"),s=Symbol("handleMany");class a extends t{constructor(u,l){super(u,l),this[r]=u.iterator({...l,keys:!0,values:!1}),this[i]=this[i].bind(this),this[s]=this[s].bind(this)}}class o extends e{constructor(u,l){super(u,l),this[r]=u.iterator({...l,keys:!1,values:!0}),this[i]=this[i].bind(this),this[s]=this[s].bind(this)}}for(const c of[a,o]){const u=c===a,l=u?f=>f[0]:f=>f[1];c.prototype._next=function(f){this[n]=f,this[r].next(this[i])},c.prototype[i]=function(f,d,h){const m=this[n];f?m(f):m(null,u?d:h)},c.prototype._nextv=function(f,d,h){this[n]=h,this[r].nextv(f,d,this[s])},c.prototype._all=function(f,d){this[n]=d,this[r].all(f,this[s])},c.prototype[s]=function(f,d){const h=this[n];f?h(f):h(null,d.map(l))},c.prototype._seek=function(f,d){this[r].seek(f,d)},c.prototype._close=function(f){this[r].close(f)}}return ib.DefaultKeyIterator=a,ib.DefaultValueIterator=o,ib}var Um={},iq;function OFe(){if(iq)return Um;iq=1;const{AbstractIterator:t,AbstractKeyIterator:e,AbstractValueIterator:r}=mh(),n=El(),i=Symbol("nut"),s=Symbol("undefer"),a=Symbol("factory");class o extends t{constructor(f,d){super(f,d),this[i]=null,this[a]=()=>f.iterator(d),this.db.defer(()=>this[s]())}}class c extends e{constructor(f,d){super(f,d),this[i]=null,this[a]=()=>f.keys(d),this.db.defer(()=>this[s]())}}class u extends r{constructor(f,d){super(f,d),this[i]=null,this[a]=()=>f.values(d),this.db.defer(()=>this[s]())}}for(const l of[o,c,u])l.prototype[s]=function(){this.db.status==="open"&&(this[i]=this[a]())},l.prototype._next=function(f){this[i]!==null?this[i].next(f):this.db.status==="opening"?this.db.defer(()=>this._next(f)):this.nextTick(f,new n("Iterator is not open: cannot call next() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},l.prototype._nextv=function(f,d,h){this[i]!==null?this[i].nextv(f,d,h):this.db.status==="opening"?this.db.defer(()=>this._nextv(f,d,h)):this.nextTick(h,new n("Iterator is not open: cannot call nextv() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},l.prototype._all=function(f,d){this[i]!==null?this[i].all(d):this.db.status==="opening"?this.db.defer(()=>this._all(f,d)):this.nextTick(d,new n("Iterator is not open: cannot call all() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},l.prototype._seek=function(f,d){this[i]!==null?this[i]._seek(f,d):this.db.status==="opening"&&this.db.defer(()=>this._seek(f,d))},l.prototype._close=function(f){this[i]!==null?this[i].close(f):this.db.status==="opening"?this.db.defer(()=>this._close(f)):this.nextTick(f)};return Um.DeferredIterator=o,Um.DeferredKeyIterator=c,Um.DeferredValueIterator=u,Um}var vS={},yS={},sq;function bae(){if(sq)return yS;sq=1;const{fromCallback:t}=u5(),e=El(),{getCallback:r,getOptions:n}=pB(),i=Symbol("promise"),s=Symbol("status"),a=Symbol("operations"),o=Symbol("finishClose"),c=Symbol("closeCallbacks");class u{constructor(f){if(typeof f!="object"||f===null){const d=f===null?"null":typeof f;throw new TypeError(`The first argument must be an abstract-level database, received ${d}`)}this[a]=[],this[c]=[],this[s]="open",this[o]=this[o].bind(this),this.db=f,this.db.attachResource(this),this.nextTick=f.nextTick}get length(){return this[a].length}put(f,d,h){if(this[s]!=="open")throw new e("Batch is not open: cannot call put() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});const m=this.db._checkKey(f)||this.db._checkValue(d);if(m)throw m;const p=h&&h.sublevel!=null?h.sublevel:this.db,g=h,v=p.keyEncoding(h&&h.keyEncoding),y=p.valueEncoding(h&&h.valueEncoding),b=v.format;h={...h,keyEncoding:b,valueEncoding:y.format},p!==this.db&&(h.sublevel=null);const _=p.prefixKey(v.encode(f),b),x=y.encode(d);return this._put(_,x,h),this[a].push({...g,type:"put",key:f,value:d}),this}_put(f,d,h){}del(f,d){if(this[s]!=="open")throw new e("Batch is not open: cannot call del() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});const h=this.db._checkKey(f);if(h)throw h;const m=d&&d.sublevel!=null?d.sublevel:this.db,p=d,g=m.keyEncoding(d&&d.keyEncoding),v=g.format;return d={...d,keyEncoding:v},m!==this.db&&(d.sublevel=null),this._del(m.prefixKey(g.encode(f),v),d),this[a].push({...p,type:"del",key:f}),this}_del(f,d){}clear(){if(this[s]!=="open")throw new e("Batch is not open: cannot call clear() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});return this._clear(),this[a]=[],this}_clear(){}write(f,d){return d=r(f,d),d=t(d,i),f=n(f),this[s]!=="open"?this.nextTick(d,new e("Batch is not open: cannot call write() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"})):this.length===0?this.close(d):(this[s]="writing",this._write(f,h=>{this[s]="closing",this[c].push(()=>d(h)),h||this.db.emit("batch",this[a]),this._close(this[o])})),d[i]}_write(f,d){}close(f){return f=t(f,i),this[s]==="closing"?this[c].push(f):this[s]==="closed"?this.nextTick(f):(this[c].push(f),this[s]!=="writing"&&(this[s]="closing",this._close(this[o]))),f[i]}_close(f){this.nextTick(f)}[o](){this[s]="closed",this.db.detachResource(this);const f=this[c];this[c]=[];for(const d of f)d()}}return yS.AbstractChainedBatch=u,yS}var aq;function BFe(){if(aq)return vS;aq=1;const{AbstractChainedBatch:t}=bae(),e=El(),r=Symbol("encoded");class n extends t{constructor(s){super(s),this[r]=[]}_put(s,a,o){this[r].push({...o,type:"put",key:s,value:a})}_del(s,a){this[r].push({...a,type:"del",key:s})}_clear(){this[r]=[]}_write(s,a){this.db.status==="opening"?this.db.defer(()=>this._write(s,a)):this.db.status==="open"?this[r].length===0?this.nextTick(a):this.db._batch(this[r],s,a):this.nextTick(a,new e("Batch is not open: cannot call write() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"}))}}return vS.DefaultChainedBatch=n,vS}var bS,oq;function DFe(){if(oq)return bS;oq=1;const t=El(),e=Object.prototype.hasOwnProperty,r=new Set(["lt","lte","gt","gte"]);return bS=function(n,i){const s={};for(const a in n)if(e.call(n,a)&&!(a==="keyEncoding"||a==="valueEncoding")){if(a==="start"||a==="end")throw new t(`The legacy range option '${a}' has been removed`,{code:"LEVEL_LEGACY"});if(a==="encoding")throw new t("The levelup-style 'encoding' alias has been removed, use 'valueEncoding' instead",{code:"LEVEL_LEGACY"});r.has(a)?s[a]=i.encode(n[a]):s[a]=n[a]}return s.reverse=!!s.reverse,s.limit=Number.isInteger(s.limit)&&s.limit>=0?s.limit:-1,s},bS}/*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var wS,cq;function wae(){if(cq)return wS;cq=1;let t;return wS=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window<"u"?window:Ut):e=>(t||(t=Promise.resolve())).then(e).catch(r=>setTimeout(()=>{throw r},0)),wS}var _S,lq;function MFe(){if(lq)return _S;lq=1;const t=wae();return _S=function(e,...r){r.length===0?t(e):t(()=>e(...r))},_S}var jm={},uq;function NFe(){if(uq)return jm;uq=1;const{AbstractIterator:t,AbstractKeyIterator:e,AbstractValueIterator:r}=mh(),n=Symbol("unfix"),i=Symbol("iterator"),s=Symbol("handleOne"),a=Symbol("handleMany"),o=Symbol("callback");class c extends t{constructor(d,h,m,p){super(d,h),this[i]=m,this[n]=p,this[s]=this[s].bind(this),this[a]=this[a].bind(this),this[o]=null}[s](d,h,m){const p=this[o];if(d)return p(d);h!==void 0&&(h=this[n](h)),p(d,h,m)}[a](d,h){const m=this[o];if(d)return m(d);for(const p of h){const g=p[0];g!==void 0&&(p[0]=this[n](g))}m(d,h)}}class u extends e{constructor(d,h,m,p){super(d,h),this[i]=m,this[n]=p,this[s]=this[s].bind(this),this[a]=this[a].bind(this),this[o]=null}[s](d,h){const m=this[o];if(d)return m(d);h!==void 0&&(h=this[n](h)),m(d,h)}[a](d,h){const m=this[o];if(d)return m(d);for(let p=0;p<h.length;p++){const g=h[p];g!==void 0&&(h[p]=this[n](g))}m(d,h)}}class l extends r{constructor(d,h,m){super(d,h),this[i]=m}}for(const f of[c,u])f.prototype._next=function(d){this[o]=d,this[i].next(this[s])},f.prototype._nextv=function(d,h,m){this[o]=m,this[i].nextv(d,h,this[a])},f.prototype._all=function(d,h){this[o]=h,this[i].all(d,this[a])};for(const f of[l])f.prototype._next=function(d){this[i].next(d)},f.prototype._nextv=function(d,h,m){this[i].nextv(d,h,m)},f.prototype._all=function(d,h){this[i].all(d,h)};for(const f of[c,u,l])f.prototype._seek=function(d,h){this[i].seek(d,h)},f.prototype._close=function(d){this[i].close(d)};return jm.AbstractSublevelIterator=c,jm.AbstractSublevelKeyIterator=u,jm.AbstractSublevelValueIterator=l,jm}var xS,fq;function FFe(){if(fq)return xS;fq=1;const t=El(),{Buffer:e}=_c()||{},{AbstractSublevelIterator:r,AbstractSublevelKeyIterator:n,AbstractSublevelValueIterator:i}=NFe(),s=Symbol("prefix"),a=Symbol("upperBound"),o=Symbol("prefixRange"),c=Symbol("parent"),u=Symbol("unfix"),l=new TextEncoder,f={separator:"!"};xS=function({AbstractLevel:v}){class y extends v{static defaults(_){if(typeof _=="string")throw new t("The subleveldown string shorthand for { separator } has been removed",{code:"LEVEL_LEGACY"});if(_&&_.open)throw new t("The subleveldown open option has been removed",{code:"LEVEL_LEGACY"});return _==null?f:_.separator?_:{..._,separator:"!"}}constructor(_,x,E){const{separator:k,manifest:B,...D}=y.defaults(E);x=g(x,k);const z=k.charCodeAt(0)+1,U=_[c]||_;if(!l.encode(x).every(w=>w>z&&w<127))throw new t(`Prefix must use bytes > ${z} < 127`,{code:"LEVEL_INVALID_PREFIX"});super(d(U,B),D);const S=(_.prefix||"")+k+x+k,T=S.slice(0,-1)+String.fromCharCode(z);this[c]=U,this[s]=new m(S),this[a]=new m(T),this[u]=new p,this.nextTick=U.nextTick}prefixKey(_,x){if(x==="utf8")return this[s].utf8+_;if(_.byteLength===0)return this[s][x];if(x==="view"){const E=this[s].view,k=new Uint8Array(E.byteLength+_.byteLength);return k.set(E,0),k.set(_,E.byteLength),k}else{const E=this[s].buffer;return e.concat([E,_],E.byteLength+_.byteLength)}}[o](_,x){_.gte!==void 0?_.gte=this.prefixKey(_.gte,x):_.gt!==void 0?_.gt=this.prefixKey(_.gt,x):_.gte=this[s][x],_.lte!==void 0?_.lte=this.prefixKey(_.lte,x):_.lt!==void 0?_.lt=this.prefixKey(_.lt,x):_.lte=this[a][x]}get prefix(){return this[s].utf8}get db(){return this[c]}_open(_,x){this[c].open({passive:!0},x)}_put(_,x,E,k){this[c].put(_,x,E,k)}_get(_,x,E){this[c].get(_,x,E)}_getMany(_,x,E){this[c].getMany(_,x,E)}_del(_,x,E){this[c].del(_,x,E)}_batch(_,x,E){this[c].batch(_,x,E)}_clear(_,x){this[o](_,_.keyEncoding),this[c].clear(_,x)}_iterator(_){this[o](_,_.keyEncoding);const x=this[c].iterator(_),E=this[u].get(this[s].utf8.length,_.keyEncoding);return new r(this,_,x,E)}_keys(_){this[o](_,_.keyEncoding);const x=this[c].keys(_),E=this[u].get(this[s].utf8.length,_.keyEncoding);return new n(this,_,x,E)}_values(_){this[o](_,_.keyEncoding);const x=this[c].values(_);return new i(this,_,x)}}return{AbstractSublevel:y}};const d=function(v,y){return{...v.supports,createIfMissing:!1,errorIfExists:!1,events:{},additionalMethods:{},...y,encodings:{utf8:h(v,"utf8"),buffer:h(v,"buffer"),view:h(v,"view")}}},h=function(v,y){return v.supports.encodings[y]?v.keyEncoding(y).name===y:!1};class m{constructor(y){this.utf8=y,this.view=l.encode(y),this.buffer=e?e.from(this.view.buffer,0,this.view.byteLength):{}}}class p{constructor(){this.cache=new Map}get(y,b){let _=this.cache.get(b);return _===void 0&&(b==="view"?_=function(x,E){return E.subarray(x)}.bind(null,y):_=function(x,E){return E.slice(x)}.bind(null,y),this.cache.set(b,_)),_}}const g=function(v,y){let b=0,_=v.length;for(;b<_&&v[b]===y;)b++;for(;_>b&&v[_-1]===y;)_--;return v.slice(b,_)};return xS}var dq;function hq(){if(dq)return tb;dq=1;const{supports:t}=AFe(),{Transcoder:e}=IFe(),{EventEmitter:r}=$p(),{fromCallback:n}=u5(),i=El(),{AbstractIterator:s}=mh(),{DefaultKeyIterator:a,DefaultValueIterator:o}=RFe(),{DeferredIterator:c,DeferredKeyIterator:u,DeferredValueIterator:l}=OFe(),{DefaultChainedBatch:f}=BFe(),{getCallback:d,getOptions:h}=pB(),m=DFe(),p=Symbol("promise"),g=Symbol("landed"),v=Symbol("resources"),y=Symbol("closeResources"),b=Symbol("operations"),_=Symbol("undefer"),x=Symbol("deferOpen"),E=Symbol("options"),k=Symbol("status"),B=Symbol("defaultOptions"),D=Symbol("transcoder"),z=Symbol("keyEncoding"),U=Symbol("valueEncoding"),S=()=>{};class T extends r{constructor(O,R){if(super(),typeof O!="object"||O===null)throw new TypeError("The first argument 'manifest' must be an object");R=h(R);const{keyEncoding:I,valueEncoding:C,passive:M,...L}=R;this[v]=new Set,this[b]=[],this[x]=!0,this[E]=L,this[k]="opening",this.supports=t(O,{status:!0,promises:!0,clear:!0,getMany:!0,deferredOpen:!0,snapshots:O.snapshots!==!1,permanence:O.permanence!==!1,keyIterator:!0,valueIterator:!0,iteratorNextv:!0,iteratorAll:!0,encodings:O.encodings||{},events:Object.assign({},O.events,{opening:!0,open:!0,closing:!0,closed:!0,put:!0,del:!0,batch:!0,clear:!0})}),this[D]=new e(F(this)),this[z]=this[D].encoding(I||"utf8"),this[U]=this[D].encoding(C||"utf8");for(const N of this[D].encodings())this.supports.encodings[N.commonName]||(this.supports.encodings[N.commonName]=!0);this[B]={empty:Object.freeze({}),entry:Object.freeze({keyEncoding:this[z].commonName,valueEncoding:this[U].commonName}),key:Object.freeze({keyEncoding:this[z].commonName})},this.nextTick(()=>{this[x]&&this.open({passive:!1},S)})}get status(){return this[k]}keyEncoding(O){return this[D].encoding(O??this[z])}valueEncoding(O){return this[D].encoding(O??this[U])}open(O,R){R=d(O,R),R=n(R,p),O={...this[E],...h(O)},O.createIfMissing=O.createIfMissing!==!1,O.errorIfExists=!!O.errorIfExists;const I=C=>{this[k]==="closing"||this[k]==="opening"?this.once(g,C?()=>I(C):I):this[k]!=="open"?R(new i("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN",cause:C})):R()};return O.passive?this[k]==="opening"?this.once(g,I):this.nextTick(I):this[k]==="closed"||this[x]?(this[x]=!1,this[k]="opening",this.emit("opening"),this._open(O,C=>{if(C){this[k]="closed",this[y](()=>{this.emit(g),I(C)}),this[_]();return}this[k]="open",this[_](),this.emit(g),this[k]==="open"&&this.emit("open"),this[k]==="open"&&this.emit("ready"),I()})):this[k]==="open"?this.nextTick(I):this.once(g,()=>this.open(O,R)),R[p]}_open(O,R){this.nextTick(R)}close(O){O=n(O,p);const R=I=>{this[k]==="opening"||this[k]==="closing"?this.once(g,I?R(I):R):this[k]!=="closed"?O(new i("Database is not closed",{code:"LEVEL_DATABASE_NOT_CLOSED",cause:I})):O()};if(this[k]==="open"){this[k]="closing",this.emit("closing");const I=C=>{this[k]="open",this[_](),this.emit(g),R(C)};this[y](()=>{this._close(C=>{if(C)return I(C);this[k]="closed",this[_](),this.emit(g),this[k]==="closed"&&this.emit("closed"),R()})})}else this[k]==="closed"?this.nextTick(R):this.once(g,()=>this.close(O));return O[p]}[y](O){if(this[v].size===0)return this.nextTick(O);let R=this[v].size,I=!0;const C=()=>{--R===0&&(I?this.nextTick(O):O())};for(const M of this[v])M.close(C);I=!1,this[v].clear()}_close(O){this.nextTick(O)}get(O,R,I){if(I=d(R,I),I=n(I,p),R=h(R,this[B].entry),this[k]==="opening")return this.defer(()=>this.get(O,R,I)),I[p];if(A(this,I))return I[p];const C=this._checkKey(O);if(C)return this.nextTick(I,C),I[p];const M=this.keyEncoding(R.keyEncoding),L=this.valueEncoding(R.valueEncoding),N=M.format,H=L.format;return(R.keyEncoding!==N||R.valueEncoding!==H)&&(R=Object.assign({},R,{keyEncoding:N,valueEncoding:H})),this._get(this.prefixKey(M.encode(O),N),R,(W,q)=>{if(W)return(W.code==="LEVEL_NOT_FOUND"||W.notFound||/NotFound/i.test(W))&&(W.code||(W.code="LEVEL_NOT_FOUND"),W.notFound||(W.notFound=!0),W.status||(W.status=404)),I(W);try{q=L.decode(q)}catch(G){return I(new i("Could not decode value",{code:"LEVEL_DECODE_ERROR",cause:G}))}I(null,q)}),I[p]}_get(O,R,I){this.nextTick(I,new Error("NotFound"))}getMany(O,R,I){if(I=d(R,I),I=n(I,p),R=h(R,this[B].entry),this[k]==="opening")return this.defer(()=>this.getMany(O,R,I)),I[p];if(A(this,I))return I[p];if(!Array.isArray(O))return this.nextTick(I,new TypeError("The first argument 'keys' must be an array")),I[p];if(O.length===0)return this.nextTick(I,null,[]),I[p];const C=this.keyEncoding(R.keyEncoding),M=this.valueEncoding(R.valueEncoding),L=C.format,N=M.format;(R.keyEncoding!==L||R.valueEncoding!==N)&&(R=Object.assign({},R,{keyEncoding:L,valueEncoding:N}));const H=new Array(O.length);for(let W=0;W<O.length;W++){const q=O[W],G=this._checkKey(q);if(G)return this.nextTick(I,G),I[p];H[W]=this.prefixKey(C.encode(q),L)}return this._getMany(H,R,(W,q)=>{if(W)return I(W);try{for(let G=0;G<q.length;G++)q[G]!==void 0&&(q[G]=M.decode(q[G]))}catch(G){return I(new i(`Could not decode one or more of ${q.length} value(s)`,{code:"LEVEL_DECODE_ERROR",cause:G}))}I(null,q)}),I[p]}_getMany(O,R,I){this.nextTick(I,null,new Array(O.length).fill(void 0))}put(O,R,I,C){if(C=d(I,C),C=n(C,p),I=h(I,this[B].entry),this[k]==="opening")return this.defer(()=>this.put(O,R,I,C)),C[p];if(A(this,C))return C[p];const M=this._checkKey(O)||this._checkValue(R);if(M)return this.nextTick(C,M),C[p];const L=this.keyEncoding(I.keyEncoding),N=this.valueEncoding(I.valueEncoding),H=L.format,W=N.format;(I.keyEncoding!==H||I.valueEncoding!==W)&&(I=Object.assign({},I,{keyEncoding:H,valueEncoding:W}));const q=this.prefixKey(L.encode(O),H),G=N.encode(R);return this._put(q,G,I,Y=>{if(Y)return C(Y);this.emit("put",O,R),C()}),C[p]}_put(O,R,I,C){this.nextTick(C)}del(O,R,I){if(I=d(R,I),I=n(I,p),R=h(R,this[B].key),this[k]==="opening")return this.defer(()=>this.del(O,R,I)),I[p];if(A(this,I))return I[p];const C=this._checkKey(O);if(C)return this.nextTick(I,C),I[p];const M=this.keyEncoding(R.keyEncoding),L=M.format;return R.keyEncoding!==L&&(R=Object.assign({},R,{keyEncoding:L})),this._del(this.prefixKey(M.encode(O),L),R,N=>{if(N)return I(N);this.emit("del",O),I()}),I[p]}_del(O,R,I){this.nextTick(I)}batch(O,R,I){if(!arguments.length){if(this[k]==="opening")return new f(this);if(this[k]!=="open")throw new i("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._chainedBatch()}if(typeof O=="function"?I=O:I=d(R,I),I=n(I,p),R=h(R,this[B].empty),this[k]==="opening")return this.defer(()=>this.batch(O,R,I)),I[p];if(A(this,I))return I[p];if(!Array.isArray(O))return this.nextTick(I,new TypeError("The first argument 'operations' must be an array")),I[p];if(O.length===0)return this.nextTick(I),I[p];const C=new Array(O.length),{keyEncoding:M,valueEncoding:L,...N}=R;for(let H=0;H<O.length;H++){if(typeof O[H]!="object"||O[H]===null)return this.nextTick(I,new TypeError("A batch operation must be an object")),I[p];const W=Object.assign({},O[H]);if(W.type!=="put"&&W.type!=="del")return this.nextTick(I,new TypeError("A batch operation must have a type property that is 'put' or 'del'")),I[p];const q=this._checkKey(W.key);if(q)return this.nextTick(I,q),I[p];const G=W.sublevel!=null?W.sublevel:this,Y=G.keyEncoding(W.keyEncoding||M),te=Y.format;if(W.key=G.prefixKey(Y.encode(W.key),te),W.keyEncoding=te,W.type==="put"){const Q=this._checkValue(W.value);if(Q)return this.nextTick(I,Q),I[p];const j=G.valueEncoding(W.valueEncoding||L);W.value=j.encode(W.value),W.valueEncoding=j.format}G!==this&&(W.sublevel=null),C[H]=W}return this._batch(C,N,H=>{if(H)return I(H);this.emit("batch",O),I()}),I[p]}_batch(O,R,I){this.nextTick(I)}sublevel(O,R){return this._sublevel(O,w.defaults(R))}_sublevel(O,R){return new w(this,O,R)}prefixKey(O,R){return O}clear(O,R){if(R=d(O,R),R=n(R,p),O=h(O,this[B].empty),this[k]==="opening")return this.defer(()=>this.clear(O,R)),R[p];if(A(this,R))return R[p];const I=O,C=this.keyEncoding(O.keyEncoding);return O=m(O,C),O.keyEncoding=C.format,O.limit===0?this.nextTick(R):this._clear(O,M=>{if(M)return R(M);this.emit("clear",I),R()}),R[p]}_clear(O,R){this.nextTick(R)}iterator(O){const R=this.keyEncoding(O&&O.keyEncoding),I=this.valueEncoding(O&&O.valueEncoding);if(O=m(O,R),O.keys=O.keys!==!1,O.values=O.values!==!1,O[s.keyEncoding]=R,O[s.valueEncoding]=I,O.keyEncoding=R.format,O.valueEncoding=I.format,this[k]==="opening")return new c(this,O);if(this[k]!=="open")throw new i("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._iterator(O)}_iterator(O){return new s(this,O)}keys(O){const R=this.keyEncoding(O&&O.keyEncoding),I=this.valueEncoding(O&&O.valueEncoding);if(O=m(O,R),O[s.keyEncoding]=R,O[s.valueEncoding]=I,O.keyEncoding=R.format,O.valueEncoding=I.format,this[k]==="opening")return new u(this,O);if(this[k]!=="open")throw new i("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._keys(O)}_keys(O){return new a(this,O)}values(O){const R=this.keyEncoding(O&&O.keyEncoding),I=this.valueEncoding(O&&O.valueEncoding);if(O=m(O,R),O[s.keyEncoding]=R,O[s.valueEncoding]=I,O.keyEncoding=R.format,O.valueEncoding=I.format,this[k]==="opening")return new l(this,O);if(this[k]!=="open")throw new i("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._values(O)}_values(O){return new o(this,O)}defer(O){if(typeof O!="function")throw new TypeError("The first argument must be a function");this[b].push(O)}[_](){if(this[b].length===0)return;const O=this[b];this[b]=[];for(const R of O)R()}attachResource(O){if(typeof O!="object"||O===null||typeof O.close!="function")throw new TypeError("The first argument must be a resource object");this[v].add(O)}detachResource(O){this[v].delete(O)}_chainedBatch(){return new f(this)}_checkKey(O){if(O==null)return new i("Key cannot be null or undefined",{code:"LEVEL_INVALID_KEY"})}_checkValue(O){if(O==null)return new i("Value cannot be null or undefined",{code:"LEVEL_INVALID_VALUE"})}}T.prototype.nextTick=MFe();const{AbstractSublevel:w}=FFe()({AbstractLevel:T});tb.AbstractLevel=T,tb.AbstractSublevel=w;const A=function(P,O){return P[k]!=="open"?(P.nextTick(O,new i("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"})),!0):!1},F=function(P){return Object.keys(P.supports.encodings).filter(O=>!!P.supports.encodings[O])};return tb}var pq;function _ae(){return pq||(pq=1,Zu.AbstractLevel=hq().AbstractLevel,Zu.AbstractSublevel=hq().AbstractSublevel,Zu.AbstractIterator=mh().AbstractIterator,Zu.AbstractKeyIterator=mh().AbstractKeyIterator,Zu.AbstractValueIterator=mh().AbstractValueIterator,Zu.AbstractChainedBatch=bae().AbstractChainedBatch),Zu}/*! run-parallel-limit. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var SS,mq;function LFe(){if(mq)return SS;mq=1,SS=e;const t=wae();function e(r,n,i){if(typeof n!="number")throw new Error("second argument must be a Number");let s,a,o,c,u,l=!0,f;Array.isArray(r)?(s=[],o=a=r.length):(c=Object.keys(r),s={},o=a=c.length);function d(m){function p(){i&&i(m,s),i=null}l?t(p):p()}function h(m,p,g){if(s[m]=g,p&&(u=!0),--o===0||p)d(p);else if(!u&&f<a){let v;c?(v=c[f],f+=1,r[v](function(y,b){h(v,y,b)})):(v=f,f+=1,r[v](function(y,b){h(v,y,b)}))}}f=n,o?c?c.some(function(m,p){return r[m](function(g,v){h(m,g,v)}),p===n-1}):r.some(function(m,p){return m(function(g,v){h(p,g,v)}),p===n-1}):d(null),l=!1}return SS}var ES={},kS,gq;function xae(){return gq||(gq=1,kS=function(e){const r=e.gte!==void 0?e.gte:e.gt!==void 0?e.gt:void 0,n=e.lte!==void 0?e.lte:e.lt!==void 0?e.lt:void 0,i=e.gte===void 0,s=e.lte===void 0;return r!==void 0&&n!==void 0?IDBKeyRange.bound(r,n,i,s):r!==void 0?IDBKeyRange.lowerBound(r,i):n!==void 0?IDBKeyRange.upperBound(n,s):null}),kS}var TS,vq;function Sae(){if(vq)return TS;vq=1;const t=new TextEncoder;return TS=function(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):t.encode(e)},TS}var yq;function $Fe(){if(yq)return ES;yq=1;const{AbstractIterator:t}=_ae(),e=xae(),r=Sae(),n=Symbol("cache"),i=Symbol("finished"),s=Symbol("options"),a=Symbol("currentOptions"),o=Symbol("position"),c=Symbol("location"),u=Symbol("first"),l={};class f extends t{constructor(m,p,g){super(m,g),this[n]=[],this[i]=this.limit===0,this[s]=g,this[a]={...g},this[o]=void 0,this[c]=p,this[u]=!0}_nextv(m,p,g){if(this[u]=!1,this[i])return this.nextTick(g,null,[]);if(this[n].length>0)return m=Math.min(m,this[n].length),this.nextTick(g,null,this[n].splice(0,m));this[o]!==void 0&&(this[s].reverse?(this[a].lt=this[o],this[a].lte=void 0):(this[a].gt=this[o],this[a].gte=void 0));let v;try{v=e(this[a])}catch{return this[i]=!0,this.nextTick(g,null,[])}const y=this.db.db.transaction([this[c]],"readonly"),b=y.objectStore(this[c]),_=[];if(this[s].reverse){const x=!this[s].values&&b.openKeyCursor?"openKeyCursor":"openCursor";b[x](v,"prev").onsuccess=E=>{const k=E.target.result;if(k){const{key:B,value:D}=k;this[o]=B,_.push([this[s].keys&&B!==void 0?r(B):void 0,this[s].values&&D!==void 0?r(D):void 0]),_.length<m?k.continue():d(y)}else this[i]=!0}}else{let x,E;const k=()=>{if(x===void 0||E===void 0)return;const B=Math.max(x.length,E.length);B===0||m===1/0?this[i]=!0:this[o]=x[B-1],_.length=B;for(let D=0;D<B;D++){const z=x[D],U=E[D];_[D]=[this[s].keys&&z!==void 0?r(z):void 0,this[s].values&&U!==void 0?r(U):void 0]}d(y)};this[s].keys||m<1/0?b.getAllKeys(v,m<1/0?m:void 0).onsuccess=B=>{x=B.target.result,k()}:(x=[],this.nextTick(k)),this[s].values?b.getAll(v,m<1/0?m:void 0).onsuccess=B=>{E=B.target.result,k()}:(E=[],this.nextTick(k))}y.onabort=()=>{g(y.error||new Error("aborted by user")),g=null},y.oncomplete=()=>{g(null,_),g=null}}_next(m){if(this[n].length>0){const[p,g]=this[n].shift();this.nextTick(m,null,p,g)}else if(this[i])this.nextTick(m);else{let p=Math.min(100,this.limit-this.count);this[u]&&(this[u]=!1,p=1),this._nextv(p,l,(g,v)=>{if(g)return m(g);this[n]=v,this._next(m)})}}_all(m,p){this[u]=!1;const g=this[n].splice(0,this[n].length),v=this.limit-this.count-g.length;if(v<=0)return this.nextTick(p,null,g);this._nextv(v,l,(y,b)=>{if(y)return p(y);g.length>0&&(b=g.concat(b)),p(null,b)})}_seek(m,p){this[u]=!0,this[n]=[],this[i]=!1,this[o]=void 0,this[a]={...this[s]};let g;try{g=e(this[s])}catch{this[i]=!0;return}g!==null&&!g.includes(m)?this[i]=!0:this[s].reverse?this[a].lte=m:this[a].gte=m}}ES.Iterator=f;function d(h){typeof h.commit=="function"&&h.commit()}return ES}var AS,bq;function UFe(){return bq||(bq=1,AS=function(e,r,n,i,s){if(i.limit===0)return e.nextTick(s);const a=e.db.transaction([r],"readwrite"),o=a.objectStore(r);let c=0;a.oncomplete=function(){s()},a.onabort=function(){s(a.error||new Error("aborted by user"))};const u=o.openKeyCursor?"openKeyCursor":"openCursor",l=i.reverse?"prev":"next";o[u](n,l).onsuccess=function(f){const d=f.target.result;d&&(o.delete(d.key).onsuccess=function(){(i.limit<=0||++c<i.limit)&&d.continue()})}}),AS}var wq;function jFe(){if(wq)return uS;wq=1;const{AbstractLevel:t}=_ae(),e=El(),r=LFe(),{fromCallback:n}=u5(),{Iterator:i}=$Fe(),s=Sae(),a=UFe(),o=xae(),c="level-js-",u=Symbol("idb"),l=Symbol("namePrefix"),f=Symbol("location"),d=Symbol("version"),h=Symbol("store"),m=Symbol("onComplete"),p=Symbol("promise");class g extends t{constructor(y,b,_){if(typeof b=="function"||typeof _=="function")throw new e("The levelup-style callback argument has been removed",{code:"LEVEL_LEGACY"});const{prefix:x,version:E,...k}=b||{};if(super({encodings:{view:!0},snapshots:!1,createIfMissing:!1,errorIfExists:!1,seek:!0},k),typeof y!="string")throw new Error("constructor requires a location string argument");this[f]=y,this[l]=x??c,this[d]=parseInt(E||1,10),this[u]=null}get location(){return this[f]}get namePrefix(){return this[l]}get version(){return this[d]}get db(){return this[u]}get type(){return"browser-level"}_open(y,b){const _=indexedDB.open(this[l]+this[f],this[d]);_.onerror=function(){b(_.error||new Error("unknown error"))},_.onsuccess=()=>{this[u]=_.result,b()},_.onupgradeneeded=x=>{const E=x.target.result;E.objectStoreNames.contains(this[f])||E.createObjectStore(this[f])}}[h](y){return this[u].transaction([this[f]],y).objectStore(this[f])}[m](y,b){const _=y.transaction;_.onabort=function(){b(_.error||new Error("aborted by user"))},_.oncomplete=function(){b(null,y.result)}}_get(y,b,_){const x=this[h]("readonly");let E;try{E=x.get(y)}catch(k){return this.nextTick(_,k)}this[m](E,function(k,B){if(k)return _(k);if(B===void 0)return _(new e("Entry not found",{code:"LEVEL_NOT_FOUND"}));_(null,s(B))})}_getMany(y,b,_){const x=this[h]("readonly"),E=y.map(k=>B=>{let D;try{D=x.get(k)}catch(z){return B(z)}D.onsuccess=()=>{const z=D.result;B(null,z===void 0?z:s(z))},D.onerror=z=>{z.stopPropagation(),B(D.error)}});r(E,16,_)}_del(y,b,_){const x=this[h]("readwrite");let E;try{E=x.delete(y)}catch(k){return this.nextTick(_,k)}this[m](E,_)}_put(y,b,_,x){const E=this[h]("readwrite");let k;try{k=E.put(b,y)}catch(B){return this.nextTick(x,B)}this[m](k,x)}_iterator(y){return new i(this,this[f],y)}_batch(y,b,_){const x=this[h]("readwrite"),E=x.transaction;let k=0,B;E.onabort=function(){_(B||E.error||new Error("aborted by user"))},E.oncomplete=function(){_()};function D(){const z=y[k++],U=z.key;let S;try{S=z.type==="del"?x.delete(U):x.put(z.value,U)}catch(T){B=T,E.abort();return}k<y.length?S.onsuccess=D:typeof E.commit=="function"&&E.commit()}D()}_clear(y,b){let _,x;try{_=o(y)}catch{return this.nextTick(b)}if(y.limit>=0)return a(this,this[f],_,y,b);try{const E=this[h]("readwrite");x=_?E.delete(_):E.clear()}catch(E){return this.nextTick(b,E)}this[m](x,b)}_close(y){this[u].close(),this.nextTick(y)}}return g.destroy=function(v,y,b){typeof y=="function"&&(b=y,y=c),b=n(b,p);const _=indexedDB.deleteDatabase(y+v);return _.onsuccess=function(){b()},_.onerror=function(x){b(x)},b[p]},uS.BrowserLevel=g,uS}var _q;function VFe(){return _q||(_q=1,lS.Level=jFe().BrowserLevel),lS}var qFe=VFe();const zFe="./level",HFe="view",pI=async({path:t,valueEncoding:e}={})=>{t=t||zFe,e=e||HFe;const r=new qFe.Level(t,{valueEncoding:e,passive:!0});return await r.open(),{put:async(l,f)=>{await r.put(l,f)},del:async l=>{await r.del(l)},get:async l=>{try{const f=await r.get(l);if(f)return f}catch{}},iterator:async function*({amount:l,reverse:f}={}){const d={limit:l||-1,reverse:f||!1};for await(const[h,m]of r.iterator(d))yield[h,m]},merge:async l=>{},clear:async()=>{await r.clear()},close:async()=>{await r.close()}}},xq=1e6,Eo=async({size:t}={})=>{let e=new aI(t||xq);return{put:async(u,l)=>{e.set(u,l)},del:async u=>{e.remove(u)},get:async u=>e.get(u),iterator:async function*(){for await(const u of e.keys){const l=e.get(u);yield[u,l]}},merge:async u=>{if(u)for await(const[l,f]of u.iterator())e.set(l,f)},clear:async()=>{e=new aI(t||xq)},close:async()=>{}}},WFe=16,CS=1e3,sm=async({ipfs:t,identity:e,address:r,name:n,access:i,directory:s,meta:a,headsStorage:o,entryStorage:c,indexStorage:u,referencesCount:l,syncAutomatically:f,onUpdate:d})=>{s=Ff(s||"./orbitdb",`./${r}/`),a=a||{},l=Number(l)>-1?l:WFe,c=c||await hu(await Eo({size:CS}),await im({ipfs:t,pin:!0})),o=o||await hu(await Eo({size:CS}),await pI({path:Ff(s,"/log/_heads/")})),u=u||await hu(await Eo({size:CS}),await pI({path:Ff(s,"/log/_index/")}));const h=await kFe(e,{logId:r,access:i,entryStorage:c,headsStorage:o,indexStorage:u}),m=new Ns.EventEmitter,p=new Cu({concurrency:1}),g=async x=>{const E=async()=>{const B=await h.append(x,{referencesCount:l});return await _.add(B),d&&await d(h,B),m.emit("update",B),B.hash},k=await p.add(E);return await p.onIdle(),k},v=async x=>{const E=async()=>{const k=await Zc.decode(x);k&&await h.joinEntry(k)&&(d&&await d(h,k),m.emit("update",k))};await p.add(E)},y=async()=>{await _.stop(),await p.onIdle(),await h.close(),i&&i.close&&await i.close(),m.emit("close")},b=async()=>{await p.onIdle(),await h.clear(),i&&i.drop&&await i.drop(),m.emit("drop")},_=await YDe({ipfs:t,log:h,events:m,onSynced:v,start:f});return{address:r,name:n,identity:e,meta:a,close:y,drop:b,addOperation:g,log:h,sync:_,peers:_.peers,events:m,access:i}},Eae="documents",GFe={indexBy:"_id"},kae=({indexBy:t}=GFe)=>async({ipfs:e,identity:r,address:n,name:i,access:s,directory:a,meta:o,headsStorage:c,entryStorage:u,indexStorage:l,referencesCount:f,syncAutomatically:d,onUpdate:h})=>{const m=await sm({ipfs:e,identity:r,address:n,name:i,access:s,directory:a,meta:o,headsStorage:c,entryStorage:u,indexStorage:l,referencesCount:f,syncAutomatically:d}),{addOperation:p,log:g}=m,v=async k=>{const B=k[t];if(!B)throw new Error(`The provided document doesn't contain field '${t}'`);return p({op:"PUT",key:B,value:k})},y=async k=>{if(!await b(k))throw new Error(`No document with key '${k}' in the database`);return p({op:"DEL",key:k,value:null})},b=async k=>{for await(const B of x())if(k===B.key)return B},_=async k=>{const B=[];for await(const D of x())k(D.value)&&B.push(D.value);return B},x=async function*({amount:k}={}){const B={};let D=0;for await(const z of g.iterator()){const{op:U,key:S,value:T}=z.payload;if(U==="PUT"&&!B[S]?(B[S]=!0,D++,yield{hash:z.hash,key:S,value:T}):U==="DEL"&&!B[S]&&(B[S]=!0),D>=k)break}};return{...m,type:Eae,put:v,del:y,get:b,iterator:x,query:_,indexBy:t,all:async()=>{const k=[];for await(const B of x())k.unshift(B);return k}}};kae.type=Eae;const Tae="events",Aae=()=>async({ipfs:t,identity:e,address:r,name:n,access:i,directory:s,meta:a,headsStorage:o,entryStorage:c,indexStorage:u,referencesCount:l,syncAutomatically:f,onUpdate:d})=>{const h=await sm({ipfs:t,identity:e,address:r,name:n,access:i,directory:s,meta:a,headsStorage:o,entryStorage:c,indexStorage:u,referencesCount:l,syncAutomatically:f,onUpdate:d}),{addOperation:m,log:p}=h,g=async _=>m({op:"ADD",key:null,value:_}),v=async _=>(await p.get(_)).payload.value,y=async function*({gt:_,gte:x,lt:E,lte:k,amount:B}={}){const D=p.iterator({gt:_,gte:x,lt:E,lte:k,amount:B});for await(const z of D){const U=z.hash,S=z.payload.value;yield{hash:U,value:S}}};return{...h,type:Tae,add:g,get:v,iterator:y,all:async()=>{const _=[];for await(const x of y())_.unshift(x);return _}}};Aae.type=Tae;const Cae="keyvalue",Iae=()=>async({ipfs:t,identity:e,address:r,name:n,access:i,directory:s,meta:a,headsStorage:o,entryStorage:c,indexStorage:u,referencesCount:l,syncAutomatically:f,onUpdate:d})=>{const h=await sm({ipfs:t,identity:e,address:r,name:n,access:i,directory:s,meta:a,headsStorage:o,entryStorage:c,indexStorage:u,referencesCount:l,syncAutomatically:f,onUpdate:d}),{addOperation:m,log:p}=h,g=async(x,E)=>m({op:"PUT",key:x,value:E}),v=async x=>m({op:"DEL",key:x,value:null}),y=async x=>{for await(const E of p.traverse()){const{op:k,key:B,value:D}=E.payload;if(k==="PUT"&&B===x)return D;if(k==="DEL"&&B===x)return}},b=async function*({amount:x}={}){const E={};let k=0;for await(const B of p.traverse()){const{op:D,key:z,value:U}=B.payload;if(D==="PUT"&&!E[z]){E[z]=!0,k++;const S=B.hash;yield{key:z,value:U,hash:S}}else D==="DEL"&&!E[z]&&(E[z]=!0);if(k>=x)break}};return{...h,type:Cae,put:g,set:g,del:v,get:y,iterator:b,all:async()=>{const x=[];for await(const E of b())x.unshift(E);return x}}};Iae.type=Cae;const mI={},am=t=>{if(!t.type)throw new Error("Database type does not contain required field 'type'.");mI[t.type]=t},KFe=t=>{if(!t)throw new Error("Type not specified");if(!mI[t])throw new Error(`Unsupported database type: '${t}'`);return mI[t]};am(Aae);am(kae);am(Iae);const Pae=0,XFe="identity",Rae=Lp;function YFe(t){return wu(Pae,Rae(t))}const Kf={code:Pae,name:XFe,encode:Rae,digest:YFe};function Tr(t,e){if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0}function D1(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function ZFe(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function f5(t,...e){if(!ZFe(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function d5(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");D1(t.outputLen),D1(t.blockLen)}function N4(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function JFe(t,e){f5(t);const r=e.outputLen;if(t.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}const G0=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Ig(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function Lc(t,e){return t<<32-e|t>>>e}function IS(t,e){return t<<e|t>>>32-e>>>0}const QFe=async()=>{};async function eLe(t,e,r){let n=Date.now();for(let i=0;i<t;i++){r(i);const s=Date.now()-n;s>=0&&s<e||(await QFe(),n+=s)}}function tLe(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function Lh(t){return typeof t=="string"&&(t=tLe(t)),f5(t),t}function rLe(...t){let e=0;for(let n=0;n<t.length;n++){const i=t[n];f5(i),e+=i.length}const r=new Uint8Array(e);for(let n=0,i=0;n<t.length;n++){const s=t[n];r.set(s,i),i+=s.length}return r}class Oae{clone(){return this._cloneInto()}}function nLe(t,e){if(e!==void 0&&{}.toString.call(e)!=="[object Object]")throw new Error("Options should be object or undefined");return Object.assign(t,e)}function mB(t){const e=n=>t().update(Lh(n)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function zy(t=32){if(G0&&typeof G0.getRandomValues=="function")return G0.getRandomValues(new Uint8Array(t));if(G0&&typeof G0.randomBytes=="function")return G0.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}function iLe(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);const i=BigInt(32),s=BigInt(4294967295),a=Number(r>>i&s),o=Number(r&s),c=n?4:0,u=n?0:4;t.setUint32(e+c,a,n),t.setUint32(e+u,o,n)}function Bae(t,e,r){return t&e^~t&r}function Dae(t,e,r){return t&e^t&r^e&r}class gB extends Oae{constructor(e,r,n,i){super(),this.blockLen=e,this.outputLen=r,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=Ig(this.buffer)}update(e){N4(this);const{view:r,buffer:n,blockLen:i}=this;e=Lh(e);const s=e.length;for(let a=0;a<s;){const o=Math.min(i-this.pos,s-a);if(o===i){const c=Ig(e);for(;i<=s-a;a+=i)this.process(c,a);continue}n.set(e.subarray(a,a+o),this.pos),this.pos+=o,a+=o,this.pos===i&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){N4(this),JFe(e,this),this.finished=!0;const{buffer:r,view:n,blockLen:i,isLE:s}=this;let{pos:a}=this;r[a++]=128,this.buffer.subarray(a).fill(0),this.padOffset>i-a&&(this.process(n,0),a=0);for(let f=a;f<i;f++)r[f]=0;iLe(n,i-8,BigInt(this.length*8),s),this.process(n,0);const o=Ig(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=c/4,l=this.get();if(u>l.length)throw new Error("_sha2: outputLen bigger than state");for(let f=0;f<u;f++)o.setUint32(4*f,l[f],s)}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:r,buffer:n,length:i,finished:s,destroyed:a,pos:o}=this;return e.length=i,e.pos=o,e.finished=s,e.destroyed=a,i%r&&e.buffer.set(n),e}}const sb=BigInt(2**32-1),gI=BigInt(32);function Mae(t,e=!1){return e?{h:Number(t&sb),l:Number(t>>gI&sb)}:{h:Number(t>>gI&sb)|0,l:Number(t&sb)|0}}function sLe(t,e=!1){let r=new Uint32Array(t.length),n=new Uint32Array(t.length);for(let i=0;i<t.length;i++){const{h:s,l:a}=Mae(t[i],e);[r[i],n[i]]=[s,a]}return[r,n]}const aLe=(t,e)=>BigInt(t>>>0)<<gI|BigInt(e>>>0),oLe=(t,e,r)=>t>>>r,cLe=(t,e,r)=>t<<32-r|e>>>r,lLe=(t,e,r)=>t>>>r|e<<32-r,uLe=(t,e,r)=>t<<32-r|e>>>r,fLe=(t,e,r)=>t<<64-r|e>>>r-32,dLe=(t,e,r)=>t>>>r-32|e<<64-r,hLe=(t,e)=>e,pLe=(t,e)=>t,mLe=(t,e,r)=>t<<r|e>>>32-r,gLe=(t,e,r)=>e<<r|t>>>32-r,vLe=(t,e,r)=>e<<r-32|t>>>64-r,yLe=(t,e,r)=>t<<r-32|e>>>64-r;function bLe(t,e,r,n){const i=(e>>>0)+(n>>>0);return{h:t+r+(i/2**32|0)|0,l:i|0}}const wLe=(t,e,r)=>(t>>>0)+(e>>>0)+(r>>>0),_Le=(t,e,r,n)=>e+r+n+(t/2**32|0)|0,xLe=(t,e,r,n)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0),SLe=(t,e,r,n,i)=>e+r+n+i+(t/2**32|0)|0,ELe=(t,e,r,n,i)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0)+(i>>>0),kLe=(t,e,r,n,i,s)=>e+r+n+i+s+(t/2**32|0)|0,ir={fromBig:Mae,split:sLe,toBig:aLe,shrSH:oLe,shrSL:cLe,rotrSH:lLe,rotrSL:uLe,rotrBH:fLe,rotrBL:dLe,rotr32H:hLe,rotr32L:pLe,rotlSH:mLe,rotlSL:gLe,rotlBH:vLe,rotlBL:yLe,add:bLe,add3L:wLe,add3H:_Le,add4L:xLe,add4H:SLe,add5H:kLe,add5L:ELe},[TLe,ALe]=ir.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),Qu=new Uint32Array(80),ef=new Uint32Array(80);class CLe extends gB{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:r,Bh:n,Bl:i,Ch:s,Cl:a,Dh:o,Dl:c,Eh:u,El:l,Fh:f,Fl:d,Gh:h,Gl:m,Hh:p,Hl:g}=this;return[e,r,n,i,s,a,o,c,u,l,f,d,h,m,p,g]}set(e,r,n,i,s,a,o,c,u,l,f,d,h,m,p,g){this.Ah=e|0,this.Al=r|0,this.Bh=n|0,this.Bl=i|0,this.Ch=s|0,this.Cl=a|0,this.Dh=o|0,this.Dl=c|0,this.Eh=u|0,this.El=l|0,this.Fh=f|0,this.Fl=d|0,this.Gh=h|0,this.Gl=m|0,this.Hh=p|0,this.Hl=g|0}process(e,r){for(let b=0;b<16;b++,r+=4)Qu[b]=e.getUint32(r),ef[b]=e.getUint32(r+=4);for(let b=16;b<80;b++){const _=Qu[b-15]|0,x=ef[b-15]|0,E=ir.rotrSH(_,x,1)^ir.rotrSH(_,x,8)^ir.shrSH(_,x,7),k=ir.rotrSL(_,x,1)^ir.rotrSL(_,x,8)^ir.shrSL(_,x,7),B=Qu[b-2]|0,D=ef[b-2]|0,z=ir.rotrSH(B,D,19)^ir.rotrBH(B,D,61)^ir.shrSH(B,D,6),U=ir.rotrSL(B,D,19)^ir.rotrBL(B,D,61)^ir.shrSL(B,D,6),S=ir.add4L(k,U,ef[b-7],ef[b-16]),T=ir.add4H(S,E,z,Qu[b-7],Qu[b-16]);Qu[b]=T|0,ef[b]=S|0}let{Ah:n,Al:i,Bh:s,Bl:a,Ch:o,Cl:c,Dh:u,Dl:l,Eh:f,El:d,Fh:h,Fl:m,Gh:p,Gl:g,Hh:v,Hl:y}=this;for(let b=0;b<80;b++){const _=ir.rotrSH(f,d,14)^ir.rotrSH(f,d,18)^ir.rotrBH(f,d,41),x=ir.rotrSL(f,d,14)^ir.rotrSL(f,d,18)^ir.rotrBL(f,d,41),E=f&h^~f&p,k=d&m^~d&g,B=ir.add5L(y,x,k,ALe[b],ef[b]),D=ir.add5H(B,v,_,E,TLe[b],Qu[b]),z=B|0,U=ir.rotrSH(n,i,28)^ir.rotrBH(n,i,34)^ir.rotrBH(n,i,39),S=ir.rotrSL(n,i,28)^ir.rotrBL(n,i,34)^ir.rotrBL(n,i,39),T=n&s^n&o^s&o,w=i&a^i&c^a&c;v=p|0,y=g|0,p=h|0,g=m|0,h=f|0,m=d|0,{h:f,l:d}=ir.add(u|0,l|0,D|0,z|0),u=o|0,l=c|0,o=s|0,c=a|0,s=n|0,a=i|0;const A=ir.add3L(z,S,w);n=ir.add3H(A,D,U,T),i=A|0}({h:n,l:i}=ir.add(this.Ah|0,this.Al|0,n|0,i|0)),{h:s,l:a}=ir.add(this.Bh|0,this.Bl|0,s|0,a|0),{h:o,l:c}=ir.add(this.Ch|0,this.Cl|0,o|0,c|0),{h:u,l}=ir.add(this.Dh|0,this.Dl|0,u|0,l|0),{h:f,l:d}=ir.add(this.Eh|0,this.El|0,f|0,d|0),{h,l:m}=ir.add(this.Fh|0,this.Fl|0,h|0,m|0),{h:p,l:g}=ir.add(this.Gh|0,this.Gl|0,p|0,g|0),{h:v,l:y}=ir.add(this.Hh|0,this.Hl|0,v|0,y|0),this.set(n,i,s,a,o,c,u,l,f,d,h,m,p,g,v,y)}roundClean(){Qu.fill(0),ef.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const h5=mB(()=>new CLe);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const p5=BigInt(0),m5=BigInt(1),ILe=BigInt(2);function $h(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Hy(t){if(!$h(t))throw new Error("Uint8Array expected")}function pu(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}const PLe=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Uh(t){Hy(t);let e="";for(let r=0;r<t.length;r++)e+=PLe[t[r]];return e}function b1(t){const e=t.toString(16);return e.length&1?"0"+e:e}function vB(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?p5:BigInt("0x"+t)}const Nl={_0:48,_9:57,A:65,F:70,a:97,f:102};function Sq(t){if(t>=Nl._0&&t<=Nl._9)return t-Nl._0;if(t>=Nl.A&&t<=Nl.F)return t-(Nl.A-10);if(t>=Nl.a&&t<=Nl.f)return t-(Nl.a-10)}function ap(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,r=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(r);for(let i=0,s=0;i<r;i++,s+=2){const a=Sq(t.charCodeAt(s)),o=Sq(t.charCodeAt(s+1));if(a===void 0||o===void 0){const c=t[s]+t[s+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+s)}n[i]=a*16+o}return n}function gh(t){return vB(Uh(t))}function Lf(t){return Hy(t),vB(Uh(Uint8Array.from(t).reverse()))}function op(t,e){return ap(t.toString(16).padStart(e*2,"0"))}function cp(t,e){return op(t,e).reverse()}function RLe(t){return ap(b1(t))}function Qn(t,e,r){let n;if(typeof e=="string")try{n=ap(e)}catch(s){throw new Error(t+" must be hex string or Uint8Array, cause: "+s)}else if($h(e))n=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const i=n.length;if(typeof r=="number"&&i!==r)throw new Error(t+" of length "+r+" expected, got "+i);return n}function jh(...t){let e=0;for(let n=0;n<t.length;n++){const i=t[n];Hy(i),e+=i.length}const r=new Uint8Array(e);for(let n=0,i=0;n<t.length;n++){const s=t[n];r.set(s,i),i+=s.length}return r}function OLe(t,e){if(t.length!==e.length)return!1;let r=0;for(let n=0;n<t.length;n++)r|=t[n]^e[n];return r===0}function BLe(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}const PS=t=>typeof t=="bigint"&&p5<=t;function g5(t,e,r){return PS(t)&&PS(e)&&PS(r)&&e<=t&&t<r}function ga(t,e,r,n){if(!g5(e,r,n))throw new Error("expected valid "+t+": "+r+" <= n < "+n+", got "+e)}function Nae(t){let e;for(e=0;t>p5;t>>=m5,e+=1);return e}function DLe(t,e){return t>>BigInt(e)&m5}function MLe(t,e,r){return t|(r?m5:p5)<<BigInt(e)}const yB=t=>(ILe<<BigInt(t-1))-m5,RS=t=>new Uint8Array(t),Eq=t=>Uint8Array.from(t);function Fae(t,e,r){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof r!="function")throw new Error("hmacFn must be a function");let n=RS(t),i=RS(t),s=0;const a=()=>{n.fill(1),i.fill(0),s=0},o=(...f)=>r(i,n,...f),c=(f=RS())=>{i=o(Eq([0]),f),n=o(),f.length!==0&&(i=o(Eq([1]),f),n=o())},u=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let f=0;const d=[];for(;f<e;){n=o();const h=n.slice();d.push(h),f+=n.length}return jh(...d)};return(f,d)=>{a(),c(f);let h;for(;!(h=d(u()));)c();return a(),h}}const NLe={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||$h(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function A0(t,e,r={}){const n=(i,s,a)=>{const o=NLe[s];if(typeof o!="function")throw new Error("invalid validator function");const c=t[i];if(!(a&&c===void 0)&&!o(c,t))throw new Error("param "+String(i)+" is invalid. Expected "+s+", got "+c)};for(const[i,s]of Object.entries(e))n(i,s,!1);for(const[i,s]of Object.entries(r))n(i,s,!0);return t}const FLe=()=>{throw new Error("not implemented")};function xv(t){const e=new WeakMap;return(r,...n)=>{const i=e.get(r);if(i!==void 0)return i;const s=t(r,...n);return e.set(r,s),s}}const LLe=Object.freeze(Object.defineProperty({__proto__:null,aInRange:ga,abool:pu,abytes:Hy,bitGet:DLe,bitLen:Nae,bitMask:yB,bitSet:MLe,bytesToHex:Uh,bytesToNumberBE:gh,bytesToNumberLE:Lf,concatBytes:jh,createHmacDrbg:Fae,ensureBytes:Qn,equalBytes:OLe,hexToBytes:ap,hexToNumber:vB,inRange:g5,isBytes:$h,memoized:xv,notImplemented:FLe,numberToBytesBE:op,numberToBytesLE:cp,numberToHexUnpadded:b1,numberToVarBytesBE:RLe,utf8ToBytes:BLe,validateObject:A0},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Xi=BigInt(0),Xn=BigInt(1),qd=BigInt(2),$Le=BigInt(3),vI=BigInt(4),kq=BigInt(5),Tq=BigInt(8);function En(t,e){const r=t%e;return r>=Xi?r:e+r}function Lae(t,e,r){if(e<Xi)throw new Error("invalid exponent, negatives unsupported");if(r<=Xi)throw new Error("invalid modulus");if(r===Xn)return Xi;let n=Xn;for(;e>Xi;)e&Xn&&(n=n*t%r),t=t*t%r,e>>=Xn;return n}function Gn(t,e,r){let n=t;for(;e-- >Xi;)n*=n,n%=r;return n}function yI(t,e){if(t===Xi)throw new Error("invert: expected non-zero number");if(e<=Xi)throw new Error("invert: expected positive modulus, got "+e);let r=En(t,e),n=e,i=Xi,s=Xn;for(;r!==Xi;){const o=n/r,c=n%r,u=i-s*o;n=r,r=c,i=s,s=u}if(n!==Xn)throw new Error("invert: does not exist");return En(i,e)}function ULe(t){const e=(t-Xn)/qd;let r,n,i;for(r=t-Xn,n=0;r%qd===Xi;r/=qd,n++);for(i=qd;i<t&&Lae(i,e,t)!==t-Xn;i++)if(i>1e3)throw new Error("Cannot find square root: likely non-prime P");if(n===1){const a=(t+Xn)/vI;return function(c,u){const l=c.pow(u,a);if(!c.eql(c.sqr(l),u))throw new Error("Cannot find square root");return l}}const s=(r+Xn)/qd;return function(o,c){if(o.pow(c,e)===o.neg(o.ONE))throw new Error("Cannot find square root");let u=n,l=o.pow(o.mul(o.ONE,i),r),f=o.pow(c,s),d=o.pow(c,r);for(;!o.eql(d,o.ONE);){if(o.eql(d,o.ZERO))return o.ZERO;let h=1;for(let p=o.sqr(d);h<u&&!o.eql(p,o.ONE);h++)p=o.sqr(p);const m=o.pow(l,Xn<<BigInt(u-h-1));l=o.sqr(m),f=o.mul(f,m),d=o.mul(d,l),u=h}return f}}function jLe(t){if(t%vI===$Le){const e=(t+Xn)/vI;return function(n,i){const s=n.pow(i,e);if(!n.eql(n.sqr(s),i))throw new Error("Cannot find square root");return s}}if(t%Tq===kq){const e=(t-kq)/Tq;return function(n,i){const s=n.mul(i,qd),a=n.pow(s,e),o=n.mul(i,a),c=n.mul(n.mul(o,qd),a),u=n.mul(o,n.sub(c,n.ONE));if(!n.eql(n.sqr(u),i))throw new Error("Cannot find square root");return u}}return ULe(t)}const VLe=(t,e)=>(En(t,e)&Xn)===Xn,qLe=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function zLe(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},r=qLe.reduce((n,i)=>(n[i]="function",n),e);return A0(t,r)}function HLe(t,e,r){if(r<Xi)throw new Error("invalid exponent, negatives unsupported");if(r===Xi)return t.ONE;if(r===Xn)return e;let n=t.ONE,i=e;for(;r>Xi;)r&Xn&&(n=t.mul(n,i)),i=t.sqr(i),r>>=Xn;return n}function WLe(t,e){const r=new Array(e.length),n=e.reduce((s,a,o)=>t.is0(a)?s:(r[o]=s,t.mul(s,a)),t.ONE),i=t.inv(n);return e.reduceRight((s,a,o)=>t.is0(a)?s:(r[o]=t.mul(s,r[o]),t.mul(s,a)),i),r}function $ae(t,e){const r=e!==void 0?e:t.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function v5(t,e,r=!1,n={}){if(t<=Xi)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:i,nByteLength:s}=$ae(t,e);if(s>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let a;const o=Object.freeze({ORDER:t,isLE:r,BITS:i,BYTES:s,MASK:yB(i),ZERO:Xi,ONE:Xn,create:c=>En(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return Xi<=c&&c<t},is0:c=>c===Xi,isOdd:c=>(c&Xn)===Xn,neg:c=>En(-c,t),eql:(c,u)=>c===u,sqr:c=>En(c*c,t),add:(c,u)=>En(c+u,t),sub:(c,u)=>En(c-u,t),mul:(c,u)=>En(c*u,t),pow:(c,u)=>HLe(o,c,u),div:(c,u)=>En(c*yI(u,t),t),sqrN:c=>c*c,addN:(c,u)=>c+u,subN:(c,u)=>c-u,mulN:(c,u)=>c*u,inv:c=>yI(c,t),sqrt:n.sqrt||(c=>(a||(a=jLe(t)),a(o,c))),invertBatch:c=>WLe(o,c),cmov:(c,u,l)=>l?u:c,toBytes:c=>r?cp(c,s):op(c,s),fromBytes:c=>{if(c.length!==s)throw new Error("Field.fromBytes: expected "+s+" bytes, got "+c.length);return r?Lf(c):gh(c)}});return Object.freeze(o)}function Uae(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function jae(t){const e=Uae(t);return e+Math.ceil(e/2)}function GLe(t,e,r=!1){const n=t.length,i=Uae(e),s=jae(e);if(n<16||n<s||n>1024)throw new Error("expected "+s+"-1024 bytes of input, got "+n);const a=r?Lf(t):gh(t),o=En(a,e-Xn)+Xn;return r?cp(o,i):op(o,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Aq=BigInt(0),ab=BigInt(1);function OS(t,e){const r=e.negate();return t?r:e}function Vae(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function BS(t,e){Vae(t,e);const r=Math.ceil(e/t)+1,n=2**(t-1);return{windows:r,windowSize:n}}function KLe(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((r,n)=>{if(!(r instanceof e))throw new Error("invalid point at index "+n)})}function XLe(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((r,n)=>{if(!e.isValid(r))throw new Error("invalid scalar at index "+n)})}const DS=new WeakMap,qae=new WeakMap;function MS(t){return qae.get(t)||1}function zae(t,e){return{constTimeNegate:OS,hasPrecomputes(r){return MS(r)!==1},unsafeLadder(r,n,i=t.ZERO){let s=r;for(;n>Aq;)n&ab&&(i=i.add(s)),s=s.double(),n>>=ab;return i},precomputeWindow(r,n){const{windows:i,windowSize:s}=BS(n,e),a=[];let o=r,c=o;for(let u=0;u<i;u++){c=o,a.push(c);for(let l=1;l<s;l++)c=c.add(o),a.push(c);o=c.double()}return a},wNAF(r,n,i){const{windows:s,windowSize:a}=BS(r,e);let o=t.ZERO,c=t.BASE;const u=BigInt(2**r-1),l=2**r,f=BigInt(r);for(let d=0;d<s;d++){const h=d*a;let m=Number(i&u);i>>=f,m>a&&(m-=l,i+=ab);const p=h,g=h+Math.abs(m)-1,v=d%2!==0,y=m<0;m===0?c=c.add(OS(v,n[p])):o=o.add(OS(y,n[g]))}return{p:o,f:c}},wNAFUnsafe(r,n,i,s=t.ZERO){const{windows:a,windowSize:o}=BS(r,e),c=BigInt(2**r-1),u=2**r,l=BigInt(r);for(let f=0;f<a;f++){const d=f*o;if(i===Aq)break;let h=Number(i&c);if(i>>=l,h>o&&(h-=u,i+=ab),h===0)continue;let m=n[d+Math.abs(h)-1];h<0&&(m=m.negate()),s=s.add(m)}return s},getPrecomputes(r,n,i){let s=DS.get(n);return s||(s=this.precomputeWindow(n,r),r!==1&&DS.set(n,i(s))),s},wNAFCached(r,n,i){const s=MS(r);return this.wNAF(s,this.getPrecomputes(s,r,i),n)},wNAFCachedUnsafe(r,n,i,s){const a=MS(r);return a===1?this.unsafeLadder(r,n,s):this.wNAFUnsafe(a,this.getPrecomputes(a,r,i),n,s)},setWindowSize(r,n){Vae(n,e),qae.set(r,n),DS.delete(r)}}}function Hae(t,e,r,n){if(KLe(r,t),XLe(n,e),r.length!==n.length)throw new Error("arrays of points and scalars must have equal length");const i=t.ZERO,s=Nae(BigInt(r.length)),a=s>12?s-3:s>4?s-2:s?2:1,o=(1<<a)-1,c=new Array(o+1).fill(i),u=Math.floor((e.BITS-1)/a)*a;let l=i;for(let f=u;f>=0;f-=a){c.fill(i);for(let h=0;h<n.length;h++){const m=n[h],p=Number(m>>BigInt(f)&BigInt(o));c[p]=c[p].add(r[h])}let d=i;for(let h=c.length-1,m=i;h>0;h--)m=m.add(c[h]),d=d.add(m);if(l=l.add(d),f!==0)for(let h=0;h<a;h++)l=l.double()}return l}function bB(t){return zLe(t.Fp),A0(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...$ae(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Uo=BigInt(0),oa=BigInt(1),ob=BigInt(2),YLe=BigInt(8),ZLe={zip215:!0};function JLe(t){const e=bB(t);return A0(t,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function QLe(t){const e=JLe(t),{Fp:r,n,prehash:i,hash:s,randomBytes:a,nByteLength:o,h:c}=e,u=ob<<BigInt(o*8)-oa,l=r.create,f=v5(e.n,e.nBitLength),d=e.uvRatio||((F,P)=>{try{return{isValid:!0,value:r.sqrt(F*r.inv(P))}}catch{return{isValid:!1,value:Uo}}}),h=e.adjustScalarBytes||(F=>F),m=e.domain||((F,P,O)=>{if(pu("phflag",O),P.length||O)throw new Error("Contexts/pre-hash are not supported");return F});function p(F,P){ga("coordinate "+F,P,Uo,u)}function g(F){if(!(F instanceof b))throw new Error("ExtendedPoint expected")}const v=xv((F,P)=>{const{ex:O,ey:R,ez:I}=F,C=F.is0();P==null&&(P=C?YLe:r.inv(I));const M=l(O*P),L=l(R*P),N=l(I*P);if(C)return{x:Uo,y:oa};if(N!==oa)throw new Error("invZ was invalid");return{x:M,y:L}}),y=xv(F=>{const{a:P,d:O}=e;if(F.is0())throw new Error("bad point: ZERO");const{ex:R,ey:I,ez:C,et:M}=F,L=l(R*R),N=l(I*I),H=l(C*C),W=l(H*H),q=l(L*P),G=l(H*l(q+N)),Y=l(W+l(O*l(L*N)));if(G!==Y)throw new Error("bad point: equation left != right (1)");const te=l(R*I),Q=l(C*M);if(te!==Q)throw new Error("bad point: equation left != right (2)");return!0});class b{constructor(P,O,R,I){this.ex=P,this.ey=O,this.ez=R,this.et=I,p("x",P),p("y",O),p("z",R),p("t",I),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(P){if(P instanceof b)throw new Error("extended point not allowed");const{x:O,y:R}=P||{};return p("x",O),p("y",R),new b(O,R,oa,l(O*R))}static normalizeZ(P){const O=r.invertBatch(P.map(R=>R.ez));return P.map((R,I)=>R.toAffine(O[I])).map(b.fromAffine)}static msm(P,O){return Hae(b,f,P,O)}_setWindowSize(P){E.setWindowSize(this,P)}assertValidity(){y(this)}equals(P){g(P);const{ex:O,ey:R,ez:I}=this,{ex:C,ey:M,ez:L}=P,N=l(O*L),H=l(C*I),W=l(R*L),q=l(M*I);return N===H&&W===q}is0(){return this.equals(b.ZERO)}negate(){return new b(l(-this.ex),this.ey,this.ez,l(-this.et))}double(){const{a:P}=e,{ex:O,ey:R,ez:I}=this,C=l(O*O),M=l(R*R),L=l(ob*l(I*I)),N=l(P*C),H=O+R,W=l(l(H*H)-C-M),q=N+M,G=q-L,Y=N-M,te=l(W*G),Q=l(q*Y),j=l(W*Y),Z=l(G*q);return new b(te,Q,Z,j)}add(P){g(P);const{a:O,d:R}=e,{ex:I,ey:C,ez:M,et:L}=this,{ex:N,ey:H,ez:W,et:q}=P;if(O===BigInt(-1)){const le=l((C-I)*(H+N)),ue=l((C+I)*(H-N)),me=l(ue-le);if(me===Uo)return this.double();const be=l(M*ob*q),_e=l(L*ob*W),xe=_e+be,Be=ue+le,re=_e-be,K=l(xe*me),X=l(Be*re),ce=l(xe*re),ye=l(me*Be);return new b(K,X,ye,ce)}const G=l(I*N),Y=l(C*H),te=l(L*R*q),Q=l(M*W),j=l((I+C)*(N+H)-G-Y),Z=Q-te,V=Q+te,ne=l(Y-O*G),se=l(j*Z),J=l(V*ne),ee=l(j*ne),ie=l(Z*V);return new b(se,J,ie,ee)}subtract(P){return this.add(P.negate())}wNAF(P){return E.wNAFCached(this,P,b.normalizeZ)}multiply(P){const O=P;ga("scalar",O,oa,n);const{p:R,f:I}=this.wNAF(O);return b.normalizeZ([R,I])[0]}multiplyUnsafe(P,O=b.ZERO){const R=P;return ga("scalar",R,Uo,n),R===Uo?x:this.is0()||R===oa?this:E.wNAFCachedUnsafe(this,R,b.normalizeZ,O)}isSmallOrder(){return this.multiplyUnsafe(c).is0()}isTorsionFree(){return E.unsafeLadder(this,n).is0()}toAffine(P){return v(this,P)}clearCofactor(){const{h:P}=e;return P===oa?this:this.multiplyUnsafe(P)}static fromHex(P,O=!1){const{d:R,a:I}=e,C=r.BYTES;P=Qn("pointHex",P,C),pu("zip215",O);const M=P.slice(),L=P[C-1];M[C-1]=L&-129;const N=Lf(M),H=O?u:r.ORDER;ga("pointHex.y",N,Uo,H);const W=l(N*N),q=l(W-oa),G=l(R*W-I);let{isValid:Y,value:te}=d(q,G);if(!Y)throw new Error("Point.fromHex: invalid y coordinate");const Q=(te&oa)===oa,j=(L&128)!==0;if(!O&&te===Uo&&j)throw new Error("Point.fromHex: x=0 and x_0=1");return j!==Q&&(te=l(-te)),b.fromAffine({x:te,y:N})}static fromPrivateKey(P){return D(P).point}toRawBytes(){const{x:P,y:O}=this.toAffine(),R=cp(O,r.BYTES);return R[R.length-1]|=P&oa?128:0,R}toHex(){return Uh(this.toRawBytes())}}b.BASE=new b(e.Gx,e.Gy,oa,l(e.Gx*e.Gy)),b.ZERO=new b(Uo,oa,oa,Uo);const{BASE:_,ZERO:x}=b,E=zae(b,o*8);function k(F){return En(F,n)}function B(F){return k(Lf(F))}function D(F){const P=r.BYTES;F=Qn("private key",F,P);const O=Qn("hashed private key",s(F),2*P),R=h(O.slice(0,P)),I=O.slice(P,2*P),C=B(R),M=_.multiply(C),L=M.toRawBytes();return{head:R,prefix:I,scalar:C,point:M,pointBytes:L}}function z(F){return D(F).pointBytes}function U(F=new Uint8Array,...P){const O=jh(...P);return B(s(m(O,Qn("context",F),!!i)))}function S(F,P,O={}){F=Qn("message",F),i&&(F=i(F));const{prefix:R,scalar:I,pointBytes:C}=D(P),M=U(O.context,R,F),L=_.multiply(M).toRawBytes(),N=U(O.context,L,C,F),H=k(M+N*I);ga("signature.s",H,Uo,n);const W=jh(L,cp(H,r.BYTES));return Qn("result",W,r.BYTES*2)}const T=ZLe;function w(F,P,O,R=T){const{context:I,zip215:C}=R,M=r.BYTES;F=Qn("signature",F,2*M),P=Qn("message",P),O=Qn("publicKey",O,M),C!==void 0&&pu("zip215",C),i&&(P=i(P));const L=Lf(F.slice(M,2*M));let N,H,W;try{N=b.fromHex(O,C),H=b.fromHex(F.slice(0,M),C),W=_.multiplyUnsafe(L)}catch{return!1}if(!C&&N.isSmallOrder())return!1;const q=U(I,H.toRawBytes(),N.toRawBytes(),P);return H.add(N.multiplyUnsafe(q)).subtract(W).clearCofactor().equals(b.ZERO)}return _._setWindowSize(8),{CURVE:e,getPublicKey:z,sign:S,verify:w,ExtendedPoint:b,utils:{getExtendedPublicKey:D,randomPrivateKey:()=>a(r.BYTES),precompute(F=8,P=b.BASE){return P._setWindowSize(F),P.multiply(BigInt(3)),P}}}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const K0=BigInt(0),NS=BigInt(1);function e$e(t){return A0(t,{a:"bigint"},{montgomeryBits:"isSafeInteger",nByteLength:"isSafeInteger",adjustScalarBytes:"function",domain:"function",powPminus2:"function",Gu:"bigint"}),Object.freeze({...t})}function t$e(t){const e=e$e(t),{P:r}=e,n=y=>En(y,r),i=e.montgomeryBits,s=Math.ceil(i/8),a=e.nByteLength,o=e.adjustScalarBytes||(y=>y),c=e.powPminus2||(y=>Lae(y,r-BigInt(2),r));function u(y,b,_){const x=n(y*(b-_));return b=n(b-x),_=n(_+x),[b,_]}const l=(e.a-BigInt(2))/BigInt(4);function f(y,b){ga("u",y,K0,r),ga("scalar",b,K0,r);const _=b,x=y;let E=NS,k=K0,B=y,D=NS,z=K0,U;for(let T=BigInt(i-1);T>=K0;T--){const w=_>>T&NS;z^=w,U=u(z,E,B),E=U[0],B=U[1],U=u(z,k,D),k=U[0],D=U[1],z=w;const A=E+k,F=n(A*A),P=E-k,O=n(P*P),R=F-O,I=B+D,C=B-D,M=n(C*A),L=n(I*P),N=M+L,H=M-L;B=n(N*N),D=n(x*n(H*H)),E=n(F*O),k=n(R*(F+n(l*R)))}U=u(z,E,B),E=U[0],B=U[1],U=u(z,k,D),k=U[0],D=U[1];const S=c(k);return n(E*S)}function d(y){return cp(n(y),s)}function h(y){const b=Qn("u coordinate",y,s);return a===32&&(b[31]&=127),Lf(b)}function m(y){const b=Qn("scalar",y),_=b.length;if(_!==s&&_!==a){let x=""+s+" or "+a;throw new Error("invalid scalar, expected "+x+" bytes, got "+_)}return Lf(o(b))}function p(y,b){const _=h(b),x=m(y),E=f(_,x);if(E===K0)throw new Error("invalid private or public key received");return d(E)}const g=d(e.Gu);function v(y){return p(y,g)}return{scalarMult:p,scalarMultBase:v,getSharedSecret:(y,b)=>p(y,b),getPublicKey:y=>v(y),utils:{randomPrivateKey:()=>e.randomBytes(e.nByteLength)},GuBytes:g}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Sv=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),Cq=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const r$e=BigInt(1),Iq=BigInt(2),n$e=BigInt(3),i$e=BigInt(5),s$e=BigInt(8);function Wae(t){const e=BigInt(10),r=BigInt(20),n=BigInt(40),i=BigInt(80),s=Sv,o=t*t%s*t%s,c=Gn(o,Iq,s)*o%s,u=Gn(c,r$e,s)*t%s,l=Gn(u,i$e,s)*u%s,f=Gn(l,e,s)*l%s,d=Gn(f,r,s)*f%s,h=Gn(d,n,s)*d%s,m=Gn(h,i,s)*h%s,p=Gn(m,i,s)*h%s,g=Gn(p,e,s)*l%s;return{pow_p_5_8:Gn(g,Iq,s)*t%s,b2:o}}function Gae(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}function a$e(t,e){const r=Sv,n=En(e*e*e,r),i=En(n*n*e,r),s=Wae(t*i).pow_p_5_8;let a=En(t*n*s,r);const o=En(e*a*a,r),c=a,u=En(a*Cq,r),l=o===t,f=o===En(-t,r),d=o===En(-t*Cq,r);return l&&(a=c),(f||d)&&(a=u),VLe(a,r)&&(a=En(-a,r)),{isValid:l||f,value:a}}const o$e=v5(Sv,void 0,!0),c$e={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:o$e,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:s$e,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:h5,randomBytes:zy,adjustScalarBytes:Gae,uvRatio:a$e},F4=QLe(c$e),cb=t$e({P:Sv,a:BigInt(486662),montgomeryBits:255,nByteLength:32,Gu:BigInt(9),powPminus2:t=>{const e=Sv,{pow_p_5_8:r,b2:n}=Wae(t);return En(Gn(r,n$e,e)*n,e)},adjustScalarBytes:Gae,randomBytes:zy}),L4=32,_f=64,bI=32;function l$e(){const t=F4.utils.randomPrivateKey(),e=F4.getPublicKey(t);return{privateKey:d$e(t,e),publicKey:e}}function u$e(t,e){const r=t.subarray(0,bI);return F4.sign(e instanceof Uint8Array?e:e.subarray(),r)}function f$e(t,e,r){return F4.verify(e,r instanceof Uint8Array?r:r.subarray(),t)}function d$e(t,e){const r=new Uint8Array(_f);for(let n=0;n<bI;n++)r[n]=t[n],r[bI+n]=e[n];return r}class Kae{type="Ed25519";raw;constructor(e){this.raw=Ev(e,L4)}toMultihash(){return Kf.digest(Ya(this))}toCID(){return mt.createV1(114,this.toMultihash())}toString(){return $n.encode(this.toMultihash().bytes).substring(1)}equals(e){return e==null||!(e.raw instanceof Uint8Array)?!1:Tr(this.raw,e.raw)}verify(e,r){return f$e(this.raw,r,e)}}class wI{type="Ed25519";raw;publicKey;constructor(e,r){this.raw=Ev(e,_f),this.publicKey=new Kae(r)}equals(e){return e==null||!(e.raw instanceof Uint8Array)?!1:Tr(this.raw,e.raw)}sign(e){return u$e(this.raw,e)}}function Xae(t){if(t.length>_f){t=Ev(t,_f+L4);const n=t.subarray(0,_f),i=t.subarray(_f,t.length);return new wI(n,i)}t=Ev(t,_f);const e=t.subarray(0,_f),r=t.subarray(L4);return new wI(e,r)}function wB(t){return t=Ev(t,L4),new Kae(t)}async function h$e(){const{privateKey:t,publicKey:e}=l$e();return new wI(t,e)}function Ev(t,e){if(t=Uint8Array.from(t??[]),t.length!==e)throw new Ze(`Key must be a Uint8Array of length ${e}, got ${t.length}`);return t}const p$e=Math.pow(2,7),m$e=Math.pow(2,14),g$e=Math.pow(2,21),_B=Math.pow(2,28),xB=Math.pow(2,35),SB=Math.pow(2,42),EB=Math.pow(2,49),Kr=128,ws=127;function vn(t){if(t<p$e)return 1;if(t<m$e)return 2;if(t<g$e)return 3;if(t<_B)return 4;if(t<xB)return 5;if(t<SB)return 6;if(t<EB)return 7;if(Number.MAX_SAFE_INTEGER!=null&&t>Number.MAX_SAFE_INTEGER)throw new RangeError("Could not encode varint");return 8}function Yae(t,e,r=0){switch(vn(t)){case 8:e[r++]=t&255|Kr,t/=128;case 7:e[r++]=t&255|Kr,t/=128;case 6:e[r++]=t&255|Kr,t/=128;case 5:e[r++]=t&255|Kr,t/=128;case 4:e[r++]=t&255|Kr,t>>>=7;case 3:e[r++]=t&255|Kr,t>>>=7;case 2:e[r++]=t&255|Kr,t>>>=7;case 1:{e[r++]=t&255,t>>>=7;break}default:throw new Error("unreachable")}return e}function v$e(t,e,r=0){switch(vn(t)){case 8:e.set(r++,t&255|Kr),t/=128;case 7:e.set(r++,t&255|Kr),t/=128;case 6:e.set(r++,t&255|Kr),t/=128;case 5:e.set(r++,t&255|Kr),t/=128;case 4:e.set(r++,t&255|Kr),t>>>=7;case 3:e.set(r++,t&255|Kr),t>>>=7;case 2:e.set(r++,t&255|Kr),t>>>=7;case 1:{e.set(r++,t&255),t>>>=7;break}default:throw new Error("unreachable")}return e}function Zae(t,e){let r=t[e],n=0;if(n+=r&ws,r<Kr||(r=t[e+1],n+=(r&ws)<<7,r<Kr)||(r=t[e+2],n+=(r&ws)<<14,r<Kr)||(r=t[e+3],n+=(r&ws)<<21,r<Kr)||(r=t[e+4],n+=(r&ws)*_B,r<Kr)||(r=t[e+5],n+=(r&ws)*xB,r<Kr)||(r=t[e+6],n+=(r&ws)*SB,r<Kr)||(r=t[e+7],n+=(r&ws)*EB,r<Kr))return n;throw new RangeError("Could not decode varint")}function y$e(t,e){let r=t.get(e),n=0;if(n+=r&ws,r<Kr||(r=t.get(e+1),n+=(r&ws)<<7,r<Kr)||(r=t.get(e+2),n+=(r&ws)<<14,r<Kr)||(r=t.get(e+3),n+=(r&ws)<<21,r<Kr)||(r=t.get(e+4),n+=(r&ws)*_B,r<Kr)||(r=t.get(e+5),n+=(r&ws)*xB,r<Kr)||(r=t.get(e+6),n+=(r&ws)*SB,r<Kr)||(r=t.get(e+7),n+=(r&ws)*EB,r<Kr))return n;throw new RangeError("Could not decode varint")}function Ds(t,e,r=0){return e==null&&(e=Ea(vn(t))),e instanceof Uint8Array?Yae(t,e,r):v$e(t,e,r)}function kl(t,e=0){return t instanceof Uint8Array?Zae(t,e):y$e(t,e)}const kB=new Float32Array([-0]),Tf=new Uint8Array(kB.buffer);function b$e(t,e,r){kB[0]=t,e[r]=Tf[0],e[r+1]=Tf[1],e[r+2]=Tf[2],e[r+3]=Tf[3]}function w$e(t,e){return Tf[0]=t[e],Tf[1]=t[e+1],Tf[2]=t[e+2],Tf[3]=t[e+3],kB[0]}const TB=new Float64Array([-0]),_s=new Uint8Array(TB.buffer);function _$e(t,e,r){TB[0]=t,e[r]=_s[0],e[r+1]=_s[1],e[r+2]=_s[2],e[r+3]=_s[3],e[r+4]=_s[4],e[r+5]=_s[5],e[r+6]=_s[6],e[r+7]=_s[7]}function x$e(t,e){return _s[0]=t[e],_s[1]=t[e+1],_s[2]=t[e+2],_s[3]=t[e+3],_s[4]=t[e+4],_s[5]=t[e+5],_s[6]=t[e+6],_s[7]=t[e+7],TB[0]}const S$e=BigInt(Number.MAX_SAFE_INTEGER),E$e=BigInt(Number.MIN_SAFE_INTEGER);class ks{lo;hi;constructor(e,r){this.lo=e|0,this.hi=r|0}toNumber(e=!1){if(!e&&this.hi>>>31>0){const r=~this.lo+1>>>0;let n=~this.hi>>>0;return r===0&&(n=n+1>>>0),-(r+n*4294967296)}return this.lo+this.hi*4294967296}toBigInt(e=!1){if(e)return BigInt(this.lo>>>0)+(BigInt(this.hi>>>0)<<32n);if(this.hi>>>31){const r=~this.lo+1>>>0;let n=~this.hi>>>0;return r===0&&(n=n+1>>>0),-(BigInt(r)+(BigInt(n)<<32n))}return BigInt(this.lo>>>0)+(BigInt(this.hi>>>0)<<32n)}toString(e=!1){return this.toBigInt(e).toString()}zzEncode(){const e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this}zzDecode(){const e=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this}length(){const e=this.lo,r=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return n===0?r===0?e<16384?e<128?1:2:e<2097152?3:4:r<16384?r<128?5:6:r<2097152?7:8:n<128?9:10}static fromBigInt(e){if(e===0n)return vh;if(e<S$e&&e>E$e)return this.fromNumber(Number(e));const r=e<0n;r&&(e=-e);let n=e>>32n,i=e-(n<<32n);return r&&(n=~n|0n,i=~i|0n,++i>Pq&&(i=0n,++n>Pq&&(n=0n))),new ks(Number(i),Number(n))}static fromNumber(e){if(e===0)return vh;const r=e<0;r&&(e=-e);let n=e>>>0,i=(e-n)/4294967296>>>0;return r&&(i=~i>>>0,n=~n>>>0,++n>4294967295&&(n=0,++i>4294967295&&(i=0))),new ks(n,i)}static from(e){return typeof e=="number"?ks.fromNumber(e):typeof e=="bigint"?ks.fromBigInt(e):typeof e=="string"?ks.fromBigInt(BigInt(e)):e.low!=null||e.high!=null?new ks(e.low>>>0,e.high>>>0):vh}}const vh=new ks(0,0);vh.toBigInt=function(){return 0n};vh.zzEncode=vh.zzDecode=function(){return this};vh.length=function(){return 1};const Pq=4294967296n;function k$e(t){let e=0,r=0;for(let n=0;n<t.length;++n)r=t.charCodeAt(n),r<128?e+=1:r<2048?e+=2:(r&64512)===55296&&(t.charCodeAt(n+1)&64512)===56320?(++n,e+=4):e+=3;return e}function T$e(t,e,r){if(r-e<1)return"";let i;const s=[];let a=0,o;for(;e<r;)o=t[e++],o<128?s[a++]=o:o>191&&o<224?s[a++]=(o&31)<<6|t[e++]&63:o>239&&o<365?(o=((o&7)<<18|(t[e++]&63)<<12|(t[e++]&63)<<6|t[e++]&63)-65536,s[a++]=55296+(o>>10),s[a++]=56320+(o&1023)):s[a++]=(o&15)<<12|(t[e++]&63)<<6|t[e++]&63,a>8191&&((i??(i=[])).push(String.fromCharCode.apply(String,s)),a=0);return i!=null?(a>0&&i.push(String.fromCharCode.apply(String,s.slice(0,a))),i.join("")):String.fromCharCode.apply(String,s.slice(0,a))}function Jae(t,e,r){const n=r;let i,s;for(let a=0;a<t.length;++a)i=t.charCodeAt(a),i<128?e[r++]=i:i<2048?(e[r++]=i>>6|192,e[r++]=i&63|128):(i&64512)===55296&&((s=t.charCodeAt(a+1))&64512)===56320?(i=65536+((i&1023)<<10)+(s&1023),++a,e[r++]=i>>18|240,e[r++]=i>>12&63|128,e[r++]=i>>6&63|128,e[r++]=i&63|128):(e[r++]=i>>12|224,e[r++]=i>>6&63|128,e[r++]=i&63|128);return r-n}function jo(t,e){return RangeError(`index out of range: ${t.pos} + ${e??1} > ${t.len}`)}function lb(t,e){return(t[e-4]|t[e-3]<<8|t[e-2]<<16|t[e-1]<<24)>>>0}class A$e{buf;pos;len;_slice=Uint8Array.prototype.subarray;constructor(e){this.buf=e,this.pos=0,this.len=e.length}uint32(){let e=4294967295;if(e=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(e=(e|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return e;if((this.pos+=5)>this.len)throw this.pos=this.len,jo(this,10);return e}int32(){return this.uint32()|0}sint32(){const e=this.uint32();return e>>>1^-(e&1)|0}bool(){return this.uint32()!==0}fixed32(){if(this.pos+4>this.len)throw jo(this,4);return lb(this.buf,this.pos+=4)}sfixed32(){if(this.pos+4>this.len)throw jo(this,4);return lb(this.buf,this.pos+=4)|0}float(){if(this.pos+4>this.len)throw jo(this,4);const e=w$e(this.buf,this.pos);return this.pos+=4,e}double(){if(this.pos+8>this.len)throw jo(this,4);const e=x$e(this.buf,this.pos);return this.pos+=8,e}bytes(){const e=this.uint32(),r=this.pos,n=this.pos+e;if(n>this.len)throw jo(this,e);return this.pos+=e,r===n?new Uint8Array(0):this.buf.subarray(r,n)}string(){const e=this.bytes();return T$e(e,0,e.length)}skip(e){if(typeof e=="number"){if(this.pos+e>this.len)throw jo(this,e);this.pos+=e}else do if(this.pos>=this.len)throw jo(this);while((this.buf[this.pos++]&128)!==0);return this}skipType(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(e=this.uint32()&7)!==4;)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error(`invalid wire type ${e} at offset ${this.pos}`)}return this}readLongVarint(){const e=new ks(0,0);let r=0;if(this.len-this.pos>4){for(;r<4;++r)if(e.lo=(e.lo|(this.buf[this.pos]&127)<<r*7)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(this.buf[this.pos]&127)<<28)>>>0,e.hi=(e.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return e;r=0}else{for(;r<3;++r){if(this.pos>=this.len)throw jo(this);if(e.lo=(e.lo|(this.buf[this.pos]&127)<<r*7)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(this.buf[this.pos++]&127)<<r*7)>>>0,e}if(this.len-this.pos>4){for(;r<5;++r)if(e.hi=(e.hi|(this.buf[this.pos]&127)<<r*7+3)>>>0,this.buf[this.pos++]<128)return e}else for(;r<5;++r){if(this.pos>=this.len)throw jo(this);if(e.hi=(e.hi|(this.buf[this.pos]&127)<<r*7+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}readFixed64(){if(this.pos+8>this.len)throw jo(this,8);const e=lb(this.buf,this.pos+=4),r=lb(this.buf,this.pos+=4);return new ks(e,r)}int64(){return this.readLongVarint().toBigInt()}int64Number(){return this.readLongVarint().toNumber()}int64String(){return this.readLongVarint().toString()}uint64(){return this.readLongVarint().toBigInt(!0)}uint64Number(){const e=Zae(this.buf,this.pos);return this.pos+=vn(e),e}uint64String(){return this.readLongVarint().toString(!0)}sint64(){return this.readLongVarint().zzDecode().toBigInt()}sint64Number(){return this.readLongVarint().zzDecode().toNumber()}sint64String(){return this.readLongVarint().zzDecode().toString()}fixed64(){return this.readFixed64().toBigInt()}fixed64Number(){return this.readFixed64().toNumber()}fixed64String(){return this.readFixed64().toString()}sfixed64(){return this.readFixed64().toBigInt()}sfixed64Number(){return this.readFixed64().toNumber()}sfixed64String(){return this.readFixed64().toString()}}function C$e(t){return new A$e(t instanceof Uint8Array?t:t.subarray())}function Pt(t,e,r){const n=C$e(t);return e.decode(n,void 0,r)}const I$e=my({prefix:"9",name:"base10",alphabet:"0123456789"}),P$e=Object.freeze(Object.defineProperty({__proto__:null,base10:I$e},Symbol.toStringTag,{value:"Module"})),R$e=ms({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),O$e=ms({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),B$e=Object.freeze(Object.defineProperty({__proto__:null,base16:R$e,base16upper:O$e},Symbol.toStringTag,{value:"Module"})),D$e=ms({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),M$e=Object.freeze(Object.defineProperty({__proto__:null,base2:D$e},Symbol.toStringTag,{value:"Module"})),Qae=Array.from(""),N$e=Qae.reduce((t,e,r)=>(t[r]=e,t),[]),F$e=Qae.reduce((t,e,r)=>{const n=e.codePointAt(0);if(n==null)throw new Error(`Invalid character: ${e}`);return t[n]=r,t},[]);function L$e(t){return t.reduce((e,r)=>(e+=N$e[r],e),"")}function $$e(t){const e=[];for(const r of t){const n=r.codePointAt(0);if(n==null)throw new Error(`Invalid character: ${r}`);const i=F$e[n];if(i==null)throw new Error(`Non-base256emoji character: ${r}`);e.push(i)}return new Uint8Array(e)}const U$e=w8({prefix:"",name:"base256emoji",encode:L$e,decode:$$e}),j$e=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:U$e},Symbol.toStringTag,{value:"Module"})),ko=ms({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),V$e=ms({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),AB=ms({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),q$e=ms({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),z$e=Object.freeze(Object.defineProperty({__proto__:null,base64:ko,base64pad:V$e,base64url:AB,base64urlpad:q$e},Symbol.toStringTag,{value:"Module"})),H$e=ms({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),W$e=Object.freeze(Object.defineProperty({__proto__:null,base8:H$e},Symbol.toStringTag,{value:"Module"})),G$e=w8({prefix:"\0",name:"identity",encode:t=>T3e(t),decode:t=>k3e(t)}),K$e=Object.freeze(Object.defineProperty({__proto__:null,identity:G$e},Symbol.toStringTag,{value:"Module"})),X$e=new TextEncoder,Y$e=new TextDecoder,Z$e="json",CB=512;function J$e(t){return X$e.encode(JSON.stringify(t))}function eoe(t){return JSON.parse(Y$e.decode(t))}const Q$e=Object.freeze(Object.defineProperty({__proto__:null,code:CB,decode:eoe,encode:J$e,name:Z$e},Symbol.toStringTag,{value:"Module"})),eUe="raw",Ro=85;function tUe(t){return Lp(t)}function rUe(t){return Lp(t)}const toe=Object.freeze(Object.defineProperty({__proto__:null,code:Ro,decode:rUe,encode:tUe,name:eUe},Symbol.toStringTag,{value:"Module"}));function IB({name:t,code:e,encode:r}){return new nUe(t,e,r)}class nUe{name;code;encode;constructor(e,r,n){this.name=e,this.code=r,this.encode=n}digest(e){if(e instanceof Uint8Array){const r=this.encode(e);return r instanceof Uint8Array?wu(this.code,r):r.then(n=>wu(this.code,n))}else throw Error("Unknown type, must be binary type")}}function roe(t){return async e=>new Uint8Array(await crypto.subtle.digest(t,e))}const ci=IB({name:"sha2-256",code:18,encode:roe("SHA-256")}),Rq=IB({name:"sha2-512",code:19,encode:roe("SHA-512")}),kv={...K$e,...M$e,...W$e,...P$e,...B$e,...q3e,...H3e,...G3e,...z$e,...j$e};function noe(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}const Oq=noe("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),FS=noe("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);const e=Ea(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),ioe={utf8:Oq,"utf-8":Oq,hex:kv.base16,latin1:FS,ascii:FS,binary:FS,...kv};function tt(t,e="utf8"){const r=ioe[e];if(r==null)throw new Error(`Unsupported encoding "${e}"`);return r.decoder.decode(`${r.prefix}${t}`)}function iUe(t){let n,i=8192;return function(a){if(a<1||a>4096)return Ea(a);i+a>8192&&(n=Ea(8192),i=0);const o=n.subarray(i,i+=a);return(i&7)!==0&&(i=(i|7)+1),o}}class lg{fn;len;next;val;constructor(e,r,n){this.fn=e,this.len=r,this.next=void 0,this.val=n}}function LS(){}class sUe{head;tail;len;next;constructor(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}}const aUe=iUe();function oUe(t){return globalThis.Buffer!=null?Ea(t):aUe(t)}class _I{len;head;tail;states;constructor(){this.len=0,this.head=new lg(LS,0,0),this.tail=this.head,this.states=null}_push(e,r,n){return this.tail=this.tail.next=new lg(e,r,n),this.len+=r,this}uint32(e){return this.len+=(this.tail=this.tail.next=new lUe((e=e>>>0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this}int32(e){return e<0?this._push(ub,10,ks.fromNumber(e)):this.uint32(e)}sint32(e){return this.uint32((e<<1^e>>31)>>>0)}uint64(e){const r=ks.fromBigInt(e);return this._push(ub,r.length(),r)}uint64Number(e){return this._push(Yae,vn(e),e)}uint64String(e){return this.uint64(BigInt(e))}int64(e){return this.uint64(e)}int64Number(e){return this.uint64Number(e)}int64String(e){return this.uint64String(e)}sint64(e){const r=ks.fromBigInt(e).zzEncode();return this._push(ub,r.length(),r)}sint64Number(e){const r=ks.fromNumber(e).zzEncode();return this._push(ub,r.length(),r)}sint64String(e){return this.sint64(BigInt(e))}bool(e){return this._push($S,1,e?1:0)}fixed32(e){return this._push(Vm,4,e>>>0)}sfixed32(e){return this.fixed32(e)}fixed64(e){const r=ks.fromBigInt(e);return this._push(Vm,4,r.lo)._push(Vm,4,r.hi)}fixed64Number(e){const r=ks.fromNumber(e);return this._push(Vm,4,r.lo)._push(Vm,4,r.hi)}fixed64String(e){return this.fixed64(BigInt(e))}sfixed64(e){return this.fixed64(e)}sfixed64Number(e){return this.fixed64Number(e)}sfixed64String(e){return this.fixed64String(e)}float(e){return this._push(b$e,4,e)}double(e){return this._push(_$e,8,e)}bytes(e){const r=e.length>>>0;return r===0?this._push($S,1,0):this.uint32(r)._push(uUe,r,e)}string(e){const r=k$e(e);return r!==0?this.uint32(r)._push(Jae,r,e):this._push($S,1,0)}fork(){return this.states=new sUe(this),this.head=this.tail=new lg(LS,0,0),this.len=0,this}reset(){return this.states!=null?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new lg(LS,0,0),this.len=0),this}ldelim(){const e=this.head,r=this.tail,n=this.len;return this.reset().uint32(n),n!==0&&(this.tail.next=e.next,this.tail=r,this.len+=n),this}finish(){let e=this.head.next;const r=oUe(this.len);let n=0;for(;e!=null;)e.fn(e.val,r,n),n+=e.len,e=e.next;return r}}function $S(t,e,r){e[r]=t&255}function cUe(t,e,r){for(;t>127;)e[r++]=t&127|128,t>>>=7;e[r]=t}class lUe extends lg{next;constructor(e,r){super(cUe,e,r),this.next=void 0}}function ub(t,e,r){for(;t.hi!==0;)e[r++]=t.lo&127|128,t.lo=(t.lo>>>7|t.hi<<25)>>>0,t.hi>>>=7;for(;t.lo>127;)e[r++]=t.lo&127|128,t.lo=t.lo>>>7;e[r++]=t.lo}function Vm(t,e,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24}function uUe(t,e,r){e.set(t,r)}globalThis.Buffer!=null&&(_I.prototype.bytes=function(t){const e=t.length>>>0;return this.uint32(e),e>0&&this._push(fUe,e,t),this},_I.prototype.string=function(t){const e=globalThis.Buffer.byteLength(t);return this.uint32(e),e>0&&this._push(dUe,e,t),this});function fUe(t,e,r){e.set(t,r)}function dUe(t,e,r){t.length<40?Jae(t,e,r):e.utf8Write!=null?e.utf8Write(t,r):e.set(tt(t),r)}function hUe(){return new _I}function Rt(t,e){const r=hUe();return e.encode(t,r,{lengthDelimited:!1}),r.finish()}var $4;(function(t){t[t.VARINT=0]="VARINT",t[t.BIT64=1]="BIT64",t[t.LENGTH_DELIMITED=2]="LENGTH_DELIMITED",t[t.START_GROUP=3]="START_GROUP",t[t.END_GROUP=4]="END_GROUP",t[t.BIT32=5]="BIT32"})($4||($4={}));function soe(t,e,r,n){return{name:t,type:e,encode:r,decode:n}}function ra(t){function e(i){if(t[i.toString()]==null)throw new Error("Invalid enum value");return t[i]}const r=function(s,a){const o=e(s);a.int32(o)},n=function(s){const a=s.int32();return e(a)};return soe("enum",$4.VARINT,r,n)}function Ot(t,e){return soe("message",$4.LENGTH_DELIMITED,t,e)}class rn extends Error{code="ERR_MAX_LENGTH";name="MaxLengthError"}class Bq extends Error{code="ERR_MAX_SIZE";name="MaxSizeError"}var ai;(function(t){t.RSA="RSA",t.Ed25519="Ed25519",t.secp256k1="secp256k1"})(ai||(ai={}));var xI;(function(t){t[t.RSA=0]="RSA",t[t.Ed25519=1]="Ed25519",t[t.secp256k1=2]="secp256k1"})(xI||(xI={}));(function(t){t.codec=()=>ra(xI)})(ai||(ai={}));var Xf;(function(t){let e;t.codec=()=>(e==null&&(e=Ot((r,n,i={})=>{i.lengthDelimited!==!1&&n.fork(),r.Type!=null&&(n.uint32(8),ai.codec().encode(r.Type,n)),r.Data!=null&&(n.uint32(18),n.bytes(r.Data)),i.lengthDelimited!==!1&&n.ldelim()},(r,n,i={})=>{const s={},a=n==null?r.len:r.pos+n;for(;r.pos<a;){const o=r.uint32();switch(o>>>3){case 1:{s.Type=ai.codec().decode(r);break}case 2:{s.Data=r.bytes();break}default:{r.skipType(o&7);break}}}return s})),e),t.encode=r=>Rt(r,t.codec()),t.decode=(r,n)=>Pt(r,t.codec(),n)})(Xf||(Xf={}));var U4;(function(t){let e;t.codec=()=>(e==null&&(e=Ot((r,n,i={})=>{i.lengthDelimited!==!1&&n.fork(),r.Type!=null&&(n.uint32(8),ai.codec().encode(r.Type,n)),r.Data!=null&&(n.uint32(18),n.bytes(r.Data)),i.lengthDelimited!==!1&&n.ldelim()},(r,n,i={})=>{const s={},a=n==null?r.len:r.pos+n;for(;r.pos<a;){const o=r.uint32();switch(o>>>3){case 1:{s.Type=ai.codec().decode(r);break}case 2:{s.Data=r.bytes();break}default:{r.skipType(o&7);break}}}return s})),e),t.encode=r=>Rt(r,t.codec()),t.decode=(r,n)=>Pt(r,t.codec(),n)})(U4||(U4={}));const pUe=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),tf=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),rf=new Uint32Array(64);class mUe extends gB{constructor(){super(64,32,8,!1),this.A=tf[0]|0,this.B=tf[1]|0,this.C=tf[2]|0,this.D=tf[3]|0,this.E=tf[4]|0,this.F=tf[5]|0,this.G=tf[6]|0,this.H=tf[7]|0}get(){const{A:e,B:r,C:n,D:i,E:s,F:a,G:o,H:c}=this;return[e,r,n,i,s,a,o,c]}set(e,r,n,i,s,a,o,c){this.A=e|0,this.B=r|0,this.C=n|0,this.D=i|0,this.E=s|0,this.F=a|0,this.G=o|0,this.H=c|0}process(e,r){for(let f=0;f<16;f++,r+=4)rf[f]=e.getUint32(r,!1);for(let f=16;f<64;f++){const d=rf[f-15],h=rf[f-2],m=Lc(d,7)^Lc(d,18)^d>>>3,p=Lc(h,17)^Lc(h,19)^h>>>10;rf[f]=p+rf[f-7]+m+rf[f-16]|0}let{A:n,B:i,C:s,D:a,E:o,F:c,G:u,H:l}=this;for(let f=0;f<64;f++){const d=Lc(o,6)^Lc(o,11)^Lc(o,25),h=l+d+Bae(o,c,u)+pUe[f]+rf[f]|0,p=(Lc(n,2)^Lc(n,13)^Lc(n,22))+Dae(n,i,s)|0;l=u,u=c,c=o,o=a+h|0,a=s,s=i,i=n,n=h+p|0}n=n+this.A|0,i=i+this.B|0,s=s+this.C|0,a=a+this.D|0,o=o+this.E|0,c=c+this.F|0,u=u+this.G|0,l=l+this.H|0,this.set(n,i,s,a,o,c,u,l)}roundClean(){rf.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const $f=mB(()=>new mUe);function nt(t,e="utf8"){const r=ioe[e];if(r==null)throw new Error(`Unsupported encoding "${e}"`);return r.encoder.encode(t).substring(1)}const aoe=Symbol.for("@achingbrain/uint8arraylist");function Dq(t,e){if(e==null||e<0)throw new RangeError("index is out of bounds");let r=0;for(const n of t){const i=r+n.byteLength;if(e<i)return{buf:n,index:e-r};r=i}throw new RangeError("index is out of bounds")}function ug(t){return!!t?.[aoe]}class cr{bufs;length;[aoe]=!0;constructor(...e){this.bufs=[],this.length=0,e.length>0&&this.appendAll(e)}*[Symbol.iterator](){yield*this.bufs}get byteLength(){return this.length}append(...e){this.appendAll(e)}appendAll(e){let r=0;for(const n of e)if(n instanceof Uint8Array)r+=n.byteLength,this.bufs.push(n);else if(ug(n))r+=n.byteLength,this.bufs.push(...n.bufs);else throw new Error("Could not append value, must be an Uint8Array or a Uint8ArrayList");this.length+=r}prepend(...e){this.prependAll(e)}prependAll(e){let r=0;for(const n of e.reverse())if(n instanceof Uint8Array)r+=n.byteLength,this.bufs.unshift(n);else if(ug(n))r+=n.byteLength,this.bufs.unshift(...n.bufs);else throw new Error("Could not prepend value, must be an Uint8Array or a Uint8ArrayList");this.length+=r}get(e){const r=Dq(this.bufs,e);return r.buf[r.index]}set(e,r){const n=Dq(this.bufs,e);n.buf[n.index]=r}write(e,r=0){if(e instanceof Uint8Array)for(let n=0;n<e.length;n++)this.set(r+n,e[n]);else if(ug(e))for(let n=0;n<e.length;n++)this.set(r+n,e.get(n));else throw new Error("Could not write value, must be an Uint8Array or a Uint8ArrayList")}consume(e){if(e=Math.trunc(e),!(Number.isNaN(e)||e<=0)){if(e===this.byteLength){this.bufs=[],this.length=0;return}for(;this.bufs.length>0;)if(e>=this.bufs[0].byteLength)e-=this.bufs[0].byteLength,this.length-=this.bufs[0].byteLength,this.bufs.shift();else{this.bufs[0]=this.bufs[0].subarray(e),this.length-=e;break}}}slice(e,r){const{bufs:n,length:i}=this._subList(e,r);return qn(n,i)}subarray(e,r){const{bufs:n,length:i}=this._subList(e,r);return n.length===1?n[0]:qn(n,i)}sublist(e,r){const{bufs:n,length:i}=this._subList(e,r),s=new cr;return s.length=i,s.bufs=[...n],s}_subList(e,r){if(e=e??0,r=r??this.length,e<0&&(e=this.length+e),r<0&&(r=this.length+r),e<0||r>this.length)throw new RangeError("index is out of bounds");if(e===r)return{bufs:[],length:0};if(e===0&&r===this.length)return{bufs:this.bufs,length:this.length};const n=[];let i=0;for(let s=0;s<this.bufs.length;s++){const a=this.bufs[s],o=i,c=o+a.byteLength;if(i=c,e>=c)continue;const u=e>=o&&e<c,l=r>o&&r<=c;if(u&&l){if(e===o&&r===c){n.push(a);break}const f=e-o;n.push(a.subarray(f,f+(r-e)));break}if(u){if(e===0){n.push(a);continue}n.push(a.subarray(e-o));continue}if(l){if(r===c){n.push(a);break}n.push(a.subarray(0,r-o));break}n.push(a)}return{bufs:n,length:r-e}}indexOf(e,r=0){if(!ug(e)&&!(e instanceof Uint8Array))throw new TypeError('The "value" argument must be a Uint8ArrayList or Uint8Array');const n=e instanceof Uint8Array?e:e.subarray();if(r=Number(r??0),isNaN(r)&&(r=0),r<0&&(r=this.length+r),r<0&&(r=0),e.length===0)return r>this.length?this.length:r;const i=n.byteLength;if(i===0)throw new TypeError("search must be at least 1 byte long");const s=256,a=new Int32Array(s);for(let f=0;f<s;f++)a[f]=-1;for(let f=0;f<i;f++)a[n[f]]=f;const o=a,c=this.byteLength-n.byteLength,u=n.byteLength-1;let l;for(let f=r;f<=c;f+=l){l=0;for(let d=u;d>=0;d--){const h=this.get(f+d);if(n[d]!==h){l=Math.max(1,d-o[h]);break}}if(l===0)return f}return-1}getInt8(e){const r=this.subarray(e,e+1);return new DataView(r.buffer,r.byteOffset,r.byteLength).getInt8(0)}setInt8(e,r){const n=Ea(1);new DataView(n.buffer,n.byteOffset,n.byteLength).setInt8(0,r),this.write(n,e)}getInt16(e,r){const n=this.subarray(e,e+2);return new DataView(n.buffer,n.byteOffset,n.byteLength).getInt16(0,r)}setInt16(e,r,n){const i=yr(2);new DataView(i.buffer,i.byteOffset,i.byteLength).setInt16(0,r,n),this.write(i,e)}getInt32(e,r){const n=this.subarray(e,e+4);return new DataView(n.buffer,n.byteOffset,n.byteLength).getInt32(0,r)}setInt32(e,r,n){const i=yr(4);new DataView(i.buffer,i.byteOffset,i.byteLength).setInt32(0,r,n),this.write(i,e)}getBigInt64(e,r){const n=this.subarray(e,e+8);return new DataView(n.buffer,n.byteOffset,n.byteLength).getBigInt64(0,r)}setBigInt64(e,r,n){const i=yr(8);new DataView(i.buffer,i.byteOffset,i.byteLength).setBigInt64(0,r,n),this.write(i,e)}getUint8(e){const r=this.subarray(e,e+1);return new DataView(r.buffer,r.byteOffset,r.byteLength).getUint8(0)}setUint8(e,r){const n=Ea(1);new DataView(n.buffer,n.byteOffset,n.byteLength).setUint8(0,r),this.write(n,e)}getUint16(e,r){const n=this.subarray(e,e+2);return new DataView(n.buffer,n.byteOffset,n.byteLength).getUint16(0,r)}setUint16(e,r,n){const i=yr(2);new DataView(i.buffer,i.byteOffset,i.byteLength).setUint16(0,r,n),this.write(i,e)}getUint32(e,r){const n=this.subarray(e,e+4);return new DataView(n.buffer,n.byteOffset,n.byteLength).getUint32(0,r)}setUint32(e,r,n){const i=yr(4);new DataView(i.buffer,i.byteOffset,i.byteLength).setUint32(0,r,n),this.write(i,e)}getBigUint64(e,r){const n=this.subarray(e,e+8);return new DataView(n.buffer,n.byteOffset,n.byteLength).getBigUint64(0,r)}setBigUint64(e,r,n){const i=yr(8);new DataView(i.buffer,i.byteOffset,i.byteLength).setBigUint64(0,r,n),this.write(i,e)}getFloat32(e,r){const n=this.subarray(e,e+4);return new DataView(n.buffer,n.byteOffset,n.byteLength).getFloat32(0,r)}setFloat32(e,r,n){const i=yr(4);new DataView(i.buffer,i.byteOffset,i.byteLength).setFloat32(0,r,n),this.write(i,e)}getFloat64(e,r){const n=this.subarray(e,e+8);return new DataView(n.buffer,n.byteOffset,n.byteLength).getFloat64(0,r)}setFloat64(e,r,n){const i=yr(8);new DataView(i.buffer,i.byteOffset,i.byteLength).setFloat64(0,r,n),this.write(i,e)}equals(e){if(e==null||!(e instanceof cr)||e.bufs.length!==this.bufs.length)return!1;for(let r=0;r<this.bufs.length;r++)if(!Tr(this.bufs[r],e.bufs[r]))return!1;return!0}static fromUint8Arrays(e,r){const n=new cr;return n.bufs=e,r==null&&(r=e.reduce((i,s)=>i+s.byteLength,0)),n.length=r,n}}const gUe=parseInt("11111",2),SI=parseInt("10000000",2),vUe=parseInt("01111111",2),Mq={2:yUe,3:_Ue,5:wUe,6:bUe,16:US,22:US,48:US};function y5(t,e={offset:0}){const r=t[e.offset]&gUe;if(e.offset++,Mq[r]!=null)return Mq[r](t,e);throw new Error("No decoder for tag "+r)}function b5(t,e){let r=0;if((t[e.offset]&SI)===SI){const n=t[e.offset]&vUe;let i="0x";e.offset++;for(let s=0;s<n;s++,e.offset++)i+=t[e.offset].toString(16).padStart(2,"0");r=parseInt(i,16)}else r=t[e.offset],e.offset++;return r}function US(t,e){b5(t,e);const r=[];for(;!(e.offset>=t.byteLength);){const n=y5(t,e);if(n===null)break;r.push(n)}return r}function yUe(t,e){const r=b5(t,e),n=e.offset,i=e.offset+r,s=[];for(let a=n;a<i;a++)a===n&&t[a]===0||s.push(t[a]);return e.offset+=r,Uint8Array.from(s)}function bUe(t,e){const r=b5(t,e);return e.offset+=r,["oid-unimplemented"]}function wUe(t,e){return e.offset++,null}function _Ue(t,e){const r=b5(t,e),n=t[e.offset];e.offset++;const i=t.subarray(e.offset,e.offset+r);if(e.offset+=r,n!==0)throw new Error("Unused bits in bit string is unimplemented");return y5(i,{offset:0})}function xUe(t){let e=t.toString(16);e.length%2===1&&(e="0"+e);const r=new cr;for(let n=0;n<e.length;n+=2)r.append(Uint8Array.from([parseInt(`${e[n]}${e[n+1]}`,16)]));return r}function PB(t){if(t.byteLength<128)return Uint8Array.from([t.byteLength]);const e=xUe(t.byteLength);return new cr(Uint8Array.from([e.byteLength|SI]),e)}function Ko(t){const e=new cr,r=parseInt("10000000",2);return(t.subarray()[0]&r)===r&&e.append(Uint8Array.from([0])),e.append(t),new cr(Uint8Array.from([2]),PB(e),e)}function SUe(t){const e=Uint8Array.from([0]),r=new cr(e,t);return new cr(Uint8Array.from([3]),PB(r),r)}function EI(t){const e=new cr;for(const r of t)e.append(r);return new cr(Uint8Array.from([48]),PB(e),e)}function Yf(t){if(isNaN(t)||t<=0)throw new Ze("random bytes length must be a Number bigger than 0");return zy(t)}class Nq extends Error{constructor(e="An error occurred while signing a message"){super(e),this.name="SigningError"}}class Fq extends Error{constructor(e="An error occurred while verifying a message"){super(e),this.name="VerificationError"}}class EUe extends Error{constructor(e="Missing Web Crypto API"){super(e),this.name="WebCryptoMissingError"}}const pl={get(t=globalThis){const e=t.crypto;if(e?.subtle==null)throw new EUe("Missing Web Crypto API. The most likely cause of this error is that this page is being accessed from an insecure context (i.e. not HTTPS). For more information and possible resolutions see https://github.com/libp2p/js-libp2p/blob/main/packages/crypto/README.md#web-crypto-api");return e}};async function kUe(t){const e=await pl.get().subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},!0,["sign","verify"]),r=await CUe(e);return{privateKey:r[0],publicKey:r[1]}}async function TUe(t,e){const r=await pl.get().subtle.importKey("jwk",t,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["sign"]),n=await pl.get().subtle.sign({name:"RSASSA-PKCS1-v1_5"},r,e instanceof Uint8Array?e:e.subarray());return new Uint8Array(n,0,n.byteLength)}async function AUe(t,e,r){const n=await pl.get().subtle.importKey("jwk",t,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["verify"]);return pl.get().subtle.verify({name:"RSASSA-PKCS1-v1_5"},n,e,r instanceof Uint8Array?r:r.subarray())}async function CUe(t){if(t.privateKey==null||t.publicKey==null)throw new Ze("Private and public key are required");return Promise.all([pl.get().subtle.exportKey("jwk",t.privateKey),pl.get().subtle.exportKey("jwk",t.publicKey)])}function IUe(t){if(t.kty!=="RSA")throw new Ze("invalid key type");if(t.n==null)throw new Ze("invalid key modulus");return tt(t.n,"base64url").length*8}class RB{type="RSA";_key;_raw;_multihash;constructor(e,r){this._key=e,this._multihash=r}get raw(){return this._raw==null&&(this._raw=BB(this._key)),this._raw}toMultihash(){return this._multihash}toCID(){return mt.createV1(114,this._multihash)}toString(){return $n.encode(this.toMultihash().bytes).substring(1)}equals(e){return e==null||!(e.raw instanceof Uint8Array)?!1:Tr(this.raw,e.raw)}verify(e,r){return AUe(this._key,r,e)}}class ooe{type="RSA";_key;_raw;publicKey;constructor(e,r){this._key=e,this.publicKey=r}get raw(){return this._raw==null&&(this._raw=DUe(this._key)),this._raw}equals(e){return e==null||!(e.raw instanceof Uint8Array)?!1:Tr(this.raw,e.raw)}sign(e){return TUe(this._key,e)}}const PUe=8192,OB=18,RUe=1062,OUe=Uint8Array.from([48,13,6,9,42,134,72,134,247,13,1,1,1,5,0]);function BUe(t){const e=y5(t);return{n:nt(e[1],"base64url"),e:nt(e[2],"base64url"),d:nt(e[3],"base64url"),p:nt(e[4],"base64url"),q:nt(e[5],"base64url"),dp:nt(e[6],"base64url"),dq:nt(e[7],"base64url"),qi:nt(e[8],"base64url"),kty:"RSA"}}function DUe(t){if(t.n==null||t.e==null||t.d==null||t.p==null||t.q==null||t.dp==null||t.dq==null||t.qi==null)throw new Ze("JWK was missing components");return EI([Ko(Uint8Array.from([0])),Ko(tt(t.n,"base64url")),Ko(tt(t.e,"base64url")),Ko(tt(t.d,"base64url")),Ko(tt(t.p,"base64url")),Ko(tt(t.q,"base64url")),Ko(tt(t.dp,"base64url")),Ko(tt(t.dq,"base64url")),Ko(tt(t.qi,"base64url"))]).subarray()}function MUe(t){const e=y5(t,{offset:0});return{kty:"RSA",n:nt(e[1][0],"base64url"),e:nt(e[1][1],"base64url")}}function BB(t){if(t.n==null||t.e==null)throw new Ze("JWK was missing components");return EI([OUe,SUe(EI([Ko(tt(t.n,"base64url")),Ko(tt(t.e,"base64url"))]))]).subarray()}function coe(t){const e=BUe(t);return NUe(e)}function loe(t,e){if(t.byteLength>=RUe)throw new n4("Key size is too large");const r=MUe(t);if(e==null){const n=$f(Xf.encode({Type:ai.RSA,Data:t}));e=wu(OB,n)}return new RB(r,e)}function NUe(t){if(IUe(t)>PUe)throw new Ze("Key size is too large");const e=LUe(t),r=$f(Xf.encode({Type:ai.RSA,Data:BB(e.publicKey)})),n=wu(OB,r);return new ooe(e.privateKey,new RB(e.publicKey,n))}async function FUe(t){const e=await kUe(t),r=$f(Xf.encode({Type:ai.RSA,Data:BB(e.publicKey)})),n=wu(OB,r);return new ooe(e.privateKey,new RB(e.publicKey,n))}function LUe(t){if(t==null)throw new Ze("Missing key parameter");return{privateKey:t,publicKey:{kty:t.kty,n:t.n,e:t.e}}}class uoe extends Oae{constructor(e,r){super(),this.finished=!1,this.destroyed=!1,d5(e);const n=Lh(r);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(n.length>i?e.create().update(n).digest():n);for(let a=0;a<s.length;a++)s[a]^=54;this.iHash.update(s),this.oHash=e.create();for(let a=0;a<s.length;a++)s[a]^=106;this.oHash.update(s),s.fill(0)}update(e){return N4(this),this.iHash.update(e),this}digestInto(e){N4(this),f5(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:r,iHash:n,finished:i,destroyed:s,blockLen:a,outputLen:o}=this;return e=e,e.finished=i,e.destroyed=s,e.blockLen=a,e.outputLen=o,e.oHash=r._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Wy=(t,e,r)=>new uoe(t,e).update(r).digest();Wy.create=(t,e)=>new uoe(t,e);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Lq(t){t.lowS!==void 0&&pu("lowS",t.lowS),t.prehash!==void 0&&pu("prehash",t.prehash)}function $Ue(t){const e=bB(t);A0(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:r,Fp:n,a:i}=e;if(r){if(!n.eql(i,n.ZERO))throw new Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if(typeof r!="object"||typeof r.beta!="bigint"||typeof r.splitScalar!="function")throw new Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:UUe,hexToBytes:jUe}=LLe;class VUe extends Error{constructor(e=""){super(e)}}const Gl={Err:VUe,_tlv:{encode:(t,e)=>{const{Err:r}=Gl;if(t<0||t>256)throw new r("tlv.encode: wrong tag");if(e.length&1)throw new r("tlv.encode: unpadded data");const n=e.length/2,i=b1(n);if(i.length/2&128)throw new r("tlv.encode: long form length too big");const s=n>127?b1(i.length/2|128):"";return b1(t)+s+i+e},decode(t,e){const{Err:r}=Gl;let n=0;if(t<0||t>256)throw new r("tlv.encode: wrong tag");if(e.length<2||e[n++]!==t)throw new r("tlv.decode: wrong tlv");const i=e[n++],s=!!(i&128);let a=0;if(!s)a=i;else{const c=i&127;if(!c)throw new r("tlv.decode(long): indefinite length not supported");if(c>4)throw new r("tlv.decode(long): byte length is too big");const u=e.subarray(n,n+c);if(u.length!==c)throw new r("tlv.decode: length bytes not complete");if(u[0]===0)throw new r("tlv.decode(long): zero leftmost byte");for(const l of u)a=a<<8|l;if(n+=c,a<128)throw new r("tlv.decode(long): not minimal encoding")}const o=e.subarray(n,n+a);if(o.length!==a)throw new r("tlv.decode: wrong value length");return{v:o,l:e.subarray(n+a)}}},_int:{encode(t){const{Err:e}=Gl;if(t<Jl)throw new e("integer: negative integers are not allowed");let r=b1(t);if(Number.parseInt(r[0],16)&8&&(r="00"+r),r.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return r},decode(t){const{Err:e}=Gl;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return UUe(t)}},toSig(t){const{Err:e,_int:r,_tlv:n}=Gl,i=typeof t=="string"?jUe(t):t;Hy(i);const{v:s,l:a}=n.decode(48,i);if(a.length)throw new e("invalid signature: left bytes after parsing");const{v:o,l:c}=n.decode(2,s),{v:u,l}=n.decode(2,c);if(l.length)throw new e("invalid signature: left bytes after parsing");return{r:r.decode(o),s:r.decode(u)}},hexFromSig(t){const{_tlv:e,_int:r}=Gl,n=e.encode(2,r.encode(t.r)),i=e.encode(2,r.encode(t.s)),s=n+i;return e.encode(48,s)}},Jl=BigInt(0),qi=BigInt(1);BigInt(2);const $q=BigInt(3);BigInt(4);function qUe(t){const e=$Ue(t),{Fp:r}=e,n=v5(e.n,e.nBitLength),i=e.toBytes||((p,g,v)=>{const y=g.toAffine();return jh(Uint8Array.from([4]),r.toBytes(y.x),r.toBytes(y.y))}),s=e.fromBytes||(p=>{const g=p.subarray(1),v=r.fromBytes(g.subarray(0,r.BYTES)),y=r.fromBytes(g.subarray(r.BYTES,2*r.BYTES));return{x:v,y}});function a(p){const{a:g,b:v}=e,y=r.sqr(p),b=r.mul(y,p);return r.add(r.add(b,r.mul(p,g)),v)}if(!r.eql(r.sqr(e.Gy),a(e.Gx)))throw new Error("bad generator point: equation left != right");function o(p){return g5(p,qi,e.n)}function c(p){const{allowedPrivateKeyLengths:g,nByteLength:v,wrapPrivateKey:y,n:b}=e;if(g&&typeof p!="bigint"){if($h(p)&&(p=Uh(p)),typeof p!="string"||!g.includes(p.length))throw new Error("invalid private key");p=p.padStart(v*2,"0")}let _;try{_=typeof p=="bigint"?p:gh(Qn("private key",p,v))}catch{throw new Error("invalid private key, expected hex or "+v+" bytes, got "+typeof p)}return y&&(_=En(_,b)),ga("private key",_,qi,b),_}function u(p){if(!(p instanceof d))throw new Error("ProjectivePoint expected")}const l=xv((p,g)=>{const{px:v,py:y,pz:b}=p;if(r.eql(b,r.ONE))return{x:v,y};const _=p.is0();g==null&&(g=_?r.ONE:r.inv(b));const x=r.mul(v,g),E=r.mul(y,g),k=r.mul(b,g);if(_)return{x:r.ZERO,y:r.ZERO};if(!r.eql(k,r.ONE))throw new Error("invZ was invalid");return{x,y:E}}),f=xv(p=>{if(p.is0()){if(e.allowInfinityPoint&&!r.is0(p.py))return;throw new Error("bad point: ZERO")}const{x:g,y:v}=p.toAffine();if(!r.isValid(g)||!r.isValid(v))throw new Error("bad point: x or y not FE");const y=r.sqr(v),b=a(g);if(!r.eql(y,b))throw new Error("bad point: equation left != right");if(!p.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class d{constructor(g,v,y){if(this.px=g,this.py=v,this.pz=y,g==null||!r.isValid(g))throw new Error("x required");if(v==null||!r.isValid(v))throw new Error("y required");if(y==null||!r.isValid(y))throw new Error("z required");Object.freeze(this)}static fromAffine(g){const{x:v,y}=g||{};if(!g||!r.isValid(v)||!r.isValid(y))throw new Error("invalid affine point");if(g instanceof d)throw new Error("projective point not allowed");const b=_=>r.eql(_,r.ZERO);return b(v)&&b(y)?d.ZERO:new d(v,y,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(g){const v=r.invertBatch(g.map(y=>y.pz));return g.map((y,b)=>y.toAffine(v[b])).map(d.fromAffine)}static fromHex(g){const v=d.fromAffine(s(Qn("pointHex",g)));return v.assertValidity(),v}static fromPrivateKey(g){return d.BASE.multiply(c(g))}static msm(g,v){return Hae(d,n,g,v)}_setWindowSize(g){m.setWindowSize(this,g)}assertValidity(){f(this)}hasEvenY(){const{y:g}=this.toAffine();if(r.isOdd)return!r.isOdd(g);throw new Error("Field doesn't support isOdd")}equals(g){u(g);const{px:v,py:y,pz:b}=this,{px:_,py:x,pz:E}=g,k=r.eql(r.mul(v,E),r.mul(_,b)),B=r.eql(r.mul(y,E),r.mul(x,b));return k&&B}negate(){return new d(this.px,r.neg(this.py),this.pz)}double(){const{a:g,b:v}=e,y=r.mul(v,$q),{px:b,py:_,pz:x}=this;let E=r.ZERO,k=r.ZERO,B=r.ZERO,D=r.mul(b,b),z=r.mul(_,_),U=r.mul(x,x),S=r.mul(b,_);return S=r.add(S,S),B=r.mul(b,x),B=r.add(B,B),E=r.mul(g,B),k=r.mul(y,U),k=r.add(E,k),E=r.sub(z,k),k=r.add(z,k),k=r.mul(E,k),E=r.mul(S,E),B=r.mul(y,B),U=r.mul(g,U),S=r.sub(D,U),S=r.mul(g,S),S=r.add(S,B),B=r.add(D,D),D=r.add(B,D),D=r.add(D,U),D=r.mul(D,S),k=r.add(k,D),U=r.mul(_,x),U=r.add(U,U),D=r.mul(U,S),E=r.sub(E,D),B=r.mul(U,z),B=r.add(B,B),B=r.add(B,B),new d(E,k,B)}add(g){u(g);const{px:v,py:y,pz:b}=this,{px:_,py:x,pz:E}=g;let k=r.ZERO,B=r.ZERO,D=r.ZERO;const z=e.a,U=r.mul(e.b,$q);let S=r.mul(v,_),T=r.mul(y,x),w=r.mul(b,E),A=r.add(v,y),F=r.add(_,x);A=r.mul(A,F),F=r.add(S,T),A=r.sub(A,F),F=r.add(v,b);let P=r.add(_,E);return F=r.mul(F,P),P=r.add(S,w),F=r.sub(F,P),P=r.add(y,b),k=r.add(x,E),P=r.mul(P,k),k=r.add(T,w),P=r.sub(P,k),D=r.mul(z,F),k=r.mul(U,w),D=r.add(k,D),k=r.sub(T,D),D=r.add(T,D),B=r.mul(k,D),T=r.add(S,S),T=r.add(T,S),w=r.mul(z,w),F=r.mul(U,F),T=r.add(T,w),w=r.sub(S,w),w=r.mul(z,w),F=r.add(F,w),S=r.mul(T,F),B=r.add(B,S),S=r.mul(P,F),k=r.mul(A,k),k=r.sub(k,S),S=r.mul(A,T),D=r.mul(P,D),D=r.add(D,S),new d(k,B,D)}subtract(g){return this.add(g.negate())}is0(){return this.equals(d.ZERO)}wNAF(g){return m.wNAFCached(this,g,d.normalizeZ)}multiplyUnsafe(g){const{endo:v,n:y}=e;ga("scalar",g,Jl,y);const b=d.ZERO;if(g===Jl)return b;if(this.is0()||g===qi)return this;if(!v||m.hasPrecomputes(this))return m.wNAFCachedUnsafe(this,g,d.normalizeZ);let{k1neg:_,k1:x,k2neg:E,k2:k}=v.splitScalar(g),B=b,D=b,z=this;for(;x>Jl||k>Jl;)x&qi&&(B=B.add(z)),k&qi&&(D=D.add(z)),z=z.double(),x>>=qi,k>>=qi;return _&&(B=B.negate()),E&&(D=D.negate()),D=new d(r.mul(D.px,v.beta),D.py,D.pz),B.add(D)}multiply(g){const{endo:v,n:y}=e;ga("scalar",g,qi,y);let b,_;if(v){const{k1neg:x,k1:E,k2neg:k,k2:B}=v.splitScalar(g);let{p:D,f:z}=this.wNAF(E),{p:U,f:S}=this.wNAF(B);D=m.constTimeNegate(x,D),U=m.constTimeNegate(k,U),U=new d(r.mul(U.px,v.beta),U.py,U.pz),b=D.add(U),_=z.add(S)}else{const{p:x,f:E}=this.wNAF(g);b=x,_=E}return d.normalizeZ([b,_])[0]}multiplyAndAddUnsafe(g,v,y){const b=d.BASE,_=(E,k)=>k===Jl||k===qi||!E.equals(b)?E.multiplyUnsafe(k):E.multiply(k),x=_(this,v).add(_(g,y));return x.is0()?void 0:x}toAffine(g){return l(this,g)}isTorsionFree(){const{h:g,isTorsionFree:v}=e;if(g===qi)return!0;if(v)return v(d,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:g,clearCofactor:v}=e;return g===qi?this:v?v(d,this):this.multiplyUnsafe(e.h)}toRawBytes(g=!0){return pu("isCompressed",g),this.assertValidity(),i(d,this,g)}toHex(g=!0){return pu("isCompressed",g),Uh(this.toRawBytes(g))}}d.BASE=new d(e.Gx,e.Gy,r.ONE),d.ZERO=new d(r.ZERO,r.ONE,r.ZERO);const h=e.nBitLength,m=zae(d,e.endo?Math.ceil(h/2):h);return{CURVE:e,ProjectivePoint:d,normPrivateKeyToScalar:c,weierstrassEquation:a,isWithinCurveOrder:o}}function zUe(t){const e=bB(t);return A0(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function HUe(t){const e=zUe(t),{Fp:r,n}=e,i=r.BYTES+1,s=2*r.BYTES+1;function a(w){return En(w,n)}function o(w){return yI(w,n)}const{ProjectivePoint:c,normPrivateKeyToScalar:u,weierstrassEquation:l,isWithinCurveOrder:f}=qUe({...e,toBytes(w,A,F){const P=A.toAffine(),O=r.toBytes(P.x),R=jh;return pu("isCompressed",F),F?R(Uint8Array.from([A.hasEvenY()?2:3]),O):R(Uint8Array.from([4]),O,r.toBytes(P.y))},fromBytes(w){const A=w.length,F=w[0],P=w.subarray(1);if(A===i&&(F===2||F===3)){const O=gh(P);if(!g5(O,qi,r.ORDER))throw new Error("Point is not on curve");const R=l(O);let I;try{I=r.sqrt(R)}catch(L){const N=L instanceof Error?": "+L.message:"";throw new Error("Point is not on curve"+N)}const C=(I&qi)===qi;return(F&1)===1!==C&&(I=r.neg(I)),{x:O,y:I}}else if(A===s&&F===4){const O=r.fromBytes(P.subarray(0,r.BYTES)),R=r.fromBytes(P.subarray(r.BYTES,2*r.BYTES));return{x:O,y:R}}else{const O=i,R=s;throw new Error("invalid Point, expected length of "+O+", or uncompressed "+R+", got "+A)}}}),d=w=>Uh(op(w,e.nByteLength));function h(w){const A=n>>qi;return w>A}function m(w){return h(w)?a(-w):w}const p=(w,A,F)=>gh(w.slice(A,F));class g{constructor(A,F,P){this.r=A,this.s=F,this.recovery=P,this.assertValidity()}static fromCompact(A){const F=e.nByteLength;return A=Qn("compactSignature",A,F*2),new g(p(A,0,F),p(A,F,2*F))}static fromDER(A){const{r:F,s:P}=Gl.toSig(Qn("DER",A));return new g(F,P)}assertValidity(){ga("r",this.r,qi,n),ga("s",this.s,qi,n)}addRecoveryBit(A){return new g(this.r,this.s,A)}recoverPublicKey(A){const{r:F,s:P,recovery:O}=this,R=E(Qn("msgHash",A));if(O==null||![0,1,2,3].includes(O))throw new Error("recovery id invalid");const I=O===2||O===3?F+e.n:F;if(I>=r.ORDER)throw new Error("recovery id 2 or 3 invalid");const C=(O&1)===0?"02":"03",M=c.fromHex(C+d(I)),L=o(I),N=a(-R*L),H=a(P*L),W=c.BASE.multiplyAndAddUnsafe(M,N,H);if(!W)throw new Error("point at infinify");return W.assertValidity(),W}hasHighS(){return h(this.s)}normalizeS(){return this.hasHighS()?new g(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return ap(this.toDERHex())}toDERHex(){return Gl.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return ap(this.toCompactHex())}toCompactHex(){return d(this.r)+d(this.s)}}const v={isValidPrivateKey(w){try{return u(w),!0}catch{return!1}},normPrivateKeyToScalar:u,randomPrivateKey:()=>{const w=jae(e.n);return GLe(e.randomBytes(w),e.n)},precompute(w=8,A=c.BASE){return A._setWindowSize(w),A.multiply(BigInt(3)),A}};function y(w,A=!0){return c.fromPrivateKey(w).toRawBytes(A)}function b(w){const A=$h(w),F=typeof w=="string",P=(A||F)&&w.length;return A?P===i||P===s:F?P===2*i||P===2*s:w instanceof c}function _(w,A,F=!0){if(b(w))throw new Error("first arg must be private key");if(!b(A))throw new Error("second arg must be public key");return c.fromHex(A).multiply(u(w)).toRawBytes(F)}const x=e.bits2int||function(w){if(w.length>8192)throw new Error("input is too large");const A=gh(w),F=w.length*8-e.nBitLength;return F>0?A>>BigInt(F):A},E=e.bits2int_modN||function(w){return a(x(w))},k=yB(e.nBitLength);function B(w){return ga("num < 2^"+e.nBitLength,w,Jl,k),op(w,e.nByteLength)}function D(w,A,F=z){if(["recovered","canonical"].some(G=>G in F))throw new Error("sign() legacy options not supported");const{hash:P,randomBytes:O}=e;let{lowS:R,prehash:I,extraEntropy:C}=F;R==null&&(R=!0),w=Qn("msgHash",w),Lq(F),I&&(w=Qn("prehashed msgHash",P(w)));const M=E(w),L=u(A),N=[B(L),B(M)];if(C!=null&&C!==!1){const G=C===!0?O(r.BYTES):C;N.push(Qn("extraEntropy",G))}const H=jh(...N),W=M;function q(G){const Y=x(G);if(!f(Y))return;const te=o(Y),Q=c.BASE.multiply(Y).toAffine(),j=a(Q.x);if(j===Jl)return;const Z=a(te*a(W+j*L));if(Z===Jl)return;let V=(Q.x===j?0:2)|Number(Q.y&qi),ne=Z;return R&&h(Z)&&(ne=m(Z),V^=1),new g(j,ne,V)}return{seed:H,k2sig:q}}const z={lowS:e.lowS,prehash:!1},U={lowS:e.lowS,prehash:!1};function S(w,A,F=z){const{seed:P,k2sig:O}=D(w,A,F),R=e;return Fae(R.hash.outputLen,R.nByteLength,R.hmac)(P,O)}c.BASE._setWindowSize(8);function T(w,A,F,P=U){const O=w;A=Qn("msgHash",A),F=Qn("publicKey",F);const{lowS:R,prehash:I,format:C}=P;if(Lq(P),"strict"in P)throw new Error("options.strict was renamed to lowS");if(C!==void 0&&C!=="compact"&&C!=="der")throw new Error("format must be compact or der");const M=typeof O=="string"||$h(O),L=!M&&!C&&typeof O=="object"&&O!==null&&typeof O.r=="bigint"&&typeof O.s=="bigint";if(!M&&!L)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let N,H;try{if(L&&(N=new g(O.r,O.s)),M){try{C!=="compact"&&(N=g.fromDER(O))}catch(V){if(!(V instanceof Gl.Err))throw V}!N&&C!=="der"&&(N=g.fromCompact(O))}H=c.fromHex(F)}catch{return!1}if(!N||R&&N.hasHighS())return!1;I&&(A=e.hash(A));const{r:W,s:q}=N,G=E(A),Y=o(q),te=a(G*Y),Q=a(W*Y),j=c.BASE.multiplyAndAddUnsafe(H,te,Q)?.toAffine();return j?a(j.x)===W:!1}return{CURVE:e,getPublicKey:y,getSharedSecret:_,sign:S,verify:T,ProjectivePoint:c,Signature:g,utils:v}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function WUe(t){return{hash:t,hmac:(e,...r)=>Wy(t,e,rLe(...r)),randomBytes:zy}}function GUe(t,e){const r=n=>HUe({...t,...WUe(n)});return{...r(e),create:r}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const foe=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),Uq=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),KUe=BigInt(1),kI=BigInt(2),jq=(t,e)=>(t+e/kI)/e;function XUe(t){const e=foe,r=BigInt(3),n=BigInt(6),i=BigInt(11),s=BigInt(22),a=BigInt(23),o=BigInt(44),c=BigInt(88),u=t*t*t%e,l=u*u*t%e,f=Gn(l,r,e)*l%e,d=Gn(f,r,e)*l%e,h=Gn(d,kI,e)*u%e,m=Gn(h,i,e)*h%e,p=Gn(m,s,e)*m%e,g=Gn(p,o,e)*p%e,v=Gn(g,c,e)*g%e,y=Gn(v,o,e)*p%e,b=Gn(y,r,e)*l%e,_=Gn(b,a,e)*m%e,x=Gn(_,n,e)*u%e,E=Gn(x,kI,e);if(!TI.eql(TI.sqr(E),t))throw new Error("Cannot find square root");return E}const TI=v5(foe,void 0,void 0,{sqrt:XUe}),ml=GUe({a:BigInt(0),b:BigInt(7),Fp:TI,n:Uq,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{const e=Uq,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-KUe*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=r,a=BigInt("0x100000000000000000000000000000000"),o=jq(s*t,e),c=jq(-n*t,e);let u=En(t-o*r-c*i,e),l=En(-o*n-c*s,e);const f=u>a,d=l>a;if(f&&(u=e-u),d&&(l=e-l),u>a||l>a)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:f,k1:u,k2neg:d,k2:l}}}},$f);BigInt(0);ml.ProjectivePoint;function doe(t){return t==null?!1:typeof t.then=="function"&&typeof t.catch=="function"&&typeof t.finally=="function"}function YUe(t,e){const r=ci.digest(e instanceof Uint8Array?e:e.subarray());if(doe(r))return r.then(({digest:n})=>ml.sign(n,t).toDERRawBytes()).catch(n=>{throw new Nq(String(n))});try{return ml.sign(r.digest,t).toDERRawBytes()}catch(n){throw new Nq(String(n))}}function ZUe(t,e,r){const n=ci.digest(r instanceof Uint8Array?r:r.subarray());if(doe(n))return n.then(({digest:i})=>ml.verify(e,i,t)).catch(i=>{throw new Fq(String(i))});try{return ml.verify(e,n.digest,t)}catch(i){throw new Fq(String(i))}}class hoe{type="secp256k1";raw;_key;constructor(e){this._key=tje(e),this.raw=QUe(this._key)}toMultihash(){return Kf.digest(Ya(this))}toCID(){return mt.createV1(114,this.toMultihash())}toString(){return $n.encode(this.toMultihash().bytes).substring(1)}equals(e){return e==null||!(e.raw instanceof Uint8Array)?!1:Tr(this.raw,e.raw)}verify(e,r){return ZUe(this._key,r,e)}}class poe{type="secp256k1";raw;publicKey;constructor(e,r){this.raw=eje(e),this.publicKey=new hoe(r??rje(e))}equals(e){return e==null||!(e.raw instanceof Uint8Array)?!1:Tr(this.raw,e.raw)}sign(e){return YUe(this.raw,e)}}function moe(t){return new poe(t)}function DB(t){return new hoe(t)}async function JUe(){const t=nje();return new poe(t)}function QUe(t){return ml.ProjectivePoint.fromHex(t).toRawBytes(!0)}function eje(t){try{return ml.getPublicKey(t,!0),t}catch(e){throw new tre(String(e))}}function tje(t){try{return ml.ProjectivePoint.fromHex(t),t}catch(e){throw new n4(String(e))}}function rje(t){try{return ml.getPublicKey(t,!0)}catch(e){throw new tre(String(e))}}function nje(){return ml.utils.randomPrivateKey()}async function MB(t,e){if(t==="Ed25519")return h$e();if(t==="secp256k1")return JUe();if(t==="RSA")return FUe(2048);throw new Vp}function na(t,e){const{Type:r,Data:n}=Xf.decode(t),i=n??new Uint8Array;switch(r){case ai.RSA:return loe(i,e);case ai.Ed25519:return wB(i);case ai.secp256k1:return DB(i);default:throw new Vp}}function ije(t){return t.byteLength===32?wB(t):t.byteLength===33?DB(t):loe(t)}function goe(t){const{Type:e,Data:r}=Xf.decode(t.digest),n=r??new Uint8Array;switch(e){case ai.Ed25519:return wB(n);case ai.secp256k1:return DB(n);default:throw new Vp}}function Ya(t){return Xf.encode({Type:ai[t.type],Data:t.raw})}function sje(t){const e=U4.decode(t),r=e.Data??new Uint8Array;switch(e.Type){case ai.RSA:return coe(r);case ai.Ed25519:return Xae(r);case ai.secp256k1:return moe(r);default:throw new Vp}}function j4(t){return t.byteLength===64?Xae(t):t.byteLength===32?moe(t):coe(t)}function w5(t){return U4.encode({Type:ai[t.type],Data:t.raw})}function aje(t,e){for(let r=0;r<t.byteLength;r++){if(t[r]<e[r])return-1;if(t[r]>e[r])return 1}return t.byteLength>e.byteLength?1:t.byteLength<e.byteLength?-1:0}const oje=async(t,e,r)=>{if(!t)throw new Error("No signature given");if(!e)throw new Error("Given publicKey was undefined");if(!r)throw new Error("Given input data was undefined");r instanceof Uint8Array||(r=typeof r=="string"?tt(r):new Uint8Array(r));const n=(s,a,o)=>s.verify(a,o);let i=!1;try{const s=ije(tt(e,"base16"));i=await n(s,r,tt(t,"base16"))}catch{}return Promise.resolve(i)},AI=async(t,e)=>{if(!t)throw new Error("No signing key given");if(!e)throw new Error("Given input data was undefined");return e instanceof Uint8Array||(e=typeof e=="string"?tt(e):new Uint8Array(e)),nt(await t.sign(e),"base16")},cje=Eo({size:1e3}),voe=async(t,e,r)=>{const n=await cje,i=await n.get(t);let s=!1;if(i){const a=(o,c)=>c instanceof Uint8Array?aje(o,c)===0:o.toString()===c.toString();s=i.publicKey===e&&a(i.data,r)}else{const a=await oje(t,e,r);s=a,a&&await n.put(t,{publicKey:e,data:r})}return s},lje="./keystore",yoe=async({storage:t,path:e}={})=>{t=t||await hu(await Eo({size:1e3}),await pI({path:e||lje}));const r=await Eo({size:1e3}),n=async()=>{await t.close(),await r.close()},i=async()=>{await t.clear(),await r.clear()},s=async l=>{if(!l)throw new Error("id needed to check a key");let f=!1,d=await r.get(l);if(d)f=!0;else try{d=await t.get("private_"+l),f=d!=null}catch{console.error("Error: ENOENT: no such file or directory")}return f},a=async(l,f)=>{const{privateKey:d}=f;await t.put("private_"+l,d);const h=j4(d);await r.put(l,h)};return{clear:i,close:n,hasKey:s,addKey:a,createKey:async l=>{if(!l)throw new Error("id needed to create a key");const f=await MB("secp256k1"),d={publicKey:f.publicKey.raw,privateKey:f.raw};return await a(l,d),f},getKey:async l=>{if(!l)throw new Error("id needed to get a key");let f=await r.get(l);if(!f){let d;try{d=await t.get("private_"+l)}catch{}if(!d)return;f=j4(d),await r.put(l,f)}return f},getPublic:(l,f={})=>{const d=["hex","buffer"],h=f.format||"hex";if(d.indexOf(h)===-1)throw new Error("Supported formats are `hex` and `buffer`");const m=l.publicKey.raw;return h==="buffer"?m:nt(m,"base16")}}},boe=T0,woe=o5,uje=Zs,_oe=async({id:t,publicKey:e,signatures:r,type:n,sign:i,verify:s}={})=>{if(!t)throw new Error("Identity id is required");if(!e)throw new Error("Invalid public key");if(!r)throw new Error("Signatures object is required");if(!r.id)throw new Error("Signature of id is required");if(!r.publicKey)throw new Error("Signature of publicKey+id is required");if(!n)throw new Error("Identity type is required");r=Object.assign({},r);const a={id:t,publicKey:e,signatures:r,type:n,sign:i,verify:s},{hash:o,bytes:c}=await fje(a);return a.hash=o,a.bytes=c,a},fje=async t=>{const{id:e,publicKey:r,signatures:n,type:i}=t,s={id:e,publicKey:r,signatures:n,type:i},{cid:a,bytes:o}=await Qp({value:s,codec:boe,hasher:woe});return{hash:a.toString(uje),bytes:Uint8Array.from(o)}},dje=async t=>{const{value:e}=await n5({bytes:t,codec:boe,hasher:woe});return _oe({...e})},hje=t=>!!(t.id&&t.hash&&t.bytes&&t.publicKey&&t.signatures&&t.signatures.id&&t.signatures.publicKey&&t.type),pje=(t,e)=>t.id===e.id&&t.hash===e.hash&&t.type===e.type&&t.publicKey===e.publicKey&&t.signatures.id===e.signatures.id&&t.signatures.publicKey===e.signatures.publicKey,xoe="publickey",mje=async t=>{const{id:e,publicKey:r,signatures:n}=t;return voe(n.publicKey,e,r+n.id)},NB=({keystore:t})=>async()=>{if(!t)throw new Error("PublicKeyIdentityProvider requires a keystore parameter");return{type:xoe,getId:async({id:n}={})=>{if(!n)throw new Error("id is required");const i=await t.getKey(n)||await t.createKey(n);return nt(i.publicKey.raw,"base16")},signIdentity:async(n,{id:i}={})=>{if(!i)throw new Error("id is required");const s=await t.getKey(i);if(!s)throw new Error(`Signing key for '${i}' not found`);return AI(s,n)}}};NB.verifyIdentity=mje;NB.type=xoe;const FB={},gje=t=>Object.keys(FB).includes(t),jS=t=>{if(!gje(t))throw new Error(`IdentityProvider type '${t}' is not supported`);return FB[t]},vje=t=>{if(!t.type||typeof t.type!="string")throw new Error("Given IdentityProvider doesn't have a field 'type'.");if(!t.verifyIdentity)throw new Error("Given IdentityProvider doesn't have a function 'verifyIdentity'.");FB[t.type]=t};vje(NB);const yje=Ff("./orbitdb","identities"),bje=async({keystore:t,path:e,storage:r,ipfs:n}={})=>{t=t||await yoe({path:e||yje}),r||(r=n?await hu(await Eo({size:1e3}),await im({ipfs:n,pin:!0})):await hB());const i=await Eo({size:1e3}),s=async l=>{const f=await r.get(l);if(f)return dje(f)},a=async(l={})=>{l.keystore=t;const f=jS("publickey"),h=await(l.provider||f({keystore:t}))();if(!jS(h.type))throw new Error("Identity provider is unknown. Use useIdentityProvider(provider) to register the identity provider");const m=await h.getId(l),p=await t.getKey(m)||await t.createKey(m),g=t.getPublic(p),v=await AI(p,m),y=await h.signIdentity(g+v,l),_=await _oe({id:m,publicKey:g,signatures:{id:v,publicKey:y},type:h.type,sign:c,verify:u});return await r.put(_.hash,_.bytes),_},o=async l=>{if(!hje(l))return!1;const{id:f,publicKey:d,signatures:h}=l;if(!await u(h.id,d,f))return!1;const p=await i.get(h.id);if(p)return pje(l,p);const v=await jS(l.type).verifyIdentity(l);return v&&await i.put(h.id,l),v},c=async(l,f)=>{const d=await t.getKey(l.id);if(!d)throw new Error("Private signing key not found from KeyStore");return await AI(d,f)},u=async(l,f,d)=>await voe(l,f,d);return{createIdentity:a,verifyIdentity:o,getIdentity:s,sign:c,verify:u,keystore:t}},ll=t=>{if(t=t.toString(),!t.startsWith("/orbitdb")&&!t.startsWith("\\orbitdb"))return!1;t=t.replaceAll("/orbitdb/",""),t=t.replaceAll("\\orbitdb\\",""),t=t.replaceAll("/",""),t=t.replaceAll("\\","");let e;try{e=mn.parse(t,Zs)}catch{return!1}return e!==void 0},Vq=t=>{if(t&&t.protocol==="orbitdb"&&t.hash)return t;const e="orbitdb",r=t.replace("/orbitdb/","").replace("\\orbitdb\\","");return{protocol:e,hash:r,address:t,toString:()=>Ff("/",e,r)}},qq=T0,zq=o5,wje=Zs,_je=async({ipfs:t,storage:e}={})=>(e=e||await hu(await Eo({size:1e5}),await im({ipfs:t,pin:!0})),{get:async s=>{const a=await e.get(s),{value:o}=await n5({bytes:a,codec:qq,hasher:zq});return o&&await e.put(s,a),o},create:async({name:s,type:a,accessController:o,meta:c})=>{if(!s)throw new Error("name is required");if(!a)throw new Error("type is required");if(!o)throw new Error("accessController is required");const u=Object.assign({name:s,type:a,accessController:o},c!==void 0?{meta:c}:{}),{cid:l,bytes:f}=await Qp({value:u,codec:qq,hasher:zq}),d=l.toString(wje);return await e.put(d,f),{hash:d,manifest:u}},close:async()=>{await e.close()}}),Soe=async(t=32)=>{const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let r="",n=0;for(;n<t;)r+=e.charAt(Math.floor(Math.random()*e.length)),n+=1;return r},Eoe=T0,koe=o5,xje=Zs,Sje=async({storage:t,type:e,params:r})=>{const n={type:e,...r},{cid:i,bytes:s}=await Qp({value:n,codec:Eoe,hasher:koe}),a=i.toString(xje);return await t.put(a,s),a},w3="ipfs",_5=({write:t,storage:e}={})=>async({orbitdb:r,identities:n,address:i})=>{if(e=e||await hu(await Eo({size:1e3}),await im({ipfs:r.ipfs,pin:!0})),t=t||[r.identity.id],i){const a=await e.get(i.replaceAll("/ipfs/","")),{value:o}=await n5({bytes:a,codec:Eoe,hasher:koe});t=o.write}else i=await Sje({storage:e,type:w3,params:{write:t}}),i=Ff("/",w3,i);return{type:w3,address:i,write:t,canAppend:async a=>{const o=await n.getIdentity(a.identity);if(!o)return!1;const{id:c}=o;return t.includes(c)||t.includes("*")?await n.verifyIdentity(o):!1}}};_5.type=w3;const Toe="orbitdb",Aoe=({write:t}={})=>async({orbitdb:e,identities:r,address:n,name:i})=>{n=n||i||await Soe(64),t=t||[e.identity.id];const s=await e.open(n,{type:"keyvalue",AccessController:_5({write:t})});n=s.address;const a=async m=>{const p=await r.getIdentity(m.identity);if(!p)return!1;const{id:g}=p;return await f("write",g)||await f("admin",g)?await r.verifyIdentity(p):!1},o=async()=>{const m=[];for await(const g of s.iterator())m[g.key]=g.value;const p=g=>{const v=g[0];m[v]=new Set([...m[v]||[],...g[1]])};return Object.entries({...m,admin:new Set([...m.admin||[],...s.access.write])}).forEach(p),m},c=async m=>(await o())[m]||new Set([]),u=async()=>{await s.close()},l=async()=>{await s.drop()},f=async(m,p)=>{const g=new Set(await c(m));return g.has(p)||g.has("*")};return{type:Toe,address:n,write:t,canAppend:a,capabilities:o,get:c,grant:async(m,p)=>{const g=new Set([...await s.get(m)||[],p]);await s.put(m,Array.from(g.values()))},revoke:async(m,p)=>{const g=new Set(await s.get(m)||[]);g.delete(p),g.size>0?await s.put(m,Array.from(g.values())):await s.del(m)},close:u,drop:l,events:s.events}};Aoe.type=Toe;const CI={},Eje=t=>{if(!CI[t])throw new Error(`AccessController type '${t}' is not supported`);return CI[t]},V4=t=>{if(!t.type)throw new Error("AccessController does not contain required field 'type'.");CI[t.type]=t};V4(_5);V4(Aoe);const kje="events",Tje=_5,Aje=async({ipfs:t,id:e,identity:r,identities:n,directory:i}={})=>{if(t==null)throw new Error("IPFS instance is a required argument.");e=e||await Soe();const s=t.libp2p.peerId;i=i||"./orbitdb";let a;n?a=n.keystore:(a=await yoe({path:Ff(i,"./keystore")}),n=await bje({ipfs:t,keystore:a})),r?r.provider&&(r=await n.createIdentity({...r})):r=await n.createIdentity({id:e});const o=await _je({ipfs:t});let c={};const u=async(d,{type:h,meta:m,sync:p,Database:g,AccessController:v,headsStorage:y,entryStorage:b,indexStorage:_,referencesCount:x}={})=>{let E,k,B;if(c[d])return c[d];if(ll(d)){const z=Vq(d);k=await o.get(z.hash);const U=k.accessController.split("/",2).pop();v=Eje(U)(),B=await v({orbitdb:{open:u,identity:r,ipfs:t},identities:n,address:k.accessController}),E=k.name,h=h||k.type,m=k.meta}else{h=h||kje,v=v||Tje(),B=await v({orbitdb:{open:u,identity:r,ipfs:t},identities:n,name:d});const z=await o.create({name:d,type:h,accessController:B.address,meta:m});if(k=z.manifest,d=Vq(z.hash),E=k.name,m=k.meta,c[d])return c[d]}if(g=g||KFe(h)(),!g)throw new Error(`Unsupported database type: '${h}'`);d=d.toString();const D=await g({ipfs:t,identity:r,address:d,name:E,access:B,directory:i,meta:m,syncAutomatically:p,headsStorage:y,entryStorage:b,indexStorage:_,referencesCount:x});return D.events.on("close",l(d)),c[d]=D,D},l=d=>()=>{delete c[d]};return{id:e,open:u,stop:async()=>{for(const d of Object.values(c))await d.close();a&&await a.close(),o&&await o.close(),c={}},ipfs:t,directory:i,keystore:a,identities:n,identity:r,peerId:s}},Coe="set",Ioe=()=>async({ipfs:t,identity:e,address:r,name:n,access:i,directory:s,meta:a,headsStorage:o,entryStorage:c,indexStorage:u,referencesCount:l,syncAutomatically:f,onUpdate:d})=>{const h=await sm({ipfs:t,identity:e,address:r,name:n,access:i,directory:s,meta:a,headsStorage:o,entryStorage:c,indexStorage:u,referencesCount:l,syncAutomatically:f,onUpdate:d}),{addOperation:m,log:p}=h,g=async _=>m({op:"ADD",key:null,value:_}),v=async _=>m({op:"DEL",key:null,value:_}),y=async function*({amount:_}={}){const x={};let E=0;for await(const k of p.traverse()){const{op:B,value:D}=k.payload,z=JSON.stringify(D);if(B==="ADD"&&!x[z]){x[z]=!0,E++;const U=k.hash;yield{value:D,hash:U}}else B==="DEL"&&!x[z]&&(x[z]=!0);if(_!==void 0&&E>=_)break}};return{...h,type:Coe,add:g,del:v,iterator:y,all:async()=>{const _=[];for await(const x of y())_.unshift(x);return _}}};Ioe.type=Coe;const Poe=()=>am(Ioe);function fb({enumerable:t=!0,configurable:e=!1}={}){return{enumerable:t,configurable:e,writable:!1}}function*Cje(t,e){if(e!=null&&typeof e=="object")if(Array.isArray(e))for(const[r,n]of e.entries()){const i=[...t,r],s=mt.asCID(n);s!=null?yield[i.join("/"),s]:typeof n=="object"&&(yield*II(n,i))}else{const r=mt.asCID(e);r!=null?yield[t.join("/"),r]:yield*II(e,t)}}function*II(t,e){if(t==null||t instanceof Uint8Array)return;const r=mt.asCID(t);r!=null&&(yield[e.join("/"),r]);for(const[n,i]of Object.entries(t)){const s=[...e,n];yield*Cje(s,i)}}function*Ije(t,e){if(Array.isArray(e))for(const[r,n]of e.entries()){const i=[...t,r];yield i.join("/"),typeof n=="object"&&mt.asCID(n)==null&&(yield*PI(n,i))}else yield*PI(e,t)}function*PI(t,e){if(!(t==null||typeof t!="object"))for(const[r,n]of Object.entries(t)){const i=[...e,r];yield i.join("/"),n!=null&&!(n instanceof Uint8Array)&&typeof n=="object"&&mt.asCID(n)==null&&(yield*Ije(i,n))}}function Pje(t,e){let r=t;for(const[n,i]of e.entries()){if(r=r[i],r==null)throw new Error(`Object has no property at ${e.slice(0,n+1).map(a=>`[${JSON.stringify(a)}]`).join("")}`);const s=mt.asCID(r);if(s!=null)return{value:s,remaining:e.slice(n+1).join("/")}}return{value:r}}let LB=class{cid;bytes;value;asBlock;constructor({cid:e,bytes:r,value:n}){if(e==null||r==null||typeof n>"u")throw new Error("Missing required argument");this.cid=e,this.bytes=r,this.value=n,this.asBlock=this,Object.defineProperties(this,{cid:fb(),bytes:fb(),value:fb(),asBlock:fb()})}links(){return II(this.value,[])}tree(){return PI(this.value,[])}get(e="/"){return Pje(this.value,e.split("/").filter(Boolean))}};async function Roe({value:t,codec:e,hasher:r}){if(typeof t>"u")throw new Error('Missing required argument "value"');if(e==null||r==null)throw new Error("Missing required argument: codec or hasher");const n=e.encode(t),i=await r.digest(n),s=mt.create(1,e.code,i);return new LB({value:t,bytes:n,cid:s})}async function Ooe({bytes:t,codec:e,hasher:r}){if(t==null)throw new Error('Missing required argument "bytes"');if(e==null||r==null)throw new Error("Missing required argument: codec or hasher");const n=e.decode(t),i=await r.digest(t),s=mt.create(1,e.code,i);return new LB({value:n,bytes:t,cid:s})}function Rje({bytes:t,cid:e,value:r,codec:n}){const i=r!==void 0?r:n?.decode(t);if(i===void 0)throw new Error('Missing required argument, must either provide "value" or "codec"');return new LB({cid:e,bytes:t,value:i})}var db={},Hq;function Oje(){return Hq||(Hq=1,Object.defineProperty(db,"__esModule",{value:!0}),db.TypedEmitter=$p().EventEmitter),db}var om=Oje();const Ts="MODRATEUR",su="MEMBRE",Boe=[Ts,su],Doe="feed",Moe=()=>async({ipfs:t,identity:e,address:r,name:n,access:i,directory:s,meta:a,headsStorage:o,entryStorage:c,indexStorage:u,referencesCount:l,syncAutomatically:f,onUpdate:d})=>{const h=await sm({ipfs:t,identity:e,address:r,name:n,access:i,directory:s,meta:a,headsStorage:o,entryStorage:c,indexStorage:u,referencesCount:l,syncAutomatically:f,onUpdate:d}),{addOperation:m,log:p}=h,g=async _=>m({op:"ADD",key:null,value:_}),v=async _=>m({op:"DEL",key:null,value:_}),y=async function*({amount:_}={}){const x={};let E=0;for await(const k of p.traverse()){const{op:B,value:D}=k.payload,{hash:z}=k;if(B==="ADD"&&!x[z]){E++;const U=k.hash;x[U]=!0,yield{value:D,hash:U}}else B==="DEL"&&!x[D]&&(x[D]=!0);if(_!==void 0&&E>=_)break}};return{...h,type:Doe,add:g,remove:v,iterator:y,all:async()=>{const _=[];for await(const x of y())_.unshift(x);return _}}};Moe.type=Doe;const Bje=()=>am(Moe),Noe="ordered-keyvalue",Foe=()=>async({ipfs:t,identity:e,address:r,name:n,access:i,directory:s,meta:a,headsStorage:o,entryStorage:c,indexStorage:u,referencesCount:l,syncAutomatically:f,onUpdate:d})=>{const h=await sm({ipfs:t,identity:e,address:r,name:n,access:i,directory:s,meta:a,headsStorage:o,entryStorage:c,indexStorage:u,referencesCount:l,syncAutomatically:f,onUpdate:d}),{addOperation:m,log:p}=h,g=async(E,k,B)=>{const D={value:k};return B!==void 0&&(D.position=B),m({op:"PUT",key:E,value:D})},v=async(E,k)=>m({op:"MOVE",key:E,value:k}),y=async E=>m({op:"DEL",key:E,value:null}),b=async E=>{for await(const k of p.traverse()){const{op:B,key:D,value:z}=k.payload;if(B==="PUT"&&D===E)return z;if(B==="DEL"&&D===E)return}},_=async function*({amount:E}={}){const k={},B={};let D=0;for await(const z of p.traverse()){const{op:U,key:S,value:T}=z.payload;if(!S)return;if(U==="PUT"&&!k[S]){k[S]=!0;const w=T,A=z.hash,F=B[S]!==void 0?B[S]:w.position!==void 0?w.position:0;B[S]=F,D++,yield{key:S,value:w.value,position:F,hash:A}}else U==="MOVE"&&!k[S]?B[S]=T:U==="DEL"&&!k[S]&&(k[S]=!0);if(E!==void 0&&D>=E)break}};return{...h,type:Noe,put:g,set:g,del:y,move:v,get:b,iterator:_,all:async()=>{const E=[];for await(const k of _())E.unshift(k);return E.sort((k,B)=>k.position>B.position?1:k.position===B.position?0:-1).map(k=>({key:k.key,value:k.value,hash:k.hash}))}}};Foe.type=Noe;const Dje=()=>am(Foe);var hb={exports:{}},VS={},Fl={},Pd={},qS={},zS={},HS={},Wq;function q4(){return Wq||(Wq=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.regexpCode=t.getEsmExportName=t.getProperty=t.safeStringify=t.stringify=t.strConcat=t.addCodeArg=t.str=t._=t.nil=t._Code=t.Name=t.IDENTIFIER=t._CodeOrName=void 0;class e{}t._CodeOrName=e,t.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class r extends e{constructor(y){if(super(),!t.IDENTIFIER.test(y))throw new Error("CodeGen: name must be a valid identifier");this.str=y}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}t.Name=r;class n extends e{constructor(y){super(),this._items=typeof y=="string"?[y]:y}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const y=this._items[0];return y===""||y==='""'}get str(){var y;return(y=this._str)!==null&&y!==void 0?y:this._str=this._items.reduce((b,_)=>`${b}${_}`,"")}get names(){var y;return(y=this._names)!==null&&y!==void 0?y:this._names=this._items.reduce((b,_)=>(_ instanceof r&&(b[_.str]=(b[_.str]||0)+1),b),{})}}t._Code=n,t.nil=new n("");function i(v,...y){const b=[v[0]];let _=0;for(;_<y.length;)o(b,y[_]),b.push(v[++_]);return new n(b)}t._=i;const s=new n("+");function a(v,...y){const b=[h(v[0])];let _=0;for(;_<y.length;)b.push(s),o(b,y[_]),b.push(s,h(v[++_]));return c(b),new n(b)}t.str=a;function o(v,y){y instanceof n?v.push(...y._items):y instanceof r?v.push(y):v.push(f(y))}t.addCodeArg=o;function c(v){let y=1;for(;y<v.length-1;){if(v[y]===s){const b=u(v[y-1],v[y+1]);if(b!==void 0){v.splice(y-1,3,b);continue}v[y++]="+"}y++}}function u(v,y){if(y==='""')return v;if(v==='""')return y;if(typeof v=="string")return y instanceof r||v[v.length-1]!=='"'?void 0:typeof y!="string"?`${v.slice(0,-1)}${y}"`:y[0]==='"'?v.slice(0,-1)+y.slice(1):void 0;if(typeof y=="string"&&y[0]==='"'&&!(v instanceof r))return`"${v}${y.slice(1)}`}function l(v,y){return y.emptyStr()?v:v.emptyStr()?y:a`${v}${y}`}t.strConcat=l;function f(v){return typeof v=="number"||typeof v=="boolean"||v===null?v:h(Array.isArray(v)?v.join(","):v)}function d(v){return new n(h(v))}t.stringify=d;function h(v){return JSON.stringify(v).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}t.safeStringify=h;function m(v){return typeof v=="string"&&t.IDENTIFIER.test(v)?new n(`.${v}`):i`[${v}]`}t.getProperty=m;function p(v){if(typeof v=="string"&&t.IDENTIFIER.test(v))return new n(`${v}`);throw new Error(`CodeGen: invalid export name: ${v}, use explicit $id name mapping`)}t.getEsmExportName=p;function g(v){return new n(v.toString())}t.regexpCode=g}(HS)),HS}var WS={},Gq;function Kq(){return Gq||(Gq=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ValueScope=t.ValueScopeName=t.Scope=t.varKinds=t.UsedValueState=void 0;const e=q4();class r extends Error{constructor(u){super(`CodeGen: "code" for ${u} not defined`),this.value=u.value}}var n;(function(c){c[c.Started=0]="Started",c[c.Completed=1]="Completed"})(n||(t.UsedValueState=n={})),t.varKinds={const:new e.Name("const"),let:new e.Name("let"),var:new e.Name("var")};class i{constructor({prefixes:u,parent:l}={}){this._names={},this._prefixes=u,this._parent=l}toName(u){return u instanceof e.Name?u:this.name(u)}name(u){return new e.Name(this._newName(u))}_newName(u){const l=this._names[u]||this._nameGroup(u);return`${u}${l.index++}`}_nameGroup(u){var l,f;if(!((f=(l=this._parent)===null||l===void 0?void 0:l._prefixes)===null||f===void 0)&&f.has(u)||this._prefixes&&!this._prefixes.has(u))throw new Error(`CodeGen: prefix "${u}" is not allowed in this scope`);return this._names[u]={prefix:u,index:0}}}t.Scope=i;class s extends e.Name{constructor(u,l){super(l),this.prefix=u}setValue(u,{property:l,itemIndex:f}){this.value=u,this.scopePath=(0,e._)`.${new e.Name(l)}[${f}]`}}t.ValueScopeName=s;const a=(0,e._)`\n`;class o extends i{constructor(u){super(u),this._values={},this._scope=u.scope,this.opts={...u,_n:u.lines?a:e.nil}}get(){return this._scope}name(u){return new s(u,this._newName(u))}value(u,l){var f;if(l.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const d=this.toName(u),{prefix:h}=d,m=(f=l.key)!==null&&f!==void 0?f:l.ref;let p=this._values[h];if(p){const y=p.get(m);if(y)return y}else p=this._values[h]=new Map;p.set(m,d);const g=this._scope[h]||(this._scope[h]=[]),v=g.length;return g[v]=l.ref,d.setValue(l,{property:h,itemIndex:v}),d}getValue(u,l){const f=this._values[u];if(f)return f.get(l)}scopeRefs(u,l=this._values){return this._reduceValues(l,f=>{if(f.scopePath===void 0)throw new Error(`CodeGen: name "${f}" has no value`);return(0,e._)`${u}${f.scopePath}`})}scopeCode(u=this._values,l,f){return this._reduceValues(u,d=>{if(d.value===void 0)throw new Error(`CodeGen: name "${d}" has no value`);return d.value.code},l,f)}_reduceValues(u,l,f={},d){let h=e.nil;for(const m in u){const p=u[m];if(!p)continue;const g=f[m]=f[m]||new Map;p.forEach(v=>{if(g.has(v))return;g.set(v,n.Started);let y=l(v);if(y){const b=this.opts.es5?t.varKinds.var:t.varKinds.const;h=(0,e._)`${h}${b} ${v} = ${y};${this.opts._n}`}else if(y=d?.(v))h=(0,e._)`${h}${y}${this.opts._n}`;else throw new r(v);g.set(v,n.Completed)})}return h}}t.ValueScope=o}(WS)),WS}var Xq;function br(){return Xq||(Xq=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.or=t.and=t.not=t.CodeGen=t.operators=t.varKinds=t.ValueScopeName=t.ValueScope=t.Scope=t.Name=t.regexpCode=t.stringify=t.getProperty=t.nil=t.strConcat=t.str=t._=void 0;const e=q4(),r=Kq();var n=q4();Object.defineProperty(t,"_",{enumerable:!0,get:function(){return n._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return n.str}}),Object.defineProperty(t,"strConcat",{enumerable:!0,get:function(){return n.strConcat}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return n.nil}}),Object.defineProperty(t,"getProperty",{enumerable:!0,get:function(){return n.getProperty}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return n.stringify}}),Object.defineProperty(t,"regexpCode",{enumerable:!0,get:function(){return n.regexpCode}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return n.Name}});var i=Kq();Object.defineProperty(t,"Scope",{enumerable:!0,get:function(){return i.Scope}}),Object.defineProperty(t,"ValueScope",{enumerable:!0,get:function(){return i.ValueScope}}),Object.defineProperty(t,"ValueScopeName",{enumerable:!0,get:function(){return i.ValueScopeName}}),Object.defineProperty(t,"varKinds",{enumerable:!0,get:function(){return i.varKinds}}),t.operators={GT:new e._Code(">"),GTE:new e._Code(">="),LT:new e._Code("<"),LTE:new e._Code("<="),EQ:new e._Code("==="),NEQ:new e._Code("!=="),NOT:new e._Code("!"),OR:new e._Code("||"),AND:new e._Code("&&"),ADD:new e._Code("+")};class s{optimizeNodes(){return this}optimizeNames(N,H){return this}}class a extends s{constructor(N,H,W){super(),this.varKind=N,this.name=H,this.rhs=W}render({es5:N,_n:H}){const W=N?r.varKinds.var:this.varKind,q=this.rhs===void 0?"":` = ${this.rhs}`;return`${W} ${this.name}${q};`+H}optimizeNames(N,H){if(N[this.name.str])return this.rhs&&(this.rhs=w(this.rhs,N,H)),this}get names(){return this.rhs instanceof e._CodeOrName?this.rhs.names:{}}}class o extends s{constructor(N,H,W){super(),this.lhs=N,this.rhs=H,this.sideEffects=W}render({_n:N}){return`${this.lhs} = ${this.rhs};`+N}optimizeNames(N,H){if(!(this.lhs instanceof e.Name&&!N[this.lhs.str]&&!this.sideEffects))return this.rhs=w(this.rhs,N,H),this}get names(){const N=this.lhs instanceof e.Name?{}:{...this.lhs.names};return T(N,this.rhs)}}class c extends o{constructor(N,H,W,q){super(N,W,q),this.op=H}render({_n:N}){return`${this.lhs} ${this.op}= ${this.rhs};`+N}}class u extends s{constructor(N){super(),this.label=N,this.names={}}render({_n:N}){return`${this.label}:`+N}}class l extends s{constructor(N){super(),this.label=N,this.names={}}render({_n:N}){return`break${this.label?` ${this.label}`:""};`+N}}class f extends s{constructor(N){super(),this.error=N}render({_n:N}){return`throw ${this.error};`+N}get names(){return this.error.names}}class d extends s{constructor(N){super(),this.code=N}render({_n:N}){return`${this.code};`+N}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(N,H){return this.code=w(this.code,N,H),this}get names(){return this.code instanceof e._CodeOrName?this.code.names:{}}}class h extends s{constructor(N=[]){super(),this.nodes=N}render(N){return this.nodes.reduce((H,W)=>H+W.render(N),"")}optimizeNodes(){const{nodes:N}=this;let H=N.length;for(;H--;){const W=N[H].optimizeNodes();Array.isArray(W)?N.splice(H,1,...W):W?N[H]=W:N.splice(H,1)}return N.length>0?this:void 0}optimizeNames(N,H){const{nodes:W}=this;let q=W.length;for(;q--;){const G=W[q];G.optimizeNames(N,H)||(A(N,G.names),W.splice(q,1))}return W.length>0?this:void 0}get names(){return this.nodes.reduce((N,H)=>S(N,H.names),{})}}class m extends h{render(N){return"{"+N._n+super.render(N)+"}"+N._n}}class p extends h{}class g extends m{}g.kind="else";class v extends m{constructor(N,H){super(H),this.condition=N}render(N){let H=`if(${this.condition})`+super.render(N);return this.else&&(H+="else "+this.else.render(N)),H}optimizeNodes(){super.optimizeNodes();const N=this.condition;if(N===!0)return this.nodes;let H=this.else;if(H){const W=H.optimizeNodes();H=this.else=Array.isArray(W)?new g(W):W}if(H)return N===!1?H instanceof v?H:H.nodes:this.nodes.length?this:new v(F(N),H instanceof v?[H]:H.nodes);if(!(N===!1||!this.nodes.length))return this}optimizeNames(N,H){var W;if(this.else=(W=this.else)===null||W===void 0?void 0:W.optimizeNames(N,H),!!(super.optimizeNames(N,H)||this.else))return this.condition=w(this.condition,N,H),this}get names(){const N=super.names;return T(N,this.condition),this.else&&S(N,this.else.names),N}}v.kind="if";class y extends m{}y.kind="for";class b extends y{constructor(N){super(),this.iteration=N}render(N){return`for(${this.iteration})`+super.render(N)}optimizeNames(N,H){if(super.optimizeNames(N,H))return this.iteration=w(this.iteration,N,H),this}get names(){return S(super.names,this.iteration.names)}}class _ extends y{constructor(N,H,W,q){super(),this.varKind=N,this.name=H,this.from=W,this.to=q}render(N){const H=N.es5?r.varKinds.var:this.varKind,{name:W,from:q,to:G}=this;return`for(${H} ${W}=${q}; ${W}<${G}; ${W}++)`+super.render(N)}get names(){const N=T(super.names,this.from);return T(N,this.to)}}class x extends y{constructor(N,H,W,q){super(),this.loop=N,this.varKind=H,this.name=W,this.iterable=q}render(N){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(N)}optimizeNames(N,H){if(super.optimizeNames(N,H))return this.iterable=w(this.iterable,N,H),this}get names(){return S(super.names,this.iterable.names)}}class E extends m{constructor(N,H,W){super(),this.name=N,this.args=H,this.async=W}render(N){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(N)}}E.kind="func";class k extends h{render(N){return"return "+super.render(N)}}k.kind="return";class B extends m{render(N){let H="try"+super.render(N);return this.catch&&(H+=this.catch.render(N)),this.finally&&(H+=this.finally.render(N)),H}optimizeNodes(){var N,H;return super.optimizeNodes(),(N=this.catch)===null||N===void 0||N.optimizeNodes(),(H=this.finally)===null||H===void 0||H.optimizeNodes(),this}optimizeNames(N,H){var W,q;return super.optimizeNames(N,H),(W=this.catch)===null||W===void 0||W.optimizeNames(N,H),(q=this.finally)===null||q===void 0||q.optimizeNames(N,H),this}get names(){const N=super.names;return this.catch&&S(N,this.catch.names),this.finally&&S(N,this.finally.names),N}}class D extends m{constructor(N){super(),this.error=N}render(N){return`catch(${this.error})`+super.render(N)}}D.kind="catch";class z extends m{render(N){return"finally"+super.render(N)}}z.kind="finally";class U{constructor(N,H={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...H,_n:H.lines?`
`:""},this._extScope=N,this._scope=new r.Scope({parent:N}),this._nodes=[new p]}toString(){return this._root.render(this.opts)}name(N){return this._scope.name(N)}scopeName(N){return this._extScope.name(N)}scopeValue(N,H){const W=this._extScope.value(N,H);return(this._values[W.prefix]||(this._values[W.prefix]=new Set)).add(W),W}getScopeValue(N,H){return this._extScope.getValue(N,H)}scopeRefs(N){return this._extScope.scopeRefs(N,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(N,H,W,q){const G=this._scope.toName(H);return W!==void 0&&q&&(this._constants[G.str]=W),this._leafNode(new a(N,G,W)),G}const(N,H,W){return this._def(r.varKinds.const,N,H,W)}let(N,H,W){return this._def(r.varKinds.let,N,H,W)}var(N,H,W){return this._def(r.varKinds.var,N,H,W)}assign(N,H,W){return this._leafNode(new o(N,H,W))}add(N,H){return this._leafNode(new c(N,t.operators.ADD,H))}code(N){return typeof N=="function"?N():N!==e.nil&&this._leafNode(new d(N)),this}object(...N){const H=["{"];for(const[W,q]of N)H.length>1&&H.push(","),H.push(W),(W!==q||this.opts.es5)&&(H.push(":"),(0,e.addCodeArg)(H,q));return H.push("}"),new e._Code(H)}if(N,H,W){if(this._blockNode(new v(N)),H&&W)this.code(H).else().code(W).endIf();else if(H)this.code(H).endIf();else if(W)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(N){return this._elseNode(new v(N))}else(){return this._elseNode(new g)}endIf(){return this._endBlockNode(v,g)}_for(N,H){return this._blockNode(N),H&&this.code(H).endFor(),this}for(N,H){return this._for(new b(N),H)}forRange(N,H,W,q,G=this.opts.es5?r.varKinds.var:r.varKinds.let){const Y=this._scope.toName(N);return this._for(new _(G,Y,H,W),()=>q(Y))}forOf(N,H,W,q=r.varKinds.const){const G=this._scope.toName(N);if(this.opts.es5){const Y=H instanceof e.Name?H:this.var("_arr",H);return this.forRange("_i",0,(0,e._)`${Y}.length`,te=>{this.var(G,(0,e._)`${Y}[${te}]`),W(G)})}return this._for(new x("of",q,G,H),()=>W(G))}forIn(N,H,W,q=this.opts.es5?r.varKinds.var:r.varKinds.const){if(this.opts.ownProperties)return this.forOf(N,(0,e._)`Object.keys(${H})`,W);const G=this._scope.toName(N);return this._for(new x("in",q,G,H),()=>W(G))}endFor(){return this._endBlockNode(y)}label(N){return this._leafNode(new u(N))}break(N){return this._leafNode(new l(N))}return(N){const H=new k;if(this._blockNode(H),this.code(N),H.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(k)}try(N,H,W){if(!H&&!W)throw new Error('CodeGen: "try" without "catch" and "finally"');const q=new B;if(this._blockNode(q),this.code(N),H){const G=this.name("e");this._currNode=q.catch=new D(G),H(G)}return W&&(this._currNode=q.finally=new z,this.code(W)),this._endBlockNode(D,z)}throw(N){return this._leafNode(new f(N))}block(N,H){return this._blockStarts.push(this._nodes.length),N&&this.code(N).endBlock(H),this}endBlock(N){const H=this._blockStarts.pop();if(H===void 0)throw new Error("CodeGen: not in self-balancing block");const W=this._nodes.length-H;if(W<0||N!==void 0&&W!==N)throw new Error(`CodeGen: wrong number of nodes: ${W} vs ${N} expected`);return this._nodes.length=H,this}func(N,H=e.nil,W,q){return this._blockNode(new E(N,H,W)),q&&this.code(q).endFunc(),this}endFunc(){return this._endBlockNode(E)}optimize(N=1){for(;N-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(N){return this._currNode.nodes.push(N),this}_blockNode(N){this._currNode.nodes.push(N),this._nodes.push(N)}_endBlockNode(N,H){const W=this._currNode;if(W instanceof N||H&&W instanceof H)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${H?`${N.kind}/${H.kind}`:N.kind}"`)}_elseNode(N){const H=this._currNode;if(!(H instanceof v))throw new Error('CodeGen: "else" without "if"');return this._currNode=H.else=N,this}get _root(){return this._nodes[0]}get _currNode(){const N=this._nodes;return N[N.length-1]}set _currNode(N){const H=this._nodes;H[H.length-1]=N}}t.CodeGen=U;function S(L,N){for(const H in N)L[H]=(L[H]||0)+(N[H]||0);return L}function T(L,N){return N instanceof e._CodeOrName?S(L,N.names):L}function w(L,N,H){if(L instanceof e.Name)return W(L);if(!q(L))return L;return new e._Code(L._items.reduce((G,Y)=>(Y instanceof e.Name&&(Y=W(Y)),Y instanceof e._Code?G.push(...Y._items):G.push(Y),G),[]));function W(G){const Y=H[G.str];return Y===void 0||N[G.str]!==1?G:(delete N[G.str],Y)}function q(G){return G instanceof e._Code&&G._items.some(Y=>Y instanceof e.Name&&N[Y.str]===1&&H[Y.str]!==void 0)}}function A(L,N){for(const H in N)L[H]=(L[H]||0)-(N[H]||0)}function F(L){return typeof L=="boolean"||typeof L=="number"||L===null?!L:(0,e._)`!${M(L)}`}t.not=F;const P=C(t.operators.AND);function O(...L){return L.reduce(P)}t.and=O;const R=C(t.operators.OR);function I(...L){return L.reduce(R)}t.or=I;function C(L){return(N,H)=>N===e.nil?H:H===e.nil?N:(0,e._)`${M(N)} ${L} ${M(H)}`}function M(L){return L instanceof e.Name?L:(0,e._)`(${L})`}}(zS)),zS}var fr={},Yq;function jr(){if(Yq)return fr;Yq=1,Object.defineProperty(fr,"__esModule",{value:!0}),fr.checkStrictMode=fr.getErrorPath=fr.Type=fr.useFunc=fr.setEvaluated=fr.evaluatedPropsToName=fr.mergeEvaluated=fr.eachItem=fr.unescapeJsonPointer=fr.escapeJsonPointer=fr.escapeFragment=fr.unescapeFragment=fr.schemaRefOrVal=fr.schemaHasRulesButRef=fr.schemaHasRules=fr.checkUnknownRules=fr.alwaysValidSchema=fr.toHash=void 0;const t=br(),e=q4();function r(x){const E={};for(const k of x)E[k]=!0;return E}fr.toHash=r;function n(x,E){return typeof E=="boolean"?E:Object.keys(E).length===0?!0:(i(x,E),!s(E,x.self.RULES.all))}fr.alwaysValidSchema=n;function i(x,E=x.schema){const{opts:k,self:B}=x;if(!k.strictSchema||typeof E=="boolean")return;const D=B.RULES.keywords;for(const z in E)D[z]||_(x,`unknown keyword: "${z}"`)}fr.checkUnknownRules=i;function s(x,E){if(typeof x=="boolean")return!x;for(const k in x)if(E[k])return!0;return!1}fr.schemaHasRules=s;function a(x,E){if(typeof x=="boolean")return!x;for(const k in x)if(k!=="$ref"&&E.all[k])return!0;return!1}fr.schemaHasRulesButRef=a;function o({topSchemaRef:x,schemaPath:E},k,B,D){if(!D){if(typeof k=="number"||typeof k=="boolean")return k;if(typeof k=="string")return(0,t._)`${k}`}return(0,t._)`${x}${E}${(0,t.getProperty)(B)}`}fr.schemaRefOrVal=o;function c(x){return f(decodeURIComponent(x))}fr.unescapeFragment=c;function u(x){return encodeURIComponent(l(x))}fr.escapeFragment=u;function l(x){return typeof x=="number"?`${x}`:x.replace(/~/g,"~0").replace(/\//g,"~1")}fr.escapeJsonPointer=l;function f(x){return x.replace(/~1/g,"/").replace(/~0/g,"~")}fr.unescapeJsonPointer=f;function d(x,E){if(Array.isArray(x))for(const k of x)E(k);else E(x)}fr.eachItem=d;function h({mergeNames:x,mergeToName:E,mergeValues:k,resultToName:B}){return(D,z,U,S)=>{const T=U===void 0?z:U instanceof t.Name?(z instanceof t.Name?x(D,z,U):E(D,z,U),U):z instanceof t.Name?(E(D,U,z),z):k(z,U);return S===t.Name&&!(T instanceof t.Name)?B(D,T):T}}fr.mergeEvaluated={props:h({mergeNames:(x,E,k)=>x.if((0,t._)`${k} !== true && ${E} !== undefined`,()=>{x.if((0,t._)`${E} === true`,()=>x.assign(k,!0),()=>x.assign(k,(0,t._)`${k} || {}`).code((0,t._)`Object.assign(${k}, ${E})`))}),mergeToName:(x,E,k)=>x.if((0,t._)`${k} !== true`,()=>{E===!0?x.assign(k,!0):(x.assign(k,(0,t._)`${k} || {}`),p(x,k,E))}),mergeValues:(x,E)=>x===!0?!0:{...x,...E},resultToName:m}),items:h({mergeNames:(x,E,k)=>x.if((0,t._)`${k} !== true && ${E} !== undefined`,()=>x.assign(k,(0,t._)`${E} === true ? true : ${k} > ${E} ? ${k} : ${E}`)),mergeToName:(x,E,k)=>x.if((0,t._)`${k} !== true`,()=>x.assign(k,E===!0?!0:(0,t._)`${k} > ${E} ? ${k} : ${E}`)),mergeValues:(x,E)=>x===!0?!0:Math.max(x,E),resultToName:(x,E)=>x.var("items",E)})};function m(x,E){if(E===!0)return x.var("props",!0);const k=x.var("props",(0,t._)`{}`);return E!==void 0&&p(x,k,E),k}fr.evaluatedPropsToName=m;function p(x,E,k){Object.keys(k).forEach(B=>x.assign((0,t._)`${E}${(0,t.getProperty)(B)}`,!0))}fr.setEvaluated=p;const g={};function v(x,E){return x.scopeValue("func",{ref:E,code:g[E.code]||(g[E.code]=new e._Code(E.code))})}fr.useFunc=v;var y;(function(x){x[x.Num=0]="Num",x[x.Str=1]="Str"})(y||(fr.Type=y={}));function b(x,E,k){if(x instanceof t.Name){const B=E===y.Num;return k?B?(0,t._)`"[" + ${x} + "]"`:(0,t._)`"['" + ${x} + "']"`:B?(0,t._)`"/" + ${x}`:(0,t._)`"/" + ${x}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return k?(0,t.getProperty)(x).toString():"/"+l(x)}fr.getErrorPath=b;function _(x,E,k=x.opts.strictSchema){if(k){if(E=`strict mode: ${E}`,k===!0)throw new Error(E);x.self.logger.warn(E)}}return fr.checkStrictMode=_,fr}var pb={},Zq;function gd(){if(Zq)return pb;Zq=1,Object.defineProperty(pb,"__esModule",{value:!0});const t=br(),e={data:new t.Name("data"),valCxt:new t.Name("valCxt"),instancePath:new t.Name("instancePath"),parentData:new t.Name("parentData"),parentDataProperty:new t.Name("parentDataProperty"),rootData:new t.Name("rootData"),dynamicAnchors:new t.Name("dynamicAnchors"),vErrors:new t.Name("vErrors"),errors:new t.Name("errors"),this:new t.Name("this"),self:new t.Name("self"),scope:new t.Name("scope"),json:new t.Name("json"),jsonPos:new t.Name("jsonPos"),jsonLen:new t.Name("jsonLen"),jsonPart:new t.Name("jsonPart")};return pb.default=e,pb}var Jq;function x5(){return Jq||(Jq=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.extendErrors=t.resetErrorsCount=t.reportExtraError=t.reportError=t.keyword$DataError=t.keywordError=void 0;const e=br(),r=jr(),n=gd();t.keywordError={message:({keyword:g})=>(0,e.str)`must pass "${g}" keyword validation`},t.keyword$DataError={message:({keyword:g,schemaType:v})=>v?(0,e.str)`"${g}" keyword must be ${v} ($data)`:(0,e.str)`"${g}" keyword is invalid ($data)`};function i(g,v=t.keywordError,y,b){const{it:_}=g,{gen:x,compositeRule:E,allErrors:k}=_,B=f(g,v,y);b??(E||k)?c(x,B):u(_,(0,e._)`[${B}]`)}t.reportError=i;function s(g,v=t.keywordError,y){const{it:b}=g,{gen:_,compositeRule:x,allErrors:E}=b,k=f(g,v,y);c(_,k),x||E||u(b,n.default.vErrors)}t.reportExtraError=s;function a(g,v){g.assign(n.default.errors,v),g.if((0,e._)`${n.default.vErrors} !== null`,()=>g.if(v,()=>g.assign((0,e._)`${n.default.vErrors}.length`,v),()=>g.assign(n.default.vErrors,null)))}t.resetErrorsCount=a;function o({gen:g,keyword:v,schemaValue:y,data:b,errsCount:_,it:x}){if(_===void 0)throw new Error("ajv implementation error");const E=g.name("err");g.forRange("i",_,n.default.errors,k=>{g.const(E,(0,e._)`${n.default.vErrors}[${k}]`),g.if((0,e._)`${E}.instancePath === undefined`,()=>g.assign((0,e._)`${E}.instancePath`,(0,e.strConcat)(n.default.instancePath,x.errorPath))),g.assign((0,e._)`${E}.schemaPath`,(0,e.str)`${x.errSchemaPath}/${v}`),x.opts.verbose&&(g.assign((0,e._)`${E}.schema`,y),g.assign((0,e._)`${E}.data`,b))})}t.extendErrors=o;function c(g,v){const y=g.const("err",v);g.if((0,e._)`${n.default.vErrors} === null`,()=>g.assign(n.default.vErrors,(0,e._)`[${y}]`),(0,e._)`${n.default.vErrors}.push(${y})`),g.code((0,e._)`${n.default.errors}++`)}function u(g,v){const{gen:y,validateName:b,schemaEnv:_}=g;_.$async?y.throw((0,e._)`new ${g.ValidationError}(${v})`):(y.assign((0,e._)`${b}.errors`,v),y.return(!1))}const l={keyword:new e.Name("keyword"),schemaPath:new e.Name("schemaPath"),params:new e.Name("params"),propertyName:new e.Name("propertyName"),message:new e.Name("message"),schema:new e.Name("schema"),parentSchema:new e.Name("parentSchema")};function f(g,v,y){const{createErrors:b}=g.it;return b===!1?(0,e._)`{}`:d(g,v,y)}function d(g,v,y={}){const{gen:b,it:_}=g,x=[h(_,y),m(g,y)];return p(g,v,x),b.object(...x)}function h({errorPath:g},{instancePath:v}){const y=v?(0,e.str)`${g}${(0,r.getErrorPath)(v,r.Type.Str)}`:g;return[n.default.instancePath,(0,e.strConcat)(n.default.instancePath,y)]}function m({keyword:g,it:{errSchemaPath:v}},{schemaPath:y,parentSchema:b}){let _=b?v:(0,e.str)`${v}/${g}`;return y&&(_=(0,e.str)`${_}${(0,r.getErrorPath)(y,r.Type.Str)}`),[l.schemaPath,_]}function p(g,{params:v,message:y},b){const{keyword:_,data:x,schemaValue:E,it:k}=g,{opts:B,propertyName:D,topSchemaRef:z,schemaPath:U}=k;b.push([l.keyword,_],[l.params,typeof v=="function"?v(g):v||(0,e._)`{}`]),B.messages&&b.push([l.message,typeof y=="function"?y(g):y]),B.verbose&&b.push([l.schema,E],[l.parentSchema,(0,e._)`${z}${U}`],[n.default.data,x]),D&&b.push([l.propertyName,D])}}(qS)),qS}var Qq;function Mje(){if(Qq)return Pd;Qq=1,Object.defineProperty(Pd,"__esModule",{value:!0}),Pd.boolOrEmptySchema=Pd.topBoolOrEmptySchema=void 0;const t=x5(),e=br(),r=gd(),n={message:"boolean schema is false"};function i(o){const{gen:c,schema:u,validateName:l}=o;u===!1?a(o,!1):typeof u=="object"&&u.$async===!0?c.return(r.default.data):(c.assign((0,e._)`${l}.errors`,null),c.return(!0))}Pd.topBoolOrEmptySchema=i;function s(o,c){const{gen:u,schema:l}=o;l===!1?(u.var(c,!1),a(o)):u.var(c,!0)}Pd.boolOrEmptySchema=s;function a(o,c){const{gen:u,data:l}=o,f={gen:u,keyword:"false schema",data:l,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:o};(0,t.reportError)(f,n,void 0,c)}return Pd}var es={},Rd={},ez;function Loe(){if(ez)return Rd;ez=1,Object.defineProperty(Rd,"__esModule",{value:!0}),Rd.getRules=Rd.isJSONType=void 0;const t=["string","number","integer","boolean","null","object","array"],e=new Set(t);function r(i){return typeof i=="string"&&e.has(i)}Rd.isJSONType=r;function n(){const i={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...i,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},i.number,i.string,i.array,i.object],post:{rules:[]},all:{},keywords:{}}}return Rd.getRules=n,Rd}var Ll={},tz;function $oe(){if(tz)return Ll;tz=1,Object.defineProperty(Ll,"__esModule",{value:!0}),Ll.shouldUseRule=Ll.shouldUseGroup=Ll.schemaHasRulesForType=void 0;function t({schema:n,self:i},s){const a=i.RULES.types[s];return a&&a!==!0&&e(n,a)}Ll.schemaHasRulesForType=t;function e(n,i){return i.rules.some(s=>r(n,s))}Ll.shouldUseGroup=e;function r(n,i){var s;return n[i.keyword]!==void 0||((s=i.definition.implements)===null||s===void 0?void 0:s.some(a=>n[a]!==void 0))}return Ll.shouldUseRule=r,Ll}var rz;function z4(){if(rz)return es;rz=1,Object.defineProperty(es,"__esModule",{value:!0}),es.reportTypeError=es.checkDataTypes=es.checkDataType=es.coerceAndCheckDataType=es.getJSONTypes=es.getSchemaTypes=es.DataType=void 0;const t=Loe(),e=$oe(),r=x5(),n=br(),i=jr();var s;(function(y){y[y.Correct=0]="Correct",y[y.Wrong=1]="Wrong"})(s||(es.DataType=s={}));function a(y){const b=o(y.type);if(b.includes("null")){if(y.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!b.length&&y.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');y.nullable===!0&&b.push("null")}return b}es.getSchemaTypes=a;function o(y){const b=Array.isArray(y)?y:y?[y]:[];if(b.every(t.isJSONType))return b;throw new Error("type must be JSONType or JSONType[]: "+b.join(","))}es.getJSONTypes=o;function c(y,b){const{gen:_,data:x,opts:E}=y,k=l(b,E.coerceTypes),B=b.length>0&&!(k.length===0&&b.length===1&&(0,e.schemaHasRulesForType)(y,b[0]));if(B){const D=m(b,x,E.strictNumbers,s.Wrong);_.if(D,()=>{k.length?f(y,b,k):g(y)})}return B}es.coerceAndCheckDataType=c;const u=new Set(["string","number","integer","boolean","null"]);function l(y,b){return b?y.filter(_=>u.has(_)||b==="array"&&_==="array"):[]}function f(y,b,_){const{gen:x,data:E,opts:k}=y,B=x.let("dataType",(0,n._)`typeof ${E}`),D=x.let("coerced",(0,n._)`undefined`);k.coerceTypes==="array"&&x.if((0,n._)`${B} == 'object' && Array.isArray(${E}) && ${E}.length == 1`,()=>x.assign(E,(0,n._)`${E}[0]`).assign(B,(0,n._)`typeof ${E}`).if(m(b,E,k.strictNumbers),()=>x.assign(D,E))),x.if((0,n._)`${D} !== undefined`);for(const U of _)(u.has(U)||U==="array"&&k.coerceTypes==="array")&&z(U);x.else(),g(y),x.endIf(),x.if((0,n._)`${D} !== undefined`,()=>{x.assign(E,D),d(y,D)});function z(U){switch(U){case"string":x.elseIf((0,n._)`${B} == "number" || ${B} == "boolean"`).assign(D,(0,n._)`"" + ${E}`).elseIf((0,n._)`${E} === null`).assign(D,(0,n._)`""`);return;case"number":x.elseIf((0,n._)`${B} == "boolean" || ${E} === null
              || (${B} == "string" && ${E} && ${E} == +${E})`).assign(D,(0,n._)`+${E}`);return;case"integer":x.elseIf((0,n._)`${B} === "boolean" || ${E} === null
              || (${B} === "string" && ${E} && ${E} == +${E} && !(${E} % 1))`).assign(D,(0,n._)`+${E}`);return;case"boolean":x.elseIf((0,n._)`${E} === "false" || ${E} === 0 || ${E} === null`).assign(D,!1).elseIf((0,n._)`${E} === "true" || ${E} === 1`).assign(D,!0);return;case"null":x.elseIf((0,n._)`${E} === "" || ${E} === 0 || ${E} === false`),x.assign(D,null);return;case"array":x.elseIf((0,n._)`${B} === "string" || ${B} === "number"
              || ${B} === "boolean" || ${E} === null`).assign(D,(0,n._)`[${E}]`)}}}function d({gen:y,parentData:b,parentDataProperty:_},x){y.if((0,n._)`${b} !== undefined`,()=>y.assign((0,n._)`${b}[${_}]`,x))}function h(y,b,_,x=s.Correct){const E=x===s.Correct?n.operators.EQ:n.operators.NEQ;let k;switch(y){case"null":return(0,n._)`${b} ${E} null`;case"array":k=(0,n._)`Array.isArray(${b})`;break;case"object":k=(0,n._)`${b} && typeof ${b} == "object" && !Array.isArray(${b})`;break;case"integer":k=B((0,n._)`!(${b} % 1) && !isNaN(${b})`);break;case"number":k=B();break;default:return(0,n._)`typeof ${b} ${E} ${y}`}return x===s.Correct?k:(0,n.not)(k);function B(D=n.nil){return(0,n.and)((0,n._)`typeof ${b} == "number"`,D,_?(0,n._)`isFinite(${b})`:n.nil)}}es.checkDataType=h;function m(y,b,_,x){if(y.length===1)return h(y[0],b,_,x);let E;const k=(0,i.toHash)(y);if(k.array&&k.object){const B=(0,n._)`typeof ${b} != "object"`;E=k.null?B:(0,n._)`!${b} || ${B}`,delete k.null,delete k.array,delete k.object}else E=n.nil;k.number&&delete k.integer;for(const B in k)E=(0,n.and)(E,h(B,b,_,x));return E}es.checkDataTypes=m;const p={message:({schema:y})=>`must be ${y}`,params:({schema:y,schemaValue:b})=>typeof y=="string"?(0,n._)`{type: ${y}}`:(0,n._)`{type: ${b}}`};function g(y){const b=v(y);(0,r.reportError)(b,p)}es.reportTypeError=g;function v(y){const{gen:b,data:_,schema:x}=y,E=(0,i.schemaRefOrVal)(y,x,"type");return{gen:b,keyword:"type",data:_,schema:x.type,schemaCode:E,schemaValue:E,parentSchema:x,params:{},it:y}}return es}var qm={},nz;function Nje(){if(nz)return qm;nz=1,Object.defineProperty(qm,"__esModule",{value:!0}),qm.assignDefaults=void 0;const t=br(),e=jr();function r(i,s){const{properties:a,items:o}=i.schema;if(s==="object"&&a)for(const c in a)n(i,c,a[c].default);else s==="array"&&Array.isArray(o)&&o.forEach((c,u)=>n(i,u,c.default))}qm.assignDefaults=r;function n(i,s,a){const{gen:o,compositeRule:c,data:u,opts:l}=i;if(a===void 0)return;const f=(0,t._)`${u}${(0,t.getProperty)(s)}`;if(c){(0,e.checkStrictMode)(i,`default is ignored for: ${f}`);return}let d=(0,t._)`${f} === undefined`;l.useDefaults==="empty"&&(d=(0,t._)`${d} || ${f} === null || ${f} === ""`),o.if(d,(0,t._)`${f} = ${(0,t.stringify)(a)}`)}return qm}var Vo={},en={},iz;function Ic(){if(iz)return en;iz=1,Object.defineProperty(en,"__esModule",{value:!0}),en.validateUnion=en.validateArray=en.usePattern=en.callValidateCode=en.schemaProperties=en.allSchemaProperties=en.noPropertyInData=en.propertyInData=en.isOwnProperty=en.hasPropFunc=en.reportMissingProp=en.checkMissingProp=en.checkReportMissingProp=void 0;const t=br(),e=jr(),r=gd(),n=jr();function i(y,b){const{gen:_,data:x,it:E}=y;_.if(l(_,x,b,E.opts.ownProperties),()=>{y.setParams({missingProperty:(0,t._)`${b}`},!0),y.error()})}en.checkReportMissingProp=i;function s({gen:y,data:b,it:{opts:_}},x,E){return(0,t.or)(...x.map(k=>(0,t.and)(l(y,b,k,_.ownProperties),(0,t._)`${E} = ${k}`)))}en.checkMissingProp=s;function a(y,b){y.setParams({missingProperty:b},!0),y.error()}en.reportMissingProp=a;function o(y){return y.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,t._)`Object.prototype.hasOwnProperty`})}en.hasPropFunc=o;function c(y,b,_){return(0,t._)`${o(y)}.call(${b}, ${_})`}en.isOwnProperty=c;function u(y,b,_,x){const E=(0,t._)`${b}${(0,t.getProperty)(_)} !== undefined`;return x?(0,t._)`${E} && ${c(y,b,_)}`:E}en.propertyInData=u;function l(y,b,_,x){const E=(0,t._)`${b}${(0,t.getProperty)(_)} === undefined`;return x?(0,t.or)(E,(0,t.not)(c(y,b,_))):E}en.noPropertyInData=l;function f(y){return y?Object.keys(y).filter(b=>b!=="__proto__"):[]}en.allSchemaProperties=f;function d(y,b){return f(b).filter(_=>!(0,e.alwaysValidSchema)(y,b[_]))}en.schemaProperties=d;function h({schemaCode:y,data:b,it:{gen:_,topSchemaRef:x,schemaPath:E,errorPath:k},it:B},D,z,U){const S=U?(0,t._)`${y}, ${b}, ${x}${E}`:b,T=[[r.default.instancePath,(0,t.strConcat)(r.default.instancePath,k)],[r.default.parentData,B.parentData],[r.default.parentDataProperty,B.parentDataProperty],[r.default.rootData,r.default.rootData]];B.opts.dynamicRef&&T.push([r.default.dynamicAnchors,r.default.dynamicAnchors]);const w=(0,t._)`${S}, ${_.object(...T)}`;return z!==t.nil?(0,t._)`${D}.call(${z}, ${w})`:(0,t._)`${D}(${w})`}en.callValidateCode=h;const m=(0,t._)`new RegExp`;function p({gen:y,it:{opts:b}},_){const x=b.unicodeRegExp?"u":"",{regExp:E}=b.code,k=E(_,x);return y.scopeValue("pattern",{key:k.toString(),ref:k,code:(0,t._)`${E.code==="new RegExp"?m:(0,n.useFunc)(y,E)}(${_}, ${x})`})}en.usePattern=p;function g(y){const{gen:b,data:_,keyword:x,it:E}=y,k=b.name("valid");if(E.allErrors){const D=b.let("valid",!0);return B(()=>b.assign(D,!1)),D}return b.var(k,!0),B(()=>b.break()),k;function B(D){const z=b.const("len",(0,t._)`${_}.length`);b.forRange("i",0,z,U=>{y.subschema({keyword:x,dataProp:U,dataPropType:e.Type.Num},k),b.if((0,t.not)(k),D)})}}en.validateArray=g;function v(y){const{gen:b,schema:_,keyword:x,it:E}=y;if(!Array.isArray(_))throw new Error("ajv implementation error");if(_.some(z=>(0,e.alwaysValidSchema)(E,z))&&!E.opts.unevaluated)return;const B=b.let("valid",!1),D=b.name("_valid");b.block(()=>_.forEach((z,U)=>{const S=y.subschema({keyword:x,schemaProp:U,compositeRule:!0},D);b.assign(B,(0,t._)`${B} || ${D}`),y.mergeValidEvaluated(S,D)||b.if((0,t.not)(B))})),y.result(B,()=>y.reset(),()=>y.error(!0))}return en.validateUnion=v,en}var sz;function Fje(){if(sz)return Vo;sz=1,Object.defineProperty(Vo,"__esModule",{value:!0}),Vo.validateKeywordUsage=Vo.validSchemaType=Vo.funcKeywordCode=Vo.macroKeywordCode=void 0;const t=br(),e=gd(),r=Ic(),n=x5();function i(d,h){const{gen:m,keyword:p,schema:g,parentSchema:v,it:y}=d,b=h.macro.call(y.self,g,v,y),_=u(m,p,b);y.opts.validateSchema!==!1&&y.self.validateSchema(b,!0);const x=m.name("valid");d.subschema({schema:b,schemaPath:t.nil,errSchemaPath:`${y.errSchemaPath}/${p}`,topSchemaRef:_,compositeRule:!0},x),d.pass(x,()=>d.error(!0))}Vo.macroKeywordCode=i;function s(d,h){var m;const{gen:p,keyword:g,schema:v,parentSchema:y,$data:b,it:_}=d;c(_,h);const x=!b&&h.compile?h.compile.call(_.self,v,y,_):h.validate,E=u(p,g,x),k=p.let("valid");d.block$data(k,B),d.ok((m=h.valid)!==null&&m!==void 0?m:k);function B(){if(h.errors===!1)U(),h.modifying&&a(d),S(()=>d.error());else{const T=h.async?D():z();h.modifying&&a(d),S(()=>o(d,T))}}function D(){const T=p.let("ruleErrs",null);return p.try(()=>U((0,t._)`await `),w=>p.assign(k,!1).if((0,t._)`${w} instanceof ${_.ValidationError}`,()=>p.assign(T,(0,t._)`${w}.errors`),()=>p.throw(w))),T}function z(){const T=(0,t._)`${E}.errors`;return p.assign(T,null),U(t.nil),T}function U(T=h.async?(0,t._)`await `:t.nil){const w=_.opts.passContext?e.default.this:e.default.self,A=!("compile"in h&&!b||h.schema===!1);p.assign(k,(0,t._)`${T}${(0,r.callValidateCode)(d,E,w,A)}`,h.modifying)}function S(T){var w;p.if((0,t.not)((w=h.valid)!==null&&w!==void 0?w:k),T)}}Vo.funcKeywordCode=s;function a(d){const{gen:h,data:m,it:p}=d;h.if(p.parentData,()=>h.assign(m,(0,t._)`${p.parentData}[${p.parentDataProperty}]`))}function o(d,h){const{gen:m}=d;m.if((0,t._)`Array.isArray(${h})`,()=>{m.assign(e.default.vErrors,(0,t._)`${e.default.vErrors} === null ? ${h} : ${e.default.vErrors}.concat(${h})`).assign(e.default.errors,(0,t._)`${e.default.vErrors}.length`),(0,n.extendErrors)(d)},()=>d.error())}function c({schemaEnv:d},h){if(h.async&&!d.$async)throw new Error("async keyword in sync schema")}function u(d,h,m){if(m===void 0)throw new Error(`keyword "${h}" failed to compile`);return d.scopeValue("keyword",typeof m=="function"?{ref:m}:{ref:m,code:(0,t.stringify)(m)})}function l(d,h,m=!1){return!h.length||h.some(p=>p==="array"?Array.isArray(d):p==="object"?d&&typeof d=="object"&&!Array.isArray(d):typeof d==p||m&&typeof d>"u")}Vo.validSchemaType=l;function f({schema:d,opts:h,self:m,errSchemaPath:p},g,v){if(Array.isArray(g.keyword)?!g.keyword.includes(v):g.keyword!==v)throw new Error("ajv implementation error");const y=g.dependencies;if(y?.some(b=>!Object.prototype.hasOwnProperty.call(d,b)))throw new Error(`parent schema must have dependencies of ${v}: ${y.join(",")}`);if(g.validateSchema&&!g.validateSchema(d[v])){const _=`keyword "${v}" value is invalid at path "${p}": `+m.errorsText(g.validateSchema.errors);if(h.validateSchema==="log")m.logger.error(_);else throw new Error(_)}}return Vo.validateKeywordUsage=f,Vo}var $l={},az;function Lje(){if(az)return $l;az=1,Object.defineProperty($l,"__esModule",{value:!0}),$l.extendSubschemaMode=$l.extendSubschemaData=$l.getSubschema=void 0;const t=br(),e=jr();function r(s,{keyword:a,schemaProp:o,schema:c,schemaPath:u,errSchemaPath:l,topSchemaRef:f}){if(a!==void 0&&c!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(a!==void 0){const d=s.schema[a];return o===void 0?{schema:d,schemaPath:(0,t._)`${s.schemaPath}${(0,t.getProperty)(a)}`,errSchemaPath:`${s.errSchemaPath}/${a}`}:{schema:d[o],schemaPath:(0,t._)`${s.schemaPath}${(0,t.getProperty)(a)}${(0,t.getProperty)(o)}`,errSchemaPath:`${s.errSchemaPath}/${a}/${(0,e.escapeFragment)(o)}`}}if(c!==void 0){if(u===void 0||l===void 0||f===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:c,schemaPath:u,topSchemaRef:f,errSchemaPath:l}}throw new Error('either "keyword" or "schema" must be passed')}$l.getSubschema=r;function n(s,a,{dataProp:o,dataPropType:c,data:u,dataTypes:l,propertyName:f}){if(u!==void 0&&o!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:d}=a;if(o!==void 0){const{errorPath:m,dataPathArr:p,opts:g}=a,v=d.let("data",(0,t._)`${a.data}${(0,t.getProperty)(o)}`,!0);h(v),s.errorPath=(0,t.str)`${m}${(0,e.getErrorPath)(o,c,g.jsPropertySyntax)}`,s.parentDataProperty=(0,t._)`${o}`,s.dataPathArr=[...p,s.parentDataProperty]}if(u!==void 0){const m=u instanceof t.Name?u:d.let("data",u,!0);h(m),f!==void 0&&(s.propertyName=f)}l&&(s.dataTypes=l);function h(m){s.data=m,s.dataLevel=a.dataLevel+1,s.dataTypes=[],a.definedProperties=new Set,s.parentData=a.data,s.dataNames=[...a.dataNames,m]}}$l.extendSubschemaData=n;function i(s,{jtdDiscriminator:a,jtdMetadata:o,compositeRule:c,createErrors:u,allErrors:l}){c!==void 0&&(s.compositeRule=c),u!==void 0&&(s.createErrors=u),l!==void 0&&(s.allErrors=l),s.jtdDiscriminator=a,s.jtdMetadata=o}return $l.extendSubschemaMode=i,$l}var qs={},GS,oz;function Uoe(){return oz||(oz=1,GS=function t(e,r){if(e===r)return!0;if(e&&r&&typeof e=="object"&&typeof r=="object"){if(e.constructor!==r.constructor)return!1;var n,i,s;if(Array.isArray(e)){if(n=e.length,n!=r.length)return!1;for(i=n;i--!==0;)if(!t(e[i],r[i]))return!1;return!0}if(e.constructor===RegExp)return e.source===r.source&&e.flags===r.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===r.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===r.toString();if(s=Object.keys(e),n=s.length,n!==Object.keys(r).length)return!1;for(i=n;i--!==0;)if(!Object.prototype.hasOwnProperty.call(r,s[i]))return!1;for(i=n;i--!==0;){var a=s[i];if(!t(e[a],r[a]))return!1}return!0}return e!==e&&r!==r}),GS}var KS={exports:{}},cz;function $je(){if(cz)return KS.exports;cz=1;var t=KS.exports=function(n,i,s){typeof i=="function"&&(s=i,i={}),s=i.cb||s;var a=typeof s=="function"?s:s.pre||function(){},o=s.post||function(){};e(i,a,o,n,"",n)};t.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0},t.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},t.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},t.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function e(n,i,s,a,o,c,u,l,f,d){if(a&&typeof a=="object"&&!Array.isArray(a)){i(a,o,c,u,l,f,d);for(var h in a){var m=a[h];if(Array.isArray(m)){if(h in t.arrayKeywords)for(var p=0;p<m.length;p++)e(n,i,s,m[p],o+"/"+h+"/"+p,c,o,h,a,p)}else if(h in t.propsKeywords){if(m&&typeof m=="object")for(var g in m)e(n,i,s,m[g],o+"/"+h+"/"+r(g),c,o,h,a,g)}else(h in t.keywords||n.allKeys&&!(h in t.skipKeywords))&&e(n,i,s,m,o+"/"+h,c,o,h,a)}s(a,o,c,u,l,f,d)}}function r(n){return n.replace(/~/g,"~0").replace(/\//g,"~1")}return KS.exports}var lz;function S5(){if(lz)return qs;lz=1,Object.defineProperty(qs,"__esModule",{value:!0}),qs.getSchemaRefs=qs.resolveUrl=qs.normalizeId=qs._getFullPath=qs.getFullPath=qs.inlineRef=void 0;const t=jr(),e=Uoe(),r=$je(),n=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function i(p,g=!0){return typeof p=="boolean"?!0:g===!0?!a(p):g?o(p)<=g:!1}qs.inlineRef=i;const s=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function a(p){for(const g in p){if(s.has(g))return!0;const v=p[g];if(Array.isArray(v)&&v.some(a)||typeof v=="object"&&a(v))return!0}return!1}function o(p){let g=0;for(const v in p){if(v==="$ref")return 1/0;if(g++,!n.has(v)&&(typeof p[v]=="object"&&(0,t.eachItem)(p[v],y=>g+=o(y)),g===1/0))return 1/0}return g}function c(p,g="",v){v!==!1&&(g=f(g));const y=p.parse(g);return u(p,y)}qs.getFullPath=c;function u(p,g){return p.serialize(g).split("#")[0]+"#"}qs._getFullPath=u;const l=/#\/?$/;function f(p){return p?p.replace(l,""):""}qs.normalizeId=f;function d(p,g,v){return v=f(v),p.resolve(g,v)}qs.resolveUrl=d;const h=/^[a-z_][-a-z0-9._]*$/i;function m(p,g){if(typeof p=="boolean")return{};const{schemaId:v,uriResolver:y}=this.opts,b=f(p[v]||g),_={"":b},x=c(y,b,!1),E={},k=new Set;return r(p,{allKeys:!0},(z,U,S,T)=>{if(T===void 0)return;const w=x+U;let A=_[T];typeof z[v]=="string"&&(A=F.call(this,z[v])),P.call(this,z.$anchor),P.call(this,z.$dynamicAnchor),_[U]=A;function F(O){const R=this.opts.uriResolver.resolve;if(O=f(A?R(A,O):O),k.has(O))throw D(O);k.add(O);let I=this.refs[O];return typeof I=="string"&&(I=this.refs[I]),typeof I=="object"?B(z,I.schema,O):O!==f(w)&&(O[0]==="#"?(B(z,E[O],O),E[O]=z):this.refs[O]=w),O}function P(O){if(typeof O=="string"){if(!h.test(O))throw new Error(`invalid anchor "${O}"`);F.call(this,`#${O}`)}}}),E;function B(z,U,S){if(U!==void 0&&!e(z,U))throw D(S)}function D(z){return new Error(`reference "${z}" resolves to more than one schema`)}}return qs.getSchemaRefs=m,qs}var uz;function E5(){if(uz)return Fl;uz=1,Object.defineProperty(Fl,"__esModule",{value:!0}),Fl.getData=Fl.KeywordCxt=Fl.validateFunctionCode=void 0;const t=Mje(),e=z4(),r=$oe(),n=z4(),i=Nje(),s=Fje(),a=Lje(),o=br(),c=gd(),u=S5(),l=jr(),f=x5();function d(Q){if(x(Q)&&(k(Q),_(Q))){g(Q);return}h(Q,()=>(0,t.topBoolOrEmptySchema)(Q))}Fl.validateFunctionCode=d;function h({gen:Q,validateName:j,schema:Z,schemaEnv:V,opts:ne},se){ne.code.es5?Q.func(j,(0,o._)`${c.default.data}, ${c.default.valCxt}`,V.$async,()=>{Q.code((0,o._)`"use strict"; ${y(Z,ne)}`),p(Q,ne),Q.code(se)}):Q.func(j,(0,o._)`${c.default.data}, ${m(ne)}`,V.$async,()=>Q.code(y(Z,ne)).code(se))}function m(Q){return(0,o._)`{${c.default.instancePath}="", ${c.default.parentData}, ${c.default.parentDataProperty}, ${c.default.rootData}=${c.default.data}${Q.dynamicRef?(0,o._)`, ${c.default.dynamicAnchors}={}`:o.nil}}={}`}function p(Q,j){Q.if(c.default.valCxt,()=>{Q.var(c.default.instancePath,(0,o._)`${c.default.valCxt}.${c.default.instancePath}`),Q.var(c.default.parentData,(0,o._)`${c.default.valCxt}.${c.default.parentData}`),Q.var(c.default.parentDataProperty,(0,o._)`${c.default.valCxt}.${c.default.parentDataProperty}`),Q.var(c.default.rootData,(0,o._)`${c.default.valCxt}.${c.default.rootData}`),j.dynamicRef&&Q.var(c.default.dynamicAnchors,(0,o._)`${c.default.valCxt}.${c.default.dynamicAnchors}`)},()=>{Q.var(c.default.instancePath,(0,o._)`""`),Q.var(c.default.parentData,(0,o._)`undefined`),Q.var(c.default.parentDataProperty,(0,o._)`undefined`),Q.var(c.default.rootData,c.default.data),j.dynamicRef&&Q.var(c.default.dynamicAnchors,(0,o._)`{}`)})}function g(Q){const{schema:j,opts:Z,gen:V}=Q;h(Q,()=>{Z.$comment&&j.$comment&&T(Q),z(Q),V.let(c.default.vErrors,null),V.let(c.default.errors,0),Z.unevaluated&&v(Q),B(Q),w(Q)})}function v(Q){const{gen:j,validateName:Z}=Q;Q.evaluated=j.const("evaluated",(0,o._)`${Z}.evaluated`),j.if((0,o._)`${Q.evaluated}.dynamicProps`,()=>j.assign((0,o._)`${Q.evaluated}.props`,(0,o._)`undefined`)),j.if((0,o._)`${Q.evaluated}.dynamicItems`,()=>j.assign((0,o._)`${Q.evaluated}.items`,(0,o._)`undefined`))}function y(Q,j){const Z=typeof Q=="object"&&Q[j.schemaId];return Z&&(j.code.source||j.code.process)?(0,o._)`/*# sourceURL=${Z} */`:o.nil}function b(Q,j){if(x(Q)&&(k(Q),_(Q))){E(Q,j);return}(0,t.boolOrEmptySchema)(Q,j)}function _({schema:Q,self:j}){if(typeof Q=="boolean")return!Q;for(const Z in Q)if(j.RULES.all[Z])return!0;return!1}function x(Q){return typeof Q.schema!="boolean"}function E(Q,j){const{schema:Z,gen:V,opts:ne}=Q;ne.$comment&&Z.$comment&&T(Q),U(Q),S(Q);const se=V.const("_errs",c.default.errors);B(Q,se),V.var(j,(0,o._)`${se} === ${c.default.errors}`)}function k(Q){(0,l.checkUnknownRules)(Q),D(Q)}function B(Q,j){if(Q.opts.jtd)return F(Q,[],!1,j);const Z=(0,e.getSchemaTypes)(Q.schema),V=(0,e.coerceAndCheckDataType)(Q,Z);F(Q,Z,!V,j)}function D(Q){const{schema:j,errSchemaPath:Z,opts:V,self:ne}=Q;j.$ref&&V.ignoreKeywordsWithRef&&(0,l.schemaHasRulesButRef)(j,ne.RULES)&&ne.logger.warn(`$ref: keywords ignored in schema at path "${Z}"`)}function z(Q){const{schema:j,opts:Z}=Q;j.default!==void 0&&Z.useDefaults&&Z.strictSchema&&(0,l.checkStrictMode)(Q,"default is ignored in the schema root")}function U(Q){const j=Q.schema[Q.opts.schemaId];j&&(Q.baseId=(0,u.resolveUrl)(Q.opts.uriResolver,Q.baseId,j))}function S(Q){if(Q.schema.$async&&!Q.schemaEnv.$async)throw new Error("async schema in sync schema")}function T({gen:Q,schemaEnv:j,schema:Z,errSchemaPath:V,opts:ne}){const se=Z.$comment;if(ne.$comment===!0)Q.code((0,o._)`${c.default.self}.logger.log(${se})`);else if(typeof ne.$comment=="function"){const J=(0,o.str)`${V}/$comment`,ee=Q.scopeValue("root",{ref:j.root});Q.code((0,o._)`${c.default.self}.opts.$comment(${se}, ${J}, ${ee}.schema)`)}}function w(Q){const{gen:j,schemaEnv:Z,validateName:V,ValidationError:ne,opts:se}=Q;Z.$async?j.if((0,o._)`${c.default.errors} === 0`,()=>j.return(c.default.data),()=>j.throw((0,o._)`new ${ne}(${c.default.vErrors})`)):(j.assign((0,o._)`${V}.errors`,c.default.vErrors),se.unevaluated&&A(Q),j.return((0,o._)`${c.default.errors} === 0`))}function A({gen:Q,evaluated:j,props:Z,items:V}){Z instanceof o.Name&&Q.assign((0,o._)`${j}.props`,Z),V instanceof o.Name&&Q.assign((0,o._)`${j}.items`,V)}function F(Q,j,Z,V){const{gen:ne,schema:se,data:J,allErrors:ee,opts:ie,self:le}=Q,{RULES:ue}=le;if(se.$ref&&(ie.ignoreKeywordsWithRef||!(0,l.schemaHasRulesButRef)(se,ue))){ne.block(()=>q(Q,"$ref",ue.all.$ref.definition));return}ie.jtd||O(Q,j),ne.block(()=>{for(const be of ue.rules)me(be);me(ue.post)});function me(be){(0,r.shouldUseGroup)(se,be)&&(be.type?(ne.if((0,n.checkDataType)(be.type,J,ie.strictNumbers)),P(Q,be),j.length===1&&j[0]===be.type&&Z&&(ne.else(),(0,n.reportTypeError)(Q)),ne.endIf()):P(Q,be),ee||ne.if((0,o._)`${c.default.errors} === ${V||0}`))}}function P(Q,j){const{gen:Z,schema:V,opts:{useDefaults:ne}}=Q;ne&&(0,i.assignDefaults)(Q,j.type),Z.block(()=>{for(const se of j.rules)(0,r.shouldUseRule)(V,se)&&q(Q,se.keyword,se.definition,j.type)})}function O(Q,j){Q.schemaEnv.meta||!Q.opts.strictTypes||(R(Q,j),Q.opts.allowUnionTypes||I(Q,j),C(Q,Q.dataTypes))}function R(Q,j){if(j.length){if(!Q.dataTypes.length){Q.dataTypes=j;return}j.forEach(Z=>{L(Q.dataTypes,Z)||H(Q,`type "${Z}" not allowed by context "${Q.dataTypes.join(",")}"`)}),N(Q,j)}}function I(Q,j){j.length>1&&!(j.length===2&&j.includes("null"))&&H(Q,"use allowUnionTypes to allow union type keyword")}function C(Q,j){const Z=Q.self.RULES.all;for(const V in Z){const ne=Z[V];if(typeof ne=="object"&&(0,r.shouldUseRule)(Q.schema,ne)){const{type:se}=ne.definition;se.length&&!se.some(J=>M(j,J))&&H(Q,`missing type "${se.join(",")}" for keyword "${V}"`)}}}function M(Q,j){return Q.includes(j)||j==="number"&&Q.includes("integer")}function L(Q,j){return Q.includes(j)||j==="integer"&&Q.includes("number")}function N(Q,j){const Z=[];for(const V of Q.dataTypes)L(j,V)?Z.push(V):j.includes("integer")&&V==="number"&&Z.push("integer");Q.dataTypes=Z}function H(Q,j){const Z=Q.schemaEnv.baseId+Q.errSchemaPath;j+=` at "${Z}" (strictTypes)`,(0,l.checkStrictMode)(Q,j,Q.opts.strictTypes)}class W{constructor(j,Z,V){if((0,s.validateKeywordUsage)(j,Z,V),this.gen=j.gen,this.allErrors=j.allErrors,this.keyword=V,this.data=j.data,this.schema=j.schema[V],this.$data=Z.$data&&j.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,l.schemaRefOrVal)(j,this.schema,V,this.$data),this.schemaType=Z.schemaType,this.parentSchema=j.schema,this.params={},this.it=j,this.def=Z,this.$data)this.schemaCode=j.gen.const("vSchema",te(this.$data,j));else if(this.schemaCode=this.schemaValue,!(0,s.validSchemaType)(this.schema,Z.schemaType,Z.allowUndefined))throw new Error(`${V} value must be ${JSON.stringify(Z.schemaType)}`);("code"in Z?Z.trackErrors:Z.errors!==!1)&&(this.errsCount=j.gen.const("_errs",c.default.errors))}result(j,Z,V){this.failResult((0,o.not)(j),Z,V)}failResult(j,Z,V){this.gen.if(j),V?V():this.error(),Z?(this.gen.else(),Z(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(j,Z){this.failResult((0,o.not)(j),void 0,Z)}fail(j){if(j===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(j),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(j){if(!this.$data)return this.fail(j);const{schemaCode:Z}=this;this.fail((0,o._)`${Z} !== undefined && (${(0,o.or)(this.invalid$data(),j)})`)}error(j,Z,V){if(Z){this.setParams(Z),this._error(j,V),this.setParams({});return}this._error(j,V)}_error(j,Z){(j?f.reportExtraError:f.reportError)(this,this.def.error,Z)}$dataError(){(0,f.reportError)(this,this.def.$dataError||f.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,f.resetErrorsCount)(this.gen,this.errsCount)}ok(j){this.allErrors||this.gen.if(j)}setParams(j,Z){Z?Object.assign(this.params,j):this.params=j}block$data(j,Z,V=o.nil){this.gen.block(()=>{this.check$data(j,V),Z()})}check$data(j=o.nil,Z=o.nil){if(!this.$data)return;const{gen:V,schemaCode:ne,schemaType:se,def:J}=this;V.if((0,o.or)((0,o._)`${ne} === undefined`,Z)),j!==o.nil&&V.assign(j,!0),(se.length||J.validateSchema)&&(V.elseIf(this.invalid$data()),this.$dataError(),j!==o.nil&&V.assign(j,!1)),V.else()}invalid$data(){const{gen:j,schemaCode:Z,schemaType:V,def:ne,it:se}=this;return(0,o.or)(J(),ee());function J(){if(V.length){if(!(Z instanceof o.Name))throw new Error("ajv implementation error");const ie=Array.isArray(V)?V:[V];return(0,o._)`${(0,n.checkDataTypes)(ie,Z,se.opts.strictNumbers,n.DataType.Wrong)}`}return o.nil}function ee(){if(ne.validateSchema){const ie=j.scopeValue("validate$data",{ref:ne.validateSchema});return(0,o._)`!${ie}(${Z})`}return o.nil}}subschema(j,Z){const V=(0,a.getSubschema)(this.it,j);(0,a.extendSubschemaData)(V,this.it,j),(0,a.extendSubschemaMode)(V,j);const ne={...this.it,...V,items:void 0,props:void 0};return b(ne,Z),ne}mergeEvaluated(j,Z){const{it:V,gen:ne}=this;V.opts.unevaluated&&(V.props!==!0&&j.props!==void 0&&(V.props=l.mergeEvaluated.props(ne,j.props,V.props,Z)),V.items!==!0&&j.items!==void 0&&(V.items=l.mergeEvaluated.items(ne,j.items,V.items,Z)))}mergeValidEvaluated(j,Z){const{it:V,gen:ne}=this;if(V.opts.unevaluated&&(V.props!==!0||V.items!==!0))return ne.if(Z,()=>this.mergeEvaluated(j,o.Name)),!0}}Fl.KeywordCxt=W;function q(Q,j,Z,V){const ne=new W(Q,Z,j);"code"in Z?Z.code(ne,V):ne.$data&&Z.validate?(0,s.funcKeywordCode)(ne,Z):"macro"in Z?(0,s.macroKeywordCode)(ne,Z):(Z.compile||Z.validate)&&(0,s.funcKeywordCode)(ne,Z)}const G=/^\/(?:[^~]|~0|~1)*$/,Y=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function te(Q,{dataLevel:j,dataNames:Z,dataPathArr:V}){let ne,se;if(Q==="")return c.default.rootData;if(Q[0]==="/"){if(!G.test(Q))throw new Error(`Invalid JSON-pointer: ${Q}`);ne=Q,se=c.default.rootData}else{const le=Y.exec(Q);if(!le)throw new Error(`Invalid JSON-pointer: ${Q}`);const ue=+le[1];if(ne=le[2],ne==="#"){if(ue>=j)throw new Error(ie("property/index",ue));return V[j-ue]}if(ue>j)throw new Error(ie("data",ue));if(se=Z[j-ue],!ne)return se}let J=se;const ee=ne.split("/");for(const le of ee)le&&(se=(0,o._)`${se}${(0,o.getProperty)((0,l.unescapeJsonPointer)(le))}`,J=(0,o._)`${J} && ${se}`);return J;function ie(le,ue){return`Cannot access ${le} ${ue} levels up, current level is ${j}`}}return Fl.getData=te,Fl}var mb={},fz;function $B(){if(fz)return mb;fz=1,Object.defineProperty(mb,"__esModule",{value:!0});class t extends Error{constructor(r){super("validation failed"),this.errors=r,this.ajv=this.validation=!0}}return mb.default=t,mb}var gb={},dz;function k5(){if(dz)return gb;dz=1,Object.defineProperty(gb,"__esModule",{value:!0});const t=S5();class e extends Error{constructor(n,i,s,a){super(a||`can't resolve reference ${s} from id ${i}`),this.missingRef=(0,t.resolveUrl)(n,i,s),this.missingSchema=(0,t.normalizeId)((0,t.getFullPath)(n,this.missingRef))}}return gb.default=e,gb}var Ba={},hz;function UB(){if(hz)return Ba;hz=1,Object.defineProperty(Ba,"__esModule",{value:!0}),Ba.resolveSchema=Ba.getCompilingSchema=Ba.resolveRef=Ba.compileSchema=Ba.SchemaEnv=void 0;const t=br(),e=$B(),r=gd(),n=S5(),i=jr(),s=E5();class a{constructor(v){var y;this.refs={},this.dynamicAnchors={};let b;typeof v.schema=="object"&&(b=v.schema),this.schema=v.schema,this.schemaId=v.schemaId,this.root=v.root||this,this.baseId=(y=v.baseId)!==null&&y!==void 0?y:(0,n.normalizeId)(b?.[v.schemaId||"$id"]),this.schemaPath=v.schemaPath,this.localRefs=v.localRefs,this.meta=v.meta,this.$async=b?.$async,this.refs={}}}Ba.SchemaEnv=a;function o(g){const v=l.call(this,g);if(v)return v;const y=(0,n.getFullPath)(this.opts.uriResolver,g.root.baseId),{es5:b,lines:_}=this.opts.code,{ownProperties:x}=this.opts,E=new t.CodeGen(this.scope,{es5:b,lines:_,ownProperties:x});let k;g.$async&&(k=E.scopeValue("Error",{ref:e.default,code:(0,t._)`require("ajv/dist/runtime/validation_error").default`}));const B=E.scopeName("validate");g.validateName=B;const D={gen:E,allErrors:this.opts.allErrors,data:r.default.data,parentData:r.default.parentData,parentDataProperty:r.default.parentDataProperty,dataNames:[r.default.data],dataPathArr:[t.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:E.scopeValue("schema",this.opts.code.source===!0?{ref:g.schema,code:(0,t.stringify)(g.schema)}:{ref:g.schema}),validateName:B,ValidationError:k,schema:g.schema,schemaEnv:g,rootId:y,baseId:g.baseId||y,schemaPath:t.nil,errSchemaPath:g.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,t._)`""`,opts:this.opts,self:this};let z;try{this._compilations.add(g),(0,s.validateFunctionCode)(D),E.optimize(this.opts.code.optimize);const U=E.toString();z=`${E.scopeRefs(r.default.scope)}return ${U}`,this.opts.code.process&&(z=this.opts.code.process(z,g));const T=new Function(`${r.default.self}`,`${r.default.scope}`,z)(this,this.scope.get());if(this.scope.value(B,{ref:T}),T.errors=null,T.schema=g.schema,T.schemaEnv=g,g.$async&&(T.$async=!0),this.opts.code.source===!0&&(T.source={validateName:B,validateCode:U,scopeValues:E._values}),this.opts.unevaluated){const{props:w,items:A}=D;T.evaluated={props:w instanceof t.Name?void 0:w,items:A instanceof t.Name?void 0:A,dynamicProps:w instanceof t.Name,dynamicItems:A instanceof t.Name},T.source&&(T.source.evaluated=(0,t.stringify)(T.evaluated))}return g.validate=T,g}catch(U){throw delete g.validate,delete g.validateName,z&&this.logger.error("Error compiling schema, function code:",z),U}finally{this._compilations.delete(g)}}Ba.compileSchema=o;function c(g,v,y){var b;y=(0,n.resolveUrl)(this.opts.uriResolver,v,y);const _=g.refs[y];if(_)return _;let x=d.call(this,g,y);if(x===void 0){const E=(b=g.localRefs)===null||b===void 0?void 0:b[y],{schemaId:k}=this.opts;E&&(x=new a({schema:E,schemaId:k,root:g,baseId:v}))}if(x!==void 0)return g.refs[y]=u.call(this,x)}Ba.resolveRef=c;function u(g){return(0,n.inlineRef)(g.schema,this.opts.inlineRefs)?g.schema:g.validate?g:o.call(this,g)}function l(g){for(const v of this._compilations)if(f(v,g))return v}Ba.getCompilingSchema=l;function f(g,v){return g.schema===v.schema&&g.root===v.root&&g.baseId===v.baseId}function d(g,v){let y;for(;typeof(y=this.refs[v])=="string";)v=y;return y||this.schemas[v]||h.call(this,g,v)}function h(g,v){const y=this.opts.uriResolver.parse(v),b=(0,n._getFullPath)(this.opts.uriResolver,y);let _=(0,n.getFullPath)(this.opts.uriResolver,g.baseId,void 0);if(Object.keys(g.schema).length>0&&b===_)return p.call(this,y,g);const x=(0,n.normalizeId)(b),E=this.refs[x]||this.schemas[x];if(typeof E=="string"){const k=h.call(this,g,E);return typeof k?.schema!="object"?void 0:p.call(this,y,k)}if(typeof E?.schema=="object"){if(E.validate||o.call(this,E),x===(0,n.normalizeId)(v)){const{schema:k}=E,{schemaId:B}=this.opts,D=k[B];return D&&(_=(0,n.resolveUrl)(this.opts.uriResolver,_,D)),new a({schema:k,schemaId:B,root:g,baseId:_})}return p.call(this,y,E)}}Ba.resolveSchema=h;const m=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function p(g,{baseId:v,schema:y,root:b}){var _;if(((_=g.fragment)===null||_===void 0?void 0:_[0])!=="/")return;for(const k of g.fragment.slice(1).split("/")){if(typeof y=="boolean")return;const B=y[(0,i.unescapeFragment)(k)];if(B===void 0)return;y=B;const D=typeof y=="object"&&y[this.opts.schemaId];!m.has(k)&&D&&(v=(0,n.resolveUrl)(this.opts.uriResolver,v,D))}let x;if(typeof y!="boolean"&&y.$ref&&!(0,i.schemaHasRulesButRef)(y,this.RULES)){const k=(0,n.resolveUrl)(this.opts.uriResolver,v,y.$ref);x=h.call(this,b,k)}const{schemaId:E}=this.opts;if(x=x||new a({schema:y,schemaId:E,root:b,baseId:v}),x.schema!==x.root.schema)return x}return Ba}const Uje="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",jje="Meta-schema for $data reference (JSON AnySchema extension proposal)",Vje="object",qje=["$data"],zje={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},Hje=!1,Wje={$id:Uje,description:jje,type:Vje,required:qje,properties:zje,additionalProperties:Hje};var vb={},zm={exports:{}},XS,pz;function Gje(){return pz||(pz=1,XS={HEX:{0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15}}),XS}var YS,mz;function Kje(){if(mz)return YS;mz=1;const{HEX:t}=Gje(),e=/^(?:(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)$/u;function r(p){if(o(p,".")<3)return{host:p,isIPV4:!1};const g=p.match(e)||[],[v]=g;return v?{host:a(v,"."),isIPV4:!0}:{host:p,isIPV4:!1}}function n(p,g=!1){let v="",y=!0;for(const b of p){if(t[b]===void 0)return;b!=="0"&&y===!0&&(y=!1),y||(v+=b)}return g&&v.length===0&&(v="0"),v}function i(p){let g=0;const v={error:!1,address:"",zone:""},y=[],b=[];let _=!1,x=!1,E=!1;function k(){if(b.length){if(_===!1){const B=n(b);if(B!==void 0)y.push(B);else return v.error=!0,!1}b.length=0}return!0}for(let B=0;B<p.length;B++){const D=p[B];if(!(D==="["||D==="]"))if(D===":"){if(x===!0&&(E=!0),!k())break;if(g++,y.push(":"),g>7){v.error=!0;break}B-1>=0&&p[B-1]===":"&&(x=!0);continue}else if(D==="%"){if(!k())break;_=!0}else{b.push(D);continue}}return b.length&&(_?v.zone=b.join(""):E?y.push(b.join("")):y.push(n(b))),v.address=y.join(""),v}function s(p){if(o(p,":")<2)return{host:p,isIPV6:!1};const g=i(p);if(g.error)return{host:p,isIPV6:!1};{let v=g.address,y=g.address;return g.zone&&(v+="%"+g.zone,y+="%25"+g.zone),{host:v,escapedHost:y,isIPV6:!0}}}function a(p,g){let v="",y=!0;const b=p.length;for(let _=0;_<b;_++){const x=p[_];x==="0"&&y?(_+1<=b&&p[_+1]===g||_+1===b)&&(v+=x,y=!1):(x===g?y=!0:y=!1,v+=x)}return v}function o(p,g){let v=0;for(let y=0;y<p.length;y++)p[y]===g&&v++;return v}const c=/^\.\.?\//u,u=/^\/\.(?:\/|$)/u,l=/^\/\.\.(?:\/|$)/u,f=/^\/?(?:.|\n)*?(?=\/|$)/u;function d(p){const g=[];for(;p.length;)if(p.match(c))p=p.replace(c,"");else if(p.match(u))p=p.replace(u,"/");else if(p.match(l))p=p.replace(l,"/"),g.pop();else if(p==="."||p==="..")p="";else{const v=p.match(f);if(v){const y=v[0];p=p.slice(y.length),g.push(y)}else throw new Error("Unexpected dot segment condition")}return g.join("")}function h(p,g){const v=g!==!0?escape:unescape;return p.scheme!==void 0&&(p.scheme=v(p.scheme)),p.userinfo!==void 0&&(p.userinfo=v(p.userinfo)),p.host!==void 0&&(p.host=v(p.host)),p.path!==void 0&&(p.path=v(p.path)),p.query!==void 0&&(p.query=v(p.query)),p.fragment!==void 0&&(p.fragment=v(p.fragment)),p}function m(p){const g=[];if(p.userinfo!==void 0&&(g.push(p.userinfo),g.push("@")),p.host!==void 0){let v=unescape(p.host);const y=r(v);if(y.isIPV4)v=y.host;else{const b=s(y.host);b.isIPV6===!0?v=`[${b.escapedHost}]`:v=p.host}g.push(v)}return(typeof p.port=="number"||typeof p.port=="string")&&(g.push(":"),g.push(String(p.port))),g.length?g.join(""):void 0}return YS={recomposeAuthority:m,normalizeComponentEncoding:h,removeDotSegments:d,normalizeIPv4:r,normalizeIPv6:s,stringArrayToHexStripped:n},YS}var ZS,gz;function Xje(){if(gz)return ZS;gz=1;const t=/^[\da-f]{8}-[\da-f]{4}-[\da-f]{4}-[\da-f]{4}-[\da-f]{12}$/iu,e=/([\da-z][\d\-a-z]{0,31}):((?:[\w!$'()*+,\-.:;=@]|%[\da-f]{2})+)/iu;function r(y){return typeof y.secure=="boolean"?y.secure:String(y.scheme).toLowerCase()==="wss"}function n(y){return y.host||(y.error=y.error||"HTTP URIs must have a host."),y}function i(y){const b=String(y.scheme).toLowerCase()==="https";return(y.port===(b?443:80)||y.port==="")&&(y.port=void 0),y.path||(y.path="/"),y}function s(y){return y.secure=r(y),y.resourceName=(y.path||"/")+(y.query?"?"+y.query:""),y.path=void 0,y.query=void 0,y}function a(y){if((y.port===(r(y)?443:80)||y.port==="")&&(y.port=void 0),typeof y.secure=="boolean"&&(y.scheme=y.secure?"wss":"ws",y.secure=void 0),y.resourceName){const[b,_]=y.resourceName.split("?");y.path=b&&b!=="/"?b:void 0,y.query=_,y.resourceName=void 0}return y.fragment=void 0,y}function o(y,b){if(!y.path)return y.error="URN can not be parsed",y;const _=y.path.match(e);if(_){const x=b.scheme||y.scheme||"urn";y.nid=_[1].toLowerCase(),y.nss=_[2];const E=`${x}:${b.nid||y.nid}`,k=v[E];y.path=void 0,k&&(y=k.parse(y,b))}else y.error=y.error||"URN can not be parsed.";return y}function c(y,b){const _=b.scheme||y.scheme||"urn",x=y.nid.toLowerCase(),E=`${_}:${b.nid||x}`,k=v[E];k&&(y=k.serialize(y,b));const B=y,D=y.nss;return B.path=`${x||b.nid}:${D}`,b.skipEscape=!0,B}function u(y,b){const _=y;return _.uuid=_.nss,_.nss=void 0,!b.tolerant&&(!_.uuid||!t.test(_.uuid))&&(_.error=_.error||"UUID is not valid."),_}function l(y){const b=y;return b.nss=(y.uuid||"").toLowerCase(),b}const f={scheme:"http",domainHost:!0,parse:n,serialize:i},d={scheme:"https",domainHost:f.domainHost,parse:n,serialize:i},h={scheme:"ws",domainHost:!0,parse:s,serialize:a},m={scheme:"wss",domainHost:h.domainHost,parse:h.parse,serialize:h.serialize},v={http:f,https:d,ws:h,wss:m,urn:{scheme:"urn",parse:o,serialize:c,skipNormalize:!0},"urn:uuid":{scheme:"urn:uuid",parse:u,serialize:l,skipNormalize:!0}};return ZS=v,ZS}var vz;function Yje(){if(vz)return zm.exports;vz=1;const{normalizeIPv6:t,normalizeIPv4:e,removeDotSegments:r,recomposeAuthority:n,normalizeComponentEncoding:i}=Kje(),s=Xje();function a(g,v){return typeof g=="string"?g=l(m(g,v),v):typeof g=="object"&&(g=m(l(g,v),v)),g}function o(g,v,y){const b=Object.assign({scheme:"null"},y),_=c(m(g,b),m(v,b),b,!0);return l(_,{...b,skipEscape:!0})}function c(g,v,y,b){const _={};return b||(g=m(l(g,y),y),v=m(l(v,y),y)),y=y||{},!y.tolerant&&v.scheme?(_.scheme=v.scheme,_.userinfo=v.userinfo,_.host=v.host,_.port=v.port,_.path=r(v.path||""),_.query=v.query):(v.userinfo!==void 0||v.host!==void 0||v.port!==void 0?(_.userinfo=v.userinfo,_.host=v.host,_.port=v.port,_.path=r(v.path||""),_.query=v.query):(v.path?(v.path.charAt(0)==="/"?_.path=r(v.path):((g.userinfo!==void 0||g.host!==void 0||g.port!==void 0)&&!g.path?_.path="/"+v.path:g.path?_.path=g.path.slice(0,g.path.lastIndexOf("/")+1)+v.path:_.path=v.path,_.path=r(_.path)),_.query=v.query):(_.path=g.path,v.query!==void 0?_.query=v.query:_.query=g.query),_.userinfo=g.userinfo,_.host=g.host,_.port=g.port),_.scheme=g.scheme),_.fragment=v.fragment,_}function u(g,v,y){return typeof g=="string"?(g=unescape(g),g=l(i(m(g,y),!0),{...y,skipEscape:!0})):typeof g=="object"&&(g=l(i(g,!0),{...y,skipEscape:!0})),typeof v=="string"?(v=unescape(v),v=l(i(m(v,y),!0),{...y,skipEscape:!0})):typeof v=="object"&&(v=l(i(v,!0),{...y,skipEscape:!0})),g.toLowerCase()===v.toLowerCase()}function l(g,v){const y={host:g.host,scheme:g.scheme,userinfo:g.userinfo,port:g.port,path:g.path,query:g.query,nid:g.nid,nss:g.nss,uuid:g.uuid,fragment:g.fragment,reference:g.reference,resourceName:g.resourceName,secure:g.secure,error:""},b=Object.assign({},v),_=[],x=s[(b.scheme||y.scheme||"").toLowerCase()];x&&x.serialize&&x.serialize(y,b),y.path!==void 0&&(b.skipEscape?y.path=unescape(y.path):(y.path=escape(y.path),y.scheme!==void 0&&(y.path=y.path.split("%3A").join(":")))),b.reference!=="suffix"&&y.scheme&&_.push(y.scheme,":");const E=n(y);if(E!==void 0&&(b.reference!=="suffix"&&_.push("//"),_.push(E),y.path&&y.path.charAt(0)!=="/"&&_.push("/")),y.path!==void 0){let k=y.path;!b.absolutePath&&(!x||!x.absolutePath)&&(k=r(k)),E===void 0&&(k=k.replace(/^\/\//u,"/%2F")),_.push(k)}return y.query!==void 0&&_.push("?",y.query),y.fragment!==void 0&&_.push("#",y.fragment),_.join("")}const f=Array.from({length:127},(g,v)=>/[^!"$&'()*+,\-.;=_`a-z{}~]/u.test(String.fromCharCode(v)));function d(g){let v=0;for(let y=0,b=g.length;y<b;++y)if(v=g.charCodeAt(y),v>126||f[v])return!0;return!1}const h=/^(?:([^#/:?]+):)?(?:\/\/((?:([^#/?@]*)@)?(\[[^#/?\]]+\]|[^#/:?]*)(?::(\d*))?))?([^#?]*)(?:\?([^#]*))?(?:#((?:.|[\n\r])*))?/u;function m(g,v){const y=Object.assign({},v),b={scheme:void 0,userinfo:void 0,host:"",port:void 0,path:"",query:void 0,fragment:void 0},_=g.indexOf("%")!==-1;let x=!1;y.reference==="suffix"&&(g=(y.scheme?y.scheme+":":"")+"//"+g);const E=g.match(h);if(E){if(b.scheme=E[1],b.userinfo=E[3],b.host=E[4],b.port=parseInt(E[5],10),b.path=E[6]||"",b.query=E[7],b.fragment=E[8],isNaN(b.port)&&(b.port=E[5]),b.host){const B=e(b.host);if(B.isIPV4===!1){const D=t(B.host);b.host=D.host.toLowerCase(),x=D.isIPV6}else b.host=B.host,x=!0}b.scheme===void 0&&b.userinfo===void 0&&b.host===void 0&&b.port===void 0&&b.query===void 0&&!b.path?b.reference="same-document":b.scheme===void 0?b.reference="relative":b.fragment===void 0?b.reference="absolute":b.reference="uri",y.reference&&y.reference!=="suffix"&&y.reference!==b.reference&&(b.error=b.error||"URI is not a "+y.reference+" reference.");const k=s[(y.scheme||b.scheme||"").toLowerCase()];if(!y.unicodeSupport&&(!k||!k.unicodeSupport)&&b.host&&(y.domainHost||k&&k.domainHost)&&x===!1&&d(b.host))try{b.host=URL.domainToASCII(b.host.toLowerCase())}catch(B){b.error=b.error||"Host's domain name can not be converted to ASCII: "+B}(!k||k&&!k.skipNormalize)&&(_&&b.scheme!==void 0&&(b.scheme=unescape(b.scheme)),_&&b.host!==void 0&&(b.host=unescape(b.host)),b.path&&(b.path=escape(unescape(b.path))),b.fragment&&(b.fragment=encodeURI(decodeURIComponent(b.fragment)))),k&&k.parse&&k.parse(b,y)}else b.error=b.error||"URI can not be parsed.";return b}const p={SCHEMES:s,normalize:a,resolve:o,resolveComponents:c,equal:u,serialize:l,parse:m};return zm.exports=p,zm.exports.default=p,zm.exports.fastUri=p,zm.exports}var yz;function Zje(){if(yz)return vb;yz=1,Object.defineProperty(vb,"__esModule",{value:!0});const t=Yje();return t.code='require("ajv/dist/runtime/uri").default',vb.default=t,vb}var bz;function Jje(){return bz||(bz=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=void 0;var e=E5();Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return e.KeywordCxt}});var r=br();Object.defineProperty(t,"_",{enumerable:!0,get:function(){return r._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return r.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return r.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return r.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return r.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return r.CodeGen}});const n=$B(),i=k5(),s=Loe(),a=UB(),o=br(),c=S5(),u=z4(),l=jr(),f=Wje,d=Zje(),h=(I,C)=>new RegExp(I,C);h.code="new RegExp";const m=["removeAdditional","useDefaults","coerceTypes"],p=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),g={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},v={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},y=200;function b(I){var C,M,L,N,H,W,q,G,Y,te,Q,j,Z,V,ne,se,J,ee,ie,le,ue,me,be,_e,xe;const Be=I.strict,re=(C=I.code)===null||C===void 0?void 0:C.optimize,K=re===!0||re===void 0?1:re||0,X=(L=(M=I.code)===null||M===void 0?void 0:M.regExp)!==null&&L!==void 0?L:h,ce=(N=I.uriResolver)!==null&&N!==void 0?N:d.default;return{strictSchema:(W=(H=I.strictSchema)!==null&&H!==void 0?H:Be)!==null&&W!==void 0?W:!0,strictNumbers:(G=(q=I.strictNumbers)!==null&&q!==void 0?q:Be)!==null&&G!==void 0?G:!0,strictTypes:(te=(Y=I.strictTypes)!==null&&Y!==void 0?Y:Be)!==null&&te!==void 0?te:"log",strictTuples:(j=(Q=I.strictTuples)!==null&&Q!==void 0?Q:Be)!==null&&j!==void 0?j:"log",strictRequired:(V=(Z=I.strictRequired)!==null&&Z!==void 0?Z:Be)!==null&&V!==void 0?V:!1,code:I.code?{...I.code,optimize:K,regExp:X}:{optimize:K,regExp:X},loopRequired:(ne=I.loopRequired)!==null&&ne!==void 0?ne:y,loopEnum:(se=I.loopEnum)!==null&&se!==void 0?se:y,meta:(J=I.meta)!==null&&J!==void 0?J:!0,messages:(ee=I.messages)!==null&&ee!==void 0?ee:!0,inlineRefs:(ie=I.inlineRefs)!==null&&ie!==void 0?ie:!0,schemaId:(le=I.schemaId)!==null&&le!==void 0?le:"$id",addUsedSchema:(ue=I.addUsedSchema)!==null&&ue!==void 0?ue:!0,validateSchema:(me=I.validateSchema)!==null&&me!==void 0?me:!0,validateFormats:(be=I.validateFormats)!==null&&be!==void 0?be:!0,unicodeRegExp:(_e=I.unicodeRegExp)!==null&&_e!==void 0?_e:!0,int32range:(xe=I.int32range)!==null&&xe!==void 0?xe:!0,uriResolver:ce}}class _{constructor(C={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,C=this.opts={...C,...b(C)};const{es5:M,lines:L}=this.opts.code;this.scope=new o.ValueScope({scope:{},prefixes:p,es5:M,lines:L}),this.logger=S(C.logger);const N=C.validateFormats;C.validateFormats=!1,this.RULES=(0,s.getRules)(),x.call(this,g,C,"NOT SUPPORTED"),x.call(this,v,C,"DEPRECATED","warn"),this._metaOpts=z.call(this),C.formats&&B.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),C.keywords&&D.call(this,C.keywords),typeof C.meta=="object"&&this.addMetaSchema(C.meta),k.call(this),C.validateFormats=N}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:C,meta:M,schemaId:L}=this.opts;let N=f;L==="id"&&(N={...f},N.id=N.$id,delete N.$id),M&&C&&this.addMetaSchema(N,N[L],!1)}defaultMeta(){const{meta:C,schemaId:M}=this.opts;return this.opts.defaultMeta=typeof C=="object"?C[M]||C:void 0}validate(C,M){let L;if(typeof C=="string"){if(L=this.getSchema(C),!L)throw new Error(`no schema with key or ref "${C}"`)}else L=this.compile(C);const N=L(M);return"$async"in L||(this.errors=L.errors),N}compile(C,M){const L=this._addSchema(C,M);return L.validate||this._compileSchemaEnv(L)}compileAsync(C,M){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:L}=this.opts;return N.call(this,C,M);async function N(te,Q){await H.call(this,te.$schema);const j=this._addSchema(te,Q);return j.validate||W.call(this,j)}async function H(te){te&&!this.getSchema(te)&&await N.call(this,{$ref:te},!0)}async function W(te){try{return this._compileSchemaEnv(te)}catch(Q){if(!(Q instanceof i.default))throw Q;return q.call(this,Q),await G.call(this,Q.missingSchema),W.call(this,te)}}function q({missingSchema:te,missingRef:Q}){if(this.refs[te])throw new Error(`AnySchema ${te} is loaded but ${Q} cannot be resolved`)}async function G(te){const Q=await Y.call(this,te);this.refs[te]||await H.call(this,Q.$schema),this.refs[te]||this.addSchema(Q,te,M)}async function Y(te){const Q=this._loading[te];if(Q)return Q;try{return await(this._loading[te]=L(te))}finally{delete this._loading[te]}}}addSchema(C,M,L,N=this.opts.validateSchema){if(Array.isArray(C)){for(const W of C)this.addSchema(W,void 0,L,N);return this}let H;if(typeof C=="object"){const{schemaId:W}=this.opts;if(H=C[W],H!==void 0&&typeof H!="string")throw new Error(`schema ${W} must be string`)}return M=(0,c.normalizeId)(M||H),this._checkUnique(M),this.schemas[M]=this._addSchema(C,L,M,N,!0),this}addMetaSchema(C,M,L=this.opts.validateSchema){return this.addSchema(C,M,!0,L),this}validateSchema(C,M){if(typeof C=="boolean")return!0;let L;if(L=C.$schema,L!==void 0&&typeof L!="string")throw new Error("$schema must be a string");if(L=L||this.opts.defaultMeta||this.defaultMeta(),!L)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const N=this.validate(L,C);if(!N&&M){const H="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(H);else throw new Error(H)}return N}getSchema(C){let M;for(;typeof(M=E.call(this,C))=="string";)C=M;if(M===void 0){const{schemaId:L}=this.opts,N=new a.SchemaEnv({schema:{},schemaId:L});if(M=a.resolveSchema.call(this,N,C),!M)return;this.refs[C]=M}return M.validate||this._compileSchemaEnv(M)}removeSchema(C){if(C instanceof RegExp)return this._removeAllSchemas(this.schemas,C),this._removeAllSchemas(this.refs,C),this;switch(typeof C){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const M=E.call(this,C);return typeof M=="object"&&this._cache.delete(M.schema),delete this.schemas[C],delete this.refs[C],this}case"object":{const M=C;this._cache.delete(M);let L=C[this.opts.schemaId];return L&&(L=(0,c.normalizeId)(L),delete this.schemas[L],delete this.refs[L]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(C){for(const M of C)this.addKeyword(M);return this}addKeyword(C,M){let L;if(typeof C=="string")L=C,typeof M=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),M.keyword=L);else if(typeof C=="object"&&M===void 0){if(M=C,L=M.keyword,Array.isArray(L)&&!L.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(w.call(this,L,M),!M)return(0,l.eachItem)(L,H=>A.call(this,H)),this;P.call(this,M);const N={...M,type:(0,u.getJSONTypes)(M.type),schemaType:(0,u.getJSONTypes)(M.schemaType)};return(0,l.eachItem)(L,N.type.length===0?H=>A.call(this,H,N):H=>N.type.forEach(W=>A.call(this,H,N,W))),this}getKeyword(C){const M=this.RULES.all[C];return typeof M=="object"?M.definition:!!M}removeKeyword(C){const{RULES:M}=this;delete M.keywords[C],delete M.all[C];for(const L of M.rules){const N=L.rules.findIndex(H=>H.keyword===C);N>=0&&L.rules.splice(N,1)}return this}addFormat(C,M){return typeof M=="string"&&(M=new RegExp(M)),this.formats[C]=M,this}errorsText(C=this.errors,{separator:M=", ",dataVar:L="data"}={}){return!C||C.length===0?"No errors":C.map(N=>`${L}${N.instancePath} ${N.message}`).reduce((N,H)=>N+M+H)}$dataMetaSchema(C,M){const L=this.RULES.all;C=JSON.parse(JSON.stringify(C));for(const N of M){const H=N.split("/").slice(1);let W=C;for(const q of H)W=W[q];for(const q in L){const G=L[q];if(typeof G!="object")continue;const{$data:Y}=G.definition,te=W[q];Y&&te&&(W[q]=R(te))}}return C}_removeAllSchemas(C,M){for(const L in C){const N=C[L];(!M||M.test(L))&&(typeof N=="string"?delete C[L]:N&&!N.meta&&(this._cache.delete(N.schema),delete C[L]))}}_addSchema(C,M,L,N=this.opts.validateSchema,H=this.opts.addUsedSchema){let W;const{schemaId:q}=this.opts;if(typeof C=="object")W=C[q];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof C!="boolean")throw new Error("schema must be object or boolean")}let G=this._cache.get(C);if(G!==void 0)return G;L=(0,c.normalizeId)(W||L);const Y=c.getSchemaRefs.call(this,C,L);return G=new a.SchemaEnv({schema:C,schemaId:q,meta:M,baseId:L,localRefs:Y}),this._cache.set(G.schema,G),H&&!L.startsWith("#")&&(L&&this._checkUnique(L),this.refs[L]=G),N&&this.validateSchema(C,!0),G}_checkUnique(C){if(this.schemas[C]||this.refs[C])throw new Error(`schema with key or id "${C}" already exists`)}_compileSchemaEnv(C){if(C.meta?this._compileMetaSchema(C):a.compileSchema.call(this,C),!C.validate)throw new Error("ajv implementation error");return C.validate}_compileMetaSchema(C){const M=this.opts;this.opts=this._metaOpts;try{a.compileSchema.call(this,C)}finally{this.opts=M}}}_.ValidationError=n.default,_.MissingRefError=i.default,t.default=_;function x(I,C,M,L="error"){for(const N in I){const H=N;H in C&&this.logger[L](`${M}: option ${N}. ${I[H]}`)}}function E(I){return I=(0,c.normalizeId)(I),this.schemas[I]||this.refs[I]}function k(){const I=this.opts.schemas;if(I)if(Array.isArray(I))this.addSchema(I);else for(const C in I)this.addSchema(I[C],C)}function B(){for(const I in this.opts.formats){const C=this.opts.formats[I];C&&this.addFormat(I,C)}}function D(I){if(Array.isArray(I)){this.addVocabulary(I);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const C in I){const M=I[C];M.keyword||(M.keyword=C),this.addKeyword(M)}}function z(){const I={...this.opts};for(const C of m)delete I[C];return I}const U={log(){},warn(){},error(){}};function S(I){if(I===!1)return U;if(I===void 0)return console;if(I.log&&I.warn&&I.error)return I;throw new Error("logger must implement log, warn and error methods")}const T=/^[a-z_$][a-z0-9_$:-]*$/i;function w(I,C){const{RULES:M}=this;if((0,l.eachItem)(I,L=>{if(M.keywords[L])throw new Error(`Keyword ${L} is already defined`);if(!T.test(L))throw new Error(`Keyword ${L} has invalid name`)}),!!C&&C.$data&&!("code"in C||"validate"in C))throw new Error('$data keyword must have "code" or "validate" function')}function A(I,C,M){var L;const N=C?.post;if(M&&N)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:H}=this;let W=N?H.post:H.rules.find(({type:G})=>G===M);if(W||(W={type:M,rules:[]},H.rules.push(W)),H.keywords[I]=!0,!C)return;const q={keyword:I,definition:{...C,type:(0,u.getJSONTypes)(C.type),schemaType:(0,u.getJSONTypes)(C.schemaType)}};C.before?F.call(this,W,q,C.before):W.rules.push(q),H.all[I]=q,(L=C.implements)===null||L===void 0||L.forEach(G=>this.addKeyword(G))}function F(I,C,M){const L=I.rules.findIndex(N=>N.keyword===M);L>=0?I.rules.splice(L,0,C):(I.rules.push(C),this.logger.warn(`rule ${M} is not defined`))}function P(I){let{metaSchema:C}=I;C!==void 0&&(I.$data&&this.opts.$data&&(C=R(C)),I.validateSchema=this.compile(C,!0))}const O={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function R(I){return{anyOf:[I,O]}}}(VS)),VS}var yb={},bb={},wb={},wz;function Qje(){if(wz)return wb;wz=1,Object.defineProperty(wb,"__esModule",{value:!0});const t={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};return wb.default=t,wb}var nf={},_z;function eVe(){if(_z)return nf;_z=1,Object.defineProperty(nf,"__esModule",{value:!0}),nf.callRef=nf.getValidate=void 0;const t=k5(),e=Ic(),r=br(),n=gd(),i=UB(),s=jr(),a={keyword:"$ref",schemaType:"string",code(u){const{gen:l,schema:f,it:d}=u,{baseId:h,schemaEnv:m,validateName:p,opts:g,self:v}=d,{root:y}=m;if((f==="#"||f==="#/")&&h===y.baseId)return _();const b=i.resolveRef.call(v,y,h,f);if(b===void 0)throw new t.default(d.opts.uriResolver,h,f);if(b instanceof i.SchemaEnv)return x(b);return E(b);function _(){if(m===y)return c(u,p,m,m.$async);const k=l.scopeValue("root",{ref:y});return c(u,(0,r._)`${k}.validate`,y,y.$async)}function x(k){const B=o(u,k);c(u,B,k,k.$async)}function E(k){const B=l.scopeValue("schema",g.code.source===!0?{ref:k,code:(0,r.stringify)(k)}:{ref:k}),D=l.name("valid"),z=u.subschema({schema:k,dataTypes:[],schemaPath:r.nil,topSchemaRef:B,errSchemaPath:f},D);u.mergeEvaluated(z),u.ok(D)}}};function o(u,l){const{gen:f}=u;return l.validate?f.scopeValue("validate",{ref:l.validate}):(0,r._)`${f.scopeValue("wrapper",{ref:l})}.validate`}nf.getValidate=o;function c(u,l,f,d){const{gen:h,it:m}=u,{allErrors:p,schemaEnv:g,opts:v}=m,y=v.passContext?n.default.this:r.nil;d?b():_();function b(){if(!g.$async)throw new Error("async schema referenced by sync schema");const k=h.let("valid");h.try(()=>{h.code((0,r._)`await ${(0,e.callValidateCode)(u,l,y)}`),E(l),p||h.assign(k,!0)},B=>{h.if((0,r._)`!(${B} instanceof ${m.ValidationError})`,()=>h.throw(B)),x(B),p||h.assign(k,!1)}),u.ok(k)}function _(){u.result((0,e.callValidateCode)(u,l,y),()=>E(l),()=>x(l))}function x(k){const B=(0,r._)`${k}.errors`;h.assign(n.default.vErrors,(0,r._)`${n.default.vErrors} === null ? ${B} : ${n.default.vErrors}.concat(${B})`),h.assign(n.default.errors,(0,r._)`${n.default.vErrors}.length`)}function E(k){var B;if(!m.opts.unevaluated)return;const D=(B=f?.validate)===null||B===void 0?void 0:B.evaluated;if(m.props!==!0)if(D&&!D.dynamicProps)D.props!==void 0&&(m.props=s.mergeEvaluated.props(h,D.props,m.props));else{const z=h.var("props",(0,r._)`${k}.evaluated.props`);m.props=s.mergeEvaluated.props(h,z,m.props,r.Name)}if(m.items!==!0)if(D&&!D.dynamicItems)D.items!==void 0&&(m.items=s.mergeEvaluated.items(h,D.items,m.items));else{const z=h.var("items",(0,r._)`${k}.evaluated.items`);m.items=s.mergeEvaluated.items(h,z,m.items,r.Name)}}}return nf.callRef=c,nf.default=a,nf}var xz;function tVe(){if(xz)return bb;xz=1,Object.defineProperty(bb,"__esModule",{value:!0});const t=Qje(),e=eVe(),r=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",t.default,e.default];return bb.default=r,bb}var _b={},xb={},Sz;function rVe(){if(Sz)return xb;Sz=1,Object.defineProperty(xb,"__esModule",{value:!0});const t=br(),e=t.operators,r={maximum:{okStr:"<=",ok:e.LTE,fail:e.GT},minimum:{okStr:">=",ok:e.GTE,fail:e.LT},exclusiveMaximum:{okStr:"<",ok:e.LT,fail:e.GTE},exclusiveMinimum:{okStr:">",ok:e.GT,fail:e.LTE}},n={message:({keyword:s,schemaCode:a})=>(0,t.str)`must be ${r[s].okStr} ${a}`,params:({keyword:s,schemaCode:a})=>(0,t._)`{comparison: ${r[s].okStr}, limit: ${a}}`},i={keyword:Object.keys(r),type:"number",schemaType:"number",$data:!0,error:n,code(s){const{keyword:a,data:o,schemaCode:c}=s;s.fail$data((0,t._)`${o} ${r[a].fail} ${c} || isNaN(${o})`)}};return xb.default=i,xb}var Sb={},Ez;function nVe(){if(Ez)return Sb;Ez=1,Object.defineProperty(Sb,"__esModule",{value:!0});const t=br(),r={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:{message:({schemaCode:n})=>(0,t.str)`must be multiple of ${n}`,params:({schemaCode:n})=>(0,t._)`{multipleOf: ${n}}`},code(n){const{gen:i,data:s,schemaCode:a,it:o}=n,c=o.opts.multipleOfPrecision,u=i.let("res"),l=c?(0,t._)`Math.abs(Math.round(${u}) - ${u}) > 1e-${c}`:(0,t._)`${u} !== parseInt(${u})`;n.fail$data((0,t._)`(${a} === 0 || (${u} = ${s}/${a}, ${l}))`)}};return Sb.default=r,Sb}var Eb={},kb={},kz;function iVe(){if(kz)return kb;kz=1,Object.defineProperty(kb,"__esModule",{value:!0});function t(e){const r=e.length;let n=0,i=0,s;for(;i<r;)n++,s=e.charCodeAt(i++),s>=55296&&s<=56319&&i<r&&(s=e.charCodeAt(i),(s&64512)===56320&&i++);return n}return kb.default=t,t.code='require("ajv/dist/runtime/ucs2length").default',kb}var Tz;function sVe(){if(Tz)return Eb;Tz=1,Object.defineProperty(Eb,"__esModule",{value:!0});const t=br(),e=jr(),r=iVe(),i={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:{message({keyword:s,schemaCode:a}){const o=s==="maxLength"?"more":"fewer";return(0,t.str)`must NOT have ${o} than ${a} characters`},params:({schemaCode:s})=>(0,t._)`{limit: ${s}}`},code(s){const{keyword:a,data:o,schemaCode:c,it:u}=s,l=a==="maxLength"?t.operators.GT:t.operators.LT,f=u.opts.unicode===!1?(0,t._)`${o}.length`:(0,t._)`${(0,e.useFunc)(s.gen,r.default)}(${o})`;s.fail$data((0,t._)`${f} ${l} ${c}`)}};return Eb.default=i,Eb}var Tb={},Az;function aVe(){if(Az)return Tb;Az=1,Object.defineProperty(Tb,"__esModule",{value:!0});const t=Ic(),e=br(),n={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:{message:({schemaCode:i})=>(0,e.str)`must match pattern "${i}"`,params:({schemaCode:i})=>(0,e._)`{pattern: ${i}}`},code(i){const{data:s,$data:a,schema:o,schemaCode:c,it:u}=i,l=u.opts.unicodeRegExp?"u":"",f=a?(0,e._)`(new RegExp(${c}, ${l}))`:(0,t.usePattern)(i,o);i.fail$data((0,e._)`!${f}.test(${s})`)}};return Tb.default=n,Tb}var Ab={},Cz;function oVe(){if(Cz)return Ab;Cz=1,Object.defineProperty(Ab,"__esModule",{value:!0});const t=br(),r={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:{message({keyword:n,schemaCode:i}){const s=n==="maxProperties"?"more":"fewer";return(0,t.str)`must NOT have ${s} than ${i} properties`},params:({schemaCode:n})=>(0,t._)`{limit: ${n}}`},code(n){const{keyword:i,data:s,schemaCode:a}=n,o=i==="maxProperties"?t.operators.GT:t.operators.LT;n.fail$data((0,t._)`Object.keys(${s}).length ${o} ${a}`)}};return Ab.default=r,Ab}var Cb={},Iz;function cVe(){if(Iz)return Cb;Iz=1,Object.defineProperty(Cb,"__esModule",{value:!0});const t=Ic(),e=br(),r=jr(),i={keyword:"required",type:"object",schemaType:"array",$data:!0,error:{message:({params:{missingProperty:s}})=>(0,e.str)`must have required property '${s}'`,params:({params:{missingProperty:s}})=>(0,e._)`{missingProperty: ${s}}`},code(s){const{gen:a,schema:o,schemaCode:c,data:u,$data:l,it:f}=s,{opts:d}=f;if(!l&&o.length===0)return;const h=o.length>=d.loopRequired;if(f.allErrors?m():p(),d.strictRequired){const y=s.parentSchema.properties,{definedProperties:b}=s.it;for(const _ of o)if(y?.[_]===void 0&&!b.has(_)){const x=f.schemaEnv.baseId+f.errSchemaPath,E=`required property "${_}" is not defined at "${x}" (strictRequired)`;(0,r.checkStrictMode)(f,E,f.opts.strictRequired)}}function m(){if(h||l)s.block$data(e.nil,g);else for(const y of o)(0,t.checkReportMissingProp)(s,y)}function p(){const y=a.let("missing");if(h||l){const b=a.let("valid",!0);s.block$data(b,()=>v(y,b)),s.ok(b)}else a.if((0,t.checkMissingProp)(s,o,y)),(0,t.reportMissingProp)(s,y),a.else()}function g(){a.forOf("prop",c,y=>{s.setParams({missingProperty:y}),a.if((0,t.noPropertyInData)(a,u,y,d.ownProperties),()=>s.error())})}function v(y,b){s.setParams({missingProperty:y}),a.forOf(y,c,()=>{a.assign(b,(0,t.propertyInData)(a,u,y,d.ownProperties)),a.if((0,e.not)(b),()=>{s.error(),a.break()})},e.nil)}}};return Cb.default=i,Cb}var Ib={},Pz;function lVe(){if(Pz)return Ib;Pz=1,Object.defineProperty(Ib,"__esModule",{value:!0});const t=br(),r={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:{message({keyword:n,schemaCode:i}){const s=n==="maxItems"?"more":"fewer";return(0,t.str)`must NOT have ${s} than ${i} items`},params:({schemaCode:n})=>(0,t._)`{limit: ${n}}`},code(n){const{keyword:i,data:s,schemaCode:a}=n,o=i==="maxItems"?t.operators.GT:t.operators.LT;n.fail$data((0,t._)`${s}.length ${o} ${a}`)}};return Ib.default=r,Ib}var Pb={},Rb={},Rz;function jB(){if(Rz)return Rb;Rz=1,Object.defineProperty(Rb,"__esModule",{value:!0});const t=Uoe();return t.code='require("ajv/dist/runtime/equal").default',Rb.default=t,Rb}var Oz;function uVe(){if(Oz)return Pb;Oz=1,Object.defineProperty(Pb,"__esModule",{value:!0});const t=z4(),e=br(),r=jr(),n=jB(),s={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:{message:({params:{i:a,j:o}})=>(0,e.str)`must NOT have duplicate items (items ## ${o} and ${a} are identical)`,params:({params:{i:a,j:o}})=>(0,e._)`{i: ${a}, j: ${o}}`},code(a){const{gen:o,data:c,$data:u,schema:l,parentSchema:f,schemaCode:d,it:h}=a;if(!u&&!l)return;const m=o.let("valid"),p=f.items?(0,t.getSchemaTypes)(f.items):[];a.block$data(m,g,(0,e._)`${d} === false`),a.ok(m);function g(){const _=o.let("i",(0,e._)`${c}.length`),x=o.let("j");a.setParams({i:_,j:x}),o.assign(m,!0),o.if((0,e._)`${_} > 1`,()=>(v()?y:b)(_,x))}function v(){return p.length>0&&!p.some(_=>_==="object"||_==="array")}function y(_,x){const E=o.name("item"),k=(0,t.checkDataTypes)(p,E,h.opts.strictNumbers,t.DataType.Wrong),B=o.const("indices",(0,e._)`{}`);o.for((0,e._)`;${_}--;`,()=>{o.let(E,(0,e._)`${c}[${_}]`),o.if(k,(0,e._)`continue`),p.length>1&&o.if((0,e._)`typeof ${E} == "string"`,(0,e._)`${E} += "_"`),o.if((0,e._)`typeof ${B}[${E}] == "number"`,()=>{o.assign(x,(0,e._)`${B}[${E}]`),a.error(),o.assign(m,!1).break()}).code((0,e._)`${B}[${E}] = ${_}`)})}function b(_,x){const E=(0,r.useFunc)(o,n.default),k=o.name("outer");o.label(k).for((0,e._)`;${_}--;`,()=>o.for((0,e._)`${x} = ${_}; ${x}--;`,()=>o.if((0,e._)`${E}(${c}[${_}], ${c}[${x}])`,()=>{a.error(),o.assign(m,!1).break(k)})))}}};return Pb.default=s,Pb}var Ob={},Bz;function fVe(){if(Bz)return Ob;Bz=1,Object.defineProperty(Ob,"__esModule",{value:!0});const t=br(),e=jr(),r=jB(),i={keyword:"const",$data:!0,error:{message:"must be equal to constant",params:({schemaCode:s})=>(0,t._)`{allowedValue: ${s}}`},code(s){const{gen:a,data:o,$data:c,schemaCode:u,schema:l}=s;c||l&&typeof l=="object"?s.fail$data((0,t._)`!${(0,e.useFunc)(a,r.default)}(${o}, ${u})`):s.fail((0,t._)`${l} !== ${o}`)}};return Ob.default=i,Ob}var Bb={},Dz;function dVe(){if(Dz)return Bb;Dz=1,Object.defineProperty(Bb,"__esModule",{value:!0});const t=br(),e=jr(),r=jB(),i={keyword:"enum",schemaType:"array",$data:!0,error:{message:"must be equal to one of the allowed values",params:({schemaCode:s})=>(0,t._)`{allowedValues: ${s}}`},code(s){const{gen:a,data:o,$data:c,schema:u,schemaCode:l,it:f}=s;if(!c&&u.length===0)throw new Error("enum must have non-empty array");const d=u.length>=f.opts.loopEnum;let h;const m=()=>h??(h=(0,e.useFunc)(a,r.default));let p;if(d||c)p=a.let("valid"),s.block$data(p,g);else{if(!Array.isArray(u))throw new Error("ajv implementation error");const y=a.const("vSchema",l);p=(0,t.or)(...u.map((b,_)=>v(y,_)))}s.pass(p);function g(){a.assign(p,!1),a.forOf("v",l,y=>a.if((0,t._)`${m()}(${o}, ${y})`,()=>a.assign(p,!0).break()))}function v(y,b){const _=u[b];return typeof _=="object"&&_!==null?(0,t._)`${m()}(${o}, ${y}[${b}])`:(0,t._)`${o} === ${_}`}}};return Bb.default=i,Bb}var Mz;function hVe(){if(Mz)return _b;Mz=1,Object.defineProperty(_b,"__esModule",{value:!0});const t=rVe(),e=nVe(),r=sVe(),n=aVe(),i=oVe(),s=cVe(),a=lVe(),o=uVe(),c=fVe(),u=dVe(),l=[t.default,e.default,r.default,n.default,i.default,s.default,a.default,o.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},c.default,u.default];return _b.default=l,_b}var Db={},X0={},Nz;function joe(){if(Nz)return X0;Nz=1,Object.defineProperty(X0,"__esModule",{value:!0}),X0.validateAdditionalItems=void 0;const t=br(),e=jr(),n={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:{message:({params:{len:s}})=>(0,t.str)`must NOT have more than ${s} items`,params:({params:{len:s}})=>(0,t._)`{limit: ${s}}`},code(s){const{parentSchema:a,it:o}=s,{items:c}=a;if(!Array.isArray(c)){(0,e.checkStrictMode)(o,'"additionalItems" is ignored when "items" is not an array of schemas');return}i(s,c)}};function i(s,a){const{gen:o,schema:c,data:u,keyword:l,it:f}=s;f.items=!0;const d=o.const("len",(0,t._)`${u}.length`);if(c===!1)s.setParams({len:a.length}),s.pass((0,t._)`${d} <= ${a.length}`);else if(typeof c=="object"&&!(0,e.alwaysValidSchema)(f,c)){const m=o.var("valid",(0,t._)`${d} <= ${a.length}`);o.if((0,t.not)(m),()=>h(m)),s.ok(m)}function h(m){o.forRange("i",a.length,d,p=>{s.subschema({keyword:l,dataProp:p,dataPropType:e.Type.Num},m),f.allErrors||o.if((0,t.not)(m),()=>o.break())})}}return X0.validateAdditionalItems=i,X0.default=n,X0}var Mb={},Y0={},Fz;function Voe(){if(Fz)return Y0;Fz=1,Object.defineProperty(Y0,"__esModule",{value:!0}),Y0.validateTuple=void 0;const t=br(),e=jr(),r=Ic(),n={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(s){const{schema:a,it:o}=s;if(Array.isArray(a))return i(s,"additionalItems",a);o.items=!0,!(0,e.alwaysValidSchema)(o,a)&&s.ok((0,r.validateArray)(s))}};function i(s,a,o=s.schema){const{gen:c,parentSchema:u,data:l,keyword:f,it:d}=s;p(u),d.opts.unevaluated&&o.length&&d.items!==!0&&(d.items=e.mergeEvaluated.items(c,o.length,d.items));const h=c.name("valid"),m=c.const("len",(0,t._)`${l}.length`);o.forEach((g,v)=>{(0,e.alwaysValidSchema)(d,g)||(c.if((0,t._)`${m} > ${v}`,()=>s.subschema({keyword:f,schemaProp:v,dataProp:v},h)),s.ok(h))});function p(g){const{opts:v,errSchemaPath:y}=d,b=o.length,_=b===g.minItems&&(b===g.maxItems||g[a]===!1);if(v.strictTuples&&!_){const x=`"${f}" is ${b}-tuple, but minItems or maxItems/${a} are not specified or different at path "${y}"`;(0,e.checkStrictMode)(d,x,v.strictTuples)}}}return Y0.validateTuple=i,Y0.default=n,Y0}var Lz;function pVe(){if(Lz)return Mb;Lz=1,Object.defineProperty(Mb,"__esModule",{value:!0});const t=Voe(),e={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:r=>(0,t.validateTuple)(r,"items")};return Mb.default=e,Mb}var Nb={},$z;function mVe(){if($z)return Nb;$z=1,Object.defineProperty(Nb,"__esModule",{value:!0});const t=br(),e=jr(),r=Ic(),n=joe(),s={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:{message:({params:{len:a}})=>(0,t.str)`must NOT have more than ${a} items`,params:({params:{len:a}})=>(0,t._)`{limit: ${a}}`},code(a){const{schema:o,parentSchema:c,it:u}=a,{prefixItems:l}=c;u.items=!0,!(0,e.alwaysValidSchema)(u,o)&&(l?(0,n.validateAdditionalItems)(a,l):a.ok((0,r.validateArray)(a)))}};return Nb.default=s,Nb}var Fb={},Uz;function gVe(){if(Uz)return Fb;Uz=1,Object.defineProperty(Fb,"__esModule",{value:!0});const t=br(),e=jr(),n={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:{message:({params:{min:i,max:s}})=>s===void 0?(0,t.str)`must contain at least ${i} valid item(s)`:(0,t.str)`must contain at least ${i} and no more than ${s} valid item(s)`,params:({params:{min:i,max:s}})=>s===void 0?(0,t._)`{minContains: ${i}}`:(0,t._)`{minContains: ${i}, maxContains: ${s}}`},code(i){const{gen:s,schema:a,parentSchema:o,data:c,it:u}=i;let l,f;const{minContains:d,maxContains:h}=o;u.opts.next?(l=d===void 0?1:d,f=h):l=1;const m=s.const("len",(0,t._)`${c}.length`);if(i.setParams({min:l,max:f}),f===void 0&&l===0){(0,e.checkStrictMode)(u,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(f!==void 0&&l>f){(0,e.checkStrictMode)(u,'"minContains" > "maxContains" is always invalid'),i.fail();return}if((0,e.alwaysValidSchema)(u,a)){let b=(0,t._)`${m} >= ${l}`;f!==void 0&&(b=(0,t._)`${b} && ${m} <= ${f}`),i.pass(b);return}u.items=!0;const p=s.name("valid");f===void 0&&l===1?v(p,()=>s.if(p,()=>s.break())):l===0?(s.let(p,!0),f!==void 0&&s.if((0,t._)`${c}.length > 0`,g)):(s.let(p,!1),g()),i.result(p,()=>i.reset());function g(){const b=s.name("_valid"),_=s.let("count",0);v(b,()=>s.if(b,()=>y(_)))}function v(b,_){s.forRange("i",0,m,x=>{i.subschema({keyword:"contains",dataProp:x,dataPropType:e.Type.Num,compositeRule:!0},b),_()})}function y(b){s.code((0,t._)`${b}++`),f===void 0?s.if((0,t._)`${b} >= ${l}`,()=>s.assign(p,!0).break()):(s.if((0,t._)`${b} > ${f}`,()=>s.assign(p,!1).break()),l===1?s.assign(p,!0):s.if((0,t._)`${b} >= ${l}`,()=>s.assign(p,!0)))}}};return Fb.default=n,Fb}var JS={},jz;function vVe(){return jz||(jz=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.validateSchemaDeps=t.validatePropertyDeps=t.error=void 0;const e=br(),r=jr(),n=Ic();t.error={message:({params:{property:c,depsCount:u,deps:l}})=>{const f=u===1?"property":"properties";return(0,e.str)`must have ${f} ${l} when property ${c} is present`},params:({params:{property:c,depsCount:u,deps:l,missingProperty:f}})=>(0,e._)`{property: ${c},
    missingProperty: ${f},
    depsCount: ${u},
    deps: ${l}}`};const i={keyword:"dependencies",type:"object",schemaType:"object",error:t.error,code(c){const[u,l]=s(c);a(c,u),o(c,l)}};function s({schema:c}){const u={},l={};for(const f in c){if(f==="__proto__")continue;const d=Array.isArray(c[f])?u:l;d[f]=c[f]}return[u,l]}function a(c,u=c.schema){const{gen:l,data:f,it:d}=c;if(Object.keys(u).length===0)return;const h=l.let("missing");for(const m in u){const p=u[m];if(p.length===0)continue;const g=(0,n.propertyInData)(l,f,m,d.opts.ownProperties);c.setParams({property:m,depsCount:p.length,deps:p.join(", ")}),d.allErrors?l.if(g,()=>{for(const v of p)(0,n.checkReportMissingProp)(c,v)}):(l.if((0,e._)`${g} && (${(0,n.checkMissingProp)(c,p,h)})`),(0,n.reportMissingProp)(c,h),l.else())}}t.validatePropertyDeps=a;function o(c,u=c.schema){const{gen:l,data:f,keyword:d,it:h}=c,m=l.name("valid");for(const p in u)(0,r.alwaysValidSchema)(h,u[p])||(l.if((0,n.propertyInData)(l,f,p,h.opts.ownProperties),()=>{const g=c.subschema({keyword:d,schemaProp:p},m);c.mergeValidEvaluated(g,m)},()=>l.var(m,!0)),c.ok(m))}t.validateSchemaDeps=o,t.default=i}(JS)),JS}var Lb={},Vz;function yVe(){if(Vz)return Lb;Vz=1,Object.defineProperty(Lb,"__esModule",{value:!0});const t=br(),e=jr(),n={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:{message:"property name must be valid",params:({params:i})=>(0,t._)`{propertyName: ${i.propertyName}}`},code(i){const{gen:s,schema:a,data:o,it:c}=i;if((0,e.alwaysValidSchema)(c,a))return;const u=s.name("valid");s.forIn("key",o,l=>{i.setParams({propertyName:l}),i.subschema({keyword:"propertyNames",data:l,dataTypes:["string"],propertyName:l,compositeRule:!0},u),s.if((0,t.not)(u),()=>{i.error(!0),c.allErrors||s.break()})}),i.ok(u)}};return Lb.default=n,Lb}var $b={},qz;function qoe(){if(qz)return $b;qz=1,Object.defineProperty($b,"__esModule",{value:!0});const t=Ic(),e=br(),r=gd(),n=jr(),s={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:{message:"must NOT have additional properties",params:({params:a})=>(0,e._)`{additionalProperty: ${a.additionalProperty}}`},code(a){const{gen:o,schema:c,parentSchema:u,data:l,errsCount:f,it:d}=a;if(!f)throw new Error("ajv implementation error");const{allErrors:h,opts:m}=d;if(d.props=!0,m.removeAdditional!=="all"&&(0,n.alwaysValidSchema)(d,c))return;const p=(0,t.allSchemaProperties)(u.properties),g=(0,t.allSchemaProperties)(u.patternProperties);v(),a.ok((0,e._)`${f} === ${r.default.errors}`);function v(){o.forIn("key",l,E=>{!p.length&&!g.length?_(E):o.if(y(E),()=>_(E))})}function y(E){let k;if(p.length>8){const B=(0,n.schemaRefOrVal)(d,u.properties,"properties");k=(0,t.isOwnProperty)(o,B,E)}else p.length?k=(0,e.or)(...p.map(B=>(0,e._)`${E} === ${B}`)):k=e.nil;return g.length&&(k=(0,e.or)(k,...g.map(B=>(0,e._)`${(0,t.usePattern)(a,B)}.test(${E})`))),(0,e.not)(k)}function b(E){o.code((0,e._)`delete ${l}[${E}]`)}function _(E){if(m.removeAdditional==="all"||m.removeAdditional&&c===!1){b(E);return}if(c===!1){a.setParams({additionalProperty:E}),a.error(),h||o.break();return}if(typeof c=="object"&&!(0,n.alwaysValidSchema)(d,c)){const k=o.name("valid");m.removeAdditional==="failing"?(x(E,k,!1),o.if((0,e.not)(k),()=>{a.reset(),b(E)})):(x(E,k),h||o.if((0,e.not)(k),()=>o.break()))}}function x(E,k,B){const D={keyword:"additionalProperties",dataProp:E,dataPropType:n.Type.Str};B===!1&&Object.assign(D,{compositeRule:!0,createErrors:!1,allErrors:!1}),a.subschema(D,k)}}};return $b.default=s,$b}var Ub={},zz;function bVe(){if(zz)return Ub;zz=1,Object.defineProperty(Ub,"__esModule",{value:!0});const t=E5(),e=Ic(),r=jr(),n=qoe(),i={keyword:"properties",type:"object",schemaType:"object",code(s){const{gen:a,schema:o,parentSchema:c,data:u,it:l}=s;l.opts.removeAdditional==="all"&&c.additionalProperties===void 0&&n.default.code(new t.KeywordCxt(l,n.default,"additionalProperties"));const f=(0,e.allSchemaProperties)(o);for(const g of f)l.definedProperties.add(g);l.opts.unevaluated&&f.length&&l.props!==!0&&(l.props=r.mergeEvaluated.props(a,(0,r.toHash)(f),l.props));const d=f.filter(g=>!(0,r.alwaysValidSchema)(l,o[g]));if(d.length===0)return;const h=a.name("valid");for(const g of d)m(g)?p(g):(a.if((0,e.propertyInData)(a,u,g,l.opts.ownProperties)),p(g),l.allErrors||a.else().var(h,!0),a.endIf()),s.it.definedProperties.add(g),s.ok(h);function m(g){return l.opts.useDefaults&&!l.compositeRule&&o[g].default!==void 0}function p(g){s.subschema({keyword:"properties",schemaProp:g,dataProp:g},h)}}};return Ub.default=i,Ub}var jb={},Hz;function wVe(){if(Hz)return jb;Hz=1,Object.defineProperty(jb,"__esModule",{value:!0});const t=Ic(),e=br(),r=jr(),n=jr(),i={keyword:"patternProperties",type:"object",schemaType:"object",code(s){const{gen:a,schema:o,data:c,parentSchema:u,it:l}=s,{opts:f}=l,d=(0,t.allSchemaProperties)(o),h=d.filter(_=>(0,r.alwaysValidSchema)(l,o[_]));if(d.length===0||h.length===d.length&&(!l.opts.unevaluated||l.props===!0))return;const m=f.strictSchema&&!f.allowMatchingProperties&&u.properties,p=a.name("valid");l.props!==!0&&!(l.props instanceof e.Name)&&(l.props=(0,n.evaluatedPropsToName)(a,l.props));const{props:g}=l;v();function v(){for(const _ of d)m&&y(_),l.allErrors?b(_):(a.var(p,!0),b(_),a.if(p))}function y(_){for(const x in m)new RegExp(_).test(x)&&(0,r.checkStrictMode)(l,`property ${x} matches pattern ${_} (use allowMatchingProperties)`)}function b(_){a.forIn("key",c,x=>{a.if((0,e._)`${(0,t.usePattern)(s,_)}.test(${x})`,()=>{const E=h.includes(_);E||s.subschema({keyword:"patternProperties",schemaProp:_,dataProp:x,dataPropType:n.Type.Str},p),l.opts.unevaluated&&g!==!0?a.assign((0,e._)`${g}[${x}]`,!0):!E&&!l.allErrors&&a.if((0,e.not)(p),()=>a.break())})})}}};return jb.default=i,jb}var Vb={},Wz;function _Ve(){if(Wz)return Vb;Wz=1,Object.defineProperty(Vb,"__esModule",{value:!0});const t=jr(),e={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(r){const{gen:n,schema:i,it:s}=r;if((0,t.alwaysValidSchema)(s,i)){r.fail();return}const a=n.name("valid");r.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},a),r.failResult(a,()=>r.reset(),()=>r.error())},error:{message:"must NOT be valid"}};return Vb.default=e,Vb}var qb={},Gz;function xVe(){if(Gz)return qb;Gz=1,Object.defineProperty(qb,"__esModule",{value:!0});const e={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:Ic().validateUnion,error:{message:"must match a schema in anyOf"}};return qb.default=e,qb}var zb={},Kz;function SVe(){if(Kz)return zb;Kz=1,Object.defineProperty(zb,"__esModule",{value:!0});const t=br(),e=jr(),n={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:{message:"must match exactly one schema in oneOf",params:({params:i})=>(0,t._)`{passingSchemas: ${i.passing}}`},code(i){const{gen:s,schema:a,parentSchema:o,it:c}=i;if(!Array.isArray(a))throw new Error("ajv implementation error");if(c.opts.discriminator&&o.discriminator)return;const u=a,l=s.let("valid",!1),f=s.let("passing",null),d=s.name("_valid");i.setParams({passing:f}),s.block(h),i.result(l,()=>i.reset(),()=>i.error(!0));function h(){u.forEach((m,p)=>{let g;(0,e.alwaysValidSchema)(c,m)?s.var(d,!0):g=i.subschema({keyword:"oneOf",schemaProp:p,compositeRule:!0},d),p>0&&s.if((0,t._)`${d} && ${l}`).assign(l,!1).assign(f,(0,t._)`[${f}, ${p}]`).else(),s.if(d,()=>{s.assign(l,!0),s.assign(f,p),g&&i.mergeEvaluated(g,t.Name)})})}}};return zb.default=n,zb}var Hb={},Xz;function EVe(){if(Xz)return Hb;Xz=1,Object.defineProperty(Hb,"__esModule",{value:!0});const t=jr(),e={keyword:"allOf",schemaType:"array",code(r){const{gen:n,schema:i,it:s}=r;if(!Array.isArray(i))throw new Error("ajv implementation error");const a=n.name("valid");i.forEach((o,c)=>{if((0,t.alwaysValidSchema)(s,o))return;const u=r.subschema({keyword:"allOf",schemaProp:c},a);r.ok(a),r.mergeEvaluated(u)})}};return Hb.default=e,Hb}var Wb={},Yz;function kVe(){if(Yz)return Wb;Yz=1,Object.defineProperty(Wb,"__esModule",{value:!0});const t=br(),e=jr(),n={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:{message:({params:s})=>(0,t.str)`must match "${s.ifClause}" schema`,params:({params:s})=>(0,t._)`{failingKeyword: ${s.ifClause}}`},code(s){const{gen:a,parentSchema:o,it:c}=s;o.then===void 0&&o.else===void 0&&(0,e.checkStrictMode)(c,'"if" without "then" and "else" is ignored');const u=i(c,"then"),l=i(c,"else");if(!u&&!l)return;const f=a.let("valid",!0),d=a.name("_valid");if(h(),s.reset(),u&&l){const p=a.let("ifClause");s.setParams({ifClause:p}),a.if(d,m("then",p),m("else",p))}else u?a.if(d,m("then")):a.if((0,t.not)(d),m("else"));s.pass(f,()=>s.error(!0));function h(){const p=s.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},d);s.mergeEvaluated(p)}function m(p,g){return()=>{const v=s.subschema({keyword:p},d);a.assign(f,d),s.mergeValidEvaluated(v,f),g?a.assign(g,(0,t._)`${p}`):s.setParams({ifClause:p})}}}};function i(s,a){const o=s.schema[a];return o!==void 0&&!(0,e.alwaysValidSchema)(s,o)}return Wb.default=n,Wb}var Gb={},Zz;function TVe(){if(Zz)return Gb;Zz=1,Object.defineProperty(Gb,"__esModule",{value:!0});const t=jr(),e={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:r,parentSchema:n,it:i}){n.if===void 0&&(0,t.checkStrictMode)(i,`"${r}" without "if" is ignored`)}};return Gb.default=e,Gb}var Jz;function AVe(){if(Jz)return Db;Jz=1,Object.defineProperty(Db,"__esModule",{value:!0});const t=joe(),e=pVe(),r=Voe(),n=mVe(),i=gVe(),s=vVe(),a=yVe(),o=qoe(),c=bVe(),u=wVe(),l=_Ve(),f=xVe(),d=SVe(),h=EVe(),m=kVe(),p=TVe();function g(v=!1){const y=[l.default,f.default,d.default,h.default,m.default,p.default,a.default,o.default,s.default,c.default,u.default];return v?y.push(e.default,n.default):y.push(t.default,r.default),y.push(i.default),y}return Db.default=g,Db}var Kb={},Xb={},Qz;function CVe(){if(Qz)return Xb;Qz=1,Object.defineProperty(Xb,"__esModule",{value:!0});const t=br(),r={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:{message:({schemaCode:n})=>(0,t.str)`must match format "${n}"`,params:({schemaCode:n})=>(0,t._)`{format: ${n}}`},code(n,i){const{gen:s,data:a,$data:o,schema:c,schemaCode:u,it:l}=n,{opts:f,errSchemaPath:d,schemaEnv:h,self:m}=l;if(!f.validateFormats)return;o?p():g();function p(){const v=s.scopeValue("formats",{ref:m.formats,code:f.code.formats}),y=s.const("fDef",(0,t._)`${v}[${u}]`),b=s.let("fType"),_=s.let("format");s.if((0,t._)`typeof ${y} == "object" && !(${y} instanceof RegExp)`,()=>s.assign(b,(0,t._)`${y}.type || "string"`).assign(_,(0,t._)`${y}.validate`),()=>s.assign(b,(0,t._)`"string"`).assign(_,y)),n.fail$data((0,t.or)(x(),E()));function x(){return f.strictSchema===!1?t.nil:(0,t._)`${u} && !${_}`}function E(){const k=h.$async?(0,t._)`(${y}.async ? await ${_}(${a}) : ${_}(${a}))`:(0,t._)`${_}(${a})`,B=(0,t._)`(typeof ${_} == "function" ? ${k} : ${_}.test(${a}))`;return(0,t._)`${_} && ${_} !== true && ${b} === ${i} && !${B}`}}function g(){const v=m.formats[c];if(!v){x();return}if(v===!0)return;const[y,b,_]=E(v);y===i&&n.pass(k());function x(){if(f.strictSchema===!1){m.logger.warn(B());return}throw new Error(B());function B(){return`unknown format "${c}" ignored in schema at path "${d}"`}}function E(B){const D=B instanceof RegExp?(0,t.regexpCode)(B):f.code.formats?(0,t._)`${f.code.formats}${(0,t.getProperty)(c)}`:void 0,z=s.scopeValue("formats",{key:c,ref:B,code:D});return typeof B=="object"&&!(B instanceof RegExp)?[B.type||"string",B.validate,(0,t._)`${z}.validate`]:["string",B,z]}function k(){if(typeof v=="object"&&!(v instanceof RegExp)&&v.async){if(!h.$async)throw new Error("async format in sync schema");return(0,t._)`await ${_}(${a})`}return typeof b=="function"?(0,t._)`${_}(${a})`:(0,t._)`${_}.test(${a})`}}}};return Xb.default=r,Xb}var eH;function IVe(){if(eH)return Kb;eH=1,Object.defineProperty(Kb,"__esModule",{value:!0});const e=[CVe().default];return Kb.default=e,Kb}var Od={},tH;function PVe(){return tH||(tH=1,Object.defineProperty(Od,"__esModule",{value:!0}),Od.contentVocabulary=Od.metadataVocabulary=void 0,Od.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"],Od.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]),Od}var rH;function RVe(){if(rH)return yb;rH=1,Object.defineProperty(yb,"__esModule",{value:!0});const t=tVe(),e=hVe(),r=AVe(),n=IVe(),i=PVe(),s=[t.default,e.default,(0,r.default)(),n.default,i.metadataVocabulary,i.contentVocabulary];return yb.default=s,yb}var Yb={},Hm={},nH;function OVe(){if(nH)return Hm;nH=1,Object.defineProperty(Hm,"__esModule",{value:!0}),Hm.DiscrError=void 0;var t;return function(e){e.Tag="tag",e.Mapping="mapping"}(t||(Hm.DiscrError=t={})),Hm}var iH;function BVe(){if(iH)return Yb;iH=1,Object.defineProperty(Yb,"__esModule",{value:!0});const t=br(),e=OVe(),r=UB(),n=k5(),i=jr(),a={keyword:"discriminator",type:"object",schemaType:"object",error:{message:({params:{discrError:o,tagName:c}})=>o===e.DiscrError.Tag?`tag "${c}" must be string`:`value of tag "${c}" must be in oneOf`,params:({params:{discrError:o,tag:c,tagName:u}})=>(0,t._)`{error: ${o}, tag: ${u}, tagValue: ${c}}`},code(o){const{gen:c,data:u,schema:l,parentSchema:f,it:d}=o,{oneOf:h}=f;if(!d.opts.discriminator)throw new Error("discriminator: requires discriminator option");const m=l.propertyName;if(typeof m!="string")throw new Error("discriminator: requires propertyName");if(l.mapping)throw new Error("discriminator: mapping is not supported");if(!h)throw new Error("discriminator: requires oneOf keyword");const p=c.let("valid",!1),g=c.const("tag",(0,t._)`${u}${(0,t.getProperty)(m)}`);c.if((0,t._)`typeof ${g} == "string"`,()=>v(),()=>o.error(!1,{discrError:e.DiscrError.Tag,tag:g,tagName:m})),o.ok(p);function v(){const _=b();c.if(!1);for(const x in _)c.elseIf((0,t._)`${g} === ${x}`),c.assign(p,y(_[x]));c.else(),o.error(!1,{discrError:e.DiscrError.Mapping,tag:g,tagName:m}),c.endIf()}function y(_){const x=c.name("valid"),E=o.subschema({keyword:"oneOf",schemaProp:_},x);return o.mergeEvaluated(E,t.Name),x}function b(){var _;const x={},E=B(f);let k=!0;for(let U=0;U<h.length;U++){let S=h[U];if(S?.$ref&&!(0,i.schemaHasRulesButRef)(S,d.self.RULES)){const w=S.$ref;if(S=r.resolveRef.call(d.self,d.schemaEnv.root,d.baseId,w),S instanceof r.SchemaEnv&&(S=S.schema),S===void 0)throw new n.default(d.opts.uriResolver,d.baseId,w)}const T=(_=S?.properties)===null||_===void 0?void 0:_[m];if(typeof T!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${m}"`);k=k&&(E||B(S)),D(T,U)}if(!k)throw new Error(`discriminator: "${m}" must be required`);return x;function B({required:U}){return Array.isArray(U)&&U.includes(m)}function D(U,S){if(U.const)z(U.const,S);else if(U.enum)for(const T of U.enum)z(T,S);else throw new Error(`discriminator: "properties/${m}" must have "const" or "enum"`)}function z(U,S){if(typeof U!="string"||U in x)throw new Error(`discriminator: "${m}" values must be unique strings`);x[U]=S}}}};return Yb.default=a,Yb}const DVe="http://json-schema.org/draft-07/schema#",MVe="http://json-schema.org/draft-07/schema#",NVe="Core schema meta-schema",FVe={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},LVe=["object","boolean"],$Ve={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},UVe={$schema:DVe,$id:MVe,title:NVe,definitions:FVe,type:LVe,properties:$Ve,default:!0};var sH;function jVe(){return sH||(sH=1,function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.MissingRefError=e.ValidationError=e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=e.Ajv=void 0;const r=Jje(),n=RVe(),i=BVe(),s=UVe,a=["/properties"],o="http://json-schema.org/draft-07/schema";class c extends r.default{_addVocabularies(){super._addVocabularies(),n.default.forEach(m=>this.addVocabulary(m)),this.opts.discriminator&&this.addKeyword(i.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const m=this.opts.$data?this.$dataMetaSchema(s,a):s;this.addMetaSchema(m,o,!1),this.refs["http://json-schema.org/schema"]=o}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(o)?o:void 0)}}e.Ajv=c,t.exports=e=c,t.exports.Ajv=c,Object.defineProperty(e,"__esModule",{value:!0}),e.default=c;var u=E5();Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return u.KeywordCxt}});var l=br();Object.defineProperty(e,"_",{enumerable:!0,get:function(){return l._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return l.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return l.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return l.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return l.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return l.CodeGen}});var f=$B();Object.defineProperty(e,"ValidationError",{enumerable:!0,get:function(){return f.default}});var d=k5();Object.defineProperty(e,"MissingRefError",{enumerable:!0,get:function(){return d.default}})}(hb,hb.exports)),hb.exports}var VVe=jVe();const qVe=In(VVe),RI=new qVe({allowUnionTypes:!0}),zoe=t=>({validate:RI.compile(t)}),Hoe=t=>{const e=RI.compile(t),r=c=>c===!0?()=>!0:RI.compile(c),n=Object.fromEntries(Object.entries(t.properties||{}).map(([c,u])=>[c,r(u)])),i=t.additionalProperties?r(t.additionalProperties):()=>!1,s=(c,u)=>a(u)(c),a=c=>n[c]||i;return{validateRoot:e,validateKey:s,getKeyValidator:a,supportedKey:c=>!!n[c]||!!t.additionalProperties}},Gy=t=>Object.fromEntries(Object.entries(t).filter(([e,r])=>r!==void 0).map(([e,r])=>[e,typeof r=="object"&&!Array.isArray(r)?Gy(r):r])),zVe=({db:t,schema:e})=>{const{validate:r}=zoe(e);return new Proxy(t,{get(n,i){return i==="all"?async()=>(await n[i]()).filter(o=>r(o.value)):i==="add"?async s=>{if(typeof s=="object"&&!Array.isArray(s)&&(s=Gy(s)),r(s))return await n.add(s);throw new Error(JSON.stringify(s)+JSON.stringify(r.errors,void 0,2))}:n[i]}})},HVe=({db:t,schema:e})=>{const{validateRoot:r,validateKey:n,getKeyValidator:i,supportedKey:s}=Hoe(e);return new Proxy(t,{get(a,o){return o==="get"?async c=>{if(!s(c))throw new Error(`Unsupported key ${c}.`);const u=await a.get(c);return u===void 0||n(u,c)?u:void 0}:o==="put"||o==="set"?async(c,u)=>{if(!s(c))throw new Error(`Unsupported key ${c}.`);if(typeof u=="object"&&!Array.isArray(u)&&(u=Gy(u)),n(u,c))return await a.put(c,u);throw new Error(JSON.stringify(i(c).errors,void 0,2))}:o==="all"?async()=>(await a.all()).filter(u=>n(u.value,u.key)):o==="allAsJSON"?async()=>{const c=await a.all(),u=Object.fromEntries(c.map(f=>[f.key,f.value]));if(r(u))return u;throw new Error(JSON.stringify(r.errors,void 0,2))}:a[o]}})},WVe=({db:t,schema:e})=>{const{validateKey:r,getKeyValidator:n,supportedKey:i}=Hoe(e);return new Proxy(t,{get(s,a){return a==="get"?async o=>{if(!i(o))throw new Error(`Unsupported key ${o}.`);const c=await s.get(o);if(c===void 0)return c;const{value:u,position:l}=c;return r(u,o)?{value:u,position:l}:void 0}:a==="move"?async(o,c)=>{if(!i(o))throw new Error(`Unsupported key ${o}.`);return await s.move(o,c)}:a==="put"||a==="set"?async(o,c,u)=>{if(!i(o))throw new Error(`Unsupported key ${o}.`);if(typeof c=="object"&&!Array.isArray(c)&&(c=Gy(c)),r(c,o))return await s.put(o,c,u);throw new Error(JSON.stringify(n(o).errors,void 0,2))}:a==="all"?async()=>(await s.all()).filter(c=>r(c.value,c.key)):s[a]}})},GVe=({db:t,schema:e})=>{const{validate:r}=zoe(e);return new Proxy(t,{get(n,i){return i==="all"?async()=>(await n[i]()).filter(o=>r(o.value)):i==="add"?async s=>{if(typeof s=="object"&&!Array.isArray(s)&&(s=Gy(s)),r(s))return await n.add(s);throw new Error(JSON.stringify(s)+JSON.stringify(r.errors,void 0,2))}:n[i]}})};function Pr(t){const e=new globalThis.AbortController;function r(){e.abort();for(const s of t)s?.removeEventListener!=null&&s.removeEventListener("abort",r)}for(const s of t){if(s?.aborted===!0){r();break}s?.addEventListener!=null&&s.addEventListener("abort",r)}function n(){for(const s of t)s?.removeEventListener!=null&&s.removeEventListener("abort",r)}const i=e.signal;return i.clear=n,i}const KVe=async t=>{if(t.aborted)throw new hl;return new Promise((e,r)=>{const n=()=>{t.removeEventListener("abort",n),r()};t.addEventListener("abort",n)})},Woe=async({f:t,signal:e})=>{let r=Date.now();const n=async({f:i,signal:s,n:a})=>{try{return r=Date.now(),await Promise.race([i(),KVe(s)])}catch(o){if(s.aborted)throw new hl;console.log(o),a++;const c=Date.now(),u=a*1e3-(c-r);if(u>0&&(await new Promise(l=>{const f=setTimeout(l,u);s.addEventListener("abort",()=>{clearInterval(f),l()})}),s.aborted))throw new hl;return await n({f:i,signal:s,n:a})}};return n({f:t,signal:e,n:0})},Goe=()=>{Bje(),Poe(),Dje(),rqe()};async function XVe({sfip:t,dossierOrbite:e}){return Goe(),await Aje({ipfs:t,id:"constellation",directory:e})}const YVe=({bd:t,schma:e})=>{switch(t.type){case"feed":return zVe({db:t,schema:e});case"set":return GVe({db:t,schema:e});case"keyvalue":return HVe({db:t,schema:e});case"ordered-keyvalue":return WVe({db:t,schema:e});default:throw new Error("Type de bd non reconnu.")}};class Koe{orbite;_bdsOrbite;verrouOuvertureBd;_oublierNettoyageBdsOuvertes;signaleurArrt;constructor({orbite:e,signaleurArrt:r}){this.orbite=e,this._bdsOrbite={},this.verrouOuvertureBd=new Io,this._oublierNettoyageBdsOuvertes=this.lancerNettoyageBdsOuvertes(),this.signaleurArrt=r||new AbortController}get identity(){return this.orbite.identity}async ouvrirBd({id:e,type:r,signal:n,options:i}){const s=Pr([this.signaleurArrt.signal,...n?[n]:[]]);await this.verrouOuvertureBd.acquire(e);const a=this._bdsOrbite[e],o=ti(),c=async()=>{this._bdsOrbite[e]?.idsRequtes.delete(o)},u=(f,d)=>{const{type:h}=f;return h===d};if(a){if(this._bdsOrbite[e].idsRequtes.add(o),this.verrouOuvertureBd.release(e),r&&!u(a.bd,r))throw new Error(`La bd est de type ${a.bd.type}, et non ${r}.`);return{bd:a.bd,fOublier:c}}const l=await Woe({f:async()=>await this.orbite.open(e,{type:r,...i}),signal:s});return s.clear(),this._bdsOrbite[e]={bd:l,idsRequtes:new Set([o])},this.verrouOuvertureBd.release(e),{bd:l,fOublier:c}}async ouvrirBdType({id:e,type:r,schma:n,signal:i,options:s}){const{bd:a,fOublier:o}=await this.ouvrirBd({id:e,type:r,signal:i,options:s});return{bd:YVe({bd:a,schma:n}),fOublier:o}}async crerBdIndpendante({type:e,options:r,nom:n}){const i=await this.orbite.open(n||ti(),{type:e,...r}),{address:s}=i;return this._bdsOrbite[s]={bd:i,idsRequtes:new Set},s}async effacerBd({id:e}){const{bd:r}=await this.ouvrirBd({id:e});await r.drop(),delete this._bdsOrbite[e]}lancerNettoyageBdsOuvertes(){const r=setInterval(async()=>{},3e5);return async()=>clearInterval(r)}async appliquerFonctionBdOrbite({idBd:e,fonction:r,args:n}){const{bd:i,fOublier:s}=await this.ouvrirBd({id:e}),a=await i[r](...n);return await s(),a}async fermer({arrterOrbite:e}){this.signaleurArrt.abort(),this._oublierNettoyageBdsOuvertes&&await this._oublierNettoyageBdsOuvertes(),e&&await this.orbite.stop()}}class Xoe{gestionnaires;constructor(){this.gestionnaires={}}obtGestionnaireOrbite({orbite:e,signaleurArrt:r}){return this.gestionnaires[e.identity.id]||(this.gestionnaires[e.identity.id]=new Koe({orbite:e,signaleurArrt:r})),this.gestionnaires[e.identity.id]}async fermer({orbite:e,arrterOrbite:r,signaleurArrt:n}){await this.obtGestionnaireOrbite({orbite:e,signaleurArrt:n}).fermer({arrterOrbite:r}),delete this.gestionnaires[e.identity.id]}}const T5=new Xoe,aH=Object.freeze(Object.defineProperty({__proto__:null,GestionnaireOrbite:Koe,GestionnaireOrbiteGnral:Xoe,gestionnaireOrbiteGnral:T5,initOrbite:XVe,prparerOrbite:Goe,ressayer:Woe},Symbol.toStringTag,{value:"Module"})),Yoe=async(t,e)=>{const r=async()=>{const i=await t.all();await e(i.map(s=>s.value))};return t.events.setMaxListeners(100),t.events.on("update",r),await r(),async()=>{t.events.off("update",r)}};class ZVe{orbite;idBd;accs;fOublierBd;oublierSuivi;signaleurArrt;vnements;constructor(e,r){this.orbite=T5.obtGestionnaireOrbite({orbite:e}),this.idBd=r,this.vnements=new om.TypedEmitter,this.signaleurArrt=new AbortController,this.initialiser()}async initialiser(){const{bd:e,fOublier:r}=await this.orbite.ouvrirBd({id:this.idBd,signal:this.signaleurArrt.signal});this.fOublierBd=r;const n=e.access;this.accs=n,this.vnements.emit("initialis",{accs:n})}async initialis(){return this.accs?{accs:this.accs}:new Promise(e=>this.vnements.once("initialis",e))}async suivreAccs({f:e}){const{accs:r}=await this.initialis();return await Yoe(r.bd,async n=>await e({autoriss:[r.write,...n.map(i=>i.id)]}))}async fermer(){this.signaleurArrt.abort(),this.oublierSuivi&&await this.oublierSuivi(),await this.fOublierBd?.()}}class Zoe extends Ns.EventEmitter{_rles;_rlesIdOrbite;_rlesUtilisateurs;_accsUtilisateur;fsOublier;_miseJourEnCours;orbite;constructor(e){super(),this.setMaxListeners(100),this._rles={[Ts]:new Set,[su]:new Set},this._rlesIdOrbite={[Ts]:new Set,[su]:new Set},this._rlesUtilisateurs={},this._accsUtilisateur={},this._miseJourEnCours=!1,this.fsOublier=[],this.orbite=e}async Jour(){this._miseJourEnCours&&await Ns.once(this,"misJour")}async estUnMembre(e){return await this.Jour(),this._rles[su].has(e)}async estUnModrateur(e){return await this.Jour(),this._rles[Ts].has(e)}async estAutoris(e){return await this.estUnModrateur(e)||await this.estUnMembre(e)}async ajouterlments(e){this._miseJourEnCours=!0,await Promise.allSettled(e.map(async r=>{const{rle:n,id:i}=r;if(ll(i))if(this._accsUtilisateur[i])this._accsUtilisateur[i].rles.add(n);else{const s=new ZVe(this.orbite,i);this._accsUtilisateur[i]={accs:s,rles:new Set([n])};const a=await s.suivreAccs({f:({autoriss:o})=>{this._rlesUtilisateurs[i]=o,this._mettreRlesJour()}});this.fsOublier.push(a)}else this._rlesIdOrbite[n].add(i),this._mettreRlesJour()})),this._mettreRlesJour(),this._miseJourEnCours=!1,this.emit("misJour")}_mettreRlesJour(){const e={MODRATEUR:new Set,MEMBRE:new Set};for(const[r,n]of Object.entries(this._rlesIdOrbite)){const i=e[r];n.forEach(s=>{i.add(s)})}for(const[r,n]of Object.entries(this._rlesUtilisateurs))for(const i of this._accsUtilisateur[r].rles.values()){const s=e[i];n.forEach(a=>{s.add(a)})}this._rles=e}async fermer(){await Promise.allSettled(this.fsOublier.map(e=>e()))}}const Joe=(...t)=>t.join("/").replace(/((?<=\/)\/+)|(^\.\/)|((?<=\/)\.\/)/g,"")||".",VB=t=>t.type===il,_3="contrleur-accs-constellation",Qoe=T0,ece=ci,JVe=$n,QVe=async({storage:t,type:e,params:r})=>{const n={type:e,...r},{cid:i,bytes:s}=await Roe({value:n,codec:Qoe,hasher:ece}),a=i.toString(JVe);return await t.put(a,s),a},qB=({write:t,storage:e}={})=>async({orbitdb:r,identities:n,address:i})=>{e=e??await hu(await Eo({size:1e3}),await im({ipfs:r.ipfs,pin:!0})),t=t??r.identity.id;const s=new Zoe(r);if(i){const c=await e.get(i.replaceAll("/contrleur-accs-constellation/","")),{value:u}=await Ooe({bytes:c,codec:Qoe,hasher:ece});({write:t}=u)}else i=await QVe({storage:e,type:_3,params:{write:t}}),i=Joe("/",_3,i);await s.ajouterlments([{id:t,rle:Ts}]);const a=async c=>{if(c.payload.op!=="ADD"||!c.payload.value)return!1;const{rle:u,id:l}=c.payload.value,f=Boe.includes(u),d=await n.getIdentity(c.identity);if(!d)return!1;const{id:h}=d;return f&&await o(h,c)&&await n.verifyIdentity(d)?(u===Ts&&await s.ajouterlments([{id:l,rle:Ts}]),!0):!1},o=async(c,u)=>{if(await s.estUnModrateur(c))return!0;const l=u.next;for(const f of l){const d=await e.get(f),h=await Zc.decode(d);if(await a(h)&&await s.estUnModrateur(c))return!0}return!1};return{type:_3,address:i,write:t,canAppend:a}};qB.type=_3;const il="contrleur-constellation",tce=T0,rce=ci,eqe=$n,oH={type:"object",properties:{rle:{type:"string"},id:{type:"string"}},required:["rle","id"]},tqe=async({storage:t,type:e,params:r})=>{const n={type:e,...r},{cid:i,bytes:s}=await Roe({value:n,codec:tce,hasher:rce}),a=i.toString(eqe);return await t.put(a,s),a},zB=({write:t,nom:e,storage:r}={})=>async({orbitdb:n,identities:i,address:s})=>{t??=n.identity.id,e=e||ti(),r=r||await hu(await Eo({size:1e3}),await im({ipfs:n.ipfs,pin:!0}));const a=T5.obtGestionnaireOrbite({orbite:n});let o,c,u;if(t?.startsWith("/contrleur-constellation/")&&!s&&(s=t),s){const E=await r.get(s.replaceAll(`/${il}/`,"")),{value:k}=await Ooe({bytes:E,codec:tce,hasher:rce});({write:t,nom:e,adresseBdAccs:o}=k),{bd:c,fOublier:u}=await a.ouvrirBdType({id:o,type:"set",schma:oH})}else({bd:c,fOublier:u}=await a.ouvrirBdType({id:e,type:"set",schma:oH,options:{AccessController:qB({write:t,storage:r})}})),o=c.address,s=await tqe({storage:r,type:il,params:{write:t,nom:e,adresseBdAccs:o}}),s=Joe("/",il,s);const l=new Zoe(n),f=await Yoe(c,async E=>{E=[{rle:Ts,id:t},...E],await l.ajouterlments(E)}),d=async E=>await l.estAutoris(E);return{type:il,nom:e,address:s,adresseBdAccs:o,write:t,grant:async(E,k)=>{if(!Boe.includes(E))throw new Error(`Erreur: Le rle ${E} n'existe pas.`);if(!l._rles[E].has(k))try{const B={rle:E,id:k};await c.add(B)}catch(B){const D=B;throw D.toString().includes("not append entry")?new Error(`Erreur : Le rle ${E} ne peut pas tre octroy  ${k}.`):D}},revoke:async(E,k)=>{throw new Error("C'est trs difficile  implmenter...avez-vous des ides ?")},canAppend:async E=>{const k=await i.getIdentity(E.identity);if(!k)return!1;const{id:B}=k;return await i.verifyIdentity(k)&&await d(B)},close:async()=>{await f(),await u(),await l.fermer()},drop:async()=>{},suivreUtilisateursAutoriss:async E=>{const k=async()=>{const D=Object.entries(l._accsUtilisateur).filter(([z,U])=>U.rles.size>0).map(([z,U])=>({idCompte:z,rle:U.rles.has(Ts)?Ts:su}));await E(D)};return l.on("misJour",k),await k(),async()=>{l.off("misJour",k)}},suivreIdsOrbiteAutorisescriture:async E=>{const k=async()=>{await E([...l._rles.MEMBRE,...l._rles.MODRATEUR])};return l.on("misJour",k),await k(),async()=>{l.off("misJour",k)}},gestRles:l,estAutoris:d,estUnMembre:async E=>await l.estUnMembre(E),estUnModrateur:async E=>await l.estUnModrateur(E),bd:c}};zB.type=il;const rqe=()=>{Poe(),V4(zB),V4(qB)};/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var H4={};H4.version="0.19.1";var bo=1200,nqe=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],HB={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},WB=function(t){nqe.indexOf(t)!=-1&&(HB[0]=t)};function iqe(){WB(1252)}var nc=function(t){bo=t,WB(t)};function GB(){nc(1200),iqe()}function cH(t){for(var e=[],r=0,n=t.length;r<n;++r)e[r]=t.charCodeAt(r);return e}function nce(t){for(var e=[],r=0;r<t.length>>1;++r)e[r]=String.fromCharCode(t.charCodeAt(2*r)+(t.charCodeAt(2*r+1)<<8));return e.join("")}function ice(t){for(var e=[],r=0;r<t.length>>1;++r)e[r]=String.fromCharCode(t.charCodeAt(2*r+1)+(t.charCodeAt(2*r)<<8));return e.join("")}var fg=function(t){var e=t.charCodeAt(0),r=t.charCodeAt(1);return e==255&&r==254?nce(t.slice(2)):e==254&&r==255?ice(t.slice(2)):e==65279?t.slice(1):t},Zb=function(e){return String.fromCharCode(e)},lH=function(e){return String.fromCharCode(e)},sqe=null,_o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function W4(t){for(var e="",r=0,n=0,i=0,s=0,a=0,o=0,c=0,u=0;u<t.length;)r=t.charCodeAt(u++),s=r>>2,n=t.charCodeAt(u++),a=(r&3)<<4|n>>4,i=t.charCodeAt(u++),o=(n&15)<<2|i>>6,c=i&63,isNaN(n)?o=c=64:isNaN(i)&&(c=64),e+=_o.charAt(s)+_o.charAt(a)+_o.charAt(o)+_o.charAt(c);return e}function aqe(t){for(var e="",r=0,n=0,i=0,s=0,a=0,o=0,c=0,u=0;u<t.length;)r=t.charCodeAt(u++),r>255&&(r=95),s=r>>2,n=t.charCodeAt(u++),n>255&&(n=95),a=(r&3)<<4|n>>4,i=t.charCodeAt(u++),i>255&&(i=95),o=(n&15)<<2|i>>6,c=i&63,isNaN(n)?o=c=64:isNaN(i)&&(c=64),e+=_o.charAt(s)+_o.charAt(a)+_o.charAt(o)+_o.charAt(c);return e}function Qa(t){var e="",r=0,n=0,i=0,s=0,a=0,o=0,c=0;t=t.replace(/^data:([^\/]+\/[^\/]+)?;base64\,/,"").replace(/[^\w\+\/\=]/g,"");for(var u=0;u<t.length;)s=_o.indexOf(t.charAt(u++)),a=_o.indexOf(t.charAt(u++)),r=s<<2|a>>4,e+=String.fromCharCode(r),o=_o.indexOf(t.charAt(u++)),n=(a&15)<<4|o>>2,o!==64&&(e+=String.fromCharCode(n)),c=_o.indexOf(t.charAt(u++)),i=(o&3)<<6|c,c!==64&&(e+=String.fromCharCode(i));return e}var mr=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),Tl=function(){if(typeof Buffer<"u"){var t=!Buffer.from;if(!t)try{Buffer.from("foo","utf8")}catch{t=!0}return t?function(e,r){return r?new Buffer(e,r):new Buffer(e)}:Buffer.from.bind(Buffer)}return function(){}}(),Tv=function(){if(typeof Buffer>"u")return!1;var t=Tl([65,0]);if(!t)return!1;var e=t.toString("utf16le");return e.length==1}();function Zf(t){return mr?Buffer.alloc?Buffer.alloc(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}function uH(t){return mr?Buffer.allocUnsafe?Buffer.allocUnsafe(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}var Js=function(e){return mr?Tl(e,"binary"):e.split("").map(function(r){return r.charCodeAt(0)&255})};function A5(t){if(typeof ArrayBuffer>"u")return Js(t);for(var e=new ArrayBuffer(t.length),r=new Uint8Array(e),n=0;n!=t.length;++n)r[n]=t.charCodeAt(n)&255;return e}function gl(t){if(Array.isArray(t))return t.map(function(n){return String.fromCharCode(n)}).join("");for(var e=[],r=0;r<t.length;++r)e[r]=String.fromCharCode(t[r]);return e.join("")}function oqe(t){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(t)}function KB(t){if(typeof ArrayBuffer>"u")throw new Error("Unsupported");if(t instanceof ArrayBuffer)return KB(new Uint8Array(t));for(var e=new Array(t.length),r=0;r<t.length;++r)e[r]=t[r];return e}var wi=mr?function(t){return Buffer.concat(t.map(function(e){return Buffer.isBuffer(e)?e:Tl(e)}))}:function(t){if(typeof Uint8Array<"u"){var e=0,r=0;for(e=0;e<t.length;++e)r+=t[e].length;var n=new Uint8Array(r),i=0;for(e=0,r=0;e<t.length;r+=i,++e)i=t[e].length,t[e]instanceof Uint8Array?n.set(t[e],r):typeof t[e]=="string"?n.set(new Uint8Array(Js(t[e])),r):n.set(new Uint8Array(t[e]),r);return n}return[].concat.apply([],t.map(function(s){return Array.isArray(s)?s:[].slice.call(s)}))};function cqe(t){for(var e=[],r=0,n=t.length+250,i=Zf(t.length+255),s=0;s<t.length;++s){var a=t.charCodeAt(s);if(a<128)i[r++]=a;else if(a<2048)i[r++]=192|a>>6&31,i[r++]=128|a&63;else if(a>=55296&&a<57344){a=(a&1023)+64;var o=t.charCodeAt(++s)&1023;i[r++]=240|a>>8&7,i[r++]=128|a>>2&63,i[r++]=128|o>>6&15|(a&3)<<4,i[r++]=128|o&63}else i[r++]=224|a>>12&15,i[r++]=128|a>>6&63,i[r++]=128|a&63;r>n&&(e.push(i.slice(0,r)),r=0,i=Zf(65535),n=65530)}return e.push(i.slice(0,r)),wi(e)}var ea=/\u0000/g,dg=/[\u0001-\u0006]/g;function M1(t){for(var e="",r=t.length-1;r>=0;)e+=t.charAt(r--);return e}function ic(t,e){var r=""+t;return r.length>=e?r:Ir("0",e-r.length)+r}function XB(t,e){var r=""+t;return r.length>=e?r:Ir(" ",e-r.length)+r}function G4(t,e){var r=""+t;return r.length>=e?r:r+Ir(" ",e-r.length)}function lqe(t,e){var r=""+Math.round(t);return r.length>=e?r:Ir("0",e-r.length)+r}function uqe(t,e){var r=""+t;return r.length>=e?r:Ir("0",e-r.length)+r}var fH=Math.pow(2,32);function Z0(t,e){if(t>fH||t<-fH)return lqe(t,e);var r=Math.round(t);return uqe(r,e)}function K4(t,e){return e=e||0,t.length>=7+e&&(t.charCodeAt(e)|32)===103&&(t.charCodeAt(e+1)|32)===101&&(t.charCodeAt(e+2)|32)===110&&(t.charCodeAt(e+3)|32)===101&&(t.charCodeAt(e+4)|32)===114&&(t.charCodeAt(e+5)|32)===97&&(t.charCodeAt(e+6)|32)===108}var dH=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],QS=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function fqe(t){return t||(t={}),t[0]="General",t[1]="0",t[2]="0.00",t[3]="#,##0",t[4]="#,##0.00",t[9]="0%",t[10]="0.00%",t[11]="0.00E+00",t[12]="# ?/?",t[13]="# ??/??",t[14]="m/d/yy",t[15]="d-mmm-yy",t[16]="d-mmm",t[17]="mmm-yy",t[18]="h:mm AM/PM",t[19]="h:mm:ss AM/PM",t[20]="h:mm",t[21]="h:mm:ss",t[22]="m/d/yy h:mm",t[37]="#,##0 ;(#,##0)",t[38]="#,##0 ;[Red](#,##0)",t[39]="#,##0.00;(#,##0.00)",t[40]="#,##0.00;[Red](#,##0.00)",t[45]="mm:ss",t[46]="[h]:mm:ss",t[47]="mmss.0",t[48]="##0.0E+0",t[49]="@",t[56]='"/ "hh""mm""ss" "',t}var Bt={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},hH={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},dqe={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function X4(t,e,r){for(var n=t<0?-1:1,i=t*n,s=0,a=1,o=0,c=1,u=0,l=0,f=Math.floor(i);u<e&&(f=Math.floor(i),o=f*a+s,l=f*u+c,!(i-f<5e-8));)i=1/(i-f),s=a,a=o,c=u,u=l;if(l>e&&(u>e?(l=c,o=s):(l=u,o=a)),!r)return[0,n*o,l];var d=Math.floor(n*o/l);return[d,n*o-d*l,l]}function nh(t,e,r){if(t>2958465||t<0)return null;var n=t|0,i=Math.floor(86400*(t-n)),s=0,a=[],o={D:n,T:i,u:86400*(t-n)-i,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(o.u)<1e-6&&(o.u=0),e&&e.date1904&&(n+=1462),o.u>.9999&&(o.u=0,++i==86400&&(o.T=i=0,++n,++o.D)),n===60)a=r?[1317,10,29]:[1900,2,29],s=3;else if(n===0)a=r?[1317,8,29]:[1900,1,0],s=6;else{n>60&&--n;var c=new Date(1900,0,1);c.setDate(c.getDate()+n-1),a=[c.getFullYear(),c.getMonth()+1,c.getDate()],s=c.getDay(),n<60&&(s=(s+6)%7),r&&(s=yqe(c,a))}return o.y=a[0],o.m=a[1],o.d=a[2],o.S=i%60,i=Math.floor(i/60),o.M=i%60,i=Math.floor(i/60),o.H=i,o.q=s,o}var sce=new Date(1899,11,31,0,0,0),hqe=sce.getTime(),pqe=new Date(1900,2,1,0,0,0);function ace(t,e){var r=t.getTime();return e?r-=1461*24*60*60*1e3:t>=pqe&&(r+=24*60*60*1e3),(r-(hqe+(t.getTimezoneOffset()-sce.getTimezoneOffset())*6e4))/(24*60*60*1e3)}function YB(t){return t.indexOf(".")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function mqe(t){return t.indexOf("E")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function gqe(t){var e=t<0?12:11,r=YB(t.toFixed(12));return r.length<=e||(r=t.toPrecision(10),r.length<=e)?r:t.toExponential(5)}function vqe(t){var e=YB(t.toFixed(11));return e.length>(t<0?12:11)||e==="0"||e==="-0"?t.toPrecision(6):e}function Av(t){var e=Math.floor(Math.log(Math.abs(t))*Math.LOG10E),r;return e>=-4&&e<=-1?r=t.toPrecision(10+e):Math.abs(e)<=9?r=gqe(t):e===10?r=t.toFixed(10).substr(0,12):r=vqe(t),YB(mqe(r.toUpperCase()))}function Vh(t,e){switch(typeof t){case"string":return t;case"boolean":return t?"TRUE":"FALSE";case"number":return(t|0)===t?t.toString(10):Av(t);case"undefined":return"";case"object":if(t==null)return"";if(t instanceof Date)return eo(14,ace(t,e&&e.date1904),e)}throw new Error("unsupported value in General format: "+t)}function yqe(t,e){e[0]-=581;var r=t.getDay();return t<60&&(r=(r+6)%7),r}function bqe(t,e,r,n){var i="",s=0,a=0,o=r.y,c,u=0;switch(t){case 98:o=r.y+543;case 121:switch(e.length){case 1:case 2:c=o%100,u=2;break;default:c=o%1e4,u=4;break}break;case 109:switch(e.length){case 1:case 2:c=r.m,u=e.length;break;case 3:return QS[r.m-1][1];case 5:return QS[r.m-1][0];default:return QS[r.m-1][2]}break;case 100:switch(e.length){case 1:case 2:c=r.d,u=e.length;break;case 3:return dH[r.q][0];default:return dH[r.q][1]}break;case 104:switch(e.length){case 1:case 2:c=1+(r.H+11)%12,u=e.length;break;default:throw"bad hour format: "+e}break;case 72:switch(e.length){case 1:case 2:c=r.H,u=e.length;break;default:throw"bad hour format: "+e}break;case 77:switch(e.length){case 1:case 2:c=r.M,u=e.length;break;default:throw"bad minute format: "+e}break;case 115:if(e!="s"&&e!="ss"&&e!=".0"&&e!=".00"&&e!=".000")throw"bad second format: "+e;return r.u===0&&(e=="s"||e=="ss")?ic(r.S,e.length):(n>=2?a=n===3?1e3:100:a=n===1?10:1,s=Math.round(a*(r.S+r.u)),s>=60*a&&(s=0),e==="s"?s===0?"0":""+s/a:(i=ic(s,2+n),e==="ss"?i.substr(0,2):"."+i.substr(2,e.length-1)));case 90:switch(e){case"[h]":case"[hh]":c=r.D*24+r.H;break;case"[m]":case"[mm]":c=(r.D*24+r.H)*60+r.M;break;case"[s]":case"[ss]":c=((r.D*24+r.H)*60+r.M)*60+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+e}u=e.length===3?1:2;break;case 101:c=o,u=1;break}var l=u>0?ic(c,u):"";return l}function au(t){var e=3;if(t.length<=e)return t;for(var r=t.length%e,n=t.substr(0,r);r!=t.length;r+=e)n+=(n.length>0?",":"")+t.substr(r,e);return n}var oce=/%/g;function wqe(t,e,r){var n=e.replace(oce,""),i=e.length-n.length;return mu(t,n,r*Math.pow(10,2*i))+Ir("%",i)}function _qe(t,e,r){for(var n=e.length-1;e.charCodeAt(n-1)===44;)--n;return mu(t,e.substr(0,n),r/Math.pow(10,3*(e.length-n)))}function cce(t,e){var r,n=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+cce(t,-e);var i=t.indexOf(".");i===-1&&(i=t.indexOf("E"));var s=Math.floor(Math.log(e)*Math.LOG10E)%i;if(s<0&&(s+=i),r=(e/Math.pow(10,s)).toPrecision(n+1+(i+s)%i),r.indexOf("e")===-1){var a=Math.floor(Math.log(e)*Math.LOG10E);for(r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(a-r.length+s):r+="E+"+(a-s);r.substr(0,2)==="0.";)r=r.charAt(0)+r.substr(2,i)+"."+r.substr(2+i),r=r.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,c,u,l){return c+u+l.substr(0,(i+s)%i)+"."+l.substr(s)+"E"})}else r=e.toExponential(n);return t.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),t.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var lce=/# (\?+)( ?)\/( ?)(\d+)/;function xqe(t,e,r){var n=parseInt(t[4],10),i=Math.round(e*n),s=Math.floor(i/n),a=i-s*n,o=n;return r+(s===0?"":""+s)+" "+(a===0?Ir(" ",t[1].length+1+t[4].length):XB(a,t[1].length)+t[2]+"/"+t[3]+ic(o,t[4].length))}function Sqe(t,e,r){return r+(e===0?"":""+e)+Ir(" ",t[1].length+2+t[4].length)}var uce=/^#*0*\.([0#]+)/,fce=/\).*[0#]/,dce=/\(###\) ###\\?-####/;function Gs(t){for(var e="",r,n=0;n!=t.length;++n)switch(r=t.charCodeAt(n)){case 35:break;case 63:e+=" ";break;case 48:e+="0";break;default:e+=String.fromCharCode(r)}return e}function pH(t,e){var r=Math.pow(10,e);return""+Math.round(t*r)/r}function mH(t,e){var r=t-Math.floor(t),n=Math.pow(10,e);return e<(""+Math.round(r*n)).length?0:Math.round(r*n)}function Eqe(t,e){return e<(""+Math.round((t-Math.floor(t))*Math.pow(10,e))).length?1:0}function kqe(t){return t<2147483647&&t>-2147483648?""+(t>=0?t|0:t-1|0):""+Math.floor(t)}function fo(t,e,r){if(t.charCodeAt(0)===40&&!e.match(fce)){var n=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?fo("n",n,r):"("+fo("n",n,-r)+")"}if(e.charCodeAt(e.length-1)===44)return _qe(t,e,r);if(e.indexOf("%")!==-1)return wqe(t,e,r);if(e.indexOf("E")!==-1)return cce(e,r);if(e.charCodeAt(0)===36)return"$"+fo(t,e.substr(e.charAt(1)==" "?2:1),r);var i,s,a,o,c=Math.abs(r),u=r<0?"-":"";if(e.match(/^00+$/))return u+Z0(c,e.length);if(e.match(/^[#?]+$/))return i=Z0(r,0),i==="0"&&(i=""),i.length>e.length?i:Gs(e.substr(0,e.length-i.length))+i;if(s=e.match(lce))return xqe(s,c,u);if(e.match(/^#+0+$/))return u+Z0(c,e.length-e.indexOf("0"));if(s=e.match(uce))return i=pH(r,s[1].length).replace(/^([^\.]+)$/,"$1."+Gs(s[1])).replace(/\.$/,"."+Gs(s[1])).replace(/\.(\d*)$/,function(m,p){return"."+p+Ir("0",Gs(s[1]).length-p.length)}),e.indexOf("0.")!==-1?i:i.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),s=e.match(/^(0*)\.(#*)$/))return u+pH(c,s[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=e.match(/^#{1,3},##0(\.?)$/))return u+au(Z0(c,0));if(s=e.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+fo(t,e,-r):au(""+(Math.floor(r)+Eqe(r,s[1].length)))+"."+ic(mH(r,s[1].length),s[1].length);if(s=e.match(/^#,#*,#0/))return fo(t,e.replace(/^#,#*,/,""),r);if(s=e.match(/^([0#]+)(\\?-([0#]+))+$/))return i=M1(fo(t,e.replace(/[\\-]/g,""),r)),a=0,M1(M1(e.replace(/\\/g,"")).replace(/[0#]/g,function(m){return a<i.length?i.charAt(a++):m==="0"?"0":""}));if(e.match(dce))return i=fo(t,"##########",r),"("+i.substr(0,3)+") "+i.substr(3,3)+"-"+i.substr(6);var l="";if(s=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(s[4].length,7),o=X4(c,Math.pow(10,a)-1,!1),i=""+u,l=mu("n",s[1],o[1]),l.charAt(l.length-1)==" "&&(l=l.substr(0,l.length-1)+"0"),i+=l+s[2]+"/"+s[3],l=G4(o[2],a),l.length<s[4].length&&(l=Gs(s[4].substr(s[4].length-l.length))+l),i+=l,i;if(s=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(Math.max(s[1].length,s[4].length),7),o=X4(c,Math.pow(10,a)-1,!0),u+(o[0]||(o[1]?"":"0"))+" "+(o[1]?XB(o[1],a)+s[2]+"/"+s[3]+G4(o[2],a):Ir(" ",2*a+1+s[2].length+s[3].length));if(s=e.match(/^[#0?]+$/))return i=Z0(r,0),e.length<=i.length?i:Gs(e.substr(0,e.length-i.length))+i;if(s=e.match(/^([#0?]+)\.([#0]+)$/)){i=""+r.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),a=i.indexOf(".");var f=e.indexOf(".")-a,d=e.length-i.length-f;return Gs(e.substr(0,f)+i+e.substr(e.length-d))}if(s=e.match(/^00,000\.([#0]*0)$/))return a=mH(r,s[1].length),r<0?"-"+fo(t,e,-r):au(kqe(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(m){return"00,"+(m.length<3?ic(0,3-m.length):"")+m})+"."+ic(a,s[1].length);switch(e){case"###,##0.00":return fo(t,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var h=au(Z0(c,0));return h!=="0"?u+h:"";case"###,###.00":return fo(t,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return fo(t,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+e+"|")}function Tqe(t,e,r){for(var n=e.length-1;e.charCodeAt(n-1)===44;)--n;return mu(t,e.substr(0,n),r/Math.pow(10,3*(e.length-n)))}function Aqe(t,e,r){var n=e.replace(oce,""),i=e.length-n.length;return mu(t,n,r*Math.pow(10,2*i))+Ir("%",i)}function hce(t,e){var r,n=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+hce(t,-e);var i=t.indexOf(".");i===-1&&(i=t.indexOf("E"));var s=Math.floor(Math.log(e)*Math.LOG10E)%i;if(s<0&&(s+=i),r=(e/Math.pow(10,s)).toPrecision(n+1+(i+s)%i),!r.match(/[Ee]/)){var a=Math.floor(Math.log(e)*Math.LOG10E);r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(a-r.length+s):r+="E+"+(a-s),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,c,u,l){return c+u+l.substr(0,(i+s)%i)+"."+l.substr(s)+"E"})}else r=e.toExponential(n);return t.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),t.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function zc(t,e,r){if(t.charCodeAt(0)===40&&!e.match(fce)){var n=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?zc("n",n,r):"("+zc("n",n,-r)+")"}if(e.charCodeAt(e.length-1)===44)return Tqe(t,e,r);if(e.indexOf("%")!==-1)return Aqe(t,e,r);if(e.indexOf("E")!==-1)return hce(e,r);if(e.charCodeAt(0)===36)return"$"+zc(t,e.substr(e.charAt(1)==" "?2:1),r);var i,s,a,o,c=Math.abs(r),u=r<0?"-":"";if(e.match(/^00+$/))return u+ic(c,e.length);if(e.match(/^[#?]+$/))return i=""+r,r===0&&(i=""),i.length>e.length?i:Gs(e.substr(0,e.length-i.length))+i;if(s=e.match(lce))return Sqe(s,c,u);if(e.match(/^#+0+$/))return u+ic(c,e.length-e.indexOf("0"));if(s=e.match(uce))return i=(""+r).replace(/^([^\.]+)$/,"$1."+Gs(s[1])).replace(/\.$/,"."+Gs(s[1])),i=i.replace(/\.(\d*)$/,function(m,p){return"."+p+Ir("0",Gs(s[1]).length-p.length)}),e.indexOf("0.")!==-1?i:i.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),s=e.match(/^(0*)\.(#*)$/))return u+(""+c).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=e.match(/^#{1,3},##0(\.?)$/))return u+au(""+c);if(s=e.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+zc(t,e,-r):au(""+r)+"."+Ir("0",s[1].length);if(s=e.match(/^#,#*,#0/))return zc(t,e.replace(/^#,#*,/,""),r);if(s=e.match(/^([0#]+)(\\?-([0#]+))+$/))return i=M1(zc(t,e.replace(/[\\-]/g,""),r)),a=0,M1(M1(e.replace(/\\/g,"")).replace(/[0#]/g,function(m){return a<i.length?i.charAt(a++):m==="0"?"0":""}));if(e.match(dce))return i=zc(t,"##########",r),"("+i.substr(0,3)+") "+i.substr(3,3)+"-"+i.substr(6);var l="";if(s=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(s[4].length,7),o=X4(c,Math.pow(10,a)-1,!1),i=""+u,l=mu("n",s[1],o[1]),l.charAt(l.length-1)==" "&&(l=l.substr(0,l.length-1)+"0"),i+=l+s[2]+"/"+s[3],l=G4(o[2],a),l.length<s[4].length&&(l=Gs(s[4].substr(s[4].length-l.length))+l),i+=l,i;if(s=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(Math.max(s[1].length,s[4].length),7),o=X4(c,Math.pow(10,a)-1,!0),u+(o[0]||(o[1]?"":"0"))+" "+(o[1]?XB(o[1],a)+s[2]+"/"+s[3]+G4(o[2],a):Ir(" ",2*a+1+s[2].length+s[3].length));if(s=e.match(/^[#0?]+$/))return i=""+r,e.length<=i.length?i:Gs(e.substr(0,e.length-i.length))+i;if(s=e.match(/^([#0]+)\.([#0]+)$/)){i=""+r.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),a=i.indexOf(".");var f=e.indexOf(".")-a,d=e.length-i.length-f;return Gs(e.substr(0,f)+i+e.substr(e.length-d))}if(s=e.match(/^00,000\.([#0]*0)$/))return r<0?"-"+zc(t,e,-r):au(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(m){return"00,"+(m.length<3?ic(0,3-m.length):"")+m})+"."+ic(0,s[1].length);switch(e){case"###,###":case"##,###":case"#,###":var h=au(""+c);return h!=="0"?u+h:"";default:if(e.match(/\.[0#?]*$/))return zc(t,e.slice(0,e.lastIndexOf(".")),r)+Gs(e.slice(e.lastIndexOf(".")))}throw new Error("unsupported format |"+e+"|")}function mu(t,e,r){return(r|0)===r?zc(t,e,r):fo(t,e,r)}function Cqe(t){for(var e=[],r=!1,n=0,i=0;n<t.length;++n)switch(t.charCodeAt(n)){case 34:r=!r;break;case 95:case 42:case 92:++n;break;case 59:e[e.length]=t.substr(i,n-i),i=n+1}if(e[e.length]=t.substr(i),r===!0)throw new Error("Format |"+t+"| unterminated string ");return e}var pce=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function C0(t){for(var e=0,r="",n="";e<t.length;)switch(r=t.charAt(e)){case"G":K4(t,e)&&(e+=6),e++;break;case'"':for(;t.charCodeAt(++e)!==34&&e<t.length;);++e;break;case"\\":e+=2;break;case"_":e+=2;break;case"@":++e;break;case"B":case"b":if(t.charAt(e+1)==="1"||t.charAt(e+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(t.substr(e,3).toUpperCase()==="A/P"||t.substr(e,5).toUpperCase()==="AM/PM"||t.substr(e,5).toUpperCase()==="/")return!0;++e;break;case"[":for(n=r;t.charAt(e++)!=="]"&&e<t.length;)n+=t.charAt(e);if(n.match(pce))return!0;break;case".":case"0":case"#":for(;e<t.length&&("0#?.,E+-%".indexOf(r=t.charAt(++e))>-1||r=="\\"&&t.charAt(e+1)=="-"&&"0#".indexOf(t.charAt(e+2))>-1););break;case"?":for(;t.charAt(++e)===r;);break;case"*":++e,(t.charAt(e)==" "||t.charAt(e)=="*")&&++e;break;case"(":case")":++e;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;e<t.length&&"0123456789".indexOf(t.charAt(++e))>-1;);break;case" ":++e;break;default:++e;break}return!1}function Iqe(t,e,r,n){for(var i=[],s="",a=0,o="",c="t",u,l,f,d="H";a<t.length;)switch(o=t.charAt(a)){case"G":if(!K4(t,a))throw new Error("unrecognized character "+o+" in "+t);i[i.length]={t:"G",v:"General"},a+=7;break;case'"':for(s="";(f=t.charCodeAt(++a))!==34&&a<t.length;)s+=String.fromCharCode(f);i[i.length]={t:"t",v:s},++a;break;case"\\":var h=t.charAt(++a),m=h==="("||h===")"?h:"t";i[i.length]={t:m,v:h},++a;break;case"_":i[i.length]={t:"t",v:" "},a+=2;break;case"@":i[i.length]={t:"T",v:e},++a;break;case"B":case"b":if(t.charAt(a+1)==="1"||t.charAt(a+1)==="2"){if(u==null&&(u=nh(e,r,t.charAt(a+1)==="2"),u==null))return"";i[i.length]={t:"X",v:t.substr(a,2)},c=o,a+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":o=o.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(e<0||u==null&&(u=nh(e,r),u==null))return"";for(s=o;++a<t.length&&t.charAt(a).toLowerCase()===o;)s+=o;o==="m"&&c.toLowerCase()==="h"&&(o="M"),o==="h"&&(o=d),i[i.length]={t:o,v:s},c=o;break;case"A":case"a":case"":var p={t:o,v:o};if(u==null&&(u=nh(e,r)),t.substr(a,3).toUpperCase()==="A/P"?(u!=null&&(p.v=u.H>=12?t.charAt(a+2):o),p.t="T",d="h",a+=3):t.substr(a,5).toUpperCase()==="AM/PM"?(u!=null&&(p.v=u.H>=12?"PM":"AM"),p.t="T",a+=5,d="h"):t.substr(a,5).toUpperCase()==="/"?(u!=null&&(p.v=u.H>=12?"":""),p.t="T",a+=5,d="h"):(p.t="t",++a),u==null&&p.t==="T")return"";i[i.length]=p,c=o;break;case"[":for(s=o;t.charAt(a++)!=="]"&&a<t.length;)s+=t.charAt(a);if(s.slice(-1)!=="]")throw'unterminated "[" block: |'+s+"|";if(s.match(pce)){if(u==null&&(u=nh(e,r),u==null))return"";i[i.length]={t:"Z",v:s.toLowerCase()},c=s.charAt(1)}else s.indexOf("$")>-1&&(s=(s.match(/\$([^-\[\]]*)/)||[])[1]||"$",C0(t)||(i[i.length]={t:"t",v:s}));break;case".":if(u!=null){for(s=o;++a<t.length&&(o=t.charAt(a))==="0";)s+=o;i[i.length]={t:"s",v:s};break}case"0":case"#":for(s=o;++a<t.length&&"0#?.,E+-%".indexOf(o=t.charAt(a))>-1;)s+=o;i[i.length]={t:"n",v:s};break;case"?":for(s=o;t.charAt(++a)===o;)s+=o;i[i.length]={t:o,v:s},c=o;break;case"*":++a,(t.charAt(a)==" "||t.charAt(a)=="*")&&++a;break;case"(":case")":i[i.length]={t:n===1?"t":o,v:o},++a;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(s=o;a<t.length&&"0123456789".indexOf(t.charAt(++a))>-1;)s+=t.charAt(a);i[i.length]={t:"D",v:s};break;case" ":i[i.length]={t:o,v:o},++a;break;case"$":i[i.length]={t:"t",v:"$"},++a;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(o)===-1)throw new Error("unrecognized character "+o+" in "+t);i[i.length]={t:"t",v:o},++a;break}var g=0,v=0,y;for(a=i.length-1,c="t";a>=0;--a)switch(i[a].t){case"h":case"H":i[a].t=d,c="h",g<1&&(g=1);break;case"s":(y=i[a].v.match(/\.0+$/))&&(v=Math.max(v,y[0].length-1)),g<3&&(g=3);case"d":case"y":case"M":case"e":c=i[a].t;break;case"m":c==="s"&&(i[a].t="M",g<2&&(g=2));break;case"X":break;case"Z":g<1&&i[a].v.match(/[Hh]/)&&(g=1),g<2&&i[a].v.match(/[Mm]/)&&(g=2),g<3&&i[a].v.match(/[Ss]/)&&(g=3)}switch(g){case 0:break;case 1:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M),u.M>=60&&(u.M=0,++u.H);break;case 2:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M);break}var b="",_;for(a=0;a<i.length;++a)switch(i[a].t){case"t":case"T":case" ":case"D":break;case"X":i[a].v="",i[a].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":i[a].v=bqe(i[a].t.charCodeAt(0),i[a].v,u,v),i[a].t="t";break;case"n":case"?":for(_=a+1;i[_]!=null&&((o=i[_].t)==="?"||o==="D"||(o===" "||o==="t")&&i[_+1]!=null&&(i[_+1].t==="?"||i[_+1].t==="t"&&i[_+1].v==="/")||i[a].t==="("&&(o===" "||o==="n"||o===")")||o==="t"&&(i[_].v==="/"||i[_].v===" "&&i[_+1]!=null&&i[_+1].t=="?"));)i[a].v+=i[_].v,i[_]={v:"",t:";"},++_;b+=i[a].v,a=_-1;break;case"G":i[a].t="t",i[a].v=Vh(e,r);break}var x="",E,k;if(b.length>0){b.charCodeAt(0)==40?(E=e<0&&b.charCodeAt(0)===45?-e:e,k=mu("n",b,E)):(E=e<0&&n>1?-e:e,k=mu("n",b,E),E<0&&i[0]&&i[0].t=="t"&&(k=k.substr(1),i[0].v="-"+i[0].v)),_=k.length-1;var B=i.length;for(a=0;a<i.length;++a)if(i[a]!=null&&i[a].t!="t"&&i[a].v.indexOf(".")>-1){B=a;break}var D=i.length;if(B===i.length&&k.indexOf("E")===-1){for(a=i.length-1;a>=0;--a)i[a]==null||"n?".indexOf(i[a].t)===-1||(_>=i[a].v.length-1?(_-=i[a].v.length,i[a].v=k.substr(_+1,i[a].v.length)):_<0?i[a].v="":(i[a].v=k.substr(0,_+1),_=-1),i[a].t="t",D=a);_>=0&&D<i.length&&(i[D].v=k.substr(0,_+1)+i[D].v)}else if(B!==i.length&&k.indexOf("E")===-1){for(_=k.indexOf(".")-1,a=B;a>=0;--a)if(!(i[a]==null||"n?".indexOf(i[a].t)===-1)){for(l=i[a].v.indexOf(".")>-1&&a===B?i[a].v.indexOf(".")-1:i[a].v.length-1,x=i[a].v.substr(l+1);l>=0;--l)_>=0&&(i[a].v.charAt(l)==="0"||i[a].v.charAt(l)==="#")&&(x=k.charAt(_--)+x);i[a].v=x,i[a].t="t",D=a}for(_>=0&&D<i.length&&(i[D].v=k.substr(0,_+1)+i[D].v),_=k.indexOf(".")+1,a=B;a<i.length;++a)if(!(i[a]==null||"n?(".indexOf(i[a].t)===-1&&a!==B)){for(l=i[a].v.indexOf(".")>-1&&a===B?i[a].v.indexOf(".")+1:0,x=i[a].v.substr(0,l);l<i[a].v.length;++l)_<k.length&&(x+=k.charAt(_++));i[a].v=x,i[a].t="t",D=a}}}for(a=0;a<i.length;++a)i[a]!=null&&"n?".indexOf(i[a].t)>-1&&(E=n>1&&e<0&&a>0&&i[a-1].v==="-"?-e:e,i[a].v=mu(i[a].t,i[a].v,E),i[a].t="t");var z="";for(a=0;a!==i.length;++a)i[a]!=null&&(z+=i[a].v);return z}var gH=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function vH(t,e){if(e==null)return!1;var r=parseFloat(e[2]);switch(e[1]){case"=":if(t==r)return!0;break;case">":if(t>r)return!0;break;case"<":if(t<r)return!0;break;case"<>":if(t!=r)return!0;break;case">=":if(t>=r)return!0;break;case"<=":if(t<=r)return!0;break}return!1}function Pqe(t,e){var r=Cqe(t),n=r.length,i=r[n-1].indexOf("@");if(n<4&&i>-1&&--n,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if(typeof e!="number")return[4,r.length===4||i>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=i>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=i>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=i>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"];break}var s=e>0?r[0]:e<0?r[1]:r[2];if(r[0].indexOf("[")===-1&&r[1].indexOf("[")===-1)return[n,s];if(r[0].match(/\[[=<>]/)!=null||r[1].match(/\[[=<>]/)!=null){var a=r[0].match(gH),o=r[1].match(gH);return vH(e,a)?[n,r[0]]:vH(e,o)?[n,r[1]]:[n,r[a!=null&&o!=null?2:1]]}return[n,s]}function eo(t,e,r){r==null&&(r={});var n="";switch(typeof t){case"string":t=="m/d/yy"&&r.dateNF?n=r.dateNF:n=t;break;case"number":t==14&&r.dateNF?n=r.dateNF:n=(r.table!=null?r.table:Bt)[t],n==null&&(n=r.table&&r.table[hH[t]]||Bt[hH[t]]),n==null&&(n=dqe[t]||"General");break}if(K4(n,0))return Vh(e,r);e instanceof Date&&(e=ace(e,r.date1904));var i=Pqe(n,e);if(K4(i[1]))return Vh(e,r);if(e===!0)e="TRUE";else if(e===!1)e="FALSE";else if(e===""||e==null)return"";return Iqe(i[1],e,r,i[0])}function mce(t,e){if(typeof e!="number"){e=+e||-1;for(var r=0;r<392;++r){if(Bt[r]==null){e<0&&(e=r);continue}if(Bt[r]==t){e=r;break}}e<0&&(e=391)}return Bt[e]=t,e}function C5(t){for(var e=0;e!=392;++e)t[e]!==void 0&&mce(t[e],e)}function cm(){Bt=fqe()}var Rqe={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},gce=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function Oqe(t){var e=typeof t=="number"?Bt[t]:t;return e=e.replace(gce,"(\\d+)"),new RegExp("^"+e+"$")}function Bqe(t,e,r){var n=-1,i=-1,s=-1,a=-1,o=-1,c=-1;(e.match(gce)||[]).forEach(function(f,d){var h=parseInt(r[d+1],10);switch(f.toLowerCase().charAt(0)){case"y":n=h;break;case"d":s=h;break;case"h":a=h;break;case"s":c=h;break;case"m":a>=0?o=h:i=h;break}}),c>=0&&o==-1&&i>=0&&(o=i,i=-1);var u=(""+(n>=0?n:new Date().getFullYear())).slice(-4)+"-"+("00"+(i>=1?i:1)).slice(-2)+"-"+("00"+(s>=1?s:1)).slice(-2);u.length==7&&(u="0"+u),u.length==8&&(u="20"+u);var l=("00"+(a>=0?a:0)).slice(-2)+":"+("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(c>=0?c:0)).slice(-2);return a==-1&&o==-1&&c==-1?u:n==-1&&i==-1&&s==-1?l:u+"T"+l}var Dqe={"d.m":"d\\.m"};function Uf(t,e){return mce(Dqe[t]||t,e)}var yH=function(){var t={};t.version="1.2.0";function e(){for(var k=0,B=new Array(256),D=0;D!=256;++D)k=D,k=k&1?-306674912^k>>>1:k>>>1,k=k&1?-306674912^k>>>1:k>>>1,k=k&1?-306674912^k>>>1:k>>>1,k=k&1?-306674912^k>>>1:k>>>1,k=k&1?-306674912^k>>>1:k>>>1,k=k&1?-306674912^k>>>1:k>>>1,k=k&1?-306674912^k>>>1:k>>>1,k=k&1?-306674912^k>>>1:k>>>1,B[D]=k;return typeof Int32Array<"u"?new Int32Array(B):B}var r=e();function n(k){var B=0,D=0,z=0,U=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(z=0;z!=256;++z)U[z]=k[z];for(z=0;z!=256;++z)for(D=k[z],B=256+z;B<4096;B+=256)D=U[B]=D>>>8^k[D&255];var S=[];for(z=1;z!=16;++z)S[z-1]=typeof Int32Array<"u"?U.subarray(z*256,z*256+256):U.slice(z*256,z*256+256);return S}var i=n(r),s=i[0],a=i[1],o=i[2],c=i[3],u=i[4],l=i[5],f=i[6],d=i[7],h=i[8],m=i[9],p=i[10],g=i[11],v=i[12],y=i[13],b=i[14];function _(k,B){for(var D=B^-1,z=0,U=k.length;z<U;)D=D>>>8^r[(D^k.charCodeAt(z++))&255];return~D}function x(k,B){for(var D=B^-1,z=k.length-15,U=0;U<z;)D=b[k[U++]^D&255]^y[k[U++]^D>>8&255]^v[k[U++]^D>>16&255]^g[k[U++]^D>>>24]^p[k[U++]]^m[k[U++]]^h[k[U++]]^d[k[U++]]^f[k[U++]]^l[k[U++]]^u[k[U++]]^c[k[U++]]^o[k[U++]]^a[k[U++]]^s[k[U++]]^r[k[U++]];for(z+=15;U<z;)D=D>>>8^r[(D^k[U++])&255];return~D}function E(k,B){for(var D=B^-1,z=0,U=k.length,S=0,T=0;z<U;)S=k.charCodeAt(z++),S<128?D=D>>>8^r[(D^S)&255]:S<2048?(D=D>>>8^r[(D^(192|S>>6&31))&255],D=D>>>8^r[(D^(128|S&63))&255]):S>=55296&&S<57344?(S=(S&1023)+64,T=k.charCodeAt(z++)&1023,D=D>>>8^r[(D^(240|S>>8&7))&255],D=D>>>8^r[(D^(128|S>>2&63))&255],D=D>>>8^r[(D^(128|T>>6&15|(S&3)<<4))&255],D=D>>>8^r[(D^(128|T&63))&255]):(D=D>>>8^r[(D^(224|S>>12&15))&255],D=D>>>8^r[(D^(128|S>>6&63))&255],D=D>>>8^r[(D^(128|S&63))&255]);return~D}return t.table=r,t.bstr=_,t.buf=x,t.str=E,t}(),St=function(){var e={};e.version="1.2.2";function r(oe,he){for(var fe=oe.split("/"),de=he.split("/"),pe=0,ge=0,Ae=Math.min(fe.length,de.length);pe<Ae;++pe){if(ge=fe[pe].length-de[pe].length)return ge;if(fe[pe]!=de[pe])return fe[pe]<de[pe]?-1:1}return fe.length-de.length}function n(oe){if(oe.charAt(oe.length-1)=="/")return oe.slice(0,-1).indexOf("/")===-1?oe:n(oe.slice(0,-1));var he=oe.lastIndexOf("/");return he===-1?oe:oe.slice(0,he+1)}function i(oe){if(oe.charAt(oe.length-1)=="/")return i(oe.slice(0,-1));var he=oe.lastIndexOf("/");return he===-1?oe:oe.slice(he+1)}function s(oe,he){typeof he=="string"&&(he=new Date(he));var fe=he.getHours();fe=fe<<6|he.getMinutes(),fe=fe<<5|he.getSeconds()>>>1,oe.write_shift(2,fe);var de=he.getFullYear()-1980;de=de<<4|he.getMonth()+1,de=de<<5|he.getDate(),oe.write_shift(2,de)}function a(oe){var he=oe.read_shift(2)&65535,fe=oe.read_shift(2)&65535,de=new Date,pe=fe&31;fe>>>=5;var ge=fe&15;fe>>>=4,de.setMilliseconds(0),de.setFullYear(fe+1980),de.setMonth(ge-1),de.setDate(pe);var Ae=he&31;he>>>=5;var De=he&63;return he>>>=6,de.setHours(he),de.setMinutes(De),de.setSeconds(Ae<<1),de}function o(oe){Pi(oe,0);for(var he={},fe=0;oe.l<=oe.length-4;){var de=oe.read_shift(2),pe=oe.read_shift(2),ge=oe.l+pe,Ae={};switch(de){case 21589:fe=oe.read_shift(1),fe&1&&(Ae.mtime=oe.read_shift(4)),pe>5&&(fe&2&&(Ae.atime=oe.read_shift(4)),fe&4&&(Ae.ctime=oe.read_shift(4))),Ae.mtime&&(Ae.mt=new Date(Ae.mtime*1e3));break;case 1:{var De=oe.read_shift(4),Ce=oe.read_shift(4);Ae.usz=Ce*Math.pow(2,32)+De,De=oe.read_shift(4),Ce=oe.read_shift(4),Ae.csz=Ce*Math.pow(2,32)+De}break}oe.l=ge,he[de]=Ae}return he}var c;function u(){return c||(c=Af)}function l(oe,he){if(oe[0]==80&&oe[1]==75)return xt(oe,he);if((oe[0]|32)==109&&(oe[1]|32)==105)return cn(oe,he);if(oe.length<512)throw new Error("CFB file size "+oe.length+" < 512");var fe=3,de=512,pe=0,ge=0,Ae=0,De=0,Ce=0,Ie=[],Pe=oe.slice(0,512);Pi(Pe,0);var Ue=f(Pe);switch(fe=Ue[0],fe){case 3:de=512;break;case 4:de=4096;break;case 0:if(Ue[1]==0)return xt(oe,he);default:throw new Error("Major Version: Expected 3 or 4 saw "+fe)}de!==512&&(Pe=oe.slice(0,de),Pi(Pe,28));var He=oe.slice(0,de);d(Pe,fe);var at=Pe.read_shift(4,"i");if(fe===3&&at!==0)throw new Error("# Directory Sectors: Expected 0 saw "+at);Pe.l+=4,Ae=Pe.read_shift(4,"i"),Pe.l+=4,Pe.chk("00100000","Mini Stream Cutoff Size: "),De=Pe.read_shift(4,"i"),pe=Pe.read_shift(4,"i"),Ce=Pe.read_shift(4,"i"),ge=Pe.read_shift(4,"i");for(var qe=-1,Ke=0;Ke<109&&(qe=Pe.read_shift(4,"i"),!(qe<0));++Ke)Ie[Ke]=qe;var It=h(oe,de);g(Ce,ge,It,de,Ie);var Dr=y(It,Ae,Ie,de);Ae<Dr.length&&(Dr[Ae].name="!Directory"),pe>0&&De!==T&&(Dr[De].name="!MiniFAT"),Dr[Ie[0]].name="!FAT",Dr.fat_addrs=Ie,Dr.ssz=de;var qr={},Mn=[],Ia=[],Pa=[];b(Ae,Dr,It,Mn,pe,qr,Ia,De),m(Ia,Pa,Mn),Mn.shift();var Ra={FileIndex:Ia,FullPaths:Pa};return he&&he.raw&&(Ra.raw={header:He,sectors:It}),Ra}function f(oe){if(oe[oe.l]==80&&oe[oe.l+1]==75)return[0,0];oe.chk(w,"Header Signature: "),oe.l+=16;var he=oe.read_shift(2,"u");return[oe.read_shift(2,"u"),he]}function d(oe,he){var fe=9;switch(oe.l+=2,fe=oe.read_shift(2)){case 9:if(he!=3)throw new Error("Sector Shift: Expected 9 saw "+fe);break;case 12:if(he!=4)throw new Error("Sector Shift: Expected 12 saw "+fe);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+fe)}oe.chk("0600","Mini Sector Shift: "),oe.chk("000000000000","Reserved: ")}function h(oe,he){for(var fe=Math.ceil(oe.length/he)-1,de=[],pe=1;pe<fe;++pe)de[pe-1]=oe.slice(pe*he,(pe+1)*he);return de[fe-1]=oe.slice(fe*he),de}function m(oe,he,fe){for(var de=0,pe=0,ge=0,Ae=0,De=0,Ce=fe.length,Ie=[],Pe=[];de<Ce;++de)Ie[de]=Pe[de]=de,he[de]=fe[de];for(;De<Pe.length;++De)de=Pe[De],pe=oe[de].L,ge=oe[de].R,Ae=oe[de].C,Ie[de]===de&&(pe!==-1&&Ie[pe]!==pe&&(Ie[de]=Ie[pe]),ge!==-1&&Ie[ge]!==ge&&(Ie[de]=Ie[ge])),Ae!==-1&&(Ie[Ae]=de),pe!==-1&&de!=Ie[de]&&(Ie[pe]=Ie[de],Pe.lastIndexOf(pe)<De&&Pe.push(pe)),ge!==-1&&de!=Ie[de]&&(Ie[ge]=Ie[de],Pe.lastIndexOf(ge)<De&&Pe.push(ge));for(de=1;de<Ce;++de)Ie[de]===de&&(ge!==-1&&Ie[ge]!==ge?Ie[de]=Ie[ge]:pe!==-1&&Ie[pe]!==pe&&(Ie[de]=Ie[pe]));for(de=1;de<Ce;++de)if(oe[de].type!==0){if(De=de,De!=Ie[De])do De=Ie[De],he[de]=he[De]+"/"+he[de];while(De!==0&&Ie[De]!==-1&&De!=Ie[De]);Ie[de]=-1}for(he[0]+="/",de=1;de<Ce;++de)oe[de].type!==2&&(he[de]+="/")}function p(oe,he,fe){for(var de=oe.start,pe=oe.size,ge=[],Ae=de;fe&&pe>0&&Ae>=0;)ge.push(he.slice(Ae*S,Ae*S+S)),pe-=S,Ae=zd(fe,Ae*4);return ge.length===0?Ne(0):wi(ge).slice(0,oe.size)}function g(oe,he,fe,de,pe){var ge=T;if(oe===T){if(he!==0)throw new Error("DIFAT chain shorter than expected")}else if(oe!==-1){var Ae=fe[oe],De=(de>>>2)-1;if(!Ae)return;for(var Ce=0;Ce<De&&(ge=zd(Ae,Ce*4))!==T;++Ce)pe.push(ge);he>=1&&g(zd(Ae,de-4),he-1,fe,de,pe)}}function v(oe,he,fe,de,pe){var ge=[],Ae=[];pe||(pe=[]);var De=de-1,Ce=0,Ie=0;for(Ce=he;Ce>=0;){pe[Ce]=!0,ge[ge.length]=Ce,Ae.push(oe[Ce]);var Pe=fe[Math.floor(Ce*4/de)];if(Ie=Ce*4&De,de<4+Ie)throw new Error("FAT boundary crossed: "+Ce+" 4 "+de);if(!oe[Pe])break;Ce=zd(oe[Pe],Ie)}return{nodes:ge,data:PH([Ae])}}function y(oe,he,fe,de){var pe=oe.length,ge=[],Ae=[],De=[],Ce=[],Ie=de-1,Pe=0,Ue=0,He=0,at=0;for(Pe=0;Pe<pe;++Pe)if(De=[],He=Pe+he,He>=pe&&(He-=pe),!Ae[He]){Ce=[];var qe=[];for(Ue=He;Ue>=0;){qe[Ue]=!0,Ae[Ue]=!0,De[De.length]=Ue,Ce.push(oe[Ue]);var Ke=fe[Math.floor(Ue*4/de)];if(at=Ue*4&Ie,de<4+at)throw new Error("FAT boundary crossed: "+Ue+" 4 "+de);if(!oe[Ke]||(Ue=zd(oe[Ke],at),qe[Ue]))break}ge[He]={nodes:De,data:PH([Ce])}}return ge}function b(oe,he,fe,de,pe,ge,Ae,De){for(var Ce=0,Ie=de.length?2:0,Pe=he[oe].data,Ue=0,He=0,at;Ue<Pe.length;Ue+=128){var qe=Pe.slice(Ue,Ue+128);Pi(qe,64),He=qe.read_shift(2),at=rD(qe,0,He-Ie),de.push(at);var Ke={name:at,type:qe.read_shift(1),color:qe.read_shift(1),L:qe.read_shift(4,"i"),R:qe.read_shift(4,"i"),C:qe.read_shift(4,"i"),clsid:qe.read_shift(16),state:qe.read_shift(4,"i"),start:0,size:0},It=qe.read_shift(2)+qe.read_shift(2)+qe.read_shift(2)+qe.read_shift(2);It!==0&&(Ke.ct=_(qe,qe.l-8));var Dr=qe.read_shift(2)+qe.read_shift(2)+qe.read_shift(2)+qe.read_shift(2);Dr!==0&&(Ke.mt=_(qe,qe.l-8)),Ke.start=qe.read_shift(4,"i"),Ke.size=qe.read_shift(4,"i"),Ke.size<0&&Ke.start<0&&(Ke.size=Ke.type=0,Ke.start=T,Ke.name=""),Ke.type===5?(Ce=Ke.start,pe>0&&Ce!==T&&(he[Ce].name="!StreamData")):Ke.size>=4096?(Ke.storage="fat",he[Ke.start]===void 0&&(he[Ke.start]=v(fe,Ke.start,he.fat_addrs,he.ssz)),he[Ke.start].name=Ke.name,Ke.content=he[Ke.start].data.slice(0,Ke.size)):(Ke.storage="minifat",Ke.size<0?Ke.size=0:Ce!==T&&Ke.start!==T&&he[Ce]&&(Ke.content=p(Ke,he[Ce].data,(he[De]||{}).data))),Ke.content&&Pi(Ke.content,0),ge[at]=Ke,Ae.push(Ke)}}function _(oe,he){return new Date((Va(oe,he+4)/1e7*Math.pow(2,32)+Va(oe,he)/1e7-11644473600)*1e3)}function x(oe,he){return u(),l(c.readFileSync(oe),he)}function E(oe,he){var fe=he&&he.type;switch(fe||mr&&Buffer.isBuffer(oe)&&(fe="buffer"),fe||"base64"){case"file":return x(oe,he);case"base64":return l(Js(Qa(oe)),he);case"binary":return l(Js(oe),he)}return l(oe,he)}function k(oe,he){var fe=he||{},de=fe.root||"Root Entry";if(oe.FullPaths||(oe.FullPaths=[]),oe.FileIndex||(oe.FileIndex=[]),oe.FullPaths.length!==oe.FileIndex.length)throw new Error("inconsistent CFB structure");oe.FullPaths.length===0&&(oe.FullPaths[0]=de+"/",oe.FileIndex[0]={name:de,type:5}),fe.CLSID&&(oe.FileIndex[0].clsid=fe.CLSID),B(oe)}function B(oe){var he="Sh33tJ5";if(!St.find(oe,"/"+he)){var fe=Ne(4);fe[0]=55,fe[1]=fe[3]=50,fe[2]=54,oe.FileIndex.push({name:he,type:2,content:fe,size:4,L:69,R:69,C:69}),oe.FullPaths.push(oe.FullPaths[0]+he),D(oe)}}function D(oe,he){k(oe);for(var fe=!1,de=!1,pe=oe.FullPaths.length-1;pe>=0;--pe){var ge=oe.FileIndex[pe];switch(ge.type){case 0:de?fe=!0:(oe.FileIndex.pop(),oe.FullPaths.pop());break;case 1:case 2:case 5:de=!0,isNaN(ge.R*ge.L*ge.C)&&(fe=!0),ge.R>-1&&ge.L>-1&&ge.R==ge.L&&(fe=!0);break;default:fe=!0;break}}if(!(!fe&&!he)){var Ae=new Date(1987,1,19),De=0,Ce=Object.create?Object.create(null):{},Ie=[];for(pe=0;pe<oe.FullPaths.length;++pe)Ce[oe.FullPaths[pe]]=!0,oe.FileIndex[pe].type!==0&&Ie.push([oe.FullPaths[pe],oe.FileIndex[pe]]);for(pe=0;pe<Ie.length;++pe){var Pe=n(Ie[pe][0]);for(de=Ce[Pe];!de;){for(;n(Pe)&&!Ce[n(Pe)];)Pe=n(Pe);Ie.push([Pe,{name:i(Pe).replace("/",""),type:1,clsid:F,ct:Ae,mt:Ae,content:null}]),Ce[Pe]=!0,Pe=n(Ie[pe][0]),de=Ce[Pe]}}for(Ie.sort(function(at,qe){return r(at[0],qe[0])}),oe.FullPaths=[],oe.FileIndex=[],pe=0;pe<Ie.length;++pe)oe.FullPaths[pe]=Ie[pe][0],oe.FileIndex[pe]=Ie[pe][1];for(pe=0;pe<Ie.length;++pe){var Ue=oe.FileIndex[pe],He=oe.FullPaths[pe];if(Ue.name=i(He).replace("/",""),Ue.L=Ue.R=Ue.C=-(Ue.color=1),Ue.size=Ue.content?Ue.content.length:0,Ue.start=0,Ue.clsid=Ue.clsid||F,pe===0)Ue.C=Ie.length>1?1:-1,Ue.size=0,Ue.type=5;else if(He.slice(-1)=="/"){for(De=pe+1;De<Ie.length&&n(oe.FullPaths[De])!=He;++De);for(Ue.C=De>=Ie.length?-1:De,De=pe+1;De<Ie.length&&n(oe.FullPaths[De])!=n(He);++De);Ue.R=De>=Ie.length?-1:De,Ue.type=1}else n(oe.FullPaths[pe+1]||"")==n(He)&&(Ue.R=pe+1),Ue.type=2}}}function z(oe,he){var fe=he||{};if(fe.fileType=="mad")return ln(oe,fe);switch(D(oe),fe.fileType){case"zip":return gt(oe,fe)}var de=function(at){for(var qe=0,Ke=0,It=0;It<at.FileIndex.length;++It){var Dr=at.FileIndex[It];if(Dr.content){var qr=Dr.content.length;qr>0&&(qr<4096?qe+=qr+63>>6:Ke+=qr+511>>9)}}for(var Mn=at.FullPaths.length+3>>2,Ia=qe+7>>3,Pa=qe+127>>7,Ra=Ia+Ke+Mn+Pa,js=Ra+127>>7,$o=js<=109?0:Math.ceil((js-109)/127);Ra+js+$o+127>>7>js;)$o=++js<=109?0:Math.ceil((js-109)/127);var Oa=[1,$o,js,Pa,Mn,Ke,qe,0];return at.FileIndex[0].size=qe<<6,Oa[7]=(at.FileIndex[0].start=Oa[0]+Oa[1]+Oa[2]+Oa[3]+Oa[4]+Oa[5])+(Oa[6]+7>>3),Oa}(oe),pe=Ne(de[7]<<9),ge=0,Ae=0;{for(ge=0;ge<8;++ge)pe.write_shift(1,A[ge]);for(ge=0;ge<8;++ge)pe.write_shift(2,0);for(pe.write_shift(2,62),pe.write_shift(2,3),pe.write_shift(2,65534),pe.write_shift(2,9),pe.write_shift(2,6),ge=0;ge<3;++ge)pe.write_shift(2,0);for(pe.write_shift(4,0),pe.write_shift(4,de[2]),pe.write_shift(4,de[0]+de[1]+de[2]+de[3]-1),pe.write_shift(4,0),pe.write_shift(4,4096),pe.write_shift(4,de[3]?de[0]+de[1]+de[2]-1:T),pe.write_shift(4,de[3]),pe.write_shift(-4,de[1]?de[0]-1:T),pe.write_shift(4,de[1]),ge=0;ge<109;++ge)pe.write_shift(-4,ge<de[2]?de[1]+ge:-1)}if(de[1])for(Ae=0;Ae<de[1];++Ae){for(;ge<236+Ae*127;++ge)pe.write_shift(-4,ge<de[2]?de[1]+ge:-1);pe.write_shift(-4,Ae===de[1]-1?T:Ae+1)}var De=function(at){for(Ae+=at;ge<Ae-1;++ge)pe.write_shift(-4,ge+1);at&&(++ge,pe.write_shift(-4,T))};for(Ae=ge=0,Ae+=de[1];ge<Ae;++ge)pe.write_shift(-4,P.DIFSECT);for(Ae+=de[2];ge<Ae;++ge)pe.write_shift(-4,P.FATSECT);De(de[3]),De(de[4]);for(var Ce=0,Ie=0,Pe=oe.FileIndex[0];Ce<oe.FileIndex.length;++Ce)Pe=oe.FileIndex[Ce],Pe.content&&(Ie=Pe.content.length,!(Ie<4096)&&(Pe.start=Ae,De(Ie+511>>9)));for(De(de[6]+7>>3);pe.l&511;)pe.write_shift(-4,P.ENDOFCHAIN);for(Ae=ge=0,Ce=0;Ce<oe.FileIndex.length;++Ce)Pe=oe.FileIndex[Ce],Pe.content&&(Ie=Pe.content.length,!(!Ie||Ie>=4096)&&(Pe.start=Ae,De(Ie+63>>6)));for(;pe.l&511;)pe.write_shift(-4,P.ENDOFCHAIN);for(ge=0;ge<de[4]<<2;++ge){var Ue=oe.FullPaths[ge];if(!Ue||Ue.length===0){for(Ce=0;Ce<17;++Ce)pe.write_shift(4,0);for(Ce=0;Ce<3;++Ce)pe.write_shift(4,-1);for(Ce=0;Ce<12;++Ce)pe.write_shift(4,0);continue}Pe=oe.FileIndex[ge],ge===0&&(Pe.start=Pe.size?Pe.start-1:T);var He=ge===0&&fe.root||Pe.name;if(He.length>32&&(console.error("Name "+He+" will be truncated to "+He.slice(0,32)),He=He.slice(0,32)),Ie=2*(He.length+1),pe.write_shift(64,He,"utf16le"),pe.write_shift(2,Ie),pe.write_shift(1,Pe.type),pe.write_shift(1,Pe.color),pe.write_shift(-4,Pe.L),pe.write_shift(-4,Pe.R),pe.write_shift(-4,Pe.C),Pe.clsid)pe.write_shift(16,Pe.clsid,"hex");else for(Ce=0;Ce<4;++Ce)pe.write_shift(4,0);pe.write_shift(4,Pe.state||0),pe.write_shift(4,0),pe.write_shift(4,0),pe.write_shift(4,0),pe.write_shift(4,0),pe.write_shift(4,Pe.start),pe.write_shift(4,Pe.size),pe.write_shift(4,0)}for(ge=1;ge<oe.FileIndex.length;++ge)if(Pe=oe.FileIndex[ge],Pe.size>=4096)if(pe.l=Pe.start+1<<9,mr&&Buffer.isBuffer(Pe.content))Pe.content.copy(pe,pe.l,0,Pe.size),pe.l+=Pe.size+511&-512;else{for(Ce=0;Ce<Pe.size;++Ce)pe.write_shift(1,Pe.content[Ce]);for(;Ce&511;++Ce)pe.write_shift(1,0)}for(ge=1;ge<oe.FileIndex.length;++ge)if(Pe=oe.FileIndex[ge],Pe.size>0&&Pe.size<4096)if(mr&&Buffer.isBuffer(Pe.content))Pe.content.copy(pe,pe.l,0,Pe.size),pe.l+=Pe.size+63&-64;else{for(Ce=0;Ce<Pe.size;++Ce)pe.write_shift(1,Pe.content[Ce]);for(;Ce&63;++Ce)pe.write_shift(1,0)}if(mr)pe.l=pe.length;else for(;pe.l<pe.length;)pe.write_shift(1,0);return pe}function U(oe,he){var fe=oe.FullPaths.map(function(Ce){return Ce.toUpperCase()}),de=fe.map(function(Ce){var Ie=Ce.split("/");return Ie[Ie.length-(Ce.slice(-1)=="/"?2:1)]}),pe=!1;he.charCodeAt(0)===47?(pe=!0,he=fe[0].slice(0,-1)+he):pe=he.indexOf("/")!==-1;var ge=he.toUpperCase(),Ae=pe===!0?fe.indexOf(ge):de.indexOf(ge);if(Ae!==-1)return oe.FileIndex[Ae];var De=!ge.match(dg);for(ge=ge.replace(ea,""),De&&(ge=ge.replace(dg,"!")),Ae=0;Ae<fe.length;++Ae)if((De?fe[Ae].replace(dg,"!"):fe[Ae]).replace(ea,"")==ge||(De?de[Ae].replace(dg,"!"):de[Ae]).replace(ea,"")==ge)return oe.FileIndex[Ae];return null}var S=64,T=-2,w="d0cf11e0a1b11ae1",A=[208,207,17,224,161,177,26,225],F="00000000000000000000000000000000",P={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:T,FREESECT:-1,HEADER_SIGNATURE:w,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:F,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function O(oe,he,fe){u();var de=z(oe,fe);c.writeFileSync(he,de)}function R(oe){for(var he=new Array(oe.length),fe=0;fe<oe.length;++fe)he[fe]=String.fromCharCode(oe[fe]);return he.join("")}function I(oe,he){var fe=z(oe,he);switch(he&&he.type||"buffer"){case"file":return u(),c.writeFileSync(he.filename,fe),fe;case"binary":return typeof fe=="string"?fe:R(fe);case"base64":return W4(typeof fe=="string"?fe:R(fe));case"buffer":if(mr)return Buffer.isBuffer(fe)?fe:Tl(fe);case"array":return typeof fe=="string"?Js(fe):fe}return fe}var C;function M(oe){try{var he=oe.InflateRaw,fe=new he;if(fe._processChunk(new Uint8Array([3,0]),fe._finishFlushFlag),fe.bytesRead)C=oe;else throw new Error("zlib does not expose bytesRead")}catch(de){console.error("cannot use native zlib: "+(de.message||de))}}function L(oe,he){if(!C)return Ye(oe,he);var fe=C.InflateRaw,de=new fe,pe=de._processChunk(oe.slice(oe.l),de._finishFlushFlag);return oe.l+=de.bytesRead,pe}function N(oe){return C?C.deflateRawSync(oe):ce(oe)}var H=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],W=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],q=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function G(oe){var he=(oe<<1|oe<<11)&139536|(oe<<5|oe<<15)&558144;return(he>>16|he>>8|he)&255}for(var Y=typeof Uint8Array<"u",te=Y?new Uint8Array(256):[],Q=0;Q<256;++Q)te[Q]=G(Q);function j(oe,he){var fe=te[oe&255];return he<=8?fe>>>8-he:(fe=fe<<8|te[oe>>8&255],he<=16?fe>>>16-he:(fe=fe<<8|te[oe>>16&255],fe>>>24-he))}function Z(oe,he){var fe=he&7,de=he>>>3;return(oe[de]|(fe<=6?0:oe[de+1]<<8))>>>fe&3}function V(oe,he){var fe=he&7,de=he>>>3;return(oe[de]|(fe<=5?0:oe[de+1]<<8))>>>fe&7}function ne(oe,he){var fe=he&7,de=he>>>3;return(oe[de]|(fe<=4?0:oe[de+1]<<8))>>>fe&15}function se(oe,he){var fe=he&7,de=he>>>3;return(oe[de]|(fe<=3?0:oe[de+1]<<8))>>>fe&31}function J(oe,he){var fe=he&7,de=he>>>3;return(oe[de]|(fe<=1?0:oe[de+1]<<8))>>>fe&127}function ee(oe,he,fe){var de=he&7,pe=he>>>3,ge=(1<<fe)-1,Ae=oe[pe]>>>de;return fe<8-de||(Ae|=oe[pe+1]<<8-de,fe<16-de)||(Ae|=oe[pe+2]<<16-de,fe<24-de)||(Ae|=oe[pe+3]<<24-de),Ae&ge}function ie(oe,he,fe){var de=he&7,pe=he>>>3;return de<=5?oe[pe]|=(fe&7)<<de:(oe[pe]|=fe<<de&255,oe[pe+1]=(fe&7)>>8-de),he+3}function le(oe,he,fe){var de=he&7,pe=he>>>3;return fe=(fe&1)<<de,oe[pe]|=fe,he+1}function ue(oe,he,fe){var de=he&7,pe=he>>>3;return fe<<=de,oe[pe]|=fe&255,fe>>>=8,oe[pe+1]=fe,he+8}function me(oe,he,fe){var de=he&7,pe=he>>>3;return fe<<=de,oe[pe]|=fe&255,fe>>>=8,oe[pe+1]=fe&255,oe[pe+2]=fe>>>8,he+16}function be(oe,he){var fe=oe.length,de=2*fe>he?2*fe:he+5,pe=0;if(fe>=he)return oe;if(mr){var ge=uH(de);if(oe.copy)oe.copy(ge);else for(;pe<oe.length;++pe)ge[pe]=oe[pe];return ge}else if(Y){var Ae=new Uint8Array(de);if(Ae.set)Ae.set(oe);else for(;pe<fe;++pe)Ae[pe]=oe[pe];return Ae}return oe.length=de,oe}function _e(oe){for(var he=new Array(oe),fe=0;fe<oe;++fe)he[fe]=0;return he}function xe(oe,he,fe){var de=1,pe=0,ge=0,Ae=0,De=0,Ce=oe.length,Ie=Y?new Uint16Array(32):_e(32);for(ge=0;ge<32;++ge)Ie[ge]=0;for(ge=Ce;ge<fe;++ge)oe[ge]=0;Ce=oe.length;var Pe=Y?new Uint16Array(Ce):_e(Ce);for(ge=0;ge<Ce;++ge)Ie[pe=oe[ge]]++,de<pe&&(de=pe),Pe[ge]=0;for(Ie[0]=0,ge=1;ge<=de;++ge)Ie[ge+16]=De=De+Ie[ge-1]<<1;for(ge=0;ge<Ce;++ge)De=oe[ge],De!=0&&(Pe[ge]=Ie[De+16]++);var Ue=0;for(ge=0;ge<Ce;++ge)if(Ue=oe[ge],Ue!=0)for(De=j(Pe[ge],de)>>de-Ue,Ae=(1<<de+4-Ue)-1;Ae>=0;--Ae)he[De|Ae<<Ue]=Ue&15|ge<<4;return de}var Be=Y?new Uint16Array(512):_e(512),re=Y?new Uint16Array(32):_e(32);if(!Y){for(var K=0;K<512;++K)Be[K]=0;for(K=0;K<32;++K)re[K]=0}(function(){for(var oe=[],he=0;he<32;he++)oe.push(5);xe(oe,re,32);var fe=[];for(he=0;he<=143;he++)fe.push(8);for(;he<=255;he++)fe.push(9);for(;he<=279;he++)fe.push(7);for(;he<=287;he++)fe.push(8);xe(fe,Be,288)})();var X=function(){for(var he=Y?new Uint8Array(32768):[],fe=0,de=0;fe<q.length-1;++fe)for(;de<q[fe+1];++de)he[de]=fe;for(;de<32768;++de)he[de]=29;var pe=Y?new Uint8Array(259):[];for(fe=0,de=0;fe<W.length-1;++fe)for(;de<W[fe+1];++de)pe[de]=fe;function ge(De,Ce){for(var Ie=0;Ie<De.length;){var Pe=Math.min(65535,De.length-Ie),Ue=Ie+Pe==De.length;for(Ce.write_shift(1,+Ue),Ce.write_shift(2,Pe),Ce.write_shift(2,~Pe&65535);Pe-- >0;)Ce[Ce.l++]=De[Ie++]}return Ce.l}function Ae(De,Ce){for(var Ie=0,Pe=0,Ue=Y?new Uint16Array(32768):[];Pe<De.length;){var He=Math.min(65535,De.length-Pe);if(He<10){for(Ie=ie(Ce,Ie,+(Pe+He==De.length)),Ie&7&&(Ie+=8-(Ie&7)),Ce.l=Ie/8|0,Ce.write_shift(2,He),Ce.write_shift(2,~He&65535);He-- >0;)Ce[Ce.l++]=De[Pe++];Ie=Ce.l*8;continue}Ie=ie(Ce,Ie,+(Pe+He==De.length)+2);for(var at=0;He-- >0;){var qe=De[Pe];at=(at<<5^qe)&32767;var Ke=-1,It=0;if((Ke=Ue[at])&&(Ke|=Pe&-32768,Ke>Pe&&(Ke-=32768),Ke<Pe))for(;De[Ke+It]==De[Pe+It]&&It<250;)++It;if(It>2){qe=pe[It],qe<=22?Ie=ue(Ce,Ie,te[qe+1]>>1)-1:(ue(Ce,Ie,3),Ie+=5,ue(Ce,Ie,te[qe-23]>>5),Ie+=3);var Dr=qe<8?0:qe-4>>2;Dr>0&&(me(Ce,Ie,It-W[qe]),Ie+=Dr),qe=he[Pe-Ke],Ie=ue(Ce,Ie,te[qe]>>3),Ie-=3;var qr=qe<4?0:qe-2>>1;qr>0&&(me(Ce,Ie,Pe-Ke-q[qe]),Ie+=qr);for(var Mn=0;Mn<It;++Mn)Ue[at]=Pe&32767,at=(at<<5^De[Pe])&32767,++Pe;He-=It-1}else qe<=143?qe=qe+48:Ie=le(Ce,Ie,1),Ie=ue(Ce,Ie,te[qe]),Ue[at]=Pe&32767,++Pe}Ie=ue(Ce,Ie,0)-1}return Ce.l=(Ie+7)/8|0,Ce.l}return function(Ce,Ie){return Ce.length<8?ge(Ce,Ie):Ae(Ce,Ie)}}();function ce(oe){var he=Ne(50+Math.floor(oe.length*1.1)),fe=X(oe,he);return he.slice(0,fe)}var ye=Y?new Uint16Array(32768):_e(32768),Ee=Y?new Uint16Array(32768):_e(32768),Se=Y?new Uint16Array(128):_e(128),rt=1,ct=1;function we(oe,he){var fe=se(oe,he)+257;he+=5;var de=se(oe,he)+1;he+=5;var pe=ne(oe,he)+4;he+=4;for(var ge=0,Ae=Y?new Uint8Array(19):_e(19),De=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],Ce=1,Ie=Y?new Uint8Array(8):_e(8),Pe=Y?new Uint8Array(8):_e(8),Ue=Ae.length,He=0;He<pe;++He)Ae[H[He]]=ge=V(oe,he),Ce<ge&&(Ce=ge),Ie[ge]++,he+=3;var at=0;for(Ie[0]=0,He=1;He<=Ce;++He)Pe[He]=at=at+Ie[He-1]<<1;for(He=0;He<Ue;++He)(at=Ae[He])!=0&&(De[He]=Pe[at]++);var qe=0;for(He=0;He<Ue;++He)if(qe=Ae[He],qe!=0){at=te[De[He]]>>8-qe;for(var Ke=(1<<7-qe)-1;Ke>=0;--Ke)Se[at|Ke<<qe]=qe&7|He<<3}var It=[];for(Ce=1;It.length<fe+de;)switch(at=Se[J(oe,he)],he+=at&7,at>>>=3){case 16:for(ge=3+Z(oe,he),he+=2,at=It[It.length-1];ge-- >0;)It.push(at);break;case 17:for(ge=3+V(oe,he),he+=3;ge-- >0;)It.push(0);break;case 18:for(ge=11+J(oe,he),he+=7;ge-- >0;)It.push(0);break;default:It.push(at),Ce<at&&(Ce=at);break}var Dr=It.slice(0,fe),qr=It.slice(fe);for(He=fe;He<286;++He)Dr[He]=0;for(He=de;He<30;++He)qr[He]=0;return rt=xe(Dr,ye,286),ct=xe(qr,Ee,30),he}function ke(oe,he){if(oe[0]==3&&!(oe[1]&3))return[Zf(he),2];for(var fe=0,de=0,pe=uH(he||1<<18),ge=0,Ae=pe.length>>>0,De=0,Ce=0;(de&1)==0;){if(de=V(oe,fe),fe+=3,de>>>1)de>>1==1?(De=9,Ce=5):(fe=we(oe,fe),De=rt,Ce=ct);else{fe&7&&(fe+=8-(fe&7));var Ie=oe[fe>>>3]|oe[(fe>>>3)+1]<<8;if(fe+=32,Ie>0)for(!he&&Ae<ge+Ie&&(pe=be(pe,ge+Ie),Ae=pe.length);Ie-- >0;)pe[ge++]=oe[fe>>>3],fe+=8;continue}for(;;){!he&&Ae<ge+32767&&(pe=be(pe,ge+32767),Ae=pe.length);var Pe=ee(oe,fe,De),Ue=de>>>1==1?Be[Pe]:ye[Pe];if(fe+=Ue&15,Ue>>>=4,(Ue>>>8&255)===0)pe[ge++]=Ue;else{if(Ue==256)break;Ue-=257;var He=Ue<8?0:Ue-4>>2;He>5&&(He=0);var at=ge+W[Ue];He>0&&(at+=ee(oe,fe,He),fe+=He),Pe=ee(oe,fe,Ce),Ue=de>>>1==1?re[Pe]:Ee[Pe],fe+=Ue&15,Ue>>>=4;var qe=Ue<4?0:Ue-2>>1,Ke=q[Ue];for(qe>0&&(Ke+=ee(oe,fe,qe),fe+=qe),!he&&Ae<at&&(pe=be(pe,at+100),Ae=pe.length);ge<at;)pe[ge]=pe[ge-Ke],++ge}}}return he?[pe,fe+7>>>3]:[pe.slice(0,ge),fe+7>>>3]}function Ye(oe,he){var fe=oe.slice(oe.l||0),de=ke(fe,he);return oe.l+=de[1],de[0]}function ot(oe,he){if(oe)typeof console<"u"&&console.error(he);else throw new Error(he)}function xt(oe,he){var fe=oe;Pi(fe,0);var de=[],pe=[],ge={FileIndex:de,FullPaths:pe};k(ge,{root:he.root});for(var Ae=fe.length-4;(fe[Ae]!=80||fe[Ae+1]!=75||fe[Ae+2]!=5||fe[Ae+3]!=6)&&Ae>=0;)--Ae;fe.l=Ae+4,fe.l+=4;var De=fe.read_shift(2);fe.l+=6;var Ce=fe.read_shift(4);for(fe.l=Ce,Ae=0;Ae<De;++Ae){fe.l+=20;var Ie=fe.read_shift(4),Pe=fe.read_shift(4),Ue=fe.read_shift(2),He=fe.read_shift(2),at=fe.read_shift(2);fe.l+=8;var qe=fe.read_shift(4),Ke=o(fe.slice(fe.l+Ue,fe.l+Ue+He));fe.l+=Ue+He+at;var It=fe.l;fe.l=qe+4,Ke&&Ke[1]&&((Ke[1]||{}).usz&&(Pe=Ke[1].usz),(Ke[1]||{}).csz&&(Ie=Ke[1].csz)),ut(fe,Ie,Pe,ge,Ke),fe.l=It}return ge}function ut(oe,he,fe,de,pe){oe.l+=2;var ge=oe.read_shift(2),Ae=oe.read_shift(2),De=a(oe);if(ge&8257)throw new Error("Unsupported ZIP encryption");for(var Ce=oe.read_shift(4),Ie=oe.read_shift(4),Pe=oe.read_shift(4),Ue=oe.read_shift(2),He=oe.read_shift(2),at="",qe=0;qe<Ue;++qe)at+=String.fromCharCode(oe[oe.l++]);if(He){var Ke=o(oe.slice(oe.l,oe.l+He));(Ke[21589]||{}).mt&&(De=Ke[21589].mt),(Ke[1]||{}).usz&&(Pe=Ke[1].usz),(Ke[1]||{}).csz&&(Ie=Ke[1].csz),pe&&((pe[21589]||{}).mt&&(De=pe[21589].mt),(pe[1]||{}).usz&&(Pe=Ke[1].usz),(pe[1]||{}).csz&&(Ie=Ke[1].csz))}oe.l+=He;var It=oe.slice(oe.l,oe.l+Ie);switch(Ae){case 8:It=L(oe,Pe);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+Ae)}var Dr=!1;ge&8&&(Ce=oe.read_shift(4),Ce==134695760&&(Ce=oe.read_shift(4),Dr=!0),Ie=oe.read_shift(4),Pe=oe.read_shift(4)),Ie!=he&&ot(Dr,"Bad compressed size: "+he+" != "+Ie),Pe!=fe&&ot(Dr,"Bad uncompressed size: "+fe+" != "+Pe),Cr(de,at,It,{unsafe:!0,mt:De})}function gt(oe,he){var fe=he||{},de=[],pe=[],ge=Ne(1),Ae=fe.compression?8:0,De=0,Ce=0,Ie=0,Pe=0,Ue=0,He=oe.FullPaths[0],at=He,qe=oe.FileIndex[0],Ke=[],It=0;for(Ce=1;Ce<oe.FullPaths.length;++Ce)if(at=oe.FullPaths[Ce].slice(He.length),qe=oe.FileIndex[Ce],!(!qe.size||!qe.content||at=="Sh33tJ5")){var Dr=Pe,qr=Ne(at.length);for(Ie=0;Ie<at.length;++Ie)qr.write_shift(1,at.charCodeAt(Ie)&127);qr=qr.slice(0,qr.l),Ke[Ue]=typeof qe.content=="string"?yH.bstr(qe.content,0):yH.buf(qe.content,0);var Mn=typeof qe.content=="string"?Js(qe.content):qe.content;Ae==8&&(Mn=N(Mn)),ge=Ne(30),ge.write_shift(4,67324752),ge.write_shift(2,20),ge.write_shift(2,De),ge.write_shift(2,Ae),qe.mt?s(ge,qe.mt):ge.write_shift(4,0),ge.write_shift(-4,Ke[Ue]),ge.write_shift(4,Mn.length),ge.write_shift(4,qe.content.length),ge.write_shift(2,qr.length),ge.write_shift(2,0),Pe+=ge.length,de.push(ge),Pe+=qr.length,de.push(qr),Pe+=Mn.length,de.push(Mn),ge=Ne(46),ge.write_shift(4,33639248),ge.write_shift(2,0),ge.write_shift(2,20),ge.write_shift(2,De),ge.write_shift(2,Ae),ge.write_shift(4,0),ge.write_shift(-4,Ke[Ue]),ge.write_shift(4,Mn.length),ge.write_shift(4,qe.content.length),ge.write_shift(2,qr.length),ge.write_shift(2,0),ge.write_shift(2,0),ge.write_shift(2,0),ge.write_shift(2,0),ge.write_shift(4,0),ge.write_shift(4,Dr),It+=ge.l,pe.push(ge),It+=qr.length,pe.push(qr),++Ue}return ge=Ne(22),ge.write_shift(4,101010256),ge.write_shift(2,0),ge.write_shift(2,0),ge.write_shift(2,Ue),ge.write_shift(2,Ue),ge.write_shift(4,It),ge.write_shift(4,Pe),ge.write_shift(2,0),wi([wi(de),wi(pe),ge])}var er={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function ur(oe,he){if(oe.ctype)return oe.ctype;var fe=oe.name||"",de=fe.match(/\.([^\.]+)$/);return de&&er[de[1]]||he&&(de=(fe=he).match(/[\.\\]([^\.\\])+$/),de&&er[de[1]])?er[de[1]]:"application/octet-stream"}function Tt(oe){for(var he=W4(oe),fe=[],de=0;de<he.length;de+=76)fe.push(he.slice(de,de+76));return fe.join(`\r
`)+`\r
`}function Zr(oe){var he=oe.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(Ie){var Pe=Ie.charCodeAt(0).toString(16).toUpperCase();return"="+(Pe.length==1?"0"+Pe:Pe)});he=he.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),he.charAt(0)==`
`&&(he="=0D"+he.slice(1)),he=he.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var fe=[],de=he.split(`\r
`),pe=0;pe<de.length;++pe){var ge=de[pe];if(ge.length==0){fe.push("");continue}for(var Ae=0;Ae<ge.length;){var De=76,Ce=ge.slice(Ae,Ae+De);Ce.charAt(De-1)=="="?De--:Ce.charAt(De-2)=="="?De-=2:Ce.charAt(De-3)=="="&&(De-=3),Ce=ge.slice(Ae,Ae+De),Ae+=De,Ae<ge.length&&(Ce+="="),fe.push(Ce)}}return fe.join(`\r
`)}function Br(oe){for(var he=[],fe=0;fe<oe.length;++fe){for(var de=oe[fe];fe<=oe.length&&de.charAt(de.length-1)=="=";)de=de.slice(0,de.length-1)+oe[++fe];he.push(de)}for(var pe=0;pe<he.length;++pe)he[pe]=he[pe].replace(/[=][0-9A-Fa-f]{2}/g,function(ge){return String.fromCharCode(parseInt(ge.slice(1),16))});return Js(he.join(`\r
`))}function bt(oe,he,fe){for(var de="",pe="",ge="",Ae,De=0;De<10;++De){var Ce=he[De];if(!Ce||Ce.match(/^\s*$/))break;var Ie=Ce.match(/^(.*?):\s*([^\s].*)$/);if(Ie)switch(Ie[1].toLowerCase()){case"content-location":de=Ie[2].trim();break;case"content-type":ge=Ie[2].trim();break;case"content-transfer-encoding":pe=Ie[2].trim();break}}switch(++De,pe.toLowerCase()){case"base64":Ae=Js(Qa(he.slice(De).join("")));break;case"quoted-printable":Ae=Br(he.slice(De));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+pe)}var Pe=Cr(oe,de.slice(fe.length),Ae,{unsafe:!0});ge&&(Pe.ctype=ge)}function cn(oe,he){if(R(oe.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var fe=he&&he.root||"",de=(mr&&Buffer.isBuffer(oe)?oe.toString("binary"):R(oe)).split(`\r
`),pe=0,ge="";for(pe=0;pe<de.length;++pe)if(ge=de[pe],!!/^Content-Location:/i.test(ge)&&(ge=ge.slice(ge.indexOf("file")),fe||(fe=ge.slice(0,ge.lastIndexOf("/")+1)),ge.slice(0,fe.length)!=fe))for(;fe.length>0&&(fe=fe.slice(0,fe.length-1),fe=fe.slice(0,fe.lastIndexOf("/")+1),ge.slice(0,fe.length)!=fe););var Ae=(de[1]||"").match(/boundary="(.*?)"/);if(!Ae)throw new Error("MAD cannot find boundary");var De="--"+(Ae[1]||""),Ce=[],Ie=[],Pe={FileIndex:Ce,FullPaths:Ie};k(Pe);var Ue,He=0;for(pe=0;pe<de.length;++pe){var at=de[pe];at!==De&&at!==De+"--"||(He++&&bt(Pe,de.slice(Ue,pe),fe),Ue=pe)}return Pe}function ln(oe,he){var fe=he||{},de=fe.boundary||"SheetJS";de="------="+de;for(var pe=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+de.slice(2)+'"',"","",""],ge=oe.FullPaths[0],Ae=ge,De=oe.FileIndex[0],Ce=1;Ce<oe.FullPaths.length;++Ce)if(Ae=oe.FullPaths[Ce].slice(ge.length),De=oe.FileIndex[Ce],!(!De.size||!De.content||Ae=="Sh33tJ5")){Ae=Ae.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(It){return"_x"+It.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(It){return"_u"+It.charCodeAt(0).toString(16)+"_"});for(var Ie=De.content,Pe=mr&&Buffer.isBuffer(Ie)?Ie.toString("binary"):R(Ie),Ue=0,He=Math.min(1024,Pe.length),at=0,qe=0;qe<=He;++qe)(at=Pe.charCodeAt(qe))>=32&&at<128&&++Ue;var Ke=Ue>=He*4/5;pe.push(de),pe.push("Content-Location: "+(fe.root||"file:///C:/SheetJS/")+Ae),pe.push("Content-Transfer-Encoding: "+(Ke?"quoted-printable":"base64")),pe.push("Content-Type: "+ur(De,Ae)),pe.push(""),pe.push(Ke?Zr(Pe):Tt(Pe))}return pe.push(de+`--\r
`),pe.join(`\r
`)}function jt(oe){var he={};return k(he,oe),he}function Cr(oe,he,fe,de){var pe=de&&de.unsafe;pe||k(oe);var ge=!pe&&St.find(oe,he);if(!ge){var Ae=oe.FullPaths[0];he.slice(0,Ae.length)==Ae?Ae=he:(Ae.slice(-1)!="/"&&(Ae+="/"),Ae=(Ae+he).replace("//","/")),ge={name:i(he),type:2},oe.FileIndex.push(ge),oe.FullPaths.push(Ae),pe||St.utils.cfb_gc(oe)}return ge.content=fe,ge.size=fe?fe.length:0,de&&(de.CLSID&&(ge.clsid=de.CLSID),de.mt&&(ge.mt=de.mt),de.ct&&(ge.ct=de.ct)),ge}function Jr(oe,he){k(oe);var fe=St.find(oe,he);if(fe){for(var de=0;de<oe.FileIndex.length;++de)if(oe.FileIndex[de]==fe)return oe.FileIndex.splice(de,1),oe.FullPaths.splice(de,1),!0}return!1}function Lt(oe,he,fe){k(oe);var de=St.find(oe,he);if(de){for(var pe=0;pe<oe.FileIndex.length;++pe)if(oe.FileIndex[pe]==de)return oe.FileIndex[pe].name=i(fe),oe.FullPaths[pe]=fe,!0}return!1}function Qr(oe){D(oe,!0)}return e.find=U,e.read=E,e.parse=l,e.write=I,e.writeFile=O,e.utils={cfb_new:jt,cfb_add:Cr,cfb_del:Jr,cfb_mov:Lt,cfb_gc:Qr,ReadShift:Pg,CheckField:Lce,prep_blob:Pi,bconcat:wi,use_zlib:M,_deflateRaw:ce,_inflateRaw:Ye,consts:P},e}(),Af;function Mqe(t){Af=t}function Nqe(t){return typeof t=="string"?A5(t):Array.isArray(t)?oqe(t):t}function Ky(t,e,r){if(typeof Af<"u"&&Af.writeFileSync)return r?Af.writeFileSync(t,e,r):Af.writeFileSync(t,e);if(typeof Deno<"u"){if(r&&typeof e=="string")switch(r){case"utf8":e=new TextEncoder(r).encode(e);break;case"binary":e=A5(e);break;default:throw new Error("Unsupported encoding "+r)}return Deno.writeFileSync(t,e)}var n=r=="utf8"?sl(e):e;if(typeof IE_SaveFile<"u")return IE_SaveFile(n,t);if(typeof Blob<"u"){var i=new Blob([Nqe(n)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(i,t);if(typeof saveAs<"u")return saveAs(i,t);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var s=URL.createObjectURL(i);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),chrome.downloads.download({url:s,filename:t,saveAs:!0});var a=document.createElement("a");if(a.download!=null)return a.download=t,a.href=s,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),s}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var o=File(t);return o.open("w"),o.encoding="binary",Array.isArray(e)&&(e=gl(e)),o.write(e),o.close(),e}catch(c){if(!c.message||!c.message.match(/onstruct/))throw c}throw new Error("cannot save file "+t)}function Fqe(t){if(typeof Af<"u")return Af.readFileSync(t);if(typeof Deno<"u")return Deno.readFileSync(t);if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var e=File(t);e.open("r"),e.encoding="binary";var r=e.read();return e.close(),r}catch(n){if(!n.message||!n.message.match(/onstruct/))throw n}throw new Error("Cannot access file "+t)}function jn(t){for(var e=Object.keys(t),r=[],n=0;n<e.length;++n)Object.prototype.hasOwnProperty.call(t,e[n])&&r.push(e[n]);return r}function bH(t,e){for(var r=[],n=jn(t),i=0;i!==n.length;++i)r[t[n[i]][e]]==null&&(r[t[n[i]][e]]=n[i]);return r}function I5(t){for(var e=[],r=jn(t),n=0;n!==r.length;++n)e[t[r[n]]]=r[n];return e}function P5(t){for(var e=[],r=jn(t),n=0;n!==r.length;++n)e[t[r[n]]]=parseInt(r[n],10);return e}function Lqe(t){for(var e=[],r=jn(t),n=0;n!==r.length;++n)e[t[r[n]]]==null&&(e[t[r[n]]]=[]),e[t[r[n]]].push(r[n]);return e}var Y4=new Date(1899,11,30,0,0,0);function xi(t,e){var r=t.getTime();e&&(r-=1462*24*60*60*1e3);var n=Y4.getTime()+(t.getTimezoneOffset()-Y4.getTimezoneOffset())*6e4;return(r-n)/(24*60*60*1e3)}var vce=new Date,$qe=Y4.getTime()+(vce.getTimezoneOffset()-Y4.getTimezoneOffset())*6e4,wH=vce.getTimezoneOffset();function R5(t){var e=new Date;return e.setTime(t*24*60*60*1e3+$qe),e.getTimezoneOffset()!==wH&&e.setTime(e.getTime()+(e.getTimezoneOffset()-wH)*6e4),e}function Uqe(t){var e=0,r=0,n=!1,i=t.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!i)throw new Error("|"+t+"| is not an ISO8601 Duration");for(var s=1;s!=i.length;++s)if(i[s]){switch(r=1,s>3&&(n=!0),i[s].slice(i[s].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+i[s].slice(i[s].length-1));case"D":r*=24;case"H":r*=60;case"M":if(n)r*=60;else throw new Error("Unsupported ISO Duration Field: M")}e+=r*parseInt(i[s],10)}return e}var _H=new Date("2017-02-19T19:06:09.000Z"),yce=isNaN(_H.getFullYear())?new Date("2/19/17"):_H,jqe=yce.getFullYear()==2017;function Hn(t,e){var r=new Date(t);if(jqe)return e>0?r.setTime(r.getTime()+r.getTimezoneOffset()*60*1e3):e<0&&r.setTime(r.getTime()-r.getTimezoneOffset()*60*1e3),r;if(t instanceof Date)return t;if(yce.getFullYear()==1917&&!isNaN(r.getFullYear())){var n=r.getFullYear();return t.indexOf(""+n)>-1||r.setFullYear(r.getFullYear()+100),r}var i=t.match(/\d+/g)||["2017","2","19","0","0","0"],s=new Date(+i[0],+i[1]-1,+i[2],+i[3]||0,+i[4]||0,+i[5]||0);return t.indexOf("Z")>-1&&(s=new Date(s.getTime()-s.getTimezoneOffset()*60*1e3)),s}function qh(t,e){if(mr&&Buffer.isBuffer(t)){if(e&&Tv){if(t[0]==255&&t[1]==254)return sl(t.slice(2).toString("utf16le"));if(t[1]==254&&t[2]==255)return sl(ice(t.slice(2).toString("binary")))}return t.toString("binary")}if(typeof TextDecoder<"u")try{if(e){if(t[0]==255&&t[1]==254)return sl(new TextDecoder("utf-16le").decode(t.slice(2)));if(t[0]==254&&t[1]==255)return sl(new TextDecoder("utf-16be").decode(t.slice(2)))}var r={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(t)&&(t=new Uint8Array(t)),new TextDecoder("latin1").decode(t).replace(/[]/g,function(s){return r[s]||s})}catch{}for(var n=[],i=0;i!=t.length;++i)n.push(String.fromCharCode(t[i]));return n.join("")}function wn(t){if(typeof JSON<"u"&&!Array.isArray(t))return JSON.parse(JSON.stringify(t));if(typeof t!="object"||t==null)return t;if(t instanceof Date)return new Date(t.getTime());var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=wn(t[r]));return e}function Ir(t,e){for(var r="";r.length<e;)r+=t;return r}function Za(t){var e=Number(t);if(!isNaN(e))return isFinite(e)?e:NaN;if(!/\d/.test(t))return e;var r=1,n=t.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return r*=100,""});return!isNaN(e=Number(n))||(n=n.replace(/[(](.*)[)]/,function(i,s){return r=-r,s}),!isNaN(e=Number(n)))?e/r:e}var Vqe=/^(0?\d|1[0-2])(?:|:([0-5]?\d)(?:|(\.\d+)(?:|:([0-5]?\d))|:([0-5]?\d)(|\.\d+)))\s+([ap])m?$/;function qqe(t){return t[2]?t[3]?t[4]?new Date(1899,11,30,+t[1]%12+(t[7]=="p"?12:0),+t[2],+t[4],parseFloat(t[3])*1e3):new Date(1899,11,30,t[7]=="p"?12:0,+t[1],+t[2],parseFloat(t[3])*1e3):t[5]?new Date(1899,11,30,+t[1]%12+(t[7]=="p"?12:0),+t[2],+t[5],t[6]?parseFloat(t[6])*1e3:0):new Date(1899,11,30,+t[1]%12+(t[7]=="p"?12:0),+t[2],0,0):new Date(1899,11,30,+t[1]%12+(t[7]=="p"?12:0),0,0,0)}var zqe=["january","february","march","april","may","june","july","august","september","october","november","december"];function lp(t){var e=t.toLowerCase(),r=e.replace(/\s+/g," ").trim(),n=r.match(Vqe);if(n)return qqe(n);var i=new Date(t),s=new Date(NaN),a=i.getYear();i.getMonth();var o=i.getDate();if(isNaN(o))return s;if(e.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(e=e.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),e.length>3&&zqe.indexOf(e)==-1)return s}else if(e.replace(/[ap]m?/,"").match(/[a-z]/))return s;return a<0||a>8099||t.match(/[^-0-9:,\/\\]/)?s:i}var Hqe=function(){var t="abacaba".split(/(:?b)/i).length==5;return function(r,n,i){if(t||typeof n=="string")return r.split(n);for(var s=r.split(n),a=[s[0]],o=1;o<s.length;++o)a.push(i),a.push(s[o]);return a}}();function bce(t){return t?t.content&&t.type?qh(t.content,!0):t.data?fg(t.data):t.asNodeBuffer&&mr?fg(t.asNodeBuffer().toString("binary")):t.asBinary?fg(t.asBinary()):t._data&&t._data.getContent?fg(qh(Array.prototype.slice.call(t._data.getContent(),0))):null:null}function wce(t){if(!t)return null;if(t.data)return cH(t.data);if(t.asNodeBuffer&&mr)return t.asNodeBuffer();if(t._data&&t._data.getContent){var e=t._data.getContent();return typeof e=="string"?cH(e):Array.prototype.slice.call(e)}return t.content&&t.type?t.content:null}function Wqe(t){return t&&t.name.slice(-4)===".bin"?wce(t):bce(t)}function mo(t,e){for(var r=t.FullPaths||jn(t.files),n=e.toLowerCase().replace(/[\/]/g,"\\"),i=n.replace(/\\/g,"/"),s=0;s<r.length;++s){var a=r[s].replace(/^Root Entry[\/]/,"").toLowerCase();if(n==a||i==a)return t.files?t.files[r[s]]:t.FileIndex[s]}return null}function ZB(t,e){var r=mo(t,e);if(r==null)throw new Error("Cannot find file "+e+" in zip");return r}function pi(t,e,r){if(!r)return Wqe(ZB(t,e));if(!e)return null;try{return pi(t,e)}catch{return null}}function va(t,e,r){if(!r)return bce(ZB(t,e));if(!e)return null;try{return va(t,e)}catch{return null}}function Gqe(t,e,r){return wce(ZB(t,e))}function xH(t){for(var e=t.FullPaths||jn(t.files),r=[],n=0;n<e.length;++n)e[n].slice(-1)!="/"&&r.push(e[n].replace(/^Root Entry[\/]/,""));return r.sort()}function rr(t,e,r){if(t.FullPaths){if(typeof r=="string"){var n;return mr?n=Tl(r):n=cqe(r),St.utils.cfb_add(t,e,n)}St.utils.cfb_add(t,e,r)}else t.file(e,r)}function JB(){return St.utils.cfb_new()}function _ce(t,e){switch(e.type){case"base64":return St.read(t,{type:"base64"});case"binary":return St.read(t,{type:"binary"});case"buffer":case"array":return St.read(t,{type:"buffer"})}throw new Error("Unrecognized type "+e.type)}function hg(t,e){if(t.charAt(0)=="/")return t.slice(1);var r=e.split("/");e.slice(-1)!="/"&&r.pop();for(var n=t.split("/");n.length!==0;){var i=n.shift();i===".."?r.pop():i!=="."&&r.push(i)}return r.join("/")}var ui=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,Kqe=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,SH=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/mg,Xqe=/<[^>]*>/g,Ls=ui.match(SH)?SH:Xqe,Yqe=/<\w*:/,Zqe=/<(\/?)\w+:/;function ht(t,e,r){for(var n={},i=0,s=0;i!==t.length&&!((s=t.charCodeAt(i))===32||s===10||s===13);++i);if(e||(n[0]=t.slice(0,i)),i===t.length)return n;var a=t.match(Kqe),o=0,c="",u=0,l="",f="",d=1;if(a)for(u=0;u!=a.length;++u){for(f=a[u],s=0;s!=f.length&&f.charCodeAt(s)!==61;++s);for(l=f.slice(0,s).trim();f.charCodeAt(s+1)==32;)++s;for(d=(i=f.charCodeAt(s+1))==34||i==39?1:0,c=f.slice(s+1+d,f.length-d),o=0;o!=l.length&&l.charCodeAt(o)!==58;++o);if(o===l.length)l.indexOf("_")>0&&(l=l.slice(0,l.indexOf("_"))),n[l]=c,n[l.toLowerCase()]=c;else{var h=(o===5&&l.slice(0,5)==="xmlns"?"xmlns":"")+l.slice(o+1);if(n[h]&&l.slice(o-3,o)=="ext")continue;n[h]=c,n[h.toLowerCase()]=c}}return n}function Pc(t){return t.replace(Zqe,"<$1")}var xce={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},QB=I5(xce),kr=function(){var t=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/ig,e=/_x([\da-fA-F]{4})_/ig;function r(n){var i=n+"",s=i.indexOf("<![CDATA[");if(s==-1)return i.replace(t,function(o,c){return xce[o]||String.fromCharCode(parseInt(c,o.indexOf("x")>-1?16:10))||o}).replace(e,function(o,c){return String.fromCharCode(parseInt(c,16))});var a=i.indexOf("]]>");return r(i.slice(0,s))+i.slice(s+9,a)+r(i.slice(a+3))}return function(i,s){var a=r(i);return s?a.replace(/\r\n/g,`
`):a}}(),eD=/[&<>'"]/g,Jqe=/[\u0000-\u0008\u000b-\u001f\uFFFE-\uFFFF]/g;function nr(t){var e=t+"";return e.replace(eD,function(r){return QB[r]}).replace(Jqe,function(r){return"_x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+"_"})}function EH(t){return nr(t).replace(/ /g,"_x0020_")}var Sce=/[\u0000-\u001f]/g;function tD(t){var e=t+"";return e.replace(eD,function(r){return QB[r]}).replace(/\n/g,"<br/>").replace(Sce,function(r){return"&#x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+";"})}function Qqe(t){var e=t+"";return e.replace(eD,function(r){return QB[r]}).replace(Sce,function(r){return"&#x"+r.charCodeAt(0).toString(16).toUpperCase()+";"})}var kH=function(){var t=/&#(\d+);/g;function e(r,n){return String.fromCharCode(parseInt(n,10))}return function(n){return n.replace(t,e)}}();function eze(t){return t.replace(/(\r\n|[\r\n])/g,"&#10;")}function an(t){switch(t){case 1:case!0:case"1":case"true":return!0;case 0:case!1:case"0":case"false":return!1}return!1}function eE(t){for(var e="",r=0,n=0,i=0,s=0,a=0,o=0;r<t.length;){if(n=t.charCodeAt(r++),n<128){e+=String.fromCharCode(n);continue}if(i=t.charCodeAt(r++),n>191&&n<224){a=(n&31)<<6,a|=i&63,e+=String.fromCharCode(a);continue}if(s=t.charCodeAt(r++),n<240){e+=String.fromCharCode((n&15)<<12|(i&63)<<6|s&63);continue}a=t.charCodeAt(r++),o=((n&7)<<18|(i&63)<<12|(s&63)<<6|a&63)-65536,e+=String.fromCharCode(55296+(o>>>10&1023)),e+=String.fromCharCode(56320+(o&1023))}return e}function TH(t){var e=Zf(2*t.length),r,n,i=1,s=0,a=0,o;for(n=0;n<t.length;n+=i)i=1,(o=t.charCodeAt(n))<128?r=o:o<224?(r=(o&31)*64+(t.charCodeAt(n+1)&63),i=2):o<240?(r=(o&15)*4096+(t.charCodeAt(n+1)&63)*64+(t.charCodeAt(n+2)&63),i=3):(i=4,r=(o&7)*262144+(t.charCodeAt(n+1)&63)*4096+(t.charCodeAt(n+2)&63)*64+(t.charCodeAt(n+3)&63),r-=65536,a=55296+(r>>>10&1023),r=56320+(r&1023)),a!==0&&(e[s++]=a&255,e[s++]=a>>>8,a=0),e[s++]=r%256,e[s++]=r>>>8;return e.slice(0,s).toString("ucs2")}function AH(t){return Tl(t,"binary").toString("utf8")}var Jb="foo bar baz",on=mr&&(AH(Jb)==eE(Jb)&&AH||TH(Jb)==eE(Jb)&&TH)||eE,sl=mr?function(t){return Tl(t,"utf8").toString("binary")}:function(t){for(var e=[],r=0,n=0,i=0;r<t.length;)switch(n=t.charCodeAt(r++),!0){case n<128:e.push(String.fromCharCode(n));break;case n<2048:e.push(String.fromCharCode(192+(n>>6))),e.push(String.fromCharCode(128+(n&63)));break;case(n>=55296&&n<57344):n-=55296,i=t.charCodeAt(r++)-56320+(n<<10),e.push(String.fromCharCode(240+(i>>18&7))),e.push(String.fromCharCode(144+(i>>12&63))),e.push(String.fromCharCode(128+(i>>6&63))),e.push(String.fromCharCode(128+(i&63)));break;default:e.push(String.fromCharCode(224+(n>>12))),e.push(String.fromCharCode(128+(n>>6&63))),e.push(String.fromCharCode(128+(n&63)))}return e.join("")},Cv=function(){var t={};return function(r,n){var i=r+"|"+(n||"");return t[i]?t[i]:t[i]=new RegExp("<(?:\\w+:)?"+r+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+r+">",n||"")}}(),Ece=function(){var t=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(e){return[new RegExp("&"+e[0]+";","ig"),e[1]]});return function(r){for(var n=r.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),i=0;i<t.length;++i)n=n.replace(t[i][0],t[i][1]);return n}}(),tze=function(){var t={};return function(r){return t[r]!==void 0?t[r]:t[r]=new RegExp("<(?:vt:)?"+r+">([\\s\\S]*?)</(?:vt:)?"+r+">","g")}}(),rze=/<\/?(?:vt:)?variant>/g,nze=/<(?:vt:)([^>]*)>([\s\S]*)</;function CH(t,e){var r=ht(t),n=t.match(tze(r.baseType))||[],i=[];if(n.length!=r.size){if(e.WTF)throw new Error("unexpected vector length "+n.length+" != "+r.size);return i}return n.forEach(function(s){var a=s.replace(rze,"").match(nze);a&&i.push({v:on(a[2]),t:a[1]})}),i}var kce=/(^\s|\s$|\n)/;function ls(t,e){return"<"+t+(e.match(kce)?' xml:space="preserve"':"")+">"+e+"</"+t+">"}function Iv(t){return jn(t).map(function(e){return" "+e+'="'+t[e]+'"'}).join("")}function Xe(t,e,r){return"<"+t+(r!=null?Iv(r):"")+(e!=null?(e.match(kce)?' xml:space="preserve"':"")+">"+e+"</"+t:"/")+">"}function OI(t,e){try{return t.toISOString().replace(/\.\d*/,"")}catch(r){if(e)throw r}return""}function ize(t,e){switch(typeof t){case"string":var r=Xe("vt:lpwstr",nr(t));return r=r.replace(/&quot;/g,"_x0022_"),r;case"number":return Xe((t|0)==t?"vt:i4":"vt:r8",nr(String(t)));case"boolean":return Xe("vt:bool",t?"true":"false")}if(t instanceof Date)return Xe("vt:filetime",OI(t));throw new Error("Unable to serialize "+t)}function O5(t){if(mr&&Buffer.isBuffer(t))return t.toString("utf8");if(typeof t=="string")return t;if(typeof Uint8Array<"u"&&t instanceof Uint8Array)return on(gl(KB(t)));throw new Error("Bad input format: expected Buffer or string")}var mi=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/](?:[^>=]|="[^"]*?")*)?>/mg,Oi={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},I0=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],ja={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function sze(t,e){for(var r=1-2*(t[e+7]>>>7),n=((t[e+7]&127)<<4)+(t[e+6]>>>4&15),i=t[e+6]&15,s=5;s>=0;--s)i=i*256+t[e+s];return n==2047?i==0?r*(1/0):NaN:(n==0?n=-1022:(n-=1023,i+=Math.pow(2,52)),r*Math.pow(2,n-52)*i)}function aze(t,e,r){var n=(e<0||1/e==-1/0?1:0)<<7,i=0,s=0,a=n?-e:e;isFinite(a)?a==0?i=s=0:(i=Math.floor(Math.log(a)/Math.LN2),s=a*Math.pow(2,52-i),i<=-1023&&(!isFinite(s)||s<Math.pow(2,52))?i=-1022:(s-=Math.pow(2,52),i+=1023)):(i=2047,s=isNaN(e)?26985:0);for(var o=0;o<=5;++o,s/=256)t[r+o]=s&255;t[r+6]=(i&15)<<4|s&15,t[r+7]=i>>4|n}var IH=function(t){for(var e=[],r=10240,n=0;n<t[0].length;++n)if(t[0][n])for(var i=0,s=t[0][n].length;i<s;i+=r)e.push.apply(e,t[0][n].slice(i,i+r));return e},PH=mr?function(t){return t[0].length>0&&Buffer.isBuffer(t[0][0])?Buffer.concat(t[0].map(function(e){return Buffer.isBuffer(e)?e:Tl(e)})):IH(t)}:IH,RH=function(t,e,r){for(var n=[],i=e;i<r;i+=2)n.push(String.fromCharCode(ou(t,i)));return n.join("").replace(ea,"")},rD=mr?function(t,e,r){return!Buffer.isBuffer(t)||!Tv?RH(t,e,r):t.toString("utf16le",e,r).replace(ea,"")}:RH,OH=function(t,e,r){for(var n=[],i=e;i<e+r;++i)n.push(("0"+t[i].toString(16)).slice(-2));return n.join("")},Tce=mr?function(t,e,r){return Buffer.isBuffer(t)?t.toString("hex",e,e+r):OH(t,e,r)}:OH,BH=function(t,e,r){for(var n=[],i=e;i<r;i++)n.push(String.fromCharCode(p1(t,i)));return n.join("")},Xy=mr?function(e,r,n){return Buffer.isBuffer(e)?e.toString("utf8",r,n):BH(e,r,n)}:BH,Ace=function(t,e){var r=Va(t,e);return r>0?Xy(t,e+4,e+4+r-1):""},Cce=Ace,Ice=function(t,e){var r=Va(t,e);return r>0?Xy(t,e+4,e+4+r-1):""},Pce=Ice,Rce=function(t,e){var r=2*Va(t,e);return r>0?Xy(t,e+4,e+4+r-1):""},Oce=Rce,Bce=function(e,r){var n=Va(e,r);return n>0?rD(e,r+4,r+4+n):""},Dce=Bce,Mce=function(t,e){var r=Va(t,e);return r>0?Xy(t,e+4,e+4+r):""},Nce=Mce,Fce=function(t,e){return sze(t,e)},Z4=Fce,nD=function(e){return Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array};mr&&(Cce=function(e,r){if(!Buffer.isBuffer(e))return Ace(e,r);var n=e.readUInt32LE(r);return n>0?e.toString("utf8",r+4,r+4+n-1):""},Pce=function(e,r){if(!Buffer.isBuffer(e))return Ice(e,r);var n=e.readUInt32LE(r);return n>0?e.toString("utf8",r+4,r+4+n-1):""},Oce=function(e,r){if(!Buffer.isBuffer(e)||!Tv)return Rce(e,r);var n=2*e.readUInt32LE(r);return e.toString("utf16le",r+4,r+4+n-1)},Dce=function(e,r){if(!Buffer.isBuffer(e)||!Tv)return Bce(e,r);var n=e.readUInt32LE(r);return e.toString("utf16le",r+4,r+4+n)},Nce=function(e,r){if(!Buffer.isBuffer(e))return Mce(e,r);var n=e.readUInt32LE(r);return e.toString("utf8",r+4,r+4+n)},Z4=function(e,r){return Buffer.isBuffer(e)?e.readDoubleLE(r):Fce(e,r)},nD=function(e){return Buffer.isBuffer(e)||Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array});var p1=function(t,e){return t[e]},ou=function(t,e){return t[e+1]*256+t[e]},oze=function(t,e){var r=t[e+1]*256+t[e];return r<32768?r:(65535-r+1)*-1},Va=function(t,e){return t[e+3]*(1<<24)+(t[e+2]<<16)+(t[e+1]<<8)+t[e]},zd=function(t,e){return t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e]},cze=function(t,e){return t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]};function Pg(t,e){var r="",n,i,s=[],a,o,c,u;switch(e){case"dbcs":if(u=this.l,mr&&Buffer.isBuffer(this)&&Tv)r=this.slice(this.l,this.l+2*t).toString("utf16le");else for(c=0;c<t;++c)r+=String.fromCharCode(ou(this,u)),u+=2;t*=2;break;case"utf8":r=Xy(this,this.l,this.l+t);break;case"utf16le":t*=2,r=rD(this,this.l,this.l+t);break;case"wstr":return Pg.call(this,t,"dbcs");case"lpstr-ansi":r=Cce(this,this.l),t=4+Va(this,this.l);break;case"lpstr-cp":r=Pce(this,this.l),t=4+Va(this,this.l);break;case"lpwstr":r=Oce(this,this.l),t=4+2*Va(this,this.l);break;case"lpp4":t=4+Va(this,this.l),r=Dce(this,this.l),t&2&&(t+=2);break;case"8lpp4":t=4+Va(this,this.l),r=Nce(this,this.l),t&3&&(t+=4-(t&3));break;case"cstr":for(t=0,r="";(a=p1(this,this.l+t++))!==0;)s.push(Zb(a));r=s.join("");break;case"_wstr":for(t=0,r="";(a=ou(this,this.l+t))!==0;)s.push(Zb(a)),t+=2;t+=2,r=s.join("");break;case"dbcs-cont":for(r="",u=this.l,c=0;c<t;++c){if(this.lens&&this.lens.indexOf(u)!==-1)return a=p1(this,u),this.l=u+1,o=Pg.call(this,t-c,a?"dbcs-cont":"sbcs-cont"),s.join("")+o;s.push(Zb(ou(this,u))),u+=2}r=s.join(""),t*=2;break;case"cpstr":case"sbcs-cont":for(r="",u=this.l,c=0;c!=t;++c){if(this.lens&&this.lens.indexOf(u)!==-1)return a=p1(this,u),this.l=u+1,o=Pg.call(this,t-c,a?"dbcs-cont":"sbcs-cont"),s.join("")+o;s.push(Zb(p1(this,u))),u+=1}r=s.join("");break;default:switch(t){case 1:return n=p1(this,this.l),this.l++,n;case 2:return n=(e==="i"?oze:ou)(this,this.l),this.l+=2,n;case 4:case-4:return e==="i"||(this[this.l+3]&128)===0?(n=(t>0?zd:cze)(this,this.l),this.l+=4,n):(i=Va(this,this.l),this.l+=4,i);case 8:case-8:if(e==="f")return t==8?i=Z4(this,this.l):i=Z4([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,i;t=8;case 16:r=Tce(this,this.l,t);break}}return this.l+=t,r}var lze=function(t,e,r){t[r]=e&255,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24&255},uze=function(t,e,r){t[r]=e&255,t[r+1]=e>>8&255,t[r+2]=e>>16&255,t[r+3]=e>>24&255},fze=function(t,e,r){t[r]=e&255,t[r+1]=e>>>8&255};function dze(t,e,r){var n=0,i=0;if(r==="dbcs"){for(i=0;i!=e.length;++i)fze(this,e.charCodeAt(i),this.l+2*i);n=2*e.length}else if(r==="sbcs"||r=="cpstr"){for(e=e.replace(/[^\x00-\x7F]/g,"_"),i=0;i!=e.length;++i)this[this.l+i]=e.charCodeAt(i)&255;n=e.length}else if(r==="hex"){for(;i<t;++i)this[this.l++]=parseInt(e.slice(2*i,2*i+2),16)||0;return this}else if(r==="utf16le"){var s=Math.min(this.l+t,this.length);for(i=0;i<Math.min(e.length,t);++i){var a=e.charCodeAt(i);this[this.l++]=a&255,this[this.l++]=a>>8}for(;this.l<s;)this[this.l++]=0;return this}else switch(t){case 1:n=1,this[this.l]=e&255;break;case 2:n=2,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255;break;case 3:n=3,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255,e>>>=8,this[this.l+2]=e&255;break;case 4:n=4,lze(this,e,this.l);break;case 8:if(n=8,r==="f"){aze(this,e,this.l);break}case 16:break;case-4:n=4,uze(this,e,this.l);break}return this.l+=n,this}function Lce(t,e){var r=Tce(this,this.l,t.length>>1);if(r!==t)throw new Error(e+"Expected "+t+" saw "+r);this.l+=t.length>>1}function Pi(t,e){t.l=e,t.read_shift=Pg,t.chk=Lce,t.write_shift=dze}function Fs(t,e){t.l+=e}function Ne(t){var e=Zf(t);return Pi(e,0),e}function Uu(t,e,r){if(t){var n,i,s;Pi(t,t.l||0);for(var a=t.length,o=0,c=0;t.l<a;){o=t.read_shift(1),o&128&&(o=(o&127)+((t.read_shift(1)&127)<<7));var u=Lv[o]||Lv[65535];for(n=t.read_shift(1),s=n&127,i=1;i<4&&n&128;++i)s+=((n=t.read_shift(1))&127)<<7*i;c=t.l+s;var l=u.f&&u.f(t,s,r);if(t.l=c,e(l,u,o))return}}}function _a(){var t=[],e=mr?256:2048,r=function(u){var l=Ne(u);return Pi(l,0),l},n=r(e),i=function(){n&&(n.l&&(n.length>n.l&&(n=n.slice(0,n.l),n.l=n.length),n.length>0&&t.push(n)),n=null)},s=function(u){return n&&u<n.length-n.l?n:(i(),n=r(Math.max(u+1,e)))},a=function(){return i(),wi(t)},o=function(u){i(),n=u,n.l==null&&(n.l=n.length),s(e)};return{next:s,push:o,end:a,_bufs:t}}function Le(t,e,r,n){var i=+e,s;if(!isNaN(i)){n||(n=Lv[i].p||(r||[]).length||0),s=1+(i>=128?1:0)+1,n>=128&&++s,n>=16384&&++s,n>=2097152&&++s;var a=t.next(s);i<=127?a.write_shift(1,i):(a.write_shift(1,(i&127)+128),a.write_shift(1,i>>7));for(var o=0;o!=4;++o)if(n>=128)a.write_shift(1,(n&127)+128),n>>=7;else{a.write_shift(1,n);break}n>0&&nD(r)&&t.push(r)}}function Rg(t,e,r){var n=wn(t);if(e.s?(n.cRel&&(n.c+=e.s.c),n.rRel&&(n.r+=e.s.r)):(n.cRel&&(n.c+=e.c),n.rRel&&(n.r+=e.r)),!r||r.biff<12){for(;n.c>=256;)n.c-=256;for(;n.r>=65536;)n.r-=65536}return n}function DH(t,e,r){var n=wn(t);return n.s=Rg(n.s,e.s,r),n.e=Rg(n.e,e.s,r),n}function Og(t,e){if(t.cRel&&t.c<0)for(t=wn(t);t.c<0;)t.c+=e>8?16384:256;if(t.rRel&&t.r<0)for(t=wn(t);t.r<0;)t.r+=e>8?1048576:e>5?65536:16384;var r=pr(t);return!t.cRel&&t.cRel!=null&&(r=mze(r)),!t.rRel&&t.rRel!=null&&(r=hze(r)),r}function tE(t,e){return t.s.r==0&&!t.s.rRel&&t.e.r==(e.biff>=12?1048575:e.biff>=8?65536:16384)&&!t.e.rRel?(t.s.cRel?"":"$")+or(t.s.c)+":"+(t.e.cRel?"":"$")+or(t.e.c):t.s.c==0&&!t.s.cRel&&t.e.c==(e.biff>=12?16383:255)&&!t.e.cRel?(t.s.rRel?"":"$")+xr(t.s.r)+":"+(t.e.rRel?"":"$")+xr(t.e.r):Og(t.s,e.biff)+":"+Og(t.e,e.biff)}function iD(t){return parseInt(pze(t),10)-1}function xr(t){return""+(t+1)}function hze(t){return t.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function pze(t){return t.replace(/\$(\d+)$/,"$1")}function sD(t){for(var e=gze(t),r=0,n=0;n!==e.length;++n)r=26*r+e.charCodeAt(n)-64;return r-1}function or(t){if(t<0)throw new Error("invalid column "+t);var e="";for(++t;t;t=Math.floor((t-1)/26))e=String.fromCharCode((t-1)%26+65)+e;return e}function mze(t){return t.replace(/^([A-Z])/,"$$$1")}function gze(t){return t.replace(/^\$([A-Z])/,"$1")}function vze(t){return t.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function Xr(t){for(var e=0,r=0,n=0;n<t.length;++n){var i=t.charCodeAt(n);i>=48&&i<=57?e=10*e+(i-48):i>=65&&i<=90&&(r=26*r+(i-64))}return{c:r-1,r:e-1}}function pr(t){for(var e=t.c+1,r="";e;e=(e-1)/26|0)r=String.fromCharCode((e-1)%26+65)+r;return r+(t.r+1)}function Fi(t){var e=t.indexOf(":");return e==-1?{s:Xr(t),e:Xr(t)}:{s:Xr(t.slice(0,e)),e:Xr(t.slice(e+1))}}function Yt(t,e){return typeof e>"u"||typeof e=="number"?Yt(t.s,t.e):(typeof t!="string"&&(t=pr(t)),typeof e!="string"&&(e=pr(e)),t==e?t:t+":"+e)}function Pv(t){var e=Fi(t);return"$"+or(e.s.c)+"$"+xr(e.s.r)+":$"+or(e.e.c)+"$"+xr(e.e.r)}function Rv(t,e){if(!t&&!(e&&e.biff<=5&&e.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(t)?"'"+t.replace(/'/g,"''")+"'":t}function Er(t){var e={s:{c:0,r:0},e:{c:0,r:0}},r=0,n=0,i=0,s=t.length;for(r=0;n<s&&!((i=t.charCodeAt(n)-64)<1||i>26);++n)r=26*r+i;for(e.s.c=--r,r=0;n<s&&!((i=t.charCodeAt(n)-48)<0||i>9);++n)r=10*r+i;if(e.s.r=--r,n===s||i!=10)return e.e.c=e.s.c,e.e.r=e.s.r,e;for(++n,r=0;n!=s&&!((i=t.charCodeAt(n)-64)<1||i>26);++n)r=26*r+i;for(e.e.c=--r,r=0;n!=s&&!((i=t.charCodeAt(n)-48)<0||i>9);++n)r=10*r+i;return e.e.r=--r,e}function MH(t,e){var r=t.t=="d"&&e instanceof Date;if(t.z!=null)try{return t.w=eo(t.z,r?xi(e):e)}catch{}try{return t.w=eo((t.XF||{}).numFmtId||(r?14:0),r?xi(e):e)}catch{return""+e}}function vl(t,e,r){return t==null||t.t==null||t.t=="z"?"":t.w!==void 0?t.w:(t.t=="d"&&!t.z&&r&&r.dateNF&&(t.z=r.dateNF),t.t=="e"?ju[t.v]||t.v:e==null?MH(t,t.v):MH(t,e))}function vd(t,e){var r=e&&e.sheet?e.sheet:"Sheet1",n={};return n[r]=t,{SheetNames:[r],Sheets:n}}function $ce(t,e,r){var n=r||{},i=t?t["!data"]!=null:n.dense,s=t||{};i&&!s["!data"]&&(s["!data"]=[]);var a=0,o=0;if(s&&n.origin!=null){if(typeof n.origin=="number")a=n.origin;else{var c=typeof n.origin=="string"?Xr(n.origin):n.origin;a=c.r,o=c.c}s["!ref"]||(s["!ref"]="A1:A1")}var u={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(s["!ref"]){var l=Er(s["!ref"]);u.s.c=l.s.c,u.s.r=l.s.r,u.e.c=Math.max(u.e.c,l.e.c),u.e.r=Math.max(u.e.r,l.e.r),a==-1&&(u.e.r=a=l.e.r+1)}for(var f=[],d=0;d!=e.length;++d)if(e[d]){if(!Array.isArray(e[d]))throw new Error("aoa_to_sheet expects an array of arrays");var h=a+d,m=""+(h+1);i&&(s["!data"][h]||(s["!data"][h]=[]),f=s["!data"][h]);for(var p=0;p!=e[d].length;++p)if(!(typeof e[d][p]>"u")){var g={v:e[d][p]},v=o+p;if(u.s.r>h&&(u.s.r=h),u.s.c>v&&(u.s.c=v),u.e.r<h&&(u.e.r=h),u.e.c<v&&(u.e.c=v),e[d][p]&&typeof e[d][p]=="object"&&!Array.isArray(e[d][p])&&!(e[d][p]instanceof Date))g=e[d][p];else if(Array.isArray(g.v)&&(g.f=e[d][p][1],g.v=g.v[0]),g.v===null)if(g.f)g.t="n";else if(n.nullError)g.t="e",g.v=0;else if(n.sheetStubs)g.t="z";else continue;else typeof g.v=="number"?g.t="n":typeof g.v=="boolean"?g.t="b":g.v instanceof Date?(g.z=n.dateNF||Bt[14],n.cellDates?(g.t="d",g.w=eo(g.z,xi(g.v,n.date1904))):(g.t="n",g.v=xi(g.v,n.date1904),g.w=eo(g.z,g.v))):g.t="s";if(i)f[v]&&f[v].z&&(g.z=f[v].z),f[v]=g;else{var y=or(v)+m;s[y]&&s[y].z&&(g.z=s[y].z),s[y]=g}}}return u.s.c<1e7&&(s["!ref"]=Yt(u)),s}function lm(t,e){return $ce(null,t,e)}function yze(t){return t.read_shift(4,"i")}function lc(t,e){return e||(e=Ne(4)),e.write_shift(4,t),e}function Ms(t){var e=t.read_shift(4);return e===0?"":t.read_shift(e,"dbcs")}function Ni(t,e){var r=!1;return e==null&&(r=!0,e=Ne(4+2*t.length)),e.write_shift(4,t.length),t.length>0&&e.write_shift(0,t,"dbcs"),r?e.slice(0,e.l):e}function bze(t){return{ich:t.read_shift(2),ifnt:t.read_shift(2)}}function wze(t,e){return e||(e=Ne(4)),e.write_shift(2,0),e.write_shift(2,0),e}function aD(t,e){var r=t.l,n=t.read_shift(1),i=Ms(t),s=[],a={t:i,h:i};if((n&1)!==0){for(var o=t.read_shift(4),c=0;c!=o;++c)s.push(bze(t));a.r=s}else a.r=[{ich:0,ifnt:0}];return t.l=r+e,a}function _ze(t,e){var r=!1;return e==null&&(r=!0,e=Ne(15+4*t.t.length)),e.write_shift(1,0),Ni(t.t,e),r?e.slice(0,e.l):e}var xze=aD;function Sze(t,e){var r=!1;return e==null&&(r=!0,e=Ne(23+4*t.t.length)),e.write_shift(1,1),Ni(t.t,e),e.write_shift(4,1),wze({},e),r?e.slice(0,e.l):e}function Mo(t){var e=t.read_shift(4),r=t.read_shift(2);return r+=t.read_shift(1)<<16,t.l++,{c:e,iStyleRef:r}}function P0(t,e){return e==null&&(e=Ne(8)),e.write_shift(-4,t.c),e.write_shift(3,t.iStyleRef||t.s),e.write_shift(1,0),e}function R0(t){var e=t.read_shift(2);return e+=t.read_shift(1)<<16,t.l++,{c:-1,iStyleRef:e}}function O0(t,e){return e==null&&(e=Ne(4)),e.write_shift(3,t.iStyleRef||t.s),e.write_shift(1,0),e}var Eze=Ms,Uce=Ni;function oD(t){var e=t.read_shift(4);return e===0||e===4294967295?"":t.read_shift(e,"dbcs")}function Ov(t,e){var r=!1;return e==null&&(r=!0,e=Ne(127)),e.write_shift(4,t.length>0?t.length:4294967295),t.length>0&&e.write_shift(0,t,"dbcs"),r?e.slice(0,e.l):e}var kze=Ms,BI=oD,cD=Ov;function lD(t){var e=t.slice(t.l,t.l+4),r=e[0]&1,n=e[0]&2;t.l+=4;var i=n===0?Z4([0,0,0,0,e[0]&252,e[1],e[2],e[3]],0):zd(e,0)>>2;return r?i/100:i}function jce(t,e){e==null&&(e=Ne(4));var r=0,n=0,i=t*100;if(t==(t|0)&&t>=-536870912&&t<1<<29?n=1:i==(i|0)&&i>=-536870912&&i<1<<29&&(n=1,r=1),n)e.write_shift(-4,((r?i:t)<<2)+(r+2));else throw new Error("unsupported RkNumber "+t)}function Vce(t){var e={s:{},e:{}};return e.s.r=t.read_shift(4),e.e.r=t.read_shift(4),e.s.c=t.read_shift(4),e.e.c=t.read_shift(4),e}function Tze(t,e){return e||(e=Ne(16)),e.write_shift(4,t.s.r),e.write_shift(4,t.e.r),e.write_shift(4,t.s.c),e.write_shift(4,t.e.c),e}var B0=Vce,um=Tze;function Rs(t){if(t.length-t.l<8)throw"XLS Xnum Buffer underflow";return t.read_shift(8,"f")}function zh(t,e){return(e||Ne(8)).write_shift(8,t,"f")}function Aze(t){var e={},r=t.read_shift(1),n=r>>>1,i=t.read_shift(1),s=t.read_shift(2,"i"),a=t.read_shift(1),o=t.read_shift(1),c=t.read_shift(1);switch(t.l++,n){case 0:e.auto=1;break;case 1:e.index=i;var u=yh[i];u&&(e.rgb=Dv(u));break;case 2:e.rgb=Dv([a,o,c]);break;case 3:e.theme=i;break}return s!=0&&(e.tint=s>0?s/32767:s/32768),e}function J4(t,e){if(e||(e=Ne(8)),!t||t.auto)return e.write_shift(4,0),e.write_shift(4,0),e;t.index!=null?(e.write_shift(1,2),e.write_shift(1,t.index)):t.theme!=null?(e.write_shift(1,6),e.write_shift(1,t.theme)):(e.write_shift(1,5),e.write_shift(1,0));var r=t.tint||0;if(r>0?r*=32767:r<0&&(r*=32768),e.write_shift(2,r),!t.rgb||t.theme!=null)e.write_shift(2,0),e.write_shift(1,0),e.write_shift(1,0);else{var n=t.rgb||"FFFFFF";typeof n=="number"&&(n=("000000"+n.toString(16)).slice(-6)),e.write_shift(1,parseInt(n.slice(0,2),16)),e.write_shift(1,parseInt(n.slice(2,4),16)),e.write_shift(1,parseInt(n.slice(4,6),16)),e.write_shift(1,255)}return e}function Cze(t){var e=t.read_shift(1);t.l++;var r={fBold:e&1,fItalic:e&2,fUnderline:e&4,fStrikeout:e&8,fOutline:e&16,fShadow:e&32,fCondense:e&64,fExtend:e&128};return r}function Ize(t,e){e||(e=Ne(2));var r=(t.italic?2:0)|(t.strike?8:0)|(t.outline?16:0)|(t.shadow?32:0)|(t.condense?64:0)|(t.extend?128:0);return e.write_shift(1,r),e.write_shift(1,0),e}function qce(t,e){var r={2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"},n=t.read_shift(4);switch(n){case 0:return"";case 4294967295:case 4294967294:return r[t.read_shift(4)]||""}if(n>400)throw new Error("Unsupported Clipboard: "+n.toString(16));return t.l-=4,t.read_shift(0,e==1?"lpstr":"lpwstr")}function Pze(t){return qce(t,1)}function Rze(t){return qce(t,2)}var uD=2,fa=3,Qb=11,NH=12,Q4=19,ew=64,Oze=65,Bze=71,Dze=4108,Mze=4126,zi=80,zce=81,Nze=[zi,zce],DI={1:{n:"CodePage",t:uD},2:{n:"Category",t:zi},3:{n:"PresentationFormat",t:zi},4:{n:"ByteCount",t:fa},5:{n:"LineCount",t:fa},6:{n:"ParagraphCount",t:fa},7:{n:"SlideCount",t:fa},8:{n:"NoteCount",t:fa},9:{n:"HiddenCount",t:fa},10:{n:"MultimediaClipCount",t:fa},11:{n:"ScaleCrop",t:Qb},12:{n:"HeadingPairs",t:Dze},13:{n:"TitlesOfParts",t:Mze},14:{n:"Manager",t:zi},15:{n:"Company",t:zi},16:{n:"LinksUpToDate",t:Qb},17:{n:"CharacterCount",t:fa},19:{n:"SharedDoc",t:Qb},22:{n:"HyperlinksChanged",t:Qb},23:{n:"AppVersion",t:fa,p:"version"},24:{n:"DigSig",t:Oze},26:{n:"ContentType",t:zi},27:{n:"ContentStatus",t:zi},28:{n:"Language",t:zi},29:{n:"Version",t:zi},255:{},2147483648:{n:"Locale",t:Q4},2147483651:{n:"Behavior",t:Q4},1919054434:{}},MI={1:{n:"CodePage",t:uD},2:{n:"Title",t:zi},3:{n:"Subject",t:zi},4:{n:"Author",t:zi},5:{n:"Keywords",t:zi},6:{n:"Comments",t:zi},7:{n:"Template",t:zi},8:{n:"LastAuthor",t:zi},9:{n:"RevNumber",t:zi},10:{n:"EditTime",t:ew},11:{n:"LastPrinted",t:ew},12:{n:"CreatedDate",t:ew},13:{n:"ModifiedDate",t:ew},14:{n:"PageCount",t:fa},15:{n:"WordCount",t:fa},16:{n:"CharCount",t:fa},17:{n:"Thumbnail",t:Bze},18:{n:"Application",t:zi},19:{n:"DocSecurity",t:fa},255:{},2147483648:{n:"Locale",t:Q4},2147483651:{n:"Behavior",t:Q4},1919054434:{}},FH={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},Fze=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function Lze(t){return t.map(function(e){return[e>>16&255,e>>8&255,e&255]})}var $ze=Lze([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,0,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),yh=wn($ze),ju={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},fD={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},dD=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"],NI={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},tw={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function hD(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function Uze(t){var e=hD();if(!t||!t.match)return e;var r={};if((t.match(Ls)||[]).forEach(function(n){var i=ht(n);switch(i[0].replace(Yqe,"<")){case"<?xml":break;case"<Types":e.xmlns=i["xmlns"+(i[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":r[i.Extension.toLowerCase()]=i.ContentType;break;case"<Override":e[NI[i.ContentType]]!==void 0&&e[NI[i.ContentType]].push(i.PartName);break}}),e.xmlns!==Oi.CT)throw new Error("Unknown Namespace: "+e.xmlns);return e.calcchain=e.calcchains.length>0?e.calcchains[0]:"",e.sst=e.strs.length>0?e.strs[0]:"",e.style=e.styles.length>0?e.styles[0]:"",e.defaults=r,delete e.calcchains,e}function Hce(t,e,r){var n=Lqe(NI),i=[],s;i[i.length]=ui,i[i.length]=Xe("Types",null,{xmlns:Oi.CT,"xmlns:xsd":Oi.xsd,"xmlns:xsi":Oi.xsi}),i=i.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(u){return Xe("Default",null,{Extension:u[0],ContentType:u[1]})}));var a=function(u){t[u]&&t[u].length>0&&(s=t[u][0],i[i.length]=Xe("Override",null,{PartName:(s[0]=="/"?"":"/")+s,ContentType:tw[u][e.bookType]||tw[u].xlsx}))},o=function(u){(t[u]||[]).forEach(function(l){i[i.length]=Xe("Override",null,{PartName:(l[0]=="/"?"":"/")+l,ContentType:tw[u][e.bookType]||tw[u].xlsx})})},c=function(u){(t[u]||[]).forEach(function(l){i[i.length]=Xe("Override",null,{PartName:(l[0]=="/"?"":"/")+l,ContentType:n[u][0]})})};return a("workbooks"),o("sheets"),o("charts"),c("themes"),["strs","styles"].forEach(a),["coreprops","extprops","custprops"].forEach(c),c("vba"),c("comments"),c("threadedcomments"),c("drawings"),o("metadata"),c("people"),i.length>2&&(i[i.length]="</Types>",i[1]=i[1].replace("/>",">")),i.join("")}var vr={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",CONN:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/connections",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function Bv(t){var e=t.lastIndexOf("/");return t.slice(0,e+1)+"_rels/"+t.slice(e+1)+".rels"}function Bg(t,e){var r={"!id":{}};if(!t)return r;e.charAt(0)!=="/"&&(e="/"+e);var n={};return(t.match(Ls)||[]).forEach(function(i){var s=ht(i);if(s[0]==="<Relationship"){var a={};a.Type=s.Type,a.Target=s.Target,a.Id=s.Id,s.TargetMode&&(a.TargetMode=s.TargetMode);var o=s.TargetMode==="External"?s.Target:hg(s.Target,e);r[o]=a,n[s.Id]=a}}),r["!id"]=n,r}function N1(t){var e=[ui,Xe("Relationships",null,{xmlns:Oi.RELS})];return jn(t["!id"]).forEach(function(r){e[e.length]=Xe("Relationship",null,t["!id"][r])}),e.length>2&&(e[e.length]="</Relationships>",e[1]=e[1].replace("/>",">")),e.join("")}function tn(t,e,r,n,i,s){if(i||(i={}),t["!id"]||(t["!id"]={}),t["!idx"]||(t["!idx"]=1),e<0)for(e=t["!idx"];t["!id"]["rId"+e];++e);if(t["!idx"]=e+1,i.Id="rId"+e,i.Type=n,i.Target=r,[vr.HLINK,vr.XPATH,vr.XMISS].indexOf(i.Type)>-1&&(i.TargetMode="External"),t["!id"][i.Id])throw new Error("Cannot rewrite rId "+e);return t["!id"][i.Id]=i,t[("/"+i.Target).replace("//","/")]=i,e}var jze="application/vnd.oasis.opendocument.spreadsheet";function Vze(t,e){for(var r=O5(t),n,i;n=mi.exec(r);)switch(n[3]){case"manifest":break;case"file-entry":if(i=ht(n[0],!1),i.path=="/"&&i.type!==jze)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(e&&e.WTF)throw n}}function qze(t){var e=[ui];e.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),e.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var r=0;r<t.length;++r)e.push('  <manifest:file-entry manifest:full-path="'+t[r][0]+'" manifest:media-type="'+t[r][1]+`"/>
`);return e.push("</manifest:manifest>"),e.join("")}function LH(t,e,r){return['  <rdf:Description rdf:about="'+t+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(r||"odf")+"#"+e+`"/>
`,`  </rdf:Description>
`].join("")}function zze(t,e){return['  <rdf:Description rdf:about="'+t+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+e+`"/>
`,`  </rdf:Description>
`].join("")}function Hze(t){var e=[ui];e.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var r=0;r!=t.length;++r)e.push(LH(t[r][0],t[r][1])),e.push(zze("",t[r][0]));return e.push(LH("","Document","pkg")),e.push("</rdf:RDF>"),e.join("")}function Wce(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+H4.version+"</meta:generator></office:meta></office:document-meta>"}var To=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],Wze=function(){for(var t=new Array(To.length),e=0;e<To.length;++e){var r=To[e],n="(?:"+r[0].slice(0,r[0].indexOf(":"))+":)"+r[0].slice(r[0].indexOf(":")+1);t[e]=new RegExp("<"+n+"[^>]*>([\\s\\S]*?)</"+n+">")}return t}();function Gce(t){var e={};t=on(t);for(var r=0;r<To.length;++r){var n=To[r],i=t.match(Wze[r]);i!=null&&i.length>0&&(e[n[1]]=kr(i[1])),n[2]==="date"&&e[n[1]]&&(e[n[1]]=Hn(e[n[1]]))}return e}function rE(t,e,r,n,i){i[t]!=null||e==null||e===""||(i[t]=e,e=nr(e),n[n.length]=r?Xe(t,e,r):ls(t,e))}function Kce(t,e){var r=e||{},n=[ui,Xe("cp:coreProperties",null,{"xmlns:cp":Oi.CORE_PROPS,"xmlns:dc":Oi.dc,"xmlns:dcterms":Oi.dcterms,"xmlns:dcmitype":Oi.dcmitype,"xmlns:xsi":Oi.xsi})],i={};if(!t&&!r.Props)return n.join("");t&&(t.CreatedDate!=null&&rE("dcterms:created",typeof t.CreatedDate=="string"?t.CreatedDate:OI(t.CreatedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,i),t.ModifiedDate!=null&&rE("dcterms:modified",typeof t.ModifiedDate=="string"?t.ModifiedDate:OI(t.ModifiedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,i));for(var s=0;s!=To.length;++s){var a=To[s],o=r.Props&&r.Props[a[1]]!=null?r.Props[a[1]]:t?t[a[1]]:null;o===!0?o="1":o===!1?o="0":typeof o=="number"&&(o=String(o)),o!=null&&rE(a[0],o,null,n,i)}return n.length>2&&(n[n.length]="</cp:coreProperties>",n[1]=n[1].replace("/>",">")),n.join("")}var bh=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],Xce=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function Yce(t,e,r,n){var i=[];if(typeof t=="string")i=CH(t,n);else for(var s=0;s<t.length;++s)i=i.concat(t[s].map(function(l){return{v:l}}));var a=typeof e=="string"?CH(e,n).map(function(l){return l.v}):e,o=0,c=0;if(a.length>0)for(var u=0;u!==i.length;u+=2){switch(c=+i[u+1].v,i[u].v){case"Worksheets":case"":case"":case" ":case"":case" ":case"Arbeitsbltter":case"alma Sayfalar":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de clculo":case"Planilhas":case"Regneark":case"Hojas de clculo":case"Werkbladen":r.Worksheets=c,r.SheetNames=a.slice(o,o+c);break;case"Named Ranges":case"Rangos con nombre":case"":case"Benannte Bereiche":case"Navngivne omrder":r.NamedRanges=c,r.DefinedNames=a.slice(o,o+c);break;case"Charts":case"Diagramme":r.Chartsheets=c,r.ChartNames=a.slice(o,o+c);break}o+=c}}function Gze(t,e,r){var n={};return e||(e={}),t=on(t),bh.forEach(function(i){var s=(t.match(Cv(i[0]))||[])[1];switch(i[2]){case"string":s&&(e[i[1]]=kr(s));break;case"bool":e[i[1]]=s==="true";break;case"raw":var a=t.match(new RegExp("<"+i[0]+"[^>]*>([\\s\\S]*?)</"+i[0]+">"));a&&a.length>0&&(n[i[1]]=a[1]);break}}),n.HeadingPairs&&n.TitlesOfParts&&Yce(n.HeadingPairs,n.TitlesOfParts,e,r),e}function Zce(t){var e=[],r=Xe;return t||(t={}),t.Application="SheetJS",e[e.length]=ui,e[e.length]=Xe("Properties",null,{xmlns:Oi.EXT_PROPS,"xmlns:vt":Oi.vt}),bh.forEach(function(n){if(t[n[1]]!==void 0){var i;switch(n[2]){case"string":i=nr(String(t[n[1]]));break;case"bool":i=t[n[1]]?"true":"false";break}i!==void 0&&(e[e.length]=r(n[0],i))}}),e[e.length]=r("HeadingPairs",r("vt:vector",r("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+r("vt:variant",r("vt:i4",String(t.Worksheets))),{size:2,baseType:"variant"})),e[e.length]=r("TitlesOfParts",r("vt:vector",t.SheetNames.map(function(n){return"<vt:lpstr>"+nr(n)+"</vt:lpstr>"}).join(""),{size:t.Worksheets,baseType:"lpstr"})),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}var Kze=/<[^>]+>[^<]*/g;function Xze(t,e){var r={},n="",i=t.match(Kze);if(i)for(var s=0;s!=i.length;++s){var a=i[s],o=ht(a);switch(Pc(o[0])){case"<?xml":break;case"<Properties":break;case"<property":n=kr(o.name);break;case"</property>":n=null;break;default:if(a.indexOf("<vt:")===0){var c=a.split(">"),u=c[0].slice(4),l=c[1];switch(u){case"lpstr":case"bstr":case"lpwstr":r[n]=kr(l);break;case"bool":r[n]=an(l);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":r[n]=parseInt(l,10);break;case"r4":case"r8":case"decimal":r[n]=parseFloat(l);break;case"filetime":case"date":r[n]=Hn(l);break;case"cy":case"error":r[n]=kr(l);break;default:if(u.slice(-1)=="/")break;e.WTF&&typeof console<"u"&&console.warn("Unexpected",a,u,c)}}else if(a.slice(0,2)!=="</"){if(e.WTF)throw new Error(a)}}}return r}function Jce(t){var e=[ui,Xe("Properties",null,{xmlns:Oi.CUST_PROPS,"xmlns:vt":Oi.vt})];if(!t)return e.join("");var r=1;return jn(t).forEach(function(i){++r,e[e.length]=Xe("property",ize(t[i]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:r,name:nr(i)})}),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}var FI={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"},nE;function Yze(t,e,r){nE||(nE=I5(FI)),e=nE[e]||e,t[e]=r}function Zze(t,e){var r=[];return jn(FI).map(function(n){for(var i=0;i<To.length;++i)if(To[i][1]==n)return To[i];for(i=0;i<bh.length;++i)if(bh[i][1]==n)return bh[i];throw n}).forEach(function(n){if(t[n[1]]!=null){var i=e&&e.Props&&e.Props[n[1]]!=null?e.Props[n[1]]:t[n[1]];switch(n[2]){case"date":i=new Date(i).toISOString().replace(/\.\d*Z/,"Z");break}typeof i=="number"?i=String(i):i===!0||i===!1?i=i?"1":"0":i instanceof Date&&(i=new Date(i).toISOString().replace(/\.\d*Z/,"")),r.push(ls(FI[n[1]]||n[1],i))}}),Xe("DocumentProperties",r.join(""),{xmlns:ja.o})}function Jze(t,e){var r=["Worksheets","SheetNames"],n="CustomDocumentProperties",i=[];return t&&jn(t).forEach(function(s){if(Object.prototype.hasOwnProperty.call(t,s)){for(var a=0;a<To.length;++a)if(s==To[a][1])return;for(a=0;a<bh.length;++a)if(s==bh[a][1])return;for(a=0;a<r.length;++a)if(s==r[a])return;var o=t[s],c="string";typeof o=="number"?(c="float",o=String(o)):o===!0||o===!1?(c="boolean",o=o?"1":"0"):o=String(o),i.push(Xe(EH(s),o,{"dt:dt":c}))}}),e&&jn(e).forEach(function(s){if(Object.prototype.hasOwnProperty.call(e,s)&&!(t&&Object.prototype.hasOwnProperty.call(t,s))){var a=e[s],o="string";typeof a=="number"?(o="float",a=String(a)):a===!0||a===!1?(o="boolean",a=a?"1":"0"):a instanceof Date?(o="dateTime.tz",a=a.toISOString()):a=String(a),i.push(Xe(EH(s),a,{"dt:dt":o}))}}),"<"+n+' xmlns="'+ja.o+'">'+i.join("")+"</"+n+">"}function pD(t){var e=t.read_shift(4),r=t.read_shift(4);return new Date((r/1e7*Math.pow(2,32)+e/1e7-11644473600)*1e3).toISOString().replace(/\.000/,"")}function Qze(t){var e=typeof t=="string"?new Date(Date.parse(t)):t,r=e.getTime()/1e3+11644473600,n=r%Math.pow(2,32),i=(r-n)/Math.pow(2,32);n*=1e7,i*=1e7;var s=n/Math.pow(2,32)|0;s>0&&(n=n%Math.pow(2,32),i+=s);var a=Ne(8);return a.write_shift(4,n),a.write_shift(4,i),a}function Qce(t,e,r){var n=t.l,i=t.read_shift(0,"lpstr-cp");if(r)for(;t.l-n&3;)++t.l;return i}function ele(t,e,r){var n=t.read_shift(0,"lpwstr");return n}function tle(t,e,r){return e===31?ele(t):Qce(t,e,r)}function LI(t,e,r){return tle(t,e,r===!1?0:4)}function eHe(t,e){if(!e)throw new Error("VtUnalignedString must have positive length");return tle(t,e,0)}function tHe(t){for(var e=t.read_shift(4),r=[],n=0;n!=e;++n){var i=t.l;r[n]=t.read_shift(0,"lpwstr").replace(ea,""),t.l-i&2&&(t.l+=2)}return r}function rHe(t){for(var e=t.read_shift(4),r=[],n=0;n!=e;++n)r[n]=t.read_shift(0,"lpstr-cp").replace(ea,"");return r}function nHe(t){var e=t.l,r=e6(t,zce);t[t.l]==0&&t[t.l+1]==0&&t.l-e&2&&(t.l+=2);var n=e6(t,fa);return[r,n]}function iHe(t){for(var e=t.read_shift(4),r=[],n=0;n<e/2;++n)r.push(nHe(t));return r}function $H(t,e){for(var r=t.read_shift(4),n={},i=0;i!=r;++i){var s=t.read_shift(4),a=t.read_shift(4);n[s]=t.read_shift(a,e===1200?"utf16le":"utf8").replace(ea,"").replace(dg,"!"),e===1200&&a%2&&(t.l+=2)}return t.l&3&&(t.l=t.l>>3<<2),n}function rle(t){var e=t.read_shift(4),r=t.slice(t.l,t.l+e);return t.l+=e,(e&3)>0&&(t.l+=4-(e&3)&3),r}function sHe(t){var e={};return e.Size=t.read_shift(4),t.l+=e.Size+3-(e.Size-1)%4,e}function e6(t,e,r){var n=t.read_shift(2),i,s=r||{};if(t.l+=2,e!==NH&&n!==e&&Nze.indexOf(e)===-1&&!((e&65534)==4126&&(n&65534)==4126))throw new Error("Expected type "+e+" saw "+n);switch(e===NH?n:e){case 2:return i=t.read_shift(2,"i"),s.raw||(t.l+=2),i;case 3:return i=t.read_shift(4,"i"),i;case 11:return t.read_shift(4)!==0;case 19:return i=t.read_shift(4),i;case 30:return Qce(t,n,4).replace(ea,"");case 31:return ele(t);case 64:return pD(t);case 65:return rle(t);case 71:return sHe(t);case 80:return LI(t,n,!s.raw).replace(ea,"");case 81:return eHe(t,n).replace(ea,"");case 4108:return iHe(t);case 4126:case 4127:return n==4127?tHe(t):rHe(t);default:throw new Error("TypedPropertyValue unrecognized type "+e+" "+n)}}function UH(t,e){var r=Ne(4),n=Ne(4);switch(r.write_shift(4,t==80?31:t),t){case 3:n.write_shift(-4,e);break;case 5:n=Ne(8),n.write_shift(8,e,"f");break;case 11:n.write_shift(4,e?1:0);break;case 64:n=Qze(e);break;case 31:case 80:for(n=Ne(4+2*(e.length+1)+(e.length%2?0:2)),n.write_shift(4,e.length+1),n.write_shift(0,e,"dbcs");n.l!=n.length;)n.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+t+" "+e)}return wi([r,n])}function jH(t,e){var r=t.l,n=t.read_shift(4),i=t.read_shift(4),s=[],a=0,o=0,c=-1,u={};for(a=0;a!=i;++a){var l=t.read_shift(4),f=t.read_shift(4);s[a]=[l,f+r]}s.sort(function(y,b){return y[1]-b[1]});var d={};for(a=0;a!=i;++a){if(t.l!==s[a][1]){var h=!0;if(a>0&&e)switch(e[s[a-1][0]].t){case 2:t.l+2===s[a][1]&&(t.l+=2,h=!1);break;case 80:t.l<=s[a][1]&&(t.l=s[a][1],h=!1);break;case 4108:t.l<=s[a][1]&&(t.l=s[a][1],h=!1);break}if((!e||a==0)&&t.l<=s[a][1]&&(h=!1,t.l=s[a][1]),h)throw new Error("Read Error: Expected address "+s[a][1]+" at "+t.l+" :"+a)}if(e){if(s[a][0]==0&&s.length>a+1&&s[a][1]==s[a+1][1])continue;var m=e[s[a][0]];if(d[m.n]=e6(t,m.t,{raw:!0}),m.p==="version"&&(d[m.n]=String(d[m.n]>>16)+"."+("0000"+String(d[m.n]&65535)).slice(-4)),m.n=="CodePage")switch(d[m.n]){case 0:d[m.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:nc(o=d[m.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+d[m.n])}}else if(s[a][0]===1){if(o=d.CodePage=e6(t,uD),nc(o),c!==-1){var p=t.l;t.l=s[c][1],u=$H(t,o),t.l=p}}else if(s[a][0]===0){if(o===0){c=a,t.l=s[a+1][1];continue}u=$H(t,o)}else{var g=u[s[a][0]],v;switch(t[t.l]){case 65:t.l+=4,v=rle(t);break;case 30:t.l+=4,v=LI(t,t[t.l-4]).replace(/\u0000+$/,"");break;case 31:t.l+=4,v=LI(t,t[t.l-4]).replace(/\u0000+$/,"");break;case 3:t.l+=4,v=t.read_shift(4,"i");break;case 19:t.l+=4,v=t.read_shift(4);break;case 5:t.l+=4,v=t.read_shift(8,"f");break;case 11:t.l+=4,v=ni(t,4);break;case 64:t.l+=4,v=Hn(pD(t));break;default:throw new Error("unparsed value: "+t[t.l])}d[g]=v}}return t.l=r+n,d}var nle=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function aHe(t){switch(typeof t){case"boolean":return 11;case"number":return(t|0)==t?3:5;case"string":return 31;case"object":if(t instanceof Date)return 64;break}return-1}function VH(t,e,r){var n=Ne(8),i=[],s=[],a=8,o=0,c=Ne(8),u=Ne(8);if(c.write_shift(4,2),c.write_shift(4,1200),u.write_shift(4,1),s.push(c),i.push(u),a+=8+c.length,!e){u=Ne(8),u.write_shift(4,0),i.unshift(u);var l=[Ne(4)];for(l[0].write_shift(4,t.length),o=0;o<t.length;++o){var f=t[o][0];for(c=Ne(8+2*(f.length+1)+(f.length%2?0:2)),c.write_shift(4,o+2),c.write_shift(4,f.length+1),c.write_shift(0,f,"dbcs");c.l!=c.length;)c.write_shift(1,0);l.push(c)}c=wi(l),s.unshift(c),a+=8+c.length}for(o=0;o<t.length;++o)if(!(e&&!e[t[o][0]])&&!(nle.indexOf(t[o][0])>-1||Xce.indexOf(t[o][0])>-1)&&t[o][1]!=null){var d=t[o][1],h=0;if(e){h=+e[t[o][0]];var m=r[h];if(m.p=="version"&&typeof d=="string"){var p=d.split(".");d=(+p[0]<<16)+(+p[1]||0)}c=UH(m.t,d)}else{var g=aHe(d);g==-1&&(g=31,d=String(d)),c=UH(g,d)}s.push(c),u=Ne(8),u.write_shift(4,e?h:2+o),i.push(u),a+=8+c.length}var v=8*(s.length+1);for(o=0;o<s.length;++o)i[o].write_shift(4,v),v+=s[o].length;return n.write_shift(4,a),n.write_shift(4,s.length),wi([n].concat(i).concat(s))}function qH(t,e,r){var n=t.content;if(!n)return{};Pi(n,0);var i,s,a,o,c=0;n.chk("feff","Byte Order: "),n.read_shift(2);var u=n.read_shift(4),l=n.read_shift(16);if(l!==St.utils.consts.HEADER_CLSID&&l!==r)throw new Error("Bad PropertySet CLSID "+l);if(i=n.read_shift(4),i!==1&&i!==2)throw new Error("Unrecognized #Sets: "+i);if(s=n.read_shift(16),o=n.read_shift(4),i===1&&o!==n.l)throw new Error("Length mismatch: "+o+" !== "+n.l);i===2&&(a=n.read_shift(16),c=n.read_shift(4));var f=jH(n,e),d={SystemIdentifier:u};for(var h in f)d[h]=f[h];if(d.FMTID=s,i===1)return d;if(c-n.l==2&&(n.l+=2),n.l!==c)throw new Error("Length mismatch 2: "+n.l+" !== "+c);var m;try{m=jH(n,null)}catch{}for(h in m)d[h]=m[h];return d.FMTID=[s,a],d}function zH(t,e,r,n,i,s){var a=Ne(i?68:48),o=[a];a.write_shift(2,65534),a.write_shift(2,0),a.write_shift(4,842412599),a.write_shift(16,St.utils.consts.HEADER_CLSID,"hex"),a.write_shift(4,i?2:1),a.write_shift(16,e,"hex"),a.write_shift(4,i?68:48);var c=VH(t,r,n);if(o.push(c),i){var u=VH(i,null,null);a.write_shift(16,s,"hex"),a.write_shift(4,68+c.length),o.push(u)}return wi(o)}function sf(t,e){return t.read_shift(e),null}function oHe(t,e){e||(e=Ne(t));for(var r=0;r<t;++r)e.write_shift(1,0);return e}function cHe(t,e,r){for(var n=[],i=t.l+e;t.l<i;)n.push(r(t,i-t.l));if(i!==t.l)throw new Error("Slurp error");return n}function ni(t,e){return t.read_shift(e)===1}function Ks(t,e){return e||(e=Ne(2)),e.write_shift(2,+!!t),e}function ii(t){return t.read_shift(2,"u")}function go(t,e){return e||(e=Ne(2)),e.write_shift(2,t),e}function ile(t,e){return cHe(t,e,ii)}function lHe(t){var e=t.read_shift(1),r=t.read_shift(1);return r===1?e:e===1}function sle(t,e,r){return r||(r=Ne(2)),r.write_shift(1,e=="e"?+t:+!!t),r.write_shift(1,e=="e"?1:0),r}function Yy(t,e,r){var n=t.read_shift(r&&r.biff>=12?2:1),i="sbcs-cont",s=bo;if(r&&r.biff>=8&&(bo=1200),!r||r.biff==8){var a=t.read_shift(1);a&&(i="dbcs-cont")}else r.biff==12&&(i="wstr");r.biff>=2&&r.biff<=5&&(i="cpstr");var o=n?t.read_shift(n,i):"";return bo=s,o}function uHe(t){var e=bo;bo=1200;var r=t.read_shift(2),n=t.read_shift(1),i=n&4,s=n&8,a=1+(n&1),o=0,c,u={};s&&(o=t.read_shift(2)),i&&(c=t.read_shift(4));var l=a==2?"dbcs-cont":"sbcs-cont",f=r===0?"":t.read_shift(r,l);return s&&(t.l+=4*o),i&&(t.l+=c),u.t=f,s||(u.raw="<t>"+u.t+"</t>",u.r=u.t),bo=e,u}function fHe(t){var e=t.t||"",r=Ne(3);r.write_shift(2,e.length),r.write_shift(1,1);var n=Ne(2*e.length);n.write_shift(2*e.length,e,"utf16le");var i=[r,n];return wi(i)}function Hh(t,e,r){var n;if(r){if(r.biff>=2&&r.biff<=5)return t.read_shift(e,"cpstr");if(r.biff>=12)return t.read_shift(e,"dbcs-cont")}var i=t.read_shift(1);return i===0?n=t.read_shift(e,"sbcs-cont"):n=t.read_shift(e,"dbcs-cont"),n}function Zy(t,e,r){var n=t.read_shift(r&&r.biff==2?1:2);return n===0?(t.l++,""):Hh(t,n,r)}function D0(t,e,r){if(r.biff>5)return Zy(t,e,r);var n=t.read_shift(1);return n===0?(t.l++,""):t.read_shift(n,r.biff<=4||!t.lens?"cpstr":"sbcs-cont")}function ale(t,e,r){return r||(r=Ne(3+2*t.length)),r.write_shift(2,t.length),r.write_shift(1,1),r.write_shift(31,t,"utf16le"),r}function dHe(t){var e=t.read_shift(1);t.l++;var r=t.read_shift(2);return t.l+=2,[e,r]}function hHe(t){var e=t.read_shift(4),r=t.l,n=!1;e>24&&(t.l+=e-24,t.read_shift(16)==="795881f43b1d7f48af2c825dc4852763"&&(n=!0),t.l=r);var i=t.read_shift((n?e-24:e)>>1,"utf16le").replace(ea,"");return n&&(t.l+=24),i}function pHe(t){for(var e=t.read_shift(2),r="";e-- >0;)r+="../";var n=t.read_shift(0,"lpstr-ansi");if(t.l+=2,t.read_shift(2)!=57005)throw new Error("Bad FileMoniker");var i=t.read_shift(4);if(i===0)return r+n.replace(/\\/g,"/");var s=t.read_shift(4);if(t.read_shift(2)!=3)throw new Error("Bad FileMoniker");var a=t.read_shift(s>>1,"utf16le").replace(ea,"");return r+a}function mHe(t,e){var r=t.read_shift(16);switch(r){case"e0c9ea79f9bace118c8200aa004ba90b":return hHe(t);case"0303000000000000c000000000000046":return pHe(t);default:throw new Error("Unsupported Moniker "+r)}}function rw(t){var e=t.read_shift(4),r=e>0?t.read_shift(e,"utf16le").replace(ea,""):"";return r}function HH(t,e){e||(e=Ne(6+t.length*2)),e.write_shift(4,1+t.length);for(var r=0;r<t.length;++r)e.write_shift(2,t.charCodeAt(r));return e.write_shift(2,0),e}function gHe(t,e){var r=t.l+e,n=t.read_shift(4);if(n!==2)throw new Error("Unrecognized streamVersion: "+n);var i=t.read_shift(2);t.l+=2;var s,a,o,c,u="",l,f;i&16&&(s=rw(t,r-t.l)),i&128&&(a=rw(t,r-t.l)),(i&257)===257&&(o=rw(t,r-t.l)),(i&257)===1&&(c=mHe(t,r-t.l)),i&8&&(u=rw(t,r-t.l)),i&32&&(l=t.read_shift(16)),i&64&&(f=pD(t)),t.l=r;var d=a||o||c||"";d&&u&&(d+="#"+u),d||(d="#"+u),i&2&&d.charAt(0)=="/"&&d.charAt(1)!="/"&&(d="file://"+d);var h={Target:d};return l&&(h.guid=l),f&&(h.time=f),s&&(h.Tooltip=s),h}function vHe(t){var e=Ne(512),r=0,n=t.Target;n.slice(0,7)=="file://"&&(n=n.slice(7));var i=n.indexOf("#"),s=i>-1?31:23;switch(n.charAt(0)){case"#":s=28;break;case".":s&=-3;break}e.write_shift(4,2),e.write_shift(4,s);var a=[8,6815827,6619237,4849780,83];for(r=0;r<a.length;++r)e.write_shift(4,a[r]);if(s==28)n=n.slice(1),HH(n,e);else if(s&2){for(a="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),r=0;r<a.length;++r)e.write_shift(1,parseInt(a[r],16));var o=i>-1?n.slice(0,i):n;for(e.write_shift(4,2*(o.length+1)),r=0;r<o.length;++r)e.write_shift(2,o.charCodeAt(r));e.write_shift(2,0),s&8&&HH(i>-1?n.slice(i+1):"",e)}else{for(a="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),r=0;r<a.length;++r)e.write_shift(1,parseInt(a[r],16));for(var c=0;n.slice(c*3,c*3+3)=="../"||n.slice(c*3,c*3+3)=="..\\";)++c;for(e.write_shift(2,c),e.write_shift(4,n.length-3*c+1),r=0;r<n.length-3*c;++r)e.write_shift(1,n.charCodeAt(r+3*c)&255);for(e.write_shift(1,0),e.write_shift(2,65535),e.write_shift(2,57005),r=0;r<6;++r)e.write_shift(4,0)}return e.slice(0,e.l)}function ole(t){var e=t.read_shift(1),r=t.read_shift(1),n=t.read_shift(1),i=t.read_shift(1);return[e,r,n,i]}function cle(t,e){var r=ole(t);return r[3]=0,r}function Al(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2);return{r:e,c:r,ixfe:n}}function Wh(t,e,r,n){return n||(n=Ne(6)),n.write_shift(2,t),n.write_shift(2,e),n.write_shift(2,r||0),n}function yHe(t){var e=t.read_shift(2),r=t.read_shift(2);return t.l+=8,{type:e,flags:r}}function bHe(t,e,r){return e===0?"":D0(t,e,r)}function wHe(t,e,r){var n=r.biff>8?4:2,i=t.read_shift(n),s=t.read_shift(n,"i"),a=t.read_shift(n,"i");return[i,s,a]}function lle(t){var e=t.read_shift(2),r=lD(t);return[e,r]}function _He(t,e,r){t.l+=4,e-=4;var n=t.l+e,i=Yy(t,e,r),s=t.read_shift(2);if(n-=t.l,s!==n)throw new Error("Malformed AddinUdf: padding = "+n+" != "+s);return t.l+=s,i}function B5(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2),i=t.read_shift(2);return{s:{c:n,r:e},e:{c:i,r}}}function ule(t,e){return e||(e=Ne(8)),e.write_shift(2,t.s.r),e.write_shift(2,t.e.r),e.write_shift(2,t.s.c),e.write_shift(2,t.e.c),e}function fle(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(1),i=t.read_shift(1);return{s:{c:n,r:e},e:{c:i,r}}}var xHe=fle;function dle(t){t.l+=4;var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2);return t.l+=12,[r,e,n]}function SHe(t){var e={};return t.l+=4,t.l+=16,e.fSharedNote=t.read_shift(2),t.l+=4,e}function EHe(t){var e={};return t.l+=4,t.cf=t.read_shift(2),e}function ys(t){t.l+=2,t.l+=t.read_shift(2)}var kHe={0:ys,4:ys,5:ys,6:ys,7:EHe,8:ys,9:ys,10:ys,11:ys,12:ys,13:SHe,14:ys,15:ys,16:ys,17:ys,18:ys,19:ys,20:ys,21:dle};function THe(t,e){for(var r=t.l+e,n=[];t.l<r;){var i=t.read_shift(2);t.l-=2;try{n.push(kHe[i](t,r-t.l))}catch{return t.l=r,n}}return t.l!=r&&(t.l=r),n}function nw(t,e){var r={BIFFVer:0,dt:0};switch(r.BIFFVer=t.read_shift(2),e-=2,e>=2&&(r.dt=t.read_shift(2),t.l-=2),r.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(e>6)throw new Error("Unexpected BIFF Ver "+r.BIFFVer)}return t.read_shift(e),r}function mD(t,e,r){var n=1536,i=16;switch(r.bookType){case"biff8":break;case"biff5":n=1280,i=8;break;case"biff4":n=4,i=6;break;case"biff3":n=3,i=6;break;case"biff2":n=2,i=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var s=Ne(i);return s.write_shift(2,n),s.write_shift(2,e),i>4&&s.write_shift(2,29282),i>6&&s.write_shift(2,1997),i>8&&(s.write_shift(2,49161),s.write_shift(2,1),s.write_shift(2,1798),s.write_shift(2,0)),s}function AHe(t,e){return e===0||t.read_shift(2),1200}function CHe(t,e,r){if(r.enc)return t.l+=e,"";var n=t.l,i=D0(t,0,r);return t.read_shift(e+n-t.l),i}function IHe(t,e){var r=!e||e.biff==8,n=Ne(r?112:54);for(n.write_shift(e.biff==8?2:1,7),r&&n.write_shift(1,0),n.write_shift(4,859007059),n.write_shift(4,5458548|(r?0:536870912));n.l<n.length;)n.write_shift(1,r?0:32);return n}function PHe(t,e,r){var n=r&&r.biff==8||e==2?t.read_shift(2):(t.l+=e,0);return{fDialog:n&16,fBelow:n&64,fRight:n&128}}function RHe(t,e,r){var n=t.read_shift(4),i=t.read_shift(1)&3,s=t.read_shift(1);switch(s){case 0:s="Worksheet";break;case 1:s="Macrosheet";break;case 2:s="Chartsheet";break;case 6:s="VBAModule";break}var a=Yy(t,0,r);return a.length===0&&(a="Sheet1"),{pos:n,hs:i,dt:s,name:a}}function OHe(t,e){var r=!e||e.biff>=8?2:1,n=Ne(8+r*t.name.length);n.write_shift(4,t.pos),n.write_shift(1,t.hs||0),n.write_shift(1,t.dt),n.write_shift(1,t.name.length),e.biff>=8&&n.write_shift(1,1),n.write_shift(r*t.name.length,t.name,e.biff<8?"sbcs":"utf16le");var i=n.slice(0,n.l);return i.l=n.l,i}function BHe(t,e){for(var r=t.l+e,n=t.read_shift(4),i=t.read_shift(4),s=[],a=0;a!=i&&t.l<r;++a)s.push(uHe(t));return s.Count=n,s.Unique=i,s}function DHe(t,e){var r=Ne(8);r.write_shift(4,t.Count),r.write_shift(4,t.Unique);for(var n=[],i=0;i<t.length;++i)n[i]=fHe(t[i]);var s=wi([r].concat(n));return s.parts=[r.length].concat(n.map(function(a){return a.length})),s}function MHe(t,e){var r={};return r.dsst=t.read_shift(2),t.l+=e-2,r}function NHe(t){var e={};e.r=t.read_shift(2),e.c=t.read_shift(2),e.cnt=t.read_shift(2)-e.c;var r=t.read_shift(2);t.l+=4;var n=t.read_shift(1);return t.l+=3,n&7&&(e.level=n&7),n&32&&(e.hidden=!0),n&64&&(e.hpt=r/20),e}function FHe(t){var e=yHe(t);if(e.type!=2211)throw new Error("Invalid Future Record "+e.type);var r=t.read_shift(4);return r!==0}function LHe(t){return t.read_shift(2),t.read_shift(4)}function WH(t,e,r){var n=0;r&&r.biff==2||(n=t.read_shift(2));var i=t.read_shift(2);r&&r.biff==2&&(n=1-(i>>15),i&=32767);var s={Unsynced:n&1,DyZero:(n&2)>>1,ExAsc:(n&4)>>2,ExDsc:(n&8)>>3};return[s,i]}function $He(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2),i=t.read_shift(2),s=t.read_shift(2),a=t.read_shift(2),o=t.read_shift(2),c=t.read_shift(2),u=t.read_shift(2);return{Pos:[e,r],Dim:[n,i],Flags:s,CurTab:a,FirstTab:o,Selected:c,TabRatio:u}}function UHe(){var t=Ne(18);return t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,29280),t.write_shift(2,17600),t.write_shift(2,56),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,1),t.write_shift(2,500),t}function jHe(t,e,r){if(r&&r.biff>=2&&r.biff<5)return{};var n=t.read_shift(2);return{RTL:n&64}}function VHe(t){var e=Ne(18),r=1718;return t&&t.RTL&&(r|=64),e.write_shift(2,r),e.write_shift(4,0),e.write_shift(4,64),e.write_shift(4,0),e.write_shift(4,0),e}function qHe(){}function zHe(t,e,r){var n={dyHeight:t.read_shift(2),fl:t.read_shift(2)};switch(r&&r.biff||8){case 2:break;case 3:case 4:t.l+=2;break;default:t.l+=10;break}return n.name=Yy(t,0,r),n}function HHe(t,e){var r=t.name||"Arial",n=e&&e.biff==5,i=n?15+r.length:16+2*r.length,s=Ne(i);return s.write_shift(2,t.sz*20),s.write_shift(4,0),s.write_shift(2,400),s.write_shift(4,0),s.write_shift(2,0),s.write_shift(1,r.length),n||s.write_shift(1,1),s.write_shift((n?1:2)*r.length,r,n?"sbcs":"utf16le"),s}function WHe(t){var e=Al(t);return e.isst=t.read_shift(4),e}function GHe(t,e,r,n){var i=Ne(10);return Wh(t,e,n,i),i.write_shift(4,r),i}function KHe(t,e,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=t.l+e,i=Al(t);r.biff==2&&t.l++;var s=Zy(t,n-t.l,r);return i.val=s,i}function XHe(t,e,r,n,i){var s=!i||i.biff==8,a=Ne(8+ +s+(1+s)*r.length);return Wh(t,e,n,a),a.write_shift(2,r.length),s&&a.write_shift(1,1),a.write_shift((1+s)*r.length,r,s?"utf16le":"sbcs"),a}function YHe(t,e,r){var n=t.read_shift(2),i=D0(t,0,r);return[n,i]}function ZHe(t,e,r,n){var i=r&&r.biff==5;n||(n=Ne(i?3+e.length:5+2*e.length)),n.write_shift(2,t),n.write_shift(i?1:2,e.length),i||n.write_shift(1,1),n.write_shift((i?1:2)*e.length,e,i?"sbcs":"utf16le");var s=n.length>n.l?n.slice(0,n.l):n;return s.l==null&&(s.l=s.length),s}var JHe=D0;function GH(t,e,r){var n=t.l+e,i=r.biff==8||!r.biff?4:2,s=t.read_shift(i),a=t.read_shift(i),o=t.read_shift(2),c=t.read_shift(2);return t.l=n,{s:{r:s,c:o},e:{r:a,c}}}function QHe(t,e){var r=e.biff==8||!e.biff?4:2,n=Ne(2*r+6);return n.write_shift(r,t.s.r),n.write_shift(r,t.e.r+1),n.write_shift(2,t.s.c),n.write_shift(2,t.e.c+1),n.write_shift(2,0),n}function eWe(t){var e=t.read_shift(2),r=t.read_shift(2),n=lle(t);return{r:e,c:r,ixfe:n[0],rknum:n[1]}}function tWe(t,e){for(var r=t.l+e-2,n=t.read_shift(2),i=t.read_shift(2),s=[];t.l<r;)s.push(lle(t));if(t.l!==r)throw new Error("MulRK read error");var a=t.read_shift(2);if(s.length!=a-i+1)throw new Error("MulRK length mismatch");return{r:n,c:i,C:a,rkrec:s}}function rWe(t,e){for(var r=t.l+e-2,n=t.read_shift(2),i=t.read_shift(2),s=[];t.l<r;)s.push(t.read_shift(2));if(t.l!==r)throw new Error("MulBlank read error");var a=t.read_shift(2);if(s.length!=a-i+1)throw new Error("MulBlank length mismatch");return{r:n,c:i,C:a,ixfe:s}}function nWe(t,e,r,n){var i={},s=t.read_shift(4),a=t.read_shift(4),o=t.read_shift(4),c=t.read_shift(2);return i.patternType=Fze[o>>26],n.cellStyles&&(i.alc=s&7,i.fWrap=s>>3&1,i.alcV=s>>4&7,i.fJustLast=s>>7&1,i.trot=s>>8&255,i.cIndent=s>>16&15,i.fShrinkToFit=s>>20&1,i.iReadOrder=s>>22&2,i.fAtrNum=s>>26&1,i.fAtrFnt=s>>27&1,i.fAtrAlc=s>>28&1,i.fAtrBdr=s>>29&1,i.fAtrPat=s>>30&1,i.fAtrProt=s>>31&1,i.dgLeft=a&15,i.dgRight=a>>4&15,i.dgTop=a>>8&15,i.dgBottom=a>>12&15,i.icvLeft=a>>16&127,i.icvRight=a>>23&127,i.grbitDiag=a>>30&3,i.icvTop=o&127,i.icvBottom=o>>7&127,i.icvDiag=o>>14&127,i.dgDiag=o>>21&15,i.icvFore=c&127,i.icvBack=c>>7&127,i.fsxButton=c>>14&1),i}function iWe(t,e,r){var n={};return n.ifnt=t.read_shift(2),n.numFmtId=t.read_shift(2),n.flags=t.read_shift(2),n.fStyle=n.flags>>2&1,e-=6,n.data=nWe(t,e,n.fStyle,r),n}function KH(t,e,r,n){var i=r&&r.biff==5;n||(n=Ne(i?16:20)),n.write_shift(2,0),t.style?(n.write_shift(2,t.numFmtId||0),n.write_shift(2,65524)):(n.write_shift(2,t.numFmtId||0),n.write_shift(2,e<<4));var s=0;return t.numFmtId>0&&i&&(s|=1024),n.write_shift(4,s),n.write_shift(4,0),i||n.write_shift(4,0),n.write_shift(2,0),n}function sWe(t){t.l+=4;var e=[t.read_shift(2),t.read_shift(2)];if(e[0]!==0&&e[0]--,e[1]!==0&&e[1]--,e[0]>7||e[1]>7)throw new Error("Bad Gutters: "+e.join("|"));return e}function aWe(t){var e=Ne(8);return e.write_shift(4,0),e.write_shift(2,0),e.write_shift(2,0),e}function XH(t,e,r){var n=Al(t);(r.biff==2||e==9)&&++t.l;var i=lHe(t);return n.val=i,n.t=i===!0||i===!1?"b":"e",n}function oWe(t,e,r,n,i,s){var a=Ne(8);return Wh(t,e,n,a),sle(r,s,a),a}function cWe(t,e,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=Al(t),i=Rs(t);return n.val=i,n}function lWe(t,e,r,n){var i=Ne(14);return Wh(t,e,n,i),zh(r,i),i}var YH=bHe;function uWe(t,e,r){var n=t.l+e,i=t.read_shift(2),s=t.read_shift(2);if(r.sbcch=s,s==1025||s==14849)return[s,i];if(s<1||s>255)throw new Error("Unexpected SupBook type: "+s);for(var a=Hh(t,s),o=[];n>t.l;)o.push(Zy(t));return[s,i,a,o]}function ZH(t,e,r){var n=t.read_shift(2),i,s={fBuiltIn:n&1,fWantAdvise:n>>>1&1,fWantPict:n>>>2&1,fOle:n>>>3&1,fOleLink:n>>>4&1,cf:n>>>5&1023,fIcon:n>>>15&1};return r.sbcch===14849&&(i=_He(t,e-2,r)),s.body=i||t.read_shift(e-2),typeof i=="string"&&(s.Name=i),s}function JH(t,e,r){var n=t.l+e,i=t.read_shift(2),s=t.read_shift(1),a=t.read_shift(1),o=t.read_shift(r&&r.biff==2?1:2),c=0;(!r||r.biff>=5)&&(r.biff!=5&&(t.l+=2),c=t.read_shift(2),r.biff==5&&(t.l+=2),t.l+=4);var u=Hh(t,a,r);i&32&&(u=dD[u.charCodeAt(0)]);var l=n-t.l;r&&r.biff==2&&--l;var f=n==t.l||o===0||!(l>0)?[]:DYe(t,l,r,o);return{chKey:s,Name:u,itab:c,rgce:f}}function hle(t,e,r){if(r.biff<8)return fWe(t,e,r);for(var n=[],i=t.l+e,s=t.read_shift(r.biff>8?4:2);s--!==0;)n.push(wHe(t,r.biff>8?12:6,r));if(t.l!=i)throw new Error("Bad ExternSheet: "+t.l+" != "+i);return n}function fWe(t,e,r){t[t.l+1]==3&&t[t.l]++;var n=Yy(t,e,r);return n.charCodeAt(0)==3?n.slice(1):n}function dWe(t,e,r){if(r.biff<8){t.l+=e;return}var n=t.read_shift(2),i=t.read_shift(2),s=Hh(t,n,r),a=Hh(t,i,r);return[s,a]}function hWe(t,e,r){var n=fle(t);t.l++;var i=t.read_shift(1);return e-=8,[MYe(t,e,r),i,n]}function QH(t,e,r){var n=xHe(t);switch(r.biff){case 2:t.l++,e-=7;break;case 3:case 4:t.l+=2,e-=8;break;default:t.l+=6,e-=12}return[n,OYe(t,e,r)]}function pWe(t){var e=t.read_shift(4)!==0,r=t.read_shift(4)!==0,n=t.read_shift(4);return[e,r,n]}function mWe(t,e,r){if(!(r.biff<8)){var n=t.read_shift(2),i=t.read_shift(2),s=t.read_shift(2),a=t.read_shift(2),o=D0(t,0,r);return r.biff<8&&t.read_shift(1),[{r:n,c:i},o,a,s]}}function gWe(t,e,r){return mWe(t,e,r)}function vWe(t,e){for(var r=[],n=t.read_shift(2);n--;)r.push(B5(t));return r}function yWe(t){var e=Ne(2+t.length*8);e.write_shift(2,t.length);for(var r=0;r<t.length;++r)ule(t[r],e);return e}function bWe(t,e,r){if(r&&r.biff<8)return _We(t,e,r);var n=dle(t),i=THe(t,e-22,n[1]);return{cmo:n,ft:i}}var wWe={8:function(t,e){var r=t.l+e;t.l+=10;var n=t.read_shift(2);t.l+=4,t.l+=2,t.l+=2,t.l+=2,t.l+=4;var i=t.read_shift(1);return t.l+=i,t.l=r,{fmt:n}}};function _We(t,e,r){t.l+=4;var n=t.read_shift(2),i=t.read_shift(2),s=t.read_shift(2);t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=6,e-=36;var a=[];return a.push((wWe[n]||Fs)(t,e,r)),{cmo:[i,n,s],ft:a}}function xWe(t,e,r){var n=t.l,i="";try{t.l+=4;var s=(r.lastobj||{cmo:[0,0]}).cmo[1],a;[0,5,7,11,12,14].indexOf(s)==-1?t.l+=6:a=dHe(t,6,r);var o=t.read_shift(2);t.read_shift(2),ii(t,2);var c=t.read_shift(2);t.l+=c;for(var u=1;u<t.lens.length-1;++u){if(t.l-n!=t.lens[u])throw new Error("TxO: bad continue record");var l=t[t.l],f=Hh(t,t.lens[u+1]-t.lens[u]-1);if(i+=f,i.length>=(l?o:2*o))break}if(i.length!==o&&i.length!==o*2)throw new Error("cchText: "+o+" != "+i.length);return t.l=n+e,{t:i}}catch{return t.l=n+e,{t:i}}}function SWe(t,e){var r=B5(t);t.l+=16;var n=gHe(t,e-24);return[r,n]}function EWe(t){var e=Ne(24),r=Xr(t[0]);e.write_shift(2,r.r),e.write_shift(2,r.r),e.write_shift(2,r.c),e.write_shift(2,r.c);for(var n="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),i=0;i<16;++i)e.write_shift(1,parseInt(n[i],16));return wi([e,vHe(t[1])])}function kWe(t,e){t.read_shift(2);var r=B5(t),n=t.read_shift((e-10)/2,"dbcs-cont");return n=n.replace(ea,""),[r,n]}function TWe(t){var e=t[1].Tooltip,r=Ne(10+2*(e.length+1));r.write_shift(2,2048);var n=Xr(t[0]);r.write_shift(2,n.r),r.write_shift(2,n.r),r.write_shift(2,n.c),r.write_shift(2,n.c);for(var i=0;i<e.length;++i)r.write_shift(2,e.charCodeAt(i));return r.write_shift(2,0),r}function AWe(t){var e=[0,0],r;return r=t.read_shift(2),e[0]=FH[r]||r,r=t.read_shift(2),e[1]=FH[r]||r,e}function CWe(t){return t||(t=Ne(4)),t.write_shift(2,1),t.write_shift(2,1),t}function IWe(t){for(var e=t.read_shift(2),r=[];e-- >0;)r.push(cle(t));return r}function PWe(t){for(var e=t.read_shift(2),r=[];e-- >0;)r.push(cle(t));return r}function RWe(t){t.l+=2;var e={cxfs:0,crc:0};return e.cxfs=t.read_shift(2),e.crc=t.read_shift(4),e}function ple(t,e,r){if(!r.cellStyles)return Fs(t,e);var n=r&&r.biff>=12?4:2,i=t.read_shift(n),s=t.read_shift(n),a=t.read_shift(n),o=t.read_shift(n),c=t.read_shift(2);n==2&&(t.l+=2);var u={s:i,e:s,w:a,ixfe:o,flags:c};return(r.biff>=5||!r.biff)&&(u.level=c>>8&7),u}function OWe(t,e){var r=Ne(12);r.write_shift(2,e),r.write_shift(2,e),r.write_shift(2,t.width*256),r.write_shift(2,0);var n=0;return t.hidden&&(n|=1),r.write_shift(1,n),n=t.level||0,r.write_shift(1,n),r.write_shift(2,0),r}function BWe(t,e){var r={};return e<32||(t.l+=16,r.header=Rs(t),r.footer=Rs(t),t.l+=2),r}function DWe(t,e,r){var n={area:!1};if(r.biff!=5)return t.l+=e,n;var i=t.read_shift(1);return t.l+=3,i&16&&(n.area=!0),n}function MWe(t){for(var e=Ne(2*t),r=0;r<t;++r)e.write_shift(2,r+1);return e}var NWe=Al,FWe=ile,LWe=Zy;function $We(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(4),i={fmt:e,env:r,len:n,data:t.slice(t.l,t.l+n)};return t.l+=n,i}function UWe(t,e,r){r.biffguess&&r.biff==5&&(r.biff=2);var n=Al(t);++t.l;var i=D0(t,e-7,r);return n.t="str",n.val=i,n}function jWe(t){var e=Al(t);++t.l;var r=Rs(t);return e.t="n",e.val=r,e}function VWe(t,e,r){var n=Ne(15);return t2(n,t,e),n.write_shift(8,r,"f"),n}function qWe(t){var e=Al(t);++t.l;var r=t.read_shift(2);return e.t="n",e.val=r,e}function zWe(t,e,r){var n=Ne(9);return t2(n,t,e),n.write_shift(2,r),n}function HWe(t){var e=t.read_shift(1);return e===0?(t.l++,""):t.read_shift(e,"sbcs-cont")}function WWe(t,e){t.l+=6,t.l+=2,t.l+=1,t.l+=3,t.l+=1,t.l+=e-13}function GWe(t,e,r){var n=t.l+e,i=Al(t),s=t.read_shift(2),a=Hh(t,s,r);return t.l=n,i.t="str",i.val=a,i}var KWe=[2,3,48,49,131,139,140,245],$I=function(){var t={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},e=I5({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(o,c){var u=[],l=Zf(1);switch(c.type){case"base64":l=Js(Qa(o));break;case"binary":l=Js(o);break;case"buffer":case"array":l=o;break}Pi(l,0);var f=l.read_shift(1),d=!!(f&136),h=!1,m=!1;switch(f){case 2:break;case 3:break;case 48:h=!0,d=!0;break;case 49:h=!0,d=!0;break;case 131:break;case 139:break;case 140:m=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+f.toString(16))}var p=0,g=521;f==2&&(p=l.read_shift(2)),l.l+=3,f!=2&&(p=l.read_shift(4)),p>1048576&&(p=1e6),f!=2&&(g=l.read_shift(2));var v=l.read_shift(2);c.codepage,f!=2&&(l.l+=16,l.read_shift(1),l[l.l]!==0&&t[l[l.l]],l.l+=1,l.l+=2),m&&(l.l+=36);for(var y=[],b={},_=Math.min(l.length,f==2?521:g-10-(h?264:0)),x=m?32:11;l.l<_&&l[l.l]!=13;)switch(b={},b.name=gl(l.slice(l.l,l.l+x)).replace(/[\u0000\r\n].*$/g,""),l.l+=x,b.type=String.fromCharCode(l.read_shift(1)),f!=2&&!m&&(b.offset=l.read_shift(4)),b.len=l.read_shift(1),f==2&&(b.offset=l.read_shift(2)),b.dec=l.read_shift(1),b.name.length&&y.push(b),f!=2&&(l.l+=m?13:14),b.type){case"B":(!h||b.len!=8)&&c.WTF&&console.log("Skipping "+b.name+":"+b.type);break;case"G":case"P":c.WTF&&console.log("Skipping "+b.name+":"+b.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+b.type)}if(l[l.l]!==13&&(l.l=g-1),l.read_shift(1)!==13)throw new Error("DBF Terminator not found "+l.l+" "+l[l.l]);l.l=g;var E=0,k=0;for(u[0]=[],k=0;k!=y.length;++k)u[0][k]=y[k].name;for(;p-- >0;){if(l[l.l]===42){l.l+=v;continue}for(++l.l,u[++E]=[],k=0,k=0;k!=y.length;++k){var B=l.slice(l.l,l.l+y[k].len);l.l+=y[k].len,Pi(B,0);var D=gl(B);switch(y[k].type){case"C":D.trim().length&&(u[E][k]=D.replace(/\s+$/,""));break;case"D":D.length===8?u[E][k]=new Date(+D.slice(0,4),+D.slice(4,6)-1,+D.slice(6,8)):u[E][k]=D;break;case"F":u[E][k]=parseFloat(D.trim());break;case"+":case"I":u[E][k]=m?B.read_shift(-4,"i")^2147483648:B.read_shift(4,"i");break;case"L":switch(D.trim().toUpperCase()){case"Y":case"T":u[E][k]=!0;break;case"N":case"F":u[E][k]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+D+"|")}break;case"M":if(!d)throw new Error("DBF Unexpected MEMO for type "+f.toString(16));u[E][k]="##MEMO##"+(m?parseInt(D.trim(),10):B.read_shift(4));break;case"N":D=D.replace(/\u0000/g,"").trim(),D&&D!="."&&(u[E][k]=+D||0);break;case"@":u[E][k]=new Date(B.read_shift(-8,"f")-621356832e5);break;case"T":u[E][k]=new Date((B.read_shift(4)-2440588)*864e5+B.read_shift(4));break;case"Y":u[E][k]=B.read_shift(4,"i")/1e4+B.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":u[E][k]=-B.read_shift(-8,"f");break;case"B":if(h&&y[k].len==8){u[E][k]=B.read_shift(8,"f");break}case"G":case"P":B.l+=y[k].len;break;case"0":if(y[k].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+y[k].type)}}}if(f!=2&&l.l<l.length&&l[l.l++]!=26)throw new Error("DBF EOF Marker missing "+(l.l-1)+" of "+l.length+" "+l[l.l-1].toString(16));return c&&c.sheetRows&&(u=u.slice(0,c.sheetRows)),c.DBF=y,u}function n(o,c){var u=c||{};u.dateNF||(u.dateNF="yyyymmdd");var l=lm(r(o,u),u);return l["!cols"]=u.DBF.map(function(f){return{wch:f.len,DBF:f}}),delete u.DBF,l}function i(o,c){try{var u=vd(n(o,c),c);return u.bookType="dbf",u}catch(l){if(c&&c.WTF)throw l}return{SheetNames:[],Sheets:{}}}var s={B:8,C:250,L:1,D:8,"?":0,"":0};function a(o,c){var u=c||{},l=bo;if(+u.codepage>=0&&nc(+u.codepage),u.type=="string")throw new Error("Cannot write DBF to JS string");var f=_a(),d=n6(o,{header:1,raw:!0,cellDates:!0}),h=d[0],m=d.slice(1),p=o["!cols"]||[],g=0,v=0,y=0,b=1;for(g=0;g<h.length;++g){if(((p[g]||{}).DBF||{}).name){h[g]=p[g].DBF.name,++y;continue}if(h[g]!=null){if(++y,typeof h[g]=="number"&&(h[g]=h[g].toString(10)),typeof h[g]!="string")throw new Error("DBF Invalid column name "+h[g]+" |"+typeof h[g]+"|");if(h.indexOf(h[g])!==g){for(v=0;v<1024;++v)if(h.indexOf(h[g]+"_"+v)==-1){h[g]+="_"+v;break}}}}var _=Er(o["!ref"]),x=[],E=[],k=[];for(g=0;g<=_.e.c-_.s.c;++g){var B="",D="",z=0,U=[];for(v=0;v<m.length;++v)m[v][g]!=null&&U.push(m[v][g]);if(U.length==0||h[g]==null){x[g]="?";continue}for(v=0;v<U.length;++v){switch(typeof U[v]){case"number":D="B";break;case"string":D="C";break;case"boolean":D="L";break;case"object":D=U[v]instanceof Date?"D":"C";break;default:D="C"}z=Math.max(z,String(U[v]).length),B=B&&B!=D?"C":D}z>250&&(z=250),D=((p[g]||{}).DBF||{}).type,D=="C"&&p[g].DBF.len>z&&(z=p[g].DBF.len),B=="B"&&D=="N"&&(B="N",k[g]=p[g].DBF.dec,z=p[g].DBF.len),E[g]=B=="C"||D=="N"?z:s[B]||0,b+=E[g],x[g]=B}var S=f.next(32);for(S.write_shift(4,318902576),S.write_shift(4,m.length),S.write_shift(2,296+32*y),S.write_shift(2,b),g=0;g<4;++g)S.write_shift(4,0);var T=+e[bo]||3;for(S.write_shift(4,0|T<<8),t[T]!=+u.codepage&&(u.codepage&&console.error("DBF Unsupported codepage "+bo+", using 1252"),bo=1252),g=0,v=0;g<h.length;++g)if(h[g]!=null){var w=f.next(32),A=(h[g].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);w.write_shift(1,A,"sbcs"),w.write_shift(1,x[g]=="?"?"C":x[g],"sbcs"),w.write_shift(4,v),w.write_shift(1,E[g]||s[x[g]]||0),w.write_shift(1,k[g]||0),w.write_shift(1,2),w.write_shift(4,0),w.write_shift(1,0),w.write_shift(4,0),w.write_shift(4,0),v+=E[g]||s[x[g]]||0}var F=f.next(264);for(F.write_shift(4,13),g=0;g<65;++g)F.write_shift(4,0);for(g=0;g<m.length;++g){var P=f.next(b);for(P.write_shift(1,0),v=0;v<h.length;++v)if(h[v]!=null)switch(x[v]){case"L":P.write_shift(1,m[g][v]==null?63:m[g][v]?84:70);break;case"B":P.write_shift(8,m[g][v]||0,"f");break;case"N":var O="0";for(typeof m[g][v]=="number"&&(O=m[g][v].toFixed(k[v]||0)),O.length>E[v]&&(O=O.slice(0,E[v])),y=0;y<E[v]-O.length;++y)P.write_shift(1,32);P.write_shift(1,O,"sbcs");break;case"D":m[g][v]?(P.write_shift(4,("0000"+m[g][v].getFullYear()).slice(-4),"sbcs"),P.write_shift(2,("00"+(m[g][v].getMonth()+1)).slice(-2),"sbcs"),P.write_shift(2,("00"+m[g][v].getDate()).slice(-2),"sbcs")):P.write_shift(8,"00000000","sbcs");break;case"C":var R=P.l,I=String(m[g][v]!=null?m[g][v]:"").slice(0,E[v]);for(P.write_shift(1,I,"cpstr"),R+=E[v]-P.l,y=0;y<R;++y)P.write_shift(1,32);break}}return bo=l,f.next(1).write_shift(1,26),f.end()}return{to_workbook:i,to_sheet:n,from_sheet:a}}(),mle=function(){var t={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},e=new RegExp("\x1BN("+jn(t).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(f,d){var h=t[d];return typeof h=="number"?lH(h):h},n=function(f,d,h){var m=d.charCodeAt(0)-32<<4|h.charCodeAt(0)-48;return m==59?f:lH(m)};t["|"]=254;function i(f,d){switch(d.type){case"base64":return s(Qa(f),d);case"binary":return s(f,d);case"buffer":return s(mr&&Buffer.isBuffer(f)?f.toString("binary"):gl(f),d);case"array":return s(qh(f),d)}throw new Error("Unrecognized type "+d.type)}function s(f,d){var h=f.split(/[\n\r]+/),m=-1,p=-1,g=0,v=0,y=[],b=[],_=null,x={},E=[],k=[],B=[],D=0,z,U={Workbook:{WBProps:{},Names:[]}};for(+d.codepage>=0&&nc(+d.codepage);g!==h.length;++g){D=0;var S=h[g].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,n).replace(e,r),T=S.replace(/;;/g,"\0").split(";").map(function(G){return G.replace(/\u0000/g,";")}),w=T[0],A;if(S.length>0)switch(w){case"ID":break;case"E":break;case"B":break;case"O":for(v=1;v<T.length;++v)switch(T[v].charAt(0)){case"V":{var F=parseInt(T[v].slice(1),10);F>=1&&F<=4&&(U.Workbook.WBProps.date1904=!0)}break}break;case"W":break;case"P":switch(T[1].charAt(0)){case"P":b.push(S.slice(3).replace(/;;/g,";"));break}break;case"NN":{var P={Sheet:0};for(v=1;v<T.length;++v)switch(T[v].charAt(0)){case"N":P.Name=T[v].slice(1);break;case"E":P.Ref=(d&&d.sheet||"Sheet1")+"!"+_h(T[v].slice(1));break}U.Workbook.Names.push(P)}break;case"C":var O=!1,R=!1,I=!1,C=!1,M=-1,L=-1,N="",H="z";for(v=1;v<T.length;++v)switch(T[v].charAt(0)){case"A":break;case"X":p=parseInt(T[v].slice(1),10)-1,R=!0;break;case"Y":for(m=parseInt(T[v].slice(1),10)-1,R||(p=0),z=y.length;z<=m;++z)y[z]=[];break;case"K":A=T[v].slice(1),A.charAt(0)==='"'?(A=A.slice(1,A.length-1),H="s"):A==="TRUE"||A==="FALSE"?(A=A==="TRUE",H="b"):isNaN(Za(A))?isNaN(lp(A).getDate())||(A=Hn(A),H="d",d.cellDates||(H="n",A=xi(A,U.Workbook.WBProps.date1904))):(A=Za(A),H="n",_!==null&&C0(_)&&d.cellDates&&(A=R5(U.Workbook.WBProps.date1904?A+1462:A),H="d")),O=!0;break;case"E":C=!0,N=_h(T[v].slice(1),{r:m,c:p});break;case"S":I=!0;break;case"G":break;case"R":M=parseInt(T[v].slice(1),10)-1;break;case"C":L=parseInt(T[v].slice(1),10)-1;break;default:if(d&&d.WTF)throw new Error("SYLK bad record "+S)}if(O&&(y[m][p]?(y[m][p].t=H,y[m][p].v=A):y[m][p]={t:H,v:A},_&&(y[m][p].z=_),d.cellText!==!1&&_&&(y[m][p].w=eo(y[m][p].z,y[m][p].v,{date1904:U.Workbook.WBProps.date1904})),_=null),I){if(C)throw new Error("SYLK shared formula cannot have own formula");var W=M>-1&&y[M][L];if(!W||!W[1])throw new Error("SYLK shared formula cannot find base");N=Ale(W[1],{r:m-M,c:p-L})}N&&(y[m][p]?y[m][p].f=N:y[m][p]={t:"n",f:N});break;case"F":var q=0;for(v=1;v<T.length;++v)switch(T[v].charAt(0)){case"X":p=parseInt(T[v].slice(1),10)-1,++q;break;case"Y":for(m=parseInt(T[v].slice(1),10)-1,z=y.length;z<=m;++z)y[z]=[];break;case"M":D=parseInt(T[v].slice(1),10)/20;break;case"F":break;case"G":break;case"P":_=b[parseInt(T[v].slice(1),10)];break;case"S":break;case"D":break;case"N":break;case"W":for(B=T[v].slice(1).split(" "),z=parseInt(B[0],10);z<=parseInt(B[1],10);++z)D=parseInt(B[2],10),k[z-1]=D===0?{hidden:!0}:{wch:D};break;case"C":p=parseInt(T[v].slice(1),10)-1,k[p]||(k[p]={});break;case"R":m=parseInt(T[v].slice(1),10)-1,E[m]||(E[m]={}),D>0?(E[m].hpt=D,E[m].hpx=fp(D)):D===0&&(E[m].hidden=!0);break;default:if(d&&d.WTF)throw new Error("SYLK bad record "+S)}q<1&&(_=null);break;default:if(d&&d.WTF)throw new Error("SYLK bad record "+S)}}return E.length>0&&(x["!rows"]=E),k.length>0&&(x["!cols"]=k),k.forEach(function(G){Jf(G)}),d&&d.sheetRows&&(y=y.slice(0,d.sheetRows)),[y,x,U]}function a(f,d){var h=i(f,d),m=h[0],p=h[1],g=h[2],v=wn(d);v.date1904=(((g||{}).Workbook||{}).WBProps||{}).date1904;var y=lm(m,v);jn(p).forEach(function(_){y[_]=p[_]});var b=vd(y,d);return jn(g).forEach(function(_){b[_]=g[_]}),b.bookType="sylk",b}function o(f,d,h,m){var p="C;Y"+(h+1)+";X"+(m+1)+";K";switch(f.t){case"n":p+=f.v||0,f.f&&!f.F&&(p+=";E"+D5(f.f,{r:h,c:m}));break;case"b":p+=f.v?"TRUE":"FALSE";break;case"e":p+=f.w||f.v;break;case"d":p+='"'+(f.w||f.v)+'"';break;case"s":p+='"'+(f.v==null?"":String(f.v)).replace(/"/g,"").replace(/;/g,";;")+'"';break}return p}function c(f,d){d.forEach(function(h,m){var p="F;W"+(m+1)+" "+(m+1)+" ";h.hidden?p+="0":(typeof h.width=="number"&&!h.wpx&&(h.wpx=Mv(h.width)),typeof h.wpx=="number"&&!h.wch&&(h.wch=Nv(h.wpx)),typeof h.wch=="number"&&(p+=Math.round(h.wch))),p.charAt(p.length-1)!=" "&&f.push(p)})}function u(f,d){d.forEach(function(h,m){var p="F;";h.hidden?p+="M0;":h.hpt?p+="M"+20*h.hpt+";":h.hpx&&(p+="M"+20*Fv(h.hpx)+";"),p.length>2&&f.push(p+"R"+(m+1))})}function l(f,d,h){var m=["ID;PSheetJS;N;E"],p=[],g=Er(f["!ref"]),v,y=f["!data"]!=null,b=`\r
`,_=(((h||{}).Workbook||{}).WBProps||{}).date1904;m.push("P;PGeneral"),m.push("F;P0;DG0G8;M255"),f["!cols"]&&c(m,f["!cols"]),f["!rows"]&&u(m,f["!rows"]),m.push("B;Y"+(g.e.r-g.s.r+1)+";X"+(g.e.c-g.s.c+1)+";D"+[g.s.c,g.s.r,g.e.c,g.e.r].join(" ")),m.push("O;L;D;B"+(_?";V4":"")+";K47;G100 0.001");for(var x=g.s.r;x<=g.e.r;++x)if(!(y&&!f["!data"][x])){for(var E=[],k=g.s.c;k<=g.e.c;++k)v=y?f["!data"][x][k]:f[or(k)+xr(x)],!(!v||v.v==null&&(!v.f||v.F))&&E.push(o(v,f,x,k));p.push(E.join(b))}return m.join(b)+b+p.join(b)+b+"E"+b}return{to_workbook:a,from_sheet:l}}(),gle=function(){function t(o,c){switch(c.type){case"base64":return e(Qa(o),c);case"binary":return e(o,c);case"buffer":return e(mr&&Buffer.isBuffer(o)?o.toString("binary"):gl(o),c);case"array":return e(qh(o),c)}throw new Error("Unrecognized type "+c.type)}function e(o,c){for(var u=o.split(`
`),l=-1,f=-1,d=0,h=[];d!==u.length;++d){if(u[d].trim()==="BOT"){h[++l]=[],f=0;continue}if(!(l<0)){var m=u[d].trim().split(","),p=m[0],g=m[1];++d;for(var v=u[d]||"";(v.match(/["]/g)||[]).length&1&&d<u.length-1;)v+=`
`+u[++d];switch(v=v.trim(),+p){case-1:if(v==="BOT"){h[++l]=[],f=0;continue}else if(v!=="EOD")throw new Error("Unrecognized DIF special command "+v);break;case 0:v==="TRUE"?h[l][f]=!0:v==="FALSE"?h[l][f]=!1:isNaN(Za(g))?isNaN(lp(g).getDate())?h[l][f]=g:h[l][f]=Hn(g):h[l][f]=Za(g),++f;break;case 1:v=v.slice(1,v.length-1),v=v.replace(/""/g,'"'),v&&v.match(/^=".*"$/)&&(v=v.slice(2,-1)),h[l][f++]=v!==""?v:null;break}if(v==="EOD")break}}return c&&c.sheetRows&&(h=h.slice(0,c.sheetRows)),h}function r(o,c){return lm(t(o,c),c)}function n(o,c){var u=vd(r(o,c),c);return u.bookType="dif",u}function i(o,c){return"0,"+String(o)+`\r
`+c}function s(o){return`1,0\r
"`+o.replace(/"/g,'""')+'"'}function a(o){for(var c=Er(o["!ref"]),u=o["!data"]!=null,l=[`TABLE\r
0,1\r
"sheetjs"\r
`,`VECTORS\r
0,`+(c.e.r-c.s.r+1)+`\r
""\r
`,`TUPLES\r
0,`+(c.e.c-c.s.c+1)+`\r
""\r
`,`DATA\r
0,0\r
""\r
`],f=c.s.r;f<=c.e.r;++f){for(var d=u?o["!data"][f]:[],h=`-1,0\r
BOT\r
`,m=c.s.c;m<=c.e.c;++m){var p=u?d&&d[m]:o[pr({r:f,c:m})];if(p==null){h+=`1,0\r
""\r
`;continue}switch(p.t){case"n":p.w!=null?h+="0,"+p.w+`\r
V`:p.v!=null?h+=i(p.v,"V"):p.f!=null&&!p.F?h+=s("="+p.f):h+=`1,0\r
""`;break;case"b":h+=p.v?i(1,"TRUE"):i(0,"FALSE");break;case"s":h+=s(isNaN(+p.v)?p.v:'="'+p.v+'"');break;case"d":p.w||(p.w=eo(p.z||Bt[14],xi(Hn(p.v)))),h+=i(p.w,"V");break;default:h+=`1,0\r
""`}h+=`\r
`}l.push(h)}return l.join("")+`-1,0\r
EOD`}return{to_workbook:n,to_sheet:r,from_sheet:a}}(),vle=function(){function t(f){return f.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function e(f){return f.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(f,d){for(var h=f.split(`
`),m=-1,p=-1,g=0,v=[];g!==h.length;++g){var y=h[g].trim().split(":");if(y[0]==="cell"){var b=Xr(y[1]);if(v.length<=b.r)for(m=v.length;m<=b.r;++m)v[m]||(v[m]=[]);switch(m=b.r,p=b.c,y[2]){case"t":v[m][p]=t(y[3]);break;case"v":v[m][p]=+y[3];break;case"vtf":var _=y[y.length-1];case"vtc":switch(y[3]){case"nl":v[m][p]=!!+y[4];break;default:v[m][p]=+y[4];break}y[2]=="vtf"&&(v[m][p]=[v[m][p],_])}}}return d&&d.sheetRows&&(v=v.slice(0,d.sheetRows)),v}function n(f,d){return lm(r(f,d),d)}function i(f,d){return vd(n(f,d),d)}var s=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),a=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,o=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),c="--SocialCalcSpreadsheetControlSave--";function u(f){if(!f||!f["!ref"])return"";for(var d=[],h=[],m,p="",g=Fi(f["!ref"]),v=f["!data"]!=null,y=g.s.r;y<=g.e.r;++y)for(var b=g.s.c;b<=g.e.c;++b)if(p=pr({r:y,c:b}),m=v?(f["!data"][y]||[])[b]:f[p],!(!m||m.v==null||m.t==="z")){switch(h=["cell",p,"t"],m.t){case"s":case"str":h.push(e(m.v));break;case"n":m.f?(h[2]="vtf",h[3]="n",h[4]=m.v,h[5]=e(m.f)):(h[2]="v",h[3]=m.v);break;case"b":h[2]="vt"+(m.f?"f":"c"),h[3]="nl",h[4]=m.v?"1":"0",h[5]=e(m.f||(m.v?"TRUE":"FALSE"));break;case"d":var _=xi(Hn(m.v));h[2]="vtc",h[3]="nd",h[4]=""+_,h[5]=m.w||eo(m.z||Bt[14],_);break;case"e":continue}d.push(h.join(":"))}return d.push("sheet:c:"+(g.e.c-g.s.c+1)+":r:"+(g.e.r-g.s.r+1)+":tvf:1"),d.push("valueformat:1:text-wiki"),d.join(`
`)}function l(f){return[s,a,o,a,u(f),c].join(`
`)}return{to_workbook:i,to_sheet:n,from_sheet:l}}(),up=function(){function t(l,f,d,h,m){m.raw?f[d][h]=l:l===""||(l==="TRUE"?f[d][h]=!0:l==="FALSE"?f[d][h]=!1:isNaN(Za(l))?isNaN(lp(l).getDate())?f[d][h]=l:f[d][h]=Hn(l):f[d][h]=Za(l))}function e(l,f){var d=f||{},h=[];if(!l||l.length===0)return h;for(var m=l.split(/[\r\n]/),p=m.length-1;p>=0&&m[p].length===0;)--p;for(var g=10,v=0,y=0;y<=p;++y)v=m[y].indexOf(" "),v==-1?v=m[y].length:v++,g=Math.max(g,v);for(y=0;y<=p;++y){h[y]=[];var b=0;for(t(m[y].slice(0,g).trim(),h,y,b,d),b=1;b<=(m[y].length-g)/10+1;++b)t(m[y].slice(g+(b-1)*10,g+b*10).trim(),h,y,b,d)}return d.sheetRows&&(h=h.slice(0,d.sheetRows)),h}var r={44:",",9:"	",59:";",124:"|"},n={44:3,9:2,59:1,124:0};function i(l){for(var f={},d=!1,h=0,m=0;h<l.length;++h)(m=l.charCodeAt(h))==34?d=!d:!d&&m in r&&(f[m]=(f[m]||0)+1);m=[];for(h in f)Object.prototype.hasOwnProperty.call(f,h)&&m.push([f[h],h]);if(!m.length){f=n;for(h in f)Object.prototype.hasOwnProperty.call(f,h)&&m.push([f[h],h])}return m.sort(function(p,g){return p[0]-g[0]||n[p[1]]-n[g[1]]}),r[m.pop()[1]]||44}function s(l,f){var d=f||{},h="",m={};d.dense&&(m["!data"]=[]);var p={s:{c:0,r:0},e:{c:0,r:0}};l.slice(0,4)=="sep="?l.charCodeAt(5)==13&&l.charCodeAt(6)==10?(h=l.charAt(4),l=l.slice(7)):l.charCodeAt(5)==13||l.charCodeAt(5)==10?(h=l.charAt(4),l=l.slice(6)):h=i(l.slice(0,1024)):d&&d.FS?h=d.FS:h=i(l.slice(0,1024));var g=0,v=0,y=0,b=0,_=0,x=h.charCodeAt(0),E=!1,k=0,B=l.charCodeAt(0),D=d.dateNF!=null?Oqe(d.dateNF):null;function z(){var U=l.slice(b,_);U.slice(-1)=="\r"&&(U=U.slice(0,-1));var S={};if(U.charAt(0)=='"'&&U.charAt(U.length-1)=='"'&&(U=U.slice(1,-1).replace(/""/g,'"')),U.length===0)S.t="z";else if(d.raw)S.t="s",S.v=U;else if(U.trim().length===0)S.t="s",S.v=U;else if(U.charCodeAt(0)==61)U.charCodeAt(1)==34&&U.charCodeAt(U.length-1)==34?(S.t="s",S.v=U.slice(2,-1).replace(/""/g,'"')):yXe(U)?(S.t="n",S.f=U.slice(1)):(S.t="s",S.v=U);else if(U=="TRUE")S.t="b",S.v=!0;else if(U=="FALSE")S.t="b",S.v=!1;else if(!isNaN(y=Za(U)))S.t="n",d.cellText!==!1&&(S.w=U),S.v=y;else if(!isNaN((y=lp(U)).getDate())||D&&U.match(D)){S.z=d.dateNF||Bt[14];var T=0;D&&U.match(D)&&(U=Bqe(U,d.dateNF,U.match(D)||[]),T=1,y=Hn(U,T)),d.cellDates?(S.t="d",S.v=y):(S.t="n",S.v=xi(y)),d.cellText!==!1&&(S.w=eo(S.z,S.v instanceof Date?xi(S.v):S.v)),d.cellNF||delete S.z}else S.t="s",S.v=U;if(S.t=="z"||(d.dense?(m["!data"][g]||(m["!data"][g]=[]),m["!data"][g][v]=S):m[pr({c:v,r:g})]=S),b=_+1,B=l.charCodeAt(b),p.e.c<v&&(p.e.c=v),p.e.r<g&&(p.e.r=g),k==x)++v;else if(v=0,++g,d.sheetRows&&d.sheetRows<=g)return!0}e:for(;_<l.length;++_)switch(k=l.charCodeAt(_)){case 34:B===34&&(E=!E);break;case 13:if(E)break;l.charCodeAt(_+1)==10&&++_;case x:case 10:if(!E&&z())break e;break}return _-b>0&&z(),m["!ref"]=Yt(p),m}function a(l,f){return!(f&&f.PRN)||f.FS||l.slice(0,4)=="sep="||l.indexOf("	")>=0||l.indexOf(",")>=0||l.indexOf(";")>=0?s(l,f):lm(e(l,f),f)}function o(l,f){var d="",h=f.type=="string"?[0,0,0,0]:AD(l,f);switch(f.type){case"base64":d=Qa(l);break;case"binary":d=l;break;case"buffer":f.codepage==65001?d=l.toString("utf8"):(f.codepage,d=mr&&Buffer.isBuffer(l)?l.toString("binary"):gl(l));break;case"array":d=qh(l);break;case"string":d=l;break;default:throw new Error("Unrecognized type "+f.type)}return h[0]==239&&h[1]==187&&h[2]==191?d=on(d.slice(3)):f.type!="string"&&f.type!="buffer"&&f.codepage==65001?d=on(d):f.type=="binary",d.slice(0,19)=="socialcalc:version:"?vle.to_sheet(f.type=="string"?d:on(d),f):a(d,f)}function c(l,f){return vd(o(l,f),f)}function u(l){for(var f=[],d=Er(l["!ref"]),h,m=l["!data"]!=null,p=d.s.r;p<=d.e.r;++p){for(var g=[],v=d.s.c;v<=d.e.c;++v){var y=pr({r:p,c:v});if(h=m?(l["!data"][p]||[])[v]:l[y],!h||h.v==null){g.push("          ");continue}for(var b=(h.w||(vl(h),h.w)||"").slice(0,10);b.length<10;)b+=" ";g.push(b+(v===0?" ":""))}f.push(g.join(""))}return f.join(`
`)}return{to_workbook:c,to_sheet:o,from_sheet:u}}();function XWe(t,e){var r=e||{},n=!!r.WTF;r.WTF=!0;try{var i=mle.to_workbook(t,r);return r.WTF=n,i}catch(s){if(r.WTF=n,!s.message.match(/SYLK bad record ID/)&&n)throw s;return up.to_workbook(t,e)}}var wh=function(){function t(N,H,W){if(N){Pi(N,N.l||0);for(var q=W.Enum||C;N.l<N.length;){var G=N.read_shift(2),Y=q[G]||q[65535],te=N.read_shift(2),Q=N.l+te,j=Y.f&&Y.f(N,te,W);if(N.l=Q,H(j,Y,G))return}}}function e(N,H){switch(H.type){case"base64":return r(Js(Qa(N)),H);case"binary":return r(Js(N),H);case"buffer":case"array":return r(N,H)}throw"Unsupported type "+H.type}function r(N,H){if(!N)return N;var W=H||{},q={},G="Sheet1",Y="",te=0,Q={},j=[],Z=[],V=[];W.dense&&(V=q["!data"]=[]);var ne={s:{r:0,c:0},e:{r:0,c:0}},se=W.sheetRows||0;if(N[4]==81&&N[5]==80&&N[6]==87)return L(N,H);if(N[2]==0&&(N[3]==8||N[3]==9)&&N.length>=16&&N[14]==5&&N[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(N[2]==2)W.Enum=C,t(N,function(le,ue,me){switch(me){case 0:W.vers=le,le>=4096&&(W.qpro=!0);break;case 255:W.vers=le,W.works=!0;break;case 6:ne=le;break;case 204:le&&(Y=le);break;case 222:Y=le;break;case 15:case 51:(!W.qpro&&!W.works||me==51)&&le[1].v.charCodeAt(0)<48&&(le[1].v=le[1].v.slice(1)),(W.works||W.works2)&&(le[1].v=le[1].v.replace(/\r\n/g,`
`));case 13:case 14:case 16:me==14&&(le[2]&112)==112&&(le[2]&15)>1&&(le[2]&15)<15&&(le[1].z=W.dateNF||Bt[14],W.cellDates&&(le[1].t="d",le[1].v=R5(le[1].v))),W.qpro&&le[3]>te&&(q["!ref"]=Yt(ne),Q[G]=q,j.push(G),q={},W.dense&&(V=q["!data"]=[]),ne={s:{r:0,c:0},e:{r:0,c:0}},te=le[3],G=Y||"Sheet"+(te+1),Y="");var be=W.dense?(V[le[0].r]||[])[le[0].c]:q[pr(le[0])];if(be){be.t=le[1].t,be.v=le[1].v,le[1].z!=null&&(be.z=le[1].z),le[1].f!=null&&(be.f=le[1].f);break}W.dense?(V[le[0].r]||(V[le[0].r]=[]),V[le[0].r][le[0].c]=le[1]):q[pr(le[0])]=le[1];break;case 21509:W.works2=!0;break}},W);else if(N[2]==26||N[2]==14)W.Enum=M,N[2]==14&&(W.qpro=!0,N.l=0),t(N,function(le,ue,me){switch(me){case 204:G=le;break;case 22:le[1].v.charCodeAt(0)<48&&(le[1].v=le[1].v.slice(1)),le[1].v=le[1].v.replace(/\x0F./g,function(be){return String.fromCharCode(be.charCodeAt(1)-32)}).replace(/\r\n/g,`
`);case 23:case 24:case 25:case 37:case 39:case 40:if(le[3]>te&&(q["!ref"]=Yt(ne),Q[G]=q,j.push(G),q={},W.dense&&(V=q["!data"]=[]),ne={s:{r:0,c:0},e:{r:0,c:0}},te=le[3],G="Sheet"+(te+1)),se>0&&le[0].r>=se)break;W.dense?(V[le[0].r]||(V[le[0].r]=[]),V[le[0].r][le[0].c]=le[1]):q[pr(le[0])]=le[1],ne.e.c<le[0].c&&(ne.e.c=le[0].c),ne.e.r<le[0].r&&(ne.e.r=le[0].r);break;case 27:le[14e3]&&(Z[le[14e3][0]]=le[14e3][1]);break;case 1537:Z[le[0]]=le[1],le[0]==te&&(G=le[1]);break}},W);else throw new Error("Unrecognized LOTUS BOF "+N[2]);if(q["!ref"]=Yt(ne),Q[Y||G]=q,j.push(Y||G),!Z.length)return{SheetNames:j,Sheets:Q};for(var J={},ee=[],ie=0;ie<Z.length;++ie)Q[j[ie]]?(ee.push(Z[ie]||j[ie]),J[Z[ie]]=Q[Z[ie]]||Q[j[ie]]):(ee.push(Z[ie]),J[Z[ie]]={"!ref":"A1"});return{SheetNames:ee,Sheets:J}}function n(N,H){var W=H||{};if(+W.codepage>=0&&nc(+W.codepage),W.type=="string")throw new Error("Cannot write WK1 to JS string");var q=_a(),G=Er(N["!ref"]),Y=N["!data"]!=null,te=[];Je(q,0,s(1030)),Je(q,6,c(G));for(var Q=Math.min(G.e.r,8191),j=G.s.c;j<=G.e.c;++j)te[j]=or(j);for(var Z=G.s.r;Z<=Q;++Z){var V=xr(Z);for(j=G.s.c;j<=G.e.c;++j){var ne=Y?(N["!data"][Z]||[])[j]:N[te[j]+V];if(!(!ne||ne.t=="z"))if(ne.t=="n")(ne.v|0)==ne.v&&ne.v>=-32768&&ne.v<=32767?Je(q,13,m(Z,j,ne.v)):Je(q,14,g(Z,j,ne.v));else{var se=vl(ne);Je(q,15,f(Z,j,se.slice(0,239)))}}}return Je(q,1),q.end()}function i(N,H){var W=H||{};if(+W.codepage>=0&&nc(+W.codepage),W.type=="string")throw new Error("Cannot write WK3 to JS string");var q=_a();Je(q,0,a(N));for(var G=0,Y=0;G<N.SheetNames.length;++G)(N.Sheets[N.SheetNames[G]]||{})["!ref"]&&Je(q,27,I(N.SheetNames[G],Y++));var te=0;for(G=0;G<N.SheetNames.length;++G){var Q=N.Sheets[N.SheetNames[G]];if(!(!Q||!Q["!ref"])){for(var j=Er(Q["!ref"]),Z=Q["!data"]!=null,V=[],ne=Math.min(j.e.r,8191),se=j.s.r;se<=ne;++se)for(var J=xr(se),ee=j.s.c;ee<=j.e.c;++ee){se===j.s.r&&(V[ee]=or(ee));var ie=V[ee]+J,le=Z?(Q["!data"][se]||[])[ee]:Q[ie];if(!(!le||le.t=="z"))if(le.t=="n")Je(q,23,U(se,ee,te,le.v));else{var ue=vl(le);Je(q,22,B(se,ee,te,ue.slice(0,239)))}}++te}}return Je(q,1),q.end()}function s(N){var H=Ne(2);return H.write_shift(2,N),H}function a(N){var H=Ne(26);H.write_shift(2,4096),H.write_shift(2,4),H.write_shift(4,0);for(var W=0,q=0,G=0,Y=0;Y<N.SheetNames.length;++Y){var te=N.SheetNames[Y],Q=N.Sheets[te];if(!(!Q||!Q["!ref"])){++G;var j=Fi(Q["!ref"]);W<j.e.r&&(W=j.e.r),q<j.e.c&&(q=j.e.c)}}return W>8191&&(W=8191),H.write_shift(2,W),H.write_shift(1,G),H.write_shift(1,q),H.write_shift(2,0),H.write_shift(2,0),H.write_shift(1,1),H.write_shift(1,2),H.write_shift(4,0),H.write_shift(4,0),H}function o(N,H,W){var q={s:{c:0,r:0},e:{c:0,r:0}};return H==8&&W.qpro?(q.s.c=N.read_shift(1),N.l++,q.s.r=N.read_shift(2),q.e.c=N.read_shift(1),N.l++,q.e.r=N.read_shift(2),q):(q.s.c=N.read_shift(2),q.s.r=N.read_shift(2),H==12&&W.qpro&&(N.l+=2),q.e.c=N.read_shift(2),q.e.r=N.read_shift(2),H==12&&W.qpro&&(N.l+=2),q.s.c==65535&&(q.s.c=q.e.c=q.s.r=q.e.r=0),q)}function c(N){var H=Ne(8);return H.write_shift(2,N.s.c),H.write_shift(2,N.s.r),H.write_shift(2,N.e.c),H.write_shift(2,N.e.r),H}function u(N,H,W){var q=[{c:0,r:0},{t:"n",v:0},0,0];return W.qpro&&W.vers!=20768?(q[0].c=N.read_shift(1),q[3]=N.read_shift(1),q[0].r=N.read_shift(2),N.l+=2):W.works?(q[0].c=N.read_shift(2),q[0].r=N.read_shift(2),q[2]=N.read_shift(2)):(q[2]=N.read_shift(1),q[0].c=N.read_shift(2),q[0].r=N.read_shift(2)),q}function l(N,H,W){var q=N.l+H,G=u(N,H,W);if(G[1].t="s",W.vers==20768){N.l++;var Y=N.read_shift(1);return G[1].v=N.read_shift(Y,"utf8"),G}return W.qpro&&N.l++,G[1].v=N.read_shift(q-N.l,"cstr"),G}function f(N,H,W){var q=Ne(7+W.length);q.write_shift(1,255),q.write_shift(2,H),q.write_shift(2,N),q.write_shift(1,39);for(var G=0;G<q.length;++G){var Y=W.charCodeAt(G);q.write_shift(1,Y>=128?95:Y)}return q.write_shift(1,0),q}function d(N,H,W){var q=N.l+H,G=u(N,H,W);if(G[1].t="s",W.vers==20768){var Y=N.read_shift(1);return G[1].v=N.read_shift(Y,"utf8"),G}return G[1].v=N.read_shift(q-N.l,"cstr"),G}function h(N,H,W){var q=u(N,H,W);return q[1].v=N.read_shift(2,"i"),q}function m(N,H,W){var q=Ne(7);return q.write_shift(1,255),q.write_shift(2,H),q.write_shift(2,N),q.write_shift(2,W,"i"),q}function p(N,H,W){var q=u(N,H,W);return q[1].v=N.read_shift(8,"f"),q}function g(N,H,W){var q=Ne(13);return q.write_shift(1,255),q.write_shift(2,H),q.write_shift(2,N),q.write_shift(8,W,"f"),q}function v(N,H,W){var q=N.l+H,G=u(N,H,W);if(G[1].v=N.read_shift(8,"f"),W.qpro)N.l=q;else{var Y=N.read_shift(2);x(N.slice(N.l,N.l+Y),G),N.l+=Y}return G}function y(N,H,W){var q=H&32768;return H&=-32769,H=(q?N:0)+(H>=8192?H-16384:H),(q?"":"$")+(W?or(H):xr(H))}var b={31:["NA",0],33:["ABS",1],34:["TRUNC",1],35:["SQRT",1],36:["LOG",1],37:["LN",1],38:["PI",0],39:["SIN",1],40:["COS",1],41:["TAN",1],42:["ATAN2",2],43:["ATAN",1],44:["ASIN",1],45:["ACOS",1],46:["EXP",1],47:["MOD",2],49:["ISNA",1],50:["ISERR",1],51:["FALSE",0],52:["TRUE",0],53:["RAND",0],63:["ROUND",2],68:["ISNUMBER",1],69:["ISTEXT",1],70:["LEN",1],71:["VALUE",1],73:["MID",3],74:["CHAR",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],102:["UPPER",1],103:["LOWER",1],107:["PROPER",1],109:["TRIM",1],111:["T",1]},_=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function x(N,H){Pi(N,0);for(var W=[],q=0,G="",Y="",te="",Q="";N.l<N.length;){var j=N[N.l++];switch(j){case 0:W.push(N.read_shift(8,"f"));break;case 1:Y=y(H[0].c,N.read_shift(2),!0),G=y(H[0].r,N.read_shift(2),!1),W.push(Y+G);break;case 2:{var Z=y(H[0].c,N.read_shift(2),!0),V=y(H[0].r,N.read_shift(2),!1);Y=y(H[0].c,N.read_shift(2),!0),G=y(H[0].r,N.read_shift(2),!1),W.push(Z+V+":"+Y+G)}break;case 3:if(N.l<N.length){console.error("WK1 premature formula end");return}break;case 4:W.push("("+W.pop()+")");break;case 5:W.push(N.read_shift(2));break;case 6:{for(var ne="";j=N[N.l++];)ne+=String.fromCharCode(j);W.push('"'+ne.replace(/"/g,'""')+'"')}break;case 8:W.push("-"+W.pop());break;case 23:W.push("+"+W.pop());break;case 22:W.push("NOT("+W.pop()+")");break;case 20:case 21:Q=W.pop(),te=W.pop(),W.push(["AND","OR"][j-20]+"("+te+","+Q+")");break;default:if(j<32&&_[j])Q=W.pop(),te=W.pop(),W.push(te+_[j]+Q);else if(b[j]){if(q=b[j][1],q==69&&(q=N[N.l++]),q>W.length){console.error("WK1 bad formula parse 0x"+j.toString(16)+":|"+W.join("|")+"|");return}var se=W.slice(-q);W.length-=q,W.push(b[j][0]+"("+se.join(",")+")")}else return j<=7?console.error("WK1 invalid opcode "+j.toString(16)):j<=24?console.error("WK1 unsupported op "+j.toString(16)):j<=30?console.error("WK1 invalid opcode "+j.toString(16)):j<=115?console.error("WK1 unsupported function opcode "+j.toString(16)):console.error("WK1 unrecognized opcode "+j.toString(16))}}W.length==1?H[1].f=""+W[0]:console.error("WK1 bad formula parse |"+W.join("|")+"|")}function E(N){var H=[{c:0,r:0},{t:"n",v:0},0];return H[0].r=N.read_shift(2),H[3]=N[N.l++],H[0].c=N[N.l++],H}function k(N,H){var W=E(N);return W[1].t="s",W[1].v=N.read_shift(H-4,"cstr"),W}function B(N,H,W,q){var G=Ne(6+q.length);G.write_shift(2,N),G.write_shift(1,W),G.write_shift(1,H),G.write_shift(1,39);for(var Y=0;Y<q.length;++Y){var te=q.charCodeAt(Y);G.write_shift(1,te>=128?95:te)}return G.write_shift(1,0),G}function D(N,H){var W=E(N);W[1].v=N.read_shift(2);var q=W[1].v>>1;if(W[1].v&1)switch(q&7){case 0:q=(q>>3)*5e3;break;case 1:q=(q>>3)*500;break;case 2:q=(q>>3)/20;break;case 3:q=(q>>3)/200;break;case 4:q=(q>>3)/2e3;break;case 5:q=(q>>3)/2e4;break;case 6:q=(q>>3)/16;break;case 7:q=(q>>3)/64;break}return W[1].v=q,W}function z(N,H){var W=E(N),q=N.read_shift(4),G=N.read_shift(4),Y=N.read_shift(2);if(Y==65535)return q===0&&G===3221225472?(W[1].t="e",W[1].v=15):q===0&&G===3489660928?(W[1].t="e",W[1].v=42):W[1].v=0,W;var te=Y&32768;return Y=(Y&32767)-16446,W[1].v=(1-te*2)*(G*Math.pow(2,Y+32)+q*Math.pow(2,Y)),W}function U(N,H,W,q){var G=Ne(14);if(G.write_shift(2,N),G.write_shift(1,W),G.write_shift(1,H),q==0)return G.write_shift(4,0),G.write_shift(4,0),G.write_shift(2,65535),G;var Y=0,te=0,Q=0,j=0;return q<0&&(Y=1,q=-q),te=Math.log2(q)|0,q/=Math.pow(2,te-31),j=q>>>0,(j&2147483648)==0&&(q/=2,++te,j=q>>>0),q-=j,j|=2147483648,j>>>=0,q*=Math.pow(2,32),Q=q>>>0,G.write_shift(4,Q),G.write_shift(4,j),te+=16383+(Y?32768:0),G.write_shift(2,te),G}function S(N,H){var W=z(N);return N.l+=H-14,W}function T(N,H){var W=E(N),q=N.read_shift(4);return W[1].v=q>>6,W}function w(N,H){var W=E(N),q=N.read_shift(8,"f");return W[1].v=q,W}function A(N,H){var W=w(N);return N.l+=H-12,W}function F(N,H){return N[N.l+H-1]==0?N.read_shift(H,"cstr"):""}function P(N,H){var W=N[N.l++];W>H-1&&(W=H-1);for(var q="";q.length<W;)q+=String.fromCharCode(N[N.l++]);return q}function O(N,H,W){if(!(!W.qpro||H<21)){var q=N.read_shift(1);N.l+=17,N.l+=1,N.l+=2;var G=N.read_shift(H-21,"cstr");return[q,G]}}function R(N,H){for(var W={},q=N.l+H;N.l<q;){var G=N.read_shift(2);if(G==14e3){for(W[G]=[0,""],W[G][0]=N.read_shift(2);N[N.l];)W[G][1]+=String.fromCharCode(N[N.l]),N.l++;N.l++}}return W}function I(N,H){var W=Ne(5+N.length);W.write_shift(2,14e3),W.write_shift(2,H);for(var q=0;q<N.length;++q){var G=N.charCodeAt(q);W[W.l++]=G>127?95:G}return W[W.l++]=0,W}var C={0:{n:"BOF",f:ii},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:o},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:h},14:{n:"NUMBER",f:p},15:{n:"LABEL",f:l},16:{n:"FORMULA",f:v},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:d},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:F},222:{n:"SHEETNAMELP",f:P},255:{n:"BOF",f:ii},65535:{n:""}},M={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:k},23:{n:"NUMBER17",f:z},24:{n:"NUMBER18",f:D},25:{n:"FORMULA19",f:S},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:R},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:T},38:{n:"??"},39:{n:"NUMBER27",f:w},40:{n:"FORMULA28",f:A},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:F},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:O},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};function L(N,H){Pi(N,0);var W=H||{},q={};W.dense&&(q["!data"]=[]);var G=[],Y="",te={s:{r:-1,c:-1},e:{r:-1,c:-1}},Q=0,j=0,Z=0,V=0,ne={SheetNames:[],Sheets:{}};e:for(;N.l<N.length;){var se=N.read_shift(2),J=N.read_shift(2),ee=N.slice(N.l,N.l+J);switch(Pi(ee,0),se){case 1:if(ee.read_shift(4)!=962023505)throw"Bad QPW9 BOF!";break;case 2:break e;case 1025:break;case 1026:break;case 1031:for(ee.l+=12;ee.l<ee.length;)Q=ee.read_shift(2),j=ee.read_shift(1),G.push(ee.read_shift(Q,"cstr"));break;case 1032:break;case 1537:{var ie=ee.read_shift(2);q={},W.dense&&(q["!data"]=[]),te.s.c=ee.read_shift(2),te.e.c=ee.read_shift(2),te.s.r=ee.read_shift(4),te.e.r=ee.read_shift(4),ee.l+=4,ee.l+2<ee.length&&(Q=ee.read_shift(2),j=ee.read_shift(1),Y=Q==0?"":ee.read_shift(Q,"cstr")),Y||(Y=or(ie))}break;case 1538:{if(te.s.c>255||te.s.r>999999)break;te.e.c<te.s.c&&(te.e.c=te.s.c),te.e.r<te.s.r&&(te.e.r=te.s.r),q["!ref"]=Yt(te),L5(ne,q,Y)}break;case 2561:Z=ee.read_shift(2),te.e.c<Z&&(te.e.c=Z),te.s.c>Z&&(te.s.c=Z),V=ee.read_shift(4),te.s.r>V&&(te.s.r=V),V=ee.read_shift(4),te.e.r<V&&(te.e.r=V);break;case 3073:{V=ee.read_shift(4),Q=ee.read_shift(4),te.s.r>V&&(te.s.r=V),te.e.r<V+Q-1&&(te.e.r=V+Q-1);for(var le=or(Z);ee.l<ee.length;){var ue={t:"z"},me=ee.read_shift(1);me&128&&(ee.l+=2);var be=me&64?ee.read_shift(2)-1:0;switch(me&31){case 1:break;case 2:ue={t:"n",v:ee.read_shift(2)};break;case 3:ue={t:"n",v:ee.read_shift(2,"i")};break;case 5:ue={t:"n",v:ee.read_shift(8,"f")};break;case 7:ue={t:"s",v:G[j=ee.read_shift(4)-1]};break;case 8:ue={t:"n",v:ee.read_shift(8,"f")},ee.l+=2,ee.l+=4;break;default:throw"Unrecognized QPW cell type "+(me&31)}var _e=0;if(me&32)switch(me&31){case 2:_e=ee.read_shift(2);break;case 3:_e=ee.read_shift(2,"i");break;case 7:_e=ee.read_shift(2);break;default:throw"Unsupported delta for QPW cell type "+(me&31)}for(!W.sheetStubs&&ue.t=="z"||(q["!data"]!=null?(q["!data"][V]||(q["!data"][V]=[]),q["!data"][V][Z]=ue):q[le+xr(V)]=ue),++V,--Q;be-- >0&&Q>=0;){if(me&32)switch(me&31){case 2:ue={t:"n",v:ue.v+_e&65535};break;case 3:ue={t:"n",v:ue.v+_e&65535},ue.v>32767&&(ue.v-=65536);break;case 7:ue={t:"s",v:G[j=j+_e>>>0]};break;default:throw"Cannot apply delta for QPW cell type "+(me&31)}else switch(me&31){case 1:ue={t:"z"};break;case 2:ue={t:"n",v:ee.read_shift(2)};break;case 7:ue={t:"s",v:G[j=ee.read_shift(4)-1]};break;default:throw"Cannot apply repeat for QPW cell type "+(me&31)}!W.sheetStubs&&ue.t=="z"||(q["!data"]!=null?(q["!data"][V]||(q["!data"][V]=[]),q["!data"][V][Z]=ue):q[le+xr(V)]=ue),++V,--Q}}}break}N.l+=J}return ne}return{sheet_to_wk1:n,book_to_wk3:i,to_workbook:e}}();function YWe(t){var e={},r=t.match(Ls),n=0,i=!1;if(r)for(;n!=r.length;++n){var s=ht(r[n]);switch(s[0].replace(/\w*:/g,"")){case"<condense":break;case"<extend":break;case"<shadow":if(!s.val)break;case"<shadow>":case"<shadow/>":e.shadow=1;break;case"</shadow>":break;case"<charset":if(s.val=="1")break;e.cp=HB[parseInt(s.val,10)];break;case"<outline":if(!s.val)break;case"<outline>":case"<outline/>":e.outline=1;break;case"</outline>":break;case"<rFont":e.name=s.val;break;case"<sz":e.sz=s.val;break;case"<strike":if(!s.val)break;case"<strike>":case"<strike/>":e.strike=1;break;case"</strike>":break;case"<u":if(!s.val)break;switch(s.val){case"double":e.uval="double";break;case"singleAccounting":e.uval="single-accounting";break;case"doubleAccounting":e.uval="double-accounting";break}case"<u>":case"<u/>":e.u=1;break;case"</u>":break;case"<b":if(s.val=="0")break;case"<b>":case"<b/>":e.b=1;break;case"</b>":break;case"<i":if(s.val=="0")break;case"<i>":case"<i/>":e.i=1;break;case"</i>":break;case"<color":s.rgb&&(e.color=s.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":e.family=s.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":e.valign=s.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":break;case"<scheme":break;case"<scheme>":case"<scheme/>":case"</scheme>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(s[0].charCodeAt(1)!==47&&!i)throw new Error("Unrecognized rich format "+s[0])}}return e}var ZWe=function(){var t=Cv("t"),e=Cv("rPr");function r(s){var a=s.match(t);if(!a)return{t:"s",v:""};var o={t:"s",v:kr(a[1])},c=s.match(e);return c&&(o.s=YWe(c[1])),o}var n=/<(?:\w+:)?r>/g,i=/<\/(?:\w+:)?r>/;return function(a){return a.replace(n,"").split(i).map(r).filter(function(o){return o.v})}}(),JWe=function(){var e=/(\r\n|\n)/g;function r(i,s,a){var o=[];i.u&&o.push("text-decoration: underline;"),i.uval&&o.push("text-underline-style:"+i.uval+";"),i.sz&&o.push("font-size:"+i.sz+"pt;"),i.outline&&o.push("text-effect: outline;"),i.shadow&&o.push("text-shadow: auto;"),s.push('<span style="'+o.join("")+'">'),i.b&&(s.push("<b>"),a.push("</b>")),i.i&&(s.push("<i>"),a.push("</i>")),i.strike&&(s.push("<s>"),a.push("</s>"));var c=i.valign||"";return c=="superscript"||c=="super"?c="sup":c=="subscript"&&(c="sub"),c!=""&&(s.push("<"+c+">"),a.push("</"+c+">")),a.push("</span>"),i}function n(i){var s=[[],i.v,[]];return i.v?(i.s&&r(i.s,s[0],s[2]),s[0].join("")+s[1].replace(e,"<br/>")+s[2].join("")):""}return function(s){return s.map(n).join("")}}(),QWe=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,eGe=/<(?:\w+:)?r>/,tGe=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function gD(t,e){var r=e?e.cellHTML:!0,n={};return t?(t.match(/^\s*<(?:\w+:)?t[^>]*>/)?(n.t=kr(on(t.slice(t.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||""),!0),n.r=on(t),r&&(n.h=tD(n.t))):t.match(eGe)&&(n.r=on(t),n.t=kr(on((t.replace(tGe,"").match(QWe)||[]).join("").replace(Ls,"")),!0),r&&(n.h=JWe(ZWe(n.r)))),n):{t:""}}var rGe=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,nGe=/<(?:\w+:)?(?:si|sstItem)>/g,iGe=/<\/(?:\w+:)?(?:si|sstItem)>/;function sGe(t,e){var r=[],n="";if(!t)return r;var i=t.match(rGe);if(i){n=i[2].replace(nGe,"").split(iGe);for(var s=0;s!=n.length;++s){var a=gD(n[s].trim(),e);a!=null&&(r[r.length]=a)}i=ht(i[1]),r.Count=i.count,r.Unique=i.uniqueCount}return r}var aGe=/^\s|\s$|[\t\n\r]/;function oGe(t,e){if(!e.bookSST)return"";var r=[ui];r[r.length]=Xe("sst",null,{xmlns:I0[0],count:t.Count,uniqueCount:t.Unique});for(var n=0;n!=t.length;++n)if(t[n]!=null){var i=t[n],s="<si>";i.r?s+=i.r:(s+="<t",i.t||(i.t=""),typeof i.t!="string"&&(i.t=String(i.t)),i.t.match(aGe)&&(s+=' xml:space="preserve"'),s+=">"+nr(i.t)+"</t>"),s+="</si>",r[r.length]=s}return r.length>2&&(r[r.length]="</sst>",r[1]=r[1].replace("/>",">")),r.join("")}function cGe(t){return[t.read_shift(4),t.read_shift(4)]}function lGe(t,e){var r=[],n=!1;return Uu(t,function(s,a,o){switch(o){case 159:r.Count=s[0],r.Unique=s[1];break;case 19:r.push(s);break;case 160:return!0;case 35:n=!0;break;case 36:n=!1;break;default:if(a.T,!n||e.WTF)throw new Error("Unexpected record 0x"+o.toString(16))}}),r}function uGe(t,e){return e||(e=Ne(8)),e.write_shift(4,t.Count),e.write_shift(4,t.Unique),e}var fGe=_ze;function dGe(t){var e=_a();Le(e,159,uGe(t));for(var r=0;r<t.length;++r)Le(e,19,fGe(t[r]));return Le(e,160),e.end()}function yle(t){for(var e=[],r=t.split(""),n=0;n<r.length;++n)e[n]=r[n].charCodeAt(0);return e}function gu(t,e){var r={};return r.Major=t.read_shift(2),r.Minor=t.read_shift(2),e>=4&&(t.l+=e-4),r}function hGe(t){var e={};return e.id=t.read_shift(0,"lpp4"),e.R=gu(t,4),e.U=gu(t,4),e.W=gu(t,4),e}function pGe(t){for(var e=t.read_shift(4),r=t.l+e-4,n={},i=t.read_shift(4),s=[];i-- >0;)s.push({t:t.read_shift(4),v:t.read_shift(0,"lpp4")});if(n.name=t.read_shift(0,"lpp4"),n.comps=s,t.l!=r)throw new Error("Bad DataSpaceMapEntry: "+t.l+" != "+r);return n}function mGe(t){var e=[];t.l+=4;for(var r=t.read_shift(4);r-- >0;)e.push(pGe(t));return e}function gGe(t){var e=[];t.l+=4;for(var r=t.read_shift(4);r-- >0;)e.push(t.read_shift(0,"lpp4"));return e}function vGe(t){var e={};return t.read_shift(4),t.l+=4,e.id=t.read_shift(0,"lpp4"),e.name=t.read_shift(0,"lpp4"),e.R=gu(t,4),e.U=gu(t,4),e.W=gu(t,4),e}function yGe(t){var e=vGe(t);if(e.ename=t.read_shift(0,"8lpp4"),e.blksz=t.read_shift(4),e.cmode=t.read_shift(4),t.read_shift(4)!=4)throw new Error("Bad !Primary record");return e}function ble(t,e){var r=t.l+e,n={};n.Flags=t.read_shift(4)&63,t.l+=4,n.AlgID=t.read_shift(4);var i=!1;switch(n.AlgID){case 26126:case 26127:case 26128:i=n.Flags==36;break;case 26625:i=n.Flags==4;break;case 0:i=n.Flags==16||n.Flags==4||n.Flags==36;break;default:throw"Unrecognized encryption algorithm: "+n.AlgID}if(!i)throw new Error("Encryption Flags/AlgID mismatch");return n.AlgIDHash=t.read_shift(4),n.KeySize=t.read_shift(4),n.ProviderType=t.read_shift(4),t.l+=8,n.CSPName=t.read_shift(r-t.l>>1,"utf16le"),t.l=r,n}function wle(t,e){var r={},n=t.l+e;return t.l+=4,r.Salt=t.slice(t.l,t.l+16),t.l+=16,r.Verifier=t.slice(t.l,t.l+16),t.l+=16,t.read_shift(4),r.VerifierHash=t.slice(t.l,n),t.l=n,r}function bGe(t){var e=gu(t);switch(e.Minor){case 2:return[e.Minor,wGe(t)];case 3:return[e.Minor,_Ge()];case 4:return[e.Minor,xGe(t)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+e.Minor)}function wGe(t){var e=t.read_shift(4);if((e&63)!=36)throw new Error("EncryptionInfo mismatch");var r=t.read_shift(4),n=ble(t,r),i=wle(t,t.length-t.l);return{t:"Std",h:n,v:i}}function _Ge(){throw new Error("File is password-protected: ECMA-376 Extensible")}function xGe(t){var e=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];t.l+=4;var r=t.read_shift(t.length-t.l,"utf8"),n={};return r.replace(Ls,function(s){var a=ht(s);switch(Pc(a[0])){case"<?xml":break;case"<encryption":case"</encryption>":break;case"<keyData":e.forEach(function(o){n[o]=a[o]});break;case"<dataIntegrity":n.encryptedHmacKey=a.encryptedHmacKey,n.encryptedHmacValue=a.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":n.encs=[];break;case"</keyEncryptors>":break;case"<keyEncryptor":n.uri=a.uri;break;case"</keyEncryptor>":break;case"<encryptedKey":n.encs.push(a);break;default:throw a[0]}}),n}function SGe(t,e){var r={},n=r.EncryptionVersionInfo=gu(t,4);if(e-=4,n.Minor!=2)throw new Error("unrecognized minor version code: "+n.Minor);if(n.Major>4||n.Major<2)throw new Error("unrecognized major version code: "+n.Major);r.Flags=t.read_shift(4),e-=4;var i=t.read_shift(4);return e-=4,r.EncryptionHeader=ble(t,i),e-=i,r.EncryptionVerifier=wle(t,e),r}function EGe(t){var e={},r=e.EncryptionVersionInfo=gu(t,4);if(r.Major!=1||r.Minor!=1)throw"unrecognized version code "+r.Major+" : "+r.Minor;return e.Salt=t.read_shift(16),e.EncryptedVerifier=t.read_shift(16),e.EncryptedVerifierHash=t.read_shift(16),e}function vD(t){var e=0,r,n=yle(t),i=n.length+1,s,a,o,c,u;for(r=Zf(i),r[0]=n.length,s=1;s!=i;++s)r[s]=n[s-1];for(s=i-1;s>=0;--s)a=r[s],o=(e&16384)===0?0:1,c=e<<1&32767,u=o|c,e=u^a;return e^52811}var _le=function(){var t=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],e=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],r=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],n=function(a){return(a/2|a*128)&255},i=function(a,o){return n(a^o)},s=function(a){for(var o=e[a.length-1],c=104,u=a.length-1;u>=0;--u)for(var l=a[u],f=0;f!=7;++f)l&64&&(o^=r[c]),l*=2,--c;return o};return function(a){for(var o=yle(a),c=s(o),u=o.length,l=Zf(16),f=0;f!=16;++f)l[f]=0;var d,h,m;for((u&1)===1&&(d=c>>8,l[u]=i(t[0],d),--u,d=c&255,h=o[o.length-1],l[u]=i(h,d));u>0;)--u,d=c>>8,l[u]=i(o[u],d),--u,d=c&255,l[u]=i(o[u],d);for(u=15,m=15-o.length;m>0;)d=c>>8,l[u]=i(t[m],d),--u,--m,d=c&255,l[u]=i(o[u],d),--u,--m;return l}}(),kGe=function(t,e,r,n,i){i||(i=e),n||(n=_le(t));var s,a;for(s=0;s!=e.length;++s)a=e[s],a^=n[r],a=(a>>5|a<<3)&255,i[s]=a,++r;return[i,r,n]},TGe=function(t){var e=0,r=_le(t);return function(n){var i=kGe("",n,e,r);return e=i[1],i[0]}};function AGe(t,e,r,n){var i={key:ii(t),verificationBytes:ii(t)};return r.password&&(i.verifier=vD(r.password)),n.valid=i.verificationBytes===i.verifier,n.valid&&(n.insitu=TGe(r.password)),i}function CGe(t,e,r){var n=r||{};return n.Info=t.read_shift(2),t.l-=2,n.Info===1?n.Data=EGe(t):n.Data=SGe(t,e),n}function IGe(t,e,r){var n={Type:r.biff>=8?t.read_shift(2):0};return n.Type?CGe(t,e-2,n):AGe(t,r.biff>=8?e:e-2,r,n),n}function PGe(t,e){switch(e.type){case"base64":return iw(Qa(t),e);case"binary":return iw(t,e);case"buffer":return iw(mr&&Buffer.isBuffer(t)?t.toString("binary"):gl(t),e);case"array":return iw(qh(t),e)}throw new Error("Unrecognized type "+e.type)}function iw(t,e){var r=e||{},n={},i=r.dense;i&&(n["!data"]=[]);var s=t.match(/\\trowd[\s\S]*?\\row\b/g);if(!s)throw new Error("RTF missing table");var a={s:{c:0,r:0},e:{c:0,r:s.length-1}},o=[];return s.forEach(function(c,u){i&&(o=n["!data"][u]=[]);for(var l=/\\[\w\-]+\b/g,f=0,d,h=-1,m=[];(d=l.exec(c))!=null;){var p=c.slice(f,l.lastIndex-d[0].length);switch(p.charCodeAt(0)==32&&(p=p.slice(1)),p.length&&m.push(p),d[0]){case"\\cell":if(++h,m.length){var g={v:m.join(""),t:"s"};g.v=="TRUE"||g.v=="FALSE"?(g.v=g.v=="TRUE",g.t="b"):isNaN(Za(g.v))||(g.t="n",r.cellText!==!1&&(g.w=g.v),g.v=Za(g.v)),i?o[h]=g:n[pr({r:u,c:h})]=g}m=[];break;case"\\par":m.push(`
`);break}f=l.lastIndex}h>a.e.c&&(a.e.c=h)}),n["!ref"]=Yt(a),n}function RGe(t,e){var r=vd(PGe(t,e),e);return r.bookType="rtf",r}function OGe(t,e){var r=["{\\rtf1\\ansi"];if(!t["!ref"])return r[0]+"}";for(var n=Er(t["!ref"]),i,s=t["!data"]!=null,a=[],o=n.s.r;o<=n.e.r;++o){r.push("\\trowd\\trautofit1");for(var c=n.s.c;c<=n.e.c;++c)r.push("\\cellx"+(c+1));for(r.push("\\pard\\intbl"),s&&(a=t["!data"][o]||[]),c=n.s.c;c<=n.e.c;++c){var u=pr({r:o,c});if(i=s?a[c]:t[u],!i||i.v==null&&(!i.f||i.F)){r.push(" \\cell");continue}r.push(" "+(i.w||(vl(i),i.w)||"").replace(/[\r\n]/g,"\\par ")),r.push("\\cell")}r.push("\\pard\\intbl\\row")}return r.join("")+"}"}function BGe(t){var e=t.slice(t[0]==="#"?1:0).slice(0,6);return[parseInt(e.slice(0,2),16),parseInt(e.slice(2,4),16),parseInt(e.slice(4,6),16)]}function Dv(t){for(var e=0,r=1;e!=3;++e)r=r*256+(t[e]>255?255:t[e]<0?0:t[e]);return r.toString(16).toUpperCase().slice(1)}function DGe(t){var e=t[0]/255,r=t[1]/255,n=t[2]/255,i=Math.max(e,r,n),s=Math.min(e,r,n),a=i-s;if(a===0)return[0,0,e];var o=0,c=0,u=i+s;switch(c=a/(u>1?2-u:u),i){case e:o=((r-n)/a+6)%6;break;case r:o=(n-e)/a+2;break;case n:o=(e-r)/a+4;break}return[o/6,c,u/2]}function MGe(t){var e=t[0],r=t[1],n=t[2],i=r*2*(n<.5?n:1-n),s=n-i/2,a=[s,s,s],o=6*e,c;if(r!==0)switch(o|0){case 0:case 6:c=i*o,a[0]+=i,a[1]+=c;break;case 1:c=i*(2-o),a[0]+=c,a[1]+=i;break;case 2:c=i*(o-2),a[1]+=i,a[2]+=c;break;case 3:c=i*(4-o),a[1]+=c,a[2]+=i;break;case 4:c=i*(o-4),a[2]+=i,a[0]+=c;break;case 5:c=i*(6-o),a[2]+=c,a[0]+=i;break}for(var u=0;u!=3;++u)a[u]=Math.round(a[u]*255);return a}function t6(t,e){if(e===0)return t;var r=DGe(BGe(t));return e<0?r[2]=r[2]*(1+e):r[2]=1-(1-r[2])*(1-e),Dv(MGe(r))}var xle=6,NGe=15,FGe=1,As=xle;function Mv(t){return Math.floor((t+Math.round(128/As)/256)*As)}function Nv(t){return Math.floor((t-5)/As*100+.5)/100}function r6(t){return Math.round((t*As+5)/As*256)/256}function iE(t){return r6(Nv(Mv(t)))}function yD(t){var e=Math.abs(t-iE(t)),r=As;if(e>.005)for(As=FGe;As<NGe;++As)Math.abs(t-iE(t))<=e&&(e=Math.abs(t-iE(t)),r=As);As=r}function Jf(t){t.width?(t.wpx=Mv(t.width),t.wch=Nv(t.wpx),t.MDW=As):t.wpx?(t.wch=Nv(t.wpx),t.width=r6(t.wch),t.MDW=As):typeof t.wch=="number"&&(t.width=r6(t.wch),t.wpx=Mv(t.width),t.MDW=As),t.customWidth&&delete t.customWidth}var LGe=96,Sle=LGe;function Fv(t){return t*96/Sle}function fp(t){return t*Sle/96}var $Ge={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};function UGe(t,e,r,n){e.Borders=[];var i={},s=!1;(t[0].match(Ls)||[]).forEach(function(a){var o=ht(a);switch(Pc(o[0])){case"<borders":case"<borders>":case"</borders>":break;case"<border":case"<border>":case"<border/>":i={},o.diagonalUp&&(i.diagonalUp=an(o.diagonalUp)),o.diagonalDown&&(i.diagonalDown=an(o.diagonalDown)),e.Borders.push(i);break;case"</border>":break;case"<left/>":break;case"<left":case"<left>":break;case"</left>":break;case"<right/>":break;case"<right":case"<right>":break;case"</right>":break;case"<top/>":break;case"<top":case"<top>":break;case"</top>":break;case"<bottom/>":break;case"<bottom":case"<bottom>":break;case"</bottom>":break;case"<diagonal":case"<diagonal>":case"<diagonal/>":break;case"</diagonal>":break;case"<horizontal":case"<horizontal>":case"<horizontal/>":break;case"</horizontal>":break;case"<vertical":case"<vertical>":case"<vertical/>":break;case"</vertical>":break;case"<start":case"<start>":case"<start/>":break;case"</start>":break;case"<end":case"<end>":case"<end/>":break;case"</end>":break;case"<color":case"<color>":break;case"<color/>":case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(n&&n.WTF&&!s)throw new Error("unrecognized "+o[0]+" in borders")}})}function jGe(t,e,r,n){e.Fills=[];var i={},s=!1;(t[0].match(Ls)||[]).forEach(function(a){var o=ht(a);switch(Pc(o[0])){case"<fills":case"<fills>":case"</fills>":break;case"<fill>":case"<fill":case"<fill/>":i={},e.Fills.push(i);break;case"</fill>":break;case"<gradientFill>":break;case"<gradientFill":case"</gradientFill>":e.Fills.push(i),i={};break;case"<patternFill":case"<patternFill>":o.patternType&&(i.patternType=o.patternType);break;case"<patternFill/>":case"</patternFill>":break;case"<bgColor":i.bgColor||(i.bgColor={}),o.indexed&&(i.bgColor.indexed=parseInt(o.indexed,10)),o.theme&&(i.bgColor.theme=parseInt(o.theme,10)),o.tint&&(i.bgColor.tint=parseFloat(o.tint)),o.rgb&&(i.bgColor.rgb=o.rgb.slice(-6));break;case"<bgColor/>":case"</bgColor>":break;case"<fgColor":i.fgColor||(i.fgColor={}),o.theme&&(i.fgColor.theme=parseInt(o.theme,10)),o.tint&&(i.fgColor.tint=parseFloat(o.tint)),o.rgb!=null&&(i.fgColor.rgb=o.rgb.slice(-6));break;case"<fgColor/>":case"</fgColor>":break;case"<stop":case"<stop/>":break;case"</stop>":break;case"<color":case"<color/>":break;case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(n&&n.WTF&&!s)throw new Error("unrecognized "+o[0]+" in fills")}})}function VGe(t,e,r,n){e.Fonts=[];var i={},s=!1;(t[0].match(Ls)||[]).forEach(function(a){var o=ht(a);switch(Pc(o[0])){case"<fonts":case"<fonts>":case"</fonts>":break;case"<font":case"<font>":break;case"</font>":case"<font/>":e.Fonts.push(i),i={};break;case"<name":o.val&&(i.name=on(o.val));break;case"<name/>":case"</name>":break;case"<b":i.bold=o.val?an(o.val):1;break;case"<b/>":i.bold=1;break;case"<i":i.italic=o.val?an(o.val):1;break;case"<i/>":i.italic=1;break;case"<u":switch(o.val){case"none":i.underline=0;break;case"single":i.underline=1;break;case"double":i.underline=2;break;case"singleAccounting":i.underline=33;break;case"doubleAccounting":i.underline=34;break}break;case"<u/>":i.underline=1;break;case"<strike":i.strike=o.val?an(o.val):1;break;case"<strike/>":i.strike=1;break;case"<outline":i.outline=o.val?an(o.val):1;break;case"<outline/>":i.outline=1;break;case"<shadow":i.shadow=o.val?an(o.val):1;break;case"<shadow/>":i.shadow=1;break;case"<condense":i.condense=o.val?an(o.val):1;break;case"<condense/>":i.condense=1;break;case"<extend":i.extend=o.val?an(o.val):1;break;case"<extend/>":i.extend=1;break;case"<sz":o.val&&(i.sz=+o.val);break;case"<sz/>":case"</sz>":break;case"<vertAlign":o.val&&(i.vertAlign=o.val);break;case"<vertAlign/>":case"</vertAlign>":break;case"<family":o.val&&(i.family=parseInt(o.val,10));break;case"<family/>":case"</family>":break;case"<scheme":o.val&&(i.scheme=o.val);break;case"<scheme/>":case"</scheme>":break;case"<charset":if(o.val=="1")break;o.codepage=HB[parseInt(o.val,10)];break;case"<color":if(i.color||(i.color={}),o.auto&&(i.color.auto=an(o.auto)),o.rgb)i.color.rgb=o.rgb.slice(-6);else if(o.indexed){i.color.index=parseInt(o.indexed,10);var c=yh[i.color.index];i.color.index==81&&(c=yh[1]),c||(c=yh[1]),i.color.rgb=c[0].toString(16)+c[1].toString(16)+c[2].toString(16)}else o.theme&&(i.color.theme=parseInt(o.theme,10),o.tint&&(i.color.tint=parseFloat(o.tint)),o.theme&&r.themeElements&&r.themeElements.clrScheme&&(i.color.rgb=t6(r.themeElements.clrScheme[i.color.theme].rgb,i.color.tint||0)));break;case"<color/>":case"</color>":break;case"<AlternateContent":s=!0;break;case"</AlternateContent>":s=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(n&&n.WTF&&!s)throw new Error("unrecognized "+o[0]+" in fonts")}})}function qGe(t,e,r){e.NumberFmt=[];for(var n=jn(Bt),i=0;i<n.length;++i)e.NumberFmt[n[i]]=Bt[n[i]];var s=t[0].match(Ls);if(s)for(i=0;i<s.length;++i){var a=ht(s[i]);switch(Pc(a[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":break;case"<numFmt":{var o=kr(on(a.formatCode)),c=parseInt(a.numFmtId,10);if(e.NumberFmt[c]=o,c>0){if(c>392){for(c=392;c>60&&e.NumberFmt[c]!=null;--c);e.NumberFmt[c]=o}Uf(o,c)}}break;case"</numFmt>":break;default:if(r.WTF)throw new Error("unrecognized "+a[0]+" in numFmts")}}}function zGe(t){var e=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var n=r[0];n<=r[1];++n)t[n]!=null&&(e[e.length]=Xe("numFmt",null,{numFmtId:n,formatCode:nr(t[n])}))}),e.length===1?"":(e[e.length]="</numFmts>",e[0]=Xe("numFmts",null,{count:e.length-2}).replace("/>",">"),e.join(""))}var sw=["numFmtId","fillId","fontId","borderId","xfId"],aw=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];function HGe(t,e,r){e.CellXf=[];var n,i=!1;(t[0].match(Ls)||[]).forEach(function(s){var a=ht(s),o=0;switch(Pc(a[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":break;case"<xf":case"<xf/>":for(n=a,delete n[0],o=0;o<sw.length;++o)n[sw[o]]&&(n[sw[o]]=parseInt(n[sw[o]],10));for(o=0;o<aw.length;++o)n[aw[o]]&&(n[aw[o]]=an(n[aw[o]]));if(e.NumberFmt&&n.numFmtId>392){for(o=392;o>60;--o)if(e.NumberFmt[n.numFmtId]==e.NumberFmt[o]){n.numFmtId=o;break}}e.CellXf.push(n);break;case"</xf>":break;case"<alignment":case"<alignment/>":var c={};a.vertical&&(c.vertical=a.vertical),a.horizontal&&(c.horizontal=a.horizontal),a.textRotation!=null&&(c.textRotation=a.textRotation),a.indent&&(c.indent=a.indent),a.wrapText&&(c.wrapText=an(a.wrapText)),n.alignment=c;break;case"</alignment>":break;case"<protection":break;case"</protection>":case"<protection/>":break;case"<AlternateContent":i=!0;break;case"</AlternateContent>":i=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(r&&r.WTF&&!i)throw new Error("unrecognized "+a[0]+" in cellXfs")}})}function WGe(t){var e=[];return e[e.length]=Xe("cellXfs",null),t.forEach(function(r){e[e.length]=Xe("xf",null,r)}),e[e.length]="</cellXfs>",e.length===2?"":(e[0]=Xe("cellXfs",null,{count:e.length-2}).replace("/>",">"),e.join(""))}var GGe=function(){var e=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,r=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,n=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,i=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,s=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(o,c,u){var l={};if(!o)return l;o=o.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");var f;return(f=o.match(e))&&qGe(f,l,u),(f=o.match(i))&&VGe(f,l,c,u),(f=o.match(n))&&jGe(f,l,c,u),(f=o.match(s))&&UGe(f,l,c,u),(f=o.match(r))&&HGe(f,l,u),l}}();function KGe(t,e){var r=[ui,Xe("styleSheet",null,{xmlns:I0[0],"xmlns:vt":Oi.vt})],n;return t.SSF&&(n=zGe(t.SSF))!=null&&(r[r.length]=n),r[r.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',r[r.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',r[r.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',r[r.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(n=WGe(e.cellXfs))&&(r[r.length]=n),r[r.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',r[r.length]='<dxfs count="0"/>',r[r.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',r.length>2&&(r[r.length]="</styleSheet>",r[1]=r[1].replace("/>",">")),r.join("")}function XGe(t,e){var r=t.read_shift(2),n=Ms(t);return[r,n]}function YGe(t,e,r){r||(r=Ne(6+4*e.length)),r.write_shift(2,t),Ni(e,r);var n=r.length>r.l?r.slice(0,r.l):r;return r.l==null&&(r.l=r.length),n}function ZGe(t,e,r){var n={};n.sz=t.read_shift(2)/20;var i=Cze(t);i.fItalic&&(n.italic=1),i.fCondense&&(n.condense=1),i.fExtend&&(n.extend=1),i.fShadow&&(n.shadow=1),i.fOutline&&(n.outline=1),i.fStrikeout&&(n.strike=1);var s=t.read_shift(2);switch(s===700&&(n.bold=1),t.read_shift(2)){case 1:n.vertAlign="superscript";break;case 2:n.vertAlign="subscript";break}var a=t.read_shift(1);a!=0&&(n.underline=a);var o=t.read_shift(1);o>0&&(n.family=o);var c=t.read_shift(1);switch(c>0&&(n.charset=c),t.l++,n.color=Aze(t),t.read_shift(1)){case 1:n.scheme="major";break;case 2:n.scheme="minor";break}return n.name=Ms(t),n}function JGe(t,e){e||(e=Ne(25+4*32)),e.write_shift(2,t.sz*20),Ize(t,e),e.write_shift(2,t.bold?700:400);var r=0;t.vertAlign=="superscript"?r=1:t.vertAlign=="subscript"&&(r=2),e.write_shift(2,r),e.write_shift(1,t.underline||0),e.write_shift(1,t.family||0),e.write_shift(1,t.charset||0),e.write_shift(1,0),J4(t.color,e);var n=0;return n=2,e.write_shift(1,n),Ni(t.name,e),e.length>e.l?e.slice(0,e.l):e}var QGe=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],sE,eKe=Fs;function eW(t,e){e||(e=Ne(4*3+8*7+16*1)),sE||(sE=I5(QGe));var r=sE[t.patternType];r==null&&(r=40),e.write_shift(4,r);var n=0;if(r!=40)for(J4({auto:1},e),J4({auto:1},e);n<12;++n)e.write_shift(4,0);else{for(;n<4;++n)e.write_shift(4,0);for(;n<12;++n)e.write_shift(4,0)}return e.length>e.l?e.slice(0,e.l):e}function tKe(t,e){var r=t.l+e,n=t.read_shift(2),i=t.read_shift(2);return t.l=r,{ixfe:n,numFmtId:i}}function Ele(t,e,r){r||(r=Ne(16)),r.write_shift(2,e||0),r.write_shift(2,t.numFmtId||0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(1,0),r.write_shift(1,0);var n=0;return r.write_shift(1,n),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(1,0),r}function Wm(t,e){return e||(e=Ne(10)),e.write_shift(1,0),e.write_shift(1,0),e.write_shift(4,0),e.write_shift(4,0),e}var rKe=Fs;function nKe(t,e){return e||(e=Ne(51)),e.write_shift(1,0),Wm(null,e),Wm(null,e),Wm(null,e),Wm(null,e),Wm(null,e),e.length>e.l?e.slice(0,e.l):e}function iKe(t,e){return e||(e=Ne(12+4*10)),e.write_shift(4,t.xfId),e.write_shift(2,1),e.write_shift(1,0),e.write_shift(1,0),Ov(t.name||"",e),e.length>e.l?e.slice(0,e.l):e}function sKe(t,e,r){var n=Ne(2052);return n.write_shift(4,t),Ov(e,n),Ov(r,n),n.length>n.l?n.slice(0,n.l):n}function aKe(t,e,r){var n={};n.NumberFmt=[];for(var i in Bt)n.NumberFmt[i]=Bt[i];n.CellXf=[],n.Fonts=[];var s=[],a=!1;return Uu(t,function(c,u,l){switch(l){case 44:n.NumberFmt[c[0]]=c[1],Uf(c[1],c[0]);break;case 43:n.Fonts.push(c),c.color.theme!=null&&e&&e.themeElements&&e.themeElements.clrScheme&&(c.color.rgb=t6(e.themeElements.clrScheme[c.color.theme].rgb,c.color.tint||0));break;case 1025:break;case 45:break;case 46:break;case 47:s[s.length-1]==617&&n.CellXf.push(c);break;case 48:case 507:case 572:case 475:break;case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 35:a=!0;break;case 36:a=!1;break;case 37:s.push(l),a=!0;break;case 38:s.pop(),a=!1;break;default:if(u.T>0)s.push(l);else if(u.T<0)s.pop();else if(!a||r.WTF&&s[s.length-1]!=37)throw new Error("Unexpected record 0x"+l.toString(16))}}),n}function oKe(t,e){if(e){var r=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var i=n[0];i<=n[1];++i)e[i]!=null&&++r}),r!=0&&(Le(t,615,lc(r)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var i=n[0];i<=n[1];++i)e[i]!=null&&Le(t,44,YGe(i,e[i]))}),Le(t,616))}}function cKe(t){var e=1;Le(t,611,lc(e)),Le(t,43,JGe({sz:12,color:{theme:1},name:"Calibri",family:2})),Le(t,612)}function lKe(t){var e=2;Le(t,603,lc(e)),Le(t,45,eW({patternType:"none"})),Le(t,45,eW({patternType:"gray125"})),Le(t,604)}function uKe(t){var e=1;Le(t,613,lc(e)),Le(t,46,nKe()),Le(t,614)}function fKe(t){var e=1;Le(t,626,lc(e)),Le(t,47,Ele({numFmtId:0},65535)),Le(t,627)}function dKe(t,e){Le(t,617,lc(e.length)),e.forEach(function(r){Le(t,47,Ele(r,0))}),Le(t,618)}function hKe(t){var e=1;Le(t,619,lc(e)),Le(t,48,iKe({xfId:0,name:"Normal"})),Le(t,620)}function pKe(t){var e=0;Le(t,505,lc(e)),Le(t,506)}function mKe(t){var e=0;Le(t,508,sKe(e,"TableStyleMedium9","PivotStyleMedium4")),Le(t,509)}function gKe(t,e){var r=_a();return Le(r,278),oKe(r,t.SSF),cKe(r),lKe(r),uKe(r),fKe(r),dKe(r,e.cellXfs),hKe(r),pKe(r),mKe(r),Le(r,279),r.end()}var vKe=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function yKe(t,e,r){e.themeElements.clrScheme=[];var n={};(t[0].match(Ls)||[]).forEach(function(i){var s=ht(i);switch(s[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":n.rgb=s.val;break;case"<a:sysClr":n.rgb=s.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":s[0].charAt(1)==="/"?(e.themeElements.clrScheme[vKe.indexOf(s[0])]=n,n={}):n.name=s[0].slice(3,s[0].length-1);break;default:if(r&&r.WTF)throw new Error("Unrecognized "+s[0]+" in clrScheme")}})}function bKe(){}function wKe(){}var _Ke=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,xKe=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,SKe=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;function EKe(t,e,r){e.themeElements={};var n;[["clrScheme",_Ke,yKe],["fontScheme",xKe,bKe],["fmtScheme",SKe,wKe]].forEach(function(i){if(!(n=t.match(i[1])))throw new Error(i[0]+" not found in themeElements");i[2](n,e,r)})}var kKe=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function kle(t,e){(!t||t.length===0)&&(t=bD());var r,n={};if(!(r=t.match(kKe)))throw new Error("themeElements not found in theme");return EKe(r[0],n,e),n.raw=t,n}function bD(t,e){if(e&&e.themeXLSX)return e.themeXLSX;if(t&&typeof t.raw=="string")return t.raw;var r=[ui];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function TKe(t,e,r){var n=t.l+e,i=t.read_shift(4);if(i!==124226){if(!r.cellStyles){t.l=n;return}var s=t.slice(t.l);t.l=n;var a;try{a=_ce(s,{type:"array"})}catch{return}var o=va(a,"theme/theme/theme1.xml",!0);if(o)return kle(o,r)}}function AKe(t){return t.read_shift(4)}function CKe(t){var e={};switch(e.xclrType=t.read_shift(2),e.nTintShade=t.read_shift(2),e.xclrType){case 0:t.l+=4;break;case 1:e.xclrValue=IKe(t,4);break;case 2:e.xclrValue=ole(t);break;case 3:e.xclrValue=AKe(t);break;case 4:t.l+=4;break}return t.l+=8,e}function IKe(t,e){return Fs(t,e)}function PKe(t,e){return Fs(t,e)}function RKe(t){var e=t.read_shift(2),r=t.read_shift(2)-4,n=[e];switch(e){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:n[1]=CKe(t);break;case 6:n[1]=PKe(t,r);break;case 14:case 15:n[1]=t.read_shift(r===1?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+e+" "+r)}return n}function OKe(t,e){var r=t.l+e;t.l+=2;var n=t.read_shift(2);t.l+=2;for(var i=t.read_shift(2),s=[];i-- >0;)s.push(RKe(t,r-t.l));return{ixfe:n,ext:s}}function BKe(t,e){e.forEach(function(r){r[0]})}function DKe(t,e){return{flags:t.read_shift(4),version:t.read_shift(4),name:Ms(t)}}function MKe(t){var e=Ne(12+2*t.name.length);return e.write_shift(4,t.flags),e.write_shift(4,t.version),Ni(t.name,e),e.slice(0,e.l)}function NKe(t){for(var e=[],r=t.read_shift(4);r-- >0;)e.push([t.read_shift(4),t.read_shift(4)]);return e}function FKe(t){var e=Ne(4+8*t.length);e.write_shift(4,t.length);for(var r=0;r<t.length;++r)e.write_shift(4,t[r][0]),e.write_shift(4,t[r][1]);return e}function LKe(t,e){var r=Ne(8+2*e.length);return r.write_shift(4,t),Ni(e,r),r.slice(0,r.l)}function $Ke(t){return t.l+=4,t.read_shift(4)!=0}function UKe(t,e){var r=Ne(8);return r.write_shift(4,t),r.write_shift(4,1),r}function jKe(t,e,r){var n={Types:[],Cell:[],Value:[]},i=r||{},s=[],a=!1,o=2;return Uu(t,function(c,u,l){switch(l){case 335:n.Types.push({name:c.name});break;case 51:c.forEach(function(f){o==1?n.Cell.push({type:n.Types[f[0]-1].name,index:f[1]}):o==0&&n.Value.push({type:n.Types[f[0]-1].name,index:f[1]})});break;case 337:o=c?1:0;break;case 338:o=2;break;case 35:s.push(l),a=!0;break;case 36:s.pop(),a=!1;break;default:if(!u.T){if(!a||i.WTF&&s[s.length-1]!=35)throw new Error("Unexpected record 0x"+l.toString(16))}}}),n}function VKe(){var t=_a();return Le(t,332),Le(t,334,lc(1)),Le(t,335,MKe({name:"XLDAPR",version:12e4,flags:3496657072})),Le(t,336),Le(t,339,LKe(1,"XLDAPR")),Le(t,52),Le(t,35,lc(514)),Le(t,4096,lc(0)),Le(t,4097,go(1)),Le(t,36),Le(t,53),Le(t,340),Le(t,337,UKe(1)),Le(t,51,FKe([[1,0]])),Le(t,338),Le(t,333),t.end()}function qKe(t,e,r){var n={Types:[],Cell:[],Value:[]};if(!t)return n;var i=!1,s=2,a;return t.replace(Ls,function(o){var c=ht(o);switch(Pc(c[0])){case"<?xml":break;case"<metadata":case"</metadata>":break;case"<metadataTypes":case"</metadataTypes>":break;case"<metadataType":n.Types.push({name:c.name});break;case"</metadataType>":break;case"<futureMetadata":for(var u=0;u<n.Types.length;++u)n.Types[u].name==c.name&&(a=n.Types[u]);break;case"</futureMetadata>":break;case"<bk>":break;case"</bk>":break;case"<rc":s==1?n.Cell.push({type:n.Types[c.t-1].name,index:+c.v}):s==0&&n.Value.push({type:n.Types[c.t-1].name,index:+c.v});break;case"</rc>":break;case"<cellMetadata":s=1;break;case"</cellMetadata>":s=2;break;case"<valueMetadata":s=0;break;case"</valueMetadata>":s=2;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;case"<rvb":if(!a)break;a.offsets||(a.offsets=[]),a.offsets.push(+c.i);break;default:if(!i&&r?.WTF)throw new Error("unrecognized "+c[0]+" in metadata")}return o}),n}function zKe(){var t=[ui];return t.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),t.join("")}function HKe(t){var e=[];if(!t)return e;var r=1;return(t.match(Ls)||[]).forEach(function(n){var i=ht(n);switch(i[0]){case"<?xml":break;case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete i[0],i.i?r=i.i:i.i=r,e.push(i);break}}),e}function WKe(t){var e={};e.i=t.read_shift(4);var r={};r.r=t.read_shift(4),r.c=t.read_shift(4),e.r=pr(r);var n=t.read_shift(1);return n&2&&(e.l="1"),n&8&&(e.a="1"),e}function GKe(t,e,r){var n=[];return Uu(t,function(s,a,o){switch(o){case 63:n.push(s);break;default:if(!a.T)throw new Error("Unexpected record 0x"+o.toString(16))}}),n}function KKe(t,e,r,n){if(!t)return t;var i=n||{},s=!1;Uu(t,function(o,c,u){switch(u){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:s=!0;break;case 36:s=!1;break;default:if(!c.T){if(!s||i.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}},i)}function XKe(t,e){if(!t)return"??";var r=(t.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return e["!id"][r].Target}function Tle(t,e){var r=[21600,21600],n=["m0,0l0",r[1],r[0],r[1],r[0],"0xe"].join(","),i=[Xe("xml",null,{"xmlns:v":ja.v,"xmlns:o":ja.o,"xmlns:x":ja.x,"xmlns:mv":ja.mv}).replace(/\/>/,">"),Xe("o:shapelayout",Xe("o:idmap",null,{"v:ext":"edit",data:t}),{"v:ext":"edit"})],s=65536*t,a=e||[];return a.length>0&&i.push(Xe("v:shapetype",[Xe("v:stroke",null,{joinstyle:"miter"}),Xe("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202",coordsize:r.join(","),"o:spt":202,path:n})),a.forEach(function(o){++s,i.push(YKe(o,s))}),i.push("</xml>"),i.join("")}function YKe(t,e){var r=Xr(t[0]),n={color2:"#BEFF82",type:"gradient"};n.type=="gradient"&&(n.angle="-180");var i=n.type=="gradient"?Xe("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,s=Xe("v:fill",i,n),a={on:"t",obscured:"t"};return["<v:shape"+Iv({id:"_x0000_s"+e,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(t[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",s,Xe("v:shadow",null,a),Xe("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",ls("x:Anchor",[r.c+1,0,r.r+1,0,r.c+3,20,r.r+5,20].join(",")),ls("x:AutoFill","False"),ls("x:Row",String(r.r)),ls("x:Column",String(r.c)),t[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"].join("")}function tW(t,e,r,n){var i=t["!data"]!=null,s;e.forEach(function(a){var o=Xr(a.ref);if(i?(t["!data"][o.r]||(t["!data"][o.r]=[]),s=t["!data"][o.r][o.c]):s=t[a.ref],!s){s={t:"z"},i?t["!data"][o.r][o.c]=s:t[a.ref]=s;var c=Er(t["!ref"]||"BDWGO1000001:A1");c.s.r>o.r&&(c.s.r=o.r),c.e.r<o.r&&(c.e.r=o.r),c.s.c>o.c&&(c.s.c=o.c),c.e.c<o.c&&(c.e.c=o.c);var u=Yt(c);t["!ref"]=u}s.c||(s.c=[]);var l={a:a.author,t:a.t,r:a.r,T:r};a.h&&(l.h=a.h);for(var f=s.c.length-1;f>=0;--f){if(!r&&s.c[f].T)return;r&&!s.c[f].T&&s.c.splice(f,1)}if(r&&n){for(f=0;f<n.length;++f)if(l.a==n[f].id){l.a=n[f].name||l.a;break}}s.c.push(l)})}function ZKe(t,e){if(t.match(/<(?:\w+:)?comments *\/>/))return[];var r=[],n=[],i=t.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);i&&i[1]&&i[1].split(/<\/\w*:?author>/).forEach(function(a){if(!(a===""||a.trim()==="")){var o=a.match(/<(?:\w+:)?author[^>]*>(.*)/);o&&r.push(o[1])}});var s=t.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return s&&s[1]&&s[1].split(/<\/\w*:?comment>/).forEach(function(a){if(!(a===""||a.trim()==="")){var o=a.match(/<(?:\w+:)?comment[^>]*>/);if(o){var c=ht(o[0]),u={author:c.authorId&&r[c.authorId]||"sheetjsghost",ref:c.ref,guid:c.guid},l=Xr(c.ref);if(!(e.sheetRows&&e.sheetRows<=l.r)){var f=a.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),d=!!f&&!!f[1]&&gD(f[1])||{r:"",t:"",h:""};u.r=d.r,d.r=="<t></t>"&&(d.t=d.h=""),u.t=(d.t||"").replace(/\r\n/g,`
`).replace(/\r/g,`
`),e.cellHTML&&(u.h=d.h),n.push(u)}}}}),n}function JKe(t){var e=[ui,Xe("comments",null,{xmlns:I0[0]})],r=[];return e.push("<authors>"),t.forEach(function(n){n[1].forEach(function(i){var s=nr(i.a);r.indexOf(s)==-1&&(r.push(s),e.push("<author>"+s+"</author>")),i.T&&i.ID&&r.indexOf("tc="+i.ID)==-1&&(r.push("tc="+i.ID),e.push("<author>tc="+i.ID+"</author>"))})}),r.length==0&&(r.push("SheetJ5"),e.push("<author>SheetJ5</author>")),e.push("</authors>"),e.push("<commentList>"),t.forEach(function(n){var i=0,s=[],a=0;if(n[1][0]&&n[1][0].T&&n[1][0].ID&&(i=r.indexOf("tc="+n[1][0].ID)),n[1].forEach(function(u){u.a&&(i=r.indexOf(nr(u.a))),u.T&&++a,s.push(u.t==null?"":nr(u.t))}),a===0)n[1].forEach(function(u){e.push('<comment ref="'+n[0]+'" authorId="'+r.indexOf(nr(u.a))+'"><text>'),e.push(ls("t",u.t==null?"":nr(u.t))),e.push("</text></comment>")});else{e.push('<comment ref="'+n[0]+'" authorId="'+i+'"><text>');for(var o=`Comment:
    `+s[0]+`
`,c=1;c<s.length;++c)o+=`Reply:
    `+s[c]+`
`;e.push(ls("t",nr(o))),e.push("</text></comment>")}}),e.push("</commentList>"),e.length>2&&(e[e.length]="</comments>",e[1]=e[1].replace("/>",">")),e.join("")}function QKe(t,e){var r=[],n=!1,i={},s=0;return t.replace(Ls,function(o,c){var u=ht(o);switch(Pc(u[0])){case"<?xml":break;case"<ThreadedComments":break;case"</ThreadedComments>":break;case"<threadedComment":i={author:u.personId,guid:u.id,ref:u.ref,T:1};break;case"</threadedComment>":i.t!=null&&r.push(i);break;case"<text>":case"<text":s=c+o.length;break;case"</text>":i.t=t.slice(s,c).replace(/\r\n/g,`
`).replace(/\r/g,`
`);break;case"<mentions":case"<mentions>":n=!0;break;case"</mentions>":n=!1;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&e.WTF)throw new Error("unrecognized "+u[0]+" in threaded comments")}return o}),r}function eXe(t,e,r){var n=[ui,Xe("ThreadedComments",null,{xmlns:Oi.TCMNT}).replace(/[\/]>/,">")];return t.forEach(function(i){var s="";(i[1]||[]).forEach(function(a,o){if(!a.T){delete a.ID;return}a.a&&e.indexOf(a.a)==-1&&e.push(a.a);var c={ref:i[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+r.tcid++).slice(-12)+"}"};o==0?s=c.id:c.parentId=s,a.ID=c.id,a.a&&(c.personId="{54EE7950-7262-4200-6969-"+("000000000000"+e.indexOf(a.a)).slice(-12)+"}"),n.push(Xe("threadedComment",ls("text",a.t||""),c))})}),n.push("</ThreadedComments>"),n.join("")}function tXe(t,e){var r=[],n=!1;return t.replace(Ls,function(s){var a=ht(s);switch(Pc(a[0])){case"<?xml":break;case"<personList":break;case"</personList>":break;case"<person":r.push({name:a.displayname,id:a.id});break;case"</person>":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&e.WTF)throw new Error("unrecognized "+a[0]+" in threaded comments")}return s}),r}function rXe(t){var e=[ui,Xe("personList",null,{xmlns:Oi.TCMNT,"xmlns:x":I0[0]}).replace(/[\/]>/,">")];return t.forEach(function(r,n){e.push(Xe("person",null,{displayName:r,id:"{54EE7950-7262-4200-6969-"+("000000000000"+n).slice(-12)+"}",userId:r,providerId:"None"}))}),e.push("</personList>"),e.join("")}function nXe(t){var e={};e.iauthor=t.read_shift(4);var r=B0(t);return e.rfx=r.s,e.ref=pr(r.s),t.l+=16,e}function iXe(t,e){return e==null&&(e=Ne(36)),e.write_shift(4,t[1].iauthor),um(t[0],e),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e}var sXe=Ms;function aXe(t){return Ni(t.slice(0,54))}function oXe(t,e){var r=[],n=[],i={},s=!1;return Uu(t,function(o,c,u){switch(u){case 632:n.push(o);break;case 635:i=o;break;case 637:i.t=o.t,i.h=o.h,i.r=o.r;break;case 636:if(i.author=n[i.iauthor],delete i.iauthor,e.sheetRows&&i.rfx&&e.sheetRows<=i.rfx.r)break;i.t||(i.t=""),delete i.rfx,r.push(i);break;case 3072:break;case 35:s=!0;break;case 36:s=!1;break;case 37:break;case 38:break;default:if(!c.T){if(!s||e.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}}),r}function cXe(t){var e=_a(),r=[];return Le(e,628),Le(e,630),t.forEach(function(n){n[1].forEach(function(i){r.indexOf(i.a)>-1||(r.push(i.a.slice(0,54)),Le(e,632,aXe(i.a)))})}),Le(e,631),Le(e,633),t.forEach(function(n){n[1].forEach(function(i){i.iauthor=r.indexOf(i.a);var s={s:Xr(n[0]),e:Xr(n[0])};Le(e,635,iXe([s,i])),i.t&&i.t.length>0&&Le(e,637,Sze(i)),Le(e,636),delete i.iauthor})}),Le(e,634),Le(e,629),e.end()}var lXe="application/vnd.ms-office.vbaProject";function uXe(t){var e=St.utils.cfb_new({root:"R"});return t.FullPaths.forEach(function(r,n){if(!(r.slice(-1)==="/"||!r.match(/_VBA_PROJECT_CUR/))){var i=r.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");St.utils.cfb_add(e,i,t.FileIndex[n].content)}}),St.write(e)}function fXe(t,e){e.FullPaths.forEach(function(r,n){if(n!=0){var i=r.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");i.slice(-1)!=="/"&&St.utils.cfb_add(t,i,e.FileIndex[n].content)}})}var dXe=["xlsb","xlsm","xlam","biff8","xla"];function hXe(){return{"!type":"dialog"}}function pXe(){return{"!type":"dialog"}}function mXe(){return{"!type":"macro"}}function gXe(){return{"!type":"macro"}}var _h=function(){var t=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,e={r:0,c:0};function r(n,i,s,a){var o=!1,c=!1;s.length==0?c=!0:s.charAt(0)=="["&&(c=!0,s=s.slice(1,-1)),a.length==0?o=!0:a.charAt(0)=="["&&(o=!0,a=a.slice(1,-1));var u=s.length>0?parseInt(s,10)|0:0,l=a.length>0?parseInt(a,10)|0:0;return o?l+=e.c:--l,c?u+=e.r:--u,i+(o?"":"$")+or(l)+(c?"":"$")+xr(u)}return function(i,s){return e=s,i.replace(t,r)}}(),wD=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,D5=function(){return function(e,r){return e.replace(wD,function(n,i,s,a,o,c){var u=sD(a)-(s?0:r.c),l=iD(c)-(o?0:r.r),f=o=="$"?l+1:l==0?"":"["+l+"]",d=s=="$"?u+1:u==0?"":"["+u+"]";return i+"R"+f+"C"+d})}}();function Ale(t,e){return t.replace(wD,function(r,n,i,s,a,o){return n+(i=="$"?i+s:or(sD(s)+e.c))+(a=="$"?a+o:xr(iD(o)+e.r))})}function vXe(t,e,r){var n=Fi(e),i=n.s,s=Xr(r),a={r:s.r-i.r,c:s.c-i.c};return Ale(t,a)}function yXe(t){return t.length!=1}function rW(t){return t.replace(/_xlfn\./g,"")}function di(t){t.l+=1}function Qf(t,e){var r=t.read_shift(2);return[r&16383,r>>14&1,r>>15&1]}function Cle(t,e,r){var n=2;if(r){if(r.biff>=2&&r.biff<=5)return Ile(t);r.biff==12&&(n=4)}var i=t.read_shift(n),s=t.read_shift(n),a=Qf(t),o=Qf(t);return{s:{r:i,c:a[0],cRel:a[1],rRel:a[2]},e:{r:s,c:o[0],cRel:o[1],rRel:o[2]}}}function Ile(t){var e=Qf(t),r=Qf(t),n=t.read_shift(1),i=t.read_shift(1);return{s:{r:e[0],c:n,cRel:e[1],rRel:e[2]},e:{r:r[0],c:i,cRel:r[1],rRel:r[2]}}}function bXe(t,e,r){if(r.biff<8)return Ile(t);var n=t.read_shift(r.biff==12?4:2),i=t.read_shift(r.biff==12?4:2),s=Qf(t),a=Qf(t);return{s:{r:n,c:s[0],cRel:s[1],rRel:s[2]},e:{r:i,c:a[0],cRel:a[1],rRel:a[2]}}}function Ple(t,e,r){if(r&&r.biff>=2&&r.biff<=5)return wXe(t);var n=t.read_shift(r&&r.biff==12?4:2),i=Qf(t);return{r:n,c:i[0],cRel:i[1],rRel:i[2]}}function wXe(t){var e=Qf(t),r=t.read_shift(1);return{r:e[0],c:r,cRel:e[1],rRel:e[2]}}function _Xe(t){var e=t.read_shift(2),r=t.read_shift(2);return{r:e,c:r&255,fQuoted:!!(r&16384),cRel:r>>15,rRel:r>>15}}function xXe(t,e,r){var n=r&&r.biff?r.biff:8;if(n>=2&&n<=5)return SXe(t);var i=t.read_shift(n>=12?4:2),s=t.read_shift(2),a=(s&16384)>>14,o=(s&32768)>>15;if(s&=16383,o==1)for(;i>524287;)i-=1048576;if(a==1)for(;s>8191;)s=s-16384;return{r:i,c:s,cRel:a,rRel:o}}function SXe(t){var e=t.read_shift(2),r=t.read_shift(1),n=(e&32768)>>15,i=(e&16384)>>14;return e&=16383,n==1&&e>=8192&&(e=e-16384),i==1&&r>=128&&(r=r-256),{r:e,c:r,cRel:i,rRel:n}}function EXe(t,e,r){var n=(t[t.l++]&96)>>5,i=Cle(t,r.biff>=2&&r.biff<=5?6:8,r);return[n,i]}function kXe(t,e,r){var n=(t[t.l++]&96)>>5,i=t.read_shift(2,"i"),s=8;if(r)switch(r.biff){case 5:t.l+=12,s=6;break;case 12:s=12;break}var a=Cle(t,s,r);return[n,i,a]}function TXe(t,e,r){var n=(t[t.l++]&96)>>5;return t.l+=r&&r.biff>8?12:r.biff<8?6:8,[n]}function AXe(t,e,r){var n=(t[t.l++]&96)>>5,i=t.read_shift(2),s=8;if(r)switch(r.biff){case 5:t.l+=12,s=6;break;case 12:s=12;break}return t.l+=s,[n,i]}function CXe(t,e,r){var n=(t[t.l++]&96)>>5,i=bXe(t,e-1,r);return[n,i]}function IXe(t,e,r){var n=(t[t.l++]&96)>>5;return t.l+=r.biff==2?6:r.biff==12?14:7,[n]}function nW(t){var e=t[t.l+1]&1,r=1;return t.l+=4,[e,r]}function PXe(t,e,r){t.l+=2;for(var n=t.read_shift(r&&r.biff==2?1:2),i=[],s=0;s<=n;++s)i.push(t.read_shift(r&&r.biff==2?1:2));return i}function RXe(t,e,r){var n=t[t.l+1]&255?1:0;return t.l+=2,[n,t.read_shift(r&&r.biff==2?1:2)]}function OXe(t,e,r){var n=t[t.l+1]&255?1:0;return t.l+=2,[n,t.read_shift(r&&r.biff==2?1:2)]}function BXe(t){var e=t[t.l+1]&255?1:0;return t.l+=2,[e,t.read_shift(2)]}function DXe(t,e,r){var n=t[t.l+1]&255?1:0;return t.l+=r&&r.biff==2?3:4,[n]}function Rle(t){var e=t.read_shift(1),r=t.read_shift(1);return[e,r]}function MXe(t){return t.read_shift(2),Rle(t)}function NXe(t){return t.read_shift(2),Rle(t)}function FXe(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var i=Ple(t,0,r);return[n,i]}function LXe(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var i=xXe(t,0,r);return[n,i]}function $Xe(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var i=t.read_shift(2);r&&r.biff==5&&(t.l+=12);var s=Ple(t,0,r);return[n,i,s]}function UXe(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var i=t.read_shift(r&&r.biff<=3?1:2);return[eZe[i],Dle[i],n]}function jXe(t,e,r){var n=t[t.l++],i=t.read_shift(1),s=r&&r.biff<=3?[n==88?-1:0,t.read_shift(1)]:VXe(t);return[i,(s[0]===0?Dle:QYe)[s[1]]]}function VXe(t){return[t[t.l+1]>>7,t.read_shift(2)&32767]}function qXe(t,e,r){t.l+=r&&r.biff==2?3:4}function zXe(t,e,r){if(t.l++,r&&r.biff==12)return[t.read_shift(4,"i"),0];var n=t.read_shift(2),i=t.read_shift(r&&r.biff==2?1:2);return[n,i]}function HXe(t){return t.l++,ju[t.read_shift(1)]}function WXe(t){return t.l++,t.read_shift(2)}function GXe(t){return t.l++,t.read_shift(1)!==0}function KXe(t){return t.l++,Rs(t)}function XXe(t,e,r){return t.l++,Yy(t,e-1,r)}function YXe(t,e){var r=[t.read_shift(1)];if(e==12)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2;break}switch(r[0]){case 4:r[1]=ni(t,1)?"TRUE":"FALSE",e!=12&&(t.l+=7);break;case 37:case 16:r[1]=ju[t[t.l]],t.l+=e==12?4:8;break;case 0:t.l+=8;break;case 1:r[1]=Rs(t);break;case 2:r[1]=D0(t,0,{biff:e>0&&e<8?2:e});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function ZXe(t,e,r){for(var n=t.read_shift(r.biff==12?4:2),i=[],s=0;s!=n;++s)i.push((r.biff==12?B0:B5)(t));return i}function JXe(t,e,r){var n=0,i=0;r.biff==12?(n=t.read_shift(4),i=t.read_shift(4)):(i=1+t.read_shift(1),n=1+t.read_shift(2)),r.biff>=2&&r.biff<8&&(--n,--i==0&&(i=256));for(var s=0,a=[];s!=n&&(a[s]=[]);++s)for(var o=0;o!=i;++o)a[s][o]=YXe(t,r.biff);return a}function QXe(t,e,r){var n=t.read_shift(1)>>>5&3,i=!r||r.biff>=8?4:2,s=t.read_shift(i);switch(r.biff){case 2:t.l+=5;break;case 3:case 4:t.l+=8;break;case 5:t.l+=12;break}return[n,0,s]}function eYe(t,e,r){if(r.biff==5)return tYe(t);var n=t.read_shift(1)>>>5&3,i=t.read_shift(2),s=t.read_shift(4);return[n,i,s]}function tYe(t){var e=t.read_shift(1)>>>5&3,r=t.read_shift(2,"i");t.l+=8;var n=t.read_shift(2);return t.l+=12,[e,r,n]}function rYe(t,e,r){var n=t.read_shift(1)>>>5&3;t.l+=r&&r.biff==2?3:4;var i=t.read_shift(r&&r.biff==2?1:2);return[n,i]}function nYe(t,e,r){var n=t.read_shift(1)>>>5&3,i=t.read_shift(r&&r.biff==2?1:2);return[n,i]}function iYe(t,e,r){var n=t.read_shift(1)>>>5&3;return t.l+=4,r.biff<8&&t.l--,r.biff==12&&(t.l+=2),[n]}function sYe(t,e,r){var n=(t[t.l++]&96)>>5,i=t.read_shift(2),s=4;if(r)switch(r.biff){case 5:s=15;break;case 12:s=6;break}return t.l+=s,[n,i]}var aYe=Fs,oYe=Fs,cYe=Fs;function Jy(t,e,r){return t.l+=2,[_Xe(t)]}function _D(t){return t.l+=6,[]}var lYe=Jy,uYe=_D,fYe=_D,dYe=Jy;function Ole(t){return t.l+=2,[ii(t),t.read_shift(2)&1]}var hYe=Jy,pYe=Ole,mYe=_D,gYe=Jy,vYe=Jy,yYe=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function bYe(t){t.l+=2;var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(4),i=t.read_shift(2),s=t.read_shift(2),a=yYe[r>>2&31];return{ixti:e,coltype:r&3,rt:a,idx:n,c:i,C:s}}function wYe(t){return t.l+=2,[t.read_shift(4)]}function _Ye(t,e,r){return t.l+=5,t.l+=2,t.l+=r.biff==2?1:4,["PTGSHEET"]}function xYe(t,e,r){return t.l+=r.biff==2?4:5,["PTGENDSHEET"]}function SYe(t){var e=t.read_shift(1)>>>5&3,r=t.read_shift(2);return[e,r]}function EYe(t){var e=t.read_shift(1)>>>5&3,r=t.read_shift(2);return[e,r]}function kYe(t){return t.l+=4,[0,0]}var iW={1:{n:"PtgExp",f:zXe},2:{n:"PtgTbl",f:cYe},3:{n:"PtgAdd",f:di},4:{n:"PtgSub",f:di},5:{n:"PtgMul",f:di},6:{n:"PtgDiv",f:di},7:{n:"PtgPower",f:di},8:{n:"PtgConcat",f:di},9:{n:"PtgLt",f:di},10:{n:"PtgLe",f:di},11:{n:"PtgEq",f:di},12:{n:"PtgGe",f:di},13:{n:"PtgGt",f:di},14:{n:"PtgNe",f:di},15:{n:"PtgIsect",f:di},16:{n:"PtgUnion",f:di},17:{n:"PtgRange",f:di},18:{n:"PtgUplus",f:di},19:{n:"PtgUminus",f:di},20:{n:"PtgPercent",f:di},21:{n:"PtgParen",f:di},22:{n:"PtgMissArg",f:di},23:{n:"PtgStr",f:XXe},26:{n:"PtgSheet",f:_Ye},27:{n:"PtgEndSheet",f:xYe},28:{n:"PtgErr",f:HXe},29:{n:"PtgBool",f:GXe},30:{n:"PtgInt",f:WXe},31:{n:"PtgNum",f:KXe},32:{n:"PtgArray",f:IXe},33:{n:"PtgFunc",f:UXe},34:{n:"PtgFuncVar",f:jXe},35:{n:"PtgName",f:QXe},36:{n:"PtgRef",f:FXe},37:{n:"PtgArea",f:EXe},38:{n:"PtgMemArea",f:rYe},39:{n:"PtgMemErr",f:aYe},40:{n:"PtgMemNoMem",f:oYe},41:{n:"PtgMemFunc",f:nYe},42:{n:"PtgRefErr",f:iYe},43:{n:"PtgAreaErr",f:TXe},44:{n:"PtgRefN",f:LXe},45:{n:"PtgAreaN",f:CXe},46:{n:"PtgMemAreaN",f:SYe},47:{n:"PtgMemNoMemN",f:EYe},57:{n:"PtgNameX",f:eYe},58:{n:"PtgRef3d",f:$Xe},59:{n:"PtgArea3d",f:kXe},60:{n:"PtgRefErr3d",f:sYe},61:{n:"PtgAreaErr3d",f:AXe},255:{}},TYe={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},AYe={1:{n:"PtgElfLel",f:Ole},2:{n:"PtgElfRw",f:gYe},3:{n:"PtgElfCol",f:lYe},6:{n:"PtgElfRwV",f:vYe},7:{n:"PtgElfColV",f:dYe},10:{n:"PtgElfRadical",f:hYe},11:{n:"PtgElfRadicalS",f:mYe},13:{n:"PtgElfColS",f:uYe},15:{n:"PtgElfColSV",f:fYe},16:{n:"PtgElfRadicalLel",f:pYe},25:{n:"PtgList",f:bYe},29:{n:"PtgSxName",f:wYe},255:{}},CYe={0:{n:"PtgAttrNoop",f:kYe},1:{n:"PtgAttrSemi",f:DXe},2:{n:"PtgAttrIf",f:OXe},4:{n:"PtgAttrChoose",f:PXe},8:{n:"PtgAttrGoto",f:RXe},16:{n:"PtgAttrSum",f:qXe},32:{n:"PtgAttrBaxcel",f:nW},33:{n:"PtgAttrBaxcel",f:nW},64:{n:"PtgAttrSpace",f:MXe},65:{n:"PtgAttrSpaceSemi",f:NXe},128:{n:"PtgAttrIfError",f:BXe},255:{}};function Qy(t,e,r,n){if(n.biff<8)return Fs(t,e);for(var i=t.l+e,s=[],a=0;a!==r.length;++a)switch(r[a][0]){case"PtgArray":r[a][1]=JXe(t,0,n),s.push(r[a][1]);break;case"PtgMemArea":r[a][2]=ZXe(t,r[a][1],n),s.push(r[a][2]);break;case"PtgExp":n&&n.biff==12&&(r[a][1][1]=t.read_shift(4),s.push(r[a][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[a][0]}return e=i-t.l,e!==0&&s.push(Fs(t,e)),s}function e2(t,e,r){for(var n=t.l+e,i,s,a=[];n!=t.l;)e=n-t.l,s=t[t.l],i=iW[s]||iW[TYe[s]],(s===24||s===25)&&(i=(s===24?AYe:CYe)[t[t.l+1]]),!i||!i.f?Fs(t,e):a.push([i.n,i.f(t,e,r)]);return a}function IYe(t){for(var e=[],r=0;r<t.length;++r){for(var n=t[r],i=[],s=0;s<n.length;++s){var a=n[s];if(a)switch(a[0]){case 2:i.push('"'+a[1].replace(/"/g,'""')+'"');break;default:i.push(a[1])}else i.push("")}e.push(i.join(","))}return e.join(";")}var PYe={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function RYe(t,e){var r=t.lastIndexOf("!"),n=e.lastIndexOf("!");return r==-1&&n==-1?t+":"+e:r>0&&n>0&&t.slice(0,r).toLowerCase()==e.slice(0,n).toLowerCase()?t+":"+e.slice(n+1):(console.error("Cannot hydrate range",t,e),t+":"+e)}function Ble(t,e,r){if(!t)return"SH33TJSERR0";if(r.biff>8&&(!t.XTI||!t.XTI[e]))return t.SheetNames[e];if(!t.XTI)return"SH33TJSERR6";var n=t.XTI[e];if(r.biff<8)return e>1e4&&(e-=65536),e<0&&(e=-e),e==0?"":t.XTI[e-1];if(!n)return"SH33TJSERR1";var i="";if(r.biff>8)switch(t[n[0]][0]){case 357:return i=n[1]==-1?"#REF":t.SheetNames[n[1]],n[1]==n[2]?i:i+":"+t.SheetNames[n[2]];case 358:return r.SID!=null?t.SheetNames[r.SID]:"SH33TJSSAME"+t[n[0]][0];case 355:default:return"SH33TJSSRC"+t[n[0]][0]}switch(t[n[0]][0][0]){case 1025:return i=n[1]==-1?"#REF":t.SheetNames[n[1]]||"SH33TJSERR3",n[1]==n[2]?i:i+":"+t.SheetNames[n[2]];case 14849:return t[n[0]].slice(1).map(function(s){return s.Name}).join(";;");default:return t[n[0]][0][3]?(i=n[1]==-1?"#REF":t[n[0]][0][3][n[1]]||"SH33TJSERR4",n[1]==n[2]?i:i+":"+t[n[0]][0][3][n[2]]):"SH33TJSERR2"}}function sW(t,e,r){var n=Ble(t,e,r);return n=="#REF"?n:Rv(n,r)}function xs(t,e,r,n,i){var s=i&&i.biff||8,a={s:{c:0,r:0}},o=[],c,u,l,f=0,d=0,h,m="";if(!t[0]||!t[0][0])return"";for(var p=-1,g="",v=0,y=t[0].length;v<y;++v){var b=t[0][v];switch(b[0]){case"PtgUminus":o.push("-"+o.pop());break;case"PtgUplus":o.push("+"+o.pop());break;case"PtgPercent":o.push(o.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(c=o.pop(),u=o.pop(),p>=0){switch(t[0][p][1][0]){case 0:g=Ir(" ",t[0][p][1][1]);break;case 1:g=Ir("\r",t[0][p][1][1]);break;default:if(g="",i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][p][1][0])}u=u+g,p=-1}o.push(u+PYe[b[0]]+c);break;case"PtgIsect":c=o.pop(),u=o.pop(),o.push(u+" "+c);break;case"PtgUnion":c=o.pop(),u=o.pop(),o.push(u+","+c);break;case"PtgRange":c=o.pop(),u=o.pop(),o.push(RYe(u,c));break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":l=Rg(b[1][1],a,i),o.push(Og(l,s));break;case"PtgRefN":l=r?Rg(b[1][1],r,i):b[1][1],o.push(Og(l,s));break;case"PtgRef3d":f=b[1][1],l=Rg(b[1][2],a,i),m=sW(n,f,i),o.push(m+"!"+Og(l,s));break;case"PtgFunc":case"PtgFuncVar":var _=b[1][0],x=b[1][1];_||(_=0),_&=127;var E=_==0?[]:o.slice(-_);o.length-=_,x==="User"&&(x=E.shift()),o.push(x+"("+E.join(",")+")");break;case"PtgBool":o.push(b[1]?"TRUE":"FALSE");break;case"PtgInt":o.push(b[1]);break;case"PtgNum":o.push(String(b[1]));break;case"PtgStr":o.push('"'+b[1].replace(/"/g,'""')+'"');break;case"PtgErr":o.push(b[1]);break;case"PtgAreaN":h=DH(b[1][1],r?{s:r}:a,i),o.push(tE(h,i));break;case"PtgArea":h=DH(b[1][1],a,i),o.push(tE(h,i));break;case"PtgArea3d":f=b[1][1],h=b[1][2],m=sW(n,f,i),o.push(m+"!"+tE(h,i));break;case"PtgAttrSum":o.push("SUM("+o.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":d=b[1][2];var k=(n.names||[])[d-1]||(n[0]||[])[d],B=k?k.Name:"SH33TJSNAME"+String(d);B&&B.slice(0,6)=="_xlfn."&&!i.xlfn&&(B=B.slice(6)),o.push(B);break;case"PtgNameX":var D=b[1][1];d=b[1][2];var z;if(i.biff<=5)D<0&&(D=-D),n[D]&&(z=n[D][d]);else{var U="";if(((n[D]||[])[0]||[])[0]==14849||(((n[D]||[])[0]||[])[0]==1025?n[D][d]&&n[D][d].itab>0&&(U=n.SheetNames[n[D][d].itab-1]+"!"):U=n.SheetNames[d-1]+"!"),n[D]&&n[D][d])U+=n[D][d].Name;else if(n[0]&&n[0][d])U+=n[0][d].Name;else{var S=(Ble(n,D,i)||"").split(";;");S[d-1]?U=S[d-1]:U+="SH33TJSERRX"}o.push(U);break}z||(z={Name:"SH33TJSERRY"}),o.push(z.Name);break;case"PtgParen":var T="(",w=")";if(p>=0){switch(g="",t[0][p][1][0]){case 2:T=Ir(" ",t[0][p][1][1])+T;break;case 3:T=Ir("\r",t[0][p][1][1])+T;break;case 4:w=Ir(" ",t[0][p][1][1])+w;break;case 5:w=Ir("\r",t[0][p][1][1])+w;break;default:if(i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][p][1][0])}p=-1}o.push(T+o.pop()+w);break;case"PtgRefErr":o.push("#REF!");break;case"PtgRefErr3d":o.push("#REF!");break;case"PtgExp":l={c:b[1][1],r:b[1][0]};var A={c:r.c,r:r.r};if(n.sharedf[pr(l)]){var F=n.sharedf[pr(l)];o.push(xs(F,a,A,n,i))}else{var P=!1;for(c=0;c!=n.arrayf.length;++c)if(u=n.arrayf[c],!(l.c<u[0].s.c||l.c>u[0].e.c)&&!(l.r<u[0].s.r||l.r>u[0].e.r)){o.push(xs(u[1],a,A,n,i)),P=!0;break}P||o.push(b[1])}break;case"PtgArray":o.push("{"+IYe(b[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":p=v;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":o.push("");break;case"PtgAreaErr":o.push("#REF!");break;case"PtgAreaErr3d":o.push("#REF!");break;case"PtgList":o.push("Table"+b[1].idx+"[#"+b[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(b));default:throw new Error("Unrecognized Formula Token: "+String(b))}var O=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(i.biff!=3&&p>=0&&O.indexOf(t[0][v][0])==-1){b=t[0][p];var R=!0;switch(b[1][0]){case 4:R=!1;case 0:g=Ir(" ",b[1][1]);break;case 5:R=!1;case 1:g=Ir("\r",b[1][1]);break;default:if(g="",i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+b[1][0])}o.push((R?g:"")+o.pop()+(R?"":g)),p=-1}}if(o.length>1&&i.WTF)throw new Error("bad formula stack");return o[0]=="TRUE"?!0:o[0]=="FALSE"?!1:o[0]}function OYe(t,e,r){var n=t.l+e,i=r.biff==2?1:2,s,a=t.read_shift(i);if(a==65535)return[[],Fs(t,e-2)];var o=e2(t,a,r);return e!==a+i&&(s=Qy(t,e-a-i,o,r)),t.l=n,[o,s]}function BYe(t,e,r){var n=t.l+e,i=r.biff==2?1:2,s,a=t.read_shift(i);if(a==65535)return[[],Fs(t,e-2)];var o=e2(t,a,r);return e!==a+i&&(s=Qy(t,e-a-i,o,r)),t.l=n,[o,s]}function DYe(t,e,r,n){var i=t.l+e,s=e2(t,n,r),a;return i!==t.l&&(a=Qy(t,i-t.l,s,r)),[s,a]}function MYe(t,e,r){var n=t.l+e,i,s=t.read_shift(2),a=e2(t,s,r);return s==65535?[[],Fs(t,e-2)]:(e!==s+2&&(i=Qy(t,n-s-2,a,r)),[a,i])}function NYe(t){var e;if(ou(t,t.l+6)!==65535)return[Rs(t),"n"];switch(t[t.l]){case 0:return t.l+=8,["String","s"];case 1:return e=t[t.l+2]===1,t.l+=8,[e,"b"];case 2:return e=t[t.l+2],t.l+=8,[e,"e"];case 3:return t.l+=8,["","s"]}return[]}function FYe(t){if(t==null){var e=Ne(8);return e.write_shift(1,3),e.write_shift(1,0),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,65535),e}else if(typeof t=="number")return zh(t);return zh(0)}function aE(t,e,r){var n=t.l+e,i=Al(t);r.biff==2&&++t.l;var s=NYe(t),a=t.read_shift(1);r.biff!=2&&(t.read_shift(1),r.biff>=5&&t.read_shift(4));var o=BYe(t,n-t.l,r);return{cell:i,val:s[0],formula:o,shared:a>>3&1,tt:s[1]}}function LYe(t,e,r,n,i){var s=Wh(e,r,i),a=FYe(t.v),o=Ne(6),c=33;o.write_shift(2,c),o.write_shift(4,0);for(var u=Ne(t.bf.length),l=0;l<t.bf.length;++l)u[l]=t.bf[l];var f=wi([s,a,o,u]);return f}function M5(t,e,r){var n=t.read_shift(4),i=e2(t,n,r),s=t.read_shift(4),a=s>0?Qy(t,s,i,r):null;return[i,a]}var $Ye=M5,N5=M5,UYe=M5,jYe=M5;function aW(t){if((t|0)==t&&t<Math.pow(2,16)&&t>=0){var e=Ne(11);return e.write_shift(4,3),e.write_shift(1,30),e.write_shift(2,t),e.write_shift(4,0),e}var r=Ne(17);return r.write_shift(4,11),r.write_shift(1,31),r.write_shift(8,t),r.write_shift(4,0),r}function VYe(t){var e=Ne(10);return e.write_shift(4,2),e.write_shift(1,28),e.write_shift(1,t),e.write_shift(4,0),e}function qYe(t){var e=Ne(10);return e.write_shift(4,2),e.write_shift(1,29),e.write_shift(1,t?1:0),e.write_shift(4,0),e}function zYe(t){var e=Ne(7);e.write_shift(4,3+2*t.length),e.write_shift(1,23),e.write_shift(2,t.length);var r=Ne(2*t.length);r.write_shift(2*t.length,t,"utf16le");var n=Ne(4);return n.write_shift(4,0),wi([e,r,n])}function HYe(t){var e=Xr(t),r=Ne(15);return r.write_shift(4,7),r.write_shift(1,36),r.write_shift(4,e.r),r.write_shift(2,e.c|(t.charAt(0)=="$"?0:1)<<14|(t.match(/\$\d/)?0:1)<<15),r.write_shift(4,0),r}function WYe(t,e){var r=t.lastIndexOf("!"),n=t.slice(0,r);t=t.slice(r+1);var i=Xr(t);n.charAt(0)=="'"&&(n=n.slice(1,-1).replace(/''/g,"'"));var s=Ne(17);return s.write_shift(4,9),s.write_shift(1,58),s.write_shift(2,2+e.SheetNames.map(function(a){return a.toLowerCase()}).indexOf(n.toLowerCase())),s.write_shift(4,i.r),s.write_shift(2,i.c|(t.charAt(0)=="$"?0:1)<<14|(t.match(/\$\d/)?0:1)<<15),s.write_shift(4,0),s}function GYe(t,e){var r=t.lastIndexOf("!"),n=t.slice(0,r);t=t.slice(r+1),n.charAt(0)=="'"&&(n=n.slice(1,-1).replace(/''/g,"'"));var i=Ne(17);return i.write_shift(4,9),i.write_shift(1,60),i.write_shift(2,2+e.SheetNames.map(function(s){return s.toLowerCase()}).indexOf(n.toLowerCase())),i.write_shift(4,0),i.write_shift(2,0),i.write_shift(4,0),i}function KYe(t){var e=t.split(":"),r=e[0],n=Ne(23);n.write_shift(4,15),r=e[0];var i=Xr(r);return n.write_shift(1,36),n.write_shift(4,i.r),n.write_shift(2,i.c|(r.charAt(0)=="$"?0:1)<<14|(r.match(/\$\d/)?0:1)<<15),n.write_shift(4,0),r=e[1],i=Xr(r),n.write_shift(1,36),n.write_shift(4,i.r),n.write_shift(2,i.c|(r.charAt(0)=="$"?0:1)<<14|(r.match(/\$\d/)?0:1)<<15),n.write_shift(4,0),n.write_shift(1,17),n.write_shift(4,0),n}function XYe(t,e){var r=t.lastIndexOf("!"),n=t.slice(0,r);t=t.slice(r+1),n.charAt(0)=="'"&&(n=n.slice(1,-1).replace(/''/g,"'"));var i=t.split(":");a=i[0];var s=Ne(27);s.write_shift(4,19);var a=i[0],o=Xr(a);return s.write_shift(1,58),s.write_shift(2,2+e.SheetNames.map(function(c){return c.toLowerCase()}).indexOf(n.toLowerCase())),s.write_shift(4,o.r),s.write_shift(2,o.c|(a.charAt(0)=="$"?0:1)<<14|(a.match(/\$\d/)?0:1)<<15),a=i[1],o=Xr(a),s.write_shift(1,58),s.write_shift(2,2+e.SheetNames.map(function(c){return c.toLowerCase()}).indexOf(n.toLowerCase())),s.write_shift(4,o.r),s.write_shift(2,o.c|(a.charAt(0)=="$"?0:1)<<14|(a.match(/\$\d/)?0:1)<<15),s.write_shift(1,17),s.write_shift(4,0),s}function YYe(t,e){var r=t.lastIndexOf("!"),n=t.slice(0,r);t=t.slice(r+1),n.charAt(0)=="'"&&(n=n.slice(1,-1).replace(/''/g,"'"));var i=Fi(t),s=Ne(23);return s.write_shift(4,15),s.write_shift(1,59),s.write_shift(2,2+e.SheetNames.map(function(a){return a.toLowerCase()}).indexOf(n.toLowerCase())),s.write_shift(4,i.s.r),s.write_shift(4,i.e.r),s.write_shift(2,i.s.c),s.write_shift(2,i.e.c),s.write_shift(4,0),s}function ZYe(t,e){if(typeof t=="number")return aW(t);if(typeof t=="boolean")return qYe(t);if(/^#(DIV\/0!|GETTING_DATA|N\/A|NAME\?|NULL!|NUM!|REF!|VALUE!)$/.test(t))return VYe(+fD[t]);if(t.match(/^\$?(?:[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D]|[A-Z]{1,2})\$?(?:10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})$/))return HYe(t);if(t.match(/^\$?(?:[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D]|[A-Z]{1,2})\$?(?:10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5}):\$?(?:[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D]|[A-Z]{1,2})\$?(?:10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})$/))return KYe(t);if(t.match(/^#REF!\$?(?:[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D]|[A-Z]{1,2})\$?(?:10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5}):\$?(?:[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D]|[A-Z]{1,2})\$?(?:10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})$/))return YYe(t,e);if(t.match(/^(?:'[^\\\/?*\[\]:]*'|[^'][^\\\/?*\[\]:'`~!@#$%^()\-=+{}|;,<.>]*)!\$?(?:[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D]|[A-Z]{1,2})\$?(?:10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})$/))return WYe(t,e);if(t.match(/^(?:'[^\\\/?*\[\]:]*'|[^'][^\\\/?*\[\]:'`~!@#$%^()\-=+{}|;,<.>]*)!\$?(?:[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D]|[A-Z]{1,2})\$?(?:10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5}):\$?(?:[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D]|[A-Z]{1,2})\$?(?:10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})$/))return XYe(t,e);if(/^(?:'[^\\\/?*\[\]:]*'|[^'][^\\\/?*\[\]:'`~!@#$%^()\-=+{}|;,<.>]*)!#REF!$/.test(t))return GYe(t,e);if(/^".*"$/.test(t))return zYe(t);if(/^[+-]\d+$/.test(t))return aW(parseInt(t,10));throw"Formula |"+t+"| not supported for XLSB"}var JYe=ZYe,QYe={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},Dle={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},eZe={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function oW(t){return t.slice(0,3)=="of:"&&(t=t.slice(3)),t.charCodeAt(0)==61&&(t=t.slice(1),t.charCodeAt(0)==61&&(t=t.slice(1))),t=t.replace(/COM\.MICROSOFT\./g,""),t=t.replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,function(e,r){return r.replace(/\./g,"")}),t=t.replace(/\$'([^']|'')+'/g,function(e){return e.slice(1)}),t=t.replace(/\$([^\]\. #$]+)/g,function(e,r){return r.match(/^([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])?(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})?$/)?e:r}),t=t.replace(/\[.(#[A-Z]*[?!])\]/g,"$1"),t.replace(/[;~]/g,",").replace(/\|/g,";")}function tZe(t){var e="of:="+t.replace(wD,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return e.replace(/;/g,"|").replace(/,/g,";")}function oE(t){t=t.replace(/\$'([^']|'')+'/g,function(n){return n.slice(1)}),t=t.replace(/\$([^\]\. #$]+)/g,function(n,i){return i.match(/^([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])?(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})?$/)?n:i});var e=t.split(":"),r=e[0].split(".")[0];return[r,e[0].split(".")[1]+(e.length>1?":"+(e[1].split(".")[1]||e[1].split(".")[0]):"")]}function Mle(t){return t.replace(/!/,".")}var Dg={},F1={},Mg=typeof Map<"u";function xD(t,e,r){var n=0,i=t.length;if(r){if(Mg?r.has(e):Object.prototype.hasOwnProperty.call(r,e)){for(var s=Mg?r.get(e):r[e];n<s.length;++n)if(t[s[n]].t===e)return t.Count++,s[n]}}else for(;n<i;++n)if(t[n].t===e)return t.Count++,n;return t[i]={t:e},t.Count++,t.Unique++,r&&(Mg?(r.has(e)||r.set(e,[]),r.get(e).push(i)):(Object.prototype.hasOwnProperty.call(r,e)||(r[e]=[]),r[e].push(i))),i}function F5(t,e){var r={min:t+1,max:t+1},n=-1;return e.MDW&&(As=e.MDW),e.width!=null?r.customWidth=1:e.wpx!=null?n=Nv(e.wpx):e.wch!=null&&(n=e.wch),n>-1?(r.width=r6(n),r.customWidth=1):e.width!=null&&(r.width=e.width),e.hidden&&(r.hidden=!0),e.level!=null&&(r.outlineLevel=r.level=e.level),r}function xh(t,e){if(t){var r=[.7,.7,.75,.75,.3,.3];e=="xlml"&&(r=[1,1,1,1,.5,.5]),t.left==null&&(t.left=r[0]),t.right==null&&(t.right=r[1]),t.top==null&&(t.top=r[2]),t.bottom==null&&(t.bottom=r[3]),t.header==null&&(t.header=r[4]),t.footer==null&&(t.footer=r[5])}}function yd(t,e,r){var n=r.revssf[e.z!=null?e.z:"General"],i=60,s=t.length;if(n==null&&r.ssf){for(;i<392;++i)if(r.ssf[i]==null){Uf(e.z,i),r.ssf[i]=e.z,r.revssf[e.z]=n=i;break}}for(i=0;i!=s;++i)if(t[i].numFmtId===n)return i;return t[s]={numFmtId:n,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},s}function Nle(t,e,r,n,i,s){try{n.cellNF&&(t.z=Bt[e])}catch(o){if(n.WTF)throw o}if(!(t.t==="z"&&!n.cellStyles)){if(t.t==="d"&&typeof t.v=="string"&&(t.v=Hn(t.v)),(!n||n.cellText!==!1)&&t.t!=="z")try{if(Bt[e]==null&&Uf(Rqe[e]||"General",e),t.t==="e")t.w=t.w||ju[t.v];else if(e===0)if(t.t==="n")(t.v|0)===t.v?t.w=t.v.toString(10):t.w=Av(t.v);else if(t.t==="d"){var a=xi(t.v);(a|0)===a?t.w=a.toString(10):t.w=Av(a)}else{if(t.v===void 0)return"";t.w=Vh(t.v,F1)}else t.t==="d"?t.w=eo(e,xi(t.v),F1):t.w=eo(e,t.v,F1)}catch(o){if(n.WTF)throw o}if(n.cellStyles&&r!=null)try{t.s=s.Fills[r],t.s.fgColor&&t.s.fgColor.theme&&!t.s.fgColor.rgb&&(t.s.fgColor.rgb=t6(i.themeElements.clrScheme[t.s.fgColor.theme].rgb,t.s.fgColor.tint||0),n.WTF&&(t.s.fgColor.raw_rgb=i.themeElements.clrScheme[t.s.fgColor.theme].rgb)),t.s.bgColor&&t.s.bgColor.theme&&(t.s.bgColor.rgb=t6(i.themeElements.clrScheme[t.s.bgColor.theme].rgb,t.s.bgColor.tint||0),n.WTF&&(t.s.bgColor.raw_rgb=i.themeElements.clrScheme[t.s.bgColor.theme].rgb))}catch(o){if(n.WTF&&s.Fills)throw o}}}function rZe(t,e,r){if(t&&t["!ref"]){var n=Er(t["!ref"]);if(n.e.c<n.s.c||n.e.r<n.s.r)throw new Error("Bad range ("+r+"): "+t["!ref"])}}function nZe(t,e){var r=Er(e);r.s.r<=r.e.r&&r.s.c<=r.e.c&&r.s.r>=0&&r.s.c>=0&&(t["!ref"]=Yt(r))}var iZe=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,sZe=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,aZe=/<(?:\w:)?hyperlink [^>]*>/mg,oZe=/"(\w*:\w*)"/,cZe=/<(?:\w:)?col\b[^>]*[\/]?>/g,lZe=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,uZe=/<(?:\w:)?pageMargins[^>]*\/>/g,Fle=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,fZe=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,dZe=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function hZe(t,e,r,n,i,s,a){if(!t)return t;n||(n={"!id":{}});var o={};e.dense&&(o["!data"]=[]);var c={s:{r:2e6,c:2e6},e:{r:0,c:0}},u="",l="",f=t.match(sZe);f?(u=t.slice(0,f.index),l=t.slice(f.index+f[0].length)):u=l=t;var d=u.match(Fle);d?SD(d[0],o,i,r):(d=u.match(fZe))&&mZe(d[0],d[1]||"",o,i,r);var h=(u.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(h>0){var m=u.slice(h,h+50).match(oZe);m&&!(e&&e.nodim)&&nZe(o,m[1])}var p=u.match(dZe);p&&p[1]&&CZe(p[1],i);var g=[];if(e.cellStyles){var v=u.match(cZe);v&&SZe(g,v)}f&&RZe(f[1],o,e,c,s,a);var y=l.match(lZe);y&&(o["!autofilter"]=kZe(y[0]));var b=[],_=l.match(iZe);if(_)for(h=0;h!=_.length;++h)b[h]=Er(_[h].slice(_[h].indexOf('"')+1));var x=l.match(aZe);x&&wZe(o,x,n);var E=l.match(uZe);if(E&&(o["!margins"]=_Ze(ht(E[0]))),e&&e.nodim&&(c.s.c=c.s.r=0),!o["!ref"]&&c.e.c>=c.s.c&&c.e.r>=c.s.r&&(o["!ref"]=Yt(c)),e.sheetRows>0&&o["!ref"]){var k=Er(o["!ref"]);e.sheetRows<=+k.e.r&&(k.e.r=e.sheetRows-1,k.e.r>c.e.r&&(k.e.r=c.e.r),k.e.r<k.s.r&&(k.s.r=k.e.r),k.e.c>c.e.c&&(k.e.c=c.e.c),k.e.c<k.s.c&&(k.s.c=k.e.c),o["!fullref"]=o["!ref"],o["!ref"]=Yt(k))}return g.length>0&&(o["!cols"]=g),b.length>0&&(o["!merges"]=b),o}function pZe(t){if(t.length===0)return"";for(var e='<mergeCells count="'+t.length+'">',r=0;r!=t.length;++r)e+='<mergeCell ref="'+Yt(t[r])+'"/>';return e+"</mergeCells>"}function SD(t,e,r,n){var i=ht(t);r.Sheets[n]||(r.Sheets[n]={}),i.codeName&&(r.Sheets[n].CodeName=kr(on(i.codeName)))}function mZe(t,e,r,n,i){SD(t.slice(0,t.indexOf(">")),r,n,i)}function gZe(t,e,r,n,i){var s=!1,a={},o=null;if(n.bookType!=="xlsx"&&e.vbaraw){var c=e.SheetNames[r];try{e.Workbook&&(c=e.Workbook.Sheets[r].CodeName||c)}catch{}s=!0,a.codeName=sl(nr(c))}if(t&&t["!outline"]){var u={summaryBelow:1,summaryRight:1};t["!outline"].above&&(u.summaryBelow=0),t["!outline"].left&&(u.summaryRight=0),o=(o||"")+Xe("outlinePr",null,u)}!s&&!o||(i[i.length]=Xe("sheetPr",o,a))}var vZe=["objects","scenarios","selectLockedCells","selectUnlockedCells"],yZe=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function bZe(t){var e={sheet:1};return vZe.forEach(function(r){t[r]!=null&&t[r]&&(e[r]="1")}),yZe.forEach(function(r){t[r]!=null&&!t[r]&&(e[r]="0")}),t.password&&(e.password=vD(t.password).toString(16).toUpperCase()),Xe("sheetProtection",null,e)}function wZe(t,e,r){for(var n=t["!data"]!=null,i=0;i!=e.length;++i){var s=ht(on(e[i]),!0);if(!s.ref)return;var a=((r||{})["!id"]||[])[s.id];a?(s.Target=a.Target,s.location&&(s.Target+="#"+kr(s.location))):(s.Target="#"+kr(s.location),a={Target:s.Target,TargetMode:"Internal"}),s.Rel=a,s.tooltip&&(s.Tooltip=s.tooltip,delete s.tooltip);for(var o=Er(s.ref),c=o.s.r;c<=o.e.r;++c)for(var u=o.s.c;u<=o.e.c;++u){var l=or(u)+xr(c);n?(t["!data"][c]||(t["!data"][c]=[]),t["!data"][c][u]||(t["!data"][c][u]={t:"z",v:void 0}),t["!data"][c][u].l=s):(t[l]||(t[l]={t:"z",v:void 0}),t[l].l=s)}}}function _Ze(t){var e={};return["left","right","top","bottom","header","footer"].forEach(function(r){t[r]&&(e[r]=parseFloat(t[r]))}),e}function xZe(t){return xh(t),Xe("pageMargins",null,t)}function SZe(t,e){for(var r=!1,n=0;n!=e.length;++n){var i=ht(e[n],!0);i.hidden&&(i.hidden=an(i.hidden));var s=parseInt(i.min,10)-1,a=parseInt(i.max,10)-1;for(i.outlineLevel&&(i.level=+i.outlineLevel||0),delete i.min,delete i.max,i.width=+i.width,!r&&i.width&&(r=!0,yD(i.width)),Jf(i);s<=a;)t[s++]=wn(i)}}function EZe(t,e){for(var r=["<cols>"],n,i=0;i!=e.length;++i)(n=e[i])&&(r[r.length]=Xe("col",null,F5(i,n)));return r[r.length]="</cols>",r.join("")}function kZe(t){var e={ref:(t.match(/ref="([^"]*)"/)||[])[1]};return e}function TZe(t,e,r,n){var i=typeof t.ref=="string"?t.ref:Yt(t.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var s=r.Workbook.Names,a=Fi(i);a.s.r==a.e.r&&(a.e.r=Fi(e["!ref"]).e.r,i=Yt(a));for(var o=0;o<s.length;++o){var c=s[o];if(c.Name=="_xlnm._FilterDatabase"&&c.Sheet==n){c.Ref=Rv(r.SheetNames[n])+"!"+Pv(i);break}}return o==s.length&&s.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+i}),Xe("autoFilter",null,{ref:i})}var AZe=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/g;function CZe(t,e){e.Views||(e.Views=[{}]),(t.match(AZe)||[]).forEach(function(r,n){var i=ht(r);e.Views[n]||(e.Views[n]={}),+i.zoomScale&&(e.Views[n].zoom=+i.zoomScale),i.rightToLeft&&an(i.rightToLeft)&&(e.Views[n].RTL=!0)})}function IZe(t,e,r,n){var i={workbookViewId:"0"};return(((n||{}).Workbook||{}).Views||[])[0]&&(i.rightToLeft=n.Workbook.Views[0].RTL?"1":"0"),Xe("sheetViews",Xe("sheetView",null,i),{})}function PZe(t,e,r,n){if(t.c&&r["!comments"].push([e,t.c]),(t.v===void 0||t.t==="z"&&!(n||{}).sheetStubs)&&typeof t.f!="string"&&typeof t.z>"u")return"";var i="",s=t.t,a=t.v;if(t.t!=="z")switch(t.t){case"b":i=t.v?"1":"0";break;case"n":i=""+t.v;break;case"e":i=ju[t.v];break;case"d":n&&n.cellDates?i=Hn(t.v,-1).toISOString():(t=wn(t),t.t="n",i=""+(t.v=xi(Hn(t.v)))),typeof t.z>"u"&&(t.z=Bt[14]);break;default:i=t.v;break}var o=t.t=="z"||t.v==null?"":ls("v",nr(i)),c={r:e},u=yd(n.cellXfs,t,n);switch(u!==0&&(c.s=u),t.t){case"n":break;case"d":c.t="d";break;case"b":c.t="b";break;case"e":c.t="e";break;case"z":break;default:if(t.v==null){delete t.t;break}if(t.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(n&&n.bookSST){o=ls("v",""+xD(n.Strings,t.v,n.revStrings)),c.t="s";break}else c.t="str";break}if(t.t!=s&&(t.t=s,t.v=a),typeof t.f=="string"&&t.f){var l=t.F&&t.F.slice(0,e.length)==e?{t:"array",ref:t.F}:null;o=Xe("f",nr(t.f),l)+(t.v!=null?o:"")}return t.l&&(t.l.display=nr(i),r["!links"].push([e,t.l])),t.D&&(c.cm=1),Xe("c",o,c)}var RZe=function(){var t=/<(?:\w+:)?c[ \/>]/,e=/<\/(?:\w+:)?row>/,r=/r=["']([^"']*)["']/,n=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,i=/ref=["']([^"']*)["']/,s=Cv("v"),a=Cv("f");return function(c,u,l,f,d,h){for(var m=0,p="",g=[],v=[],y=0,b=0,_=0,x="",E,k,B=0,D=0,z,U,S=0,T=0,w=Array.isArray(h.CellXf),A,F=[],P=[],O=u["!data"]!=null,R=[],I={},C=!1,M=!!l.sheetStubs,L=c.split(e),N=0,H=L.length;N!=H;++N){p=L[N].trim();var W=p.length;if(W!==0){var q=0;e:for(m=0;m<W;++m)switch(p[m]){case">":if(p[m-1]!="/"){++m;break e}if(l&&l.cellStyles){if(k=ht(p.slice(q,m),!0),B=k.r!=null?parseInt(k.r,10):B+1,D=-1,l.sheetRows&&l.sheetRows<B)continue;I={},C=!1,k.ht&&(C=!0,I.hpt=parseFloat(k.ht),I.hpx=fp(I.hpt)),k.hidden&&an(k.hidden)&&(C=!0,I.hidden=!0),k.outlineLevel!=null&&(C=!0,I.level=+k.outlineLevel),C&&(R[B-1]=I)}break;case"<":q=m;break}if(q>=m)break;if(k=ht(p.slice(q,m),!0),B=k.r!=null?parseInt(k.r,10):B+1,D=-1,!(l.sheetRows&&l.sheetRows<B)){l.nodim||(f.s.r>B-1&&(f.s.r=B-1),f.e.r<B-1&&(f.e.r=B-1)),l&&l.cellStyles&&(I={},C=!1,k.ht&&(C=!0,I.hpt=parseFloat(k.ht),I.hpx=fp(I.hpt)),k.hidden&&an(k.hidden)&&(C=!0,I.hidden=!0),k.outlineLevel!=null&&(C=!0,I.level=+k.outlineLevel),C&&(R[B-1]=I)),g=p.slice(m).split(t);for(var G=0;G!=g.length&&g[G].trim().charAt(0)=="<";++G);for(g=g.slice(G),m=0;m!=g.length;++m)if(p=g[m].trim(),p.length!==0){if(v=p.match(r),y=m,b=0,_=0,p="<c "+(p.slice(0,1)=="<"?">":"")+p,v!=null&&v.length===2){for(y=0,x=v[1],b=0;b!=x.length&&!((_=x.charCodeAt(b)-64)<1||_>26);++b)y=26*y+_;--y,D=y}else++D;for(b=0;b!=p.length&&p.charCodeAt(b)!==62;++b);if(++b,k=ht(p.slice(0,b),!0),k.r||(k.r=pr({r:B-1,c:D})),x=p.slice(b),E={t:""},(v=x.match(s))!=null&&v[1]!==""&&(E.v=kr(v[1])),l.cellFormula){if((v=x.match(a))!=null&&v[1]!==""){if(E.f=kr(on(v[1]),!0),l.xlfn||(E.f=rW(E.f)),v[0].indexOf('t="array"')>-1)E.F=(x.match(i)||[])[1],E.F.indexOf(":")>-1&&F.push([Er(E.F),E.F]);else if(v[0].indexOf('t="shared"')>-1){U=ht(v[0]);var Y=kr(on(v[1]));l.xlfn||(Y=rW(Y)),P[parseInt(U.si,10)]=[U,Y,k.r]}}else(v=x.match(/<f[^>]*\/>/))&&(U=ht(v[0]),P[U.si]&&(E.f=vXe(P[U.si][1],P[U.si][2],k.r)));var te=Xr(k.r);for(b=0;b<F.length;++b)te.r>=F[b][0].s.r&&te.r<=F[b][0].e.r&&te.c>=F[b][0].s.c&&te.c<=F[b][0].e.c&&(E.F=F[b][1])}if(k.t==null&&E.v===void 0)if(E.f||E.F)E.v=0,E.t="n";else if(M)E.t="z";else continue;else E.t=k.t||"n";switch(f.s.c>D&&(f.s.c=D),f.e.c<D&&(f.e.c=D),E.t){case"n":if(E.v==""||E.v==null){if(!M)continue;E.t="z"}else E.v=parseFloat(E.v);break;case"s":if(typeof E.v>"u"){if(!M)continue;E.t="z"}else z=Dg[parseInt(E.v,10)],E.v=z.t,E.r=z.r,l.cellHTML&&(E.h=z.h);break;case"str":E.t="s",E.v=E.v!=null?kr(on(E.v),!0):"",l.cellHTML&&(E.h=tD(E.v));break;case"inlineStr":v=x.match(n),E.t="s",v!=null&&(z=gD(v[1]))?(E.v=z.t,l.cellHTML&&(E.h=z.h)):E.v="";break;case"b":E.v=an(E.v);break;case"d":l.cellDates?E.v=Hn(E.v,1):(E.v=xi(Hn(E.v,1)),E.t="n");break;case"e":(!l||l.cellText!==!1)&&(E.w=E.v),E.v=fD[E.v];break}if(S=T=0,A=null,w&&k.s!==void 0&&(A=h.CellXf[k.s],A!=null&&(A.numFmtId!=null&&(S=A.numFmtId),l.cellStyles&&A.fillId!=null&&(T=A.fillId))),Nle(E,S,T,l,d,h),l.cellDates&&w&&E.t=="n"&&C0(Bt[S])&&(E.t="d",E.v=R5(E.v)),k.cm&&l.xlmeta){var Q=(l.xlmeta.Cell||[])[+k.cm-1];Q&&Q.type=="XLDAPR"&&(E.D=!0)}var j;l.nodim&&(j=Xr(k.r),f.s.r>j.r&&(f.s.r=j.r),f.e.r<j.r&&(f.e.r=j.r)),O?(j=Xr(k.r),u["!data"][j.r]||(u["!data"][j.r]=[]),u["!data"][j.r][j.c]=E):u[k.r]=E}}}}R.length>0&&(u["!rows"]=R)}}();function OZe(t,e,r,n){var i=[],s=[],a=Er(t["!ref"]),o="",c,u="",l=[],f=0,d=0,h=t["!rows"],m=t["!data"]!=null,p={r:u},g,v=-1;for(d=a.s.c;d<=a.e.c;++d)l[d]=or(d);for(f=a.s.r;f<=a.e.r;++f){for(s=[],u=xr(f),d=a.s.c;d<=a.e.c;++d){c=l[d]+u;var y=m?(t["!data"][f]||[])[d]:t[c];y!==void 0&&(o=PZe(y,c,t,e))!=null&&s.push(o)}(s.length>0||h&&h[f])&&(p={r:u},h&&h[f]&&(g=h[f],g.hidden&&(p.hidden=1),v=-1,g.hpx?v=Fv(g.hpx):g.hpt&&(v=g.hpt),v>-1&&(p.ht=v,p.customHeight=1),g.level&&(p.outlineLevel=g.level)),i[i.length]=Xe("row",s.join(""),p))}if(h)for(;f<h.length;++f)h&&h[f]&&(p={r:f+1},g=h[f],g.hidden&&(p.hidden=1),v=-1,g.hpx?v=Fv(g.hpx):g.hpt&&(v=g.hpt),v>-1&&(p.ht=v,p.customHeight=1),g.level&&(p.outlineLevel=g.level),i[i.length]=Xe("row","",p));return i.join("")}function BZe(t,e,r,n){var i=[ui,Xe("worksheet",null,{xmlns:I0[0],"xmlns:r":Oi.r})],s=r.SheetNames[t],a=0,o="",c=r.Sheets[s];c==null&&(c={});var u=c["!ref"]||"A1",l=Er(u);if(l.e.c>16383||l.e.r>1048575){if(e.WTF)throw new Error("Range "+u+" exceeds format limit A1:XFD1048576");l.e.c=Math.min(l.e.c,16383),l.e.r=Math.min(l.e.c,1048575),u=Yt(l)}n||(n={}),c["!comments"]=[];var f=[];gZe(c,r,t,e,i),i[i.length]=Xe("dimension",null,{ref:u}),i[i.length]=IZe(c,e,t,r),e.sheetFormat&&(i[i.length]=Xe("sheetFormatPr",null,{defaultRowHeight:e.sheetFormat.defaultRowHeight||"16",baseColWidth:e.sheetFormat.baseColWidth||"10",outlineLevelRow:e.sheetFormat.outlineLevelRow||"7"})),c["!cols"]!=null&&c["!cols"].length>0&&(i[i.length]=EZe(c,c["!cols"])),i[a=i.length]="<sheetData/>",c["!links"]=[],c["!ref"]!=null&&(o=OZe(c,e),o.length>0&&(i[i.length]=o)),i.length>a+1&&(i[i.length]="</sheetData>",i[a]=i[a].replace("/>",">")),c["!protect"]&&(i[i.length]=bZe(c["!protect"])),c["!autofilter"]!=null&&(i[i.length]=TZe(c["!autofilter"],c,r,t)),c["!merges"]!=null&&c["!merges"].length>0&&(i[i.length]=pZe(c["!merges"]));var d=-1,h,m=-1;return c["!links"].length>0&&(i[i.length]="<hyperlinks>",c["!links"].forEach(function(p){p[1].Target&&(h={ref:p[0]},p[1].Target.charAt(0)!="#"&&(m=tn(n,-1,nr(p[1].Target).replace(/#.*$/,""),vr.HLINK),h["r:id"]="rId"+m),(d=p[1].Target.indexOf("#"))>-1&&(h.location=nr(p[1].Target.slice(d+1))),p[1].Tooltip&&(h.tooltip=nr(p[1].Tooltip)),h.display=p[1].display,i[i.length]=Xe("hyperlink",null,h))}),i[i.length]="</hyperlinks>"),delete c["!links"],c["!margins"]!=null&&(i[i.length]=xZe(c["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&(i[i.length]=ls("ignoredErrors",Xe("ignoredError",null,{numberStoredAsText:1,sqref:u}))),f.length>0&&(m=tn(n,-1,"../drawings/drawing"+(t+1)+".xml",vr.DRAW),i[i.length]=Xe("drawing",null,{"r:id":"rId"+m}),c["!drawing"]=f),c["!comments"].length>0&&(m=tn(n,-1,"../drawings/vmlDrawing"+(t+1)+".vml",vr.VML),i[i.length]=Xe("legacyDrawing",null,{"r:id":"rId"+m}),c["!legacy"]=m),i.length>1&&(i[i.length]="</worksheet>",i[1]=i[1].replace("/>",">")),i.join("")}function DZe(t,e){var r={},n=t.l+e;r.r=t.read_shift(4),t.l+=4;var i=t.read_shift(2);t.l+=1;var s=t.read_shift(1);return t.l=n,s&7&&(r.level=s&7),s&16&&(r.hidden=!0),s&32&&(r.hpt=i/20),r}function MZe(t,e,r){var n=Ne(145),i=(r["!rows"]||[])[t]||{};n.write_shift(4,t),n.write_shift(4,0);var s=320;i.hpx?s=Fv(i.hpx)*20:i.hpt&&(s=i.hpt*20),n.write_shift(2,s),n.write_shift(1,0);var a=0;i.level&&(a|=i.level),i.hidden&&(a|=16),(i.hpx||i.hpt)&&(a|=32),n.write_shift(1,a),n.write_shift(1,0);var o=0,c=n.l;n.l+=4;for(var u={r:t,c:0},l=r["!data"]!=null,f=0;f<16;++f)if(!(e.s.c>f+1<<10||e.e.c<f<<10)){for(var d=-1,h=-1,m=f<<10;m<f+1<<10;++m){u.c=m;var p=l?(r["!data"][u.r]||[])[u.c]:r[pr(u)];p&&(d<0&&(d=m),h=m)}d<0||(++o,n.write_shift(4,d),n.write_shift(4,h))}var g=n.l;return n.l=c,n.write_shift(4,o),n.l=g,n.length>n.l?n.slice(0,n.l):n}function NZe(t,e,r,n){var i=MZe(n,r,e);(i.length>17||(e["!rows"]||[])[n])&&Le(t,0,i)}var FZe=B0,LZe=um;function $Ze(){}function UZe(t,e){var r={},n=t[t.l];return++t.l,r.above=!(n&64),r.left=!(n&128),t.l+=18,r.name=Eze(t),r}function jZe(t,e,r){r==null&&(r=Ne(84+4*t.length));var n=192;e&&(e.above&&(n&=-65),e.left&&(n&=-129)),r.write_shift(1,n);for(var i=1;i<3;++i)r.write_shift(1,0);return J4({auto:1},r),r.write_shift(-4,-1),r.write_shift(-4,-1),Uce(t,r),r.slice(0,r.l)}function VZe(t){var e=Mo(t);return[e]}function qZe(t,e,r){return r==null&&(r=Ne(8)),P0(e,r)}function zZe(t){var e=R0(t);return[e]}function HZe(t,e,r){return r==null&&(r=Ne(4)),O0(e,r)}function WZe(t){var e=Mo(t),r=t.read_shift(1);return[e,r,"b"]}function GZe(t,e,r){return r==null&&(r=Ne(9)),P0(e,r),r.write_shift(1,t.v?1:0),r}function KZe(t){var e=R0(t),r=t.read_shift(1);return[e,r,"b"]}function XZe(t,e,r){return r==null&&(r=Ne(5)),O0(e,r),r.write_shift(1,t.v?1:0),r}function YZe(t){var e=Mo(t),r=t.read_shift(1);return[e,r,"e"]}function ZZe(t,e,r){return r==null&&(r=Ne(9)),P0(e,r),r.write_shift(1,t.v),r}function JZe(t){var e=R0(t),r=t.read_shift(1);return[e,r,"e"]}function QZe(t,e,r){return r==null&&(r=Ne(8)),O0(e,r),r.write_shift(1,t.v),r.write_shift(2,0),r.write_shift(1,0),r}function eJe(t){var e=Mo(t),r=t.read_shift(4);return[e,r,"s"]}function tJe(t,e,r){return r==null&&(r=Ne(12)),P0(e,r),r.write_shift(4,e.v),r}function rJe(t){var e=R0(t),r=t.read_shift(4);return[e,r,"s"]}function nJe(t,e,r){return r==null&&(r=Ne(8)),O0(e,r),r.write_shift(4,e.v),r}function iJe(t){var e=Mo(t),r=Rs(t);return[e,r,"n"]}function sJe(t,e,r){return r==null&&(r=Ne(16)),P0(e,r),zh(t.v,r),r}function Lle(t){var e=R0(t),r=Rs(t);return[e,r,"n"]}function aJe(t,e,r){return r==null&&(r=Ne(12)),O0(e,r),zh(t.v,r),r}function oJe(t){var e=Mo(t),r=lD(t);return[e,r,"n"]}function cJe(t,e,r){return r==null&&(r=Ne(12)),P0(e,r),jce(t.v,r),r}function lJe(t){var e=R0(t),r=lD(t);return[e,r,"n"]}function uJe(t,e,r){return r==null&&(r=Ne(8)),O0(e,r),jce(t.v,r),r}function fJe(t){var e=Mo(t),r=aD(t);return[e,r,"is"]}function dJe(t){var e=Mo(t),r=Ms(t);return[e,r,"str"]}function hJe(t,e,r){var n=t.v==null?"":String(t.v);return r==null&&(r=Ne(12+4*t.v.length)),P0(e,r),Ni(n,r),r.length>r.l?r.slice(0,r.l):r}function pJe(t){var e=R0(t),r=Ms(t);return[e,r,"str"]}function mJe(t,e,r){var n=t.v==null?"":String(t.v);return r==null&&(r=Ne(8+4*n.length)),O0(e,r),Ni(n,r),r.length>r.l?r.slice(0,r.l):r}function gJe(t,e,r){var n=t.l+e,i=Mo(t);i.r=r["!row"];var s=t.read_shift(1),a=[i,s,"b"];if(r.cellFormula){t.l+=2;var o=N5(t,n-t.l,r);a[3]=xs(o,null,i,r.supbooks,r)}else t.l=n;return a}function vJe(t,e,r){var n=t.l+e,i=Mo(t);i.r=r["!row"];var s=t.read_shift(1),a=[i,s,"e"];if(r.cellFormula){t.l+=2;var o=N5(t,n-t.l,r);a[3]=xs(o,null,i,r.supbooks,r)}else t.l=n;return a}function yJe(t,e,r){var n=t.l+e,i=Mo(t);i.r=r["!row"];var s=Rs(t),a=[i,s,"n"];if(r.cellFormula){t.l+=2;var o=N5(t,n-t.l,r);a[3]=xs(o,null,i,r.supbooks,r)}else t.l=n;return a}function bJe(t,e,r){var n=t.l+e,i=Mo(t);i.r=r["!row"];var s=Ms(t),a=[i,s,"str"];if(r.cellFormula){t.l+=2;var o=N5(t,n-t.l,r);a[3]=xs(o,null,i,r.supbooks,r)}else t.l=n;return a}var wJe=B0,_Je=um;function xJe(t,e){return e==null&&(e=Ne(4)),e.write_shift(4,t),e}function SJe(t,e){var r=t.l+e,n=B0(t),i=oD(t),s=Ms(t),a=Ms(t),o=Ms(t);t.l=r;var c={rfx:n,relId:i,loc:s,display:o};return a&&(c.Tooltip=a),c}function EJe(t,e){var r=Ne(50+4*(t[1].Target.length+(t[1].Tooltip||"").length));um({s:Xr(t[0]),e:Xr(t[0])},r),cD("rId"+e,r);var n=t[1].Target.indexOf("#"),i=n==-1?"":t[1].Target.slice(n+1);return Ni(i||"",r),Ni(t[1].Tooltip||"",r),Ni("",r),r.slice(0,r.l)}function kJe(){}function TJe(t,e,r){var n=t.l+e,i=Vce(t),s=t.read_shift(1),a=[i];if(a[2]=s,r.cellFormula){var o=$Ye(t,n-t.l,r);a[1]=o}else t.l=n;return a}function AJe(t,e,r){var n=t.l+e,i=B0(t),s=[i];if(r.cellFormula){var a=jYe(t,n-t.l,r);s[1]=a,t.l=n}else t.l=n;return s}function CJe(t,e,r){r==null&&(r=Ne(18));var n=F5(t,e);r.write_shift(-4,t),r.write_shift(-4,t),r.write_shift(4,(n.width||10)*256),r.write_shift(4,0);var i=0;return e.hidden&&(i|=1),typeof n.width=="number"&&(i|=2),e.level&&(i|=e.level<<8),r.write_shift(2,i),r}var $le=["left","right","top","bottom","header","footer"];function IJe(t){var e={};return $le.forEach(function(r){e[r]=Rs(t)}),e}function PJe(t,e){return e==null&&(e=Ne(6*8)),xh(t),$le.forEach(function(r){zh(t[r],e)}),e}function RJe(t){var e=t.read_shift(2);return t.l+=28,{RTL:e&32}}function OJe(t,e,r){r==null&&(r=Ne(30));var n=924;return(((e||{}).Views||[])[0]||{}).RTL&&(n|=32),r.write_shift(2,n),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(2,0),r.write_shift(2,100),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(4,0),r}function BJe(t){var e=Ne(24);return e.write_shift(4,4),e.write_shift(4,1),um(t,e),e}function DJe(t,e){return e==null&&(e=Ne(16*4+2)),e.write_shift(2,t.password?vD(t.password):0),e.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(r){r[1]?e.write_shift(4,t[r[0]]!=null&&!t[r[0]]?1:0):e.write_shift(4,t[r[0]]!=null&&t[r[0]]?0:1)}),e}function MJe(){}function NJe(){}function FJe(t,e,r,n,i,s,a){if(!t)return t;var o=e||{};n||(n={"!id":{}});var c={};o.dense&&(c["!data"]=[]);var u,l={s:{r:2e6,c:2e6},e:{r:0,c:0}},f=!1,d=!1,h,m,p,g,v,y,b,_,x,E=[];o.biff=12,o["!row"]=0;var k=0,B=!1,D=[],z={},U=o.supbooks||i.supbooks||[[]];if(U.sharedf=z,U.arrayf=D,U.SheetNames=i.SheetNames||i.Sheets.map(function(O){return O.name}),!o.supbooks&&(o.supbooks=U,i.Names))for(var S=0;S<i.Names.length;++S)U[0][S+1]=i.Names[S];var T=[],w=[],A=!1;Lv[16]={n:"BrtShortReal",f:Lle};var F;if(Uu(t,function(R,I,C){if(!d)switch(C){case 148:u=R;break;case 0:h=R,o.sheetRows&&o.sheetRows<=h.r&&(d=!0),_=xr(g=h.r),o["!row"]=h.r,(R.hidden||R.hpt||R.level!=null)&&(R.hpt&&(R.hpx=fp(R.hpt)),w[R.r]=R);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(m={t:R[2]},R[2]){case"n":m.v=R[1];break;case"s":b=Dg[R[1]],m.v=b.t,m.r=b.r;break;case"b":m.v=!!R[1];break;case"e":m.v=R[1],o.cellText!==!1&&(m.w=ju[m.v]);break;case"str":m.t="s",m.v=R[1];break;case"is":m.t="s",m.v=R[1].t;break}if((p=a.CellXf[R[0].iStyleRef])&&Nle(m,p.numFmtId,null,o,s,a),v=R[0].c==-1?v+1:R[0].c,o.dense?(c["!data"][g]||(c["!data"][g]=[]),c["!data"][g][v]=m):c[or(v)+_]=m,o.cellFormula){for(B=!1,k=0;k<D.length;++k){var M=D[k];h.r>=M[0].s.r&&h.r<=M[0].e.r&&v>=M[0].s.c&&v<=M[0].e.c&&(m.F=Yt(M[0]),B=!0)}!B&&R.length>3&&(m.f=R[3])}if(l.s.r>h.r&&(l.s.r=h.r),l.s.c>v&&(l.s.c=v),l.e.r<h.r&&(l.e.r=h.r),l.e.c<v&&(l.e.c=v),o.cellDates&&p&&m.t=="n"&&C0(Bt[p.numFmtId])){var L=nh(m.v);L&&(m.t="d",m.v=new Date(L.y,L.m-1,L.d,L.H,L.M,L.S,L.u))}F&&(F.type=="XLDAPR"&&(m.D=!0),F=void 0);break;case 1:case 12:if(!o.sheetStubs||f)break;m={t:"z",v:void 0},v=R[0].c==-1?v+1:R[0].c,o.dense?(c["!data"][g]||(c["!data"][g]=[]),c["!data"][g][v]=m):c[or(v)+_]=m,l.s.r>h.r&&(l.s.r=h.r),l.s.c>v&&(l.s.c=v),l.e.r<h.r&&(l.e.r=h.r),l.e.c<v&&(l.e.c=v),F&&(F.type=="XLDAPR"&&(m.D=!0),F=void 0);break;case 176:E.push(R);break;case 49:F=((o.xlmeta||{}).Cell||[])[R-1];break;case 494:var N=n["!id"][R.relId];for(N?(R.Target=N.Target,R.loc&&(R.Target+="#"+R.loc),R.Rel=N):R.relId==""&&(R.Target="#"+R.loc),g=R.rfx.s.r;g<=R.rfx.e.r;++g)for(v=R.rfx.s.c;v<=R.rfx.e.c;++v)o.dense?(c["!data"][g]||(c["!data"][g]=[]),c["!data"][g][v]||(c["!data"][g][v]={t:"z",v:void 0}),c["!data"][g][v].l=R):(y=or(v)+xr(g),c[y]||(c[y]={t:"z",v:void 0}),c[y].l=R);break;case 426:if(!o.cellFormula)break;D.push(R),x=o.dense?c["!data"][g][v]:c[or(v)+_],x.f=xs(R[1],l,{r:h.r,c:v},U,o),x.F=Yt(R[0]);break;case 427:if(!o.cellFormula)break;z[pr(R[0].s)]=R[1],x=o.dense?c["!data"][g][v]:c[or(v)+_],x.f=xs(R[1],l,{r:h.r,c:v},U,o);break;case 60:if(!o.cellStyles)break;for(;R.e>=R.s;)T[R.e--]={width:R.w/256,hidden:!!(R.flags&1),level:R.level},A||(A=!0,yD(R.w/256)),Jf(T[R.e+1]);break;case 161:c["!autofilter"]={ref:Yt(R)};break;case 476:c["!margins"]=R;break;case 147:i.Sheets[r]||(i.Sheets[r]={}),R.name&&(i.Sheets[r].CodeName=R.name),(R.above||R.left)&&(c["!outline"]={above:R.above,left:R.left});break;case 137:i.Views||(i.Views=[{}]),i.Views[0]||(i.Views[0]={}),R.RTL&&(i.Views[0].RTL=!0);break;case 485:break;case 64:case 1053:break;case 151:break;case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:f=!0;break;case 36:f=!1;break;case 37:f=!0;break;case 38:f=!1;break;default:if(!I.T){if(!f||o.WTF)throw new Error("Unexpected record 0x"+C.toString(16))}}},o),delete o.supbooks,delete o["!row"],!c["!ref"]&&(l.s.r<2e6||u&&(u.e.r>0||u.e.c>0||u.s.r>0||u.s.c>0))&&(c["!ref"]=Yt(u||l)),o.sheetRows&&c["!ref"]){var P=Er(c["!ref"]);o.sheetRows<=+P.e.r&&(P.e.r=o.sheetRows-1,P.e.r>l.e.r&&(P.e.r=l.e.r),P.e.r<P.s.r&&(P.s.r=P.e.r),P.e.c>l.e.c&&(P.e.c=l.e.c),P.e.c<P.s.c&&(P.s.c=P.e.c),c["!fullref"]=c["!ref"],c["!ref"]=Yt(P))}return E.length>0&&(c["!merges"]=E),T.length>0&&(c["!cols"]=T),w.length>0&&(c["!rows"]=w),c}function LJe(t,e,r,n,i,s,a){var o={r,c:n};if(e.c&&s["!comments"].push([pr(o),e.c]),e.v===void 0)return!1;var c="";switch(e.t){case"b":c=e.v?"1":"0";break;case"d":e=wn(e),e.z=e.z||Bt[14],e.v=xi(Hn(e.v)),e.t="n";break;case"n":case"e":c=""+e.v;break;default:c=e.v;break}switch(o.s=yd(i.cellXfs,e,i),e.l&&s["!links"].push([pr(o),e.l]),e.t){case"s":case"str":return i.bookSST?(c=xD(i.Strings,e.v==null?"":String(e.v),i.revStrings),o.t="s",o.v=c,a?Le(t,18,nJe(e,o)):Le(t,7,tJe(e,o))):(o.t="str",a?Le(t,17,mJe(e,o)):Le(t,6,hJe(e,o))),!0;case"n":return e.v==(e.v|0)&&e.v>-1e3&&e.v<1e3?a?Le(t,13,uJe(e,o)):Le(t,2,cJe(e,o)):a?Le(t,16,aJe(e,o)):Le(t,5,sJe(e,o)),!0;case"b":return o.t="b",a?Le(t,15,XZe(e,o)):Le(t,4,GZe(e,o)),!0;case"e":return o.t="e",a?Le(t,14,QZe(e,o)):Le(t,3,ZZe(e,o)),!0}return a?Le(t,12,HZe(e,o)):Le(t,1,qZe(e,o)),!0}function $Je(t,e,r,n){var i=Er(e["!ref"]||"A1"),s,a="",o=[];Le(t,145);var c=e["!data"]!=null,u=i.e.r;e["!rows"]&&(u=Math.max(i.e.r,e["!rows"].length-1));for(var l=i.s.r;l<=u;++l){a=xr(l),NZe(t,e,i,l);var f=!1;if(l<=i.e.r)for(var d=i.s.c;d<=i.e.c;++d){l===i.s.r&&(o[d]=or(d)),s=o[d]+a;var h=c?(e["!data"][l]||[])[d]:e[s];if(!h){f=!1;continue}f=LJe(t,h,l,d,n,e,f)}}Le(t,146)}function UJe(t,e){!e||!e["!merges"]||(Le(t,177,xJe(e["!merges"].length)),e["!merges"].forEach(function(r){Le(t,176,_Je(r))}),Le(t,178))}function jJe(t,e){!e||!e["!cols"]||(Le(t,390),e["!cols"].forEach(function(r,n){r&&Le(t,60,CJe(n,r))}),Le(t,391))}function VJe(t,e){!e||!e["!ref"]||(Le(t,648),Le(t,649,BJe(Er(e["!ref"]))),Le(t,650))}function qJe(t,e,r){e["!links"].forEach(function(n){if(n[1].Target){var i=tn(r,-1,n[1].Target.replace(/#.*$/,""),vr.HLINK);Le(t,494,EJe(n,i))}}),delete e["!links"]}function zJe(t,e,r,n){if(e["!comments"].length>0){var i=tn(n,-1,"../drawings/vmlDrawing"+(r+1)+".vml",vr.VML);Le(t,551,cD("rId"+i)),e["!legacy"]=i}}function HJe(t,e,r,n){if(e["!autofilter"]){var i=e["!autofilter"],s=typeof i.ref=="string"?i.ref:Yt(i.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var a=r.Workbook.Names,o=Fi(s);o.s.r==o.e.r&&(o.e.r=Fi(e["!ref"]).e.r,s=Yt(o));for(var c=0;c<a.length;++c){var u=a[c];if(u.Name=="_xlnm._FilterDatabase"&&u.Sheet==n){u.Ref=Rv(r.SheetNames[n])+"!"+Pv(s);break}}c==a.length&&a.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:Rv(r.SheetNames[n])+"!"+Pv(s)}),Le(t,161,um(Er(s))),Le(t,162)}}function WJe(t,e,r){Le(t,133),Le(t,137,OJe(e,r)),Le(t,138),Le(t,134)}function GJe(t,e){e["!protect"]&&Le(t,535,DJe(e["!protect"]))}function KJe(t,e,r,n){var i=_a(),s=r.SheetNames[t],a=r.Sheets[s]||{},o=s;try{r&&r.Workbook&&(o=r.Workbook.Sheets[t].CodeName||o)}catch{}var c=Er(a["!ref"]||"A1");if(c.e.c>16383||c.e.r>1048575){if(e.WTF)throw new Error("Range "+(a["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");c.e.c=Math.min(c.e.c,16383),c.e.r=Math.min(c.e.c,1048575)}return a["!links"]=[],a["!comments"]=[],Le(i,129),(r.vbaraw||a["!outline"])&&Le(i,147,jZe(o,a["!outline"])),Le(i,148,LZe(c)),WJe(i,a,r.Workbook),jJe(i,a),$Je(i,a,t,e),GJe(i,a),HJe(i,a,r,t),UJe(i,a),qJe(i,a,n),a["!margins"]&&Le(i,476,PJe(a["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&VJe(i,a),zJe(i,a,t,n),Le(i,130),i.end()}function XJe(t){var e=[],r=t.match(/^<c:numCache>/),n;(t.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/mg)||[]).forEach(function(s){var a=s.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);a&&(e[+a[1]]=r?+a[2]:a[2])});var i=kr((t.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(t.match(/<c:f>(.*?)<\/c:f>/mg)||[]).forEach(function(s){n=s.replace(/<.*?>/g,"")}),[e,i,n]}function YJe(t,e,r,n,i,s){var a=s||{"!type":"chart"};if(!t)return s;var o=0,c=0,u="A",l={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(t.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach(function(f){var d=XJe(f);l.s.r=l.s.c=0,l.e.c=o,u=or(o),d[0].forEach(function(h,m){a["!data"]?(a["!data"][m]||(a["!data"][m]=[]),a["!data"][m][o]={t:"n",v:h,z:d[1]}):a[u+xr(m)]={t:"n",v:h,z:d[1]},c=m}),l.e.r<c&&(l.e.r=c),++o}),o>0&&(a["!ref"]=Yt(l)),a}function ZJe(t,e,r,n,i){if(!t)return t;n||(n={"!id":{}});var s={"!type":"chart","!drawel":null,"!rel":""},a,o=t.match(Fle);return o&&SD(o[0],s,i,r),(a=t.match(/drawing r:id="(.*?)"/))&&(s["!rel"]=a[1]),n["!id"][s["!rel"]]&&(s["!drawel"]=n["!id"][s["!rel"]]),s}function JJe(t,e){t.l+=10;var r=Ms(t);return{name:r}}function QJe(t,e,r,n,i){if(!t)return t;n||(n={"!id":{}});var s={"!type":"chart","!drawel":null,"!rel":""},a=!1;return Uu(t,function(c,u,l){switch(l){case 550:s["!rel"]=c;break;case 651:i.Sheets[r]||(i.Sheets[r]={}),c.name&&(i.Sheets[r].CodeName=c.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:a=!0;break;case 36:a=!1;break;case 37:break;case 38:break;default:if(!(u.T>0)){if(!(u.T<0)){if(!a||e.WTF)throw new Error("Unexpected record 0x"+l.toString(16))}}}},e),n["!id"][s["!rel"]]&&(s["!drawel"]=n["!id"][s["!rel"]]),s}var ED=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],eQe=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],tQe=[],rQe=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function cW(t,e){for(var r=0;r!=t.length;++r)for(var n=t[r],i=0;i!=e.length;++i){var s=e[i];if(n[s[0]]==null)n[s[0]]=s[1];else switch(s[2]){case"bool":typeof n[s[0]]=="string"&&(n[s[0]]=an(n[s[0]]));break;case"int":typeof n[s[0]]=="string"&&(n[s[0]]=parseInt(n[s[0]],10));break}}}function lW(t,e){for(var r=0;r!=e.length;++r){var n=e[r];if(t[n[0]]==null)t[n[0]]=n[1];else switch(n[2]){case"bool":typeof t[n[0]]=="string"&&(t[n[0]]=an(t[n[0]]));break;case"int":typeof t[n[0]]=="string"&&(t[n[0]]=parseInt(t[n[0]],10));break}}}function Ule(t){lW(t.WBProps,ED),lW(t.CalcPr,rQe),cW(t.WBView,eQe),cW(t.Sheets,tQe),F1.date1904=an(t.WBProps.date1904)}function nQe(t){return!t.Workbook||!t.Workbook.WBProps?"false":an(t.Workbook.WBProps.date1904)?"true":"false"}var iQe=":][*?/\\".split("");function jle(t,e){if(t.length>31)throw new Error("Sheet names cannot exceed 31 chars");var r=!0;return iQe.forEach(function(n){if(t.indexOf(n)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),r}function sQe(t,e,r){t.forEach(function(n,i){jle(n);for(var s=0;s<i;++s)if(n==t[s])throw new Error("Duplicate Sheet Name: "+n);if(r){var a=e&&e[i]&&e[i].CodeName||n;if(a.charCodeAt(0)==95&&a.length>22)throw new Error("Bad Code Name: Worksheet"+a)}})}function aQe(t){if(!t||!t.SheetNames||!t.Sheets)throw new Error("Invalid Workbook");if(!t.SheetNames.length)throw new Error("Workbook is empty");var e=t.Workbook&&t.Workbook.Sheets||[];sQe(t.SheetNames,e,!!t.vbaraw);for(var r=0;r<t.SheetNames.length;++r)rZe(t.Sheets[t.SheetNames[r]],t.SheetNames[r],r);t.SheetNames.forEach(function(n,i){var s=t.Sheets[n];if(!(!s||!s["!autofilter"])){var a;t.Workbook||(t.Workbook={}),t.Workbook.Names||(t.Workbook.Names=[]),t.Workbook.Names.forEach(function(c){c.Name=="_xlnm._FilterDatabase"&&c.Sheet==i&&(a=c)});var o=Rv(n)+"!"+Pv(s["!autofilter"].ref);a?a.Ref=o:t.Workbook.Names.push({Name:"_xlnm._FilterDatabase",Sheet:i,Ref:o})}})}var oQe=/<\w+:workbook/;function cQe(t,e){if(!t)throw new Error("Could not find file");var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},n=!1,i="xmlns",s={},a=0;if(t.replace(Ls,function(c,u){var l=ht(c);switch(Pc(l[0])){case"<?xml":break;case"<workbook":c.match(oQe)&&(i="xmlns"+c.match(/<(\w+):/)[1]),r.xmlns=l[i];break;case"</workbook>":break;case"<fileVersion":delete l[0],r.AppVersion=l;break;case"<fileVersion/>":case"</fileVersion>":break;case"<fileSharing":break;case"<fileSharing/>":break;case"<workbookPr":case"<workbookPr/>":ED.forEach(function(f){if(l[f[0]]!=null)switch(f[2]){case"bool":r.WBProps[f[0]]=an(l[f[0]]);break;case"int":r.WBProps[f[0]]=parseInt(l[f[0]],10);break;default:r.WBProps[f[0]]=l[f[0]]}}),l.codeName&&(r.WBProps.CodeName=on(l.codeName));break;case"</workbookPr>":break;case"<workbookProtection":break;case"<workbookProtection/>":break;case"<bookViews":case"<bookViews>":case"</bookViews>":break;case"<workbookView":case"<workbookView/>":delete l[0],r.WBView.push(l);break;case"</workbookView>":break;case"<sheets":case"<sheets>":case"</sheets>":break;case"<sheet":switch(l.state){case"hidden":l.Hidden=1;break;case"veryHidden":l.Hidden=2;break;default:l.Hidden=0}delete l.state,l.name=kr(on(l.name)),delete l[0],r.Sheets.push(l);break;case"</sheet>":break;case"<functionGroups":case"<functionGroups/>":break;case"<functionGroup":break;case"<externalReferences":case"</externalReferences>":case"<externalReferences>":break;case"<externalReference":break;case"<definedNames/>":break;case"<definedNames>":case"<definedNames":n=!0;break;case"</definedNames>":n=!1;break;case"<definedName":s={},s.Name=on(l.name),l.comment&&(s.Comment=l.comment),l.localSheetId&&(s.Sheet=+l.localSheetId),an(l.hidden||"0")&&(s.Hidden=!0),a=u+c.length;break;case"</definedName>":s.Ref=kr(on(t.slice(a,u))),r.Names.push(s);break;case"<definedName/>":break;case"<calcPr":delete l[0],r.CalcPr=l;break;case"<calcPr/>":delete l[0],r.CalcPr=l;break;case"</calcPr>":break;case"<oleSize":break;case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":break;case"<customWorkbookView":case"</customWorkbookView>":break;case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":break;case"<pivotCache":break;case"<smartTagPr":case"<smartTagPr/>":break;case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":break;case"<smartTagType":break;case"<webPublishing":case"<webPublishing/>":break;case"<fileRecoveryPr":case"<fileRecoveryPr/>":break;case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":break;case"<webPublishObject":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;case"<ArchID":break;case"<AlternateContent":case"<AlternateContent>":n=!0;break;case"</AlternateContent>":n=!1;break;case"<revisionPtr":break;default:if(!n&&e.WTF)throw new Error("unrecognized "+l[0]+" in workbook")}return c}),I0.indexOf(r.xmlns)===-1)throw new Error("Unknown Namespace: "+r.xmlns);return Ule(r),r}function lQe(t){var e=[ui];e[e.length]=Xe("workbook",null,{xmlns:I0[0],"xmlns:r":Oi.r});var r=t.Workbook&&(t.Workbook.Names||[]).length>0,n={codeName:"ThisWorkbook"};t.Workbook&&t.Workbook.WBProps&&(ED.forEach(function(o){t.Workbook.WBProps[o[0]]!=null&&t.Workbook.WBProps[o[0]]!=o[1]&&(n[o[0]]=t.Workbook.WBProps[o[0]])}),t.Workbook.WBProps.CodeName&&(n.codeName=t.Workbook.WBProps.CodeName,delete n.CodeName)),e[e.length]=Xe("workbookPr",null,n);var i=t.Workbook&&t.Workbook.Sheets||[],s=0;if(i&&i[0]&&i[0].Hidden){for(e[e.length]="<bookViews>",s=0;s!=t.SheetNames.length&&!(!i[s]||!i[s].Hidden);++s);s==t.SheetNames.length&&(s=0),e[e.length]='<workbookView firstSheet="'+s+'" activeTab="'+s+'"/>',e[e.length]="</bookViews>"}for(e[e.length]="<sheets>",s=0;s!=t.SheetNames.length;++s){var a={name:nr(t.SheetNames[s].slice(0,31))};if(a.sheetId=""+(s+1),a["r:id"]="rId"+(s+1),i[s])switch(i[s].Hidden){case 1:a.state="hidden";break;case 2:a.state="veryHidden";break}e[e.length]=Xe("sheet",null,a)}return e[e.length]="</sheets>",r&&(e[e.length]="<definedNames>",t.Workbook&&t.Workbook.Names&&t.Workbook.Names.forEach(function(o){var c={name:o.Name};o.Comment&&(c.comment=o.Comment),o.Sheet!=null&&(c.localSheetId=""+o.Sheet),o.Hidden&&(c.hidden="1"),o.Ref&&(e[e.length]=Xe("definedName",nr(o.Ref),c))}),e[e.length]="</definedNames>"),e.length>2&&(e[e.length]="</workbook>",e[1]=e[1].replace("/>",">")),e.join("")}function uQe(t,e){var r={};return r.Hidden=t.read_shift(4),r.iTabID=t.read_shift(4),r.strRelID=BI(t),r.name=Ms(t),r}function fQe(t,e){return e||(e=Ne(127)),e.write_shift(4,t.Hidden),e.write_shift(4,t.iTabID),cD(t.strRelID,e),Ni(t.name.slice(0,31),e),e.length>e.l?e.slice(0,e.l):e}function dQe(t,e){var r={},n=t.read_shift(4);r.defaultThemeVersion=t.read_shift(4);var i=e>8?Ms(t):"";return i.length>0&&(r.CodeName=i),r.autoCompressPictures=!!(n&65536),r.backupFile=!!(n&64),r.checkCompatibility=!!(n&4096),r.date1904=!!(n&1),r.filterPrivacy=!!(n&8),r.hidePivotFieldList=!!(n&1024),r.promptedSolutions=!!(n&16),r.publishItems=!!(n&2048),r.refreshAllConnections=!!(n&262144),r.saveExternalLinkValues=!!(n&128),r.showBorderUnselectedTables=!!(n&4),r.showInkAnnotation=!!(n&32),r.showObjects=["all","placeholders","none"][n>>13&3],r.showPivotChartFilter=!!(n&32768),r.updateLinks=["userSet","never","always"][n>>8&3],r}function hQe(t,e){e||(e=Ne(72));var r=0;return t&&(t.date1904&&(r|=1),t.filterPrivacy&&(r|=8)),e.write_shift(4,r),e.write_shift(4,0),Uce(t&&t.CodeName||"ThisWorkbook",e),e.slice(0,e.l)}function pQe(t,e){var r={};return t.read_shift(4),r.ArchID=t.read_shift(4),t.l+=e-8,r}function mQe(t,e,r){var n=t.l+e,i=t.read_shift(4);t.l+=1;var s=t.read_shift(4),a=kze(t),o=UYe(t,0,r),c=oD(t);i&32&&(a="_xlnm."+a),t.l=n;var u={Name:a,Ptg:o,Flags:i};return s<268435455&&(u.Sheet=s),c&&(u.Comment=c),u}function gQe(t,e){var r=Ne(9),n=0,i=t.Name;dD.indexOf(i)>-1&&(n|=32,i=i.slice(6)),r.write_shift(4,n),r.write_shift(1,0),r.write_shift(4,t.Sheet==null?4294967295:t.Sheet);var s=[r,Ni(i),JYe(t.Ref,e)];if(t.Comment)s.push(Ov(t.Comment));else{var a=Ne(4);a.write_shift(4,4294967295),s.push(a)}return wi(s)}function vQe(t,e){var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},n=[],i=!1;e||(e={}),e.biff=12;var s=[],a=[[]];return a.SheetNames=[],a.XTI=[],Lv[16]={n:"BrtFRTArchID$",f:pQe},Uu(t,function(c,u,l){switch(l){case 156:a.SheetNames.push(c.name),r.Sheets.push(c);break;case 153:r.WBProps=c;break;case 39:c.Sheet!=null&&(e.SID=c.Sheet),c.Ref=xs(c.Ptg,null,null,a,e),delete e.SID,delete c.Ptg,s.push(c);break;case 1036:break;case 357:case 358:case 355:case 667:a[0].length?a.push([l,c]):a[0]=[l,c],a[a.length-1].XTI=[];break;case 362:a.length===0&&(a[0]=[],a[0].XTI=[]),a[a.length-1].XTI=a[a.length-1].XTI.concat(c),a.XTI=a.XTI.concat(c);break;case 361:break;case 2071:case 158:case 143:case 664:case 353:break;case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:break;case 35:n.push(l),i=!0;break;case 36:n.pop(),i=!1;break;case 37:n.push(l),i=!0;break;case 38:n.pop(),i=!1;break;case 16:break;default:if(!u.T){if(!i||e.WTF&&n[n.length-1]!=37&&n[n.length-1]!=35)throw new Error("Unexpected record 0x"+l.toString(16))}}},e),Ule(r),r.Names=s,r.supbooks=a,r}function yQe(t,e){Le(t,143);for(var r=0;r!=e.SheetNames.length;++r){var n=e.Workbook&&e.Workbook.Sheets&&e.Workbook.Sheets[r]&&e.Workbook.Sheets[r].Hidden||0,i={Hidden:n,iTabID:r+1,strRelID:"rId"+(r+1),name:e.SheetNames[r]};Le(t,156,fQe(i))}Le(t,144)}function bQe(t,e){e||(e=Ne(127));for(var r=0;r!=4;++r)e.write_shift(4,0);return Ni("SheetJS",e),Ni(H4.version,e),Ni(H4.version,e),Ni("7262",e),e.length>e.l?e.slice(0,e.l):e}function wQe(t,e){e||(e=Ne(29)),e.write_shift(-4,0),e.write_shift(-4,460),e.write_shift(4,28800),e.write_shift(4,17600),e.write_shift(4,500),e.write_shift(4,t),e.write_shift(4,t);var r=120;return e.write_shift(1,r),e.length>e.l?e.slice(0,e.l):e}function _Qe(t,e){if(!(!e.Workbook||!e.Workbook.Sheets)){for(var r=e.Workbook.Sheets,n=0,i=-1,s=-1;n<r.length;++n)!r[n]||!r[n].Hidden&&i==-1?i=n:r[n].Hidden==1&&s==-1&&(s=n);s>i||(Le(t,135),Le(t,158,wQe(i)),Le(t,136))}}function xQe(t,e){!e.Workbook||!e.Workbook.Names||e.Workbook.Names.forEach(function(r){try{if(r.Flags&14)return;Le(t,39,gQe(r,e))}catch{console.error("Could not serialize defined name "+JSON.stringify(r))}})}function SQe(t){var e=t.SheetNames.length,r=Ne(12*e+28);r.write_shift(4,e+2),r.write_shift(4,0),r.write_shift(4,-2),r.write_shift(4,-2),r.write_shift(4,0),r.write_shift(4,-1),r.write_shift(4,-1);for(var n=0;n<e;++n)r.write_shift(4,0),r.write_shift(4,n),r.write_shift(4,n);return r}function EQe(t,e){Le(t,353),Le(t,357),Le(t,362,SQe(e)),Le(t,354)}function kQe(t,e){var r=_a();return Le(r,131),Le(r,128,bQe()),Le(r,153,hQe(t.Workbook&&t.Workbook.WBProps||null)),_Qe(r,t),yQe(r,t),EQe(r,t),(t.Workbook||{}).Names&&xQe(r,t),Le(r,132),r.end()}function TQe(t,e,r){return e.slice(-4)===".bin"?vQe(t,r):cQe(t,r)}function AQe(t,e,r,n,i,s,a,o){return e.slice(-4)===".bin"?FJe(t,n,r,i,s,a,o):hZe(t,n,r,i,s,a,o)}function CQe(t,e,r,n,i,s,a,o){return e.slice(-4)===".bin"?QJe(t,n,r,i,s):ZJe(t,n,r,i,s)}function IQe(t,e,r,n,i,s,a,o){return e.slice(-4)===".bin"?mXe():gXe()}function PQe(t,e,r,n,i,s,a,o){return e.slice(-4)===".bin"?hXe():pXe()}function RQe(t,e,r,n){return e.slice(-4)===".bin"?aKe(t,r,n):GGe(t,r,n)}function OQe(t,e,r){return e.slice(-4)===".bin"?lGe(t,r):sGe(t,r)}function BQe(t,e,r){return e.slice(-4)===".bin"?oXe(t,r):ZKe(t,r)}function DQe(t,e,r){return e.slice(-4)===".bin"?GKe(t):HKe(t)}function MQe(t,e,r,n){return r.slice(-4)===".bin"?KKe(t,e,r,n):void 0}function NQe(t,e,r){return e.slice(-4)===".bin"?jKe(t,e,r):qKe(t,e,r)}var Vle=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,qle=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function qo(t,e){var r=t.split(/\s+/),n=[];if(n[0]=r[0],r.length===1)return n;var i=t.match(Vle),s,a,o,c;if(i)for(c=0;c!=i.length;++c)s=i[c].match(qle),(a=s[1].indexOf(":"))===-1?n[s[1]]=s[2].slice(1,s[2].length-1):(s[1].slice(0,6)==="xmlns:"?o="xmlns"+s[1].slice(6):o=s[1].slice(a+1),n[o]=s[2].slice(1,s[2].length-1));return n}function FQe(t){var e=t.split(/\s+/),r={};if(e.length===1)return r;var n=t.match(Vle),i,s,a,o;if(n)for(o=0;o!=n.length;++o)i=n[o].match(qle),(s=i[1].indexOf(":"))===-1?r[i[1]]=i[2].slice(1,i[2].length-1):(i[1].slice(0,6)==="xmlns:"?a="xmlns"+i[1].slice(6):a=i[1].slice(s+1),r[a]=i[2].slice(1,i[2].length-1));return r}var Ng;function LQe(t,e){var r=Ng[t]||kr(t);return r==="General"?Vh(e):eo(r,e)}function $Qe(t,e,r,n){var i=n;switch((r[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":i=an(n);break;case"i2":case"int":i=parseInt(n,10);break;case"r4":case"float":i=parseFloat(n);break;case"date":case"dateTime.tz":i=Hn(n);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+r[0])}t[kr(e)]=i}function UQe(t,e,r){if(t.t!=="z"){if(!r||r.cellText!==!1)try{t.t==="e"?t.w=t.w||ju[t.v]:e==="General"?t.t==="n"?(t.v|0)===t.v?t.w=t.v.toString(10):t.w=Av(t.v):t.w=Vh(t.v):t.w=LQe(e||"General",t.v)}catch(s){if(r.WTF)throw s}try{var n=Ng[e]||e||"General";if(r.cellNF&&(t.z=n),r.cellDates&&t.t=="n"&&C0(n)){var i=nh(t.v);i&&(t.t="d",t.v=new Date(i.y,i.m-1,i.d,i.H,i.M,i.S,i.u))}}catch(s){if(r.WTF)throw s}}}function jQe(t,e,r){if(r.cellStyles&&e.Interior){var n=e.Interior;n.Pattern&&(n.patternType=$Ge[n.Pattern]||n.Pattern)}t[e.ID]=e}function VQe(t,e,r,n,i,s,a,o,c,u){var l="General",f=n.StyleID,d={};u=u||{};var h=[],m=0;for(f===void 0&&o&&(f=o.StyleID),f===void 0&&a&&(f=a.StyleID);s[f]!==void 0&&(s[f].nf&&(l=s[f].nf),s[f].Interior&&h.push(s[f].Interior),!!s[f].Parent);)f=s[f].Parent;switch(r.Type){case"Boolean":n.t="b",n.v=an(t);break;case"String":n.t="s",n.r=kH(kr(t)),n.v=t.indexOf("<")>-1?kr(e||t).replace(/<.*?>/g,""):n.r;break;case"DateTime":t.slice(-1)!="Z"&&(t+="Z"),n.v=(Hn(t)-new Date(Date.UTC(1899,11,30)))/(24*60*60*1e3),n.v!==n.v?n.v=kr(t):n.v<60&&(n.v=n.v-1),(!l||l=="General")&&(l="yyyy-mm-dd");case"Number":n.v===void 0&&(n.v=+t),n.t||(n.t="n");break;case"Error":n.t="e",n.v=fD[t],u.cellText!==!1&&(n.w=t);break;default:t==""&&e==""?n.t="z":(n.t="s",n.v=kH(e||t));break}if(UQe(n,l,u),u.cellFormula!==!1)if(n.Formula){var p=kr(n.Formula);p.charCodeAt(0)==61&&(p=p.slice(1)),n.f=_h(p,i),delete n.Formula,n.ArrayRange=="RC"?n.F=_h("RC:RC",i):n.ArrayRange&&(n.F=_h(n.ArrayRange,i),c.push([Er(n.F),n.F]))}else for(m=0;m<c.length;++m)i.r>=c[m][0].s.r&&i.r<=c[m][0].e.r&&i.c>=c[m][0].s.c&&i.c<=c[m][0].e.c&&(n.F=c[m][1]);u.cellStyles&&(h.forEach(function(g){!d.patternType&&g.patternType&&(d.patternType=g.patternType)}),n.s=d),n.StyleID!==void 0&&(n.ixfe=n.StyleID)}function qQe(t){return dD.indexOf("_xlnm."+t)>-1?"_xlnm."+t:t}function zQe(t){t.t=t.v||"",t.t=t.t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),t.v=t.w=t.ixfe=void 0}function cE(t,e){var r=e||{};cm();var n=fg(O5(t));(r.type=="binary"||r.type=="array"||r.type=="base64")&&(n=on(n));var i=n.slice(0,1024).toLowerCase(),s=!1;if(i=i.replace(/".*?"/g,""),(i.indexOf(">")&1023)>Math.min(i.indexOf(",")&1023,i.indexOf(";")&1023)){var a=wn(r);return a.type="string",up.to_workbook(n,a)}if(i.indexOf("<?xml")==-1&&["html","table","head","meta","script","style","div"].forEach(function(ee){i.indexOf("<"+ee)>=0&&(s=!0)}),s)return Cet(n,r);Ng={"General Number":"General","General Date":Bt[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":Bt[15],"Short Date":Bt[14],"Long Time":Bt[19],"Medium Time":Bt[18],"Short Time":Bt[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:Bt[2],Standard:Bt[4],Percent:Bt[10],Scientific:Bt[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var o,c=[],u,l={},f=[],d={},h="";r.dense&&(d["!data"]=[]);var m={},p={},g=qo('<Data ss:Type="String">'),v=0,y=0,b=0,_={s:{r:2e6,c:2e6},e:{r:0,c:0}},x={},E={},k="",B=0,D=[],z={},U={},S=0,T=[],w=[],A={},F=[],P,O=!1,R=[],I=[],C={},M=0,L=0,N={Sheets:[],WBProps:{date1904:!1}},H={};mi.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"");for(var W="";o=mi.exec(n);)switch(o[3]=(W=o[3]).toLowerCase()){case"data":if(W=="data"){if(o[1]==="/"){if((u=c.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&c.push([o[3],!0]);break}if(c[c.length-1][1])break;o[1]==="/"?VQe(n.slice(v,o.index),k,g,c[c.length-1][0]=="comment"?A:m,{c:y,r:b},x,F[y],p,R,r):(k="",g=qo(o[0]),v=o.index+o[0].length);break;case"cell":if(o[1]==="/")if(w.length>0&&(m.c=w),(!r.sheetRows||r.sheetRows>b)&&m.v!==void 0&&(r.dense?(d["!data"][b]||(d["!data"][b]=[]),d["!data"][b][y]=m):d[or(y)+xr(b)]=m),m.HRef&&(m.l={Target:kr(m.HRef)},m.HRefScreenTip&&(m.l.Tooltip=m.HRefScreenTip),delete m.HRef,delete m.HRefScreenTip),(m.MergeAcross||m.MergeDown)&&(M=y+(parseInt(m.MergeAcross,10)|0),L=b+(parseInt(m.MergeDown,10)|0),(M>y||L>b)&&D.push({s:{c:y,r:b},e:{c:M,r:L}})),!r.sheetStubs)m.MergeAcross?y=M+1:++y;else if(m.MergeAcross||m.MergeDown){for(var q=y;q<=M;++q)for(var G=b;G<=L;++G)(q>y||G>b)&&(r.dense?(d["!data"][G]||(d["!data"][G]=[]),d["!data"][G][q]={t:"z"}):d[or(q)+xr(G)]={t:"z"});y=M+1}else++y;else m=FQe(o[0]),m.Index&&(y=+m.Index-1),y<_.s.c&&(_.s.c=y),y>_.e.c&&(_.e.c=y),o[0].slice(-2)==="/>"&&++y,w=[];break;case"row":o[1]==="/"||o[0].slice(-2)==="/>"?(b<_.s.r&&(_.s.r=b),b>_.e.r&&(_.e.r=b),o[0].slice(-2)==="/>"&&(p=qo(o[0]),p.Index&&(b=+p.Index-1)),y=0,++b):(p=qo(o[0]),p.Index&&(b=+p.Index-1),C={},(p.AutoFitHeight=="0"||p.Height)&&(C.hpx=parseInt(p.Height,10),C.hpt=Fv(C.hpx),I[b]=C),p.Hidden=="1"&&(C.hidden=!0,I[b]=C));break;case"worksheet":if(o[1]==="/"){if((u=c.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"));f.push(h),_.s.r<=_.e.r&&_.s.c<=_.e.c&&(d["!ref"]=Yt(_),r.sheetRows&&r.sheetRows<=_.e.r&&(d["!fullref"]=d["!ref"],_.e.r=r.sheetRows-1,d["!ref"]=Yt(_))),D.length&&(d["!merges"]=D),F.length>0&&(d["!cols"]=F),I.length>0&&(d["!rows"]=I),l[h]=d}else _={s:{r:2e6,c:2e6},e:{r:0,c:0}},b=y=0,c.push([o[3],!1]),u=qo(o[0]),h=kr(u.Name),d={},r.dense&&(d["!data"]=[]),D=[],R=[],I=[],H={name:h,Hidden:0},N.Sheets.push(H);break;case"table":if(o[1]==="/"){if((u=c.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else{if(o[0].slice(-2)=="/>")break;c.push([o[3],!1]),F=[],O=!1}break;case"style":o[1]==="/"?jQe(x,E,r):E=qo(o[0]);break;case"numberformat":E.nf=kr(qo(o[0]).Format||"General"),Ng[E.nf]&&(E.nf=Ng[E.nf]);for(var Y=0;Y!=392&&Bt[Y]!=E.nf;++Y);if(Y==392){for(Y=57;Y!=392;++Y)if(Bt[Y]==null){Uf(E.nf,Y);break}}break;case"column":if(c[c.length-1][0]!=="table"||o[1]==="/")break;if(P=qo(o[0]),P.Hidden&&(P.hidden=!0,delete P.Hidden),P.Width&&(P.wpx=parseInt(P.Width,10)),!O&&P.wpx>10){O=!0,As=xle;for(var te=0;te<F.length;++te)F[te]&&Jf(F[te])}O&&Jf(P),F[P.Index-1||F.length]=P;for(var Q=0;Q<+P.Span;++Q)F[F.length]=wn(P);break;case"namedrange":if(o[1]==="/")break;N.Names||(N.Names=[]);var j=ht(o[0]),Z={Name:qQe(j.Name),Ref:_h(j.RefersTo.slice(1),{r:0,c:0})};N.Sheets.length>0&&(Z.Sheet=N.Sheets.length-1),N.Names.push(Z);break;case"namedcell":break;case"b":break;case"i":break;case"u":break;case"s":break;case"em":break;case"h2":break;case"h3":break;case"sub":break;case"sup":break;case"span":break;case"alignment":break;case"borders":break;case"border":break;case"font":if(o[0].slice(-2)==="/>")break;o[1]==="/"?k+=n.slice(B,o.index):B=o.index+o[0].length;break;case"interior":if(!r.cellStyles)break;E.Interior=qo(o[0]);break;case"protection":break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if(o[0].slice(-2)==="/>")break;o[1]==="/"?Yze(z,W,n.slice(S,o.index)):S=o.index+o[0].length;break;case"paragraphs":break;case"styles":case"workbook":if(o[1]==="/"){if((u=c.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else c.push([o[3],!1]);break;case"comment":if(o[1]==="/"){if((u=c.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"));zQe(A),w.push(A)}else c.push([o[3],!1]),u=qo(o[0]),A={a:u.Author};break;case"autofilter":if(o[1]==="/"){if((u=c.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else if(o[0].charAt(o[0].length-2)!=="/"){var V=qo(o[0]);d["!autofilter"]={ref:_h(V.Range).replace(/\$/g,"")},c.push([o[3],!0])}break;case"name":break;case"datavalidation":if(o[1]==="/"){if((u=c.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&c.push([o[3],!0]);break;case"pixelsperinch":break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if(o[1]==="/"){if((u=c.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&c.push([o[3],!0]);break;case"null":break;default:if(c.length==0&&o[3]=="document"||c.length==0&&o[3]=="uof")return hW(n,r);var ne=!0;switch(c[c.length-1][0]){case"officedocumentsettings":switch(o[3]){case"allowpng":break;case"removepersonalinformation":break;case"downloadcomponents":break;case"locationofcomponents":break;case"colors":break;case"color":break;case"index":break;case"rgb":break;case"targetscreensize":break;case"readonlyrecommended":break;default:ne=!1}break;case"componentoptions":switch(o[3]){case"toolbar":break;case"hideofficelogo":break;case"spreadsheetautofit":break;case"label":break;case"caption":break;case"maxheight":break;case"maxwidth":break;case"nextsheetnumber":break;default:ne=!1}break;case"excelworkbook":switch(o[3]){case"date1904":N.WBProps.date1904=!0;break;case"windowheight":break;case"windowwidth":break;case"windowtopx":break;case"windowtopy":break;case"tabratio":break;case"protectstructure":break;case"protectwindow":break;case"protectwindows":break;case"activesheet":break;case"displayinknotes":break;case"firstvisiblesheet":break;case"supbook":break;case"sheetname":break;case"sheetindex":break;case"sheetindexfirst":break;case"sheetindexlast":break;case"dll":break;case"acceptlabelsinformulas":break;case"donotsavelinkvalues":break;case"iteration":break;case"maxiterations":break;case"maxchange":break;case"path":break;case"xct":break;case"count":break;case"selectedsheets":break;case"calculation":break;case"uncalced":break;case"startupprompt":break;case"crn":break;case"externname":break;case"formula":break;case"colfirst":break;case"collast":break;case"wantadvise":break;case"boolean":break;case"error":break;case"text":break;case"ole":break;case"noautorecover":break;case"publishobjects":break;case"donotcalculatebeforesave":break;case"number":break;case"refmoder1c1":break;case"embedsavesmarttags":break;default:ne=!1}break;case"workbookoptions":switch(o[3]){case"owcversion":break;case"height":break;case"width":break;default:ne=!1}break;case"worksheetoptions":switch(o[3]){case"visible":if(o[0].slice(-2)!=="/>")if(o[1]==="/")switch(n.slice(S,o.index)){case"SheetHidden":H.Hidden=1;break;case"SheetVeryHidden":H.Hidden=2;break}else S=o.index+o[0].length;break;case"header":d["!margins"]||xh(d["!margins"]={},"xlml"),isNaN(+ht(o[0]).Margin)||(d["!margins"].header=+ht(o[0]).Margin);break;case"footer":d["!margins"]||xh(d["!margins"]={},"xlml"),isNaN(+ht(o[0]).Margin)||(d["!margins"].footer=+ht(o[0]).Margin);break;case"pagemargins":var se=ht(o[0]);d["!margins"]||xh(d["!margins"]={},"xlml"),isNaN(+se.Top)||(d["!margins"].top=+se.Top),isNaN(+se.Left)||(d["!margins"].left=+se.Left),isNaN(+se.Right)||(d["!margins"].right=+se.Right),isNaN(+se.Bottom)||(d["!margins"].bottom=+se.Bottom);break;case"displayrighttoleft":N.Views||(N.Views=[]),N.Views[0]||(N.Views[0]={}),N.Views[0].RTL=!0;break;case"freezepanes":break;case"frozennosplit":break;case"splithorizontal":case"splitvertical":break;case"donotdisplaygridlines":break;case"activerow":break;case"activecol":break;case"toprowbottompane":break;case"leftcolumnrightpane":break;case"unsynced":break;case"print":break;case"printerrors":break;case"panes":break;case"scale":break;case"pane":break;case"number":break;case"layout":break;case"pagesetup":break;case"selected":break;case"protectobjects":break;case"enableselection":break;case"protectscenarios":break;case"validprinterinfo":break;case"horizontalresolution":break;case"verticalresolution":break;case"numberofcopies":break;case"activepane":break;case"toprowvisible":break;case"leftcolumnvisible":break;case"fittopage":break;case"rangeselection":break;case"papersizeindex":break;case"pagelayoutzoom":break;case"pagebreakzoom":break;case"filteron":break;case"fitwidth":break;case"fitheight":break;case"commentslayout":break;case"zoom":break;case"lefttoright":break;case"gridlines":break;case"allowsort":break;case"allowfilter":break;case"allowinsertrows":break;case"allowdeleterows":break;case"allowinsertcols":break;case"allowdeletecols":break;case"allowinserthyperlinks":break;case"allowformatcells":break;case"allowsizecols":break;case"allowsizerows":break;case"nosummaryrowsbelowdetail":d["!outline"]||(d["!outline"]={}),d["!outline"].above=!0;break;case"tabcolorindex":break;case"donotdisplayheadings":break;case"showpagelayoutzoom":break;case"nosummarycolumnsrightdetail":d["!outline"]||(d["!outline"]={}),d["!outline"].left=!0;break;case"blackandwhite":break;case"donotdisplayzeros":break;case"displaypagebreak":break;case"rowcolheadings":break;case"donotdisplayoutline":break;case"noorientation":break;case"allowusepivottables":break;case"zeroheight":break;case"viewablerange":break;case"selection":break;case"protectcontents":break;default:ne=!1}break;case"pivottable":case"pivotcache":switch(o[3]){case"immediateitemsondrop":break;case"showpagemultipleitemlabel":break;case"compactrowindent":break;case"location":break;case"pivotfield":break;case"orientation":break;case"layoutform":break;case"layoutsubtotallocation":break;case"layoutcompactrow":break;case"position":break;case"pivotitem":break;case"datatype":break;case"datafield":break;case"sourcename":break;case"parentfield":break;case"ptlineitems":break;case"ptlineitem":break;case"countofsameitems":break;case"item":break;case"itemtype":break;case"ptsource":break;case"cacheindex":break;case"consolidationreference":break;case"filename":break;case"reference":break;case"nocolumngrand":break;case"norowgrand":break;case"blanklineafteritems":break;case"hidden":break;case"subtotal":break;case"basefield":break;case"mapchilditems":break;case"function":break;case"refreshonfileopen":break;case"printsettitles":break;case"mergelabels":break;case"defaultversion":break;case"refreshname":break;case"refreshdate":break;case"refreshdatecopy":break;case"versionlastrefresh":break;case"versionlastupdate":break;case"versionupdateablemin":break;case"versionrefreshablemin":break;case"calculation":break;default:ne=!1}break;case"pagebreaks":switch(o[3]){case"colbreaks":break;case"colbreak":break;case"rowbreaks":break;case"rowbreak":break;case"colstart":break;case"colend":break;case"rowend":break;default:ne=!1}break;case"autofilter":switch(o[3]){case"autofiltercolumn":break;case"autofiltercondition":break;case"autofilterand":break;case"autofilteror":break;default:ne=!1}break;case"querytable":switch(o[3]){case"id":break;case"autoformatfont":break;case"autoformatpattern":break;case"querysource":break;case"querytype":break;case"enableredirections":break;case"refreshedinxl9":break;case"urlstring":break;case"htmltables":break;case"connection":break;case"commandtext":break;case"refreshinfo":break;case"notitles":break;case"nextid":break;case"columninfo":break;case"overwritecells":break;case"donotpromptforfile":break;case"textwizardsettings":break;case"source":break;case"number":break;case"decimal":break;case"thousandseparator":break;case"trailingminusnumbers":break;case"formatsettings":break;case"fieldtype":break;case"delimiters":break;case"tab":break;case"comma":break;case"autoformatname":break;case"versionlastedit":break;case"versionlastrefresh":break;default:ne=!1}break;case"datavalidation":switch(o[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;case"cellrangelist":break;default:ne=!1}break;case"sorting":case"conditionalformatting":switch(o[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"cellrangelist":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;default:ne=!1}break;case"mapinfo":case"schema":case"data":switch(o[3]){case"map":break;case"entry":break;case"range":break;case"xpath":break;case"field":break;case"xsdtype":break;case"filteron":break;case"aggregate":break;case"elementtype":break;case"attributetype":break;case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":break;case"row":break;default:ne=!1}break;case"smarttags":break;default:ne=!1;break}if(ne||o[3].match(/!\[CDATA/))break;if(!c[c.length-1][1])throw"Unrecognized tag: "+o[3]+"|"+c.join("|");if(c[c.length-1][0]==="customdocumentproperties"){if(o[0].slice(-2)==="/>")break;o[1]==="/"?$Qe(U,W,T,n.slice(S,o.index)):(T=o,S=o.index+o[0].length);break}if(r.WTF)throw"Unrecognized tag: "+o[3]+"|"+c.join("|")}var J={};return!r.bookSheets&&!r.bookProps&&(J.Sheets=l),J.SheetNames=f,J.Workbook=N,J.SSF=wn(Bt),J.Props=z,J.Custprops=U,J.bookType="xlml",J}function UI(t,e){switch(kD(e=e||{}),e.type||"base64"){case"base64":return cE(Qa(t),e);case"binary":case"buffer":case"file":return cE(t,e);case"array":return cE(gl(t),e)}}function HQe(t,e){var r=[];return t.Props&&r.push(Zze(t.Props,e)),t.Custprops&&r.push(Jze(t.Props,t.Custprops)),r.join("")}function WQe(t){return(((t||{}).Workbook||{}).WBProps||{}).date1904?'<ExcelWorkbook xmlns="urn:schemas-microsoft-com:office:excel"><Date1904/></ExcelWorkbook>':""}function GQe(t,e){var r=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return e.cellXfs.forEach(function(n,i){var s=[];s.push(Xe("NumberFormat",null,{"ss:Format":nr(Bt[n.numFmtId])}));var a={"ss:ID":"s"+(21+i)};r.push(Xe("Style",s.join(""),a))}),Xe("Styles",r.join(""))}function zle(t){return Xe("NamedRange",null,{"ss:Name":t.Name.slice(0,6)=="_xlnm."?t.Name.slice(6):t.Name,"ss:RefersTo":"="+D5(t.Ref,{r:0,c:0})})}function KQe(t){if(!((t||{}).Workbook||{}).Names)return"";for(var e=t.Workbook.Names,r=[],n=0;n<e.length;++n){var i=e[n];i.Sheet==null&&(i.Name.match(/^_xlfn\./)||r.push(zle(i)))}return Xe("Names",r.join(""))}function XQe(t,e,r,n){if(!t||!((n||{}).Workbook||{}).Names)return"";for(var i=n.Workbook.Names,s=[],a=0;a<i.length;++a){var o=i[a];o.Sheet==r&&(o.Name.match(/^_xlfn\./)||s.push(zle(o)))}return s.join("")}function YQe(t,e,r,n){if(!t)return"";var i=[];if(t["!margins"]&&(i.push("<PageSetup>"),t["!margins"].header&&i.push(Xe("Header",null,{"x:Margin":t["!margins"].header})),t["!margins"].footer&&i.push(Xe("Footer",null,{"x:Margin":t["!margins"].footer})),i.push(Xe("PageMargins",null,{"x:Bottom":t["!margins"].bottom||"0.75","x:Left":t["!margins"].left||"0.7","x:Right":t["!margins"].right||"0.7","x:Top":t["!margins"].top||"0.75"})),i.push("</PageSetup>")),n&&n.Workbook&&n.Workbook.Sheets&&n.Workbook.Sheets[r])if(n.Workbook.Sheets[r].Hidden)i.push(Xe("Visible",n.Workbook.Sheets[r].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var s=0;s<r&&!(n.Workbook.Sheets[s]&&!n.Workbook.Sheets[s].Hidden);++s);s==r&&i.push("<Selected/>")}return((((n||{}).Workbook||{}).Views||[])[0]||{}).RTL&&i.push("<DisplayRightToLeft/>"),t["!protect"]&&(i.push(ls("ProtectContents","True")),t["!protect"].objects&&i.push(ls("ProtectObjects","True")),t["!protect"].scenarios&&i.push(ls("ProtectScenarios","True")),t["!protect"].selectLockedCells!=null&&!t["!protect"].selectLockedCells?i.push(ls("EnableSelection","NoSelection")):t["!protect"].selectUnlockedCells!=null&&!t["!protect"].selectUnlockedCells&&i.push(ls("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(a){t["!protect"][a[0]]&&i.push("<"+a[1]+"/>")})),i.length==0?"":Xe("WorksheetOptions",i.join(""),{xmlns:ja.x})}function ZQe(t){return t.map(function(e){var r=eze(e.t||""),n=Xe("ss:Data",r,{xmlns:"http://www.w3.org/TR/REC-html40"});return Xe("Comment",n,{"ss:Author":e.a})}).join("")}function JQe(t,e,r,n,i,s,a){if(!t||t.v==null&&t.f==null)return"";var o={};if(t.f&&(o["ss:Formula"]="="+nr(D5(t.f,a))),t.F&&t.F.slice(0,e.length)==e){var c=Xr(t.F.slice(e.length+1));o["ss:ArrayRange"]="RC:R"+(c.r==a.r?"":"["+(c.r-a.r)+"]")+"C"+(c.c==a.c?"":"["+(c.c-a.c)+"]")}if(t.l&&t.l.Target&&(o["ss:HRef"]=nr(t.l.Target),t.l.Tooltip&&(o["x:HRefScreenTip"]=nr(t.l.Tooltip))),r["!merges"])for(var u=r["!merges"],l=0;l!=u.length;++l)u[l].s.c!=a.c||u[l].s.r!=a.r||(u[l].e.c>u[l].s.c&&(o["ss:MergeAcross"]=u[l].e.c-u[l].s.c),u[l].e.r>u[l].s.r&&(o["ss:MergeDown"]=u[l].e.r-u[l].s.r));var f="",d="";switch(t.t){case"z":if(!n.sheetStubs)return"";break;case"n":f="Number",d=String(t.v);break;case"b":f="Boolean",d=t.v?"1":"0";break;case"e":f="Error",d=ju[t.v];break;case"d":f="DateTime",d=new Date(t.v).toISOString(),t.z==null&&(t.z=t.z||Bt[14]);break;case"s":f="String",d=Qqe(t.v||"");break}var h=yd(n.cellXfs,t,n);o["ss:StyleID"]="s"+(21+h),o["ss:Index"]=a.c+1;var m=t.v!=null?d:"",p=t.t=="z"?"":'<Data ss:Type="'+f+'">'+m+"</Data>";return(t.c||[]).length>0&&(p+=ZQe(t.c)),Xe("Cell",p,o)}function QQe(t,e){var r='<Row ss:Index="'+(t+1)+'"';return e&&(e.hpt&&!e.hpx&&(e.hpx=fp(e.hpt)),e.hpx&&(r+=' ss:AutoFitHeight="0" ss:Height="'+e.hpx+'"'),e.hidden&&(r+=' ss:Hidden="1"')),r+">"}function eet(t,e,r,n){if(!t["!ref"])return"";var i=Er(t["!ref"]),s=t["!merges"]||[],a=0,o=[];t["!cols"]&&t["!cols"].forEach(function(g,v){Jf(g);var y=!!g.width,b=F5(v,g),_={"ss:Index":v+1};y&&(_["ss:Width"]=Mv(b.width)),g.hidden&&(_["ss:Hidden"]="1"),o.push(Xe("Column",null,_))});for(var c=t["!data"]!=null,u=i.s.r;u<=i.e.r;++u){for(var l=[QQe(u,(t["!rows"]||[])[u])],f=i.s.c;f<=i.e.c;++f){var d=!1;for(a=0;a!=s.length;++a)if(!(s[a].s.c>f)&&!(s[a].s.r>u)&&!(s[a].e.c<f)&&!(s[a].e.r<u)){(s[a].s.c!=f||s[a].s.r!=u)&&(d=!0);break}if(!d){var h={r:u,c:f},m=or(f)+xr(u),p=c?(t["!data"][u]||[])[f]:t[m];l.push(JQe(p,m,t,e,r,n,h))}}l.push("</Row>"),l.length>2&&o.push(l.join(""))}return o.join("")}function tet(t,e,r){var n=[],i=r.SheetNames[t],s=r.Sheets[i],a=s?XQe(s,e,t,r):"";return a.length>0&&n.push("<Names>"+a+"</Names>"),a=s?eet(s,e,t,r):"",a.length>0&&n.push("<Table>"+a+"</Table>"),n.push(YQe(s,e,t,r)),s["!autofilter"]&&n.push('<AutoFilter x:Range="'+D5(Pv(s["!autofilter"].ref),{r:0,c:0})+'" xmlns="urn:schemas-microsoft-com:office:excel"></AutoFilter>'),n.join("")}function ret(t,e){e||(e={}),t.SSF||(t.SSF=wn(Bt)),t.SSF&&(cm(),C5(t.SSF),e.revssf=P5(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF,e.cellXfs=[],yd(e.cellXfs,{},{revssf:{General:0}}));var r=[];r.push(HQe(t,e)),r.push(WQe(t)),r.push(""),r.push("");for(var n=0;n<t.SheetNames.length;++n)r.push(Xe("Worksheet",tet(n,e,t),{"ss:Name":nr(t.SheetNames[n])}));return r[2]=GQe(t,e),r[3]=KQe(t),ui+Xe("Workbook",r.join(""),{xmlns:ja.ss,"xmlns:o":ja.o,"xmlns:x":ja.x,"xmlns:ss":ja.ss,"xmlns:dt":ja.dt,"xmlns:html":ja.html})}function net(t){var e={},r=t.content;if(r.l=28,e.AnsiUserType=r.read_shift(0,"lpstr-ansi"),e.AnsiClipboardFormat=Pze(r),r.length-r.l<=4)return e;var n=r.read_shift(4);if(n==0||n>40||(r.l-=4,e.Reserved1=r.read_shift(0,"lpstr-ansi"),r.length-r.l<=4)||(n=r.read_shift(4),n!==1907505652)||(e.UnicodeClipboardFormat=Rze(r),n=r.read_shift(4),n==0||n>40))return e;r.l-=4,e.Reserved2=r.read_shift(0,"lpwstr")}var iet=[60,1084,2066,2165,2175];function set(t,e,r,n,i){var s=n,a=[],o=r.slice(r.l,r.l+s);if(i&&i.enc&&i.enc.insitu&&o.length>0)switch(t){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:break;case 133:break;default:i.enc.insitu(o)}a.push(o),r.l+=s;for(var c=ou(r,r.l),u=jI[c],l=0;u!=null&&iet.indexOf(c)>-1;)s=ou(r,r.l+2),l=r.l+4,c==2066?l+=4:(c==2165||c==2175)&&(l+=12),o=r.slice(l,r.l+4+s),a.push(o),r.l+=4+s,u=jI[c=ou(r,r.l)];var f=wi(a);Pi(f,0);var d=0;f.lens=[];for(var h=0;h<a.length;++h)f.lens.push(d),d+=a[h].length;if(f.length<n)throw"XLS Record 0x"+t.toString(16)+" Truncated: "+f.length+" < "+n;return e.f(f,f.length,i)}function $c(t,e,r){if(t.t!=="z"&&t.XF){var n=0;try{n=t.z||t.XF.numFmtId||0,e.cellNF&&(t.z=Bt[n])}catch(s){if(e.WTF)throw s}if(!e||e.cellText!==!1)try{t.t==="e"?t.w=t.w||ju[t.v]:n===0||n=="General"?t.t==="n"?(t.v|0)===t.v?t.w=t.v.toString(10):t.w=Av(t.v):t.w=Vh(t.v):t.w=eo(n,t.v,{date1904:!!r,dateNF:e&&e.dateNF})}catch(s){if(e.WTF)throw s}if(e.cellDates&&n&&t.t=="n"&&C0(Bt[n]||String(n))){var i=nh(t.v);i&&(t.t="d",t.v=new Date(i.y,i.m-1,i.d,i.H,i.M,i.S,i.u))}}}function ow(t,e,r){return{v:t,ixfe:e,t:r}}function aet(t,e){var r={opts:{}},n={},i={};e.dense&&(i["!data"]=[]);var s={},a={},o=null,c=[],u="",l={},f,d="",h,m,p,g,v={},y=[],b,_,x=[],E=[],k={Sheets:[],WBProps:{date1904:!1},Views:[{}]},B={},D=function(ce){return ce<8?yh[ce]:ce<64&&E[ce-8]||yh[ce]},z=function(ce,ye,Ee){var Se=ye.XF.data;if(!(!Se||!Se.patternType||!Ee||!Ee.cellStyles)){ye.s={},ye.s.patternType=Se.patternType;var rt;(rt=Dv(D(Se.icvFore)))&&(ye.s.fgColor={rgb:rt}),(rt=Dv(D(Se.icvBack)))&&(ye.s.bgColor={rgb:rt})}},U=function(ce,ye,Ee){if(!(C>1)&&!(Ee.sheetRows&&ce.r>=Ee.sheetRows)){if(Ee.cellStyles&&ye.XF&&ye.XF.data&&z(ce,ye,Ee),delete ye.ixfe,delete ye.XF,f=ce,d=pr(ce),(!a||!a.s||!a.e)&&(a={s:{r:0,c:0},e:{r:0,c:0}}),ce.r<a.s.r&&(a.s.r=ce.r),ce.c<a.s.c&&(a.s.c=ce.c),ce.r+1>a.e.r&&(a.e.r=ce.r+1),ce.c+1>a.e.c&&(a.e.c=ce.c+1),Ee.cellFormula&&ye.f){for(var Se=0;Se<y.length;++Se)if(!(y[Se][0].s.c>ce.c||y[Se][0].s.r>ce.r)&&!(y[Se][0].e.c<ce.c||y[Se][0].e.r<ce.r)){ye.F=Yt(y[Se][0]),(y[Se][0].s.c!=ce.c||y[Se][0].s.r!=ce.r)&&delete ye.f,ye.f&&(ye.f=""+xs(y[Se][1],a,ce,R,S));break}}Ee.dense?(i["!data"][ce.r]||(i["!data"][ce.r]=[]),i["!data"][ce.r][ce.c]=ye):i[d]=ye}},S={enc:!1,sbcch:0,snames:[],sharedf:v,arrayf:y,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!e&&!!e.cellStyles,WTF:!!e&&!!e.wtf};e.password&&(S.password=e.password);var T,w=[],A=[],F=[],P=[],O=!1,R=[];R.SheetNames=S.snames,R.sharedf=S.sharedf,R.arrayf=S.arrayf,R.names=[],R.XTI=[];var I=0,C=0,M=0,L=[],N=[],H;S.codepage=1200,nc(1200);for(var W=!1;t.l<t.length-1;){var q=t.l,G=t.read_shift(2);if(G===0&&I===10)break;var Y=t.l===t.length?0:t.read_shift(2),te=jI[G];if(C==0&&[9,521,1033,2057].indexOf(G)==-1)break;if(te&&te.f){if(e.bookSheets&&I===133&&G!==133)break;if(I=G,te.r===2||te.r==12){var Q=t.read_shift(2);if(Y-=2,!S.enc&&Q!==G&&((Q&255)<<8|Q>>8)!==G)throw new Error("rt mismatch: "+Q+"!="+G);te.r==12&&(t.l+=10,Y-=10)}var j={};if(G===10?j=te.f(t,Y,S):j=set(G,te,t,Y,S),C==0&&[9,521,1033,2057].indexOf(I)===-1)continue;switch(G){case 34:r.opts.Date1904=k.WBProps.date1904=j;break;case 134:r.opts.WriteProtect=!0;break;case 47:if(S.enc||(t.l=0),S.enc=j,!e.password)throw new Error("File is password-protected");if(j.valid==null)throw new Error("Encryption scheme unsupported");if(!j.valid)throw new Error("Password is incorrect");break;case 92:S.lastuser=j;break;case 66:var Z=Number(j);switch(Z){case 21010:Z=1200;break;case 32768:Z=1e4;break;case 32769:Z=1252;break}nc(S.codepage=Z),W=!0;break;case 317:S.rrtabid=j;break;case 25:S.winlocked=j;break;case 439:r.opts.RefreshAll=j;break;case 12:r.opts.CalcCount=j;break;case 16:r.opts.CalcDelta=j;break;case 17:r.opts.CalcIter=j;break;case 13:r.opts.CalcMode=j;break;case 14:r.opts.CalcPrecision=j;break;case 95:r.opts.CalcSaveRecalc=j;break;case 15:S.CalcRefMode=j;break;case 2211:r.opts.FullCalc=j;break;case 129:j.fDialog&&(i["!type"]="dialog"),j.fBelow||((i["!outline"]||(i["!outline"]={})).above=!0),j.fRight||((i["!outline"]||(i["!outline"]={})).left=!0);break;case 224:x.push(j);break;case 430:R.push([j]),R[R.length-1].XTI=[];break;case 35:case 547:R[R.length-1].push(j);break;case 24:case 536:H={Name:j.Name,Ref:xs(j.rgce,a,null,R,S)},j.itab>0&&(H.Sheet=j.itab-1),R.names.push(H),R[0]||(R[0]=[],R[0].XTI=[]),R[R.length-1].push(j),j.Name=="_xlnm._FilterDatabase"&&j.itab>0&&j.rgce&&j.rgce[0]&&j.rgce[0][0]&&j.rgce[0][0][0]=="PtgArea3d"&&(N[j.itab-1]={ref:Yt(j.rgce[0][0][1][2])});break;case 22:S.ExternCount=j;break;case 23:R.length==0&&(R[0]=[],R[0].XTI=[]),R[R.length-1].XTI=R[R.length-1].XTI.concat(j),R.XTI=R.XTI.concat(j);break;case 2196:if(S.biff<8)break;H!=null&&(H.Comment=j[1]);break;case 18:i["!protect"]=j;break;case 19:j!==0&&S.WTF&&console.error("Password verifier: "+j);break;case 133:s[j.pos]=j,S.snames.push(j.name);break;case 10:{if(--C)break;if(a.e){if(a.e.r>0&&a.e.c>0){if(a.e.r--,a.e.c--,i["!ref"]=Yt(a),e.sheetRows&&e.sheetRows<=a.e.r){var V=a.e.r;a.e.r=e.sheetRows-1,i["!fullref"]=i["!ref"],i["!ref"]=Yt(a),a.e.r=V}a.e.r++,a.e.c++}w.length>0&&(i["!merges"]=w),A.length>0&&(i["!objects"]=A),F.length>0&&(i["!cols"]=F),P.length>0&&(i["!rows"]=P),k.Sheets.push(B)}u===""?l=i:n[u]=i,i={},e.dense&&(i["!data"]=[])}break;case 9:case 521:case 1033:case 2057:{if(S.biff===8&&(S.biff={9:2,521:3,1033:4}[G]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[j.BIFFVer]||8),S.biffguess=j.BIFFVer==0,j.BIFFVer==0&&j.dt==4096&&(S.biff=5,W=!0,nc(S.codepage=28591)),S.biff==8&&j.BIFFVer==0&&j.dt==16&&(S.biff=2),C++)break;if(i={},e.dense&&(i["!data"]=[]),S.biff<8&&!W&&(W=!0,nc(S.codepage=e.codepage||1252)),S.biff<5||j.BIFFVer==0&&j.dt==4096){u===""&&(u="Sheet1"),a={s:{r:0,c:0},e:{r:0,c:0}};var ne={pos:t.l-Y,name:u};s[ne.pos]=ne,S.snames.push(u)}else u=(s[q]||{name:""}).name;j.dt==32&&(i["!type"]="chart"),j.dt==64&&(i["!type"]="macro"),w=[],A=[],S.arrayf=y=[],F=[],P=[],O=!1,B={Hidden:(s[q]||{hs:0}).hs,name:u}}break;case 515:case 3:case 2:i["!type"]=="chart"&&(e.dense?(i["!data"][j.r]||[])[j.c]:i[or(j.c)+xr(j.r)])&&++j.c,b={ixfe:j.ixfe,XF:x[j.ixfe]||{},v:j.val,t:"n"},M>0&&(b.z=L[b.ixfe>>8&63]),$c(b,e,r.opts.Date1904),U({c:j.c,r:j.r},b,e);break;case 5:case 517:b={ixfe:j.ixfe,XF:x[j.ixfe],v:j.val,t:j.t},M>0&&(b.z=L[b.ixfe>>8&63]),$c(b,e,r.opts.Date1904),U({c:j.c,r:j.r},b,e);break;case 638:b={ixfe:j.ixfe,XF:x[j.ixfe],v:j.rknum,t:"n"},M>0&&(b.z=L[b.ixfe>>8&63]),$c(b,e,r.opts.Date1904),U({c:j.c,r:j.r},b,e);break;case 189:for(var se=j.c;se<=j.C;++se){var J=j.rkrec[se-j.c][0];b={ixfe:J,XF:x[J],v:j.rkrec[se-j.c][1],t:"n"},M>0&&(b.z=L[b.ixfe>>8&63]),$c(b,e,r.opts.Date1904),U({c:se,r:j.r},b,e)}break;case 6:case 518:case 1030:{if(j.val=="String"){o=j;break}if(b=ow(j.val,j.cell.ixfe,j.tt),b.XF=x[b.ixfe],e.cellFormula){var ee=j.formula;if(ee&&ee[0]&&ee[0][0]&&ee[0][0][0]=="PtgExp"){var ie=ee[0][0][1][0],le=ee[0][0][1][1],ue=pr({r:ie,c:le});v[ue]?b.f=""+xs(j.formula,a,j.cell,R,S):b.F=((e.dense?(i["!data"][ie]||[])[le]:i[ue])||{}).F}else b.f=""+xs(j.formula,a,j.cell,R,S)}M>0&&(b.z=L[b.ixfe>>8&63]),$c(b,e,r.opts.Date1904),U(j.cell,b,e),o=j}break;case 7:case 519:if(o)o.val=j,b=ow(j,o.cell.ixfe,"s"),b.XF=x[b.ixfe],e.cellFormula&&(b.f=""+xs(o.formula,a,o.cell,R,S)),M>0&&(b.z=L[b.ixfe>>8&63]),$c(b,e,r.opts.Date1904),U(o.cell,b,e),o=null;else throw new Error("String record expects Formula");break;case 33:case 545:{y.push(j);var me=pr(j[0].s);if(h=e.dense?(i["!data"][j[0].s.r]||[])[j[0].s.c]:i[me],e.cellFormula&&h){if(!o||!me||!h)break;h.f=""+xs(j[1],a,j[0],R,S),h.F=Yt(j[0])}}break;case 1212:{if(!e.cellFormula)break;if(d){if(!o)break;v[pr(o.cell)]=j[0],h=e.dense?(i["!data"][o.cell.r]||[])[o.cell.c]:i[pr(o.cell)],(h||{}).f=""+xs(j[0],a,f,R,S)}}break;case 253:b=ow(c[j.isst].t,j.ixfe,"s"),c[j.isst].h&&(b.h=c[j.isst].h),b.XF=x[b.ixfe],M>0&&(b.z=L[b.ixfe>>8&63]),$c(b,e,r.opts.Date1904),U({c:j.c,r:j.r},b,e);break;case 513:e.sheetStubs&&(b={ixfe:j.ixfe,XF:x[j.ixfe],t:"z"},M>0&&(b.z=L[b.ixfe>>8&63]),$c(b,e,r.opts.Date1904),U({c:j.c,r:j.r},b,e));break;case 190:if(e.sheetStubs)for(var be=j.c;be<=j.C;++be){var _e=j.ixfe[be-j.c];b={ixfe:_e,XF:x[_e],t:"z"},M>0&&(b.z=L[b.ixfe>>8&63]),$c(b,e,r.opts.Date1904),U({c:be,r:j.r},b,e)}break;case 214:case 516:case 4:b=ow(j.val,j.ixfe,"s"),b.XF=x[b.ixfe],M>0&&(b.z=L[b.ixfe>>8&63]),$c(b,e,r.opts.Date1904),U({c:j.c,r:j.r},b,e);break;case 0:case 512:C===1&&(a=j);break;case 252:c=j;break;case 1054:if(S.biff==4){L[M++]=j[1];for(var xe=0;xe<M+163&&Bt[xe]!=j[1];++xe);xe>=163&&Uf(j[1],M+163)}else Uf(j[1],j[0]);break;case 30:{L[M++]=j;for(var Be=0;Be<M+163&&Bt[Be]!=j;++Be);Be>=163&&Uf(j,M+163)}break;case 229:w=w.concat(j);break;case 93:A[j.cmo[0]]=S.lastobj=j;break;case 438:S.lastobj.TxO=j;break;case 127:S.lastobj.ImData=j;break;case 440:for(g=j[0].s.r;g<=j[0].e.r;++g)for(p=j[0].s.c;p<=j[0].e.c;++p)h=e.dense?(i["!data"][g]||[])[p]:i[pr({c:p,r:g})],h&&(h.l=j[1]);break;case 2048:for(g=j[0].s.r;g<=j[0].e.r;++g)for(p=j[0].s.c;p<=j[0].e.c;++p)h=e.dense?(i["!data"][g]||[])[p]:i[pr({c:p,r:g})],h&&h.l&&(h.l.Tooltip=j[1]);break;case 28:{if(S.biff<=5&&S.biff>=2)break;h=e.dense?(i["!data"][j[0].r]||[])[j[0].c]:i[pr(j[0])];var re=A[j[2]];h||(e.dense?(i["!data"][j[0].r]||(i["!data"][j[0].r]=[]),h=i["!data"][j[0].r][j[0].c]={t:"z"}):h=i[pr(j[0])]={t:"z"},a.e.r=Math.max(a.e.r,j[0].r),a.s.r=Math.min(a.s.r,j[0].r),a.e.c=Math.max(a.e.c,j[0].c),a.s.c=Math.min(a.s.c,j[0].c)),h.c||(h.c=[]),m={a:j[1],t:re.TxO.t},h.c.push(m)}break;case 2173:BKe(x[j.ixfe],j.ext);break;case 125:{if(!S.cellStyles)break;for(;j.e>=j.s;)F[j.e--]={width:j.w/256,level:j.level||0,hidden:!!(j.flags&1)},O||(O=!0,yD(j.w/256)),Jf(F[j.e+1])}break;case 520:{var K={};j.level!=null&&(P[j.r]=K,K.level=j.level),j.hidden&&(P[j.r]=K,K.hidden=!0),j.hpt&&(P[j.r]=K,K.hpt=j.hpt,K.hpx=fp(j.hpt))}break;case 38:case 39:case 40:case 41:i["!margins"]||xh(i["!margins"]={}),i["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[G]]=j;break;case 161:i["!margins"]||xh(i["!margins"]={}),i["!margins"].header=j.header,i["!margins"].footer=j.footer;break;case 574:j.RTL&&(k.Views[0].RTL=!0);break;case 146:E=j;break;case 2198:T=j;break;case 140:_=j;break;case 442:u?B.CodeName=j||B.name:k.WBProps.CodeName=j||"ThisWorkbook";break}}else te||console.error("Missing Info for XLS Record 0x"+G.toString(16)),t.l+=Y}return r.SheetNames=jn(s).sort(function(X,ce){return Number(X)-Number(ce)}).map(function(X){return s[X].name}),e.bookSheets||(r.Sheets=n),!r.SheetNames.length&&l["!ref"]?(r.SheetNames.push("Sheet1"),r.Sheets&&(r.Sheets.Sheet1=l)):r.Preamble=l,r.Sheets&&N.forEach(function(X,ce){r.Sheets[r.SheetNames[ce]]["!autofilter"]=X}),r.Strings=c,r.SSF=wn(Bt),S.enc&&(r.Encryption=S.enc),T&&(r.Themes=T),r.Metadata={},_!==void 0&&(r.Metadata.Country=_),R.names.length>0&&(k.Names=R.names),r.Workbook=k,r}var Fg={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function oet(t,e,r){var n=St.find(t,"/!DocumentSummaryInformation");if(n&&n.size>0)try{var i=qH(n,DI,Fg.DSI);for(var s in i)e[s]=i[s]}catch(u){if(r.WTF)throw u}var a=St.find(t,"/!SummaryInformation");if(a&&a.size>0)try{var o=qH(a,MI,Fg.SI);for(var c in o)e[c]==null&&(e[c]=o[c])}catch(u){if(r.WTF)throw u}e.HeadingPairs&&e.TitlesOfParts&&(Yce(e.HeadingPairs,e.TitlesOfParts,e,r),delete e.HeadingPairs,delete e.TitlesOfParts)}function cet(t,e){var r=[],n=[],i=[],s=0,a,o=bH(DI,"n"),c=bH(MI,"n");if(t.Props)for(a=jn(t.Props),s=0;s<a.length;++s)(Object.prototype.hasOwnProperty.call(o,a[s])?r:Object.prototype.hasOwnProperty.call(c,a[s])?n:i).push([a[s],t.Props[a[s]]]);if(t.Custprops)for(a=jn(t.Custprops),s=0;s<a.length;++s)Object.prototype.hasOwnProperty.call(t.Props||{},a[s])||(Object.prototype.hasOwnProperty.call(o,a[s])?r:Object.prototype.hasOwnProperty.call(c,a[s])?n:i).push([a[s],t.Custprops[a[s]]]);var u=[];for(s=0;s<i.length;++s)nle.indexOf(i[s][0])>-1||Xce.indexOf(i[s][0])>-1||i[s][1]!=null&&u.push(i[s]);n.length&&St.utils.cfb_add(e,"/SummaryInformation",zH(n,Fg.SI,c,MI)),(r.length||u.length)&&St.utils.cfb_add(e,"/DocumentSummaryInformation",zH(r,Fg.DSI,o,DI,u.length?u:null,Fg.UDI))}function Hle(t,e){e||(e={}),kD(e),GB(),e.codepage&&WB(e.codepage);var r,n;if(t.FullPaths){if(St.find(t,"/encryption"))throw new Error("File is password-protected");r=St.find(t,"!CompObj"),n=St.find(t,"/Workbook")||St.find(t,"/Book")}else{switch(e.type){case"base64":t=Js(Qa(t));break;case"binary":t=Js(t);break;case"buffer":break;case"array":Array.isArray(t)||(t=Array.prototype.slice.call(t));break}Pi(t,0),n={content:t}}var i,s;if(r&&net(r),e.bookProps&&!e.bookSheets)i={};else{var a=mr?"buffer":"array";if(n&&n.content)i=aet(n.content,e);else if((s=St.find(t,"PerfectOffice_MAIN"))&&s.content)i=wh.to_workbook(s.content,(e.type=a,e));else if((s=St.find(t,"NativeContent_MAIN"))&&s.content)i=wh.to_workbook(s.content,(e.type=a,e));else throw(s=St.find(t,"MN0"))&&s.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");e.bookVBA&&t.FullPaths&&St.find(t,"/_VBA_PROJECT_CUR/VBA/dir")&&(i.vbaraw=uXe(t))}var o={};return t.FullPaths&&oet(t,o,e),i.Props=i.Custprops=o,e.bookFiles&&(i.cfb=t),i}function uet(t,e){var r=e||{},n=St.utils.cfb_new({root:"R"}),i="/Workbook";switch(r.bookType||"xls"){case"xls":r.bookType="biff8";case"xla":r.bookType||(r.bookType="xla");case"biff8":i="/Workbook",r.biff=8;break;case"biff5":i="/Book",r.biff=5;break;default:throw new Error("invalid type "+r.bookType+" for XLS CFB")}return St.utils.cfb_add(n,i,Wle(t,r)),r.biff==8&&(t.Props||t.Custprops)&&cet(t,n),r.biff==8&&t.vbaraw&&fXe(n,St.read(t.vbaraw,{type:typeof t.vbaraw=="string"?"binary":"buffer"})),n}var Lv={0:{f:DZe},1:{f:VZe},2:{f:oJe},3:{f:YZe},4:{f:WZe},5:{f:iJe},6:{f:dJe},7:{f:eJe},8:{f:bJe},9:{f:yJe},10:{f:gJe},11:{f:vJe},12:{f:zZe},13:{f:lJe},14:{f:JZe},15:{f:KZe},16:{f:Lle},17:{f:pJe},18:{f:rJe},19:{f:aD},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:mQe},40:{},42:{},43:{f:ZGe},44:{f:XGe},45:{f:eKe},46:{f:rKe},47:{f:tKe},48:{},49:{f:yze},50:{},51:{f:NKe},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:ple},62:{f:fJe},63:{f:WKe},64:{f:MJe},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:Fs,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:RJe},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:UZe},148:{f:FZe,p:16},151:{f:kJe},152:{},153:{f:dQe},154:{},155:{},156:{f:uQe},157:{},158:{},159:{T:1,f:cGe},160:{T:-1},161:{T:1,f:B0},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:wJe},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:DKe},336:{T:-1},337:{f:$Ke,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:BI},357:{},358:{},359:{},360:{T:1},361:{},362:{f:hle},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:TJe},427:{f:AJe},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:IJe},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:$Ze},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:SJe},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:BI},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:sXe},633:{T:1},634:{T:-1},635:{T:1,f:nXe},636:{T:-1},637:{f:xze},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:JJe},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:NJe},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},jI={6:{f:aE},10:{f:sf},12:{f:ii},13:{f:ii},14:{f:ni},15:{f:ni},16:{f:Rs},17:{f:ni},18:{f:ni},19:{f:ii},20:{f:YH},21:{f:YH},23:{f:hle},24:{f:JH},25:{f:ni},26:{},27:{},28:{f:gWe},29:{},34:{f:ni},35:{f:ZH},38:{f:Rs},39:{f:Rs},40:{f:Rs},41:{f:Rs},42:{f:ni},43:{f:ni},47:{f:IGe},49:{f:zHe},51:{f:ii},60:{},61:{f:$He},64:{f:ni},65:{f:qHe},66:{f:ii},77:{},80:{},81:{},82:{},85:{f:ii},89:{},90:{},91:{},92:{f:CHe},93:{f:bWe},94:{},95:{f:ni},96:{},97:{},99:{f:ni},125:{f:ple},128:{f:sWe},129:{f:PHe},130:{f:ii},131:{f:ni},132:{f:ni},133:{f:RHe},134:{},140:{f:AWe},141:{f:ii},144:{},146:{f:PWe},151:{},152:{},153:{},154:{},155:{},156:{f:ii},157:{},158:{},160:{f:FWe},161:{f:BWe},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:tWe},190:{f:rWe},193:{f:sf},197:{},198:{},199:{},200:{},201:{},202:{f:ni},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:ii},220:{},221:{f:ni},222:{},224:{f:iWe},225:{f:AHe},226:{f:sf},227:{},229:{f:vWe},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:BHe},253:{f:WHe},255:{f:MHe},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:ile},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:ni},353:{f:sf},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:uWe},431:{f:ni},432:{},433:{},434:{},437:{},438:{f:xWe},439:{f:ni},440:{f:SWe},441:{},442:{f:Zy},443:{},444:{f:ii},445:{},446:{},448:{f:sf},449:{f:LHe,r:2},450:{f:sf},512:{f:GH},513:{f:NWe},515:{f:cWe},516:{f:KHe},517:{f:XH},519:{f:LWe},520:{f:NHe},523:{},545:{f:QH},549:{f:WH},566:{},574:{f:jHe},638:{f:eWe},659:{},1048:{},1054:{f:YHe},1084:{},1212:{f:hWe},2048:{f:kWe},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:nw},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:sf},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:RWe,r:12},2173:{f:OKe,r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:ni,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:dWe,r:12},2197:{},2198:{f:TKe,r:12},2199:{},2200:{},2201:{},2202:{f:pWe,r:12},2203:{f:sf},2204:{},2205:{},2206:{},2207:{},2211:{f:FHe},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:ii},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:DWe},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:IWe},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:GH},1:{},2:{f:qWe},3:{f:jWe},4:{f:UWe},5:{f:XH},7:{f:HWe},8:{},9:{f:nw},11:{},22:{f:ii},30:{f:JHe},31:{},32:{},33:{f:QH},36:{},37:{f:WH},50:{f:WWe},62:{},52:{},67:{},68:{f:ii},69:{},86:{},126:{},127:{f:$We},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:GWe},223:{},234:{},354:{},421:{},518:{f:aE},521:{f:nw},536:{f:JH},547:{f:ZH},561:{},579:{},1030:{f:aE},1033:{f:nw},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},101:{},102:{},105:{},106:{},107:{},109:{},112:{},114:{},29282:{}};function Je(t,e,r,n){var i=e;if(!isNaN(i)){var s=n||(r||[]).length||0,a=t.next(4);a.write_shift(2,i),a.write_shift(2,s),s>0&&nD(r)&&t.push(r)}}function fet(t,e,r,n){var i=(r||[]).length||0;if(i<=8224)return Je(t,e,r,i);var s=e;if(!isNaN(s)){for(var a=r.parts||[],o=0,c=0,u=0;u+(a[o]||8224)<=8224;)u+=a[o]||8224,o++;var l=t.next(4);for(l.write_shift(2,s),l.write_shift(2,u),t.push(r.slice(c,c+u)),c+=u;c<i;){for(l=t.next(4),l.write_shift(2,60),u=0;u+(a[o]||8224)<=8224;)u+=a[o]||8224,o++;l.write_shift(2,u),t.push(r.slice(c,c+u)),c+=u}}}function t2(t,e,r){return t||(t=Ne(7)),t.write_shift(2,e),t.write_shift(2,r),t.write_shift(2,0),t.write_shift(1,0),t}function det(t,e,r,n){var i=Ne(9);return t2(i,t,e),sle(r,n||"b",i),i}function het(t,e,r){var n=Ne(8+2*r.length);return t2(n,t,e),n.write_shift(1,r.length),n.write_shift(r.length,r,"sbcs"),n.l<n.length?n.slice(0,n.l):n}function pet(t,e,r,n){if(e.v!=null)switch(e.t){case"d":case"n":var i=e.t=="d"?xi(Hn(e.v)):e.v;i==(i|0)&&i>=0&&i<65536?Je(t,2,zWe(r,n,i)):Je(t,3,VWe(r,n,i));return;case"b":case"e":Je(t,5,det(r,n,e.v,e.t));return;case"s":case"str":Je(t,4,het(r,n,e.v==null?"":String(e.v).slice(0,255)));return}Je(t,1,t2(null,r,n))}function met(t,e,r,n){var i=e["!data"]!=null,s=Er(e["!ref"]||"A1"),a="",o=[];if(s.e.c>255||s.e.r>16383){if(n.WTF)throw new Error("Range "+(e["!ref"]||"A1")+" exceeds format limit A1:IV16384");s.e.c=Math.min(s.e.c,255),s.e.r=Math.min(s.e.c,16383)}for(var c=[],u=s.s.c;u<=s.e.c;++u)o[u]=or(u);for(var l=s.s.r;l<=s.e.r;++l)for(i&&(c=e["!data"][l]||[]),a=xr(l),u=s.s.c;u<=s.e.c;++u){var f=i?c[u]:e[o[u]+a];f&&pet(t,f,l,u)}}function get(t,e){for(var r=e||{},n=_a(),i=0,s=0;s<t.SheetNames.length;++s)t.SheetNames[s]==r.sheet&&(i=s);if(i==0&&r.sheet&&t.SheetNames[0]!=r.sheet)throw new Error("Sheet not found: "+r.sheet);return Je(n,r.biff==4?1033:r.biff==3?521:9,mD(t,16,r)),met(n,t.Sheets[t.SheetNames[i]],i,r),Je(n,10),n.end()}function vet(t,e,r){Je(t,49,HHe({sz:12,name:"Arial"},r))}function yet(t,e,r){e&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var i=n[0];i<=n[1];++i)e[i]!=null&&Je(t,1054,ZHe(i,e[i],r))})}function bet(t,e){var r=Ne(19);r.write_shift(4,2151),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,1),r.write_shift(4,0),Je(t,2151,r),r=Ne(39),r.write_shift(4,2152),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,0),r.write_shift(4,0),r.write_shift(2,1),r.write_shift(4,4),r.write_shift(2,0),ule(Er(e["!ref"]||"A1"),r),r.write_shift(4,4),Je(t,2152,r)}function wet(t,e){for(var r=0;r<16;++r)Je(t,224,KH({numFmtId:0,style:!0},0,e));e.cellXfs.forEach(function(n){Je(t,224,KH(n,0,e))})}function _et(t,e){for(var r=0;r<e["!links"].length;++r){var n=e["!links"][r];Je(t,440,EWe(n)),n[1].Tooltip&&Je(t,2048,TWe(n))}delete e["!links"]}function xet(t,e){if(e){var r=0;e.forEach(function(n,i){++r<=256&&n&&Je(t,125,OWe(F5(i,n),i))})}}function Eet(t,e,r,n,i){var s=16+yd(i.cellXfs,e,i);if(e.v==null&&!e.bf){Je(t,513,Wh(r,n,s));return}if(e.bf)Je(t,6,LYe(e,r,n,i,s));else switch(e.t){case"d":case"n":var a=e.t=="d"?xi(Hn(e.v)):e.v;Je(t,515,lWe(r,n,a,s));break;case"b":case"e":Je(t,517,oWe(r,n,e.v,s,i,e.t));break;case"s":case"str":if(i.bookSST){var o=xD(i.Strings,e.v==null?"":String(e.v),i.revStrings);Je(t,253,GHe(r,n,o,s))}else Je(t,516,XHe(r,n,(e.v==null?"":String(e.v)).slice(0,255),s,i));break;default:Je(t,513,Wh(r,n,s))}}function ket(t,e,r){var n=_a(),i=r.SheetNames[t],s=r.Sheets[i]||{},a=(r||{}).Workbook||{},o=(a.Sheets||[])[t]||{},c=s["!data"]!=null,u=e.biff==8,l,f="",d=[],h=Er(s["!ref"]||"A1"),m=u?65536:16384;if(h.e.c>255||h.e.r>=m){if(e.WTF)throw new Error("Range "+(s["!ref"]||"A1")+" exceeds format limit A1:IV16384");h.e.c=Math.min(h.e.c,255),h.e.r=Math.min(h.e.c,m-1)}Je(n,2057,mD(r,16,e)),Je(n,13,go(1)),Je(n,12,go(100)),Je(n,15,Ks(!0)),Je(n,17,Ks(!1)),Je(n,16,zh(.001)),Je(n,95,Ks(!0)),Je(n,42,Ks(!1)),Je(n,43,Ks(!1)),Je(n,130,go(1)),Je(n,128,aWe()),Je(n,131,Ks(!1)),Je(n,132,Ks(!1)),u&&xet(n,s["!cols"]),Je(n,512,QHe(h,e)),u&&(s["!links"]=[]);for(var p=[],g=[],v=h.s.c;v<=h.e.c;++v)d[v]=or(v);for(var y=h.s.r;y<=h.e.r;++y)for(c&&(g=s["!data"][y]||[]),f=xr(y),v=h.s.c;v<=h.e.c;++v){l=d[v]+f;var b=c?g[v]:s[l];b&&(Eet(n,b,y,v,e),u&&b.l&&s["!links"].push([l,b.l]),u&&b.c&&p.push([l,b.c]))}var _=o.CodeName||o.name||i;return u&&Je(n,574,VHe((a.Views||[])[0])),u&&(s["!merges"]||[]).length&&Je(n,229,yWe(s["!merges"])),u&&_et(n,s),Je(n,442,ale(_)),u&&bet(n,s),Je(n,10),n.end()}function Tet(t,e,r){var n=_a(),i=(t||{}).Workbook||{},s=i.Sheets||[],a=i.WBProps||{},o=r.biff==8,c=r.biff==5;if(Je(n,2057,mD(t,5,r)),r.bookType=="xla"&&Je(n,135),Je(n,225,o?go(1200):null),Je(n,193,oHe(2)),c&&Je(n,191),c&&Je(n,192),Je(n,226),Je(n,92,IHe("SheetJS",r)),Je(n,66,go(o?1200:1252)),o&&Je(n,353,go(0)),o&&Je(n,448),Je(n,317,MWe(t.SheetNames.length)),o&&t.vbaraw&&Je(n,211),o&&t.vbaraw){var u=a.CodeName||"ThisWorkbook";Je(n,442,ale(u))}Je(n,156,go(17)),Je(n,25,Ks(!1)),Je(n,18,Ks(!1)),Je(n,19,go(0)),o&&Je(n,431,Ks(!1)),o&&Je(n,444,go(0)),Je(n,61,UHe()),Je(n,64,Ks(!1)),Je(n,141,go(0)),Je(n,34,Ks(nQe(t)=="true")),Je(n,14,Ks(!0)),o&&Je(n,439,Ks(!1)),Je(n,218,go(0)),vet(n,t,r),yet(n,t.SSF,r),wet(n,r),o&&Je(n,352,Ks(!1));var l=n.end(),f=_a();o&&Je(f,140,CWe()),o&&r.Strings&&fet(f,252,DHe(r.Strings)),Je(f,10);var d=f.end(),h=_a(),m=0,p=0;for(p=0;p<t.SheetNames.length;++p)m+=(o?12:11)+(o?2:1)*t.SheetNames[p].length;var g=l.length+m+d.length;for(p=0;p<t.SheetNames.length;++p){var v=s[p]||{};Je(h,133,OHe({pos:g,hs:v.Hidden||0,dt:0,name:t.SheetNames[p]},r)),g+=e[p].length}var y=h.end();if(m!=y.length)throw new Error("BS8 "+m+" != "+y.length);var b=[];return l.length&&b.push(l),y.length&&b.push(y),d.length&&b.push(d),wi(b)}function Aet(t,e){var r=e||{},n=[];t&&!t.SSF&&(t.SSF=wn(Bt)),t&&t.SSF&&(cm(),C5(t.SSF),r.revssf=P5(t.SSF),r.revssf[t.SSF[65535]]=0,r.ssf=t.SSF),r.Strings=[],r.Strings.Count=0,r.Strings.Unique=0,TD(r),r.cellXfs=[],yd(r.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={});for(var i=0;i<t.SheetNames.length;++i)n[n.length]=ket(i,r,t);return n.unshift(Tet(t,n,r)),wi(n)}function Wle(t,e){for(var r=0;r<=t.SheetNames.length;++r){var n=t.Sheets[t.SheetNames[r]];if(!(!n||!n["!ref"])){var i=Fi(n["!ref"]);i.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+t.SheetNames[r]+"' extends beyond column IV (255).  Data may be lost.")}}var s=e||{};switch(s.biff||2){case 8:case 5:return Aet(t,e);case 4:case 3:case 2:return get(t,e)}throw new Error("invalid type "+s.bookType+" for BIFF")}function uW(t,e){var r=e||{},n=r.dense!=null?r.dense:sqe,i={};n&&(i["!data"]=[]),t=t.replace(/<!--.*?-->/g,"");var s=t.match(/<table/i);if(!s)throw new Error("Invalid HTML: could not find <table>");var a=t.match(/<\/table/i),o=s.index,c=a&&a.index||t.length,u=Hqe(t.slice(o,c),/(:?<tr[^>]*>)/i,"<tr>"),l=-1,f=0,d=0,h=0,m={s:{r:1e7,c:1e7},e:{r:0,c:0}},p=[];for(o=0;o<u.length;++o){var g=u[o].trim(),v=g.slice(0,3).toLowerCase();if(v=="<tr"){if(++l,r.sheetRows&&r.sheetRows<=l){--l;break}f=0;continue}if(!(v!="<td"&&v!="<th")){var y=g.split(/<\/t[dh]>/i);for(c=0;c<y.length;++c){var b=y[c].trim();if(b.match(/<t[dh]/i)){for(var _=b,x=0;_.charAt(0)=="<"&&(x=_.indexOf(">"))>-1;)_=_.slice(x+1);for(var E=0;E<p.length;++E){var k=p[E];k.s.c==f&&k.s.r<l&&l<=k.e.r&&(f=k.e.c+1,E=-1)}var B=ht(b.slice(0,b.indexOf(">")));h=B.colspan?+B.colspan:1,((d=+B.rowspan)>1||h>1)&&p.push({s:{r:l,c:f},e:{r:l+(d||1)-1,c:f+h-1}});var D=B.t||B["data-t"]||"";if(!_.length){f+=h;continue}if(_=Ece(_),m.s.r>l&&(m.s.r=l),m.e.r<l&&(m.e.r=l),m.s.c>f&&(m.s.c=f),m.e.c<f&&(m.e.c=f),!_.length){f+=h;continue}var z={t:"s",v:_};r.raw||!_.trim().length||D=="s"||(_==="TRUE"?z={t:"b",v:!0}:_==="FALSE"?z={t:"b",v:!1}:isNaN(Za(_))?isNaN(lp(_).getDate())||(z={t:"d",v:Hn(_)},r.cellDates||(z={t:"n",v:xi(z.v)}),z.z=r.dateNF||Bt[14]):z={t:"n",v:Za(_)}),n?(i["!data"][l]||(i["!data"][l]=[]),i["!data"][l][f]=z):i[pr({r:l,c:f})]=z,f+=h}}}}return i["!ref"]=Yt(m),p.length&&(i["!merges"]=p),i}function Gle(t,e,r,n){for(var i=t["!merges"]||[],s=[],a={},o=t["!data"]!=null,c=e.s.c;c<=e.e.c;++c){for(var u=0,l=0,f=0;f<i.length;++f)if(!(i[f].s.r>r||i[f].s.c>c)&&!(i[f].e.r<r||i[f].e.c<c)){if(i[f].s.r<r||i[f].s.c<c){u=-1;break}u=i[f].e.r-i[f].s.r+1,l=i[f].e.c-i[f].s.c+1;break}if(!(u<0)){var d=or(c)+xr(r),h=o?(t["!data"][r]||[])[c]:t[d],m=h&&h.v!=null&&(h.h||tD(h.w||(vl(h),h.w)||""))||"";a={},u>1&&(a.rowspan=u),l>1&&(a.colspan=l),n.editable?m='<span contenteditable="true">'+m+"</span>":h&&(a["data-t"]=h&&h.t||"z",h.v!=null&&(a["data-v"]=h.v),h.z!=null&&(a["data-z"]=h.z),h.l&&(h.l.Target||"#").charAt(0)!="#"&&(m='<a href="'+h.l.Target+'">'+m+"</a>")),a.id=(n.id||"sjs")+"-"+d,s.push(Xe("td",m,a))}}var p="<tr>";return p+s.join("")+"</tr>"}var Kle='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',Xle="</body></html>";function Cet(t,e){var r=t.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!r||r.length==0)throw new Error("Invalid HTML: could not find <table>");if(r.length==1){var n=vd(uW(r[0],e),e);return n.bookType="html",n}var i=ID();return r.forEach(function(s,a){L5(i,uW(s,e),"Sheet"+(a+1))}),i.bookType="html",i}function Yle(t,e,r){var n=[];return n.join("")+"<table"+(r&&r.id?' id="'+r.id+'"':"")+">"}function Zle(t,e){var r=e||{},n=r.header!=null?r.header:Kle,i=r.footer!=null?r.footer:Xle,s=[n],a=Fi(t["!ref"]);s.push(Yle(t,a,r));for(var o=a.s.r;o<=a.e.r;++o)s.push(Gle(t,a,o,r));return s.push("</table>"+i),s.join("")}function Jle(t,e,r){var n=e.rows;if(!n)throw"Unsupported origin when "+e.tagName+" is not a TABLE";var i=r||{},s=t["!data"]!=null,a=0,o=0;if(i.origin!=null)if(typeof i.origin=="number")a=i.origin;else{var c=typeof i.origin=="string"?Xr(i.origin):i.origin;a=c.r,o=c.c}var u=Math.min(i.sheetRows||1e7,n.length),l={s:{r:0,c:0},e:{r:a,c:o}};if(t["!ref"]){var f=Fi(t["!ref"]);l.s.r=Math.min(l.s.r,f.s.r),l.s.c=Math.min(l.s.c,f.s.c),l.e.r=Math.max(l.e.r,f.e.r),l.e.c=Math.max(l.e.c,f.e.c),a==-1&&(l.e.r=a=f.e.r+1)}var d=[],h=0,m=t["!rows"]||(t["!rows"]=[]),p=0,g=0,v=0,y=0,b=0,_=0;for(t["!cols"]||(t["!cols"]=[]);p<n.length&&g<u;++p){var x=n[p];if(fW(x)){if(i.display)continue;m[g]={hidden:!0}}var E=x.cells;for(v=y=0;v<E.length;++v){var k=E[v];if(!(i.display&&fW(k))){var B=k.hasAttribute("data-v")?k.getAttribute("data-v"):k.hasAttribute("v")?k.getAttribute("v"):Ece(k.innerHTML),D=k.getAttribute("data-z")||k.getAttribute("z");for(h=0;h<d.length;++h){var z=d[h];z.s.c==y+o&&z.s.r<g+a&&g+a<=z.e.r&&(y=z.e.c+1-o,h=-1)}_=+k.getAttribute("colspan")||1,((b=+k.getAttribute("rowspan")||1)>1||_>1)&&d.push({s:{r:g+a,c:y+o},e:{r:g+a+(b||1)-1,c:y+o+(_||1)-1}});var U={t:"s",v:B},S=k.getAttribute("data-t")||k.getAttribute("t")||"";B!=null&&(B.length==0?U.t=S||"z":i.raw||B.trim().length==0||S=="s"||(B==="TRUE"?U={t:"b",v:!0}:B==="FALSE"?U={t:"b",v:!1}:isNaN(Za(B))?isNaN(lp(B).getDate())||(U={t:"d",v:Hn(B)},i.cellDates||(U={t:"n",v:xi(U.v)}),U.z=i.dateNF||Bt[14]):U={t:"n",v:Za(B)})),U.z===void 0&&D!=null&&(U.z=D);var T="",w=k.getElementsByTagName("A");if(w&&w.length)for(var A=0;A<w.length&&!(w[A].hasAttribute("href")&&(T=w[A].getAttribute("href"),T.charAt(0)!="#"));++A);T&&T.charAt(0)!="#"&&T.slice(0,11).toLowerCase()!="javascript:"&&(U.l={Target:T}),s?(t["!data"][g+a]||(t["!data"][g+a]=[]),t["!data"][g+a][y+o]=U):t[pr({c:y+o,r:g+a})]=U,l.e.c<y+o&&(l.e.c=y+o),y+=_}}++g}return d.length&&(t["!merges"]=(t["!merges"]||[]).concat(d)),l.e.r=Math.max(l.e.r,g-1+a),t["!ref"]=Yt(l),g>=u&&(t["!fullref"]=Yt((l.e.r=n.length-p+g-1+a,l))),t}function Qle(t,e){var r=e||{},n={};return r.dense&&(n["!data"]=[]),Jle(n,t,e)}function Iet(t,e){var r=vd(Qle(t,e),e);return r}function fW(t){var e="",r=Pet(t);return r&&(e=r(t).getPropertyValue("display")),e||(e=t.style&&t.style.display),e==="none"}function Pet(t){return t.ownerDocument.defaultView&&typeof t.ownerDocument.defaultView.getComputedStyle=="function"?t.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}function Ret(t){var e=t.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,function(n,i){return Array(parseInt(i,10)+1).join(" ")}).replace(/<text:tab[^>]*\/>/g,"	").replace(/<text:line-break\/>/g,`
`),r=kr(e.replace(/<[^>]*>/g,""));return[r]}function eue(t,e,r){var n=r||{},i=O5(t);mi.lastIndex=0,i=i.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");for(var s,a,o="",c="",u,l=0,f=-1,d="";s=mi.exec(i);)switch(s[3]=s[3].replace(/_.*$/,"")){case"number-style":case"currency-style":case"percentage-style":case"date-style":case"time-style":case"text-style":s[1]==="/"?(a["truncate-on-overflow"]=="false"&&(o.match(/h/)?o=o.replace(/h+/,"[$&]"):o.match(/m/)?o=o.replace(/m+/,"[$&]"):o.match(/s/)&&(o=o.replace(/s+/,"[$&]"))),n[a.name]=o,o=""):s[0].charAt(s[0].length-2)!=="/"&&(o="",a=ht(s[0],!1));break;case"boolean-style":s[1]==="/"?(n[a.name]="General",o=""):s[0].charAt(s[0].length-2)!=="/"&&(o="",a=ht(s[0],!1));break;case"boolean":o+="General";break;case"text":s[1]==="/"?(d=i.slice(f,mi.lastIndex-s[0].length),d=="%"&&a[0]=="<number:percentage-style"?o+="%":o+='"'+d.replace(/"/g,'""')+'"'):s[0].charAt(s[0].length-2)!=="/"&&(f=mi.lastIndex);break;case"day":switch(u=ht(s[0],!1),u.style){case"short":o+="d";break;case"long":o+="dd";break;default:o+="dd";break}break;case"day-of-week":switch(u=ht(s[0],!1),u.style){case"short":o+="ddd";break;case"long":o+="dddd";break;default:o+="ddd";break}break;case"era":switch(u=ht(s[0],!1),u.style){case"short":o+="ee";break;case"long":o+="eeee";break;default:o+="eeee";break}break;case"hours":switch(u=ht(s[0],!1),u.style){case"short":o+="h";break;case"long":o+="hh";break;default:o+="hh";break}break;case"minutes":switch(u=ht(s[0],!1),u.style){case"short":o+="m";break;case"long":o+="mm";break;default:o+="mm";break}break;case"month":switch(u=ht(s[0],!1),u.textual&&(o+="mm"),u.style){case"short":o+="m";break;case"long":o+="mm";break;default:o+="m";break}break;case"seconds":{switch(u=ht(s[0],!1),u.style){case"short":o+="s";break;case"long":o+="ss";break;default:o+="ss";break}u["decimal-places"]&&(o+="."+Ir("0",+u["decimal-places"]))}break;case"year":switch(u=ht(s[0],!1),u.style){case"short":o+="yy";break;case"long":o+="yyyy";break;default:o+="yy";break}break;case"am-pm":o+="AM/PM";break;case"week-of-year":case"quarter":console.error("Excel does not support ODS format token "+s[3]);break;case"fill-character":s[1]==="/"?(d=i.slice(f,mi.lastIndex-s[0].length),o+='"'+d.replace(/"/g,'""')+'"*'):s[0].charAt(s[0].length-2)!=="/"&&(f=mi.lastIndex);break;case"scientific-number":u=ht(s[0],!1),o+="0."+Ir("0",+u["min-decimal-places"]||+u["decimal-places"]||2)+Ir("?",+u["decimal-places"]-+u["min-decimal-places"]||0)+"E"+(an(u["forced-exponent-sign"])?"+":"")+Ir("0",+u["min-exponent-digits"]||2);break;case"fraction":u=ht(s[0],!1),+u["min-integer-digits"]?o+=Ir("0",+u["min-integer-digits"]):o+="#",o+=" ",o+=Ir("?",+u["min-numerator-digits"]||1),o+="/",+u["denominator-value"]?o+=u["denominator-value"]:o+=Ir("?",+u["min-denominator-digits"]||1);break;case"currency-symbol":s[1]==="/"?o+='"'+i.slice(f,mi.lastIndex-s[0].length).replace(/"/g,'""')+'"':s[0].charAt(s[0].length-2)!=="/"?f=mi.lastIndex:o+="$";break;case"text-properties":switch(u=ht(s[0],!1),(u.color||"").toLowerCase().replace("#","")){case"ff0000":case"red":o="[Red]"+o;break}break;case"text-content":o+="@";break;case"map":u=ht(s[0],!1),kr(u.condition)=="value()>=0"?o=n[u["apply-style-name"]]+";"+o:console.error("ODS number format may be incorrect: "+u.condition);break;case"number":if(s[1]==="/")break;u=ht(s[0],!1),c="",c+=Ir("0",+u["min-integer-digits"]||1),an(u.grouping)&&(c=au(Ir("#",Math.max(0,4-c.length))+c)),(+u["min-decimal-places"]||+u["decimal-places"])&&(c+="."),+u["min-decimal-places"]&&(c+=Ir("0",+u["min-decimal-places"]||1)),+u["decimal-places"]-(+u["min-decimal-places"]||0)&&(c+=Ir("0",+u["decimal-places"]-(+u["min-decimal-places"]||0))),o+=c;break;case"embedded-text":s[1]==="/"?l==0?o+='"'+i.slice(f,mi.lastIndex-s[0].length).replace(/"/g,'""')+'"':o=o.slice(0,l)+'"'+i.slice(f,mi.lastIndex-s[0].length).replace(/"/g,'""')+'"'+o.slice(l):s[0].charAt(s[0].length-2)!=="/"&&(f=mi.lastIndex,l=-+ht(s[0],!1).position||0);break}return n}function tue(t,e,r){var n=e||{},i=O5(t),s=[],a,o,c,u="",l=0,f,d,h={},m=[],p={};n.dense&&(p["!data"]=[]);var g,v,y={value:""},b="",_=0,x=[],E=-1,k=-1,B={s:{r:1e6,c:1e7},e:{r:0,c:0}},D=0,z=r||{},U={},S=[],T={},w=0,A=0,F=[],P=1,O=1,R=[],I={Names:[],WBProps:{}},C={},M=["",""],L=[],N={},H="",W=0,q=!1,G=!1,Y=0,te=0;for(mi.lastIndex=0,i=i.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");g=mi.exec(i);)switch(g[3]=g[3].replace(/_.*$/,"")){case"table":case"":g[1]==="/"?(B.e.c>=B.s.c&&B.e.r>=B.s.r?p["!ref"]=Yt(B):p["!ref"]="A1:A1",n.sheetRows>0&&n.sheetRows<=B.e.r&&(p["!fullref"]=p["!ref"],B.e.r=n.sheetRows-1,p["!ref"]=Yt(B)),S.length&&(p["!merges"]=S),F.length&&(p["!rows"]=F),f.name=f.||f.name,typeof JSON<"u"&&JSON.stringify(f),m.push(f.name),h[f.name]=p,G=!1):g[0].charAt(g[0].length-2)!=="/"&&(f=ht(g[0],!1),E=k=-1,B.s.r=B.s.c=1e7,B.e.r=B.e.c=0,p={},n.dense&&(p["!data"]=[]),S=[],F=[],G=!0);break;case"table-row-group":g[1]==="/"?--D:++D;break;case"table-row":case"":if(g[1]==="/"){E+=P,P=1;break}if(d=ht(g[0],!1),d.?E=d.-1:E==-1&&(E=0),P=+d["number-rows-repeated"]||1,P<10)for(Y=0;Y<P;++Y)D>0&&(F[E+Y]={level:D});k=-1;break;case"covered-table-cell":g[1]!=="/"&&++k,n.sheetStubs&&(n.dense?(p["!data"][E]||(p["!data"][E]=[]),p["!data"][E][k]={t:"z"}):p[pr({r:E,c:k})]={t:"z"}),b="",x=[];break;case"table-cell":case"":if(g[0].charAt(g[0].length-2)==="/")++k,y=ht(g[0],!1),O=parseInt(y["number-columns-repeated"]||"1",10),v={t:"z",v:null},y.formula&&n.cellFormula!=!1&&(v.f=oW(kr(y.formula))),y["style-name"]&&U[y["style-name"]]&&(v.z=U[y["style-name"]]),(y.||y["value-type"])=="string"&&(v.t="s",v.v=kr(y["string-value"]||""),n.dense?(p["!data"][E]||(p["!data"][E]=[]),p["!data"][E][k]=v):p[or(k)+xr(E)]=v),k+=O-1;else if(g[1]!=="/"){++k,b="",_=0,x=[],O=1;var Q=P?E+P-1:E;if(k>B.e.c&&(B.e.c=k),k<B.s.c&&(B.s.c=k),E<B.s.r&&(B.s.r=E),Q>B.e.r&&(B.e.r=Q),y=ht(g[0],!1),L=[],N={},v={t:y.||y["value-type"],v:null},y["style-name"]&&U[y["style-name"]]&&(v.z=U[y["style-name"]]),n.cellFormula)if(y.formula&&(y.formula=kr(y.formula)),y["number-matrix-columns-spanned"]&&y["number-matrix-rows-spanned"]&&(w=parseInt(y["number-matrix-rows-spanned"],10)||0,A=parseInt(y["number-matrix-columns-spanned"],10)||0,T={s:{r:E,c:k},e:{r:E+w-1,c:k+A-1}},v.F=Yt(T),R.push([T,v.F])),y.formula)v.f=oW(y.formula);else for(Y=0;Y<R.length;++Y)E>=R[Y][0].s.r&&E<=R[Y][0].e.r&&k>=R[Y][0].s.c&&k<=R[Y][0].e.c&&(v.F=R[Y][1]);switch((y["number-columns-spanned"]||y["number-rows-spanned"])&&(w=parseInt(y["number-rows-spanned"],10)||0,A=parseInt(y["number-columns-spanned"],10)||0,T={s:{r:E,c:k},e:{r:E+w-1,c:k+A-1}},S.push(T)),y["number-columns-repeated"]&&(O=parseInt(y["number-columns-repeated"],10)),v.t){case"boolean":v.t="b",v.v=an(y["boolean-value"])||+y["boolean-value"]>=1;break;case"float":v.t="n",v.v=parseFloat(y.value);break;case"percentage":v.t="n",v.v=parseFloat(y.value);break;case"currency":v.t="n",v.v=parseFloat(y.value);break;case"date":v.t="d",v.v=Hn(y["date-value"]),n.cellDates||(v.t="n",v.v=xi(v.v,I.WBProps.date1904)-te),v.z||(v.z="m/d/yy");break;case"time":v.t="n",v.v=Uqe(y["time-value"])/86400,n.cellDates&&(v.t="d",v.v=R5(v.v)),v.z||(v.z="HH:MM:SS");break;case"number":v.t="n",v.v=parseFloat(y.);break;default:if(v.t==="string"||v.t==="text"||!v.t)v.t="s",y["string-value"]!=null&&(b=kr(y["string-value"]),x=[]);else throw new Error("Unsupported value type "+v.t)}}else{if(q=!1,v.t==="s"&&(v.v=b||"",x.length&&(v.R=x),q=_==0),C.Target&&(v.l=C),L.length>0&&(v.c=L,L=[]),b&&n.cellText!==!1&&(v.w=b),q&&(v.t="z",delete v.v),(!q||n.sheetStubs)&&!(n.sheetRows&&n.sheetRows<=E))for(var j=0;j<P;++j){if(O=parseInt(y["number-columns-repeated"]||"1",10),n.dense)for(p["!data"][E+j]||(p["!data"][E+j]=[]),p["!data"][E+j][k]=j==0?v:wn(v);--O>0;)p["!data"][E+j][k+O]=wn(v);else for(p[pr({r:E+j,c:k})]=v;--O>0;)p[pr({r:E+j,c:k+O})]=wn(v);B.e.c<=k&&(B.e.c=k)}O=parseInt(y["number-columns-repeated"]||"1",10),k+=O-1,O=0,v={},b="",x=[]}C={};break;case"document":case"document-content":case"":case"spreadsheet":case"":case"scripts":case"styles":case"font-face-decls":case"master-styles":if(g[1]==="/"){if((a=s.pop())[0]!==g[3])throw"Bad state: "+a}else g[0].charAt(g[0].length-2)!=="/"&&s.push([g[3],!0]);break;case"annotation":if(g[1]==="/"){if((a=s.pop())[0]!==g[3])throw"Bad state: "+a;N.t=b,x.length&&(N.R=x),N.a=H,L.push(N)}else g[0].charAt(g[0].length-2)!=="/"&&s.push([g[3],!1]);H="",W=0,b="",_=0,x=[];break;case"creator":g[1]==="/"?H=i.slice(W,g.index):W=g.index+g[0].length;break;case"meta":case"":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if(g[1]==="/"){if((a=s.pop())[0]!==g[3])throw"Bad state: "+a}else g[0].charAt(g[0].length-2)!=="/"&&s.push([g[3],!1]);b="",_=0,x=[];break;case"scientific-number":case"currency-symbol":case"fill-character":break;case"text-style":case"boolean-style":case"number-style":case"currency-style":case"percentage-style":case"date-style":case"time-style":if(g[1]==="/"){var Z=mi.lastIndex;eue(i.slice(c,mi.lastIndex),e,z),mi.lastIndex=Z}else g[0].charAt(g[0].length-2)!=="/"&&(c=mi.lastIndex-g[0].length);break;case"script":break;case"libraries":break;case"automatic-styles":break;case"default-style":case"page-layout":break;case"style":{var V=ht(g[0],!1);V.family=="table-cell"&&z[V["data-style-name"]]&&(U[V.name]=z[V["data-style-name"]])}break;case"map":break;case"font-face":break;case"paragraph-properties":break;case"table-properties":break;case"table-column-properties":break;case"table-row-properties":break;case"table-cell-properties":break;case"number":break;case"fraction":break;case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":break;case"boolean":break;case"text":if(g[0].slice(-2)==="/>")break;if(g[1]==="/")switch(s[s.length-1][0]){case"number-style":case"date-style":case"time-style":u+=i.slice(l,g.index);break}else l=g.index+g[0].length;break;case"named-range":o=ht(g[0],!1),M=oE(o["cell-range-address"]);var ne={Name:o.name,Ref:M[0]+"!"+M[1]};G&&(ne.Sheet=m.length),I.Names.push(ne);break;case"text-content":break;case"text-properties":break;case"embedded-text":break;case"body":case"":break;case"forms":break;case"table-column":break;case"table-header-rows":break;case"table-rows":break;case"table-column-group":break;case"table-header-columns":break;case"table-columns":break;case"null-date":switch(o=ht(g[0],!1),o["date-value"]){case"1904-01-01":I.WBProps.date1904=!0;case"1900-01-01":te=0}break;case"graphic-properties":break;case"calculation-settings":break;case"named-expressions":break;case"label-range":break;case"label-ranges":break;case"named-expression":break;case"sort":break;case"sort-by":break;case"sort-groups":break;case"tab":break;case"line-break":break;case"span":break;case"p":case"":if(["master-styles"].indexOf(s[s.length-1][0])>-1)break;if(g[1]==="/"&&(!y||!y["string-value"])){var se=Ret(i.slice(_,g.index));b=(b.length>0?b+`
`:"")+se[0]}else ht(g[0],!1),_=g.index+g[0].length;break;case"s":break;case"database-range":if(g[1]==="/")break;try{M=oE(ht(g[0])["target-range-address"]),h[M[0]]["!autofilter"]={ref:M[1]}}catch{}break;case"date":break;case"object":break;case"title":case"":break;case"desc":break;case"binary-data":break;case"table-source":break;case"scenario":break;case"iteration":break;case"content-validations":break;case"content-validation":break;case"help-message":break;case"error-message":break;case"database-ranges":break;case"filter":break;case"filter-and":break;case"filter-or":break;case"filter-condition":break;case"list-level-style-bullet":break;case"list-level-style-number":break;case"list-level-properties":break;case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":break;case"event-listener":break;case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":break;case"config-item":break;case"page-number":break;case"page-count":break;case"time":break;case"cell-range-source":break;case"detective":break;case"operation":break;case"highlighted-range":break;case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":break;case"rect":break;case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":break;case"properties":break;case"property":break;case"a":if(g[1]!=="/"){if(C=ht(g[0],!1),!C.href)break;C.Target=kr(C.href),delete C.href,C.Target.charAt(0)=="#"&&C.Target.indexOf(".")>-1?(M=oE(C.Target.slice(1)),C.Target="#"+M[0]+"!"+M[1]):C.Target.match(/^\.\.[\\\/]/)&&(C.Target=C.Target.slice(3))}break;case"table-protection":break;case"data-pilot-grand-total":break;case"office-document-common-attrs":break;default:switch(g[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case":":case":":break;default:if(n.WTF)throw new Error(g)}}var J={Sheets:h,SheetNames:m,Workbook:I};return n.bookSheets&&delete J.Sheets,J}function dW(t,e){e=e||{},mo(t,"META-INF/manifest.xml")&&Vze(pi(t,"META-INF/manifest.xml"),e);var r=va(t,"styles.xml"),n=r&&eue(on(r)),i=va(t,"content.xml");if(!i)throw new Error("Missing content.xml in ODS / UOF file");var s=tue(on(i),e,n);return mo(t,"meta.xml")&&(s.Props=Gce(pi(t,"meta.xml"))),s.bookType="ods",s}function hW(t,e){var r=tue(t,e);return r.bookType="fods",r}var Oet=function(){var t=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),e="<office:document-styles "+Iv({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+t+"</office:document-styles>";return function(){return ui+e}}();function Bet(t,e){var r="number",n="",i={"style:name":e},s="",a=0;t=t.replace(/"[$]"/g,"$");e:{if(t.indexOf(";")>-1&&(console.error("Unsupported ODS Style Map exported.  Using first branch of "+t),t=t.slice(0,t.indexOf(";"))),t=="@"){r="text",n="<number:text-content/>";break e}if(t.indexOf(/\$/)>-1&&(r="currency"),t[a]=='"'){for(s="";t[++a]!='"'||t[++a]=='"';)s+=t[a];--a,t[a+1]=="*"?(a++,n+="<number:fill-character>"+nr(s.replace(/""/g,'"'))+"</number:fill-character>"):n+="<number:text>"+nr(s.replace(/""/g,'"'))+"</number:text>",t=t.slice(a+1),a=0}var o=t.match(/# (\?+)\/(\?+)/);if(o){n+=Xe("number:fraction",null,{"number:min-integer-digits":0,"number:min-numerator-digits":o[1].length,"number:max-denominator-value":Math.max(+o[1].replace(/./g,"9"),+o[2].replace(/./g,"9"))});break e}if(o=t.match(/# (\?+)\/(\d+)/)){n+=Xe("number:fraction",null,{"number:min-integer-digits":0,"number:min-numerator-digits":o[1].length,"number:denominator-value":+o[2]});break e}if(o=t.match(/(\d+)(|\.\d+)%/)){r="percentage",n+=Xe("number:number",null,{"number:decimal-places":o[2]&&o.length-1||0,"number:min-decimal-places":o[2]&&o.length-1||0,"number:min-integer-digits":o[1].length})+"<number:text>%</number:text>";break e}var c=!1;if(["y","m","d"].indexOf(t[0])>-1){r="date";t:for(;a<t.length;++a)switch(s=t[a].toLowerCase()){case"h":case"s":c=!0,--a;break t;case"m":r:for(var u=a+1;u<t.length;++u)switch(t[u]){case"y":case"d":break r;case"h":case"s":c=!0,--a;break t}case"y":case"d":for(;(t[++a]||"").toLowerCase()==s[0];)s+=s[0];switch(--a,s){case"y":case"yy":n+="<number:year/>";break;case"yyy":case"yyyy":n+='<number:year number:style="long"/>';break;case"mmmmm":console.error("ODS has no equivalent of format |mmmmm|");case"m":case"mm":case"mmm":case"mmmm":n+='<number:month number:style="'+(s.length%2?"short":"long")+'" number:textual="'+(s.length>=3?"true":"false")+'"/>';break;case"d":case"dd":n+='<number:day number:style="'+(s.length%2?"short":"long")+'"/>';break;case"ddd":case"dddd":n+='<number:day-of-week number:style="'+(s.length%2?"short":"long")+'"/>';break}break;case'"':for(;t[++a]!='"'||t[++a]=='"';)s+=t[a];--a,n+="<number:text>"+nr(s.slice(1).replace(/""/g,'"'))+"</number:text>";break;case"/":n+="<number:text>"+nr(s)+"</number:text>";break;default:console.error("unrecognized character "+s+" in ODF format "+t)}if(!c)break e;t=t.slice(a+1),a=0}if(t.match(/^\[?[hms]/)){for(r=="number"&&(r="time"),t.match(/\[/)&&(t=t.replace(/[\[\]]/g,""),i["number:truncate-on-overflow"]="false");a<t.length;++a)switch(s=t[a].toLowerCase()){case"h":case"m":case"s":for(;(t[++a]||"").toLowerCase()==s[0];)s+=s[0];switch(--a,s){case"h":case"hh":n+='<number:hours number:style="'+(s.length%2?"short":"long")+'"/>';break;case"m":case"mm":n+='<number:minutes number:style="'+(s.length%2?"short":"long")+'"/>';break;case"s":case"ss":if(t[a+1]==".")do s+=t[a+1],++a;while(t[a+1]=="0");n+='<number:seconds number:style="'+(s.match("ss")?"long":"short")+'"'+(s.match(/\./)?' number:decimal-places="'+(s.match(/0+/)||[""])[0].length+'"':"")+"/>";break}break;case'"':for(;t[++a]!='"'||t[++a]=='"';)s+=t[a];--a,n+="<number:text>"+nr(s.slice(1).replace(/""/g,'"'))+"</number:text>";break;case"/":n+="<number:text>"+nr(s)+"</number:text>";break;case"a":if(t.slice(a,a+3).toLowerCase()=="a/p"){n+="<number:am-pm/>",a+=2;break}if(t.slice(a,a+5).toLowerCase()=="am/pm"){n+="<number:am-pm/>",a+=4;break}default:console.error("unrecognized character "+s+" in ODF format "+t)}break e}if(t.indexOf(/\$/)>-1&&(r="currency"),t[0]=="$"&&(n+='<number:currency-symbol number:language="en" number:country="US">$</number:currency-symbol>',t=t.slice(1),a=0),a=0,t[a]=='"'){for(;t[++a]!='"'||t[++a]=='"';)s+=t[a];--a,t[a+1]=="*"?(a++,n+="<number:fill-character>"+nr(s.replace(/""/g,'"'))+"</number:fill-character>"):n+="<number:text>"+nr(s.replace(/""/g,'"'))+"</number:text>",t=t.slice(a+1),a=0}var l=t.match(/([#0][0#,]*)(\.[0#]*|)(E[+]?0*|)/i);if(!l||!l[0])console.error("Could not find numeric part of "+t);else{var f=l[1].replace(/,/g,"");n+="<number:"+(l[3]?"scientific-":"")+'number number:min-integer-digits="'+(f.indexOf("0")==-1?"0":f.length-f.indexOf("0"))+'"'+(l[0].indexOf(",")>-1?' number:grouping="true"':"")+(l[2]&&' number:decimal-places="'+(l[2].length-1)+'"'||' number:decimal-places="0"')+(l[3]&&l[3].indexOf("+")>-1?' number:forced-exponent-sign="true"':"")+(l[3]?' number:min-exponent-digits="'+l[3].match(/0+/)[0].length+'"':"")+"></number:"+(l[3]?"scientific-":"")+"number>",a=l.index+l[0].length}if(t[a]=='"'){for(s="";t[++a]!='"'||t[++a]=='"';)s+=t[a];--a,n+="<number:text>"+nr(s.replace(/""/g,'"'))+"</number:text>"}}return n?Xe("number:"+r+"-style",n,i):(console.error("Could not generate ODS number format for |"+t+"|"),"")}function pW(t,e,r){var n=t.filter(function(i){return i.Sheet==(r==-1?null:r)});return n.length?`      <table:named-expressions>
`+n.map(function(i){var s=Mle(i.Ref);return"        "+Xe("table:named-range",null,{"table:name":i.Name,"table:cell-range-address":s,"table:base-cell-address":s.replace(/[\.]?[^\.]*$/,".$A$1")})}).join(`
`)+`
      </table:named-expressions>
`:""}var mW=function(){var t=function(s){return nr(s).replace(/  +/g,function(a){return'<text:s text:c="'+a.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},e=`          <table:table-cell />
`,r=`          <table:covered-table-cell/>
`,n=function(s,a,o,c,u){var l=[];l.push('      <table:table table:name="'+nr(a.SheetNames[o])+`" table:style-name="ta1">
`);var f=0,d=0,h=Fi(s["!ref"]||"A1"),m=s["!merges"]||[],p=0,g=s["!data"]!=null;if(s["!cols"])for(d=0;d<=h.e.c;++d)l.push("        <table:table-column"+(s["!cols"][d]?' table:style-name="co'+s["!cols"][d].ods+'"':"")+`></table:table-column>
`);var v="",y=s["!rows"]||[];for(f=0;f<h.s.r;++f)v=y[f]?' table:style-name="ro'+y[f].ods+'"':"",l.push("        <table:table-row"+v+`></table:table-row>
`);for(;f<=h.e.r;++f){for(v=y[f]?' table:style-name="ro'+y[f].ods+'"':"",l.push("        <table:table-row"+v+`>
`),d=0;d<h.s.c;++d)l.push(e);for(;d<=h.e.c;++d){var b=!1,_={},x="";for(p=0;p!=m.length;++p)if(!(m[p].s.c>d)&&!(m[p].s.r>f)&&!(m[p].e.c<d)&&!(m[p].e.r<f)){(m[p].s.c!=d||m[p].s.r!=f)&&(b=!0),_["table:number-columns-spanned"]=m[p].e.c-m[p].s.c+1,_["table:number-rows-spanned"]=m[p].e.r-m[p].s.r+1;break}if(b){l.push(r);continue}var E=pr({r:f,c:d}),k=g?(s["!data"][f]||[])[d]:s[E];if(k&&k.f&&(_["table:formula"]=nr(tZe(k.f)),k.F&&k.F.slice(0,E.length)==E)){var B=Fi(k.F);_["table:number-matrix-columns-spanned"]=B.e.c-B.s.c+1,_["table:number-matrix-rows-spanned"]=B.e.r-B.s.r+1}if(!k){l.push(e);continue}switch(k.t){case"b":x=k.v?"TRUE":"FALSE",_["office:value-type"]="boolean",_["office:boolean-value"]=k.v?"true":"false";break;case"n":x=k.w||String(k.v||0),_["office:value-type"]="float",_["office:value"]=k.v||0;break;case"s":case"str":x=k.v==null?"":k.v,_["office:value-type"]="string";break;case"d":x=k.w||Hn(k.v).toISOString(),_["office:value-type"]="date",_["office:date-value"]=Hn(k.v).toISOString(),_["table:style-name"]="ce1";break;default:l.push(e);continue}var D=t(x);if(k.l&&k.l.Target){var z=k.l.Target;z=z.charAt(0)=="#"?"#"+Mle(z.slice(1)):z,z.charAt(0)!="#"&&!z.match(/^\w+:/)&&(z="../"+z),D=Xe("text:a",D,{"xlink:href":z.replace(/&/g,"&amp;")})}u[k.z]&&(_["table:style-name"]="ce"+u[k.z].slice(1)),l.push("          "+Xe("table:table-cell",Xe("text:p",D,{}),_)+`
`)}l.push(`        </table:table-row>
`)}return(a.Workbook||{}).Names&&l.push(pW(a.Workbook.Names,a.SheetNames,o)),l.push(`      </table:table>
`),l.join("")},i=function(s,a){s.push(` <office:automatic-styles>
`);var o=0;a.SheetNames.map(function(f){return a.Sheets[f]}).forEach(function(f){if(f&&f["!cols"]){for(var d=0;d<f["!cols"].length;++d)if(f["!cols"][d]){var h=f["!cols"][d];if(h.width==null&&h.wpx==null&&h.wch==null)continue;Jf(h),h.ods=o;var m=f["!cols"][d].wpx+"px";s.push('  <style:style style:name="co'+o+`" style:family="table-column">
`),s.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+m+`"/>
`),s.push(`  </style:style>
`),++o}}});var c=0;a.SheetNames.map(function(f){return a.Sheets[f]}).forEach(function(f){if(f&&f["!rows"]){for(var d=0;d<f["!rows"].length;++d)if(f["!rows"][d]){f["!rows"][d].ods=c;var h=f["!rows"][d].hpx+"px";s.push('  <style:style style:name="ro'+c+`" style:family="table-row">
`),s.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+h+`"/>
`),s.push(`  </style:style>
`),++c}}}),s.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),s.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),s.push(`  </style:style>
`),s.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),s.push(`   <number:month number:style="long"/>
`),s.push(`   <number:text>/</number:text>
`),s.push(`   <number:day number:style="long"/>
`),s.push(`   <number:text>/</number:text>
`),s.push(`   <number:year/>
`),s.push(`  </number:date-style>
`);var u={},l=69;return a.SheetNames.map(function(f){return a.Sheets[f]}).forEach(function(f){if(f)for(var d=f["!data"]!=null,h=Fi(f["!ref"]),m=0;m<=h.e.r;++m)for(var p=0;p<=h.e.c;++p){var g=d?(f["!data"][m]||[])[p]:f[pr({r:m,c:p})];if(!(!g||!g.z||g.z.toLowerCase()=="general")&&!u[g.z]){var v=Bet(g.z,"N"+l);v&&(u[g.z]="N"+l,++l,s.push(v+`
`))}}}),s.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),jn(u).forEach(function(f){s.push('<style:style style:name="ce'+u[f].slice(1)+'" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="'+u[f]+`"/>
`)}),s.push(` </office:automatic-styles>
`),u};return function(a,o){var c=[ui],u=Iv({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),l=Iv({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});o.bookType=="fods"?(c.push("<office:document"+u+l+`>
`),c.push(Wce().replace(/<office:document-meta.*?>/,"").replace(/<\/office:document-meta>/,"")+`
`)):c.push("<office:document-content"+u+`>
`);var f=i(c,a);c.push(`  <office:body>
`),c.push(`    <office:spreadsheet>
`),((a.Workbook||{}).WBProps||{}).date1904&&c.push(`      <table:calculation-settings table:case-sensitive="false" table:search-criteria-must-apply-to-whole-cell="true" table:use-wildcards="true" table:use-regular-expressions="false" table:automatic-find-labels="false">
        <table:null-date table:date-value="1904-01-01"/>
      </table:calculation-settings>
`);for(var d=0;d!=a.SheetNames.length;++d)c.push(n(a.Sheets[a.SheetNames[d]],a,d,o,f));return(a.Workbook||{}).Names&&c.push(pW(a.Workbook.Names,a.SheetNames,-1)),c.push(`    </office:spreadsheet>
`),c.push(`  </office:body>
`),o.bookType=="fods"?c.push("</office:document>"):c.push("</office:document-content>"),c.join("")}}();function rue(t,e){if(e.bookType=="fods")return mW(t,e);var r=JB(),n="",i=[],s=[];return n="mimetype",rr(r,n,"application/vnd.oasis.opendocument.spreadsheet"),n="content.xml",rr(r,n,mW(t,e)),i.push([n,"text/xml"]),s.push([n,"ContentFile"]),n="styles.xml",rr(r,n,Oet(t,e)),i.push([n,"text/xml"]),s.push([n,"StylesFile"]),n="meta.xml",rr(r,n,ui+Wce()),i.push([n,"text/xml"]),s.push([n,"MetadataFile"]),n="manifest.rdf",rr(r,n,Hze(s)),i.push([n,"application/rdf+xml"]),n="META-INF/manifest.xml",rr(r,n,qze(i)),r}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */var _i=function(){try{return typeof Uint8Array>"u"||typeof Uint8Array.prototype.subarray>"u"?"slice":typeof Buffer<"u"?typeof Buffer.prototype.subarray>"u"?"slice":(typeof Buffer.from=="function"?Buffer.from([72,62]):new Buffer([72,62]))instanceof Uint8Array?"subarray":"slice":"subarray"}catch{return"slice"}}();function Iu(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function Hi(t){return typeof TextDecoder<"u"?new TextDecoder().decode(t):on(gl(t))}function Yo(t){return typeof TextEncoder<"u"?new TextEncoder().encode(t):Js(sl(t))}function ed(t){for(var e=0,r=0;r<t.length;++r)e+=t[r].length;var n=new Uint8Array(e),i=0;for(r=0;r<t.length;++r){var s=t[r],a=s.length;if(a<250)for(var o=0;o<a;++o)n[i++]=s[o];else n.set(s,i),i+=a}return n}function VI(t){return t-=t>>1&1431655765,t=(t&858993459)+(t>>2&858993459),(t+(t>>4)&252645135)*16843009>>>24}function Det(t,e){for(var r=(t[e+15]&127)<<7|t[e+14]>>1,n=t[e+14]&1,i=e+13;i>=e;--i)n=n*256+t[i];return(t[e+15]&128?-n:n)*Math.pow(10,r-6176)}function Met(t,e,r){var n=Math.floor(r==0?0:Math.LOG10E*Math.log(Math.abs(r)))+6176-16,i=r/Math.pow(10,n-6176);t[e+15]|=n>>7,t[e+14]|=(n&127)<<1;for(var s=0;i>=1;++s,i/=256)t[e+s]=i&255;t[e+15]|=r>=0?0:128}function $v(t,e){var r=e.l,n=t[r]&127;e:if(t[r++]>=128&&(n|=(t[r]&127)<<7,t[r++]<128||(n|=(t[r]&127)<<14,t[r++]<128)||(n|=(t[r]&127)<<21,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,28),++r,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,35),++r,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,42),++r,t[r++]<128)))break e;return e.l=r,n}function pt(t){var e=new Uint8Array(7);e[0]=t&127;var r=1;e:if(t>127){if(e[r-1]|=128,e[r]=t>>7&127,++r,t<=16383||(e[r-1]|=128,e[r]=t>>14&127,++r,t<=2097151)||(e[r-1]|=128,e[r]=t>>21&127,++r,t<=268435455)||(e[r-1]|=128,e[r]=t/256>>>21&127,++r,t<=34359738367)||(e[r-1]|=128,e[r]=t/65536>>>21&127,++r,t<=4398046511103))break e;e[r-1]|=128,e[r]=t/16777216>>>21&127,++r}return e[_i](0,r)}function nue(t){for(var e={l:0},r=[];e.l<t.length;)r.push($v(t,e));return r}function iue(t){return ed(t.map(function(e){return pt(e)}))}function Sr(t){var e=0,r=t[e]&127;e:if(t[e++]>=128){if(r|=(t[e]&127)<<7,t[e++]<128||(r|=(t[e]&127)<<14,t[e++]<128)||(r|=(t[e]&127)<<21,t[e++]<128))break e;r|=(t[e]&127)<<28}return r}function st(t){for(var e=[],r={l:0};r.l<t.length;){var n=r.l,i=$v(t,r),s=i&7;i=i/8|0;var a,o=r.l;switch(s){case 0:{for(;t[o++]>=128;);a=t[_i](r.l,o),r.l=o}break;case 1:a=t[_i](o,o+8),r.l=o+8;break;case 2:{var c=$v(t,r);a=t[_i](r.l,r.l+c),r.l+=c}break;case 5:a=t[_i](o,o+4),r.l=o+4;break;default:throw new Error("PB Type ".concat(s," for Field ").concat(i," at offset ").concat(n))}var u={data:a,type:s};e[i]==null&&(e[i]=[]),e[i].push(u)}return e}function wt(t){var e=[];return t.forEach(function(r,n){n!=0&&r.forEach(function(i){i.data&&(e.push(pt(n*8+i.type)),i.type==2&&e.push(pt(i.data.length)),e.push(i.data))})}),ed(e)}function Gh(t,e){return t?.map(function(r){return e(r.data)})||[]}function Uv(t){for(var e,r=[],n={l:0};n.l<t.length;){var i=$v(t,n),s=st(t[_i](n.l,n.l+i));n.l+=i;var a={id:Sr(s[1][0].data),messages:[]};s[2].forEach(function(o){var c=st(o.data),u=Sr(c[3][0].data);a.messages.push({meta:c,data:t[_i](n.l,n.l+u)}),n.l+=u}),(e=s[3])!=null&&e[0]&&(a.merge=Sr(s[3][0].data)>>>0>0),r.push(a)}return r}function Lg(t){var e=[];return t.forEach(function(r){var n=[[],[{data:pt(r.id),type:0}],[]];r.merge!=null&&(n[3]=[{data:pt(+!!r.merge),type:0}]);var i=[];r.messages.forEach(function(a){i.push(a.data),a.meta[3]=[{type:0,data:pt(a.data.length)}],n[2].push({data:wt(a.meta),type:2})});var s=wt(n);e.push(pt(s.length)),e.push(s),i.forEach(function(a){return e.push(a)})}),ed(e)}function Net(t,e){if(t!=0)throw new Error("Unexpected Snappy chunk type ".concat(t));for(var r={l:0},n=$v(e,r),i=[],s=r.l;s<e.length;){var a=e[s]&3;if(a==0){var o=e[s++]>>2;if(o<60)++o;else{var c=o-59;o=e[s],c>1&&(o|=e[s+1]<<8),c>2&&(o|=e[s+2]<<16),c>3&&(o|=e[s+3]<<24),o>>>=0,o++,s+=c}i.push(e[_i](s,s+o)),s+=o;continue}else{var u=0,l=0;if(a==1?(l=(e[s]>>2&7)+4,u=(e[s++]&224)<<3,u|=e[s++]):(l=(e[s++]>>2)+1,a==2?(u=e[s]|e[s+1]<<8,s+=2):(u=(e[s]|e[s+1]<<8|e[s+2]<<16|e[s+3]<<24)>>>0,s+=4)),u==0)throw new Error("Invalid offset 0");for(var f=i.length-1,d=u;f>=0&&d>=i[f].length;)d-=i[f].length,--f;if(f<0)if(d==0)d=i[f=0].length;else throw new Error("Invalid offset beyond length");if(l<d)i.push(i[f][_i](i[f].length-d,i[f].length-d+l));else{for(d>0&&(i.push(i[f][_i](i[f].length-d)),l-=d),++f;l>=i[f].length;)i.push(i[f]),l-=i[f].length,++f;l&&i.push(i[f][_i](0,l))}i.length>25&&(i=[ed(i)])}}for(var h=0,m=0;m<i.length;++m)h+=i[m].length;if(h!=n)throw new Error("Unexpected length: ".concat(h," != ").concat(n));return i}function jv(t){Array.isArray(t)&&(t=new Uint8Array(t));for(var e=[],r=0;r<t.length;){var n=t[r++],i=t[r]|t[r+1]<<8|t[r+2]<<16;r+=3,e.push.apply(e,Net(n,t[_i](r,r+i))),r+=i}if(r!==t.length)throw new Error("data is not a valid framed stream!");return e.length==1?e[0]:ed(e)}function $g(t){for(var e=[],r=0;r<t.length;){var n=Math.min(t.length-r,268435455),i=new Uint8Array(4);e.push(i);var s=pt(n),a=s.length;e.push(s),n<=60?(a++,e.push(new Uint8Array([n-1<<2]))):n<=256?(a+=2,e.push(new Uint8Array([240,n-1&255]))):n<=65536?(a+=3,e.push(new Uint8Array([244,n-1&255,n-1>>8&255]))):n<=16777216?(a+=4,e.push(new Uint8Array([248,n-1&255,n-1>>8&255,n-1>>16&255]))):n<=4294967296&&(a+=5,e.push(new Uint8Array([252,n-1&255,n-1>>8&255,n-1>>16&255,n-1>>>24&255]))),e.push(t[_i](r,r+n)),a+=n,i[0]=0,i[1]=a&255,i[2]=a>>8&255,i[3]=a>>16&255,r+=n}return ed(e)}var Fet=function(){return{sst:[],rsst:[],ofmt:[],nfmt:[]}};function sue(t,e,r,n,i){var s,a,o,c,u=e&255,l=e>>8,f=l>=5?i:n;e:if(r&(l>4?8:4)&&t.t=="n"&&u==7){var d=(s=f[7])!=null&&s[0]?Sr(f[7][0].data):-1;if(d==-1)break e;var h=(a=f[15])!=null&&a[0]?Sr(f[15][0].data):-1,m=(o=f[16])!=null&&o[0]?Sr(f[16][0].data):-1,p=(c=f[40])!=null&&c[0]?Sr(f[40][0].data):-1,g=t.v,v=g;t:if(p){if(g==0){h=m=2;break t}g>=604800?h=1:g>=86400?h=2:g>=3600?h=4:g>=60?h=8:g>=1?h=16:h=32,Math.floor(g)!=g?m=32:g%60?m=16:g%3600?m=8:g%86400?m=4:g%604800&&(m=2),m<h&&(m=h)}if(h==-1||m==-1)break e;var y=[],b=[];h==1&&(v=g/604800,m==1?b.push('d"d"'):(v|=0,g-=604800*v),y.push(v+(d==2?" week"+(v==1?"":"s"):d==1?"w":""))),h<=2&&m>=2&&(v=g/86400,m>2&&(v|=0,g-=86400*v),b.push('d"d"'),y.push(v+(d==2?" day"+(v==1?"":"s"):d==1?"d":""))),h<=4&&m>=4&&(v=g/3600,m>4&&(v|=0,g-=3600*v),b.push((h>=4?"[h]":"h")+'"h"'),y.push(v+(d==2?" hour"+(v==1?"":"s"):d==1?"h":""))),h<=8&&m>=8&&(v=g/60,m>8&&(v|=0,g-=60*v),b.push((h>=8?"[m]":"m")+'"m"'),d==0?y.push((h==8&&m==8||v>=10?"":"0")+v):y.push(v+(d==2?" minute"+(v==1?"":"s"):d==1?"m":""))),h<=16&&m>=16&&(v=g,m>16&&(v|=0,g-=v),b.push((h>=16?"[s]":"s")+'"s"'),d==0?y.push((m==16&&h==16||v>=10?"":"0")+v):y.push(v+(d==2?" second"+(v==1?"":"s"):d==1?"s":""))),m>=32&&(v=Math.round(1e3*g),h<32&&b.push('.000"ms"'),d==0?y.push((v>=100?"":v>=10?"0":"00")+v):y.push(v+(d==2?" millisecond"+(v==1?"":"s"):d==1?"ms":""))),t.w=y.join(d==0?":":" "),t.z=b.join(d==0?'":"':" "),d==0&&(t.w=t.w.replace(/:(\d\d\d)$/,".$1"))}}function Let(t,e,r){var n=Iu(t),i=n.getUint32(4,!0),s=-1,a=-1,o=-1,c=NaN,u=new Date(2001,0,1),l=r>1?12:8;i&2&&(o=n.getUint32(l,!0),l+=4),l+=VI(i&(r>1?3468:396))*4,i&512&&(s=n.getUint32(l,!0),l+=4),l+=VI(i&(r>1?12288:4096))*4,i&16&&(a=n.getUint32(l,!0),l+=4),i&32&&(c=n.getFloat64(l,!0),l+=8),i&64&&(u.setTime(u.getTime()+n.getFloat64(l,!0)*1e3),l+=8),r>1&&(i=n.getUint32(8,!0)>>>16,i&255&&(o==-1&&(o=n.getUint32(l,!0)),l+=4));var f,d=t[r>=4?1:2];switch(d){case 0:return;case 2:f={t:"n",v:c};break;case 3:f={t:"s",v:e.sst[a]};break;case 5:f={t:"d",v:u};break;case 6:f={t:"b",v:c>0};break;case 7:f={t:"n",v:c};break;case 8:f={t:"e",v:0};break;case 9:if(s>-1)f={t:"s",v:e.rsst[s]};else throw new Error("Unsupported cell type ".concat(t[_i](0,4)));break;default:throw new Error("Unsupported cell type ".concat(t[_i](0,4)))}return o>-1&&sue(f,d|r<<8,i,e.ofmt[o],e.nfmt[o]),d==7&&(f.v/=86400),f}function $et(t,e){var r=Iu(t);r.getUint32(4,!0);var n=r.getUint32(8,!0),i=12,s=-1,a=-1,o=-1,c=NaN,u=NaN,l=new Date(2001,0,1);n&1&&(c=Det(t,i),i+=16),n&2&&(u=r.getFloat64(i,!0),i+=8),n&4&&(l.setTime(l.getTime()+r.getFloat64(i,!0)*1e3),i+=8),n&8&&(a=r.getUint32(i,!0),i+=4),n&16&&(s=r.getUint32(i,!0),i+=4);var f,d=t[1];switch(d){case 0:return;case 2:f={t:"n",v:c};break;case 3:f={t:"s",v:e.sst[a]};break;case 5:f={t:"d",v:l};break;case 6:f={t:"b",v:u>0};break;case 7:f={t:"n",v:u};break;case 8:f={t:"e",v:0};break;case 9:f={t:"s",v:e.rsst[s]};break;case 10:f={t:"n",v:c};break;default:throw new Error("Unsupported cell type ".concat(t[1]," : ").concat(n&31," : ").concat(t[_i](0,4)))}return i+=VI(n&8160)*4,n&516096&&(o==-1&&(o=r.getUint32(i,!0)),i+=4),o>-1&&sue(f,d|1280,n>>13,e.ofmt[o],e.nfmt[o]),d==7&&(f.v/=86400),f}function cw(t,e){var r=new Uint8Array(32),n=Iu(r),i=12,s=0;switch(r[0]=5,t.t){case"n":r[1]=2,Met(r,i,t.v),s|=1,i+=16;break;case"b":r[1]=6,n.setFloat64(i,t.v?1:0,!0),s|=2,i+=8;break;case"s":var a=t.v==null?"":String(t.v),o=e.indexOf(a);o==-1&&(e[o=e.length]=a),r[1]=3,n.setUint32(i,o,!0),s|=8,i+=4;break;default:throw"unsupported cell type "+t.t}return n.setUint32(8,s,!0),r[_i](0,i)}function lw(t,e){var r=new Uint8Array(32),n=Iu(r),i=12,s=0;switch(r[0]=4,t.t){case"n":r[2]=2,n.setFloat64(i,t.v,!0),s|=32,i+=8;break;case"b":r[2]=6,n.setFloat64(i,t.v?1:0,!0),s|=32,i+=8;break;case"s":var a=t.v==null?"":String(t.v),o=e.indexOf(a);o==-1&&(e[o=e.length]=a),r[2]=3,n.setUint32(i,o,!0),s|=16,i+=4;break;default:throw"unsupported cell type "+t.t}return n.setUint32(8,s,!0),r[_i](0,i)}function Uet(t,e){switch(t[0]){case 0:case 1:case 2:case 3:case 4:return Let(t,e,t[0]);case 5:return $et(t,e);default:throw new Error("Unsupported payload version ".concat(t[0]))}}function nn(t){var e=st(t);return Sr(e[1][0].data)}function Hl(t){return wt([[],[{type:0,data:pt(t)}]])}function xf(t,e){var r,n=(r=t.messages[0].meta[5])!=null&&r[0]?nue(t.messages[0].meta[5][0].data):[],i=n.indexOf(e);i==-1&&(n.push(e),t.messages[0].meta[5]=[{type:2,data:iue(n)}])}function jl(t,e){var r,n=(r=t.messages[0].meta[5])!=null&&r[0]?nue(t.messages[0].meta[5][0].data):[];t.messages[0].meta[5]=[{type:2,data:iue(n.filter(function(i){return i!=e}))}]}function uw(t,e){var r=st(e.data),n=Sr(r[1][0].data),i=r[3],s=[];return(i||[]).forEach(function(a){var o=st(a.data);if(o[1]){var c=Sr(o[1][0].data)>>>0;switch(n){case 1:s[c]=Hi(o[3][0].data);break;case 8:{var u=t[nn(o[9][0].data)][0],l=st(u.data),f=t[nn(l[1][0].data)][0],d=Sr(f.meta[1][0].data);if(d!=2001)throw new Error("2000 unexpected reference to ".concat(d));var h=st(f.data);s[c]=h[3].map(function(m){return Hi(m.data)}).join("")}break;case 2:s[c]=st(o[6][0].data);break;default:throw n}}}),s}function jet(t,e){var r,n,i,s,a,o,c,u,l,f,d,h,m,p,g=st(t),v=Sr(g[1][0].data)>>>0,y=Sr(g[2][0].data)>>>0,b=((n=(r=g[8])==null?void 0:r[0])==null?void 0:n.data)&&Sr(g[8][0].data)>0||!1,_,x;if((s=(i=g[7])==null?void 0:i[0])!=null&&s.data&&e!=0)_=(o=(a=g[7])==null?void 0:a[0])==null?void 0:o.data,x=(u=(c=g[6])==null?void 0:c[0])==null?void 0:u.data;else if((f=(l=g[4])==null?void 0:l[0])!=null&&f.data&&e!=1)_=(h=(d=g[4])==null?void 0:d[0])==null?void 0:h.data,x=(p=(m=g[3])==null?void 0:m[0])==null?void 0:p.data;else throw"NUMBERS Tile missing ".concat(e," cell storage");for(var E=b?4:1,k=Iu(_),B=[],D=0;D<_.length/2;++D){var z=k.getUint16(D*2,!0);z<65535&&B.push([D,z])}if(B.length!=y)throw"Expected ".concat(y," cells, found ").concat(B.length);var U=[];for(D=0;D<B.length-1;++D)U[B[D][0]]=x[_i](B[D][1]*E,B[D+1][1]*E);return B.length>=1&&(U[B[B.length-1][0]]=x[_i](B[B.length-1][1]*E)),{R:v,cells:U}}function Vet(t,e){var r,n=st(e.data),i=-1;(r=n?.[7])!=null&&r[0]&&(Sr(n[7][0].data)>>>0?i=1:i=0);var s=Gh(n[5],function(a){return jet(a,i)});return{nrows:Sr(n[4][0].data)>>>0,data:s.reduce(function(a,o){return a[o.R]||(a[o.R]=[]),o.cells.forEach(function(c,u){if(a[o.R][u])throw new Error("Duplicate cell r=".concat(o.R," c=").concat(u));a[o.R][u]=c}),a},[])}}function qet(t,e,r){var n,i,s,a,o,c,u=st(e.data),l={s:{r:0,c:0},e:{r:0,c:0}};if(l.e.r=(Sr(u[6][0].data)>>>0)-1,l.e.r<0)throw new Error("Invalid row varint ".concat(u[6][0].data));if(l.e.c=(Sr(u[7][0].data)>>>0)-1,l.e.c<0)throw new Error("Invalid col varint ".concat(u[7][0].data));r["!ref"]=Yt(l);var f=r["!data"]!=null,d=r,h=st(u[4][0].data),m=Fet();(n=h[4])!=null&&n[0]&&(m.sst=uw(t,t[nn(h[4][0].data)][0])),(i=h[11])!=null&&i[0]&&(m.ofmt=uw(t,t[nn(h[11][0].data)][0])),(s=h[17])!=null&&s[0]&&(m.rsst=uw(t,t[nn(h[17][0].data)][0])),(a=h[22])!=null&&a[0]&&(m.nfmt=uw(t,t[nn(h[22][0].data)][0]));var p=st(h[3][0].data),g=0;if(p[1].forEach(function(b){var _=st(b.data),x=t[nn(_[2][0].data)][0],E=Sr(x.meta[1][0].data);if(E!=6002)throw new Error("6001 unexpected reference to ".concat(E));var k=Vet(t,x);k.data.forEach(function(B,D){B.forEach(function(z,U){var S=Uet(z,m);S&&(f?(d["!data"][g+D]||(d["!data"][g+D]=[]),d["!data"][g+D][U]=S):r[or(U)+xr(g+D)]=S)})}),g+=k.nrows}),(o=h[13])!=null&&o[0]){var v=t[nn(h[13][0].data)][0],y=Sr(v.meta[1][0].data);if(y!=6144)throw new Error("Expected merge type 6144, found ".concat(y));r["!merges"]=(c=st(v.data))==null?void 0:c[1].map(function(b){var _=st(b.data),x=Iu(st(_[1][0].data)[1][0].data),E=Iu(st(_[2][0].data)[1][0].data);return{s:{r:x.getUint16(0,!0),c:x.getUint16(2,!0)},e:{r:x.getUint16(0,!0)+E.getUint16(0,!0)-1,c:x.getUint16(2,!0)+E.getUint16(2,!0)-1}}})}}function zet(t,e,r){var n=st(e.data),i={"!ref":"A1"};r?.dense&&(i["!data"]=[]);var s=t[nn(n[2][0].data)],a=Sr(s[0].meta[1][0].data);if(a!=6001)throw new Error("6000 unexpected reference to ".concat(a));return qet(t,s[0],i),i}function Het(t,e,r){var n,i=st(e.data),s={name:(n=i[1])!=null&&n[0]?Hi(i[1][0].data):"",sheets:[]},a=Gh(i[2],nn);return a.forEach(function(o){t[o].forEach(function(c){var u=Sr(c.meta[1][0].data);u==6e3&&s.sheets.push(zet(t,c,r))})}),s}function Wet(t,e,r){var n,i=ID(),s=st(e.data);if((n=s[2])!=null&&n[0])throw new Error("Keynote presentations are not supported");var a=Gh(s[1],nn);if(a.forEach(function(o){t[o].forEach(function(c){var u=Sr(c.meta[1][0].data);if(u==2){var l=Het(t,c,r);l.sheets.forEach(function(f,d){L5(i,f,d==0?l.name:l.name+"_"+d,!0)})}})}),i.SheetNames.length==0)throw new Error("Empty NUMBERS file");return i.bookType="numbers",i}function lE(t,e){var r,n,i,s,a,o,c,u={},l=[];if(t.FullPaths.forEach(function(d){if(d.match(/\.iwpv2/))throw new Error("Unsupported password protection")}),t.FileIndex.forEach(function(d){if(d.name.match(/\.iwa$/)&&d.content[0]==0){var h;try{h=jv(d.content)}catch(p){return console.log("?? "+d.content.length+" "+(p.message||p))}var m;try{m=Uv(h)}catch(p){return console.log("## "+(p.message||p))}m.forEach(function(p){u[p.id]=p.messages,l.push(p.id)})}}),!l.length)throw new Error("File has no messages");if((i=(n=(r=u?.[1])==null?void 0:r[0].meta)==null?void 0:n[1])!=null&&i[0].data&&Sr(u[1][0].meta[1][0].data)==1e4)throw new Error("Pages documents are not supported");var f=((c=(o=(a=(s=u?.[1])==null?void 0:s[0])==null?void 0:a.meta)==null?void 0:o[1])==null?void 0:c[0].data)&&Sr(u[1][0].meta[1][0].data)==1&&u[1][0];if(f||l.forEach(function(d){u[d].forEach(function(h){var m=Sr(h.meta[1][0].data)>>>0;if(m==1)if(!f)f=h;else throw new Error("Document has multiple roots")})}),!f)throw new Error("Cannot find Document root");return Wet(u,f,e)}function Get(t,e,r){var n,i,s=[[],[{type:0,data:pt(0)}],[{type:0,data:pt(0)}],[{type:2,data:new Uint8Array([])}],[{type:2,data:new Uint8Array(Array.from({length:510},function(){return 255}))}],[{type:0,data:pt(5)}],[{type:2,data:new Uint8Array([])}],[{type:2,data:new Uint8Array(Array.from({length:510},function(){return 255}))}],[{type:0,data:pt(1)}]];if(!((n=s[6])!=null&&n[0])||!((i=s[7])!=null&&i[0]))throw"Mutation only works on post-BNC storages!";var a=0;if(s[7][0].data.length<2*t.length){var o=new Uint8Array(2*t.length);o.set(s[7][0].data),s[7][0].data=o}if(s[4][0].data.length<2*t.length){var c=new Uint8Array(2*t.length);c.set(s[4][0].data),s[4][0].data=c}for(var u=Iu(s[7][0].data),l=0,f=[],d=Iu(s[4][0].data),h=0,m=[],p=4,g=0;g<t.length;++g){if(t[g]==null){u.setUint16(g*2,65535,!0),d.setUint16(g*2,65535);continue}u.setUint16(g*2,l/p,!0),d.setUint16(g*2,h/p,!0);var v,y;switch(typeof t[g]){case"string":v=cw({t:"s",v:t[g]},e),y=lw({t:"s",v:t[g]},e);break;case"number":v=cw({t:"n",v:t[g]},e),y=lw({t:"n",v:t[g]},e);break;case"boolean":v=cw({t:"b",v:t[g]},e),y=lw({t:"b",v:t[g]},e);break;default:if(t[g]instanceof Date){v=cw({t:"s",v:t[g].toISOString()},e),y=lw({t:"s",v:t[g].toISOString()},e);break}throw new Error("Unsupported value "+t[g])}f.push(v),l+=v.length,m.push(y),h+=y.length,++a}for(s[2][0].data=pt(a),s[5][0].data=pt(5);g<s[7][0].data.length/2;++g)u.setUint16(g*2,65535,!0),d.setUint16(g*2,65535,!0);return s[6][0].data=ed(f),s[3][0].data=ed(m),s[8]=[{type:0,data:pt(1)}],s}function gW(t,e){return{meta:[[],[{type:0,data:pt(t)}]],data:e}}function Sf(t,e){e.last||(e.last=927262);for(var r=e.last;r<2e6;++r)if(!e[r])return e[e.last=r]=t,r;throw new Error("Too many messages")}function Ket(t){var e={},r=[];return t.FileIndex.map(function(n,i){return[n,t.FullPaths[i]]}).forEach(function(n){var i=n[0],s=n[1];i.type==2&&i.name.match(/\.iwa/)&&i.content[0]==0&&Uv(jv(i.content)).forEach(function(a){r.push(a.id),e[a.id]={deps:[],location:s,type:Sr(a.messages[0].meta[1][0].data)}})}),t.FileIndex.forEach(function(n){n.name.match(/\.iwa/)&&n.content[0]==0&&Uv(jv(n.content)).forEach(function(i){i.messages.forEach(function(s){[5,6].forEach(function(a){s.meta[a]&&s.meta[a].forEach(function(o){e[i.id].deps.push(Sr(o.data))})})})})}),e}function Xet(t,e){if(!e||!e.numbers)throw new Error("Must pass a `numbers` option -- check the README");var r=St.read(e.numbers,{type:"base64"}),n=Ket(r),i=Jc(r,n,1);if(i==null)throw"Could not find message ".concat(1," in Numbers template");var s=Gh(st(i.messages[0].data)[1],nn);if(s.length>1)throw new Error("Template NUMBERS file must have exactly one sheet");return t.SheetNames.forEach(function(a,o){o>=1&&(Yet(r,n,o+1),i=Jc(r,n,1),s=Gh(st(i.messages[0].data)[1],nn)),Zet(r,n,t.Sheets[a],a,o,s[o])}),r}function Ii(t,e,r,n){var i=St.find(t,e[r].location);if(!i)throw"Could not find ".concat(e[r].location," in Numbers template");var s=Uv(jv(i.content)),a=s.find(function(o){return o.id==r});n(a,s),i.content=$g(Lg(s)),i.size=i.content.length}function Jc(t,e,r){var n=St.find(t,e[r].location);if(!n)throw"Could not find ".concat(e[r].location," in Numbers template");var i=Uv(jv(n.content)),s=i.find(function(a){return a.id==r});return s}function Yet(t,e,r){var n=-1,i=-1,s={};Ii(t,e,1,function(u,l){var f=st(u.messages[0].data);n=nn(st(u.messages[0].data)[1][0].data),i=Sf({deps:[1],location:e[n].location,type:2},e),s[n]=i,xf(u,i),f[1].push({type:2,data:Hl(i)});var d=Jc(t,e,n);d.id=i,e[1].location==e[i].location?l.push(d):Ii(t,e,i,function(h,m){return m.push(d)}),u.messages[0].data=wt(f)});var a=-1;Ii(t,e,i,function(u,l){for(var f=st(u.messages[0].data),d=3;d<=69;++d)delete f[d];var h=Gh(f[2],nn);h.forEach(function(g){return jl(u,g)}),a=Sf({deps:[i],location:e[h[0]].location,type:e[h[0]].type},e),xf(u,a),s[h[0]]=a,f[2]=[{type:2,data:Hl(a)}];var m=Jc(t,e,h[0]);if(m.id=a,e[h[0]].location==e[i].location)l.push(m);else{var p=e[i].location;p=p.replace(/^Root Entry\//,""),p=p.replace(/^Index\//,"").replace(/\.iwa$/,""),Ii(t,e,2,function(g){var v=st(g.messages[0].data),y=v[3].findIndex(function(_){var x,E,k=st(_.data);return(x=k[3])!=null&&x[0]?Hi(k[3][0].data)==p:!!((E=k[2])!=null&&E[0]&&Hi(k[2][0].data)==p)}),b=st(v[3][y].data);b[6]||(b[6]=[]),b[6].push({type:2,data:wt([[],[{type:0,data:pt(a)}]])}),v[3][y].data=wt(b),g.messages[0].data=wt(v)}),Ii(t,e,a,function(g,v){return v.push(m)})}u.messages[0].data=wt(f)});var o=-1;Ii(t,e,a,function(u,l){for(var f=st(u.messages[0].data),d=st(f[1][0].data),h=3;h<=69;++h)delete d[h];var m=nn(d[2][0].data);d[2][0].data=Hl(s[m]),f[1][0].data=wt(d);var p=nn(f[2][0].data);jl(u,p),o=Sf({deps:[a],location:e[p].location,type:e[p].type},e),xf(u,o),s[p]=o,f[2][0].data=Hl(o);var g=Jc(t,e,p);g.id=o,e[a].location==e[o].location?l.push(g):Ii(t,e,o,function(v,y){return y.push(g)}),u.messages[0].data=wt(f)});var c=e[o].location;c=c.replace(/^Root Entry\//,""),c=c.replace(/^Index\//,"").replace(/\.iwa$/,""),Ii(t,e,o,function(u,l){var f,d,h=st(u.messages[0].data),m=Hi(h[1][0].data),p=m.replace(/-[A-Z0-9]*/,"-".concat(r.toString(16).padStart(4,"0")));if(h[1][0].data=Yo(p),[12,13,29,31,32,33,39,44,47,81,82,84].forEach(function(E){return delete h[E]}),h[45]){var g=st(h[45][0].data),v=nn(g[1][0].data);jl(u,v),delete h[45]}if(h[70]){var y=st(h[70][0].data);(f=y[2])==null||f.forEach(function(E){var k=st(E.data);[2,3].map(function(B){return k[B][0]}).forEach(function(B){var D=st(B.data);if(D[8]){var z=nn(D[8][0].data);jl(u,z)}})}),delete h[70]}[46,30,34,35,36,38,48,49,60,61,62,63,64,71,72,73,74,75,85,86,87,88,89].forEach(function(E){if(h[E]){var k=nn(h[E][0].data);delete h[E],jl(u,k)}});var b=st(h[4][0].data);{[2,4,5,6,11,12,13,15,16,17,18,19,20,21,22].forEach(function(E){var k;if((k=b[E])!=null&&k[0]){var B=nn(b[E][0].data),D=Sf({deps:[o],location:e[B].location,type:e[B].type},e);jl(u,B),xf(u,D),s[B]=D;var z=Jc(t,e,B);if(z.id=D,e[B].location==e[o].location)l.push(z);else{e[D].location=e[B].location.replace(B.toString(),D.toString()),e[D].location==e[B].location&&(e[D].location=e[D].location.replace(/\.iwa/,"-".concat(D,".iwa"))),St.utils.cfb_add(t,e[D].location,$g(Lg([z])));var U=e[D].location;U=U.replace(/^Root Entry\//,""),U=U.replace(/^Index\//,"").replace(/\.iwa$/,""),Ii(t,e,2,function(S){var T=st(S.messages[0].data);T[3].push({type:2,data:wt([[],[{type:0,data:pt(D)}],[{type:2,data:Yo(U.replace(/-.*$/,""))}],[{type:2,data:Yo(U)}],[{type:2,data:new Uint8Array([2,0,0])}],[{type:2,data:new Uint8Array([2,0,0])}],[],[],[],[],[{type:0,data:pt(0)}],[],[{type:0,data:pt(0)}]])}),T[1]=[{type:0,data:pt(Math.max(D+1,Sr(T[1][0].data)))}];var w=T[3].findIndex(function(F){var P,O,R=st(F.data);return(P=R[3])!=null&&P[0]?Hi(R[3][0].data)==c:!!((O=R[2])!=null&&O[0]&&Hi(R[2][0].data)==c)}),A=st(T[3][w].data);A[6]||(A[6]=[]),A[6].push({type:2,data:wt([[],[{type:0,data:pt(D)}]])}),T[3][w].data=wt(A),S.messages[0].data=wt(T)})}b[E][0].data=Hl(D)}});var _=st(b[1][0].data);(d=_[2])==null||d.forEach(function(E){var k=nn(E.data),B=Sf({deps:[o],location:e[k].location,type:e[k].type},e);jl(u,k),xf(u,B),s[k]=B;var D=Jc(t,e,k);if(D.id=B,e[k].location==e[o].location)l.push(D);else{e[B].location=e[k].location.replace(k.toString(),B.toString()),e[B].location==e[k].location&&(e[B].location=e[B].location.replace(/\.iwa/,"-".concat(B,".iwa"))),St.utils.cfb_add(t,e[B].location,$g(Lg([D])));var z=e[B].location;z=z.replace(/^Root Entry\//,""),z=z.replace(/^Index\//,"").replace(/\.iwa$/,""),Ii(t,e,2,function(U){var S=st(U.messages[0].data);S[3].push({type:2,data:wt([[],[{type:0,data:pt(B)}],[{type:2,data:Yo(z.replace(/-.*$/,""))}],[{type:2,data:Yo(z)}],[{type:2,data:new Uint8Array([2,0,0])}],[{type:2,data:new Uint8Array([2,0,0])}],[],[],[],[],[{type:0,data:pt(0)}],[],[{type:0,data:pt(0)}]])}),S[1]=[{type:0,data:pt(Math.max(B+1,Sr(S[1][0].data)))}];var T=S[3].findIndex(function(A){var F,P,O=st(A.data);return(F=O[3])!=null&&F[0]?Hi(O[3][0].data)==c:!!((P=O[2])!=null&&P[0]&&Hi(O[2][0].data)==c)}),w=st(S[3][T].data);w[6]||(w[6]=[]),w[6].push({type:2,data:wt([[],[{type:0,data:pt(B)}]])}),S[3][T].data=wt(w),U.messages[0].data=wt(S)})}E.data=Hl(B)}),b[1][0].data=wt(_);var x=st(b[3][0].data);x[1].forEach(function(E){var k=st(E.data),B=nn(k[2][0].data),D=s[B];if(!s[B]){D=Sf({deps:[o],location:"",type:e[B].type},e),e[D].location="Root Entry/Index/Tables/Tile-".concat(D,".iwa"),s[B]=D;var z=Jc(t,e,B);z.id=D,jl(u,B),xf(u,D),St.utils.cfb_add(t,"/Index/Tables/Tile-".concat(D,".iwa"),$g(Lg([z]))),Ii(t,e,2,function(U){var S=st(U.messages[0].data);S[3].push({type:2,data:wt([[],[{type:0,data:pt(D)}],[{type:2,data:Yo("Tables/Tile")}],[{type:2,data:Yo("Tables/Tile-".concat(D))}],[{type:2,data:new Uint8Array([2,0,0])}],[{type:2,data:new Uint8Array([2,0,0])}],[],[],[],[],[{type:0,data:pt(0)}],[],[{type:0,data:pt(0)}]])}),S[1]=[{type:0,data:pt(Math.max(D+1,Sr(S[1][0].data)))}];var T=S[3].findIndex(function(A){var F,P,O=st(A.data);return(F=O[3])!=null&&F[0]?Hi(O[3][0].data)==c:!!((P=O[2])!=null&&P[0]&&Hi(O[2][0].data)==c)}),w=st(S[3][T].data);w[6]||(w[6]=[]),w[6].push({type:2,data:wt([[],[{type:0,data:pt(D)}]])}),S[3][T].data=wt(w),U.messages[0].data=wt(S)})}k[2][0].data=Hl(D),E.data=wt(k)}),b[3][0].data=wt(x)}h[4][0].data=wt(b),u.messages[0].data=wt(h)})}function Zet(t,e,r,n,i,s){var a=[];Ii(t,e,s,function(u){var l=st(u.messages[0].data);l[1]=[{type:2,data:Yo(n)}],a=Gh(l[2],nn),u.messages[0].data=wt(l)});var o=Jc(t,e,a[0]),c=nn(st(o.messages[0].data)[2][0].data);Ii(t,e,c,function(u,l){return Jet(t,e,r,u,l,c)})}function Jet(t,e,r,n,i,s){var a=Fi(r["!ref"]);a.s.r=a.s.c=0;var o=!1;a.e.c>999&&(o=!0,a.e.c=999),a.e.r>999999&&(o=!0,a.e.r=999999),o&&console.error("Truncating to ".concat(Yt(a)));var c=n6(r,{range:a,header:1}),u=["~Sh33tJ5~"],l=e[s].location;l=l.replace(/^Root Entry\//,""),l=l.replace(/^Index\//,"").replace(/\.iwa$/,"");var f=st(n.messages[0].data);{f[6][0].data=pt(a.e.r+1),f[7][0].data=pt(a.e.c+1),delete f[46];var d=st(f[4][0].data);{var h=nn(st(d[1][0].data)[2][0].data);Ii(t,e,h,function(w,A){var F,P=st(w.messages[0].data);if((F=P?.[2])!=null&&F[0])for(var O=0;O<c.length;++O){var R=st(P[2][0].data);R[1][0].data=pt(O),R[4][0].data=pt(c[O].length),P[2][O]={type:P[2][0].type,data:wt(R)}}w.messages[0].data=wt(P)});var m=nn(d[2][0].data);Ii(t,e,m,function(w,A){for(var F=st(w.messages[0].data),P=0;P<=a.e.c;++P){var O=st(F[2][0].data);O[1][0].data=pt(P),O[4][0].data=pt(a.e.r+1),F[2][P]={type:F[2][0].type,data:wt(O)}}w.messages[0].data=wt(F)});var p=st(d[9][0].data);p[1]=[];var g=st(d[3][0].data);{var v=256;g[2]=[{type:0,data:pt(v)}];var y=nn(st(g[1][0].data)[2][0].data),b=function(){var w=Jc(t,e,2),A=st(w.messages[0].data),F=A[3].filter(function(P){return Sr(st(P.data)[1][0].data)==y});return F?.length?Sr(st(F[0].data)[12][0].data):0}();St.utils.cfb_del(t,e[y].location),Ii(t,e,2,function(w){var A=st(w.messages[0].data);A[3]=A[3].filter(function(O){return Sr(st(O.data)[1][0].data)!=y});var F=A[3].findIndex(function(O){var R,I,C=st(O.data);return(R=C[3])!=null&&R[0]?Hi(C[3][0].data)==l:!!((I=C[2])!=null&&I[0]&&Hi(C[2][0].data)==l)}),P=st(A[3][F].data);P[6]||(P[6]=[]),P[6]=P[6].filter(function(O){return Sr(st(O.data)[1][0].data)!=y}),A[3][F].data=wt(P),w.messages[0].data=wt(A)}),jl(n,y),g[1]=[];for(var _=Math.ceil((a.e.r+1)/v),x=0;x<_;++x){var E=Sf({deps:[],location:"",type:6002},e);e[E].location="Root Entry/Index/Tables/Tile-".concat(E,".iwa");for(var k=[[],[{type:0,data:pt(0)}],[{type:0,data:pt(Math.min(a.e.r+1,(x+1)*v))}],[{type:0,data:pt(0)}],[{type:0,data:pt(Math.min((x+1)*v,a.e.r+1)-x*v)}],[],[{type:0,data:pt(5)}],[{type:0,data:pt(1)}],[{type:0,data:pt(1)}]],B=x*v;B<=Math.min(a.e.r,(x+1)*v-1);++B){var D=Get(c[B],u);D[1][0].data=pt(B-x*v),k[5].push({data:wt(D),type:2})}g[1].push({type:2,data:wt([[],[{type:0,data:pt(x)}],[{type:2,data:Hl(E)}]])});var z={id:E,messages:[gW(6002,wt(k))]},U=$g(Lg([z]));St.utils.cfb_add(t,"/Index/Tables/Tile-".concat(E,".iwa"),U),Ii(t,e,2,function(w){var A=st(w.messages[0].data);A[3].push({type:2,data:wt([[],[{type:0,data:pt(E)}],[{type:2,data:Yo("Tables/Tile")}],[{type:2,data:Yo("Tables/Tile-".concat(E))}],[{type:2,data:new Uint8Array([2,0,0])}],[{type:2,data:new Uint8Array([2,0,0])}],[],[],[],[],[{type:0,data:pt(0)}],[],[{type:0,data:pt(b)}]])}),A[1]=[{type:0,data:pt(Math.max(E+1,Sr(A[1][0].data)))}];var F=A[3].findIndex(function(O){var R,I,C=st(O.data);return(R=C[3])!=null&&R[0]?Hi(C[3][0].data)==l:!!((I=C[2])!=null&&I[0]&&Hi(C[2][0].data)==l)}),P=st(A[3][F].data);P[6]||(P[6]=[]),P[6].push({type:2,data:wt([[],[{type:0,data:pt(E)}]])}),A[3][F].data=wt(P),w.messages[0].data=wt(A)}),xf(n,E),p[1].push({type:2,data:wt([[],[{type:0,data:pt(x*v)}],[{type:0,data:pt(x)}]])})}}if(d[3][0].data=wt(g),d[9][0].data=wt(p),d[10]=[{type:2,data:new Uint8Array([])}],r["!merges"]){var S=Sf({type:6144,deps:[s],location:e[s].location},e);i.push({id:S,messages:[gW(6144,wt([[],r["!merges"].map(function(w){return{type:2,data:wt([[],[{type:2,data:wt([[],[{type:5,data:new Uint8Array(new Uint16Array([w.s.r,w.s.c]).buffer)}]])}],[{type:2,data:wt([[],[{type:5,data:new Uint8Array(new Uint16Array([w.e.r-w.s.r+1,w.e.c-w.s.c+1]).buffer)}]])}]])}})]))]}),d[13]=[{type:2,data:Hl(S)}],Ii(t,e,2,function(w){var A=st(w.messages[0].data),F=A[3].findIndex(function(O){var R,I,C=st(O.data);return(R=C[3])!=null&&R[0]?Hi(C[3][0].data)==l:!!((I=C[2])!=null&&I[0]&&Hi(C[2][0].data)==l)}),P=st(A[3][F].data);P[6]||(P[6]=[]),P[6].push({type:2,data:wt([[],[{type:0,data:pt(S)}]])}),A[3][F].data=wt(P),w.messages[0].data=wt(A)}),xf(n,S)}else delete d[13];var T=nn(d[4][0].data);Ii(t,e,T,function(w){var A=st(w.messages[0].data);A[3]=[],u.forEach(function(F,P){P!=0&&A[3].push({type:2,data:wt([[],[{type:0,data:pt(P)}],[{type:0,data:pt(1)}],[{type:2,data:Yo(F)}]])})}),w.messages[0].data=wt(A)})}f[4][0].data=wt(d)}n.messages[0].data=wt(f)}function aue(t){return function(r){for(var n=0;n!=t.length;++n){var i=t[n];r[i[0]]===void 0&&(r[i[0]]=i[1]),i[2]==="n"&&(r[i[0]]=Number(r[i[0]]))}}}function kD(t){aue([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(t)}function TD(t){aue([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(t)}function Qet(t){return vr.WS.indexOf(t)>-1?"sheet":t==vr.CS?"chart":t==vr.DS?"dialog":t==vr.MS?"macro":t&&t.length?t:"sheet"}function ett(t,e){if(!t)return 0;try{t=e.map(function(n){return n.id||(n.id=n.strRelID),[n.name,t["!id"][n.id].Target,Qet(t["!id"][n.id].Type)]})}catch{return null}return!t||t.length===0?null:t}function ttt(t,e,r,n,i,s,a,o,c,u,l,f){try{s[n]=Bg(va(t,r,!0),e);var d=pi(t,e),h;switch(o){case"sheet":h=AQe(d,e,i,c,s[n],u,l,f);break;case"chart":if(h=CQe(d,e,i,c,s[n],u,l,f),!h||!h["!drawel"])break;var m=hg(h["!drawel"].Target,e),p=Bv(m),g=XKe(va(t,m,!0),Bg(va(t,p,!0),m)),v=hg(g,m),y=Bv(v);h=YJe(va(t,v,!0),v,c,Bg(va(t,y,!0),v),u,h);break;case"macro":h=IQe(d,e,i,c,s[n],u,l,f);break;case"dialog":h=PQe(d,e,i,c,s[n],u,l,f);break;default:throw new Error("Unrecognized sheet type "+o)}a[n]=h;var b=[],_=[];s&&s[n]&&jn(s[n]).forEach(function(x){var E="";if(s[n][x].Type==vr.CMNT){if(E=hg(s[n][x].Target,e),b=BQe(pi(t,E,!0),E,c),!b||!b.length)return;tW(h,b,!1)}s[n][x].Type==vr.TCMNT&&(E=hg(s[n][x].Target,e),_=_.concat(QKe(pi(t,E,!0),c)))}),_&&_.length&&tW(h,_,!0,c.people||[])}catch(x){if(c.WTF)throw x}}function oo(t){return t.charAt(0)=="/"?t.slice(1):t}function rtt(t,e){if(cm(),e=e||{},kD(e),mo(t,"META-INF/manifest.xml")||mo(t,"objectdata.xml"))return dW(t,e);if(mo(t,"Index/Document.iwa")){if(typeof Uint8Array>"u")throw new Error("NUMBERS file parsing requires Uint8Array support");if(typeof lE<"u"){if(t.FileIndex)return lE(t,e);var r=St.utils.cfb_new();return xH(t).forEach(function(A){rr(r,A,Gqe(t,A))}),lE(r,e)}throw new Error("Unsupported NUMBERS file")}if(!mo(t,"[Content_Types].xml")){if(mo(t,"index.xml.gz"))throw new Error("Unsupported NUMBERS 08 file");if(mo(t,"index.xml"))throw new Error("Unsupported NUMBERS 09 file");var n=St.find(t,"Index.zip");if(n)return e=wn(e),delete e.type,typeof n.content=="string"&&(e.type="binary"),typeof Bun<"u"&&Buffer.isBuffer(n.content)?dp(new Uint8Array(n.content),e):dp(n.content,e);throw new Error("Unsupported ZIP file")}var i=xH(t),s=Uze(va(t,"[Content_Types].xml")),a=!1,o,c;if(s.workbooks.length===0&&(c="xl/workbook.xml",pi(t,c,!0)&&s.workbooks.push(c)),s.workbooks.length===0){if(c="xl/workbook.bin",!pi(t,c,!0))throw new Error("Could not find workbook");s.workbooks.push(c),a=!0}s.workbooks[0].slice(-3)=="bin"&&(a=!0);var u={},l={};if(!e.bookSheets&&!e.bookProps){if(Dg=[],s.sst)try{Dg=OQe(pi(t,oo(s.sst)),s.sst,e)}catch(A){if(e.WTF)throw A}e.cellStyles&&s.themes.length&&(u=kle(va(t,s.themes[0].replace(/^\//,""),!0)||"",e)),s.style&&(l=RQe(pi(t,oo(s.style)),s.style,u,e))}s.links.map(function(A){try{var F=Bg(va(t,Bv(oo(A))),A);return MQe(pi(t,oo(A)),F,A,e)}catch{}});var f=TQe(pi(t,oo(s.workbooks[0])),s.workbooks[0],e),d={},h="";s.coreprops.length&&(h=pi(t,oo(s.coreprops[0]),!0),h&&(d=Gce(h)),s.extprops.length!==0&&(h=pi(t,oo(s.extprops[0]),!0),h&&Gze(h,d,e)));var m={};(!e.bookSheets||e.bookProps)&&s.custprops.length!==0&&(h=va(t,oo(s.custprops[0]),!0),h&&(m=Xze(h,e)));var p={};if((e.bookSheets||e.bookProps)&&(f.Sheets?o=f.Sheets.map(function(F){return F.name}):d.Worksheets&&d.SheetNames.length>0&&(o=d.SheetNames),e.bookProps&&(p.Props=d,p.Custprops=m),e.bookSheets&&typeof o<"u"&&(p.SheetNames=o),e.bookSheets?p.SheetNames:e.bookProps))return p;o={};var g={};e.bookDeps&&s.calcchain&&(g=DQe(pi(t,oo(s.calcchain)),s.calcchain));var v=0,y={},b,_;{var x=f.Sheets;d.Worksheets=x.length,d.SheetNames=[];for(var E=0;E!=x.length;++E)d.SheetNames[E]=x[E].name}var k=a?"bin":"xml",B=s.workbooks[0].lastIndexOf("/"),D=(s.workbooks[0].slice(0,B+1)+"_rels/"+s.workbooks[0].slice(B+1)+".rels").replace(/^\//,"");mo(t,D)||(D="xl/_rels/workbook."+k+".rels");var z=Bg(va(t,D,!0),D.replace(/_rels.*/,"s5s"));(s.metadata||[]).length>=1&&(e.xlmeta=NQe(pi(t,oo(s.metadata[0])),s.metadata[0],e)),(s.people||[]).length>=1&&(e.people=tXe(pi(t,oo(s.people[0])),e)),z&&(z=ett(z,f.Sheets));var U=pi(t,"xl/worksheets/sheet.xml",!0)?1:0;e:for(v=0;v!=d.Worksheets;++v){var S="sheet";if(z&&z[v]?(b="xl/"+z[v][1].replace(/[\/]?xl\//,""),mo(t,b)||(b=z[v][1]),mo(t,b)||(b=D.replace(/_rels\/.*$/,"")+z[v][1]),S=z[v][2]):(b="xl/worksheets/sheet"+(v+1-U)+"."+k,b=b.replace(/sheet0\./,"sheet.")),_=b.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),e&&e.sheets!=null)switch(typeof e.sheets){case"number":if(v!=e.sheets)continue e;break;case"string":if(d.SheetNames[v].toLowerCase()!=e.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(e.sheets)){for(var T=!1,w=0;w!=e.sheets.length;++w)typeof e.sheets[w]=="number"&&e.sheets[w]==v&&(T=1),typeof e.sheets[w]=="string"&&e.sheets[w].toLowerCase()==d.SheetNames[v].toLowerCase()&&(T=1);if(!T)continue e}}ttt(t,b,_,d.SheetNames[v],v,y,o,S,e,f,u,l)}return p={Directory:s,Workbook:f,Props:d,Custprops:m,Deps:g,Sheets:o,SheetNames:d.SheetNames,Strings:Dg,Styles:l,Themes:u,SSF:wn(Bt)},e&&e.bookFiles&&(t.files?(p.keys=i,p.files=t.files):(p.keys=[],p.files={},t.FullPaths.forEach(function(A,F){A=A.replace(/^Root Entry[\/]/,""),p.keys.push(A),p.files[A]=t.FileIndex[F]}))),e&&e.bookVBA&&(s.vba.length>0?p.vbaraw=pi(t,oo(s.vba[0]),!0):s.defaults&&s.defaults.bin===lXe&&(p.vbaraw=pi(t,"xl/vbaProject.bin",!0))),p.bookType=a?"xlsb":"xlsx",p}function ntt(t,e){var r=e||{},n="Workbook",i=St.find(t,n);try{if(n="/!DataSpaces/Version",i=St.find(t,n),!i||!i.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(hGe(i.content),n="/!DataSpaces/DataSpaceMap",i=St.find(t,n),!i||!i.content)throw new Error("ECMA-376 Encrypted file missing "+n);var s=mGe(i.content);if(s.length!==1||s[0].comps.length!==1||s[0].comps[0].t!==0||s[0].name!=="StrongEncryptionDataSpace"||s[0].comps[0].v!=="EncryptedPackage")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",i=St.find(t,n),!i||!i.content)throw new Error("ECMA-376 Encrypted file missing "+n);var a=gGe(i.content);if(a.length!=1||a[0]!="StrongEncryptionTransform")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",i=St.find(t,n),!i||!i.content)throw new Error("ECMA-376 Encrypted file missing "+n);yGe(i.content)}catch{}if(n="/EncryptionInfo",i=St.find(t,n),!i||!i.content)throw new Error("ECMA-376 Encrypted file missing "+n);var o=bGe(i.content);if(n="/EncryptedPackage",i=St.find(t,n),!i||!i.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(o[0]==4&&typeof decrypt_agile<"u")return decrypt_agile(o[1],i.content,r.password||"",r);if(o[0]==2&&typeof decrypt_std76<"u")return decrypt_std76(o[1],i.content,r.password||"",r);throw new Error("File is password-protected")}function itt(t,e){t&&!t.SSF&&(t.SSF=wn(Bt)),t&&t.SSF&&(cm(),C5(t.SSF),e.revssf=P5(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,Mg?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var r="bin",n=!0,i=hD();TD(e=e||{});var s=JB(),a="",o=0;if(e.cellXfs=[],yd(e.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={}),a="docProps/core.xml",rr(s,a,Kce(t.Props,e)),i.coreprops.push(a),tn(e.rels,2,a,vr.CORE_PROPS),a="docProps/app.xml",!(t.Props&&t.Props.SheetNames))if(!t.Workbook||!t.Workbook.Sheets)t.Props.SheetNames=t.SheetNames;else{for(var c=[],u=0;u<t.SheetNames.length;++u)(t.Workbook.Sheets[u]||{}).Hidden!=2&&c.push(t.SheetNames[u]);t.Props.SheetNames=c}for(t.Props.Worksheets=t.Props.SheetNames.length,rr(s,a,Zce(t.Props)),i.extprops.push(a),tn(e.rels,3,a,vr.EXT_PROPS),t.Custprops!==t.Props&&jn(t.Custprops||{}).length>0&&(a="docProps/custom.xml",rr(s,a,Jce(t.Custprops)),i.custprops.push(a),tn(e.rels,4,a,vr.CUST_PROPS)),o=1;o<=t.SheetNames.length;++o){var l={"!id":{}},f=t.Sheets[t.SheetNames[o-1]],d=(f||{})["!type"]||"sheet";switch(d){case"chart":default:a="xl/worksheets/sheet"+o+"."+r,rr(s,a,KJe(o-1,e,t,l)),i.sheets.push(a),tn(e.wbrels,-1,"worksheets/sheet"+o+"."+r,vr.WS[0])}if(f){var h=f["!comments"],m=!1,p="";h&&h.length>0&&(p="xl/comments"+o+"."+r,rr(s,p,cXe(h)),i.comments.push(p),tn(l,-1,"../comments"+o+"."+r,vr.CMNT),m=!0),f["!legacy"]&&m&&rr(s,"xl/drawings/vmlDrawing"+o+".vml",Tle(o,f["!comments"])),delete f["!comments"],delete f["!legacy"]}l["!id"].rId1&&rr(s,Bv(a),N1(l))}e.Strings!=null&&e.Strings.length>0&&(a="xl/sharedStrings."+r,rr(s,a,dGe(e.Strings)),i.strs.push(a),tn(e.wbrels,-1,"sharedStrings."+r,vr.SST)),a="xl/workbook."+r,rr(s,a,kQe(t)),i.workbooks.push(a),tn(e.rels,1,a,vr.WB),a="xl/theme/theme1.xml";var g=bD(t.Themes,e);return rr(s,a,g),i.themes.push(a),tn(e.wbrels,-1,"theme/theme1.xml",vr.THEME),a="xl/styles."+r,rr(s,a,gKe(t,e)),i.styles.push(a),tn(e.wbrels,-1,"styles."+r,vr.STY),t.vbaraw&&n&&(a="xl/vbaProject.bin",rr(s,a,t.vbaraw),i.vba.push(a),tn(e.wbrels,-1,"vbaProject.bin",vr.VBA)),a="xl/metadata."+r,rr(s,a,VKe()),i.metadata.push(a),tn(e.wbrels,-1,"metadata."+r,vr.XLMETA),rr(s,"[Content_Types].xml",Hce(i,e)),rr(s,"_rels/.rels",N1(e.rels)),rr(s,"xl/_rels/workbook."+r+".rels",N1(e.wbrels)),delete e.revssf,delete e.ssf,s}function stt(t,e){t&&!t.SSF&&(t.SSF=wn(Bt)),t&&t.SSF&&(cm(),C5(t.SSF),e.revssf=P5(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,Mg?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var r="xml",n=dXe.indexOf(e.bookType)>-1,i=hD();TD(e=e||{});var s=JB(),a="",o=0;if(e.cellXfs=[],yd(e.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={}),a="docProps/core.xml",rr(s,a,Kce(t.Props,e)),i.coreprops.push(a),tn(e.rels,2,a,vr.CORE_PROPS),a="docProps/app.xml",!(t.Props&&t.Props.SheetNames))if(!t.Workbook||!t.Workbook.Sheets)t.Props.SheetNames=t.SheetNames;else{for(var c=[],u=0;u<t.SheetNames.length;++u)(t.Workbook.Sheets[u]||{}).Hidden!=2&&c.push(t.SheetNames[u]);t.Props.SheetNames=c}t.Props.Worksheets=t.Props.SheetNames.length,rr(s,a,Zce(t.Props)),i.extprops.push(a),tn(e.rels,3,a,vr.EXT_PROPS),t.Custprops!==t.Props&&jn(t.Custprops||{}).length>0&&(a="docProps/custom.xml",rr(s,a,Jce(t.Custprops)),i.custprops.push(a),tn(e.rels,4,a,vr.CUST_PROPS));var l=["SheetJ5"];for(e.tcid=0,o=1;o<=t.SheetNames.length;++o){var f={"!id":{}},d=t.Sheets[t.SheetNames[o-1]],h=(d||{})["!type"]||"sheet";switch(h){case"chart":default:a="xl/worksheets/sheet"+o+"."+r,rr(s,a,BZe(o-1,e,t,f)),i.sheets.push(a),tn(e.wbrels,-1,"worksheets/sheet"+o+"."+r,vr.WS[0])}if(d){var m=d["!comments"],p=!1,g="";if(m&&m.length>0){var v=!1;m.forEach(function(y){y[1].forEach(function(b){b.T==!0&&(v=!0)})}),v&&(g="xl/threadedComments/threadedComment"+o+".xml",rr(s,g,eXe(m,l,e)),i.threadedcomments.push(g),tn(f,-1,"../threadedComments/threadedComment"+o+".xml",vr.TCMNT)),g="xl/comments"+o+"."+r,rr(s,g,JKe(m)),i.comments.push(g),tn(f,-1,"../comments"+o+"."+r,vr.CMNT),p=!0}d["!legacy"]&&p&&rr(s,"xl/drawings/vmlDrawing"+o+".vml",Tle(o,d["!comments"])),delete d["!comments"],delete d["!legacy"]}f["!id"].rId1&&rr(s,Bv(a),N1(f))}return e.Strings!=null&&e.Strings.length>0&&(a="xl/sharedStrings."+r,rr(s,a,oGe(e.Strings,e)),i.strs.push(a),tn(e.wbrels,-1,"sharedStrings."+r,vr.SST)),a="xl/workbook."+r,rr(s,a,lQe(t)),i.workbooks.push(a),tn(e.rels,1,a,vr.WB),a="xl/theme/theme1.xml",rr(s,a,bD(t.Themes,e)),i.themes.push(a),tn(e.wbrels,-1,"theme/theme1.xml",vr.THEME),a="xl/styles."+r,rr(s,a,KGe(t,e)),i.styles.push(a),tn(e.wbrels,-1,"styles."+r,vr.STY),t.vbaraw&&n&&(a="xl/vbaProject.bin",rr(s,a,t.vbaraw),i.vba.push(a),tn(e.wbrels,-1,"vbaProject.bin",vr.VBA)),a="xl/metadata."+r,rr(s,a,zKe()),i.metadata.push(a),tn(e.wbrels,-1,"metadata."+r,vr.XLMETA),l.length>1&&(a="xl/persons/person.xml",rr(s,a,rXe(l)),i.people.push(a),tn(e.wbrels,-1,"persons/person.xml",vr.PEOPLE)),rr(s,"[Content_Types].xml",Hce(i,e)),rr(s,"_rels/.rels",N1(e.rels)),rr(s,"xl/_rels/workbook."+r+".rels",N1(e.wbrels)),delete e.revssf,delete e.ssf,s}function AD(t,e){var r="";switch((e||{}).type||"base64"){case"buffer":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];case"base64":r=Qa(t.slice(0,12));break;case"binary":r=t;break;case"array":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];default:throw new Error("Unrecognized type "+(e&&e.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function att(t,e){return St.find(t,"EncryptedPackage")?ntt(t,e):Hle(t,e)}function ott(t,e){var r,n=t,i=e||{};return i.type||(i.type=mr&&Buffer.isBuffer(t)?"buffer":"base64"),r=_ce(n,i),rtt(r,i)}function oue(t,e){var r=0;e:for(;r<t.length;)switch(t.charCodeAt(r)){case 10:case 13:case 32:++r;break;case 60:return UI(t.slice(r),e);default:break e}return up.to_workbook(t,e)}function ctt(t,e){var r="",n=AD(t,e);switch(e.type){case"base64":r=Qa(t);break;case"binary":r=t;break;case"buffer":r=t.toString("binary");break;case"array":r=qh(t);break;default:throw new Error("Unrecognized type "+e.type)}return n[0]==239&&n[1]==187&&n[2]==191&&(r=on(r)),e.type="binary",oue(r,e)}function ltt(t,e){var r=t;return e.type=="base64"&&(r=Qa(r)),r=nce(r.slice(2)),e.type="binary",oue(r,e)}function utt(t){return t.match(/[^\x00-\x7F]/)?sl(t):t}function uE(t,e,r,n){return n?(r.type="string",up.to_workbook(t,r)):up.to_workbook(e,r)}function dp(t,e){GB();var r=e||{};if(r.codepage&&console.error("Codepage tables are not loaded.  Non-ASCII characters may not give expected results"),typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer)return dp(new Uint8Array(t),(r=wn(r),r.type="array",r));typeof Uint8Array<"u"&&t instanceof Uint8Array&&!r.type&&(r.type=typeof Deno<"u"?"buffer":"array");var n=t,i=[0,0,0,0],s=!1;if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),F1={},r.dateNF&&(F1.dateNF=r.dateNF),r.type||(r.type=mr&&Buffer.isBuffer(t)?"buffer":"base64"),r.type=="file"&&(r.type=mr?"buffer":"binary",n=Fqe(t),typeof Uint8Array<"u"&&!mr&&(r.type="array")),r.type=="string"&&(s=!0,r.type="binary",r.codepage=65001,n=utt(t)),r.type=="array"&&typeof Uint8Array<"u"&&t instanceof Uint8Array&&typeof ArrayBuffer<"u"){var a=new ArrayBuffer(3),o=new Uint8Array(a);if(o.foo="bar",!o.foo)return r=wn(r),r.type="array",dp(KB(n),r)}switch((i=AD(n,r))[0]){case 208:if(i[1]===207&&i[2]===17&&i[3]===224&&i[4]===161&&i[5]===177&&i[6]===26&&i[7]===225)return att(St.read(n,r),r);break;case 9:if(i[1]<=8)return Hle(n,r);break;case 60:return UI(n,r);case 73:if(i[1]===73&&i[2]===42&&i[3]===0)throw new Error("TIFF Image File is not a spreadsheet");if(i[1]===68)return XWe(n,r);break;case 84:if(i[1]===65&&i[2]===66&&i[3]===76)return gle.to_workbook(n,r);break;case 80:return i[1]===75&&i[2]<9&&i[3]<9?ott(n,r):uE(t,n,r,s);case 239:return i[3]===60?UI(n,r):uE(t,n,r,s);case 255:if(i[1]===254)return ltt(n,r);if(i[1]===0&&i[2]===2&&i[3]===0)return wh.to_workbook(n,r);break;case 0:if(i[1]===0&&(i[2]>=2&&i[3]===0||i[2]===0&&(i[3]===8||i[3]===9)))return wh.to_workbook(n,r);break;case 3:case 131:case 139:case 140:return $I.to_workbook(n,r);case 123:if(i[1]===92&&i[2]===114&&i[3]===116)return RGe(n,r);break;case 10:case 13:case 32:return ctt(n,r);case 137:if(i[1]===80&&i[2]===78&&i[3]===71)throw new Error("PNG Image File is not a spreadsheet");break;case 8:if(i[1]===231)throw new Error("Unsupported Multiplan 1.x file!");break;case 12:if(i[1]===236)throw new Error("Unsupported Multiplan 2.x file!");if(i[1]===237)throw new Error("Unsupported Multiplan 3.x file!");break}return KWe.indexOf(i[0])>-1&&i[2]<=12&&i[3]<=31?$I.to_workbook(n,r):uE(t,n,r,s)}function ftt(t,e){var r=e||{};return r.type="file",dp(t,r)}function cue(t,e){switch(e.type){case"base64":case"binary":break;case"buffer":case"array":e.type="";break;case"file":return Ky(e.file,St.write(t,{type:mr?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");default:throw new Error("Unrecognized type "+e.type)}return St.write(t,e)}function dtt(t,e){switch(e.bookType){case"ods":return rue(t,e);case"numbers":return Xet(t,e);case"xlsb":return itt(t,e);default:return stt(t,e)}}function htt(t,e){var r=wn(e||{}),n=dtt(t,r);return ptt(n,r)}function ptt(t,e){var r={},n=mr?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(e.compression&&(r.compression="DEFLATE"),e.password)r.type=n;else switch(e.type){case"base64":r.type="base64";break;case"binary":r.type="string";break;case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");case"buffer":case"file":r.type=n;break;default:throw new Error("Unrecognized type "+e.type)}var i=t.FullPaths?St.write(t,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[r.type]||r.type,compression:!!e.compression}):t.generate(r);if(typeof Deno<"u"&&typeof i=="string"){if(e.type=="binary"||e.type=="base64")return i;i=new Uint8Array(A5(i))}return e.password&&typeof encrypt_agile<"u"?cue(encrypt_agile(i,e.password),e):e.type==="file"?Ky(e.file,i):e.type=="string"?on(i):i}function mtt(t,e){var r=e||{},n=uet(t,r);return cue(n,r)}function Hc(t,e,r){r||(r="");var n=r+t;switch(e.type){case"base64":return W4(sl(n));case"binary":return sl(n);case"string":return t;case"file":return Ky(e.file,n,"utf8");case"buffer":return mr?Tl(n,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(n):Hc(n,{type:"binary"}).split("").map(function(i){return i.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function gtt(t,e){switch(e.type){case"base64":return aqe(t);case"binary":return t;case"string":return t;case"file":return Ky(e.file,t,"binary");case"buffer":return mr?Tl(t,"binary"):t.split("").map(function(r){return r.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function fw(t,e){switch(e.type){case"string":case"base64":case"binary":for(var r="",n=0;n<t.length;++n)r+=String.fromCharCode(t[n]);return e.type=="base64"?W4(r):e.type=="string"?on(r):r;case"file":return Ky(e.file,t);case"buffer":return t;default:throw new Error("Unrecognized type "+e.type)}}function Vv(t,e){GB(),aQe(t);var r=wn(e||{});if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),r.type=="array"){r.type="binary";var n=Vv(t,r);return r.type="array",A5(n)}var i=0;if(r.sheet&&(typeof r.sheet=="number"?i=r.sheet:i=t.SheetNames.indexOf(r.sheet),!t.SheetNames[i]))throw new Error("Sheet not found: "+r.sheet+" : "+typeof r.sheet);switch(r.bookType||"xlsb"){case"xml":case"xlml":return Hc(ret(t,r),r);case"slk":case"sylk":return Hc(mle.from_sheet(t.Sheets[t.SheetNames[i]],r,t),r);case"htm":case"html":return Hc(Zle(t.Sheets[t.SheetNames[i]],r),r);case"txt":return gtt(fue(t.Sheets[t.SheetNames[i]],r),r);case"csv":return Hc(CD(t.Sheets[t.SheetNames[i]],r),r,"\uFEFF");case"dif":return Hc(gle.from_sheet(t.Sheets[t.SheetNames[i]],r),r);case"dbf":return fw($I.from_sheet(t.Sheets[t.SheetNames[i]],r),r);case"prn":return Hc(up.from_sheet(t.Sheets[t.SheetNames[i]],r),r);case"rtf":return Hc(OGe(t.Sheets[t.SheetNames[i]]),r);case"eth":return Hc(vle.from_sheet(t.Sheets[t.SheetNames[i]],r),r);case"fods":return Hc(rue(t,r),r);case"wk1":return fw(wh.sheet_to_wk1(t.Sheets[t.SheetNames[i]],r),r);case"wk3":return fw(wh.book_to_wk3(t,r),r);case"biff2":r.biff||(r.biff=2);case"biff3":r.biff||(r.biff=3);case"biff4":return r.biff||(r.biff=4),fw(Wle(t,r),r);case"biff5":r.biff||(r.biff=5);case"biff8":case"xla":case"xls":return r.biff||(r.biff=8),mtt(t,r);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return htt(t,r);default:throw new Error("Unrecognized bookType |"+r.bookType+"|")}}function vtt(t){if(!t.bookType){var e={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},r=t.file.slice(t.file.lastIndexOf(".")).toLowerCase();r.match(/^\.[a-z]+$/)&&(t.bookType=r.slice(1)),t.bookType=e[t.bookType]||t.bookType}}function ytt(t,e,r){var n=r||{};return n.type="file",n.file=e,vtt(n),Vv(t,n)}function lue(t,e,r,n,i,s,a){var o=xr(r),c=a.defval,u=a.raw||!Object.prototype.hasOwnProperty.call(a,"raw"),l=!0,f=t["!data"]!=null,d=i===1?[]:{};if(i!==1)if(Object.defineProperty)try{Object.defineProperty(d,"__rowNum__",{value:r,enumerable:!1})}catch{d.__rowNum__=r}else d.__rowNum__=r;if(!f||t["!data"][r])for(var h=e.s.c;h<=e.e.c;++h){var m=f?(t["!data"][r]||[])[h]:t[n[h]+o];if(m===void 0||m.t===void 0){if(c===void 0)continue;s[h]!=null&&(d[s[h]]=c);continue}var p=m.v;switch(m.t){case"z":if(p==null)break;continue;case"e":p=p==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+m.t)}if(s[h]!=null){if(p==null)if(m.t=="e"&&p===null)d[s[h]]=null;else if(c!==void 0)d[s[h]]=c;else if(u&&p===null)d[s[h]]=null;else continue;else d[s[h]]=u&&(m.t!=="n"||m.t==="n"&&a.rawNumbers!==!1)?p:vl(m,p,a);p!=null&&(l=!1)}}return{row:d,isempty:l}}function n6(t,e){if(t==null||t["!ref"]==null)return[];var r={t:"n",v:0},n=0,i=1,s=[],a=0,o="",c={s:{r:0,c:0},e:{r:0,c:0}},u=e||{},l=u.range!=null?u.range:t["!ref"];switch(u.header===1?n=1:u.header==="A"?n=2:Array.isArray(u.header)?n=3:u.header==null&&(n=0),typeof l){case"string":c=Er(l);break;case"number":c=Er(t["!ref"]),c.s.r=l;break;default:c=l}n>0&&(i=0);var f=xr(c.s.r),d=[],h=[],m=0,p=0,g=t["!data"]!=null,v=c.s.r,y=0,b={};g&&!t["!data"][v]&&(t["!data"][v]=[]);var _=u.skipHidden&&t["!cols"]||[],x=u.skipHidden&&t["!rows"]||[];for(y=c.s.c;y<=c.e.c;++y)if(!(_[y]||{}).hidden)switch(d[y]=or(y),r=g?t["!data"][v][y]:t[d[y]+f],n){case 1:s[y]=y-c.s.c;break;case 2:s[y]=d[y];break;case 3:s[y]=u.header[y-c.s.c];break;default:if(r==null&&(r={w:"__EMPTY",t:"s"}),o=a=vl(r,null,u),p=b[a]||0,!p)b[a]=1;else{do o=a+"_"+p++;while(b[o]);b[a]=p,b[o]=1}s[y]=o}for(v=c.s.r+i;v<=c.e.r;++v)if(!(x[v]||{}).hidden){var E=lue(t,c,v,d,n,s,u);(E.isempty===!1||(n===1?u.blankrows!==!1:u.blankrows))&&(h[m++]=E.row)}return h.length=m,h}var vW=/"/g;function uue(t,e,r,n,i,s,a,o){for(var c=!0,u=[],l="",f=xr(r),d=t["!data"]!=null,h=d&&t["!data"][r]||[],m=e.s.c;m<=e.e.c;++m)if(n[m]){var p=d?h[m]:t[n[m]+f];if(p==null)l="";else if(p.v!=null){c=!1,l=""+(o.rawNumbers&&p.t=="n"?p.v:vl(p,null,o));for(var g=0,v=0;g!==l.length;++g)if((v=l.charCodeAt(g))===i||v===s||v===34||o.forceQuotes){l='"'+l.replace(vW,'""')+'"';break}l=="ID"&&(l='"ID"')}else p.f!=null&&!p.F?(c=!1,l="="+p.f,l.indexOf(",")>=0&&(l='"'+l.replace(vW,'""')+'"')):l="";u.push(l)}return o.blankrows===!1&&c?null:u.join(a)}function CD(t,e){var r=[],n=e??{};if(t==null||t["!ref"]==null)return"";for(var i=Er(t["!ref"]),s=n.FS!==void 0?n.FS:",",a=s.charCodeAt(0),o=n.RS!==void 0?n.RS:`
`,c=o.charCodeAt(0),u=new RegExp((s=="|"?"\\|":s)+"+$"),l="",f=[],d=n.skipHidden&&t["!cols"]||[],h=n.skipHidden&&t["!rows"]||[],m=i.s.c;m<=i.e.c;++m)(d[m]||{}).hidden||(f[m]=or(m));for(var p=0,g=i.s.r;g<=i.e.r;++g)(h[g]||{}).hidden||(l=uue(t,i,g,f,a,c,s,n),l!=null&&(n.strip&&(l=l.replace(u,"")),(l||n.blankrows!==!1)&&r.push((p++?o:"")+l)));return r.join("")}function fue(t,e){e||(e={}),e.FS="	",e.RS=`
`;var r=CD(t,e);return r}function btt(t){var e="",r,n="";if(t==null||t["!ref"]==null)return[];var i=Er(t["!ref"]),s="",a=[],o,c=[],u=t["!data"]!=null;for(o=i.s.c;o<=i.e.c;++o)a[o]=or(o);for(var l=i.s.r;l<=i.e.r;++l)for(s=xr(l),o=i.s.c;o<=i.e.c;++o)if(e=a[o]+s,r=u?(t["!data"][l]||[])[o]:t[e],n="",r!==void 0){if(r.F!=null){if(e=r.F,!r.f)continue;n=r.f,e.indexOf(":")==-1&&(e=e+":"+e)}if(r.f!=null)n=r.f;else{if(r.t=="z")continue;if(r.t=="n"&&r.v!=null)n=""+r.v;else if(r.t=="b")n=r.v?"TRUE":"FALSE";else if(r.w!==void 0)n="'"+r.w;else{if(r.v===void 0)continue;r.t=="s"?n="'"+r.v:n=""+r.v}}c[c.length]=e+"="+n}return c}function due(t,e,r){var n=r||{},i=t?t["!data"]!=null:n.dense,s=+!n.skipHeader,a=t||{};!t&&i&&(a["!data"]=[]);var o=0,c=0;if(a&&n.origin!=null)if(typeof n.origin=="number")o=n.origin;else{var u=typeof n.origin=="string"?Xr(n.origin):n.origin;o=u.r,c=u.c}var l={s:{c:0,r:0},e:{c,r:o+e.length-1+s}};if(a["!ref"]){var f=Er(a["!ref"]);l.e.c=Math.max(l.e.c,f.e.c),l.e.r=Math.max(l.e.r,f.e.r),o==-1&&(o=f.e.r+1,l.e.r=o+e.length-1+s)}else o==-1&&(o=0,l.e.r=e.length-1+s);var d=n.header||[],h=0,m=[];e.forEach(function(g,v){i&&!a["!data"][o+v+s]&&(a["!data"][o+v+s]=[]),i&&(m=a["!data"][o+v+s]),jn(g).forEach(function(y){(h=d.indexOf(y))==-1&&(d[h=d.length]=y);var b=g[y],_="z",x="",E=i?"":or(c+h)+xr(o+v+s),k=i?m[c+h]:a[E];b&&typeof b=="object"&&!(b instanceof Date)?i?m[c+h]=b:a[E]=b:(typeof b=="number"?_="n":typeof b=="boolean"?_="b":typeof b=="string"?_="s":b instanceof Date?(_="d",n.cellDates||(_="n",b=xi(b)),x=k!=null&&k.z&&C0(k.z)?k.z:n.dateNF||Bt[14]):b===null&&n.nullError&&(_="e",b=0),k?(k.t=_,k.v=b,delete k.w,delete k.R,x&&(k.z=x)):i?m[c+h]=k={t:_,v:b}:a[E]=k={t:_,v:b},x&&(k.z=x))})}),l.e.c=Math.max(l.e.c,c+d.length-1);var p=xr(o);if(i&&!a["!data"][o]&&(a["!data"][o]=[]),s)for(h=0;h<d.length;++h)i?a["!data"][o][h+c]={t:"s",v:d[h]}:a[or(h+c)+p]={t:"s",v:d[h]};return a["!ref"]=Yt(l),a}function wtt(t,e){return due(null,t,e)}function i6(t,e,r){if(typeof e=="string"){if(t["!data"]!=null){var n=Xr(e);return t["!data"][n.r]||(t["!data"][n.r]=[]),t["!data"][n.r][n.c]||(t["!data"][n.r][n.c]={t:"z"})}return t[e]||(t[e]={t:"z"})}return typeof e!="number"?i6(t,pr(e)):i6(t,or(r||0)+xr(e))}function _tt(t,e){if(typeof e=="number"){if(e>=0&&t.SheetNames.length>e)return e;throw new Error("Cannot find sheet # "+e)}else if(typeof e=="string"){var r=t.SheetNames.indexOf(e);if(r>-1)return r;throw new Error("Cannot find sheet name |"+e+"|")}else throw new Error("Cannot find sheet |"+e+"|")}function ID(){return{SheetNames:[],Sheets:{}}}function L5(t,e,r,n){var i=1;if(!r)for(;i<=65535&&t.SheetNames.indexOf(r="Sheet"+i)!=-1;++i,r=void 0);if(!r||t.SheetNames.length>=65535)throw new Error("Too many worksheets");if(n&&t.SheetNames.indexOf(r)>=0){var s=r.match(/(^.*?)(\d+)$/);i=s&&+s[2]||0;var a=s&&s[1]||r;for(++i;i<=65535&&t.SheetNames.indexOf(r=a+i)!=-1;++i);}if(jle(r),t.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return t.SheetNames.push(r),t.Sheets[r]=e,r}function xtt(t,e,r){t.Workbook||(t.Workbook={}),t.Workbook.Sheets||(t.Workbook.Sheets=[]);var n=_tt(t,e);switch(t.Workbook.Sheets[n]||(t.Workbook.Sheets[n]={}),r){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+r)}t.Workbook.Sheets[n].Hidden=r}function Stt(t,e){return t.z=e,t}function hue(t,e,r){return e?(t.l={Target:e},r&&(t.l.Tooltip=r)):delete t.l,t}function Ett(t,e,r){return hue(t,"#"+e,r)}function ktt(t,e,r){t.c||(t.c=[]),t.c.push({t:e,a:r||"SheetJS"})}function Ttt(t,e,r,n){for(var i=typeof e!="string"?e:Er(e),s=typeof e=="string"?e:Yt(e),a=i.s.r;a<=i.e.r;++a)for(var o=i.s.c;o<=i.e.c;++o){var c=i6(t,a,o);c.t="n",c.F=s,delete c.v,a==i.s.r&&o==i.s.c&&(c.f=r,n&&(c.D=!0))}var u=Fi(t["!ref"]);return u.s.r>i.s.r&&(u.s.r=i.s.r),u.s.c>i.s.c&&(u.s.c=i.s.c),u.e.r<i.e.r&&(u.e.r=i.e.r),u.e.c<i.e.c&&(u.e.c=i.e.c),t["!ref"]=Yt(u),t}var xa={encode_col:or,encode_row:xr,encode_cell:pr,encode_range:Yt,decode_col:sD,decode_row:iD,split_cell:vze,decode_cell:Xr,decode_range:Fi,format_cell:vl,sheet_add_aoa:$ce,sheet_add_json:due,sheet_add_dom:Jle,aoa_to_sheet:lm,json_to_sheet:wtt,table_to_sheet:Qle,table_to_book:Iet,sheet_to_csv:CD,sheet_to_txt:fue,sheet_to_json:n6,sheet_to_html:Zle,sheet_to_formulae:btt,sheet_to_row_object_array:n6,sheet_get_cell:i6,book_new:ID,book_append_sheet:L5,book_set_sheet_visibility:xtt,cell_set_number_format:Stt,cell_set_hyperlink:hue,cell_set_internal_link:Ett,cell_add_comment:ktt,sheet_set_array_formula:Ttt,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}},$5;function Att(t){$5=t}function Ctt(t,e){var r=$5(),n=e??{};if(t==null||t["!ref"]==null)return r.push(null),r;for(var i=Er(t["!ref"]),s=n.FS!==void 0?n.FS:",",a=s.charCodeAt(0),o=n.RS!==void 0?n.RS:`
`,c=o.charCodeAt(0),u=new RegExp((s=="|"?"\\|":s)+"+$"),l="",f=[],d=n.skipHidden&&t["!cols"]||[],h=n.skipHidden&&t["!rows"]||[],m=i.s.c;m<=i.e.c;++m)(d[m]||{}).hidden||(f[m]=or(m));var p=i.s.r,g=!1,v=0;return r._read=function(){if(!g)return g=!0,r.push("\uFEFF");for(;p<=i.e.r;)if(++p,!(h[p-1]||{}).hidden&&(l=uue(t,i,p-1,f,a,c,s,n),l!=null&&(n.strip&&(l=l.replace(u,"")),l||n.blankrows!==!1)))return r.push((v++?o:"")+l);return r.push(null)},r}function Itt(t,e){var r=$5(),n=e||{},i=n.header!=null?n.header:Kle,s=n.footer!=null?n.footer:Xle;r.push(i);var a=Fi(t["!ref"]);r.push(Yle(t,a,n));var o=a.s.r,c=!1;return r._read=function(){if(o>a.e.r)return c||(c=!0,r.push("</table>"+s)),r.push(null);for(;o<=a.e.r;){r.push(Gle(t,a,o,n)),++o;break}},r}function Ptt(t,e){var r=$5({objectMode:!0});if(t==null||t["!ref"]==null)return r.push(null),r;var n={t:"n",v:0},i=0,s=1,a=[],o=0,c="",u={s:{r:0,c:0},e:{r:0,c:0}},l=e||{},f=l.range!=null?l.range:t["!ref"];switch(l.header===1?i=1:l.header==="A"?i=2:Array.isArray(l.header)&&(i=3),typeof f){case"string":u=Er(f);break;case"number":u=Er(t["!ref"]),u.s.r=f;break;default:u=f}i>0&&(s=0);var d=xr(u.s.r),h=[],m=0,p=t["!data"]!=null,g=u.s.r,v=0,y={};p&&!t["!data"][g]&&(t["!data"][g]=[]);var b=l.skipHidden&&t["!cols"]||[],_=l.skipHidden&&t["!rows"]||[];for(v=u.s.c;v<=u.e.c;++v)if(!(b[v]||{}).hidden)switch(h[v]=or(v),n=p?t["!data"][g][v]:t[h[v]+d],i){case 1:a[v]=v-u.s.c;break;case 2:a[v]=h[v];break;case 3:a[v]=l.header[v-u.s.c];break;default:if(n==null&&(n={w:"__EMPTY",t:"s"}),c=o=vl(n,null,l),m=y[o]||0,!m)y[o]=1;else{do c=o+"_"+m++;while(y[c]);y[o]=m,y[c]=1}a[v]=c}return g=u.s.r+s,r._read=function(){for(;g<=u.e.r;)if(!(_[g-1]||{}).hidden){var x=lue(t,u,g,h,i,a,l);if(++g,x.isempty===!1||(i===1?l.blankrows!==!1:l.blankrows)){r.push(x.row);return}}return r.push(null)},r}var Rtt={to_json:Ptt,to_html:Itt,to_csv:Ctt,set_readable:Att};async function Ott(t){return await(await zn.get(t)).data}async function Btt(t,e){const n=(await zn.get(t,{responseType:"arraybuffer"})).data,s=Object.assign({type:"buffer",cellDates:!0},e||{});return dp(n,s)}const Dtt="messageInconnu",Mtt="formatArguments",qI="nomFonctionManquant",Ntt="multiplesFonctions",pue="pasUneFonction",ih="excutionIpa",pg="initIpa",zI="initIpaDjLanc",yW=async(t,e)=>new Promise(r=>t.once(e,r));class Ftt extends Function{constructor(){return Object.setPrototypeOf(function(){},new.target.prototype)}}class Ltt extends Ftt{dernireErreur;vnements;vnementsInternes;tches;constructor(){super(),this.vnements=new Ns.EventEmitter,this.vnementsInternes=new Ns.EventEmitter,this.tches={}}__call__(e,r={}){typeof r!="object"&&this.erreur({code:Mtt,erreur:`La fonction ${e.join(".")} fut appele avec arguments ${r}. 
      Toute fonction mandataire Constellation doit tre appele avec un seul argument en format d'objet (dictionnaire).`});const n=ti(),i=Object.entries(r).find(s=>typeof s[1]=="function")?.[0];return i?this.appelerFonctionSuivre(n,e,r,i):this.appelerFonctionAction(n,e,r)}async appelerFonctionSuivre(e,r,n,i){const s=n[i],a=Object.fromEntries(Object.entries(n).filter(h=>typeof h[1]!="function"));s===void 0&&this.erreur({code:qI,erreur:"Aucun argument de nom "+i+" n'a t donne pour "+r.join("."),idRequte:e}),Object.keys(n).length>Object.keys(a).length+1?this.erreur({code:Ntt,erreur:"Plus d'un argument pour "+r.join(".")+" est une fonction : "+JSON.stringify(n),idRequte:e}):typeof s!="function"&&this.erreur({code:pue,erreur:"Argument "+i+"n'est pas une fonction : ",idRequte:e});const o={type:"suivre",idRequte:e,fonction:r,args:a,nomArgFonction:i},u={idRequte:e,fSuivre:s,fRetour:async(h,m)=>{const p={type:"retour",idRequte:e,fonction:h,args:m};this.envoyerMessageIpa(p)}};this.tches[e]=u;const l=async()=>{await this.oublierTche(e)},f=yW(this.vnementsInternes,e);this.envoyerMessageIpa(o);const d=await f;if(d.type==="erreur"&&this.erreur({erreur:d.erreur,idRequte:e,code:d.codeErreur||ih}),d.type==="suivrePrt"){const{fonctions:h}=d;if(h&&h[0]){const m={fOublier:l};for(const p of h)m[p]=async(...g)=>{await this.tches[e]?.fRetour(p,g)};return m}}return l}async appelerFonctionAction(e,r,n){const i={type:"action",idRequte:e,fonction:r,args:n},s=yW(this.vnementsInternes,e);this.envoyerMessageIpa(i);const a=await s;if(a.type==="action")return a.rsultat;throw a.type==="erreur"?this.erreur({erreur:a.erreur,idRequte:e,code:a.codeErreur||ih}):this.erreur({erreur:`Type de retour ${a} non reconnu.`,idRequte:e,code:ih}),new Error("On ne devrait jamais arriver ici.")}erreur({erreur:e,code:r,idRequte:n}){throw this.dernireErreur?.code!==pg&&this.dernireErreur?.code!==zI&&(this.dernireErreur={erreur:e,idRequte:n,code:r}),this.vnements.emit("erreur",{idRequte:n,...this.dernireErreur}),new Error(JSON.stringify({idRequte:n,...this.dernireErreur}))}async oublierTche(e){const r=this.tches[e];r&&await r.fRetour("fOublier"),delete this.tches[e]}async recevoirMessageDIpa(e){const{type:r}=e;switch(r){case"suivre":{const{idRequte:n,donnes:i}=e;if(!this.tches[n])return;const{fSuivre:s}=this.tches[n];s(i);break}case"action":case"suivrePrt":case"erreur":{if(e.type==="erreur"&&!e.idRequte){this.erreur({erreur:e.erreur,code:e.erreur||ih});break}this.vnementsInternes.emit(e.idRequte,e);break}default:this.erreur({code:Dtt,erreur:`Type inconnu ${r} du message ${e}.`,idRequte:e.idRequte})}}suivreErreurs({f:e}){return this.vnements.on("erreur",e),e(this.dernireErreur),async()=>{this.vnements.off("erreur",e)}}}class PD{listeAtributs;constructor(e){this.listeAtributs=e||[]}get(e,r){if(["suivreErreurs"].includes(r))return e[r].bind(e);{const i=[...this.listeAtributs,r],s=new PD(i);return new Proxy(e,s)}}apply(e,r,n){return e.__call__(this.listeAtributs,n[0])}}const $tt=t=>{const e=new PD;return new Proxy(t,e)};function Oe(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var o=t.length-1;o>=0;o--)(a=t[o])&&(s=(i<3?a(s):i>3?a(e,r,s):a(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s}function Utt(t){return t[Symbol.asyncIterator]!=null}function RD(t){if(Utt(t))return(async()=>{for await(const e of t)return e})();for(const e of t)return e}function jtt(t){return t[Symbol.asyncIterator]!=null}function mue(t,e=1){return e=Number(e),jtt(t)?async function*(){let r=[];if(e<1&&(e=1),e!==Math.round(e))throw new Error("Batch size must be an integer");for await(const n of t)for(r.push(n);r.length>=e;)yield r.slice(0,e),r=r.slice(e);for(;r.length>0;)yield r.slice(0,e),r=r.slice(e)}():function*(){let r=[];if(e<1&&(e=1),e!==Math.round(e))throw new Error("Batch size must be an integer");for(const n of t)for(r.push(n);r.length>=e;)yield r.slice(0,e),r=r.slice(e);for(;r.length>0;)yield r.slice(0,e),r=r.slice(e)}()}async function*gue(t,e=1){for await(const r of mue(t,e)){const n=r.map(async i=>i().then(s=>({ok:!0,value:s}),s=>({ok:!1,err:s})));for(let i=0;i<n.length;i++){const s=await n[i];if(s.ok)yield s.value;else throw s.err}}}const Vtt=262144,vue=(t={})=>{const e=t.chunkSize??Vtt;return async function*(n){let i=new cr,s=0,a=!1;for await(const o of n)for(i.append(o),s+=o.length;s>=e;)if(yield i.slice(0,e),a=!0,e===i.length)i=new cr,s=0;else{const c=new cr;c.append(i.sublist(e)),i=c,s-=e}(!a||s>0)&&(yield i.subarray(0,s))}},qtt=new TextDecoder;function OD(t,e){let r=0;for(let n=0;;n+=7){if(n>=64)throw new Error("protobuf: varint overflow");if(e>=t.length)throw new Error("protobuf: unexpected end of data");const i=t[e++];if(r+=n<28?(i&127)<<n:(i&127)*2**n,i<128)break}return[r,e]}function s6(t,e){let r;[r,e]=OD(t,e);const n=e+r;if(r<0||n<0)throw new Error("protobuf: invalid length");if(n>t.length)throw new Error("protobuf: unexpected end of data");return[t.subarray(e,n),n]}function yue(t,e){let r;return[r,e]=OD(t,e),[r&7,r>>3,e]}function ztt(t){const e={},r=t.length;let n=0;for(;n<r;){let i,s;if([i,s,n]=yue(t,n),s===1){if(e.Hash)throw new Error("protobuf: (PBLink) duplicate Hash section");if(i!==2)throw new Error(`protobuf: (PBLink) wrong wireType (${i}) for Hash`);if(e.Name!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Name before Hash");if(e.Tsize!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Hash");[e.Hash,n]=s6(t,n)}else if(s===2){if(e.Name!==void 0)throw new Error("protobuf: (PBLink) duplicate Name section");if(i!==2)throw new Error(`protobuf: (PBLink) wrong wireType (${i}) for Name`);if(e.Tsize!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Name");let a;[a,n]=s6(t,n),e.Name=qtt.decode(a)}else if(s===3){if(e.Tsize!==void 0)throw new Error("protobuf: (PBLink) duplicate Tsize section");if(i!==0)throw new Error(`protobuf: (PBLink) wrong wireType (${i}) for Tsize`);[e.Tsize,n]=OD(t,n)}else throw new Error(`protobuf: (PBLink) invalid fieldNumber, expected 1, 2 or 3, got ${s}`)}if(n>r)throw new Error("protobuf: (PBLink) unexpected end of data");return e}function Htt(t){const e=t.length;let r=0,n,i=!1,s;for(;r<e;){let o,c;if([o,c,r]=yue(t,r),o!==2)throw new Error(`protobuf: (PBNode) invalid wireType, expected 2, got ${o}`);if(c===1){if(s)throw new Error("protobuf: (PBNode) duplicate Data section");[s,r]=s6(t,r),n&&(i=!0)}else if(c===2){if(i)throw new Error("protobuf: (PBNode) duplicate Links section");n||(n=[]);let u;[u,r]=s6(t,r),n.push(ztt(u))}else throw new Error(`protobuf: (PBNode) invalid fieldNumber, expected 1 or 2, got ${c}`)}if(r>e)throw new Error("protobuf: (PBNode) unexpected end of data");const a={};return s&&(a.Data=s),a.Links=n||[],a}const bue=new TextEncoder,bW=2**32,Wtt=2**31;function Gtt(t,e){let r=e.length;if(typeof t.Tsize=="number"){if(t.Tsize<0)throw new Error("Tsize cannot be negative");if(!Number.isSafeInteger(t.Tsize))throw new Error("Tsize too large for encoding");r=Ug(e,r,t.Tsize)-1,e[r]=24}if(typeof t.Name=="string"){const n=bue.encode(t.Name);r-=n.length,e.set(n,r),r=Ug(e,r,n.length)-1,e[r]=18}return t.Hash&&(r-=t.Hash.length,e.set(t.Hash,r),r=Ug(e,r,t.Hash.length)-1,e[r]=10),e.length-r}function Ktt(t){const e=Ytt(t),r=new Uint8Array(e);let n=e;if(t.Data&&(n-=t.Data.length,r.set(t.Data,n),n=Ug(r,n,t.Data.length)-1,r[n]=10),t.Links)for(let i=t.Links.length-1;i>=0;i--){const s=Gtt(t.Links[i],r.subarray(0,n));n-=s,n=Ug(r,n,s)-1,r[n]=18}return r}function Xtt(t){let e=0;if(t.Hash){const r=t.Hash.length;e+=1+r+L1(r)}if(typeof t.Name=="string"){const r=bue.encode(t.Name).length;e+=1+r+L1(r)}return typeof t.Tsize=="number"&&(e+=1+L1(t.Tsize)),e}function Ytt(t){let e=0;if(t.Data){const r=t.Data.length;e+=1+r+L1(r)}if(t.Links)for(const r of t.Links){const n=Xtt(r);e+=1+n+L1(n)}return e}function Ug(t,e,r){e-=L1(r);const n=e;for(;r>=Wtt;)t[e++]=r&127|128,r/=128;for(;r>=128;)t[e++]=r&127|128,r>>>=7;return t[e]=r,n}function L1(t){return t%2===0&&t++,Math.floor((Ztt(t)+6)/7)}function Ztt(t){let e=0;return t>=bW&&(t=Math.floor(t/bW),e=32),t>=65536&&(t>>>=16,e+=16),t>=256&&(t>>>=8,e+=8),e+Jtt[t]}const Jtt=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8],Qtt=["Data","Links"],ert=["Hash","Name","Tsize"],HI=new TextEncoder;function wue(t,e){if(t===e)return 0;const r=t.Name?HI.encode(t.Name):[],n=e.Name?HI.encode(e.Name):[];let i=r.length,s=n.length;for(let a=0,o=Math.min(i,s);a<o;++a)if(r[a]!==n[a]){i=r[a],s=n[a];break}return i<s?-1:s<i?1:0}function wW(t,e){return!Object.keys(t).some(r=>!e.includes(r))}function _ue(t){if(typeof t.asCID=="object"){const r=mt.asCID(t);if(!r)throw new TypeError("Invalid DAG-PB form");return{Hash:r}}if(typeof t!="object"||Array.isArray(t))throw new TypeError("Invalid DAG-PB form");const e={};if(t.Hash){let r=mt.asCID(t.Hash);try{r||(typeof t.Hash=="string"?r=mt.parse(t.Hash):t.Hash instanceof Uint8Array&&(r=mt.decode(t.Hash)))}catch(n){throw new TypeError(`Invalid DAG-PB form: ${n.message}`)}r&&(e.Hash=r)}if(!e.Hash)throw new TypeError("Invalid DAG-PB form");return typeof t.Name=="string"&&(e.Name=t.Name),typeof t.Tsize=="number"&&(e.Tsize=t.Tsize),e}function to(t){if((t instanceof Uint8Array||typeof t=="string")&&(t={Data:t}),typeof t!="object"||Array.isArray(t))throw new TypeError("Invalid DAG-PB form");const e={};if(t.Data!==void 0)if(typeof t.Data=="string")e.Data=HI.encode(t.Data);else if(t.Data instanceof Uint8Array)e.Data=t.Data;else throw new TypeError("Invalid DAG-PB form");if(t.Links!==void 0)if(Array.isArray(t.Links))e.Links=t.Links.map(_ue),e.Links.sort(wue);else throw new TypeError("Invalid DAG-PB form");else e.Links=[];return e}function xue(t){if(!t||typeof t!="object"||Array.isArray(t)||t instanceof Uint8Array||t["/"]&&t["/"]===t.bytes)throw new TypeError("Invalid DAG-PB form");if(!wW(t,Qtt))throw new TypeError("Invalid DAG-PB form (extraneous properties)");if(t.Data!==void 0&&!(t.Data instanceof Uint8Array))throw new TypeError("Invalid DAG-PB form (Data must be bytes)");if(!Array.isArray(t.Links))throw new TypeError("Invalid DAG-PB form (Links must be a list)");for(let e=0;e<t.Links.length;e++){const r=t.Links[e];if(!r||typeof r!="object"||Array.isArray(r)||r instanceof Uint8Array||r["/"]&&r["/"]===r.bytes)throw new TypeError("Invalid DAG-PB form (bad link)");if(!wW(r,ert))throw new TypeError("Invalid DAG-PB form (extraneous properties on link)");if(r.Hash===void 0)throw new TypeError("Invalid DAG-PB form (link must have a Hash)");if(r.Hash==null||!r.Hash["/"]||r.Hash["/"]!==r.Hash.bytes)throw new TypeError("Invalid DAG-PB form (link Hash must be a CID)");if(r.Name!==void 0&&typeof r.Name!="string")throw new TypeError("Invalid DAG-PB form (link Name must be a string)");if(r.Tsize!==void 0){if(typeof r.Tsize!="number"||r.Tsize%1!==0)throw new TypeError("Invalid DAG-PB form (link Tsize must be an integer)");if(r.Tsize<0)throw new TypeError("Invalid DAG-PB form (link Tsize cannot be negative)")}if(e>0&&wue(r,t.Links[e-1])===-1)throw new TypeError("Invalid DAG-PB form (links must be sorted by Name bytes)")}}function trt(t,e=[]){return to({Data:t,Links:e})}function rrt(t,e,r){return _ue({Hash:r,Name:t,Tsize:e})}function nrt(t){return t instanceof ArrayBuffer?new Uint8Array(t,0,t.byteLength):t}const irt="dag-pb",Cl=112;function li(t){xue(t);const e={};return t.Links&&(e.Links=t.Links.map(r=>{const n={};return r.Hash&&(n.Hash=r.Hash.bytes),r.Name!==void 0&&(n.Name=r.Name),r.Tsize!==void 0&&(n.Tsize=r.Tsize),n})),t.Data&&(e.Data=t.Data),Ktt(e)}function Rc(t){const e=nrt(t),r=Htt(e),n={};return r.Data&&(n.Data=r.Data),r.Links&&(n.Links=r.Links.map(i=>{const s={};try{s.Hash=mt.decode(i.Hash)}catch{}if(!s.Hash)throw new Error("Invalid Hash field found in link, expected CID");return i.Name!==void 0&&(s.Name=i.Name),i.Tsize!==void 0&&(s.Tsize=i.Tsize),s})),n}const r2=Object.freeze(Object.defineProperty({__proto__:null,code:Cl,createLink:rrt,createNode:trt,decode:Rc,encode:li,name:irt,prepare:to,validate:xue},Symbol.toStringTag,{value:"Module"}));class qv extends Error{static name="InvalidTypeError";static code="ERR_INVALID_TYPE";name=qv.name;code=qv.code;constructor(e="Invalid type"){super(e)}}var Gc;(function(t){(function(n){n.Raw="Raw",n.Directory="Directory",n.File="File",n.Metadata="Metadata",n.Symlink="Symlink",n.HAMTShard="HAMTShard"})(t.DataType||(t.DataType={}));let e;(function(n){n[n.Raw=0]="Raw",n[n.Directory=1]="Directory",n[n.File=2]="File",n[n.Metadata=3]="Metadata",n[n.Symlink=4]="Symlink",n[n.HAMTShard=5]="HAMTShard"})(e||(e={})),function(n){n.codec=()=>ra(e)}(t.DataType||(t.DataType={}));let r;t.codec=()=>(r==null&&(r=Ot((n,i,s={})=>{if(s.lengthDelimited!==!1&&i.fork(),n.Type!=null&&(i.uint32(8),t.DataType.codec().encode(n.Type,i)),n.Data!=null&&(i.uint32(18),i.bytes(n.Data)),n.filesize!=null&&(i.uint32(24),i.uint64(n.filesize)),n.blocksizes!=null)for(const a of n.blocksizes)i.uint32(32),i.uint64(a);n.hashType!=null&&(i.uint32(40),i.uint64(n.hashType)),n.fanout!=null&&(i.uint32(48),i.uint64(n.fanout)),n.mode!=null&&(i.uint32(56),i.uint32(n.mode)),n.mtime!=null&&(i.uint32(66),a6.codec().encode(n.mtime,i)),s.lengthDelimited!==!1&&i.ldelim()},(n,i)=>{const s={blocksizes:[]},a=i==null?n.len:n.pos+i;for(;n.pos<a;){const o=n.uint32();switch(o>>>3){case 1:s.Type=t.DataType.codec().decode(n);break;case 2:s.Data=n.bytes();break;case 3:s.filesize=n.uint64();break;case 4:s.blocksizes.push(n.uint64());break;case 5:s.hashType=n.uint64();break;case 6:s.fanout=n.uint64();break;case 7:s.mode=n.uint32();break;case 8:s.mtime=a6.codec().decode(n,n.uint32());break;default:n.skipType(o&7);break}}return s})),r),t.encode=n=>Rt(n,t.codec()),t.decode=n=>Pt(n,t.codec())})(Gc||(Gc={}));var a6;(function(t){let e;t.codec=()=>(e==null&&(e=Ot((r,n,i={})=>{i.lengthDelimited!==!1&&n.fork(),r.Seconds!=null&&(n.uint32(8),n.int64(r.Seconds)),r.FractionalNanoseconds!=null&&(n.uint32(21),n.fixed32(r.FractionalNanoseconds)),i.lengthDelimited!==!1&&n.ldelim()},(r,n)=>{const i={},s=n==null?r.len:r.pos+n;for(;r.pos<s;){const a=r.uint32();switch(a>>>3){case 1:i.Seconds=r.int64();break;case 2:i.FractionalNanoseconds=r.fixed32();break;default:r.skipType(a&7);break}}return i})),e),t.encode=r=>Rt(r,t.codec()),t.decode=r=>Pt(r,t.codec())})(a6||(a6={}));var _W;(function(t){let e;t.codec=()=>(e==null&&(e=Ot((r,n,i={})=>{i.lengthDelimited!==!1&&n.fork(),r.MimeType!=null&&(n.uint32(10),n.string(r.MimeType)),i.lengthDelimited!==!1&&n.ldelim()},(r,n)=>{const i={},s=n==null?r.len:r.pos+n;for(;r.pos<s;){const a=r.uint32();switch(a>>>3){case 1:i.MimeType=r.string();break;default:r.skipType(a&7);break}}return i})),e),t.encode=r=>Rt(r,t.codec()),t.decode=r=>Pt(r,t.codec())})(_W||(_W={}));const xW={Raw:"raw",Directory:"directory",File:"file",Metadata:"metadata",Symlink:"symlink",HAMTShard:"hamt-sharded-directory"},srt=["directory","hamt-sharded-directory"],SW=parseInt("0644",8),EW=parseInt("0755",8);let Or=class Sue{static unmarshal(e){const r=Gc.decode(e),n=new Sue({type:xW[r.Type!=null?r.Type.toString():"File"],data:r.Data,blockSizes:r.blocksizes,mode:r.mode,mtime:r.mtime!=null?{secs:r.mtime.Seconds??0n,nsecs:r.mtime.FractionalNanoseconds}:void 0,fanout:r.fanout});return n._originalMode=r.mode??0,n}type;data;blockSizes;hashType;fanout;mtime;_mode;_originalMode;constructor(e={type:"file"}){const{type:r,data:n,blockSizes:i,hashType:s,fanout:a,mtime:o,mode:c}=e;if(r!=null&&!Object.values(xW).includes(r))throw new qv("Type: "+r+" is not valid");this.type=r??"file",this.data=n,this.hashType=s,this.fanout=a,this.blockSizes=i??[],this._originalMode=0,this.mode=c,this.mtime=o}set mode(e){e==null?this._mode=this.isDirectory()?EW:SW:this._mode=e&4095}get mode(){return this._mode}isDirectory(){return srt.includes(this.type)}addBlockSize(e){this.blockSizes.push(e)}removeBlockSize(e){this.blockSizes.splice(e,1)}fileSize(){if(this.isDirectory())return 0n;let e=0n;return this.blockSizes.forEach(r=>{e+=r}),this.data!=null&&(e+=BigInt(this.data.length)),e}marshal(){let e;switch(this.type){case"raw":e=Gc.DataType.Raw;break;case"directory":e=Gc.DataType.Directory;break;case"file":e=Gc.DataType.File;break;case"metadata":e=Gc.DataType.Metadata;break;case"symlink":e=Gc.DataType.Symlink;break;case"hamt-sharded-directory":e=Gc.DataType.HAMTShard;break;default:throw new qv(`Type: ${e} is not valid`)}let r=this.data;(this.data==null||this.data.length===0)&&(r=void 0);let n;this.mode!=null&&(n=this._originalMode&4294963200|(this.mode??0),n===SW&&!this.isDirectory()&&(n=void 0),n===EW&&this.isDirectory()&&(n=void 0));let i;return this.mtime!=null&&(i={Seconds:this.mtime.secs,FractionalNanoseconds:this.mtime.nsecs}),Gc.encode({Type:e,Data:r,filesize:this.isDirectory()?void 0:this.fileSize(),blocksizes:this.blockSizes,hashType:this.hashType,fanout:this.fanout,mode:n,mtime:i})}};class ft extends Event{type;detail;constructor(e,r){super(e),this.type=e,this.detail=r}}const hp=async(t,e,r)=>{r.codec==null&&(r.codec=r2);const n=await ci.digest(t),i=mt.create(r.cidVersion,r.codec.code,n);return await e.put(i,t,r),i};function art(t){return async function*(r,n){let i=0n;for await(let s of r.content)yield async()=>{let a;const o={codec:r2,cidVersion:t.cidVersion,onProgress:t.onProgress};t.rawLeaves?(o.codec=toe,o.cidVersion=1):(a=new Or({type:t.leafType,data:s}),s=li({Data:a.marshal(),Links:[]}));const c=await hp(s,n,o);return i+=BigInt(s.byteLength),t.onProgress?.(new ft("unixfs:importer:progress:file:write",{bytesWritten:i,cid:c,path:r.path})),{cid:c,unixfs:a,size:BigInt(s.length),block:s}}}}let Eue=class WI extends Error{static name="InvalidParametersError";static code="ERR_INVALID_PARAMS";name=WI.name;code=WI.code;constructor(e="Invalid parameters"){super(e)}};class Kh extends Error{static name="InvalidContentError";static code="ERR_INVALID_CONTENT";name=Kh.name;code=Kh.code;constructor(e="Invalid content"){super(e)}}const ort=async(t,e,r)=>{const n=new Or({type:"directory",mtime:t.mtime,mode:t.mode}),i=li(to({Data:n.marshal()})),s=await hp(i,e,r),a=t.path;return{cid:s,path:a,unixfs:n,size:BigInt(i.length),originalPath:t.originalPath,block:i}};async function*crt(t,e,r){let n=-1,i;for await(const s of gue(r.bufferImporter(t,e),r.blockWriteConcurrency)){if(n++,n===0){i={...s,single:!0};continue}else n===1&&i!=null&&(yield{...i,block:void 0,single:void 0},i=void 0);yield{...s,block:void 0}}i!=null&&(yield i)}function kW(t){return t.single===!0}const lrt=(t,e,r)=>async function(i){if(i.length===1&&kW(i[0])&&r.reduceSingleLeafToSelf){const l=i[0];let f=l.block;return kW(l)&&(t.mtime!==void 0||t.mode!==void 0)&&(l.unixfs=new Or({type:"file",mtime:t.mtime,mode:t.mode,data:l.block}),f={Data:l.unixfs.marshal(),Links:[]},l.block=li(to(f)),l.cid=await hp(l.block,e,{...r,cidVersion:r.cidVersion}),l.size=BigInt(l.block.length)),r.onProgress?.(new ft("unixfs:importer:progress:file:layout",{cid:l.cid,path:l.originalPath})),{cid:l.cid,path:t.path,unixfs:l.unixfs,size:l.size,originalPath:l.originalPath}}const s=new Or({type:"file",mtime:t.mtime,mode:t.mode}),a=i.filter(l=>l.cid.code===Ro&&l.size>0||l.unixfs!=null&&l.unixfs.data==null&&l.unixfs.fileSize()>0n?!0:!!l.unixfs?.data?.length).map(l=>l.cid.code===Ro?(s.addBlockSize(l.size),{Name:"",Tsize:Number(l.size),Hash:l.cid}):(l.unixfs?.data==null?s.addBlockSize(l.unixfs?.fileSize()??0n):s.addBlockSize(BigInt(l.unixfs.data.length)),{Name:"",Tsize:Number(l.size),Hash:l.cid})),o={Data:s.marshal(),Links:a},c=li(to(o)),u=await hp(c,e,r);return r.onProgress?.(new ft("unixfs:importer:progress:file:layout",{cid:u,path:t.originalPath})),{cid:u,path:t.path,unixfs:s,size:BigInt(c.length+o.Links.reduce((l,f)=>l+(f.Tsize??0),0)),originalPath:t.originalPath,block:c}},urt=async(t,e,r)=>r.layout(crt(t,e,r),lrt(t,e,r));function frt(t){return Symbol.iterator in t}function drt(t){return Symbol.asyncIterator in t}function hrt(t){try{if(t instanceof Uint8Array)return async function*(){yield t}();if(frt(t))return async function*(){yield*t}();if(drt(t))return t}catch{throw new Kh("Content was invalid")}throw new Kh("Content was invalid")}function prt(t){return async function*(r,n){for await(const i of r){let s;if(i.path!=null&&(s=i.path,i.path=i.path.split("/").filter(a=>a!=null&&a!==".").join("/")),mrt(i)){const a={path:i.path,mtime:i.mtime,mode:i.mode,content:async function*(){let o=0n;for await(const c of t.chunker(t.chunkValidator(hrt(i.content)))){const u=BigInt(c.byteLength);o+=u,t.onProgress?.(new ft("unixfs:importer:progress:file:read",{bytesRead:o,chunkSize:u,path:i.path})),yield c}}(),originalPath:s};yield async()=>urt(a,n,t)}else if(i.path!=null){const a={path:i.path,mtime:i.mtime,mode:i.mode,originalPath:s};yield async()=>ort(a,n,t)}else throw new Error("Import candidate must have content or path or both")}}}function mrt(t){return t.content!=null}const grt=()=>async function*(e){for await(const r of e){if(r.length===void 0)throw new Kh("Content was invalid");if(typeof r=="string"||r instanceof String)yield tt(r.toString());else if(Array.isArray(r))yield Uint8Array.from(r);else if(r instanceof Uint8Array)yield r;else throw new Kh("Content was invalid")}},vrt=174;function kue(t){const e=t?.maxChildrenPerNode??vrt;return async function r(n,i){const s=[];for await(const a of mue(n,e))s.push(await i(a));return s.length>1?r(s,i):s[0]}}function yrt(t){return t[Symbol.asyncIterator]!=null}function zv(t){if(yrt(t))return(async()=>{const r=[];for await(const n of t)r.push(n);return r})();const e=[];for(const r of t)e.push(r);return e}let Hv=class{options;root;dir;path;dirty;flat;parent;parentKey;unixfs;mode;mtime;cid;size;nodeSize;constructor(e,r){this.options=r??{},this.root=e.root,this.dir=e.dir,this.path=e.path,this.dirty=e.dirty,this.flat=e.flat,this.parent=e.parent,this.parentKey=e.parentKey,this.unixfs=e.unixfs,this.mode=e.mode,this.mtime=e.mtime}};const GI=mt.parse("QmUNLLsPACCz1vLxQVkXqqLX5R1X345qqfHbsf67hvA3Nn"),KI=mt.parse("zdj7WbTaiJT1fgatdet9Ei9iDB5hdCxkbVyhyh8YTUnXMiwYi");class BD extends Hv{_children;constructor(e,r){super(e,r),this._children=new Map}async put(e,r){this.cid=void 0,this.size=void 0,this.nodeSize=void 0,this._children.set(e,r)}async get(e){return Promise.resolve(this._children.get(e))}childCount(){return this._children.size}directChildrenCount(){return this.childCount()}onlyChild(){return this._children.values().next().value}async*eachChildSeries(){for(const[e,r]of this._children.entries())yield{key:e,child:r}}estimateNodeSize(){if(this.nodeSize!==void 0)return this.nodeSize;this.nodeSize=0;for(const[e,r]of this._children.entries())r.size!=null&&r.cid!=null&&(this.nodeSize+=e.length+(this.options.cidVersion===1?KI.bytes.byteLength:GI.bytes.byteLength));return this.nodeSize}async*flush(e){const r=[];for(const[c,u]of this._children.entries()){let l=u;if(u instanceof Hv)for await(const f of u.flush(e))l=f,yield f;l.size!=null&&l.cid!=null&&r.push({Name:c,Tsize:Number(l.size),Hash:l.cid})}const n=new Or({type:"directory",mtime:this.mtime,mode:this.mode}),i={Data:n.marshal(),Links:r},s=li(to(i)),a=await hp(s,e,this.options),o=s.length+i.Links.reduce((c,u)=>c+(u.Tsize??0),0);this.cid=a,this.size=o,yield{cid:a,unixfs:n,path:this.path,size:BigInt(o)}}}var dw={exports:{}},TW;function brt(){return TW||(TW=1,function(t,e){(function(r,n){var i={version:"3.0.0",x86:{},x64:{},inputValidation:!0};function s(p){if(!Array.isArray(p)&&!ArrayBuffer.isView(p))return!1;for(var g=0;g<p.length;g++)if(!Number.isInteger(p[g])||p[g]<0||p[g]>255)return!1;return!0}function a(p,g){return(p&65535)*g+(((p>>>16)*g&65535)<<16)}function o(p,g){return p<<g|p>>>32-g}function c(p){return p^=p>>>16,p=a(p,2246822507),p^=p>>>13,p=a(p,3266489909),p^=p>>>16,p}function u(p,g){p=[p[0]>>>16,p[0]&65535,p[1]>>>16,p[1]&65535],g=[g[0]>>>16,g[0]&65535,g[1]>>>16,g[1]&65535];var v=[0,0,0,0];return v[3]+=p[3]+g[3],v[2]+=v[3]>>>16,v[3]&=65535,v[2]+=p[2]+g[2],v[1]+=v[2]>>>16,v[2]&=65535,v[1]+=p[1]+g[1],v[0]+=v[1]>>>16,v[1]&=65535,v[0]+=p[0]+g[0],v[0]&=65535,[v[0]<<16|v[1],v[2]<<16|v[3]]}function l(p,g){p=[p[0]>>>16,p[0]&65535,p[1]>>>16,p[1]&65535],g=[g[0]>>>16,g[0]&65535,g[1]>>>16,g[1]&65535];var v=[0,0,0,0];return v[3]+=p[3]*g[3],v[2]+=v[3]>>>16,v[3]&=65535,v[2]+=p[2]*g[3],v[1]+=v[2]>>>16,v[2]&=65535,v[2]+=p[3]*g[2],v[1]+=v[2]>>>16,v[2]&=65535,v[1]+=p[1]*g[3],v[0]+=v[1]>>>16,v[1]&=65535,v[1]+=p[2]*g[2],v[0]+=v[1]>>>16,v[1]&=65535,v[1]+=p[3]*g[1],v[0]+=v[1]>>>16,v[1]&=65535,v[0]+=p[0]*g[3]+p[1]*g[2]+p[2]*g[1]+p[3]*g[0],v[0]&=65535,[v[0]<<16|v[1],v[2]<<16|v[3]]}function f(p,g){return g%=64,g===32?[p[1],p[0]]:g<32?[p[0]<<g|p[1]>>>32-g,p[1]<<g|p[0]>>>32-g]:(g-=32,[p[1]<<g|p[0]>>>32-g,p[0]<<g|p[1]>>>32-g])}function d(p,g){return g%=64,g===0?p:g<32?[p[0]<<g|p[1]>>>32-g,p[1]<<g]:[p[1]<<g-32,0]}function h(p,g){return[p[0]^g[0],p[1]^g[1]]}function m(p){return p=h(p,[0,p[0]>>>1]),p=l(p,[4283543511,3981806797]),p=h(p,[0,p[0]>>>1]),p=l(p,[3301882366,444984403]),p=h(p,[0,p[0]>>>1]),p}i.x86.hash32=function(p,g){if(i.inputValidation&&!s(p))return n;g=g||0;for(var v=p.length%4,y=p.length-v,b=g,_=0,x=3432918353,E=461845907,k=0;k<y;k=k+4)_=p[k]|p[k+1]<<8|p[k+2]<<16|p[k+3]<<24,_=a(_,x),_=o(_,15),_=a(_,E),b^=_,b=o(b,13),b=a(b,5)+3864292196;switch(_=0,v){case 3:_^=p[k+2]<<16;case 2:_^=p[k+1]<<8;case 1:_^=p[k],_=a(_,x),_=o(_,15),_=a(_,E),b^=_}return b^=p.length,b=c(b),b>>>0},i.x86.hash128=function(p,g){if(i.inputValidation&&!s(p))return n;g=g||0;for(var v=p.length%16,y=p.length-v,b=g,_=g,x=g,E=g,k=0,B=0,D=0,z=0,U=597399067,S=2869860233,T=951274213,w=2716044179,A=0;A<y;A=A+16)k=p[A]|p[A+1]<<8|p[A+2]<<16|p[A+3]<<24,B=p[A+4]|p[A+5]<<8|p[A+6]<<16|p[A+7]<<24,D=p[A+8]|p[A+9]<<8|p[A+10]<<16|p[A+11]<<24,z=p[A+12]|p[A+13]<<8|p[A+14]<<16|p[A+15]<<24,k=a(k,U),k=o(k,15),k=a(k,S),b^=k,b=o(b,19),b+=_,b=a(b,5)+1444728091,B=a(B,S),B=o(B,16),B=a(B,T),_^=B,_=o(_,17),_+=x,_=a(_,5)+197830471,D=a(D,T),D=o(D,17),D=a(D,w),x^=D,x=o(x,15),x+=E,x=a(x,5)+2530024501,z=a(z,w),z=o(z,18),z=a(z,U),E^=z,E=o(E,13),E+=b,E=a(E,5)+850148119;switch(k=0,B=0,D=0,z=0,v){case 15:z^=p[A+14]<<16;case 14:z^=p[A+13]<<8;case 13:z^=p[A+12],z=a(z,w),z=o(z,18),z=a(z,U),E^=z;case 12:D^=p[A+11]<<24;case 11:D^=p[A+10]<<16;case 10:D^=p[A+9]<<8;case 9:D^=p[A+8],D=a(D,T),D=o(D,17),D=a(D,w),x^=D;case 8:B^=p[A+7]<<24;case 7:B^=p[A+6]<<16;case 6:B^=p[A+5]<<8;case 5:B^=p[A+4],B=a(B,S),B=o(B,16),B=a(B,T),_^=B;case 4:k^=p[A+3]<<24;case 3:k^=p[A+2]<<16;case 2:k^=p[A+1]<<8;case 1:k^=p[A],k=a(k,U),k=o(k,15),k=a(k,S),b^=k}return b^=p.length,_^=p.length,x^=p.length,E^=p.length,b+=_,b+=x,b+=E,_+=b,x+=b,E+=b,b=c(b),_=c(_),x=c(x),E=c(E),b+=_,b+=x,b+=E,_+=b,x+=b,E+=b,("00000000"+(b>>>0).toString(16)).slice(-8)+("00000000"+(_>>>0).toString(16)).slice(-8)+("00000000"+(x>>>0).toString(16)).slice(-8)+("00000000"+(E>>>0).toString(16)).slice(-8)},i.x64.hash128=function(p,g){if(i.inputValidation&&!s(p))return n;g=g||0;for(var v=p.length%16,y=p.length-v,b=[0,g],_=[0,g],x=[0,0],E=[0,0],k=[2277735313,289559509],B=[1291169091,658871167],D=0;D<y;D=D+16)x=[p[D+4]|p[D+5]<<8|p[D+6]<<16|p[D+7]<<24,p[D]|p[D+1]<<8|p[D+2]<<16|p[D+3]<<24],E=[p[D+12]|p[D+13]<<8|p[D+14]<<16|p[D+15]<<24,p[D+8]|p[D+9]<<8|p[D+10]<<16|p[D+11]<<24],x=l(x,k),x=f(x,31),x=l(x,B),b=h(b,x),b=f(b,27),b=u(b,_),b=u(l(b,[0,5]),[0,1390208809]),E=l(E,B),E=f(E,33),E=l(E,k),_=h(_,E),_=f(_,31),_=u(_,b),_=u(l(_,[0,5]),[0,944331445]);switch(x=[0,0],E=[0,0],v){case 15:E=h(E,d([0,p[D+14]],48));case 14:E=h(E,d([0,p[D+13]],40));case 13:E=h(E,d([0,p[D+12]],32));case 12:E=h(E,d([0,p[D+11]],24));case 11:E=h(E,d([0,p[D+10]],16));case 10:E=h(E,d([0,p[D+9]],8));case 9:E=h(E,[0,p[D+8]]),E=l(E,B),E=f(E,33),E=l(E,k),_=h(_,E);case 8:x=h(x,d([0,p[D+7]],56));case 7:x=h(x,d([0,p[D+6]],48));case 6:x=h(x,d([0,p[D+5]],40));case 5:x=h(x,d([0,p[D+4]],32));case 4:x=h(x,d([0,p[D+3]],24));case 3:x=h(x,d([0,p[D+2]],16));case 2:x=h(x,d([0,p[D+1]],8));case 1:x=h(x,[0,p[D]]),x=l(x,k),x=f(x,31),x=l(x,B),b=h(b,x)}return b=h(b,[0,p.length]),_=h(_,[0,p.length]),b=u(b,_),_=u(_,b),b=m(b),_=m(_),b=u(b,_),_=u(_,b),("00000000"+(b[0]>>>0).toString(16)).slice(-8)+("00000000"+(b[1]>>>0).toString(16)).slice(-8)+("00000000"+(_[0]>>>0).toString(16)).slice(-8)+("00000000"+(_[1]>>>0).toString(16)).slice(-8)},t.exports&&(e=t.exports=i),e.murmurHash3=i})()}(dw,dw.exports)),dw.exports}var fE,AW;function wrt(){return AW||(AW=1,fE=brt()),fE}var _rt=wrt();const xrt=In(_rt),U5=IB({name:"murmur3-128",code:34,encode:t=>S3e(xrt.x64.hash128(t))});var dE,CW;function Srt(){if(CW)return dE;CW=1;const t=7;dE=class{constructor(){this._bitArrays=[],this._data=[],this._length=0,this._changedLength=!1,this._changedData=!1}set(a,o){let c=this._internalPositionFor(a,!1);if(o===void 0)c!==-1&&(this._unsetInternalPos(c),this._unsetBit(a),this._changedLength=!0,this._changedData=!0);else{let u=!1;c===-1?(c=this._data.length,this._setBit(a),this._changedData=!0):u=!0,this._setInternalPos(c,a,o,u),this._changedLength=!0}}unset(a){this.set(a,void 0)}get(a){this._sortData();const o=this._internalPositionFor(a,!0);if(o!==-1)return this._data[o][1]}push(a){return this.set(this.length,a),this.length}get length(){if(this._sortData(),this._changedLength){const a=this._data[this._data.length-1];this._length=a?a[0]+1:0,this._changedLength=!1}return this._length}forEach(a){let o=0;for(;o<this.length;)a(this.get(o),o,this),o++}map(a){let o=0,c=new Array(this.length);for(;o<this.length;)c[o]=a(this.get(o),o,this),o++;return c}reduce(a,o){let c=0,u=o;for(;c<this.length;){const l=this.get(c);u=a(u,l,c),c++}return u}find(a){let o=0,c,u;for(;o<this.length&&!c;)u=this.get(o),c=a(u),o++;return c?u:void 0}_internalPositionFor(a,o){const c=this._bytePosFor(a,o);if(c>=this._bitArrays.length)return-1;const u=this._bitArrays[c],l=a-c*t;if(!((u&1<<l)>0))return-1;const d=this._bitArrays.slice(0,c).reduce(e,0),h=~(4294967295<<l+1),m=r(u&h);return d+m-1}_bytePosFor(a,o){const c=Math.floor(a/t),u=c+1;for(;!o&&this._bitArrays.length<u;)this._bitArrays.push(0);return c}_setBit(a){const o=this._bytePosFor(a,!1);this._bitArrays[o]|=1<<a-o*t}_unsetBit(a){const o=this._bytePosFor(a,!1);this._bitArrays[o]&=~(1<<a-o*t)}_setInternalPos(a,o,c,u){const l=this._data,f=[o,c];if(u)this._sortData(),l[a]=f;else{if(l.length)if(l[l.length-1][0]>=o)l.push(f);else if(l[0][0]<=o)l.unshift(f);else{const d=Math.round(l.length/2);this._data=l.slice(0,d).concat(f).concat(l.slice(d))}else this._data.push(f);this._changedData=!0,this._changedLength=!0}}_unsetInternalPos(a){this._data.splice(a,1)}_sortData(){this._changedData&&this._data.sort(n),this._changedData=!1}bitField(){const a=[];let o=8,c=0,u=0,l;const f=this._bitArrays.slice();for(;f.length||c;){c===0&&(l=f.shift(),c=7);const h=Math.min(c,o),m=~(255<<h),p=l&m;u|=p<<8-o,l=l>>>h,c-=h,o-=h,(!o||!c&&!f.length)&&(a.push(u),u=0,o=8)}for(var d=a.length-1;d>0&&a[d]===0;d--)a.pop();return a}compactArray(){return this._sortData(),this._data.map(i)}};function e(s,a){return s+r(a)}function r(s){let a=s;return a=a-(a>>1&1431655765),a=(a&858993459)+(a>>2&858993459),(a+(a>>4)&252645135)*16843009>>24}function n(s,a){return s[0]-a[0]}function i(s){return s[1]}return dE}var Ert=Srt();const o6=In(Ert);let M0=class hf{_options;_popCount;_parent;_posAtParent;_children;key;constructor(e,r,n=0){this._options=e,this._popCount=0,this._parent=r,this._posAtParent=n,this._children=new o6,this.key=null}async put(e,r){const n=await this._findNewBucketAndPos(e);n.bucket._putAt(n,e,r)}async get(e){const r=await this._findChild(e);if(r!=null)return r.value}async del(e){const r=await this._findPlace(e),n=r.bucket._at(r.pos);n!=null&&n.key===e&&r.bucket._delAt(r.pos)}leafCount(){return this._children.compactArray().reduce((r,n)=>n instanceof hf?r+n.leafCount():r+1,0)}childrenCount(){return this._children.length}onlyChild(){return this._children.get(0)}*eachLeafSeries(){const e=this._children.compactArray();for(const r of e)r instanceof hf?yield*r.eachLeafSeries():yield r}serialize(e,r){const n=[];return r(this._children.reduce((i,s,a)=>(s!=null&&(s instanceof hf?i.push(s.serialize(e,r)):i.push(e(s,a))),i),n))}async asyncTransform(e,r){return Tue(this,e,r)}toJSON(){return this.serialize(Trt,Art)}prettyPrint(){return JSON.stringify(this.toJSON(),null,"  ")}tableSize(){return Math.pow(2,this._options.bits)}async _findChild(e){const r=await this._findPlace(e),n=r.bucket._at(r.pos);if(!(n instanceof hf)&&n!=null&&n.key===e)return n}async _findPlace(e){const r=this._options.hash(typeof e=="string"?tt(e):e),n=await r.take(this._options.bits),i=this._children.get(n);return i instanceof hf?i._findPlace(r):{bucket:this,pos:n,hash:r,existingChild:i}}async _findNewBucketAndPos(e){const r=await this._findPlace(e);if(r.existingChild!=null&&r.existingChild.key!==e){const n=new hf(this._options,r.bucket,r.pos);r.bucket._putObjectAt(r.pos,n);const i=await n._findPlace(r.existingChild.hash);return i.bucket._putAt(i,r.existingChild.key,r.existingChild.value),n._findNewBucketAndPos(r.hash)}return r}_putAt(e,r,n){this._putObjectAt(e.pos,{key:r,value:n,hash:e.hash})}_putObjectAt(e,r){this._children.get(e)==null&&this._popCount++,this._children.set(e,r)}_delAt(e){if(e===-1)throw new Error("Invalid position");this._children.get(e)!=null&&this._popCount--,this._children.unset(e),this._level()}_level(){if(this._parent!=null&&this._popCount<=1)if(this._popCount===1){const e=this._children.find(krt);if(e!=null&&!(e instanceof hf)){const r=e.hash;r.untake(this._options.bits);const n={pos:this._posAtParent,hash:r,bucket:this._parent};this._parent._putAt(n,e.key,e.value)}}else this._parent._delAt(this._posAtParent)}_at(e){return this._children.get(e)}};function krt(t){return!!t}function Trt(t,e){return t.key}function Art(t){return t}async function Tue(t,e,r){const n=[];for(const i of t._children.compactArray())if(i instanceof M0)await Tue(i,e,r);else{const s=await e(i);n.push({bitField:t._children.bitField(),children:s})}return r(n)}const Crt=[255,254,252,248,240,224,192,128],Irt=[1,3,7,15,31,63,127,255];let Prt=class{_value;_currentBytePos;_currentBitPos;constructor(e){this._value=e,this._currentBytePos=e.length-1,this._currentBitPos=7}availableBits(){return this._currentBitPos+1+this._currentBytePos*8}totalBits(){return this._value.length*8}take(e){let r=e,n=0;for(;r>0&&this._haveBits();){const i=this._value[this._currentBytePos],s=this._currentBitPos+1,a=Math.min(s,r),o=Rrt(i,s-a,a);n=(n<<a)+o,r-=a,this._currentBitPos-=a,this._currentBitPos<0&&(this._currentBitPos=7,this._currentBytePos--)}return n}untake(e){for(this._currentBitPos+=e;this._currentBitPos>7;)this._currentBitPos-=8,this._currentBytePos+=1}_haveBits(){return this._currentBytePos>=0}};function Rrt(t,e,r){const n=Ort(e,r);return(t&n)>>>e}function Ort(t,e){return Crt[t]&Irt[Math.min(e+t-1,7)]}function Brt(t){function e(r){return r instanceof IW?r:new IW(r,t)}return e}let IW=class{_value;_hashFn;_depth;_availableBits;_currentBufferIndex;_buffers;constructor(e,r){if(!(e instanceof Uint8Array))throw new Error("can only hash Uint8Arrays");this._value=e,this._hashFn=r,this._depth=-1,this._availableBits=0,this._currentBufferIndex=0,this._buffers=[]}async take(e){let r=e;for(;this._availableBits<r;)await this._produceMoreBits();let n=0;for(;r>0;){const i=this._buffers[this._currentBufferIndex],s=Math.min(i.availableBits(),r),a=i.take(s);n=(n<<s)+a,r-=s,this._availableBits-=s,i.availableBits()===0&&this._currentBufferIndex++}return n}untake(e){let r=e;for(;r>0;){const n=this._buffers[this._currentBufferIndex],i=Math.min(n.totalBits()-n.availableBits(),r);n.untake(i),r-=i,this._availableBits+=i,this._currentBufferIndex>0&&n.totalBits()===n.availableBits()&&(this._depth--,this._currentBufferIndex--)}}async _produceMoreBits(){this._depth++;const e=this._depth>0?qn([this._value,Uint8Array.from([this._depth])]):this._value,r=await this._hashFn(e),n=new Prt(r);this._buffers.push(n),this._availableBits+=n.availableBits()}};function DD(t){if(t==null||t.hashFn==null)throw new Error("please define an options.hashFn");const e={bits:t.bits??8,hash:Brt(t.hashFn)};return new M0(e)}async function Drt(t){return(await U5.encode(t)).slice(0,8).reverse()}const Aue=BigInt(34),Mrt=8;let Nrt=class extends Hv{_bucket;constructor(e,r){super(e,r),this._bucket=DD({hashFn:Drt,bits:r.shardFanoutBits??Mrt})}async put(e,r){this.cid=void 0,this.size=void 0,this.nodeSize=void 0,await this._bucket.put(e,r)}async get(e){return this._bucket.get(e)}childCount(){return this._bucket.leafCount()}directChildrenCount(){return this._bucket.childrenCount()}onlyChild(){return this._bucket.onlyChild()}async*eachChildSeries(){for await(const{key:e,value:r}of this._bucket.eachLeafSeries())yield{key:e,child:r}}estimateNodeSize(){return this.nodeSize!==void 0?this.nodeSize:(this.nodeSize=Iue(this._bucket,this,this.options),this.nodeSize)}async*flush(e){for await(const r of Cue(this._bucket,e,this,this.options))yield{...r,path:this.path}}};async function*Cue(t,e,r,n){const i=t._children,s=(t.tableSize()-1).toString(16).length,a=[];let o=0n;for(let m=0;m<i.length;m++){const p=i.get(m);if(p==null)continue;const g=m.toString(16).toUpperCase().padStart(s,"0");if(p instanceof M0){let v;for await(const y of Cue(p,e,null,n))v=y;if(v==null)throw new Error("Could not flush sharded directory, no subshard found");a.push({Name:g,Tsize:Number(v.size),Hash:v.cid}),o+=v.size}else if(Frt(p.value)){const v=p.value;let y;for await(const _ of v.flush(e))y=_,yield y;if(y==null)throw new Error("Did not flush dir");const b=g+p.key;a.push({Name:b,Tsize:Number(y.size),Hash:y.cid}),o+=y.size}else{const v=p.value;if(v.cid==null)continue;const y=g+p.key,b=v.size;a.push({Name:y,Tsize:Number(b),Hash:v.cid}),o+=BigInt(b??0)}}const c=Uint8Array.from(i.bitField().reverse()),u=new Or({type:"hamt-sharded-directory",data:c,fanout:BigInt(t.tableSize()),hashType:Aue,mtime:r?.mtime,mode:r?.mode}),l={Data:u.marshal(),Links:a},f=li(to(l)),d=await hp(f,e,n),h=BigInt(f.byteLength)+o;yield{cid:d,unixfs:u,size:h}}function Frt(t){return typeof t.flush=="function"}function Iue(t,e,r){const n=t._children,i=(t.tableSize()-1).toString(16).length,s=[];for(let u=0;u<n.length;u++){const l=n.get(u);if(l==null)continue;const f=u.toString(16).toUpperCase().padStart(i,"0");if(l instanceof M0){const d=Iue(l,null,r);s.push({Name:f,Tsize:Number(d),Hash:r.cidVersion===0?GI:KI})}else if(typeof l.value.flush=="function"){const h=l.value.nodeSize();s.push({Name:f+l.key,Tsize:Number(h),Hash:r.cidVersion===0?GI:KI})}else{const d=l.value;if(d.cid==null)continue;const h=f+l.key,m=d.size;s.push({Name:h,Tsize:Number(m),Hash:d.cid})}}const a=Uint8Array.from(n.bitField().reverse()),o=new Or({type:"hamt-sharded-directory",data:a,fanout:BigInt(t.tableSize()),hashType:Aue,mtime:e?.mtime,mode:e?.mode});return li(to({Data:o.marshal(),Links:s})).length}async function Pue(t,e,r,n){let i=e;e instanceof BD&&e.estimateNodeSize()>r&&(i=await Lrt(e,n));const s=i.parent;if(s!=null){if(i!==e){if(t!=null&&(t.parent=i),i.parentKey==null)throw new Error("No parent key found");await s.put(i.parentKey,i)}return Pue(i,s,r,n)}return i}async function Lrt(t,e){const r=new Nrt({root:t.root,dir:!0,parent:t.parent,parentKey:t.parentKey,path:t.path,dirty:t.dirty,flat:!1,mtime:t.mtime,mode:t.mode},e);for await(const{key:n,child:i}of t.eachChildSeries())await r.put(n,i);return r}const $rt=(t="")=>t.split(/(?<!\\)\//).filter(Boolean);async function Urt(t,e,r){const n=$rt(t.path??""),i=n.length-1;let s=e,a="";for(let o=0;o<n.length;o++){const c=n[o];a+=`${a!==""?"/":""}${c}`;const u=o===i;if(s.dirty=!0,s.cid=void 0,s.size=void 0,u)await s.put(c,t),e=await Pue(null,s,r.shardSplitThresholdBytes,r);else{let l=await s.get(c);(l==null||!(l instanceof Hv))&&(l=new BD({root:!1,dir:!0,parent:s,parentKey:c,path:a,dirty:!0,flat:!0,mtime:l?.unixfs?.mtime,mode:l?.unixfs?.mode},r)),await s.put(c,l),s=l}}return e}async function*PW(t,e){if(!(t instanceof Hv)){t.unixfs?.isDirectory()===!0&&(yield t);return}yield*t.flush(e)}function jrt(t){return async function*(r,n){let i=new BD({root:!0,dir:!0,path:"",dirty:!0,flat:!0},t),s,a=!1;for await(const o of r){if(o==null)continue;const c=`${o.originalPath??""}`.split("/")[0];c!=null&&c!==""&&(s==null?(s=c,a=!0):s!==c&&(a=!1)),i=await Urt(o,i,t),o.unixfs?.isDirectory()!==!0&&(yield o)}if(t.wrapWithDirectory||a&&i.childCount()>1)yield*PW(i,n);else for await(const o of i.eachChildSeries())o!=null&&(yield*PW(o.child,n))}}async function*n2(t,e,r={}){let n;Symbol.asyncIterator in t||Symbol.iterator in t?n=t:n=[t];const i=r.wrapWithDirectory??!1,s=r.shardSplitThresholdBytes??262144,a=r.shardFanoutBits??8,o=r.cidVersion??1,c=r.rawLeaves??!0,u=r.leafType??"file",l=r.fileImportConcurrency??50,f=r.blockWriteConcurrency??10,d=r.reduceSingleLeafToSelf??!0,h=r.chunker??vue(),m=r.chunkValidator??grt(),p=r.dagBuilder??prt({chunker:h,chunkValidator:m,wrapWithDirectory:i,layout:r.layout??kue(),bufferImporter:r.bufferImporter??art({cidVersion:o,rawLeaves:c,leafType:u,onProgress:r.onProgress}),blockWriteConcurrency:f,reduceSingleLeafToSelf:d,cidVersion:o,onProgress:r.onProgress}),g=r.treeBuilder??jrt({wrapWithDirectory:i,shardSplitThresholdBytes:s,shardFanoutBits:a,cidVersion:o,onProgress:r.onProgress});for await(const v of g(gue(p(n,e),l),e))yield{cid:v.cid,path:v.path,unixfs:v.unixfs,size:v.size}}async function MD(t,e,r={}){const n=await RD(n2([t],e,r));if(n==null)throw new Eue("Nothing imported");return n}async function Vrt(t,e,r={}){const n=await RD(n2([t],e,r));if(n==null)throw new Eue("Nothing imported");return n}async function qrt(t,e,r={}){return MD({content:t},e,r)}async function zrt(t,e,r={}){return MD({content:t},e,r)}const i2={cidVersion:1,rawLeaves:!0,layout:kue({maxChildrenPerNode:1024}),chunker:vue({chunkSize:1048576})};async function*Hrt(t,e,r={}){yield*n2(t,e,{...i2,...r})}async function Wrt(t,e,r={}){const{cid:n}=await qrt(t,e,{...i2,...r});return n}async function Grt(t,e,r={}){const{cid:n}=await zrt(t,e,{...i2,...r});return n}async function Krt(t,e,r={}){const{cid:n}=await MD(t,e,{...i2,...r});return n}async function Xrt(t,e,r={}){const{cid:n}=await Vrt({...t,path:t.path??"-"},e,{...i2,...r});return n}function Yrt(t){return t[Symbol.asyncIterator]!=null}function j5(t){if(Yrt(t))return(async()=>{let r;for await(const n of t)r=n;return r})();let e;for(const r of t)e=r;return e}class c6 extends Error{static name="BadPathError";static code="ERR_BAD_PATH";name=c6.name;code=c6.code;constructor(e="Bad path"){super(e)}}let pp=class XI extends Error{static name="NotFoundError";static code="ERR_NOT_FOUND";name=XI.name;code=XI.code;constructor(e="Not found"){super(e)}};class l6 extends Error{static name="NoResolverError";static code="ERR_NO_RESOLVER";name=l6.name;code=l6.code;constructor(e="No resolver"){super(e)}}let Ga=class YI extends Error{static name="NotUnixFSError";static code="ERR_NOT_UNIXFS";name=YI.name;code=YI.code;constructor(e="Not UnixFS"){super(e)}};class u6 extends Error{static name="OverReadError";static code="ERR_OVER_READ";name=u6.name;code=u6.code;constructor(e="Over read"){super(e)}}class f6 extends Error{static name="UnderReadError";static code="ERR_UNDER_READ";name=f6.name;code=f6.code;constructor(e="Under read"){super(e)}}class d6 extends Error{static name="NoPropError";static code="ERR_NO_PROP";name=d6.name;code=d6.code;constructor(e="No Property found"){super(e)}}let hw=class ZI extends Error{static name="InvalidParametersError";static code="ERR_INVALID_PARAMS";name=ZI.name;code=ZI.code;constructor(e="Invalid parameters"){super(e)}};class Zrt extends Array{constructor(){super(),this.inRecursive=[]}prefix(e){const r=this.inRecursive[this.inRecursive.length-1];r&&(r.type===Re.array&&(r.elements++,r.elements!==1&&e.push([44])),r.type===Re.map&&(r.elements++,r.elements!==1&&(r.elements%2===1?e.push([44]):e.push([58]))))}[Re.uint.major](e,r){this.prefix(e);const n=String(r.value),i=[];for(let s=0;s<n.length;s++)i[s]=n.charCodeAt(s);e.push(i)}[Re.negint.major](e,r){this[Re.uint.major](e,r)}[Re.bytes.major](e,r){throw new Error(`${ph} unsupported type: Uint8Array`)}[Re.string.major](e,r){this.prefix(e);const n=Qse(JSON.stringify(r.value));e.push(n.length>32?tB(n):n)}[Re.array.major](e,r){this.prefix(e),this.inRecursive.push({type:Re.array,elements:0}),e.push([91])}[Re.map.major](e,r){this.prefix(e),this.inRecursive.push({type:Re.map,elements:0}),e.push([123])}[Re.tag.major](e,r){}[Re.float.major](e,r){if(r.type.name==="break"){const a=this.inRecursive.pop();if(a){if(a.type===Re.array)e.push([93]);else if(a.type===Re.map)e.push([125]);else throw new Error("Unexpected recursive type; this should not happen!");return}throw new Error("Unexpected break; this should not happen!")}if(r.value===void 0)throw new Error(`${ph} unsupported type: undefined`);if(this.prefix(e),r.type.name==="true"){e.push([116,114,117,101]);return}else if(r.type.name==="false"){e.push([102,97,108,115,101]);return}else if(r.type.name==="null"){e.push([110,117,108,108]);return}const n=String(r.value),i=[];let s=!1;for(let a=0;a<n.length;a++)i[a]=n.charCodeAt(a),!s&&(i[a]===46||i[a]===101||i[a]===69)&&(s=!0);s||(i.push(46),i.push(48)),e.push(i)}}function Jrt(t,e){if(Array.isArray(t[0])||Array.isArray(e[0]))throw new Error(`${ph} complex map keys are not supported`);const r=t[0],n=e[0];if(r.type!==Re.string||n.type!==Re.string)throw new Error(`${ph} non-string map keys are not supported`);if(r<n)return-1;if(r>n)return 1;throw new Error(`${ph} unexpected duplicate map keys, this is not supported`)}const Qrt={addBreakTokens:!0,mapSorter:Jrt};function ent(t,e){return e=Object.assign({},Qrt,e),lae(t,new Zrt,e)}class Rue{constructor(e,r={}){this._pos=0,this.data=e,this.options=r,this.modeStack=["value"],this.lastToken=""}pos(){return this._pos}done(){return this._pos>=this.data.length}ch(){return this.data[this._pos]}currentMode(){return this.modeStack[this.modeStack.length-1]}skipWhitespace(){let e=this.ch();for(;e===32||e===9||e===13||e===10;)e=this.data[++this._pos]}expect(e){if(this.data.length-this._pos<e.length)throw new Error(`${Et} unexpected end of input at position ${this._pos}`);for(let r=0;r<e.length;r++)if(this.data[this._pos++]!==e[r])throw new Error(`${Et} unexpected token at position ${this._pos}, expected to find '${String.fromCharCode(...e)}'`)}parseNumber(){const e=this._pos;let r=!1,n=!1;const i=o=>{for(;!this.done();){const c=this.ch();if(o.includes(c))this._pos++;else break}};if(this.ch()===45&&(r=!0,this._pos++),this.ch()===48)if(this._pos++,this.ch()===46)this._pos++,n=!0;else return new Qe(Re.uint,0,this._pos-e);if(i([48,49,50,51,52,53,54,55,56,57]),r&&this._pos===e+1)throw new Error(`${Et} unexpected token at position ${this._pos}`);if(!this.done()&&this.ch()===46){if(n)throw new Error(`${Et} unexpected token at position ${this._pos}`);n=!0,this._pos++,i([48,49,50,51,52,53,54,55,56,57])}!this.done()&&(this.ch()===101||this.ch()===69)&&(n=!0,this._pos++,!this.done()&&(this.ch()===43||this.ch()===45)&&this._pos++,i([48,49,50,51,52,53,54,55,56,57]));const s=String.fromCharCode.apply(null,this.data.subarray(e,this._pos)),a=parseFloat(s);return n?new Qe(Re.float,a,this._pos-e):this.options.allowBigInt!==!0||Number.isSafeInteger(a)?new Qe(a>=0?Re.uint:Re.negint,a,this._pos-e):new Qe(a>=0?Re.uint:Re.negint,BigInt(s),this._pos-e)}parseString(){if(this.ch()!==34)throw new Error(`${Et} unexpected character at position ${this._pos}; this shouldn't happen`);this._pos++;for(let s=this._pos,a=0;s<this.data.length&&a<65536;s++,a++){const o=this.data[s];if(o===92||o<32||o>=128)break;if(o===34){const c=String.fromCharCode.apply(null,this.data.subarray(this._pos,s));return this._pos=s+1,new Qe(Re.string,c,a)}}const e=this._pos,r=[],n=()=>{if(this._pos+4>=this.data.length)throw new Error(`${Et} unexpected end of unicode escape sequence at position ${this._pos}`);let s=0;for(let a=0;a<4;a++){let o=this.ch();if(o>=48&&o<=57)o-=48;else if(o>=97&&o<=102)o=o-97+10;else if(o>=65&&o<=70)o=o-65+10;else throw new Error(`${Et} unexpected unicode escape character at position ${this._pos}`);s=s*16+o,this._pos++}return s},i=()=>{const s=this.ch();let a=null,o=s>239?4:s>223?3:s>191?2:1;if(this._pos+o>this.data.length)throw new Error(`${Et} unexpected unicode sequence at position ${this._pos}`);let c,u,l,f;switch(o){case 1:s<128&&(a=s);break;case 2:c=this.data[this._pos+1],(c&192)===128&&(f=(s&31)<<6|c&63,f>127&&(a=f));break;case 3:c=this.data[this._pos+1],u=this.data[this._pos+2],(c&192)===128&&(u&192)===128&&(f=(s&15)<<12|(c&63)<<6|u&63,f>2047&&(f<55296||f>57343)&&(a=f));break;case 4:c=this.data[this._pos+1],u=this.data[this._pos+2],l=this.data[this._pos+3],(c&192)===128&&(u&192)===128&&(l&192)===128&&(f=(s&15)<<18|(c&63)<<12|(u&63)<<6|l&63,f>65535&&f<1114112&&(a=f))}a===null?(a=65533,o=1):a>65535&&(a-=65536,r.push(a>>>10&1023|55296),a=56320|a&1023),r.push(a),this._pos+=o};for(;!this.done();){const s=this.ch();let a;switch(s){case 92:if(this._pos++,this.done())throw new Error(`${Et} unexpected string termination at position ${this._pos}`);switch(a=this.ch(),this._pos++,a){case 34:case 39:case 92:case 47:r.push(a);break;case 98:r.push(8);break;case 116:r.push(9);break;case 110:r.push(10);break;case 102:r.push(12);break;case 114:r.push(13);break;case 117:r.push(n());break;default:throw new Error(`${Et} unexpected string escape character at position ${this._pos}`)}break;case 34:return this._pos++,new Qe(Re.string,eae(r),this._pos-e);default:if(s<32)throw new Error(`${Et} invalid control character at position ${this._pos}`);s<128?(r.push(s),this._pos++):i()}}throw new Error(`${Et} unexpected end of string at position ${this._pos}`)}parseValue(){switch(this.ch()){case 123:return this.modeStack.push("obj-start"),this._pos++,new Qe(Re.map,1/0,1);case 91:return this.modeStack.push("array-start"),this._pos++,new Qe(Re.array,1/0,1);case 34:return this.parseString();case 110:return this.expect([110,117,108,108]),new Qe(Re.null,null,4);case 102:return this.expect([102,97,108,115,101]),new Qe(Re.false,!1,5);case 116:return this.expect([116,114,117,101]),new Qe(Re.true,!0,4);case 45:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.parseNumber();default:throw new Error(`${Et} unexpected character at position ${this._pos}`)}}next(){switch(this.skipWhitespace(),this.currentMode()){case"value":return this.modeStack.pop(),this.parseValue();case"array-value":{if(this.modeStack.pop(),this.ch()===93)return this._pos++,this.skipWhitespace(),new Qe(Re.break,void 0,1);if(this.ch()!==44)throw new Error(`${Et} unexpected character at position ${this._pos}, was expecting array delimiter but found '${String.fromCharCode(this.ch())}'`);return this._pos++,this.modeStack.push("array-value"),this.skipWhitespace(),this.parseValue()}case"array-start":return this.modeStack.pop(),this.ch()===93?(this._pos++,this.skipWhitespace(),new Qe(Re.break,void 0,1)):(this.modeStack.push("array-value"),this.skipWhitespace(),this.parseValue());case"obj-key":if(this.ch()===125)return this.modeStack.pop(),this._pos++,this.skipWhitespace(),new Qe(Re.break,void 0,1);if(this.ch()!==44)throw new Error(`${Et} unexpected character at position ${this._pos}, was expecting object delimiter but found '${String.fromCharCode(this.ch())}'`);this._pos++,this.skipWhitespace();case"obj-start":{if(this.modeStack.pop(),this.ch()===125)return this._pos++,this.skipWhitespace(),new Qe(Re.break,void 0,1);const e=this.parseString();if(this.skipWhitespace(),this.ch()!==58)throw new Error(`${Et} unexpected character at position ${this._pos}, was expecting key/value delimiter ':' but found '${String.fromCharCode(this.ch())}'`);return this._pos++,this.modeStack.push("obj-value"),e}case"obj-value":return this.modeStack.pop(),this.modeStack.push("obj-key"),this.skipWhitespace(),this.parseValue();default:throw new Error(`${Et} unexpected parse state at position ${this._pos}; this shouldn't happen`)}}}function tnt(t,e){return e=Object.assign({tokenizer:new Rue(t,e)},e),Ef(t,e)}function rnt(t){return t instanceof ArrayBuffer?new Uint8Array(t,0,t.byteLength):t}function nnt(t){if(t.asCID!==t&&t["/"]!==t.bytes)return null;const e=mt.asCID(t);if(!e)return null;const r=e.toString();return[new Qe(Re.map,1/0,1),new Qe(Re.string,"/",1),new Qe(Re.string,r,r.length),new Qe(Re.break,void 0,1)]}function h6(t){const e=ko.encode(t).slice(1);return[new Qe(Re.map,1/0,1),new Qe(Re.string,"/",1),new Qe(Re.map,1/0,1),new Qe(Re.string,"bytes",5),new Qe(Re.string,e,e.length),new Qe(Re.break,void 0,1),new Qe(Re.break,void 0,1)]}function zo(t){return h6(new Uint8Array(t.buffer,t.byteOffset,t.byteLength))}function int(t){return h6(new Uint8Array(t))}function snt(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")}function ant(t){if(Number.isNaN(t))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(t===1/0||t===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}const ont={typeEncoders:{Object:nnt,Buffer:h6,Uint8Array:h6,Int8Array:zo,Uint16Array:zo,Int16Array:zo,Uint32Array:zo,Int32Array:zo,Float32Array:zo,Float64Array:zo,Uint8ClampedArray:zo,BigInt64Array:zo,BigUint64Array:zo,DataView:zo,ArrayBuffer:int,undefined:snt,number:ant}};class cnt extends Rue{constructor(e,r){super(e,r),this.tokenBuffer=[]}done(){return this.tokenBuffer.length===0&&super.done()}_next(){return this.tokenBuffer.length>0?this.tokenBuffer.pop():super.next()}next(){const e=this._next();if(e.type===Re.map){const r=this._next();if(r.type===Re.string&&r.value==="/"){const n=this._next();if(n.type===Re.string){if(this._next().type!==Re.break)throw new Error("Invalid encoded CID form");return this.tokenBuffer.push(n),new Qe(Re.tag,42,0)}if(n.type===Re.map){const i=this._next();if(i.type===Re.string&&i.value==="bytes"){const s=this._next();if(s.type===Re.string){for(let o=0;o<2;o++)if(this._next().type!==Re.break)throw new Error("Invalid encoded Bytes form");const a=ko.decode(`m${s.value}`);return new Qe(Re.bytes,a,s.value.length)}this.tokenBuffer.push(s)}this.tokenBuffer.push(i)}this.tokenBuffer.push(n)}this.tokenBuffer.push(r)}return e}}const JI={allowIndefinite:!1,allowUndefined:!1,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,rejectDuplicateMapKeys:!0,tags:[]};JI.tags[42]=mt.parse;const lnt="dag-json",ND=297,Oue=t=>ent(t,ont),FD=t=>{const e=rnt(t),r=Object.assign(JI,{tokenizer:new cnt(e,JI)});return tnt(e,r)},RW=t=>unt.decode(Oue(t)),unt=new TextDecoder,fnt=t=>FD(dnt.encode(t)),dnt=new TextEncoder,hnt=Object.freeze(Object.defineProperty({__proto__:null,code:ND,decode:FD,encode:Oue,format:RW,name:lnt,parse:fnt,stringify:RW},Symbol.toStringTag,{value:"Module"}));function LD(t,e,r,n,i,s,a){let o=t,c=i;for(;s.length>0;){const u=s[0];if(u in o){s.shift(),c=`${c}/${u}`;const l=mt.asCID(o[u]);if(l!=null)return{entry:{type:"object",name:n,path:i,cid:r,node:e,depth:a,size:BigInt(e.length),content:async function*(){yield t}},next:{cid:l,name:u,path:c,toResolve:s}};o=o[u]}else throw new d6(`No property named ${u} found in node ${r}`)}return{entry:{type:"object",name:n,path:i,cid:r,node:e,depth:a,size:BigInt(e.length),content:async function*(){yield t}}}}const pnt=async(t,e,r,n,i,s,a,o)=>{const c=await a.get(t,o),u=dae(c);return LD(u,c,t,e,r,n,s)},mnt=async(t,e,r,n,i,s,a,o)=>{const c=await a.get(t,o),u=FD(c);return LD(u,c,t,e,r,n,s)};function p6(t,e,r,n){const i=BigInt(t.length),s=BigInt(e+i);return r>=s||n<e?new Uint8Array(0):(n>=e&&n<s&&(t=t.subarray(0,Number(n-e))),r>=e&&r<s&&(t=t.subarray(Number(r-e))),t)}const $D=(t,e=0,r=t)=>{const n=BigInt(t),i=BigInt(e??0);let s=BigInt(r);if(s!==n&&(s=i+s),s>n&&(s=n),i<0n)throw new hw("Offset must be greater than or equal to 0");if(i>n)throw new hw("Offset must be less than the file size");if(s<0n)throw new hw("Length must be greater than or equal to 0");if(s>n)throw new hw("Length must be less than the file size");return{start:i,end:s}},gnt=t=>{async function*e(r={}){const{start:n,end:i}=$D(t.length,r.offset,r.length),s=p6(t,0n,n,i);r.onProgress?.(new ft("unixfs:exporter:progress:identity",{bytesRead:BigInt(s.byteLength),totalBytes:i-n,fileSize:BigInt(t.byteLength)})),yield s}return e},vnt=async(t,e,r,n,i,s,a,o)=>{if(n.length>0)throw new pp(`No link named ${r} found in raw node ${t}`);const c=Zn(t.multihash.bytes);return{entry:{type:"identity",name:e,path:r,cid:t,content:gnt(c.digest),depth:s,size:BigInt(c.digest.length),node:c.digest}}},ynt=async(t,e,r,n,i,s,a,o)=>{const c=await a.get(t,o),u=eoe(c);return LD(u,c,t,e,r,n,s)},bnt=t=>{async function*e(r={}){const{start:n,end:i}=$D(t.length,r.offset,r.length),s=p6(t,0n,n,i);r.onProgress?.(new ft("unixfs:exporter:progress:raw",{bytesRead:BigInt(s.byteLength),totalBytes:i-n,fileSize:BigInt(t.byteLength)})),yield s}return e},wnt=async(t,e,r,n,i,s,a,o)=>{if(n.length>0)throw new pp(`No link named ${r} found in raw node ${t}`);const c=await a.get(t,o);return{entry:{type:"raw",name:e,path:r,cid:t,content:bnt(c),depth:s,size:BigInt(c.length),node:c}}},_nt=async function(t){return(await U5.encode(t)).slice(0,8).reverse()},xnt=async(t,e,r)=>{const n=(e.tableSize()-1).toString(16).length;await Promise.all(t.map(async i=>{if(i.Name==null)throw new Error("Unexpected Link without a Name");if(i.Name.length===n){const s=parseInt(i.Name,16);e._putObjectAt(s,new M0({hash:r._options.hash,bits:r._options.bits},e,s));return}await r.put(i.Name.substring(2),!0)}))},OW=(t,e)=>t.toString(16).toUpperCase().padStart(e,"0").substring(0,e),Snt=t=>{let e=t.bucket;const r=[];for(;e._parent!=null;)r.push(e),e=e._parent;return r.push(e),r.reverse()},Bue=async(t,e,r,n,i)=>{if(n==null){if(t.Data==null)throw new Ga("no data in PBNode");let f;try{f=Or.unmarshal(t.Data)}catch(h){throw new Ga(h.message)}if(f.type!=="hamt-sharded-directory")throw new Ga("not a HAMT");if(f.fanout==null)throw new Ga("missing fanout");const d=DD({hashFn:_nt,bits:Math.log2(Number(f.fanout))});n={rootBucket:d,hamtDepth:1,lastBucket:d}}const s=(n.lastBucket.tableSize()-1).toString(16).length;await xnt(t.Links,n.lastBucket,n.rootBucket);const a=await n.rootBucket._findNewBucketAndPos(e);let o=OW(a.pos,s);const c=Snt(a);c.length>n.hamtDepth&&(n.lastBucket=c[n.hamtDepth],o=OW(n.lastBucket._posAtParent,s));const u=t.Links.find(f=>{if(f.Name==null)return!1;const d=f.Name.substring(0,s),h=f.Name.substring(s);return!(d!==o||h!==""&&h!==e)});if(u==null)return;if(u.Name!=null&&u.Name.substring(s)===e)return u.Hash;n.hamtDepth++;const l=await r.get(u.Hash,i);return t=Rc(l),Bue(t,e,r,n,i)};function UD(t){const[e,r]=t[Symbol.asyncIterator]!=null?[t[Symbol.asyncIterator](),Symbol.asyncIterator]:[t[Symbol.iterator](),Symbol.iterator],n=[];return{peek:()=>e.next(),push:i=>{n.push(i)},next:()=>n.length>0?{done:!1,value:n.shift()}:e.next(),[r](){return this}}}function Ent(t){return t[Symbol.asyncIterator]!=null}function Qc(t,e){let r=0;if(Ent(t))return async function*(){for await(const c of t)await e(c,r++)&&(yield c)}();const n=UD(t),{value:i,done:s}=n.next();if(s===!0)return function*(){}();const a=e(i,r++);if(typeof a.then=="function")return async function*(){await a&&(yield i);for await(const c of n)await e(c,r++)&&(yield c)}();const o=e;return function*(){a===!0&&(yield i);for(const c of n)o(c,r++)&&(yield c)}()}function knt(t){return t[Symbol.asyncIterator]!=null}function Vu(t,e){let r=0;if(knt(t))return async function*(){for await(const c of t)yield e(c,r++)}();const n=UD(t),{value:i,done:s}=n.next();if(s===!0)return function*(){}();const a=e(i,r++);if(typeof a.then=="function")return async function*(){yield await a;for await(const c of n)yield e(c,r++)}();const o=e;return function*(){yield a;for(const c of n)yield o(c,r++)}()}const pw=globalThis.CustomEvent??Event;async function*bd(t,e={}){let r=e.concurrency??1/0;r<1&&(r=1/0);const n=e.ordered??!1,i=new EventTarget,s=[];let a=sr(),o=sr(),c=!1,u,l=!1;i.addEventListener("task-complete",()=>{o.resolve()}),Promise.resolve().then(async()=>{try{for await(const m of t){if(s.length===r&&(a=sr(),await a.promise),l)break;const p={done:!1};s.push(p),m().then(g=>{p.done=!0,p.ok=!0,p.value=g,i.dispatchEvent(new pw("task-complete"))},g=>{p.done=!0,p.err=g,i.dispatchEvent(new pw("task-complete"))})}c=!0,i.dispatchEvent(new pw("task-complete"))}catch(m){u=m,i.dispatchEvent(new pw("task-complete"))}});function f(){return n?s[0]?.done:!!s.find(m=>m.done)}function*d(){for(;s.length>0&&s[0].done;){const m=s[0];if(s.shift(),m.ok)yield m.value;else throw l=!0,a.resolve(),m.err;a.resolve()}}function*h(){for(;f();)for(let m=0;m<s.length;m++)if(s[m].done){const p=s[m];if(s.splice(m,1),m--,p.ok)yield p.value;else throw l=!0,a.resolve(),p.err;a.resolve()}}for(;;){if(f()||(o=sr(),await o.promise),u!=null)throw u;if(n?yield*d():yield*h(),c&&s.length===0)break}}const Tnt=(t,e,r,n,i,s,a)=>{async function*o(c={}){const u=c.offset??0,l=c.length??e.Links.length,f=e.Links.slice(u,l);c.onProgress?.(new ft("unixfs:exporter:walk:directory",{cid:t})),yield*Un(f,d=>Vu(d,h=>async()=>{const m=h.Name??"",p=`${n}/${m}`;return(await i(h.Hash,m,p,[],s+1,a,c)).entry}),d=>bd(d,{ordered:!0,concurrency:c.blockReadConcurrency}),d=>Qc(d,h=>h!=null))}return o};async function Due(t,e,r,n,i,s,a){if(e instanceof Uint8Array){const u=p6(e,n,i,s);r.push(u);return}if(e.Data==null)throw new Ga("no data in PBNode");let o;try{o=Or.unmarshal(e.Data)}catch(u){throw new Ga(u.message)}if(o.data!=null){const u=o.data,l=p6(u,n,i,s);r.push(l),n+=BigInt(l.byteLength)}const c=[];if(e.Links.length!==o.blockSizes.length)throw new Ga("Inconsistent block sizes and dag links");for(let u=0;u<e.Links.length;u++){const l=e.Links[u],f=n,d=f+o.blockSizes[u];if((i>=f&&i<d||s>=f&&s<=d||i<f&&s>d)&&c.push({link:l,blockStart:n}),n=d,n>s)break}await Un(c,u=>Vu(u,l=>async()=>{const f=await t.get(l.link.Hash,a);return{...l,block:f}}),u=>bd(u,{ordered:!0,concurrency:a.blockReadConcurrency}),async u=>{for await(const{link:l,block:f,blockStart:d}of u){let h;switch(l.Hash.code){case Cl:h=Rc(f);break;case Ro:h=f;break;default:r.end(new Ga(`Unsupported codec: ${l.Hash.code}`));return}const m=new Cu({concurrency:1});m.on("error",p=>{r.end(p)}),m.add(async()=>{a.onProgress?.(new ft("unixfs:exporter:walk:file",{cid:l.Hash})),await Due(t,h,r,d,i,s,a)}),await m.onIdle()}}),n>=s&&r.end()}const BW=(t,e,r,n,i,s,a)=>{async function*o(c={}){const u=r.fileSize();if(u===void 0)throw new Error("File was a directory");const{start:l,end:f}=$D(u,c.offset,c.length);if(f===0n)return;let d=0n;const h=f-l,m=Po();c.onProgress?.(new ft("unixfs:exporter:walk:file",{cid:t})),Due(a,e,m,0n,l,f,c).catch(p=>{m.end(p)});for await(const p of m)if(p!=null){if(d+=BigInt(p.byteLength),d>h)throw m.end(),new u6("Read too many bytes - the file size reported by the UnixFS data in the root node may be incorrect");d===h&&m.end(),c.onProgress?.(new ft("unixfs:exporter:progress:unixfs:file",{bytesRead:d,totalBytes:h,fileSize:u})),yield p}if(d<h)throw new f6("Traversed entire DAG but did not read enough bytes")}return o},Ant=(t,e,r,n,i,s,a)=>{function o(c={}){return c.onProgress?.(new ft("unixfs:exporter:walk:hamt-sharded-directory",{cid:t})),Mue(e,n,i,s,a,c)}return o};async function*Mue(t,e,r,n,i,s){const a=t.Links;if(t.Data==null)throw new Ga("no data in PBNode");let o;try{o=Or.unmarshal(t.Data)}catch(l){throw new Ga(l.message)}if(o.fanout==null)throw new Ga("missing fanout");const c=(o.fanout-1n).toString(16).length,u=Un(a,l=>Vu(l,f=>async()=>{const d=f.Name!=null?f.Name.substring(c):null;if(d!=null&&d!==""){const h=await r(f.Hash,d,`${e}/${d}`,[],n+1,i,s);return{entries:h.entry==null?[]:[h.entry]}}else{const h=await i.get(f.Hash,s);return t=Rc(h),s.onProgress?.(new ft("unixfs:exporter:walk:hamt-sharded-directory",{cid:f.Hash})),{entries:Mue(t,e,r,n,i,s)}}}),l=>bd(l,{ordered:!0,concurrency:s.blockReadConcurrency}));for await(const{entries:l}of u)yield*l}const Cnt=(t,e)=>t.Links.find(n=>n.Name===e)?.Hash,Int={raw:BW,file:BW,directory:Tnt,"hamt-sharded-directory":Ant,metadata:(t,e,r,n,i,s,a)=>()=>[],symlink:(t,e,r,n,i,s,a)=>()=>[]},Pnt=async(t,e,r,n,i,s,a,o)=>{const c=await a.get(t,o),u=Rc(c);let l,f;if(e==null&&(e=t.toString()),u.Data==null)throw new Ga("no data in PBNode");try{l=Or.unmarshal(u.Data)}catch(h){throw new Ga(h.message)}if(r==null&&(r=e),n.length>0){let h;if(l?.type==="hamt-sharded-directory"?h=await Bue(u,n[0],a):h=Cnt(u,n[0]),h==null)throw new pp("file does not exist");const m=n.shift(),p=`${r}/${m}`;f={cid:h,toResolve:n,name:m??"",path:p}}const d=Int[l.type](t,u,l,r,i,s,a);if(d==null)throw new pp("could not find content exporter");return l.isDirectory()?{entry:{type:"directory",name:e,path:r,cid:t,content:d,unixfs:l,depth:s,node:u,size:l.fileSize()},next:f}:{entry:{type:"file",name:e,path:r,cid:t,content:d,unixfs:l,depth:s,node:u,size:l.fileSize()},next:f}},Rnt={[Cl]:Pnt,[Ro]:wnt,[dB]:pnt,[ND]:mnt,[Kf.code]:vnt,[CB]:ynt},Nue=async(t,e,r,n,i,s,a)=>{const o=Rnt[t.code];if(o==null)throw new l6(`No resolver for code ${t.code}`);return o(t,e,r,n,Nue,i,s,a)},Ont=(t="")=>(t.trim().match(/([^\\^/]|\\\/)+/g)??[]).filter(Boolean),Bnt=t=>{if(t instanceof Uint8Array)return{cid:mt.decode(t),toResolve:[]};const e=mt.asCID(t);if(e!=null)return{cid:e,toResolve:[]};if(typeof t=="string"){t.indexOf("/ipfs/")===0&&(t=t.substring(6));const r=Ont(t);return{cid:mt.parse(r[0]),toResolve:r.slice(1)}}throw new c6(`Unknown path type ${t}`)};async function*Fue(t,e,r={}){let{cid:n,toResolve:i}=Bnt(t),s=n.toString(),a=s;const o=i.length;for(;;){const c=await Nue(n,s,a,i,o,e,r);if(c.entry==null&&c.next==null)throw new pp(`Could not resolve ${t}`);if(c.entry!=null&&(yield c.entry),c.next==null)return;i=c.next.toResolve,n=c.next.cid,s=c.next.name,a=c.next.path}}async function wd(t,e,r={}){const n=await j5(Fue(t,e,r));if(n==null)throw new pp(`Could not resolve ${t}`);return n}async function*Lue(t,e,r={}){const n=await wd(t,e,r);if(n==null)return;if(yield n,n.type==="directory")for await(const s of i(n,r))yield s;async function*i(s,a){for await(const o of s.content(a))yield o,!(o instanceof Uint8Array)&&o.type==="directory"&&(yield*i(o,a))}}var hE,DW;function Dnt(){return DW||(DW=1,hE=t=>{if(Object.prototype.toString.call(t)!=="[object Object]")return!1;const e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}),hE}var mw,MW;function Mnt(){if(MW)return mw;MW=1;const t=Dnt(),{hasOwnProperty:e}=Object.prototype,{propertyIsEnumerable:r}=Object,n=(h,m,p)=>Object.defineProperty(h,m,{value:p,writable:!0,enumerable:!0,configurable:!0}),i=mw,s={concatArrays:!1,ignoreUndefined:!1},a=h=>{const m=[];for(const p in h)e.call(h,p)&&m.push(p);if(Object.getOwnPropertySymbols){const p=Object.getOwnPropertySymbols(h);for(const g of p)r.call(h,g)&&m.push(g)}return m};function o(h){return Array.isArray(h)?c(h):t(h)?u(h):h}function c(h){const m=h.slice(0,0);return a(h).forEach(p=>{n(m,p,o(h[p]))}),m}function u(h){const m=Object.getPrototypeOf(h)===null?Object.create(null):{};return a(h).forEach(p=>{n(m,p,o(h[p]))}),m}const l=(h,m,p,g)=>(p.forEach(v=>{typeof m[v]>"u"&&g.ignoreUndefined||(v in h&&h[v]!==Object.getPrototypeOf(h)?n(h,v,d(h[v],m[v],g)):n(h,v,o(m[v])))}),h),f=(h,m,p)=>{let g=h.slice(0,0),v=0;return[h,m].forEach(y=>{const b=[];for(let _=0;_<y.length;_++)e.call(y,_)&&(b.push(String(_)),y===h?n(g,v++,y[_]):n(g,v++,o(y[_])));g=l(g,y,a(y).filter(_=>!b.includes(_)),p)}),g};function d(h,m,p){return p.concatArrays&&Array.isArray(h)&&Array.isArray(m)?f(h,m,p):!t(m)||!t(h)?o(m):l(h,m,a(m),p)}return mw=function(...h){const m=d(o(s),this!==i&&this||{},s);let p={_:{}};for(const g of h)if(g!==void 0){if(!t(g))throw new TypeError("`"+g+"` is not an Option Object");p=d(p,{_:g},m)}return p._},mw}var Nnt=Mnt();const No=In(Nnt);class qu extends Error{name;code;constructor(e,r,n){super(e),this.name=r,this.code=n}}class V5 extends qu{constructor(e="not a Unixfs node"){super(e,"NotUnixFSError","ERR_NOT_UNIXFS")}}class td extends qu{constructor(e="invalid PBNode"){super(e,"InvalidPBNodeError","ERR_INVALID_PB_NODE")}}class jD extends qu{constructor(e="unknown error"){super(e,"InvalidPBNodeError","ERR_UNKNOWN_ERROR")}}class $ue extends qu{constructor(e="path already exists"){super(e,"AlreadyExistsError","ERR_ALREADY_EXISTS")}}class Fnt extends qu{constructor(e="path does not exist"){super(e,"DoesNotExistError","ERR_DOES_NOT_EXIST")}}class Uue extends qu{constructor(e="no content"){super(e,"NoContentError","ERR_NO_CONTENT")}}class Lnt extends qu{constructor(e="not a file"){super(e,"NotAFileError","ERR_NOT_A_FILE")}}class VD extends qu{constructor(e="not a directory"){super(e,"NotADirectoryError","ERR_NOT_A_DIRECTORY")}}class fm extends qu{constructor(e="invalid parameters"){super(e,"InvalidParametersError","ERR_INVALID_PARAMETERS")}}const mp=1e3,gp=mp*60,vp=gp*60,Xh=vp*24,$nt=Xh*7,Unt=Xh*365.25;function jue(t,e){try{if(typeof t=="string"&&t.length>0)return jnt(t);if(typeof t=="number"&&isFinite(t))return e?.long?qnt(t):Vnt(t);throw new Error("Value is not a string or number.")}catch(r){const n=znt(r)?`${r.message}. value=${JSON.stringify(t)}`:"An unknown error has occured.";throw new Error(n)}}function jnt(t){if(t=String(t),t.length>100)throw new Error("Value exceeds the maximum length of 100 characters.");const e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(!e)return NaN;const r=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*Unt;case"weeks":case"week":case"w":return r*$nt;case"days":case"day":case"d":return r*Xh;case"hours":case"hour":case"hrs":case"hr":case"h":return r*vp;case"minutes":case"minute":case"mins":case"min":case"m":return r*gp;case"seconds":case"second":case"secs":case"sec":case"s":return r*mp;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:throw new Error(`The unit ${n} was matched, but no matching case exists.`)}}function Vnt(t){const e=Math.abs(t);return e>=Xh?`${Math.round(t/Xh)}d`:e>=vp?`${Math.round(t/vp)}h`:e>=gp?`${Math.round(t/gp)}m`:e>=mp?`${Math.round(t/mp)}s`:`${t}ms`}function qnt(t){const e=Math.abs(t);return e>=Xh?gw(t,e,Xh,"day"):e>=vp?gw(t,e,vp,"hour"):e>=gp?gw(t,e,gp,"minute"):e>=mp?gw(t,e,mp,"second"):`${t} ms`}function gw(t,e,r,n){const i=e>=r*1.5;return`${Math.round(t/r)} ${n}${i?"s":""}`}function znt(t){return typeof t=="object"&&t!==null&&"message"in t}function Hnt(t){r.debug=r,r.default=r,r.coerce=c,r.disable=s,r.enable=i,r.enabled=a,r.humanize=jue,r.destroy=u,Object.keys(t).forEach(l=>{r[l]=t[l]}),r.names=[],r.skips=[],r.formatters={};function e(l){let f=0;for(let d=0;d<l.length;d++)f=(f<<5)-f+l.charCodeAt(d),f|=0;return r.colors[Math.abs(f)%r.colors.length]}r.selectColor=e;function r(l){let f,d=null,h,m;function p(...g){if(!p.enabled)return;const v=p,y=Number(new Date),b=y-(f||y);v.diff=b,v.prev=f,v.curr=y,f=y,g[0]=r.coerce(g[0]),typeof g[0]!="string"&&g.unshift("%O");let _=0;g[0]=g[0].replace(/%([a-zA-Z%])/g,(E,k)=>{if(E==="%%")return"%";_++;const B=r.formatters[k];if(typeof B=="function"){const D=g[_];E=B.call(v,D),g.splice(_,1),_--}return E}),r.formatArgs.call(v,g),(v.log||r.log).apply(v,g)}return p.namespace=l,p.useColors=r.useColors(),p.color=r.selectColor(l),p.extend=n,p.destroy=r.destroy,Object.defineProperty(p,"enabled",{enumerable:!0,configurable:!1,get:()=>d!==null?d:(h!==r.namespaces&&(h=r.namespaces,m=r.enabled(l)),m),set:g=>{d=g}}),typeof r.init=="function"&&r.init(p),p}function n(l,f){const d=r(this.namespace+(typeof f>"u"?":":f)+l);return d.log=this.log,d}function i(l){r.save(l),r.namespaces=l,r.names=[],r.skips=[];let f;const d=(typeof l=="string"?l:"").split(/[\s,]+/),h=d.length;for(f=0;f<h;f++)d[f]&&(l=d[f].replace(/\*/g,".*?"),l[0]==="-"?r.skips.push(new RegExp("^"+l.substr(1)+"$")):r.names.push(new RegExp("^"+l+"$")))}function s(){const l=[...r.names.map(o),...r.skips.map(o).map(f=>"-"+f)].join(",");return r.enable(""),l}function a(l){if(l[l.length-1]==="*")return!0;let f,d;for(f=0,d=r.skips.length;f<d;f++)if(r.skips[f].test(l))return!1;for(f=0,d=r.names.length;f<d;f++)if(r.names[f].test(l))return!0;return!1}function o(l){return l.toString().substring(2,l.toString().length-2).replace(/\.\*\?$/,"*")}function c(l){return l instanceof Error?l.stack??l.message:l}function u(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.setupFormatters(r.formatters),r.enable(r.load()),r}var Wnt={};const m6=Qnt(),Gnt=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function Knt(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent?.toLowerCase().match(/(edge|trident)\/(\d+)/)!=null?!1:typeof document<"u"&&document.documentElement?.style?.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent?.toLowerCase().match(/firefox\/(\d+)/)!=null&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent?.toLowerCase().match(/applewebkit\/(\d+)/)}function Xnt(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+jue(this.diff),!this.useColors)return;const e="color: "+this.color;t.splice(1,0,e,"color: inherit");let r=0,n=0;t[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(r++,i==="%c"&&(n=r))}),t.splice(n,0,e)}const Ynt=console.debug??console.log??(()=>{});function Znt(t){try{t?m6?.setItem("debug",t):m6?.removeItem("debug")}catch{}}function Jnt(){let t;try{t=m6?.getItem("debug")}catch{}return!t&&typeof globalThis.process<"u"&&"env"in globalThis.process&&(t=Wnt.DEBUG),t}function Qnt(){try{return localStorage}catch{}}function eit(t){t.j=function(e){try{return JSON.stringify(e)}catch(r){return"[UnexpectedJSONParseError]: "+r.message}}}const za=Hnt({formatArgs:Xnt,save:Znt,load:Jnt,useColors:Knt,setupFormatters:eit,colors:Gnt,storage:m6,log:Ynt});za.formatters.b=t=>t==null?"undefined":$n.baseEncode(t);za.formatters.t=t=>t==null?"undefined":ma.baseEncode(t);za.formatters.m=t=>t==null?"undefined":ko.baseEncode(t);za.formatters.p=t=>t==null?"undefined":t.toString();za.formatters.c=t=>t==null?"undefined":t.toString();za.formatters.k=t=>t==null?"undefined":t.toString();za.formatters.a=t=>t==null?"undefined":t.toString();za.formatters.e=t=>t==null?"undefined":NW(t.stack)??NW(t.message)??t.toString();function tit(t){const e=()=>{};return e.enabled=!1,e.color="",e.diff=0,e.log=()=>{},e.namespace=t,e.destroy=()=>!0,e.extend=()=>e,e}function q5(){return{forComponent(t){return $s(t)}}}function $s(t){let e=tit(`${t}:trace`);return za.enabled(`${t}:trace`)&&za.names.map(r=>r.toString()).find(r=>r.includes(":trace"))!=null&&(e=za(`${t}:trace`)),Object.assign(za(t),{error:za(`${t}:error`),trace:e})}function NW(t){if(t!=null&&(t=t.trim(),t.length!==0))return t}function Vue(t){function e(r){return r instanceof FW?r:new FW(r,t)}return e}class FW{_value;_hashFn;_depth;_availableBits;_currentBufferIndex;_buffers;constructor(e,r){if(!(e instanceof Uint8Array))throw new Error("can only hash Uint8Arrays");this._value=e,this._hashFn=r,this._depth=-1,this._availableBits=0,this._currentBufferIndex=0,this._buffers=[]}async take(e){let r=e;for(;this._availableBits<r;)await this._produceMoreBits();let n=0;for(;r>0;){const i=this._buffers[this._currentBufferIndex],s=Math.min(i.availableBits(),r),a=i.take(s);n=(n<<s)+a,r-=s,this._availableBits-=s,i.availableBits()===0&&this._currentBufferIndex++}return n}untake(e){let r=e;for(;r>0;){const n=this._buffers[this._currentBufferIndex],i=Math.min(n.totalBits()-n.availableBits(),r);n.untake(i),r-=i,this._availableBits+=i,this._currentBufferIndex>0&&n.totalBits()===n.availableBits()&&(this._depth--,this._currentBufferIndex--)}}async _produceMoreBits(){this._depth++;const e=this._depth>0?qn([this._value,Uint8Array.from([this._depth])]):this._value,r=await this._hashFn(e),n=new iit(r);this._buffers.push(n),this._availableBits+=n.availableBits()}}const rit=[255,254,252,248,240,224,192,128],nit=[1,3,7,15,31,63,127,255];class iit{_value;_currentBytePos;_currentBitPos;constructor(e){this._value=e,this._currentBytePos=e.length-1,this._currentBitPos=7}availableBits(){return this._currentBitPos+1+this._currentBytePos*8}totalBits(){return this._value.length*8}take(e){let r=e,n=0;for(;r>0&&this._haveBits();){const i=this._value[this._currentBytePos],s=this._currentBitPos+1,a=Math.min(s,r),o=sit(i,s-a,a);n=(n<<a)+o,r-=a,this._currentBitPos-=a,this._currentBitPos<0&&(this._currentBitPos=7,this._currentBytePos--)}return n}untake(e){for(this._currentBitPos+=e;this._currentBitPos>7;)this._currentBitPos-=8,this._currentBytePos+=1}_haveBits(){return this._currentBytePos>=0}}function sit(t,e,r){const n=ait(e,r);return(t&n)>>>e}function ait(t,e){return rit[t]&nit[Math.min(e+t-1,7)]}const qD=BigInt(U5.code),jg=8;async function zD(t){return(await U5.encode(t)).subarray(0,8).reverse()}const dm=async(t,e,r)=>{r.codec==null&&(r.codec=r2);const n=await ci.digest(t),i=mt.create(r.cidVersion,r.codec.code,n);return await e.put(i,t,{...r,signal:r.signal}),i};class oit{options;root;dir;path;dirty;flat;parent;parentKey;unixfs;mode;mtime;cid;size;nodeSize;constructor(e,r){this.options=r??{},this.root=e.root,this.dir=e.dir,this.path=e.path,this.dirty=e.dirty,this.flat=e.flat,this.parent=e.parent,this.parentKey=e.parentKey,this.unixfs=e.unixfs,this.mode=e.mode,this.mtime=e.mtime}}class cit extends oit{_bucket;constructor(e,r){super(e,r),this._bucket=DD({hashFn:zD,bits:8})}async put(e,r){this.cid=void 0,this.size=void 0,this.nodeSize=void 0,await this._bucket.put(e,r)}async get(e){return this._bucket.get(e)}childCount(){return this._bucket.leafCount()}directChildrenCount(){return this._bucket.childrenCount()}onlyChild(){return this._bucket.onlyChild()}async*eachChildSeries(){for await(const{key:e,value:r}of this._bucket.eachLeafSeries())yield{key:e,child:r}}estimateNodeSize(){return this.nodeSize!==void 0?this.nodeSize:(this.nodeSize=zue(this._bucket,this,this.options),this.nodeSize)}async*flush(e){for await(const r of que(this._bucket,e,this,this.options))yield{...r,path:this.path}}}async function*que(t,e,r,n){const i=t._children,s=[];let a=0n;for(let h=0;h<i.length;h++){const m=i.get(h);if(m==null)continue;const p=h.toString(16).toUpperCase().padStart(2,"0");if(m instanceof M0){let g;for await(const v of que(m,e,null,n))g=v;if(g==null)throw new Error("Could not flush sharded directory, no sub-shard found");s.push({Name:p,Tsize:Number(g.size),Hash:g.cid}),a+=g.size}else if(lit(m.value)){const g=m.value;let v;for await(const b of g.flush(e))v=b,yield v;if(v==null)throw new Error("Did not flush dir");const y=p+m.key;s.push({Name:y,Tsize:Number(v.size),Hash:v.cid}),a+=v.size}else{const g=m.value;if(g.cid==null)continue;const v=p+m.key,y=g.size;s.push({Name:v,Tsize:Number(y),Hash:g.cid}),a+=BigInt(y??0)}}const o=Uint8Array.from(i.bitField().reverse()),c=new Or({type:"hamt-sharded-directory",data:o,fanout:BigInt(t.tableSize()),hashType:qD,mtime:r?.mtime,mode:r?.mode}),u={Data:c.marshal(),Links:s},l=li(to(u)),f=await dm(l,e,n),d=BigInt(l.byteLength)+a;yield{cid:f,unixfs:c,size:d}}function lit(t){return typeof t.flush=="function"}function zue(t,e,r){const n=t._children,i=[];for(let c=0;c<n.length;c++){const u=n.get(c);if(u==null)continue;const l=c.toString(16).toUpperCase().padStart(2,"0");if(u instanceof M0){const f=zue(u,null,r);i.push({Name:l,Tsize:Number(f),Hash:r.cidVersion===0?QI:eP})}else if(typeof u.value.flush=="function"){const d=u.value.nodeSize();i.push({Name:l+u.key,Tsize:Number(d),Hash:r.cidVersion===0?QI:eP})}else{const f=u.value;if(f.cid==null)continue;const d=l+u.key,h=f.size;i.push({Name:d,Tsize:Number(h),Hash:f.cid})}}const s=Uint8Array.from(n.bitField().reverse()),a=new Or({type:"hamt-sharded-directory",data:s,fanout:BigInt(t.tableSize()),hashType:qD,mtime:e?.mtime,mode:e?.mode});return li(to({Data:a.marshal(),Links:i})).length}const QI=mt.parse("QmUNLLsPACCz1vLxQVkXqqLX5R1X345qqfHbsf67hvA3Nn"),eP=mt.parse("zdj7WbTaiJT1fgatdet9Ei9iDB5hdCxkbVyhyh8YTUnXMiwYi"),tP=$s("helia:unixfs:commands:utils:hamt-utils"),rP=t=>t.toString(16).toUpperCase().padStart(2,"0").substring(0,2),uit=async(t,e,r)=>{const n=new cit({root:!0,dir:!0,parent:void 0,parentKey:void 0,path:"",dirty:!0,flat:!1,mtime:r.mtime,mode:r.mode},r);for(let s=0;s<e.length;s++)await n._bucket.put(e[s].name,{size:e[s].size,cid:e[s].cid});const i=await j5(n.flush(t));if(i==null)throw new Error("Flushing shard yielded no result");return i},Hue=async(t,e,r)=>{const n=Or.unmarshal(t[0].node.Data??new Uint8Array(0)),i=BigInt(Math.pow(2,jg));t.reverse();let s,a;for(let o=0;o<t.length;o++){const c=o===t.length-1,u=t[o],l=Uint8Array.from(u.children.bitField().reverse()),f=new Or({type:"hamt-sharded-directory",data:l,fanout:i,hashType:qD});c&&(f.mtime=n.mtime,f.mode=n.mode),a={Data:f.marshal(),Links:u.node.Links};const d=li(to(a));if(s=await dm(d,e,r),!c){const h=t[o+1];if(h==null)throw new Error("Was not operating on shard root but also had no parent?");tP("updating link in parent sub-shard with prefix %s",h.prefix),h.node.Links=h.node.Links.filter(m=>m.Name!==h.prefix),h.node.Links.push({Name:h.prefix,Hash:s,Tsize:u.node.Links.reduce((m,p)=>m+(p.Tsize??0),d.byteLength)})}}if(s==null||a==null)throw new Error("Noting persisted");return{cid:s,node:a}},Wue=async(t,e,r,n)=>{const s=Vue(zD)(tt(e)),a=[];for(;;){const o=await r.get(t,n),c=Rc(o),u=new o6,l=await s.take(jg),f=rP(l);a.push({prefix:f,children:u,node:c});let d;for(const m of c.Links){const p=m.Name??"";if(p.length<2)throw new Error("Invalid HAMT - link name was too short");const g=parseInt(p.substring(0,2),16);u.set(g,!0),p.startsWith(f)&&(d=m)}if(d==null){tP("no link found with prefix %s for %s",f,e);break}const h=d.Name??"";if(h.length<2)throw new Error("Invalid HAMT - link name was too short");if(h.length===2){t=d.Hash,tP("descend into sub-shard with prefix %s",h);continue}break}return{path:a,hash:s}};async function Gue(t,e,r,n){if(t.Data==null)throw new Error("DagPB node had no data");const i=Or.unmarshal(t.Data);let s;if(i.type==="directory")s=fit(t);else if(i.type==="hamt-sharded-directory")s=await Kue(t,0,r,e,n);else throw new Error("Can only estimate the size of directories or shards");return s>r}function fit(t){let e=0;for(const r of t.Links)e+=(r.Name??"").length,e+=r.Hash.version===1?eP.bytes.byteLength:QI.bytes.byteLength;return e}async function Kue(t,e,r,n,i){if(e>r)return r;if(t.Data==null||!Or.unmarshal(t.Data).isDirectory())return e;for(const a of t.Links){let o=a.Name??"";if(o=o.substring(2),e+=o.length,e+=a.Hash.bytes.byteLength,a.Hash.code===Cl){const c=await n.get(a.Hash,i),u=Rc(c);e+=await Kue(u,e,r,n,i)}}return e}const el=$s("helia:unixfs:components:utils:add-link");async function HD(t,e,r,n){if(t.node.Data==null)throw new fm("Invalid parent passed to addLink");if(Or.unmarshal(t.node.Data).type==="hamt-sharded-directory")return el("adding link to sharded directory"),pit(t,e,r,n);el(`adding ${e.Name} (${e.Hash}) to regular directory`);const s=await hit(t,e,r,n);if(await Gue(s.node,r,n.shardSplitThresholdBytes,n)){el("converting directory to sharded directory");const a=await dit(s,r);s.cid=a.cid,s.node=Rc(await r.get(a.cid,n))}return s}const dit=async(t,e)=>{if(t.node.Data==null)throw new fm("Invalid parent passed to convertToShardedDirectory");const r=Or.unmarshal(t.node.Data),n=await uit(e,t.node.Links.map(i=>({name:i.Name??"",size:BigInt(i.Tsize??0),cid:i.Hash})),{mode:r.mode,mtime:r.mtime,cidVersion:t.cid.version});return el(`converted directory to sharded directory ${n.cid}`),n},hit=async(t,e,r,n)=>{const i=t.node.Links.filter(l=>{const f=l.Name===e.Name;if(f&&!n.allowOverwriting)throw new $ue;return!f});if(i.push(e),t.node.Data==null)throw new td("Parent node with no data passed to addToDirectory");const s=Or.unmarshal(t.node.Data);let a;if(s.mtime!=null){const l=Date.now(),f=Math.floor(l/1e3);s.mtime={secs:BigInt(f),nsecs:(l-f*1e3)*1e3},a=s.marshal()}else a=t.node.Data;t.node=to({Data:a,Links:i});const o=li(t.node),c=await ci.digest(o),u=mt.create(t.cid.version,Cl,c);return await r.put(u,o),{node:t.node,cid:u}},pit=async(t,e,r,n)=>{const{path:i,hash:s}=await Wue(t.cid,e.Name,r,n),a=i[i.length-1];if(a==null)throw new Error("Invalid HAMT, could not generate path");const o=a.prefix,c=parseInt(o,16);el("next prefix for %s is %s",e.Name,o);const u=`${o}${e.Name}`,l=a.node.Links.find(f=>(f.Name??"").startsWith(o));if(l!=null)if(el("link %s was present in shard",u),l.Name===u){if(!n.allowOverwriting)throw new $ue;el("overwriting %s in sub-shard",e.Name),a.node.Links=a.node.Links.filter(f=>f.Name!==u),a.node.Links.push({Name:u,Hash:e.Hash,Tsize:e.Tsize})}else{if(l.Name?.length===2)throw new Error("Existing link was sub-shard?!");{el("prefix %s already exists, creating new sub-shard",o);const f=a.node.Links.findIndex(g=>g.Name?.startsWith(o)),d=a.node.Links.splice(f,1)[0],h=(d.Name??"").substring(2),p=Vue(zD)(tt(h));for(let g=0;g<i.length;g++)await p.take(jg);for(;;){const g=await p.take(jg),v=rP(g);d.Name=`${v}${h}`;const y=await s.take(jg),b=rP(y);if(v===b){const x=new o6;x.set(y,!0),i.push({prefix:b,children:x,node:{Links:[]}});continue}const _=new o6;_.set(y,!0),_.set(g,!0),i.push({prefix:o,children:_,node:{Links:[d,{Name:`${b}${e.Name}`,Hash:e.Hash,Tsize:e.Tsize}]}});break}}}else el("link %s was not present in sub-shard",u),e.Name=u,a.node.Links.push(e),a.children.set(c,!0),el("adding %s to existing sub-shard",u);return Hue(i,r,n)};async function z5(t,e,r={}){const n=await wd(t,e,r);if(n.type!=="directory")throw new VD(`${t.toString()} was not a UnixFS directory`);return{cid:t,node:n.node}}async function WD(t,e,r,n){const i=await wd(t,r,n);if(i.type!=="directory"&&i.type!=="file"&&i.type!=="raw")throw new V5(`${t.toString()} was not a UnixFS node`);return{Name:e,Tsize:i.node instanceof Uint8Array?i.node.byteLength:mit(i.node),Hash:t}}function mit(t){const e=t.Links.reduce((r,n)=>r+(n.Tsize??0),0);return li(t).byteLength+e}const git=$s("helia:unixfs:components:utils:resolve");async function s2(t,e,r,n){if(e==null||e==="")return{cid:t};const i=`/ipfs/${t}${e==null?"":`/${e}`}`,s=await zv(Fue(i,r,n));if(s.length===0)throw new Fnt("Could not find path in directory");return git("resolved %s to %c",e,t),{cid:s[s.length-1].cid,path:e,segments:s}}async function g6(t,e,r,n){if(e.segments==null||e.segments.length===0)return t;let i=e.segments.pop();if(i==null)throw new Error("Insufficient segments");i.cid=t,e.segments.reverse();for(const s of e.segments){const[a,o]=await Promise.all([z5(s.cid,r,n),WD(i.cid,i.name,r,n)]);t=(await HD(a,o,r,{...n,allowOverwriting:!0,cidVersion:t.version})).cid,s.cid=t,i=s}return t}const vit=No.bind({ignoreUndefined:!0}),yit={};async function*bit(t,e,r={}){const n=vit(yit,r),i=await s2(t,n.path,e,n),s=await wd(i.cid,e,n);if(s.type!=="file"&&s.type!=="raw")throw new Lnt;if(s.content==null)throw new Uue;yield*s.content(n)}const a2=262144,wit=No.bind({ignoreUndefined:!0}),_it=$s("helia:unixfs:chmod"),xit={recursive:!1,shardSplitThresholdBytes:a2};async function Sit(t,e,r,n={}){const i=wit(xit,n),s=await s2(t,i.path,r,n);if(_it("chmod %c %d",s.cid,e),i.recursive){const d=await Un(async function*(){for await(const h of Lue(s.cid,r,n)){let m,p=[];if(h.type==="raw")m=new Or({type:"file",data:h.node});else if(h.type==="file"||h.type==="directory")m=h.unixfs,p=h.node.Links;else throw new V5;m.mode=e;const g={Data:m.marshal(),Links:p};yield{path:h.path,content:g}}},h=>n2(h,r,{...i,dagBuilder:async function*(m,p){for await(const g of m)yield async function(){const v=g.content,y=li(v),b=await dm(y,p,{...i,cidVersion:t.version});if(v.Data==null)throw new td(`${b} had no data`);const _=Or.unmarshal(v.Data);return{cid:b,size:BigInt(y.length),path:g.path,unixfs:_}}}}),async h=>j5(h));if(d==null)throw new jD(`Could not chmod ${s.cid.toString()}`);return g6(d.cid,s,r,i)}const a=await r.get(s.cid,n);let o,c=[];if(s.cid.code===Ro)o=new Or({type:"file",data:a});else{const d=Rc(a);if(d.Data==null)throw new td(`${s.cid.toString()} had no data`);c=d.Links,o=Or.unmarshal(d.Data)}o.mode=e;const u=li({Data:o.marshal(),Links:c}),l=await ci.digest(u),f=mt.create(s.cid.version,Cl,l);return await r.put(f,u),g6(f,s,r,i)}const Eit=No.bind({ignoreUndefined:!0}),kit=$s("helia:unixfs:cp"),Tit={force:!1,shardSplitThresholdBytes:a2};async function Ait(t,e,r,n,i={}){const s=Eit(Tit,i);if(r.includes("/"))throw new fm("Name must not have slashes");const[a,o]=await Promise.all([z5(e,n,s),WD(t,r,n,s)]);return kit('Adding %c as "%s" to %c',t,r,e),(await HD(a,o,n,{allowOverwriting:s.force,cidVersion:e.version,...s})).cid}const Cit=No.bind({ignoreUndefined:!0}),Iit={};async function*Pit(t,e,r={}){const n=Cit(Iit,r),i=await s2(t,n.path,e,n),s=await wd(i.cid,e);if(s.type==="file"||s.type==="raw"){yield s;return}if(s.content==null)throw new Uue;if(s.type!=="directory")throw new VD;yield*s.content({offset:r.offset,length:r.length})}const Rit=No.bind({ignoreUndefined:!0}),LW=$s("helia:unixfs:mkdir"),Oit={cidVersion:1,force:!1,shardSplitThresholdBytes:a2};async function Bit(t,e,r,n={}){const i=Rit(Oit,n);if(e.includes("/"))throw new fm("Path must not have slashes");if((await wd(t,r,n)).type!=="directory")throw new VD(`${t.toString()} was not a UnixFS directory`);LW("creating %s",e);const o={Data:new Or({type:"directory",mode:i.mode,mtime:i.mtime}).marshal(),Links:[]},c=li(o),u=await ci.digest(c),l=mt.create(i.cidVersion,Cl,u);await r.put(l,c);const[f,d]=await Promise.all([z5(t,r,i),WD(l,e,r,i)]);return LW("adding empty dir called %s to %c",e,t),(await HD(f,d,r,{...i,allowOverwriting:i.force})).cid}const x3=$s("helia:unixfs:utils:remove-link");async function Dit(t,e,r,n){if(t.node.Data==null)throw new td("Parent node had no data");if(Or.unmarshal(t.node.Data).type==="hamt-sharded-directory"){x3(`removing ${e} from sharded directory`);const s=await Nit(t,e,r,n);return await Gue(s.node,r,n.shardSplitThresholdBytes,n)?s:(x3("converting shard to flat directory %c",t.cid),Fit(s,r,n))}return x3(`removing link ${e} regular directory`),Mit(t,e,r,n)}const Mit=async(t,e,r,n)=>{t.node.Links=t.node.Links.filter(a=>a.Name!==e);const i=li(t.node),s=await dm(i,r,{...n,cidVersion:t.cid.version});return x3(`Updated regular directory ${s}`),{node:t.node,cid:s}},Nit=async(t,e,r,n)=>{const{path:i}=await Wue(t.cid,e,r,n),s=i[i.length-1];if(s==null)throw new Error("Invalid HAMT, could not generate path");const a=s.node.Links.filter(u=>(u.Name??"").substring(2)===e).map(u=>u.Name).pop();if(a==null)throw new Error("File not found");const o=a.substring(0,2),c=parseInt(o,16);if(s.node.Links=s.node.Links.filter(u=>u.Name!==a),s.children.unset(c),s.node.Links.length===1)for(;i.length!==1;){const u=i[i.length-1];if(u==null||u.node.Links.length>1)break;i.pop();const l=i[i.length-1];if(l==null)break;const f=u.node.Links[0];l.node.Links=l.node.Links.filter(d=>!(d.Name??"").startsWith(l.prefix)),l.node.Links.push({Hash:f.Hash,Name:`${l.prefix}${(f.Name??"").substring(2)}`,Tsize:f.Tsize})}return Hue(i,r,n)},Fit=async(t,e,r)=>{if(t.node.Data==null)throw new fm("Invalid parent passed to convertToFlatDirectory");const n={Links:[]},i=await wd(t.cid,e);if(i.type!=="directory")throw new Error("Unexpected node type");for await(const c of i.content()){let u=0;c.node instanceof Uint8Array?u=c.node.byteLength:u=li(c.node).length,n.Links.push({Hash:c.cid,Name:c.name,Tsize:u})}const s=Or.unmarshal(t.node.Data);n.Data=new Or({type:"directory",mode:s.mode,mtime:s.mtime}).marshal();const a=li(to(n));return{cid:await dm(a,e,{codec:r2,cidVersion:t.cid.version,signal:r.signal}),node:n}},Lit=No.bind({ignoreUndefined:!0}),$it=$s("helia:unixfs:rm"),Uit={shardSplitThresholdBytes:a2};async function jit(t,e,r,n={}){const i=Lit(Uit,n);if(e.includes("/"))throw new fm("Name must not have slashes");const s=await z5(t,r,i);return $it("Removing %s from %c",e,t),(await Dit(s,e,r,{...i,cidVersion:t.version})).cid}const Vit=No.bind({ignoreUndefined:!0}),qit=$s("helia:unixfs:stat"),zit={};async function Hit(t,e,r={}){const n=Vit(zit,r),i=await s2(t,r.path,e,n);qit("stat %c",i.cid);const s=await wd(i.cid,e,n);if(s.type!=="file"&&s.type!=="directory"&&s.type!=="raw")throw new V5;let a=0n,o=0n,c=0n,u=0n,l=0,f,d;const h=s.type;let m;if(s.type==="raw"&&(a=BigInt(s.node.byteLength),o=BigInt(s.node.byteLength),c=BigInt(s.node.byteLength),u=BigInt(s.node.byteLength),l=1),s.type==="directory"&&(a=0n,o=BigInt(s.unixfs.marshal().byteLength),c=0n,u=o,l=1,f=s.unixfs.mode,d=s.unixfs.mtime,m=s.unixfs),s.type==="file"){const p=await Xue(i.cid,e,n);a=s.unixfs.fileSize(),o=BigInt((s.node.Data?.byteLength??0)+s.node.Links.reduce((g,v)=>g+(v.Tsize??0),0)),c=BigInt(p.localFileSize),u=BigInt(p.localDagSize),l=p.blocks,f=s.unixfs.mode,d=s.unixfs.mtime,m=s.unixfs}return{cid:i.cid,mode:f,mtime:d,fileSize:a,dagSize:o,localFileSize:c,localDagSize:u,blocks:l,type:h,unixfs:m}}async function Xue(t,e,r){const n={localFileSize:0,localDagSize:0,blocks:0};if(await e.has(t,r)){const i=await e.get(t,r);if(n.blocks++,n.localDagSize+=i.byteLength,t.code===Ro)n.localFileSize+=i.byteLength;else if(t.code===Cl){const s=Rc(i);if(s.Links.length>0)for(const a of s.Links){const o=await Xue(a.Hash,e,r);n.localFileSize+=o.localFileSize,n.localDagSize+=o.localDagSize,n.blocks+=o.blocks}else{if(s.Data==null)throw new td(`PBNode ${t.toString()} had no data`);const a=Or.unmarshal(s.Data);if(a.data==null)throw new td(`UnixFS node ${t.toString()} had no data`);n.localFileSize+=a.data.byteLength??0}}else throw new jD(`${t.toString()} was neither DAG_PB nor RAW`)}return n}const Wit=No.bind({ignoreUndefined:!0}),Git=$s("helia:unixfs:touch"),Kit={recursive:!1,shardSplitThresholdBytes:a2};async function Xit(t,e,r={}){const n=Wit(Kit,r),i=await s2(t,n.path,e,n),s=n.mtime??{secs:BigInt(Math.round(Date.now()/1e3)),nsecs:0};if(Git("touch %c %o",i.cid,s),n.recursive){const d=await Un(async function*(){for await(const h of Lue(i.cid,e)){let m,p;if(h.type==="raw")m=new Or({data:h.node}),p=[];else if(h.type==="file"||h.type==="directory")m=h.unixfs,p=h.node.Links;else throw new V5;m.mtime=s;const g={Data:m.marshal(),Links:p};yield{path:h.path,content:g}}},h=>n2(h,e,{...n,dagBuilder:async function*(m,p){for await(const g of m)yield async function(){const v=g.content,y=li(v),b=await dm(y,p,{...n,cidVersion:t.version});if(v.Data==null)throw new td(`${b} had no data`);const _=Or.unmarshal(v.Data);return{cid:b,size:BigInt(y.length),path:g.path,unixfs:_}}}}),async h=>j5(h));if(d==null)throw new jD(`Could not chmod ${i.cid.toString()}`);return g6(d.cid,i,e,n)}const a=await e.get(i.cid,r);let o,c=[];if(i.cid.code===Ro)o=new Or({data:a});else{const d=Rc(a);if(c=d.Links,d.Data==null)throw new td(`${i.cid.toString()} had no data`);o=Or.unmarshal(d.Data)}o.mtime=s;const u=li({Data:o.marshal(),Links:c}),l=await ci.digest(u),f=mt.create(i.cid.version,Cl,l);return await e.put(f,u),g6(f,i,e,n)}class Yit{components;constructor(e){this.components=e}async*addAll(e,r={}){yield*Hrt(e,this.components.blockstore,r)}async addBytes(e,r={}){return Wrt(e,this.components.blockstore,r)}async addByteStream(e,r={}){return Grt(e,this.components.blockstore,r)}async addFile(e,r={}){return Krt(e,this.components.blockstore,r)}async addDirectory(e={},r={}){return Xrt(e,this.components.blockstore,r)}async*cat(e,r={}){yield*bit(e,this.components.blockstore,r)}async chmod(e,r,n={}){return Sit(e,r,this.components.blockstore,n)}async cp(e,r,n,i={}){return Ait(e,r,n,this.components.blockstore,i)}async*ls(e,r={}){yield*Pit(e,this.components.blockstore,r)}async mkdir(e,r,n={}){return Bit(e,r,this.components.blockstore,n)}async rm(e,r,n={}){return jit(e,r,this.components.blockstore,n)}async stat(e,r={}){return Hit(e,this.components.blockstore,r)}async touch(e,r={}){return Xit(e,this.components.blockstore,r)}}function $W(t){return new Yit(t)}var pE={},J0={},mE={},gE={},vE,UW;function Zit(){if(UW)return vE;UW=1;var t=gs(),e=Jte(),r=e(/^\s*(?:function)?\*/),n=fd()(),i=S8(),s=t("Object.prototype.toString"),a=t("Function.prototype.toString"),o=function(){if(!n)return!1;try{return Function("return function*() {}")()}catch{}},c;return vE=function(l){if(typeof l!="function")return!1;if(r(a(l)))return!0;if(!n){var f=s(l);return f==="[object GeneratorFunction]"}if(!i)return!1;if(typeof c>"u"){var d=o();c=d?i(d):!1}return i(l)===c},vE}var yE,jW;function Jit(){if(jW)return yE;jW=1;var t=XR();return yE=function(r){return!!t(r)},yE}var VW;function Qit(){return VW||(VW=1,function(t){var e=KR(),r=Zit(),n=XR(),i=Jit();function s(ie){return ie.call.bind(ie)}var a=typeof BigInt<"u",o=typeof Symbol<"u",c=s(Object.prototype.toString),u=s(Number.prototype.valueOf),l=s(String.prototype.valueOf),f=s(Boolean.prototype.valueOf);if(a)var d=s(BigInt.prototype.valueOf);if(o)var h=s(Symbol.prototype.valueOf);function m(ie,le){if(typeof ie!="object")return!1;try{return le(ie),!0}catch{return!1}}t.isArgumentsObject=e,t.isGeneratorFunction=r,t.isTypedArray=i;function p(ie){return typeof Promise<"u"&&ie instanceof Promise||ie!==null&&typeof ie=="object"&&typeof ie.then=="function"&&typeof ie.catch=="function"}t.isPromise=p;function g(ie){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(ie):i(ie)||L(ie)}t.isArrayBufferView=g;function v(ie){return n(ie)==="Uint8Array"}t.isUint8Array=v;function y(ie){return n(ie)==="Uint8ClampedArray"}t.isUint8ClampedArray=y;function b(ie){return n(ie)==="Uint16Array"}t.isUint16Array=b;function _(ie){return n(ie)==="Uint32Array"}t.isUint32Array=_;function x(ie){return n(ie)==="Int8Array"}t.isInt8Array=x;function E(ie){return n(ie)==="Int16Array"}t.isInt16Array=E;function k(ie){return n(ie)==="Int32Array"}t.isInt32Array=k;function B(ie){return n(ie)==="Float32Array"}t.isFloat32Array=B;function D(ie){return n(ie)==="Float64Array"}t.isFloat64Array=D;function z(ie){return n(ie)==="BigInt64Array"}t.isBigInt64Array=z;function U(ie){return n(ie)==="BigUint64Array"}t.isBigUint64Array=U;function S(ie){return c(ie)==="[object Map]"}S.working=typeof Map<"u"&&S(new Map);function T(ie){return typeof Map>"u"?!1:S.working?S(ie):ie instanceof Map}t.isMap=T;function w(ie){return c(ie)==="[object Set]"}w.working=typeof Set<"u"&&w(new Set);function A(ie){return typeof Set>"u"?!1:w.working?w(ie):ie instanceof Set}t.isSet=A;function F(ie){return c(ie)==="[object WeakMap]"}F.working=typeof WeakMap<"u"&&F(new WeakMap);function P(ie){return typeof WeakMap>"u"?!1:F.working?F(ie):ie instanceof WeakMap}t.isWeakMap=P;function O(ie){return c(ie)==="[object WeakSet]"}O.working=typeof WeakSet<"u"&&O(new WeakSet);function R(ie){return O(ie)}t.isWeakSet=R;function I(ie){return c(ie)==="[object ArrayBuffer]"}I.working=typeof ArrayBuffer<"u"&&I(new ArrayBuffer);function C(ie){return typeof ArrayBuffer>"u"?!1:I.working?I(ie):ie instanceof ArrayBuffer}t.isArrayBuffer=C;function M(ie){return c(ie)==="[object DataView]"}M.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&M(new DataView(new ArrayBuffer(1),0,1));function L(ie){return typeof DataView>"u"?!1:M.working?M(ie):ie instanceof DataView}t.isDataView=L;var N=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:void 0;function H(ie){return c(ie)==="[object SharedArrayBuffer]"}function W(ie){return typeof N>"u"?!1:(typeof H.working>"u"&&(H.working=H(new N)),H.working?H(ie):ie instanceof N)}t.isSharedArrayBuffer=W;function q(ie){return c(ie)==="[object AsyncFunction]"}t.isAsyncFunction=q;function G(ie){return c(ie)==="[object Map Iterator]"}t.isMapIterator=G;function Y(ie){return c(ie)==="[object Set Iterator]"}t.isSetIterator=Y;function te(ie){return c(ie)==="[object Generator]"}t.isGeneratorObject=te;function Q(ie){return c(ie)==="[object WebAssembly.Module]"}t.isWebAssemblyCompiledModule=Q;function j(ie){return m(ie,u)}t.isNumberObject=j;function Z(ie){return m(ie,l)}t.isStringObject=Z;function V(ie){return m(ie,f)}t.isBooleanObject=V;function ne(ie){return a&&m(ie,d)}t.isBigIntObject=ne;function se(ie){return o&&m(ie,h)}t.isSymbolObject=se;function J(ie){return j(ie)||Z(ie)||V(ie)||ne(ie)||se(ie)}t.isBoxedPrimitive=J;function ee(ie){return typeof Uint8Array<"u"&&(C(ie)||W(ie))}t.isAnyArrayBuffer=ee,["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(ie){Object.defineProperty(t,ie,{enumerable:!1,value:function(){throw new Error(ie+" is not supported in userland")}})})}(gE)),gE}var bE,qW;function est(){return qW||(qW=1,bE=function(e){return e&&typeof e=="object"&&typeof e.copy=="function"&&typeof e.fill=="function"&&typeof e.readUInt8=="function"}),bE}var zW;function tst(){return zW||(zW=1,function(t){var e={},r=Object.getOwnPropertyDescriptors||function(N){for(var H=Object.keys(N),W={},q=0;q<H.length;q++)W[H[q]]=Object.getOwnPropertyDescriptor(N,H[q]);return W},n=/%[sdj%]/g;t.format=function(L){if(!E(L)){for(var N=[],H=0;H<arguments.length;H++)N.push(o(arguments[H]));return N.join(" ")}for(var H=1,W=arguments,q=W.length,G=String(L).replace(n,function(te){if(te==="%%")return"%";if(H>=q)return te;switch(te){case"%s":return String(W[H++]);case"%d":return Number(W[H++]);case"%j":try{return JSON.stringify(W[H++])}catch{return"[Circular]"}default:return te}}),Y=W[H];H<q;Y=W[++H])b(Y)||!z(Y)?G+=" "+Y:G+=" "+o(Y);return G},t.deprecate=function(L,N){if(typeof fn<"u"&&fn.noDeprecation===!0)return L;if(typeof fn>"u")return function(){return t.deprecate(L,N).apply(this,arguments)};var H=!1;function W(){if(!H){if(fn.throwDeprecation)throw new Error(N);fn.traceDeprecation?console.trace(N):console.error(N),H=!0}return L.apply(this,arguments)}return W};var i={},s=/^$/;if(e.NODE_DEBUG){var a=e.NODE_DEBUG;a=a.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),s=new RegExp("^"+a+"$","i")}t.debuglog=function(L){if(L=L.toUpperCase(),!i[L])if(s.test(L)){var N=fn.pid;i[L]=function(){var H=t.format.apply(t,arguments);console.error("%s %d: %s",L,N,H)}}else i[L]=function(){};return i[L]};function o(L,N){var H={seen:[],stylize:u};return arguments.length>=3&&(H.depth=arguments[2]),arguments.length>=4&&(H.colors=arguments[3]),y(N)?H.showHidden=N:N&&t._extend(H,N),B(H.showHidden)&&(H.showHidden=!1),B(H.depth)&&(H.depth=2),B(H.colors)&&(H.colors=!1),B(H.customInspect)&&(H.customInspect=!0),H.colors&&(H.stylize=c),f(H,L,H.depth)}t.inspect=o,o.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},o.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function c(L,N){var H=o.styles[N];return H?"\x1B["+o.colors[H][0]+"m"+L+"\x1B["+o.colors[H][1]+"m":L}function u(L,N){return L}function l(L){var N={};return L.forEach(function(H,W){N[H]=!0}),N}function f(L,N,H){if(L.customInspect&&N&&T(N.inspect)&&N.inspect!==t.inspect&&!(N.constructor&&N.constructor.prototype===N)){var W=N.inspect(H,L);return E(W)||(W=f(L,W,H)),W}var q=d(L,N);if(q)return q;var G=Object.keys(N),Y=l(G);if(L.showHidden&&(G=Object.getOwnPropertyNames(N)),S(N)&&(G.indexOf("message")>=0||G.indexOf("description")>=0))return h(N);if(G.length===0){if(T(N)){var te=N.name?": "+N.name:"";return L.stylize("[Function"+te+"]","special")}if(D(N))return L.stylize(RegExp.prototype.toString.call(N),"regexp");if(U(N))return L.stylize(Date.prototype.toString.call(N),"date");if(S(N))return h(N)}var Q="",j=!1,Z=["{","}"];if(v(N)&&(j=!0,Z=["[","]"]),T(N)){var V=N.name?": "+N.name:"";Q=" [Function"+V+"]"}if(D(N)&&(Q=" "+RegExp.prototype.toString.call(N)),U(N)&&(Q=" "+Date.prototype.toUTCString.call(N)),S(N)&&(Q=" "+h(N)),G.length===0&&(!j||N.length==0))return Z[0]+Q+Z[1];if(H<0)return D(N)?L.stylize(RegExp.prototype.toString.call(N),"regexp"):L.stylize("[Object]","special");L.seen.push(N);var ne;return j?ne=m(L,N,H,Y,G):ne=G.map(function(se){return p(L,N,H,Y,se,j)}),L.seen.pop(),g(ne,Q,Z)}function d(L,N){if(B(N))return L.stylize("undefined","undefined");if(E(N)){var H="'"+JSON.stringify(N).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return L.stylize(H,"string")}if(x(N))return L.stylize(""+N,"number");if(y(N))return L.stylize(""+N,"boolean");if(b(N))return L.stylize("null","null")}function h(L){return"["+Error.prototype.toString.call(L)+"]"}function m(L,N,H,W,q){for(var G=[],Y=0,te=N.length;Y<te;++Y)R(N,String(Y))?G.push(p(L,N,H,W,String(Y),!0)):G.push("");return q.forEach(function(Q){Q.match(/^\d+$/)||G.push(p(L,N,H,W,Q,!0))}),G}function p(L,N,H,W,q,G){var Y,te,Q;if(Q=Object.getOwnPropertyDescriptor(N,q)||{value:N[q]},Q.get?Q.set?te=L.stylize("[Getter/Setter]","special"):te=L.stylize("[Getter]","special"):Q.set&&(te=L.stylize("[Setter]","special")),R(W,q)||(Y="["+q+"]"),te||(L.seen.indexOf(Q.value)<0?(b(H)?te=f(L,Q.value,null):te=f(L,Q.value,H-1),te.indexOf(`
`)>-1&&(G?te=te.split(`
`).map(function(j){return"  "+j}).join(`
`).slice(2):te=`
`+te.split(`
`).map(function(j){return"   "+j}).join(`
`))):te=L.stylize("[Circular]","special")),B(Y)){if(G&&q.match(/^\d+$/))return te;Y=JSON.stringify(""+q),Y.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(Y=Y.slice(1,-1),Y=L.stylize(Y,"name")):(Y=Y.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),Y=L.stylize(Y,"string"))}return Y+": "+te}function g(L,N,H){var W=L.reduce(function(q,G){return G.indexOf(`
`)>=0,q+G.replace(/\u001b\[\d\d?m/g,"").length+1},0);return W>60?H[0]+(N===""?"":N+`
 `)+" "+L.join(`,
  `)+" "+H[1]:H[0]+N+" "+L.join(", ")+" "+H[1]}t.types=Qit();function v(L){return Array.isArray(L)}t.isArray=v;function y(L){return typeof L=="boolean"}t.isBoolean=y;function b(L){return L===null}t.isNull=b;function _(L){return L==null}t.isNullOrUndefined=_;function x(L){return typeof L=="number"}t.isNumber=x;function E(L){return typeof L=="string"}t.isString=E;function k(L){return typeof L=="symbol"}t.isSymbol=k;function B(L){return L===void 0}t.isUndefined=B;function D(L){return z(L)&&A(L)==="[object RegExp]"}t.isRegExp=D,t.types.isRegExp=D;function z(L){return typeof L=="object"&&L!==null}t.isObject=z;function U(L){return z(L)&&A(L)==="[object Date]"}t.isDate=U,t.types.isDate=U;function S(L){return z(L)&&(A(L)==="[object Error]"||L instanceof Error)}t.isError=S,t.types.isNativeError=S;function T(L){return typeof L=="function"}t.isFunction=T;function w(L){return L===null||typeof L=="boolean"||typeof L=="number"||typeof L=="string"||typeof L=="symbol"||typeof L>"u"}t.isPrimitive=w,t.isBuffer=est();function A(L){return Object.prototype.toString.call(L)}function F(L){return L<10?"0"+L.toString(10):L.toString(10)}var P=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function O(){var L=new Date,N=[F(L.getHours()),F(L.getMinutes()),F(L.getSeconds())].join(":");return[L.getDate(),P[L.getMonth()],N].join(" ")}t.log=function(){console.log("%s - %s",O(),t.format.apply(t,arguments))},t.inherits=lr(),t._extend=function(L,N){if(!N||!z(N))return L;for(var H=Object.keys(N),W=H.length;W--;)L[H[W]]=N[H[W]];return L};function R(L,N){return Object.prototype.hasOwnProperty.call(L,N)}var I=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;t.promisify=function(N){if(typeof N!="function")throw new TypeError('The "original" argument must be of type Function');if(I&&N[I]){var H=N[I];if(typeof H!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(H,I,{value:H,enumerable:!1,writable:!1,configurable:!0}),H}function H(){for(var W,q,G=new Promise(function(Q,j){W=Q,q=j}),Y=[],te=0;te<arguments.length;te++)Y.push(arguments[te]);Y.push(function(Q,j){Q?q(Q):W(j)});try{N.apply(this,Y)}catch(Q){q(Q)}return G}return Object.setPrototypeOf(H,Object.getPrototypeOf(N)),I&&Object.defineProperty(H,I,{value:H,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(H,r(N))},t.promisify.custom=I;function C(L,N){if(!L){var H=new Error("Promise was rejected with a falsy value");H.reason=L,L=H}return N(L)}function M(L){if(typeof L!="function")throw new TypeError('The "original" argument must be of type Function');function N(){for(var H=[],W=0;W<arguments.length;W++)H.push(arguments[W]);var q=H.pop();if(typeof q!="function")throw new TypeError("The last argument must be of type Function");var G=this,Y=function(){return q.apply(G,arguments)};L.apply(this,H).then(function(te){fn.nextTick(Y.bind(null,null,te))},function(te){fn.nextTick(C.bind(null,te,Y))})}return Object.setPrototypeOf(N,Object.getPrototypeOf(L)),Object.defineProperties(N,r(L)),N}t.callbackify=M}(mE)),mE}var _d=tst();function N0(){this.head=null,this.tail=null,this.length=0}N0.prototype.push=function(t){var e={data:t,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length};N0.prototype.unshift=function(t){var e={data:t,next:this.head};this.length===0&&(this.tail=e),this.head=e,++this.length};N0.prototype.shift=function(){if(this.length!==0){var t=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,t}};N0.prototype.clear=function(){this.head=this.tail=null,this.length=0};N0.prototype.join=function(t){if(this.length===0)return"";for(var e=this.head,r=""+e.data;e=e.next;)r+=t+e.data;return r};N0.prototype.concat=function(t){if(this.length===0)return kh.Buffer.alloc(0);if(this.length===1)return this.head.data;for(var e=kh.Buffer.allocUnsafe(t>>>0),r=this.head,n=0;r;)r.data.copy(e,n),n+=r.data.length,r=r.next;return e};var wE={},vw={exports:{}},HW;function H5(){return HW||(HW=1,function(t,e){var r=_c(),n=r.Buffer;function i(a,o){for(var c in a)o[c]=a[c]}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?t.exports=r:(i(r,e),e.Buffer=s);function s(a,o,c){return n(a,o,c)}i(n,s),s.from=function(a,o,c){if(typeof a=="number")throw new TypeError("Argument must not be a number");return n(a,o,c)},s.alloc=function(a,o,c){if(typeof a!="number")throw new TypeError("Argument must be a number");var u=n(a);return o!==void 0?typeof c=="string"?u.fill(o,c):u.fill(o):u.fill(0),u},s.allocUnsafe=function(a){if(typeof a!="number")throw new TypeError("Argument must be a number");return n(a)},s.allocUnsafeSlow=function(a){if(typeof a!="number")throw new TypeError("Argument must be a number");return r.SlowBuffer(a)}}(vw,vw.exports)),vw.exports}var WW;function v6(){if(WW)return wE;WW=1;var t=H5().Buffer,e=t.isEncoding||function(v){switch(v=""+v,v&&v.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function r(v){if(!v)return"utf8";for(var y;;)switch(v){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return v;default:if(y)return;v=(""+v).toLowerCase(),y=!0}}function n(v){var y=r(v);if(typeof y!="string"&&(t.isEncoding===e||!e(v)))throw new Error("Unknown encoding: "+v);return y||v}wE.StringDecoder=i;function i(v){this.encoding=n(v);var y;switch(this.encoding){case"utf16le":this.text=f,this.end=d,y=4;break;case"utf8":this.fillLast=c,y=4;break;case"base64":this.text=h,this.end=m,y=3;break;default:this.write=p,this.end=g;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=t.allocUnsafe(y)}i.prototype.write=function(v){if(v.length===0)return"";var y,b;if(this.lastNeed){if(y=this.fillLast(v),y===void 0)return"";b=this.lastNeed,this.lastNeed=0}else b=0;return b<v.length?y?y+this.text(v,b):this.text(v,b):y||""},i.prototype.end=l,i.prototype.text=u,i.prototype.fillLast=function(v){if(this.lastNeed<=v.length)return v.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);v.copy(this.lastChar,this.lastTotal-this.lastNeed,0,v.length),this.lastNeed-=v.length};function s(v){return v<=127?0:v>>5===6?2:v>>4===14?3:v>>3===30?4:v>>6===2?-1:-2}function a(v,y,b){var _=y.length-1;if(_<b)return 0;var x=s(y[_]);return x>=0?(x>0&&(v.lastNeed=x-1),x):--_<b||x===-2?0:(x=s(y[_]),x>=0?(x>0&&(v.lastNeed=x-2),x):--_<b||x===-2?0:(x=s(y[_]),x>=0?(x>0&&(x===2?x=0:v.lastNeed=x-3),x):0))}function o(v,y,b){if((y[0]&192)!==128)return v.lastNeed=0,"";if(v.lastNeed>1&&y.length>1){if((y[1]&192)!==128)return v.lastNeed=1,"";if(v.lastNeed>2&&y.length>2&&(y[2]&192)!==128)return v.lastNeed=2,""}}function c(v){var y=this.lastTotal-this.lastNeed,b=o(this,v);if(b!==void 0)return b;if(this.lastNeed<=v.length)return v.copy(this.lastChar,y,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);v.copy(this.lastChar,y,0,v.length),this.lastNeed-=v.length}function u(v,y){var b=a(this,v,y);if(!this.lastNeed)return v.toString("utf8",y);this.lastTotal=b;var _=v.length-(b-this.lastNeed);return v.copy(this.lastChar,0,_),v.toString("utf8",y,_)}function l(v){var y=v&&v.length?this.write(v):"";return this.lastNeed?y+"":y}function f(v,y){if((v.length-y)%2===0){var b=v.toString("utf16le",y);if(b){var _=b.charCodeAt(b.length-1);if(_>=55296&&_<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=v[v.length-2],this.lastChar[1]=v[v.length-1],b.slice(0,-1)}return b}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=v[v.length-1],v.toString("utf16le",y,v.length-1)}function d(v){var y=v&&v.length?this.write(v):"";if(this.lastNeed){var b=this.lastTotal-this.lastNeed;return y+this.lastChar.toString("utf16le",0,b)}return y}function h(v,y){var b=(v.length-y)%3;return b===0?v.toString("base64",y):(this.lastNeed=3-b,this.lastTotal=3,b===1?this.lastChar[0]=v[v.length-1]:(this.lastChar[0]=v[v.length-2],this.lastChar[1]=v[v.length-1]),v.toString("base64",y,v.length-b))}function m(v){var y=v&&v.length?this.write(v):"";return this.lastNeed?y+this.lastChar.toString("base64",0,3-this.lastNeed):y}function p(v){return v.toString(this.encoding)}function g(v){return v&&v.length?this.write(v):""}return wE}var Yue=v6();Yn.ReadableState=Zue;var sn=_d.debuglog("stream");_d.inherits(Yn,c0);function rst(t,e,r){if(typeof t.prependListener=="function")return t.prependListener(e,r);!t._events||!t._events[e]?t.on(e,r):Array.isArray(t._events[e])?t._events[e].unshift(r):t._events[e]=[r,t._events[e]]}function nst(t,e){return t.listeners(e).length}function Zue(t,e){t=t||{},this.objectMode=!!t.objectMode,e instanceof ro&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var r=t.highWaterMark,n=this.objectMode?16:16*1024;this.highWaterMark=r||r===0?r:n,this.highWaterMark=~~this.highWaterMark,this.buffer=new N0,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(this.decoder=new Yue.StringDecoder(t.encoding),this.encoding=t.encoding)}function Yn(t){if(!(this instanceof Yn))return new Yn(t);this._readableState=new Zue(t,this),this.readable=!0,t&&typeof t.read=="function"&&(this._read=t.read),c0.call(this)}Yn.prototype.push=function(t,e){var r=this._readableState;return!r.objectMode&&typeof t=="string"&&(e=e||r.defaultEncoding,e!==r.encoding&&(t=Me.from(t,e),e="")),Jue(this,r,t,e,!1)};Yn.prototype.unshift=function(t){var e=this._readableState;return Jue(this,e,t,"",!0)};Yn.prototype.isPaused=function(){return this._readableState.flowing===!1};function Jue(t,e,r,n,i){var s=ast(e,r);if(s)t.emit("error",s);else if(r===null)e.reading=!1,ost(t,e);else if(e.objectMode||r&&r.length>0)if(e.ended&&!i){var a=new Error("stream.push() after EOF");t.emit("error",a)}else if(e.endEmitted&&i){var o=new Error("stream.unshift() after end event");t.emit("error",o)}else{var c;e.decoder&&!i&&!n&&(r=e.decoder.write(r),c=!e.objectMode&&r.length===0),i||(e.reading=!1),c||(e.flowing&&e.length===0&&!e.sync?(t.emit("data",r),t.read(0)):(e.length+=e.objectMode?1:r.length,i?e.buffer.unshift(r):e.buffer.push(r),e.needReadable&&W5(t))),cst(t,e)}else i||(e.reading=!1);return ist(e)}function ist(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||t.length===0)}Yn.prototype.setEncoding=function(t){return this._readableState.decoder=new Yue.StringDecoder(t),this._readableState.encoding=t,this};var GW=8388608;function sst(t){return t>=GW?t=GW:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}function KW(t,e){return t<=0||e.length===0&&e.ended?0:e.objectMode?1:t!==t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=sst(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}Yn.prototype.read=function(t){sn("read",t),t=parseInt(t,10);var e=this._readableState,r=t;if(t!==0&&(e.emittedReadable=!1),t===0&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return sn("read: emitReadable",e.length,e.ended),e.length===0&&e.ended?_E(this):W5(this),null;if(t=KW(t,e),t===0&&e.ended)return e.length===0&&_E(this),null;var n=e.needReadable;sn("need readable",n),(e.length===0||e.length-t<e.highWaterMark)&&(n=!0,sn("length less than watermark",n)),e.ended||e.reading?(n=!1,sn("reading or ended",n)):n&&(sn("do read"),e.reading=!0,e.sync=!0,e.length===0&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=KW(r,e)));var i;return t>0?i=Que(t,e):i=null,i===null?(e.needReadable=!0,t=0):e.length-=t,e.length===0&&(e.ended||(e.needReadable=!0),r!==t&&e.ended&&_E(this)),i!==null&&this.emit("data",i),i};function ast(t,e){var r=null;return!Me.isBuffer(e)&&typeof e!="string"&&e!==null&&e!==void 0&&!t.objectMode&&(r=new TypeError("Invalid non-string/buffer chunk")),r}function ost(t,e){if(!e.ended){if(e.decoder){var r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length)}e.ended=!0,W5(t)}}function W5(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(sn("emitReadable",e.flowing),e.emittedReadable=!0,e.sync?no(XW,t):XW(t))}function XW(t){sn("emit readable"),t.emit("readable"),GD(t)}function cst(t,e){e.readingMore||(e.readingMore=!0,no(lst,t,e))}function lst(t,e){for(var r=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(sn("maybeReadMore read 0"),t.read(0),r!==e.length);)r=e.length;e.readingMore=!1}Yn.prototype._read=function(t){this.emit("error",new Error("not implemented"))};Yn.prototype.pipe=function(t,e){var r=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=t;break;case 1:n.pipes=[n.pipes,t];break;default:n.pipes.push(t);break}n.pipesCount+=1,sn("pipe count=%d opts=%j",n.pipesCount,e);var i=!e||e.end!==!1,s=i?o:l;n.endEmitted?no(s):r.once("end",s),t.on("unpipe",a);function a(v){sn("onunpipe"),v===r&&l()}function o(){sn("onend"),t.end()}var c=ust(r);t.on("drain",c);var u=!1;function l(){sn("cleanup"),t.removeListener("close",m),t.removeListener("finish",p),t.removeListener("drain",c),t.removeListener("error",h),t.removeListener("unpipe",a),r.removeListener("end",o),r.removeListener("end",l),r.removeListener("data",d),u=!0,n.awaitDrain&&(!t._writableState||t._writableState.needDrain)&&c()}var f=!1;r.on("data",d);function d(v){sn("ondata"),f=!1;var y=t.write(v);y===!1&&!f&&((n.pipesCount===1&&n.pipes===t||n.pipesCount>1&&efe(n.pipes,t)!==-1)&&!u&&(sn("false write response, pause",r._readableState.awaitDrain),r._readableState.awaitDrain++,f=!0),r.pause())}function h(v){sn("onerror",v),g(),t.removeListener("error",h),nst(t,"error")===0&&t.emit("error",v)}rst(t,"error",h);function m(){t.removeListener("finish",p),g()}t.once("close",m);function p(){sn("onfinish"),t.removeListener("close",m),g()}t.once("finish",p);function g(){sn("unpipe"),r.unpipe(t)}return t.emit("pipe",r),n.flowing||(sn("pipe resume"),r.resume()),t};function ust(t){return function(){var e=t._readableState;sn("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,e.awaitDrain===0&&t.listeners("data").length&&(e.flowing=!0,GD(t))}}Yn.prototype.unpipe=function(t){var e=this._readableState;if(e.pipesCount===0)return this;if(e.pipesCount===1)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this),this);if(!t){var r=e.pipes,n=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var i=0;i<n;i++)r[i].emit("unpipe",this);return this}var s=efe(e.pipes,t);return s===-1?this:(e.pipes.splice(s,1),e.pipesCount-=1,e.pipesCount===1&&(e.pipes=e.pipes[0]),t.emit("unpipe",this),this)};Yn.prototype.on=function(t,e){var r=c0.prototype.on.call(this,t,e);if(t==="data")this._readableState.flowing!==!1&&this.resume();else if(t==="readable"){var n=this._readableState;!n.endEmitted&&!n.readableListening&&(n.readableListening=n.needReadable=!0,n.emittedReadable=!1,n.reading?n.length&&W5(this):no(fst,this))}return r};Yn.prototype.addListener=Yn.prototype.on;function fst(t){sn("readable nexttick read 0"),t.read(0)}Yn.prototype.resume=function(){var t=this._readableState;return t.flowing||(sn("resume"),t.flowing=!0,dst(this,t)),this};function dst(t,e){e.resumeScheduled||(e.resumeScheduled=!0,no(hst,t,e))}function hst(t,e){e.reading||(sn("resume read 0"),t.read(0)),e.resumeScheduled=!1,e.awaitDrain=0,t.emit("resume"),GD(t),e.flowing&&!e.reading&&t.read(0)}Yn.prototype.pause=function(){return sn("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(sn("pause"),this._readableState.flowing=!1,this.emit("pause")),this};function GD(t){var e=t._readableState;for(sn("flow",e.flowing);e.flowing&&t.read()!==null;);}Yn.prototype.wrap=function(t){var e=this._readableState,r=!1,n=this;t.on("end",function(){if(sn("wrapped end"),e.decoder&&!e.ended){var a=e.decoder.end();a&&a.length&&n.push(a)}n.push(null)}),t.on("data",function(a){if(sn("wrapped data"),e.decoder&&(a=e.decoder.write(a)),!(e.objectMode&&a==null)&&!(!e.objectMode&&(!a||!a.length))){var o=n.push(a);o||(r=!0,t.pause())}});for(var i in t)this[i]===void 0&&typeof t[i]=="function"&&(this[i]=function(a){return function(){return t[a].apply(t,arguments)}}(i));var s=["error","close","destroy","pause","resume"];return yst(s,function(a){t.on(a,n.emit.bind(n,a))}),n._read=function(a){sn("wrapped _read",a),r&&(r=!1,t.resume())},n};Yn._fromList=Que;function Que(t,e){if(e.length===0)return null;var r;return e.objectMode?r=e.buffer.shift():!t||t>=e.length?(e.decoder?r=e.buffer.join(""):e.buffer.length===1?r=e.buffer.head.data:r=e.buffer.concat(e.length),e.buffer.clear()):r=pst(t,e.buffer,e.decoder),r}function pst(t,e,r){var n;return t<e.head.data.length?(n=e.head.data.slice(0,t),e.head.data=e.head.data.slice(t)):t===e.head.data.length?n=e.shift():n=r?mst(t,e):gst(t,e),n}function mst(t,e){var r=e.head,n=1,i=r.data;for(t-=i.length;r=r.next;){var s=r.data,a=t>s.length?s.length:t;if(a===s.length?i+=s:i+=s.slice(0,t),t-=a,t===0){a===s.length?(++n,r.next?e.head=r.next:e.head=e.tail=null):(e.head=r,r.data=s.slice(a));break}++n}return e.length-=n,i}function gst(t,e){var r=Me.allocUnsafe(t),n=e.head,i=1;for(n.data.copy(r),t-=n.data.length;n=n.next;){var s=n.data,a=t>s.length?s.length:t;if(s.copy(r,r.length-t,0,a),t-=a,t===0){a===s.length?(++i,n.next?e.head=n.next:e.head=e.tail=null):(e.head=n,n.data=s.slice(a));break}++i}return e.length-=i,r}function _E(t){var e=t._readableState;if(e.length>0)throw new Error('"endReadable()" called on non-empty stream');e.endEmitted||(e.ended=!0,no(vst,e,t))}function vst(t,e){!t.endEmitted&&t.length===0&&(t.endEmitted=!0,e.readable=!1,e.emit("end"))}function yst(t,e){for(var r=0,n=t.length;r<n;r++)e(t[r],r)}function efe(t,e){for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}fs.WritableState=KD;_d.inherits(fs,Ns.EventEmitter);function bst(){}function wst(t,e,r){this.chunk=t,this.encoding=e,this.callback=r,this.next=null}function KD(t,e){Object.defineProperty(this,"buffer",{get:_d.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.")}),t=t||{},this.objectMode=!!t.objectMode,e instanceof ro&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var r=t.highWaterMark,n=this.objectMode?16:16*1024;this.highWaterMark=r||r===0?r:n,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var i=t.decodeStrings===!1;this.decodeStrings=!i,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(s){Ast(e,s)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new ife(this)}KD.prototype.getBuffer=function(){for(var e=this.bufferedRequest,r=[];e;)r.push(e),e=e.next;return r};function fs(t){if(!(this instanceof fs)&&!(this instanceof ro))return new fs(t);this._writableState=new KD(t,this),this.writable=!0,t&&(typeof t.write=="function"&&(this._write=t.write),typeof t.writev=="function"&&(this._writev=t.writev)),Ns.EventEmitter.call(this)}fs.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))};function _st(t,e){var r=new Error("write after end");t.emit("error",r),no(e,r)}function xst(t,e,r,n){var i=!0,s=!1;return r===null?s=new TypeError("May not write null values to stream"):!kh.Buffer.isBuffer(r)&&typeof r!="string"&&r!==void 0&&!e.objectMode&&(s=new TypeError("Invalid non-string/buffer chunk")),s&&(t.emit("error",s),no(n,s),i=!1),i}fs.prototype.write=function(t,e,r){var n=this._writableState,i=!1;return typeof e=="function"&&(r=e,e=null),kh.Buffer.isBuffer(t)?e="buffer":e||(e=n.defaultEncoding),typeof r!="function"&&(r=bst),n.ended?_st(this,r):xst(this,n,t,r)&&(n.pendingcb++,i=Est(this,n,t,e,r)),i};fs.prototype.cork=function(){var t=this._writableState;t.corked++};fs.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,!t.writing&&!t.corked&&!t.finished&&!t.bufferProcessing&&t.bufferedRequest&&tfe(this,t))};fs.prototype.setDefaultEncoding=function(e){if(typeof e=="string"&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this};function Sst(t,e,r){return!t.objectMode&&t.decodeStrings!==!1&&typeof e=="string"&&(e=kh.Buffer.from(e,r)),e}function Est(t,e,r,n,i){r=Sst(e,r,n),kh.Buffer.isBuffer(r)&&(n="buffer");var s=e.objectMode?1:r.length;e.length+=s;var a=e.length<e.highWaterMark;if(a||(e.needDrain=!0),e.writing||e.corked){var o=e.lastBufferedRequest;e.lastBufferedRequest=new wst(r,n,i),o?o.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else nP(t,e,!1,s,r,n,i);return a}function nP(t,e,r,n,i,s,a){e.writelen=n,e.writecb=a,e.writing=!0,e.sync=!0,r?t._writev(i,e.onwrite):t._write(i,s,e.onwrite),e.sync=!1}function kst(t,e,r,n,i){--e.pendingcb,r?no(i,n):i(n),t._writableState.errorEmitted=!0,t.emit("error",n)}function Tst(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}function Ast(t,e){var r=t._writableState,n=r.sync,i=r.writecb;if(Tst(r),e)kst(t,r,n,e,i);else{var s=rfe(r);!s&&!r.corked&&!r.bufferProcessing&&r.bufferedRequest&&tfe(t,r),n?no(YW,t,r,s,i):YW(t,r,s,i)}}function YW(t,e,r,n){r||Cst(t,e),e.pendingcb--,n(),nfe(t,e)}function Cst(t,e){e.length===0&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}function tfe(t,e){e.bufferProcessing=!0;var r=e.bufferedRequest;if(t._writev&&r&&r.next){var n=e.bufferedRequestCount,i=new Array(n),s=e.corkedRequestsFree;s.entry=r;for(var a=0;r;)i[a]=r,r=r.next,a+=1;nP(t,e,!0,e.length,i,"",s.finish),e.pendingcb++,e.lastBufferedRequest=null,s.next?(e.corkedRequestsFree=s.next,s.next=null):e.corkedRequestsFree=new ife(e)}else{for(;r;){var o=r.chunk,c=r.encoding,u=r.callback,l=e.objectMode?1:o.length;if(nP(t,e,!1,l,o,c,u),r=r.next,e.writing)break}r===null&&(e.lastBufferedRequest=null)}e.bufferedRequestCount=0,e.bufferedRequest=r,e.bufferProcessing=!1}fs.prototype._write=function(t,e,r){r(new Error("not implemented"))};fs.prototype._writev=null;fs.prototype.end=function(t,e,r){var n=this._writableState;typeof t=="function"?(r=t,t=null,e=null):typeof e=="function"&&(r=e,e=null),t!=null&&this.write(t,e),n.corked&&(n.corked=1,this.uncork()),!n.ending&&!n.finished&&Ist(this,n,r)};function rfe(t){return t.ending&&t.length===0&&t.bufferedRequest===null&&!t.finished&&!t.writing}function ZW(t,e){e.prefinished||(e.prefinished=!0,t.emit("prefinish"))}function nfe(t,e){var r=rfe(e);return r&&(e.pendingcb===0?(ZW(t,e),e.finished=!0,t.emit("finish")):ZW(t,e)),r}function Ist(t,e,r){e.ending=!0,nfe(t,e),r&&(e.finished?no(r):t.once("finish",r)),e.ended=!0,t.writable=!1}function ife(t){var e=this;this.next=null,this.entry=null,this.finish=function(r){var n=e.entry;for(e.entry=null;n;){var i=n.callback;t.pendingcb--,i(r),n=n.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}}_d.inherits(ro,Yn);var JW=Object.keys(fs.prototype);for(var xE=0;xE<JW.length;xE++){var SE=JW[xE];ro.prototype[SE]||(ro.prototype[SE]=fs.prototype[SE])}function ro(t){if(!(this instanceof ro))return new ro(t);Yn.call(this,t),fs.call(this,t),t&&t.readable===!1&&(this.readable=!1),t&&t.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,t&&t.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",Pst)}function Pst(){this.allowHalfOpen||this._writableState.ended||no(Rst,this)}function Rst(t){t.end()}_d.inherits(yc,ro);function Ost(t){this.afterTransform=function(e,r){return Bst(t,e,r)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function Bst(t,e,r){var n=t._transformState;n.transforming=!1;var i=n.writecb;if(!i)return t.emit("error",new Error("no writecb in Transform class"));n.writechunk=null,n.writecb=null,r!=null&&t.push(r),i(e);var s=t._readableState;s.reading=!1,(s.needReadable||s.length<s.highWaterMark)&&t._read(s.highWaterMark)}function yc(t){if(!(this instanceof yc))return new yc(t);ro.call(this,t),this._transformState=new Ost(this);var e=this;this._readableState.needReadable=!0,this._readableState.sync=!1,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.once("prefinish",function(){typeof this._flush=="function"?this._flush(function(r){QW(e,r)}):QW(e)})}yc.prototype.push=function(t,e){return this._transformState.needTransform=!1,ro.prototype.push.call(this,t,e)};yc.prototype._transform=function(t,e,r){throw new Error("Not implemented")};yc.prototype._write=function(t,e,r){var n=this._transformState;if(n.writecb=r,n.writechunk=t,n.writeencoding=e,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}};yc.prototype._read=function(t){var e=this._transformState;e.writechunk!==null&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0};function QW(t,e){if(e)return t.emit("error",e);var r=t._writableState,n=t._transformState;if(r.length)throw new Error("Calling transform done when ws.length != 0");if(n.transforming)throw new Error("Calling transform done when still transforming");return t.push(null)}_d.inherits(yp,yc);function yp(t){if(!(this instanceof yp))return new yp(t);yc.call(this,t)}yp.prototype._transform=function(t,e,r){r(null,t)};_d.inherits(bc,c0);bc.Readable=Yn;bc.Writable=fs;bc.Duplex=ro;bc.Transform=yc;bc.PassThrough=yp;bc.Stream=bc;function bc(){c0.call(this)}bc.prototype.pipe=function(t,e){var r=this;function n(l){t.writable&&t.write(l)===!1&&r.pause&&r.pause()}r.on("data",n);function i(){r.readable&&r.resume&&r.resume()}t.on("drain",i),!t._isStdio&&(!e||e.end!==!1)&&(r.on("end",a),r.on("close",o));var s=!1;function a(){s||(s=!0,t.end())}function o(){s||(s=!0,typeof t.destroy=="function"&&t.destroy())}function c(l){if(u(),c0.listenerCount(this,"error")===0)throw l}r.on("error",c),t.on("error",c);function u(){r.removeListener("data",n),t.removeListener("drain",i),r.removeListener("end",a),r.removeListener("close",o),r.removeListener("error",c),t.removeListener("error",c),r.removeListener("end",u),r.removeListener("close",u),t.removeListener("close",u)}return r.on("end",u),r.on("close",u),t.on("close",u),t.emit("pipe",r),t};const sfe=Object.freeze(Object.defineProperty({__proto__:null,Duplex:ro,PassThrough:yp,Readable:Yn,Stream:bc,Transform:yc,Writable:fs,default:bc},Symbol.toStringTag,{value:"Module"})),G5=FJ(sfe);var eG;function Dst(){if(eG)return J0;eG=1;var t=J0&&J0.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,s){i.__proto__=s}||function(i,s){for(var a in s)s.hasOwnProperty(a)&&(i[a]=s[a])};return function(i,s){n(i,s);function a(){this.constructor=i}i.prototype=s===null?Object.create(s):(a.prototype=s.prototype,new a)}}();Object.defineProperty(J0,"__esModule",{value:!0});var e=G5,r=function(n){t(i,n);function i(s){var a=n.call(this,{objectMode:!0})||this,o=indexedDB.open(s.databaseName,s.databaseVersion);return o.addEventListener("success",function(c){var u;try{var l=c.target.result.transaction([s.objectStoreName]).objectStore(s.objectStoreName);s.indexName&&(l=l.index(s.indexName)),u=l.openCursor(s.range,s.cursorDirection)}catch(f){return a.emit("error",f)}u.addEventListener("success",function(f){if(f.target.result)return a.push(f.target.result.value),f.target.result.continue();a.push(null)}),u.addEventListener("error",function(f){a.emit("error",f.target.result)})}),o.addEventListener("error",function(c){a.emit("error",c.target.result)}),a}return i.prototype._read=function(){},i}(e.Readable);return J0.IndexedDbReadStream=r,J0}var Q0={},tG;function Mst(){if(tG)return Q0;tG=1;var t=Q0&&Q0.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,s){i.__proto__=s}||function(i,s){for(var a in s)s.hasOwnProperty(a)&&(i[a]=s[a])};return function(i,s){n(i,s);function a(){this.constructor=i}i.prototype=s===null?Object.create(s):(a.prototype=s.prototype,new a)}}();Object.defineProperty(Q0,"__esModule",{value:!0});var e=G5,r=function(n){t(i,n);function i(s){var a=n.call(this,{objectMode:!0})||this;return a.options=s,a}return i.prototype._write=function(s,a,o){var c=this,u=indexedDB.open(this.options.databaseName,this.options.databaseVersion);u.addEventListener("success",function(l){var f;try{f=l.target.result.transaction([c.options.objectStoreName],"readwrite").objectStore(c.options.objectStoreName).add(s)}catch(d){c.emit("error",d);return}f.addEventListener("success",function(){o()}),f.addEventListener("error",function(d){c.emit("error",d.target.error)})}),u.addEventListener("error",function(l){c.emit("error",l.target.error)})},i}(e.Writable);return Q0.IndexedDbWriteStream=r,Q0}var rG;function Nst(){return rG||(rG=1,function(t){function e(r){for(var n in r)t.hasOwnProperty(n)||(t[n]=r[n])}Object.defineProperty(t,"__esModule",{value:!0}),e(Dst()),e(Mst())}(pE)),pE}var Fst=Nst();const Lst=In(Fst);var S3={exports:{}},E3={exports:{}},tr={},yw={exports:{}},bw={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var nG;function gr(){return nG||(nG=1,function(t,e){var r=_c(),n=r.Buffer;function i(a,o){for(var c in a)o[c]=a[c]}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?t.exports=r:(i(r,e),e.Buffer=s);function s(a,o,c){return n(a,o,c)}s.prototype=Object.create(n.prototype),i(n,s),s.from=function(a,o,c){if(typeof a=="number")throw new TypeError("Argument must not be a number");return n(a,o,c)},s.alloc=function(a,o,c){if(typeof a!="number")throw new TypeError("Argument must be a number");var u=n(a);return o!==void 0?typeof c=="string"?u.fill(o,c):u.fill(o):u.fill(0),u},s.allocUnsafe=function(a){if(typeof a!="number")throw new TypeError("Argument must be a number");return n(a)},s.allocUnsafeSlow=function(a){if(typeof a!="number")throw new TypeError("Argument must be a number");return r.SlowBuffer(a)}}(bw,bw.exports)),bw.exports}var iG;function hm(){if(iG)return yw.exports;iG=1;var t=65536,e=4294967295;function r(){throw new Error(`Secure random number generation is not supported by this browser.
Use Chrome, Firefox or Internet Explorer 11`)}var n=gr().Buffer,i=Ut.crypto||Ut.msCrypto;i&&i.getRandomValues?yw.exports=s:yw.exports=r;function s(a,o){if(a>e)throw new RangeError("requested too many random bytes");var c=n.allocUnsafe(a);if(a>0)if(a>t)for(var u=0;u<a;u+=t)i.getRandomValues(c.slice(u,u+t));else i.getRandomValues(c);return typeof o=="function"?fn.nextTick(function(){o(null,c)}):c}return yw.exports}var EE,sG;function afe(){if(sG)return EE;sG=1;var t=gr().Buffer,e=G5.Transform,r=lr();function n(o){e.call(this),this._block=t.allocUnsafe(o),this._blockSize=o,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}r(n,e),n.prototype._transform=function(o,c,u){var l=null;try{this.update(o,c)}catch(f){l=f}u(l)},n.prototype._flush=function(o){var c=null;try{this.push(this.digest())}catch(u){c=u}o(c)};var i=typeof Uint8Array<"u",s=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&ArrayBuffer.isView&&(t.prototype instanceof Uint8Array||t.TYPED_ARRAY_SUPPORT);function a(o,c){if(o instanceof t)return o;if(typeof o=="string")return t.from(o,c);if(s&&ArrayBuffer.isView(o)){if(o.byteLength===0)return t.alloc(0);var u=t.from(o.buffer,o.byteOffset,o.byteLength);if(u.byteLength===o.byteLength)return u}if(i&&o instanceof Uint8Array||t.isBuffer(o)&&o.constructor&&typeof o.constructor.isBuffer=="function"&&o.constructor.isBuffer(o))return t.from(o);throw new TypeError('The "data" argument must be of type string or an instance of Buffer, TypedArray, or DataView.')}return n.prototype.update=function(o,c){if(this._finalized)throw new Error("Digest already called");o=a(o,c);for(var u=this._block,l=0;this._blockOffset+o.length-l>=this._blockSize;){for(var f=this._blockOffset;f<this._blockSize;)u[f++]=o[l++];this._update(),this._blockOffset=0}for(;l<o.length;)u[this._blockOffset++]=o[l++];for(var d=0,h=o.length*8;h>0;++d)this._length[d]+=h,h=this._length[d]/4294967296|0,h>0&&(this._length[d]-=4294967296*h);return this},n.prototype._update=function(){throw new Error("_update is not implemented")},n.prototype.digest=function(o){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var c=this._digest();o!==void 0&&(c=c.toString(o)),this._block.fill(0),this._blockOffset=0;for(var u=0;u<4;++u)this._length[u]=0;return c},n.prototype._digest=function(){throw new Error("_digest is not implemented")},EE=n,EE}var kE,aG;function XD(){if(aG)return kE;aG=1;var t=lr(),e=afe(),r=gr().Buffer,n=new Array(16);function i(){e.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878}t(i,e),i.prototype._update=function(){for(var l=n,f=0;f<16;++f)l[f]=this._block.readInt32LE(f*4);var d=this._a,h=this._b,m=this._c,p=this._d;d=a(d,h,m,p,l[0],3614090360,7),p=a(p,d,h,m,l[1],3905402710,12),m=a(m,p,d,h,l[2],606105819,17),h=a(h,m,p,d,l[3],3250441966,22),d=a(d,h,m,p,l[4],4118548399,7),p=a(p,d,h,m,l[5],1200080426,12),m=a(m,p,d,h,l[6],2821735955,17),h=a(h,m,p,d,l[7],4249261313,22),d=a(d,h,m,p,l[8],1770035416,7),p=a(p,d,h,m,l[9],2336552879,12),m=a(m,p,d,h,l[10],4294925233,17),h=a(h,m,p,d,l[11],2304563134,22),d=a(d,h,m,p,l[12],1804603682,7),p=a(p,d,h,m,l[13],4254626195,12),m=a(m,p,d,h,l[14],2792965006,17),h=a(h,m,p,d,l[15],1236535329,22),d=o(d,h,m,p,l[1],4129170786,5),p=o(p,d,h,m,l[6],3225465664,9),m=o(m,p,d,h,l[11],643717713,14),h=o(h,m,p,d,l[0],3921069994,20),d=o(d,h,m,p,l[5],3593408605,5),p=o(p,d,h,m,l[10],38016083,9),m=o(m,p,d,h,l[15],3634488961,14),h=o(h,m,p,d,l[4],3889429448,20),d=o(d,h,m,p,l[9],568446438,5),p=o(p,d,h,m,l[14],3275163606,9),m=o(m,p,d,h,l[3],4107603335,14),h=o(h,m,p,d,l[8],1163531501,20),d=o(d,h,m,p,l[13],2850285829,5),p=o(p,d,h,m,l[2],4243563512,9),m=o(m,p,d,h,l[7],1735328473,14),h=o(h,m,p,d,l[12],2368359562,20),d=c(d,h,m,p,l[5],4294588738,4),p=c(p,d,h,m,l[8],2272392833,11),m=c(m,p,d,h,l[11],1839030562,16),h=c(h,m,p,d,l[14],4259657740,23),d=c(d,h,m,p,l[1],2763975236,4),p=c(p,d,h,m,l[4],1272893353,11),m=c(m,p,d,h,l[7],4139469664,16),h=c(h,m,p,d,l[10],3200236656,23),d=c(d,h,m,p,l[13],681279174,4),p=c(p,d,h,m,l[0],3936430074,11),m=c(m,p,d,h,l[3],3572445317,16),h=c(h,m,p,d,l[6],76029189,23),d=c(d,h,m,p,l[9],3654602809,4),p=c(p,d,h,m,l[12],3873151461,11),m=c(m,p,d,h,l[15],530742520,16),h=c(h,m,p,d,l[2],3299628645,23),d=u(d,h,m,p,l[0],4096336452,6),p=u(p,d,h,m,l[7],1126891415,10),m=u(m,p,d,h,l[14],2878612391,15),h=u(h,m,p,d,l[5],4237533241,21),d=u(d,h,m,p,l[12],1700485571,6),p=u(p,d,h,m,l[3],2399980690,10),m=u(m,p,d,h,l[10],4293915773,15),h=u(h,m,p,d,l[1],2240044497,21),d=u(d,h,m,p,l[8],1873313359,6),p=u(p,d,h,m,l[15],4264355552,10),m=u(m,p,d,h,l[6],2734768916,15),h=u(h,m,p,d,l[13],1309151649,21),d=u(d,h,m,p,l[4],4149444226,6),p=u(p,d,h,m,l[11],3174756917,10),m=u(m,p,d,h,l[2],718787259,15),h=u(h,m,p,d,l[9],3951481745,21),this._a=this._a+d|0,this._b=this._b+h|0,this._c=this._c+m|0,this._d=this._d+p|0},i.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var l=r.allocUnsafe(16);return l.writeInt32LE(this._a,0),l.writeInt32LE(this._b,4),l.writeInt32LE(this._c,8),l.writeInt32LE(this._d,12),l};function s(l,f){return l<<f|l>>>32-f}function a(l,f,d,h,m,p,g){return s(l+(f&d|~f&h)+m+p|0,g)+f|0}function o(l,f,d,h,m,p,g){return s(l+(f&h|d&~h)+m+p|0,g)+f|0}function c(l,f,d,h,m,p,g){return s(l+(f^d^h)+m+p|0,g)+f|0}function u(l,f,d,h,m,p,g){return s(l+(d^(f|~h))+m+p|0,g)+f|0}return kE=i,kE}var TE,oG;function YD(){if(oG)return TE;oG=1;var t=_c().Buffer,e=lr(),r=afe(),n=new Array(16),i=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],s=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],a=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],o=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],c=[0,1518500249,1859775393,2400959708,2840853838],u=[1352829926,1548603684,1836072691,2053994217,0];function l(){r.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520}e(l,r),l.prototype._update=function(){for(var v=n,y=0;y<16;++y)v[y]=this._block.readInt32LE(y*4);for(var b=this._a|0,_=this._b|0,x=this._c|0,E=this._d|0,k=this._e|0,B=this._a|0,D=this._b|0,z=this._c|0,U=this._d|0,S=this._e|0,T=0;T<80;T+=1){var w,A;T<16?(w=d(b,_,x,E,k,v[i[T]],c[0],a[T]),A=g(B,D,z,U,S,v[s[T]],u[0],o[T])):T<32?(w=h(b,_,x,E,k,v[i[T]],c[1],a[T]),A=p(B,D,z,U,S,v[s[T]],u[1],o[T])):T<48?(w=m(b,_,x,E,k,v[i[T]],c[2],a[T]),A=m(B,D,z,U,S,v[s[T]],u[2],o[T])):T<64?(w=p(b,_,x,E,k,v[i[T]],c[3],a[T]),A=h(B,D,z,U,S,v[s[T]],u[3],o[T])):(w=g(b,_,x,E,k,v[i[T]],c[4],a[T]),A=d(B,D,z,U,S,v[s[T]],u[4],o[T])),b=k,k=E,E=f(x,10),x=_,_=w,B=S,S=U,U=f(z,10),z=D,D=A}var F=this._b+x+U|0;this._b=this._c+E+S|0,this._c=this._d+k+B|0,this._d=this._e+b+D|0,this._e=this._a+_+z|0,this._a=F},l.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var v=t.alloc?t.alloc(20):new t(20);return v.writeInt32LE(this._a,0),v.writeInt32LE(this._b,4),v.writeInt32LE(this._c,8),v.writeInt32LE(this._d,12),v.writeInt32LE(this._e,16),v};function f(v,y){return v<<y|v>>>32-y}function d(v,y,b,_,x,E,k,B){return f(v+(y^b^_)+E+k|0,B)+x|0}function h(v,y,b,_,x,E,k,B){return f(v+(y&b|~y&_)+E+k|0,B)+x|0}function m(v,y,b,_,x,E,k,B){return f(v+((y|~b)^_)+E+k|0,B)+x|0}function p(v,y,b,_,x,E,k,B){return f(v+(y&_|b&~_)+E+k|0,B)+x|0}function g(v,y,b,_,x,E,k,B){return f(v+(y^(b|~_))+E+k|0,B)+x|0}return TE=l,TE}var AE={exports:{}},CE,cG;function pm(){if(cG)return CE;cG=1;var t=gr().Buffer;function e(r,n){this._block=t.alloc(r),this._finalSize=n,this._blockSize=r,this._len=0}return e.prototype.update=function(r,n){typeof r=="string"&&(n=n||"utf8",r=t.from(r,n));for(var i=this._block,s=this._blockSize,a=r.length,o=this._len,c=0;c<a;){for(var u=o%s,l=Math.min(a-c,s-u),f=0;f<l;f++)i[u+f]=r[c+f];o+=l,c+=l,o%s===0&&this._update(i)}return this._len+=a,this},e.prototype.digest=function(r){var n=this._len%this._blockSize;this._block[n]=128,this._block.fill(0,n+1),n>=this._finalSize&&(this._update(this._block),this._block.fill(0));var i=this._len*8;if(i<=4294967295)this._block.writeUInt32BE(i,this._blockSize-4);else{var s=(i&4294967295)>>>0,a=(i-s)/4294967296;this._block.writeUInt32BE(a,this._blockSize-8),this._block.writeUInt32BE(s,this._blockSize-4)}this._update(this._block);var o=this._hash();return r?o.toString(r):o},e.prototype._update=function(){throw new Error("_update must be implemented by subclass")},CE=e,CE}var IE,lG;function $st(){if(lG)return IE;lG=1;var t=lr(),e=pm(),r=gr().Buffer,n=[1518500249,1859775393,-1894007588,-899497514],i=new Array(80);function s(){this.init(),this._w=i,e.call(this,64,56)}t(s,e),s.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function a(u){return u<<5|u>>>27}function o(u){return u<<30|u>>>2}function c(u,l,f,d){return u===0?l&f|~l&d:u===2?l&f|l&d|f&d:l^f^d}return s.prototype._update=function(u){for(var l=this._w,f=this._a|0,d=this._b|0,h=this._c|0,m=this._d|0,p=this._e|0,g=0;g<16;++g)l[g]=u.readInt32BE(g*4);for(;g<80;++g)l[g]=l[g-3]^l[g-8]^l[g-14]^l[g-16];for(var v=0;v<80;++v){var y=~~(v/20),b=a(f)+c(y,d,h,m)+p+l[v]+n[y]|0;p=m,m=h,h=o(d),d=f,f=b}this._a=f+this._a|0,this._b=d+this._b|0,this._c=h+this._c|0,this._d=m+this._d|0,this._e=p+this._e|0},s.prototype._hash=function(){var u=r.allocUnsafe(20);return u.writeInt32BE(this._a|0,0),u.writeInt32BE(this._b|0,4),u.writeInt32BE(this._c|0,8),u.writeInt32BE(this._d|0,12),u.writeInt32BE(this._e|0,16),u},IE=s,IE}var PE,uG;function Ust(){if(uG)return PE;uG=1;var t=lr(),e=pm(),r=gr().Buffer,n=[1518500249,1859775393,-1894007588,-899497514],i=new Array(80);function s(){this.init(),this._w=i,e.call(this,64,56)}t(s,e),s.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function a(l){return l<<1|l>>>31}function o(l){return l<<5|l>>>27}function c(l){return l<<30|l>>>2}function u(l,f,d,h){return l===0?f&d|~f&h:l===2?f&d|f&h|d&h:f^d^h}return s.prototype._update=function(l){for(var f=this._w,d=this._a|0,h=this._b|0,m=this._c|0,p=this._d|0,g=this._e|0,v=0;v<16;++v)f[v]=l.readInt32BE(v*4);for(;v<80;++v)f[v]=a(f[v-3]^f[v-8]^f[v-14]^f[v-16]);for(var y=0;y<80;++y){var b=~~(y/20),_=o(d)+u(b,h,m,p)+g+f[y]+n[b]|0;g=p,p=m,m=c(h),h=d,d=_}this._a=d+this._a|0,this._b=h+this._b|0,this._c=m+this._c|0,this._d=p+this._d|0,this._e=g+this._e|0},s.prototype._hash=function(){var l=r.allocUnsafe(20);return l.writeInt32BE(this._a|0,0),l.writeInt32BE(this._b|0,4),l.writeInt32BE(this._c|0,8),l.writeInt32BE(this._d|0,12),l.writeInt32BE(this._e|0,16),l},PE=s,PE}var RE,fG;function ofe(){if(fG)return RE;fG=1;var t=lr(),e=pm(),r=gr().Buffer,n=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],i=new Array(64);function s(){this.init(),this._w=i,e.call(this,64,56)}t(s,e),s.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this};function a(d,h,m){return m^d&(h^m)}function o(d,h,m){return d&h|m&(d|h)}function c(d){return(d>>>2|d<<30)^(d>>>13|d<<19)^(d>>>22|d<<10)}function u(d){return(d>>>6|d<<26)^(d>>>11|d<<21)^(d>>>25|d<<7)}function l(d){return(d>>>7|d<<25)^(d>>>18|d<<14)^d>>>3}function f(d){return(d>>>17|d<<15)^(d>>>19|d<<13)^d>>>10}return s.prototype._update=function(d){for(var h=this._w,m=this._a|0,p=this._b|0,g=this._c|0,v=this._d|0,y=this._e|0,b=this._f|0,_=this._g|0,x=this._h|0,E=0;E<16;++E)h[E]=d.readInt32BE(E*4);for(;E<64;++E)h[E]=f(h[E-2])+h[E-7]+l(h[E-15])+h[E-16]|0;for(var k=0;k<64;++k){var B=x+u(y)+a(y,b,_)+n[k]+h[k]|0,D=c(m)+o(m,p,g)|0;x=_,_=b,b=y,y=v+B|0,v=g,g=p,p=m,m=B+D|0}this._a=m+this._a|0,this._b=p+this._b|0,this._c=g+this._c|0,this._d=v+this._d|0,this._e=y+this._e|0,this._f=b+this._f|0,this._g=_+this._g|0,this._h=x+this._h|0},s.prototype._hash=function(){var d=r.allocUnsafe(32);return d.writeInt32BE(this._a,0),d.writeInt32BE(this._b,4),d.writeInt32BE(this._c,8),d.writeInt32BE(this._d,12),d.writeInt32BE(this._e,16),d.writeInt32BE(this._f,20),d.writeInt32BE(this._g,24),d.writeInt32BE(this._h,28),d},RE=s,RE}var OE,dG;function jst(){if(dG)return OE;dG=1;var t=lr(),e=ofe(),r=pm(),n=gr().Buffer,i=new Array(64);function s(){this.init(),this._w=i,r.call(this,64,56)}return t(s,e),s.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this},s.prototype._hash=function(){var a=n.allocUnsafe(28);return a.writeInt32BE(this._a,0),a.writeInt32BE(this._b,4),a.writeInt32BE(this._c,8),a.writeInt32BE(this._d,12),a.writeInt32BE(this._e,16),a.writeInt32BE(this._f,20),a.writeInt32BE(this._g,24),a},OE=s,OE}var BE,hG;function cfe(){if(hG)return BE;hG=1;var t=lr(),e=pm(),r=gr().Buffer,n=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],i=new Array(160);function s(){this.init(),this._w=i,e.call(this,128,112)}t(s,e),s.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this};function a(p,g,v){return v^p&(g^v)}function o(p,g,v){return p&g|v&(p|g)}function c(p,g){return(p>>>28|g<<4)^(g>>>2|p<<30)^(g>>>7|p<<25)}function u(p,g){return(p>>>14|g<<18)^(p>>>18|g<<14)^(g>>>9|p<<23)}function l(p,g){return(p>>>1|g<<31)^(p>>>8|g<<24)^p>>>7}function f(p,g){return(p>>>1|g<<31)^(p>>>8|g<<24)^(p>>>7|g<<25)}function d(p,g){return(p>>>19|g<<13)^(g>>>29|p<<3)^p>>>6}function h(p,g){return(p>>>19|g<<13)^(g>>>29|p<<3)^(p>>>6|g<<26)}function m(p,g){return p>>>0<g>>>0?1:0}return s.prototype._update=function(p){for(var g=this._w,v=this._ah|0,y=this._bh|0,b=this._ch|0,_=this._dh|0,x=this._eh|0,E=this._fh|0,k=this._gh|0,B=this._hh|0,D=this._al|0,z=this._bl|0,U=this._cl|0,S=this._dl|0,T=this._el|0,w=this._fl|0,A=this._gl|0,F=this._hl|0,P=0;P<32;P+=2)g[P]=p.readInt32BE(P*4),g[P+1]=p.readInt32BE(P*4+4);for(;P<160;P+=2){var O=g[P-30],R=g[P-15*2+1],I=l(O,R),C=f(R,O);O=g[P-2*2],R=g[P-2*2+1];var M=d(O,R),L=h(R,O),N=g[P-7*2],H=g[P-7*2+1],W=g[P-16*2],q=g[P-16*2+1],G=C+H|0,Y=I+N+m(G,C)|0;G=G+L|0,Y=Y+M+m(G,L)|0,G=G+q|0,Y=Y+W+m(G,q)|0,g[P]=Y,g[P+1]=G}for(var te=0;te<160;te+=2){Y=g[te],G=g[te+1];var Q=o(v,y,b),j=o(D,z,U),Z=c(v,D),V=c(D,v),ne=u(x,T),se=u(T,x),J=n[te],ee=n[te+1],ie=a(x,E,k),le=a(T,w,A),ue=F+se|0,me=B+ne+m(ue,F)|0;ue=ue+le|0,me=me+ie+m(ue,le)|0,ue=ue+ee|0,me=me+J+m(ue,ee)|0,ue=ue+G|0,me=me+Y+m(ue,G)|0;var be=V+j|0,_e=Z+Q+m(be,V)|0;B=k,F=A,k=E,A=w,E=x,w=T,T=S+ue|0,x=_+me+m(T,S)|0,_=b,S=U,b=y,U=z,y=v,z=D,D=ue+be|0,v=me+_e+m(D,ue)|0}this._al=this._al+D|0,this._bl=this._bl+z|0,this._cl=this._cl+U|0,this._dl=this._dl+S|0,this._el=this._el+T|0,this._fl=this._fl+w|0,this._gl=this._gl+A|0,this._hl=this._hl+F|0,this._ah=this._ah+v+m(this._al,D)|0,this._bh=this._bh+y+m(this._bl,z)|0,this._ch=this._ch+b+m(this._cl,U)|0,this._dh=this._dh+_+m(this._dl,S)|0,this._eh=this._eh+x+m(this._el,T)|0,this._fh=this._fh+E+m(this._fl,w)|0,this._gh=this._gh+k+m(this._gl,A)|0,this._hh=this._hh+B+m(this._hl,F)|0},s.prototype._hash=function(){var p=r.allocUnsafe(64);function g(v,y,b){p.writeInt32BE(v,b),p.writeInt32BE(y,b+4)}return g(this._ah,this._al,0),g(this._bh,this._bl,8),g(this._ch,this._cl,16),g(this._dh,this._dl,24),g(this._eh,this._el,32),g(this._fh,this._fl,40),g(this._gh,this._gl,48),g(this._hh,this._hl,56),p},BE=s,BE}var DE,pG;function Vst(){if(pG)return DE;pG=1;var t=lr(),e=cfe(),r=pm(),n=gr().Buffer,i=new Array(160);function s(){this.init(),this._w=i,r.call(this,128,112)}return t(s,e),s.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this},s.prototype._hash=function(){var a=n.allocUnsafe(48);function o(c,u,l){a.writeInt32BE(c,l),a.writeInt32BE(u,l+4)}return o(this._ah,this._al,0),o(this._bh,this._bl,8),o(this._ch,this._cl,16),o(this._dh,this._dl,24),o(this._eh,this._el,32),o(this._fh,this._fl,40),a},DE=s,DE}var mG;function ZD(){if(mG)return AE.exports;mG=1;var t=AE.exports=function(r){r=r.toLowerCase();var n=t[r];if(!n)throw new Error(r+" is not supported (we accept pull requests)");return new n};return t.sha=$st(),t.sha1=Ust(),t.sha224=jst(),t.sha256=ofe(),t.sha384=Vst(),t.sha512=cfe(),AE.exports}var ME,gG;function xd(){if(gG)return ME;gG=1;var t=gr().Buffer,e=G5.Transform,r=v6().StringDecoder,n=lr();function i(c){e.call(this),this.hashMode=typeof c=="string",this.hashMode?this[c]=this._finalOrDigest:this.final=this._finalOrDigest,this._final&&(this.__final=this._final,this._final=null),this._decoder=null,this._encoding=null}n(i,e);var s=typeof Uint8Array<"u",a=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&ArrayBuffer.isView&&(t.prototype instanceof Uint8Array||t.TYPED_ARRAY_SUPPORT);function o(c,u){if(c instanceof t)return c;if(typeof c=="string")return t.from(c,u);if(a&&ArrayBuffer.isView(c)){if(c.byteLength===0)return t.alloc(0);var l=t.from(c.buffer,c.byteOffset,c.byteLength);if(l.byteLength===c.byteLength)return l}if(s&&c instanceof Uint8Array||t.isBuffer(c)&&c.constructor&&typeof c.constructor.isBuffer=="function"&&c.constructor.isBuffer(c))return t.from(c);throw new TypeError('The "data" argument must be of type string or an instance of Buffer, TypedArray, or DataView.')}return i.prototype.update=function(c,u,l){var f=o(c,u),d=this._update(f);return this.hashMode?this:(l&&(d=this._toString(d,l)),d)},i.prototype.setAutoPadding=function(){},i.prototype.getAuthTag=function(){throw new Error("trying to get auth tag in unsupported state")},i.prototype.setAuthTag=function(){throw new Error("trying to set auth tag in unsupported state")},i.prototype.setAAD=function(){throw new Error("trying to set aad in unsupported state")},i.prototype._transform=function(c,u,l){var f;try{this.hashMode?this._update(c):this.push(this._update(c))}catch(d){f=d}finally{l(f)}},i.prototype._flush=function(c){var u;try{this.push(this.__final())}catch(l){u=l}c(u)},i.prototype._finalOrDigest=function(c){var u=this.__final()||t.alloc(0);return c&&(u=this._toString(u,c,!0)),u},i.prototype._toString=function(c,u,l){if(this._decoder||(this._decoder=new r(u),this._encoding=u),this._encoding!==u)throw new Error("cant switch encodings");var f=this._decoder.write(c);return l&&(f+=this._decoder.end()),f},ME=i,ME}var NE,vG;function o2(){if(vG)return NE;vG=1;var t=lr(),e=XD(),r=YD(),n=ZD(),i=xd();function s(a){i.call(this,"digest"),this._hash=a}return t(s,i),s.prototype._update=function(a){this._hash.update(a)},s.prototype._final=function(){return this._hash.digest()},NE=function(o){return o=o.toLowerCase(),o==="md5"?new e:o==="rmd160"||o==="ripemd160"?new r:new s(n(o))},NE}var FE,yG;function qst(){if(yG)return FE;yG=1;var t=lr(),e=gr().Buffer,r=xd(),n=e.alloc(128),i=64;function s(a,o){r.call(this,"digest"),typeof o=="string"&&(o=e.from(o)),this._alg=a,this._key=o,o.length>i?o=a(o):o.length<i&&(o=e.concat([o,n],i));for(var c=this._ipad=e.allocUnsafe(i),u=this._opad=e.allocUnsafe(i),l=0;l<i;l++)c[l]=o[l]^54,u[l]=o[l]^92;this._hash=[c]}return t(s,r),s.prototype._update=function(a){this._hash.push(a)},s.prototype._final=function(){var a=this._alg(e.concat(this._hash));return this._alg(e.concat([this._opad,a]))},FE=s,FE}var LE,bG;function lfe(){if(bG)return LE;bG=1;var t=XD();return LE=function(e){return new t().update(e).digest()},LE}var $E,wG;function ufe(){if(wG)return $E;wG=1;var t=lr(),e=qst(),r=xd(),n=gr().Buffer,i=lfe(),s=YD(),a=ZD(),o=n.alloc(128);function c(u,l){r.call(this,"digest"),typeof l=="string"&&(l=n.from(l));var f=u==="sha512"||u==="sha384"?128:64;if(this._alg=u,this._key=l,l.length>f){var d=u==="rmd160"?new s:a(u);l=d.update(l).digest()}else l.length<f&&(l=n.concat([l,o],f));for(var h=this._ipad=n.allocUnsafe(f),m=this._opad=n.allocUnsafe(f),p=0;p<f;p++)h[p]=l[p]^54,m[p]=l[p]^92;this._hash=u==="rmd160"?new s:a(u),this._hash.update(h)}return t(c,r),c.prototype._update=function(u){this._hash.update(u)},c.prototype._final=function(){var u=this._hash.digest(),l=this._alg==="rmd160"?new s:a(this._alg);return l.update(this._opad).update(u).digest()},$E=function(l,f){return l=l.toLowerCase(),l==="rmd160"||l==="ripemd160"?new c("rmd160",f):l==="md5"?new e(i,f):new c(l,f)},$E}const zst={sign:"rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},Hst={sign:"rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},Wst={sign:"rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},Gst={sign:"rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},Kst={sign:"ecdsa",hash:"sha256",id:""},Xst={sign:"ecdsa",hash:"sha224",id:""},Yst={sign:"ecdsa",hash:"sha384",id:""},Zst={sign:"ecdsa",hash:"sha512",id:""},Jst={sign:"dsa",hash:"sha1",id:""},Qst={sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},eat={sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"},ffe={sha224WithRSAEncryption:zst,"RSA-SHA224":{sign:"ecdsa/rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},sha256WithRSAEncryption:Hst,"RSA-SHA256":{sign:"ecdsa/rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},sha384WithRSAEncryption:Wst,"RSA-SHA384":{sign:"ecdsa/rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},sha512WithRSAEncryption:Gst,"RSA-SHA512":{sign:"ecdsa/rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},"RSA-SHA1":{sign:"rsa",hash:"sha1",id:"3021300906052b0e03021a05000414"},"ecdsa-with-SHA1":{sign:"ecdsa",hash:"sha1",id:""},sha256:Kst,sha224:Xst,sha384:Yst,sha512:Zst,"DSA-SHA":{sign:"dsa",hash:"sha1",id:""},"DSA-SHA1":{sign:"dsa",hash:"sha1",id:""},DSA:Jst,"DSA-WITH-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-WITH-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-WITH-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-WITH-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-RIPEMD160":{sign:"dsa",hash:"rmd160",id:""},ripemd160WithRSA:Qst,"RSA-RIPEMD160":{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},md5WithRSAEncryption:eat,"RSA-MD5":{sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"}};var UE,_G;function tat(){return _G||(_G=1,UE=ffe),UE}var ww={},jE,xG;function dfe(){if(xG)return jE;xG=1;var t=Math.pow(2,30)-1;return jE=function(e,r){if(typeof e!="number")throw new TypeError("Iterations not a number");if(e<0)throw new TypeError("Bad iterations");if(typeof r!="number")throw new TypeError("Key length not a number");if(r<0||r>t||r!==r)throw new TypeError("Bad key length")},jE}var VE,SG;function hfe(){if(SG)return VE;SG=1;var t;if(Ut.process&&Ut.process.browser)t="utf-8";else if(Ut.process&&Ut.process.version){var e=parseInt(fn.version.split(".")[0].slice(1),10);t=e>=6?"utf-8":"binary"}else t="utf-8";return VE=t,VE}var qE,EG;function pfe(){if(EG)return qE;EG=1;var t=gr().Buffer;return qE=function(e,r,n){if(t.isBuffer(e))return e;if(typeof e=="string")return t.from(e,r);if(ArrayBuffer.isView(e))return t.from(e.buffer);throw new TypeError(n+" must be a string, a Buffer, a typed array or a DataView")},qE}var zE,kG;function mfe(){if(kG)return zE;kG=1;var t=lfe(),e=YD(),r=ZD(),n=gr().Buffer,i=dfe(),s=hfe(),a=pfe(),o=n.alloc(128),c={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,rmd160:20,ripemd160:20};function u(d,h,m){var p=l(d),g=d==="sha512"||d==="sha384"?128:64;h.length>g?h=p(h):h.length<g&&(h=n.concat([h,o],g));for(var v=n.allocUnsafe(g+c[d]),y=n.allocUnsafe(g+c[d]),b=0;b<g;b++)v[b]=h[b]^54,y[b]=h[b]^92;var _=n.allocUnsafe(g+m+4);v.copy(_,0,0,g),this.ipad1=_,this.ipad2=v,this.opad=y,this.alg=d,this.blocksize=g,this.hash=p,this.size=c[d]}u.prototype.run=function(d,h){d.copy(h,this.blocksize);var m=this.hash(h);return m.copy(this.opad,this.blocksize),this.hash(this.opad)};function l(d){function h(p){return r(d).update(p).digest()}function m(p){return new e().update(p).digest()}return d==="rmd160"||d==="ripemd160"?m:d==="md5"?t:h}function f(d,h,m,p,g){i(m,p),d=a(d,s,"Password"),h=a(h,s,"Salt"),g=g||"sha1";var v=new u(g,d,h.length),y=n.allocUnsafe(p),b=n.allocUnsafe(h.length+4);h.copy(b,0,0,h.length);for(var _=0,x=c[g],E=Math.ceil(p/x),k=1;k<=E;k++){b.writeUInt32BE(k,h.length);for(var B=v.run(b,v.ipad1),D=B,z=1;z<m;z++){D=v.run(D,v.ipad2);for(var U=0;U<x;U++)B[U]^=D[U]}B.copy(y,_),_+=x}return y}return zE=f,zE}var HE,TG;function rat(){if(TG)return HE;TG=1;var t=gr().Buffer,e=dfe(),r=hfe(),n=mfe(),i=pfe(),s,a=Ut.crypto&&Ut.crypto.subtle,o={sha:"SHA-1","sha-1":"SHA-1",sha1:"SHA-1",sha256:"SHA-256","sha-256":"SHA-256",sha384:"SHA-384","sha-384":"SHA-384","sha-512":"SHA-512",sha512:"SHA-512"},c=[];function u(m){if(Ut.process&&!Ut.process.browser||!a||!a.importKey||!a.deriveBits)return Promise.resolve(!1);if(c[m]!==void 0)return c[m];s=s||t.alloc(8);var p=d(s,s,10,128,m).then(function(){return!0}).catch(function(){return!1});return c[m]=p,p}var l;function f(){return l||(Ut.process&&Ut.process.nextTick?l=Ut.process.nextTick:Ut.queueMicrotask?l=Ut.queueMicrotask:Ut.setImmediate?l=Ut.setImmediate:l=Ut.setTimeout,l)}function d(m,p,g,v,y){return a.importKey("raw",m,{name:"PBKDF2"},!1,["deriveBits"]).then(function(b){return a.deriveBits({name:"PBKDF2",salt:p,iterations:g,hash:{name:y}},b,v<<3)}).then(function(b){return t.from(b)})}function h(m,p){m.then(function(g){f()(function(){p(null,g)})},function(g){f()(function(){p(g)})})}return HE=function(m,p,g,v,y,b){typeof y=="function"&&(b=y,y=void 0),y=y||"sha1";var _=o[y.toLowerCase()];if(!_||typeof Ut.Promise!="function"){f()(function(){var x;try{x=n(m,p,g,v,y)}catch(E){return b(E)}b(null,x)});return}if(e(g,v),m=i(m,r,"Password"),p=i(p,r,"Salt"),typeof b!="function")throw new Error("No callback provided to pbkdf2");h(u(_).then(function(x){return x?d(m,p,g,v,_):n(m,p,g,v,y)}),b)},HE}var AG;function gfe(){return AG||(AG=1,ww.pbkdf2=rat(),ww.pbkdf2Sync=mfe()),ww}var co={},Bd={},Da={},CG;function vfe(){if(CG)return Da;CG=1,Da.readUInt32BE=function(i,s){var a=i[0+s]<<24|i[1+s]<<16|i[2+s]<<8|i[3+s];return a>>>0},Da.writeUInt32BE=function(i,s,a){i[0+a]=s>>>24,i[1+a]=s>>>16&255,i[2+a]=s>>>8&255,i[3+a]=s&255},Da.ip=function(i,s,a,o){for(var c=0,u=0,l=6;l>=0;l-=2){for(var f=0;f<=24;f+=8)c<<=1,c|=s>>>f+l&1;for(var f=0;f<=24;f+=8)c<<=1,c|=i>>>f+l&1}for(var l=6;l>=0;l-=2){for(var f=1;f<=25;f+=8)u<<=1,u|=s>>>f+l&1;for(var f=1;f<=25;f+=8)u<<=1,u|=i>>>f+l&1}a[o+0]=c>>>0,a[o+1]=u>>>0},Da.rip=function(i,s,a,o){for(var c=0,u=0,l=0;l<4;l++)for(var f=24;f>=0;f-=8)c<<=1,c|=s>>>f+l&1,c<<=1,c|=i>>>f+l&1;for(var l=4;l<8;l++)for(var f=24;f>=0;f-=8)u<<=1,u|=s>>>f+l&1,u<<=1,u|=i>>>f+l&1;a[o+0]=c>>>0,a[o+1]=u>>>0},Da.pc1=function(i,s,a,o){for(var c=0,u=0,l=7;l>=5;l--){for(var f=0;f<=24;f+=8)c<<=1,c|=s>>f+l&1;for(var f=0;f<=24;f+=8)c<<=1,c|=i>>f+l&1}for(var f=0;f<=24;f+=8)c<<=1,c|=s>>f+l&1;for(var l=1;l<=3;l++){for(var f=0;f<=24;f+=8)u<<=1,u|=s>>f+l&1;for(var f=0;f<=24;f+=8)u<<=1,u|=i>>f+l&1}for(var f=0;f<=24;f+=8)u<<=1,u|=i>>f+l&1;a[o+0]=c>>>0,a[o+1]=u>>>0},Da.r28shl=function(i,s){return i<<s&268435455|i>>>28-s};var t=[14,11,17,4,27,23,25,0,13,22,7,18,5,9,16,24,2,20,12,21,1,8,15,26,15,4,25,19,9,1,26,16,5,11,23,8,12,7,17,0,22,3,10,14,6,20,27,24];Da.pc2=function(i,s,a,o){for(var c=0,u=0,l=t.length>>>1,f=0;f<l;f++)c<<=1,c|=i>>>t[f]&1;for(var f=l;f<t.length;f++)u<<=1,u|=s>>>t[f]&1;a[o+0]=c>>>0,a[o+1]=u>>>0},Da.expand=function(i,s,a){var o=0,c=0;o=(i&1)<<5|i>>>27;for(var u=23;u>=15;u-=4)o<<=6,o|=i>>>u&63;for(var u=11;u>=3;u-=4)c|=i>>>u&63,c<<=6;c|=(i&31)<<1|i>>>31,s[a+0]=o>>>0,s[a+1]=c>>>0};var e=[14,0,4,15,13,7,1,4,2,14,15,2,11,13,8,1,3,10,10,6,6,12,12,11,5,9,9,5,0,3,7,8,4,15,1,12,14,8,8,2,13,4,6,9,2,1,11,7,15,5,12,11,9,3,7,14,3,10,10,0,5,6,0,13,15,3,1,13,8,4,14,7,6,15,11,2,3,8,4,14,9,12,7,0,2,1,13,10,12,6,0,9,5,11,10,5,0,13,14,8,7,10,11,1,10,3,4,15,13,4,1,2,5,11,8,6,12,7,6,12,9,0,3,5,2,14,15,9,10,13,0,7,9,0,14,9,6,3,3,4,15,6,5,10,1,2,13,8,12,5,7,14,11,12,4,11,2,15,8,1,13,1,6,10,4,13,9,0,8,6,15,9,3,8,0,7,11,4,1,15,2,14,12,3,5,11,10,5,14,2,7,12,7,13,13,8,14,11,3,5,0,6,6,15,9,0,10,3,1,4,2,7,8,2,5,12,11,1,12,10,4,14,15,9,10,3,6,15,9,0,0,6,12,10,11,1,7,13,13,8,15,9,1,4,3,5,14,11,5,12,2,7,8,2,4,14,2,14,12,11,4,2,1,12,7,4,10,7,11,13,6,1,8,5,5,0,3,15,15,10,13,3,0,9,14,8,9,6,4,11,2,8,1,12,11,7,10,1,13,14,7,2,8,13,15,6,9,15,12,0,5,9,6,10,3,4,0,5,14,3,12,10,1,15,10,4,15,2,9,7,2,12,6,9,8,5,0,6,13,1,3,13,4,14,14,0,7,11,5,3,11,8,9,4,14,3,15,2,5,12,2,9,8,5,12,15,3,10,7,11,0,14,4,1,10,7,1,6,13,0,11,8,6,13,4,13,11,0,2,11,14,7,15,4,0,9,8,1,13,10,3,14,12,3,9,5,7,12,5,2,10,15,6,8,1,6,1,6,4,11,11,13,13,8,12,1,3,4,7,10,14,7,10,9,15,5,6,0,8,15,0,14,5,2,9,3,2,12,13,1,2,15,8,13,4,8,6,10,15,3,11,7,1,4,10,12,9,5,3,6,14,11,5,0,0,14,12,9,7,2,7,2,11,1,4,14,1,7,9,4,12,10,14,8,2,13,0,15,6,12,10,9,13,0,15,3,3,5,5,6,8,11];Da.substitute=function(i,s){for(var a=0,o=0;o<4;o++){var c=i>>>18-o*6&63,u=e[o*64+c];a<<=4,a|=u}for(var o=0;o<4;o++){var c=s>>>18-o*6&63,u=e[4*64+o*64+c];a<<=4,a|=u}return a>>>0};var r=[16,25,12,11,3,20,4,15,31,17,9,6,27,14,1,22,30,24,8,18,0,5,29,23,13,19,2,26,10,21,28,7];return Da.permute=function(i){for(var s=0,a=0;a<r.length;a++)s<<=1,s|=i>>>r[a]&1;return s>>>0},Da.padSplit=function(i,s,a){for(var o=i.toString(2);o.length<s;)o="0"+o;for(var c=[],u=0;u<s;u+=a)c.push(o.slice(u,u+a));return c.join(" ")},Da}var WE,IG;function Fo(){if(IG)return WE;IG=1,WE=t;function t(e,r){if(!e)throw new Error(r||"Assertion failed")}return t.equal=function(r,n,i){if(r!=n)throw new Error(i||"Assertion failed: "+r+" != "+n)},WE}var GE,PG;function JD(){if(PG)return GE;PG=1;var t=Fo();function e(r){this.options=r,this.type=this.options.type,this.blockSize=8,this._init(),this.buffer=new Array(this.blockSize),this.bufferOff=0,this.padding=r.padding!==!1}return GE=e,e.prototype._init=function(){},e.prototype.update=function(n){return n.length===0?[]:this.type==="decrypt"?this._updateDecrypt(n):this._updateEncrypt(n)},e.prototype._buffer=function(n,i){for(var s=Math.min(this.buffer.length-this.bufferOff,n.length-i),a=0;a<s;a++)this.buffer[this.bufferOff+a]=n[i+a];return this.bufferOff+=s,s},e.prototype._flushBuffer=function(n,i){return this._update(this.buffer,0,n,i),this.bufferOff=0,this.blockSize},e.prototype._updateEncrypt=function(n){var i=0,s=0,a=(this.bufferOff+n.length)/this.blockSize|0,o=new Array(a*this.blockSize);this.bufferOff!==0&&(i+=this._buffer(n,i),this.bufferOff===this.buffer.length&&(s+=this._flushBuffer(o,s)));for(var c=n.length-(n.length-i)%this.blockSize;i<c;i+=this.blockSize)this._update(n,i,o,s),s+=this.blockSize;for(;i<n.length;i++,this.bufferOff++)this.buffer[this.bufferOff]=n[i];return o},e.prototype._updateDecrypt=function(n){for(var i=0,s=0,a=Math.ceil((this.bufferOff+n.length)/this.blockSize)-1,o=new Array(a*this.blockSize);a>0;a--)i+=this._buffer(n,i),s+=this._flushBuffer(o,s);return i+=this._buffer(n,i),o},e.prototype.final=function(n){var i;n&&(i=this.update(n));var s;return this.type==="encrypt"?s=this._finalEncrypt():s=this._finalDecrypt(),i?i.concat(s):s},e.prototype._pad=function(n,i){if(i===0)return!1;for(;i<n.length;)n[i++]=0;return!0},e.prototype._finalEncrypt=function(){if(!this._pad(this.buffer,this.bufferOff))return[];var n=new Array(this.blockSize);return this._update(this.buffer,0,n,0),n},e.prototype._unpad=function(n){return n},e.prototype._finalDecrypt=function(){t.equal(this.bufferOff,this.blockSize,"Not enough data to decrypt");var n=new Array(this.blockSize);return this._flushBuffer(n,0),this._unpad(n)},GE}var KE,RG;function yfe(){if(RG)return KE;RG=1;var t=Fo(),e=lr(),r=vfe(),n=JD();function i(){this.tmp=new Array(2),this.keys=null}function s(o){n.call(this,o);var c=new i;this._desState=c,this.deriveKeys(c,o.key)}e(s,n),KE=s,s.create=function(c){return new s(c)};var a=[1,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1];return s.prototype.deriveKeys=function(c,u){c.keys=new Array(16*2),t.equal(u.length,this.blockSize,"Invalid key length");var l=r.readUInt32BE(u,0),f=r.readUInt32BE(u,4);r.pc1(l,f,c.tmp,0),l=c.tmp[0],f=c.tmp[1];for(var d=0;d<c.keys.length;d+=2){var h=a[d>>>1];l=r.r28shl(l,h),f=r.r28shl(f,h),r.pc2(l,f,c.keys,d)}},s.prototype._update=function(c,u,l,f){var d=this._desState,h=r.readUInt32BE(c,u),m=r.readUInt32BE(c,u+4);r.ip(h,m,d.tmp,0),h=d.tmp[0],m=d.tmp[1],this.type==="encrypt"?this._encrypt(d,h,m,d.tmp,0):this._decrypt(d,h,m,d.tmp,0),h=d.tmp[0],m=d.tmp[1],r.writeUInt32BE(l,h,f),r.writeUInt32BE(l,m,f+4)},s.prototype._pad=function(c,u){if(this.padding===!1)return!1;for(var l=c.length-u,f=u;f<c.length;f++)c[f]=l;return!0},s.prototype._unpad=function(c){if(this.padding===!1)return c;for(var u=c[c.length-1],l=c.length-u;l<c.length;l++)t.equal(c[l],u);return c.slice(0,c.length-u)},s.prototype._encrypt=function(c,u,l,f,d){for(var h=u,m=l,p=0;p<c.keys.length;p+=2){var g=c.keys[p],v=c.keys[p+1];r.expand(m,c.tmp,0),g^=c.tmp[0],v^=c.tmp[1];var y=r.substitute(g,v),b=r.permute(y),_=m;m=(h^b)>>>0,h=_}r.rip(m,h,f,d)},s.prototype._decrypt=function(c,u,l,f,d){for(var h=l,m=u,p=c.keys.length-2;p>=0;p-=2){var g=c.keys[p],v=c.keys[p+1];r.expand(h,c.tmp,0),g^=c.tmp[0],v^=c.tmp[1];var y=r.substitute(g,v),b=r.permute(y),_=h;h=(m^b)>>>0,m=_}r.rip(h,m,f,d)},KE}var XE={},OG;function nat(){if(OG)return XE;OG=1;var t=Fo(),e=lr(),r={};function n(s){t.equal(s.length,8,"Invalid IV length"),this.iv=new Array(8);for(var a=0;a<this.iv.length;a++)this.iv[a]=s[a]}function i(s){function a(l){s.call(this,l),this._cbcInit()}e(a,s);for(var o=Object.keys(r),c=0;c<o.length;c++){var u=o[c];a.prototype[u]=r[u]}return a.create=function(f){return new a(f)},a}return XE.instantiate=i,r._cbcInit=function(){var a=new n(this.options.iv);this._cbcState=a},r._update=function(a,o,c,u){var l=this._cbcState,f=this.constructor.super_.prototype,d=l.iv;if(this.type==="encrypt"){for(var h=0;h<this.blockSize;h++)d[h]^=a[o+h];f._update.call(this,d,0,c,u);for(var h=0;h<this.blockSize;h++)d[h]=c[u+h]}else{f._update.call(this,a,o,c,u);for(var h=0;h<this.blockSize;h++)c[u+h]^=d[h];for(var h=0;h<this.blockSize;h++)d[h]=a[o+h]}},XE}var YE,BG;function iat(){if(BG)return YE;BG=1;var t=Fo(),e=lr(),r=JD(),n=yfe();function i(a,o){t.equal(o.length,24,"Invalid key length");var c=o.slice(0,8),u=o.slice(8,16),l=o.slice(16,24);a==="encrypt"?this.ciphers=[n.create({type:"encrypt",key:c}),n.create({type:"decrypt",key:u}),n.create({type:"encrypt",key:l})]:this.ciphers=[n.create({type:"decrypt",key:l}),n.create({type:"encrypt",key:u}),n.create({type:"decrypt",key:c})]}function s(a){r.call(this,a);var o=new i(this.type,this.options.key);this._edeState=o}return e(s,r),YE=s,s.create=function(o){return new s(o)},s.prototype._update=function(o,c,u,l){var f=this._edeState;f.ciphers[0]._update(o,c,u,l),f.ciphers[1]._update(u,l,u,l),f.ciphers[2]._update(u,l,u,l)},s.prototype._pad=n.prototype._pad,s.prototype._unpad=n.prototype._unpad,YE}var DG;function sat(){return DG||(DG=1,Bd.utils=vfe(),Bd.Cipher=JD(),Bd.DES=yfe(),Bd.CBC=nat(),Bd.EDE=iat()),Bd}var ZE,MG;function aat(){if(MG)return ZE;MG=1;var t=xd(),e=sat(),r=lr(),n=gr().Buffer,i={"des-ede3-cbc":e.CBC.instantiate(e.EDE),"des-ede3":e.EDE,"des-ede-cbc":e.CBC.instantiate(e.EDE),"des-ede":e.EDE,"des-cbc":e.CBC.instantiate(e.DES),"des-ecb":e.DES};i.des=i["des-cbc"],i.des3=i["des-ede3-cbc"],ZE=s,r(s,t);function s(a){t.call(this);var o=a.mode.toLowerCase(),c=i[o],u;a.decrypt?u="decrypt":u="encrypt";var l=a.key;n.isBuffer(l)||(l=n.from(l)),(o==="des-ede"||o==="des-ede-cbc")&&(l=n.concat([l,l.slice(0,8)]));var f=a.iv;n.isBuffer(f)||(f=n.from(f)),this._des=c.create({key:l,iv:f,type:u})}return s.prototype._update=function(a){return n.from(this._des.update(a))},s.prototype._final=function(){return n.from(this._des.final())},ZE}var lo={},_w={},xw={},NG;function oat(){return NG||(NG=1,xw.encrypt=function(t,e){return t._cipher.encryptBlock(e)},xw.decrypt=function(t,e){return t._cipher.decryptBlock(e)}),xw}var Sw={},JE,FG;function c2(){return FG||(FG=1,JE=function(e,r){for(var n=Math.min(e.length,r.length),i=new Me(n),s=0;s<n;++s)i[s]=e[s]^r[s];return i}),JE}var LG;function cat(){if(LG)return Sw;LG=1;var t=c2();return Sw.encrypt=function(e,r){var n=t(r,e._prev);return e._prev=e._cipher.encryptBlock(n),e._prev},Sw.decrypt=function(e,r){var n=e._prev;e._prev=r;var i=e._cipher.decryptBlock(r);return t(i,n)},Sw}var QE={},$G;function lat(){if($G)return QE;$G=1;var t=gr().Buffer,e=c2();function r(n,i,s){var a=i.length,o=e(i,n._cache);return n._cache=n._cache.slice(a),n._prev=t.concat([n._prev,s?i:o]),o}return QE.encrypt=function(n,i,s){for(var a=t.allocUnsafe(0),o;i.length;)if(n._cache.length===0&&(n._cache=n._cipher.encryptBlock(n._prev),n._prev=t.allocUnsafe(0)),n._cache.length<=i.length)o=n._cache.length,a=t.concat([a,r(n,i.slice(0,o),s)]),i=i.slice(o);else{a=t.concat([a,r(n,i,s)]);break}return a},QE}var ek={},UG;function uat(){if(UG)return ek;UG=1;var t=gr().Buffer;function e(r,n,i){var s=r._cipher.encryptBlock(r._prev),a=s[0]^n;return r._prev=t.concat([r._prev.slice(1),t.from([i?n:a])]),a}return ek.encrypt=function(r,n,i){for(var s=n.length,a=t.allocUnsafe(s),o=-1;++o<s;)a[o]=e(r,n[o],i);return a},ek}var tk={},jG;function fat(){if(jG)return tk;jG=1;var t=gr().Buffer;function e(n,i,s){for(var a,o=-1,c=8,u=0,l,f;++o<c;)a=n._cipher.encryptBlock(n._prev),l=i&1<<7-o?128:0,f=a[0]^l,u+=(f&128)>>o%8,n._prev=r(n._prev,s?l:f);return u}function r(n,i){var s=n.length,a=-1,o=t.allocUnsafe(n.length);for(n=t.concat([n,t.from([i])]);++a<s;)o[a]=n[a]<<1|n[a+1]>>7;return o}return tk.encrypt=function(n,i,s){for(var a=i.length,o=t.allocUnsafe(a),c=-1;++c<a;)o[c]=e(n,i[c],s);return o},tk}var rk={},VG;function dat(){if(VG)return rk;VG=1;var t=c2();function e(r){return r._prev=r._cipher.encryptBlock(r._prev),r._prev}return rk.encrypt=function(r,n){for(;r._cache.length<n.length;)r._cache=Me.concat([r._cache,e(r)]);var i=r._cache.slice(0,n.length);return r._cache=r._cache.slice(n.length),t(n,i)},rk}var nk={},ik,qG;function bfe(){if(qG)return ik;qG=1;function t(e){for(var r=e.length,n;r--;)if(n=e.readUInt8(r),n===255)e.writeUInt8(0,r);else{n++,e.writeUInt8(n,r);break}}return ik=t,ik}var zG;function HG(){if(zG)return nk;zG=1;var t=c2(),e=gr().Buffer,r=bfe();function n(s){var a=s._cipher.encryptBlockRaw(s._prev);return r(s._prev),a}var i=16;return nk.encrypt=function(s,a){var o=Math.ceil(a.length/i),c=s._cache.length;s._cache=e.concat([s._cache,e.allocUnsafe(o*i)]);for(var u=0;u<o;u++){var l=n(s),f=c+u*i;s._cache.writeUInt32BE(l[0],f+0),s._cache.writeUInt32BE(l[1],f+4),s._cache.writeUInt32BE(l[2],f+8),s._cache.writeUInt32BE(l[3],f+12)}var d=s._cache.slice(0,a.length);return s._cache=s._cache.slice(a.length),t(a,d)},nk}const hat={cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},pat={cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},mat={cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},wfe={"aes-128-ecb":{cipher:"AES",key:128,iv:0,mode:"ECB",type:"block"},"aes-192-ecb":{cipher:"AES",key:192,iv:0,mode:"ECB",type:"block"},"aes-256-ecb":{cipher:"AES",key:256,iv:0,mode:"ECB",type:"block"},"aes-128-cbc":{cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},"aes-192-cbc":{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},"aes-256-cbc":{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},aes128:hat,aes192:pat,aes256:mat,"aes-128-cfb":{cipher:"AES",key:128,iv:16,mode:"CFB",type:"stream"},"aes-192-cfb":{cipher:"AES",key:192,iv:16,mode:"CFB",type:"stream"},"aes-256-cfb":{cipher:"AES",key:256,iv:16,mode:"CFB",type:"stream"},"aes-128-cfb8":{cipher:"AES",key:128,iv:16,mode:"CFB8",type:"stream"},"aes-192-cfb8":{cipher:"AES",key:192,iv:16,mode:"CFB8",type:"stream"},"aes-256-cfb8":{cipher:"AES",key:256,iv:16,mode:"CFB8",type:"stream"},"aes-128-cfb1":{cipher:"AES",key:128,iv:16,mode:"CFB1",type:"stream"},"aes-192-cfb1":{cipher:"AES",key:192,iv:16,mode:"CFB1",type:"stream"},"aes-256-cfb1":{cipher:"AES",key:256,iv:16,mode:"CFB1",type:"stream"},"aes-128-ofb":{cipher:"AES",key:128,iv:16,mode:"OFB",type:"stream"},"aes-192-ofb":{cipher:"AES",key:192,iv:16,mode:"OFB",type:"stream"},"aes-256-ofb":{cipher:"AES",key:256,iv:16,mode:"OFB",type:"stream"},"aes-128-ctr":{cipher:"AES",key:128,iv:16,mode:"CTR",type:"stream"},"aes-192-ctr":{cipher:"AES",key:192,iv:16,mode:"CTR",type:"stream"},"aes-256-ctr":{cipher:"AES",key:256,iv:16,mode:"CTR",type:"stream"},"aes-128-gcm":{cipher:"AES",key:128,iv:12,mode:"GCM",type:"auth"},"aes-192-gcm":{cipher:"AES",key:192,iv:12,mode:"GCM",type:"auth"},"aes-256-gcm":{cipher:"AES",key:256,iv:12,mode:"GCM",type:"auth"}};var sk,WG;function QD(){if(WG)return sk;WG=1;var t={ECB:oat(),CBC:cat(),CFB:lat(),CFB8:uat(),CFB1:fat(),OFB:dat(),CTR:HG(),GCM:HG()},e=wfe;for(var r in e)e[r].module=t[e[r].mode];return sk=e,sk}var ak={},GG;function K5(){if(GG)return ak;GG=1;var t=gr().Buffer;function e(o){t.isBuffer(o)||(o=t.from(o));for(var c=o.length/4|0,u=new Array(c),l=0;l<c;l++)u[l]=o.readUInt32BE(l*4);return u}function r(o){for(var c=0;c<o.length;o++)o[c]=0}function n(o,c,u,l,f){for(var d=u[0],h=u[1],m=u[2],p=u[3],g=o[0]^c[0],v=o[1]^c[1],y=o[2]^c[2],b=o[3]^c[3],_,x,E,k,B=4,D=1;D<f;D++)_=d[g>>>24]^h[v>>>16&255]^m[y>>>8&255]^p[b&255]^c[B++],x=d[v>>>24]^h[y>>>16&255]^m[b>>>8&255]^p[g&255]^c[B++],E=d[y>>>24]^h[b>>>16&255]^m[g>>>8&255]^p[v&255]^c[B++],k=d[b>>>24]^h[g>>>16&255]^m[v>>>8&255]^p[y&255]^c[B++],g=_,v=x,y=E,b=k;return _=(l[g>>>24]<<24|l[v>>>16&255]<<16|l[y>>>8&255]<<8|l[b&255])^c[B++],x=(l[v>>>24]<<24|l[y>>>16&255]<<16|l[b>>>8&255]<<8|l[g&255])^c[B++],E=(l[y>>>24]<<24|l[b>>>16&255]<<16|l[g>>>8&255]<<8|l[v&255])^c[B++],k=(l[b>>>24]<<24|l[g>>>16&255]<<16|l[v>>>8&255]<<8|l[y&255])^c[B++],_=_>>>0,x=x>>>0,E=E>>>0,k=k>>>0,[_,x,E,k]}var i=[0,1,2,4,8,16,32,64,128,27,54],s=function(){for(var o=new Array(256),c=0;c<256;c++)c<128?o[c]=c<<1:o[c]=c<<1^283;for(var u=[],l=[],f=[[],[],[],[]],d=[[],[],[],[]],h=0,m=0,p=0;p<256;++p){var g=m^m<<1^m<<2^m<<3^m<<4;g=g>>>8^g&255^99,u[h]=g,l[g]=h;var v=o[h],y=o[v],b=o[y],_=o[g]*257^g*16843008;f[0][h]=_<<24|_>>>8,f[1][h]=_<<16|_>>>16,f[2][h]=_<<8|_>>>24,f[3][h]=_,_=b*16843009^y*65537^v*257^h*16843008,d[0][g]=_<<24|_>>>8,d[1][g]=_<<16|_>>>16,d[2][g]=_<<8|_>>>24,d[3][g]=_,h===0?h=m=1:(h=v^o[o[o[b^v]]],m^=o[o[m]])}return{SBOX:u,INV_SBOX:l,SUB_MIX:f,INV_SUB_MIX:d}}();function a(o){this._key=e(o),this._reset()}return a.blockSize=4*4,a.keySize=256/8,a.prototype.blockSize=a.blockSize,a.prototype.keySize=a.keySize,a.prototype._reset=function(){for(var o=this._key,c=o.length,u=c+6,l=(u+1)*4,f=[],d=0;d<c;d++)f[d]=o[d];for(d=c;d<l;d++){var h=f[d-1];d%c===0?(h=h<<8|h>>>24,h=s.SBOX[h>>>24]<<24|s.SBOX[h>>>16&255]<<16|s.SBOX[h>>>8&255]<<8|s.SBOX[h&255],h^=i[d/c|0]<<24):c>6&&d%c===4&&(h=s.SBOX[h>>>24]<<24|s.SBOX[h>>>16&255]<<16|s.SBOX[h>>>8&255]<<8|s.SBOX[h&255]),f[d]=f[d-c]^h}for(var m=[],p=0;p<l;p++){var g=l-p,v=f[g-(p%4?0:4)];p<4||g<=4?m[p]=v:m[p]=s.INV_SUB_MIX[0][s.SBOX[v>>>24]]^s.INV_SUB_MIX[1][s.SBOX[v>>>16&255]]^s.INV_SUB_MIX[2][s.SBOX[v>>>8&255]]^s.INV_SUB_MIX[3][s.SBOX[v&255]]}this._nRounds=u,this._keySchedule=f,this._invKeySchedule=m},a.prototype.encryptBlockRaw=function(o){return o=e(o),n(o,this._keySchedule,s.SUB_MIX,s.SBOX,this._nRounds)},a.prototype.encryptBlock=function(o){var c=this.encryptBlockRaw(o),u=t.allocUnsafe(16);return u.writeUInt32BE(c[0],0),u.writeUInt32BE(c[1],4),u.writeUInt32BE(c[2],8),u.writeUInt32BE(c[3],12),u},a.prototype.decryptBlock=function(o){o=e(o);var c=o[1];o[1]=o[3],o[3]=c;var u=n(o,this._invKeySchedule,s.INV_SUB_MIX,s.INV_SBOX,this._nRounds),l=t.allocUnsafe(16);return l.writeUInt32BE(u[0],0),l.writeUInt32BE(u[3],4),l.writeUInt32BE(u[2],8),l.writeUInt32BE(u[1],12),l},a.prototype.scrub=function(){r(this._keySchedule),r(this._invKeySchedule),r(this._key)},ak.AES=a,ak}var ok,KG;function gat(){if(KG)return ok;KG=1;var t=gr().Buffer,e=t.alloc(16,0);function r(s){return[s.readUInt32BE(0),s.readUInt32BE(4),s.readUInt32BE(8),s.readUInt32BE(12)]}function n(s){var a=t.allocUnsafe(16);return a.writeUInt32BE(s[0]>>>0,0),a.writeUInt32BE(s[1]>>>0,4),a.writeUInt32BE(s[2]>>>0,8),a.writeUInt32BE(s[3]>>>0,12),a}function i(s){this.h=s,this.state=t.alloc(16,0),this.cache=t.allocUnsafe(0)}return i.prototype.ghash=function(s){for(var a=-1;++a<s.length;)this.state[a]^=s[a];this._multiply()},i.prototype._multiply=function(){for(var s=r(this.h),a=[0,0,0,0],o,c,u,l=-1;++l<128;){for(c=(this.state[~~(l/8)]&1<<7-l%8)!==0,c&&(a[0]^=s[0],a[1]^=s[1],a[2]^=s[2],a[3]^=s[3]),u=(s[3]&1)!==0,o=3;o>0;o--)s[o]=s[o]>>>1|(s[o-1]&1)<<31;s[0]=s[0]>>>1,u&&(s[0]=s[0]^225<<24)}this.state=n(a)},i.prototype.update=function(s){this.cache=t.concat([this.cache,s]);for(var a;this.cache.length>=16;)a=this.cache.slice(0,16),this.cache=this.cache.slice(16),this.ghash(a)},i.prototype.final=function(s,a){return this.cache.length&&this.ghash(t.concat([this.cache,e],16)),this.ghash(n([0,s,0,a])),this.state},ok=i,ok}var ck,XG;function _fe(){if(XG)return ck;XG=1;var t=K5(),e=gr().Buffer,r=xd(),n=lr(),i=gat(),s=c2(),a=bfe();function o(l,f){var d=0;l.length!==f.length&&d++;for(var h=Math.min(l.length,f.length),m=0;m<h;++m)d+=l[m]^f[m];return d}function c(l,f,d){if(f.length===12)return l._finID=e.concat([f,e.from([0,0,0,1])]),e.concat([f,e.from([0,0,0,2])]);var h=new i(d),m=f.length,p=m%16;h.update(f),p&&(p=16-p,h.update(e.alloc(p,0))),h.update(e.alloc(8,0));var g=m*8,v=e.alloc(8);v.writeUIntBE(g,0,8),h.update(v),l._finID=h.state;var y=e.from(l._finID);return a(y),y}function u(l,f,d,h){r.call(this);var m=e.alloc(4,0);this._cipher=new t.AES(f);var p=this._cipher.encryptBlock(m);this._ghash=new i(p),d=c(this,d,p),this._prev=e.from(d),this._cache=e.allocUnsafe(0),this._secCache=e.allocUnsafe(0),this._decrypt=h,this._alen=0,this._len=0,this._mode=l,this._authTag=null,this._called=!1}return n(u,r),u.prototype._update=function(l){if(!this._called&&this._alen){var f=16-this._alen%16;f<16&&(f=e.alloc(f,0),this._ghash.update(f))}this._called=!0;var d=this._mode.encrypt(this,l);return this._decrypt?this._ghash.update(l):this._ghash.update(d),this._len+=l.length,d},u.prototype._final=function(){if(this._decrypt&&!this._authTag)throw new Error("Unsupported state or unable to authenticate data");var l=s(this._ghash.final(this._alen*8,this._len*8),this._cipher.encryptBlock(this._finID));if(this._decrypt&&o(l,this._authTag))throw new Error("Unsupported state or unable to authenticate data");this._authTag=l,this._cipher.scrub()},u.prototype.getAuthTag=function(){if(this._decrypt||!e.isBuffer(this._authTag))throw new Error("Attempting to get auth tag in unsupported state");return this._authTag},u.prototype.setAuthTag=function(f){if(!this._decrypt)throw new Error("Attempting to set auth tag in unsupported state");this._authTag=f},u.prototype.setAAD=function(f){if(this._called)throw new Error("Attempting to set AAD in unsupported state");this._ghash.update(f),this._alen+=f.length},ck=u,ck}var lk,YG;function xfe(){if(YG)return lk;YG=1;var t=K5(),e=gr().Buffer,r=xd(),n=lr();function i(s,a,o,c){r.call(this),this._cipher=new t.AES(a),this._prev=e.from(o),this._cache=e.allocUnsafe(0),this._secCache=e.allocUnsafe(0),this._decrypt=c,this._mode=s}return n(i,r),i.prototype._update=function(s){return this._mode.encrypt(this,s,this._decrypt)},i.prototype._final=function(){this._cipher.scrub()},lk=i,lk}var uk,ZG;function X5(){if(ZG)return uk;ZG=1;var t=gr().Buffer,e=XD();function r(n,i,s,a){if(t.isBuffer(n)||(n=t.from(n,"binary")),i&&(t.isBuffer(i)||(i=t.from(i,"binary")),i.length!==8))throw new RangeError("salt should be Buffer with 8 byte length");for(var o=s/8,c=t.alloc(o),u=t.alloc(a||0),l=t.alloc(0);o>0||a>0;){var f=new e;f.update(l),f.update(n),i&&f.update(i),l=f.digest();var d=0;if(o>0){var h=c.length-o;d=Math.min(o,l.length),l.copy(c,h,0,d),o-=d}if(d<l.length&&a>0){var m=u.length-a,p=Math.min(a,l.length-d);l.copy(u,m,d,d+p),a-=p}}return l.fill(0),{key:c,iv:u}}return uk=r,uk}var JG;function vat(){if(JG)return _w;JG=1;var t=QD(),e=_fe(),r=gr().Buffer,n=xfe(),i=xd(),s=K5(),a=X5(),o=lr();function c(h,m,p){i.call(this),this._cache=new l,this._cipher=new s.AES(m),this._prev=r.from(p),this._mode=h,this._autopadding=!0}o(c,i),c.prototype._update=function(h){this._cache.add(h);for(var m,p,g=[];m=this._cache.get();)p=this._mode.encrypt(this,m),g.push(p);return r.concat(g)};var u=r.alloc(16,16);c.prototype._final=function(){var h=this._cache.flush();if(this._autopadding)return h=this._mode.encrypt(this,h),this._cipher.scrub(),h;if(!h.equals(u))throw this._cipher.scrub(),new Error("data not multiple of block length")},c.prototype.setAutoPadding=function(h){return this._autopadding=!!h,this};function l(){this.cache=r.allocUnsafe(0)}l.prototype.add=function(h){this.cache=r.concat([this.cache,h])},l.prototype.get=function(){if(this.cache.length>15){var h=this.cache.slice(0,16);return this.cache=this.cache.slice(16),h}return null},l.prototype.flush=function(){for(var h=16-this.cache.length,m=r.allocUnsafe(h),p=-1;++p<h;)m.writeUInt8(h,p);return r.concat([this.cache,m])};function f(h,m,p){var g=t[h.toLowerCase()];if(!g)throw new TypeError("invalid suite type");if(typeof m=="string"&&(m=r.from(m)),m.length!==g.key/8)throw new TypeError("invalid key length "+m.length);if(typeof p=="string"&&(p=r.from(p)),g.mode!=="GCM"&&p.length!==g.iv)throw new TypeError("invalid iv length "+p.length);return g.type==="stream"?new n(g.module,m,p):g.type==="auth"?new e(g.module,m,p):new c(g.module,m,p)}function d(h,m){var p=t[h.toLowerCase()];if(!p)throw new TypeError("invalid suite type");var g=a(m,!1,p.key,p.iv);return f(h,g.key,g.iv)}return _w.createCipheriv=f,_w.createCipher=d,_w}var Ew={},QG;function yat(){if(QG)return Ew;QG=1;var t=_fe(),e=gr().Buffer,r=QD(),n=xfe(),i=xd(),s=K5(),a=X5(),o=lr();function c(h,m,p){i.call(this),this._cache=new u,this._last=void 0,this._cipher=new s.AES(m),this._prev=e.from(p),this._mode=h,this._autopadding=!0}o(c,i),c.prototype._update=function(h){this._cache.add(h);for(var m,p,g=[];m=this._cache.get(this._autopadding);)p=this._mode.decrypt(this,m),g.push(p);return e.concat(g)},c.prototype._final=function(){var h=this._cache.flush();if(this._autopadding)return l(this._mode.decrypt(this,h));if(h)throw new Error("data not multiple of block length")},c.prototype.setAutoPadding=function(h){return this._autopadding=!!h,this};function u(){this.cache=e.allocUnsafe(0)}u.prototype.add=function(h){this.cache=e.concat([this.cache,h])},u.prototype.get=function(h){var m;if(h){if(this.cache.length>16)return m=this.cache.slice(0,16),this.cache=this.cache.slice(16),m}else if(this.cache.length>=16)return m=this.cache.slice(0,16),this.cache=this.cache.slice(16),m;return null},u.prototype.flush=function(){if(this.cache.length)return this.cache};function l(h){var m=h[15];if(m<1||m>16)throw new Error("unable to decrypt data");for(var p=-1;++p<m;)if(h[p+(16-m)]!==m)throw new Error("unable to decrypt data");if(m!==16)return h.slice(0,16-m)}function f(h,m,p){var g=r[h.toLowerCase()];if(!g)throw new TypeError("invalid suite type");if(typeof p=="string"&&(p=e.from(p)),g.mode!=="GCM"&&p.length!==g.iv)throw new TypeError("invalid iv length "+p.length);if(typeof m=="string"&&(m=e.from(m)),m.length!==g.key/8)throw new TypeError("invalid key length "+m.length);return g.type==="stream"?new n(g.module,m,p,!0):g.type==="auth"?new t(g.module,m,p,!0):new c(g.module,m,p)}function d(h,m){var p=r[h.toLowerCase()];if(!p)throw new TypeError("invalid suite type");var g=a(m,!1,p.key,p.iv);return f(h,g.key,g.iv)}return Ew.createDecipher=d,Ew.createDecipheriv=f,Ew}var eK;function eM(){if(eK)return lo;eK=1;var t=vat(),e=yat(),r=wfe;function n(){return Object.keys(r)}return lo.createCipher=lo.Cipher=t.createCipher,lo.createCipheriv=lo.Cipheriv=t.createCipheriv,lo.createDecipher=lo.Decipher=e.createDecipher,lo.createDecipheriv=lo.Decipheriv=e.createDecipheriv,lo.listCiphers=lo.getCiphers=n,lo}var fk={},tK;function bat(){return tK||(tK=1,function(t){t["des-ecb"]={key:8,iv:0},t["des-cbc"]=t.des={key:8,iv:8},t["des-ede3-cbc"]=t.des3={key:24,iv:8},t["des-ede3"]={key:24,iv:0},t["des-ede-cbc"]={key:16,iv:8},t["des-ede"]={key:16,iv:0}}(fk)),fk}var rK;function wat(){if(rK)return co;rK=1;var t=aat(),e=eM(),r=QD(),n=bat(),i=X5();function s(l,f){l=l.toLowerCase();var d,h;if(r[l])d=r[l].key,h=r[l].iv;else if(n[l])d=n[l].key*8,h=n[l].iv;else throw new TypeError("invalid suite type");var m=i(f,!1,d,h);return o(l,m.key,m.iv)}function a(l,f){l=l.toLowerCase();var d,h;if(r[l])d=r[l].key,h=r[l].iv;else if(n[l])d=n[l].key*8,h=n[l].iv;else throw new TypeError("invalid suite type");var m=i(f,!1,d,h);return c(l,m.key,m.iv)}function o(l,f,d){if(l=l.toLowerCase(),r[l])return e.createCipheriv(l,f,d);if(n[l])return new t({key:f,iv:d,mode:l});throw new TypeError("invalid suite type")}function c(l,f,d){if(l=l.toLowerCase(),r[l])return e.createDecipheriv(l,f,d);if(n[l])return new t({key:f,iv:d,mode:l,decrypt:!0});throw new TypeError("invalid suite type")}function u(){return Object.keys(n).concat(e.getCiphers())}return co.createCipher=co.Cipher=s,co.createCipheriv=co.Cipheriv=o,co.createDecipher=co.Decipher=a,co.createDecipheriv=co.Decipheriv=c,co.listCiphers=co.getCiphers=u,co}var Dd={},k3={exports:{}},_at=k3.exports,nK;function vs(){return nK||(nK=1,function(t){(function(e,r){function n(U,S){if(!U)throw new Error(S||"Assertion failed")}function i(U,S){U.super_=S;var T=function(){};T.prototype=S.prototype,U.prototype=new T,U.prototype.constructor=U}function s(U,S,T){if(s.isBN(U))return U;this.negative=0,this.words=null,this.length=0,this.red=null,U!==null&&((S==="le"||S==="be")&&(T=S,S=10),this._init(U||0,S||10,T||"be"))}typeof e=="object"?e.exports=s:r.BN=s,s.BN=s,s.wordSize=26;var a;try{typeof window<"u"&&typeof window.Buffer<"u"?a=window.Buffer:a=jp.Buffer}catch{}s.isBN=function(S){return S instanceof s?!0:S!==null&&typeof S=="object"&&S.constructor.wordSize===s.wordSize&&Array.isArray(S.words)},s.max=function(S,T){return S.cmp(T)>0?S:T},s.min=function(S,T){return S.cmp(T)<0?S:T},s.prototype._init=function(S,T,w){if(typeof S=="number")return this._initNumber(S,T,w);if(typeof S=="object")return this._initArray(S,T,w);T==="hex"&&(T=16),n(T===(T|0)&&T>=2&&T<=36),S=S.toString().replace(/\s+/g,"");var A=0;S[0]==="-"&&(A++,this.negative=1),A<S.length&&(T===16?this._parseHex(S,A,w):(this._parseBase(S,T,A),w==="le"&&this._initArray(this.toArray(),T,w)))},s.prototype._initNumber=function(S,T,w){S<0&&(this.negative=1,S=-S),S<67108864?(this.words=[S&67108863],this.length=1):S<4503599627370496?(this.words=[S&67108863,S/67108864&67108863],this.length=2):(n(S<9007199254740992),this.words=[S&67108863,S/67108864&67108863,1],this.length=3),w==="le"&&this._initArray(this.toArray(),T,w)},s.prototype._initArray=function(S,T,w){if(n(typeof S.length=="number"),S.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(S.length/3),this.words=new Array(this.length);for(var A=0;A<this.length;A++)this.words[A]=0;var F,P,O=0;if(w==="be")for(A=S.length-1,F=0;A>=0;A-=3)P=S[A]|S[A-1]<<8|S[A-2]<<16,this.words[F]|=P<<O&67108863,this.words[F+1]=P>>>26-O&67108863,O+=24,O>=26&&(O-=26,F++);else if(w==="le")for(A=0,F=0;A<S.length;A+=3)P=S[A]|S[A+1]<<8|S[A+2]<<16,this.words[F]|=P<<O&67108863,this.words[F+1]=P>>>26-O&67108863,O+=24,O>=26&&(O-=26,F++);return this.strip()};function o(U,S){var T=U.charCodeAt(S);return T>=65&&T<=70?T-55:T>=97&&T<=102?T-87:T-48&15}function c(U,S,T){var w=o(U,T);return T-1>=S&&(w|=o(U,T-1)<<4),w}s.prototype._parseHex=function(S,T,w){this.length=Math.ceil((S.length-T)/6),this.words=new Array(this.length);for(var A=0;A<this.length;A++)this.words[A]=0;var F=0,P=0,O;if(w==="be")for(A=S.length-1;A>=T;A-=2)O=c(S,T,A)<<F,this.words[P]|=O&67108863,F>=18?(F-=18,P+=1,this.words[P]|=O>>>26):F+=8;else{var R=S.length-T;for(A=R%2===0?T+1:T;A<S.length;A+=2)O=c(S,T,A)<<F,this.words[P]|=O&67108863,F>=18?(F-=18,P+=1,this.words[P]|=O>>>26):F+=8}this.strip()};function u(U,S,T,w){for(var A=0,F=Math.min(U.length,T),P=S;P<F;P++){var O=U.charCodeAt(P)-48;A*=w,O>=49?A+=O-49+10:O>=17?A+=O-17+10:A+=O}return A}s.prototype._parseBase=function(S,T,w){this.words=[0],this.length=1;for(var A=0,F=1;F<=67108863;F*=T)A++;A--,F=F/T|0;for(var P=S.length-w,O=P%A,R=Math.min(P,P-O)+w,I=0,C=w;C<R;C+=A)I=u(S,C,C+A,T),this.imuln(F),this.words[0]+I<67108864?this.words[0]+=I:this._iaddn(I);if(O!==0){var M=1;for(I=u(S,C,S.length,T),C=0;C<O;C++)M*=T;this.imuln(M),this.words[0]+I<67108864?this.words[0]+=I:this._iaddn(I)}this.strip()},s.prototype.copy=function(S){S.words=new Array(this.length);for(var T=0;T<this.length;T++)S.words[T]=this.words[T];S.length=this.length,S.negative=this.negative,S.red=this.red},s.prototype.clone=function(){var S=new s(null);return this.copy(S),S},s.prototype._expand=function(S){for(;this.length<S;)this.words[this.length++]=0;return this},s.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},s.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},s.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var l=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],f=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],d=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function(S,T){S=S||10,T=T|0||1;var w;if(S===16||S==="hex"){w="";for(var A=0,F=0,P=0;P<this.length;P++){var O=this.words[P],R=((O<<A|F)&16777215).toString(16);F=O>>>24-A&16777215,A+=2,A>=26&&(A-=26,P--),F!==0||P!==this.length-1?w=l[6-R.length]+R+w:w=R+w}for(F!==0&&(w=F.toString(16)+w);w.length%T!==0;)w="0"+w;return this.negative!==0&&(w="-"+w),w}if(S===(S|0)&&S>=2&&S<=36){var I=f[S],C=d[S];w="";var M=this.clone();for(M.negative=0;!M.isZero();){var L=M.modn(C).toString(S);M=M.idivn(C),M.isZero()?w=L+w:w=l[I-L.length]+L+w}for(this.isZero()&&(w="0"+w);w.length%T!==0;)w="0"+w;return this.negative!==0&&(w="-"+w),w}n(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var S=this.words[0];return this.length===2?S+=this.words[1]*67108864:this.length===3&&this.words[2]===1?S+=4503599627370496+this.words[1]*67108864:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-S:S},s.prototype.toJSON=function(){return this.toString(16)},s.prototype.toBuffer=function(S,T){return n(typeof a<"u"),this.toArrayLike(a,S,T)},s.prototype.toArray=function(S,T){return this.toArrayLike(Array,S,T)},s.prototype.toArrayLike=function(S,T,w){var A=this.byteLength(),F=w||Math.max(1,A);n(A<=F,"byte array longer than desired length"),n(F>0,"Requested array length <= 0"),this.strip();var P=T==="le",O=new S(F),R,I,C=this.clone();if(P){for(I=0;!C.isZero();I++)R=C.andln(255),C.iushrn(8),O[I]=R;for(;I<F;I++)O[I]=0}else{for(I=0;I<F-A;I++)O[I]=0;for(I=0;!C.isZero();I++)R=C.andln(255),C.iushrn(8),O[F-I-1]=R}return O},Math.clz32?s.prototype._countBits=function(S){return 32-Math.clz32(S)}:s.prototype._countBits=function(S){var T=S,w=0;return T>=4096&&(w+=13,T>>>=13),T>=64&&(w+=7,T>>>=7),T>=8&&(w+=4,T>>>=4),T>=2&&(w+=2,T>>>=2),w+T},s.prototype._zeroBits=function(S){if(S===0)return 26;var T=S,w=0;return(T&8191)===0&&(w+=13,T>>>=13),(T&127)===0&&(w+=7,T>>>=7),(T&15)===0&&(w+=4,T>>>=4),(T&3)===0&&(w+=2,T>>>=2),(T&1)===0&&w++,w},s.prototype.bitLength=function(){var S=this.words[this.length-1],T=this._countBits(S);return(this.length-1)*26+T};function h(U){for(var S=new Array(U.bitLength()),T=0;T<S.length;T++){var w=T/26|0,A=T%26;S[T]=(U.words[w]&1<<A)>>>A}return S}s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var S=0,T=0;T<this.length;T++){var w=this._zeroBits(this.words[T]);if(S+=w,w!==26)break}return S},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(S){return this.negative!==0?this.abs().inotn(S).iaddn(1):this.clone()},s.prototype.fromTwos=function(S){return this.testn(S-1)?this.notn(S).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return this.negative!==0},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(S){for(;this.length<S.length;)this.words[this.length++]=0;for(var T=0;T<S.length;T++)this.words[T]=this.words[T]|S.words[T];return this.strip()},s.prototype.ior=function(S){return n((this.negative|S.negative)===0),this.iuor(S)},s.prototype.or=function(S){return this.length>S.length?this.clone().ior(S):S.clone().ior(this)},s.prototype.uor=function(S){return this.length>S.length?this.clone().iuor(S):S.clone().iuor(this)},s.prototype.iuand=function(S){var T;this.length>S.length?T=S:T=this;for(var w=0;w<T.length;w++)this.words[w]=this.words[w]&S.words[w];return this.length=T.length,this.strip()},s.prototype.iand=function(S){return n((this.negative|S.negative)===0),this.iuand(S)},s.prototype.and=function(S){return this.length>S.length?this.clone().iand(S):S.clone().iand(this)},s.prototype.uand=function(S){return this.length>S.length?this.clone().iuand(S):S.clone().iuand(this)},s.prototype.iuxor=function(S){var T,w;this.length>S.length?(T=this,w=S):(T=S,w=this);for(var A=0;A<w.length;A++)this.words[A]=T.words[A]^w.words[A];if(this!==T)for(;A<T.length;A++)this.words[A]=T.words[A];return this.length=T.length,this.strip()},s.prototype.ixor=function(S){return n((this.negative|S.negative)===0),this.iuxor(S)},s.prototype.xor=function(S){return this.length>S.length?this.clone().ixor(S):S.clone().ixor(this)},s.prototype.uxor=function(S){return this.length>S.length?this.clone().iuxor(S):S.clone().iuxor(this)},s.prototype.inotn=function(S){n(typeof S=="number"&&S>=0);var T=Math.ceil(S/26)|0,w=S%26;this._expand(T),w>0&&T--;for(var A=0;A<T;A++)this.words[A]=~this.words[A]&67108863;return w>0&&(this.words[A]=~this.words[A]&67108863>>26-w),this.strip()},s.prototype.notn=function(S){return this.clone().inotn(S)},s.prototype.setn=function(S,T){n(typeof S=="number"&&S>=0);var w=S/26|0,A=S%26;return this._expand(w+1),T?this.words[w]=this.words[w]|1<<A:this.words[w]=this.words[w]&~(1<<A),this.strip()},s.prototype.iadd=function(S){var T;if(this.negative!==0&&S.negative===0)return this.negative=0,T=this.isub(S),this.negative^=1,this._normSign();if(this.negative===0&&S.negative!==0)return S.negative=0,T=this.isub(S),S.negative=1,T._normSign();var w,A;this.length>S.length?(w=this,A=S):(w=S,A=this);for(var F=0,P=0;P<A.length;P++)T=(w.words[P]|0)+(A.words[P]|0)+F,this.words[P]=T&67108863,F=T>>>26;for(;F!==0&&P<w.length;P++)T=(w.words[P]|0)+F,this.words[P]=T&67108863,F=T>>>26;if(this.length=w.length,F!==0)this.words[this.length]=F,this.length++;else if(w!==this)for(;P<w.length;P++)this.words[P]=w.words[P];return this},s.prototype.add=function(S){var T;return S.negative!==0&&this.negative===0?(S.negative=0,T=this.sub(S),S.negative^=1,T):S.negative===0&&this.negative!==0?(this.negative=0,T=S.sub(this),this.negative=1,T):this.length>S.length?this.clone().iadd(S):S.clone().iadd(this)},s.prototype.isub=function(S){if(S.negative!==0){S.negative=0;var T=this.iadd(S);return S.negative=1,T._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(S),this.negative=1,this._normSign();var w=this.cmp(S);if(w===0)return this.negative=0,this.length=1,this.words[0]=0,this;var A,F;w>0?(A=this,F=S):(A=S,F=this);for(var P=0,O=0;O<F.length;O++)T=(A.words[O]|0)-(F.words[O]|0)+P,P=T>>26,this.words[O]=T&67108863;for(;P!==0&&O<A.length;O++)T=(A.words[O]|0)+P,P=T>>26,this.words[O]=T&67108863;if(P===0&&O<A.length&&A!==this)for(;O<A.length;O++)this.words[O]=A.words[O];return this.length=Math.max(this.length,O),A!==this&&(this.negative=1),this.strip()},s.prototype.sub=function(S){return this.clone().isub(S)};function m(U,S,T){T.negative=S.negative^U.negative;var w=U.length+S.length|0;T.length=w,w=w-1|0;var A=U.words[0]|0,F=S.words[0]|0,P=A*F,O=P&67108863,R=P/67108864|0;T.words[0]=O;for(var I=1;I<w;I++){for(var C=R>>>26,M=R&67108863,L=Math.min(I,S.length-1),N=Math.max(0,I-U.length+1);N<=L;N++){var H=I-N|0;A=U.words[H]|0,F=S.words[N]|0,P=A*F+M,C+=P/67108864|0,M=P&67108863}T.words[I]=M|0,R=C|0}return R!==0?T.words[I]=R|0:T.length--,T.strip()}var p=function(S,T,w){var A=S.words,F=T.words,P=w.words,O=0,R,I,C,M=A[0]|0,L=M&8191,N=M>>>13,H=A[1]|0,W=H&8191,q=H>>>13,G=A[2]|0,Y=G&8191,te=G>>>13,Q=A[3]|0,j=Q&8191,Z=Q>>>13,V=A[4]|0,ne=V&8191,se=V>>>13,J=A[5]|0,ee=J&8191,ie=J>>>13,le=A[6]|0,ue=le&8191,me=le>>>13,be=A[7]|0,_e=be&8191,xe=be>>>13,Be=A[8]|0,re=Be&8191,K=Be>>>13,X=A[9]|0,ce=X&8191,ye=X>>>13,Ee=F[0]|0,Se=Ee&8191,rt=Ee>>>13,ct=F[1]|0,we=ct&8191,ke=ct>>>13,Ye=F[2]|0,ot=Ye&8191,xt=Ye>>>13,ut=F[3]|0,gt=ut&8191,er=ut>>>13,ur=F[4]|0,Tt=ur&8191,Zr=ur>>>13,Br=F[5]|0,bt=Br&8191,cn=Br>>>13,ln=F[6]|0,jt=ln&8191,Cr=ln>>>13,Jr=F[7]|0,Lt=Jr&8191,Qr=Jr>>>13,oe=F[8]|0,he=oe&8191,fe=oe>>>13,de=F[9]|0,pe=de&8191,ge=de>>>13;w.negative=S.negative^T.negative,w.length=19,R=Math.imul(L,Se),I=Math.imul(L,rt),I=I+Math.imul(N,Se)|0,C=Math.imul(N,rt);var Ae=(O+R|0)+((I&8191)<<13)|0;O=(C+(I>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,R=Math.imul(W,Se),I=Math.imul(W,rt),I=I+Math.imul(q,Se)|0,C=Math.imul(q,rt),R=R+Math.imul(L,we)|0,I=I+Math.imul(L,ke)|0,I=I+Math.imul(N,we)|0,C=C+Math.imul(N,ke)|0;var De=(O+R|0)+((I&8191)<<13)|0;O=(C+(I>>>13)|0)+(De>>>26)|0,De&=67108863,R=Math.imul(Y,Se),I=Math.imul(Y,rt),I=I+Math.imul(te,Se)|0,C=Math.imul(te,rt),R=R+Math.imul(W,we)|0,I=I+Math.imul(W,ke)|0,I=I+Math.imul(q,we)|0,C=C+Math.imul(q,ke)|0,R=R+Math.imul(L,ot)|0,I=I+Math.imul(L,xt)|0,I=I+Math.imul(N,ot)|0,C=C+Math.imul(N,xt)|0;var Ce=(O+R|0)+((I&8191)<<13)|0;O=(C+(I>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,R=Math.imul(j,Se),I=Math.imul(j,rt),I=I+Math.imul(Z,Se)|0,C=Math.imul(Z,rt),R=R+Math.imul(Y,we)|0,I=I+Math.imul(Y,ke)|0,I=I+Math.imul(te,we)|0,C=C+Math.imul(te,ke)|0,R=R+Math.imul(W,ot)|0,I=I+Math.imul(W,xt)|0,I=I+Math.imul(q,ot)|0,C=C+Math.imul(q,xt)|0,R=R+Math.imul(L,gt)|0,I=I+Math.imul(L,er)|0,I=I+Math.imul(N,gt)|0,C=C+Math.imul(N,er)|0;var Ie=(O+R|0)+((I&8191)<<13)|0;O=(C+(I>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,R=Math.imul(ne,Se),I=Math.imul(ne,rt),I=I+Math.imul(se,Se)|0,C=Math.imul(se,rt),R=R+Math.imul(j,we)|0,I=I+Math.imul(j,ke)|0,I=I+Math.imul(Z,we)|0,C=C+Math.imul(Z,ke)|0,R=R+Math.imul(Y,ot)|0,I=I+Math.imul(Y,xt)|0,I=I+Math.imul(te,ot)|0,C=C+Math.imul(te,xt)|0,R=R+Math.imul(W,gt)|0,I=I+Math.imul(W,er)|0,I=I+Math.imul(q,gt)|0,C=C+Math.imul(q,er)|0,R=R+Math.imul(L,Tt)|0,I=I+Math.imul(L,Zr)|0,I=I+Math.imul(N,Tt)|0,C=C+Math.imul(N,Zr)|0;var Pe=(O+R|0)+((I&8191)<<13)|0;O=(C+(I>>>13)|0)+(Pe>>>26)|0,Pe&=67108863,R=Math.imul(ee,Se),I=Math.imul(ee,rt),I=I+Math.imul(ie,Se)|0,C=Math.imul(ie,rt),R=R+Math.imul(ne,we)|0,I=I+Math.imul(ne,ke)|0,I=I+Math.imul(se,we)|0,C=C+Math.imul(se,ke)|0,R=R+Math.imul(j,ot)|0,I=I+Math.imul(j,xt)|0,I=I+Math.imul(Z,ot)|0,C=C+Math.imul(Z,xt)|0,R=R+Math.imul(Y,gt)|0,I=I+Math.imul(Y,er)|0,I=I+Math.imul(te,gt)|0,C=C+Math.imul(te,er)|0,R=R+Math.imul(W,Tt)|0,I=I+Math.imul(W,Zr)|0,I=I+Math.imul(q,Tt)|0,C=C+Math.imul(q,Zr)|0,R=R+Math.imul(L,bt)|0,I=I+Math.imul(L,cn)|0,I=I+Math.imul(N,bt)|0,C=C+Math.imul(N,cn)|0;var Ue=(O+R|0)+((I&8191)<<13)|0;O=(C+(I>>>13)|0)+(Ue>>>26)|0,Ue&=67108863,R=Math.imul(ue,Se),I=Math.imul(ue,rt),I=I+Math.imul(me,Se)|0,C=Math.imul(me,rt),R=R+Math.imul(ee,we)|0,I=I+Math.imul(ee,ke)|0,I=I+Math.imul(ie,we)|0,C=C+Math.imul(ie,ke)|0,R=R+Math.imul(ne,ot)|0,I=I+Math.imul(ne,xt)|0,I=I+Math.imul(se,ot)|0,C=C+Math.imul(se,xt)|0,R=R+Math.imul(j,gt)|0,I=I+Math.imul(j,er)|0,I=I+Math.imul(Z,gt)|0,C=C+Math.imul(Z,er)|0,R=R+Math.imul(Y,Tt)|0,I=I+Math.imul(Y,Zr)|0,I=I+Math.imul(te,Tt)|0,C=C+Math.imul(te,Zr)|0,R=R+Math.imul(W,bt)|0,I=I+Math.imul(W,cn)|0,I=I+Math.imul(q,bt)|0,C=C+Math.imul(q,cn)|0,R=R+Math.imul(L,jt)|0,I=I+Math.imul(L,Cr)|0,I=I+Math.imul(N,jt)|0,C=C+Math.imul(N,Cr)|0;var He=(O+R|0)+((I&8191)<<13)|0;O=(C+(I>>>13)|0)+(He>>>26)|0,He&=67108863,R=Math.imul(_e,Se),I=Math.imul(_e,rt),I=I+Math.imul(xe,Se)|0,C=Math.imul(xe,rt),R=R+Math.imul(ue,we)|0,I=I+Math.imul(ue,ke)|0,I=I+Math.imul(me,we)|0,C=C+Math.imul(me,ke)|0,R=R+Math.imul(ee,ot)|0,I=I+Math.imul(ee,xt)|0,I=I+Math.imul(ie,ot)|0,C=C+Math.imul(ie,xt)|0,R=R+Math.imul(ne,gt)|0,I=I+Math.imul(ne,er)|0,I=I+Math.imul(se,gt)|0,C=C+Math.imul(se,er)|0,R=R+Math.imul(j,Tt)|0,I=I+Math.imul(j,Zr)|0,I=I+Math.imul(Z,Tt)|0,C=C+Math.imul(Z,Zr)|0,R=R+Math.imul(Y,bt)|0,I=I+Math.imul(Y,cn)|0,I=I+Math.imul(te,bt)|0,C=C+Math.imul(te,cn)|0,R=R+Math.imul(W,jt)|0,I=I+Math.imul(W,Cr)|0,I=I+Math.imul(q,jt)|0,C=C+Math.imul(q,Cr)|0,R=R+Math.imul(L,Lt)|0,I=I+Math.imul(L,Qr)|0,I=I+Math.imul(N,Lt)|0,C=C+Math.imul(N,Qr)|0;var at=(O+R|0)+((I&8191)<<13)|0;O=(C+(I>>>13)|0)+(at>>>26)|0,at&=67108863,R=Math.imul(re,Se),I=Math.imul(re,rt),I=I+Math.imul(K,Se)|0,C=Math.imul(K,rt),R=R+Math.imul(_e,we)|0,I=I+Math.imul(_e,ke)|0,I=I+Math.imul(xe,we)|0,C=C+Math.imul(xe,ke)|0,R=R+Math.imul(ue,ot)|0,I=I+Math.imul(ue,xt)|0,I=I+Math.imul(me,ot)|0,C=C+Math.imul(me,xt)|0,R=R+Math.imul(ee,gt)|0,I=I+Math.imul(ee,er)|0,I=I+Math.imul(ie,gt)|0,C=C+Math.imul(ie,er)|0,R=R+Math.imul(ne,Tt)|0,I=I+Math.imul(ne,Zr)|0,I=I+Math.imul(se,Tt)|0,C=C+Math.imul(se,Zr)|0,R=R+Math.imul(j,bt)|0,I=I+Math.imul(j,cn)|0,I=I+Math.imul(Z,bt)|0,C=C+Math.imul(Z,cn)|0,R=R+Math.imul(Y,jt)|0,I=I+Math.imul(Y,Cr)|0,I=I+Math.imul(te,jt)|0,C=C+Math.imul(te,Cr)|0,R=R+Math.imul(W,Lt)|0,I=I+Math.imul(W,Qr)|0,I=I+Math.imul(q,Lt)|0,C=C+Math.imul(q,Qr)|0,R=R+Math.imul(L,he)|0,I=I+Math.imul(L,fe)|0,I=I+Math.imul(N,he)|0,C=C+Math.imul(N,fe)|0;var qe=(O+R|0)+((I&8191)<<13)|0;O=(C+(I>>>13)|0)+(qe>>>26)|0,qe&=67108863,R=Math.imul(ce,Se),I=Math.imul(ce,rt),I=I+Math.imul(ye,Se)|0,C=Math.imul(ye,rt),R=R+Math.imul(re,we)|0,I=I+Math.imul(re,ke)|0,I=I+Math.imul(K,we)|0,C=C+Math.imul(K,ke)|0,R=R+Math.imul(_e,ot)|0,I=I+Math.imul(_e,xt)|0,I=I+Math.imul(xe,ot)|0,C=C+Math.imul(xe,xt)|0,R=R+Math.imul(ue,gt)|0,I=I+Math.imul(ue,er)|0,I=I+Math.imul(me,gt)|0,C=C+Math.imul(me,er)|0,R=R+Math.imul(ee,Tt)|0,I=I+Math.imul(ee,Zr)|0,I=I+Math.imul(ie,Tt)|0,C=C+Math.imul(ie,Zr)|0,R=R+Math.imul(ne,bt)|0,I=I+Math.imul(ne,cn)|0,I=I+Math.imul(se,bt)|0,C=C+Math.imul(se,cn)|0,R=R+Math.imul(j,jt)|0,I=I+Math.imul(j,Cr)|0,I=I+Math.imul(Z,jt)|0,C=C+Math.imul(Z,Cr)|0,R=R+Math.imul(Y,Lt)|0,I=I+Math.imul(Y,Qr)|0,I=I+Math.imul(te,Lt)|0,C=C+Math.imul(te,Qr)|0,R=R+Math.imul(W,he)|0,I=I+Math.imul(W,fe)|0,I=I+Math.imul(q,he)|0,C=C+Math.imul(q,fe)|0,R=R+Math.imul(L,pe)|0,I=I+Math.imul(L,ge)|0,I=I+Math.imul(N,pe)|0,C=C+Math.imul(N,ge)|0;var Ke=(O+R|0)+((I&8191)<<13)|0;O=(C+(I>>>13)|0)+(Ke>>>26)|0,Ke&=67108863,R=Math.imul(ce,we),I=Math.imul(ce,ke),I=I+Math.imul(ye,we)|0,C=Math.imul(ye,ke),R=R+Math.imul(re,ot)|0,I=I+Math.imul(re,xt)|0,I=I+Math.imul(K,ot)|0,C=C+Math.imul(K,xt)|0,R=R+Math.imul(_e,gt)|0,I=I+Math.imul(_e,er)|0,I=I+Math.imul(xe,gt)|0,C=C+Math.imul(xe,er)|0,R=R+Math.imul(ue,Tt)|0,I=I+Math.imul(ue,Zr)|0,I=I+Math.imul(me,Tt)|0,C=C+Math.imul(me,Zr)|0,R=R+Math.imul(ee,bt)|0,I=I+Math.imul(ee,cn)|0,I=I+Math.imul(ie,bt)|0,C=C+Math.imul(ie,cn)|0,R=R+Math.imul(ne,jt)|0,I=I+Math.imul(ne,Cr)|0,I=I+Math.imul(se,jt)|0,C=C+Math.imul(se,Cr)|0,R=R+Math.imul(j,Lt)|0,I=I+Math.imul(j,Qr)|0,I=I+Math.imul(Z,Lt)|0,C=C+Math.imul(Z,Qr)|0,R=R+Math.imul(Y,he)|0,I=I+Math.imul(Y,fe)|0,I=I+Math.imul(te,he)|0,C=C+Math.imul(te,fe)|0,R=R+Math.imul(W,pe)|0,I=I+Math.imul(W,ge)|0,I=I+Math.imul(q,pe)|0,C=C+Math.imul(q,ge)|0;var It=(O+R|0)+((I&8191)<<13)|0;O=(C+(I>>>13)|0)+(It>>>26)|0,It&=67108863,R=Math.imul(ce,ot),I=Math.imul(ce,xt),I=I+Math.imul(ye,ot)|0,C=Math.imul(ye,xt),R=R+Math.imul(re,gt)|0,I=I+Math.imul(re,er)|0,I=I+Math.imul(K,gt)|0,C=C+Math.imul(K,er)|0,R=R+Math.imul(_e,Tt)|0,I=I+Math.imul(_e,Zr)|0,I=I+Math.imul(xe,Tt)|0,C=C+Math.imul(xe,Zr)|0,R=R+Math.imul(ue,bt)|0,I=I+Math.imul(ue,cn)|0,I=I+Math.imul(me,bt)|0,C=C+Math.imul(me,cn)|0,R=R+Math.imul(ee,jt)|0,I=I+Math.imul(ee,Cr)|0,I=I+Math.imul(ie,jt)|0,C=C+Math.imul(ie,Cr)|0,R=R+Math.imul(ne,Lt)|0,I=I+Math.imul(ne,Qr)|0,I=I+Math.imul(se,Lt)|0,C=C+Math.imul(se,Qr)|0,R=R+Math.imul(j,he)|0,I=I+Math.imul(j,fe)|0,I=I+Math.imul(Z,he)|0,C=C+Math.imul(Z,fe)|0,R=R+Math.imul(Y,pe)|0,I=I+Math.imul(Y,ge)|0,I=I+Math.imul(te,pe)|0,C=C+Math.imul(te,ge)|0;var Dr=(O+R|0)+((I&8191)<<13)|0;O=(C+(I>>>13)|0)+(Dr>>>26)|0,Dr&=67108863,R=Math.imul(ce,gt),I=Math.imul(ce,er),I=I+Math.imul(ye,gt)|0,C=Math.imul(ye,er),R=R+Math.imul(re,Tt)|0,I=I+Math.imul(re,Zr)|0,I=I+Math.imul(K,Tt)|0,C=C+Math.imul(K,Zr)|0,R=R+Math.imul(_e,bt)|0,I=I+Math.imul(_e,cn)|0,I=I+Math.imul(xe,bt)|0,C=C+Math.imul(xe,cn)|0,R=R+Math.imul(ue,jt)|0,I=I+Math.imul(ue,Cr)|0,I=I+Math.imul(me,jt)|0,C=C+Math.imul(me,Cr)|0,R=R+Math.imul(ee,Lt)|0,I=I+Math.imul(ee,Qr)|0,I=I+Math.imul(ie,Lt)|0,C=C+Math.imul(ie,Qr)|0,R=R+Math.imul(ne,he)|0,I=I+Math.imul(ne,fe)|0,I=I+Math.imul(se,he)|0,C=C+Math.imul(se,fe)|0,R=R+Math.imul(j,pe)|0,I=I+Math.imul(j,ge)|0,I=I+Math.imul(Z,pe)|0,C=C+Math.imul(Z,ge)|0;var qr=(O+R|0)+((I&8191)<<13)|0;O=(C+(I>>>13)|0)+(qr>>>26)|0,qr&=67108863,R=Math.imul(ce,Tt),I=Math.imul(ce,Zr),I=I+Math.imul(ye,Tt)|0,C=Math.imul(ye,Zr),R=R+Math.imul(re,bt)|0,I=I+Math.imul(re,cn)|0,I=I+Math.imul(K,bt)|0,C=C+Math.imul(K,cn)|0,R=R+Math.imul(_e,jt)|0,I=I+Math.imul(_e,Cr)|0,I=I+Math.imul(xe,jt)|0,C=C+Math.imul(xe,Cr)|0,R=R+Math.imul(ue,Lt)|0,I=I+Math.imul(ue,Qr)|0,I=I+Math.imul(me,Lt)|0,C=C+Math.imul(me,Qr)|0,R=R+Math.imul(ee,he)|0,I=I+Math.imul(ee,fe)|0,I=I+Math.imul(ie,he)|0,C=C+Math.imul(ie,fe)|0,R=R+Math.imul(ne,pe)|0,I=I+Math.imul(ne,ge)|0,I=I+Math.imul(se,pe)|0,C=C+Math.imul(se,ge)|0;var Mn=(O+R|0)+((I&8191)<<13)|0;O=(C+(I>>>13)|0)+(Mn>>>26)|0,Mn&=67108863,R=Math.imul(ce,bt),I=Math.imul(ce,cn),I=I+Math.imul(ye,bt)|0,C=Math.imul(ye,cn),R=R+Math.imul(re,jt)|0,I=I+Math.imul(re,Cr)|0,I=I+Math.imul(K,jt)|0,C=C+Math.imul(K,Cr)|0,R=R+Math.imul(_e,Lt)|0,I=I+Math.imul(_e,Qr)|0,I=I+Math.imul(xe,Lt)|0,C=C+Math.imul(xe,Qr)|0,R=R+Math.imul(ue,he)|0,I=I+Math.imul(ue,fe)|0,I=I+Math.imul(me,he)|0,C=C+Math.imul(me,fe)|0,R=R+Math.imul(ee,pe)|0,I=I+Math.imul(ee,ge)|0,I=I+Math.imul(ie,pe)|0,C=C+Math.imul(ie,ge)|0;var Ia=(O+R|0)+((I&8191)<<13)|0;O=(C+(I>>>13)|0)+(Ia>>>26)|0,Ia&=67108863,R=Math.imul(ce,jt),I=Math.imul(ce,Cr),I=I+Math.imul(ye,jt)|0,C=Math.imul(ye,Cr),R=R+Math.imul(re,Lt)|0,I=I+Math.imul(re,Qr)|0,I=I+Math.imul(K,Lt)|0,C=C+Math.imul(K,Qr)|0,R=R+Math.imul(_e,he)|0,I=I+Math.imul(_e,fe)|0,I=I+Math.imul(xe,he)|0,C=C+Math.imul(xe,fe)|0,R=R+Math.imul(ue,pe)|0,I=I+Math.imul(ue,ge)|0,I=I+Math.imul(me,pe)|0,C=C+Math.imul(me,ge)|0;var Pa=(O+R|0)+((I&8191)<<13)|0;O=(C+(I>>>13)|0)+(Pa>>>26)|0,Pa&=67108863,R=Math.imul(ce,Lt),I=Math.imul(ce,Qr),I=I+Math.imul(ye,Lt)|0,C=Math.imul(ye,Qr),R=R+Math.imul(re,he)|0,I=I+Math.imul(re,fe)|0,I=I+Math.imul(K,he)|0,C=C+Math.imul(K,fe)|0,R=R+Math.imul(_e,pe)|0,I=I+Math.imul(_e,ge)|0,I=I+Math.imul(xe,pe)|0,C=C+Math.imul(xe,ge)|0;var Ra=(O+R|0)+((I&8191)<<13)|0;O=(C+(I>>>13)|0)+(Ra>>>26)|0,Ra&=67108863,R=Math.imul(ce,he),I=Math.imul(ce,fe),I=I+Math.imul(ye,he)|0,C=Math.imul(ye,fe),R=R+Math.imul(re,pe)|0,I=I+Math.imul(re,ge)|0,I=I+Math.imul(K,pe)|0,C=C+Math.imul(K,ge)|0;var js=(O+R|0)+((I&8191)<<13)|0;O=(C+(I>>>13)|0)+(js>>>26)|0,js&=67108863,R=Math.imul(ce,pe),I=Math.imul(ce,ge),I=I+Math.imul(ye,pe)|0,C=Math.imul(ye,ge);var $o=(O+R|0)+((I&8191)<<13)|0;return O=(C+(I>>>13)|0)+($o>>>26)|0,$o&=67108863,P[0]=Ae,P[1]=De,P[2]=Ce,P[3]=Ie,P[4]=Pe,P[5]=Ue,P[6]=He,P[7]=at,P[8]=qe,P[9]=Ke,P[10]=It,P[11]=Dr,P[12]=qr,P[13]=Mn,P[14]=Ia,P[15]=Pa,P[16]=Ra,P[17]=js,P[18]=$o,O!==0&&(P[19]=O,w.length++),w};Math.imul||(p=m);function g(U,S,T){T.negative=S.negative^U.negative,T.length=U.length+S.length;for(var w=0,A=0,F=0;F<T.length-1;F++){var P=A;A=0;for(var O=w&67108863,R=Math.min(F,S.length-1),I=Math.max(0,F-U.length+1);I<=R;I++){var C=F-I,M=U.words[C]|0,L=S.words[I]|0,N=M*L,H=N&67108863;P=P+(N/67108864|0)|0,H=H+O|0,O=H&67108863,P=P+(H>>>26)|0,A+=P>>>26,P&=67108863}T.words[F]=O,w=P,P=A}return w!==0?T.words[F]=w:T.length--,T.strip()}function v(U,S,T){var w=new y;return w.mulp(U,S,T)}s.prototype.mulTo=function(S,T){var w,A=this.length+S.length;return this.length===10&&S.length===10?w=p(this,S,T):A<63?w=m(this,S,T):A<1024?w=g(this,S,T):w=v(this,S,T),w};function y(U,S){this.x=U,this.y=S}y.prototype.makeRBT=function(S){for(var T=new Array(S),w=s.prototype._countBits(S)-1,A=0;A<S;A++)T[A]=this.revBin(A,w,S);return T},y.prototype.revBin=function(S,T,w){if(S===0||S===w-1)return S;for(var A=0,F=0;F<T;F++)A|=(S&1)<<T-F-1,S>>=1;return A},y.prototype.permute=function(S,T,w,A,F,P){for(var O=0;O<P;O++)A[O]=T[S[O]],F[O]=w[S[O]]},y.prototype.transform=function(S,T,w,A,F,P){this.permute(P,S,T,w,A,F);for(var O=1;O<F;O<<=1)for(var R=O<<1,I=Math.cos(2*Math.PI/R),C=Math.sin(2*Math.PI/R),M=0;M<F;M+=R)for(var L=I,N=C,H=0;H<O;H++){var W=w[M+H],q=A[M+H],G=w[M+H+O],Y=A[M+H+O],te=L*G-N*Y;Y=L*Y+N*G,G=te,w[M+H]=W+G,A[M+H]=q+Y,w[M+H+O]=W-G,A[M+H+O]=q-Y,H!==R&&(te=I*L-C*N,N=I*N+C*L,L=te)}},y.prototype.guessLen13b=function(S,T){var w=Math.max(T,S)|1,A=w&1,F=0;for(w=w/2|0;w;w=w>>>1)F++;return 1<<F+1+A},y.prototype.conjugate=function(S,T,w){if(!(w<=1))for(var A=0;A<w/2;A++){var F=S[A];S[A]=S[w-A-1],S[w-A-1]=F,F=T[A],T[A]=-T[w-A-1],T[w-A-1]=-F}},y.prototype.normalize13b=function(S,T){for(var w=0,A=0;A<T/2;A++){var F=Math.round(S[2*A+1]/T)*8192+Math.round(S[2*A]/T)+w;S[A]=F&67108863,F<67108864?w=0:w=F/67108864|0}return S},y.prototype.convert13b=function(S,T,w,A){for(var F=0,P=0;P<T;P++)F=F+(S[P]|0),w[2*P]=F&8191,F=F>>>13,w[2*P+1]=F&8191,F=F>>>13;for(P=2*T;P<A;++P)w[P]=0;n(F===0),n((F&-8192)===0)},y.prototype.stub=function(S){for(var T=new Array(S),w=0;w<S;w++)T[w]=0;return T},y.prototype.mulp=function(S,T,w){var A=2*this.guessLen13b(S.length,T.length),F=this.makeRBT(A),P=this.stub(A),O=new Array(A),R=new Array(A),I=new Array(A),C=new Array(A),M=new Array(A),L=new Array(A),N=w.words;N.length=A,this.convert13b(S.words,S.length,O,A),this.convert13b(T.words,T.length,C,A),this.transform(O,P,R,I,A,F),this.transform(C,P,M,L,A,F);for(var H=0;H<A;H++){var W=R[H]*M[H]-I[H]*L[H];I[H]=R[H]*L[H]+I[H]*M[H],R[H]=W}return this.conjugate(R,I,A),this.transform(R,I,N,P,A,F),this.conjugate(N,P,A),this.normalize13b(N,A),w.negative=S.negative^T.negative,w.length=S.length+T.length,w.strip()},s.prototype.mul=function(S){var T=new s(null);return T.words=new Array(this.length+S.length),this.mulTo(S,T)},s.prototype.mulf=function(S){var T=new s(null);return T.words=new Array(this.length+S.length),v(this,S,T)},s.prototype.imul=function(S){return this.clone().mulTo(S,this)},s.prototype.imuln=function(S){n(typeof S=="number"),n(S<67108864);for(var T=0,w=0;w<this.length;w++){var A=(this.words[w]|0)*S,F=(A&67108863)+(T&67108863);T>>=26,T+=A/67108864|0,T+=F>>>26,this.words[w]=F&67108863}return T!==0&&(this.words[w]=T,this.length++),this},s.prototype.muln=function(S){return this.clone().imuln(S)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(S){var T=h(S);if(T.length===0)return new s(1);for(var w=this,A=0;A<T.length&&T[A]===0;A++,w=w.sqr());if(++A<T.length)for(var F=w.sqr();A<T.length;A++,F=F.sqr())T[A]!==0&&(w=w.mul(F));return w},s.prototype.iushln=function(S){n(typeof S=="number"&&S>=0);var T=S%26,w=(S-T)/26,A=67108863>>>26-T<<26-T,F;if(T!==0){var P=0;for(F=0;F<this.length;F++){var O=this.words[F]&A,R=(this.words[F]|0)-O<<T;this.words[F]=R|P,P=O>>>26-T}P&&(this.words[F]=P,this.length++)}if(w!==0){for(F=this.length-1;F>=0;F--)this.words[F+w]=this.words[F];for(F=0;F<w;F++)this.words[F]=0;this.length+=w}return this.strip()},s.prototype.ishln=function(S){return n(this.negative===0),this.iushln(S)},s.prototype.iushrn=function(S,T,w){n(typeof S=="number"&&S>=0);var A;T?A=(T-T%26)/26:A=0;var F=S%26,P=Math.min((S-F)/26,this.length),O=67108863^67108863>>>F<<F,R=w;if(A-=P,A=Math.max(0,A),R){for(var I=0;I<P;I++)R.words[I]=this.words[I];R.length=P}if(P!==0)if(this.length>P)for(this.length-=P,I=0;I<this.length;I++)this.words[I]=this.words[I+P];else this.words[0]=0,this.length=1;var C=0;for(I=this.length-1;I>=0&&(C!==0||I>=A);I--){var M=this.words[I]|0;this.words[I]=C<<26-F|M>>>F,C=M&O}return R&&C!==0&&(R.words[R.length++]=C),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},s.prototype.ishrn=function(S,T,w){return n(this.negative===0),this.iushrn(S,T,w)},s.prototype.shln=function(S){return this.clone().ishln(S)},s.prototype.ushln=function(S){return this.clone().iushln(S)},s.prototype.shrn=function(S){return this.clone().ishrn(S)},s.prototype.ushrn=function(S){return this.clone().iushrn(S)},s.prototype.testn=function(S){n(typeof S=="number"&&S>=0);var T=S%26,w=(S-T)/26,A=1<<T;if(this.length<=w)return!1;var F=this.words[w];return!!(F&A)},s.prototype.imaskn=function(S){n(typeof S=="number"&&S>=0);var T=S%26,w=(S-T)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=w)return this;if(T!==0&&w++,this.length=Math.min(w,this.length),T!==0){var A=67108863^67108863>>>T<<T;this.words[this.length-1]&=A}return this.strip()},s.prototype.maskn=function(S){return this.clone().imaskn(S)},s.prototype.iaddn=function(S){return n(typeof S=="number"),n(S<67108864),S<0?this.isubn(-S):this.negative!==0?this.length===1&&(this.words[0]|0)<S?(this.words[0]=S-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(S),this.negative=1,this):this._iaddn(S)},s.prototype._iaddn=function(S){this.words[0]+=S;for(var T=0;T<this.length&&this.words[T]>=67108864;T++)this.words[T]-=67108864,T===this.length-1?this.words[T+1]=1:this.words[T+1]++;return this.length=Math.max(this.length,T+1),this},s.prototype.isubn=function(S){if(n(typeof S=="number"),n(S<67108864),S<0)return this.iaddn(-S);if(this.negative!==0)return this.negative=0,this.iaddn(S),this.negative=1,this;if(this.words[0]-=S,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var T=0;T<this.length&&this.words[T]<0;T++)this.words[T]+=67108864,this.words[T+1]-=1;return this.strip()},s.prototype.addn=function(S){return this.clone().iaddn(S)},s.prototype.subn=function(S){return this.clone().isubn(S)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(S,T,w){var A=S.length+w,F;this._expand(A);var P,O=0;for(F=0;F<S.length;F++){P=(this.words[F+w]|0)+O;var R=(S.words[F]|0)*T;P-=R&67108863,O=(P>>26)-(R/67108864|0),this.words[F+w]=P&67108863}for(;F<this.length-w;F++)P=(this.words[F+w]|0)+O,O=P>>26,this.words[F+w]=P&67108863;if(O===0)return this.strip();for(n(O===-1),O=0,F=0;F<this.length;F++)P=-(this.words[F]|0)+O,O=P>>26,this.words[F]=P&67108863;return this.negative=1,this.strip()},s.prototype._wordDiv=function(S,T){var w=this.length-S.length,A=this.clone(),F=S,P=F.words[F.length-1]|0,O=this._countBits(P);w=26-O,w!==0&&(F=F.ushln(w),A.iushln(w),P=F.words[F.length-1]|0);var R=A.length-F.length,I;if(T!=="mod"){I=new s(null),I.length=R+1,I.words=new Array(I.length);for(var C=0;C<I.length;C++)I.words[C]=0}var M=A.clone()._ishlnsubmul(F,1,R);M.negative===0&&(A=M,I&&(I.words[R]=1));for(var L=R-1;L>=0;L--){var N=(A.words[F.length+L]|0)*67108864+(A.words[F.length+L-1]|0);for(N=Math.min(N/P|0,67108863),A._ishlnsubmul(F,N,L);A.negative!==0;)N--,A.negative=0,A._ishlnsubmul(F,1,L),A.isZero()||(A.negative^=1);I&&(I.words[L]=N)}return I&&I.strip(),A.strip(),T!=="div"&&w!==0&&A.iushrn(w),{div:I||null,mod:A}},s.prototype.divmod=function(S,T,w){if(n(!S.isZero()),this.isZero())return{div:new s(0),mod:new s(0)};var A,F,P;return this.negative!==0&&S.negative===0?(P=this.neg().divmod(S,T),T!=="mod"&&(A=P.div.neg()),T!=="div"&&(F=P.mod.neg(),w&&F.negative!==0&&F.iadd(S)),{div:A,mod:F}):this.negative===0&&S.negative!==0?(P=this.divmod(S.neg(),T),T!=="mod"&&(A=P.div.neg()),{div:A,mod:P.mod}):(this.negative&S.negative)!==0?(P=this.neg().divmod(S.neg(),T),T!=="div"&&(F=P.mod.neg(),w&&F.negative!==0&&F.isub(S)),{div:P.div,mod:F}):S.length>this.length||this.cmp(S)<0?{div:new s(0),mod:this}:S.length===1?T==="div"?{div:this.divn(S.words[0]),mod:null}:T==="mod"?{div:null,mod:new s(this.modn(S.words[0]))}:{div:this.divn(S.words[0]),mod:new s(this.modn(S.words[0]))}:this._wordDiv(S,T)},s.prototype.div=function(S){return this.divmod(S,"div",!1).div},s.prototype.mod=function(S){return this.divmod(S,"mod",!1).mod},s.prototype.umod=function(S){return this.divmod(S,"mod",!0).mod},s.prototype.divRound=function(S){var T=this.divmod(S);if(T.mod.isZero())return T.div;var w=T.div.negative!==0?T.mod.isub(S):T.mod,A=S.ushrn(1),F=S.andln(1),P=w.cmp(A);return P<0||F===1&&P===0?T.div:T.div.negative!==0?T.div.isubn(1):T.div.iaddn(1)},s.prototype.modn=function(S){n(S<=67108863);for(var T=(1<<26)%S,w=0,A=this.length-1;A>=0;A--)w=(T*w+(this.words[A]|0))%S;return w},s.prototype.idivn=function(S){n(S<=67108863);for(var T=0,w=this.length-1;w>=0;w--){var A=(this.words[w]|0)+T*67108864;this.words[w]=A/S|0,T=A%S}return this.strip()},s.prototype.divn=function(S){return this.clone().idivn(S)},s.prototype.egcd=function(S){n(S.negative===0),n(!S.isZero());var T=this,w=S.clone();T.negative!==0?T=T.umod(S):T=T.clone();for(var A=new s(1),F=new s(0),P=new s(0),O=new s(1),R=0;T.isEven()&&w.isEven();)T.iushrn(1),w.iushrn(1),++R;for(var I=w.clone(),C=T.clone();!T.isZero();){for(var M=0,L=1;(T.words[0]&L)===0&&M<26;++M,L<<=1);if(M>0)for(T.iushrn(M);M-- >0;)(A.isOdd()||F.isOdd())&&(A.iadd(I),F.isub(C)),A.iushrn(1),F.iushrn(1);for(var N=0,H=1;(w.words[0]&H)===0&&N<26;++N,H<<=1);if(N>0)for(w.iushrn(N);N-- >0;)(P.isOdd()||O.isOdd())&&(P.iadd(I),O.isub(C)),P.iushrn(1),O.iushrn(1);T.cmp(w)>=0?(T.isub(w),A.isub(P),F.isub(O)):(w.isub(T),P.isub(A),O.isub(F))}return{a:P,b:O,gcd:w.iushln(R)}},s.prototype._invmp=function(S){n(S.negative===0),n(!S.isZero());var T=this,w=S.clone();T.negative!==0?T=T.umod(S):T=T.clone();for(var A=new s(1),F=new s(0),P=w.clone();T.cmpn(1)>0&&w.cmpn(1)>0;){for(var O=0,R=1;(T.words[0]&R)===0&&O<26;++O,R<<=1);if(O>0)for(T.iushrn(O);O-- >0;)A.isOdd()&&A.iadd(P),A.iushrn(1);for(var I=0,C=1;(w.words[0]&C)===0&&I<26;++I,C<<=1);if(I>0)for(w.iushrn(I);I-- >0;)F.isOdd()&&F.iadd(P),F.iushrn(1);T.cmp(w)>=0?(T.isub(w),A.isub(F)):(w.isub(T),F.isub(A))}var M;return T.cmpn(1)===0?M=A:M=F,M.cmpn(0)<0&&M.iadd(S),M},s.prototype.gcd=function(S){if(this.isZero())return S.abs();if(S.isZero())return this.abs();var T=this.clone(),w=S.clone();T.negative=0,w.negative=0;for(var A=0;T.isEven()&&w.isEven();A++)T.iushrn(1),w.iushrn(1);do{for(;T.isEven();)T.iushrn(1);for(;w.isEven();)w.iushrn(1);var F=T.cmp(w);if(F<0){var P=T;T=w,w=P}else if(F===0||w.cmpn(1)===0)break;T.isub(w)}while(!0);return w.iushln(A)},s.prototype.invm=function(S){return this.egcd(S).a.umod(S)},s.prototype.isEven=function(){return(this.words[0]&1)===0},s.prototype.isOdd=function(){return(this.words[0]&1)===1},s.prototype.andln=function(S){return this.words[0]&S},s.prototype.bincn=function(S){n(typeof S=="number");var T=S%26,w=(S-T)/26,A=1<<T;if(this.length<=w)return this._expand(w+1),this.words[w]|=A,this;for(var F=A,P=w;F!==0&&P<this.length;P++){var O=this.words[P]|0;O+=F,F=O>>>26,O&=67108863,this.words[P]=O}return F!==0&&(this.words[P]=F,this.length++),this},s.prototype.isZero=function(){return this.length===1&&this.words[0]===0},s.prototype.cmpn=function(S){var T=S<0;if(this.negative!==0&&!T)return-1;if(this.negative===0&&T)return 1;this.strip();var w;if(this.length>1)w=1;else{T&&(S=-S),n(S<=67108863,"Number is too big");var A=this.words[0]|0;w=A===S?0:A<S?-1:1}return this.negative!==0?-w|0:w},s.prototype.cmp=function(S){if(this.negative!==0&&S.negative===0)return-1;if(this.negative===0&&S.negative!==0)return 1;var T=this.ucmp(S);return this.negative!==0?-T|0:T},s.prototype.ucmp=function(S){if(this.length>S.length)return 1;if(this.length<S.length)return-1;for(var T=0,w=this.length-1;w>=0;w--){var A=this.words[w]|0,F=S.words[w]|0;if(A!==F){A<F?T=-1:A>F&&(T=1);break}}return T},s.prototype.gtn=function(S){return this.cmpn(S)===1},s.prototype.gt=function(S){return this.cmp(S)===1},s.prototype.gten=function(S){return this.cmpn(S)>=0},s.prototype.gte=function(S){return this.cmp(S)>=0},s.prototype.ltn=function(S){return this.cmpn(S)===-1},s.prototype.lt=function(S){return this.cmp(S)===-1},s.prototype.lten=function(S){return this.cmpn(S)<=0},s.prototype.lte=function(S){return this.cmp(S)<=0},s.prototype.eqn=function(S){return this.cmpn(S)===0},s.prototype.eq=function(S){return this.cmp(S)===0},s.red=function(S){return new D(S)},s.prototype.toRed=function(S){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),S.convertTo(this)._forceRed(S)},s.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(S){return this.red=S,this},s.prototype.forceRed=function(S){return n(!this.red,"Already a number in reduction context"),this._forceRed(S)},s.prototype.redAdd=function(S){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,S)},s.prototype.redIAdd=function(S){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,S)},s.prototype.redSub=function(S){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,S)},s.prototype.redISub=function(S){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,S)},s.prototype.redShl=function(S){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,S)},s.prototype.redMul=function(S){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,S),this.red.mul(this,S)},s.prototype.redIMul=function(S){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,S),this.red.imul(this,S)},s.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(S){return n(this.red&&!S.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,S)};var b={k256:null,p224:null,p192:null,p25519:null};function _(U,S){this.name=U,this.p=new s(S,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}_.prototype._tmp=function(){var S=new s(null);return S.words=new Array(Math.ceil(this.n/13)),S},_.prototype.ireduce=function(S){var T=S,w;do this.split(T,this.tmp),T=this.imulK(T),T=T.iadd(this.tmp),w=T.bitLength();while(w>this.n);var A=w<this.n?-1:T.ucmp(this.p);return A===0?(T.words[0]=0,T.length=1):A>0?T.isub(this.p):T.strip!==void 0?T.strip():T._strip(),T},_.prototype.split=function(S,T){S.iushrn(this.n,0,T)},_.prototype.imulK=function(S){return S.imul(this.k)};function x(){_.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}i(x,_),x.prototype.split=function(S,T){for(var w=4194303,A=Math.min(S.length,9),F=0;F<A;F++)T.words[F]=S.words[F];if(T.length=A,S.length<=9){S.words[0]=0,S.length=1;return}var P=S.words[9];for(T.words[T.length++]=P&w,F=10;F<S.length;F++){var O=S.words[F]|0;S.words[F-10]=(O&w)<<4|P>>>22,P=O}P>>>=22,S.words[F-10]=P,P===0&&S.length>10?S.length-=10:S.length-=9},x.prototype.imulK=function(S){S.words[S.length]=0,S.words[S.length+1]=0,S.length+=2;for(var T=0,w=0;w<S.length;w++){var A=S.words[w]|0;T+=A*977,S.words[w]=T&67108863,T=A*64+(T/67108864|0)}return S.words[S.length-1]===0&&(S.length--,S.words[S.length-1]===0&&S.length--),S};function E(){_.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}i(E,_);function k(){_.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}i(k,_);function B(){_.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}i(B,_),B.prototype.imulK=function(S){for(var T=0,w=0;w<S.length;w++){var A=(S.words[w]|0)*19+T,F=A&67108863;A>>>=26,S.words[w]=F,T=A}return T!==0&&(S.words[S.length++]=T),S},s._prime=function(S){if(b[S])return b[S];var T;if(S==="k256")T=new x;else if(S==="p224")T=new E;else if(S==="p192")T=new k;else if(S==="p25519")T=new B;else throw new Error("Unknown prime "+S);return b[S]=T,T};function D(U){if(typeof U=="string"){var S=s._prime(U);this.m=S.p,this.prime=S}else n(U.gtn(1),"modulus must be greater than 1"),this.m=U,this.prime=null}D.prototype._verify1=function(S){n(S.negative===0,"red works only with positives"),n(S.red,"red works only with red numbers")},D.prototype._verify2=function(S,T){n((S.negative|T.negative)===0,"red works only with positives"),n(S.red&&S.red===T.red,"red works only with red numbers")},D.prototype.imod=function(S){return this.prime?this.prime.ireduce(S)._forceRed(this):S.umod(this.m)._forceRed(this)},D.prototype.neg=function(S){return S.isZero()?S.clone():this.m.sub(S)._forceRed(this)},D.prototype.add=function(S,T){this._verify2(S,T);var w=S.add(T);return w.cmp(this.m)>=0&&w.isub(this.m),w._forceRed(this)},D.prototype.iadd=function(S,T){this._verify2(S,T);var w=S.iadd(T);return w.cmp(this.m)>=0&&w.isub(this.m),w},D.prototype.sub=function(S,T){this._verify2(S,T);var w=S.sub(T);return w.cmpn(0)<0&&w.iadd(this.m),w._forceRed(this)},D.prototype.isub=function(S,T){this._verify2(S,T);var w=S.isub(T);return w.cmpn(0)<0&&w.iadd(this.m),w},D.prototype.shl=function(S,T){return this._verify1(S),this.imod(S.ushln(T))},D.prototype.imul=function(S,T){return this._verify2(S,T),this.imod(S.imul(T))},D.prototype.mul=function(S,T){return this._verify2(S,T),this.imod(S.mul(T))},D.prototype.isqr=function(S){return this.imul(S,S.clone())},D.prototype.sqr=function(S){return this.mul(S,S)},D.prototype.sqrt=function(S){if(S.isZero())return S.clone();var T=this.m.andln(3);if(n(T%2===1),T===3){var w=this.m.add(new s(1)).iushrn(2);return this.pow(S,w)}for(var A=this.m.subn(1),F=0;!A.isZero()&&A.andln(1)===0;)F++,A.iushrn(1);n(!A.isZero());var P=new s(1).toRed(this),O=P.redNeg(),R=this.m.subn(1).iushrn(1),I=this.m.bitLength();for(I=new s(2*I*I).toRed(this);this.pow(I,R).cmp(O)!==0;)I.redIAdd(O);for(var C=this.pow(I,A),M=this.pow(S,A.addn(1).iushrn(1)),L=this.pow(S,A),N=F;L.cmp(P)!==0;){for(var H=L,W=0;H.cmp(P)!==0;W++)H=H.redSqr();n(W<N);var q=this.pow(C,new s(1).iushln(N-W-1));M=M.redMul(q),C=q.redSqr(),L=L.redMul(C),N=W}return M},D.prototype.invm=function(S){var T=S._invmp(this.m);return T.negative!==0?(T.negative=0,this.imod(T).redNeg()):this.imod(T)},D.prototype.pow=function(S,T){if(T.isZero())return new s(1).toRed(this);if(T.cmpn(1)===0)return S.clone();var w=4,A=new Array(1<<w);A[0]=new s(1).toRed(this),A[1]=S;for(var F=2;F<A.length;F++)A[F]=this.mul(A[F-1],S);var P=A[0],O=0,R=0,I=T.bitLength()%26;for(I===0&&(I=26),F=T.length-1;F>=0;F--){for(var C=T.words[F],M=I-1;M>=0;M--){var L=C>>M&1;if(P!==A[0]&&(P=this.sqr(P)),L===0&&O===0){R=0;continue}O<<=1,O|=L,R++,!(R!==w&&(F!==0||M!==0))&&(P=this.mul(P,A[O]),R=0,O=0)}I=26}return P},D.prototype.convertTo=function(S){var T=S.umod(this.m);return T===S?T.clone():T},D.prototype.convertFrom=function(S){var T=S.clone();return T.red=null,T},s.mont=function(S){return new z(S)};function z(U){D.call(this,U),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}i(z,D),z.prototype.convertTo=function(S){return this.imod(S.ushln(this.shift))},z.prototype.convertFrom=function(S){var T=this.imod(S.mul(this.rinv));return T.red=null,T},z.prototype.imul=function(S,T){if(S.isZero()||T.isZero())return S.words[0]=0,S.length=1,S;var w=S.imul(T),A=w.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),F=w.isub(A).iushrn(this.shift),P=F;return F.cmp(this.m)>=0?P=F.isub(this.m):F.cmpn(0)<0&&(P=F.iadd(this.m)),P._forceRed(this)},z.prototype.mul=function(S,T){if(S.isZero()||T.isZero())return new s(0)._forceRed(this);var w=S.mul(T),A=w.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),F=w.isub(A).iushrn(this.shift),P=F;return F.cmp(this.m)>=0?P=F.isub(this.m):F.cmpn(0)<0&&(P=F.iadd(this.m)),P._forceRed(this)},z.prototype.invm=function(S){var T=this.imod(S._invmp(this.m).mul(this.r2));return T._forceRed(this)}})(t,_at)}(k3)),k3.exports}var kw={exports:{}},iK;function tM(){if(iK)return kw.exports;iK=1;var t;kw.exports=function(i){return t||(t=new e(null)),t.generate(i)};function e(n){this.rand=n}if(kw.exports.Rand=e,e.prototype.generate=function(i){return this._rand(i)},e.prototype._rand=function(i){if(this.rand.getBytes)return this.rand.getBytes(i);for(var s=new Uint8Array(i),a=0;a<s.length;a++)s[a]=this.rand.getByte();return s},typeof self=="object")self.crypto&&self.crypto.getRandomValues?e.prototype._rand=function(i){var s=new Uint8Array(i);return self.crypto.getRandomValues(s),s}:self.msCrypto&&self.msCrypto.getRandomValues?e.prototype._rand=function(i){var s=new Uint8Array(i);return self.msCrypto.getRandomValues(s),s}:typeof window=="object"&&(e.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var r=Vfe();if(typeof r.randomBytes!="function")throw new Error("Not supported");e.prototype._rand=function(i){return r.randomBytes(i)}}catch{}return kw.exports}var dk,sK;function Sfe(){if(sK)return dk;sK=1;var t=vs(),e=tM();function r(n){this.rand=n||new e.Rand}return dk=r,r.create=function(i){return new r(i)},r.prototype._randbelow=function(i){var s=i.bitLength(),a=Math.ceil(s/8);do var o=new t(this.rand.generate(a));while(o.cmp(i)>=0);return o},r.prototype._randrange=function(i,s){var a=s.sub(i);return i.add(this._randbelow(a))},r.prototype.test=function(i,s,a){var o=i.bitLength(),c=t.mont(i),u=new t(1).toRed(c);s||(s=Math.max(1,o/48|0));for(var l=i.subn(1),f=0;!l.testn(f);f++);for(var d=i.shrn(f),h=l.toRed(c),m=!0;s>0;s--){var p=this._randrange(new t(2),l);a&&a(p);var g=p.toRed(c).redPow(d);if(!(g.cmp(u)===0||g.cmp(h)===0)){for(var v=1;v<f;v++){if(g=g.redSqr(),g.cmp(u)===0)return!1;if(g.cmp(h)===0)break}if(v===f)return!1}}return m},r.prototype.getDivisor=function(i,s){var a=i.bitLength(),o=t.mont(i),c=new t(1).toRed(o);s||(s=Math.max(1,a/48|0));for(var u=i.subn(1),l=0;!u.testn(l);l++);for(var f=i.shrn(l),d=u.toRed(o);s>0;s--){var h=this._randrange(new t(2),u),m=i.gcd(h);if(m.cmpn(1)!==0)return m;var p=h.toRed(o).redPow(f);if(!(p.cmp(c)===0||p.cmp(d)===0)){for(var g=1;g<l;g++){if(p=p.redSqr(),p.cmp(c)===0)return p.fromRed().subn(1).gcd(i);if(p.cmp(d)===0)break}if(g===l)return p=p.redSqr(),p.fromRed().subn(1).gcd(i)}}return!1},dk}var hk,aK;function Efe(){if(aK)return hk;aK=1;var t=hm();hk=g,g.simpleSieve=m,g.fermatTest=p;var e=vs(),r=new e(24),n=Sfe(),i=new n,s=new e(1),a=new e(2),o=new e(5);new e(16),new e(8);var c=new e(10),u=new e(3);new e(7);var l=new e(11),f=new e(4);new e(12);var d=null;function h(){if(d!==null)return d;var v=1048576,y=[];y[0]=2;for(var b=1,_=3;_<v;_+=2){for(var x=Math.ceil(Math.sqrt(_)),E=0;E<b&&y[E]<=x&&_%y[E]!==0;E++);b!==E&&y[E]<=x||(y[b++]=_)}return d=y,y}function m(v){for(var y=h(),b=0;b<y.length;b++)if(v.modn(y[b])===0)return v.cmpn(y[b])===0;return!0}function p(v){var y=e.mont(v);return a.toRed(y).redPow(v.subn(1)).fromRed().cmpn(1)===0}function g(v,y){if(v<16)return y===2||y===5?new e([140,123]):new e([140,39]);y=new e(y);for(var b,_;;){for(b=new e(t(Math.ceil(v/8)));b.bitLength()>v;)b.ishrn(1);if(b.isEven()&&b.iadd(s),b.testn(1)||b.iadd(a),y.cmp(a)){if(!y.cmp(o))for(;b.mod(c).cmp(u);)b.iadd(f)}else for(;b.mod(r).cmp(l);)b.iadd(f);if(_=b.shrn(1),m(_)&&m(b)&&p(_)&&p(b)&&i.test(_)&&i.test(b))return b}}return hk}const xat={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a3620ffffffffffffffff"},Sat={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece65381ffffffffffffffff"},Eat={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca237327ffffffffffffffff"},kat={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aacaa68ffffffffffffffff"},Tat={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a93ad2caffffffffffffffff"},Aat={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c934063199ffffffffffffffff"},Cat={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dcc4024ffffffffffffffff"},Iat={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dbe115974a3926f12fee5e438777cb6a932df8cd8bec4d073b931ba3bc832b68d9dd300741fa7bf8afc47ed2576f6936ba424663aab639c5ae4f5683423b4742bf1c978238f16cbe39d652de3fdb8befc848ad922222e04a4037c0713eb57a81a23f0c73473fc646cea306b4bcbc8862f8385ddfa9d4b7fa2c087e879683303ed5bdd3a062b3cf5b3a278a66d2a13f83f44f82ddf310ee074ab6a364597e899a0255dc164f31cc50846851df9ab48195ded7ea1b1d510bd7ee74d73faf36bc31ecfa268359046f4eb879f924009438b481c6cd7889a002ed5ee382bc9190da6fc026e479558e4475677e9aa9e3050e2765694dfc81f56e880b96e7160c980dd98edd3dfffffffffffffffff"},Pat={modp1:xat,modp2:Sat,modp5:Eat,modp14:kat,modp15:Tat,modp16:Aat,modp17:Cat,modp18:Iat};var pk,oK;function Rat(){if(oK)return pk;oK=1;var t=vs(),e=Sfe(),r=new e,n=new t(24),i=new t(11),s=new t(10),a=new t(3),o=new t(7),c=Efe(),u=hm();pk=m;function l(g,v){return v=v||"utf8",Me.isBuffer(g)||(g=new Me(g,v)),this._pub=new t(g),this}function f(g,v){return v=v||"utf8",Me.isBuffer(g)||(g=new Me(g,v)),this._priv=new t(g),this}var d={};function h(g,v){var y=v.toString("hex"),b=[y,g.toString(16)].join("_");if(b in d)return d[b];var _=0;if(g.isEven()||!c.simpleSieve||!c.fermatTest(g)||!r.test(g))return _+=1,y==="02"||y==="05"?_+=8:_+=4,d[b]=_,_;r.test(g.shrn(1))||(_+=2);var x;switch(y){case"02":g.mod(n).cmp(i)&&(_+=8);break;case"05":x=g.mod(s),x.cmp(a)&&x.cmp(o)&&(_+=8);break;default:_+=4}return d[b]=_,_}function m(g,v,y){this.setGenerator(v),this.__prime=new t(g),this._prime=t.mont(this.__prime),this._primeLen=g.length,this._pub=void 0,this._priv=void 0,this._primeCode=void 0,y?(this.setPublicKey=l,this.setPrivateKey=f):this._primeCode=8}Object.defineProperty(m.prototype,"verifyError",{enumerable:!0,get:function(){return typeof this._primeCode!="number"&&(this._primeCode=h(this.__prime,this.__gen)),this._primeCode}}),m.prototype.generateKeys=function(){return this._priv||(this._priv=new t(u(this._primeLen))),this._pub=this._gen.toRed(this._prime).redPow(this._priv).fromRed(),this.getPublicKey()},m.prototype.computeSecret=function(g){g=new t(g),g=g.toRed(this._prime);var v=g.redPow(this._priv).fromRed(),y=new Me(v.toArray()),b=this.getPrime();if(y.length<b.length){var _=new Me(b.length-y.length);_.fill(0),y=Me.concat([_,y])}return y},m.prototype.getPublicKey=function(v){return p(this._pub,v)},m.prototype.getPrivateKey=function(v){return p(this._priv,v)},m.prototype.getPrime=function(g){return p(this.__prime,g)},m.prototype.getGenerator=function(g){return p(this._gen,g)},m.prototype.setGenerator=function(g,v){return v=v||"utf8",Me.isBuffer(g)||(g=new Me(g,v)),this.__gen=g,this._gen=new t(g),this};function p(g,v){var y=new Me(g.toArray());return v?y.toString(v):y}return pk}var cK;function Oat(){if(cK)return Dd;cK=1;var t=Efe(),e=Pat,r=Rat();function n(a){var o=new Me(e[a].prime,"hex"),c=new Me(e[a].gen,"hex");return new r(o,c)}var i={binary:!0,hex:!0,base64:!0};function s(a,o,c,u){return Me.isBuffer(o)||i[o]===void 0?s(a,"binary",o,c):(o=o||"binary",u=u||"binary",c=c||new Me([2]),Me.isBuffer(c)||(c=new Me(c,u)),typeof a=="number"?new r(t(a,c),c,!0):(Me.isBuffer(a)||(a=new Me(a,o)),new r(a,c,!0)))}return Dd.DiffieHellmanGroup=Dd.createDiffieHellmanGroup=Dd.getDiffieHellman=n,Dd.createDiffieHellman=Dd.DiffieHellman=s,Dd}var Tw={exports:{}},mk={exports:{}},lK;function Y5(){if(lK)return mk.exports;lK=1,mk.exports={nextTick:t};function t(e,r,n,i){if(typeof e!="function")throw new TypeError('"callback" argument must be a function');var s=arguments.length,a,o;switch(s){case 0:case 1:return fn.nextTick(e);case 2:return fn.nextTick(function(){e.call(null,r)});case 3:return fn.nextTick(function(){e.call(null,r,n)});case 4:return fn.nextTick(function(){e.call(null,r,n,i)});default:for(a=new Array(s-1),o=0;o<a.length;)a[o++]=arguments[o];return fn.nextTick(function(){e.apply(null,a)})}}return mk.exports}var gk,uK;function Bat(){if(uK)return gk;uK=1;var t={}.toString;return gk=Array.isArray||function(e){return t.call(e)=="[object Array]"},gk}var vk,fK;function kfe(){return fK||(fK=1,vk=$p().EventEmitter),vk}var ts={},dK;function l2(){if(dK)return ts;dK=1;function t(p){return Array.isArray?Array.isArray(p):m(p)==="[object Array]"}ts.isArray=t;function e(p){return typeof p=="boolean"}ts.isBoolean=e;function r(p){return p===null}ts.isNull=r;function n(p){return p==null}ts.isNullOrUndefined=n;function i(p){return typeof p=="number"}ts.isNumber=i;function s(p){return typeof p=="string"}ts.isString=s;function a(p){return typeof p=="symbol"}ts.isSymbol=a;function o(p){return p===void 0}ts.isUndefined=o;function c(p){return m(p)==="[object RegExp]"}ts.isRegExp=c;function u(p){return typeof p=="object"&&p!==null}ts.isObject=u;function l(p){return m(p)==="[object Date]"}ts.isDate=l;function f(p){return m(p)==="[object Error]"||p instanceof Error}ts.isError=f;function d(p){return typeof p=="function"}ts.isFunction=d;function h(p){return p===null||typeof p=="boolean"||typeof p=="number"||typeof p=="string"||typeof p=="symbol"||typeof p>"u"}ts.isPrimitive=h,ts.isBuffer=_c().Buffer.isBuffer;function m(p){return Object.prototype.toString.call(p)}return ts}var yk={exports:{}},hK;function Dat(){return hK||(hK=1,function(t){function e(s,a){if(!(s instanceof a))throw new TypeError("Cannot call a class as a function")}var r=H5().Buffer,n=jp;function i(s,a,o){s.copy(a,o)}t.exports=function(){function s(){e(this,s),this.head=null,this.tail=null,this.length=0}return s.prototype.push=function(o){var c={data:o,next:null};this.length>0?this.tail.next=c:this.head=c,this.tail=c,++this.length},s.prototype.unshift=function(o){var c={data:o,next:this.head};this.length===0&&(this.tail=c),this.head=c,++this.length},s.prototype.shift=function(){if(this.length!==0){var o=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,o}},s.prototype.clear=function(){this.head=this.tail=null,this.length=0},s.prototype.join=function(o){if(this.length===0)return"";for(var c=this.head,u=""+c.data;c=c.next;)u+=o+c.data;return u},s.prototype.concat=function(o){if(this.length===0)return r.alloc(0);for(var c=r.allocUnsafe(o>>>0),u=this.head,l=0;u;)i(u.data,c,l),l+=u.data.length,u=u.next;return c},s}(),n&&n.inspect&&n.inspect.custom&&(t.exports.prototype[n.inspect.custom]=function(){var s=n.inspect({length:this.length});return this.constructor.name+" "+s})}(yk)),yk.exports}var bk,pK;function Tfe(){if(pK)return bk;pK=1;var t=Y5();function e(i,s){var a=this,o=this._readableState&&this._readableState.destroyed,c=this._writableState&&this._writableState.destroyed;return o||c?(s?s(i):i&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,t.nextTick(n,this,i)):t.nextTick(n,this,i)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(i||null,function(u){!s&&u?a._writableState?a._writableState.errorEmitted||(a._writableState.errorEmitted=!0,t.nextTick(n,a,u)):t.nextTick(n,a,u):s&&s(u)}),this)}function r(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function n(i,s){i.emit("error",s)}return bk={destroy:e,undestroy:r},bk}var wk,mK;function Mat(){if(mK)return wk;mK=1,wk=t;function t(r,n){if(e("noDeprecation"))return r;var i=!1;function s(){if(!i){if(e("throwDeprecation"))throw new Error(n);e("traceDeprecation")?console.trace(n):console.warn(n),i=!0}return r.apply(this,arguments)}return s}function e(r){try{if(!Ut.localStorage)return!1}catch{return!1}var n=Ut.localStorage[r];return n==null?!1:String(n).toLowerCase()==="true"}return wk}var _k,gK;function Afe(){if(gK)return _k;gK=1;var t=Y5();_k=p;function e(P){var O=this;this.next=null,this.entry=null,this.finish=function(){F(O,P)}}var r=t.nextTick,n;p.WritableState=h;var i=Object.create(l2());i.inherits=lr();var s={deprecate:Mat()},a=kfe(),o=H5().Buffer,c=(typeof Ut<"u"?Ut:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function u(P){return o.from(P)}function l(P){return o.isBuffer(P)||P instanceof c}var f=Tfe();i.inherits(p,a);function d(){}function h(P,O){n=n||bp(),P=P||{};var R=O instanceof n;this.objectMode=!!P.objectMode,R&&(this.objectMode=this.objectMode||!!P.writableObjectMode);var I=P.highWaterMark,C=P.writableHighWaterMark,M=this.objectMode?16:16*1024;I||I===0?this.highWaterMark=I:R&&(C||C===0)?this.highWaterMark=C:this.highWaterMark=M,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var L=P.decodeStrings===!1;this.decodeStrings=!L,this.defaultEncoding=P.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(N){k(O,N)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new e(this)}h.prototype.getBuffer=function(){for(var O=this.bufferedRequest,R=[];O;)R.push(O),O=O.next;return R},function(){try{Object.defineProperty(h.prototype,"buffer",{get:s.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var m;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(m=Function.prototype[Symbol.hasInstance],Object.defineProperty(p,Symbol.hasInstance,{value:function(P){return m.call(this,P)?!0:this!==p?!1:P&&P._writableState instanceof h}})):m=function(P){return P instanceof this};function p(P){if(n=n||bp(),!m.call(p,this)&&!(this instanceof n))return new p(P);this._writableState=new h(P,this),this.writable=!0,P&&(typeof P.write=="function"&&(this._write=P.write),typeof P.writev=="function"&&(this._writev=P.writev),typeof P.destroy=="function"&&(this._destroy=P.destroy),typeof P.final=="function"&&(this._final=P.final)),a.call(this)}p.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))};function g(P,O){var R=new Error("write after end");P.emit("error",R),t.nextTick(O,R)}function v(P,O,R,I){var C=!0,M=!1;return R===null?M=new TypeError("May not write null values to stream"):typeof R!="string"&&R!==void 0&&!O.objectMode&&(M=new TypeError("Invalid non-string/buffer chunk")),M&&(P.emit("error",M),t.nextTick(I,M),C=!1),C}p.prototype.write=function(P,O,R){var I=this._writableState,C=!1,M=!I.objectMode&&l(P);return M&&!o.isBuffer(P)&&(P=u(P)),typeof O=="function"&&(R=O,O=null),M?O="buffer":O||(O=I.defaultEncoding),typeof R!="function"&&(R=d),I.ended?g(this,R):(M||v(this,I,P,R))&&(I.pendingcb++,C=b(this,I,M,P,O,R)),C},p.prototype.cork=function(){var P=this._writableState;P.corked++},p.prototype.uncork=function(){var P=this._writableState;P.corked&&(P.corked--,!P.writing&&!P.corked&&!P.bufferProcessing&&P.bufferedRequest&&z(this,P))},p.prototype.setDefaultEncoding=function(O){if(typeof O=="string"&&(O=O.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((O+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+O);return this._writableState.defaultEncoding=O,this};function y(P,O,R){return!P.objectMode&&P.decodeStrings!==!1&&typeof O=="string"&&(O=o.from(O,R)),O}Object.defineProperty(p.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function b(P,O,R,I,C,M){if(!R){var L=y(O,I,C);I!==L&&(R=!0,C="buffer",I=L)}var N=O.objectMode?1:I.length;O.length+=N;var H=O.length<O.highWaterMark;if(H||(O.needDrain=!0),O.writing||O.corked){var W=O.lastBufferedRequest;O.lastBufferedRequest={chunk:I,encoding:C,isBuf:R,callback:M,next:null},W?W.next=O.lastBufferedRequest:O.bufferedRequest=O.lastBufferedRequest,O.bufferedRequestCount+=1}else _(P,O,!1,N,I,C,M);return H}function _(P,O,R,I,C,M,L){O.writelen=I,O.writecb=L,O.writing=!0,O.sync=!0,R?P._writev(C,O.onwrite):P._write(C,M,O.onwrite),O.sync=!1}function x(P,O,R,I,C){--O.pendingcb,R?(t.nextTick(C,I),t.nextTick(w,P,O),P._writableState.errorEmitted=!0,P.emit("error",I)):(C(I),P._writableState.errorEmitted=!0,P.emit("error",I),w(P,O))}function E(P){P.writing=!1,P.writecb=null,P.length-=P.writelen,P.writelen=0}function k(P,O){var R=P._writableState,I=R.sync,C=R.writecb;if(E(R),O)x(P,R,I,O,C);else{var M=U(R);!M&&!R.corked&&!R.bufferProcessing&&R.bufferedRequest&&z(P,R),I?r(B,P,R,M,C):B(P,R,M,C)}}function B(P,O,R,I){R||D(P,O),O.pendingcb--,I(),w(P,O)}function D(P,O){O.length===0&&O.needDrain&&(O.needDrain=!1,P.emit("drain"))}function z(P,O){O.bufferProcessing=!0;var R=O.bufferedRequest;if(P._writev&&R&&R.next){var I=O.bufferedRequestCount,C=new Array(I),M=O.corkedRequestsFree;M.entry=R;for(var L=0,N=!0;R;)C[L]=R,R.isBuf||(N=!1),R=R.next,L+=1;C.allBuffers=N,_(P,O,!0,O.length,C,"",M.finish),O.pendingcb++,O.lastBufferedRequest=null,M.next?(O.corkedRequestsFree=M.next,M.next=null):O.corkedRequestsFree=new e(O),O.bufferedRequestCount=0}else{for(;R;){var H=R.chunk,W=R.encoding,q=R.callback,G=O.objectMode?1:H.length;if(_(P,O,!1,G,H,W,q),R=R.next,O.bufferedRequestCount--,O.writing)break}R===null&&(O.lastBufferedRequest=null)}O.bufferedRequest=R,O.bufferProcessing=!1}p.prototype._write=function(P,O,R){R(new Error("_write() is not implemented"))},p.prototype._writev=null,p.prototype.end=function(P,O,R){var I=this._writableState;typeof P=="function"?(R=P,P=null,O=null):typeof O=="function"&&(R=O,O=null),P!=null&&this.write(P,O),I.corked&&(I.corked=1,this.uncork()),I.ending||A(this,I,R)};function U(P){return P.ending&&P.length===0&&P.bufferedRequest===null&&!P.finished&&!P.writing}function S(P,O){P._final(function(R){O.pendingcb--,R&&P.emit("error",R),O.prefinished=!0,P.emit("prefinish"),w(P,O)})}function T(P,O){!O.prefinished&&!O.finalCalled&&(typeof P._final=="function"?(O.pendingcb++,O.finalCalled=!0,t.nextTick(S,P,O)):(O.prefinished=!0,P.emit("prefinish")))}function w(P,O){var R=U(O);return R&&(T(P,O),O.pendingcb===0&&(O.finished=!0,P.emit("finish"))),R}function A(P,O,R){O.ending=!0,w(P,O),R&&(O.finished?t.nextTick(R):P.once("finish",R)),O.ended=!0,P.writable=!1}function F(P,O,R){var I=P.entry;for(P.entry=null;I;){var C=I.callback;O.pendingcb--,C(R),I=I.next}O.corkedRequestsFree.next=P}return Object.defineProperty(p.prototype,"destroyed",{get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(P){this._writableState&&(this._writableState.destroyed=P)}}),p.prototype.destroy=f.destroy,p.prototype._undestroy=f.undestroy,p.prototype._destroy=function(P,O){this.end(),O(P)},_k}var xk,vK;function bp(){if(vK)return xk;vK=1;var t=Y5(),e=Object.keys||function(f){var d=[];for(var h in f)d.push(h);return d};xk=c;var r=Object.create(l2());r.inherits=lr();var n=Cfe(),i=Afe();r.inherits(c,n);for(var s=e(i.prototype),a=0;a<s.length;a++){var o=s[a];c.prototype[o]||(c.prototype[o]=i.prototype[o])}function c(f){if(!(this instanceof c))return new c(f);n.call(this,f),i.call(this,f),f&&f.readable===!1&&(this.readable=!1),f&&f.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,f&&f.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",u)}Object.defineProperty(c.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function u(){this.allowHalfOpen||this._writableState.ended||t.nextTick(l,this)}function l(f){f.end()}return Object.defineProperty(c.prototype,"destroyed",{get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(f){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=f,this._writableState.destroyed=f)}}),c.prototype._destroy=function(f,d){this.push(null),this.end(),t.nextTick(d,f)},xk}var Sk,yK;function Cfe(){if(yK)return Sk;yK=1;var t=Y5();Sk=y;var e=Bat(),r;y.ReadableState=v,$p().EventEmitter;var n=function(q,G){return q.listeners(G).length},i=kfe(),s=H5().Buffer,a=(typeof Ut<"u"?Ut:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function o(q){return s.from(q)}function c(q){return s.isBuffer(q)||q instanceof a}var u=Object.create(l2());u.inherits=lr();var l=jp,f=void 0;l&&l.debuglog?f=l.debuglog("stream"):f=function(){};var d=Dat(),h=Tfe(),m;u.inherits(y,i);var p=["error","close","destroy","pause","resume"];function g(q,G,Y){if(typeof q.prependListener=="function")return q.prependListener(G,Y);!q._events||!q._events[G]?q.on(G,Y):e(q._events[G])?q._events[G].unshift(Y):q._events[G]=[Y,q._events[G]]}function v(q,G){r=r||bp(),q=q||{};var Y=G instanceof r;this.objectMode=!!q.objectMode,Y&&(this.objectMode=this.objectMode||!!q.readableObjectMode);var te=q.highWaterMark,Q=q.readableHighWaterMark,j=this.objectMode?16:16*1024;te||te===0?this.highWaterMark=te:Y&&(Q||Q===0)?this.highWaterMark=Q:this.highWaterMark=j,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new d,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=q.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,q.encoding&&(m||(m=v6().StringDecoder),this.decoder=new m(q.encoding),this.encoding=q.encoding)}function y(q){if(r=r||bp(),!(this instanceof y))return new y(q);this._readableState=new v(q,this),this.readable=!0,q&&(typeof q.read=="function"&&(this._read=q.read),typeof q.destroy=="function"&&(this._destroy=q.destroy)),i.call(this)}Object.defineProperty(y.prototype,"destroyed",{get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(q){this._readableState&&(this._readableState.destroyed=q)}}),y.prototype.destroy=h.destroy,y.prototype._undestroy=h.undestroy,y.prototype._destroy=function(q,G){this.push(null),G(q)},y.prototype.push=function(q,G){var Y=this._readableState,te;return Y.objectMode?te=!0:typeof q=="string"&&(G=G||Y.defaultEncoding,G!==Y.encoding&&(q=s.from(q,G),G=""),te=!0),b(this,q,G,!1,te)},y.prototype.unshift=function(q){return b(this,q,null,!0,!1)};function b(q,G,Y,te,Q){var j=q._readableState;if(G===null)j.reading=!1,z(q,j);else{var Z;Q||(Z=x(j,G)),Z?q.emit("error",Z):j.objectMode||G&&G.length>0?(typeof G!="string"&&!j.objectMode&&Object.getPrototypeOf(G)!==s.prototype&&(G=o(G)),te?j.endEmitted?q.emit("error",new Error("stream.unshift() after end event")):_(q,j,G,!0):j.ended?q.emit("error",new Error("stream.push() after EOF")):(j.reading=!1,j.decoder&&!Y?(G=j.decoder.write(G),j.objectMode||G.length!==0?_(q,j,G,!1):T(q,j)):_(q,j,G,!1))):te||(j.reading=!1)}return E(j)}function _(q,G,Y,te){G.flowing&&G.length===0&&!G.sync?(q.emit("data",Y),q.read(0)):(G.length+=G.objectMode?1:Y.length,te?G.buffer.unshift(Y):G.buffer.push(Y),G.needReadable&&U(q)),T(q,G)}function x(q,G){var Y;return!c(G)&&typeof G!="string"&&G!==void 0&&!q.objectMode&&(Y=new TypeError("Invalid non-string/buffer chunk")),Y}function E(q){return!q.ended&&(q.needReadable||q.length<q.highWaterMark||q.length===0)}y.prototype.isPaused=function(){return this._readableState.flowing===!1},y.prototype.setEncoding=function(q){return m||(m=v6().StringDecoder),this._readableState.decoder=new m(q),this._readableState.encoding=q,this};var k=8388608;function B(q){return q>=k?q=k:(q--,q|=q>>>1,q|=q>>>2,q|=q>>>4,q|=q>>>8,q|=q>>>16,q++),q}function D(q,G){return q<=0||G.length===0&&G.ended?0:G.objectMode?1:q!==q?G.flowing&&G.length?G.buffer.head.data.length:G.length:(q>G.highWaterMark&&(G.highWaterMark=B(q)),q<=G.length?q:G.ended?G.length:(G.needReadable=!0,0))}y.prototype.read=function(q){f("read",q),q=parseInt(q,10);var G=this._readableState,Y=q;if(q!==0&&(G.emittedReadable=!1),q===0&&G.needReadable&&(G.length>=G.highWaterMark||G.ended))return f("read: emitReadable",G.length,G.ended),G.length===0&&G.ended?N(this):U(this),null;if(q=D(q,G),q===0&&G.ended)return G.length===0&&N(this),null;var te=G.needReadable;f("need readable",te),(G.length===0||G.length-q<G.highWaterMark)&&(te=!0,f("length less than watermark",te)),G.ended||G.reading?(te=!1,f("reading or ended",te)):te&&(f("do read"),G.reading=!0,G.sync=!0,G.length===0&&(G.needReadable=!0),this._read(G.highWaterMark),G.sync=!1,G.reading||(q=D(Y,G)));var Q;return q>0?Q=I(q,G):Q=null,Q===null?(G.needReadable=!0,q=0):G.length-=q,G.length===0&&(G.ended||(G.needReadable=!0),Y!==q&&G.ended&&N(this)),Q!==null&&this.emit("data",Q),Q};function z(q,G){if(!G.ended){if(G.decoder){var Y=G.decoder.end();Y&&Y.length&&(G.buffer.push(Y),G.length+=G.objectMode?1:Y.length)}G.ended=!0,U(q)}}function U(q){var G=q._readableState;G.needReadable=!1,G.emittedReadable||(f("emitReadable",G.flowing),G.emittedReadable=!0,G.sync?t.nextTick(S,q):S(q))}function S(q){f("emit readable"),q.emit("readable"),R(q)}function T(q,G){G.readingMore||(G.readingMore=!0,t.nextTick(w,q,G))}function w(q,G){for(var Y=G.length;!G.reading&&!G.flowing&&!G.ended&&G.length<G.highWaterMark&&(f("maybeReadMore read 0"),q.read(0),Y!==G.length);)Y=G.length;G.readingMore=!1}y.prototype._read=function(q){this.emit("error",new Error("_read() is not implemented"))},y.prototype.pipe=function(q,G){var Y=this,te=this._readableState;switch(te.pipesCount){case 0:te.pipes=q;break;case 1:te.pipes=[te.pipes,q];break;default:te.pipes.push(q);break}te.pipesCount+=1,f("pipe count=%d opts=%j",te.pipesCount,G);var Q=(!G||G.end!==!1)&&q!==fn.stdout&&q!==fn.stderr,j=Q?V:be;te.endEmitted?t.nextTick(j):Y.once("end",j),q.on("unpipe",Z);function Z(_e,xe){f("onunpipe"),_e===Y&&xe&&xe.hasUnpiped===!1&&(xe.hasUnpiped=!0,J())}function V(){f("onend"),q.end()}var ne=A(Y);q.on("drain",ne);var se=!1;function J(){f("cleanup"),q.removeListener("close",ue),q.removeListener("finish",me),q.removeListener("drain",ne),q.removeListener("error",le),q.removeListener("unpipe",Z),Y.removeListener("end",V),Y.removeListener("end",be),Y.removeListener("data",ie),se=!0,te.awaitDrain&&(!q._writableState||q._writableState.needDrain)&&ne()}var ee=!1;Y.on("data",ie);function ie(_e){f("ondata"),ee=!1;var xe=q.write(_e);xe===!1&&!ee&&((te.pipesCount===1&&te.pipes===q||te.pipesCount>1&&W(te.pipes,q)!==-1)&&!se&&(f("false write response, pause",te.awaitDrain),te.awaitDrain++,ee=!0),Y.pause())}function le(_e){f("onerror",_e),be(),q.removeListener("error",le),n(q,"error")===0&&q.emit("error",_e)}g(q,"error",le);function ue(){q.removeListener("finish",me),be()}q.once("close",ue);function me(){f("onfinish"),q.removeListener("close",ue),be()}q.once("finish",me);function be(){f("unpipe"),Y.unpipe(q)}return q.emit("pipe",Y),te.flowing||(f("pipe resume"),Y.resume()),q};function A(q){return function(){var G=q._readableState;f("pipeOnDrain",G.awaitDrain),G.awaitDrain&&G.awaitDrain--,G.awaitDrain===0&&n(q,"data")&&(G.flowing=!0,R(q))}}y.prototype.unpipe=function(q){var G=this._readableState,Y={hasUnpiped:!1};if(G.pipesCount===0)return this;if(G.pipesCount===1)return q&&q!==G.pipes?this:(q||(q=G.pipes),G.pipes=null,G.pipesCount=0,G.flowing=!1,q&&q.emit("unpipe",this,Y),this);if(!q){var te=G.pipes,Q=G.pipesCount;G.pipes=null,G.pipesCount=0,G.flowing=!1;for(var j=0;j<Q;j++)te[j].emit("unpipe",this,{hasUnpiped:!1});return this}var Z=W(G.pipes,q);return Z===-1?this:(G.pipes.splice(Z,1),G.pipesCount-=1,G.pipesCount===1&&(G.pipes=G.pipes[0]),q.emit("unpipe",this,Y),this)},y.prototype.on=function(q,G){var Y=i.prototype.on.call(this,q,G);if(q==="data")this._readableState.flowing!==!1&&this.resume();else if(q==="readable"){var te=this._readableState;!te.endEmitted&&!te.readableListening&&(te.readableListening=te.needReadable=!0,te.emittedReadable=!1,te.reading?te.length&&U(this):t.nextTick(F,this))}return Y},y.prototype.addListener=y.prototype.on;function F(q){f("readable nexttick read 0"),q.read(0)}y.prototype.resume=function(){var q=this._readableState;return q.flowing||(f("resume"),q.flowing=!0,P(this,q)),this};function P(q,G){G.resumeScheduled||(G.resumeScheduled=!0,t.nextTick(O,q,G))}function O(q,G){G.reading||(f("resume read 0"),q.read(0)),G.resumeScheduled=!1,G.awaitDrain=0,q.emit("resume"),R(q),G.flowing&&!G.reading&&q.read(0)}y.prototype.pause=function(){return f("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(f("pause"),this._readableState.flowing=!1,this.emit("pause")),this};function R(q){var G=q._readableState;for(f("flow",G.flowing);G.flowing&&q.read()!==null;);}y.prototype.wrap=function(q){var G=this,Y=this._readableState,te=!1;q.on("end",function(){if(f("wrapped end"),Y.decoder&&!Y.ended){var Z=Y.decoder.end();Z&&Z.length&&G.push(Z)}G.push(null)}),q.on("data",function(Z){if(f("wrapped data"),Y.decoder&&(Z=Y.decoder.write(Z)),!(Y.objectMode&&Z==null)&&!(!Y.objectMode&&(!Z||!Z.length))){var V=G.push(Z);V||(te=!0,q.pause())}});for(var Q in q)this[Q]===void 0&&typeof q[Q]=="function"&&(this[Q]=function(Z){return function(){return q[Z].apply(q,arguments)}}(Q));for(var j=0;j<p.length;j++)q.on(p[j],this.emit.bind(this,p[j]));return this._read=function(Z){f("wrapped _read",Z),te&&(te=!1,q.resume())},this},Object.defineProperty(y.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),y._fromList=I;function I(q,G){if(G.length===0)return null;var Y;return G.objectMode?Y=G.buffer.shift():!q||q>=G.length?(G.decoder?Y=G.buffer.join(""):G.buffer.length===1?Y=G.buffer.head.data:Y=G.buffer.concat(G.length),G.buffer.clear()):Y=C(q,G.buffer,G.decoder),Y}function C(q,G,Y){var te;return q<G.head.data.length?(te=G.head.data.slice(0,q),G.head.data=G.head.data.slice(q)):q===G.head.data.length?te=G.shift():te=Y?M(q,G):L(q,G),te}function M(q,G){var Y=G.head,te=1,Q=Y.data;for(q-=Q.length;Y=Y.next;){var j=Y.data,Z=q>j.length?j.length:q;if(Z===j.length?Q+=j:Q+=j.slice(0,q),q-=Z,q===0){Z===j.length?(++te,Y.next?G.head=Y.next:G.head=G.tail=null):(G.head=Y,Y.data=j.slice(Z));break}++te}return G.length-=te,Q}function L(q,G){var Y=s.allocUnsafe(q),te=G.head,Q=1;for(te.data.copy(Y),q-=te.data.length;te=te.next;){var j=te.data,Z=q>j.length?j.length:q;if(j.copy(Y,Y.length-q,0,Z),q-=Z,q===0){Z===j.length?(++Q,te.next?G.head=te.next:G.head=G.tail=null):(G.head=te,te.data=j.slice(Z));break}++Q}return G.length-=Q,Y}function N(q){var G=q._readableState;if(G.length>0)throw new Error('"endReadable()" called on non-empty stream');G.endEmitted||(G.ended=!0,t.nextTick(H,G,q))}function H(q,G){!q.endEmitted&&q.length===0&&(q.endEmitted=!0,G.readable=!1,G.emit("end"))}function W(q,G){for(var Y=0,te=q.length;Y<te;Y++)if(q[Y]===G)return Y;return-1}return Sk}var Ek,bK;function Ife(){if(bK)return Ek;bK=1,Ek=n;var t=bp(),e=Object.create(l2());e.inherits=lr(),e.inherits(n,t);function r(a,o){var c=this._transformState;c.transforming=!1;var u=c.writecb;if(!u)return this.emit("error",new Error("write callback called multiple times"));c.writechunk=null,c.writecb=null,o!=null&&this.push(o),u(a);var l=this._readableState;l.reading=!1,(l.needReadable||l.length<l.highWaterMark)&&this._read(l.highWaterMark)}function n(a){if(!(this instanceof n))return new n(a);t.call(this,a),this._transformState={afterTransform:r.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,a&&(typeof a.transform=="function"&&(this._transform=a.transform),typeof a.flush=="function"&&(this._flush=a.flush)),this.on("prefinish",i)}function i(){var a=this;typeof this._flush=="function"?this._flush(function(o,c){s(a,o,c)}):s(this,null,null)}n.prototype.push=function(a,o){return this._transformState.needTransform=!1,t.prototype.push.call(this,a,o)},n.prototype._transform=function(a,o,c){throw new Error("_transform() is not implemented")},n.prototype._write=function(a,o,c){var u=this._transformState;if(u.writecb=c,u.writechunk=a,u.writeencoding=o,!u.transforming){var l=this._readableState;(u.needTransform||l.needReadable||l.length<l.highWaterMark)&&this._read(l.highWaterMark)}},n.prototype._read=function(a){var o=this._transformState;o.writechunk!==null&&o.writecb&&!o.transforming?(o.transforming=!0,this._transform(o.writechunk,o.writeencoding,o.afterTransform)):o.needTransform=!0},n.prototype._destroy=function(a,o){var c=this;t.prototype._destroy.call(this,a,function(u){o(u),c.emit("close")})};function s(a,o,c){if(o)return a.emit("error",o);if(c!=null&&a.push(c),a._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(a._transformState.transforming)throw new Error("Calling transform done when still transforming");return a.push(null)}return Ek}var kk,wK;function Nat(){if(wK)return kk;wK=1,kk=r;var t=Ife(),e=Object.create(l2());e.inherits=lr(),e.inherits(r,t);function r(n){if(!(this instanceof r))return new r(n);t.call(this,n)}return r.prototype._transform=function(n,i,s){s(null,n)},kk}var _K;function Fat(){return _K||(_K=1,function(t,e){e=t.exports=Cfe(),e.Stream=e,e.Readable=e,e.Writable=Afe(),e.Duplex=bp(),e.Transform=Ife(),e.PassThrough=Nat()}(Tw,Tw.exports)),Tw.exports}var Gm={exports:{}},T3={exports:{}},Lat=T3.exports,xK;function rM(){return xK||(xK=1,function(t){(function(e,r){function n(T,w){if(!T)throw new Error(w||"Assertion failed")}function i(T,w){T.super_=w;var A=function(){};A.prototype=w.prototype,T.prototype=new A,T.prototype.constructor=T}function s(T,w,A){if(s.isBN(T))return T;this.negative=0,this.words=null,this.length=0,this.red=null,T!==null&&((w==="le"||w==="be")&&(A=w,w=10),this._init(T||0,w||10,A||"be"))}typeof e=="object"?e.exports=s:r.BN=s,s.BN=s,s.wordSize=26;var a;try{typeof window<"u"&&typeof window.Buffer<"u"?a=window.Buffer:a=jp.Buffer}catch{}s.isBN=function(w){return w instanceof s?!0:w!==null&&typeof w=="object"&&w.constructor.wordSize===s.wordSize&&Array.isArray(w.words)},s.max=function(w,A){return w.cmp(A)>0?w:A},s.min=function(w,A){return w.cmp(A)<0?w:A},s.prototype._init=function(w,A,F){if(typeof w=="number")return this._initNumber(w,A,F);if(typeof w=="object")return this._initArray(w,A,F);A==="hex"&&(A=16),n(A===(A|0)&&A>=2&&A<=36),w=w.toString().replace(/\s+/g,"");var P=0;w[0]==="-"&&(P++,this.negative=1),P<w.length&&(A===16?this._parseHex(w,P,F):(this._parseBase(w,A,P),F==="le"&&this._initArray(this.toArray(),A,F)))},s.prototype._initNumber=function(w,A,F){w<0&&(this.negative=1,w=-w),w<67108864?(this.words=[w&67108863],this.length=1):w<4503599627370496?(this.words=[w&67108863,w/67108864&67108863],this.length=2):(n(w<9007199254740992),this.words=[w&67108863,w/67108864&67108863,1],this.length=3),F==="le"&&this._initArray(this.toArray(),A,F)},s.prototype._initArray=function(w,A,F){if(n(typeof w.length=="number"),w.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(w.length/3),this.words=new Array(this.length);for(var P=0;P<this.length;P++)this.words[P]=0;var O,R,I=0;if(F==="be")for(P=w.length-1,O=0;P>=0;P-=3)R=w[P]|w[P-1]<<8|w[P-2]<<16,this.words[O]|=R<<I&67108863,this.words[O+1]=R>>>26-I&67108863,I+=24,I>=26&&(I-=26,O++);else if(F==="le")for(P=0,O=0;P<w.length;P+=3)R=w[P]|w[P+1]<<8|w[P+2]<<16,this.words[O]|=R<<I&67108863,this.words[O+1]=R>>>26-I&67108863,I+=24,I>=26&&(I-=26,O++);return this._strip()};function o(T,w){var A=T.charCodeAt(w);if(A>=48&&A<=57)return A-48;if(A>=65&&A<=70)return A-55;if(A>=97&&A<=102)return A-87;n(!1,"Invalid character in "+T)}function c(T,w,A){var F=o(T,A);return A-1>=w&&(F|=o(T,A-1)<<4),F}s.prototype._parseHex=function(w,A,F){this.length=Math.ceil((w.length-A)/6),this.words=new Array(this.length);for(var P=0;P<this.length;P++)this.words[P]=0;var O=0,R=0,I;if(F==="be")for(P=w.length-1;P>=A;P-=2)I=c(w,A,P)<<O,this.words[R]|=I&67108863,O>=18?(O-=18,R+=1,this.words[R]|=I>>>26):O+=8;else{var C=w.length-A;for(P=C%2===0?A+1:A;P<w.length;P+=2)I=c(w,A,P)<<O,this.words[R]|=I&67108863,O>=18?(O-=18,R+=1,this.words[R]|=I>>>26):O+=8}this._strip()};function u(T,w,A,F){for(var P=0,O=0,R=Math.min(T.length,A),I=w;I<R;I++){var C=T.charCodeAt(I)-48;P*=F,C>=49?O=C-49+10:C>=17?O=C-17+10:O=C,n(C>=0&&O<F,"Invalid character"),P+=O}return P}s.prototype._parseBase=function(w,A,F){this.words=[0],this.length=1;for(var P=0,O=1;O<=67108863;O*=A)P++;P--,O=O/A|0;for(var R=w.length-F,I=R%P,C=Math.min(R,R-I)+F,M=0,L=F;L<C;L+=P)M=u(w,L,L+P,A),this.imuln(O),this.words[0]+M<67108864?this.words[0]+=M:this._iaddn(M);if(I!==0){var N=1;for(M=u(w,L,w.length,A),L=0;L<I;L++)N*=A;this.imuln(N),this.words[0]+M<67108864?this.words[0]+=M:this._iaddn(M)}this._strip()},s.prototype.copy=function(w){w.words=new Array(this.length);for(var A=0;A<this.length;A++)w.words[A]=this.words[A];w.length=this.length,w.negative=this.negative,w.red=this.red};function l(T,w){T.words=w.words,T.length=w.length,T.negative=w.negative,T.red=w.red}if(s.prototype._move=function(w){l(w,this)},s.prototype.clone=function(){var w=new s(null);return this.copy(w),w},s.prototype._expand=function(w){for(;this.length<w;)this.words[this.length++]=0;return this},s.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},s.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{s.prototype[Symbol.for("nodejs.util.inspect.custom")]=f}catch{s.prototype.inspect=f}else s.prototype.inspect=f;function f(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var d=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],h=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],m=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function(w,A){w=w||10,A=A|0||1;var F;if(w===16||w==="hex"){F="";for(var P=0,O=0,R=0;R<this.length;R++){var I=this.words[R],C=((I<<P|O)&16777215).toString(16);O=I>>>24-P&16777215,P+=2,P>=26&&(P-=26,R--),O!==0||R!==this.length-1?F=d[6-C.length]+C+F:F=C+F}for(O!==0&&(F=O.toString(16)+F);F.length%A!==0;)F="0"+F;return this.negative!==0&&(F="-"+F),F}if(w===(w|0)&&w>=2&&w<=36){var M=h[w],L=m[w];F="";var N=this.clone();for(N.negative=0;!N.isZero();){var H=N.modrn(L).toString(w);N=N.idivn(L),N.isZero()?F=H+F:F=d[M-H.length]+H+F}for(this.isZero()&&(F="0"+F);F.length%A!==0;)F="0"+F;return this.negative!==0&&(F="-"+F),F}n(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var w=this.words[0];return this.length===2?w+=this.words[1]*67108864:this.length===3&&this.words[2]===1?w+=4503599627370496+this.words[1]*67108864:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-w:w},s.prototype.toJSON=function(){return this.toString(16,2)},a&&(s.prototype.toBuffer=function(w,A){return this.toArrayLike(a,w,A)}),s.prototype.toArray=function(w,A){return this.toArrayLike(Array,w,A)};var p=function(w,A){return w.allocUnsafe?w.allocUnsafe(A):new w(A)};s.prototype.toArrayLike=function(w,A,F){this._strip();var P=this.byteLength(),O=F||Math.max(1,P);n(P<=O,"byte array longer than desired length"),n(O>0,"Requested array length <= 0");var R=p(w,O),I=A==="le"?"LE":"BE";return this["_toArrayLike"+I](R,P),R},s.prototype._toArrayLikeLE=function(w,A){for(var F=0,P=0,O=0,R=0;O<this.length;O++){var I=this.words[O]<<R|P;w[F++]=I&255,F<w.length&&(w[F++]=I>>8&255),F<w.length&&(w[F++]=I>>16&255),R===6?(F<w.length&&(w[F++]=I>>24&255),P=0,R=0):(P=I>>>24,R+=2)}if(F<w.length)for(w[F++]=P;F<w.length;)w[F++]=0},s.prototype._toArrayLikeBE=function(w,A){for(var F=w.length-1,P=0,O=0,R=0;O<this.length;O++){var I=this.words[O]<<R|P;w[F--]=I&255,F>=0&&(w[F--]=I>>8&255),F>=0&&(w[F--]=I>>16&255),R===6?(F>=0&&(w[F--]=I>>24&255),P=0,R=0):(P=I>>>24,R+=2)}if(F>=0)for(w[F--]=P;F>=0;)w[F--]=0},Math.clz32?s.prototype._countBits=function(w){return 32-Math.clz32(w)}:s.prototype._countBits=function(w){var A=w,F=0;return A>=4096&&(F+=13,A>>>=13),A>=64&&(F+=7,A>>>=7),A>=8&&(F+=4,A>>>=4),A>=2&&(F+=2,A>>>=2),F+A},s.prototype._zeroBits=function(w){if(w===0)return 26;var A=w,F=0;return(A&8191)===0&&(F+=13,A>>>=13),(A&127)===0&&(F+=7,A>>>=7),(A&15)===0&&(F+=4,A>>>=4),(A&3)===0&&(F+=2,A>>>=2),(A&1)===0&&F++,F},s.prototype.bitLength=function(){var w=this.words[this.length-1],A=this._countBits(w);return(this.length-1)*26+A};function g(T){for(var w=new Array(T.bitLength()),A=0;A<w.length;A++){var F=A/26|0,P=A%26;w[A]=T.words[F]>>>P&1}return w}s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var w=0,A=0;A<this.length;A++){var F=this._zeroBits(this.words[A]);if(w+=F,F!==26)break}return w},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(w){return this.negative!==0?this.abs().inotn(w).iaddn(1):this.clone()},s.prototype.fromTwos=function(w){return this.testn(w-1)?this.notn(w).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return this.negative!==0},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(w){for(;this.length<w.length;)this.words[this.length++]=0;for(var A=0;A<w.length;A++)this.words[A]=this.words[A]|w.words[A];return this._strip()},s.prototype.ior=function(w){return n((this.negative|w.negative)===0),this.iuor(w)},s.prototype.or=function(w){return this.length>w.length?this.clone().ior(w):w.clone().ior(this)},s.prototype.uor=function(w){return this.length>w.length?this.clone().iuor(w):w.clone().iuor(this)},s.prototype.iuand=function(w){var A;this.length>w.length?A=w:A=this;for(var F=0;F<A.length;F++)this.words[F]=this.words[F]&w.words[F];return this.length=A.length,this._strip()},s.prototype.iand=function(w){return n((this.negative|w.negative)===0),this.iuand(w)},s.prototype.and=function(w){return this.length>w.length?this.clone().iand(w):w.clone().iand(this)},s.prototype.uand=function(w){return this.length>w.length?this.clone().iuand(w):w.clone().iuand(this)},s.prototype.iuxor=function(w){var A,F;this.length>w.length?(A=this,F=w):(A=w,F=this);for(var P=0;P<F.length;P++)this.words[P]=A.words[P]^F.words[P];if(this!==A)for(;P<A.length;P++)this.words[P]=A.words[P];return this.length=A.length,this._strip()},s.prototype.ixor=function(w){return n((this.negative|w.negative)===0),this.iuxor(w)},s.prototype.xor=function(w){return this.length>w.length?this.clone().ixor(w):w.clone().ixor(this)},s.prototype.uxor=function(w){return this.length>w.length?this.clone().iuxor(w):w.clone().iuxor(this)},s.prototype.inotn=function(w){n(typeof w=="number"&&w>=0);var A=Math.ceil(w/26)|0,F=w%26;this._expand(A),F>0&&A--;for(var P=0;P<A;P++)this.words[P]=~this.words[P]&67108863;return F>0&&(this.words[P]=~this.words[P]&67108863>>26-F),this._strip()},s.prototype.notn=function(w){return this.clone().inotn(w)},s.prototype.setn=function(w,A){n(typeof w=="number"&&w>=0);var F=w/26|0,P=w%26;return this._expand(F+1),A?this.words[F]=this.words[F]|1<<P:this.words[F]=this.words[F]&~(1<<P),this._strip()},s.prototype.iadd=function(w){var A;if(this.negative!==0&&w.negative===0)return this.negative=0,A=this.isub(w),this.negative^=1,this._normSign();if(this.negative===0&&w.negative!==0)return w.negative=0,A=this.isub(w),w.negative=1,A._normSign();var F,P;this.length>w.length?(F=this,P=w):(F=w,P=this);for(var O=0,R=0;R<P.length;R++)A=(F.words[R]|0)+(P.words[R]|0)+O,this.words[R]=A&67108863,O=A>>>26;for(;O!==0&&R<F.length;R++)A=(F.words[R]|0)+O,this.words[R]=A&67108863,O=A>>>26;if(this.length=F.length,O!==0)this.words[this.length]=O,this.length++;else if(F!==this)for(;R<F.length;R++)this.words[R]=F.words[R];return this},s.prototype.add=function(w){var A;return w.negative!==0&&this.negative===0?(w.negative=0,A=this.sub(w),w.negative^=1,A):w.negative===0&&this.negative!==0?(this.negative=0,A=w.sub(this),this.negative=1,A):this.length>w.length?this.clone().iadd(w):w.clone().iadd(this)},s.prototype.isub=function(w){if(w.negative!==0){w.negative=0;var A=this.iadd(w);return w.negative=1,A._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(w),this.negative=1,this._normSign();var F=this.cmp(w);if(F===0)return this.negative=0,this.length=1,this.words[0]=0,this;var P,O;F>0?(P=this,O=w):(P=w,O=this);for(var R=0,I=0;I<O.length;I++)A=(P.words[I]|0)-(O.words[I]|0)+R,R=A>>26,this.words[I]=A&67108863;for(;R!==0&&I<P.length;I++)A=(P.words[I]|0)+R,R=A>>26,this.words[I]=A&67108863;if(R===0&&I<P.length&&P!==this)for(;I<P.length;I++)this.words[I]=P.words[I];return this.length=Math.max(this.length,I),P!==this&&(this.negative=1),this._strip()},s.prototype.sub=function(w){return this.clone().isub(w)};function v(T,w,A){A.negative=w.negative^T.negative;var F=T.length+w.length|0;A.length=F,F=F-1|0;var P=T.words[0]|0,O=w.words[0]|0,R=P*O,I=R&67108863,C=R/67108864|0;A.words[0]=I;for(var M=1;M<F;M++){for(var L=C>>>26,N=C&67108863,H=Math.min(M,w.length-1),W=Math.max(0,M-T.length+1);W<=H;W++){var q=M-W|0;P=T.words[q]|0,O=w.words[W]|0,R=P*O+N,L+=R/67108864|0,N=R&67108863}A.words[M]=N|0,C=L|0}return C!==0?A.words[M]=C|0:A.length--,A._strip()}var y=function(w,A,F){var P=w.words,O=A.words,R=F.words,I=0,C,M,L,N=P[0]|0,H=N&8191,W=N>>>13,q=P[1]|0,G=q&8191,Y=q>>>13,te=P[2]|0,Q=te&8191,j=te>>>13,Z=P[3]|0,V=Z&8191,ne=Z>>>13,se=P[4]|0,J=se&8191,ee=se>>>13,ie=P[5]|0,le=ie&8191,ue=ie>>>13,me=P[6]|0,be=me&8191,_e=me>>>13,xe=P[7]|0,Be=xe&8191,re=xe>>>13,K=P[8]|0,X=K&8191,ce=K>>>13,ye=P[9]|0,Ee=ye&8191,Se=ye>>>13,rt=O[0]|0,ct=rt&8191,we=rt>>>13,ke=O[1]|0,Ye=ke&8191,ot=ke>>>13,xt=O[2]|0,ut=xt&8191,gt=xt>>>13,er=O[3]|0,ur=er&8191,Tt=er>>>13,Zr=O[4]|0,Br=Zr&8191,bt=Zr>>>13,cn=O[5]|0,ln=cn&8191,jt=cn>>>13,Cr=O[6]|0,Jr=Cr&8191,Lt=Cr>>>13,Qr=O[7]|0,oe=Qr&8191,he=Qr>>>13,fe=O[8]|0,de=fe&8191,pe=fe>>>13,ge=O[9]|0,Ae=ge&8191,De=ge>>>13;F.negative=w.negative^A.negative,F.length=19,C=Math.imul(H,ct),M=Math.imul(H,we),M=M+Math.imul(W,ct)|0,L=Math.imul(W,we);var Ce=(I+C|0)+((M&8191)<<13)|0;I=(L+(M>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,C=Math.imul(G,ct),M=Math.imul(G,we),M=M+Math.imul(Y,ct)|0,L=Math.imul(Y,we),C=C+Math.imul(H,Ye)|0,M=M+Math.imul(H,ot)|0,M=M+Math.imul(W,Ye)|0,L=L+Math.imul(W,ot)|0;var Ie=(I+C|0)+((M&8191)<<13)|0;I=(L+(M>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,C=Math.imul(Q,ct),M=Math.imul(Q,we),M=M+Math.imul(j,ct)|0,L=Math.imul(j,we),C=C+Math.imul(G,Ye)|0,M=M+Math.imul(G,ot)|0,M=M+Math.imul(Y,Ye)|0,L=L+Math.imul(Y,ot)|0,C=C+Math.imul(H,ut)|0,M=M+Math.imul(H,gt)|0,M=M+Math.imul(W,ut)|0,L=L+Math.imul(W,gt)|0;var Pe=(I+C|0)+((M&8191)<<13)|0;I=(L+(M>>>13)|0)+(Pe>>>26)|0,Pe&=67108863,C=Math.imul(V,ct),M=Math.imul(V,we),M=M+Math.imul(ne,ct)|0,L=Math.imul(ne,we),C=C+Math.imul(Q,Ye)|0,M=M+Math.imul(Q,ot)|0,M=M+Math.imul(j,Ye)|0,L=L+Math.imul(j,ot)|0,C=C+Math.imul(G,ut)|0,M=M+Math.imul(G,gt)|0,M=M+Math.imul(Y,ut)|0,L=L+Math.imul(Y,gt)|0,C=C+Math.imul(H,ur)|0,M=M+Math.imul(H,Tt)|0,M=M+Math.imul(W,ur)|0,L=L+Math.imul(W,Tt)|0;var Ue=(I+C|0)+((M&8191)<<13)|0;I=(L+(M>>>13)|0)+(Ue>>>26)|0,Ue&=67108863,C=Math.imul(J,ct),M=Math.imul(J,we),M=M+Math.imul(ee,ct)|0,L=Math.imul(ee,we),C=C+Math.imul(V,Ye)|0,M=M+Math.imul(V,ot)|0,M=M+Math.imul(ne,Ye)|0,L=L+Math.imul(ne,ot)|0,C=C+Math.imul(Q,ut)|0,M=M+Math.imul(Q,gt)|0,M=M+Math.imul(j,ut)|0,L=L+Math.imul(j,gt)|0,C=C+Math.imul(G,ur)|0,M=M+Math.imul(G,Tt)|0,M=M+Math.imul(Y,ur)|0,L=L+Math.imul(Y,Tt)|0,C=C+Math.imul(H,Br)|0,M=M+Math.imul(H,bt)|0,M=M+Math.imul(W,Br)|0,L=L+Math.imul(W,bt)|0;var He=(I+C|0)+((M&8191)<<13)|0;I=(L+(M>>>13)|0)+(He>>>26)|0,He&=67108863,C=Math.imul(le,ct),M=Math.imul(le,we),M=M+Math.imul(ue,ct)|0,L=Math.imul(ue,we),C=C+Math.imul(J,Ye)|0,M=M+Math.imul(J,ot)|0,M=M+Math.imul(ee,Ye)|0,L=L+Math.imul(ee,ot)|0,C=C+Math.imul(V,ut)|0,M=M+Math.imul(V,gt)|0,M=M+Math.imul(ne,ut)|0,L=L+Math.imul(ne,gt)|0,C=C+Math.imul(Q,ur)|0,M=M+Math.imul(Q,Tt)|0,M=M+Math.imul(j,ur)|0,L=L+Math.imul(j,Tt)|0,C=C+Math.imul(G,Br)|0,M=M+Math.imul(G,bt)|0,M=M+Math.imul(Y,Br)|0,L=L+Math.imul(Y,bt)|0,C=C+Math.imul(H,ln)|0,M=M+Math.imul(H,jt)|0,M=M+Math.imul(W,ln)|0,L=L+Math.imul(W,jt)|0;var at=(I+C|0)+((M&8191)<<13)|0;I=(L+(M>>>13)|0)+(at>>>26)|0,at&=67108863,C=Math.imul(be,ct),M=Math.imul(be,we),M=M+Math.imul(_e,ct)|0,L=Math.imul(_e,we),C=C+Math.imul(le,Ye)|0,M=M+Math.imul(le,ot)|0,M=M+Math.imul(ue,Ye)|0,L=L+Math.imul(ue,ot)|0,C=C+Math.imul(J,ut)|0,M=M+Math.imul(J,gt)|0,M=M+Math.imul(ee,ut)|0,L=L+Math.imul(ee,gt)|0,C=C+Math.imul(V,ur)|0,M=M+Math.imul(V,Tt)|0,M=M+Math.imul(ne,ur)|0,L=L+Math.imul(ne,Tt)|0,C=C+Math.imul(Q,Br)|0,M=M+Math.imul(Q,bt)|0,M=M+Math.imul(j,Br)|0,L=L+Math.imul(j,bt)|0,C=C+Math.imul(G,ln)|0,M=M+Math.imul(G,jt)|0,M=M+Math.imul(Y,ln)|0,L=L+Math.imul(Y,jt)|0,C=C+Math.imul(H,Jr)|0,M=M+Math.imul(H,Lt)|0,M=M+Math.imul(W,Jr)|0,L=L+Math.imul(W,Lt)|0;var qe=(I+C|0)+((M&8191)<<13)|0;I=(L+(M>>>13)|0)+(qe>>>26)|0,qe&=67108863,C=Math.imul(Be,ct),M=Math.imul(Be,we),M=M+Math.imul(re,ct)|0,L=Math.imul(re,we),C=C+Math.imul(be,Ye)|0,M=M+Math.imul(be,ot)|0,M=M+Math.imul(_e,Ye)|0,L=L+Math.imul(_e,ot)|0,C=C+Math.imul(le,ut)|0,M=M+Math.imul(le,gt)|0,M=M+Math.imul(ue,ut)|0,L=L+Math.imul(ue,gt)|0,C=C+Math.imul(J,ur)|0,M=M+Math.imul(J,Tt)|0,M=M+Math.imul(ee,ur)|0,L=L+Math.imul(ee,Tt)|0,C=C+Math.imul(V,Br)|0,M=M+Math.imul(V,bt)|0,M=M+Math.imul(ne,Br)|0,L=L+Math.imul(ne,bt)|0,C=C+Math.imul(Q,ln)|0,M=M+Math.imul(Q,jt)|0,M=M+Math.imul(j,ln)|0,L=L+Math.imul(j,jt)|0,C=C+Math.imul(G,Jr)|0,M=M+Math.imul(G,Lt)|0,M=M+Math.imul(Y,Jr)|0,L=L+Math.imul(Y,Lt)|0,C=C+Math.imul(H,oe)|0,M=M+Math.imul(H,he)|0,M=M+Math.imul(W,oe)|0,L=L+Math.imul(W,he)|0;var Ke=(I+C|0)+((M&8191)<<13)|0;I=(L+(M>>>13)|0)+(Ke>>>26)|0,Ke&=67108863,C=Math.imul(X,ct),M=Math.imul(X,we),M=M+Math.imul(ce,ct)|0,L=Math.imul(ce,we),C=C+Math.imul(Be,Ye)|0,M=M+Math.imul(Be,ot)|0,M=M+Math.imul(re,Ye)|0,L=L+Math.imul(re,ot)|0,C=C+Math.imul(be,ut)|0,M=M+Math.imul(be,gt)|0,M=M+Math.imul(_e,ut)|0,L=L+Math.imul(_e,gt)|0,C=C+Math.imul(le,ur)|0,M=M+Math.imul(le,Tt)|0,M=M+Math.imul(ue,ur)|0,L=L+Math.imul(ue,Tt)|0,C=C+Math.imul(J,Br)|0,M=M+Math.imul(J,bt)|0,M=M+Math.imul(ee,Br)|0,L=L+Math.imul(ee,bt)|0,C=C+Math.imul(V,ln)|0,M=M+Math.imul(V,jt)|0,M=M+Math.imul(ne,ln)|0,L=L+Math.imul(ne,jt)|0,C=C+Math.imul(Q,Jr)|0,M=M+Math.imul(Q,Lt)|0,M=M+Math.imul(j,Jr)|0,L=L+Math.imul(j,Lt)|0,C=C+Math.imul(G,oe)|0,M=M+Math.imul(G,he)|0,M=M+Math.imul(Y,oe)|0,L=L+Math.imul(Y,he)|0,C=C+Math.imul(H,de)|0,M=M+Math.imul(H,pe)|0,M=M+Math.imul(W,de)|0,L=L+Math.imul(W,pe)|0;var It=(I+C|0)+((M&8191)<<13)|0;I=(L+(M>>>13)|0)+(It>>>26)|0,It&=67108863,C=Math.imul(Ee,ct),M=Math.imul(Ee,we),M=M+Math.imul(Se,ct)|0,L=Math.imul(Se,we),C=C+Math.imul(X,Ye)|0,M=M+Math.imul(X,ot)|0,M=M+Math.imul(ce,Ye)|0,L=L+Math.imul(ce,ot)|0,C=C+Math.imul(Be,ut)|0,M=M+Math.imul(Be,gt)|0,M=M+Math.imul(re,ut)|0,L=L+Math.imul(re,gt)|0,C=C+Math.imul(be,ur)|0,M=M+Math.imul(be,Tt)|0,M=M+Math.imul(_e,ur)|0,L=L+Math.imul(_e,Tt)|0,C=C+Math.imul(le,Br)|0,M=M+Math.imul(le,bt)|0,M=M+Math.imul(ue,Br)|0,L=L+Math.imul(ue,bt)|0,C=C+Math.imul(J,ln)|0,M=M+Math.imul(J,jt)|0,M=M+Math.imul(ee,ln)|0,L=L+Math.imul(ee,jt)|0,C=C+Math.imul(V,Jr)|0,M=M+Math.imul(V,Lt)|0,M=M+Math.imul(ne,Jr)|0,L=L+Math.imul(ne,Lt)|0,C=C+Math.imul(Q,oe)|0,M=M+Math.imul(Q,he)|0,M=M+Math.imul(j,oe)|0,L=L+Math.imul(j,he)|0,C=C+Math.imul(G,de)|0,M=M+Math.imul(G,pe)|0,M=M+Math.imul(Y,de)|0,L=L+Math.imul(Y,pe)|0,C=C+Math.imul(H,Ae)|0,M=M+Math.imul(H,De)|0,M=M+Math.imul(W,Ae)|0,L=L+Math.imul(W,De)|0;var Dr=(I+C|0)+((M&8191)<<13)|0;I=(L+(M>>>13)|0)+(Dr>>>26)|0,Dr&=67108863,C=Math.imul(Ee,Ye),M=Math.imul(Ee,ot),M=M+Math.imul(Se,Ye)|0,L=Math.imul(Se,ot),C=C+Math.imul(X,ut)|0,M=M+Math.imul(X,gt)|0,M=M+Math.imul(ce,ut)|0,L=L+Math.imul(ce,gt)|0,C=C+Math.imul(Be,ur)|0,M=M+Math.imul(Be,Tt)|0,M=M+Math.imul(re,ur)|0,L=L+Math.imul(re,Tt)|0,C=C+Math.imul(be,Br)|0,M=M+Math.imul(be,bt)|0,M=M+Math.imul(_e,Br)|0,L=L+Math.imul(_e,bt)|0,C=C+Math.imul(le,ln)|0,M=M+Math.imul(le,jt)|0,M=M+Math.imul(ue,ln)|0,L=L+Math.imul(ue,jt)|0,C=C+Math.imul(J,Jr)|0,M=M+Math.imul(J,Lt)|0,M=M+Math.imul(ee,Jr)|0,L=L+Math.imul(ee,Lt)|0,C=C+Math.imul(V,oe)|0,M=M+Math.imul(V,he)|0,M=M+Math.imul(ne,oe)|0,L=L+Math.imul(ne,he)|0,C=C+Math.imul(Q,de)|0,M=M+Math.imul(Q,pe)|0,M=M+Math.imul(j,de)|0,L=L+Math.imul(j,pe)|0,C=C+Math.imul(G,Ae)|0,M=M+Math.imul(G,De)|0,M=M+Math.imul(Y,Ae)|0,L=L+Math.imul(Y,De)|0;var qr=(I+C|0)+((M&8191)<<13)|0;I=(L+(M>>>13)|0)+(qr>>>26)|0,qr&=67108863,C=Math.imul(Ee,ut),M=Math.imul(Ee,gt),M=M+Math.imul(Se,ut)|0,L=Math.imul(Se,gt),C=C+Math.imul(X,ur)|0,M=M+Math.imul(X,Tt)|0,M=M+Math.imul(ce,ur)|0,L=L+Math.imul(ce,Tt)|0,C=C+Math.imul(Be,Br)|0,M=M+Math.imul(Be,bt)|0,M=M+Math.imul(re,Br)|0,L=L+Math.imul(re,bt)|0,C=C+Math.imul(be,ln)|0,M=M+Math.imul(be,jt)|0,M=M+Math.imul(_e,ln)|0,L=L+Math.imul(_e,jt)|0,C=C+Math.imul(le,Jr)|0,M=M+Math.imul(le,Lt)|0,M=M+Math.imul(ue,Jr)|0,L=L+Math.imul(ue,Lt)|0,C=C+Math.imul(J,oe)|0,M=M+Math.imul(J,he)|0,M=M+Math.imul(ee,oe)|0,L=L+Math.imul(ee,he)|0,C=C+Math.imul(V,de)|0,M=M+Math.imul(V,pe)|0,M=M+Math.imul(ne,de)|0,L=L+Math.imul(ne,pe)|0,C=C+Math.imul(Q,Ae)|0,M=M+Math.imul(Q,De)|0,M=M+Math.imul(j,Ae)|0,L=L+Math.imul(j,De)|0;var Mn=(I+C|0)+((M&8191)<<13)|0;I=(L+(M>>>13)|0)+(Mn>>>26)|0,Mn&=67108863,C=Math.imul(Ee,ur),M=Math.imul(Ee,Tt),M=M+Math.imul(Se,ur)|0,L=Math.imul(Se,Tt),C=C+Math.imul(X,Br)|0,M=M+Math.imul(X,bt)|0,M=M+Math.imul(ce,Br)|0,L=L+Math.imul(ce,bt)|0,C=C+Math.imul(Be,ln)|0,M=M+Math.imul(Be,jt)|0,M=M+Math.imul(re,ln)|0,L=L+Math.imul(re,jt)|0,C=C+Math.imul(be,Jr)|0,M=M+Math.imul(be,Lt)|0,M=M+Math.imul(_e,Jr)|0,L=L+Math.imul(_e,Lt)|0,C=C+Math.imul(le,oe)|0,M=M+Math.imul(le,he)|0,M=M+Math.imul(ue,oe)|0,L=L+Math.imul(ue,he)|0,C=C+Math.imul(J,de)|0,M=M+Math.imul(J,pe)|0,M=M+Math.imul(ee,de)|0,L=L+Math.imul(ee,pe)|0,C=C+Math.imul(V,Ae)|0,M=M+Math.imul(V,De)|0,M=M+Math.imul(ne,Ae)|0,L=L+Math.imul(ne,De)|0;var Ia=(I+C|0)+((M&8191)<<13)|0;I=(L+(M>>>13)|0)+(Ia>>>26)|0,Ia&=67108863,C=Math.imul(Ee,Br),M=Math.imul(Ee,bt),M=M+Math.imul(Se,Br)|0,L=Math.imul(Se,bt),C=C+Math.imul(X,ln)|0,M=M+Math.imul(X,jt)|0,M=M+Math.imul(ce,ln)|0,L=L+Math.imul(ce,jt)|0,C=C+Math.imul(Be,Jr)|0,M=M+Math.imul(Be,Lt)|0,M=M+Math.imul(re,Jr)|0,L=L+Math.imul(re,Lt)|0,C=C+Math.imul(be,oe)|0,M=M+Math.imul(be,he)|0,M=M+Math.imul(_e,oe)|0,L=L+Math.imul(_e,he)|0,C=C+Math.imul(le,de)|0,M=M+Math.imul(le,pe)|0,M=M+Math.imul(ue,de)|0,L=L+Math.imul(ue,pe)|0,C=C+Math.imul(J,Ae)|0,M=M+Math.imul(J,De)|0,M=M+Math.imul(ee,Ae)|0,L=L+Math.imul(ee,De)|0;var Pa=(I+C|0)+((M&8191)<<13)|0;I=(L+(M>>>13)|0)+(Pa>>>26)|0,Pa&=67108863,C=Math.imul(Ee,ln),M=Math.imul(Ee,jt),M=M+Math.imul(Se,ln)|0,L=Math.imul(Se,jt),C=C+Math.imul(X,Jr)|0,M=M+Math.imul(X,Lt)|0,M=M+Math.imul(ce,Jr)|0,L=L+Math.imul(ce,Lt)|0,C=C+Math.imul(Be,oe)|0,M=M+Math.imul(Be,he)|0,M=M+Math.imul(re,oe)|0,L=L+Math.imul(re,he)|0,C=C+Math.imul(be,de)|0,M=M+Math.imul(be,pe)|0,M=M+Math.imul(_e,de)|0,L=L+Math.imul(_e,pe)|0,C=C+Math.imul(le,Ae)|0,M=M+Math.imul(le,De)|0,M=M+Math.imul(ue,Ae)|0,L=L+Math.imul(ue,De)|0;var Ra=(I+C|0)+((M&8191)<<13)|0;I=(L+(M>>>13)|0)+(Ra>>>26)|0,Ra&=67108863,C=Math.imul(Ee,Jr),M=Math.imul(Ee,Lt),M=M+Math.imul(Se,Jr)|0,L=Math.imul(Se,Lt),C=C+Math.imul(X,oe)|0,M=M+Math.imul(X,he)|0,M=M+Math.imul(ce,oe)|0,L=L+Math.imul(ce,he)|0,C=C+Math.imul(Be,de)|0,M=M+Math.imul(Be,pe)|0,M=M+Math.imul(re,de)|0,L=L+Math.imul(re,pe)|0,C=C+Math.imul(be,Ae)|0,M=M+Math.imul(be,De)|0,M=M+Math.imul(_e,Ae)|0,L=L+Math.imul(_e,De)|0;var js=(I+C|0)+((M&8191)<<13)|0;I=(L+(M>>>13)|0)+(js>>>26)|0,js&=67108863,C=Math.imul(Ee,oe),M=Math.imul(Ee,he),M=M+Math.imul(Se,oe)|0,L=Math.imul(Se,he),C=C+Math.imul(X,de)|0,M=M+Math.imul(X,pe)|0,M=M+Math.imul(ce,de)|0,L=L+Math.imul(ce,pe)|0,C=C+Math.imul(Be,Ae)|0,M=M+Math.imul(Be,De)|0,M=M+Math.imul(re,Ae)|0,L=L+Math.imul(re,De)|0;var $o=(I+C|0)+((M&8191)<<13)|0;I=(L+(M>>>13)|0)+($o>>>26)|0,$o&=67108863,C=Math.imul(Ee,de),M=Math.imul(Ee,pe),M=M+Math.imul(Se,de)|0,L=Math.imul(Se,pe),C=C+Math.imul(X,Ae)|0,M=M+Math.imul(X,De)|0,M=M+Math.imul(ce,Ae)|0,L=L+Math.imul(ce,De)|0;var Oa=(I+C|0)+((M&8191)<<13)|0;I=(L+(M>>>13)|0)+(Oa>>>26)|0,Oa&=67108863,C=Math.imul(Ee,Ae),M=Math.imul(Ee,De),M=M+Math.imul(Se,Ae)|0,L=Math.imul(Se,De);var C_=(I+C|0)+((M&8191)<<13)|0;return I=(L+(M>>>13)|0)+(C_>>>26)|0,C_&=67108863,R[0]=Ce,R[1]=Ie,R[2]=Pe,R[3]=Ue,R[4]=He,R[5]=at,R[6]=qe,R[7]=Ke,R[8]=It,R[9]=Dr,R[10]=qr,R[11]=Mn,R[12]=Ia,R[13]=Pa,R[14]=Ra,R[15]=js,R[16]=$o,R[17]=Oa,R[18]=C_,I!==0&&(R[19]=I,F.length++),F};Math.imul||(y=v);function b(T,w,A){A.negative=w.negative^T.negative,A.length=T.length+w.length;for(var F=0,P=0,O=0;O<A.length-1;O++){var R=P;P=0;for(var I=F&67108863,C=Math.min(O,w.length-1),M=Math.max(0,O-T.length+1);M<=C;M++){var L=O-M,N=T.words[L]|0,H=w.words[M]|0,W=N*H,q=W&67108863;R=R+(W/67108864|0)|0,q=q+I|0,I=q&67108863,R=R+(q>>>26)|0,P+=R>>>26,R&=67108863}A.words[O]=I,F=R,R=P}return F!==0?A.words[O]=F:A.length--,A._strip()}function _(T,w,A){return b(T,w,A)}s.prototype.mulTo=function(w,A){var F,P=this.length+w.length;return this.length===10&&w.length===10?F=y(this,w,A):P<63?F=v(this,w,A):P<1024?F=b(this,w,A):F=_(this,w,A),F},s.prototype.mul=function(w){var A=new s(null);return A.words=new Array(this.length+w.length),this.mulTo(w,A)},s.prototype.mulf=function(w){var A=new s(null);return A.words=new Array(this.length+w.length),_(this,w,A)},s.prototype.imul=function(w){return this.clone().mulTo(w,this)},s.prototype.imuln=function(w){var A=w<0;A&&(w=-w),n(typeof w=="number"),n(w<67108864);for(var F=0,P=0;P<this.length;P++){var O=(this.words[P]|0)*w,R=(O&67108863)+(F&67108863);F>>=26,F+=O/67108864|0,F+=R>>>26,this.words[P]=R&67108863}return F!==0&&(this.words[P]=F,this.length++),A?this.ineg():this},s.prototype.muln=function(w){return this.clone().imuln(w)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(w){var A=g(w);if(A.length===0)return new s(1);for(var F=this,P=0;P<A.length&&A[P]===0;P++,F=F.sqr());if(++P<A.length)for(var O=F.sqr();P<A.length;P++,O=O.sqr())A[P]!==0&&(F=F.mul(O));return F},s.prototype.iushln=function(w){n(typeof w=="number"&&w>=0);var A=w%26,F=(w-A)/26,P=67108863>>>26-A<<26-A,O;if(A!==0){var R=0;for(O=0;O<this.length;O++){var I=this.words[O]&P,C=(this.words[O]|0)-I<<A;this.words[O]=C|R,R=I>>>26-A}R&&(this.words[O]=R,this.length++)}if(F!==0){for(O=this.length-1;O>=0;O--)this.words[O+F]=this.words[O];for(O=0;O<F;O++)this.words[O]=0;this.length+=F}return this._strip()},s.prototype.ishln=function(w){return n(this.negative===0),this.iushln(w)},s.prototype.iushrn=function(w,A,F){n(typeof w=="number"&&w>=0);var P;A?P=(A-A%26)/26:P=0;var O=w%26,R=Math.min((w-O)/26,this.length),I=67108863^67108863>>>O<<O,C=F;if(P-=R,P=Math.max(0,P),C){for(var M=0;M<R;M++)C.words[M]=this.words[M];C.length=R}if(R!==0)if(this.length>R)for(this.length-=R,M=0;M<this.length;M++)this.words[M]=this.words[M+R];else this.words[0]=0,this.length=1;var L=0;for(M=this.length-1;M>=0&&(L!==0||M>=P);M--){var N=this.words[M]|0;this.words[M]=L<<26-O|N>>>O,L=N&I}return C&&L!==0&&(C.words[C.length++]=L),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},s.prototype.ishrn=function(w,A,F){return n(this.negative===0),this.iushrn(w,A,F)},s.prototype.shln=function(w){return this.clone().ishln(w)},s.prototype.ushln=function(w){return this.clone().iushln(w)},s.prototype.shrn=function(w){return this.clone().ishrn(w)},s.prototype.ushrn=function(w){return this.clone().iushrn(w)},s.prototype.testn=function(w){n(typeof w=="number"&&w>=0);var A=w%26,F=(w-A)/26,P=1<<A;if(this.length<=F)return!1;var O=this.words[F];return!!(O&P)},s.prototype.imaskn=function(w){n(typeof w=="number"&&w>=0);var A=w%26,F=(w-A)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=F)return this;if(A!==0&&F++,this.length=Math.min(F,this.length),A!==0){var P=67108863^67108863>>>A<<A;this.words[this.length-1]&=P}return this._strip()},s.prototype.maskn=function(w){return this.clone().imaskn(w)},s.prototype.iaddn=function(w){return n(typeof w=="number"),n(w<67108864),w<0?this.isubn(-w):this.negative!==0?this.length===1&&(this.words[0]|0)<=w?(this.words[0]=w-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(w),this.negative=1,this):this._iaddn(w)},s.prototype._iaddn=function(w){this.words[0]+=w;for(var A=0;A<this.length&&this.words[A]>=67108864;A++)this.words[A]-=67108864,A===this.length-1?this.words[A+1]=1:this.words[A+1]++;return this.length=Math.max(this.length,A+1),this},s.prototype.isubn=function(w){if(n(typeof w=="number"),n(w<67108864),w<0)return this.iaddn(-w);if(this.negative!==0)return this.negative=0,this.iaddn(w),this.negative=1,this;if(this.words[0]-=w,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var A=0;A<this.length&&this.words[A]<0;A++)this.words[A]+=67108864,this.words[A+1]-=1;return this._strip()},s.prototype.addn=function(w){return this.clone().iaddn(w)},s.prototype.subn=function(w){return this.clone().isubn(w)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(w,A,F){var P=w.length+F,O;this._expand(P);var R,I=0;for(O=0;O<w.length;O++){R=(this.words[O+F]|0)+I;var C=(w.words[O]|0)*A;R-=C&67108863,I=(R>>26)-(C/67108864|0),this.words[O+F]=R&67108863}for(;O<this.length-F;O++)R=(this.words[O+F]|0)+I,I=R>>26,this.words[O+F]=R&67108863;if(I===0)return this._strip();for(n(I===-1),I=0,O=0;O<this.length;O++)R=-(this.words[O]|0)+I,I=R>>26,this.words[O]=R&67108863;return this.negative=1,this._strip()},s.prototype._wordDiv=function(w,A){var F=this.length-w.length,P=this.clone(),O=w,R=O.words[O.length-1]|0,I=this._countBits(R);F=26-I,F!==0&&(O=O.ushln(F),P.iushln(F),R=O.words[O.length-1]|0);var C=P.length-O.length,M;if(A!=="mod"){M=new s(null),M.length=C+1,M.words=new Array(M.length);for(var L=0;L<M.length;L++)M.words[L]=0}var N=P.clone()._ishlnsubmul(O,1,C);N.negative===0&&(P=N,M&&(M.words[C]=1));for(var H=C-1;H>=0;H--){var W=(P.words[O.length+H]|0)*67108864+(P.words[O.length+H-1]|0);for(W=Math.min(W/R|0,67108863),P._ishlnsubmul(O,W,H);P.negative!==0;)W--,P.negative=0,P._ishlnsubmul(O,1,H),P.isZero()||(P.negative^=1);M&&(M.words[H]=W)}return M&&M._strip(),P._strip(),A!=="div"&&F!==0&&P.iushrn(F),{div:M||null,mod:P}},s.prototype.divmod=function(w,A,F){if(n(!w.isZero()),this.isZero())return{div:new s(0),mod:new s(0)};var P,O,R;return this.negative!==0&&w.negative===0?(R=this.neg().divmod(w,A),A!=="mod"&&(P=R.div.neg()),A!=="div"&&(O=R.mod.neg(),F&&O.negative!==0&&O.iadd(w)),{div:P,mod:O}):this.negative===0&&w.negative!==0?(R=this.divmod(w.neg(),A),A!=="mod"&&(P=R.div.neg()),{div:P,mod:R.mod}):(this.negative&w.negative)!==0?(R=this.neg().divmod(w.neg(),A),A!=="div"&&(O=R.mod.neg(),F&&O.negative!==0&&O.isub(w)),{div:R.div,mod:O}):w.length>this.length||this.cmp(w)<0?{div:new s(0),mod:this}:w.length===1?A==="div"?{div:this.divn(w.words[0]),mod:null}:A==="mod"?{div:null,mod:new s(this.modrn(w.words[0]))}:{div:this.divn(w.words[0]),mod:new s(this.modrn(w.words[0]))}:this._wordDiv(w,A)},s.prototype.div=function(w){return this.divmod(w,"div",!1).div},s.prototype.mod=function(w){return this.divmod(w,"mod",!1).mod},s.prototype.umod=function(w){return this.divmod(w,"mod",!0).mod},s.prototype.divRound=function(w){var A=this.divmod(w);if(A.mod.isZero())return A.div;var F=A.div.negative!==0?A.mod.isub(w):A.mod,P=w.ushrn(1),O=w.andln(1),R=F.cmp(P);return R<0||O===1&&R===0?A.div:A.div.negative!==0?A.div.isubn(1):A.div.iaddn(1)},s.prototype.modrn=function(w){var A=w<0;A&&(w=-w),n(w<=67108863);for(var F=(1<<26)%w,P=0,O=this.length-1;O>=0;O--)P=(F*P+(this.words[O]|0))%w;return A?-P:P},s.prototype.modn=function(w){return this.modrn(w)},s.prototype.idivn=function(w){var A=w<0;A&&(w=-w),n(w<=67108863);for(var F=0,P=this.length-1;P>=0;P--){var O=(this.words[P]|0)+F*67108864;this.words[P]=O/w|0,F=O%w}return this._strip(),A?this.ineg():this},s.prototype.divn=function(w){return this.clone().idivn(w)},s.prototype.egcd=function(w){n(w.negative===0),n(!w.isZero());var A=this,F=w.clone();A.negative!==0?A=A.umod(w):A=A.clone();for(var P=new s(1),O=new s(0),R=new s(0),I=new s(1),C=0;A.isEven()&&F.isEven();)A.iushrn(1),F.iushrn(1),++C;for(var M=F.clone(),L=A.clone();!A.isZero();){for(var N=0,H=1;(A.words[0]&H)===0&&N<26;++N,H<<=1);if(N>0)for(A.iushrn(N);N-- >0;)(P.isOdd()||O.isOdd())&&(P.iadd(M),O.isub(L)),P.iushrn(1),O.iushrn(1);for(var W=0,q=1;(F.words[0]&q)===0&&W<26;++W,q<<=1);if(W>0)for(F.iushrn(W);W-- >0;)(R.isOdd()||I.isOdd())&&(R.iadd(M),I.isub(L)),R.iushrn(1),I.iushrn(1);A.cmp(F)>=0?(A.isub(F),P.isub(R),O.isub(I)):(F.isub(A),R.isub(P),I.isub(O))}return{a:R,b:I,gcd:F.iushln(C)}},s.prototype._invmp=function(w){n(w.negative===0),n(!w.isZero());var A=this,F=w.clone();A.negative!==0?A=A.umod(w):A=A.clone();for(var P=new s(1),O=new s(0),R=F.clone();A.cmpn(1)>0&&F.cmpn(1)>0;){for(var I=0,C=1;(A.words[0]&C)===0&&I<26;++I,C<<=1);if(I>0)for(A.iushrn(I);I-- >0;)P.isOdd()&&P.iadd(R),P.iushrn(1);for(var M=0,L=1;(F.words[0]&L)===0&&M<26;++M,L<<=1);if(M>0)for(F.iushrn(M);M-- >0;)O.isOdd()&&O.iadd(R),O.iushrn(1);A.cmp(F)>=0?(A.isub(F),P.isub(O)):(F.isub(A),O.isub(P))}var N;return A.cmpn(1)===0?N=P:N=O,N.cmpn(0)<0&&N.iadd(w),N},s.prototype.gcd=function(w){if(this.isZero())return w.abs();if(w.isZero())return this.abs();var A=this.clone(),F=w.clone();A.negative=0,F.negative=0;for(var P=0;A.isEven()&&F.isEven();P++)A.iushrn(1),F.iushrn(1);do{for(;A.isEven();)A.iushrn(1);for(;F.isEven();)F.iushrn(1);var O=A.cmp(F);if(O<0){var R=A;A=F,F=R}else if(O===0||F.cmpn(1)===0)break;A.isub(F)}while(!0);return F.iushln(P)},s.prototype.invm=function(w){return this.egcd(w).a.umod(w)},s.prototype.isEven=function(){return(this.words[0]&1)===0},s.prototype.isOdd=function(){return(this.words[0]&1)===1},s.prototype.andln=function(w){return this.words[0]&w},s.prototype.bincn=function(w){n(typeof w=="number");var A=w%26,F=(w-A)/26,P=1<<A;if(this.length<=F)return this._expand(F+1),this.words[F]|=P,this;for(var O=P,R=F;O!==0&&R<this.length;R++){var I=this.words[R]|0;I+=O,O=I>>>26,I&=67108863,this.words[R]=I}return O!==0&&(this.words[R]=O,this.length++),this},s.prototype.isZero=function(){return this.length===1&&this.words[0]===0},s.prototype.cmpn=function(w){var A=w<0;if(this.negative!==0&&!A)return-1;if(this.negative===0&&A)return 1;this._strip();var F;if(this.length>1)F=1;else{A&&(w=-w),n(w<=67108863,"Number is too big");var P=this.words[0]|0;F=P===w?0:P<w?-1:1}return this.negative!==0?-F|0:F},s.prototype.cmp=function(w){if(this.negative!==0&&w.negative===0)return-1;if(this.negative===0&&w.negative!==0)return 1;var A=this.ucmp(w);return this.negative!==0?-A|0:A},s.prototype.ucmp=function(w){if(this.length>w.length)return 1;if(this.length<w.length)return-1;for(var A=0,F=this.length-1;F>=0;F--){var P=this.words[F]|0,O=w.words[F]|0;if(P!==O){P<O?A=-1:P>O&&(A=1);break}}return A},s.prototype.gtn=function(w){return this.cmpn(w)===1},s.prototype.gt=function(w){return this.cmp(w)===1},s.prototype.gten=function(w){return this.cmpn(w)>=0},s.prototype.gte=function(w){return this.cmp(w)>=0},s.prototype.ltn=function(w){return this.cmpn(w)===-1},s.prototype.lt=function(w){return this.cmp(w)===-1},s.prototype.lten=function(w){return this.cmpn(w)<=0},s.prototype.lte=function(w){return this.cmp(w)<=0},s.prototype.eqn=function(w){return this.cmpn(w)===0},s.prototype.eq=function(w){return this.cmp(w)===0},s.red=function(w){return new U(w)},s.prototype.toRed=function(w){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),w.convertTo(this)._forceRed(w)},s.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(w){return this.red=w,this},s.prototype.forceRed=function(w){return n(!this.red,"Already a number in reduction context"),this._forceRed(w)},s.prototype.redAdd=function(w){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,w)},s.prototype.redIAdd=function(w){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,w)},s.prototype.redSub=function(w){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,w)},s.prototype.redISub=function(w){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,w)},s.prototype.redShl=function(w){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,w)},s.prototype.redMul=function(w){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,w),this.red.mul(this,w)},s.prototype.redIMul=function(w){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,w),this.red.imul(this,w)},s.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(w){return n(this.red&&!w.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,w)};var x={k256:null,p224:null,p192:null,p25519:null};function E(T,w){this.name=T,this.p=new s(w,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}E.prototype._tmp=function(){var w=new s(null);return w.words=new Array(Math.ceil(this.n/13)),w},E.prototype.ireduce=function(w){var A=w,F;do this.split(A,this.tmp),A=this.imulK(A),A=A.iadd(this.tmp),F=A.bitLength();while(F>this.n);var P=F<this.n?-1:A.ucmp(this.p);return P===0?(A.words[0]=0,A.length=1):P>0?A.isub(this.p):A.strip!==void 0?A.strip():A._strip(),A},E.prototype.split=function(w,A){w.iushrn(this.n,0,A)},E.prototype.imulK=function(w){return w.imul(this.k)};function k(){E.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}i(k,E),k.prototype.split=function(w,A){for(var F=4194303,P=Math.min(w.length,9),O=0;O<P;O++)A.words[O]=w.words[O];if(A.length=P,w.length<=9){w.words[0]=0,w.length=1;return}var R=w.words[9];for(A.words[A.length++]=R&F,O=10;O<w.length;O++){var I=w.words[O]|0;w.words[O-10]=(I&F)<<4|R>>>22,R=I}R>>>=22,w.words[O-10]=R,R===0&&w.length>10?w.length-=10:w.length-=9},k.prototype.imulK=function(w){w.words[w.length]=0,w.words[w.length+1]=0,w.length+=2;for(var A=0,F=0;F<w.length;F++){var P=w.words[F]|0;A+=P*977,w.words[F]=A&67108863,A=P*64+(A/67108864|0)}return w.words[w.length-1]===0&&(w.length--,w.words[w.length-1]===0&&w.length--),w};function B(){E.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}i(B,E);function D(){E.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}i(D,E);function z(){E.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}i(z,E),z.prototype.imulK=function(w){for(var A=0,F=0;F<w.length;F++){var P=(w.words[F]|0)*19+A,O=P&67108863;P>>>=26,w.words[F]=O,A=P}return A!==0&&(w.words[w.length++]=A),w},s._prime=function(w){if(x[w])return x[w];var A;if(w==="k256")A=new k;else if(w==="p224")A=new B;else if(w==="p192")A=new D;else if(w==="p25519")A=new z;else throw new Error("Unknown prime "+w);return x[w]=A,A};function U(T){if(typeof T=="string"){var w=s._prime(T);this.m=w.p,this.prime=w}else n(T.gtn(1),"modulus must be greater than 1"),this.m=T,this.prime=null}U.prototype._verify1=function(w){n(w.negative===0,"red works only with positives"),n(w.red,"red works only with red numbers")},U.prototype._verify2=function(w,A){n((w.negative|A.negative)===0,"red works only with positives"),n(w.red&&w.red===A.red,"red works only with red numbers")},U.prototype.imod=function(w){return this.prime?this.prime.ireduce(w)._forceRed(this):(l(w,w.umod(this.m)._forceRed(this)),w)},U.prototype.neg=function(w){return w.isZero()?w.clone():this.m.sub(w)._forceRed(this)},U.prototype.add=function(w,A){this._verify2(w,A);var F=w.add(A);return F.cmp(this.m)>=0&&F.isub(this.m),F._forceRed(this)},U.prototype.iadd=function(w,A){this._verify2(w,A);var F=w.iadd(A);return F.cmp(this.m)>=0&&F.isub(this.m),F},U.prototype.sub=function(w,A){this._verify2(w,A);var F=w.sub(A);return F.cmpn(0)<0&&F.iadd(this.m),F._forceRed(this)},U.prototype.isub=function(w,A){this._verify2(w,A);var F=w.isub(A);return F.cmpn(0)<0&&F.iadd(this.m),F},U.prototype.shl=function(w,A){return this._verify1(w),this.imod(w.ushln(A))},U.prototype.imul=function(w,A){return this._verify2(w,A),this.imod(w.imul(A))},U.prototype.mul=function(w,A){return this._verify2(w,A),this.imod(w.mul(A))},U.prototype.isqr=function(w){return this.imul(w,w.clone())},U.prototype.sqr=function(w){return this.mul(w,w)},U.prototype.sqrt=function(w){if(w.isZero())return w.clone();var A=this.m.andln(3);if(n(A%2===1),A===3){var F=this.m.add(new s(1)).iushrn(2);return this.pow(w,F)}for(var P=this.m.subn(1),O=0;!P.isZero()&&P.andln(1)===0;)O++,P.iushrn(1);n(!P.isZero());var R=new s(1).toRed(this),I=R.redNeg(),C=this.m.subn(1).iushrn(1),M=this.m.bitLength();for(M=new s(2*M*M).toRed(this);this.pow(M,C).cmp(I)!==0;)M.redIAdd(I);for(var L=this.pow(M,P),N=this.pow(w,P.addn(1).iushrn(1)),H=this.pow(w,P),W=O;H.cmp(R)!==0;){for(var q=H,G=0;q.cmp(R)!==0;G++)q=q.redSqr();n(G<W);var Y=this.pow(L,new s(1).iushln(W-G-1));N=N.redMul(Y),L=Y.redSqr(),H=H.redMul(L),W=G}return N},U.prototype.invm=function(w){var A=w._invmp(this.m);return A.negative!==0?(A.negative=0,this.imod(A).redNeg()):this.imod(A)},U.prototype.pow=function(w,A){if(A.isZero())return new s(1).toRed(this);if(A.cmpn(1)===0)return w.clone();var F=4,P=new Array(1<<F);P[0]=new s(1).toRed(this),P[1]=w;for(var O=2;O<P.length;O++)P[O]=this.mul(P[O-1],w);var R=P[0],I=0,C=0,M=A.bitLength()%26;for(M===0&&(M=26),O=A.length-1;O>=0;O--){for(var L=A.words[O],N=M-1;N>=0;N--){var H=L>>N&1;if(R!==P[0]&&(R=this.sqr(R)),H===0&&I===0){C=0;continue}I<<=1,I|=H,C++,!(C!==F&&(O!==0||N!==0))&&(R=this.mul(R,P[I]),C=0,I=0)}M=26}return R},U.prototype.convertTo=function(w){var A=w.umod(this.m);return A===w?A.clone():A},U.prototype.convertFrom=function(w){var A=w.clone();return A.red=null,A},s.mont=function(w){return new S(w)};function S(T){U.call(this,T),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}i(S,U),S.prototype.convertTo=function(w){return this.imod(w.ushln(this.shift))},S.prototype.convertFrom=function(w){var A=this.imod(w.mul(this.rinv));return A.red=null,A},S.prototype.imul=function(w,A){if(w.isZero()||A.isZero())return w.words[0]=0,w.length=1,w;var F=w.imul(A),P=F.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),O=F.isub(P).iushrn(this.shift),R=O;return O.cmp(this.m)>=0?R=O.isub(this.m):O.cmpn(0)<0&&(R=O.iadd(this.m)),R._forceRed(this)},S.prototype.mul=function(w,A){if(w.isZero()||A.isZero())return new s(0)._forceRed(this);var F=w.mul(A),P=F.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),O=F.isub(P).iushrn(this.shift),R=O;return O.cmp(this.m)>=0?R=O.isub(this.m):O.cmpn(0)<0&&(R=O.iadd(this.m)),R._forceRed(this)},S.prototype.invm=function(w){var A=this.imod(w._invmp(this.m).mul(this.r2));return A._forceRed(this)}})(t,Lat)}(T3)),T3.exports}var Tk,SK;function nM(){if(SK)return Tk;SK=1;var t=rM(),e=hm(),r=gr().Buffer;function n(a){var o=a.modulus.byteLength(),c;do c=new t(e(o));while(c.cmp(a.modulus)>=0||!c.umod(a.prime1)||!c.umod(a.prime2));return c}function i(a){var o=n(a),c=o.toRed(t.mont(a.modulus)).redPow(new t(a.publicExponent)).fromRed();return{blinder:c,unblinder:o.invm(a.modulus)}}function s(a,o){var c=i(o),u=o.modulus.byteLength(),l=new t(a).mul(c.blinder).umod(o.modulus),f=l.toRed(t.mont(o.prime1)),d=l.toRed(t.mont(o.prime2)),h=o.coefficient,m=o.prime1,p=o.prime2,g=f.redPow(o.exponent1).fromRed(),v=d.redPow(o.exponent2).fromRed(),y=g.isub(v).imul(h).umod(m).imul(p);return v.iadd(y).imul(c.unblinder).umod(o.modulus).toArrayLike(r,"be",u)}return s.getr=n,Tk=s,Tk}var Ak={};const $at="6.6.1",Uat={version:$at};var Ck={},Ik={},EK;function Pfe(){return EK||(EK=1,function(t){var e=t;function r(s,a){if(Array.isArray(s))return s.slice();if(!s)return[];var o=[];if(typeof s!="string"){for(var c=0;c<s.length;c++)o[c]=s[c]|0;return o}if(a==="hex"){s=s.replace(/[^a-z0-9]+/ig,""),s.length%2!==0&&(s="0"+s);for(var c=0;c<s.length;c+=2)o.push(parseInt(s[c]+s[c+1],16))}else for(var c=0;c<s.length;c++){var u=s.charCodeAt(c),l=u>>8,f=u&255;l?o.push(l,f):o.push(f)}return o}e.toArray=r;function n(s){return s.length===1?"0"+s:s}e.zero2=n;function i(s){for(var a="",o=0;o<s.length;o++)a+=n(s[o].toString(16));return a}e.toHex=i,e.encode=function(a,o){return o==="hex"?i(a):a}}(Ik)),Ik}var kK;function Lo(){return kK||(kK=1,function(t){var e=t,r=vs(),n=Fo(),i=Pfe();e.assert=n,e.toArray=i.toArray,e.zero2=i.zero2,e.toHex=i.toHex,e.encode=i.encode;function s(l,f,d){var h=new Array(Math.max(l.bitLength(),d)+1),m;for(m=0;m<h.length;m+=1)h[m]=0;var p=1<<f+1,g=l.clone();for(m=0;m<h.length;m++){var v,y=g.andln(p-1);g.isOdd()?(y>(p>>1)-1?v=(p>>1)-y:v=y,g.isubn(v)):v=0,h[m]=v,g.iushrn(1)}return h}e.getNAF=s;function a(l,f){var d=[[],[]];l=l.clone(),f=f.clone();for(var h=0,m=0,p;l.cmpn(-h)>0||f.cmpn(-m)>0;){var g=l.andln(3)+h&3,v=f.andln(3)+m&3;g===3&&(g=-1),v===3&&(v=-1);var y;(g&1)===0?y=0:(p=l.andln(7)+h&7,(p===3||p===5)&&v===2?y=-g:y=g),d[0].push(y);var b;(v&1)===0?b=0:(p=f.andln(7)+m&7,(p===3||p===5)&&g===2?b=-v:b=v),d[1].push(b),2*h===y+1&&(h=1-h),2*m===b+1&&(m=1-m),l.iushrn(1),f.iushrn(1)}return d}e.getJSF=a;function o(l,f,d){var h="_"+f;l.prototype[f]=function(){return this[h]!==void 0?this[h]:this[h]=d.call(this)}}e.cachedProperty=o;function c(l){return typeof l=="string"?e.toArray(l,"hex"):l}e.parseBytes=c;function u(l){return new r(l,"hex","le")}e.intFromLE=u}(Ck)),Ck}var Pk={},Rk,TK;function Z5(){if(TK)return Rk;TK=1;var t=vs(),e=Lo(),r=e.getNAF,n=e.getJSF,i=e.assert;function s(o,c){this.type=o,this.p=new t(c.p,16),this.red=c.prime?t.red(c.prime):t.mont(this.p),this.zero=new t(0).toRed(this.red),this.one=new t(1).toRed(this.red),this.two=new t(2).toRed(this.red),this.n=c.n&&new t(c.n,16),this.g=c.g&&this.pointFromJSON(c.g,c.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var u=this.n&&this.p.div(this.n);!u||u.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}Rk=s,s.prototype.point=function(){throw new Error("Not implemented")},s.prototype.validate=function(){throw new Error("Not implemented")},s.prototype._fixedNafMul=function(c,u){i(c.precomputed);var l=c._getDoubles(),f=r(u,1,this._bitLength),d=(1<<l.step+1)-(l.step%2===0?2:1);d/=3;var h=[],m,p;for(m=0;m<f.length;m+=l.step){p=0;for(var g=m+l.step-1;g>=m;g--)p=(p<<1)+f[g];h.push(p)}for(var v=this.jpoint(null,null,null),y=this.jpoint(null,null,null),b=d;b>0;b--){for(m=0;m<h.length;m++)p=h[m],p===b?y=y.mixedAdd(l.points[m]):p===-b&&(y=y.mixedAdd(l.points[m].neg()));v=v.add(y)}return v.toP()},s.prototype._wnafMul=function(c,u){var l=4,f=c._getNAFPoints(l);l=f.wnd;for(var d=f.points,h=r(u,l,this._bitLength),m=this.jpoint(null,null,null),p=h.length-1;p>=0;p--){for(var g=0;p>=0&&h[p]===0;p--)g++;if(p>=0&&g++,m=m.dblp(g),p<0)break;var v=h[p];i(v!==0),c.type==="affine"?v>0?m=m.mixedAdd(d[v-1>>1]):m=m.mixedAdd(d[-v-1>>1].neg()):v>0?m=m.add(d[v-1>>1]):m=m.add(d[-v-1>>1].neg())}return c.type==="affine"?m.toP():m},s.prototype._wnafMulAdd=function(c,u,l,f,d){var h=this._wnafT1,m=this._wnafT2,p=this._wnafT3,g=0,v,y,b;for(v=0;v<f;v++){b=u[v];var _=b._getNAFPoints(c);h[v]=_.wnd,m[v]=_.points}for(v=f-1;v>=1;v-=2){var x=v-1,E=v;if(h[x]!==1||h[E]!==1){p[x]=r(l[x],h[x],this._bitLength),p[E]=r(l[E],h[E],this._bitLength),g=Math.max(p[x].length,g),g=Math.max(p[E].length,g);continue}var k=[u[x],null,null,u[E]];u[x].y.cmp(u[E].y)===0?(k[1]=u[x].add(u[E]),k[2]=u[x].toJ().mixedAdd(u[E].neg())):u[x].y.cmp(u[E].y.redNeg())===0?(k[1]=u[x].toJ().mixedAdd(u[E]),k[2]=u[x].add(u[E].neg())):(k[1]=u[x].toJ().mixedAdd(u[E]),k[2]=u[x].toJ().mixedAdd(u[E].neg()));var B=[-3,-1,-5,-7,0,7,5,1,3],D=n(l[x],l[E]);for(g=Math.max(D[0].length,g),p[x]=new Array(g),p[E]=new Array(g),y=0;y<g;y++){var z=D[0][y]|0,U=D[1][y]|0;p[x][y]=B[(z+1)*3+(U+1)],p[E][y]=0,m[x]=k}}var S=this.jpoint(null,null,null),T=this._wnafT4;for(v=g;v>=0;v--){for(var w=0;v>=0;){var A=!0;for(y=0;y<f;y++)T[y]=p[y][v]|0,T[y]!==0&&(A=!1);if(!A)break;w++,v--}if(v>=0&&w++,S=S.dblp(w),v<0)break;for(y=0;y<f;y++){var F=T[y];F!==0&&(F>0?b=m[y][F-1>>1]:F<0&&(b=m[y][-F-1>>1].neg()),b.type==="affine"?S=S.mixedAdd(b):S=S.add(b))}}for(v=0;v<f;v++)m[v]=null;return d?S:S.toP()};function a(o,c){this.curve=o,this.type=c,this.precomputed=null}return s.BasePoint=a,a.prototype.eq=function(){throw new Error("Not implemented")},a.prototype.validate=function(){return this.curve.validate(this)},s.prototype.decodePoint=function(c,u){c=e.toArray(c,u);var l=this.p.byteLength();if((c[0]===4||c[0]===6||c[0]===7)&&c.length-1===2*l){c[0]===6?i(c[c.length-1]%2===0):c[0]===7&&i(c[c.length-1]%2===1);var f=this.point(c.slice(1,1+l),c.slice(1+l,1+2*l));return f}else if((c[0]===2||c[0]===3)&&c.length-1===l)return this.pointFromX(c.slice(1,1+l),c[0]===3);throw new Error("Unknown point format")},a.prototype.encodeCompressed=function(c){return this.encode(c,!0)},a.prototype._encode=function(c){var u=this.curve.p.byteLength(),l=this.getX().toArray("be",u);return c?[this.getY().isEven()?2:3].concat(l):[4].concat(l,this.getY().toArray("be",u))},a.prototype.encode=function(c,u){return e.encode(this._encode(u),c)},a.prototype.precompute=function(c){if(this.precomputed)return this;var u={doubles:null,naf:null,beta:null};return u.naf=this._getNAFPoints(8),u.doubles=this._getDoubles(4,c),u.beta=this._getBeta(),this.precomputed=u,this},a.prototype._hasDoubles=function(c){if(!this.precomputed)return!1;var u=this.precomputed.doubles;return u?u.points.length>=Math.ceil((c.bitLength()+1)/u.step):!1},a.prototype._getDoubles=function(c,u){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var l=[this],f=this,d=0;d<u;d+=c){for(var h=0;h<c;h++)f=f.dbl();l.push(f)}return{step:c,points:l}},a.prototype._getNAFPoints=function(c){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var u=[this],l=(1<<c)-1,f=l===1?null:this.dbl(),d=1;d<l;d++)u[d]=u[d-1].add(f);return{wnd:c,points:u}},a.prototype._getBeta=function(){return null},a.prototype.dblp=function(c){for(var u=this,l=0;l<c;l++)u=u.dbl();return u},Rk}var Ok,AK;function jat(){if(AK)return Ok;AK=1;var t=Lo(),e=vs(),r=lr(),n=Z5(),i=t.assert;function s(c){n.call(this,"short",c),this.a=new e(c.a,16).toRed(this.red),this.b=new e(c.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(c),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}r(s,n),Ok=s,s.prototype._getEndomorphism=function(u){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var l,f;if(u.beta)l=new e(u.beta,16).toRed(this.red);else{var d=this._getEndoRoots(this.p);l=d[0].cmp(d[1])<0?d[0]:d[1],l=l.toRed(this.red)}if(u.lambda)f=new e(u.lambda,16);else{var h=this._getEndoRoots(this.n);this.g.mul(h[0]).x.cmp(this.g.x.redMul(l))===0?f=h[0]:(f=h[1],i(this.g.mul(f).x.cmp(this.g.x.redMul(l))===0))}var m;return u.basis?m=u.basis.map(function(p){return{a:new e(p.a,16),b:new e(p.b,16)}}):m=this._getEndoBasis(f),{beta:l,lambda:f,basis:m}}},s.prototype._getEndoRoots=function(u){var l=u===this.p?this.red:e.mont(u),f=new e(2).toRed(l).redInvm(),d=f.redNeg(),h=new e(3).toRed(l).redNeg().redSqrt().redMul(f),m=d.redAdd(h).fromRed(),p=d.redSub(h).fromRed();return[m,p]},s.prototype._getEndoBasis=function(u){for(var l=this.n.ushrn(Math.floor(this.n.bitLength()/2)),f=u,d=this.n.clone(),h=new e(1),m=new e(0),p=new e(0),g=new e(1),v,y,b,_,x,E,k,B=0,D,z;f.cmpn(0)!==0;){var U=d.div(f);D=d.sub(U.mul(f)),z=p.sub(U.mul(h));var S=g.sub(U.mul(m));if(!b&&D.cmp(l)<0)v=k.neg(),y=h,b=D.neg(),_=z;else if(b&&++B===2)break;k=D,d=f,f=D,p=h,h=z,g=m,m=S}x=D.neg(),E=z;var T=b.sqr().add(_.sqr()),w=x.sqr().add(E.sqr());return w.cmp(T)>=0&&(x=v,E=y),b.negative&&(b=b.neg(),_=_.neg()),x.negative&&(x=x.neg(),E=E.neg()),[{a:b,b:_},{a:x,b:E}]},s.prototype._endoSplit=function(u){var l=this.endo.basis,f=l[0],d=l[1],h=d.b.mul(u).divRound(this.n),m=f.b.neg().mul(u).divRound(this.n),p=h.mul(f.a),g=m.mul(d.a),v=h.mul(f.b),y=m.mul(d.b),b=u.sub(p).sub(g),_=v.add(y).neg();return{k1:b,k2:_}},s.prototype.pointFromX=function(u,l){u=new e(u,16),u.red||(u=u.toRed(this.red));var f=u.redSqr().redMul(u).redIAdd(u.redMul(this.a)).redIAdd(this.b),d=f.redSqrt();if(d.redSqr().redSub(f).cmp(this.zero)!==0)throw new Error("invalid point");var h=d.fromRed().isOdd();return(l&&!h||!l&&h)&&(d=d.redNeg()),this.point(u,d)},s.prototype.validate=function(u){if(u.inf)return!0;var l=u.x,f=u.y,d=this.a.redMul(l),h=l.redSqr().redMul(l).redIAdd(d).redIAdd(this.b);return f.redSqr().redISub(h).cmpn(0)===0},s.prototype._endoWnafMulAdd=function(u,l,f){for(var d=this._endoWnafT1,h=this._endoWnafT2,m=0;m<u.length;m++){var p=this._endoSplit(l[m]),g=u[m],v=g._getBeta();p.k1.negative&&(p.k1.ineg(),g=g.neg(!0)),p.k2.negative&&(p.k2.ineg(),v=v.neg(!0)),d[m*2]=g,d[m*2+1]=v,h[m*2]=p.k1,h[m*2+1]=p.k2}for(var y=this._wnafMulAdd(1,d,h,m*2,f),b=0;b<m*2;b++)d[b]=null,h[b]=null;return y};function a(c,u,l,f){n.BasePoint.call(this,c,"affine"),u===null&&l===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new e(u,16),this.y=new e(l,16),f&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}r(a,n.BasePoint),s.prototype.point=function(u,l,f){return new a(this,u,l,f)},s.prototype.pointFromJSON=function(u,l){return a.fromJSON(this,u,l)},a.prototype._getBeta=function(){if(this.curve.endo){var u=this.precomputed;if(u&&u.beta)return u.beta;var l=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(u){var f=this.curve,d=function(h){return f.point(h.x.redMul(f.endo.beta),h.y)};u.beta=l,l.precomputed={beta:null,naf:u.naf&&{wnd:u.naf.wnd,points:u.naf.points.map(d)},doubles:u.doubles&&{step:u.doubles.step,points:u.doubles.points.map(d)}}}return l}},a.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},a.fromJSON=function(u,l,f){typeof l=="string"&&(l=JSON.parse(l));var d=u.point(l[0],l[1],f);if(!l[2])return d;function h(p){return u.point(p[0],p[1],f)}var m=l[2];return d.precomputed={beta:null,doubles:m.doubles&&{step:m.doubles.step,points:[d].concat(m.doubles.points.map(h))},naf:m.naf&&{wnd:m.naf.wnd,points:[d].concat(m.naf.points.map(h))}},d},a.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},a.prototype.isInfinity=function(){return this.inf},a.prototype.add=function(u){if(this.inf)return u;if(u.inf)return this;if(this.eq(u))return this.dbl();if(this.neg().eq(u))return this.curve.point(null,null);if(this.x.cmp(u.x)===0)return this.curve.point(null,null);var l=this.y.redSub(u.y);l.cmpn(0)!==0&&(l=l.redMul(this.x.redSub(u.x).redInvm()));var f=l.redSqr().redISub(this.x).redISub(u.x),d=l.redMul(this.x.redSub(f)).redISub(this.y);return this.curve.point(f,d)},a.prototype.dbl=function(){if(this.inf)return this;var u=this.y.redAdd(this.y);if(u.cmpn(0)===0)return this.curve.point(null,null);var l=this.curve.a,f=this.x.redSqr(),d=u.redInvm(),h=f.redAdd(f).redIAdd(f).redIAdd(l).redMul(d),m=h.redSqr().redISub(this.x.redAdd(this.x)),p=h.redMul(this.x.redSub(m)).redISub(this.y);return this.curve.point(m,p)},a.prototype.getX=function(){return this.x.fromRed()},a.prototype.getY=function(){return this.y.fromRed()},a.prototype.mul=function(u){return u=new e(u,16),this.isInfinity()?this:this._hasDoubles(u)?this.curve._fixedNafMul(this,u):this.curve.endo?this.curve._endoWnafMulAdd([this],[u]):this.curve._wnafMul(this,u)},a.prototype.mulAdd=function(u,l,f){var d=[this,l],h=[u,f];return this.curve.endo?this.curve._endoWnafMulAdd(d,h):this.curve._wnafMulAdd(1,d,h,2)},a.prototype.jmulAdd=function(u,l,f){var d=[this,l],h=[u,f];return this.curve.endo?this.curve._endoWnafMulAdd(d,h,!0):this.curve._wnafMulAdd(1,d,h,2,!0)},a.prototype.eq=function(u){return this===u||this.inf===u.inf&&(this.inf||this.x.cmp(u.x)===0&&this.y.cmp(u.y)===0)},a.prototype.neg=function(u){if(this.inf)return this;var l=this.curve.point(this.x,this.y.redNeg());if(u&&this.precomputed){var f=this.precomputed,d=function(h){return h.neg()};l.precomputed={naf:f.naf&&{wnd:f.naf.wnd,points:f.naf.points.map(d)},doubles:f.doubles&&{step:f.doubles.step,points:f.doubles.points.map(d)}}}return l},a.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var u=this.curve.jpoint(this.x,this.y,this.curve.one);return u};function o(c,u,l,f){n.BasePoint.call(this,c,"jacobian"),u===null&&l===null&&f===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new e(0)):(this.x=new e(u,16),this.y=new e(l,16),this.z=new e(f,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}return r(o,n.BasePoint),s.prototype.jpoint=function(u,l,f){return new o(this,u,l,f)},o.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var u=this.z.redInvm(),l=u.redSqr(),f=this.x.redMul(l),d=this.y.redMul(l).redMul(u);return this.curve.point(f,d)},o.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},o.prototype.add=function(u){if(this.isInfinity())return u;if(u.isInfinity())return this;var l=u.z.redSqr(),f=this.z.redSqr(),d=this.x.redMul(l),h=u.x.redMul(f),m=this.y.redMul(l.redMul(u.z)),p=u.y.redMul(f.redMul(this.z)),g=d.redSub(h),v=m.redSub(p);if(g.cmpn(0)===0)return v.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var y=g.redSqr(),b=y.redMul(g),_=d.redMul(y),x=v.redSqr().redIAdd(b).redISub(_).redISub(_),E=v.redMul(_.redISub(x)).redISub(m.redMul(b)),k=this.z.redMul(u.z).redMul(g);return this.curve.jpoint(x,E,k)},o.prototype.mixedAdd=function(u){if(this.isInfinity())return u.toJ();if(u.isInfinity())return this;var l=this.z.redSqr(),f=this.x,d=u.x.redMul(l),h=this.y,m=u.y.redMul(l).redMul(this.z),p=f.redSub(d),g=h.redSub(m);if(p.cmpn(0)===0)return g.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var v=p.redSqr(),y=v.redMul(p),b=f.redMul(v),_=g.redSqr().redIAdd(y).redISub(b).redISub(b),x=g.redMul(b.redISub(_)).redISub(h.redMul(y)),E=this.z.redMul(p);return this.curve.jpoint(_,x,E)},o.prototype.dblp=function(u){if(u===0)return this;if(this.isInfinity())return this;if(!u)return this.dbl();var l;if(this.curve.zeroA||this.curve.threeA){var f=this;for(l=0;l<u;l++)f=f.dbl();return f}var d=this.curve.a,h=this.curve.tinv,m=this.x,p=this.y,g=this.z,v=g.redSqr().redSqr(),y=p.redAdd(p);for(l=0;l<u;l++){var b=m.redSqr(),_=y.redSqr(),x=_.redSqr(),E=b.redAdd(b).redIAdd(b).redIAdd(d.redMul(v)),k=m.redMul(_),B=E.redSqr().redISub(k.redAdd(k)),D=k.redISub(B),z=E.redMul(D);z=z.redIAdd(z).redISub(x);var U=y.redMul(g);l+1<u&&(v=v.redMul(x)),m=B,g=U,y=z}return this.curve.jpoint(m,y.redMul(h),g)},o.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},o.prototype._zeroDbl=function(){var u,l,f;if(this.zOne){var d=this.x.redSqr(),h=this.y.redSqr(),m=h.redSqr(),p=this.x.redAdd(h).redSqr().redISub(d).redISub(m);p=p.redIAdd(p);var g=d.redAdd(d).redIAdd(d),v=g.redSqr().redISub(p).redISub(p),y=m.redIAdd(m);y=y.redIAdd(y),y=y.redIAdd(y),u=v,l=g.redMul(p.redISub(v)).redISub(y),f=this.y.redAdd(this.y)}else{var b=this.x.redSqr(),_=this.y.redSqr(),x=_.redSqr(),E=this.x.redAdd(_).redSqr().redISub(b).redISub(x);E=E.redIAdd(E);var k=b.redAdd(b).redIAdd(b),B=k.redSqr(),D=x.redIAdd(x);D=D.redIAdd(D),D=D.redIAdd(D),u=B.redISub(E).redISub(E),l=k.redMul(E.redISub(u)).redISub(D),f=this.y.redMul(this.z),f=f.redIAdd(f)}return this.curve.jpoint(u,l,f)},o.prototype._threeDbl=function(){var u,l,f;if(this.zOne){var d=this.x.redSqr(),h=this.y.redSqr(),m=h.redSqr(),p=this.x.redAdd(h).redSqr().redISub(d).redISub(m);p=p.redIAdd(p);var g=d.redAdd(d).redIAdd(d).redIAdd(this.curve.a),v=g.redSqr().redISub(p).redISub(p);u=v;var y=m.redIAdd(m);y=y.redIAdd(y),y=y.redIAdd(y),l=g.redMul(p.redISub(v)).redISub(y),f=this.y.redAdd(this.y)}else{var b=this.z.redSqr(),_=this.y.redSqr(),x=this.x.redMul(_),E=this.x.redSub(b).redMul(this.x.redAdd(b));E=E.redAdd(E).redIAdd(E);var k=x.redIAdd(x);k=k.redIAdd(k);var B=k.redAdd(k);u=E.redSqr().redISub(B),f=this.y.redAdd(this.z).redSqr().redISub(_).redISub(b);var D=_.redSqr();D=D.redIAdd(D),D=D.redIAdd(D),D=D.redIAdd(D),l=E.redMul(k.redISub(u)).redISub(D)}return this.curve.jpoint(u,l,f)},o.prototype._dbl=function(){var u=this.curve.a,l=this.x,f=this.y,d=this.z,h=d.redSqr().redSqr(),m=l.redSqr(),p=f.redSqr(),g=m.redAdd(m).redIAdd(m).redIAdd(u.redMul(h)),v=l.redAdd(l);v=v.redIAdd(v);var y=v.redMul(p),b=g.redSqr().redISub(y.redAdd(y)),_=y.redISub(b),x=p.redSqr();x=x.redIAdd(x),x=x.redIAdd(x),x=x.redIAdd(x);var E=g.redMul(_).redISub(x),k=f.redAdd(f).redMul(d);return this.curve.jpoint(b,E,k)},o.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var u=this.x.redSqr(),l=this.y.redSqr(),f=this.z.redSqr(),d=l.redSqr(),h=u.redAdd(u).redIAdd(u),m=h.redSqr(),p=this.x.redAdd(l).redSqr().redISub(u).redISub(d);p=p.redIAdd(p),p=p.redAdd(p).redIAdd(p),p=p.redISub(m);var g=p.redSqr(),v=d.redIAdd(d);v=v.redIAdd(v),v=v.redIAdd(v),v=v.redIAdd(v);var y=h.redIAdd(p).redSqr().redISub(m).redISub(g).redISub(v),b=l.redMul(y);b=b.redIAdd(b),b=b.redIAdd(b);var _=this.x.redMul(g).redISub(b);_=_.redIAdd(_),_=_.redIAdd(_);var x=this.y.redMul(y.redMul(v.redISub(y)).redISub(p.redMul(g)));x=x.redIAdd(x),x=x.redIAdd(x),x=x.redIAdd(x);var E=this.z.redAdd(p).redSqr().redISub(f).redISub(g);return this.curve.jpoint(_,x,E)},o.prototype.mul=function(u,l){return u=new e(u,l),this.curve._wnafMul(this,u)},o.prototype.eq=function(u){if(u.type==="affine")return this.eq(u.toJ());if(this===u)return!0;var l=this.z.redSqr(),f=u.z.redSqr();if(this.x.redMul(f).redISub(u.x.redMul(l)).cmpn(0)!==0)return!1;var d=l.redMul(this.z),h=f.redMul(u.z);return this.y.redMul(h).redISub(u.y.redMul(d)).cmpn(0)===0},o.prototype.eqXToP=function(u){var l=this.z.redSqr(),f=u.toRed(this.curve.red).redMul(l);if(this.x.cmp(f)===0)return!0;for(var d=u.clone(),h=this.curve.redN.redMul(l);;){if(d.iadd(this.curve.n),d.cmp(this.curve.p)>=0)return!1;if(f.redIAdd(h),this.x.cmp(f)===0)return!0}},o.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},o.prototype.isInfinity=function(){return this.z.cmpn(0)===0},Ok}var Bk,CK;function Vat(){if(CK)return Bk;CK=1;var t=vs(),e=lr(),r=Z5(),n=Lo();function i(a){r.call(this,"mont",a),this.a=new t(a.a,16).toRed(this.red),this.b=new t(a.b,16).toRed(this.red),this.i4=new t(4).toRed(this.red).redInvm(),this.two=new t(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}e(i,r),Bk=i,i.prototype.validate=function(o){var c=o.normalize().x,u=c.redSqr(),l=u.redMul(c).redAdd(u.redMul(this.a)).redAdd(c),f=l.redSqrt();return f.redSqr().cmp(l)===0};function s(a,o,c){r.BasePoint.call(this,a,"projective"),o===null&&c===null?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new t(o,16),this.z=new t(c,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}return e(s,r.BasePoint),i.prototype.decodePoint=function(o,c){return this.point(n.toArray(o,c),1)},i.prototype.point=function(o,c){return new s(this,o,c)},i.prototype.pointFromJSON=function(o){return s.fromJSON(this,o)},s.prototype.precompute=function(){},s.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())},s.fromJSON=function(o,c){return new s(o,c[0],c[1]||o.one)},s.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},s.prototype.isInfinity=function(){return this.z.cmpn(0)===0},s.prototype.dbl=function(){var o=this.x.redAdd(this.z),c=o.redSqr(),u=this.x.redSub(this.z),l=u.redSqr(),f=c.redSub(l),d=c.redMul(l),h=f.redMul(l.redAdd(this.curve.a24.redMul(f)));return this.curve.point(d,h)},s.prototype.add=function(){throw new Error("Not supported on Montgomery curve")},s.prototype.diffAdd=function(o,c){var u=this.x.redAdd(this.z),l=this.x.redSub(this.z),f=o.x.redAdd(o.z),d=o.x.redSub(o.z),h=d.redMul(u),m=f.redMul(l),p=c.z.redMul(h.redAdd(m).redSqr()),g=c.x.redMul(h.redISub(m).redSqr());return this.curve.point(p,g)},s.prototype.mul=function(o){for(var c=o.clone(),u=this,l=this.curve.point(null,null),f=this,d=[];c.cmpn(0)!==0;c.iushrn(1))d.push(c.andln(1));for(var h=d.length-1;h>=0;h--)d[h]===0?(u=u.diffAdd(l,f),l=l.dbl()):(l=u.diffAdd(l,f),u=u.dbl());return l},s.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")},s.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")},s.prototype.eq=function(o){return this.getX().cmp(o.getX())===0},s.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},s.prototype.getX=function(){return this.normalize(),this.x.fromRed()},Bk}var Dk,IK;function qat(){if(IK)return Dk;IK=1;var t=Lo(),e=vs(),r=lr(),n=Z5(),i=t.assert;function s(o){this.twisted=(o.a|0)!==1,this.mOneA=this.twisted&&(o.a|0)===-1,this.extended=this.mOneA,n.call(this,"edwards",o),this.a=new e(o.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new e(o.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new e(o.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),i(!this.twisted||this.c.fromRed().cmpn(1)===0),this.oneC=(o.c|0)===1}r(s,n),Dk=s,s.prototype._mulA=function(c){return this.mOneA?c.redNeg():this.a.redMul(c)},s.prototype._mulC=function(c){return this.oneC?c:this.c.redMul(c)},s.prototype.jpoint=function(c,u,l,f){return this.point(c,u,l,f)},s.prototype.pointFromX=function(c,u){c=new e(c,16),c.red||(c=c.toRed(this.red));var l=c.redSqr(),f=this.c2.redSub(this.a.redMul(l)),d=this.one.redSub(this.c2.redMul(this.d).redMul(l)),h=f.redMul(d.redInvm()),m=h.redSqrt();if(m.redSqr().redSub(h).cmp(this.zero)!==0)throw new Error("invalid point");var p=m.fromRed().isOdd();return(u&&!p||!u&&p)&&(m=m.redNeg()),this.point(c,m)},s.prototype.pointFromY=function(c,u){c=new e(c,16),c.red||(c=c.toRed(this.red));var l=c.redSqr(),f=l.redSub(this.c2),d=l.redMul(this.d).redMul(this.c2).redSub(this.a),h=f.redMul(d.redInvm());if(h.cmp(this.zero)===0){if(u)throw new Error("invalid point");return this.point(this.zero,c)}var m=h.redSqrt();if(m.redSqr().redSub(h).cmp(this.zero)!==0)throw new Error("invalid point");return m.fromRed().isOdd()!==u&&(m=m.redNeg()),this.point(m,c)},s.prototype.validate=function(c){if(c.isInfinity())return!0;c.normalize();var u=c.x.redSqr(),l=c.y.redSqr(),f=u.redMul(this.a).redAdd(l),d=this.c2.redMul(this.one.redAdd(this.d.redMul(u).redMul(l)));return f.cmp(d)===0};function a(o,c,u,l,f){n.BasePoint.call(this,o,"projective"),c===null&&u===null&&l===null?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new e(c,16),this.y=new e(u,16),this.z=l?new e(l,16):this.curve.one,this.t=f&&new e(f,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}return r(a,n.BasePoint),s.prototype.pointFromJSON=function(c){return a.fromJSON(this,c)},s.prototype.point=function(c,u,l,f){return new a(this,c,u,l,f)},a.fromJSON=function(c,u){return new a(c,u[0],u[1],u[2])},a.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},a.prototype.isInfinity=function(){return this.x.cmpn(0)===0&&(this.y.cmp(this.z)===0||this.zOne&&this.y.cmp(this.curve.c)===0)},a.prototype._extDbl=function(){var c=this.x.redSqr(),u=this.y.redSqr(),l=this.z.redSqr();l=l.redIAdd(l);var f=this.curve._mulA(c),d=this.x.redAdd(this.y).redSqr().redISub(c).redISub(u),h=f.redAdd(u),m=h.redSub(l),p=f.redSub(u),g=d.redMul(m),v=h.redMul(p),y=d.redMul(p),b=m.redMul(h);return this.curve.point(g,v,b,y)},a.prototype._projDbl=function(){var c=this.x.redAdd(this.y).redSqr(),u=this.x.redSqr(),l=this.y.redSqr(),f,d,h,m,p,g;if(this.curve.twisted){m=this.curve._mulA(u);var v=m.redAdd(l);this.zOne?(f=c.redSub(u).redSub(l).redMul(v.redSub(this.curve.two)),d=v.redMul(m.redSub(l)),h=v.redSqr().redSub(v).redSub(v)):(p=this.z.redSqr(),g=v.redSub(p).redISub(p),f=c.redSub(u).redISub(l).redMul(g),d=v.redMul(m.redSub(l)),h=v.redMul(g))}else m=u.redAdd(l),p=this.curve._mulC(this.z).redSqr(),g=m.redSub(p).redSub(p),f=this.curve._mulC(c.redISub(m)).redMul(g),d=this.curve._mulC(m).redMul(u.redISub(l)),h=m.redMul(g);return this.curve.point(f,d,h)},a.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},a.prototype._extAdd=function(c){var u=this.y.redSub(this.x).redMul(c.y.redSub(c.x)),l=this.y.redAdd(this.x).redMul(c.y.redAdd(c.x)),f=this.t.redMul(this.curve.dd).redMul(c.t),d=this.z.redMul(c.z.redAdd(c.z)),h=l.redSub(u),m=d.redSub(f),p=d.redAdd(f),g=l.redAdd(u),v=h.redMul(m),y=p.redMul(g),b=h.redMul(g),_=m.redMul(p);return this.curve.point(v,y,_,b)},a.prototype._projAdd=function(c){var u=this.z.redMul(c.z),l=u.redSqr(),f=this.x.redMul(c.x),d=this.y.redMul(c.y),h=this.curve.d.redMul(f).redMul(d),m=l.redSub(h),p=l.redAdd(h),g=this.x.redAdd(this.y).redMul(c.x.redAdd(c.y)).redISub(f).redISub(d),v=u.redMul(m).redMul(g),y,b;return this.curve.twisted?(y=u.redMul(p).redMul(d.redSub(this.curve._mulA(f))),b=m.redMul(p)):(y=u.redMul(p).redMul(d.redSub(f)),b=this.curve._mulC(m).redMul(p)),this.curve.point(v,y,b)},a.prototype.add=function(c){return this.isInfinity()?c:c.isInfinity()?this:this.curve.extended?this._extAdd(c):this._projAdd(c)},a.prototype.mul=function(c){return this._hasDoubles(c)?this.curve._fixedNafMul(this,c):this.curve._wnafMul(this,c)},a.prototype.mulAdd=function(c,u,l){return this.curve._wnafMulAdd(1,[this,u],[c,l],2,!1)},a.prototype.jmulAdd=function(c,u,l){return this.curve._wnafMulAdd(1,[this,u],[c,l],2,!0)},a.prototype.normalize=function(){if(this.zOne)return this;var c=this.z.redInvm();return this.x=this.x.redMul(c),this.y=this.y.redMul(c),this.t&&(this.t=this.t.redMul(c)),this.z=this.curve.one,this.zOne=!0,this},a.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},a.prototype.getX=function(){return this.normalize(),this.x.fromRed()},a.prototype.getY=function(){return this.normalize(),this.y.fromRed()},a.prototype.eq=function(c){return this===c||this.getX().cmp(c.getX())===0&&this.getY().cmp(c.getY())===0},a.prototype.eqXToP=function(c){var u=c.toRed(this.curve.red).redMul(this.z);if(this.x.cmp(u)===0)return!0;for(var l=c.clone(),f=this.curve.redN.redMul(this.z);;){if(l.iadd(this.curve.n),l.cmp(this.curve.p)>=0)return!1;if(u.redIAdd(f),this.x.cmp(u)===0)return!0}},a.prototype.toP=a.prototype.normalize,a.prototype.mixedAdd=a.prototype.add,Dk}var PK;function Rfe(){return PK||(PK=1,function(t){var e=t;e.base=Z5(),e.short=jat(),e.mont=Vat(),e.edwards=qat()}(Pk)),Pk}var Mk={},Nk={},un={},RK;function Il(){if(RK)return un;RK=1;var t=Fo(),e=lr();un.inherits=e;function r(S,T){return(S.charCodeAt(T)&64512)!==55296||T<0||T+1>=S.length?!1:(S.charCodeAt(T+1)&64512)===56320}function n(S,T){if(Array.isArray(S))return S.slice();if(!S)return[];var w=[];if(typeof S=="string")if(T){if(T==="hex")for(S=S.replace(/[^a-z0-9]+/ig,""),S.length%2!==0&&(S="0"+S),F=0;F<S.length;F+=2)w.push(parseInt(S[F]+S[F+1],16))}else for(var A=0,F=0;F<S.length;F++){var P=S.charCodeAt(F);P<128?w[A++]=P:P<2048?(w[A++]=P>>6|192,w[A++]=P&63|128):r(S,F)?(P=65536+((P&1023)<<10)+(S.charCodeAt(++F)&1023),w[A++]=P>>18|240,w[A++]=P>>12&63|128,w[A++]=P>>6&63|128,w[A++]=P&63|128):(w[A++]=P>>12|224,w[A++]=P>>6&63|128,w[A++]=P&63|128)}else for(F=0;F<S.length;F++)w[F]=S[F]|0;return w}un.toArray=n;function i(S){for(var T="",w=0;w<S.length;w++)T+=o(S[w].toString(16));return T}un.toHex=i;function s(S){var T=S>>>24|S>>>8&65280|S<<8&16711680|(S&255)<<24;return T>>>0}un.htonl=s;function a(S,T){for(var w="",A=0;A<S.length;A++){var F=S[A];T==="little"&&(F=s(F)),w+=c(F.toString(16))}return w}un.toHex32=a;function o(S){return S.length===1?"0"+S:S}un.zero2=o;function c(S){return S.length===7?"0"+S:S.length===6?"00"+S:S.length===5?"000"+S:S.length===4?"0000"+S:S.length===3?"00000"+S:S.length===2?"000000"+S:S.length===1?"0000000"+S:S}un.zero8=c;function u(S,T,w,A){var F=w-T;t(F%4===0);for(var P=new Array(F/4),O=0,R=T;O<P.length;O++,R+=4){var I;A==="big"?I=S[R]<<24|S[R+1]<<16|S[R+2]<<8|S[R+3]:I=S[R+3]<<24|S[R+2]<<16|S[R+1]<<8|S[R],P[O]=I>>>0}return P}un.join32=u;function l(S,T){for(var w=new Array(S.length*4),A=0,F=0;A<S.length;A++,F+=4){var P=S[A];T==="big"?(w[F]=P>>>24,w[F+1]=P>>>16&255,w[F+2]=P>>>8&255,w[F+3]=P&255):(w[F+3]=P>>>24,w[F+2]=P>>>16&255,w[F+1]=P>>>8&255,w[F]=P&255)}return w}un.split32=l;function f(S,T){return S>>>T|S<<32-T}un.rotr32=f;function d(S,T){return S<<T|S>>>32-T}un.rotl32=d;function h(S,T){return S+T>>>0}un.sum32=h;function m(S,T,w){return S+T+w>>>0}un.sum32_3=m;function p(S,T,w,A){return S+T+w+A>>>0}un.sum32_4=p;function g(S,T,w,A,F){return S+T+w+A+F>>>0}un.sum32_5=g;function v(S,T,w,A){var F=S[T],P=S[T+1],O=A+P>>>0,R=(O<A?1:0)+w+F;S[T]=R>>>0,S[T+1]=O}un.sum64=v;function y(S,T,w,A){var F=T+A>>>0,P=(F<T?1:0)+S+w;return P>>>0}un.sum64_hi=y;function b(S,T,w,A){var F=T+A;return F>>>0}un.sum64_lo=b;function _(S,T,w,A,F,P,O,R){var I=0,C=T;C=C+A>>>0,I+=C<T?1:0,C=C+P>>>0,I+=C<P?1:0,C=C+R>>>0,I+=C<R?1:0;var M=S+w+F+O+I;return M>>>0}un.sum64_4_hi=_;function x(S,T,w,A,F,P,O,R){var I=T+A+P+R;return I>>>0}un.sum64_4_lo=x;function E(S,T,w,A,F,P,O,R,I,C){var M=0,L=T;L=L+A>>>0,M+=L<T?1:0,L=L+P>>>0,M+=L<P?1:0,L=L+R>>>0,M+=L<R?1:0,L=L+C>>>0,M+=L<C?1:0;var N=S+w+F+O+I+M;return N>>>0}un.sum64_5_hi=E;function k(S,T,w,A,F,P,O,R,I,C){var M=T+A+P+R+C;return M>>>0}un.sum64_5_lo=k;function B(S,T,w){var A=T<<32-w|S>>>w;return A>>>0}un.rotr64_hi=B;function D(S,T,w){var A=S<<32-w|T>>>w;return A>>>0}un.rotr64_lo=D;function z(S,T,w){return S>>>w}un.shr64_hi=z;function U(S,T,w){var A=S<<32-w|T>>>w;return A>>>0}return un.shr64_lo=U,un}var Fk={},OK;function u2(){if(OK)return Fk;OK=1;var t=Il(),e=Fo();function r(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}return Fk.BlockHash=r,r.prototype.update=function(i,s){if(i=t.toArray(i,s),this.pending?this.pending=this.pending.concat(i):this.pending=i,this.pendingTotal+=i.length,this.pending.length>=this._delta8){i=this.pending;var a=i.length%this._delta8;this.pending=i.slice(i.length-a,i.length),this.pending.length===0&&(this.pending=null),i=t.join32(i,0,i.length-a,this.endian);for(var o=0;o<i.length;o+=this._delta32)this._update(i,o,o+this._delta32)}return this},r.prototype.digest=function(i){return this.update(this._pad()),e(this.pending===null),this._digest(i)},r.prototype._pad=function(){var i=this.pendingTotal,s=this._delta8,a=s-(i+this.padLength)%s,o=new Array(a+this.padLength);o[0]=128;for(var c=1;c<a;c++)o[c]=0;if(i<<=3,this.endian==="big"){for(var u=8;u<this.padLength;u++)o[c++]=0;o[c++]=0,o[c++]=0,o[c++]=0,o[c++]=0,o[c++]=i>>>24&255,o[c++]=i>>>16&255,o[c++]=i>>>8&255,o[c++]=i&255}else for(o[c++]=i&255,o[c++]=i>>>8&255,o[c++]=i>>>16&255,o[c++]=i>>>24&255,o[c++]=0,o[c++]=0,o[c++]=0,o[c++]=0,u=8;u<this.padLength;u++)o[c++]=0;return o},Fk}var Md={},Uc={},BK;function Ofe(){if(BK)return Uc;BK=1;var t=Il(),e=t.rotr32;function r(l,f,d,h){if(l===0)return n(f,d,h);if(l===1||l===3)return s(f,d,h);if(l===2)return i(f,d,h)}Uc.ft_1=r;function n(l,f,d){return l&f^~l&d}Uc.ch32=n;function i(l,f,d){return l&f^l&d^f&d}Uc.maj32=i;function s(l,f,d){return l^f^d}Uc.p32=s;function a(l){return e(l,2)^e(l,13)^e(l,22)}Uc.s0_256=a;function o(l){return e(l,6)^e(l,11)^e(l,25)}Uc.s1_256=o;function c(l){return e(l,7)^e(l,18)^l>>>3}Uc.g0_256=c;function u(l){return e(l,17)^e(l,19)^l>>>10}return Uc.g1_256=u,Uc}var Lk,DK;function zat(){if(DK)return Lk;DK=1;var t=Il(),e=u2(),r=Ofe(),n=t.rotl32,i=t.sum32,s=t.sum32_5,a=r.ft_1,o=e.BlockHash,c=[1518500249,1859775393,2400959708,3395469782];function u(){if(!(this instanceof u))return new u;o.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}return t.inherits(u,o),Lk=u,u.blockSize=512,u.outSize=160,u.hmacStrength=80,u.padLength=64,u.prototype._update=function(f,d){for(var h=this.W,m=0;m<16;m++)h[m]=f[d+m];for(;m<h.length;m++)h[m]=n(h[m-3]^h[m-8]^h[m-14]^h[m-16],1);var p=this.h[0],g=this.h[1],v=this.h[2],y=this.h[3],b=this.h[4];for(m=0;m<h.length;m++){var _=~~(m/20),x=s(n(p,5),a(_,g,v,y),b,h[m],c[_]);b=y,y=v,v=n(g,30),g=p,p=x}this.h[0]=i(this.h[0],p),this.h[1]=i(this.h[1],g),this.h[2]=i(this.h[2],v),this.h[3]=i(this.h[3],y),this.h[4]=i(this.h[4],b)},u.prototype._digest=function(f){return f==="hex"?t.toHex32(this.h,"big"):t.split32(this.h,"big")},Lk}var $k,MK;function Bfe(){if(MK)return $k;MK=1;var t=Il(),e=u2(),r=Ofe(),n=Fo(),i=t.sum32,s=t.sum32_4,a=t.sum32_5,o=r.ch32,c=r.maj32,u=r.s0_256,l=r.s1_256,f=r.g0_256,d=r.g1_256,h=e.BlockHash,m=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function p(){if(!(this instanceof p))return new p;h.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=m,this.W=new Array(64)}return t.inherits(p,h),$k=p,p.blockSize=512,p.outSize=256,p.hmacStrength=192,p.padLength=64,p.prototype._update=function(v,y){for(var b=this.W,_=0;_<16;_++)b[_]=v[y+_];for(;_<b.length;_++)b[_]=s(d(b[_-2]),b[_-7],f(b[_-15]),b[_-16]);var x=this.h[0],E=this.h[1],k=this.h[2],B=this.h[3],D=this.h[4],z=this.h[5],U=this.h[6],S=this.h[7];for(n(this.k.length===b.length),_=0;_<b.length;_++){var T=a(S,l(D),o(D,z,U),this.k[_],b[_]),w=i(u(x),c(x,E,k));S=U,U=z,z=D,D=i(B,T),B=k,k=E,E=x,x=i(T,w)}this.h[0]=i(this.h[0],x),this.h[1]=i(this.h[1],E),this.h[2]=i(this.h[2],k),this.h[3]=i(this.h[3],B),this.h[4]=i(this.h[4],D),this.h[5]=i(this.h[5],z),this.h[6]=i(this.h[6],U),this.h[7]=i(this.h[7],S)},p.prototype._digest=function(v){return v==="hex"?t.toHex32(this.h,"big"):t.split32(this.h,"big")},$k}var Uk,NK;function Hat(){if(NK)return Uk;NK=1;var t=Il(),e=Bfe();function r(){if(!(this instanceof r))return new r;e.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}return t.inherits(r,e),Uk=r,r.blockSize=512,r.outSize=224,r.hmacStrength=192,r.padLength=64,r.prototype._digest=function(i){return i==="hex"?t.toHex32(this.h.slice(0,7),"big"):t.split32(this.h.slice(0,7),"big")},Uk}var jk,FK;function Dfe(){if(FK)return jk;FK=1;var t=Il(),e=u2(),r=Fo(),n=t.rotr64_hi,i=t.rotr64_lo,s=t.shr64_hi,a=t.shr64_lo,o=t.sum64,c=t.sum64_hi,u=t.sum64_lo,l=t.sum64_4_hi,f=t.sum64_4_lo,d=t.sum64_5_hi,h=t.sum64_5_lo,m=e.BlockHash,p=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function g(){if(!(this instanceof g))return new g;m.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=p,this.W=new Array(160)}t.inherits(g,m),jk=g,g.blockSize=1024,g.outSize=512,g.hmacStrength=192,g.padLength=128,g.prototype._prepareBlock=function(w,A){for(var F=this.W,P=0;P<32;P++)F[P]=w[A+P];for(;P<F.length;P+=2){var O=U(F[P-4],F[P-3]),R=S(F[P-4],F[P-3]),I=F[P-14],C=F[P-13],M=D(F[P-30],F[P-29]),L=z(F[P-30],F[P-29]),N=F[P-32],H=F[P-31];F[P]=l(O,R,I,C,M,L,N,H),F[P+1]=f(O,R,I,C,M,L,N,H)}},g.prototype._update=function(w,A){this._prepareBlock(w,A);var F=this.W,P=this.h[0],O=this.h[1],R=this.h[2],I=this.h[3],C=this.h[4],M=this.h[5],L=this.h[6],N=this.h[7],H=this.h[8],W=this.h[9],q=this.h[10],G=this.h[11],Y=this.h[12],te=this.h[13],Q=this.h[14],j=this.h[15];r(this.k.length===F.length);for(var Z=0;Z<F.length;Z+=2){var V=Q,ne=j,se=k(H,W),J=B(H,W),ee=v(H,W,q,G,Y),ie=y(H,W,q,G,Y,te),le=this.k[Z],ue=this.k[Z+1],me=F[Z],be=F[Z+1],_e=d(V,ne,se,J,ee,ie,le,ue,me,be),xe=h(V,ne,se,J,ee,ie,le,ue,me,be);V=x(P,O),ne=E(P,O),se=b(P,O,R,I,C),J=_(P,O,R,I,C,M);var Be=c(V,ne,se,J),re=u(V,ne,se,J);Q=Y,j=te,Y=q,te=G,q=H,G=W,H=c(L,N,_e,xe),W=u(N,N,_e,xe),L=C,N=M,C=R,M=I,R=P,I=O,P=c(_e,xe,Be,re),O=u(_e,xe,Be,re)}o(this.h,0,P,O),o(this.h,2,R,I),o(this.h,4,C,M),o(this.h,6,L,N),o(this.h,8,H,W),o(this.h,10,q,G),o(this.h,12,Y,te),o(this.h,14,Q,j)},g.prototype._digest=function(w){return w==="hex"?t.toHex32(this.h,"big"):t.split32(this.h,"big")};function v(T,w,A,F,P){var O=T&A^~T&P;return O<0&&(O+=4294967296),O}function y(T,w,A,F,P,O){var R=w&F^~w&O;return R<0&&(R+=4294967296),R}function b(T,w,A,F,P){var O=T&A^T&P^A&P;return O<0&&(O+=4294967296),O}function _(T,w,A,F,P,O){var R=w&F^w&O^F&O;return R<0&&(R+=4294967296),R}function x(T,w){var A=n(T,w,28),F=n(w,T,2),P=n(w,T,7),O=A^F^P;return O<0&&(O+=4294967296),O}function E(T,w){var A=i(T,w,28),F=i(w,T,2),P=i(w,T,7),O=A^F^P;return O<0&&(O+=4294967296),O}function k(T,w){var A=n(T,w,14),F=n(T,w,18),P=n(w,T,9),O=A^F^P;return O<0&&(O+=4294967296),O}function B(T,w){var A=i(T,w,14),F=i(T,w,18),P=i(w,T,9),O=A^F^P;return O<0&&(O+=4294967296),O}function D(T,w){var A=n(T,w,1),F=n(T,w,8),P=s(T,w,7),O=A^F^P;return O<0&&(O+=4294967296),O}function z(T,w){var A=i(T,w,1),F=i(T,w,8),P=a(T,w,7),O=A^F^P;return O<0&&(O+=4294967296),O}function U(T,w){var A=n(T,w,19),F=n(w,T,29),P=s(T,w,6),O=A^F^P;return O<0&&(O+=4294967296),O}function S(T,w){var A=i(T,w,19),F=i(w,T,29),P=a(T,w,6),O=A^F^P;return O<0&&(O+=4294967296),O}return jk}var Vk,LK;function Wat(){if(LK)return Vk;LK=1;var t=Il(),e=Dfe();function r(){if(!(this instanceof r))return new r;e.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}return t.inherits(r,e),Vk=r,r.blockSize=1024,r.outSize=384,r.hmacStrength=192,r.padLength=128,r.prototype._digest=function(i){return i==="hex"?t.toHex32(this.h.slice(0,12),"big"):t.split32(this.h.slice(0,12),"big")},Vk}var $K;function Gat(){return $K||($K=1,Md.sha1=zat(),Md.sha224=Hat(),Md.sha256=Bfe(),Md.sha384=Wat(),Md.sha512=Dfe()),Md}var qk={},UK;function Kat(){if(UK)return qk;UK=1;var t=Il(),e=u2(),r=t.rotl32,n=t.sum32,i=t.sum32_3,s=t.sum32_4,a=e.BlockHash;function o(){if(!(this instanceof o))return new o;a.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}t.inherits(o,a),qk.ripemd160=o,o.blockSize=512,o.outSize=160,o.hmacStrength=192,o.padLength=64,o.prototype._update=function(g,v){for(var y=this.h[0],b=this.h[1],_=this.h[2],x=this.h[3],E=this.h[4],k=y,B=b,D=_,z=x,U=E,S=0;S<80;S++){var T=n(r(s(y,c(S,b,_,x),g[f[S]+v],u(S)),h[S]),E);y=E,E=x,x=r(_,10),_=b,b=T,T=n(r(s(k,c(79-S,B,D,z),g[d[S]+v],l(S)),m[S]),U),k=U,U=z,z=r(D,10),D=B,B=T}T=i(this.h[1],_,z),this.h[1]=i(this.h[2],x,U),this.h[2]=i(this.h[3],E,k),this.h[3]=i(this.h[4],y,B),this.h[4]=i(this.h[0],b,D),this.h[0]=T},o.prototype._digest=function(g){return g==="hex"?t.toHex32(this.h,"little"):t.split32(this.h,"little")};function c(p,g,v,y){return p<=15?g^v^y:p<=31?g&v|~g&y:p<=47?(g|~v)^y:p<=63?g&y|v&~y:g^(v|~y)}function u(p){return p<=15?0:p<=31?1518500249:p<=47?1859775393:p<=63?2400959708:2840853838}function l(p){return p<=15?1352829926:p<=31?1548603684:p<=47?1836072691:p<=63?2053994217:0}var f=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],d=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],h=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],m=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11];return qk}var zk,jK;function Xat(){if(jK)return zk;jK=1;var t=Il(),e=Fo();function r(n,i,s){if(!(this instanceof r))return new r(n,i,s);this.Hash=n,this.blockSize=n.blockSize/8,this.outSize=n.outSize/8,this.inner=null,this.outer=null,this._init(t.toArray(i,s))}return zk=r,r.prototype._init=function(i){i.length>this.blockSize&&(i=new this.Hash().update(i).digest()),e(i.length<=this.blockSize);for(var s=i.length;s<this.blockSize;s++)i.push(0);for(s=0;s<i.length;s++)i[s]^=54;for(this.inner=new this.Hash().update(i),s=0;s<i.length;s++)i[s]^=106;this.outer=new this.Hash().update(i)},r.prototype.update=function(i,s){return this.inner.update(i,s),this},r.prototype.digest=function(i){return this.outer.update(this.inner.digest()),this.outer.digest(i)},zk}var VK;function iM(){return VK||(VK=1,function(t){var e=t;e.utils=Il(),e.common=u2(),e.sha=Gat(),e.ripemd=Kat(),e.hmac=Xat(),e.sha1=e.sha.sha1,e.sha256=e.sha.sha256,e.sha224=e.sha.sha224,e.sha384=e.sha.sha384,e.sha512=e.sha.sha512,e.ripemd160=e.ripemd.ripemd160}(Nk)),Nk}var Hk,qK;function Yat(){return qK||(qK=1,Hk={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}),Hk}var zK;function sM(){return zK||(zK=1,function(t){var e=t,r=iM(),n=Rfe(),i=Lo(),s=i.assert;function a(u){u.type==="short"?this.curve=new n.short(u):u.type==="edwards"?this.curve=new n.edwards(u):this.curve=new n.mont(u),this.g=this.curve.g,this.n=this.curve.n,this.hash=u.hash,s(this.g.validate(),"Invalid curve"),s(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}e.PresetCurve=a;function o(u,l){Object.defineProperty(e,u,{configurable:!0,enumerable:!0,get:function(){var f=new a(l);return Object.defineProperty(e,u,{configurable:!0,enumerable:!0,value:f}),f}})}o("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:r.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),o("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:r.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),o("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:r.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),o("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:r.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),o("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:r.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),o("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:r.sha256,gRed:!1,g:["9"]}),o("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:r.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var c;try{c=Yat()}catch{c=void 0}o("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:r.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",c]})}(Mk)),Mk}var Wk,HK;function Zat(){if(HK)return Wk;HK=1;var t=iM(),e=Pfe(),r=Fo();function n(i){if(!(this instanceof n))return new n(i);this.hash=i.hash,this.predResist=!!i.predResist,this.outLen=this.hash.outSize,this.minEntropy=i.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var s=e.toArray(i.entropy,i.entropyEnc||"hex"),a=e.toArray(i.nonce,i.nonceEnc||"hex"),o=e.toArray(i.pers,i.persEnc||"hex");r(s.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(s,a,o)}return Wk=n,n.prototype._init=function(s,a,o){var c=s.concat(a).concat(o);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var u=0;u<this.V.length;u++)this.K[u]=0,this.V[u]=1;this._update(c),this._reseed=1,this.reseedInterval=281474976710656},n.prototype._hmac=function(){return new t.hmac(this.hash,this.K)},n.prototype._update=function(s){var a=this._hmac().update(this.V).update([0]);s&&(a=a.update(s)),this.K=a.digest(),this.V=this._hmac().update(this.V).digest(),s&&(this.K=this._hmac().update(this.V).update([1]).update(s).digest(),this.V=this._hmac().update(this.V).digest())},n.prototype.reseed=function(s,a,o,c){typeof a!="string"&&(c=o,o=a,a=null),s=e.toArray(s,a),o=e.toArray(o,c),r(s.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(s.concat(o||[])),this._reseed=1},n.prototype.generate=function(s,a,o,c){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof a!="string"&&(c=o,o=a,a=null),o&&(o=e.toArray(o,c||"hex"),this._update(o));for(var u=[];u.length<s;)this.V=this._hmac().update(this.V).digest(),u=u.concat(this.V);var l=u.slice(0,s);return this._update(o),this._reseed++,e.encode(l,a)},Wk}var Gk,WK;function Jat(){if(WK)return Gk;WK=1;var t=vs(),e=Lo(),r=e.assert;function n(i,s){this.ec=i,this.priv=null,this.pub=null,s.priv&&this._importPrivate(s.priv,s.privEnc),s.pub&&this._importPublic(s.pub,s.pubEnc)}return Gk=n,n.fromPublic=function(s,a,o){return a instanceof n?a:new n(s,{pub:a,pubEnc:o})},n.fromPrivate=function(s,a,o){return a instanceof n?a:new n(s,{priv:a,privEnc:o})},n.prototype.validate=function(){var s=this.getPublic();return s.isInfinity()?{result:!1,reason:"Invalid public key"}:s.validate()?s.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},n.prototype.getPublic=function(s,a){return typeof s=="string"&&(a=s,s=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),a?this.pub.encode(a,s):this.pub},n.prototype.getPrivate=function(s){return s==="hex"?this.priv.toString(16,2):this.priv},n.prototype._importPrivate=function(s,a){this.priv=new t(s,a||16),this.priv=this.priv.umod(this.ec.curve.n)},n.prototype._importPublic=function(s,a){if(s.x||s.y){this.ec.curve.type==="mont"?r(s.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&r(s.x&&s.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(s.x,s.y);return}this.pub=this.ec.curve.decodePoint(s,a)},n.prototype.derive=function(s){return s.validate()||r(s.validate(),"public point not validated"),s.mul(this.priv).getX()},n.prototype.sign=function(s,a,o){return this.ec.sign(s,this,a,o)},n.prototype.verify=function(s,a,o){return this.ec.verify(s,a,this,void 0,o)},n.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"},Gk}var Kk,GK;function Qat(){if(GK)return Kk;GK=1;var t=vs(),e=Lo(),r=e.assert;function n(c,u){if(c instanceof n)return c;this._importDER(c,u)||(r(c.r&&c.s,"Signature without r or s"),this.r=new t(c.r,16),this.s=new t(c.s,16),c.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=c.recoveryParam)}Kk=n;function i(){this.place=0}function s(c,u){var l=c[u.place++];if(!(l&128))return l;var f=l&15;if(f===0||f>4||c[u.place]===0)return!1;for(var d=0,h=0,m=u.place;h<f;h++,m++)d<<=8,d|=c[m],d>>>=0;return d<=127?!1:(u.place=m,d)}function a(c){for(var u=0,l=c.length-1;!c[u]&&!(c[u+1]&128)&&u<l;)u++;return u===0?c:c.slice(u)}n.prototype._importDER=function(u,l){u=e.toArray(u,l);var f=new i;if(u[f.place++]!==48)return!1;var d=s(u,f);if(d===!1||d+f.place!==u.length||u[f.place++]!==2)return!1;var h=s(u,f);if(h===!1||(u[f.place]&128)!==0)return!1;var m=u.slice(f.place,h+f.place);if(f.place+=h,u[f.place++]!==2)return!1;var p=s(u,f);if(p===!1||u.length!==p+f.place||(u[f.place]&128)!==0)return!1;var g=u.slice(f.place,p+f.place);if(m[0]===0)if(m[1]&128)m=m.slice(1);else return!1;if(g[0]===0)if(g[1]&128)g=g.slice(1);else return!1;return this.r=new t(m),this.s=new t(g),this.recoveryParam=null,!0};function o(c,u){if(u<128){c.push(u);return}var l=1+(Math.log(u)/Math.LN2>>>3);for(c.push(l|128);--l;)c.push(u>>>(l<<3)&255);c.push(u)}return n.prototype.toDER=function(u){var l=this.r.toArray(),f=this.s.toArray();for(l[0]&128&&(l=[0].concat(l)),f[0]&128&&(f=[0].concat(f)),l=a(l),f=a(f);!f[0]&&!(f[1]&128);)f=f.slice(1);var d=[2];o(d,l.length),d=d.concat(l),d.push(2),o(d,f.length);var h=d.concat(f),m=[48];return o(m,h.length),m=m.concat(h),e.encode(m,u)},Kk}var Xk,KK;function eot(){if(KK)return Xk;KK=1;var t=vs(),e=Zat(),r=Lo(),n=sM(),i=tM(),s=r.assert,a=Jat(),o=Qat();function c(u){if(!(this instanceof c))return new c(u);typeof u=="string"&&(s(Object.prototype.hasOwnProperty.call(n,u),"Unknown curve "+u),u=n[u]),u instanceof n.PresetCurve&&(u={curve:u}),this.curve=u.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=u.curve.g,this.g.precompute(u.curve.n.bitLength()+1),this.hash=u.hash||u.curve.hash}return Xk=c,c.prototype.keyPair=function(l){return new a(this,l)},c.prototype.keyFromPrivate=function(l,f){return a.fromPrivate(this,l,f)},c.prototype.keyFromPublic=function(l,f){return a.fromPublic(this,l,f)},c.prototype.genKeyPair=function(l){l||(l={});for(var f=new e({hash:this.hash,pers:l.pers,persEnc:l.persEnc||"utf8",entropy:l.entropy||i(this.hash.hmacStrength),entropyEnc:l.entropy&&l.entropyEnc||"utf8",nonce:this.n.toArray()}),d=this.n.byteLength(),h=this.n.sub(new t(2));;){var m=new t(f.generate(d));if(!(m.cmp(h)>0))return m.iaddn(1),this.keyFromPrivate(m)}},c.prototype._truncateToN=function(l,f,d){var h;if(t.isBN(l)||typeof l=="number")l=new t(l,16),h=l.byteLength();else if(typeof l=="object")h=l.length,l=new t(l,16);else{var m=l.toString();h=m.length+1>>>1,l=new t(m,16)}typeof d!="number"&&(d=h*8);var p=d-this.n.bitLength();return p>0&&(l=l.ushrn(p)),!f&&l.cmp(this.n)>=0?l.sub(this.n):l},c.prototype.sign=function(l,f,d,h){if(typeof d=="object"&&(h=d,d=null),h||(h={}),typeof l!="string"&&typeof l!="number"&&!t.isBN(l)){s(typeof l=="object"&&l&&typeof l.length=="number","Expected message to be an array-like, a hex string, or a BN instance"),s(l.length>>>0===l.length);for(var m=0;m<l.length;m++)s((l[m]&255)===l[m])}f=this.keyFromPrivate(f,d),l=this._truncateToN(l,!1,h.msgBitLength),s(!l.isNeg(),"Can not sign a negative message");var p=this.n.byteLength(),g=f.getPrivate().toArray("be",p),v=l.toArray("be",p);s(new t(v).eq(l),"Can not sign message");for(var y=new e({hash:this.hash,entropy:g,nonce:v,pers:h.pers,persEnc:h.persEnc||"utf8"}),b=this.n.sub(new t(1)),_=0;;_++){var x=h.k?h.k(_):new t(y.generate(this.n.byteLength()));if(x=this._truncateToN(x,!0),!(x.cmpn(1)<=0||x.cmp(b)>=0)){var E=this.g.mul(x);if(!E.isInfinity()){var k=E.getX(),B=k.umod(this.n);if(B.cmpn(0)!==0){var D=x.invm(this.n).mul(B.mul(f.getPrivate()).iadd(l));if(D=D.umod(this.n),D.cmpn(0)!==0){var z=(E.getY().isOdd()?1:0)|(k.cmp(B)!==0?2:0);return h.canonical&&D.cmp(this.nh)>0&&(D=this.n.sub(D),z^=1),new o({r:B,s:D,recoveryParam:z})}}}}}},c.prototype.verify=function(l,f,d,h,m){m||(m={}),l=this._truncateToN(l,!1,m.msgBitLength),d=this.keyFromPublic(d,h),f=new o(f,"hex");var p=f.r,g=f.s;if(p.cmpn(1)<0||p.cmp(this.n)>=0||g.cmpn(1)<0||g.cmp(this.n)>=0)return!1;var v=g.invm(this.n),y=v.mul(l).umod(this.n),b=v.mul(p).umod(this.n),_;return this.curve._maxwellTrick?(_=this.g.jmulAdd(y,d.getPublic(),b),_.isInfinity()?!1:_.eqXToP(p)):(_=this.g.mulAdd(y,d.getPublic(),b),_.isInfinity()?!1:_.getX().umod(this.n).cmp(p)===0)},c.prototype.recoverPubKey=function(u,l,f,d){s((3&f)===f,"The recovery param is more than two bits"),l=new o(l,d);var h=this.n,m=new t(u),p=l.r,g=l.s,v=f&1,y=f>>1;if(p.cmp(this.curve.p.umod(this.curve.n))>=0&&y)throw new Error("Unable to find sencond key candinate");y?p=this.curve.pointFromX(p.add(this.curve.n),v):p=this.curve.pointFromX(p,v);var b=l.r.invm(h),_=h.sub(m).mul(b).umod(h),x=g.mul(b).umod(h);return this.g.mulAdd(_,p,x)},c.prototype.getKeyRecoveryParam=function(u,l,f,d){if(l=new o(l,d),l.recoveryParam!==null)return l.recoveryParam;for(var h=0;h<4;h++){var m;try{m=this.recoverPubKey(u,l,h)}catch{continue}if(m.eq(f))return h}throw new Error("Unable to find valid recovery factor")},Xk}var Yk,XK;function tot(){if(XK)return Yk;XK=1;var t=Lo(),e=t.assert,r=t.parseBytes,n=t.cachedProperty;function i(s,a){this.eddsa=s,this._secret=r(a.secret),s.isPoint(a.pub)?this._pub=a.pub:this._pubBytes=r(a.pub)}return i.fromPublic=function(a,o){return o instanceof i?o:new i(a,{pub:o})},i.fromSecret=function(a,o){return o instanceof i?o:new i(a,{secret:o})},i.prototype.secret=function(){return this._secret},n(i,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())}),n(i,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())}),n(i,"privBytes",function(){var a=this.eddsa,o=this.hash(),c=a.encodingLength-1,u=o.slice(0,a.encodingLength);return u[0]&=248,u[c]&=127,u[c]|=64,u}),n(i,"priv",function(){return this.eddsa.decodeInt(this.privBytes())}),n(i,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()}),n(i,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)}),i.prototype.sign=function(a){return e(this._secret,"KeyPair can only verify"),this.eddsa.sign(a,this)},i.prototype.verify=function(a,o){return this.eddsa.verify(a,o,this)},i.prototype.getSecret=function(a){return e(this._secret,"KeyPair is public only"),t.encode(this.secret(),a)},i.prototype.getPublic=function(a){return t.encode(this.pubBytes(),a)},Yk=i,Yk}var Zk,YK;function rot(){if(YK)return Zk;YK=1;var t=vs(),e=Lo(),r=e.assert,n=e.cachedProperty,i=e.parseBytes;function s(a,o){this.eddsa=a,typeof o!="object"&&(o=i(o)),Array.isArray(o)&&(r(o.length===a.encodingLength*2,"Signature has invalid size"),o={R:o.slice(0,a.encodingLength),S:o.slice(a.encodingLength)}),r(o.R&&o.S,"Signature without R or S"),a.isPoint(o.R)&&(this._R=o.R),o.S instanceof t&&(this._S=o.S),this._Rencoded=Array.isArray(o.R)?o.R:o.Rencoded,this._Sencoded=Array.isArray(o.S)?o.S:o.Sencoded}return n(s,"S",function(){return this.eddsa.decodeInt(this.Sencoded())}),n(s,"R",function(){return this.eddsa.decodePoint(this.Rencoded())}),n(s,"Rencoded",function(){return this.eddsa.encodePoint(this.R())}),n(s,"Sencoded",function(){return this.eddsa.encodeInt(this.S())}),s.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())},s.prototype.toHex=function(){return e.encode(this.toBytes(),"hex").toUpperCase()},Zk=s,Zk}var Jk,ZK;function not(){if(ZK)return Jk;ZK=1;var t=iM(),e=sM(),r=Lo(),n=r.assert,i=r.parseBytes,s=tot(),a=rot();function o(c){if(n(c==="ed25519","only tested with ed25519 so far"),!(this instanceof o))return new o(c);c=e[c].curve,this.curve=c,this.g=c.g,this.g.precompute(c.n.bitLength()+1),this.pointClass=c.point().constructor,this.encodingLength=Math.ceil(c.n.bitLength()/8),this.hash=t.sha512}return Jk=o,o.prototype.sign=function(u,l){u=i(u);var f=this.keyFromSecret(l),d=this.hashInt(f.messagePrefix(),u),h=this.g.mul(d),m=this.encodePoint(h),p=this.hashInt(m,f.pubBytes(),u).mul(f.priv()),g=d.add(p).umod(this.curve.n);return this.makeSignature({R:h,S:g,Rencoded:m})},o.prototype.verify=function(u,l,f){if(u=i(u),l=this.makeSignature(l),l.S().gte(l.eddsa.curve.n)||l.S().isNeg())return!1;var d=this.keyFromPublic(f),h=this.hashInt(l.Rencoded(),d.pubBytes(),u),m=this.g.mul(l.S()),p=l.R().add(d.pub().mul(h));return p.eq(m)},o.prototype.hashInt=function(){for(var u=this.hash(),l=0;l<arguments.length;l++)u.update(arguments[l]);return r.intFromLE(u.digest()).umod(this.curve.n)},o.prototype.keyFromPublic=function(u){return s.fromPublic(this,u)},o.prototype.keyFromSecret=function(u){return s.fromSecret(this,u)},o.prototype.makeSignature=function(u){return u instanceof a?u:new a(this,u)},o.prototype.encodePoint=function(u){var l=u.getY().toArray("le",this.encodingLength);return l[this.encodingLength-1]|=u.getX().isOdd()?128:0,l},o.prototype.decodePoint=function(u){u=r.parseBytes(u);var l=u.length-1,f=u.slice(0,l).concat(u[l]&-129),d=(u[l]&128)!==0,h=r.intFromLE(f);return this.curve.pointFromY(h,d)},o.prototype.encodeInt=function(u){return u.toArray("le",this.encodingLength)},o.prototype.decodeInt=function(u){return r.intFromLE(u)},o.prototype.isPoint=function(u){return u instanceof this.pointClass},Jk}var JK;function aM(){return JK||(JK=1,function(t){var e=t;e.version=Uat.version,e.utils=Lo(),e.rand=tM(),e.curve=Rfe(),e.curves=sM(),e.ec=eot(),e.eddsa=not()}(Ak)),Ak}var uo={},Qk={},eT={},QK;function iot(){return QK||(QK=1,function(t){var e=f2(),r=lr(),n=t;n.define=function(a,o){return new i(a,o)};function i(s,a){this.name=s,this.body=a,this.decoders={},this.encoders={}}i.prototype._createNamed=function(a){var o;try{o=jp.runInThisContext("(function "+this.name+`(entity) {
  this._initNamed(entity);
})`)}catch{o=function(u){this._initNamed(u)}}return r(o,a),o.prototype._initNamed=function(u){a.call(this,u)},new o(this)},i.prototype._getDecoder=function(a){return a=a||"der",this.decoders.hasOwnProperty(a)||(this.decoders[a]=this._createNamed(e.decoders[a])),this.decoders[a]},i.prototype.decode=function(a,o,c){return this._getDecoder(o).decode(a,c)},i.prototype._getEncoder=function(a){return a=a||"der",this.encoders.hasOwnProperty(a)||(this.encoders[a]=this._createNamed(e.encoders[a])),this.encoders[a]},i.prototype.encode=function(a,o,c){return this._getEncoder(o).encode(a,c)}}(eT)),eT}var tT={},rT={},eX;function sot(){if(eX)return rT;eX=1;var t=lr();function e(n){this._reporterState={obj:null,path:[],options:n||{},errors:[]}}rT.Reporter=e,e.prototype.isError=function(i){return i instanceof r},e.prototype.save=function(){var i=this._reporterState;return{obj:i.obj,pathLen:i.path.length}},e.prototype.restore=function(i){var s=this._reporterState;s.obj=i.obj,s.path=s.path.slice(0,i.pathLen)},e.prototype.enterKey=function(i){return this._reporterState.path.push(i)},e.prototype.exitKey=function(i){var s=this._reporterState;s.path=s.path.slice(0,i-1)},e.prototype.leaveKey=function(i,s,a){var o=this._reporterState;this.exitKey(i),o.obj!==null&&(o.obj[s]=a)},e.prototype.path=function(){return this._reporterState.path.join("/")},e.prototype.enterObject=function(){var i=this._reporterState,s=i.obj;return i.obj={},s},e.prototype.leaveObject=function(i){var s=this._reporterState,a=s.obj;return s.obj=i,a},e.prototype.error=function(i){var s,a=this._reporterState,o=i instanceof r;if(o?s=i:s=new r(a.path.map(function(c){return"["+JSON.stringify(c)+"]"}).join(""),i.message||i,i.stack),!a.options.partial)throw s;return o||a.errors.push(s),s},e.prototype.wrapResult=function(i){var s=this._reporterState;return s.options.partial?{result:this.isError(i)?null:i,errors:s.errors}:i};function r(n,i){this.path=n,this.rethrow(i)}return t(r,Error),r.prototype.rethrow=function(i){if(this.message=i+" at: "+(this.path||"(shallow)"),Error.captureStackTrace&&Error.captureStackTrace(this,r),!this.stack)try{throw new Error(this.message)}catch(s){this.stack=s.stack}return this},rT}var Aw={},tX;function rX(){if(tX)return Aw;tX=1;var t=lr(),e=Vg().Reporter,r=_c().Buffer;function n(s,a){if(e.call(this,a),!r.isBuffer(s)){this.error("Input not Buffer");return}this.base=s,this.offset=0,this.length=s.length}t(n,e),Aw.DecoderBuffer=n,n.prototype.save=function(){return{offset:this.offset,reporter:e.prototype.save.call(this)}},n.prototype.restore=function(a){var o=new n(this.base);return o.offset=a.offset,o.length=this.offset,this.offset=a.offset,e.prototype.restore.call(this,a.reporter),o},n.prototype.isEmpty=function(){return this.offset===this.length},n.prototype.readUInt8=function(a){return this.offset+1<=this.length?this.base.readUInt8(this.offset++,!0):this.error(a||"DecoderBuffer overrun")},n.prototype.skip=function(a,o){if(!(this.offset+a<=this.length))return this.error(o||"DecoderBuffer overrun");var c=new n(this.base);return c._reporterState=this._reporterState,c.offset=this.offset,c.length=this.offset+a,this.offset+=a,c},n.prototype.raw=function(a){return this.base.slice(a?a.offset:this.offset,this.length)};function i(s,a){if(Array.isArray(s))this.length=0,this.value=s.map(function(o){return o instanceof i||(o=new i(o,a)),this.length+=o.length,o},this);else if(typeof s=="number"){if(!(0<=s&&s<=255))return a.error("non-byte EncoderBuffer value");this.value=s,this.length=1}else if(typeof s=="string")this.value=s,this.length=r.byteLength(s);else if(r.isBuffer(s))this.value=s,this.length=s.length;else return a.error("Unsupported type: "+typeof s)}return Aw.EncoderBuffer=i,i.prototype.join=function(a,o){return a||(a=new r(this.length)),o||(o=0),this.length===0||(Array.isArray(this.value)?this.value.forEach(function(c){c.join(a,o),o+=c.length}):(typeof this.value=="number"?a[o]=this.value:typeof this.value=="string"?a.write(this.value,o):r.isBuffer(this.value)&&this.value.copy(a,o),o+=this.length)),a},Aw}var nT,nX;function aot(){if(nX)return nT;nX=1;var t=Vg().Reporter,e=Vg().EncoderBuffer,r=Vg().DecoderBuffer,n=Fo(),i=["seq","seqof","set","setof","objid","bool","gentime","utctime","null_","enum","int","objDesc","bitstr","bmpstr","charstr","genstr","graphstr","ia5str","iso646str","numstr","octstr","printstr","t61str","unistr","utf8str","videostr"],s=["key","obj","use","optional","explicit","implicit","def","choice","any","contains"].concat(i),a=["_peekTag","_decodeTag","_use","_decodeStr","_decodeObjid","_decodeTime","_decodeNull","_decodeInt","_decodeBool","_decodeList","_encodeComposite","_encodeStr","_encodeObjid","_encodeTime","_encodeNull","_encodeInt","_encodeBool"];function o(u,l){var f={};this._baseState=f,f.enc=u,f.parent=l||null,f.children=null,f.tag=null,f.args=null,f.reverseArgs=null,f.choice=null,f.optional=!1,f.any=!1,f.obj=!1,f.use=null,f.useDecoder=null,f.key=null,f.default=null,f.explicit=null,f.implicit=null,f.contains=null,f.parent||(f.children=[],this._wrap())}nT=o;var c=["enc","parent","children","tag","args","reverseArgs","choice","optional","any","obj","use","alteredUse","key","default","explicit","implicit","contains"];return o.prototype.clone=function(){var l=this._baseState,f={};c.forEach(function(h){f[h]=l[h]});var d=new this.constructor(f.parent);return d._baseState=f,d},o.prototype._wrap=function(){var l=this._baseState;s.forEach(function(f){this[f]=function(){var h=new this.constructor(this);return l.children.push(h),h[f].apply(h,arguments)}},this)},o.prototype._init=function(l){var f=this._baseState;n(f.parent===null),l.call(this),f.children=f.children.filter(function(d){return d._baseState.parent===this},this),n.equal(f.children.length,1,"Root node can have only one child")},o.prototype._useArgs=function(l){var f=this._baseState,d=l.filter(function(h){return h instanceof this.constructor},this);l=l.filter(function(h){return!(h instanceof this.constructor)},this),d.length!==0&&(n(f.children===null),f.children=d,d.forEach(function(h){h._baseState.parent=this},this)),l.length!==0&&(n(f.args===null),f.args=l,f.reverseArgs=l.map(function(h){if(typeof h!="object"||h.constructor!==Object)return h;var m={};return Object.keys(h).forEach(function(p){p==(p|0)&&(p|=0);var g=h[p];m[g]=p}),m}))},a.forEach(function(u){o.prototype[u]=function(){var f=this._baseState;throw new Error(u+" not implemented for encoding: "+f.enc)}}),i.forEach(function(u){o.prototype[u]=function(){var f=this._baseState,d=Array.prototype.slice.call(arguments);return n(f.tag===null),f.tag=u,this._useArgs(d),this}}),o.prototype.use=function(l){n(l);var f=this._baseState;return n(f.use===null),f.use=l,this},o.prototype.optional=function(){var l=this._baseState;return l.optional=!0,this},o.prototype.def=function(l){var f=this._baseState;return n(f.default===null),f.default=l,f.optional=!0,this},o.prototype.explicit=function(l){var f=this._baseState;return n(f.explicit===null&&f.implicit===null),f.explicit=l,this},o.prototype.implicit=function(l){var f=this._baseState;return n(f.explicit===null&&f.implicit===null),f.implicit=l,this},o.prototype.obj=function(){var l=this._baseState,f=Array.prototype.slice.call(arguments);return l.obj=!0,f.length!==0&&this._useArgs(f),this},o.prototype.key=function(l){var f=this._baseState;return n(f.key===null),f.key=l,this},o.prototype.any=function(){var l=this._baseState;return l.any=!0,this},o.prototype.choice=function(l){var f=this._baseState;return n(f.choice===null),f.choice=l,this._useArgs(Object.keys(l).map(function(d){return l[d]})),this},o.prototype.contains=function(l){var f=this._baseState;return n(f.use===null),f.contains=l,this},o.prototype._decode=function(l,f){var d=this._baseState;if(d.parent===null)return l.wrapResult(d.children[0]._decode(l,f));var h=d.default,m=!0,p=null;if(d.key!==null&&(p=l.enterKey(d.key)),d.optional){var g=null;if(d.explicit!==null?g=d.explicit:d.implicit!==null?g=d.implicit:d.tag!==null&&(g=d.tag),g===null&&!d.any){var v=l.save();try{d.choice===null?this._decodeGeneric(d.tag,l,f):this._decodeChoice(l,f),m=!0}catch{m=!1}l.restore(v)}else if(m=this._peekTag(l,g,d.any),l.isError(m))return m}var y;if(d.obj&&m&&(y=l.enterObject()),m){if(d.explicit!==null){var b=this._decodeTag(l,d.explicit);if(l.isError(b))return b;l=b}var _=l.offset;if(d.use===null&&d.choice===null){if(d.any)var v=l.save();var x=this._decodeTag(l,d.implicit!==null?d.implicit:d.tag,d.any);if(l.isError(x))return x;d.any?h=l.raw(v):l=x}if(f&&f.track&&d.tag!==null&&f.track(l.path(),_,l.length,"tagged"),f&&f.track&&d.tag!==null&&f.track(l.path(),l.offset,l.length,"content"),d.any?h=h:d.choice===null?h=this._decodeGeneric(d.tag,l,f):h=this._decodeChoice(l,f),l.isError(h))return h;if(!d.any&&d.choice===null&&d.children!==null&&d.children.forEach(function(B){B._decode(l,f)}),d.contains&&(d.tag==="octstr"||d.tag==="bitstr")){var E=new r(h);h=this._getUse(d.contains,l._reporterState.obj)._decode(E,f)}}return d.obj&&m&&(h=l.leaveObject(y)),d.key!==null&&(h!==null||m===!0)?l.leaveKey(p,d.key,h):p!==null&&l.exitKey(p),h},o.prototype._decodeGeneric=function(l,f,d){var h=this._baseState;return l==="seq"||l==="set"?null:l==="seqof"||l==="setof"?this._decodeList(f,l,h.args[0],d):/str$/.test(l)?this._decodeStr(f,l,d):l==="objid"&&h.args?this._decodeObjid(f,h.args[0],h.args[1],d):l==="objid"?this._decodeObjid(f,null,null,d):l==="gentime"||l==="utctime"?this._decodeTime(f,l,d):l==="null_"?this._decodeNull(f,d):l==="bool"?this._decodeBool(f,d):l==="objDesc"?this._decodeStr(f,l,d):l==="int"||l==="enum"?this._decodeInt(f,h.args&&h.args[0],d):h.use!==null?this._getUse(h.use,f._reporterState.obj)._decode(f,d):f.error("unknown tag: "+l)},o.prototype._getUse=function(l,f){var d=this._baseState;return d.useDecoder=this._use(l,f),n(d.useDecoder._baseState.parent===null),d.useDecoder=d.useDecoder._baseState.children[0],d.implicit!==d.useDecoder._baseState.implicit&&(d.useDecoder=d.useDecoder.clone(),d.useDecoder._baseState.implicit=d.implicit),d.useDecoder},o.prototype._decodeChoice=function(l,f){var d=this._baseState,h=null,m=!1;return Object.keys(d.choice).some(function(p){var g=l.save(),v=d.choice[p];try{var y=v._decode(l,f);if(l.isError(y))return!1;h={type:p,value:y},m=!0}catch{return l.restore(g),!1}return!0},this),m?h:l.error("Choice not matched")},o.prototype._createEncoderBuffer=function(l){return new e(l,this.reporter)},o.prototype._encode=function(l,f,d){var h=this._baseState;if(!(h.default!==null&&h.default===l)){var m=this._encodeValue(l,f,d);if(m!==void 0&&!this._skipDefault(m,f,d))return m}},o.prototype._encodeValue=function(l,f,d){var h=this._baseState;if(h.parent===null)return h.children[0]._encode(l,f||new t);var v=null;if(this.reporter=f,h.optional&&l===void 0)if(h.default!==null)l=h.default;else return;var m=null,p=!1;if(h.any)v=this._createEncoderBuffer(l);else if(h.choice)v=this._encodeChoice(l,f);else if(h.contains)m=this._getUse(h.contains,d)._encode(l,f),p=!0;else if(h.children)m=h.children.map(function(_){if(_._baseState.tag==="null_")return _._encode(null,f,l);if(_._baseState.key===null)return f.error("Child should have a key");var x=f.enterKey(_._baseState.key);if(typeof l!="object")return f.error("Child expected, but input is not object");var E=_._encode(l[_._baseState.key],f,l);return f.leaveKey(x),E},this).filter(function(_){return _}),m=this._createEncoderBuffer(m);else if(h.tag==="seqof"||h.tag==="setof"){if(!(h.args&&h.args.length===1))return f.error("Too many args for : "+h.tag);if(!Array.isArray(l))return f.error("seqof/setof, but data is not Array");var g=this.clone();g._baseState.implicit=null,m=this._createEncoderBuffer(l.map(function(_){var x=this._baseState;return this._getUse(x.args[0],l)._encode(_,f)},g))}else h.use!==null?v=this._getUse(h.use,d)._encode(l,f):(m=this._encodePrimitive(h.tag,l),p=!0);var v;if(!h.any&&h.choice===null){var y=h.implicit!==null?h.implicit:h.tag,b=h.implicit===null?"universal":"context";y===null?h.use===null&&f.error("Tag could be omitted only for .use()"):h.use===null&&(v=this._encodeComposite(y,p,b,m))}return h.explicit!==null&&(v=this._encodeComposite(h.explicit,!1,"context",v)),v},o.prototype._encodeChoice=function(l,f){var d=this._baseState,h=d.choice[l.type];return h||n(!1,l.type+" not found in "+JSON.stringify(Object.keys(d.choice))),h._encode(l.value,f)},o.prototype._encodePrimitive=function(l,f){var d=this._baseState;if(/str$/.test(l))return this._encodeStr(f,l);if(l==="objid"&&d.args)return this._encodeObjid(f,d.reverseArgs[0],d.args[1]);if(l==="objid")return this._encodeObjid(f,null,null);if(l==="gentime"||l==="utctime")return this._encodeTime(f,l);if(l==="null_")return this._encodeNull();if(l==="int"||l==="enum")return this._encodeInt(f,d.args&&d.reverseArgs[0]);if(l==="bool")return this._encodeBool(f);if(l==="objDesc")return this._encodeStr(f,l);throw new Error("Unsupported tag: "+l)},o.prototype._isNumstr=function(l){return/^[0-9 ]*$/.test(l)},o.prototype._isPrintstr=function(l){return/^[A-Za-z0-9 '\(\)\+,\-\.\/:=\?]*$/.test(l)},nT}var iX;function Vg(){return iX||(iX=1,function(t){var e=t;e.Reporter=sot().Reporter,e.DecoderBuffer=rX().DecoderBuffer,e.EncoderBuffer=rX().EncoderBuffer,e.Node=aot()}(tT)),tT}var iT={},sT={},sX;function oot(){return sX||(sX=1,function(t){var e=Mfe();t.tagClass={0:"universal",1:"application",2:"context",3:"private"},t.tagClassByName=e._reverse(t.tagClass),t.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"},t.tagByName=e._reverse(t.tag)}(sT)),sT}var aX;function Mfe(){return aX||(aX=1,function(t){var e=t;e._reverse=function(n){var i={};return Object.keys(n).forEach(function(s){(s|0)==s&&(s=s|0);var a=n[s];i[a]=s}),i},e.der=oot()}(iT)),iT}var aT={},oT,oX;function Nfe(){if(oX)return oT;oX=1;var t=lr(),e=f2(),r=e.base,n=e.bignum,i=e.constants.der;function s(u){this.enc="der",this.name=u.name,this.entity=u,this.tree=new a,this.tree._init(u.body)}oT=s,s.prototype.decode=function(l,f){return l instanceof r.DecoderBuffer||(l=new r.DecoderBuffer(l,f)),this.tree._decode(l,f)};function a(u){r.Node.call(this,"der",u)}t(a,r.Node),a.prototype._peekTag=function(l,f,d){if(l.isEmpty())return!1;var h=l.save(),m=o(l,'Failed to peek tag: "'+f+'"');return l.isError(m)?m:(l.restore(h),m.tag===f||m.tagStr===f||m.tagStr+"of"===f||d)},a.prototype._decodeTag=function(l,f,d){var h=o(l,'Failed to decode tag of "'+f+'"');if(l.isError(h))return h;var m=c(l,h.primitive,'Failed to get length of "'+f+'"');if(l.isError(m))return m;if(!d&&h.tag!==f&&h.tagStr!==f&&h.tagStr+"of"!==f)return l.error('Failed to match tag: "'+f+'"');if(h.primitive||m!==null)return l.skip(m,'Failed to match body of: "'+f+'"');var p=l.save(),g=this._skipUntilEnd(l,'Failed to skip indefinite length body: "'+this.tag+'"');return l.isError(g)?g:(m=l.offset-p.offset,l.restore(p),l.skip(m,'Failed to match body of: "'+f+'"'))},a.prototype._skipUntilEnd=function(l,f){for(;;){var d=o(l,f);if(l.isError(d))return d;var h=c(l,d.primitive,f);if(l.isError(h))return h;var m;if(d.primitive||h!==null?m=l.skip(h):m=this._skipUntilEnd(l,f),l.isError(m))return m;if(d.tagStr==="end")break}},a.prototype._decodeList=function(l,f,d,h){for(var m=[];!l.isEmpty();){var p=this._peekTag(l,"end");if(l.isError(p))return p;var g=d.decode(l,"der",h);if(l.isError(g)&&p)break;m.push(g)}return m},a.prototype._decodeStr=function(l,f){if(f==="bitstr"){var d=l.readUInt8();return l.isError(d)?d:{unused:d,data:l.raw()}}else if(f==="bmpstr"){var h=l.raw();if(h.length%2===1)return l.error("Decoding of string type: bmpstr length mismatch");for(var m="",p=0;p<h.length/2;p++)m+=String.fromCharCode(h.readUInt16BE(p*2));return m}else if(f==="numstr"){var g=l.raw().toString("ascii");return this._isNumstr(g)?g:l.error("Decoding of string type: numstr unsupported characters")}else{if(f==="octstr")return l.raw();if(f==="objDesc")return l.raw();if(f==="printstr"){var v=l.raw().toString("ascii");return this._isPrintstr(v)?v:l.error("Decoding of string type: printstr unsupported characters")}else return/str$/.test(f)?l.raw().toString():l.error("Decoding of string type: "+f+" unsupported")}},a.prototype._decodeObjid=function(l,f,d){for(var h,m=[],p=0;!l.isEmpty();){var g=l.readUInt8();p<<=7,p|=g&127,(g&128)===0&&(m.push(p),p=0)}g&128&&m.push(p);var v=m[0]/40|0,y=m[0]%40;if(d?h=m:h=[v,y].concat(m.slice(1)),f){var b=f[h.join(" ")];b===void 0&&(b=f[h.join(".")]),b!==void 0&&(h=b)}return h},a.prototype._decodeTime=function(l,f){var d=l.raw().toString();if(f==="gentime")var h=d.slice(0,4)|0,m=d.slice(4,6)|0,p=d.slice(6,8)|0,g=d.slice(8,10)|0,v=d.slice(10,12)|0,y=d.slice(12,14)|0;else if(f==="utctime"){var h=d.slice(0,2)|0,m=d.slice(2,4)|0,p=d.slice(4,6)|0,g=d.slice(6,8)|0,v=d.slice(8,10)|0,y=d.slice(10,12)|0;h<70?h=2e3+h:h=1900+h}else return l.error("Decoding "+f+" time is not supported yet");return Date.UTC(h,m-1,p,g,v,y,0)},a.prototype._decodeNull=function(l){return null},a.prototype._decodeBool=function(l){var f=l.readUInt8();return l.isError(f)?f:f!==0},a.prototype._decodeInt=function(l,f){var d=l.raw(),h=new n(d);return f&&(h=f[h.toString(10)]||h),h},a.prototype._use=function(l,f){return typeof l=="function"&&(l=l(f)),l._getDecoder("der").tree};function o(u,l){var f=u.readUInt8(l);if(u.isError(f))return f;var d=i.tagClass[f>>6],h=(f&32)===0;if((f&31)===31){var m=f;for(f=0;(m&128)===128;){if(m=u.readUInt8(l),u.isError(m))return m;f<<=7,f|=m&127}}else f&=31;var p=i.tag[f];return{cls:d,primitive:h,tag:f,tagStr:p}}function c(u,l,f){var d=u.readUInt8(f);if(u.isError(d))return d;if(!l&&d===128)return null;if((d&128)===0)return d;var h=d&127;if(h>4)return u.error("length octect is too long");d=0;for(var m=0;m<h;m++){d<<=8;var p=u.readUInt8(f);if(u.isError(p))return p;d|=p}return d}return oT}var cT,cX;function cot(){if(cX)return cT;cX=1;var t=lr(),e=_c().Buffer,r=Nfe();function n(i){r.call(this,i),this.enc="pem"}return t(n,r),cT=n,n.prototype.decode=function(s,a){for(var o=s.toString().split(/[\r\n]+/g),c=a.label.toUpperCase(),u=/^-----(BEGIN|END) ([^-]+)-----$/,l=-1,f=-1,d=0;d<o.length;d++){var h=o[d].match(u);if(h!==null&&h[2]===c)if(l===-1){if(h[1]!=="BEGIN")break;l=d}else{if(h[1]!=="END")break;f=d;break}}if(l===-1||f===-1)throw new Error("PEM section not found for: "+c);var m=o.slice(l+1,f).join("");m.replace(/[^a-z0-9\+\/=]+/gi,"");var p=new e(m,"base64");return r.prototype.decode.call(this,p,a)},cT}var lX;function lot(){return lX||(lX=1,function(t){var e=t;e.der=Nfe(),e.pem=cot()}(aT)),aT}var lT={},uT,uX;function Ffe(){if(uX)return uT;uX=1;var t=lr(),e=_c().Buffer,r=f2(),n=r.base,i=r.constants.der;function s(u){this.enc="der",this.name=u.name,this.entity=u,this.tree=new a,this.tree._init(u.body)}uT=s,s.prototype.encode=function(l,f){return this.tree._encode(l,f).join()};function a(u){n.Node.call(this,"der",u)}t(a,n.Node),a.prototype._encodeComposite=function(l,f,d,h){var m=c(l,f,d,this.reporter);if(h.length<128){var v=new e(2);return v[0]=m,v[1]=h.length,this._createEncoderBuffer([v,h])}for(var p=1,g=h.length;g>=256;g>>=8)p++;var v=new e(2+p);v[0]=m,v[1]=128|p;for(var g=1+p,y=h.length;y>0;g--,y>>=8)v[g]=y&255;return this._createEncoderBuffer([v,h])},a.prototype._encodeStr=function(l,f){if(f==="bitstr")return this._createEncoderBuffer([l.unused|0,l.data]);if(f==="bmpstr"){for(var d=new e(l.length*2),h=0;h<l.length;h++)d.writeUInt16BE(l.charCodeAt(h),h*2);return this._createEncoderBuffer(d)}else return f==="numstr"?this._isNumstr(l)?this._createEncoderBuffer(l):this.reporter.error("Encoding of string type: numstr supports only digits and space"):f==="printstr"?this._isPrintstr(l)?this._createEncoderBuffer(l):this.reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark"):/str$/.test(f)?this._createEncoderBuffer(l):f==="objDesc"?this._createEncoderBuffer(l):this.reporter.error("Encoding of string type: "+f+" unsupported")},a.prototype._encodeObjid=function(l,f,d){if(typeof l=="string"){if(!f)return this.reporter.error("string objid given, but no values map found");if(!f.hasOwnProperty(l))return this.reporter.error("objid not found in values map");l=f[l].split(/[\s\.]+/g);for(var h=0;h<l.length;h++)l[h]|=0}else if(Array.isArray(l)){l=l.slice();for(var h=0;h<l.length;h++)l[h]|=0}if(!Array.isArray(l))return this.reporter.error("objid() should be either array or string, got: "+JSON.stringify(l));if(!d){if(l[1]>=40)return this.reporter.error("Second objid identifier OOB");l.splice(0,2,l[0]*40+l[1])}for(var m=0,h=0;h<l.length;h++){var p=l[h];for(m++;p>=128;p>>=7)m++}for(var g=new e(m),v=g.length-1,h=l.length-1;h>=0;h--){var p=l[h];for(g[v--]=p&127;(p>>=7)>0;)g[v--]=128|p&127}return this._createEncoderBuffer(g)};function o(u){return u<10?"0"+u:u}a.prototype._encodeTime=function(l,f){var d,h=new Date(l);return f==="gentime"?d=[o(h.getFullYear()),o(h.getUTCMonth()+1),o(h.getUTCDate()),o(h.getUTCHours()),o(h.getUTCMinutes()),o(h.getUTCSeconds()),"Z"].join(""):f==="utctime"?d=[o(h.getFullYear()%100),o(h.getUTCMonth()+1),o(h.getUTCDate()),o(h.getUTCHours()),o(h.getUTCMinutes()),o(h.getUTCSeconds()),"Z"].join(""):this.reporter.error("Encoding "+f+" time is not supported yet"),this._encodeStr(d,"octstr")},a.prototype._encodeNull=function(){return this._createEncoderBuffer("")},a.prototype._encodeInt=function(l,f){if(typeof l=="string"){if(!f)return this.reporter.error("String int or enum given, but no values map");if(!f.hasOwnProperty(l))return this.reporter.error("Values map doesn't contain: "+JSON.stringify(l));l=f[l]}if(typeof l!="number"&&!e.isBuffer(l)){var d=l.toArray();!l.sign&&d[0]&128&&d.unshift(0),l=new e(d)}if(e.isBuffer(l)){var h=l.length;l.length===0&&h++;var p=new e(h);return l.copy(p),l.length===0&&(p[0]=0),this._createEncoderBuffer(p)}if(l<128)return this._createEncoderBuffer(l);if(l<256)return this._createEncoderBuffer([0,l]);for(var h=1,m=l;m>=256;m>>=8)h++;for(var p=new Array(h),m=p.length-1;m>=0;m--)p[m]=l&255,l>>=8;return p[0]&128&&p.unshift(0),this._createEncoderBuffer(new e(p))},a.prototype._encodeBool=function(l){return this._createEncoderBuffer(l?255:0)},a.prototype._use=function(l,f){return typeof l=="function"&&(l=l(f)),l._getEncoder("der").tree},a.prototype._skipDefault=function(l,f,d){var h=this._baseState,m;if(h.default===null)return!1;var p=l.join();if(h.defaultBuffer===void 0&&(h.defaultBuffer=this._encodeValue(h.default,f,d).join()),p.length!==h.defaultBuffer.length)return!1;for(m=0;m<p.length;m++)if(p[m]!==h.defaultBuffer[m])return!1;return!0};function c(u,l,f,d){var h;if(u==="seqof"?u="seq":u==="setof"&&(u="set"),i.tagByName.hasOwnProperty(u))h=i.tagByName[u];else if(typeof u=="number"&&(u|0)===u)h=u;else return d.error("Unknown tag: "+u);return h>=31?d.error("Multi-octet tag encoding unsupported"):(l||(h|=32),h|=i.tagClassByName[f||"universal"]<<6,h)}return uT}var fT,fX;function uot(){if(fX)return fT;fX=1;var t=lr(),e=Ffe();function r(n){e.call(this,n),this.enc="pem"}return t(r,e),fT=r,r.prototype.encode=function(i,s){for(var a=e.prototype.encode.call(this,i),o=a.toString("base64"),c=["-----BEGIN "+s.label+"-----"],u=0;u<o.length;u+=64)c.push(o.slice(u,u+64));return c.push("-----END "+s.label+"-----"),c.join(`
`)},fT}var dX;function fot(){return dX||(dX=1,function(t){var e=t;e.der=Ffe(),e.pem=uot()}(lT)),lT}var hX;function f2(){return hX||(hX=1,function(t){var e=t;e.bignum=vs(),e.define=iot().define,e.base=Vg(),e.constants=Mfe(),e.decoders=lot(),e.encoders=fot()}(Qk)),Qk}var dT,pX;function dot(){if(pX)return dT;pX=1;var t=f2(),e=t.define("Time",function(){this.choice({utcTime:this.utctime(),generalTime:this.gentime()})}),r=t.define("AttributeTypeValue",function(){this.seq().obj(this.key("type").objid(),this.key("value").any())}),n=t.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional(),this.key("curve").objid().optional())}),i=t.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(n),this.key("subjectPublicKey").bitstr())}),s=t.define("RelativeDistinguishedName",function(){this.setof(r)}),a=t.define("RDNSequence",function(){this.seqof(s)}),o=t.define("Name",function(){this.choice({rdnSequence:this.use(a)})}),c=t.define("Validity",function(){this.seq().obj(this.key("notBefore").use(e),this.key("notAfter").use(e))}),u=t.define("Extension",function(){this.seq().obj(this.key("extnID").objid(),this.key("critical").bool().def(!1),this.key("extnValue").octstr())}),l=t.define("TBSCertificate",function(){this.seq().obj(this.key("version").explicit(0).int().optional(),this.key("serialNumber").int(),this.key("signature").use(n),this.key("issuer").use(o),this.key("validity").use(c),this.key("subject").use(o),this.key("subjectPublicKeyInfo").use(i),this.key("issuerUniqueID").implicit(1).bitstr().optional(),this.key("subjectUniqueID").implicit(2).bitstr().optional(),this.key("extensions").explicit(3).seqof(u).optional())}),f=t.define("X509Certificate",function(){this.seq().obj(this.key("tbsCertificate").use(l),this.key("signatureAlgorithm").use(n),this.key("signatureValue").bitstr())});return dT=f,dT}var mX;function hot(){if(mX)return uo;mX=1;var t=f2();uo.certificate=dot();var e=t.define("RSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("modulus").int(),this.key("publicExponent").int(),this.key("privateExponent").int(),this.key("prime1").int(),this.key("prime2").int(),this.key("exponent1").int(),this.key("exponent2").int(),this.key("coefficient").int())});uo.RSAPrivateKey=e;var r=t.define("RSAPublicKey",function(){this.seq().obj(this.key("modulus").int(),this.key("publicExponent").int())});uo.RSAPublicKey=r;var n=t.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("none").null_().optional(),this.key("curve").objid().optional(),this.key("params").seq().obj(this.key("p").int(),this.key("q").int(),this.key("g").int()).optional())}),i=t.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(n),this.key("subjectPublicKey").bitstr())});uo.PublicKey=i;var s=t.define("PrivateKeyInfo",function(){this.seq().obj(this.key("version").int(),this.key("algorithm").use(n),this.key("subjectPrivateKey").octstr())});uo.PrivateKey=s;var a=t.define("EncryptedPrivateKeyInfo",function(){this.seq().obj(this.key("algorithm").seq().obj(this.key("id").objid(),this.key("decrypt").seq().obj(this.key("kde").seq().obj(this.key("id").objid(),this.key("kdeparams").seq().obj(this.key("salt").octstr(),this.key("iters").int())),this.key("cipher").seq().obj(this.key("algo").objid(),this.key("iv").octstr()))),this.key("subjectPrivateKey").octstr())});uo.EncryptedPrivateKey=a;var o=t.define("DSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("p").int(),this.key("q").int(),this.key("g").int(),this.key("pub_key").int(),this.key("priv_key").int())});uo.DSAPrivateKey=o,uo.DSAparam=t.define("DSAparam",function(){this.int()});var c=t.define("ECParameters",function(){this.choice({namedCurve:this.objid()})}),u=t.define("ECPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("privateKey").octstr(),this.key("parameters").optional().explicit(0).use(c),this.key("publicKey").optional().explicit(1).bitstr())});return uo.ECPrivateKey=u,uo.signature=t.define("signature",function(){this.seq().obj(this.key("r").int(),this.key("s").int())}),uo}const pot={"2.16.840.1.101.3.4.1.1":"aes-128-ecb","2.16.840.1.101.3.4.1.2":"aes-128-cbc","2.16.840.1.101.3.4.1.3":"aes-128-ofb","2.16.840.1.101.3.4.1.4":"aes-128-cfb","2.16.840.1.101.3.4.1.21":"aes-192-ecb","2.16.840.1.101.3.4.1.22":"aes-192-cbc","2.16.840.1.101.3.4.1.23":"aes-192-ofb","2.16.840.1.101.3.4.1.24":"aes-192-cfb","2.16.840.1.101.3.4.1.41":"aes-256-ecb","2.16.840.1.101.3.4.1.42":"aes-256-cbc","2.16.840.1.101.3.4.1.43":"aes-256-ofb","2.16.840.1.101.3.4.1.44":"aes-256-cfb"};var hT,gX;function mot(){if(gX)return hT;gX=1;var t=/Proc-Type: 4,ENCRYPTED[\n\r]+DEK-Info: AES-((?:128)|(?:192)|(?:256))-CBC,([0-9A-H]+)[\n\r]+([0-9A-z\n\r+/=]+)[\n\r]+/m,e=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----/m,r=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----([0-9A-z\n\r+/=]+)-----END \1-----$/m,n=X5(),i=eM(),s=gr().Buffer;return hT=function(a,o){var c=a.toString(),u=c.match(t),l;if(u){var d="aes"+u[1],h=s.from(u[2],"hex"),m=s.from(u[3].replace(/[\r\n]/g,""),"base64"),p=n(o,h.slice(0,8),parseInt(u[1],10)).key,g=[],v=i.createDecipheriv(d,p,h);g.push(v.update(m)),g.push(v.final()),l=s.concat(g)}else{var f=c.match(r);l=s.from(f[2].replace(/[\r\n]/g,""),"base64")}var y=c.match(e)[1];return{tag:y,data:l}},hT}var pT,vX;function J5(){if(vX)return pT;vX=1;var t=hot(),e=pot,r=mot(),n=eM(),i=gfe(),s=gr().Buffer;function a(c,u){var l=c.algorithm.decrypt.kde.kdeparams.salt,f=parseInt(c.algorithm.decrypt.kde.kdeparams.iters.toString(),10),d=e[c.algorithm.decrypt.cipher.algo.join(".")],h=c.algorithm.decrypt.cipher.iv,m=c.subjectPrivateKey,p=parseInt(d.split("-")[1],10)/8,g=i.pbkdf2Sync(u,l,f,p,"sha1"),v=n.createDecipheriv(d,g,h),y=[];return y.push(v.update(m)),y.push(v.final()),s.concat(y)}function o(c){var u;typeof c=="object"&&!s.isBuffer(c)&&(u=c.passphrase,c=c.key),typeof c=="string"&&(c=s.from(c));var l=r(c,u),f=l.tag,d=l.data,h,m;switch(f){case"CERTIFICATE":m=t.certificate.decode(d,"der").tbsCertificate.subjectPublicKeyInfo;case"PUBLIC KEY":switch(m||(m=t.PublicKey.decode(d,"der")),h=m.algorithm.algorithm.join("."),h){case"1.2.840.113549.1.1.1":return t.RSAPublicKey.decode(m.subjectPublicKey.data,"der");case"1.2.840.10045.2.1":return m.subjectPrivateKey=m.subjectPublicKey,{type:"ec",data:m};case"1.2.840.10040.4.1":return m.algorithm.params.pub_key=t.DSAparam.decode(m.subjectPublicKey.data,"der"),{type:"dsa",data:m.algorithm.params};default:throw new Error("unknown key id "+h)}case"ENCRYPTED PRIVATE KEY":d=t.EncryptedPrivateKey.decode(d,"der"),d=a(d,u);case"PRIVATE KEY":switch(m=t.PrivateKey.decode(d,"der"),h=m.algorithm.algorithm.join("."),h){case"1.2.840.113549.1.1.1":return t.RSAPrivateKey.decode(m.subjectPrivateKey,"der");case"1.2.840.10045.2.1":return{curve:m.algorithm.curve,privateKey:t.ECPrivateKey.decode(m.subjectPrivateKey,"der").privateKey};case"1.2.840.10040.4.1":return m.algorithm.params.priv_key=t.DSAparam.decode(m.subjectPrivateKey,"der"),{type:"dsa",params:m.algorithm.params};default:throw new Error("unknown key id "+h)}case"RSA PUBLIC KEY":return t.RSAPublicKey.decode(d,"der");case"RSA PRIVATE KEY":return t.RSAPrivateKey.decode(d,"der");case"DSA PRIVATE KEY":return{type:"dsa",params:t.DSAPrivateKey.decode(d,"der")};case"EC PRIVATE KEY":return d=t.ECPrivateKey.decode(d,"der"),{curve:d.parameters.value,privateKey:d.privateKey};default:throw new Error("unknown key type "+f)}}return o.signature=t.signature,pT=o,pT}const Lfe={"1.3.132.0.10":"secp256k1","1.3.132.0.33":"p224","1.2.840.10045.3.1.1":"p192","1.2.840.10045.3.1.7":"p256","1.3.132.0.34":"p384","1.3.132.0.35":"p521"};var yX;function got(){if(yX)return Gm.exports;yX=1;var t=gr().Buffer,e=ufe(),r=nM(),n=aM().ec,i=rM(),s=J5(),a=Lfe,o=1;function c(v,y,b,_,x){var E=s(y);if(E.curve){if(_!=="ecdsa"&&_!=="ecdsa/rsa")throw new Error("wrong private key type");return u(v,E)}else if(E.type==="dsa"){if(_!=="dsa")throw new Error("wrong private key type");return l(v,E,b)}if(_!=="rsa"&&_!=="ecdsa/rsa")throw new Error("wrong private key type");if(y.padding!==void 0&&y.padding!==o)throw new Error("illegal or unsupported padding mode");v=t.concat([x,v]);for(var k=E.modulus.byteLength(),B=[0,1];v.length+B.length+1<k;)B.push(255);B.push(0);for(var D=-1;++D<v.length;)B.push(v[D]);var z=r(B,E);return z}function u(v,y){var b=a[y.curve.join(".")];if(!b)throw new Error("unknown curve "+y.curve.join("."));var _=new n(b),x=_.keyFromPrivate(y.privateKey),E=x.sign(v);return t.from(E.toDER())}function l(v,y,b){for(var _=y.params.priv_key,x=y.params.p,E=y.params.q,k=y.params.g,B=new i(0),D,z=h(v,E).mod(E),U=!1,S=d(_,E,v,b);U===!1;)D=p(E,S,b),B=g(k,D,x,E),U=D.invm(E).imul(z.add(_.mul(B))).mod(E),U.cmpn(0)===0&&(U=!1,B=new i(0));return f(B,U)}function f(v,y){v=v.toArray(),y=y.toArray(),v[0]&128&&(v=[0].concat(v)),y[0]&128&&(y=[0].concat(y));var b=v.length+y.length+4,_=[48,b,2,v.length];return _=_.concat(v,[2,y.length],y),t.from(_)}function d(v,y,b,_){if(v=t.from(v.toArray()),v.length<y.byteLength()){var x=t.alloc(y.byteLength()-v.length);v=t.concat([x,v])}var E=b.length,k=m(b,y),B=t.alloc(E);B.fill(1);var D=t.alloc(E);return D=e(_,D).update(B).update(t.from([0])).update(v).update(k).digest(),B=e(_,D).update(B).digest(),D=e(_,D).update(B).update(t.from([1])).update(v).update(k).digest(),B=e(_,D).update(B).digest(),{k:D,v:B}}function h(v,y){var b=new i(v),_=(v.length<<3)-y.bitLength();return _>0&&b.ishrn(_),b}function m(v,y){v=h(v,y),v=v.mod(y);var b=t.from(v.toArray());if(b.length<y.byteLength()){var _=t.alloc(y.byteLength()-b.length);b=t.concat([_,b])}return b}function p(v,y,b){var _,x;do{for(_=t.alloc(0);_.length*8<v.bitLength();)y.v=e(b,y.k).update(y.v).digest(),_=t.concat([_,y.v]);x=h(_,v),y.k=e(b,y.k).update(y.v).update(t.from([0])).digest(),y.v=e(b,y.k).update(y.v).digest()}while(x.cmp(v)!==-1);return x}function g(v,y,b,_){return v.toRed(i.mont(b)).redPow(y).fromRed().mod(_)}return Gm.exports=c,Gm.exports.getKey=d,Gm.exports.makeKey=p,Gm.exports}var mT,bX;function vot(){if(bX)return mT;bX=1;var t=gr().Buffer,e=rM(),r=aM().ec,n=J5(),i=Lfe;function s(u,l,f,d,h){var m=n(f);if(m.type==="ec"){if(d!=="ecdsa"&&d!=="ecdsa/rsa")throw new Error("wrong public key type");return a(u,l,m)}else if(m.type==="dsa"){if(d!=="dsa")throw new Error("wrong public key type");return o(u,l,m)}if(d!=="rsa"&&d!=="ecdsa/rsa")throw new Error("wrong public key type");l=t.concat([h,l]);for(var p=m.modulus.byteLength(),g=[1],v=0;l.length+g.length+2<p;)g.push(255),v+=1;g.push(0);for(var y=-1;++y<l.length;)g.push(l[y]);g=t.from(g);var b=e.mont(m.modulus);u=new e(u).toRed(b),u=u.redPow(new e(m.publicExponent)),u=t.from(u.fromRed().toArray());var _=v<8?1:0;for(p=Math.min(u.length,g.length),u.length!==g.length&&(_=1),y=-1;++y<p;)_|=u[y]^g[y];return _===0}function a(u,l,f){var d=i[f.data.algorithm.curve.join(".")];if(!d)throw new Error("unknown curve "+f.data.algorithm.curve.join("."));var h=new r(d),m=f.data.subjectPrivateKey.data;return h.verify(l,u,m)}function o(u,l,f){var d=f.data.p,h=f.data.q,m=f.data.g,p=f.data.pub_key,g=n.signature.decode(u,"der"),v=g.s,y=g.r;c(v,h),c(y,h);var b=e.mont(d),_=v.invm(h),x=m.toRed(b).redPow(new e(l).mul(_).mod(h)).fromRed().mul(p.toRed(b).redPow(y.mul(_).mod(h)).fromRed()).mod(d).mod(h);return x.cmp(y)===0}function c(u,l){if(u.cmpn(0)<=0)throw new Error("invalid sig");if(u.cmp(l)>=0)throw new Error("invalid sig")}return mT=s,mT}var gT,wX;function yot(){if(wX)return gT;wX=1;var t=gr().Buffer,e=o2(),r=Fat(),n=lr(),i=got(),s=vot(),a=ffe;Object.keys(a).forEach(function(f){a[f].id=t.from(a[f].id,"hex"),a[f.toLowerCase()]=a[f]});function o(f){r.Writable.call(this);var d=a[f];if(!d)throw new Error("Unknown message digest");this._hashType=d.hash,this._hash=e(d.hash),this._tag=d.id,this._signType=d.sign}n(o,r.Writable),o.prototype._write=function(d,h,m){this._hash.update(d),m()},o.prototype.update=function(d,h){return this._hash.update(typeof d=="string"?t.from(d,h):d),this},o.prototype.sign=function(d,h){this.end();var m=this._hash.digest(),p=i(m,d,this._hashType,this._signType,this._tag);return h?p.toString(h):p};function c(f){r.Writable.call(this);var d=a[f];if(!d)throw new Error("Unknown message digest");this._hash=e(d.hash),this._tag=d.id,this._signType=d.sign}n(c,r.Writable),c.prototype._write=function(d,h,m){this._hash.update(d),m()},c.prototype.update=function(d,h){return this._hash.update(typeof d=="string"?t.from(d,h):d),this},c.prototype.verify=function(d,h,m){var p=typeof h=="string"?t.from(h,m):h;this.end();var g=this._hash.digest();return s(p,g,d,this._signType,this._tag)};function u(f){return new o(f)}function l(f){return new c(f)}return gT={Sign:u,Verify:l,createSign:u,createVerify:l},gT}var vT,_X;function bot(){if(_X)return vT;_X=1;var t=aM(),e=vs();vT=function(a){return new n(a)};var r={secp256k1:{name:"secp256k1",byteLength:32},secp224r1:{name:"p224",byteLength:28},prime256v1:{name:"p256",byteLength:32},prime192v1:{name:"p192",byteLength:24},ed25519:{name:"ed25519",byteLength:32},secp384r1:{name:"p384",byteLength:48},secp521r1:{name:"p521",byteLength:66}};r.p224=r.secp224r1,r.p256=r.secp256r1=r.prime256v1,r.p192=r.secp192r1=r.prime192v1,r.p384=r.secp384r1,r.p521=r.secp521r1;function n(s){this.curveType=r[s],this.curveType||(this.curveType={name:s}),this.curve=new t.ec(this.curveType.name),this.keys=void 0}n.prototype.generateKeys=function(s,a){return this.keys=this.curve.genKeyPair(),this.getPublicKey(s,a)},n.prototype.computeSecret=function(s,a,o){a=a||"utf8",Me.isBuffer(s)||(s=new Me(s,a));var c=this.curve.keyFromPublic(s).getPublic(),u=c.mul(this.keys.getPrivate()).getX();return i(u,o,this.curveType.byteLength)},n.prototype.getPublicKey=function(s,a){var o=this.keys.getPublic(a==="compressed",!0);return a==="hybrid"&&(o[o.length-1]%2?o[0]=7:o[0]=6),i(o,s)},n.prototype.getPrivateKey=function(s){return i(this.keys.getPrivate(),s)},n.prototype.setPublicKey=function(s,a){return a=a||"utf8",Me.isBuffer(s)||(s=new Me(s,a)),this.keys._importPublic(s),this},n.prototype.setPrivateKey=function(s,a){a=a||"utf8",Me.isBuffer(s)||(s=new Me(s,a));var o=new e(s);return o=o.toString(16),this.keys=this.curve.genKeyPair(),this.keys._importPrivate(o),this};function i(s,a,o){Array.isArray(s)||(s=s.toArray());var c=new Me(s);if(o&&c.length<o){var u=new Me(o-c.length);u.fill(0),c=Me.concat([u,c])}return a?c.toString(a):c}return vT}var yT={},bT,xX;function $fe(){if(xX)return bT;xX=1;var t=o2(),e=gr().Buffer;bT=function(n,i){for(var s=e.alloc(0),a=0,o;s.length<i;)o=r(a++),s=e.concat([s,t("sha1").update(n).update(o).digest()]);return s.slice(0,i)};function r(n){var i=e.allocUnsafe(4);return i.writeUInt32BE(n,0),i}return bT}var wT,SX;function Ufe(){return SX||(SX=1,wT=function(e,r){for(var n=e.length,i=-1;++i<n;)e[i]^=r[i];return e}),wT}var _T,EX;function jfe(){if(EX)return _T;EX=1;var t=vs(),e=gr().Buffer;function r(n,i){return e.from(n.toRed(t.mont(i.modulus)).redPow(new t(i.publicExponent)).fromRed().toArray())}return _T=r,_T}var xT,kX;function wot(){if(kX)return xT;kX=1;var t=J5(),e=hm(),r=o2(),n=$fe(),i=Ufe(),s=vs(),a=jfe(),o=nM(),c=gr().Buffer;xT=function(h,m,p){var g;h.padding?g=h.padding:p?g=1:g=4;var v=t(h),y;if(g===4)y=u(v,m);else if(g===1)y=l(v,m,p);else if(g===3){if(y=new s(m),y.cmp(v.modulus)>=0)throw new Error("data too long for modulus")}else throw new Error("unknown padding");return p?o(y,v):a(y,v)};function u(d,h){var m=d.modulus.byteLength(),p=h.length,g=r("sha1").update(c.alloc(0)).digest(),v=g.length,y=2*v;if(p>m-y-2)throw new Error("message too long");var b=c.alloc(m-p-y-2),_=m-v-1,x=e(v),E=i(c.concat([g,b,c.alloc(1,1),h],_),n(x,_)),k=i(x,n(E,v));return new s(c.concat([c.alloc(1),k,E],m))}function l(d,h,m){var p=h.length,g=d.modulus.byteLength();if(p>g-11)throw new Error("message too long");var v;return m?v=c.alloc(g-p-3,255):v=f(g-p-3),new s(c.concat([c.from([0,m?1:2]),v,c.alloc(1),h],g))}function f(d){for(var h=c.allocUnsafe(d),m=0,p=e(d*2),g=0,v;m<d;)g===p.length&&(p=e(d*2),g=0),v=p[g++],v&&(h[m++]=v);return h}return xT}var ST,TX;function _ot(){if(TX)return ST;TX=1;var t=J5(),e=$fe(),r=Ufe(),n=vs(),i=nM(),s=o2(),a=jfe(),o=gr().Buffer;ST=function(d,h,m){var p;d.padding?p=d.padding:m?p=1:p=4;var g=t(d),v=g.modulus.byteLength();if(h.length>v||new n(h).cmp(g.modulus)>=0)throw new Error("decryption error");var y;m?y=a(new n(h),g):y=i(h,g);var b=o.alloc(v-y.length);if(y=o.concat([b,y],v),p===4)return c(g,y);if(p===1)return u(g,y,m);if(p===3)return y;throw new Error("unknown padding")};function c(f,d){var h=f.modulus.byteLength(),m=s("sha1").update(o.alloc(0)).digest(),p=m.length;if(d[0]!==0)throw new Error("decryption error");var g=d.slice(1,p+1),v=d.slice(p+1),y=r(g,e(v,p)),b=r(v,e(y,h-p-1));if(l(m,b.slice(0,p)))throw new Error("decryption error");for(var _=p;b[_]===0;)_++;if(b[_++]!==1)throw new Error("decryption error");return b.slice(_)}function u(f,d,h){for(var m=d.slice(0,2),p=2,g=0;d[p++]!==0;)if(p>=d.length){g++;break}var v=d.slice(2,p-1);if((m.toString("hex")!=="0002"&&!h||m.toString("hex")!=="0001"&&h)&&g++,v.length<8&&g++,g)throw new Error("decryption error");return d.slice(p)}function l(f,d){f=o.from(f),d=o.from(d);var h=0,m=f.length;f.length!==d.length&&(h++,m=Math.min(f.length,d.length));for(var p=-1;++p<m;)h+=f[p]^d[p];return h}return ST}var AX;function xot(){return AX||(AX=1,function(t){t.publicEncrypt=wot(),t.privateDecrypt=_ot(),t.privateEncrypt=function(r,n){return t.publicEncrypt(r,n,!0)},t.publicDecrypt=function(r,n){return t.privateDecrypt(r,n,!0)}}(yT)),yT}var e1={},CX;function Sot(){if(CX)return e1;CX=1;function t(){throw new Error(`secure random number generation not supported by this browser
use chrome, FireFox or Internet Explorer 11`)}var e=gr();hm();var r=e.Buffer,n=e.kMaxLength,i=Ut.crypto||Ut.msCrypto,s=Math.pow(2,32)-1;function a(f,d){if(typeof f!="number"||f!==f)throw new TypeError("offset must be a number");if(f>s||f<0)throw new TypeError("offset must be a uint32");if(f>n||f>d)throw new RangeError("offset out of range")}function o(f,d,h){if(typeof f!="number"||f!==f)throw new TypeError("size must be a number");if(f>s||f<0)throw new TypeError("size must be a uint32");if(f+d>h||f>n)throw new RangeError("buffer too small")}i&&i.getRandomValues?(e1.randomFill=c,e1.randomFillSync=l):(e1.randomFill=t,e1.randomFillSync=t);function c(f,d,h,m){if(!r.isBuffer(f)&&!(f instanceof Ut.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');if(typeof d=="function")m=d,d=0,h=f.length;else if(typeof h=="function")m=h,h=f.length-d;else if(typeof m!="function")throw new TypeError('"cb" argument must be a function');return a(d,f.length),o(h,d,f.length),u(f,d,h,m)}function u(f,d,h,m){{var p=f.buffer,g=new Uint8Array(p,d,h);if(i.getRandomValues(g),m){fn.nextTick(function(){m(null,f)});return}return f}}function l(f,d,h){if(typeof d>"u"&&(d=0),!r.isBuffer(f)&&!(f instanceof Ut.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');return a(d,f.length),h===void 0&&(h=f.length-d),o(h,d,f.length),u(f,d,h)}return e1}var IX;function Vfe(){if(IX)return tr;IX=1,tr.randomBytes=tr.rng=tr.pseudoRandomBytes=tr.prng=hm(),tr.createHash=tr.Hash=o2(),tr.createHmac=tr.Hmac=ufe();var t=tat(),e=Object.keys(t),r=["sha1","sha224","sha256","sha384","sha512","md5","rmd160"].concat(e);tr.getHashes=function(){return r};var n=gfe();tr.pbkdf2=n.pbkdf2,tr.pbkdf2Sync=n.pbkdf2Sync;var i=wat();tr.Cipher=i.Cipher,tr.createCipher=i.createCipher,tr.Cipheriv=i.Cipheriv,tr.createCipheriv=i.createCipheriv,tr.Decipher=i.Decipher,tr.createDecipher=i.createDecipher,tr.Decipheriv=i.Decipheriv,tr.createDecipheriv=i.createDecipheriv,tr.getCiphers=i.getCiphers,tr.listCiphers=i.listCiphers;var s=Oat();tr.DiffieHellmanGroup=s.DiffieHellmanGroup,tr.createDiffieHellmanGroup=s.createDiffieHellmanGroup,tr.getDiffieHellman=s.getDiffieHellman,tr.createDiffieHellman=s.createDiffieHellman,tr.DiffieHellman=s.DiffieHellman;var a=yot();tr.createSign=a.createSign,tr.Sign=a.Sign,tr.createVerify=a.createVerify,tr.Verify=a.Verify,tr.createECDH=bot();var o=xot();tr.publicEncrypt=o.publicEncrypt,tr.privateEncrypt=o.privateEncrypt,tr.publicDecrypt=o.publicDecrypt,tr.privateDecrypt=o.privateDecrypt;var c=Sot();return tr.randomFill=c.randomFill,tr.randomFillSync=c.randomFillSync,tr.createCredentials=function(){throw new Error(`sorry, createCredentials is not implemented yet
we accept pull requests
https://github.com/browserify/crypto-browserify`)},tr.constants={DH_CHECK_P_NOT_SAFE_PRIME:2,DH_CHECK_P_NOT_PRIME:1,DH_UNABLE_TO_CHECK_GENERATOR:4,DH_NOT_SUITABLE_GENERATOR:8,NPN_ENABLED:1,ALPN_ENABLED:1,RSA_PKCS1_PADDING:1,RSA_SSLV23_PADDING:2,RSA_NO_PADDING:3,RSA_PKCS1_OAEP_PADDING:4,RSA_X931_PADDING:5,RSA_PKCS1_PSS_PADDING:6,POINT_CONVERSION_COMPRESSED:2,POINT_CONVERSION_UNCOMPRESSED:4,POINT_CONVERSION_HYBRID:6},tr}var Eot=E3.exports,PX;function oM(){return PX||(PX=1,function(t,e){(function(r,n){t.exports=n()})(Eot,function(){var r=r||function(n,i){var s;if(typeof window<"u"&&window.crypto&&(s=window.crypto),typeof self<"u"&&self.crypto&&(s=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(s=globalThis.crypto),!s&&typeof window<"u"&&window.msCrypto&&(s=window.msCrypto),!s&&typeof Ut<"u"&&Ut.crypto&&(s=Ut.crypto),!s&&typeof tg=="function")try{s=Vfe()}catch{}var a=function(){if(s){if(typeof s.getRandomValues=="function")try{return s.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof s.randomBytes=="function")try{return s.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},o=Object.create||function(){function y(){}return function(b){var _;return y.prototype=b,_=new y,y.prototype=null,_}}(),c={},u=c.lib={},l=u.Base=function(){return{extend:function(y){var b=o(this);return y&&b.mixIn(y),(!b.hasOwnProperty("init")||this.init===b.init)&&(b.init=function(){b.$super.init.apply(this,arguments)}),b.init.prototype=b,b.$super=this,b},create:function(){var y=this.extend();return y.init.apply(y,arguments),y},init:function(){},mixIn:function(y){for(var b in y)y.hasOwnProperty(b)&&(this[b]=y[b]);y.hasOwnProperty("toString")&&(this.toString=y.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),f=u.WordArray=l.extend({init:function(y,b){y=this.words=y||[],b!=i?this.sigBytes=b:this.sigBytes=y.length*4},toString:function(y){return(y||h).stringify(this)},concat:function(y){var b=this.words,_=y.words,x=this.sigBytes,E=y.sigBytes;if(this.clamp(),x%4)for(var k=0;k<E;k++){var B=_[k>>>2]>>>24-k%4*8&255;b[x+k>>>2]|=B<<24-(x+k)%4*8}else for(var D=0;D<E;D+=4)b[x+D>>>2]=_[D>>>2];return this.sigBytes+=E,this},clamp:function(){var y=this.words,b=this.sigBytes;y[b>>>2]&=4294967295<<32-b%4*8,y.length=n.ceil(b/4)},clone:function(){var y=l.clone.call(this);return y.words=this.words.slice(0),y},random:function(y){for(var b=[],_=0;_<y;_+=4)b.push(a());return new f.init(b,y)}}),d=c.enc={},h=d.Hex={stringify:function(y){for(var b=y.words,_=y.sigBytes,x=[],E=0;E<_;E++){var k=b[E>>>2]>>>24-E%4*8&255;x.push((k>>>4).toString(16)),x.push((k&15).toString(16))}return x.join("")},parse:function(y){for(var b=y.length,_=[],x=0;x<b;x+=2)_[x>>>3]|=parseInt(y.substr(x,2),16)<<24-x%8*4;return new f.init(_,b/2)}},m=d.Latin1={stringify:function(y){for(var b=y.words,_=y.sigBytes,x=[],E=0;E<_;E++){var k=b[E>>>2]>>>24-E%4*8&255;x.push(String.fromCharCode(k))}return x.join("")},parse:function(y){for(var b=y.length,_=[],x=0;x<b;x++)_[x>>>2]|=(y.charCodeAt(x)&255)<<24-x%4*8;return new f.init(_,b)}},p=d.Utf8={stringify:function(y){try{return decodeURIComponent(escape(m.stringify(y)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(y){return m.parse(unescape(encodeURIComponent(y)))}},g=u.BufferedBlockAlgorithm=l.extend({reset:function(){this._data=new f.init,this._nDataBytes=0},_append:function(y){typeof y=="string"&&(y=p.parse(y)),this._data.concat(y),this._nDataBytes+=y.sigBytes},_process:function(y){var b,_=this._data,x=_.words,E=_.sigBytes,k=this.blockSize,B=k*4,D=E/B;y?D=n.ceil(D):D=n.max((D|0)-this._minBufferSize,0);var z=D*k,U=n.min(z*4,E);if(z){for(var S=0;S<z;S+=k)this._doProcessBlock(x,S);b=x.splice(0,z),_.sigBytes-=U}return new f.init(b,U)},clone:function(){var y=l.clone.call(this);return y._data=this._data.clone(),y},_minBufferSize:0});u.Hasher=g.extend({cfg:l.extend(),init:function(y){this.cfg=this.cfg.extend(y),this.reset()},reset:function(){g.reset.call(this),this._doReset()},update:function(y){return this._append(y),this._process(),this},finalize:function(y){y&&this._append(y);var b=this._doFinalize();return b},blockSize:16,_createHelper:function(y){return function(b,_){return new y.init(_).finalize(b)}},_createHmacHelper:function(y){return function(b,_){return new v.HMAC.init(y,_).finalize(b)}}});var v=c.algo={};return c}(Math);return r})}(E3)),E3.exports}var kot=S3.exports,RX;function Tot(){return RX||(RX=1,function(t,e){(function(r,n){t.exports=n(oM())})(kot,function(r){return function(){var n=r,i=n.lib,s=i.WordArray,a=n.enc;a.Base64={stringify:function(c){var u=c.words,l=c.sigBytes,f=this._map;c.clamp();for(var d=[],h=0;h<l;h+=3)for(var m=u[h>>>2]>>>24-h%4*8&255,p=u[h+1>>>2]>>>24-(h+1)%4*8&255,g=u[h+2>>>2]>>>24-(h+2)%4*8&255,v=m<<16|p<<8|g,y=0;y<4&&h+y*.75<l;y++)d.push(f.charAt(v>>>6*(3-y)&63));var b=f.charAt(64);if(b)for(;d.length%4;)d.push(b);return d.join("")},parse:function(c){var u=c.length,l=this._map,f=this._reverseMap;if(!f){f=this._reverseMap=[];for(var d=0;d<l.length;d++)f[l.charCodeAt(d)]=d}var h=l.charAt(64);if(h){var m=c.indexOf(h);m!==-1&&(u=m)}return o(c,u,f)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function o(c,u,l){for(var f=[],d=0,h=0;h<u;h++)if(h%4){var m=l[c.charCodeAt(h-1)]<<h%4*2,p=l[c.charCodeAt(h)]>>>6-h%4*2,g=m|p;f[d>>>2]|=g<<24-d%4*8,d++}return s.create(f,d)}}(),r.enc.Base64})}(S3)),S3.exports}var Aot=Tot();const Wv=In(Aot);var A3={exports:{}},Cot=A3.exports,OX;function Iot(){return OX||(OX=1,function(t,e){(function(r,n){t.exports=n(oM())})(Cot,function(r){return function(n){var i=r,s=i.lib,a=s.WordArray,o=s.Hasher,c=i.algo,u=[];(function(){for(var p=0;p<64;p++)u[p]=n.abs(n.sin(p+1))*4294967296|0})();var l=c.MD5=o.extend({_doReset:function(){this._hash=new a.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(p,g){for(var v=0;v<16;v++){var y=g+v,b=p[y];p[y]=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360}var _=this._hash.words,x=p[g+0],E=p[g+1],k=p[g+2],B=p[g+3],D=p[g+4],z=p[g+5],U=p[g+6],S=p[g+7],T=p[g+8],w=p[g+9],A=p[g+10],F=p[g+11],P=p[g+12],O=p[g+13],R=p[g+14],I=p[g+15],C=_[0],M=_[1],L=_[2],N=_[3];C=f(C,M,L,N,x,7,u[0]),N=f(N,C,M,L,E,12,u[1]),L=f(L,N,C,M,k,17,u[2]),M=f(M,L,N,C,B,22,u[3]),C=f(C,M,L,N,D,7,u[4]),N=f(N,C,M,L,z,12,u[5]),L=f(L,N,C,M,U,17,u[6]),M=f(M,L,N,C,S,22,u[7]),C=f(C,M,L,N,T,7,u[8]),N=f(N,C,M,L,w,12,u[9]),L=f(L,N,C,M,A,17,u[10]),M=f(M,L,N,C,F,22,u[11]),C=f(C,M,L,N,P,7,u[12]),N=f(N,C,M,L,O,12,u[13]),L=f(L,N,C,M,R,17,u[14]),M=f(M,L,N,C,I,22,u[15]),C=d(C,M,L,N,E,5,u[16]),N=d(N,C,M,L,U,9,u[17]),L=d(L,N,C,M,F,14,u[18]),M=d(M,L,N,C,x,20,u[19]),C=d(C,M,L,N,z,5,u[20]),N=d(N,C,M,L,A,9,u[21]),L=d(L,N,C,M,I,14,u[22]),M=d(M,L,N,C,D,20,u[23]),C=d(C,M,L,N,w,5,u[24]),N=d(N,C,M,L,R,9,u[25]),L=d(L,N,C,M,B,14,u[26]),M=d(M,L,N,C,T,20,u[27]),C=d(C,M,L,N,O,5,u[28]),N=d(N,C,M,L,k,9,u[29]),L=d(L,N,C,M,S,14,u[30]),M=d(M,L,N,C,P,20,u[31]),C=h(C,M,L,N,z,4,u[32]),N=h(N,C,M,L,T,11,u[33]),L=h(L,N,C,M,F,16,u[34]),M=h(M,L,N,C,R,23,u[35]),C=h(C,M,L,N,E,4,u[36]),N=h(N,C,M,L,D,11,u[37]),L=h(L,N,C,M,S,16,u[38]),M=h(M,L,N,C,A,23,u[39]),C=h(C,M,L,N,O,4,u[40]),N=h(N,C,M,L,x,11,u[41]),L=h(L,N,C,M,B,16,u[42]),M=h(M,L,N,C,U,23,u[43]),C=h(C,M,L,N,w,4,u[44]),N=h(N,C,M,L,P,11,u[45]),L=h(L,N,C,M,I,16,u[46]),M=h(M,L,N,C,k,23,u[47]),C=m(C,M,L,N,x,6,u[48]),N=m(N,C,M,L,S,10,u[49]),L=m(L,N,C,M,R,15,u[50]),M=m(M,L,N,C,z,21,u[51]),C=m(C,M,L,N,P,6,u[52]),N=m(N,C,M,L,B,10,u[53]),L=m(L,N,C,M,A,15,u[54]),M=m(M,L,N,C,E,21,u[55]),C=m(C,M,L,N,T,6,u[56]),N=m(N,C,M,L,I,10,u[57]),L=m(L,N,C,M,U,15,u[58]),M=m(M,L,N,C,O,21,u[59]),C=m(C,M,L,N,D,6,u[60]),N=m(N,C,M,L,F,10,u[61]),L=m(L,N,C,M,k,15,u[62]),M=m(M,L,N,C,w,21,u[63]),_[0]=_[0]+C|0,_[1]=_[1]+M|0,_[2]=_[2]+L|0,_[3]=_[3]+N|0},_doFinalize:function(){var p=this._data,g=p.words,v=this._nDataBytes*8,y=p.sigBytes*8;g[y>>>5]|=128<<24-y%32;var b=n.floor(v/4294967296),_=v;g[(y+64>>>9<<4)+15]=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360,g[(y+64>>>9<<4)+14]=(_<<8|_>>>24)&16711935|(_<<24|_>>>8)&4278255360,p.sigBytes=(g.length+1)*4,this._process();for(var x=this._hash,E=x.words,k=0;k<4;k++){var B=E[k];E[k]=(B<<8|B>>>24)&16711935|(B<<24|B>>>8)&4278255360}return x},clone:function(){var p=o.clone.call(this);return p._hash=this._hash.clone(),p}});function f(p,g,v,y,b,_,x){var E=p+(g&v|~g&y)+b+x;return(E<<_|E>>>32-_)+g}function d(p,g,v,y,b,_,x){var E=p+(g&y|v&~y)+b+x;return(E<<_|E>>>32-_)+g}function h(p,g,v,y,b,_,x){var E=p+(g^v^y)+b+x;return(E<<_|E>>>32-_)+g}function m(p,g,v,y,b,_,x){var E=p+(v^(g|~y))+b+x;return(E<<_|E>>>32-_)+g}i.MD5=o._createHelper(l),i.HmacMD5=o._createHmacHelper(l)}(Math),r.MD5})}(A3)),A3.exports}var Pot=Iot();const Q5=In(Pot);var C3={exports:{}},Rot=C3.exports,BX;function Oot(){return BX||(BX=1,function(t,e){(function(r,n){t.exports=n(oM())})(Rot,function(r){return function(n){var i=r,s=i.lib,a=s.WordArray,o=s.Hasher,c=i.algo,u=[],l=[];(function(){function h(v){for(var y=n.sqrt(v),b=2;b<=y;b++)if(!(v%b))return!1;return!0}function m(v){return(v-(v|0))*4294967296|0}for(var p=2,g=0;g<64;)h(p)&&(g<8&&(u[g]=m(n.pow(p,1/2))),l[g]=m(n.pow(p,1/3)),g++),p++})();var f=[],d=c.SHA256=o.extend({_doReset:function(){this._hash=new a.init(u.slice(0))},_doProcessBlock:function(h,m){for(var p=this._hash.words,g=p[0],v=p[1],y=p[2],b=p[3],_=p[4],x=p[5],E=p[6],k=p[7],B=0;B<64;B++){if(B<16)f[B]=h[m+B]|0;else{var D=f[B-15],z=(D<<25|D>>>7)^(D<<14|D>>>18)^D>>>3,U=f[B-2],S=(U<<15|U>>>17)^(U<<13|U>>>19)^U>>>10;f[B]=z+f[B-7]+S+f[B-16]}var T=_&x^~_&E,w=g&v^g&y^v&y,A=(g<<30|g>>>2)^(g<<19|g>>>13)^(g<<10|g>>>22),F=(_<<26|_>>>6)^(_<<21|_>>>11)^(_<<7|_>>>25),P=k+F+T+l[B]+f[B],O=A+w;k=E,E=x,x=_,_=b+P|0,b=y,y=v,v=g,g=P+O|0}p[0]=p[0]+g|0,p[1]=p[1]+v|0,p[2]=p[2]+y|0,p[3]=p[3]+b|0,p[4]=p[4]+_|0,p[5]=p[5]+x|0,p[6]=p[6]+E|0,p[7]=p[7]+k|0},_doFinalize:function(){var h=this._data,m=h.words,p=this._nDataBytes*8,g=h.sigBytes*8;return m[g>>>5]|=128<<24-g%32,m[(g+64>>>9<<4)+14]=n.floor(p/4294967296),m[(g+64>>>9<<4)+15]=p,h.sigBytes=m.length*4,this._process(),this._hash},clone:function(){var h=o.clone.call(this);return h._hash=this._hash.clone(),h}});i.SHA256=o._createHelper(d),i.HmacSHA256=o._createHmacHelper(d)}(Math),r.SHA256})}(C3)),C3.exports}var Bot=Oot();const Dot=In(Bot);function Mot(t){if(t.length>=255)throw new TypeError("Alphabet too long");const e=new Uint8Array(256);for(let u=0;u<e.length;u++)e[u]=255;for(let u=0;u<t.length;u++){const l=t.charAt(u),f=l.charCodeAt(0);if(e[f]!==255)throw new TypeError(l+" is ambiguous");e[f]=u}const r=t.length,n=t.charAt(0),i=Math.log(r)/Math.log(256),s=Math.log(256)/Math.log(r);function a(u){if(u instanceof Uint8Array||(ArrayBuffer.isView(u)?u=new Uint8Array(u.buffer,u.byteOffset,u.byteLength):Array.isArray(u)&&(u=Uint8Array.from(u))),!(u instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(u.length===0)return"";let l=0,f=0,d=0;const h=u.length;for(;d!==h&&u[d]===0;)d++,l++;const m=(h-d)*s+1>>>0,p=new Uint8Array(m);for(;d!==h;){let y=u[d],b=0;for(let _=m-1;(y!==0||b<f)&&_!==-1;_--,b++)y+=256*p[_]>>>0,p[_]=y%r>>>0,y=y/r>>>0;if(y!==0)throw new Error("Non-zero carry");f=b,d++}let g=m-f;for(;g!==m&&p[g]===0;)g++;let v=n.repeat(l);for(;g<m;++g)v+=t.charAt(p[g]);return v}function o(u){if(typeof u!="string")throw new TypeError("Expected String");if(u.length===0)return new Uint8Array;let l=0,f=0,d=0;for(;u[l]===n;)f++,l++;const h=(u.length-l)*i+1>>>0,m=new Uint8Array(h);for(;l<u.length;){const y=u.charCodeAt(l);if(y>255)return;let b=e[y];if(b===255)return;let _=0;for(let x=h-1;(b!==0||_<d)&&x!==-1;x--,_++)b+=r*m[x]>>>0,m[x]=b%256>>>0,b=b/256>>>0;if(b!==0)throw new Error("Non-zero carry");d=_,l++}let p=h-d;for(;p!==h&&m[p]===0;)p++;const g=new Uint8Array(f+(h-p));let v=f;for(;p!==h;)g[v++]=m[p++];return g}function c(u){const l=o(u);if(l)return l;throw new Error("Non-base"+r+" character")}return{encode:a,decodeUnsafe:o,decode:c}}var Not="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";const Fot=Mot(Not);function rd(t,e){if(t.length!==e.length)throw new Error("Inputs should have the same length");const r=Ea(t.length);for(let n=0;n<t.length;n++)r[n]=t[n]^e[n];return r}function qfe(t,e,r,n){d5(t);const i=nLe({dkLen:32,asyncTick:10},n),{c:s,dkLen:a,asyncTick:o}=i;if(D1(s),D1(a),D1(o),s<1)throw new Error("PBKDF2: iterations (c) should be >= 1");const c=Lh(e),u=Lh(r),l=new Uint8Array(a),f=Wy.create(t,c),d=f._cloneInto().update(u);return{c:s,dkLen:a,asyncTick:o,DK:l,PRF:f,PRFSalt:d}}function zfe(t,e,r,n,i){return t.destroy(),e.destroy(),n&&n.destroy(),i.fill(0),r}function Lot(t,e,r,n){const{c:i,dkLen:s,DK:a,PRF:o,PRFSalt:c}=qfe(t,e,r,n);let u;const l=new Uint8Array(4),f=Ig(l),d=new Uint8Array(o.outputLen);for(let h=1,m=0;m<s;h++,m+=o.outputLen){const p=a.subarray(m,m+o.outputLen);f.setInt32(0,h,!1),(u=c._cloneInto(u)).update(l).digestInto(d),p.set(d.subarray(0,p.length));for(let g=1;g<i;g++){o._cloneInto(u).update(d).digestInto(d);for(let v=0;v<p.length;v++)p[v]^=d[v]}}return zfe(o,c,a,u,d)}async function Hfe(t,e,r,n){const{c:i,dkLen:s,asyncTick:a,DK:o,PRF:c,PRFSalt:u}=qfe(t,e,r,n);let l;const f=new Uint8Array(4),d=Ig(f),h=new Uint8Array(c.outputLen);for(let m=1,p=0;p<s;m++,p+=c.outputLen){const g=o.subarray(p,p+c.outputLen);d.setInt32(0,m,!1),(l=u._cloneInto(l)).update(f).digestInto(h),g.set(h.subarray(0,g.length)),await eLe(i-1,a,()=>{c._cloneInto(l).update(h).digestInto(h);for(let v=0;v<g.length;v++)g[v]^=h[v]})}return zfe(c,u,o,l,h)}const Km=new Uint32Array([1732584193,4023233417,2562383102,271733878,3285377520]),af=new Uint32Array(80);class $ot extends gB{constructor(){super(64,20,8,!1),this.A=Km[0]|0,this.B=Km[1]|0,this.C=Km[2]|0,this.D=Km[3]|0,this.E=Km[4]|0}get(){const{A:e,B:r,C:n,D:i,E:s}=this;return[e,r,n,i,s]}set(e,r,n,i,s){this.A=e|0,this.B=r|0,this.C=n|0,this.D=i|0,this.E=s|0}process(e,r){for(let c=0;c<16;c++,r+=4)af[c]=e.getUint32(r,!1);for(let c=16;c<80;c++)af[c]=IS(af[c-3]^af[c-8]^af[c-14]^af[c-16],1);let{A:n,B:i,C:s,D:a,E:o}=this;for(let c=0;c<80;c++){let u,l;c<20?(u=Bae(i,s,a),l=1518500249):c<40?(u=i^s^a,l=1859775393):c<60?(u=Dae(i,s,a),l=2400959708):(u=i^s^a,l=3395469782);const f=IS(n,5)+u+o+l+af[c]|0;o=a,a=s,s=IS(i,30),i=n,n=f}n=n+this.A|0,i=i+this.B|0,s=s+this.C|0,a=a+this.D|0,o=o+this.E|0,this.set(n,i,s,a,o)}roundClean(){af.fill(0)}destroy(){this.set(0,0,0,0,0),this.buffer.fill(0)}}const Uot=mB(()=>new $ot),DX={sha1:Uot,"sha2-256":$f,"sha2-512":h5};function MX(t,e,r,n,i){if(i!=="sha1"&&i!=="sha2-256"&&i!=="sha2-512"){const o=Object.keys(DX).join(" / ");throw new Ze(`Hash '${i}' is unknown or not supported. Must be ${o}`)}const s=DX[i],a=Lot(s,t,e,{c:r,dkLen:n});return ko.encode(a).substring(1)}class jot{verrou;_cacheSuivi;_cacheRecherche;constructor(){this.verrou=new Io,this._cacheSuivi={},this._cacheRecherche={}}async suivre({adresseFonction:e,idClient:r,fOriginale:n,args:i,ceciOriginal:s}){const a=Object.entries(i).find(d=>typeof d[1]=="function")?.[0];if(!a)throw new Error("Aucun argument n'est une fonction.");const o=i[a],c=Object.fromEntries(Object.entries(i).filter(d=>typeof d[1]!="function"));if(Object.keys(i).length!==Object.keys(c).length+1)throw new Error("Plus d'un argument pour "+e+" est une fonction : "+JSON.stringify(i));const u=this.gnrerCodeCache({adresseFonction:e,idClient:r,argsClefs:c}),l=ti();if(await this.verrou.acquire(u),this._cacheSuivi[u])this.verrou.release(u),this._cacheSuivi[u].requtes[l]=o,Object.keys(this._cacheSuivi[u]).includes("val")&&o(this._cacheSuivi[u].val);else{this._cacheSuivi[u]={requtes:{[l]:o}};try{const d=async p=>{if(!this._cacheSuivi[u]||Object.keys(this._cacheSuivi[u]).includes("val")&&k8(this._cacheSuivi[u].val,p,{strict:!0}))return;this._cacheSuivi[u].val=p;const g=Object.values(this._cacheSuivi[u].requtes);await Promise.allSettled(g.map(v=>v(p)))},h={...c,[a]:d},m=await n.apply(s,[h]);this._cacheSuivi[u].fOublier=m}finally{this.verrou.release(u)}}return async()=>{await this.oublierSuivi({codeCache:u,idRequte:l})}}async suivreRecherche({adresseFonction:e,nomArgTaille:r,idClient:n,fOriginale:i,args:s,ceciOriginal:a,par:o}){const c=Object.entries(s).find(y=>typeof y[1]=="function")?.[0];if(!c)throw new Error("Aucun argument n'est une fonction.");const u=s[c],l=Object.fromEntries(Object.entries(s).filter(y=>typeof y[1]!="function"));if(Object.keys(s).length!==Object.keys(l).length+1)throw new Error("Plus d'un argument pour "+e+" est une fonction : "+JSON.stringify(s));const f=Object.fromEntries(Object.entries(s).filter(y=>y[0]!==r));let d=s[r];if(d===void 0&&(d=1/0),typeof d!="number")throw new Error(`Argument ${r} n'est pas un nombre dans la fonction ${e}.`);const h=this.gnrerCodeCache({adresseFonction:e,idClient:n,argsClefs:f}),m=ti();await this.verrou.acquire(h);const p=y=>{if(!this._cacheRecherche[h])return;this._cacheRecherche[h].val=y;const b=Object.values(this._cacheRecherche[h].requtes);o==="profondeur"?b.forEach(_=>_.f(y.filter(x=>x.profondeur<=_.taille))):b.forEach(_=>_.f(y.slice(0,_.taille)))};try{if(this._cacheRecherche[h]){if(this._cacheRecherche[h].requtes[m]={f:u,taille:d},Object.keys(this._cacheRecherche[h]).includes("val")){const{val:y}=this._cacheRecherche[h];y&&p(y)}}else{this._cacheRecherche[h]={requtes:{[m]:{f:u,taille:d}},taillePrsente:d};const y={...f,[c]:p,[r]:d};if(o==="profondeur"){const{fOublier:b,fChangerProfondeur:_}=await i.apply(a,[y]);this._cacheRecherche[h].fs={fOublier:b,fChangerTaille:_}}else{const{fOublier:b,fChangerN:_}=await i.apply(a,[y]);this._cacheRecherche[h].fs={fOublier:b,fChangerTaille:_}}}}finally{this.verrou.release(h)}const g=async()=>{await this.oublierRecherche({codeCache:h,idRequte:m})},v=y=>{const b=this._cacheRecherche[h].requtes[m].taille;if(y===b)return;this._cacheRecherche[h].requtes[m].taille=y;const{val:_}=this._cacheRecherche[h];_&&p(_);const x=Math.max(...Object.values(this._cacheRecherche[h].requtes).map(B=>B.taille)),{taillePrsente:E}=this._cacheRecherche[h],{fChangerTaille:k}=this._cacheRecherche[h].fs;x!==E&&(this._cacheRecherche[h].taillePrsente=x,k(x))};return{fOublier:g,[o==="profondeur"?"fChangerProfondeur":"fChangerN"]:v}}async oublierSuivi({codeCache:e,idRequte:r}){if(await this.verrou.acquire(e),this._cacheSuivi[e]===void 0){this.verrou.release(e);return}const{requtes:n,fOublier:i}=this._cacheSuivi[e];delete n[r],Object.keys(n).length||(await i?.(),delete this._cacheSuivi[e]),this.verrou.release(e)}async oublierRecherche({codeCache:e,idRequte:r}){if(await this.verrou.acquire(e),this._cacheRecherche[e]===void 0)return;const{requtes:n,fs:i}=this._cacheRecherche[e];delete n[r],Object.keys(n).length||(await i?.fOublier(),delete this._cacheRecherche[e]),this.verrou.release(e)}gnrerCodeCache({adresseFonction:e,idClient:r,argsClefs:n}){const i=e+"-"+r+"-"+JSON.stringify(n);return Wv.stringify(Q5(i))}}const je=(t,e,r)=>cM({nom:e,descripteur:r}),yt=(t,e,r)=>cM({nom:e,descripteur:r,recherche:"nRsultats"}),Wfe=(t,e,r)=>cM({nom:e,descripteur:r,recherche:"profondeur"}),cM=({nom:t,descripteur:e,recherche:r,nomArgTaille:n})=>{const i=e.value;if(typeof i=="function")e.value=function(...s){if(s.length>1)throw new Error("Args trop longs");const a=this.client?this.client:this;try{return r?(n=n||(r==="profondeur"?"profondeur":"nRsultatsDsirs"),NX.suivreRecherche({adresseFonction:this.constructor.name+"."+t,idClient:a.idCompte,fOriginale:i,args:s[0],ceciOriginal:this,par:r,nomArgTaille:n})):NX.suivre({adresseFonction:this.constructor.name+"."+t,idClient:a.idCompte,fOriginale:i,args:s[0],ceciOriginal:this})}catch(o){throw console.error(`Erreur: ${o}`),o}};else throw new Error("L'objet dcor n'est pas une fonction");return e},NX=new jot;class Gfe{client;clef;typeBd;constructor({client:e,clef:r,typeBd:n}){this.client=e,this.clef=r,this.typeBd=n}async obtIdBd(){const{idCompte:e}=await this.client.attendreInitialise(),r=await this.client.obtIdBd({nom:this.clef,racine:e,type:this.typeBd});if(!r)throw new Error("Mal initialis");return r}}class zu extends Gfe{schmaBdPrincipale;constructor({client:e,clef:r,schmaBdPrincipale:n}){super({client:e,clef:r,typeBd:"keyvalue"}),this.schmaBdPrincipale=n}async obtBd(){const e=await this.obtIdBd();return await this.client.ouvrirBdType({id:e,type:"keyvalue",schma:this.schmaBdPrincipale})}async suivreBdPrincipale({idCompte:e,f:r}){return await Fn({fRacine:async({fSuivreRacine:n})=>await this.suivreIdBd({f:n,idCompte:e}),f:Kn(r),fSuivre:async({id:n,fSuivreBd:i})=>await this.client.suivreBdDic({id:n,schma:this.schmaBdPrincipale,f:i})})}async suivreSousBdDic({idCompte:e,clef:r,schma:n,f:i}){return await Fn({fRacine:async({fSuivreRacine:s})=>await this.suivreIdBd({f:s,idCompte:e}),f:Kn(i),fSuivre:async({id:s,fSuivreBd:a})=>await this.client.suivreBdDicDeClef({id:s,clef:r,schma:n,f:a})})}async suivreSousBdListe({idCompte:e,clef:r,schma:n,f:i}){return await Fn({fRacine:async({fSuivreRacine:s})=>await this.suivreIdBd({f:s,idCompte:e}),f:Kn(i),fSuivre:async({id:s,fSuivreBd:a})=>await this.client.suivreBdListeDeClef({id:s,clef:r,f:a,schma:n,renvoyerValeur:!0})})}async suivreIdBd({f:e,idCompte:r}){return await Fn({fRacine:async({fSuivreRacine:n})=>r?(await n(r),kn):await this.client.suivreIdCompte({f:n}),f:Kn(e),fSuivre:async({id:n,fSuivreBd:i})=>await this.client.suivreBd({id:n,type:"keyvalue",f:async s=>{const a=await this.client.obtIdBd({nom:this.clef,racine:s.address,type:"keyvalue"});return await i(a)}})})}}Oe([je],zu.prototype,"suivreBdPrincipale",null);Oe([je],zu.prototype,"suivreSousBdDic",null);Oe([je],zu.prototype,"suivreSousBdListe",null);Oe([je],zu.prototype,"suivreIdBd",null);class F0 extends Gfe{schmaBdPrincipale;constructor({client:e,clef:r,schmaBdPrincipale:n}){super({client:e,clef:r,typeBd:"set"}),this.schmaBdPrincipale=n}async obtBd(){const e=await this.obtIdBd();return await this.client.ouvrirBdType({id:e,type:"set",schma:this.schmaBdPrincipale})}async suivreBdPrincipale({idCompte:e,f:r}){return await Fn({fRacine:async({fSuivreRacine:n})=>await this.suivreIdBd({f:n,idCompte:e}),f:Kn(r),fSuivre:async({id:n,fSuivreBd:i})=>await this.client.suivreBdListe({id:n,f:i,schma:this.schmaBdPrincipale,renvoyerValeur:!0})})}async suivreIdBd({f:e,idCompte:r}){return await Fn({fRacine:async({fSuivreRacine:n})=>r?(await n(r),kn):await this.client.suivreIdCompte({f:n}),f:Kn(e),fSuivre:async({id:n,fSuivreBd:i})=>await this.client.suivreBd({id:n,type:"keyvalue",schma:Yd,f:async()=>{const s=await this.client.obtIdBd({nom:this.clef,racine:n,type:"set"});return await i(s)}})})}}Oe([je],F0.prototype,"suivreBdPrincipale",null);Oe([je],F0.prototype,"suivreIdBd",null);const Vot=t=>JSON.parse(JSON.stringify(t)),qg=t=>typeof t=="object"&&!Array.isArray(t),y6=t=>Array.isArray(t),qot=(t,e)=>{let r;if(!e.length)return r=qg(t)?Object.values(t):t,{base:{},branches:r};const n=b6(t,e.slice(0,e.length-1)),i=e[e.length-1];let s;if(typeof i=="number")if(y6(n)){const a=n[i];if(typeof a!="object")throw new Error(a.toString());s=a,delete n[i]}else throw new Error(`${i} ne peut pas indexer une liste.`);else if(typeof i=="string")if(qg(n)){const a=n[i];if(typeof a!="object")throw new Error(a.toString());s=a,delete n[i]}else throw new Error(`${i} ne peut pas indexer un objet.`);else throw new Error(`${i} n'est pas une clef valide.`);if(qg(s))r=Object.values(s);else if(y6(s))r=s;else throw Error(JSON.stringify(s));return{base:t,branches:r}},zot=(t,e,r)=>{if(!e.length)Object.assign(t,r);else{const n=e.slice(1,e.length),i=b6(t,n),s=e[e.length-1];if(typeof s=="number")if(y6(i))i[s]=r;else throw new Error(`${s} ne peut pas indexer une liste.`);else if(typeof s=="string")if(qg(i))i[s]=r;else throw new Error(`${s} ne peut pas indexer un objet.`);else throw new Error(`${s} n'est pas une clef valide.`)}},Kfe=(t,e=[],r,n=[])=>{e[e.length-1]!==-1&&e.push(-1);const i=e.indexOf(-1),s=e.slice(0,i),a=e.slice(i+1,e.length),{base:o,branches:c}=qot(t,s);for(const u of c){if(typeof u!="object")throw new Error(u.toString());const l=Vot(o);zot(l,s,u),a.length?Kfe(u,a,l,n):n.push(l)}return n},b6=(t,e)=>{let r=t;for(const n of e)if(typeof n=="number")if(y6(r))r=r[n];else throw new Error(`${n} ne peut pas indexer une liste.`);else if(typeof n=="string")if(qg(r))r=r[n];else throw new Error(`${n} ne peut pas indexer un objet.`);else throw new Error(`Clef de type non indexable: ${n}`);return r};class FX{donnesJSON;constructor(e){this.donnesJSON=e}obtDonnes(e,r,n){let i=[],s=b6(this.donnesJSON,e);if(typeof s!="object")throw new Error(`Type de donnes erron: ${s.toString()}`);s=Kfe(s,r);for(const a of s){if(typeof a!="object")throw new Error(`lment de type non support: ${a}`);i=[Object.fromEntries(Object.keys(n).map(c=>{const u=n[c];let l;try{l=b6(a,u)}catch{l=void 0}return[c,l]}).filter(c=>c[1]!==void 0)),...i]}return i}}class LX{doc;constructor(e){this.doc=e}obtNomsTableaux(){return this.doc.SheetNames}obtColsTableau(e){const r=this.doc.Sheets[e];return(xa.sheet_to_json(r,{header:1})[0]||[]).map(i=>i.toString())}obtDonnes(e,r){const n=this.doc.Sheets[e],i=xa.sheet_to_json(n);if(Array.isArray(r))return i.map(s=>Object.fromEntries(Object.keys(s).filter(a=>r.includes(a)).map(a=>[a,s[a]])));{const s=Object.fromEntries(Object.entries(r).map(([a,o])=>[o,a]));return i.map(a=>Object.fromEntries(Object.keys(a).filter(o=>Object.keys(s).includes(o)).map(o=>[s[o],a[o]])))}}}(gi||vi)&&(qt(()=>Promise.resolve().then(()=>Is),void 0).then(t=>Mqe(t)),qt(()=>Promise.resolve().then(()=>sfe),void 0).then(t=>Rtt.set_readable(t.Readable)));const Xfe="L'automatisation de l'importation des fichiers locaux n'est pas disponible sur la version apli internet de Constellation.",Hot={type:"object",additionalProperties:{type:"object",anyOf:[{type:"object",properties:{type:{type:"string"},id:{type:"string"},frquence:{type:"object",properties:{type:{type:"string"},dtails:{type:"object",properties:{n:{type:"number"},units:{type:"string"}},nullable:!0}}},idObjet:{type:"string"},typeObjet:{type:"string"},formatDoc:{type:"string"},dossier:{type:"string",nullable:!0},langues:{type:"array",items:{type:"string"},nullable:!0},dispositifs:{type:"array",items:{type:"string"}},inclureDocuments:{type:"boolean"},nRsultatsDsirsNue:{type:"integer",nullable:!0}},required:["type","idObjet","typeObjet","formatDoc","dispositifs","frquence","inclureDocuments"]},{type:"object",properties:{id:{type:"string"},frquence:{type:"object",properties:{type:{type:"string"},dtails:{type:"object",properties:{n:{type:"number"},units:{type:"string"}},nullable:!0}}},idTableau:{type:"string"},dispositif:{type:"string"},source:{type:"object",properties:{typeSource:{type:"string"},adresseFichier:{type:"string",nullable:!0},info:{type:"object",additionalProperties:!0,required:[]}},required:["info","typeSource"]},conversions:{type:"object",nullable:!0,additionalProperties:!0,required:[]}},required:["id","idTableau","dispositif","source"]}],required:["id","type"]},required:[]},iP=t=>{const{n:e,units:r}=t.dtails;switch(r){case"annes":return e*365.25*24*60*60*1e3;case"mois":return e*30*24*60*60*1e3;case"semaines":return e*7*24*60*60*1e3;case"jours":return e*24*60*60*1e3;case"heures":return e*60*60*1e3;case"minutes":return e*60*1e3;case"secondes":return e*1e3;case"millisecondes":return e;default:throw new Error(r)}},Wot=(t,e)=>async()=>{const r=await qt(()=>import("./os-DT2P2GgO.js"),[]),n=await qt(()=>Promise.resolve().then(()=>py),void 0),i=await qt(()=>Promise.resolve().then(()=>Is),void 0),s=t.dossier?await e.automatisations.rsoudreAdressePriveFichier({clef:t.dossier}):n.join(r.homedir(),"constellation");if(!s)throw new Error("Dossier introuvable");let a;const o=l=>{const f=l.split(".");return`${f[0]}-${Date.now()}.${f[1]}`};switch(t.typeObjet){case"tableau":{const l=await e.tableaux.exporterDonnes({idTableau:t.idObjet,langues:t.langues});a=l.nomFichier,t.copies&&(a=o(a)),await e.bds.documentDonnesFichier({donnes:l,formatDoc:t.formatDoc,dossier:s,inclureDocuments:t.inclureDocuments});break}case"bd":{const l=await e.bds.exporterDonnes({idBd:t.idObjet,langues:t.langues});a=l.nomFichier,t.copies&&(a=o(a)),await e.bds.documentDonnesFichier({donnes:l,formatDoc:t.formatDoc,dossier:s,inclureDocuments:t.inclureDocuments});break}case"projet":{const l=await e.projets.exporterDonnes({idProjet:t.idObjet,langues:t.langues});a=l.nomFichier,t.copies&&(a=o(a)),await e.projets.documentDonnesFichier({donnes:l,formatDoc:t.formatDoc,dossier:s,inclureDocuments:t.inclureDocuments});break}case"nue":{const l=await e.nues.exporterDonnesNue({idNue:t.idObjet,langues:t.langues,nRsultatsDsirs:t.nRsultatsDsirsNue||1e3,hritage:t.hritage});a=l.nomFichier,t.copies&&(a=o(a)),await e.bds.documentDonnesFichier({donnes:l,formatDoc:t.formatDoc,dossier:s,inclureDocuments:t.inclureDocuments});break}default:throw new Error(t.typeObjet)}const c=i.readdirSync(s).filter(l=>{try{return i.statSync(l).isFile()&&u(n.basename(l),a)}catch{return!1}}),u=(l,f)=>{const d=l.split(".").pop()||"";return`${l.slice(0,-(d?.length+1)).split("-").slice(0,-1).join("")}.${d}`===f};if(t.copies){if(t.copies.type==="n"){const l=t.copies.n-c.length;l>0&&c.map(m=>({temps:new Date(i.statSync(m).mtime).valueOf(),fichier:m})).sort((m,p)=>m.temps>p.temps?1:-1).slice(l).map(m=>m.fichier).forEach(m=>i.rmSync(m))}else if(t.copies.type==="temps"){const l=Date.now(),{temps:f}=t.copies;c.filter(h=>{const m=new Date(i.statSync(h).mtime).valueOf();return l-m<iP(f)}).forEach(h=>i.rmSync(h))}}},Got=(t,e)=>{switch(t.type){case"importation":return async()=>{const r=async a=>await e.automatisations.rsoudreAdressePriveFichier({clef:a})||void 0,n=await e.automatisations.obtDonnesImportation(t,r),i=await qt(()=>Promise.resolve().then(()=>py),void 0);let s;if(t.source.typeSource==="fichier"&&t.source.adresseFichier){const a=await r(t.source.adresseFichier);a&&(s=i.dirname(a))}await e.tableaux.importerDonnes({idTableau:t.idTableau,donnes:n,conversions:t.conversions,cheminBaseFichiers:s})};case"exportation":return Wot(t,e);default:throw new Error(t)}},Kot=async({spc:t,idSpc:e,client:r,ftat:n})=>{const i=Got(t,r),s=`auto: ${e}`,a=t.frquence?.type==="fixe"?iP(t.frquence):void 0,o=new Io;let c="";const u=await r.obtDeStockageLocal({clef:s}),l=new Set([u]),f=async h=>{if(l.has(h))return;if(c=h,await o.acquire("opration"),h!==c||l.has(h)){o.release("opration");return}await r.sauvegarderAuStockageLocal({clef:s,val:h}),l.add(h);const m={type:"sync",depuis:new Date().getTime()};n(m);try{if(await i(),a){const p={type:"programme",:Date.now()+a};n(p)}else n({type:"coute"})}catch(p){const g={type:"erreur",erreur:JSON.stringify({nom:p.name,message:p.message,pile:p.stack,cause:p.cause},void 0,2),prochaineProgramme:a?Date.now()+a:void 0};n(g)}o.release("opration")},d=async()=>await f(ti());if(t.frquence.type==="fixe"){const h={},m=async()=>{const k=new Date().getTime();await f(k.toString());const B=setTimeout(m,a);h.f=async()=>clearTimeout(B)},p=new Date().getTime(),g=await r.obtDeStockageLocal({clef:s}),v=g?parseInt(g):-1/0,y=p-v,b=Math.max(iP(t.frquence)-y,0),_={type:"programme",:Date.now()+b};n(_);const x=setTimeout(m,b);return h.f=async()=>clearTimeout(x),{fOublier:async()=>{h.f&&await h.f()},fLancer:d}}else if(t.frquence.type==="dynamique")switch(n({type:"coute"}),t.type){case"exportation":return t.typeObjet==="nue"?{fOublier:await r.nues.suivreEmpreinteTtesBdsNue({idNue:t.idObjet,f}),fLancer:d}:{fOublier:await r.suivreEmpreinteTtesBdRcursive({idBd:t.idObjet,f}),fLancer:d};case"importation":switch(t.source.typeSource){case"fichier":{if(!vi&&!gi)throw new Error(Xfe);const m=await qt(()=>import("chokidar"),[]),p=await qt(()=>Promise.resolve().then(()=>Is),void 0),{adresseFichier:g}=t.source,v=await r.automatisations.rsoudreAdressePriveFichier({clef:g});if(!v||!p.existsSync(v))throw new Error(`Fichier ${g} introuvable.`);const y=m.watch(v),b=async()=>{const B=new Date().getTime().toString();f(B)};y.on("change",b);const _=p.statSync(v).mtime.getTime(),x=await r.obtDeStockageLocal({clef:s});if(x?_>parseInt(x):!0){const B=new Date().getTime().toString();f(B)}return{fOublier:async()=>(y.off("change",b),await y.close()),fLancer:d}}case"url":return n({type:"erreur",erreur:"La frquence d'une automatisation d'importation d'URL doit tre spcifie.",prochaineProgramme:void 0}),{fOublier:kn,fLancer:kn};default:throw new Error(t.source)}default:throw new Error(t)}else{if(t.frquence.type==="manuelle")return{fOublier:kn,fLancer:d};throw new Error(t.frquence)}};class Xot extends Ns.EventEmitter{client;vnements;tat;fOublier;fLancer;constructor({spc:e,idSpc:r,client:n}){super(),this.client=n,this.vnements=new om.TypedEmitter,this.initialiser({spc:e,idSpc:r})}async initialiser({spc:e,idSpc:r}){const{fOublier:n,fLancer:i}=await Kot({spc:e,idSpc:r,client:this.client,ftat:s=>{this.tat=s,this.emit("misJour")}});this.fOublier=n,this.fLancer=i,this.vnements.emit("initialise",{fOublier:n,fLancer:i})}async initialise(){return this.fOublier&&this.fLancer?{fLancer:this.fLancer,fOublier:this.fOublier}:new Promise(e=>this.vnements.once("initialise",e))}async relancer(){const{fLancer:e}=await this.initialise();await e()}async fermer(){const{fOublier:e}=await this.initialise();await e()}}const Yot=(t,e)=>{switch(t.type){case"importation":return t.dispositif===e;case"exportation":return t.dispositifs.includes(e);default:throw new Error(t)}},$X=new Io;class Zot extends zu{automatisations;vnements;fOublier;constructor({client:e}){super({client:e,clef:"automatisations",schmaBdPrincipale:Hot}),this.automatisations={},this.vnements=new om.TypedEmitter}async initialiser(){return this.fOublier=await this.suivreBdPrincipale({f:e=>this.mettreAutosJour(Object.values(e))}),this.vnements.emit("initialise",{fOublier:this.fOublier}),this.fOublier}async initialise(){return this.fOublier?{fOublier:this.fOublier}:new Promise(e=>this.vnements.once("initialise",e))}async mettreAutosJour(e){await $X.acquire("miseJour");const r=Object.keys(this.automatisations);for(const i of r)e.find(s=>s.id===i)||await this.fermerAuto(i);const n=await this.client.obtIdDispositif();for(const i of e)if(Yot(i,n)){if(!Object.keys(this.automatisations).includes(i.id)){const s=new Xot({spc:i,idSpc:i.id,client:this.client}),a=()=>this.vnements.emit("misJour");s.on("misJour",a),this.automatisations[i.id]={auto:s,fOublier:()=>s.off("misJour",a)}}}else this.automatisations[i.id]&&await this.fermerAuto(i.id);$X.release("miseJour")}async obtDonnesImportation(e,r=async n=>n){const{typeSource:n}=e.source,{formatDonnes:i}=e.source.info;switch(n){case"url":{const{url:s}=e.source;switch(i){case"json":{const{clefsRacine:a,clefslments:o,cols:c}=e.source.info,u=await Ott(s);return new FX(u).obtDonnes(a,o,c)}case"feuilleCalcul":{const{nomTableau:a,cols:o,optionsXLSX:c}=e.source.info,u=await Btt(s,c);return new LX(u).obtDonnes(a,o)}default:throw new Error(i)}}case"fichier":{if(!gi&&!vi)throw new Error(Xfe);const s=await qt(()=>Promise.resolve().then(()=>Is),void 0),{adresseFichier:a}=e.source,o=await r(a);if(!o||!s.existsSync(o))throw new Error(`Fichier ${o} introuvable.`);switch(i){case"json":{const{clefsRacine:c,clefslments:u,cols:l}=e.source.info,f=await s.promises.readFile(o),d=JSON.parse(f.toString());return new FX(d).obtDonnes(c,u,l)}case"feuilleCalcul":{const{nomTableau:c,cols:u}=e.source.info,l=ftt(o);return new LX(l).obtDonnes(c,u)}default:throw new Error(i)}}default:throw new Error(n)}}async ajouterAutomatisationExporter({id:e,typeObjet:r,formatDoc:n,inclureDocuments:i,dossier:s,langues:a,frquence:o,dispositifs:c,nRsultatsDsirsNue:u,hritage:l,copies:f}){const{orbite:d}=await this.client.attendreSfipEtOrbite();c=c||[d.identity.id];const h=ti(),m=await this.sauvegarderAdressePriveFichier({fichier:s}),p={type:"exportation",id:h,idObjet:e,typeObjet:r,dispositifs:c,frquence:o,formatDoc:n,langues:a,inclureDocuments:i,dossier:m,nRsultatsDsirsNue:u,hritage:l,copies:f};Object.keys(p).forEach(y=>{p[y]===void 0&&delete p[y]});const{bd:g,fOublier:v}=await this.obtBd();return await g.put(h,p),await v(),h}async ajouterAutomatisationImporter({idTableau:e,source:r,frquence:n,dispositif:i}){const{bd:s,fOublier:a}=await this.obtBd(),{orbite:o}=await this.client.attendreSfipEtOrbite();i=i||o.identity.id;const c=ti();r.typeSource==="fichier"&&(r.adresseFichier=await this.sauvegarderAdressePriveFichier({fichier:r.adresseFichier}));const u={type:"importation",id:c,idTableau:e,dispositif:i,frquence:n,source:r};return Object.keys(u).forEach(l=>{u[l]===void 0&&delete u[l]}),await s.put(c,u),await a(),c}async annulerAutomatisation({id:e}){const{bd:r,fOublier:n}=await this.obtBd();await r.del(e),await n()}async modifierAutomatisation({id:e,automatisation:r}){const{bd:n,fOublier:i}=await this.obtBd();n.put(e,r),await i()}async rsoudreAdressePriveFichier({clef:e}){return e?await this.client.obtDeStockageLocal({clef:e}):null}async sauvegarderAdressePriveFichier({fichier:e}){const r="dossier."+ti();return await this.client.sauvegarderAuStockageLocal({clef:r,val:e}),r}async suivreAutomatisations({f:e,idCompte:r}){const n=async i=>{const s=await Promise.all(Object.values(i).map(async a=>{const o=qp(a);if(o.type==="importation"&&o.source.typeSource==="fichier"){const{adresseFichier:c}=o.source;if(c){const u=await this.rsoudreAdressePriveFichier({clef:c});u?o.source.adresseFichier=u:delete o.source.adresseFichier}}else if(o.type==="exportation"){const{dossier:c}=o;if(c){const u=await this.rsoudreAdressePriveFichier({clef:c});u?o.dossier=u:delete o.dossier}}return o}));await e(s)};return await this.suivreBdPrincipale({idCompte:r,f:n})}async suivretatAutomatisations({f:e}){const r=async()=>{const n=Object.fromEntries(Object.keys(this.automatisations).map(i=>[i,this.automatisations[i].auto.tat]).filter(i=>i[1]));await e(n)};return this.vnements.on("misJour",r),await r(),async()=>{this.vnements.off("misJour",r)}}async lancerManuellement({id:e}){await this.automatisations[e]?.auto.relancer()}async fermerAuto(e){await this.automatisations[e]?.auto.fermer(),this.automatisations[e]?.fOublier(),delete this.automatisations[e]}async fermer(){const{fOublier:e}=await this.initialise();await e(),await Promise.allSettled(Object.keys(this.automatisations).map(r=>{this.fermerAuto(r)}))}}function Jot(t){return t[Symbol.asyncIterator]!=null}function Yfe(t){if(Jot(t))return(async()=>{let n=new Uint8Array(0);for await(const i of t)n=qn([n,i],n.length+i.length);return n})();const e=[];let r=0;for(const n of t)e.push(n),r+=n.byteLength;return qn(e,r)}var I3={exports:{}},Qot=I3.exports,UX;function ect(){return UX||(UX=1,function(t,e){(function(r,n){n()})(Qot,function(){function r(u,l){return typeof l>"u"?l={autoBom:!1}:typeof l!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),l={autoBom:!l}),l.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(u.type)?new Blob(["\uFEFF",u],{type:u.type}):u}function n(u,l,f){var d=new XMLHttpRequest;d.open("GET",u),d.responseType="blob",d.onload=function(){c(d.response,l,f)},d.onerror=function(){console.error("could not download file")},d.send()}function i(u){var l=new XMLHttpRequest;l.open("HEAD",u,!1);try{l.send()}catch{}return 200<=l.status&&299>=l.status}function s(u){try{u.dispatchEvent(new MouseEvent("click"))}catch{var l=document.createEvent("MouseEvents");l.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),u.dispatchEvent(l)}}var a=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof Ut=="object"&&Ut.global===Ut?Ut:void 0,o=a.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),c=a.saveAs||(typeof window!="object"||window!==a?function(){}:"download"in HTMLAnchorElement.prototype&&!o?function(u,l,f){var d=a.URL||a.webkitURL,h=document.createElement("a");l=l||u.name||"download",h.download=l,h.rel="noopener",typeof u=="string"?(h.href=u,h.origin===location.origin?s(h):i(h.href)?n(u,l,f):s(h,h.target="_blank")):(h.href=d.createObjectURL(u),setTimeout(function(){d.revokeObjectURL(h.href)},4e4),setTimeout(function(){s(h)},0))}:"msSaveOrOpenBlob"in navigator?function(u,l,f){if(l=l||u.name||"download",typeof u!="string")navigator.msSaveOrOpenBlob(r(u,f),l);else if(i(u))n(u,l,f);else{var d=document.createElement("a");d.href=u,d.target="_blank",setTimeout(function(){s(d)})}}:function(u,l,f,d){if(d=d||open("","_blank"),d&&(d.document.title=d.document.body.innerText="downloading..."),typeof u=="string")return n(u,l,f);var h=u.type==="application/octet-stream",m=/constructor/i.test(a.HTMLElement)||a.safari,p=/CriOS\/[\d]+/.test(navigator.userAgent);if((p||h&&m||o)&&typeof FileReader<"u"){var g=new FileReader;g.onloadend=function(){var b=g.result;b=p?b:b.replace(/^data:[^;]*;/,"data:attachment/file;"),d?d.location.href=b:location=b,d=null},g.readAsDataURL(u)}else{var v=a.URL||a.webkitURL,y=v.createObjectURL(u);d?d.location=y:location.href=y,d=null,setTimeout(function(){v.revokeObjectURL(y)},4e4)}});a.saveAs=c.saveAs=c,t.exports=c})}(I3)),I3.exports}var tct=ect();const rct=In(tct),vt={type:"object",additionalProperties:{type:"string"},required:[]},rl={type:"object",additionalProperties:!0,required:[]},as="TOUS",e_="INSTALL",L0=(t,e)=>{const r=qp(e);for(const[n,i]of Object.entries(t))typeof i=="string"||Array.isArray(i)?r[n]=i:r[n]=L0(i,r[n]);return r},uc={type:["string","array"],anyOf:[{type:"string"},{type:"array",items:{type:"string"}}],nullable:!0},nct={type:"object",properties:{type:{type:"string",const:"variable"},base:uc},required:["type"]},ict={type:"object",properties:{type:{type:"string",const:"motClef"},base:uc},required:["type"]},lM={type:"object",properties:{type:{type:"string",const:"bd"},base:uc,donnes:{type:"object",properties:{fichiers:uc,tableaux:uc},required:["fichiers","tableaux"]}},required:["type","base","donnes"]},sct={type:"object",properties:{type:{type:"string",const:"nue"},base:uc,donnes:lM},required:["type","base","donnes"]},act={type:"object",properties:{type:{type:"string",const:"projet"},base:uc,bds:lM},required:["type","base","bds"]},Zfe={type:"object",properties:{type:{type:"string",const:"profil"},base:uc,fichiers:uc},required:["type","base","fichiers"]},oct={type:"object",properties:{type:{type:"string",const:"compte"},base:uc,profil:Zfe,favoris:uc},required:["type","base","favoris","profil"]},cct={anyOf:[nct,ict,lM,sct,act,oct,Zfe]},lct={type:"object",additionalProperties:cct,required:[]};class t_ extends zu{fOublier;vnements;constructor({client:e}){super({client:e,clef:"favoris",schmaBdPrincipale:lct}),this.vnements=new om.TypedEmitter}async initialiser(){const e=async a=>await this.client.pingles.pingler({idRequte:"favoris",pingles:new Set(a.map(o=>o.pingles).flat())}),r=async a=>await this.suivreBdPrincipale({f:o=>a(Object.entries(o).map(([c,u])=>({idObjet:c,pingle:u})))}),n=async(a,o,c)=>await this.suivreRsolutionpingle({pingle:c,f:o}),i=a=>a.idObjet,s=a=>a.idObjet;this.fOublier=await dr({fListe:r,f:e,fBranche:n,fIdBdDeBranche:i,fCode:s}),this.vnements.emit("initialise",{fOublier:this.fOublier})}async initialise(){return this.fOublier?{fOublier:this.fOublier}:new Promise(e=>this.vnements.once("initialise",e))}async suivreRsolutionpingle({pingle:e,f:r,ignorer:n}){if(n=n||new Set,n.has(e.idObjet))return kn;switch(n.add(e.idObjet),e.pingle.type){case"motClef":return await this.client.motsClefs.suivreRsolutionpingle({pingle:e,f:r});case"variable":return await this.client.variables.suivreRsolutionpingle({pingle:e,f:r});case"bd":return await this.client.bds.suivreRsolutionpingle({pingle:e,f:r});case"projet":return await this.client.projets.suivreRsolutionpingle({pingle:e,f:r});case"nue":return await this.client.nues.suivreRsolutionpingle({pingle:e,f:r});case"compte":return await this.client.suivreRsolutionpingle({pingle:e,f:r,ignorer:n});default:throw new Error(String(e))}}async suivreFavoris({f:e,idCompte:r}){const n=async i=>{const s=Object.entries(i).map(([a,o])=>({idObjet:a,pingle:o}));await e(s)};return await this.suivreBdPrincipale({idCompte:r,f:n})}async pinglerFavori({idObjet:e,pingle:r}){const{bd:n,fOublier:i}=await this.obtBd(),s=await n.get(e);k8(s,r)||await n.put(e,r),await i()}async dspinglerFavori({idObjet:e}){const{bd:r,fOublier:n}=await this.obtBd();await r.del(e),await n()}async suivretatFavori({idObjet:e,f:r,idCompte:n}){return await this.suivreBdPrincipale({f:i=>r(i[e]),idCompte:n})}async suivreEstpinglSurDispositif({idObjet:e,f:r}){return await this.suivreBdPrincipale({f:async n=>{n[e]?await r(await this.rsoudrepinglesSurDispositif({pingle:n[e]})):await r(void 0)}})}async rsoudrepinglesSurDispositif({pingle:e,idDispositif:r}){return Object.fromEntries(await Promise.all(Object.entries(e).filter(([i,s])=>i!=="type").map(async([i,s])=>Array.isArray(s)||typeof s=="string"?[i,await this.estpinglSurDispositif({dispositifs:s,idDispositif:r})]:[i,await this.rsoudrepinglesSurDispositif({pingle:s,idDispositif:r})])))}async estpinglSurDispositif({dispositifs:e,idDispositif:r}){const n=await this.client.obtIdDispositif();return r=r||n,e==="AUCUN"?!1:e==="TOUS"?!0:e==="INSTALL"?r===n?vi||gi:!1:typeof e=="string"?e===r:e.includes(r)}async fermer(){const{fOublier:e}=await this.initialise();await e()}}Oe([je],t_.prototype,"suivreFavoris",null);Oe([je],t_.prototype,"suivretatFavori",null);Oe([je],t_.prototype,"suivreEstpinglSurDispositif",null);const{saveAs:uct}=rct,Ti={type:"object",properties:{type:{type:"string"},mtadonnes:{type:"string",nullable:!0},licence:{type:"string"},licenceContenu:{type:"string",nullable:!0},image:{type:"string",nullable:!0},noms:{type:"string"},descriptions:{type:"string"},tableaux:{type:"string"},motsClefs:{type:"string"},nues:{type:"string"},statut:{type:"object",properties:{statut:{type:"string"},idNouvelle:{type:"string",nullable:!0}},required:["statut"]},copiDe:{type:"object",properties:{id:{type:"string"}},required:["id"],nullable:!0}},required:["type","licence","noms","descriptions","tableaux","motsClefs","nues","statut"]},fct={type:"object",properties:{clef:{type:"string"}},required:["clef"]},La={type:"object",additionalProperties:fct,required:[]},Cw={type:"string"},ET={type:"string"},kT={type:"string"},dct=500*1e3,hct=1500*1e3;class Wn extends F0{verrouBdUnique;constructor({client:e}){super({client:e,clef:"bds",schmaBdPrincipale:Cw}),this.verrouBdUnique=new Io}async suivreRsolutionpingle({pingle:e,f:r}){const n=await this.client.favoris.estpinglSurDispositif({dispositifs:e.pingle.base||"TOUS"}),i=await this.client.favoris.estpinglSurDispositif({dispositifs:e.pingle.donnes?.tableaux||"TOUS"}),s=await this.client.favoris.estpinglSurDispositif({dispositifs:e.pingle.donnes?.fichiers||"INSTALL"}),a={},o=async()=>await r(new Set(Object.values(a).flat().filter(u=>!!u))),c=[];if(n){const u=await this.client.suivreBd({id:e.idObjet,type:"keyvalue",schma:Ti,f:async l=>{try{const f=await l.allAsJSON();n&&(a.base=[e.idObjet,f.descriptions,f.noms,f.tableaux,f.motsClefs,f.nues,f.mtadonnes,f.image])}catch{return}await o()}});c.push(u)}if(i){const u=await this.suivreTableauxBd({idBd:e.idObjet,f:async l=>{a.donnes=l.map(f=>f.id),await o()}});c.push(u)}if(s){const u=await dr({fListe:async l=>await this.suivreTableauxBd({idBd:e.idObjet,f:f=>l(f.map(d=>d.id))}),fBranche:async(l,f)=>await this.client.tableaux.suivreDonnes({idTableau:l,f}),f:async l=>{const f=l.map(d=>Object.values(d.donnes).filter(h=>I8(h))).flat();a.fichiersDonnes=f,await o()}});c.push(u)}return async()=>{await Promise.allSettled(c.map(u=>u()))}}async suivreBds({f:e,idCompte:r}){return await this.suivreBdPrincipale({idCompte:r,f:e})}async crerBd({licence:e,licenceContenu:r,pingler:n=!0}){const i=await this.client.crerBdIndpendante({type:"keyvalue",optionsAccs:{address:void 0,write:await this.client.obtIdCompte()}});n&&await this.pinglerBd({idBd:i});const{bd:s,fOublier:a}=await this.client.ouvrirBdType({id:i,type:"keyvalue",schma:Ti});await s.set("type","bd"),await s.set("licence",e),r&&await s.set("licenceContenu",r);const c={write:s.access.address},u=await this.client.crerBdIndpendante({type:"keyvalue",optionsAccs:c});await s.set("mtadonnes",u);const l=await this.client.crerBdIndpendante({type:"keyvalue",optionsAccs:c});await s.set("noms",l);const f=await this.client.crerBdIndpendante({type:"keyvalue",optionsAccs:c});await s.set("descriptions",f);const d=await this.client.crerBdIndpendante({type:"ordered-keyvalue",optionsAccs:c});await s.set("tableaux",d);const h=await this.client.crerBdIndpendante({type:"set",optionsAccs:c});await s.set("motsClefs",h);const m=await this.client.crerBdIndpendante({type:"set",optionsAccs:c});await s.set("nues",m),await s.set("statut",{statut:"active"});const{bd:p,fOublier:g}=await this.client.ouvrirBdType({id:await this.obtIdBd(),type:"set",schma:Cw});return await p.add(i),g(),await a(),i}async ajouterMesBds({idBd:e}){const{bd:r,fOublier:n}=await this.client.ouvrirBdType({id:await this.obtIdBd(),type:"set",schma:Cw});await r.add(e),await n()}async enleverDeMesBds({idBd:e}){const{bd:r,fOublier:n}=await this.client.ouvrirBdType({id:await this.obtIdBd(),type:"set",schma:Cw});await r.del(e),await n()}async pinglerBd({idBd:e,options:r={}}){const n=L0(r,{type:"bd",base:as,donnes:{tableaux:as,fichiers:e_}});await this.client.favoris.pinglerFavori({idObjet:e,pingle:n})}async suivrepingleBd({idBd:e,f:r,idCompte:n}){return await this.client.favoris.suivretatFavori({idObjet:e,f:async i=>{i?.type==="bd"?await r(i):await r(void 0)},idCompte:n})}async copierBd({idBd:e,copierDonnes:r=!0}){const{bd:n,fOublier:i}=await this.client.ouvrirBdType({id:e,type:"keyvalue",schma:Ti}),s=await n.get("licence"),a=await n.get("licenceContenu");if(!s)throw new Error(`Aucune licence trouve sur la BD source ${e}.`);const o=await this.crerBd({licence:s,licenceContenu:a}),{bd:c,fOublier:u}=await this.client.ouvrirBdType({id:o,type:"keyvalue",schma:Ti}),l=await n.get("mtadonnes");if(l){const{bd:x,fOublier:E}=await this.client.ouvrirBdType({id:l,type:"keyvalue",schma:rl}),k=await x.allAsJSON();await E(),await this.sauvegarderMtadonnesBd({idBd:o,mtadonnes:k})}const f=await n.get("noms");if(f){const{bd:x,fOublier:E}=await this.client.ouvrirBdType({id:f,type:"keyvalue",schma:vt}),k=await x.allAsJSON();await E(),await this.sauvegarderNomsBd({idBd:o,noms:k})}const d=await n.get("descriptions");if(d){const{bd:x,fOublier:E}=await this.client.ouvrirBdType({id:d,type:"keyvalue",schma:vt}),k=await x.allAsJSON();await E(),await this.sauvegarderDescriptionsBd({idBd:o,descriptions:k})}const h=await n.get("motsClefs");if(h){const{bd:x,fOublier:E}=await this.client.ouvrirBdType({id:h,type:"set",schma:ET}),k=(await x.all()).map(B=>B.value);await E(),await this.ajouterMotsClefsBd({idBd:o,idsMotsClefs:k})}const m=await n.get("nues");if(m){const{bd:x,fOublier:E}=await this.client.ouvrirBdType({id:m,type:"set",schma:kT}),k=(await x.all()).map(B=>B.value);await E(),await this.rejoindreNues({idBd:o,idsNues:k})}const p=await n.get("tableaux"),g=await c.get("tableaux");if(!g)throw new Error("Erreur d'initialisation.");const{bd:v,fOublier:y}=await this.client.ouvrirBdType({id:g,type:"ordered-keyvalue",schma:La});if(p){const{bd:x,fOublier:E}=await this.client.ouvrirBdType({id:p,type:"ordered-keyvalue",schma:La}),k=await x.all();await E();for(const{key:B,value:D}of k){const z=await this.client.tableaux.copierTableau({id:B,idBd:o,copierDonnes:r});await v.set(z,D)}}const b=await n.get("statut")||{statut:"active"};await c.set("statut",b);const _=await n.get("image");return _&&await c.set("image",_),await c.set("copiDe",{id:e}),await Promise.allSettled([i(),y(),u()]),o}async crerBdDeSchma({schma:e}){const{tableaux:r,motsClefs:n,nues:i,licence:s,licenceContenu:a,statut:o}=e,c=await this.crerBd({licence:s,licenceContenu:a});n&&await this.ajouterMotsClefsBd({idBd:c,idsMotsClefs:n}),i&&await this.rejoindreNues({idBd:c,idsNues:i}),o&&await this.changerStatutBd({idBd:c,statut:o});for(const u of r){const{cols:l,clef:f}=u,d=await this.ajouterTableauBd({idBd:c,clefTableau:f});for(const h of l){const{idColonne:m,idVariable:p,index:g,optionnelle:v}=h;if(await this.client.tableaux.ajouterColonneTableau({idTableau:d,idVariable:p,idColonne:m}),g&&await this.client.tableaux.changerColIndex({idTableau:d,idColonne:m,val:!0}),!v){const y={typeRgle:"existe",dtails:{}};await this.client.tableaux.ajouterRgleTableau({idTableau:d,idColonne:m,rgle:y})}}}return c}async _confirmerPermission({idBd:e}){if(!await this.client.permission({idObjet:e}))throw new Error(`Permission de modification refuse pour la BD ${e}.`)}async suivreParent({idBd:e,f:r}){return await this.client.suivreBd({id:e,f:async n=>{const i=await n.get("copiDe");await r(i)},type:"keyvalue",schma:Ti})}async suivreNuesBd({idBd:e,f:r}){return await this.client.suivreBdListeDeClef({id:e,clef:"nues",schma:{type:"string"},f:r})}async rechercherBdsParMotsClefs({motsClefs:e,f:r,idCompte:n}){const i=async a=>await this.suivreBds({f:a,idCompte:n}),s=async(a,o)=>{const c=u=>{const l=e.every(f=>u.includes(f));o(l)};return await this.suivreMotsClefsBd({idBd:a,f:c})};return await this.client.suivreBdsSelonCondition({fListe:i,fCondition:s,f:r})}async rechercherBdsParNue({idNue:e,f:r,idCompte:n}){const i=async a=>await this.suivreBds({f:a,idCompte:n}),s=async(a,o)=>{const c=async u=>{o(!!u&&u.includes(e))};return await this.suivreNuesBd({idBd:a,f:c})};return await this.client.suivreBdsSelonCondition({fListe:i,fCondition:s,f:r})}async combinerBds({idBdBase:e,idBd2:r}){const n=async a=>await wr(async o=>await this.suivreTableauxBd({idBd:a,f:o}),ss(1e3)),i=await n(e),s=await n(r);for(const a of s){const{id:o,clef:c}=a;if(c){const u=i.find(l=>l.clef===c)?.id;u&&await this.client.tableaux.combinerDonnes({idTableauBase:u,idTableau2:o})}}}async suivreIdTableauParClef({idBd:e,clef:r,f:n}){const i=async s=>{const a=s.find(o=>o.clef===r);await n(a?.id)};return await this.suivreTableauxBd({idBd:e,f:i})}async suivreBdUnique({schma:e,idNueUnique:r,f:n}){const i="bdUnique: "+r,s=new Set,a=async c=>{let u;await this.verrouBdUnique.acquire(r);const l=await this.client.obtDeStockageLocal({clef:i});switch(c.length){case 0:{l?u=l:(u=await this.crerBdDeSchma({schma:e}),await this.client.sauvegarderAuStockageLocal({clef:i,val:u}));break}case 1:{u=c[0],await this.client.sauvegarderAuStockageLocal({clef:i,val:u}),l&&u!==l&&(await this.combinerBds({idBdBase:u,idBd2:l}),await this.effacerBd({idBd:l}));break}default:{l&&(c=[...new Set([...c,l])]),u=c.sort()[0],await this.client.sauvegarderAuStockageLocal({clef:i,val:u});for(const f of c.slice(1))s.has(f)||(s.add(f),await this.combinerBds({idBdBase:u,idBd2:f}),await this.effacerBd({idBd:f}));break}}this.verrouBdUnique.release(r),await n(u)};return await this.rechercherBdsParNue({idNue:r,f:a})}async suivreIdTableauParClefDeBdUnique({schmaBd:e,idNueUnique:r,clefTableau:n,f:i}){return await Fn({fRacine:async({fSuivreRacine:o})=>await this.suivreBdUnique({schma:e,idNueUnique:r,f:o}),f:i,fSuivre:async({id:o,fSuivreBd:c})=>await this.suivreIdTableauParClef({idBd:o,clef:n,f:c})})}async suivreDonnesDeTableauUnique({schmaBd:e,idNueUnique:r,clefTableau:n,f:i}){return await Fn({fRacine:async({fSuivreRacine:c})=>await this.suivreIdTableauParClefDeBdUnique({schmaBd:e,idNueUnique:r,clefTableau:n,f:async u=>{u&&await c(u)}}),f:async c=>await i(c||[]),fSuivre:async({id:c,fSuivreBd:u})=>await this.client.tableaux.suivreDonnes({idTableau:c,f:u})})}async ajouterlmentTableauUnique({schmaBd:e,idNueUnique:r,clefTableau:n,vals:i}){const s=await wr(async a=>await this.suivreIdTableauParClefDeBdUnique({schmaBd:e,idNueUnique:r,clefTableau:n,f:Kn(a)}));return await this.client.tableaux.ajouterlment({idTableau:s,vals:i})}async modifierlmentDeTableauUnique({vals:e,schmaBd:r,idNueUnique:n,clefTableau:i,idlment:s}){const a=await wr(async o=>await this.suivreIdTableauParClefDeBdUnique({schmaBd:r,idNueUnique:n,clefTableau:i,f:c=>{c&&o(c)}}),o=>!!o);return await this.client.tableaux.modifierlment({idTableau:a,vals:e,idlment:s})}async effacerlmentDeTableauUnique({schmaBd:e,idNueUnique:r,clefTableau:n,idlment:i}){const s=await wr(async a=>await this.suivreIdTableauParClefDeBdUnique({schmaBd:e,idNueUnique:r,clefTableau:n,f:o=>{o&&a(o)}}),a=>!!a);return await this.client.tableaux.effacerlment({idTableau:s,idlment:i})}async suivreDonnesDeTableauParClef({idBd:e,clefTableau:r,f:n}){const i=await wr(async s=>await this.suivreIdTableauParClef({idBd:e,clef:r,f:Kn(s)}),s=>!!s);return await this.client.tableaux.suivreDonnes({idTableau:i,f:n})}async ajouterlmentTableauParClef({idBd:e,clefTableau:r,vals:n}){const i=await wr(async s=>await this.suivreIdTableauParClef({idBd:e,clef:r,f:Kn(s)}));return await this.client.tableaux.ajouterlment({idTableau:i,vals:n})}async modifierlmentDeTableauParClef({idBd:e,clefTableau:r,idlment:n,vals:i}){const s=await wr(async a=>await this.suivreIdTableauParClef({idBd:e,clef:r,f:Kn(a)}));return await this.client.tableaux.modifierlment({idTableau:s,vals:i,idlment:n})}async effacerlmentDeTableauParClef({idBd:e,clefTableau:r,idlment:n}){const i=await wr(async s=>await this.suivreIdTableauParClef({idBd:e,clef:r,f:Kn(s)}));this.client.tableaux.effacerlment({idTableau:i,idlment:n})}async sauvegarderMtadonnesBd({idBd:e,mtadonnes:r}){await this._confirmerPermission({idBd:e});const n=await this.client.obtIdBd({nom:"mtadonnes",racine:e,type:"keyvalue"}),{bd:i,fOublier:s}=await this.client.ouvrirBdType({id:n,type:"keyvalue",schma:rl});for(const a in r)await i.set(a,r[a]);await s()}async sauvegarderMtadonneBd({idBd:e,clef:r,mtadonne:n}){await this._confirmerPermission({idBd:e});const i=await this.client.obtIdBd({nom:"mtadonnes",racine:e,type:"keyvalue"}),{bd:s,fOublier:a}=await this.client.ouvrirBdType({id:i,type:"keyvalue",schma:rl});await s.set(r,n),await a()}async effacerMtadonneBd({idBd:e,clef:r}){await this._confirmerPermission({idBd:e});const n=await this.client.obtIdBd({nom:"mtadonnes",racine:e,type:"keyvalue"}),{bd:i,fOublier:s}=await this.client.ouvrirBdType({id:n,type:"keyvalue",schma:rl});await i.del(r),await s()}async suivreMtadonnesBd({idBd:e,f:r}){return await this.client.suivreBdDicDeClef({id:e,clef:"mtadonnes",schma:rl,f:r})}async sauvegarderNomsBd({idBd:e,noms:r}){await this._confirmerPermission({idBd:e});const n=await this.client.obtIdBd({nom:"noms",racine:e,type:"keyvalue"}),{bd:i,fOublier:s}=await this.client.ouvrirBdType({id:n,type:"keyvalue",schma:vt});for(const a in r)await i.set(a,r[a]);await s()}async sauvegarderNomBd({idBd:e,langue:r,nom:n}){await this._confirmerPermission({idBd:e});const i=await this.client.obtIdBd({nom:"noms",racine:e,type:"keyvalue"}),{bd:s,fOublier:a}=await this.client.ouvrirBdType({id:i,type:"keyvalue",schma:vt});await s.set(r,n),await a()}async effacerNomBd({idBd:e,langue:r}){await this._confirmerPermission({idBd:e});const n=await this.client.obtIdBd({nom:"noms",racine:e,type:"keyvalue"}),{bd:i,fOublier:s}=await this.client.ouvrirBdType({id:n,type:"keyvalue",schma:vt});await i.del(r),await s()}async sauvegarderDescriptionsBd({idBd:e,descriptions:r}){await this._confirmerPermission({idBd:e});const n=await this.client.obtIdBd({nom:"descriptions",racine:e,type:"keyvalue"}),{bd:i,fOublier:s}=await this.client.ouvrirBdType({id:n,type:"keyvalue",schma:vt});for(const a in r)await i.set(a,r[a]);await s()}async sauvegarderDescriptionBd({idBd:e,langue:r,description:n}){await this._confirmerPermission({idBd:e});const i=await this.client.obtIdBd({nom:"descriptions",racine:e,type:"keyvalue"}),{bd:s,fOublier:a}=await this.client.ouvrirBdType({id:i,type:"keyvalue",schma:vt});await s.set(r,n),await a()}async effacerDescriptionBd({idBd:e,langue:r}){await this._confirmerPermission({idBd:e});const n=await this.client.obtIdBd({nom:"descriptions",racine:e,type:"keyvalue"}),{bd:i,fOublier:s}=await this.client.ouvrirBdType({id:n,type:"keyvalue",schma:vt});await i.del(r),await s()}async changerLicenceBd({idBd:e,licence:r}){const{bd:n,fOublier:i}=await this.client.ouvrirBdType({id:e,type:"keyvalue",schma:Ti});await n.set("licence",r),await i()}async changerLicenceContenuBd({idBd:e,licenceContenu:r}){const{bd:n,fOublier:i}=await this.client.ouvrirBdType({id:e,type:"keyvalue",schma:Ti});r?await n.set("licenceContenu",r):await n.del("licenceContenu"),await i()}async ajouterMotsClefsBd({idBd:e,idsMotsClefs:r}){await this._confirmerPermission({idBd:e}),Array.isArray(r)||(r=[r]);const n=await this.client.obtIdBd({nom:"motsClefs",racine:e,type:"set"}),{bd:i,fOublier:s}=await this.client.ouvrirBdType({id:n,type:"set",schma:ET});for(const a of r)(await i.all()).map(c=>c.value).includes(a)||await i.add(a);await s()}async effacerMotClefBd({idBd:e,idMotClef:r}){await this._confirmerPermission({idBd:e});const n=await this.client.obtIdBd({nom:"motsClefs",racine:e,type:"set"}),{bd:i,fOublier:s}=await this.client.ouvrirBdType({id:n,type:"set",schma:ET});await i.del(r),await s()}async rejoindreNues({idBd:e,idsNues:r}){await this._confirmerPermission({idBd:e}),Array.isArray(r)||(r=[r]);const n=await this.client.obtIdBd({nom:"nues",racine:e,type:"set"}),{bd:i,fOublier:s}=await this.client.ouvrirBdType({id:n,type:"set",schma:kT});for(const a of r)(await i.all()).map(c=>c.value).includes(a)||await i.add(a);await s()}async quitterNue({idBd:e,idNue:r}){await this._confirmerPermission({idBd:e});const n=await this.client.obtIdBd({nom:"nue",racine:e,type:"set"}),{bd:i,fOublier:s}=await this.client.ouvrirBdType({id:n,type:"set",schma:kT});await i.del(r),await s()}async ajouterTableauBd({idBd:e,clefTableau:r}){await this._confirmerPermission({idBd:e});const n=await this.client.obtIdBd({nom:"tableaux",racine:e,type:"ordered-keyvalue"}),{bd:i,fOublier:s}=await this.client.ouvrirBdType({id:n,type:"ordered-keyvalue",schma:La});r=r||ti();const a=await this.client.tableaux.crerTableau({idBd:e});return await i.set(a,{clef:r}),await s(),a}async effacerTableauBd({idBd:e,idTableau:r}){await this._confirmerPermission({idBd:e});const n=await this.client.obtIdBd({nom:"tableaux",racine:e,type:"ordered-keyvalue"}),{bd:i,fOublier:s}=await this.client.ouvrirBdType({id:n,type:"ordered-keyvalue",schma:La});await i.del(r),await s(),await this.client.tableaux.effacerTableau({idTableau:r})}async spcifierClefTableau({idBd:e,idTableau:r,clef:n}){const i=await this.client.obtIdBd({nom:"tableaux",racine:e,type:"ordered-keyvalue"});if(!i)throw new Error("Id Bd Tableau non obtenable.");const{bd:s,fOublier:a}=await this.client.ouvrirBdType({id:i,type:"ordered-keyvalue",schma:La}),o=await s.get(r);o&&(o.value.clef=n,s.set(r,o.value)),await a()}async changerStatutBd({idBd:e,statut:r}){const{bd:n,fOublier:i}=await this.client.ouvrirBdType({id:e,type:"keyvalue",schma:Ti});n.set("statut",r),await i()}async suivreStatutBd({idBd:e,f:r}){return await this.client.suivreBdDic({id:e,schma:Ti,f:async n=>{if(n.statut)return await r(n.statut)}})}async marquerObsolte({idBd:e,idNouvelle:r}){const{bd:n,fOublier:i}=await this.client.ouvrirBdType({id:e,type:"keyvalue",schma:Ti});n.set("statut",{statut:"obsolte",idNouvelle:r}),await i()}async marquerActive({idBd:e}){const{bd:r,fOublier:n}=await this.client.ouvrirBdType({id:e,type:"keyvalue",schma:Ti});r.set("statut",{statut:"active"}),await n()}async marquerJouet({idBd:e}){const{bd:r,fOublier:n}=await this.client.ouvrirBdType({id:e,type:"keyvalue",schma:Ti});r.set("statut",{statut:"jouet"}),await n()}async marquerInterne({idBd:e}){const{bd:r,fOublier:n}=await this.client.ouvrirBdType({id:e,type:"keyvalue",schma:Ti});r.set("statut",{statut:"interne"}),await n()}async suivreLicenceBd({idBd:e,f:r}){return await this.client.suivreBd({id:e,type:"keyvalue",schma:Ti,f:async n=>{const i=await n.get("licence");i&&await r(i)}})}async suivreLicenceContenuBd({idBd:e,f:r}){return await this.client.suivreBd({id:e,type:"keyvalue",schma:Ti,f:async n=>{const i=await n.get("licenceContenu");await r(i)}})}async inviterAuteur({idBd:e,idCompteAuteur:r,rle:n}){await this.client.donnerAccs({idBd:e,identit:r,rle:n})}async sauvegarderImage({idBd:e,image:r}){if(r.contenu.byteLength>dct)throw new Error("Taille maximale excde");const n=await this.client.ajouterSFIP(r),{bd:i,fOublier:s}=await this.client.ouvrirBdType({id:e,type:"keyvalue",schma:Ti});await i.set("image",n),await s()}async effacerImage({idBd:e}){const{bd:r,fOublier:n}=await this.client.ouvrirBdType({id:e,type:"keyvalue",schma:Ti});await r.del("image"),await n()}async suivreImage({idBd:e,f:r}){return await this.client.suivreBd({id:e,type:"keyvalue",schma:Ti,f:async n=>{const i=await n.get("image");if(!i)await r(null);else{const s=await this.client.obtFichierSFIP({id:i,max:hct});await r(s)}}})}async suivreNomsBd({idBd:e,f:r}){return await this.client.suivreBdDicDeClef({id:e,clef:"noms",schma:vt,f:r})}async suivreDescriptionsBd({idBd:e,f:r}){return await this.client.suivreBdDicDeClef({id:e,clef:"descriptions",schma:vt,f:r})}async suivreMotsClefsBd({idBd:e,f:r}){return await this.client.suivreBdListeDeClef({id:e,clef:"motsClefs",schma:{type:"string"},f:r})}async suivreTableauxBd({idBd:e,f:r}){const n=async i=>{const s=i.map(a=>({id:a.key,...a.value}));await r(s)};return await this.client.suivreBdDicOrdonneDeClef({id:e,clef:"tableaux",schma:La,f:n})}async suivreScoreAccsBd({idBd:e,f:r}){return r(Number.parseInt(e)),kn}async suivreScoreCouvertureBd({idBd:e,f:r}){return await dr({fListe:async a=>await this.suivreTableauxBd({idBd:e,f:o=>a(o.map(c=>c.id))}),f:async a=>{const o=a.reduce((u,l)=>u+l.numrateur,0),c=a.reduce((u,l)=>u+l.dnominateur,0);await r(c===0?void 0:o/c)},fBranche:async(a,o)=>{const c={},u=async()=>{const{cols:d,rgles:h}=c;if(d!==void 0&&h!==void 0){const m=d.filter(v=>v.catgorie&&["numrique","catgorique"].includes(v.catgorie.catgorie)),p=m.length,g=m.filter(v=>h.some(y=>y.rgle.rgle.typeRgle!=="catgorie"&&y.colonne===v.id)).length;await o({numrateur:g,dnominateur:p})}},l=await this.client.tableaux.suivreColonnesEtCatgoriesTableau({idTableau:a,f:async d=>{c.cols=d,await u()}}),f=await this.client.tableaux.suivreRgles({idTableau:a,f:async d=>{c.rgles=d,await u()}});return async()=>{await l(),await f()}}})}async suivreScoreValideBd({idBd:e,f:r}){return await dr({fListe:async a=>await this.suivreTableauxBd({idBd:e,f:o=>a(o.map(c=>c.id))}),f:async a=>{const o=a.reduce((u,l)=>u+l.numrateur,0),c=a.reduce((u,l)=>u+l.dnominateur,0);await r(c===0?void 0:o/c)},fBranche:async(a,o)=>{const c={},u=()=>{const{donnes:h,erreurs:m,cols:p}=c;if(h!==void 0&&m!==void 0&&p!==void 0){const g=p.filter(x=>x.catgorie&&["numrique","catgorique"].includes(x.catgorie.catgorie)),v=[],y=m.map(x=>({id:x.id,idColonne:x.erreur.rgle.colonne})).filter(x=>v.find(k=>k.id===x.id&&k.idColonne===x.idColonne)?!1:(v.push(x),!0)).length,b=h.map(x=>g.filter(E=>x.donnes[E.id]!==void 0).length).reduce((x,E)=>x+E,0),_=b-y;o({numrateur:_,dnominateur:b})}},l=await this.client.tableaux.suivreDonnes({idTableau:a,f:h=>{c.donnes=h,u()}}),f=await this.client.tableaux.suivreValidDonnes({idTableau:a,f:h=>{c.erreurs=h,u()}}),d=await this.client.tableaux.suivreColonnesEtCatgoriesTableau({idTableau:a,f:h=>{c.cols=h,u()}});return async()=>{await l(),await f(),await d()}}})}async suivreQualitBd({idBd:e,f:r}){const n={},i=async()=>{const{accs:u,couverture:l,valide:f,licence:d}=n,h={total:d?((u||0)+(l||0)+(f||0))/3:0,accs:u,couverture:l,valide:f,licence:d};await r(h)},s=await this.suivreScoreAccsBd({idBd:e,f:async u=>{n.accs=u,await i()}}),a=await this.suivreScoreCouvertureBd({idBd:e,f:async u=>{n.couverture=u,await i()}}),o=await this.suivreScoreValideBd({idBd:e,f:async u=>{n.valide=u,await i()}}),c=await this.suivreLicenceBd({idBd:e,f:async u=>{n.licence=u?1:0,await i()}});return async()=>{await Promise.allSettled([s,a,o,c])}}async suivreVariablesBd({idBd:e,f:r}){return await dr({fListe:async a=>await this.suivreTableauxBd({idBd:e,f:o=>a(o.map(c=>c.id))}),f:async a=>await r(a||[]),fBranche:async(a,o)=>await this.client.tableaux.suivreVariables({idTableau:a,f:o})})}async suivreDonnesExportation({idBd:e,langues:r,f:n}){const i={},s=[],a=async()=>{const{nomsBd:c,donnes:u}=i;if(!u)return;const l=e.split("/").pop(),f=c&&r&&Df(c,r)||l;await n({nomBd:f,tableaux:u})},o=await dr({fListe:async c=>await this.suivreTableauxBd({idBd:e,f:c}),f:async c=>{i.donnes=c,await a()},fBranche:async(c,u)=>await this.client.tableaux.suivreDonnesExportation({idTableau:c,langues:r,f:async l=>await u(l)}),fIdBdDeBranche:c=>c.id,fCode:c=>c.id});if(s.push(o),r){const c=await this.suivreNomsBd({idBd:e,f:async u=>{i.nomsBd=u,await a()}});s.push(c)}return async()=>{await Promise.allSettled(s.map(c=>c()))}}async exporterDonnes({idBd:e,langues:r,nomFichier:n,patience:i=500}){const s=xa.book_new(),a=await wr(async c=>await this.suivreDonnesExportation({idBd:e,langues:r,f:c}),ss(i));n=n||a.nomBd;const o=new Set;for(const c of a.tableaux){c.fichiersSFIP.forEach(l=>o.add(l));const u=xa.json_to_sheet(c.donnes);xa.book_append_sheet(s,u,c.nomTableau.slice(0,30))}return{doc:s,fichiersSFIP:o,nomFichier:n}}async documentDonnesFichier({donnes:e,formatDoc:r,dossier:n="",inclureDocuments:i=!0}){const{doc:s,fichiersSFIP:a,nomFichier:o}=e,u={xls:"biff8"}[r]||r;if(!(J3||nC)){const l=await qt(()=>Promise.resolve().then(()=>Is),void 0);l.existsSync(n)||l.mkdirSync(n,{recursive:!0})}if(i){const l=uu.join(n,`${o}.zip`),f={octets:Vv(s,{bookType:u,type:"buffer"}),nom:`${o}.${r}`},d=await Promise.all([...a].map(async h=>({nom:h.replace("/","-"),octets:await Yfe(await this.client.obtItrableAsyncSFIP({id:h}))})));if(!(J3||nC)){const h=await qt(()=>Promise.resolve().then(()=>Is),void 0);h.existsSync(l)&&h.rmSync(l)}return await are([f],d,uu.join(n,o)),l}else{const l=uu.join(n,`${o}.${r}`);if(vi||gi)ytt(s,l,{bookType:u});else{const f=Vv(s,{bookType:u,type:"buffer"});uct(new Blob([new Uint8Array(f)]),`${o}.${r}`)}return l}}async exporterBdFichier({idBd:e,langues:r,nomFichier:n,patience:i=500,formatDoc:s,dossier:a="",inclureDocuments:o=!0}){const c=await this.exporterDonnes({idBd:e,langues:r,nomFichier:n,patience:i});return await this.documentDonnesFichier({donnes:c,formatDoc:s,dossier:a,inclureDocuments:o})}async effacerBd({idBd:e}){await this.client.favoris.dspinglerFavori({idObjet:e}),await this.enleverDeMesBds({idBd:e});const{bd:r,fOublier:n}=await this.client.ouvrirBdType({id:e,type:"keyvalue",schma:Ti}),i=await r.all();for(const a of i)a.key!=="tableaux"&&typeof a.value=="string"&&Su(a.value)&&await this.client.effacerBd({id:a.value});await n();const s=await this.client.obtIdBd({nom:"tableaux",racine:e,type:"ordered-keyvalue"});if(s){const{bd:a,fOublier:o}=await this.client.ouvrirBdType({id:s,type:"ordered-keyvalue",schma:La}),c=(await a.all()).map(u=>u.key);for(const u of c)await this.client.tableaux.effacerTableau({idTableau:u});o()}await this.client.effacerBd({id:e})}}Oe([je],Wn.prototype,"suivreBds",null);Oe([je],Wn.prototype,"suivreParent",null);Oe([je],Wn.prototype,"suivreNuesBd",null);Oe([je],Wn.prototype,"rechercherBdsParMotsClefs",null);Oe([je],Wn.prototype,"rechercherBdsParNue",null);Oe([je],Wn.prototype,"suivreIdTableauParClef",null);Oe([je],Wn.prototype,"suivreBdUnique",null);Oe([je],Wn.prototype,"suivreIdTableauParClefDeBdUnique",null);Oe([je],Wn.prototype,"suivreDonnesDeTableauUnique",null);Oe([je],Wn.prototype,"suivreDonnesDeTableauParClef",null);Oe([je],Wn.prototype,"suivreMtadonnesBd",null);Oe([je],Wn.prototype,"suivreLicenceBd",null);Oe([je],Wn.prototype,"suivreLicenceContenuBd",null);Oe([je],Wn.prototype,"suivreImage",null);Oe([je],Wn.prototype,"suivreNomsBd",null);Oe([je],Wn.prototype,"suivreDescriptionsBd",null);Oe([je],Wn.prototype,"suivreMotsClefsBd",null);Oe([je],Wn.prototype,"suivreTableauxBd",null);Oe([je],Wn.prototype,"suivreScoreAccsBd",null);Oe([je],Wn.prototype,"suivreScoreCouvertureBd",null);Oe([je],Wn.prototype,"suivreScoreValideBd",null);Oe([je],Wn.prototype,"suivreQualitBd",null);Oe([je],Wn.prototype,"suivreVariablesBd",null);const Jfe=t=>{let e,r;try{[e,r]=t.split("/")}catch{return!1}return!r||!I8(e)?!1:{cid:e,fichier:r}};class pct{client;requtes;bdsOuvertes;idcspingls;signaleurArrt;constructor({client:e}){this.client=e,this.requtes={},this.bdsOuvertes={},this.idcspingls=[],this.signaleurArrt=new AbortController}async pingler({idRequte:e,pingles:r}){this.signaleurArrt.signal.aborted||(this.requtes[e]=r,await this.mettreJour())}async dspingler({idRequte:e}){this.signaleurArrt.signal.aborted||(delete this.requtes[e],await this.mettreJour())}estpingl({id:e}){return!!this.bdsOuvertes[e]||this.idcspingls.includes(e)}async mettreJour(){const e=new Set(...Object.values(this.requtes)),r=[...e].filter(o=>o&&Su(o)),n=[...e].filter(o=>!r.includes(o)).map(o=>{const c=Jfe(o);if(c)return c.cid;if(I8(o))return o}).filter(o=>!!o),{sfip:i}=await this.client.attendreSfipEtOrbite();for(const o of n)await vc(i.pins.add(mt.parse(o)));const s=this.idcspingls.filter(o=>!n.includes(o));this.idcspingls=n;for(const o of s)await vc(i.pins.rm(mt.parse(o)));await Promise.allSettled(r.map(async o=>{try{const{bd:c,fOublier:u}=await this.client.ouvrirBd({id:o,signal:this.signaleurArrt.signal});this.bdsOuvertes[o]={bd:c,fOublier:u}}catch{return}}));const a=Object.keys(this.bdsOuvertes).filter(o=>!r.includes(o));for(const o of a)await this.bdsOuvertes[o].fOublier(),delete this.bdsOuvertes[o]}async fermer(){this.signaleurArrt.abort(),await Promise.allSettled(Object.values(this.bdsOuvertes).map(({fOublier:e})=>e()))}}const TT="Constellation",We={ATTR:"attribution",GAL:"partagegal",INCL:"inclureDroitDauteur",CHNG:"indiquerChangements",SRCE:"partagerCodeSource",USGR:"usagereseau"},Te={PRTG:"partager",ADPT:"adapter",CMRC:"usageComercial",PRV:"usagePriv",BREV:"usageBrevets"},$e={RSP:"aucuneResponsabilit",GRNT:"aucuneGarantie",MRCM:"marqueCommerce",BREV:"brevetExclu",SOUS:"sousLicence"},Kt={BD:"basesDeDonnes",ART:"artistique",CODE:"codeInformatique",AUTRE:"autre"},mct={"ODbl-1_0":{droits:[Te.CMRC,Te.PRTG,Te.PRV,Te.ADPT],conditions:[We.ATTR,We.GAL,We.INCL],limitations:[$e.RSP,$e.BREV,$e.MRCM,$e.GRNT],catgorie:Kt.BD},"ODC-BY-1_0":{droits:[Te.CMRC,Te.PRTG,Te.PRV,Te.ADPT],conditions:[We.ATTR,We.INCL],limitations:[$e.RSP,$e.GRNT,$e.MRCM,$e.BREV],catgorie:Kt.BD},PDDL:{droits:[Te.CMRC,Te.PRTG,Te.ADPT,Te.PRV],conditions:[],limitations:[$e.RSP,$e.GRNT,$e.MRCM,$e.BREV],catgorie:Kt.BD},"rvca-open":{droits:[Te.PRV,Te.CMRC,Te.ADPT,Te.PRTG],conditions:[We.INCL,We.ATTR],limitations:[$e.SOUS,$e.RSP],catgorie:Kt.BD,spcialise:!0},"CC-BY-SA-4_0":{droits:[Te.PRTG,Te.ADPT,Te.CMRC,Te.PRV],conditions:[We.INCL,We.CHNG,We.GAL],limitations:[$e.RSP,$e.MRCM,$e.BREV,$e.GRNT],catgorie:Kt.ART},"CC-BY-4_0":{droits:[Te.CMRC,Te.PRTG,Te.ADPT,Te.PRV],conditions:[We.ATTR,We.CHNG],limitations:[$e.RSP,$e.MRCM,$e.BREV,$e.GRNT],catgorie:Kt.ART},"CC-0-1_0":{droits:[Te.PRTG,Te.ADPT,Te.CMRC,Te.PRV],conditions:[],limitations:[$e.RSP,$e.MRCM,$e.BREV,$e.GRNT],catgorie:Kt.ART},"0bsd":{droits:[Te.CMRC,Te.PRTG,Te.ADPT,Te.PRV],conditions:[],limitations:[],catgorie:Kt.CODE},"afl-3_0":{droits:[Te.CMRC,Te.PRTG,Te.ADPT,Te.PRV,Te.BREV],conditions:[We.INCL,We.CHNG],limitations:[$e.MRCM,$e.RSP,$e.GRNT],catgorie:Kt.CODE},"agpl-3_0":{droits:[Te.CMRC,Te.ADPT,Te.PRTG,Te.BREV,Te.PRV],conditions:[We.INCL,We.CHNG,We.SRCE,We.USGR,We.GAL],limitations:[$e.RSP,$e.GRNT],catgorie:Kt.CODE},"apache-2_0":{droits:[Te.CMRC,Te.ADPT,Te.PRTG,Te.BREV,Te.PRV],conditions:[We.INCL,We.CHNG],limitations:[$e.MRCM,$e.RSP,$e.GRNT],catgorie:Kt.CODE},"artistic-2_0":{droits:[Te.CMRC,Te.ADPT,Te.PRTG,Te.BREV,Te.PRV],conditions:[We.INCL,We.CHNG],limitations:[$e.RSP,$e.MRCM,$e.GRNT],catgorie:Kt.CODE},"bsd-2-clause":{droits:[Te.CMRC,Te.ADPT,Te.PRTG,Te.PRV],conditions:[We.INCL],limitations:[$e.RSP,$e.GRNT],catgorie:Kt.CODE},"bsd-3-clause-clear":{droits:[Te.CMRC,Te.ADPT,Te.PRTG,Te.PRV],conditions:[We.INCL],limitations:[$e.RSP,$e.BREV,$e.GRNT],catgorie:Kt.CODE},"bsd-3-clause":{droits:[Te.CMRC,Te.ADPT,Te.PRTG,Te.PRV],conditions:[We.INCL],limitations:[$e.RSP,$e.GRNT],catgorie:Kt.CODE},"bsd-4-clause":{droits:[Te.CMRC,Te.ADPT,Te.PRTG,Te.PRV],conditions:[We.INCL],limitations:[$e.RSP,$e.GRNT],catgorie:Kt.CODE},"bsl-1_0":{droits:[Te.CMRC,Te.ADPT,Te.PRTG,Te.PRV],conditions:[We.INCL],limitations:[$e.RSP,$e.GRNT],catgorie:Kt.CODE},"cecill-2_1":{droits:[Te.CMRC,Te.ADPT,Te.PRTG,Te.PRV,Te.BREV],conditions:[We.INCL,We.SRCE,We.GAL],limitations:[$e.RSP,$e.GRNT],catgorie:Kt.CODE},"ecl-2_0":{droits:[Te.CMRC,Te.ADPT,Te.PRTG,Te.BREV,Te.PRV],conditions:[We.INCL,We.CHNG],limitations:[$e.BREV,$e.RSP,$e.GRNT],catgorie:Kt.CODE},"epl-1_0":{droits:[Te.CMRC,Te.PRTG,Te.ADPT,Te.BREV,Te.PRV],conditions:[We.SRCE,We.INCL,We.GAL],limitations:[$e.RSP,$e.GRNT],catgorie:Kt.CODE},"epl-2_0":{droits:[Te.CMRC,Te.PRTG,Te.ADPT,Te.BREV,Te.PRV],conditions:[We.SRCE,We.INCL,We.GAL],limitations:[$e.RSP,$e.GRNT],catgorie:Kt.CODE},"eupl-1_0":{droits:[Te.CMRC,Te.ADPT,Te.PRTG,Te.BREV,Te.PRV],conditions:[We.INCL,We.SRCE,We.CHNG,We.USGR,We.GAL],limitations:[$e.RSP,$e.MRCM,$e.GRNT],catgorie:Kt.CODE},"eupl-1_2":{droits:[Te.CMRC,Te.ADPT,Te.PRTG,Te.BREV,Te.PRV],conditions:[We.INCL,We.SRCE,We.CHNG,We.USGR,We.GAL],limitations:[$e.RSP,$e.MRCM,$e.GRNT],catgorie:Kt.CODE},"gpl-2_0":{droits:[Te.CMRC,Te.ADPT,Te.PRTG,Te.PRV],conditions:[We.INCL,We.CHNG,We.SRCE,We.GAL],limitations:[$e.RSP,$e.GRNT],catgorie:Kt.CODE},"gpl-3_0":{droits:[Te.CMRC,Te.ADPT,Te.PRV,Te.BREV,Te.PRV],conditions:[We.INCL,We.CHNG,We.SRCE,We.GAL],limitations:[$e.RSP,$e.GRNT],catgorie:Kt.CODE},isc:{droits:[Te.CMRC,Te.PRTG,Te.ADPT,Te.PRV],conditions:[We.INCL],limitations:[$e.RSP,$e.GRNT],catgorie:Kt.CODE},"lgpl-2_1":{droits:[Te.CMRC,Te.ADPT,Te.PRTG,Te.PRV],conditions:[We.INCL,We.SRCE,We.CHNG,We.GAL],limitations:[$e.RSP,$e.GRNT],catgorie:Kt.CODE},"lgpl-3_0":{droits:[Te.CMRC,Te.ADPT,Te.PRTG,Te.BREV,Te.PRV],conditions:[We.INCL,We.SRCE,We.CHNG,We.GAL],limitations:[$e.RSP,$e.GRNT],catgorie:Kt.CODE},"lppl-1_3c":{droits:[Te.CMRC,Te.ADPT,Te.PRTG,Te.PRV],conditions:[We.INCL,We.CHNG,We.SRCE],limitations:[$e.RSP,$e.GRNT],catgorie:Kt.CODE},"mit-0":{droits:[Te.CMRC,Te.ADPT,Te.PRTG,Te.PRV],conditions:[],limitations:[$e.RSP,$e.GRNT],catgorie:Kt.CODE},mit:{droits:[Te.CMRC,Te.ADPT,Te.PRTG,Te.PRV],conditions:[We.INCL],limitations:[$e.RSP,$e.GRNT],catgorie:Kt.CODE},"mpl-2_0":{droits:[Te.CMRC,Te.ADPT,Te.PRTG,Te.BREV,Te.PRV],conditions:[We.SRCE,We.INCL,We.GAL],limitations:[$e.RSP,$e.MRCM,$e.GRNT],catgorie:Kt.CODE},"ms-pl":{droits:[Te.CMRC,Te.ADPT,Te.PRTG,Te.BREV,Te.PRV],conditions:[We.INCL],limitations:[$e.GRNT,$e.MRCM],catgorie:Kt.CODE},"ms-rl":{droits:[Te.CMRC,Te.ADPT,Te.PRTG,Te.BREV,Te.PRV],conditions:[We.SRCE,We.INCL,We.GAL],limitations:[$e.GRNT,$e.MRCM],catgorie:Kt.CODE},"mulanpsl-2_0":{droits:[Te.CMRC,Te.ADPT,Te.PRTG,Te.BREV,Te.PRV],conditions:[We.INCL],limitations:[$e.RSP,$e.MRCM,$e.GRNT],catgorie:Kt.CODE},ncsa:{droits:[Te.CMRC,Te.ADPT,Te.PRTG,Te.PRV],conditions:[We.INCL],limitations:[$e.RSP,$e.GRNT],catgorie:Kt.CODE},"osl-3_0":{droits:[Te.CMRC,Te.PRTG,Te.ADPT,Te.BREV,Te.PRV],conditions:[We.INCL,We.SRCE,We.CHNG,We.USGR,We.GAL],limitations:[$e.MRCM,$e.RSP,$e.GRNT],catgorie:Kt.CODE},postgresql:{droits:[Te.CMRC,Te.ADPT,Te.PRTG,Te.PRV],conditions:[We.INCL],limitations:[$e.RSP,$e.GRNT],catgorie:Kt.CODE},unlicence:{droits:[Te.PRV,Te.CMRC,Te.ADPT,Te.PRTG],conditions:[],limitations:[$e.RSP,$e.GRNT],catgorie:Kt.CODE},"upl-1_0":{droits:[Te.CMRC,Te.ADPT,Te.PRTG,Te.BREV,Te.PRV],conditions:[We.INCL],limitations:[$e.RSP,$e.GRNT],catgorie:Kt.CODE},vim:{droits:[Te.CMRC,Te.ADPT,Te.PRTG,Te.PRV],conditions:[We.INCL,We.CHNG,We.SRCE,We.GAL],limitations:[],catgorie:Kt.CODE},wtfpl:{droits:[Te.CMRC,Te.ADPT,Te.PRTG,Te.PRV],conditions:[],limitations:[],catgorie:Kt.CODE},zlib:{droits:[Te.CMRC,Te.ADPT,Te.PRTG,Te.PRV],conditions:[We.INCL,We.CHNG],limitations:[$e.RSP,$e.GRNT],catgorie:Kt.CODE},"ofl-1_1":{droits:[Te.PRV,Te.CMRC,Te.ADPT,Te.PRTG],conditions:[We.INCL,We.GAL],limitations:[$e.RSP,$e.GRNT],catgorie:Kt.AUTRE}};class Qfe{client;vnements;prt;perroquet;constructor({client:e}){this.client=e,this.prt=!1,this.vnements=new c0,this.initialiser()}async initialiser(){this.prt=!0,this.vnements.emit("prt")}async attendrePrt(){if(!this.prt)return new Promise(e=>{const r=()=>{e(),this.vnements.off("prt",r)};this.vnements.on("prt",r)})}async suivreLicences({f:e}){if(await e(mct),await this.attendrePrt(),this.perroquet){const r=async n=>await e(Object.fromEntries(n.map(i=>[i.code,i])));return await this.perroquet._({:r,:""})}return kn}async suggrerLicence({code:e,infoLicence:r}){await this.attendrePrt(),this.perroquet&&await this.perroquet.({:{code:e,...r}})}async effacerSuggestionLicence({idlment:e}){await this.attendrePrt(),this.perroquet&&await this.perroquet._({:e})}async suivreSuggestionsLicences({f:e}){return await this.attendrePrt(),this.perroquet?await this.perroquet._({:e}):{fOublier:kn,fChangerProfondeur:kn}}async approuverLicence({suggestion:e}){await this.attendrePrt(),this.perroquet&&await this.perroquet.({:e})}}Oe([je],Qfe.prototype,"suivreLicences",null);const gct={type:"string"},Iw={type:"object",properties:{type:{type:"string",nullable:!0},noms:{type:"string",nullable:!0},descriptions:{type:"string",nullable:!0}},required:[]};class d2 extends F0{constructor({client:e}){super({client:e,clef:"motsClefs",schmaBdPrincipale:gct})}async suivreRsolutionpingle({pingle:e,f:r}){const n=await this.client.favoris.estpinglSurDispositif({dispositifs:e.pingle.base||"TOUS"});return await this.client.suivreBd({id:e.idObjet,type:"keyvalue",schma:Iw,f:async s=>{try{const a=await s.allAsJSON();return await r(new Set(n?[e.idObjet,a.descriptions,a.noms].filter(o=>!!o):[]))}catch{return}}})}async suivreMotsClefs({f:e,idCompte:r}){return await this.suivreBdPrincipale({idCompte:r,f:e})}async crerMotClef({pingler:e=!0}={}){const r=await this.client.crerBdIndpendante({type:"keyvalue",optionsAccs:{address:void 0,write:await this.client.obtIdCompte()}});await this.ajouterMesMotsClefs({idMotClef:r}),e&&await this.pinglerMotClef({idMotClef:r});const{bd:n,fOublier:i}=await this.client.ouvrirBdType({id:r,type:"keyvalue",schma:Iw}),a={write:n.access.address};await n.set("type","motClef");const o=await this.client.crerBdIndpendante({type:"keyvalue",optionsAccs:a});await n.set("noms",o);const c=await this.client.crerBdIndpendante({type:"keyvalue",optionsAccs:a});return await n.set("descriptions",c),await i(),r}async ajouterMesMotsClefs({idMotClef:e}){const{bd:r,fOublier:n}=await this.obtBd();await r.add(e),await n()}async enleverDeMesMotsClefs({idMotClef:e}){const{bd:r,fOublier:n}=await this.obtBd();await r.del(e),await n()}async pinglerMotClef({idMotClef:e,options:r={}}){const n=L0(r,{type:"motClef",base:as});await this.client.favoris.pinglerFavori({idObjet:e,pingle:n})}async suivrepingleMotClef({idMotClef:e,f:r,idCompte:n}){return await this.client.favoris.suivretatFavori({idObjet:e,f:async i=>{i?.type==="motClef"?await r(i):await r(void 0)},idCompte:n})}async copierMotClef({idMotClef:e}){const{bd:r,fOublier:n}=await this.client.ouvrirBdType({id:e,type:"keyvalue",schma:Iw}),i=await this.crerMotClef(),s=await r.get("noms");if(s){const{bd:o,fOublier:c}=await this.client.ouvrirBdType({id:s,type:"keyvalue",schma:vt}),u=await o.allAsJSON();await this.sauvegarderNomsMotClef({idMotClef:i,noms:u}),await c()}const a=await r.get("descriptions");if(a){const{bd:o,fOublier:c}=await this.client.ouvrirBdType({id:a,type:"keyvalue",schma:vt}),u=await o.allAsJSON();await this.sauvegarderDescriptionsMotClef({idMotClef:i,descriptions:u}),await c()}return await n(),i}async _confirmerPermission({idMotClef:e}){if(!await this.client.permission({idObjet:e}))throw new Error(`Permission de modification refuse pour le mot-clef ${e}.`)}async inviterAuteur({idMotClef:e,idCompteAuteur:r,rle:n}){await this.client.donnerAccs({idBd:e,identit:r,rle:n})}async sauvegarderNomsMotClef({idMotClef:e,noms:r}){await this._confirmerPermission({idMotClef:e});const n=await this.client.obtIdBd({nom:"noms",racine:e,type:"keyvalue"}),{bd:i,fOublier:s}=await this.client.ouvrirBdType({id:n,type:"keyvalue",schma:vt});for(const a in r)await i.set(a,r[a]);await s()}async sauvegarderNomMotClef({idMotClef:e,langue:r,nom:n}){await this._confirmerPermission({idMotClef:e});const i=await this.client.obtIdBd({nom:"noms",racine:e,type:"keyvalue"}),{bd:s,fOublier:a}=await this.client.ouvrirBdType({id:i,type:"keyvalue",schma:vt});await s.set(r,n),await a()}async effacerNomMotClef({idMotClef:e,langue:r}){await this._confirmerPermission({idMotClef:e});const n=await this.client.obtIdBd({nom:"noms",racine:e,type:"keyvalue"}),{bd:i,fOublier:s}=await this.client.ouvrirBdType({id:n,type:"keyvalue",schma:vt});await i.del(r),await s()}async suivreNomsMotClef({idMotClef:e,f:r}){return await this.client.suivreBdDicDeClef({id:e,clef:"noms",schma:vt,f:r})}async sauvegarderDescriptionsMotClef({idMotClef:e,descriptions:r}){await this._confirmerPermission({idMotClef:e});const n=await this.client.obtIdBd({nom:"descriptions",racine:e,type:"keyvalue"}),{bd:i,fOublier:s}=await this.client.ouvrirBdType({id:n,type:"keyvalue",schma:vt});for(const a in r)await i.set(a,r[a]);await s()}async sauvegarderDescriptionMotClef({idMotClef:e,langue:r,description:n}){await this._confirmerPermission({idMotClef:e});const i=await this.client.obtIdBd({nom:"descriptions",racine:e,type:"keyvalue"}),{bd:s,fOublier:a}=await this.client.ouvrirBdType({id:i,type:"keyvalue",schma:vt});await s.set(r,n),await a()}async effacerDescriptionMotClef({idMotClef:e,langue:r}){await this._confirmerPermission({idMotClef:e});const n=await this.client.obtIdBd({nom:"descriptions",racine:e,type:"keyvalue"}),{bd:i,fOublier:s}=await this.client.ouvrirBdType({id:n,type:"keyvalue",schma:vt});await i.del(r),await s()}async suivreDescriptionsMotClef({idMotClef:e,f:r}){return await this.client.suivreBdDicDeClef({id:e,clef:"descriptions",schma:vt,f:r})}async effacerMotClef({idMotClef:e}){await this.enleverDeMesMotsClefs({idMotClef:e}),await this.client.favoris.dspinglerFavori({idObjet:e});const{bd:r,fOublier:n}=await this.client.ouvrirBdType({id:e,type:"keyvalue",schma:Iw}),i=await r.all();for(const s of i)s.value&&Su(s.value)&&await this.client.effacerBd({id:s.value});await n(),await this.client.effacerBd({id:e})}async suivreQualitMotClef({idMotClef:e,f:r}){return await this.suivreNomsMotClef({idMotClef:e,f:n=>r(Object.keys(n).length?1:0)})}}Oe([je],d2.prototype,"suivreMotsClefs",null);Oe([je],d2.prototype,"suivreNomsMotClef",null);Oe([je],d2.prototype,"suivreDescriptionsMotClef",null);Oe([je],d2.prototype,"suivreQualitMotClef",null);const vct=500*1e3,yct=1500*1e3,AT={type:"object",additionalProperties:{type:"string"},required:[]},Ai={type:"object",properties:{type:{type:"string",nullable:!0},mtadonnes:{type:"string",nullable:!0},noms:{type:"string",nullable:!0},descriptions:{type:"string",nullable:!0},motsClefs:{type:"string",nullable:!0},image:{type:"string",nullable:!0},tableaux:{type:"string",nullable:!0},autorisation:{type:"string",nullable:!0},statut:{type:"object",properties:{idNouvelle:{type:"string",nullable:!0},statut:{type:"string",nullable:!0}},required:[],nullable:!0},parent:{type:"string",nullable:!0},copiDe:{type:"string",nullable:!0}},required:[]},CT={type:"object",properties:{philosophie:{type:"string",nullable:!0},membres:{type:"string",nullable:!0}},required:[]},IT={type:"string"};class Qi extends F0{constructor({client:e}){super({client:e,clef:"nues",schmaBdPrincipale:{type:"string"}})}async suivreRsolutionpingle({pingle:e,f:r}){const n=await this.client.favoris.estpinglSurDispositif({dispositifs:e.pingle.base||"TOUS"}),i=e.pingle.donnes,s={},a=async()=>await r(new Set(Object.values(s).flat().filter(c=>!!c))),o=[];if(n){const c=await this.client.suivreBd({id:e.idObjet,type:"keyvalue",schma:Ai,f:async u=>{try{const l=await u.allAsJSON();n&&(s.base=[e.idObjet,l.descriptions,l.noms,l.tableaux,l.motsClefs,l.mtadonnes,l.image]),await a()}catch{return}}});o.push(c)}if(i){const{fOublier:c}=await dr({fListe:async u=>await this.suivreBdsCorrespondantes({idNue:e.idObjet,f:u}),fBranche:async(u,l)=>await this.client.bds.suivreRsolutionpingle({pingle:{idObjet:u,pingle:i},f:f=>l([...f])}),f:async u=>{s.donnes=u,await a()}});o.push(c)}return async()=>{await Promise.allSettled(o.map(c=>c()))}}async crerNue({nueParent:e,autorisation:r="IJPC",pingler:n=!0}={}){const i=await this.client.crerBdIndpendante({type:"keyvalue",optionsAccs:{address:void 0,write:await this.client.obtIdCompte()}});await this.ajouterMesNues({idNue:i}),n&&await this.pinglerNue({idNue:i});const{bd:s,fOublier:a}=await this.client.ouvrirBdType({id:i,type:"keyvalue",schma:Ai}),c={write:s.access.address};await s.set("type","nue");let u;if(ll(r))u=r;else if(r==="CJPI"||r==="IJPC")u=await this.gnrerGestionnaireAutorisations({philosophie:r});else throw new Error(`Autorisation non valide : ${r}`);await s.set("autorisation",u),r==="CJPI"&&await this.accepterMembreNue({idNue:i,idCompte:await this.client.obtIdCompte()});const l=await this.client.crerBdIndpendante({type:"keyvalue",optionsAccs:c});await s.set("noms",l);const f=await this.client.crerBdIndpendante({type:"keyvalue",optionsAccs:c});await s.set("descriptions",f);const d=await this.client.crerBdIndpendante({type:"ordered-keyvalue",optionsAccs:c});await s.set("tableaux",d);const h=await this.client.crerBdIndpendante({type:"keyvalue",optionsAccs:c});await s.set("mtadonnes",h);const m=await this.client.crerBdIndpendante({type:"set",optionsAccs:c});return await s.set("motsClefs",m),await s.set("statut",{statut:"active"}),e&&await s.set("parent",e),a(),i}async ajouterMesNues({idNue:e}){const{bd:r,fOublier:n}=await this.obtBd();await r.add(e),await n()}async enleverDeMesNues({idNue:e}){const{bd:r,fOublier:n}=await this.obtBd();await r.del(e),await n()}async pinglerNue({idNue:e,options:r={}}){const n=L0(r,{type:"nue",base:as,donnes:{type:"bd",base:as,donnes:{tableaux:as,fichiers:e_}}});await this.client.favoris.pinglerFavori({idObjet:e,pingle:n})}async suivrepingleNue({idNue:e,f:r,idCompte:n}){return await this.client.favoris.suivretatFavori({idObjet:e,f:async i=>{i?.type==="nue"?await r(i):await r(void 0)},idCompte:n})}async copierNue({idNue:e}){const{bd:r,fOublier:n}=await this.client.ouvrirBdType({id:e,type:"keyvalue",schma:Ai}),i=await r.get("parent"),s=await this.crerNue({nueParent:i}),{bd:a,fOublier:o}=await this.client.ouvrirBdType({id:s,type:"keyvalue",schma:Ai}),c=await r.get("mtadonnes");if(c){const{bd:g,fOublier:v}=await this.client.ouvrirBdType({id:c,type:"keyvalue",schma:vt}),y=await g.allAsJSON();await v(),await this.sauvegarderMtadonnesNue({idNue:s,mtadonnes:y})}const u=await r.get("noms");if(u){const{bd:g,fOublier:v}=await this.client.ouvrirBdType({id:u,type:"keyvalue",schma:vt}),y=await g.allAsJSON();await v(),await this.sauvegarderNomsNue({idNue:s,noms:y})}const l=await r.get("descriptions");if(l){const{bd:g,fOublier:v}=await this.client.ouvrirBdType({id:l,type:"keyvalue",schma:vt}),y=await g.allAsJSON();await v(),await this.sauvegarderDescriptionsNue({idNue:s,descriptions:y})}const f=await r.get("motsClefs");if(f){const{bd:g,fOublier:v}=await this.client.ouvrirBdType({id:f,type:"set",schma:IT}),y=(await g.all()).map(b=>b.value);await v(),await this.ajouterMotsClefsNue({idNue:s,idsMotsClefs:y})}const d=await r.get("tableaux"),h=await a.get("tableaux");if(!h)throw new Error("Erreur initialisation.");if(d){const{bd:g,fOublier:v}=await this.client.ouvrirBdType({id:h,type:"ordered-keyvalue",schma:La}),{bd:y,fOublier:b}=await this.client.ouvrirBdType({id:d,type:"ordered-keyvalue",schma:La}),_=await y.all();await b();for(const x of _){const E=await this.client.tableaux.copierTableau({id:x.key,idBd:s,copierDonnes:!1});await g.set(E,x.value)}await v()}const m=await r.get("statut")||{statut:"active"};await a.set("statut",m);const p=await r.get("image");return p&&await a.set("image",p),await a.set("copiDe",e),await Promise.allSettled([n(),o()]),s}async suivreNues({f:e,idCompte:r}){return await this.suivreBdPrincipale({f:e,idCompte:r})}async _confirmerPermission({idNue:e}){if(!await this.client.permission({idObjet:e}))throw new Error(`Permission de modification refuse pour la nue ${e}.`)}async suivreDeParents({idNue:e,f:r,fParents:n}){return await dr({fListe:async i=>await this.suivreNuesParents({idNue:e,f:s=>i([e,...s].reverse())}),f:r,fBranche:n,fRduction:i=>i})}async sauvegarderMtadonneNue({idNue:e,clef:r,mtadonne:n}){await this._confirmerPermission({idNue:e});const i=await this.client.obtIdBd({nom:"mtadonnes",racine:e,type:"keyvalue"}),{bd:s,fOublier:a}=await this.client.ouvrirBdType({id:i,type:"keyvalue",schma:rl});await s.set(r,n),await a()}async sauvegarderMtadonnesNue({idNue:e,mtadonnes:r}){await this._confirmerPermission({idNue:e});const n=await this.client.obtIdBd({nom:"mtadonnes",racine:e,type:"keyvalue"}),{bd:i,fOublier:s}=await this.client.ouvrirBdType({id:n,type:"keyvalue",schma:rl});for(const a in r)await i.set(a,r[a]);await s()}async effacerMtadonneNue({idNue:e,clef:r}){await this._confirmerPermission({idNue:e});const n=await this.client.obtIdBd({nom:"mtadonnes",racine:e,type:"keyvalue"}),{bd:i,fOublier:s}=await this.client.ouvrirBdType({id:n,type:"keyvalue",schma:rl});await i.del(r),await s()}async suivreMtadonnesNue({idNue:e,f:r,hriter:n=!0}){if(n){const i=async s=>{await r(Object.assign({},...s))};return await this.suivreDeParents({idNue:e,f:i,fParents:async(s,a)=>await this.client.suivreBdDicDeClef({id:s,clef:"mtadonnes",schma:rl,f:a})})}else return await this.client.suivreBdDicDeClef({id:e,clef:"mtadonnes",schma:rl,f:r})}async sauvegarderNomNue({idNue:e,langue:r,nom:n}){await this._confirmerPermission({idNue:e});const i=await this.client.obtIdBd({nom:"noms",racine:e,type:"keyvalue"}),{bd:s,fOublier:a}=await this.client.ouvrirBdType({id:i,type:"keyvalue",schma:vt});await s.set(r,n),await a()}async sauvegarderNomsNue({idNue:e,noms:r}){await this._confirmerPermission({idNue:e});const n=await this.client.obtIdBd({nom:"noms",racine:e,type:"keyvalue"}),{bd:i,fOublier:s}=await this.client.ouvrirBdType({id:n,type:"keyvalue",schma:vt});for(const a in r)await i.set(a,r[a]);await s()}async effacerNomNue({idNue:e,langue:r}){await this._confirmerPermission({idNue:e});const n=await this.client.obtIdBd({nom:"noms",racine:e,type:"keyvalue"}),{bd:i,fOublier:s}=await this.client.ouvrirBdType({id:n,type:"keyvalue",schma:vt});await i.del(r),await s()}async suivreNomsNue({idNue:e,f:r}){const n=async i=>{await r(Object.assign({},...i))};return await this.suivreDeParents({idNue:e,f:n,fParents:async(i,s)=>await this.client.suivreBdDicDeClef({id:i,clef:"noms",schma:vt,f:s})})}async sauvegarderDescriptionNue({idNue:e,langue:r,description:n}){await this._confirmerPermission({idNue:e});const i=await this.client.obtIdBd({nom:"descriptions",racine:e,type:"keyvalue"}),{bd:s,fOublier:a}=await this.client.ouvrirBdType({id:i,type:"keyvalue",schma:vt});await s.set(r,n),await a()}async sauvegarderDescriptionsNue({idNue:e,descriptions:r}){await this._confirmerPermission({idNue:e});const n=await this.client.obtIdBd({nom:"descriptions",racine:e,type:"keyvalue"}),{bd:i,fOublier:s}=await this.client.ouvrirBdType({id:n,type:"keyvalue",schma:vt});for(const a in r)await i.set(a,r[a]);await s()}async effacerDescriptionNue({idNue:e,langue:r}){await this._confirmerPermission({idNue:e});const n=await this.client.obtIdBd({nom:"descriptions",racine:e,type:"keyvalue"}),{bd:i,fOublier:s}=await this.client.ouvrirBdType({id:n,type:"keyvalue",schma:vt});await i.del(r),await s()}async suivreDescriptionsNue({idNue:e,f:r}){const n=async i=>{await r(Object.assign({},...i))};return await this.suivreDeParents({idNue:e,f:n,fParents:async(i,s)=>await this.client.suivreBdDicDeClef({id:i,clef:"descriptions",schma:vt,f:s})})}async sauvegarderImage({idNue:e,image:r}){if(r.contenu.byteLength>vct)throw new Error("Taille maximale excde");const n=await this.client.ajouterSFIP(r),{bd:i,fOublier:s}=await this.client.ouvrirBdType({id:e,type:"keyvalue",schma:Ai});await i.set("image",n),await s()}async effacerImage({idNue:e}){const{bd:r,fOublier:n}=await this.client.ouvrirBdType({id:e,type:"keyvalue",schma:Ai});await r.del("image"),await n()}async suivreImage({idNue:e,f:r}){return await this.client.suivreBd({id:e,type:"keyvalue",schma:Ai,f:async n=>{const i=await n.get("image");if(!i)await r(null);else{const s=await this.client.obtFichierSFIP({id:i,max:yct});await r(s)}}})}async ajouterMotsClefsNue({idNue:e,idsMotsClefs:r}){await this._confirmerPermission({idNue:e}),Array.isArray(r)||(r=[r]);const n=await this.client.obtIdBd({nom:"motsClefs",racine:e,type:"set"}),{bd:i,fOublier:s}=await this.client.ouvrirBdType({id:n,type:"set",schma:IT});for(const a of r)(await i.all()).map(c=>c.value).includes(a)||await i.add(a);await s()}async effacerMotClefNue({idNue:e,idMotClef:r}){await this._confirmerPermission({idNue:e});const n=await this.client.obtIdBd({nom:"motsClefs",racine:e,type:"set"}),{bd:i,fOublier:s}=await this.client.ouvrirBdType({id:n,type:"set",schma:IT});await i.del(r),await s()}async suivreMotsClefsNue({idNue:e,f:r}){const n=async i=>{await r([...new Set(i.flat())])};return await this.suivreDeParents({idNue:e,f:n,fParents:async(i,s)=>await this.client.suivreBdListeDeClef({id:i,clef:"motsClefs",schma:{type:"string"},f:s})})}async changerStatutNue({idNue:e,statut:r}){const{bd:n,fOublier:i}=await this.client.ouvrirBdType({id:e,type:"keyvalue",schma:Ai});n.set("statut",r),await i()}async suivreStatutNue({idNue:e,f:r}){return await this.client.suivreBdDic({id:e,f:async n=>{if(n.statut)return await r(n.statut)},schma:Ai})}async marquerObsolte({idNue:e,idNouvelle:r}){const{bd:n,fOublier:i}=await this.client.ouvrirBdType({id:e,type:"keyvalue",schma:Ai});n.set("statut",{statut:"obsolte",idNouvelle:r}),await i()}async marquerActive({idNue:e}){const{bd:r,fOublier:n}=await this.client.ouvrirBdType({id:e,type:"keyvalue",schma:Ai});r.set("statut",{statut:"active"}),await n()}async marquerJouet({idNue:e}){const{bd:r,fOublier:n}=await this.client.ouvrirBdType({id:e,type:"keyvalue",schma:Ai});r.set("statut",{statut:"jouet"}),await n()}async marquerInterne({idNue:e}){const{bd:r,fOublier:n}=await this.client.ouvrirBdType({id:e,type:"keyvalue",schma:Ai});r.set("statut",{statut:"interne"}),await n()}async inviterAuteur({idNue:e,idCompteAuteur:r,rle:n}){await this.client.donnerAccs({idBd:e,identit:r,rle:n})}async gnrerGestionnaireAutorisations({philosophie:e="IJPC"}){const r=await this.client.crerBdIndpendante({type:"keyvalue",optionsAccs:{write:await this.client.obtIdCompte()}}),{bd:n,fOublier:i}=await this.client.ouvrirBdType({id:r,type:"keyvalue",schma:CT});await n.set("philosophie",e);const a={write:n.access.address},o=await this.client.crerBdIndpendante({type:"keyvalue",optionsAccs:a});return await n.set("membres",o),i(),r}async changerPhisolophieAutorisation({idAutorisation:e,philosophie:r}){const{bd:n,fOublier:i}=await this.client.ouvrirBdType({id:e,type:"keyvalue",schma:CT});await n.set("philosophie",r),i()}async suivrePhilosophieAutorisation({idNue:e,f:r}){return await Fn({fRacine:async({fSuivreRacine:a})=>await this.suivreGestionnaireAutorisations({idNue:e,f:a}),f:async a=>{if(!a)return;const o=await a.get("philosophie");o&&["IJPC","CJPI"].includes(o)&&await r(o)},fSuivre:async({id:a,fSuivreBd:o})=>await this.client.suivreBd({id:a,type:"keyvalue",schma:CT,f:o})})}async accepterMembreAutorisation({idAutorisation:e,idCompte:r}){const n=await this.client.obtIdBd({nom:"membres",racine:e,type:"keyvalue"}),{bd:i,fOublier:s}=await this.client.ouvrirBdType({id:n,type:"keyvalue",schma:AT});await i.set(r,"accept"),s()}async accepterMembreNue({idNue:e,idCompte:r}){const n=await this.obtGestionnaireAutorisationsDeNue({idNue:e});return await this.accepterMembreAutorisation({idAutorisation:n,idCompte:r})}async exclureMembreAutorisation({idAutorisation:e,idCompte:r}){const n=await this.client.obtIdBd({nom:"membres",racine:e,type:"keyvalue"}),{bd:i,fOublier:s}=await this.client.ouvrirBdType({id:n,type:"keyvalue",schma:AT});await i.set(r,"exclus"),s()}async exclureMembreDeNue({idNue:e,idCompte:r}){const n=await this.obtGestionnaireAutorisationsDeNue({idNue:e});return await this.exclureMembreAutorisation({idAutorisation:n,idCompte:r})}async suivreGestionnaireAutorisations({idNue:e,f:r}){return await this.client.suivreBd({id:e,type:"keyvalue",schma:Ai,f:async n=>{const i=await n.get("autorisation");await r(i)}})}async changerGestionnaireAutorisations({idNue:e,idAutorisation:r}){const{bd:n,fOublier:i}=await this.client.ouvrirBdType({id:e,type:"keyvalue",schma:Ai});await n.set("autorisation",r),i()}async obtGestionnaireAutorisationsDeNue({idNue:e}){return await wr(async r=>await this.suivreGestionnaireAutorisations({idNue:e,f:Kn(r)}))}async suivreAutorisationsMembresDeGestionnaire({idAutorisation:e,f:r}){const n=async i=>{const s=Object.entries(i).map(([a,o])=>({idCompte:a,statut:o}));await r(s)};return await this.client.suivreBdDicDeClef({id:e,clef:"membres",schma:AT,f:n})}async suivreAutorisationsMembresDeNue({idNue:e,f:r}){const n=async({fSuivreRacine:s})=>await this.suivreGestionnaireAutorisations({idNue:e,f:s}),i=async({id:s,fSuivreBd:a})=>await this.suivreAutorisationsMembresDeGestionnaire({idAutorisation:s,f:a});return await Fn({fRacine:n,f:Kn(r),fSuivre:i})}async suivreContenuBloqu(){}async ajouterTableauNue({idNue:e,clefTableau:r}){await this._confirmerPermission({idNue:e});const n=await this.client.obtIdBd({nom:"tableaux",racine:e,type:"ordered-keyvalue"}),{bd:i,fOublier:s}=await this.client.ouvrirBdType({id:n,type:"ordered-keyvalue",schma:La});r=r||ti();const a=await this.client.tableaux.crerTableau({idBd:e});return await i.set(a,{clef:r}),await s(),a}async effacerTableauNue({idNue:e,idTableau:r}){await this._confirmerPermission({idNue:e});const n=await this.client.obtIdBd({nom:"tableaux",racine:e,type:"ordered-keyvalue"}),{bd:i,fOublier:s}=await this.client.ouvrirBdType({id:n,type:"ordered-keyvalue",schma:La});await i.del(r),await s(),await this.client.tableaux.effacerTableau({idTableau:r})}async suivreTableauxNue({idNue:e,f:r}){const n=async s=>{await r(s.flat())},i=async(s,a)=>{const o=c=>{const u=c.map(l=>({id:l.key,...l.value}));a(u)};return await this.client.suivreBdDicOrdonneDeClef({id:s,clef:"tableaux",schma:La,f:o})};return await this.suivreDeParents({idNue:e,f:n,fParents:i})}async sauvegarderNomsTableauNue({idTableau:e,noms:r}){return await this.client.tableaux.sauvegarderNomsTableau({idTableau:e,noms:r})}async effacerNomsTableauNue({idTableau:e,langue:r}){return await this.client.tableaux.effacerNomTableau({idTableau:e,langue:r})}async suivreNomsTableauNue({idNue:e,clefTableau:r,f:n}){const i=async a=>{await n(Object.assign({},...a))},s=async(a,o)=>await Fn({fRacine:async({fSuivreRacine:c})=>await this.client.bds.suivreIdTableauParClef({idBd:a,clef:r,f:c}),f:Kn(o),fSuivre:async({id:c,fSuivreBd:u})=>await this.client.tableaux.suivreNomsTableau({idTableau:c,f:u})});return await this.suivreDeParents({idNue:e,f:i,fParents:s})}async ajouterColonneTableauNue({idTableau:e,idVariable:r,idColonne:n,index:i}){const s=await this.client.tableaux.ajouterColonneTableau({idTableau:e,idVariable:r,idColonne:n});return i&&await this.changerColIndexTableauNue({idTableau:e,idColonne:s,val:!0}),s}async effacerColonneTableauNue({idTableau:e,idColonne:r}){return await this.client.tableaux.effacerColonneTableau({idTableau:e,idColonne:r})}async changerColIndexTableauNue({idTableau:e,idColonne:r,val:n}){return await this.client.tableaux.changerColIndex({idTableau:e,idColonne:r,val:n})}async suivreColonnesEtCatgoriesTableauNue({idNue:e,clefTableau:r,f:n}){const i=async a=>{await n(a.flat())},s=async(a,o)=>await Fn({fRacine:async({fSuivreRacine:c})=>await this.client.bds.suivreIdTableauParClef({idBd:a,clef:r,f:c}),f:Kn(o),fSuivre:async({id:c,fSuivreBd:u})=>await this.client.tableaux.suivreColonnesEtCatgoriesTableau({idTableau:c,f:u})});return await this.suivreDeParents({idNue:e,f:i,fParents:s})}async suivreColonnesTableauNue({idNue:e,clefTableau:r,f:n}){const i=async a=>{await n(a.flat())},s=async(a,o)=>await Fn({fRacine:async({fSuivreRacine:c})=>await this.client.bds.suivreIdTableauParClef({idBd:a,clef:r,f:c}),f:Kn(o),fSuivre:async({id:c,fSuivreBd:u})=>await this.client.tableaux.suivreColonnesTableau({idTableau:c,f:u})});return await this.suivreDeParents({idNue:e,f:i,fParents:s})}async ajouterRgleTableauNue({idTableau:e,idColonne:r,rgle:n}){return await this.client.tableaux.ajouterRgleTableau({idTableau:e,idColonne:r,rgle:n})}async effacerRgleTableauNue({idTableau:e,idRgle:r}){return await this.client.tableaux.effacerRgleTableau({idTableau:e,idRgle:r})}async suivreRglesTableauNue({idNue:e,clefTableau:r,f:n}){const i=async a=>{await n(a.flat())},s=async(a,o)=>await Fn({fRacine:async({fSuivreRacine:c})=>await this.client.bds.suivreIdTableauParClef({idBd:a,clef:r,f:c}),f:Kn(o),fSuivre:async({id:c,fSuivreBd:u})=>await this.client.tableaux.suivreRgles({idTableau:c,f:u})});return await this.suivreDeParents({idNue:e,f:i,fParents:s})}async suivreVariablesNue({idNue:e,f:r}){return await dr({fListe:async a=>await this.suivreTableauxNue({idNue:e,f:o=>a(o.map(c=>c.id))}),f:async a=>await r(a||[]),fBranche:async(a,o)=>await this.client.tableaux.suivreVariables({idTableau:a,f:o})})}async suivreQualitNue({idNue:e,f:r}){const n={noms:{},descr:{}},i=async()=>{const c=[Object.keys(n.noms).length?1:0,Object.keys(n.descr).length?1:0],u=c.reduce((l,f)=>l+f,0)/c.length;await r(u)},s=await this.suivreNomsNue({idNue:e,f:c=>{n.noms=c,i()}}),a=await this.suivreDescriptionsNue({idNue:e,f:c=>{n.descr=c,i()}});return async()=>{await s(),await a()}}async suivreDiffrencesNueEtTableau({idNue:e,clefTableau:r,idTableau:n,f:i,stricte:s=!0}){const a=async u=>{const l=u.filter(f=>s||f.svre);await i(l)},o=async({fSuivreRacine:u})=>await this.client.bds.suivreIdTableauParClef({idBd:e,clef:r,f:u}),c=async({id:u,fSuivreBd:l})=>await this.client.tableaux.suivreDiffrencesAvecTableau({idTableau:n,idTableauRf:u,f:l});return await Fn({fRacine:o,f:Kn(a),fSuivre:c})}async suivreDiffrencesNueEtBd({idNue:e,idBd:r,f:n}){const i={},s=async()=>{const c=[];if(i.tableauxNue&&i.tableauxBd){for(const u of i.tableauxNue)if(!i.tableauxNue.find(f=>f.clef===u.clef)){const f={type:"tableauManquant",svre:!0,clefManquante:u.clef};c.push(f)}for(const u of i.tableauxBd)if(!i.tableauxNue.find(f=>f.clef===u.clef)){const f={type:"tableauSupplmentaire",svre:!1,clefExtra:u.clef};c.push(f)}}await n(c)},a=await this.client.bds.suivreTableauxBd({idBd:r,f:c=>{i.tableauxBd=c,s()}}),o=await this.suivreTableauxNue({idNue:e,f:c=>{i.tableauxNue=c,s()}});return async()=>{await a(),await o()}}async suivreCorrespondanceBd({idBd:e,f:r}){return await dr({fListe:async s=>await this.client.bds.suivreNuesBd({idBd:e,f:s}),f:r,fBranche:async(s,a)=>{const o={diffrencesBds:[],diffrencesTableaux:[]},c=async()=>{a([...o.diffrencesBds,...o.diffrencesTableaux])},u=await this.suivreDiffrencesNueEtBd({idNue:s,idBd:e,f:async d=>{o.diffrencesBds=d,await c()}}),f=await dr({fListe:async d=>await this.client.bds.suivreTableauxBd({idBd:e,f:d}),f:async d=>{o.diffrencesTableaux=d,await c()},fBranche:async(d,h,m)=>await this.suivreDiffrencesNueEtTableau({idNue:s,clefTableau:m.clef,idTableau:d,f:async p=>{await h(p.map(g=>({type:"tableau",svre:g.svre,idTableau:d,diffrence:g})))}}),fCode:d=>d.id,fIdBdDeBranche:d=>d.id});return async()=>{await Promise.allSettled([u,f])}}})}async rechercherNuesDscendantes({idNue:e,f:r,nRsultatsDsirs:n,toutLeRseau:i=!0}){const s=async a=>{r(a.map(o=>o.id))};return await this.client.rseau.rechercherNues({f:s,fObjectif:async(a,o,c)=>await a.nues.suivreNuesParents({idNue:o,f:u=>{u.includes(e)&&c({type:"rsultat",score:1,de:"*",info:{type:"vide"}})}}),nRsultatsDsirs:n,toutLeRseau:i})}async prciserParent({idNue:e,idNueParent:r}){const{bd:n,fOublier:i}=await this.client.ouvrirBdType({id:e,type:"keyvalue",schma:Ai});n.set("parent",r),await i()}async enleverParent({idNue:e}){const{bd:r,fOublier:n}=await this.client.ouvrirBdType({id:e,type:"keyvalue",schma:Ai});r.del("parent"),await n()}async suivreNuesParents({idNue:e,f:r}){let n=!1;const i={},s=async()=>{await r(Object.values(Object.values(i).map(c=>c.parent)))},a=async({id:c})=>await this.client.suivreBd({id:c,type:"keyvalue",schma:Ai,f:async u=>{if(n)return;const l=await u.get("parent");if(i[c]?.parent===l){l||await s();return}if(await i[c]?.fOublier(),l){const f=await a({id:l});i[c]={parent:l,fOublier:async()=>{await f(),await i[l]?.fOublier(),delete i[c],await s()}}}else delete i[c];await s()}}),o=await a({id:e});return async()=>{n=!0,await o(),await Promise.allSettled(Object.values(i).map(c=>c.fOublier()))}}async suivreBdsCorrespondantesDUneNue({idNue:e,f:r,nRsultatsDsirs:n,vrifierAutorisation:i=!0,toujoursInclureLesMiennes:s=!0}){if(i){const a={},o=async()=>{const{philoAutorisation:g,membres:v,bds:y}=a;if(!y)return;if(!g)return s?await r(y.filter(x=>x.auteurs.some(E=>E===this.client.idCompte)).map(x=>x.idBd)):void 0;if(!v)return;const b=await this.client.obtIdCompte();return await r((x=>{if(g==="CJPI"){const E=v.filter(k=>k.statut==="accept").map(k=>k.idCompte);return x.filter(k=>k.auteurs.some(B=>E.includes(B))||s&&k.auteurs.includes(b)).map(k=>k.idBd)}else if(g==="IJPC"){const E=v.filter(k=>k.statut==="exclus").map(k=>k.idCompte);return x.filter(k=>!k.auteurs.some(B=>E.includes(B))).map(k=>k.idBd)}else throw new Error(g)})(y))},c=await this.suivrePhilosophieAutorisation({idNue:e,f:async g=>{a.philoAutorisation=g,await o()}}),u=await this.suivreAutorisationsMembresDeNue({idNue:e,f:async g=>{a.membres=g,await o()}}),l=async g=>{a.bds=g,await o()},f=async g=>await this.client.rseau.suivreBdsDeNue({idNue:e,f:g,nRsultatsDsirs:n}),d=async(g,v)=>{const y=async b=>await v({idBd:g,auteurs:b.filter(_=>_.accept).map(_=>_.idCompte)});return await this.client.rseau.suivreAuteursBd({idBd:g,f:y})},{fOublier:h,fChangerProfondeur:m}=await dr({fListe:f,f:l,fBranche:d});return{fOublier:async()=>{await Promise.allSettled([h,u,c].map(g=>g()))},fChangerProfondeur:m}}else return await this.client.rseau.suivreBdsDeNue({idNue:e,f:r,nRsultatsDsirs:n})}async suivreBdsCorrespondantes({idNue:e,f:r,nRsultatsDsirs:n,hritage:i,vrifierAutorisation:s=!0,toujoursInclureLesMiennes:a=!0}){const o={},c=[],u=async()=>{if(!o.directes)return;const d=[...new Set([...o.ascendance||[],...o.descendance||[],...o.directes])];return await r(d)};if(i&&i.includes("ascendance")){const d=await this.suivreDeParents({idNue:e,f:async h=>{const m=[];h.forEach(p=>p.forEach(g=>{m.includes(g)||m.push(g)})),o.ascendance=m,await u()},fParents:async(h,m)=>(await this.suivreBdsCorrespondantesDUneNue({idNue:h,f:m,nRsultatsDsirs:n,vrifierAutorisation:s,toujoursInclureLesMiennes:a})).fOublier});c.push(d)}if(i&&i.includes("descendance")){const{fOublier:d}=await dr({fListe:async h=>await this.rechercherNuesDscendantes({idNue:e,f:m=>h([e,...m].reverse())}),f:async h=>{o.descendance=h,await u()},fBranche:async(h,m)=>(await this.suivreBdsCorrespondantesDUneNue({idNue:h,f:m,nRsultatsDsirs:n,vrifierAutorisation:s,toujoursInclureLesMiennes:a})).fOublier});c.push(d)}const{fOublier:l,fChangerProfondeur:f}=await this.suivreBdsCorrespondantesDUneNue({idNue:e,f:async d=>{o.directes=d,await u()},nRsultatsDsirs:n,vrifierAutorisation:s,toujoursInclureLesMiennes:a});return c.push(l),{fOublier:async()=>{await Promise.allSettled(c.map(d=>d()))},fChangerProfondeur:f}}async suivreEmpreinteTtesBdsNue({idNue:e,f:r,hritage:n}){return await dr({fListe:async i=>{const{fOublier:s}=await this.suivreBdsCorrespondantes({idNue:e,f:async a=>i([e,...a]),hritage:n});return s},f:async i=>{const s=Wv.stringify(Q5(i.join(":")));return await r(s)},fBranche:async(i,s)=>await this.client.suivreEmpreinteTtesBdRcursive({idBd:i,f:s})})}async suivreDonnesTableauNue({idNue:e,clefTableau:r,f:n,nRsultatsDsirs:i,hritage:s,ignorerErreursFormatBd:a=!0,ignorerErreursFormatTableau:o=!1,ignorerErreursDonnesTableau:c=!0,licencesPermises:u=void 0,toujoursInclureLesMiennes:l=!0,clefsSelonVariables:f=!1,vrifierAutorisation:d=!0}){const h=async v=>{const y=v.flat();await n(y)},m=async v=>await this.suivreBdsCorrespondantes({idNue:e,f:async y=>await v(y),nRsultatsDsirs:i,hritage:s,toujoursInclureLesMiennes:l,vrifierAutorisation:d});return await dr({fListe:async v=>{const y=async(b,_)=>{const x={licence:!1,formatBd:!0},E=[],k=async()=>{const B=Object.values(x).every(D=>D);await _(B)};if(u){const B=await this.client.bds.suivreLicenceBd({idBd:b,f:async D=>(x.licence=u.includes(D),await k())});E.push(B)}else x.licence=!0;if(a)x.formatBd=!0;else{const B=await this.suivreDiffrencesNueEtBd({idBd:b,idNue:e,f:async D=>(x.formatBd=!D.length,await k())});E.push(B)}return await k(),async()=>{await Promise.allSettled(E.map(B=>B()))}};return await this.client.suivreBdsSelonCondition({fListe:m,fCondition:y,f:v})},f:h,fBranche:async(v,y)=>{const b={},_=async()=>{const{donnes:B,erreurslments:D,auteurs:z}=b;if(B&&D&&z&&z.length){const U=z.find(T=>T.accept)?.idCompte;if(!U)return;const S=B.map(T=>({idCompte:U,lment:T,valid:D.filter(w=>w.id==T.id)})).filter(T=>c||!T.valid.length);await y(S)}},E=await Fn({fRacine:async({fSuivreRacine:B})=>await this.client.suivreBdSelonCondition({fRacine:async D=>await this.client.bds.suivreIdTableauParClef({idBd:v,clef:r,f:Kn(D)}),fCondition:async(D,z)=>o?(await z(!0),kn):(await z(!0),await this.suivreDiffrencesNueEtTableau({idNue:e,clefTableau:r,idTableau:D,f:async U=>await z(!U.length),stricte:!1})),f:B}),f:async B=>{b.donnes=B?.donnes,b.erreurslments=B?.erreurs,await _()},fSuivre:async({id:B,fSuivreBd:D})=>{const z={},U=[],S=async()=>{const{donnes:A,erreurs:F}=z;A&&await D({donnes:A,erreurs:F||[]})},T=await this.client.tableaux.suivreDonnes({idTableau:B,f:async A=>{z.donnes=A,await S()},clefsSelonVariables:f});U.push(T);const w=await this.client.tableaux.suivreValidDonnes({idTableau:B,f:async A=>{z.erreurs=A,await S()}});return U.push(w),async()=>{await Promise.allSettled(U.map(A=>A()))}}}),k=await this.client.rseau.suivreAuteursBd({idBd:v,f:async B=>{b.auteurs=B,await _()}});return async()=>{await Promise.allSettled([E,k])}}})}async suivreDonnesExportationTableau({clefTableau:e,idNue:r,langues:n,f:i,nRsultatsDsirs:s,hritage:a}){const o={},c=[],u=async()=>{const{colonnes:d,donnes:h,nomsTableau:m,nomsVariables:p}=o;if(d&&h&&(!n||m&&p)){const g=new Set;let v=await Promise.all(h.map(async _=>({...await this.client.tableaux.formaterlment({:_.lment.donnes,colonnes:d,fichiersSFIP:g,langues:n}),auteur:_.idCompte})));v=v.map(_=>Object.keys(_).reduce((x,E)=>{if(E==="auteur")x[E]=_[E];else{const k=d.find(D=>D.id===E)?.variable;if(!k)throw new Error(`Colonnne avec id ${E} non trouve parmis les colonnnes :
${JSON.stringify(d,void 0,2)}.`);const B=n&&p?.[k]&&Df(p[k],n)||E;x[B]=_[E]}return x},{}));const y=e.split("/").pop(),b=n&&m&&Df(m,n)||y;return await i({nomTableau:b,donnes:v,fichiersSFIP:g})}};if(n){const d=await this.suivreNomsTableauNue({idNue:r,clefTableau:e,f:async m=>{o.nomsTableau=m,await u()}});c.push(d);const h=await dr({fListe:async m=>this.suivreVariablesNue({idNue:r,f:m}),f:async m=>{o.nomsVariables=Object.fromEntries(m.map(p=>[p.idVar,p.noms])),await u()},fBranche:async(m,p)=>await this.client.variables.suivreNomsVariable({idVariable:m,f:async g=>await p({idVar:m,noms:g})})});c.push(h)}const l=await this.suivreColonnesEtCatgoriesTableauNue({idNue:r,clefTableau:e,f:async d=>{o.colonnes=d,await u()}});c.push(l);const{fOublier:f}=await this.suivreDonnesTableauNue({idNue:r,clefTableau:e,nRsultatsDsirs:s,hritage:a,f:async d=>{o.donnes=d,await u()}});return c.push(f),async()=>{Promise.allSettled(c.map(d=>d()))}}async suivreDonnesExportation({idNue:e,langues:r,f:n,nRsultatsDsirs:i,hritage:s}){const a={},o=[],c=async()=>{const{nomsNue:f,donnes:d}=a;if(!d)return;const h=e.split("/").pop(),m=f&&r&&Df(f,r)||h;await n({nomNue:m,tableaux:d})},u=await dr({fListe:async f=>await this.suivreTableauxNue({idNue:e,f}),f:async f=>{a.donnes=f,await c()},fBranche:async(f,d)=>await this.suivreDonnesExportationTableau({idNue:e,clefTableau:f,langues:r,nRsultatsDsirs:i,hritage:s,f:async h=>await d(h)}),fIdBdDeBranche:f=>f.clef,fCode:f=>f.clef});if(o.push(u),r){const f=await this.suivreNomsNue({idNue:e,f:async d=>{a.nomsNue=d,await c()}});o.push(f)}return async()=>{await Promise.allSettled(o.map(f=>f()))}}async exporterDonnesNue({idNue:e,langues:r,nomFichier:n,nRsultatsDsirs:i,hritage:s,patience:a=500}){const o=xa.book_new(),c=new Set,u=await wr(async l=>await this.suivreDonnesExportation({idNue:e,langues:r,f:l,hritage:s,nRsultatsDsirs:i}),ss(a));n=n||u.nomNue;for(const l of u.tableaux){l.fichiersSFIP.forEach(d=>c.add(d));const f=xa.json_to_sheet(l.donnes);xa.book_append_sheet(o,f,l.nomTableau.slice(0,30))}return{doc:o,fichiersSFIP:c,nomFichier:n}}async exporterNueFichier({idNue:e,langues:r,nomFichier:n,nRsultatsDsirs:i,hritage:s,patience:a=500,formatDoc:o,dossier:c="",inclureDocuments:u=!0}){const l=await this.exporterDonnesNue({idNue:e,langues:r,nomFichier:n,nRsultatsDsirs:i,hritage:s,patience:a});return await this.client.bds.documentDonnesFichier({donnes:l,formatDoc:o,dossier:c,inclureDocuments:u})}async gnrerDeBd({idBd:e,patience:r=500}){const n=await this.crerNue(),[i,s,a,o]=await Promise.all([wr(async c=>await this.client.bds.suivreNomsBd({idBd:e,f:c}),ss(r)),wr(async c=>await this.client.bds.suivreDescriptionsBd({idBd:e,f:c}),ss(r)),wr(async c=>await this.client.bds.suivreMotsClefsBd({idBd:e,f:c}),ss(r)),wr(async c=>await this.client.bds.suivreTableauxBd({idBd:e,f:c}),ss(r))]);return await Promise.allSettled([this.sauvegarderNomsNue({idNue:n,noms:i}),await this.sauvegarderDescriptionsNue({idNue:n,descriptions:s}),await this.ajouterMotsClefsNue({idNue:n,idsMotsClefs:a})]),await Promise.allSettled(o.map(async c=>{const u=c.id,l=await this.ajouterTableauNue({idNue:n,clefTableau:c.clef}),f=await wr(async d=>await this.client.tableaux.suivreColonnesTableau({idTableau:u,f:d}),ss(r));for(const d of f){await this.ajouterColonneTableauNue({idTableau:l,idVariable:d.variable,idColonne:d.id,index:d.index}),await this.changerColIndexTableauNue({idTableau:l,idColonne:d.id,val:!!d.index});const h=await wr(async m=>await this.client.tableaux.suivreRgles({idTableau:u,f:m}),ss(r));for(const m of h)m.source.type==="tableau"&&await this.ajouterRgleTableauNue({idTableau:l,idColonne:d.id,rgle:m.rgle.rgle})}})),n}async gnrerSchmaBdNue({idNue:e,licence:r,patience:n=500}){const[i,s]=await Promise.all([wr(async u=>await this.suivreMotsClefsNue({idNue:e,f:u}),ss(n)),wr(async u=>await this.suivreTableauxNue({idNue:e,f:u}),ss(n))]),a=async u=>await wr(async l=>await this.suivreRglesTableauNue({idNue:e,clefTableau:u,f:l}),ss(n)),o=async u=>await wr(async l=>await this.suivreColonnesTableauNue({idNue:e,clefTableau:u,f:l}),ss(n));return{licence:r,nues:[e],motsClefs:i,tableaux:await Promise.all(s.map(async u=>{const[l,f]=await Promise.all([o(u.clef),a(u.clef)]);return{cols:l.map(d=>{const h=f.some(m=>m.colonne===d.id&&m.rgle.rgle.typeRgle==="existe");return{idColonne:d.id,idVariable:d.variable,index:!!d.index,optionnelle:!h}}),clef:u.clef}}))}}async effacerNue({idNue:e}){await this.enleverDeMesNues({idNue:e}),await this.client.favoris.dspinglerFavori({idObjet:e});const{bd:r,fOublier:n}=await this.client.ouvrirBdType({id:e,type:"keyvalue",schma:Ai}),i=await r.all();for(const a of i)a.key==="tableaux"||a.key==="parent"||typeof a.value=="string"&&Su(a.value)&&await this.client.effacerBd({id:a.value});await n();const s=await this.client.obtIdBd({nom:"tableaux",racine:e,type:"ordered-keyvalue"});if(s){const{bd:a,fOublier:o}=await this.client.ouvrirBdType({id:s,type:"ordered-keyvalue",schma:La}),c=(await a.all()).map(u=>u.key);for(const u of c)await this.client.tableaux.effacerTableau({idTableau:u});o()}await this.client.effacerBd({id:e})}}Oe([je],Qi.prototype,"suivreDescriptionsNue",null);Oe([je],Qi.prototype,"suivreImage",null);Oe([je],Qi.prototype,"suivreMotsClefsNue",null);Oe([je],Qi.prototype,"suivreNomsTableauNue",null);Oe([je],Qi.prototype,"suivreColonnesEtCatgoriesTableauNue",null);Oe([je],Qi.prototype,"suivreColonnesTableauNue",null);Oe([je],Qi.prototype,"suivreRglesTableauNue",null);Oe([je],Qi.prototype,"suivreQualitNue",null);Oe([je],Qi.prototype,"suivreDiffrencesNueEtTableau",null);Oe([je],Qi.prototype,"suivreDiffrencesNueEtBd",null);Oe([je],Qi.prototype,"suivreCorrespondanceBd",null);Oe([yt],Qi.prototype,"rechercherNuesDscendantes",null);Oe([je],Qi.prototype,"suivreNuesParents",null);Oe([yt],Qi.prototype,"suivreBdsCorrespondantesDUneNue",null);Oe([yt],Qi.prototype,"suivreBdsCorrespondantes",null);Oe([je],Qi.prototype,"suivreEmpreinteTtesBdsNue",null);Oe([yt],Qi.prototype,"suivreDonnesTableauNue",null);const bct=500*1e3,wct=1500*1e3,Xm={type:"object",properties:{initialis:{type:"boolean",nullable:!0},image:{type:"string",nullable:!0},contacts:{type:"string",nullable:!0},noms:{type:"string",nullable:!0}},required:[]},PT={type:"object",properties:{type:{type:"string"},contact:{type:"string"}},required:["contact","type"]};class h2 extends zu{constructor({client:e}){super({client:e,clef:"profil",schmaBdPrincipale:Xm})}async crerBdsInternes({idCompte:e}){const r=await this.client.obtIdBd({nom:this.clef,racine:e,type:"keyvalue"}),{bd:n,fOublier:i}=await this.client.ouvrirBdType({id:r,type:"keyvalue",schma:Xm}),s=await this.client.obtOpsAccs({idBd:n.address}),a=await this.client.crerBdIndpendante({type:"keyvalue",optionsAccs:s});await n.set("noms",a);const o=await this.client.crerBdIndpendante({type:"set",optionsAccs:s});await n.set("contacts",o),await i()}async suivreRsolutionpingle({pingle:e,f:r}){const n=await this.client.favoris.estpinglSurDispositif({dispositifs:e.pingle.base||"TOUS"}),i=await this.client.favoris.estpinglSurDispositif({dispositifs:e.pingle.base||"TOUS"}),s=[];if(n||i){const a=await this.client.suivreBd({id:e.idObjet,type:"keyvalue",schma:Xm,f:async o=>{try{const c=await o.allAsJSON(),u=[];n&&u.push(...[e.idObjet,c.contacts,c.noms].filter(l=>!!l)),i&&c.image&&u.push(c.image),await r(new Set(u))}catch{return}}});s.push(a)}return async()=>{await Promise.allSettled(s.map(a=>a()))}}async initialiser(){const e=await this.obtIdBd(),{bd:r,fOublier:n}=await this.client.ouvrirBdType({id:e,type:"keyvalue",schma:Xm});await r.set("initialis",!0),await n()}async suivreInitialis({f:e,idCompte:r}){return await this.suivreBdPrincipale({idCompte:r,f:async n=>await e(!!n.initialis)})}async suivreCourriel({f:e,idCompte:r}){return await this.suivreContacts({idCompte:r,f:async n=>await e(n.find(i=>i.type=="courriel")?.contact||null)})}async sauvegarderCourriel({courriel:e}){await this.sauvegarderContact({type:"courriel",contact:e})}async effacerCourriel(){await this.effacerContact({type:"courriel"})}async suivreContacts({f:e,idCompte:r}){return await this.suivreSousBdListe({idCompte:r,clef:"contacts",schma:PT,f:e})}async sauvegarderContact({type:e,contact:r}){const n=await this.obtIdBd(),i=await this.client.obtIdBd({nom:"contacts",racine:n,type:"set"}),{bd:s,fOublier:a}=await this.client.ouvrirBdType({id:i,type:"set",schma:PT});await s.add({type:e,contact:r}),await a()}async effacerContact({type:e,contact:r}){const n=await this.obtIdBd(),i=await this.client.obtIdBd({nom:"contacts",racine:n,type:"set"}),{bd:s,fOublier:a}=await this.client.ouvrirBdType({id:i,type:"set",schma:PT}),c=(await s.all()).filter(u=>u.value.type===e&&(r===void 0||u.value.contact===r));await Promise.allSettled(c.map(async u=>await s.del(u.value))),await a()}async suivreNoms({f:e,idCompte:r}){return await this.suivreSousBdDic({idCompte:r,clef:"noms",schma:vt,f:e})}async sauvegarderNom({langue:e,nom:r}){return await this.sauvegarderNoms({noms:{[e]:r}})}async sauvegarderNoms({noms:e}){const r=await this.obtIdBd(),n=await this.client.obtIdBd({nom:"noms",racine:r,type:"keyvalue"}),{bd:i,fOublier:s}=await this.client.ouvrirBdType({id:n,type:"keyvalue",schma:vt});for(const[a,o]of Object.entries(e))await i.set(a,o);await s()}async effacerNom({langue:e}){const r=await this.obtIdBd(),n=await this.client.obtIdBd({nom:"noms",racine:r,type:"keyvalue"}),{bd:i,fOublier:s}=await this.client.ouvrirBdType({id:n,type:"keyvalue",schma:vt});await i.del(e),await s()}async sauvegarderImage({image:e}){if(e.contenu.byteLength>bct)throw new Error("Taille maximale excde");const r=await this.client.ajouterSFIP(e),{bd:n,fOublier:i}=await this.obtBd();await n.set("image",r),await i()}async effacerImage(){const{bd:e,fOublier:r}=await this.obtBd();await e.del("image"),await r()}async suivreImage({f:e,idCompte:r}){return await Fn({fRacine:async({fSuivreRacine:n})=>await this.suivreIdBd({f:n,idCompte:r}),f:Kn(e),fSuivre:async({id:n,fSuivreBd:i})=>await this.client.suivreBd({id:n,type:"keyvalue",schma:Xm,f:async s=>{const a=await s.get("image");if(a){const o=await this.client.obtFichierSFIP({id:a,max:wct});return await i(o)}else return await i(null)}})})}}Oe([je],h2.prototype,"suivreCourriel",null);Oe([je],h2.prototype,"suivreContacts",null);Oe([je],h2.prototype,"suivreNoms",null);Oe([je],h2.prototype,"suivreImage",null);const RT={type:"string"},_ct={type:"string"},xct=500*1e3,Sct=1500*1e3,Pw={type:"string"},Ma={type:"object",properties:{type:{type:"string"},noms:{type:"string"},descriptions:{type:"string"},bds:{type:"string"},image:{type:"string",nullable:!0},motsClefs:{type:"string"},statut:{type:"object",properties:{statut:{type:"string"},idNouvelle:{type:"string",nullable:!0}},required:["statut"]},copiDe:{type:"object",properties:{id:{type:"string"}},required:["id"],nullable:!0}},required:["noms","descriptions","statut","type","bds"]};class Hu extends F0{constructor({client:e}){super({client:e,clef:"projets",schmaBdPrincipale:Pw})}async suivreRsolutionpingle({pingle:e,f:r}){const n=await this.client.favoris.estpinglSurDispositif({dispositifs:e.pingle.base||"TOUS"}),i=e.pingle.bds,s={},a=async()=>await r(new Set(Object.values(s).flat().filter(c=>!!c))),o=[];if(n){const c=await this.client.suivreBd({id:e.idObjet,type:"keyvalue",schma:Ma,f:async u=>{try{const l=await u.allAsJSON();n&&(s.base=[e.idObjet,l.descriptions,l.noms,l.bds,l.motsClefs,l.image])}catch{return}await a()}});o.push(c)}if(i){const c=await dr({fListe:async u=>await this.suivreBdsProjet({idProjet:e.idObjet,f:u}),fBranche:async(u,l)=>this.client.bds.suivreRsolutionpingle({pingle:{idObjet:u,pingle:i},f:f=>l([...f])}),f:async u=>{s.bds=u,await a()}});o.push(c)}return async()=>{await Promise.allSettled(o.map(c=>c()))}}async suivreProjets({f:e,idCompte:r}){return await this.suivreBdPrincipale({idCompte:r,f:e})}async crerProjet({pingler:e=!0}={}){const{bd:r,fOublier:n}=await this.client.ouvrirBdType({id:await this.obtIdBd(),type:"set",schma:Pw}),i=await this.client.crerBdIndpendante({type:"keyvalue",optionsAccs:{address:void 0,write:await this.client.obtIdCompte()}}),{bd:s,fOublier:a}=await this.client.ouvrirBdType({id:i,type:"keyvalue",schma:Ma}),o=s.access;if(!VB(o))throw Error("Contrleur de type non reconnu.");const c={write:o.address};await s.set("type","projet");const u=await this.client.crerBdIndpendante({type:"keyvalue",optionsAccs:c});await s.set("noms",u);const l=await this.client.crerBdIndpendante({type:"keyvalue",optionsAccs:c});await s.set("descriptions",l);const f=await this.client.crerBdIndpendante({type:"set",optionsAccs:c});await s.set("bds",f);const d=await this.client.crerBdIndpendante({type:"set",optionsAccs:c});return await s.set("motsClefs",d),await s.set("statut",{statut:"active"}),await r.add(i),e&&await this.pinglerProjet({idProjet:i}),await Promise.allSettled([n(),a()]),i}async copierProjet({idProjet:e}){const{bd:r,fOublier:n}=await this.client.ouvrirBdType({id:e,type:"keyvalue",schma:Ma}),i=await this.crerProjet(),{bd:s,fOublier:a}=await this.client.ouvrirBdType({id:i,type:"keyvalue",schma:Ma}),o=await r.get("noms");if(o){const{bd:h,fOublier:m}=await this.client.ouvrirBdType({id:o,type:"keyvalue",schma:vt}),p=await h.allAsJSON();await m(),await this.sauvegarderNomsProjet({idProjet:i,noms:p})}const c=await r.get("descriptions");if(c){const{bd:h,fOublier:m}=await this.client.ouvrirBdType({id:c,type:"keyvalue",schma:vt}),p=await h.allAsJSON();await m(),await this.sauvegarderDescriptionsProjet({idProjet:i,descriptions:p})}const u=await r.get("motsClefs");if(u){const{bd:h,fOublier:m}=await this.client.ouvrirBdType({id:u,type:"set",schma:RT}),p=(await h.all()).map(g=>g.value);await m(),await this.ajouterMotsClefsProjet({idProjet:i,idsMotsClefs:p})}const l=await r.get("bds");if(l){const{bd:h,fOublier:m}=await this.client.ouvrirBdType({id:l,type:"set",schma:_ct}),p=(await h.all()).map(g=>g.value);await m(),await Promise.allSettled(p.map(async g=>{await this.ajouterBdProjet({idProjet:i,idBd:g})}))}const f=await r.get("statut")||{statut:"active"};await s.set("statut",f);const d=await r.get("image");return d&&await s.set("image",d),await s.set("copiDe",{id:e}),await Promise.allSettled([n(),a()]),i}async ajouterMesProjets({idProjet:e}){const{bd:r,fOublier:n}=await this.client.ouvrirBdType({id:await this.obtIdBd(),type:"set",schma:Pw});await r.add(e),await n()}async enleverDeMesProjets({idProjet:e}){const{bd:r,fOublier:n}=await this.client.ouvrirBdType({id:await this.obtIdBd(),type:"set",schma:Pw});await r.del(e),await n()}async pinglerProjet({idProjet:e,options:r={}}){const n=L0(r,{type:"projet",base:as,bds:{type:"bd",base:as,donnes:{tableaux:as,fichiers:e_}}});await this.client.favoris.pinglerFavori({idObjet:e,pingle:n})}async _confirmerPermission({idProjet:e}){if(!await this.client.permission({idObjet:e}))throw new Error(`Permission de modification refuse pour le projet ${e}.`)}async suivrepingleProjet({idProjet:e,f:r,idCompte:n}){return await this.client.favoris.suivretatFavori({idObjet:e,f:async i=>{i?.type==="projet"?await r(i):await r(void 0)},idCompte:n})}async inviterAuteur({idProjet:e,idCompteAuteur:r,rle:n}){await this.client.donnerAccs({idBd:e,identit:r,rle:n})}async _obtBdNoms({idProjet:e}){await this._confirmerPermission({idProjet:e});const r=await this.client.obtIdBd({nom:"noms",racine:e,type:"keyvalue"});return await this.client.ouvrirBdType({id:r,type:"keyvalue",schma:vt})}async sauvegarderNomsProjet({idProjet:e,noms:r}){const{bd:n,fOublier:i}=await this._obtBdNoms({idProjet:e});for(const s in r)await n.set(s,r[s]);await i()}async sauvegarderNomProjet({idProjet:e,langue:r,nom:n}){const{bd:i,fOublier:s}=await this._obtBdNoms({idProjet:e});await i.set(r,n),await s()}async effacerNomProjet({idProjet:e,langue:r}){const{bd:n,fOublier:i}=await this._obtBdNoms({idProjet:e});await n.del(r),await i()}async _obtBdDescr({idProjet:e}){await this._confirmerPermission({idProjet:e});const r=await this.client.obtIdBd({nom:"descriptions",racine:e,type:"keyvalue"});return await this.client.ouvrirBdType({id:r,type:"keyvalue",schma:vt})}async sauvegarderDescriptionsProjet({idProjet:e,descriptions:r}){const{bd:n,fOublier:i}=await this._obtBdDescr({idProjet:e});for(const s in r)await n.set(s,r[s]);await i()}async sauvegarderDescriptionProjet({idProjet:e,langue:r,description:n}){const{bd:i,fOublier:s}=await this._obtBdDescr({idProjet:e});await i.set(r,n),await s()}async effacerDescriptionProjet({idProjet:e,langue:r}){const{bd:n,fOublier:i}=await this._obtBdDescr({idProjet:e});await n.del(r),await i()}async _obtBdMotsClefs({idProjet:e}){await this._confirmerPermission({idProjet:e});const r=await this.client.obtIdBd({nom:"motsClefs",racine:e,type:"set"});return await this.client.ouvrirBdType({id:r,type:"set",schma:RT})}async ajouterMotsClefsProjet({idProjet:e,idsMotsClefs:r}){Array.isArray(r)||(r=[r]);const{bd:n,fOublier:i}=await this._obtBdMotsClefs({idProjet:e});await Promise.allSettled(r.map(async s=>{(await n.all()).map(o=>o.value).includes(s)||await n.add(s)})),await i()}async effacerMotClefProjet({idProjet:e,idMotClef:r}){const{bd:n,fOublier:i}=await this._obtBdMotsClefs({idProjet:e});await n.del(r),await i()}async _obtBdBds({idProjet:e}){const r=await this.client.obtIdBd({nom:"bds",racine:e,type:"set"});return await this.client.ouvrirBdType({id:r,type:"set",schma:RT})}async ajouterBdProjet({idProjet:e,idBd:r}){const{bd:n,fOublier:i}=await this._obtBdBds({idProjet:e});await n.add(r),await i()}async effacerBdProjet({idProjet:e,idBd:r}){const{bd:n,fOublier:i}=await this._obtBdBds({idProjet:e});await n.del(r),await i()}async marquerObsolte({idProjet:e,idNouvelle:r}){const{bd:n,fOublier:i}=await this.client.ouvrirBdType({id:e,type:"keyvalue",schma:Ma});n.set("statut",{statut:"obsolte",idNouvelle:r}),await i()}async changerStatutProjet({idProjet:e,statut:r}){const{bd:n,fOublier:i}=await this.client.ouvrirBdType({id:e,type:"keyvalue",schma:Ma});n.set("statut",r),await i()}async marquerActif({idProjet:e}){const{bd:r,fOublier:n}=await this.client.ouvrirBdType({id:e,type:"keyvalue",schma:Ma});r.set("statut",{statut:"active"}),await n()}async marquerJouet({idProjet:e}){const{bd:r,fOublier:n}=await this.client.ouvrirBdType({id:e,type:"keyvalue",schma:Ma});r.set("statut",{statut:"jouet"}),await n()}async marquerInterne({idProjet:e}){const{bd:r,fOublier:n}=await this.client.ouvrirBdType({id:e,type:"keyvalue",schma:Ma});r.set("statut",{statut:"interne"}),await n()}async sauvegarderImage({idProjet:e,image:r}){if(r.contenu.byteLength>xct)throw new Error("Taille maximale excde");const n=await this.client.ajouterSFIP(r),{bd:i,fOublier:s}=await this.client.ouvrirBdType({id:e,type:"keyvalue",schma:Ma});await i.set("image",n),await s()}async effacerImage({idProjet:e}){const{bd:r,fOublier:n}=await this.client.ouvrirBdType({id:e,type:"keyvalue",schma:Ma});await r.del("image"),await n()}async suivreImage({idProjet:e,f:r}){return await this.client.suivreBd({id:e,type:"keyvalue",schma:Ma,f:async n=>{const i=await n.get("image");if(i){const s=await this.client.obtFichierSFIP({id:i,max:Sct});return await r(s)}else return await r(null)}})}async suivreNomsProjet({idProjet:e,f:r}){return await this.client.suivreBdDicDeClef({id:e,clef:"noms",schma:vt,f:r})}async suivreDescriptionsProjet({idProjet:e,f:r}){return await this.client.suivreBdDicDeClef({id:e,clef:"descriptions",schma:vt,f:r})}async suivreMotsClefsProjet({idProjet:e,f:r}){const n={},i=async()=>{if(n.propres&&n.bds){const f=[...n.propres.map(d=>({idMotClef:d,source:"projet"})),...n.bds.map(d=>({idMotClef:d,source:"bds"}))];return await r(f)}},s=async f=>(n.propres=f,await i()),a=await this.client.suivreBdListeDeClef({id:e,clef:"motsClefs",schma:{type:"string"},f:s}),l=await dr({fListe:async f=>await this.suivreBdsProjet({idProjet:e,f}),f:async f=>(n.bds=f,await i()),fBranche:async(f,d)=>await this.client.bds.suivreMotsClefsBd({idBd:f,f:d})});return async()=>{await a(),await l()}}async suivreBdsProjet({idProjet:e,f:r}){return await this.client.suivreBdListeDeClef({id:e,clef:"bds",schma:{type:"string"},f:r})}async suivreVariablesProjet({idProjet:e,f:r}){const n=async a=>await r(a||[]),i=async(a,o)=>await this.client.bds.suivreVariablesBd({idBd:a,f:o}),s=async({id:a,fSuivreBd:o})=>await this.client.suivreBdsDeBdListe({id:a,f:o,fBranche:i});return await this.client.suivreBdDeClef({id:e,clef:"bds",f:n,fSuivre:s})}async suivreQualitProjet({idProjet:e,f:r}){return await dr({fListe:async o=>await this.suivreBdsProjet({idProjet:e,f:o}),f:async o=>await r(o.length?o.reduce((c,u)=>c+u,0)/o.length:0),fBranche:async(o,c)=>await this.client.bds.suivreQualitBd({idBd:o,f:u=>c(u.total)}),fRduction:o=>o.flat()})}async suivreDonnesExportation({idProjet:e,langues:r,f:n}){const i={},s=[],a=async()=>{const{nomsProjet:c,donnes:u}=i;if(!u)return;const l=e.split("/").pop(),f=c&&r&&Df(c,r)||l;return await n({nomProjet:f,bds:u})},o=await dr({fListe:async c=>await this.suivreBdsProjet({idProjet:e,f:c}),f:async c=>{i.donnes=c,await a()},fBranche:async(c,u)=>await this.client.bds.suivreDonnesExportation({idBd:c,langues:r,f:u})});if(s.push(o),r){const c=await this.suivreNomsProjet({idProjet:e,f:async u=>{i.nomsProjet=u,await a()}});s.push(c)}return async()=>{await Promise.allSettled(s.map(c=>c()))}}async exporterDonnes({idProjet:e,langues:r,nomFichier:n,patience:i=500}){const s=await wr(async o=>await this.suivreDonnesExportation({idProjet:e,langues:r,f:o}),ss(i));n=n||s.nomProjet;const a=new Set;return s.bds.forEach(o=>{o.tableaux.forEach(c=>c.fichiersSFIP.forEach(u=>a.add(u)))}),{docs:s.bds.map(o=>{const c=xa.book_new();for(const u of o.tableaux){const l=xa.json_to_sheet(u.donnes);xa.book_append_sheet(c,l,u.nomTableau.slice(0,30))}return{doc:c,nom:o.nomBd}}),fichiersSFIP:a,nomFichier:n}}async exporterProjetFichier({idProjet:e,langues:r,nomFichier:n,patience:i=500,formatDoc:s,dossier:a="",inclureDocuments:o=!0}){const c=await this.exporterDonnes({idProjet:e,langues:r,nomFichier:n,patience:i});return await this.documentDonnesFichier({donnes:c,formatDoc:s,dossier:a,inclureDocuments:o})}async documentDonnesFichier({donnes:e,formatDoc:r,dossier:n="",inclureDocuments:i=!0}){const{docs:s,fichiersSFIP:a,nomFichier:o}=e,u={xls:"biff8"}[r]||r,l=s.map(d=>({nom:`${d.nom}.${r}`,octets:Vv(d.doc,{bookType:u,type:"buffer"})})),f=i?await Promise.all([...a].map(async d=>({nom:d.replace("/","-"),octets:await Yfe(await this.client.obtItrableAsyncSFIP({id:d}))}))):[];return await are(l,f,uu.join(n,o)),uu.join(n,o)}async effacerProjet({idProjet:e}){await this.enleverDeMesProjets({idProjet:e}),await this.client.favoris.dspinglerFavori({idObjet:e});const{bd:r,fOublier:n}=await this.client.ouvrirBdType({id:e,type:"keyvalue",schma:Ma}),i=await r.all();for(const s of i)typeof s.value=="string"&&Su(s.value)&&await this.client.effacerBd({id:s.value});await n(),await this.client.effacerBd({id:e})}}Oe([je],Hu.prototype,"suivreProjets",null);Oe([je],Hu.prototype,"suivreImage",null);Oe([je],Hu.prototype,"suivreNomsProjet",null);Oe([je],Hu.prototype,"suivreDescriptionsProjet",null);Oe([je],Hu.prototype,"suivreMotsClefsProjet",null);Oe([je],Hu.prototype,"suivreBdsProjet",null);Oe([je],Hu.prototype,"suivreVariablesProjet",null);Oe([je],Hu.prototype,"suivreQualitProjet",null);function jX(t){return t.split("").reverse().join("")}function Ect(t,e,r){const n=jX(e);return r.map(i=>{const s=Math.max(0,i.end-e.length-i.errors),a=jX(t.slice(s,i.end));return{start:ede(a,n,i.errors).reduce((c,u)=>i.end-u.end<c?i.end-u.end:c,i.end),end:i.end,errors:i.errors}})}function OT(t){return(t|-t)>>31&1}function VX(t,e,r,n){let i=t.P[r],s=t.M[r];const a=n>>>31,o=e[r]|a,c=o|s,u=(o&i)+i^i|o;let l=s|~(u|i),f=i&u;const d=OT(l&t.lastRowMask[r])-OT(f&t.lastRowMask[r]);return l<<=1,f<<=1,f|=a,l|=OT(n)-a,i=f|~(c|l),s=l&c,t.P[r]=i,t.M[r]=s,d}function ede(t,e,r){if(e.length===0)return[];r=Math.min(r,e.length);const n=[],i=32,s=Math.ceil(e.length/i)-1,a={P:new Uint32Array(s+1),M:new Uint32Array(s+1),lastRowMask:new Uint32Array(s+1)};a.lastRowMask.fill(1<<31),a.lastRowMask[s]=1<<(e.length-1)%i;const o=new Uint32Array(s+1),c=new Map,u=[];for(let d=0;d<256;d++)u.push(o);for(let d=0;d<e.length;d+=1){const h=e.charCodeAt(d);if(c.has(h))continue;const m=new Uint32Array(s+1);c.set(h,m),h<u.length&&(u[h]=m);for(let p=0;p<=s;p+=1){m[p]=0;for(let g=0;g<i;g+=1){const v=p*i+g;if(v>=e.length)continue;e.charCodeAt(v)===h&&(m[p]|=1<<g)}}}let l=Math.max(0,Math.ceil(r/i)-1);const f=new Uint32Array(s+1);for(let d=0;d<=l;d+=1)f[d]=(d+1)*i;f[s]=e.length;for(let d=0;d<=l;d+=1)a.P[d]=-1,a.M[d]=0;for(let d=0;d<t.length;d+=1){const h=t.charCodeAt(d);let m;h<u.length?m=u[h]:(m=c.get(h),typeof m>"u"&&(m=o));let p=0;for(let g=0;g<=l;g+=1)p=VX(a,m,g,p),f[g]+=p;if(f[l]-p<=r&&l<s&&(m[l+1]&1||p<0)){l+=1,a.P[l]=-1,a.M[l]=0;let g;if(l===s){const v=e.length%i;g=v===0?i:v}else g=i;f[l]=f[l-1]+g-p+VX(a,m,l,p)}else for(;l>0&&f[l]>=r+i;)l-=1;l===s&&f[l]<=r&&(f[l]<r&&n.splice(0,n.length),n.push({start:-1,end:d+1,errors:f[l]}),r=f[l])}return n}function kct(t,e,r){const n=ede(t,e,r);return Ect(t,e,n)}var BT,qX;function uM(){if(qX)return BT;qX=1,BT=function(r){return r.reduce(t,0)/r.length};function t(e,r){return e+r}return BT}var DT,zX;function Tct(){if(zX)return DT;zX=1;var t=uM();return DT=function(r){var n=t(r);function i(s,a){var o=a-n;return s+o*o}return r.reduce(i,0)/r.length},DT}var MT,HX;function Act(){if(HX)return MT;HX=1;var t=uM();return MT=function(r,n){for(var i=r.length,s=0,a=t(r),o=t(n),c=[];s<i;s+=1){var u=r[s]-a,l=n[s]-o;c.push(u*l)}return t(c)},MT}var NT,WX;function Cct(){if(WX)return NT;WX=1;var t=uM(),e=Tct(),r=Act();return NT=function(i,s,a){a=a||{};var o="K1"in a?a.K1:.01,c="K2"in a?a.K2:.03,u="L"in a?a.L:255,l="alpha"in a?a.alpha:1,f="beta"in a?a.beta:1,d="gamma"in a?a.gamma:1,h=o*u*(o*u),m=c*u*(c*u),p=m/2;function g(E,k){var B=t(E),D=t(k);return(2*B*D+h)/(B*B+D*D+h)}function v(E,k){var B=e(E),D=e(k),z=Math.sqrt(B),U=Math.sqrt(D);return(2*z*U+m)/(B+D+m)}function y(E,k){var B=Math.sqrt(e(E)),D=Math.sqrt(e(k)),z=r(E,k);return(z+p)/(B*D+p)}var b=Math.pow(g(i,s),l),_=Math.pow(v(i,s),f),x=Math.pow(y(i,s),d);return b*_*x},NT}var Ict=Cct();const Pct=In(Ict),fM=(t,e)=>{const n=kct(e,t,Math.ceil(t.length/4)).sort((i,s)=>i.errors>s.errors?1:-1)[0];if(n)return{type:"texte",score:1/(n.errors+1),dbut:n.start,fin:n.end}},Oc=(t,e)=>(Array.isArray(e)&&(e=Object.fromEntries(e.map(i=>[i,i]))),Object.entries(e).map(([i,s])=>{const a=fM(t,s);if(a){const{score:o,dbut:c,fin:u}=a;return{type:"rsultat",score:o,clef:i,info:{type:"texte",texte:s,dbut:c,fin:u}}}}).filter(i=>i).sort((i,s)=>i.score>s.score?-1:1)[0]),Rct=(t,e)=>{if(!e)return 0;const{mssim:r}=Pct(t,e);return r},Pl=async(t,e,r,n)=>{const i=[],s=Object.fromEntries(Object.keys(t).map(o=>[o,void 0])),a=()=>{const o=Object.values(s).filter(c=>c).sort((c,u)=>tde(c,u)?-1:1)[0];n(o)};return await Promise.allSettled(Object.entries(t).map(async([o,c])=>{const u=async l=>{s[o]=l,a()};i.push(await c(e,r,u))})),async()=>{await Promise.allSettled(i.map(o=>o()))}},Us=async(t,e,r,n,i)=>await dr({fListe:e,f:async c=>{const u=Oct(c);if(u){const l={type:"rsultat",de:t,clef:u.id,score:u.rsultat.score,info:{type:"rsultat",de:u.rsultat.de,info:u.rsultat.info}};u.rsultat.clef&&(l.info.clef=u.rsultat.clef),await i(l)}},fBranche:async(c,u)=>await r(n,c,async l=>{l&&u({id:c,rsultat:l})})}),tde=(t,e)=>{const r=(i,s)=>{for(;i.type==="rsultat";)i=i.info;for(;s.type==="rsultat";)s=s.info;const a=["vide","texte"],o=a.indexOf(i.type),c=a.indexOf(s.type);return o>c},n=(i,s)=>{for(;i.type==="rsultat";)i=i.info;for(;s.type==="rsultat";)s=s.info;switch(i.type){case"texte":return s.type==="texte"?i.fin-i.dbut>s.fin-s.dbut:!1;default:return!1}};return t.score>e.score?!0:t.score<e.score?!1:n(t.info,e.info)?!0:r(t.info,e.info)},Oct=t=>Object.values(t).filter(r=>r).sort((r,n)=>tde(r.rsultat,n.rsultat)?-1:1)[0],Ri=t=>async(e,r,n)=>{const i=fM(t,r);if(i){const{score:s,dbut:a,fin:o}=i;await n({score:s,type:"rsultat",de:"id",info:{type:"texte",dbut:a,fin:o,texte:r}})}else await n();return kn},GX=()=>async(t,e,r)=>(await r({type:"rsultat",score:1,de:"*",info:{type:"vide"}}),kn),mm=t=>async(e,r,n)=>(t===""&&await n({type:"rsultat",score:1,de:"*",info:{type:"vide"}}),kn),p2=t=>async(e,r,n)=>{const i=async a=>{const o=Oc(t,a);if(o){const{score:c,clef:u,info:l}=o;return await n({type:"rsultat",score:c,clef:u,info:l,de:"nom"})}else return await n()};return await e.motsClefs.suivreNomsMotClef({idMotClef:r,f:i})},rde=t=>async(e,r,n)=>{const i=async a=>{const o=Oc(t,a);if(o){const{score:c,clef:u,info:l}=o;return await n({type:"rsultat",score:c,clef:u,info:l,de:"descr"})}else return await n()};return await e.motsClefs.suivreDescriptionsMotClef({idMotClef:r,f:i})},nde=t=>async(e,r,n)=>{const i=p2(t),s=rde(t),a=Ri(t),o=mm(t);return await Pl({noms:i,id:a,descr:s,vide:o},e,r,n)},m2=t=>async(e,r,n)=>{const i=async a=>{const o=Oc(t,a);if(o){const{score:c,clef:u,info:l}=o;return await n({type:"rsultat",score:c,de:"nom",clef:u,info:l})}else return await n()};return await e.variables.suivreNomsVariable({idVariable:r,f:i})},ide=t=>async(e,r,n)=>{const i=async a=>{const o=Oc(t,a);if(o){const{score:c,clef:u,info:l}=o;return await n({type:"rsultat",score:c,de:"descr",clef:u,info:l})}else return await n()};return await e.variables.suivreDescriptionsVariable({idVariable:r,f:i})},sde=t=>async(e,r,n)=>{const i=m2(t),s=ide(t),a=Ri(t),o=mm(t);return await Pl({noms:i,descr:s,id:a,vide:o},e,r,n)},ade=t=>async(e,r,n)=>{const i=async a=>{const o=Oc(t,a);if(o){const{score:c,clef:u,info:l}=o;return await n({type:"rsultat",score:c,clef:u,info:l,de:"nom"})}else return await n()};return await e.bds.suivreNomsBd({idBd:r,f:i})},ode=t=>async(e,r,n)=>{const i=async a=>{const o=Oc(t,a);if(o){const{score:c,clef:u,info:l}=o;return await n({type:"rsultat",score:c,clef:u,info:l,de:"descr"})}else return await n()};return await e.bds.suivreDescriptionsBd({idBd:r,f:i})},cde=t=>async(e,r,n)=>{const i=async a=>await e.bds.suivreVariablesBd({idBd:r,f:a}),s=Ri(t);return await Us("variable",i,s,e,n)},lde=t=>async(e,r,n)=>{const i=async a=>await e.bds.suivreVariablesBd({idBd:r,f:a}),s=m2(t);return await Us("variable",i,s,e,n)},ude=t=>async(e,r,n)=>await Pl({id:cde(t),nom:lde(t)},e,r,n),fde=t=>async(e,r,n)=>{const i=async a=>await e.bds.suivreMotsClefsBd({idBd:r,f:a}),s=Ri(t);return await Us("motClef",i,s,e,n)},dde=t=>async(e,r,n)=>{const i=async a=>await e.bds.suivreMotsClefsBd({idBd:r,f:a}),s=p2(t);return await Us("motClef",i,s,e,n)},hde=t=>async(e,r,n)=>await Pl({id:fde(t),nom:dde(t)},e,r,n),pde=t=>async(e,r,n)=>await Pl({nom:ade(t),descr:ode(t),variables:ude(t),motsClefs:hde(t),id:Ri(t),vide:mm(t)},e,r,n),mde=t=>async(e,r,n)=>{const i=a=>{const o=Oc(t,a);if(o){const{score:c,clef:u,info:l}=o;n({type:"rsultat",score:c,clef:u,info:l,de:"nom"})}else n()};return await e.nues.suivreNomsNue({idNue:r,f:i})},gde=t=>async(e,r,n)=>{const i=a=>{const o=Oc(t,a);if(o){const{score:c,clef:u,info:l}=o;n({type:"rsultat",score:c,clef:u,info:l,de:"descr"})}else n()};return await e.nues.suivreDescriptionsNue({idNue:r,f:i})},vde=t=>async(e,r,n)=>{const i=async a=>await e.nues.suivreVariablesNue({idNue:r,f:a}),s=Ri(t);return await Us("variable",i,s,e,n)},yde=t=>async(e,r,n)=>{const i=async a=>await e.nues.suivreVariablesNue({idNue:r,f:a}),s=m2(t);return await Us("variable",i,s,e,n)},bde=t=>async(e,r,n)=>await Pl({id:vde(t),nom:yde(t)},e,r,n),wde=t=>async(e,r,n)=>{const i=async a=>await e.nues.suivreMotsClefsNue({idNue:r,f:a}),s=Ri(t);return await Us("motClef",i,s,e,n)},_de=t=>async(e,r,n)=>{const i=async a=>await e.nues.suivreMotsClefsNue({idNue:r,f:a}),s=p2(t);return await Us("motClef",i,s,e,n)},xde=t=>async(e,r,n)=>await Pl({id:wde(t),nom:_de(t)},e,r,n),Bct=t=>async(e,r,n)=>await Pl({nom:mde(t),descr:gde(t),variables:bde(t),motsClefs:xde(t),id:Ri(t),tous:mm(t)},e,r,n),Sde=()=>async(t,e,r)=>{const n={noms:void 0,image:void 0,courriel:void 0},i=()=>({type:"rsultat",score:[Object.keys(n.noms||{}).length>0,n.image,n.courriel].filter(Boolean).length/3,de:"activit",info:{type:"vide"}}),s=d=>{n.noms=d,r(i())},a=d=>{n.image=d,r(i())},o=d=>{n.courriel=d,r(i())},c=await t.profil.suivreNoms({idCompte:e,f:s}),u=await t.profil.suivreImage({idCompte:e,f:a}),l=await t.profil.suivreCourriel({idCompte:e,f:o});return async()=>{await Promise.allSettled([c(),u(),l()])}},Ede=t=>async(e,r,n)=>{const i=a=>{const o=Oc(t,a);if(o){const{score:c,clef:u,info:l}=o;n({type:"rsultat",score:c,clef:u,info:l,de:"nom"})}else n()};return await e.profil.suivreNoms({idCompte:r,f:i})},kde=t=>async(e,r,n)=>{const i=a=>{const o=a?fM(t,a):void 0;if(o&&a){const{score:c,dbut:u,fin:l}=o;n({type:"rsultat",score:c,de:"courriel",info:{type:"texte",dbut:u,fin:l,texte:a}})}else n()};return await e.profil.suivreCourriel({idCompte:r,f:i})},Dct=t=>async(e,r,n)=>{const i=Ede(t),s=kde(t),a=Ri(t),o=mm(t);return await Pl({noms:i,courriel:s,id:a,vide:o},e,r,n)},Mct=t=>async(e,r,n)=>{const i=a=>{const o=Rct(t,a);n({type:"rsultat",score:o,de:"image",info:{type:"vide"}})};return await e.profil.suivreImage({idCompte:r,f:i})},Tde=t=>async(e,r,n)=>{const i=a=>{const o=Oc(t,a);if(o){const{score:c,clef:u,info:l}=o;n({type:"rsultat",score:c,clef:u,info:l,de:"nom"})}else n()};return await e.projets.suivreNomsProjet({idProjet:r,f:i})},Ade=t=>async(e,r,n)=>{const i=a=>{const o=Oc(t,a);if(o){const{score:c,clef:u,info:l}=o;n({type:"rsultat",score:c,clef:u,info:l,de:"descr"})}else n()};return await e.projets.suivreDescriptionsProjet({idProjet:r,f:i})},Nct=t=>async(e,r,n)=>{const i=async a=>await e.projets.suivreBdsProjet({idProjet:r,f:a}),s=Ri(t);return await Us("bd",i,s,e,n)},Cde=t=>async(e,r,n)=>{const i=async a=>await e.projets.suivreBdsProjet({idProjet:r,f:a}),s=pde(t);return await Us("bd",i,s,e,n)},Fct=t=>async(e,r,n)=>{const i=async a=>await e.projets.suivreVariablesProjet({idProjet:r,f:a}),s=Ri(t);return await Us("variable",i,s,e,n)},Lct=t=>async(e,r,n)=>{const i=async a=>await e.projets.suivreVariablesProjet({idProjet:r,f:a}),s=m2(t);return await Us("variable",i,s,e,n)},Ide=t=>async(e,r,n)=>{const i=async a=>await e.projets.suivreVariablesProjet({idProjet:r,f:a}),s=sde(t);return await Us("variable",i,s,e,n)},$ct=t=>async(e,r,n)=>{const i=async a=>await e.projets.suivreMotsClefsProjet({idProjet:r,f:o=>a(o.map(c=>c.idMotClef))}),s=Ri(t);return await Us("motClef",i,s,e,n)},Uct=t=>async(e,r,n)=>{const i=async a=>await e.projets.suivreMotsClefsProjet({idProjet:r,f:o=>a(o.map(c=>c.idMotClef))}),s=p2(t);return await Us("motClef",i,s,e,n)},Pde=t=>async(e,r,n)=>{const i=async a=>await e.projets.suivreMotsClefsProjet({idProjet:r,f:o=>a(o.map(c=>c.idMotClef))}),s=nde(t);return await Us("motClef",i,s,e,n)},jct=t=>async(e,r,n)=>{const i=Tde(t),s=Ade(t),a=Cde(t),o=Ide(t),c=Pde(t),u=Ri(t),l=mm(t);return await Pl({noms:i,descr:s,bd:a,variable:o,motClef:c,id:u,tous:l},e,r,n)};class Ct{client;constructor({client:e}){this.client=e}async rechercherVariables({f:e,nRsultatsDsirs:r,toutLeRseau:n=!0}){return await this.client.rseau.rechercherVariables({f:e,nRsultatsDsirs:r,toutLeRseau:n})}async rechercherVariablesSelonId({idVariable:e,f:r,nRsultatsDsirs:n,toutLeRseau:i=!0}){const s=Ri(e);return await this.client.rseau.rechercherVariables({f:r,nRsultatsDsirs:n,fObjectif:s,toutLeRseau:i})}async rechercherVariablesSelonNom({nomVariable:e,f:r,nRsultatsDsirs:n,toutLeRseau:i=!0}){const s=m2(e);return await this.client.rseau.rechercherVariables({f:r,nRsultatsDsirs:n,fObjectif:s,toutLeRseau:i})}async rechercherVariablesSelonDescr({descrVariable:e,f:r,nRsultatsDsirs:n,toutLeRseau:i=!0}){const s=ide(e);return await this.client.rseau.rechercherVariables({f:r,nRsultatsDsirs:n,fObjectif:s,toutLeRseau:i})}async rechercherVariablesSelonTexte({texte:e,f:r,nRsultatsDsirs:n,toutLeRseau:i=!0}){const s=sde(e);return await this.client.rseau.rechercherVariables({f:r,nRsultatsDsirs:n,fObjectif:s,toutLeRseau:i})}async rechercherMotsClefs({f:e,nRsultatsDsirs:r,toutLeRseau:n=!0}){return await this.client.rseau.rechercherMotsClefs({f:e,nRsultatsDsirs:r,toutLeRseau:n})}async rechercherMotsClefsSelonId({idMotClef:e,f:r,nRsultatsDsirs:n,toutLeRseau:i=!0}){const s=Ri(e);return await this.client.rseau.rechercherMotsClefs({f:r,nRsultatsDsirs:n,fObjectif:s,toutLeRseau:i})}async rechercherMotsClefsSelonNom({nomMotClef:e,f:r,nRsultatsDsirs:n,toutLeRseau:i=!0}){const s=p2(e);return await this.client.rseau.rechercherMotsClefs({f:r,nRsultatsDsirs:n,fObjectif:s,toutLeRseau:i})}async rechercherMotsClefsSelonDescr({descrMotClef:e,f:r,nRsultatsDsirs:n,toutLeRseau:i=!0}){const s=rde(e);return await this.client.rseau.rechercherMotsClefs({f:r,nRsultatsDsirs:n,fObjectif:s,toutLeRseau:i})}async rechercherMotsClefsSelonTexte({texte:e,f:r,nRsultatsDsirs:n,toutLeRseau:i=!0}){const s=nde(e);return await this.client.rseau.rechercherMotsClefs({f:r,nRsultatsDsirs:n,fObjectif:s,toutLeRseau:i})}async rechercherBds({f:e,nRsultatsDsirs:r,toutLeRseau:n=!0}){return await this.client.rseau.rechercherBds({f:e,nRsultatsDsirs:r,toutLeRseau:n})}async rechercherBdsSelonId({idBd:e,f:r,nRsultatsDsirs:n,toutLeRseau:i=!0}){const s=Ri(e);return await this.client.rseau.rechercherBds({f:r,nRsultatsDsirs:n,fObjectif:s,toutLeRseau:i})}async rechercherBdsSelonNom({nomBd:e,f:r,nRsultatsDsirs:n,toutLeRseau:i=!0}){const s=ade(e);return await this.client.rseau.rechercherBds({f:r,nRsultatsDsirs:n,fObjectif:s,toutLeRseau:i})}async rechercherBdsSelonDescr({descrBd:e,f:r,nRsultatsDsirs:n,toutLeRseau:i=!0}){const s=ode(e);return await this.client.rseau.rechercherBds({f:r,nRsultatsDsirs:n,fObjectif:s,toutLeRseau:i})}async rechercherBdsSelonIdMotClef({idMotClef:e,f:r,nRsultatsDsirs:n,toutLeRseau:i=!0}){const s=fde(e);return await this.client.rseau.rechercherBds({f:r,nRsultatsDsirs:n,fObjectif:s,toutLeRseau:i})}async rechercherBdsSelonIdVariable({idVariable:e,f:r,nRsultatsDsirs:n,toutLeRseau:i=!0}){const s=cde(e);return await this.client.rseau.rechercherBds({f:r,nRsultatsDsirs:n,fObjectif:s,toutLeRseau:i})}async rechercherBdsSelonNomMotClef({nomMotClef:e,f:r,nRsultatsDsirs:n,toutLeRseau:i=!0}){const s=dde(e);return await this.client.rseau.rechercherBds({f:r,nRsultatsDsirs:n,fObjectif:s,toutLeRseau:i})}async rechercherBdsSelonNomVariable({nomVariable:e,f:r,nRsultatsDsirs:n,toutLeRseau:i=!0}){const s=lde(e);return await this.client.rseau.rechercherBds({f:r,nRsultatsDsirs:n,fObjectif:s,toutLeRseau:i})}async rechercherBdsSelonMotClef({texte:e,f:r,nRsultatsDsirs:n,toutLeRseau:i=!0}){const s=hde(e);return await this.client.rseau.rechercherBds({f:r,nRsultatsDsirs:n,fObjectif:s,toutLeRseau:i})}async rechercherBdsSelonVariable({texte:e,f:r,nRsultatsDsirs:n,toutLeRseau:i=!0}){const s=ude(e);return await this.client.rseau.rechercherBds({f:r,nRsultatsDsirs:n,fObjectif:s,toutLeRseau:i})}async rechercherBdsSelonTexte({texte:e,f:r,nRsultatsDsirs:n,toutLeRseau:i=!0}){const s=pde(e);return await this.client.rseau.rechercherBds({f:r,nRsultatsDsirs:n,fObjectif:s,toutLeRseau:i})}async rechercherProfilsSelonId({idCompte:e,f:r,nRsultatsDsirs:n}){const i=Ri(e);return await this.client.rseau.rechercherMembres({f:r,nRsultatsDsirs:n,fObjectif:i})}async rechercherProfilsSelonNom({nom:e,f:r,nRsultatsDsirs:n}){const i=Ede(e);return await this.client.rseau.rechercherMembres({f:r,nRsultatsDsirs:n,fObjectif:i})}async rechercherProfilsSelonImage({image:e,f:r,nRsultatsDsirs:n}){const i=Mct(e);return await this.client.rseau.rechercherMembres({f:r,nRsultatsDsirs:n,fObjectif:i})}async rechercherProfilsSelonActivit({f:e,nRsultatsDsirs:r}){const n=Sde();return await this.client.rseau.rechercherMembres({f:e,nRsultatsDsirs:r,fObjectif:n})}async rechercherProfilsSelonCourriel({courriel:e,f:r,nRsultatsDsirs:n}){const i=kde(e);return await this.client.rseau.rechercherMembres({f:r,nRsultatsDsirs:n,fObjectif:i})}async rechercherProfilsSelonTexte({texte:e,f:r,nRsultatsDsirs:n}){const i=Dct(e);return await this.client.rseau.rechercherMembres({f:r,nRsultatsDsirs:n,fObjectif:i})}async rechercherProjets({f:e,nRsultatsDsirs:r,toutLeRseau:n=!0}){return await this.client.rseau.rechercherProjets({f:e,nRsultatsDsirs:r,toutLeRseau:n})}async rechercherProjetsSelonId({idProjet:e,f:r,nRsultatsDsirs:n,toutLeRseau:i=!0}){const s=Ri(e);return await this.client.rseau.rechercherProjets({f:r,nRsultatsDsirs:n,fObjectif:s,toutLeRseau:i})}async rechercherProjetsSelonNom({nomProjet:e,f:r,nRsultatsDsirs:n,toutLeRseau:i=!0}){const s=Tde(e);return await this.client.rseau.rechercherProjets({f:r,nRsultatsDsirs:n,fObjectif:s,toutLeRseau:i})}async rechercherProjetsSelonDescr({descrProjet:e,f:r,nRsultatsDsirs:n,toutLeRseau:i=!0}){const s=Ade(e);return await this.client.rseau.rechercherProjets({f:r,nRsultatsDsirs:n,fObjectif:s,toutLeRseau:i})}async rechercherProjetsSelonIdVariable({idVariable:e,f:r,nRsultatsDsirs:n,toutLeRseau:i=!0}){const s=Fct(e);return await this.client.rseau.rechercherProjets({f:r,nRsultatsDsirs:n,fObjectif:s,toutLeRseau:i})}async rechercherProjetsSelonNomVariable({nomVariable:e,f:r,nRsultatsDsirs:n,toutLeRseau:i=!0}){const s=Lct(e);return await this.client.rseau.rechercherProjets({f:r,nRsultatsDsirs:n,fObjectif:s,toutLeRseau:i})}async rechercherProjetsSelonVariable({texte:e,f:r,nRsultatsDsirs:n,toutLeRseau:i=!0}){const s=Ide(e);return await this.client.rseau.rechercherProjets({f:r,nRsultatsDsirs:n,fObjectif:s,toutLeRseau:i})}async rechercherProjetsSelonIdMotClef({idMotClef:e,f:r,nRsultatsDsirs:n,toutLeRseau:i=!0}){const s=$ct(e);return await this.client.rseau.rechercherProjets({f:r,nRsultatsDsirs:n,fObjectif:s,toutLeRseau:i})}async rechercherProjetsSelonNomMotClef({nomMotClef:e,f:r,nRsultatsDsirs:n,toutLeRseau:i=!0}){const s=Uct(e);return await this.client.rseau.rechercherProjets({f:r,nRsultatsDsirs:n,fObjectif:s,toutLeRseau:i})}async rechercherProjetsSelonMotClef({texte:e,f:r,nRsultatsDsirs:n,toutLeRseau:i=!0}){const s=Pde(e);return await this.client.rseau.rechercherProjets({f:r,nRsultatsDsirs:n,fObjectif:s,toutLeRseau:i})}async rechercherProjetsSelonIdBd({idBd:e,f:r,nRsultatsDsirs:n,toutLeRseau:i=!0}){const s=Nct(e);return await this.client.rseau.rechercherProjets({f:r,nRsultatsDsirs:n,fObjectif:s,toutLeRseau:i})}async rechercherProjetsSelonBd({texte:e,f:r,nRsultatsDsirs:n,toutLeRseau:i=!0}){const s=Cde(e);return await this.client.rseau.rechercherProjets({f:r,nRsultatsDsirs:n,fObjectif:s,toutLeRseau:i})}async rechercherProjetsSelonTexte({texte:e,f:r,nRsultatsDsirs:n,toutLeRseau:i=!0}){const s=jct(e);return await this.client.rseau.rechercherProjets({f:r,nRsultatsDsirs:n,fObjectif:s,toutLeRseau:i})}async rechercherNues({f:e,nRsultatsDsirs:r,toutLeRseau:n=!0}){return await this.client.rseau.rechercherNues({f:e,nRsultatsDsirs:r,toutLeRseau:n})}async rechercherNuesSelonId({idNue:e,f:r,nRsultatsDsirs:n,toutLeRseau:i=!0}){const s=Ri(e);return await this.client.rseau.rechercherNues({f:r,nRsultatsDsirs:n,fObjectif:s,toutLeRseau:i})}async rechercherNuesSelonNom({nomNue:e,f:r,nRsultatsDsirs:n,toutLeRseau:i=!0}){const s=mde(e);return await this.client.rseau.rechercherNues({f:r,nRsultatsDsirs:n,fObjectif:s,toutLeRseau:i})}async rechercherNuesSelonDescr({descrNue:e,f:r,nRsultatsDsirs:n,toutLeRseau:i=!0}){const s=gde(e);return await this.client.rseau.rechercherNues({f:r,nRsultatsDsirs:n,fObjectif:s,toutLeRseau:i})}async rechercherNuesSelonIdMotClef({idMotClef:e,f:r,nRsultatsDsirs:n,toutLeRseau:i=!0}){const s=wde(e);return await this.client.rseau.rechercherNues({f:r,nRsultatsDsirs:n,fObjectif:s,toutLeRseau:i})}async rechercherNuesSelonIdVariable({idVariable:e,f:r,nRsultatsDsirs:n,toutLeRseau:i=!0}){const s=vde(e);return await this.client.rseau.rechercherNues({f:r,nRsultatsDsirs:n,fObjectif:s,toutLeRseau:i})}async rechercherNuesSelonNomMotClef({nomMotClef:e,f:r,nRsultatsDsirs:n,toutLeRseau:i=!0}){const s=_de(e);return await this.client.rseau.rechercherNues({f:r,nRsultatsDsirs:n,fObjectif:s,toutLeRseau:i})}async rechercherNuesSelonNomVariable({nomVariable:e,f:r,nRsultatsDsirs:n,toutLeRseau:i=!0}){const s=yde(e);return await this.client.rseau.rechercherNues({f:r,nRsultatsDsirs:n,fObjectif:s,toutLeRseau:i})}async rechercherNuesSelonMotClef({texte:e,f:r,nRsultatsDsirs:n,toutLeRseau:i=!0}){const s=xde(e);return await this.client.rseau.rechercherNues({f:r,nRsultatsDsirs:n,fObjectif:s,toutLeRseau:i})}async rechercherNuesSelonVariable({texte:e,f:r,nRsultatsDsirs:n,toutLeRseau:i=!0}){const s=bde(e);return await this.client.rseau.rechercherNues({f:r,nRsultatsDsirs:n,fObjectif:s,toutLeRseau:i})}async rechercherNuesSelonTexte({texte:e,f:r,nRsultatsDsirs:n,toutLeRseau:i=!0}){const s=Bct(e);return await this.client.rseau.rechercherNues({f:r,nRsultatsDsirs:n,fObjectif:s,toutLeRseau:i})}}Oe([yt],Ct.prototype,"rechercherVariables",null);Oe([yt],Ct.prototype,"rechercherVariablesSelonId",null);Oe([yt],Ct.prototype,"rechercherVariablesSelonNom",null);Oe([yt],Ct.prototype,"rechercherVariablesSelonDescr",null);Oe([yt],Ct.prototype,"rechercherVariablesSelonTexte",null);Oe([yt],Ct.prototype,"rechercherMotsClefs",null);Oe([yt],Ct.prototype,"rechercherMotsClefsSelonId",null);Oe([yt],Ct.prototype,"rechercherMotsClefsSelonNom",null);Oe([yt],Ct.prototype,"rechercherMotsClefsSelonDescr",null);Oe([yt],Ct.prototype,"rechercherMotsClefsSelonTexte",null);Oe([yt],Ct.prototype,"rechercherBds",null);Oe([yt],Ct.prototype,"rechercherBdsSelonId",null);Oe([yt],Ct.prototype,"rechercherBdsSelonNom",null);Oe([yt],Ct.prototype,"rechercherBdsSelonDescr",null);Oe([yt],Ct.prototype,"rechercherBdsSelonIdMotClef",null);Oe([yt],Ct.prototype,"rechercherBdsSelonIdVariable",null);Oe([yt],Ct.prototype,"rechercherBdsSelonNomMotClef",null);Oe([yt],Ct.prototype,"rechercherBdsSelonNomVariable",null);Oe([yt],Ct.prototype,"rechercherBdsSelonMotClef",null);Oe([yt],Ct.prototype,"rechercherBdsSelonVariable",null);Oe([yt],Ct.prototype,"rechercherBdsSelonTexte",null);Oe([yt],Ct.prototype,"rechercherProfilsSelonId",null);Oe([yt],Ct.prototype,"rechercherProfilsSelonNom",null);Oe([yt],Ct.prototype,"rechercherProfilsSelonImage",null);Oe([yt],Ct.prototype,"rechercherProfilsSelonActivit",null);Oe([yt],Ct.prototype,"rechercherProfilsSelonCourriel",null);Oe([yt],Ct.prototype,"rechercherProfilsSelonTexte",null);Oe([yt],Ct.prototype,"rechercherProjets",null);Oe([yt],Ct.prototype,"rechercherProjetsSelonId",null);Oe([yt],Ct.prototype,"rechercherProjetsSelonNom",null);Oe([yt],Ct.prototype,"rechercherProjetsSelonDescr",null);Oe([yt],Ct.prototype,"rechercherProjetsSelonIdVariable",null);Oe([yt],Ct.prototype,"rechercherProjetsSelonNomVariable",null);Oe([yt],Ct.prototype,"rechercherProjetsSelonVariable",null);Oe([yt],Ct.prototype,"rechercherProjetsSelonIdMotClef",null);Oe([yt],Ct.prototype,"rechercherProjetsSelonNomMotClef",null);Oe([yt],Ct.prototype,"rechercherProjetsSelonMotClef",null);Oe([yt],Ct.prototype,"rechercherProjetsSelonIdBd",null);Oe([yt],Ct.prototype,"rechercherProjetsSelonBd",null);Oe([yt],Ct.prototype,"rechercherProjetsSelonTexte",null);Oe([yt],Ct.prototype,"rechercherNues",null);Oe([yt],Ct.prototype,"rechercherNuesSelonId",null);Oe([yt],Ct.prototype,"rechercherNuesSelonNom",null);Oe([yt],Ct.prototype,"rechercherNuesSelonDescr",null);Oe([yt],Ct.prototype,"rechercherNuesSelonIdMotClef",null);Oe([yt],Ct.prototype,"rechercherNuesSelonIdVariable",null);Oe([yt],Ct.prototype,"rechercherNuesSelonNomMotClef",null);Oe([yt],Ct.prototype,"rechercherNuesSelonNomVariable",null);Oe([yt],Ct.prototype,"rechercherNuesSelonMotClef",null);Oe([yt],Ct.prototype,"rechercherNuesSelonVariable",null);Oe([yt],Ct.prototype,"rechercherNuesSelonTexte",null);class Vct{index=0;input="";new(e){return this.index=0,this.input=e,this}readAtomically(e){const r=this.index,n=e();return n===void 0&&(this.index=r),n}parseWith(e){const r=e();if(this.index===this.input.length)return r}peekChar(){if(!(this.index>=this.input.length))return this.input[this.index]}readChar(){if(!(this.index>=this.input.length))return this.input[this.index++]}readGivenChar(e){return this.readAtomically(()=>{const r=this.readChar();if(r===e)return r})}readSeparator(e,r,n){return this.readAtomically(()=>{if(!(r>0&&this.readGivenChar(e)===void 0))return n()})}readNumber(e,r,n,i){return this.readAtomically(()=>{let s=0,a=0;const o=this.peekChar();if(o===void 0)return;const c=o==="0",u=2**(8*i)-1;for(;;){const l=this.readAtomically(()=>{const f=this.readChar();if(f===void 0)return;const d=Number.parseInt(f,e);if(!Number.isNaN(d))return d});if(l===void 0)break;if(s*=e,s+=l,s>u||(a+=1,r!==void 0&&a>r))return}if(a!==0)return!n&&c&&a>1?void 0:s})}readIPv4Addr(){return this.readAtomically(()=>{const e=new Uint8Array(4);for(let r=0;r<e.length;r++){const n=this.readSeparator(".",r,()=>this.readNumber(10,3,!1,1));if(n===void 0)return;e[r]=n}return e})}readIPv6Addr(){const e=r=>{for(let n=0;n<r.length/2;n++){const i=n*2;if(n<r.length-3){const a=this.readSeparator(":",n,()=>this.readIPv4Addr());if(a!==void 0)return r[i]=a[0],r[i+1]=a[1],r[i+2]=a[2],r[i+3]=a[3],[i+4,!0]}const s=this.readSeparator(":",n,()=>this.readNumber(16,4,!0,2));if(s===void 0)return[i,!1];r[i]=s>>8,r[i+1]=s&255}return[r.length,!1]};return this.readAtomically(()=>{const r=new Uint8Array(16),[n,i]=e(r);if(n===16)return r;if(i||this.readGivenChar(":")===void 0||this.readGivenChar(":")===void 0)return;const s=new Uint8Array(14),a=16-(n+2),[o]=e(s.subarray(0,a));return r.set(s.subarray(0,o),16-o),r})}readIPAddr(){return this.readIPv4Addr()??this.readIPv6Addr()}}const Rde=45,qct=15,wp=new Vct;function Ode(t){if(!(t.length>qct))return wp.new(t).parseWith(()=>wp.readIPv4Addr())}function Bde(t){if(t.includes("%")&&(t=t.split("%")[0]),!(t.length>Rde))return wp.new(t).parseWith(()=>wp.readIPv6Addr())}function w6(t,e=!1){if(t.includes("%")&&(t=t.split("%")[0]),t.length>Rde)return;const r=wp.new(t).parseWith(()=>wp.readIPAddr());if(r)return e&&r.length===4?Uint8Array.from([0,0,0,0,0,0,0,0,0,0,255,255,r[0],r[1],r[2],r[3]]):r}function zct(t,e,r){let n=0;for(const i of t)if(!(n<e)){if(n>r)break;if(i!==255)return!1;n++}return!0}function Hct(t,e,r,n){let i=0;for(const s of t)if(!(i<r)){if(i>n)break;if(s!==e[i])return!1;i++}return!0}function Wct(t){switch(t.length){case Gv:return t.join(".");case Kv:{const e=[];for(let r=0;r<t.length;r++)r%2===0&&e.push(t[r].toString(16).padStart(2,"0")+t[r+1].toString(16).padStart(2,"0"));return e.join(":")}default:throw new Error("Invalid ip length")}}function Gct(t){let e=0;for(let[r,n]of t.entries()){if(n===255){e+=8;continue}for(;(n&128)!=0;)e++,n=n<<1;if((n&128)!=0)return-1;for(let i=r+1;i<t.length;i++)if(t[i]!=0)return-1;break}return e}function Kct(t){let e="0x";for(const r of t)e+=(r>>4).toString(16)+(r&15).toString(16);return e}const Gv=4,Kv=16,Xct=new Uint8Array([0,0,0,0,0,0,0,0,0,0,255,255]);function Dde(t,e){e.length===Kv&&t.length===Gv&&zct(e,0,11)&&(e=e.slice(12)),e.length===Gv&&t.length===Kv&&Hct(t,Xct,0,11)&&(t=t.slice(12));const r=t.length;if(r!=e.length)throw new Error("Failed to mask ip");const n=new Uint8Array(r);for(let i=0;i<r;i++)n[i]=t[i]&e[i];return n}function Yct(t,e){if(typeof e=="string"&&(e=w6(e)),e==null)throw new Error("Invalid ip");if(e.length!==t.network.length)return!1;for(let r=0;r<e.length;r++)if((t.network[r]&t.mask[r])!==(e[r]&t.mask[r]))return!1;return!0}function Zct(t){const[e,r]=t.split("/");if(!e||!r)throw new Error("Failed to parse given CIDR: "+t);let n=Gv,i=Ode(e);if(i==null&&(n=Kv,i=Bde(e),i==null))throw new Error("Failed to parse given CIDR: "+t);const s=parseInt(r,10);if(Number.isNaN(s)||String(s).length!==r.length||s<0||s>n*8)throw new Error("Failed to parse given CIDR: "+t);const a=Mde(s,8*n);return{network:Dde(i,a),mask:a}}function Mde(t,e){if(e!==8*Gv&&e!==8*Kv)throw new Error("Invalid CIDR mask");if(t<0||t>e)throw new Error("Invalid CIDR mask");const r=e/8,n=new Uint8Array(r);for(let i=0;i<r;i++){if(t>=8){n[i]=255,t-=8;continue}n[i]=255-(255>>t),t=0}return n}class Nde{constructor(e,r){if(r==null)({network:this.network,mask:this.mask}=Zct(e));else{const n=w6(e);if(n==null)throw new Error("Failed to parse network");r=String(r);const i=parseInt(r,10);if(Number.isNaN(i)||String(i).length!==r.length||i<0||i>n.length*8){const s=w6(r);if(s==null)throw new Error("Failed to parse mask");this.mask=s}else this.mask=Mde(i,8*n.length);this.network=Dde(n,this.mask)}}contains(e){return Yct({network:this.network,mask:this.mask},e)}toString(){const e=Gct(this.mask),r=e!==-1?String(e):Kct(this.mask);return Wct(this.network)+"/"+r}}function Jct(t,e){return new Nde(t).contains(e)}function _p(t){return!!Ode(t)}function dM(t){return!!Bde(t)}function Fde(t){return!!w6(t)}const KX=_p,Qct=dM,Lde=function(t){let e=0;if(t=t.toString().trim(),KX(t)){const r=new Uint8Array(e+4);return t.split(/\./g).forEach(n=>{r[e++]=parseInt(n,10)&255}),r}if(Qct(t)){const r=t.split(":",8);let n;for(n=0;n<r.length;n++){const s=KX(r[n]);let a;s&&(a=Lde(r[n]),r[n]=nt(a.slice(0,2),"base16")),a!=null&&++n<8&&r.splice(n,0,nt(a.slice(2,4),"base16"))}if(r[0]==="")for(;r.length<8;)r.unshift("0");else if(r[r.length-1]==="")for(;r.length<8;)r.push("0");else if(r.length<8){for(n=0;n<r.length&&r[n]!=="";n++);const s=[n,1];for(n=9-r.length;n>0;n--)s.push("0");r.splice.apply(r,s)}const i=new Uint8Array(e+16);for(n=0;n<r.length;n++){const s=parseInt(r[n],16);i[e++]=s>>8&255,i[e++]=s&255}return i}throw new Error("invalid ip address")},elt=function(t,e=0,r){e=~~e,r=r??t.length-e;const n=new DataView(t.buffer);if(r===4){const i=[];for(let s=0;s<r;s++)i.push(t[e+s]);return i.join(".")}if(r===16){const i=[];for(let s=0;s<r;s+=2)i.push(n.getUint16(e+s).toString(16));return i.join(":").replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3").replace(/:{3,4}/,"::")}return""},Na=-1,Xv={},sP={},tlt=[[4,32,"ip4"],[6,16,"tcp"],[33,16,"dccp"],[41,128,"ip6"],[42,Na,"ip6zone"],[43,8,"ipcidr"],[53,Na,"dns",!0],[54,Na,"dns4",!0],[55,Na,"dns6",!0],[56,Na,"dnsaddr",!0],[132,16,"sctp"],[273,16,"udp"],[275,0,"p2p-webrtc-star"],[276,0,"p2p-webrtc-direct"],[277,0,"p2p-stardust"],[280,0,"webrtc-direct"],[281,0,"webrtc"],[290,0,"p2p-circuit"],[301,0,"udt"],[302,0,"utp"],[400,Na,"unix",!1,!0],[421,Na,"ipfs"],[421,Na,"p2p"],[443,0,"https"],[444,96,"onion"],[445,296,"onion3"],[446,Na,"garlic64"],[448,0,"tls"],[449,Na,"sni"],[460,0,"quic"],[461,0,"quic-v1"],[465,0,"webtransport"],[466,Na,"certhash"],[477,0,"ws"],[478,0,"wss"],[479,0,"p2p-websocket-star"],[480,0,"http"],[481,Na,"http-path"],[777,Na,"memory"]];tlt.forEach(t=>{const e=rlt(...t);sP[e.code]=e,Xv[e.name]=e});function rlt(t,e,r,n,i){return{code:t,size:e,name:r,resolvable:!!n,path:!!i}}function Xt(t){if(typeof t=="number"){if(sP[t]!=null)return sP[t];throw new Error(`no protocol with code: ${t}`)}else if(typeof t=="string"){if(Xv[t]!=null)return Xv[t];throw new Error(`no protocol with name: ${t}`)}throw new Error(`invalid protocol id type: ${typeof t}`)}const nlt=Xt("ip4"),ilt=Xt("ip6"),slt=Xt("ipcidr");function hM(t,e){switch(Xt(t).code){case 4:case 41:return clt(e);case 42:return $T(e);case 43:return nt(e,"base10");case 6:case 273:case 33:case 132:return $de(e).toString();case 53:case 54:case 55:case 56:case 400:case 449:case 777:return $T(e);case 421:return dlt(e);case 444:return ZX(e);case 445:return ZX(e);case 466:return flt(e);case 481:return globalThis.encodeURIComponent($T(e));default:return nt(e,"base16")}}function XX(t,e){switch(Xt(t).code){case 4:return YX(e);case 41:return YX(e);case 42:return LT(e);case 43:return tt(e,"base10");case 6:case 273:case 33:case 132:return pM(parseInt(e,10));case 53:case 54:case 55:case 56:case 400:case 449:case 777:return LT(e);case 421:return llt(e);case 444:return hlt(e);case 445:return plt(e);case 466:return ult(e);case 481:return LT(globalThis.decodeURIComponent(e));default:return tt(e,"base16")}}function alt(t){let e,r;if(t.stringTuples().forEach(([n,i])=>{(n===nlt.code||n===ilt.code)&&(r=i),n===slt.code&&(e=i)}),e==null||r==null)throw new Error("Invalid multiaddr");return new Nde(r,e)}const FT=Object.values(kv).map(t=>t.decoder),olt=function(){let t=FT[0].or(FT[1]);return FT.slice(2).forEach(e=>t=t.or(e)),t}();function YX(t){if(!Fde(t))throw new Error("invalid ip address");return Lde(t)}function clt(t){const e=elt(t,0,t.length);if(e==null)throw new Error("ipBuff is required");if(!Fde(e))throw new Error("invalid ip address");return e}function pM(t){const e=new ArrayBuffer(2);return new DataView(e).setUint16(0,t),new Uint8Array(e)}function $de(t){return new DataView(t.buffer).getUint16(t.byteOffset)}function LT(t){const e=tt(t),r=Uint8Array.from(Ds(e.length));return qn([r,e],r.length+e.length)}function $T(t){const e=kl(t);if(t=t.slice(vn(e)),t.length!==e)throw new Error("inconsistent lengths");return nt(t)}function llt(t){let e;t[0]==="Q"||t[0]==="1"?e=Zn($n.decode(`z${t}`)).bytes:e=mt.parse(t).multihash.bytes;const r=Uint8Array.from(Ds(e.length));return qn([r,e],r.length+e.length)}function ult(t){const e=olt.decode(t),r=Uint8Array.from(Ds(e.length));return qn([r,e],r.length+e.length)}function flt(t){const e=kl(t),r=t.slice(vn(e));if(r.length!==e)throw new Error("inconsistent lengths");return"u"+nt(r,"base64url")}function dlt(t){const e=kl(t),r=t.slice(vn(e));if(r.length!==e)throw new Error("inconsistent lengths");return nt(r,"base58btc")}function hlt(t){const e=t.split(":");if(e.length!==2)throw new Error(`failed to parse onion addr: ["'${e.join('", "')}'"]' does not contain a port number`);if(e[0].length!==16)throw new Error(`failed to parse onion addr: ${e[0]} not a Tor onion address.`);const r=ma.decode("b"+e[0]),n=parseInt(e[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");const i=pM(n);return qn([r,i],r.length+i.length)}function plt(t){const e=t.split(":");if(e.length!==2)throw new Error(`failed to parse onion addr: ["'${e.join('", "')}'"]' does not contain a port number`);if(e[0].length!==56)throw new Error(`failed to parse onion addr: ${e[0]} not a Tor onion3 address.`);const r=ma.decode(`b${e[0]}`),n=parseInt(e[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");const i=pM(n);return qn([r,i],r.length+i.length)}function ZX(t){const e=t.slice(0,t.length-2),r=t.slice(t.length-2),n=nt(e,"base32"),i=$de(r);return`${n}:${i}`}function mlt(t){t=aP(t);const e=[],r=[];let n=null;const i=t.split("/").slice(1);if(i.length===1&&i[0]==="")return{bytes:new Uint8Array,string:"/",tuples:[],stringTuples:[],path:null};for(let s=0;s<i.length;s++){const a=i[s],o=Xt(a);if(o.size===0){e.push([o.code]),r.push([o.code]);continue}if(s++,s>=i.length)throw new Vde("invalid address: "+t);if(o.path===!0){n=aP(i.slice(s).join("/")),e.push([o.code,XX(o.code,n)]),r.push([o.code,n]);break}const c=XX(o.code,i[s]);e.push([o.code,c]),r.push([o.code,hM(o.code,c)])}return{string:Ude(r),bytes:jde(e),tuples:e,stringTuples:r,path:n}}function JX(t){const e=[],r=[];let n=null,i=0;for(;i<t.length;){const s=kl(t,i),a=vn(s),o=Xt(s),c=glt(o,t.slice(i+a));if(c===0){e.push([s]),r.push([s]),i+=a;continue}const u=t.slice(i+a,i+a+c);if(i+=c+a,i>t.length)throw new Vde("Invalid address Uint8Array: "+nt(t,"base16"));e.push([s,u]);const l=hM(s,u);if(r.push([s,l]),o.path===!0){n=l;break}}return{bytes:Uint8Array.from(t),string:Ude(r),tuples:e,stringTuples:r,path:n}}function Ude(t){const e=[];return t.map(r=>{const n=Xt(r[0]);return e.push(n.name),r.length>1&&r[1]!=null&&e.push(r[1]),null}),aP(e.join("/"))}function jde(t){return qn(t.map(e=>{const r=Xt(e[0]);let n=Uint8Array.from(Ds(r.code));return e.length>1&&e[1]!=null&&(n=qn([n,e[1]])),n}))}function glt(t,e){if(t.size>0)return t.size/8;if(t.size===0)return 0;{const r=kl(e instanceof Uint8Array?e:Uint8Array.from(e));return r+vn(r)}}function aP(t){return"/"+t.trim().split("/").filter(e=>e).join("/")}class Vde extends Error{static name="ParseError";name="ParseError";constructor(e){super(`Error parsing address: ${e}`)}}const vlt=Symbol.for("nodejs.util.inspect.custom"),qde=Symbol.for("@multiformats/js-multiaddr/multiaddr"),ylt=[Xt("dns").code,Xt("dns4").code,Xt("dns6").code,Xt("dnsaddr").code];class blt extends Error{constructor(e="No available resolver"){super(e),this.name="NoAvailableResolverError"}}class w1{bytes;#e;#t;#r;#i;[qde]=!0;constructor(e){e==null&&(e="");let r;if(e instanceof Uint8Array)r=JX(e);else if(typeof e=="string"){if(e.length>0&&e.charAt(0)!=="/")throw new Error(`multiaddr "${e}" must start with a "/"`);r=mlt(e)}else if(r_(e))r=JX(e.bytes);else throw new Error("addr must be a string, Buffer, or another Multiaddr");this.bytes=r.bytes,this.#e=r.string,this.#t=r.tuples,this.#r=r.stringTuples,this.#i=r.path}toString(){return this.#e}toJSON(){return this.toString()}toOptions(){let e,r,n,i,s="";const a=Xt("tcp"),o=Xt("udp"),c=Xt("ip4"),u=Xt("ip6"),l=Xt("dns6"),f=Xt("ip6zone");for(const[h,m]of this.stringTuples())h===f.code&&(s=`%${m??""}`),ylt.includes(h)&&(r=a.name==="tcp"?"tcp":"udp",i=443,n=`${m??""}${s}`,e=h===l.code?6:4),(h===a.code||h===o.code)&&(r=Xt(h).name==="tcp"?"tcp":"udp",i=parseInt(m??"")),(h===c.code||h===u.code)&&(r=Xt(h).name==="tcp"?"tcp":"udp",n=`${m??""}${s}`,e=h===u.code?6:4);if(e==null||r==null||n==null||i==null)throw new Error('multiaddr must have a valid format: "/{ip4, ip6, dns4, dns6, dnsaddr}/{address}/{tcp, udp}/{port}".');return{family:e,host:n,transport:r,port:i}}protos(){return this.#t.map(([e])=>Object.assign({},Xt(e)))}protoCodes(){return this.#t.map(([e])=>e)}protoNames(){return this.#t.map(([e])=>Xt(e).name)}tuples(){return this.#t.map(([e,r])=>r==null?[e]:[e,r])}stringTuples(){return this.#r.map(([e,r])=>r==null?[e]:[e,r])}encapsulate(e){return e=new w1(e),new w1(this.toString()+e.toString())}decapsulate(e){const r=e.toString(),n=this.toString(),i=n.lastIndexOf(r);if(i<0)throw new Error(`Address ${this.toString()} does not contain subaddress: ${e.toString()}`);return new w1(n.slice(0,i))}decapsulateCode(e){const r=this.tuples();for(let n=r.length-1;n>=0;n--)if(r[n][0]===e)return new w1(jde(r.slice(0,n)));return this}getPeerId(){try{let e=[];this.stringTuples().forEach(([n,i])=>{n===Xv.p2p.code&&e.push([n,i]),n===Xv["p2p-circuit"].code&&(e=[])});const r=e.pop();if(r?.[1]!=null){const n=r[1];return n[0]==="Q"||n[0]==="1"?nt($n.decode(`z${n}`),"base58btc"):nt(mt.parse(n).multihash.bytes,"base58btc")}return null}catch{return null}}getPath(){return this.#i}equals(e){return Tr(this.bytes,e.bytes)}async resolve(e){const r=this.protos().find(s=>s.resolvable);if(r==null)return[this];const n=mM.get(r.name);if(n==null)throw new blt(`no available resolver for ${r.name}`);return(await n(this,e)).map(s=>Mt(s))}nodeAddress(){const e=this.toOptions();if(e.transport!=="tcp"&&e.transport!=="udp")throw new Error(`multiaddr must have a valid format - no protocol with name: "${e.transport}". Must have a valid transport protocol: "{tcp, udp}"`);return{family:e.family,address:e.host,port:e.port}}isThinWaistAddress(e){const r=(e??this).protos();return!(r.length!==2||r[0].code!==4&&r[0].code!==41||r[1].code!==6&&r[1].code!==273)}[vlt](){return`Multiaddr(${this.#e})`}}const mM=new Map;function r_(t){return!!t?.[qde]}function Mt(t){return new w1(t)}const zde=Symbol.for("nodejs.util.inspect.custom"),wlt=114;class gM{type;multihash;publicKey;string;constructor(e){this.type=e.type,this.multihash=e.multihash,Object.defineProperty(this,"string",{enumerable:!1,writable:!0})}get[Symbol.toStringTag](){return`PeerId(${this.toString()})`}[YR]=!0;toString(){return this.string==null&&(this.string=$n.encode(this.multihash.bytes).slice(1)),this.string}toMultihash(){return this.multihash}toCID(){return mt.createV1(wlt,this.multihash)}toJSON(){return this.toString()}equals(e){if(e==null)return!1;if(e instanceof Uint8Array)return Tr(this.multihash.bytes,e);if(typeof e=="string")return this.toString()===e;if(e?.toMultihash()?.bytes!=null)return Tr(this.multihash.bytes,e.toMultihash().bytes);throw new Error("not valid Id")}[zde](){return`PeerId(${this.toString()})`}}class Hde extends gM{type="RSA";publicKey;constructor(e){super({...e,type:"RSA"}),this.publicKey=e.publicKey}}class Wde extends gM{type="Ed25519";publicKey;constructor(e){super({...e,type:"Ed25519"}),this.publicKey=e.publicKey}}class Gde extends gM{type="secp256k1";publicKey;constructor(e){super({...e,type:"secp256k1"}),this.publicKey=e.publicKey}}const _lt=2336;class Kde{type="url";multihash;publicKey;url;constructor(e){this.url=e.toString(),this.multihash=Kf.digest(tt(this.url))}[zde](){return`PeerId(${this.url})`}[YR]=!0;toString(){return this.toCID().toString()}toMultihash(){return this.multihash}toCID(){return mt.createV1(_lt,this.toMultihash())}toJSON(){return this.toString()}equals(e){return e==null?!1:(e instanceof Uint8Array&&(e=nt(e)),e.toString()===this.toString())}}const xlt=114,QX=2336;function Ln(t,e){let r;if(t.charAt(0)==="1"||t.charAt(0)==="Q")r=Zn($n.decode(`z${t}`));else{if(t.startsWith("k51qzi5uqu5")||t.startsWith("kzwfwjn5ji4")||t.startsWith("k2k4r8")||t.startsWith("bafz"))return gm(mt.parse(t));throw new Ze('Please pass a multibase decoder for strings that do not start with "1" or "Q"')}return Aa(r)}function Yh(t){if(t.type==="Ed25519")return new Wde({multihash:t.toCID().multihash,publicKey:t});if(t.type==="secp256k1")return new Gde({multihash:t.toCID().multihash,publicKey:t});if(t.type==="RSA")return new Hde({multihash:t.toCID().multihash,publicKey:t});throw new Vp}function Slt(t){return Yh(t.publicKey)}function Aa(t){if(klt(t))return new Hde({multihash:t});if(Elt(t))try{const e=goe(t);if(e.type==="Ed25519")return new Wde({multihash:t,publicKey:e});if(e.type==="secp256k1")return new Gde({multihash:t,publicKey:e})}catch{const r=nt(t.digest);return new Kde(new URL(r))}throw new JR("Supplied PeerID Multihash is invalid")}function gm(t){if(t?.multihash==null||t.version==null||t.version===1&&t.code!==xlt&&t.code!==QX)throw new v6e("Supplied PeerID CID is invalid");if(t.code===QX){const e=nt(t.multihash.digest);return new Kde(new URL(e))}return Aa(t.multihash)}function Elt(t){return t.code===Kf.code}function klt(t){return t.code===ci.code}var UT={},jT,eY;function Tlt(){if(eY)return jT;eY=1;function t(e,r){typeof r=="boolean"&&(r={forever:r}),this._originalTimeouts=JSON.parse(JSON.stringify(e)),this._timeouts=e,this._options=r||{},this._maxRetryTime=r&&r.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._timer=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}return jT=t,t.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts.slice(0)},t.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timer&&clearTimeout(this._timer),this._timeouts=[],this._cachedTimeouts=null},t.prototype.retry=function(e){if(this._timeout&&clearTimeout(this._timeout),!e)return!1;var r=new Date().getTime();if(e&&r-this._operationStart>=this._maxRetryTime)return this._errors.push(e),this._errors.unshift(new Error("RetryOperation timeout occurred")),!1;this._errors.push(e);var n=this._timeouts.shift();if(n===void 0)if(this._cachedTimeouts)this._errors.splice(0,this._errors.length-1),n=this._cachedTimeouts.slice(-1);else return!1;var i=this;return this._timer=setTimeout(function(){i._attempts++,i._operationTimeoutCb&&(i._timeout=setTimeout(function(){i._operationTimeoutCb(i._attempts)},i._operationTimeout),i._options.unref&&i._timeout.unref()),i._fn(i._attempts)},n),this._options.unref&&this._timer.unref(),!0},t.prototype.attempt=function(e,r){this._fn=e,r&&(r.timeout&&(this._operationTimeout=r.timeout),r.cb&&(this._operationTimeoutCb=r.cb));var n=this;this._operationTimeoutCb&&(this._timeout=setTimeout(function(){n._operationTimeoutCb()},n._operationTimeout)),this._operationStart=new Date().getTime(),this._fn(this._attempts)},t.prototype.try=function(e){console.log("Using RetryOperation.try() is deprecated"),this.attempt(e)},t.prototype.start=function(e){console.log("Using RetryOperation.start() is deprecated"),this.attempt(e)},t.prototype.start=t.prototype.try,t.prototype.errors=function(){return this._errors},t.prototype.attempts=function(){return this._attempts},t.prototype.mainError=function(){if(this._errors.length===0)return null;for(var e={},r=null,n=0,i=0;i<this._errors.length;i++){var s=this._errors[i],a=s.message,o=(e[a]||0)+1;e[a]=o,o>=n&&(r=s,n=o)}return r},jT}var tY;function Alt(){return tY||(tY=1,function(t){var e=Tlt();t.operation=function(r){var n=t.timeouts(r);return new e(n,{forever:r&&(r.forever||r.retries===1/0),unref:r&&r.unref,maxRetryTime:r&&r.maxRetryTime})},t.timeouts=function(r){if(r instanceof Array)return[].concat(r);var n={retries:10,factor:2,minTimeout:1*1e3,maxTimeout:1/0,randomize:!1};for(var i in r)n[i]=r[i];if(n.minTimeout>n.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var s=[],a=0;a<n.retries;a++)s.push(this.createTimeout(a,n));return r&&r.forever&&!s.length&&s.push(this.createTimeout(a,n)),s.sort(function(o,c){return o-c}),s},t.createTimeout=function(r,n){var i=n.randomize?Math.random()+1:1,s=Math.round(i*Math.max(n.minTimeout,1)*Math.pow(n.factor,r));return s=Math.min(s,n.maxTimeout),s},t.wrap=function(r,n,i){if(n instanceof Array&&(i=n,n=null),!i){i=[];for(var s in r)typeof r[s]=="function"&&i.push(s)}for(var a=0;a<i.length;a++){var o=i[a],c=r[o];r[o]=function(l){var f=t.operation(n),d=Array.prototype.slice.call(arguments,1),h=d.pop();d.push(function(m){f.retry(m)||(m&&(arguments[0]=f.mainError()),h.apply(this,arguments))}),f.attempt(function(){l.apply(r,d)})}.bind(r,c),r[o].options=n}}}(UT)),UT}var VT,rY;function Clt(){return rY||(rY=1,VT=Alt()),VT}var Ilt=Clt();const Plt=In(Ilt),Rlt=Object.prototype.toString,Olt=t=>Rlt.call(t)==="[object Error]",Blt=new Set(["network error","Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Load failed","Network request failed","fetch failed","terminated"]);function Dlt(t){return t&&Olt(t)&&t.name==="TypeError"&&typeof t.message=="string"?t.message==="Load failed"?t.stack===void 0:Blt.has(t.message):!1}let Xde=class extends Error{constructor(e){super(),e instanceof Error?(this.originalError=e,{message:e}=e):(this.originalError=new Error(e),this.originalError.stack=this.stack),this.name="AbortError",this.message=e}};const nY=(t,e,r)=>{const n=r.retries-(e-1);return t.attemptNumber=e,t.retriesLeft=n,t};async function Yde(t,e){return new Promise((r,n)=>{e={...e},e.onFailedAttempt??=()=>{},e.shouldRetry??=()=>!0,e.retries??=10;const i=Plt.operation(e),s=()=>{i.stop(),n(e.signal?.reason)};e.signal&&!e.signal.aborted&&e.signal.addEventListener("abort",s,{once:!0});const a=()=>{e.signal?.removeEventListener("abort",s),i.stop()};i.attempt(async o=>{try{const c=await t(o);a(),r(c)}catch(c){try{if(!(c instanceof Error))throw new TypeError(`Non-error was thrown: "${c}". You should only throw errors.`);if(c instanceof Xde)throw c.originalError;if(c instanceof TypeError&&!Dlt(c))throw c;if(nY(c,o,e),await e.shouldRetry(c)||(i.stop(),n(c)),await e.onFailedAttempt(c),!i.retry(c))throw i.mainError()}catch(u){nY(u,o,e),a(),n(u)}}})})}const iY={type:"object",additionalProperties:{type:"string"},required:[]},sY=1e3*10,Mlt=.8,Nlt=.9,Rw=.9,Flt=.7,Llt=1e3*60*60*24*30,$lt=50;class ki extends zu{client;bloqusPrivs;_ferm;dispositifsEnLigne;connexionsDirectes;fsOublier;vnements;constructor({client:e}){super({client:e,clef:"rseau",schmaBdPrincipale:iY}),this.client=e,this.bloqusPrivs=new Set,this.dispositifsEnLigne={},this.connexionsDirectes={},this.fsOublier=[],this._ferm=!1,this.vnements=new om.TypedEmitter}async initialiser(){const e=await this.client.obtDeStockageLocal({clef:"dispositifsEnLigne"});this.dispositifsEnLigne=e?JSON.parse(e):{};const{sfip:r}=await this.client.attendreSfipEtOrbite(),n={},i=r.libp2p.services.pubsub,s=r.libp2p,a=f=>{const d=f.detail.msg,h=ti();if(d.topic===this.client.sujet_rseau)try{const m=this.messageGossipSubReu({msg:JSON.parse(new TextDecoder().decode(d.data))});n[h]=m,m.then(()=>{delete n[h]})}catch(m){console.error(m.toString()),console.error(m.stack.toString())}};i.addEventListener("gossipsub:message",a),i.subscribe(this.client.sujet_rseau);const o=async({connection:f,stream:d})=>{const h=String(f.remotePeer);if(!this.connexionsDirectes[h])try{this.connexionsDirectes[h]=Po(),Un(d,async m=>{for await(const p of m){const g=p.subarray(),v=JSON.parse(new TextDecoder().decode(g));this.vnements.emit("messageDirecte",{de:h,message:v})}}),Un(this.connexionsDirectes[h],d)}catch{delete this.connexionsDirectes[h]}};await s.handle(TT,o,{runOnLimitedConnection:!0}),s.addEventListener("peer:disconnect",({detail:f})=>delete this.connexionsDirectes[f.toString()]),this.fsOublier.push(await this.suivreMessagesDirectes({type:"Je veux rejoindre ce compte",f:({contenu:f})=>this.client.considrerRequteRejoindreCompte({requte:f})})),this.fsOublier.push(async()=>{await s.unhandle(TT),i.isStarted()&&i.unsubscribe(this.client.sujet_rseau),i.removeEventListener("gossipsub:message",a),await Promise.allSettled(Object.values(n))});const c=()=>{this.vnements.emit("changementConnexions")},u=["peer:connect","peer:disconnect","peer:update"];for(const f of u)s.addEventListener(f,c);this.fsOublier.push(...u.map(f=>async()=>s.removeEventListener(f,c)));const l=setInterval(async()=>{await this.direSalut()},sY);this.fsOublier.unshift(async()=>clearInterval(l)),await this.direSalut()}async obtFluxDispositif({idDispositif:e,signal:r}){const n=Pr([this.client.signaleurArrt.signal,...r?[r]:[]]),{sfip:i}=await this.client.attendreSfipEtOrbite(),s=await wr(async u=>await this.suivreConnexionsDispositifs({f:async l=>{const f=l?.find(d=>d.infoDispositif.idDispositif===e);if(f)return await u(f.infoDispositif.idLibp2p)}}));if(this.connexionsDirectes[s])return this.connexionsDirectes[s];const a=Ln(s);await i.libp2p.dial(a);const o=await Yde(async()=>{if(n.aborted)throw new Xde("Opration annule");return await i.libp2p.dialProtocol(a,TT,{signal:n,runOnLimitedConnection:!0})});n.clear(),Un(o,async u=>{for await(const l of u){const f=l.subarray(),d=JSON.parse(new TextDecoder().decode(f));this.vnements.emit("messageDirecte",{de:s,message:d})}});const c=Po();return this.connexionsDirectes[s]=c,Un(c,o),c}async envoyerMessageGossipsub({message:e,sujet:r}){r??=this.client.sujet_rseau;const n=(await this.client.attendreSfipEtOrbite()).sfip.libp2p.services.pubsub,i=new TextEncoder().encode(JSON.stringify(e));return(await n.publish(r,Me.from(i))).recipients.map(a=>a.toString())}async suivreMessagesGossipsub({sujet:e,f:r}){const n=(await this.client.attendreSfipEtOrbite()).sfip.libp2p.services.pubsub;n.subscribe(e);const i=async s=>{const a=s.detail.msg;if(a.topic===e){const o=new TextDecoder().decode(a.data);await r(o)}};return n.addEventListener("gossipsub:message",i),async()=>{n.removeEventListener("gossipsub:message",i)}}async suivreMesAdresses({f:e}){const{sfip:r}=await this.client.attendreSfipEtOrbite(),n=r.libp2p.getMultiaddrs().map(s=>s.toString());await e(n);const i=async s=>{const a=s.detail.peer.addresses.map(o=>o.multiaddr.toString());await e(a)};return r.libp2p.addEventListener("self:peer:update",i),async()=>r.libp2p.removeEventListener("self:peer:update",i)}async connecterAdresse({adresse:e}){const{sfip:r}=await this.client.attendreSfipEtOrbite();await r.libp2p.dial(Mt(e))}async envoyerMessageAuDispositif({msg:e,idDispositif:r,signal:n}){const i=await this.obtFluxDispositif({idDispositif:r,signal:n}),s=new TextEncoder().encode(JSON.stringify(e));i.push(s)}async envoyerMessageAuMembre({msg:e,idCompte:r}){const n=Date.now(),i=Object.values(this.dispositifsEnLigne).filter(s=>s.infoDispositif.idCompte===r).filter(s=>s.vu&&n-s.vu<sY+1e3*30);if(!i.length)throw new Error(`Aucun dispositif prsentement en ligne pour membre ${r}`);await Promise.allSettled(i.map(async s=>{await this.envoyerMessageAuDispositif({msg:e,idDispositif:s.infoDispositif.idDispositif})}))}async suivreMessagesDirectes({f:e,type:r,de:n}){n&&(n=await wr(async s=>await this.suivreConnexionsDispositifs({f:async a=>{const o=a?.find(c=>c.infoDispositif.idDispositif===n);if(o)return await s(o.infoDispositif.idLibp2p)}})));const i=async({de:s,message:a})=>{r&&a.type!==r||n&&n!==s||await e(a)};return this.vnements.on("messageDirecte",i),async()=>{this.vnements.off("messageDirecte",i)}}async direSalut(){const{orbite:e}=await this.client.attendreSfipEtOrbite(),r={idLibp2p:await this.client.obtIdLibp2p(),idDispositif:e.identity.id,clefPublique:e.identity.publicKey,signatures:e.identity.signatures,idCompte:await this.client.obtIdCompte()},n=await this.client.signer({message:JSON.stringify(r)}),i={type:"Salut !",contenu:{contenu:r,signature:n}};await this.envoyerMessageGossipsub({message:i})}async envoyerDemandeRejoindreCompte({codeSecret:e}){const r=await this.client.obtIdDispositif();let n,i;e.includes(":")?[n,i]=e.split(":"):i=e;const s={type:"Je veux rejoindre ce compte",contenu:{idDispositif:r,empreinteVrification:this.client.empreinteInvitation({idDispositif:r,codeSecret:i})}};await this.envoyerMessageAuDispositif({msg:s,idDispositif:n})}async messageGossipSubReu({msg:e}){if(this._ferm)return;const{orbite:r}=await this.client.attendreSfipEtOrbite();switch(e.type){case"Salut !":{const{signature:n,contenu:i}=e.contenu;if(n.clefPublique===r.identity.publicKey)return;const{clefPublique:s}=i;if(!await this.client.vrifierSignature({signature:n,message:JSON.stringify(i)})||s!==n.clefPublique)return;await this.recevoirSalut({message:e.contenu});break}}}async recevoirSalut({message:e}){if(!await this._validerInfoMembre({info:e.contenu}))return;const{idDispositif:n}=e.contenu;this.dispositifsEnLigne[n]={infoDispositif:e.contenu,vu:n===await this.client.obtIdDispositif()?void 0:new Date().getTime()},this.vnements.emit("membreVu"),await this._sauvegarderDispositifsEnLigne()}_nettoyerDispositifsEnLigne(){const e=new Date().getTime(),r=Object.values(this.dispositifsEnLigne).filter(s=>e-(s.vu||0)>Llt).sort((s,a)=>(s.vu||0)<(a.vu||0)?-1:1).map(s=>s.infoDispositif.idDispositif),n=Object.keys(this.dispositifsEnLigne).length-$lt;r.slice(r.length-n).forEach(s=>delete this.dispositifsEnLigne[s])}async _sauvegarderDispositifsEnLigne(){this._nettoyerDispositifsEnLigne(),await this.client.sauvegarderAuStockageLocal({clef:"dispositifsEnLigne",val:JSON.stringify(this.dispositifsEnLigne)})}async _validerInfoMembre({info:e}){const{idCompte:r,signatures:n,clefPublique:i,idDispositif:s}=e;if(!(r&&n&&i&&s))return!1;const a=await this.client.vrifierSignature({signature:{signature:n.id,clefPublique:i},message:s}),o=await this.client.vrifierSignature({signature:{signature:n.publicKey,clefPublique:s},message:i+n.id});if(!ll(r))return!1;try{const{bd:c,fOublier:u}=await this.client.ouvrirBd({id:r});if(!VB(c.access))return!1;const l=c.access.estAutoris(s);return await u(),a&&o&&l}catch{return!1}}async faireConfianceAuMembre({idCompte:e}){const{bd:r,fOublier:n}=await this.obtBd();await r.set(e,"FIABLE"),await n()}async nePlusFaireConfianceAuMembre({idCompte:e}){const{bd:r,fOublier:n}=await this.obtBd();Object.keys(await r.allAsJSON()).includes(e)&&await r.get(e)==="FIABLE"&&await r.del(e),await n()}async suivreFiables({f:e,idCompte:r}){const n=async i=>{const s=Object.keys(i).filter(a=>i[a]==="FIABLE");return await e(s)};return await this.suivreBdPrincipale({idCompte:r,f:n})}async _initaliserBloqusPrivs(){const e=await this.client.obtDeStockageLocal({clef:"membresBloqus"});e&&(JSON.parse(e).forEach(r=>this.bloqusPrivs.add(r)),this.vnements.emit("changementMembresBloqus"))}async _sauvegarderBloqusPrivs(){const e=[...this.bloqusPrivs];this.client.sauvegarderAuStockageLocal({clef:"membresBloqus",val:JSON.stringify(e)})}async bloquerMembre({idCompte:e,priv:r=!1}){if(r)await this.dbloquerMembre({idCompte:e}),this.bloqusPrivs.add(e),await this._sauvegarderBloqusPrivs();else{const{bd:n,fOublier:i}=await this.obtBd();await this.dbloquerMembre({idCompte:e}),await n.set(e,"BLOQU"),await i()}this.vnements.emit("changementMembresBloqus")}async dbloquerMembre({idCompte:e}){const{bd:r,fOublier:n}=await this.obtBd();Object.keys(await r.allAsJSON()).includes(e)&&await r.get(e)==="BLOQU"&&await r.del(e),await n(),this.bloqusPrivs.has(e)&&(this.bloqusPrivs.delete(e),await this._sauvegarderBloqusPrivs()),this.vnements.emit("changementMembresBloqus")}async suivreBloqusPubliques({f:e,idCompte:r}){const n=async i=>{const s=Object.keys(i).filter(a=>i[a]==="BLOQU");return await e(s)};return await this.suivreBdPrincipale({idCompte:r,f:n})}async suivreBloqus({f:e,idCompte:r}){const n=[];let i=[];const s=async()=>{const a=[...new Set([...[...this.bloqusPrivs].map(o=>({idCompte:o,priv:!0})),...i.map(o=>({idCompte:o,priv:!1}))])];return await e(a)};return n.push(await this.suivreBloqusPubliques({f:async a=>(i=a,await s()),idCompte:r})),(r===void 0||r===this.client.idCompte)&&(await this._initaliserBloqusPrivs(),this.vnements.on("changementMembresBloqus",s),n.push(async()=>{this.vnements.off("changementMembresBloqus",s)}),await s()),async()=>{await Promise.allSettled(n.map(a=>a()))}}async suivreRelationsImmdiates({f:e,idCompte:r}){r=r||this.client.idCompte;const n=[],i={suivis:[],favoris:[],coauteursBds:[],coauteursProjets:[],coauteursVariables:[],coauteursMotsClefs:[]};let s=[];const a=async()=>{const h=[...i.suivis,...i.favoris,...i.coauteursBds,...i.coauteursProjets,...i.coauteursVariables,...i.coauteursMotsClefs,...s.map(g=>({idCompte:g,confiance:-1}))],p=[...new Set(h)].map(g=>{const{idCompte:v}=g;if(s.includes(v))return{idCompte:v,confiance:-1};const b=1-h.filter(_=>_.idCompte===v).map(_=>_.confiance).map(_=>1-_).reduce((_,x)=>x*_,1);return{idCompte:v,confiance:b}});return await e(p)};n.push(await this.suivreBloqus({f:async h=>{s=h.map(m=>m.idCompte),await a()},idCompte:r})),n.push(await this.client.suivreBdDicDeClef({id:r,clef:"rseau",schma:iY,f:async h=>(i.suivis=Object.entries(h).filter(([m,p])=>p==="FIABLE").map(([m,p])=>({idCompte:m,confiance:1})),await a())}));const o=async(h,m,p)=>{n.push(await dr({fListe:h,f:async g=>(i[m]=g.map(v=>({idCompte:v,confiance:p})),await a()),fBranche:async(g,v)=>await this.client.suivreAccsBd({id:g,f:y=>v(y.map(b=>b.idCompte).filter(b=>b!==r))})}))};return await o(async h=>await this.suivreFavorisMembre({idCompte:r,f:m=>h((m||[]).map(p=>p.idObjet))}),"favoris",Flt),await o(async h=>await this.suivreBdsMembre({idCompte:r,f:m=>h(m||[])}),"coauteursBds",Rw),await o(async h=>await this.suivreProjetsMembre({idCompte:r,f:m=>h(m||[])}),"coauteursProjets",Rw),await o(async h=>await this.suivreVariablesMembre({idCompte:r,f:m=>h(m||[])}),"coauteursVariables",Rw),await o(async h=>await this.suivreMotsClefsMembre({idCompte:r,f:m=>h(m||[])}),"coauteursMotsClefs",Rw),async()=>{await Promise.allSettled(n.map(h=>h()))}}async suivreRelationsConfiance({f:e,profondeur:r=1/0,idCompteDbut:n}){const i=n||await this.client.obtIdCompte(),s={},a={},o=new Io;let c=!1;const u=v=>Object.entries(s).filter(([y,b])=>b.relations.map(_=>_.idCompte).includes(v)).map(([y,b])=>y),l=v=>{if(v===i)return 0;const y=({ids:b,p:_=1,djVues:x=new Set})=>{const E=b.map(k=>u(k).filter(B=>!x.has(B))).flat();return E.includes(i)?_:E.length?(x=new Set(...x,...E),y({ids:E,p:_+1,djVues:x})):1/0};return y({ids:[v]})},f=async()=>{const v=[];for(const[y,b]of Object.entries(s))for(const _ of b.relations){const x=l(y)+1;v.push({de:y,pour:_.idCompte,confiance:_.confiance,profondeur:x})}return await e(v)},d=async v=>{s[v]={relations:[]};const y=await this.suivreRelationsImmdiates({f:b=>{s[v]&&(s[v].relations=b,m())},idCompte:v});a[v]=y},h=async v=>{await a[v](),delete a[v],delete s[v]},m=async()=>{if(c)return;await o.acquire("modification");const v=Object.keys(s).filter(b=>l(b)>=r),y=[...new Set(Object.entries(s).filter(([b,_])=>l(b)+1<r).map(([b,_])=>_.relations.map(x=>x.idCompte)).flat())].filter(b=>!Object.keys(s).includes(b));await Promise.allSettled(v.map(b=>h(b))),await Promise.allSettled(y.map(b=>d(b))),await f(),o.release("modification")};return await d(i),{fOublier:async()=>{c=!0,await Promise.allSettled(Object.values(a).map(v=>v()))},fChangerProfondeur:async v=>{r=v,await m()}}}async suivreComptesRseau({f:e,profondeur:r,idCompteDbut:n}){const i=await this.client.obtIdCompte(),s=async a=>{a.push({de:i,pour:i,confiance:1,profondeur:0});const o={};a.forEach(u=>{Object.keys(o).includes(u.pour)||(o[u.pour]=[]),o[u.pour].push(u)});const c=Object.entries(o).map(([u,l])=>{const f=l.find(v=>v.de===this.client.idCompte);if(f?.confiance===1||f?.confiance===-1)return{idCompte:u,profondeur:f.pour===this.client.idCompte?0:1,confiance:f.confiance};const d=Math.min(...l.map(v=>v.profondeur)),h=l.filter(v=>v.confiance>=0),p=1-l.filter(v=>v.confiance<0).map(v=>1+v.confiance*Math.pow(Nlt,v.profondeur-1)).reduce((v,y)=>y*v,1),g=1-h.map(v=>1-v.confiance*Math.pow(Mlt,v.profondeur-1)).reduce((v,y)=>y*v,1)-p;return{idCompte:u,profondeur:d,confiance:g}});return await e(c)};return await this.suivreRelationsConfiance({f:s,profondeur:r,idCompteDbut:n})}async suivreComptesRseauEtEnLigne({f:e,profondeur:r,idCompteDbut:n}){const i={rseau:[],enLigne:[]},s=async()=>{const d=[...i.rseau];return i.enLigne.forEach(h=>{d.find(m=>m.idCompte===h.idCompte)||d.push(h)}),await e(d)},a=await this.client.obtIdCompte(),o=await this.suivreConnexionsMembres({f:async d=>{const h=d.filter(m=>m.infoMembre.idCompte!==a).map(m=>({idCompte:m.infoMembre.idCompte,profondeur:1/0,confiance:0}));return i.enLigne=h,await s()}}),c=async d=>(i.rseau=d,await s()),{fOublier:u,fChangerProfondeur:l}=await this.suivreComptesRseau({f:c,profondeur:r,idCompteDbut:n});return{fOublier:async()=>{await o(),await u()},fChangerProfondeur:l}}async suivreConfianceMonRseauPourMembre({idCompte:e,f:r,profondeur:n,idCompteRfrence:i}){const s=i||await this.client.obtIdCompte(),a=async o=>{const c=o.find(u=>u.idCompte===e);return await r(c?.confiance||0)};return await this.suivreComptesRseau({f:a,profondeur:n,idCompteDbut:s})}async suivreConnexionsPostesSFIP({f:e}){const r=async()=>{const{sfip:i}=await this.client.attendreSfipEtOrbite(),s=i.libp2p.getPeers(),a=i.libp2p.getConnections();return await e(s.map(o=>{const c=o.toString(),u=a.filter(l=>l.remotePeer.toString()===c&&l.status!=="closed").map(l=>l.remoteAddr.toString());return{pair:c,adresses:u}}))};return this.vnements.on("changementConnexions",r),await r(),async()=>{this.vnements.off("changementConnexions",r)}}async suivreConnexionsDispositifs({f:e}){const r={infoDispositif:{idLibp2p:await this.client.obtIdLibp2p(),idDispositif:await this.client.obtIdDispositif(),idCompte:await this.client.obtIdCompte(),clefPublique:(await this.client.obtIdentitOrbite()).publicKey,signatures:(await this.client.obtIdentitOrbite()).signatures}},n=async()=>await e([...Object.values(this.dispositifsEnLigne),r]);return this.vnements.on("membreVu",n),await n(),async()=>{this.vnements.off("membreVu",n)}}async suivreConnexionsMembres({f:e}){return await dr({fListe:async i=>{const s=async a=>{const o={};for(const c of a){const{idCompte:u}=c.infoDispositif;o[u]||(o[u]={infoMembre:{idCompte:u,dispositifs:[]}});const{infoMembre:l,vu:f}=o[u];l.dispositifs.push(c.infoDispositif),o[u].vu=f?c.vu?Math.max(f,c.vu):f:c.vu}return await i(Object.values(o))};return await this.suivreConnexionsDispositifs({f:s})},f:e,fBranche:async(i,s,a)=>await this.suivreProtocolesMembre({idCompte:i,f:o=>{s({infoMembre:{...a.infoMembre,protocoles:Object.values(o).flat()},vu:a.vu})}}),fIdBdDeBranche:i=>i.infoMembre.idCompte,fCode:i=>i.infoMembre.idCompte})}async suivreProtocolesMembre({f:e,idCompte:r}){return await this.client.suivreBdDicDeClef({id:r||await this.client.obtIdCompte(),clef:"protocoles",schma:Yd,f:e})}async suivreProtocolesDispositif({idDispositif:e,f:r}){const n=e||await this.client.obtIdDispositif();return await Fn({fRacine:async({fSuivreRacine:o})=>await this.suivreConnexionsDispositifs({f:async c=>{const u=c.find(l=>l.infoDispositif.idDispositif===n);if(u){const{idCompte:l}=u.infoDispositif;return await o(l)}else return await o(void 0)}}),f:async o=>{if(o)return await r(o[n])},fSuivre:async({id:o,fSuivreBd:c})=>await this.suivreProtocolesMembre({f:c,idCompte:o})})}async rechercher({f:e,nRsultatsDsirs:r=1/0,fRecherche:n,fConfiance:i,fQualit:s,fObjectif:a,fScore:o}){o||(o=D=>(D.confiance+D.qualit+D.objectif.score)/3),a=a||GX();const c={},u={},l=3e3;let f,d=3,h=!1;const m=async D=>{d=D,x&&await x(D),f&&clearTimeout(f)},p=(D=l)=>{if(h)return;f&&clearTimeout(f);const z=Object.values(c).map(O=>O.rsultats).flat().map(O=>O.rsultatObjectif.score),U=z.length>=r?Math.min(...z.slice(0,r)):0,S=Object.values(c).reduce(function(O,R){return O[String(R.membre.profondeur)]=O[String(R.membre.profondeur)]||[],O[String(R.membre.profondeur)].push(...R.rsultats),O},{}),w=Object.entries(S).sort((O,R)=>Number(O[0])<Number(R[0])?-1:1).map(O=>O[1]).map(O=>O.filter(R=>R.rsultatObjectif.score>=U).length),A=w.slice(w.length-3),F=w.slice(w.length-4),P=Math.max(3,fU(A)?d+1:fU(F)?d:d-1);P>d?f=setTimeout(()=>m(P),D):P<d&&m(P)},g=async()=>{const z=Object.values(c).map(U=>U.rsultats).flat().sort((U,S)=>U.rsultatObjectif.score<S.rsultatObjectif.score?1:-1);await e(z.slice(0,r)),p()},v=async D=>{const{idCompte:z}=D,U=async A=>await n({idCompte:D.idCompte,fSuivi:async F=>await A(F||[])}),S=async A=>(c[z].rsultats=A,await g()),T=async(A,F)=>{const P={id:A},O=async()=>{const{objectif:W,confiance:q,qualit:G}=P;if(W&&q!==void 0&&G!==void 0){const Y={id:A,rsultatObjectif:{...W,score:o(P)}};return await F(Y)}else return await F(void 0)},R=async W=>(P.objectif=W,await O()),I=await a(this.client,A,R),M=await i(A,async W=>(P.confiance=W,await O())),N=await s(A,async W=>(P.qualit=W,await O()));return async()=>{await Promise.allSettled([I(),M(),N()])}};c[z]={rsultats:[],membre:D,mettreJour:g};const w=await dr({fListe:U,f:S,fBranche:T});u[z]=w},y=async D=>{await u[D](),delete c[D],delete u[D],await g()},b=new Io,_=async D=>{await b.acquire("rechercher"),D=D.filter(T=>T.confiance>=0);const z=D.filter(T=>!c[T.idCompte]),U=Object.keys(c).filter(T=>!D.find(w=>w.idCompte===T)),S=D.filter(T=>{const w=c[T.idCompte];return w&&(T.confiance!==w.membre.confiance||T.profondeur!==w.membre.profondeur)});await Promise.allSettled(z.map(v)),await Promise.allSettled(S.map(async T=>await c[T.idCompte].mettreJour(T))),await Promise.allSettled(U.map(T=>y(T))),b.release("rechercher")},{fChangerProfondeur:x,fOublier:E}=await this.suivreComptesRseauEtEnLigne({f:_,profondeur:d});return{fChangerN:async(D=1/0)=>{const z=r;r=D,D!==z&&(await g(),p(0))},fOublier:async()=>{h=!0,f&&clearTimeout(f),await E(),await Promise.allSettled(Object.values(u).map(D=>D()))}}}async rechercherMembres({f:e,nRsultatsDsirs:r,fObjectif:n}){const i=async(o,c)=>{const{fOublier:u}=await this.suivreConfianceMonRseauPourMembre({idCompte:o,f:c,profondeur:4});return u},s=async({idCompte:o,fSuivi:c})=>(await c([o]),kn),a=async(o,c)=>await Sde()(this.client,o,async l=>{await c(l?.score||0)});return await this.rechercher({f:e,nRsultatsDsirs:r,fRecherche:s,fConfiance:i,fQualit:a,fObjectif:n})}async suivreConfianceAuteurs({idItem:e,clef:r,f:n}){return await dr({fListe:async c=>await this.suivreAuteursObjet({idObjet:e,clef:r,f:async u=>{const l=u.filter(f=>f.accept).map(f=>f.idCompte);return await c(l)}}),f:async c=>{const u=c.reduce((l,f)=>l+f,0);await n(u)},fBranche:async(c,u)=>{const{fOublier:l}=await this.suivreConfianceMonRseauPourMembre({idCompte:c,f:u,profondeur:4});return l},fRduction:c=>c.flat()})}async rechercherObjets({f:e,clef:r,nRsultatsDsirs:n,fRecherche:i,fRechercheLesMiens:s,fQualit:a,fObjectif:o,toutLeRseau:c=!0}){if(!c){const f=o||GX();return await dr({fListe:async d=>({fOublier:await s(d),fChangerN:()=>Promise.resolve()}),f:e,fBranche:async(d,h)=>await f(this.client,d,async m=>{if(m)return await h({id:d,rsultatObjectif:m})})})}const u=async({idCompte:f,fSuivi:d})=>{const h={propres:[],favoris:[]},m=async()=>{const y=[...new Set([...h.propres,...h.favoris])];await d(y)},p=await i({idCompte:f,f:async y=>{h.propres=y||[],await m()}}),g=y=>{switch(y){case"bds":return"bd";case"motsClefs":return"motClef";case"nues":return"nue";case"projets":return"projet";case"variables":return"variable";default:return}},v=await this.client.suivreBdsSelonCondition({fListe:async y=>await this.suivreFavorisMembre({idCompte:f,f:async b=>y(b.filter(_=>_.pingle.type===g(r)).map(_=>_.idObjet))}),fCondition:async(y,b)=>await this.client.suivreTypeObjet({idObjet:y,f:async _=>await b(_===g(r))}),f:async y=>{h.favoris=y||[],await m()}});return async()=>{await p(),await v()}},l=async(f,d)=>await this.suivreConfianceAuteurs({idItem:f,clef:r,f:d});return await this.rechercher({f:e,nRsultatsDsirs:n,fRecherche:u,fConfiance:l,fQualit:a,fObjectif:o})}async rechercherNues({f:e,nRsultatsDsirs:r,fObjectif:n,toutLeRseau:i=!0}){const s=this.suivreNuesMembre.bind(this),a=async(c,u)=>await this.client.nues.suivreQualitNue({idNue:c,f:u}),o=async c=>await this.client.nues.suivreNues({f:c});return await this.rechercherObjets({f:e,clef:"nues",nRsultatsDsirs:r,fRecherche:s,fRechercheLesMiens:o,fQualit:a,fObjectif:n,toutLeRseau:i})}async rechercherBds({f:e,nRsultatsDsirs:r,fObjectif:n,toutLeRseau:i=!0}){const s=this.suivreBdsMembre.bind(this),a=async(c,u)=>{const l=async f=>await u(f.total);return await this.client.bds.suivreQualitBd({idBd:c,f:l})},o=async c=>await this.client.bds.suivreBds({f:c});return await this.rechercherObjets({f:e,clef:"bds",nRsultatsDsirs:r,fRecherche:s,fRechercheLesMiens:o,fQualit:a,fObjectif:n,toutLeRseau:i})}async rechercherVariables({f:e,nRsultatsDsirs:r,fObjectif:n,toutLeRseau:i=!0}){const s=this.suivreVariablesMembre.bind(this),a=async(c,u)=>await this.client.variables.suivreQualitVariable({idVariable:c,f:u}),o=async c=>await this.client.variables.suivreVariables({f:c});return await this.rechercherObjets({f:e,clef:"variables",nRsultatsDsirs:r,fRecherche:s,fRechercheLesMiens:o,fQualit:a,fObjectif:n,toutLeRseau:i})}async rechercherMotsClefs({f:e,nRsultatsDsirs:r,fObjectif:n,toutLeRseau:i=!0}){const s=this.suivreMotsClefsMembre.bind(this),a=async(c,u)=>await this.client.motsClefs.suivreQualitMotClef({idMotClef:c,f:u}),o=async c=>await this.client.motsClefs.suivreMotsClefs({f:c});return await this.rechercherObjets({f:e,clef:"motsClefs",nRsultatsDsirs:r,fRecherche:s,fRechercheLesMiens:o,fQualit:a,fObjectif:n,toutLeRseau:i})}async rechercherProjets({f:e,nRsultatsDsirs:r,fObjectif:n,toutLeRseau:i=!0}){const s=this.suivreProjetsMembre.bind(this),a=async(c,u)=>await this.client.projets.suivreQualitProjet({idProjet:c,f:u}),o=async c=>await this.client.projets.suivreProjets({f:c});return await this.rechercherObjets({f:e,clef:"projets",nRsultatsDsirs:r,fRecherche:s,fRechercheLesMiens:o,fQualit:a,fObjectif:n,toutLeRseau:i})}async suivreAuteursObjet({idObjet:e,clef:r,f:n}){return await dr({fListe:async u=>await this.client.suivreAccsBd({id:e,f:u}),f:n,fBranche:async(u,l,f)=>{const d=async m=>(m=m||[],await l([{idCompte:f.idCompte,rle:f.rle,accept:m.includes(e)}]));let h;switch(await d(),r){case"motsClefs":h=await this.client.motsClefs.suivreMotsClefs({f:d,idCompte:u});break;case"variables":h=await this.client.variables.suivreVariables({f:d,idCompte:u});break;case"bds":h=await this.client.bds.suivreBds({f:d,idCompte:u});break;case"nues":h=await this.client.nues.suivreNues({f:d,idCompte:u});break;case"projets":h=await this.client.projets.suivreProjets({f:d,idCompte:u});break;default:throw new Error(r)}return h},fIdBdDeBranche:u=>u.idCompte,fCode:u=>u.idCompte})}async suivreAuteursMotClef({idMotClef:e,f:r}){return await this.suivreAuteursObjet({idObjet:e,clef:"motsClefs",f:r})}async suivreAuteursVariable({idVariable:e,f:r}){return await this.suivreAuteursObjet({idObjet:e,clef:"variables",f:r})}async suivreAuteursBd({idBd:e,f:r}){return await this.suivreAuteursObjet({idObjet:e,clef:"bds",f:r})}async suivreAuteursProjet({idProjet:e,f:r}){return await this.suivreAuteursObjet({idObjet:e,clef:"projets",f:r})}async suivreAuteursNue({idNue:e,f:r}){return await this.suivreAuteursObjet({idObjet:e,clef:"nues",f:r})}async suivreObjetsMembre({idCompte:e,fListeObjets:r,fSuivi:n}){return await this.client.suivreBdsSelonCondition({fListe:r,fCondition:async(i,s)=>await this.client.suivreAccsBd({id:i,f:a=>s(a.map(o=>o.idCompte).includes(e))}),f:n})}async suivreBdsMembre({idCompte:e,f:r}){return await this.suivreObjetsMembre({idCompte:e,fListeObjets:async n=>await this.client.bds.suivreBds({f:n,idCompte:e}),fSuivi:r})}async suivreProjetsMembre({idCompte:e,f:r}){return await this.suivreObjetsMembre({idCompte:e,fListeObjets:async n=>await this.client.projets.suivreProjets({f:n,idCompte:e}),fSuivi:r})}async suivreFavorisMembre({idCompte:e,f:r}){return await this.client.favoris.suivreFavoris({f:r,idCompte:e})}async suivreVariablesMembre({idCompte:e,f:r}){return await this.suivreObjetsMembre({idCompte:e,fListeObjets:async n=>await this.client.variables.suivreVariables({f:n,idCompte:e}),fSuivi:r})}async suivreMotsClefsMembre({idCompte:e,f:r}){return await this.suivreObjetsMembre({idCompte:e,fListeObjets:async n=>await this.client.motsClefs.suivreMotsClefs({f:n,idCompte:e}),fSuivi:r})}async suivreNuesMembre({idCompte:e,f:r}){return await this.suivreObjetsMembre({idCompte:e,fListeObjets:async n=>await this.client.nues.suivreNues({f:n,idCompte:e}),fSuivi:r})}async suivreFavorisObjet({idObjet:e,f:r,profondeur:n}){const i=async o=>{const c=o.filter(u=>u.pingle.idObjet===e);await r(c)},s=async o=>{const c=async u=>{const l=await this.client.obtIdCompte();return await o([l,...u.map(f=>f.idCompte)])};return await this.suivreComptesRseauEtEnLigne({f:c,profondeur:n,idCompteDbut:this.client.idCompte})},a=async(o,c)=>await this.suivreFavorisMembre({idCompte:o,f:u=>c(u?u.map(l=>({idCompte:o,pingle:l})):void 0)});return await this.client.suivreBdsDeFonctionRecherche({fListe:s,f:i,fBranche:a})}async suivreRplications({idObjet:e,f:r,profondeur:n}){const i={connexionsMembres:[],connexionsDispositifs:[],favoris:[]},s=async()=>{const{connexionsMembres:g,favoris:v}=i,y=v.map(E=>E.favoris.idCompte),b=g.filter(E=>y.includes(E.infoMembre.idCompte)),_=(await Promise.all(v.map(async E=>{const{favoris:k,dispositifs:B}=E;return await Promise.all(B.map(async D=>{const z=i.connexionsDispositifs.find(T=>T.infoDispositif.idDispositif===D)?.vu,U=i.connexionsDispositifs.find(T=>T.infoDispositif.idDispositif===D)?.infoDispositif.idCompte;return{pingle:{idObjet:e,pingle:k},dispositif:{idDispositif:D,idCompte:U,vu:z}}}))}))).flat();return await r({membres:b,dispositifs:_})},a=await this.suivreConnexionsMembres({f:async g=>(i.connexionsMembres=g,await s())}),o=await this.suivreConnexionsDispositifs({f:async g=>(i.connexionsDispositifs=g,await s())}),c=async g=>(i.favoris=g,await s()),u=async g=>await this.suivreFavorisObjet({idObjet:e,f:g,profondeur:n}),l=async(g,v,y)=>{const b=async x=>await v({favoris:y,dispositifs:x}),_=await this.client.suivreDispositifs({f:b,idCompte:g});return async()=>{await _()}},f=g=>g.idCompte,d=g=>g.idCompte,{fOublier:h,fChangerProfondeur:m}=await this.client.suivreBdsDeFonctionRecherche({fListe:u,f:c,fBranche:l,fIdBdDeBranche:f,fCode:d});return{fOublier:async()=>{await h(),await a(),await o()},fChangerProfondeur:m}}async suivreBdsDeNue({idNue:e,f:r,nRsultatsDsirs:n}){const i=async(a,o)=>await this.client.bds.rechercherBdsParNue({idNue:e,f:o,idCompte:a}),s=async a=>await this.suivreComptesRseauEtEnLigne({f:async o=>await a(o.map(c=>c.idCompte)),profondeur:n});return await this.client.suivreBdsDeFonctionRecherche({fListe:s,f:r,fBranche:i})}async suivrelmentsDeTableauxUniques({idNueUnique:e,clef:r,f:n,nBds:i=100}){const s=async u=>{const l=async d=>await this.suivreBdsDeNue({idNue:e,f:d,nRsultatsDsirs:i}),f=async(d,h)=>await this.suivreAuteursBd({idBd:d,f:async m=>{const p=m.find(v=>v.accept)?.idCompte;return await h(p?{bd:d,idCompte:p}:void 0)}});return await this.client.suivreBdsDeFonctionRecherche({fListe:l,f:u,fBranche:f})},a=async(u,l,f)=>{const{idCompte:d}=f;return await Fn({fRacine:async({fSuivreRacine:g})=>await this.client.bds.suivreIdTableauParClef({idBd:u,clef:r,f:v=>{v&&g(v)}}),f:async g=>await l(g||[]),fSuivre:async({id:g,fSuivreBd:v})=>{const y=async b=>{const _=b.map(x=>({idCompte:d,lment:x}));return await v(_)};return await this.client.tableaux.suivreDonnes({idTableau:g,f:y})}})},o=u=>u.bd,c=u=>u.bd;return await this.client.suivreBdsDeFonctionRecherche({fListe:s,f:n,fBranche:a,fIdBdDeBranche:o,fCode:c})}async fermer(){this._ferm=!0,await Promise.allSettled(this.fsOublier.map(e=>e()))}}Oe([je],ki.prototype,"suivreFiables",null);Oe([je],ki.prototype,"suivreBloqusPubliques",null);Oe([je],ki.prototype,"suivreBloqus",null);Oe([je],ki.prototype,"suivreRelationsImmdiates",null);Oe([Wfe],ki.prototype,"suivreRelationsConfiance",null);Oe([Wfe],ki.prototype,"suivreComptesRseau",null);Oe([je],ki.prototype,"suivreConnexionsPostesSFIP",null);Oe([je],ki.prototype,"suivreConnexionsDispositifs",null);Oe([je],ki.prototype,"suivreConnexionsMembres",null);Oe([je],ki.prototype,"suivreProtocolesMembre",null);Oe([je],ki.prototype,"suivreProtocolesDispositif",null);Oe([je],ki.prototype,"suivreAuteursObjet",null);Oe([je],ki.prototype,"suivreBdsMembre",null);Oe([je],ki.prototype,"suivreProjetsMembre",null);Oe([je],ki.prototype,"suivreFavorisMembre",null);Oe([je],ki.prototype,"suivreVariablesMembre",null);Oe([je],ki.prototype,"suivreMotsClefsMembre",null);Oe([je],ki.prototype,"suivreNuesMembre",null);Oe([yt],ki.prototype,"suivreBdsDeNue",null);const Ult=t=>!!t&&typeof t.systme=="string"&&typeof t.val=="string";class jlt{lireDate(e){const{systme:r,val:n}=e;switch(r){case"dateJS":case"grgorien":{const i=new Date(n);if(isNaN(i.valueOf()))throw new Error(n);return i}default:throw new Error(r)}}dateValide(e){if(!Ult(e))return!1;try{return this.lireDate(e),!0}catch{return!1}}}const Vlt=new jlt;function qlt({rgle:t,varsColonnes:e,donnesCatgorie:r}){const n=t.rgle,{colonne:i}=t,{typeRgle:s}=n.rgle;switch(s){case"existe":return a=>a.filter(c=>c.donnes[i]===void 0).map(c=>{const{id:u}=c;return{id:u,erreur:{rgle:t}}});case"catgorie":return a=>{const o=n.rgle.dtails.catgorie;return a.filter(u=>!s8e({val:u.donnes[i],catgorie:o})).map(u=>{const{id:l}=u;return{id:l,erreur:{rgle:t}}})};case"bornes":{const a=n;let o,c;const{val:u,op:l,type:f}=a.rgle.dtails,d=(h,m)=>h===void 0||m===void 0;switch(l){case">":c=(h,m)=>d(h,m)||h>m;break;case"<":c=(h,m)=>d(h,m)||h<m;break;case"":case">=":c=(h,m)=>d(h,m)||h>=m;break;case"":case"<=":c=(h,m)=>d(h,m)||h<=m;break}return f==="fixe"?o=h=>{const m=h.donnes[i];return Array.isArray(m)?m.every(p=>c(p,u)):c(m,u)}:o=h=>{const m=h.donnes[i],p=f==="dynamiqueVariable"?h.donnes[e[u]]:h.donnes[u];return Array.isArray(m)?m.every(g=>c(g,p)):c(m,p)},h=>h.filter(p=>!zlt({val:p,fComp:o})).map(p=>{const{id:g}=p;return{id:g,erreur:{rgle:t}}})}case"valeurCatgorique":{const a=n.rgle,o=a.dtails.type==="fixe"?a.dtails.options:r;if(!o)throw new Error("Options non spcifies");return c=>c.filter(l=>l.donnes[i]!==void 0&&!o.includes(l.donnes[i])).map(l=>{const{id:f}=l;return{id:f,colonne:i,erreur:{rgle:t}}})}default:throw Error(`Catgorie ${s} inconnue.`)}}const zlt=({val:t,fComp:e})=>Array.isArray(t)?t.every(r=>e(r)):e(t),t1={type:"object",additionalProperties:{type:"object",properties:{id:{type:"string"},variable:{type:"string",nullable:!0},index:{type:"boolean",nullable:!0}},required:["id"]},required:[]},Ym={type:"object",additionalProperties:{type:"object",additionalProperties:!0,required:[]},required:[]},Ow={type:"object",additionalProperties:{type:"object",properties:{colonne:{type:"string"},source:{type:"object",properties:{id:{type:"string"},type:{type:"string"}},required:["id","type"]},rgle:{type:"object",properties:{id:{type:"string"},rgle:{type:"object",properties:{dtails:{type:"object",required:[]},typeRgle:{type:"string"}},required:["dtails","typeRgle"]}},required:["id","rgle"]}},required:["colonne","rgle","source"]},required:[]};function qT(t,e){const r=Object.keys(t).filter(i=>i!=="id"),n=Object.keys(e).filter(i=>i!=="id");return!(!r.every(i=>t[i]===e[i])||!n.every(i=>t[i]===e[i]))}function Hlt(t,e,r){return!!r.every(n=>t[n]===e[n])}const zT={type:"object",properties:{type:{type:"string"},noms:{type:"string"},donnes:{type:"string"},colonnes:{type:"string"},rgles:{type:"string"}},required:["donnes","colonnes","noms","rgles","type"]};class Bc{client;constructor({client:e}){this.client=e}async crerTableau({idBd:e}){const r=await this.client.obtOpsAccs({idBd:e}),n=await this.client.crerBdIndpendante({type:"keyvalue",optionsAccs:r}),{bd:i,fOublier:s}=await this.client.ouvrirBdType({id:n,type:"keyvalue",schma:zT}),a=async()=>i.set("type","tableau"),o=async()=>{const f=await this.client.crerBdIndpendante({type:"keyvalue",optionsAccs:r});await i.set("noms",f)},c=async()=>{const f=await this.client.crerBdIndpendante({type:"keyvalue",optionsAccs:r});await i.set("donnes",f)},u=async()=>{const f=await this.client.crerBdIndpendante({type:"keyvalue",optionsAccs:r});await i.set("colonnes",f)},l=async()=>{const f=await this.client.crerBdIndpendante({type:"keyvalue",optionsAccs:r});await i.set("rgles",f)};return await Promise.allSettled([a(),o(),c(),u(),l()]),await s(),n}async copierTableau({id:e,idBd:r,copierDonnes:n=!0}){const{bd:i,fOublier:s}=await this.client.ouvrirBdType({id:e,type:"keyvalue",schma:zT}),a=await this.crerTableau({idBd:r}),{bd:o,fOublier:c}=await this.client.ouvrirBdType({id:a,type:"keyvalue",schma:zT}),u=await i.get("noms");if(u){const{bd:l,fOublier:f}=await this.client.ouvrirBdType({id:u,type:"keyvalue",schma:vt}),d=await l.allAsJSON();await f(),await this.sauvegarderNomsTableau({idTableau:a,noms:d})}return await this.client.copierContenuBdDic({bdBase:i,nouvelleBd:o,clef:"colonnes",schma:t1}),await this.client.copierContenuBdDic({bdBase:i,nouvelleBd:o,clef:"rgles",schma:Ow}),n&&await this.client.copierContenuBdDic({bdBase:i,nouvelleBd:o,clef:"donnes",schma:Ym}),await Promise.allSettled([s(),c()]),a}async _confirmerPermission({idTableau:e}){if(!await this.client.permission({idObjet:e}))throw new Error(`Permission de modification refuse pour le tableau ${e}.`)}async suivreDiffrencesAvecTableau({idTableau:e,idTableauRf:r,f:n}){const i={},s=async()=>{if(!i.colonnesTableau||!i.colonnesTableauRf)return;const c=[];for(const u of i.colonnesTableauRf){const l=i.colonnesTableau.find(f=>f.id===u.id);if(l){if(l.variable!==u.variable){const f={type:"variableColonne",svre:!0,idCol:l.id,varColTableau:l.variable,varColTableauLie:u.variable};c.push(f)}if(l.index!==u.index){const f={type:"indexColonne",svre:!0,idCol:l.id,colTableauIndexe:!!l.index};c.push(f)}}else{const f={type:"colonneManquante",svre:!0,idManquante:u.id};c.push(f)}}for(const u of i.colonnesTableau)if(!i.colonnesTableauRf.find(f=>f.id===u.id)){const f={type:"colonneSupplmentaire",svre:!1,idExtra:u.id};c.push(f)}await n(c)},a=await this.suivreColonnesTableau({idTableau:e,f:async c=>{i.colonnesTableau=c,await s()}}),o=await this.suivreColonnesTableau({idTableau:r,f:async c=>{i.colonnesTableauRf=c,await s()}});return async()=>{await Promise.allSettled([a,o])}}async changerColIndex({idTableau:e,idColonne:r,val:n}){await this._confirmerPermission({idTableau:e});const i=await this.client.obtIdBd({nom:"colonnes",racine:e,type:"keyvalue"}),{bd:s,fOublier:a}=await this.client.ouvrirBdType({id:i,type:"keyvalue",schma:t1}),c=(await s.all()).find(u=>u.value.id===r);if(c&&!!c.value.index!==n){const{value:u}=c,l=Object.assign(u,{index:n});await s.put(r,l)}await a()}async suivreIndex({idTableau:e,f:r}){const n=async i=>{const s=i.filter(a=>a.index).map(a=>a.id);await r(s)};return await this.suivreColonnesTableau({idTableau:e,f:n})}async suivreDonnes({idTableau:e,f:r,clefsSelonVariables:n=!1}){const i={},s=async()=>{const{donnes:l,colonnes:f}=i;if(l&&f){const d=Object.entries(l).map(([h,m])=>({donnes:n?Object.keys(m).reduce((g,v)=>{const y=v==="id"?"id":f[v];return g[y||v]=m[v],g},{}):m,id:h}));await r(d)}},a=async l=>{i.colonnes=Object.fromEntries(l.map(f=>[f.id,f.variable])),await s()},o=await this.suivreColonnesTableau({idTableau:e,f:a}),c=async l=>{i.donnes=l,await s()},u=await this.client.suivreBdDicDeClef({id:e,clef:"donnes",f:c,schma:Ym});return async()=>{await u(),await o()}}async formaterlment({:e,colonnes:r,fichiersSFIP:n,langues:i}){const s=async({adresseBdTrads:c,langues:u})=>{const l=await wr(f=>this.client.suivreBdDic({id:c,f}));return Df(l,u||[])||c},a={},o=async(c,u)=>{switch(typeof c){case"object":return JSON.stringify(c);case"boolean":return c.toString();case"number":return c;case"string":return["audio","image","vido","fichier"].includes(u)?(n.add(c),c):u==="chane"&&ll(c)?await s({adresseBdTrads:c,langues:i}):c;default:return}};for(const c of Object.keys(e)){const u=r.find(h=>h.id===c);if(!u)continue;const{catgorie:l}=u;let f;const d=e[c];l?.type==="simple"?f=await o(d,l.catgorie):l?.type==="liste"&&Array.isArray(d)&&(f=JSON.stringify(await Promise.allSettled(d.map(h=>o(h,l.catgorie))))),f!==void 0&&(a[c]=f)}return a}async suivreDonnesExportation({idTableau:e,langues:r,f:n}){const i={},s=[],a=async()=>{const{colonnes:u,donnes:l,nomsTableau:f,nomsVariables:d}=i;if(u&&l&&(!r||f&&d)){const h=new Set;let m=await Promise.all(l.map(v=>this.formaterlment({:v.donnes,fichiersSFIP:h,colonnes:u,langues:r})));m=m.map(v=>Object.keys(v).reduce((y,b)=>{const _=u.find(E=>E.id===b)?.variable;if(!_)throw new Error(`Colonnne avec id ${b} non trouve parmis les colonnnes :
${JSON.stringify(u,void 0,2)}.`);const x=r&&d?.[_]&&Df(d[_],r)||b;return y[x]=v[b],y},{}));const p=e.split("/").pop(),g=r&&f&&Df(f,r)||p;return await n({nomTableau:g,donnes:m,fichiersSFIP:h})}};if(r){const u=await this.suivreNomsTableau({idTableau:e,f:async f=>{i.nomsTableau=f,await a()}});s.push(u);const l=await dr({fListe:async f=>this.suivreVariables({idTableau:e,f}),f:async f=>{i.nomsVariables=Object.fromEntries(f.map(d=>[d.idVar,d.noms])),await a()},fBranche:async(f,d)=>await this.client.variables.suivreNomsVariable({idVariable:f,f:async h=>await d({idVar:f,noms:h})})});s.push(l)}const o=await this.suivreColonnesEtCatgoriesTableau({idTableau:e,f:async u=>{i.colonnes=u,await a()}});s.push(o);const c=await this.suivreDonnes({idTableau:e,f:async u=>{i.donnes=u,await a()}});return s.push(c),async()=>{Promise.allSettled(s.map(u=>u()))}}async exporterDonnes({idTableau:e,langues:r,doc:n,nomFichier:i,patience:s=500}){n=n||xa.book_new();const a=await wr(async c=>await this.suivreDonnesExportation({idTableau:e,langues:r,f:c}),ss(s)),o=xa.json_to_sheet(a.donnes);return xa.book_append_sheet(n,o,a.nomTableau.slice(0,30)),i=i||a.nomTableau,{doc:n,fichiersSFIP:a.fichiersSFIP,nomFichier:i}}async exporterTableauFichier({idTableau:e,langues:r,doc:n,nomFichier:i,patience:s=500,formatDoc:a,dossier:o="",inclureDocuments:c=!0}){const u=await this.exporterDonnes({idTableau:e,langues:r,doc:n,nomFichier:i,patience:s});return await this.client.bds.documentDonnesFichier({donnes:u,formatDoc:a,dossier:o,inclureDocuments:c})}async ajouterlment({idTableau:e,vals:r}){await this._confirmerPermission({idTableau:e}),Array.isArray(r)||(r=[r]);const n=await this.client.obtIdBd({nom:"donnes",racine:e,type:"keyvalue"}),{bd:i,fOublier:s}=await this.client.ouvrirBdType({id:n,type:"keyvalue",schma:Ym}),a=(await wr(u=>this.suivreColonnesTableau({idTableau:e,f:u}))).filter(u=>u.index).map(u=>u.id),o=u=>{const l=Object.fromEntries(Object.entries(u).filter(f=>a.includes(f[0])));return Wv.stringify(Q5(JSON.stringify(l)))},c=[];for(const u of r){const l=a.length?o(u):ti();await i.put(l,u),c.push(l)}return await s(),c}async modifierlment({idTableau:e,vals:r,idlment:n}){await this._confirmerPermission({idTableau:e});const i=await this.client.obtIdBd({nom:"donnes",racine:e,type:"keyvalue"}),{bd:s,fOublier:a}=await this.client.ouvrirBdType({id:i,type:"keyvalue",schma:Ym}),o=await s.get(n);if(!o)throw new Error(`Id lment ${n} n'existe pas.`);const c=Object.assign({},o,r);Object.keys(r).map(u=>{r[u]===void 0&&delete c[u]}),qT(c,o)||await s.put(n,c),await a()}async vrifierClefslment({idTableau:e,lment:r}){await this._confirmerPermission({idTableau:e});const n=await this.client.obtIdBd({nom:"colonnes",racine:e,type:"keyvalue"}),{bd:i,fOublier:s}=await this.client.ouvrirBdType({id:n,type:"keyvalue",schma:t1}),o=[...(await i.all()).map(u=>u.value.id),"id"],c=Object.keys(r).filter(u=>o.includes(u));return await s(),Object.fromEntries(c.map(u=>[u,r[u]]))}async effacerlment({idTableau:e,idlment:r}){await this._confirmerPermission({idTableau:e});const n=await this.client.obtIdBd({nom:"donnes",racine:e,type:"keyvalue"}),{bd:i,fOublier:s}=await this.client.ouvrirBdType({id:n,type:"keyvalue",schma:Ym});await i.del(r),await s()}async combinerDonnes({idTableauBase:e,idTableau2:r}){const n=await wr(async o=>await this.suivreDonnes({idTableau:e,f:o}),ss(1e3)),i=await wr(async o=>await this.suivreColonnesTableau({idTableau:e,f:o}),o=>o!==void 0&&[...new Set(n.map(c=>Object.keys(c.donnes).filter(u=>u!=="id")).flat())].length<=o.length),s=await wr(async o=>await this.suivreDonnes({idTableau:r,f:o}),ss(1e3)),a=i.filter(o=>o.index).map(o=>o.id);for(const o of s){const c=n.find(u=>Hlt(u.donnes,o.donnes,a));if(c){const u={};for(const l of i)c.donnes[l.id]===void 0&&o.donnes[l.id]!==void 0&&(u[l.id]=o.donnes[l.id]);Object.keys(u).length&&(await this.effacerlment({idTableau:e,idlment:c.id}),await this.ajouterlment({idTableau:e,vals:Object.assign({},c.donnes,u)}))}else await this.ajouterlment({idTableau:e,vals:o.donnes})}}async convertirDonnes({idTableau:e,donnes:r,conversions:n={},importerFichiers:i,cheminBaseFichiers:s,donnesExistantes:a}){const o=await wr(async p=>await this.suivreColonnesEtCatgoriesTableau({idTableau:e,f:p})),c=new Set(a?.map(p=>o.filter(g=>g.catgorie?.catgorie==="chane").map(g=>g.catgorie?.type==="simple"?[p[g.id]]:p[g.id]).flat().filter(g=>typeof g=="string")).flat()||[]),u={},l=async({chemin:p})=>{try{if(new URL(p),u[p])return u[p];const g=(await zn.get(p)).data,v=p.split("/"),y=v.pop()||v.pop();if(!y)throw new Error("Nom de fichier manquant.");const b=await this.client.ajouterSFIP({nomFichier:y,contenu:g});u[p]=b}catch{}if(vi||gi){const g=await qt(()=>Promise.resolve().then(()=>Is),void 0),v=await qt(()=>Promise.resolve().then(()=>py),void 0),y=s?v.resolve(s,p):p;if(!g.existsSync(y))return;if(u[y])return u[y];const b=g.readFileSync(y),_=await this.client.ajouterSFIP({nomFichier:v.basename(y),contenu:b});return u[p]=_,_}},f={},d=async({val:p,langue:g})=>{if(f[g]?.[p])return f[g][p];for(const v of c){const{bd:y,fOublier:b}=await this.client.ouvrirBdType({id:v,type:"keyvalue",schma:vt}),_=await y.get(g);if(await b(),_===p)return f[g]||(f[g]={}),f[g][p]=v,v}},h=async({val:p,langue:g})=>{const{bd:v,fOublier:y}=await this.client.ouvrirBdType({id:e,type:"keyvalue",schma:vt}),_={write:v.access.address};await y();const x=await this.client.crerBdIndpendante({type:"keyvalue",optionsAccs:_}),{bd:E,fOublier:k}=await this.client.ouvrirBdType({id:x,type:"keyvalue",schma:vt});return await E.set(g,p),await k(),c.add(x),x},m=async({val:p,catgorie:g,conversion:v})=>{switch(g){case"audio":case"image":case"vido":case"fichier":return typeof p=="string"&&i?Jfe(p)?p:await l({chemin:p})||p:p;case"boolen":return typeof p=="string"?p.toLowerCase()==="true":p;case"numrique":{let y,b;v?.type==="numrique"&&({opration:y,systmeNumration:b}=v);const _=({val:E,ops:k})=>{if(!k)return E;let B=E;for(const D of k)switch(D.op){case"+":B=E+D.val;break;case"-":B=E-D.val;break;case"*":B=E*D.val;break;case"/":B=E/D.val;break;case"^":B=E**D.val;break;default:throw new Error(D.op)}return B};let x;if(typeof p=="string")try{x=this.client.ennikkai.({:p,:b})}catch{}else typeof p=="number"&&(x=p);return x!==void 0?_({val:x,ops:Array.isArray(y)||typeof y>"u"?y:[y]}):p}case"horoDatage":if(v?.type==="horoDatage"&&typeof p=="string"){const{systme:y,format:b}=v;return{systme:"dateJS",val:Vlt.lireDate({systme:y,val:p,format:b}).valueOf()}}else{if(["number","string"].includes(typeof p)){const y=new Date(p);return isNaN(y.valueOf())?p:{systme:"dateJS",val:y.valueOf()}}return p}case"intervaleTemps":{const y=typeof p=="string"?JSON.parse(p):p;return Array.isArray(y)?await Promise.all(y.map(async b=>await m({val:b,catgorie:"horoDatage",conversion:v}))):y}case"chaneNonTraductible":return p;case"chane":{if(typeof p!="string"||ll(p))return p;if(v?.type==="chane"){const{langue:y}=v;return await d({val:p,langue:y})||await h({val:p,langue:y})}return p}case"gojson":return typeof p=="string"?JSON.parse(p):p;default:return p}};for(const p of r)for(const g of o)if(g.catgorie){const{type:v,catgorie:y}=g.catgorie,b=p[g.id];if(b===void 0)continue;const _=n[g.id];if(v==="simple")p[g.id]=await m({val:b,catgorie:y,conversion:_});else{const x=typeof b=="string"?JSON.parse(b):b;p[g.id]=Array.isArray(x)?await Promise.all(x.map(async E=>await m({val:E,catgorie:y,conversion:_}))):[await m({val:x,catgorie:y,conversion:_})]}}return r}async importerDonnes({idTableau:e,donnes:r,conversions:n={},cheminBaseFichiers:i}){const s=await wr(async u=>await this.suivreDonnes({idTableau:e,f:u})),a=await this.convertirDonnes({idTableau:e,donnes:r,conversions:n,importerFichiers:!0,cheminBaseFichiers:i,donnesExistantes:s.map(u=>u.donnes)}),o=[];for(const u of a)s.some(l=>qT(l.donnes,u))||o.push(u);const c=[];for(const u of s)a.some(l=>qT(l,u.donnes))||c.push(u.id);for(const u of c)await this.effacerlment({idTableau:e,idlment:u});for(const u of o)await this.ajouterlment({idTableau:e,vals:u})}async sauvegarderNomsTableau({idTableau:e,noms:r}){await this._confirmerPermission({idTableau:e});const n=await this.client.obtIdBd({nom:"noms",racine:e,type:"keyvalue"}),{bd:i,fOublier:s}=await this.client.ouvrirBdType({id:n,type:"keyvalue",schma:vt});for(const a in r)await i.set(a,r[a]);await s()}async sauvegarderNomTableau({idTableau:e,langue:r,nom:n}){await this._confirmerPermission({idTableau:e});const i=await this.client.obtIdBd({nom:"noms",racine:e,type:"keyvalue"}),{bd:s,fOublier:a}=await this.client.ouvrirBdType({id:i,type:"keyvalue",schma:vt});await s.set(r,n),await a()}async effacerNomTableau({idTableau:e,langue:r}){await this._confirmerPermission({idTableau:e});const n=await this.client.obtIdBd({nom:"noms",racine:e,type:"keyvalue"}),{bd:i,fOublier:s}=await this.client.ouvrirBdType({id:n,type:"keyvalue",schma:vt});await i.del(r),await s()}async suivreNomsTableau({idTableau:e,f:r}){return await this.client.suivreBdDicDeClef({id:e,clef:"noms",schma:vt,f:r})}async ajouterColonneTableau({idTableau:e,idVariable:r,idColonne:n}){await this._confirmerPermission({idTableau:e});const i=await this.client.obtIdBd({nom:"colonnes",racine:e,type:"keyvalue"}),{bd:s,fOublier:a}=await this.client.ouvrirBdType({id:i,type:"keyvalue",schma:t1});n=n||ti();const o={id:n,variable:r};return await s.put(n,o),await a(),n}async effacerColonneTableau({idTableau:e,idColonne:r}){await this._confirmerPermission({idTableau:e});const n=await this.client.obtIdBd({nom:"colonnes",racine:e,type:"keyvalue"}),{bd:i,fOublier:s}=await this.client.ouvrirBdType({id:n,type:"keyvalue",schma:t1});await i.del(r),await s()}async suivreColonnesTableau({idTableau:e,f:r}){return await this.client.suivreBdDicDeClef({id:e,clef:"colonnes",schma:t1,f:async n=>await r(Object.values(n))})}async suivreColonnesEtCatgoriesTableau({idTableau:e,f:r}){const n=async c=>{if(c)return await r(c)},i=async(c,u,l)=>c?await this.client.variables.suivreCatgorieVariable({idVariable:c,f:async f=>{const d=Object.assign({catgorie:f,variable:c},l);await u(d)}}):kn,s=c=>c.variable,a=c=>c.id,o=async({id:c,fSuivreBd:u})=>await this.client.suivreBdsDeBdDic({id:c,f:u,fBranche:i,fIdBdDeBranche:s,fCode:a});return await this.client.suivreBdDeClef({id:e,clef:"colonnes",f:n,fSuivre:o})}async suivreVariables({idTableau:e,f:r}){const n=async s=>{await r((s||[]).filter(a=>a&&ll(a)))},i=async({id:s,fSuivreBd:a})=>await this.client.suivreBdListe({id:s,f:o=>a(o.map(c=>c.variable).filter(c=>!!c))});return await this.client.suivreBdDeClef({id:e,clef:"colonnes",f:n,fSuivre:i})}async ajouterRgleTableau({idTableau:e,idColonne:r,rgle:n}){await this._confirmerPermission({idTableau:e});const i=await this.client.obtIdBd({nom:"rgles",racine:e,type:"keyvalue"}),{bd:s,fOublier:a}=await this.client.ouvrirBdType({id:i,type:"keyvalue",schma:Ow}),o=ti(),u={rgle:{id:o,rgle:n},source:{type:"tableau",id:e},colonne:r};return await s.put(o,u),await a(),o}async effacerRgleTableau({idTableau:e,idRgle:r}){await this._confirmerPermission({idTableau:e});const n=await this.client.obtIdBd({nom:"rgles",racine:e,type:"keyvalue"}),{bd:i,fOublier:s}=await this.client.ouvrirBdType({id:n,type:"keyvalue",schma:Ow});await i.del(r),await s()}async suivreRgles({idTableau:e,f:r}){const n={},i=async()=>{if(!(!n.tableau||!n.variable))return await r([...n.tableau,...n.variable])},s=async m=>(n.tableau=Object.values(m),await i()),a=await this.client.suivreBdDicDeClef({id:e,clef:"rgles",schma:Ow,f:s}),d=await dr({fListe:async m=>await this.suivreColonnesTableau({idTableau:e,f:async p=>m(p.filter(g=>!!g.variable))}),f:async m=>(n.variable=m,await i()),fBranche:async(m,p,g)=>{if(!m)return await p([]),kn;const v=async y=>{const b=y.map(_=>({rgle:_,source:{type:"variable",id:m},colonne:g.id}));return await p(b)};return await this.client.variables.suivreRglesVariable({idVariable:m,f:v})},fIdBdDeBranche:m=>m.variable,fCode:m=>m.id});return async()=>{await a(),await d()}}async suivreValidDonnes({idTableau:e,f:r}){const n={},i=async()=>{if(!n.donnes||!n.rgles)return;let p=[];for(const g of n.rgles){const v=g(n.donnes);p=[...p,...v.flat()]}await r(p)},s=async p=>{if(n.varsColonnes){const g=n.varsColonnes;n.rgles=p.map(v=>qlt({rgle:v.rgle,varsColonnes:g,donnesCatgorie:v.donnesCatgorie})),await i()}},a=async p=>{n.donnes=p,await i()},o=await this.suivreColonnesTableau({idTableau:e,f:async p=>{const g=p.reduce((v,y)=>y.variable?{...v,[y.variable]:y.id}:{...v},{});n.varsColonnes=g,await i()}}),d=await dr({fListe:async p=>await this.suivreRgles({idTableau:e,f:p}),f:s,fBranche:async(p,g,v)=>{if(v.rgle.rgle.typeRgle==="valeurCatgorique"&&v.rgle.rgle.dtails.type==="dynamique"){const{tableau:y,colonne:b}=v.rgle.rgle.dtails;return await this.suivreDonnes({idTableau:y,f:async _=>await g({rgle:v,donnesCatgorie:_.map(x=>x.donnes[b])})})}else return await g({rgle:v}),kn},fIdBdDeBranche:p=>p.rgle.id,fCode:p=>p.rgle.id}),h=await this.suivreDonnes({idTableau:e,f:a});return async()=>{await d(),await h(),await o()}}async suivreValidRgles({idTableau:e,f:r}){const n={},i=async()=>{if(!n.colonnes||!n.rgles)return;const h=[],m=n.rgles.map(y=>y.rgle).filter(y=>y.rgle.rgle.typeRgle==="bornes"),p=m.filter(y=>y.rgle.rgle.dtails.type==="dynamiqueColonne"),g=m.filter(y=>y.rgle.rgle.dtails.type==="dynamiqueVariable"),v=n.rgles.filter(y=>y.rgle.rgle.rgle.typeRgle==="valeurCatgorique"&&y.rgle.rgle.rgle.dtails.type==="dynamique");for(const y of p)if(!n.colonnes.find(_=>_.id===y.rgle.rgle.dtails.val)){const _={rgle:y,dtails:"colonneBornesInexistante"};h.push(_)}for(const y of g)if(!n.colonnes.find(_=>_.variable===y.rgle.rgle.dtails.val)){const _={rgle:y,dtails:"variableBornesNonPrsente"};h.push(_)}for(const y of v)if(!y.colsTableauRf?.find(_=>_.id===y.rgle.rgle.rgle.dtails.colonne)){const _={rgle:y.rgle,dtails:"colonneCatgInexistante"};h.push(_)}await r(h)},s=async h=>(n.rgles=h,await i()),a=await this.suivreColonnesTableau({idTableau:e,f:async h=>(n.colonnes=h,await i())}),f=await dr({fListe:async h=>await this.suivreRgles({idTableau:e,f:h}),f:s,fBranche:async(h,m,p)=>{if(p.rgle.rgle.typeRgle==="valeurCatgorique"&&p.rgle.rgle.dtails.type==="dynamique"){const{tableau:g}=p.rgle.rgle.dtails;return await this.suivreColonnesTableau({idTableau:g,f:v=>m({rgle:p,colsTableauRf:v})})}else return await m({rgle:p}),kn},fIdBdDeBranche:h=>h.rgle.id,fCode:h=>h.rgle.id});return async()=>{await f(),await a()}}async effacerTableau({idTableau:e}){for(const r of["noms","donnes","colonnes","rgles"]){const n=await this.client.obtIdBd({nom:r,racine:e});n&&await this.client.effacerBd({id:n})}await this.client.effacerBd({id:e})}}Oe([je],Bc.prototype,"suivreDiffrencesAvecTableau",null);Oe([je],Bc.prototype,"suivreIndex",null);Oe([je],Bc.prototype,"suivreDonnes",null);Oe([je],Bc.prototype,"suivreNomsTableau",null);Oe([je],Bc.prototype,"suivreColonnesTableau",null);Oe([je],Bc.prototype,"suivreColonnesEtCatgoriesTableau",null);Oe([je],Bc.prototype,"suivreVariables",null);Oe([je],Bc.prototype,"suivreRgles",null);Oe([je],Bc.prototype,"suivreValidDonnes",null);Oe([je],Bc.prototype,"suivreValidRgles",null);const Wlt={type:"string"},Ho={type:"object",properties:{type:{type:"string",nullable:!0},catgorie:{type:"object",properties:{catgorie:{type:"string",nullable:!0},type:{type:"string",nullable:!0}},required:[],nullable:!0},noms:{type:"string",nullable:!0},descriptions:{type:"string",nullable:!0},units:{type:"string",nullable:!0},rgles:{type:"string",nullable:!0},statut:{type:"object",properties:{idNouvelle:{type:"string",nullable:!0},statut:{type:"string",nullable:!0}},required:[],nullable:!0}},required:[]},Bw={type:"object",additionalProperties:{type:"object",properties:{typeRgle:{type:"string"},dtails:{type:"object",required:[],additionalProperties:!0}},required:["dtails","typeRgle"]},required:[]};class Sd extends F0{constructor({client:e}){super({client:e,clef:"variables",schmaBdPrincipale:Wlt})}async suivreRsolutionpingle({pingle:e,f:r}){const n=await this.client.favoris.estpinglSurDispositif({dispositifs:e.pingle.base||"TOUS"});return await this.client.suivreBd({id:e.idObjet,type:"keyvalue",schma:Ho,f:async s=>{try{const a=await s.allAsJSON();return await r(new Set(n?[e.idObjet,a.descriptions,a.noms,a.rgles].filter(o=>!!o):[]))}catch{return}}})}async suivreVariables({f:e,idCompte:r}){return await this.suivreBdPrincipale({idCompte:r,f:e})}async crerVariable({catgorie:e,pingler:r=!0}){const n=await this.client.crerBdIndpendante({type:"keyvalue",optionsAccs:{address:void 0,write:await this.client.obtIdCompte()}});await this.ajouterMesVariables({idVariable:n}),r&&await this.pinglerVariable({idVariable:n});const{bd:i,fOublier:s}=await this.client.ouvrirBdType({id:n,type:"keyvalue",schma:Ho}),a=i.access;if(!VB(a))throw Error("Contrleur de type non reconnu.");const o={write:a.address};await i.set("type","variable");const c=await this.client.crerBdIndpendante({type:"keyvalue",optionsAccs:o});await i.set("noms",c);const u=await this.client.crerBdIndpendante({type:"keyvalue",optionsAccs:o});await i.set("descriptions",u);const l=await this.client.crerBdIndpendante({type:"keyvalue",optionsAccs:o});return await i.set("rgles",l),await i.set("catgorie",this.standardiserCatgorieVariable(e)),await this.tablirStatut({id:n,statut:{statut:"active"}}),s(),n}async ajouterMesVariables({idVariable:e}){const{bd:r,fOublier:n}=await this.obtBd();await r.add(e),await n()}async enleverDeMesVariables({idVariable:e}){const{bd:r,fOublier:n}=await this.obtBd();await r.del(e),await n()}async pinglerVariable({idVariable:e,options:r={}}){const n=L0(r,{type:"variable",base:as});await this.client.favoris.pinglerFavori({idObjet:e,pingle:n})}async suivrepingleVariable({idVariable:e,f:r,idCompte:n}){return await this.client.favoris.suivretatFavori({idObjet:e,f:async i=>{i?.type==="variable"?await r(i):await r(void 0)},idCompte:n})}async copierVariable({idVariable:e}){const{bd:r,fOublier:n}=await this.client.ouvrirBdType({id:e,type:"keyvalue",schma:Ho}),i=await r.get("catgorie"),s=await this.crerVariable({catgorie:i}),{bd:a,fOublier:o}=await this.client.ouvrirBdType({id:s,type:"keyvalue",schma:Ho}),c=await r.get("noms");if(c){const{bd:h,fOublier:m}=await this.client.ouvrirBdType({id:c,type:"keyvalue",schma:vt}),p=await h.allAsJSON();await m(),await this.sauvegarderNomsVariable({idVariable:s,noms:p})}const u=await r.get("descriptions");if(u){const{bd:h,fOublier:m}=await this.client.ouvrirBdType({id:u,type:"keyvalue",schma:vt}),p=await h.allAsJSON();await m(),await this.sauvegarderDescriptionsVariable({idVariable:s,descriptions:p})}const l=await r.get("units");l&&await a.put("units",l);const f=await r.get("rgles");if(f){const{bd:h,fOublier:m}=await this.client.ouvrirBdType({id:f,type:"keyvalue",schma:Bw}),p=await h.allAsJSON();await m(),await Promise.allSettled(Object.entries(p).map(async([g,v])=>{await this.ajouterRgleVariable({idVariable:s,rgle:v,idRgle:g})}))}const d=await r.get("statut")||{statut:"active"};return await this.tablirStatut({id:s,statut:d}),await Promise.allSettled([n(),o()]),s}async _confirmerPermission({idVariable:e}){if(!await this.client.permission({idObjet:e}))throw new Error(`Permission de modification refuse pour la variable ${e}.`)}async inviterAuteur({idVariable:e,idCompteAuteur:r,rle:n}){await this.client.donnerAccs({idBd:e,identit:r,rle:n})}async sauvegarderNomsVariable({idVariable:e,noms:r}){await this._confirmerPermission({idVariable:e});const n=await this.client.obtIdBd({nom:"noms",racine:e,type:"keyvalue"}),{bd:i,fOublier:s}=await this.client.ouvrirBdType({id:n,type:"keyvalue",schma:vt});for(const a in r)await i.set(a,r[a]);await s()}async sauvegarderNomVariable({idVariable:e,langue:r,nom:n}){await this._confirmerPermission({idVariable:e});const i=await this.client.obtIdBd({nom:"noms",racine:e,type:"keyvalue"}),{bd:s,fOublier:a}=await this.client.ouvrirBdType({id:i,type:"keyvalue",schma:vt});await s.set(r,n),await a()}async effacerNomVariable({idVariable:e,langue:r}){await this._confirmerPermission({idVariable:e});const n=await this.client.obtIdBd({nom:"noms",racine:e,type:"keyvalue"}),{bd:i,fOublier:s}=await this.client.ouvrirBdType({id:n,type:"keyvalue",schma:vt});await i.del(r),await s()}async sauvegarderDescriptionsVariable({idVariable:e,descriptions:r}){await this._confirmerPermission({idVariable:e});const n=await this.client.obtIdBd({nom:"descriptions",racine:e,type:"keyvalue"}),{bd:i,fOublier:s}=await this.client.ouvrirBdType({id:n,type:"keyvalue",schma:vt});for(const a in r)await i.set(a,r[a]);await s()}async sauvegarderDescriptionVariable({idVariable:e,langue:r,description:n}){await this._confirmerPermission({idVariable:e});const i=await this.client.obtIdBd({nom:"descriptions",racine:e,type:"keyvalue"}),{bd:s,fOublier:a}=await this.client.ouvrirBdType({id:i,type:"keyvalue",schma:vt});await s.set(r,n),await a()}async effacerDescriptionVariable({idVariable:e,langue:r}){await this._confirmerPermission({idVariable:e});const n=await this.client.obtIdBd({nom:"descriptions",racine:e,type:"keyvalue"}),{bd:i,fOublier:s}=await this.client.ouvrirBdType({id:n,type:"keyvalue",schma:vt});await i.del(r),await s()}async sauvegarderCatgorieVariable({idVariable:e,catgorie:r}){const{bd:n,fOublier:i}=await this.client.ouvrirBdType({id:e,type:"keyvalue",schma:Ho});await n.set("catgorie",this.standardiserCatgorieVariable(r)),await i()}standardiserCatgorieVariable(e){return typeof e=="string"?{type:"simple",catgorie:e}:e}async sauvegarderUnitsVariable({idVariable:e,idUnit:r}){const{bd:n,fOublier:i}=await this.client.ouvrirBdType({id:e,type:"keyvalue",schma:Ho});await n.set("units",r),await i()}async ajouterRgleVariable({idVariable:e,rgle:r,idRgle:n}){await this._confirmerPermission({idVariable:e});const i=await this.client.obtIdBd({nom:"rgles",racine:e,type:"keyvalue"});n=n||ti();const{bd:s,fOublier:a}=await this.client.ouvrirBdType({id:i,type:"keyvalue",schma:Bw});return await s.put(n,r),await a(),n}async effacerRgleVariable({idVariable:e,idRgle:r}){await this._confirmerPermission({idVariable:e});const n=await this.client.obtIdBd({nom:"rgles",racine:e,type:"keyvalue"}),{bd:i,fOublier:s}=await this.client.ouvrirBdType({id:n,type:"keyvalue",schma:Bw});await i.del(r),await s()}async modifierRgleVariable({idVariable:e,rgleModifie:r,idRgle:n}){await this.effacerRgleVariable({idVariable:e,idRgle:n}),await this.ajouterRgleVariable({idVariable:e,rgle:r,idRgle:n})}async suivreNomsVariable({idVariable:e,f:r}){return await this.client.suivreBdDicDeClef({id:e,clef:"noms",schma:vt,f:r})}async suivreDescriptionsVariable({idVariable:e,f:r}){return await this.client.suivreBdDicDeClef({id:e,clef:"descriptions",schma:vt,f:r})}async suivreCatgorieVariable({idVariable:e,f:r}){return await this.client.suivreBd({id:e,type:"keyvalue",schma:Ho,f:async n=>{const i=await n.get("catgorie");i&&i.catgorie&&i.type&&await r(this.standardiserCatgorieVariable(i))}})}async suivreUnitsVariable({idVariable:e,f:r}){return await this.client.suivreBd({id:e,type:"keyvalue",schma:Ho,f:async n=>{const i=await n.get("units");await r(i||null)}})}async suivreRglesVariable({idVariable:e,f:r}){const n={catgorie:{},propres:{}},i=async()=>{await r(Object.entries(Object.assign({},n.catgorie,n.propres)).map(([l,f])=>({id:l,rgle:f})))},s=async l=>{const f={[ti()]:{typeRgle:"catgorie",dtails:{catgorie:l}}};n.catgorie=f,await i()},a=await this.suivreCatgorieVariable({idVariable:e,f:s}),o=async l=>{n.propres=l,await i()},c=await this.client.suivreBdDicDeClef({id:e,clef:"rgles",schma:Bw,f:o});return async()=>{await a(),await c()}}async suivreQualitVariable({idVariable:e,f:r}){const n={noms:{},descr:{},rgles:[]},i=async()=>{const f=[Object.keys(n.noms).length?1:0,Object.keys(n.descr).length?1:0];n.catgorie?.catgorie==="numrique"&&f.push(n.units?1:0),n.catgorie?.catgorie==="numrique"&&f.push(n.rgles.length>=1?1:0);const d=f.reduce((h,m)=>h+m,0)/f.length;await r(d)},s=await this.suivreNomsVariable({idVariable:e,f:async f=>{n.noms=f,await i()}}),a=await this.suivreDescriptionsVariable({idVariable:e,f:async f=>{n.descr=f,await i()}}),o=await this.suivreUnitsVariable({idVariable:e,f:async f=>{n.units=f,await i()}}),c=await this.suivreCatgorieVariable({idVariable:e,f:async f=>{n.catgorie=f,await i()}}),u=await this.suivreRglesVariable({idVariable:e,f:async f=>{n.rgles=f,await i()}});return async()=>{await Promise.allSettled([s(),a(),o(),c(),u()])}}async tablirStatut({id:e,statut:r}){const{bd:n,fOublier:i}=await this.client.ouvrirBdType({id:e,type:"keyvalue",schma:Ho});await n.set("statut",r),await i()}async marquerObsolte({id:e,idNouvelle:r}){const{bd:n,fOublier:i}=await this.client.ouvrirBdType({id:e,type:"keyvalue",schma:Ho});n.set("statut",{statut:"obsolte",idNouvelle:r}),await i()}async effacerVariable({idVariable:e}){await this.enleverDeMesVariables({idVariable:e}),await this.client.favoris.dspinglerFavori({idObjet:e});const{bd:r,fOublier:n}=await this.client.ouvrirBdType({id:e,type:"keyvalue",schma:Ho}),i=await r.all();for(const s of i)typeof s.value=="string"&&Su(s.value)&&await this.client.effacerBd({id:s.value});await n(),await this.client.effacerBd({id:e})}}Oe([je],Sd.prototype,"suivreVariables",null);Oe([je],Sd.prototype,"suivreNomsVariable",null);Oe([je],Sd.prototype,"suivreDescriptionsVariable",null);Oe([je],Sd.prototype,"suivreCatgorieVariable",null);Oe([je],Sd.prototype,"suivreUnitsVariable",null);Oe([je],Sd.prototype,"suivreRglesVariable",null);Oe([je],Sd.prototype,"suivreQualitVariable",null);const HT={};class Zde{fichier;_donnes;constructor(e){this.fichier=uu.join(e,"donnes.json"),rg.existsSync(e)||rg.mkdirSync(e,{recursive:!0});try{this._donnes=JSON.parse(rg.readFileSync(this.fichier).toString())}catch{this._donnes={}}}getItem(e){return this._donnes[e]}setItem(e,r){this._donnes[e]=r,this.sauvegarder()}removeItem(e){delete this._donnes[e],this.sauvegarder()}clear(){this._donnes={},this.sauvegarder()}async sauvegarder(){rg.writeFileSync(this.fichier,JSON.stringify(this._donnes))}}const mg=async t=>{if(typeof localStorage>"u"||localStorage===null){const e=uu.join(t,"stockageLocal");return HT[e]||(HT[e]=new Zde(e)),HT[e]}else return localStorage},Glt=async t=>{const e=await mg(t);return e instanceof Zde?JSON.stringify(e._donnes):JSON.stringify(e)};let Klt=class extends Error{type;code;constructor(e,r){super(e??"The operation was aborted"),this.type="aborted",this.name="AbortError",this.code=r??"ABORT_ERR"}};async function xo(t,e,r,n){const i=new Klt(n?.errorMessage,n?.errorCode);return r?.aborted===!0?Promise.reject(i):new Promise((s,a)=>{function o(){r?.removeEventListener("abort",l),t.removeEventListener(e,c),n?.errorEvent!=null&&t.removeEventListener(n.errorEvent,u)}const c=f=>{try{if(n?.filter?.(f)===!1)return}catch(d){o(),a(d);return}o(),s(f)},u=f=>{o(),a(f.detail)},l=()=>{o(),a(i)};r?.addEventListener("abort",l),t.addEventListener(e,c),n?.errorEvent!=null&&t.addEventListener(n.errorEvent,u)})}class Xlt extends Error{remainingPoints;msBeforeNext;consumedPoints;isFirstInDuration;constructor(e="Rate limit exceeded",r){super(e),this.name="RateLimitError",this.remainingPoints=r.remainingPoints,this.msBeforeNext=r.msBeforeNext,this.consumedPoints=r.consumedPoints,this.isFirstInDuration=r.isFirstInDuration}}class Ylt extends Error{static name="QueueFullError";constructor(e="The queue was full"){super(e),this.name="QueueFullError"}}class Zlt{deferred;signal;constructor(e){this.signal=e,this.deferred=sr(),this.onAbort=this.onAbort.bind(this),this.signal?.addEventListener("abort",this.onAbort)}onAbort(){this.deferred.reject(this.signal?.reason??new hl)}cleanup(){this.signal?.removeEventListener("abort",this.onAbort)}}function Jlt(){return`${parseInt(String(Math.random()*1e9),10).toString()}${Date.now()}`}class Qlt{id;fn;options;recipients;status;timeline;controller;constructor(e,r){this.id=Jlt(),this.status="queued",this.fn=e,this.options=r,this.recipients=[],this.timeline={created:Date.now()},this.controller=new AbortController,this.controller.signal,this.onAbort=this.onAbort.bind(this)}abort(e){this.controller.abort(e)}onAbort(){this.recipients.reduce((r,n)=>r&&n.signal?.aborted===!0,!0)&&(this.controller.abort(new hl),this.cleanup())}async join(e={}){const r=new Zlt(e.signal);return this.recipients.push(r),e.signal?.addEventListener("abort",this.onAbort),r.deferred.promise}async run(){this.status="running",this.timeline.started=Date.now();try{this.controller.signal.throwIfAborted();const e=await Mi(this.fn({...this.options??{},signal:this.controller.signal}),this.controller.signal);this.recipients.forEach(r=>{r.deferred.resolve(e)}),this.status="complete"}catch(e){this.recipients.forEach(r=>{r.deferred.reject(e)}),this.status="errored"}finally{this.timeline.finished=Date.now(),this.cleanup()}}cleanup(){this.recipients.forEach(e=>{e.cleanup(),e.signal?.removeEventListener("abort",this.onAbort)})}}class Zh extends oi{concurrency;maxSize;queue;pending;sort;constructor(e={}){super(),this.concurrency=e.concurrency??Number.POSITIVE_INFINITY,this.maxSize=e.maxSize??Number.POSITIVE_INFINITY,this.pending=0,e.metricName!=null&&e.metrics?.registerMetricGroup(e.metricName,{calculate:()=>({size:this.queue.length,running:this.pending,queued:this.queue.length-this.pending})}),this.sort=e.sort,this.queue=[]}tryToStartAnother(){if(this.size===0)return queueMicrotask(()=>{this.safeDispatchEvent("empty")}),this.running===0&&queueMicrotask(()=>{this.safeDispatchEvent("idle")}),!1;if(this.pending<this.concurrency){let e;for(const r of this.queue)if(r.status==="queued"){e=r;break}return e==null?!1:(this.safeDispatchEvent("active"),this.pending++,e.run().finally(()=>{for(let r=0;r<this.queue.length;r++)if(this.queue[r]===e){this.queue.splice(r,1);break}this.pending--,this.tryToStartAnother(),this.safeDispatchEvent("next")}),!0)}return!1}enqueue(e){this.queue.push(e),this.sort!=null&&this.queue.sort(this.sort)}async add(e,r){if(r?.signal?.throwIfAborted(),this.size===this.maxSize)throw new Ylt;const n=new Qlt(e,r);return this.enqueue(n),this.safeDispatchEvent("add"),this.tryToStartAnother(),n.join(r).then(i=>(this.safeDispatchEvent("completed",{detail:i}),this.safeDispatchEvent("success",{detail:{job:n,result:i}}),i)).catch(i=>{if(n.status==="queued"){for(let s=0;s<this.queue.length;s++)if(this.queue[s]===n){this.queue.splice(s,1);break}}throw this.safeDispatchEvent("error",{detail:i}),this.safeDispatchEvent("failure",{detail:{job:n,error:i}}),i})}clear(){this.queue.splice(0,this.queue.length)}abort(){this.queue.forEach(e=>{e.abort(new hl)}),this.clear()}async onEmpty(e){this.size!==0&&await xo(this,"empty",e?.signal)}async onSizeLessThan(e,r){this.size<e||await xo(this,"next",r?.signal,{filter:()=>this.size<e})}async onIdle(e){this.pending===0&&this.size===0||await xo(this,"idle",e?.signal)}get size(){return this.queue.length}get queued(){return this.queue.length-this.pending}get running(){return this.pending}async*toGenerator(e){e?.signal?.throwIfAborted();const r=Po({objectMode:!0}),n=c=>{c!=null?this.abort():this.clear(),r.end(c)},i=c=>{c.detail!=null&&r.push(c.detail)},s=c=>{n(c.detail)},a=()=>{n()},o=()=>{n(new hl("Queue aborted"))};this.addEventListener("completed",i),this.addEventListener("error",s),this.addEventListener("idle",a),e?.signal?.addEventListener("abort",o);try{yield*r}finally{this.removeEventListener("completed",i),this.removeEventListener("error",s),this.removeEventListener("idle",a),e?.signal?.removeEventListener("abort",o),n()}}}class nd extends Zh{has(e){return this.find(e)!=null}find(e){return this.queue.find(r=>e.equals(r.options.peerId))}}const eut=8,vM=1024*1024*4;let tut=class extends Error{name="InvalidMessageLengthError";code="ERR_INVALID_MSG_LENGTH"},Jde=class extends Error{name="InvalidDataLengthError";code="ERR_MSG_DATA_TOO_LONG"},rut=class extends Error{name="InvalidDataLengthLengthError";code="ERR_MSG_LENGTH_TOO_LONG"},aY=class extends Error{name="UnexpectedEOFError";code="ERR_UNEXPECTED_EOF"};function Qde(t){return t[Symbol.asyncIterator]!=null}function ehe(t,e){if(t.byteLength>e)throw new Jde("Message length too long")}const n_=t=>{const e=vn(t),r=Ea(e);return Ds(t,r),n_.bytes=e,r};n_.bytes=0;function xp(t,e){e=e??{};const r=e.lengthEncoder??n_,n=e?.maxDataLength??vM;function*i(s){ehe(s,n);const a=r(s.byteLength);a instanceof Uint8Array?yield a:yield*a,s instanceof Uint8Array?yield s:yield*s}return Qde(t)?async function*(){for await(const s of t)yield*i(s)}():function*(){for(const s of t)yield*i(s)}()}xp.single=(t,e)=>{e=e??{};const r=e.lengthEncoder??n_,n=e?.maxDataLength??vM;return ehe(t,n),new cr(r(t.byteLength),t)};var Hd;(function(t){t[t.LENGTH=0]="LENGTH",t[t.DATA=1]="DATA"})(Hd||(Hd={}));const yM=t=>{const e=kl(t);return yM.bytes=vn(e),e};yM.bytes=0;function Sp(t,e){const r=new cr;let n=Hd.LENGTH,i=-1;const s=e?.lengthDecoder??yM,a=e?.maxLengthLength??eut,o=e?.maxDataLength??vM;function*c(){for(;r.byteLength>0;){if(n===Hd.LENGTH)try{if(i=s(r),i<0)throw new tut("Invalid message length");if(i>o)throw new Jde("Message length too long");const u=s.bytes;r.consume(u),e?.onLength!=null&&e.onLength(i),n=Hd.DATA}catch(u){if(u instanceof RangeError){if(r.byteLength>a)throw new rut("Message length length too long");break}throw u}if(n===Hd.DATA){if(r.byteLength<i)break;const u=r.sublist(0,i);r.consume(i),e?.onData!=null&&e.onData(u),yield u,n=Hd.LENGTH}}}return Qde(t)?async function*(){for await(const u of t)r.append(u),yield*c();if(r.byteLength>0)throw new aY("Unexpected end of input")}():function*(){for(const u of t)r.append(u),yield*c();if(r.byteLength>0)throw new aY("Unexpected end of input")}()}Sp.fromReader=(t,e)=>{let r=1;const n=async function*(){for(;;)try{const{done:s,value:a}=await t.next(r);if(s===!0)return;a!=null&&(yield a)}catch(s){if(s.code==="ERR_UNDER_READ")return{done:!0,value:null};throw s}finally{r=1}}();return Sp(n,{...e??{},onLength:s=>{r=s}})};function nut(t){return t[Symbol.asyncIterator]!=null}function _6(t,e){return nut(t)?async function*(){let r=0;if(!(e<1)){for await(const n of t)if(yield n,r++,r===e)return}}():function*(){let r=0;if(!(e<1)){for(const n of t)if(yield n,r++,r===e)return}}()}const Dw="/ipfs/bitswap/1.2.0",iut=1024,sut=1024,aut=1024,out=5e3,cut=10,lut=50,uut=!1,fut=3,the=1024*1024*4,dut=the;var Wi;(function(t){t.WantBlock="WantBlock",t.WantHave="WantHave"})(Wi||(Wi={}));var oP;(function(t){t[t.WantBlock=0]="WantBlock",t[t.WantHave=1]="WantHave"})(oP||(oP={}));(function(t){t.codec=()=>ra(oP)})(Wi||(Wi={}));var Yv;(function(t){let e;t.codec=()=>(e==null&&(e=Ot((r,n,i={})=>{i.lengthDelimited!==!1&&n.fork(),r.cid!=null&&r.cid.byteLength>0&&(n.uint32(10),n.bytes(r.cid)),r.priority!=null&&r.priority!==0&&(n.uint32(16),n.int32(r.priority)),r.cancel!=null&&(n.uint32(24),n.bool(r.cancel)),r.wantType!=null&&(n.uint32(32),Wi.codec().encode(r.wantType,n)),r.sendDontHave!=null&&(n.uint32(40),n.bool(r.sendDontHave)),i.lengthDelimited!==!1&&n.ldelim()},(r,n,i={})=>{const s={cid:yr(0),priority:0},a=n==null?r.len:r.pos+n;for(;r.pos<a;){const o=r.uint32();switch(o>>>3){case 1:{s.cid=r.bytes();break}case 2:{s.priority=r.int32();break}case 3:{s.cancel=r.bool();break}case 4:{s.wantType=Wi.codec().decode(r);break}case 5:{s.sendDontHave=r.bool();break}default:{r.skipType(o&7);break}}}return s})),e),t.encode=r=>Rt(r,t.codec()),t.decode=(r,n)=>Pt(r,t.codec(),n)})(Yv||(Yv={}));var x6;(function(t){let e;t.codec=()=>(e==null&&(e=Ot((r,n,i={})=>{if(i.lengthDelimited!==!1&&n.fork(),r.entries!=null)for(const s of r.entries)n.uint32(10),Yv.codec().encode(s,n);r.full!=null&&(n.uint32(16),n.bool(r.full)),i.lengthDelimited!==!1&&n.ldelim()},(r,n,i={})=>{const s={entries:[]},a=n==null?r.len:r.pos+n;for(;r.pos<a;){const o=r.uint32();switch(o>>>3){case 1:{if(i.limits?.entries!=null&&s.entries.length===i.limits.entries)throw new rn('Decode error - map field "entries" had too many elements');s.entries.push(Yv.codec().decode(r,r.uint32(),{limits:i.limits?.entries$}));break}case 2:{s.full=r.bool();break}default:{r.skipType(o&7);break}}}return s})),e),t.encode=r=>Rt(r,t.codec()),t.decode=(r,n)=>Pt(r,t.codec(),n)})(x6||(x6={}));var Zv;(function(t){let e;t.codec=()=>(e==null&&(e=Ot((r,n,i={})=>{i.lengthDelimited!==!1&&n.fork(),r.prefix!=null&&r.prefix.byteLength>0&&(n.uint32(10),n.bytes(r.prefix)),r.data!=null&&r.data.byteLength>0&&(n.uint32(18),n.bytes(r.data)),i.lengthDelimited!==!1&&n.ldelim()},(r,n,i={})=>{const s={prefix:yr(0),data:yr(0)},a=n==null?r.len:r.pos+n;for(;r.pos<a;){const o=r.uint32();switch(o>>>3){case 1:{s.prefix=r.bytes();break}case 2:{s.data=r.bytes();break}default:{r.skipType(o&7);break}}}return s})),e),t.encode=r=>Rt(r,t.codec()),t.decode=(r,n)=>Pt(r,t.codec(),n)})(Zv||(Zv={}));var ul;(function(t){t.HaveBlock="HaveBlock",t.DoNotHaveBlock="DoNotHaveBlock"})(ul||(ul={}));var S6;(function(t){t[t.HaveBlock=0]="HaveBlock",t[t.DoNotHaveBlock=1]="DoNotHaveBlock"})(S6||(S6={}));(function(t){t.codec=()=>ra(S6)})(ul||(ul={}));var Jv;(function(t){let e;t.codec=()=>(e==null&&(e=Ot((r,n,i={})=>{i.lengthDelimited!==!1&&n.fork(),r.cid!=null&&r.cid.byteLength>0&&(n.uint32(10),n.bytes(r.cid)),r.type!=null&&S6[r.type]!==0&&(n.uint32(16),ul.codec().encode(r.type,n)),i.lengthDelimited!==!1&&n.ldelim()},(r,n,i={})=>{const s={cid:yr(0),type:ul.HaveBlock},a=n==null?r.len:r.pos+n;for(;r.pos<a;){const o=r.uint32();switch(o>>>3){case 1:{s.cid=r.bytes();break}case 2:{s.type=ul.codec().decode(r);break}default:{r.skipType(o&7);break}}}return s})),e),t.encode=r=>Rt(r,t.codec()),t.decode=(r,n)=>Pt(r,t.codec(),n)})(Jv||(Jv={}));var Qv;(function(t){let e;t.codec=()=>(e==null&&(e=Ot((r,n,i={})=>{if(i.lengthDelimited!==!1&&n.fork(),r.wantlist!=null&&(n.uint32(10),x6.codec().encode(r.wantlist,n)),r.blocks!=null)for(const s of r.blocks)n.uint32(26),Zv.codec().encode(s,n);if(r.blockPresences!=null)for(const s of r.blockPresences)n.uint32(34),Jv.codec().encode(s,n);r.pendingBytes!=null&&r.pendingBytes!==0&&(n.uint32(40),n.int32(r.pendingBytes)),i.lengthDelimited!==!1&&n.ldelim()},(r,n,i={})=>{const s={blocks:[],blockPresences:[],pendingBytes:0},a=n==null?r.len:r.pos+n;for(;r.pos<a;){const o=r.uint32();switch(o>>>3){case 1:{s.wantlist=x6.codec().decode(r,r.uint32(),{limits:i.limits?.wantlist});break}case 3:{if(i.limits?.blocks!=null&&s.blocks.length===i.limits.blocks)throw new rn('Decode error - map field "blocks" had too many elements');s.blocks.push(Zv.codec().decode(r,r.uint32(),{limits:i.limits?.blocks$}));break}case 4:{if(i.limits?.blockPresences!=null&&s.blockPresences.length===i.limits.blockPresences)throw new rn('Decode error - map field "blockPresences" had too many elements');s.blockPresences.push(Jv.codec().decode(r,r.uint32(),{limits:i.limits?.blockPresences$}));break}case 5:{s.pendingBytes=r.int32();break}default:{r.skipType(o&7);break}}}return s})),e),t.encode=r=>Rt(r,t.codec()),t.decode=(r,n)=>Pt(r,t.codec(),n)})(Qv||(Qv={}));function hut(t,e){for(const[r,n]of e.wantlist.entries()){const i=t.wantlist.get(r);i!=null&&(i.priority>n.priority&&(n.priority=i.priority),n.cancel=n.cancel??i.cancel,n.wantType=n.wantType??i.wantType,n.sendDontHave=n.sendDontHave??i.sendDontHave),t.wantlist.set(r,n)}for(const[r,n]of e.blockPresences.entries())t.blockPresences.set(r,n);for(const[r,n]of e.blocks.entries())t.blocks.set(r,n);return e.full&&!t.full&&(t.full=!0),t}class put extends Error{static name="BlockTooLargeError";constructor(e="Block too large"){super(e),this.name="BlockTooLargeError"}}const mut=4193648,gut=mut+16;function*vut(t,e){const r=[...t.wantlist.values()],n=[...t.blockPresences.values()],i=[...t.blocks.values()];let s=0,a=0,o=0,c=!1;for(;;){const u={wantlist:{full:t.full??!1,entries:[]},blockPresences:[],blocks:[],pendingBytes:0};let l=Qv.encode(u).byteLength,{added:f,hasMore:d,newSize:h}=WT(i,u.blocks,o,e,l,yut);o+=f,l=h;const m=d;({added:f,hasMore:d,newSize:h}=WT(n,u.blockPresences,a,e,l,but)),a+=f,l=h;const p=d;if({added:f,hasMore:d,newSize:h}=WT(r,u.wantlist.entries,s,e,l,wut),s+=f,l=h,c=!m&&!p&&!d,c||(u.wantlist.full=!1),yield Qv.encode(u),c)break}}function WT(t,e,r,n,i,s){let a=0,o=!1;for(let c=r;c<t.length;c++){const u=t[c],l=s(u);if(l>gut)throw new put("Cannot send block as after encoding it is over the max message size");const f=i+l;if(f>n){o=!0;break}e.push(u),a++,i=f}return{hasMore:o,added:a,newSize:i}}function yut(t){return bM(3,Zv.encode(t))}function but(t){return bM(4,Jv.encode(t))}function wut(t){return bM(1,Yv.encode(t))}function bM(t,e){const r=vn(t),n=vn(e.byteLength);return r+n+e.byteLength}let _ut=class extends oi{log;libp2p;routing;protocols;running;maxInboundStreams;maxOutboundStreams;messageReceiveTimeout;registrarIds;metrics;sendQueue;runOnLimitedConnections;maxOutgoingMessageSize;maxIncomingMessageSize;constructor(e,r={}){super(),this.log=e.logger.forComponent("helia:bitswap:network"),this.libp2p=e.libp2p,this.routing=e.routing,this.protocols=r.protocols??[Dw],this.registrarIds=[],this.running=!1,this._onStream=this._onStream.bind(this),this.maxInboundStreams=r.maxInboundStreams??sut,this.maxOutboundStreams=r.maxOutboundStreams??aut,this.messageReceiveTimeout=r.messageReceiveTimeout??out,this.runOnLimitedConnections=r.runOnLimitedConnections??uut,this.maxIncomingMessageSize=r.maxIncomingMessageSize??the,this.maxOutgoingMessageSize=r.maxOutgoingMessageSize??r.maxIncomingMessageSize??dut,this.metrics={blocksSent:e.metrics?.registerCounter("helia_bitswap_sent_blocks_total"),dataSent:e.metrics?.registerCounter("helia_bitswap_sent_data_bytes_total")},this.sendQueue=new nd({concurrency:r.messageSendConcurrency??lut,metrics:e.metrics,metricName:"helia_bitswap_message_send_queue"}),this.sendQueue.addEventListener("error",n=>{this.log.error("error sending wantlist to peer",n.detail)})}async start(){if(this.running)return;this.running=!0,await this.libp2p.handle(this.protocols,this._onStream,{maxInboundStreams:this.maxInboundStreams,maxOutboundStreams:this.maxOutboundStreams,runOnLimitedConnection:this.runOnLimitedConnections});const e={onConnect:r=>{this.safeDispatchEvent("peer:connected",{detail:r})},onDisconnect:r=>{this.safeDispatchEvent("peer:disconnected",{detail:r})}};this.registrarIds=[];for(const r of this.protocols)this.registrarIds.push(await this.libp2p.register(r,e));this.libp2p.getConnections().forEach(r=>{this.safeDispatchEvent("peer:connected",{detail:r.remotePeer})})}async stop(){if(this.running=!1,await this.libp2p.unhandle(this.protocols),this.registrarIds!=null){for(const e of this.registrarIds)this.libp2p.unregister(e);this.registrarIds=[]}}_onStream(e){if(!this.running)return;const{stream:r,connection:n}=e;Promise.resolve().then(async()=>{this.log("incoming new bitswap %s stream from %p",r.protocol,n.remotePeer);const i=()=>{r.status==="open"?r.abort(new C8(`Incoming Bitswap stream timed out after ${this.messageReceiveTimeout}ms`)):this.log("stream aborted with status %s",r.status)};let s=AbortSignal.timeout(this.messageReceiveTimeout);s.addEventListener("abort",i),await r.closeWrite(),await Un(r,a=>Sp(a,{maxDataLength:this.maxIncomingMessageSize}),async a=>{for await(const o of a)try{const c=Qv.decode(o);this.log("incoming new bitswap %s message from %p on stream",r.protocol,n.remotePeer,r.id),this.safeDispatchEvent("bitswap:message",{detail:{peer:n.remotePeer,message:c}}),s.removeEventListener("abort",i),s=AbortSignal.timeout(this.messageReceiveTimeout),s.addEventListener("abort",i)}catch(c){this.log.error("error reading incoming bitswap message from %p on stream",n.remotePeer,r.id,c),r.abort(c);break}})}).catch(i=>{this.log.error("error handling incoming stream from %p",n.remotePeer,i),r.abort(i)})}async*findProviders(e,r){r?.onProgress?.(new ft("bitswap:network:find-providers",e));for await(const n of this.routing.findProviders(e,r))await this.libp2p.isDialable(n.multiaddrs,{runOnLimitedConnection:this.runOnLimitedConnections})&&(yield n)}async findAndConnect(e,r){await vc(Vu(_6(this.findProviders(e,r),r?.maxProviders??fut),async n=>this.connectTo(n.id,r))).catch(n=>{this.log.error(n)})}async sendMessage(e,r,n){if(!this.running)throw new Error("network isn't running");const i=this.sendQueue.queue.find(s=>e.equals(s.options.peerId)&&s.status==="queued");if(i!=null){i.options.message=hut(i.options.message,r),await i.join({signal:n?.signal});return}await this.sendQueue.add(async s=>{const a=s?.message;if(a==null)throw new Ze("No message to send");this.log("sendMessage to %p",e),s?.onProgress?.(new ft("bitswap:network:send-wantlist",e));const o=await this.libp2p.dialProtocol(e,Dw,s);await o.closeRead();try{await Un(vut(a,this.maxOutgoingMessageSize),c=>xp(c),o),await o.close(s)}catch(c){s?.onProgress?.(new ft("bitswap:network:send-wantlist:error",{peer:e,error:c})),this.log.error("error sending message to %p",e,c),o.abort(c)}this._updateSentStats(a.blocks)},{peerId:e,signal:n?.signal,message:r})}async connectTo(e,r){if(!this.running)throw new cv("Network isn't running");r?.onProgress?.(new ft("bitswap:network:dial",e));const[n]=await Promise.all([this.libp2p.dial(e,r),xo(this.libp2p,"peer:identify",r?.signal,{filter:i=>{if(!i.detail.peerId.equals(e))return!1;if(i.detail.protocols.includes(Dw))return!0;throw new A8(`${e} did not support ${Dw}`)}})]);return n}_updateSentStats(e){let r=0;for(const n of e.values())r+=n.data.byteLength;this.metrics.dataSent?.increment(r),this.metrics.blocksSent?.increment(e.size)}};function zg(t,e){const r={[Symbol.iterator]:()=>r,next:()=>{const n=t.next(),i=n.value;return n.done===!0||i==null?{done:!0,value:void 0}:{done:!1,value:e(i)}}};return r}function GT(t){const e=Zn($n.decode(`z${t}`));return Aa(e)}class Ed{map;constructor(e){if(this.map=new Map,e!=null)for(const[r,n]of e.entries())this.map.set(r.toString(),{key:r,value:n})}[Symbol.iterator](){return this.entries()}clear(){this.map.clear()}delete(e){return this.map.delete(e.toString())}entries(){return zg(this.map.entries(),e=>[e[1].key,e[1].value])}forEach(e){this.map.forEach((r,n)=>{e(r.value,r.key,this)})}get(e){return this.map.get(e.toString())?.value}has(e){return this.map.has(e.toString())}set(e,r){this.map.set(e.toString(),{key:e,value:r})}keys(){return zg(this.map.values(),e=>e.key)}values(){return zg(this.map.values(),e=>e.value)}get size(){return this.map.size}}class fc{set;constructor(e){if(this.set=new Set,e!=null)for(const r of e)this.set.add(r.toString())}get size(){return this.set.size}[Symbol.iterator](){return this.values()}add(e){this.set.add(e.toString())}clear(){this.set.clear()}delete(e){this.set.delete(e.toString())}entries(){return zg(this.set.entries(),e=>{const r=GT(e[0]);return[r,r]})}forEach(e){this.set.forEach(r=>{const n=GT(r);e(n,n,this)})}has(e){return this.set.has(e.toString())}values(){return zg(this.set.values(),e=>GT(e))}intersection(e){const r=new fc;for(const n of e)this.has(n)&&r.add(n);return r}difference(e){const r=new fc;for(const n of this)e.has(n)||r.add(n);return r}union(e){const r=new fc;for(const n of e)r.add(n);for(const n of this)r.add(n);return r}}function xut(){return new fc}const wM={32:16777619n,64:1099511628211n,128:309485009821345068724781371n,256:374144419156711147060143317175368453031918731002211n,512:35835915874844867368919076489095108449946327955754392558399825615420669938882575126094039892345713852759n,1024:5016456510113118655434598811035278955030765345404790744303017523831112055108147451509157692220295382716162651878526895249385292291816524375083746691371804094271873160484737966720260389217684476157468082573n},rhe={32:2166136261n,64:14695981039346656037n,128:144066263297769815596495629667062367629n,256:100029257958052580907070968620625704837092796014241193945225284501741471925557n,512:9659303129496669498009435400716310466090418745672637896108374329434462657994582932197716438449813051892206539805784495328239340083876191928701583869517785n,1024:14197795064947621068722070641403218320880622795441933960878474914617582723252296732303717722150864096521202355549365628174669108571814760471015076148029755969804077320157692458563003215304957150157403644460363550505412711285966361610267868082893823963790439336411086884584107735010676915n},nhe=new globalThis.TextEncoder;function Sut(t,e){const r=wM[e];let n=rhe[e];for(let i=0;i<t.length;i++)n^=BigInt(t[i]),n=BigInt.asUintN(e,n*r);return n}function Eut(t,e,r){if(r.length===0)throw new Error("The `utf8Buffer` option must have a length greater than zero");const n=wM[e];let i=rhe[e],s=t;for(;s.length>0;){const a=nhe.encodeInto(s,r);s=s.slice(a.read);for(let o=0;o<a.written;o++)i^=BigInt(r[o]),i=BigInt.asUintN(e,i*n)}return i}function kut(t,{size:e=32,utf8Buffer:r}={}){if(!wM[e])throw new Error("The `size` option must be one of 32, 64, 128, 256, 512, or 1024");if(typeof t=="string"){if(r)return Eut(t,e,r);t=nhe.encode(t)}return Sut(t,e)}const _M={hash:t=>Number(kut(t,{size:32})),hashV:(t,e)=>Tut(_M.hash(t,e))};function Tut(t){let e=t.toString(16);return e.length%2===1&&(e=`0${e}`),tt(e,"base16")}const ihe=64;class sh{fp;h;seed;constructor(e,r,n,i=2){if(i>ihe)throw new TypeError("Invalid Fingerprint Size");const s=r.hashV(e,n),a=yr(i);for(let o=0;o<a.length;o++)a[o]=s[o];a.length===0&&(a[0]=7),this.fp=a,this.h=r,this.seed=n}hash(){return this.h.hash(this.fp,this.seed)}equals(e){return e?.fp instanceof Uint8Array?Tr(this.fp,e.fp):!1}}function E6(t,e){return Math.floor(Math.random()*(e-t))+t}class Mw{contents;constructor(e){this.contents=new Array(e).fill(null)}has(e){if(!(e instanceof sh))throw new TypeError("Invalid Fingerprint");return this.contents.some(r=>e.equals(r))}add(e){if(!(e instanceof sh))throw new TypeError("Invalid Fingerprint");for(let r=0;r<this.contents.length;r++)if(this.contents[r]==null)return this.contents[r]=e,!0;return!0}swap(e){if(!(e instanceof sh))throw new TypeError("Invalid Fingerprint");const r=E6(0,this.contents.length-1),n=this.contents[r];return this.contents[r]=e,n}remove(e){if(!(e instanceof sh))throw new TypeError("Invalid Fingerprint");const r=this.contents.findIndex(n=>e.equals(n));return r>-1?(this.contents[r]=null,!0):!1}}const Aut=500;class oY{bucketSize;filterSize;fingerprintSize;buckets;count;hash;seed;constructor(e){this.filterSize=e.filterSize,this.bucketSize=e.bucketSize??4,this.fingerprintSize=e.fingerprintSize??2,this.count=0,this.buckets=[],this.hash=e.hash??_M,this.seed=e.seed??E6(0,Math.pow(2,10))}add(e){typeof e=="string"&&(e=tt(e));const r=new sh(e,this.hash,this.seed,this.fingerprintSize),n=this.hash.hash(e,this.seed)%this.filterSize,i=(n^r.hash())%this.filterSize;if(this.buckets[n]==null&&(this.buckets[n]=new Mw(this.bucketSize)),this.buckets[i]==null&&(this.buckets[i]=new Mw(this.bucketSize)),this.buckets[n].add(r)||this.buckets[i].add(r))return this.count++,!0;const s=[n,i];let a=s[E6(0,s.length-1)];this.buckets[a]==null&&(this.buckets[a]=new Mw(this.bucketSize));for(let o=0;o<Aut;o++){const c=this.buckets[a].swap(r);if(c!=null&&(a=(a^c.hash())%this.filterSize,this.buckets[a]==null&&(this.buckets[a]=new Mw(this.bucketSize)),this.buckets[a].add(c)))return this.count++,!0}return!1}has(e){typeof e=="string"&&(e=tt(e));const r=new sh(e,this.hash,this.seed,this.fingerprintSize),n=this.hash.hash(e,this.seed)%this.filterSize,i=this.buckets[n]?.has(r)??!1;if(i)return i;const s=(n^r.hash())%this.filterSize;return this.buckets[s]?.has(r)??!1}remove(e){typeof e=="string"&&(e=tt(e));const r=new sh(e,this.hash,this.seed,this.fingerprintSize),n=this.hash.hash(e,this.seed)%this.filterSize,i=this.buckets[n]?.remove(r)??!1;if(i)return this.count--,i;const s=(n^r.hash())%this.filterSize,a=this.buckets[s]?.remove(r)??!1;return a&&this.count--,a}get reliable(){return Math.floor(100*(this.count/this.filterSize))<=90}}const Cut={1:.5,2:.84,4:.95,8:.98};function Iut(t=.001){return t>.002?2:t>1e-5?4:8}function Put(t,e=.001){const r=Iut(e),n=Cut[r],i=Math.round(t/n),s=Math.min(Math.ceil(Math.log2(1/e)+Math.log2(2*r)),ihe);return{filterSize:i,bucketSize:r,fingerprintSize:s}}class Rut{filterSize;bucketSize;fingerprintSize;scale;filterSeries;hash;seed;constructor(e){this.bucketSize=e.bucketSize??4,this.filterSize=e.filterSize??(1<<18)/this.bucketSize,this.fingerprintSize=e.fingerprintSize??2,this.scale=e.scale??2,this.hash=e.hash??_M,this.seed=e.seed??E6(0,Math.pow(2,10)),this.filterSeries=[new oY({filterSize:this.filterSize,bucketSize:this.bucketSize,fingerprintSize:this.fingerprintSize,hash:this.hash,seed:this.seed})]}add(e){if(typeof e=="string"&&(e=tt(e)),this.has(e))return!0;let r=this.filterSeries.find(n=>n.reliable);if(r==null){const n=this.filterSize*Math.pow(this.scale,this.filterSeries.length);r=new oY({filterSize:n,bucketSize:this.bucketSize,fingerprintSize:this.fingerprintSize,hash:this.hash,seed:this.seed}),this.filterSeries.push(r)}return r.add(e)}has(e){typeof e=="string"&&(e=tt(e));for(let r=0;r<this.filterSeries.length;r++)if(this.filterSeries[r].has(e))return!0;return!1}remove(e){typeof e=="string"&&(e=tt(e));for(let r=0;r<this.filterSeries.length;r++)if(this.filterSeries[r].remove(e))return!0;return!1}get count(){return this.filterSeries.reduce((e,r)=>e+r.count,0)}}function Jh(t,e=.001,r){return new Rut({...Put(t,e)})}class Out{filter;constructor(e,r){this.filter=Jh(e,r)}has(e){return this.filter.has(e.toMultihash().bytes)}add(e){this.filter.add(e.toMultihash().bytes)}remove(e){this.filter.remove?.(e.toMultihash().bytes)}}function But(t,e=.001){return new Out(t,e)}class Dut extends Ed{metric;constructor(e){super();const{name:r,metrics:n}=e;this.metric=n.registerMetric(r),this.updateComponentMetric()}set(e,r){return super.set(e,r),this.updateComponentMetric(),this}delete(e){const r=super.delete(e);return this.updateComponentMetric(),r}clear(){super.clear(),this.updateComponentMetric()}updateComponentMetric(){this.metric.update(this.size)}}function xM(t){const{name:e,metrics:r}=t;let n;return r!=null?n=new Dut({name:e,metrics:r}):n=new Ed,n}class gg{full;pendingBytes;wantlist;blocks;blockPresences;constructor(e=!1,r=0){this.full=e,this.wantlist=new Map,this.blocks=new Map,this.blockPresences=new Map,this.pendingBytes=0}addWantlistEntry(e,r){const n=ko.encode(e.multihash.bytes);this.wantlist.set(n,r)}addBlockPresence(e,r){const n=ko.encode(e.multihash.bytes);this.blockPresences.set(n,r)}addBlock(e,r){const n=ko.encode(e.multihash.bytes);this.blocks.set(n,r)}}function Mut(t){let e=new Uint8Array(t.reduce((n,i)=>n+vn(i),0)),r=0;for(const n of t)e=Ds(n,e,r),r+=vn(n);return e}function cY(t){return Mut([t.version,t.code,t.multihash.code,t.multihash.digest.byteLength])}class Nut{peerId;blockstore;network;wants;exchangeCount;bytesSent;bytesReceived;lastExchange;maxSizeReplaceHasWithBlock;log;constructor(e,r){this.peerId=e.peerId,this.blockstore=e.blockstore,this.network=e.network,this.wants=new Map,this.log=e.logger.forComponent(`helia:bitswap:ledger:${e.peerId}`),this.exchangeCount=0,this.bytesSent=0,this.bytesReceived=0,this.maxSizeReplaceHasWithBlock=r.maxSizeReplaceHasWithBlock??iut}sentBytes(e){this.exchangeCount++,this.lastExchange=new Date().getTime(),this.bytesSent+=e}receivedBytes(e){this.exchangeCount++,this.lastExchange=new Date().getTime(),this.bytesReceived+=e}debtRatio(){return this.bytesSent/(this.bytesReceived+1)}async sendBlocksToPeer(e){const r=new gg,n=new Set;for(const[i,s]of this.wants.entries())try{const a=await this.blockstore.get(s.cid,e);s.wantType===Wi.WantHave?a.byteLength<this.maxSizeReplaceHasWithBlock?(this.log("sending have and block for %c",s.cid),n.add(i),r.addBlock(s.cid,{data:a,prefix:cY(s.cid)})):(this.log("sending have for %c",s.cid),r.addBlockPresence(s.cid,{cid:s.cid.bytes,type:ul.HaveBlock})):(this.log("sending block for %c",s.cid),n.add(i),r.addBlock(s.cid,{data:a,prefix:cY(s.cid)}))}catch(a){if(a.name!=="NotFoundError")throw a;if(this.log("do not have block for %c",s.cid),!s.sendDontHave||s.sentDoNotHave===!0)continue;s.sentDoNotHave=!0,r.addBlockPresence(s.cid,{cid:s.cid.bytes,type:ul.DoNotHaveBlock})}if(r.blocks.size>0||r.blockPresences.size>0){this.log("sending message"),await this.network.sendMessage(this.peerId,r,e),this.log("sent message"),this.sentBytes([...r.blocks.values()].reduce((i,s)=>i+s.data.byteLength,0));for(const i of n)this.wants.delete(i)}}}class Fut{blockstore;network;ledgerMap;maxSizeReplaceHasWithBlock;log;logger;constructor(e,r={}){this.blockstore=e.blockstore,this.network=e.network,this.maxSizeReplaceHasWithBlock=r.maxSizeReplaceHasWithBlock,this.log=e.logger.forComponent("helia:bitswap:peer-want-lists"),this.logger=e.logger,this.ledgerMap=xM({name:"helia_bitswap_ledger_map",metrics:e.metrics}),this.network.addEventListener("bitswap:message",n=>{this.receiveMessage(n.detail.peer,n.detail.message).catch(i=>{this.log.error("error receiving bitswap message from %p",n.detail.peer,i)})}),this.network.addEventListener("peer:disconnected",n=>{this.peerDisconnected(n.detail)})}ledgerForPeer(e){const r=this.ledgerMap.get(e);if(r!=null)return{peer:r.peerId,value:r.debtRatio(),sent:r.bytesSent,received:r.bytesReceived,exchanged:r.exchangeCount}}wantListForPeer(e){const r=this.ledgerMap.get(e);if(r!=null)return[...r.wants.values()]}peers(){return Array.from(this.ledgerMap.values()).map(e=>e.peerId)}async receiveMessage(e,r){let n=this.ledgerMap.get(e);if(n==null&&(n=new Nut({peerId:e,blockstore:this.blockstore,network:this.network,logger:this.logger},{maxSizeReplaceHasWithBlock:this.maxSizeReplaceHasWithBlock}),this.ledgerMap.set(e,n)),n.receivedBytes(r.blocks?.reduce((i,s)=>i+s.data.byteLength,0)??0),r.wantlist!=null){r.wantlist.full===!0&&n.wants.clear();for(const i of r.wantlist.entries){const s=mt.decode(i.cid),a=nt(s.multihash.bytes,"base64");i.cancel===!0?(this.log("peer %p cancelled want of block for %c",e,s),n.wants.delete(a)):(i.wantType===Wi.WantHave?this.log("peer %p wanted block presence for %c",e,s):this.log("peer %p wanted block for %c",e,s),n.wants.set(a,{cid:s,priority:i.priority,wantType:i.wantType??Wi.WantBlock,sendDontHave:i.sendDontHave??!1}))}}this.log("send blocks to peer"),await n.sendBlocksToPeer()}async receivedBlock(e,r){const n=nt(e.multihash.bytes,"base64"),i=[];for(const s of this.ledgerMap.values())s.wants.has(n)&&i.push(s);await Promise.all(i.map(async s=>s.sendBlocksToPeer(r)))}peerDisconnected(e){this.ledgerMap.delete(e)}}function she(t){const e=[id.A];return t==null?e:Array.isArray(t)?t.length===0?e:t:[t]}const ahe=60;function ohe(t){return{Status:t.Status??0,TC:t.TC??t.flag_tc??!1,RD:t.RD??t.flag_rd??!1,RA:t.RA??t.flag_ra??!1,AD:t.AD??t.flag_ad??!1,CD:t.CD??t.flag_cd??!1,Question:(t.Question??t.questions??[]).map(e=>({name:e.name,type:id[e.type]})),Answer:(t.Answer??t.answers??[]).map(e=>({name:e.name,type:id[e.type],TTL:e.TTL??e.ttl??ahe,data:e.data instanceof Uint8Array?nt(e.data):e.data}))}}const Lut=4;function lY(t,e={}){const r=new Cu({concurrency:e.queryConcurrency??Lut});return async(n,i={})=>{const s=new URLSearchParams;s.set("name",n),she(i.types).forEach(o=>{s.append("type",id[o])}),i.onProgress?.(new ft("dns:query",{detail:n}));const a=await r.add(async()=>{const o=await fetch(`${t}?${s}`,{headers:{accept:"application/dns-json"},signal:i?.signal});if(o.status!==200)throw new Error(`Unexpected HTTP status: ${o.status} - ${o.statusText}`);const c=ohe(await o.json());return i.onProgress?.(new ft("dns:response",{detail:c})),c},{signal:i.signal});if(a==null)throw new Error("No DNS response received");return a}}function $ut(){return[lY("https://cloudflare-dns.com/dns-query"),lY("https://dns.google/resolve")]}var KT,uY;function Uut(){return uY||(uY=1,KT=function(t){if(!t)throw Error("hashlru must have a max value, of type number, greater than 0");var e=0,r=Object.create(null),n=Object.create(null);function i(s,a){r[s]=a,e++,e>=t&&(e=0,n=r,r=Object.create(null))}return{has:function(s){return r[s]!==void 0||n[s]!==void 0},remove:function(s){r[s]!==void 0&&(r[s]=void 0),n[s]!==void 0&&(n[s]=void 0)},get:function(s){var a=r[s];if(a!==void 0)return a;if((a=n[s])!==void 0)return i(s,a),a},set:function(s,a){r[s]!==void 0?r[s]=a:i(s,a)},clear:function(){r=Object.create(null),n=Object.create(null)}}}),KT}var jut=Uut();const Vut=In(jut);class qut{lru;constructor(e){this.lru=Vut(e)}get(e,r){let n=!0;const i=[];for(const s of r){const a=this.getAnswers(e,s);if(a.length===0){n=!1;break}i.push(...a)}if(n)return ohe({answers:i})}getAnswers(e,r){const n=`${e.toLowerCase()}-${r}`,i=this.lru.get(n);if(i!=null){const s=i.filter(a=>a.expires>Date.now()).map(({expires:a,value:o})=>({...o,TTL:Math.round((a-Date.now())/1e3),type:id[o.type]}));return s.length===0&&this.lru.remove(n),s}return[]}add(e,r){const n=`${e.toLowerCase()}-${r.type}`,i=this.lru.get(n)??[];i.push({expires:Date.now()+(r.TTL??ahe)*1e3,value:r}),this.lru.set(n,i)}remove(e,r){const n=`${e.toLowerCase()}-${r}`;this.lru.remove(n)}clear(){this.lru.clear()}}function zut(t){return new qut(t)}const Hut=1e3;let Wut=class{resolvers;cache;constructor(e){this.resolvers={},this.cache=zut(e.cacheSize??Hut),Object.entries(e.resolvers??{}).forEach(([r,n])=>{Array.isArray(n)||(n=[n]),r.endsWith(".")||(r=`${r}.`),this.resolvers[r]=n}),this.resolvers["."]==null&&(this.resolvers["."]=$ut())}async query(e,r={}){const n=she(r.types),i=r.cached!==!1?this.cache.get(e,n):void 0;if(i!=null)return r.onProgress?.(new ft("dns:cache",{detail:i})),i;const s=`${e.split(".").pop()}.`,a=(this.resolvers[s]??this.resolvers["."]).sort(()=>Math.random()>.5?-1:1),o=[];for(const c of a){if(r.signal?.aborted===!0)break;try{const u=await c(e,{...r,types:n});for(const l of u.Answer)this.cache.add(e,l);return u}catch(u){o.push(u),r.onProgress?.(new ft("dns:error",{detail:u}))}}throw o.length===1?o[0]:new AggregateError(o,`DNS lookup of ${e} ${n} failed`)}};var id;(function(t){t[t.A=1]="A",t[t.CNAME=5]="CNAME",t[t.TXT=16]="TXT",t[t.AAAA=28]="AAAA"})(id||(id={}));function che(t={}){return new Wut(t)}const Vl="/",lhe=new TextEncoder().encode(Vl),Nw=lhe[0];class Sn{_buf;constructor(e,r){if(typeof e=="string")this._buf=tt(e);else if(e instanceof Uint8Array)this._buf=e;else throw new Error("Invalid key, should be String of Uint8Array");if(r==null&&(r=!0),r&&this.clean(),this._buf.byteLength===0||this._buf[0]!==Nw)throw new Error("Invalid key")}toString(e="utf8"){return nt(this._buf,e)}uint8Array(){return this._buf}get[Symbol.toStringTag](){return`Key(${this.toString()})`}static withNamespaces(e){return new Sn(e.join(Vl))}static random(){return new Sn(Math.random().toString().substring(2))}static asKey(e){return e instanceof Uint8Array||typeof e=="string"?new Sn(e):typeof e.uint8Array=="function"?new Sn(e.uint8Array()):null}clean(){if((this._buf==null||this._buf.byteLength===0)&&(this._buf=lhe),this._buf[0]!==Nw){const e=new Uint8Array(this._buf.byteLength+1);e.fill(Nw,0,1),e.set(this._buf,1),this._buf=e}for(;this._buf.byteLength>1&&this._buf[this._buf.byteLength-1]===Nw;)this._buf=this._buf.subarray(0,-1)}less(e){const r=this.list(),n=e.list();for(let i=0;i<r.length;i++){if(n.length<i+1)return!1;const s=r[i],a=n[i];if(s<a)return!0;if(s>a)return!1}return r.length<n.length}reverse(){return Sn.withNamespaces(this.list().slice().reverse())}namespaces(){return this.list()}baseNamespace(){const e=this.namespaces();return e[e.length-1]}list(){return this.toString().split(Vl).slice(1)}type(){return Gut(this.baseNamespace())}name(){return Kut(this.baseNamespace())}instance(e){return new Sn(this.toString()+":"+e)}path(){let e=this.parent().toString();return e.endsWith(Vl)||(e+=Vl),e+=this.type(),new Sn(e)}parent(){const e=this.list();return e.length===1?new Sn(Vl):new Sn(e.slice(0,-1).join(Vl))}child(e){return this.toString()===Vl?e:e.toString()===Vl?this:new Sn(this.toString()+e.toString(),!1)}isAncestorOf(e){return e.toString()===this.toString()?!1:e.toString().startsWith(this.toString())}isDecendantOf(e){return e.toString()===this.toString()?!1:this.toString().startsWith(e.toString())}isTopLevel(){return this.list().length===1}concat(...e){return Sn.withNamespaces([...this.namespaces(),...Xut(e.map(r=>r.namespaces()))])}}function Gut(t){const e=t.split(":");return e.length<2?"":e.slice(0,-1).join(":")}function Kut(t){const e=t.split(":");return e[e.length-1]}function Xut(t){return[].concat(...t)}const uhe="/pin/",fY="/pinned-block/",cP=uh,dY=1;function Fw(t){return t.version===0&&(t=t.toV1()),new Sn(`${uhe}${t.toString(cP)}`)}class Yut{datastore;blockstore;getCodec;constructor(e,r,n){this.datastore=e,this.blockstore=r,this.getCodec=n}async*add(e,r={}){const n=Fw(e);if(await this.datastore.has(n))throw new Error("Already pinned");const i=Math.round(r.depth??1/0);if(i<0)throw new Error("Depth must be greater than or equal to 0");const s=new Zh({concurrency:dY});for await(const o of this.#e(e,s,{...r,depth:i}))await this.#t(o,c=>c.pinnedBy.find(u=>Tr(u,e.bytes))!=null?!1:(c.pinCount++,c.pinnedBy.push(e.bytes),!0),r),yield o;const a={depth:i,metadata:r.metadata??{}};await this.datastore.put(n,b3(a),r)}async*#e(e,r,n){if(n.depth===-1)return;const i=await this.getCodec(e.code),s=await this.blockstore.get(e,n),a=Rje({bytes:s,cid:e,codec:i});yield e;for await(const[,o]of a.links())yield*await r.add(async()=>this.#e(o,r,{...n,depth:n.depth-1}))}async#t(e,r,n){const i=new Sn(`${fY}${cP.encode(e.multihash.bytes)}`);let s={pinCount:0,pinnedBy:[]};try{s=Ef(await this.datastore.get(i,n))}catch(o){if(o.name!=="NotFoundError")throw o}if(r(s)){if(s.pinCount===0&&await this.datastore.has(i)){await this.datastore.delete(i);return}await this.datastore.put(i,b3(s),n),n.onProgress?.(new ft("helia:pin:add",e))}}async*rm(e,r={}){const n=Fw(e),i=await this.datastore.get(n,r),s=Ef(i);await this.datastore.delete(n,r);const a=new Zh({concurrency:dY});for await(const o of this.#e(e,a,{...r,depth:s.depth}))await this.#t(o,c=>(c.pinCount--,c.pinnedBy=c.pinnedBy.filter(u=>Tr(u,e.bytes)),!0),{...r,depth:s.depth}),yield o}async*ls(e={}){for await(const{key:r,value:n}of this.datastore.query({prefix:uhe+(e.cid!=null?`${e.cid.toString(uh)}`:"")},e)){const i=mt.parse(r.toString().substring(5),uh),s=Ef(n);yield{cid:i,...s}}}async isPinned(e,r={}){const n=new Sn(`${fY}${cP.encode(e.multihash.bytes)}`);return this.datastore.has(n,r)}async get(e,r){const n=Fw(e),i=await this.datastore.get(n,r);return Ef(i)}async setMetadata(e,r,n){const i=Fw(e),s=await this.datastore.get(i,n),a=Ef(s);a.metadata=r??{},await this.datastore.put(i,b3(a),n)}}const Zut=1,Jut=5;class Qut extends Error{static name="InsufficientProvidersError";constructor(e="Insufficient providers found"){super(e),this.name="InsufficientProvidersError"}}class Lw extends Error{static name="NoRoutersAvailableError";constructor(e="No routers available"){super(e),this.name="NoRoutersAvailableError"}}class eft extends Error{static name="UnknownHashAlgorithmError";constructor(e="Unknown hash algorithm"){super(e),this.name="UnknownHashAlgorithmError"}}class tft extends Error{static name="UnknownCodecError";constructor(e="Unknown codec"){super(e),this.name="UnknownCodecError"}}const rft=5;class nft{log;routers;providerLookupConcurrency;constructor(e,r){this.log=e.logger.forComponent("helia:routing"),this.routers=r.routers??[],this.providerLookupConcurrency=r.providerLookupConcurrency??rft,this.findProviders=e.metrics?.traceFunction("helia.routing.findProviders",this.findProviders.bind(this),{optionsIndex:1})??this.findProviders,this.provide=e.metrics?.traceFunction("helia.routing.provide",this.provide.bind(this),{optionsIndex:1})??this.provide,this.cancelReprovide=e.metrics?.traceFunction("helia.routing.cancelReprovide",this.cancelReprovide.bind(this),{optionsIndex:1})??this.cancelReprovide,this.put=e.metrics?.traceFunction("helia.routing.put",this.put.bind(this),{optionsIndex:2})??this.put,this.get=e.metrics?.traceFunction("helia.routing.get",this.get.bind(this),{optionsIndex:1})??this.get,this.findPeer=e.metrics?.traceFunction("helia.routing.findPeer",this.findPeer.bind(this),{optionsIndex:1})??this.findPeer,this.getClosestPeers=e.metrics?.traceFunction("helia.routing.getClosestPeers",this.getClosestPeers.bind(this),{optionsIndex:1})??this.getClosestPeers}async start(){await _u(...this.routers)}async stop(){await dd(...this.routers)}async*findProviders(e,r={}){if(this.routers.length===0)throw new Lw("No content routers available");const n=new nd({concurrency:this.providerLookupConcurrency});n.addEventListener("error",()=>{});for await(const i of Nf(n.toGenerator(),...Nd(this.routers,"findProviders").map(s=>s.findProviders(e,r))))if(i!=null){if(i.multiaddrs.length===0){if(n.find(i.id)!=null)continue;n.add(async()=>{try{const s=await this.findPeer(i.id,r);return s.multiaddrs.length===0?null:s}catch(s){return this.log.error("could not load multiaddrs for peer %p",i.id,s),null}},{peerId:i.id,signal:r.signal}).catch(s=>{this.log.error("could not load multiaddrs for peer %p",i.id,s)})}yield i}}async provide(e,r={}){if(this.routers.length===0)throw new Lw("No content routers available");await Promise.all(Nd(this.routers,"provide").map(async n=>{await n.provide(e,r)}))}async cancelReprovide(e,r={}){await Promise.all(Nd(this.routers,"cancelReprovide").map(async n=>{await n.cancelReprovide(e,r)}))}async put(e,r,n){await Promise.all(Nd(this.routers,"put").map(async i=>{await i.put(e,r,n)}))}async get(e,r){return Promise.any(Nd(this.routers,"get").map(async n=>n.get(e,r)))}async findPeer(e,r){if(this.routers.length===0)throw new Lw("No peer routers available");const n=this,i=Nf(...Nd(this.routers,"findPeer").map(s=>async function*(){try{yield await s.findPeer(e,r)}catch(a){n.log.error(a)}}()));for await(const s of i)if(s!=null)return s;throw new Bs("Could not find peer in routing")}async*getClosestPeers(e,r={}){if(this.routers.length===0)throw new Lw("No peer routers available");for await(const n of Nf(...Nd(this.routers,"getClosestPeers").map(i=>i.getClosestPeers(e,r))))n!=null&&(yield n)}}function Nd(t,e){return t.filter(r=>r[e]!=null)}const jf={},Qh=t=>{t.addEventListener("message",e=>{Qh.dispatchEvent("message",t,e)}),t.port!=null&&t.port.addEventListener("message",e=>{Qh.dispatchEvent("message",t,e)})};Qh.addEventListener=(t,e)=>{jf[t]==null&&(jf[t]=[]),jf[t].push(e)};Qh.removeEventListener=(t,e)=>{jf[t]!=null&&(jf[t]=jf[t].filter(r=>r===e))};Qh.dispatchEvent=function(t,e,r){jf[t]!=null&&jf[t].forEach(n=>n(e,r))};const hY="lock:worker:request-read",pY="lock:worker:release-read",mY="lock:master:grant-read",gY="lock:worker:request-write",vY="lock:worker:release-write",yY="lock:master:grant-write",ift=(t=21)=>Math.random().toString().substring(2),bY=(t,e,r,n,i)=>(s,a)=>{if(a.data.type!==r)return;const o={type:a.data.type,name:a.data.name,identifier:a.data.identifier};t.dispatchEvent(new MessageEvent(e,{data:{name:o.name,handler:async()=>{s.postMessage({type:i,name:o.name,identifier:o.identifier}),await new Promise(c=>{const u=l=>{if(l?.data==null)return;const f={type:l.data.type,name:l.data.name,identifier:l.data.identifier};f.type===n&&f.identifier===o.identifier&&(s.removeEventListener("message",u),c())};s.addEventListener("message",u)})}}}))},wY=(t,e,r,n)=>async()=>{const i=ift();return globalThis.postMessage({type:e,identifier:i,name:t}),new Promise(s=>{const a=o=>{if(o?.data==null)return;const c={type:o.data.type,identifier:o.data.identifier};c.type===r&&c.identifier===i&&(globalThis.removeEventListener("message",a),s(()=>{globalThis.postMessage({type:n,identifier:i,name:t})}))};globalThis.addEventListener("message",a)})},sft={singleProcess:!1},aft=t=>{if(t=Object.assign({},sft,t),!!globalThis.document||t.singleProcess){const r=new EventTarget;return Qh.addEventListener("message",bY(r,"requestReadLock",hY,pY,mY)),Qh.addEventListener("message",bY(r,"requestWriteLock",gY,vY,yY)),r}return{isWorker:!0,readLock:r=>wY(r,hY,mY,pY),writeLock:r=>wY(r,gY,yY,vY)}},Fd={};let kf;async function XT(t,e){let r;const n=new Promise(i=>{r=i});return t.add(async()=>jy((async()=>{await new Promise(i=>{r(()=>{i()})})})(),{milliseconds:e.timeout})),n}const oft=(t,e)=>{if(kf.isWorker===!0)return{readLock:kf.readLock(t,e),writeLock:kf.writeLock(t,e)};const r=new Cu({concurrency:1});let n;return{async readLock(){if(n!=null)return XT(n,e);n=new Cu({concurrency:e.concurrency,autoStart:!1});const i=n,s=XT(n,e);return r.add(async()=>{i.start(),await i.onIdle().then(()=>{n===i&&(n=null)})}),s},async writeLock(){return n=null,XT(r,e)}}},cft={name:"lock",concurrency:1/0,timeout:846e5,singleProcess:!1};function SM(t){const e=Object.assign({},cft,t);return kf==null&&(kf=aft(e),kf.isWorker!==!0&&(kf.addEventListener("requestReadLock",r=>{Fd[r.data.name]!=null&&Fd[r.data.name].readLock().then(async n=>r.data.handler().finally(()=>{n()}))}),kf.addEventListener("requestWriteLock",async r=>{Fd[r.data.name]!=null&&Fd[r.data.name].writeLock().then(async n=>r.data.handler().finally(()=>{n()}))}))),Fd[e.name]==null&&(Fd[e.name]=oft(e.name,e)),Fd[e.name]}class lft{lock;child;pins;started;constructor(e,r,n={}){this.child=e,this.pins=r,this.lock=SM({singleProcess:n.holdGcLock}),this.started=!1}isStarted(){return this.started}async start(){await _u(this.child),this.started=!0}async stop(){await dd(this.child),this.started=!1}unwrap(){return this.child}async put(e,r,n={}){n?.signal?.throwIfAborted();const i=await this.lock.readLock();try{return await this.child.put(e,r,n)}finally{i()}}async*putMany(e,r={}){r?.signal?.throwIfAborted();const n=await this.lock.readLock();try{yield*this.child.putMany(e,r)}finally{n()}}async get(e,r={}){r?.signal?.throwIfAborted();const n=await this.lock.readLock();try{return await this.child.get(e,r)}finally{n()}}async*getMany(e,r={}){r?.signal?.throwIfAborted();const n=await this.lock.readLock();try{yield*this.child.getMany(e,r)}finally{n()}}async delete(e,r={}){r?.signal?.throwIfAborted();const n=await this.lock.writeLock();try{if(await this.pins.isPinned(e))throw new Error("CID was pinned");await this.child.delete(e,r)}finally{n()}}async*deleteMany(e,r={}){r?.signal?.throwIfAborted();const n=await this.lock.writeLock();try{const i=this;yield*this.child.deleteMany(async function*(){for await(const s of e){if(await i.pins.isPinned(s))throw new Error("CID was pinned");yield s}}(),r)}finally{n()}}async has(e,r={}){r?.signal?.throwIfAborted();const n=await this.lock.readLock();try{return await this.child.has(e,r)}finally{n()}}async*getAll(e={}){e?.signal?.throwIfAborted();const r=await this.lock.readLock();try{yield*this.child.getAll(e)}finally{r()}}createSession(e,r){return r?.signal?.throwIfAborted(),this.child.createSession(e,r)}}const YT=new Sn("/version"),_Y=1;async function uft(t){if(!await t.has(YT)){await t.put(YT,tt(`${_Y}`));return}const e=await t.get(YT),r=nt(e);if(parseInt(r,10)!==_Y)throw new Error("Unknown datastore version, a datastore migration may be required")}function EM(t){return t?.then!=null}function fft(t=[],e){const r={[Cl]:r2,[Ro]:toe,[dB]:T0,[ND]:hnt,[CB]:Q$e};return t.forEach(n=>{r[n.code]=n}),async n=>{let i=r[n];if(i==null&&e!=null){const s=e(n);EM(s)?i=await s:i=s,r[i.code]=i}if(i!=null)return i;throw new tft(`Could not load codec for ${n}`)}}function dft(t=[],e){const r={[ci.code]:ci,[Rq.code]:Rq,[Kf.code]:Kf};return t.forEach(n=>{r[n.code]=n}),async n=>{let i=r[n];if(i==null&&e!=null){const s=e(n);EM(s)?i=await s:i=s,r[i.code]=i}if(i!=null)return i;throw new eft(`No hasher configured for multihash code 0x${n.toString(16)}, please configure one. You can look up which hash this is at https://github.com/multiformats/multicodec/blob/master/table.csv`)}}class ey extends Error{static name="OpenFailedError";static code="ERR_OPEN_FAILED";name=ey.name;code=ey.code;constructor(e="Open failed"){super(e)}}class Cf extends Error{static name="PutFailedError";static code="ERR_PUT_FAILED";name=Cf.name;code=Cf.code;constructor(e="Put failed"){super(e)}}class ty extends Error{static name="GetFailedError";static code="ERR_GET_FAILED";name=ty.name;code=ty.code;constructor(e="Get failed"){super(e)}}class k6 extends Error{static name="DeleteFailedError";static code="ERR_DELETE_FAILED";name=k6.name;code=k6.code;constructor(e="Delete failed"){super(e)}}class sd extends Error{static name="NotFoundError";static code="ERR_NOT_FOUND";name=sd.name;code=sd.code;constructor(e="Not Found"){super(e)}}class kM{has(e,r){return Promise.reject(new Error(".has is not implemented"))}put(e,r,n){return Promise.reject(new Error(".put is not implemented"))}async*putMany(e,r){for await(const{cid:n,block:i}of e)await this.put(n,i,r),yield n}get(e,r){return Promise.reject(new Error(".get is not implemented"))}async*getMany(e,r){for await(const n of e)yield{cid:n,block:await this.get(n,r)}}delete(e,r){return Promise.reject(new Error(".delete is not implemented"))}async*deleteMany(e,r){for await(const n of e)await this.delete(n,r),yield n}async*getAll(e){throw new Error(".getAll is not implemented")}}const $w=0;class hft extends kM{child;constructor(e){super(),this.child=e}put(e,r){return e.multihash.code===$w||this.child==null?e:this.child.put(e,r)}get(e){if(e.multihash.code===$w)return e.multihash.digest;if(this.child==null)throw new sd;return this.child.get(e)}has(e){return e.multihash.code===$w?!0:this.child==null?!1:this.child.has(e)}delete(e){if(e.code!==$w&&this.child!=null)return this.child.delete(e)}getAll(e){return this.child!=null?this.child.getAll(e):[]}}function pft(t){return t[Symbol.asyncIterator]!=null}function xY(t){return t?.then!=null}function T6(t,e){let r=0;if(pft(t))return async function*(){for await(const c of t){const u=e(c,r++);xY(u)&&await u,yield c}}();const n=UD(t),{value:i,done:s}=n.next();if(s===!0)return function*(){}();if(typeof e(i,r++)?.then=="function")return async function*(){yield i;for await(const c of n){const u=e(c,r++);xY(u)&&await u,yield c}}();const o=e;return function*(){yield i;for(const c of n)o(c,r++),yield c}()}class fhe{child;getHasher;log;logger;components;constructor(e){this.log=e.logger.forComponent("helia:networked-storage"),this.logger=e.logger,this.components=e,this.child=new hft(e.blockstore),this.getHasher=e.getHasher}async put(e,r,n={}){return await this.child.has(e,n)?(n.onProgress?.(new ft("blocks:put:duplicate",e)),e):(n.onProgress?.(new ft("blocks:put:providers:notify",e)),await Promise.all(this.components.blockBrokers.map(async i=>i.announce?.(e,r,n))),n.onProgress?.(new ft("blocks:put:blockstore:put",e)),this.child.put(e,r,n))}async*putMany(e,r={}){const n=Qc(e,async({cid:s})=>{const a=await this.child.has(s,r);return a&&r.onProgress?.(new ft("blocks:put-many:duplicate",s)),!a}),i=T6(n,async({cid:s,block:a})=>{r.onProgress?.(new ft("blocks:put-many:providers:notify",s)),await Promise.all(this.components.blockBrokers.map(async o=>o.announce?.(s,a,r)))});r.onProgress?.(new ft("blocks:put-many:blockstore:put-many")),yield*this.child.putMany(i,r)}async get(e,r={}){if(r.offline!==!0&&!await this.child.has(e,r)){const n=await this.getHasher(e.multihash.code);r.onProgress?.(new ft("blocks:get:providers:get",e));const i=await SY(e,this.components.blockBrokers,n,{...r,log:this.log});return r.onProgress?.(new ft("blocks:get:blockstore:put",e)),await this.child.put(e,i,r),r.onProgress?.(new ft("blocks:get:providers:notify",e)),await Promise.all(this.components.blockBrokers.map(async s=>s.announce?.(e,i,r))),i}return r.onProgress?.(new ft("blocks:get:blockstore:get",e)),this.child.get(e,r)}async*getMany(e,r={}){r.onProgress?.(new ft("blocks:get-many:blockstore:get-many")),yield*this.child.getMany(T6(e,async n=>{if(r.offline!==!0&&!await this.child.has(n,r)){const i=await this.getHasher(n.multihash.code);r.onProgress?.(new ft("blocks:get-many:providers:get",n));const s=await SY(n,this.components.blockBrokers,i,{...r,log:this.log});r.onProgress?.(new ft("blocks:get-many:blockstore:put",n)),await this.child.put(n,s,r),r.onProgress?.(new ft("blocks:get-many:providers:notify",n)),await Promise.all(this.components.blockBrokers.map(async a=>a.announce?.(n,s,r)))}}))}async delete(e,r={}){r.onProgress?.(new ft("blocks:delete:blockstore:delete",e)),await this.child.delete(e,r)}async*deleteMany(e,r={}){r.onProgress?.(new ft("blocks:delete-many:blockstore:delete-many")),yield*this.child.deleteMany(async function*(){for await(const n of e)yield n}(),r)}async has(e,r={}){return this.child.has(e,r)}async*getAll(e={}){e.onProgress?.(new ft("blocks:get-all:blockstore:get-many")),yield*this.child.getAll(e)}}class mft extends fhe{started;constructor(e){super(e),this.started=!1}isStarted(){return this.started}async start(){await _u(this.child,...this.components.blockBrokers),this.started=!0}async stop(){await dd(this.child,...this.components.blockBrokers),this.started=!1}unwrap(){return this.child}createSession(e,r){const n=this.components.blockBrokers.map(i=>i.createSession==null?i:i.createSession(r));return new gft({blockstore:this.child,blockBrokers:n,getHasher:this.getHasher,logger:this.logger},{root:e})}}class gft extends fhe{closeController;constructor(e,r){super(e),this.closeController=new AbortController,this.closeController.signal,this.log=e.logger.forComponent(`helia:session-storage:${r.root}`)}close(){this.closeController.abort()}async put(e,r,n={}){const i=Pr([this.closeController.signal,n.signal]);try{return await super.put(e,r,{...n,signal:i})}finally{i.clear()}}async*putMany(e,r={}){const n=Pr([this.closeController.signal,r.signal]);try{yield*super.putMany(e,{...r,signal:n})}finally{n.clear()}}async get(e,r={}){const n=Pr([this.closeController.signal,r.signal]);try{return await super.get(e,{...r,signal:n})}finally{n.clear()}}async*getMany(e,r={}){const n=Pr([this.closeController.signal,r.signal]);try{yield*super.getMany(e,{...r,signal:n})}finally{n.clear()}}async delete(e,r={}){const n=Pr([this.closeController.signal,r.signal]);try{await super.delete(e,{...r,signal:n})}finally{n.clear()}}async*deleteMany(e,r={}){const n=Pr([this.closeController.signal,r.signal]);try{yield*super.deleteMany(e,{...r,signal:n})}finally{n.clear()}}async has(e,r={}){const n=Pr([this.closeController.signal,r.signal]);try{return await super.has(e,{...r,signal:n})}finally{n.clear()}}async*getAll(e={}){const r=Pr([this.closeController.signal,e.signal]);try{yield*super.getAll({...e,signal:r})}finally{r.clear()}}}function vft(t){return typeof t.retrieve=="function"}const yft=(t,e)=>{if(e==null)throw new Ze(`No hasher configured for multihash code 0x${t.multihash.code.toString(16)}, please configure one. You can look up which hash this is at https://github.com/multiformats/multicodec/blob/master/table.csv`);return async r=>{let n;const i=e.digest(r);if(EM(i)?n=await i:n=i,!Tr(n.digest,t.multihash.digest))throw new JR("Hash of downloaded block did not match multihash from passed CID")}};async function SY(t,e,r,n){const i=yft(t,r),s=new AbortController,a=Pr([s.signal,n.signal]);s.signal;const o=[];for(const c of e)vft(c)&&o.push(c);try{return await Promise.any(o.map(async c=>{try{let u=!1;const l=await c.retrieve(t,{...n,signal:a,validateFn:async f=>{await i(f),u=!0}});return u||await i(l),l}catch(u){throw n.log.error("could not retrieve verified block for %c",t,u),u}}))}finally{s.abort(),a.clear()}}class dhe extends oi{initialPeerSearchComplete;requests;name;log;logger;minProviders;maxProviders;providers;evictionFilter;constructor(e,r){super(),this.name=r.name,this.logger=e.logger,this.log=e.logger.forComponent(this.name),this.requests=new Map,this.minProviders=r.minProviders??Zut,this.maxProviders=r.maxProviders??Jut,this.providers=[],this.evictionFilter=Jh(this.maxProviders)}async retrieve(e,r={}){const n=ko.encode(e.multihash.bytes),i=this.requests.get(n);if(i!=null)return this.log("join existing request for %c",e),i;const s=sr();if(this.requests.set(n,s.promise),this.providers.length===0){let u=!1;this.initialPeerSearchComplete==null&&(u=!0,this.log=this.logger.forComponent(`${this.name}:${e}`),this.initialPeerSearchComplete=this.findProviders(e,this.minProviders,r)),await this.initialPeerSearchComplete,u&&this.log("found initial session peers for %c",e)}let a=!1;const o=new Zh({concurrency:this.maxProviders});o.addEventListener("error",()=>{}),o.addEventListener("failure",u=>{this.log.error("error querying provider %o, evicting from session",u.detail.job.options.provider,u.detail.error),this.evict(u.detail.job.options.provider)}),o.addEventListener("success",u=>{a=!0,s.resolve(u.detail.result)}),o.addEventListener("idle",()=>{a||r.signal?.aborted===!0||Promise.resolve().then(async()=>{this.log("no session peers had block for for %c, finding new providers",e);for(let u=0;u<this.minProviders&&this.providers.length!==0;u++){const l=this.providers[Math.floor(Math.random()*this.providers.length)];this.evict(l)}await this.findProviders(e,this.minProviders,r),this.log("found new providers re-retrieving %c",e),this.requests.delete(n),s.resolve(await this.retrieve(e,r))}).catch(u=>{this.log.error("could not find new providers for %c",e,u),s.reject(u)})});const c=u=>{o.add(async()=>this.queryProvider(e,u.detail,r),{provider:u.detail}).catch(l=>{r.signal?.aborted!==!0&&this.log.error("error retrieving session block for %c",e,l)})};this.addEventListener("provider",c),Promise.all([...this.providers].map(async u=>o.add(async()=>this.queryProvider(e,u,r),{provider:u}))).catch(u=>{r.signal?.aborted!==!0&&this.log.error("error retrieving session block for %c",e,u)});try{return await s.promise}finally{this.removeEventListener("provider",c),o.clear(),this.requests.delete(n)}}evict(e){this.evictionFilter.add(this.toEvictionKey(e));const r=this.providers.findIndex(n=>this.equals(n,e));r!==-1&&this.providers.splice(r,1)}isEvicted(e){return this.evictionFilter.has(this.toEvictionKey(e))}hasProvider(e){return!!(this.providers.find(r=>this.equals(r,e))!=null||this.isEvicted(e))}async findProviders(e,r,n){const i=sr();let s=0;return Promise.resolve().then(async()=>{this.log("finding %d-%d new provider(s) for %c",r,this.maxProviders,e);for await(const a of this.findNewProviders(e,n)){if(s===this.maxProviders||n.signal?.aborted===!0)break;if(!this.hasProvider(a)&&(this.log("found %d/%d new providers",s,this.maxProviders),this.providers.push(a),this.safeDispatchEvent("provider",{detail:a}),s++,s===r&&(this.log("session is ready"),i.resolve()),this.providers.length===this.maxProviders)){this.log("found max session peers",s);break}}if(this.log("found %d/%d new session peers",s,this.maxProviders),s<r)throw new Qut(`Found ${s} of ${r} ${this.name} providers for ${e}`)}).catch(a=>{this.log.error("error searching routing for potential session peers for %c",e,a.errors??a),i.reject(a)}),i.promise}}class bft{blockstore;datastore;pins;logger;routing;getCodec;getHasher;dns;metrics;log;constructor(e){this.logger=e.logger??q5(),this.log=this.logger.forComponent("helia"),this.getHasher=dft(e.hashers,e.loadHasher),this.getCodec=fft(e.codecs,e.loadCodec),this.dns=e.dns??che(),this.metrics=e.metrics;const r={blockstore:e.blockstore,datastore:e.datastore,logger:this.logger,blockBrokers:[],getHasher:this.getHasher,getCodec:this.getCodec,dns:this.dns,metrics:this.metrics,...e.components??{}};this.routing=r.routing=new nft(r,{routers:(e.routers??[]).flatMap(i=>{const s=[i];return i[K1]!=null&&s.push(i[K1]),i[X1]!=null&&s.push(i[X1]),s}),providerLookupConcurrency:e.providerLookupConcurrency});const n=new mft(r);this.pins=new Yut(e.datastore,n,this.getCodec),this.blockstore=new lft(n,this.pins,{holdGcLock:e.holdGcLock??!0}),this.datastore=e.datastore,r.blockBrokers=e.blockBrokers.map(i=>i(r))}async start(){await uft(this.datastore),await _u(this.blockstore,this.datastore,this.routing)}async stop(){await dd(this.blockstore,this.datastore,this.routing)}async gc(e={}){const r=await this.blockstore.lock.writeLock();try{const n=this,i=this.blockstore.unwrap();this.log("gc start"),await vc(i.deleteMany(async function*(){for await(const{cid:s}of i.getAll())try{if(await n.pins.isPinned(s,e))continue;yield s,e.onProgress?.(new ft("helia:gc:deleted",s))}catch(a){n.log.error("Error during gc",a),e.onProgress?.(new ft("helia:gc:error",a))}}()))}finally{r()}this.log("gc finished")}}class wft extends dhe{wantList;network;constructor(e,r){super(e,{...r,name:"helia:bitswap:session"}),this.wantList=e.wantList,this.network=e.network}async queryProvider(e,r,n){this.log("sending WANT-BLOCK for %c to %p",e,r);const i=await this.wantList.wantSessionBlock(e,r,n);if(this.log("%p %s %c",r,i.has?"has":"does not have",e),i.has&&i.block!=null)return i.block;throw new Error("Provider did not have block")}async*findNewProviders(e,r={}){for await(const n of this.network.findProviders(e,r))yield n.id}toEvictionKey(e){return e.toMultihash().bytes}equals(e,r){return e.equals(r)}}function _ft(t,e){return new wft(t,e)}class xft{blocksReceived;duplicateBlocksReceived;dataReceived;duplicateDataReceived;constructor(e){this.blocksReceived=e.metrics?.registerMetricGroup("helia_bitswap_received_blocks"),this.duplicateBlocksReceived=e.metrics?.registerMetricGroup("helia_bitswap_duplicate_received_blocks"),this.dataReceived=e.metrics?.registerMetricGroup("helia_bitswap_data_received_bytes"),this.duplicateDataReceived=e.metrics?.registerMetricGroup("helia_bitswap_duplicate_data_received_bytes")}updateBlocksReceived(e=1,r){const n={global:e};r!=null&&(n[r.toString()]=e),this.blocksReceived?.increment(n)}updateDuplicateBlocksReceived(e=1,r){const n={global:e};r!=null&&(n[r.toString()]=e),this.duplicateBlocksReceived?.increment(n)}updateDataReceived(e,r){const n={global:e};r!=null&&(n[r.toString()]=e),this.dataReceived?.increment(n)}updateDuplicateDataReceived(e,r){const n={global:e};r!=null&&(n[r.toString()]=e),this.duplicateDataReceived?.increment(n)}}class Sft extends Map{metric;constructor(e){super();const{name:r,metrics:n}=e;this.metric=n.registerMetric(r),this.updateComponentMetric()}set(e,r){return super.set(e,r),this.updateComponentMetric(),this}delete(e){const r=super.delete(e);return this.updateComponentMetric(),r}clear(){super.clear(),this.updateComponentMetric()}updateComponentMetric(){this.metric.update(this.size)}}function hhe(t){const{name:e,metrics:r}=t;let n;return r!=null?n=new Sft({name:e,metrics:r}):n=new Map,n}function Eft(t){if(!(t instanceof Uint8Array))throw new Error("arg needs to be a Uint8Array");const e=[];for(;t.length>0;){const r=kl(t);e.push(r),t=t.slice(vn(r))}return e}class kft extends oi{peers;wants;network;log;sendMessagesDelay;sendMessagesTimeout;hashLoader;sendingMessages;constructor(e,r={}){super(),this.peers=xM({name:"helia_bitswap_peers",metrics:e.metrics}),this.wants=hhe({name:"helia_bitswap_wantlist",metrics:e.metrics}),this.network=e.network,this.sendMessagesDelay=r.sendMessagesDelay??cut,this.log=e.logger.forComponent("helia:bitswap:wantlist"),this.hashLoader=r.hashLoader,this.network.addEventListener("bitswap:message",n=>{this.receiveMessage(n.detail.peer,n.detail.message).catch(i=>{this.log.error("error receiving bitswap message from %p",n.detail.peer,i)})}),this.network.addEventListener("peer:connected",n=>{this.peerConnected(n.detail).catch(i=>{this.log.error("error processing newly connected bitswap peer %p",n.detail,i)})}),this.network.addEventListener("peer:disconnected",n=>{this.peerDisconnected(n.detail)})}async addEntry(e,r){const n=nt(e.multihash.bytes,"base64");let i=this.wants.get(n);i==null&&(i={cid:e,priority:r.priority??1,wantType:r.wantType??Wi.WantBlock,cancel:!1,sendDontHave:!0},this.wants.set(n,i)),i.wantType===Wi.WantHave&&r.wantType===Wi.WantBlock&&(i.wantType=Wi.WantBlock),await this.sendMessagesDebounced();try{return r.wantType===Wi.WantBlock?(await xo(this,"block",r?.signal,{filter:o=>Tr(e.multihash.digest,o.detail.cid.multihash.digest),errorMessage:"Want was aborted"})).detail:(await xo(this,"presence",r?.signal,{filter:a=>Tr(e.multihash.digest,a.detail.cid.multihash.digest),errorMessage:"Want was aborted"})).detail}finally{r.signal?.aborted===!0&&(this.log("want for %c was aborted, cancelling want",e),i.cancel=!0,await this.sendMessagesDebounced())}}async sendMessagesDebounced(){await this.sendingMessages?.promise,clearTimeout(this.sendMessagesTimeout),this.sendMessagesTimeout=setTimeout(()=>{this.sendMessages().catch(e=>{this.log("error sending messages to peers",e)})},this.sendMessagesDelay)}async sendMessages(){this.sendingMessages=sr(),await Promise.all([...this.peers.entries()].map(async([e,r])=>{const n=new Set,i=new gg;for(const[s,a]of this.wants.entries())r.has(s)||a.cancel||(n.add(s),i.addWantlistEntry(a.cid,{cid:a.cid.bytes,priority:a.priority,wantType:a.wantType,cancel:a.cancel,sendDontHave:a.sendDontHave}));if(i.wantlist.size!==0)try{await this.network.sendMessage(e,i);for(const s of n)r.add(s)}catch(s){this.log.error("error sending full wantlist to new peer",s)}})).catch(e=>{this.log.error("error sending messages",e)});for(const[e,r]of this.wants)if(r.cancel){this.wants.delete(e);for(const n of this.peers.values())n.delete(e)}this.sendingMessages.resolve()}has(e){const r=nt(e.multihash.bytes,"base64");return this.wants.has(r)}async wantSessionPresence(e,r,n={}){const i=new gg;return i.addWantlistEntry(e,{cid:e.bytes,sendDontHave:!0,wantType:Wi.WantHave,priority:1}),await this.network.sendMessage(r,i),(await xo(this,"presence",n.signal,{filter:a=>r.equals(a.detail.sender)&&Tr(e.multihash.digest,a.detail.cid.multihash.digest)})).detail}async wantBlock(e,r={}){return this.addEntry(e,{...r,wantType:Wi.WantBlock})}async wantSessionBlock(e,r,n={}){const i=new gg;return i.addWantlistEntry(e,{cid:e.bytes,sendDontHave:!0,wantType:Wi.WantBlock,priority:1}),await this.network.sendMessage(r,i),(await xo(this,"presence",n.signal,{filter:a=>r.equals(a.detail.sender)&&Tr(e.multihash.digest,a.detail.cid.multihash.digest)})).detail}async receivedBlock(e,r){const n=nt(e.multihash.bytes,"base64"),i=this.wants.get(n);i!=null&&(i.cancel=!0,await this.sendMessagesDebounced())}async receiveMessage(e,r){this.log("received message from %p with %d blocks",e,r.blocks.length);let n=!1;for(const i of r.blocks){if(i.prefix==null||i.data==null)continue;const s=Eft(i.prefix),a=s[0],o=s[1],c=s[2],u=c===ci.code?ci:await this.hashLoader?.getHasher(c);if(u==null){this.log.error("unknown hash algorithm",c);continue}let l=u.digest(i.data);l.then!=null&&(l=await l);const f=mt.create(a===0?0:1,o,l);this.log("received block from %p for %c",e,f),this.safeDispatchEvent("block",{detail:{sender:e,cid:f,block:i.data}}),this.safeDispatchEvent("presence",{detail:{sender:e,cid:f,has:!0,block:i.data}});const d=nt(f.multihash.bytes,"base64"),h=this.wants.get(d);h!=null&&(h.cancel=!0,n=!0)}for(const{cid:i,type:s}of r.blockPresences){const a=mt.decode(i);this.log("received %s from %p for %c",s,e,a),this.safeDispatchEvent("presence",{detail:{sender:e,cid:a,has:s===ul.HaveBlock}})}n&&await this.sendMessagesDebounced()}async peerConnected(e){const r=new Set,n=new gg(!0);for(const[i,s]of this.wants.entries())s.cancel||(r.add(i),n.addWantlistEntry(s.cid,{cid:s.cid.bytes,priority:1,wantType:Wi.WantBlock,cancel:!1,sendDontHave:!1}));if(n.wantlist.size===0){this.peers.set(e,r);return}try{await this.network.sendMessage(e,n),this.peers.set(e,r)}catch(i){this.log.error("error sending full wantlist to new peer %p",e,i)}}peerDisconnected(e){this.peers.delete(e)}start(){}stop(){this.peers.clear(),clearTimeout(this.sendMessagesTimeout)}}class Tft{log;logger;stats;network;blockstore;peerWantLists;wantList;constructor(e,r={}){this.logger=e.logger,this.log=e.logger.forComponent("helia:bitswap"),this.blockstore=e.blockstore,this.stats=new xft(e),this.network=new _ut(e,r),this.peerWantLists=new Fut({...e,network:this.network},r),this.wantList=new kft({...e,network:this.network},r)}createSession(e={}){return _ft({wantList:this.wantList,network:this.network,logger:this.logger},e)}async want(e,r={}){const n=new AbortController,i=Pr([n.signal,r.signal]);n.signal,this.network.findAndConnect(e,{...r,signal:i}).catch(s=>{n.signal.aborted||this.log.error("error during finding and connect for cid %c",e,s)});try{return(await this.wantList.wantBlock(e,{...r,signal:i})).block}finally{n.abort(),i.clear()}}async notify(e,r,n={}){await Promise.all([this.peerWantLists.receivedBlock(e,n),this.wantList.receivedBlock(e,n)])}getWantlist(){return[...this.wantList.wants.values()].filter(e=>!e.cancel).map(e=>({cid:e.cid,priority:e.priority,wantType:e.wantType}))}getPeerWantlist(e){return this.peerWantLists.wantListForPeer(e)}async start(){this.wantList.start(),await this.network.start()}async stop(){this.wantList.stop(),await this.network.stop()}}const Aft=(t,e={})=>new Tft(t,e);class Cft{bitswap;started;constructor(e,r={}){const{getHasher:n}=e;this.bitswap=Aft(e,{hashLoader:{getHasher:async i=>n(i)},...r}),this.started=!1}isStarted(){return this.started}async start(){await this.bitswap.start(),this.started=!0}async stop(){await this.bitswap.stop(),this.started=!1}async announce(e,r,n){await this.bitswap.notify(e,r,n)}async retrieve(e,r={}){return this.bitswap.want(e,r)}createSession(e){const r=this.bitswap.createSession(e);return{announce:async(n,i,s)=>{await this.bitswap.notify(n,i,s)},retrieve:async(n,i)=>r.retrieve(n,i)}}}function phe(t={}){return e=>new Cft(e,t)}var r1={},EY;function Ift(){return EY||(EY=1,function(){var t,e,r,n,i,s,a,o;o=function(c){var u,l,f,d;return u=(c&255<<24)>>>24,l=(c&255<<16)>>>16,f=(c&65280)>>>8,d=c&255,[u,l,f,d].join(".")},a=function(c){var u,l,f,d,h,m;for(u=[],f=d=0;d<=3&&c.length!==0;f=++d){if(f>0){if(c[0]!==".")throw new Error("Invalid IP");c=c.substring(1)}m=e(c),h=m[0],l=m[1],c=c.substring(l),u.push(h)}if(c.length!==0)throw new Error("Invalid IP");switch(u.length){case 1:if(u[0]>4294967295)throw new Error("Invalid IP");return u[0]>>>0;case 2:if(u[0]>255||u[1]>16777215)throw new Error("Invalid IP");return(u[0]<<24|u[1])>>>0;case 3:if(u[0]>255||u[1]>255||u[2]>65535)throw new Error("Invalid IP");return(u[0]<<24|u[1]<<16|u[2])>>>0;case 4:if(u[0]>255||u[1]>255||u[2]>255||u[3]>255)throw new Error("Invalid IP");return(u[0]<<24|u[1]<<16|u[2]<<8|u[3])>>>0;default:throw new Error("Invalid IP")}},r=function(c){return c.charCodeAt(0)},n=r("0"),s=r("a"),i=r("A"),e=function(c){var u,l,f,d,h;for(d=0,u=10,l="9",f=0,c.length>1&&c[f]==="0"&&(c[f+1]==="x"||c[f+1]==="X"?(f+=2,u=16):"0"<=c[f+1]&&c[f+1]<="9"&&(f++,u=8,l="7")),h=f;f<c.length;){if("0"<=c[f]&&c[f]<=l)d=d*u+(r(c[f])-n)>>>0;else if(u===16)if("a"<=c[f]&&c[f]<="f")d=d*u+(10+r(c[f])-s)>>>0;else if("A"<=c[f]&&c[f]<="F")d=d*u+(10+r(c[f])-i)>>>0;else break;else break;if(d>4294967295)throw new Error("too large");f++}if(f===h)throw new Error("empty octet");return[d,f]},t=function(){function c(u,l){var f,d,h;if(typeof u!="string")throw new Error("Missing `net' parameter");if(l||(h=u.split("/",2),u=h[0],l=h[1]),l||(l=32),typeof l=="string"&&l.indexOf(".")>-1){try{this.maskLong=a(l)}catch{throw new Error("Invalid mask: "+l)}for(f=d=32;d>=0;f=--d)if(this.maskLong===4294967295<<32-f>>>0){this.bitmask=f;break}}else if(l||l===0)this.bitmask=parseInt(l,10),this.maskLong=0,this.bitmask>0&&(this.maskLong=4294967295<<32-this.bitmask>>>0);else throw new Error("Invalid mask: empty");try{this.netLong=(a(u)&this.maskLong)>>>0}catch{throw new Error("Invalid net address: "+u)}if(!(this.bitmask<=32))throw new Error("Invalid mask for ip4: "+l);this.size=Math.pow(2,32-this.bitmask),this.base=o(this.netLong),this.mask=o(this.maskLong),this.hostmask=o(~this.maskLong),this.first=this.bitmask<=30?o(this.netLong+1):this.base,this.last=this.bitmask<=30?o(this.netLong+this.size-2):o(this.netLong+this.size-1),this.broadcast=this.bitmask<=30?o(this.netLong+this.size-1):void 0}return c.prototype.contains=function(u){return typeof u=="string"&&(u.indexOf("/")>0||u.split(".").length!==4)&&(u=new c(u)),u instanceof c?this.contains(u.base)&&this.contains(u.broadcast||u.last):(a(u)&this.maskLong)>>>0===(this.netLong&this.maskLong)>>>0},c.prototype.next=function(u){return u==null&&(u=1),new c(o(this.netLong+this.size*u),this.mask)},c.prototype.forEach=function(u){var l,f,d;for(d=a(this.first),f=a(this.last),l=0;d<=f;)u(o(d),d,l),l++,d++},c.prototype.toString=function(){return this.base+"/"+this.bitmask},c}(),r1.ip2long=a,r1.long2ip=o,r1.Netmask=t}.call(r1)),r1}var Pft=Ift();const Rft=["0.0.0.0/8","10.0.0.0/8","100.64.0.0/10","127.0.0.0/8","169.254.0.0/16","172.16.0.0/12","192.0.0.0/24","192.0.0.0/29","192.0.0.8/32","192.0.0.9/32","192.0.0.10/32","192.0.0.170/32","192.0.0.171/32","192.0.2.0/24","192.31.196.0/24","192.52.193.0/24","192.88.99.0/24","192.168.0.0/16","192.175.48.0/24","198.18.0.0/15","198.51.100.0/24","203.0.113.0/24","240.0.0.0/4","255.255.255.255/32"],Oft=Rft.map(t=>new Pft.Netmask(t));function TM(t){for(const e of Oft)if(e.contains(t))return!0;return!1}function Bft(t){return/^::ffff:([0-9a-fA-F]{1,4}):([0-9a-fA-F]{1,4})$/.test(t)}function Dft(t){const e=t.split(":");if(e.length<2)return!1;const r=e[e.length-1].padStart(4,"0"),n=e[e.length-2].padStart(4,"0"),i=`${parseInt(n.substring(0,2),16)}.${parseInt(n.substring(2),16)}.${parseInt(r.substring(0,2),16)}.${parseInt(r.substring(2),16)}`;return TM(i)}function Mft(t){return/^::ffff:([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/.test(t)}function Nft(t){const e=t.split(":"),r=e[e.length-1];return TM(r)}function Fft(t){return/^::$/.test(t)||/^::1$/.test(t)||/^64:ff9b::([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/.test(t)||/^100::([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(t)||/^2001::([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(t)||/^2001:2[0-9a-fA-F]:([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(t)||/^2001:db8:([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(t)||/^2002:([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(t)||/^f[c-d]([0-9a-fA-F]{2,2}):/i.test(t)||/^fe[8-9a-bA-B][0-9a-fA-F]:/i.test(t)||/^ff([0-9a-fA-F]{2,2}):/i.test(t)}function kd(t){return _p(t)?TM(t):Bft(t)?Dft(t):Mft(t)?Nft(t):dM(t)?Fft(t):void 0}const Lft=t=>t.toString().split("/").slice(1),g2=t=>({match:e=>e.length<1?!1:t(e[0])?e.slice(1):!1,pattern:"fn"}),_r=t=>({match:e=>g2(r=>r===t).match(e),pattern:t}),vm=()=>({match:t=>g2(e=>typeof e=="string").match(t),pattern:"{string}"}),i_=()=>({match:t=>g2(e=>!isNaN(parseInt(e))).match(t),pattern:"{number}"}),yn=()=>({match:t=>{if(t.length<2||t[0]!=="p2p"&&t[0]!=="ipfs")return!1;if(t[1].startsWith("Q")||t[1].startsWith("1"))try{$n.decode(`z${t[1]}`)}catch{return!1}else return!1;return t.slice(2)},pattern:"/p2p/{peerid}"}),A6=()=>({match:t=>{if(t.length<2||t[0]!=="certhash")return!1;try{AB.decode(t[1])}catch{return!1}return t.slice(2)},pattern:"/certhash/{certhash}"}),Yr=t=>({match:e=>{const r=t.match(e);return r===!1?e:r},pattern:`optional(${t.pattern})`}),ia=(...t)=>({match:e=>{let r;for(const n of t){const i=n.match(e);i!==!1&&(r==null||i.length<r.length)&&(r=i)}return r??!1},pattern:`or(${t.map(e=>e.pattern).join(", ")})`}),Ar=(...t)=>({match:e=>{for(const r of t){const n=r.match(e);if(n===!1)return!1;e=n}return e},pattern:`and(${t.map(e=>e.pattern).join(", ")})`});function Dn(...t){function e(i){let s=Lft(i);for(const a of t){const o=a.match(s);if(o===!1)return!1;s=o}return s}function r(i){return e(i)!==!1}function n(i){const s=e(i);return s===!1?!1:s.length===0}return{matchers:t,matches:r,exactMatch:n}}const s_=Ar(_r("dns4"),vm()),a_=Ar(_r("dns6"),vm()),o_=Ar(_r("dnsaddr"),vm()),AM=Ar(_r("dns"),vm());Dn(s_,Yr(yn()));Dn(a_,Yr(yn()));Dn(o_,Yr(yn()));const mhe=Dn(ia(AM,o_,s_,a_),Yr(yn())),ghe=Ar(_r("ip4"),g2(_p)),vhe=Ar(_r("ip6"),g2(dM)),CM=ia(ghe,vhe),vu=ia(CM,AM,s_,a_,o_),$ft=Dn(ia(CM,Ar(ia(AM,o_,s_,a_),Yr(yn())))),kY=Dn(ghe),TY=Dn(vhe),Uft=Dn(CM),IM=Ar(vu,_r("tcp"),i_()),v2=Ar(vu,_r("udp"),i_()),C6=Dn(Ar(IM,Yr(yn())));Dn(v2);const PM=Ar(v2,_r("quic"),Yr(yn())),c_=Ar(v2,_r("quic-v1"),Yr(yn())),jft=ia(PM,c_);Dn(PM);const Vft=Dn(c_),lP=ia(vu,IM,v2,PM,c_),yhe=ia(Ar(lP,_r("ws"),Yr(yn()))),ry=Dn(yhe),bhe=ia(Ar(lP,_r("wss"),Yr(yn())),Ar(lP,_r("tls"),Yr(Ar(_r("sni"),vm())),_r("ws"),Yr(yn()))),I6=Dn(bhe),whe=Ar(v2,_r("webrtc-direct"),Yr(A6()),Yr(A6()),Yr(yn())),uP=Dn(whe),_he=Ar(c_,_r("webtransport"),Yr(A6()),Yr(A6()),Yr(yn())),P6=Dn(_he),R6=ia(yhe,bhe,Ar(IM,Yr(yn())),Ar(jft,Yr(yn())),Ar(vu,Yr(yn())),whe,_he,yn()),xhe=Dn(R6),qft=Ar(R6,_r("p2p-circuit"),yn()),ad=Dn(qft),zft=ia(Ar(R6,_r("p2p-circuit"),_r("webrtc"),Yr(yn())),Ar(R6,_r("webrtc"),Yr(yn())),Ar(_r("webrtc"),Yr(yn()))),fP=Dn(zft),Hft=ia(Ar(vu,_r("tcp"),i_(),_r("http"),Yr(yn())),Ar(vu,_r("http"),Yr(yn()))),Wft=Dn(Hft),Gft=ia(Ar(vu,_r("tcp"),ia(Ar(_r("443"),_r("http")),Ar(i_(),_r("https"))),Yr(yn())),Ar(vu,_r("tls"),_r("http"),Yr(yn())),Ar(vu,_r("https"),Yr(yn()))),Kft=Dn(Gft),Xft=ia(Ar(_r("memory"),vm(),Yr(yn())));Dn(Xft);const Yft=[Xt("tcp").code,Xt("dns").code,Xt("dnsaddr").code,Xt("dns4").code,Xt("dns6").code];function AY(t){return She("sni",t)?.[1]}function CY(t){const e=She("tcp",t)?.[1];return e==null?"":`:${e}`}function She(t,e){let r;try{r=Xt(t).code}catch{return}for(const[n,i]of e)if(n===r&&i!=null)return[n,i]}function IY(t){return t.some(([e,r])=>e===Xt("tls").code)}function Wo(t,e,r){const n=Ehe[Xt(t).name];if(n==null)throw new Error(`Can't interpret protocol ${Xt(t).name}`);const i=n(e,r);return t===Xt("ip6").code?`[${i}]`:i}const Ehe={ip4:(t,e)=>t,ip6:(t,e)=>e.length===0?t:`[${t}]`,tcp:(t,e)=>{const r=e.pop();if(r==null)throw new Error("Unexpected end of multiaddr");return`tcp://${Wo(r[0],r[1]??"",e)}:${t}`},udp:(t,e)=>{const r=e.pop();if(r==null)throw new Error("Unexpected end of multiaddr");return`udp://${Wo(r[0],r[1]??"",e)}:${t}`},dnsaddr:(t,e)=>t,dns4:(t,e)=>t,dns6:(t,e)=>t,dns:(t,e)=>t,ipfs:(t,e)=>{const r=e.pop();if(r==null)throw new Error("Unexpected end of multiaddr");return`${Wo(r[0],r[1]??"",e)}`},p2p:(t,e)=>{const r=e.pop();if(r==null)throw new Error("Unexpected end of multiaddr");return`${Wo(r[0],r[1]??"",e)}`},http:(t,e)=>{const r=IY(e),n=AY(e),i=CY(e);if(r&&n!=null)return`https://${n}${i}`;const s=r?"https://":"http://",a=e.pop();if(a==null)throw new Error("Unexpected end of multiaddr");let o=Wo(a[0],a[1]??"",e);return o=o.replace("tcp://",""),`${s}${o}`},"http-path":(t,e)=>{const r=e.pop();if(r==null)throw new Error("Unexpected end of multiaddr");const n=Wo(r[0],r[1]??"",e),i=decodeURIComponent(t);return`${n}/${i}`},tls:(t,e)=>{const r=e.pop();if(r==null)throw new Error("Unexpected end of multiaddr");return Wo(r[0],r[1]??"",e)},sni:(t,e)=>{const r=e.pop();if(r==null)throw new Error("Unexpected end of multiaddr");return Wo(r[0],r[1]??"",e)},https:(t,e)=>{const r=e.pop();if(r==null)throw new Error("Unexpected end of multiaddr");let n=Wo(r[0],r[1]??"",e);return n=n.replace("tcp://",""),`https://${n}`},ws:(t,e)=>{const r=IY(e),n=AY(e),i=CY(e);if(r&&n!=null)return`wss://${n}${i}`;const s=r?"wss://":"ws://",a=e.pop();if(a==null)throw new Error("Unexpected end of multiaddr");let o=Wo(a[0],a[1]??"",e);return o=o.replace("tcp://",""),`${s}${o}`},wss:(t,e)=>{const r=e.pop();if(r==null)throw new Error("Unexpected end of multiaddr");let n=Wo(r[0],r[1]??"",e);return n=n.replace("tcp://",""),`wss://${n}`}};function khe(t,e){const n=Mt(t).stringTuples(),i=n.pop();if(i==null)throw new Error("Unexpected end of multiaddr");const s=Xt(i[0]),a=Ehe[s.name];if(a==null)throw new Error(`No interpreter found for ${s.name}`);let o=a(i[1]??"",n);return Yft.includes(i[0])&&(o=o.replace(/^.*:\/\//,""),i[1]==="443"?o=`https://${o}`:o=`http://${o}`),(o.startsWith("http://")||o.startsWith("https://")||o.startsWith("ws://")||o.startsWith("wss://"))&&(o=new URL(o).toString(),o.endsWith("/")&&(o=o.substring(0,o.length-1))),o}class Zft{url;#e=0;#t=0;#r=0;#i=0;#o=new Map;log;transformRequestInit;constructor(e,{logger:r,transformRequestInit:n}){this.url=e instanceof URL?e:new URL(e),this.transformRequestInit=n,this.log=r.forComponent(`helia:trustless-gateway-block-broker:${this.url.hostname}`)}#l(e){const r=e.multihash.bytes;return ko.encode(r)}async getRawBlock(e,r){const n=new URL(this.url.toString());if(n.pathname=`/ipfs/${e.toString()}`,n.search="?format=raw",r?.aborted===!0)throw new Error(`Signal to fetch raw block for CID ${e} from gateway ${this.url} was aborted prior to fetch`);const i=this.#l(e),s=new AbortController,a=()=>{s.abort()};r?.addEventListener("abort",a);try{let o=this.#o.get(i);if(o==null){this.#e++;const c={signal:s.signal,headers:{Accept:"application/vnd.ipld.raw"},cache:"force-cache"},u=this.transformRequestInit!=null?await this.transformRequestInit(c):c;o=fetch(n.toString(),u).then(async l=>{if(this.log("GET %s %d",n,l.status),!l.ok)throw this.#t++,new Error(`unable to fetch raw block for CID ${e} from gateway ${this.url}`);return this.#i++,new Uint8Array(await l.arrayBuffer())}),this.#o.set(i,o)}return await o}catch{throw r?.aborted===!0?new Error(`fetching raw block for CID ${e} from gateway ${this.url} was aborted`):(this.#t++,new Error(`unable to fetch raw block for CID ${e}`))}finally{r?.removeEventListener("abort",a),this.#o.delete(i)}}reliability(){return this.#e===0?1:this.#r>0?-1/0:this.#i/(this.#e+this.#t*3)}incrementInvalidBlocks(){this.#r++}getStats(){return{attempts:this.#e,errors:this.#t,invalidBlocks:this.#r,successes:this.#i,pendingResponses:this.#o.size}}}function Jft(t,e,r){return t.filter(n=>{if(Kft.matches(n)||e&&Wft.matches(n))return r||mhe.matches(n)?!0:kd(n.toOptions().host)===!1;if(!e&&r){const{host:i}=n.toOptions();if(i==="127.0.0.1"||i==="localhost"||i.endsWith(".localhost"))return!0}return!1})}async function*The(t,e,r,n,i,s={}){for await(const a of e.findProviders(t,s)){const o=Jft(a.multiaddrs,n,i);if(o.length===0)continue;const c=khe(o[0]);yield new Zft(c,{logger:r,transformRequestInit:s.transformRequestInit})}}class Qft extends dhe{routing;allowInsecure;allowLocal;transformRequestInit;constructor(e,r){super(e,{...r,name:"helia:trustless-gateway:session"}),this.routing=e.routing,this.allowInsecure=r.allowInsecure??Ahe,this.allowLocal=r.allowLocal??Che,this.transformRequestInit=r.transformRequestInit}async queryProvider(e,r,n){this.log("fetching BLOCK for %c from %s",e,r.url);const i=await r.getRawBlock(e,n.signal);return this.log.trace("got block for %c from %s",e,r.url),await n.validateFn?.(i),i}async*findNewProviders(e,r={}){yield*The(e,this.routing,this.logger,this.allowInsecure,this.allowLocal,{...r,transformRequestInit:this.transformRequestInit})}toEvictionKey(e){return e.url.toString()}equals(e,r){return e.url.toString()===r.url.toString()}}function edt(t,e){return new Qft(t,e)}class tdt{allowInsecure;allowLocal;transformRequestInit;routing;log;logger;constructor(e,r={}){this.log=e.logger.forComponent("helia:trustless-gateway-block-broker"),this.logger=e.logger,this.routing=e.routing,this.allowInsecure=r.allowInsecure??Ahe,this.allowLocal=r.allowLocal??Che,this.transformRequestInit=r.transformRequestInit}async retrieve(e,r={}){const n=[];for await(const i of The(e,this.routing,this.logger,this.allowInsecure,this.allowLocal,{...r,transformRequestInit:this.transformRequestInit})){this.log("getting block for %c from %s",e,i.url);try{const s=await i.getRawBlock(e,r.signal);this.log.trace("got block for %c from %s",e,i.url);try{await r.validateFn?.(s)}catch(a){this.log.error("failed to validate block for %c from %s",e,i.url,a);continue}return s}catch(s){if(this.log.error("failed to get block for %c from %s",e,i.url,s),s instanceof Error?n.push(s):n.push(new Error(`Unable to fetch raw block for CID ${e} from gateway ${i.url}`)),r.signal?.aborted===!0){this.log.trace("request aborted while fetching raw block for CID %c from gateway %s",e,i.url);break}}}throw n.length>0?new AggregateError(n,`Unable to fetch raw block for CID ${e} from any gateway`):new Error(`Unable to fetch raw block for CID ${e} from any gateway`)}createSession(e={}){return edt({logger:this.logger,routing:this.routing},{...e,allowLocal:this.allowLocal,allowInsecure:this.allowInsecure,transformRequestInit:this.transformRequestInit})}}const Ahe=!1,Che=!1;function rdt(t={}){return e=>new tdt(e,t)}class ndt extends kM{data;constructor(){super(),this.data=new Map}put(e,r){return this.data.set(ma.encode(e.multihash.bytes),r),e}get(e){const r=this.data.get(ma.encode(e.multihash.bytes));if(r==null)throw new sd;return r}has(e){return this.data.has(ma.encode(e.multihash.bytes))}async delete(e){this.data.delete(ma.encode(e.multihash.bytes))}async*getAll(){for(const[e,r]of this.data.entries())yield{cid:mt.createV1(Ro,Zn(ma.decode(e))),block:r}}}$s("blockstore:core:tiered");const dP=(t,e)=>e.some(r=>t instanceof r);let PY,RY;function idt(){return PY||(PY=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function sdt(){return RY||(RY=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const hP=new WeakMap,ZT=new WeakMap,l_=new WeakMap;function adt(t){const e=new Promise((r,n)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",a)},s=()=>{r(Vf(t.result)),i()},a=()=>{n(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",a)});return l_.set(e,t),e}function odt(t){if(hP.has(t))return;const e=new Promise((r,n)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",a),t.removeEventListener("abort",a)},s=()=>{r(),i()},a=()=>{n(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",a),t.addEventListener("abort",a)});hP.set(t,e)}let pP={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return hP.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return Vf(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Ihe(t){pP=t(pP)}function cdt(t){return sdt().includes(t)?function(...e){return t.apply(mP(this),e),Vf(this.request)}:function(...e){return Vf(t.apply(mP(this),e))}}function ldt(t){return typeof t=="function"?cdt(t):(t instanceof IDBTransaction&&odt(t),dP(t,idt())?new Proxy(t,pP):t)}function Vf(t){if(t instanceof IDBRequest)return adt(t);if(ZT.has(t))return ZT.get(t);const e=ldt(t);return e!==t&&(ZT.set(t,e),l_.set(e,t)),e}const mP=t=>l_.get(t);function Phe(t,e,{blocked:r,upgrade:n,blocking:i,terminated:s}={}){const a=indexedDB.open(t,e),o=Vf(a);return n&&a.addEventListener("upgradeneeded",c=>{n(Vf(a.result),c.oldVersion,c.newVersion,Vf(a.transaction),c)}),r&&a.addEventListener("blocked",c=>r(c.oldVersion,c.newVersion,c)),o.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),o}function Rhe(t,{blocked:e}={}){const r=indexedDB.deleteDatabase(t);return e&&r.addEventListener("blocked",n=>e(n.oldVersion,n)),Vf(r).then(()=>{})}const udt=["get","getKey","getAll","getAllKeys","count"],fdt=["put","add","delete","clear"],JT=new Map;function OY(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(JT.get(e))return JT.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,i=fdt.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(i||udt.includes(r)))return;const s=async function(a,...o){const c=this.transaction(a,i?"readwrite":"readonly");let u=c.store;return n&&(u=u.index(o.shift())),(await Promise.all([u[r](...o),i&&c.done]))[0]};return JT.set(e,s),s}Ihe(t=>({...t,get:(e,r,n)=>OY(e,r)||t.get(e,r,n),has:(e,r)=>!!OY(e,r)||t.has(e,r)}));const ddt=["continue","continuePrimaryKey","advance"],BY={},gP=new WeakMap,Ohe=new WeakMap,hdt={get(t,e){if(!ddt.includes(e))return t[e];let r=BY[e];return r||(r=BY[e]=function(...n){gP.set(this,Ohe.get(this)[e](...n))}),r}};async function*pdt(...t){let e=this;if(e instanceof IDBCursor||(e=await e.openCursor(...t)),!e)return;e=e;const r=new Proxy(e,hdt);for(Ohe.set(r,e),l_.set(r,mP(e));e;)yield r,e=await(gP.get(r)||e.continue()),gP.delete(r)}function DY(t,e){return e===Symbol.asyncIterator&&dP(t,[IDBIndex,IDBObjectStore,IDBCursor])||e==="iterate"&&dP(t,[IDBIndex,IDBObjectStore])}Ihe(t=>({...t,get(e,r,n){return DY(e,r)?pdt:t.get(e,r,n)},has(e,r){return DY(e,r)||t.has(e,r)}}));class mdt extends kM{location;version;db;base;constructor(e,r={}){super(),this.location=`${r.prefix??""}${e}`,this.version=r.version??1,this.base=r.base??Pte}#e(e){return`/${this.base.encoder.encode(e.multihash.bytes)}`}#t(e){return mt.createV1(Ro,Zn(this.base.decoder.decode(e.substring(1))))}async open(){try{const e=this.location;this.db=await Phe(e,this.version,{upgrade(r){r.createObjectStore(e)}})}catch(e){throw new ey(String(e))}}async close(){this.db?.close()}async put(e,r){if(this.db==null)throw new Error("Blockstore needs to be opened.");try{return await this.db.put(this.location,r,this.#e(e)),e}catch(n){throw new Cf(String(n))}}async get(e){if(this.db==null)throw new Error("Blockstore needs to be opened.");let r;try{r=await this.db.get(this.location,this.#e(e))}catch(n){throw new Cf(String(n))}if(r===void 0)throw new sd;return r}async delete(e){if(this.db==null)throw new Error("Blockstore needs to be opened.");try{await this.db.delete(this.location,this.#e(e))}catch(r){throw new Cf(String(r))}}async has(e){if(this.db==null)throw new Error("Blockstore needs to be opened.");try{return!!await this.db.getKey(this.location,this.#e(e))}catch(r){throw new Cf(String(r))}}async*getAll(e){if(this.db==null)throw new Error("Blockstore needs to be opened.");for(const r of await this.db.getAllKeys(this.location)){const n=this.#t(r.toString()),i=await this.get(n);yield{cid:n,block:i}}}async destroy(){await Rhe(this.location)}}const gdt="SHARDING";function vdt(t){return t[Symbol.asyncIterator]!=null}function O6(t,e){return vdt(t)?async function*(){yield*(await zv(t)).sort(e)}():function*(){yield*zv(t).sort(e)}()}class Bhe{put(e,r,n){return Promise.reject(new Error(".put is not implemented"))}get(e,r){return Promise.reject(new Error(".get is not implemented"))}has(e,r){return Promise.reject(new Error(".has is not implemented"))}delete(e,r){return Promise.reject(new Error(".delete is not implemented"))}async*putMany(e,r={}){for await(const{key:n,value:i}of e)await this.put(n,i,r),yield n}async*getMany(e,r={}){for await(const n of e)yield{key:n,value:await this.get(n,r)}}async*deleteMany(e,r={}){for await(const n of e)await this.delete(n,r),yield n}batch(){let e=[],r=[];return{put(n,i){e.push({key:n,value:i})},delete(n){r.push(n)},commit:async n=>{await vc(this.putMany(e,n)),e=[],await vc(this.deleteMany(r,n)),r=[]}}}async*_all(e,r){throw new Error("._all is not implemented")}async*_allKeys(e,r){throw new Error("._allKeys is not implemented")}query(e,r){let n=this._all(e,r);if(e.prefix!=null){const i=e.prefix;n=Qc(n,s=>s.key.toString().startsWith(i))}if(Array.isArray(e.filters)&&(n=e.filters.reduce((i,s)=>Qc(i,s),n)),Array.isArray(e.orders)&&(n=e.orders.reduce((i,s)=>O6(i,s),n)),e.offset!=null){let i=0;const s=e.offset;n=Qc(n,()=>i++>=s)}return e.limit!=null&&(n=_6(n,e.limit)),n}queryKeys(e,r){let n=this._allKeys(e,r);if(e.prefix!=null){const i=e.prefix;n=Qc(n,s=>s.toString().startsWith(i))}if(Array.isArray(e.filters)&&(n=e.filters.reduce((i,s)=>Qc(i,s),n)),Array.isArray(e.orders)&&(n=e.orders.reduce((i,s)=>O6(i,s),n)),e.offset!=null){const i=e.offset;let s=0;n=Qc(n,()=>s++>=i)}return e.limit!=null&&(n=_6(n,e.limit)),n}}class Dhe extends Bhe{data;constructor(){super(),this.data=new Map}put(e,r){return this.data.set(e.toString(),r),e}get(e){const r=this.data.get(e.toString());if(r==null)throw new sd;return r}has(e){return this.data.has(e.toString())}delete(e){this.data.delete(e.toString())}*_all(){for(const[e,r]of this.data.entries())yield{key:new Sn(e),value:r}}*_allKeys(){for(const e of this.data.keys())yield new Sn(e)}}new Sn(gdt);$s("datastore:core:tiered");class Mhe extends Bhe{location;version;db;constructor(e,r={}){super(),this.location=`${r.prefix??""}${e}`,this.version=r.version??1}async open(){try{const e=this.location;this.db=await Phe(e,this.version,{upgrade(r){r.createObjectStore(e)}})}catch(e){throw new ey(String(e))}}async close(){this.db?.close()}async put(e,r){if(this.db==null)throw new Error("Datastore needs to be opened.");try{return await this.db.put(this.location,r,e.toString()),e}catch(n){throw new Cf(String(n))}}async get(e){if(this.db==null)throw new Error("Datastore needs to be opened.");let r;try{r=await this.db.get(this.location,e.toString())}catch(n){throw new ty(String(n))}if(r===void 0)throw new sd;return r}async has(e){if(this.db==null)throw new Error("Datastore needs to be opened.");try{return!!await this.db.getKey(this.location,e.toString())}catch(r){throw new ty(String(r))}}async delete(e){if(this.db==null)throw new Error("Datastore needs to be opened.");try{await this.db.delete(this.location,e.toString())}catch(r){throw new k6(String(r))}}batch(){const e=[],r=[];return{put(n,i){e.push({key:n,value:i})},delete(n){r.push(n)},commit:async()=>{if(this.db==null)throw new Error("Datastore needs to be opened.");const n=this.db.transaction(this.location,"readwrite");try{const i=e.filter(({key:s})=>r.find(a=>a.toString()===s.toString())==null).map(s=>async()=>{await n.store.put(s.value,s.key.toString())}).concat(r.map(s=>async()=>{await n.store.delete(s.toString())})).concat(async()=>{await n.done});await Promise.all(i.map(async s=>{await s()}))}catch{n.abort()}}}}async*query(e){let r=this.#e(e,(n,i)=>({key:n,value:i}));Array.isArray(e.filters)&&(r=e.filters.reduce((n,i)=>Qc(n,i),r)),Array.isArray(e.orders)&&(r=e.orders.reduce((n,i)=>O6(n,i),r)),yield*r}async*queryKeys(e){let r=this.#e(e,n=>n);Array.isArray(e.filters)&&(r=e.filters.reduce((n,i)=>Qc(n,i),r)),Array.isArray(e.orders)&&(r=e.orders.reduce((n,i)=>O6(n,i),r)),yield*r}async*#e(e,r){if(this.db==null)throw new Error("Datastore needs to be opened.");let n=0,i=-1;for(const s of await this.db.getAllKeys(this.location)){if(e.prefix!=null&&!s.toString().startsWith(e.prefix))continue;if(e.limit!=null&&n===e.limit)return;if(i++,e.offset!=null&&i<e.offset)continue;const a=new Sn(s.toString());let o;try{o=await this.get(a)}catch(c){if(c.name!=="NotFoundError")throw c;continue}o!=null&&(yield r(a,o),n++)}}async destroy(){await Rhe(this.location)}}async function*MY(t,e={}){const r=t.getReader();try{for(;;){const n=await r.read();if(n.done)return;yield n.value}}finally{e.preventCancel!==!0&&await r.cancel(),r.releaseLock()}}var QT={exports:{}},NY;function ydt(){return NY||(NY=1,function(t){(function(){t.exports=g;var e=86400,r=3200,n=146097*r/400,i=e*n,s=1e3*i,a=864e13,o=4294967296,c=1e6,u="000000000",l=Math.trunc||function(D){var z=D-D%1;return z==0&&(D<0||D===0&&1/D!=1/0)?-0:z},f=g.prototype,d=(g.fromDate=function(D){return new g(+D)},g.fromInt64BE=x(0,1,2,3,0,4),g.fromInt64LE=x(3,2,1,0,4,0),g.fromString=function(S){var z,U=new g,S=(S+="").replace(/^\s*[+\-]?\d+/,function(w){var w=+w,A=1970+(w-1970)%400;return U.year=w-A,A}).replace(/(?:Z|([+\-]\d{2}):?(\d{2}))$/,function(T,w,A){return w<0&&(A*=-1),z=6e4*(60*+w+ +A),""}).replace(/\.\d+$/,function(T){return U.nano=+(T+u).substr(1,9),""}).split(/\D+/);if(1<S.length?S[1]--:S[1]=0,U.time=z=Date.UTC.apply(Date,S)-(z||0),isNaN(z))throw new TypeError("Invalid Date");return v(U)},g.fromTimeT=function(D){return b(D,0)},f.year=0,f.time=0,f.nano=0,f.addNano=function(D){return this.nano+=+D||0,this},f.getNano=function(){var D=v(this);return(D.time%1e3*c+ +D.nano+1e9)%1e9},f.getTimeT=function(){var z=v(this),D=Math.floor(z.time/1e3),z=z.year;return z&&(D+=z*n*e/r),D},f.getYear=function(){return this.toDate().getUTCFullYear()+this.year},f.toDate=function(){return y(v(this).time)},f.toJSON=function(){return this.toString().replace(/0{1,6}Z$/,"Z")},f.toString=function(D){var z=this,U=z.toDate(),S={H:function(){return k(U.getUTCHours())},L:function(){return B(U.getUTCMilliseconds(),3)},M:function(){return k(U.getUTCMinutes())},N:function(){return B(z.getNano(),9)},S:function(){return k(U.getUTCSeconds())},Y:function(){var T=z.getYear();return 999999<T?"+"+T:9999<T?"+"+B(T,6):0<=T?B(T,4):-999999<=T?"-"+B(-T,6):T},a:function(){return m[U.getUTCDay()]},b:function(){return h[U.getUTCMonth()]},d:function(){return k(U.getUTCDate())},e:function(){return function(T){return(9<T?"":" ")+(0|T)}(U.getUTCDate())},m:function(){return k(U.getUTCMonth()+1)}};return function T(w){return w.replace(/%./g,function(A){var P=A[1],F=p[P],P=S[P];return F?T(F):P?P():A})}(D||d)},f.writeInt64BE=_(0,1,2,3,0,4),f.writeInt64LE=_(3,2,1,0,4,0),"%Y-%m-%dT%H:%M:%S.%NZ"),h=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],m=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],p={"%":"%",F:"%Y-%m-%d",n:`
`,R:"%H:%M",T:"%H:%M:%S",t:"	",X:"%T",Z:"GMT",z:"+0000"};return g;function g(D,z,U){var S=this;if(!(S instanceof g))return new g(D,z,U);S.time=+D||0,S.nano=+z||0,S.year=+U||0,v(S)}function v(D){var z,U,S,T=D.year,w=D.time,A=D.nano,F=((A<0||c<=A)&&(A-=(U=Math.floor(A/c))*c,w+=U,U=1),T%r);return(w<-864e13||a<w||F)&&((z=l(w/s))&&(T+=z*r,w-=z*s),(S=y(w)).setUTCFullYear(F+S.getUTCFullYear()),S=(w=+S)+(z=l((T-=F)/r))*s,z&&-864e13<=S&&S<=a&&(T-=z*r,w=S),U=1),U&&(D.year=T,D.time=w,D.nano=A),D}function y(D){var z=new Date(0);return z.setTime(D),z}function b(T,S){T=+T||0;var U=l((S=(S|0)*o)/i)+l(T/i),S=S%i+T%i,T=l(S/i);return T&&(U+=T,S-=T*i),new g(1e3*S,0,U*r)}function _(D,z,U,S,T,w){return function(F,P){var R=v(this);F=F||new Array(8),E(F,P|=0);var I=Math.floor(R.time/1e3),R=R.year*(n*e/r),O=l(R/o)+l(I/o),R=R%o+I%o,I=Math.floor(R/o);return I&&(O+=I,R-=I*o),A(F,P+T,O),A(F,P+w,R),F};function A(F,P,O){F[P+D]=O>>24&255,F[P+z]=O>>16&255,F[P+U]=O>>8&255,F[P+S]=255&O}}function x(D,z,U,S,T,w){return function(F,P){E(F,P|=0);var O=A(F,P+T);return b(A(F,P+w),O)};function A(F,P){return 16777216*F[P+D]+(F[P+z]<<16|F[P+U]<<8|F[P+S])}}function E(D,z){if(D=D&&D.length,D==null)throw new TypeError("Invalid Buffer");if(D<z+8)throw new RangeError("Out of range")}function k(D){return(9<D?"":"0")+(0|D)}function B(D,z){return(u+(0|D)).substr(-z)}})()}(QT)),QT.exports}var bdt=ydt();const vP=In(bdt);class Wd extends Error{static name="SignatureVerificationError";constructor(e="Record signature verification failed"){super(e),this.name="SignatureVerificationError"}}class wdt extends Error{static name="RecordExpiredError";constructor(e="Record has expired"){super(e),this.name="RecordExpiredError"}}class Nhe extends Error{static name="UnsupportedValidityError";constructor(e="The validity type is unsupported"){super(e),this.name="UnsupportedValidityError"}}class _dt extends Error{static name="RecordTooLargeError";constructor(e="The record is too large"){super(e),this.name="RecordTooLargeError"}}class xdt extends Error{static name="InvalidValueError";constructor(e="Value must be a valid content path starting with /"){super(e),this.name="InvalidValueError"}}class Sdt extends Error{static name="InvalidRecordDataError";constructor(e="Invalid record data"){super(e),this.name="InvalidRecordDataError"}}class FY extends Error{static name="InvalidEmbeddedPublicKeyError";constructor(e="Invalid embedded public key"){super(e),this.name="InvalidEmbeddedPublicKeyError"}}var dc;(function(t){(function(n){n.EOL="EOL"})(t.ValidityType||(t.ValidityType={}));let e;(function(n){n[n.EOL=0]="EOL"})(e||(e={})),function(n){n.codec=()=>ra(e)}(t.ValidityType||(t.ValidityType={}));let r;t.codec=()=>(r==null&&(r=Ot((n,i,s={})=>{s.lengthDelimited!==!1&&i.fork(),n.value!=null&&(i.uint32(10),i.bytes(n.value)),n.signatureV1!=null&&(i.uint32(18),i.bytes(n.signatureV1)),n.validityType!=null&&(i.uint32(24),t.ValidityType.codec().encode(n.validityType,i)),n.validity!=null&&(i.uint32(34),i.bytes(n.validity)),n.sequence!=null&&(i.uint32(40),i.uint64(n.sequence)),n.ttl!=null&&(i.uint32(48),i.uint64(n.ttl)),n.pubKey!=null&&(i.uint32(58),i.bytes(n.pubKey)),n.signatureV2!=null&&(i.uint32(66),i.bytes(n.signatureV2)),n.data!=null&&(i.uint32(74),i.bytes(n.data)),s.lengthDelimited!==!1&&i.ldelim()},(n,i,s={})=>{const a={},o=i==null?n.len:n.pos+i;for(;n.pos<o;){const c=n.uint32();switch(c>>>3){case 1:{a.value=n.bytes();break}case 2:{a.signatureV1=n.bytes();break}case 3:{a.validityType=t.ValidityType.codec().decode(n);break}case 4:{a.validity=n.bytes();break}case 5:{a.sequence=n.uint64();break}case 6:{a.ttl=n.uint64();break}case 7:{a.pubKey=n.bytes();break}case 8:{a.signatureV2=n.bytes();break}case 9:{a.data=n.bytes();break}default:{n.skipType(c&7);break}}}return a})),r),t.encode=n=>Rt(n,t.codec()),t.decode=(n,i)=>Pt(n,t.codec(),i)})(dc||(dc={}));const Edt=$s("ipns:utils"),Fhe=tt("/ipns/"),kdt=0,Tdt=18;function Adt(t){let e;if(t.pubKey!=null)try{e=na(t.pubKey)}catch(r){throw Edt.error(r),r}if(e!=null)return e}function Cdt(t){const e=tt("ipns-signature:");return qn([e,t])}function Lhe(t){return"signatureV1"in t?dc.encode({value:tt(t.value),signatureV1:t.signatureV1,validityType:t.validityType,validity:tt(t.validity),sequence:t.sequence,ttl:t.ttl,pubKey:t.pubKey,signatureV2:t.signatureV2,data:t.data}):dc.encode({pubKey:t.pubKey,signatureV2:t.signatureV2,data:t.data})}function y2(t){const e=dc.decode(t);if(e.sequence!=null&&(e.sequence=BigInt(e.sequence)),e.ttl!=null&&(e.ttl=BigInt(e.ttl)),e.signatureV2==null||e.data==null)throw new Wd("Missing data or signatureV2");const r=Uhe(e.data),n=Idt(r.Value),i=nt(r.Validity);if(e.value!=null&&e.signatureV1!=null)return Pdt(e),{value:n,validityType:dc.ValidityType.EOL,validity:i,sequence:r.Sequence,ttl:r.TTL,pubKey:e.pubKey,signatureV1:e.signatureV1,signatureV2:e.signatureV2,data:e.data};if(e.signatureV2!=null)return{value:n,validityType:dc.ValidityType.EOL,validity:i,sequence:r.Sequence,ttl:r.TTL,pubKey:e.pubKey,signatureV2:e.signatureV2,data:e.data};throw new Error("invalid record: does not include signatureV1 or signatureV2")}function $he(t){return qn([Fhe,t.bytes])}function yP(t){const e=Zn(t.slice(Fhe.length));if(!bP(e,kdt)&&!bP(e,Tdt))throw new JR("Multihash in IPNS key was not identity or sha2-256");return e}function Uhe(t){const e=Ef(t);if(e.ValidityType===0)e.ValidityType=dc.ValidityType.EOL;else throw new Nhe("The validity type is unsupported");return Number.isInteger(e.Sequence)&&(e.Sequence=BigInt(e.Sequence)),Number.isInteger(e.TTL)&&(e.TTL=BigInt(e.TTL)),e}function Idt(t){const e=nt(t).trim();if(e.startsWith("/"))return e;try{return`/ipfs/${mt.decode(t).toV1().toString()}`}catch{}try{return`/ipfs/${mt.parse(e).toV1().toString()}`}catch{}throw new xdt("Value must be a valid content path starting with /")}function Pdt(t){if(t.data==null)throw new Sdt("Record data is missing");const e=Uhe(t.data);if(!Tr(e.Value,t.value??new Uint8Array(0)))throw new Wd('Field "value" did not match between protobuf and CBOR');if(!Tr(e.Validity,t.validity??new Uint8Array(0)))throw new Wd('Field "validity" did not match between protobuf and CBOR');if(e.ValidityType!==t.validityType)throw new Wd('Field "validityType" did not match between protobuf and CBOR');if(e.Sequence!==t.sequence)throw new Wd('Field "sequence" did not match between protobuf and CBOR');if(e.TTL!==t.ttl)throw new Wd('Field "ttl" did not match between protobuf and CBOR')}function bP(t,e){return t.code===e}const Uw=$s("ipns:validator"),Rdt=1024*10,Odt=async(t,e)=>{const r=y2(e);let n;try{const i=Cdt(r.data);n=await t.verify(i,r.signatureV2)}catch{n=!1}if(!n)throw Uw.error("record signature verification failed"),new Wd("Record signature verification failed");if(r.validityType===dc.ValidityType.EOL){if(vP.fromString(r.validity).toDate().getTime()<Date.now())throw Uw.error("record has expired"),new wdt("record has expired")}else if(r.validityType!=null)throw Uw.error("the validity type is unsupported"),new Nhe("The validity type is unsupported");Uw("ipns record for %s is valid",r.value)};async function jhe(t,e){if(e.byteLength>Rdt)throw new _dt("The record is too large");const r=yP(t);let n;bP(r,0)&&(n=goe(r));const i=y2(e),s=Adt(i)??n;if(s==null)throw new FY("Could not extract public key from IPNS record or routing key");const a=$he(s.toMultihash());if(!Tr(a,t))throw new FY("Embedded public key did not match routing key");await Odt(s,e)}let Bdt=class extends Error{name="InvalidMessageLengthError";code="ERR_INVALID_MESSAGE_LENGTH"};async function*LY(t,e={}){const r=/\r?\n/,n=new TextDecoder("utf8");let i="";for await(let s of t){if(typeof s=="string"&&(s=new TextEncoder().encode(s)),ug(s)&&(s=s.subarray()),i+=n.decode(s,{stream:!0}),i.length>(e?.maxMessageLength??i.length))throw new Bdt("Incoming message too long");const a=i.split(r);i=a.pop()??"";for(let o=0;o<a.length;o++)yield JSON.parse(a[o])}i+=n.decode(),i!==""&&(yield JSON.parse(i))}class eA extends Error{static name="InvalidRequestError";constructor(e="Invalid request"){super(e),this.name="InvalidRequestError"}}class of extends Error{static name="BadResponseError";constructor(e="Bad response"){super(e),this.name="BadResponseError"}}const $Y=tt("/ipns/");function UY(t){return Tr(t.subarray(0,$Y.byteLength),$Y)}class Ddt{client;constructor(e){this.client=e}async*findProviders(e,r={}){yield*Vu(this.client.getProviders(e,r),n=>({id:n.ID,multiaddrs:n.Addrs??[]}))}async provide(){}async cancelReprovide(){}async put(e,r,n){if(!UY(e))return;const i=yP(e),s=mt.createV1(114,i),a=y2(r);await this.client.putIPNS(s,a,n)}async get(e,r){if(!UY(e))throw new Bs("Not found");const n=yP(e),i=mt.createV1(114,n);try{const s=await this.client.getIPNS(i,r);return Lhe(s)}catch(s){throw s.name==="BadResponseError"?new Bs("Not found"):s}}}class Mdt{client;constructor(e){this.client=e}async findPeer(e,r={}){const n=await RD(this.client.getPeers(e,r));if(n!=null)return{id:n.ID,multiaddrs:n.Addrs??[]};throw new Bs("Not found")}async*getClosestPeers(e,r={}){}}const Vi=$s("delegated-routing-v1-http-api-client"),jw={concurrentRequests:4,timeout:3e4,cacheTTL:5*60*1e3,cacheName:"delegated-routing-v1-cache"};class Ndt{started;httpQueue;shutDownController;clientUrl;timeout;contentRouting;peerRouting;filterAddrs;filterProtocols;inFlightRequests;cacheName;cache;cacheTTL;constructor(e,r={}){this.started=!1,this.shutDownController=new AbortController,this.shutDownController.signal,this.httpQueue=new Cu({concurrency:r.concurrentRequests??jw.concurrentRequests}),this.inFlightRequests=new Map,this.clientUrl=e instanceof URL?e:new URL(e),this.timeout=r.timeout??jw.timeout,this.filterAddrs=r.filterAddrs,this.filterProtocols=r.filterProtocols,this.contentRouting=new Ddt(this),this.peerRouting=new Mdt(this),this.cacheName=r.cacheName??jw.cacheName,this.cacheTTL=r.cacheTTL??jw.cacheTTL}get[K1](){return this.contentRouting}get[X1](){return this.peerRouting}isStarted(){return this.started}async start(){this.started||(this.started=!0,this.cacheTTL>0&&(this.cache=await globalThis.caches?.open(this.cacheName),this.cache!=null&&Vi("cache enabled with ttl %d",this.cacheTTL)))}async stop(){this.httpQueue.clear(),this.shutDownController.abort(),await globalThis.caches?.delete(this.cacheName),this.started=!1}async*getProviders(e,r={}){Vi("getProviders starts: %c",e);const n=AbortSignal.timeout(this.timeout),i=Pr([this.shutDownController.signal,n,r.signal]),s=sr(),a=sr();this.httpQueue.add(async()=>(s.resolve(),a.promise));try{await s.promise;const o=new URL(`${this.clientUrl}routing/v1/providers/${e.toString()}`);this.#t(o,r.filterAddrs,r.filterProtocols);const c={headers:{Accept:"application/x-ndjson"},signal:i},u=await this.#r(o.toString(),c);if(u==null)throw new of("No response received");if(!u.ok)throw u.status===404?new Bs("No matching records found"):u.status===422?new eA("Request does not conform to schema or semantic constraints"):new of(`Unexpected status code: ${u.status}`);if(u.body==null)throw new of("Routing response had no body");const l=u.headers.get("Content-Type");if(l==null)throw new of("No Content-Type header received");if(l?.startsWith("application/json")){const f=await u.json();for(const d of f.Providers){const h=this.#e(d);h!=null&&(yield h)}}else if(l.includes("application/x-ndjson"))for await(const f of LY(MY(u.body))){const d=this.#e(f);d!=null&&(yield d)}else throw new of(`Unsupported Content-Type: ${l}`)}catch(o){Vi.error("getProviders errored:",o)}finally{i.clear(),a.resolve(),Vi("getProviders finished: %c",e)}}async*getPeers(e,r={}){Vi("getPeers starts: %c",e);const n=AbortSignal.timeout(this.timeout),i=Pr([this.shutDownController.signal,n,r.signal]),s=sr(),a=sr();this.httpQueue.add(async()=>(s.resolve(),a.promise));try{await s.promise;const o=new URL(`${this.clientUrl}routing/v1/peers/${e.toCID().toString()}`);this.#t(o,r.filterAddrs,r.filterProtocols);const c={headers:{Accept:"application/x-ndjson"},signal:i},u=await this.#r(o.toString(),c);if(u.status===404)throw new Bs("No matching records found");if(u.status===422)throw new eA("Request does not conform to schema or semantic constraints");if(u.body==null)throw new of("Routing response had no body");if(u.headers.get("Content-Type")==="application/json"){const f=await u.json();for(const d of f.Peers){const h=this.#e(d);h!=null&&(yield h)}}else for await(const f of LY(MY(u.body))){const d=this.#e(f);d!=null&&(yield d)}}catch(o){Vi.error("getPeers errored:",o)}finally{i.clear(),a.resolve(),Vi("getPeers finished: %c",e)}}async getIPNS(e,r={}){Vi("getIPNS starts: %s",e);const n=AbortSignal.timeout(this.timeout),i=Pr([this.shutDownController.signal,n,r.signal]),s=sr(),a=sr();this.httpQueue.add(async()=>(s.resolve(),a.promise));const o=`${this.clientUrl}routing/v1/ipns/${e}`;try{await s.promise;const c={headers:{Accept:"application/vnd.ipfs.ipns-record"},signal:i},u=await this.#r(o,c);if(Vi("getIPNS GET %s %d",o,u.status),u.status===404)throw new Bs("No matching records found");if(u.status===422)throw new eA("Request does not conform to schema or semantic constraints");if(u.body==null)throw new of("GET ipns response had no body");const l=await u.arrayBuffer(),f=new Uint8Array(l,0,l.byteLength);return r.validate!==!1&&await jhe($he(e.multihash),f),y2(f)}catch(c){throw Vi.error("getIPNS GET %s error:",o,c),c}finally{i.clear(),a.resolve(),Vi("getIPNS finished: %s",e)}}async putIPNS(e,r,n={}){Vi("putIPNS starts: %c",e);const i=AbortSignal.timeout(this.timeout),s=Pr([this.shutDownController.signal,i,n.signal]),a=sr(),o=sr();this.httpQueue.add(async()=>(a.resolve(),o.promise));const c=`${this.clientUrl}routing/v1/ipns/${e}`;try{await a.promise;const u=Lhe(r),l={method:"PUT",headers:{"Content-Type":"application/vnd.ipfs.ipns-record"},body:u,signal:s},f=await this.#r(c,l);if(Vi("putIPNS PUT %s %d",c,f.status),f.status!==200)throw new of("PUT ipns response had status other than 200")}catch(u){throw Vi.error("putIPNS PUT %s error:",c,u.stack),u}finally{s.clear(),o.resolve(),Vi("putIPNS finished: %c",e)}}#e(e){try{const r=[],n=e.Addrs?.map(Mt)??[];return e.Protocols!=null&&r.push(...e.Protocols),e.Protocol!=null&&(r.push(e.Protocol),delete e.Protocol),{...e,Schema:"peer",ID:Ln(e.ID),Addrs:n,Protocols:r}}catch(r){Vi.error("could not conform record to peer schema",r)}}#t(e,r,n){if(r!=null||this.filterAddrs!=null){const i=r?.join(",")??this.filterAddrs?.join(",")??"";i!==""&&e.searchParams.set("filter-addrs",i)}if(n!=null||this.filterProtocols!=null){const i=n?.join(",")??this.filterProtocols?.join(",")??"";i!==""&&e.searchParams.set("filter-protocols",i)}}async#r(e,r){const n=r.method??"GET",i=`${n}-${e}`;if(n==="GET"){const c=await this.cache?.match(e);if(c!=null){if(parseInt(c.headers.get("x-cache-expires")??"0",10)>Date.now())return Vi("returning cached response for %s",i),c;await this.cache?.delete(e)}}const s=this.inFlightRequests.get(i);if(s!=null){const c=await s;return Vi("deduplicating outgoing request for %s",i),c.clone()}const a=fetch(e,r).then(async c=>{if(this.cache!=null&&c.ok&&n==="GET"){const u=Date.now()+this.cacheTTL,l=new Headers(c.headers);l.set("x-cache-expires",u.toString());const f=new Response(c.clone().body,{status:c.status,statusText:c.statusText,headers:l});await this.cache.put(e,f)}return c}).finally(()=>{this.inFlightRequests.delete(i)});return this.inFlightRequests.set(i,a),await a}}function Fdt(t,e={}){return new Ndt(new URL(t),e)}function Ldt(){return{filterProtocols:["unknown","transport-bitswap","transport-ipfs-gateway-http"],filterAddrs:["https","webtransport","webrtc","webrtc-direct","wss","tls"]}}const jY="[a-fA-F\\d:]",If=t=>t&&t.includeBoundaries?`(?:(?<=\\s|^)(?=${jY})|(?<=${jY})(?=\\s|$))`:"",Zo="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",hi="[a-fA-F\\d]{1,4}",u_=`
(?:
(?:${hi}:){7}(?:${hi}|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8
(?:${hi}:){6}(?:${Zo}|:${hi}|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4
(?:${hi}:){5}(?::${Zo}|(?::${hi}){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4
(?:${hi}:){4}(?:(?::${hi}){0,1}:${Zo}|(?::${hi}){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4
(?:${hi}:){3}(?:(?::${hi}){0,2}:${Zo}|(?::${hi}){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4
(?:${hi}:){2}(?:(?::${hi}){0,3}:${Zo}|(?::${hi}){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4
(?:${hi}:){1}(?:(?::${hi}){0,4}:${Zo}|(?::${hi}){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4
(?::(?:(?::${hi}){0,5}:${Zo}|(?::${hi}){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4
)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1
`.replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),$dt=new RegExp(`(?:^${Zo}$)|(?:^${u_}$)`),Udt=new RegExp(`^${Zo}$`),jdt=new RegExp(`^${u_}$`),f_=t=>t&&t.exact?$dt:new RegExp(`(?:${If(t)}${Zo}${If(t)})|(?:${If(t)}${u_}${If(t)})`,"g");f_.v4=t=>t&&t.exact?Udt:new RegExp(`${If(t)}${Zo}${If(t)}`,"g");f_.v6=t=>t&&t.exact?jdt:new RegExp(`${If(t)}${u_}${If(t)}`,"g");function Vdt(t){const e=(...r)=>t(...r);return Object.defineProperty(e,"name",{value:`functionTimeout(${t.name||"<anonymous>"})`,configurable:!0}),e}const{toString:qdt}=Object.prototype;function zdt(t){return qdt.call(t)==="[object RegExp]"}const VY={global:"g",ignoreCase:"i",multiline:"m",dotAll:"s",sticky:"y",unicode:"u"};function Hdt(t,e={}){if(!zdt(t))throw new TypeError("Expected a RegExp instance");const r=Object.keys(VY).map(i=>(typeof e[i]=="boolean"?e[i]:t[i])?VY[i]:"").join(""),n=new RegExp(e.source||t.source,r);return n.lastIndex=typeof e.lastIndex=="number"?e.lastIndex:t.lastIndex,n}function Vhe(t,e,{timeout:r}={}){try{return Vdt(()=>Hdt(t).test(e),{timeout:r})()}catch(n){throw n}}const Wdt=15,Gdt=45,qhe={timeout:400};function qY(t){return t.length>Gdt?!1:Vhe(f_.v6({exact:!0}),t,qhe)}function Kdt(t){return t.length>Wdt?!1:Vhe(f_.v4({exact:!0}),t,qhe)}const zY={http:"80",https:"443",ws:"80",wss:"443"},Xdt=["http","https","ws","wss"];function Ydt(t,e){e=e??{};const r=e.defaultDnsType??"dns4",{scheme:n,hostname:i,port:s}=Zdt(t),o="/"+[Jdt(i,r),Qdt(s,n),eht(n)].filter(c=>!!c).reduce((c,u)=>c.concat(u),[]).join("/");return Mt(o)}function Zdt(t){const[e]=t.split(":");Xdt.includes(e)||(t="http"+t.substring(e.length));let{protocol:r,hostname:n,port:i}=new URL(t);if(i==null||i===""){const s=tht(e);s!=null&&(i=s),s==null&&r==="http:"&&(i="80")}return{scheme:e,hostname:n,port:i}}function Jdt(t,e){if(!(t==null||t==="")){if(Kdt(t))return["ip4",t];if(qY(t))return["ip6",t];if(t[0]==="["){const r=t.substring(1,t.length-1);if(qY(r))return["ip6",r]}return[e,t]}}function Qdt(t,e){if(!(t==null||t===""))return e==="udp"?["udp",t]:["tcp",t]}function eht(t){if(t.match(/^tcp$|^udp$/)==null)return[t]}function tht(t){if(!(t==null||t===""||zY[t]==null))return zY[t]}const rht=["https://trustless-gateway.link","https://4everland.io"],nht=2336;function iht(t){return t=t.toString(),{id:gm(mt.createV1(nht,Kf.digest(tt(t)))),multiaddrs:[Ydt(t)]}}class sht{gateways;constructor(e={}){this.gateways=(e.gateways??rht).map(r=>iht(r))}async*findProviders(e,r){yield*this.gateways.toSorted(()=>Math.random()>.5?1:-1).map(n=>({...n,protocols:["transport-ipfs-gateway-http"]}))}}function aht(t={}){return new sht(t)}class oht{libp2p;constructor(e){this.libp2p=e}async provide(e,r){await this.libp2p.contentRouting.provide(e,r)}async cancelReprovide(e,r){await this.libp2p.contentRouting.cancelReprovide(e,r)}async*findProviders(e,r){yield*this.libp2p.contentRouting.findProviders(e,r)}async put(e,r,n){await this.libp2p.contentRouting.put(e,r,n)}async get(e,r){return this.libp2p.contentRouting.get(e,r)}async findPeer(e,r){return this.libp2p.peerRouting.findPeer(e,r)}async*getClosestPeers(e,r){yield*this.libp2p.peerRouting.getClosestPeers(e,r)}}function cht(t){return new oht(t)}class lht extends bft{libp2p;constructor(e){super({...e,components:{libp2p:e.libp2p}}),this.libp2p=e.libp2p}async start(){await super.start(),await this.libp2p.start()}async stop(){await super.stop(),await this.libp2p.stop()}}class uht{readNext;haveNext;ended;nextResult;constructor(){this.ended=!1,this.readNext=sr(),this.haveNext=sr()}[Symbol.asyncIterator](){return this}async next(){if(this.nextResult==null&&await this.haveNext.promise,this.nextResult==null)throw new Error("HaveNext promise resolved but nextResult was undefined");const e=this.nextResult;return this.nextResult=void 0,this.readNext.resolve(),this.readNext=sr(),e}async throw(e){return this.ended=!0,e!=null&&(this.haveNext.promise.catch(()=>{}),this.haveNext.reject(e)),{done:!0,value:void 0}}async return(){const e={done:!0,value:void 0};return this.ended=!0,this.nextResult=e,this.haveNext.resolve(),e}async push(e,r){await this._push(e,r)}async end(e,r){e!=null?await this.throw(e):await this._push(void 0,r)}async _push(e,r){if(e!=null&&this.ended)throw new Error("Cannot push value onto an ended pushable");for(;this.nextResult!=null;)await this.readNext.promise;e!=null?this.nextResult={done:!1,value:e}:(this.ended=!0,this.nextResult={done:!0,value:void 0}),this.haveNext.resolve(),this.haveNext=sr(),await Mi(this.readNext.promise,r?.signal,r)}}function fht(){return new uht}let dht=class extends Error{name="UnexpectedEOFError";code="ERR_UNEXPECTED_EOF"};class hht extends Error{code;constructor(e,r){super(e),this.code=r}}let pht=class extends hht{type;constructor(e){super(e,"ABORT_ERR"),this.type="aborted",this.name="AbortError"}};function B6(t,e){const r=fht();t.sink(r).catch(async a=>{await r.end(a)}),t.sink=async a=>{for await(const o of a)await r.push(o);await r.end()};let n=t.source;t.source[Symbol.iterator]!=null?n=t.source[Symbol.iterator]():t.source[Symbol.asyncIterator]!=null&&(n=t.source[Symbol.asyncIterator]());const i=new cr;return{read:async(a,o)=>{o?.signal?.throwIfAborted();let c;const u=new Promise((l,f)=>{c=()=>{f(new pht("Read aborted"))},o?.signal?.addEventListener("abort",c)});try{if(a==null){const{done:f,value:d}=await Promise.race([n.next(),u]);return f===!0?new cr:d}for(;i.byteLength<a;){const{value:f,done:d}=await Promise.race([n.next(),u]);if(d===!0)throw new dht("unexpected end of input");i.append(f)}const l=i.sublist(0,a);return i.consume(a),l}finally{c!=null&&o?.signal?.removeEventListener("abort",c)}},write:async(a,o)=>{o?.signal?.throwIfAborted(),a instanceof Uint8Array?await r.push(a,o):await r.push(a.subarray(),o)},unwrap:()=>{if(i.byteLength>0){const a=t.source;t.source=async function*(){e?.yieldBytes===!1?yield i:yield*i,yield*a}()}return t}}}let mht=class extends Error{name="InvalidMessageLengthError";code="ERR_INVALID_MSG_LENGTH"},ght=class extends Error{name="InvalidDataLengthError";code="ERR_MSG_DATA_TOO_LONG"},vht=class extends Error{name="InvalidDataLengthLengthError";code="ERR_MSG_LENGTH_TOO_LONG"};function Ep(t,e={}){const r=B6(t,e);e.maxDataLength!=null&&e.maxLengthLength==null&&(e.maxLengthLength=vn(e.maxDataLength));const n=e?.lengthDecoder??kl,i=e?.lengthEncoder??Ds;return{read:async a=>{let o=-1;const c=new cr;for(;;){c.append(await r.read(1,a));try{o=n(c)}catch(u){if(u instanceof RangeError)continue;throw u}if(o<0)throw new mht("Invalid message length");if(e?.maxLengthLength!=null&&c.byteLength>e.maxLengthLength)throw new vht("message length length too long");if(o>-1)break}if(e?.maxDataLength!=null&&o>e.maxDataLength)throw new ght("message length too long");return r.read(o,a)},write:async(a,o)=>{await r.write(new cr(i(a.byteLength),a),o)},writeV:async(a,o)=>{const c=new cr(...a.flatMap(u=>[i(u.byteLength),u]));await r.write(c,o)},unwrap:()=>r.unwrap()}}function HY(){const t=sr();let e=!1;return{sink:async r=>{if(e)throw new Error("already piped");e=!0,t.resolve(r)},source:async function*(){yield*await t.promise}()}}function yht(){const t=HY(),e=HY();return[{source:t.source,sink:e.sink},{source:e.source,sink:t.sink}]}const ny=65535,WY=ny-16,b2=!!globalThis.process?.env?.DUMP_SESSION_KEYS;function tA(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function zhe(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function $a(t,...e){if(!zhe(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function GY(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function bht(t,e){$a(t);const r=e.outputLen;if(t.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}function KY(t){if(typeof t!="boolean")throw new Error(`boolean expected, not ${t}`)}/*! noble-ciphers - MIT License (c) 2023 Paul Miller (paulmillr.com) */const qf=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4)),wht=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),_ht=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!_ht)throw new Error("Non little-endian hardware is not supported");function xht(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function wP(t){if(typeof t=="string")t=xht(t);else if(zhe(t))t=_P(t);else throw new Error("Uint8Array expected, got "+typeof t);return t}function Sht(t,e){if(e==null||typeof e!="object")throw new Error("options must be defined");return Object.assign(t,e)}function Eht(t,e){if(t.length!==e.length)return!1;let r=0;for(let n=0;n<t.length;n++)r|=t[n]^e[n];return r===0}const kht=(t,e)=>{function r(n,...i){if($a(n),t.nonceLength!==void 0){const l=i[0];if(!l)throw new Error("nonce / iv required");t.varSizeNonce?$a(l):$a(l,t.nonceLength)}const s=t.tagLength;s&&i[1]!==void 0&&$a(i[1]);const a=e(n,...i),o=(l,f)=>{if(f!==void 0){if(l!==2)throw new Error("cipher output not supported");$a(f)}};let c=!1;return{encrypt(l,f){if(c)throw new Error("cannot encrypt() twice with same key + nonce");return c=!0,$a(l),o(a.encrypt.length,f),a.encrypt(l,f)},decrypt(l,f){if($a(l),s&&l.length<s)throw new Error("invalid ciphertext length: smaller than tagLength="+s);return o(a.decrypt.length,f),a.decrypt(l,f)}}}return Object.assign(r,t),r};function XY(t,e,r=!0){if(e===void 0)return new Uint8Array(t);if(e.length!==t)throw new Error("invalid output length, expected "+t+", got: "+e.length);if(r&&!Tht(e))throw new Error("invalid output, must be aligned");return e}function YY(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);const i=BigInt(32),s=BigInt(4294967295),a=Number(r>>i&s),o=Number(r&s),c=4,u=0;t.setUint32(e+c,a,n),t.setUint32(e+u,o,n)}function Tht(t){return t.byteOffset%4===0}function _P(t){return Uint8Array.from(t)}function kp(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}const Hhe=t=>Uint8Array.from(t.split("").map(e=>e.charCodeAt(0))),Aht=Hhe("expand 16-byte k"),Cht=Hhe("expand 32-byte k"),Iht=qf(Aht),Pht=qf(Cht);function Mr(t,e){return t<<e|t>>>32-e}function xP(t){return t.byteOffset%4===0}const Vw=64,Rht=16,Whe=2**32-1,ZY=new Uint32Array;function Oht(t,e,r,n,i,s,a,o){const c=i.length,u=new Uint8Array(Vw),l=qf(u),f=xP(i)&&xP(s),d=f?qf(i):ZY,h=f?qf(s):ZY;for(let m=0;m<c;a++){if(t(e,r,n,l,a,o),a>=Whe)throw new Error("arx: counter overflow");const p=Math.min(Vw,c-m);if(f&&p===Vw){const g=m/4;if(m%4!==0)throw new Error("arx: invalid block position");for(let v=0,y;v<Rht;v++)y=g+v,h[y]=d[y]^l[v];m+=Vw;continue}for(let g=0,v;g<p;g++)v=m+g,s[v]=i[v]^u[g];m+=p}}function Bht(t,e){const{allowShortKeys:r,extendNonceFn:n,counterLength:i,counterRight:s,rounds:a}=Sht({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},e);if(typeof t!="function")throw new Error("core must be a function");return tA(i),tA(a),KY(s),KY(r),(o,c,u,l,f=0)=>{$a(o),$a(c),$a(u);const d=u.length;if(l===void 0&&(l=new Uint8Array(d)),$a(l),tA(f),f<0||f>=Whe)throw new Error("arx: counter overflow");if(l.length<d)throw new Error(`arx: output (${l.length}) is shorter than data (${d})`);const h=[];let m=o.length,p,g;if(m===32)h.push(p=_P(o)),g=Pht;else if(m===16&&r)p=new Uint8Array(32),p.set(o),p.set(o,16),g=Iht,h.push(p);else throw new Error(`arx: invalid 32-byte key, got length=${m}`);xP(c)||h.push(c=_P(c));const v=qf(p);if(n){if(c.length!==24)throw new Error("arx: extended nonce must be 24 bytes");n(g,v,qf(c.subarray(0,16)),v),c=c.subarray(16)}const y=16-i;if(y!==c.length)throw new Error(`arx: nonce must be ${y} or 16 bytes`);if(y!==12){const _=new Uint8Array(12);_.set(c,s?0:12-c.length),c=_,h.push(c)}const b=qf(c);return Oht(t,g,v,b,u,l,f,a),kp(...h),l}}const rs=(t,e)=>t[e++]&255|(t[e++]&255)<<8;class Dht{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,e=wP(e),$a(e,32);const r=rs(e,0),n=rs(e,2),i=rs(e,4),s=rs(e,6),a=rs(e,8),o=rs(e,10),c=rs(e,12),u=rs(e,14);this.r[0]=r&8191,this.r[1]=(r>>>13|n<<3)&8191,this.r[2]=(n>>>10|i<<6)&7939,this.r[3]=(i>>>7|s<<9)&8191,this.r[4]=(s>>>4|a<<12)&255,this.r[5]=a>>>1&8190,this.r[6]=(a>>>14|o<<2)&8191,this.r[7]=(o>>>11|c<<5)&8065,this.r[8]=(c>>>8|u<<8)&8191,this.r[9]=u>>>5&127;for(let l=0;l<8;l++)this.pad[l]=rs(e,16+2*l)}process(e,r,n=!1){const i=n?0:2048,{h:s,r:a}=this,o=a[0],c=a[1],u=a[2],l=a[3],f=a[4],d=a[5],h=a[6],m=a[7],p=a[8],g=a[9],v=rs(e,r+0),y=rs(e,r+2),b=rs(e,r+4),_=rs(e,r+6),x=rs(e,r+8),E=rs(e,r+10),k=rs(e,r+12),B=rs(e,r+14);let D=s[0]+(v&8191),z=s[1]+((v>>>13|y<<3)&8191),U=s[2]+((y>>>10|b<<6)&8191),S=s[3]+((b>>>7|_<<9)&8191),T=s[4]+((_>>>4|x<<12)&8191),w=s[5]+(x>>>1&8191),A=s[6]+((x>>>14|E<<2)&8191),F=s[7]+((E>>>11|k<<5)&8191),P=s[8]+((k>>>8|B<<8)&8191),O=s[9]+(B>>>5|i),R=0,I=R+D*o+z*(5*g)+U*(5*p)+S*(5*m)+T*(5*h);R=I>>>13,I&=8191,I+=w*(5*d)+A*(5*f)+F*(5*l)+P*(5*u)+O*(5*c),R+=I>>>13,I&=8191;let C=R+D*c+z*o+U*(5*g)+S*(5*p)+T*(5*m);R=C>>>13,C&=8191,C+=w*(5*h)+A*(5*d)+F*(5*f)+P*(5*l)+O*(5*u),R+=C>>>13,C&=8191;let M=R+D*u+z*c+U*o+S*(5*g)+T*(5*p);R=M>>>13,M&=8191,M+=w*(5*m)+A*(5*h)+F*(5*d)+P*(5*f)+O*(5*l),R+=M>>>13,M&=8191;let L=R+D*l+z*u+U*c+S*o+T*(5*g);R=L>>>13,L&=8191,L+=w*(5*p)+A*(5*m)+F*(5*h)+P*(5*d)+O*(5*f),R+=L>>>13,L&=8191;let N=R+D*f+z*l+U*u+S*c+T*o;R=N>>>13,N&=8191,N+=w*(5*g)+A*(5*p)+F*(5*m)+P*(5*h)+O*(5*d),R+=N>>>13,N&=8191;let H=R+D*d+z*f+U*l+S*u+T*c;R=H>>>13,H&=8191,H+=w*o+A*(5*g)+F*(5*p)+P*(5*m)+O*(5*h),R+=H>>>13,H&=8191;let W=R+D*h+z*d+U*f+S*l+T*u;R=W>>>13,W&=8191,W+=w*c+A*o+F*(5*g)+P*(5*p)+O*(5*m),R+=W>>>13,W&=8191;let q=R+D*m+z*h+U*d+S*f+T*l;R=q>>>13,q&=8191,q+=w*u+A*c+F*o+P*(5*g)+O*(5*p),R+=q>>>13,q&=8191;let G=R+D*p+z*m+U*h+S*d+T*f;R=G>>>13,G&=8191,G+=w*l+A*u+F*c+P*o+O*(5*g),R+=G>>>13,G&=8191;let Y=R+D*g+z*p+U*m+S*h+T*d;R=Y>>>13,Y&=8191,Y+=w*f+A*l+F*u+P*c+O*o,R+=Y>>>13,Y&=8191,R=(R<<2)+R|0,R=R+I|0,I=R&8191,R=R>>>13,C+=R,s[0]=I,s[1]=C,s[2]=M,s[3]=L,s[4]=N,s[5]=H,s[6]=W,s[7]=q,s[8]=G,s[9]=Y}finalize(){const{h:e,pad:r}=this,n=new Uint16Array(10);let i=e[1]>>>13;e[1]&=8191;for(let o=2;o<10;o++)e[o]+=i,i=e[o]>>>13,e[o]&=8191;e[0]+=i*5,i=e[0]>>>13,e[0]&=8191,e[1]+=i,i=e[1]>>>13,e[1]&=8191,e[2]+=i,n[0]=e[0]+5,i=n[0]>>>13,n[0]&=8191;for(let o=1;o<10;o++)n[o]=e[o]+i,i=n[o]>>>13,n[o]&=8191;n[9]-=8192;let s=(i^1)-1;for(let o=0;o<10;o++)n[o]&=s;s=~s;for(let o=0;o<10;o++)e[o]=e[o]&s|n[o];e[0]=(e[0]|e[1]<<13)&65535,e[1]=(e[1]>>>3|e[2]<<10)&65535,e[2]=(e[2]>>>6|e[3]<<7)&65535,e[3]=(e[3]>>>9|e[4]<<4)&65535,e[4]=(e[4]>>>12|e[5]<<1|e[6]<<14)&65535,e[5]=(e[6]>>>2|e[7]<<11)&65535,e[6]=(e[7]>>>5|e[8]<<8)&65535,e[7]=(e[8]>>>8|e[9]<<5)&65535;let a=e[0]+r[0];e[0]=a&65535;for(let o=1;o<8;o++)a=(e[o]+r[o]|0)+(a>>>16)|0,e[o]=a&65535;kp(n)}update(e){GY(this);const{buffer:r,blockLen:n}=this;e=wP(e);const i=e.length;for(let s=0;s<i;){const a=Math.min(n-this.pos,i-s);if(a===n){for(;n<=i-s;s+=n)this.process(e,s);continue}r.set(e.subarray(s,s+a),this.pos),this.pos+=a,s+=a,this.pos===n&&(this.process(r,0,!1),this.pos=0)}return this}destroy(){kp(this.h,this.r,this.buffer,this.pad)}digestInto(e){GY(this),bht(e,this),this.finished=!0;const{buffer:r,h:n}=this;let{pos:i}=this;if(i){for(r[i++]=1;i<16;i++)r[i]=0;this.process(r,0,!0)}this.finalize();let s=0;for(let a=0;a<8;a++)e[s++]=n[a]>>>0,e[s++]=n[a]>>>8;return e}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const n=e.slice(0,r);return this.destroy(),n}}function Mht(t){const e=(n,i)=>t(i).update(wP(n)).digest(),r=t(new Uint8Array(32));return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=n=>t(n),e}const Nht=Mht(t=>new Dht(t));function Fht(t,e,r,n,i,s=20){let a=t[0],o=t[1],c=t[2],u=t[3],l=e[0],f=e[1],d=e[2],h=e[3],m=e[4],p=e[5],g=e[6],v=e[7],y=i,b=r[0],_=r[1],x=r[2],E=a,k=o,B=c,D=u,z=l,U=f,S=d,T=h,w=m,A=p,F=g,P=v,O=y,R=b,I=_,C=x;for(let L=0;L<s;L+=2)E=E+z|0,O=Mr(O^E,16),w=w+O|0,z=Mr(z^w,12),E=E+z|0,O=Mr(O^E,8),w=w+O|0,z=Mr(z^w,7),k=k+U|0,R=Mr(R^k,16),A=A+R|0,U=Mr(U^A,12),k=k+U|0,R=Mr(R^k,8),A=A+R|0,U=Mr(U^A,7),B=B+S|0,I=Mr(I^B,16),F=F+I|0,S=Mr(S^F,12),B=B+S|0,I=Mr(I^B,8),F=F+I|0,S=Mr(S^F,7),D=D+T|0,C=Mr(C^D,16),P=P+C|0,T=Mr(T^P,12),D=D+T|0,C=Mr(C^D,8),P=P+C|0,T=Mr(T^P,7),E=E+U|0,C=Mr(C^E,16),F=F+C|0,U=Mr(U^F,12),E=E+U|0,C=Mr(C^E,8),F=F+C|0,U=Mr(U^F,7),k=k+S|0,O=Mr(O^k,16),P=P+O|0,S=Mr(S^P,12),k=k+S|0,O=Mr(O^k,8),P=P+O|0,S=Mr(S^P,7),B=B+T|0,R=Mr(R^B,16),w=w+R|0,T=Mr(T^w,12),B=B+T|0,R=Mr(R^B,8),w=w+R|0,T=Mr(T^w,7),D=D+z|0,I=Mr(I^D,16),A=A+I|0,z=Mr(z^A,12),D=D+z|0,I=Mr(I^D,8),A=A+I|0,z=Mr(z^A,7);let M=0;n[M++]=a+E|0,n[M++]=o+k|0,n[M++]=c+B|0,n[M++]=u+D|0,n[M++]=l+z|0,n[M++]=f+U|0,n[M++]=d+S|0,n[M++]=h+T|0,n[M++]=m+w|0,n[M++]=p+A|0,n[M++]=g+F|0,n[M++]=v+P|0,n[M++]=y+O|0,n[M++]=b+R|0,n[M++]=_+I|0,n[M++]=x+C|0}const Lht=Bht(Fht,{counterRight:!1,counterLength:4,allowShortKeys:!1}),$ht=new Uint8Array(16),JY=(t,e)=>{t.update(e);const r=e.length%16;r&&t.update($ht.subarray(r))},Uht=new Uint8Array(32);function QY(t,e,r,n,i){const s=t(e,r,Uht),a=Nht.create(s);i&&JY(a,i),JY(a,n);const o=new Uint8Array(16),c=wht(o);YY(c,0,BigInt(i?i.length:0),!0),YY(c,8,BigInt(n.length),!0),a.update(o);const u=a.digest();return kp(s,o),u}const jht=t=>(e,r,n)=>({encrypt(s,a){const o=s.length;a=XY(o+16,a,!1),a.set(s);const c=a.subarray(0,-16);t(e,r,c,c,1);const u=QY(t,e,r,c,n);return a.set(u,o),kp(u),a},decrypt(s,a){a=XY(s.length-16,a,!1);const o=s.subarray(0,-16),c=s.subarray(-16),u=QY(t,e,r,o,n);if(!Eht(c,u))throw new Error("invalid tag");return a.set(s.subarray(0,-16)),t(e,r,a,a,1),kp(u),a}}),eZ=kht({blockSize:64,nonceLength:12,tagLength:16},jht(Lht));function Vht(t,e,r){return d5(t),r===void 0&&(r=new Uint8Array(t.outputLen)),Wy(t,Lh(r),Lh(e))}const rA=new Uint8Array([0]),tZ=new Uint8Array;function qht(t,e,r,n=32){if(d5(t),D1(n),n>255*t.outputLen)throw new Error("Length should be <= 255*HashLen");const i=Math.ceil(n/t.outputLen);r===void 0&&(r=tZ);const s=new Uint8Array(i*t.outputLen),a=Wy.create(t,e),o=a._cloneInto(),c=new Uint8Array(a.outputLen);for(let u=0;u<i;u++)rA[0]=u+1,o.update(u===0?tZ:c).update(r).update(rA).digestInto(c),s.set(c,t.outputLen*u),a._cloneInto(o);return a.destroy(),o.destroy(),c.fill(0),rA.fill(0),s.slice(0,n)}const zht={hashSHA256(t){return $f(t.subarray())},getHKDF(t,e){const r=Vht($f,e,t),i=qht($f,r,void 0,96),s=i.subarray(0,32),a=i.subarray(32,64),o=i.subarray(64,96);return[s,a,o]},generateX25519KeyPair(){const t=cb.utils.randomPrivateKey();return{publicKey:cb.getPublicKey(t),privateKey:t}},generateX25519KeyPairFromSeed(t){return{publicKey:cb.getPublicKey(t),privateKey:t}},generateX25519SharedKey(t,e){return cb.getSharedSecret(t.subarray(),e.subarray())},chaCha20Poly1305Encrypt(t,e,r,n){return eZ(n,e,r).encrypt(t.subarray())},chaCha20Poly1305Decrypt(t,e,r,n,i){return eZ(n,e,r).decrypt(t.subarray(),i)}},Hht=zht;function Wht(t){return{generateKeypair:t.generateX25519KeyPair,dh:(e,r)=>t.generateX25519SharedKey(e.privateKey,r).subarray(0,32),encrypt:t.chaCha20Poly1305Encrypt,decrypt:t.chaCha20Poly1305Decrypt,hash:t.hashSHA256,hkdf:t.getHKDF}}const D6=t=>{const e=Ea(2);return e[0]=t>>8,e[1]=t,e};D6.bytes=2;const P3=t=>{if(t.length<2)throw RangeError("Could not decode int16BE");if(t instanceof Uint8Array){let e=0;return e+=t[0]<<8,e+=t[1],e}return t.getUint16(0)};P3.bytes=2;function Ght(t){return{xxHandshakeSuccesses:t.registerCounter("libp2p_noise_xxhandshake_successes_total",{help:"Total count of noise xxHandshakes successes_"}),xxHandshakeErrors:t.registerCounter("libp2p_noise_xxhandshake_error_total",{help:"Total count of noise xxHandshakes errors"}),encryptedPackets:t.registerCounter("libp2p_noise_encrypted_packets_total",{help:"Total count of noise encrypted packets successfully"}),decryptedPackets:t.registerCounter("libp2p_noise_decrypted_packets_total",{help:"Total count of noise decrypted packets"}),decryptErrors:t.registerCounter("libp2p_noise_decrypt_errors_total",{help:"Total count of noise decrypt errors"})}}function Ghe(t,e){!e.enabled||!b2||(t?(e(`LOCAL_STATIC_PUBLIC_KEY ${nt(t.publicKey,"hex")}`),e(`LOCAL_STATIC_PRIVATE_KEY ${nt(t.privateKey,"hex")}`)):e("Missing local static keys."))}function Khe(t,e){!e.enabled||!b2||(t?(e(`LOCAL_PUBLIC_EPHEMERAL_KEY ${nt(t.publicKey,"hex")}`),e(`LOCAL_PRIVATE_EPHEMERAL_KEY ${nt(t.privateKey,"hex")}`)):e("Missing local ephemeral keys."))}function Kht(t,e){!e.enabled||!b2||e(t?`REMOTE_STATIC_PUBLIC_KEY ${nt(t.subarray(),"hex")}`:"Missing remote static public key.")}function Xhe(t,e){!e.enabled||!b2||e(t?`REMOTE_EPHEMERAL_PUBLIC_KEY ${nt(t.subarray(),"hex")}`:"Missing remote ephemeral keys.")}function Yhe(t,e,r){!r.enabled||!b2||(r(`CIPHER_STATE_1 ${t.n.getUint64()} ${t.k&&nt(t.k,"hex")}`),r(`CIPHER_STATE_2 ${e.n.getUint64()} ${e.k&&nt(e.k,"hex")}`))}class Hg extends Error{code;constructor(e="Invalid crypto exchange"){super(e),this.code=Hg.code}static code="ERR_INVALID_CRYPTO_EXCHANGE"}const Xht=0,Yht=4294967295,Zht="Cipherstate has reached maximum n, a new handshake must be performed";class Jht{n;bytes;view;constructor(e=Xht){this.n=e,this.bytes=yr(12),this.view=new DataView(this.bytes.buffer,this.bytes.byteOffset,this.bytes.byteLength),this.view.setUint32(4,e,!0)}increment(){this.n++,this.view.setUint32(4,this.n,!0)}getBytes(){return this.bytes}getUint64(){return this.n}assertValue(){if(this.n>Yht)throw new Error(Zht)}}const $1=yr(0);class qw{k;n;crypto;constructor(e,r=void 0,n=0){this.crypto=e,this.k=r,this.n=new Jht(n)}hasKey(){return!!this.k}encryptWithAd(e,r){if(!this.hasKey())return r;this.n.assertValue();const n=this.crypto.encrypt(r,this.n.getBytes(),e,this.k);return this.n.increment(),n}decryptWithAd(e,r,n){if(!this.hasKey())return r;this.n.assertValue();const i=this.crypto.decrypt(r,this.n.getBytes(),e,this.k,n);return this.n.increment(),i}}class Qht{cs;ck;h;crypto;constructor(e,r){this.crypto=e;const n=tt(r,"utf-8");this.h=t0t(e,n),this.ck=this.h,this.cs=new qw(e)}mixKey(e){const[r,n]=this.crypto.hkdf(this.ck,e);this.ck=r,this.cs=new qw(this.crypto,n)}mixHash(e){this.h=this.crypto.hash(new cr(this.h,e))}encryptAndHash(e){const r=this.cs.encryptWithAd(this.h,e);return this.mixHash(r),r}decryptAndHash(e){const r=this.cs.decryptWithAd(this.h,e);return this.mixHash(e),r}split(){const[e,r]=this.crypto.hkdf(this.ck,$1);return[new qw(this.crypto,e),new qw(this.crypto,r)]}}class e0t{ss;s;e;rs;re;initiator;crypto;constructor(e){const{crypto:r,protocolName:n,prologue:i,initiator:s,s:a,e:o,rs:c,re:u}=e;this.crypto=r,this.ss=new Qht(r,n),this.ss.mixHash(i),this.initiator=s,this.s=a,this.e=o,this.rs=c,this.re=u}writeE(){if(this.e)throw new Error("ephemeral keypair is already set");const e=this.crypto.generateKeypair();return this.ss.mixHash(e.publicKey),this.e=e,e.publicKey}writeS(){if(!this.s)throw new Error("static keypair is not set");return this.ss.encryptAndHash(this.s.publicKey)}writeEE(){if(!this.e)throw new Error("ephemeral keypair is not set");if(!this.re)throw new Error("remote ephemeral public key is not set");this.ss.mixKey(this.crypto.dh(this.e,this.re))}writeES(){if(this.initiator){if(!this.e)throw new Error("ephemeral keypair is not set");if(!this.rs)throw new Error("remote static public key is not set");this.ss.mixKey(this.crypto.dh(this.e,this.rs))}else{if(!this.s)throw new Error("static keypair is not set");if(!this.re)throw new Error("remote ephemeral public key is not set");this.ss.mixKey(this.crypto.dh(this.s,this.re))}}writeSE(){if(this.initiator){if(!this.s)throw new Error("static keypair is not set");if(!this.re)throw new Error("remote ephemeral public key is not set");this.ss.mixKey(this.crypto.dh(this.s,this.re))}else{if(!this.e)throw new Error("ephemeral keypair is not set");if(!this.rs)throw new Error("remote static public key is not set");this.ss.mixKey(this.crypto.dh(this.e,this.rs))}}readE(e,r=0){if(this.re)throw new Error("remote ephemeral public key is already set");if(e.byteLength<r+32)throw new Error("message is not long enough");this.re=e.sublist(r,r+32),this.ss.mixHash(this.re)}readS(e,r=0){if(this.rs)throw new Error("remote static public key is already set");const n=32+(this.ss.cs.hasKey()?16:0);if(e.byteLength<r+n)throw new Error("message is not long enough");const i=e.sublist(r,r+n);return this.rs=this.ss.decryptAndHash(i),n}readEE(){this.writeEE()}readES(){this.writeES()}readSE(){this.writeSE()}}class Zhe extends e0t{writeMessageA(e){return new cr(this.writeE(),this.ss.encryptAndHash(e))}writeMessageB(e){const r=this.writeE();this.writeEE();const n=this.writeS();return this.writeES(),new cr(r,n,this.ss.encryptAndHash(e))}writeMessageC(e){const r=this.writeS();return this.writeSE(),new cr(r,this.ss.encryptAndHash(e))}readMessageA(e){try{return this.readE(e),this.ss.decryptAndHash(e.sublist(32))}catch(r){throw new Hg(`handshake stage 0 validation fail: ${r.message}`)}}readMessageB(e){try{this.readE(e),this.readEE();const r=this.readS(e,32);return this.readES(),this.ss.decryptAndHash(e.sublist(32+r))}catch(r){throw new Hg(`handshake stage 1 validation fail: ${r.message}`)}}readMessageC(e){try{const r=this.readS(e);return this.readSE(),this.ss.decryptAndHash(e.sublist(r))}catch(r){throw new Hg(`handshake stage 2 validation fail: ${r.message}`)}}}function t0t(t,e){if(e.length<=32){const r=yr(32);return r.set(e),r}else return t.hash(e)}var M6;(function(t){let e;t.codec=()=>(e==null&&(e=Ot((r,n,i={})=>{if(i.lengthDelimited!==!1&&n.fork(),r.webtransportCerthashes!=null)for(const s of r.webtransportCerthashes)n.uint32(10),n.bytes(s);if(r.streamMuxers!=null)for(const s of r.streamMuxers)n.uint32(18),n.string(s);i.lengthDelimited!==!1&&n.ldelim()},(r,n,i={})=>{const s={webtransportCerthashes:[],streamMuxers:[]},a=n==null?r.len:r.pos+n;for(;r.pos<a;){const o=r.uint32();switch(o>>>3){case 1:{if(i.limits?.webtransportCerthashes!=null&&s.webtransportCerthashes.length===i.limits.webtransportCerthashes)throw new rn('Decode error - map field "webtransportCerthashes" had too many elements');s.webtransportCerthashes.push(r.bytes());break}case 2:{if(i.limits?.streamMuxers!=null&&s.streamMuxers.length===i.limits.streamMuxers)throw new rn('Decode error - map field "streamMuxers" had too many elements');s.streamMuxers.push(r.string());break}default:{r.skipType(o&7);break}}}return s})),e),t.encode=r=>Rt(r,t.codec()),t.decode=(r,n)=>Pt(r,t.codec(),n)})(M6||(M6={}));var N6;(function(t){let e;t.codec=()=>(e==null&&(e=Ot((r,n,i={})=>{i.lengthDelimited!==!1&&n.fork(),r.identityKey!=null&&r.identityKey.byteLength>0&&(n.uint32(10),n.bytes(r.identityKey)),r.identitySig!=null&&r.identitySig.byteLength>0&&(n.uint32(18),n.bytes(r.identitySig)),r.extensions!=null&&(n.uint32(34),M6.codec().encode(r.extensions,n)),i.lengthDelimited!==!1&&n.ldelim()},(r,n,i={})=>{const s={identityKey:yr(0),identitySig:yr(0)},a=n==null?r.len:r.pos+n;for(;r.pos<a;){const o=r.uint32();switch(o>>>3){case 1:{s.identityKey=r.bytes();break}case 2:{s.identitySig=r.bytes();break}case 4:{s.extensions=M6.codec().decode(r,r.uint32(),{limits:i.limits?.extensions});break}default:{r.skipType(o&7);break}}}return s})),e),t.encode=r=>Rt(r,t.codec()),t.decode=(r,n)=>Pt(r,t.codec(),n)})(N6||(N6={}));async function Jhe(t,e,r){const n=await t.sign(e0e(e));return N6.encode({identityKey:Ya(t.publicKey),identitySig:n,extensions:r})}async function Qhe(t,e,r){try{const n=N6.decode(t),i=na(n.identityKey);if(r?.equals(i)===!1)throw new Error(`Payload identity key ${i} does not match expected remote identity key ${r}`);if(!e)throw new Error("Remote static does not exist");const s=e0e(e);if(!await i.verify(s,n.identitySig))throw new Error("Invalid payload signature");return n}catch(n){throw new p6e(n.message)}}function e0e(t){const e=tt("noise-libp2p-static-key:");return t instanceof Uint8Array?qn([e,t],e.length+t.length):(t.prepend(e),t)}async function r0t(t,e){const{log:r,connection:n,crypto:i,privateKey:s,prologue:a,s:o,remoteIdentityKey:c,extensions:u}=t,l=await Jhe(s,o.publicKey,u),f=new Zhe({crypto:i,protocolName:"Noise_XX_25519_ChaChaPoly_SHA256",initiator:!0,prologue:a,s:o});Ghe(f.s,r),r.trace("Stage 0 - Initiator starting to send first message."),await n.write(f.writeMessageA($1),e),r.trace("Stage 0 - Initiator finished sending first message."),Khe(f.e,r),r.trace("Stage 1 - Initiator waiting to receive first message from responder...");const d=f.readMessageB(await n.read(e));r.trace("Stage 1 - Initiator received the message."),Xhe(f.re,r),Kht(f.rs,r),r.trace("Initiator going to check remote's signature...");const h=await Qhe(d,f.rs,c);r.trace("All good with the signature!"),r.trace("Stage 2 - Initiator sending third handshake message."),await n.write(f.writeMessageC(l),e),r.trace("Stage 2 - Initiator sent message with signed payload.");const[m,p]=f.ss.split();return Yhe(m,p,r),{payload:h,encrypt:g=>m.encryptWithAd($1,g),decrypt:(g,v)=>p.decryptWithAd($1,g,v)}}async function n0t(t,e){const{log:r,connection:n,crypto:i,privateKey:s,prologue:a,s:o,remoteIdentityKey:c,extensions:u}=t,l=await Jhe(s,o.publicKey,u),f=new Zhe({crypto:i,protocolName:"Noise_XX_25519_ChaChaPoly_SHA256",initiator:!1,prologue:a,s:o});Ghe(f.s,r),r.trace("Stage 0 - Responder waiting to receive first message."),f.readMessageA(await n.read(e)),r.trace("Stage 0 - Responder received first message."),Xhe(f.re,r),r.trace("Stage 1 - Responder sending out first message with signed payload and static key."),await n.write(f.writeMessageB(l),e),r.trace("Stage 1 - Responder sent the second handshake message with signed payload."),Khe(f.e,r),r.trace("Stage 2 - Responder waiting for third handshake message...");const d=f.readMessageC(await n.read(e));r.trace("Stage 2 - Responder received the message, finished handshake.");const h=await Qhe(d,f.rs,c),[m,p]=f.ss.split();return Yhe(m,p,r),{payload:h,encrypt:g=>p.encryptWithAd($1,g),decrypt:(g,v)=>m.decryptWithAd($1,g,v)}}const rZ=16;function i0t(t,e){return async function*(r){for await(const n of r)for(let i=0;i<n.length;i+=WY){let s=i+WY;s>n.length&&(s=n.length);let a;n instanceof Uint8Array?a=t.encrypt(n.subarray(i,s)):a=t.encrypt(n.sublist(i,s)),e?.encryptedPackets.increment(),yield new cr(D6(a.byteLength),a)}}}function s0t(t,e){return async function*(r){for await(const n of r)for(let i=0;i<n.length;i+=ny){let s=i+ny;if(s>n.length&&(s=n.length),s-rZ<i)throw new Error("Invalid chunk");const a=n.sublist(i,s),o=n.subarray(i,s-rZ);try{const c=t.decrypt(a,o);e?.decryptedPackets.increment(),yield c}catch(c){throw e?.decryptErrors.increment(),c}}}}class a0t{protocol="/noise";crypto;prologue;staticKey;extensions;metrics;components;constructor(e,r={}){const{staticNoiseKey:n,extensions:i,crypto:s,prologueBytes:a}=r,{metrics:o}=e;this.components=e;const c=s??Hht;this.crypto=Wht(c),this.extensions={webtransportCerthashes:[],...i},this.metrics=o?Ght(o):void 0,n?this.staticKey=c.generateX25519KeyPairFromSeed(n):this.staticKey=c.generateX25519KeyPair(),this.prologue=a??yr(0)}[Symbol.toStringTag]="@chainsafe/libp2p-noise";[Ui]=["@libp2p/connection-encryption","@chainsafe/libp2p-noise"];async secureOutbound(e,r){const n=Ep(e,{lengthEncoder:D6,lengthDecoder:P3,maxDataLength:ny}),i=await this.performHandshakeInitiator(n,this.components.privateKey,r?.remotePeer?.publicKey,r),s=await this.createSecureConnection(n,i);e.source=s.source,e.sink=s.sink;const a=na(i.payload.identityKey);return{conn:e,remoteExtensions:i.payload.extensions,remotePeer:Yh(a),streamMuxer:this.getStreamMuxer(i.payload.extensions?.streamMuxers)}}getStreamMuxer(e){if(e==null)return;const r=this.components.upgrader.getStreamMuxers();if(r!=null)for(const n of e){const i=r.get(n);if(i!=null)return i}if(e.length)throw new ere("Early muxer negotiation was requested but the initiator and responder had no common muxers")}async secureInbound(e,r){const n=Ep(e,{lengthEncoder:D6,lengthDecoder:P3,maxDataLength:ny}),i=await this.performHandshakeResponder(n,this.components.privateKey,r?.remotePeer?.publicKey,r),s=await this.createSecureConnection(n,i);e.source=s.source,e.sink=s.sink;const a=na(i.payload.identityKey);return{conn:e,remoteExtensions:i.payload.extensions,remotePeer:Yh(a),streamMuxer:this.getStreamMuxer(i.payload.extensions?.streamMuxers)}}async performHandshakeInitiator(e,r,n,i){let s;try{s=await r0t({connection:e,privateKey:r,remoteIdentityKey:n,log:this.components.logger.forComponent("libp2p:noise:xxhandshake"),crypto:this.crypto,prologue:this.prologue,s:this.staticKey,extensions:{streamMuxers:[...this.components.upgrader.getStreamMuxers().keys()],webtransportCerthashes:[],...this.extensions}},i),this.metrics?.xxHandshakeSuccesses.increment()}catch(a){throw this.metrics?.xxHandshakeErrors.increment(),a}return s}async performHandshakeResponder(e,r,n,i){let s;try{s=await n0t({connection:e,privateKey:r,remoteIdentityKey:n,log:this.components.logger.forComponent("libp2p:noise:xxhandshake"),crypto:this.crypto,prologue:this.prologue,s:this.staticKey,extensions:{streamMuxers:[...this.components.upgrader.getStreamMuxers().keys()],webtransportCerthashes:[],...this.extensions}},i),this.metrics?.xxHandshakeSuccesses.increment()}catch(a){throw this.metrics?.xxHandshakeErrors.increment(),a}return s}async createSecureConnection(e,r){const[n,i]=yht(),s=e.unwrap();return await Un(n,i0t(r,this.metrics),s,a=>Sp(a,{lengthDecoder:P3}),s0t(r,this.metrics),n),i}}function $0(t={}){return e=>new a0t(e,t)}function t0e(t){if(t!=null){if(typeof t[Symbol.iterator]=="function")return t[Symbol.iterator]();if(typeof t[Symbol.asyncIterator]=="function")return t[Symbol.asyncIterator]();if(typeof t.next=="function")return t}throw new Error("argument is not an iterator or iterable")}class _1 extends Error{static name="InvalidFrameError";constructor(e="The frame was invalid"){super(e),this.name="InvalidFrameError"}}class r0e extends Error{static name="UnrequestedPingError";constructor(e="Unrequested ping error"){super(e),this.name="UnrequestedPingError"}}class n0e extends Error{static name="NotMatchingPingError";constructor(e="Unrequested ping error"){super(e),this.name="NotMatchingPingError"}}class o0t extends Error{static name="InvalidStateError";constructor(e="Invalid state"){super(e),this.name="InvalidStateError"}}class c0t extends Error{static name="StreamAlreadyExistsError";constructor(e="Strean already exists"){super(e),this.name="StreamAlreadyExistsError"}}class l0t extends Error{static name="DecodeInvalidVersionError";constructor(e="Decode invalid version"){super(e),this.name="DecodeInvalidVersionError"}}class u0t extends Error{static name="BothClientsError";constructor(e="Both clients"){super(e),this.name="BothClientsError"}}class i0e extends Error{static name="ReceiveWindowExceededError";constructor(e="Receive window exceeded"){super(e),this.name="ReceiveWindowExceededError"}}const f0t=new Set([_1.name,r0e.name,n0e.name,c0t.name,l0t.name,u0t.name,i0e.name]),RM=256*1024,d0t=16*1024*1024,h0t={enableKeepAlive:!0,keepAliveInterval:3e4,maxInboundStreams:1e3,maxOutboundStreams:1e3,initialStreamWindowSize:RM,maxStreamWindowSize:d0t,maxMessageSize:64*1024};function p0t(t){if(t.keepAliveInterval<=0)throw new Ze("keep-alive interval must be positive");if(t.maxInboundStreams<0)throw new Ze("max inbound streams must be larger or equal 0");if(t.maxOutboundStreams<0)throw new Ze("max outbound streams must be larger or equal 0");if(t.initialStreamWindowSize<RM)throw new Ze("InitialStreamWindowSize must be larger or equal 256 kB");if(t.maxStreamWindowSize<t.initialStreamWindowSize)throw new Ze("MaxStreamWindowSize must be larger than the InitialStreamWindowSize");if(t.maxStreamWindowSize>2**32-1)throw new Ze("MaxStreamWindowSize must be less than equal MAX_UINT32");if(t.maxMessageSize<1024)throw new Ze("MaxMessageSize must be greater than a kilobyte")}var Ci;(function(t){t[t.Data=0]="Data",t[t.WindowUpdate=1]="WindowUpdate",t[t.Ping=2]="Ping",t[t.GoAway=3]="GoAway"})(Ci||(Ci={}));var Jn;(function(t){t[t.SYN=1]="SYN",t[t.ACK=2]="ACK",t[t.FIN=4]="FIN",t[t.RST=8]="RST"})(Jn||(Jn={}));Object.values(Jn).filter(t=>typeof t!="string");const m0t=0;var Kc;(function(t){t[t.NormalTermination=0]="NormalTermination",t[t.ProtocolError=1]="ProtocolError",t[t.InternalError=2]="InternalError"})(Kc||(Kc={}));const Wg=12,nZ=2**24;function g0t(t){if(t[0]!==m0t)throw new _1("Invalid frame version");return{type:t[1],flag:(t[2]<<8)+t[3],streamID:t[4]*nZ+(t[5]<<16)+(t[6]<<8)+t[7],length:t[8]*nZ+(t[9]<<16)+(t[10]<<8)+t[11]}}let v0t=class{source;buffer;frameInProgress;constructor(e){this.source=y0t(e),this.buffer=new cr,this.frameInProgress=!1}async*emitFrames(){for await(const e of this.source)for(this.buffer.append(e);;){const r=this.readHeader();if(r===void 0)break;const{type:n,length:i}=r;n===Ci.Data?(this.frameInProgress=!0,yield{header:r,readData:this.readBytes.bind(this,i)}):yield{header:r}}}readHeader(){if(this.frameInProgress)throw new o0t("decoding frame already in progress");if(this.buffer.length<Wg)return;const e=g0t(this.buffer.subarray(0,Wg));return this.buffer.consume(Wg),e}async readBytes(e){if(this.buffer.length<e){for await(const n of this.source)if(this.buffer.append(n),this.buffer.length>=e)break}const r=this.buffer.sublist(0,e);return this.buffer.consume(e),this.frameInProgress=!1,r}};function y0t(t){if(t[Symbol.iterator]!==void 0){const e=t[Symbol.iterator]();return e.return=void 0,{[Symbol.iterator](){return e}}}else if(t[Symbol.asyncIterator]!==void 0){const e=t[Symbol.asyncIterator]();return e.return=void 0,{[Symbol.asyncIterator](){return e}}}else throw new Error("a source must be either an iterable or an async iterable")}function iZ(t){const e=new Uint8Array(Wg);return e[1]=t.type,e[2]=t.flag>>>8,e[3]=t.flag,e[4]=t.streamID>>>24,e[5]=t.streamID>>>16,e[6]=t.streamID>>>8,e[7]=t.streamID,e[8]=t.length>>>24,e[9]=t.length>>>16,e[10]=t.length>>>8,e[11]=t.length,e}function b0t(t){return t==null?!1:typeof t.then=="function"&&typeof t.catch=="function"&&typeof t.finally=="function"}function s0e(t,e){const r=t0e(t).return?.();b0t(r)&&r.catch(n=>{e.error("could not cause iterator to return",n)})}const w0t=5e3;function nA(t){return t==null?!1:typeof t.then=="function"&&typeof t.catch=="function"&&typeof t.finally=="function"}class d_{id;direction;timeline;protocol;metadata;source;status;readStatus;writeStatus;log;sinkController;sinkEnd;closed;endErr;streamSource;onEnd;onCloseRead;onCloseWrite;onReset;onAbort;sendCloseWriteTimeout;sendingData;constructor(e){this.sinkController=new AbortController,this.sinkEnd=sr(),this.closed=sr(),this.log=e.log,this.status="open",this.readStatus="ready",this.writeStatus="ready",this.id=e.id,this.metadata=e.metadata??{},this.direction=e.direction,this.timeline={open:Date.now()},this.sendCloseWriteTimeout=e.sendCloseWriteTimeout??w0t,this.onEnd=e.onEnd,this.onCloseRead=e?.onCloseRead,this.onCloseWrite=e?.onCloseWrite,this.onReset=e?.onReset,this.onAbort=e?.onAbort,this.source=this.streamSource=Po({onEnd:r=>{r!=null?this.log.trace("source ended with error",r):this.log.trace("source ended"),this.onSourceEnd(r)}}),this.sink=this.sink.bind(this)}async sink(e){if(this.writeStatus!=="ready")throw new oC(`writable end state is "${this.writeStatus}" not "ready"`);try{this.writeStatus="writing";const r={signal:this.sinkController.signal};if(this.direction==="outbound"){const i=this.sendNewStream(r);nA(i)&&await i}const n=()=>{s0e(e,this.log)};try{this.sinkController.signal.addEventListener("abort",n),this.log.trace("sink reading from source");for await(let i of e){i=i instanceof Uint8Array?new cr(i):i;const s=this.sendData(i,r);nA(s)&&(this.sendingData=sr(),await s,this.sendingData.resolve(),this.sendingData=void 0)}}finally{this.sinkController.signal.removeEventListener("abort",n)}this.log.trace('sink finished reading from source, write status is "%s"',this.writeStatus),this.writeStatus==="writing"&&(this.writeStatus="closing",this.log.trace("send close write to remote"),await this.sendCloseWrite({signal:AbortSignal.timeout(this.sendCloseWriteTimeout)}),this.writeStatus="closed"),this.onSinkEnd()}catch(r){throw this.log.trace("sink ended with error, calling abort with error",r),this.abort(r),r}finally{this.log.trace("resolve sink end"),this.sinkEnd.resolve()}}onSourceEnd(e){this.timeline.closeRead==null&&(this.timeline.closeRead=Date.now(),this.readStatus="closed",e!=null&&this.endErr==null&&(this.endErr=e),this.onCloseRead?.(),this.timeline.closeWrite!=null?(this.log.trace("source and sink ended"),this.timeline.close=Date.now(),this.status!=="aborted"&&this.status!=="reset"&&(this.status="closed"),this.onEnd!=null&&this.onEnd(this.endErr),this.closed.resolve()):this.log.trace("source ended, waiting for sink to end"))}onSinkEnd(e){this.timeline.closeWrite==null&&(this.timeline.closeWrite=Date.now(),this.writeStatus="closed",e!=null&&this.endErr==null&&(this.endErr=e),this.onCloseWrite?.(),this.timeline.closeRead!=null?(this.log.trace("sink and source ended"),this.timeline.close=Date.now(),this.status!=="aborted"&&this.status!=="reset"&&(this.status="closed"),this.onEnd!=null&&this.onEnd(this.endErr),this.closed.resolve()):this.log.trace("sink ended, waiting for source to end"))}async close(e){this.status==="open"&&(this.log.trace("closing gracefully"),this.status="closing",await Mi(Promise.all([this.closeWrite(e),this.closeRead(e),this.closed.promise]),e?.signal),this.status="closed",this.log.trace("closed gracefully"))}async closeRead(e={}){if(this.readStatus==="closing"||this.readStatus==="closed")return;this.log.trace('closing readable end of stream with starting read status "%s"',this.readStatus);const r=this.readStatus;this.readStatus="closing",this.status!=="reset"&&this.status!=="aborted"&&this.timeline.closeRead==null&&(this.log.trace("send close read to remote"),await this.sendCloseRead(e)),r==="ready"&&(this.log.trace("ending internal source queue with %d queued bytes",this.streamSource.readableLength),this.streamSource.end()),this.log.trace("closed readable end of stream")}async closeWrite(e={}){this.writeStatus==="closing"||this.writeStatus==="closed"||(this.log.trace('closing writable end of stream with starting write status "%s"',this.writeStatus),this.writeStatus==="ready"&&(this.log.trace("sink was never sunk, sink an empty array"),await Mi(this.sink([]),e.signal)),this.writeStatus==="writing"&&(this.sendingData!=null&&await Mi(this.sendingData.promise,e.signal),this.log.trace("aborting source passed to .sink"),this.sinkController.abort(),await Mi(this.sinkEnd.promise,e.signal)),this.writeStatus="closed",this.log.trace("closed writable end of stream"))}abort(e){if(this.status==="closed"||this.status==="aborted"||this.status==="reset")return;this.log("abort with error",e),this.log("try to send reset to remote");const r=this.sendReset();nA(r)&&r.catch(n=>{this.log.error("error sending reset message",n)}),this.status="aborted",this.timeline.abort=Date.now(),this._closeSinkAndSource(e),this.onAbort?.(e)}reset(){if(this.status==="closed"||this.status==="aborted"||this.status==="reset")return;const e=new g6e("stream reset");this.status="reset",this.timeline.reset=Date.now(),this._closeSinkAndSource(e),this.onReset?.()}_closeSinkAndSource(e){this._closeSink(e),this._closeSource(e)}_closeSink(e){this.writeStatus==="writing"&&(this.log.trace("end sink source"),this.sinkController.abort()),this.onSinkEnd(e)}_closeSource(e){this.readStatus!=="closing"&&this.readStatus!=="closed"&&(this.log.trace("ending source with %d bytes to be read by consumer",this.streamSource.readableLength),this.readStatus="closing",this.streamSource.end(e))}remoteCloseWrite(){if(this.readStatus==="closing"||this.readStatus==="closed"){this.log("received remote close write but local source is already closed");return}this.log.trace("remote close write"),this._closeSource()}remoteCloseRead(){if(this.writeStatus==="closing"||this.writeStatus==="closed"){this.log("received remote close read but local sink is already closed");return}this.log.trace("remote close read"),this._closeSink()}destroy(){if(this.status==="closed"||this.status==="aborted"||this.status==="reset"){this.log("received destroy but we are already closed");return}this.log.trace("stream destroyed"),this._closeSinkAndSource()}sourcePush(e){this.streamSource.push(e)}sourceReadableLength(){return this.streamSource.readableLength}}var Jo;(function(t){t[t.Init=0]="Init",t[t.SYNSent=1]="SYNSent",t[t.SYNReceived=2]="SYNReceived",t[t.Established=3]="Established",t[t.Finished=4]="Finished"})(Jo||(Jo={}));class _0t extends d_{name;state;config;_id;sendWindowCapacity;sendWindowCapacityUpdate;recvWindow;recvWindowCapacity;epochStart;getRTT;sendFrame;constructor(e){super({...e,onEnd:r=>{this.state=Jo.Finished,e.onEnd?.(r)}}),this.config=e.config,this._id=parseInt(e.id,10),this.name=e.name,this.state=e.state,this.sendWindowCapacity=RM,this.recvWindow=this.config.initialStreamWindowSize,this.recvWindowCapacity=this.recvWindow,this.epochStart=Date.now(),this.getRTT=e.getRTT,this.sendFrame=e.sendFrame,this.source=T6(this.source,()=>{this.sendWindowUpdate()})}async sendNewStream(){}async sendData(e,r={}){for(e=e.sublist();e.byteLength!==0;){if(this.sendWindowCapacity===0&&(this.log?.trace("wait for send window capacity, status %s",this.status),await this.waitForSendWindowCapacity(r),this.status==="closed"||this.status==="aborted"||this.status==="reset")){this.log?.trace("%s while waiting for send window capacity",this.status);return}const n=Math.min(this.sendWindowCapacity,this.config.maxMessageSize-Wg,e.length),i=this.getSendFlags();this.sendFrame({type:Ci.Data,flag:i,streamID:this._id,length:n},e.sublist(0,n)),this.sendWindowCapacity-=n,e.consume(n)}}async sendReset(){this.sendFrame({type:Ci.WindowUpdate,flag:Jn.RST,streamID:this._id,length:0})}async sendCloseWrite(){const e=this.getSendFlags()|Jn.FIN;this.sendFrame({type:Ci.WindowUpdate,flag:e,streamID:this._id,length:0})}async sendCloseRead(){}async waitForSendWindowCapacity(e={}){if(this.sendWindowCapacity>0)return;let r,n;const i=()=>{this.status==="open"||this.status==="closing"?n(new hl("Stream aborted")):r()};e.signal?.addEventListener("abort",i);try{await new Promise((s,a)=>{this.sendWindowCapacityUpdate=()=>{s()},n=a,r=s})}finally{e.signal?.removeEventListener("abort",i)}}handleWindowUpdate(e){this.log?.trace("stream received window update id=%s",this._id),this.processFlags(e.flag);const r=this.sendWindowCapacity;this.sendWindowCapacity+=e.length,r===0&&e.length>0&&this.sendWindowCapacityUpdate?.()}async handleData(e,r){if(this.log?.trace("stream received data id=%s",this._id),this.processFlags(e.flag),this.recvWindowCapacity<e.length)throw new i0e("Receive window exceeded");const n=await r();this.recvWindowCapacity-=e.length,this.sourcePush(n)}processFlags(e){(e&Jn.ACK)===Jn.ACK&&this.state===Jo.SYNSent&&(this.state=Jo.Established),(e&Jn.FIN)===Jn.FIN&&this.remoteCloseWrite(),(e&Jn.RST)===Jn.RST&&this.reset()}getSendFlags(){switch(this.state){case Jo.Init:return this.state=Jo.SYNSent,Jn.SYN;case Jo.SYNReceived:return this.state=Jo.Established,Jn.ACK;default:return 0}}sendWindowUpdate(){const e=this.getSendFlags(),r=Date.now(),n=this.getRTT();if(e===0&&n>-1&&r-this.epochStart<n*4&&(this.recvWindow=Math.min(this.recvWindow*2,this.config.maxStreamWindowSize)),this.recvWindowCapacity>=this.recvWindow&&e===0)return;const i=this.recvWindow-this.recvWindowCapacity;this.recvWindowCapacity=this.recvWindow,this.epochStart=r,this.sendFrame({type:Ci.WindowUpdate,flag:e,streamID:this._id,length:i})}}const a0e="/yamux/1.0.0",x0t=500;class S0t{protocol=a0e;_components;_init;constructor(e,r={}){this._components=e,this._init=r}[Symbol.toStringTag]="@chainsafe/libp2p-yamux";[Ui]=["@libp2p/stream-multiplexing"];createStreamMuxer(e){return new E0t(this._components,{...this._init,...e})}}class E0t{protocol=a0e;source;sink;config;log;logger;closeController;nextStreamID;_streams;nextPingID;activePing;rtt;client;localGoAway;remoteGoAway;numInboundStreams;numOutboundStreams;onIncomingStream;onStreamEnd;constructor(e,r){this.client=r.direction==="outbound",this.config={...h0t,...r},this.logger=e.logger,this.log=this.logger.forComponent("libp2p:yamux"),p0t(this.config),this.closeController=new AbortController,this.closeController.signal,this.onIncomingStream=r.onIncomingStream,this.onStreamEnd=r.onStreamEnd,this._streams=new Map,this.source=Po({onEnd:()=>{this.log?.trace("muxer source ended"),this._streams.forEach(n=>{n.destroy()})}}),this.sink=async n=>{const i=()=>{const o=t0e(n);if(o.return!=null){const c=o.return();k0t(c)&&c.catch(u=>{this.log?.("could not cause sink source to return",u)})}};let s,a;try{const o=new v0t(n);try{this.closeController.signal.addEventListener("abort",i);for await(const c of o.emitFrames())await this.handleFrame(c.header,c.readData)}finally{this.closeController.signal.removeEventListener("abort",i)}s=Kc.NormalTermination}catch(o){f0t.has(o.name)?(this.log?.error("protocol error in sink",o),s=Kc.ProtocolError):(this.log?.error("internal error in sink",o),s=Kc.InternalError),a=o}this.log?.trace("muxer sink ended"),a!=null?this.abort(a,s):await this.close({reason:s})},this.numInboundStreams=0,this.numOutboundStreams=0,this.nextStreamID=this.client?1:2,this.nextPingID=0,this.rtt=-1,this.log?.trace("muxer created"),this.config.enableKeepAlive&&this.keepAliveLoop().catch(n=>this.log?.error("keepalive error: %s",n)),this.ping().catch(n=>this.log?.error("ping error: %s",n))}get streams(){return Array.from(this._streams.values())}newStream(e){if(this.remoteGoAway!==void 0)throw new d1("Muxer closed remotely");if(this.localGoAway!==void 0)throw new d1("Muxer closed locally");const r=this.nextStreamID;if(this.nextStreamID+=2,this.numOutboundStreams>=this.config.maxOutboundStreams)throw new QR("max outbound streams exceeded");this.log?.trace("new outgoing stream id=%s",r);const n=this._newStream(r,e,Jo.Init,"outbound");return this._streams.set(r,n),this.numOutboundStreams++,n.sendWindowUpdate(),n}async ping(){if(this.remoteGoAway!==void 0)throw new d1("Muxer closed remotely");if(this.localGoAway!==void 0)throw new d1("Muxer closed locally");if(this.activePing===void 0){let e=()=>{};this.activePing={id:this.nextPingID++,promise:new Promise((i,s)=>{const a=()=>{s(new d1("Muxer closed locally"))};this.closeController.signal.addEventListener("abort",a,{once:!0}),e=()=>{this.closeController.signal.removeEventListener("abort",a),i()}}),resolve:e};const r=Date.now();this.sendPing(this.activePing.id);try{await this.activePing.promise}finally{delete this.activePing}const n=Date.now();this.rtt=n-r}else await this.activePing.promise;return this.rtt}getRTT(){return this.rtt}async close(e={}){if(this.closeController.signal.aborted)return;const r=e?.reason??Kc.NormalTermination;if(this.log?.trace("muxer close reason=%s",r),e.signal==null){const n=AbortSignal.timeout(x0t);e={...e,signal:n}}try{await Promise.all([...this._streams.values()].map(async n=>n.close(e))),this.sendGoAway(r),this._closeMuxer()}catch(n){this.abort(n)}}abort(e,r){if(!this.closeController.signal.aborted){r=r??Kc.InternalError,this.log?.error("muxer abort reason=%s error=%s",r,e);for(const n of this._streams.values())n.abort(e);this.sendGoAway(r),this._closeMuxer()}}isClosed(){return this.closeController.signal.aborted}_closeMuxer(){this.closeController.abort(),this.source.end()}_newStream(e,r,n,i){if(this._streams.get(e)!=null)throw new Ze("Stream already exists with that id");const s=new _0t({id:e.toString(),name:r,state:n,direction:i,sendFrame:this.sendFrame.bind(this),onEnd:()=>{this.closeStream(e),this.onStreamEnd?.(s)},log:this.logger.forComponent(`libp2p:yamux:${i}:${e}`),config:this.config,getRTT:this.getRTT.bind(this)});return s}closeStream(e){this.client===(e%2===0)?this.numInboundStreams--:this.numOutboundStreams--,this._streams.delete(e)}async keepAliveLoop(){const e=new Promise((r,n)=>{this.closeController.signal.addEventListener("abort",n,{once:!0})});for(this.log?.trace("muxer keepalive enabled interval=%s",this.config.keepAliveInterval);;){let r;try{await Promise.race([e,new Promise(n=>{r=setTimeout(n,this.config.keepAliveInterval)})]),this.ping().catch(n=>this.log?.error("ping error: %s",n))}catch{clearInterval(r);return}}}async handleFrame(e,r){const{streamID:n,type:i,length:s}=e;if(this.log?.trace("received frame %o",e),n===0)switch(i){case Ci.Ping:{this.handlePing(e);return}case Ci.GoAway:{this.handleGoAway(s);return}default:throw new _1("Invalid frame type")}else switch(e.type){case Ci.Data:case Ci.WindowUpdate:{await this.handleStreamMessage(e,r);return}default:throw new _1("Invalid frame type")}}handlePing(e){if(e.flag===Jn.SYN)this.log?.trace("received ping request pingId=%s",e.length),this.sendPing(e.length,Jn.ACK);else if(e.flag===Jn.ACK)this.log?.trace("received ping response pingId=%s",e.length),this.handlePingResponse(e.length);else throw new _1("Invalid frame flag")}handlePingResponse(e){if(this.activePing===void 0)throw new r0e("ping not requested");if(this.activePing.id!==e)throw new n0e("ping doesn't match our id");this.activePing.resolve()}handleGoAway(e){this.log?.trace("received GoAway reason=%s",Kc[e]??"unknown"),this.remoteGoAway=e;for(const r of this._streams.values())r.reset();this._closeMuxer()}async handleStreamMessage(e,r){const{streamID:n,flag:i,type:s}=e;(i&Jn.SYN)===Jn.SYN&&this.incomingStream(n);const a=this._streams.get(n);if(a===void 0){if(s===Ci.Data){if(this.log?.("discarding data for stream id=%s",n),r===void 0)throw new Error("unreachable");await r()}else this.log?.trace("frame for missing stream id=%s",n);return}switch(s){case Ci.WindowUpdate:{a.handleWindowUpdate(e);return}case Ci.Data:{if(r===void 0)throw new Error("unreachable");await a.handleData(e,r);return}default:throw new Error("unreachable")}}incomingStream(e){if(this.client!==(e%2===0))throw new Ze("Both endpoints are clients");if(this._streams.has(e))return;if(this.log?.trace("new incoming stream id=%s",e),this.localGoAway!==void 0){this.sendFrame({type:Ci.WindowUpdate,flag:Jn.RST,streamID:e,length:0});return}if(this.numInboundStreams>=this.config.maxInboundStreams){this.log?.("maxIncomingStreams exceeded, forcing stream reset"),this.sendFrame({type:Ci.WindowUpdate,flag:Jn.RST,streamID:e,length:0});return}const r=this._newStream(e,void 0,Jo.SYNReceived,"inbound");this.numInboundStreams++,this._streams.set(e,r),this.onIncomingStream?.(r)}sendFrame(e,r){if(this.log?.trace("sending frame %o",e),e.type===Ci.Data){if(r===void 0)throw new _1("Invalid frame");this.source.push(new cr(iZ(e),r))}else this.source.push(iZ(e))}sendPing(e,r=Jn.SYN){r===Jn.SYN?this.log?.trace("sending ping request pingId=%s",e):this.log?.trace("sending ping response pingId=%s",e),this.sendFrame({type:Ci.Ping,flag:r,streamID:0,length:e})}sendGoAway(e=Kc.NormalTermination){this.log?.("sending GoAway reason=%s",Kc[e]),this.localGoAway=e,this.sendFrame({type:Ci.GoAway,flag:0,streamID:0,length:e})}}function k0t(t){return t!=null&&typeof t.then=="function"}function w2(t={}){return e=>new S0t(e,t)}const T0t=41;function o0e(t){try{const[[e,r]]=t.stringTuples();if(r==null)return!1;if(e===T0t)return Jct("2000::/3",r)}catch{}return!1}const A0t=4,C0t=41;function c0e(t){try{const[[e]]=t.stringTuples();return e===A0t||e===C0t}catch{}return!1}function e0(t){try{if(!c0e(t))return!1;const[[,e]]=t.stringTuples();return e==null?!1:kd(e)??!1}catch{}return!0}function I0t(t,e,r){let n,i;function s(){const o={signal:i.signal};if(r?.timeout!=null){const c=Pr([i.signal,AbortSignal.timeout(r.timeout)]);o.signal=c}Promise.resolve().then(async()=>{await t(o)}).catch(()=>{}).finally(()=>{i.signal.aborted||(n=setTimeout(s,e))})}let a=!1;return{setInterval:o=>{e=o,n!=null&&(clearTimeout(n),n=setTimeout(s,e))},setTimeout:o=>{r==null&&(r={}),r.timeout=o},start:()=>{a||(a=!0,i=new AbortController,i.signal,r?.runImmediately===!0?queueMicrotask(()=>{s()}):n=setTimeout(s,e))},stop:()=>{clearTimeout(n),i?.abort(),a=!1}}}function ds(t,e){const r=Ep(t,e),n={read:async(i,s)=>{const a=await r.read(s);return i.decode(a)},write:async(i,s,a)=>{await r.write(s.encode(i),a)},writeV:async(i,s,a)=>{await r.writeV(i.map(o=>s.encode(o)),a)},pb:i=>({read:async s=>n.read(i,s),write:async(s,a)=>n.write(s,i,a),writeV:async(s,a)=>n.writeV(s,i,a),unwrap:()=>n}),unwrap:()=>r.unwrap()};return n}const P0t="libp2p",R0t="autonat",O0t="1.0.0",B0t=3e4,D0t=2,M0t=20,N0t=80,F0t=8192;var Nn;(function(t){(function(i){i.DIAL="DIAL",i.DIAL_RESPONSE="DIAL_RESPONSE"})(t.MessageType||(t.MessageType={}));let e;(function(i){i[i.DIAL=0]="DIAL",i[i.DIAL_RESPONSE=1]="DIAL_RESPONSE"})(e||(e={})),function(i){i.codec=()=>ra(e)}(t.MessageType||(t.MessageType={})),function(i){i.OK="OK",i.E_DIAL_ERROR="E_DIAL_ERROR",i.E_DIAL_REFUSED="E_DIAL_REFUSED",i.E_BAD_REQUEST="E_BAD_REQUEST",i.E_INTERNAL_ERROR="E_INTERNAL_ERROR"}(t.ResponseStatus||(t.ResponseStatus={}));let r;(function(i){i[i.OK=0]="OK",i[i.E_DIAL_ERROR=100]="E_DIAL_ERROR",i[i.E_DIAL_REFUSED=101]="E_DIAL_REFUSED",i[i.E_BAD_REQUEST=200]="E_BAD_REQUEST",i[i.E_INTERNAL_ERROR=300]="E_INTERNAL_ERROR"})(r||(r={})),function(i){i.codec=()=>ra(r)}(t.ResponseStatus||(t.ResponseStatus={})),function(i){let s;i.codec=()=>(s==null&&(s=Ot((a,o,c={})=>{if(c.lengthDelimited!==!1&&o.fork(),a.id!=null&&(o.uint32(10),o.bytes(a.id)),a.addrs!=null)for(const u of a.addrs)o.uint32(18),o.bytes(u);c.lengthDelimited!==!1&&o.ldelim()},(a,o,c={})=>{const u={addrs:[]},l=o==null?a.len:a.pos+o;for(;a.pos<l;){const f=a.uint32();switch(f>>>3){case 1:{u.id=a.bytes();break}case 2:{if(c.limits?.addrs!=null&&u.addrs.length===c.limits.addrs)throw new rn('Decode error - map field "addrs" had too many elements');u.addrs.push(a.bytes());break}default:{a.skipType(f&7);break}}}return u})),s),i.encode=a=>Rt(a,i.codec()),i.decode=(a,o)=>Pt(a,i.codec(),o)}(t.PeerInfo||(t.PeerInfo={})),function(i){let s;i.codec=()=>(s==null&&(s=Ot((a,o,c={})=>{c.lengthDelimited!==!1&&o.fork(),a.peer!=null&&(o.uint32(10),t.PeerInfo.codec().encode(a.peer,o)),c.lengthDelimited!==!1&&o.ldelim()},(a,o,c={})=>{const u={},l=o==null?a.len:a.pos+o;for(;a.pos<l;){const f=a.uint32();switch(f>>>3){case 1:{u.peer=t.PeerInfo.codec().decode(a,a.uint32(),{limits:c.limits?.peer});break}default:{a.skipType(f&7);break}}}return u})),s),i.encode=a=>Rt(a,i.codec()),i.decode=(a,o)=>Pt(a,i.codec(),o)}(t.Dial||(t.Dial={})),function(i){let s;i.codec=()=>(s==null&&(s=Ot((a,o,c={})=>{c.lengthDelimited!==!1&&o.fork(),a.status!=null&&(o.uint32(8),t.ResponseStatus.codec().encode(a.status,o)),a.statusText!=null&&(o.uint32(18),o.string(a.statusText)),a.addr!=null&&(o.uint32(26),o.bytes(a.addr)),c.lengthDelimited!==!1&&o.ldelim()},(a,o,c={})=>{const u={},l=o==null?a.len:a.pos+o;for(;a.pos<l;){const f=a.uint32();switch(f>>>3){case 1:{u.status=t.ResponseStatus.codec().decode(a);break}case 2:{u.statusText=a.string();break}case 3:{u.addr=a.bytes();break}default:{a.skipType(f&7);break}}}return u})),s),i.encode=a=>Rt(a,i.codec()),i.decode=(a,o)=>Pt(a,i.codec(),o)}(t.DialResponse||(t.DialResponse={}));let n;t.codec=()=>(n==null&&(n=Ot((i,s,a={})=>{a.lengthDelimited!==!1&&s.fork(),i.type!=null&&(s.uint32(8),t.MessageType.codec().encode(i.type,s)),i.dial!=null&&(s.uint32(18),t.Dial.codec().encode(i.dial,s)),i.dialResponse!=null&&(s.uint32(26),t.DialResponse.codec().encode(i.dialResponse,s)),a.lengthDelimited!==!1&&s.ldelim()},(i,s,a={})=>{const o={},c=s==null?i.len:i.pos+s;for(;i.pos<c;){const u=i.uint32();switch(u>>>3){case 1:{o.type=t.MessageType.codec().decode(i);break}case 2:{o.dial=t.Dial.codec().decode(i,i.uint32(),{limits:a.limits?.dial});break}case 3:{o.dialResponse=t.DialResponse.codec().decode(i,i.uint32(),{limits:a.limits?.dialResponse});break}default:{i.skipType(u&7);break}}}return o})),n),t.encode=i=>Rt(i,t.codec()),t.decode=(i,s)=>Pt(i,t.codec(),s)})(Nn||(Nn={}));const L0t=4,$0t=8;class U0t{components;protocol;timeout;maxInboundStreams;maxOutboundStreams;maxMessageSize;started;log;topologyId;dialResults;findPeers;addressFilter;connectionThreshold;constructor(e,r){this.components=e,this.log=e.logger.forComponent("libp2p:auto-nat"),this.started=!1,this.protocol=`/${r.protocolPrefix??P0t}/${R0t}/${O0t}`,this.timeout=r.timeout??B0t,this.maxInboundStreams=r.maxInboundStreams??D0t,this.maxOutboundStreams=r.maxOutboundStreams??M0t,this.connectionThreshold=r.connectionThreshold??N0t,this.maxMessageSize=r.maxMessageSize??F0t,this.dialResults=new Map,this.findPeers=I0t(this.findRandomPeers.bind(this),6e4),this.addressFilter=Jh(1024)}[Symbol.toStringTag]="@libp2p/autonat";[Ui]=["@libp2p/autonat"];get[xu](){return["@libp2p/identify"]}isStarted(){return this.started}async start(){this.started||(await this.components.registrar.handle(this.protocol,e=>{this.handleIncomingAutonatStream(e).catch(r=>{this.log.error("error handling incoming autonat stream - %e",r)})},{maxInboundStreams:this.maxInboundStreams,maxOutboundStreams:this.maxOutboundStreams}),this.topologyId=await this.components.registrar.register(this.protocol,{onConnect:(e,r)=>{this.verifyExternalAddresses(r).catch(n=>{this.log.error("could not verify addresses - %e",n)})}}),this.findPeers.start(),this.started=!0)}async stop(){await this.components.registrar.unhandle(this.protocol),this.topologyId!=null&&await this.components.registrar.unhandle(this.topologyId),this.dialResults.clear(),this.findPeers.stop(),this.started=!1}allAddressesAreVerified(){return this.components.addressManager.getAddressesWithMetadata().every(e=>e.expires>Date.now()?!0:e.verified)}async findRandomPeers(e){if(this.allAddressesAreVerified())return;const r=Pr([AbortSignal.timeout(1e4),e?.signal]);try{this.log("starting random walk to find peers to run AutoNAT");for await(const n of this.components.randomWalk.walk({signal:r})){if(!await this.components.connectionManager.isDialable(n.multiaddrs)){this.log.trace("random peer %p was not dialable %s",n.id,n.multiaddrs.map(i=>i.toString()).join(", "));continue}try{this.log.trace("dial random peer %p",n.id),await this.components.connectionManager.openConnection(n.multiaddrs,{signal:r})}catch{}if(this.allAddressesAreVerified()){this.log("stopping random walk, all addresses are verified");return}if(!this.hasConnectionCapacity()){this.log("stopping random walk, too close to max connections");return}}}catch{}}async handleIncomingAutonatStream(e){const r=AbortSignal.timeout(this.timeout),n=ds(e.stream,{maxDataLength:this.maxMessageSize}).pb(Nn);try{const i=await n.read({signal:r}),s=await this.handleAutonatMessage(i,e.connection,{signal:r});await n.write(s,{signal:r}),await n.unwrap().unwrap().close({signal:r})}catch(i){this.log.error("error handling incoming autonat stream - %e",i),e.stream.abort(i)}}async handleAutonatMessage(e,r,n){const i=this.components.addressManager.getAddresses().map(f=>f.toOptions().host),s=e.dial;if(s==null)return this.log.error("dial was missing from message"),{type:Nn.MessageType.DIAL_RESPONSE,dialResponse:{status:Nn.ResponseStatus.E_BAD_REQUEST,statusText:"No Dial message found in message"}};let a;const o=s.peer;if(o?.id==null)return this.log.error("PeerId missing from message"),{type:Nn.MessageType.DIAL_RESPONSE,dialResponse:{status:Nn.ResponseStatus.E_BAD_REQUEST,statusText:"missing peer info"}};try{const f=Zn(o.id);a=Aa(f)}catch(f){return this.log.error("invalid PeerId - %e",f),{type:Nn.MessageType.DIAL_RESPONSE,dialResponse:{status:Nn.ResponseStatus.E_BAD_REQUEST,statusText:"bad peer id"}}}if(this.log("incoming request from %p",a),!r.remotePeer.equals(a))return this.log("target peer %p did not equal sending peer %p",a,r.remotePeer),{type:Nn.MessageType.DIAL_RESPONSE,dialResponse:{status:Nn.ResponseStatus.E_BAD_REQUEST,statusText:"peer id mismatch"}};const c=o.addrs.map(f=>Mt(f)).filter(f=>{const d=f.toOptions();return e0(f)?!1:d.host!==r.remoteAddr.toOptions().host?(this.log.trace("not dialing %a - target host did not match remote host %a",f,r.remoteAddr),!1):i.includes(d.host)?!1:this.components.transportManager.dialTransportForMultiaddr(f)==null?(this.log.trace("not dialing %a - transport unsupported",f),!1):!0}).map(f=>(f.getPeerId()==null&&(f=f.encapsulate(`/p2p/${a.toString()}`)),f));if(c.length===0)return this.log("refused to dial all multiaddrs for %p from message",a),{type:Nn.MessageType.DIAL_RESPONSE,dialResponse:{status:Nn.ResponseStatus.E_DIAL_REFUSED,statusText:"no dialable addresses"}};this.log("dial multiaddrs %s for peer %p",c.map(f=>f.toString()).join(", "),a);let u="",l=c[0];for await(const f of c){let d;l=f;try{if(d=await this.components.connectionManager.openConnection(f,n),!d.remoteAddr.equals(f))throw this.log.error("tried to dial %a but dialed %a",f,d.remoteAddr),new Error("Unexpected remote address");return this.log("successfully dialed %p via %a",a,f),{type:Nn.MessageType.DIAL_RESPONSE,dialResponse:{status:Nn.ResponseStatus.OK,addr:d.remoteAddr.decapsulateCode(Xt("p2p").code).bytes}}}catch(h){this.log.error("could not dial %p - %e",a,h),u=h.message}finally{d!=null&&await d.close()}}return{type:Nn.MessageType.DIAL_RESPONSE,dialResponse:{status:Nn.ResponseStatus.E_DIAL_ERROR,statusText:u,addr:l.bytes}}}getFirstUnverifiedMultiaddr(e,r){const n=this.components.addressManager.getAddressesWithMetadata().sort((i,s)=>i.type==="observed"&&s.type!=="observed"?1:s.type==="observed"&&i.type!=="observed"?-1:0).filter(i=>!(!(i.expires<Date.now())||i.multiaddr.toOptions().family===6&&(!r||!o0e(i.multiaddr))||e0(i.multiaddr)));for(const i of n){const s=i.multiaddr.toString();let a=this.dialResults.get(s);if(a!=null){if(a.networkSegments.includes(e)){this.log.trace("%a already has a network segment result from %s",a.multiaddr,e);continue}if(a.queue.size>10){this.log.trace("%a already has enough peers queued",a.multiaddr);continue}}if(a==null){const o=i.expires<Date.now();if(o&&this.addressFilter.remove?.(s),this.addressFilter.has(s))continue;this.addressFilter.add(s),this.log.trace("creating dial result %s %s",o?"to revalidate":"for",s),a={multiaddr:i.multiaddr,success:0,failure:0,networkSegments:[],verifyingPeers:xut(),queue:new nd({concurrency:3,maxSize:50}),type:i.type,lastVerified:i.lastVerified},this.dialResults.set(s,a)}return a}}removeOutdatedMultiaddrResults(){const e=new Set(this.components.addressManager.getAddressesWithMetadata().filter(({expires:r})=>r<Date.now()).map(({multiaddr:r})=>r.toString()));for(const r of this.dialResults.keys())e.has(r)||(this.log.trace("remove results for %a",r),this.dialResults.delete(r))}async verifyExternalAddresses(e){if(!this.isStarted())return;this.removeOutdatedMultiaddrResults();const n=(await this.components.peerStore.get(e.remotePeer)).addresses.some(({multiaddr:a})=>a.toOptions().family===6),i=this.getNetworkSegment(e.remoteAddr),s=this.getFirstUnverifiedMultiaddr(i,n);if(s==null){this.log.trace("no unverified public addresses found for peer %p to verify, not requesting verification",e.remotePeer);return}if(!this.hasConnectionCapacity()){s.lastVerified!=null?(this.log("automatically re-verifying %a because we are too close to the connection limit",s.multiaddr),this.confirmAddress(s)):this.log("skipping verifying %a because we are too close to the connection limit",s.multiaddr);return}s.queue.add(async a=>{await this.askPeerToVerify(e,i,a)},{peerId:e.remotePeer,multiaddr:s.multiaddr}).catch(a=>{s?.result==null&&this.log.error("error from %p verifying address %a - %e",e.remotePeer,s?.multiaddr,a)})}async askPeerToVerify(e,r,n){let i=this.dialResults.get(n.multiaddr.toString());if(i==null){this.log("%a was verified while %p was queued",n.multiaddr,e.remotePeer);return}const s=AbortSignal.timeout(this.timeout);this.log.trace("asking %p to verify multiaddr %s",e.remotePeer,n.multiaddr);const a=await e.newStream(this.protocol,{signal:s});try{const o=ds(a).pb(Nn),[,c]=await Promise.all([o.write({type:Nn.MessageType.DIAL,dial:{peer:{id:this.components.peerId.toMultihash().bytes,addrs:[n.multiaddr.bytes]}}},{signal:s}),o.read({signal:s})]);if(c.type!==Nn.MessageType.DIAL_RESPONSE||c.dialResponse==null){this.log("invalid autonat response from %p - %j",e.remotePeer,c);return}const u=c.dialResponse.status;if(this.log.trace("autonat response from %p for %a is %s",e.remotePeer,n.multiaddr,u),u!==Nn.ResponseStatus.OK&&u!==Nn.ResponseStatus.E_DIAL_ERROR)return;if(i=this.dialResults.get(n.multiaddr.toString()),i==null){this.log.trace("peer reported %a as %s but there is no result object",n.multiaddr,c.dialResponse.status);return}if(i.networkSegments.includes(r)){this.log.trace("%a results included network segment %s",n.multiaddr,r);return}if(i.result!=null){this.log.trace("already resolved result for %a, ignoring response from",n.multiaddr,e.remotePeer);return}if(i.verifyingPeers.has(e.remotePeer)){this.log.trace("peer %p has already verified %a, ignoring response",e.remotePeer,n.multiaddr);return}if(i.verifyingPeers.add(e.remotePeer),i.networkSegments.push(r),u===Nn.ResponseStatus.OK){if(i.success++,i.type!=="observed"){this.confirmAddress(i);return}}else u===Nn.ResponseStatus.E_DIAL_ERROR&&i.failure++;this.log("%a success %d failure %d",i.multiaddr,i.success,i.failure),i.success===L0t&&this.confirmAddress(i),i.failure===$0t&&this.unconfirmAddress(i)}finally{try{await a.close({signal:s})}catch(o){a.abort(o)}}}hasConnectionCapacity(){const r=this.components.connectionManager.getConnections().length,n=this.components.connectionManager.getMaxConnections();return r/n*100<this.connectionThreshold}confirmAddress(e){this.log("%s address %a is externally dialable",e.type,e.multiaddr),this.components.addressManager.confirmObservedAddr(e.multiaddr),this.dialResults.delete(e.multiaddr.toString()),e.result=!0,e.queue.abort()}unconfirmAddress(e){this.log("%s address %a is not externally dialable",e.type,e.multiaddr),this.components.addressManager.removeObservedAddr(e.multiaddr),this.dialResults.delete(e.multiaddr.toString()),e.result=!1,e.queue.abort()}getNetworkSegment(e){const r=e.toOptions();return r.family===4?r.host.split(".")[0].padStart(3,"0"):r.host.split(":")[0].padStart(4,"0")}}function h_(t={}){return e=>new U0t(e,t)}const j0t=lt("dns4"),V0t=lt("dns6"),q0t=lt("dnsaddr"),t0=fi(lt("dns"),q0t,j0t,V0t),p_=fi(lt("ip4"),lt("ip6")),Tp=fi(At(p_,lt("tcp")),At(t0,lt("tcp"))),m_=At(p_,lt("udp")),z0t=At(m_,lt("utp")),H0t=At(m_,lt("quic")),W0t=At(m_,lt("quic-v1")),SP=fi(At(Tp,lt("ws")),At(t0,lt("ws"))),F6=fi(At(SP,lt("p2p")),SP),EP=fi(At(Tp,lt("wss")),At(t0,lt("wss")),At(Tp,lt("tls"),lt("ws")),At(t0,lt("tls"),lt("ws"))),L6=fi(At(EP,lt("p2p")),EP),kP=fi(At(Tp,lt("http")),At(p_,lt("http")),At(t0,lt("http"))),TP=fi(At(Tp,lt("https")),At(p_,lt("https")),At(t0,lt("https"))),sZ=At(m_,lt("webrtc-direct"),lt("certhash")),l0e=fi(At(sZ,lt("p2p")),sZ),aZ=At(W0t,lt("webtransport"),lt("certhash"),lt("certhash")),u0e=fi(At(aZ,lt("p2p")),aZ),f0e=fi(At(F6,lt("p2p-webrtc-star"),lt("p2p")),At(L6,lt("p2p-webrtc-star"),lt("p2p")),At(F6,lt("p2p-webrtc-star")),At(L6,lt("p2p-webrtc-star")));fi(At(F6,lt("p2p-websocket-star"),lt("p2p")),At(L6,lt("p2p-websocket-star"),lt("p2p")),At(F6,lt("p2p-websocket-star")),At(L6,lt("p2p-websocket-star")));const d0e=fi(At(kP,lt("p2p-webrtc-direct"),lt("p2p")),At(TP,lt("p2p-webrtc-direct"),lt("p2p")),At(kP,lt("p2p-webrtc-direct")),At(TP,lt("p2p-webrtc-direct"))),r0=fi(SP,EP,kP,TP,f0e,d0e,Tp,z0t,H0t,t0,l0e,u0e);fi(At(r0,lt("p2p-stardust"),lt("p2p")),At(r0,lt("p2p-stardust")));const Pf=fi(At(r0,lt("p2p")),f0e,d0e,l0e,u0e,lt("p2p")),oZ=fi(At(Pf,lt("p2p-circuit"),Pf),At(Pf,lt("p2p-circuit")),At(lt("p2p-circuit"),Pf),At(r0,lt("p2p-circuit")),At(lt("p2p-circuit"),r0),lt("p2p-circuit")),h0e=()=>fi(At(oZ,h0e),oZ),Gd=h0e(),G0t=fi(At(Gd,Pf,Gd),At(Pf,Gd),At(Gd,Pf),Gd,Pf);fi(At(Gd,lt("webrtc"),lt("p2p")),At(Gd,lt("webrtc")),At(r0,lt("webrtc"),lt("p2p")),At(r0,lt("webrtc")),lt("webrtc"));function p0e(t){function e(r){let n;try{n=Mt(r)}catch{return!1}const i=t(n.protoNames());return i===null?!1:i===!0||i===!1?i:i.length===0}return e}function At(...t){function e(r){if(r.length<t.length)return null;let n=r;return t.some(i=>(n=typeof i=="function"?i().partialMatch(r):i.partialMatch(r),Array.isArray(n)&&(r=n),n===null)),n}return{toString:function(){return"{ "+t.join(" ")+" }"},input:t,matches:p0e(e),partialMatch:e}}function fi(...t){function e(n){let i=null;return t.some(s=>{const a=typeof s=="function"?s().partialMatch(n):s.partialMatch(n);return a!=null?(i=a,!0):!1}),i}return{toString:function(){return"{ "+t.join(" ")+" }"},input:t,matches:p0e(e),partialMatch:e}}function lt(t){const e=t;function r(i){let s;try{s=Mt(i)}catch{return!1}const a=s.protoNames();return a.length===1&&a[0]===e}function n(i){return i.length===0?null:i[0]===e?i.slice(1):null}return{toString:function(){return e},matches:r,partialMatch:n}}const K0t="bootstrap",X0t=50,Y0t=1e3;class Z0t extends oi{static tag="bootstrap";log;timer;list;timeout;components;_init;constructor(e,r={list:[]}){if(r.list==null||r.list.length===0)throw new Error("Bootstrap requires a list of peer addresses");super(),this.components=e,this.log=e.logger.forComponent("libp2p:bootstrap"),this.timeout=r.timeout??Y0t,this.list=[];for(const n of r.list){if(!G0t.matches(n)){this.log.error("Invalid multiaddr");continue}const i=Mt(n),s=i.getPeerId();if(s==null){this.log.error("Invalid bootstrap multiaddr without peer id");continue}const a={id:Ln(s),multiaddrs:[i]};this.list.push(a)}this._init=r}[ov]=this;[Symbol.toStringTag]="@libp2p/bootstrap";[Ui]=["@libp2p/peer-discovery"];isStarted(){return!!this.timer}start(){this.isStarted()||(this.log("Starting bootstrap node discovery, discovering peers after %s ms",this.timeout),this.timer=setTimeout(()=>{this._discoverBootstrapPeers().catch(e=>{this.log.error(e)})},this.timeout))}async _discoverBootstrapPeers(){if(this.timer!=null)for(const e of this.list){if(await this.components.peerStore.merge(e.id,{tags:{[this._init.tagName??K0t]:{value:this._init.tagValue??X0t,ttl:this._init.tagTTL}},multiaddrs:e.multiaddrs}),this.timer==null)return;this.safeDispatchEvent("peer",{detail:e}),this.components.connectionManager.openConnection(e.id).catch(r=>{this.log.error("could not dial bootstrap peer %p",e.id,r)})}}stop(){this.timer!=null&&clearTimeout(this.timer),this.timer=void 0}}function _2(t){return e=>new Z0t(e,t)}var $6;(function(t){let e;t.codec=()=>(e==null&&(e=Ot((r,n,i={})=>{i.lengthDelimited!==!1&&n.fork(),r.publicKey!=null&&r.publicKey.byteLength>0&&(n.uint32(10),n.bytes(r.publicKey)),r.payloadType!=null&&r.payloadType.byteLength>0&&(n.uint32(18),n.bytes(r.payloadType)),r.payload!=null&&r.payload.byteLength>0&&(n.uint32(26),n.bytes(r.payload)),r.signature!=null&&r.signature.byteLength>0&&(n.uint32(42),n.bytes(r.signature)),i.lengthDelimited!==!1&&n.ldelim()},(r,n,i={})=>{const s={publicKey:yr(0),payloadType:yr(0),payload:yr(0),signature:yr(0)},a=n==null?r.len:r.pos+n;for(;r.pos<a;){const o=r.uint32();switch(o>>>3){case 1:{s.publicKey=r.bytes();break}case 2:{s.payloadType=r.bytes();break}case 3:{s.payload=r.bytes();break}case 5:{s.signature=r.bytes();break}default:{r.skipType(o&7);break}}}return s})),e),t.encode=r=>Rt(r,t.codec()),t.decode=(r,n)=>Pt(r,t.codec(),n)})($6||($6={}));class J0t extends Error{constructor(e="Invalid signature"){super(e),this.name="InvalidSignatureError"}}class hc{static createFromProtobuf=async e=>{const r=$6.decode(e),n=na(r.publicKey);return new hc({publicKey:n,payloadType:r.payloadType,payload:r.payload,signature:r.signature})};static seal=async(e,r)=>{if(r==null)throw new Error("Missing private key");const n=e.domain,i=e.codec,s=e.marshal(),a=cZ(n,i,s),o=await r.sign(a.subarray());return new hc({publicKey:r.publicKey,payloadType:i,payload:s,signature:o})};static openAndCertify=async(e,r)=>{const n=await hc.createFromProtobuf(e);if(!await n.validate(r))throw new J0t("Envelope signature is not valid for the given domain");return n};publicKey;payloadType;payload;signature;marshaled;constructor(e){const{publicKey:r,payloadType:n,payload:i,signature:s}=e;this.publicKey=r,this.payloadType=n,this.payload=i,this.signature=s}marshal(){return this.marshaled==null&&(this.marshaled=$6.encode({publicKey:Ya(this.publicKey),payloadType:this.payloadType,payload:this.payload.subarray(),signature:this.signature})),this.marshaled}equals(e){return Tr(this.marshal(),e.marshal())}async validate(e){const r=cZ(e,this.payloadType,this.payload);return this.publicKey.verify(r.subarray(),this.signature)}}const cZ=(t,e,r)=>{const n=tt(t),i=Ds(n.byteLength),s=Ds(e.length),a=Ds(r.length);return new cr(i,n,s,e,a,r)};function Q0t(t,e){const r=(n,i)=>n.toString().localeCompare(i.toString());return t.length!==e.length?!1:(e.sort(r),t.sort(r).every((n,i)=>e[i].equals(n)))}const e1t="libp2p-peer-record",t1t=Uint8Array.from([3,1]);var U6;(function(t){(function(r){let n;r.codec=()=>(n==null&&(n=Ot((i,s,a={})=>{a.lengthDelimited!==!1&&s.fork(),i.multiaddr!=null&&i.multiaddr.byteLength>0&&(s.uint32(10),s.bytes(i.multiaddr)),a.lengthDelimited!==!1&&s.ldelim()},(i,s,a={})=>{const o={multiaddr:yr(0)},c=s==null?i.len:i.pos+s;for(;i.pos<c;){const u=i.uint32();switch(u>>>3){case 1:{o.multiaddr=i.bytes();break}default:{i.skipType(u&7);break}}}return o})),n),r.encode=i=>Rt(i,r.codec()),r.decode=(i,s)=>Pt(i,r.codec(),s)})(t.AddressInfo||(t.AddressInfo={}));let e;t.codec=()=>(e==null&&(e=Ot((r,n,i={})=>{if(i.lengthDelimited!==!1&&n.fork(),r.peerId!=null&&r.peerId.byteLength>0&&(n.uint32(10),n.bytes(r.peerId)),r.seq!=null&&r.seq!==0n&&(n.uint32(16),n.uint64(r.seq)),r.addresses!=null)for(const s of r.addresses)n.uint32(26),t.AddressInfo.codec().encode(s,n);i.lengthDelimited!==!1&&n.ldelim()},(r,n,i={})=>{const s={peerId:yr(0),seq:0n,addresses:[]},a=n==null?r.len:r.pos+n;for(;r.pos<a;){const o=r.uint32();switch(o>>>3){case 1:{s.peerId=r.bytes();break}case 2:{s.seq=r.uint64();break}case 3:{if(i.limits?.addresses!=null&&s.addresses.length===i.limits.addresses)throw new rn('Decode error - map field "addresses" had too many elements');s.addresses.push(t.AddressInfo.codec().decode(r,r.uint32(),{limits:i.limits?.addresses$}));break}default:{r.skipType(o&7);break}}}return s})),e),t.encode=r=>Rt(r,t.codec()),t.decode=(r,n)=>Pt(r,t.codec(),n)})(U6||(U6={}));class Ka{static createFromProtobuf=e=>{const r=U6.decode(e),n=Aa(Zn(r.peerId)),i=(r.addresses??[]).map(a=>Mt(a.multiaddr)),s=r.seq;return new Ka({peerId:n,multiaddrs:i,seqNumber:s})};static DOMAIN=e1t;static CODEC=t1t;peerId;multiaddrs;seqNumber;domain=Ka.DOMAIN;codec=Ka.CODEC;marshaled;constructor(e){const{peerId:r,multiaddrs:n,seqNumber:i}=e;this.peerId=r,this.multiaddrs=n??[],this.seqNumber=i??BigInt(Date.now())}marshal(){return this.marshaled==null&&(this.marshaled=U6.encode({peerId:this.peerId.toMultihash().bytes,seq:BigInt(this.seqNumber),addresses:this.multiaddrs.map(e=>({multiaddr:e.bytes}))})),this.marshaled}equals(e){return!(!(e instanceof Ka)||!this.peerId.equals(e.peerId)||this.seqNumber!==e.seqNumber||!Q0t(this.multiaddrs,e.multiaddrs))}}const m0e=1e3,g0e=60*m0e,v0e=290,r1t=15,n1t=2*60*g0e,i1t=1,y0e=2e3,s1t=100,lZ="circuit-relay-source",zw=`${vy}-circuit-relay`,uZ=`${vy}-circuit-relay-source`,a1t=2*g0e,o1t=BigInt(1<<17),Ap="/libp2p/circuit/relay/0.2.0/hop",AP="/libp2p/circuit/relay/0.2.0/stop",c1t=30*m0e,CP=300,l1t=4096,u1t=.001;var _n;(function(t){(function(n){n.RESERVE="RESERVE",n.CONNECT="CONNECT",n.STATUS="STATUS"})(t.Type||(t.Type={}));let e;(function(n){n[n.RESERVE=0]="RESERVE",n[n.CONNECT=1]="CONNECT",n[n.STATUS=2]="STATUS"})(e||(e={})),function(n){n.codec=()=>ra(e)}(t.Type||(t.Type={}));let r;t.codec=()=>(r==null&&(r=Ot((n,i,s={})=>{s.lengthDelimited!==!1&&i.fork(),n.type!=null&&(i.uint32(8),t.Type.codec().encode(n.type,i)),n.peer!=null&&(i.uint32(18),Cp.codec().encode(n.peer,i)),n.reservation!=null&&(i.uint32(26),j6.codec().encode(n.reservation,i)),n.limit!=null&&(i.uint32(34),Ip.codec().encode(n.limit,i)),n.status!=null&&(i.uint32(40),Nr.codec().encode(n.status,i)),s.lengthDelimited!==!1&&i.ldelim()},(n,i,s={})=>{const a={},o=i==null?n.len:n.pos+i;for(;n.pos<o;){const c=n.uint32();switch(c>>>3){case 1:{a.type=t.Type.codec().decode(n);break}case 2:{a.peer=Cp.codec().decode(n,n.uint32(),{limits:s.limits?.peer});break}case 3:{a.reservation=j6.codec().decode(n,n.uint32(),{limits:s.limits?.reservation});break}case 4:{a.limit=Ip.codec().decode(n,n.uint32(),{limits:s.limits?.limit});break}case 5:{a.status=Nr.codec().decode(n);break}default:{n.skipType(c&7);break}}}return a})),r),t.encode=n=>Rt(n,t.codec()),t.decode=(n,i)=>Pt(n,t.codec(),i)})(_n||(_n={}));var Qo;(function(t){(function(n){n.CONNECT="CONNECT",n.STATUS="STATUS"})(t.Type||(t.Type={}));let e;(function(n){n[n.CONNECT=0]="CONNECT",n[n.STATUS=1]="STATUS"})(e||(e={})),function(n){n.codec=()=>ra(e)}(t.Type||(t.Type={}));let r;t.codec=()=>(r==null&&(r=Ot((n,i,s={})=>{s.lengthDelimited!==!1&&i.fork(),n.type!=null&&(i.uint32(8),t.Type.codec().encode(n.type,i)),n.peer!=null&&(i.uint32(18),Cp.codec().encode(n.peer,i)),n.limit!=null&&(i.uint32(26),Ip.codec().encode(n.limit,i)),n.status!=null&&(i.uint32(32),Nr.codec().encode(n.status,i)),s.lengthDelimited!==!1&&i.ldelim()},(n,i,s={})=>{const a={},o=i==null?n.len:n.pos+i;for(;n.pos<o;){const c=n.uint32();switch(c>>>3){case 1:{a.type=t.Type.codec().decode(n);break}case 2:{a.peer=Cp.codec().decode(n,n.uint32(),{limits:s.limits?.peer});break}case 3:{a.limit=Ip.codec().decode(n,n.uint32(),{limits:s.limits?.limit});break}case 4:{a.status=Nr.codec().decode(n);break}default:{n.skipType(c&7);break}}}return a})),r),t.encode=n=>Rt(n,t.codec()),t.decode=(n,i)=>Pt(n,t.codec(),i)})(Qo||(Qo={}));var Cp;(function(t){let e;t.codec=()=>(e==null&&(e=Ot((r,n,i={})=>{if(i.lengthDelimited!==!1&&n.fork(),r.id!=null&&r.id.byteLength>0&&(n.uint32(10),n.bytes(r.id)),r.addrs!=null)for(const s of r.addrs)n.uint32(18),n.bytes(s);i.lengthDelimited!==!1&&n.ldelim()},(r,n,i={})=>{const s={id:yr(0),addrs:[]},a=n==null?r.len:r.pos+n;for(;r.pos<a;){const o=r.uint32();switch(o>>>3){case 1:{s.id=r.bytes();break}case 2:{if(i.limits?.addrs!=null&&s.addrs.length===i.limits.addrs)throw new rn('Decode error - map field "addrs" had too many elements');s.addrs.push(r.bytes());break}default:{r.skipType(o&7);break}}}return s})),e),t.encode=r=>Rt(r,t.codec()),t.decode=(r,n)=>Pt(r,t.codec(),n)})(Cp||(Cp={}));var j6;(function(t){let e;t.codec=()=>(e==null&&(e=Ot((r,n,i={})=>{if(i.lengthDelimited!==!1&&n.fork(),r.expire!=null&&r.expire!==0n&&(n.uint32(8),n.uint64(r.expire)),r.addrs!=null)for(const s of r.addrs)n.uint32(18),n.bytes(s);r.voucher!=null&&(n.uint32(26),V6.codec().encode(r.voucher,n)),i.lengthDelimited!==!1&&n.ldelim()},(r,n,i={})=>{const s={expire:0n,addrs:[]},a=n==null?r.len:r.pos+n;for(;r.pos<a;){const o=r.uint32();switch(o>>>3){case 1:{s.expire=r.uint64();break}case 2:{if(i.limits?.addrs!=null&&s.addrs.length===i.limits.addrs)throw new rn('Decode error - map field "addrs" had too many elements');s.addrs.push(r.bytes());break}case 3:{s.voucher=V6.codec().decode(r,r.uint32(),{limits:i.limits?.voucher});break}default:{r.skipType(o&7);break}}}return s})),e),t.encode=r=>Rt(r,t.codec()),t.decode=(r,n)=>Pt(r,t.codec(),n)})(j6||(j6={}));var Ip;(function(t){let e;t.codec=()=>(e==null&&(e=Ot((r,n,i={})=>{i.lengthDelimited!==!1&&n.fork(),r.duration!=null&&(n.uint32(8),n.uint32(r.duration)),r.data!=null&&(n.uint32(16),n.uint64(r.data)),i.lengthDelimited!==!1&&n.ldelim()},(r,n,i={})=>{const s={},a=n==null?r.len:r.pos+n;for(;r.pos<a;){const o=r.uint32();switch(o>>>3){case 1:{s.duration=r.uint32();break}case 2:{s.data=r.uint64();break}default:{r.skipType(o&7);break}}}return s})),e),t.encode=r=>Rt(r,t.codec()),t.decode=(r,n)=>Pt(r,t.codec(),n)})(Ip||(Ip={}));var Nr;(function(t){t.UNUSED="UNUSED",t.OK="OK",t.RESERVATION_REFUSED="RESERVATION_REFUSED",t.RESOURCE_LIMIT_EXCEEDED="RESOURCE_LIMIT_EXCEEDED",t.PERMISSION_DENIED="PERMISSION_DENIED",t.CONNECTION_FAILED="CONNECTION_FAILED",t.NO_RESERVATION="NO_RESERVATION",t.MALFORMED_MESSAGE="MALFORMED_MESSAGE",t.UNEXPECTED_MESSAGE="UNEXPECTED_MESSAGE"})(Nr||(Nr={}));var IP;(function(t){t[t.UNUSED=0]="UNUSED",t[t.OK=100]="OK",t[t.RESERVATION_REFUSED=200]="RESERVATION_REFUSED",t[t.RESOURCE_LIMIT_EXCEEDED=201]="RESOURCE_LIMIT_EXCEEDED",t[t.PERMISSION_DENIED=202]="PERMISSION_DENIED",t[t.CONNECTION_FAILED=203]="CONNECTION_FAILED",t[t.NO_RESERVATION=204]="NO_RESERVATION",t[t.MALFORMED_MESSAGE=400]="MALFORMED_MESSAGE",t[t.UNEXPECTED_MESSAGE=401]="UNEXPECTED_MESSAGE"})(IP||(IP={}));(function(t){t.codec=()=>ra(IP)})(Nr||(Nr={}));var iy;(function(t){let e;t.codec=()=>(e==null&&(e=Ot((r,n,i={})=>{i.lengthDelimited!==!1&&n.fork(),r.relay!=null&&r.relay.byteLength>0&&(n.uint32(10),n.bytes(r.relay)),r.peer!=null&&r.peer.byteLength>0&&(n.uint32(18),n.bytes(r.peer)),r.expiration!=null&&r.expiration!==0n&&(n.uint32(24),n.uint64(r.expiration)),i.lengthDelimited!==!1&&n.ldelim()},(r,n,i={})=>{const s={relay:yr(0),peer:yr(0),expiration:0n},a=n==null?r.len:r.pos+n;for(;r.pos<a;){const o=r.uint32();switch(o>>>3){case 1:{s.relay=r.bytes();break}case 2:{s.peer=r.bytes();break}case 3:{s.expiration=r.uint64();break}default:{r.skipType(o&7);break}}}return s})),e),t.encode=r=>Rt(r,t.codec()),t.decode=(r,n)=>Pt(r,t.codec(),n)})(iy||(iy={}));var V6;(function(t){let e;t.codec=()=>(e==null&&(e=Ot((r,n,i={})=>{i.lengthDelimited!==!1&&n.fork(),r.publicKey!=null&&r.publicKey.byteLength>0&&(n.uint32(10),n.bytes(r.publicKey)),r.payloadType!=null&&r.payloadType.byteLength>0&&(n.uint32(18),n.bytes(r.payloadType)),r.payload!=null&&(n.uint32(26),iy.codec().encode(r.payload,n)),r.signature!=null&&r.signature.byteLength>0&&(n.uint32(42),n.bytes(r.signature)),i.lengthDelimited!==!1&&n.ldelim()},(r,n,i={})=>{const s={publicKey:yr(0),payloadType:yr(0),signature:yr(0)},a=n==null?r.len:r.pos+n;for(;r.pos<a;){const o=r.uint32();switch(o>>>3){case 1:{s.publicKey=r.bytes();break}case 2:{s.payloadType=r.bytes();break}case 3:{s.payload=iy.codec().decode(r,r.uint32(),{limits:i.limits?.payload});break}case 5:{s.signature=r.bytes();break}default:{r.skipType(o&7);break}}}return s})),e),t.encode=r=>Rt(r,t.codec()),t.decode=(r,n)=>Pt(r,t.codec(),n)})(V6||(V6={}));class f1t extends Error{constructor(e="Transfer limit error"){super(e),this.name="TransferLimitError"}}class fZ extends Error{constructor(e="Duration limit error"){super(e),this.name="DurationLimitError"}}class dZ extends Error{static name="HadEnoughRelaysError";name="HadEnoughRelaysError"}class d1t extends Error{static name="DoubleRelayError";name="DoubleRelayError"}class h1t extends Error{static name="RelayQueueFullError";name="RelayQueueFullError"}async function*hZ(t,e,r){const n=e.remaining;for await(const i of t){const s=BigInt(i.byteLength);if(e.remaining-s<0){const a=Number(e.remaining);e.remaining=0n;try{a!==0&&(yield i.subarray(0,a))}catch(o){r.log.error(o)}throw new f1t(`data limit of ${n} bytes exceeded`)}e.remaining-=s,yield i}}function p1t(t,e,r,n,i){function s(f){t.abort(f),e.abort(f)}const a=[r,n.signal];n.limit?.duration!=null&&(i.log("limiting relayed connection duration to %dms",n.limit.duration),a.push(AbortSignal.timeout(n.limit.duration)));const o=Pr(a);let c=!1,u=!1,l;n.limit?.data!=null&&(l={remaining:n.limit.data}),queueMicrotask(()=>{const f=()=>{i.log("relayed connection reached time limit"),e.abort(new fZ(`duration limit of ${n.limit?.duration} ms exceeded`))};o.addEventListener("abort",f,{once:!0}),e.sink(l==null?t.source:hZ(t.source,l,i)).catch(d=>{i.log.error("error while relaying streams src -> dst",d),s(d)}).finally(()=>{c=!0,u&&(o.removeEventListener("abort",f),o.clear())})}),queueMicrotask(()=>{const f=()=>{i.log("relayed connection reached time limit"),t.abort(new fZ(`duration limit of ${n.limit?.duration} ms exceeded`))};o.addEventListener("abort",f,{once:!0}),t.sink(l==null?e.source:hZ(e.source,l,i)).catch(d=>{i.log.error("error while relaying streams dst -> src",d),s(d)}).finally(()=>{u=!0,c&&(o.removeEventListener("abort",f),o.clear())})})}function pZ(t){const e=t*BigInt(1e3),r=new Date().getTime();return Number(e-BigInt(r))}class mZ{expires;bytes;constructor(e){e?.duration!=null&&e?.duration!==0&&(this.expires=Date.now()+e.duration*1e3),this.bytes=e?.data,this.bytes===0n&&(this.bytes=void 0),this.onData=this.onData.bind(this)}onData(e){this.bytes!=null&&(this.bytes-=BigInt(e.byteLength),this.bytes<0n&&(this.bytes=0n))}getLimits(){if(this.expires==null&&this.bytes==null)return;const e={};if(this.bytes!=null){const r=this;Object.defineProperty(e,"bytes",{get(){return r.bytes}})}if(this.expires!=null){const r=this;Object.defineProperty(e,"seconds",{get(){return Math.round(((r.expires??0)-Date.now())/1e3)}})}return e}}const b0e=Dn(Ar(xhe.matchers[0],_r("p2p-circuit"))),w0e=Dn(_r("p2p-circuit"));class m1t extends Error{type;code;constructor(e,r,n){super(e??"The operation was aborted"),this.type="aborted",this.name=n??"AbortError",this.code=r??"ABORT_ERR"}}function g1t(t,e){const r=new m1t(e?.errorMessage,e?.errorCode,e?.errorName),n=new AbortController,i=()=>{n.abort(r)};let s=AbortSignal.timeout(t);s.addEventListener("abort",i);const a=n.signal;return a.reset=o=>{s?.removeEventListener("abort",i),s=AbortSignal.timeout(o??t),s.addEventListener("abort",()=>{n.abort(r)})},a.clear=()=>{s?.removeEventListener("abort",i),s=void 0},a}let v1t=class{reservations;maxReservations;applyDefaultLimit;reservationTtl;defaultDurationLimit;defaultDataLimit;log;constructor(e,r={}){this.log=e.logger.forComponent("libp2p:circuit-relay:server:reservation-store"),this.maxReservations=r.maxReservations??r1t,this.applyDefaultLimit=r.applyDefaultLimit!==!1,this.reservationTtl=r.reservationTtl??n1t,this.defaultDurationLimit=r.defaultDurationLimit??a1t,this.defaultDataLimit=r.defaultDataLimit??o1t,this.reservations=xM({metrics:e.metrics,name:"libp2p_circuit_relay_server_reservations_total"})}reserve(e,r,n){let i=this.reservations.get(e);if(this.reservations.size>=this.maxReservations&&i==null)return{status:Nr.RESERVATION_REFUSED};const s=new Date(Date.now()+this.reservationTtl);let a;return this.applyDefaultLimit&&(a=n??{data:this.defaultDataLimit,duration:this.defaultDurationLimit}),i!=null?(this.log("refreshing reservation for client %p",e),i.signal.reset(this.reservationTtl)):(this.log("creating new reservation for client %p",e),i={addr:r,expiry:s,limit:a,signal:g1t(this.reservationTtl)}),this.reservations.set(e,i),i.signal.addEventListener("abort",()=>{this.reservations.delete(e)}),{status:Nr.OK,expire:Math.round(s.getTime()/1e3)}}removeReservation(e){this.reservations.delete(e)}get(e){return this.reservations.get(e)}clear(){this.reservations.clear()}};class OM{domain="libp2p-relay-rsvp";codec=new Uint8Array([3,2]);relay;peer;expiration;constructor({relay:e,peer:r,expiration:n}){this.relay=e,this.peer=r,this.expiration=n}marshal(){return iy.encode({relay:this.relay.toMultihash().bytes,peer:this.peer.toMultihash().bytes,expiration:BigInt(this.expiration)})}equals(e){return!(!(e instanceof OM)||!this.peer.equals(e.peer)||!this.relay.equals(e.relay)||this.expiration!==e.expiration)}}const gZ=t=>t.protoCodes().includes(v0e),y1t={maxOutboundStopStreams:CP};class b1t extends oi{registrar;peerStore;addressManager;peerId;privateKey;connectionManager;connectionGater;reservationStore;started;hopTimeout;shutdownController;maxInboundHopStreams;maxOutboundHopStreams;maxOutboundStopStreams;log;constructor(e,r={}){super(),this.log=e.logger.forComponent("libp2p:circuit-relay:server"),this.registrar=e.registrar,this.peerStore=e.peerStore,this.addressManager=e.addressManager,this.peerId=e.peerId,this.privateKey=e.privateKey,this.connectionManager=e.connectionManager,this.connectionGater=e.connectionGater,this.started=!1,this.hopTimeout=r?.hopTimeout??c1t,this.maxInboundHopStreams=r.maxInboundHopStreams,this.maxOutboundHopStreams=r.maxOutboundHopStreams,this.maxOutboundStopStreams=r.maxOutboundStopStreams??y1t.maxOutboundStopStreams,this.reservationStore=new v1t(e,r.reservations),this.shutdownController=new AbortController,this.shutdownController.signal}[Symbol.toStringTag]="@libp2p/circuit-relay-v2-server";isStarted(){return this.started}async start(){this.started||(await this.registrar.handle(Ap,e=>{this.onHop(e).catch(r=>{this.log.error(r)})},{maxInboundStreams:this.maxInboundHopStreams,maxOutboundStreams:this.maxOutboundHopStreams,runOnLimitedConnection:!0}),this.started=!0)}async stop(){this.reservationStore.clear(),this.shutdownController.abort(),await this.registrar.unhandle(Ap),this.started=!1}async onHop({connection:e,stream:r}){this.log("received circuit v2 hop protocol stream from %p",e.remotePeer);const n={signal:AbortSignal.timeout(this.hopTimeout)},i=ds(r);try{const s=await i.pb(_n).read(n);if(s?.type==null)throw new Error("request was invalid, could not read from stream");this.log("received",s.type),await this.handleHopProtocol({connection:e,stream:i,request:s},n)}catch(s){this.log.error("error while handling hop",s),await i.pb(_n).write({type:_n.Type.STATUS,status:Nr.MALFORMED_MESSAGE},n),r.abort(s)}}async handleHopProtocol({stream:e,request:r,connection:n},i){switch(this.log("received hop message"),r.type){case _n.Type.RESERVE:await this.handleReserve({stream:e,request:r,connection:n},i);break;case _n.Type.CONNECT:await this.handleConnect({stream:e,request:r,connection:n},i);break;default:this.log.error("invalid hop request type %s via peer %p",r.type,n.remotePeer),await e.pb(_n).write({type:_n.Type.STATUS,status:Nr.UNEXPECTED_MESSAGE})}}async handleReserve({stream:e,connection:r},n){const i=e.pb(_n);if(this.log("hop reserve request from %p",r.remotePeer),gZ(r.remoteAddr)){this.log.error("relay reservation over circuit connection denied for peer: %p",r.remotePeer),await i.write({type:_n.Type.STATUS,status:Nr.PERMISSION_DENIED},n);return}if(await this.connectionGater.denyInboundRelayReservation?.(r.remotePeer)===!0){this.log.error("reservation for %p denied by connection gater",r.remotePeer),await i.write({type:_n.Type.STATUS,status:Nr.PERMISSION_DENIED},n);return}const s=this.reservationStore.reserve(r.remotePeer,r.remoteAddr);try{if(s.status!==Nr.OK){await i.write({type:_n.Type.STATUS,status:s.status},n);return}if(s.expire!=null){const a=s.expire*1e3-Date.now();await this.peerStore.merge(r.remotePeer,{tags:{[lZ]:{value:1,ttl:a},[uZ]:{value:1,ttl:a}}})}await i.write({type:_n.Type.STATUS,status:Nr.OK,reservation:await this.makeReservation(r.remotePeer,BigInt(s.expire??0)),limit:this.reservationStore.get(r.remotePeer)?.limit},n),this.log("sent confirmation response to %s",r.remotePeer)}catch(a){this.log.error("failed to send confirmation response to %p - %e",r.remotePeer,a),this.reservationStore.removeReservation(r.remotePeer);try{await this.peerStore.merge(r.remotePeer,{tags:{[lZ]:void 0,[uZ]:void 0}})}catch(o){this.log.error("failed to untag relay source peer %p - %e",r.remotePeer,o)}}}async makeReservation(e,r){const n=[];for(const s of this.addressManager.getAddresses())s.toString().includes("/p2p-circuit")||n.push(s.bytes);const i=await hc.seal(new OM({peer:e,relay:this.peerId,expiration:r}),this.privateKey);return{addrs:n,expire:r,voucher:{publicKey:Ya(i.publicKey),payloadType:i.payloadType,payload:{peer:e.toMultihash().bytes,relay:this.peerId.toMultihash().bytes,expiration:r},signature:i.signature}}}async handleConnect({stream:e,request:r,connection:n},i){const s=e.pb(_n);if(gZ(n.remoteAddr)){this.log.error("relay reservation over circuit connection denied for peer: %p",n.remotePeer),await s.write({type:_n.Type.STATUS,status:Nr.PERMISSION_DENIED},i);return}this.log("hop connect request from %p",n.remotePeer);let a;try{if(r.peer==null)throw this.log.error("no peer info in hop connect request"),new Error("no peer info in request");r.peer.addrs.forEach(Mt),a=Aa(Zn(r.peer.id))}catch(d){this.log.error("invalid hop connect request via peer %p %s",n.remotePeer,d),await s.write({type:_n.Type.STATUS,status:Nr.MALFORMED_MESSAGE},i);return}const o=this.reservationStore.get(a);if(o==null){this.log.error("hop connect denied for destination peer %p not having a reservation for %p with status %s",a,n.remotePeer,Nr.NO_RESERVATION),await s.write({type:_n.Type.STATUS,status:Nr.NO_RESERVATION},i);return}if(await this.connectionGater.denyOutboundRelayedConnection?.(n.remotePeer,a)===!0){this.log.error("hop connect for %p to %p denied by connection gater",n.remotePeer,a),await s.write({type:_n.Type.STATUS,status:Nr.PERMISSION_DENIED},i);return}const c=this.connectionManager.getConnections(a);if(c.length===0){this.log("hop connect denied for destination peer %p not having a connection for %p as there is no destination connection",a,n.remotePeer),await s.write({type:_n.Type.STATUS,status:Nr.NO_RESERVATION},i);return}const u=c[0],l=await this.stopHop({connection:u,request:{type:Qo.Type.CONNECT,peer:{id:n.remotePeer.toMultihash().bytes,addrs:[]},limit:o?.limit}},i);if(l==null){this.log.error("failed to open stream to destination peer %p",u?.remotePeer),await s.write({type:_n.Type.STATUS,status:Nr.CONNECTION_FAILED},i);return}await s.write({type:_n.Type.STATUS,status:Nr.OK,limit:o?.limit},i);const f=e.unwrap();this.log("connection from %p to %p established - merging streams",n.remotePeer,a),p1t(f,l,this.shutdownController.signal,o,{log:this.log})}async stopHop({connection:e,request:r},n){this.log("starting circuit relay v2 stop request to %s",e.remotePeer);const i=await e.newStream([AP],{maxOutboundStreams:this.maxOutboundStopStreams,runOnLimitedConnection:!0,...n}),s=ds(i),a=s.pb(Qo);await a.write(r,n);let o;try{o=await a.read(n)}catch{this.log.error("error parsing stop message response from %p",e.remotePeer)}if(o==null){this.log.error("could not read response from %p",e.remotePeer),await i.close(n);return}if(o.status===Nr.OK)return this.log("stop request to %p was successful",e.remotePeer),s.unwrap();this.log("stop request failed with code %d",o.status),await i.close(n)}get reservations(){return this.reservationStore.reservations}}function w1t(t={}){return e=>new b1t(e,t)}function vZ(t){const{stream:e,remoteAddr:r,logger:n,onDataRead:i,onDataWrite:s}=t,a=n.forComponent("libp2p:stream:converter");let o=!1,c=!1;const u=e.close.bind(e);e.close=async m=>{await u(m),h(!0)};const l=e.abort.bind(e);e.abort=m=>{l(m),h(!0)};const f=e.sink.bind(e);e.sink=async m=>{try{await f(Un(m,p=>T6(p,g=>s?.(g))))}catch(p){p.type!=="aborted"&&a.error("%s error in sink",r,p)}finally{c=!0,h()}};const d={log:a,sink:e.sink,source:async function*(){try{for await(const m of e.source)i?.(m),yield m}finally{o=!0,h()}}(),remoteAddr:r,timeline:{open:Date.now(),close:void 0},close:e.close,abort:e.abort};function h(m){m===!0&&(o=!0,c=!0),o&&c&&d.timeline.close==null&&(d.timeline.close=Date.now())}return d}class _1t extends oi{peerStore;registrar;connectionManager;randomWalk;started;running;topologyId;log;discoveryController;filter;queue;constructor(e,r={}){super(),this.log=e.logger.forComponent("libp2p:circuit-relay:discover-relays"),this.started=!1,this.running=!1,this.peerStore=e.peerStore,this.registrar=e.registrar,this.connectionManager=e.connectionManager,this.randomWalk=e.randomWalk,this.filter=r.filter,this.discoveryController=new AbortController,this.discoveryController.signal}isStarted(){return this.started}async start(){this.topologyId=await this.registrar.register(Ap,{filter:this.filter,onConnect:e=>{this.log.trace("discovered relay %p queue (length: %d, active %d)",e,this.queue?.size,this.queue?.running),this.safeDispatchEvent("relay:discover",{detail:e})}}),this.started=!0}stop(){this.topologyId!=null&&this.registrar.unregister(this.topologyId),this.discoveryController?.abort(),this.started=!1}startDiscovery(){this.running||(this.log("start discovery"),this.running=!0,this.discoveryController=new AbortController,this.discoveryController.signal,Promise.resolve().then(async()=>{this.log("searching peer store for relays");const e=await this.peerStore.all({filters:[n=>n.protocols.includes(Ap)],orders:[()=>Math.random()<.5?1:-1,(n,i)=>{const s=yZ(n),a=yZ(i);return s>a?-1:a>s?1:0}]});for(const n of e)this.log.trace("found relay peer %p in peer store",n.id),this.safeDispatchEvent("relay:discover",{detail:n.id});this.log("found %d relay peers in peer store",e.length);const r=this.queue=new nd({concurrency:5});this.log("start random walk");for await(const n of this.randomWalk.walk({signal:this.discoveryController.signal})){if(this.log.trace("found random peer %p",n.id),r.has(n.id)){this.log.trace("random peer %p was already in queue",n.id);continue}if(this.connectionManager.getConnections(n.id)?.length>0){this.log.trace("random peer %p was already connected",n.id);continue}if(!await this.connectionManager.isDialable(n.multiaddrs)){this.log.trace("random peer %p was not dialable",n.id,n.multiaddrs.map(i=>i.toString()));continue}r.queued>10&&(this.log.trace("wait for space in queue for %p",n.id),await r.onSizeLessThan(10,{signal:this.discoveryController.signal})),this.log("adding random peer %p to dial queue (length: %d, active %d)",n.id,r.size,r.running),r.add(async()=>{const i=Pr([this.discoveryController.signal,AbortSignal.timeout(5e3)]);try{await this.connectionManager.openConnection(n.id,{signal:i})}finally{i.clear()}},{peerId:n.id,signal:this.discoveryController.signal}).catch(i=>{this.log.error("error opening connection to random peer %p",n.id,i)})}this.log("stop random walk"),await r.onIdle()}).catch(e=>{this.discoveryController.signal.aborted||this.log.error("failed when finding relays on the network",e)}))}stopDiscovery(){this.log("stop discovery"),this.running=!1,this.discoveryController?.abort()}}function yZ(t){const e=t.metadata.get("last-dial-success");return e==null?0:new Date(nt(e)).getTime()}class x1t extends oi{connectionManager;addressManager;reservationStore;listeningAddrs;log;listenTimeout;reservationId;relay;constructor(e,r={}){super(),this.log=e.logger.forComponent("libp2p:circuit-relay:transport:listener"),this.connectionManager=e.connectionManager,this.addressManager=e.addressManager,this.reservationStore=e.reservationStore,this.listeningAddrs=[],this.listenTimeout=r.listenTimeout??y0e,this.reservationStore.addEventListener("relay:removed",this._onRemoveRelayPeer),this.reservationStore.addEventListener("relay:created-reservation",this._onAddRelayPeer)}_onRemoveRelayPeer=e=>{this.log("relay removed %p our relay %p",e.detail.relay,this.relay,this.relay?.equals(e.detail.relay)),this.relay?.equals(e.detail.relay)===!0&&(this.log("relay peer removed %p",e.detail.relay),this.listeningAddrs.forEach(r=>{this.addressManager.removeObservedAddr(r)}),this.listeningAddrs=[],this.safeDispatchEvent("listening"))};_onAddRelayPeer=e=>{const{details:r}=e.detail;r.type!=="configured"&&r.id===this.reservationId&&this.addedRelay(e.detail)};async listen(e){if(w0e.exactMatch(e))this.log("searching for circuit relay servers"),this.reservationId=this.reservationStore.reserveRelay();else if(b0e.exactMatch(e)){this.log("listen on specific relay server %a",e);const r=AbortSignal.timeout(this.listenTimeout),n=e.decapsulate("/p2p-circuit"),i=await this.connectionManager.openConnection(n,{signal:r});if(!this.reservationStore.hasReservation(i.remotePeer)){this.log("making reservation on peer %p",i.remotePeer);const s=await this.reservationStore.addRelay(i.remotePeer,"configured");this.addedRelay(s)}}else throw new cC(`Could not listen on p2p-circuit address "${e}"`)}getAddrs(){return[...this.listeningAddrs.values()].flat()}updateAnnounceAddrs(){}async close(){this.reservationStore.cancelReservations(),this.listeningAddrs=[],this.reservationStore.removeEventListener("relay:removed",this._onRemoveRelayPeer),queueMicrotask(()=>{this.safeDispatchEvent("close")})}addedRelay(e){this.log("relay peer added %p",e.relay),this.relay=e.relay,this.listeningAddrs=e.details.reservation.addrs.map(r=>Mt(r).encapsulate("/p2p-circuit")),this.listeningAddrs.forEach(r=>{this.addressManager.confirmObservedAddr(r,{type:"transport"})}),queueMicrotask(()=>{this.safeDispatchEvent("listening")})}}function S1t(t){return new x1t(t)}const E1t="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let k1t=(t=21)=>{let e="",r=crypto.getRandomValues(new Uint8Array(t|=0));for(;t--;)e+=E1t[r[t]&63];return e};const T1t=60*1e3*10,A1t=60*1e3*5,C1t=30*1e3;class I1t extends oi{peerId;connectionManager;peerStore;events;reserveQueue;reservations;pendingReservations;maxReservationQueueLength;reservationCompletionTimeout;started;log;relayFilter;constructor(e,r){super(),this.log=e.logger.forComponent("libp2p:circuit-relay:transport:reservation-store"),this.peerId=e.peerId,this.connectionManager=e.connectionManager,this.peerStore=e.peerStore,this.events=e.events,this.reservations=new Ed,this.pendingReservations=[],this.maxReservationQueueLength=r?.maxReservationQueueLength??s1t,this.reservationCompletionTimeout=r?.reservationCompletionTimeout??y0e,this.started=!1,this.relayFilter=Jh(100),this.reserveQueue=new nd({concurrency:r?.reservationConcurrency??i1t,metricName:"libp2p_relay_reservation_queue",metrics:e.metrics}),this.events.addEventListener("connection:close",n=>{[...this.reservations.values()].find(s=>s.connection===n.detail.id)!=null&&this.#t(n.detail.remotePeer).catch(s=>{this.log("could not remove relay %p - %e",n.detail,s)})})}isStarted(){return this.started}start(){this.started=!0}afterStart(){Promise.resolve().then(async()=>{const e=await this.peerStore.all({filters:[r=>r.tags.has(zw)]});this.log("removing tag from %d old relays",e.length),await Promise.all(e.map(async r=>{await this.peerStore.merge(r.id,{tags:{[zw]:void 0}})})),this.log("redialing %d old relays",e.length),await Promise.all(e.map(async r=>this.addRelay(r.id,"discovered"))),this.#r()}).catch(e=>{this.log.error(e)})}stop(){this.reserveQueue.clear(),this.reservations.forEach(({timeout:e})=>{clearTimeout(e)}),this.reservations.clear(),this.started=!1}reserveRelay(){const e=k1t();return this.pendingReservations.push(e),this.#r(),e}async addRelay(e,r){if(this.peerId.equals(e))throw this.log.trace("not trying to use self as relay"),new cC("Cannot use self as relay");if(this.reserveQueue.size>this.maxReservationQueueLength)throw new h1t("The reservation queue is full");const n=this.reserveQueue.find(e);if(n!=null)return this.log.trace("potential relay peer %p is already in the reservation queue",e),n.join();if(this.relayFilter.has(e.toMultihash().bytes))throw new cC("The relay was previously invalid");return this.log.trace("try to reserve relay slot with %p",e),this.reserveQueue.add(async()=>{const i=Date.now();try{const s=this.reservations.get(e);if(s!=null){const m=this.connectionManager.getConnections(e);let p=!1;if(m.length===0&&this.log("already have relay reservation with %p but we are no longer connected",e),m.map(g=>g.id).includes(s.connection)&&(this.log("already have relay reservation with %p and the original connection is still open",e),p=!0),p&&pZ(s.reservation.expire)>T1t)return this.log("already have relay reservation with %p but we are still connected and it does not expire soon",e),{relay:e,details:s};await this.#t(e)}if(r==="discovered"&&this.pendingReservations.length===0)throw new dZ("Not making reservation on discovered relay because we do not need any more relays");const a=AbortSignal.timeout(this.reservationCompletionTimeout);const o=await this.connectionManager.openConnection(e,{signal:a});if(ad.matches(o.remoteAddr))throw new d1t("not creating reservation over relayed connection");const c=await this.#e(o,{signal:a}),u=pZ(c.expire);this.log("created reservation on relay peer %p, expiry date is %s",e,new Date(Date.now()+u).toString());const l=Math.min(Math.max(u-A1t,C1t),Math.pow(2,31)-1),f=setTimeout(()=>{this.log("refresh reservation to relay %p",e),this.addRelay(e,r).catch(async m=>{this.log.error("could not refresh reservation to relay %p - %e",e,m),await this.#t(e)}).catch(m=>{this.log.error("could not remove expired reservation to relay %p - %e",e,m)})},l);let d;if(r==="discovered"){const m=this.pendingReservations.pop();if(m==null)throw new dZ("Made reservation on relay but did not need any more discovered relays");d={timeout:f,reservation:c,type:r,connection:o.id,id:m}}else d={timeout:f,reservation:c,type:r,connection:o.id};this.reservations.set(e,d),await this.peerStore.merge(e,{tags:{[zw]:{value:1,ttl:u}}}),this.#r();const h={relay:e,details:d};return this.safeDispatchEvent("relay:created-reservation",{detail:h}),h}catch(s){throw r==="discovered"&&s.name==="HadEnoughRelaysError"||this.log.error("could not reserve slot on %p after %dms - %e",e,Date.now()-i,s),(s.name==="DialError"||s.name==="UnsupportedProtocolError")&&this.relayFilter.add(e.toMultihash().bytes),this.#t(e).catch(a=>{this.log.error("could not remove reservation on %p after reserving slot failed - %e",e,a)}),s}},{peerId:e})}hasReservation(e){return this.reservations.has(e)}getReservation(e){return this.reservations.get(e)?.reservation}reservationCount(e){return e==null?this.reservations.size:[...this.reservations.values()].reduce((r,n)=>(n.type===e&&r++,r),0)}cancelReservations(){[...this.reservations.values()].forEach(e=>{clearTimeout(e.timeout)}),this.reservations.clear()}async#e(e,r){r.signal?.throwIfAborted(),this.log("requesting reservation from %p",e.remotePeer);const n=await e.newStream(Ap,r),s=ds(n).pb(_n);this.log.trace("send RESERVE to %p",e.remotePeer),await s.write({type:_n.Type.RESERVE},r);let a;try{this.log.trace("reading response from %p",e.remotePeer),a=await s.read(r)}catch(c){throw n.abort(c),c}finally{n.status!=="closed"&&await n.close(r)}if(this.log.trace("read response %o",a),a.status===Nr.OK&&a.reservation!=null){const c=new Set;c.add(e.remoteAddr.toString());for(const u of a.reservation.addrs){let l=Mt(u);l.getPeerId()==null&&(l=l.encapsulate(`/p2p/${e.remotePeer}`)),l=Mt(l.toString().replace(`/p2p/${e.remotePeer}/p2p/${e.remotePeer}`,`/p2p/${e.remotePeer}`)),c.add(l.toString())}return a.reservation.addrs=[...c].map(u=>Mt(u).bytes),a.reservation}const o=`reservation failed with status ${a.status??"undefined"}`;throw this.log.error(o),new Error(o)}async#t(e){const r=this.reservations.get(e);r!=null&&(this.log("removing relay reservation with %p from local store",e),clearTimeout(r.timeout),this.reservations.delete(e),r.type==="discovered"&&this.pendingReservations.push(r.id),await this.peerStore.merge(e,{tags:{[zw]:void 0}}),this.safeDispatchEvent("relay:removed",{detail:{relay:e,details:r}}),this.#r())}#r(){if(this.pendingReservations.length===0){this.log.trace("have discovered enough relays"),this.reserveQueue.clear(),this.safeDispatchEvent("relay:found-enough-relays");return}this.relayFilter=Jh(100),this.log("not discovered enough relays %d/%d",this.reservations.size,this.pendingReservations.length),this.safeDispatchEvent("relay:not-enough-relays")}}const P1t=t=>{if(t.peer==null)return!1;try{t.peer.addrs.forEach(Mt)}catch{return!1}return!0},bZ={maxInboundStopStreams:CP,maxOutboundStopStreams:CP};class R1t{discovery;registrar;peerStore;connectionManager;transportManager;peerId;upgrader;addressManager;connectionGater;reservationStore;logger;maxInboundStopStreams;maxOutboundStopStreams;started;log;shutdownController;constructor(e,r={}){this.log=e.logger.forComponent("libp2p:circuit-relay:transport"),this.registrar=e.registrar,this.peerStore=e.peerStore,this.connectionManager=e.connectionManager,this.transportManager=e.transportManager,this.logger=e.logger,this.peerId=e.peerId,this.upgrader=e.upgrader,this.addressManager=e.addressManager,this.connectionGater=e.connectionGater,this.maxInboundStopStreams=r.maxInboundStopStreams??bZ.maxInboundStopStreams,this.maxOutboundStopStreams=r.maxOutboundStopStreams??bZ.maxOutboundStopStreams,this.shutdownController=new AbortController,this.discovery=new _1t(e,{filter:r.discoveryFilter??But(l1t,u1t)}),this.discovery.addEventListener("relay:discover",n=>{this.reservationStore.addRelay(n.detail,"discovered").catch(i=>{i.name!=="HadEnoughRelaysError"&&i.name!=="RelayQueueFullError"&&this.log.error("could not add discovered relay %p",n.detail,i)})}),this.reservationStore=new I1t(e,r),this.reservationStore.addEventListener("relay:not-enough-relays",()=>{this.discovery?.startDiscovery()}),this.reservationStore.addEventListener("relay:found-enough-relays",()=>{this.discovery?.stopDiscovery()}),this.started=!1}[Symbol.toStringTag]="@libp2p/circuit-relay-v2-transport";[Ui]=["@libp2p/transport","@libp2p/circuit-relay-v2-transport"];get[xu](){return this.discovery!=null?["@libp2p/identify"]:[]}[yy]=!0;isStarted(){return this.started}async start(){this.shutdownController=new AbortController,await this.registrar.handle(AP,e=>{const r=this.upgrader.createInboundAbortSignal(this.shutdownController.signal);this.onStop(e,r).catch(n=>{this.log.error("error while handling STOP protocol",n),e.stream.abort(n)}).finally(()=>{r.clear()})},{maxInboundStreams:this.maxInboundStopStreams,maxOutboundStreams:this.maxOutboundStopStreams,runOnLimitedConnection:!0}),await _u(this.discovery,this.reservationStore),this.started=!0}async stop(){this.shutdownController.abort(),await dd(this.discovery,this.reservationStore),await this.registrar.unhandle(AP),this.started=!1}async dial(e,r){if(e.protoCodes().filter(h=>h===v0e).length!==1){const h="Invalid circuit relay address";throw this.log.error(h,e),new Ag(h)}const n=e.toString().split("/p2p-circuit"),i=Mt(n[0]),s=Mt(n[n.length-1]),a=i.getPeerId(),o=s.getPeerId();if(a==null||o==null){const h=`ircuit relay dial to ${e.toString()} failed as address did not have both relay and destination PeerIDs`;throw this.log.error(`c${h}`),new Ag(`C${h}`)}const c=Ln(a),u=Ln(o);let f=this.connectionManager.getConnections(c)[0];f==null?(await this.peerStore.merge(c,{multiaddrs:[i]}),r.onProgress?.(new ft("circuit-relay:open-connection")),f=await this.connectionManager.openConnection(c,r)):r.onProgress?.(new ft("circuit-relay:reuse-connection"));let d;try{r.onProgress?.(new ft("circuit-relay:open-hop-stream")),d=await f.newStream(Ap,r);const h=ds(d),m=h.pb(_n);r.onProgress?.(new ft("circuit-relay:write-connect-message")),await m.write({type:_n.Type.CONNECT,peer:{id:u.toMultihash().bytes,addrs:[Mt(s).bytes]}},r),r.onProgress?.(new ft("circuit-relay:read-connect-response"));const p=await m.read(r);if(p.status!==Nr.OK)throw new On(`failed to connect via relay with status ${p?.status?.toString()??"undefined"}`);const g=new mZ(p.limit),v=vZ({stream:h.unwrap(),remoteAddr:e,localAddr:i.encapsulate(`/p2p-circuit/p2p/${this.peerId.toString()}`),logger:this.logger,onDataRead:g.onData,onDataWrite:g.onData});return this.log("new outbound relayed connection %a",v.remoteAddr),await this.upgrader.upgradeOutbound(v,{...r,limits:g.getLimits()})}catch(h){throw this.log.error("circuit relay dial to destination %p via relay %p failed",u,c,h),d?.abort(h),h}}createListener(e){return S1t({peerId:this.peerId,connectionManager:this.connectionManager,addressManager:this.addressManager,reservationStore:this.reservationStore,logger:this.logger})}listenFilter(e){return e=Array.isArray(e)?e:[e],e.filter(r=>b0e.exactMatch(r)||w0e.exactMatch(r))}dialFilter(e){return e=Array.isArray(e)?e:[e],e.filter(r=>ad.exactMatch(r))}async onStop({connection:e,stream:r},n){if(!this.reservationStore.hasReservation(e.remotePeer))try{this.log("dialed via relay we did not have a reservation on, start listening on that relay address"),await this.transportManager.listen([e.remoteAddr.encapsulate("/p2p-circuit")])}catch(l){this.log.error("failed to listen on a relay peer we were dialed via but did not have a reservation on",l)}const i=ds(r).pb(Qo),s=await i.read({signal:n});if(this.log("new circuit relay v2 stop stream from %p with type %s",e.remotePeer,s.type),s?.type===void 0){this.log.error("type was missing from circuit v2 stop protocol request from %s",e.remotePeer),await i.write({type:Qo.Type.STATUS,status:Nr.MALFORMED_MESSAGE},{signal:n}),await r.close();return}if(s.type!==Qo.Type.CONNECT){this.log.error("invalid stop connect request via peer %p",e.remotePeer),await i.write({type:Qo.Type.STATUS,status:Nr.UNEXPECTED_MESSAGE},{signal:n}),await r.close();return}if(!P1t(s)){this.log.error("invalid stop connect request via peer %p",e.remotePeer),await i.write({type:Qo.Type.STATUS,status:Nr.MALFORMED_MESSAGE},{signal:n}),await r.close({signal:n});return}const a=Aa(Zn(s.peer.id));if(await this.connectionGater.denyInboundRelayedConnection?.(e.remotePeer,a)===!0){this.log.error("connection gater denied inbound relayed connection from %p",e.remotePeer),await i.write({type:Qo.Type.STATUS,status:Nr.PERMISSION_DENIED},{signal:n}),await r.close({signal:n});return}this.log.trace("sending success response to %p",e.remotePeer),await i.write({type:Qo.Type.STATUS,status:Nr.OK},{signal:n});const o=new mZ(s.limit),c=e.remoteAddr.encapsulate(`/p2p-circuit/p2p/${a.toString()}`);this.addressManager.getAddresses()[0];const u=vZ({stream:i.unwrap().unwrap(),remoteAddr:c,logger:this.logger,onDataRead:o.onData,onDataWrite:o.onData});this.log("new inbound relayed connection %a",u.remoteAddr),await this.upgrader.upgradeInbound(u,{limits:o.getLimits(),signal:n}),this.log("%s connection %a upgraded","inbound",u.remoteAddr)}}function x2(t={}){return e=>new R1t(e,t)}const wZ=()=>{const t=new Error("Delay aborted");return t.name="AbortError",t},O1t=new WeakMap;function B1t({clearTimeout:t,setTimeout:e}={}){return(r,{value:n,signal:i}={})=>{if(i?.aborted)return Promise.reject(wZ());let s,a,o;const c=t??clearTimeout,u=()=>{c(s),o(wZ())},l=()=>{i&&i.removeEventListener("abort",u)},f=new Promise((d,h)=>{a=()=>{l(),d(n)},o=h,s=(e??setTimeout)(a,r)});return i&&i.addEventListener("abort",u,{once:!0}),O1t.set(f,()=>{c(s),s=null,a()}),f}}const _0e=B1t();var Xc;(function(t){(function(n){n.UNUSED="UNUSED",n.CONNECT="CONNECT",n.SYNC="SYNC"})(t.Type||(t.Type={}));let e;(function(n){n[n.UNUSED=0]="UNUSED",n[n.CONNECT=100]="CONNECT",n[n.SYNC=300]="SYNC"})(e||(e={})),function(n){n.codec=()=>ra(e)}(t.Type||(t.Type={}));let r;t.codec=()=>(r==null&&(r=Ot((n,i,s={})=>{if(s.lengthDelimited!==!1&&i.fork(),n.type!=null&&(i.uint32(8),t.Type.codec().encode(n.type,i)),n.observedAddresses!=null)for(const a of n.observedAddresses)i.uint32(18),i.bytes(a);s.lengthDelimited!==!1&&i.ldelim()},(n,i,s={})=>{const a={observedAddresses:[]},o=i==null?n.len:n.pos+i;for(;n.pos<o;){const c=n.uint32();switch(c>>>3){case 1:{a.type=t.Type.codec().decode(n);break}case 2:{if(s.limits?.observedAddresses!=null&&a.observedAddresses.length===s.limits.observedAddresses)throw new rn('Decode error - map field "observedAddresses" had too many elements');a.observedAddresses.push(n.bytes());break}default:{n.skipType(c&7);break}}}return a})),r),t.encode=n=>Rt(n,t.codec()),t.decode=(n,i)=>Pt(n,t.codec(),i)})(Xc||(Xc={}));function _Z(t,e){return ad.matches(t)||e.dialTransportForMultiaddr(t)==null?!1:mhe.matches(t)?!0:Uft.matches(t)?kd(t.toOptions().host)===!1:!1}const xZ=1024*4,SZ=100,Hw={timeout:5e3,retries:3,maxInboundStreams:1,maxOutboundStreams:1};class D1t{started;timeout;retries;maxInboundStreams;maxOutboundStreams;peerStore;registrar;connectionManager;addressManager;transportManager;topologyId;log;constructor(e,r){this.log=e.logger.forComponent("libp2p:dcutr"),this.started=!1,this.peerStore=e.peerStore,this.registrar=e.registrar,this.addressManager=e.addressManager,this.connectionManager=e.connectionManager,this.transportManager=e.transportManager,this.timeout=r.timeout??Hw.timeout,this.retries=r.retries??Hw.retries,this.maxInboundStreams=r.maxInboundStreams??Hw.maxInboundStreams,this.maxOutboundStreams=r.maxOutboundStreams??Hw.maxOutboundStreams}[Symbol.toStringTag]="@libp2p/dcutr";[xu]=["@libp2p/identify"];isStarted(){return this.started}async start(){this.started||(this.topologyId=await this.registrar.register(Ww,{notifyOnLimitedConnection:!0,onConnect:(e,r)=>{ad.exactMatch(r.remoteAddr)&&r.direction==="inbound"&&this.upgradeInbound(r).catch(n=>{this.log.error("error during outgoing DCUtR attempt",n)})}}),await this.registrar.handle(Ww,e=>{this.handleIncomingUpgrade(e.stream,e.connection).catch(r=>{this.log.error("error during incoming DCUtR attempt",r),e.stream.abort(r)})},{maxInboundStreams:this.maxInboundStreams,maxOutboundStreams:this.maxOutboundStreams,runOnLimitedConnection:!0}),this.started=!0)}async stop(){await this.registrar.unhandle(Ww),this.topologyId!=null&&this.registrar.unregister(this.topologyId),this.started=!1}async upgradeInbound(e){if(await this.attemptUnilateralConnectionUpgrade(e))return;let r;for(let n=0;n<this.retries;n++){const i={signal:AbortSignal.timeout(this.timeout)};try{r=await e.newStream([Ww],{signal:i.signal,runOnLimitedConnection:!0});const s=ds(r,{maxDataLength:xZ}).pb(Xc);this.log("B sending connect to %p",e.remotePeer);const a=Date.now();await s.write({type:Xc.Type.CONNECT,observedAddresses:this.addressManager.getAddresses().map(f=>f.bytes)},i),this.log("B receiving connect from %p",e.remotePeer);const o=await s.read(i);if(o.type!==Xc.Type.CONNECT)throw this.log("A sent wrong message type"),new On("DCUtR message type was incorrect");const c=this.getDialableMultiaddrs(o.observedAddresses);if(c.length===0)throw this.log("A did not have any dialable multiaddrs"),new On("DCUtR connect message had no multiaddrs");const u=Date.now()-a;this.log("A sending sync, rtt %dms",u),await s.write({type:Xc.Type.SYNC,observedAddresses:[]},i),this.log("A waiting for half RTT"),await _0e(u/2),this.log("B dialing",c);const l=await this.connectionManager.openConnection(c,{signal:i.signal,priority:SZ,force:!0,initiator:!1});this.log("DCUtR to %p succeeded to address %a, closing relayed connection",e.remotePeer,l.remoteAddr),await e.close(i);break}catch(s){if(this.log.error("error while attempting DCUtR on attempt %d of %d",n+1,this.retries,s),r?.abort(s),n===this.retries)throw s}finally{r!=null&&await r.close(i)}}}async attemptUnilateralConnectionUpgrade(e){const n=(await this.peerStore.get(e.remotePeer)).addresses.map(i=>{const s=i.multiaddr;return s.getPeerId()==null?s.encapsulate(`/p2p/${e.remotePeer}`):s}).filter(i=>_Z(i,this.transportManager));if(n.length>0){const i=AbortSignal.timeout(this.timeout);try{this.log("attempting unilateral connection upgrade to %a",n);const s=await this.connectionManager.openConnection(n,{signal:i,force:!0});if(ad.exactMatch(s.remoteAddr))throw new Error("Could not open a new, non-limited, connection");return this.log("unilateral connection upgrade to %p succeeded via %a, closing relayed connection",e.remotePeer,s.remoteAddr),await e.close({signal:i}),!0}catch(s){this.log.error("unilateral connection upgrade to %p on addresses %a failed",e.remotePeer,n,s)}}else this.log("peer %p has no public addresses, not attempting unilateral connection upgrade",e.remotePeer);return!1}async handleIncomingUpgrade(e,r){const n={signal:AbortSignal.timeout(this.timeout)};try{const i=ds(e,{maxDataLength:xZ}).pb(Xc);this.log("A receiving connect");const s=await i.read(n);if(s.type!==Xc.Type.CONNECT)throw this.log("B sent wrong message type"),new On("DCUtR message type was incorrect");if(s.observedAddresses.length===0)throw this.log("B sent no multiaddrs"),new On("DCUtR connect message had no multiaddrs");const a=this.getDialableMultiaddrs(s.observedAddresses);if(a.length===0)throw this.log("B had no dialable multiaddrs"),new On("DCUtR connect message had no dialable multiaddrs");if(this.log("A sending connect"),await i.write({type:Xc.Type.CONNECT,observedAddresses:this.addressManager.getAddresses().map(u=>u.bytes)}),this.log("A receiving sync"),(await i.read(n)).type!==Xc.Type.SYNC)throw new On("DCUtR message type was incorrect");this.log("A dialing",a);const c=await this.connectionManager.openConnection(a,{signal:n.signal,priority:SZ,force:!0});this.log("DCUtR to %p succeeded via %a, closing relayed connection",r.remotePeer,c.remoteAddr),await r.close(n)}catch(i){this.log.error("incoming DCUtR from %p failed",r.remotePeer,i),e.abort(i)}finally{await e.close(n)}}getDialableMultiaddrs(e){const r=[];for(const n of e)if(!(n==null||n.length===0))try{const i=Mt(n);if(!_Z(i,this.transportManager))continue;r.push(i)}catch{}return r}}const Ww="/libp2p/dcutr";function g_(t={}){return e=>new D1t(e,t)}const M1t="0.1.0",N1t="id",F1t="id/push",L1t="1.0.0",$1t="1.0.0",U1t=1024*8,j1t=32;var Pp;(function(t){let e;t.codec=()=>(e==null&&(e=Ot((r,n,i={})=>{if(i.lengthDelimited!==!1&&n.fork(),r.protocolVersion!=null&&(n.uint32(42),n.string(r.protocolVersion)),r.agentVersion!=null&&(n.uint32(50),n.string(r.agentVersion)),r.publicKey!=null&&(n.uint32(10),n.bytes(r.publicKey)),r.listenAddrs!=null)for(const s of r.listenAddrs)n.uint32(18),n.bytes(s);if(r.observedAddr!=null&&(n.uint32(34),n.bytes(r.observedAddr)),r.protocols!=null)for(const s of r.protocols)n.uint32(26),n.string(s);r.signedPeerRecord!=null&&(n.uint32(66),n.bytes(r.signedPeerRecord)),i.lengthDelimited!==!1&&n.ldelim()},(r,n,i={})=>{const s={listenAddrs:[],protocols:[]},a=n==null?r.len:r.pos+n;for(;r.pos<a;){const o=r.uint32();switch(o>>>3){case 5:{s.protocolVersion=r.string();break}case 6:{s.agentVersion=r.string();break}case 1:{s.publicKey=r.bytes();break}case 2:{if(i.limits?.listenAddrs!=null&&s.listenAddrs.length===i.limits.listenAddrs)throw new rn('Decode error - map field "listenAddrs" had too many elements');s.listenAddrs.push(r.bytes());break}case 4:{s.observedAddr=r.bytes();break}case 3:{if(i.limits?.protocols!=null&&s.protocols.length===i.limits.protocols)throw new rn('Decode error - map field "protocols" had too many elements');s.protocols.push(r.string());break}case 8:{s.signedPeerRecord=r.bytes();break}default:{r.skipType(o&7);break}}}return s})),e),t.encode=r=>Rt(r,t.codec()),t.decode=(r,n)=>Pt(r,t.codec(),n)})(Pp||(Pp={}));const vo={protocolPrefix:"ipfs",timeout:5e3,maxInboundStreams:1,maxOutboundStreams:1,maxObservedAddresses:10,maxMessageSize:U1t,runOnConnectionOpen:!0,runOnSelfUpdate:!0,runOnLimitedConnection:!0,concurrency:j1t};function V1t(t){if(t!=null&&t.length>0)try{return Mt(t)}catch{}}function q1t(t,e){return e??t.userAgent}async function x0e(t,e,r,n,i){if(r("received identify from %p",n.remotePeer),i==null)throw new On("message was null or undefined");const s={};if(i.listenAddrs.length>0&&(s.addresses=i.listenAddrs.map(c=>({isCertified:!1,multiaddr:Mt(c)}))),i.protocols.length>0&&(s.protocols=i.protocols),i.publicKey!=null){const c=na(i.publicKey);if(!Yh(c).equals(n.remotePeer))throw new On("public key did not match remote PeerId");s.publicKey=c}let a;if(i.signedPeerRecord!=null){r.trace("received signedPeerRecord from %p",n.remotePeer);let c=i.signedPeerRecord;const u=await hc.openAndCertify(c,Ka.DOMAIN);let l=Ka.createFromProtobuf(u.payload);const f=gm(u.publicKey.toCID());if(!l.peerId.equals(f))throw new On("signing key does not match PeerId in the PeerRecord");if(!n.remotePeer.equals(l.peerId))throw new On("signing key does not match remote PeerId");let d;try{d=await t.get(l.peerId)}catch(h){if(h.name!=="NotFoundError")throw h}if(d!=null&&(s.metadata=d.metadata,d.peerRecordEnvelope!=null)){const h=await hc.createFromProtobuf(d.peerRecordEnvelope),m=Ka.createFromProtobuf(h.payload);m.seqNumber>=l.seqNumber&&(r("sequence number was lower or equal to existing sequence number - stored: %d received: %d",m.seqNumber,l.seqNumber),l=m,c=d.peerRecordEnvelope)}s.peerRecordEnvelope=c,s.addresses=l.multiaddrs.map(h=>({isCertified:!0,multiaddr:h})),a={seq:l.seqNumber,addresses:l.multiaddrs}}else r("%p did not send a signed peer record",n.remotePeer);if(r.trace("patching %p with",n.remotePeer,s),await t.patch(n.remotePeer,s),i.agentVersion!=null||i.protocolVersion!=null){const c={};i.agentVersion!=null&&(c.AgentVersion=tt(i.agentVersion)),i.protocolVersion!=null&&(c.ProtocolVersion=tt(i.protocolVersion)),r.trace("merging %p metadata",n.remotePeer,c),await t.merge(n.remotePeer,{metadata:c})}const o={peerId:n.remotePeer,protocolVersion:i.protocolVersion,agentVersion:i.agentVersion,publicKey:i.publicKey,listenAddrs:i.listenAddrs.map(c=>Mt(c)),observedAddr:i.observedAddr==null?void 0:Mt(i.observedAddr),protocols:i.protocols,signedPeerRecord:a,connection:n};return e.safeDispatchEvent("peer:identify",{detail:o}),o}class S0e{host;protocol;started;timeout;peerId;privateKey;peerStore;registrar;addressManager;maxInboundStreams;maxOutboundStreams;maxMessageSize;maxObservedAddresses;events;runOnLimitedConnection;log;constructor(e,r){this.protocol=r.protocol,this.started=!1,this.peerId=e.peerId,this.privateKey=e.privateKey,this.peerStore=e.peerStore,this.registrar=e.registrar,this.addressManager=e.addressManager,this.events=e.events,this.log=r.log,this.timeout=r.timeout??vo.timeout,this.maxInboundStreams=r.maxInboundStreams??vo.maxInboundStreams,this.maxOutboundStreams=r.maxOutboundStreams??vo.maxOutboundStreams,this.maxMessageSize=r.maxMessageSize??vo.maxMessageSize,this.maxObservedAddresses=r.maxObservedAddresses??vo.maxObservedAddresses,this.runOnLimitedConnection=r.runOnLimitedConnection??vo.runOnLimitedConnection,this.host={protocolVersion:`${r.protocolPrefix??vo.protocolPrefix}/${M1t}`,agentVersion:q1t(e.nodeInfo,r.agentVersion)}}isStarted(){return this.started}async start(){this.started||(await this.peerStore.merge(this.peerId,{metadata:{AgentVersion:tt(this.host.agentVersion),ProtocolVersion:tt(this.host.protocolVersion)}}),await this.registrar.handle(this.protocol,e=>{this.handleProtocol(e).catch(r=>{this.log.error(r)})},{maxInboundStreams:this.maxInboundStreams,maxOutboundStreams:this.maxOutboundStreams,runOnLimitedConnection:this.runOnLimitedConnection}),this.started=!0)}async stop(){await this.registrar.unhandle(this.protocol),this.started=!1}}class z1t extends S0e{connectionManager;concurrency;constructor(e,r={}){super(e,{...r,protocol:`/${r.protocolPrefix??vo.protocolPrefix}/${F1t}/${$1t}`,log:e.logger.forComponent("libp2p:identify-push")}),this.connectionManager=e.connectionManager,this.concurrency=r.concurrency??vo.concurrency,(r.runOnSelfUpdate??vo.runOnSelfUpdate)&&e.events.addEventListener("self:peer:update",n=>{this.push().catch(i=>{this.log.error(i)})})}[Ui]=["@libp2p/identify-push"];async push(){if(!this.isStarted())return;const e=this.addressManager.getAddresses().map(l=>l.decapsulateCode(Xt("p2p").code)),r=new Ka({peerId:this.peerId,multiaddrs:e}),n=await hc.seal(r,this.privateKey),i=this.registrar.getProtocols(),s=await this.peerStore.get(this.peerId),a=nt(s.metadata.get("AgentVersion")??tt(this.host.agentVersion)),o=nt(s.metadata.get("ProtocolVersion")??tt(this.host.protocolVersion)),c=this;async function*u(){for(const l of c.connectionManager.getConnections())(await c.peerStore.get(l.remotePeer)).protocols.includes(c.protocol)&&(yield async()=>{let d;const h=AbortSignal.timeout(c.timeout);try{d=await l.newStream(c.protocol,{signal:h,runOnLimitedConnection:c.runOnLimitedConnection}),await ds(d,{maxDataLength:c.maxMessageSize}).pb(Pp).write({listenAddrs:e.map(p=>p.bytes),signedPeerRecord:n.marshal(),protocols:i,agentVersion:a,protocolVersion:o},{signal:h}),await d.close({signal:h})}catch(m){c.log.error("could not push identify update to peer",m),d?.abort(m)}})}await vc(bd(u(),{concurrency:this.concurrency}))}async handleProtocol(e){const{connection:r,stream:n}=e;try{if(this.peerId.equals(r.remotePeer))throw new Error("received push from ourselves?");const i={signal:AbortSignal.timeout(this.timeout)},a=await ds(n,{maxDataLength:this.maxMessageSize}).pb(Pp).read(i);await n.close(i),await x0e(this.peerStore,this.events,this.log,r,a)}catch(i){this.log.error("received invalid message",i),n.abort(i);return}this.log.trace("handled push from %p",r.remotePeer)}}const H1t=41;class W1t extends S0e{constructor(e,r={}){super(e,{...r,protocol:`/${r.protocolPrefix??vo.protocolPrefix}/${N1t}/${L1t}`,log:e.logger.forComponent("libp2p:identify")}),(r.runOnConnectionOpen??vo.runOnConnectionOpen)&&e.events.addEventListener("connection:open",n=>{const i=n.detail;this.identify(i).catch(s=>{s.name!==A8.name&&this.log.error("error during identify trigged by connection:open",s)})})}[Ui]=["@libp2p/identify"];async _identify(e,r={}){let n;if(r.signal==null){const i=AbortSignal.timeout(this.timeout);r={...r,signal:i}}try{n=await e.newStream(this.protocol,{...r,runOnLimitedConnection:this.runOnLimitedConnection});const s=await ds(n,{maxDataLength:this.maxMessageSize}).pb(Pp).read(r);return await n.close(r),s}catch(i){throw n?.abort(i),i}}async identify(e,r={}){const n=await this._identify(e,r),{publicKey:i,protocols:s,observedAddr:a}=n;if(i==null)throw new On("public key was missing from identify message");const o=na(i),c=gm(o.toCID());if(!e.remotePeer.equals(c))throw new On("identified peer does not match the expected peer");if(this.peerId.equals(c))throw new On("identified peer is our own peer id?");return this.maybeAddObservedAddress(a),this.log("identify completed for peer %p and protocols %o",c,s),x0e(this.peerStore,this.events,this.log,e,n)}maybeAddObservedAddress(e){const r=V1t(e);if(r==null)return;if(this.log.trace("our observed address was %a",r),e0(r)){this.log.trace("our observed address was private");return}if(r.stringTuples()[0][0]===H1t&&!o0e(r)){this.log.trace("our observed address was IPv6 but not a global unicast address");return}C6.exactMatch(r)||(this.log.trace("storing the observed address"),this.addressManager.addObservedAddr(r))}async handleProtocol(e){const{connection:r,stream:n}=e,i=AbortSignal.timeout(this.timeout);try{const s=await this.peerStore.get(this.peerId),a=this.addressManager.getAddresses().map(l=>l.decapsulateCode(Xt("p2p").code));let o=s.peerRecordEnvelope;if(a.length>0&&o==null){const l=new Ka({peerId:this.peerId,multiaddrs:a});o=(await hc.seal(l,this.privateKey)).marshal().subarray()}let c=r.remoteAddr.bytes;$ft.matches(r.remoteAddr)||(c=void 0),await ds(n).pb(Pp).write({protocolVersion:this.host.protocolVersion,agentVersion:this.host.agentVersion,publicKey:Ya(this.privateKey.publicKey),listenAddrs:a.map(l=>l.bytes),signedPeerRecord:o,observedAddr:c,protocols:s.protocols},{signal:i}),await n.close({signal:i})}catch(s){this.log.error("could not respond to identify request",s),n.abort(s)}}}function S2(t={}){return e=>new W1t(e,t)}function v_(t={}){return e=>new z1t(e,t)}const E2=1e3,BM=60*E2,y_=60*BM,G1t=36*y_,K1t="/ipfs/kad/1.0.0",X1t=48*y_,Y1t=24*y_,Z1t=10,J1t=16384,Q1t=y_,E0e=20,DM=3,ept=5*BM,tpt=E2,rpt=5*E2,npt=5*BM,ipt=30*E2,spt=180*E2,EZ=`${vy}-kad-dht`;var q6;(function(t){let e;t.codec=()=>(e==null&&(e=Ot((r,n,i={})=>{i.lengthDelimited!==!1&&n.fork(),r.key!=null&&r.key.byteLength>0&&(n.uint32(10),n.bytes(r.key)),r.value!=null&&r.value.byteLength>0&&(n.uint32(18),n.bytes(r.value)),r.timeReceived!=null&&r.timeReceived!==""&&(n.uint32(42),n.string(r.timeReceived)),i.lengthDelimited!==!1&&n.ldelim()},(r,n,i={})=>{const s={key:yr(0),value:yr(0),timeReceived:""},a=n==null?r.len:r.pos+n;for(;r.pos<a;){const o=r.uint32();switch(o>>>3){case 1:{s.key=r.bytes();break}case 2:{s.value=r.bytes();break}case 5:{s.timeReceived=r.string();break}default:{r.skipType(o&7);break}}}return s})),e),t.encode=r=>Rt(r,t.codec()),t.decode=(r,n)=>Pt(r,t.codec(),n)})(q6||(q6={}));function apt(t){const e=t.getUTCFullYear(),r=String(t.getUTCMonth()+1).padStart(2,"0"),n=String(t.getUTCDate()).padStart(2,"0"),i=String(t.getUTCHours()).padStart(2,"0"),s=String(t.getUTCMinutes()).padStart(2,"0"),a=String(t.getUTCSeconds()).padStart(2,"0"),o=t.getUTCMilliseconds(),c=String(o*1e3*1e3).padStart(9,"0");return`${e}-${r}-${n}T${i}:${s}:${a}.${c}Z`}function opt(t){const e=new RegExp("(\\d{4})-(\\d{2})-(\\d{2})T(\\d{2}):(\\d{2}):(\\d{2})\\.(\\d+)Z"),r=String(t).trim().match(e);if(r==null)throw new Error("Invalid format");const n=parseInt(r[1],10),i=parseInt(r[2],10)-1,s=parseInt(r[3],10),a=parseInt(r[4],10),o=parseInt(r[5],10),c=parseInt(r[6],10),u=parseInt(r[7].slice(0,-6),10);return new Date(Date.UTC(n,i,s,a,o,c,u))}class Ao{key;value;timeReceived;constructor(e,r,n){if(!(e instanceof Uint8Array))throw new Error("key must be a Uint8Array");if(!(r instanceof Uint8Array))throw new Error("value must be a Uint8Array");this.key=e,this.value=r,this.timeReceived=n}serialize(){return q6.encode(this.prepareSerialize())}prepareSerialize(){return{key:this.key,value:this.value,timeReceived:apt(this.timeReceived)}}static deserialize(e){const r=q6.decode(e);return new Ao(r.key,r.value,new Date(r.timeReceived))}static fromDeserialized(e){const r=opt(e.timeReceived);if(e.key==null)throw new Error("key missing from deserialized object");if(e.value==null)throw new Error("value missing from deserialized object");return new Ao(e.key,e.value,r)}}class z6 extends Error{constructor(e="Query error"){super(e),this.name="QueryError"}}class cpt extends Error{constructor(e="Query aborted"){super(e),this.name="QueryAbortedError"}}class lpt extends Error{constructor(e="Invalid record"){super(e),this.name="InvalidRecordError"}}class upt extends Error{constructor(e="No selector function configured for prefix"){super(e),this.name="MissingSelectorError"}}var kZ;(function(t){let e;t.codec=()=>(e==null&&(e=Ot((r,n,i={})=>{i.lengthDelimited!==!1&&n.fork(),r.key!=null&&(n.uint32(10),n.bytes(r.key)),r.value!=null&&(n.uint32(18),n.bytes(r.value)),r.author!=null&&(n.uint32(26),n.bytes(r.author)),r.signature!=null&&(n.uint32(34),n.bytes(r.signature)),r.timeReceived!=null&&(n.uint32(42),n.string(r.timeReceived)),i.lengthDelimited!==!1&&n.ldelim()},(r,n,i={})=>{const s={},a=n==null?r.len:r.pos+n;for(;r.pos<a;){const o=r.uint32();switch(o>>>3){case 1:{s.key=r.bytes();break}case 2:{s.value=r.bytes();break}case 3:{s.author=r.bytes();break}case 4:{s.signature=r.bytes();break}case 5:{s.timeReceived=r.string();break}default:{r.skipType(o&7);break}}}return s})),e),t.encode=r=>Rt(r,t.codec()),t.decode=(r,n)=>Pt(r,t.codec(),n)})(kZ||(kZ={}));var Tn;(function(t){t.PUT_VALUE="PUT_VALUE",t.GET_VALUE="GET_VALUE",t.ADD_PROVIDER="ADD_PROVIDER",t.GET_PROVIDERS="GET_PROVIDERS",t.FIND_NODE="FIND_NODE",t.PING="PING"})(Tn||(Tn={}));var H6;(function(t){t[t.PUT_VALUE=0]="PUT_VALUE",t[t.GET_VALUE=1]="GET_VALUE",t[t.ADD_PROVIDER=2]="ADD_PROVIDER",t[t.GET_PROVIDERS=3]="GET_PROVIDERS",t[t.FIND_NODE=4]="FIND_NODE",t[t.PING=5]="PING"})(H6||(H6={}));(function(t){t.codec=()=>ra(H6)})(Tn||(Tn={}));var Rp;(function(t){t.NOT_CONNECTED="NOT_CONNECTED",t.CONNECTED="CONNECTED",t.CAN_CONNECT="CAN_CONNECT",t.CANNOT_CONNECT="CANNOT_CONNECT"})(Rp||(Rp={}));var PP;(function(t){t[t.NOT_CONNECTED=0]="NOT_CONNECTED",t[t.CONNECTED=1]="CONNECTED",t[t.CAN_CONNECT=2]="CAN_CONNECT",t[t.CANNOT_CONNECT=3]="CANNOT_CONNECT"})(PP||(PP={}));(function(t){t.codec=()=>ra(PP)})(Rp||(Rp={}));var x1;(function(t){let e;t.codec=()=>(e==null&&(e=Ot((r,n,i={})=>{if(i.lengthDelimited!==!1&&n.fork(),r.id!=null&&r.id.byteLength>0&&(n.uint32(10),n.bytes(r.id)),r.multiaddrs!=null)for(const s of r.multiaddrs)n.uint32(18),n.bytes(s);r.connection!=null&&(n.uint32(24),Rp.codec().encode(r.connection,n)),i.lengthDelimited!==!1&&n.ldelim()},(r,n,i={})=>{const s={id:yr(0),multiaddrs:[]},a=n==null?r.len:r.pos+n;for(;r.pos<a;){const o=r.uint32();switch(o>>>3){case 1:{s.id=r.bytes();break}case 2:{if(i.limits?.multiaddrs!=null&&s.multiaddrs.length===i.limits.multiaddrs)throw new rn('Decode error - map field "multiaddrs" had too many elements');s.multiaddrs.push(r.bytes());break}case 3:{s.connection=Rp.codec().decode(r);break}default:{r.skipType(o&7);break}}}return s})),e),t.encode=r=>Rt(r,t.codec()),t.decode=(r,n)=>Pt(r,t.codec(),n)})(x1||(x1={}));var Sh;(function(t){let e;t.codec=()=>(e==null&&(e=Ot((r,n,i={})=>{if(i.lengthDelimited!==!1&&n.fork(),r.type!=null&&H6[r.type]!==0&&(n.uint32(8),Tn.codec().encode(r.type,n)),r.clusterLevel!=null&&(n.uint32(80),n.int32(r.clusterLevel)),r.key!=null&&(n.uint32(18),n.bytes(r.key)),r.record!=null&&(n.uint32(26),n.bytes(r.record)),r.closer!=null)for(const s of r.closer)n.uint32(66),x1.codec().encode(s,n);if(r.providers!=null)for(const s of r.providers)n.uint32(74),x1.codec().encode(s,n);i.lengthDelimited!==!1&&n.ldelim()},(r,n,i={})=>{const s={type:Tn.PUT_VALUE,closer:[],providers:[]},a=n==null?r.len:r.pos+n;for(;r.pos<a;){const o=r.uint32();switch(o>>>3){case 1:{s.type=Tn.codec().decode(r);break}case 10:{s.clusterLevel=r.int32();break}case 2:{s.key=r.bytes();break}case 3:{s.record=r.bytes();break}case 8:{if(i.limits?.closer!=null&&s.closer.length===i.limits.closer)throw new rn('Decode error - map field "closer" had too many elements');s.closer.push(x1.codec().decode(r,r.uint32(),{limits:i.limits?.closer$}));break}case 9:{if(i.limits?.providers!=null&&s.providers.length===i.limits.providers)throw new rn('Decode error - map field "providers" had too many elements');s.providers.push(x1.codec().decode(r,r.uint32(),{limits:i.limits?.providers$}));break}default:{r.skipType(o&7);break}}}return s})),e),t.encode=r=>Rt(r,t.codec()),t.decode=(r,n)=>Pt(r,t.codec(),n)})(Sh||(Sh={}));function TZ(t,e={}){const r={...t,name:"SEND_QUERY",type:0,messageName:t.type,messageType:t.type};return e.onProgress?.(new CustomEvent("kad-dht:query:send-query",{detail:r})),r}function RP(t,e={}){const r={...t,name:"PEER_RESPONSE",type:1,messageName:t.messageType,closer:t.closer??[],providers:t.providers??[]};return e.onProgress?.(new CustomEvent("kad-dht:query:peer-response",{detail:r})),r}function iA(t,e={}){const r={...t,name:"FINAL_PEER",type:2};return e.onProgress?.(new CustomEvent("kad-dht:query:final-peer",{detail:r})),r}function od(t,e={}){const r={...t,name:"QUERY_ERROR",type:3};return e.onProgress?.(new CustomEvent("kad-dht:query:query-error",{detail:r})),r}function AZ(t,e={}){const r={...t,name:"PROVIDER",type:4};return e.onProgress?.(new CustomEvent("kad-dht:query:provider",{detail:r})),r}function OP(t,e={}){const r={...t,name:"VALUE",type:5};return e.onProgress?.(new CustomEvent("kad-dht:query:value",{detail:r})),r}function CZ(t,e={}){const r={...t,name:"DIAL_PEER",type:7};return e.onProgress?.(new CustomEvent("kad-dht:query:dial-peer",{detail:r})),r}function fpt(t,e,r){if(r.length===0)throw new Ze("No records given");const i=nt(e).split("/");if(i.length<3)throw new Ze("Record key does not have a selector function");const s=t[i[1].toString()];if(s==null)throw new upt(`No selector function configured for key type "${i[1]}"`);return r.length===1?0:s(e,r)}function dpt(t,e){return 0}const hpt={pk:dpt};async function MM(t,e){const r=e.key,i=nt(r).split("/");if(i.length<3)return;const s=t[i[1].toString()];if(s==null)throw new Ze(`No validator available for key type "${i[1]}"`);await s(r,e.value)}const ppt=async(t,e)=>{if(!(t instanceof Uint8Array))throw new Ze('"key" must be a Uint8Array');if(t.byteLength<5)throw new Ze("Invalid public key record");if(nt(t.subarray(0,4))!=="/pk/")throw new Ze("key was not prefixed with /pk/");const n=na(e),i=t.slice(4);if(!Tr(i,n.toMultihash().bytes))throw new Ze("public key does not match passed in key")},mpt={pk:ppt},gpt=tt("/pk/");function vpt(t){return{...t,multiaddrs:t.multiaddrs.filter(e=>{const[[r,n]]=e.stringTuples();if(r===53||r===54||r===55)return n!=="localhost";if(r!==4&&r!==6||n==null)return!1;const i=kd(n);return i==null?!0:!i})}}async function sy(t){return(await ci.digest(t)).digest}async function wc(t){return sy(t.toMultihash().bytes)}function Gg(t,e){return new Sn(`${t}/${nt(e,"base32")}`,!1)}function ypt(t){return qn([gpt,t.toMultihash().bytes])}function bpt(t){return nt(t.subarray(0,4))==="/pk/"}function wpt(t){const e=Zn(t.subarray(4));return Aa(e)}function IZ(t,e){const r=new Date;return new Ao(t,e,r).serialize()}const _pt=290,xpt=54,Spt=55,Ept=56,kpt=4,Tpt=41;function Apt(t){const e=t.stringTuples();for(const r of e)if(r[0]===_pt)return!1;if(e[0][0]===xpt||e[0][0]===Spt||e[0][0]===Ept)return!0;if(e[0][0]===kpt||e[0][0]===Tpt){const r=kd(`${e[0][1]}`);return r==null||!r}return!1}function k0e(t){const e=t.toString().split("/"),r=e.pop(),n=e.pop();if(r==null||n==null)throw new Error(`incorrectly formatted provider entry key in datastore: ${t.toString()}`);return{cid:mt.createV1(Ro,Zn(tt(n,"base32"))),peerId:Ln(r)}}function sA(t,e,r){const n=typeof e=="string"?e:nt(e.multihash.bytes,"base32"),i=[t,n];return r!=null&&i.push(r.toString()),new Sn(i.join("/"))}function T0e(t){return new Date(kl(t))}function n1(t,e,r){return async function*(...n){const i=e.queryTime?.timer(r),s=e.errorTime?.timer(r);let a=!1;try{e.queries?.increment({[r]:!0}),yield*t(...n)}catch(o){throw a=!0,s?.(),e.errors?.increment({[r]:!0}),o}finally{e.queries?.decrement({[r]:!0}),a||i?.()}}}function A0e(t,e,r){return async function(...n){const i=e?.queryTime?.timer(r),s=e?.errorTime?.timer(r);let a=!1;try{return e.queries?.increment({[r]:!0}),await t(...n)}catch(o){throw a=!0,s?.(),e.errors?.increment({[r]:!0}),o}finally{e.queries?.decrement({[r]:!0}),a||i?.()}}}class Cpt{log;components;validators;selectors;peerRouting;queryManager;network;datastorePrefix;constructor(e,r){const{validators:n,selectors:i,peerRouting:s,queryManager:a,network:o,logPrefix:c}=r;this.components=e,this.log=e.logger.forComponent(`${c}:content-fetching`),this.datastorePrefix=`${r.datastorePrefix}/record`,this.validators=n,this.selectors=i,this.peerRouting=s,this.queryManager=a,this.network=o,this.get=e.metrics?.traceFunction("libp2p.kadDHT.get",this.get.bind(this),{optionsIndex:1})??this.get,this.put=e.metrics?.traceFunction("libp2p.kadDHT.put",this.put.bind(this),{optionsIndex:2})??this.put}async getLocal(e){this.log("getLocal %b",e);const r=Gg(this.datastorePrefix,e);this.log("fetching record for key %k",r);const n=await this.components.datastore.get(r);this.log("found %k in local datastore",r);const i=Ao.deserialize(n);return await MM(this.validators,i),i}async*sendCorrectionRecord(e,r,n,i={}){this.log("sendCorrection for %b",e);const s=IZ(e,n);for(const{value:a,from:o}of r){if(Tr(a,n)){this.log("record was ok");continue}if(this.components.peerId.equals(o)){try{const l=Gg(this.datastorePrefix,e);this.log(`Storing corrected record for key ${l.toString()}`),await this.components.datastore.put(l,s.subarray())}catch(l){this.log.error("Failed error correcting self",l)}continue}let c=!1;const u={type:Tn.PUT_VALUE,key:e,record:s};for await(const l of this.network.sendRequest(o,u,i))l.name==="PEER_RESPONSE"&&l.record!=null&&Tr(l.record.value,Ao.deserialize(s).value)&&(c=!0),yield l;c||(yield od({from:o,error:new z6("Value not put correctly")},i)),this.log.error("Failed error correcting entry")}}async*put(e,r,n={}){this.log("put key %b value %b",e,r);const i=IZ(e,r),s=Gg(this.datastorePrefix,e);this.log(`storing record for key ${s.toString()}`),await this.components.datastore.put(s,i.subarray()),yield*Un(this.peerRouting.getClosestPeers(e,{...n,signal:n.signal}),a=>Vu(a,o=>async()=>{if(o.name!=="FINAL_PEER")return[o];const c=[],u={type:Tn.PUT_VALUE,key:e,record:i};this.log("send put to %p",o.peer.id);for await(const l of this.network.sendRequest(o.peer.id,u,n))c.push(l),l.name==="PEER_RESPONSE"&&(l.record!=null&&Tr(l.record.value,Ao.deserialize(i).value)||c.push(od({from:o.peer.id,error:new z6("Value not put correctly")},n)));return c}),a=>bd(a,{ordered:!1,concurrency:DM}),async function*(a){for await(const o of a)yield*o})}async*get(e,r={}){this.log("get %b",e);const n=[];for await(const o of this.getMany(e,r))o.name==="VALUE"&&n.push(o),yield o;if(n.length===0)return;const i=n.map(o=>o.value);let s=0;try{s=fpt(this.selectors,e,i)}catch(o){if(o.name!=="InvalidParametersError")throw o}const a=i[s];if(this.log("GetValue %b %b",e,a),a==null)throw new Bs("Best value was not found");yield*this.sendCorrectionRecord(e,n,a,r),yield n[s]}async*getMany(e,r={}){this.log("getMany values for %b",e);try{const s=await this.getLocal(e);yield OP({value:s.value,from:this.components.peerId},r)}catch(s){this.log("error getting local value for %b",e,s)}const n=this,i=async function*({peer:s,signal:a}){for await(const o of n.peerRouting.getValueOrPeers(s,e,{...r,signal:a}))yield o,o.name==="PEER_RESPONSE"&&o.record!=null&&(yield OP({from:s,value:o.record.value},r))};yield*this.queryManager.run(e,i,r)}}function Ipt(t,e){return{id:t.id.toMultihash().bytes,multiaddrs:(t.multiaddrs??[]).map(n=>n.bytes),connection:e}}function Gw(t){if(t.id==null)throw new Error("Invalid peer in message");const e=Zn(t.id);return{id:Aa(e),multiaddrs:(t.multiaddrs??[]).map(r=>Mt(r))}}class Ppt{log;components;network;peerRouting;queryManager;routingTable;providers;constructor(e,r){const{network:n,peerRouting:i,queryManager:s,routingTable:a,providers:o,logPrefix:c}=r;this.components=e,this.log=e.logger.forComponent(`${c}:content-routing`),this.network=n,this.peerRouting=i,this.queryManager=s,this.routingTable=a,this.providers=o,this.findProviders=e.metrics?.traceFunction("libp2p.kadDHT.findProviders",this.findProviders.bind(this),{optionsIndex:1,getAttributesFromYieldedValue:(u,l)=>(u.name==="PROVIDER"&&(l.providers??=[],l.providers.push(...u.providers.map(f=>f.id.toString()))),l)})??this.findProviders,this.provide=e.metrics?.traceFunction("libp2p.kadDHT.provide",this.provide.bind(this),{optionsIndex:1,getAttributesFromYieldedValue:(u,l)=>(u.name==="PEER_RESPONSE"&&u.messageName==="ADD_PROVIDER"&&(l.providers??=[],l.providers.push(u.from.toString())),l)})??this.provide}async*provide(e,r,n={}){this.log("provide %s",e);const i=e.multihash.bytes;await this.providers.addProvider(e,this.components.peerId);const s={type:Tn.ADD_PROVIDER,key:i,providers:[Ipt({id:this.components.peerId,multiaddrs:r})]};let a=0;const o=c=>async()=>{if(c.name!=="FINAL_PEER")return[c];const u=[];this.log("putProvider %s to %p",e,c.peer.id);try{this.log("sending provider record for %s to %p",e,c.peer.id);for await(const l of this.network.sendMessage(c.peer.id,s,n))l.name==="PEER_RESPONSE"&&(this.log("sent provider record for %s to %p",e,c.peer.id),a++),u.push(l)}catch(l){this.log.error("error sending provide record to peer %p",c.peer.id,l),u.push(od({from:c.peer.id,error:l},n))}return u};yield*Un(this.peerRouting.getClosestPeers(i,n),c=>Vu(c,u=>o(u)),c=>bd(c,{ordered:!1,concurrency:DM}),async function*(c){for await(const u of c)yield*u}),this.log("sent provider records to %d peers",a)}async*findProviders(e,r){const n=this.routingTable.kBucketSize;let i=0;const s=e.multihash.bytes,a=this;this.log("findProviders %c",e);const o=await this.providers.getProviders(e);if(o.length>0){const l=[];for(const f of o.slice(0,n))try{const d=await this.components.peerStore.get(f);l.push({id:f,multiaddrs:d.addresses.map(({multiaddr:h})=>h)})}catch(d){if(d.name!=="NotFoundError")throw d;this.log("no peer store entry for %p",f)}if(yield RP({from:this.components.peerId,messageType:Tn.GET_PROVIDERS,providers:l},r),yield AZ({from:this.components.peerId,providers:l},r),i+=l.length,i>=n)return}const c=async function*({peer:l,signal:f}){const d={type:Tn.GET_PROVIDERS,key:s};yield*a.network.sendRequest(l,d,{...r,signal:f})},u=new fc(o);for await(const l of this.queryManager.run(s,c,r))if(yield l,l.name==="PEER_RESPONSE"){this.log("Found %d provider entries for %c and %d closer peers",l.providers.length,e,l.closer.length);const f=[];for(const d of l.providers)u.has(d.id)||(u.add(d.id),f.push(d));if(f.length>0&&(yield AZ({from:l.from,providers:f},r),i+=f.length,i>=n))return}}}class aA{movingAverage;variance;deviation;forecast;timeSpan;previousTime;constructor(e){this.timeSpan=e,this.movingAverage=0,this.variance=0,this.deviation=0,this.forecast=0}alpha(e,r){return 1-Math.exp(-(e-r)/this.timeSpan)}push(e,r=Date.now()){if(this.previousTime!=null){const n=this.alpha(r,this.previousTime),i=e-this.movingAverage,s=n*i;this.movingAverage=n*e+(1-n)*this.movingAverage,this.variance=(1-n)*(this.variance+i*s),this.deviation=Math.sqrt(this.variance),this.forecast=this.movingAverage+n*i}else this.movingAverage=e;this.previousTime=r}}const Rpt=1.2,Opt=2,Bpt=2e3;class ay{success;failure;next;metric;timeoutMultiplier;failureMultiplier;minTimeout;constructor(e={}){this.success=new aA(e.interval??5e3),this.failure=new aA(e.interval??5e3),this.next=new aA(e.interval??5e3),this.failureMultiplier=e.failureMultiplier??Opt,this.timeoutMultiplier=e.timeoutMultiplier??Rpt,this.minTimeout=e.minTimeout??Bpt,e.metricName!=null&&(this.metric=e.metrics?.registerMetricGroup(e.metricName))}getTimeoutSignal(e={}){const r=Math.max(Math.round(this.next.movingAverage*(e.timeoutFactor??this.timeoutMultiplier)),this.minTimeout),n=AbortSignal.timeout(r),i=Pr([e.signal,n]);return i.start=Date.now(),i.timeout=r,i}cleanUp(e){const r=Date.now()-e.start;e.aborted?(this.failure.push(r),this.next.push(r*this.failureMultiplier),this.metric?.update({failureMovingAverage:this.failure.movingAverage,failureDeviation:this.failure.deviation,failureForecast:this.failure.forecast,failureVariance:this.failure.variance,failure:r})):(this.success.push(r),this.next.push(r),this.metric?.update({successMovingAverage:this.success.movingAverage,successDeviation:this.success.deviation,successForecast:this.success.forecast,successVariance:this.success.variance,success:r}))}}class Dpt extends oi{log;protocol;running;components;timeout;metrics;constructor(e,r){super(),this.components=e,this.log=e.logger.forComponent(`${r.logPrefix}:network`),this.running=!1,this.protocol=r.protocol,this.timeout=new ay({...r.timeout??{},metrics:e.metrics,metricName:`${r.metricsPrefix}_network_message_send_times_milliseconds`}),this.metrics={operations:e.metrics?.registerCounterGroup(`${r.metricsPrefix}_outbound_rpc_requests_total`),errors:e.metrics?.registerCounterGroup(`${r.metricsPrefix}_outbound_rpc_errors_total`)},this.sendRequest=e.metrics?.traceFunction("libp2p.kadDHT.sendRequest",this.sendRequest.bind(this),{optionsIndex:2,getAttributesFromArgs([n,i],s){return{...s,to:n.toString(),"message type":`${i.type}`}},getAttributesFromYieldedValue:(n,i)=>(n.name==="PEER_RESPONSE"&&(n.providers.length>0&&n.providers.forEach((s,a)=>{i[`providers-${a}`]=s.id.toString()}),n.closer.length>0&&n.closer.forEach((s,a)=>{i[`closer-${a}`]=s.id.toString()})),i)})??this.sendRequest,this.sendMessage=e.metrics?.traceFunction("libp2p.kadDHT.sendMessage",this.sendMessage.bind(this),{optionsIndex:2,getAttributesFromArgs([n,i],s){return{...s,to:n.toString(),"message type":`${i.type}`}},getAttributesFromYieldedValue:(n,i)=>(n.name==="PEER_RESPONSE"&&(n.providers.length>0&&n.providers.forEach((s,a)=>{i[`providers-${a}`]=s.id.toString()}),n.closer.length>0&&n.closer.forEach((s,a)=>{i[`closer-${a}`]=s.id.toString()})),i)})??this.sendMessage}async start(){this.running||(this.running=!0)}async stop(){this.running=!1}isStarted(){return this.running}async*sendRequest(e,r,n={}){if(!this.running)return;const i=r.type;if(i==null)throw new Ze("Message type was missing");this.log("sending %s to %p",r.type,e),yield CZ({peer:e},n),yield TZ({to:e,type:i},n);let s;const a=this.timeout.getTimeoutSignal(n);n={...n,signal:a};try{this.metrics.operations?.increment({[i]:!0}),s=await(await this.components.connectionManager.openConnection(e,n)).newStream(this.protocol,n);const c=await this._writeReadMessage(s,r,n);s.close(n).catch(u=>{this.log.error("error closing stream to %p",e,u),s?.abort(u)}),yield RP({from:e,messageType:c.type,closer:c.closer.map(Gw),providers:c.providers.map(Gw),record:c.record==null?void 0:Ao.deserialize(c.record)},n)}catch(o){this.metrics.errors?.increment({[i]:!0}),s?.abort(o),n.signal?.aborted!==!0&&this.log.error("could not send %s to %p - %e",r.type,e,o),yield od({from:e,error:o},n)}finally{this.timeout.cleanUp(a)}}async*sendMessage(e,r,n={}){if(!this.running)return;const i=r.type;if(i==null)throw new Ze("Message type was missing");this.log("sending %s to %p",r.type,e),yield CZ({peer:e},n),yield TZ({to:e,type:i},n);let s;const a=this.timeout.getTimeoutSignal(n);n={...n,signal:a};try{this.metrics.operations?.increment({[i]:!0}),s=await(await this.components.connectionManager.openConnection(e,n)).newStream(this.protocol,n),await this._writeMessage(s,r,n),s.close(n).catch(c=>{this.log.error("error closing stream to %p",e,c),s?.abort(c)}),yield RP({from:e,messageType:i},n)}catch(o){this.metrics.errors?.increment({[i]:!0}),s?.abort(o),yield od({from:e,error:o},n)}finally{this.timeout.cleanUp(a)}}async _writeMessage(e,r,n){await ds(e).write(r,Sh,n)}async _writeReadMessage(e,r,n){const i=ds(e);await i.write(r,Sh,n);const s=await i.read(Sh,n);return s.closer.forEach(a=>{this.safeDispatchEvent("peer",{detail:Gw(a)})}),s.providers.forEach(a=>{this.safeDispatchEvent("peer",{detail:Gw(a)})}),s}}function oy(t,e){if(t.byteLength!==e.byteLength)throw new Error("Inputs should have the same length");for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return t[r]<e[r]?-1:1;return 0}class NM{originDhtKey;capacity;peerDistances;constructor(e,r){this.originDhtKey=e,this.capacity=r,this.peerDistances=[]}get length(){return this.peerDistances.length}get peers(){return this.peerDistances.map(e=>e.peer)}async add(e){const r=await wc(e.id);this.addWithKadId(e,r)}addWithKadId(e,r){if(this.peerDistances.find(s=>s.peer.id.equals(e.id))!=null)return;const n={peer:e,distance:rd(this.originDhtKey,r)};let i=!1;for(let s=0;s<this.peerDistances.length;s++){const a=oy(this.peerDistances[s].distance,n.distance);if(a===0||a===1){i=!0,this.peerDistances.splice(s,0,n);break}}i||this.peerDistances.push(n),this.peerDistances=this.peerDistances.slice(0,this.capacity)}async isCloser(e){if(this.length===0)return!0;const r=await wc(e),n=rd(r,this.originDhtKey),i=this.peerDistances[this.peerDistances.length-1].distance;return oy(n,i)===-1}async anyCloser(e){return e.length===0?!1:Promise.any(e.map(async r=>this.isCloser(r)))}}class Mpt{log;routingTable;network;validators;queryManager;peerStore;peerId;constructor(e,r){this.routingTable=r.routingTable,this.network=r.network,this.validators=r.validators,this.queryManager=r.queryManager,this.peerStore=e.peerStore,this.peerId=e.peerId,this.log=e.logger.forComponent(`${r.logPrefix}:peer-routing`),this.findPeer=e.metrics?.traceFunction("libp2p.kadDHT.findPeer",this.findPeer.bind(this),{optionsIndex:1})??this.findPeer,this.getClosestPeers=e.metrics?.traceFunction("libp2p.kadDHT.getClosestPeers",this.getClosestPeers.bind(this),{optionsIndex:1})??this.getClosestPeers}async findPeerLocal(e){let r;const n=await this.routingTable.find(e);if(n!=null){this.log("findPeerLocal found %p in routing table",e);try{r=await this.peerStore.get(n)}catch(i){if(i.name!=="NotFoundError")throw i}}if(r==null)try{r=await this.peerStore.get(e)}catch(i){if(i.name!=="NotFoundError")throw i}if(r!=null)return this.log("findPeerLocal found %p in peer store",e),{id:r.id,multiaddrs:r.addresses.map(i=>i.multiaddr)}}async*_getValueSingle(e,r,n={}){const i={type:Tn.GET_VALUE,key:r};yield*this.network.sendRequest(e,i,n)}async*getPublicKeyFromNode(e,r={}){const n=ypt(e);for await(const i of this._getValueSingle(e,n,r))if(yield i,i.name==="PEER_RESPONSE"&&i.record!=null){const s=na(i.record.value),a=Yh(s);if(!a.equals(e))throw new n4("public key does not match id");if(a.publicKey==null)throw new n4("public key missing");yield OP({from:e,value:i.record.value},r)}throw new z6(`Node not responding with its public key: ${e.toString()}`)}async*findPeer(e,r={}){if(this.log("findPeer %p",e),r.useCache!==!1){const i=await this.findPeerLocal(e);if(i!=null){this.log("found local"),yield iA({from:this.peerId,peer:i},r);return}}let n=!1;if(r.useNetwork!==!1){const i=this,s=async function*({peer:a,signal:o}){const c={type:Tn.FIND_NODE,key:e.toMultihash().bytes};for await(const u of i.network.sendRequest(a,c,{...r,signal:o}))if(yield u,u.name==="PEER_RESPONSE"){const l=u.closer.find(f=>f.id.equals(e));l!=null&&(yield iA({from:u.from,peer:l},r))}};for await(const a of this.queryManager.run(e.toMultihash().bytes,s,r))a.name==="FINAL_PEER"&&(n=!0),yield a}n||(yield od({from:this.peerId,error:new Bs("Not found")},r))}async*getClosestPeers(e,r={}){this.log("getClosestPeers to %b",e);const n=await sy(e),i=this.routingTable.closestPeers(n),s=this,a=new NM(n,this.routingTable.kBucketSize);await Promise.all(i.map(async c=>{await a.add({id:c,multiaddrs:[]})}));const o=async function*({peer:c,signal:u}){s.log("closerPeersSingle %s from %p",nt(e,"base32"),c);const l={type:Tn.FIND_NODE,key:e};yield*s.network.sendRequest(c,l,{...r,signal:u})};for await(const c of this.queryManager.run(e,o,r))c.name==="PEER_RESPONSE"&&await Promise.all(c.closer.map(async u=>{await a.add(u)})),yield c;this.log("found %d peers close to %b",a.length,e);for(const c of a.peers)yield iA({from:this.peerId,peer:c},r)}async*getValueOrPeers(e,r,n={}){for await(const i of this._getValueSingle(e,r,n)){if(i.name==="PEER_RESPONSE"&&i.record!=null)try{await this._verifyRecordOnline(i.record)}catch{const a="invalid record received, discarded";this.log(a),yield od({from:i.from,error:new z6(a)},n);continue}yield i}}async _verifyRecordOnline(e){if(e.timeReceived==null)throw new lpt("invalid record received");await MM(this.validators,new Ao(e.key,e.value,e.timeReceived))}async getCloserPeersOffline(e,r){const n=[];try{const c=Zn(e),u=Aa(c),l=await this.peerStore.get(u);n.push({id:l.id,multiaddrs:l.addresses.map(({multiaddr:f})=>f)})}catch{}const i=await sy(e),s=this.routingTable.closestPeers(i),a=await wc(r),o=rd(a,i);for(const c of s){const u=await wc(c),l=rd(u,i);if(oy(l,o)===-1)try{const f=await this.peerStore.get(c);n.push({id:c,multiaddrs:f.addresses.map(({multiaddr:d})=>d)})}catch(f){if(f.name!=="NotFoundError")throw f}}return n.length>0?this.log("getCloserPeersOffline found %d peer(s) closer to %b than %p",n.length,e,r):this.log("getCloserPeersOffline could not find peer closer to %b than %p with %d peers in the routing table",e,r,this.routingTable.size),n}}class Npt{log;datastore;datastorePrefix;lock;constructor(e,r){this.log=e.logger.forComponent(`${r.logPrefix}:providers`),this.datastorePrefix=`${r.datastorePrefix}/provider`,this.datastore=e.datastore,this.lock=r.lock}async addProvider(e,r){const n=await this.lock.readLock();try{this.log("%p provides %s",r,e),await this.writeProviderEntry(e,r)}finally{n()}}async removeProvider(e,r){const n=await this.lock.writeLock();try{const i=sA(this.datastorePrefix,e,r);this.log("%p no longer provides %s",r,e),await this.datastore.delete(i)}finally{n()}}async getProviders(e){const r=await this.lock.readLock();try{this.log("get providers for %c",e);const n=await this.loadProviders(e);return this.log("got %d providers for %c",n.size,e),[...n.keys()]}finally{r()}}async writeProviderEntry(e,r,n=new Date){const i=sA(this.datastorePrefix,e,r),s=Ds(n.getTime());await this.datastore.put(i,s)}async loadProviders(e){const r=new Ed,n=sA(this.datastorePrefix,e);for await(const i of this.datastore.query({prefix:n.toString()})){const{peerId:s}=k0e(i.key);r.set(s,T0e(i.value))}return r}}async function*Fpt(t){const{key:e,startingPeer:r,ourPeerId:n,signal:i,query:s,alpha:a,pathIndex:o,numPaths:c,queryFuncTimeout:u,log:l,peersSeen:f,connectionManager:d}=t,h=new Zh({concurrency:a,sort:(g,v)=>oy(g.options.distance,v.options.distance)}),m=await sy(e);function p(g,v){if(g==null)return;f.add(g);const y=rd(v,m);h.add(async()=>{const b=[i];u!=null&&b.push(AbortSignal.timeout(u));const _=Pr(b);try{for await(const x of s({...t,key:e,peer:g,signal:_,pathIndex:o,numPaths:c})){if(_.aborted)return;if(x.name==="PEER_RESPONSE")for(const E of x.closer){if(f.has(E.id)){l.trace("already seen %p in query",E.id);continue}if(n.equals(E.id)){l("not querying ourselves");continue}if(!await d.isDialable(E.multiaddrs)){l("not querying undialable peer");continue}const k=await wc(E.id),B=rd(k,m);if(oy(B,y)!==-1){l.trace("skipping %p as they are not closer to %b than %p",E.id,e,g);continue}l.trace("querying closer peer %p",E.id),p(E.id,k)}h.safeDispatchEvent("completed",{detail:x})}}catch(x){if(!i.aborted)return od({from:g,error:x},t)}finally{_.clear()}},{distance:y}).catch(b=>{l.error(b)})}p(r,await wc(r));try{for await(const g of h.toGenerator({signal:i}))g!=null&&(yield g)}catch(g){throw i.aborted?new cpt("Query aborted"):g}}class Lpt{disjointPaths;alpha;shutDownController;running;logger;peerId;connectionManager;routingTable;initialQuerySelfHasRun;logPrefix;constructor(e,r){this.logPrefix=r.logPrefix,this.disjointPaths=r.disjointPaths??E0e,this.alpha=r.alpha??DM,this.initialQuerySelfHasRun=r.initialQuerySelfHasRun,this.routingTable=r.routingTable,this.logger=e.logger,this.peerId=e.peerId,this.connectionManager=e.connectionManager,this.shutDownController=new AbortController,this.shutDownController.signal,this.running=!1}isStarted(){return this.running}async start(){this.running||(this.running=!0,this.shutDownController=new AbortController,this.shutDownController.signal,void 0)}async stop(){this.running=!1,this.shutDownController.abort()}async*run(e,r,n={}){if(!this.running)throw new Error("QueryManager not started");if(n.signal==null){const c=AbortSignal.timeout(spt);n={...n,signal:c}}const i=new AbortController,s=Pr([this.shutDownController.signal,i.signal,n.signal]);i.signal;const a=this.logger.forComponent(`${this.logPrefix}:query:`+nt(e,"base58btc"));let o=!1;try{n.isSelfQuery!==!0&&this.initialQuerySelfHasRun!=null&&(a("waiting for initial query-self query before continuing"),await Mi(this.initialQuerySelfHasRun.promise,s),this.initialQuerySelfHasRun=void 0),a("query:start");const c=await sy(e),u=this.routingTable.closestPeers(c),l=u.slice(0,Math.min(this.disjointPaths,u.length));if(u.length===0){a.error("Running query with no peers");return}const f=new fc,d=l.map((h,m)=>Fpt({...n,key:e,startingPeer:h,ourPeerId:this.peerId,signal:s,query:r,pathIndex:m,numPaths:l.length,alpha:this.alpha,queryFuncTimeout:n.queryFuncTimeout,log:a,peersSeen:f,onProgress:n.onProgress,connectionManager:this.connectionManager}));for await(const h of Nf(...d)){if(h.name==="QUERY_ERROR"&&a.error("query error",h.error),h.name==="PEER_RESPONSE")for(const m of[...h.closer,...h.providers])await this.connectionManager.isDialable(m.multiaddrs)&&await this.routingTable.add(m.id);yield h}o=!0}catch(c){if(!(!this.running&&c.name==="QueryAbortedError"))throw c}finally{o||(a("query exited early"),i.abort()),s.clear(),a("query:done")}}}function $pt(t){return t[Symbol.asyncIterator]!=null}function C0e(t){if($pt(t))return(async()=>{let e=0;for await(const r of t)e++;return e})();{let e=0;for(const r of t)e++;return e}}const Upt=t=>{const e=t.addEventListener||t.on||t.addListener,r=t.removeEventListener||t.off||t.removeListener;if(!e||!r)throw new TypeError("Emitter is not compatible");return{addListener:e.bind(t),removeListener:r.bind(t)}};function jpt(t,e,r){let n;const i=new Promise((s,a)=>{if(r={rejectionEvents:["error"],multiArgs:!1,resolveImmediately:!1,...r},!(r.count>=0&&(r.count===Number.POSITIVE_INFINITY||Number.isInteger(r.count))))throw new TypeError("The `count` option should be at least 0 or more");r.signal?.throwIfAborted();const o=[e].flat(),c=[],{addListener:u,removeListener:l}=Upt(t),f=(...h)=>{const m=r.multiArgs?h:h[0];r.filter&&!r.filter(m)||(c.push(m),r.count===c.length&&(n(),s(c)))},d=h=>{n(),a(h)};n=()=>{for(const h of o)l(h,f);for(const h of r.rejectionEvents)l(h,d)};for(const h of o)u(h,f);for(const h of r.rejectionEvents)u(h,d);r.signal&&r.signal.addEventListener("abort",()=>{d(r.signal.reason)},{once:!0}),r.resolveImmediately&&s(c)});if(i.cancel=n,typeof r.timeout=="number"){const s=jy(i,{milliseconds:r.timeout});return s.cancel=n,s}return i}function Vpt(t,e,r){typeof r=="function"&&(r={filter:r}),r={...r,count:1,resolveImmediately:!1};const n=jpt(t,e,r),i=n.then(s=>s[0]);return i.cancel=n.cancel,i}class qpt{log;peerId;peerRouting;routingTable;count;interval;initialInterval;queryTimeout;running;timeoutId;controller;initialQuerySelfHasRun;querySelfPromise;constructor(e,r){this.peerId=e.peerId,this.log=e.logger.forComponent(`${r.logPrefix}:query-self`),this.running=!1,this.peerRouting=r.peerRouting,this.routingTable=r.routingTable,this.count=r.count??E0e,this.interval=r.interval??ept,this.initialInterval=r.initialInterval??tpt,this.queryTimeout=r.queryTimeout??rpt,this.initialQuerySelfHasRun=r.initialQuerySelfHasRun,this.querySelf=A0e(this.querySelf.bind(this),r.operationMetrics,"SELF_QUERY")}isStarted(){return this.running}start(){this.running||(this.running=!0,clearTimeout(this.timeoutId),this.timeoutId=setTimeout(()=>{this.querySelf().catch(e=>{this.log.error("error running self-query",e)})},this.initialInterval))}stop(){this.running=!1,this.timeoutId!=null&&clearTimeout(this.timeoutId),this.controller!=null&&this.controller.abort()}async querySelf(){if(!this.running){this.log("skip self-query because we are not started");return}if(this.querySelfPromise!=null)return this.log("joining existing self query"),this.querySelfPromise.promise;if(this.querySelfPromise=sr(),this.running){this.controller=new AbortController;const e=[this.controller.signal];if(this.initialQuerySelfHasRun==null){const n=AbortSignal.timeout(this.queryTimeout);e.push(n)}const r=Pr(e);this.controller.signal;try{this.routingTable.size===0&&(this.log("routing table was empty, waiting for some peers before running query"),await Vpt(this.routingTable,"peer:add",{signal:r,filter:s=>!this.peerId.equals(s.detail)}),this.log("routing table has peers, continuing with query")),this.log("run self-query, look for %d peers timing out after %dms",this.count,this.queryTimeout);const n=Date.now(),i=await Un(this.peerRouting.getClosestPeers(this.peerId.toMultihash().bytes,{signal:r,isSelfQuery:!0}),s=>_6(s,this.count),async s=>C0e(s));this.log("self-query found %d peers in %dms",i,Date.now()-n)}catch(n){this.log.error("self-query error",n)}finally{r.clear(),this.initialQuerySelfHasRun!=null&&(this.initialQuerySelfHasRun.resolve(),this.initialQuerySelfHasRun=void 0)}}this.querySelfPromise.resolve(),this.querySelfPromise=void 0,this.running&&(this.timeoutId=setTimeout(()=>{this.querySelf().catch(e=>{this.log.error("error running self-query",e)})},this.interval))}}class zpt extends oi{log;reprovideQueue;maxQueueSize;datastore;timeout;reprovideTimeout;running;shutdownController;reprovideThreshold;contentRouting;datastorePrefix;addressManager;validity;interval;lock;peerId;constructor(e,r){super(),this.log=e.logger.forComponent(`${r.logPrefix}:reprovider`),this.peerId=e.peerId,this.reprovideQueue=new Zh({concurrency:r.concurrency??Z1t,metrics:e.metrics,metricName:`${r.metricsPrefix}_reprovide_queue`}),this.reprovideTimeout=new ay({...r.timeout??{},metrics:e.metrics,metricName:`${r.metricsPrefix}_reprovide_timeout_milliseconds`}),this.datastore=e.datastore,this.addressManager=e.addressManager,this.datastorePrefix=`${r.datastorePrefix}/provider`,this.reprovideThreshold=r.threshold??Y1t,this.maxQueueSize=r.maxQueueSize??J1t,this.validity=r.validity??X1t,this.interval=r.interval??Q1t,this.contentRouting=r.contentRouting,this.lock=r.lock,this.running=!1,this.reprovide=A0e(this.reprovide.bind(this),r.operationMetrics,"PROVIDE")}start(){this.running||(this.running=!0,this.shutdownController=new AbortController,this.shutdownController.signal,this.timeout=setTimeout(()=>{this.cleanUp().catch(e=>{this.log.error("error running reprovide/cleanup - %e",e)})},this.interval))}stop(){this.running=!1,this.reprovideQueue.clear(),clearTimeout(this.timeout),this.shutdownController?.abort()}async cleanUp(){const e=await this.lock.writeLock();try{this.safeDispatchEvent("reprovide:start");for await(const r of this.datastore.query({prefix:this.datastorePrefix}))try{const{cid:n,peerId:i}=k0e(r.key),s=T0e(r.value).getTime(),a=s+this.validity,o=Date.now(),c=o>a;this.log.trace("comparing: %d < %d = %s %s",s,o-this.validity,c,c?"(expired)":""),c&&await this.datastore.delete(r.key),this.peerId.equals(i)&&o-a<this.reprovideThreshold&&this.queueReprovide(n).catch(u=>{this.log.error("could not reprovide %c - %e",n,u)})}catch(n){this.log.error("error processing datastore key %s - %e",r.key,n.message)}this.log("reprovide/cleanup successful")}finally{e(),this.safeDispatchEvent("reprovide:end"),this.running&&(this.timeout=setTimeout(()=>{this.cleanUp().catch(r=>{this.log.error("error running re-provide - %e",r)})},this.interval))}}async queueReprovide(e){if(!this.running)return;this.log.trace("waiting for queue capacity before adding %c to re-provide queue",e),await this.reprovideQueue.onSizeLessThan(this.maxQueueSize);const r=this.reprovideQueue.queue.find(n=>n.options.cid.equals(e));if(r!=null)return this.log.trace("not adding %c to re-provide queue - already in queue",e),r.join();this.log.trace("adding %c to re-provide queue",e),this.reprovideQueue.add(async n=>{if(n.signal?.throwIfAborted(),!this.running)return;this.log.trace("re-providing %c",e);const i=this.reprovideTimeout.getTimeoutSignal(n);try{await this.reprovide(n.cid,n)}finally{this.reprovideTimeout.cleanUp(i)}this.log.trace("re-provided %c",e)},{signal:this.shutdownController?.signal,cid:e}).catch(n=>{this.log.error("could not re-provide key %c - %e",e,n)})}async reprovide(e,r){await vc(this.contentRouting.provide(e,this.addressManager.getAddresses(),r))}}const Hpt=20,Wpt=5e3,Gpt="kad-close",Kpt=50;class Xpt{routingTable;components;closestPeers;newPeers;refreshInterval;peerSetSize;timeout;closeTagName;closeTagValue;log;running;constructor(e,r){this.components=e,this.log=e.logger.forComponent(`${r.logPrefix}:routing-table`),this.routingTable=r.routingTable,this.refreshInterval=r.refreshInterval??Wpt,this.peerSetSize=r.peerSetSize??Hpt,this.closeTagName=r.closeTagName??Gpt,this.closeTagValue=r.closeTagValue??Kpt,this.closestPeers=new fc,this.onPeerPing=this.onPeerPing.bind(this),this.running=!1}async start(){if(this.running)return;this.running=!0;const e=await wc(this.components.peerId);this.newPeers=new NM(e,this.peerSetSize),this.routingTable.addEventListener("peer:ping",this.onPeerPing),this.timeout=setInterval(()=>{this.updatePeerTags().catch(r=>{this.log.error("error updating peer tags - %e",r)})},this.refreshInterval)}stop(){this.running=!1,this.routingTable.removeEventListener("peer:ping",this.onPeerPing),clearTimeout(this.timeout)}onPeerPing(e){this.newPeers?.add({id:e.detail,multiaddrs:[]}).catch(r=>{this.log.error("error adding peer to distance list - %e",r)})}async updatePeerTags(){const e=new fc(this.newPeers?.peers.map(i=>i.id)),r=e.difference(this.closestPeers),n=this.closestPeers.difference(e);this.closestPeers=e,await Promise.all([...[...r].map(async i=>{await this.components.peerStore.merge(i,{tags:{[this.closeTagName]:{value:this.closeTagValue},[EZ]:{value:1}}})}),...[...n].map(async i=>{await this.components.peerStore.merge(i,{tags:{[this.closeTagName]:void 0,[EZ]:void 0}})})])}}function R3(t){return Array.isArray(t?.peers)}class Ypt{root;localPeer;prefixLength;splitThreshold;kBucketSize;numberOfNodesToPing;lastPingThreshold;ping;verify;onAdd;onRemove;onMove;addingPeerMap;constructor(e){this.prefixLength=e.prefixLength??Qpt,this.kBucketSize=e.kBucketSize??I0e,this.splitThreshold=e.splitThreshold??this.kBucketSize,this.numberOfNodesToPing=e.numberOfOldContactsToPing??rmt,this.lastPingThreshold=e.lastPingThreshold??amt,this.ping=e.ping,this.verify=e.verify,this.onAdd=e.onAdd,this.onRemove=e.onRemove,this.addingPeerMap=new Ed,this.root={prefix:"",depth:0,peers:[]}}async addSelfPeer(e){this.localPeer={peerId:e,kadId:await wc(e),lastPing:Date.now()}}async add(e,r){const n={peerId:e,kadId:await wc(e),lastPing:0},i=this.addingPeerMap.get(e);if(i!=null)return i;try{const s=this._add(n,r);this.addingPeerMap.set(e,s),await s}finally{this.addingPeerMap.delete(e)}}async _add(e,r){const n=this._determineBucket(e.kadId);if(this._indexOf(n,e.kadId)>-1)return;if(n.peers.length===this.splitThreshold&&n.depth<this.prefixLength){await this._split(n),await this._add(e,r);return}if(n.peers.length<this.kBucketSize){if(!Jpt(e,this.lastPingThreshold)){n.peers.push(e),await this.onAdd?.(e,n);return}await this.verify(e,r)&&(e.lastPing=Date.now(),await this._add(e,r));return}const i=n.peers.filter(a=>!(a.peerId.equals(this.localPeer?.peerId)||a.lastPing>Date.now()-this.lastPingThreshold)).sort((a,o)=>a.lastPing<o.lastPing?-1:a.lastPing>o.lastPing?1:0).slice(0,this.numberOfNodesToPing);let s=!1;for await(const a of this.ping(i,r))s=!0,await this.remove(a.kadId);s&&await this._add(e,r)}*closest(e,r=this.kBucketSize){const n=new NM(e,r);for(const i of this.toIterable())n.addWithKadId({id:i.peerId,multiaddrs:[]},i.kadId);yield*Vu(n.peers,i=>i.id)}count(){function e(r){if(R3(r))return r.peers.length;let n=0;return r.left!=null&&(n+=e(r.left)),r.right!=null&&(n+=e(r.right)),n}return e(this.root)}get(e){const r=this._determineBucket(e),n=this._indexOf(r,e);return r.peers[n]}async remove(e){const r=this._determineBucket(e),n=this._indexOf(r,e);if(n>-1){const i=r.peers.splice(n,1)[0];await this.onRemove?.(i,r)}}*toIterable(){function*e(r){if(R3(r)){yield*r.peers;return}yield*e(r.left),yield*e(r.right)}yield*e(this.root)}distance(e,r){return BigInt("0x"+nt(rd(e,r),"base16"))}_determineBucket(e){const r=nt(e,"base2");function n(i,s=0){return R3(i)?i:r[s]==="0"?n(i.left,s+1):n(i.right,s+1)}return n(this.root)}_indexOf(e,r){return e.peers.findIndex(n=>Tr(n.kadId,r))}async _split(e){const r={prefix:"0",depth:e.depth+1,peers:[]},n={prefix:"1",depth:e.depth+1,peers:[]};for(const i of e.peers)nt(i.kadId,"base2")[e.depth]==="0"?(r.peers.push(i),await this.onMove?.(i,e,r)):(n.peers.push(i),await this.onMove?.(i,e,n));Zpt(e,r,n)}}function Zpt(t,e,r){return delete t.peers,t.left=e,t.right=r,t.prefix===""&&(delete t.depth,delete t.prefix),!0}function Jpt(t,e){return t.lastPing<Date.now()-e}const I0e=20,Qpt=6,emt=20,tmt=100,rmt=3,nmt=20,imt=100,PZ="kad-peer",smt=1,amt=6e5,omt=!0,cmt=1e3;class lmt extends oi{kBucketSize;kb;network;closestPeerTagger;log;components;running;pingNewContactTimeout;pingNewContactQueue;pingOldContactTimeout;pingOldContactQueue;populateFromDatastoreOnStart;populateFromDatastoreLimit;protocol;peerTagName;peerTagValue;metrics;constructor(e,r){super(),this.components=e,this.log=e.logger.forComponent(`${r.logPrefix}:routing-table`),this.kBucketSize=r.kBucketSize??I0e,this.running=!1,this.protocol=r.protocol,this.network=r.network,this.peerTagName=r.peerTagName??PZ,this.peerTagValue=r.peerTagValue??smt,this.pingOldContacts=this.pingOldContacts.bind(this),this.verifyNewContact=this.verifyNewContact.bind(this),this.peerAdded=this.peerAdded.bind(this),this.peerRemoved=this.peerRemoved.bind(this),this.populateFromDatastoreOnStart=r.populateFromDatastoreOnStart??omt,this.populateFromDatastoreLimit=r.populateFromDatastoreLimit??cmt,this.pingOldContactQueue=new nd({concurrency:r.pingOldContactConcurrency??nmt,metricName:`${r.metricsPrefix}_ping_old_contact_queue`,metrics:this.components.metrics,maxSize:r.pingOldContactMaxQueueSize??imt}),this.pingOldContactTimeout=new ay({...r.pingOldContactTimeout??{},metrics:this.components.metrics,metricName:`${r.metricsPrefix}_routing_table_ping_old_contact_time_milliseconds`}),this.pingNewContactQueue=new nd({concurrency:r.pingNewContactConcurrency??emt,metricName:`${r.metricsPrefix}_ping_new_contact_queue`,metrics:this.components.metrics,maxSize:r.pingNewContactMaxQueueSize??tmt}),this.pingNewContactTimeout=new ay({...r.pingNewContactTimeout??{},metrics:this.components.metrics,metricName:`${r.metricsPrefix}_routing_table_ping_new_contact_time_milliseconds`}),this.kb=new Ypt({kBucketSize:r.kBucketSize,prefixLength:r.prefixLength,splitThreshold:r.splitThreshold,numberOfOldContactsToPing:r.numberOfOldContactsToPing,lastPingThreshold:r.lastPingThreshold,ping:this.pingOldContacts,verify:this.verifyNewContact,onAdd:this.peerAdded,onRemove:this.peerRemoved}),this.closestPeerTagger=new Xpt(this.components,{logPrefix:r.logPrefix,routingTable:this,peerSetSize:r.closestPeerSetSize,refreshInterval:r.closestPeerSetRefreshInterval,closeTagName:r.closeTagName,closeTagValue:r.closeTagValue}),this.components.metrics!=null&&(this.metrics={routingTableSize:this.components.metrics.registerMetric(`${r.metricsPrefix}_routing_table_size`),routingTableKadBucketTotal:this.components.metrics.registerMetric(`${r.metricsPrefix}_routing_table_kad_bucket_total`),routingTableKadBucketAverageOccupancy:this.components.metrics.registerMetric(`${r.metricsPrefix}_routing_table_kad_bucket_average_occupancy`),routingTableKadBucketMinOccupancy:this.components.metrics.registerMetric(`${r.metricsPrefix}_routing_table_kad_bucket_min_occupancy`),routingTableKadBucketMaxOccupancy:this.components.metrics.registerMetric(`${r.metricsPrefix}_routing_table_kad_bucket_max_occupancy`),routingTableKadBucketMaxDepth:this.components.metrics.registerMetric(`${r.metricsPrefix}_routing_table_kad_bucket_max_depth`),kadBucketEvents:this.components.metrics.registerCounterGroup(`${r.metricsPrefix}_kad_bucket_events_total`)})}isStarted(){return this.running}async start(){this.running||(this.running=!0,await _u(this.closestPeerTagger),await this.kb.addSelfPeer(this.components.peerId))}async afterStart(){Promise.resolve().then(async()=>{if(!this.populateFromDatastoreOnStart)return;let e=0;for(const r of await this.components.peerStore.all({filters:[n=>n.protocols.includes(this.protocol)&&n.tags.has(PZ)],limit:this.populateFromDatastoreLimit})){if(!this.running)return;try{await this.add(r.id),e++}catch{this.log("failed to add peer %p to routing table, removing kad-dht peer tags - %e"),await this.components.peerStore.merge(r.id,{tags:{[this.peerTagName]:void 0}})}}this.log("added %d peer store peers to the routing table",e)}).catch(e=>{this.log.error("error adding peer store peers to the routing table %e",e)})}async stop(){this.running=!1,await dd(this.closestPeerTagger),this.pingOldContactQueue.abort(),this.pingNewContactQueue.abort()}async peerAdded(e,r){this.components.peerId.equals(e.peerId)||await this.components.peerStore.merge(e.peerId,{tags:{[this.peerTagName]:{value:this.peerTagValue}}}),this.updateMetrics(),this.metrics?.kadBucketEvents.increment({peer_added:!0}),this.safeDispatchEvent("peer:add",{detail:e.peerId})}async peerRemoved(e,r){this.components.peerId.equals(e.peerId)||await this.components.peerStore.merge(e.peerId,{tags:{[this.peerTagName]:void 0}}),this.updateMetrics(),this.metrics?.kadBucketEvents.increment({peer_removed:!0}),this.safeDispatchEvent("peer:remove",{detail:e.peerId})}async*pingOldContacts(e,r){if(!this.running)return;const n=[];for(const i of e){if(this.kb.get(i.kadId)==null){this.log("asked to ping contact %p that was not in routing table",i.peerId);continue}this.metrics?.kadBucketEvents.increment({ping_old_contact:!0}),n.push(async()=>{const s=this.pingOldContactQueue.find(i.peerId);if(s!=null)return this.log("asked to ping contact %p was already being pinged",i.peerId),await s.join(r)?void 0:i;if(!await this.pingOldContactQueue.add(async o=>{const c=this.pingOldContactTimeout.getTimeoutSignal(),u=Pr([c,o?.signal]);try{return await this.pingContact(i,o)}catch{return this.metrics?.kadBucketEvents.increment({ping_old_contact_error:!0}),!0}finally{this.pingOldContactTimeout.cleanUp(c),u.clear()}},{peerId:i.peerId,signal:r?.signal}))return i})}for await(const i of bd(n))i!=null&&(yield i)}async verifyNewContact(e,r){const n=this.pingNewContactTimeout.getTimeoutSignal(),i=Pr([n,r?.signal]);try{const s=this.pingNewContactQueue.find(e.peerId);return s!=null?(this.log("joining existing ping to add new peer %p to routing table",e.peerId),await s.join({signal:i})):await this.pingNewContactQueue.add(async a=>(this.metrics?.kadBucketEvents.increment({ping_new_contact:!0}),this.log("pinging new peer %p before adding to routing table",e.peerId),this.pingContact(e,a)),{peerId:e.peerId,signal:i})}catch{return this.log.trace("tried to add peer %p but they were not online",e.peerId),this.metrics?.kadBucketEvents.increment({ping_new_contact_error:!0}),!1}finally{this.pingNewContactTimeout.cleanUp(n),i.clear()}}async pingContact(e,r){try{this.log("pinging contact %p",e.peerId);for await(const n of this.network.sendRequest(e.peerId,{type:Tn.PING},r))if(n.type===BP.PEER_RESPONSE)return n.messageType===Tn.PING?(this.log("contact %p ping ok",e.peerId),this.safeDispatchEvent("peer:ping",{detail:e.peerId}),!0):!1;return!1}catch(n){return this.log("error pinging old contact %p - %e",e.peerId,n),!1}}get size(){return this.kb==null?0:this.kb.count()}async find(e){const r=await wc(e);return this.kb.get(r)?.peerId}closestPeer(e){const r=this.closestPeers(e,1);if(r.length>0)return r[0]}closestPeers(e,r=this.kBucketSize){return this.kb==null?[]:[...this.kb.closest(e,r)]}async add(e,r){if(this.kb==null)throw new Error("RoutingTable is not started");await this.kb.add(e,r)}async remove(e){if(this.kb==null)throw new Error("RoutingTable is not started");const r=await wc(e);await this.kb.remove(r)}updateMetrics(){if(this.metrics==null||this.kb==null)return;let e=0,r=0,n=0,i=20,s=0;function a(o){if(R3(o)){o.depth>n&&(n=o.depth),r++,e+=o.peers.length,o.peers.length<i&&(i=o.peers.length),o.peers.length>s&&(s=o.peers.length);return}a(o.left),a(o.right)}a(this.kb.root),this.metrics.routingTableSize.update(e),this.metrics.routingTableKadBucketTotal.update(r),this.metrics.routingTableKadBucketAverageOccupancy.update(Math.round(e/r)),this.metrics.routingTableKadBucketMinOccupancy.update(i),this.metrics.routingTableKadBucketMaxOccupancy.update(s),this.metrics.routingTableKadBucketMaxDepth.update(n)}}const umt=[77591,22417,43971,28421,740,29829,71467,228973,196661,78537,27689,36431,44415,14362,19456,106025,96308,2882,49509,21149,87173,131409,75844,23676,121838,30291,17492,2953,7564,110620,129477,127283,53113,72417,165166,109690,21200,102125,24049,71504,90342,25307,72039,26812,26715,32264,133800,71161,88956,171987,51779,24425,16671,30251,186294,247761,14202,2121,8465,35024,4876,85917,169730,3638,256836,96184,943,18678,6583,52907,35807,112254,214097,18796,11595,9243,23554,887,268203,382004,24590,111335,11625,16619,29039,102425,69006,97976,92362,32552,63717,41433,128974,137630,59943,10019,13986,35430,33665,108037,43799,43280,38195,29078,58629,18265,14425,46832,235538,40830,77881,110717,58937,3463,325358,51300,47623,117252,19007,10170,20540,91237,294813,4951,79841,56232,36270,128547,69209,66275,100156,32063,73531,34439,80937,28892,44466,88595,216307,32583,49620,16605,82127,45807,21630,78726,20235,40163,111007,96926,5567,72083,21665,58844,39419,179767,48328,42662,51550,5251,37811,49608,81056,50854,55513,20922,18891,197409,164656,32593,71449,220474,58919,85682,67854,13758,35066,3565,61905,214793,119572,141419,21504,10302,27354,67003,46131,32668,15165,64871,34450,17821,2757,11452,34189,5160,12257,85523,560,53385,65887,119549,135620,312353,115979,122356,10867,193231,124537,54783,90675,120791,4715,142253,50943,17271,43358,25331,4917,120566,34580,12878,33786,160528,32523,4869,301307,104817,81491,23276,8832,97911,31265,52065,7998,49622,9715,43998,34091,84587,20664,69041,29419,53205,10838,58288,116145,6185,5154,141795,35924,21307,144738,43730,12085,8279,10002,119,133779,199668,72938,31768,39176,67875,38453,9700,44144,4121,116048,41733,12868,82669,92308,128,34262,11332,7712,90764,36141,13553,71312,77470,117314,96549,49135,23602,54468,28605,6327,62308,17171,67531,21319,14105,894,107722,46157,8503,51069,100472,45138,15246,14577,35609,191464,1757,13364,161349,32067,91705,81144,52339,5408,91066,21983,14157,100545,4372,26630,129112,1423,29676,213626,4397,88436,99190,6877,49958,26122,114348,60661,29818,293118,50042,179738,16400,163423,89627,31040,43973,36638,45952,5153,1894,109322,1898,134021,12402,112077,68309,190269,69866,31938,107383,11522,105232,11248,14868,39852,71707,186525,16530,38162,106212,11700,5130,16608,26998,59586,108399,230033,43683,48135,82179,2073,5015,196684,189293,16378,23452,8301,35640,11632,214551,29240,57644,33137,91949,55157,52384,117313,5090,17717,89668,49363,82238,241035,66216,29066,184088,97206,62820,26595,4241,135635,173672,8202,459,71355,146294,29587,3008,135385,141203,14803,6634,45094,69362,50925,546,51884,62011,83296,234584,44515,56050,89476,87751,19373,12691,149923,19794,13833,35846,87557,58339,2884,19145,25647,12224,11024,77338,64608,122297,53025,7205,36189,36294,170779,21750,7739,173883,75192,35664,224240,113121,30181,26267,27036,117827,92015,106516,55628,203549,67949,60462,60844,35911,20457,1820,920,19773,8738,73173,181993,38521,98254,76257,46008,92796,5384,26868,151566,22124,2411,15919,186872,180021,28099,152961,78811,80237,62352,102653,74259,184890,16792,123702,224945,29940,19512,75283,14059,112691,92811,233329,20411,138569,53341,109802,50600,134528,66747,5529,166531,31578,64732,67189,1596,126357,967,167999,206598,109752,119431,207825,78791,91938,10301,27311,24233,252343,28831,32812,66002,112267,90895,8786,8095,16824,22866,21813,60507,174833,19549,130985,117051,52110,6938,81923,123864,38061,919,18680,53534,46739,112893,161529,85429,26761,11900,81121,91968,15390,217947,56524,1713,6654,37089,85630,138866,61850,16491,75577,16884,98296,73523,6140,44645,6062,36366,29844,57946,37932,42472,5266,20834,19309,33753,127182,134259,35810,41805,45878,312001,14881,47757,49251,120050,44252,3708,25856,107864,120347,1228,36550,41682,34496,47025,8393,173365,246526,12894,161607,35670,90785,126572,2095,124731,157033,58694,554,12786,9642,4817,16136,47864,174698,66992,4639,69284,10625,40710,27763,51738,30404,264105,137904,109882,52487,42824,57514,2740,10479,146799,107390,16586,88038,174951,9410,16185,44158,5568,40658,46108,12763,97385,26175,108859,664,230732,67470,46663,14395,50750,141320,93140,15361,47997,55784,6791,307840,118569,107326,18056,58281,260415,54691,8790,73332,45633,7511,45674,143373,14031,11799,94491,35646,96544,14560,26049,32983,25791,83814,42094,231370,63955,139212,2359,169908,3108,183486,105867,28197,32941,124968,26402,88267,149768,23053,3078,19091,52924,25383,19209,111548,97361,3959,24880,235061,9099,24921,161254,151405,20508,7159,34381,20133,11434,74036,19974,34769,36585,1076,22454,17354,38727,235160,111547,96454,117448,156940,91330,37299,7310,26915,117060,51369,22620,61861,322264,106850,111694,15091,2624,40345,300446,177064,1707,27389,54792,327783,132669,183543,59003,17744,20603,151134,106923,53084,71803,279424,319816,11579,21946,16728,38274,72711,5085,83391,88646,40159,25027,34680,10752,12988,54126,30365,18338,100445,230674,44874,84974,143877,123253,139372,28082,91477,144002,13096,219729,46016,50029,42377,14601,6660,58244,58978,23918,88206,113611,64452,17541,41032,10942,12021,49189,10978,40175,37156,10947,71709,106894,112538,57007,137486,150608,152719,40615,7746,279716,13101,19524,28708,40578,72320,1096,182051,94527,51275,22833,45164,81917,77519,48508,5421,140302,37845,149830,5587,27579,5357,428725,248187,6326,206760,39814,32585,89923,44341,288753,284443,96368,31201,94189,119504,20359,52073,103216,179,27934,32801,96035,34111,34309,101326,18198,20704,210266,37643,27880,141873,106e3,19414,56614,167714,66483,107885,86602,4379,20796,75467,4987,5017,118857,26003,34308,114428,29198,6686,29697,73632,3739,69795,16798,41504,7207,30722,21436,36735,28067,28545,3239,11221,36031,41889,100010,19247,317673,29495,174554,6424,129725,53845,94986,7955,59676,2604,191497,19735,102214,62954,23844,11872,179525,261436,34492,428,78404,142035,16747,17246,27578,37021,33672,57944,26056,135760,2369,61674,122066,31327,19374,157065,40553,130982,69619,71290,38855,72100,92903,95940,51422,165999,65713,57873,50726,7288,20272,2081,42326,22624,81120,57914,79352,19447,1684,72302,11774,302559,161481,96396,13692,414988,3721,79066,56627,46883,21150,11747,12184,5856,113458,176117,84416,52079,27933,3354,59765,141359,2212,216309,2555,23458,196722,142463,45701,44548,28798,19418,215,29916,9396,10574,114226,84475,13520,18694,34056,4524,90302,62930,13539,19407,77209,7728,38088,9535,2263,23875,183945,17750,26274,67172,10585,28042,22199,7478,51331,66030,26774,192929,31434,25850,50197,52926,178158,4679,181256,70184,229600,9959,105594,72158,73974,2726,35085,78087,23284,35568,51713,155676,5401,27254,11966,17569,223253,71993,103357,111477,55722,30504,26034,46774,35392,36285,214814,41143,163465,1051,16094,81044,6636,76489,179102,20712,39178,35683,125177,54219,30617,52994,25324,50123,2543,87529,58995,10688,125199,12388,60158,125481,131646,7642,133350,65874,3438,97277,101450,10075,56344,116821,50778,60547,98016,106135,13859,14255,16300,77373,173521,8285,45932,37426,4054,114295,55947,7703,39114,52,51119,128135,19714,60715,9554,50492,88180,2823,118271,52993,122625,97919,23859,37895,25040,33614,32102,20431,3577,9275,15686,43031,157741,110358,1884,40291,125391,13736,5008,64881,87336,77381,70711,43032,49155,118587,70494,4318,10168,30126,12580,10524,280104,104001,145413,2862,84140,6603,106005,13566,12780,11251,42830,571,179910,82443,13146,469,42714,32591,265217,424024,92553,54721,134100,6007,15242,114681,59030,16718,85465,200214,85982,55174,165013,23493,56964,82529,109150,32706,27568,82442,5350,14976,13165,44890,60021,21343,33978,17264,4655,22328,27819,75730,16567,55483,14510,17926,45827,150609,3704,7385,272531,161543,76904,122163,52405,2039,19165,41623,14423,228354,3369,176360,85491,7122,35789,303724,4465,13628,2233,55311,118771,20713,10006,221519,45115,71021,35650,29775,7337,10864,20665,21142,1746,15080,1624,32449,10905,105743,229797,7701,3940,22997,178467,57208,389057,39683,59403,63344,63125,54847,69691,18336,56448,3362,37202,18282,29648,138224,35867,10495,5911,28814,26653,31514,176702,26550,45621,11734,4525,40543,73944,121080,27858,155561,14887,44670,30742,8796,107455,113472,56369,75581,183777,240095,133699,153299,8768,160464,26058,49078,103971,21875,71486,44888,17156,9678,89541,123019,102337,3972,83930,21245,87852,109660,287918,183019,686,10100,39177,283941,11274,24736,26793,26214,25995,77011,141580,4070,23742,46285,46632,30700,26669,19056,35951,115575,174034,56097,35463,87425,24575,44245,38701,82317,85922,281616,100333,147697,61503,7730,84330,8530,59917,61597,17173,9092,32658,90288,193136,39023,20381,56654,31132,7779,1919,1375,117128,30819,11169,40938,23935,115201,101155,151034,4835,11231,74550,89388,59951,91704,107312,167882,115062,12732,72738,88703,464019,158267,57995,60496,737,14371,123867,4174,243339,159946,7568,16025,134556,110916,38103,191,80226,88794,29688,27230,10454,76308,57647,77409,113483,66864,14745,19808,12023,46583,84805,16015,17102,2231,20611,3547,95740,250131,34559,108894,8498,15853,159169,148920,20942,2813,93160,45188,210613,45531,52587,149062,39782,28194,57849,60965,84954,89766,84453,100927,16501,27658,165311,103841,54192,207341,19558,20084,319622,5672,205467,98462,61849,36279,13609,147177,24726,165015,209489,59591,31157,6551,117580,75060,141146,277310,21072,22023,106474,63041,137443,122965,68371,5383,42146,98961,113467,30863,23794,4843,99630,30392,82679,13699,241612,33601,93146,24319,18643,32155,95669,40440,15333,34089,67799,142144,58245,38633,114531,117400,77861,188726,5507,2568,8853,10987,107222,2663,2421,11530,13345,30075,41785,118661,104786,17459,12490,16281,71936,193555,17431,5944,71758,26485,77317,20803,367167,158,7362,93430,11735,172445,46002,11532,54482,930,62911,2235,23004,179236,4764,101859,208113,22477,55163,95579,14098,67320,162556,90709,156949,3826,57492,4025,34092,87442,104565,6718,186015,28214,14209,10039,107186,233912,58877,81637,55265,39828,6194,145813,50831,105849,4974,88319,122296,10272,197216,95714,51540,72418,23324,91555,8743,140452,250249,51666,34124,7229,38592,129641,78169,174242,22464,149964,51450,14034,10026,95376,26190,120062,14401,8700,265,31386,143573,7203,229889,61567,4227,140981,2466,72052,10787,10062,30958,6099,38471,30103,23202,208101,70847,467,58934,32271,32984,36637,24107,30771,17109,73353,13650,2098,157040,67366,66904,106018,265380,107238,18535,44025,32681,144983,62505,91295,56120,3082,77508,10322,63023,36700,81885,224127,16721,45023,239261,111272,13852,7866,149243,204199,32309,22084,42029,38316,126644,104973,14406,43454,67322,61310,15789,40285,24026,181047,6301,70927,23319,115823,27248,66693,115875,278566,63007,146844,56841,59007,87368,180001,22370,42114,80605,12022,10374,308,25079,14689,12618,63368,7936,264973,212291,136713,95999,105801,18965,32075,48700,52230,35119,96912,32992,8586,16606,101333,101812,14969,39930,759,193090,27387,42914,12937,5058,62646,64528,38624,25743,37502,3716,4435,30352,178687,26461,132611,42002,138442,35833,59582,16345,8048,60319,49349,309,47800,49739,90482,26405,34470,63786,32479,85028,39866,47846,11649,23934,29466,2816,42864,31828,7410,74885,49632,47629,111801,90749,19536,18767,105764,59606,21223,10746,76298,22220,39408,7190,79654,64856,11602,82156,272765,17079,70089,245473,51813,184407,384678,1576,122249,5064,27481,6188,25790,74361,27541,318284,45430,31488,620,93579,45723,192118,22670,51913,4162,70244,35966,26397,16199,50899,209613,121702,287507,2993,36101,132229,67345,33062,76295,118628,78705,52316,34375,107083,107454,44863,127561,33964,3073,154010,190914,55967,39074,6272,31047,5550,41123,26154,98638,47110,19998,148091,50229,31329,59900,195442,19106,61347,73497,70015,682,45850,25776,38022,148951,6288,37411,232526,109277,27286,32342,9262,5220,16651,23175,46740,129438,78614,121925,66914,88710,127952,5563,21500,34521,10739,14863,191006,62956,17359,16749,67027,56284,69134,43301,35039,58883,54466,60823,404451,75743,59856,86979,7923,34273,83785,32142,7693,268986,197428,282681,17049,22346,22990,92245,107180,3357,37104,96724,49153,7683,31197,43267,82231,164276,23696,20848,188364,22309,24821,158707,1018,22514,70922,27792,45589,59709,10765,736,35218,63479,51987,24275,63588,55361,92929,81964,4658,20122,12330,44058,13065,311456,72224,8337,211229,38979,22590,138478,52757,32595,133600,8838,31549,94412,43391,90056,1585,94802,127271,6223,31889,137038,132910,2165,57616,230152,6080,10748,36737,74579,134062,50525,180532,119270,34556,76155,82394,52595,29258,31435,87820,67996,26943,183878,38007,2410,13526,180297,69856,3503,187396,167700,7838,16701,9199,56267,3661,37407,65994,23767,5708,62508,221700,67088,86978,46776,84434,32088,5612,9149,88244,21685,95151,46750,189612,2979,506311,2594,3628,40074,105039,78243,28523,6651,38058,71999,30992,12764,68261,108991,6165,26450,61961,13400,22426,7490,60890,109623,2070,12958,50355,67979,257096,7213,42578,52121,35716,65461,7516,124758,39268,302,64712,14977,1467,219452,2840,34229,11121,21602,19270,63574,8024,1532,17331,79839,78885,52029,180767,57957,6069,91265,61380,55767,8927,32881,287603,22149,35029,68876,6428,199567,46926,13412,104132,21434,366616,45060,110046,81924,128910,45886,52821,130416,29416,77342,21762,67329,121432,79924,11724,38625,81006,102033,28338,13326,3250,82056,82526,38212,21112,12382,111495,3263,7414,86274,93490,40844,30224,45212,24019,48411,71367,24941,76729,57776,3769,38114,202019,197745,31953,237533,33270,201580,255648,100798,44741,32241,98468,106931,10085,15090,170358,33154,66787,18819,69760,25061,234005,82660,6295,131975,16874,9076,4094,25005,17740,40908,19533,220019,44330,99792,50040,19619,13950,55228,24423,31253,95308,103177,184795,28590,82285,5059,3210,75525,49894,70007,56178,10580,36051,139681,21617,98736,3555,106306,164189,37352,63915,47824,24883,145530,61904,28444,11483,19837,145446,30420,112972,85939,11835,191233,2262,20705,58630,1753,148334,1197,144714,6887,11223,107667,60879,77914,4151,57417,81594,96681,169430,1784,20444,95138,254041,27038,596,7117,72808,13759,3353,126776,21074,55322,27081,36942,39547,139830,179275,4453,713,8722,71399,19204,25785,22794,23923,104114,11291,25458,102309,88396,75288,230440,206396,104551,58447,130857,37247,94734,31548,176529,226077,65159,20104,10096,66881,94191,237909,27109,37404,1520,27421,25220,113003,23423,24884,50585,6286,231877,150800,11789,3226,90004,60642,5053,202400,61442,132531,175329,57138,30116,103847,9973,75367,16452,32360,59119,21246,10191,164804,23305,61051,37348,154530,13214,5468,50403,66754,130976,50559,80515,14436,155492,84017,5472,43107,41240,2890,90431,70188,382,76234,48040,50211,281038,237007,32115,142178,1536,22761,96429,1811,31243,1679,49143,55209,17402,235054,61494,7462,77030,34925,87609,78002,9499,9027,73289,201078,101379,63544,27666,5469,10642,30029,49816,132979,95620,58086,351930,116300,2110,2043,30845,6154,11279,16727,4122,2277,27281,4971,3650,39060,61970,65951,39674,75686,38151,11370,130809,177895,32665,63725,122267,7857,39618,118483,44792,157755,178624,136994,24260,41308,22471,12404,21707,12486,30473,52781,50246,20247,39065,909,56825,103158,128603,31542,1089,41935,32744,12428,37963,84420,33134,72921,208449,42622,168151,127335,147107,46699,38216,12591,94342,85814,31423,24944,2605,87542,67473,192551,4496,56321,91819,17630,6300,256183,114569,202090,33209,35289,34897,24967,40520,43470,5344,10199,34810,14283,10381,10017,62923,49924,23233,64539,13051,35686,19698,11570,135555,120868,44924,87065,52318,52335,47586,140906,245885,109834,78668,9065,46990,25258,72022,61243,40838,4545,146387,10537,11557,17470,36930,68104,46711,24264,79401,81043,18225,120488,24746,84338,81652,28266,13776,21878,46973,1047,230465,73357,95777,24973,210160,62210,58404,110633,169651,6937,41870,9909,26822,191062,76553,27519,96256,239070,2478,205678,67955,58532,20601,50120,19148,78501,195724,110740,8249,109665,27446,30568,57631,31425,49752,32820,65504,50079,3663,102256,219898,23849,211315,14645,4359,91767,9528,12449,49366,7941,49763,107848,8930,27086,50686,9744,10447,81935,39513,46514,1670,29229,6172,22312,137280,97759,9806,14445,22976,56458,73391,34983,93760,174219,52573,33149,59747,2429,136277,75123,165263,91040,7446,57632,48633,97140,246081,84766,151684,79918,93268,120346,54059,54875,77858,32996,103590,45276,11968,19600,25849,17159,132907,42828,16817,4913,99462,103303,27395,5737,74184,20749,21160,14377,77062,131403,158735,10999,27799,77785,9320,34366,51593,61070,33746,47048,29268,36675,30262,53297,9832,82e3,20188,122292,39917,7331,18160,68301,185935,134830,15031,4935,10004,165845,185534,46923,30109,44134,122631,18874,22903,112790,26561,18549,348902,82871,140345,255565,135390,63556,103747,145055,179600,145662,296111,61661,211987,23952,52342,126343,48450,32919,44277,82185,9591,62139,205363,376969,394874,108461,18040,120885,14798,39863,16571,16794,58271,81025,55206,14640,118656,6361,44092,85970,6262,153863,108244,180200,72264,79947,38044,10050,5735,61221,80712,5471,115689,11391,11661,184257,20010,60116,30320,19327,134598,45455,27542,18004,125092,452272,1549,91523,46567,180063,156026,2608,11174,58848,37788,65907,80194,30490,5786,40775,119519,106241,11323,156297,8425,61495,2617,29675,2425,59886,112582,49142,59618,4863,50597,86710,50650,168632,27693,85641,83643,18993,25768,84284,28090,93592,36627,312804,43381,9887,9402,100931,97165,3311,173330,66805,28935,4963,184460,3201,78102,19126,21607,37496,24938,22615,16153,32862,134792,153318,61120,6067,2812,12826,12792,23825,37559,64662,202250,102694,155488,85881,149193,46233,65383,15521,106982,11358,176786,25752,39717,34208,24510,32464,77742,39371,72028,138229,60688,71386,102834,132477,2208,11548,63670,271279,28351,30338,38620,32491,99845,143885,152266,13252,2825,178663,108097,1775,78201,14897,113573,163346,62292,171129,22183,96598,38733,64971,166776,117445,9968,146393,44677,74867,20908,97328,12761,25656,26785,9148,112344,26115,99176,110121,22437,49547,6180,79320,5835,31392,43328,33377,75870,119860,69497,80273,7325,155219,43167,111173,28347,20222,3763,71752,55041,47252,14618,28088,15012,97805,194698,54636,2036,41349,6173,96604,61530,51859,43782,13361,24334,22668,24792,7070,23441,16789,3209,36211,208475,26242,32880,122181,182407,21444,31060,88459,29929,77907,12716,10934,97005,20599,31690,8403,58445,30303,22700,10336,86731,103115,337709,72556,46788,112566,47684,67089,53548,36874,56487,41387,125985,26893,40071,106683,73712,18787,40105,72992,67246,137276,50802,36790,70328,138827,22466,39263,183295,29858,50975,9322,57397,10654,24364,30383,55799,41600,23584,127295,296610,129078,143558,244131,86397,36049,1085,80677,3820,108139,5476,34767,24683,7758,13060,7239,131671,250593,59556,103392,29810,4188,252323,39404,116877,7651,43600,40338,13554,157253,39196,25978,144387,61211,234,50104,6129,10449,93777,9240,356378,274148,4439,72970,3724,147770,78680,62570,115877,40027,40547,36817,224392,64609,34795,165027,67440,2477,37206,23431,50754,164797,46018,94995,170982,27051,7957,22767,3674,27900,56419,18930,60701,41302,2692,84749,339721,61996,111094,80221,50129,1045,8153,62945,19202,8250,37208,37418,32560,79477,41106,88569,33963,36693,5892,30570,1581,66471,49647,11922,160717,29442,5643,114865,82962,95982,132098,22633,22838,94726,54556,28566,205039,162340,33216,16849,35847,221339,94851,26533,71469,1805,3804,12935,45483,71020,36310,65381,192960,34240,35165,59773,1248,46954,155332,96864,4246,388800,16129,57133,74592,44807,442014,38203,42574,80818,91592,26377,36424,65760,977,77387,22628,147610,28018,30561,98454,6969,119628,63648,18170,36854,26601,64018,22027,37279,51395,152934,21153,9430,58760,194742,5330,55115,34158,28917,174111,13171,122326,1526,43896,66094,25325,4234,148354,11450,275,18999,112191,44365,22723,68409,8733,57746,96565,75007,14196,108844,29475,88599,177563,100792,106156,86323,93726,14248,135341,194131,40126,47099,14779,8272,39597,95983,171398,65882,28052,10393,47213,40689,22120,72212,106829,34964,109146,753,648,21660,30047,17527,181025,5619,145357,4085,216883,9359,186951,24779,53931,24545,36197,223296,62628,168101,4243,107313,30321,26642,13049,51059,31027,107912,807,73550,26551,84369,122422,165872,49754,74213,234264,33151,52014,33100,87183,22365,52500,40013,23302,5652,72723,21404,26107,48434,587,94049,168493,96418,32871,70860,31709,25128,443,71597,166253,15670,70994,26341,133675,28280,75491,54756,47955,56028,26182,11952,113272,472197,64640,110753,17919,337,50642,22576,142,87371,53391,93210,126694,15285,19642,85667,14148,1506,42092,52962,33243,11970,20734,135843,57044,58880,13002,219134,22876,64754,232519,4257,43120,321573,24799,64526,124728,52579,81472,70831,276848,17403,74359,23021,182101,74597,23744,148267,12055,7976,5349,11772,67540,167347,65318,18720,127832,108238,22828,90233,9987,259080,118185,73209,79270,13775,90100,137742,90799,70569,15699,19961,9087,67475,57872,39731,8810,134897,131868,146849,19898,3334,2281,167061,91073,60356,467742,74712,188,53179,137679,92769,29241,9537,132595,80119,1041,88962,5976,40171,44911,102859,139059,104558,98987,47761,19272,71472,113864,175377,73338,10857,23402,23758,1591,139864,5644,4076,118760,16427,134198,18853,20291,100849,37423,22038,36677,19071,195521,57445,11069,31869,55718,66882,148490,44,41296,75242,49704,166810,9906,20943,122258,49112,105667,15969,10344,6408,187694,21399,72742,58970,14867,14376,81889,41856,23225,15042,56993,16074,131389,74276,72407,53875,383108,53597,37363,68993,44854,122548,430927,198279,38430,80409,12245,2981,628,2818,17760,37437,238229,7968,46892,2200,3730,34190,65983,37959,112291,87850,70827,6522,20750,73913,111621,41652,19587,2780,58668,25916,85259,18200,168962,95781,42445,102050,7776,57662,103313,47742,96358,41964,66174,100396,29069,204735,19679,27978,7479,40264,22534,61183,36081,107436,58223,14680,23002,101311,24716,124108,12908,5646,31750,40380,14215,232799,102772,14122,96775,61398,50917,12096,149880,67833,598749,124194,155871,49216,790,14677,65319,56917,7440,145744,95701,12206,49405,129269,76199,45732,9767,11058,9047,210885,11051,7392,26307,2130,8132,147526,20802,232698,115660,50060,59789,57344,107623,80343,112676,23291,9866,160971,34032,118291,15719,59730,164911,28975,2659,58046,78480,21854,66209,53863,109085,116045,29021,46481,107552,22130,18764,70254,31272,11300,52460,43933,84738,20721,53869,190840,79673,105300,7561,321817,66924,13940,33281,101046,183181,32176,71878,5678,62924,79535,56646,40303,19559,27703,93042,73368,42187,3670,37376,46440,7023,36816,109628,20680,5940,276440,275233,170848,112093,136996,14984,20226,111441,77693,112960,48577,39370,55707,50314,123404,26570,54281,61372,123391,4857,35928,246740,132507,106646,44241,7196,92258,9825,37688,51197,303141,5590,15476,132986,10955,85782,34486,26696,7991,28813,18858,39546,11703,11365,38185,5716,93555,11925,40121,60002,6985,10976,171384,3887,43394,13337,56346,6381,252336,39573,75042,53711,1028,31781,44295,95925,131713,7214,68125,43571,70954,213234,1628,8760,13391,65485,17320,56038,1710,25248,60803,57399,19839,3870,326,281556,50945,72400,21460,316244,75619,56246,98775,481,13513,55765,50427,7388,123519,32929,57908,27124,61316,101097,57467,30228,48792,10788,20402,37318,50526,155730,34456,158065,145305,17832,43733,64052,4506,35072,205355,177028,184004,187081,68616,35938,83703,10367,36892,93186,260137,51934,89970,4985,23445,26755,21558,7948,78741,23376,124405,85594,68596,57536,49351,12619,56593,132668,99924,109728,71844,71935,196018,65464,17617,14987,89701,143773,33997,8687,22701,33258,2914,4436,72108,85610,9671,49067,2327,82988,1361,1672,44033,35777,30269,24057,10605,82236,616,15793,13919,47249,112086,116698,9484,80207,90574,33304,68624,93127,56101,42210,160929,4827,38995,38095,4701,125119,5027,33680,9236,231236,14135,87837,23318,70261,78893,30151,81482,14332,1084,74256,27532,46644,79185,3148,62615,6981,55672,31668,36825,1849,14536,37446,14738,23779,43058,162749,72199,1168,21346,5592,85932,85302,9668,18351,57135,150360,2080,228015,77953,34670,119302,151751,31009,106725,84265,45214,59289,74178,113071,263206,111009,4021,44449,188119,192629,123592,392506,292847,114487,12831,205858,9852,20780,79648,75767,357014,97721,18166,21005,67950,33226,204009,16536,2987,11335,66717,144910,47950,17262,55060,15063,2934,51038,26775,178497,66008,3427,49433,128592,20036,157553,63861,3089,23015,51210,28696,35933,49942,71135,231518,99620,17248,21835,176536,20676,16944,38700,165831,233253,295625,36723,13023,52745,10907,19423,67972,125868,95473,82875,1183,108455,52685,33417,64095,21433,52438,33191,127809,44505,211823,7810,2752,95548,162031,7185,91196,47563,61721,33359,17897,23682,42806,178101,22874,49707,199897,75419,82456,8618,11171,79712,116847,18783,44190,46564,5346,59046,95032,7893,14916,3214,26800,24172,121453,34362,10250,17408,18888,4840,68696,22831,13162,36005,32512,14800,62357,41723,45046,27247,37486,5372,2564,34261,298500,66509,133920,89138,31305,117697,19097,108304,81386,84106,23802,46411,63304,946,51417,41777,41041,19501,115864,60743,294354,37955,94165,18116,1156,17937,20645,57114,90804,58042,48643,92288,9861,2557,88546,61333,101008,12853,5148,87856,4152,144503,73841,18718,9789,147565,10846,42085,12789,30223,8993,56352,67203,2448,28215,6052,23540,126319,75933,36689,80235,23231,23561,21383,38800,77548,102798,21234,31468,158608,46188,63960,191679,8051,67014,11185,170078,42186,28827,34777,41930,212079,12421,34750,24111,110344,73918,45171,70826,141949,40063,23979,24254,37309,26724,27179,24718,83648,54938,14591,17425,29525,102675,48975,48654,12316,8929,60640,41709,50168,63264,89812,50716,48632,38755,138583,160123,55579,71829,24230,233277,46322,39650,166388,34718,24108,98252,7031,106695,62498,18258,35062,217827,78731,34824,33354,19520,60852,2432,60224,8587,2836,62955,702,20227,42285,40560,95592,62486,11094,53035,143291,18842,46177,77994,1770,9657,107422,172915,32655,128716,25886,25164,156740,119928,165875,85817,11007,89110,33956,12652,65156,180266,8494,36889,19958,20955,96,1264,118288,135769,44754,86671,5632,19026,168220,289120,33569,93821,66144,70635,7687,5642,2714,55445,56636,71545,184182,93133,7332,37389,12643,52315,22729,11014,158742,17050,152889,50178,34601,41945,52136,9948,26914,63548,95721,115951,40759,8960,158258,38938,49232,48325,42234,81523,253019,66128,40978,20048,238048,38760,62928,122560,118532,43687,137472,163689,26680,9878,17448,51035,16211,60834,36749,29178,14241,59868,150086,2305,26477,42422,34342,165341,83279,33894,14257,29928,12743,13957,125571,89134,66712,10952,16507,147839,30146,7249,16565,45399,39874,114565,215780,31990,230881,171477,102,196546,44538,10880,84948,281705,86651,10617,31395,2342,453658,43569,60561,132901,21845,17727,58556,258242,22262,58728,4008,77997,11806,37431,30599,81375,109137,185787,114085,217292,97453,169085,30593,60212,11544,102056,65580,2384,91655,4855,95725,7295,157994,16228,20669,53276,141590,105246,17334,25440,76067,17967,39321,38911,11362,28559,63807,21627,26468,85816,40120,1025,15234,58319,69516,66512,124548,75845,78873,22137,46681,51242,85683,32909,76747,35555,43396,101465,1765,73094,1077,2962,39028,66777,57831,42048,15828,13962,36041,63657,52412,5242,58846,2141,5506,219012,134451,3936,182230,17558,17153,152237,22621,49377,170216,35257,68233,65374,6510,11126,212151,7184,2480,22517,3437,33073,30156,16557,3768,55067,86829,91e3,12350,148650,66017,79424,70885,49066,28250,21369,51213,34533,11510,3258,18176,18465,84413,6315,36411,163765,4346,356,107618,598,13727,285026,162695,8749,14583,7132,63521,184253,32378,25991,5604,30961,53675,4874,84693,5086,34811,26978,56564,7904,33519,51221,113942,69253,6664,125563,22055,220680,102008,742,51930,19494,176108,44424,35123,13025,75685,11759,74335,22250,181453,131147,16984,132115,154311,11991,76452,52609,85351,196,30969,9198,74919,2529,56838,71779,29187,116304,3504,62330,41190,86153,28393,254926,104228,105189,13264,84359,3574,12415,8534,57147,10175,188174,59504,60932,66318,16407,107921,17638,99103,49278,28403,39786,145865,8462,3558,43406,142271,29139,21989,36552,93955,72365,7176,13556,106185,37957,321774,17782,129017,51154,27938,24952,1935,39366,2791,33489,41582,56078,24558,9311,5449,218786,27808,190429,68013,36020,86003,29735,3404,87348,119357,115714,2324,86796,81973,40992,43376,93621,28784,16808,36367,2517,2909,191926,24978,55303,53308,205724,60068,3098,21375,64784,23949,26579,63121,12319,80145,39967,97861,6757,70143,67642,37082,34698,69140,122883,46151,62187,80934,429,19437,135071,137885,222647,13331,154065,327,61778,74257,40116,37493,14855,85079,237641,42342,102164,199965,71204,4662,29368,5042,113914,122214,8955,13149,102503,43173,5659,163787,69003,307084,63392,171080,21390,81918,86666,36622,24126,28887,5736,28054,207170,163428,79891,346467,95363,38980,111806,80828,9200,19288,294896,114468,87405,111715,141705,7015,72754,68463,48738,243147,33397,101210,37051,98801,82847,20397,4940,185559,18716,54718,83491,11725,40803,1128,12128,23060,5174,7745,67007,46701,1571,27807,180186,256996,18975,16837,7877,212758,250379,15440,87954,57755,24719,124057,83461,258,50864,8874,29038,71289,31627,15429,9005,4061,113851,107716,82819,13651,79656,117851,17539,111446,12938,39724,190787,4352,15402,21070,62708,8539,23777,73853,13552,38810,86117,16285,56400,1718,75342,142863,29033,378,110113,180321,32586,23606,26393,160984,207987,23783,8406,16904,24596,47274,11693,46539,60524,78595,48423,31718,20170,9009,146268,15183,191060,172765,1349,138436,37365,10970,40509,225817,20021,70394,152138,21541,66559,66544,89352,2725,17258,91345,7313,3815,115868,8660,40362,4071,103524,39388,118275,21950,6549,38226,32754,209574,29201,43495,18028,20296,40597,18370,47520,202450,24134,2219,8195,69545,38041,136934,46374,19041,159811,84865,58620,846,98749,13569,30714,97246,32186,4479,27355,92973,35214,151491,75963,37631,1561,27200,238083,23182,60756,12291,25766,39355,102333,87362,65741,59906,19538,201575,48772,102938,24438,292580,39964,66366,9004,61379,50548,37622,38732,28379,68180,76622,17488,69849,5963,7219,48143,43413,55358,540,58691,29506,19245,52193,48621,5518,13048,118625,44755,191081,42061,89197,2259,60665,66994,71210,51232,3585,142096,55024,7892,8345,58653,463307,65658,64319,137941,136323,53499,12746,43492,6978,95163,29925,60175,5128,7352,41463,184756,121146,20473,18426,4598,5309,54580,14277,121151,10691,56711,43880,63409,76682,11830,172218,264898,32632,66536,81062,31649,25788,92774,60222,11100,63159,9432,224657,25240,53613,152,138620,163829,2397,85345,12501,37507,64932,38575,43522,65789,80198,78796,35226,3851,108891,73311,3060,28391,93671,39663,46142,30982,66041,37281,68157,26553,71872,81142,211527,39747,118119,22695,2859,11066,20232,168911,7933,197005,17066,111071,44434,133994,120798,12766,227798,45756,132852,29917,36076,55352,65281,129800,41958,18944,84678,18580,168093,132621,39997,54092,27740,32354,3770,114118,103242,43918,15899,18574,145944,3190,123469,219903,24169,100571,62403,16776,92779,14535,17168,16475,14304,37231,1712,28218,242754,61688,28980,1318,51359,222657,99200,67989,31772,23932,35351,201251,49041,27306,19128,40135,3986,77333,19649,120683,151927,21081,7076,78375,77501,101599,8011,89585,96715,58179,5378,102138,106793,26051,217276,4197,16297,27014,46721,13322,22806,5278,29629,70632,9647,71519,58818,40603,128530,8903,36770,56900,31483,26935,43845,34265,34920,87658,6114,84767,64250,47318,50720,19264,162514,33357,13117,6705,46696,75032,71054,87004,42035,69138,11903,99854,102328,19611,34525,69312,6431,49842,101600,133178,108751,41829,89939,225664,48916,99556,9195,130387,5960,36857,116724,53518,94002,39077,53996,6945,22261,64291,8314,152785,57588,16522,9091,5048,87671,35441,39509,1945,12423,158923,178413,37549,14095,1475,73188,62878,4819,24012,68534,42606,4010,120809,57497,59564,101758,103718,32701,80116,12345,95834,46918,21468,53213,15665,31200,3867,5140,96013,250744,21016,10069,13968,35449,180829,27683,39704,59956,22893,3115,26293,32785,75934,62445,141162,62720,2018,83638,19949,114012,95006,3330,99829,130935,309272,9565,55874,121727,37017,23586,319858,40970,27602,8625,112329,61060,100088,118525,25922,16232,1907,60671,51583,44553,80993,5262,94679,8676,940,20736,11823,3020,16476,12340,152600,97416,3703,25744,66826,16245,16876,46446,84798,74227,176020,45192,61955,75496,23946,23626,40372,26036,6149,11822,30582,16541,41914,82385,232823,40921,80773,14930,3631,7517,39619,4348,36180,126106,138939,62611,1477,113512,47321,25052,14546,118881,29060,23589,128322,36795,18401,137921,104699,267929,36194,172791,18113,4766,188215,30083,332586,94089,5805,77909,22194,68234,154976,43220,40660,70001,184893,138095,11128,103010,22663,5108,212615,8485,5565,49222,54614,26530,42639,16319,55062,152662,105595,21114,22216,10294,68158,10436,86950,7206,62115,3977,3657,59874,456,118617,18156,106663,112229,80992,17442,8217,55551,5133,34344,251927,51153,39364,201321,7816,66803,23057,156724,145664,14276,95705,979,2796,6875,13429,212525,50602,26276,28284,3424,19465,52397,46963,31420,51399,206476,92317,48851,637,100820,83349,10317,60227,21972,6908,282439,32857,224767,95629,83882,42106,87338,69757,29840,68709,37665,45244,114577,49188,175943,54009,186746,106158,70168,3358,234002,50555,9221,129338,9562,20118,32923,78479,118280,65752,4977,10474,102174,60947,129006,10570,83451,8598,8078,159367,123785,80438,16742,5905,5281,181513,42402,6977,163136,93179,42191,14968,50421,112401,105440,33456,57347,121611,4221,94954,36517,24046,27796,6255,33394,72990,135408,116627,1233,57874,25654,95419,68156,401399,313338,55208,45573,93124,119251,47200,38196,11909,130667,45391,73904,64964,167846,4137,115606,52036,62214,7969,160925,7187,1132,134835,40309,73195,64494,80472,444841,61111,26500,45323,40743,53625,52797,22659,15631,29739,36706,28841,39147,102836,26794,10536,14845,87305,45874,12241,127587,83833,57183,79722,30844,41304,84655,20825,92500,3722,25655,27811,10157,81634,31362,34088,92487,70123,22190,185100,72658,139035,192523,88241,2078,230490,44528,85638,100198,22088,29982,291233,241062,13865,4445,137791,37835,107218,31726,19718,38234,72528,23046,19177,66695,5109,17251,28077,5617,21554,47839,72425,133825,1486,73065,181275,141508,21768,62971,63082,2512,34200,9904,120309,6392,91243,68416,268253,41199,116757,138551,185526,41246,28986,4093,19057,17295,4148,245766,122360,35356,112075,20301,75441,10998,7977,19769,62922,937,63547,100196,26427,157820,20983,236696,22935,8140,90315,156004,47204,140973,7726,45097,52725,22636,23436,257282,105247,522,88389,216031,202204,46812,211666,19693,68828,81691,45925,11256,30292,372,5236,167826,88328,232776,151611,5360,82104,18841,80393,25465,18285,20320,72377,31730,33160,45803,38715,27705,37379,24163,18360,103586,4015,32305,269494,91252,20080,36567,54650,7797,57073,12650,31164,42209,6375,261663,105528,81661,106002,2800,5375,17247,43151,4442,15727,194619,100855,144898,62320,78465,39929,16454,1967,28311,61363,17219,9395,8745,121445,76939,80385,162380,22009,54191,44248,16299,122830,48151,74429,78291,64755,14238,44966,2511,17712,67954,93583,829,105899,49935,84750,11591,33185,85447,42717,27409,208542,28965,62052,52525,5597,25694,65594,16343,63224,276188,12475,9331,127507,38522,57287,24128,133161,79723,105548,133695,48917,27558,43278,46520,13778,141954,110785,83366,17715,46317,105763,66298,147013,41086,94180,16478,220447,44611,730,19722,78975,117889,125643,26254,16574,18480,65006,15806,38549,246418,46052,36056,8440,34984,30170,3163,59800,4458,115442,4283,41970,33507,104078,1653,22,121158,276486,3655,6338,24048,133421,23641,2161,24422,36006,8086,10675,181474,12307,29514,59143,14729,52509,87128,122470,19446,80852,33314,24573,119864,14237,9652,57779,6612,51851,15284,98871,90581,124466,156831,21190,22015,71380,161906,87247,69201,18392,17908,108470,72962,40719,14338,17911,95260,43339,20610,78916,20710,72451,11315,31448,17263,58853,178878,48111,116002,45497,80506,82605,85880,36300,121755,25215,36118,301929,88728,405223,276136,553,34704,212438,49970,78329,922,20711,25036,257130,38295,145369,18128,15385,30829,55656,48345,8012,3561,28004,122041,192900,58338,112508,41085,29976,87040,47117,23905,4336,92061,138880,97407,42083,172121,6256,25192,172671,5,93568,1420,12677,31605,56743,40620,6015,78415,231077,31298,80026,13902,19048,24924,170586,32955,176119,87859,36731,6773,27711,24658,26475,115216,133207,93250,95820,88522,8317,5714,124047,55219,86860,19677,23961,22928,162209,8904,225992,359835,56084,96201,29392,96558,86071,93643,55114,13347,8183,95129,82012,2017,123336,34219,115554,157159,47747,101684,41008,18735,193781,104151,226906,7552,179874,124113,31159,21162,44010,14771,51268,166128,31382,73124,77438,92830,205709,12113,1292,38937,13114,1334,2118,15597,69581,14449,21934,76618,48728,67038,14967,51495,24243,87736,147249,26720,11119,46063,43749,5843,44147,152629,133428,65703,14269,45604,57982,28672,55616,45957,8438,95433,37698,220862,132034,39456,61870,4161,26501,73560,56418,9845,4654,20916,10456,88920,119358,9015,65931,96507,48029,38534,21676,109081,43078,34943,25089,6131,28766,23665,5477,10255,16695,67,45778,42443,42770,29534,23733,100513,62617,42630,48746,14191,43753,50295,26007,8792,57243,43119,54725,164253,58250,112304,131796,25165,4651,3188,24831,47748,3705,19540,13211,102095,5593,18699,23666,32005,117571,33541,60584,74573,86311,99443,25172,27222,168938,7143,11853,53560,18834,19960,86522,28217,53266,117700,72989,34323,18721,66450,34346,74056,47217,202002,46269,9429,68582,75458,37823,82843,96652,32549,145144,27958,19820,158086,31955,201406,135379,31207,192545,12950,51704,9094,248263,76147,64028,110009,79407,89345,99284,223492,47966,26848,15359,201137,2861,110507,71231,72297,31851,118777,71039,151051,240855,16333,50766,14727,7939,4149,80908,418780,88378,59276,1327,7284,38576,79814,65820,42199,84860,49574,62596,12396,70598,40117,8648,7994,16836,7630,14047,359699,106878,525,29037,28064,13380,11675,50669,74216,103539,180314,27449,56299,172344,19274,7301,246099,32043,19422,36506,129317,6806,30140,4614,46639,66926,932,86600,6322,27847,233103,10541,39025,34887,3517,12972,26220,2031,66561,115015,48658,47596,12714,33845,3893,16165,35237,89983,14769,11962,147224,47018,29977,27979,5552,82338,86023,131368,1218,24853,237840,132193,15455,40873,3668,65351,53388,15229,59889,272245,47934,11858,34347,18038,90853,86981,300602,19343,114181,29362,84921,6095,106059,79472,38015,1206,48741,6208,8e4,21916,17423,6002,108083,24479,34931,56661,9511,26995,100694,163853,35997,81254,58321,18919,171890,86877,91341,74503,70477,53412,7027,59281,39892,131302,5864,15947,61301,67466,162369,47956,27874,35624,282324,21270,111847,102548,41482,30955,116737,28264,8592,55458,22301,75090,29821,30697,51709,3041,19208,8038,24634,30467,87509,126428,19389,18814,152686,20701,83474,45832,80891,105808,11378,153223,120770,98186,150633,49838,9141,12755,30962,5260,74490,21256,31678,65062,33326,289838,187831,20595,89768,2805,58535,10844,70085,12090,2451,138068,98544,24461,4511,6754,41684,28203,3383,65355,82833,30161,83924,234361,128424,28921,222594,33975,125491,34069,11508,67464,144226,41850,98703,34371,7901,21254,38398,65651,23549,53883,213340,123269,12028,71764,177701,28758,2623,68395,11549,15232,68603,9660,63116,36079,57093,31198,20475,48467,89984,35619,186847,107469,31389,43631,73867,41949,68841,114250,1605,30564,63403,17588,27680,99533,12641,70325,50428,73426,78379,11855,91651,72081,91720,60198,15743,12065,83398,140046,6761,46598,45900,5068,886,62448,148968,37347,19405,9680,15819,43496,63370,75667,163700,37639,3633,22774,34341,183131,134335,37200,23915,7054,14194,12970,26438,13350,285521,25594,8219,104410,91039,168804,138480,149734,15907,33818,61132,60082,4622,110187,56736,13551,73571,3945,73463,65498,17758,263266,17593,2710,27585,54469,38200,45367,63754,28881,3473,12791,98287,31895,65787,4463,94536,24951,36332,59901,28803,52130,86403,7668,181822,74831,18977,9850,177206,145485,109798,7292,31421,26280,77211,58511,12507,127004,11113,147,8729,56208,43066,79926,129937,31345,83947,39915,46146,98763,42566,1337,13192,18323,105163,80570,117753,16555,72883,11077,159438,40764,70933,83329,26066,12276,72059,21655,173836,126713,69454,153482,91585,70644,102558,110483,6764,127864,190133,3961,101798,20945,71138,82402,90884,69669,44753,923,16939,59700,164258,25969,27082,31399,43846,6306,246093,51342,6153,151581,202801,182731,56475,162188,89426,141356,14355,121815,27536,28023,65257,77523,106668,127314,24947,12790,38796,169698,23555,10725,44573,183083,42088,62716,43265,105958,32050,44067,50118,1668,3874,6243,318411,16599,1691,94999,52378,28671,216728,123258,2059,34969,69225,5913,136280,171443,141515,91662,22175,135282,80020,92270,1663,4808,4482,3495,34691,5226,109830,108512,17342,107488,11606,123190,100247,29666,146527,113014,15794,30894,13224,39585,243192,22351,9903,7836,47699,11078,25468,122291,48821,26780,122679,75521,81450,630,4895,92900,55074,74293,17441,3563,111657,103102,51613,12318,52370,36191,68245,34269,40445,41354,122901,168604,182500,62012,42557,11259,24428,115113,86345,12362,3909,78430,86852,134602,20459,47853,93879,22577,7659,3688,38555,13349,17381,56715,91639,12493,10895,92438,3142,37057,28928,2004,36427,32268,34222,209974,10432,67436,41989,173518,107930,27079,62729,30908,55558,5828,45031,14902,53546,8204,144263,60255,14520,88212,86582,109589,69356,8064,47449,8505,66558,16886,4844,52817,111260,215129,12941,91118,650,20770,6273,73089,40618,62790,2873,35002,14023,97208,19386,102646,36993,143736,135457,35385,113601,17893,32627,84439,100619,56016,6581,57264,172160,45452,111710,203627,70131,24100,322787,1996,35665,70078,22358,90922,83658,4097,63200,58499,14542,99153,52159,6615,12414,63415,31986,16823,1579,65405,137809,8841,16898,48082,259,33014,42375,12260,179850,73667,91389,98882,29532,17311,326251,41092,5928,20742,44964,48019,43505,9317,49265,6643,192712,48424,163487,19861,20113,70848,31928,105333,23685,78563,14638,54755,7158,24142,44018,20774,125255,20331,24280,10163,1285,2336,39851,4299,117269,46714,63816,87779,159624,11731,9971,990,137317,108831,50994,74554,162680,23640,131597,146962,170620,34829,91205,21184,1913,63616,18427,93136,156592,17519,67565,115882,138220,78622,88535,18115,2711,33554,109492,54298,971,24914,25863,36363,45715,27099,194995,14299,178181,111488,72395,322385,157719,130787,11897,81843,83999,11369,49280,118604,40922,61332,110343,53407,75639,40582,300440,54722,25637,13694,48248,48278,194521,56203,52779,48783,72627,10953,376,16733,280238,26351,230789,15132,25168,137270,3588,63704,73376,94031,74284,19443,159557,9697,39901,13351,119050,15406,146455,3460,29556,75195,37673,102524,92329,47289,98413,15311,100684,56345,7116,95480,11590,7200,167,23610,58426,17730,136656,27944,53151,2701,8824,103124,3017,90744,113588,53216,79736,65940,26931,498,29568,80540,143543,21292,1740,59268,16561,180816,42323,50174,40890,52866,10703,57169,4700,17191,4424,93511,49698,166650,26972,48631,165169,82879,69326,202970,4007,2376,231325,139592,22119,62851,37504,68816,58345,67398,186643,43331,277416,53749,15746,23102,17432,4793,151138,48822,54265,48203,198688,14305,54287,2291,18018,113378,123260,7180,97549,87027,120085,2920,76080,8190,102005,5641,64580,14955,59802,54028,58884,19367,81779,412567,85957,97053,103637,78871,29364,27637,141728,4767,30686,112738,130146,42745,12730,105040,14844,232,210944,36581,152317,135543,29744,3129,55647,58149,46319,27265,17499,28005,59948,7170,34138,5702,293047,110892,408,91760,218674,18469,46095,81403,14389,4610,35672,73060,11006,74848,104820,118143,190357,20043,105358,141735,5115,27093,45924,123073,52599,29433,9616,238350,78610,24851,58858,26769,31969,24613,18294,4982,32735,39639,143563,112073,202205,12567,4873,88601,44897,81503,101648,81362,34662,85277,17574,48173,21435,221188,40215,39576,80786,26544,64668,81841,10731,37733,247986,149188,127703,495,18382,54388,72446,43071,30974,198723,89608,41360,190,33045,8386,31658,19992,237838,119015,137622,50890,100913,6460,116233,267230,26621,104129,65114,14190,41542,14888,85962,23342,23041,26453,43725,71809,45186,4770,46452,53894,56616,221286,18973,9038,109299,55365,19366,26863,18808,60909,69353,41738,83463,12100,68561,72860,3980,13796,49340,12332,31311,27418,4255,53430,18976,45523,510,14224,30477,26581,4530,3651,101663,139840,22709,150861,31996,63923,120623,262522,3076,10528,2929,14672,130238,18087,9816,121894,100308,25085,55111,14565,18952,53293,2042,369988,23674,61789,133529,28783,108293,35477,47119,36448,71049,40015,33055,78598,198442,1833,159937,40654,77444,189245,113153,8621,18599,38553,35223,166072,2375,11659,21786,89523,6032,12116,63046,159398,18454,3678,32521,47626,11411,103527,38896,42946,15696,26370,10185,8413,37080,165583,4331,63555,14907,72220,50056,6623,62236,36565,49783,10049,17503,100581,55951,146244,24724,9626,17969,25524,109300,173965,99994,101056,46459,43647,53737,277968,8347,123521,74858,33829,44762,77574,877,81377,222525,123532,30602,43881,53145,2973,16284,81940,61281,127044,63620,9875,14756,114829,19032,9202,52759,119141,23928,120551,19607,3599,33401,76821,73233,117430,39968,36539,7071,5446,121735,194059,15206,45283,6706,15603,65615,1207,165723,92275,34773,104447,8396,32353,205240,164323,13600,60555,79205,25532,22907,33410,57480,107111,69630,32137,47832,70913,33161,20321,2371,117348,10714,86246,1625,11763,17900,268,78457,99175,97940,101092,86660,32221,14041,128504,125080,53744,124263,31017,13897,403,31859,21964,5633,111630,5547,77329,17961,18241,84995,25984,12983,67491,62168,47262,5241,297,51191,7351,8967,147212,82060,16821,782,11033,82431,62957,5026,43459,77963,203477,53528,6247,191852,87774,74164,215654,13467,1522,219964,28589,244104,16242,117821,67725,72570,156792,17186,15979,26990,44128,193014,35276,57125,16212,166451,68017,6905,77608,16364,53777,75921,76426,37975,26203,269296,64099,84122,12077,38533,830,4407,20139,963,43028,38902,42911,37503,83343,85045,16979,1165,60835,137387,58380,86990,110066,134540,56331,193845,81238,17922,163093,38744,110641,12502,56404,34862,26865,125964,12965,111648,25547,7771,27196,136980,9555,29551,107158,57885,18831,37705,35505,101742,13970,102109,62548,124657,23328,11124,89592,146376,248050,6241,22033,18337,80685,29898,11908,216623,67721,106162,146610,21377,15085,91552,42041,62560,122532,125336,102365,121537,142559,29693,223919,11515,110495,18776,22494,5895,185059,103592,229351,51220,100102,37027,257855,29359,54123,36066,106493,12244,79258,32002,432,56205,94836,90182,6726,14762,29391,48938,26864,38083,60364,3310,60192,14766,205567,57504,110760,22649,24666,46333,21517,3430,13135,28873,27052,158809,11597,20529,6695,23138,22960,37137,45574,6545,305877,43423,26153,24769,59844,14501,10430,134352,56169,13213,103432,49523,35181,13435,12408,129475,64620,230854,77390,51990,15653,83248,33466,44571,117828,51481,2187,10559,68019,18021,54895,48247,18354,33737,4554,108595,37288,39767,116707,9175,3726,108877,21616,83684,49862,1938,8543,276466,20134,108498,48770,102254,31914,131520,185291,100559,51890,209,19526,76471,50544,71814,99351,8172,198526,28816,20419,9109,98389,136777,76479,75596,30635,165417,48216,120220,25955,211071,39314,24308,32164,2559,146280,43403,9233,17947,90585,1786,86920,125662,2457,64741,32152,32918,122882,78538,44001,31723,56426,23375,103172,88177,145697,52506,49319,68016,31664,41488,18486,110400,7030,28241,986,109199,19900,42147,56864,65287,49183,7858,24e3,30453,840,16673,25907,68916,89927,6309,158335,36407,199737,130464,13137,59603,201778,195292,21015,42466,179062,172561,89492,11075,180407,31868,72493,20998,60217,9865,19530,39274,130266,54539,21623,12535,13505,40641,73375,4087,85633,2153,3117,70680,55788,92096,47509,98493,37490,271936,151475,3032,16171,96642,34106,78425,125761,19591,3366,19316,54508,24183,50786,194248,91528,33253,34622,108355,41741,705,3814,3883,108929,13203,67831,10142,59754,68208,29128,84820,56880,38794,24972,48571,40821,40476,18137,164254,24064,236309,79181,11282,395,39169,2013,51587,28551,9645,701,109513,115899,113566,12762,62045,58322,103726,41343,40866,244102,143816,2490,70346,40973,52618,15412,30720,104315,38917,42027,93676,17513,107418,20706,123890,13399,97727,24044,87962,65606,44250,98044,65276,74790,101473,19350,91570,1326,87790,172042,7577,100813,86896,85891,41512,108130,27794,14875,71431,12835,156250,58135,3759,22476,42176,115873,34686,56523,73643,108505,51491,20838,12721,32863,45700,29496,13700,34294,55360,29206,155942,123812,7706,163234,203,132720,49358,144431,8130,175788,35818,3270,76832,25710,54095,97274,28779,94621,74396,19092,128242,58067,20885,14670,93255,15107,63291,23654,126900,129421,59294,262659,9798,3251,67344,28600,44629,50672,29072,26999,31526,23183,49175,165843,175455,17282,175411,32022,45989,30298,90690,78118,83156,23749,35636,31317,7069,80381,94561,133756,14960,97404,6138,41065,78041,32843,16601,34123,9559,146529,123377,96395,54441,42012,84257,123541,10745,22139,106459,11720,150883,172651,154996,110538,4728,53447,25704,2009,71152,119354,21166,66604,1429,216162,8637,122250,63520,27180,29172,36124,276428,107787,77184,4680,14952,104903,24418,14793,51561,52931,8371,26342,48526,7118,92066,67280,40653,8847,34597,105438,14198,50163,61188,146286,50315,41205,170829,161496,585,197359,95056,1687,365794,91349,48507,5804,49263,5146,104902,96365,117343,132222,46084,96919,16875,8073,262381,79982,52663,13928,16056,153908,15145,109256,132308,18763,24904,167644,13618,40750,18686,147124,114709,150038,52849,2938,12568,48617,8778,5459,44202,44591,74914,17183,248689,13878,7822,80060,23116,194037,18487,2067,7798,43077,33678,244028,31320,74273,2794,19466,8218,36280,183997,48124,19416,29656,19280,98734,7715,18311,30701,133602,150307,126956,7378,2933,79903,13178,12593,86571,26604,92446,13574,44205,65699,427599,21118,8245,14407,27877,47936,33542,7916,26460,117762,21596,37818,2249,127359,209394,60044,47677,308089,36791,154971,31417,6998,150042,174360,12255,43009,29335,48739,3912,101398,53340,2580,146939,151295,45360,125275,15273,45383,27456,48761,23314,8750,60801,85823,104759,27894,123685,66968,39480,26917,55290,83305,2696,98390,57569,145853,340733,4919,20024,52268,30884,7413,203685,70989,112855,4129,50536,349518,68205,332641,159581,135361,236026,37563,176404,64899,6578,122033,63871,1850,85234,82089,66124,74145,121098,107351,12687,36881,117334,13136,14698,85933,93866,18047,32620,310,15094,46e3,88451,23632,36645,27940,87618,80520,58892,20976,27702,140090,96075,67841,103292,238964,87778,107338,17019,83427,67522,7302,8261,47570,116787,8730,80484,61772,174422,56005,131193,52875,14588,28471,59817,9586,15720,158155,51307,109734,15196,11025,59331,3884,52626,102602,84797,25158,27314,4437,20488,76214,189248,35023,114952,157376,2827,62439,102878,129749,36405,10329,109339,108633,36662,1254,13267,5470,87105,58004,15397,10434,159667,21864,52022,179464,3013,32147,31496,116832,18494,105502,129227,107267,50033,13481,9954,24267,22141,16257,116154,36185,950,115685,11305,176708,2048,178671,112573,287867,162328,497663,95170,50979,193861,50987,30368,136257,31830,46549,15119,169876,23788,17462,249887,57377,1949,35448,14791,43769,210091,3783,34612,282103,88380,245190,5457,20491,98908,11402,86899,117916,16028,162584,60644,320177,156096,31065,55876,22e3,77655,9992,23397,13757,317623,63978,215255,2443,17648,93231,27388,104529,93807,55505,140477,12046,112040,70887,40152,94365,112353,25063,114679,266061,71248,119555,15589,2244,617,14129,211431,70110,100652,7777,4383,85911,89221,21010,120615,58357,86405,37554,41647,18,15143,69662,60491,14714,186134,148344,42347,5410,168175,44535,42449,343894,129417,99682,20659,27272,140483,63455,222159,17536,13722,42637,62324,11976,114691,148109,2283,32057,182393,4295,147364,33705,2075,44303,30274,28331,63740,69740,29148,10346,44862,33716,73937,153333,12930,38784,247159,2515,41053,20256,83368,256189,54639,115240,5096,24661,175419,153552,26516,141,138176,63885,34115,47222,55709,2765,28479,38875,236608,12229,22921,77291,54426,45388,2860,57787,114579,295139,105782,17826,71066,19119,54364,69385,16568,12323,28057,33346,34919,124763,155533,101386,31644,8627,49001,303600,29868,63213,9103,77280,71333,9696,138789,37059,24823,5057,21352,32368,114208,56803,19424,10445,58514,8661,209508,26187,171838,10460,63454,14016,122504,41328,21329,46618,32493,38225,7855,31763,7945,29876,8734,6438,24205,97490,139977,130740,47323,33195,85390,57194,13813,60600,21313,96251,7699,27584,170521,139271,1363,4402,336738,129223,84983,69150,13147,3590,163929,207225,155260,55916,20288,4503,8398,98490,11773,27512,37113,84976,86558,28365,11756,116005,182148,13733,115313,47644,67208,85069,9347,14995,226141,14704,101835,41159,35314,13113,63526,214039,29978,50446,83339,17440,129441,72522,118641,97816,24907,73844,15717,118884,167255,96509,162793,30847,36849,51297,78974,77793,10427,1873,2972,9999,35074,28190,64297,146836,46298,60038,163007,108919,61219,2403,75022,127339,4233,110389,69022,9833,128097,88016,79390,222936,22570,94657,28462,56956,38803,81536,30474,152794,19566,16481,147408,74574,81895,20731,1918,1366,76367,187321,54494,24366,21690,61696,33283,107477,77499,31112,414383,74362,18463,218441,120929,59848,258629,201924,69269,454,19989,13054,59894,3623,58908,20681,35723,78523,102680,38988,184112,108087,50944,132704,52966,21699,18860,96349,201411,82697,85395,95658,5093,6427,177894,44191,32755,26961,155739,6249,31310,81030,26574,84311,120155,86730,113535,7424,48888,13516,45747,98098,20077,183995,81945,43210,26704,40420,75831,45648,11180,6855,57927,65528,124096,34851,2598,156633,107572,127352,38169,123845,60142,62722,105584,232364,23211,68120,1601,22169,89299,747,258039,80572,7258,152249,11862,101204,8834,121434,33761,19175,133142,46343,40178,48723,3589,41977,30210,38868,62257,10087,82658,87827,90646,16415,47552,351723,28298,72225,91146,272760,1701,11295,1652,109651,300747,51863,198800,29446,11794,32345,37538,22356,33102,37590,113544,37970,11478,179743,25454,103417,59905,221970,105196,145604,7817,164809,102360,16974,75840,255333,56902,6659,1954,645,59400,67769,7689,18675,5215,13793,20536,27852,3387,29523,259718,16860,94625,43143,29245,15848,233581,22685,63631,78557,22836,133302,84513,1348,51826,47129,98836,58284,1830,1749,94642,10933,6145,12506,10975,13879,103781,144434,10268,28409,32346,52968,121567,107374,77268,23686,35097,10501,155275,15303,47136,21102,168741,55332,90385,15996,84817,681,137803,25054,142275,6163,38175,8056,124296,240642,65621,4934,178205,16101,62803,60964,18230,100622,76465,44689,14545,9543,47514,16852,93380,28048,12047,107106,37575,101485,77047,57326,34819,96137,76916,6469,46264,115983,75768,87668,69942,13027,165,8373,114231,26434,52844,42799,182044,23580,146254,38081,43236,33883,146220,382894,14606,46035,36481,166621,35417,95382,2957,59384,60428,36358,66343,75378,22267,22950,83528,17577,56474,25285,4619,179691,75355,95836,53295,34588,171410,4487,14679,84208,44015,18562,109133,54101,11531,86052,174479,303157,28095,9953,35642,14564,39802,16145,77606,117406,53038,121117,53624,22062,1212,7632,127157,237292,189087,10478,127345,102515,181997,86752,87623,10966,121602,68783,68681,83042,114380,138349,191305,67176,50085,39016,1427,42384,1412,67118,122616,72389,25260,2237,13576,137346,19938,20304,2191,68759,5373,61364,238507,75814,23931,69565,38993,131741,38364,12528,87762,5679,129853,5310,186831,32653,90338,260176,389531,108118,26843,43985,50175,30563,25106,56965,18130,140428,4542,165503,117991,24219,229605,1819,129663,1240,3797,76093,18398,71339,51919,93043,27175,47060,216257,6483,35051,1217,16512,80798,129064,13225,69339,8548,237079,72298,2575,34280,51379,117910,55671,53345,247552,29486,39328,140821,34681,57045,60177,5004,90269,78522,2479,322607,48474,61296,13057,31558,4678,59271,6699,27044,31988,35944,12503,83480,4389,136508,3781,114121,70279,4488,155829,42214,2898,68191,75695,305850,45041,74344,106509,30087,17429,93292,12477,290,23080,114802,35714,18751,26554,105424,17775,2144,2412,100610,65192,113975,52975,180272,135050,129815,76238,106483,21440,63186,4260,46189,9711,28249,4169,23429,23390,8324,141585,63809,67668,38457,38063,39226,59972,1189,203916,62368,14403,16949,61767,85801,1739,40147,35049,76757,33124,62102,15780,103593,103009,53484,22952,67973,114645,6566,5245,50462,7601,8288,3513,194571,80276,1908,54592,5124,58571,2513,6800,273997,193904,1119,17991,117245,2508,129156,82366,26278,71465,63341,56943,39662,106116,94966,156875,9736,2204,122308,94418,27134,1280,24539,49022,45314,3764,50904,46424,30699,28087,293839,9400,33646,40165,822,147499,50263,116179,29085,11863,31314,5578,17797,5104,12454,1604,15342,219206,10232,67800,94261,25872,13565,90339,78971,75377,26649,41184,47695,11514,35369,20767,14227,41953,309396,148270,147938,33074,14453,27499,109019,39018,25738,240196,158931,52820,8612,95853,21524,137010,84901,70869,70021,116794,48404,38771,6732,1070,70990,187297,49140,5238,576,3564,253975,16027,16483,2811,37775,19034,25259,4053,2e3,70083,95774,19713,33431,92703,91314,42381,288770,48194,95985,3991,77418,13406,241328,245086,56533,35275,62725,9246,51924,70181,95331,16163,31410,79016,39312,120878,119371,275987,80124,27712,9186,220,23598,146167,85209,68238,282190,57048,31273,30555,80913,17594,75779,59160,135002,101219,189377,29225,96735,60126,62522,104e3,27620,86814,17240,147533,11001,5425,43682,410,49460,87270,69480,46315,59448,1816,76201,9431,11788,87960,29063,65539,47347,11678,33846,7008,196704,9895,6753,8633,120892,59970,572824,115934,6646,202559,892,48351,37611,251282,57823,67263,57750,26527,34485,90747,7685,88370,6144,64182,1709,41969,21458,62327,181657,49247,225330,122600,114574,107124,85361,111833,63243,71420,15655,191178,72430,18063,51425,54002,12364,53225,86557,18193,97580,41232,138398,67821,128724,8944,233212,101353,52099,42127,14006,120107,32789,32132,3498,18123,33758,56058,5779,128760,59888,98869,18445,84702,51911,13234,218379,20093,39031,8074,70195,20708,23462,24355,131384,60189,26390,10403,41060,7140,10781,49410,42261,87202,82566,41663,43105,60276,2768,5733,74176,28329,2297,145430,131632,83615,122915,105441,655,224102,5284,136426,67763,16294,188511,32538,61049,27893,3394,13951,159099,28542,17930,145360,9492,190122,32285,78855,26440,13570,58648,73908,4239,124561,2444,74172,53131,11468,10794,73566,11623,35343,64710,30481,4163,10328,38309,29901,10538,154377,76132,92405,24839,11679,3465,13449,11637,7824,2337,57754,1260,14458,41118,19878,38661,13416,159180,37074,163164,54137,28627,52134,184900,8520,40385,29546,30502,22386,66527,107458,6850,24022,47983,30603,35083,8934,304066,39500,9,28261,33026,77251,9374,44833,116312,34990,29236,63563,125639,135405,165398,159055,55690,88141,69643,236964,31983,25572,20436,36746,60896,31850,16179,11828,5888,3043,66368,9750,31167,7915,53111,36430,1333,64344,93659,20061,60596,180191,51630,6792,30244,43509,101058,22409,420,44210,109783,43223,27030,72477,72831,32679,29235,7675,47556,12258,39907,149412,84926,118247,24692,71717,105038,86009,45941,41189,89453,29856,52543,30627,226798,67303,59230,67415,34408,1367,99685,16867,128419,52147,4111,125381,117881,16173,44093,102224,31575,23234,24870,83790,127407,239098,3200,994,1255,100903,242275,117266,55116,38205,16140,29662,11307,40414,208793,123355,56470,4862,75600,30119,58218,70828,24075,26974,7802,192353,4851,5475,78720,66596,3409,28573,64396,30381,30690,59859,88256,5406,99945,103064,34463,37727,24238,86643,60088,4057,23741,5967,162904,38240,28356,93858,25510,122879,6897,3278,7057,11971,4400,35461,211413,21395,59615,39471,87233,55795,128426,3051,22470,41950,14705,3974,180108,80476,78442,204996,91987,15634,67610,139015,142373,35611,51134,10387,4353,153456,57749,181039,14183,68447,151532,21107,36452,20551,3186,46247,46383,129666,88736,140662,146243,2066,8360,7978,64818,106963,17896,47801,10723,114821,223295,74192,3293,3393,16987,74064,11277,91622,4270,29828,27951,387869,103235,1374,61988,120083,477,145892,128378,11779,211263,61354,18221,17869,46530,83061,108538,157981,90608,67199,95080,49064,195814,12302,66307,10348,231346,160732,112859,63633,146558,21271,31037,198802,47622,12862,95710,3910,77850,73961,85585,34752,61e3,4082,24595,103679,71107,8208,79568,150019,16615,24961,139857,32664,197366,4559,54735,32696,4126,162019,75698,13916,70108,159638,19834,9349,24675,175560,49643,18206,52459,27992,10809,88865,401975,133172,29e3,34558,30915,3658,25834,42430,36562,125265,18182,10155,40149,97082,208980,19575,60853,90529,66545,9600,789,46420,2317,88593,55595,98980,115302,5742,169155,1073,177901,3472,11189,63711,78643,65472,50459,127979,93,42202,67053,21720,157650,11145,141378,42033,22824,85705,79114,35584,15974,1510,54172,28562,12451,104226,19190,97151,73024,20948,5151,81741,21499,29006,84183,198074,54003,45120,170125,26240,35177,28389,64863,79974,60778,176915,232183,45342,2038,80253,41564,40703,32689,5430,100689,5366,23007,134279,14266,26712,73993,24934,64242,52113,102887,61801,46415,201049,54251,62133,122757,164883,30815,139966,2319,30842,766,13362,10287,134518,86111,81665,82440,28333,43019,18963,8804,161944,23439,102144,101145,80029,39052,248708,30350,117340,11878,128467,974,138625,63961,5237,74778,61834,67040,43814,13690,65947,33809,232476,115258,181745,28824,94013,9510,10246,93722,81976,7217,114383,3493,16014,69045,72692,12145,80981,9507,6692,1620,60820,330444,35474,33962,4797,7053,295463,46445,27026,12491,77988,49524,35675,90947,29114,166705,101385,133782,32704,6186,84595,176031,185623,45966,151302,63069,1699,107491,947,15458,74452,196212,6046,10498,12163,10239,35191,243951,9277,9090,29539,54460,22820,26514,112549,60372,51753,48756,21812,70861,260326,41,44222,10441,16961,48148,138771,216194,5914,52153,53400,212036,56519,26245,10117,45888,15294,138019,90913,26368,43842,42111,23348,6082,194845,161089,156206,51546,11647,30759,302912,262094,8635,78876,26535,35283,54183,31183,85484,147873,12989,5197,6356,72894,65347,20150,27370,73787,1493,45918,12366,190217,20724,13858,10981,67449,81213,7553,14115,72242,271517,11842,48310,88743,143726,22177,3290,243231,58452,62937,12592,1654,40066,33477,13751,9921,128442,15868,7106,75236,83773,10775,36938,10482,170465,17368,17469,161508,32752,98340,800,19824,264456,3901,87319,2867,26782,9630,113102,185815,24197,44584,86366,40224,3636,140916,31731,267731,9567,53678,72984,29389,27963,17106,50282,284911,60170,8322,12608,23374,89652,5268,39044,229766,8869,151350,31436,177342,12269,183212,120418,116270,2843,78888,69192,7865,184099,1086,129897,18383,70508,20242,18508,229924,124569,35749,50589,55626,9884,83115,40971,30671,18135,14452,38861,17844,201826,5549,26413,17189,13561,38539,10679,143331,3314,36785,171194,49685,187713,67506,4618,104039,17060,195080,50648,33159,19238,67559,134840,28599,157523,17130,38064,117398,94355,31918,13575,34538,40326,13997,3494,348283,62481,26862,3603,104426,244363,153709,112487,304612,199674,41239,35545,54869,293005,28223,26277,26899,4533,18518,15492,38587,80488,70485,160395,263,60162,11382,222152,4696,250751,51921,182609,10707,48463,46243,1227,49111,111564,46502,33342,56846,68541,63559,858,139927,16654,229375,76759,26478,33205,95828,23399,92945,2637,35630,28470,143992,50214,14174,21456,166191,65665,1711,21594,78019,97599,111701,36,147151,110246,189022,43021,30397,40757,131935,42065,73335,48039,26596,28984,15102,2361,7421,202167,69744,43766,52826,3642,83304,33873,75140,63169,192389,36551,92748,13039,123959,233220,21738,84447,77230,20228,187852,19095,25799,92136,108774,29237,53947,2299,118106,2687,8830,42331,202924,33667,2023,73763,30704,19363,19779,16737,35629,48081,24068,101013,162338,291912,13749,24745,328289,167679,70086,48299,23306,16732,17801,43322,54589,3586,63653,43624,53474,925,109177,251316,43805,13082,19511,86565,142182,92461,17117,101033,103319,64589,4022,4351,235897,5352,82705,107142,46391,156084,5860,61365,10558,13045,7717,18357,33922,12590,33065,6928,46993,783,46937,67846,8952,26295,6107,119656,18799,17458,50747,4229,179559,112727,118080,20683,41464,125468,51560,49749,44231,7359,35339,62988,136487,67015,5208,29150,24956,105186,48858,6143,18097,6972,16404,73489,58742,97196,36357,164616,5834,32267,13746,147733,15113,132091,34127,106298,39729,106426,22294,9780,15602,36213,71502,42808,66802,599,60755,5851,39120,67363,108623,126368,72770,91263,32486,30596,151717,7951,52002,43103,11768,68942,40901,39344,24037,127500,116890,48403,16926,86750,17745,48648,159545,34460,58419,5634,114317,67865,31462,23352,24010,98185,125708,69686,68337,13610,26271,70691,2980,4768,27225,102402,75453,28106,8104,6931,1176,6274,6475,112635,22498,6176,238686,26832,28893,90319,14441,15682,15087,39517,45270,109134,104440,45965,47645,81772,7876,52683,87720,12898,4505,185665,2769,113401,15664,57592,105229,137381,97059,119268,6876,43309,33886,128363,35476,144249,67013,143587,83367,25703,91436,59347,53236,2289,16519,19844,46309,58558,99834,23313,218816,231303,36388,51333,183535,109792,139277,54306,90139,18235,8275,32710,37677,82464,86025,92204,88842,117723,37570,128723,234242,76350,73795,34896,148247,58424,11105,11744,45746,63372,17118,49772,199520,81902,38004,22911,33752,3125,1995,53792,4689,26909,108150,146062,69674,41811,161444,84855,8999,28561,16731,93937,3189,21967,24890,22943,1356,145300,51569,28802,517,118679,31703,40607,48098,108854,25003,10233,73969,177495,5248,24516,215347,146192,48712,60626,69188,40735,5866,586,101541,6509,47590,52129,5969,222045,110933,25733,24223,65339,62812,2414,155418,35819,16022,78423,43138,20995,128255,240673,46745,236093,72176,57085,97841,61248,107,36068,193177,105427,55726,215229,20446,47228,100420,87091,14429,121708,23605,21157,187721,21880,2997,203976,99166,95068,25877,7724,98925,83401,4829,13182,18229,13718,239662,38653,116505,153497,30589,89029,38962,181302,43853,78872,180301,4786,248240,7401,106136,112590,77745,19731,60880,77789,125748,135487,5975,48627,34084,12419,215770,47557,254582,10364,106495,21856,67539,88981,38805,21428,48732,42316,12149,16078,52808,25327,51322,33850,51147,12253,122354,46077,56483,254553,115417,81834,150991,94662,86668,7381,12841,100650,18218,15741,22372,68294,50705,15535,84660,61887,22553,72299,31361,24824,17743,46820,64288,31582,77006,111674,116384,30760,80920,86149,77192,51979,79691,60342,122805,103800,240873,160744,233114,78962,54920,8608,3484,316104,72548,24337,5088,230040,21926,10172,36838,26,86221,83458,102176,12062,17571,41929,41170,28428,68239,41750,103930,2634,18313,53019,34825,97837,63115,24606,73157,152474,14715,91439,37033,109806,140259,30668,174760,380,135597,95673,136073,65073,134249,13829,17279,122305,4420,46444,10237,64848,203623,70728,10349,182885,65075,24519,25783,40318,34139,22222,63394,55266,102764,41422,20126,65100,90408,53640,35128,48932,11192,38935,96839,34782,39492,19396,41332,6250,5511,19492,51304,25936,104466,54099,73771,86115,5080,7669,30891,111700,13931,25276,72289,135447,14820,258641,25265,31005,281179,75286,393,95359,14623,13584,6680,101227,80173,44933,76666,54542,13244,39348,458,25379,109451,134348,81143,6959,65554,12027,51311,8716,57589,140731,28467,23316,17272,30458,25980,55229,77197,83798,28302,114784,7428,34548,26241,14712,39336,103304,18928,54080,12870,334,87722,15208,16895,142098,114262,39820,83913,57817,28682,7721,14900,108672,11250,62246,42849,415188,1724,26555,24549,25505,26443,107450,145899,61035,43528,6901,60726,65906,267741,21338,147590,42079,18924,73017,135236,15393,5206,4026,84185,1531,5988,113890,82647,303391,7386,69844,71611,189865,76523,31877,13315,19314,198575,32821,1928,67641,25913,104475,103489,3297,70391,18406,15446,113347,19295,93790,27856,1792,167471,116449,8541,4408,41757,63233,25765,86680,64501,27034,24816,34975,6079,4486,49693,36229,16917,21581,62426,27862,11612,54284,35702,194034,355,24277,48262,87411,70504,310164,118018,12516,47559,43502,57433,107139,9290,66533,80863,14634,34312,91725,28606,21342,67241,72355,43244,375789,37402,174015,105070,8342,44167,67494,1890,16365,11723,271002,1865,47918,8350,45564,27742,25110,125803,8553,49504,81925,62211,4534,15491,19011,80373,206920,667,102405,128623,245524,5553,113309,192739,65766,19567,22832,261958,29679,21293,71134,20962,105123,24721,860,21752,33448,18372,157167,94822,35770,173224,232737,75729,28937,46828,28062,25453,5207,140366,36665,30652,6169,67920,150458,92040,23186,184604,92330,20891,176492,49427,27828,38305,42495,143982,49560,25503,90043,29747,65328,47830,12932,11068,77721,9003,25213,94205,140426,46090,89945,138173,192691,33329,112232,129905,35709,27514,1841,19957,31411,127476,53572,17497,173549,55063,175135,19841,69314,5192,237921,117660,150697,4060,273045,50414,98940,65348,153665,164423,58804,156695,48994,213928,86036,28608,8355,39574,34540,16927,135680,18374,151587,10830,53805,16878,16623,4282,48030,8537,14986,46102,13062,72897,72,33050,108227,39451,45935,651,113320,40535,95176,57450,48843,5003,19019,10407,211163,3848,1068,4988,32091,30095,41692,15099,43602,107434,50744,7627,171349,16313,150832,352665,207750,33937,38256,51091,156e3,87889,90663,84175,24908,114900,50365,31494,83829,5398,169342,47521,54818,18935,8356,43094,41212,174536,10082,92550,6678,60614,23355,69721,14796,34149,128830,58187,3179,208,40325,28399,225029,401412,51150,31580,207268,6657,10993,69818,64282,289845,23308,12961,38447,6681,52944,31855,2572,47646,120728,179148,37240,45196,218274,4816,3695,21961,50084,35209,18073,51452,27004,6100,33941,1377,84831,171214,85,141510,9078,99227,32610,6417,11718,49868,65579,87902,73018,49062,46280,61742,21512,40862,107733,15941,29168,157765,144919,14487,5767,158014,140070,7241,573,71584,16921,223566,40331,179473,35081,47926,140885,41508,52104,59180,42310,32811,29048,123517,102413,80208,10104,14746,12649,153641,126022,37965,113017,4171,83,142592,2809,6362,50416,71323,116894,260776,16204,1524,5760,30351,12658,20703,54403,36083,45408,74772,4946,14485,50759,111222,10890,2195,167147,92962,130534,16283,177256,35016,15472,210156,151187,73922,117691,43250,52051,37392,24811,24358,30830,5775,818,21969,1476,127322,151783,58392,31021,106913,65215,89407,90802,28531,11690,20234,95249,44602,37256,18707,11928,5161,4410,26571,51903,49768,22008,25252,65780,209499,68769,203726,13249,137363,48845,86823,6658,5674,31881,1083,1823,108676,34518,166752,13791,14287,91576,91429,8665,11529,26401,16191,91972,30964,5254,28486,54697,79613,66520,18447,22870,45203,194466,22822,51703,12278,76716,44595,73455,33546,12235,144843,36154,51247,11116,33040,3180,225753,60864,1972,28469,12891,28879,10338,144157,56294,353058,38302,41447,87532,110616,27065,168438,6557,1213,50804,144643,24817,2390,136531,38174,247513,16190,4059,122791,131994,137430,39506,57650,16305,5188,54309,106128,20628,88071,67394,395446,250285,66176,91254,1399,114196,43915,60230,44853,27206,106353,43013,18733,345105,226453,51202,16607,57106,117175,35492,10476,89598,127439,15187,39624,13688,61570,10615,31111,59370,6238,175252,32143,224492,41388,95408,34384,148238,78307,38959,9340,160091,61443,15737,11216,41244,170,38299,102443,113097,26382,14027,33707,3957,76300,66160,19431,18900,6952,1717,108656,82206,188021,257335,27295,43999,41210,31777,46956,57457,12657,11489,15697,48060,204748,53583,82422,284790,30503,137341,8120,19615,220311,15991,10217,63424,9808,67431,70976,98221,4491,15177,28535,144789,751,13230,2394,1504,33977,132104,30316,22230,931,97193,185240,24826,22687,174322,15307,22988,1390,188745,180325,29580,59068,74903,18994,29195,79,15436,7622,38462,11566,138710,44828,45774,37768,99236,68137,84083,19282,22698,17134,74807,126662,173497,46248,16938,119735,3212,28292,213652,49013,9975,32180,45660,86250,4801,68788,95490,77482,113751,11994,44624,94452,46839,128497,100316,5798,58588,73184,202987,65417,37790,88524,1606,43156,97964,105717,34947,11203,100060,37742,130074,93653,107799,94311,196106,41347,8035,10780,16390,27883,118236,167395,1979,25006,19375,31628,18916,144723,78502,114047,103107,86492,107686,5844,20934,206963,23556,22591,16562,146333,20167,10471,117434,33085,2863,9740,36669,41849,37271,22790,18209,28979,8231,12952,54408,21731,25130,45208,55748,138120,75826,414,29593,9925,292865,25999,683,123149,7036,92159,86055,61827,103680,23176,54918,58466,57578,13305,5709,86479,16697,31064,17660,200919,10770,49793,33423,32370,52047,16488,62555,6459,8426,83493,7763,59725,82812,18628,67760,79405,68557,9612,7673,28102,56517,69620,171797,32458,29541,15870,81109,32080,207644,71495,21202,11039,91036,61230,2810,130800,32260,4613,60590,37112,75214,33979,126402,155062,30642,63875,12810,194463,82799,47664,16725,36685,43367,61099,449,172150,102867,21691,301838,36745,7130,18671,57316,34852,38034,54182,35578,65900,99486,19771,3456,2658,16914,99866,28390,28109,8262,21147,34353,20006,4228,137085,1675,203023,283196,198286,214375,163329,290603,152574,40471,83506,30068,14730,23177,131539,34759,27668,32178,71896,104799,116305,85430,119262,42860,25160,8911,23428,49437,105322,6519,16203,6349,74711,1230,38045,8540,75165,44736,25909,51026,317034,4984,32281,91312,27060,44431,17817,45363,155937,239085,35697,59784,91993,29531,126740,213757,76560,167776,285273,24262,8237,65030,41160,74437,48804,118916,13159,37842,1031,75349,1478,11655,108777,23435,277425,101734,67469,70231,124711,43532,28514,65526,54956,1e3,21882,17728,25302,40952,52214,149632,1999,2111,3259,63362,89961,220561,39777,26335,9063,10572,12416,34551,34623,38604,24723,5947,15588,69927,66252,119177,69173,46629,28714,70715,212408,20521,406913,74380,11716,50659,50862,37009,88460,130101,7210,53853,538,65120,151950,55806,163748,52837,13153,21100,16674,64536,6091,138201,44837,58547,3723,163,2177,32288,85454,34033,8497,14282,25742,10535,10741,79559,117493,243787,49337,100718,79495,40139,42956,7551,55433,15421,31509,23034,45081,547,61176,53434,328001,8470,36263,30145,4519,74173,53935,11845,73774,60211,78025,3,4102,73782,109293,315332,48412,26683,13714,6865,20128,18490,104141,325,39470,171970,115860,15707,7268,73301,74336,31370,2368,111827,107757,136231,142844,97138,96638,84053,38691,23801,1588,10573,122098,77039,240,186135,146101,11996,18143,112963,46171,155836,348769,47795,121213,116266,132515,3344,144804,31286,99187,255838,129694,35894,48779,55235,148582,71967,65282,15174,13920,47080,6147,108242,157593,125025,7136,1286,28957,127956,28402,98813,20805,7532,109417,40610,5041,32958,15142,18408,108596,33543,50517,27748,80114,233434,91447,487,37094,100048,30541,43477,10639,89862,155868,37667,8726,60684,237903,73408,99589,12190,38739,97348,3914,13594,2680,149016,13907,30171,28343,23530,115225,61104,35821,147679,14337,4297,244282,24085,326976,56428,7851,21303,131620,71446,83253,68692,111870,5224,15813,38197,49026,45057,13660,3306,76345,40671,27905,91072,996,68527,62085,91351,122634,55109,168209,2024,27560,112707,17352,8306,167115,169921,166958,5031,46020,11844,67284,19130,76185,6920,32849,5450,14610,22451,21002,17392,31872,66682,84796,13709,40210,59898,12029,8719,53564,21462,91884,21647,88379,194428,12754,37797,132826,160016,22567,54383,53186,77611,31107,8339,4694,19185,90355,23597,17222,140675,28442,23668,55977,9128,61555,28774,155229,17658,9390,24379,69357,15752,127381,239631,62460,93181,55913,45133,140155,18676,25249,33164,29581,82837,67223,22362,29975,7317,52813,1943,29613,20012,207130,49617,49651,5636,15334,36313,29226,28084,95247,72072,19e3,224932,15811,114,32127,38097,37508,88507,37225,27359,91626,12193,69279,20608,11055,88156,92808,2152,57259,55275,72789,24475,104414,1708,9882,3818,48661,66897,1631,34806,227930,85815,87753,18321,250664,72733,25107,206797,50891,8082,196411,92596,96764,152823,65514,22819,387277,62176,51225,40329,15563,189,3659,73670,64357,51793,275136,33482,86653,74615,67058,11318,125720,15388,22388,8267,1730,102663,170910,40784,7144,85373,13040,7088,94309,583,44224,140424,77439,18496,164026,36578,4722,9151,5824,63365,26510,35199,40500,79277,32495,44614,35233,9566,203293,152144,7097,2330,183480,98629,13423,330887,44130,68600,30939,97829,31012,345465,56747,94879,4939,160027,149761,99423,46099,32251,15332,8761,96094,128555,5763,235318,222223,55729,30241,55420,201746,3987,81382,8259,49325,23287,7719,24633,251100,92311,18591,110533,64759,170260,393860,7175,21144,132887,3593,75346,101277,91109,16387,259187,11627,57459,173829,44694,55780,49797,89192,120443,62622,3904,14814,23887,1027,112258,64955,99800,11132,66353,36202,48624,18158,88481,96882,43059,11040,2455,7077,21651,181159,99126,100434,61388,68186,19161,110468,120052,8819,55324,41494,7014,37689,3618,87729,92615,207943,9823,128657,12587,15857,6379,67628,51216,71775,157617,63244,1503,3864,218754,110864,5769,21492,7243,1192,87921,85529,31512,18537,42698,35350,73510,84474,34301,8991,21013,35034,566,38832,19838,35586,37216,39413,55006,12178,59742,856,84563,6900,25632,17437,49786,30723,13847,70845,4044,7843,23944,235976,55530,48942,6518,20939,73769,192653,52936,95207,23895,132542,142982,22632,87452,48042,54018,178468,10728,26230,23559,363,81269,142012,5718,346258,31456,84333,246476,51018,66692,101804,120570,39962,30373,70593,2864,60541,19425,54209,104092,7201,31545,48018,25865,15442,46257,40443,8328,6451,111782,47527,97754,33046,470,245116,31095,39,91934,87208,73470,36708,36521,12801,70624,36272,8892,79768,12427,55454,103756,5908,52390,62962,22720,141138,94634,41689,128402,126390,6628,106394,35527,134394,82727,254651,194502,148064,89549,3202,28359,957,21954,27906,49840,142747,8307,24206,48978,1186,71728,133038,71474,91306,6333,110959,74600,70387,18983,62609,56057,22970,1147,135850,1321,28834,3578,59715,102227,32827,81415,99952,55636,257598,390,22702,35701,85872,402916,39216,189795,14929,19467,10112,144422,61514,5279,63421,134686,41436,8424,51925,10598,132295,124416,4604,194739,210929,57866,31829,51626,50007,9976,91878,61906,56168,81906,60918,61859,40017,23059,16887,40927,62064,12785,32893,32913,21782,93965,20169,44387,79084,38463,11457,93950,27127,157050,2697,337088,5116,54128,48255,33279,8821,27352,25515,124022,65710,28906,38557,33390,1722,104435,72215,38551,12094,30978,25113,6671,37355,175109,42862,98024,65406,221276,59624,118012,64637,78760,86697,21426,1639,40350,12584,67193,84144,31396,7863,143011,69629,63112,9454,28666,65798,46372,134721,6314,51402,30837,151922,2847,38676,38008,92823,136245,17540,5504,109295,205242,37606,5211,214892,1586,20670,208711,137743,19328,40652,16995,20023,14657,154919,34422,12996,13918,38221,47690,16398,2959,37680,89122,6721,198469,91876,172043,83898,101992,26084,94570,3635,76958,22853,76497,38266,176590,168403,44464,142840,79180,184594,1984,41806,83147,11985,6546,366068,59732,24533,271505,8736,39084,222992,93429,28962,58985,86665,8432,30028,14548,32439,54424,165029,55175,27458,69046,121277,46168,33732,20661,24581,135574,123110,37556,79260,72611,16957,12939,46162,58238,44907,72936,253758,41324,32518,96480,11949,124438,65280,43256,34107,53533,43531,37037,28366,45970,32741,173438,6121,194202,62969,26355,30314,58370,28455,1848,50519,82830,90393,21761,295490,10936,256940,133568,44050,20269,4089,27457,21610,219460,36743,14821,101388,52005,13124,30979,140816,167362,26054,18458,60789,34917,40447,26606,33422,9066,3452,83614,5761,20263,137238,25038,91310,101,52322,74548,42572,38084,214054,186568,31802,17665,30620,141936,37730,14420,4265,187218,49640,188208,51441,55388,96452,66659,40869,42039,60967,221027,19234,178581,29105,96050,9165,196118,157335,3738,40354,117436,2965,34136,59659,15570,50843,230035,31444,71260,43886,18316,5387,38500,168508,17406,32174,8828,103373,143806,90367,3560,18719,122310,16508,26719,2541,105429,6645,37998,73190,10591,235916,49737,87112,233941,53188,32193,79154,4544,52905,126477,7580,63501,57314,3216,31337,6541,103083,60846,49,9756,15481,1355,43840,14319,13743,27486,10222,73114,230718,418644,16706,6674,279748,23058,45273,295831,86306,2743,5535,88773,21829,35253,120938,31153,3169,16839,42847,8751,80974,33942,36867,35514,16485,26474,77775,56877,5391,48346,3882,108713,31403,27804,55248,26235,43821,136104,40118,175507,28034,203908,18732,1788,34030,106427,36958,54359,7251,44936,15356,69139,455,157915,22173,140291,50348,43275,82066,49621,54952,15216,36226,96695,66855,6936,1987,8227,196087,4631,68827,99004,47541,110265,17953,147605,110242,58520,31312,38724,329975,642,3155,34497,75937,6207,73843,6120,17249,51429,117746,3218,910,68961,319671,14938,29555,34700,1649,66673,72268,9655,76800,153087,6941,210168,27130,35398,1780,73242,3135,56689,19556,165307,8765,35967,121458,13333,70453,17350,117253,22265,13340,44265,39869,441,3742,135025,23581,33309,16543,17731,13291,157637,283005,21408,101360,63887,52312,83873,5338,233779,23759,186949,34531,177320,38069,156465,91004,19353,59852,68160,14891,1338,1072,29823,1950,28901,81407,313445,73038,84807,162348,240257,37162,138934,16111,58013,41253,102951,16457,96056,19541,56402,67217,41638,94381,89674,29481,37456,80815,151579,13937,13683,132537,19699,134545,67020,29816,222341,141235,427578,48868,129557,233342,23077,87871,16213,18728,16184,9469,37913,19680,2798,171356,178328,13216,50049,72690,71904,124644,55455,7504,29052,41036,266546,19899,30391,188755,8659,59469,16,104298,112943,53865,76203,138226,68857,139953,14125,107625,119795,173133,4398,50273,48808,54390,16466,122086,31835,67035,50971,48859,7508,46427,66477,73021,84615,39985,83076,46779,201569,53336,36443,60865,168164,143810,51393,25548,169307,32896,24485,38424,21837,29087,275813,51674,6714,64883,46169,187369,55186,76192,12852,12018,62134,31067,118303,16542,12125,10579,4928,26291,43854,7091,10946,253716,109062,39283,17261,113012,258512,47764,125126,32646,55892,80279,201623,149872,3192,385,1208,48750,5376,58738,22335,5427,82416,47811,32435,143086,38930,94128,59975,156037,37977,38224,62485,7698,50405,71027,16462,21559,136153,34131,107506,162069,63703,3101,215029,40407,4178,3774,9187,80019,17880,97926,67579,2600,18405,8351,47924,86638,70820,92206,86453,29610,42241,119200,3198,15466,67813,57863,35454,4779,99518,4649,104641,144269,33730,38073,65864,6838,109456,193298,154007,5623,45741,30846,182578,25573,157224,1543,58575,138703,146140,44971,49356,18275,59064,20300,13122,11848,24453,11973,9797,86843,2919,25530,49210,1130,161220,76788,75373,85604,34926,36014,17777,17255,51533,11676,92226,51845,119859,21525,5936,18507,28050,1140,31418,14857,34207,47859,10750,36382,32079,106909,59426,87757,38393,110042,15965,97104,33757,35344,97993,53979,33651,45407,41884,82515,173089,7177,58371,35365,47543,51927,35587,10670,23544,29306,84233,39976,76076,62097,9007,8668,28119,78281,120790,19835,143020,54968,18670,64959,20649,34469,42570,33001,136570,87796,120044,1106,58700,63951,127623,12805,83057,40212,31773,49850,7361,54336,347524,101314,23751,19569,48791,29174,49369,20467,7465,75842,38281,623,112457,60210,28849,51003,94720,6426,90047,85560,43761,3579,85105,34607,90410,118528,7224,42907,111163,18168,6960,161135,191298,5247,100584,127552,171568,20121,91173,12636,54615,20199,63730,98105,2396,40387,14438,125012,4765,33235,12865,45299,37728,82098,77872,114037,59253,19675,24838,398016,102561,11446,17069,57508,178277,65836,99941,26114,2585,271882,136866,50126,11027,155648,118367,14585,8910,123015,335383,40434,41016,53021,14439,87098,176860,201543,121888,2358,9286,5739,22666,54270,37884,169381,33984,93859,16124,89364,72207,51639,76366,99029,65812,2198,12147,174891,194289,6986,30252,88822,21284,11445,288337,160821,33034,100869,43852,25761,52882,1144,103809,1924,84458,86079,43411,13542,139276,18141,34978,41298,7276,26481,173800,33210,17951,142652,33616,33677,2210,19941,98568,2486,192414,80136,12058,235883,50963,249638,29572,27221,47034,6124,72107,63346,97620,158513,299699,40388,23235,37176,224244,198386,121323,67992,23827,63170,17838,106622,158590,26807,5345,23489,91891,55474,74834,37981,13058,5977,72552,34706,26828,145172,19904,21367,34043,960,77092,91381,4733,47446,7680,41697,5170,16960,14741,46101,13656,473,51842,37433,11103,11551,121951,13191,97536,165932,50397,51628,129028,9069,44885,6590,59195,47045,32940,225472,90345,21833,13303,29407,96615,141951,5198,6028,18395,7181,3861,14966,156358,167182,36529,55253,25942,173153,30959,27261,50691,150176,162201,38467,48462,80602,42163,118482,168,108756,26011,17166,54149,456538,22512,91374,13816,90358,131615,18132,226707,1824,28139,26860,42253,93877,77351,65575,8980,80574,22020,27948,40422,91324,76376,13528,39281,91685,82215,122541,144066,1983,193851,17283,26320,2739,194978,4790,26845,42627,61300,65815,174612,55133,4200,191130,79771,158321,52280,166796,221620,62461,11278,4067,88152,83409,31717,121367,13522,47325,37945,10406,174348,249321,154101,64912,29938,51775,17220,15776,166138,78890,84425,54121,42861,16368,24572,291647,10197,32073,22651,11677,97509,26952,35787,18424,41910,71614,94977,72318,41594,70024,275419,37702,60199,7335,39107,61315,18271,18394,33768,87884,104277,123724,7277,56288,71981,189803,49320,3352,6798,14240,8954,69220,94433,57372,28620,68863,193727,85575,42309,41667,67689,42081,22543,44824,12719,28540,114236,101553,27638,27296,4300,5353,4663,19379,94098,3758,95888,95144,80344,87320,28447,259518,12718,71391,152731,37063,24132,31911,104896,15672,103782,1521,4945,72541,23717,122632,15619,87175,206120,29428,189780,61416,28350,44457,972,1175,47233,198738,95789,41907,21953,97034,59341,22864,53713,16873,32971,20693,20954,31336,21477,16169,38370,16412,9019,3841,24599,21938,17085,6484,81198,76413,5849,72514,12320,65247,276175,37234,59796,52642,16312,57349,198507,94148,46134,18958,125552,1747,18725,151873,14901,5490,68287,29470,3689,64794,40814,26018,25692,54450,2703,88278,124886,173087,174e3,24159,179477,24276,46004,201876,209202,445,52876,31948,30206,157610,39180,18439,44124,50469,5774,96278,222758,200216,50290,45486,20435,46986,46276,140133,142326,15569,13363,47522,92583,2182,7135,16853,22998,30272,4952,63263,35623,39096,53789,44864,20053,110392,124213,4630,16087,28221,127787,25839,77481,44693,13464,113146,6983,27069,55717,50102,4760,7107,26186,66507,59145,36032,104182,71328,29425,64317,50781,47465,94298,69706,74899,22754,120756,25108,93077,56834,73286,39928,16218,41699,176763,7555,70819,50083,26895,23315,26014,16773,123079,41712,5719,31516,90427,158540,85051,183128,40864,27505,55392,9058,45224,96857,30901,136622,96557,56304,120061,11501,151448,5773,89743,7769,86069,2935,18471,41628,10114,33660,110170,49479,26745,92846,33221,26731,18795,87076,8550,2100,29972,120289,3077,72490,33784,2630,208722,50861,63483,79029,6419,39467,14302,45286,64207,9686,67513,44170,1050,77246,59266,17055,53801,7150,11111,42432,4278,94579,362117,36175,42902,41933,39002,98489,22913,74161,84773,57036,17556,162288,74485,178760,93867,73635,128860,50362,261,67455,80001,46080,35662,4368,25247,19230,74393,22588,1822,27682,235324,13798,85998,13194,235067,23514,71669,147632,23191,134748,214683,105101,1518,25489,247114,7380,54842,26922,3971,26361,20844,68642,170517,77339,123255,8963,77818,150998,48466,36806,2732,23261,11741,236162,18243,126216,28690,50546,16385,92760,197383,246558,201295,88255,67588,71687,176076,172653,169058,33906,63747,24835,157621,43338,30050,46152,132741,2770,51371,94835,6614,15112,11749,56936,1250,19027,399017,58036,100215,23388,55815,308768,124152,94803,9521,64186,8971,28,30427,62163,7616,103838,35079,29203,131235,7743,17389,10882,37420,61460,228512,85363,41581,131077,62822,119647,10130,54445,26925,19968,29016,24446,74028,24176,61448,67185,9254,8563,119129,9771,99184,37716,39514,10532,221512,258753,218630,55980,23394,32141,61924,66749,32411,3741,36475,26678,77010,44946,91203,128749,116953,20476,49625,53116,13735,102335,29376,51946,83407,67892,59212,34685,21083,1546,112982,32972,74397,1078,190545,16082,86140,58591,89611,101531,10061,105104,76319,20035,17551,52611,169061,190842,100780,23907,90413,115619,9675,34710,193435,49443,129734,11183,258877,16318,136182,126808,44635,27304,192375,2599,125648,47051,12091,23814,721,58800,40137,66726,97930,60877,74487,7942,54326,9841,41428,13762,8211,85383,6950,99177,79806,201786,296464,124087,13144,29741,41721,47634,55088,254286,106408,17041,99064,12942,64086,45233,14005,2612,55827,255,7984,13980,38574,12776,46654,73499,249951,2101,26676,25996,132326,116415,119062,50449,31033,23038,11589,179252,20007,14860,129270,21143,17796,144715,60106,70758,69842,34674,282133,44014,16774,57268,38528,24053,46373,201667,28327,471023,51889,102667,21193,114909,84132,69317,96723,67969,16134,68145,15058,28765,32035,2524,101089,98664,25045,76571,14957,86040,118506,262428,154764,81573,39681,283900,73287,127825,544,80448,52347,38512,175971,15180,45467,33086,46552,48894,81107,43213,36672,54025,76703,8053,7608,13299,56619,20752,238099,54164,105133,1444,32942,953,37564,8e3,66316,119463,106817,404,13667,149108,128597,31267,10269,49836,106150,1484,52330,76965,160486,171648,38456,31263,22424,37738,66245,67467,143369,60471,75610,20895,115528,86070,60854,40796,49347,18989,15030,11371,37578,15779,79867,10187,86462,46402,155626,93200,40229,7090,57547,108053,99598,11088,47505,41218,206017,2173,20988,30219,22919,80563,57566,42369,93141,41675,2407,182519,120495,27154,16702,29456,14349,7958,16688,117177,140375,42467,261919,74916,153569,10836,34742,49526,7621,105997,12212,2270,392377,7755,17959,25086,232152,138791,33847,13860,35316,5811,1344,71259,50452,207539,92635,50359,5821,33674,30255,2086,2587,96264,17543,42,6029,9580,43007,139248,82831,12917,29607,25786,51467,42137,85161,100698,31561,88989,121990,278500,3602,109344,37982,15279,116442,28936,30880,87894,58079,128661,126731,67392,28051,146885,4861,16216,97344,42827,147561,153948,22684,21335,47685,1853,43349,15185,59642,10229,25520,187921,108972,5579,98037,24945,6697,19193,63734,137934,75056,89740,19767,224268,56138,63643,151661,39313,70618,84031,89723,84074,13703,85626,35460,8867,64845,3439,57906,99776,63968,49270,81130,34356,16210,23547,36446,34090,140028,72439,2221,22163,57058,363492,113754,18913,95451,48663,54464,54037,176097,68425,3023,34906,29482,117389,341780,80431,58330,16753,92616,60907,94846,147486,4498,48646,7773,46801,7778,18946,464978,47558,33223,177444,7328,15626,63337,94700,11743,9351,255024,39098,16447,42647,96230,39769,58840,10068,63439,35800,65843,58823,413844,9156,51258,7434,61791,85018,6872,3692,28096,7121,33024,6009,75532,31997,192535,9661,3304,9547,14753,31987,25314,55689,15896,20430,39472,31340,99744,25398,115569,54883,28719,205423,23071,57855,64638,149867,25671,82403,37616,20668,39989,77996,74948,140555,175248,64810,36515,46595,4958,248773,24045,28728,136673,168704,20804,114833,100325,27135,21205,96151,153134,45992,7093,13992,76047,1980,19432,145001,75159,87462,17710,1013,45556,34297,144882,20648,26061,11319,129567,108555,18872,464580,33386,22717,65948,167189,5603,135042,79542,8801,202632,18114,91882,5973,5239,67315,4431,60916,47819,71693,32597,32606,18183,45072,80329,76385,24749,51305,40314,156514,14693,130345,13168,66214,18029,12858,34801,27628,14544,10823,40522,40185,33739,148694,23548,9923,61012,28859,17933,19442,34364,99849,164107,141167,30629,21054,6744,36491,8096,42474,41706,155060,30650,10600,163442,1143,96655,61390,52359,7559,51568,64256,203854,4467,22453,14504,436398,7878,6980,8293,63610,293747,16167,35763,19627,147603,15419,18032,110744,51346,33681,54571,40472,48615,39073,21604,13754,173027,92560,11083,47299,63062,11813,52007,29883,9734,139722,15953,1550,20651,13616,49306,16113,90089,92326,7584,30712,72424,164858,6831,152871,55746,197721,34167,196442,6022,112107,55215,7538,123381,4920,43539,77165,8939,50392,34192,20225,79762,22505,58667,40770,29788,97180,82835,4568,8579,13273,363569,35898,49983,436,36598,3237,131691,62418,35591,8101,4073,379438,65218,76072,33887,2968,27573,212619,288680,68278,72851,150504,217896,6913,121339,22017,35340,51072,43616,75043,31437,10833,81487,4364,22968,41454,106687,85446,19863,109625,149241,524,141850,214404,54376,657,237023,9401,108137,53800,32474,49712,53334,126876,27337,45552,177696,8269,15036,12097,42240,2328,125374,119295,99715,2500,19624,39441,27220,102691,60957,94543,39101,18566,67362,13975,78230,25017,34017,239007,90027,39351,41681,35354,43822,1043,916,58587,141983,94818,38799,75459,41114,67432,16195,36606,59568,22272,126769,31424,68659,12287,134302,257977,5756,207285,95637,47248,117689,19583,77451,22373,12200,54993,117118,34244,29386,34562,53819,71267,64172,77665,49368,7716,59301,25749,45426,194789,17297,2650,1766,32501,45198,20403,20984,6600,14171,94604,19037,5402,29896,9938,59935,109708,88081,145182,44844,39167,352626,164173,35374,45982,6122,154,73419,220487,53834,53601,17992,8609,229321,5610,68098,66815,71012,95069,140968,27396,8957,134489,24656,86659,56598,134852,17316,123838,255436,6613,41610,138033,81452,32023,32396,123687,63398,8693,29712,30407,19296,121188,3551,36099,20032,111948,56624,16547,27453,35916,15378,52039,56849,13489,22214,73177,53097,277349,2157,14029,187886,10260,141743,246460,91880,50869,3788,49486,133566,54950,33120,129337,53768,18333,9525,26902,312251,10297,9020,70759,16647,112432,59260,84609,9818,82766,73569,468,46001,75780,55028,52106,11498,43645,108069,17150,17753,29417,16705,31799,9606,289,122254,115975,8620,6133,255357,56908,14456,133464,43554,79224,11247,29630,160,12756,25464,65960,350428,62521,321796,100359,67358,35169,46172,113128,48988,88868,31094,33266,6847,60887,98188,49659,69117,92977,220228,13947,80181,35103,62170,97351,13475,2440,199768,19498,36597,46971,25234,67806,62881,84717,73648,181966,10488,94149,21550,26655,63436,48375,14405,165650,9621,24439,28043,42735,4490,29963,56674,45373,1934,262446,50855,67098,26898,5261,52696,40644,33900,9440,180286,87162,22940,19704,26936,69769,10254,101759,27406,12243,48e3,73926,113215,54935,5726,192787,4312,106216,9366,11550,52949,23457,212271,277152,133895,108374,6191,96477,29980,218916,58024,54696,40853,91124,65894,91170,65908,252552,6793,29212,15389,44516,122515,52617,35058,9017,103536,39510,49136,19242,130652,662077,74699,47024,31422,8517,73351,24399,13867,128360,4810,4434,61779,111983,61036,17798,110240,59722,102960,39688,10001,23803,23039,176498,56659,44814,134295,17188,77577,74466,226175,102472,154333,63900,111747,18062,41171,79669,32773,408933,42562,28931,30907,107388,43487,2946,240310,23938,24354,319,184983,7927,6488,1422,10790,68809,68209,64775,4361,202,17123,59634,51200,44391,18188,17843,2619,74278,3230,9540,47187,21702,36274,56894,43907,16310,34790,16866,6150,5561,13587,107545,108873,126867,86986,28640,33427,19017,5762,80637,17430,46903,2047,131055,25958,13558,5444,47152,13900,44563,122857,45348,70863,39593,54332,38068,33637,318,40310,143467,18502,24520,11377,62013,28942,27246,28269,83545,17999,59015,90707,30065,15161,34720,1263,37008,2012,6060,98575,92933,5721,299,199555,24578,29223,2985,743,115825,109523,136657,47454,26378,53586,3733,174945,93340,244456,5693,37386,28782,89767,27545,23573,18798,136425,34320,84778,20041,48453,38215,7477,71958,40621,8773,5874,187927,105965,51100,43533,18083,8443,10180,43597,2003,183999,69689,12216,129696,146188,62389,34044,68410,12765,43273,26949,266807,3345,34477,79197,5688,47539,213110,21634,22257,50092,32222,42346,39530,63668,98,134978,74022,5152,59088,174145,37220,9934,9545,118937,5724,87240,19875,15784,40143,23263,87513,181654,285152,37881,263241,4966,43934,10433,186657,6470,74416,225854,25908,142677,246262,32280,6192,75890,45546,143264,135305,29742,47013,77787,11732,126658,8763,37950,21806,57557,113464,89465,108995,164574,23894,22996,23169,15369,23117,17642,130607,40503,36239,280990,44666,9981,40427,147487,26869,168452,32886,32991,46798,240839,15111,70502,65697,88548,44145,28701,48767,31139,206777,35659,181164,166262,14554,171445,31786,66523,76607,17956,6507,31279,90476,116611,167918,6560,1243,115324,80128,41867,55897,187323,37069,32596,189444,145931,13390,105530,65709,26805,6999,55714,41300,22915,68951,22138,21120,22264,10058,19945,33635,56123,99085,10032,5818,6016,46649,57476,35264,94413,112522,262288,93686,83038,14341,23204,28807,66084,77987,6101,126673,7133,38126,5923,122091,170240,97772,46874,215746,43948,41622,3272,55596,8332,146411,251315,13533,8561,81521,115449,48616,175175,2063,186556,3036,134537,75772,29728,82360,22973,186559,86348,89100,38388,82297,45610,2613,87082,9986,177812,57884,23591,47485,42543,33582,44713,74439,257444,252451,31825,35631,38540,33066,5147,13973,4343,51830,70378,22827,26448,95560,36896,241741,48067,203953,298860,61620,20450,3220,67272,6586,107662,100160,108684,6929,57226,4762,7457,1320,40404,77204,99309,62750,208653,59977,44e3,74315,34332,5819,172217,64904,114077,18147,84012,1791,98456,90930,21446,116669,103938,7422,85140,59713,5768,326211,16239,75411,13229,29398,10758,236107,1539,112472,95979,152154,151294,306,21196,38146,10700,6891,84282,109646,56492,40539,6589,119491,51354,30685,140209,136906,29622,73617,49553,70525,51671,166869,139616,74395,37439,49595,45678,11959,33211,86560,52434,9282,62690,112155,130810,5243,108261,99970,265613,72551,80049,6391,33365,90721,66737,69872,87011,1860,9032,112544,60905,37371,89015,140351,19076,850,373531,2802,36725,218795,72062,28990,16550,24614,7815,6187,26336,33373,32162,42791,73555,32062,23386,10244,56392,49442,27076,136262,12412,14883,1134,33675,97153,199281,15608,100152,74072,47942,254301,36451,16026,10687,65067,56708,254030,30290,50490,13864,57941,259331,35588,23485,43486,24869,21620,92971,22072,88645,1048,182050,13343,32452,14825,19509,3325,216938,45740,99716,189082,53740,78245,25609,24311,176777,47340,308354,40669,66085,14102,125339,9225,128709,97207,1271,200933,78439,113451,88975,18324,46521,11819,18570,141756,72512,170020,52754,63550,118515,103073,93330,32736,50499,14722,31600,68452,398867,29316,172786,18417,104924,2606,5670,84818,16288,67106,59580,82929,607401,291,85829,359,15897,35830,50696,65630,52672,22115,356968,29895,40837,231192,34024,38957,26722,406,23335,124952,72068,68804,13268,147101,164740,276569,162596,66943,11569,26654,66358,4777,23229,102127,5848,978,2921,59666,5371,28212,90108,42938,39320,2499,4271,108792,33510,125072,71653,65239,38250,66357,38577,13964,86251,35708,50755,36010,29448,12209,3844,38222,206337,100876,67827,137088,14167,252225,84163,195270,1306,5703,54198,779,46802,22028,51124,86759,70560,113164,35685,162145,45471,34561,422,2611,6464,47486,19223,38246,9191,18331,89942,243642,212364,15893,17518,22617,6409,30046,126182,59716,36560,104428,18846,26592,19458,50793,147333,30826,1388,27647,10922,14495,33545,19269,135828,39727,41601,46931,233379,49169,131130,182112,16276,82381,118209,142445,128310,19672,28740,82907,33436,3118,102206,28723,24819,41937,38854,5157,3881,111491,1142,9776,421673,152241,29309,14961,87854,6054,15424,3796,82656,54996,2108,55367,239450,154525,9643,118103,106041,64601,68549,48707,30266,25772,18740,9462,229669,91798,112152,191327,14493,72828,8175,66636,236474,25817,87351,129027,76653,20422,22983,71240,27846,44661,12399,46158,77704,53101,35032,11072,17300,109294,33638,24408,1895,11241,760,17584,82479,125877,63150,141075,34259,23274,81698,15732,43577,48340,91584,14688,16379,24481,150280,96420,262050,48635,43727,61819,56268,72003,88178,17281,79912,13218,122519,125295,166396,11811,2171,118930,67746,17636,178278,174656,95661,173039,83845,79689,17473,98555,127696,203415,54730,22925,232239,9309,12136,175026,20740,180188,10747,39816,314017,266131,10040,175732,112550,220651,31974,37393,888,23008,86799,4303,64905,148467,75337,251,3284,370102,50264,9835,5438,23655,4481,29851,329,12855,7162,64931,78141,12804,42372,296771,83547,18624,34874,86271,3360,48665,77735,88767,11463,63527,28889,22258,29140,194315,113924,25499,6406,31334,1845,4802,49184,43455,35469,127594,92970,61038,115005,38840,87761,106838,8811,20572,55637,11162,96721,132425,108925,2948,125457,36356,3502,75270,27622,127192,2561,123095,49394,61155,16897,110064,9699,89448,53356,19628,220310,21622,83036,9885,112214,6087,26713,17901,161912,91492,3440,68594,9266,92238,8087,6866,150194,72175,80701,13459,31836,43243,239700,95846,44749,50647,21945,230538,120612,132371,244604,5193,105637,34661,41341,68775,85393,1874,8771,33718,49672,77403,595452,99507,6490,58895,128742,7704,39239,73217,43816,62824,37804,199976,22361,80005,87514,94832,14089,4574,139975,59142,75523,100268,43906,53442,15152,2547,186002,17011,19513,204282,3343,60568,128318,119250,4298,51871,41336,71759,21921,45074,98169,145889,99427,11350,1237,5520,28799,7803,53702,21026,136352,38293,128690,12158,90132,44600,10184,26957,39459,126025,78904,82999,59373,39301,150198,120529,153042,20177,50089,14764,271571,30530,123161,38975,101562,22941,5648,124654,109243,69817,71675,49162,106884,21241,107795,30258,16572,188262,141456,7688,60718,8271,11044,32440,104608,103419,236109,93156,43293,128929,42107,67180,25201,115254,185488,130954,72813,167547,20537,39969,38432,22582,184022,1139,27199,5655,17767,97412,122606,209377,27070,35871,326617,188954,42680,73512,80911,22629,3011,95021,315242,157737,383,41821,41808,19335,27950,15674,25677,110950,35375,76835,59108,57370,35262,16569,160415,37706,78086,32041,49691,137143,9782,172080,50148,77917,6323,10110,69172,17711,21795,59511,76184,135114,31046,132319,59105,157578,20549,80778,57649,158421,65143,4575,72235,21899,10797,92745,34035,106079,80159,4508,78304,25350,75457,46458,32937,25623,47,8531,104751,84953,8138,36508,187199,66310,115274,13253,32461,38536,1916,42007,187160,35055,26325,84394,35963,94216,45590,97782],Kw=15;class fmt{log;peerRouting;routingTable;refreshInterval;refreshQueryTimeout;commonPrefixLengthRefreshedAt;refreshTimeoutId;constructor(e,r){const{peerRouting:n,routingTable:i,refreshInterval:s,refreshQueryTimeout:a,logPrefix:o}=r;this.log=e.logger.forComponent(`${o}:routing-table:refresh`),this.peerRouting=n,this.routingTable=i,this.refreshInterval=s??npt,this.refreshQueryTimeout=a??ipt,this.commonPrefixLengthRefreshedAt=[],this.refreshTable=this.refreshTable.bind(this)}async afterStart(){this.log(`refreshing routing table every ${this.refreshInterval}ms`),this.refreshTable(!0)}async stop(){this.refreshTimeoutId!=null&&clearTimeout(this.refreshTimeoutId)}refreshTable(e=!1){this.log("refreshing routing table");const r=this._maxCommonPrefix(),n=this._getTrackedCommonPrefixLengthsForRefresh(r);this.log(`max common prefix length ${r}`),this.log(`tracked CPLs [ ${n.map(i=>i.toISOString()).join(", ")} ]`),Promise.all(n.map(async(i,s)=>{try{if(await this._refreshCommonPrefixLength(s,i,e),this._numPeersForCpl(r)===0){const a=Math.min(2*(s+1),n.length-1);for(let o=s+1;o<a+1;o++)try{await this._refreshCommonPrefixLength(o,i,e)}catch(c){this.log.error(c)}}}catch(a){this.log.error(a)}})).catch(i=>{this.log.error(i)}).then(()=>{this.refreshTimeoutId=setTimeout(this.refreshTable,this.refreshInterval),this.refreshTimeoutId.unref!=null&&this.refreshTimeoutId.unref()}).catch(i=>{this.log.error(i)})}async _refreshCommonPrefixLength(e,r,n){if(!n&&r.getTime()>Date.now()-this.refreshInterval){this.log("not running refresh for cpl %s as time since last refresh not above interval",e);return}const i=await this._generateRandomPeerId(e);this.log("starting refreshing cpl %s with key %p (routing table size was %s)",e,i,this.routingTable.size);const s=AbortSignal.timeout(this.refreshQueryTimeout),a=await C0e(this.peerRouting.getClosestPeers(i.toMultihash().bytes,{signal:s}));this.log(`found ${a} peers that were close to imaginary peer %p`,i),this.log("finished refreshing cpl %s with key %p (routing table size is now %s)",e,i,this.routingTable.size)}_getTrackedCommonPrefixLengthsForRefresh(e){e>Kw&&(e=Kw);const r=[];for(let n=0;n<=e;n++)r[n]=this.commonPrefixLengthRefreshedAt[n]??new Date;return r}async _generateRandomPeerId(e){if(this.routingTable.kb==null)throw new Error("Routing table not started");if(this.routingTable.kb.localPeer==null)throw new Error("Local peer not set");const r=Yf(2),n=(r[1]<<8)+r[0],i=await this._makePeerId(this.routingTable.kb.localPeer.kadId,n,e),s=Zn(i);return Aa(s)}async _makePeerId(e,r,n){if(n>Kw)throw new Error(`Cannot generate peer ID for common prefix length greater than ${Kw}`);const a=new DataView(e.buffer,e.byteOffset,e.byteLength).getUint16(0,!1)^32768>>n,o=65535<<16-(n+1),c=a&o|r&~o,u=umt[c],l=new ArrayBuffer(34),f=new DataView(l,0,l.byteLength);return f.setUint8(0,ci.code),f.setUint8(1,32),f.setUint32(2,u,!1),new Uint8Array(f.buffer,f.byteOffset,f.byteLength)}_maxCommonPrefix(){let e=0;for(const r of this._prefixLengths())r>e&&(e=r);return e}_numPeersForCpl(e){let r=0;for(const n of this._prefixLengths())n===e&&r++;return r}*_prefixLengths(){if(this.routingTable.kb?.localPeer!=null)for(const{kadId:e}of this.routingTable.kb.toIterable()){const r=rd(this.routingTable.kb.localPeer.kadId,e);let n=0;for(const i of r)if(i===0)n++;else break;yield n}}}class dmt{peerId;providers;peerStore;log;constructor(e,r){this.log=e.logger.forComponent(`${r.logPrefix}:rpc:handlers:add-provider`),this.peerId=e.peerId,this.providers=r.providers,this.peerStore=e.peerStore}async handle(e,r){if(r.key==null||r.key.length===0)throw new On("Missing key");let n;try{n=mt.decode(r.key)}catch{throw new On("Invalid CID")}(r.providers==null||r.providers.length===0)&&this.log.error("no providers found in message"),this.log("%p asked us, %p to store provider record for for %c",e,this.peerId,n),await Promise.all(r.providers.map(async i=>{const s=Zn(i.id),a=Aa(s),o=i.multiaddrs.map(c=>Mt(c));if(!e.equals(a)){this.log("invalid provider peer %p from %p",i.id,e);return}if(i.multiaddrs.length<1){this.log("no valid addresses for provider %p. Ignore",e);return}this.log.trace("received provider %p for %s (addrs %s)",e,n,o),await this.providers.addProvider(n,a),await this.peerStore.merge(a,{multiaddrs:o})}))}}class hmt{peerRouting;peerInfoMapper;peerId;addressManager;log;constructor(e,r){const{peerRouting:n,logPrefix:i}=r;this.log=e.logger.forComponent(`${i}:rpc:handlers:find-node`),this.peerId=e.peerId,this.addressManager=e.addressManager,this.peerRouting=n,this.peerInfoMapper=r.peerInfoMapper}async handle(e,r){if(this.log("incoming request from %p for peers closer to %b",e,r.key),r.key==null)throw new On("Invalid FIND_NODE message received - key was missing");const n=await this.peerRouting.getCloserPeersOffline(r.key,e);Tr(this.peerId.toMultihash().bytes,r.key)&&n.push({id:this.peerId,multiaddrs:this.addressManager.getAddresses().map(s=>s.decapsulateCode(Xt("p2p").code))});const i={type:Tn.FIND_NODE,clusterLevel:r.clusterLevel,closer:n.map(this.peerInfoMapper).filter(({multiaddrs:s})=>s.length).map(s=>({id:s.id.toMultihash().bytes,multiaddrs:s.multiaddrs.map(a=>a.bytes)})),providers:[]};return i.closer.length===0&&this.log("could not find any peers closer to %b than %p",r.key,e),i}}class pmt{peerId;peerRouting;providers;peerStore;peerInfoMapper;log;constructor(e,r){const{peerRouting:n,providers:i,logPrefix:s}=r;this.log=e.logger.forComponent(`${s}:rpc:handlers:get-providers`),this.peerId=e.peerId,this.peerStore=e.peerStore,this.peerRouting=n,this.providers=i,this.peerInfoMapper=r.peerInfoMapper}async handle(e,r){if(r.key==null)throw new On("Invalid GET_PROVIDERS message received - key was missing");let n;try{n=mt.decode(r.key)}catch{throw new On("Invalid CID")}this.log("%p asking for providers for %s",e,n);const[i,s]=await Promise.all([zv(Vu(await this.providers.getProviders(n),async o=>{const c=await this.peerStore.get(o);return{id:c.id,multiaddrs:c.addresses.map(({multiaddr:l})=>l)}})),this.peerRouting.getCloserPeersOffline(r.key,this.peerId)]),a={type:Tn.GET_PROVIDERS,key:r.key,clusterLevel:r.clusterLevel,closer:s.map(this.peerInfoMapper).filter(({id:o,multiaddrs:c})=>c.length>0).map(o=>({id:o.id.toMultihash().bytes,multiaddrs:o.multiaddrs.map(c=>c.bytes)})),providers:i.map(this.peerInfoMapper).filter(({id:o,multiaddrs:c})=>c.length>0).map(o=>({id:o.id.toMultihash().bytes,multiaddrs:o.multiaddrs.map(c=>c.bytes)}))};return this.log("got %s providers %s closerPeers",a.providers.length,a.closer.length),a}async _getAddresses(e){return[]}}class mmt{peerStore;datastore;peerRouting;log;datastorePrefix;constructor(e,r){this.log=e.logger.forComponent(`${r.logPrefix}:rpc:handlers:get-value`),this.datastorePrefix=`${r.datastorePrefix}/record`,this.peerStore=e.peerStore,this.datastore=e.datastore,this.peerRouting=r.peerRouting}async handle(e,r){const n=r.key;if(this.log("%p asked for key %b",e,n),n==null||n.length===0)throw new On("Invalid key");const i={type:Tn.GET_VALUE,key:n,clusterLevel:r.clusterLevel,closer:[],providers:[]};if(bpt(n)){this.log("is public key");const o=wpt(n);let c;try{const u=await this.peerStore.get(o);if(u.id.publicKey==null)throw new Bs("No public key found in key book");c=Ya(u.id.publicKey)}catch(u){if(u.name!=="NotFoundError")throw u}if(c!=null)return this.log("returning found public key"),i.record=new Ao(n,c,new Date).serialize(),i}const[s,a]=await Promise.all([this._checkLocalDatastore(n),this.peerRouting.getCloserPeersOffline(n,e)]);return s!=null&&(this.log("had record for %b in local datastore",n),i.record=s.serialize()),a.length>0&&(this.log("had %s closer peers in routing table",a.length),i.closer=a.map(o=>({id:o.id.toMultihash().bytes,multiaddrs:o.multiaddrs.map(c=>c.bytes)}))),i}async _checkLocalDatastore(e){this.log("checkLocalDatastore looking for %b",e);const r=Gg(this.datastorePrefix,e);let n;try{n=await this.datastore.get(r)}catch(s){if(s.name==="NotFoundError")return;throw s}const i=Ao.deserialize(n);if(i.timeReceived==null||Date.now()-i.timeReceived.getTime()>G1t){await this.datastore.delete(r);return}return i}}class gmt{log;constructor(e,r){this.log=e.logger.forComponent(`${r.logPrefix}:rpc:handlers:ping`)}async handle(e,r){return this.log("ping from %p",e),r}}class vmt{components;validators;log;datastorePrefix;constructor(e,r){const{validators:n}=r;this.components=e,this.log=e.logger.forComponent(`${r.logPrefix}:rpc:handlers:put-value`),this.datastorePrefix=`${r.datastorePrefix}/record`,this.validators=n}async handle(e,r){const n=r.key;if(this.log("%p asked us to store value for key %b",e,n),r.record==null){const i=`Empty record from: ${e.toString()}`;throw this.log.error(i),new On(i)}try{const i=Ao.deserialize(r.record);await MM(this.validators,i),i.timeReceived=new Date;const s=Gg(this.datastorePrefix,i.key);await this.components.datastore.put(s,i.serialize().subarray()),this.log("put record for %b into datastore under key %k",n,s)}catch(i){this.log("did not put record for key %b into datastore %o",n,i)}return r}}let ymt=class{handlers;routingTable;log;metrics;constructor(e,r){this.metrics={operations:e.metrics?.registerCounterGroup(`${r.metricsPrefix}_inbound_rpc_requests_total`),errors:e.metrics?.registerCounterGroup(`${r.metricsPrefix}_inbound_rpc_errors_total`)},this.log=e.logger.forComponent(`${r.logPrefix}:rpc`),this.routingTable=r.routingTable,this.handlers={[Tn.GET_VALUE.toString()]:new mmt(e,r),[Tn.PUT_VALUE.toString()]:new vmt(e,r),[Tn.FIND_NODE.toString()]:new hmt(e,r),[Tn.ADD_PROVIDER.toString()]:new dmt(e,r),[Tn.GET_PROVIDERS.toString()]:new pmt(e,r),[Tn.PING.toString()]:new gmt(e,r)}}async handleMessage(e,r){const n=this.handlers[r.type];if(n==null){this.log.error(`no handler found for message type: ${r.type}`);return}try{return this.metrics.operations?.increment({[r.type]:!0}),await n.handle(e,r)}catch{this.metrics.errors?.increment({[r.type]:!0})}}onIncomingStream(e){let r="unknown";Promise.resolve().then(async()=>{const{stream:n,connection:i}=e,s=i.remotePeer,a=this;await Un(n,o=>Sp(o),async function*(o){for await(const c of o){const u=Sh.decode(c);r=u.type,a.log("incoming %s from %p",u.type,s);const l=await a.handleMessage(s,u);l!=null&&(yield Sh.encode(l))}},o=>xp(o),n)}).catch(n=>{this.log.error("error handling %s RPC message from %p - %e",r,e.connection.remotePeer,n)})}};class bmt extends oi{log;components;protocol;running;registrarId;constructor(e,r){super();const{protocol:n,logPrefix:i}=r;this.components=e,this.log=e.logger.forComponent(`${i}:topology-listener`),this.running=!1,this.protocol=n}isStarted(){return this.running}async start(){this.running||(this.running=!0,this.registrarId=await this.components.registrar.register(this.protocol,{onConnect:e=>{this.log("observed peer %p with protocol %s",e,this.protocol),this.dispatchEvent(new CustomEvent("peer",{detail:e}))}}))}async stop(){this.running=!1,this.registrarId!=null&&(this.components.registrar.unregister(this.registrarId),this.registrarId=void 0)}}class wmt{dht;constructor(e){this.dht=e}async provide(e,r={}){await vc(this.dht.provide(e,r))}async cancelReprovide(e){await this.dht.cancelReprovide(e)}async*findProviders(e,r={}){for await(const n of this.dht.findProviders(e,r))n.name==="PROVIDER"&&(yield*n.providers)}async put(e,r,n){await vc(this.dht.put(e,r,n))}async get(e,r){for await(const n of this.dht.get(e,r))if(n.name==="VALUE")return n.value;throw new Bs("Could not find value for key")}}class _mt{dht;constructor(e){this.dht=e}async findPeer(e,r={}){for await(const n of this.dht.findPeer(e,r))if(n.name==="FINAL_PEER")return n.peer;throw new Bs("Peer not found")}async*getClosestPeers(e,r={}){for await(const n of this.dht.getClosestPeers(e,r))n.name==="FINAL_PEER"&&(yield n.peer)}}const xmt=32,Smt=64;class Emt extends oi{protocol;routingTable;providers;network;peerRouting;components;log;running;kBucketSize;clientMode;validators;selectors;queryManager;contentFetching;contentRouting;routingTableRefresh;rpc;topologyListener;querySelf;maxInboundStreams;maxOutboundStreams;dhtContentRouting;dhtPeerRouting;peerInfoMapper;reprovider;constructor(e,r={}){super();const n=r.logPrefix??"libp2p:kad-dht",i=r.datastorePrefix??"/dht",s=r.metricsPrefix??"libp2p_kad_dht",a={queries:e.metrics?.registerMetricGroup(`${s}_operations_total`,{label:"operation"}),errors:e.metrics?.registerCounterGroup(`${s}_operation_errors_total`,{label:"operation"}),queryTime:e.metrics?.registerMetricGroup(`${s}_operation_time_seconds`,{label:"operation"}),errorTime:e.metrics?.registerMetricGroup(`${s}_operation_error_time_seconds`,{label:"operation"})};this.running=!1,this.components=e,this.log=e.logger.forComponent(n),this.protocol=r.protocol??K1t,this.kBucketSize=r.kBucketSize??20,this.clientMode=r.clientMode??!0,this.maxInboundStreams=r.maxInboundStreams??xmt,this.maxOutboundStreams=r.maxOutboundStreams??Smt,this.peerInfoMapper=r.peerInfoMapper??vpt;const o=SM();this.providers=new Npt(e,{...r.providers,logPrefix:n,datastorePrefix:i,lock:o}),this.validators={...mpt,...r.validators},this.selectors={...hpt,...r.selectors},this.network=new Dpt(e,{protocol:this.protocol,logPrefix:n,metricsPrefix:s}),this.routingTable=new lmt(e,{kBucketSize:r.kBucketSize,pingOldContactTimeout:r.pingOldContactTimeout,pingOldContactConcurrency:r.pingOldContactConcurrency,pingOldContactMaxQueueSize:r.pingOldContactMaxQueueSize,pingNewContactTimeout:r.pingNewContactTimeout,pingNewContactConcurrency:r.pingNewContactConcurrency,pingNewContactMaxQueueSize:r.pingNewContactMaxQueueSize,protocol:this.protocol,logPrefix:n,metricsPrefix:s,prefixLength:r.prefixLength,splitThreshold:r.kBucketSplitThreshold,network:this.network});const c=sr();r.allowQueryWithZeroPeers===!0&&c.resolve(),this.queryManager=new Lpt(e,{disjointPaths:Math.ceil(this.kBucketSize/2),logPrefix:n,metricsPrefix:s,initialQuerySelfHasRun:c,routingTable:this.routingTable}),this.peerRouting=new Mpt(e,{routingTable:this.routingTable,network:this.network,validators:this.validators,queryManager:this.queryManager,logPrefix:n}),this.contentFetching=new Cpt(e,{validators:this.validators,selectors:this.selectors,peerRouting:this.peerRouting,queryManager:this.queryManager,network:this.network,logPrefix:n,datastorePrefix:i}),this.contentRouting=new Ppt(e,{network:this.network,peerRouting:this.peerRouting,queryManager:this.queryManager,routingTable:this.routingTable,providers:this.providers,logPrefix:n}),this.routingTableRefresh=new fmt(e,{peerRouting:this.peerRouting,routingTable:this.routingTable,logPrefix:n}),this.rpc=new ymt(e,{routingTable:this.routingTable,providers:this.providers,peerRouting:this.peerRouting,validators:this.validators,logPrefix:n,metricsPrefix:s,datastorePrefix:i,peerInfoMapper:this.peerInfoMapper}),this.topologyListener=new bmt(e,{protocol:this.protocol,logPrefix:n}),this.querySelf=new qpt(e,{peerRouting:this.peerRouting,interval:r.querySelfInterval,initialInterval:r.initialQuerySelfInterval,logPrefix:n,initialQuerySelfHasRun:c,routingTable:this.routingTable,operationMetrics:a}),this.reprovider=new zpt(e,{...r.reprovide,logPrefix:n,metricsPrefix:s,datastorePrefix:i,contentRouting:this.contentRouting,lock:o,operationMetrics:a}),this.network.addEventListener("peer",u=>{const l=u.detail;this.onPeerConnect(l).catch(f=>{this.log.error("could not add %p to routing table",l.id,f)}),this.dispatchEvent(new CustomEvent("peer",{detail:l}))}),this.topologyListener.addEventListener("peer",u=>{const l=u.detail;Promise.resolve().then(async()=>{const f=await this.components.peerStore.get(l),d={id:l,multiaddrs:f.addresses.map(({multiaddr:h})=>h),protocols:f.protocols};await this.onPeerConnect(d)}).catch(f=>{this.log.error("could not add %p to routing table - %e",l,f)})}),this.dhtPeerRouting=new _mt(this),this.dhtContentRouting=new wmt(this),r.clientMode==null&&e.events.addEventListener("self:peer:update",u=>{this.log("received update of self-peer info"),Promise.resolve().then(async()=>{const l=u.detail.peer.addresses.some(({multiaddr:d})=>Apt(d)),f=this.getMode();l&&f==="client"?await this.setMode("server"):f==="server"&&!l&&await this.setMode("client")}).catch(l=>{this.log.error("error setting dht server mode",l)})}),this.get=n1(this.get.bind(this),a,"GET_VALUE"),this.findProviders=n1(this.findProviders.bind(this),a,"FIND_PROVIDERS"),this.findPeer=n1(this.findPeer.bind(this),a,"FIND_PEER"),this.getClosestPeers=n1(this.getClosestPeers.bind(this),a,"GET_CLOSEST_PEERS"),this.provide=n1(this.provide.bind(this),a,"PROVIDE"),this.put=n1(this.put.bind(this),a,"PUT_VALUE")}[Symbol.toStringTag]="@libp2p/kad-dht";[Ui]=["@libp2p/content-routing","@libp2p/peer-routing","@libp2p/peer-discovery"];[xu]=["@libp2p/identify"];get[K1](){return this.dhtContentRouting}get[X1](){return this.dhtPeerRouting}get[ov](){return this}async onPeerConnect(e){if(this.log.trace("peer %p connected",e.id),e=this.peerInfoMapper(e),e.multiaddrs.length===0){this.log.trace("ignoring %p as there were no valid addresses in %s after filtering",e.id,e.multiaddrs.map(r=>r.toString()));return}try{await this.routingTable.add(e.id)}catch(r){this.log.error("could not add %p to routing table",e.id,r)}}isStarted(){return this.running}getMode(){return this.clientMode?"client":"server"}async setMode(e,r=!1){if(e===this.getMode()&&!r){this.log("already in %s mode",e);return}if(await this.components.registrar.unhandle(this.protocol),e===this.getMode()&&!r){this.log("already in %s mode",e);return}e==="client"?(this.log("enabling client mode while in %s mode",this.getMode()),this.clientMode=!0):(this.log("enabling server mode while in %s mode",this.getMode()),this.clientMode=!1,await this.components.registrar.handle(this.protocol,this.rpc.onIncomingStream.bind(this.rpc),{maxInboundStreams:this.maxInboundStreams,maxOutboundStreams:this.maxOutboundStreams}))}async start(){this.running||(this.running=!0,await this.setMode(this.clientMode?"client":"server",!0),await _u(this.routingTable,this.queryManager,this.network,this.topologyListener,this.routingTableRefresh,this.reprovider),await _u(this.querySelf))}async stop(){this.running=!1,await dd(this.querySelf,this.queryManager,this.network,this.routingTable,this.routingTableRefresh,this.topologyListener,this.reprovider)}async*put(e,r,n={}){yield*this.contentFetching.put(e,r,n)}async*get(e,r={}){yield*this.contentFetching.get(e,r)}async*provide(e,r={}){yield*this.contentRouting.provide(e,this.components.addressManager.getAddresses(),r)}async cancelReprovide(e){await this.providers.removeProvider(e,this.components.peerId)}async*findProviders(e,r={}){yield*this.contentRouting.findProviders(e,r)}async*findPeer(e,r={}){yield*this.peerRouting.findPeer(e,r)}async*getClosestPeers(e,r={}){yield*this.peerRouting.getClosestPeers(e,r)}async refreshRoutingTable(){this.routingTableRefresh.refreshTable(!0)}}var BP;(function(t){t[t.SEND_QUERY=0]="SEND_QUERY",t[t.PEER_RESPONSE=1]="PEER_RESPONSE",t[t.FINAL_PEER=2]="FINAL_PEER",t[t.QUERY_ERROR=3]="QUERY_ERROR",t[t.PROVIDER=4]="PROVIDER",t[t.VALUE=5]="VALUE",t[t.ADD_PEER=6]="ADD_PEER",t[t.DIAL_PEER=7]="DIAL_PEER"})(BP||(BP={}));function kmt(t={}){return e=>new Emt(e,t)}var oA,RZ;function Tmt(){if(RZ)return oA;RZ=1;function t(r){return r>=55296&&r<=56319}function e(r){return r>=56320&&r<=57343}return oA=function(n,i,s){if(typeof i!="string")throw new Error("Input must be string");for(var a=i.length,o=0,c,u,l=0;l<a;l+=1){if(c=i.charCodeAt(l),u=i[l],t(c)&&e(i.charCodeAt(l+1))&&(l+=1,u+=i[l]),o+=n(u),o===s)return i.slice(0,l+1);if(o>s)return i.slice(0,l-u.length+1)}return i},oA}var cA,OZ;function Amt(){if(OZ)return cA;OZ=1;function t(r){return r>=55296&&r<=56319}function e(r){return r>=56320&&r<=57343}return cA=function(n){if(typeof n!="string")throw new Error("Input must be string");for(var i=n.length,s=0,a=null,o=null,c=0;c<i;c++)a=n.charCodeAt(c),e(a)?o!=null&&t(o)?s+=1:s+=3:a<=127?s+=1:a>=128&&a<=2047?s+=2:a>=2048&&a<=65535&&(s+=3),o=a;return s},cA}var lA,BZ;function Cmt(){if(BZ)return lA;BZ=1;var t=Tmt(),e=Amt();return lA=t.bind(null,e),lA}var uA,DZ;function Imt(){if(DZ)return uA;DZ=1;var t=Cmt(),e=/[\/\?<>\\:\*\|"]/g,r=/[\x00-\x1f\x80-\x9f]/g,n=/^\.+$/,i=/^(con|prn|aux|nul|com[0-9]|lpt[0-9])(\..*)?$/i,s=/[\. ]+$/;function a(o,c){if(typeof o!="string")throw new Error("Input must be string");var u=o.replace(e,c).replace(r,c).replace(n,c).replace(i,c).replace(s,c);return t(u,255)}return uA=function(o,c){var u=c&&c.replacement||"",l=a(o,u);return u===""?l:a(l,"")},uA}var Pmt=Imt();const Rmt=In(Pmt),fA={alg:"A128GCM",ext:!0,k:"scm9jmO_4BJAgdwWGVulLg",key_ops:["encrypt","decrypt"],kty:"oct"};function P0e(t){const e="AES-GCM";let r=16;const n=12,i="SHA-256",s=16,a=32767,o=pl.get();r*=8;async function c(f,d){const h=o.getRandomValues(new Uint8Array(s)),m=o.getRandomValues(new Uint8Array(n)),p={name:e,iv:m};typeof d=="string"&&(d=tt(d));let g;if(d.length===0){g=await o.subtle.importKey("jwk",fA,{name:"AES-GCM"},!0,["encrypt"]);try{const y={name:"PBKDF2",salt:h,iterations:a,hash:{name:i}},b=await o.subtle.importKey("raw",d,{name:"PBKDF2"},!1,["deriveKey"]);g=await o.subtle.deriveKey(y,b,{name:e,length:r},!0,["encrypt"])}catch{g=await o.subtle.importKey("jwk",fA,{name:"AES-GCM"},!0,["encrypt"])}}else{const y={name:"PBKDF2",salt:h,iterations:a,hash:{name:i}},b=await o.subtle.importKey("raw",d,{name:"PBKDF2"},!1,["deriveKey"]);g=await o.subtle.deriveKey(y,b,{name:e,length:r},!0,["encrypt"])}const v=await o.subtle.encrypt(p,g,f);return qn([h,p.iv,new Uint8Array(v)])}async function u(f,d){const h=f.subarray(0,s),m=f.subarray(s,s+n),p=f.subarray(s+n),g={name:e,iv:m};typeof d=="string"&&(d=tt(d));let v;if(d.length===0)try{const b={name:"PBKDF2",salt:h,iterations:a,hash:{name:i}},_=await o.subtle.importKey("raw",d,{name:"PBKDF2"},!1,["deriveKey"]);v=await o.subtle.deriveKey(b,_,{name:e,length:r},!0,["decrypt"])}catch{v=await o.subtle.importKey("jwk",fA,{name:"AES-GCM"},!0,["decrypt"])}else{const b={name:"PBKDF2",salt:h,iterations:a,hash:{name:i}},_=await o.subtle.importKey("raw",d,{name:"PBKDF2"},!1,["deriveKey"]);v=await o.subtle.deriveKey(b,_,{name:e,length:r},!0,["decrypt"])}const y=await o.subtle.decrypt(g,v,p);return new Uint8Array(y)}return{encrypt:c,decrypt:u}}/*!
 * MIT License
 * 
 * Copyright (c) 2017-2024 Peculiar Ventures, LLC
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 * 
 */const Omt="[object ArrayBuffer]";class bn{static isArrayBuffer(e){return Object.prototype.toString.call(e)===Omt}static toArrayBuffer(e){return this.isArrayBuffer(e)?e:e.byteLength===e.buffer.byteLength||e.byteOffset===0&&e.byteLength===e.buffer.byteLength?e.buffer:this.toUint8Array(e.buffer).slice(e.byteOffset,e.byteOffset+e.byteLength).buffer}static toUint8Array(e){return this.toView(e,Uint8Array)}static toView(e,r){if(e.constructor===r)return e;if(this.isArrayBuffer(e))return new r(e);if(this.isArrayBufferView(e))return new r(e.buffer,e.byteOffset,e.byteLength);throw new TypeError("The provided value is not of type '(ArrayBuffer or ArrayBufferView)'")}static isBufferSource(e){return this.isArrayBufferView(e)||this.isArrayBuffer(e)}static isArrayBufferView(e){return ArrayBuffer.isView(e)||e&&this.isArrayBuffer(e.buffer)}static isEqual(e,r){const n=bn.toUint8Array(e),i=bn.toUint8Array(r);if(n.length!==i.byteLength)return!1;for(let s=0;s<n.length;s++)if(n[s]!==i[s])return!1;return!0}static concat(...e){let r;Array.isArray(e[0])&&!(e[1]instanceof Function)||Array.isArray(e[0])&&e[1]instanceof Function?r=e[0]:e[e.length-1]instanceof Function?r=e.slice(0,e.length-1):r=e;let n=0;for(const a of r)n+=a.byteLength;const i=new Uint8Array(n);let s=0;for(const a of r){const o=this.toUint8Array(a);i.set(o,s),s+=o.length}return e[e.length-1]instanceof Function?this.toView(i,e[e.length-1]):i.buffer}}const dA="string",Bmt=/^[0-9a-f\s]+$/i,Dmt=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/,Mmt=/^[a-zA-Z0-9-_]+$/;class MZ{static fromString(e){const r=unescape(encodeURIComponent(e)),n=new Uint8Array(r.length);for(let i=0;i<r.length;i++)n[i]=r.charCodeAt(i);return n.buffer}static toString(e){const r=bn.toUint8Array(e);let n="";for(let s=0;s<r.length;s++)n+=String.fromCharCode(r[s]);return decodeURIComponent(escape(n))}}class jc{static toString(e,r=!1){const n=bn.toArrayBuffer(e),i=new DataView(n);let s="";for(let a=0;a<n.byteLength;a+=2){const o=i.getUint16(a,r);s+=String.fromCharCode(o)}return s}static fromString(e,r=!1){const n=new ArrayBuffer(e.length*2),i=new DataView(n);for(let s=0;s<e.length;s++)i.setUint16(s*2,e.charCodeAt(s),r);return n}}class ei{static isHex(e){return typeof e===dA&&Bmt.test(e)}static isBase64(e){return typeof e===dA&&Dmt.test(e)}static isBase64Url(e){return typeof e===dA&&Mmt.test(e)}static ToString(e,r="utf8"){const n=bn.toUint8Array(e);switch(r.toLowerCase()){case"utf8":return this.ToUtf8String(n);case"binary":return this.ToBinary(n);case"hex":return this.ToHex(n);case"base64":return this.ToBase64(n);case"base64url":return this.ToBase64Url(n);case"utf16le":return jc.toString(n,!0);case"utf16":case"utf16be":return jc.toString(n);default:throw new Error(`Unknown type of encoding '${r}'`)}}static FromString(e,r="utf8"){if(!e)return new ArrayBuffer(0);switch(r.toLowerCase()){case"utf8":return this.FromUtf8String(e);case"binary":return this.FromBinary(e);case"hex":return this.FromHex(e);case"base64":return this.FromBase64(e);case"base64url":return this.FromBase64Url(e);case"utf16le":return jc.fromString(e,!0);case"utf16":case"utf16be":return jc.fromString(e);default:throw new Error(`Unknown type of encoding '${r}'`)}}static ToBase64(e){const r=bn.toUint8Array(e);if(typeof btoa<"u"){const n=this.ToString(r,"binary");return btoa(n)}else return Me.from(r).toString("base64")}static FromBase64(e){const r=this.formatString(e);if(!r)return new ArrayBuffer(0);if(!ei.isBase64(r))throw new TypeError("Argument 'base64Text' is not Base64 encoded");return typeof atob<"u"?this.FromBinary(atob(r)):new Uint8Array(Me.from(r,"base64")).buffer}static FromBase64Url(e){const r=this.formatString(e);if(!r)return new ArrayBuffer(0);if(!ei.isBase64Url(r))throw new TypeError("Argument 'base64url' is not Base64Url encoded");return this.FromBase64(this.Base64Padding(r.replace(/\-/g,"+").replace(/\_/g,"/")))}static ToBase64Url(e){return this.ToBase64(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"")}static FromUtf8String(e,r=ei.DEFAULT_UTF8_ENCODING){switch(r){case"ascii":return this.FromBinary(e);case"utf8":return MZ.fromString(e);case"utf16":case"utf16be":return jc.fromString(e);case"utf16le":case"usc2":return jc.fromString(e,!0);default:throw new Error(`Unknown type of encoding '${r}'`)}}static ToUtf8String(e,r=ei.DEFAULT_UTF8_ENCODING){switch(r){case"ascii":return this.ToBinary(e);case"utf8":return MZ.toString(e);case"utf16":case"utf16be":return jc.toString(e);case"utf16le":case"usc2":return jc.toString(e,!0);default:throw new Error(`Unknown type of encoding '${r}'`)}}static FromBinary(e){const r=e.length,n=new Uint8Array(r);for(let i=0;i<r;i++)n[i]=e.charCodeAt(i);return n.buffer}static ToBinary(e){const r=bn.toUint8Array(e);let n="";for(let i=0;i<r.length;i++)n+=String.fromCharCode(r[i]);return n}static ToHex(e){const r=bn.toUint8Array(e);let n="";const i=r.length;for(let s=0;s<i;s++){const a=r[s];a<16&&(n+="0"),n+=a.toString(16)}return n}static FromHex(e){let r=this.formatString(e);if(!r)return new ArrayBuffer(0);if(!ei.isHex(r))throw new TypeError("Argument 'hexString' is not HEX encoded");r.length%2&&(r=`0${r}`);const n=new Uint8Array(r.length/2);for(let i=0;i<r.length;i=i+2){const s=r.slice(i,i+2);n[i/2]=parseInt(s,16)}return n.buffer}static ToUtf16String(e,r=!1){return jc.toString(e,r)}static FromUtf16String(e,r=!1){return jc.fromString(e,r)}static Base64Padding(e){const r=4-e.length%4;if(r<4)for(let n=0;n<r;n++)e+="=";return e}static formatString(e){return e?.replace(/[\n\r\t ]/g,"")||""}}ei.DEFAULT_UTF8_ENCODING="utf8";/*!
 Copyright (c) Peculiar Ventures, LLC
*/function Op(t,e){let r=0;if(t.length===1)return t[0];for(let n=t.length-1;n>=0;n--)r+=t[t.length-1-n]*Math.pow(2,e*n);return r}function n0(t,e,r=-1){const n=r;let i=t,s=0,a=Math.pow(2,e);for(let o=1;o<8;o++){if(t<a){let c;if(n<0)c=new ArrayBuffer(o),s=o;else{if(n<o)return new ArrayBuffer(0);c=new ArrayBuffer(n),s=n}const u=new Uint8Array(c);for(let l=o-1;l>=0;l--){const f=Math.pow(2,l*e);u[s-l-1]=Math.floor(i/f),i-=u[s-l-1]*f}return c}a*=Math.pow(2,e)}return new ArrayBuffer(0)}function DP(...t){let e=0,r=0;for(const s of t)e+=s.length;const n=new ArrayBuffer(e),i=new Uint8Array(n);for(const s of t)i.set(s,r),r+=s.length;return i}function R0e(){const t=new Uint8Array(this.valueHex);if(this.valueHex.byteLength>=2){const o=t[0]===255&&t[1]&128,c=t[0]===0&&(t[1]&128)===0;(o||c)&&this.warnings.push("Needlessly long format")}const e=new ArrayBuffer(this.valueHex.byteLength),r=new Uint8Array(e);for(let o=0;o<this.valueHex.byteLength;o++)r[o]=0;r[0]=t[0]&128;const n=Op(r,8),i=new ArrayBuffer(this.valueHex.byteLength),s=new Uint8Array(i);for(let o=0;o<this.valueHex.byteLength;o++)s[o]=t[o];return s[0]&=127,Op(s,8)-n}function Nmt(t){const e=t<0?t*-1:t;let r=128;for(let n=1;n<8;n++){if(e<=r){if(t<0){const a=r-e,o=n0(a,8,n),c=new Uint8Array(o);return c[0]|=128,o}let i=n0(e,8,n),s=new Uint8Array(i);if(s[0]&128){const a=i.slice(0),o=new Uint8Array(a);i=new ArrayBuffer(i.byteLength+1),s=new Uint8Array(i);for(let c=0;c<a.byteLength;c++)s[c+1]=o[c];s[0]=0}return i}r*=Math.pow(2,8)}return new ArrayBuffer(0)}function Fmt(t,e){if(t.byteLength!==e.byteLength)return!1;const r=new Uint8Array(t),n=new Uint8Array(e);for(let i=0;i<r.length;i++)if(r[i]!==n[i])return!1;return!0}function Ua(t,e){const r=t.toString(10);if(e<r.length)return"";const n=e-r.length,i=new Array(n);for(let a=0;a<n;a++)i[a]="0";return i.join("").concat(r)}/*!
 * Copyright (c) 2014, GMO GlobalSign
 * Copyright (c) 2015-2022, Peculiar Ventures
 * All rights reserved.
 * 
 * Author 2014-2019, Yury Strozhevsky
 * 
 * Redistribution and use in source and binary forms, with or without modification,
 * are permitted provided that the following conditions are met:
 * 
 * * Redistributions of source code must retain the above copyright notice, this
 *   list of conditions and the following disclaimer.
 * 
 * * Redistributions in binary form must reproduce the above copyright notice, this
 *   list of conditions and the following disclaimer in the documentation and/or
 *   other materials provided with the distribution.
 * 
 * * Neither the name of the copyright holder nor the names of its
 *   contributors may be used to endorse or promote products derived from
 *   this software without specific prior written permission.
 * 
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR
 * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON
 * ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 * 
 */function W6(){if(typeof BigInt>"u")throw new Error("BigInt is not defined. Your environment doesn't implement BigInt.")}function FM(t){let e=0,r=0;for(let i=0;i<t.length;i++){const s=t[i];e+=s.byteLength}const n=new Uint8Array(e);for(let i=0;i<t.length;i++){const s=t[i];n.set(new Uint8Array(s),r),r+=s.byteLength}return n.buffer}function Wu(t,e,r,n){return e instanceof Uint8Array?e.byteLength?r<0?(t.error="Wrong parameter: inputOffset less than zero",!1):n<0?(t.error="Wrong parameter: inputLength less than zero",!1):e.byteLength-r-n<0?(t.error="End of input reached before message was fully decoded (inconsistent offset and length values)",!1):!0:(t.error="Wrong parameter: inputBuffer has zero length",!1):(t.error="Wrong parameter: inputBuffer must be 'Uint8Array'",!1)}class LM{constructor(){this.items=[]}write(e){this.items.push(e)}final(){return FM(this.items)}}const Zm=[new Uint8Array([1])],NZ="0123456789",ym="",Dc=new ArrayBuffer(0),$M=new Uint8Array(0),cy="EndOfContent",O0e="OCTET STRING",B0e="BIT STRING";function Gu(t){var e;return e=class extends t{constructor(...n){var i;super(...n);const s=n[0]||{};this.isHexOnly=(i=s.isHexOnly)!==null&&i!==void 0?i:!1,this.valueHexView=s.valueHex?bn.toUint8Array(s.valueHex):$M}get valueHex(){return this.valueHexView.slice().buffer}set valueHex(n){this.valueHexView=new Uint8Array(n)}fromBER(n,i,s){const a=n instanceof ArrayBuffer?new Uint8Array(n):n;if(!Wu(this,a,i,s))return-1;const o=i+s;return this.valueHexView=a.subarray(i,o),this.valueHexView.length?(this.blockLength=s,o):(this.warnings.push("Zero buffer length"),i)}toBER(n=!1){return this.isHexOnly?n?new ArrayBuffer(this.valueHexView.byteLength):this.valueHexView.byteLength===this.valueHexView.buffer.byteLength?this.valueHexView.buffer:this.valueHexView.slice().buffer:(this.error="Flag 'isHexOnly' is not set, abort",Dc)}toJSON(){return{...super.toJSON(),isHexOnly:this.isHexOnly,valueHex:ei.ToHex(this.valueHexView)}}},e.NAME="hexBlock",e}class U0{constructor({blockLength:e=0,error:r=ym,warnings:n=[],valueBeforeDecode:i=$M}={}){this.blockLength=e,this.error=r,this.warnings=n,this.valueBeforeDecodeView=bn.toUint8Array(i)}static blockName(){return this.NAME}get valueBeforeDecode(){return this.valueBeforeDecodeView.slice().buffer}set valueBeforeDecode(e){this.valueBeforeDecodeView=new Uint8Array(e)}toJSON(){return{blockName:this.constructor.NAME,blockLength:this.blockLength,error:this.error,warnings:this.warnings,valueBeforeDecode:ei.ToHex(this.valueBeforeDecodeView)}}}U0.NAME="baseBlock";class Ca extends U0{fromBER(e,r,n){throw TypeError("User need to make a specific function in a class which extends 'ValueBlock'")}toBER(e,r){throw TypeError("User need to make a specific function in a class which extends 'ValueBlock'")}}Ca.NAME="valueBlock";class D0e extends Gu(U0){constructor({idBlock:e={}}={}){var r,n,i,s;super(),e?(this.isHexOnly=(r=e.isHexOnly)!==null&&r!==void 0?r:!1,this.valueHexView=e.valueHex?bn.toUint8Array(e.valueHex):$M,this.tagClass=(n=e.tagClass)!==null&&n!==void 0?n:-1,this.tagNumber=(i=e.tagNumber)!==null&&i!==void 0?i:-1,this.isConstructed=(s=e.isConstructed)!==null&&s!==void 0?s:!1):(this.tagClass=-1,this.tagNumber=-1,this.isConstructed=!1)}toBER(e=!1){let r=0;switch(this.tagClass){case 1:r|=0;break;case 2:r|=64;break;case 3:r|=128;break;case 4:r|=192;break;default:return this.error="Unknown tag class",Dc}if(this.isConstructed&&(r|=32),this.tagNumber<31&&!this.isHexOnly){const i=new Uint8Array(1);if(!e){let s=this.tagNumber;s&=31,r|=s,i[0]=r}return i.buffer}if(!this.isHexOnly){const i=n0(this.tagNumber,7),s=new Uint8Array(i),a=i.byteLength,o=new Uint8Array(a+1);if(o[0]=r|31,!e){for(let c=0;c<a-1;c++)o[c+1]=s[c]|128;o[a]=s[a-1]}return o.buffer}const n=new Uint8Array(this.valueHexView.byteLength+1);if(n[0]=r|31,!e){const i=this.valueHexView;for(let s=0;s<i.length-1;s++)n[s+1]=i[s]|128;n[this.valueHexView.byteLength]=i[i.length-1]}return n.buffer}fromBER(e,r,n){const i=bn.toUint8Array(e);if(!Wu(this,i,r,n))return-1;const s=i.subarray(r,r+n);if(s.length===0)return this.error="Zero buffer length",-1;switch(s[0]&192){case 0:this.tagClass=1;break;case 64:this.tagClass=2;break;case 128:this.tagClass=3;break;case 192:this.tagClass=4;break;default:return this.error="Unknown tag class",-1}this.isConstructed=(s[0]&32)===32,this.isHexOnly=!1;const o=s[0]&31;if(o!==31)this.tagNumber=o,this.blockLength=1;else{let c=1,u=this.valueHexView=new Uint8Array(255),l=255;for(;s[c]&128;){if(u[c-1]=s[c]&127,c++,c>=s.length)return this.error="End of input reached before message was fully decoded",-1;if(c===l){l+=255;const d=new Uint8Array(l);for(let h=0;h<u.length;h++)d[h]=u[h];u=this.valueHexView=new Uint8Array(l)}}this.blockLength=c+1,u[c-1]=s[c]&127;const f=new Uint8Array(c);for(let d=0;d<c;d++)f[d]=u[d];u=this.valueHexView=new Uint8Array(c),u.set(f),this.blockLength<=9?this.tagNumber=Op(u,7):(this.isHexOnly=!0,this.warnings.push("Tag too long, represented as hex-coded"))}if(this.tagClass===1&&this.isConstructed)switch(this.tagNumber){case 1:case 2:case 5:case 6:case 9:case 13:case 14:case 23:case 24:case 31:case 32:case 33:case 34:return this.error="Constructed encoding used for primitive type",-1}return r+this.blockLength}toJSON(){return{...super.toJSON(),tagClass:this.tagClass,tagNumber:this.tagNumber,isConstructed:this.isConstructed}}}D0e.NAME="identificationBlock";class M0e extends U0{constructor({lenBlock:e={}}={}){var r,n,i;super(),this.isIndefiniteForm=(r=e.isIndefiniteForm)!==null&&r!==void 0?r:!1,this.longFormUsed=(n=e.longFormUsed)!==null&&n!==void 0?n:!1,this.length=(i=e.length)!==null&&i!==void 0?i:0}fromBER(e,r,n){const i=bn.toUint8Array(e);if(!Wu(this,i,r,n))return-1;const s=i.subarray(r,r+n);if(s.length===0)return this.error="Zero buffer length",-1;if(s[0]===255)return this.error="Length block 0xFF is reserved by standard",-1;if(this.isIndefiniteForm=s[0]===128,this.isIndefiniteForm)return this.blockLength=1,r+this.blockLength;if(this.longFormUsed=!!(s[0]&128),this.longFormUsed===!1)return this.length=s[0],this.blockLength=1,r+this.blockLength;const a=s[0]&127;if(a>8)return this.error="Too big integer",-1;if(a+1>s.length)return this.error="End of input reached before message was fully decoded",-1;const o=r+1,c=i.subarray(o,o+a);return c[a-1]===0&&this.warnings.push("Needlessly long encoded length"),this.length=Op(c,8),this.longFormUsed&&this.length<=127&&this.warnings.push("Unnecessary usage of long length form"),this.blockLength=a+1,r+this.blockLength}toBER(e=!1){let r,n;if(this.length>127&&(this.longFormUsed=!0),this.isIndefiniteForm)return r=new ArrayBuffer(1),e===!1&&(n=new Uint8Array(r),n[0]=128),r;if(this.longFormUsed){const i=n0(this.length,8);if(i.byteLength>127)return this.error="Too big length",Dc;if(r=new ArrayBuffer(i.byteLength+1),e)return r;const s=new Uint8Array(i);n=new Uint8Array(r),n[0]=i.byteLength|128;for(let a=0;a<i.byteLength;a++)n[a+1]=s[a];return r}return r=new ArrayBuffer(1),e===!1&&(n=new Uint8Array(r),n[0]=this.length),r}toJSON(){return{...super.toJSON(),isIndefiniteForm:this.isIndefiniteForm,longFormUsed:this.longFormUsed,length:this.length}}}M0e.NAME="lengthBlock";const dt={};class sa extends U0{constructor({name:e=ym,optional:r=!1,primitiveSchema:n,...i}={},s){super(i),this.name=e,this.optional=r,n&&(this.primitiveSchema=n),this.idBlock=new D0e(i),this.lenBlock=new M0e(i),this.valueBlock=s?new s(i):new Ca(i)}fromBER(e,r,n){const i=this.valueBlock.fromBER(e,r,this.lenBlock.isIndefiniteForm?n:this.lenBlock.length);return i===-1?(this.error=this.valueBlock.error,i):(this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.valueBlock.error.length||(this.blockLength+=this.valueBlock.blockLength),i)}toBER(e,r){const n=r||new LM;r||N0e(this);const i=this.idBlock.toBER(e);if(n.write(i),this.lenBlock.isIndefiniteForm)n.write(new Uint8Array([128]).buffer),this.valueBlock.toBER(e,n),n.write(new ArrayBuffer(2));else{const s=this.valueBlock.toBER(e);this.lenBlock.length=s.byteLength;const a=this.lenBlock.toBER(e);n.write(a),n.write(s)}return r?Dc:n.final()}toJSON(){const e={...super.toJSON(),idBlock:this.idBlock.toJSON(),lenBlock:this.lenBlock.toJSON(),valueBlock:this.valueBlock.toJSON(),name:this.name,optional:this.optional};return this.primitiveSchema&&(e.primitiveSchema=this.primitiveSchema.toJSON()),e}toString(e="ascii"){return e==="ascii"?this.onAsciiEncoding():ei.ToHex(this.toBER())}onAsciiEncoding(){return`${this.constructor.NAME} : ${ei.ToHex(this.valueBlock.valueBeforeDecodeView)}`}isEqual(e){if(this===e)return!0;if(!(e instanceof this.constructor))return!1;const r=this.toBER(),n=e.toBER();return Fmt(r,n)}}sa.NAME="BaseBlock";function N0e(t){if(t instanceof dt.Constructed)for(const e of t.valueBlock.value)N0e(e)&&(t.lenBlock.isIndefiniteForm=!0);return!!t.lenBlock.isIndefiniteForm}class F0e extends sa{constructor({value:e=ym,...r}={},n){super(r,n),e&&this.fromString(e)}getValue(){return this.valueBlock.value}setValue(e){this.valueBlock.value=e}fromBER(e,r,n){const i=this.valueBlock.fromBER(e,r,this.lenBlock.isIndefiniteForm?n:this.lenBlock.length);return i===-1?(this.error=this.valueBlock.error,i):(this.fromBuffer(this.valueBlock.valueHexView),this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.valueBlock.error.length||(this.blockLength+=this.valueBlock.blockLength),i)}onAsciiEncoding(){return`${this.constructor.NAME} : '${this.valueBlock.value}'`}}F0e.NAME="BaseStringBlock";class L0e extends Gu(Ca){constructor({isHexOnly:e=!0,...r}={}){super(r),this.isHexOnly=e}}L0e.NAME="PrimitiveValueBlock";var $0e;class U0e extends sa{constructor(e={}){super(e,L0e),this.idBlock.isConstructed=!1}}$0e=U0e;dt.Primitive=$0e;U0e.NAME="PRIMITIVE";function Lmt(t,e){if(t instanceof e)return t;const r=new e;return r.idBlock=t.idBlock,r.lenBlock=t.lenBlock,r.warnings=t.warnings,r.valueBeforeDecodeView=t.valueBeforeDecodeView,r}function b_(t,e=0,r=t.length){const n=e;let i=new sa({},Ca);const s=new U0;if(!Wu(s,t,e,r))return i.error=s.error,{offset:-1,result:i};if(!t.subarray(e,e+r).length)return i.error="Zero buffer length",{offset:-1,result:i};let o=i.idBlock.fromBER(t,e,r);if(i.idBlock.warnings.length&&i.warnings.concat(i.idBlock.warnings),o===-1)return i.error=i.idBlock.error,{offset:-1,result:i};if(e=o,r-=i.idBlock.blockLength,o=i.lenBlock.fromBER(t,e,r),i.lenBlock.warnings.length&&i.warnings.concat(i.lenBlock.warnings),o===-1)return i.error=i.lenBlock.error,{offset:-1,result:i};if(e=o,r-=i.lenBlock.blockLength,!i.idBlock.isConstructed&&i.lenBlock.isIndefiniteForm)return i.error="Indefinite length form used for primitive encoding form",{offset:-1,result:i};let c=sa;switch(i.idBlock.tagClass){case 1:if(i.idBlock.tagNumber>=37&&i.idBlock.isHexOnly===!1)return i.error="UNIVERSAL 37 and upper tags are reserved by ASN.1 standard",{offset:-1,result:i};switch(i.idBlock.tagNumber){case 0:if(i.idBlock.isConstructed&&i.lenBlock.length>0)return i.error="Type [UNIVERSAL 0] is reserved",{offset:-1,result:i};c=dt.EndOfContent;break;case 1:c=dt.Boolean;break;case 2:c=dt.Integer;break;case 3:c=dt.BitString;break;case 4:c=dt.OctetString;break;case 5:c=dt.Null;break;case 6:c=dt.ObjectIdentifier;break;case 10:c=dt.Enumerated;break;case 12:c=dt.Utf8String;break;case 13:c=dt.RelativeObjectIdentifier;break;case 14:c=dt.TIME;break;case 15:return i.error="[UNIVERSAL 15] is reserved by ASN.1 standard",{offset:-1,result:i};case 16:c=dt.Sequence;break;case 17:c=dt.Set;break;case 18:c=dt.NumericString;break;case 19:c=dt.PrintableString;break;case 20:c=dt.TeletexString;break;case 21:c=dt.VideotexString;break;case 22:c=dt.IA5String;break;case 23:c=dt.UTCTime;break;case 24:c=dt.GeneralizedTime;break;case 25:c=dt.GraphicString;break;case 26:c=dt.VisibleString;break;case 27:c=dt.GeneralString;break;case 28:c=dt.UniversalString;break;case 29:c=dt.CharacterString;break;case 30:c=dt.BmpString;break;case 31:c=dt.DATE;break;case 32:c=dt.TimeOfDay;break;case 33:c=dt.DateTime;break;case 34:c=dt.Duration;break;default:{const u=i.idBlock.isConstructed?new dt.Constructed:new dt.Primitive;u.idBlock=i.idBlock,u.lenBlock=i.lenBlock,u.warnings=i.warnings,i=u}}break;case 2:case 3:case 4:default:c=i.idBlock.isConstructed?dt.Constructed:dt.Primitive}return i=Lmt(i,c),o=i.fromBER(t,e,i.lenBlock.isIndefiniteForm?r:i.lenBlock.length),i.valueBeforeDecodeView=t.subarray(n,n+i.blockLength),{offset:o,result:i}}function hA(t){if(!t.byteLength){const e=new sa({},Ca);return e.error="Input buffer has zero length",{offset:-1,result:e}}return b_(bn.toUint8Array(t).slice(),0,t.byteLength)}function $mt(t,e){return t?1:e}class zf extends Ca{constructor({value:e=[],isIndefiniteForm:r=!1,...n}={}){super(n),this.value=e,this.isIndefiniteForm=r}fromBER(e,r,n){const i=bn.toUint8Array(e);if(!Wu(this,i,r,n))return-1;if(this.valueBeforeDecodeView=i.subarray(r,r+n),this.valueBeforeDecodeView.length===0)return this.warnings.push("Zero buffer length"),r;let s=r;for(;$mt(this.isIndefiniteForm,n)>0;){const a=b_(i,s,n);if(a.offset===-1)return this.error=a.result.error,this.warnings.concat(a.result.warnings),-1;if(s=a.offset,this.blockLength+=a.result.blockLength,n-=a.result.blockLength,this.value.push(a.result),this.isIndefiniteForm&&a.result.constructor.NAME===cy)break}return this.isIndefiniteForm&&(this.value[this.value.length-1].constructor.NAME===cy?this.value.pop():this.warnings.push("No EndOfContent block encoded")),s}toBER(e,r){const n=r||new LM;for(let i=0;i<this.value.length;i++)this.value[i].toBER(e,n);return r?Dc:n.final()}toJSON(){const e={...super.toJSON(),isIndefiniteForm:this.isIndefiniteForm,value:[]};for(const r of this.value)e.value.push(r.toJSON());return e}}zf.NAME="ConstructedValueBlock";var j0e;class bm extends sa{constructor(e={}){super(e,zf),this.idBlock.isConstructed=!0}fromBER(e,r,n){this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm;const i=this.valueBlock.fromBER(e,r,this.lenBlock.isIndefiniteForm?n:this.lenBlock.length);return i===-1?(this.error=this.valueBlock.error,i):(this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.valueBlock.error.length||(this.blockLength+=this.valueBlock.blockLength),i)}onAsciiEncoding(){const e=[];for(const n of this.valueBlock.value)e.push(n.toString("ascii").split(`
`).map(i=>`  ${i}`).join(`
`));const r=this.idBlock.tagClass===3?`[${this.idBlock.tagNumber}]`:this.constructor.NAME;return e.length?`${r} :
${e.join(`
`)}`:`${r} :`}}j0e=bm;dt.Constructed=j0e;bm.NAME="CONSTRUCTED";class V0e extends Ca{fromBER(e,r,n){return r}toBER(e){return Dc}}V0e.override="EndOfContentValueBlock";var q0e;class z0e extends sa{constructor(e={}){super(e,V0e),this.idBlock.tagClass=1,this.idBlock.tagNumber=0}}q0e=z0e;dt.EndOfContent=q0e;z0e.NAME=cy;var H0e;class G6 extends sa{constructor(e={}){super(e,Ca),this.idBlock.tagClass=1,this.idBlock.tagNumber=5}fromBER(e,r,n){return this.lenBlock.length>0&&this.warnings.push("Non-zero length of value block for Null type"),this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.blockLength+=n,r+n>e.byteLength?(this.error="End of input reached before message was fully decoded (inconsistent offset and length values)",-1):r+n}toBER(e,r){const n=new ArrayBuffer(2);if(!e){const i=new Uint8Array(n);i[0]=5,i[1]=0}return r&&r.write(n),n}onAsciiEncoding(){return`${this.constructor.NAME}`}}H0e=G6;dt.Null=H0e;G6.NAME="NULL";class W0e extends Gu(Ca){constructor({value:e,...r}={}){super(r),r.valueHex?this.valueHexView=bn.toUint8Array(r.valueHex):this.valueHexView=new Uint8Array(1),e&&(this.value=e)}get value(){for(const e of this.valueHexView)if(e>0)return!0;return!1}set value(e){this.valueHexView[0]=e?255:0}fromBER(e,r,n){const i=bn.toUint8Array(e);return Wu(this,i,r,n)?(this.valueHexView=i.subarray(r,r+n),n>1&&this.warnings.push("Boolean value encoded in more then 1 octet"),this.isHexOnly=!0,R0e.call(this),this.blockLength=n,r+n):-1}toBER(){return this.valueHexView.slice()}toJSON(){return{...super.toJSON(),value:this.value}}}W0e.NAME="BooleanValueBlock";var G0e;let K0e=class extends sa{constructor(e={}){super(e,W0e),this.idBlock.tagClass=1,this.idBlock.tagNumber=1}getValue(){return this.valueBlock.value}setValue(e){this.valueBlock.value=e}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.getValue}`}};G0e=K0e;dt.Boolean=G0e;K0e.NAME="BOOLEAN";class X0e extends Gu(zf){constructor({isConstructed:e=!1,...r}={}){super(r),this.isConstructed=e}fromBER(e,r,n){let i=0;if(this.isConstructed){if(this.isHexOnly=!1,i=zf.prototype.fromBER.call(this,e,r,n),i===-1)return i;for(let s=0;s<this.value.length;s++){const a=this.value[s].constructor.NAME;if(a===cy){if(this.isIndefiniteForm)break;return this.error="EndOfContent is unexpected, OCTET STRING may consists of OCTET STRINGs only",-1}if(a!==O0e)return this.error="OCTET STRING may consists of OCTET STRINGs only",-1}}else this.isHexOnly=!0,i=super.fromBER(e,r,n),this.blockLength=n;return i}toBER(e,r){return this.isConstructed?zf.prototype.toBER.call(this,e,r):e?new ArrayBuffer(this.valueHexView.byteLength):this.valueHexView.slice().buffer}toJSON(){return{...super.toJSON(),isConstructed:this.isConstructed}}}X0e.NAME="OctetStringValueBlock";var Y0e;class Rf extends sa{constructor({idBlock:e={},lenBlock:r={},...n}={}){var i,s;(i=n.isConstructed)!==null&&i!==void 0||(n.isConstructed=!!(!((s=n.value)===null||s===void 0)&&s.length)),super({idBlock:{isConstructed:n.isConstructed,...e},lenBlock:{...r,isIndefiniteForm:!!n.isIndefiniteForm},...n},X0e),this.idBlock.tagClass=1,this.idBlock.tagNumber=4}fromBER(e,r,n){if(this.valueBlock.isConstructed=this.idBlock.isConstructed,this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm,n===0)return this.idBlock.error.length===0&&(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length===0&&(this.blockLength+=this.lenBlock.blockLength),r;if(!this.valueBlock.isConstructed){const s=(e instanceof ArrayBuffer?new Uint8Array(e):e).subarray(r,r+n);try{if(s.byteLength){const a=b_(s,0,s.byteLength);a.offset!==-1&&a.offset===n&&(this.valueBlock.value=[a.result])}}catch{}}return super.fromBER(e,r,n)}onAsciiEncoding(){return this.valueBlock.isConstructed||this.valueBlock.value&&this.valueBlock.value.length?bm.prototype.onAsciiEncoding.call(this):`${this.constructor.NAME} : ${ei.ToHex(this.valueBlock.valueHexView)}`}getValue(){if(!this.idBlock.isConstructed)return this.valueBlock.valueHexView.slice().buffer;const e=[];for(const r of this.valueBlock.value)r instanceof Rf&&e.push(r.valueBlock.valueHexView);return bn.concat(e)}}Y0e=Rf;dt.OctetString=Y0e;Rf.NAME=O0e;class Z0e extends Gu(zf){constructor({unusedBits:e=0,isConstructed:r=!1,...n}={}){super(n),this.unusedBits=e,this.isConstructed=r,this.blockLength=this.valueHexView.byteLength}fromBER(e,r,n){if(!n)return r;let i=-1;if(this.isConstructed){if(i=zf.prototype.fromBER.call(this,e,r,n),i===-1)return i;for(const o of this.value){const c=o.constructor.NAME;if(c===cy){if(this.isIndefiniteForm)break;return this.error="EndOfContent is unexpected, BIT STRING may consists of BIT STRINGs only",-1}if(c!==B0e)return this.error="BIT STRING may consists of BIT STRINGs only",-1;const u=o.valueBlock;if(this.unusedBits>0&&u.unusedBits>0)return this.error='Using of "unused bits" inside constructive BIT STRING allowed for least one only',-1;this.unusedBits=u.unusedBits}return i}const s=bn.toUint8Array(e);if(!Wu(this,s,r,n))return-1;const a=s.subarray(r,r+n);if(this.unusedBits=a[0],this.unusedBits>7)return this.error="Unused bits for BitString must be in range 0-7",-1;if(!this.unusedBits){const o=a.subarray(1);try{if(o.byteLength){const c=b_(o,0,o.byteLength);c.offset!==-1&&c.offset===n-1&&(this.value=[c.result])}}catch{}}return this.valueHexView=a.subarray(1),this.blockLength=a.length,r+n}toBER(e,r){if(this.isConstructed)return zf.prototype.toBER.call(this,e,r);if(e)return new ArrayBuffer(this.valueHexView.byteLength+1);if(!this.valueHexView.byteLength)return Dc;const n=new Uint8Array(this.valueHexView.length+1);return n[0]=this.unusedBits,n.set(this.valueHexView,1),n.buffer}toJSON(){return{...super.toJSON(),unusedBits:this.unusedBits,isConstructed:this.isConstructed}}}Z0e.NAME="BitStringValueBlock";var J0e;class Q0e extends sa{constructor({idBlock:e={},lenBlock:r={},...n}={}){var i,s;(i=n.isConstructed)!==null&&i!==void 0||(n.isConstructed=!!(!((s=n.value)===null||s===void 0)&&s.length)),super({idBlock:{isConstructed:n.isConstructed,...e},lenBlock:{...r,isIndefiniteForm:!!n.isIndefiniteForm},...n},Z0e),this.idBlock.tagClass=1,this.idBlock.tagNumber=3}fromBER(e,r,n){return this.valueBlock.isConstructed=this.idBlock.isConstructed,this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm,super.fromBER(e,r,n)}onAsciiEncoding(){if(this.valueBlock.isConstructed||this.valueBlock.value&&this.valueBlock.value.length)return bm.prototype.onAsciiEncoding.call(this);{const e=[],r=this.valueBlock.valueHexView;for(const i of r)e.push(i.toString(2).padStart(8,"0"));const n=e.join("");return`${this.constructor.NAME} : ${n.substring(0,n.length-this.valueBlock.unusedBits)}`}}}J0e=Q0e;dt.BitString=J0e;Q0e.NAME=B0e;var e1e;function Umt(t,e){const r=new Uint8Array([0]),n=new Uint8Array(t),i=new Uint8Array(e);let s=n.slice(0);const a=s.length-1,o=i.slice(0),c=o.length-1;let u=0;const l=c<a?a:c;let f=0;for(let d=l;d>=0;d--,f++){switch(!0){case f<o.length:u=s[a-f]+o[c-f]+r[0];break;default:u=s[a-f]+r[0]}switch(r[0]=u/10,!0){case f>=s.length:s=DP(new Uint8Array([u%10]),s);break;default:s[a-f]=u%10}}return r[0]>0&&(s=DP(r,s)),s}function FZ(t){if(t>=Zm.length)for(let e=Zm.length;e<=t;e++){const r=new Uint8Array([0]);let n=Zm[e-1].slice(0);for(let i=n.length-1;i>=0;i--){const s=new Uint8Array([(n[i]<<1)+r[0]]);r[0]=s[0]/10,n[i]=s[0]%10}r[0]>0&&(n=DP(r,n)),Zm.push(n)}return Zm[t]}function jmt(t,e){let r=0;const n=new Uint8Array(t),i=new Uint8Array(e),s=n.slice(0),a=s.length-1,o=i.slice(0),c=o.length-1;let u,l=0;for(let f=c;f>=0;f--,l++)switch(u=s[a-l]-o[c-l]-r,!0){case u<0:r=1,s[a-l]=u+10;break;default:r=0,s[a-l]=u}if(r>0)for(let f=a-c+1;f>=0;f--,l++)if(u=s[a-l]-r,u<0)r=1,s[a-l]=u+10;else{r=0,s[a-l]=u;break}return s.slice()}class UM extends Gu(Ca){constructor({value:e,...r}={}){super(r),this._valueDec=0,r.valueHex&&this.setValueHex(),e!==void 0&&(this.valueDec=e)}setValueHex(){this.valueHexView.length>=4?(this.warnings.push("Too big Integer for decoding, hex only"),this.isHexOnly=!0,this._valueDec=0):(this.isHexOnly=!1,this.valueHexView.length>0&&(this._valueDec=R0e.call(this)))}set valueDec(e){this._valueDec=e,this.isHexOnly=!1,this.valueHexView=new Uint8Array(Nmt(e))}get valueDec(){return this._valueDec}fromDER(e,r,n,i=0){const s=this.fromBER(e,r,n);if(s===-1)return s;const a=this.valueHexView;return a[0]===0&&(a[1]&128)!==0?this.valueHexView=a.subarray(1):i!==0&&a.length<i&&(i-a.length>1&&(i=a.length+1),this.valueHexView=a.subarray(i-a.length)),s}toDER(e=!1){const r=this.valueHexView;switch(!0){case(r[0]&128)!==0:{const n=new Uint8Array(this.valueHexView.length+1);n[0]=0,n.set(r,1),this.valueHexView=n}break;case(r[0]===0&&(r[1]&128)===0):this.valueHexView=this.valueHexView.subarray(1);break}return this.toBER(e)}fromBER(e,r,n){const i=super.fromBER(e,r,n);return i===-1||this.setValueHex(),i}toBER(e){return e?new ArrayBuffer(this.valueHexView.length):this.valueHexView.slice().buffer}toJSON(){return{...super.toJSON(),valueDec:this.valueDec}}toString(){const e=this.valueHexView.length*8-1;let r=new Uint8Array(this.valueHexView.length*8/3),n=0,i;const s=this.valueHexView;let a="",o=!1;for(let c=s.byteLength-1;c>=0;c--){i=s[c];for(let u=0;u<8;u++){if((i&1)===1)switch(n){case e:r=jmt(FZ(n),r),a="-";break;default:r=Umt(r,FZ(n))}n++,i>>=1}}for(let c=0;c<r.length;c++)r[c]&&(o=!0),o&&(a+=NZ.charAt(r[c]));return o===!1&&(a+=NZ.charAt(0)),a}}e1e=UM;UM.NAME="IntegerValueBlock";Object.defineProperty(e1e.prototype,"valueHex",{set:function(t){this.valueHexView=new Uint8Array(t),this.setValueHex()},get:function(){return this.valueHexView.slice().buffer}});var t1e;class fl extends sa{constructor(e={}){super(e,UM),this.idBlock.tagClass=1,this.idBlock.tagNumber=2}toBigInt(){return W6(),BigInt(this.valueBlock.toString())}static fromBigInt(e){W6();const r=BigInt(e),n=new LM,i=r.toString(16).replace(/^-/,""),s=new Uint8Array(ei.FromHex(i));if(r<0){const o=new Uint8Array(s.length+(s[0]&128?1:0));o[0]|=128;const u=BigInt(`0x${ei.ToHex(o)}`)+r,l=bn.toUint8Array(ei.FromHex(u.toString(16)));l[0]|=128,n.write(l)}else s[0]&128&&n.write(new Uint8Array([0])),n.write(s);return new fl({valueHex:n.final()})}convertToDER(){const e=new fl({valueHex:this.valueBlock.valueHexView});return e.valueBlock.toDER(),e}convertFromDER(){return new fl({valueHex:this.valueBlock.valueHexView[0]===0?this.valueBlock.valueHexView.subarray(1):this.valueBlock.valueHexView})}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.valueBlock.toString()}`}}t1e=fl;dt.Integer=t1e;fl.NAME="INTEGER";var r1e;class n1e extends fl{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=10}}r1e=n1e;dt.Enumerated=r1e;n1e.NAME="ENUMERATED";class MP extends Gu(Ca){constructor({valueDec:e=-1,isFirstSid:r=!1,...n}={}){super(n),this.valueDec=e,this.isFirstSid=r}fromBER(e,r,n){if(!n)return r;const i=bn.toUint8Array(e);if(!Wu(this,i,r,n))return-1;const s=i.subarray(r,r+n);this.valueHexView=new Uint8Array(n);for(let o=0;o<n&&(this.valueHexView[o]=s[o]&127,this.blockLength++,(s[o]&128)!==0);o++);const a=new Uint8Array(this.blockLength);for(let o=0;o<this.blockLength;o++)a[o]=this.valueHexView[o];return this.valueHexView=a,(s[this.blockLength-1]&128)!==0?(this.error="End of input reached before message was fully decoded",-1):(this.valueHexView[0]===0&&this.warnings.push("Needlessly long format of SID encoding"),this.blockLength<=8?this.valueDec=Op(this.valueHexView,7):(this.isHexOnly=!0,this.warnings.push("Too big SID for decoding, hex only")),r+this.blockLength)}set valueBigInt(e){W6();let r=BigInt(e).toString(2);for(;r.length%7;)r="0"+r;const n=new Uint8Array(r.length/7);for(let i=0;i<n.length;i++)n[i]=parseInt(r.slice(i*7,i*7+7),2)+(i+1<n.length?128:0);this.fromBER(n.buffer,0,n.length)}toBER(e){if(this.isHexOnly){if(e)return new ArrayBuffer(this.valueHexView.byteLength);const i=this.valueHexView,s=new Uint8Array(this.blockLength);for(let a=0;a<this.blockLength-1;a++)s[a]=i[a]|128;return s[this.blockLength-1]=i[this.blockLength-1],s.buffer}const r=n0(this.valueDec,7);if(r.byteLength===0)return this.error="Error during encoding SID value",Dc;const n=new Uint8Array(r.byteLength);if(!e){const i=new Uint8Array(r),s=r.byteLength-1;for(let a=0;a<s;a++)n[a]=i[a]|128;n[s]=i[s]}return n}toString(){let e="";if(this.isHexOnly)e=ei.ToHex(this.valueHexView);else if(this.isFirstSid){let r=this.valueDec;this.valueDec<=39?e="0.":this.valueDec<=79?(e="1.",r-=40):(e="2.",r-=80),e+=r.toString()}else e=this.valueDec.toString();return e}toJSON(){return{...super.toJSON(),valueDec:this.valueDec,isFirstSid:this.isFirstSid}}}MP.NAME="sidBlock";class i1e extends Ca{constructor({value:e=ym,...r}={}){super(r),this.value=[],e&&this.fromString(e)}fromBER(e,r,n){let i=r;for(;n>0;){const s=new MP;if(i=s.fromBER(e,i,n),i===-1)return this.blockLength=0,this.error=s.error,i;this.value.length===0&&(s.isFirstSid=!0),this.blockLength+=s.blockLength,n-=s.blockLength,this.value.push(s)}return i}toBER(e){const r=[];for(let n=0;n<this.value.length;n++){const i=this.value[n].toBER(e);if(i.byteLength===0)return this.error=this.value[n].error,Dc;r.push(i)}return FM(r)}fromString(e){this.value=[];let r=0,n=0,i="",s=!1;do if(n=e.indexOf(".",r),n===-1?i=e.substring(r):i=e.substring(r,n),r=n+1,s){const a=this.value[0];let o=0;switch(a.valueDec){case 0:break;case 1:o=40;break;case 2:o=80;break;default:this.value=[];return}const c=parseInt(i,10);if(isNaN(c))return;a.valueDec=c+o,s=!1}else{const a=new MP;if(i>Number.MAX_SAFE_INTEGER){W6();const o=BigInt(i);a.valueBigInt=o}else if(a.valueDec=parseInt(i,10),isNaN(a.valueDec))return;this.value.length||(a.isFirstSid=!0,s=!0),this.value.push(a)}while(n!==-1)}toString(){let e="",r=!1;for(let n=0;n<this.value.length;n++){r=this.value[n].isHexOnly;let i=this.value[n].toString();n!==0&&(e=`${e}.`),r?(i=`{${i}}`,this.value[n].isFirstSid?e=`2.{${i} - 80}`:e+=i):e+=i}return e}toJSON(){const e={...super.toJSON(),value:this.toString(),sidArray:[]};for(let r=0;r<this.value.length;r++)e.sidArray.push(this.value[r].toJSON());return e}}i1e.NAME="ObjectIdentifierValueBlock";var s1e;class Kd extends sa{constructor(e={}){super(e,i1e),this.idBlock.tagClass=1,this.idBlock.tagNumber=6}getValue(){return this.valueBlock.toString()}setValue(e){this.valueBlock.fromString(e)}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.valueBlock.toString()||"empty"}`}toJSON(){return{...super.toJSON(),value:this.getValue()}}}s1e=Kd;dt.ObjectIdentifier=s1e;Kd.NAME="OBJECT IDENTIFIER";class NP extends Gu(U0){constructor({valueDec:e=0,...r}={}){super(r),this.valueDec=e}fromBER(e,r,n){if(n===0)return r;const i=bn.toUint8Array(e);if(!Wu(this,i,r,n))return-1;const s=i.subarray(r,r+n);this.valueHexView=new Uint8Array(n);for(let o=0;o<n&&(this.valueHexView[o]=s[o]&127,this.blockLength++,(s[o]&128)!==0);o++);const a=new Uint8Array(this.blockLength);for(let o=0;o<this.blockLength;o++)a[o]=this.valueHexView[o];return this.valueHexView=a,(s[this.blockLength-1]&128)!==0?(this.error="End of input reached before message was fully decoded",-1):(this.valueHexView[0]===0&&this.warnings.push("Needlessly long format of SID encoding"),this.blockLength<=8?this.valueDec=Op(this.valueHexView,7):(this.isHexOnly=!0,this.warnings.push("Too big SID for decoding, hex only")),r+this.blockLength)}toBER(e){if(this.isHexOnly){if(e)return new ArrayBuffer(this.valueHexView.byteLength);const i=this.valueHexView,s=new Uint8Array(this.blockLength);for(let a=0;a<this.blockLength-1;a++)s[a]=i[a]|128;return s[this.blockLength-1]=i[this.blockLength-1],s.buffer}const r=n0(this.valueDec,7);if(r.byteLength===0)return this.error="Error during encoding SID value",Dc;const n=new Uint8Array(r.byteLength);if(!e){const i=new Uint8Array(r),s=r.byteLength-1;for(let a=0;a<s;a++)n[a]=i[a]|128;n[s]=i[s]}return n.buffer}toString(){let e="";return this.isHexOnly?e=ei.ToHex(this.valueHexView):e=this.valueDec.toString(),e}toJSON(){return{...super.toJSON(),valueDec:this.valueDec}}}NP.NAME="relativeSidBlock";class a1e extends Ca{constructor({value:e=ym,...r}={}){super(r),this.value=[],e&&this.fromString(e)}fromBER(e,r,n){let i=r;for(;n>0;){const s=new NP;if(i=s.fromBER(e,i,n),i===-1)return this.blockLength=0,this.error=s.error,i;this.blockLength+=s.blockLength,n-=s.blockLength,this.value.push(s)}return i}toBER(e,r){const n=[];for(let i=0;i<this.value.length;i++){const s=this.value[i].toBER(e);if(s.byteLength===0)return this.error=this.value[i].error,Dc;n.push(s)}return FM(n)}fromString(e){this.value=[];let r=0,n=0,i="";do{n=e.indexOf(".",r),n===-1?i=e.substring(r):i=e.substring(r,n),r=n+1;const s=new NP;if(s.valueDec=parseInt(i,10),isNaN(s.valueDec))return!0;this.value.push(s)}while(n!==-1);return!0}toString(){let e="",r=!1;for(let n=0;n<this.value.length;n++){r=this.value[n].isHexOnly;let i=this.value[n].toString();n!==0&&(e=`${e}.`),r&&(i=`{${i}}`),e+=i}return e}toJSON(){const e={...super.toJSON(),value:this.toString(),sidArray:[]};for(let r=0;r<this.value.length;r++)e.sidArray.push(this.value[r].toJSON());return e}}a1e.NAME="RelativeObjectIdentifierValueBlock";var o1e;class c1e extends sa{constructor(e={}){super(e,a1e),this.idBlock.tagClass=1,this.idBlock.tagNumber=13}getValue(){return this.valueBlock.toString()}setValue(e){this.valueBlock.fromString(e)}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.valueBlock.toString()||"empty"}`}toJSON(){return{...super.toJSON(),value:this.getValue()}}}o1e=c1e;dt.RelativeObjectIdentifier=o1e;c1e.NAME="RelativeObjectIdentifier";var l1e;class Xo extends bm{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=16}}l1e=Xo;dt.Sequence=l1e;Xo.NAME="SEQUENCE";var u1e;let f1e=class extends bm{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=17}};u1e=f1e;dt.Set=u1e;f1e.NAME="SET";class d1e extends Gu(Ca){constructor({...e}={}){super(e),this.isHexOnly=!0,this.value=ym}toJSON(){return{...super.toJSON(),value:this.value}}}d1e.NAME="StringValueBlock";class h1e extends d1e{}h1e.NAME="SimpleStringValueBlock";class so extends F0e{constructor({...e}={}){super(e,h1e)}fromBuffer(e){this.valueBlock.value=String.fromCharCode.apply(null,bn.toUint8Array(e))}fromString(e){const r=e.length,n=this.valueBlock.valueHexView=new Uint8Array(r);for(let i=0;i<r;i++)n[i]=e.charCodeAt(i);this.valueBlock.value=e}}so.NAME="SIMPLE STRING";class p1e extends so{fromBuffer(e){this.valueBlock.valueHexView=bn.toUint8Array(e);try{this.valueBlock.value=ei.ToUtf8String(e)}catch(r){this.warnings.push(`Error during "decodeURIComponent": ${r}, using raw string`),this.valueBlock.value=ei.ToBinary(e)}}fromString(e){this.valueBlock.valueHexView=new Uint8Array(ei.FromUtf8String(e)),this.valueBlock.value=e}}p1e.NAME="Utf8StringValueBlock";var m1e;class j0 extends p1e{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=12}}m1e=j0;dt.Utf8String=m1e;j0.NAME="UTF8String";class g1e extends so{fromBuffer(e){this.valueBlock.value=ei.ToUtf16String(e),this.valueBlock.valueHexView=bn.toUint8Array(e)}fromString(e){this.valueBlock.value=e,this.valueBlock.valueHexView=new Uint8Array(ei.FromUtf16String(e))}}g1e.NAME="BmpStringValueBlock";var v1e;class y1e extends g1e{constructor({...e}={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=30}}v1e=y1e;dt.BmpString=v1e;y1e.NAME="BMPString";class b1e extends so{fromBuffer(e){const r=ArrayBuffer.isView(e)?e.slice().buffer:e.slice(0),n=new Uint8Array(r);for(let i=0;i<n.length;i+=4)n[i]=n[i+3],n[i+1]=n[i+2],n[i+2]=0,n[i+3]=0;this.valueBlock.value=String.fromCharCode.apply(null,new Uint32Array(r))}fromString(e){const r=e.length,n=this.valueBlock.valueHexView=new Uint8Array(r*4);for(let i=0;i<r;i++){const s=n0(e.charCodeAt(i),8),a=new Uint8Array(s);if(a.length>4)continue;const o=4-a.length;for(let c=a.length-1;c>=0;c--)n[i*4+c+o]=a[c]}this.valueBlock.value=e}}b1e.NAME="UniversalStringValueBlock";var w1e;class _1e extends b1e{constructor({...e}={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=28}}w1e=_1e;dt.UniversalString=w1e;_1e.NAME="UniversalString";var x1e;class S1e extends so{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=18}}x1e=S1e;dt.NumericString=x1e;S1e.NAME="NumericString";var E1e;class k1e extends so{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=19}}E1e=k1e;dt.PrintableString=E1e;k1e.NAME="PrintableString";var T1e;class A1e extends so{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=20}}T1e=A1e;dt.TeletexString=T1e;A1e.NAME="TeletexString";var C1e;class I1e extends so{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=21}}C1e=I1e;dt.VideotexString=C1e;I1e.NAME="VideotexString";var P1e;class R1e extends so{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=22}}P1e=R1e;dt.IA5String=P1e;R1e.NAME="IA5String";var O1e;class B1e extends so{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=25}}O1e=B1e;dt.GraphicString=O1e;B1e.NAME="GraphicString";var D1e;class jM extends so{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=26}}D1e=jM;dt.VisibleString=D1e;jM.NAME="VisibleString";var M1e;class N1e extends so{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=27}}M1e=N1e;dt.GeneralString=M1e;N1e.NAME="GeneralString";var F1e;class L1e extends so{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=29}}F1e=L1e;dt.CharacterString=F1e;L1e.NAME="CharacterString";var $1e;class VM extends jM{constructor({value:e,valueDate:r,...n}={}){if(super(n),this.year=0,this.month=0,this.day=0,this.hour=0,this.minute=0,this.second=0,e){this.fromString(e),this.valueBlock.valueHexView=new Uint8Array(e.length);for(let i=0;i<e.length;i++)this.valueBlock.valueHexView[i]=e.charCodeAt(i)}r&&(this.fromDate(r),this.valueBlock.valueHexView=new Uint8Array(this.toBuffer())),this.idBlock.tagClass=1,this.idBlock.tagNumber=23}fromBuffer(e){this.fromString(String.fromCharCode.apply(null,bn.toUint8Array(e)))}toBuffer(){const e=this.toString(),r=new ArrayBuffer(e.length),n=new Uint8Array(r);for(let i=0;i<e.length;i++)n[i]=e.charCodeAt(i);return r}fromDate(e){this.year=e.getUTCFullYear(),this.month=e.getUTCMonth()+1,this.day=e.getUTCDate(),this.hour=e.getUTCHours(),this.minute=e.getUTCMinutes(),this.second=e.getUTCSeconds()}toDate(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second))}fromString(e){const n=/(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})Z/ig.exec(e);if(n===null){this.error="Wrong input string for conversion";return}const i=parseInt(n[1],10);i>=50?this.year=1900+i:this.year=2e3+i,this.month=parseInt(n[2],10),this.day=parseInt(n[3],10),this.hour=parseInt(n[4],10),this.minute=parseInt(n[5],10),this.second=parseInt(n[6],10)}toString(e="iso"){if(e==="iso"){const r=new Array(7);return r[0]=Ua(this.year<2e3?this.year-1900:this.year-2e3,2),r[1]=Ua(this.month,2),r[2]=Ua(this.day,2),r[3]=Ua(this.hour,2),r[4]=Ua(this.minute,2),r[5]=Ua(this.second,2),r[6]="Z",r.join("")}return super.toString(e)}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.toDate().toISOString()}`}toJSON(){return{...super.toJSON(),year:this.year,month:this.month,day:this.day,hour:this.hour,minute:this.minute,second:this.second}}}$1e=VM;dt.UTCTime=$1e;VM.NAME="UTCTime";var U1e;class j1e extends VM{constructor(e={}){var r;super(e),(r=this.millisecond)!==null&&r!==void 0||(this.millisecond=0),this.idBlock.tagClass=1,this.idBlock.tagNumber=24}fromDate(e){super.fromDate(e),this.millisecond=e.getUTCMilliseconds()}toDate(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second,this.millisecond))}fromString(e){let r=!1,n="",i="",s=0,a,o=0,c=0;if(e[e.length-1]==="Z")n=e.substring(0,e.length-1),r=!0;else{const f=new Number(e[e.length-1]);if(isNaN(f.valueOf()))throw new Error("Wrong input string for conversion");n=e}if(r){if(n.indexOf("+")!==-1)throw new Error("Wrong input string for conversion");if(n.indexOf("-")!==-1)throw new Error("Wrong input string for conversion")}else{let f=1,d=n.indexOf("+"),h="";if(d===-1&&(d=n.indexOf("-"),f=-1),d!==-1){if(h=n.substring(d+1),n=n.substring(0,d),h.length!==2&&h.length!==4)throw new Error("Wrong input string for conversion");let m=parseInt(h.substring(0,2),10);if(isNaN(m.valueOf()))throw new Error("Wrong input string for conversion");if(o=f*m,h.length===4){if(m=parseInt(h.substring(2,4),10),isNaN(m.valueOf()))throw new Error("Wrong input string for conversion");c=f*m}}}let u=n.indexOf(".");if(u===-1&&(u=n.indexOf(",")),u!==-1){const f=new Number(`0${n.substring(u)}`);if(isNaN(f.valueOf()))throw new Error("Wrong input string for conversion");s=f.valueOf(),i=n.substring(0,u)}else i=n;switch(!0){case i.length===8:if(a=/(\d{4})(\d{2})(\d{2})/ig,u!==-1)throw new Error("Wrong input string for conversion");break;case i.length===10:if(a=/(\d{4})(\d{2})(\d{2})(\d{2})/ig,u!==-1){let f=60*s;this.minute=Math.floor(f),f=60*(f-this.minute),this.second=Math.floor(f),f=1e3*(f-this.second),this.millisecond=Math.floor(f)}break;case i.length===12:if(a=/(\d{4})(\d{2})(\d{2})(\d{2})(\d{2})/ig,u!==-1){let f=60*s;this.second=Math.floor(f),f=1e3*(f-this.second),this.millisecond=Math.floor(f)}break;case i.length===14:if(a=/(\d{4})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})/ig,u!==-1){const f=1e3*s;this.millisecond=Math.floor(f)}break;default:throw new Error("Wrong input string for conversion")}const l=a.exec(i);if(l===null)throw new Error("Wrong input string for conversion");for(let f=1;f<l.length;f++)switch(f){case 1:this.year=parseInt(l[f],10);break;case 2:this.month=parseInt(l[f],10);break;case 3:this.day=parseInt(l[f],10);break;case 4:this.hour=parseInt(l[f],10)+o;break;case 5:this.minute=parseInt(l[f],10)+c;break;case 6:this.second=parseInt(l[f],10);break;default:throw new Error("Wrong input string for conversion")}if(r===!1){const f=new Date(this.year,this.month,this.day,this.hour,this.minute,this.second,this.millisecond);this.year=f.getUTCFullYear(),this.month=f.getUTCMonth(),this.day=f.getUTCDay(),this.hour=f.getUTCHours(),this.minute=f.getUTCMinutes(),this.second=f.getUTCSeconds(),this.millisecond=f.getUTCMilliseconds()}}toString(e="iso"){if(e==="iso"){const r=[];return r.push(Ua(this.year,4)),r.push(Ua(this.month,2)),r.push(Ua(this.day,2)),r.push(Ua(this.hour,2)),r.push(Ua(this.minute,2)),r.push(Ua(this.second,2)),this.millisecond!==0&&(r.push("."),r.push(Ua(this.millisecond,3))),r.push("Z"),r.join("")}return super.toString(e)}toJSON(){return{...super.toJSON(),millisecond:this.millisecond}}}U1e=j1e;dt.GeneralizedTime=U1e;j1e.NAME="GeneralizedTime";var V1e;class q1e extends j0{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=31}}V1e=q1e;dt.DATE=V1e;q1e.NAME="DATE";var z1e;class H1e extends j0{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=32}}z1e=H1e;dt.TimeOfDay=z1e;H1e.NAME="TimeOfDay";var W1e;class G1e extends j0{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=33}}W1e=G1e;dt.DateTime=W1e;G1e.NAME="DateTime";var K1e;class X1e extends j0{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=34}}K1e=X1e;dt.Duration=K1e;X1e.NAME="Duration";var Y1e;class Z1e extends j0{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=14}}Y1e=Z1e;dt.TIME=Y1e;Z1e.NAME="TIME";const Vmt=16,FP=32,LP=1e4;async function qM(t,e){const n=await P0e().encrypt(t,e);return ko.encode(n)}async function LZ(t,e,r){if(t.type==="RSA")return Hmt(t,e,r);if(t.type==="Ed25519")return qmt(t,e,r);if(t.type==="secp256k1")return zmt(t,e,r);throw new Vp}async function qmt(t,e,r="libp2p-key"){if(r==="libp2p-key")return qM(w5(t),e);throw new Ze(`export format '${r}' is not supported`)}async function zmt(t,e,r="libp2p-key"){if(r==="libp2p-key")return qM(w5(t),e);throw new Ze("Export format is not supported")}async function Hmt(t,e,r="pkcs-8"){if(r==="pkcs-8")return Wmt(t,e);if(r==="libp2p-key")return qM(w5(t),e);throw new Ze("Export format is not supported")}async function Wmt(t,e){const r=pl.get(),i=new Xo({value:[new fl({value:0}),new Xo({value:[new Kd({value:"1.2.840.113549.1.1.1"}),new G6]}),new Rf({valueHex:t.raw})]}).toBER(),s=new Uint8Array(i,0,i.byteLength),a=Yf(Vmt),o=await Hfe(h5,e,a,{c:LP,dkLen:FP}),c=Yf(16),u=await r.subtle.importKey("raw",o,"AES-CBC",!1,["encrypt"]),l=await r.subtle.encrypt({name:"AES-CBC",iv:c},u,s),f=new Xo({value:[new Rf({valueHex:a}),new fl({value:LP}),new fl({value:FP}),new Xo({value:[new Kd({value:"1.2.840.113549.2.11"}),new G6]})]}),d=new Xo({value:[new Kd({value:"1.2.840.113549.1.5.13"}),new Xo({value:[new Xo({value:[new Kd({value:"1.2.840.113549.1.5.12"}),f]}),new Xo({value:[new Kd({value:"2.16.840.1.101.3.4.1.42"}),new Rf({valueHex:c})]})]})]}),m=new Xo({value:[d,new Rf({valueHex:l})]}).toBER(),p=new Uint8Array(m,0,m.byteLength);return["-----BEGIN ENCRYPTED PRIVATE KEY-----",...nt(p,"base64pad").split(/(.{64})/).filter(Boolean),"-----END ENCRYPTED PRIVATE KEY-----"].join(`
`)}async function $Z(t,e){try{const r=await Gmt(t,e);return sje(r)}catch{}if(!t.includes("BEGIN"))throw new Ze("Encrypted key was not a libp2p-key or a PEM file");return Kmt(t,e)}async function Gmt(t,e){const r=ko.decode(t);return P0e().decrypt(r,e)}async function Kmt(t,e){const r=pl.get();let n;if(t.includes("-----BEGIN ENCRYPTED PRIVATE KEY-----")){const s=tt(t.replace("-----BEGIN ENCRYPTED PRIVATE KEY-----","").replace("-----END ENCRYPTED PRIVATE KEY-----","").replace(/\n/g,"").trim(),"base64pad"),{result:a}=hA(s),{iv:o,salt:c,iterations:u,keySize:l,cipherText:f}=Xmt(a),d=await Hfe(h5,e,c,{c:u,dkLen:l}),h=await r.subtle.importKey("raw",d,"AES-CBC",!1,["decrypt"]),m=Kg(await r.subtle.decrypt({name:"AES-CBC",iv:o},h,f)),{result:p}=hA(m);n=UZ(p)}else if(t.includes("-----BEGIN PRIVATE KEY-----")){const s=tt(t.replace("-----BEGIN PRIVATE KEY-----","").replace("-----END PRIVATE KEY-----","").replace(/\n/g,"").trim(),"base64pad"),{result:a}=hA(s);n=UZ(a)}else throw new Ze("Could not parse private key from PEM data");const i=j4(n);if(i.type!=="RSA")throw new Ze("Could not parse RSA private key from PEM data");return i}function Xmt(t){const e=t.valueBlock.value[0];if(e.valueBlock.value[0].toString()!=="OBJECT IDENTIFIER : 1.2.840.113549.1.5.13")throw new Ze("Only pkcs5PBES2 encrypted private keys are supported");const n=e.valueBlock.value[1].valueBlock.value[0];if(n.valueBlock.value[0].toString()!=="OBJECT IDENTIFIER : 1.2.840.113549.1.5.12")throw new Ze("Only pkcs5PBKDF2 key derivation functions are supported");const s=n.valueBlock.value[1],a=Kg(s.valueBlock.value[0].getValue());let o=LP,c=FP;if(s.valueBlock.value.length===3)o=Number(s.valueBlock.value[1].toBigInt()),c=Number(s.valueBlock.value[2].toBigInt());else if(s.valueBlock.value.length===2)throw new Ze("Could not derive key size and iterations from PEM file - please use @libp2p/rsa to re-import your key");const u=e.valueBlock.value[1].valueBlock.value[1],l=u.valueBlock.value[0].toString();if(l!=="OBJECT IDENTIFIER : 1.2.840.113549.3.7"){if(l!=="OBJECT IDENTIFIER : 1.3.14.3.2.7"){if(l!=="OBJECT IDENTIFIER : 2.16.840.1.101.3.4.1.2"){if(l!=="OBJECT IDENTIFIER : 2.16.840.1.101.3.4.1.22"){if(l!=="OBJECT IDENTIFIER : 2.16.840.1.101.3.4.1.42")throw new Ze("Only AES-CBC encryption schemes are supported")}}}}const f=Kg(u.valueBlock.value[1].getValue());return{cipherText:Kg(t.valueBlock.value[1].getValue()),salt:a,iterations:o,keySize:c,iv:f}}function UZ(t){return Kg(t.valueBlock.value[2].getValue())}function Kg(t){return new Uint8Array(t,0,t.byteLength)}const Ymt="/pkcs8/",$P="/info/",Jm=new WeakMap,Ld={minKeyLength:112/8,minSaltLength:128/8,minIterationCount:1e3},pA={dek:{keyLength:512/8,iterationCount:1e4,salt:"you should override this value with a crypto secure random number",hash:"sha2-512"}};function i1(t){return t==null||typeof t!="string"?!1:t===Rmt(t.trim())&&t.length>0}async function ns(){const r=Math.random()*800+200;await new Promise(n=>setTimeout(n,r))}function $d(t){return new Sn(Ymt+t)}function s1(t){return new Sn($P+t)}async function Zmt(t){const e=w5(t),r=await ci.digest(e);return $n.encode(r.bytes).substring(1)}class Jmt{components;init;log;self;constructor(e,r){if(this.components=e,this.log=e.logger.forComponent("libp2p:keychain"),this.init=No(pA,r),this.self=r.selfKey??"self",this.init.pass!=null&&this.init.pass?.length<20)throw new Error("pass must be least 20 characters");if(this.init.dek?.keyLength!=null&&this.init.dek.keyLength<Ld.minKeyLength)throw new Error(`dek.keyLength must be least ${Ld.minKeyLength} bytes`);if(this.init.dek?.salt?.length!=null&&this.init.dek.salt.length<Ld.minSaltLength)throw new Error(`dek.saltLength must be least ${Ld.minSaltLength} bytes`);if(this.init.dek?.iterationCount!=null&&this.init.dek.iterationCount<Ld.minIterationCount)throw new Error(`dek.iterationCount must be least ${Ld.minIterationCount}`);const n=this.init.pass!=null&&this.init.dek?.salt!=null?MX(this.init.pass,this.init.dek?.salt,this.init.dek?.iterationCount,this.init.dek?.keyLength,this.init.dek?.hash):"";Jm.set(this,{dek:n})}[Symbol.toStringTag]="@libp2p/keychain";[Ui]=["@libp2p/keychain"];static generateOptions(){const e=Object.assign({},pA),r=Math.ceil(Ld.minSaltLength/3)*3;return e.dek.salt=nt(Yf(r),"base64"),e}static get options(){return pA}async findKeyByName(e){if(!i1(e))throw await ns(),new Ze(`Invalid key name '${e}'`);const r=s1(e);try{const n=await this.components.datastore.get(r);return JSON.parse(nt(n))}catch(n){throw await ns(),this.log.error(n),new Bs(`Key '${e}' does not exist.`)}}async findKeyById(e){try{const r={prefix:$P};for await(const n of this.components.datastore.query(r)){const i=JSON.parse(nt(n.value));if(i.id===e)return i}throw new Ze(`Key with id '${e}' does not exist.`)}catch(r){throw await ns(),r}}async importKey(e,r){if(!i1(e))throw await ns(),new Ze(`Invalid key name '${e}'`);if(r==null)throw await ns(),new Ze("Key is required");const n=$d(e);if(await this.components.datastore.has(n))throw await ns(),new Ze(`Key '${e}' already exists`);let s,a;try{s=await Zmt(r);const u=Jm.get(this);if(u==null)throw new Ze("dek missing");const l=u.dek;a=await LZ(r,l,r.type==="RSA"?"pkcs-8":"libp2p-key")}catch(u){throw await ns(),u}const o={name:e,id:s},c=this.components.datastore.batch();return c.put(n,tt(a)),c.put(s1(e),tt(JSON.stringify(o))),await c.commit(),o}async exportKey(e){if(!i1(e))throw await ns(),new Ze(`Invalid key name '${e}'`);const r=$d(e);try{const n=await this.components.datastore.get(r),i=nt(n),s=Jm.get(this);if(s==null)throw new Ze("dek missing");const a=s.dek;return await $Z(i,a)}catch(n){throw await ns(),n}}async removeKey(e){if(!i1(e)||e===this.self)throw await ns(),new Ze(`Invalid key name '${e}'`);const r=$d(e),n=await this.findKeyByName(e),i=this.components.datastore.batch();return i.delete(r),i.delete(s1(e)),await i.commit(),n}async listKeys(){const e={prefix:$P},r=[];for await(const n of this.components.datastore.query(e))r.push(JSON.parse(nt(n.value)));return r}async renameKey(e,r){if(!i1(e)||e===this.self)throw await ns(),new Ze(`Invalid old key name '${e}'`);if(!i1(r)||r===this.self)throw await ns(),new Ze(`Invalid new key name '${r}'`);const n=$d(e),i=$d(r),s=s1(e),a=s1(r);if(await this.components.datastore.has(i))throw await ns(),new Ze(`Key '${r}' already exists`);try{const c=await this.components.datastore.get(n),u=await this.components.datastore.get(s),l=JSON.parse(nt(u));l.name=r;const f=this.components.datastore.batch();return f.put(i,c),f.put(a,tt(JSON.stringify(l))),f.delete(n),f.delete(s),await f.commit(),l}catch(c){throw await ns(),c}}async rotateKeychainPass(e,r){if(typeof e!="string")throw await ns(),new Ze(`Invalid old pass type '${typeof e}'`);if(typeof r!="string")throw await ns(),new Ze(`Invalid new pass type '${typeof r}'`);if(r.length<20)throw await ns(),new Ze(`Invalid pass length ${r.length}`);this.log("recreating keychain");const n=Jm.get(this);if(n==null)throw new Ze("dek missing");const i=n.dek;this.init.pass=r;const s=r!=null&&this.init.dek?.salt!=null?MX(r,this.init.dek.salt,this.init.dek?.iterationCount,this.init.dek?.keyLength,this.init.dek?.hash):"";Jm.set(this,{dek:s});const a=await this.listKeys();for(const o of a){const c=await this.components.datastore.get($d(o.name)),u=nt(c),l=await $Z(u,i),f=s.toString(),d=await LZ(l,f,l.type==="RSA"?"pkcs-8":"libp2p-key"),h=this.components.datastore.batch(),m={name:o.name,id:o.id};h.put($d(o.name),tt(d)),h.put(s1(o.name),tt(JSON.stringify(m))),await h.commit()}this.log("keychain reconstructed")}}function J1e(t={}){return e=>new Jmt(e,t)}class Q1e{memoryStorage;points;duration;blockDuration;execEvenly;execEvenlyMinDelayMs;keyPrefix;constructor(e={}){this.points=e.points??4,this.duration=e.duration??1,this.blockDuration=e.blockDuration??0,this.execEvenly=e.execEvenly??!1,this.execEvenlyMinDelayMs=e.execEvenlyMinDelayMs??this.duration*1e3/this.points,this.keyPrefix=e.keyPrefix??"rlflx",this.memoryStorage=new Qmt}async consume(e,r=1,n={}){const i=this.getKey(e),s=this._getKeySecDuration(n);let a=this.memoryStorage.incrby(i,r,s);if(a.remainingPoints=Math.max(this.points-a.consumedPoints,0),a.consumedPoints>this.points)throw this.blockDuration>0&&a.consumedPoints<=this.points+r&&(a=this.memoryStorage.set(i,a.consumedPoints,this.blockDuration)),new Xlt("Rate limit exceeded",a);if(this.execEvenly&&a.msBeforeNext>0&&!a.isFirstInDuration){let o=Math.ceil(a.msBeforeNext/(a.remainingPoints+2));o<this.execEvenlyMinDelayMs&&(o=a.consumedPoints*this.execEvenlyMinDelayMs),await _0e(o)}return a}penalty(e,r=1,n={}){const i=this.getKey(e),s=this._getKeySecDuration(n),a=this.memoryStorage.incrby(i,r,s);return a.remainingPoints=Math.max(this.points-a.consumedPoints,0),a}reward(e,r=1,n={}){const i=this.getKey(e),s=this._getKeySecDuration(n),a=this.memoryStorage.incrby(i,-r,s);return a.remainingPoints=Math.max(this.points-a.consumedPoints,0),a}block(e,r){const n=r*1e3,i=this.points+1;return this.memoryStorage.set(this.getKey(e),i,r),{remainingPoints:0,msBeforeNext:n===0?-1:n,consumedPoints:i,isFirstInDuration:!1}}set(e,r,n=0){const i=(n>=0?n:this.duration)*1e3;return this.memoryStorage.set(this.getKey(e),r,n),{remainingPoints:0,msBeforeNext:i===0?-1:i,consumedPoints:r,isFirstInDuration:!1}}get(e){const r=this.memoryStorage.get(this.getKey(e));return r!=null&&(r.remainingPoints=Math.max(this.points-r.consumedPoints,0)),r}delete(e){this.memoryStorage.delete(this.getKey(e))}_getKeySecDuration(e){return e?.customDuration!=null&&e.customDuration>=0?e.customDuration:this.duration}getKey(e){return this.keyPrefix.length>0?`${this.keyPrefix}:${e}`:e}parseKey(e){return e.substring(this.keyPrefix.length)}}class Qmt{storage;constructor(){this.storage=new Map}incrby(e,r,n){const i=this.storage.get(e);if(i!=null){const s=i.expiresAt!=null?i.expiresAt.getTime()-new Date().getTime():-1;return i.expiresAt==null||s>0?(i.value+=r,{remainingPoints:0,msBeforeNext:s,consumedPoints:i.value,isFirstInDuration:!1}):this.set(e,r,n)}return this.set(e,r,n)}set(e,r,n){const i=n*1e3,s=this.storage.get(e);s!=null&&clearTimeout(s.timeoutId);const a={value:r,expiresAt:i>0?new Date(Date.now()+i):void 0};return this.storage.set(e,a),i>0&&(a.timeoutId=setTimeout(()=>{this.storage.delete(e)},i),a.timeoutId.unref!=null&&a.timeoutId.unref()),{remainingPoints:0,msBeforeNext:i===0?-1:i,consumedPoints:a.value,isFirstInDuration:!0}}get(e){const r=this.storage.get(e);if(r!=null)return{remainingPoints:0,msBeforeNext:r.expiresAt!=null?r.expiresAt.getTime()-new Date().getTime():-1,consumedPoints:r.value,isFirstInDuration:!1}}delete(e){const r=this.storage.get(e);return r!=null?(r.timeoutId!=null&&clearTimeout(r.timeoutId),this.storage.delete(e),!0):!1}}var Fr;(function(t){t[t.NEW_STREAM=0]="NEW_STREAM",t[t.MESSAGE_RECEIVER=1]="MESSAGE_RECEIVER",t[t.MESSAGE_INITIATOR=2]="MESSAGE_INITIATOR",t[t.CLOSE_RECEIVER=3]="CLOSE_RECEIVER",t[t.CLOSE_INITIATOR=4]="CLOSE_INITIATOR",t[t.RESET_RECEIVER=5]="RESET_RECEIVER",t[t.RESET_INITIATOR=6]="RESET_INITIATOR"})(Fr||(Fr={}));const zM=Object.freeze({0:"NEW_STREAM",1:"MESSAGE_RECEIVER",2:"MESSAGE_INITIATOR",3:"CLOSE_RECEIVER",4:"CLOSE_INITIATOR",5:"RESET_RECEIVER",6:"RESET_INITIATOR"}),jZ=Object.freeze({NEW_STREAM:Fr.NEW_STREAM,MESSAGE:Fr.MESSAGE_INITIATOR,CLOSE:Fr.CLOSE_INITIATOR,RESET:Fr.RESET_INITIATOR}),egt=Object.freeze({MESSAGE:Fr.MESSAGE_RECEIVER,CLOSE:Fr.CLOSE_RECEIVER,RESET:Fr.RESET_RECEIVER}),epe=1<<20,tgt=4<<20;class rgt{_buffer;_headerInfo;_maxMessageSize;_maxUnprocessedMessageQueueSize;constructor(e=epe,r=tgt){this._buffer=new cr,this._headerInfo=null,this._maxMessageSize=e,this._maxUnprocessedMessageQueueSize=r}write(e){if(e==null||e.length===0)return[];if(this._buffer.append(e),this._buffer.byteLength>this._maxUnprocessedMessageQueueSize)throw new On("Unprocessed message queue size too large!");const r=[];for(;this._buffer.length!==0;){if(this._headerInfo==null)try{this._headerInfo=this._decodeHeader(this._buffer)}catch(u){if(u.name==="InvalidMessageError")throw u;break}const{id:n,type:i,length:s,offset:a}=this._headerInfo;if(this._buffer.length-a<s)break;const c={id:n,type:i};(i===Fr.NEW_STREAM||i===Fr.MESSAGE_INITIATOR||i===Fr.MESSAGE_RECEIVER)&&(c.data=this._buffer.sublist(a,a+s)),r.push(c),this._buffer.consume(a+s),this._headerInfo=null}return r}_decodeHeader(e){const{value:r,offset:n}=qZ(e),{value:i,offset:s}=qZ(e,n),a=r&7;if(zM[a]==null)throw new Error(`Invalid type received: ${a}`);if(i>this._maxMessageSize)throw new On("Message size too large");return{id:r>>3,type:a,offset:n+s,length:i}}}const ngt=128,VZ=127;function qZ(t,e=0){let r=0,n=0,i=e,s;const a=t.length;do{if(i>=a||n>49)throw e=0,new RangeError("Could not decode varint");s=t.get(i++),r+=n<28?(s&VZ)<<n:(s&VZ)*Math.pow(2,n),n+=7}while(s>=ngt);return e=i-e,{value:r,offset:e}}const mA=10*1024;class igt{_pool;_poolOffset;constructor(){this._pool=Ea(mA),this._poolOffset=0}write(e,r){const n=this._pool;let i=this._poolOffset;Ds(e.id<<3|e.type,n,i),i+=vn(e.id<<3|e.type),(e.type===Fr.NEW_STREAM||e.type===Fr.MESSAGE_INITIATOR||e.type===Fr.MESSAGE_RECEIVER)&&e.data!=null?(Ds(e.data.length,n,i),i+=vn(e.data.length)):(Ds(0,n,i),i+=vn(0));const s=n.subarray(this._poolOffset,i);mA-i<100?(this._pool=Ea(mA),this._poolOffset=0):this._poolOffset=i,r.append(s),(e.type===Fr.NEW_STREAM||e.type===Fr.MESSAGE_INITIATOR||e.type===Fr.MESSAGE_RECEIVER)&&e.data!=null&&r.append(e.data)}}const sgt=new igt;async function*agt(t){for await(const e of t){const r=new cr;sgt.write(e,r),yield r}}class ogt extends Error{constructor(e="Stream input buffer error"){super(e),this.name="StreamInputBufferError"}}class cgt extends d_{name;streamId;send;types;maxDataSize;constructor(e){super(e),this.types=e.direction==="outbound"?jZ:egt,this.send=e.send,this.name=e.name,this.streamId=e.streamId,this.maxDataSize=e.maxDataSize}async sendNewStream(){await this.send({id:this.streamId,type:jZ.NEW_STREAM,data:new cr(tt(this.name))})}async sendData(e){for(e=e.sublist();e.byteLength>0;){const r=Math.min(e.byteLength,this.maxDataSize);await this.send({id:this.streamId,type:this.types.MESSAGE,data:e.sublist(0,r)}),e.consume(r)}}async sendReset(){await this.send({id:this.streamId,type:this.types.RESET})}async sendCloseWrite(){await this.send({id:this.streamId,type:this.types.CLOSE})}async sendCloseRead(){}}function lgt(t){const{id:e,name:r,send:n,onEnd:i,type:s="initiator",maxMsgSize:a=epe}=t;return new cgt({id:s==="initiator"?`i${e}`:`r${e}`,streamId:e,name:`${r??e}`,direction:s==="initiator"?"outbound":"inbound",maxDataSize:a,onEnd:i,send:n,log:t.logger.forComponent(`libp2p:mplex:stream:${s}:${e}`)})}const ugt=1024,fgt=1024,dgt=1024*1024*4,hgt=5,pgt=500;function zZ(t){const e={...t,type:`${zM[t.type]} (${t.type})`};return t.type===Fr.NEW_STREAM&&(e.data=nt(t.data instanceof Uint8Array?t.data:t.data.subarray())),(t.type===Fr.MESSAGE_INITIATOR||t.type===Fr.MESSAGE_RECEIVER)&&(e.data=nt(t.data instanceof Uint8Array?t.data:t.data.subarray(),"base16")),e}class mgt{protocol="/mplex/6.7.0";sink;source;log;_streamId;_streams;_init;_source;closeController;rateLimiter;closeTimeout;logger;constructor(e,r){r=r??{},this.log=e.logger.forComponent("libp2p:mplex"),this.logger=e.logger,this._streamId=0,this._streams={initiators:new Map,receivers:new Map},this._init=r,this.closeTimeout=r.closeTimeout??pgt,this.sink=this._createSink(),this._source=Po({objectMode:!0,onEnd:()=>{for(const n of this._streams.initiators.values())n.destroy();for(const n of this._streams.receivers.values())n.destroy()}}),this.source=Un(this._source,n=>agt(n)),this.closeController=new AbortController,this.rateLimiter=new Q1e({points:r.disconnectThreshold??hgt,duration:1})}get streams(){const e=[];for(const r of this._streams.initiators.values())e.push(r);for(const r of this._streams.receivers.values())e.push(r);return e}newStream(e){if(this.closeController.signal.aborted)throw new d1("Muxer already closed");const r=this._streamId++;e=e==null?r.toString():e.toString();const n=this._streams.initiators;return this._newStream({id:r,name:e,type:"initiator",registry:n})}async close(e){if(this.closeController.signal.aborted)return;const r=e?.signal??AbortSignal.timeout(this.closeTimeout);try{await Promise.all(this.streams.map(async n=>n.close({signal:r}))),this._source.end(),await this._source.onEmpty({signal:r}),this.closeController.abort()}catch(n){this.abort(n)}}abort(e){this.closeController.signal.aborted||(this.streams.forEach(r=>{r.abort(e)}),this.closeController.abort(e))}_newReceiverStream(e){const{id:r,name:n}=e,i=this._streams.receivers;return this._newStream({id:r,name:n,type:"receiver",registry:i})}_newStream(e){const{id:r,name:n,type:i,registry:s}=e;if(this.log("new %s stream %s",i,r),i==="initiator"&&this._streams.initiators.size===(this._init.maxOutboundStreams??fgt))throw new QR("Too many outbound streams open");if(s.has(r))throw new Error(`${i} stream ${r} already exists!`);const c=lgt({id:r,name:n,send:async u=>{this.log.enabled&&this.log.trace("%s stream %s send",i,r,zZ(u)),this._source.push(u)},type:i,onEnd:()=>{this.log("%s stream with id %s and protocol %s ended",i,r,c.protocol),s.delete(r),this._init.onStreamEnd!=null&&this._init.onStreamEnd(c)},maxMsgSize:this._init.maxMsgSize,logger:this.logger});return s.set(r,c),c}_createSink(){return async r=>{const n=()=>{s0e(r,this.log)};this.closeController.signal.addEventListener("abort",n);try{const i=new rgt(this._init.maxMsgSize,this._init.maxUnprocessedMessageQueueSize);for await(const s of r)for(const a of i.write(s))await this._handleIncoming(a);this._source.end()}catch(i){this.log("error in sink",i),this._source.end(i)}finally{this.closeController.signal.removeEventListener("abort",n)}}}async _handleIncoming(e){const{id:r,type:n}=e;if(this.log.enabled&&this.log.trace("incoming message",zZ(e)),e.type===Fr.NEW_STREAM){if(this._streams.receivers.size===(this._init.maxInboundStreams??ugt)){this.log("too many inbound streams open"),this._source.push({id:r,type:Fr.RESET_RECEIVER});try{await this.rateLimiter.consume("new-stream",1)}catch{this.log("rate limit hit when opening too many new streams over the inbound stream limit - closing remote connection"),this.abort(new Error("Too many open streams"));return}return}const o=this._newReceiverStream({id:r,name:nt(e.data instanceof Uint8Array?e.data:e.data.subarray())});this._init.onIncomingStream!=null&&this._init.onIncomingStream(o);return}const s=((n&1)===1?this._streams.initiators:this._streams.receivers).get(r);if(s==null){this.log("missing stream %s for message type %s",r,zM[n]);try{await this.rateLimiter.consume("missing-stream",1)}catch{this.log("rate limit hit when receiving messages for streams that do not exist - closing remote connection"),this.abort(new Error("Too many messages for missing streams"));return}return}const a=this._init.maxStreamBufferSize??dgt;try{switch(n){case Fr.MESSAGE_INITIATOR:case Fr.MESSAGE_RECEIVER:if(s.sourceReadableLength()>a)throw this._source.push({id:e.id,type:n===Fr.MESSAGE_INITIATOR?Fr.RESET_RECEIVER:Fr.RESET_INITIATOR}),new ogt("Input buffer full - increase Mplex maxBufferSize to accommodate slow consumers");s.sourcePush(e.data);break;case Fr.CLOSE_INITIATOR:case Fr.CLOSE_RECEIVER:s.remoteCloseWrite();break;case Fr.RESET_INITIATOR:case Fr.RESET_RECEIVER:s.reset();break;default:this.log("unknown message type %s",n)}}catch(o){this.log.error("error while processing message",o),s.abort(o)}}}class ggt{protocol="/mplex/6.7.0";_init;components;constructor(e,r={}){this.components=e,this._init=r}[Symbol.toStringTag]="@libp2p/mplex";[Ui]=["@libp2p/stream-multiplexing"];createStreamMuxer(e={}){return new mgt(this.components,{...e,...this._init})}}function vgt(t={}){return e=>new ggt(e,t)}const gA=32,ygt="1.0.0",bgt="ping",wgt="ipfs",_gt=1e4,xgt=2,Sgt=1;class Egt{protocol;components;started;timeout;maxInboundStreams;maxOutboundStreams;runOnLimitedConnection;log;constructor(e,r={}){this.components=e,this.log=e.logger.forComponent("libp2p:ping"),this.started=!1,this.protocol=`/${r.protocolPrefix??wgt}/${bgt}/${ygt}`,this.timeout=r.timeout??_gt,this.maxInboundStreams=r.maxInboundStreams??xgt,this.maxOutboundStreams=r.maxOutboundStreams??Sgt,this.runOnLimitedConnection=r.runOnLimitedConnection??!0,this.handleMessage=this.handleMessage.bind(this)}[Symbol.toStringTag]="@libp2p/ping";async start(){await this.components.registrar.handle(this.protocol,this.handleMessage,{maxInboundStreams:this.maxInboundStreams,maxOutboundStreams:this.maxOutboundStreams,runOnLimitedConnection:this.runOnLimitedConnection}),this.started=!0}async stop(){await this.components.registrar.unhandle(this.protocol),this.started=!1}isStarted(){return this.started}handleMessage(e){this.log("incoming ping from %p",e.connection.remotePeer);const{stream:r}=e,n=Date.now(),i=B6(r);let s=!1;Promise.resolve().then(async()=>{for(;;){const a=AbortSignal.timeout(this.timeout);a.addEventListener("abort",()=>{r?.abort(new C8("ping timeout"))});const o=await i.read(gA,{signal:a});await i.write(o,{signal:a}),s=!0}}).catch(a=>{s&&a.name==="UnexpectedEOFError"&&r.readStatus!=="ready"||(this.log.error("incoming ping from %p failed with error - %e",e.connection.remotePeer,a),r?.abort(a))}).finally(()=>{const a=Date.now()-n;this.log("incoming ping from %p complete in %dms",e.connection.remotePeer,a);const o=AbortSignal.timeout(this.timeout);r.close({signal:o}).catch(c=>{this.log.error("error closing ping stream from %p - %e",e.connection.remotePeer,c),r?.abort(c)})})}async ping(e,r={}){this.log("pinging %p",e);const n=Date.now(),i=Yf(gA),s=await this.components.connectionManager.openConnection(e,r);let a;if(r.signal==null){const o=AbortSignal.timeout(this.timeout);r={...r,signal:o}}try{a=await s.newStream(this.protocol,{...r,runOnLimitedConnection:this.runOnLimitedConnection});const o=B6(a),[,c]=await Promise.all([o.write(i,r),o.read(gA,r)]),u=Date.now()-n;if(!Tr(i,c.subarray()))throw new y6e(`Received wrong ping ack after ${u}ms`);return this.log("ping %p complete in %dms",s.remotePeer,u),u}catch(o){throw this.log.error("error while pinging %p",s.remotePeer,o),a?.abort(o),o}finally{a!=null&&await a.close(r)}}}function w_(t={}){return e=>new Egt(e,t)}var ca;(function(t){(function(n){n.FIN="FIN",n.STOP_SENDING="STOP_SENDING",n.RESET="RESET",n.FIN_ACK="FIN_ACK"})(t.Flag||(t.Flag={}));let e;(function(n){n[n.FIN=0]="FIN",n[n.STOP_SENDING=1]="STOP_SENDING",n[n.RESET=2]="RESET",n[n.FIN_ACK=3]="FIN_ACK"})(e||(e={})),function(n){n.codec=()=>ra(e)}(t.Flag||(t.Flag={}));let r;t.codec=()=>(r==null&&(r=Ot((n,i,s={})=>{s.lengthDelimited!==!1&&i.fork(),n.flag!=null&&(i.uint32(8),t.Flag.codec().encode(n.flag,i)),n.message!=null&&(i.uint32(18),i.bytes(n.message)),s.lengthDelimited!==!1&&i.ldelim()},(n,i,s={})=>{const a={},o=i==null?n.len:n.pos+i;for(;n.pos<o;){const c=n.uint32();switch(c>>>3){case 1:{a.flag=t.Flag.codec().decode(n);break}case 2:{a.message=n.bytes();break}default:{n.skipType(c&7);break}}}return a})),r),t.encode=n=>Rt(n,t.codec()),t.decode=(n,i)=>Pt(n,t.codec(),i)})(ca||(ca={}));const kgt=["stun:stun.l.google.com:19302","stun:global.stun.twilio.com:3478","stun:stun.cloudflare.com:3478","stun:stun.services.mozilla.com:3478"],HZ=Array.from("abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890"),Tgt="libp2p+webrtc+v1/",Agt=466,Cgt=2*1024*1024,Igt=30*1e3,__=16*1024;function Pgt(t=__){const e=vn(t-vn(t)),r=1+vn(Object.keys(ca.Flag).length-1),n=1,i=t-e-r-n,s=vn(i);return e+r+n+s}const Rgt=Pgt(),Ogt=5e3,Bgt=5e3,Dgt=3e4,tpe="/webrtc",UP="/webrtc-signaling/0.0.1";var WZ=function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,s;n<i;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return t.concat(s||Array.prototype.slice.call(e))},Mgt=function(){function t(e,r,n){this.name=e,this.version=r,this.os=n,this.type="browser"}return t}(),Ngt=function(){function t(e,r,n,i){this.name=e,this.version=r,this.os=n,this.bot=i,this.type="bot-device"}return t}(),Fgt=function(){function t(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return t}(),Lgt=function(){function t(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return t}(),$gt=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,Ugt=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,GZ=3,jgt=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",$gt]],KZ=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function rpe(t){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new Lgt:typeof navigator<"u"?qgt(navigator.userAgent):Hgt()}function Vgt(t){return t!==""&&jgt.reduce(function(e,r){var n=r[0],i=r[1];if(e)return e;var s=i.exec(t);return!!s&&[n,s]},!1)}function qgt(t){var e=Vgt(t);if(!e)return null;var r=e[0],n=e[1];if(r==="searchbot")return new Fgt;var i=n[1]&&n[1].split(".").join("_").split("_").slice(0,3);i?i.length<GZ&&(i=WZ(WZ([],i,!0),Wgt(GZ-i.length),!0)):i=[];var s=i.join("."),a=zgt(t),o=Ugt.exec(t);return o&&o[1]?new Ngt(r,s,a,o[1]):new Mgt(r,s,a)}function zgt(t){for(var e=0,r=KZ.length;e<r;e++){var n=KZ[e],i=n[0],s=n[1],a=s.exec(t);if(a)return i}return null}function Hgt(){return null}function Wgt(t){for(var e=[],r=0;r<t;r++)e.push("0");return e}const XZ=rpe(),HM=XZ!=null&&XZ.name==="firefox",npe=async function*(){},ipe=async t=>{};function Ggt(t,e,r=Dgt,n){t.readyState==="open"&&Promise.resolve().then(async()=>{if(t.bufferedAmount>0){n.log("%s drain channel with %d buffered bytes",e,t.bufferedAmount);const i=sr();let s=!1;t.bufferedAmountLowThreshold=0;const a=()=>{s||(n.log("%s drain channel closed before drain",e),i.resolve())};t.addEventListener("close",a,{once:!0}),t.addEventListener("bufferedamountlow",()=>{s=!0,t.removeEventListener("close",a),i.resolve()}),await jy(i.promise,{milliseconds:r})}}).then(async()=>{t.readyState==="open"&&t.close()}).catch(i=>{n.log.error("error closing outbound stream",i)})}async function YZ(t){return t=t??{},typeof t=="function"&&(t=await t()),t.iceServers=t.iceServers??kgt.map(e=>({urls:[e]})),t}const Kgt=(t=32)=>Tgt+[...Array(t)].map(()=>HZ.at(Math.floor(Math.random()*HZ.length))).join("");class jP{log;peerConnection;remoteAddr;timeline;metrics;source=npe();sink=ipe;constructor(e,r){this.log=e.logger.forComponent("libp2p:webrtc:maconn"),this.remoteAddr=r.remoteAddr,this.timeline=r.timeline,this.peerConnection=r.peerConnection;const n=this.peerConnection,i=n.connectionState;this.peerConnection.onconnectionstatechange=()=>{this.log.trace("peer connection state change",n.connectionState,"initial state",i),(n.connectionState==="disconnected"||n.connectionState==="failed"||n.connectionState==="closed")&&(this.timeline.close=Date.now())}}async close(e){this.log.trace("closing connection"),this.peerConnection.close(),this.timeline.close=Date.now(),this.metrics?.increment({close:!0})}abort(e){this.log.error("closing connection due to error",e),this.peerConnection.close(),this.timeline.close=Date.now(),this.metrics?.increment({abort:!0})}}class Xgt extends d_{channel;incomingData;maxBufferedAmount;bufferedAmountLowEventTimeout;maxMessageSize;receiveFinAck;finAckTimeout;openTimeout;closeController;constructor(e){const r=e.onEnd;switch(e.onEnd=i=>{this.log.trace("readable and writeable ends closed",this.status),Promise.resolve(async()=>{if(!(this.timeline.abort!=null||this.timeline.reset!==null))try{await jy(this.receiveFinAck.promise,{milliseconds:this.finAckTimeout})}catch(s){this.log.error("error receiving FIN_ACK",s)}}).then(()=>{this.incomingData.end(),this.channel.close(),r?.(i)}).catch(s=>{this.log.error("error ending stream",s)})},super(e),this.channel=e.channel,this.channel.binaryType="arraybuffer",this.incomingData=Po(),this.bufferedAmountLowEventTimeout=e.bufferedAmountLowEventTimeout??Igt,this.maxBufferedAmount=e.maxBufferedAmount??Cgt,this.maxMessageSize=(e.maxMessageSize??__)-Rgt,this.receiveFinAck=sr(),this.finAckTimeout=e.closeTimeout??Ogt,this.openTimeout=e.openTimeout??Bgt,this.closeController=new AbortController,this.channel.readyState){case"open":this.timeline.open=new Date().getTime();break;case"closed":case"closing":(this.timeline.close===void 0||this.timeline.close===0)&&(this.timeline.close=Date.now());break;case"connecting":break;default:throw this.log.error("unknown datachannel state %s",this.channel.readyState),new oC("Unknown datachannel state")}this.channel.onopen=i=>{this.timeline.open=new Date().getTime()},this.channel.onclose=i=>{this.log.trace("received onclose event"),this.closeController.abort(),this.receiveFinAck.resolve(),this.close().catch(s=>{this.log.error("error closing stream after channel closed",s)})},this.channel.onerror=i=>{this.log.trace("received onerror event"),this.closeController.abort();const s=i.error;this.abort(s)},this.channel.onmessage=async i=>{const{data:s}=i;s===null||s.byteLength===0||this.incomingData.push(new Uint8Array(s,0,s.byteLength))};const n=this;Promise.resolve().then(async()=>{for await(const i of Sp(this.incomingData)){const s=n.processIncomingProtobuf(i);s!=null&&n.sourcePush(new cr(s))}}).catch(i=>{this.log.error("error processing incoming data channel messages",i)})}sendNewStream(){}async _sendMessage(e,r=!0){if(this.channel.readyState==="closed"||this.channel.readyState==="closing")throw new oC(`Invalid datachannel state - ${this.channel.readyState}`);if(this.channel.readyState!=="open"){const n=AbortSignal.timeout(this.openTimeout),i=Pr([this.closeController.signal,n]);try{this.log('channel state is "%s" and not "open", waiting for "open" event before sending data',this.channel.readyState),await xo(this.channel,"open",i)}finally{i.clear()}this.log('channel state is now "%s", sending data',this.channel.readyState)}if(r&&this.channel.bufferedAmount>this.maxBufferedAmount){const n=AbortSignal.timeout(this.bufferedAmountLowEventTimeout),i=Pr([this.closeController.signal,n]);try{this.log('channel buffer is %d, wait for "bufferedamountlow" event',this.channel.bufferedAmount),await xo(this.channel,"bufferedamountlow",i)}catch(s){throw n.aborted?new C8(`Timed out waiting for DataChannel buffer to clear after ${this.bufferedAmountLowEventTimeout}ms`):s}finally{i.clear()}}try{this.channel.send(e.subarray())}catch(n){this.log.error("error while sending message",n)}}async sendData(e){for(this.log.trace("-> will send %d bytes",e.byteLength),e=e.sublist();e.byteLength>0;){const r=Math.min(e.byteLength,this.maxMessageSize),n=e.subarray(0,r),i=ca.encode({message:n}),s=xp.single(i);this.log.trace("-> sending message %s",this.channel.readyState),await this._sendMessage(s),this.log.trace("-> sent message %s",this.channel.readyState),e.consume(r)}this.log.trace("-> sent data %s",this.channel.readyState)}async sendReset(){try{await this._sendFlag(ca.Flag.RESET)}catch(e){this.log.error("failed to send reset - %e",e)}}async sendCloseWrite(e){if(this.channel.readyState!=="open"){this.receiveFinAck.resolve();return}if(await this._sendFlag(ca.Flag.FIN)){this.log.trace("awaiting FIN_ACK");try{await Mi(this.receiveFinAck.promise,e?.signal,{errorMessage:"sending close-write was aborted before FIN_ACK was received",errorName:"FinAckNotReceivedError"})}catch(n){this.log.error("failed to await FIN_ACK",n)}}else this.log.trace("sending FIN failed, not awaiting FIN_ACK");this.receiveFinAck.resolve()}async sendCloseRead(){this.channel.readyState==="open"&&await this._sendFlag(ca.Flag.STOP_SENDING)}processIncomingProtobuf(e){const r=ca.decode(e);if(r.flag!==void 0&&(this.log.trace('incoming flag %s, write status "%s", read status "%s"',r.flag,this.writeStatus,this.readStatus),r.flag===ca.Flag.FIN&&(this.remoteCloseWrite(),this.log.trace("sending FIN_ACK"),this._sendFlag(ca.Flag.FIN_ACK).catch(n=>{this.log.error("error sending FIN_ACK immediately",n)})),r.flag===ca.Flag.RESET&&this.reset(),r.flag===ca.Flag.STOP_SENDING&&this.remoteCloseRead(),r.flag===ca.Flag.FIN_ACK&&(this.log.trace("received FIN_ACK"),this.receiveFinAck.resolve())),this.readStatus==="ready")return r.message}async _sendFlag(e){if(this.channel.readyState!=="open")return this.log.trace('not sending flag %s because channel is "%s" and not "open"',this.channel.readyState,e.toString()),!1;this.log.trace("sending flag %s",e.toString());const r=ca.encode({flag:e}),n=xp.single(r);try{return await this._sendMessage(n,!1),!0}catch(i){this.log.error("could not send flag %s - %e",e.toString(),i)}return!1}}function K6(t){const{channel:e,direction:r}=t;return new Xgt({id:r==="inbound"?`i${e.id}`:`r${e.id}`,log:t.logger.forComponent(`libp2p:webrtc:stream:${r}:${e.id}`),...t})}class WM{protocol;peerConnection;bufferedStreams=[];metrics;dataChannelOptions;components;log;constructor(e,r){this.components=e,this.peerConnection=r.peerConnection,this.metrics=r.metrics,this.protocol=r.protocol??tpe,this.dataChannelOptions=r.dataChannelOptions??{},this.log=e.logger.forComponent("libp2p:webrtc:muxerfactory"),this.peerConnection.ondatachannel=({channel:n})=>{if(this.log.trace('incoming early datachannel with channel id %d and label "%s"',n.id),n.label==="init"){this.log.trace("closing early init channel"),n.close();return}const i={},s=K6({channel:n,direction:"inbound",onEnd:a=>{i.onEnd(a)},logger:e.logger,...this.dataChannelOptions});i.stream=s,i.channel=n,i.onEnd=()=>{this.bufferedStreams=this.bufferedStreams.filter(a=>a.stream.id!==s.id)},this.bufferedStreams.push(i)}}createStreamMuxer(e){return new Ygt(this.components,{...e,peerConnection:this.peerConnection,dataChannelOptions:this.dataChannelOptions,metrics:this.metrics,streams:this.bufferedStreams,protocol:this.protocol})}}class Ygt{init;streams;protocol;log;peerConnection;dataChannelOptions;metrics;logger;constructor(e,r){this.init=r,this.log=e.logger.forComponent("libp2p:webrtc:muxer"),this.logger=e.logger,this.streams=r.streams.map(n=>n.stream),this.peerConnection=r.peerConnection,this.protocol=r.protocol??tpe,this.metrics=r.metrics,this.dataChannelOptions=r.dataChannelOptions??{},this.peerConnection.ondatachannel=({channel:n})=>{if(this.log.trace("incoming datachannel with channel id %d",n.id),n.label==="init"){this.log.trace("closing init channel"),n.close();return}const i=n.id,s=K6({channel:n,direction:"inbound",onEnd:()=>{this.#e(s,n),this.log("incoming channel %s ended",i)},logger:this.logger,...this.dataChannelOptions});this.streams.push(s),this.metrics?.increment({incoming_stream:!0}),r?.onIncomingStream?.(s)},this.init.streams.length>0&&queueMicrotask(()=>{this.init.streams.forEach(n=>{n.onEnd=()=>{this.log("incoming early channel %s ended with state %s",n.channel.id,n.channel.readyState),this.#e(n.stream,n.channel)},this.metrics?.increment({incoming_stream:!0}),this.init?.onIncomingStream?.(n.stream)})})}#e(e,r){this.log.trace("stream %s %s %s onEnd",e.direction,e.id,e.protocol),Ggt(r,`${e.direction} ${e.id} ${e.protocol}`,this.dataChannelOptions.drainTimeout,{log:this.log}),this.streams=this.streams.filter(n=>n.id!==e.id),this.metrics?.increment({stream_end:!0}),this.init?.onStreamEnd?.(e)}async close(e){try{await Promise.all(this.streams.map(async r=>r.close(e)))}catch(r){this.abort(r)}}abort(e){for(const r of this.streams)r.abort(e)}source=npe();sink=ipe;newStream(){const e=this.peerConnection.createDataChannel(""),r=e.id;this.log.trace("opened outgoing datachannel with channel id %s",r);const n=K6({channel:e,direction:"outbound",onEnd:()=>{this.#e(n,e),this.log("outgoing channel %s ended",r)},logger:this.logger,...this.dataChannelOptions});return this.streams.push(n),this.metrics?.increment({outgoing_stream:!0}),n}}const spe=globalThis.RTCPeerConnection,ape=globalThis.RTCSessionDescription,Zgt=globalThis.RTCIceCandidate;class k2 extends Error{constructor(e){super(`WebRTC transport error: ${e}`),this.name="WebRTCTransportError"}}class Of extends k2{constructor(e="SDP handshake failed"){super(e),this.name="SDPHandshakeFailedError"}}class Jgt extends k2{constructor(e,r){super(`Invalid fingerprint "${e}" within ${r}`),this.name="WebRTC/InvalidFingerprintError"}}class Qgt extends k2{constructor(e){super(`A method (${e}) was called though it has been intentionally left unimplemented.`),this.name="WebRTC/UnimplementedError"}}class evt extends k2{constructor(e){super(`unsupported hash algorithm code: ${e} please see the codes at https://github.com/multiformats/multicodec/blob/master/table.csv `),this.name="WebRTC/UnsupportedHashAlgorithmError"}}var sc;(function(t){(function(n){n.SDP_OFFER="SDP_OFFER",n.SDP_ANSWER="SDP_ANSWER",n.ICE_CANDIDATE="ICE_CANDIDATE"})(t.Type||(t.Type={}));let e;(function(n){n[n.SDP_OFFER=0]="SDP_OFFER",n[n.SDP_ANSWER=1]="SDP_ANSWER",n[n.ICE_CANDIDATE=2]="ICE_CANDIDATE"})(e||(e={})),function(n){n.codec=()=>ra(e)}(t.Type||(t.Type={}));let r;t.codec=()=>(r==null&&(r=Ot((n,i,s={})=>{s.lengthDelimited!==!1&&i.fork(),n.type!=null&&(i.uint32(8),t.Type.codec().encode(n.type,i)),n.data!=null&&(i.uint32(18),i.string(n.data)),s.lengthDelimited!==!1&&i.ldelim()},(n,i,s={})=>{const a={},o=i==null?n.len:n.pos+i;for(;n.pos<o;){const c=n.uint32();switch(c>>>3){case 1:{a.type=t.Type.codec().decode(n);break}case 2:{a.data=n.string();break}default:{n.skipType(c&7);break}}}return a})),r),t.encode=n=>Rt(n,t.codec()),t.decode=(n,i)=>Pt(n,t.codec(),i)})(sc||(sc={}));const ope=async(t,e,r)=>{try{const n=sr();for(tvt(t,n);;){const i=await Promise.race([n.promise,e.read({signal:r.signal}).catch(()=>{})]);if(i==null){r.signal?.throwIfAborted();break}if(i.type!==sc.Type.ICE_CANDIDATE)throw new On("ICE candidate message expected");const s=JSON.parse(i.data??"null");if(s===""||s===null){r.onProgress?.(new ft("webrtc:end-of-ice-candidates")),r.log.trace("end-of-candidates received");continue}const a=new Zgt(s);r.log.trace("%s received new ICE candidate %o",r.direction,s);try{r.onProgress?.(new ft("webrtc:add-ice-candidate",a.candidate)),await t.addIceCandidate(a)}catch(o){r.log.error("%s bad candidate received",r.direction,s,o)}}}catch(n){if(r.log.error("%s error parsing ICE candidate",r.direction,n),r.signal?.aborted===!0&&GM(t)!=="connected")throw n}};function GM(t){return HM?t.iceConnectionState:t.connectionState}function tvt(t,e){t[HM?"oniceconnectionstatechange":"onconnectionstatechange"]=r=>{switch(GM(t)){case"connected":e.resolve();break;case"failed":case"disconnected":case"closed":e.reject(new nre("RTCPeerConnection was closed"));break}}}async function rvt({rtcConfiguration:t,dataChannel:e,signal:r,metrics:n,multiaddr:i,connectionManager:s,transportManager:a,log:o,logger:c,onProgress:u}){const{baseAddr:l}=svt(i);n?.dialerEvents.increment({open:!0}),o.trace("dialing base address: %a",l);const f=l.getPeerId();if(f==null)throw new Ze("Relay peer was missing");const d=s.getConnections(Ln(f));let h,m=!1;d.length===0?(u?.(new ft("webrtc:dial-relay")),h=await a.dial(l,{signal:r,onProgress:u}),m=!0):(u?.(new ft("webrtc:reuse-relay-connection")),h=d[0]);try{u?.(new ft("webrtc:open-signaling-stream"));const p=await h.newStream(UP,{signal:r,runOnLimitedConnection:!0}),g=ds(p).pb(sc),v=new spe(t),y=new WM({logger:c},{peerConnection:v,dataChannelOptions:e});try{const b=v.createDataChannel("init");v.onicecandidate=({candidate:k})=>{const B=JSON.stringify(k?.toJSON()??null);o.trace("initiator sending ICE candidate %o",k),g.write({type:sc.Type.ICE_CANDIDATE,data:B},{signal:r}).catch(D=>{o.error("error sending ICE candidate",D)})},v.onicecandidateerror=k=>{o.error("initiator ICE candidate error",k)};const _=await v.createOffer().catch(k=>{throw o.error("could not execute createOffer",k),new Of("Failed to set createOffer")});o.trace("initiator send SDP offer %s",_.sdp),u?.(new ft("webrtc:send-sdp-offer")),await g.write({type:sc.Type.SDP_OFFER,data:_.sdp},{signal:r}),await v.setLocalDescription(_).catch(k=>{throw o.error("could not execute setLocalDescription",k),new Of("Failed to set localDescription")}),u?.(new ft("webrtc:read-sdp-answer")),o.trace("initiator read SDP answer");const x=await g.read({signal:r});if(x.type!==sc.Type.SDP_ANSWER)throw new Of("Remote should send an SDP answer");o.trace("initiator received SDP answer %s",x.data);const E=new ape({type:"answer",sdp:x.data});return await v.setRemoteDescription(E).catch(k=>{throw o.error("could not execute setRemoteDescription",k),new Of("Failed to set remoteDescription")}),o.trace("initiator read candidates until connected"),u?.(new ft("webrtc:read-ice-candidates")),await ope(v,g,{direction:"initiator",signal:r,log:o,onProgress:u}),o.trace("initiator connected, closing init channel"),b.close(),u?.(new ft("webrtc:close-signaling-stream")),o.trace("closing signaling channel"),await p.close({signal:r}),o.trace("initiator connected to remote address %s",i),{remoteAddress:i,peerConnection:v,muxerFactory:y}}catch(b){throw o.error("outgoing signaling error",b),v.close(),p.abort(b),b}finally{v.onicecandidate=null,v.onicecandidateerror=null}}finally{if(m)try{await h.close({signal:r})}catch(p){h.abort(p)}}}const ZZ=Dn(xhe.matchers[0],_r("p2p-circuit"));class KM extends oi{transportManager;shutdownController;events;constructor(e,r){super(),this.transportManager=e.transportManager,this.events=e.events,this.shutdownController=r.shutdownController,this.onTransportListening=this.onTransportListening.bind(this)}async listen(){this.events.addEventListener("transport:listening",this.onTransportListening)}onTransportListening(e){e.detail.getAddrs().filter(n=>ZZ.exactMatch(n)).map(n=>n.encapsulate("/webrtc")).length>0&&this.safeDispatchEvent("listening")}getAddrs(){return this.transportManager.getListeners().filter(e=>!(e instanceof KM)).map(e=>e.getAddrs().filter(r=>ZZ.exactMatch(r)).map(r=>r.encapsulate("/webrtc"))).flat()}updateAnnounceAddrs(){}async close(){this.events.removeEventListener("transport:listening",this.onTransportListening),this.shutdownController.abort(),queueMicrotask(()=>{this.safeDispatchEvent("close")})}}async function nvt({peerConnection:t,stream:e,signal:r,connection:n,log:i}){i.trace("new inbound signaling stream");const s=ds(e).pb(sc);try{t.onicecandidate=({candidate:l})=>{const f=JSON.stringify(l?.toJSON()??null);i.trace("recipient sending ICE candidate %s",f),s.write({type:sc.Type.ICE_CANDIDATE,data:f},{signal:r}).catch(d=>{i.error("error sending ICE candidate",d)})},i.trace("recipient read SDP offer");const o=await s.read({signal:r});if(o.type!==sc.Type.SDP_OFFER)throw new Of(`expected message type SDP_OFFER, received: ${o.type??"undefined"} `);i.trace("recipient received SDP offer %s",o.data);const c=new ape({type:"offer",sdp:o.data});await t.setRemoteDescription(c).catch(l=>{throw i.error("could not execute setRemoteDescription",l),new Of("Failed to set remoteDescription")});const u=await t.createAnswer().catch(l=>{throw i.error("could not execute createAnswer",l),new Of("Failed to create answer")});i.trace("recipient send SDP answer %s",u.sdp),await s.write({type:sc.Type.SDP_ANSWER,data:u.sdp},{signal:r}),await t.setLocalDescription(u).catch(l=>{throw i.error("could not execute setLocalDescription",l),new Of("Failed to set localDescription")}),i.trace("recipient read candidates until connected"),await ope(t,s,{direction:"recipient",signal:r,log:i})}catch(o){if(GM(t)!=="connected")throw i.error("error while handling signaling stream from peer %a",n.remoteAddr,o),t.close(),o;i("error while handling signaling stream from peer %a, ignoring as the RTCPeerConnection is already connected",n.remoteAddr,o)}const a=Mt(`/webrtc/p2p/${n.remoteAddr.getPeerId()}`);return i.trace("recipient connected to remote address %s",a),{remoteAddress:a}}class ivt{components;init;log;_started=!1;metrics;shutdownController;constructor(e,r={}){this.components=e,this.init=r,this.log=e.logger.forComponent("libp2p:webrtc"),this.shutdownController=new AbortController,this.shutdownController.signal,e.metrics!=null&&(this.metrics={dialerEvents:e.metrics.registerCounterGroup("libp2p_webrtc_dialer_events_total",{label:"event",help:"Total count of WebRTC dialer events by type"}),listenerEvents:e.metrics.registerCounterGroup("libp2p_webrtc_listener_events_total",{label:"event",help:"Total count of WebRTC listener events by type"})})}[yy]=!0;[Symbol.toStringTag]="@libp2p/webrtc";[Ui]=["@libp2p/transport"];[xu]=["@libp2p/identify","@libp2p/circuit-relay-v2-transport"];isStarted(){return this._started}async start(){await this.components.registrar.handle(UP,e=>{const r=this.components.upgrader.createInboundAbortSignal(this.shutdownController.signal);this._onProtocol(e,r).catch(n=>{this.log.error("failed to handle incoming connect from %p",e.connection.remotePeer,n)}).finally(()=>{r.clear()})},{runOnLimitedConnection:!0}),this._started=!0}async stop(){await this.components.registrar.unhandle(UP),this._started=!1}createListener(e){return new KM(this.components,{shutdownController:this.shutdownController})}listenFilter(e){return e.filter(fP.exactMatch)}dialFilter(e){return this.listenFilter(e)}async dial(e,r){this.log.trace("dialing address: %a",e);const{remoteAddress:n,peerConnection:i,muxerFactory:s}=await rvt({rtcConfiguration:await YZ(this.init.rtcConfiguration),dataChannel:this.init.dataChannel,multiaddr:e,dataChannelOptions:this.init.dataChannel,signal:r.signal,connectionManager:this.components.connectionManager,transportManager:this.components.transportManager,log:this.log,logger:this.components.logger,onProgress:r.onProgress}),a=new jP(this.components,{peerConnection:i,timeline:{open:Date.now()},remoteAddr:n,metrics:this.metrics?.dialerEvents}),o=await r.upgrader.upgradeOutbound(a,{skipProtection:!0,skipEncryption:!0,muxerFactory:s,onProgress:r.onProgress,signal:r.signal});return this._closeOnShutdown(i,a),o}async _onProtocol({connection:e,stream:r},n){const i=new spe(await YZ(this.init.rtcConfiguration)),s=new WM(this.components,{peerConnection:i,dataChannelOptions:this.init.dataChannel});try{const{remoteAddress:a}=await nvt({peerConnection:i,connection:e,stream:r,signal:n,log:this.log});await r.close({signal:n});const o=new jP(this.components,{peerConnection:i,timeline:{open:new Date().getTime()},remoteAddr:a,metrics:this.metrics?.listenerEvents});await this.components.upgrader.upgradeInbound(o,{skipEncryption:!0,skipProtection:!0,muxerFactory:s,signal:n}),this._closeOnShutdown(i,o)}catch(a){throw this.log.error("incoming signaling error",a),i.close(),r.abort(a),a}}_closeOnShutdown(e,r){const n=()=>{r.close().catch(i=>{this.log.error("could not close WebRTCMultiaddrConnection",i)})};this.shutdownController.signal.addEventListener("abort",n),e.addEventListener("close",()=>{this.shutdownController.signal.removeEventListener("abort",n)})}}function svt(t){const e=t.toString().split("/webrtc/");if(e.length!==2)throw new Ze("webrtc protocol was not present in multiaddr");if(!e[0].includes("/p2p-circuit"))throw new Ze("p2p-circuit protocol was not present in multiaddr");let r=Mt(e[0]);const i=Mt("/"+e[1]).getPeerId();if(i==null)throw new Ze("destination peer id was missing");const s=r.protos().pop();if(s===void 0)throw new Ze("invalid multiaddr");return s.name!=="p2p"&&(r=r.encapsulate(`/p2p/${i}`)),{baseAddr:r,peerId:Ln(i)}}class avt extends oi{async listen(){throw new Qgt("WebRTCTransport.createListener")}getAddrs(){return[]}updateAnnounceAddrs(){}async close(){}}const cpe=Object.values(kv).map(t=>t.decoder).reduce((t,e)=>t.or(e)),ovt=/^a=fingerprint:(?:\w+-[0-9]+)\s(?<fingerprint>(:?[0-9a-fA-F]{2})+)$/m;function cvt(t){return t?.match(ovt)?.groups?.fingerprint}function lpe(t){const r=t.stringTuples().filter(n=>n[0]===Agt).map(n=>n[1])[0];if(r===void 0||r==="")throw new Ze(`Couldn't find a certhash component of multiaddr: ${t.toString()}`);return r}function lvt(t){return Zn(cpe.decode(t))}function uvt(t){const e=lvt(lpe(t)),r=dvt(e.code),n=e.digest.reduce((s,a)=>s+a.toString(16).padStart(2,"0"),""),i=n.match(/.{1,2}/g);if(i==null)throw new Jgt(n,t.toString());return`${r} ${i.join(":").toUpperCase()}`}function fvt(t){const e=t.split(":").map(i=>parseInt(i,16)),r=Uint8Array.from(e),n=wu(ci.code,r);return Mt(`/certhash/${AB.encode(n.bytes)}`)}function dvt(t){switch(t){case 17:return"sha-1";case 18:return"sha-256";case 19:return"sha-512";default:throw new evt(t)}}function hvt(t,e){const{host:r,port:n,family:i}=t.toOptions(),s=uvt(t);return{type:"answer",sdp:`v=0
o=- 0 0 IN IP${i} ${r}
s=-
t=0 0
a=ice-lite
m=application ${n} UDP/DTLS/SCTP webrtc-datachannel
c=IN IP${i} ${r}
a=mid:0
a=ice-options:ice2
a=ice-ufrag:${e}
a=ice-pwd:${e}
a=fingerprint:${s}
a=setup:passive
a=sctp-port:5000
a=max-message-size:${__}
a=candidate:1467250027 1 UDP 1467250027 ${r} ${n} typ host
a=end-of-candidates
`}}function pvt(t,e){const{host:r,port:n,family:i}=t.toOptions();return{type:"offer",sdp:`v=0
o=- 0 0 IN IP${i} ${r}
s=-
c=IN IP${i} ${r}
t=0 0
a=ice-options:ice2,trickle
m=application ${n} UDP/DTLS/SCTP webrtc-datachannel
a=mid:0
a=setup:active
a=ice-ufrag:${e}
a=ice-pwd:${e}
a=fingerprint:sha-256 00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00
a=sctp-port:5000
a=max-message-size:${__}
a=candidate:1467250027 1 UDP 1467250027 ${r} ${n} typ host
a=end-of-candidates
`}}function JZ(t,e){if(t.sdp===void 0)throw new Ze("Can't munge a missing SDP");const r=t.sdp.includes(`\r
`)?`\r
`:`
`;return t.sdp=t.sdp.replace(/\na=ice-ufrag:[^\n]*\n/,`
a=ice-ufrag:`+e+r).replace(/\na=ice-pwd:[^\n]*\n/,`
a=ice-pwd:`+e+r),t}const vA=tt("libp2p-webrtc-noise:");function mvt(t,e,r){const n=t.trim().toLowerCase().replaceAll(":",""),i=tt(n,"hex"),s=wu(ci.code,i),a=cpe.decode(lpe(e)),o=vA.byteLength+s.bytes.byteLength+a.byteLength;return qn(r==="server"?[vA,a,s.bytes]:[vA,s.bytes,a],o)}const gvt=HM?"iceconnectionstatechange":"connectionstatechange";async function vvt(t,e,r){const n=t.createDataChannel("",{negotiated:!0,id:0});if(r.role==="client"){r.log.trace("client creating local offer");const d=await t.createOffer();r.log.trace("client created local offer %s",d.sdp);const h=JZ(d,e);r.log.trace("client setting local offer %s",h.sdp),await t.setLocalDescription(h);const m=hvt(r.remoteAddr,e);r.log.trace("client setting server description %s",m.sdp),await t.setRemoteDescription(m)}else{const d=pvt(r.remoteAddr,e);r.log.trace("server setting client %s %s",d.type,d.sdp),await t.setRemoteDescription(d),r.log.trace("server creating local answer");const h=await t.createAnswer();r.log.trace("server created local answer");const m=JZ(h,e);r.log.trace("server setting local description %s",h.sdp),await t.setLocalDescription(m)}if(r.log.trace("%s wait for handshake channel to open",r.role),await xo(n,"open",r.signal),r.log.trace("%s handshake channel opened",r.role),r.role==="server"){const d=t.remoteFingerprint()?.value??"";r.remoteAddr=r.remoteAddr.encapsulate(fvt(d))}const i=cvt(t.localDescription?.sdp);if(i==null)throw new k2("Could not get fingerprint from local description sdp");r.log.trace("%s performing noise handshake",r.role);const s=mvt(i,r.remoteAddr,r.role),a=$0({prologueBytes:s})(r),o=K6({channel:n,direction:"inbound",logger:r.logger,...r.dataChannel??{}}),c={...o,sink:o.sink.bind(o),source:async function*(){for await(const d of o.source)for(const h of d)yield h}()},u=new jP(r,{peerConnection:t,remoteAddr:r.remoteAddr,timeline:{open:Date.now()},metrics:r.events});t.addEventListener(gvt,()=>{switch(t.connectionState){case"failed":case"disconnected":case"closed":u.close().catch(d=>{r.log.error("error closing connection",d),u.abort(d)});break}}),r.events?.increment({peer_connection:!0});const l=new WM(r,{peerConnection:t,metrics:r.events,dataChannelOptions:r.dataChannel});if(r.role==="client")return r.log.trace("%s secure inbound",r.role),await a.secureInbound(c,{remotePeer:r.remotePeerId,signal:r.signal}),r.log.trace("%s upgrade outbound",r.role),r.upgrader.upgradeOutbound(u,{skipProtection:!0,skipEncryption:!0,muxerFactory:l,signal:r.signal});r.log.trace("%s secure outbound",r.role);const f=await a.secureOutbound(c,{remotePeer:r.remotePeerId,signal:r.signal});u.remoteAddr=u.remoteAddr.encapsulate(`/p2p/${f.remotePeer}`),r.log.trace("%s upgrade inbound",r.role),await r.upgrader.upgradeInbound(u,{skipProtection:!0,skipEncryption:!0,muxerFactory:l,signal:r.signal})}async function yvt(t,e,r,n){n==null&&(n=await RTCPeerConnection.generateCertificate({name:"ECDSA",namedCurve:"P-256"}));const i=typeof r=="function"?await r():r;return new RTCPeerConnection({...i??{},certificates:[n]})}class bvt{log;metrics;components;init;constructor(e,r={}){this.log=e.logger.forComponent("libp2p:webrtc-direct"),this.components=e,this.init=r,e.metrics!=null&&(this.metrics={dialerEvents:e.metrics.registerCounterGroup("libp2p_webrtc-direct_dialer_events_total",{label:"event",help:"Total count of WebRTC-direct dial events by type"})})}[yy]=!0;[Symbol.toStringTag]="@libp2p/webrtc-direct";[Ui]=["@libp2p/transport"];async dial(e,r){const n=await this._connect(e,r);return this.log("dialing address: %a",e),n}createListener(e){return new avt(this.components,{...this.init,...e})}listenFilter(e){return e.filter(uP.exactMatch)}dialFilter(e){return this.listenFilter(e)}async _connect(e,r){r.signal.throwIfAborted();let n;const i=e.getPeerId();i!=null&&(n=Ln(i));const s=Kgt(),a=await yvt("client",s,typeof this.init.rtcConfiguration=="function"?await this.init.rtcConfiguration():this.init.rtcConfiguration??{});try{return await Mi(vvt(a,s,{role:"client",log:this.log,logger:this.components.logger,metrics:this.components.metrics,events:this.metrics?.dialerEvents,signal:r.signal,remoteAddr:e,dataChannel:this.init.dataChannel,upgrader:r.upgrader,peerId:this.components.peerId,remotePeerId:n,privateKey:this.components.privateKey}),r.signal)}catch(o){throw a.close(),o}}}function x_(t){return e=>new bvt(e,t)}function S_(t){return e=>new ivt(e,t)}const wvt=async t=>{if(t.readyState>=2)throw new Error("socket closed");t.readyState!==1&&await new Promise((e,r)=>{function n(){t.removeEventListener("open",i),t.removeEventListener("error",s)}function i(){n(),e()}function s(a){n(),r(a.error??new Error(`connect ECONNREFUSED ${t.url}`))}t.addEventListener("open",i),t.addEventListener("error",s)})},_vt=(t,e)=>(e=e??{},e.closeOnEnd=e.closeOnEnd!==!1,async n=>{for await(const i of n){try{await wvt(t)}catch(s){if(s.message==="socket closed")break;throw s}if(t.readyState===t.CLOSING||t.readyState===t.CLOSED)break;t.send(i)}e.closeOnEnd!=null&&t.readyState<=1&&await new Promise((i,s)=>{t.addEventListener("close",a=>{if(a.wasClean||a.code===1006)i();else{const o=Object.assign(new Error("ws error"),{event:a});s(o)}}),setTimeout(()=>{t.close()})})});var a1={},Qm={},QZ;function xvt(){if(QZ)return Qm;QZ=1,Object.defineProperty(Qm,"__esModule",{value:!0});class t{constructor(){this.pullQueue=[],this.pushQueue=[],this.eventHandlers={},this.isPaused=!1,this.isStopped=!1}push(n){if(this.isStopped)return;const i={value:n,done:!1};if(this.pullQueue.length){const s=this.pullQueue.shift();s&&s.resolve(i)}else this.pushQueue.push(Promise.resolve(i)),this.highWaterMark!==void 0&&this.pushQueue.length>=this.highWaterMark&&!this.isPaused&&(this.isPaused=!0,this.eventHandlers.highWater?this.eventHandlers.highWater():console&&console.warn(`EventIterator queue reached ${this.pushQueue.length} items`))}stop(){if(!this.isStopped){this.isStopped=!0,this.remove();for(const n of this.pullQueue)n.resolve({value:void 0,done:!0});this.pullQueue.length=0}}fail(n){if(!this.isStopped)if(this.isStopped=!0,this.remove(),this.pullQueue.length){for(const i of this.pullQueue)i.reject(n);this.pullQueue.length=0}else{const i=Promise.reject(n);i.catch(()=>{}),this.pushQueue.push(i)}}remove(){Promise.resolve().then(()=>{this.removeCallback&&this.removeCallback()})}[Symbol.asyncIterator](){return{next:n=>{const i=this.pushQueue.shift();return i?(this.lowWaterMark!==void 0&&this.pushQueue.length<=this.lowWaterMark&&this.isPaused&&(this.isPaused=!1,this.eventHandlers.lowWater&&this.eventHandlers.lowWater()),i):this.isStopped?Promise.resolve({value:void 0,done:!0}):new Promise((s,a)=>{this.pullQueue.push({resolve:s,reject:a})})},return:()=>(this.isStopped=!0,this.pushQueue.length=0,this.remove(),Promise.resolve({value:void 0,done:!0}))}}}class e{constructor(n,{highWaterMark:i=100,lowWaterMark:s=1}={}){const a=new t;a.highWaterMark=i,a.lowWaterMark=s,a.removeCallback=n({push:o=>a.push(o),stop:()=>a.stop(),fail:o=>a.fail(o),on:(o,c)=>{a.eventHandlers[o]=c}})||(()=>{}),this[Symbol.asyncIterator]=()=>a[Symbol.asyncIterator](),Object.freeze(this)}}return Qm.EventIterator=e,Qm.default=e,Qm}var eJ;function Svt(){if(eJ)return a1;eJ=1,Object.defineProperty(a1,"__esModule",{value:!0});const t=xvt();a1.EventIterator=t.EventIterator;function e(r,n,i){return new t.EventIterator(({push:s})=>(this.addEventListener(r,s,n),()=>this.removeEventListener(r,s,n)),i)}return a1.subscribe=e,a1.default=t.EventIterator,a1}var Evt=Svt();function tJ(t){return t instanceof ArrayBuffer||t?.constructor?.name==="ArrayBuffer"&&typeof t?.byteLength=="number"}const kvt=t=>{t.binaryType="arraybuffer";const e=async()=>{await new Promise((s,a)=>{if(n){s();return}if(i!=null){a(i);return}const o=l=>{t.removeEventListener("open",c),t.removeEventListener("error",u),l()},c=()=>{o(s)},u=l=>{o(()=>{a(l.error??new Error(`connect ECONNREFUSED ${t.url}`))})};t.addEventListener("open",c),t.addEventListener("error",u)})},r=async function*(){const s=new Evt.EventIterator(({push:a,stop:o,fail:c})=>{const u=f=>{let d=null;typeof f.data=="string"&&(d=tt(f.data)),tJ(f.data)&&(d=new Uint8Array(f.data)),f.data instanceof Uint8Array&&(d=f.data),d!=null&&a(d)},l=f=>{c(f.error??new Error("Socket error"))};return t.addEventListener("message",u),t.addEventListener("error",l),t.addEventListener("close",o),()=>{t.removeEventListener("message",u),t.removeEventListener("error",l),t.removeEventListener("close",o)}},{highWaterMark:1/0});await e();for await(const a of s)yield tJ(a)?new Uint8Array(a):a}();let n=t.readyState===1,i;return t.addEventListener("open",()=>{n=!0,i=null}),t.addEventListener("close",()=>{n=!1,i=null}),t.addEventListener("error",s=>{n||(i=s.error??new Error(`connect ECONNREFUSED ${t.url}`))}),Object.assign(r,{connected:e})},Tvt=(t,e)=>{e=e??{};const r=kvt(t);let n=e.remoteAddress,i=e.remotePort;if(t.url!=null)try{const a=new URL(t.url);n=a.hostname,i=parseInt(a.port,10)}catch{}if(n==null||i==null)throw new Error("Remote connection did not have address and/or port");return{sink:_vt(t,e),source:r,connected:async()=>{await r.connected()},close:async()=>{(t.readyState===t.CONNECTING||t.readyState===t.OPEN)&&await new Promise(a=>{t.addEventListener("close",()=>{a()}),t.close()})},destroy:()=>{t.terminate!=null?t.terminate():t.close()},remoteAddress:n,remotePort:i,socket:t}},Avt=WebSocket,Cvt={"http:":"ws:","https:":"wss:"},rJ="ws:",Ivt=(t,e)=>{if(t.startsWith("//")&&(t=`${e?.protocol??rJ}${t}`),t.startsWith("/")&&e!=null){const n=e.protocol??rJ,i=e.host,s=e.port!=null&&i?.endsWith(`:${e.port}`)!==!0?`:${e.port}`:"";t=`${n}//${i}${s}${t}`}const r=new URL(t);for(const[n,i]of Object.entries(Cvt))r.protocol===n&&(r.protocol=i);return r};function Pvt(t,e){const r=typeof window>"u"?void 0:window.location;e=e??{};const n=Ivt(t,r),i=new Avt(n.toString(),e.websocket);return Tvt(i,e)}function XM(t){return t.filter(e=>I6.exactMatch(e)||ry.exactMatch(e))}function Rvt(){throw new Error("WebSocket Servers can not be created in the browser!")}const Ovt=500;function Bvt(t,e,r){const n=r.logger.forComponent("libp2p:websockets:maconn"),i=r.metrics,s=r.metricPrefix??"",a={log:n,async sink(o){try{await t.sink(async function*(){for await(const c of o)c instanceof Uint8Array?yield c:yield c.subarray()}())}catch(c){c.type!=="aborted"&&n.error(c)}},source:t.source,remoteAddr:e,timeline:{open:Date.now()},async close(o={}){const c=Date.now();if(o.signal==null){const l=AbortSignal.timeout(Ovt);o={...o,signal:l}}const u=()=>{const{host:l,port:f}=a.remoteAddr.toOptions();n("timeout closing stream to %s:%s after %dms, destroying it manually",l,f,Date.now()-c),this.abort(new hl("Socket close timeout"))};o.signal?.addEventListener("abort",u);try{await t.close()}catch(l){n.error("error closing WebSocket gracefully",l),this.abort(l)}finally{o.signal?.removeEventListener("abort",u),a.timeline.close=Date.now()}},abort(o){const{host:c,port:u}=a.remoteAddr.toOptions();n("timeout closing stream to %s:%s due to error",c,u,o),t.destroy(),a.timeline.close=Date.now(),i?.increment({[`${s}error`]:!0})}};return t.socket.addEventListener("close",()=>{i?.increment({[`${s}close`]:!0}),a.timeline.close==null&&(a.timeline.close=Date.now())},{once:!0}),a}class Dvt{log;init;logger;metrics;components;constructor(e,r={}){this.log=e.logger.forComponent("libp2p:websockets"),this.logger=e.logger,this.components=e,this.init=r,e.metrics!=null&&(this.metrics={dialerEvents:e.metrics.registerCounterGroup("libp2p_websockets_dialer_events_total",{label:"event",help:"Total count of WebSockets dialer events by type"})})}[yy]=!0;[Symbol.toStringTag]="@libp2p/websockets";[Ui]=["@libp2p/transport"];async dial(e,r){this.log("dialing %s",e),r=r??{};const n=await this._connect(e,r),i=Bvt(n,e,{logger:this.logger,metrics:this.metrics?.dialerEvents});this.log("new outbound connection %s",i.remoteAddr);const s=await r.upgrader.upgradeOutbound(i,r);return this.log("outbound connection %s upgraded",i.remoteAddr),s}async _connect(e,r){r?.signal?.throwIfAborted();const n=e.toOptions();this.log("dialing %s:%s",n.host,n.port);const i=sr(),s=Pvt(khe(e),this.init);s.socket.addEventListener("error",()=>{const a=new nre(`Could not connect to ${e.toString()}`);this.log.error("connection error:",a),this.metrics?.dialerEvents.increment({error:!0}),i.reject(a)});try{r.onProgress?.(new ft("websockets:open-connection")),await Mi(Promise.race([s.connected(),i.promise]),r.signal)}catch(a){throw r.signal?.aborted&&this.metrics?.dialerEvents.increment({abort:!0}),s.close().catch(o=>{this.log.error("error closing raw socket",o)}),a}return this.log("connected %s",e),this.metrics?.dialerEvents.increment({connect:!0}),s}createListener(e){return Rvt({logger:this.logger,events:this.components.events,metrics:this.components.metrics},{...this.init,...e})}listenFilter(e){return e=Array.isArray(e)?e:[e],this.init?.filter!=null?this.init?.filter(e):XM(e)}dialFilter(e){return this.listenFilter(e)}}function T2(t={}){return e=>new Dvt(e,t)}function Mvt(t,e){const r=e.map((n,i)=>({record:y2(n),index:i}));return r.sort((n,i)=>{const s=n.record.sequence,a=i.record.sequence;if(s>a)return-1;if(s<a)return 1;if(n.record.validityType===dc.ValidityType.EOL&&i.record.validityType===dc.ValidityType.EOL){const o=vP.fromString(n.record.validity).toDate(),c=vP.fromString(i.record.validity).toDate();if(o.getTime()>c.getTime())return-1;if(o.getTime()<c.getTime())return 1}return 0}),r[0].index}const upe="2.8.2",fpe="js-libp2p";function dpe(t,e){return`${t??fpe}/${e??upe} browser/${globalThis.navigator.userAgent}`}const Nvt="5.3.0",Fvt="helia",Lvt={list:["/dnsaddr/bootstrap.libp2p.io/p2p/QmNnooDu7bfjPFoTZYxMNLWUQJyrVwtbZg5gBMjTezGAJN","/dnsaddr/bootstrap.libp2p.io/p2p/QmbLHAnMoJPWSCR5Zhtx6BHJX9KiKNN6tpvbUcqanj75Nb","/dnsaddr/bootstrap.libp2p.io/p2p/QmcZf59bWwK5XFi76CZX8cbJ4BhTzzA3gU1ZjYZcYW3dwt","/dnsaddr/va1.bootstrap.libp2p.io/p2p/12D3KooWKnDdG3iXw9eTFijk3EWSunZcFi54Zka4wmtqtt6rPxc8","/ip4/104.131.131.82/tcp/4001/p2p/QmaCpDMGvV2BGHeYERUEnRQAwe3N8SzbUtfsmvsqQLuvuJ"]};function $vt(t={}){const e=`${Fvt}/${Nvt} ${dpe()}`;return{privateKey:t.privateKey,dns:t.dns,nodeInfo:{userAgent:e},addresses:{listen:["/p2p-circuit","/webrtc"]},transports:[x2(),S_(),x_(),T2()],connectionEncrypters:[$0()],streamMuxers:[w2(),vgt()],peerDiscovery:[_2(Lvt)],services:{autoNAT:h_(),dcutr:g_(),delegatedRouting:()=>Fdt("https://delegated-ipfs.dev",Ldt()),dht:kmt({clientMode:!0,validators:{ipns:jhe},selectors:{ipns:Mvt}}),identify:S2(),identifyPush:v_(),keychain:J1e(t.keychain),ping:w_()}}}async function Uvt(t,e={}){const r=e.selfKey??"self",n=J1e(e)({datastore:t,logger:q5()});let i;return await t.has(new Sn(`/pkcs8/${r}`))?i=await n.exportKey(r):(i=await MB(e.keyType??"Ed25519"),await n.importKey(r,i)),i}const jvt=32,{code:Vvt}=Xt("dnsaddr");class qvt extends Error{constructor(e="Max recursive depth reached"){super(e),this.name="RecursionLimitError"}}const hpe=async function(e,r={}){const n=r.maxRecursiveDepth??jvt;if(n===0)throw new qvt("Max recursive depth reached");const[,i]=e.stringTuples().find(([u])=>u===Vvt)??[],a=await(r?.dns??che()).query(`_dnsaddr.${i}`,{signal:r?.signal,types:[id.TXT]}),o=e.getPeerId(),c=[];for(const u of a.Answer){const l=u.data.replace(/["']/g,"").trim().split("=")[1];if(l==null||o!=null&&!l.includes(o))continue;const f=Mt(l);if(l.startsWith("/dnsaddr")){const d=await f.resolve({...r,maxRecursiveDepth:n-1});c.push(...d.map(h=>h.toString()))}else c.push(f.toString())}return c},zvt={addresses:{listen:[],announce:[],noAnnounce:[],announceFilter:t=>t},connectionManager:{resolvers:{dnsaddr:hpe}},transportManager:{faultTolerance:Wf.FATAL_ALL}};async function Hvt(t){const e=No(zvt,t);if(e.connectionProtector===null&&globalThis.process?.env?.LIBP2P_FORCE_PNET!=null)throw new Ze("Private network is enforced, but no protector was provided");return e}const Wvt=36e5,Gvt=216e5;var ah;(function(t){(function(r){let n;r.codec=()=>(n==null&&(n=Ot((i,s,a={})=>{a.lengthDelimited!==!1&&s.fork(),i.key!=null&&i.key!==""&&(s.uint32(10),s.string(i.key)),i.value!=null&&i.value.byteLength>0&&(s.uint32(18),s.bytes(i.value)),a.lengthDelimited!==!1&&s.ldelim()},(i,s,a={})=>{const o={key:"",value:yr(0)},c=s==null?i.len:i.pos+s;for(;i.pos<c;){const u=i.uint32();switch(u>>>3){case 1:{o.key=i.string();break}case 2:{o.value=i.bytes();break}default:{i.skipType(u&7);break}}}return o})),n),r.encode=i=>Rt(i,r.codec()),r.decode=(i,s)=>Pt(i,r.codec(),s)})(t.Peer$metadataEntry||(t.Peer$metadataEntry={})),function(r){let n;r.codec=()=>(n==null&&(n=Ot((i,s,a={})=>{a.lengthDelimited!==!1&&s.fork(),i.key!=null&&i.key!==""&&(s.uint32(10),s.string(i.key)),i.value!=null&&(s.uint32(18),Y6.codec().encode(i.value,s)),a.lengthDelimited!==!1&&s.ldelim()},(i,s,a={})=>{const o={key:""},c=s==null?i.len:i.pos+s;for(;i.pos<c;){const u=i.uint32();switch(u>>>3){case 1:{o.key=i.string();break}case 2:{o.value=Y6.codec().decode(i,i.uint32(),{limits:a.limits?.value});break}default:{i.skipType(u&7);break}}}return o})),n),r.encode=i=>Rt(i,r.codec()),r.decode=(i,s)=>Pt(i,r.codec(),s)}(t.Peer$tagsEntry||(t.Peer$tagsEntry={}));let e;t.codec=()=>(e==null&&(e=Ot((r,n,i={})=>{if(i.lengthDelimited!==!1&&n.fork(),r.addresses!=null)for(const s of r.addresses)n.uint32(10),X6.codec().encode(s,n);if(r.protocols!=null)for(const s of r.protocols)n.uint32(18),n.string(s);if(r.publicKey!=null&&(n.uint32(34),n.bytes(r.publicKey)),r.peerRecordEnvelope!=null&&(n.uint32(42),n.bytes(r.peerRecordEnvelope)),r.metadata!=null&&r.metadata.size!==0)for(const[s,a]of r.metadata.entries())n.uint32(50),t.Peer$metadataEntry.codec().encode({key:s,value:a},n);if(r.tags!=null&&r.tags.size!==0)for(const[s,a]of r.tags.entries())n.uint32(58),t.Peer$tagsEntry.codec().encode({key:s,value:a},n);r.updated!=null&&(n.uint32(64),n.uint64Number(r.updated)),i.lengthDelimited!==!1&&n.ldelim()},(r,n,i={})=>{const s={addresses:[],protocols:[],metadata:new Map,tags:new Map},a=n==null?r.len:r.pos+n;for(;r.pos<a;){const o=r.uint32();switch(o>>>3){case 1:{if(i.limits?.addresses!=null&&s.addresses.length===i.limits.addresses)throw new rn('Decode error - map field "addresses" had too many elements');s.addresses.push(X6.codec().decode(r,r.uint32(),{limits:i.limits?.addresses$}));break}case 2:{if(i.limits?.protocols!=null&&s.protocols.length===i.limits.protocols)throw new rn('Decode error - map field "protocols" had too many elements');s.protocols.push(r.string());break}case 4:{s.publicKey=r.bytes();break}case 5:{s.peerRecordEnvelope=r.bytes();break}case 6:{if(i.limits?.metadata!=null&&s.metadata.size===i.limits.metadata)throw new Bq('Decode error - map field "metadata" had too many elements');const c=t.Peer$metadataEntry.codec().decode(r,r.uint32());s.metadata.set(c.key,c.value);break}case 7:{if(i.limits?.tags!=null&&s.tags.size===i.limits.tags)throw new Bq('Decode error - map field "tags" had too many elements');const c=t.Peer$tagsEntry.codec().decode(r,r.uint32(),{limits:{value:i.limits?.tags$value}});s.tags.set(c.key,c.value);break}case 8:{s.updated=r.uint64Number();break}default:{r.skipType(o&7);break}}}return s})),e),t.encode=r=>Rt(r,t.codec()),t.decode=(r,n)=>Pt(r,t.codec(),n)})(ah||(ah={}));var X6;(function(t){let e;t.codec=()=>(e==null&&(e=Ot((r,n,i={})=>{i.lengthDelimited!==!1&&n.fork(),r.multiaddr!=null&&r.multiaddr.byteLength>0&&(n.uint32(10),n.bytes(r.multiaddr)),r.isCertified!=null&&(n.uint32(16),n.bool(r.isCertified)),r.observed!=null&&(n.uint32(24),n.uint64Number(r.observed)),i.lengthDelimited!==!1&&n.ldelim()},(r,n,i={})=>{const s={multiaddr:yr(0)},a=n==null?r.len:r.pos+n;for(;r.pos<a;){const o=r.uint32();switch(o>>>3){case 1:{s.multiaddr=r.bytes();break}case 2:{s.isCertified=r.bool();break}case 3:{s.observed=r.uint64Number();break}default:{r.skipType(o&7);break}}}return s})),e),t.encode=r=>Rt(r,t.codec()),t.decode=(r,n)=>Pt(r,t.codec(),n)})(X6||(X6={}));var Y6;(function(t){let e;t.codec=()=>(e==null&&(e=Ot((r,n,i={})=>{i.lengthDelimited!==!1&&n.fork(),r.value!=null&&r.value!==0&&(n.uint32(8),n.uint32(r.value)),r.expiry!=null&&(n.uint32(16),n.uint64(r.expiry)),i.lengthDelimited!==!1&&n.ldelim()},(r,n,i={})=>{const s={value:0},a=n==null?r.len:r.pos+n;for(;r.pos<a;){const o=r.uint32();switch(o>>>3){case 1:{s.value=r.uint32();break}case 2:{s.expiry=r.uint64();break}default:{r.skipType(o&7);break}}}return s})),e),t.encode=r=>Rt(r,t.codec()),t.decode=(r,n)=>Pt(r,t.codec(),n)})(Y6||(Y6={}));function Kvt(t,e){if(t.publicKey!=null||e.publicKey==null)return t;let r;if(t.type==="RSA"){const i=$n.decode(`z${t}`);r=Zn(i)}const n=na(e.publicKey,r);return Yh(n)}function VP(t,e,r){const n=ah.decode(e);return qP(t,n,r)}function qP(t,e,r){const n=new Map,i=BigInt(Date.now());for(const[s,a]of e.tags.entries())a.expiry!=null&&a.expiry<i||n.set(s,a);return{...e,id:Kvt(t,e),addresses:e.addresses.filter(({observed:s})=>s!=null&&s>Date.now()-r).map(({multiaddr:s,isCertified:a})=>({multiaddr:Mt(s),isCertified:a??!1})),metadata:e.metadata,peerRecordEnvelope:e.peerRecordEnvelope??void 0,tags:n}}function Xvt(t,e){return Yvt(t.addresses,e.addresses)&&Zvt(t.protocols,e.protocols)&&Jvt(t.publicKey,e.publicKey)&&Qvt(t.peerRecordEnvelope,e.peerRecordEnvelope)&&eyt(t.metadata,e.metadata)&&tyt(t.tags,e.tags)}function Yvt(t,e){return mpe(t,e,(r,n)=>!(r.isCertified!==n.isCertified||!Tr(r.multiaddr,n.multiaddr)))}function Zvt(t,e){return mpe(t,e,(r,n)=>r===n)}function Jvt(t,e){return ppe(t,e)}function Qvt(t,e){return ppe(t,e)}function eyt(t,e){return gpe(t,e,(r,n)=>Tr(r,n))}function tyt(t,e){return gpe(t,e,(r,n)=>r.value===n.value&&r.expiry===n.expiry)}function ppe(t,e){return t==null&&e==null?!0:t!=null&&e!=null?Tr(t,e):!1}function mpe(t,e,r){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(!r(t[n],e[n]))return!1;return!0}function gpe(t,e,r){if(t.size!==e.size)return!1;for(const[n,i]of t.entries()){const s=e.get(n);if(s==null||!r(i,s))return!1}return!0}const vpe="/peers/";function Xw(t){if(!Qte(t)||t.type==null)throw new Ze("Invalid PeerId");const e=t.toCID().toString();return new Sn(`${vpe}${e}`)}async function ryt(t,e,r,n){const i=new Map;for(const s of r){if(s==null)continue;if(s.multiaddr instanceof Uint8Array&&(s.multiaddr=Mt(s.multiaddr)),!r_(s.multiaddr))throw new Ze("Multiaddr was invalid");if(!await e(t,s.multiaddr))continue;const a=s.isCertified??!1,o=s.multiaddr.toString(),c=i.get(o);c!=null?s.isCertified=c.isCertified||a:i.set(o,{multiaddr:s.multiaddr,isCertified:a})}return[...i.values()].sort((s,a)=>s.multiaddr.toString().localeCompare(a.multiaddr.toString())).map(({isCertified:s,multiaddr:a})=>({isCertified:s,multiaddr:a.bytes}))}async function yA(t,e,r,n){if(e==null)throw new Ze("Invalid PeerData");if(e.publicKey!=null&&t.publicKey!=null&&!e.publicKey.equals(t.publicKey))throw new Ze("publicKey bytes do not match peer id publicKey bytes");const i=n.existingPeer?.peer;if(i!=null&&!t.equals(i.id))throw new Ze("peer id did not match existing peer id");let s=i?.addresses??[],a=new Set(i?.protocols??[]),o=i?.metadata??new Map,c=i?.tags??new Map,u=i?.peerRecordEnvelope;if(r==="patch"){if((e.multiaddrs!=null||e.addresses!=null)&&(s=[],e.multiaddrs!=null&&s.push(...e.multiaddrs.map(d=>({isCertified:!1,multiaddr:d}))),e.addresses!=null&&s.push(...e.addresses)),e.protocols!=null&&(a=new Set(e.protocols)),e.metadata!=null){const d=e.metadata instanceof Map?[...e.metadata.entries()]:Object.entries(e.metadata);o=Yw(d,{validate:nJ})}if(e.tags!=null){const d=e.tags instanceof Map?[...e.tags.entries()]:Object.entries(e.tags);c=Yw(d,{validate:iJ,map:sJ})}e.peerRecordEnvelope!=null&&(u=e.peerRecordEnvelope)}if(r==="merge"){if(e.multiaddrs!=null&&s.push(...e.multiaddrs.map(d=>({isCertified:!1,multiaddr:d}))),e.addresses!=null&&s.push(...e.addresses),e.protocols!=null&&(a=new Set([...a,...e.protocols])),e.metadata!=null){const d=e.metadata instanceof Map?[...e.metadata.entries()]:Object.entries(e.metadata);for(const[h,m]of d)m==null?o.delete(h):o.set(h,m);o=Yw([...o.entries()],{validate:nJ})}if(e.tags!=null){const d=e.tags instanceof Map?[...e.tags.entries()]:Object.entries(e.tags),h=new Map(c);for(const[m,p]of d)p==null?h.delete(m):h.set(m,p);c=Yw([...h.entries()],{validate:iJ,map:sJ})}e.peerRecordEnvelope!=null&&(u=e.peerRecordEnvelope)}let l;i?.id.publicKey!=null?l=Ya(i.id.publicKey):e.publicKey!=null?l=Ya(e.publicKey):t.publicKey!=null&&(l=Ya(t.publicKey));const f={addresses:await ryt(t,n.addressFilter??(async()=>!0),s,n.existingPeer?.peerPB.addresses),protocols:[...a.values()].sort((d,h)=>d.localeCompare(h)),metadata:o,tags:c,publicKey:l,peerRecordEnvelope:u};return f.addresses.forEach(d=>{d.observed=n.existingPeer?.peerPB.addresses?.find(h=>Tr(h.multiaddr,h.multiaddr))?.observed??Date.now()}),t.type!=="RSA"&&delete f.publicKey,f}function Yw(t,e){const r=new Map;for(const[n,i]of t)i!=null&&e.validate(n,i);for(const[n,i]of t.sort(([s],[a])=>s.localeCompare(a)))i!=null&&r.set(n,e.map?.(n,i)??i);return r}function nJ(t,e){if(typeof t!="string")throw new Ze("Metadata key must be a string");if(!(e instanceof Uint8Array))throw new Ze("Metadata value must be a Uint8Array")}function iJ(t,e){if(typeof t!="string")throw new Ze("Tag name must be a string");if(e.value!=null){if(parseInt(`${e.value}`,10)!==e.value)throw new Ze("Tag value must be an integer");if(e.value<0||e.value>100)throw new Ze("Tag value must be between 0-100")}if(e.ttl!=null){if(parseInt(`${e.ttl}`,10)!==e.ttl)throw new Ze("Tag ttl must be an integer");if(e.ttl<0)throw new Ze("Tag ttl must be between greater than 0")}}function sJ(t,e){let r;return e.expiry!=null&&(r=e.expiry),e.ttl!=null&&(r=BigInt(Date.now()+Number(e.ttl))),{value:e.value??0,expiry:r}}function ype(t){const e=t.toString().split("/")[2],r=mt.parse(e,ma);return gm(r)}function bA(t,e,r){const n=ype(t);return VP(n,e,r)}function nyt(t,e){return{prefix:vpe,filters:(t.filters??[]).map(r=>({key:n,value:i})=>r(bA(n,i,e))),orders:(t.orders??[]).map(r=>(n,i)=>r(bA(n.key,n.value,e),bA(i.key,i.value,e)))}}class iyt{peerId;datastore;lock;addressFilter;log;maxAddressAge;maxPeerAge;constructor(e,r={}){this.log=e.logger.forComponent("libp2p:peer-store"),this.peerId=e.peerId,this.datastore=e.datastore,this.addressFilter=r.addressFilter,this.lock=SM({name:"peer-store",singleProcess:!0}),this.maxAddressAge=r.maxAddressAge??Wvt,this.maxPeerAge=r.maxPeerAge??Gvt}async has(e){try{return await this.load(e),!0}catch(r){if(r.name!=="NotFoundError")throw r}return!1}async delete(e){this.peerId.equals(e)||await this.datastore.delete(Xw(e))}async load(e){const r=Xw(e),n=await this.datastore.get(r),i=ah.decode(n);if(this.#r(e,i))throw await this.datastore.delete(r),new Bs;return qP(e,i,this.peerId.equals(e)?1/0:this.maxAddressAge)}async save(e,r){const n=await this.#e(e),i=await yA(e,r,"patch",{addressFilter:this.addressFilter});return this.#t(e,i,n)}async patch(e,r){const n=await this.#e(e),i=await yA(e,r,"patch",{addressFilter:this.addressFilter,existingPeer:n});return this.#t(e,i,n)}async merge(e,r){const n=await this.#e(e),i=await yA(e,r,"merge",{addressFilter:this.addressFilter,existingPeer:n});return this.#t(e,i,n)}async*all(e){for await(const{key:r,value:n}of this.datastore.query(nyt(e??{},this.maxAddressAge))){const i=ype(r);if(i.equals(this.peerId))continue;const s=ah.decode(n);if(this.#r(i,s)){await this.datastore.delete(r);continue}yield qP(i,s,this.peerId.equals(i)?1/0:this.maxAddressAge)}}async#e(e){try{const r=Xw(e),n=await this.datastore.get(r),i=ah.decode(n);if(this.#r(e,i))throw await this.datastore.delete(r),new Bs;return{peerPB:i,peer:VP(e,n,this.maxAddressAge)}}catch(r){r.name!=="NotFoundError"&&this.log.error("invalid peer data found in peer store - %e",r)}}async#t(e,r,n){r.updated=Date.now();const i=ah.encode(r);return await this.datastore.put(Xw(e),i),{peer:VP(e,i,this.maxAddressAge),previous:n?.peer,updated:n==null||!Xvt(r,n.peerPB)}}#r(e,r){if(r.updated==null)return!0;if(this.peerId.equals(e))return!1;const n=r.updated<Date.now()-this.maxPeerAge,i=Date.now()-this.maxAddressAge,s=r.addresses.filter(a=>a.observed!=null&&a.observed>i);return n&&s.length===0}}class syt{store;events;peerId;log;constructor(e,r={}){this.log=e.logger.forComponent("libp2p:peer-store"),this.events=e.events,this.peerId=e.peerId,this.store=new iyt(e,r)}[Symbol.toStringTag]="@libp2p/peer-store";async forEach(e,r){this.log.trace("forEach await read lock");const n=await this.store.lock.readLock();this.log.trace("forEach got read lock");try{for await(const i of this.store.all(r))e(i)}finally{this.log.trace("forEach release read lock"),n()}}async all(e){this.log.trace("all await read lock");const r=await this.store.lock.readLock();this.log.trace("all got read lock");try{return await zv(this.store.all(e))}finally{this.log.trace("all release read lock"),r()}}async delete(e){this.log.trace("delete await write lock");const r=await this.store.lock.writeLock();this.log.trace("delete got write lock");try{await this.store.delete(e)}finally{this.log.trace("delete release write lock"),r()}}async has(e){this.log.trace("has await read lock");const r=await this.store.lock.readLock();this.log.trace("has got read lock");try{return await this.store.has(e)}finally{this.log.trace("has release read lock"),r()}}async get(e){this.log.trace("get await read lock");const r=await this.store.lock.readLock();this.log.trace("get got read lock");try{return await this.store.load(e)}finally{this.log.trace("get release read lock"),r()}}async save(e,r){this.log.trace("save await write lock");const n=await this.store.lock.writeLock();this.log.trace("save got write lock");try{const i=await this.store.save(e,r);return this.#e(e,i),i.peer}finally{this.log.trace("save release write lock"),n()}}async patch(e,r){this.log.trace("patch await write lock");const n=await this.store.lock.writeLock();this.log.trace("patch got write lock");try{const i=await this.store.patch(e,r);return this.#e(e,i),i.peer}finally{this.log.trace("patch release write lock"),n()}}async merge(e,r){this.log.trace("merge await write lock");const n=await this.store.lock.writeLock();this.log.trace("merge got write lock");try{const i=await this.store.merge(e,r);return this.#e(e,i),i.peer}finally{this.log.trace("merge release write lock"),n()}}async consumePeerRecord(e,r){const n=await hc.openAndCertify(e,Ka.DOMAIN),i=gm(n.publicKey.toCID());if(r?.equals(i)===!1)return this.log("envelope peer id was not the expected peer id - expected: %p received: %p",r,i),!1;const s=Ka.createFromProtobuf(n.payload);let a;try{a=await this.get(i)}catch(o){if(o.name!=="NotFoundError")throw o}if(a?.peerRecordEnvelope!=null){const o=await hc.createFromProtobuf(a.peerRecordEnvelope),c=Ka.createFromProtobuf(o.payload);if(c.seqNumber>=s.seqNumber)return this.log("sequence number was lower or equal to existing sequence number - stored: %d received: %d",c.seqNumber,s.seqNumber),!1}return await this.patch(s.peerId,{peerRecordEnvelope:e,addresses:s.multiaddrs.map(o=>({isCertified:!0,multiaddr:o}))}),!0}#e(e,r){r.updated&&(this.peerId.equals(e)?this.events.safeDispatchEvent("self:peer:update",{detail:r}):this.events.safeDispatchEvent("peer:update",{detail:r}))}}function ayt(t,e={}){return new syt(t,e)}function oyt(t,e){let r;const n=function(){const i=function(){r=void 0,t()};clearTimeout(r),r=setTimeout(i,e)};return n.start=()=>{},n.stop=()=>{clearTimeout(r)},n}const aJ=864e13,cyt=448,wA=449,lyt=53,uyt=54,fyt=55,dyt=56;class hyt{log;mappings;constructor(e,r={}){this.log=e.logger.forComponent("libp2p:address-manager:dns-mappings"),this.mappings=new Map}has(e){const r=this.findHost(e);for(const n of this.mappings.values())if(n.domain===r)return!0;return!1}add(e,r){r.forEach(n=>{this.log("add DNS mapping %s to %s",n,e);const i=kd(n)===!0;this.mappings.set(n,{domain:e,verified:i,expires:i?aJ-Date.now():0,lastVerified:i?aJ-Date.now():void 0})})}remove(e){const r=this.findHost(e);let n=!1;for(const[i,s]of this.mappings.entries())s.domain===r&&(this.log("removing %s to %s DNS mapping %e",i,s.domain,new Error("where")),this.mappings.delete(i),n=n||s.verified);return n}getAll(e){const r=[];for(let n=0;n<e.length;n++){const s=e[n].multiaddr.stringTuples(),a=s[0][1];if(a!=null)for(const[o,c]of this.mappings.entries()){if(a!==o)continue;this.maybeAddSNITuple(s,c.domain)&&(e.splice(n,1),n--,r.push({multiaddr:Mt(`/${s.map(l=>[Xt(l[0]).name,l[1]].join("/")).join("/")}`),verified:c.verified,type:"dns-mapping",expires:c.expires,lastVerified:c.lastVerified}))}}return r}maybeAddSNITuple(e,r){for(let n=0;n<e.length;n++)if(e[n][0]===cyt&&e[n+1]?.[0]!==wA)return e.splice(n+1,0,[wA,r]),!0;return!1}confirm(e,r){const n=this.findHost(e);let i=!1;for(const[s,a]of this.mappings.entries())a.domain===n&&(this.log("marking %s to %s DNS mapping as verified",s,a.domain),i=a.verified,a.verified=!0,a.expires=Date.now()+r,a.lastVerified=Date.now());return i}unconfirm(e,r){const n=this.findHost(e);let i=!1;for(const[s,a]of this.mappings.entries())a.domain===n&&(this.log("removing verification of %s to %s DNS mapping",s,a.domain),i=i||a.verified,a.verified=!1,a.expires=Date.now()+r);return i}findHost(e){for(const r of e.stringTuples())if(r[0]===wA||r[0]===lyt||r[0]===uyt||r[0]===fyt||r[0]===dyt)return r[1]}}const _A=4,xA=41,SA=6,pyt=273;class myt{log;mappings;constructor(e,r={}){this.log=e.logger.forComponent("libp2p:address-manager:ip-mappings"),this.mappings=new Map}has(e){const r=e.stringTuples();for(const n of this.mappings.values())for(const i of n)if(i.externalIp===r[0][1])return!0;return!1}add(e,r,n,i=r,s="tcp"){const a=`${e}-${r}-${s}`,o=this.mappings.get(a)??[],c={internalIp:e,internalPort:r,externalIp:n,externalPort:i,externalFamily:_p(n)?4:6,protocol:s,verified:!1,expires:0};o.push(c),this.mappings.set(a,o)}remove(e){const r=e.stringTuples(),n=r[0][1]??"",i=r[1][0]===SA?"tcp":"udp",s=parseInt(r[1][1]??"0");let a=!1;for(const[o,c]of this.mappings.entries()){for(let u=0;u<c.length;u++){const l=c[u];l.externalIp===n&&l.externalPort===s&&l.protocol===i&&(this.log("removing %s:%s to %s:%s %s IP mapping",l.externalIp,l.externalPort,n,s,i),a=a||l.verified,c.splice(u,1),u--)}c.length===0&&this.mappings.delete(o)}return a}getAll(e){const r=[];for(const{multiaddr:n}of e){const i=n.stringTuples();let s;if((i[0][0]===_A||i[0][0]===xA)&&i[1][0]===SA?s=`${i[0][1]}-${i[1][1]}-tcp`:(i[0][0]===_A||i[0][0]===xA)&&i[1][0]===pyt&&(s=`${i[0][1]}-${i[1][1]}-udp`),s==null)continue;const a=this.mappings.get(s);if(a!=null)for(const o of a)i[0][0]=o.externalFamily===4?_A:xA,i[0][1]=o.externalIp,i[1][1]=`${o.externalPort}`,r.push({multiaddr:Mt(`/${i.map(c=>[Xt(c[0]).name,c[1]].join("/")).join("/")}`),verified:o.verified,type:"ip-mapping",expires:o.expires,lastVerified:o.lastVerified})}return r}confirm(e,r){const i=e.stringTuples()[0][1];let s=!1;for(const a of this.mappings.values())for(const o of a)o.externalIp===i&&(this.log("marking %s to %s IP mapping as verified",o.internalIp,o.externalIp),s=o.verified,o.verified=!0,o.expires=Date.now()+r,o.lastVerified=Date.now());return s}unconfirm(e,r){const n=e.stringTuples(),i=n[0][1]??"",s=n[1][0]===SA?"tcp":"udp",a=parseInt(n[1][1]??"0");let o=!1;for(const c of this.mappings.values())for(let u=0;u<c.length;u++){const l=c[u];l.externalIp===i&&l.externalPort===a&&l.protocol===s&&(this.log("removing verification of %s:%s to %s:%s %s IP mapping",l.externalIp,l.externalPort,i,a,s),o=o||l.verified,l.verified=!1,l.expires=Date.now()+r)}return o}}const gyt=4,vyt=41;function yyt(t){try{const[[e,r]]=t.stringTuples();if(r==null)return!1;if(e===gyt)return r.startsWith("169.254.");if(e===vyt)return r.toLowerCase().startsWith("fe80")}catch{}return!1}const byt={maxObservedAddresses:10};class wyt{log;addresses;maxObservedAddresses;constructor(e,r={}){this.log=e.logger.forComponent("libp2p:address-manager:observed-addresses"),this.addresses=new Map,this.maxObservedAddresses=r.maxObservedAddresses??byt.maxObservedAddresses}has(e){return this.addresses.has(e.toString())}removePrefixed(e){for(const r of this.addresses.keys())r.toString().startsWith(e)&&this.addresses.delete(r)}add(e){this.addresses.size!==this.maxObservedAddresses&&(e0(e)||yyt(e)||(this.log("adding observed address %a",e),this.addresses.set(e.toString(),{verified:!1,expires:0})))}getAll(){return Array.from(this.addresses).map(([e,r])=>({multiaddr:Mt(e),verified:r.verified,type:"observed",expires:r.expires,lastVerified:r.lastVerified}))}remove(e){const r=this.addresses.get(e.toString())?.verified??!1;return this.log("removing observed address %a",e),this.addresses.delete(e.toString()),r}confirm(e,r){const n=e.toString(),i=this.addresses.get(n)??{verified:!1,expires:Date.now()+r,lastVerified:Date.now()},s=i.verified;return i.verified=!0,i.expires=Date.now()+r,i.lastVerified=Date.now(),this.log("marking observed address %a as verified",n),this.addresses.set(n,i),s}}const _yt=4,xyt=41,Syt=53,Eyt=54,kyt=55,Tyt=56,Ayt=[_yt,xyt,Syt,Eyt,kyt,Tyt];function oJ(t){try{const[[e]]=t.stringTuples();return Ayt.includes(e)}catch{}return!1}const Cyt={maxObservedAddresses:10};class Iyt{log;addresses;maxObservedAddresses;constructor(e,r={}){this.log=e.logger.forComponent("libp2p:address-manager:observed-addresses"),this.addresses=new Map,this.maxObservedAddresses=r.maxObservedAddresses??Cyt.maxObservedAddresses}get(e,r){if(e0(e))return{multiaddr:e,verified:!0,type:"transport",expires:Date.now()+r,lastVerified:Date.now()};const n=this.toKey(e);let i=this.addresses.get(n);return i==null&&(i={verified:!oJ(e),expires:0},this.addresses.set(n,i)),{multiaddr:e,verified:i.verified,type:"transport",expires:i.expires,lastVerified:i.lastVerified}}has(e){const r=this.toKey(e);return this.addresses.has(r)}remove(e){const r=this.toKey(e),n=this.addresses.get(r)?.verified??!1;return this.log("removing observed address %a",e),this.addresses.delete(r),n}confirm(e,r){const n=this.toKey(e),i=this.addresses.get(n)??{verified:!1,expires:0,lastVerified:0},s=i.verified;return i.verified=!0,i.expires=Date.now()+r,i.lastVerified=Date.now(),this.addresses.set(n,i),s}unconfirm(e,r){const n=this.toKey(e),i=this.addresses.get(n)??{verified:!1,expires:0},s=i.verified;return i.verified=!1,i.expires=Date.now()+r,this.addresses.set(n,i),s}toKey(e){if(oJ(e)){const r=e.toOptions();return`${r.host}-${r.port}-${r.transport}`}return e.toString()}}const cJ=6e4,lJ={addressVerificationTTL:cJ*10,addressVerificationRetry:cJ*5},Pyt=t=>t;function EA(t,e){const r=t.getPeerId();return r!=null&&Ln(r).equals(e)&&(t=t.decapsulate(Mt(`/p2p/${e.toString()}`))),t}class Ryt{log;components;listen;announce;appendAnnounce;announceFilter;observed;dnsMappings;ipMappings;transportAddresses;observedAddressFilter;addressVerificationTTL;addressVerificationRetry;constructor(e,r={}){const{listen:n=[],announce:i=[],appendAnnounce:s=[]}=r;this.components=e,this.log=e.logger.forComponent("libp2p:address-manager"),this.listen=n.map(a=>a.toString()),this.announce=new Set(i.map(a=>a.toString())),this.appendAnnounce=new Set(s.map(a=>a.toString())),this.observed=new wyt(e,r),this.dnsMappings=new hyt(e,r),this.ipMappings=new myt(e,r),this.transportAddresses=new Iyt(e,r),this.announceFilter=r.announceFilter??Pyt,this.observedAddressFilter=Jh(1024),this.addressVerificationTTL=r.addressVerificationTTL??lJ.addressVerificationTTL,this.addressVerificationRetry=r.addressVerificationRetry??lJ.addressVerificationRetry,this._updatePeerStoreAddresses=oyt(this._updatePeerStoreAddresses.bind(this),1e3),e.events.addEventListener("transport:listening",()=>{this._updatePeerStoreAddresses()}),e.events.addEventListener("transport:close",()=>{this._updatePeerStoreAddresses()})}[Symbol.toStringTag]="@libp2p/address-manager";_updatePeerStoreAddresses(){const e=this.getAddresses().map(r=>r.getPeerId()===this.components.peerId.toString()?r.decapsulate(`/p2p/${this.components.peerId.toString()}`):r);this.components.peerStore.patch(this.components.peerId,{multiaddrs:e}).catch(r=>{this.log.error("error updating addresses",r)})}getListenAddrs(){return Array.from(this.listen).map(e=>Mt(e))}getAnnounceAddrs(){return Array.from(this.announce).map(e=>Mt(e))}getAppendAnnounceAddrs(){return Array.from(this.appendAnnounce).map(e=>Mt(e))}getObservedAddrs(){return this.observed.getAll().map(e=>e.multiaddr)}addObservedAddr(e){const r=e.stringTuples(),n=`${r[0][1]}:${r[1][1]}`;this.observedAddressFilter.has(n)||(this.observedAddressFilter.add(n),e=EA(e,this.components.peerId),!this.ipMappings.has(e)&&(this.dnsMappings.has(e)||this.observed.add(e)))}confirmObservedAddr(e,r){e=EA(e,this.components.peerId);let n=!0;(r?.type==="transport"||this.transportAddresses.has(e))&&!this.transportAddresses.confirm(e,r?.ttl??this.addressVerificationTTL)&&n&&(n=!1),(r?.type==="dns-mapping"||this.dnsMappings.has(e))&&!this.dnsMappings.confirm(e,r?.ttl??this.addressVerificationTTL)&&n&&(n=!1),(r?.type==="ip-mapping"||this.ipMappings.has(e))&&!this.ipMappings.confirm(e,r?.ttl??this.addressVerificationTTL)&&n&&(n=!1),(r?.type==="observed"||this.observed.has(e))&&(this.maybeUpgradeToIPMapping(e)?(this.ipMappings.confirm(e,r?.ttl??this.addressVerificationTTL),n=!1):!this.observed.confirm(e,r?.ttl??this.addressVerificationTTL)&&n&&(n=!1)),n||this._updatePeerStoreAddresses()}removeObservedAddr(e,r){e=EA(e,this.components.peerId),this.observed.has(e)&&this.observed.remove(e),this.transportAddresses.has(e)&&this.transportAddresses.unconfirm(e,r?.ttl??this.addressVerificationRetry),this.dnsMappings.has(e)&&this.dnsMappings.unconfirm(e,r?.ttl??this.addressVerificationRetry),this.ipMappings.has(e)&&this.ipMappings.unconfirm(e,r?.ttl??this.addressVerificationRetry)}getAddresses(){const e=new Set,r=this.getAddressesWithMetadata().filter(n=>{if(!n.verified)return!1;const i=n.multiaddr.toString();return e.has(i)?!1:(e.add(i),!0)}).map(n=>n.multiaddr);return this.announceFilter(r.map(n=>{const i=Mt(n);return i.protos().pop()?.path===!0||i.getPeerId()===this.components.peerId.toString()?i:i.encapsulate(`/p2p/${this.components.peerId.toString()}`)}))}getAddressesWithMetadata(){const e=this.getAnnounceAddrs();if(e.length>0)return this.components.transportManager.getListeners().forEach(n=>{n.updateAnnounceAddrs(e)}),e.map(n=>({multiaddr:n,verified:!0,type:"announce",expires:Date.now()+this.addressVerificationTTL,lastVerified:Date.now()}));let r=[];return r=r.concat(this.components.transportManager.getAddrs().map(n=>this.transportAddresses.get(n,this.addressVerificationTTL))),r=r.concat(this.getAppendAnnounceAddrs().map(n=>({multiaddr:n,verified:!0,type:"announce",expires:Date.now()+this.addressVerificationTTL,lastVerified:Date.now()}))),r=r.concat(this.observed.getAll()),r=r.concat(this.ipMappings.getAll(r)),r=r.concat(this.dnsMappings.getAll(r)),r}addDNSMapping(e,r){this.dnsMappings.add(e,r)}removeDNSMapping(e){this.dnsMappings.remove(Mt(`/dns/${e}`))&&this._updatePeerStoreAddresses()}addPublicAddressMapping(e,r,n,i=r,s="tcp"){this.ipMappings.add(e,r,n,i,s),this.observed.removePrefixed(`/ip${_p(n)?4:6}/${n}/${s}/${i}`)}removePublicAddressMapping(e,r,n,i=r,s="tcp"){this.ipMappings.remove(Mt(`/ip${_p(n)?4:6}/${n}/${s}/${i}`))&&this._updatePeerStoreAddresses()}maybeUpgradeToIPMapping(e){if(this.ipMappings.has(e))return!1;const r=e.toOptions();if(r.family===6||r.host==="127.0.0.1"||kd(r.host)===!0)return!1;const n=this.components.transportManager.getListeners(),i=[s=>ry.exactMatch(s)||I6.exactMatch(s),s=>C6.exactMatch(s),s=>Vft.exactMatch(s)];for(const s of i){if(!s(e))continue;const a=n.filter(u=>u.getAddrs().filter(l=>l.toOptions().family===4&&s(l)).length>0);if(a.length!==1)continue;const o=a[0].getAddrs().filter(u=>u.toOptions().host!=="127.0.0.1").pop();if(o==null)continue;const c=o.toOptions();return this.observed.remove(e),this.ipMappings.add(c.host,c.port,r.host,r.port,r.transport),!0}return!1}}var uJ;(function(t){t.NOT_STARTED_YET="The libp2p node is not started yet",t.NOT_FOUND="Not found"})(uJ||(uJ={}));class Oyt extends Error{constructor(e="Missing service"){super(e),this.name="MissingServiceError"}}class Byt extends Error{constructor(e="Unmet service dependencies"){super(e),this.name="UnmetServiceDependenciesError"}}class kA extends Error{constructor(e="No content routers available"){super(e),this.name="NoContentRoutersError"}}class fJ extends Error{constructor(e="No peer routers available"){super(e),this.name="NoPeerRoutersError"}}class Dyt extends Error{constructor(e="Should not try to find self"){super(e),this.name="QueriedForSelfError"}}class Myt extends Error{constructor(e="Unhandled protocol error"){super(e),this.name="UnhandledProtocolError"}}class Nyt extends Error{constructor(e="Duplicate protocol handler error"){super(e),this.name="DuplicateProtocolHandlerError"}}class dJ extends Error{constructor(e="Dial denied error"){super(e),this.name="DialDeniedError"}}class Fyt extends Error{constructor(e="No transport was configured to listen on this address"){super(e),this.name="UnsupportedListenAddressError"}}class Lyt extends Error{constructor(e="Configured listen addresses could not be listened on"){super(e),this.name="UnsupportedListenAddressesError"}}class $yt extends Error{constructor(e="No valid addresses"){super(e),this.name="NoValidAddressesError"}}class Uyt extends Error{constructor(e="Connection intercepted"){super(e),this.name="ConnectionInterceptedError"}}class jyt extends Error{constructor(e="Connection denied"){super(e),this.name="ConnectionDeniedError"}}class Zw extends Error{constructor(e="Stream is not multiplexed"){super(e),this.name="MuxerUnavailableError"}}class Jw extends Error{constructor(e="Encryption failed"){super(e),this.name="EncryptionFailedError"}}class Vyt extends Error{constructor(e="Transport unavailable"){super(e),this.name="TransportUnavailableError"}}class qyt{components={};_started=!1;constructor(e={}){this.components={};for(const[r,n]of Object.entries(e))this.components[r]=n;this.components.logger==null&&(this.components.logger=q5())}isStarted(){return this._started}async _invokeStartableMethod(e){await Promise.all(Object.values(this.components).filter(r=>eO(r)).map(async r=>{await r[e]?.()}))}async beforeStart(){await this._invokeStartableMethod("beforeStart")}async start(){await this._invokeStartableMethod("start"),this._started=!0}async afterStart(){await this._invokeStartableMethod("afterStart")}async beforeStop(){await this._invokeStartableMethod("beforeStop")}async stop(){await this._invokeStartableMethod("stop"),this._started=!1}async afterStop(){await this._invokeStartableMethod("afterStop")}}const zyt=["metrics","connectionProtector","dns"],Hyt=["components","isStarted","beforeStart","start","afterStart","beforeStop","stop","afterStop","then","_invokeStartableMethod"];function Wyt(t={}){const e=new qyt(t);return new Proxy(e,{get(n,i,s){if(typeof i=="string"&&!Hyt.includes(i)){const a=e.components[i];if(a==null&&!zyt.includes(i))throw new Oyt(`${i} not set`);return a}return Reflect.get(n,i,s)},set(n,i,s){return typeof i=="string"?e.components[i]=s:Reflect.set(n,i,s),!0}})}function Gyt(t){const e={};for(const r of Object.values(t.components))for(const n of Kyt(r))e[n]=!0;for(const r of Object.values(t.components))for(const n of Xyt(r))if(e[n]!==!0)throw new Byt(`Service "${Yyt(r)}" required capability "${n}" but it was not provided by any component, you may need to add additional configuration when creating your node.`)}function Kyt(t){return Array.isArray(t?.[Ui])?t[Ui]:[]}function Xyt(t){return Array.isArray(t?.[xu])?t[xu]:[]}function Yyt(t){return t?.[Symbol.toStringTag]??t?.toString()??"unknown"}const Zyt=4,Jyt=41;function Qyt(t={}){return{denyDialPeer:async()=>!1,denyDialMultiaddr:async e=>{if(ry.matches(e))return!1;const r=e.stringTuples();return r[0][0]===Zyt||r[0][0]===Jyt?!!kd(`${r[0][1]}`):!1},denyInboundConnection:async()=>!1,denyOutboundConnection:async()=>!1,denyInboundEncryptedConnection:async()=>!1,denyOutboundEncryptedConnection:async()=>!1,denyInboundUpgradedConnection:async()=>!1,denyOutboundUpgradedConnection:async()=>!1,filterMultiaddrForPeer:async()=>!0,...t}}function bpe(t){if(Qte(t))return{peerId:t,multiaddrs:[]};Array.isArray(t)||(t=[t]);let e;if(t.length>0){const r=t[0].getPeerId();e=r==null?void 0:Ln(r),t.forEach(n=>{if(!r_(n))throw new T8("Invalid multiaddr");const i=n.getPeerId();if(i==null){if(e!=null)throw new Ze("Multiaddrs must all have the same peer id or have no peer id")}else{const s=Ln(i);if(e?.equals(s)!==!0)throw new Ze("Multiaddrs must all have the same peer id or have no peer id")}})}return{peerId:e,multiaddrs:t}}const e2t=["/ipfs/id/1.0.0","/ipfs/id/push/1.0.0","/libp2p/autonat/1.0.0","/libp2p/dcutr"];async function t2t(t,e){const r=t?.streams?.map(i=>i.protocol)??[],n=e?.closableProtocols??e2t;if(!(r.filter(i=>i!=null&&!n.includes(i)).length>0))try{await t?.close(e)}catch(i){t?.abort(i)}}const wpe=1e4,r2t=1e4,hJ=1e4,_pe=25,n2t=5,i2t=10,s2t=5,a2t="last-dial-failure",o2t="last-dial-success",xpe=500,Spe=100,Epe=50;async function c2t(t,e){let r=!1;for(const i of mM.keys())if(r=t.protoNames().includes(i),r)break;if(!r)return[t];const n=await t.resolve(e);return e.log("resolved %s to",t,n.map(i=>i.toString())),n}function zP(t){try{let e;if(typeof t=="string"?e=Mt(t):e=t,!e.protoNames().includes("ipcidr")){const n=e.protoNames().includes("ip6")?"/ipcidr/128":"/ipcidr/32";e=e.encapsulate(n)}return alt(e)}catch{throw new Error(`Can't convert to IpNet, Invalid multiaddr format: ${t}`)}}const l2t={maxConnections:Spe};class u2t{maxConnections;connectionManager;peerStore;allow;events;log;constructor(e,r={}){this.maxConnections=r.maxConnections??l2t.maxConnections,this.allow=(r.allow??[]).map(n=>zP(n)),this.connectionManager=e.connectionManager,this.peerStore=e.peerStore,this.events=e.events,this.log=e.logger.forComponent("libp2p:connection-manager:connection-pruner"),this.maybePruneConnections=this.maybePruneConnections.bind(this)}start(){this.events.addEventListener("connection:open",this.maybePruneConnections)}stop(){this.events.removeEventListener("connection:open",this.maybePruneConnections)}maybePruneConnections(){this._maybePruneConnections().catch(e=>{this.log.error("error while pruning connections %e",e)})}async _maybePruneConnections(){const e=this.connectionManager.getConnections(),r=e.length;if(this.log("checking max connections limit %d/%d",r,this.maxConnections),r<=this.maxConnections)return;const n=new Ed;for(const o of e){const c=o.remotePeer;if(!n.has(c)){n.set(c,0);try{const u=await this.peerStore.get(c);n.set(c,[...u.tags.values()].reduce((l,f)=>l+f.value,0))}catch(u){u.name!=="NotFoundError"&&this.log.error("error loading peer tags",u)}}}const i=this.sortConnections(e,n),s=Math.max(r-this.maxConnections,0),a=[];for(const o of i)if(this.log("too many connections open - closing a connection to %p",o.remotePeer),this.allow.some(u=>u.contains(o.remoteAddr.nodeAddress().address))||a.push(o),a.length===s)break;await Promise.all(a.map(async o=>{await t2t(o,{signal:AbortSignal.timeout(1e3)})})),this.events.safeDispatchEvent("connection:prune",{detail:a})}sortConnections(e,r){return e.sort((n,i)=>{const s=n.timeline.open,a=i.timeline.open;return s<a?1:s>a?-1:0}).sort((n,i)=>n.direction==="outbound"&&i.direction==="inbound"?1:n.direction==="inbound"&&i.direction==="outbound"?-1:0).sort((n,i)=>n.streams.length>i.streams.length?1:n.streams.length<i.streams.length?-1:0).sort((n,i)=>{const s=r.get(n.remotePeer)??0,a=r.get(i.remotePeer)??0;return s>a?1:s<a?-1:0})}}class f2t extends Zh{constructor(e={}){super({...e,sort:(r,n)=>r.options.priority>n.options.priority?-1:r.options.priority<n.options.priority?1:0})}}function d2t(t){return/^127\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(t)||/^::1$/.test(t)}function pJ(t){if(!c0e(t))return!1;const{address:e}=t.nodeAddress();return d2t(e)}function h2t(t,e){const r=C6.exactMatch(t.multiaddr),n=C6.exactMatch(e.multiaddr);if(r&&!n)return-1;if(!r&&n)return 1;const i=I6.exactMatch(t.multiaddr),s=I6.exactMatch(e.multiaddr);if(i&&!s)return-1;if(!i&&s)return 1;const a=ry.exactMatch(t.multiaddr),o=ry.exactMatch(e.multiaddr);if(a&&!o)return-1;if(!a&&o)return 1;const c=fP.exactMatch(t.multiaddr),u=fP.exactMatch(e.multiaddr);if(c&&!u)return-1;if(!c&&u)return 1;const l=uP.exactMatch(t.multiaddr),f=uP.exactMatch(e.multiaddr);if(l&&!f)return-1;if(!l&&f)return 1;const d=P6.exactMatch(t.multiaddr),h=P6.exactMatch(e.multiaddr);return d&&!h?-1:!d&&h?1:0}function p2t(t,e){const r=pJ(t.multiaddr),n=pJ(e.multiaddr);return r&&!n?1:!r&&n?-1:0}function m2t(t,e){const r=e0(t.multiaddr),n=e0(e.multiaddr);return r&&!n?1:!r&&n?-1:0}function g2t(t,e){return t.isCertified&&!e.isCertified?-1:!t.isCertified&&e.isCertified?1:0}function v2t(t,e){const r=ad.exactMatch(t.multiaddr),n=ad.exactMatch(e.multiaddr);return r&&!n?1:!r&&n?-1:0}function y2t(t){return t.sort(h2t).sort(g2t).sort(v2t).sort(m2t).sort(p2t)}const Qw={maxParallelDials:Epe,maxDialQueueLength:xpe,maxPeerAddrsToDial:_pe,dialTimeout:wpe};class b2t{queue;components;addressSorter;maxPeerAddrsToDial;maxDialQueueLength;dialTimeout;shutDownController;connections;log;constructor(e,r={}){this.addressSorter=r.addressSorter,this.maxPeerAddrsToDial=r.maxPeerAddrsToDial??Qw.maxPeerAddrsToDial,this.maxDialQueueLength=r.maxDialQueueLength??Qw.maxDialQueueLength,this.dialTimeout=r.dialTimeout??Qw.dialTimeout,this.connections=r.connections??new Ed,this.log=e.logger.forComponent("libp2p:connection-manager:dial-queue"),this.components=e,this.shutDownController=new AbortController,this.shutDownController.signal;for(const[n,i]of Object.entries(r.resolvers??{}))mM.set(n,i);this.queue=new f2t({concurrency:r.maxParallelDials??Qw.maxParallelDials,metricName:"libp2p_dial_queue",metrics:e.metrics}),this.queue.addEventListener("error",n=>{n.detail.name!==hl.name&&this.log.error("error in dial queue - %e",n.detail)})}start(){this.shutDownController=new AbortController,this.shutDownController.signal}stop(){this.shutDownController.abort(),this.queue.abort()}async dial(e,r={}){const{peerId:n,multiaddrs:i}=bpe(e),s=Array.from(this.connections.values()).flat().find(o=>r.force===!0?!1:o.remotePeer.equals(n)?!0:i.find(c=>c.equals(o.remoteAddr)));if(s?.status==="open")return this.log("already connected to %a",s.remoteAddr),r.onProgress?.(new ft("dial-queue:already-connected")),s;const a=this.queue.queue.find(o=>{if(n?.equals(o.options.peerId)===!0)return!0;const c=o.options.multiaddrs;if(c==null)return!1;for(const u of i)if(c.has(u.toString()))return!0;return!1});if(a!=null){this.log("joining existing dial target for %p",n);for(const o of i)a.options.multiaddrs.add(o.toString());return r.onProgress?.(new ft("dial-queue:already-in-dial-queue")),a.join(r)}if(this.queue.size>=this.maxDialQueueLength)throw new Ag("Dial queue is full");return this.log("creating dial target for %p",n,i.map(o=>o.toString())),r.onProgress?.(new ft("dial-queue:add-to-dial-queue")),this.queue.add(async o=>{o.onProgress?.(new ft("dial-queue:start-dial"));const c=Pr([this.shutDownController.signal,o.signal]);try{return await this.dialPeer(o,c)}finally{c.clear()}},{peerId:n,priority:r.priority??kpe,multiaddrs:new Set(i.map(o=>o.toString())),signal:r.signal??AbortSignal.timeout(this.dialTimeout),onProgress:r.onProgress})}async dialPeer(e,r){const n=e.peerId,i=e.multiaddrs,s=new Set;let a=e.multiaddrs.size===0,o=0,c=0;const u=[];for(this.log("starting dial to %p",n);a||i.size>0;){c++,a=!1;const l=[],f=new Set(e.multiaddrs);i.clear(),this.log("calculating addrs to dial %p from %s",n,[...f]);const d=await this.calculateMultiaddrs(n,f,{...e,signal:r});for(const h of d){if(s.has(h.multiaddr.toString())){this.log.trace("skipping previously failed multiaddr %a while dialing %p",h.multiaddr,n);continue}l.push(h)}this.log("%s dial to %p with %s",c===1?"starting":"continuing",n,l.map(h=>h.multiaddr.toString())),e?.onProgress?.(new ft("dial-queue:calculated-addresses",l));for(const h of l){if(o===this.maxPeerAddrsToDial)throw this.log("dialed maxPeerAddrsToDial (%d) addresses for %p, not trying any others",o,e.peerId),new Ag("Peer had more than maxPeerAddrsToDial");o++;try{const m=await this.components.transportManager.dial(h.multiaddr,{...e,signal:r});this.log("dial to %a succeeded",h.multiaddr);try{await this.components.peerStore.merge(m.remotePeer,{multiaddrs:[m.remoteAddr],metadata:{[o2t]:tt(Date.now().toString())}})}catch(p){this.log.error("could not update last dial failure key for %p",n,p)}return m}catch(m){if(this.log.error("dial failed to %a",h.multiaddr,m),s.add(h.multiaddr.toString()),n!=null)try{await this.components.peerStore.merge(n,{metadata:{[a2t]:tt(Date.now().toString())}})}catch(p){this.log.error("could not update last dial failure key for %p",n,p)}if(r.aborted)throw new C8(m.message);u.push(m)}}}throw u.length===1?u[0]:new AggregateError(u,"All multiaddr dials failed")}async calculateMultiaddrs(e,r=new Set,n={}){const i=[...r].map(f=>({multiaddr:Mt(f),isCertified:!1}));if(e!=null){if(this.components.peerId.equals(e))throw new Ag("Tried to dial self");if(await this.components.connectionGater.denyDialPeer?.(e)===!0)throw new dJ("The dial request is blocked by gater.allowDialPeer");if(i.length===0){this.log("loading multiaddrs for %p",e);try{const f=await this.components.peerStore.get(e);i.push(...f.addresses),this.log("loaded multiaddrs for %p",e,i.map(({multiaddr:d})=>d.toString()))}catch(f){if(f.name!=="NotFoundError")throw f}}if(i.length===0){this.log("looking up multiaddrs for %p in the peer routing",e);try{const f=await this.components.peerRouting.findPeer(e,n);this.log("found multiaddrs for %p in the peer routing",e,i.map(({multiaddr:d})=>d.toString())),i.push(...f.multiaddrs.map(d=>({multiaddr:d,isCertified:!1})))}catch(f){f.name==="NoPeerRoutersError"?this.log("no peer routers configured",e):this.log.error("looking up multiaddrs for %p in the peer routing failed - %e",e,f)}}}let s=(await Promise.all(i.map(async f=>{const d=await c2t(f.multiaddr,{dns:this.components.dns,...n,log:this.log});return d.length===1&&d[0].equals(f.multiaddr)?f:d.map(h=>({multiaddr:h,isCertified:!1}))}))).flat();if(e!=null){const f=`/p2p/${e.toString()}`;s=s.map(d=>d.multiaddr.protos().pop()?.path===!0?d:d.multiaddr.getPeerId()==null?{multiaddr:d.multiaddr.encapsulate(f),isCertified:d.isCertified}:d)}const a=s.filter(f=>{if(this.components.transportManager.dialTransportForMultiaddr(f.multiaddr)==null)return!1;const d=f.multiaddr.getPeerId();return e!=null&&d!=null?e.equals(d):!0}),o=new Map;for(const f of a){const d=f.multiaddr.toString(),h=o.get(d);if(h!=null){h.isCertified=h.isCertified||f.isCertified||!1;continue}o.set(d,f)}const c=[...o.values()];if(c.length===0)throw new $yt("The dial request has no valid addresses");const u=[];for(const f of c)this.components.connectionGater.denyDialMultiaddr!=null&&await this.components.connectionGater.denyDialMultiaddr(f.multiaddr)||u.push(f);const l=this.addressSorter==null?y2t(u):u.sort(this.addressSorter);if(l.length===0)throw new dJ("The connection gater denied all addresses in the dial request");return this.log.trace("addresses for %p before filtering",e??"unknown peer",s.map(({multiaddr:f})=>f.toString())),this.log.trace("addresses for %p after filtering",e??"unknown peer",l.map(({multiaddr:f})=>f.toString())),l}async isDialable(e,r={}){Array.isArray(e)||(e=[e]);try{const n=await this.calculateMultiaddrs(void 0,new Set(e.map(i=>i.toString())),r);return r.runOnLimitedConnection===!1?n.find(i=>!ad.matches(i.multiaddr))!=null:!0}catch(n){this.log.trace("error calculating if multiaddr(s) were dialable",n)}return!1}}class w2t{log;queue;started;peerStore;retries;retryInterval;backoffFactor;connectionManager;events;constructor(e,r={}){this.log=e.logger.forComponent("libp2p:reconnect-queue"),this.peerStore=e.peerStore,this.connectionManager=e.connectionManager,this.queue=new nd({concurrency:r.maxParallelReconnects??s2t,metricName:"libp2p_reconnect_queue",metrics:e.metrics}),this.started=!1,this.retries=r.retries??5,this.backoffFactor=r.backoffFactor,this.retryInterval=r.retryInterval,this.events=e.events,e.events.addEventListener("peer:disconnect",n=>{this.maybeReconnect(n.detail).catch(i=>{this.log.error("failed to maybe reconnect to %p - %e",n.detail,i)})})}async maybeReconnect(e){if(!this.started)return;const r=await this.peerStore.get(e);mJ(r)&&(this.queue.has(e)||this.queue.add(async n=>{await Yde(async i=>{if(this.started)try{await this.connectionManager.openConnection(e,{signal:n?.signal})}catch(s){throw this.log("reconnecting to %p attempt %d of %d failed - %e",e,i,this.retries,s),s}},{signal:n?.signal,retries:this.retries,factor:this.backoffFactor,minTimeout:this.retryInterval})},{peerId:e}).catch(async n=>{this.log.error("failed to reconnect to %p - %e",e,n);const i={};[...r.tags.keys()].forEach(s=>{s.startsWith(vy)&&(i[s]=void 0)}),await this.peerStore.merge(e,{tags:i}),this.events.safeDispatchEvent("peer:reconnect-failure",{detail:e})}).catch(async n=>{this.log.error("failed to remove keep-alive tag from %p - %e",e,n)}))}start(){this.started=!0}async afterStart(){Promise.resolve().then(async()=>{const e=await this.peerStore.all({filters:[r=>mJ(r)]});await Promise.all(e.map(async r=>{await this.connectionManager.openConnection(r.id).catch(n=>{this.log.error(n)})}))}).catch(e=>{this.log.error(e)})}stop(){this.started=!1,this.queue.abort()}}function mJ(t){for(const e of t.tags.keys())if(e.startsWith(vy))return!0;return!1}const kpe=50,TA={maxConnections:Spe,inboundConnectionThreshold:n2t,maxIncomingPendingConnections:i2t};class _2t{started;connections;allow;deny;maxIncomingPendingConnections;incomingPendingConnections;outboundPendingConnections;maxConnections;dialQueue;reconnectQueue;connectionPruner;inboundConnectionRateLimiter;peerStore;metrics;events;log;peerId;constructor(e,r={}){if(this.maxConnections=r.maxConnections??TA.maxConnections,this.maxConnections<1)throw new Ze("Connection Manager maxConnections must be greater than 0");this.connections=new Ed,this.started=!1,this.peerId=e.peerId,this.peerStore=e.peerStore,this.metrics=e.metrics,this.events=e.events,this.log=e.logger.forComponent("libp2p:connection-manager"),this.onConnect=this.onConnect.bind(this),this.onDisconnect=this.onDisconnect.bind(this),this.allow=(r.allow??[]).map(n=>zP(n)),this.deny=(r.deny??[]).map(n=>zP(n)),this.incomingPendingConnections=0,this.maxIncomingPendingConnections=r.maxIncomingPendingConnections??TA.maxIncomingPendingConnections,this.outboundPendingConnections=0,this.inboundConnectionRateLimiter=new Q1e({points:r.inboundConnectionThreshold??TA.inboundConnectionThreshold,duration:1}),this.connectionPruner=new u2t({connectionManager:this,peerStore:e.peerStore,events:e.events,logger:e.logger},{maxConnections:this.maxConnections,allow:r.allow?.map(n=>Mt(n))}),this.dialQueue=new b2t(e,{addressSorter:r.addressSorter,maxParallelDials:r.maxParallelDials??Epe,maxDialQueueLength:r.maxDialQueueLength??xpe,maxPeerAddrsToDial:r.maxPeerAddrsToDial??_pe,dialTimeout:r.dialTimeout??wpe,resolvers:r.resolvers??{dnsaddr:hpe},connections:this.connections}),this.reconnectQueue=new w2t({events:e.events,peerStore:e.peerStore,logger:e.logger,connectionManager:this},{retries:r.reconnectRetries,retryInterval:r.reconnectRetryInterval,backoffFactor:r.reconnectBackoffFactor,maxParallelReconnects:r.maxParallelReconnects})}[Symbol.toStringTag]="@libp2p/connection-manager";async start(){this.metrics?.registerMetricGroup("libp2p_connection_manager_connections",{calculate:()=>{const e={inbound:0,"inbound pending":this.incomingPendingConnections,outbound:0,"outbound pending":this.outboundPendingConnections};for(const r of this.connections.values())for(const n of r)e[n.direction]++;return e}}),this.metrics?.registerMetricGroup("libp2p_protocol_streams_total",{label:"protocol",calculate:()=>{const e={};for(const r of this.connections.values())for(const n of r)for(const i of n.streams){const s=`${i.direction} ${i.protocol??"unnegotiated"}`;e[s]=(e[s]??0)+1}return e}}),this.metrics?.registerMetricGroup("libp2p_connection_manager_protocol_streams_per_connection_90th_percentile",{label:"protocol",calculate:()=>{const e={};for(const n of this.connections.values())for(const i of n){const s={};for(const a of i.streams){const o=`${a.direction} ${a.protocol??"unnegotiated"}`;s[o]=(s[o]??0)+1}for(const[a,o]of Object.entries(s))e[a]=e[a]??[],e[a].push(o)}const r={};for(let[n,i]of Object.entries(e)){i=i.sort((a,o)=>a-o);const s=Math.floor(i.length*.9);r[n]=i[s]}return r}}),this.events.addEventListener("connection:open",this.onConnect),this.events.addEventListener("connection:close",this.onDisconnect),await _u(this.dialQueue,this.reconnectQueue,this.connectionPruner),this.started=!0,this.log("started")}async stop(){this.events.removeEventListener("connection:open",this.onConnect),this.events.removeEventListener("connection:close",this.onDisconnect),await dd(this.reconnectQueue,this.dialQueue,this.connectionPruner);const e=[];for(const r of this.connections.values())for(const n of r)e.push((async()=>{try{await n.close()}catch(i){this.log.error(i)}})());this.log("closing %d connections",e.length),await Promise.all(e),this.connections.clear(),this.log("stopped")}getMaxConnections(){return this.maxConnections}onConnect(e){this._onConnect(e).catch(r=>{this.log.error(r)})}async _onConnect(e){const{detail:r}=e;if(!this.started){await r.close();return}if(r.status!=="open")return;const n=r.remotePeer,i=!this.connections.has(n),s=this.connections.get(n)??[];s.push(r),this.connections.set(n,s),n.publicKey!=null&&n.type==="RSA"&&await this.peerStore.patch(n,{publicKey:n.publicKey}),i&&this.events.safeDispatchEvent("peer:connect",{detail:r.remotePeer})}onDisconnect(e){const{detail:r}=e,n=r.remotePeer,s=(this.connections.get(n)??[]).filter(a=>a.id!==r.id);this.connections.set(n,s),s.length===0&&(this.log("onDisconnect remove all connections for peer %p",n),this.connections.delete(n),this.events.safeDispatchEvent("peer:disconnect",{detail:r.remotePeer}))}getConnections(e){if(e!=null)return this.connections.get(e)??[];let r=[];for(const n of this.connections.values())r=r.concat(n);return r}getConnectionsMap(){return this.connections}async openConnection(e,r={}){if(!this.started)throw new cv("Not started");this.outboundPendingConnections++;try{r.signal?.throwIfAborted();const{peerId:n}=bpe(e);if(this.peerId.equals(n))throw new ire("Can not dial self");if(n!=null&&r.force!==!0){this.log("dial %p",n);const o=this.getConnections(n).find(c=>c.limits==null);if(o!=null)return this.log("had an existing non-limited connection to %p",n),r.onProgress?.(new ft("dial-queue:already-connected")),o}const i=await this.dialQueue.dial(e,{...r,priority:r.priority??kpe});if(i.status!=="open")throw new rre("Remote closed connection during opening");let s=this.connections.get(i.remotePeer);s==null&&(s=[],this.connections.set(i.remotePeer,s));let a=!1;for(const o of s)if(o.id===i.id&&(a=!0),r.force!==!0&&o.id!==i.id&&o.remoteAddr.equals(i.remoteAddr))return i.abort(new T8("Duplicate multiaddr connection")),o;return a||s.push(i),i}finally{this.outboundPendingConnections--}}async closeConnections(e,r={}){const n=this.connections.get(e)??[];await Promise.all(n.map(async i=>{try{await i.close(r)}catch(s){i.abort(s)}}))}async acceptIncomingConnection(e){if(this.deny.some(i=>i.contains(e.remoteAddr.nodeAddress().address)))return this.log("connection from %a refused - connection remote address was in deny list",e.remoteAddr),!1;if(this.allow.some(i=>i.contains(e.remoteAddr.nodeAddress().address)))return this.incomingPendingConnections++,!0;if(this.incomingPendingConnections===this.maxIncomingPendingConnections)return this.log("connection from %a refused - incomingPendingConnections exceeded by host",e.remoteAddr),!1;if(e.remoteAddr.isThinWaistAddress()){const i=e.remoteAddr.nodeAddress().address;try{await this.inboundConnectionRateLimiter.consume(i,1)}catch{return this.log("connection from %a refused - inboundConnectionThreshold exceeded by host %s",e.remoteAddr,i),!1}}return this.getConnections().length<this.maxConnections?(this.incomingPendingConnections++,!0):(this.log("connection from %a refused - maxConnections exceeded",e.remoteAddr),!1)}afterUpgradeInbound(){this.incomingPendingConnections--}getDialQueue(){const e={queued:"queued",running:"active",errored:"error",complete:"success"};return this.dialQueue.queue.queue.map(r=>({id:r.id,status:e[r.status],peerId:r.options.peerId,multiaddrs:[...r.options.multiaddrs].map(n=>Mt(n))}))}async isDialable(e,r={}){return this.dialQueue.isDialable(e,r)}}const x2t=1e4,S2t="1.0.0",E2t="ping",k2t="ipfs",gJ=32,T2t=!0;class A2t{protocol;components;log;heartbeatInterval;pingIntervalMs;abortController;timeout;abortConnectionOnPingFailure;constructor(e,r={}){this.components=e,this.protocol=`/${r.protocolPrefix??k2t}/${E2t}/${S2t}`,this.log=e.logger.forComponent("libp2p:connection-monitor"),this.pingIntervalMs=r.pingInterval??x2t,this.abortConnectionOnPingFailure=r.abortConnectionOnPingFailure??T2t,this.timeout=new ay({...r.pingTimeout??{},metrics:e.metrics,metricName:"libp2p_connection_monitor_ping_time_milliseconds"})}[Symbol.toStringTag]="@libp2p/connection-monitor";[Ui]=["@libp2p/connection-monitor"];start(){this.abortController=new AbortController,this.abortController.signal,this.heartbeatInterval=setInterval(()=>{this.components.connectionManager.getConnections().forEach(e=>{Promise.resolve().then(async()=>{let r=Date.now();try{const n=this.timeout.getTimeoutSignal({signal:this.abortController?.signal}),i=await e.newStream(this.protocol,{signal:n,runOnLimitedConnection:!0}),s=B6(i);r=Date.now(),await Promise.all([s.write(Yf(gJ),{signal:n}),s.read(gJ,{signal:n})]),e.rtt=Date.now()-r,await s.unwrap().close({signal:n})}catch(n){if(n.name!=="UnsupportedProtocolError")throw n;e.rtt=(Date.now()-r)/2}}).catch(r=>{this.log.error("error during heartbeat",r),this.abortConnectionOnPingFailure?(this.log.error("aborting connection due to ping failure"),e.abort(r)):this.log("connection ping failed, but not aborting due to abortConnectionOnPingFailure flag")})})},this.pingIntervalMs)}stop(){this.abortController?.abort(),this.heartbeatInterval!=null&&clearInterval(this.heartbeatInterval)}}class C2t{routers;started;components;constructor(e,r){this.routers=r.routers??[],this.started=!1,this.components=e,this.findProviders=e.metrics?.traceFunction("libp2p.contentRouting.findProviders",this.findProviders.bind(this),{optionsIndex:1,getAttributesFromArgs:([n],i)=>({...i,cid:n.toString()}),getAttributesFromYieldedValue:(n,i)=>({...i,providers:[...Array.isArray(i.providers)?i.providers:[],n.id.toString()]})})??this.findProviders,this.provide=e.metrics?.traceFunction("libp2p.contentRouting.provide",this.provide.bind(this),{optionsIndex:1,getAttributesFromArgs:([n],i)=>({...i,cid:n.toString()})})??this.provide,this.cancelReprovide=e.metrics?.traceFunction("libp2p.contentRouting.cancelReprovide",this.cancelReprovide.bind(this),{optionsIndex:1,getAttributesFromArgs:([n],i)=>({...i,cid:n.toString()})})??this.cancelReprovide,this.put=e.metrics?.traceFunction("libp2p.contentRouting.put",this.put.bind(this),{optionsIndex:2,getAttributesFromArgs:([n])=>({key:nt(n,"base36")})})??this.put,this.get=e.metrics?.traceFunction("libp2p.contentRouting.get",this.get.bind(this),{optionsIndex:1,getAttributesFromArgs:([n])=>({key:nt(n,"base36")})})??this.get}[Symbol.toStringTag]="@libp2p/content-routing";isStarted(){return this.started}async start(){this.started=!0}async stop(){this.started=!1}async*findProviders(e,r={}){if(this.routers.length===0)throw new kA("No content routers available");const n=this,i=new fc;for await(const s of Nf(...n.routers.map(a=>a.findProviders(e,r))))s!=null&&(s.multiaddrs.length>0&&await this.components.peerStore.merge(s.id,{multiaddrs:s.multiaddrs}),!i.has(s.id)&&(i.add(s.id),yield s))}async provide(e,r={}){if(this.routers.length===0)throw new kA("No content routers available");await Promise.all(this.routers.map(async n=>{await n.provide(e,r)}))}async cancelReprovide(e,r={}){if(this.routers.length===0)throw new kA("No content routers available");await Promise.all(this.routers.map(async n=>{await n.cancelReprovide(e,r)}))}async put(e,r,n){if(!this.isStarted())throw new cv;await Promise.all(this.routers.map(async i=>{await i.put(e,r,n)}))}async get(e,r){if(!this.isStarted())throw new cv;return Promise.any(this.routers.map(async n=>n.get(e,r)))}}class I2t{log;peerId;peerStore;routers;constructor(e,r={}){this.log=e.logger.forComponent("libp2p:peer-routing"),this.peerId=e.peerId,this.peerStore=e.peerStore,this.routers=r.routers??[],this.findPeer=e.metrics?.traceFunction("libp2p.peerRouting.findPeer",this.findPeer.bind(this),{optionsIndex:1,getAttributesFromArgs:([n],i)=>({...i,peer:n.toString()})})??this.findPeer,this.getClosestPeers=e.metrics?.traceFunction("libp2p.peerRouting.getClosestPeers",this.getClosestPeers.bind(this),{optionsIndex:1,getAttributesFromArgs:([n],i)=>({...i,key:nt(n,"base36")}),getAttributesFromYieldedValue:(n,i)=>({...i,peers:[...Array.isArray(i.peers)?i.peers:[],n.id.toString()]})})??this.getClosestPeers}[Symbol.toStringTag]="@libp2p/peer-routing";async findPeer(e,r){if(this.routers.length===0)throw new fJ("No peer routers available");if(e.toString()===this.peerId.toString())throw new Dyt("Should not try to find self");const n=this,i=Nf(...this.routers.map(s=>async function*(){try{yield await s.findPeer(e,r)}catch(a){n.log.error(a)}}()));for await(const s of i)if(s!=null)return s.multiaddrs.length>0&&await this.peerStore.merge(s.id,{multiaddrs:s.multiaddrs}),s;throw new Bs}async*getClosestPeers(e,r={}){if(this.routers.length===0)throw new fJ("No peer routers available");const n=this,i=Jh(1024);for await(const s of bd(async function*(){const a=Nf(...n.routers.map(o=>o.getClosestPeers(e,r)));for await(let o of a)yield async()=>{if(o.multiaddrs.length===0)try{o=await n.findPeer(o.id,{...r,useCache:!1})}catch(c){n.log.error("could not find peer multiaddrs",c);return}return o}}()))s!=null&&(s.multiaddrs.length>0&&await this.peerStore.merge(s.id,{multiaddrs:s.multiaddrs}),!i.has(s.id.toMultihash().bytes)&&(i.add(s.id.toMultihash().bytes),yield s))}}class P2t extends oi{peerRouting;log;walking;walkers;shutdownController;walkController;needNext;constructor(e){super(),this.log=e.logger.forComponent("libp2p:random-walk"),this.peerRouting=e.peerRouting,this.walkers=0,this.walking=!1,this.shutdownController=new AbortController,this.shutdownController.signal}[Symbol.toStringTag]="@libp2p/random-walk";start(){this.shutdownController=new AbortController,this.shutdownController.signal}stop(){this.shutdownController.abort()}async*walk(e){this.walking||this.startWalk(),this.walkers++;const r=Pr([this.shutdownController.signal,e?.signal]);try{for(;;)this.needNext?.resolve(),this.needNext=sr(),yield(await xo(this,"walk:peer",r,{errorEvent:"walk:error"})).detail}finally{r.clear(),this.walkers--,this.walkers===0&&(this.walkController?.abort(),this.walkController=void 0)}}startWalk(){this.walking=!0,this.walkController=new AbortController,this.walkController.signal;const e=Pr([this.walkController.signal,this.shutdownController.signal]),r=Date.now();let n=0;Promise.resolve().then(async()=>{for(this.log("start walk");this.walkers>0;)try{const i=Yf(32);let s=Date.now();for await(const a of this.peerRouting.getClosestPeers(i,{signal:e}))e.aborted&&this.log("aborting walk"),e.throwIfAborted(),this.log("found peer %p after %dms for %d walkers",a.id,Date.now()-s,this.walkers),n++,this.safeDispatchEvent("walk:peer",{detail:a}),this.walkers===1&&this.needNext!=null&&(this.log("wait for need next"),await Mi(this.needNext.promise,e)),s=Date.now();this.log("walk iteration for %b and %d walkers finished, found %d peers",i,this.walkers,n)}catch(i){this.log.error("random walk errored",i),this.safeDispatchEvent("walk:error",{detail:i})}this.log("no walkers left, ended walk")}).catch(i=>{this.log.error("random walk errored",i)}).finally(()=>{this.log("finished walk, found %d peers after %dms",n,Date.now()-r),this.walking=!1})}}const Tpe=32,Ape=64;class R2t{log;topologies;handlers;components;constructor(e){this.log=e.logger.forComponent("libp2p:registrar"),this.topologies=new Map,this.handlers=new Map,this.components=e,this._onDisconnect=this._onDisconnect.bind(this),this._onPeerUpdate=this._onPeerUpdate.bind(this),this._onPeerIdentify=this._onPeerIdentify.bind(this),this.components.events.addEventListener("peer:disconnect",this._onDisconnect),this.components.events.addEventListener("peer:update",this._onPeerUpdate),this.components.events.addEventListener("peer:identify",this._onPeerIdentify)}[Symbol.toStringTag]="@libp2p/registrar";getProtocols(){return Array.from(new Set([...this.handlers.keys()])).sort()}getHandler(e){const r=this.handlers.get(e);if(r==null)throw new Myt(`No handler registered for protocol ${e}`);return r}getTopologies(e){const r=this.topologies.get(e);return r==null?[]:[...r.values()]}async handle(e,r,n){if(this.handlers.has(e)&&n?.force!==!0)throw new Nyt(`Handler already registered for protocol ${e}`);const i=No.bind({ignoreUndefined:!0})({maxInboundStreams:Tpe,maxOutboundStreams:Ape},n);this.handlers.set(e,{handler:r,options:i}),await this.components.peerStore.merge(this.components.peerId,{protocols:[e]})}async unhandle(e){(Array.isArray(e)?e:[e]).forEach(n=>{this.handlers.delete(n)}),await this.components.peerStore.patch(this.components.peerId,{protocols:this.getProtocols()})}async register(e,r){if(r==null)throw new Ze("invalid topology");const n=`${(Math.random()*1e9).toString(36)}${Date.now()}`;let i=this.topologies.get(e);return i==null&&(i=new Map,this.topologies.set(e,i)),i.set(n,r),n}unregister(e){for(const[r,n]of this.topologies.entries())n.has(e)&&(n.delete(e),n.size===0&&this.topologies.delete(r))}_onDisconnect(e){const r=e.detail;this.components.peerStore.get(r).then(n=>{for(const i of n.protocols){const s=this.topologies.get(i);if(s!=null)for(const a of s.values())a.filter?.has(r)!==!1&&(a.filter?.remove(r),a.onDisconnect?.(r))}}).catch(n=>{n.name!=="NotFoundError"&&this.log.error("could not inform topologies of disconnecting peer %p",r,n)})}_onPeerUpdate(e){const{peer:r,previous:n}=e.detail,i=(n?.protocols??[]).filter(s=>!r.protocols.includes(s));for(const s of i){const a=this.topologies.get(s);if(a!=null)for(const o of a.values())o.filter?.has(r.id)!==!1&&(o.filter?.remove(r.id),o.onDisconnect?.(r.id))}}_onPeerIdentify(e){const r=e.detail.protocols,n=e.detail.connection,i=e.detail.peerId;for(const s of r){const a=this.topologies.get(s);if(a!=null)for(const o of a.values())n.limits!=null&&o.notifyOnLimitedConnection!==!0||o.filter?.has(i)!==!0&&(o.filter?.add(i),o.onConnect?.(i,n))}}}class O2t{log;components;transports;listeners;faultTolerance;started;constructor(e,r={}){this.log=e.logger.forComponent("libp2p:transports"),this.components=e,this.started=!1,this.transports=new Map,this.listeners=hhe({name:"libp2p_transport_manager_listeners",metrics:this.components.metrics}),this.faultTolerance=r.faultTolerance??Wf.FATAL_ALL}[Symbol.toStringTag]="@libp2p/transport-manager";add(e){const r=e[Symbol.toStringTag];if(r==null)throw new Ze("Transport must have a valid tag");if(this.transports.has(r))throw new Ze(`There is already a transport with the tag ${r}`);this.log("adding transport %s",r),this.transports.set(r,e),this.listeners.has(r)||this.listeners.set(r,[])}isStarted(){return this.started}start(){this.started=!0}async afterStart(){const e=this.components.addressManager.getListenAddrs();await this.listen(e)}async stop(){const e=[];for(const[r,n]of this.listeners)for(this.log("closing listeners for %s",r);n.length>0;){const i=n.pop();i!=null&&e.push(i.close())}await Promise.all(e),this.log("all listeners closed");for(const r of this.listeners.keys())this.listeners.set(r,[]);this.started=!1}async dial(e,r){const n=this.dialTransportForMultiaddr(e);if(n==null)throw new Vyt(`No transport available for address ${String(e)}`);return r?.onProgress?.(new ft("transport-manager:selected-transport",n[Symbol.toStringTag])),n.dial(e,{...r,upgrader:this.components.upgrader})}getAddrs(){let e=[];for(const r of this.listeners.values())for(const n of r)e=[...e,...n.getAddrs()];return e}getTransports(){return Array.of(...this.transports.values())}getListeners(){return Array.of(...this.listeners.values()).flat()}dialTransportForMultiaddr(e){for(const r of this.transports.values())if(r.dialFilter([e]).length>0)return r}listenTransportForMultiaddr(e){for(const r of this.transports.values())if(r.listenFilter([e]).length>0)return r}async listen(e){if(!this.isStarted())throw new cv("Not started");if(e==null||e.length===0){this.log("no addresses were provided for listening, this node is dial only");return}const r={errors:new Map,ipv4:{success:0,attempts:0},ipv6:{success:0,attempts:0}};e.forEach(s=>{r.errors.set(s.toString(),new Fyt)});const n=[];for(const[s,a]of this.transports.entries()){const o=a.listenFilter(e);for(const c of o){this.log("creating listener for %s on %a",s,c);const u=a.createListener({upgrader:this.components.upgrader});let l=this.listeners.get(s)??[];l==null&&(l=[],this.listeners.set(s,l)),l.push(u),u.addEventListener("listening",()=>{this.components.events.safeDispatchEvent("transport:listening",{detail:u})}),u.addEventListener("close",()=>{const f=l.findIndex(d=>d===u);l.splice(f,1),this.components.events.safeDispatchEvent("transport:close",{detail:u})}),kY.matches(c)?r.ipv4.attempts++:TY.matches(c)&&r.ipv6.attempts++,n.push(u.listen(c).then(()=>{r.errors.delete(c.toString()),kY.matches(c)&&r.ipv4.success++,TY.matches(c)&&r.ipv6.success++},f=>{throw this.log.error("transport %s could not listen on address %a - %e",s,c,f),r.errors.set(c.toString(),f),f}))}}const i=await Promise.allSettled(n);if(!(i.length>0&&i.every(s=>s.status==="fulfilled"))){if(this.ipv6Unsupported(r)){this.log("all IPv4 addresses succeed but all IPv6 failed");return}if(this.faultTolerance===Wf.NO_FATAL){this.log("failed to listen on any address but fault tolerance allows this");return}throw new Lyt(`Some configured addresses failed to be listened on, you may need to remove one or more listen addresses from your configuration or set \`transportManager.faultTolerance\` to NO_FATAL:
${[...r.errors.entries()].map(([s,a])=>`
  ${s}: ${`${a.stack??a}`.split(`
`).join(`
  `)}
`).join("")}`)}}ipv6Unsupported(e){if(e.ipv4.attempts===0||e.ipv6.attempts===0)return!1;const r=e.ipv4.attempts===e.ipv4.success,n=e.ipv6.success===0;return r&&n}async remove(e){const r=this.listeners.get(e)??[];this.log.trace("removing transport %s",e);const n=[];for(this.log.trace("closing listeners for %s",e);r.length>0;){const i=r.pop();i!=null&&n.push(i.close())}await Promise.all(n),this.transports.delete(e),this.listeners.delete(e)}async removeAll(){const e=[];for(const r of this.transports.keys())e.push(this.remove(r));await Promise.all(e)}}const ha="/multistream/1.0.0",YM=1024,B2t=tt(`
`);async function vg(t,e,r){await t.write(e,r)}async function D2t(t,e,r){await t.writeV(e,r)}async function M2t(t,e){const r=await t.read(e);if(r.byteLength===0||r.get(r.byteLength-1)!==B2t[0])throw e.log.error("Invalid mss message - missing newline",r),new On("Missing newline");return r.sublist(0,-1)}async function U1(t,e){const r=await M2t(t,e);return nt(r.subarray())}async function AA(t,e,r){if(e=Array.isArray(e)?[...e]:[e],e.length===1&&r.negotiateFully===!1)return N2t(t,e[0],r);const n=Ep(t,{...r,maxDataLength:YM}),i=e.shift();if(i==null)throw new Error("At least one protocol must be specified");r.log.trace('select: write ["%s", "%s"]',ha,i);const s=tt(`${ha}
`),a=tt(`${i}
`);await D2t(n,[s,a],r),r.log.trace("select: reading multistream-select header");let o=await U1(n,r);if(r.log.trace('select: read "%s"',o),o===ha&&(r.log.trace("select: reading protocol response"),o=await U1(n,r),r.log.trace('select: read "%s"',o)),o===i)return{stream:n.unwrap(),protocol:i};for(const c of e){r.log.trace('select: write "%s"',c),await vg(n,tt(`${c}
`),r),r.log.trace("select: reading protocol response");const u=await U1(n,r);if(r.log.trace('select: read "%s" for "%s"',u,c),u===c)return{stream:n.unwrap(),protocol:c}}throw new A8("protocol selection failed")}function N2t(t,e,r){const n=t.sink.bind(t),i=t.source;let s=!1,a=!1;const o=sr();let c=!1,u=!1;const l=sr();let f=!1,d=!1;const h=sr(),m=Ep({sink:n,source:i},{...r,maxDataLength:YM});t.sink=async y=>{const{sink:b}=m.unwrap();await b(async function*(){let _=!1;for await(const x of y){if(u&&await l.promise,c)yield x;else{u=!0,r.log.trace('optimistic: write ["%s", "%s", data(%d)] in sink',ha,e,x.byteLength);const E=`${e}
`;yield new cr(Uint8Array.from([19]),tt(`${ha}
`),Ds(E.length),tt(E),x).subarray(),r.log.trace('optimistic: wrote ["%s", "%s", data(%d)] in sink',ha,e,x.byteLength),c=!0,u=!1,l.resolve(),p().catch(k=>{r.log.error("could not finish optimistic protocol negotiation of %s",e,k)})}_=!0}_||await p()}())};async function p(){if(a){r.log.trace("optimistic: already negotiating %s stream",e),await o.promise;return}a=!0;try{c||(r.log.trace("optimistic: doing send protocol for %s stream",e),await g()),f||(r.log.trace("optimistic: doing read protocol for %s stream",e),await v())}finally{a=!1,s=!0,o.resolve()}}async function g(){if(u){await l.promise;return}u=!0;try{r.log.trace('optimistic: write ["%s", "%s", data] in source',ha,e),await m.writeV([tt(`${ha}
`),tt(`${e}
`)]),r.log.trace('optimistic: wrote ["%s", "%s", data] in source',ha,e)}finally{c=!0,u=!1,l.resolve()}}async function v(){if(d){await h.promise;return}d=!0;try{r.log.trace("optimistic: reading multistream select header");let y=await U1(m,r);if(r.log.trace('optimistic: read multistream select header "%s"',y),y===ha&&(y=await U1(m,r)),r.log.trace('optimistic: read protocol "%s", expecting "%s"',y,e),y!==e)throw new A8("protocol selection failed")}finally{f=!0,d=!1,h.resolve()}}if(t.source=async function*(){await p(),r.log.trace('optimistic: reading data from "%s" stream',e),yield*m.unwrap().source}(),t.closeRead!=null){const y=t.closeRead.bind(t);t.closeRead=async b=>{s||await p().catch(_=>{r.log.error("could not negotiate protocol before close read",_)}),await y(b)}}if(t.closeWrite!=null){const y=t.closeWrite.bind(t);t.closeWrite=async b=>{s||await p().catch(_=>{r.log.error("could not negotiate protocol before close write",_)}),await y(b)}}if(t.close!=null){const y=t.close.bind(t);t.close=async b=>{const _=[];u&&_.push(l.promise),d&&_.push(h.promise),_.length>0?await Mi(Promise.all(_),b?.signal):(s=!0,a=!1,o.resolve()),await y(b)}}return{stream:t,protocol:e}}async function CA(t,e,r){e=Array.isArray(e)?e:[e],r.log.trace("handle: available protocols %s",e);const n=Ep(t,{...r,maxDataLength:YM,maxLengthLength:2});for(;;){r.log.trace("handle: reading incoming string");const i=await U1(n,r);if(r.log.trace('handle: read "%s"',i),i===ha){r.log.trace('handle: respond with "%s" for "%s"',ha,i),await vg(n,tt(`${ha}
`),r),r.log.trace('handle: responded with "%s" for "%s"',ha,i);continue}if(e.includes(i))return r.log.trace('handle: respond with "%s" for "%s"',i,i),await vg(n,tt(`${i}
`),r),r.log.trace('handle: responded with "%s" for "%s"',i,i),{stream:n.unwrap(),protocol:i};if(i==="ls"){const s=new cr(...e.map(a=>xp.single(tt(`${a}
`))),tt(`
`));r.log.trace('handle: respond with "%s" for %s',e,i),await vg(n,s,r),r.log.trace('handle: responded with "%s" for %s',e,i);continue}r.log.trace('handle: respond with "na" for "%s"',i),await vg(n,tt(`na
`),r),r.log('handle: responded with "na" for "%s"',i)}}const F2t=500;class L2t{id;remoteAddr;remotePeer;direction;timeline;multiplexer;encryption;status;limits;log;tags;_newStream;_close;_abort;_getStreams;constructor(e){const{remoteAddr:r,remotePeer:n,newStream:i,close:s,abort:a,getStreams:o}=e;this.id=`${parseInt(String(Math.random()*1e9)).toString(36)}${Date.now()}`,this.remoteAddr=r,this.remotePeer=n,this.direction=e.direction,this.status="open",this.timeline=e.timeline,this.multiplexer=e.multiplexer,this.encryption=e.encryption,this.limits=e.limits,this.log=e.logger.forComponent(`libp2p:connection:${this.direction}:${this.id}`),this.remoteAddr.getPeerId()==null&&(this.remoteAddr=this.remoteAddr.encapsulate(`/p2p/${this.remotePeer}`)),this._newStream=i,this._close=s,this._abort=a,this._getStreams=o,this.tags=[]}[Symbol.toStringTag]="Connection";[h6e]=!0;get streams(){return this._getStreams()}async newStream(e,r){if(this.status==="closing")throw new m6e("the connection is being closed");if(this.status==="closed")throw new rre("the connection is closed");if(Array.isArray(e)||(e=[e]),this.limits!=null&&r?.runOnLimitedConnection!==!0)throw new sre("Cannot open protocol stream on limited connection");const n=await this._newStream(e,r);return n.direction="outbound",n}async close(e={}){if(!(this.status==="closed"||this.status==="closing")){if(this.log("closing connection to %a",this.remoteAddr),this.status="closing",e.signal==null){const r=AbortSignal.timeout(F2t);e={...e,signal:r}}try{this.log.trace("closing underlying transport"),await this._close(e),this.log.trace("updating timeline with close time"),this.status="closed",this.timeline.close=Date.now()}catch(r){this.log.error("error encountered during graceful close of connection to %a",this.remoteAddr,r),this.abort(r)}}}abort(e){this.status!=="closed"&&(this.log.error("aborting connection to %a due to error",this.remoteAddr,e),this.status="closing",this._abort(e),this.status="closed",this.timeline.close=Date.now())}}function $2t(t){return new L2t(t)}function U2t(t,e){try{const{options:r}=e.getHandler(t);return r.maxInboundStreams}catch(r){if(r.name!=="UnhandledProtocolError")throw r}return Tpe}function j2t(t,e,r={}){try{const{options:n}=e.getHandler(t);if(n.maxOutboundStreams!=null)return n.maxOutboundStreams}catch(n){if(n.name!=="UnhandledProtocolError")throw n}return r.maxOutboundStreams??Ape}function vJ(t,e,r){let n=0;return r.streams.forEach(i=>{i.direction===e&&i.protocol===t&&n++}),n}class V2t{components;connectionEncrypters;streamMuxers;inboundUpgradeTimeout;inboundStreamProtocolNegotiationTimeout;outboundStreamProtocolNegotiationTimeout;events;metrics;constructor(e,r){this.components=e,this.connectionEncrypters=new Map,r.connectionEncrypters.forEach(n=>{this.connectionEncrypters.set(n.protocol,n)}),this.streamMuxers=new Map,r.streamMuxers.forEach(n=>{this.streamMuxers.set(n.protocol,n)}),this.inboundUpgradeTimeout=r.inboundUpgradeTimeout??r2t,this.inboundStreamProtocolNegotiationTimeout=r.inboundStreamProtocolNegotiationTimeout??hJ,this.outboundStreamProtocolNegotiationTimeout=r.outboundStreamProtocolNegotiationTimeout??hJ,this.events=e.events,this.metrics={dials:e.metrics?.registerCounterGroup("libp2p_connection_manager_dials_total"),errors:e.metrics?.registerCounterGroup("libp2p_connection_manager_dial_errors_total")}}[Symbol.toStringTag]="@libp2p/upgrader";async shouldBlockConnection(e,...r){const n=this.components.connectionGater[e];if(n==null)return;if(await n.apply(this.components.connectionGater,r)===!0)throw new Uyt(`The multiaddr connection is blocked by gater.${e}`)}createInboundAbortSignal(e){return Pr([AbortSignal.timeout(this.inboundUpgradeTimeout),e])}async upgradeInbound(e,r){let n=!1;const i=this.createInboundAbortSignal(r.signal);try{if(this.metrics.dials?.increment({inbound:!0}),n=await this.components.connectionManager.acceptIncomingConnection(e),!n)throw new jyt("Connection denied");await this.shouldBlockConnection("denyInboundConnection",e),await this._performUpgrade(e,"inbound",{...r,signal:i})}catch(s){throw this.metrics.errors?.increment({inbound:!0}),s}finally{i.clear(),n&&this.components.connectionManager.afterUpgradeInbound()}}async upgradeOutbound(e,r){try{this.metrics.dials?.increment({outbound:!0});const n=e.remoteAddr.getPeerId();let i;n!=null&&(i=Ln(n),await this.shouldBlockConnection("denyOutboundConnection",i,e));let s="outbound";return r.initiator===!1&&(s="inbound"),await this._performUpgrade(e,s,r)}catch(n){throw this.metrics.errors?.increment({outbound:!0}),n}}async _performUpgrade(e,r,n){let i,s,a,o,c;this.components.metrics?.trackMultiaddrConnection(e),e.log.trace("starting the %s connection upgrade",r);let u=e;if(n?.skipProtection!==!0){const l=this.components.connectionProtector;l!=null&&(e.log("protecting the %s connection",r),u=await l.protect(e,n))}try{if(i=u,n?.skipEncryption!==!0){n?.onProgress?.(new ft(`upgrader:encrypt-${r}-connection`)),{conn:i,remotePeer:s,protocol:c,streamMuxer:o}=await(r==="inbound"?this._encryptInbound(u,n):this._encryptOutbound(u,n));const l={...u,...i};await this.shouldBlockConnection(r==="inbound"?"denyInboundEncryptedConnection":"denyOutboundEncryptedConnection",s,l)}else{const l=e.remoteAddr.getPeerId();if(l==null)throw new T8(`${r} connection that skipped encryption must have a peer id`);const f=Ln(l);c="native",s=f}if(s.equals(this.components.peerId)){const l=new ire("Can not dial self");throw e.abort(l),l}if(a=i,n?.muxerFactory!=null)o=n.muxerFactory;else if(o==null&&this.streamMuxers.size>0){n?.onProgress?.(new ft(`upgrader:multiplex-${r}-connection`));const l=await(r==="inbound"?this._multiplexInbound({...u,...i},this.streamMuxers,n):this._multiplexOutbound({...u,...i},this.streamMuxers,n));o=l.muxerFactory,a=l.stream}}catch(l){throw e.log.error("failed to upgrade inbound connection %s %a - %e",r==="inbound"?"from":"to",e.remoteAddr,l),l}return await this.shouldBlockConnection(r==="inbound"?"denyInboundUpgradedConnection":"denyOutboundUpgradedConnection",s,e),e.log("successfully upgraded %s connection",r),this._createConnection({cryptoProtocol:c,direction:r,maConn:e,upgradedConn:a,muxerFactory:o,remotePeer:s,limits:n?.limits})}_createConnection(e){const{cryptoProtocol:r,direction:n,maConn:i,upgradedConn:s,remotePeer:a,muxerFactory:o,limits:c}=e;let u,l,f;o!=null&&(u=o.createStreamMuxer({direction:n,onIncomingStream:m=>{f!=null&&Promise.resolve().then(async()=>{const p=this.components.registrar.getProtocols(),g=AbortSignal.timeout(this.inboundStreamProtocolNegotiationTimeout),{stream:v,protocol:y}=await CA(m,p,{signal:g,log:m.log,yieldBytes:!1});if(f==null)return;f.log("incoming stream opened on %s",y);const b=U2t(y,this.components.registrar);if(vJ(y,"inbound",f)===b){const x=new b6e(`Too many inbound protocol streams for protocol "${y}" - limit ${b}`);throw m.abort(x),x}m.source=v.source,m.sink=v.sink,m.protocol=y,v.closeWrite!=null&&(m.closeWrite=v.closeWrite),v.closeRead!=null&&(m.closeRead=v.closeRead),v.close!=null&&(m.close=v.close),await this.components.peerStore.merge(a,{protocols:[y]}),this.components.metrics?.trackProtocolStream(m,f),this._onStream({connection:f,stream:m,protocol:y})}).catch(async p=>{f.log.error("error handling incoming stream id %s - %e",m.id,p),m.timeline.close==null&&await m.close()})}}),l=async(m,p={})=>{if(u==null)throw new Zw("Connection is not multiplexed");f.log.trace("starting new stream for protocols %s",m);const g=await u.newStream();f.log.trace("started new stream %s for protocols %s",g.id,m);try{if(p.signal==null){g.log("no abort signal was passed while trying to negotiate protocols %s falling back to default timeout",m);const x=AbortSignal.timeout(this.outboundStreamProtocolNegotiationTimeout);p={...p,signal:x}}g.log.trace("selecting protocol from protocols %s",m);const{stream:v,protocol:y}=await AA(g,m,{...p,log:g.log,yieldBytes:!0});g.log.trace("selected protocol %s",y);const b=j2t(y,this.components.registrar,p),_=vJ(y,"outbound",f);if(_>=b){const x=new QR(`Too many outbound protocol streams for protocol "${y}" - ${_}/${b}`);throw g.abort(x),x}return await this.components.peerStore.merge(a,{protocols:[y]}),g.source=v.source,g.sink=v.sink,g.protocol=y,v.closeWrite!=null&&(g.closeWrite=v.closeWrite),v.closeRead!=null&&(g.closeRead=v.closeRead),v.close!=null&&(g.close=v.close),this.components.metrics?.trackProtocolStream(g,f),g}catch(v){throw f.log.error("could not create new outbound stream on connection %s %a for protocols %s - %e",n==="inbound"?"from":"to",e.maConn.remoteAddr,m,v),g.timeline.close==null&&g.abort(v),v}},Promise.all([u.sink(s.source),s.sink(u.source)]).catch(m=>{f.log.error("error piping data through muxer - %e",m)}));const d=i.timeline;i.timeline=new Proxy(d,{set:(...m)=>(m[1]==="close"&&m[2]!=null&&d.close==null&&(async()=>{try{f.status==="open"&&await f.close()}catch(p){f.log.error("error closing connection after timeline close %e",p)}finally{this.events.safeDispatchEvent("connection:close",{detail:f})}})().catch(p=>{f.log.error("error thrown while dispatching connection:close event %e",p)}),Reflect.set(...m))}),i.timeline.upgraded=Date.now();const h=()=>{throw new Zw("Connection is not multiplexed")};return f=$2t({remoteAddr:i.remoteAddr,remotePeer:a,status:"open",direction:n,timeline:i.timeline,multiplexer:u?.protocol,encryption:r,limits:c,logger:this.components.logger,newStream:l??h,getStreams:()=>u?.streams??[],close:async m=>{await u?.close(m),await i.close(m)},abort:m=>{i.abort(m),u?.abort(m)}}),this.events.safeDispatchEvent("connection:open",{detail:f}),f.__maConnTimeline=d,f}_onStream(e){const{connection:r,stream:n,protocol:i}=e,{handler:s,options:a}=this.components.registrar.getHandler(i);if(r.limits!=null&&a.runOnLimitedConnection!==!0)throw new sre("Cannot open protocol stream on limited connection");s({connection:r,stream:n})}async _encryptInbound(e,r){const n=Array.from(this.connectionEncrypters.keys());try{const{stream:i,protocol:s}=await CA(e,n,{...r,log:e.log}),a=this.connectionEncrypters.get(s);if(a==null)throw new Jw(`no crypto module found for ${s}`);return e.log("encrypting inbound connection to %a using %s",e.remoteAddr,s),{...await a.secureInbound(i,r),protocol:s}}catch(i){throw e.log.error("encrypting inbound connection from %a failed",e.remoteAddr,i),new Jw(i.message)}}async _encryptOutbound(e,r){const n=Array.from(this.connectionEncrypters.keys());try{e.log.trace("selecting encrypter from %s",n);const{stream:i,protocol:s}=await AA(e,n,{...r,log:e.log,yieldBytes:!0}),a=this.connectionEncrypters.get(s);if(a==null)throw new Jw(`no crypto module found for ${s}`);return e.log("encrypting outbound connection to %a using %s",e.remoteAddr,s),{...await a.secureOutbound(i,r),protocol:s}}catch(i){throw e.log.error("encrypting outbound connection to %a failed",e.remoteAddr,i),new Jw(i.message)}}async _multiplexOutbound(e,r,n){const i=Array.from(r.keys());e.log("outbound selecting muxer %s",i);try{e.log.trace("selecting stream muxer from %s",i);const{stream:s,protocol:a}=await AA(e,i,{...n,log:e.log,yieldBytes:!0});e.log("selected %s as muxer protocol",a);const o=r.get(a);return{stream:s,muxerFactory:o}}catch(s){throw e.log.error("error multiplexing outbound connection",s),new Zw(String(s))}}async _multiplexInbound(e,r,n){const i=Array.from(r.keys());e.log("inbound handling muxers %s",i);try{const{stream:s,protocol:a}=await CA(e,i,{...n,log:e.log}),o=r.get(a);return{stream:s,muxerFactory:o}}catch(s){throw e.log.error("error multiplexing inbound connection",s),new Zw(String(s))}}getConnectionEncrypters(){return this.connectionEncrypters}getStreamMuxers(){return this.streamMuxers}}class q2t extends oi{peerId;peerStore;contentRouting;peerRouting;metrics;services;logger;status;components;log;constructor(e){super(),this.status="stopped";const r=new oi,n=r.dispatchEvent.bind(r);r.dispatchEvent=u=>{const l=n(u),f=this.dispatchEvent(new CustomEvent(u.type,{detail:u.detail}));return l||f},this.peerId=e.peerId,this.logger=e.logger??q5(),this.log=this.logger.forComponent("libp2p"),this.services={};const i=e.nodeInfo?.name??fpe,s=e.nodeInfo?.version??upe,a=this.components=Wyt({peerId:e.peerId,privateKey:e.privateKey,nodeInfo:{name:i,version:s,userAgent:e.nodeInfo?.userAgent??dpe(i,s)},logger:this.logger,events:r,datastore:e.datastore??new Dhe,connectionGater:Qyt(e.connectionGater),dns:e.dns});this.peerStore=this.configureComponent("peerStore",ayt(a,{addressFilter:this.components.connectionGater.filterMultiaddrForPeer,...e.peerStore})),e.metrics!=null&&(this.metrics=this.configureComponent("metrics",e.metrics(this.components))),a.events.addEventListener("peer:update",u=>{if(u.detail.previous==null){const l={id:u.detail.peer.id,multiaddrs:u.detail.peer.addresses.map(f=>f.multiaddr)};a.events.safeDispatchEvent("peer:discovery",{detail:l})}}),e.connectionProtector!=null&&this.configureComponent("connectionProtector",e.connectionProtector(a)),this.components.upgrader=new V2t(this.components,{connectionEncrypters:(e.connectionEncrypters??[]).map((u,l)=>this.configureComponent(`connection-encryption-${l}`,u(this.components))),streamMuxers:(e.streamMuxers??[]).map((u,l)=>this.configureComponent(`stream-muxers-${l}`,u(this.components))),inboundUpgradeTimeout:e.connectionManager?.inboundUpgradeTimeout,inboundStreamProtocolNegotiationTimeout:e.connectionManager?.inboundStreamProtocolNegotiationTimeout??e.connectionManager?.protocolNegotiationTimeout,outboundStreamProtocolNegotiationTimeout:e.connectionManager?.outboundStreamProtocolNegotiationTimeout??e.connectionManager?.protocolNegotiationTimeout}),this.configureComponent("transportManager",new O2t(this.components,e.transportManager)),this.configureComponent("connectionManager",new _2t(this.components,e.connectionManager)),e.connectionMonitor?.enabled!==!1&&this.configureComponent("connectionMonitor",new A2t(this.components,e.connectionMonitor)),this.configureComponent("registrar",new R2t(this.components)),this.configureComponent("addressManager",new Ryt(this.components,e.addresses));const o=(e.peerRouters??[]).map((u,l)=>this.configureComponent(`peer-router-${l}`,u(this.components)));this.peerRouting=this.components.peerRouting=this.configureComponent("peerRouting",new I2t(this.components,{routers:o}));const c=(e.contentRouters??[]).map((u,l)=>this.configureComponent(`content-router-${l}`,u(this.components)));if(this.contentRouting=this.components.contentRouting=this.configureComponent("contentRouting",new C2t(this.components,{routers:c})),this.configureComponent("randomWalk",new P2t(this.components)),(e.peerDiscovery??[]).forEach((u,l)=>{this.configureComponent(`peer-discovery-${l}`,u(this.components)).addEventListener("peer",d=>{this.#e(d)})}),e.transports?.forEach((u,l)=>{this.components.transportManager.add(this.configureComponent(`transport-${l}`,u(this.components)))}),e.services!=null)for(const u of Object.keys(e.services)){const l=e.services[u],f=l(this.components);if(f==null){this.log.error("service factory %s returned null or undefined instance",u);continue}this.services[u]=f,this.configureComponent(u,f),f[K1]!=null&&(this.log("registering service %s for content routing",u),c.push(f[K1])),f[X1]!=null&&(this.log("registering service %s for peer routing",u),o.push(f[X1])),f[ov]!=null&&(this.log("registering service %s for peer discovery",u),f[ov].addEventListener?.("peer",d=>{this.#e(d)}))}Gyt(a)}configureComponent(e,r){return r==null&&this.log.error("component %s was null or undefined",e),this.components[e]=r,r}async start(){if(this.status==="stopped"){this.status="starting",this.log("libp2p is starting");try{await this.components.beforeStart?.(),await this.components.start(),await this.components.afterStart?.(),this.status="started",this.safeDispatchEvent("start",{detail:this}),this.log("libp2p has started")}catch(e){throw this.log.error("An error occurred starting libp2p",e),this.status="started",await this.stop(),e}}}async stop(){this.status==="started"&&(this.log("libp2p is stopping"),this.status="stopping",await this.components.beforeStop?.(),await this.components.stop(),await this.components.afterStop?.(),this.status="stopped",this.safeDispatchEvent("stop",{detail:this}),this.log("libp2p has stopped"))}getConnections(e){return this.components.connectionManager.getConnections(e)}getDialQueue(){return this.components.connectionManager.getDialQueue()}getPeers(){const e=new fc;for(const r of this.components.connectionManager.getConnections())e.add(r.remotePeer);return Array.from(e)}async dial(e,r={}){return this.components.connectionManager.openConnection(e,{priority:75,...r})}async dialProtocol(e,r,n={}){if(r==null)throw new Ze("no protocols were provided to open a stream");if(r=Array.isArray(r)?r:[r],r.length===0)throw new Ze("no protocols were provided to open a stream");return(await this.dial(e,n)).newStream(r,n)}getMultiaddrs(){return this.components.addressManager.getAddresses()}getProtocols(){return this.components.registrar.getProtocols()}async hangUp(e,r={}){r_(e)&&(e=Ln(e.getPeerId()??"")),await this.components.connectionManager.closeConnections(e,r)}async getPublicKey(e,r={}){if(this.log("getPublicKey %p",e),e.publicKey!=null)return e.publicKey;try{const a=await this.peerStore.get(e);if(a.id.publicKey!=null)return a.id.publicKey}catch(a){if(a.name!=="NotFoundError")throw a}const n=qn([tt("/pk/"),e.toMultihash().bytes]),i=await this.contentRouting.get(n,r),s=na(i);return await this.peerStore.patch(e,{publicKey:s}),s}async handle(e,r,n){Array.isArray(e)||(e=[e]),await Promise.all(e.map(async i=>{await this.components.registrar.handle(i,r,n)}))}async unhandle(e){Array.isArray(e)||(e=[e]),await Promise.all(e.map(async r=>{await this.components.registrar.unhandle(r)}))}async register(e,r){return this.components.registrar.register(e,r)}unregister(e){this.components.registrar.unregister(e)}async isDialable(e,r={}){return this.components.connectionManager.isDialable(e,r)}#e(e){const{detail:r}=e;if(r.id.toString()===this.peerId.toString()){this.log.error("peer discovery mechanism discovered self");return}this.components.peerStore.merge(r.id,{multiaddrs:r.multiaddrs}).catch(n=>{this.log.error(n)})}}async function Cpe(t={}){t.privateKey??=await MB("Ed25519");const e=new q2t({...await Hvt(t),peerId:Slt(t.privateKey)});return t.start!==!1&&await e.start(),e}async function z2t(t){const e=t.libp2p??{};e.privateKey==null&&t.datastore!=null&&(e.privateKey=await Uvt(t.datastore,t.keychain));const r=$vt(e);return r.datastore=r.datastore??t.datastore,await Cpe({...r,...e,start:!1})}async function H2t(t={}){const e=t.datastore??new Dhe,r=t.blockstore??new ndt;let n;W2t(t.libp2p)?n=t.libp2p:n=await z2t({...t,libp2p:{dns:t.dns,...t.libp2p,start:void 0},datastore:e});const i=new lht({...t,libp2p:n,datastore:e,blockstore:r,blockBrokers:t.blockBrokers??[rdt(),phe()],routers:t.routers??[cht(n),aht()],metrics:n.metrics});return t.start!==!1&&await i.start(),i}function W2t(t){return t==null?!1:["dial","dialProtocol","hangUp","handle","unhandle","getMultiaddrs","getProtocols"].every(r=>typeof t[r]=="function")}function Ipe(t){return t[Symbol.asyncIterator]!=null}const E_=t=>{const e=vn(t),r=Ea(e);return Ds(t,r),E_.bytes=e,r};E_.bytes=0;function ZM(t,e){e=e??{};const r=e.lengthEncoder??E_;function*n(i){const s=r(i.byteLength);s instanceof Uint8Array?yield s:yield*s,i instanceof Uint8Array?yield i:yield*i}return Ipe(t)?async function*(){for await(const i of t)yield*n(i)}():function*(){for(const i of t)yield*n(i)}()}ZM.single=(t,e)=>{e=e??{};const r=e.lengthEncoder??E_;return new cr(r(t.byteLength),t)};class G2t extends Error{name="InvalidMessageLengthError";code="ERR_INVALID_MSG_LENGTH"}class K2t extends Error{name="InvalidDataLengthError";code="ERR_MSG_DATA_TOO_LONG"}class X2t extends Error{name="InvalidDataLengthLengthError";code="ERR_MSG_LENGTH_TOO_LONG"}class yJ extends Error{name="UnexpectedEOFError";code="ERR_UNEXPECTED_EOF"}const Y2t=8,Z2t=1024*1024*4;var Xd;(function(t){t[t.LENGTH=0]="LENGTH",t[t.DATA=1]="DATA"})(Xd||(Xd={}));const JM=t=>{const e=kl(t);return JM.bytes=vn(e),e};JM.bytes=0;function HP(t,e){const r=new cr;let n=Xd.LENGTH,i=-1;const s=e?.lengthDecoder??JM,a=e?.maxLengthLength??Y2t,o=e?.maxDataLength??Z2t;function*c(){for(;r.byteLength>0;){if(n===Xd.LENGTH)try{if(i=s(r),i<0)throw new G2t("Invalid message length");if(i>o)throw new K2t("Message length too long");const u=s.bytes;r.consume(u),e?.onLength!=null&&e.onLength(i),n=Xd.DATA}catch(u){if(u instanceof RangeError){if(r.byteLength>a)throw new X2t("Message length length too long");break}throw u}if(n===Xd.DATA){if(r.byteLength<i)break;const u=r.sublist(0,i);r.consume(i),e?.onData!=null&&e.onData(u),yield u,n=Xd.LENGTH}}}return Ipe(t)?async function*(){for await(const u of t)r.append(u),yield*c();if(r.byteLength>0)throw new yJ("Unexpected end of input")}():function*(){for(const u of t)r.append(u),yield*c();if(r.byteLength>0)throw new yJ("Unexpected end of input")}()}HP.fromReader=(t,e)=>{let r=1;const n=async function*(){for(;;)try{const{done:s,value:a}=await t.next(r);if(s===!0)return;a!=null&&(yield a)}catch(s){if(s.code==="ERR_UNDER_READ")return{done:!0,value:null};throw s}finally{r=1}}();return HP(n,{...e??{},onLength:s=>{r=s}})};const wm=1e3,QM=60*wm,bJ="/floodsub/1.0.0",wJ="/meshsub/1.0.0",J2t="/meshsub/1.1.0",IA="/meshsub/1.2.0",Q2t=6,ebt=4,tbt=12,rbt=4,nbt=2,ibt=5,sbt=3,abt=6,obt=.25,cbt=3,_J=100,lbt=wm,ubt=QM,fbt=16,dbt=QM,hbt=10*wm,pbt=15,mbt=300,gbt=wm,vbt=60,ybt=2,bbt=10*wm,o1=5e3,wbt=10,_bt=3*wm,xbt=2*QM,Sbt=120*1e3,Ebt="ERR_TOPIC_VALIDATOR_REJECT",kbt="ERR_TOPIC_VALIDATOR_IGNORE",Tbt=0,Abt=128,Cbt=1e3,Ibt=1e3,Pbt=1,Rbt=512,Obt=512,Bbt={maxSubscriptions:1/0,maxMessages:1/0,maxIhaveMessageIDs:1/0,maxIwantMessageIDs:1/0,maxIdontwantMessageIDs:1/0,maxControlMessages:1/0,maxPeerInfos:1/0};var Eh;(function(t){(function(r){let n;r.codec=()=>(n==null&&(n=Ot((i,s,a={})=>{a.lengthDelimited!==!1&&s.fork(),i.subscribe!=null&&(s.uint32(8),s.bool(i.subscribe)),i.topic!=null&&(s.uint32(18),s.string(i.topic)),a.lengthDelimited!==!1&&s.ldelim()},(i,s,a={})=>{const o={},c=s==null?i.len:i.pos+s;for(;i.pos<c;){const u=i.uint32();switch(u>>>3){case 1:{o.subscribe=i.bool();break}case 2:{o.topic=i.string();break}default:{i.skipType(u&7);break}}}return o})),n),r.encode=i=>Rt(i,r.codec()),r.decode=(i,s)=>Pt(i,r.codec(),s)})(t.SubOpts||(t.SubOpts={})),function(r){let n;r.codec=()=>(n==null&&(n=Ot((i,s,a={})=>{a.lengthDelimited!==!1&&s.fork(),i.from!=null&&(s.uint32(10),s.bytes(i.from)),i.data!=null&&(s.uint32(18),s.bytes(i.data)),i.seqno!=null&&(s.uint32(26),s.bytes(i.seqno)),i.topic!=null&&i.topic!==""&&(s.uint32(34),s.string(i.topic)),i.signature!=null&&(s.uint32(42),s.bytes(i.signature)),i.key!=null&&(s.uint32(50),s.bytes(i.key)),a.lengthDelimited!==!1&&s.ldelim()},(i,s,a={})=>{const o={topic:""},c=s==null?i.len:i.pos+s;for(;i.pos<c;){const u=i.uint32();switch(u>>>3){case 1:{o.from=i.bytes();break}case 2:{o.data=i.bytes();break}case 3:{o.seqno=i.bytes();break}case 4:{o.topic=i.string();break}case 5:{o.signature=i.bytes();break}case 6:{o.key=i.bytes();break}default:{i.skipType(u&7);break}}}return o})),n),r.encode=i=>Rt(i,r.codec()),r.decode=(i,s)=>Pt(i,r.codec(),s)}(t.Message||(t.Message={})),function(r){let n;r.codec=()=>(n==null&&(n=Ot((i,s,a={})=>{if(a.lengthDelimited!==!1&&s.fork(),i.ihave!=null)for(const o of i.ihave)s.uint32(10),t.ControlIHave.codec().encode(o,s);if(i.iwant!=null)for(const o of i.iwant)s.uint32(18),t.ControlIWant.codec().encode(o,s);if(i.graft!=null)for(const o of i.graft)s.uint32(26),t.ControlGraft.codec().encode(o,s);if(i.prune!=null)for(const o of i.prune)s.uint32(34),t.ControlPrune.codec().encode(o,s);if(i.idontwant!=null)for(const o of i.idontwant)s.uint32(42),t.ControlIDontWant.codec().encode(o,s);a.lengthDelimited!==!1&&s.ldelim()},(i,s,a={})=>{const o={ihave:[],iwant:[],graft:[],prune:[],idontwant:[]},c=s==null?i.len:i.pos+s;for(;i.pos<c;){const u=i.uint32();switch(u>>>3){case 1:{if(a.limits?.ihave!=null&&o.ihave.length===a.limits.ihave)throw new rn('Decode error - map field "ihave" had too many elements');o.ihave.push(t.ControlIHave.codec().decode(i,i.uint32(),{limits:a.limits?.ihave$}));break}case 2:{if(a.limits?.iwant!=null&&o.iwant.length===a.limits.iwant)throw new rn('Decode error - map field "iwant" had too many elements');o.iwant.push(t.ControlIWant.codec().decode(i,i.uint32(),{limits:a.limits?.iwant$}));break}case 3:{if(a.limits?.graft!=null&&o.graft.length===a.limits.graft)throw new rn('Decode error - map field "graft" had too many elements');o.graft.push(t.ControlGraft.codec().decode(i,i.uint32(),{limits:a.limits?.graft$}));break}case 4:{if(a.limits?.prune!=null&&o.prune.length===a.limits.prune)throw new rn('Decode error - map field "prune" had too many elements');o.prune.push(t.ControlPrune.codec().decode(i,i.uint32(),{limits:a.limits?.prune$}));break}case 5:{if(a.limits?.idontwant!=null&&o.idontwant.length===a.limits.idontwant)throw new rn('Decode error - map field "idontwant" had too many elements');o.idontwant.push(t.ControlIDontWant.codec().decode(i,i.uint32(),{limits:a.limits?.idontwant$}));break}default:{i.skipType(u&7);break}}}return o})),n),r.encode=i=>Rt(i,r.codec()),r.decode=(i,s)=>Pt(i,r.codec(),s)}(t.ControlMessage||(t.ControlMessage={})),function(r){let n;r.codec=()=>(n==null&&(n=Ot((i,s,a={})=>{if(a.lengthDelimited!==!1&&s.fork(),i.topicID!=null&&(s.uint32(10),s.string(i.topicID)),i.messageIDs!=null)for(const o of i.messageIDs)s.uint32(18),s.bytes(o);a.lengthDelimited!==!1&&s.ldelim()},(i,s,a={})=>{const o={messageIDs:[]},c=s==null?i.len:i.pos+s;for(;i.pos<c;){const u=i.uint32();switch(u>>>3){case 1:{o.topicID=i.string();break}case 2:{if(a.limits?.messageIDs!=null&&o.messageIDs.length===a.limits.messageIDs)throw new rn('Decode error - map field "messageIDs" had too many elements');o.messageIDs.push(i.bytes());break}default:{i.skipType(u&7);break}}}return o})),n),r.encode=i=>Rt(i,r.codec()),r.decode=(i,s)=>Pt(i,r.codec(),s)}(t.ControlIHave||(t.ControlIHave={})),function(r){let n;r.codec=()=>(n==null&&(n=Ot((i,s,a={})=>{if(a.lengthDelimited!==!1&&s.fork(),i.messageIDs!=null)for(const o of i.messageIDs)s.uint32(10),s.bytes(o);a.lengthDelimited!==!1&&s.ldelim()},(i,s,a={})=>{const o={messageIDs:[]},c=s==null?i.len:i.pos+s;for(;i.pos<c;){const u=i.uint32();switch(u>>>3){case 1:{if(a.limits?.messageIDs!=null&&o.messageIDs.length===a.limits.messageIDs)throw new rn('Decode error - map field "messageIDs" had too many elements');o.messageIDs.push(i.bytes());break}default:{i.skipType(u&7);break}}}return o})),n),r.encode=i=>Rt(i,r.codec()),r.decode=(i,s)=>Pt(i,r.codec(),s)}(t.ControlIWant||(t.ControlIWant={})),function(r){let n;r.codec=()=>(n==null&&(n=Ot((i,s,a={})=>{a.lengthDelimited!==!1&&s.fork(),i.topicID!=null&&(s.uint32(10),s.string(i.topicID)),a.lengthDelimited!==!1&&s.ldelim()},(i,s,a={})=>{const o={},c=s==null?i.len:i.pos+s;for(;i.pos<c;){const u=i.uint32();switch(u>>>3){case 1:{o.topicID=i.string();break}default:{i.skipType(u&7);break}}}return o})),n),r.encode=i=>Rt(i,r.codec()),r.decode=(i,s)=>Pt(i,r.codec(),s)}(t.ControlGraft||(t.ControlGraft={})),function(r){let n;r.codec=()=>(n==null&&(n=Ot((i,s,a={})=>{if(a.lengthDelimited!==!1&&s.fork(),i.topicID!=null&&(s.uint32(10),s.string(i.topicID)),i.peers!=null)for(const o of i.peers)s.uint32(18),t.PeerInfo.codec().encode(o,s);i.backoff!=null&&(s.uint32(24),s.uint64Number(i.backoff)),a.lengthDelimited!==!1&&s.ldelim()},(i,s,a={})=>{const o={peers:[]},c=s==null?i.len:i.pos+s;for(;i.pos<c;){const u=i.uint32();switch(u>>>3){case 1:{o.topicID=i.string();break}case 2:{if(a.limits?.peers!=null&&o.peers.length===a.limits.peers)throw new rn('Decode error - map field "peers" had too many elements');o.peers.push(t.PeerInfo.codec().decode(i,i.uint32(),{limits:a.limits?.peers$}));break}case 3:{o.backoff=i.uint64Number();break}default:{i.skipType(u&7);break}}}return o})),n),r.encode=i=>Rt(i,r.codec()),r.decode=(i,s)=>Pt(i,r.codec(),s)}(t.ControlPrune||(t.ControlPrune={})),function(r){let n;r.codec=()=>(n==null&&(n=Ot((i,s,a={})=>{a.lengthDelimited!==!1&&s.fork(),i.peerID!=null&&(s.uint32(10),s.bytes(i.peerID)),i.signedPeerRecord!=null&&(s.uint32(18),s.bytes(i.signedPeerRecord)),a.lengthDelimited!==!1&&s.ldelim()},(i,s,a={})=>{const o={},c=s==null?i.len:i.pos+s;for(;i.pos<c;){const u=i.uint32();switch(u>>>3){case 1:{o.peerID=i.bytes();break}case 2:{o.signedPeerRecord=i.bytes();break}default:{i.skipType(u&7);break}}}return o})),n),r.encode=i=>Rt(i,r.codec()),r.decode=(i,s)=>Pt(i,r.codec(),s)}(t.PeerInfo||(t.PeerInfo={})),function(r){let n;r.codec=()=>(n==null&&(n=Ot((i,s,a={})=>{if(a.lengthDelimited!==!1&&s.fork(),i.messageIDs!=null)for(const o of i.messageIDs)s.uint32(10),s.bytes(o);a.lengthDelimited!==!1&&s.ldelim()},(i,s,a={})=>{const o={messageIDs:[]},c=s==null?i.len:i.pos+s;for(;i.pos<c;){const u=i.uint32();switch(u>>>3){case 1:{if(a.limits?.messageIDs!=null&&o.messageIDs.length===a.limits.messageIDs)throw new rn('Decode error - map field "messageIDs" had too many elements');o.messageIDs.push(i.bytes());break}default:{i.skipType(u&7);break}}}return o})),n),r.encode=i=>Rt(i,r.codec()),r.decode=(i,s)=>Pt(i,r.codec(),s)}(t.ControlIDontWant||(t.ControlIDontWant={}));let e;t.codec=()=>(e==null&&(e=Ot((r,n,i={})=>{if(i.lengthDelimited!==!1&&n.fork(),r.subscriptions!=null)for(const s of r.subscriptions)n.uint32(10),t.SubOpts.codec().encode(s,n);if(r.messages!=null)for(const s of r.messages)n.uint32(18),t.Message.codec().encode(s,n);r.control!=null&&(n.uint32(26),t.ControlMessage.codec().encode(r.control,n)),i.lengthDelimited!==!1&&n.ldelim()},(r,n,i={})=>{const s={subscriptions:[],messages:[]},a=n==null?r.len:r.pos+n;for(;r.pos<a;){const o=r.uint32();switch(o>>>3){case 1:{if(i.limits?.subscriptions!=null&&s.subscriptions.length===i.limits.subscriptions)throw new rn('Decode error - map field "subscriptions" had too many elements');s.subscriptions.push(t.SubOpts.codec().decode(r,r.uint32(),{limits:i.limits?.subscriptions$}));break}case 2:{if(i.limits?.messages!=null&&s.messages.length===i.limits.messages)throw new rn('Decode error - map field "messages" had too many elements');s.messages.push(t.Message.codec().decode(r,r.uint32(),{limits:i.limits?.messages$}));break}case 3:{s.control=t.ControlMessage.codec().decode(r,r.uint32(),{limits:i.limits?.control});break}default:{r.skipType(o&7);break}}}return s})),e),t.encode=r=>Rt(r,t.codec()),t.decode=(r,n)=>Pt(r,t.codec(),n)})(Eh||(Eh={}));class Dbt{gossip;msgs=new Map;msgIdToStrFn;history=[];notValidatedCount=0;constructor(e,r,n){this.gossip=e,this.msgIdToStrFn=n;for(let i=0;i<r;i++)this.history[i]=[]}get size(){return this.msgs.size}put(e,r,n=!1){const{msgIdStr:i}=e;return this.msgs.has(i)?!1:(this.msgs.set(i,{message:r,validated:n,originatingPeers:new Set,iwantCounts:new Map}),this.history[0].push({...e,topic:r.topic}),n||this.notValidatedCount++,!0)}observeDuplicate(e,r){const n=this.msgs.get(e);n!=null&&!n.validated&&n.originatingPeers.add(r)}get(e){return this.msgs.get(this.msgIdToStrFn(e))?.message}getWithIWantCount(e,r){const n=this.msgs.get(e);if(n==null)return null;const i=(n.iwantCounts.get(r)??0)+1;return n.iwantCounts.set(r,i),{msg:n.message,count:i}}getGossipIDs(e){const r=new Map;for(let n=0;n<this.gossip;n++)this.history[n].forEach(i=>{if((this.msgs.get(i.msgIdStr)?.validated??!1)&&e.has(i.topic)){let a=r.get(i.topic);a==null&&(a=[],r.set(i.topic,a)),a.push(i.msgId)}});return r}validate(e){const r=this.msgs.get(e);if(r==null)return null;r.validated||this.notValidatedCount--;const{message:n,originatingPeers:i}=r;return r.validated=!0,r.originatingPeers=new Set,{message:n,originatingPeers:i}}shift(){this.history[this.history.length-1].forEach(r=>{const n=this.msgs.get(r.msgIdStr);n!=null&&(this.msgs.delete(r.msgIdStr),n.validated||this.notValidatedCount--)}),this.history.pop(),this.history.unshift([])}remove(e){const r=this.msgs.get(e);return r==null?null:(this.msgs.delete(e),r)}}var xJ;(function(t){t.StrictSign="StrictSign",t.StrictNoSign="StrictNoSign"})(xJ||(xJ={}));var Bp;(function(t){t[t.Signing=0]="Signing",t[t.Anonymous=1]="Anonymous"})(Bp||(Bp={}));var pc;(function(t){t.Error="error",t.Ignore="ignore",t.Reject="reject",t.Blacklisted="blacklisted"})(pc||(pc={}));var la;(function(t){t.InvalidSignature="invalid_signature",t.InvalidSeqno="invalid_seqno",t.InvalidPeerId="invalid_peerid",t.SignaturePresent="signature_present",t.SeqnoPresent="seqno_present",t.FromPresent="from_present",t.TransformFailed="transform_failed"})(la||(la={}));var da;(function(t){t.duplicate="duplicate",t.invalid="invalid",t.valid="valid"})(da||(da={}));function SJ(t){switch(t){case yo.Ignore:return pc.Ignore;case yo.Reject:return pc.Reject;default:throw new Error("Unreachable")}}var EJ;(function(t){t.forward="forward",t.publish="publish"})(EJ||(EJ={}));var pa;(function(t){t.Fanout="fanout",t.Random="random",t.Subscribed="subscribed",t.Outbound="outbound",t.NotEnough="not_enough",t.Opportunistic="opportunistic"})(pa||(pa={}));var al;(function(t){t.Dc="disconnected",t.BadScore="bad_score",t.Prune="prune",t.Excess="excess"})(al||(al={}));var Xg;(function(t){t.GraftBackoff="graft_backoff",t.BrokenPromise="broken_promise",t.MessageDeficit="message_deficit",t.IPColocation="IP_colocation"})(Xg||(Xg={}));var Yg;(function(t){t.LowScore="low_score",t.MaxIhave="max_ihave",t.MaxIasked="max_iasked"})(Yg||(Yg={}));var S1;(function(t){t.graylist="graylist",t.publish="publish",t.gossip="gossip",t.mesh="mesh"})(S1||(S1={}));function Mbt(t,e,r){return{protocolsEnabled:t.gauge({name:"gossipsub_protocol",help:"Status of enabled protocols",labelNames:["protocol"]}),topicSubscriptionStatus:t.gauge({name:"gossipsub_topic_subscription_status",help:"Status of our subscription to this topic",labelNames:["topicStr"]}),topicPeersCount:t.gauge({name:"gossipsub_topic_peer_count",help:"Number of peers subscribed to each topic",labelNames:["topicStr"]}),meshPeerCounts:t.gauge({name:"gossipsub_mesh_peer_count",help:"Number of peers in our mesh",labelNames:["topicStr"]}),meshPeerInclusionEventsFanout:t.gauge({name:"gossipsub_mesh_peer_inclusion_events_fanout_total",help:"Number of times we include peers in a topic mesh for fanout reasons",labelNames:["topic"]}),meshPeerInclusionEventsRandom:t.gauge({name:"gossipsub_mesh_peer_inclusion_events_random_total",help:"Number of times we include peers in a topic mesh for random reasons",labelNames:["topic"]}),meshPeerInclusionEventsSubscribed:t.gauge({name:"gossipsub_mesh_peer_inclusion_events_subscribed_total",help:"Number of times we include peers in a topic mesh for subscribed reasons",labelNames:["topic"]}),meshPeerInclusionEventsOutbound:t.gauge({name:"gossipsub_mesh_peer_inclusion_events_outbound_total",help:"Number of times we include peers in a topic mesh for outbound reasons",labelNames:["topic"]}),meshPeerInclusionEventsNotEnough:t.gauge({name:"gossipsub_mesh_peer_inclusion_events_not_enough_total",help:"Number of times we include peers in a topic mesh for not_enough reasons",labelNames:["topic"]}),meshPeerInclusionEventsOpportunistic:t.gauge({name:"gossipsub_mesh_peer_inclusion_events_opportunistic_total",help:"Number of times we include peers in a topic mesh for opportunistic reasons",labelNames:["topic"]}),meshPeerInclusionEventsUnknown:t.gauge({name:"gossipsub_mesh_peer_inclusion_events_unknown_total",help:"Number of times we include peers in a topic mesh for unknown reasons",labelNames:["topic"]}),meshPeerChurnEventsDisconnected:t.gauge({name:"gossipsub_peer_churn_events_disconnected_total",help:"Number of times we remove peers in a topic mesh for disconnected reasons",labelNames:["topic"]}),meshPeerChurnEventsBadScore:t.gauge({name:"gossipsub_peer_churn_events_bad_score_total",help:"Number of times we remove peers in a topic mesh for bad_score reasons",labelNames:["topic"]}),meshPeerChurnEventsPrune:t.gauge({name:"gossipsub_peer_churn_events_prune_total",help:"Number of times we remove peers in a topic mesh for prune reasons",labelNames:["topic"]}),meshPeerChurnEventsExcess:t.gauge({name:"gossipsub_peer_churn_events_excess_total",help:"Number of times we remove peers in a topic mesh for excess reasons",labelNames:["topic"]}),meshPeerChurnEventsUnknown:t.gauge({name:"gossipsub_peer_churn_events_unknown_total",help:"Number of times we remove peers in a topic mesh for unknown reasons",labelNames:["topic"]}),peersPerProtocol:t.gauge({name:"gossipsub_peers_per_protocol_count",help:"Peers connected for each topic",labelNames:["protocol"]}),heartbeatDuration:t.histogram({name:"gossipsub_heartbeat_duration_seconds",help:"The time it takes to complete one iteration of the heartbeat",buckets:[.01,.1,1]}),heartbeatSkipped:t.gauge({name:"gossipsub_heartbeat_skipped",help:"Heartbeat run took longer than heartbeat interval so next is skipped"}),acceptedMessagesTotal:t.gauge({name:"gossipsub_accepted_messages_total",help:"Total accepted messages for each topic",labelNames:["topic"]}),ignoredMessagesTotal:t.gauge({name:"gossipsub_ignored_messages_total",help:"Total ignored messages for each topic",labelNames:["topic"]}),rejectedMessagesTotal:t.gauge({name:"gossipsub_rejected_messages_total",help:"Total rejected messages for each topic",labelNames:["topic"]}),unknownValidationResultsTotal:t.gauge({name:"gossipsub_unknown_validation_results_total",help:"Total unknown validation results for each topic",labelNames:["topic"]}),asyncValidationMcacheHit:t.gauge({name:"gossipsub_async_validation_mcache_hit_total",help:"Async validation result reported by the user layer",labelNames:["hit"]}),asyncValidationDelayFromFirstSeenSec:t.histogram({name:"gossipsub_async_validation_delay_from_first_seen",help:"Async validation report delay from first seen in second",buckets:[.01,.03,.1,.3,1,3,10]}),asyncValidationUnknownFirstSeen:t.gauge({name:"gossipsub_async_validation_unknown_first_seen_count_total",help:"Async validation report unknown first seen value for message"}),peerReadStreamError:t.gauge({name:"gossipsub_peer_read_stream_err_count_total",help:"Peer read stream error"}),rpcRecvBytes:t.gauge({name:"gossipsub_rpc_recv_bytes_total",help:"RPC recv"}),rpcRecvCount:t.gauge({name:"gossipsub_rpc_recv_count_total",help:"RPC recv"}),rpcRecvSubscription:t.gauge({name:"gossipsub_rpc_recv_subscription_total",help:"RPC recv"}),rpcRecvMessage:t.gauge({name:"gossipsub_rpc_recv_message_total",help:"RPC recv"}),rpcRecvControl:t.gauge({name:"gossipsub_rpc_recv_control_total",help:"RPC recv"}),rpcRecvIHave:t.gauge({name:"gossipsub_rpc_recv_ihave_total",help:"RPC recv"}),rpcRecvIWant:t.gauge({name:"gossipsub_rpc_recv_iwant_total",help:"RPC recv"}),rpcRecvGraft:t.gauge({name:"gossipsub_rpc_recv_graft_total",help:"RPC recv"}),rpcRecvPrune:t.gauge({name:"gossipsub_rpc_recv_prune_total",help:"RPC recv"}),rpcDataError:t.gauge({name:"gossipsub_rpc_data_err_count_total",help:"RPC data error"}),rpcRecvError:t.gauge({name:"gossipsub_rpc_recv_err_count_total",help:"RPC recv error"}),rpcRecvNotAccepted:t.gauge({name:"gossipsub_rpc_rcv_not_accepted_total",help:"Total count of RPC dropped because acceptFrom() == false"}),rpcSentBytes:t.gauge({name:"gossipsub_rpc_sent_bytes_total",help:"RPC sent"}),rpcSentCount:t.gauge({name:"gossipsub_rpc_sent_count_total",help:"RPC sent"}),rpcSentSubscription:t.gauge({name:"gossipsub_rpc_sent_subscription_total",help:"RPC sent"}),rpcSentMessage:t.gauge({name:"gossipsub_rpc_sent_message_total",help:"RPC sent"}),rpcSentControl:t.gauge({name:"gossipsub_rpc_sent_control_total",help:"RPC sent"}),rpcSentIHave:t.gauge({name:"gossipsub_rpc_sent_ihave_total",help:"RPC sent"}),rpcSentIWant:t.gauge({name:"gossipsub_rpc_sent_iwant_total",help:"RPC sent"}),rpcSentGraft:t.gauge({name:"gossipsub_rpc_sent_graft_total",help:"RPC sent"}),rpcSentPrune:t.gauge({name:"gossipsub_rpc_sent_prune_total",help:"RPC sent"}),rpcSentIDontWant:t.gauge({name:"gossipsub_rpc_sent_idontwant_total",help:"RPC sent"}),msgPublishCount:t.gauge({name:"gossipsub_msg_publish_count_total",help:"Total count of msg published by topic",labelNames:["topic"]}),msgPublishPeersByTopic:t.gauge({name:"gossipsub_msg_publish_peers_total",help:"Total count of peers that we publish a msg to",labelNames:["topic"]}),directPeersPublishedTotal:t.gauge({name:"gossipsub_direct_peers_published_total",help:"Total direct peers that we publish a msg to",labelNames:["topic"]}),floodsubPeersPublishedTotal:t.gauge({name:"gossipsub_floodsub_peers_published_total",help:"Total floodsub peers that we publish a msg to",labelNames:["topic"]}),meshPeersPublishedTotal:t.gauge({name:"gossipsub_mesh_peers_published_total",help:"Total mesh peers that we publish a msg to",labelNames:["topic"]}),fanoutPeersPublishedTotal:t.gauge({name:"gossipsub_fanout_peers_published_total",help:"Total fanout peers that we publish a msg to",labelNames:["topic"]}),msgPublishBytes:t.gauge({name:"gossipsub_msg_publish_bytes_total",help:"Total count of msg publish data.length bytes",labelNames:["topic"]}),msgPublishTime:t.histogram({name:"gossipsub_msg_publish_seconds",help:"Total time in seconds to publish a message",buckets:[.001,.002,.005,.01,.1,.5,1],labelNames:["topic"]}),msgForwardCount:t.gauge({name:"gossipsub_msg_forward_count_total",help:"Total count of msg forwarded by topic",labelNames:["topic"]}),msgForwardPeers:t.gauge({name:"gossipsub_msg_forward_peers_total",help:"Total count of peers that we forward a msg to",labelNames:["topic"]}),msgReceivedPreValidation:t.gauge({name:"gossipsub_msg_received_prevalidation_total",help:"Total count of recv msgs before any validation",labelNames:["topic"]}),msgReceivedError:t.gauge({name:"gossipsub_msg_received_error_total",help:"Total count of recv msgs error",labelNames:["topic"]}),prevalidationInvalidTotal:t.gauge({name:"gossipsub_pre_validation_invalid_total",help:"Total count of invalid messages received",labelNames:["topic"]}),prevalidationValidTotal:t.gauge({name:"gossipsub_pre_validation_valid_total",help:"Total count of valid messages received",labelNames:["topic"]}),prevalidationDuplicateTotal:t.gauge({name:"gossipsub_pre_validation_duplicate_total",help:"Total count of duplicate messages received",labelNames:["topic"]}),prevalidationUnknownTotal:t.gauge({name:"gossipsub_pre_validation_unknown_status_total",help:"Total count of unknown_status messages received",labelNames:["topic"]}),msgReceivedInvalid:t.gauge({name:"gossipsub_msg_received_invalid_total",help:"Tracks specific reason of invalid",labelNames:["error"]}),msgReceivedInvalidByTopic:t.gauge({name:"gossipsub_msg_received_invalid_by_topic_total",help:"Tracks specific invalid message by topic",labelNames:["topic"]}),duplicateMsgDeliveryDelay:t.histogram({name:"gossisub_duplicate_msg_delivery_delay_seconds",help:"Time since the 1st duplicated message validated",labelNames:["topic"],buckets:[.25*r.maxMeshMessageDeliveriesWindowSec,.5*r.maxMeshMessageDeliveriesWindowSec,Number(r.maxMeshMessageDeliveriesWindowSec),2*r.maxMeshMessageDeliveriesWindowSec,4*r.maxMeshMessageDeliveriesWindowSec]}),duplicateMsgLateDelivery:t.gauge({name:"gossisub_duplicate_msg_late_delivery_total",help:"Total count of late duplicate message delivery by topic, which triggers P3 penalty",labelNames:["topic"]}),duplicateMsgIgnored:t.gauge({name:"gossisub_ignored_published_duplicate_msgs_total",help:"Total count of published duplicate message ignored by topic",labelNames:["topic"]}),scoreFnCalls:t.gauge({name:"gossipsub_score_fn_calls_total",help:"Total times score() is called"}),scoreFnRuns:t.gauge({name:"gossipsub_score_fn_runs_total",help:"Total times score() call actually computed computeScore(), no cache"}),scoreCachedDelta:t.histogram({name:"gossipsub_score_cache_delta",help:"Delta of score between cached values that expired",buckets:[10,100,1e3]}),peersByScoreThreshold:t.gauge({name:"gossipsub_peers_by_score_threshold_count",help:"Current count of peers by score threshold",labelNames:["threshold"]}),score:t.avgMinMax({name:"gossipsub_score",help:"Avg min max of gossip scores"}),scoreWeights:t.avgMinMax({name:"gossipsub_score_weights",help:"Separate score weights",labelNames:["topic","p"]}),scorePerMesh:t.avgMinMax({name:"gossipsub_score_per_mesh",help:"Histogram of the scores for each mesh topic",labelNames:["topic"]}),scoringPenalties:t.gauge({name:"gossipsub_scoring_penalties_total",help:"A counter of the kind of penalties being applied to peers",labelNames:["penalty"]}),behaviourPenalty:t.histogram({name:"gossipsub_peer_stat_behaviour_penalty",help:"Current peer stat behaviour_penalty at each scrape",buckets:[.25*r.behaviourPenaltyThreshold,.5*r.behaviourPenaltyThreshold,Number(r.behaviourPenaltyThreshold),2*r.behaviourPenaltyThreshold,4*r.behaviourPenaltyThreshold]}),ihaveRcvIgnored:t.gauge({name:"gossipsub_ihave_rcv_ignored_total",help:"Total received IHAVE messages that we ignore for some reason",labelNames:["reason"]}),ihaveRcvMsgids:t.gauge({name:"gossipsub_ihave_rcv_msgids_total",help:"Total received IHAVE messages by topic",labelNames:["topic"]}),ihaveRcvNotSeenMsgids:t.gauge({name:"gossipsub_ihave_rcv_not_seen_msgids_total",help:"Total messages per topic we do not have, not actual requests",labelNames:["topic"]}),iwantRcvMsgids:t.gauge({name:"gossipsub_iwant_rcv_msgids_total",help:"Total received IWANT messages by topic",labelNames:["topic"]}),iwantRcvDonthaveMsgids:t.gauge({name:"gossipsub_iwant_rcv_dont_have_msgids_total",help:"Total requested messageIDs that we do not have"}),idontwantRcvMsgids:t.gauge({name:"gossipsub_idontwant_rcv_msgids_total",help:"Total received IDONTWANT messages"}),idontwantRcvDonthaveMsgids:t.gauge({name:"gossipsub_idontwant_rcv_dont_have_msgids_total",help:"Total received IDONTWANT messageIDs that we do not have in mcache"}),iwantPromiseStarted:t.gauge({name:"gossipsub_iwant_promise_sent_total",help:"Total count of started IWANT promises"}),iwantPromiseResolved:t.gauge({name:"gossipsub_iwant_promise_resolved_total",help:"Total count of resolved IWANT promises"}),iwantPromiseResolvedFromDuplicate:t.gauge({name:"gossipsub_iwant_promise_resolved_from_duplicate_total",help:"Total count of resolved IWANT promises from duplicate messages"}),iwantPromiseResolvedPeers:t.gauge({name:"gossipsub_iwant_promise_resolved_peers",help:"Total count of peers we have asked IWANT promises that are resolved"}),iwantPromiseBroken:t.gauge({name:"gossipsub_iwant_promise_broken",help:"Total count of broken IWANT promises"}),iwantMessagePruned:t.gauge({name:"gossipsub_iwant_message_pruned",help:"Total count of pruned IWANT messages"}),iwantPromiseDeliveryTime:t.histogram({name:"gossipsub_iwant_promise_delivery_seconds",help:"Histogram of delivery time of resolved IWANT promises",buckets:[.5*r.gossipPromiseExpireSec,Number(r.gossipPromiseExpireSec),2*r.gossipPromiseExpireSec,4*r.gossipPromiseExpireSec]}),iwantPromiseUntracked:t.gauge({name:"gossip_iwant_promise_untracked",help:"Total count of untracked IWANT promise"}),connectedPeersBackoffSec:t.histogram({name:"gossipsub_connected_peers_backoff_seconds",help:"Backoff time in seconds",buckets:[1,2,4,10,20,60,120]}),cacheSize:t.gauge({name:"gossipsub_cache_size",help:"Unbounded cache sizes",labelNames:["cache"]}),mcacheSize:t.gauge({name:"gossipsub_mcache_size",help:"Current mcache msg count"}),mcacheNotValidatedCount:t.gauge({name:"gossipsub_mcache_not_validated_count",help:"Current mcache msg count not validated"}),fastMsgIdCacheCollision:t.gauge({name:"gossipsub_fastmsgid_cache_collision_total",help:"Total count of key collisions on fastmsgid cache put"}),newConnectionCount:t.gauge({name:"gossipsub_new_connection_total",help:"Total new connection by status",labelNames:["status"]}),topicStrToLabel:e,toTopic(n){return this.topicStrToLabel.get(n)??n},onJoin(n){this.topicSubscriptionStatus.set({topicStr:n},1),this.meshPeerCounts.set({topicStr:n},0)},onLeave(n){this.topicSubscriptionStatus.set({topicStr:n},0),this.meshPeerCounts.set({topicStr:n},0)},onAddToMesh(n,i,s){const a=this.toTopic(n);switch(i){case pa.Fanout:this.meshPeerInclusionEventsFanout.inc({topic:a},s);break;case pa.Random:this.meshPeerInclusionEventsRandom.inc({topic:a},s);break;case pa.Subscribed:this.meshPeerInclusionEventsSubscribed.inc({topic:a},s);break;case pa.Outbound:this.meshPeerInclusionEventsOutbound.inc({topic:a},s);break;case pa.NotEnough:this.meshPeerInclusionEventsNotEnough.inc({topic:a},s);break;case pa.Opportunistic:this.meshPeerInclusionEventsOpportunistic.inc({topic:a},s);break;default:this.meshPeerInclusionEventsUnknown.inc({topic:a},s);break}},onRemoveFromMesh(n,i,s){const a=this.toTopic(n);switch(i){case al.Dc:this.meshPeerChurnEventsDisconnected.inc({topic:a},s);break;case al.BadScore:this.meshPeerChurnEventsBadScore.inc({topic:a},s);break;case al.Prune:this.meshPeerChurnEventsPrune.inc({topic:a},s);break;case al.Excess:this.meshPeerChurnEventsExcess.inc({topic:a},s);break;default:this.meshPeerChurnEventsUnknown.inc({topic:a},s);break}},onReportValidation(n,i,s){if(this.asyncValidationMcacheHit.inc({hit:n!=null?"hit":"miss"}),n!=null){const a=this.toTopic(n.message.topic);switch(i){case yo.Accept:this.acceptedMessagesTotal.inc({topic:a});break;case yo.Ignore:this.ignoredMessagesTotal.inc({topic:a});break;case yo.Reject:this.rejectedMessagesTotal.inc({topic:a});break;default:this.unknownValidationResultsTotal.inc({topic:a});break}}s!=null?this.asyncValidationDelayFromFirstSeenSec.observe((Date.now()-s)/1e3):this.asyncValidationUnknownFirstSeen.inc()},onScorePenalty(n){this.scoringPenalties.inc({penalty:n},1)},onIhaveRcv(n,i,s){const a=this.toTopic(n);this.ihaveRcvMsgids.inc({topic:a},i),this.ihaveRcvNotSeenMsgids.inc({topic:a},s)},onIwantRcv(n,i){for(const[s,a]of n){const o=this.toTopic(s);this.iwantRcvMsgids.inc({topic:o},a)}this.iwantRcvDonthaveMsgids.inc(i)},onIdontwantRcv(n,i){this.idontwantRcvMsgids.inc(n),this.idontwantRcvDonthaveMsgids.inc(i)},onForwardMsg(n,i){const s=this.toTopic(n);this.msgForwardCount.inc({topic:s},1),this.msgForwardPeers.inc({topic:s},i)},onPublishMsg(n,i,s,a,o){const c=this.toTopic(n);this.msgPublishCount.inc({topic:c},1),this.msgPublishBytes.inc({topic:c},s*a),this.msgPublishPeersByTopic.inc({topic:c},s),this.directPeersPublishedTotal.inc({topic:c},i.direct),this.floodsubPeersPublishedTotal.inc({topic:c},i.floodsub),this.meshPeersPublishedTotal.inc({topic:c},i.mesh),this.fanoutPeersPublishedTotal.inc({topic:c},i.fanout),this.msgPublishTime.observe({topic:c},o/1e3)},onMsgRecvPreValidation(n){const i=this.toTopic(n);this.msgReceivedPreValidation.inc({topic:i},1)},onMsgRecvError(n){const i=this.toTopic(n);this.msgReceivedError.inc({topic:i},1)},onPrevalidationResult(n,i){const s=this.toTopic(n);switch(i){case da.duplicate:this.prevalidationDuplicateTotal.inc({topic:s});break;case da.invalid:this.prevalidationInvalidTotal.inc({topic:s});break;case da.valid:this.prevalidationValidTotal.inc({topic:s});break;default:this.prevalidationUnknownTotal.inc({topic:s});break}},onMsgRecvInvalid(n,i){const s=this.toTopic(n),a=i.reason===pc.Error?i.error:i.reason;this.msgReceivedInvalid.inc({error:a},1),this.msgReceivedInvalidByTopic.inc({topic:s},1)},onDuplicateMsgDelivery(n,i,s){const a=this.toTopic(n);this.duplicateMsgDeliveryDelay.observe({topic:a},i/1e3),s&&this.duplicateMsgLateDelivery.inc({topic:a},1)},onPublishDuplicateMsg(n){const i=this.toTopic(n);this.duplicateMsgIgnored.inc({topic:i},1)},onPeerReadStreamError(){this.peerReadStreamError.inc(1)},onRpcRecvError(){this.rpcRecvError.inc(1)},onRpcDataError(){this.rpcDataError.inc(1)},onRpcRecv(n,i){this.rpcRecvBytes.inc(i),this.rpcRecvCount.inc(1),n.subscriptions!=null&&this.rpcRecvSubscription.inc(n.subscriptions.length),n.messages!=null&&this.rpcRecvMessage.inc(n.messages.length),n.control!=null&&(this.rpcRecvControl.inc(1),n.control.ihave!=null&&this.rpcRecvIHave.inc(n.control.ihave.length),n.control.iwant!=null&&this.rpcRecvIWant.inc(n.control.iwant.length),n.control.graft!=null&&this.rpcRecvGraft.inc(n.control.graft.length),n.control.prune!=null&&this.rpcRecvPrune.inc(n.control.prune.length))},onRpcSent(n,i){if(this.rpcSentBytes.inc(i),this.rpcSentCount.inc(1),n.subscriptions!=null&&this.rpcSentSubscription.inc(n.subscriptions.length),n.messages!=null&&this.rpcSentMessage.inc(n.messages.length),n.control!=null){const s=n.control.ihave?.length??0,a=n.control.iwant?.length??0,o=n.control.graft?.length??0,c=n.control.prune?.length??0,u=n.control.idontwant?.length??0;s>0&&this.rpcSentIHave.inc(s),a>0&&this.rpcSentIWant.inc(a),o>0&&this.rpcSentGraft.inc(o),c>0&&this.rpcSentPrune.inc(c),u>0&&this.rpcSentIDontWant.inc(u),(s>0||a>0||o>0||c>0||u>0)&&this.rpcSentControl.inc(1)}},registerScores(n,i){let s=0,a=0,o=0,c=0;for(const u of n)u>=i.graylistThreshold&&s++,u>=i.publishThreshold&&a++,u>=i.gossipThreshold&&o++,u>=0&&c++;this.peersByScoreThreshold.set({threshold:S1.graylist},s),this.peersByScoreThreshold.set({threshold:S1.publish},a),this.peersByScoreThreshold.set({threshold:S1.gossip},o),this.peersByScoreThreshold.set({threshold:S1.mesh},c),this.score.set(n)},registerScoreWeights(n){for(const[i,s]of n.byTopic)this.scoreWeights.set({topic:i,p:"p1"},s.p1w),this.scoreWeights.set({topic:i,p:"p2"},s.p2w),this.scoreWeights.set({topic:i,p:"p3"},s.p3w),this.scoreWeights.set({topic:i,p:"p3b"},s.p3bw),this.scoreWeights.set({topic:i,p:"p4"},s.p4w);this.scoreWeights.set({p:"p5"},n.p5w),this.scoreWeights.set({p:"p6"},n.p6w),this.scoreWeights.set({p:"p7"},n.p7w)},registerScorePerMesh(n,i){const s=new Map;n.forEach((a,o)=>{const c=this.topicStrToLabel.get(o)??"unknown";let u=s.get(c);u==null&&(u=new Set,s.set(c,u)),a.forEach(l=>u?.add(l))});for(const[a,o]of s){const c=[];o.forEach(u=>{c.push(i.get(u)??0)}),this.scorePerMesh.set({topic:a},c)}}}}class pn extends Error{static name="InvalidPeerScoreParamsError";constructor(e="Invalid peer score params"){super(e),this.name="InvalidPeerScoreParamsError"}}const Nbt={topics:{},topicScoreCap:10,appSpecificScore:()=>0,appSpecificWeight:10,IPColocationFactorWeight:-5,IPColocationFactorThreshold:10,IPColocationFactorWhitelist:new Set,behaviourPenaltyWeight:-10,behaviourPenaltyThreshold:0,behaviourPenaltyDecay:.2,decayInterval:1e3,decayToZero:.1,retainScore:3600*1e3},Fbt={topicWeight:.5,timeInMeshWeight:1,timeInMeshQuantum:1,timeInMeshCap:3600,firstMessageDeliveriesWeight:1,firstMessageDeliveriesDecay:.5,firstMessageDeliveriesCap:2e3,meshMessageDeliveriesWeight:-1,meshMessageDeliveriesDecay:.5,meshMessageDeliveriesCap:100,meshMessageDeliveriesThreshold:20,meshMessageDeliveriesWindow:10,meshMessageDeliveriesActivation:5e3,meshFailurePenaltyWeight:-1,meshFailurePenaltyDecay:.5,invalidMessageDeliveriesWeight:-1,invalidMessageDeliveriesDecay:.3};function Lbt(t={}){return{...Nbt,...t,topics:t.topics!=null?Object.entries(t.topics).reduce((e,[r,n])=>(e[r]=$bt(n),e),{}):{}}}function $bt(t={}){return{...Fbt,...t}}function Ubt(t){for(const[e,r]of Object.entries(t.topics))try{jbt(r)}catch(n){throw new pn(`invalid score parameters for topic ${e}: ${n.message}`)}if(t.topicScoreCap<0)throw new pn("invalid topic score cap; must be positive (or 0 for no cap)");if(t.appSpecificScore===null||t.appSpecificScore===void 0)throw new pn("missing application specific score function");if(t.IPColocationFactorWeight>0)throw new pn("invalid IPColocationFactorWeight; must be negative (or 0 to disable)");if(t.IPColocationFactorWeight!==0&&t.IPColocationFactorThreshold<1)throw new pn("invalid IPColocationFactorThreshold; must be at least 1");if(t.behaviourPenaltyWeight>0)throw new pn("invalid BehaviourPenaltyWeight; must be negative (or 0 to disable)");if(t.behaviourPenaltyWeight!==0&&(t.behaviourPenaltyDecay<=0||t.behaviourPenaltyDecay>=1))throw new pn("invalid BehaviourPenaltyDecay; must be between 0 and 1");if(t.decayInterval<1e3)throw new pn("invalid DecayInterval; must be at least 1s");if(t.decayToZero<=0||t.decayToZero>=1)throw new pn("invalid DecayToZero; must be between 0 and 1")}function jbt(t){if(t.topicWeight<0)throw new pn("invalid topic weight; must be >= 0");if(t.timeInMeshQuantum===0)throw new pn("invalid TimeInMeshQuantum; must be non zero");if(t.timeInMeshWeight<0)throw new pn("invalid TimeInMeshWeight; must be positive (or 0 to disable)");if(t.timeInMeshWeight!==0&&t.timeInMeshQuantum<=0)throw new pn("invalid TimeInMeshQuantum; must be positive");if(t.timeInMeshWeight!==0&&t.timeInMeshCap<=0)throw new pn("invalid TimeInMeshCap; must be positive");if(t.firstMessageDeliveriesWeight<0)throw new pn("invallid FirstMessageDeliveriesWeight; must be positive (or 0 to disable)");if(t.firstMessageDeliveriesWeight!==0&&(t.firstMessageDeliveriesDecay<=0||t.firstMessageDeliveriesDecay>=1))throw new pn("invalid FirstMessageDeliveriesDecay; must be between 0 and 1");if(t.firstMessageDeliveriesWeight!==0&&t.firstMessageDeliveriesCap<=0)throw new pn("invalid FirstMessageDeliveriesCap; must be positive");if(t.meshMessageDeliveriesWeight>0)throw new pn("invalid MeshMessageDeliveriesWeight; must be negative (or 0 to disable)");if(t.meshMessageDeliveriesWeight!==0&&(t.meshMessageDeliveriesDecay<=0||t.meshMessageDeliveriesDecay>=1))throw new pn("invalid MeshMessageDeliveriesDecay; must be between 0 and 1");if(t.meshMessageDeliveriesWeight!==0&&t.meshMessageDeliveriesCap<=0)throw new pn("invalid MeshMessageDeliveriesCap; must be positive");if(t.meshMessageDeliveriesWeight!==0&&t.meshMessageDeliveriesThreshold<=0)throw new pn("invalid MeshMessageDeliveriesThreshold; must be positive");if(t.meshMessageDeliveriesWindow<0)throw new pn("invalid MeshMessageDeliveriesWindow; must be non-negative");if(t.meshMessageDeliveriesWeight!==0&&t.meshMessageDeliveriesActivation<1e3)throw new pn("invalid MeshMessageDeliveriesActivation; must be at least 1s");if(t.meshFailurePenaltyWeight>0)throw new pn("invalid MeshFailurePenaltyWeight; must be negative (or 0 to disable)");if(t.meshFailurePenaltyWeight!==0&&(t.meshFailurePenaltyDecay<=0||t.meshFailurePenaltyDecay>=1))throw new pn("invalid MeshFailurePenaltyDecay; must be between 0 and 1");if(t.invalidMessageDeliveriesWeight>0)throw new pn("invalid InvalidMessageDeliveriesWeight; must be negative (or 0 to disable)");if(t.invalidMessageDeliveriesDecay<=0||t.invalidMessageDeliveriesDecay>=1)throw new pn("invalid InvalidMessageDeliveriesDecay; must be between 0 and 1")}const Vbt={gossipThreshold:-10,publishThreshold:-50,graylistThreshold:-80,acceptPXThreshold:10,opportunisticGraftThreshold:20};function qbt(t={}){return{...Vbt,...t}}function WP(t,e,r=()=>!0){const n=new Set;if(e<=0)return n;for(const i of t){if(n.size>=e)break;r(i)&&(n.add(i),t.delete(i))}return n}function zbt(t,e){return WP(t,e,()=>!0)}class Hbt extends Map{getDefault;constructor(e){super(),this.getDefault=e}getOrDefault(e){let r=super.get(e);return r===void 0&&(r=this.getDefault(),this.set(e,r)),r}}function Wbt(t,e,r,n){let i=0;Object.entries(e.topics).forEach(([a,o])=>{const c=r.topics[a];if(c===void 0)return;let u=0;if(o.inMesh){let h=o.meshTime/c.timeInMeshQuantum;h>c.timeInMeshCap&&(h=c.timeInMeshCap),u+=h*c.timeInMeshWeight}let l=o.firstMessageDeliveries;if(l>c.firstMessageDeliveriesCap&&(l=c.firstMessageDeliveriesCap),u+=l*c.firstMessageDeliveriesWeight,o.meshMessageDeliveriesActive&&o.meshMessageDeliveries<c.meshMessageDeliveriesThreshold){const h=c.meshMessageDeliveriesThreshold-o.meshMessageDeliveries,m=h*h;u+=m*c.meshMessageDeliveriesWeight}const f=o.meshFailurePenalty;u+=f*c.meshFailurePenaltyWeight;const d=o.invalidMessageDeliveries*o.invalidMessageDeliveries;u+=d*c.invalidMessageDeliveriesWeight,i+=u*c.topicWeight}),r.topicScoreCap>0&&i>r.topicScoreCap&&(i=r.topicScoreCap);const s=r.appSpecificScore(t);if(i+=s*r.appSpecificWeight,e.knownIPs.forEach(a=>{if(r.IPColocationFactorWhitelist.has(a))return;const o=n.get(a),c=o!=null?o.size:0;if(c>r.IPColocationFactorThreshold){const u=c-r.IPColocationFactorThreshold,l=u*u;i+=l*r.IPColocationFactorWeight}}),e.behaviourPenalty>r.behaviourPenaltyThreshold){const a=e.behaviourPenalty-r.behaviourPenaltyThreshold,o=a*a;i+=o*r.behaviourPenaltyWeight}return i}var PA,kJ;function Gbt(){if(kJ)return PA;kJ=1;function t(e,n){var n=n||{};this._capacity=n.capacity,this._head=0,this._tail=0,Array.isArray(e)?this._fromArray(e):(this._capacityMask=3,this._list=new Array(4))}return t.prototype.peekAt=function(r){var n=r;if(n===(n|0)){var i=this.size();if(!(n>=i||n<-i))return n<0&&(n+=i),n=this._head+n&this._capacityMask,this._list[n]}},t.prototype.get=function(r){return this.peekAt(r)},t.prototype.peek=function(){if(this._head!==this._tail)return this._list[this._head]},t.prototype.peekFront=function(){return this.peek()},t.prototype.peekBack=function(){return this.peekAt(-1)},Object.defineProperty(t.prototype,"length",{get:function(){return this.size()}}),t.prototype.size=function(){return this._head===this._tail?0:this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)},t.prototype.unshift=function(r){if(arguments.length===0)return this.size();var n=this._list.length;return this._head=this._head-1+n&this._capacityMask,this._list[this._head]=r,this._tail===this._head&&this._growArray(),this._capacity&&this.size()>this._capacity&&this.pop(),this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)},t.prototype.shift=function(){var r=this._head;if(r!==this._tail){var n=this._list[r];return this._list[r]=void 0,this._head=r+1&this._capacityMask,r<2&&this._tail>1e4&&this._tail<=this._list.length>>>2&&this._shrinkArray(),n}},t.prototype.push=function(r){if(arguments.length===0)return this.size();var n=this._tail;return this._list[n]=r,this._tail=n+1&this._capacityMask,this._tail===this._head&&this._growArray(),this._capacity&&this.size()>this._capacity&&this.shift(),this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)},t.prototype.pop=function(){var r=this._tail;if(r!==this._head){var n=this._list.length;this._tail=r-1+n&this._capacityMask;var i=this._list[this._tail];return this._list[this._tail]=void 0,this._head<2&&r>1e4&&r<=n>>>2&&this._shrinkArray(),i}},t.prototype.removeOne=function(r){var n=r;if(n===(n|0)&&this._head!==this._tail){var i=this.size(),s=this._list.length;if(!(n>=i||n<-i)){n<0&&(n+=i),n=this._head+n&this._capacityMask;var a=this._list[n],o;if(r<i/2){for(o=r;o>0;o--)this._list[n]=this._list[n=n-1+s&this._capacityMask];this._list[n]=void 0,this._head=this._head+1+s&this._capacityMask}else{for(o=i-1-r;o>0;o--)this._list[n]=this._list[n=n+1+s&this._capacityMask];this._list[n]=void 0,this._tail=this._tail-1+s&this._capacityMask}return a}}},t.prototype.remove=function(r,n){var i=r,s,a=n;if(i===(i|0)&&this._head!==this._tail){var o=this.size(),c=this._list.length;if(!(i>=o||i<-o||n<1)){if(i<0&&(i+=o),n===1||!n)return s=new Array(1),s[0]=this.removeOne(i),s;if(i===0&&i+n>=o)return s=this.toArray(),this.clear(),s;i+n>o&&(n=o-i);var u;for(s=new Array(n),u=0;u<n;u++)s[u]=this._list[this._head+i+u&this._capacityMask];if(i=this._head+i&this._capacityMask,r+n===o){for(this._tail=this._tail-n+c&this._capacityMask,u=n;u>0;u--)this._list[i=i+1+c&this._capacityMask]=void 0;return s}if(r===0){for(this._head=this._head+n+c&this._capacityMask,u=n-1;u>0;u--)this._list[i=i+1+c&this._capacityMask]=void 0;return s}if(i<o/2){for(this._head=this._head+r+n+c&this._capacityMask,u=r;u>0;u--)this.unshift(this._list[i=i-1+c&this._capacityMask]);for(i=this._head-1+c&this._capacityMask;a>0;)this._list[i=i-1+c&this._capacityMask]=void 0,a--;r<0&&(this._tail=i)}else{for(this._tail=i,i=i+n+c&this._capacityMask,u=o-(n+r);u>0;u--)this.push(this._list[i++]);for(i=this._tail;a>0;)this._list[i=i+1+c&this._capacityMask]=void 0,a--}return this._head<2&&this._tail>1e4&&this._tail<=c>>>2&&this._shrinkArray(),s}}},t.prototype.splice=function(r,n){var i=r;if(i===(i|0)){var s=this.size();if(i<0&&(i+=s),!(i>s))if(arguments.length>2){var a,o,c,u=arguments.length,l=this._list.length,f=2;if(!s||i<s/2){for(o=new Array(i),a=0;a<i;a++)o[a]=this._list[this._head+a&this._capacityMask];for(n===0?(c=[],i>0&&(this._head=this._head+i+l&this._capacityMask)):(c=this.remove(i,n),this._head=this._head+i+l&this._capacityMask);u>f;)this.unshift(arguments[--u]);for(a=i;a>0;a--)this.unshift(o[a-1])}else{o=new Array(s-(i+n));var d=o.length;for(a=0;a<d;a++)o[a]=this._list[this._head+i+n+a&this._capacityMask];for(n===0?(c=[],i!=s&&(this._tail=this._head+i+l&this._capacityMask)):(c=this.remove(i,n),this._tail=this._tail-d+l&this._capacityMask);f<u;)this.push(arguments[f++]);for(a=0;a<d;a++)this.push(o[a])}return c}else return this.remove(i,n)}},t.prototype.clear=function(){this._list=new Array(this._list.length),this._head=0,this._tail=0},t.prototype.isEmpty=function(){return this._head===this._tail},t.prototype.toArray=function(){return this._copyArray(!1)},t.prototype._fromArray=function(r){var n=r.length,i=this._nextPowerOf2(n);this._list=new Array(i),this._capacityMask=i-1,this._tail=n;for(var s=0;s<n;s++)this._list[s]=r[s]},t.prototype._copyArray=function(r,n){var i=this._list,s=i.length,a=this.length;if(n=n|a,n==a&&this._head<this._tail)return this._list.slice(this._head,this._tail);var o=new Array(n),c=0,u;if(r||this._head>this._tail){for(u=this._head;u<s;u++)o[c++]=i[u];for(u=0;u<this._tail;u++)o[c++]=i[u]}else for(u=this._head;u<this._tail;u++)o[c++]=i[u];return o},t.prototype._growArray=function(){if(this._head!=0){var r=this._copyArray(!0,this._list.length<<1);this._tail=this._list.length,this._head=0,this._list=r}else this._tail=this._list.length,this._list.length<<=1;this._capacityMask=this._capacityMask<<1|1},t.prototype._shrinkArray=function(){this._list.length>>>=1,this._capacityMask>>>=1},t.prototype._nextPowerOf2=function(r){var n=Math.log(r)/Math.log(2),i=1<<n+1;return Math.max(i,4)},PA=t,PA}var Kbt=Gbt();const Xbt=In(Kbt);var ua;(function(t){t[t.unknown=0]="unknown",t[t.valid=1]="valid",t[t.invalid=2]="invalid",t[t.ignored=3]="ignored"})(ua||(ua={}));class Ybt{records;queue;constructor(){this.records=new Map,this.queue=new Xbt}getRecord(e){return this.records.get(e)}ensureRecord(e){let r=this.records.get(e);if(r!=null)return r;r={status:ua.unknown,firstSeenTsMs:Date.now(),validated:0,peers:new Set},this.records.set(e,r);const n={msgId:e,expire:Date.now()+Sbt};return this.queue.push(n),r}gc(){const e=Date.now();let r=this.queue.peekFront();for(;r!=null&&r.expire<e;)this.records.delete(r.msgId),this.queue.shift(),r=this.queue.peekFront()}clear(){this.records.clear(),this.queue.clear()}}class Zbt{params;metrics;peerStats=new Map;peerIPs=new Hbt(()=>new Set);scoreCache=new Map;deliveryRecords=new Ybt;_backgroundInterval;scoreCacheValidityMs;computeScore;log;constructor(e,r,n,i){this.params=e,this.metrics=r,Ubt(e),this.scoreCacheValidityMs=i.scoreCacheValidityMs,this.computeScore=i.computeScore??Wbt,this.log=n.forComponent("libp2p:gossipsub:score")}get size(){return this.peerStats.size}start(){if(this._backgroundInterval!=null){this.log("Peer score already running");return}this._backgroundInterval=setInterval(()=>{this.background()},this.params.decayInterval),this.log("started")}stop(){if(this._backgroundInterval==null){this.log("Peer score already stopped");return}clearInterval(this._backgroundInterval),delete this._backgroundInterval,this.peerIPs.clear(),this.peerStats.clear(),this.deliveryRecords.clear(),this.log("stopped")}background(){this.refreshScores(),this.deliveryRecords.gc()}dumpPeerScoreStats(){return Object.fromEntries(Array.from(this.peerStats.entries()).map(([e,r])=>[e,r]))}messageFirstSeenTimestampMs(e){const r=this.deliveryRecords.getRecord(e);return r!=null?r.firstSeenTsMs:null}refreshScores(){const e=Date.now(),r=this.params.decayToZero;this.peerStats.forEach((n,i)=>{if(!n.connected){e>n.expire&&(this.removeIPsForPeer(i,n.knownIPs),this.peerStats.delete(i),this.scoreCache.delete(i));return}Object.entries(n.topics).forEach(([s,a])=>{const o=this.params.topics[s];o!==void 0&&(a.firstMessageDeliveries*=o.firstMessageDeliveriesDecay,a.firstMessageDeliveries<r&&(a.firstMessageDeliveries=0),a.meshMessageDeliveries*=o.meshMessageDeliveriesDecay,a.meshMessageDeliveries<r&&(a.meshMessageDeliveries=0),a.meshFailurePenalty*=o.meshFailurePenaltyDecay,a.meshFailurePenalty<r&&(a.meshFailurePenalty=0),a.invalidMessageDeliveries*=o.invalidMessageDeliveriesDecay,a.invalidMessageDeliveries<r&&(a.invalidMessageDeliveries=0),a.inMesh&&(a.meshTime=e-a.graftTime,a.meshTime>o.meshMessageDeliveriesActivation&&(a.meshMessageDeliveriesActive=!0)))}),n.behaviourPenalty*=this.params.behaviourPenaltyDecay,n.behaviourPenalty<r&&(n.behaviourPenalty=0)})}score(e){this.metrics?.scoreFnCalls.inc();const r=this.peerStats.get(e);if(r==null)return 0;const n=Date.now(),i=this.scoreCache.get(e);if(i!=null&&i.cacheUntil>n)return i.score;this.metrics?.scoreFnRuns.inc();const s=this.computeScore(e,r,this.params,this.peerIPs),a=n+this.scoreCacheValidityMs;return i!=null?(this.metrics?.scoreCachedDelta.observe(Math.abs(s-i.score)),i.score=s,i.cacheUntil=a):this.scoreCache.set(e,{score:s,cacheUntil:a}),s}addPenalty(e,r,n){const i=this.peerStats.get(e);i!=null&&(i.behaviourPenalty+=r,this.metrics?.onScorePenalty(n))}addPeer(e){const r={connected:!0,expire:0,topics:{},knownIPs:new Set,behaviourPenalty:0};this.peerStats.set(e,r)}addIP(e,r){const n=this.peerStats.get(e);n?.knownIPs.add(r),this.peerIPs.getOrDefault(r).add(e)}removeIP(e,r){const n=this.peerStats.get(e);n?.knownIPs.delete(r);const i=this.peerIPs.get(r);i!=null&&(i.delete(e),i.size===0&&this.peerIPs.delete(r))}removePeer(e){const r=this.peerStats.get(e);if(r!=null){if(this.score(e)>0){this.removeIPsForPeer(e,r.knownIPs),this.peerStats.delete(e);return}Object.entries(r.topics).forEach(([n,i])=>{i.firstMessageDeliveries=0;const s=this.params.topics[n].meshMessageDeliveriesThreshold;if(i.inMesh&&i.meshMessageDeliveriesActive&&i.meshMessageDeliveries<s){const a=s-i.meshMessageDeliveries;i.meshFailurePenalty+=a*a}i.inMesh=!1,i.meshMessageDeliveriesActive=!1}),r.connected=!1,r.expire=Date.now()+this.params.retainScore}}graft(e,r){const n=this.peerStats.get(e);if(n!=null){const i=this.getPtopicStats(n,r);i!=null&&(i.inMesh=!0,i.graftTime=Date.now(),i.meshTime=0,i.meshMessageDeliveriesActive=!1)}}prune(e,r){const n=this.peerStats.get(e);if(n!=null){const i=this.getPtopicStats(n,r);if(i!=null){const s=this.params.topics[r].meshMessageDeliveriesThreshold;if(i.meshMessageDeliveriesActive&&i.meshMessageDeliveries<s){const a=s-i.meshMessageDeliveries;i.meshFailurePenalty+=a*a}i.meshMessageDeliveriesActive=!1,i.inMesh=!1}}}validateMessage(e){this.deliveryRecords.ensureRecord(e)}deliverMessage(e,r,n){this.markFirstMessageDelivery(e,n);const i=this.deliveryRecords.ensureRecord(r),s=Date.now();if(i.status!==ua.unknown){this.log("unexpected delivery: message from %s was first seen %s ago and has delivery status %s",e,s-i.firstSeenTsMs,ua[i.status]);return}i.status=ua.valid,i.validated=s,i.peers.forEach(a=>{a!==e.toString()&&this.markDuplicateMessageDelivery(a,n)})}rejectInvalidMessage(e,r){this.markInvalidMessageDelivery(e,r)}rejectMessage(e,r,n,i){switch(i){case pc.Error:this.markInvalidMessageDelivery(e,n);return;case pc.Blacklisted:return}const s=this.deliveryRecords.ensureRecord(r);if(s.status!==ua.unknown){this.log("unexpected rejection: message from %s was first seen %s ago and has delivery status %d",e,Date.now()-s.firstSeenTsMs,ua[s.status]);return}if(i===pc.Ignore){s.status=ua.ignored,s.peers.clear();return}s.status=ua.invalid,this.markInvalidMessageDelivery(e,n),s.peers.forEach(a=>{this.markInvalidMessageDelivery(a,n)}),s.peers.clear()}duplicateMessage(e,r,n){const i=this.deliveryRecords.ensureRecord(r);if(!i.peers.has(e))switch(i.status){case ua.unknown:i.peers.add(e);break;case ua.valid:i.peers.add(e),this.markDuplicateMessageDelivery(e,n,i.validated);break;case ua.invalid:this.markInvalidMessageDelivery(e,n);break;case ua.ignored:break}}markInvalidMessageDelivery(e,r){const n=this.peerStats.get(e);if(n!=null){const i=this.getPtopicStats(n,r);i!=null&&(i.invalidMessageDeliveries+=1)}}markFirstMessageDelivery(e,r){const n=this.peerStats.get(e);if(n!=null){const i=this.getPtopicStats(n,r);if(i!=null){let s=this.params.topics[r].firstMessageDeliveriesCap;i.firstMessageDeliveries=Math.min(s,i.firstMessageDeliveries+1),i.inMesh&&(s=this.params.topics[r].meshMessageDeliveriesCap,i.meshMessageDeliveries=Math.min(s,i.meshMessageDeliveries+1))}}}markDuplicateMessageDelivery(e,r,n){const i=this.peerStats.get(e);if(i!=null){const s=n!==void 0?Date.now():0,a=this.getPtopicStats(i,r);if(a!=null&&a.inMesh){const o=this.params.topics[r];if(n!==void 0){const u=s-n,l=u>o.meshMessageDeliveriesWindow;if(this.metrics?.onDuplicateMsgDelivery(r,u,l),l)return}const c=o.meshMessageDeliveriesCap;a.meshMessageDeliveries=Math.min(c,a.meshMessageDeliveries+1)}}}removeIPsForPeer(e,r){for(const n of r){const i=this.peerIPs.get(n);i!=null&&(i.delete(e),i.size===0&&this.peerIPs.delete(n))}}getPtopicStats(e,r){let n=e.topics[r];return n!==void 0?n:this.params.topics[r]!==void 0?(n={inMesh:!1,graftTime:0,meshTime:0,firstMessageDeliveries:0,meshMessageDeliveries:0,meshMessageDeliveriesActive:!1,meshFailurePenalty:0,invalidMessageDeliveries:0},e.topics[r]=n,n):null}}function Jbt(t,e,r,n,i){let s=0;const a=new Map;if(Object.entries(e.topics).forEach(([d,h])=>{const m=i.get(d)??"unknown",p=r.topics[d];if(p===void 0)return;let g=a.get(m);g==null&&(g={p1w:0,p2w:0,p3w:0,p3bw:0,p4w:0},a.set(m,g));let v=0,y=0,b=0,_=0,x=0;if(h.inMesh){const D=Math.max(h.meshTime/p.timeInMeshQuantum,p.timeInMeshCap);v+=D*p.timeInMeshWeight}let E=h.firstMessageDeliveries;if(E>p.firstMessageDeliveriesCap&&(E=p.firstMessageDeliveriesCap),y+=E*p.firstMessageDeliveriesWeight,h.meshMessageDeliveriesActive&&h.meshMessageDeliveries<p.meshMessageDeliveriesThreshold){const D=p.meshMessageDeliveriesThreshold-h.meshMessageDeliveries,z=D*D;b+=z*p.meshMessageDeliveriesWeight}const k=h.meshFailurePenalty;_+=k*p.meshFailurePenaltyWeight;const B=h.invalidMessageDeliveries*h.invalidMessageDeliveries;x+=B*p.invalidMessageDeliveriesWeight,s+=(v+y+b+_+x)*p.topicWeight,g.p1w+=v,g.p2w+=y,g.p3w+=b,g.p3bw+=_,g.p4w+=x}),r.topicScoreCap>0&&s>r.topicScoreCap){s=r.topicScoreCap;const d=r.topicScoreCap/s;for(const h of a.values())h.p1w*=d,h.p2w*=d,h.p3w*=d,h.p3bw*=d,h.p4w*=d}let o=0,c=0,u=0;const l=r.appSpecificScore(t);o+=l*r.appSpecificWeight,e.knownIPs.forEach(d=>{if(r.IPColocationFactorWhitelist.has(d))return;const h=n.get(d),m=h!=null?h.size:0;if(m>r.IPColocationFactorThreshold){const p=m-r.IPColocationFactorThreshold,g=p*p;c+=g*r.IPColocationFactorWeight}});const f=e.behaviourPenalty*e.behaviourPenalty;return u+=f*r.behaviourPenaltyWeight,s+=o+c+u,{byTopic:a,p5w:o,p6w:c,p7w:u,score:s}}function Qbt(t,e,r,n,i){const s={byTopic:new Map,p5w:[],p6w:[],p7w:[],score:[]};for(const a of t){const o=e.get(a);if(o!=null){const c=Jbt(a,o,r,n,i);for(const[u,l]of c.byTopic){let f=s.byTopic.get(u);f==null&&(f={p1w:[],p2w:[],p3w:[],p3bw:[],p4w:[]},s.byTopic.set(u,f)),f.p1w.push(l.p1w),f.p2w.push(l.p2w),f.p3w.push(l.p3w),f.p3bw.push(l.p3bw),f.p4w.push(l.p4w)}s.p5w.push(c.p5w),s.p6w.push(c.p6w),s.p7w.push(c.p7w),s.score.push(c.score)}else s.p5w.push(0),s.p6w.push(0),s.p7w.push(0),s.score.push(0)}return s}class ewt{rawStream;pushable;closeController;maxBufferSize;constructor(e,r,n){this.rawStream=e,this.pushable=Po(),this.closeController=new AbortController,this.maxBufferSize=n.maxBufferSize??1/0,this.closeController.signal.addEventListener("abort",()=>{e.close().catch(i=>{e.abort(i)})}),Un(this.pushable,this.rawStream).catch(r)}get protocol(){return this.rawStream.protocol}push(e){if(this.pushable.readableLength>this.maxBufferSize)throw Error(`OutboundStream buffer full, size > ${this.maxBufferSize}`);this.pushable.push(ZM.single(e))}pushPrefixed(e){if(this.pushable.readableLength>this.maxBufferSize)throw Error(`OutboundStream buffer full, size > ${this.maxBufferSize}`);this.pushable.push(e)}async close(){this.closeController.abort(),await this.pushable.return()}}class twt{source;rawStream;closeController;constructor(e,r={}){this.rawStream=e,this.closeController=new AbortController,this.closeController.signal.addEventListener("abort",()=>{e.close().catch(n=>{e.abort(n)})}),this.source=Un(this.rawStream,n=>HP(n,r))}async close(){this.closeController.abort()}}class rwt{gossipsubIWantFollowupMs;msgIdToStrFn;metrics;promises=new Map;requestMsByMsg=new Map;requestMsByMsgExpire;constructor(e,r,n){this.gossipsubIWantFollowupMs=e,this.msgIdToStrFn=r,this.metrics=n,this.requestMsByMsgExpire=10*e}get size(){return this.promises.size}get requestMsByMsgSize(){return this.requestMsByMsg.size}addPromise(e,r){const n=Math.floor(Math.random()*r.length),i=r[n],s=this.msgIdToStrFn(i);let a=this.promises.get(s);a==null&&(a=new Map,this.promises.set(s,a));const o=Date.now();a.has(e)||(a.set(e,o+this.gossipsubIWantFollowupMs),this.metrics!=null&&(this.metrics.iwantPromiseStarted.inc(1),this.requestMsByMsg.has(s)||this.requestMsByMsg.set(s,o)))}getBrokenPromises(){const e=Date.now(),r=new Map;let n=0;return this.promises.forEach((i,s)=>{i.forEach((a,o)=>{a<e&&(r.set(o,(r.get(o)??0)+1),i.delete(o),n++)}),i.size===0&&this.promises.delete(s)}),this.metrics?.iwantPromiseBroken.inc(n),r}deliverMessage(e,r=!1){this.trackMessage(e);const n=this.promises.get(e);n!=null&&(this.promises.delete(e),this.metrics!=null&&(this.metrics.iwantPromiseResolved.inc(1),r&&this.metrics.iwantPromiseResolvedFromDuplicate.inc(1),this.metrics.iwantPromiseResolvedPeers.inc(n.size)))}rejectMessage(e,r){switch(this.trackMessage(e),r){case pc.Error:return}this.promises.delete(e)}clear(){this.promises.clear()}prune(){const e=Date.now()-this.requestMsByMsgExpire;let r=0;for(const[n,i]of this.requestMsByMsg.entries())if(i<e)this.requestMsByMsg.delete(n),r++;else break;this.metrics?.iwantMessagePruned.inc(r)}trackMessage(e){if(this.metrics!=null){const r=this.requestMsByMsg.get(e);r!==void 0&&(this.metrics.iwantPromiseDeliveryTime.observe((Date.now()-r)/1e3),this.requestMsByMsg.delete(e))}}}const Ppe=tt("libp2p-pubsub:");async function nwt(t,e,r,n){switch(t.type){case Bp.Signing:{const i={from:t.author.toMultihash().bytes,data:n,seqno:Yf(8),topic:e,signature:void 0,key:void 0},s=qn([Ppe,Eh.Message.encode(i)]);i.signature=await t.privateKey.sign(s),i.key=t.key;const a={type:"signed",from:t.author,data:r,sequenceNumber:BigInt(`0x${nt(i.seqno??new Uint8Array(0),"base16")}`),topic:e,signature:i.signature,key:na(i.key)};return{raw:i,msg:a}}case Bp.Anonymous:return{raw:{from:void 0,data:n,seqno:void 0,topic:e,signature:void 0,key:void 0},msg:{type:"unsigned",data:r,topic:e}};default:throw new Error("Unreachable")}}async function iwt(t,e){switch(t){case ZR:return e.signature!=null?{valid:!1,error:la.SignaturePresent}:e.seqno!=null?{valid:!1,error:la.SeqnoPresent}:e.key!=null?{valid:!1,error:la.FromPresent}:{valid:!0,message:{type:"unsigned",topic:e.topic,data:e.data??new Uint8Array(0)}};case r4:{if(e.seqno==null)return{valid:!1,error:la.InvalidSeqno};if(e.seqno.length!==8)return{valid:!1,error:la.InvalidSeqno};if(e.signature==null)return{valid:!1,error:la.InvalidSignature};if(e.from==null)return{valid:!1,error:la.InvalidPeerId};let r;try{r=Aa(Zn(e.from))}catch{return{valid:!1,error:la.InvalidPeerId}}let n;if(e.key!=null){if(n=na(e.key),r.publicKey!==void 0&&!n.equals(r.publicKey))return{valid:!1,error:la.InvalidPeerId}}else{if(r.publicKey==null)return{valid:!1,error:la.InvalidPeerId};n=r.publicKey}const i={from:e.from,data:e.data,seqno:e.seqno,topic:e.topic,signature:void 0,key:void 0},s=qn([Ppe,Eh.Message.encode(i)]);return await n.verify(s,e.signature)?{valid:!0,message:{type:"signed",from:r,data:e.data??new Uint8Array(0),sequenceNumber:BigInt(`0x${nt(e.seqno,"base16")}`),topic:e.topic,signature:e.signature,key:e.key!=null?na(e.key):n}}:{valid:!1,error:la.InvalidSignature}}default:throw new Error("Unreachable")}}function Vc(t=[],e){return{subscriptions:[],messages:t,control:e!==void 0?{graft:e.graft??[],prune:e.prune??[],ihave:e.ihave??[],iwant:e.iwant??[],idontwant:e.idontwant??[]}:void 0}}function TJ(t){return t.control===void 0&&(t.control={graft:[],prune:[],ihave:[],iwant:[],idontwant:[]}),t}function Ul(t){if(t.length<=1)return t;const e=()=>Math.floor(Math.random()*Math.floor(t.length));for(let r=0;r<t.length;r++){const n=e(),i=t[r];t[r]=t[n],t[n]=i}return t}function swt(t){return nt(t,"base64")}function awt(t,e,r){switch(t){case r4:return{type:Bp.Signing,author:e,key:Ya(r.publicKey),privateKey:r};case ZR:return{type:Bp.Anonymous};default:throw new Error(`Unknown signature policy "${t}"`)}}const owt=(t,e)=>{const r=tt(e.toString(16).padStart(16,"0"),"base16"),n=Ya(t),i=new Uint8Array(n.byteLength+r.length);return i.set(n,0),i.set(r,n.byteLength),i};function cwt(t){if(t.type!=="signed")throw new Error("expected signed message type");if(t.sequenceNumber==null)throw Error("missing seqno field");return owt(t.from.publicKey??t.key,t.sequenceNumber)}async function lwt(t){return ci.encode(t.data)}var Z6;(function(t){t[t.ip4=4]="ip4",t[t.ip6=41]="ip6"})(Z6||(Z6={}));function uwt(t){for(const e of t.tuples())switch(e[0]){case Z6.ip4:case Z6.ip6:return hM(e[0],e[1])}return null}class RA{entries=new Map;validityMs;constructor(e){this.validityMs=e.validityMs}get size(){return this.entries.size}put(e,r){return this.entries.has(e)?!0:(this.entries.set(e,{value:r,validUntilMs:Date.now()+this.validityMs}),!1)}prune(){const e=Date.now();for(const[r,n]of this.entries.entries())if(n.validUntilMs<e)this.entries.delete(r);else break}has(e){return this.entries.has(e)}get(e){const r=this.entries.get(e);return r!=null&&r.validUntilMs>=Date.now()?r.value:void 0}clear(){this.entries.clear()}}var Fa;(function(t){t[t.started=0]="started",t[t.stopped=1]="stopped"})(Fa||(Fa={}));class fwt extends oi{globalSignaturePolicy;multicodecs=[IA,J2t,wJ];publishConfig;dataTransform;peers=new Set;streamsInbound=new Map;streamsOutbound=new Map;outboundInflightQueue=Po({objectMode:!0});direct=new Set;floodsubPeers=new Set;seenCache;acceptFromWhitelist=new Map;topics=new Map;subscriptions=new Set;mesh=new Map;fanout=new Map;fanoutLastpub=new Map;gossip=new Map;control=new Map;peerhave=new Map;iasked=new Map;backoff=new Map;outbound=new Map;msgIdFn;fastMsgIdFn;msgIdToStrFn;fastMsgIdCache;publishedMessageIds;mcache;score;topicValidators=new Map;log;heartbeatTicks=0;gossipTracer;idontwantCounts=new Map;idontwants=new Map;components;directPeerInitial=null;static multicodec=IA;opts;decodeRpcLimits;metrics;status={code:Fa.stopped};maxInboundStreams;maxOutboundStreams;runOnLimitedConnection;allowedTopics;heartbeatTimer=null;constructor(e,r={}){super();const n={fallbackToFloodsub:!0,floodPublish:!0,batchPublish:!1,tagMeshPeers:!0,doPX:!1,directPeers:[],D:Q2t,Dlo:ebt,Dhi:tbt,Dscore:rbt,Dout:nbt,Dlazy:abt,heartbeatInterval:lbt,fanoutTTL:ubt,mcacheLength:ibt,mcacheGossip:sbt,seenTTL:xbt,gossipsubIWantFollowupMs:_bt,prunePeers:fbt,pruneBackoff:dbt,unsubcribeBackoff:hbt,graftFloodThreshold:bbt,opportunisticGraftPeers:ybt,opportunisticGraftTicks:vbt,directConnectTicks:mbt,gossipFactor:obt,idontwantMinDataSize:Rbt,idontwantMaxMessages:Obt,...r,scoreParams:Lbt(r.scoreParams),scoreThresholds:qbt(r.scoreThresholds)};if(this.components=e,this.decodeRpcLimits=n.decodeRpcLimits??Bbt,this.globalSignaturePolicy=n.globalSignaturePolicy??r4,n.fallbackToFloodsub&&this.multicodecs.push(bJ),this.log=e.logger.forComponent(n.debugName??"libp2p:gossipsub"),this.opts=n,this.direct=new Set(n.directPeers.map(i=>i.id.toString())),this.seenCache=new RA({validityMs:n.seenTTL}),this.publishedMessageIds=new RA({validityMs:n.seenTTL}),r.msgIdFn!=null)this.msgIdFn=r.msgIdFn;else switch(this.globalSignaturePolicy){case r4:this.msgIdFn=cwt;break;case ZR:this.msgIdFn=lwt;break;default:throw new Error(`Invalid globalSignaturePolicy: ${this.globalSignaturePolicy}`)}if(r.fastMsgIdFn!=null&&(this.fastMsgIdFn=r.fastMsgIdFn,this.fastMsgIdCache=new RA({validityMs:n.seenTTL})),this.msgIdToStrFn=r.msgIdToStrFn??swt,this.mcache=r.messageCache??new Dbt(n.mcacheGossip,n.mcacheLength,this.msgIdToStrFn),r.dataTransform!=null&&(this.dataTransform=r.dataTransform),r.metricsRegister!=null){if(r.metricsTopicStrToLabel==null)throw Error("Must set metricsTopicStrToLabel with metrics");const i=Math.max(...Object.values(n.scoreParams.topics).map(a=>a.meshMessageDeliveriesWindow),Ibt),s=Mbt(r.metricsRegister,r.metricsTopicStrToLabel,{gossipPromiseExpireSec:this.opts.gossipsubIWantFollowupMs/1e3,behaviourPenaltyThreshold:n.scoreParams.behaviourPenaltyThreshold,maxMeshMessageDeliveriesWindowSec:i/1e3});s.mcacheSize.addCollect(()=>{this.onScrapeMetrics(s)});for(const a of this.multicodecs)s.protocolsEnabled.set({protocol:a},1);this.metrics=s}else this.metrics=null;this.gossipTracer=new rwt(this.opts.gossipsubIWantFollowupMs,this.msgIdToStrFn,this.metrics),this.score=new Zbt(this.opts.scoreParams,this.metrics,this.components.logger,{scoreCacheValidityMs:n.heartbeatInterval}),this.maxInboundStreams=r.maxInboundStreams,this.maxOutboundStreams=r.maxOutboundStreams,this.runOnLimitedConnection=r.runOnLimitedConnection,this.allowedTopics=n.allowedTopics!=null?new Set(n.allowedTopics):null}[Symbol.toStringTag]="@chainsafe/libp2p-gossipsub";[Ui]=["@libp2p/pubsub"];[xu]=["@libp2p/identify"];getPeers(){return[...this.peers.keys()].map(e=>Ln(e))}isStarted(){return this.status.code===Fa.started}async start(){if(this.isStarted())return;this.log("starting"),this.publishConfig=awt(this.globalSignaturePolicy,this.components.peerId,this.components.privateKey),this.outboundInflightQueue=Po({objectMode:!0}),Un(this.outboundInflightQueue,async s=>{for await(const{peerId:a,connection:o}of s)await this.createOutboundStream(a,o)}).catch(s=>{this.log.error("outbound inflight queue error",s)}),await Promise.all(this.opts.directPeers.map(async s=>{await this.components.peerStore.merge(s.id,{multiaddrs:s.addrs})}));const e=this.components.registrar;await Promise.all(this.multicodecs.map(async s=>e.handle(s,this.onIncomingStream.bind(this),{maxInboundStreams:this.maxInboundStreams,maxOutboundStreams:this.maxOutboundStreams,runOnLimitedConnection:this.runOnLimitedConnection})));const r={onConnect:this.onPeerConnected.bind(this),onDisconnect:this.onPeerDisconnected.bind(this),notifyOnLimitedConnection:this.runOnLimitedConnection},n=await Promise.all(this.multicodecs.map(async s=>e.register(s,r))),i=setTimeout(this.runHeartbeat,_J);this.status={code:Fa.started,registrarTopologyIds:n,heartbeatTimeout:i,hearbeatStartMs:Date.now()+_J},this.score.start(),this.directPeerInitial=setTimeout(()=>{Promise.resolve().then(async()=>{await Promise.all(Array.from(this.direct).map(async s=>this.connect(s)))}).catch(s=>{this.log(s)})},gbt),this.opts.tagMeshPeers&&(this.addEventListener("gossipsub:graft",this.tagMeshPeer),this.addEventListener("gossipsub:prune",this.untagMeshPeer)),this.log("started")}async stop(){if(this.log("stopping"),this.status.code!==Fa.started)return;const{registrarTopologyIds:e}=this.status;this.status={code:Fa.stopped},this.opts.tagMeshPeers&&(this.removeEventListener("gossipsub:graft",this.tagMeshPeer),this.removeEventListener("gossipsub:prune",this.untagMeshPeer));const r=this.components.registrar;await Promise.all(this.multicodecs.map(async i=>r.unhandle(i))),e.forEach(i=>{r.unregister(i)}),this.outboundInflightQueue.end();const n=[];for(const i of this.streamsOutbound.values())n.push(i.close());this.streamsOutbound.clear();for(const i of this.streamsInbound.values())n.push(i.close());this.streamsInbound.clear(),await Promise.all(n),this.peers.clear(),this.subscriptions.clear(),this.heartbeatTimer!=null&&(this.heartbeatTimer.cancel(),this.heartbeatTimer=null),this.score.stop(),this.mesh.clear(),this.fanout.clear(),this.fanoutLastpub.clear(),this.gossip.clear(),this.control.clear(),this.peerhave.clear(),this.iasked.clear(),this.backoff.clear(),this.outbound.clear(),this.gossipTracer.clear(),this.seenCache.clear(),this.fastMsgIdCache!=null&&this.fastMsgIdCache.clear(),this.directPeerInitial!=null&&clearTimeout(this.directPeerInitial),this.idontwantCounts.clear(),this.idontwants.clear(),this.log("stopped")}dumpPeerScoreStats(){return this.score.dumpPeerScoreStats()}onIncomingStream({stream:e,connection:r}){if(!this.isStarted())return;const n=r.remotePeer;this.addPeer(n,r.direction,r.remoteAddr),this.createInboundStream(n,e),this.outboundInflightQueue.push({peerId:n,connection:r})}onPeerConnected(e,r){this.metrics?.newConnectionCount.inc({status:r.status}),!(!this.isStarted()||r.status!=="open")&&(this.addPeer(e,r.direction,r.remoteAddr),this.outboundInflightQueue.push({peerId:e,connection:r}))}onPeerDisconnected(e){this.log("connection ended %p",e),this.removePeer(e)}async createOutboundStream(e,r){if(!this.isStarted())return;const n=e.toString();if(this.peers.has(n)&&!this.streamsOutbound.has(n))try{const i=new ewt(await r.newStream(this.multicodecs,{runOnLimitedConnection:this.runOnLimitedConnection}),a=>{this.log.error("outbound pipe error",a)},{maxBufferSize:this.opts.maxOutboundBufferSize});this.log("create outbound stream %p",e),this.streamsOutbound.set(n,i);const s=i.protocol;s===bJ&&this.floodsubPeers.add(n),this.metrics?.peersPerProtocol.inc({protocol:s},1),this.subscriptions.size>0&&(this.log("send subscriptions to",n),this.sendSubscriptions(n,Array.from(this.subscriptions),!0))}catch(i){this.log.error("createOutboundStream error",i)}}createInboundStream(e,r){if(!this.isStarted())return;const n=e.toString();if(!this.peers.has(n))return;const i=this.streamsInbound.get(n);i!==void 0&&(this.log("replacing existing inbound steam %s",n),i.close().catch(a=>{this.log.error(a)})),this.log("create inbound stream %s",n);const s=new twt(r,{maxDataLength:this.opts.maxInboundDataLength});this.streamsInbound.set(n,s),this.pipePeerReadStream(e,s.source).catch(a=>{this.log(a)})}addPeer(e,r,n){const i=e.toString();if(!this.peers.has(i)){this.log("new peer %p",e),this.peers.add(i),this.score.addPeer(i);const s=uwt(n);s!==null?this.score.addIP(i,s):this.log("Added peer has no IP in current address %s %s",i,n.toString()),this.outbound.has(i)||this.outbound.set(i,r==="outbound")}}removePeer(e){const r=e.toString();if(!this.peers.has(r))return;this.log("delete peer %p",e),this.peers.delete(r);const n=this.streamsOutbound.get(r),i=this.streamsInbound.get(r);n!=null&&this.metrics?.peersPerProtocol.inc({protocol:n.protocol},-1),n?.close().catch(s=>{this.log.error(s)}),i?.close().catch(s=>{this.log.error(s)}),this.streamsOutbound.delete(r),this.streamsInbound.delete(r);for(const s of this.topics.values())s.delete(r);for(const[s,a]of this.mesh)a.delete(r)&&this.metrics?.onRemoveFromMesh(s,al.Dc,1);for(const s of this.fanout.values())s.delete(r);this.floodsubPeers.delete(r),this.gossip.delete(r),this.control.delete(r),this.outbound.delete(r),this.idontwantCounts.delete(r),this.idontwants.delete(r),this.score.removePeer(r),this.acceptFromWhitelist.delete(r)}get started(){return this.status.code===Fa.started}getMeshPeers(e){const r=this.mesh.get(e);return r!=null?Array.from(r):[]}getSubscribers(e){const r=this.topics.get(e);return(r!=null?Array.from(r):[]).map(n=>Ln(n))}getTopics(){return Array.from(this.subscriptions)}async pipePeerReadStream(e,r){try{await Un(r,async n=>{for await(const i of n)try{const s=i.subarray(),a=Eh.decode(s,{limits:{subscriptions:this.decodeRpcLimits.maxSubscriptions,messages:this.decodeRpcLimits.maxMessages,control$:{ihave:this.decodeRpcLimits.maxIhaveMessageIDs,iwant:this.decodeRpcLimits.maxIwantMessageIDs,graft:this.decodeRpcLimits.maxControlMessages,prune:this.decodeRpcLimits.maxControlMessages,prune$:{peers:this.decodeRpcLimits.maxPeerInfos},idontwant:this.decodeRpcLimits.maxControlMessages,idontwant$:{messageIDs:this.decodeRpcLimits.maxIdontwantMessageIDs}}}});if(this.metrics?.onRpcRecv(a,s.length),this.opts.awaitRpcHandler)try{await this.handleReceivedRpc(e,a)}catch(o){this.metrics?.onRpcRecvError(),this.log(o)}else this.handleReceivedRpc(e,a).catch(o=>{this.metrics?.onRpcRecvError(),this.log(o)})}catch(s){this.metrics?.onRpcDataError(),this.log(s)}})}catch(n){this.metrics?.onPeerReadStreamError(),this.handlePeerReadStreamError(n,e)}}handlePeerReadStreamError(e,r){this.log.error(e),this.onPeerDisconnected(r)}async handleReceivedRpc(e,r){if(!this.acceptFrom(e.toString())){this.log("received message from unacceptable peer %p",e),this.metrics?.rpcRecvNotAccepted.inc();return}const n=r.subscriptions!=null?r.subscriptions.length:0,i=r.messages!=null?r.messages.length:0;let s=0,a=0,o=0,c=0;if(r.control!=null&&(r.control.ihave!=null&&(s=r.control.ihave.length),r.control.iwant!=null&&(a=r.control.iwant.length),r.control.graft!=null&&(o=r.control.graft.length),r.control.prune!=null&&(c=r.control.prune.length)),this.log(`rpc.from ${e.toString()} subscriptions ${n} messages ${i} ihave ${s} iwant ${a} graft ${o} prune ${c}`),r.subscriptions!=null&&r.subscriptions.length>0){const u=[];r.subscriptions.forEach(l=>{const f=l.topic,d=l.subscribe===!0;if(f!=null){if(this.allowedTopics!=null&&!this.allowedTopics.has(f))return;this.handleReceivedSubscription(e,f,d),u.push({topic:f,subscribe:d})}}),this.safeDispatchEvent("subscription-change",{detail:{peerId:e,subscriptions:u}})}for(const u of r.messages){if(this.allowedTopics!=null&&!this.allowedTopics.has(u.topic))continue;const l=this.handleReceivedMessage(e,u).catch(f=>{this.metrics?.onMsgRecvError(u.topic),this.log(f)});this.opts.awaitRpcMessageHandler&&await l}r.control!=null&&await this.handleControlMessage(e.toString(),r.control)}handleReceivedSubscription(e,r,n){this.log("subscription update from %p topic %s",e,r);let i=this.topics.get(r);i==null&&(i=new Set,this.topics.set(r,i)),n?i.add(e.toString()):i.delete(e.toString())}async handleReceivedMessage(e,r){this.metrics?.onMsgRecvPreValidation(r.topic);const n=await this.validateReceivedMessage(e,r);this.metrics?.onPrevalidationResult(r.topic,n.code);const i=n.code;switch(i){case da.duplicate:this.score.duplicateMessage(e.toString(),n.msgIdStr,r.topic),this.gossipTracer.deliverMessage(n.msgIdStr,!0),this.mcache.observeDuplicate(n.msgIdStr,e.toString());return;case da.invalid:if(n.msgIdStr!=null){const s=n.msgIdStr;this.score.rejectMessage(e.toString(),s,r.topic,n.reason),this.gossipTracer.rejectMessage(s,n.reason)}else this.score.rejectInvalidMessage(e.toString(),r.topic);this.metrics?.onMsgRecvInvalid(r.topic,n);return;case da.valid:this.score.validateMessage(n.messageId.msgIdStr),this.gossipTracer.deliverMessage(n.messageId.msgIdStr),this.mcache.put(n.messageId,r,!this.opts.asyncValidation),this.subscriptions.has(r.topic)&&(!this.components.peerId.equals(e)||this.opts.emitSelf)&&(super.dispatchEvent(new CustomEvent("gossipsub:message",{detail:{propagationSource:e,msgId:n.messageId.msgIdStr,msg:n.msg}})),super.dispatchEvent(new CustomEvent("message",{detail:n.msg}))),this.opts.asyncValidation||this.forwardMessage(n.messageId.msgIdStr,r,e.toString());break;default:throw new Error(`Invalid validation result: ${i}`)}}async validateReceivedMessage(e,r){const n=this.fastMsgIdFn?.(r),i=n!==void 0?this.fastMsgIdCache?.get(n):void 0;if(i!=null)return{code:da.duplicate,msgIdStr:i};const s=await iwt(this.globalSignaturePolicy,r);if(!s.valid)return{code:da.invalid,reason:pc.Error,error:s.error};const a=s.message;try{this.dataTransform!=null&&(a.data=this.dataTransform.inboundTransform(r.topic,a.data))}catch(f){return this.log("Invalid message, transform failed",f),{code:da.invalid,reason:pc.Error,error:la.TransformFailed}}const o=await this.msgIdFn(a),c=this.msgIdToStrFn(o),u={msgId:o,msgIdStr:c};if(n!==void 0&&this.fastMsgIdCache!=null&&this.fastMsgIdCache.put(n,c)&&this.metrics?.fastMsgIdCacheCollision.inc(),this.seenCache.has(c))return{code:da.duplicate,msgIdStr:c};this.seenCache.put(c),(r.data?.length??0)>=this.opts.idontwantMinDataSize&&this.sendIDontWants(o,r.topic,e.toString());const l=this.topicValidators.get(r.topic);if(l!=null){let f;try{f=await l(e,a)}catch(d){const h=d.code;h===kbt&&(f=yo.Ignore),h===Ebt?f=yo.Reject:f=yo.Ignore}if(f!==yo.Accept)return{code:da.invalid,reason:SJ(f),msgIdStr:c}}return{code:da.valid,messageId:u,msg:a}}getScore(e){return this.score.score(e)}sendSubscriptions(e,r,n){this.sendRpc(e,{subscriptions:r.map(i=>({topic:i,subscribe:n})),messages:[]})}async handleControlMessage(e,r){if(r===void 0)return;const n=r.ihave?.length>0?this.handleIHave(e,r.ihave):[],i=r.iwant?.length>0?this.handleIWant(e,r.iwant):[],s=r.graft?.length>0?await this.handleGraft(e,r.graft):[];if(r.prune?.length>0&&await this.handlePrune(e,r.prune),r.idontwant?.length>0&&this.handleIdontwant(e,r.idontwant),n.length===0&&i.length===0&&s.length===0)return;const a=this.sendRpc(e,Vc(i,{iwant:n,prune:s})),o=n[0]?.messageIDs;o!=null&&(a?this.gossipTracer.addPromise(e,o):this.metrics?.iwantPromiseUntracked.inc(1))}acceptFrom(e){if(this.direct.has(e))return!0;const r=Date.now(),n=this.acceptFromWhitelist.get(e);if(n!=null&&n.messagesAccepted<Abt&&n.acceptUntil>=r)return n.messagesAccepted+=1,!0;const i=this.score.score(e);return i>=Tbt?this.acceptFromWhitelist.set(e,{messagesAccepted:0,acceptUntil:r+Cbt}):this.acceptFromWhitelist.delete(e),i>=this.opts.scoreThresholds.graylistThreshold}handleIHave(e,r){if(r.length===0)return[];const n=this.score.score(e);if(n<this.opts.scoreThresholds.gossipThreshold)return this.log("IHAVE: ignoring peer %s with score below threshold [ score = %d ]",e,n),this.metrics?.ihaveRcvIgnored.inc({reason:Yg.LowScore}),[];const i=(this.peerhave.get(e)??0)+1;if(this.peerhave.set(e,i),i>wbt)return this.log("IHAVE: peer %s has advertised too many times (%d) within this heartbeat interval; ignoring",e,i),this.metrics?.ihaveRcvIgnored.inc({reason:Yg.MaxIhave}),[];const s=this.iasked.get(e)??0;if(s>=o1)return this.log("IHAVE: peer %s has already advertised too many messages (%d); ignoring",e,s),this.metrics?.ihaveRcvIgnored.inc({reason:Yg.MaxIasked}),[];const a=new Map;if(r.forEach(({topicID:u,messageIDs:l})=>{if(u==null||l==null||!this.mesh.has(u))return;let f=0;l.forEach(d=>{const h=this.msgIdToStrFn(d);this.seenCache.has(h)||(a.set(h,d),f++)}),this.metrics?.onIhaveRcv(u,l.length,f)}),a.size===0)return[];let o=a.size;o+s>o1&&(o=o1-s),this.log("IHAVE: Asking for %d out of %d messages from %s",o,a.size,e);let c=Array.from(a.values());return Ul(c),c=c.slice(0,o),this.iasked.set(e,s+o),[{messageIDs:c}]}handleIWant(e,r){if(r.length===0)return[];const n=this.score.score(e);if(n<this.opts.scoreThresholds.gossipThreshold)return this.log("IWANT: ignoring peer %s with score below threshold [score = %d]",e,n),[];const i=new Map,s=new Map;let a=0;return r.forEach(({messageIDs:o})=>{o?.forEach(c=>{const u=this.msgIdToStrFn(c),l=this.mcache.getWithIWantCount(u,e);if(l==null){a++;return}if(s.set(l.msg.topic,1+(s.get(l.msg.topic)??0)),l.count>cbt){this.log("IWANT: Peer %s has asked for message %s too many times: ignoring request",e,c);return}i.set(u,l.msg)})}),this.metrics?.onIwantRcv(s,a),i.size===0?(this.log("IWANT: Could not provide any wanted messages to %s",e),[]):(this.log("IWANT: Sending %d messages to %s",i.size,e),Array.from(i.values()))}async handleGraft(e,r){const n=[],i=this.score.score(e),s=Date.now();let a=this.opts.doPX;if(r.forEach(({topicID:c})=>{if(c==null)return;const u=this.mesh.get(c);if(u==null){a=!1;return}if(u.has(e))return;const l=this.backoff.get(c)?.get(e);if(this.direct.has(e))this.log("GRAFT: ignoring request from direct peer %s",e),n.push(c),a=!1;else if(typeof l=="number"&&s<l){this.log("GRAFT: ignoring backed off peer %s",e),this.score.addPenalty(e,1,Xg.GraftBackoff),a=!1;const f=l+this.opts.graftFloodThreshold-this.opts.pruneBackoff;s<f&&this.score.addPenalty(e,1,Xg.GraftBackoff),this.addBackoff(e,c),n.push(c)}else i<0?(this.log("GRAFT: ignoring peer %s with negative score: score=%d, topic=%s",e,i,c),n.push(c),a=!1,this.addBackoff(e,c)):u.size>=this.opts.Dhi&&!(this.outbound.get(e)??!1)?(n.push(c),this.addBackoff(e,c)):(this.log("GRAFT: Add mesh link from %s in %s",e,c),this.score.graft(e,c),u.add(e),this.metrics?.onAddToMesh(c,pa.Subscribed,1));this.safeDispatchEvent("gossipsub:graft",{detail:{peerId:e,topic:c,direction:"inbound"}})}),n.length===0)return[];const o=!1;return Promise.all(n.map(async c=>this.makePrune(e,c,a,o)))}async handlePrune(e,r){const n=this.score.score(e);for(const{topicID:i,backoff:s,peers:a}of r){if(i==null)continue;const o=this.mesh.get(i);if(o==null)return;this.log("PRUNE: Remove mesh link to %s in %s",e,i),this.score.prune(e,i),o.has(e)&&(o.delete(e),this.metrics?.onRemoveFromMesh(i,al.Prune,1)),typeof s=="number"&&s>0?this.doAddBackoff(e,i,s*1e3):this.addBackoff(e,i),a!=null&&a.length>0&&(n<this.opts.scoreThresholds.acceptPXThreshold?this.log("PRUNE: ignoring PX from peer %s with insufficient score [score = %d, topic = %s]",e,n,i):await this.pxConnect(a)),this.safeDispatchEvent("gossipsub:prune",{detail:{peerId:e,topic:i,direction:"inbound"}})}}handleIdontwant(e,r){let n=this.idontwantCounts.get(e)??0;if(n>=this.opts.idontwantMaxMessages)return;const i=n;let s=this.idontwants.get(e);s==null&&(s=new Map,this.idontwants.set(e,s));let a=0;e:for(const{messageIDs:c}of r)for(const u of c){if(n>=this.opts.idontwantMaxMessages)break e;n++;const l=this.msgIdToStrFn(u);s.set(l,this.heartbeatTicks),this.mcache.msgs.has(l)||a++}this.idontwantCounts.set(e,n);const o=n-i;this.metrics?.onIdontwantRcv(o,a)}addBackoff(e,r){this.doAddBackoff(e,r,this.opts.pruneBackoff)}doAddBackoff(e,r,n){let i=this.backoff.get(r);i==null&&(i=new Map,this.backoff.set(r,i));const s=Date.now()+n;(i.get(e)??0)<s&&i.set(e,s)}applyIwantPenalties(){this.gossipTracer.getBrokenPromises().forEach((e,r)=>{this.log("peer %s didn't follow up in %d IWANT requests; adding penalty",r,e),this.score.addPenalty(r,e,Xg.BrokenPromise)})}clearBackoff(){if(this.heartbeatTicks%pbt!==0)return;const e=Date.now();this.backoff.forEach((r,n)=>{r.forEach((i,s)=>{i+Pbt*this.opts.heartbeatInterval<e&&r.delete(s)}),r.size===0&&this.backoff.delete(n)})}async directConnect(){const e=[];this.direct.forEach(r=>{this.streamsOutbound.has(r)||e.push(r)}),await Promise.all(e.map(async r=>this.connect(r)))}async pxConnect(e){e.length>this.opts.prunePeers&&(Ul(e),e=e.slice(0,this.opts.prunePeers));const r=[];await Promise.all(e.map(async n=>{if(n.peerID==null)return;const i=Aa(Zn(n.peerID)),s=i.toString();if(!this.peers.has(s)){if(n.signedPeerRecord==null){r.push(s);return}try{if(!await this.components.peerStore.consumePeerRecord(n.signedPeerRecord,i)){this.log("bogus peer record obtained through px: could not add peer record to address book");return}r.push(s)}catch{this.log("bogus peer record obtained through px: invalid signature or not a peer record")}}})),r.length!==0&&await Promise.all(r.map(async n=>this.connect(n)))}async connect(e){this.log("Initiating connection with %s",e);const r=Ln(e),n=await this.components.connectionManager.openConnection(r);for(const i of this.multicodecs)for(const s of this.components.registrar.getTopologies(i))s.onConnect?.(r,n)}subscribe(e){if(this.status.code!==Fa.started)throw new Error("Pubsub has not started");if(!this.subscriptions.has(e)){this.subscriptions.add(e);for(const r of this.peers.keys())this.sendSubscriptions(r,[e],!0)}this.join(e)}unsubscribe(e){if(this.status.code!==Fa.started)throw new Error("Pubsub is not started");const r=this.subscriptions.delete(e);if(this.log("unsubscribe from %s - am subscribed %s",e,r),r)for(const n of this.peers.keys())this.sendSubscriptions(n,[e],!1);this.leave(e)}join(e){if(this.status.code!==Fa.started)throw new Error("Gossipsub has not started");if(this.mesh.has(e))return;this.log("JOIN %s",e),this.metrics?.onJoin(e);const r=new Set,n=this.backoff.get(e),i=this.fanout.get(e);if(i!=null&&(this.fanout.delete(e),this.fanoutLastpub.delete(e),i.forEach(s=>{!this.direct.has(s)&&this.score.score(s)>=0&&n?.has(s)!==!0&&r.add(s)}),this.metrics?.onAddToMesh(e,pa.Fanout,r.size)),r.size<this.opts.D){const s=r.size;this.getRandomGossipPeers(e,this.opts.D,o=>!r.has(o)&&!this.direct.has(o)&&this.score.score(o)>=0&&n?.has(o)!==!0).forEach(o=>{r.add(o)}),this.metrics?.onAddToMesh(e,pa.Random,r.size-s)}this.mesh.set(e,r),r.forEach(s=>{this.log("JOIN: Add mesh link to %s in %s",s,e),this.sendGraft(s,e)})}leave(e){if(this.status.code!==Fa.started)throw new Error("Gossipsub has not started");this.log("LEAVE %s",e),this.metrics?.onLeave(e);const r=this.mesh.get(e);r!=null&&(Promise.all(Array.from(r).map(async n=>{this.log("LEAVE: Remove mesh link to %s in %s",n,e),await this.sendPrune(n,e)})).catch(n=>{this.log("Error sending prunes to mesh peers",n)}),this.mesh.delete(e))}selectPeersToForward(e,r,n){const i=new Set,s=this.topics.get(e);s!=null&&(this.direct.forEach(o=>{s.has(o)&&r!==o&&!(n?.has(o)??!1)&&i.add(o)}),this.floodsubPeers.forEach(o=>{s.has(o)&&r!==o&&!(n?.has(o)??!1)&&this.score.score(o)>=this.opts.scoreThresholds.publishThreshold&&i.add(o)}));const a=this.mesh.get(e);return a!=null&&a.size>0&&a.forEach(o=>{r!==o&&!(n?.has(o)??!1)&&i.add(o)}),i}selectPeersToPublish(e){const r=new Set,n={direct:0,floodsub:0,mesh:0,fanout:0},i=this.topics.get(e);if(i!=null)if(this.opts.floodPublish)i.forEach(s=>{this.direct.has(s)?(r.add(s),n.direct++):this.score.score(s)>=this.opts.scoreThresholds.publishThreshold&&(r.add(s),n.floodsub++)});else{this.direct.forEach(a=>{i.has(a)&&(r.add(a),n.direct++)}),this.floodsubPeers.forEach(a=>{i.has(a)&&this.score.score(a)>=this.opts.scoreThresholds.publishThreshold&&(r.add(a),n.floodsub++)});const s=this.mesh.get(e);if(s!=null&&s.size>0)s.forEach(a=>{r.add(a),n.mesh++}),s.size<this.opts.D&&this.getRandomGossipPeers(e,this.opts.D-s.size,o=>!s.has(o)&&!this.direct.has(o)&&!this.floodsubPeers.has(o)&&this.score.score(o)>=this.opts.scoreThresholds.publishThreshold).forEach(o=>{r.add(o),n.mesh++});else{const a=this.fanout.get(e);if(a!=null&&a.size>0)a.forEach(o=>{r.add(o),n.fanout++});else{const o=this.getRandomGossipPeers(e,this.opts.D,c=>this.score.score(c)>=this.opts.scoreThresholds.publishThreshold);o.size>0&&(this.fanout.set(e,o),o.forEach(c=>{r.add(c),n.fanout++}))}this.fanoutLastpub.set(e,Date.now())}}return{tosend:r,tosendCount:n}}forwardMessage(e,r,n,i){n!=null&&this.score.deliverMessage(n,e,r.topic);const s=this.selectPeersToForward(r.topic,n,i);s.forEach(a=>{this.sendRpc(a,Vc([r]))}),this.metrics?.onForwardMsg(r.topic,s.size)}async publish(e,r,n){const i=Date.now(),s=this.dataTransform!=null?this.dataTransform.outboundTransform(e,r):r;if(this.publishConfig==null)throw Error("PublishError.Uninitialized");const{raw:a,msg:o}=await nwt(this.publishConfig,e,r,s),c=await this.msgIdFn(o),u=this.msgIdToStrFn(c),l=n?.ignoreDuplicatePublishError??this.opts.ignoreDuplicatePublishError;if(this.seenCache.has(u)){if(l)return this.metrics?.onPublishDuplicateMsg(e),{recipients:[]};throw Error("PublishError.Duplicate")}const{tosend:f,tosendCount:d}=this.selectPeersToPublish(e),h=this.opts.emitSelf&&this.subscriptions.has(e),m=n?.allowPublishToZeroTopicPeers??this.opts.allowPublishToZeroTopicPeers;if(f.size===0&&!m&&!h)throw Error("PublishError.NoPeersSubscribedToTopic");this.seenCache.put(u),this.mcache.put({msgId:c,msgIdStr:u},a,!0),this.publishedMessageIds.put(u);const p=n?.batchPublish??this.opts.batchPublish,g=Vc([a]);if(p)this.sendRpcInBatch(f,g);else for(const y of f)this.sendRpc(y,g)||f.delete(y);const v=Date.now()-i;return this.metrics?.onPublishMsg(e,d,f.size,a.data!=null?a.data.length:0,v),h&&(f.add(this.components.peerId.toString()),super.dispatchEvent(new CustomEvent("gossipsub:message",{detail:{propagationSource:this.components.peerId,msgId:u,msg:o}})),super.dispatchEvent(new CustomEvent("message",{detail:o}))),{recipients:Array.from(f.values()).map(y=>Ln(y))}}sendRpcInBatch(e,r){const n=Eh.encode(r),i=ZM.single(n);for(const s of e){const a=this.streamsOutbound.get(s);if(a==null){this.log(`Cannot send RPC to ${s} as there is no open stream to it available`),e.delete(s);continue}try{a.pushPrefixed(i)}catch(o){e.delete(s),this.log.error(`Cannot send rpc to ${s}`,o)}this.metrics?.onRpcSent(r,n.length)}}reportMessageValidationResult(e,r,n){let i;if(n===yo.Accept){if(i=this.mcache.validate(e),i!=null){const{message:a,originatingPeers:o}=i;this.score.deliverMessage(r,e,a.topic),this.forwardMessage(e,i.message,r,o)}}else if(i=this.mcache.remove(e),i!=null){const a=SJ(n),{message:o,originatingPeers:c}=i;this.score.rejectMessage(r,e,o.topic,a);for(const u of c)this.score.rejectMessage(u,e,o.topic,a)}const s=this.score.messageFirstSeenTimestampMs(e);this.metrics?.onReportValidation(i,n,s)}sendGraft(e,r){const i=Vc([],{graft:[{topicID:r}]});this.sendRpc(e,i)}async sendPrune(e,r){const i=[await this.makePrune(e,r,this.opts.doPX,!0)],s=Vc([],{prune:i});this.sendRpc(e,s)}sendIDontWants(e,r,n){const i=this.mesh.get(r);if(i==null)return;const s=new Set(i);s.delete(n);for(const o of s)this.streamsOutbound.get(o)?.protocol!==IA&&s.delete(o);const a=Vc([],{idontwant:[{messageIDs:[e]}]});this.sendRpcInBatch(s,a)}sendRpc(e,r){const n=this.streamsOutbound.get(e);if(n==null)return this.log(`Cannot send RPC to ${e} as there is no open stream to it available`),!1;const i=this.control.get(e);i!=null&&(this.piggybackControl(e,r,i),this.control.delete(e));const s=this.gossip.get(e);s!=null&&(this.piggybackGossip(e,r,s),this.gossip.delete(e));const a=Eh.encode(r);try{n.push(a)}catch(o){return this.log.error(`Cannot send rpc to ${e}`,o),i!=null&&this.control.set(e,i),s!=null&&this.gossip.set(e,s),!1}if(this.metrics?.onRpcSent(r,a.length),r.control?.graft!=null)for(const o of r.control?.graft)o.topicID!=null&&this.safeDispatchEvent("gossipsub:graft",{detail:{peerId:e,topic:o.topicID,direction:"outbound"}});if(r.control?.prune!=null)for(const o of r.control?.prune)o.topicID!=null&&this.safeDispatchEvent("gossipsub:prune",{detail:{peerId:e,topic:o.topicID,direction:"outbound"}});return!0}piggybackControl(e,r,n){const i=TJ(r);for(const s of n.graft)s.topicID!=null&&(this.mesh.get(s.topicID)?.has(e)??!1)&&i.control.graft.push(s);for(const s of n.prune)s.topicID!=null&&!(this.mesh.get(s.topicID)?.has(e)??!1)&&i.control.prune.push(s)}piggybackGossip(e,r,n){const i=TJ(r);i.control.ihave=n}async sendGraftPrune(e,r,n){const i=this.opts.doPX,s=!1;for(const[a,o]of e){const c=o.map(f=>({topicID:f}));let u=[];const l=r.get(a);l!=null&&(u=await Promise.all(l.map(async f=>this.makePrune(a,f,i&&!(n.get(a)??!1),s))),r.delete(a)),this.sendRpc(a,Vc([],{graft:c,prune:u}))}for(const[a,o]of r){const c=await Promise.all(o.map(async u=>this.makePrune(a,u,i&&!(n.get(a)??!1),s)));this.sendRpc(a,Vc([],{prune:c}))}}emitGossip(e){const r=this.mcache.getGossipIDs(new Set(e.keys()));for(const[n,i]of e)this.doEmitGossip(n,i,r.get(n)??[])}doEmitGossip(e,r,n){if(n.length===0||(Ul(n),n.length>o1&&this.log("too many messages for gossip; will truncate IHAVE list (%d messages)",n.length),r.size===0))return;let i=this.opts.Dlazy;const a=this.opts.gossipFactor*r.size;let o=r;a>i&&(i=a),i>o.size?i=o.size:o=Ul(Array.from(o)).slice(0,i),o.forEach(c=>{let u=n;n.length>o1&&(u=Ul(u.slice()).slice(0,o1)),this.pushGossip(c,{topicID:e,messageIDs:u})})}flush(){for(const[e,r]of this.gossip.entries())this.gossip.delete(e),this.sendRpc(e,Vc([],{ihave:r}));for(const[e,r]of this.control.entries()){this.control.delete(e);const n=Vc([],{graft:r.graft,prune:r.prune});this.sendRpc(e,n)}}pushGossip(e,r){this.log("Add gossip to %s",e);const n=this.gossip.get(e)??[];this.gossip.set(e,n.concat(r))}async makePrune(e,r,n,i){if(this.score.prune(e,r),this.streamsOutbound.get(e)?.protocol===wJ)return{topicID:r,peers:[]};const s=i?this.opts.unsubcribeBackoff:this.opts.pruneBackoff,a=s/1e3;if(this.doAddBackoff(e,r,s),!n)return{topicID:r,peers:[],backoff:a};const o=this.getRandomGossipPeers(r,this.opts.prunePeers,u=>u!==e&&this.score.score(u)>=0),c=await Promise.all(Array.from(o).map(async u=>{const l=Ln(u);let f;try{f=await this.components.peerStore.get(l)}catch(d){if(d.name!=="NotFoundError")throw d}return{peerID:l.toMultihash().bytes,signedPeerRecord:f?.peerRecordEnvelope}}));return{topicID:r,peers:c,backoff:a}}runHeartbeat=()=>{const e=this.metrics?.heartbeatDuration.startTimer();this.heartbeat().catch(r=>{this.log("Error running heartbeat",r)}).finally(()=>{if(e?.(),this.status.code===Fa.started){clearTimeout(this.status.heartbeatTimeout);let r=this.opts.heartbeatInterval-(Date.now()-this.status.hearbeatStartMs)%this.opts.heartbeatInterval;r<this.opts.heartbeatInterval*.25&&(r+=this.opts.heartbeatInterval,this.metrics?.heartbeatSkipped.inc()),this.status.heartbeatTimeout=setTimeout(this.runHeartbeat,r)}})};async heartbeat(){const{D:e,Dlo:r,Dhi:n,Dscore:i,Dout:s,fanoutTTL:a}=this.opts;this.heartbeatTicks++;const o=new Map,c=m=>{let p=o.get(m);return p===void 0&&(p=this.score.score(m),o.set(m,p)),p},u=new Map,l=new Map,f=new Map;this.clearBackoff(),this.peerhave.clear(),this.metrics?.cacheSize.set({cache:"iasked"},this.iasked.size),this.iasked.clear(),this.applyIwantPenalties(),this.idontwantCounts.clear();for(const m of this.idontwants.values())for(const[p,g]of m)this.heartbeatTicks-g>=this.opts.mcacheLength&&m.delete(p);this.heartbeatTicks%this.opts.directConnectTicks===0&&await this.directConnect(),this.fastMsgIdCache?.prune(),this.seenCache.prune(),this.gossipTracer.prune(),this.publishedMessageIds.prune();const d=new Map;this.mesh.forEach((m,p)=>{const g=this.topics.get(p),v=new Set,y=new Set;if(d.set(p,y),g!=null){const x=Ul(Array.from(g)),E=this.backoff.get(p);for(const k of x){const B=this.streamsOutbound.get(k);if(B!=null&&this.multicodecs.includes(B.protocol)&&!m.has(k)&&!this.direct.has(k)){const D=c(k);E?.has(k)!==!0&&D>=0&&v.add(k),D>=this.opts.scoreThresholds.gossipThreshold&&y.add(k)}}}const b=(x,E)=>{this.log("HEARTBEAT: Remove mesh link to %s in %s",x,p),this.addBackoff(x,p),m.delete(x),c(x)>=this.opts.scoreThresholds.gossipThreshold&&y.add(x),this.metrics?.onRemoveFromMesh(p,E,1);const k=l.get(x);k==null?l.set(x,[p]):k.push(p)},_=(x,E)=>{this.log("HEARTBEAT: Add mesh link to %s in %s",x,p),this.score.graft(x,p),m.add(x),y.delete(x),this.metrics?.onAddToMesh(p,E,1);const k=u.get(x);k==null?u.set(x,[p]):k.push(p)};if(m.forEach(x=>{const E=c(x);E<0&&(this.log("HEARTBEAT: Prune peer %s with negative score: score=%d, topic=%s",x,E,p),b(x,al.BadScore),f.set(x,!0))}),m.size<r){const x=e-m.size;zbt(v,x).forEach(k=>{_(k,pa.NotEnough)})}if(m.size>n){let x=Array.from(m);x.sort((k,B)=>c(B)-c(k)),x=x.slice(0,i).concat(Ul(x.slice(i)));let E=0;if(x.slice(0,e).forEach(k=>{(this.outbound.get(k)??!1)&&E++}),E<s){const k=D=>{const z=x[D];for(let U=D;U>0;U--)x[U]=x[U-1];x[0]=z};if(E>0){let D=E;for(let z=1;z<e&&D>0;z++)(this.outbound.get(x[z])??!1)&&(k(z),D--)}let B=e-E;for(let D=e;D<x.length&&B>0;D++)(this.outbound.get(x[D])??!1)&&(k(D),B--)}x.slice(e).forEach(k=>{b(k,al.Excess)})}if(m.size>=r){let x=0;if(m.forEach(E=>{(this.outbound.get(E)??!1)&&x++}),x<s){const E=s-x;WP(v,E,B=>this.outbound.get(B)===!0).forEach(B=>{_(B,pa.Outbound)})}}if(this.heartbeatTicks%this.opts.opportunisticGraftTicks===0&&m.size>1){const x=Array.from(m).sort((B,D)=>c(B)-c(D)),E=Math.floor(m.size/2),k=c(x[E]);if(k<this.opts.scoreThresholds.opportunisticGraftThreshold){const B=this.opts.opportunisticGraftPeers,D=WP(v,B,z=>c(z)>k);for(const z of D)this.log("HEARTBEAT: Opportunistically graft peer %s on topic %s",z,p),_(z,pa.Opportunistic)}}});const h=Date.now();this.fanoutLastpub.forEach((m,p)=>{m+a<h&&(this.fanout.delete(p),this.fanoutLastpub.delete(p))}),this.fanout.forEach((m,p)=>{const g=this.topics.get(p);m.forEach(_=>{(!(g?.has(_)??!1)||c(_)<this.opts.scoreThresholds.publishThreshold)&&m.delete(_)});const v=this.topics.get(p),y=[],b=new Set;if(d.set(p,b),v!=null){const _=Ul(Array.from(v));for(const x of _){const E=this.streamsOutbound.get(x);if(E!=null&&this.multicodecs.includes(E.protocol)&&!m.has(x)&&!this.direct.has(x)){const k=c(x);k>=this.opts.scoreThresholds.publishThreshold&&y.push(x),k>=this.opts.scoreThresholds.gossipThreshold&&b.add(x)}}}if(m.size<e){const _=e-m.size;y.slice(0,_).forEach(x=>{m.add(x),b?.delete(x)})}}),this.emitGossip(d),await this.sendGraftPrune(u,l,f),this.flush(),this.mcache.shift(),this.dispatchEvent(new CustomEvent("gossipsub:heartbeat"))}getRandomGossipPeers(e,r,n=()=>!0){const i=this.topics.get(e);if(i==null)return new Set;let s=[];return i.forEach(a=>{const o=this.streamsOutbound.get(a);o!=null&&this.multicodecs.includes(o.protocol)&&n(a)&&s.push(a)}),s=Ul(s),r>0&&s.length>r&&(s=s.slice(0,r)),new Set(s)}onScrapeMetrics(e){e.mcacheSize.set(this.mcache.size),e.mcacheNotValidatedCount.set(this.mcache.notValidatedCount),e.cacheSize.set({cache:"direct"},this.direct.size),e.cacheSize.set({cache:"seenCache"},this.seenCache.size),e.cacheSize.set({cache:"fastMsgIdCache"},this.fastMsgIdCache?.size??0),e.cacheSize.set({cache:"publishedMessageIds"},this.publishedMessageIds.size),e.cacheSize.set({cache:"mcache"},this.mcache.size),e.cacheSize.set({cache:"score"},this.score.size),e.cacheSize.set({cache:"gossipTracer.promises"},this.gossipTracer.size),e.cacheSize.set({cache:"gossipTracer.requests"},this.gossipTracer.requestMsByMsgSize),e.cacheSize.set({cache:"topics"},this.topics.size),e.cacheSize.set({cache:"subscriptions"},this.subscriptions.size),e.cacheSize.set({cache:"mesh"},this.mesh.size),e.cacheSize.set({cache:"fanout"},this.fanout.size),e.cacheSize.set({cache:"peers"},this.peers.size),e.cacheSize.set({cache:"streamsOutbound"},this.streamsOutbound.size),e.cacheSize.set({cache:"streamsInbound"},this.streamsInbound.size),e.cacheSize.set({cache:"acceptFromWhitelist"},this.acceptFromWhitelist.size),e.cacheSize.set({cache:"gossip"},this.gossip.size),e.cacheSize.set({cache:"control"},this.control.size),e.cacheSize.set({cache:"peerhave"},this.peerhave.size),e.cacheSize.set({cache:"outbound"},this.outbound.size);let r=0;const n=Date.now();e.connectedPeersBackoffSec.reset();for(const c of this.backoff.values()){r+=c.size;for(const[u,l]of c.entries())this.peers.has(u)&&e.connectedPeersBackoffSec.observe(Math.max(0,l-n)/1e3)}e.cacheSize.set({cache:"backoff"},r);let i=0;for(const c of this.idontwants.values())i+=c.size;e.cacheSize.set({cache:"idontwants"},i);for(const[c,u]of this.topics)e.topicPeersCount.set({topicStr:c},u.size);for(const[c,u]of this.mesh)e.meshPeerCounts.set({topicStr:c},u.size);const s=[],a=new Map;e.behaviourPenalty.reset();for(const c of this.peers.keys()){const u=this.score.score(c);s.push(u),a.set(c,u),e.behaviourPenalty.observe(this.score.peerStats.get(c)?.behaviourPenalty??0)}e.registerScores(s,this.opts.scoreThresholds),e.registerScorePerMesh(this.mesh,a);const o=Qbt(this.peers.keys(),this.score.peerStats,this.score.params,this.score.peerIPs,e.topicStrToLabel);e.registerScoreWeights(o)}tagMeshPeer=e=>{const{peerId:r,topic:n}=e.detail;this.components.peerStore.merge(Ln(r),{tags:{[n]:{value:100}}}).catch(i=>{this.log.error("Error tagging peer %s with topic %s",r,n,i)})};untagMeshPeer=e=>{const{peerId:r,topic:n}=e.detail;this.components.peerStore.merge(Ln(r),{tags:{[n]:void 0}}).catch(i=>{this.log.error("Error untagging peer %s with topic %s",r,n,i)})}}function k_(t={}){return e=>new fwt(e,t)}const dwt=1e3;function hwt(t){throw new Error("Not implemented")}class pwt extends d_{writer;reader;constructor(e){super(e),this.writer=e.bidiStream.writable.getWriter(),this.reader=e.bidiStream.readable.getReader(),Promise.resolve().then(async()=>{for(;;){const r=await this.reader.read();if(r.done){e.log("remote closed write");return}r.value!=null&&this.sourcePush(new cr(r.value))}}).catch(r=>{e.log.error("error reading from stream",r),this.abort(r)}).finally(()=>{this.remoteCloseWrite()}),this.writer.closed.then(()=>{e.log("writer closed")}).catch(r=>{e.log("writer close promise rejected",r)}).finally(()=>{this.remoteCloseRead()})}sendNewStream(e){}async sendData(e,r){for await(const n of e)this.log("sendData waiting for writer to be ready"),await Mi(this.writer.ready,r?.signal),this.writer.write(n).catch(i=>{this.log.error("error sending stream data",i)})}async sendReset(e){this.log("sendReset aborting writer"),await Mi(this.writer.abort(),e?.signal),this.log("sendReset aborted writer")}async sendCloseWrite(e){this.log("sendCloseWrite closing writer"),await Mi(this.writer.close(),e?.signal),this.log("sendCloseWrite closed writer")}async sendCloseRead(e){this.log("sendCloseRead cancelling reader"),await Mi(this.reader.cancel(),e?.signal),this.log("sendCloseRead cancelled reader")}}async function AJ(t,e,r,n,i,s){const a=s.forComponent(`libp2p:webtransport:stream:${r}:${e}`),o=new pwt({bidiStream:t,id:e,direction:r,log:a,onEnd:()=>{const c=n.findIndex(u=>u===o);c!==-1&&n.splice(c,1),i?.(o)}});return o}function Rpe(){return{source:{[Symbol.asyncIterator](){return{async next(){return new Promise(()=>{})}}}},sink:async t=>new Promise(()=>{})}}function mwt(t,e,r,n){let i=0;const s=r.forComponent("libp2p:webtransport:muxer");return{protocol:"webtransport",createStreamMuxer:a=>{typeof a=="function"&&(a={onIncomingStream:a});const o=[];Promise.resolve().then(async()=>{//! TODO unclear how to add backpressure here?
for(;;){const{done:u,value:l}=await e.read();if(u)break;if(o.length>=n.maxInboundStreams)s(`too many inbound streams open - ${o.length}/${n.maxInboundStreams}, closing new incoming stream`),l.writable.close().catch(f=>{s.error(`failed to close inbound stream that crossed our maxInboundStream limit: ${f.message}`)}),l.readable.cancel().catch(f=>{s.error(`failed to close inbound stream that crossed our maxInboundStream limit: ${f.message}`)});else{const f=await AJ(l,String(i++),"inbound",o,a?.onStreamEnd,r);o.push(f),a?.onIncomingStream?.(f)}}}).catch(u=>{s.error("could not create a new stream",u)});const c={protocol:"webtransport",streams:o,newStream:async u=>{s("new outgoing stream",u);const l=await t.createBidirectionalStream(),f=await AJ(l,String(i++),a?.direction??"outbound",o,a?.onStreamEnd,r);return o.push(f),f},close:async()=>{s("closing webtransport muxer gracefully");try{t.close()}catch(u){c.abort(u)}},abort:u=>{s("closing webtransport muxer with err:",u);try{t.close()}catch(l){s.error("webtransport session threw error during close",l)}},...Rpe()};return c}}}function gwt(t,e){return e.filter(n=>!!t.find(i=>Tr(n,i))).length===e.length}const vwt=Object.values(kv).map(t=>t.decoder).reduce((t,e)=>t.or(e));function ywt(t){return Zn(vwt.decode(t))}function CJ(t){if(!P6.matches(t))throw new T8("Invalid multiaddr, was not a WebTransport address");const e=t.stringTuples(),r=e.filter(([a,o])=>a===Xt("certhash").code).map(([a,o])=>ywt(o??"")),n=e.filter(([a,o])=>a===Xt("p2p").code).map(([a,o])=>Ln(o??""))[0],i=t.toOptions();let s=i.host;return i.family===6&&s?.includes(":")&&(s=`[${s}]`),{url:`https://${s}:${i.port}`,certhashes:r,remotePeer:n}}const bwt=globalThis.WebTransport;class wwt{log;components;config;metrics;constructor(e,r={}){this.log=e.logger.forComponent("libp2p:webtransport"),this.components=e,this.config={...r,maxInboundStreams:r.maxInboundStreams??dwt,certificates:r.certificates??[]},e.metrics!=null&&(this.metrics={dialerEvents:e.metrics.registerCounterGroup("libp2p_webtransport_dialer_events_total",{label:"event",help:"Total count of WebTransport dialer events by type"})})}[Symbol.toStringTag]="@libp2p/webtransport";[yy]=!0;[Ui]=["@libp2p/transport"];async dial(e,r){r.signal.throwIfAborted(),this.log("dialing %s",e),r=r??{};const{url:n,certhashes:i,remotePeer:s}=CJ(e);let a,o,c=()=>{},u=!1,l=!1,f=!1;try{this.metrics?.dialerEvents.increment({pending:!0});const d=new bwt(`${n}/.well-known/libp2p-webtransport?type=noise`,{serverCertificateHashes:i.map(h=>({algorithm:"sha-256",value:h.digest}))});if(c=h=>{if(!u)try{this.metrics?.dialerEvents.increment({[h]:!0}),d.close()}catch(m){this.log.error("error closing wt session",m)}finally{o!=null&&(o.timeline.close=Date.now()),u=!0}},a=()=>{c(l?"noise_timeout":"ready_timeout")},r.signal.addEventListener("abort",a,{once:!0}),this.log("wait for session to be ready"),r.onProgress?.(new ft("webtransport:wait-for-session")),await Promise.race([d.closed,d.ready]),this.log("session became ready"),l=!0,this.metrics?.dialerEvents.increment({ready:!0}),d.closed.catch(h=>{this.log.error("error on remote wt session close",h)}).finally(()=>{c("remote_close")}),f=await Mi(this.authenticateWebTransport({wt:d,remotePeer:s,certhashes:i,...r}),r.signal),!f)throw new ere("Failed to authenticate webtransport");return this.metrics?.dialerEvents.increment({open:!0}),o={close:async()=>{this.log("closing webtransport"),c("close")},abort:h=>{this.log("aborting webtransport due to passed err",h),c("abort")},remoteAddr:e,timeline:{open:Date.now()},log:this.components.logger.forComponent("libp2p:webtransport:maconn"),...Rpe()},await r.upgrader.upgradeOutbound(o,{...r,skipEncryption:!0,muxerFactory:mwt(d,d.incomingBidirectionalStreams.getReader(),this.components.logger,this.config),skipProtection:!0})}catch(d){throw this.log.error("caught wt session err",d),c(f?"upgrade_error":l?"noise_error":"ready_error"),d}finally{a!=null&&r.signal?.removeEventListener("abort",a)}}async authenticateWebTransport({wt:e,remotePeer:r,certhashes:n,onProgress:i,signal:s}){s?.throwIfAborted(),i?.(new ft("webtransport:open-authentication-stream"));const a=await e.createBidirectionalStream(),o=a.writable.getWriter(),c=a.readable.getReader(),u={source:async function*(){for(;;){const d=await c.read();if(d.value!=null&&(yield d.value),d.done)break}}(),sink:async d=>{for await(const h of d){await Mi(o.ready,s);const m=h instanceof Uint8Array?h:h.subarray();o.write(m).catch(p=>{this.log.error("could not write chunk during authentication of WebTransport stream",p)})}}},l=$0()(this.components);i?.(new ft("webtransport:secure-outbound-connection"));const{remoteExtensions:f}=await l.secureOutbound(u,{signal:s,remotePeer:r});if(i?.(new ft("webtransport:close-authentication-stream")),o.close().catch(d=>{this.log.error(`Failed to close authentication stream writer: ${d.message}`)}),c.cancel().catch(d=>{this.log.error(`Failed to close authentication stream reader: ${d.message}`)}),!gwt(f?.webtransportCerthashes??[],n.map(d=>d.bytes)))throw new Ze("Our certhashes are not a subset of the remote's reported certhashes");return!0}createListener(e){return hwt(this.components,{...e,certificates:this.config.certificates,maxInboundStreams:this.config.maxInboundStreams})}listenFilter(){return[]}dialFilter(e){return globalThis.WebTransport==null?[]:e.filter(r=>{if(!P6.exactMatch(r))return!1;const{url:n,certhashes:i}=CJ(r);return n!=null&&i.length>0})}}function T_(t={}){return e=>new wwt(e,t)}var J6;(function(t){let e;t.codec=()=>(e==null&&(e=Ot((r,n,i={})=>{if(i.lengthDelimited!==!1&&n.fork(),r.publicKey!=null&&r.publicKey.byteLength>0&&(n.uint32(10),n.bytes(r.publicKey)),r.addrs!=null)for(const s of r.addrs)n.uint32(18),n.bytes(s);i.lengthDelimited!==!1&&n.ldelim()},(r,n,i={})=>{const s={publicKey:yr(0),addrs:[]},a=n==null?r.len:r.pos+n;for(;r.pos<a;){const o=r.uint32();switch(o>>>3){case 1:{s.publicKey=r.bytes();break}case 2:{if(i.limits?.addrs!=null&&s.addrs.length===i.limits.addrs)throw new rn('Decode error - map field "addrs" had too many elements');s.addrs.push(r.bytes());break}default:{r.skipType(o&7);break}}}return s})),e),t.encode=r=>Rt(r,t.codec()),t.decode=(r,n)=>Pt(r,t.codec(),n)})(J6||(J6={}));const _wt="_peer-discovery._p2p._pubsub";class xwt extends oi{[ov]=!0;[Symbol.toStringTag]="@libp2p/pubsub-peer-discovery";interval;listenOnly;topics;intervalId;components;log;constructor(e,r={}){super();const{interval:n,topics:i,listenOnly:s}=r;this.components=e,this.interval=n??1e4,this.listenOnly=s??!1,this.log=e.logger.forComponent("libp2p:discovery:pubsub"),Array.isArray(i)&&i.length>0?this.topics=i:this.topics=[_wt],this._onMessage=this._onMessage.bind(this)}isStarted(){return this.intervalId!=null}start(){}afterStart(){if(this.intervalId!=null)return;const e=this.components.pubsub;if(e==null)throw new Error("PubSub not configured");for(const r of this.topics)e.subscribe(r),e.addEventListener("message",this._onMessage);this.listenOnly||(this._broadcast(),this.intervalId=setInterval(()=>{this._broadcast()},this.interval))}beforeStop(){const e=this.components.pubsub;if(e==null)throw new Error("PubSub not configured");for(const r of this.topics)e.unsubscribe(r),e.removeEventListener("message",this._onMessage)}stop(){this.intervalId!=null&&(clearInterval(this.intervalId),this.intervalId=void 0)}_broadcast(){const e=this.components.peerId;if(e.publicKey==null)throw new Error("PeerId was missing public key");const r={publicKey:Ya(e.publicKey),addrs:this.components.addressManager.getAddresses().map(s=>s.bytes)},n=J6.encode(r),i=this.components.pubsub;if(i==null)throw new Error("PubSub not configured");for(const s of this.topics){if(i.getSubscribers(s).length===0){this.log("skipping broadcasting our peer data on topic %s because there are no peers present",s);continue}this.log("broadcasting our peer data on topic %s",s),i.publish(s,n)}}_onMessage(e){if(!this.isStarted())return;const r=e.detail;if(this.topics.includes(r.topic))try{const n=J6.decode(r.data),i=na(n.publicKey),s=Yh(i);if(s.equals(this.components.peerId))return;this.log("discovered peer %p on %s",s,r.topic),this.safeDispatchEvent("peer",{detail:{id:s,multiaddrs:n.addrs.map(a=>Mt(a))}})}catch(n){this.log.error("error handling incoming message",n)}}}function eN(t={}){return e=>new xwt(e,t)}const A2=["/dns4/relai-ws-libp2p.xn--rseau-constellation-bzb.ca/tcp/443/wss/p2p/12D3KooWGVYEgCLYwMSa1hDFW93fiCxhN2V2QUuMGCEfmG5ZuM9m","/dns4/relai-ws-libp2p.xn--rseau-constellation-bzb.ca/tcp/80/ws/p2p/12D3KooWGVYEgCLYwMSa1hDFW93fiCxhN2V2QUuMGCEfmG5ZuM9m"],C2=["/ip4/164.90.222.145/udp/9090/webrtc-direct/certhash/uEiAJOkKT64u6jmXV5YxncCoER5WXSO2HYE23Xpap651xMw/p2p/12D3KooWJ7P1yeoxB5mq3TwQh8YgmVhankjtT4rsVGZPUyf617aR","/ip4/164.90.222.145/udp/9091/quic-v1/p2p/12D3KooWJ7P1yeoxB5mq3TwQh8YgmVhankjtT4rsVGZPUyf617aR","/ip4/164.90.222.145/tcp/9092/p2p/12D3KooWJ7P1yeoxB5mq3TwQh8YgmVhankjtT4rsVGZPUyf617aR"],Swt=["/dnsaddr/bootstrap.libp2p.io/p2p/QmNnooDu7bfjPFoTZYxMNLWUQJyrVwtbZg5gBMjTezGAJN","/dnsaddr/bootstrap.libp2p.io/p2p/QmQCU2EcMqAqQPR2i9bChDtGNJchTbq5TbXJJ16u19uLTa","/dnsaddr/bootstrap.libp2p.io/p2p/QmbLHAnMoJPWSCR5Zhtx6BHJX9KiKNN6tpvbUcqanj75Nb","/dnsaddr/bootstrap.libp2p.io/p2p/QmcZf59bWwK5XFi76CZX8cbJ4BhTzzA3gU1ZjYZcYW3dwt"],A_=[...Swt,...C2,...A2],tN=t=>{const e=[];for(const r of t){const n=Mt(r),i=n.getPeerId();if(!i)continue;(e.find(a=>a.id.toString()===i)||{id:Ln(i),addrs:[]}).addrs.push(n)}return e};function rN(t){return[...C2,...A2].map(e=>Mt(e).getPeerId()).includes(t)?150:0}const IJ=async({dossier:t})=>{const e=`${t}/libp2p`;return await new Mhe(e).open(),{addresses:{listen:["/webrtc","/webtransport","/p2p-circuit"]},transportManager:{faultTolerance:Wf.NO_FATAL},transports:[T2(),S_(),x_(),x2(),...rpe()?.name==="chrome"?[]:[T_()]],connectionEncrypters:[$0()],streamMuxers:[w2()],connectionGater:{denyDialMultiaddr:()=>!1},peerDiscovery:[_2({list:A_,timeout:0}),eN({interval:1e3,topics:["constellation._peer-discovery._p2p._pubsub"],listenOnly:!1})],services:{ping:w_(),identify:S2({maxMessageSize:1e6,maxInboundStreams:50,maxOutboundStreams:50}),identifyPush:v_({maxMessageSize:1e6,maxInboundStreams:50,maxOutboundStreams:50}),autoNAT:h_(),dcutr:g_(),pubsub:k_({allowPublishToZeroTopicPeers:!0,runOnLimitedConnection:!0,canRelayMessage:!0,directPeers:tN([...A2,...C2]),scoreParams:{appSpecificScore:rN},scoreThresholds:{acceptPXThreshold:0}})}}};class Ewt{portMappingClient;constructor(){throw new Error("UPnPNAT is not supported in browsers")}[Symbol.toStringTag]="@libp2p/upnp-nat";[Ui]=["@libp2p/nat-traversal"];get[xu](){return[]}}function Ope(t={}){return e=>new Ewt(e,t)}const kwt=async()=>{const{tcp:t}=await qt(async()=>{const{tcp:r}=await import("@libp2p/tcp");return{tcp:r}},[]),{mdns:e}=await qt(async()=>{const{mdns:r}=await import("@libp2p/mdns");return{mdns:r}},[]);return{addresses:{listen:["/ip4/0.0.0.0/tcp/0","/ip4/0.0.0.0/tcp/0/ws","/ip6/::/tcp/0","/ip6/::/tcp/0/ws","/webrtc","/webtransport","/p2p-circuit"]},transportManager:{faultTolerance:Wf.NO_FATAL},transports:[T2(),S_(),T_(),x_(),t(),x2()],connectionEncrypters:[$0()],streamMuxers:[w2()],connectionGater:{denyDialMultiaddr:()=>!1},connectionManager:{inboundStreamProtocolNegotiationTimeout:1e4,inboundUpgradeTimeout:1e4,outboundStreamProtocolNegotiationTimeout:1e4,outboundUpgradeTimeout:1e4},peerDiscovery:[e(),_2({list:A_,timeout:0}),eN({interval:1e4,topics:["constellation._peer-discovery._p2p._pubsub"],listenOnly:!1})],services:{ping:w_(),identify:S2({maxMessageSize:1e6,maxInboundStreams:50,maxOutboundStreams:50}),identifyPush:v_({maxMessageSize:1e6,maxInboundStreams:50,maxOutboundStreams:50}),autoNAT:h_(),dcutr:g_(),pubsub:k_({allowPublishToZeroTopicPeers:!0,runOnLimitedConnection:!0,canRelayMessage:!0,directPeers:tN([...A2,...C2]),scoreParams:{appSpecificScore:rN},scoreThresholds:{acceptPXThreshold:100}}),upnp:Ope(),relay:w1t()}}},Twt=async()=>({addresses:{listen:["/webrtc","/p2p-circuit"]},transports:[T2({filter:XM}),T_(),x2()],connectionEncrypters:[$0()],streamMuxers:[w2()],connectionGater:{denyDialMultiaddr:()=>!1},peerDiscovery:[_2({list:A_,timeout:0})],services:{identify:S2(),pubsub:k_({allowPublishToZeroTopicPeers:!0})}}),Awt=async()=>{const{tcp:t}=await qt(async()=>{const{tcp:r}=await import("@libp2p/tcp");return{tcp:r}},[]),{mdns:e}=await qt(async()=>{const{mdns:r}=await import("@libp2p/mdns");return{mdns:r}},[]);return{addresses:{listen:["/ip4/0.0.0.0/tcp/0","/ip4/0.0.0.0/tcp/0/ws","/ip6/::/tcp/0","/ip6/::/tcp/0/ws","/webrtc","/webtransport","/p2p-circuit"]},transportManager:{faultTolerance:Wf.NO_FATAL},transports:[T2({filter:XM}),S_(),T_(),x_(),t(),x2()],connectionEncrypters:[$0()],streamMuxers:[w2()],connectionGater:{denyDialMultiaddr:()=>!1},peerDiscovery:[e(),_2({list:A_,timeout:0}),eN({interval:1e4,topics:["constellation._peer-discovery._p2p._pubsub"],listenOnly:!1})],services:{ping:w_(),identify:S2({maxMessageSize:1e6,maxInboundStreams:50,maxOutboundStreams:50}),identifyPush:v_({maxMessageSize:1e6,maxInboundStreams:50,maxOutboundStreams:50}),autoNAT:h_(),dcutr:g_(),pubsub:k_({allowPublishToZeroTopicPeers:!0,runOnLimitedConnection:!0,canRelayMessage:!0,directPeers:tN([...A2,...C2]),scoreParams:{appSpecificScore:rN}}),upnp:Ope()}}},Cwt=async({dossier:t})=>{let e;return J3||_3e?e=await IJ({dossier:t}):nC?e=await Twt():gi?e=await Awt():vi?e=await kwt():(console.warn("Plateforme non reconnue. On utilisera la configuration navigateur."),e=await IJ({dossier:t})),e};class Iwt{privateKey;constructor(e){this.privateKey=e.privateKey}obtenirClef(){return this.privateKey}}async function PJ({dossier:t,clefPrive:e,configLibp2p:r={}}){const n=await Cwt({dossier:t});n.privateKey=e,n.services=n.services||{},n.services.obtClefPrive=l=>new Iwt(l);const i=await Cpe(No(n,r));i.addEventListener("peer:discovery",async l=>{try{await i.dial(l.detail.id)}catch{}});const s=`${t}/donnes`,a=`${t}/blocs`,o=vi||gi?new(await qt(async()=>{const{FsBlockstore:l}=await import("blockstore-fs");return{FsBlockstore:l}},[])).FsBlockstore(a):new mdt(a),c=vi||gi?new(await qt(async()=>{const{FsDatastore:l}=await import("datastore-fs");return{FsDatastore:l}},[])).FsDatastore(s):new Mhe(s);vi||gi||(await o.open(),await c.open());const u={blockstore:o,datastore:c,libp2p:i,blockBrokers:[phe()]};return await H2t({...u})}const Pwt={type:"object",additionalProperties:{type:"array",items:{type:"string"}},required:[]};class Bpe extends zu{protocoles_init;constructor({client:e,protocoles:r=[]}){super({client:e,clef:"protocoles",schmaBdPrincipale:Pwt}),this.protocoles_init=r}async initialiser(){await this.tablirProtocoles({protocoles:this.protocoles_init})}async tablirProtocoles({protocoles:e,idDispositif:r}){r=r||await this.client.obtIdDispositif();const{bd:n,fOublier:i}=await this.obtBd(),s=(await n.allAsJSON())[r]||[];e?(e.some(a=>!s.includes(a))||s.some(a=>!e.includes(a)))&&await n.put(r,e):s.length&&await n.del(r),await i()}async suivreProtocoles({f:e,idCompte:r}){return await this.suivreBdPrincipale({idCompte:r,f:e})}}Oe([je],Bpe.prototype,"suivreProtocoles",null);const Rwt=t=>{if(!t)return!1;const e=t;return!!(e.id&&typeof e.open=="function"&&typeof e.stop=="function"&&e.ipfs)},Yd={type:"object",properties:{protocoles:{type:"string",nullable:!0},nomsDispositifs:{type:"string",nullable:!0},profil:{type:"string",nullable:!0},motsClefs:{type:"string",nullable:!0},variables:{type:"string",nullable:!0},bds:{type:"string",nullable:!0},projets:{type:"string",nullable:!0},nues:{type:"string",nullable:!0},favoris:{type:"string",nullable:!0},rseau:{type:"string",nullable:!0},automatisations:{type:"string",nullable:!0}},required:[]},RJ={type:"object",additionalProperties:{type:"object",properties:{nom:{type:"string",nullable:!0},type:{type:"string",nullable:!0}}},required:[]},Owt=1e3*60*5,Bwt=async t=>{if(t.dossier&&t.dossier!=="dv"){if(vi||gi){const e=await qt(()=>Promise.resolve().then(()=>Is),void 0);e.existsSync(t.dossier)||e.mkdirSync(t.dossier,{recursive:!0})}return t.dossier}if(vi||gi){const e=await qt(()=>Promise.resolve().then(()=>Is),void 0),r=(await qt(async()=>{const{default:s}=await import("env-paths");return{default:s}},[])).default,n=r("constl",{suffix:""}),i=await pf(n.data,t.dossier==="dv"?"constl-dv":"constl");return e.existsSync(i)||e.mkdirSync(i,{recursive:!0}),i}else return"./constl"},pf=async(...t)=>{if(vi||gi){const{join:e}=await qt(async()=>{const{join:r}=await Promise.resolve().then(()=>py);return{join:r}},void 0);return e(...t)}else return t.join("/")};class Co{_opts;vnements;orbite;sfip;pingles;profil;bds;tableaux;variables;rseau;favoris;projets;recherche;motsClefs;automatisations;nues;licences;protocoles;erreurInitialisation;_orbiteExterne;_sfipExterne;idCompte;sujet_rseau;motsDePasseRejoindreCompte;ennikkai;_intervaleVerrou;signaleurArrt;constructor(e={}){this._opts=e,this.vnements=new om.TypedEmitter,this.signaleurArrt=new AbortController,this.sujet_rseau=e.sujetRseau||"rseau-constellation",this.motsDePasseRejoindreCompte={},this._orbiteExterne=this._sfipExterne=!1,this.ennikkai=new Kre({}),this.pingles=new pct({client:this}),this.profil=new h2({client:this}),this.motsClefs=new d2({client:this}),this.tableaux=new Bc({client:this}),this.variables=new Sd({client:this}),this.bds=new Wn({client:this}),this.projets=new Hu({client:this}),this.nues=new Qi({client:this}),this.favoris=new t_({client:this}),this.automatisations=new Zot({client:this}),this.recherche=new Ct({client:this}),this.licences=new Qfe({client:this}),this.rseau=new ki({client:this}),this.protocoles=new Bpe({client:this,protocoles:this._opts.protocoles}),this._initialiser()}async dossier(){return await Bwt(this._opts)}async _initialiser(){try{await this.verrouillerDossier({message:this._opts.messageVerrou})}catch(i){this.erreurInitialisation=i,this.vnements.emit("erreurInitialisation",i);return}const{sfip:e,orbite:r}=await this._gnrerSFIPetOrbite();this.sfip=e,this.orbite=T5.obtGestionnaireOrbite({orbite:r,signaleurArrt:this.signaleurArrt}),this.vnements.emit("sfipEtOrbitePrts",{sfip:e,orbite:this.orbite}),this.idCompte=await this.obtDeStockageLocal({clef:"idCompte",parCompte:!1})||void 0,this.idCompte||(this.idCompte=await this._crerBdCompte({orbite:r}),await this.nommerDispositif({type:this.dtecterTypeDispositif()}),await this.sauvegarderAuStockageLocal({clef:"idCompte",val:this.idCompte,parCompte:!1})),await this._initialiserComposantes(),this.vnements.emit("comptePrt",{idCompte:this.idCompte});const n={type:"compte",base:as,profil:{type:"profil",base:as,fichiers:as},favoris:as};await this.pinglerCompte({idCompte:this.idCompte,options:n})}async _initialiserComposantes(){await this.rseau.initialiser(),await this.protocoles.initialiser(),await this.automatisations.initialiser(),await this.favoris.initialiser()}async _fermerComposantes(){await this.rseau.fermer(),await this.automatisations.fermer(),await this.favoris.fermer(),await this.pingles.fermer()}async _crerBdCompte({orbite:e}){const r={type:il,write:e.identity.id,nom:"racine"},n=await this.crerBdIndpendante({type:"keyvalue",optionsAccs:r,nom:"racine"}),{bd:i,fOublier:s}=await this.ouvrirBdType({id:n,type:"keyvalue",schma:Yd}),a=await this.obtOpsAccs({idBd:n}),o=["automatisations","favoris","nomsDispositifs","profil","protocoles","rseau"],c=["motsClefs","variables","bds","projets","nues"];for(const u of o){const l=await this.crerBdIndpendante({type:"keyvalue",optionsAccs:a});await i.set(u,l)}for(const u of c){const l=await this.crerBdIndpendante({type:"set",optionsAccs:a});await i.set(u,l)}return await this.profil.crerBdsInternes({idCompte:n}),await s(),n}async pinglerCompte({idCompte:e,options:r={}}){const n=L0(r,{type:"compte",base:as,profil:{type:"profil",base:as,fichiers:e_},favoris:as});await this.favoris.pinglerFavori({idObjet:e,pingle:n})}async suivrepingleCompte({idCompte:e,f:r,idCompteQuipingle:n}){return await this.favoris.suivretatFavori({idObjet:e,f:async i=>{i?.type==="compte"?await r(i):await r(void 0)},idCompte:n})}dtecterTypeDispositif(){if(gi)return"ordinateur";if(vi)return"serveur";if(J3)return["Pad","Kindle","Nexus","Nook","PlayBook"].find(e=>O1.product?.includes(e))?"tablette":O1.name?.includes("Mobile")||["Phone","Android","iOS"].find(e=>O1.os?.family?.includes(e))?"tlphone":"navigateur"}async attendreSfipEtOrbite(){return this.sfip&&this.orbite?{sfip:this.sfip,orbite:this.orbite}:new Promise(e=>{this.vnements.once("sfipEtOrbitePrts",e)})}async attendreInitialise(){if(this.erreurInitialisation)throw this.erreurInitialisation;return this.idCompte?{idCompte:this.idCompte}:new Promise((e,r)=>{this.vnements.once("comptePrt",e),this.vnements.once("erreurInitialisation",r)})}async verrouillerDossier({message:e}){if(gi||vi){const n=await qt(()=>Promise.resolve().then(()=>Is),void 0),i=await pf(await this.dossier(),"VERROU"),s=new Date;if(!n.existsSync(i))n.writeFileSync(i,e||"");else{const o=n.statSync(i).mtime,c=()=>{if(s.getTime()-o.getTime()>5e3)n.writeFileSync(i,e||"");else{const u=new TextDecoder().decode(n.readFileSync(i));try{const f=JSON.parse(u);if(f.port){const d=new Error(`Ce compte est dj ouvert en Constellation, et le serveur local est disponible sur le port ${f.port}. Vous pouvez soit vous connecter sur ce port, soit fermer les instances de Constellation qui ouvertes et puis vous ressayer.`);throw d.name=zI,d}}catch{}const l=new Error("Constellation est dj lance.");throw l.name=zI,l}};try{c()}catch{await new Promise(u=>setTimeout(u,5e3)),c()}}this._intervaleVerrou=setInterval(()=>{try{n.utimesSync(i,s,s)}catch{}},5e3)}}async spcifierMessageVerrou({message:e}){if(await this.attendreInitialise(),gi||vi){const r=await qt(()=>Promise.resolve().then(()=>Is),void 0),n=await pf(await this.dossier(),"VERROU"),i=JSON.parse(r.readFileSync(n).toString()),s=Object.assign(i,e);r.writeFileSync(n,JSON.stringify(s))}}async effacerVerrou(){(gi||vi)&&(this._intervaleVerrou&&clearInterval(this._intervaleVerrou),(await qt(()=>Promise.resolve().then(()=>Is),void 0)).rmSync(await pf(await this.dossier(),"VERROU")))}async _gnrerSFIPetOrbite(){const e=await this.dossier(),{orbite:r}=this._opts;let n,i,s;const a=await this.obtDeStockageLocal({clef:"idPairLibp2p",parCompte:!1});if(a){const o=tt(a,"base64");s=j4(o)}if(r)if(Rwt(r))this._sfipExterne=this._orbiteExterne=!0,n=r.ipfs,i=r;else{const{initOrbite:o}=await qt(async()=>{const{initOrbite:c}=await Promise.resolve().then(()=>aH);return{initOrbite:c}},void 0);r.ipfs?(this._sfipExterne=!0,n=r.ipfs):n=await PJ({dossier:await pf(e,"sfip"),clefPrive:s}),i=await o({sfip:n,dossierOrbite:r.directory||await pf(e,"orbite")}),n=i.ipfs}else{n=await PJ({dossier:await pf(await this.dossier(),"sfip"),clefPrive:s});const{initOrbite:o}=await qt(async()=>{const{initOrbite:c}=await Promise.resolve().then(()=>aH);return{initOrbite:c}},void 0);i=await o({sfip:n,dossierOrbite:await pf(await this.dossier(),"orbite")})}if(!s){const o=i.ipfs.libp2p.services.obtClefPrive.obtenirClef(),c=nt(o.raw,"base64");await this.sauvegarderAuStockageLocal({clef:"idPairLibp2p",val:c,parCompte:!1})}return{sfip:n,orbite:i}}async obtOptionsAccs(){return{write:await this.obtIdCompte()}}async suivreRsolutionpingle({pingle:e,f:r,ignorer:n}){const i=await this.favoris.estpinglSurDispositif({dispositifs:e.pingle.base||"TOUS"}),s=e.pingle.profil,a=await this.favoris.estpinglSurDispositif({dispositifs:e.pingle.favoris||"AUCUN"}),o={},c=async()=>await r(new Set(Object.values(o).flat().filter(l=>!!l))),u=[];if(i){const l=await this.suivreBd({id:e.idObjet,type:"keyvalue",schma:Yd,f:async f=>{try{const d=await f.allAsJSON();o.base=[e.idObjet,d.automatisations,d.bds,d.favoris,d.motsClefs,d.nues,d.profil,d.projets,d.protocoles,d.rseau,d.variables].filter(h=>!!h)}catch{return}return await c()}});u.push(l)}if(s){const l=await Fn({fRacine:async({fSuivreRacine:f})=>await this.suivreBd({id:e.idObjet,type:"keyvalue",schma:Yd,f:async d=>await f((await d.allAsJSON()).profil)}),fSuivre:async({id:f,fSuivreBd:d})=>await this.profil.suivreRsolutionpingle({pingle:{idObjet:f,pingle:s},f:d}),f:async f=>(o.profil=f?[...f]:[],await c())});u.push(l)}if(a){const l=await dr({fListe:async f=>await this.favoris.suivreFavoris({f,idCompte:e.idObjet}),fBranche:async(f,d,h)=>await this.favoris.suivreRsolutionpingle({pingle:h,f:d,ignorer:n}),f:async f=>(o.favoris=f.map(d=>[...d]).flat(),await c()),fIdBdDeBranche:f=>f.idObjet,fCode:f=>f.idObjet});u.push(l)}return async()=>{await Promise.allSettled(u.map(l=>l()))}}async ouvrirBd({id:e,type:r,signal:n,options:i}){const{orbite:s}=await this.attendreSfipEtOrbite(),a=Pr(n?[n,this.signaleurArrt.signal]:[this.signaleurArrt.signal]),o=await s.ouvrirBd({id:e,type:r,signal:a,options:i});return a.clear(),o}async ouvrirBdType({id:e,type:r,schma:n,signal:i,options:s}){const{orbite:a}=await this.attendreSfipEtOrbite();return await a.ouvrirBdType({id:e,type:r,schma:n,signal:i,options:s})}async signer({message:e}){const{orbite:r}=await this.attendreSfipEtOrbite(),n=r.identity,i=await r.identity.sign(n,e),s=r.identity.publicKey;return{signature:i,clefPublique:s}}async vrifierSignature({signature:e,message:r}){if(!e||!e.clefPublique||!e.signature)return!1;const{orbite:n}=await this.attendreSfipEtOrbite();return await n.identity.verify(e.signature,e.clefPublique,r)}async suivreDispositifs({f:e,idCompte:r}){const n={autoriss:[],infos:[]},i=async({id:c,fSuivreBd:u})=>{n.idCompte=c;const{orbite:l}=await this.attendreSfipEtOrbite(),{bd:f,fOublier:d}=await l.ouvrirBdType({id:c,type:"keyvalue",schma:Yd}),h=f.access,m=h.type;if(m==="ipfs")return await u(h.write),await d(),kn;if(m==="contrleur-constellation"){const p=h,g=async()=>{const v=p.gestRles._rles[Ts];await u([...v])};return p.gestRles.on("misJour",g),g(),async()=>{p.gestRles.off("misJour",g),await d()}}else return await d(),kn},s=async()=>{if(!n.idCompte)return;const c=n.autoriss.filter(u=>n.infos.find(l=>l.infoDispositif.idDispositif===u)?.infoDispositif?.idCompte===n.idCompte);return await e(c)},a=await Fn({fRacine:async({fSuivreRacine:c})=>r?(await c(r),kn):await this.suivreIdCompte({f:c}),f:Kn(async c=>(n.autoriss=c,await s())),fSuivre:i}),o=await this.rseau.suivreConnexionsDispositifs({f:async c=>(n.infos=c,await s())});return async()=>{await Promise.allSettled([a(),o()])}}async nommerDispositif({idDispositif:e,nom:r,type:n}){const i=e||await this.obtIdDispositif(),s=await this.obtIdBd({nom:"nomsDispositifs",racine:await this.obtIdCompte(),type:"keyvalue"}),{bd:a,fOublier:o}=await this.ouvrirBdType({id:s,type:"keyvalue",schma:RJ});if(r||n){const c={};r&&(c.nom=r),n&&(c.type=n),await a.set(i,c)}else await a.del(i);await o()}async suivreNomsDispositifs({idCompte:e,f:r}){const n=e||await this.obtIdCompte();return await this.suivreBdDicDeClef({id:n,schma:RJ,clef:"nomsDispositifs",f:r})}async suivreNomDispositif({idCompte:e,idDispositif:r,f:n}){return await this.suivreNomsDispositifs({idCompte:e,f:async i=>{const s=i[r];if(s)return await n(s)}})}async gnrerInvitationRejoindreCompte(){const e=await this.obtIdCompte(),r=Fot.encode(zy(6*3)).slice(0,6);this.motsDePasseRejoindreCompte[r]=Date.now();const n=await this.obtIdDispositif();return{idCompte:e,codeSecret:`${n}:${r}`}}async rvoquerInvitationRejoindreCompte({codeSecret:e}){if(e){const r=e.split(":")[1];delete this.motsDePasseRejoindreCompte[r]}else this.motsDePasseRejoindreCompte={}}async considrerRequteRejoindreCompte({requte:e}){const{idDispositif:r,empreinteVrification:n}=e,i=Date.now();for(const s of Object.keys(this.motsDePasseRejoindreCompte)){const a=this.motsDePasseRejoindreCompte[s];i-a<Owt&&this.empreinteInvitation({idDispositif:r,codeSecret:s})===n&&(delete this.motsDePasseRejoindreCompte[s],await this.ajouterDispositif({idDispositif:r}))}}empreinteInvitation({idDispositif:e,codeSecret:r}){return Wv.stringify(Dot(e+r))}async demanderEtPuisRejoindreCompte({idCompte:e,codeSecret:r}){await this.rseau.envoyerDemandeRejoindreCompte({codeSecret:r}),await this.rejoindreCompte({idCompte:e})}async ajouterDispositif({idDispositif:e}){const{idCompte:r}=await this.attendreInitialise(),{bd:n,fOublier:i}=await this.ouvrirBd({id:r});n.access.grant(Ts,e),await i()}async enleverDispositif({idDispositif:e}){const{idCompte:r}=await this.attendreInitialise(),{bd:n,fOublier:i}=await this.ouvrirBd({id:r});await n.access.revoke(Ts,e),await i()}async rejoindreCompte({idCompte:e}){if(!ll(e))throw new Error(`Adresse compte "${e}" non valide`);const{bd:r,fOublier:n}=await this.ouvrirBdType({id:e,type:"keyvalue",schma:Yd}),i=r.access,s=await this.obtIdDispositif();await wr(async a=>i.suivreIdsOrbiteAutorisescriture(a),a=>!!a&&a.includes(s)),n(),this.idCompte=e,await this.sauvegarderAuStockageLocal({clef:"idCompte",val:e,parCompte:!1}),this.vnements.emit("comptePrt",{idCompte:e})}async donnerAccs({idBd:e,identit:r,rle:n=su}){if(!ll(r))throw new Error(`Identit "${r}" non valide.`);const{bd:i,fOublier:s}=await this.ouvrirBd({id:e}),a=i.access;a.type===il&&await a.grant(n,r),await s()}async suivreIdCompte({f:e}){const r=async({idCompte:n})=>{await e(n)};return this.vnements.on("comptePrt",r),this.idCompte&&await r({idCompte:this.idCompte}),async()=>{this.vnements.off("comptePrt",r)}}async obtIdLibp2p(){const{sfip:e}=await this.attendreSfipEtOrbite();return e.libp2p.peerId.toString()}async obtIdDispositif(){const{orbite:e}=await this.attendreSfipEtOrbite();return e.identity.id}async obtIdentitOrbite(){const{orbite:e}=await this.attendreSfipEtOrbite();return e.identity}async obtIdCompte(){const{idCompte:e}=await this.attendreInitialise();return e}async copierContenuBdDic({bdBase:e,nouvelleBd:r,clef:n,schma:i}){const s=await e.get(n);if(typeof s!="string")return;const{bd:a,fOublier:o}=await this.ouvrirBdType({id:s,type:"keyvalue",schma:i}),c=await r.get(n);if(!c)throw new Error("La nouvelle BD n'existait pas.");if(typeof c!="string")throw new Error(`${c} n'est pas une adresse Orbite.`);const{bd:u,fOublier:l}=await this.ouvrirBdType({id:c,type:"keyvalue",schma:i}),f=await a.all();await Promise.allSettled(f.map(async d=>{await u.put(d.key,d.value)})),o(),l()}suivreBd({id:e,f:r,type:n,schma:i}){if(!Su(e))throw new Error(`Adresse "${e}" non valide.`);const s=[],a={},o=new AbortController;return(i?n==="set"?this.ouvrirBdType({id:e,type:n,signal:o.signal,schma:i}):n==="keyvalue"?this.ouvrirBdType({id:e,type:n,signal:o.signal,schma:i}):n==="ordered-keyvalue"?this.ouvrirBdType({id:e,type:n,signal:o.signal,schma:i}):this.ouvrirBd({id:e,type:n,signal:o.signal}):this.ouvrirBd({id:e,signal:o.signal})).then(({bd:l,fOublier:f})=>{s.push(f);const d=()=>{const h=ti(),m=r(l);(g=>!!g&&!!g.then)(m)&&(a[h]=m,m.then(()=>{delete a[h]}))};l.events.on("update",d),s.push(async()=>{l.events.off("update",d)}),d()}),async()=>{o.abort(),await Promise.allSettled(s.map(l=>l())),await Promise.allSettled(Object.values(a))}}async suivreBdDeClef({id:e,clef:r,f:n,fSuivre:i}){return await Fn({fRacine:async({fSuivreRacine:a})=>{const o=async c=>{const u=await c.get(r);return await a(u)};return await this.suivreBd({id:e,f:o,type:"keyvalue"})},f:n,fSuivre:i})}async suivreBdDic({id:e,schma:r,f:n}){const i=async s=>{const a=s?Object.fromEntries((await s.all()).map(o=>[o.key,o.value])):{};await n(a)};return await this.suivreBd({id:e,type:"keyvalue",schma:r,f:i})}async suivreBdDicOrdonne({id:e,schma:r,f:n}){const i=async s=>{const a=await s.all();await n(a)};return await this.suivreBd({id:e,type:"ordered-keyvalue",schma:r,f:i})}async suivreBdDicDeClef({id:e,clef:r,schma:n,f:i}){const s=async o=>{await i(o||{})},a=async({id:o,fSuivreBd:c})=>await this.suivreBdDic({id:o,schma:n,f:c});return await this.suivreBdDeClef({id:e,clef:r,f:s,fSuivre:a})}async suivreBdDicOrdonneDeClef({id:e,clef:r,schma:n,f:i}){const s=async o=>{await i(o||[])},a=async({id:o,fSuivreBd:c})=>await this.suivreBdDicOrdonne({id:o,schma:n,f:c});return await this.suivreBdDeClef({id:e,clef:r,f:s,fSuivre:a})}async suivreBdListeDeClef({id:e,clef:r,f:n,schma:i,renvoyerValeur:s=!0}){if(s){const a=async c=>{await n(c||[])},o=async({id:c,fSuivreBd:u})=>await this.suivreBdListe({id:c,f:u,schma:i,renvoyerValeur:s});return await this.suivreBdDeClef({id:e,clef:r,f:a,fSuivre:o})}else{const a=async c=>{await n(c||[])},o=async({id:c,fSuivreBd:u})=>await this.suivreBdListe({id:c,f:u,schma:i,renvoyerValeur:!1});return await this.suivreBdDeClef({id:e,clef:r,f:a,fSuivre:o})}}async suivreBdListe({id:e,f:r,schma:n,renvoyerValeur:i=!0}){return await this.suivreBd({id:e,type:"set",schma:n,f:async s=>{const a=i?(await s.all()).map(o=>o.value):await s.all();await r(a)}})}async suivreTypeObjet({idObjet:e,f:r}){const n=async a=>{let o;const{type:c}=a;c?o=["motClef","variable","bd","projet","nue"].includes(c)?c:void 0:a.bds?o="projet":a.tableaux?o="bd":a.catgorie?o="variable":a.nom&&(o="motClef"),await r(o)},i={type:"object",properties:{type:{type:"string",nullable:!0}},additionalProperties:!0};return await this.suivreBdDic({id:e,schma:i,f:n})}async suivreEmpreinteTtesBdRcursive({idBd:e,f:r}){const n=async c=>{const u=await c.log.heads();return u[u.length-1]?.hash||""},i=c=>Wv.stringify(Q5(c));return await dr({fListe:async c=>await this.suivreBdsRcursives({idBd:e,f:async u=>await c(u)}),f:async c=>{await r(i(c.sort().join()))},fBranche:async(c,u)=>await this.suivreBd({id:c,f:async l=>{const f=await n(l);await u(f)}})})}async suivreBdsDeBdListe({id:e,f:r,fBranche:n,fIdBdDeBranche:i=o=>o,fRduction:s=o=>[...new Set(o.flat())],fCode:a=o=>o}){return await dr({fListe:async c=>await this.suivreBdListe({id:e,f:c}),f:r,fBranche:n,fIdBdDeBranche:i,fRduction:s,fCode:a})}async suivreBdsDeBdDic({id:e,f:r,fBranche:n,fIdBdDeBranche:i=o=>o,fRduction:s=o=>[...new Set(o.flat())],fCode:a=o=>o}){return await dr({fListe:async c=>await this.suivreBd({id:e,f:async u=>await c((await u.all()).map(l=>l.value))}),f:r,fBranche:n,fIdBdDeBranche:i,fRduction:s,fCode:a})}async suivreBdsDeFonctionRecherche({fListe:e,f:r,fBranche:n,fIdBdDeBranche:i=o=>o,fRduction:s=o=>[...new Set(o.flat())],fCode:a=o=>o}){let o;const c=async f=>{o&&await o(f)};return{fOublier:await dr({fListe:async f=>{const{fOublier:d,fChangerProfondeur:h}=await e(f);return o=h,d},f:r,fBranche:n,fIdBdDeBranche:i,fRduction:s,fCode:a}),fChangerProfondeur:c}}async suivreBdSelonCondition({fRacine:e,fCondition:r,f:n}){const i=async({id:s,fSuivreBd:a})=>await r(s,async o=>{a(o?s:void 0)});return await Fn({fRacine:async({fSuivreRacine:s})=>await e(s),f:Kn(n),fSuivre:i})}async suivreBdsSelonCondition({fListe:e,fCondition:r,f:n}){return await dr({fListe:e,f:async a=>{const o=a.filter(c=>c.tat).map(c=>c.id);return await n(o)},fBranche:async(a,o)=>await r(a,async u=>await o({id:a,tat:u}))})}async obtFichierSFIP({id:e,max:r}){return await e8e(await this.obtItrableAsyncSFIP({id:e}),r)}async obtItrableAsyncSFIP({id:e}){const{sfip:r}=await this.attendreSfipEtOrbite(),n=$W(r),i=e.split("/")[0];return n.cat(mt.parse(i))}async ajouterSFIP({contenu:e,nomFichier:r}){const{sfip:n}=await this.attendreSfipEtOrbite();return(await $W(n).addFile({content:e})).toString()+"/"+r}async obtClefStockageClient({clef:e,parCompte:r=!0}){if(r){const n=await this.obtIdCompte();return`${n.slice(n.length-23,n.length-8)} : ${e}`}return e}async obtDeStockageLocal({clef:e,parCompte:r=!0}){const n=await this.obtClefStockageClient({clef:e,parCompte:r});return(await mg(await this.dossier())).getItem(n)}async sauvegarderAuStockageLocal({clef:e,val:r,parCompte:n=!0}){const i=await this.obtClefStockageClient({clef:e,parCompte:n});return(await mg(await this.dossier())).setItem(i,r)}async effacerDeStockageLocal({clef:e,parCompte:r=!0}){const n=await this.obtClefStockageClient({clef:e,parCompte:r});return(await mg(await this.dossier())).removeItem(n)}async obtIdBd({nom:e,racine:r,type:n}){const i={type:"object",properties:{[e]:{type:"string"}},additionalProperties:!0,required:[]};if(!Su(r))throw new Error(`Adresse ${r} non valide.`);const s=await new Promise(a=>{let o;this.suivreBdDic({id:r,schma:i,f:c=>{c[e]&&(o?.(),a(c[e]))}}).then(c=>o=c)});if(typeof s=="string"&&n){const{fOublier:a}=await this.ouvrirBd({id:s,type:n});return await a(),s}return s}async crerBdIndpendante({type:e,optionsAccs:r,nom:n}){const{orbite:i}=await this.attendreSfipEtOrbite();return r=r||await this.obtOptionsAccs(),await i.crerBdIndpendante({type:e,nom:n,options:{AccessController:zB(r)}})}async effacerBd({id:e}){return await this.orbite?.effacerBd({id:e})}async obtOpsAccs({idBd:e}){const{bd:r,fOublier:n}=await this.ouvrirBd({id:e}),i=r.access;return await n(),{write:i.address}}async suivrePermission({idObjet:e,f:r}){const{bd:n,fOublier:i}=await this.ouvrirBd({id:e}),s=n.access,a=s.type;if(a==="ipfs"){const o=await this.obtIdDispositif();return await r(s.write.includes(o)?su:void 0),await i(),kn}else if(a===il){const o=async u=>{const l=u.filter(d=>d.idCompte===this.idCompte).map(d=>d.rle),f=l.includes(Ts)?Ts:l.includes(su)?su:void 0;await r(f)},c=await s.suivreUtilisateursAutoriss(o);return async()=>{await c(),await i()}}else throw new Error(`Type d'accs ${a} non reconnu.`)}async suivrePermissioncrire({id:e,f:r}){const n=async i=>{await r(i!==void 0)};return await this.suivrePermission({idObjet:e,f:n})}async permission({idObjet:e}){return await wr(async r=>await this.suivrePermission({idObjet:e,f:r}))}async suivreAccsBd({id:e,f:r}){const n=async i=>{const s=i.access,a=s.type;if(a==="ipfs"){const o=s.write.map(c=>({idCompte:c,rle:Ts}));await r(o)}else if(a===il)return await s.suivreUtilisateursAutoriss(r);return kn};return await this.suivreBd({id:e,f:n})}async suivreBdsRcursives({idBd:e,f:r}){const n={},i=async()=>{await r(Object.keys(n))},s=new Io,a=async l=>{delete n[l],await Promise.allSettled(Object.keys(n).map(async f=>{n[f]&&(n[f].requtes.delete(l),n[f].requtes.size||await n[f].fOublier())}))},o=["copiDe"],c=async(l,f)=>{const d=y=>y.map(b=>typeof b=="string"?[b]:Array.isArray(b)?b:typeof b=="object"?Object.values(b):[]).flat().filter(b=>ll(b)),h=async y=>{let b=[];typeof y=="object"?(b=d(Object.entries(y).filter(E=>!o.includes(E[0])).map(E=>E[1])),b.push(...d(Object.keys(y)))):Array.isArray(y)?b=d(y):typeof y=="string"&&(b=[y]);const _=b.filter(E=>!n[l].sousBds.includes(E)),x=n[l].sousBds.filter(E=>!b.includes(E));n[l].sousBds=b,await Promise.allSettled(x.map(async E=>{n[E]?.requtes.delete(l),n[E]?.requtes.size||await n[E]?.fOublier()})),await Promise.allSettled(_.map(async E=>await c(E,l))),i()};if(await s.acquire(l),n[l]){n[l].requtes.add(f);return}const{bd:m,fOublier:p}=await this.ouvrirBd({id:l}),{type:g}=m;await p(),n[l]={requtes:new Set([f]),sousBds:[],fOublier:async()=>{await v(),await a(l)}};let v;g==="keyvalue"?v=await this.suivreBdDic({id:l,f:h}):g==="ordered-keyvalue"?v=await this.suivreBdDicOrdonne({id:l,f:h}):g==="set"?v=await this.suivreBdListe({id:l,f:h}):v=kn,s.release(l),i()};return await c(e,""),async()=>{await Promise.allSettled(Object.values(n).map(l=>l.fOublier()))}}async fermer(){await this.attendreInitialise(),this.signaleurArrt.abort(),await this._fermerComposantes();const{orbite:e,sfip:r}=await this.attendreSfipEtOrbite();await e.fermer({arrterOrbite:!this._orbiteExterne}),this._sfipExterne||(await r.stop(),await r.libp2p.stop()),await this.effacerVerrou()}async effacerDispositif(){if(await this.fermer(),indexedDB)if(indexedDB.databases){const e=await indexedDB.databases();await Promise.allSettled(e.map(r=>{r.name&&indexedDB.deleteDatabase(r.name)}))}else console.warn("On a pas pu tout effacer.");else{const e=await qt(()=>Promise.resolve().then(()=>Is),void 0);(await mg(await this.dossier())).clear(),e.rmdirSync(await this.dossier())}}async exporterDispositif({nomFichier:e}){if(vi||gi){const r=await qt(()=>Promise.resolve().then(()=>Is),void 0),n=await qt(()=>Promise.resolve().then(()=>py),void 0),i=({dossier:a,zip:o})=>{r.readdirSync(a).map(u=>{if(r.statSync(u)?.isDirectory())i({dossier:n.join(a,u),zip:o.folder(u)});else{const f=r.createReadStream(n.join(a,u));o.file(u,f)}})},s=new rC;i({dossier:await this.dossier(),zip:s}),await hC({fichierZip:s,nomFichier:e})}else if(indexedDB?.databases){const r=({bd:a,zip:o})=>{const{name:c}=a;if(c){const u=o.folder(c);if(!u)throw new Error(c);const f=indexedDB.open(c).result.objectStoreNames;[...Array(f.length).keys()].map(h=>f.item(h)).filter(h=>!!h).map(h=>u.file(h,new Lst.IndexedDbReadStream({databaseName:c,objectStoreName:h})))}},n=new rC,i=await indexedDB.databases(),s=n.folder("bdIndexe");if(!s)throw new Error("Erreur Bd Indexe...");i.forEach(a=>{r({bd:a,zip:s})}),n.file("stockageLocal",JSON.stringify(await Glt(await this.dossier()))),await hC({fichierZip:n,nomFichier:e})}else throw new Error("Sauvegarde non implmente.")}async rtablirDispositif(){throw await this.effacerDispositif(),vi||gi?new Error("Non implment"):new Error("Non implment")}static async crer(e={}){const r=new Co(e);return await r.attendreInitialise(),r}}Oe([je],Co.prototype,"suivreDispositifs",null);Oe([je],Co.prototype,"suivreIdCompte",null);Oe([je],Co.prototype,"suivreEmpreinteTtesBdRcursive",null);Oe([je],Co.prototype,"suivrePermission",null);Oe([je],Co.prototype,"suivrePermissioncrire",null);Oe([je],Co.prototype,"suivreAccsBd",null);Oe([je],Co.prototype,"suivreBdsRcursives",null);class Dwt{ipa;erreurInitialisation;_messagesEnAttente;prt;dicFRetourSuivi;opts;fsMessages;fsErreurs;_verrou;constructor(e,r,n={}){this.fsMessages={},this.fsErreurs={},this.connectercouteurs({fMessage:e,fErreur:r}),this.opts=n instanceof Co?{}:n,n instanceof Co&&(this.ipa=n),this.dicFRetourSuivi={},this.prt=!1,this._messagesEnAttente=[],this._verrou=new Io,this.init()}fMessage(e){Object.values(this.fsMessages).forEach(r=>r(e))}fErreur({erreur:e,idRequte:r,code:n}){Object.values(this.fsErreurs).forEach(i=>i({erreur:e,idRequte:r,code:n}))}async init(){if(await this._verrou.acquire("init"),this.ipa)return this._verrou.release("init"),this.ipa;try{this.ipa=await Co.crer(this.opts)}catch(e){throw this.erreurInitialisation=e,this.fErreur({erreur:e.toString(),code:e.name==="Error"?pg:e.name}),this._messagesEnAttente.forEach(r=>this.fErreur({erreur:e.toString(),idRequte:r.idRequte,code:e.name==="Error"?pg:e.name})),e}return this._messagesEnAttente.forEach(e=>this._grerMessage(e)),this.prt=!0,this._verrou.release("init"),this.ipa}async grerMessage(e){this.prt?await this._grerMessage(e):this.erreurInitialisation?this.fErreur({erreur:this.erreurInitialisation.toString(),idRequte:e.idRequte,code:this.erreurInitialisation.name==="Error"?pg:this.erreurInitialisation.name}):this._messagesEnAttente.unshift(e)}async _grerMessage(e){if(!this.ipa){this.fErreur({erreur:"IPA non initialis",idRequte:e.idRequte,code:pg});return}const{type:r}=e;switch(r){case"suivre":{const{idRequte:n,fonction:i,args:s,nomArgFonction:a}=e,o=this.extraireFonctionIPA(i,n);if(!o)return;const c=u=>{const l={type:"suivre",idRequte:n,donnes:u};this.fMessage(l)};s[a]=c;try{const u=await o(s),l=typeof u=="function"?{fOublier:u}:u;this.dicFRetourSuivi[n]=l;const f={type:"suivrePrt",idRequte:n};typeof u!="function"&&(f.fonctions=Object.keys(u)),this.fMessage(f)}catch(u){const l=(u instanceof AggregateError?u.errors:[u]).map(f=>f.toString()+f.stack.toString()).join(`
`);this.fErreur({erreur:l,idRequte:n,code:ih})}break}case"action":{const{idRequte:n,fonction:i,args:s}=e,a=this.extraireFonctionIPA(i,n);if(!a)return;try{const o=await a(s),c={type:"action",idRequte:n,rsultat:o};this.fMessage(c)}catch(o){const c=(o instanceof AggregateError?o.errors:[o]).map(u=>u.toString()+u.stack.toString()).join(`
`);this.fErreur({erreur:c,idRequte:n,code:ih})}break}case"retour":{const{idRequte:n,fonction:i,args:s}=e,a=this.dicFRetourSuivi[n];a&&await a[i](s),i==="fOublier"&&delete this.dicFRetourSuivi[n];break}default:{this.fErreur({erreur:`Type de requte ${r} non reconnu dans message ${e}`,idRequte:e.idRequte,code:ih});break}}}extraireFonctionIPA(e,r){const n=`Fonction Constellation.${e.join(".")} n'existe pas ou n'est pas une fonction.`;let i=this.ipa;for(const[s,a]of e.entries()){if(typeof i=="object"&&a in i&&i[a])s===e.length-1?i=i[a].bind(i):i=i[a];else{this.fErreur({erreur:n,idRequte:r,code:qI});return}if(!i){this.fErreur({erreur:n,idRequte:r,code:qI});return}}if(typeof i!="function"){this.fErreur({erreur:n,idRequte:r,code:pue});return}return i}connectercouteurs({fMessage:e,fErreur:r}){const n=ti();return this.fsMessages[n]=e,this.fsErreurs[n]=r,()=>{delete this.fsMessages[n],delete this.fsErreurs[n]}}async fermer(){await(await this.init()).fermer()}}class Mwt extends Ltt{ipa;constructor(e={}){super(),this.ipa=new Dwt(r=>this.recevoirMessageDIpa(r),({erreur:r,idRequte:n,code:i})=>{const s={type:"erreur",idRequte:n,erreur:r,codeErreur:i};this.recevoirMessageDIpa(s)},e)}envoyerMessageIpa(e){this.ipa.grerMessage(e)}}const Nwt=(t={})=>$tt(new Mwt(t)),Fwt={install:t=>{const e=Nwt();t.config.globalProperties.$constl=e,t.provide("constl",e)}},Lwt={accueil:{titre:{egu25:"SC4.5: Using distributed databases in your citizen science research",egu24:"SC6.8: Using distributed databases in your citizen science research",nsih24:"Hands-on Session III: Using Constellation distributed data software in your own citizen science projects"},changerLangue:"Change language"},obtConstellation:{titre:"Get Constellation",options:{tlcharger:"Download",navig:"Browser app",docu:"Read docs",codeSource:"Source code"}},donnes:{titre:"Download sample data",tlcharger:"Download data",lienDynamique:"Copy link",crdits:"Data source:"},dmo:{titre:"Live demo!",sousTitre:"You are now a citizen scientist",choisirStation:"Choose a station on the map, or else take a picture",plusDePhotos:"No more photos to analyse",effacerDonnes:"Clear my data",indicePrcip:"Input rainfall (mm)",indiceTlcharger:"Download data",nouvellePhoto:"New photo",soumettre:"Submit",numroInvalid:"Invalid number",graphique:{aucuneDonne:"No data yet"},source:"Data from SmartPhones4Water.",merci:"Thank you!"},code:{titre:"Dynamic data access",options:{appli:"Access in app",python:"Python Code",r:"R Code",julia:"Julia Code"},conclusion:"The Constellation team hopes to hear from you!",contact:"julien.malard@mail.mcgill.ca"}},$wt={accueil:{titre:{egu25:"SC4.5: Vos projets de science citoyenne  l're des donnes distribues",egu24:"SC6.8: Comment incorporer les donnes distribues  vos projets de science citoyenne",nsih24:"Cours III: Utilisation de Constellation dans vos projets de science citoyenne"},changerLangue:"Choisir la langue"},obtConstellation:{titre:"Obtenir Constellation",options:{tlcharger:"Tlcharger",navig:"Appli navigateur",docu:"Lire la documenation",codeSource:"Code source"}},donnes:{titre:"Obtenir les donnes test",tlcharger:"Tlcharger les donnes",lienDynamique:"Copier le lien",crdits:"Source des donnes:"},dmo:{titre:"Exemple en directe!",sousTitre:"Vous tes maintenant un citoyen scientifique",choisirStation:"Choisissez un station sur la carte, ou bien prenez une photo",plusDePhotos:"Il n'y a plus de donnes  analyser",effacerDonnes:"Effacer mes donnes",indicePrcip:"Saisir la prcipitation (mm)",indiceTlcharger:"Tlcharger les donnes",nouvellePhoto:"Nouvelle photo",soumettre:"Soumettre",numroInvalid:"Valeur invalide",graphique:{aucuneDonne:"Aucune donne pour l'instant"},source:"Donnes provenant de SmartPhones4Water.",merci:"Merci!"},code:{titre:"Accs dynamique aux donnes",options:{appli:"Accder dans l'appli",python:"Code Python",r:"Code R",julia:"Code Julia"},conclusion:"L'quipe Constellation aimerait bien entendre votre opinion !",contact:"julien.malard@mail.mcgill.ca"}},Uwt={en:Lwt,:{accueil:{titre:{egu25:"  -        ",egu24:"  -        ",nsih24:"  -               "},changerLangue:" "},obtConstellation:{titre:" ",options:{tlcharger:" ",navig:"  ",docu:" ",codeSource:""}},donnes:{titre:"  ",tlcharger:"  ",lienDynamique:"  ",crdits:"   -"},dmo:{titre:"  ",sousTitre:"     ",choisirStation:"         ",plusDePhotos:"      ",effacerDonnes:"   ",indicePrcip:" ( )",indiceTlcharger:"",nouvellePhoto:" ",soumettre:" ",numroInvalid:" ",graphique:{aucuneDonne:"     "},source:"       ",merci:""},code:{titre:"   ",options:{appli:"  ",python:" ",r:" ",julia:" "},conclusion:"     ",contact:"julien.malard@mail.mcgill.ca"}},:{accueil:{titre:{egu24:"  .:     ",egu25:"  .:     "},changerLangue:" "},obtConstellation:{titre:" ",options:{tlcharger:" ",navig:" ",docu:" ",codeSource:" "}},donnes:{titre:"  ",tlcharger:" ",lienDynamique:" ",crdits:" :"},dmo:{titre:" ",sousTitre:"    !",choisirStation:"    ,     ",plusDePhotos:"      ",effacerDonnes:"  ",indicePrcip:"  (. .)",indiceTlcharger:"",nouvellePhoto:" ",soumettre:"",numroInvalid:" ",graphique:{aucuneDonne:"   "},source:"     .",merci:"!"},code:{titre:"  ",options:{appli:" ",python:" ",r:" ",julia:" "},conclusion:"      ",contact:"julien.malard@mail.mcgill.ca"}},fr:$wt},jwt=y7e({:"",_:"fr",_:Uwt});function Vwt(t){t.use(F2e),t.use(zse),t.use(Fwt),t.use(jwt)}const qwt=Pn({__name:"BtnMenuLangues",setup(t){const{isRtl:e}=Oo();return(r,n)=>(Vt(),hr(Wa,{style:Dp(["position: absolute;"+(Ve(e)?"left:":"right:")+"20px; top: 20px",{"z-index":"100"}]),icon:"mdi-earth",size:"small"},{default:Ge(()=>[ae(Hr,{size:"large"}),ae(rie)]),_:1},8,["style"]))}}),zwt=et({...Qt(),...O2e({fullHeight:!0}),...Ei()},"VApp"),Hwt=_t()({name:"VApp",props:zwt(),setup(t,e){let{slots:r}=e;const n=Yi(t),{layoutClasses:i,getLayoutItem:s,items:a,layoutRef:o}=M2e(t),{rtlClasses:c}=Oo();return Gt(()=>ae("div",{ref:o,class:["v-application",n.themeClasses.value,i.value,c.value,t.class],style:[t.style]},[ae("div",{class:"v-application__wrap"},[r.default?.()])])),{getLayoutItem:s,items:a,theme:n}}}),Wwt=et({locale:String,fallbackLocale:String,messages:Object,rtl:{type:Boolean,default:void 0},...Qt()},"VLocaleProvider"),Gwt=_t()({name:"VLocaleProvider",props:Wwt(),setup(t,e){let{slots:r}=e;const{rtlClasses:n}=Tye(t);return Gt(()=>ae("div",{class:["v-locale-provider",n.value,t.class],style:t.style},[r.default?.()])),{}}}),Kwt=et({scrollable:Boolean,...Qt(),...wl(),...ri({tag:"main"})},"VMain"),Xwt=_t()({name:"VMain",props:Kwt(),setup(t,e){let{slots:r}=e;const{dimensionStyles:n}=_l(t),{mainStyles:i}=B2e(),{ssrBootStyles:s}=gO();return Gt(()=>ae(t.tag,{class:["v-main",{"v-main--scrollable":t.scrollable},t.class],style:[i.value,s.value,n.value,t.style]},{default:()=>[t.scrollable?ae("div",{class:"v-main__scroller"},[r.default?.()]):r.default?.()]})),{}}}),Ywt=Pn({__name:"App",setup(t){const{__:e}=Hp(),r=e();return(n,i)=>{const s=qwt,a=hge("router-view");return Vt(),hr(Hwt,null,{default:Ge(()=>[ae(Gwt,{rtl:Ve(r)},{default:Ge(()=>[ae(Xwt,null,{default:Ge(()=>[ae(s),ae(a,null,{default:Ge(({Component:o})=>[ae(Hf,{name:"fade"},{default:Ge(()=>[(Vt(),hr(IQ(o)))]),_:2},1024)]),_:1})]),_:1})]),_:1},8,["rtl"])]),_:1})}}}),Dpe=Ove(Ywt);Vwt(Dpe);Dpe.mount("#app");export{In as a,Bi as g};
