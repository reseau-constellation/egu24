const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-CvnvGlql.js","assets/index-Mt4U8GHL.js","assets/index-DJDjVLsi.js","assets/os-hmDTIVL1.js"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=r(i);fetch(i.href,s)}})();const Wo=typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{};function lae(){throw new Error("setTimeout has not been defined")}function uae(){throw new Error("clearTimeout has not been defined")}var G0=lae,Y0=uae;typeof Wo.setTimeout=="function"&&(G0=setTimeout);typeof Wo.clearTimeout=="function"&&(Y0=clearTimeout);function fae(t){if(G0===setTimeout)return setTimeout(t,0);if((G0===lae||!G0)&&setTimeout)return G0=setTimeout,setTimeout(t,0);try{return G0(t,0)}catch{try{return G0.call(null,t,0)}catch{return G0.call(this,t,0)}}}function p9e(t){if(Y0===clearTimeout)return clearTimeout(t);if((Y0===uae||!Y0)&&clearTimeout)return Y0=clearTimeout,clearTimeout(t);try{return Y0(t)}catch{try{return Y0.call(null,t)}catch{return Y0.call(this,t)}}}var _d=[],fy=!1,lg,hx=-1;function g9e(){!fy||!lg||(fy=!1,lg.length?_d=lg.concat(_d):hx=-1,_d.length&&hae())}function hae(){if(!fy){var t=fae(g9e);fy=!0;for(var e=_d.length;e;){for(lg=_d,_d=[];++hx<e;)lg&&lg[hx].run();hx=-1,e=_d.length}lg=null,fy=!1,p9e(t)}}function cl(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];_d.push(new dae(t,e)),_d.length===1&&!fy&&fae(hae)}function dae(t,e){this.fun=t,this.array=e}dae.prototype.run=function(){this.fun.apply(null,this.array)};var m9e="browser",y9e="browser",v9e=!0,b9e={},w9e=[],_9e="",x9e={},E9e={},S9e={};function Sm(){}var A9e=Sm,T9e=Sm,k9e=Sm,C9e=Sm,I9e=Sm,R9e=Sm,P9e=Sm;function B9e(t){throw new Error("process.binding is not supported")}function D9e(){return"/"}function O9e(t){throw new Error("process.chdir is not supported")}function N9e(){return 0}var H2=Wo.performance||{},M9e=H2.now||H2.mozNow||H2.msNow||H2.oNow||H2.webkitNow||function(){return new Date().getTime()};function L9e(t){var e=M9e.call(H2)*.001,r=Math.floor(e),n=Math.floor(e%1*1e9);return t&&(r=r-t[0],n=n-t[1],n<0&&(r--,n+=1e9)),[r,n]}var F9e=new Date;function $9e(){var t=new Date,e=t-F9e;return e/1e3}var U9e={nextTick:cl,title:m9e,browser:v9e,env:b9e,argv:w9e,version:_9e,versions:x9e,on:A9e,addListener:T9e,once:k9e,off:C9e,removeListener:I9e,removeAllListeners:R9e,emit:P9e,binding:B9e,cwd:D9e,chdir:O9e,umask:N9e,hrtime:L9e,platform:y9e,release:E9e,config:S9e,uptime:$9e},It=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function si(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function pae(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})}),r}var Es={},G9={};G9.byteLength=z9e;G9.toByteArray=H9e;G9.fromByteArray=G9e;var $f=[],Il=[],V9e=typeof Uint8Array<"u"?Uint8Array:Array,Fk="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var b2=0,j9e=Fk.length;b2<j9e;++b2)$f[b2]=Fk[b2],Il[Fk.charCodeAt(b2)]=b2;Il[45]=62;Il[95]=63;function gae(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");r===-1&&(r=e);var n=r===e?0:4-r%4;return[r,n]}function z9e(t){var e=gae(t),r=e[0],n=e[1];return(r+n)*3/4-n}function q9e(t,e,r){return(e+r)*3/4-r}function H9e(t){var e,r=gae(t),n=r[0],i=r[1],s=new V9e(q9e(t,n,i)),a=0,o=i>0?n-4:n,c;for(c=0;c<o;c+=4)e=Il[t.charCodeAt(c)]<<18|Il[t.charCodeAt(c+1)]<<12|Il[t.charCodeAt(c+2)]<<6|Il[t.charCodeAt(c+3)],s[a++]=e>>16&255,s[a++]=e>>8&255,s[a++]=e&255;return i===2&&(e=Il[t.charCodeAt(c)]<<2|Il[t.charCodeAt(c+1)]>>4,s[a++]=e&255),i===1&&(e=Il[t.charCodeAt(c)]<<10|Il[t.charCodeAt(c+1)]<<4|Il[t.charCodeAt(c+2)]>>2,s[a++]=e>>8&255,s[a++]=e&255),s}function W9e(t){return $f[t>>18&63]+$f[t>>12&63]+$f[t>>6&63]+$f[t&63]}function K9e(t,e,r){for(var n,i=[],s=e;s<r;s+=3)n=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(t[s+2]&255),i.push(W9e(n));return i.join("")}function G9e(t){for(var e,r=t.length,n=r%3,i=[],s=16383,a=0,o=r-n;a<o;a+=s)i.push(K9e(t,a,a+s>o?o:a+s));return n===1?(e=t[r-1],i.push($f[e>>2]+$f[e<<4&63]+"==")):n===2&&(e=(t[r-2]<<8)+t[r-1],i.push($f[e>>10]+$f[e>>4&63]+$f[e<<2&63]+"=")),i.join("")}var tL={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */tL.read=function(t,e,r,n,i){var s,a,o=i*8-n-1,c=(1<<o)-1,l=c>>1,u=-7,f=r?i-1:0,h=r?-1:1,d=t[e+f];for(f+=h,s=d&(1<<-u)-1,d>>=-u,u+=o;u>0;s=s*256+t[e+f],f+=h,u-=8);for(a=s&(1<<-u)-1,s>>=-u,u+=n;u>0;a=a*256+t[e+f],f+=h,u-=8);if(s===0)s=1-l;else{if(s===c)return a?NaN:(d?-1:1)*(1/0);a=a+Math.pow(2,n),s=s-l}return(d?-1:1)*a*Math.pow(2,s-n)};tL.write=function(t,e,r,n,i,s){var a,o,c,l=s*8-i-1,u=(1<<l)-1,f=u>>1,h=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,d=n?0:s-1,g=n?1:-1,p=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(o=isNaN(e)?1:0,a=u):(a=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-a))<1&&(a--,c*=2),a+f>=1?e+=h/c:e+=h*Math.pow(2,1-f),e*c>=2&&(a++,c/=2),a+f>=u?(o=0,a=u):a+f>=1?(o=(e*c-1)*Math.pow(2,i),a=a+f):(o=e*Math.pow(2,f-1)*Math.pow(2,i),a=0));i>=8;t[r+d]=o&255,d+=g,o/=256,i-=8);for(a=a<<i|o,l+=i;l>0;t[r+d]=a&255,d+=g,a/=256,l-=8);t[r+d-g]|=p*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(t){const e=G9,r=tL,n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=o,t.SlowBuffer=v,t.INSPECT_MAX_BYTES=50;const i=2147483647;t.kMaxLength=i,o.TYPED_ARRAY_SUPPORT=s(),!o.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function s(){try{const se=new Uint8Array(1),Z={foo:function(){return 42}};return Object.setPrototypeOf(Z,Uint8Array.prototype),Object.setPrototypeOf(se,Z),se.foo()===42}catch{return!1}}Object.defineProperty(o.prototype,"parent",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.buffer}}),Object.defineProperty(o.prototype,"offset",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.byteOffset}});function a(se){if(se>i)throw new RangeError('The value "'+se+'" is invalid for option "size"');const Z=new Uint8Array(se);return Object.setPrototypeOf(Z,o.prototype),Z}function o(se,Z,J){if(typeof se=="number"){if(typeof Z=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return f(se)}return c(se,Z,J)}o.poolSize=8192;function c(se,Z,J){if(typeof se=="string")return h(se,Z);if(ArrayBuffer.isView(se))return g(se);if(se==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof se);if(ge(se,ArrayBuffer)||se&&ge(se.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(ge(se,SharedArrayBuffer)||se&&ge(se.buffer,SharedArrayBuffer)))return p(se,Z,J);if(typeof se=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const de=se.valueOf&&se.valueOf();if(de!=null&&de!==se)return o.from(de,Z,J);const Ae=m(se);if(Ae)return Ae;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof se[Symbol.toPrimitive]=="function")return o.from(se[Symbol.toPrimitive]("string"),Z,J);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof se)}o.from=function(se,Z,J){return c(se,Z,J)},Object.setPrototypeOf(o.prototype,Uint8Array.prototype),Object.setPrototypeOf(o,Uint8Array);function l(se){if(typeof se!="number")throw new TypeError('"size" argument must be of type number');if(se<0)throw new RangeError('The value "'+se+'" is invalid for option "size"')}function u(se,Z,J){return l(se),se<=0?a(se):Z!==void 0?typeof J=="string"?a(se).fill(Z,J):a(se).fill(Z):a(se)}o.alloc=function(se,Z,J){return u(se,Z,J)};function f(se){return l(se),a(se<0?0:y(se)|0)}o.allocUnsafe=function(se){return f(se)},o.allocUnsafeSlow=function(se){return f(se)};function h(se,Z){if((typeof Z!="string"||Z==="")&&(Z="utf8"),!o.isEncoding(Z))throw new TypeError("Unknown encoding: "+Z);const J=_(se,Z)|0;let de=a(J);const Ae=de.write(se,Z);return Ae!==J&&(de=de.slice(0,Ae)),de}function d(se){const Z=se.length<0?0:y(se.length)|0,J=a(Z);for(let de=0;de<Z;de+=1)J[de]=se[de]&255;return J}function g(se){if(ge(se,Uint8Array)){const Z=new Uint8Array(se);return p(Z.buffer,Z.byteOffset,Z.byteLength)}return d(se)}function p(se,Z,J){if(Z<0||se.byteLength<Z)throw new RangeError('"offset" is outside of buffer bounds');if(se.byteLength<Z+(J||0))throw new RangeError('"length" is outside of buffer bounds');let de;return Z===void 0&&J===void 0?de=new Uint8Array(se):J===void 0?de=new Uint8Array(se,Z):de=new Uint8Array(se,Z,J),Object.setPrototypeOf(de,o.prototype),de}function m(se){if(o.isBuffer(se)){const Z=y(se.length)|0,J=a(Z);return J.length===0||se.copy(J,0,0,Z),J}if(se.length!==void 0)return typeof se.length!="number"||Pe(se.length)?a(0):d(se);if(se.type==="Buffer"&&Array.isArray(se.data))return d(se.data)}function y(se){if(se>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return se|0}function v(se){return+se!=se&&(se=0),o.alloc(+se)}o.isBuffer=function(Z){return Z!=null&&Z._isBuffer===!0&&Z!==o.prototype},o.compare=function(Z,J){if(ge(Z,Uint8Array)&&(Z=o.from(Z,Z.offset,Z.byteLength)),ge(J,Uint8Array)&&(J=o.from(J,J.offset,J.byteLength)),!o.isBuffer(Z)||!o.isBuffer(J))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(Z===J)return 0;let de=Z.length,Ae=J.length;for(let De=0,Re=Math.min(de,Ae);De<Re;++De)if(Z[De]!==J[De]){de=Z[De],Ae=J[De];break}return de<Ae?-1:Ae<de?1:0},o.isEncoding=function(Z){switch(String(Z).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(Z,J){if(!Array.isArray(Z))throw new TypeError('"list" argument must be an Array of Buffers');if(Z.length===0)return o.alloc(0);let de;if(J===void 0)for(J=0,de=0;de<Z.length;++de)J+=Z[de].length;const Ae=o.allocUnsafe(J);let De=0;for(de=0;de<Z.length;++de){let Re=Z[de];if(ge(Re,Uint8Array))De+Re.length>Ae.length?(o.isBuffer(Re)||(Re=o.from(Re)),Re.copy(Ae,De)):Uint8Array.prototype.set.call(Ae,Re,De);else if(o.isBuffer(Re))Re.copy(Ae,De);else throw new TypeError('"list" argument must be an Array of Buffers');De+=Re.length}return Ae};function _(se,Z){if(o.isBuffer(se))return se.length;if(ArrayBuffer.isView(se)||ge(se,ArrayBuffer))return se.byteLength;if(typeof se!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof se);const J=se.length,de=arguments.length>2&&arguments[2]===!0;if(!de&&J===0)return 0;let Ae=!1;for(;;)switch(Z){case"ascii":case"latin1":case"binary":return J;case"utf8":case"utf-8":return ne(se).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return J*2;case"hex":return J>>>1;case"base64":return ve(se).length;default:if(Ae)return de?-1:ne(se).length;Z=(""+Z).toLowerCase(),Ae=!0}}o.byteLength=_;function x(se,Z,J){let de=!1;if((Z===void 0||Z<0)&&(Z=0),Z>this.length||((J===void 0||J>this.length)&&(J=this.length),J<=0)||(J>>>=0,Z>>>=0,J<=Z))return"";for(se||(se="utf8");;)switch(se){case"hex":return O(this,Z,J);case"utf8":case"utf-8":return w(this,Z,J);case"ascii":return I(this,Z,J);case"latin1":case"binary":return U(this,Z,J);case"base64":return k(this,Z,J);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return D(this,Z,J);default:if(de)throw new TypeError("Unknown encoding: "+se);se=(se+"").toLowerCase(),de=!0}}o.prototype._isBuffer=!0;function A(se,Z,J){const de=se[Z];se[Z]=se[J],se[J]=de}o.prototype.swap16=function(){const Z=this.length;if(Z%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let J=0;J<Z;J+=2)A(this,J,J+1);return this},o.prototype.swap32=function(){const Z=this.length;if(Z%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let J=0;J<Z;J+=4)A(this,J,J+3),A(this,J+1,J+2);return this},o.prototype.swap64=function(){const Z=this.length;if(Z%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let J=0;J<Z;J+=8)A(this,J,J+7),A(this,J+1,J+6),A(this,J+2,J+5),A(this,J+3,J+4);return this},o.prototype.toString=function(){const Z=this.length;return Z===0?"":arguments.length===0?w(this,0,Z):x.apply(this,arguments)},o.prototype.toLocaleString=o.prototype.toString,o.prototype.equals=function(Z){if(!o.isBuffer(Z))throw new TypeError("Argument must be a Buffer");return this===Z?!0:o.compare(this,Z)===0},o.prototype.inspect=function(){let Z="";const J=t.INSPECT_MAX_BYTES;return Z=this.toString("hex",0,J).replace(/(.{2})/g,"$1 ").trim(),this.length>J&&(Z+=" ... "),"<Buffer "+Z+">"},n&&(o.prototype[n]=o.prototype.inspect),o.prototype.compare=function(Z,J,de,Ae,De){if(ge(Z,Uint8Array)&&(Z=o.from(Z,Z.offset,Z.byteLength)),!o.isBuffer(Z))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof Z);if(J===void 0&&(J=0),de===void 0&&(de=Z?Z.length:0),Ae===void 0&&(Ae=0),De===void 0&&(De=this.length),J<0||de>Z.length||Ae<0||De>this.length)throw new RangeError("out of range index");if(Ae>=De&&J>=de)return 0;if(Ae>=De)return-1;if(J>=de)return 1;if(J>>>=0,de>>>=0,Ae>>>=0,De>>>=0,this===Z)return 0;let Re=De-Ae,bt=de-J;const $t=Math.min(Re,bt),ut=this.slice(Ae,De),Mt=Z.slice(J,de);for(let Ft=0;Ft<$t;++Ft)if(ut[Ft]!==Mt[Ft]){Re=ut[Ft],bt=Mt[Ft];break}return Re<bt?-1:bt<Re?1:0};function C(se,Z,J,de,Ae){if(se.length===0)return-1;if(typeof J=="string"?(de=J,J=0):J>2147483647?J=2147483647:J<-2147483648&&(J=-2147483648),J=+J,Pe(J)&&(J=Ae?0:se.length-1),J<0&&(J=se.length+J),J>=se.length){if(Ae)return-1;J=se.length-1}else if(J<0)if(Ae)J=0;else return-1;if(typeof Z=="string"&&(Z=o.from(Z,de)),o.isBuffer(Z))return Z.length===0?-1:R(se,Z,J,de,Ae);if(typeof Z=="number")return Z=Z&255,typeof Uint8Array.prototype.indexOf=="function"?Ae?Uint8Array.prototype.indexOf.call(se,Z,J):Uint8Array.prototype.lastIndexOf.call(se,Z,J):R(se,[Z],J,de,Ae);throw new TypeError("val must be string, number or Buffer")}function R(se,Z,J,de,Ae){let De=1,Re=se.length,bt=Z.length;if(de!==void 0&&(de=String(de).toLowerCase(),de==="ucs2"||de==="ucs-2"||de==="utf16le"||de==="utf-16le")){if(se.length<2||Z.length<2)return-1;De=2,Re/=2,bt/=2,J/=2}function $t(Mt,Ft){return De===1?Mt[Ft]:Mt.readUInt16BE(Ft*De)}let ut;if(Ae){let Mt=-1;for(ut=J;ut<Re;ut++)if($t(se,ut)===$t(Z,Mt===-1?0:ut-Mt)){if(Mt===-1&&(Mt=ut),ut-Mt+1===bt)return Mt*De}else Mt!==-1&&(ut-=ut-Mt),Mt=-1}else for(J+bt>Re&&(J=Re-bt),ut=J;ut>=0;ut--){let Mt=!0;for(let Ft=0;Ft<bt;Ft++)if($t(se,ut+Ft)!==$t(Z,Ft)){Mt=!1;break}if(Mt)return ut}return-1}o.prototype.includes=function(Z,J,de){return this.indexOf(Z,J,de)!==-1},o.prototype.indexOf=function(Z,J,de){return C(this,Z,J,de,!0)},o.prototype.lastIndexOf=function(Z,J,de){return C(this,Z,J,de,!1)};function M(se,Z,J,de){J=Number(J)||0;const Ae=se.length-J;de?(de=Number(de),de>Ae&&(de=Ae)):de=Ae;const De=Z.length;de>De/2&&(de=De/2);let Re;for(Re=0;Re<de;++Re){const bt=parseInt(Z.substr(Re*2,2),16);if(Pe(bt))return Re;se[J+Re]=bt}return Re}function N(se,Z,J,de){return Ee(ne(Z,se.length-J),se,J,de)}function Y(se,Z,J,de){return Ee(ie(Z),se,J,de)}function H(se,Z,J,de){return Ee(ve(Z),se,J,de)}function E(se,Z,J,de){return Ee(ce(Z,se.length-J),se,J,de)}o.prototype.write=function(Z,J,de,Ae){if(J===void 0)Ae="utf8",de=this.length,J=0;else if(de===void 0&&typeof J=="string")Ae=J,de=this.length,J=0;else if(isFinite(J))J=J>>>0,isFinite(de)?(de=de>>>0,Ae===void 0&&(Ae="utf8")):(Ae=de,de=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const De=this.length-J;if((de===void 0||de>De)&&(de=De),Z.length>0&&(de<0||J<0)||J>this.length)throw new RangeError("Attempt to write outside buffer bounds");Ae||(Ae="utf8");let Re=!1;for(;;)switch(Ae){case"hex":return M(this,Z,J,de);case"utf8":case"utf-8":return N(this,Z,J,de);case"ascii":case"latin1":case"binary":return Y(this,Z,J,de);case"base64":return H(this,Z,J,de);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,Z,J,de);default:if(Re)throw new TypeError("Unknown encoding: "+Ae);Ae=(""+Ae).toLowerCase(),Re=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function k(se,Z,J){return Z===0&&J===se.length?e.fromByteArray(se):e.fromByteArray(se.slice(Z,J))}function w(se,Z,J){J=Math.min(se.length,J);const de=[];let Ae=Z;for(;Ae<J;){const De=se[Ae];let Re=null,bt=De>239?4:De>223?3:De>191?2:1;if(Ae+bt<=J){let $t,ut,Mt,Ft;switch(bt){case 1:De<128&&(Re=De);break;case 2:$t=se[Ae+1],($t&192)===128&&(Ft=(De&31)<<6|$t&63,Ft>127&&(Re=Ft));break;case 3:$t=se[Ae+1],ut=se[Ae+2],($t&192)===128&&(ut&192)===128&&(Ft=(De&15)<<12|($t&63)<<6|ut&63,Ft>2047&&(Ft<55296||Ft>57343)&&(Re=Ft));break;case 4:$t=se[Ae+1],ut=se[Ae+2],Mt=se[Ae+3],($t&192)===128&&(ut&192)===128&&(Mt&192)===128&&(Ft=(De&15)<<18|($t&63)<<12|(ut&63)<<6|Mt&63,Ft>65535&&Ft<1114112&&(Re=Ft))}}Re===null?(Re=65533,bt=1):Re>65535&&(Re-=65536,de.push(Re>>>10&1023|55296),Re=56320|Re&1023),de.push(Re),Ae+=bt}return L(de)}const T=4096;function L(se){const Z=se.length;if(Z<=T)return String.fromCharCode.apply(String,se);let J="",de=0;for(;de<Z;)J+=String.fromCharCode.apply(String,se.slice(de,de+=T));return J}function I(se,Z,J){let de="";J=Math.min(se.length,J);for(let Ae=Z;Ae<J;++Ae)de+=String.fromCharCode(se[Ae]&127);return de}function U(se,Z,J){let de="";J=Math.min(se.length,J);for(let Ae=Z;Ae<J;++Ae)de+=String.fromCharCode(se[Ae]);return de}function O(se,Z,J){const de=se.length;(!Z||Z<0)&&(Z=0),(!J||J<0||J>de)&&(J=de);let Ae="";for(let De=Z;De<J;++De)Ae+=Ce[se[De]];return Ae}function D(se,Z,J){const de=se.slice(Z,J);let Ae="";for(let De=0;De<de.length-1;De+=2)Ae+=String.fromCharCode(de[De]+de[De+1]*256);return Ae}o.prototype.slice=function(Z,J){const de=this.length;Z=~~Z,J=J===void 0?de:~~J,Z<0?(Z+=de,Z<0&&(Z=0)):Z>de&&(Z=de),J<0?(J+=de,J<0&&(J=0)):J>de&&(J=de),J<Z&&(J=Z);const Ae=this.subarray(Z,J);return Object.setPrototypeOf(Ae,o.prototype),Ae};function P(se,Z,J){if(se%1!==0||se<0)throw new RangeError("offset is not uint");if(se+Z>J)throw new RangeError("Trying to access beyond buffer length")}o.prototype.readUintLE=o.prototype.readUIntLE=function(Z,J,de){Z=Z>>>0,J=J>>>0,de||P(Z,J,this.length);let Ae=this[Z],De=1,Re=0;for(;++Re<J&&(De*=256);)Ae+=this[Z+Re]*De;return Ae},o.prototype.readUintBE=o.prototype.readUIntBE=function(Z,J,de){Z=Z>>>0,J=J>>>0,de||P(Z,J,this.length);let Ae=this[Z+--J],De=1;for(;J>0&&(De*=256);)Ae+=this[Z+--J]*De;return Ae},o.prototype.readUint8=o.prototype.readUInt8=function(Z,J){return Z=Z>>>0,J||P(Z,1,this.length),this[Z]},o.prototype.readUint16LE=o.prototype.readUInt16LE=function(Z,J){return Z=Z>>>0,J||P(Z,2,this.length),this[Z]|this[Z+1]<<8},o.prototype.readUint16BE=o.prototype.readUInt16BE=function(Z,J){return Z=Z>>>0,J||P(Z,2,this.length),this[Z]<<8|this[Z+1]},o.prototype.readUint32LE=o.prototype.readUInt32LE=function(Z,J){return Z=Z>>>0,J||P(Z,4,this.length),(this[Z]|this[Z+1]<<8|this[Z+2]<<16)+this[Z+3]*16777216},o.prototype.readUint32BE=o.prototype.readUInt32BE=function(Z,J){return Z=Z>>>0,J||P(Z,4,this.length),this[Z]*16777216+(this[Z+1]<<16|this[Z+2]<<8|this[Z+3])},o.prototype.readBigUInt64LE=Ie(function(Z){Z=Z>>>0,re(Z,"offset");const J=this[Z],de=this[Z+7];(J===void 0||de===void 0)&&V(Z,this.length-8);const Ae=J+this[++Z]*2**8+this[++Z]*2**16+this[++Z]*2**24,De=this[++Z]+this[++Z]*2**8+this[++Z]*2**16+de*2**24;return BigInt(Ae)+(BigInt(De)<<BigInt(32))}),o.prototype.readBigUInt64BE=Ie(function(Z){Z=Z>>>0,re(Z,"offset");const J=this[Z],de=this[Z+7];(J===void 0||de===void 0)&&V(Z,this.length-8);const Ae=J*2**24+this[++Z]*2**16+this[++Z]*2**8+this[++Z],De=this[++Z]*2**24+this[++Z]*2**16+this[++Z]*2**8+de;return(BigInt(Ae)<<BigInt(32))+BigInt(De)}),o.prototype.readIntLE=function(Z,J,de){Z=Z>>>0,J=J>>>0,de||P(Z,J,this.length);let Ae=this[Z],De=1,Re=0;for(;++Re<J&&(De*=256);)Ae+=this[Z+Re]*De;return De*=128,Ae>=De&&(Ae-=Math.pow(2,8*J)),Ae},o.prototype.readIntBE=function(Z,J,de){Z=Z>>>0,J=J>>>0,de||P(Z,J,this.length);let Ae=J,De=1,Re=this[Z+--Ae];for(;Ae>0&&(De*=256);)Re+=this[Z+--Ae]*De;return De*=128,Re>=De&&(Re-=Math.pow(2,8*J)),Re},o.prototype.readInt8=function(Z,J){return Z=Z>>>0,J||P(Z,1,this.length),this[Z]&128?(255-this[Z]+1)*-1:this[Z]},o.prototype.readInt16LE=function(Z,J){Z=Z>>>0,J||P(Z,2,this.length);const de=this[Z]|this[Z+1]<<8;return de&32768?de|4294901760:de},o.prototype.readInt16BE=function(Z,J){Z=Z>>>0,J||P(Z,2,this.length);const de=this[Z+1]|this[Z]<<8;return de&32768?de|4294901760:de},o.prototype.readInt32LE=function(Z,J){return Z=Z>>>0,J||P(Z,4,this.length),this[Z]|this[Z+1]<<8|this[Z+2]<<16|this[Z+3]<<24},o.prototype.readInt32BE=function(Z,J){return Z=Z>>>0,J||P(Z,4,this.length),this[Z]<<24|this[Z+1]<<16|this[Z+2]<<8|this[Z+3]},o.prototype.readBigInt64LE=Ie(function(Z){Z=Z>>>0,re(Z,"offset");const J=this[Z],de=this[Z+7];(J===void 0||de===void 0)&&V(Z,this.length-8);const Ae=this[Z+4]+this[Z+5]*2**8+this[Z+6]*2**16+(de<<24);return(BigInt(Ae)<<BigInt(32))+BigInt(J+this[++Z]*2**8+this[++Z]*2**16+this[++Z]*2**24)}),o.prototype.readBigInt64BE=Ie(function(Z){Z=Z>>>0,re(Z,"offset");const J=this[Z],de=this[Z+7];(J===void 0||de===void 0)&&V(Z,this.length-8);const Ae=(J<<24)+this[++Z]*2**16+this[++Z]*2**8+this[++Z];return(BigInt(Ae)<<BigInt(32))+BigInt(this[++Z]*2**24+this[++Z]*2**16+this[++Z]*2**8+de)}),o.prototype.readFloatLE=function(Z,J){return Z=Z>>>0,J||P(Z,4,this.length),r.read(this,Z,!0,23,4)},o.prototype.readFloatBE=function(Z,J){return Z=Z>>>0,J||P(Z,4,this.length),r.read(this,Z,!1,23,4)},o.prototype.readDoubleLE=function(Z,J){return Z=Z>>>0,J||P(Z,8,this.length),r.read(this,Z,!0,52,8)},o.prototype.readDoubleBE=function(Z,J){return Z=Z>>>0,J||P(Z,8,this.length),r.read(this,Z,!1,52,8)};function B(se,Z,J,de,Ae,De){if(!o.isBuffer(se))throw new TypeError('"buffer" argument must be a Buffer instance');if(Z>Ae||Z<De)throw new RangeError('"value" argument is out of bounds');if(J+de>se.length)throw new RangeError("Index out of range")}o.prototype.writeUintLE=o.prototype.writeUIntLE=function(Z,J,de,Ae){if(Z=+Z,J=J>>>0,de=de>>>0,!Ae){const bt=Math.pow(2,8*de)-1;B(this,Z,J,de,bt,0)}let De=1,Re=0;for(this[J]=Z&255;++Re<de&&(De*=256);)this[J+Re]=Z/De&255;return J+de},o.prototype.writeUintBE=o.prototype.writeUIntBE=function(Z,J,de,Ae){if(Z=+Z,J=J>>>0,de=de>>>0,!Ae){const bt=Math.pow(2,8*de)-1;B(this,Z,J,de,bt,0)}let De=de-1,Re=1;for(this[J+De]=Z&255;--De>=0&&(Re*=256);)this[J+De]=Z/Re&255;return J+de},o.prototype.writeUint8=o.prototype.writeUInt8=function(Z,J,de){return Z=+Z,J=J>>>0,de||B(this,Z,J,1,255,0),this[J]=Z&255,J+1},o.prototype.writeUint16LE=o.prototype.writeUInt16LE=function(Z,J,de){return Z=+Z,J=J>>>0,de||B(this,Z,J,2,65535,0),this[J]=Z&255,this[J+1]=Z>>>8,J+2},o.prototype.writeUint16BE=o.prototype.writeUInt16BE=function(Z,J,de){return Z=+Z,J=J>>>0,de||B(this,Z,J,2,65535,0),this[J]=Z>>>8,this[J+1]=Z&255,J+2},o.prototype.writeUint32LE=o.prototype.writeUInt32LE=function(Z,J,de){return Z=+Z,J=J>>>0,de||B(this,Z,J,4,4294967295,0),this[J+3]=Z>>>24,this[J+2]=Z>>>16,this[J+1]=Z>>>8,this[J]=Z&255,J+4},o.prototype.writeUint32BE=o.prototype.writeUInt32BE=function(Z,J,de){return Z=+Z,J=J>>>0,de||B(this,Z,J,4,4294967295,0),this[J]=Z>>>24,this[J+1]=Z>>>16,this[J+2]=Z>>>8,this[J+3]=Z&255,J+4};function z(se,Z,J,de,Ae){K(Z,de,Ae,se,J,7);let De=Number(Z&BigInt(4294967295));se[J++]=De,De=De>>8,se[J++]=De,De=De>>8,se[J++]=De,De=De>>8,se[J++]=De;let Re=Number(Z>>BigInt(32)&BigInt(4294967295));return se[J++]=Re,Re=Re>>8,se[J++]=Re,Re=Re>>8,se[J++]=Re,Re=Re>>8,se[J++]=Re,J}function F(se,Z,J,de,Ae){K(Z,de,Ae,se,J,7);let De=Number(Z&BigInt(4294967295));se[J+7]=De,De=De>>8,se[J+6]=De,De=De>>8,se[J+5]=De,De=De>>8,se[J+4]=De;let Re=Number(Z>>BigInt(32)&BigInt(4294967295));return se[J+3]=Re,Re=Re>>8,se[J+2]=Re,Re=Re>>8,se[J+1]=Re,Re=Re>>8,se[J]=Re,J+8}o.prototype.writeBigUInt64LE=Ie(function(Z,J=0){return z(this,Z,J,BigInt(0),BigInt("0xffffffffffffffff"))}),o.prototype.writeBigUInt64BE=Ie(function(Z,J=0){return F(this,Z,J,BigInt(0),BigInt("0xffffffffffffffff"))}),o.prototype.writeIntLE=function(Z,J,de,Ae){if(Z=+Z,J=J>>>0,!Ae){const $t=Math.pow(2,8*de-1);B(this,Z,J,de,$t-1,-$t)}let De=0,Re=1,bt=0;for(this[J]=Z&255;++De<de&&(Re*=256);)Z<0&&bt===0&&this[J+De-1]!==0&&(bt=1),this[J+De]=(Z/Re>>0)-bt&255;return J+de},o.prototype.writeIntBE=function(Z,J,de,Ae){if(Z=+Z,J=J>>>0,!Ae){const $t=Math.pow(2,8*de-1);B(this,Z,J,de,$t-1,-$t)}let De=de-1,Re=1,bt=0;for(this[J+De]=Z&255;--De>=0&&(Re*=256);)Z<0&&bt===0&&this[J+De+1]!==0&&(bt=1),this[J+De]=(Z/Re>>0)-bt&255;return J+de},o.prototype.writeInt8=function(Z,J,de){return Z=+Z,J=J>>>0,de||B(this,Z,J,1,127,-128),Z<0&&(Z=255+Z+1),this[J]=Z&255,J+1},o.prototype.writeInt16LE=function(Z,J,de){return Z=+Z,J=J>>>0,de||B(this,Z,J,2,32767,-32768),this[J]=Z&255,this[J+1]=Z>>>8,J+2},o.prototype.writeInt16BE=function(Z,J,de){return Z=+Z,J=J>>>0,de||B(this,Z,J,2,32767,-32768),this[J]=Z>>>8,this[J+1]=Z&255,J+2},o.prototype.writeInt32LE=function(Z,J,de){return Z=+Z,J=J>>>0,de||B(this,Z,J,4,2147483647,-2147483648),this[J]=Z&255,this[J+1]=Z>>>8,this[J+2]=Z>>>16,this[J+3]=Z>>>24,J+4},o.prototype.writeInt32BE=function(Z,J,de){return Z=+Z,J=J>>>0,de||B(this,Z,J,4,2147483647,-2147483648),Z<0&&(Z=4294967295+Z+1),this[J]=Z>>>24,this[J+1]=Z>>>16,this[J+2]=Z>>>8,this[J+3]=Z&255,J+4},o.prototype.writeBigInt64LE=Ie(function(Z,J=0){return z(this,Z,J,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),o.prototype.writeBigInt64BE=Ie(function(Z,J=0){return F(this,Z,J,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function X(se,Z,J,de,Ae,De){if(J+de>se.length)throw new RangeError("Index out of range");if(J<0)throw new RangeError("Index out of range")}function W(se,Z,J,de,Ae){return Z=+Z,J=J>>>0,Ae||X(se,Z,J,4),r.write(se,Z,J,de,23,4),J+4}o.prototype.writeFloatLE=function(Z,J,de){return W(this,Z,J,!0,de)},o.prototype.writeFloatBE=function(Z,J,de){return W(this,Z,J,!1,de)};function q(se,Z,J,de,Ae){return Z=+Z,J=J>>>0,Ae||X(se,Z,J,8),r.write(se,Z,J,de,52,8),J+8}o.prototype.writeDoubleLE=function(Z,J,de){return q(this,Z,J,!0,de)},o.prototype.writeDoubleBE=function(Z,J,de){return q(this,Z,J,!1,de)},o.prototype.copy=function(Z,J,de,Ae){if(!o.isBuffer(Z))throw new TypeError("argument should be a Buffer");if(de||(de=0),!Ae&&Ae!==0&&(Ae=this.length),J>=Z.length&&(J=Z.length),J||(J=0),Ae>0&&Ae<de&&(Ae=de),Ae===de||Z.length===0||this.length===0)return 0;if(J<0)throw new RangeError("targetStart out of bounds");if(de<0||de>=this.length)throw new RangeError("Index out of range");if(Ae<0)throw new RangeError("sourceEnd out of bounds");Ae>this.length&&(Ae=this.length),Z.length-J<Ae-de&&(Ae=Z.length-J+de);const De=Ae-de;return this===Z&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(J,de,Ae):Uint8Array.prototype.set.call(Z,this.subarray(de,Ae),J),De},o.prototype.fill=function(Z,J,de,Ae){if(typeof Z=="string"){if(typeof J=="string"?(Ae=J,J=0,de=this.length):typeof de=="string"&&(Ae=de,de=this.length),Ae!==void 0&&typeof Ae!="string")throw new TypeError("encoding must be a string");if(typeof Ae=="string"&&!o.isEncoding(Ae))throw new TypeError("Unknown encoding: "+Ae);if(Z.length===1){const Re=Z.charCodeAt(0);(Ae==="utf8"&&Re<128||Ae==="latin1")&&(Z=Re)}}else typeof Z=="number"?Z=Z&255:typeof Z=="boolean"&&(Z=Number(Z));if(J<0||this.length<J||this.length<de)throw new RangeError("Out of range index");if(de<=J)return this;J=J>>>0,de=de===void 0?this.length:de>>>0,Z||(Z=0);let De;if(typeof Z=="number")for(De=J;De<de;++De)this[De]=Z;else{const Re=o.isBuffer(Z)?Z:o.from(Z,Ae),bt=Re.length;if(bt===0)throw new TypeError('The value "'+Z+'" is invalid for argument "value"');for(De=0;De<de-J;++De)this[De+J]=Re[De%bt]}return this};const G={};function ee(se,Z,J){G[se]=class extends J{constructor(){super(),Object.defineProperty(this,"message",{value:Z.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${se}]`,this.stack,delete this.name}get code(){return se}set code(Ae){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:Ae,writable:!0})}toString(){return`${this.name} [${se}]: ${this.message}`}}}ee("ERR_BUFFER_OUT_OF_BOUNDS",function(se){return se?`${se} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),ee("ERR_INVALID_ARG_TYPE",function(se,Z){return`The "${se}" argument must be of type number. Received type ${typeof Z}`},TypeError),ee("ERR_OUT_OF_RANGE",function(se,Z,J){let de=`The value of "${se}" is out of range.`,Ae=J;return Number.isInteger(J)&&Math.abs(J)>2**32?Ae=ae(String(J)):typeof J=="bigint"&&(Ae=String(J),(J>BigInt(2)**BigInt(32)||J<-(BigInt(2)**BigInt(32)))&&(Ae=ae(Ae)),Ae+="n"),de+=` It must be ${Z}. Received ${Ae}`,de},RangeError);function ae(se){let Z="",J=se.length;const de=se[0]==="-"?1:0;for(;J>=de+4;J-=3)Z=`_${se.slice(J-3,J)}${Z}`;return`${se.slice(0,J)}${Z}`}function te(se,Z,J){re(Z,"offset"),(se[Z]===void 0||se[Z+J]===void 0)&&V(Z,se.length-(J+1))}function K(se,Z,J,de,Ae,De){if(se>J||se<Z){const Re=typeof Z=="bigint"?"n":"";let bt;throw Z===0||Z===BigInt(0)?bt=`>= 0${Re} and < 2${Re} ** ${(De+1)*8}${Re}`:bt=`>= -(2${Re} ** ${(De+1)*8-1}${Re}) and < 2 ** ${(De+1)*8-1}${Re}`,new G.ERR_OUT_OF_RANGE("value",bt,se)}te(de,Ae,De)}function re(se,Z){if(typeof se!="number")throw new G.ERR_INVALID_ARG_TYPE(Z,"number",se)}function V(se,Z,J){throw Math.floor(se)!==se?(re(se,J),new G.ERR_OUT_OF_RANGE("offset","an integer",se)):Z<0?new G.ERR_BUFFER_OUT_OF_BOUNDS:new G.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${Z}`,se)}const oe=/[^+/0-9A-Za-z-_]/g;function he(se){if(se=se.split("=")[0],se=se.trim().replace(oe,""),se.length<2)return"";for(;se.length%4!==0;)se=se+"=";return se}function ne(se,Z){Z=Z||1/0;let J;const de=se.length;let Ae=null;const De=[];for(let Re=0;Re<de;++Re){if(J=se.charCodeAt(Re),J>55295&&J<57344){if(!Ae){if(J>56319){(Z-=3)>-1&&De.push(239,191,189);continue}else if(Re+1===de){(Z-=3)>-1&&De.push(239,191,189);continue}Ae=J;continue}if(J<56320){(Z-=3)>-1&&De.push(239,191,189),Ae=J;continue}J=(Ae-55296<<10|J-56320)+65536}else Ae&&(Z-=3)>-1&&De.push(239,191,189);if(Ae=null,J<128){if((Z-=1)<0)break;De.push(J)}else if(J<2048){if((Z-=2)<0)break;De.push(J>>6|192,J&63|128)}else if(J<65536){if((Z-=3)<0)break;De.push(J>>12|224,J>>6&63|128,J&63|128)}else if(J<1114112){if((Z-=4)<0)break;De.push(J>>18|240,J>>12&63|128,J>>6&63|128,J&63|128)}else throw new Error("Invalid code point")}return De}function ie(se){const Z=[];for(let J=0;J<se.length;++J)Z.push(se.charCodeAt(J)&255);return Z}function ce(se,Z){let J,de,Ae;const De=[];for(let Re=0;Re<se.length&&!((Z-=2)<0);++Re)J=se.charCodeAt(Re),de=J>>8,Ae=J%256,De.push(Ae),De.push(de);return De}function ve(se){return e.toByteArray(he(se))}function Ee(se,Z,J,de){let Ae;for(Ae=0;Ae<de&&!(Ae+J>=Z.length||Ae>=se.length);++Ae)Z[Ae+J]=se[Ae];return Ae}function ge(se,Z){return se instanceof Z||se!=null&&se.constructor!=null&&se.constructor.name!=null&&se.constructor.name===Z.name}function Pe(se){return se!==se}const Ce=function(){const se="0123456789abcdef",Z=new Array(256);for(let J=0;J<16;++J){const de=J*16;for(let Ae=0;Ae<16;++Ae)Z[de+Ae]=se[J]+se[Ae]}return Z}();function Ie(se){return typeof BigInt>"u"?$e:se}function $e(){throw new Error("BigInt not supported")}})(Es);window.Buffer=Es.Buffer;window.process=U9e;/**
* @vue/shared v3.5.11
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function rL(t){const e=Object.create(null);for(const r of t.split(","))e[r]=1;return r=>r in e}const _i={},hy=[],Qf=()=>{},Y9e=()=>!1,Y9=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),nL=t=>t.startsWith("onUpdate:"),Ms=Object.assign,iL=(t,e)=>{const r=t.indexOf(e);r>-1&&t.splice(r,1)},X9e=Object.prototype.hasOwnProperty,Vn=(t,e)=>X9e.call(t,e),fr=Array.isArray,dy=t=>X9(t)==="[object Map]",mae=t=>X9(t)==="[object Set]",wr=t=>typeof t=="function",Gi=t=>typeof t=="string",Y1=t=>typeof t=="symbol",Pi=t=>t!==null&&typeof t=="object",yae=t=>(Pi(t)||wr(t))&&wr(t.then)&&wr(t.catch),vae=Object.prototype.toString,X9=t=>vae.call(t),Z9e=t=>X9(t).slice(8,-1),bae=t=>X9(t)==="[object Object]",sL=t=>Gi(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,i3=rL(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Z9=t=>{const e=Object.create(null);return r=>e[r]||(e[r]=t(r))},J9e=/-(\w)/g,Tc=Z9(t=>t.replace(J9e,(e,r)=>r?r.toUpperCase():"")),Q9e=/\B([A-Z])/g,Am=Z9(t=>t.replace(Q9e,"-$1").toLowerCase()),t0=Z9(t=>t.charAt(0).toUpperCase()+t.slice(1)),$k=Z9(t=>t?`on${t0(t)}`:""),M1=(t,e)=>!Object.is(t,e),Uk=(t,...e)=>{for(let r=0;r<t.length;r++)t[r](...e)},wae=(t,e,r,n=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:n,value:r})},eSe=t=>{const e=parseFloat(t);return isNaN(e)?t:e},tSe=t=>{const e=Gi(t)?Number(t):NaN;return isNaN(e)?t:e};let yW;const _ae=()=>yW||(yW=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof Wo<"u"?Wo:{});function Uv(t){if(fr(t)){const e={};for(let r=0;r<t.length;r++){const n=t[r],i=Gi(n)?sSe(n):Uv(n);if(i)for(const s in i)e[s]=i[s]}return e}else if(Gi(t)||Pi(t))return t}const rSe=/;(?![^(]*\))/g,nSe=/:([^]+)/,iSe=/\/\*[^]*?\*\//g;function sSe(t){const e={};return t.replace(iSe,"").split(rSe).forEach(r=>{if(r){const n=r.split(nSe);n.length>1&&(e[n[0].trim()]=n[1].trim())}}),e}function ku(t){let e="";if(Gi(t))e=t;else if(fr(t))for(let r=0;r<t.length;r++){const n=ku(t[r]);n&&(e+=n+" ")}else if(Pi(t))for(const r in t)t[r]&&(e+=r+" ");return e.trim()}function aSe(t){if(!t)return null;let{class:e,style:r}=t;return e&&!Gi(e)&&(t.class=ku(e)),r&&(t.style=Uv(r)),t}const oSe="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",cSe=rL(oSe);function xae(t){return!!t||t===""}const Eae=t=>!!(t&&t.__v_isRef===!0),xi=t=>Gi(t)?t:t==null?"":fr(t)||Pi(t)&&(t.toString===vae||!wr(t.toString))?Eae(t)?xi(t.value):JSON.stringify(t,Sae,2):String(t),Sae=(t,e)=>Eae(e)?Sae(t,e.value):dy(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((r,[n,i],s)=>(r[Vk(n,s)+" =>"]=i,r),{})}:mae(e)?{[`Set(${e.size})`]:[...e.values()].map(r=>Vk(r))}:Y1(e)?Vk(e):Pi(e)&&!fr(e)&&!bae(e)?String(e):e,Vk=(t,e="")=>{var r;return Y1(t)?`Symbol(${(r=t.description)!=null?r:e})`:t};/**
* @vue/reactivity v3.5.11
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Oo;class Aae{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Oo,!e&&Oo&&(this.index=(Oo.scopes||(Oo.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,r;if(this.scopes)for(e=0,r=this.scopes.length;e<r;e++)this.scopes[e].pause();for(e=0,r=this.effects.length;e<r;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,r;if(this.scopes)for(e=0,r=this.scopes.length;e<r;e++)this.scopes[e].resume();for(e=0,r=this.effects.length;e<r;e++)this.effects[e].resume()}}run(e){if(this._active){const r=Oo;try{return Oo=this,e()}finally{Oo=r}}}on(){Oo=this}off(){Oo=this.parent}stop(e){if(this._active){let r,n;for(r=0,n=this.effects.length;r<n;r++)this.effects[r].stop();for(r=0,n=this.cleanups.length;r<n;r++)this.cleanups[r]();if(this.scopes)for(r=0,n=this.scopes.length;r<n;r++)this.scopes[r].stop(!0);if(!this.detached&&this.parent&&!e){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0,this._active=!1}}}function aL(t){return new Aae(t)}function lSe(){return Oo}function Pc(t,e=!1){Oo&&Oo.cleanups.push(t)}let ki;const jk=new WeakSet;class Tae{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Oo&&Oo.active&&Oo.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,jk.has(this)&&(jk.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Cae(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,vW(this),Iae(this);const e=ki,r=Bu;ki=this,Bu=!0;try{return this.fn()}finally{Rae(this),ki=e,Bu=r,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)lL(e);this.deps=this.depsTail=void 0,vW(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?jk.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){oD(this)&&this.run()}get dirty(){return oD(this)}}let kae=0,s3,a3;function Cae(t,e=!1){if(t.flags|=8,e){t.next=a3,a3=t;return}t.next=s3,s3=t}function oL(){kae++}function cL(){if(--kae>0)return;if(a3){let e=a3;for(a3=void 0;e;){const r=e.next;e.next=void 0,e.flags&=-9,e=r}}let t;for(;s3;){let e=s3;for(s3=void 0;e;){const r=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(n){t||(t=n)}e=r}}if(t)throw t}function Iae(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function Rae(t){let e,r=t.depsTail,n=r;for(;n;){const i=n.prevDep;n.version===-1?(n===r&&(r=i),lL(n),uSe(n)):e=n,n.dep.activeLink=n.prevActiveLink,n.prevActiveLink=void 0,n=i}t.deps=e,t.depsTail=r}function oD(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(Pae(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function Pae(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===K3))return;t.globalVersion=K3;const e=t.dep;if(t.flags|=2,e.version>0&&!t.isSSR&&t.deps&&!oD(t)){t.flags&=-3;return}const r=ki,n=Bu;ki=t,Bu=!0;try{Iae(t);const i=t.fn(t._value);(e.version===0||M1(i,t._value))&&(t._value=i,e.version++)}catch(i){throw e.version++,i}finally{ki=r,Bu=n,Rae(t),t.flags&=-3}}function lL(t,e=!1){const{dep:r,prevSub:n,nextSub:i}=t;if(n&&(n.nextSub=i,t.prevSub=void 0),i&&(i.prevSub=n,t.nextSub=void 0),r.subs===t&&(r.subs=n),!r.subs&&r.computed){r.computed.flags&=-5;for(let s=r.computed.deps;s;s=s.nextDep)lL(s,!0)}!e&&!--r.sc&&r.map&&r.map.delete(r.key)}function uSe(t){const{prevDep:e,nextDep:r}=t;e&&(e.nextDep=r,t.prevDep=void 0),r&&(r.prevDep=e,t.nextDep=void 0)}let Bu=!0;const Bae=[];function X1(){Bae.push(Bu),Bu=!1}function Z1(){const t=Bae.pop();Bu=t===void 0?!0:t}function vW(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const r=ki;ki=void 0;try{e()}finally{ki=r}}}let K3=0;class fSe{constructor(e,r){this.sub=e,this.dep=r,this.version=r.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class uL{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(e){if(!ki||!Bu||ki===this.computed)return;let r=this.activeLink;if(r===void 0||r.sub!==ki)r=this.activeLink=new fSe(ki,this),ki.deps?(r.prevDep=ki.depsTail,ki.depsTail.nextDep=r,ki.depsTail=r):ki.deps=ki.depsTail=r,Dae(r);else if(r.version===-1&&(r.version=this.version,r.nextDep)){const n=r.nextDep;n.prevDep=r.prevDep,r.prevDep&&(r.prevDep.nextDep=n),r.prevDep=ki.depsTail,r.nextDep=void 0,ki.depsTail.nextDep=r,ki.depsTail=r,ki.deps===r&&(ki.deps=n)}return r}trigger(e){this.version++,K3++,this.notify(e)}notify(e){oL();try{for(let r=this.subs;r;r=r.prevSub)r.sub.notify()&&r.sub.dep.notify()}finally{cL()}}}function Dae(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let n=e.deps;n;n=n.nextDep)Dae(n)}const r=t.dep.subs;r!==t&&(t.prevSub=r,r&&(r.nextSub=t)),t.dep.subs=t}}const r7=new WeakMap,bg=Symbol(""),cD=Symbol(""),G3=Symbol("");function po(t,e,r){if(Bu&&ki){let n=r7.get(t);n||r7.set(t,n=new Map);let i=n.get(r);i||(n.set(r,i=new uL),i.map=n,i.key=r),i.track()}}function Bd(t,e,r,n,i,s){const a=r7.get(t);if(!a){K3++;return}const o=c=>{c&&c.trigger()};if(oL(),e==="clear")a.forEach(o);else{const c=fr(t),l=c&&sL(r);if(c&&r==="length"){const u=Number(n);a.forEach((f,h)=>{(h==="length"||h===G3||!Y1(h)&&h>=u)&&o(f)})}else switch(r!==void 0&&o(a.get(r)),l&&o(a.get(G3)),e){case"add":c?l&&o(a.get("length")):(o(a.get(bg)),dy(t)&&o(a.get(cD)));break;case"delete":c||(o(a.get(bg)),dy(t)&&o(a.get(cD)));break;case"set":dy(t)&&o(a.get(bg));break}}cL()}function hSe(t,e){const r=r7.get(t);return r&&r.get(e)}function w2(t){const e=rr(t);return e===t?e:(po(e,"iterate",G3),zl(t)?e:e.map(io))}function J9(t){return po(t=rr(t),"iterate",G3),t}const dSe={__proto__:null,[Symbol.iterator](){return zk(this,Symbol.iterator,io)},concat(...t){return w2(this).concat(...t.map(e=>fr(e)?w2(e):e))},entries(){return zk(this,"entries",t=>(t[1]=io(t[1]),t))},every(t,e){return $h(this,"every",t,e,void 0,arguments)},filter(t,e){return $h(this,"filter",t,e,r=>r.map(io),arguments)},find(t,e){return $h(this,"find",t,e,io,arguments)},findIndex(t,e){return $h(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return $h(this,"findLast",t,e,io,arguments)},findLastIndex(t,e){return $h(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return $h(this,"forEach",t,e,void 0,arguments)},includes(...t){return qk(this,"includes",t)},indexOf(...t){return qk(this,"indexOf",t)},join(t){return w2(this).join(t)},lastIndexOf(...t){return qk(this,"lastIndexOf",t)},map(t,e){return $h(this,"map",t,e,void 0,arguments)},pop(){return Zb(this,"pop")},push(...t){return Zb(this,"push",t)},reduce(t,...e){return bW(this,"reduce",t,e)},reduceRight(t,...e){return bW(this,"reduceRight",t,e)},shift(){return Zb(this,"shift")},some(t,e){return $h(this,"some",t,e,void 0,arguments)},splice(...t){return Zb(this,"splice",t)},toReversed(){return w2(this).toReversed()},toSorted(t){return w2(this).toSorted(t)},toSpliced(...t){return w2(this).toSpliced(...t)},unshift(...t){return Zb(this,"unshift",t)},values(){return zk(this,"values",io)}};function zk(t,e,r){const n=J9(t),i=n[e]();return n!==t&&!zl(t)&&(i._next=i.next,i.next=()=>{const s=i._next();return s.value&&(s.value=r(s.value)),s}),i}const pSe=Array.prototype;function $h(t,e,r,n,i,s){const a=J9(t),o=a!==t&&!zl(t),c=a[e];if(c!==pSe[e]){const f=c.apply(t,s);return o?io(f):f}let l=r;a!==t&&(o?l=function(f,h){return r.call(this,io(f),h,t)}:r.length>2&&(l=function(f,h){return r.call(this,f,h,t)}));const u=c.call(a,l,n);return o&&i?i(u):u}function bW(t,e,r,n){const i=J9(t);let s=r;return i!==t&&(zl(t)?r.length>3&&(s=function(a,o,c){return r.call(this,a,o,c,t)}):s=function(a,o,c){return r.call(this,a,io(o),c,t)}),i[e](s,...n)}function qk(t,e,r){const n=rr(t);po(n,"iterate",G3);const i=n[e](...r);return(i===-1||i===!1)&&pL(r[0])?(r[0]=rr(r[0]),n[e](...r)):i}function Zb(t,e,r=[]){X1(),oL();const n=rr(t)[e].apply(t,r);return cL(),Z1(),n}const gSe=rL("__proto__,__v_isRef,__isVue"),Oae=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Y1));function mSe(t){Y1(t)||(t=String(t));const e=rr(this);return po(e,"has",t),e.hasOwnProperty(t)}class Nae{constructor(e=!1,r=!1){this._isReadonly=e,this._isShallow=r}get(e,r,n){const i=this._isReadonly,s=this._isShallow;if(r==="__v_isReactive")return!i;if(r==="__v_isReadonly")return i;if(r==="__v_isShallow")return s;if(r==="__v_raw")return n===(i?s?ISe:$ae:s?Fae:Lae).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(n)?e:void 0;const a=fr(e);if(!i){let c;if(a&&(c=dSe[r]))return c;if(r==="hasOwnProperty")return mSe}const o=Reflect.get(e,r,ji(e)?e:n);return(Y1(r)?Oae.has(r):gSe(r))||(i||po(e,"get",r),s)?o:ji(o)?a&&sL(r)?o:o.value:Pi(o)?i?J4(o):Ps(o):o}}class Mae extends Nae{constructor(e=!1){super(!1,e)}set(e,r,n,i){let s=e[r];if(!this._isShallow){const c=Ug(s);if(!zl(n)&&!Ug(n)&&(s=rr(s),n=rr(n)),!fr(e)&&ji(s)&&!ji(n))return c?!1:(s.value=n,!0)}const a=fr(e)&&sL(r)?Number(r)<e.length:Vn(e,r),o=Reflect.set(e,r,n,ji(e)?e:i);return e===rr(i)&&(a?M1(n,s)&&Bd(e,"set",r,n):Bd(e,"add",r,n)),o}deleteProperty(e,r){const n=Vn(e,r);e[r];const i=Reflect.deleteProperty(e,r);return i&&n&&Bd(e,"delete",r,void 0),i}has(e,r){const n=Reflect.has(e,r);return(!Y1(r)||!Oae.has(r))&&po(e,"has",r),n}ownKeys(e){return po(e,"iterate",fr(e)?"length":bg),Reflect.ownKeys(e)}}class ySe extends Nae{constructor(e=!1){super(!0,e)}set(e,r){return!0}deleteProperty(e,r){return!0}}const vSe=new Mae,bSe=new ySe,wSe=new Mae(!0);const fL=t=>t,Q9=t=>Reflect.getPrototypeOf(t);function g_(t,e,r=!1,n=!1){t=t.__v_raw;const i=rr(t),s=rr(e);r||(M1(e,s)&&po(i,"get",e),po(i,"get",s));const{has:a}=Q9(i),o=n?fL:r?gL:io;if(a.call(i,e))return o(t.get(e));if(a.call(i,s))return o(t.get(s));t!==i&&t.get(e)}function m_(t,e=!1){const r=this.__v_raw,n=rr(r),i=rr(t);return e||(M1(t,i)&&po(n,"has",t),po(n,"has",i)),t===i?r.has(t):r.has(t)||r.has(i)}function y_(t,e=!1){return t=t.__v_raw,!e&&po(rr(t),"iterate",bg),Reflect.get(t,"size",t)}function wW(t,e=!1){!e&&!zl(t)&&!Ug(t)&&(t=rr(t));const r=rr(this);return Q9(r).has.call(r,t)||(r.add(t),Bd(r,"add",t,t)),this}function _W(t,e,r=!1){!r&&!zl(e)&&!Ug(e)&&(e=rr(e));const n=rr(this),{has:i,get:s}=Q9(n);let a=i.call(n,t);a||(t=rr(t),a=i.call(n,t));const o=s.call(n,t);return n.set(t,e),a?M1(e,o)&&Bd(n,"set",t,e):Bd(n,"add",t,e),this}function xW(t){const e=rr(this),{has:r,get:n}=Q9(e);let i=r.call(e,t);i||(t=rr(t),i=r.call(e,t)),n&&n.call(e,t);const s=e.delete(t);return i&&Bd(e,"delete",t,void 0),s}function EW(){const t=rr(this),e=t.size!==0,r=t.clear();return e&&Bd(t,"clear",void 0,void 0),r}function v_(t,e){return function(n,i){const s=this,a=s.__v_raw,o=rr(a),c=e?fL:t?gL:io;return!t&&po(o,"iterate",bg),a.forEach((l,u)=>n.call(i,c(l),c(u),s))}}function b_(t,e,r){return function(...n){const i=this.__v_raw,s=rr(i),a=dy(s),o=t==="entries"||t===Symbol.iterator&&a,c=t==="keys"&&a,l=i[t](...n),u=r?fL:e?gL:io;return!e&&po(s,"iterate",c?cD:bg),{next(){const{value:f,done:h}=l.next();return h?{value:f,done:h}:{value:o?[u(f[0]),u(f[1])]:u(f),done:h}},[Symbol.iterator](){return this}}}}function I0(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function _Se(){const t={get(s){return g_(this,s)},get size(){return y_(this)},has:m_,add:wW,set:_W,delete:xW,clear:EW,forEach:v_(!1,!1)},e={get(s){return g_(this,s,!1,!0)},get size(){return y_(this)},has:m_,add(s){return wW.call(this,s,!0)},set(s,a){return _W.call(this,s,a,!0)},delete:xW,clear:EW,forEach:v_(!1,!0)},r={get(s){return g_(this,s,!0)},get size(){return y_(this,!0)},has(s){return m_.call(this,s,!0)},add:I0("add"),set:I0("set"),delete:I0("delete"),clear:I0("clear"),forEach:v_(!0,!1)},n={get(s){return g_(this,s,!0,!0)},get size(){return y_(this,!0)},has(s){return m_.call(this,s,!0)},add:I0("add"),set:I0("set"),delete:I0("delete"),clear:I0("clear"),forEach:v_(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(s=>{t[s]=b_(s,!1,!1),r[s]=b_(s,!0,!1),e[s]=b_(s,!1,!0),n[s]=b_(s,!0,!0)}),[t,r,e,n]}const[xSe,ESe,SSe,ASe]=_Se();function hL(t,e){const r=e?t?ASe:SSe:t?ESe:xSe;return(n,i,s)=>i==="__v_isReactive"?!t:i==="__v_isReadonly"?t:i==="__v_raw"?n:Reflect.get(Vn(r,i)&&i in n?r:n,i,s)}const TSe={get:hL(!1,!1)},kSe={get:hL(!1,!0)},CSe={get:hL(!0,!1)};const Lae=new WeakMap,Fae=new WeakMap,$ae=new WeakMap,ISe=new WeakMap;function RSe(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function PSe(t){return t.__v_skip||!Object.isExtensible(t)?0:RSe(Z9e(t))}function Ps(t){return Ug(t)?t:dL(t,!1,vSe,TSe,Lae)}function Uae(t){return dL(t,!1,wSe,kSe,Fae)}function J4(t){return dL(t,!0,bSe,CSe,$ae)}function dL(t,e,r,n,i){if(!Pi(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const s=i.get(t);if(s)return s;const a=PSe(t);if(a===0)return t;const o=new Proxy(t,a===2?n:r);return i.set(t,o),o}function py(t){return Ug(t)?py(t.__v_raw):!!(t&&t.__v_isReactive)}function Ug(t){return!!(t&&t.__v_isReadonly)}function zl(t){return!!(t&&t.__v_isShallow)}function pL(t){return t?!!t.__v_raw:!1}function rr(t){const e=t&&t.__v_raw;return e?rr(e):t}function Tm(t){return!Vn(t,"__v_skip")&&Object.isExtensible(t)&&wae(t,"__v_skip",!0),t}const io=t=>Pi(t)?Ps(t):t,gL=t=>Pi(t)?J4(t):t;function ji(t){return t?t.__v_isRef===!0:!1}function ht(t){return Vae(t,!1)}function ur(t){return Vae(t,!0)}function Vae(t,e){return ji(t)?t:new BSe(t,e)}class BSe{constructor(e,r){this.dep=new uL,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=r?e:rr(e),this._value=r?e:io(e),this.__v_isShallow=r}get value(){return this.dep.track(),this._value}set value(e){const r=this._rawValue,n=this.__v_isShallow||zl(e)||Ug(e);e=n?e:rr(e),M1(e,r)&&(this._rawValue=e,this._value=n?e:io(e),this.dep.trigger())}}function ct(t){return ji(t)?t.value:t}const DSe={get:(t,e,r)=>e==="__v_raw"?t:ct(Reflect.get(t,e,r)),set:(t,e,r,n)=>{const i=t[e];return ji(i)&&!ji(r)?(i.value=r,!0):Reflect.set(t,e,r,n)}};function jae(t){return py(t)?t:new Proxy(t,DSe)}function mL(t){const e=fr(t)?new Array(t.length):{};for(const r in t)e[r]=zae(t,r);return e}class OSe{constructor(e,r,n){this._object=e,this._key=r,this._defaultValue=n,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return hSe(rr(this._object),this._key)}}class NSe{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function or(t,e,r){return ji(t)?t:wr(t)?new NSe(t):Pi(t)&&arguments.length>1?zae(t,e,r):ht(t)}function zae(t,e,r){const n=t[e];return ji(n)?n:new OSe(t,e,r)}class MSe{constructor(e,r,n){this.fn=e,this.setter=r,this._value=void 0,this.dep=new uL(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=K3-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!r,this.isSSR=n}notify(){if(this.flags|=16,!(this.flags&8)&&ki!==this)return Cae(this,!0),!0}get value(){const e=this.dep.track();return Pae(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function LSe(t,e,r=!1){let n,i;return wr(t)?n=t:(n=t.get,i=t.set),new MSe(n,i,r)}const w_={},n7=new WeakMap;let Kp;function FSe(t,e=!1,r=Kp){if(r){let n=n7.get(r);n||n7.set(r,n=[]),n.push(t)}}function $Se(t,e,r=_i){const{immediate:n,deep:i,once:s,scheduler:a,augmentJob:o,call:c}=r,l=x=>i?x:zl(x)||i===!1||i===0?md(x,1):md(x);let u,f,h,d,g=!1,p=!1;if(ji(t)?(f=()=>t.value,g=zl(t)):py(t)?(f=()=>l(t),g=!0):fr(t)?(p=!0,g=t.some(x=>py(x)||zl(x)),f=()=>t.map(x=>{if(ji(x))return x.value;if(py(x))return l(x);if(wr(x))return c?c(x,2):x()})):wr(t)?e?f=c?()=>c(t,2):t:f=()=>{if(h){X1();try{h()}finally{Z1()}}const x=Kp;Kp=u;try{return c?c(t,3,[d]):t(d)}finally{Kp=x}}:f=Qf,e&&i){const x=f,A=i===!0?1/0:i;f=()=>md(x(),A)}const m=lSe(),y=()=>{u.stop(),m&&iL(m.effects,u)};if(s&&e){const x=e;e=(...A)=>{x(...A),y()}}let v=p?new Array(t.length).fill(w_):w_;const _=x=>{if(!(!(u.flags&1)||!u.dirty&&!x))if(e){const A=u.run();if(i||g||(p?A.some((C,R)=>M1(C,v[R])):M1(A,v))){h&&h();const C=Kp;Kp=u;try{const R=[A,v===w_?void 0:p&&v[0]===w_?[]:v,d];c?c(e,3,R):e(...R),v=A}finally{Kp=C}}}else u.run()};return o&&o(_),u=new Tae(f),u.scheduler=a?()=>a(_,!1):_,d=x=>FSe(x,!1,u),h=u.onStop=()=>{const x=n7.get(u);if(x){if(c)c(x,4);else for(const A of x)A();n7.delete(u)}},e?n?_(!0):v=u.run():a?a(_.bind(null,!0),!0):u.run(),y.pause=u.pause.bind(u),y.resume=u.resume.bind(u),y.stop=y,y}function md(t,e=1/0,r){if(e<=0||!Pi(t)||t.__v_skip||(r=r||new Set,r.has(t)))return t;if(r.add(t),e--,ji(t))md(t.value,e,r);else if(fr(t))for(let n=0;n<t.length;n++)md(t[n],e,r);else if(mae(t)||dy(t))t.forEach(n=>{md(n,e,r)});else if(bae(t)){for(const n in t)md(t[n],e,r);for(const n of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,n)&&md(t[n],e,r)}return t}/**
* @vue/runtime-core v3.5.11
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Q4(t,e,r,n){try{return n?t(...n):t()}catch(i){eS(i,e,r)}}function ju(t,e,r,n){if(wr(t)){const i=Q4(t,e,r,n);return i&&yae(i)&&i.catch(s=>{eS(s,e,r)}),i}if(fr(t)){const i=[];for(let s=0;s<t.length;s++)i.push(ju(t[s],e,r,n));return i}}function eS(t,e,r,n=!0){const i=e?e.vnode:null,{errorHandler:s,throwUnhandledErrorInProduction:a}=e&&e.appContext.config||_i;if(e){let o=e.parent;const c=e.proxy,l=`https://vuejs.org/error-reference/#runtime-${r}`;for(;o;){const u=o.ec;if(u){for(let f=0;f<u.length;f++)if(u[f](t,c,l)===!1)return}o=o.parent}if(s){X1(),Q4(s,null,10,[t,c,l]),Z1();return}}USe(t,r,i,n,a)}function USe(t,e,r,n=!0,i=!1){if(i)throw t;console.error(t)}const $o=[];let Sf=-1;const gy=[];let e1=null,W2=0;const qae=Promise.resolve();let i7=null;function Bi(t){const e=i7||qae;return t?e.then(this?t.bind(this):t):e}function VSe(t){let e=Sf+1,r=$o.length;for(;e<r;){const n=e+r>>>1,i=$o[n],s=Y3(i);s<t||s===t&&i.flags&2?e=n+1:r=n}return e}function yL(t){if(!(t.flags&1)){const e=Y3(t),r=$o[$o.length-1];!r||!(t.flags&2)&&e>=Y3(r)?$o.push(t):$o.splice(VSe(e),0,t),t.flags|=1,Hae()}}function Hae(){i7||(i7=qae.then(Kae))}function jSe(t){fr(t)?gy.push(...t):e1&&t.id===-1?e1.splice(W2+1,0,t):t.flags&1||(gy.push(t),t.flags|=1),Hae()}function SW(t,e,r=Sf+1){for(;r<$o.length;r++){const n=$o[r];if(n&&n.flags&2){if(t&&n.id!==t.uid)continue;$o.splice(r,1),r--,n.flags&4&&(n.flags&=-2),n(),n.flags&4||(n.flags&=-2)}}}function Wae(t){if(gy.length){const e=[...new Set(gy)].sort((r,n)=>Y3(r)-Y3(n));if(gy.length=0,e1){e1.push(...e);return}for(e1=e,W2=0;W2<e1.length;W2++){const r=e1[W2];r.flags&4&&(r.flags&=-2),r.flags&8||r(),r.flags&=-2}e1=null,W2=0}}const Y3=t=>t.id==null?t.flags&2?-1:1/0:t.id;function Kae(t){try{for(Sf=0;Sf<$o.length;Sf++){const e=$o[Sf];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),Q4(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;Sf<$o.length;Sf++){const e=$o[Sf];e&&(e.flags&=-2)}Sf=-1,$o.length=0,Wae(),i7=null,($o.length||gy.length)&&Kae()}}let pa=null,Gae=null;function s7(t){const e=pa;return pa=t,Gae=t&&t.type.__scopeId||null,e}function mt(t,e=pa,r){if(!e||t._n)return t;const n=(...i)=>{n._d&&MW(-1);const s=s7(e);let a;try{a=t(...i)}finally{s7(s),n._d&&MW(1)}return a};return n._n=!0,n._c=!0,n._d=!0,n}function $a(t,e){if(pa===null)return t;const r=sS(pa),n=t.dirs||(t.dirs=[]);for(let i=0;i<e.length;i++){let[s,a,o,c=_i]=e[i];s&&(wr(s)&&(s={mounted:s,updated:s}),s.deep&&md(a),n.push({dir:s,instance:r,value:a,oldValue:void 0,arg:o,modifiers:c}))}return t}function Tp(t,e,r,n){const i=t.dirs,s=e&&e.dirs;for(let a=0;a<i.length;a++){const o=i[a];s&&(o.oldValue=s[a].value);let c=o.dir[n];c&&(X1(),ju(c,r,8,[t.el,o,t,e]),Z1())}}const Yae=Symbol("_vte"),Xae=t=>t.__isTeleport,o3=t=>t&&(t.disabled||t.disabled===""),zSe=t=>t&&(t.defer||t.defer===""),AW=t=>typeof SVGElement<"u"&&t instanceof SVGElement,TW=t=>typeof MathMLElement=="function"&&t instanceof MathMLElement,lD=(t,e)=>{const r=t&&t.to;return Gi(r)?e?e(r):null:r},qSe={name:"Teleport",__isTeleport:!0,process(t,e,r,n,i,s,a,o,c,l){const{mc:u,pc:f,pbc:h,o:{insert:d,querySelector:g,createText:p,createComment:m}}=l,y=o3(e.props);let{shapeFlag:v,children:_,dynamicChildren:x}=e;if(t==null){const A=e.el=p(""),C=e.anchor=p("");d(A,r,n),d(C,r,n);const R=(N,Y)=>{v&16&&(i&&i.isCE&&(i.ce._teleportTarget=N),u(_,N,Y,i,s,a,o,c))},M=()=>{const N=e.target=lD(e.props,g),Y=Zae(N,e,p,d);N&&(a!=="svg"&&AW(N)?a="svg":a!=="mathml"&&TW(N)&&(a="mathml"),y||(R(N,Y),dx(e)))};y&&(R(r,C),dx(e)),zSe(e.props)?sc(M,s):M()}else{e.el=t.el,e.targetStart=t.targetStart;const A=e.anchor=t.anchor,C=e.target=t.target,R=e.targetAnchor=t.targetAnchor,M=o3(t.props),N=M?r:C,Y=M?A:R;if(a==="svg"||AW(C)?a="svg":(a==="mathml"||TW(C))&&(a="mathml"),x?(h(t.dynamicChildren,x,N,i,s,a,o),AL(t,e,!0)):c||f(t,e,N,Y,i,s,a,o,!1),y)M?e.props&&t.props&&e.props.to!==t.props.to&&(e.props.to=t.props.to):__(e,r,A,l,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const H=e.target=lD(e.props,g);H&&__(e,H,null,l,0)}else M&&__(e,C,R,l,1);dx(e)}},remove(t,e,r,{um:n,o:{remove:i}},s){const{shapeFlag:a,children:o,anchor:c,targetStart:l,targetAnchor:u,target:f,props:h}=t;if(f&&(i(l),i(u)),s&&i(c),a&16){const d=s||!o3(h);for(let g=0;g<o.length;g++){const p=o[g];n(p,e,r,d,!!p.dynamicChildren)}}},move:__,hydrate:HSe};function __(t,e,r,{o:{insert:n},m:i},s=2){s===0&&n(t.targetAnchor,e,r);const{el:a,anchor:o,shapeFlag:c,children:l,props:u}=t,f=s===2;if(f&&n(a,e,r),(!f||o3(u))&&c&16)for(let h=0;h<l.length;h++)i(l[h],e,r,2);f&&n(o,e,r)}function HSe(t,e,r,n,i,s,{o:{nextSibling:a,parentNode:o,querySelector:c,insert:l,createText:u}},f){const h=e.target=lD(e.props,c);if(h){const d=h._lpa||h.firstChild;if(e.shapeFlag&16)if(o3(e.props))e.anchor=f(a(t),e,o(t),r,n,i,s),e.targetStart=d,e.targetAnchor=d&&a(d);else{e.anchor=a(t);let g=d;for(;g;){if(g&&g.nodeType===8){if(g.data==="teleport start anchor")e.targetStart=g;else if(g.data==="teleport anchor"){e.targetAnchor=g,h._lpa=e.targetAnchor&&a(e.targetAnchor);break}}g=a(g)}e.targetAnchor||Zae(h,e,u,l),f(d&&a(d),e,h,r,n,i,s)}dx(e)}return e.anchor&&a(e.anchor)}const WSe=qSe;function dx(t){const e=t.ctx;if(e&&e.ut){let r=t.targetStart;for(;r&&r!==t.targetAnchor;)r.nodeType===1&&r.setAttribute("data-v-owner",e.uid),r=r.nextSibling;e.ut()}}function Zae(t,e,r,n){const i=e.targetStart=r(""),s=e.targetAnchor=r("");return i[Yae]=s,t&&(n(i,t),n(s,t)),s}const t1=Symbol("_leaveCb"),x_=Symbol("_enterCb");function Jae(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Ai(()=>{t.isMounted=!0}),bo(()=>{t.isUnmounting=!0}),t}const _l=[Function,Array],Qae={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:_l,onEnter:_l,onAfterEnter:_l,onEnterCancelled:_l,onBeforeLeave:_l,onLeave:_l,onAfterLeave:_l,onLeaveCancelled:_l,onBeforeAppear:_l,onAppear:_l,onAfterAppear:_l,onAppearCancelled:_l},eoe=t=>{const e=t.subTree;return e.component?eoe(e.component):e},KSe={name:"BaseTransition",props:Qae,setup(t,{slots:e}){const r=CL(),n=Jae();return()=>{const i=e.default&&vL(e.default(),!0);if(!i||!i.length)return;const s=toe(i),a=rr(t),{mode:o}=a;if(n.isLeaving)return Hk(s);const c=kW(s);if(!c)return Hk(s);let l=X3(c,a,n,r,h=>l=h);c.type!==oo&&Vg(c,l);const u=r.subTree,f=u&&kW(u);if(f&&f.type!==oo&&!Jp(c,f)&&eoe(r).type!==oo){const h=X3(f,a,n,r);if(Vg(f,h),o==="out-in"&&c.type!==oo)return n.isLeaving=!0,h.afterLeave=()=>{n.isLeaving=!1,r.job.flags&8||r.update(),delete h.afterLeave},Hk(s);o==="in-out"&&c.type!==oo&&(h.delayLeave=(d,g,p)=>{const m=roe(n,f);m[String(f.key)]=f,d[t1]=()=>{g(),d[t1]=void 0,delete l.delayedLeave},l.delayedLeave=p})}return s}}};function toe(t){let e=t[0];if(t.length>1){for(const r of t)if(r.type!==oo){e=r;break}}return e}const GSe=KSe;function roe(t,e){const{leavingVNodes:r}=t;let n=r.get(e.type);return n||(n=Object.create(null),r.set(e.type,n)),n}function X3(t,e,r,n,i){const{appear:s,mode:a,persisted:o=!1,onBeforeEnter:c,onEnter:l,onAfterEnter:u,onEnterCancelled:f,onBeforeLeave:h,onLeave:d,onAfterLeave:g,onLeaveCancelled:p,onBeforeAppear:m,onAppear:y,onAfterAppear:v,onAppearCancelled:_}=e,x=String(t.key),A=roe(r,t),C=(N,Y)=>{N&&ju(N,n,9,Y)},R=(N,Y)=>{const H=Y[1];C(N,Y),fr(N)?N.every(E=>E.length<=1)&&H():N.length<=1&&H()},M={mode:a,persisted:o,beforeEnter(N){let Y=c;if(!r.isMounted)if(s)Y=m||c;else return;N[t1]&&N[t1](!0);const H=A[x];H&&Jp(t,H)&&H.el[t1]&&H.el[t1](),C(Y,[N])},enter(N){let Y=l,H=u,E=f;if(!r.isMounted)if(s)Y=y||l,H=v||u,E=_||f;else return;let k=!1;const w=N[x_]=T=>{k||(k=!0,T?C(E,[N]):C(H,[N]),M.delayedLeave&&M.delayedLeave(),N[x_]=void 0)};Y?R(Y,[N,w]):w()},leave(N,Y){const H=String(t.key);if(N[x_]&&N[x_](!0),r.isUnmounting)return Y();C(h,[N]);let E=!1;const k=N[t1]=w=>{E||(E=!0,Y(),w?C(p,[N]):C(g,[N]),N[t1]=void 0,A[H]===t&&delete A[H])};A[H]=t,d?R(d,[N,k]):k()},clone(N){const Y=X3(N,e,r,n,i);return i&&i(Y),Y}};return M}function Hk(t){if(tS(t))return t=Wd(t),t.children=null,t}function kW(t){if(!tS(t))return Xae(t.type)&&t.children?toe(t.children):t;const{shapeFlag:e,children:r}=t;if(r){if(e&16)return r[0];if(e&32&&wr(r.default))return r.default()}}function Vg(t,e){t.shapeFlag&6&&t.component?(t.transition=e,Vg(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function vL(t,e=!1,r){let n=[],i=0;for(let s=0;s<t.length;s++){let a=t[s];const o=r==null?a.key:String(r)+String(a.key!=null?a.key:s);a.type===qr?(a.patchFlag&128&&i++,n=n.concat(vL(a.children,e,o))):(e||a.type!==oo)&&n.push(o!=null?Wd(a,{key:o}):a)}if(i>1)for(let s=0;s<n.length;s++)n[s].patchFlag=-2;return n}/*! #__NO_SIDE_EFFECTS__ */function Di(t,e){return wr(t)?Ms({name:t.name},e,{setup:t}):t}function noe(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function uD(t,e,r,n,i=!1){if(fr(t)){t.forEach((g,p)=>uD(g,e&&(fr(e)?e[p]:e),r,n,i));return}if(my(n)&&!i)return;const s=n.shapeFlag&4?sS(n.component):n.el,a=i?null:s,{i:o,r:c}=t,l=e&&e.r,u=o.refs===_i?o.refs={}:o.refs,f=o.setupState,h=rr(f),d=f===_i?()=>!1:g=>Vn(h,g);if(l!=null&&l!==c&&(Gi(l)?(u[l]=null,d(l)&&(f[l]=null)):ji(l)&&(l.value=null)),wr(c))Q4(c,o,12,[a,u]);else{const g=Gi(c),p=ji(c);if(g||p){const m=()=>{if(t.f){const y=g?d(c)?f[c]:u[c]:c.value;i?fr(y)&&iL(y,s):fr(y)?y.includes(s)||y.push(s):g?(u[c]=[s],d(c)&&(f[c]=u[c])):(c.value=[s],t.k&&(u[t.k]=c.value))}else g?(u[c]=a,d(c)&&(f[c]=a)):p&&(c.value=a,t.k&&(u[t.k]=a))};a?(m.id=-1,sc(m,r)):m()}}}const my=t=>!!t.type.__asyncLoader,tS=t=>t.type.__isKeepAlive;function YSe(t,e){soe(t,"a",e)}function ioe(t,e){soe(t,"da",e)}function soe(t,e,r=Da){const n=t.__wdc||(t.__wdc=()=>{let i=r;for(;i;){if(i.isDeactivated)return;i=i.parent}return t()});if(rS(e,n,r),r){let i=r.parent;for(;i&&i.parent;)tS(i.parent.vnode)&&XSe(n,e,r,i),i=i.parent}}function XSe(t,e,r,n){const i=rS(e,t,n,!0);Yo(()=>{iL(n[e],i)},r)}function rS(t,e,r=Da,n=!1){if(r){const i=r[t]||(r[t]=[]),s=e.__weh||(e.__weh=(...a)=>{X1();const o=t6(r),c=ju(e,r,t,a);return o(),Z1(),c});return n?i.unshift(s):i.push(s),s}}const r0=t=>(e,r=Da)=>{(!iS||t==="sp")&&rS(t,(...n)=>e(...n),r)},bL=r0("bm"),Ai=r0("m"),ZSe=r0("bu"),wL=r0("u"),bo=r0("bum"),Yo=r0("um"),JSe=r0("sp"),QSe=r0("rtg"),eAe=r0("rtc");function tAe(t,e=Da){rS("ec",t,e)}const _L="components",rAe="directives";function nAe(t,e){return xL(_L,t,!0,e)||t}const aoe=Symbol.for("v-ndc");function ooe(t){return Gi(t)?xL(_L,t,!1)||t:t||aoe}function J1(t){return xL(rAe,t)}function xL(t,e,r=!0,n=!1){const i=pa||Da;if(i){const s=i.type;if(t===_L){const o=VAe(s,!1);if(o&&(o===e||o===Tc(e)||o===t0(Tc(e))))return s}const a=CW(i[t]||s[t],e)||CW(i.appContext[t],e);return!a&&n?s:a}}function CW(t,e){return t&&(t[e]||t[Tc(e)]||t[t0(Tc(e))])}function a7(t,e,r,n){let i;const s=r,a=fr(t);if(a||Gi(t)){const o=a&&py(t);let c=!1;o&&(c=!zl(t),t=J9(t)),i=new Array(t.length);for(let l=0,u=t.length;l<u;l++)i[l]=e(c?io(t[l]):t[l],l,void 0,s)}else if(typeof t=="number"){i=new Array(t);for(let o=0;o<t;o++)i[o]=e(o+1,o,void 0,s)}else if(Pi(t))if(t[Symbol.iterator])i=Array.from(t,(o,c)=>e(o,c,void 0,s));else{const o=Object.keys(t);i=new Array(o.length);for(let c=0,l=o.length;c<l;c++){const u=o[c];i[c]=e(t[u],u,c,s)}}else i=[];return i}function coe(t,e,r={},n,i){if(pa.ce||pa.parent&&my(pa.parent)&&pa.parent.ce)return e!=="default"&&(r.name=e),pr(),Qr(qr,null,[ue("slot",r,n)],64);let s=t[e];s&&s._c&&(s._d=!1),pr();const a=s&&loe(s(r)),o=Qr(qr,{key:(r.key||a&&a.key||`_${e}`)+(!a&&n?"_fb":"")},a||[],a&&t._===1?64:-2);return o.scopeId&&(o.slotScopeIds=[o.scopeId+"-s"]),s&&s._c&&(s._d=!0),o}function loe(t){return t.some(e=>By(e)?!(e.type===oo||e.type===qr&&!loe(e.children)):!0)?t:null}const fD=t=>t?Coe(t)?sS(t):fD(t.parent):null,c3=Ms(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>fD(t.parent),$root:t=>fD(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>EL(t),$forceUpdate:t=>t.f||(t.f=()=>{yL(t.update)}),$nextTick:t=>t.n||(t.n=Bi.bind(t.proxy)),$watch:t=>SAe.bind(t)}),Wk=(t,e)=>t!==_i&&!t.__isScriptSetup&&Vn(t,e),iAe={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:r,setupState:n,data:i,props:s,accessCache:a,type:o,appContext:c}=t;let l;if(e[0]!=="$"){const d=a[e];if(d!==void 0)switch(d){case 1:return n[e];case 2:return i[e];case 4:return r[e];case 3:return s[e]}else{if(Wk(n,e))return a[e]=1,n[e];if(i!==_i&&Vn(i,e))return a[e]=2,i[e];if((l=t.propsOptions[0])&&Vn(l,e))return a[e]=3,s[e];if(r!==_i&&Vn(r,e))return a[e]=4,r[e];hD&&(a[e]=0)}}const u=c3[e];let f,h;if(u)return e==="$attrs"&&po(t.attrs,"get",""),u(t);if((f=o.__cssModules)&&(f=f[e]))return f;if(r!==_i&&Vn(r,e))return a[e]=4,r[e];if(h=c.config.globalProperties,Vn(h,e))return h[e]},set({_:t},e,r){const{data:n,setupState:i,ctx:s}=t;return Wk(i,e)?(i[e]=r,!0):n!==_i&&Vn(n,e)?(n[e]=r,!0):Vn(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(s[e]=r,!0)},has({_:{data:t,setupState:e,accessCache:r,ctx:n,appContext:i,propsOptions:s}},a){let o;return!!r[a]||t!==_i&&Vn(t,a)||Wk(e,a)||(o=s[0])&&Vn(o,a)||Vn(n,a)||Vn(c3,a)||Vn(i.config.globalProperties,a)},defineProperty(t,e,r){return r.get!=null?t._.accessCache[e]=0:Vn(r,"value")&&this.set(t,e,r.value,null),Reflect.defineProperty(t,e,r)}};function IW(t){return fr(t)?t.reduce((e,r)=>(e[r]=null,e),{}):t}let hD=!0;function sAe(t){const e=EL(t),r=t.proxy,n=t.ctx;hD=!1,e.beforeCreate&&RW(e.beforeCreate,t,"bc");const{data:i,computed:s,methods:a,watch:o,provide:c,inject:l,created:u,beforeMount:f,mounted:h,beforeUpdate:d,updated:g,activated:p,deactivated:m,beforeDestroy:y,beforeUnmount:v,destroyed:_,unmounted:x,render:A,renderTracked:C,renderTriggered:R,errorCaptured:M,serverPrefetch:N,expose:Y,inheritAttrs:H,components:E,directives:k,filters:w}=e;if(l&&aAe(l,n,null),a)for(const I in a){const U=a[I];wr(U)&&(n[I]=U.bind(r))}if(i){const I=i.call(r,r);Pi(I)&&(t.data=Ps(I))}if(hD=!0,s)for(const I in s){const U=s[I],O=wr(U)?U.bind(r,r):wr(U.get)?U.get.bind(r,r):Qf,D=!wr(U)&&wr(U.set)?U.set.bind(r):Qf,P=Te({get:O,set:D});Object.defineProperty(n,I,{enumerable:!0,configurable:!0,get:()=>P.value,set:B=>P.value=B})}if(o)for(const I in o)uoe(o[I],n,r,I);if(c){const I=wr(c)?c.call(r):c;Reflect.ownKeys(I).forEach(U=>{ui(U,I[U])})}u&&RW(u,t,"c");function L(I,U){fr(U)?U.forEach(O=>I(O.bind(r))):U&&I(U.bind(r))}if(L(bL,f),L(Ai,h),L(ZSe,d),L(wL,g),L(YSe,p),L(ioe,m),L(tAe,M),L(eAe,C),L(QSe,R),L(bo,v),L(Yo,x),L(JSe,N),fr(Y))if(Y.length){const I=t.exposed||(t.exposed={});Y.forEach(U=>{Object.defineProperty(I,U,{get:()=>r[U],set:O=>r[U]=O})})}else t.exposed||(t.exposed={});A&&t.render===Qf&&(t.render=A),H!=null&&(t.inheritAttrs=H),E&&(t.components=E),k&&(t.directives=k),N&&noe(t)}function aAe(t,e,r=Qf){fr(t)&&(t=dD(t));for(const n in t){const i=t[n];let s;Pi(i)?"default"in i?s=Rr(i.from||n,i.default,!0):s=Rr(i.from||n):s=Rr(i),ji(s)?Object.defineProperty(e,n,{enumerable:!0,configurable:!0,get:()=>s.value,set:a=>s.value=a}):e[n]=s}}function RW(t,e,r){ju(fr(t)?t.map(n=>n.bind(e.proxy)):t.bind(e.proxy),e,r)}function uoe(t,e,r,n){let i=n.includes(".")?xoe(r,n):()=>r[n];if(Gi(t)){const s=e[t];wr(s)&&cr(i,s)}else if(wr(t))cr(i,t.bind(r));else if(Pi(t))if(fr(t))t.forEach(s=>uoe(s,e,r,n));else{const s=wr(t.handler)?t.handler.bind(r):e[t.handler];wr(s)&&cr(i,s,t)}}function EL(t){const e=t.type,{mixins:r,extends:n}=e,{mixins:i,optionsCache:s,config:{optionMergeStrategies:a}}=t.appContext,o=s.get(e);let c;return o?c=o:!i.length&&!r&&!n?c=e:(c={},i.length&&i.forEach(l=>o7(c,l,a,!0)),o7(c,e,a)),Pi(e)&&s.set(e,c),c}function o7(t,e,r,n=!1){const{mixins:i,extends:s}=e;s&&o7(t,s,r,!0),i&&i.forEach(a=>o7(t,a,r,!0));for(const a in e)if(!(n&&a==="expose")){const o=oAe[a]||r&&r[a];t[a]=o?o(t[a],e[a]):e[a]}return t}const oAe={data:PW,props:BW,emits:BW,methods:Fw,computed:Fw,beforeCreate:Ro,created:Ro,beforeMount:Ro,mounted:Ro,beforeUpdate:Ro,updated:Ro,beforeDestroy:Ro,beforeUnmount:Ro,destroyed:Ro,unmounted:Ro,activated:Ro,deactivated:Ro,errorCaptured:Ro,serverPrefetch:Ro,components:Fw,directives:Fw,watch:lAe,provide:PW,inject:cAe};function PW(t,e){return e?t?function(){return Ms(wr(t)?t.call(this,this):t,wr(e)?e.call(this,this):e)}:e:t}function cAe(t,e){return Fw(dD(t),dD(e))}function dD(t){if(fr(t)){const e={};for(let r=0;r<t.length;r++)e[t[r]]=t[r];return e}return t}function Ro(t,e){return t?[...new Set([].concat(t,e))]:e}function Fw(t,e){return t?Ms(Object.create(null),t,e):e}function BW(t,e){return t?fr(t)&&fr(e)?[...new Set([...t,...e])]:Ms(Object.create(null),IW(t),IW(e??{})):e}function lAe(t,e){if(!t)return e;if(!e)return t;const r=Ms(Object.create(null),t);for(const n in e)r[n]=Ro(t[n],e[n]);return r}function foe(){return{app:null,config:{isNativeTag:Y9e,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let uAe=0;function fAe(t,e){return function(n,i=null){wr(n)||(n=Ms({},n)),i!=null&&!Pi(i)&&(i=null);const s=foe(),a=new WeakSet,o=[];let c=!1;const l=s.app={_uid:uAe++,_component:n,_props:i,_container:null,_context:s,_instance:null,version:zAe,get config(){return s.config},set config(u){},use(u,...f){return a.has(u)||(u&&wr(u.install)?(a.add(u),u.install(l,...f)):wr(u)&&(a.add(u),u(l,...f))),l},mixin(u){return s.mixins.includes(u)||s.mixins.push(u),l},component(u,f){return f?(s.components[u]=f,l):s.components[u]},directive(u,f){return f?(s.directives[u]=f,l):s.directives[u]},mount(u,f,h){if(!c){const d=l._ceVNode||ue(n,i);return d.appContext=s,h===!0?h="svg":h===!1&&(h=void 0),f&&e?e(d,u):t(d,u,h),c=!0,l._container=u,u.__vue_app__=l,sS(d.component)}},onUnmount(u){o.push(u)},unmount(){c&&(ju(o,l._instance,16),t(null,l._container),delete l._container.__vue_app__)},provide(u,f){return s.provides[u]=f,l},runWithContext(u){const f=yy;yy=l;try{return u()}finally{yy=f}}};return l}}let yy=null;function ui(t,e){if(Da){let r=Da.provides;const n=Da.parent&&Da.parent.provides;n===r&&(r=Da.provides=Object.create(n)),r[t]=e}}function Rr(t,e,r=!1){const n=Da||pa;if(n||yy){const i=yy?yy._context.provides:n?n.parent==null?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:void 0;if(i&&t in i)return i[t];if(arguments.length>1)return r&&wr(e)?e.call(n&&n.proxy):e}}const hoe={},doe=()=>Object.create(hoe),poe=t=>Object.getPrototypeOf(t)===hoe;function hAe(t,e,r,n=!1){const i={},s=doe();t.propsDefaults=Object.create(null),goe(t,e,i,s);for(const a in t.propsOptions[0])a in i||(i[a]=void 0);r?t.props=n?i:Uae(i):t.type.props?t.props=i:t.props=s,t.attrs=s}function dAe(t,e,r,n){const{props:i,attrs:s,vnode:{patchFlag:a}}=t,o=rr(i),[c]=t.propsOptions;let l=!1;if((n||a>0)&&!(a&16)){if(a&8){const u=t.vnode.dynamicProps;for(let f=0;f<u.length;f++){let h=u[f];if(nS(t.emitsOptions,h))continue;const d=e[h];if(c)if(Vn(s,h))d!==s[h]&&(s[h]=d,l=!0);else{const g=Tc(h);i[g]=pD(c,o,g,d,t,!1)}else d!==s[h]&&(s[h]=d,l=!0)}}}else{goe(t,e,i,s)&&(l=!0);let u;for(const f in o)(!e||!Vn(e,f)&&((u=Am(f))===f||!Vn(e,u)))&&(c?r&&(r[f]!==void 0||r[u]!==void 0)&&(i[f]=pD(c,o,f,void 0,t,!0)):delete i[f]);if(s!==o)for(const f in s)(!e||!Vn(e,f))&&(delete s[f],l=!0)}l&&Bd(t.attrs,"set","")}function goe(t,e,r,n){const[i,s]=t.propsOptions;let a=!1,o;if(e)for(let c in e){if(i3(c))continue;const l=e[c];let u;i&&Vn(i,u=Tc(c))?!s||!s.includes(u)?r[u]=l:(o||(o={}))[u]=l:nS(t.emitsOptions,c)||(!(c in n)||l!==n[c])&&(n[c]=l,a=!0)}if(s){const c=rr(r),l=o||_i;for(let u=0;u<s.length;u++){const f=s[u];r[f]=pD(i,c,f,l[f],t,!Vn(l,f))}}return a}function pD(t,e,r,n,i,s){const a=t[r];if(a!=null){const o=Vn(a,"default");if(o&&n===void 0){const c=a.default;if(a.type!==Function&&!a.skipFactory&&wr(c)){const{propsDefaults:l}=i;if(r in l)n=l[r];else{const u=t6(i);n=l[r]=c.call(null,e),u()}}else n=c;i.ce&&i.ce._setProp(r,n)}a[0]&&(s&&!o?n=!1:a[1]&&(n===""||n===Am(r))&&(n=!0))}return n}const pAe=new WeakMap;function moe(t,e,r=!1){const n=r?pAe:e.propsCache,i=n.get(t);if(i)return i;const s=t.props,a={},o=[];let c=!1;if(!wr(t)){const u=f=>{c=!0;const[h,d]=moe(f,e,!0);Ms(a,h),d&&o.push(...d)};!r&&e.mixins.length&&e.mixins.forEach(u),t.extends&&u(t.extends),t.mixins&&t.mixins.forEach(u)}if(!s&&!c)return Pi(t)&&n.set(t,hy),hy;if(fr(s))for(let u=0;u<s.length;u++){const f=Tc(s[u]);DW(f)&&(a[f]=_i)}else if(s)for(const u in s){const f=Tc(u);if(DW(f)){const h=s[u],d=a[f]=fr(h)||wr(h)?{type:h}:Ms({},h),g=d.type;let p=!1,m=!0;if(fr(g))for(let y=0;y<g.length;++y){const v=g[y],_=wr(v)&&v.name;if(_==="Boolean"){p=!0;break}else _==="String"&&(m=!1)}else p=wr(g)&&g.name==="Boolean";d[0]=p,d[1]=m,(p||Vn(d,"default"))&&o.push(f)}}const l=[a,o];return Pi(t)&&n.set(t,l),l}function DW(t){return t[0]!=="$"&&!i3(t)}const yoe=t=>t[0]==="_"||t==="$stable",SL=t=>fr(t)?t.map(Bf):[Bf(t)],gAe=(t,e,r)=>{if(e._n)return e;const n=mt((...i)=>SL(e(...i)),r);return n._c=!1,n},voe=(t,e,r)=>{const n=t._ctx;for(const i in t){if(yoe(i))continue;const s=t[i];if(wr(s))e[i]=gAe(i,s,n);else if(s!=null){const a=SL(s);e[i]=()=>a}}},boe=(t,e)=>{const r=SL(e);t.slots.default=()=>r},woe=(t,e,r)=>{for(const n in e)(r||n!=="_")&&(t[n]=e[n])},mAe=(t,e,r)=>{const n=t.slots=doe();if(t.vnode.shapeFlag&32){const i=e._;i?(woe(n,e,r),r&&wae(n,"_",i,!0)):voe(e,n)}else e&&boe(t,e)},yAe=(t,e,r)=>{const{vnode:n,slots:i}=t;let s=!0,a=_i;if(n.shapeFlag&32){const o=e._;o?r&&o===1?s=!1:woe(i,e,r):(s=!e.$stable,voe(e,i)),a=e}else e&&(boe(t,e),a={default:1});if(s)for(const o in i)!yoe(o)&&a[o]==null&&delete i[o]},sc=PAe;function vAe(t){return bAe(t)}function bAe(t,e){const r=_ae();r.__VUE__=!0;const{insert:n,remove:i,patchProp:s,createElement:a,createText:o,createComment:c,setText:l,setElementText:u,parentNode:f,nextSibling:h,setScopeId:d=Qf,insertStaticContent:g}=t,p=(re,V,oe,he=null,ne=null,ie=null,ce=void 0,ve=null,Ee=!!V.dynamicChildren)=>{if(re===V)return;re&&!Jp(re,V)&&(he=q(re),B(re,ne,ie,!0),re=null),V.patchFlag===-2&&(Ee=!1,V.dynamicChildren=null);const{type:ge,ref:Pe,shapeFlag:Ce}=V;switch(ge){case e6:m(re,V,oe,he);break;case oo:y(re,V,oe,he);break;case Yk:re==null&&v(V,oe,he,ce);break;case qr:E(re,V,oe,he,ne,ie,ce,ve,Ee);break;default:Ce&1?A(re,V,oe,he,ne,ie,ce,ve,Ee):Ce&6?k(re,V,oe,he,ne,ie,ce,ve,Ee):(Ce&64||Ce&128)&&ge.process(re,V,oe,he,ne,ie,ce,ve,Ee,ae)}Pe!=null&&ne&&uD(Pe,re&&re.ref,ie,V||re,!V)},m=(re,V,oe,he)=>{if(re==null)n(V.el=o(V.children),oe,he);else{const ne=V.el=re.el;V.children!==re.children&&l(ne,V.children)}},y=(re,V,oe,he)=>{re==null?n(V.el=c(V.children||""),oe,he):V.el=re.el},v=(re,V,oe,he)=>{[re.el,re.anchor]=g(re.children,V,oe,he,re.el,re.anchor)},_=({el:re,anchor:V},oe,he)=>{let ne;for(;re&&re!==V;)ne=h(re),n(re,oe,he),re=ne;n(V,oe,he)},x=({el:re,anchor:V})=>{let oe;for(;re&&re!==V;)oe=h(re),i(re),re=oe;i(V)},A=(re,V,oe,he,ne,ie,ce,ve,Ee)=>{V.type==="svg"?ce="svg":V.type==="math"&&(ce="mathml"),re==null?C(V,oe,he,ne,ie,ce,ve,Ee):N(re,V,ne,ie,ce,ve,Ee)},C=(re,V,oe,he,ne,ie,ce,ve)=>{let Ee,ge;const{props:Pe,shapeFlag:Ce,transition:Ie,dirs:$e}=re;if(Ee=re.el=a(re.type,ie,Pe&&Pe.is,Pe),Ce&8?u(Ee,re.children):Ce&16&&M(re.children,Ee,null,he,ne,Kk(re,ie),ce,ve),$e&&Tp(re,null,he,"created"),R(Ee,re,re.scopeId,ce,he),Pe){for(const Z in Pe)Z!=="value"&&!i3(Z)&&s(Ee,Z,null,Pe[Z],ie,he);"value"in Pe&&s(Ee,"value",null,Pe.value,ie),(ge=Pe.onVnodeBeforeMount)&&hf(ge,he,re)}$e&&Tp(re,null,he,"beforeMount");const se=wAe(ne,Ie);se&&Ie.beforeEnter(Ee),n(Ee,V,oe),((ge=Pe&&Pe.onVnodeMounted)||se||$e)&&sc(()=>{ge&&hf(ge,he,re),se&&Ie.enter(Ee),$e&&Tp(re,null,he,"mounted")},ne)},R=(re,V,oe,he,ne)=>{if(oe&&d(re,oe),he)for(let ie=0;ie<he.length;ie++)d(re,he[ie]);if(ne){let ie=ne.subTree;if(V===ie||Soe(ie.type)&&(ie.ssContent===V||ie.ssFallback===V)){const ce=ne.vnode;R(re,ce,ce.scopeId,ce.slotScopeIds,ne.parent)}}},M=(re,V,oe,he,ne,ie,ce,ve,Ee=0)=>{for(let ge=Ee;ge<re.length;ge++){const Pe=re[ge]=ve?r1(re[ge]):Bf(re[ge]);p(null,Pe,V,oe,he,ne,ie,ce,ve)}},N=(re,V,oe,he,ne,ie,ce)=>{const ve=V.el=re.el;let{patchFlag:Ee,dynamicChildren:ge,dirs:Pe}=V;Ee|=re.patchFlag&16;const Ce=re.props||_i,Ie=V.props||_i;let $e;if(oe&&kp(oe,!1),($e=Ie.onVnodeBeforeUpdate)&&hf($e,oe,V,re),Pe&&Tp(V,re,oe,"beforeUpdate"),oe&&kp(oe,!0),(Ce.innerHTML&&Ie.innerHTML==null||Ce.textContent&&Ie.textContent==null)&&u(ve,""),ge?Y(re.dynamicChildren,ge,ve,oe,he,Kk(V,ne),ie):ce||U(re,V,ve,null,oe,he,Kk(V,ne),ie,!1),Ee>0){if(Ee&16)H(ve,Ce,Ie,oe,ne);else if(Ee&2&&Ce.class!==Ie.class&&s(ve,"class",null,Ie.class,ne),Ee&4&&s(ve,"style",Ce.style,Ie.style,ne),Ee&8){const se=V.dynamicProps;for(let Z=0;Z<se.length;Z++){const J=se[Z],de=Ce[J],Ae=Ie[J];(Ae!==de||J==="value")&&s(ve,J,de,Ae,ne,oe)}}Ee&1&&re.children!==V.children&&u(ve,V.children)}else!ce&&ge==null&&H(ve,Ce,Ie,oe,ne);(($e=Ie.onVnodeUpdated)||Pe)&&sc(()=>{$e&&hf($e,oe,V,re),Pe&&Tp(V,re,oe,"updated")},he)},Y=(re,V,oe,he,ne,ie,ce)=>{for(let ve=0;ve<V.length;ve++){const Ee=re[ve],ge=V[ve],Pe=Ee.el&&(Ee.type===qr||!Jp(Ee,ge)||Ee.shapeFlag&70)?f(Ee.el):oe;p(Ee,ge,Pe,null,he,ne,ie,ce,!0)}},H=(re,V,oe,he,ne)=>{if(V!==oe){if(V!==_i)for(const ie in V)!i3(ie)&&!(ie in oe)&&s(re,ie,V[ie],null,ne,he);for(const ie in oe){if(i3(ie))continue;const ce=oe[ie],ve=V[ie];ce!==ve&&ie!=="value"&&s(re,ie,ve,ce,ne,he)}"value"in oe&&s(re,"value",V.value,oe.value,ne)}},E=(re,V,oe,he,ne,ie,ce,ve,Ee)=>{const ge=V.el=re?re.el:o(""),Pe=V.anchor=re?re.anchor:o("");let{patchFlag:Ce,dynamicChildren:Ie,slotScopeIds:$e}=V;$e&&(ve=ve?ve.concat($e):$e),re==null?(n(ge,oe,he),n(Pe,oe,he),M(V.children||[],oe,Pe,ne,ie,ce,ve,Ee)):Ce>0&&Ce&64&&Ie&&re.dynamicChildren?(Y(re.dynamicChildren,Ie,oe,ne,ie,ce,ve),(V.key!=null||ne&&V===ne.subTree)&&AL(re,V,!0)):U(re,V,oe,Pe,ne,ie,ce,ve,Ee)},k=(re,V,oe,he,ne,ie,ce,ve,Ee)=>{V.slotScopeIds=ve,re==null?V.shapeFlag&512?ne.ctx.activate(V,oe,he,ce,Ee):w(V,oe,he,ne,ie,ce,Ee):T(re,V,Ee)},w=(re,V,oe,he,ne,ie,ce)=>{const ve=re.component=MAe(re,he,ne);if(tS(re)&&(ve.ctx.renderer=ae),LAe(ve,!1,ce),ve.asyncDep){if(ne&&ne.registerDep(ve,L,ce),!re.el){const Ee=ve.subTree=ue(oo);y(null,Ee,V,oe)}}else L(ve,re,V,oe,ne,ie,ce)},T=(re,V,oe)=>{const he=V.component=re.component;if(IAe(re,V,oe))if(he.asyncDep&&!he.asyncResolved){I(he,V,oe);return}else he.next=V,he.update();else V.el=re.el,he.vnode=V},L=(re,V,oe,he,ne,ie,ce)=>{const ve=()=>{if(re.isMounted){let{next:Ce,bu:Ie,u:$e,parent:se,vnode:Z}=re;{const Re=_oe(re);if(Re){Ce&&(Ce.el=Z.el,I(re,Ce,ce)),Re.asyncDep.then(()=>{re.isUnmounted||ve()});return}}let J=Ce,de;kp(re,!1),Ce?(Ce.el=Z.el,I(re,Ce,ce)):Ce=Z,Ie&&Uk(Ie),(de=Ce.props&&Ce.props.onVnodeBeforeUpdate)&&hf(de,se,Ce,Z),kp(re,!0);const Ae=Gk(re),De=re.subTree;re.subTree=Ae,p(De,Ae,f(De.el),q(De),re,ne,ie),Ce.el=Ae.el,J===null&&RAe(re,Ae.el),$e&&sc($e,ne),(de=Ce.props&&Ce.props.onVnodeUpdated)&&sc(()=>hf(de,se,Ce,Z),ne)}else{let Ce;const{el:Ie,props:$e}=V,{bm:se,m:Z,parent:J,root:de,type:Ae}=re,De=my(V);if(kp(re,!1),se&&Uk(se),!De&&(Ce=$e&&$e.onVnodeBeforeMount)&&hf(Ce,J,V),kp(re,!0),Ie&&K){const Re=()=>{re.subTree=Gk(re),K(Ie,re.subTree,re,ne,null)};De&&Ae.__asyncHydrate?Ae.__asyncHydrate(Ie,re,Re):Re()}else{de.ce&&de.ce._injectChildStyle(Ae);const Re=re.subTree=Gk(re);p(null,Re,oe,he,re,ne,ie),V.el=Re.el}if(Z&&sc(Z,ne),!De&&(Ce=$e&&$e.onVnodeMounted)){const Re=V;sc(()=>hf(Ce,J,Re),ne)}(V.shapeFlag&256||J&&my(J.vnode)&&J.vnode.shapeFlag&256)&&re.a&&sc(re.a,ne),re.isMounted=!0,V=oe=he=null}};re.scope.on();const Ee=re.effect=new Tae(ve);re.scope.off();const ge=re.update=Ee.run.bind(Ee),Pe=re.job=Ee.runIfDirty.bind(Ee);Pe.i=re,Pe.id=re.uid,Ee.scheduler=()=>yL(Pe),kp(re,!0),ge()},I=(re,V,oe)=>{V.component=re;const he=re.vnode.props;re.vnode=V,re.next=null,dAe(re,V.props,he,oe),yAe(re,V.children,oe),X1(),SW(re),Z1()},U=(re,V,oe,he,ne,ie,ce,ve,Ee=!1)=>{const ge=re&&re.children,Pe=re?re.shapeFlag:0,Ce=V.children,{patchFlag:Ie,shapeFlag:$e}=V;if(Ie>0){if(Ie&128){D(ge,Ce,oe,he,ne,ie,ce,ve,Ee);return}else if(Ie&256){O(ge,Ce,oe,he,ne,ie,ce,ve,Ee);return}}$e&8?(Pe&16&&W(ge,ne,ie),Ce!==ge&&u(oe,Ce)):Pe&16?$e&16?D(ge,Ce,oe,he,ne,ie,ce,ve,Ee):W(ge,ne,ie,!0):(Pe&8&&u(oe,""),$e&16&&M(Ce,oe,he,ne,ie,ce,ve,Ee))},O=(re,V,oe,he,ne,ie,ce,ve,Ee)=>{re=re||hy,V=V||hy;const ge=re.length,Pe=V.length,Ce=Math.min(ge,Pe);let Ie;for(Ie=0;Ie<Ce;Ie++){const $e=V[Ie]=Ee?r1(V[Ie]):Bf(V[Ie]);p(re[Ie],$e,oe,null,ne,ie,ce,ve,Ee)}ge>Pe?W(re,ne,ie,!0,!1,Ce):M(V,oe,he,ne,ie,ce,ve,Ee,Ce)},D=(re,V,oe,he,ne,ie,ce,ve,Ee)=>{let ge=0;const Pe=V.length;let Ce=re.length-1,Ie=Pe-1;for(;ge<=Ce&&ge<=Ie;){const $e=re[ge],se=V[ge]=Ee?r1(V[ge]):Bf(V[ge]);if(Jp($e,se))p($e,se,oe,null,ne,ie,ce,ve,Ee);else break;ge++}for(;ge<=Ce&&ge<=Ie;){const $e=re[Ce],se=V[Ie]=Ee?r1(V[Ie]):Bf(V[Ie]);if(Jp($e,se))p($e,se,oe,null,ne,ie,ce,ve,Ee);else break;Ce--,Ie--}if(ge>Ce){if(ge<=Ie){const $e=Ie+1,se=$e<Pe?V[$e].el:he;for(;ge<=Ie;)p(null,V[ge]=Ee?r1(V[ge]):Bf(V[ge]),oe,se,ne,ie,ce,ve,Ee),ge++}}else if(ge>Ie)for(;ge<=Ce;)B(re[ge],ne,ie,!0),ge++;else{const $e=ge,se=ge,Z=new Map;for(ge=se;ge<=Ie;ge++){const ut=V[ge]=Ee?r1(V[ge]):Bf(V[ge]);ut.key!=null&&Z.set(ut.key,ge)}let J,de=0;const Ae=Ie-se+1;let De=!1,Re=0;const bt=new Array(Ae);for(ge=0;ge<Ae;ge++)bt[ge]=0;for(ge=$e;ge<=Ce;ge++){const ut=re[ge];if(de>=Ae){B(ut,ne,ie,!0);continue}let Mt;if(ut.key!=null)Mt=Z.get(ut.key);else for(J=se;J<=Ie;J++)if(bt[J-se]===0&&Jp(ut,V[J])){Mt=J;break}Mt===void 0?B(ut,ne,ie,!0):(bt[Mt-se]=ge+1,Mt>=Re?Re=Mt:De=!0,p(ut,V[Mt],oe,null,ne,ie,ce,ve,Ee),de++)}const $t=De?_Ae(bt):hy;for(J=$t.length-1,ge=Ae-1;ge>=0;ge--){const ut=se+ge,Mt=V[ut],Ft=ut+1<Pe?V[ut+1].el:he;bt[ge]===0?p(null,Mt,oe,Ft,ne,ie,ce,ve,Ee):De&&(J<0||ge!==$t[J]?P(Mt,oe,Ft,2):J--)}}},P=(re,V,oe,he,ne=null)=>{const{el:ie,type:ce,transition:ve,children:Ee,shapeFlag:ge}=re;if(ge&6){P(re.component.subTree,V,oe,he);return}if(ge&128){re.suspense.move(V,oe,he);return}if(ge&64){ce.move(re,V,oe,ae);return}if(ce===qr){n(ie,V,oe);for(let Ce=0;Ce<Ee.length;Ce++)P(Ee[Ce],V,oe,he);n(re.anchor,V,oe);return}if(ce===Yk){_(re,V,oe);return}if(he!==2&&ge&1&&ve)if(he===0)ve.beforeEnter(ie),n(ie,V,oe),sc(()=>ve.enter(ie),ne);else{const{leave:Ce,delayLeave:Ie,afterLeave:$e}=ve,se=()=>n(ie,V,oe),Z=()=>{Ce(ie,()=>{se(),$e&&$e()})};Ie?Ie(ie,se,Z):Z()}else n(ie,V,oe)},B=(re,V,oe,he=!1,ne=!1)=>{const{type:ie,props:ce,ref:ve,children:Ee,dynamicChildren:ge,shapeFlag:Pe,patchFlag:Ce,dirs:Ie,cacheIndex:$e}=re;if(Ce===-2&&(ne=!1),ve!=null&&uD(ve,null,oe,re,!0),$e!=null&&(V.renderCache[$e]=void 0),Pe&256){V.ctx.deactivate(re);return}const se=Pe&1&&Ie,Z=!my(re);let J;if(Z&&(J=ce&&ce.onVnodeBeforeUnmount)&&hf(J,V,re),Pe&6)X(re.component,oe,he);else{if(Pe&128){re.suspense.unmount(oe,he);return}se&&Tp(re,null,V,"beforeUnmount"),Pe&64?re.type.remove(re,V,oe,ae,he):ge&&!ge.hasOnce&&(ie!==qr||Ce>0&&Ce&64)?W(ge,V,oe,!1,!0):(ie===qr&&Ce&384||!ne&&Pe&16)&&W(Ee,V,oe),he&&z(re)}(Z&&(J=ce&&ce.onVnodeUnmounted)||se)&&sc(()=>{J&&hf(J,V,re),se&&Tp(re,null,V,"unmounted")},oe)},z=re=>{const{type:V,el:oe,anchor:he,transition:ne}=re;if(V===qr){F(oe,he);return}if(V===Yk){x(re);return}const ie=()=>{i(oe),ne&&!ne.persisted&&ne.afterLeave&&ne.afterLeave()};if(re.shapeFlag&1&&ne&&!ne.persisted){const{leave:ce,delayLeave:ve}=ne,Ee=()=>ce(oe,ie);ve?ve(re.el,ie,Ee):Ee()}else ie()},F=(re,V)=>{let oe;for(;re!==V;)oe=h(re),i(re),re=oe;i(V)},X=(re,V,oe)=>{const{bum:he,scope:ne,job:ie,subTree:ce,um:ve,m:Ee,a:ge}=re;OW(Ee),OW(ge),he&&Uk(he),ne.stop(),ie&&(ie.flags|=8,B(ce,re,V,oe)),ve&&sc(ve,V),sc(()=>{re.isUnmounted=!0},V),V&&V.pendingBranch&&!V.isUnmounted&&re.asyncDep&&!re.asyncResolved&&re.suspenseId===V.pendingId&&(V.deps--,V.deps===0&&V.resolve())},W=(re,V,oe,he=!1,ne=!1,ie=0)=>{for(let ce=ie;ce<re.length;ce++)B(re[ce],V,oe,he,ne)},q=re=>{if(re.shapeFlag&6)return q(re.component.subTree);if(re.shapeFlag&128)return re.suspense.next();const V=h(re.anchor||re.el),oe=V&&V[Yae];return oe?h(oe):V};let G=!1;const ee=(re,V,oe)=>{re==null?V._vnode&&B(V._vnode,null,null,!0):p(V._vnode||null,re,V,null,null,null,oe),V._vnode=re,G||(G=!0,SW(),Wae(),G=!1)},ae={p,um:B,m:P,r:z,mt:w,mc:M,pc:U,pbc:Y,n:q,o:t};let te,K;return{render:ee,hydrate:te,createApp:fAe(ee,te)}}function Kk({type:t,props:e},r){return r==="svg"&&t==="foreignObject"||r==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:r}function kp({effect:t,job:e},r){r?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function wAe(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function AL(t,e,r=!1){const n=t.children,i=e.children;if(fr(n)&&fr(i))for(let s=0;s<n.length;s++){const a=n[s];let o=i[s];o.shapeFlag&1&&!o.dynamicChildren&&((o.patchFlag<=0||o.patchFlag===32)&&(o=i[s]=r1(i[s]),o.el=a.el),!r&&o.patchFlag!==-2&&AL(a,o)),o.type===e6&&(o.el=a.el)}}function _Ae(t){const e=t.slice(),r=[0];let n,i,s,a,o;const c=t.length;for(n=0;n<c;n++){const l=t[n];if(l!==0){if(i=r[r.length-1],t[i]<l){e[n]=i,r.push(n);continue}for(s=0,a=r.length-1;s<a;)o=s+a>>1,t[r[o]]<l?s=o+1:a=o;l<t[r[s]]&&(s>0&&(e[n]=r[s-1]),r[s]=n)}}for(s=r.length,a=r[s-1];s-- >0;)r[s]=a,a=e[a];return r}function _oe(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:_oe(e)}function OW(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const xAe=Symbol.for("v-scx"),EAe=()=>Rr(xAe);function Qs(t,e){return TL(t,null,e)}function cr(t,e,r){return TL(t,e,r)}function TL(t,e,r=_i){const{immediate:n,deep:i,flush:s,once:a}=r,o=Ms({},r);let c;if(iS)if(s==="sync"){const h=EAe();c=h.__watcherHandles||(h.__watcherHandles=[])}else if(!e||n)o.once=!0;else{const h=()=>{};return h.stop=Qf,h.resume=Qf,h.pause=Qf,h}const l=Da;o.call=(h,d,g)=>ju(h,l,d,g);let u=!1;s==="post"?o.scheduler=h=>{sc(h,l&&l.suspense)}:s!=="sync"&&(u=!0,o.scheduler=(h,d)=>{d?h():yL(h)}),o.augmentJob=h=>{e&&(h.flags|=4),u&&(h.flags|=2,l&&(h.id=l.uid,h.i=l))};const f=$Se(t,e,o);return c&&c.push(f),f}function SAe(t,e,r){const n=this.proxy,i=Gi(t)?t.includes(".")?xoe(n,t):()=>n[t]:t.bind(n,n);let s;wr(e)?s=e:(s=e.handler,r=e);const a=t6(this),o=TL(i,s.bind(n),r);return a(),o}function xoe(t,e){const r=e.split(".");return()=>{let n=t;for(let i=0;i<r.length&&n;i++)n=n[r[i]];return n}}const AAe=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${Tc(e)}Modifiers`]||t[`${Am(e)}Modifiers`];function TAe(t,e,...r){if(t.isUnmounted)return;const n=t.vnode.props||_i;let i=r;const s=e.startsWith("update:"),a=s&&AAe(n,e.slice(7));a&&(a.trim&&(i=r.map(u=>Gi(u)?u.trim():u)),a.number&&(i=r.map(eSe)));let o,c=n[o=$k(e)]||n[o=$k(Tc(e))];!c&&s&&(c=n[o=$k(Am(e))]),c&&ju(c,t,6,i);const l=n[o+"Once"];if(l){if(!t.emitted)t.emitted={};else if(t.emitted[o])return;t.emitted[o]=!0,ju(l,t,6,i)}}function Eoe(t,e,r=!1){const n=e.emitsCache,i=n.get(t);if(i!==void 0)return i;const s=t.emits;let a={},o=!1;if(!wr(t)){const c=l=>{const u=Eoe(l,e,!0);u&&(o=!0,Ms(a,u))};!r&&e.mixins.length&&e.mixins.forEach(c),t.extends&&c(t.extends),t.mixins&&t.mixins.forEach(c)}return!s&&!o?(Pi(t)&&n.set(t,null),null):(fr(s)?s.forEach(c=>a[c]=null):Ms(a,s),Pi(t)&&n.set(t,a),a)}function nS(t,e){return!t||!Y9(e)?!1:(e=e.slice(2).replace(/Once$/,""),Vn(t,e[0].toLowerCase()+e.slice(1))||Vn(t,Am(e))||Vn(t,e))}function Gk(t){const{type:e,vnode:r,proxy:n,withProxy:i,propsOptions:[s],slots:a,attrs:o,emit:c,render:l,renderCache:u,props:f,data:h,setupState:d,ctx:g,inheritAttrs:p}=t,m=s7(t);let y,v;try{if(r.shapeFlag&4){const x=i||n,A=x;y=Bf(l.call(A,x,u,f,d,h,g)),v=o}else{const x=e;y=Bf(x.length>1?x(f,{attrs:o,slots:a,emit:c}):x(f,null)),v=e.props?o:kAe(o)}}catch(x){l3.length=0,eS(x,t,1),y=ue(oo)}let _=y;if(v&&p!==!1){const x=Object.keys(v),{shapeFlag:A}=_;x.length&&A&7&&(s&&x.some(nL)&&(v=CAe(v,s)),_=Wd(_,v,!1,!0))}return r.dirs&&(_=Wd(_,null,!1,!0),_.dirs=_.dirs?_.dirs.concat(r.dirs):r.dirs),r.transition&&Vg(_,r.transition),y=_,s7(m),y}const kAe=t=>{let e;for(const r in t)(r==="class"||r==="style"||Y9(r))&&((e||(e={}))[r]=t[r]);return e},CAe=(t,e)=>{const r={};for(const n in t)(!nL(n)||!(n.slice(9)in e))&&(r[n]=t[n]);return r};function IAe(t,e,r){const{props:n,children:i,component:s}=t,{props:a,children:o,patchFlag:c}=e,l=s.emitsOptions;if(e.dirs||e.transition)return!0;if(r&&c>=0){if(c&1024)return!0;if(c&16)return n?NW(n,a,l):!!a;if(c&8){const u=e.dynamicProps;for(let f=0;f<u.length;f++){const h=u[f];if(a[h]!==n[h]&&!nS(l,h))return!0}}}else return(i||o)&&(!o||!o.$stable)?!0:n===a?!1:n?a?NW(n,a,l):!0:!!a;return!1}function NW(t,e,r){const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!0;for(let i=0;i<n.length;i++){const s=n[i];if(e[s]!==t[s]&&!nS(r,s))return!0}return!1}function RAe({vnode:t,parent:e},r){for(;e;){const n=e.subTree;if(n.suspense&&n.suspense.activeBranch===t&&(n.el=t.el),n===t)(t=e.vnode).el=r,e=e.parent;else break}}const Soe=t=>t.__isSuspense;function PAe(t,e){e&&e.pendingBranch?fr(t)?e.effects.push(...t):e.effects.push(t):jSe(t)}const qr=Symbol.for("v-fgt"),e6=Symbol.for("v-txt"),oo=Symbol.for("v-cmt"),Yk=Symbol.for("v-stc"),l3=[];let Zc=null;function pr(t=!1){l3.push(Zc=t?null:[])}function BAe(){l3.pop(),Zc=l3[l3.length-1]||null}let Z3=1;function MW(t){Z3+=t,t<0&&Zc&&(Zc.hasOnce=!0)}function Aoe(t){return t.dynamicChildren=Z3>0?Zc||hy:null,BAe(),Z3>0&&Zc&&Zc.push(t),t}function jg(t,e,r,n,i,s){return Aoe(Bs(t,e,r,n,i,s,!0))}function Qr(t,e,r,n,i){return Aoe(ue(t,e,r,n,i,!0))}function By(t){return t?t.__v_isVNode===!0:!1}function Jp(t,e){return t.type===e.type&&t.key===e.key}const Toe=({key:t})=>t??null,px=({ref:t,ref_key:e,ref_for:r})=>(typeof t=="number"&&(t=""+t),t!=null?Gi(t)||ji(t)||wr(t)?{i:pa,r:t,k:e,f:!!r}:t:null);function Bs(t,e=null,r=null,n=0,i=null,s=t===qr?0:1,a=!1,o=!1){const c={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&Toe(e),ref:e&&px(e),scopeId:Gae,slotScopeIds:null,children:r,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:n,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:pa};return o?(kL(c,r),s&128&&t.normalize(c)):r&&(c.shapeFlag|=Gi(r)?8:16),Z3>0&&!a&&Zc&&(c.patchFlag>0||s&6)&&c.patchFlag!==32&&Zc.push(c),c}const ue=DAe;function DAe(t,e=null,r=null,n=0,i=null,s=!1){if((!t||t===aoe)&&(t=oo),By(t)){const o=Wd(t,e,!0);return r&&kL(o,r),Z3>0&&!s&&Zc&&(o.shapeFlag&6?Zc[Zc.indexOf(t)]=o:Zc.push(o)),o.patchFlag=-2,o}if(jAe(t)&&(t=t.__vccOpts),e){e=koe(e);let{class:o,style:c}=e;o&&!Gi(o)&&(e.class=ku(o)),Pi(c)&&(pL(c)&&!fr(c)&&(c=Ms({},c)),e.style=Uv(c))}const a=Gi(t)?1:Soe(t)?128:Xae(t)?64:Pi(t)?4:wr(t)?2:0;return Bs(t,e,r,n,i,a,s,!0)}function koe(t){return t?pL(t)||poe(t)?Ms({},t):t:null}function Wd(t,e,r=!1,n=!1){const{props:i,ref:s,patchFlag:a,children:o,transition:c}=t,l=e?gr(i||{},e):i,u={__v_isVNode:!0,__v_skip:!0,type:t.type,props:l,key:l&&Toe(l),ref:e&&e.ref?r&&s?fr(s)?s.concat(px(e)):[s,px(e)]:px(e):s,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:o,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==qr?a===-1?16:a|16:a,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:c,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Wd(t.ssContent),ssFallback:t.ssFallback&&Wd(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return c&&n&&Vg(u,c.clone(u)),u}function Mn(t=" ",e=0){return ue(e6,null,t,e)}function qo(t="",e=!1){return e?(pr(),Qr(oo,null,t)):ue(oo,null,t)}function Bf(t){return t==null||typeof t=="boolean"?ue(oo):fr(t)?ue(qr,null,t.slice()):By(t)?r1(t):ue(e6,null,String(t))}function r1(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Wd(t)}function kL(t,e){let r=0;const{shapeFlag:n}=t;if(e==null)e=null;else if(fr(e))r=16;else if(typeof e=="object")if(n&65){const i=e.default;i&&(i._c&&(i._d=!1),kL(t,i()),i._c&&(i._d=!0));return}else{r=32;const i=e._;!i&&!poe(e)?e._ctx=pa:i===3&&pa&&(pa.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else wr(e)?(e={default:e,_ctx:pa},r=32):(e=String(e),n&64?(r=16,e=[Mn(e)]):r=8);t.children=e,t.shapeFlag|=r}function gr(...t){const e={};for(let r=0;r<t.length;r++){const n=t[r];for(const i in n)if(i==="class")e.class!==n.class&&(e.class=ku([e.class,n.class]));else if(i==="style")e.style=Uv([e.style,n.style]);else if(Y9(i)){const s=e[i],a=n[i];a&&s!==a&&!(fr(s)&&s.includes(a))&&(e[i]=s?[].concat(s,a):a)}else i!==""&&(e[i]=n[i])}return e}function hf(t,e,r,n=null){ju(t,e,7,[r,n])}const OAe=foe();let NAe=0;function MAe(t,e,r){const n=t.type,i=(e?e.appContext:t.appContext)||OAe,s={uid:NAe++,vnode:t,type:n,parent:e,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Aae(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(i.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:moe(n,i),emitsOptions:Eoe(n,i),emit:null,emitted:null,propsDefaults:_i,inheritAttrs:n.inheritAttrs,ctx:_i,data:_i,props:_i,attrs:_i,slots:_i,refs:_i,setupState:_i,setupContext:null,suspense:r,suspenseId:r?r.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=e?e.root:s,s.emit=TAe.bind(null,s),t.ce&&t.ce(s),s}let Da=null;const CL=()=>Da||pa;let c7,gD;{const t=_ae(),e=(r,n)=>{let i;return(i=t[r])||(i=t[r]=[]),i.push(n),s=>{i.length>1?i.forEach(a=>a(s)):i[0](s)}};c7=e("__VUE_INSTANCE_SETTERS__",r=>Da=r),gD=e("__VUE_SSR_SETTERS__",r=>iS=r)}const t6=t=>{const e=Da;return c7(t),t.scope.on(),()=>{t.scope.off(),c7(e)}},LW=()=>{Da&&Da.scope.off(),c7(null)};function Coe(t){return t.vnode.shapeFlag&4}let iS=!1;function LAe(t,e=!1,r=!1){e&&gD(e);const{props:n,children:i}=t.vnode,s=Coe(t);hAe(t,n,s,e),mAe(t,i,r);const a=s?FAe(t,e):void 0;return e&&gD(!1),a}function FAe(t,e){const r=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,iAe);const{setup:n}=r;if(n){const i=t.setupContext=n.length>1?UAe(t):null,s=t6(t);X1();const a=Q4(n,t,0,[t.props,i]);if(Z1(),s(),yae(a)){if(my(t)||noe(t),a.then(LW,LW),e)return a.then(o=>{FW(t,o,e)}).catch(o=>{eS(o,t,0)});t.asyncDep=a}else FW(t,a,e)}else Ioe(t,e)}function FW(t,e,r){wr(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:Pi(e)&&(t.setupState=jae(e)),Ioe(t,r)}let $W;function Ioe(t,e,r){const n=t.type;if(!t.render){if(!e&&$W&&!n.render){const i=n.template||EL(t).template;if(i){const{isCustomElement:s,compilerOptions:a}=t.appContext.config,{delimiters:o,compilerOptions:c}=n,l=Ms(Ms({isCustomElement:s,delimiters:o},a),c);n.render=$W(i,l)}}t.render=n.render||Qf}{const i=t6(t);X1();try{sAe(t)}finally{Z1(),i()}}}const $Ae={get(t,e){return po(t,"get",""),t[e]}};function UAe(t){const e=r=>{t.exposed=r||{}};return{attrs:new Proxy(t.attrs,$Ae),slots:t.slots,emit:t.emit,expose:e}}function sS(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(jae(Tm(t.exposed)),{get(e,r){if(r in e)return e[r];if(r in c3)return c3[r](t)},has(e,r){return r in e||r in c3}})):t.proxy}function VAe(t,e=!0){return wr(t)?t.displayName||t.name:t.name||e&&t.__name}function jAe(t){return wr(t)&&"__vccOpts"in t}const Te=(t,e)=>LSe(t,e,iS);function Va(t,e,r){const n=arguments.length;return n===2?Pi(e)&&!fr(e)?By(e)?ue(t,null,[e]):ue(t,e):ue(t,null,e):(n>3?r=Array.prototype.slice.call(arguments,2):n===3&&By(r)&&(r=[r]),ue(t,e,r))}const zAe="3.5.11";/**
* @vue/runtime-dom v3.5.11
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let mD;const UW=typeof window<"u"&&window.trustedTypes;if(UW)try{mD=UW.createPolicy("vue",{createHTML:t=>t})}catch{}const Roe=mD?t=>mD.createHTML(t):t=>t,qAe="http://www.w3.org/2000/svg",HAe="http://www.w3.org/1998/Math/MathML",ad=typeof document<"u"?document:null,VW=ad&&ad.createElement("template"),WAe={insert:(t,e,r)=>{e.insertBefore(t,r||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,r,n)=>{const i=e==="svg"?ad.createElementNS(qAe,t):e==="mathml"?ad.createElementNS(HAe,t):r?ad.createElement(t,{is:r}):ad.createElement(t);return t==="select"&&n&&n.multiple!=null&&i.setAttribute("multiple",n.multiple),i},createText:t=>ad.createTextNode(t),createComment:t=>ad.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>ad.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,r,n,i,s){const a=r?r.previousSibling:e.lastChild;if(i&&(i===s||i.nextSibling))for(;e.insertBefore(i.cloneNode(!0),r),!(i===s||!(i=i.nextSibling)););else{VW.innerHTML=Roe(n==="svg"?`<svg>${t}</svg>`:n==="mathml"?`<math>${t}</math>`:t);const o=VW.content;if(n==="svg"||n==="mathml"){const c=o.firstChild;for(;c.firstChild;)o.appendChild(c.firstChild);o.removeChild(c)}e.insertBefore(o,r)}return[a?a.nextSibling:e.firstChild,r?r.previousSibling:e.lastChild]}},R0="transition",Jb="animation",Dy=Symbol("_vtc"),Poe={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},Boe=Ms({},Qae,Poe),KAe=t=>(t.displayName="Transition",t.props=Boe,t),L1=KAe((t,{slots:e})=>Va(GSe,Doe(t),e)),Cp=(t,e=[])=>{fr(t)?t.forEach(r=>r(...e)):t&&t(...e)},jW=t=>t?fr(t)?t.some(e=>e.length>1):t.length>1:!1;function Doe(t){const e={};for(const E in t)E in Poe||(e[E]=t[E]);if(t.css===!1)return e;const{name:r="v",type:n,duration:i,enterFromClass:s=`${r}-enter-from`,enterActiveClass:a=`${r}-enter-active`,enterToClass:o=`${r}-enter-to`,appearFromClass:c=s,appearActiveClass:l=a,appearToClass:u=o,leaveFromClass:f=`${r}-leave-from`,leaveActiveClass:h=`${r}-leave-active`,leaveToClass:d=`${r}-leave-to`}=t,g=GAe(i),p=g&&g[0],m=g&&g[1],{onBeforeEnter:y,onEnter:v,onEnterCancelled:_,onLeave:x,onLeaveCancelled:A,onBeforeAppear:C=y,onAppear:R=v,onAppearCancelled:M=_}=e,N=(E,k,w)=>{X0(E,k?u:o),X0(E,k?l:a),w&&w()},Y=(E,k)=>{E._isLeaving=!1,X0(E,f),X0(E,d),X0(E,h),k&&k()},H=E=>(k,w)=>{const T=E?R:v,L=()=>N(k,E,w);Cp(T,[k,L]),zW(()=>{X0(k,E?c:s),rd(k,E?u:o),jW(T)||qW(k,n,p,L)})};return Ms(e,{onBeforeEnter(E){Cp(y,[E]),rd(E,s),rd(E,a)},onBeforeAppear(E){Cp(C,[E]),rd(E,c),rd(E,l)},onEnter:H(!1),onAppear:H(!0),onLeave(E,k){E._isLeaving=!0;const w=()=>Y(E,k);rd(E,f),rd(E,h),Noe(),zW(()=>{E._isLeaving&&(X0(E,f),rd(E,d),jW(x)||qW(E,n,m,w))}),Cp(x,[E,w])},onEnterCancelled(E){N(E,!1),Cp(_,[E])},onAppearCancelled(E){N(E,!0),Cp(M,[E])},onLeaveCancelled(E){Y(E),Cp(A,[E])}})}function GAe(t){if(t==null)return null;if(Pi(t))return[Xk(t.enter),Xk(t.leave)];{const e=Xk(t);return[e,e]}}function Xk(t){return tSe(t)}function rd(t,e){e.split(/\s+/).forEach(r=>r&&t.classList.add(r)),(t[Dy]||(t[Dy]=new Set)).add(e)}function X0(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.remove(n));const r=t[Dy];r&&(r.delete(e),r.size||(t[Dy]=void 0))}function zW(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let YAe=0;function qW(t,e,r,n){const i=t._endId=++YAe,s=()=>{i===t._endId&&n()};if(r!=null)return setTimeout(s,r);const{type:a,timeout:o,propCount:c}=Ooe(t,e);if(!a)return n();const l=a+"end";let u=0;const f=()=>{t.removeEventListener(l,h),s()},h=d=>{d.target===t&&++u>=c&&f()};setTimeout(()=>{u<c&&f()},o+1),t.addEventListener(l,h)}function Ooe(t,e){const r=window.getComputedStyle(t),n=g=>(r[g]||"").split(", "),i=n(`${R0}Delay`),s=n(`${R0}Duration`),a=HW(i,s),o=n(`${Jb}Delay`),c=n(`${Jb}Duration`),l=HW(o,c);let u=null,f=0,h=0;e===R0?a>0&&(u=R0,f=a,h=s.length):e===Jb?l>0&&(u=Jb,f=l,h=c.length):(f=Math.max(a,l),u=f>0?a>l?R0:Jb:null,h=u?u===R0?s.length:c.length:0);const d=u===R0&&/\b(transform|all)(,|$)/.test(n(`${R0}Property`).toString());return{type:u,timeout:f,propCount:h,hasTransform:d}}function HW(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((r,n)=>WW(r)+WW(t[n])))}function WW(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function Noe(){return document.body.offsetHeight}function XAe(t,e,r){const n=t[Dy];n&&(e=(e?[e,...n]:[...n]).join(" ")),e==null?t.removeAttribute("class"):r?t.setAttribute("class",e):t.className=e}const l7=Symbol("_vod"),Moe=Symbol("_vsh"),Kd={beforeMount(t,{value:e},{transition:r}){t[l7]=t.style.display==="none"?"":t.style.display,r&&e?r.beforeEnter(t):Qb(t,e)},mounted(t,{value:e},{transition:r}){r&&e&&r.enter(t)},updated(t,{value:e,oldValue:r},{transition:n}){!e!=!r&&(n?e?(n.beforeEnter(t),Qb(t,!0),n.enter(t)):n.leave(t,()=>{Qb(t,!1)}):Qb(t,e))},beforeUnmount(t,{value:e}){Qb(t,e)}};function Qb(t,e){t.style.display=e?t[l7]:"none",t[Moe]=!e}const ZAe=Symbol(""),JAe=/(^|;)\s*display\s*:/;function QAe(t,e,r){const n=t.style,i=Gi(r);let s=!1;if(r&&!i){if(e)if(Gi(e))for(const a of e.split(";")){const o=a.slice(0,a.indexOf(":")).trim();r[o]==null&&gx(n,o,"")}else for(const a in e)r[a]==null&&gx(n,a,"");for(const a in r)a==="display"&&(s=!0),gx(n,a,r[a])}else if(i){if(e!==r){const a=n[ZAe];a&&(r+=";"+a),n.cssText=r,s=JAe.test(r)}}else e&&t.removeAttribute("style");l7 in t&&(t[l7]=s?n.display:"",t[Moe]&&(n.display="none"))}const KW=/\s*!important$/;function gx(t,e,r){if(fr(r))r.forEach(n=>gx(t,e,n));else if(r==null&&(r=""),e.startsWith("--"))t.setProperty(e,r);else{const n=eTe(t,e);KW.test(r)?t.setProperty(Am(n),r.replace(KW,""),"important"):t[n]=r}}const GW=["Webkit","Moz","ms"],Zk={};function eTe(t,e){const r=Zk[e];if(r)return r;let n=Tc(e);if(n!=="filter"&&n in t)return Zk[e]=n;n=t0(n);for(let i=0;i<GW.length;i++){const s=GW[i]+n;if(s in t)return Zk[e]=s}return e}const YW="http://www.w3.org/1999/xlink";function XW(t,e,r,n,i,s=cSe(e)){n&&e.startsWith("xlink:")?r==null?t.removeAttributeNS(YW,e.slice(6,e.length)):t.setAttributeNS(YW,e,r):r==null||s&&!xae(r)?t.removeAttribute(e):t.setAttribute(e,s?"":Y1(r)?String(r):r)}function ZW(t,e,r,n){if(e==="innerHTML"||e==="textContent"){r!=null&&(t[e]=e==="innerHTML"?Roe(r):r);return}const i=t.tagName;if(e==="value"&&i!=="PROGRESS"&&!i.includes("-")){const a=i==="OPTION"?t.getAttribute("value")||"":t.value,o=r==null?t.type==="checkbox"?"on":"":String(r);(a!==o||!("_value"in t))&&(t.value=o),r==null&&t.removeAttribute(e),t._value=r;return}let s=!1;if(r===""||r==null){const a=typeof t[e];a==="boolean"?r=xae(r):r==null&&a==="string"?(r="",s=!0):a==="number"&&(r=0,s=!0)}try{t[e]=r}catch{}s&&t.removeAttribute(e)}function tTe(t,e,r,n){t.addEventListener(e,r,n)}function rTe(t,e,r,n){t.removeEventListener(e,r,n)}const JW=Symbol("_vei");function nTe(t,e,r,n,i=null){const s=t[JW]||(t[JW]={}),a=s[e];if(n&&a)a.value=n;else{const[o,c]=iTe(e);if(n){const l=s[e]=oTe(n,i);tTe(t,o,l,c)}else a&&(rTe(t,o,a,c),s[e]=void 0)}}const QW=/(?:Once|Passive|Capture)$/;function iTe(t){let e;if(QW.test(t)){e={};let n;for(;n=t.match(QW);)t=t.slice(0,t.length-n[0].length),e[n[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Am(t.slice(2)),e]}let Jk=0;const sTe=Promise.resolve(),aTe=()=>Jk||(sTe.then(()=>Jk=0),Jk=Date.now());function oTe(t,e){const r=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=r.attached)return;ju(cTe(n,r.value),e,5,[n])};return r.value=t,r.attached=aTe(),r}function cTe(t,e){if(fr(e)){const r=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{r.call(t),t._stopped=!0},e.map(n=>i=>!i._stopped&&n&&n(i))}else return e}const eK=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,lTe=(t,e,r,n,i,s)=>{const a=i==="svg";e==="class"?XAe(t,n,a):e==="style"?QAe(t,r,n):Y9(e)?nL(e)||nTe(t,e,r,n,s):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):uTe(t,e,n,a))?(ZW(t,e,n),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&XW(t,e,n,a,s,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!Gi(n))?ZW(t,Tc(e),n):(e==="true-value"?t._trueValue=n:e==="false-value"&&(t._falseValue=n),XW(t,e,n,a))};function uTe(t,e,r,n){if(n)return!!(e==="innerHTML"||e==="textContent"||e in t&&eK(e)&&wr(r));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const i=t.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return eK(e)&&Gi(r)?!1:e in t}const Loe=new WeakMap,Foe=new WeakMap,u7=Symbol("_moveCb"),tK=Symbol("_enterCb"),fTe=t=>(delete t.props.mode,t),hTe=fTe({name:"TransitionGroup",props:Ms({},Boe,{tag:String,moveClass:String}),setup(t,{slots:e}){const r=CL(),n=Jae();let i,s;return wL(()=>{if(!i.length)return;const a=t.moveClass||`${t.name||"v"}-move`;if(!mTe(i[0].el,r.vnode.el,a))return;i.forEach(dTe),i.forEach(pTe);const o=i.filter(gTe);Noe(),o.forEach(c=>{const l=c.el,u=l.style;rd(l,a),u.transform=u.webkitTransform=u.transitionDuration="";const f=l[u7]=h=>{h&&h.target!==l||(!h||/transform$/.test(h.propertyName))&&(l.removeEventListener("transitionend",f),l[u7]=null,X0(l,a))};l.addEventListener("transitionend",f)})}),()=>{const a=rr(t),o=Doe(a);let c=a.tag||qr;if(i=[],s)for(let l=0;l<s.length;l++){const u=s[l];u.el&&u.el instanceof Element&&(i.push(u),Vg(u,X3(u,o,n,r)),Loe.set(u,u.el.getBoundingClientRect()))}s=e.default?vL(e.default()):[];for(let l=0;l<s.length;l++){const u=s[l];u.key!=null&&Vg(u,X3(u,o,n,r))}return ue(c,null,s)}}}),IL=hTe;function dTe(t){const e=t.el;e[u7]&&e[u7](),e[tK]&&e[tK]()}function pTe(t){Foe.set(t,t.el.getBoundingClientRect())}function gTe(t){const e=Loe.get(t),r=Foe.get(t),n=e.left-r.left,i=e.top-r.top;if(n||i){const s=t.el.style;return s.transform=s.webkitTransform=`translate(${n}px,${i}px)`,s.transitionDuration="0s",t}}function mTe(t,e,r){const n=t.cloneNode(),i=t[Dy];i&&i.forEach(o=>{o.split(/\s+/).forEach(c=>c&&n.classList.remove(c))}),r.split(/\s+/).forEach(o=>o&&n.classList.add(o)),n.style.display="none";const s=e.nodeType===1?e:e.parentNode;s.appendChild(n);const{hasTransform:a}=Ooe(n);return s.removeChild(n),a}const yTe=["ctrl","shift","alt","meta"],vTe={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>yTe.some(r=>t[`${r}Key`]&&!e.includes(r))},bTe=(t,e)=>{const r=t._withMods||(t._withMods={}),n=e.join(".");return r[n]||(r[n]=(i,...s)=>{for(let a=0;a<e.length;a++){const o=vTe[e[a]];if(o&&o(i,e))return}return t(i,...s)})},wTe=Ms({patchProp:lTe},WAe);let rK;function $oe(){return rK||(rK=vAe(wTe))}const _Te=(...t)=>{$oe().render(...t)},xTe=(...t)=>{const e=$oe().createApp(...t),{mount:r}=e;return e.mount=n=>{const i=STe(n);if(!i)return;const s=e._component;!wr(s)&&!s.render&&!s.template&&(s.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const a=r(i,!1,ETe(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),a},e};function ETe(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function STe(t){return Gi(t)?document.querySelector(t):t}function zg(t,e){let r;function n(){r=aL(),r.run(()=>e.length?e(()=>{r?.stop(),n()}):e())}cr(t,i=>{i&&!r?n():i||(r?.stop(),r=void 0)},{immediate:!0}),Pc(()=>{r?.stop()})}const qn=typeof window<"u",RL=qn&&"IntersectionObserver"in window,ATe=qn&&("ontouchstart"in window||window.navigator.maxTouchPoints>0);function Uoe(t,e,r){const n=e.length-1;if(n<0)return t===void 0?r:t;for(let i=0;i<n;i++){if(t==null)return r;t=t[e[i]]}return t==null||t[e[n]]===void 0?r:t[e[n]]}function Vv(t,e){if(t===e)return!0;if(t instanceof Date&&e instanceof Date&&t.getTime()!==e.getTime()||t!==Object(t)||e!==Object(e))return!1;const r=Object.keys(t);return r.length!==Object.keys(e).length?!1:r.every(n=>Vv(t[n],e[n]))}function yD(t,e,r){return t==null||!e||typeof e!="string"?r:t[e]!==void 0?t[e]:(e=e.replace(/\[(\w+)\]/g,".$1"),e=e.replace(/^\./,""),Uoe(t,e.split("."),r))}function yd(t,e,r){if(e===!0)return t===void 0?r:t;if(e==null||typeof e=="boolean")return r;if(t!==Object(t)){if(typeof e!="function")return r;const i=e(t,r);return typeof i>"u"?r:i}if(typeof e=="string")return yD(t,e,r);if(Array.isArray(e))return Uoe(t,e,r);if(typeof e!="function")return r;const n=e(t,r);return typeof n>"u"?r:n}function Voe(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return Array.from({length:t},(r,n)=>e+n)}function br(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"px";if(!(t==null||t===""))return isNaN(+t)?String(t):isFinite(+t)?`${Number(t)}${e}`:void 0}function TTe(t){return t!==null&&typeof t=="object"&&!Array.isArray(t)}function nK(t){let e;return t!==null&&typeof t=="object"&&((e=Object.getPrototypeOf(t))===Object.prototype||e===null)}function joe(t){if(t&&"$el"in t){const e=t.$el;return e?.nodeType===Node.TEXT_NODE?e.nextElementSibling:e}return t}const iK=Object.freeze({enter:13,tab:9,delete:46,esc:27,space:32,up:38,down:40,left:37,right:39,end:35,home:36,del:46,backspace:8,insert:45,pageup:33,pagedown:34,shift:16});function zoe(t){return Object.keys(t)}function Qk(t,e){return e.every(r=>t.hasOwnProperty(r))}function qoe(t,e){const r={},n=new Set(Object.keys(t));for(const i of e)n.has(i)&&(r[i]=t[i]);return r}function sK(t,e,r){const n=Object.create(null),i=Object.create(null);for(const s in t)e.some(a=>a instanceof RegExp?a.test(s):a===s)&&!r?.some(a=>a===s)?n[s]=t[s]:i[s]=t[s];return[n,i]}function jv(t,e){const r={...t};return e.forEach(n=>delete r[n]),r}function kTe(t,e){const r={};return e.forEach(n=>r[n]=t[n]),r}const Hoe=/^on[^a-z]/,PL=t=>Hoe.test(t),CTe=["onAfterscriptexecute","onAnimationcancel","onAnimationend","onAnimationiteration","onAnimationstart","onAuxclick","onBeforeinput","onBeforescriptexecute","onChange","onClick","onCompositionend","onCompositionstart","onCompositionupdate","onContextmenu","onCopy","onCut","onDblclick","onFocusin","onFocusout","onFullscreenchange","onFullscreenerror","onGesturechange","onGestureend","onGesturestart","onGotpointercapture","onInput","onKeydown","onKeypress","onKeyup","onLostpointercapture","onMousedown","onMousemove","onMouseout","onMouseover","onMouseup","onMousewheel","onPaste","onPointercancel","onPointerdown","onPointerenter","onPointerleave","onPointermove","onPointerout","onPointerover","onPointerup","onReset","onSelect","onSubmit","onTouchcancel","onTouchend","onTouchmove","onTouchstart","onTransitioncancel","onTransitionend","onTransitionrun","onTransitionstart","onWheel"];function BL(t){const[e,r]=sK(t,[Hoe]),n=jv(e,CTe),[i,s]=sK(r,["class","style","id",/^data-/]);return Object.assign(i,e),Object.assign(s,n),[i,s]}function Du(t){return t==null?[]:Array.isArray(t)?t:[t]}function ITe(t,e){let r=0;const n=function(){for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];clearTimeout(r),r=setTimeout(()=>t(...s),ct(e))};return n.clear=()=>{clearTimeout(r)},n.immediate=t,n}function Dd(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;return Math.max(e,Math.min(r,t))}function aK(t,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"0";return t+r.repeat(Math.max(0,e-t.length))}function oK(t,e){return(arguments.length>2&&arguments[2]!==void 0?arguments[2]:"0").repeat(Math.max(0,e-t.length))+t}function RTe(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;const r=[];let n=0;for(;n<t.length;)r.push(t.substr(n,e)),n+=e;return r}function uo(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;const n={};for(const i in t)n[i]=t[i];for(const i in e){const s=t[i],a=e[i];if(nK(s)&&nK(a)){n[i]=uo(s,a,r);continue}if(r&&Array.isArray(s)&&Array.isArray(a)){n[i]=r(s,a);continue}n[i]=a}return n}function Woe(t){return t.map(e=>e.type===qr?Woe(e.children):e).flat()}function wg(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";if(wg.cache.has(t))return wg.cache.get(t);const e=t.replace(/[^a-z]/gi,"-").replace(/\B([A-Z])/g,"-$1").toLowerCase();return wg.cache.set(t,e),e}wg.cache=new Map;function ty(t,e){if(!e||typeof e!="object")return[];if(Array.isArray(e))return e.map(r=>ty(t,r)).flat(1);if(e.suspense)return ty(t,e.ssContent);if(Array.isArray(e.children))return e.children.map(r=>ty(t,r)).flat(1);if(e.component){if(Object.getOwnPropertySymbols(e.component.provides).includes(t))return[e.component];if(e.component.subTree)return ty(t,e.component.subTree).flat(1)}return[]}function DL(t){const e=Ps({}),r=Te(t);return Qs(()=>{for(const n in r.value)e[n]=r.value[n]},{flush:"sync"}),mL(e)}function f7(t,e){return t.includes(e)}function Koe(t){return t[2].toLowerCase()+t.slice(3)}const _c=()=>[Function,Array];function cK(t,e){return e="on"+t0(e),!!(t[e]||t[`${e}Once`]||t[`${e}Capture`]||t[`${e}OnceCapture`]||t[`${e}CaptureOnce`])}function PTe(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];if(Array.isArray(t))for(const i of t)i(...r);else typeof t=="function"&&t(...r)}function J3(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const r=["button","[href]",'input:not([type="hidden"])',"select","textarea","[tabindex]"].map(n=>`${n}${e?':not([tabindex="-1"])':""}:not([disabled])`).join(", ");return[...t.querySelectorAll(r)]}function Goe(t,e,r){let n,i=t.indexOf(document.activeElement);const s=e==="next"?1:-1;do i+=s,n=t[i];while((!n||n.offsetParent==null||!(r?.(n)??!0))&&i<t.length&&i>=0);return n}function u3(t,e){const r=J3(t);if(!e)(t===document.activeElement||!t.contains(document.activeElement))&&r[0]?.focus();else if(e==="first")r[0]?.focus();else if(e==="last")r.at(-1)?.focus();else if(typeof e=="number")r[e]?.focus();else{const n=Goe(r,e);n?n.focus():u3(t,e==="next"?"first":"last")}}function h7(t,e){if(!(qn&&typeof CSS<"u"&&typeof CSS.supports<"u"&&CSS.supports(`selector(${e})`)))return null;try{return!!t&&t.matches(e)}catch{return null}}function Yoe(t){return t.some(e=>By(e)?e.type===oo?!1:e.type!==qr||Yoe(e.children):!0)?t:null}function BTe(t,e){if(!qn||t===0)return e(),()=>{};const r=window.setTimeout(e,t);return()=>window.clearTimeout(r)}function DTe(t,e){const r=t.clientX,n=t.clientY,i=e.getBoundingClientRect(),s=i.left,a=i.top,o=i.right,c=i.bottom;return r>=s&&r<=o&&n>=a&&n<=c}function vD(){const t=ur(),e=r=>{t.value=r};return Object.defineProperty(e,"value",{enumerable:!0,get:()=>t.value,set:r=>t.value=r}),Object.defineProperty(e,"el",{enumerable:!0,get:()=>joe(t.value)}),e}function lK(t){const e=t.key.length===1,r=!t.ctrlKey&&!t.metaKey&&!t.altKey;return e&&r}const Xoe=["top","bottom"],OTe=["start","end","left","right"];function bD(t,e){let[r,n]=t.split(" ");return n||(n=f7(Xoe,r)?"start":f7(OTe,r)?"top":"center"),{side:uK(r,e),align:uK(n,e)}}function uK(t,e){return t==="start"?e?"right":"left":t==="end"?e?"left":"right":t}function eC(t){return{side:{center:"center",top:"bottom",bottom:"top",left:"right",right:"left"}[t.side],align:t.align}}function tC(t){return{side:t.side,align:{center:"center",top:"bottom",bottom:"top",left:"right",right:"left"}[t.align]}}function fK(t){return{side:t.align,align:t.side}}function hK(t){return f7(Xoe,t.side)?"y":"x"}class _g{constructor(e){let{x:r,y:n,width:i,height:s}=e;this.x=r,this.y=n,this.width=i,this.height=s}get top(){return this.y}get bottom(){return this.y+this.height}get left(){return this.x}get right(){return this.x+this.width}}function dK(t,e){return{x:{before:Math.max(0,e.left-t.left),after:Math.max(0,t.right-e.right)},y:{before:Math.max(0,e.top-t.top),after:Math.max(0,t.bottom-e.bottom)}}}function Zoe(t){return Array.isArray(t)?new _g({x:t[0],y:t[1],width:0,height:0}):t.getBoundingClientRect()}function OL(t){const e=t.getBoundingClientRect(),r=getComputedStyle(t),n=r.transform;if(n){let i,s,a,o,c;if(n.startsWith("matrix3d("))i=n.slice(9,-1).split(/, /),s=+i[0],a=+i[5],o=+i[12],c=+i[13];else if(n.startsWith("matrix("))i=n.slice(7,-1).split(/, /),s=+i[0],a=+i[3],o=+i[4],c=+i[5];else return new _g(e);const l=r.transformOrigin,u=e.x-o-(1-s)*parseFloat(l),f=e.y-c-(1-a)*parseFloat(l.slice(l.indexOf(" ")+1)),h=s?e.width/s:t.offsetWidth+1,d=a?e.height/a:t.offsetHeight+1;return new _g({x:u,y:f,width:h,height:d})}else return new _g(e)}function ry(t,e,r){if(typeof t.animate>"u")return{finished:Promise.resolve()};let n;try{n=t.animate(e,r)}catch{return{finished:Promise.resolve()}}return typeof n.finished>"u"&&(n.finished=new Promise(i=>{n.onfinish=()=>{i(n)}})),n}const mx=new WeakMap;function NTe(t,e){Object.keys(e).forEach(r=>{if(PL(r)){const n=Koe(r),i=mx.get(t);if(e[r]==null)i?.forEach(s=>{const[a,o]=s;a===n&&(t.removeEventListener(n,o),i.delete(s))});else if(!i||![...i].some(s=>s[0]===n&&s[1]===e[r])){t.addEventListener(n,e[r]);const s=i||new Set;s.add([n,e[r]]),mx.has(t)||mx.set(t,s)}}else e[r]==null?t.removeAttribute(r):t.setAttribute(r,e[r])})}function MTe(t,e){Object.keys(e).forEach(r=>{if(PL(r)){const n=Koe(r),i=mx.get(t);i?.forEach(s=>{const[a,o]=s;a===n&&(t.removeEventListener(n,o),i.delete(s))})}else t.removeAttribute(r)})}const _2=2.4,pK=.2126729,gK=.7151522,mK=.072175,LTe=.55,FTe=.58,$Te=.57,UTe=.62,E_=.03,yK=1.45,VTe=5e-4,jTe=1.25,zTe=1.25,vK=.078,bK=12.82051282051282,S_=.06,wK=.001;function _K(t,e){const r=(t.r/255)**_2,n=(t.g/255)**_2,i=(t.b/255)**_2,s=(e.r/255)**_2,a=(e.g/255)**_2,o=(e.b/255)**_2;let c=r*pK+n*gK+i*mK,l=s*pK+a*gK+o*mK;if(c<=E_&&(c+=(E_-c)**yK),l<=E_&&(l+=(E_-l)**yK),Math.abs(l-c)<VTe)return 0;let u;if(l>c){const f=(l**LTe-c**FTe)*jTe;u=f<wK?0:f<vK?f-f*bK*S_:f-S_}else{const f=(l**UTe-c**$Te)*zTe;u=f>-wK?0:f>-vK?f-f*bK*S_:f+S_}return u*100}function qTe(t,e){e=Array.isArray(e)?e.slice(0,-1).map(r=>`'${r}'`).join(", ")+` or '${e.at(-1)}'`:`'${e}'`}const d7=.20689655172413793,HTe=t=>t>d7**3?Math.cbrt(t):t/(3*d7**2)+4/29,WTe=t=>t>d7?t**3:3*d7**2*(t-4/29);function Joe(t){const e=HTe,r=e(t[1]);return[116*r-16,500*(e(t[0]/.95047)-r),200*(r-e(t[2]/1.08883))]}function Qoe(t){const e=WTe,r=(t[0]+16)/116;return[e(r+t[1]/500)*.95047,e(r),e(r-t[2]/200)*1.08883]}const KTe=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]],GTe=t=>t<=.0031308?t*12.92:1.055*t**(1/2.4)-.055,YTe=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],XTe=t=>t<=.04045?t/12.92:((t+.055)/1.055)**2.4;function ece(t){const e=Array(3),r=GTe,n=KTe;for(let i=0;i<3;++i)e[i]=Math.round(Dd(r(n[i][0]*t[0]+n[i][1]*t[1]+n[i][2]*t[2]))*255);return{r:e[0],g:e[1],b:e[2]}}function NL(t){let{r:e,g:r,b:n}=t;const i=[0,0,0],s=XTe,a=YTe;e=s(e/255),r=s(r/255),n=s(n/255);for(let o=0;o<3;++o)i[o]=a[o][0]*e+a[o][1]*r+a[o][2]*n;return i}function wD(t){return!!t&&/^(#|var\(--|(rgb|hsl)a?\()/.test(t)}function ZTe(t){return wD(t)&&!/^((rgb|hsl)a?\()?var\(--/.test(t)}const xK=/^(?<fn>(?:rgb|hsl)a?)\((?<values>.+)\)/,JTe={rgb:(t,e,r,n)=>({r:t,g:e,b:r,a:n}),rgba:(t,e,r,n)=>({r:t,g:e,b:r,a:n}),hsl:(t,e,r,n)=>EK({h:t,s:e,l:r,a:n}),hsla:(t,e,r,n)=>EK({h:t,s:e,l:r,a:n}),hsv:(t,e,r,n)=>Q3({h:t,s:e,v:r,a:n}),hsva:(t,e,r,n)=>Q3({h:t,s:e,v:r,a:n})};function Hf(t){if(typeof t=="number")return{r:(t&16711680)>>16,g:(t&65280)>>8,b:t&255};if(typeof t=="string"&&xK.test(t)){const{groups:e}=t.match(xK),{fn:r,values:n}=e,i=n.split(/,\s*/).map(s=>s.endsWith("%")&&["hsl","hsla","hsv","hsva"].includes(r)?parseFloat(s)/100:parseFloat(s));return JTe[r](...i)}else if(typeof t=="string"){let e=t.startsWith("#")?t.slice(1):t;return[3,4].includes(e.length)?e=e.split("").map(r=>r+r).join(""):[6,8].includes(e.length),eke(e)}else if(typeof t=="object"){if(Qk(t,["r","g","b"]))return t;if(Qk(t,["h","s","l"]))return Q3(tce(t));if(Qk(t,["h","s","v"]))return Q3(t)}throw new TypeError(`Invalid color: ${t==null?t:String(t)||t.constructor.name}
Expected #hex, #hexa, rgb(), rgba(), hsl(), hsla(), object or number`)}function Q3(t){const{h:e,s:r,v:n,a:i}=t,s=o=>{const c=(o+e/60)%6;return n-n*r*Math.max(Math.min(c,4-c,1),0)},a=[s(5),s(3),s(1)].map(o=>Math.round(o*255));return{r:a[0],g:a[1],b:a[2],a:i}}function EK(t){return Q3(tce(t))}function tce(t){const{h:e,s:r,l:n,a:i}=t,s=n+r*Math.min(n,1-n),a=s===0?0:2-2*n/s;return{h:e,s:a,v:s,a:i}}function A_(t){const e=Math.round(t).toString(16);return("00".substr(0,2-e.length)+e).toUpperCase()}function QTe(t){let{r:e,g:r,b:n,a:i}=t;return`#${[A_(e),A_(r),A_(n),i!==void 0?A_(Math.round(i*255)):""].join("")}`}function eke(t){t=tke(t);let[e,r,n,i]=RTe(t,2).map(s=>parseInt(s,16));return i=i===void 0?i:i/255,{r:e,g:r,b:n,a:i}}function tke(t){return t.startsWith("#")&&(t=t.slice(1)),t=t.replace(/([^0-9a-f])/gi,"F"),(t.length===3||t.length===4)&&(t=t.split("").map(e=>e+e).join("")),t.length!==6&&(t=aK(aK(t,6),8,"F")),t}function rke(t,e){const r=Joe(NL(t));return r[0]=r[0]+e*10,ece(Qoe(r))}function nke(t,e){const r=Joe(NL(t));return r[0]=r[0]-e*10,ece(Qoe(r))}function ike(t){const e=Hf(t);return NL(e)[1]}function rce(t){const e=Math.abs(_K(Hf(0),Hf(t)));return Math.abs(_K(Hf(16777215),Hf(t)))>Math.min(e,50)?"#fff":"#000"}function _t(t,e){return r=>Object.keys(t).reduce((n,i)=>{const a=typeof t[i]=="object"&&t[i]!=null&&!Array.isArray(t[i])?t[i]:{type:t[i]};return r&&i in r?n[i]={...a,default:r[i]}:n[i]=a,e&&!n[i].source&&(n[i].source=e),n},{})}const Or=_t({class:[String,Array,Object],style:{type:[String,Array,Object],default:null}},"component");function Fs(t,e){const r=CL();if(!r)throw new Error(`[Vuetify] ${t} must be called from inside a setup function`);return r}function hh(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"composables";const e=Fs(t).type;return wg(e?.aliasName||e?.name)}let nce=0,yx=new WeakMap;function Zu(){const t=Fs("getUid");if(yx.has(t))return yx.get(t);{const e=nce++;return yx.set(t,e),e}}Zu.reset=()=>{nce=0,yx=new WeakMap};function ske(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Fs("injectSelf");const{provides:r}=e;if(r&&t in r)return r[t]}const Oy=Symbol.for("vuetify:defaults");function ake(t){return ht(t)}function ML(){const t=Rr(Oy);if(!t)throw new Error("[Vuetify] Could not find defaults instance");return t}function zv(t,e){const r=ML(),n=ht(t),i=Te(()=>{if(ct(e?.disabled))return r.value;const a=ct(e?.scoped),o=ct(e?.reset),c=ct(e?.root);if(n.value==null&&!(a||o||c))return r.value;let l=uo(n.value,{prev:r.value});if(a)return l;if(o||c){const u=Number(o||1/0);for(let f=0;f<=u&&!(!l||!("prev"in l));f++)l=l.prev;return l&&typeof c=="string"&&c in l&&(l=uo(uo(l,{prev:l}),l[c])),l}return l.prev?uo(l.prev,l):l});return ui(Oy,i),i}function oke(t,e){return typeof t.props?.[e]<"u"||typeof t.props?.[wg(e)]<"u"}function cke(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:ML();const n=Fs("useDefaults");if(e=e??n.type.name??n.type.__name,!e)throw new Error("[Vuetify] Could not determine component name");const i=Te(()=>r.value?.[t._as??e]),s=new Proxy(t,{get(c,l){const u=Reflect.get(c,l);return l==="class"||l==="style"?[i.value?.[l],u].filter(f=>f!=null):typeof l=="string"&&!oke(n.vnode,l)?i.value?.[l]!==void 0?i.value?.[l]:r.value?.global?.[l]!==void 0?r.value?.global?.[l]:u:u}}),a=ur();Qs(()=>{if(i.value){const c=Object.entries(i.value).filter(l=>{let[u]=l;return u.startsWith(u[0].toUpperCase())});a.value=c.length?Object.fromEntries(c):void 0}else a.value=void 0});function o(){const c=ske(Oy,n);ui(Oy,Te(()=>a.value?uo(c?.value??{},a.value):c?.value))}return{props:s,provideSubDefaults:o}}function qv(t){if(t._setup=t._setup??t.setup,!t.name)return t;if(t._setup){t.props=_t(t.props??{},t.name)();const e=Object.keys(t.props).filter(r=>r!=="class"&&r!=="style");t.filterProps=function(n){return qoe(n,e)},t.props._as=String,t.setup=function(n,i){const s=ML();if(!s.value)return t._setup(n,i);const{props:a,provideSubDefaults:o}=cke(n,n._as??t.name,s),c=t._setup(a,i);return o(),c}}return t}function Yt(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return e=>(t?qv:Di)(e)}function LL(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"div",r=arguments.length>2?arguments[2]:void 0;return Yt()({name:r??t0(Tc(t.replace(/__/g,"-"))),props:{tag:{type:String,default:e},...Or()},setup(n,i){let{slots:s}=i;return()=>Va(n.tag,{class:[t,n.class],style:n.style},s.default?.())}})}function ice(t){if(typeof t.getRootNode!="function"){for(;t.parentNode;)t=t.parentNode;return t!==document?null:document}const e=t.getRootNode();return e!==document&&e.getRootNode({composed:!0})!==document?null:e}const p7="cubic-bezier(0.4, 0, 0.2, 1)",lke="cubic-bezier(0.0, 0, 0.2, 1)",uke="cubic-bezier(0.4, 0, 1, 1)";function sce(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;for(;t;){if(e?fke(t):FL(t))return t;t=t.parentElement}return document.scrollingElement}function g7(t,e){const r=[];if(e&&t&&!e.contains(t))return r;for(;t&&(FL(t)&&r.push(t),t!==e);)t=t.parentElement;return r}function FL(t){if(!t||t.nodeType!==Node.ELEMENT_NODE)return!1;const e=window.getComputedStyle(t);return e.overflowY==="scroll"||e.overflowY==="auto"&&t.scrollHeight>t.clientHeight}function fke(t){if(!t||t.nodeType!==Node.ELEMENT_NODE)return!1;const e=window.getComputedStyle(t);return["scroll","auto"].includes(e.overflowY)}function hke(t){for(;t;){if(window.getComputedStyle(t).position==="fixed")return!0;t=t.offsetParent}return!1}function _r(t){const e=Fs("useRender");e.render=t}function xs(t,e,r){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:f=>f,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:f=>f;const s=Fs("useProxiedModel"),a=ht(t[e]!==void 0?t[e]:r),o=wg(e),l=Te(o!==e?()=>(t[e],!!((s.vnode.props?.hasOwnProperty(e)||s.vnode.props?.hasOwnProperty(o))&&(s.vnode.props?.hasOwnProperty(`onUpdate:${e}`)||s.vnode.props?.hasOwnProperty(`onUpdate:${o}`)))):()=>(t[e],!!(s.vnode.props?.hasOwnProperty(e)&&s.vnode.props?.hasOwnProperty(`onUpdate:${e}`))));zg(()=>!l.value,()=>{cr(()=>t[e],f=>{a.value=f})});const u=Te({get(){const f=t[e];return n(l.value?f:a.value)},set(f){const h=i(f),d=rr(l.value?t[e]:a.value);d===h||n(d)===f||(a.value=h,s?.emit(`update:${e}`,h))}});return Object.defineProperty(u,"externalValue",{get:()=>l.value?t[e]:a.value}),u}const dke={badge:"Badge",open:"Open",close:"Close",dismiss:"Dismiss",confirmEdit:{ok:"OK",cancel:"Cancel"},dataIterator:{noResultsText:"No matching records found",loadingText:"Loading items..."},dataTable:{itemsPerPageText:"Rows per page:",ariaLabel:{sortDescending:"Sorted descending.",sortAscending:"Sorted ascending.",sortNone:"Not sorted.",activateNone:"Activate to remove sorting.",activateDescending:"Activate to sort descending.",activateAscending:"Activate to sort ascending."},sortBy:"Sort by"},dataFooter:{itemsPerPageText:"Items per page:",itemsPerPageAll:"All",nextPage:"Next page",prevPage:"Previous page",firstPage:"First page",lastPage:"Last page",pageText:"{0}-{1} of {2}"},dateRangeInput:{divider:"to"},datePicker:{itemsSelected:"{0} selected",range:{title:"Select dates",header:"Enter dates"},title:"Select date",header:"Enter date",input:{placeholder:"Enter date"}},noDataText:"No data available",carousel:{prev:"Previous visual",next:"Next visual",ariaLabel:{delimiter:"Carousel slide {0} of {1}"}},calendar:{moreEvents:"{0} more",today:"Today"},input:{clear:"Clear {0}",prependAction:"{0} prepended action",appendAction:"{0} appended action",otp:"Please enter OTP character {0}"},fileInput:{counter:"{0} files",counterSize:"{0} files ({1} in total)"},timePicker:{am:"AM",pm:"PM",title:"Select Time"},pagination:{ariaLabel:{root:"Pagination Navigation",next:"Next page",previous:"Previous page",page:"Go to page {0}",currentPage:"Page {0}, Current page",first:"First page",last:"Last page"}},stepper:{next:"Next",prev:"Previous"},rating:{ariaLabel:{item:"Rating {0} of {1}"}},loading:"Loading...",infiniteScroll:{loadMore:"Load more",empty:"No more"}},SK="$vuetify.",AK=(t,e)=>t.replace(/\{(\d+)\}/g,(r,n)=>String(e[+n])),ace=(t,e,r)=>function(n){for(var i=arguments.length,s=new Array(i>1?i-1:0),a=1;a<i;a++)s[a-1]=arguments[a];if(!n.startsWith(SK))return AK(n,s);const o=n.replace(SK,""),c=t.value&&r.value[t.value],l=e.value&&r.value[e.value];let u=yD(c,o,null);return u||(`${n}${t.value}`,u=yD(l,o,null)),u||(u=n),typeof u!="string"&&(u=n),AK(u,s)};function oce(t,e){return(r,n)=>new Intl.NumberFormat([t.value,e.value],n).format(r)}function rC(t,e,r){const n=xs(t,e,t[e]??r.value);return n.value=t[e]??r.value,cr(r,i=>{t[e]==null&&(n.value=r.value)}),n}function cce(t){return e=>{const r=rC(e,"locale",t.current),n=rC(e,"fallback",t.fallback),i=rC(e,"messages",t.messages);return{name:"vuetify",current:r,fallback:n,messages:i,t:ace(r,n,i),n:oce(r,n),provide:cce({current:r,fallback:n,messages:i})}}}function pke(t){const e=ur(t?.locale??"en"),r=ur(t?.fallback??"en"),n=ht({en:dke,...t?.messages});return{name:"vuetify",current:e,fallback:r,messages:n,t:ace(e,r,n),n:oce(e,r),provide:cce({current:e,fallback:r,messages:n})}}const Ny=Symbol.for("vuetify:locale");function gke(t){return t.name!=null}function mke(t){const e=t?.adapter&&gke(t?.adapter)?t?.adapter:pke(t),r=bke(e,t);return{...e,...r}}function aS(){const t=Rr(Ny);if(!t)throw new Error("[Vuetify] Could not find injected locale instance");return t}function yke(t){const e=Rr(Ny);if(!e)throw new Error("[Vuetify] Could not find injected locale instance");const r=e.provide(t),n=wke(r,e.rtl,t),i={...r,...n};return ui(Ny,i),i}function vke(){return{af:!1,ar:!0,bg:!1,ca:!1,ckb:!1,cs:!1,de:!1,el:!1,en:!1,es:!1,et:!1,fa:!0,fi:!1,fr:!1,hr:!1,hu:!1,he:!0,id:!1,it:!1,ja:!1,km:!1,ko:!1,lv:!1,lt:!1,nl:!1,no:!1,pl:!1,pt:!1,ro:!1,ru:!1,sk:!1,sl:!1,srCyrl:!1,srLatn:!1,sv:!1,th:!1,tr:!1,az:!1,uk:!1,vi:!1,zhHans:!1,zhHant:!1}}function bke(t,e){const r=ht(e?.rtl??vke()),n=Te(()=>r.value[t.current.value]??!1);return{isRtl:n,rtl:r,rtlClasses:Te(()=>`v-locale--is-${n.value?"rtl":"ltr"}`)}}function wke(t,e,r){const n=Te(()=>r.rtl??e.value[t.current.value]??!1);return{isRtl:n,rtl:e,rtlClasses:Te(()=>`v-locale--is-${n.value?"rtl":"ltr"}`)}}function Gl(){const t=Rr(Ny);if(!t)throw new Error("[Vuetify] Could not find injected rtl instance");return{isRtl:t.isRtl,rtlClasses:t.rtlClasses}}const oS={"001":1,AD:1,AE:6,AF:6,AG:0,AI:1,AL:1,AM:1,AN:1,AR:1,AS:0,AT:1,AU:1,AX:1,AZ:1,BA:1,BD:0,BE:1,BG:1,BH:6,BM:1,BN:1,BR:0,BS:0,BT:0,BW:0,BY:1,BZ:0,CA:0,CH:1,CL:1,CM:1,CN:1,CO:0,CR:1,CY:1,CZ:1,DE:1,DJ:6,DK:1,DM:0,DO:0,DZ:6,EC:1,EE:1,EG:6,ES:1,ET:0,FI:1,FJ:1,FO:1,FR:1,GB:1,"GB-alt-variant":0,GE:1,GF:1,GP:1,GR:1,GT:0,GU:0,HK:0,HN:0,HR:1,HU:1,ID:0,IE:1,IL:0,IN:0,IQ:6,IR:6,IS:1,IT:1,JM:0,JO:6,JP:0,KE:0,KG:1,KH:0,KR:0,KW:6,KZ:1,LA:0,LB:1,LI:1,LK:1,LT:1,LU:1,LV:1,LY:6,MC:1,MD:1,ME:1,MH:0,MK:1,MM:0,MN:1,MO:0,MQ:1,MT:0,MV:5,MX:0,MY:1,MZ:0,NI:0,NL:1,NO:1,NP:0,NZ:1,OM:6,PA:0,PE:0,PH:0,PK:0,PL:1,PR:0,PT:0,PY:0,QA:6,RE:1,RO:1,RS:1,RU:1,SA:0,SD:6,SE:1,SG:0,SI:1,SK:1,SM:1,SV:0,SY:6,TH:0,TJ:1,TM:1,TR:1,TT:0,TW:0,UA:1,UM:0,US:0,UY:1,UZ:1,VA:1,VE:0,VI:0,VN:1,WS:0,XK:1,YE:0,ZA:0,ZW:0};function _ke(t,e,r){const n=[];let i=[];const s=lce(t),a=uce(t),o=r??oS[e.slice(-2).toUpperCase()]??0,c=(s.getDay()-o+7)%7,l=(a.getDay()-o+7)%7;for(let u=0;u<c;u++){const f=new Date(s);f.setDate(f.getDate()-(c-u)),i.push(f)}for(let u=1;u<=a.getDate();u++){const f=new Date(t.getFullYear(),t.getMonth(),u);i.push(f),i.length===7&&(n.push(i),i=[])}for(let u=1;u<7-l;u++){const f=new Date(a);f.setDate(f.getDate()+u),i.push(f)}return i.length>0&&n.push(i),n}function xke(t,e,r){const n=r??oS[e.slice(-2).toUpperCase()]??0,i=new Date(t);for(;i.getDay()!==n;)i.setDate(i.getDate()-1);return i}function Eke(t,e){const r=new Date(t),n=((oS[e.slice(-2).toUpperCase()]??0)+6)%7;for(;r.getDay()!==n;)r.setDate(r.getDate()+1);return r}function lce(t){return new Date(t.getFullYear(),t.getMonth(),1)}function uce(t){return new Date(t.getFullYear(),t.getMonth()+1,0)}function Ske(t){const e=t.split("-").map(Number);return new Date(e[0],e[1]-1,e[2])}const Ake=/^([12]\d{3}-([1-9]|0[1-9]|1[0-2])-([1-9]|0[1-9]|[12]\d|3[01]))$/;function fce(t){if(t==null)return new Date;if(t instanceof Date)return t;if(typeof t=="string"){let e;if(Ake.test(t))return Ske(t);if(e=Date.parse(t),!isNaN(e))return new Date(e)}return null}const TK=new Date(2e3,0,2);function Tke(t,e){const r=e??oS[t.slice(-2).toUpperCase()]??0;return Voe(7).map(n=>{const i=new Date(TK);return i.setDate(TK.getDate()+r+n),new Intl.DateTimeFormat(t,{weekday:"narrow"}).format(i)})}function kke(t,e,r,n){const i=fce(t)??new Date,s=n?.[e];if(typeof s=="function")return s(i,e,r);let a={};switch(e){case"fullDate":a={year:"numeric",month:"long",day:"numeric"};break;case"fullDateWithWeekday":a={weekday:"long",year:"numeric",month:"long",day:"numeric"};break;case"normalDate":const o=i.getDate(),c=new Intl.DateTimeFormat(r,{month:"long"}).format(i);return`${o} ${c}`;case"normalDateWithWeekday":a={weekday:"short",day:"numeric",month:"short"};break;case"shortDate":a={month:"short",day:"numeric"};break;case"year":a={year:"numeric"};break;case"month":a={month:"long"};break;case"monthShort":a={month:"short"};break;case"monthAndYear":a={month:"long",year:"numeric"};break;case"monthAndDate":a={month:"long",day:"numeric"};break;case"weekday":a={weekday:"long"};break;case"weekdayShort":a={weekday:"short"};break;case"dayOfMonth":return new Intl.NumberFormat(r).format(i.getDate());case"hours12h":a={hour:"numeric",hour12:!0};break;case"hours24h":a={hour:"numeric",hour12:!1};break;case"minutes":a={minute:"numeric"};break;case"seconds":a={second:"numeric"};break;case"fullTime":a={hour:"numeric",minute:"numeric",second:"numeric",hour12:!0};break;case"fullTime12h":a={hour:"numeric",minute:"numeric",second:"numeric",hour12:!0};break;case"fullTime24h":a={hour:"numeric",minute:"numeric",second:"numeric",hour12:!1};break;case"fullDateTime":a={year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",hour12:!0};break;case"fullDateTime12h":a={year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",hour12:!0};break;case"fullDateTime24h":a={year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",hour12:!1};break;case"keyboardDate":a={year:"numeric",month:"2-digit",day:"2-digit"};break;case"keyboardDateTime":a={year:"numeric",month:"2-digit",day:"2-digit",hour:"numeric",minute:"numeric",second:"numeric",hour12:!1};break;case"keyboardDateTime12h":a={year:"numeric",month:"2-digit",day:"2-digit",hour:"numeric",minute:"numeric",second:"numeric",hour12:!0};break;case"keyboardDateTime24h":a={year:"numeric",month:"2-digit",day:"2-digit",hour:"numeric",minute:"numeric",second:"numeric",hour12:!1};break;default:a=s??{timeZone:"UTC",timeZoneName:"short"}}return new Intl.DateTimeFormat(r,a).format(i)}function Cke(t,e){const r=t.toJsDate(e),n=r.getFullYear(),i=oK(String(r.getMonth()+1),2,"0"),s=oK(String(r.getDate()),2,"0");return`${n}-${i}-${s}`}function Ike(t){const[e,r,n]=t.split("-").map(Number);return new Date(e,r-1,n)}function Rke(t,e){const r=new Date(t);return r.setMinutes(r.getMinutes()+e),r}function Pke(t,e){const r=new Date(t);return r.setHours(r.getHours()+e),r}function Bke(t,e){const r=new Date(t);return r.setDate(r.getDate()+e),r}function Dke(t,e){const r=new Date(t);return r.setDate(r.getDate()+e*7),r}function Oke(t,e){const r=new Date(t);return r.setDate(1),r.setMonth(r.getMonth()+e),r}function Nke(t){return t.getFullYear()}function Mke(t){return t.getMonth()}function Lke(t){return t.getDate()}function Fke(t){return new Date(t.getFullYear(),t.getMonth()+1,1)}function $ke(t){return new Date(t.getFullYear(),t.getMonth()-1,1)}function Uke(t){return t.getHours()}function Vke(t){return t.getMinutes()}function jke(t){return new Date(t.getFullYear(),0,1)}function zke(t){return new Date(t.getFullYear(),11,31)}function qke(t,e){return m7(t,e[0])&&Kke(t,e[1])}function Hke(t){const e=new Date(t);return e instanceof Date&&!isNaN(e.getTime())}function m7(t,e){return t.getTime()>e.getTime()}function Wke(t,e){return m7(_D(t),_D(e))}function Kke(t,e){return t.getTime()<e.getTime()}function kK(t,e){return t.getTime()===e.getTime()}function Gke(t,e){return t.getDate()===e.getDate()&&t.getMonth()===e.getMonth()&&t.getFullYear()===e.getFullYear()}function Yke(t,e){return t.getMonth()===e.getMonth()&&t.getFullYear()===e.getFullYear()}function Xke(t,e){return t.getFullYear()===e.getFullYear()}function Zke(t,e,r){const n=new Date(t),i=new Date(e);switch(r){case"years":return n.getFullYear()-i.getFullYear();case"quarters":return Math.floor((n.getMonth()-i.getMonth()+(n.getFullYear()-i.getFullYear())*12)/4);case"months":return n.getMonth()-i.getMonth()+(n.getFullYear()-i.getFullYear())*12;case"weeks":return Math.floor((n.getTime()-i.getTime())/(1e3*60*60*24*7));case"days":return Math.floor((n.getTime()-i.getTime())/(1e3*60*60*24));case"hours":return Math.floor((n.getTime()-i.getTime())/(1e3*60*60));case"minutes":return Math.floor((n.getTime()-i.getTime())/(1e3*60));case"seconds":return Math.floor((n.getTime()-i.getTime())/1e3);default:return n.getTime()-i.getTime()}}function Jke(t,e){const r=new Date(t);return r.setHours(e),r}function Qke(t,e){const r=new Date(t);return r.setMinutes(e),r}function eCe(t,e){const r=new Date(t);return r.setMonth(e),r}function tCe(t,e){const r=new Date(t);return r.setDate(e),r}function rCe(t,e){const r=new Date(t);return r.setFullYear(e),r}function _D(t){return new Date(t.getFullYear(),t.getMonth(),t.getDate(),0,0,0,0)}function nCe(t){return new Date(t.getFullYear(),t.getMonth(),t.getDate(),23,59,59,999)}class iCe{constructor(e){this.locale=e.locale,this.formats=e.formats}date(e){return fce(e)}toJsDate(e){return e}toISO(e){return Cke(this,e)}parseISO(e){return Ike(e)}addMinutes(e,r){return Rke(e,r)}addHours(e,r){return Pke(e,r)}addDays(e,r){return Bke(e,r)}addWeeks(e,r){return Dke(e,r)}addMonths(e,r){return Oke(e,r)}getWeekArray(e,r){return _ke(e,this.locale,r?Number(r):void 0)}startOfWeek(e,r){return xke(e,this.locale,r?Number(r):void 0)}endOfWeek(e){return Eke(e,this.locale)}startOfMonth(e){return lce(e)}endOfMonth(e){return uce(e)}format(e,r){return kke(e,r,this.locale,this.formats)}isEqual(e,r){return kK(e,r)}isValid(e){return Hke(e)}isWithinRange(e,r){return qke(e,r)}isAfter(e,r){return m7(e,r)}isAfterDay(e,r){return Wke(e,r)}isBefore(e,r){return!m7(e,r)&&!kK(e,r)}isSameDay(e,r){return Gke(e,r)}isSameMonth(e,r){return Yke(e,r)}isSameYear(e,r){return Xke(e,r)}setMinutes(e,r){return Qke(e,r)}setHours(e,r){return Jke(e,r)}setMonth(e,r){return eCe(e,r)}setDate(e,r){return tCe(e,r)}setYear(e,r){return rCe(e,r)}getDiff(e,r,n){return Zke(e,r,n)}getWeekdays(e){return Tke(this.locale,e?Number(e):void 0)}getYear(e){return Nke(e)}getMonth(e){return Mke(e)}getDate(e){return Lke(e)}getNextMonth(e){return Fke(e)}getPreviousMonth(e){return $ke(e)}getHours(e){return Uke(e)}getMinutes(e){return Vke(e)}startOfDay(e){return _D(e)}endOfDay(e){return nCe(e)}startOfYear(e){return jke(e)}endOfYear(e){return zke(e)}}const sCe=Symbol.for("vuetify:date-options"),CK=Symbol.for("vuetify:date-adapter");function aCe(t,e){const r=uo({adapter:iCe,locale:{af:"af-ZA",bg:"bg-BG",ca:"ca-ES",ckb:"",cs:"cs-CZ",de:"de-DE",el:"el-GR",en:"en-US",et:"et-EE",fa:"fa-IR",fi:"fi-FI",hr:"hr-HR",hu:"hu-HU",he:"he-IL",id:"id-ID",it:"it-IT",ja:"ja-JP",ko:"ko-KR",lv:"lv-LV",lt:"lt-LT",nl:"nl-NL",no:"no-NO",pl:"pl-PL",pt:"pt-PT",ro:"ro-RO",ru:"ru-RU",sk:"sk-SK",sl:"sl-SI",srCyrl:"sr-SP",srLatn:"sr-SP",sv:"sv-SE",th:"th-TH",tr:"tr-TR",az:"az-AZ",uk:"uk-UA",vi:"vi-VN",zhHans:"zh-CN",zhHant:"zh-TW"}},t);return{options:r,instance:oCe(r,e)}}function oCe(t,e){const r=Ps(typeof t.adapter=="function"?new t.adapter({locale:t.locale[e.current.value]??e.current.value,formats:t.formats}):t.adapter);return cr(e.current,n=>{r.locale=t.locale[n]??n??r.locale}),r}const cS=["sm","md","lg","xl","xxl"],xD=Symbol.for("vuetify:display"),IK={mobileBreakpoint:"lg",thresholds:{xs:0,sm:600,md:960,lg:1280,xl:1920,xxl:2560}},cCe=function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:IK;return uo(IK,t)};function RK(t){return qn&&!t?window.innerWidth:typeof t=="object"&&t.clientWidth||0}function PK(t){return qn&&!t?window.innerHeight:typeof t=="object"&&t.clientHeight||0}function BK(t){const e=qn&&!t?window.navigator.userAgent:"ssr";function r(g){return!!e.match(g)}const n=r(/android/i),i=r(/iphone|ipad|ipod/i),s=r(/cordova/i),a=r(/electron/i),o=r(/chrome/i),c=r(/edge/i),l=r(/firefox/i),u=r(/opera/i),f=r(/win/i),h=r(/mac/i),d=r(/linux/i);return{android:n,ios:i,cordova:s,electron:a,chrome:o,edge:c,firefox:l,opera:u,win:f,mac:h,linux:d,touch:ATe,ssr:e==="ssr"}}function lCe(t,e){const{thresholds:r,mobileBreakpoint:n}=cCe(t),i=ur(PK(e)),s=ur(BK(e)),a=Ps({}),o=ur(RK(e));function c(){i.value=PK(),o.value=RK()}function l(){c(),s.value=BK()}return Qs(()=>{const u=o.value<r.sm,f=o.value<r.md&&!u,h=o.value<r.lg&&!(f||u),d=o.value<r.xl&&!(h||f||u),g=o.value<r.xxl&&!(d||h||f||u),p=o.value>=r.xxl,m=u?"xs":f?"sm":h?"md":d?"lg":g?"xl":"xxl",y=typeof n=="number"?n:r[n],v=o.value<y;a.xs=u,a.sm=f,a.md=h,a.lg=d,a.xl=g,a.xxl=p,a.smAndUp=!u,a.mdAndUp=!(u||f),a.lgAndUp=!(u||f||h),a.xlAndUp=!(u||f||h||d),a.smAndDown=!(h||d||g||p),a.mdAndDown=!(d||g||p),a.lgAndDown=!(g||p),a.xlAndDown=!p,a.name=m,a.height=i.value,a.width=o.value,a.mobile=v,a.mobileBreakpoint=n,a.platform=s.value,a.thresholds=r}),qn&&window.addEventListener("resize",c,{passive:!0}),{...mL(a),update:l,ssr:!!e}}const uCe=_t({mobile:{type:Boolean,default:!1},mobileBreakpoint:[Number,String]},"display");function n0(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:hh();const r=Rr(xD);if(!r)throw new Error("Could not find Vuetify display injection");const n=Te(()=>{if(t.mobile!=null)return t.mobile;if(!t.mobileBreakpoint)return r.mobile.value;const s=typeof t.mobileBreakpoint=="number"?t.mobileBreakpoint:r.thresholds.value[t.mobileBreakpoint];return r.width.value<s}),i=Te(()=>e?{[`${e}--mobile`]:n.value}:{});return{...r,displayClasses:i,mobile:n}}const hce=Symbol.for("vuetify:goto");function dce(){return{container:void 0,duration:300,layout:!1,offset:0,easing:"easeInOutCubic",patterns:{linear:t=>t,easeInQuad:t=>t**2,easeOutQuad:t=>t*(2-t),easeInOutQuad:t=>t<.5?2*t**2:-1+(4-2*t)*t,easeInCubic:t=>t**3,easeOutCubic:t=>--t**3+1,easeInOutCubic:t=>t<.5?4*t**3:(t-1)*(2*t-2)*(2*t-2)+1,easeInQuart:t=>t**4,easeOutQuart:t=>1- --t**4,easeInOutQuart:t=>t<.5?8*t**4:1-8*--t**4,easeInQuint:t=>t**5,easeOutQuint:t=>1+--t**5,easeInOutQuint:t=>t<.5?16*t**5:1+16*--t**5}}}function fCe(t){return $L(t)??(document.scrollingElement||document.body)}function $L(t){return typeof t=="string"?document.querySelector(t):joe(t)}function nC(t,e,r){if(typeof t=="number")return e&&r?-t:t;let n=$L(t),i=0;for(;n;)i+=e?n.offsetLeft:n.offsetTop,n=n.offsetParent;return i}function hCe(t,e){return{rtl:e.isRtl,options:uo(dce(),t)}}async function DK(t,e,r,n){const i=r?"scrollLeft":"scrollTop",s=uo(n?.options??dce(),e),a=n?.rtl.value,o=(typeof t=="number"?t:$L(t))??0,c=s.container==="parent"&&o instanceof HTMLElement?o.parentElement:fCe(s.container),l=typeof s.easing=="function"?s.easing:s.patterns[s.easing];if(!l)throw new TypeError(`Easing function "${s.easing}" not found.`);let u;if(typeof o=="number")u=nC(o,r,a);else if(u=nC(o,r,a)-nC(c,r,a),s.layout){const g=window.getComputedStyle(o).getPropertyValue("--v-layout-top");g&&(u-=parseInt(g,10))}u+=s.offset,u=pCe(c,u,!!a,!!r);const f=c[i]??0;if(u===f)return Promise.resolve(u);const h=performance.now();return new Promise(d=>requestAnimationFrame(function g(p){const y=(p-h)/s.duration,v=Math.floor(f+(u-f)*l(Dd(y,0,1)));if(c[i]=v,y>=1&&Math.abs(v-c[i])<10)return d(u);if(y>2)return d(c[i]);requestAnimationFrame(g)}))}function dCe(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const e=Rr(hce),{isRtl:r}=Gl();if(!e)throw new Error("[Vuetify] Could not find injected goto instance");const n={...e,rtl:Te(()=>e.rtl.value||r.value)};async function i(s,a){return DK(s,uo(t,a),!1,n)}return i.horizontal=async(s,a)=>DK(s,uo(t,a),!0,n),i}function pCe(t,e,r,n){const{scrollWidth:i,scrollHeight:s}=t,[a,o]=t===document.scrollingElement?[window.innerWidth,window.innerHeight]:[t.offsetWidth,t.offsetHeight];let c,l;return n?r?(c=-(i-a),l=0):(c=0,l=i-a):(c=0,l=s+-o),Math.max(Math.min(e,l),c)}const gCe={collapse:"mdi-chevron-up",complete:"mdi-check",cancel:"mdi-close-circle",close:"mdi-close",delete:"mdi-close-circle",clear:"mdi-close-circle",success:"mdi-check-circle",info:"mdi-information",warning:"mdi-alert-circle",error:"mdi-close-circle",prev:"mdi-chevron-left",next:"mdi-chevron-right",checkboxOn:"mdi-checkbox-marked",checkboxOff:"mdi-checkbox-blank-outline",checkboxIndeterminate:"mdi-minus-box",delimiter:"mdi-circle",sortAsc:"mdi-arrow-up",sortDesc:"mdi-arrow-down",expand:"mdi-chevron-down",menu:"mdi-menu",subgroup:"mdi-menu-down",dropdown:"mdi-menu-down",radioOn:"mdi-radiobox-marked",radioOff:"mdi-radiobox-blank",edit:"mdi-pencil",ratingEmpty:"mdi-star-outline",ratingFull:"mdi-star",ratingHalf:"mdi-star-half-full",loading:"mdi-cached",first:"mdi-page-first",last:"mdi-page-last",unfold:"mdi-unfold-more-horizontal",file:"mdi-paperclip",plus:"mdi-plus",minus:"mdi-minus",calendar:"mdi-calendar",treeviewCollapse:"mdi-menu-down",treeviewExpand:"mdi-menu-right",eyeDropper:"mdi-eyedropper"},mCe={component:t=>Va(gce,{...t,class:"mdi"})},ri=[String,Function,Object,Array],ED=Symbol.for("vuetify:icons"),lS=_t({icon:{type:ri},tag:{type:String,required:!0}},"icon"),OK=Yt()({name:"VComponentIcon",props:lS(),setup(t,e){let{slots:r}=e;return()=>{const n=t.icon;return ue(t.tag,null,{default:()=>[t.icon?ue(n,null,null):r.default?.()]})}}}),pce=qv({name:"VSvgIcon",inheritAttrs:!1,props:lS(),setup(t,e){let{attrs:r}=e;return()=>ue(t.tag,gr(r,{style:null}),{default:()=>[ue("svg",{class:"v-icon__svg",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",role:"img","aria-hidden":"true"},[Array.isArray(t.icon)?t.icon.map(n=>Array.isArray(n)?ue("path",{d:n[0],"fill-opacity":n[1]},null):ue("path",{d:n},null)):ue("path",{d:t.icon},null)])]})}});qv({name:"VLigatureIcon",props:lS(),setup(t){return()=>ue(t.tag,null,{default:()=>[t.icon]})}});const gce=qv({name:"VClassIcon",props:lS(),setup(t){return()=>ue(t.tag,{class:t.icon},null)}});function yCe(){return{svg:{component:pce},class:{component:gce}}}function vCe(t){const e=yCe(),r=t?.defaultSet??"mdi";return r==="mdi"&&!e.mdi&&(e.mdi=mCe),uo({defaultSet:r,sets:e,aliases:{...gCe,vuetify:["M8.2241 14.2009L12 21L22 3H14.4459L8.2241 14.2009Z",["M7.26303 12.4733L7.00113 12L2 3H12.5261C12.5261 3 12.5261 3 12.5261 3L7.26303 12.4733Z",.6]],"vuetify-outline":"svg:M7.26 12.47 12.53 3H2L7.26 12.47ZM14.45 3 8.22 14.2 12 21 22 3H14.45ZM18.6 5 12 16.88 10.51 14.2 15.62 5ZM7.26 8.35 5.4 5H9.13L7.26 8.35Z","vuetify-play":["m6.376 13.184-4.11-7.192C1.505 4.66 2.467 3 4.003 3h8.532l-.953 1.576-.006.01-.396.677c-.429.732-.214 1.507.194 2.015.404.503 1.092.878 1.869.806a3.72 3.72 0 0 1 1.005.022c.276.053.434.143.523.237.138.146.38.635-.25 2.09-.893 1.63-1.553 1.722-1.847 1.677-.213-.033-.468-.158-.756-.406a4.95 4.95 0 0 1-.8-.927c-.39-.564-1.04-.84-1.66-.846-.625-.006-1.316.27-1.693.921l-.478.826-.911 1.506Z",["M9.093 11.552c.046-.079.144-.15.32-.148a.53.53 0 0 1 .43.207c.285.414.636.847 1.046 1.2.405.35.914.662 1.516.754 1.334.205 2.502-.698 3.48-2.495l.014-.028.013-.03c.687-1.574.774-2.852-.005-3.675-.37-.391-.861-.586-1.333-.676a5.243 5.243 0 0 0-1.447-.044c-.173.016-.393-.073-.54-.257-.145-.18-.127-.316-.082-.392l.393-.672L14.287 3h5.71c1.536 0 2.499 1.659 1.737 2.992l-7.997 13.996c-.768 1.344-2.706 1.344-3.473 0l-3.037-5.314 1.377-2.278.004-.006.004-.007.481-.831Z",.6]]}},t)}const bCe=t=>{const e=Rr(ED);if(!e)throw new Error("Missing Vuetify Icons provide!");return{iconData:Te(()=>{const n=ct(t);if(!n)return{component:OK};let i=n;if(typeof i=="string"&&(i=i.trim(),i.startsWith("$")&&(i=e.aliases?.[i.slice(1)])),Array.isArray(i))return{component:pce,icon:i};if(typeof i!="string")return{component:OK,icon:i};const s=Object.keys(e.sets).find(c=>typeof i=="string"&&i.startsWith(`${c}:`)),a=s?i.slice(s.length+1):i;return{component:e.sets[s??e.defaultSet].component,icon:a}})}},y7=Symbol.for("vuetify:theme"),$s=_t({theme:String},"theme");function NK(){return{defaultTheme:"light",variations:{colors:[],lighten:0,darken:0},themes:{light:{dark:!1,colors:{background:"#FFFFFF",surface:"#FFFFFF","surface-bright":"#FFFFFF","surface-light":"#EEEEEE","surface-variant":"#424242","on-surface-variant":"#EEEEEE",primary:"#1867C0","primary-darken-1":"#1F5592",secondary:"#48A9A6","secondary-darken-1":"#018786",error:"#B00020",info:"#2196F3",success:"#4CAF50",warning:"#FB8C00"},variables:{"border-color":"#000000","border-opacity":.12,"high-emphasis-opacity":.87,"medium-emphasis-opacity":.6,"disabled-opacity":.38,"idle-opacity":.04,"hover-opacity":.04,"focus-opacity":.12,"selected-opacity":.08,"activated-opacity":.12,"pressed-opacity":.12,"dragged-opacity":.08,"theme-kbd":"#212529","theme-on-kbd":"#FFFFFF","theme-code":"#F5F5F5","theme-on-code":"#000000"}},dark:{dark:!0,colors:{background:"#121212",surface:"#212121","surface-bright":"#ccbfd6","surface-light":"#424242","surface-variant":"#a3a3a3","on-surface-variant":"#424242",primary:"#2196F3","primary-darken-1":"#277CC1",secondary:"#54B6B2","secondary-darken-1":"#48A9A6",error:"#CF6679",info:"#2196F3",success:"#4CAF50",warning:"#FB8C00"},variables:{"border-color":"#FFFFFF","border-opacity":.12,"high-emphasis-opacity":1,"medium-emphasis-opacity":.7,"disabled-opacity":.5,"idle-opacity":.1,"hover-opacity":.04,"focus-opacity":.12,"selected-opacity":.08,"activated-opacity":.12,"pressed-opacity":.16,"dragged-opacity":.08,"theme-kbd":"#212529","theme-on-kbd":"#FFFFFF","theme-code":"#343434","theme-on-code":"#CCCCCC"}}}}}function wCe(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:NK();const e=NK();if(!t)return{...e,isDisabled:!0};const r={};for(const[n,i]of Object.entries(t.themes??{})){const s=i.dark||n==="dark"?e.themes?.dark:e.themes?.light;r[n]=uo(s,i)}return uo(e,{...t,themes:r})}function _Ce(t){const e=wCe(t),r=ht(e.defaultTheme),n=ht(e.themes),i=Te(()=>{const u={};for(const[f,h]of Object.entries(n.value)){const d=u[f]={...h,colors:{...h.colors}};if(e.variations)for(const g of e.variations.colors){const p=d.colors[g];if(p)for(const m of["lighten","darken"]){const y=m==="lighten"?rke:nke;for(const v of Voe(e.variations[m],1))d.colors[`${g}-${m}-${v}`]=QTe(y(Hf(p),v))}}for(const g of Object.keys(d.colors)){if(/^on-[a-z]/.test(g)||d.colors[`on-${g}`])continue;const p=`on-${g}`,m=Hf(d.colors[g]);d.colors[p]=rce(m)}}return u}),s=Te(()=>i.value[r.value]),a=Te(()=>{const u=[];s.value?.dark&&Ip(u,":root",["color-scheme: dark"]),Ip(u,":root",MK(s.value));for(const[g,p]of Object.entries(i.value))Ip(u,`.v-theme--${g}`,[`color-scheme: ${p.dark?"dark":"normal"}`,...MK(p)]);const f=[],h=[],d=new Set(Object.values(i.value).flatMap(g=>Object.keys(g.colors)));for(const g of d)/^on-[a-z]/.test(g)?Ip(h,`.${g}`,[`color: rgb(var(--v-theme-${g})) !important`]):(Ip(f,`.bg-${g}`,[`--v-theme-overlay-multiplier: var(--v-theme-${g}-overlay-multiplier)`,`background-color: rgb(var(--v-theme-${g})) !important`,`color: rgb(var(--v-theme-on-${g})) !important`]),Ip(h,`.text-${g}`,[`color: rgb(var(--v-theme-${g})) !important`]),Ip(h,`.border-${g}`,[`--v-border-color: var(--v-theme-${g})`]));return u.push(...f,...h),u.map((g,p)=>p===0?g:`    ${g}`).join("")});function o(){return{style:[{children:a.value,id:"vuetify-theme-stylesheet",nonce:e.cspNonce||!1}]}}function c(u){if(e.isDisabled)return;const f=u._context.provides.usehead;if(f)if(f.push){const h=f.push(o);qn&&cr(a,()=>{h.patch(o)})}else qn?(f.addHeadObjs(Te(o)),Qs(()=>f.updateDOM())):f.addHeadObjs(o());else{let d=function(){if(typeof document<"u"&&!h){const g=document.createElement("style");g.type="text/css",g.id="vuetify-theme-stylesheet",e.cspNonce&&g.setAttribute("nonce",e.cspNonce),h=g,document.head.appendChild(h)}h&&(h.innerHTML=a.value)},h=qn?document.getElementById("vuetify-theme-stylesheet"):null;qn?cr(a,d,{immediate:!0}):d()}}const l=Te(()=>e.isDisabled?void 0:`v-theme--${r.value}`);return{install:c,isDisabled:e.isDisabled,name:r,themes:n,current:s,computedThemes:i,themeClasses:l,styles:a,global:{name:r,current:s}}}function va(t){Fs("provideTheme");const e=Rr(y7,null);if(!e)throw new Error("Could not find Vuetify theme injection");const r=Te(()=>t.theme??e.name.value),n=Te(()=>e.themes.value[r.value]),i=Te(()=>e.isDisabled?void 0:`v-theme--${r.value}`),s={...e,name:r,current:n,themeClasses:i};return ui(y7,s),s}function Ip(t,e,r){t.push(`${e} {
`,...r.map(n=>`  ${n};
`),`}
`)}function MK(t){const e=t.dark?2:1,r=t.dark?1:2,n=[];for(const[i,s]of Object.entries(t.colors)){const a=Hf(s);n.push(`--v-theme-${i}: ${a.r},${a.g},${a.b}`),i.startsWith("on-")||n.push(`--v-theme-${i}-overlay-multiplier: ${ike(s)>.18?e:r}`)}for(const[i,s]of Object.entries(t.variables)){const a=typeof s=="string"&&s.startsWith("#")?Hf(s):void 0,o=a?`${a.r}, ${a.g}, ${a.b}`:void 0;n.push(`--v-${i}: ${o??s}`)}return n}function My(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"content";const r=vD(),n=ht();if(qn){const i=new ResizeObserver(s=>{s.length&&(e==="content"?n.value=s[0].contentRect:n.value=s[0].target.getBoundingClientRect())});bo(()=>{i.disconnect()}),cr(()=>r.el,(s,a)=>{a&&(i.unobserve(a),n.value=void 0),s&&i.observe(s)},{flush:"post"})}return{resizeRef:r,contentRect:J4(n)}}const SD=Symbol.for("vuetify:layout"),xCe=Symbol.for("vuetify:layout-item"),LK=1e3,ECe=_t({overlaps:{type:Array,default:()=>[]},fullHeight:Boolean},"layout");function SCe(){const t=Rr(SD);if(!t)throw new Error("[Vuetify] Could not find injected layout");return{getLayoutItem:t.getLayoutItem,mainRect:t.mainRect,mainStyles:t.mainStyles}}const ACe=(t,e,r,n)=>{let i={top:0,left:0,right:0,bottom:0};const s=[{id:"",layer:{...i}}];for(const a of t){const o=e.get(a),c=r.get(a),l=n.get(a);if(!o||!c||!l)continue;const u={...i,[o.value]:parseInt(i[o.value],10)+(l.value?parseInt(c.value,10):0)};s.push({id:a,layer:u}),i=u}return s};function TCe(t){const e=Rr(SD,null),r=Te(()=>e?e.rootZIndex.value-100:LK),n=ht([]),i=Ps(new Map),s=Ps(new Map),a=Ps(new Map),o=Ps(new Map),c=Ps(new Map),{resizeRef:l,contentRect:u}=My(),f=Te(()=>{const C=new Map,R=t.overlaps??[];for(const M of R.filter(N=>N.includes(":"))){const[N,Y]=M.split(":");if(!n.value.includes(N)||!n.value.includes(Y))continue;const H=i.get(N),E=i.get(Y),k=s.get(N),w=s.get(Y);!H||!E||!k||!w||(C.set(Y,{position:H.value,amount:parseInt(k.value,10)}),C.set(N,{position:E.value,amount:-parseInt(w.value,10)}))}return C}),h=Te(()=>{const C=[...new Set([...a.values()].map(M=>M.value))].sort((M,N)=>M-N),R=[];for(const M of C){const N=n.value.filter(Y=>a.get(Y)?.value===M);R.push(...N)}return ACe(R,i,s,o)}),d=Te(()=>!Array.from(c.values()).some(C=>C.value)),g=Te(()=>h.value[h.value.length-1].layer),p=Te(()=>({"--v-layout-left":br(g.value.left),"--v-layout-right":br(g.value.right),"--v-layout-top":br(g.value.top),"--v-layout-bottom":br(g.value.bottom),...d.value?void 0:{transition:"none"}})),m=Te(()=>h.value.slice(1).map((C,R)=>{let{id:M}=C;const{layer:N}=h.value[R],Y=s.get(M),H=i.get(M);return{id:M,...N,size:Number(Y.value),position:H.value}})),y=C=>m.value.find(R=>R.id===C),v=Fs("createLayout"),_=ur(!1);Ai(()=>{_.value=!0}),ui(SD,{register:(C,R)=>{let{id:M,order:N,position:Y,layoutSize:H,elementSize:E,active:k,disableTransitions:w,absolute:T}=R;a.set(M,N),i.set(M,Y),s.set(M,H),o.set(M,k),w&&c.set(M,w);const I=ty(xCe,v?.vnode).indexOf(C);I>-1?n.value.splice(I,0,M):n.value.push(M);const U=Te(()=>m.value.findIndex(B=>B.id===M)),O=Te(()=>r.value+h.value.length*2-U.value*2),D=Te(()=>{const B=Y.value==="left"||Y.value==="right",z=Y.value==="right",F=Y.value==="bottom",X=E.value??H.value,W=X===0?"%":"px",q={[Y.value]:0,zIndex:O.value,transform:`translate${B?"X":"Y"}(${(k.value?0:-(X===0?100:X))*(z||F?-1:1)}${W})`,position:T.value||r.value!==LK?"absolute":"fixed",...d.value?void 0:{transition:"none"}};if(!_.value)return q;const G=m.value[U.value];if(!G)throw new Error(`[Vuetify] Could not find layout item "${M}"`);const ee=f.value.get(M);return ee&&(G[ee.position]+=ee.amount),{...q,height:B?`calc(100% - ${G.top}px - ${G.bottom}px)`:E.value?`${E.value}px`:void 0,left:z?void 0:`${G.left}px`,right:z?`${G.right}px`:void 0,top:Y.value!=="bottom"?`${G.top}px`:void 0,bottom:Y.value!=="top"?`${G.bottom}px`:void 0,width:B?E.value?`${E.value}px`:void 0:`calc(100% - ${G.left}px - ${G.right}px)`}}),P=Te(()=>({zIndex:O.value-1}));return{layoutItemStyles:D,layoutItemScrimStyles:P,zIndex:O}},unregister:C=>{a.delete(C),i.delete(C),s.delete(C),o.delete(C),c.delete(C),n.value=n.value.filter(R=>R!==C)},mainRect:g,mainStyles:p,getLayoutItem:y,items:m,layoutRect:u,rootZIndex:r});const x=Te(()=>["v-layout",{"v-layout--full-height":t.fullHeight}]),A=Te(()=>({zIndex:e?r.value:void 0,position:e?"relative":void 0,overflow:e?"hidden":void 0}));return{layoutClasses:x,layoutStyles:A,getLayoutItem:y,items:m,layoutRect:u,layoutRef:l}}function mce(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{blueprint:e,...r}=t,n=uo(e,r),{aliases:i={},components:s={},directives:a={}}=n,o=ake(n.defaults),c=lCe(n.display,n.ssr),l=_Ce(n.theme),u=vCe(n.icons),f=mke(n.locale),h=aCe(n.date,f),d=hCe(n.goTo,f);return{install:p=>{for(const m in a)p.directive(m,a[m]);for(const m in s)p.component(m,s[m]);for(const m in i)p.component(m,qv({...i[m],name:m,aliasName:i[m].name}));if(l.install(p),p.provide(Oy,o),p.provide(xD,c),p.provide(y7,l),p.provide(ED,u),p.provide(Ny,f),p.provide(sCe,h.options),p.provide(CK,h.instance),p.provide(hce,d),qn&&n.ssr)if(p.$nuxt)p.$nuxt.hook("app:suspense:resolve",()=>{c.update()});else{const{mount:m}=p;p.mount=function(){const y=m(...arguments);return Bi(()=>c.update()),p.mount=m,y}}Zu.reset(),p.mixin({computed:{$vuetify(){return Ps({defaults:x2.call(this,Oy),display:x2.call(this,xD),theme:x2.call(this,y7),icons:x2.call(this,ED),locale:x2.call(this,Ny),date:x2.call(this,CK)})}}})},defaults:o,display:c,theme:l,icons:u,locale:f,date:h,goTo:d}}const kCe="3.7.2";mce.version=kCe;function x2(t){const e=this.$,r=e.parent?.provides??e.vnode.appContext?.provides;if(r&&t in r)return r[t]}const CCe=mce({});/*!
  * vue-router v4.4.5
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const K2=typeof document<"u";function yce(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function ICe(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&yce(t.default)}const Xn=Object.assign;function iC(t,e){const r={};for(const n in e){const i=e[n];r[n]=zu(i)?i.map(t):t(i)}return r}const f3=()=>{},zu=Array.isArray,vce=/#/g,RCe=/&/g,PCe=/\//g,BCe=/=/g,DCe=/\?/g,bce=/\+/g,OCe=/%5B/g,NCe=/%5D/g,wce=/%5E/g,MCe=/%60/g,_ce=/%7B/g,LCe=/%7C/g,xce=/%7D/g,FCe=/%20/g;function UL(t){return encodeURI(""+t).replace(LCe,"|").replace(OCe,"[").replace(NCe,"]")}function $Ce(t){return UL(t).replace(_ce,"{").replace(xce,"}").replace(wce,"^")}function AD(t){return UL(t).replace(bce,"%2B").replace(FCe,"+").replace(vce,"%23").replace(RCe,"%26").replace(MCe,"`").replace(_ce,"{").replace(xce,"}").replace(wce,"^")}function UCe(t){return AD(t).replace(BCe,"%3D")}function VCe(t){return UL(t).replace(vce,"%23").replace(DCe,"%3F")}function jCe(t){return t==null?"":VCe(t).replace(PCe,"%2F")}function e4(t){try{return decodeURIComponent(""+t)}catch{}return""+t}const zCe=/\/$/,qCe=t=>t.replace(zCe,"");function sC(t,e,r="/"){let n,i={},s="",a="";const o=e.indexOf("#");let c=e.indexOf("?");return o<c&&o>=0&&(c=-1),c>-1&&(n=e.slice(0,c),s=e.slice(c+1,o>-1?o:e.length),i=t(s)),o>-1&&(n=n||e.slice(0,o),a=e.slice(o,e.length)),n=GCe(n??e,r),{fullPath:n+(s&&"?")+s+a,path:n,query:i,hash:e4(a)}}function HCe(t,e){const r=e.query?t(e.query):"";return e.path+(r&&"?")+r+(e.hash||"")}function FK(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function WCe(t,e,r){const n=e.matched.length-1,i=r.matched.length-1;return n>-1&&n===i&&Ly(e.matched[n],r.matched[i])&&Ece(e.params,r.params)&&t(e.query)===t(r.query)&&e.hash===r.hash}function Ly(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function Ece(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const r in t)if(!KCe(t[r],e[r]))return!1;return!0}function KCe(t,e){return zu(t)?$K(t,e):zu(e)?$K(e,t):t===e}function $K(t,e){return zu(e)?t.length===e.length&&t.every((r,n)=>r===e[n]):t.length===1&&t[0]===e}function GCe(t,e){if(t.startsWith("/"))return t;if(!t)return e;const r=e.split("/"),n=t.split("/"),i=n[n.length-1];(i===".."||i===".")&&n.push("");let s=r.length-1,a,o;for(a=0;a<n.length;a++)if(o=n[a],o!==".")if(o==="..")s>1&&s--;else break;return r.slice(0,s).join("/")+"/"+n.slice(a).join("/")}const P0={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var t4;(function(t){t.pop="pop",t.push="push"})(t4||(t4={}));var h3;(function(t){t.back="back",t.forward="forward",t.unknown=""})(h3||(h3={}));function YCe(t){if(!t)if(K2){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),qCe(t)}const XCe=/^[^#]+#/;function ZCe(t,e){return t.replace(XCe,"#")+e}function JCe(t,e){const r=document.documentElement.getBoundingClientRect(),n=t.getBoundingClientRect();return{behavior:e.behavior,left:n.left-r.left-(e.left||0),top:n.top-r.top-(e.top||0)}}const uS=()=>({left:window.scrollX,top:window.scrollY});function QCe(t){let e;if("el"in t){const r=t.el,n=typeof r=="string"&&r.startsWith("#"),i=typeof r=="string"?n?document.getElementById(r.slice(1)):document.querySelector(r):r;if(!i)return;e=JCe(i,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function UK(t,e){return(history.state?history.state.position-e:-1)+t}const TD=new Map;function eIe(t,e){TD.set(t,e)}function tIe(t){const e=TD.get(t);return TD.delete(t),e}let rIe=()=>location.protocol+"//"+location.host;function Sce(t,e){const{pathname:r,search:n,hash:i}=e,s=t.indexOf("#");if(s>-1){let o=i.includes(t.slice(s))?t.slice(s).length:1,c=i.slice(o);return c[0]!=="/"&&(c="/"+c),FK(c,"")}return FK(r,t)+n+i}function nIe(t,e,r,n){let i=[],s=[],a=null;const o=({state:h})=>{const d=Sce(t,location),g=r.value,p=e.value;let m=0;if(h){if(r.value=d,e.value=h,a&&a===g){a=null;return}m=p?h.position-p.position:0}else n(d);i.forEach(y=>{y(r.value,g,{delta:m,type:t4.pop,direction:m?m>0?h3.forward:h3.back:h3.unknown})})};function c(){a=r.value}function l(h){i.push(h);const d=()=>{const g=i.indexOf(h);g>-1&&i.splice(g,1)};return s.push(d),d}function u(){const{history:h}=window;h.state&&h.replaceState(Xn({},h.state,{scroll:uS()}),"")}function f(){for(const h of s)h();s=[],window.removeEventListener("popstate",o),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",o),window.addEventListener("beforeunload",u,{passive:!0}),{pauseListeners:c,listen:l,destroy:f}}function VK(t,e,r,n=!1,i=!1){return{back:t,current:e,forward:r,replaced:n,position:window.history.length,scroll:i?uS():null}}function iIe(t){const{history:e,location:r}=window,n={value:Sce(t,r)},i={value:e.state};i.value||s(n.value,{back:null,current:n.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function s(c,l,u){const f=t.indexOf("#"),h=f>-1?(r.host&&document.querySelector("base")?t:t.slice(f))+c:rIe()+t+c;try{e[u?"replaceState":"pushState"](l,"",h),i.value=l}catch(d){console.error(d),r[u?"replace":"assign"](h)}}function a(c,l){const u=Xn({},e.state,VK(i.value.back,c,i.value.forward,!0),l,{position:i.value.position});s(c,u,!0),n.value=c}function o(c,l){const u=Xn({},i.value,e.state,{forward:c,scroll:uS()});s(u.current,u,!0);const f=Xn({},VK(n.value,c,null),{position:u.position+1},l);s(c,f,!1),n.value=c}return{location:n,state:i,push:o,replace:a}}function sIe(t){t=YCe(t);const e=iIe(t),r=nIe(t,e.state,e.location,e.replace);function n(s,a=!0){a||r.pauseListeners(),history.go(s)}const i=Xn({location:"",base:t,go:n,createHref:ZCe.bind(null,t)},e,r);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>e.state.value}),i}function aIe(t){return t=location.host?t||location.pathname+location.search:"",t.includes("#")||(t+="#"),sIe(t)}function oIe(t){return typeof t=="string"||t&&typeof t=="object"}function Ace(t){return typeof t=="string"||typeof t=="symbol"}const Tce=Symbol("");var jK;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(jK||(jK={}));function Fy(t,e){return Xn(new Error,{type:t,[Tce]:!0},e)}function Uh(t,e){return t instanceof Error&&Tce in t&&(e==null||!!(t.type&e))}const zK="[^/]+?",cIe={sensitive:!1,strict:!1,start:!0,end:!0},lIe=/[.+*?^${}()[\]/\\]/g;function uIe(t,e){const r=Xn({},cIe,e),n=[];let i=r.start?"^":"";const s=[];for(const l of t){const u=l.length?[]:[90];r.strict&&!l.length&&(i+="/");for(let f=0;f<l.length;f++){const h=l[f];let d=40+(r.sensitive?.25:0);if(h.type===0)f||(i+="/"),i+=h.value.replace(lIe,"\\$&"),d+=40;else if(h.type===1){const{value:g,repeatable:p,optional:m,regexp:y}=h;s.push({name:g,repeatable:p,optional:m});const v=y||zK;if(v!==zK){d+=10;try{new RegExp(`(${v})`)}catch(x){throw new Error(`Invalid custom RegExp for param "${g}" (${v}): `+x.message)}}let _=p?`((?:${v})(?:/(?:${v}))*)`:`(${v})`;f||(_=m&&l.length<2?`(?:/${_})`:"/"+_),m&&(_+="?"),i+=_,d+=20,m&&(d+=-8),p&&(d+=-20),v===".*"&&(d+=-50)}u.push(d)}n.push(u)}if(r.strict&&r.end){const l=n.length-1;n[l][n[l].length-1]+=.7000000000000001}r.strict||(i+="/?"),r.end?i+="$":r.strict&&(i+="(?:/|$)");const a=new RegExp(i,r.sensitive?"":"i");function o(l){const u=l.match(a),f={};if(!u)return null;for(let h=1;h<u.length;h++){const d=u[h]||"",g=s[h-1];f[g.name]=d&&g.repeatable?d.split("/"):d}return f}function c(l){let u="",f=!1;for(const h of t){(!f||!u.endsWith("/"))&&(u+="/"),f=!1;for(const d of h)if(d.type===0)u+=d.value;else if(d.type===1){const{value:g,repeatable:p,optional:m}=d,y=g in l?l[g]:"";if(zu(y)&&!p)throw new Error(`Provided param "${g}" is an array but it is not repeatable (* or + modifiers)`);const v=zu(y)?y.join("/"):y;if(!v)if(m)h.length<2&&(u.endsWith("/")?u=u.slice(0,-1):f=!0);else throw new Error(`Missing required param "${g}"`);u+=v}}return u||"/"}return{re:a,score:n,keys:s,parse:o,stringify:c}}function fIe(t,e){let r=0;for(;r<t.length&&r<e.length;){const n=e[r]-t[r];if(n)return n;r++}return t.length<e.length?t.length===1&&t[0]===80?-1:1:t.length>e.length?e.length===1&&e[0]===80?1:-1:0}function kce(t,e){let r=0;const n=t.score,i=e.score;for(;r<n.length&&r<i.length;){const s=fIe(n[r],i[r]);if(s)return s;r++}if(Math.abs(i.length-n.length)===1){if(qK(n))return 1;if(qK(i))return-1}return i.length-n.length}function qK(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const hIe={type:0,value:""},dIe=/[a-zA-Z0-9_]/;function pIe(t){if(!t)return[[]];if(t==="/")return[[hIe]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(d){throw new Error(`ERR (${r})/"${l}": ${d}`)}let r=0,n=r;const i=[];let s;function a(){s&&i.push(s),s=[]}let o=0,c,l="",u="";function f(){l&&(r===0?s.push({type:0,value:l}):r===1||r===2||r===3?(s.length>1&&(c==="*"||c==="+")&&e(`A repeatable param (${l}) must be alone in its segment. eg: '/:ids+.`),s.push({type:1,value:l,regexp:u,repeatable:c==="*"||c==="+",optional:c==="*"||c==="?"})):e("Invalid state to consume buffer"),l="")}function h(){l+=c}for(;o<t.length;){if(c=t[o++],c==="\\"&&r!==2){n=r,r=4;continue}switch(r){case 0:c==="/"?(l&&f(),a()):c===":"?(f(),r=1):h();break;case 4:h(),r=n;break;case 1:c==="("?r=2:dIe.test(c)?h():(f(),r=0,c!=="*"&&c!=="?"&&c!=="+"&&o--);break;case 2:c===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+c:r=3:u+=c;break;case 3:f(),r=0,c!=="*"&&c!=="?"&&c!=="+"&&o--,u="";break;default:e("Unknown state");break}}return r===2&&e(`Unfinished custom RegExp for param "${l}"`),f(),a(),i}function gIe(t,e,r){const n=uIe(pIe(t.path),r),i=Xn(n,{record:t,parent:e,children:[],alias:[]});return e&&!i.record.aliasOf==!e.record.aliasOf&&e.children.push(i),i}function mIe(t,e){const r=[],n=new Map;e=GK({strict:!1,end:!0,sensitive:!1},e);function i(f){return n.get(f)}function s(f,h,d){const g=!d,p=WK(f);p.aliasOf=d&&d.record;const m=GK(e,f),y=[p];if("alias"in f){const x=typeof f.alias=="string"?[f.alias]:f.alias;for(const A of x)y.push(WK(Xn({},p,{components:d?d.record.components:p.components,path:A,aliasOf:d?d.record:p})))}let v,_;for(const x of y){const{path:A}=x;if(h&&A[0]!=="/"){const C=h.record.path,R=C[C.length-1]==="/"?"":"/";x.path=h.record.path+(A&&R+A)}if(v=gIe(x,h,m),d?d.alias.push(v):(_=_||v,_!==v&&_.alias.push(v),g&&f.name&&!KK(v)&&a(f.name)),Cce(v)&&c(v),p.children){const C=p.children;for(let R=0;R<C.length;R++)s(C[R],v,d&&d.children[R])}d=d||v}return _?()=>{a(_)}:f3}function a(f){if(Ace(f)){const h=n.get(f);h&&(n.delete(f),r.splice(r.indexOf(h),1),h.children.forEach(a),h.alias.forEach(a))}else{const h=r.indexOf(f);h>-1&&(r.splice(h,1),f.record.name&&n.delete(f.record.name),f.children.forEach(a),f.alias.forEach(a))}}function o(){return r}function c(f){const h=bIe(f,r);r.splice(h,0,f),f.record.name&&!KK(f)&&n.set(f.record.name,f)}function l(f,h){let d,g={},p,m;if("name"in f&&f.name){if(d=n.get(f.name),!d)throw Fy(1,{location:f});m=d.record.name,g=Xn(HK(h.params,d.keys.filter(_=>!_.optional).concat(d.parent?d.parent.keys.filter(_=>_.optional):[]).map(_=>_.name)),f.params&&HK(f.params,d.keys.map(_=>_.name))),p=d.stringify(g)}else if(f.path!=null)p=f.path,d=r.find(_=>_.re.test(p)),d&&(g=d.parse(p),m=d.record.name);else{if(d=h.name?n.get(h.name):r.find(_=>_.re.test(h.path)),!d)throw Fy(1,{location:f,currentLocation:h});m=d.record.name,g=Xn({},h.params,f.params),p=d.stringify(g)}const y=[];let v=d;for(;v;)y.unshift(v.record),v=v.parent;return{name:m,path:p,params:g,matched:y,meta:vIe(y)}}t.forEach(f=>s(f));function u(){r.length=0,n.clear()}return{addRoute:s,resolve:l,removeRoute:a,clearRoutes:u,getRoutes:o,getRecordMatcher:i}}function HK(t,e){const r={};for(const n of e)n in t&&(r[n]=t[n]);return r}function WK(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:yIe(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function yIe(t){const e={},r=t.props||!1;if("component"in t)e.default=r;else for(const n in t.components)e[n]=typeof r=="object"?r[n]:r;return e}function KK(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function vIe(t){return t.reduce((e,r)=>Xn(e,r.meta),{})}function GK(t,e){const r={};for(const n in t)r[n]=n in e?e[n]:t[n];return r}function bIe(t,e){let r=0,n=e.length;for(;r!==n;){const s=r+n>>1;kce(t,e[s])<0?n=s:r=s+1}const i=wIe(t);return i&&(n=e.lastIndexOf(i,n-1)),n}function wIe(t){let e=t;for(;e=e.parent;)if(Cce(e)&&kce(t,e)===0)return e}function Cce({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function _Ie(t){const e={};if(t===""||t==="?")return e;const n=(t[0]==="?"?t.slice(1):t).split("&");for(let i=0;i<n.length;++i){const s=n[i].replace(bce," "),a=s.indexOf("="),o=e4(a<0?s:s.slice(0,a)),c=a<0?null:e4(s.slice(a+1));if(o in e){let l=e[o];zu(l)||(l=e[o]=[l]),l.push(c)}else e[o]=c}return e}function YK(t){let e="";for(let r in t){const n=t[r];if(r=UCe(r),n==null){n!==void 0&&(e+=(e.length?"&":"")+r);continue}(zu(n)?n.map(s=>s&&AD(s)):[n&&AD(n)]).forEach(s=>{s!==void 0&&(e+=(e.length?"&":"")+r,s!=null&&(e+="="+s))})}return e}function xIe(t){const e={};for(const r in t){const n=t[r];n!==void 0&&(e[r]=zu(n)?n.map(i=>i==null?null:""+i):n==null?n:""+n)}return e}const EIe=Symbol(""),XK=Symbol(""),VL=Symbol(""),Ice=Symbol(""),kD=Symbol("");function ew(){let t=[];function e(n){return t.push(n),()=>{const i=t.indexOf(n);i>-1&&t.splice(i,1)}}function r(){t=[]}return{add:e,list:()=>t.slice(),reset:r}}function n1(t,e,r,n,i,s=a=>a()){const a=n&&(n.enterCallbacks[i]=n.enterCallbacks[i]||[]);return()=>new Promise((o,c)=>{const l=h=>{h===!1?c(Fy(4,{from:r,to:e})):h instanceof Error?c(h):oIe(h)?c(Fy(2,{from:e,to:h})):(a&&n.enterCallbacks[i]===a&&typeof h=="function"&&a.push(h),o())},u=s(()=>t.call(n&&n.instances[i],e,r,l));let f=Promise.resolve(u);t.length<3&&(f=f.then(l)),f.catch(h=>c(h))})}function aC(t,e,r,n,i=s=>s()){const s=[];for(const a of t)for(const o in a.components){let c=a.components[o];if(!(e!=="beforeRouteEnter"&&!a.instances[o]))if(yce(c)){const u=(c.__vccOpts||c)[e];u&&s.push(n1(u,r,n,a,o,i))}else{let l=c();s.push(()=>l.then(u=>{if(!u)throw new Error(`Couldn't resolve component "${o}" at "${a.path}"`);const f=ICe(u)?u.default:u;a.mods[o]=u,a.components[o]=f;const d=(f.__vccOpts||f)[e];return d&&n1(d,r,n,a,o,i)()}))}}return s}function ZK(t){const e=Rr(VL),r=Rr(Ice),n=Te(()=>{const c=ct(t.to);return e.resolve(c)}),i=Te(()=>{const{matched:c}=n.value,{length:l}=c,u=c[l-1],f=r.matched;if(!u||!f.length)return-1;const h=f.findIndex(Ly.bind(null,u));if(h>-1)return h;const d=JK(c[l-2]);return l>1&&JK(u)===d&&f[f.length-1].path!==d?f.findIndex(Ly.bind(null,c[l-2])):h}),s=Te(()=>i.value>-1&&kIe(r.params,n.value.params)),a=Te(()=>i.value>-1&&i.value===r.matched.length-1&&Ece(r.params,n.value.params));function o(c={}){return TIe(c)?e[ct(t.replace)?"replace":"push"](ct(t.to)).catch(f3):Promise.resolve()}return{route:n,href:Te(()=>n.value.href),isActive:s,isExactActive:a,navigate:o}}const SIe=Di({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:ZK,setup(t,{slots:e}){const r=Ps(ZK(t)),{options:n}=Rr(VL),i=Te(()=>({[QK(t.activeClass,n.linkActiveClass,"router-link-active")]:r.isActive,[QK(t.exactActiveClass,n.linkExactActiveClass,"router-link-exact-active")]:r.isExactActive}));return()=>{const s=e.default&&e.default(r);return t.custom?s:Va("a",{"aria-current":r.isExactActive?t.ariaCurrentValue:null,href:r.href,onClick:r.navigate,class:i.value},s)}}}),AIe=SIe;function TIe(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function kIe(t,e){for(const r in e){const n=e[r],i=t[r];if(typeof n=="string"){if(n!==i)return!1}else if(!zu(i)||i.length!==n.length||n.some((s,a)=>s!==i[a]))return!1}return!0}function JK(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const QK=(t,e,r)=>t??e??r,CIe=Di({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:r}){const n=Rr(kD),i=Te(()=>t.route||n.value),s=Rr(XK,0),a=Te(()=>{let l=ct(s);const{matched:u}=i.value;let f;for(;(f=u[l])&&!f.components;)l++;return l}),o=Te(()=>i.value.matched[a.value]);ui(XK,Te(()=>a.value+1)),ui(EIe,o),ui(kD,i);const c=ht();return cr(()=>[c.value,o.value,t.name],([l,u,f],[h,d,g])=>{u&&(u.instances[f]=l,d&&d!==u&&l&&l===h&&(u.leaveGuards.size||(u.leaveGuards=d.leaveGuards),u.updateGuards.size||(u.updateGuards=d.updateGuards))),l&&u&&(!d||!Ly(u,d)||!h)&&(u.enterCallbacks[f]||[]).forEach(p=>p(l))},{flush:"post"}),()=>{const l=i.value,u=t.name,f=o.value,h=f&&f.components[u];if(!h)return eG(r.default,{Component:h,route:l});const d=f.props[u],g=d?d===!0?l.params:typeof d=="function"?d(l):d:null,m=Va(h,Xn({},g,e,{onVnodeUnmounted:y=>{y.component.isUnmounted&&(f.instances[u]=null)},ref:c}));return eG(r.default,{Component:m,route:l})||m}}});function eG(t,e){if(!t)return null;const r=t(e);return r.length===1?r[0]:r}const IIe=CIe;function RIe(t){const e=mIe(t.routes,t),r=t.parseQuery||_Ie,n=t.stringifyQuery||YK,i=t.history,s=ew(),a=ew(),o=ew(),c=ur(P0);let l=P0;K2&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=iC.bind(null,q=>""+q),f=iC.bind(null,jCe),h=iC.bind(null,e4);function d(q,G){let ee,ae;return Ace(q)?(ee=e.getRecordMatcher(q),ae=G):ae=q,e.addRoute(ae,ee)}function g(q){const G=e.getRecordMatcher(q);G&&e.removeRoute(G)}function p(){return e.getRoutes().map(q=>q.record)}function m(q){return!!e.getRecordMatcher(q)}function y(q,G){if(G=Xn({},G||c.value),typeof q=="string"){const V=sC(r,q,G.path),oe=e.resolve({path:V.path},G),he=i.createHref(V.fullPath);return Xn(V,oe,{params:h(oe.params),hash:e4(V.hash),redirectedFrom:void 0,href:he})}let ee;if(q.path!=null)ee=Xn({},q,{path:sC(r,q.path,G.path).path});else{const V=Xn({},q.params);for(const oe in V)V[oe]==null&&delete V[oe];ee=Xn({},q,{params:f(V)}),G.params=f(G.params)}const ae=e.resolve(ee,G),te=q.hash||"";ae.params=u(h(ae.params));const K=HCe(n,Xn({},q,{hash:$Ce(te),path:ae.path})),re=i.createHref(K);return Xn({fullPath:K,hash:te,query:n===YK?xIe(q.query):q.query||{}},ae,{redirectedFrom:void 0,href:re})}function v(q){return typeof q=="string"?sC(r,q,c.value.path):Xn({},q)}function _(q,G){if(l!==q)return Fy(8,{from:G,to:q})}function x(q){return R(q)}function A(q){return x(Xn(v(q),{replace:!0}))}function C(q){const G=q.matched[q.matched.length-1];if(G&&G.redirect){const{redirect:ee}=G;let ae=typeof ee=="function"?ee(q):ee;return typeof ae=="string"&&(ae=ae.includes("?")||ae.includes("#")?ae=v(ae):{path:ae},ae.params={}),Xn({query:q.query,hash:q.hash,params:ae.path!=null?{}:q.params},ae)}}function R(q,G){const ee=l=y(q),ae=c.value,te=q.state,K=q.force,re=q.replace===!0,V=C(ee);if(V)return R(Xn(v(V),{state:typeof V=="object"?Xn({},te,V.state):te,force:K,replace:re}),G||ee);const oe=ee;oe.redirectedFrom=G;let he;return!K&&WCe(n,ae,ee)&&(he=Fy(16,{to:oe,from:ae}),P(ae,ae,!0,!1)),(he?Promise.resolve(he):Y(oe,ae)).catch(ne=>Uh(ne)?Uh(ne,2)?ne:D(ne):U(ne,oe,ae)).then(ne=>{if(ne){if(Uh(ne,2))return R(Xn({replace:re},v(ne.to),{state:typeof ne.to=="object"?Xn({},te,ne.to.state):te,force:K}),G||oe)}else ne=E(oe,ae,!0,re,te);return H(oe,ae,ne),ne})}function M(q,G){const ee=_(q,G);return ee?Promise.reject(ee):Promise.resolve()}function N(q){const G=F.values().next().value;return G&&typeof G.runWithContext=="function"?G.runWithContext(q):q()}function Y(q,G){let ee;const[ae,te,K]=PIe(q,G);ee=aC(ae.reverse(),"beforeRouteLeave",q,G);for(const V of ae)V.leaveGuards.forEach(oe=>{ee.push(n1(oe,q,G))});const re=M.bind(null,q,G);return ee.push(re),W(ee).then(()=>{ee=[];for(const V of s.list())ee.push(n1(V,q,G));return ee.push(re),W(ee)}).then(()=>{ee=aC(te,"beforeRouteUpdate",q,G);for(const V of te)V.updateGuards.forEach(oe=>{ee.push(n1(oe,q,G))});return ee.push(re),W(ee)}).then(()=>{ee=[];for(const V of K)if(V.beforeEnter)if(zu(V.beforeEnter))for(const oe of V.beforeEnter)ee.push(n1(oe,q,G));else ee.push(n1(V.beforeEnter,q,G));return ee.push(re),W(ee)}).then(()=>(q.matched.forEach(V=>V.enterCallbacks={}),ee=aC(K,"beforeRouteEnter",q,G,N),ee.push(re),W(ee))).then(()=>{ee=[];for(const V of a.list())ee.push(n1(V,q,G));return ee.push(re),W(ee)}).catch(V=>Uh(V,8)?V:Promise.reject(V))}function H(q,G,ee){o.list().forEach(ae=>N(()=>ae(q,G,ee)))}function E(q,G,ee,ae,te){const K=_(q,G);if(K)return K;const re=G===P0,V=K2?history.state:{};ee&&(ae||re?i.replace(q.fullPath,Xn({scroll:re&&V&&V.scroll},te)):i.push(q.fullPath,te)),c.value=q,P(q,G,ee,re),D()}let k;function w(){k||(k=i.listen((q,G,ee)=>{if(!X.listening)return;const ae=y(q),te=C(ae);if(te){R(Xn(te,{replace:!0}),ae).catch(f3);return}l=ae;const K=c.value;K2&&eIe(UK(K.fullPath,ee.delta),uS()),Y(ae,K).catch(re=>Uh(re,12)?re:Uh(re,2)?(R(re.to,ae).then(V=>{Uh(V,20)&&!ee.delta&&ee.type===t4.pop&&i.go(-1,!1)}).catch(f3),Promise.reject()):(ee.delta&&i.go(-ee.delta,!1),U(re,ae,K))).then(re=>{re=re||E(ae,K,!1),re&&(ee.delta&&!Uh(re,8)?i.go(-ee.delta,!1):ee.type===t4.pop&&Uh(re,20)&&i.go(-1,!1)),H(ae,K,re)}).catch(f3)}))}let T=ew(),L=ew(),I;function U(q,G,ee){D(q);const ae=L.list();return ae.length?ae.forEach(te=>te(q,G,ee)):console.error(q),Promise.reject(q)}function O(){return I&&c.value!==P0?Promise.resolve():new Promise((q,G)=>{T.add([q,G])})}function D(q){return I||(I=!q,w(),T.list().forEach(([G,ee])=>q?ee(q):G()),T.reset()),q}function P(q,G,ee,ae){const{scrollBehavior:te}=t;if(!K2||!te)return Promise.resolve();const K=!ee&&tIe(UK(q.fullPath,0))||(ae||!ee)&&history.state&&history.state.scroll||null;return Bi().then(()=>te(q,G,K)).then(re=>re&&QCe(re)).catch(re=>U(re,q,G))}const B=q=>i.go(q);let z;const F=new Set,X={currentRoute:c,listening:!0,addRoute:d,removeRoute:g,clearRoutes:e.clearRoutes,hasRoute:m,getRoutes:p,resolve:y,options:t,push:x,replace:A,go:B,back:()=>B(-1),forward:()=>B(1),beforeEach:s.add,beforeResolve:a.add,afterEach:o.add,onError:L.add,isReady:O,install(q){const G=this;q.component("RouterLink",AIe),q.component("RouterView",IIe),q.config.globalProperties.$router=G,Object.defineProperty(q.config.globalProperties,"$route",{enumerable:!0,get:()=>ct(c)}),K2&&!z&&c.value===P0&&(z=!0,x(i.location).catch(te=>{}));const ee={};for(const te in P0)Object.defineProperty(ee,te,{get:()=>c.value[te],enumerable:!0});q.provide(VL,G),q.provide(Ice,Uae(ee)),q.provide(kD,c);const ae=q.unmount;F.add(q),q.unmount=function(){F.delete(q),F.size<1&&(l=P0,k&&k(),k=null,c.value=P0,z=!1,I=!1),ae()}}};function W(q){return q.reduce((G,ee)=>G.then(()=>N(ee)),Promise.resolve())}return X}function PIe(t,e){const r=[],n=[],i=[],s=Math.max(e.matched.length,t.matched.length);for(let a=0;a<s;a++){const o=e.matched[a];o&&(t.matched.find(l=>Ly(l,o))?n.push(o):r.push(o));const c=t.matched[a];c&&(e.matched.find(l=>Ly(l,c))||i.push(c))}return[r,n,i]}const BIe="modulepreload",DIe=function(t){return"/egu24/"+t},tG={},Ar=function(e,r,n){let i=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),o=a?.nonce||a?.getAttribute("nonce");i=Promise.allSettled(r.map(c=>{if(c=DIe(c),c in tG)return;tG[c]=!0;const l=c.endsWith(".css"),u=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const f=document.createElement("link");if(f.rel=l?"stylesheet":BIe,l||(f.as="script"),f.crossOrigin="",f.href=c,o&&f.setAttribute("nonce",o),document.head.appendChild(f),l)return new Promise((h,d)=>{f.addEventListener("load",h),f.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return i.then(a=>{for(const o of a||[])o.status==="rejected"&&s(o.reason);return e().catch(s)})},OIe="data:image/svg+xml,%3csvg%20id='Layer_1'%20data-name='Layer%201'%20xmlns='http://www.w3.org/2000/svg'%20height='220'%20width='400'%20viewBox='0%200%20200%20110'%3e%3cdefs%3e%3cstyle%3e.cls-1{fill:%231697f6;}.cls-2{fill:%237bc6ff;}.cls-3{fill:%231867c0;}.cls-4{fill:%23aeddff;}.l{stroke:rgb(255,255,255);stroke-width:0.5}%3c/style%3e%3c/defs%3e%3cline%20class='l'%20x1='70.1742129851985'%20y1='1.87'%20x2='34.3464829934943'%20y2='10.01'%20/%3e%3cline%20class='l'%20x1='67.306684713793'%20y1='16.47'%20x2='34.3464829934943'%20y2='10.01'%20/%3e%3cline%20class='l'%20x1='34.3464829934943'%20y1='10.01'%20x2='22.5783740121382'%20y2='31.93'%20/%3e%3cline%20class='l'%20x1='22.5783740121382'%20y1='31.93'%20x2='13.8115094092477'%20y2='56.91'%20/%3e%3cline%20class='l'%20x1='13.8115094092477'%20y1='56.91'%20x2='46.9376282583068'%20y2='69.76'%20/%3e%3cline%20class='l'%20x1='46.9376282583068'%20y1='69.76'%20x2='86.0040169410121'%20y2='61.32'%20/%3e%3cline%20class='l'%20x1='86.0040169410121'%20y1='61.32'%20x2='91.0120944854386'%20y2='54.13'%20/%3e%3cline%20class='l'%20x1='86.0040169410121'%20y1='61.32'%20x2='100.419159062132'%20y2='66.30'%20/%3e%3cline%20class='l'%20x1='91.0120944854386'%20y1='54.13'%20x2='112.68938567'%20y2='63.71'%20/%3e%3cline%20class='l'%20x1='100.419159062132'%20y1='66.30'%20x2='112.68938567'%20y2='63.71'%20/%3e%3cline%20class='l'%20x1='112.68938567'%20y1='63.71'%20x2='97.9593284722526'%20y2='84.10'%20/%3e%3cline%20class='l'%20x1='97.9593284722526'%20y1='84.10'%20x2='88.4938654324761'%20y2='82.18'%20/%3e%3cline%20class='l'%20x1='88.4938654324761'%20y1='82.18'%20x2='69.5525695323757'%20y2='90.44'%20/%3e%3cline%20class='l'%20x1='69.5525695323757'%20y1='90.44'%20x2='64.1411605466533'%20y2='94.60'%20/%3e%3cline%20class='l'%20x1='112.68938567'%20y1='63.71'%20x2='136.188490590752'%20y2='68.42'%20/%3e%3cline%20class='l'%20x1='136.188490590752'%20y1='68.42'%20x2='157.031284111252'%20y2='83.37'%20/%3e%3cline%20class='l'%20x1='136.188490590752'%20y1='68.42'%20x2='142.952888267913'%20y2='53.85'%20/%3e%3cline%20class='l'%20x1='112.68938567'%20y1='63.71'%20x2='142.952888267913'%20y2='53.85'%20/%3e%3cline%20class='l'%20x1='142.952888267913'%20y1='53.85'%20x2='137.021896694756'%20y2='38.01'%20/%3e%3cline%20class='l'%20x1='91.0120944854386'%20y1='54.13'%20x2='137.021896694756'%20y2='38.01'%20/%3e%3cline%20class='l'%20x1='137.021896694756'%20y1='38.01'%20x2='142.973627909008'%20y2='29.65'%20/%3e%3cline%20class='l'%20x1='137.021896694756'%20y1='38.01'%20x2='162.02953761516'%20y2='50.80'%20/%3e%3cline%20class='l'%20x1='142.952888267913'%20y1='53.85'%20x2='162.02953761516'%20y2='50.80'%20/%3e%3cline%20class='l'%20x1='162.02953761516'%20y1='50.80'%20x2='185.910142776055'%20y2='57.71'%20/%3e%3ccircle%20class='cls-1'%20cx='70.1742129851985'%20cy='1.87'%20r='2'/%3e%3ccircle%20class='cls-2'%20cx='67.306684713793'%20cy='16.47'%20r='5'/%3e%3ccircle%20class='cls-3'%20cx='34.3464829934943'%20cy='10.01'%20r='3'/%3e%3ccircle%20class='cls-4'%20cx='22.5783740121382'%20cy='31.93'%20r='3'/%3e%3ccircle%20class='cls-1'%20cx='13.8115094092477'%20cy='56.91'%20r='2'/%3e%3ccircle%20class='cls-2'%20cx='46.9376282583068'%20cy='69.76'%20r='6'/%3e%3ccircle%20class='cls-3'%20cx='86.0040169410121'%20cy='61.32'%20r='4'/%3e%3ccircle%20class='cls-4'%20cx='91.0120944854386'%20cy='54.13'%20r='2'/%3e%3ccircle%20class='cls-1'%20cx='112.68938567'%20cy='63.71'%20r='5'/%3e%3ccircle%20class='cls-2'%20cx='100.419159062132'%20cy='66.30'%20r='2'/%3e%3ccircle%20class='cls-3'%20cx='88.4938654324761'%20cy='82.18'%20r='4'/%3e%3ccircle%20class='cls-4'%20cx='97.9593284722526'%20cy='84.10'%20r='3'/%3e%3ccircle%20class='cls-1'%20cx='69.5525695323757'%20cy='90.44'%20r='5'/%3e%3ccircle%20class='cls-2'%20cx='64.1411605466533'%20cy='94.60'%20r='2'/%3e%3ccircle%20class='cls-3'%20cx='157.031284111252'%20cy='83.37'%20r='3'/%3e%3ccircle%20class='cls-4'%20cx='136.188490590752'%20cy='68.42'%20r='5'/%3e%3ccircle%20class='cls-1'%20cx='142.952888267913'%20cy='53.85'%20r='2'/%3e%3ccircle%20class='cls-2'%20cx='162.02953761516'%20cy='50.80'%20r='4'/%3e%3ccircle%20class='cls-3'%20cx='185.910142776055'%20cy='57.71'%20r='4'/%3e%3ccircle%20class='cls-4'%20cx='137.021896694756'%20cy='38.01'%20r='5'/%3e%3ccircle%20class='cls-1'%20cx='142.973627909008'%20cy='29.65'%20r='3'/%3e%3c/svg%3e";let T_;const NIe=new Uint8Array(16);function MIe(){if(!T_&&(T_=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!T_))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return T_(NIe)}const Ia=[];for(let t=0;t<256;++t)Ia.push((t+256).toString(16).slice(1));function LIe(t,e=0){return Ia[t[e+0]]+Ia[t[e+1]]+Ia[t[e+2]]+Ia[t[e+3]]+"-"+Ia[t[e+4]]+Ia[t[e+5]]+"-"+Ia[t[e+6]]+Ia[t[e+7]]+"-"+Ia[t[e+8]]+Ia[t[e+9]]+"-"+Ia[t[e+10]]+Ia[t[e+11]]+Ia[t[e+12]]+Ia[t[e+13]]+Ia[t[e+14]]+Ia[t[e+15]]}const FIe=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),rG={randomUUID:FIe};function $Ie(t,e,r){if(rG.randomUUID&&!e&&!t)return rG.randomUUID();t=t||{};const n=t.random||(t.rng||MIe)();return n[6]=n[6]&15|64,n[8]=n[8]&63|128,LIe(n)}var Uf=[],Rl=[],UIe=typeof Uint8Array<"u"?Uint8Array:Array,jL=!1;function Rce(){jL=!0;for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=0,r=t.length;e<r;++e)Uf[e]=t[e],Rl[t.charCodeAt(e)]=e;Rl[45]=62,Rl[95]=63}function VIe(t){jL||Rce();var e,r,n,i,s,a,o=t.length;if(o%4>0)throw new Error("Invalid string. Length must be a multiple of 4");s=t[o-2]==="="?2:t[o-1]==="="?1:0,a=new UIe(o*3/4-s),n=s>0?o-4:o;var c=0;for(e=0,r=0;e<n;e+=4,r+=3)i=Rl[t.charCodeAt(e)]<<18|Rl[t.charCodeAt(e+1)]<<12|Rl[t.charCodeAt(e+2)]<<6|Rl[t.charCodeAt(e+3)],a[c++]=i>>16&255,a[c++]=i>>8&255,a[c++]=i&255;return s===2?(i=Rl[t.charCodeAt(e)]<<2|Rl[t.charCodeAt(e+1)]>>4,a[c++]=i&255):s===1&&(i=Rl[t.charCodeAt(e)]<<10|Rl[t.charCodeAt(e+1)]<<4|Rl[t.charCodeAt(e+2)]>>2,a[c++]=i>>8&255,a[c++]=i&255),a}function jIe(t){return Uf[t>>18&63]+Uf[t>>12&63]+Uf[t>>6&63]+Uf[t&63]}function zIe(t,e,r){for(var n,i=[],s=e;s<r;s+=3)n=(t[s]<<16)+(t[s+1]<<8)+t[s+2],i.push(jIe(n));return i.join("")}function nG(t){jL||Rce();for(var e,r=t.length,n=r%3,i="",s=[],a=16383,o=0,c=r-n;o<c;o+=a)s.push(zIe(t,o,o+a>c?c:o+a));return n===1?(e=t[r-1],i+=Uf[e>>2],i+=Uf[e<<4&63],i+="=="):n===2&&(e=(t[r-2]<<8)+t[r-1],i+=Uf[e>>10],i+=Uf[e>>4&63],i+=Uf[e<<2&63],i+="="),s.push(i),s.join("")}function fS(t,e,r,n,i){var s,a,o=i*8-n-1,c=(1<<o)-1,l=c>>1,u=-7,f=r?i-1:0,h=r?-1:1,d=t[e+f];for(f+=h,s=d&(1<<-u)-1,d>>=-u,u+=o;u>0;s=s*256+t[e+f],f+=h,u-=8);for(a=s&(1<<-u)-1,s>>=-u,u+=n;u>0;a=a*256+t[e+f],f+=h,u-=8);if(s===0)s=1-l;else{if(s===c)return a?NaN:(d?-1:1)*(1/0);a=a+Math.pow(2,n),s=s-l}return(d?-1:1)*a*Math.pow(2,s-n)}function Pce(t,e,r,n,i,s){var a,o,c,l=s*8-i-1,u=(1<<l)-1,f=u>>1,h=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,d=n?0:s-1,g=n?1:-1,p=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(o=isNaN(e)?1:0,a=u):(a=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-a))<1&&(a--,c*=2),a+f>=1?e+=h/c:e+=h*Math.pow(2,1-f),e*c>=2&&(a++,c/=2),a+f>=u?(o=0,a=u):a+f>=1?(o=(e*c-1)*Math.pow(2,i),a=a+f):(o=e*Math.pow(2,f-1)*Math.pow(2,i),a=0));i>=8;t[r+d]=o&255,d+=g,o/=256,i-=8);for(a=a<<i|o,l+=i;l>0;t[r+d]=a&255,d+=g,a/=256,l-=8);t[r+d-g]|=p*128}var qIe={}.toString,Bce=Array.isArray||function(t){return qIe.call(t)=="[object Array]"};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */var HIe=50;We.TYPED_ARRAY_SUPPORT=Wo.TYPED_ARRAY_SUPPORT!==void 0?Wo.TYPED_ARRAY_SUPPORT:!0;v7();function v7(){return We.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function xd(t,e){if(v7()<e)throw new RangeError("Invalid typed array length");return We.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e),t.__proto__=We.prototype):(t===null&&(t=new We(e)),t.length=e),t}function We(t,e,r){if(!We.TYPED_ARRAY_SUPPORT&&!(this instanceof We))return new We(t,e,r);if(typeof t=="number"){if(typeof e=="string")throw new Error("If encoding is specified then the first argument must be a string");return zL(this,t)}return Dce(this,t,e,r)}We.poolSize=8192;We._augment=function(t){return t.__proto__=We.prototype,t};function Dce(t,e,r,n){if(typeof e=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer?GIe(t,e,r,n):typeof e=="string"?KIe(t,e,r):YIe(t,e)}We.from=function(t,e,r){return Dce(null,t,e,r)};We.TYPED_ARRAY_SUPPORT&&(We.prototype.__proto__=Uint8Array.prototype,We.__proto__=Uint8Array,typeof Symbol<"u"&&Symbol.species&&We[Symbol.species]);function Oce(t){if(typeof t!="number")throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function WIe(t,e,r,n){return Oce(e),e<=0?xd(t,e):r!==void 0?typeof n=="string"?xd(t,e).fill(r,n):xd(t,e).fill(r):xd(t,e)}We.alloc=function(t,e,r){return WIe(null,t,e,r)};function zL(t,e){if(Oce(e),t=xd(t,e<0?0:qL(e)|0),!We.TYPED_ARRAY_SUPPORT)for(var r=0;r<e;++r)t[r]=0;return t}We.allocUnsafe=function(t){return zL(null,t)};We.allocUnsafeSlow=function(t){return zL(null,t)};function KIe(t,e,r){if((typeof r!="string"||r==="")&&(r="utf8"),!We.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=Nce(e,r)|0;t=xd(t,n);var i=t.write(e,r);return i!==n&&(t=t.slice(0,i)),t}function CD(t,e){var r=e.length<0?0:qL(e.length)|0;t=xd(t,r);for(var n=0;n<r;n+=1)t[n]=e[n]&255;return t}function GIe(t,e,r,n){if(e.byteLength,r<0||e.byteLength<r)throw new RangeError("'offset' is out of bounds");if(e.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");return r===void 0&&n===void 0?e=new Uint8Array(e):n===void 0?e=new Uint8Array(e,r):e=new Uint8Array(e,r,n),We.TYPED_ARRAY_SUPPORT?(t=e,t.__proto__=We.prototype):t=CD(t,e),t}function YIe(t,e){if(ih(e)){var r=qL(e.length)|0;return t=xd(t,r),t.length===0||e.copy(t,0,0,r),t}if(e){if(typeof ArrayBuffer<"u"&&e.buffer instanceof ArrayBuffer||"length"in e)return typeof e.length!="number"||pRe(e.length)?xd(t,0):CD(t,e);if(e.type==="Buffer"&&Bce(e.data))return CD(t,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function qL(t){if(t>=v7())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+v7().toString(16)+" bytes");return t|0}We.isBuffer=gRe;function ih(t){return!!(t!=null&&t._isBuffer)}We.compare=function(e,r){if(!ih(e)||!ih(r))throw new TypeError("Arguments must be Buffers");if(e===r)return 0;for(var n=e.length,i=r.length,s=0,a=Math.min(n,i);s<a;++s)if(e[s]!==r[s]){n=e[s],i=r[s];break}return n<i?-1:i<n?1:0};We.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};We.concat=function(e,r){if(!Bce(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return We.alloc(0);var n;if(r===void 0)for(r=0,n=0;n<e.length;++n)r+=e[n].length;var i=We.allocUnsafe(r),s=0;for(n=0;n<e.length;++n){var a=e[n];if(!ih(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(i,s),s+=a.length}return i};function Nce(t,e){if(ih(t))return t.length;if(typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;typeof t!="string"&&(t=""+t);var r=t.length;if(r===0)return 0;for(var n=!1;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return b7(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return r*2;case"hex":return r>>>1;case"base64":return jce(t).length;default:if(n)return b7(t).length;e=(""+e).toLowerCase(),n=!0}}We.byteLength=Nce;function XIe(t,e,r){var n=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((r===void 0||r>this.length)&&(r=this.length),r<=0)||(r>>>=0,e>>>=0,r<=e))return"";for(t||(t="utf8");;)switch(t){case"hex":return aRe(this,e,r);case"utf8":case"utf-8":return Fce(this,e,r);case"ascii":return iRe(this,e,r);case"latin1":case"binary":return sRe(this,e,r);case"base64":return rRe(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return oRe(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}We.prototype._isBuffer=!0;function ug(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}We.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var r=0;r<e;r+=2)ug(this,r,r+1);return this};We.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var r=0;r<e;r+=4)ug(this,r,r+3),ug(this,r+1,r+2);return this};We.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var r=0;r<e;r+=8)ug(this,r,r+7),ug(this,r+1,r+6),ug(this,r+2,r+5),ug(this,r+3,r+4);return this};We.prototype.toString=function(){var e=this.length|0;return e===0?"":arguments.length===0?Fce(this,0,e):XIe.apply(this,arguments)};We.prototype.equals=function(e){if(!ih(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:We.compare(this,e)===0};We.prototype.inspect=function(){var e="",r=HIe;return this.length>0&&(e=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(e+=" ... ")),"<Buffer "+e+">"};We.prototype.compare=function(e,r,n,i,s){if(!ih(e))throw new TypeError("Argument must be a Buffer");if(r===void 0&&(r=0),n===void 0&&(n=e?e.length:0),i===void 0&&(i=0),s===void 0&&(s=this.length),r<0||n>e.length||i<0||s>this.length)throw new RangeError("out of range index");if(i>=s&&r>=n)return 0;if(i>=s)return-1;if(r>=n)return 1;if(r>>>=0,n>>>=0,i>>>=0,s>>>=0,this===e)return 0;for(var a=s-i,o=n-r,c=Math.min(a,o),l=this.slice(i,s),u=e.slice(r,n),f=0;f<c;++f)if(l[f]!==u[f]){a=l[f],o=u[f];break}return a<o?-1:o<a?1:0};function Mce(t,e,r,n,i){if(t.length===0)return-1;if(typeof r=="string"?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=i?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(i)return-1;r=t.length-1}else if(r<0)if(i)r=0;else return-1;if(typeof e=="string"&&(e=We.from(e,n)),ih(e))return e.length===0?-1:iG(t,e,r,n,i);if(typeof e=="number")return e=e&255,We.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?i?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):iG(t,[e],r,n,i);throw new TypeError("val must be string, number or Buffer")}function iG(t,e,r,n,i){var s=1,a=t.length,o=e.length;if(n!==void 0&&(n=String(n).toLowerCase(),n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le")){if(t.length<2||e.length<2)return-1;s=2,a/=2,o/=2,r/=2}function c(d,g){return s===1?d[g]:d.readUInt16BE(g*s)}var l;if(i){var u=-1;for(l=r;l<a;l++)if(c(t,l)===c(e,u===-1?0:l-u)){if(u===-1&&(u=l),l-u+1===o)return u*s}else u!==-1&&(l-=l-u),u=-1}else for(r+o>a&&(r=a-o),l=r;l>=0;l--){for(var f=!0,h=0;h<o;h++)if(c(t,l+h)!==c(e,h)){f=!1;break}if(f)return l}return-1}We.prototype.includes=function(e,r,n){return this.indexOf(e,r,n)!==-1};We.prototype.indexOf=function(e,r,n){return Mce(this,e,r,n,!0)};We.prototype.lastIndexOf=function(e,r,n){return Mce(this,e,r,n,!1)};function ZIe(t,e,r,n){r=Number(r)||0;var i=t.length-r;n?(n=Number(n),n>i&&(n=i)):n=i;var s=e.length;if(s%2!==0)throw new TypeError("Invalid hex string");n>s/2&&(n=s/2);for(var a=0;a<n;++a){var o=parseInt(e.substr(a*2,2),16);if(isNaN(o))return a;t[r+a]=o}return a}function JIe(t,e,r,n){return pS(b7(e,t.length-r),t,r,n)}function Lce(t,e,r,n){return pS(hRe(e),t,r,n)}function QIe(t,e,r,n){return Lce(t,e,r,n)}function eRe(t,e,r,n){return pS(jce(e),t,r,n)}function tRe(t,e,r,n){return pS(dRe(e,t.length-r),t,r,n)}We.prototype.write=function(e,r,n,i){if(r===void 0)i="utf8",n=this.length,r=0;else if(n===void 0&&typeof r=="string")i=r,n=this.length,r=0;else if(isFinite(r))r=r|0,isFinite(n)?(n=n|0,i===void 0&&(i="utf8")):(i=n,n=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var s=this.length-r;if((n===void 0||n>s)&&(n=s),e.length>0&&(n<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var a=!1;;)switch(i){case"hex":return ZIe(this,e,r,n);case"utf8":case"utf-8":return JIe(this,e,r,n);case"ascii":return Lce(this,e,r,n);case"latin1":case"binary":return QIe(this,e,r,n);case"base64":return eRe(this,e,r,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return tRe(this,e,r,n);default:if(a)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),a=!0}};We.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function rRe(t,e,r){return e===0&&r===t.length?nG(t):nG(t.slice(e,r))}function Fce(t,e,r){r=Math.min(t.length,r);for(var n=[],i=e;i<r;){var s=t[i],a=null,o=s>239?4:s>223?3:s>191?2:1;if(i+o<=r){var c,l,u,f;switch(o){case 1:s<128&&(a=s);break;case 2:c=t[i+1],(c&192)===128&&(f=(s&31)<<6|c&63,f>127&&(a=f));break;case 3:c=t[i+1],l=t[i+2],(c&192)===128&&(l&192)===128&&(f=(s&15)<<12|(c&63)<<6|l&63,f>2047&&(f<55296||f>57343)&&(a=f));break;case 4:c=t[i+1],l=t[i+2],u=t[i+3],(c&192)===128&&(l&192)===128&&(u&192)===128&&(f=(s&15)<<18|(c&63)<<12|(l&63)<<6|u&63,f>65535&&f<1114112&&(a=f))}}a===null?(a=65533,o=1):a>65535&&(a-=65536,n.push(a>>>10&1023|55296),a=56320|a&1023),n.push(a),i+=o}return nRe(n)}var sG=4096;function nRe(t){var e=t.length;if(e<=sG)return String.fromCharCode.apply(String,t);for(var r="",n=0;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=sG));return r}function iRe(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(t[i]&127);return n}function sRe(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(t[i]);return n}function aRe(t,e,r){var n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);for(var i="",s=e;s<r;++s)i+=fRe(t[s]);return i}function oRe(t,e,r){for(var n=t.slice(e,r),i="",s=0;s<n.length;s+=2)i+=String.fromCharCode(n[s]+n[s+1]*256);return i}We.prototype.slice=function(e,r){var n=this.length;e=~~e,r=r===void 0?n:~~r,e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),r<0?(r+=n,r<0&&(r=0)):r>n&&(r=n),r<e&&(r=e);var i;if(We.TYPED_ARRAY_SUPPORT)i=this.subarray(e,r),i.__proto__=We.prototype;else{var s=r-e;i=new We(s,void 0);for(var a=0;a<s;++a)i[a]=this[a+e]}return i};function ba(t,e,r){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}We.prototype.readUIntLE=function(e,r,n){e=e|0,r=r|0,n||ba(e,r,this.length);for(var i=this[e],s=1,a=0;++a<r&&(s*=256);)i+=this[e+a]*s;return i};We.prototype.readUIntBE=function(e,r,n){e=e|0,r=r|0,n||ba(e,r,this.length);for(var i=this[e+--r],s=1;r>0&&(s*=256);)i+=this[e+--r]*s;return i};We.prototype.readUInt8=function(e,r){return r||ba(e,1,this.length),this[e]};We.prototype.readUInt16LE=function(e,r){return r||ba(e,2,this.length),this[e]|this[e+1]<<8};We.prototype.readUInt16BE=function(e,r){return r||ba(e,2,this.length),this[e]<<8|this[e+1]};We.prototype.readUInt32LE=function(e,r){return r||ba(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216};We.prototype.readUInt32BE=function(e,r){return r||ba(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])};We.prototype.readIntLE=function(e,r,n){e=e|0,r=r|0,n||ba(e,r,this.length);for(var i=this[e],s=1,a=0;++a<r&&(s*=256);)i+=this[e+a]*s;return s*=128,i>=s&&(i-=Math.pow(2,8*r)),i};We.prototype.readIntBE=function(e,r,n){e=e|0,r=r|0,n||ba(e,r,this.length);for(var i=r,s=1,a=this[e+--i];i>0&&(s*=256);)a+=this[e+--i]*s;return s*=128,a>=s&&(a-=Math.pow(2,8*r)),a};We.prototype.readInt8=function(e,r){return r||ba(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]};We.prototype.readInt16LE=function(e,r){r||ba(e,2,this.length);var n=this[e]|this[e+1]<<8;return n&32768?n|4294901760:n};We.prototype.readInt16BE=function(e,r){r||ba(e,2,this.length);var n=this[e+1]|this[e]<<8;return n&32768?n|4294901760:n};We.prototype.readInt32LE=function(e,r){return r||ba(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24};We.prototype.readInt32BE=function(e,r){return r||ba(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]};We.prototype.readFloatLE=function(e,r){return r||ba(e,4,this.length),fS(this,e,!0,23,4)};We.prototype.readFloatBE=function(e,r){return r||ba(e,4,this.length),fS(this,e,!1,23,4)};We.prototype.readDoubleLE=function(e,r){return r||ba(e,8,this.length),fS(this,e,!0,52,8)};We.prototype.readDoubleBE=function(e,r){return r||ba(e,8,this.length),fS(this,e,!1,52,8)};function Bc(t,e,r,n,i,s){if(!ih(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<s)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}We.prototype.writeUIntLE=function(e,r,n,i){if(e=+e,r=r|0,n=n|0,!i){var s=Math.pow(2,8*n)-1;Bc(this,e,r,n,s,0)}var a=1,o=0;for(this[r]=e&255;++o<n&&(a*=256);)this[r+o]=e/a&255;return r+n};We.prototype.writeUIntBE=function(e,r,n,i){if(e=+e,r=r|0,n=n|0,!i){var s=Math.pow(2,8*n)-1;Bc(this,e,r,n,s,0)}var a=n-1,o=1;for(this[r+a]=e&255;--a>=0&&(o*=256);)this[r+a]=e/o&255;return r+n};We.prototype.writeUInt8=function(e,r,n){return e=+e,r=r|0,n||Bc(this,e,r,1,255,0),We.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[r]=e&255,r+1};function hS(t,e,r,n){e<0&&(e=65535+e+1);for(var i=0,s=Math.min(t.length-r,2);i<s;++i)t[r+i]=(e&255<<8*(n?i:1-i))>>>(n?i:1-i)*8}We.prototype.writeUInt16LE=function(e,r,n){return e=+e,r=r|0,n||Bc(this,e,r,2,65535,0),We.TYPED_ARRAY_SUPPORT?(this[r]=e&255,this[r+1]=e>>>8):hS(this,e,r,!0),r+2};We.prototype.writeUInt16BE=function(e,r,n){return e=+e,r=r|0,n||Bc(this,e,r,2,65535,0),We.TYPED_ARRAY_SUPPORT?(this[r]=e>>>8,this[r+1]=e&255):hS(this,e,r,!1),r+2};function dS(t,e,r,n){e<0&&(e=4294967295+e+1);for(var i=0,s=Math.min(t.length-r,4);i<s;++i)t[r+i]=e>>>(n?i:3-i)*8&255}We.prototype.writeUInt32LE=function(e,r,n){return e=+e,r=r|0,n||Bc(this,e,r,4,4294967295,0),We.TYPED_ARRAY_SUPPORT?(this[r+3]=e>>>24,this[r+2]=e>>>16,this[r+1]=e>>>8,this[r]=e&255):dS(this,e,r,!0),r+4};We.prototype.writeUInt32BE=function(e,r,n){return e=+e,r=r|0,n||Bc(this,e,r,4,4294967295,0),We.TYPED_ARRAY_SUPPORT?(this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=e&255):dS(this,e,r,!1),r+4};We.prototype.writeIntLE=function(e,r,n,i){if(e=+e,r=r|0,!i){var s=Math.pow(2,8*n-1);Bc(this,e,r,n,s-1,-s)}var a=0,o=1,c=0;for(this[r]=e&255;++a<n&&(o*=256);)e<0&&c===0&&this[r+a-1]!==0&&(c=1),this[r+a]=(e/o>>0)-c&255;return r+n};We.prototype.writeIntBE=function(e,r,n,i){if(e=+e,r=r|0,!i){var s=Math.pow(2,8*n-1);Bc(this,e,r,n,s-1,-s)}var a=n-1,o=1,c=0;for(this[r+a]=e&255;--a>=0&&(o*=256);)e<0&&c===0&&this[r+a+1]!==0&&(c=1),this[r+a]=(e/o>>0)-c&255;return r+n};We.prototype.writeInt8=function(e,r,n){return e=+e,r=r|0,n||Bc(this,e,r,1,127,-128),We.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[r]=e&255,r+1};We.prototype.writeInt16LE=function(e,r,n){return e=+e,r=r|0,n||Bc(this,e,r,2,32767,-32768),We.TYPED_ARRAY_SUPPORT?(this[r]=e&255,this[r+1]=e>>>8):hS(this,e,r,!0),r+2};We.prototype.writeInt16BE=function(e,r,n){return e=+e,r=r|0,n||Bc(this,e,r,2,32767,-32768),We.TYPED_ARRAY_SUPPORT?(this[r]=e>>>8,this[r+1]=e&255):hS(this,e,r,!1),r+2};We.prototype.writeInt32LE=function(e,r,n){return e=+e,r=r|0,n||Bc(this,e,r,4,2147483647,-2147483648),We.TYPED_ARRAY_SUPPORT?(this[r]=e&255,this[r+1]=e>>>8,this[r+2]=e>>>16,this[r+3]=e>>>24):dS(this,e,r,!0),r+4};We.prototype.writeInt32BE=function(e,r,n){return e=+e,r=r|0,n||Bc(this,e,r,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),We.TYPED_ARRAY_SUPPORT?(this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=e&255):dS(this,e,r,!1),r+4};function $ce(t,e,r,n,i,s){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function Uce(t,e,r,n,i){return i||$ce(t,e,r,4),Pce(t,e,r,n,23,4),r+4}We.prototype.writeFloatLE=function(e,r,n){return Uce(this,e,r,!0,n)};We.prototype.writeFloatBE=function(e,r,n){return Uce(this,e,r,!1,n)};function Vce(t,e,r,n,i){return i||$ce(t,e,r,8),Pce(t,e,r,n,52,8),r+8}We.prototype.writeDoubleLE=function(e,r,n){return Vce(this,e,r,!0,n)};We.prototype.writeDoubleBE=function(e,r,n){return Vce(this,e,r,!1,n)};We.prototype.copy=function(e,r,n,i){if(n||(n=0),!i&&i!==0&&(i=this.length),r>=e.length&&(r=e.length),r||(r=0),i>0&&i<n&&(i=n),i===n||e.length===0||this.length===0)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-r<i-n&&(i=e.length-r+n);var s=i-n,a;if(this===e&&n<r&&r<i)for(a=s-1;a>=0;--a)e[a+r]=this[a+n];else if(s<1e3||!We.TYPED_ARRAY_SUPPORT)for(a=0;a<s;++a)e[a+r]=this[a+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+s),r);return s};We.prototype.fill=function(e,r,n,i){if(typeof e=="string"){if(typeof r=="string"?(i=r,r=0,n=this.length):typeof n=="string"&&(i=n,n=this.length),e.length===1){var s=e.charCodeAt(0);s<256&&(e=s)}if(i!==void 0&&typeof i!="string")throw new TypeError("encoding must be a string");if(typeof i=="string"&&!We.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else typeof e=="number"&&(e=e&255);if(r<0||this.length<r||this.length<n)throw new RangeError("Out of range index");if(n<=r)return this;r=r>>>0,n=n===void 0?this.length:n>>>0,e||(e=0);var a;if(typeof e=="number")for(a=r;a<n;++a)this[a]=e;else{var o=ih(e)?e:b7(new We(e,i).toString()),c=o.length;for(a=0;a<n-r;++a)this[a+r]=o[a%c]}return this};var cRe=/[^+\/0-9A-Za-z-_]/g;function lRe(t){if(t=uRe(t).replace(cRe,""),t.length<2)return"";for(;t.length%4!==0;)t=t+"=";return t}function uRe(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function fRe(t){return t<16?"0"+t.toString(16):t.toString(16)}function b7(t,e){e=e||1/0;for(var r,n=t.length,i=null,s=[],a=0;a<n;++a){if(r=t.charCodeAt(a),r>55295&&r<57344){if(!i){if(r>56319){(e-=3)>-1&&s.push(239,191,189);continue}else if(a+1===n){(e-=3)>-1&&s.push(239,191,189);continue}i=r;continue}if(r<56320){(e-=3)>-1&&s.push(239,191,189),i=r;continue}r=(i-55296<<10|r-56320)+65536}else i&&(e-=3)>-1&&s.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;s.push(r)}else if(r<2048){if((e-=2)<0)break;s.push(r>>6|192,r&63|128)}else if(r<65536){if((e-=3)<0)break;s.push(r>>12|224,r>>6&63|128,r&63|128)}else if(r<1114112){if((e-=4)<0)break;s.push(r>>18|240,r>>12&63|128,r>>6&63|128,r&63|128)}else throw new Error("Invalid code point")}return s}function hRe(t){for(var e=[],r=0;r<t.length;++r)e.push(t.charCodeAt(r)&255);return e}function dRe(t,e){for(var r,n,i,s=[],a=0;a<t.length&&!((e-=2)<0);++a)r=t.charCodeAt(a),n=r>>8,i=r%256,s.push(i),s.push(n);return s}function jce(t){return VIe(lRe(t))}function pS(t,e,r,n){for(var i=0;i<n&&!(i+r>=e.length||i>=t.length);++i)e[i+r]=t[i];return i}function pRe(t){return t!==t}function gRe(t){return t!=null&&(!!t._isBuffer||zce(t)||mRe(t))}function zce(t){return!!t.constructor&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}function mRe(t){return typeof t.readFloatLE=="function"&&typeof t.slice=="function"&&zce(t.slice(0,0))}function qce(){throw new Error("setTimeout has not been defined")}function Hce(){throw new Error("clearTimeout has not been defined")}var Z0=qce,J0=Hce;typeof Wo.setTimeout=="function"&&(Z0=setTimeout);typeof Wo.clearTimeout=="function"&&(J0=clearTimeout);function Wce(t){if(Z0===setTimeout)return setTimeout(t,0);if((Z0===qce||!Z0)&&setTimeout)return Z0=setTimeout,setTimeout(t,0);try{return Z0(t,0)}catch{try{return Z0.call(null,t,0)}catch{return Z0.call(this,t,0)}}}function yRe(t){if(J0===clearTimeout)return clearTimeout(t);if((J0===Hce||!J0)&&clearTimeout)return J0=clearTimeout,clearTimeout(t);try{return J0(t)}catch{try{return J0.call(null,t)}catch{return J0.call(this,t)}}}var Ed=[],vy=!1,fg,vx=-1;function vRe(){!vy||!fg||(vy=!1,fg.length?Ed=fg.concat(Ed):vx=-1,Ed.length&&Kce())}function Kce(){if(!vy){var t=Wce(vRe);vy=!0;for(var e=Ed.length;e;){for(fg=Ed,Ed=[];++vx<e;)fg&&fg[vx].run();vx=-1,e=Ed.length}fg=null,vy=!1,yRe(t)}}function bRe(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];Ed.push(new Gce(t,e)),Ed.length===1&&!vy&&Wce(Kce)}function Gce(t,e){this.fun=t,this.array=e}Gce.prototype.run=function(){this.fun.apply(null,this.array)};var wRe="browser",_Re="browser",xRe=!0,ERe={},SRe=[],ARe="",TRe={},kRe={},CRe={};function km(){}var IRe=km,RRe=km,PRe=km,BRe=km,DRe=km,ORe=km,NRe=km;function MRe(t){throw new Error("process.binding is not supported")}function LRe(){return"/"}function FRe(t){throw new Error("process.chdir is not supported")}function $Re(){return 0}var G2=Wo.performance||{},URe=G2.now||G2.mozNow||G2.msNow||G2.oNow||G2.webkitNow||function(){return new Date().getTime()};function VRe(t){var e=URe.call(G2)*.001,r=Math.floor(e),n=Math.floor(e%1*1e9);return t&&(r=r-t[0],n=n-t[1],n<0&&(r--,n+=1e9)),[r,n]}var jRe=new Date;function zRe(){var t=new Date,e=t-jRe;return e/1e3}var Et={nextTick:bRe,title:wRe,browser:xRe,env:ERe,argv:SRe,version:ARe,versions:TRe,on:IRe,addListener:RRe,once:PRe,off:BRe,removeListener:DRe,removeAllListeners:ORe,emit:NRe,binding:MRe,cwd:LRe,chdir:FRe,umask:$Re,hrtime:VRe,platform:_Re,release:kRe,config:CRe,uptime:zRe};function $w(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Yce={exports:{}};(function(t,e){(function(r){t.exports=r()})(function(){return function r(n,i,s){function a(l,u){if(!i[l]){if(!n[l]){var f=typeof $w=="function"&&$w;if(!u&&f)return f(l,!0);if(o)return o(l,!0);var h=new Error("Cannot find module '"+l+"'");throw h.code="MODULE_NOT_FOUND",h}var d=i[l]={exports:{}};n[l][0].call(d.exports,function(g){var p=n[l][1][g];return a(p||g)},d,d.exports,r,n,i,s)}return i[l].exports}for(var o=typeof $w=="function"&&$w,c=0;c<s.length;c++)a(s[c]);return a}({1:[function(r,n,i){var s=r("./utils"),a=r("./support"),o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";i.encode=function(c){for(var l,u,f,h,d,g,p,m=[],y=0,v=c.length,_=v,x=s.getTypeOf(c)!=="string";y<c.length;)_=v-y,f=x?(l=c[y++],u=y<v?c[y++]:0,y<v?c[y++]:0):(l=c.charCodeAt(y++),u=y<v?c.charCodeAt(y++):0,y<v?c.charCodeAt(y++):0),h=l>>2,d=(3&l)<<4|u>>4,g=1<_?(15&u)<<2|f>>6:64,p=2<_?63&f:64,m.push(o.charAt(h)+o.charAt(d)+o.charAt(g)+o.charAt(p));return m.join("")},i.decode=function(c){var l,u,f,h,d,g,p=0,m=0,y="data:";if(c.substr(0,y.length)===y)throw new Error("Invalid base64 input, it looks like a data url.");var v,_=3*(c=c.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(c.charAt(c.length-1)===o.charAt(64)&&_--,c.charAt(c.length-2)===o.charAt(64)&&_--,_%1!=0)throw new Error("Invalid base64 input, bad content length.");for(v=a.uint8array?new Uint8Array(0|_):new Array(0|_);p<c.length;)l=o.indexOf(c.charAt(p++))<<2|(h=o.indexOf(c.charAt(p++)))>>4,u=(15&h)<<4|(d=o.indexOf(c.charAt(p++)))>>2,f=(3&d)<<6|(g=o.indexOf(c.charAt(p++))),v[m++]=l,d!==64&&(v[m++]=u),g!==64&&(v[m++]=f);return v}},{"./support":30,"./utils":32}],2:[function(r,n,i){var s=r("./external"),a=r("./stream/DataWorker"),o=r("./stream/Crc32Probe"),c=r("./stream/DataLengthProbe");function l(u,f,h,d,g){this.compressedSize=u,this.uncompressedSize=f,this.crc32=h,this.compression=d,this.compressedContent=g}l.prototype={getContentWorker:function(){var u=new a(s.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new c("data_length")),f=this;return u.on("end",function(){if(this.streamInfo.data_length!==f.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),u},getCompressedWorker:function(){return new a(s.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},l.createWorkerFrom=function(u,f,h){return u.pipe(new o).pipe(new c("uncompressedSize")).pipe(f.compressWorker(h)).pipe(new c("compressedSize")).withStreamInfo("compression",f)},n.exports=l},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(r,n,i){var s=r("./stream/GenericWorker");i.STORE={magic:"\0\0",compressWorker:function(){return new s("STORE compression")},uncompressWorker:function(){return new s("STORE decompression")}},i.DEFLATE=r("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(r,n,i){var s=r("./utils"),a=function(){for(var o,c=[],l=0;l<256;l++){o=l;for(var u=0;u<8;u++)o=1&o?3988292384^o>>>1:o>>>1;c[l]=o}return c}();n.exports=function(o,c){return o!==void 0&&o.length?s.getTypeOf(o)!=="string"?function(l,u,f,h){var d=a,g=h+f;l^=-1;for(var p=h;p<g;p++)l=l>>>8^d[255&(l^u[p])];return-1^l}(0|c,o,o.length,0):function(l,u,f,h){var d=a,g=h+f;l^=-1;for(var p=h;p<g;p++)l=l>>>8^d[255&(l^u.charCodeAt(p))];return-1^l}(0|c,o,o.length,0):0}},{"./utils":32}],5:[function(r,n,i){i.base64=!1,i.binary=!1,i.dir=!1,i.createFolders=!0,i.date=null,i.compression=null,i.compressionOptions=null,i.comment=null,i.unixPermissions=null,i.dosPermissions=null},{}],6:[function(r,n,i){var s=null;s=typeof Promise<"u"?Promise:r("lie"),n.exports={Promise:s}},{lie:37}],7:[function(r,n,i){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",a=r("pako"),o=r("./utils"),c=r("./stream/GenericWorker"),l=s?"uint8array":"array";function u(f,h){c.call(this,"FlateWorker/"+f),this._pako=null,this._pakoAction=f,this._pakoOptions=h,this.meta={}}i.magic="\b\0",o.inherits(u,c),u.prototype.processChunk=function(f){this.meta=f.meta,this._pako===null&&this._createPako(),this._pako.push(o.transformTo(l,f.data),!1)},u.prototype.flush=function(){c.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},u.prototype.cleanUp=function(){c.prototype.cleanUp.call(this),this._pako=null},u.prototype._createPako=function(){this._pako=new a[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var f=this;this._pako.onData=function(h){f.push({data:h,meta:f.meta})}},i.compressWorker=function(f){return new u("Deflate",f)},i.uncompressWorker=function(){return new u("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(r,n,i){function s(d,g){var p,m="";for(p=0;p<g;p++)m+=String.fromCharCode(255&d),d>>>=8;return m}function a(d,g,p,m,y,v){var _,x,A=d.file,C=d.compression,R=v!==l.utf8encode,M=o.transformTo("string",v(A.name)),N=o.transformTo("string",l.utf8encode(A.name)),Y=A.comment,H=o.transformTo("string",v(Y)),E=o.transformTo("string",l.utf8encode(Y)),k=N.length!==A.name.length,w=E.length!==Y.length,T="",L="",I="",U=A.dir,O=A.date,D={crc32:0,compressedSize:0,uncompressedSize:0};g&&!p||(D.crc32=d.crc32,D.compressedSize=d.compressedSize,D.uncompressedSize=d.uncompressedSize);var P=0;g&&(P|=8),R||!k&&!w||(P|=2048);var B=0,z=0;U&&(B|=16),y==="UNIX"?(z=798,B|=function(X,W){var q=X;return X||(q=W?16893:33204),(65535&q)<<16}(A.unixPermissions,U)):(z=20,B|=function(X){return 63&(X||0)}(A.dosPermissions)),_=O.getUTCHours(),_<<=6,_|=O.getUTCMinutes(),_<<=5,_|=O.getUTCSeconds()/2,x=O.getUTCFullYear()-1980,x<<=4,x|=O.getUTCMonth()+1,x<<=5,x|=O.getUTCDate(),k&&(L=s(1,1)+s(u(M),4)+N,T+="up"+s(L.length,2)+L),w&&(I=s(1,1)+s(u(H),4)+E,T+="uc"+s(I.length,2)+I);var F="";return F+=`
\0`,F+=s(P,2),F+=C.magic,F+=s(_,2),F+=s(x,2),F+=s(D.crc32,4),F+=s(D.compressedSize,4),F+=s(D.uncompressedSize,4),F+=s(M.length,2),F+=s(T.length,2),{fileRecord:f.LOCAL_FILE_HEADER+F+M+T,dirRecord:f.CENTRAL_FILE_HEADER+s(z,2)+F+s(H.length,2)+"\0\0\0\0"+s(B,4)+s(m,4)+M+T+H}}var o=r("../utils"),c=r("../stream/GenericWorker"),l=r("../utf8"),u=r("../crc32"),f=r("../signature");function h(d,g,p,m){c.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=g,this.zipPlatform=p,this.encodeFileName=m,this.streamFiles=d,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}o.inherits(h,c),h.prototype.push=function(d){var g=d.meta.percent||0,p=this.entriesCount,m=this._sources.length;this.accumulate?this.contentBuffer.push(d):(this.bytesWritten+=d.data.length,c.prototype.push.call(this,{data:d.data,meta:{currentFile:this.currentFile,percent:p?(g+100*(p-m-1))/p:100}}))},h.prototype.openedSource=function(d){this.currentSourceOffset=this.bytesWritten,this.currentFile=d.file.name;var g=this.streamFiles&&!d.file.dir;if(g){var p=a(d,g,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:p.fileRecord,meta:{percent:0}})}else this.accumulate=!0},h.prototype.closedSource=function(d){this.accumulate=!1;var g=this.streamFiles&&!d.file.dir,p=a(d,g,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(p.dirRecord),g)this.push({data:function(m){return f.DATA_DESCRIPTOR+s(m.crc32,4)+s(m.compressedSize,4)+s(m.uncompressedSize,4)}(d),meta:{percent:100}});else for(this.push({data:p.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},h.prototype.flush=function(){for(var d=this.bytesWritten,g=0;g<this.dirRecords.length;g++)this.push({data:this.dirRecords[g],meta:{percent:100}});var p=this.bytesWritten-d,m=function(y,v,_,x,A){var C=o.transformTo("string",A(x));return f.CENTRAL_DIRECTORY_END+"\0\0\0\0"+s(y,2)+s(y,2)+s(v,4)+s(_,4)+s(C.length,2)+C}(this.dirRecords.length,p,d,this.zipComment,this.encodeFileName);this.push({data:m,meta:{percent:100}})},h.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},h.prototype.registerPrevious=function(d){this._sources.push(d);var g=this;return d.on("data",function(p){g.processChunk(p)}),d.on("end",function(){g.closedSource(g.previous.streamInfo),g._sources.length?g.prepareNextSource():g.end()}),d.on("error",function(p){g.error(p)}),this},h.prototype.resume=function(){return!!c.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},h.prototype.error=function(d){var g=this._sources;if(!c.prototype.error.call(this,d))return!1;for(var p=0;p<g.length;p++)try{g[p].error(d)}catch{}return!0},h.prototype.lock=function(){c.prototype.lock.call(this);for(var d=this._sources,g=0;g<d.length;g++)d[g].lock()},n.exports=h},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(r,n,i){var s=r("../compressions"),a=r("./ZipFileWorker");i.generateWorker=function(o,c,l){var u=new a(c.streamFiles,l,c.platform,c.encodeFileName),f=0;try{o.forEach(function(h,d){f++;var g=function(v,_){var x=v||_,A=s[x];if(!A)throw new Error(x+" is not a valid compression method !");return A}(d.options.compression,c.compression),p=d.options.compressionOptions||c.compressionOptions||{},m=d.dir,y=d.date;d._compressWorker(g,p).withStreamInfo("file",{name:h,dir:m,date:y,comment:d.comment||"",unixPermissions:d.unixPermissions,dosPermissions:d.dosPermissions}).pipe(u)}),u.entriesCount=f}catch(h){u.error(h)}return u}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(r,n,i){function s(){if(!(this instanceof s))return new s;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var a=new s;for(var o in this)typeof this[o]!="function"&&(a[o]=this[o]);return a}}(s.prototype=r("./object")).loadAsync=r("./load"),s.support=r("./support"),s.defaults=r("./defaults"),s.version="3.10.1",s.loadAsync=function(a,o){return new s().loadAsync(a,o)},s.external=r("./external"),n.exports=s},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(r,n,i){var s=r("./utils"),a=r("./external"),o=r("./utf8"),c=r("./zipEntries"),l=r("./stream/Crc32Probe"),u=r("./nodejsUtils");function f(h){return new a.Promise(function(d,g){var p=h.decompressed.getContentWorker().pipe(new l);p.on("error",function(m){g(m)}).on("end",function(){p.streamInfo.crc32!==h.decompressed.crc32?g(new Error("Corrupted zip : CRC32 mismatch")):d()}).resume()})}n.exports=function(h,d){var g=this;return d=s.extend(d||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:o.utf8decode}),u.isNode&&u.isStream(h)?a.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):s.prepareContent("the loaded zip file",h,!0,d.optimizedBinaryString,d.base64).then(function(p){var m=new c(d);return m.load(p),m}).then(function(p){var m=[a.Promise.resolve(p)],y=p.files;if(d.checkCRC32)for(var v=0;v<y.length;v++)m.push(f(y[v]));return a.Promise.all(m)}).then(function(p){for(var m=p.shift(),y=m.files,v=0;v<y.length;v++){var _=y[v],x=_.fileNameStr,A=s.resolve(_.fileNameStr);g.file(A,_.decompressed,{binary:!0,optimizedBinaryString:!0,date:_.date,dir:_.dir,comment:_.fileCommentStr.length?_.fileCommentStr:null,unixPermissions:_.unixPermissions,dosPermissions:_.dosPermissions,createFolders:d.createFolders}),_.dir||(g.file(A).unsafeOriginalName=x)}return m.zipComment.length&&(g.comment=m.zipComment),g})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(r,n,i){var s=r("../utils"),a=r("../stream/GenericWorker");function o(c,l){a.call(this,"Nodejs stream input adapter for "+c),this._upstreamEnded=!1,this._bindStream(l)}s.inherits(o,a),o.prototype._bindStream=function(c){var l=this;(this._stream=c).pause(),c.on("data",function(u){l.push({data:u,meta:{percent:0}})}).on("error",function(u){l.isPaused?this.generatedError=u:l.error(u)}).on("end",function(){l.isPaused?l._upstreamEnded=!0:l.end()})},o.prototype.pause=function(){return!!a.prototype.pause.call(this)&&(this._stream.pause(),!0)},o.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},n.exports=o},{"../stream/GenericWorker":28,"../utils":32}],13:[function(r,n,i){var s=r("readable-stream").Readable;function a(o,c,l){s.call(this,c),this._helper=o;var u=this;o.on("data",function(f,h){u.push(f)||u._helper.pause(),l&&l(h)}).on("error",function(f){u.emit("error",f)}).on("end",function(){u.push(null)})}r("../utils").inherits(a,s),a.prototype._read=function(){this._helper.resume()},n.exports=a},{"../utils":32,"readable-stream":16}],14:[function(r,n,i){n.exports={isNode:typeof We<"u",newBufferFrom:function(s,a){if(We.from&&We.from!==Uint8Array.from)return We.from(s,a);if(typeof s=="number")throw new Error('The "data" argument must not be a number');return new We(s,a)},allocBuffer:function(s){if(We.alloc)return We.alloc(s);var a=new We(s);return a.fill(0),a},isBuffer:function(s){return We.isBuffer(s)},isStream:function(s){return s&&typeof s.on=="function"&&typeof s.pause=="function"&&typeof s.resume=="function"}}},{}],15:[function(r,n,i){function s(A,C,R){var M,N=o.getTypeOf(C),Y=o.extend(R||{},u);Y.date=Y.date||new Date,Y.compression!==null&&(Y.compression=Y.compression.toUpperCase()),typeof Y.unixPermissions=="string"&&(Y.unixPermissions=parseInt(Y.unixPermissions,8)),Y.unixPermissions&&16384&Y.unixPermissions&&(Y.dir=!0),Y.dosPermissions&&16&Y.dosPermissions&&(Y.dir=!0),Y.dir&&(A=y(A)),Y.createFolders&&(M=m(A))&&v.call(this,M,!0);var H=N==="string"&&Y.binary===!1&&Y.base64===!1;R&&R.binary!==void 0||(Y.binary=!H),(C instanceof f&&C.uncompressedSize===0||Y.dir||!C||C.length===0)&&(Y.base64=!1,Y.binary=!0,C="",Y.compression="STORE",N="string");var E=null;E=C instanceof f||C instanceof c?C:g.isNode&&g.isStream(C)?new p(A,C):o.prepareContent(A,C,Y.binary,Y.optimizedBinaryString,Y.base64);var k=new h(A,E,Y);this.files[A]=k}var a=r("./utf8"),o=r("./utils"),c=r("./stream/GenericWorker"),l=r("./stream/StreamHelper"),u=r("./defaults"),f=r("./compressedObject"),h=r("./zipObject"),d=r("./generate"),g=r("./nodejsUtils"),p=r("./nodejs/NodejsStreamInputAdapter"),m=function(A){A.slice(-1)==="/"&&(A=A.substring(0,A.length-1));var C=A.lastIndexOf("/");return 0<C?A.substring(0,C):""},y=function(A){return A.slice(-1)!=="/"&&(A+="/"),A},v=function(A,C){return C=C!==void 0?C:u.createFolders,A=y(A),this.files[A]||s.call(this,A,null,{dir:!0,createFolders:C}),this.files[A]};function _(A){return Object.prototype.toString.call(A)==="[object RegExp]"}var x={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(A){var C,R,M;for(C in this.files)M=this.files[C],(R=C.slice(this.root.length,C.length))&&C.slice(0,this.root.length)===this.root&&A(R,M)},filter:function(A){var C=[];return this.forEach(function(R,M){A(R,M)&&C.push(M)}),C},file:function(A,C,R){if(arguments.length!==1)return A=this.root+A,s.call(this,A,C,R),this;if(_(A)){var M=A;return this.filter(function(Y,H){return!H.dir&&M.test(Y)})}var N=this.files[this.root+A];return N&&!N.dir?N:null},folder:function(A){if(!A)return this;if(_(A))return this.filter(function(N,Y){return Y.dir&&A.test(N)});var C=this.root+A,R=v.call(this,C),M=this.clone();return M.root=R.name,M},remove:function(A){A=this.root+A;var C=this.files[A];if(C||(A.slice(-1)!=="/"&&(A+="/"),C=this.files[A]),C&&!C.dir)delete this.files[A];else for(var R=this.filter(function(N,Y){return Y.name.slice(0,A.length)===A}),M=0;M<R.length;M++)delete this.files[R[M].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(A){var C,R={};try{if((R=o.extend(A||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:a.utf8encode})).type=R.type.toLowerCase(),R.compression=R.compression.toUpperCase(),R.type==="binarystring"&&(R.type="string"),!R.type)throw new Error("No output type specified.");o.checkSupport(R.type),R.platform!=="darwin"&&R.platform!=="freebsd"&&R.platform!=="linux"&&R.platform!=="sunos"||(R.platform="UNIX"),R.platform==="win32"&&(R.platform="DOS");var M=R.comment||this.comment||"";C=d.generateWorker(this,R,M)}catch(N){(C=new c("error")).error(N)}return new l(C,R.type||"string",R.mimeType)},generateAsync:function(A,C){return this.generateInternalStream(A).accumulate(C)},generateNodeStream:function(A,C){return(A=A||{}).type||(A.type="nodebuffer"),this.generateInternalStream(A).toNodejsStream(C)}};n.exports=x},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(r,n,i){n.exports=r("stream")},{stream:void 0}],17:[function(r,n,i){var s=r("./DataReader");function a(o){s.call(this,o);for(var c=0;c<this.data.length;c++)o[c]=255&o[c]}r("../utils").inherits(a,s),a.prototype.byteAt=function(o){return this.data[this.zero+o]},a.prototype.lastIndexOfSignature=function(o){for(var c=o.charCodeAt(0),l=o.charCodeAt(1),u=o.charCodeAt(2),f=o.charCodeAt(3),h=this.length-4;0<=h;--h)if(this.data[h]===c&&this.data[h+1]===l&&this.data[h+2]===u&&this.data[h+3]===f)return h-this.zero;return-1},a.prototype.readAndCheckSignature=function(o){var c=o.charCodeAt(0),l=o.charCodeAt(1),u=o.charCodeAt(2),f=o.charCodeAt(3),h=this.readData(4);return c===h[0]&&l===h[1]&&u===h[2]&&f===h[3]},a.prototype.readData=function(o){if(this.checkOffset(o),o===0)return[];var c=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,c},n.exports=a},{"../utils":32,"./DataReader":18}],18:[function(r,n,i){var s=r("../utils");function a(o){this.data=o,this.length=o.length,this.index=0,this.zero=0}a.prototype={checkOffset:function(o){this.checkIndex(this.index+o)},checkIndex:function(o){if(this.length<this.zero+o||o<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+o+"). Corrupted zip ?")},setIndex:function(o){this.checkIndex(o),this.index=o},skip:function(o){this.setIndex(this.index+o)},byteAt:function(){},readInt:function(o){var c,l=0;for(this.checkOffset(o),c=this.index+o-1;c>=this.index;c--)l=(l<<8)+this.byteAt(c);return this.index+=o,l},readString:function(o){return s.transformTo("string",this.readData(o))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var o=this.readInt(4);return new Date(Date.UTC(1980+(o>>25&127),(o>>21&15)-1,o>>16&31,o>>11&31,o>>5&63,(31&o)<<1))}},n.exports=a},{"../utils":32}],19:[function(r,n,i){var s=r("./Uint8ArrayReader");function a(o){s.call(this,o)}r("../utils").inherits(a,s),a.prototype.readData=function(o){this.checkOffset(o);var c=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,c},n.exports=a},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(r,n,i){var s=r("./DataReader");function a(o){s.call(this,o)}r("../utils").inherits(a,s),a.prototype.byteAt=function(o){return this.data.charCodeAt(this.zero+o)},a.prototype.lastIndexOfSignature=function(o){return this.data.lastIndexOf(o)-this.zero},a.prototype.readAndCheckSignature=function(o){return o===this.readData(4)},a.prototype.readData=function(o){this.checkOffset(o);var c=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,c},n.exports=a},{"../utils":32,"./DataReader":18}],21:[function(r,n,i){var s=r("./ArrayReader");function a(o){s.call(this,o)}r("../utils").inherits(a,s),a.prototype.readData=function(o){if(this.checkOffset(o),o===0)return new Uint8Array(0);var c=this.data.subarray(this.zero+this.index,this.zero+this.index+o);return this.index+=o,c},n.exports=a},{"../utils":32,"./ArrayReader":17}],22:[function(r,n,i){var s=r("../utils"),a=r("../support"),o=r("./ArrayReader"),c=r("./StringReader"),l=r("./NodeBufferReader"),u=r("./Uint8ArrayReader");n.exports=function(f){var h=s.getTypeOf(f);return s.checkSupport(h),h!=="string"||a.uint8array?h==="nodebuffer"?new l(f):a.uint8array?new u(s.transformTo("uint8array",f)):new o(s.transformTo("array",f)):new c(f)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(r,n,i){i.LOCAL_FILE_HEADER="PK",i.CENTRAL_FILE_HEADER="PK",i.CENTRAL_DIRECTORY_END="PK",i.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",i.ZIP64_CENTRAL_DIRECTORY_END="PK",i.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(r,n,i){var s=r("./GenericWorker"),a=r("../utils");function o(c){s.call(this,"ConvertWorker to "+c),this.destType=c}a.inherits(o,s),o.prototype.processChunk=function(c){this.push({data:a.transformTo(this.destType,c.data),meta:c.meta})},n.exports=o},{"../utils":32,"./GenericWorker":28}],25:[function(r,n,i){var s=r("./GenericWorker"),a=r("../crc32");function o(){s.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}r("../utils").inherits(o,s),o.prototype.processChunk=function(c){this.streamInfo.crc32=a(c.data,this.streamInfo.crc32||0),this.push(c)},n.exports=o},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(r,n,i){var s=r("../utils"),a=r("./GenericWorker");function o(c){a.call(this,"DataLengthProbe for "+c),this.propName=c,this.withStreamInfo(c,0)}s.inherits(o,a),o.prototype.processChunk=function(c){if(c){var l=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=l+c.data.length}a.prototype.processChunk.call(this,c)},n.exports=o},{"../utils":32,"./GenericWorker":28}],27:[function(r,n,i){var s=r("../utils"),a=r("./GenericWorker");function o(c){a.call(this,"DataWorker");var l=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,c.then(function(u){l.dataIsReady=!0,l.data=u,l.max=u&&u.length||0,l.type=s.getTypeOf(u),l.isPaused||l._tickAndRepeat()},function(u){l.error(u)})}s.inherits(o,a),o.prototype.cleanUp=function(){a.prototype.cleanUp.call(this),this.data=null},o.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,s.delay(this._tickAndRepeat,[],this)),!0)},o.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(s.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},o.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var c=null,l=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":c=this.data.substring(this.index,l);break;case"uint8array":c=this.data.subarray(this.index,l);break;case"array":case"nodebuffer":c=this.data.slice(this.index,l)}return this.index=l,this.push({data:c,meta:{percent:this.max?this.index/this.max*100:0}})},n.exports=o},{"../utils":32,"./GenericWorker":28}],28:[function(r,n,i){function s(a){this.name=a||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}s.prototype={push:function(a){this.emit("data",a)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(a){this.emit("error",a)}return!0},error:function(a){return!this.isFinished&&(this.isPaused?this.generatedError=a:(this.isFinished=!0,this.emit("error",a),this.previous&&this.previous.error(a),this.cleanUp()),!0)},on:function(a,o){return this._listeners[a].push(o),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(a,o){if(this._listeners[a])for(var c=0;c<this._listeners[a].length;c++)this._listeners[a][c].call(this,o)},pipe:function(a){return a.registerPrevious(this)},registerPrevious:function(a){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=a.streamInfo,this.mergeStreamInfo(),this.previous=a;var o=this;return a.on("data",function(c){o.processChunk(c)}),a.on("end",function(){o.end()}),a.on("error",function(c){o.error(c)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var a=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),a=!0),this.previous&&this.previous.resume(),!a},flush:function(){},processChunk:function(a){this.push(a)},withStreamInfo:function(a,o){return this.extraStreamInfo[a]=o,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var a in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,a)&&(this.streamInfo[a]=this.extraStreamInfo[a])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var a="Worker "+this.name;return this.previous?this.previous+" -> "+a:a}},n.exports=s},{}],29:[function(r,n,i){var s=r("../utils"),a=r("./ConvertWorker"),o=r("./GenericWorker"),c=r("../base64"),l=r("../support"),u=r("../external"),f=null;if(l.nodestream)try{f=r("../nodejs/NodejsStreamOutputAdapter")}catch{}function h(g,p){return new u.Promise(function(m,y){var v=[],_=g._internalType,x=g._outputType,A=g._mimeType;g.on("data",function(C,R){v.push(C),p&&p(R)}).on("error",function(C){v=[],y(C)}).on("end",function(){try{var C=function(R,M,N){switch(R){case"blob":return s.newBlob(s.transformTo("arraybuffer",M),N);case"base64":return c.encode(M);default:return s.transformTo(R,M)}}(x,function(R,M){var N,Y=0,H=null,E=0;for(N=0;N<M.length;N++)E+=M[N].length;switch(R){case"string":return M.join("");case"array":return Array.prototype.concat.apply([],M);case"uint8array":for(H=new Uint8Array(E),N=0;N<M.length;N++)H.set(M[N],Y),Y+=M[N].length;return H;case"nodebuffer":return We.concat(M);default:throw new Error("concat : unsupported type '"+R+"'")}}(_,v),A);m(C)}catch(R){y(R)}v=[]}).resume()})}function d(g,p,m){var y=p;switch(p){case"blob":case"arraybuffer":y="uint8array";break;case"base64":y="string"}try{this._internalType=y,this._outputType=p,this._mimeType=m,s.checkSupport(y),this._worker=g.pipe(new a(y)),g.lock()}catch(v){this._worker=new o("error"),this._worker.error(v)}}d.prototype={accumulate:function(g){return h(this,g)},on:function(g,p){var m=this;return g==="data"?this._worker.on(g,function(y){p.call(m,y.data,y.meta)}):this._worker.on(g,function(){s.delay(p,arguments,m)}),this},resume:function(){return s.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(g){if(s.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new f(this,{objectMode:this._outputType!=="nodebuffer"},g)}},n.exports=d},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(r,n,i){if(i.base64=!0,i.array=!0,i.string=!0,i.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",i.nodebuffer=typeof We<"u",i.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")i.blob=!1;else{var s=new ArrayBuffer(0);try{i.blob=new Blob([s],{type:"application/zip"}).size===0}catch{try{var a=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);a.append(s),i.blob=a.getBlob("application/zip").size===0}catch{i.blob=!1}}}try{i.nodestream=!!r("readable-stream").Readable}catch{i.nodestream=!1}},{"readable-stream":16}],31:[function(r,n,i){for(var s=r("./utils"),a=r("./support"),o=r("./nodejsUtils"),c=r("./stream/GenericWorker"),l=new Array(256),u=0;u<256;u++)l[u]=252<=u?6:248<=u?5:240<=u?4:224<=u?3:192<=u?2:1;l[254]=l[254]=1;function f(){c.call(this,"utf-8 decode"),this.leftOver=null}function h(){c.call(this,"utf-8 encode")}i.utf8encode=function(d){return a.nodebuffer?o.newBufferFrom(d,"utf-8"):function(g){var p,m,y,v,_,x=g.length,A=0;for(v=0;v<x;v++)(64512&(m=g.charCodeAt(v)))==55296&&v+1<x&&(64512&(y=g.charCodeAt(v+1)))==56320&&(m=65536+(m-55296<<10)+(y-56320),v++),A+=m<128?1:m<2048?2:m<65536?3:4;for(p=a.uint8array?new Uint8Array(A):new Array(A),v=_=0;_<A;v++)(64512&(m=g.charCodeAt(v)))==55296&&v+1<x&&(64512&(y=g.charCodeAt(v+1)))==56320&&(m=65536+(m-55296<<10)+(y-56320),v++),m<128?p[_++]=m:(m<2048?p[_++]=192|m>>>6:(m<65536?p[_++]=224|m>>>12:(p[_++]=240|m>>>18,p[_++]=128|m>>>12&63),p[_++]=128|m>>>6&63),p[_++]=128|63&m);return p}(d)},i.utf8decode=function(d){return a.nodebuffer?s.transformTo("nodebuffer",d).toString("utf-8"):function(g){var p,m,y,v,_=g.length,x=new Array(2*_);for(p=m=0;p<_;)if((y=g[p++])<128)x[m++]=y;else if(4<(v=l[y]))x[m++]=65533,p+=v-1;else{for(y&=v===2?31:v===3?15:7;1<v&&p<_;)y=y<<6|63&g[p++],v--;1<v?x[m++]=65533:y<65536?x[m++]=y:(y-=65536,x[m++]=55296|y>>10&1023,x[m++]=56320|1023&y)}return x.length!==m&&(x.subarray?x=x.subarray(0,m):x.length=m),s.applyFromCharCode(x)}(d=s.transformTo(a.uint8array?"uint8array":"array",d))},s.inherits(f,c),f.prototype.processChunk=function(d){var g=s.transformTo(a.uint8array?"uint8array":"array",d.data);if(this.leftOver&&this.leftOver.length){if(a.uint8array){var p=g;(g=new Uint8Array(p.length+this.leftOver.length)).set(this.leftOver,0),g.set(p,this.leftOver.length)}else g=this.leftOver.concat(g);this.leftOver=null}var m=function(v,_){var x;for((_=_||v.length)>v.length&&(_=v.length),x=_-1;0<=x&&(192&v[x])==128;)x--;return x<0||x===0?_:x+l[v[x]]>_?x:_}(g),y=g;m!==g.length&&(a.uint8array?(y=g.subarray(0,m),this.leftOver=g.subarray(m,g.length)):(y=g.slice(0,m),this.leftOver=g.slice(m,g.length))),this.push({data:i.utf8decode(y),meta:d.meta})},f.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:i.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},i.Utf8DecodeWorker=f,s.inherits(h,c),h.prototype.processChunk=function(d){this.push({data:i.utf8encode(d.data),meta:d.meta})},i.Utf8EncodeWorker=h},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(r,n,i){var s=r("./support"),a=r("./base64"),o=r("./nodejsUtils"),c=r("./external");function l(p){return p}function u(p,m){for(var y=0;y<p.length;++y)m[y]=255&p.charCodeAt(y);return m}r("setimmediate"),i.newBlob=function(p,m){i.checkSupport("blob");try{return new Blob([p],{type:m})}catch{try{var y=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return y.append(p),y.getBlob(m)}catch{throw new Error("Bug : can't construct the Blob.")}}};var f={stringifyByChunk:function(p,m,y){var v=[],_=0,x=p.length;if(x<=y)return String.fromCharCode.apply(null,p);for(;_<x;)m==="array"||m==="nodebuffer"?v.push(String.fromCharCode.apply(null,p.slice(_,Math.min(_+y,x)))):v.push(String.fromCharCode.apply(null,p.subarray(_,Math.min(_+y,x)))),_+=y;return v.join("")},stringifyByChar:function(p){for(var m="",y=0;y<p.length;y++)m+=String.fromCharCode(p[y]);return m},applyCanBeUsed:{uint8array:function(){try{return s.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return s.nodebuffer&&String.fromCharCode.apply(null,o.allocBuffer(1)).length===1}catch{return!1}}()}};function h(p){var m=65536,y=i.getTypeOf(p),v=!0;if(y==="uint8array"?v=f.applyCanBeUsed.uint8array:y==="nodebuffer"&&(v=f.applyCanBeUsed.nodebuffer),v)for(;1<m;)try{return f.stringifyByChunk(p,y,m)}catch{m=Math.floor(m/2)}return f.stringifyByChar(p)}function d(p,m){for(var y=0;y<p.length;y++)m[y]=p[y];return m}i.applyFromCharCode=h;var g={};g.string={string:l,array:function(p){return u(p,new Array(p.length))},arraybuffer:function(p){return g.string.uint8array(p).buffer},uint8array:function(p){return u(p,new Uint8Array(p.length))},nodebuffer:function(p){return u(p,o.allocBuffer(p.length))}},g.array={string:h,array:l,arraybuffer:function(p){return new Uint8Array(p).buffer},uint8array:function(p){return new Uint8Array(p)},nodebuffer:function(p){return o.newBufferFrom(p)}},g.arraybuffer={string:function(p){return h(new Uint8Array(p))},array:function(p){return d(new Uint8Array(p),new Array(p.byteLength))},arraybuffer:l,uint8array:function(p){return new Uint8Array(p)},nodebuffer:function(p){return o.newBufferFrom(new Uint8Array(p))}},g.uint8array={string:h,array:function(p){return d(p,new Array(p.length))},arraybuffer:function(p){return p.buffer},uint8array:l,nodebuffer:function(p){return o.newBufferFrom(p)}},g.nodebuffer={string:h,array:function(p){return d(p,new Array(p.length))},arraybuffer:function(p){return g.nodebuffer.uint8array(p).buffer},uint8array:function(p){return d(p,new Uint8Array(p.length))},nodebuffer:l},i.transformTo=function(p,m){if(m=m||"",!p)return m;i.checkSupport(p);var y=i.getTypeOf(m);return g[y][p](m)},i.resolve=function(p){for(var m=p.split("/"),y=[],v=0;v<m.length;v++){var _=m[v];_==="."||_===""&&v!==0&&v!==m.length-1||(_===".."?y.pop():y.push(_))}return y.join("/")},i.getTypeOf=function(p){return typeof p=="string"?"string":Object.prototype.toString.call(p)==="[object Array]"?"array":s.nodebuffer&&o.isBuffer(p)?"nodebuffer":s.uint8array&&p instanceof Uint8Array?"uint8array":s.arraybuffer&&p instanceof ArrayBuffer?"arraybuffer":void 0},i.checkSupport=function(p){if(!s[p.toLowerCase()])throw new Error(p+" is not supported by this platform")},i.MAX_VALUE_16BITS=65535,i.MAX_VALUE_32BITS=-1,i.pretty=function(p){var m,y,v="";for(y=0;y<(p||"").length;y++)v+="\\x"+((m=p.charCodeAt(y))<16?"0":"")+m.toString(16).toUpperCase();return v},i.delay=function(p,m,y){setImmediate(function(){p.apply(y||null,m||[])})},i.inherits=function(p,m){function y(){}y.prototype=m.prototype,p.prototype=new y},i.extend=function(){var p,m,y={};for(p=0;p<arguments.length;p++)for(m in arguments[p])Object.prototype.hasOwnProperty.call(arguments[p],m)&&y[m]===void 0&&(y[m]=arguments[p][m]);return y},i.prepareContent=function(p,m,y,v,_){return c.Promise.resolve(m).then(function(x){return s.blob&&(x instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(x))!==-1)&&typeof FileReader<"u"?new c.Promise(function(A,C){var R=new FileReader;R.onload=function(M){A(M.target.result)},R.onerror=function(M){C(M.target.error)},R.readAsArrayBuffer(x)}):x}).then(function(x){var A=i.getTypeOf(x);return A?(A==="arraybuffer"?x=i.transformTo("uint8array",x):A==="string"&&(_?x=a.decode(x):y&&v!==!0&&(x=function(C){return u(C,s.uint8array?new Uint8Array(C.length):new Array(C.length))}(x))),x):c.Promise.reject(new Error("Can't read the data of '"+p+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(r,n,i){var s=r("./reader/readerFor"),a=r("./utils"),o=r("./signature"),c=r("./zipEntry"),l=r("./support");function u(f){this.files=[],this.loadOptions=f}u.prototype={checkSignature:function(f){if(!this.reader.readAndCheckSignature(f)){this.reader.index-=4;var h=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+a.pretty(h)+", expected "+a.pretty(f)+")")}},isSignature:function(f,h){var d=this.reader.index;this.reader.setIndex(f);var g=this.reader.readString(4)===h;return this.reader.setIndex(d),g},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var f=this.reader.readData(this.zipCommentLength),h=l.uint8array?"uint8array":"array",d=a.transformTo(h,f);this.zipComment=this.loadOptions.decodeFileName(d)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var f,h,d,g=this.zip64EndOfCentralSize-44;0<g;)f=this.reader.readInt(2),h=this.reader.readInt(4),d=this.reader.readData(h),this.zip64ExtensibleData[f]={id:f,length:h,value:d}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var f,h;for(f=0;f<this.files.length;f++)h=this.files[f],this.reader.setIndex(h.localHeaderOffset),this.checkSignature(o.LOCAL_FILE_HEADER),h.readLocalPart(this.reader),h.handleUTF8(),h.processAttributes()},readCentralDir:function(){var f;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(o.CENTRAL_FILE_HEADER);)(f=new c({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(f);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var f=this.reader.lastIndexOfSignature(o.CENTRAL_DIRECTORY_END);if(f<0)throw this.isSignature(0,o.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(f);var h=f;if(this.checkSignature(o.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===a.MAX_VALUE_16BITS||this.diskWithCentralDirStart===a.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===a.MAX_VALUE_16BITS||this.centralDirRecords===a.MAX_VALUE_16BITS||this.centralDirSize===a.MAX_VALUE_32BITS||this.centralDirOffset===a.MAX_VALUE_32BITS){if(this.zip64=!0,(f=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(f),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,o.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var d=this.centralDirOffset+this.centralDirSize;this.zip64&&(d+=20,d+=12+this.zip64EndOfCentralSize);var g=h-d;if(0<g)this.isSignature(h,o.CENTRAL_FILE_HEADER)||(this.reader.zero=g);else if(g<0)throw new Error("Corrupted zip: missing "+Math.abs(g)+" bytes.")},prepareReader:function(f){this.reader=s(f)},load:function(f){this.prepareReader(f),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},n.exports=u},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(r,n,i){var s=r("./reader/readerFor"),a=r("./utils"),o=r("./compressedObject"),c=r("./crc32"),l=r("./utf8"),u=r("./compressions"),f=r("./support");function h(d,g){this.options=d,this.loadOptions=g}h.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(d){var g,p;if(d.skip(22),this.fileNameLength=d.readInt(2),p=d.readInt(2),this.fileName=d.readData(this.fileNameLength),d.skip(p),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((g=function(m){for(var y in u)if(Object.prototype.hasOwnProperty.call(u,y)&&u[y].magic===m)return u[y];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+a.pretty(this.compressionMethod)+" unknown (inner file : "+a.transformTo("string",this.fileName)+")");this.decompressed=new o(this.compressedSize,this.uncompressedSize,this.crc32,g,d.readData(this.compressedSize))},readCentralPart:function(d){this.versionMadeBy=d.readInt(2),d.skip(2),this.bitFlag=d.readInt(2),this.compressionMethod=d.readString(2),this.date=d.readDate(),this.crc32=d.readInt(4),this.compressedSize=d.readInt(4),this.uncompressedSize=d.readInt(4);var g=d.readInt(2);if(this.extraFieldsLength=d.readInt(2),this.fileCommentLength=d.readInt(2),this.diskNumberStart=d.readInt(2),this.internalFileAttributes=d.readInt(2),this.externalFileAttributes=d.readInt(4),this.localHeaderOffset=d.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");d.skip(g),this.readExtraFields(d),this.parseZIP64ExtraField(d),this.fileComment=d.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var d=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),d==0&&(this.dosPermissions=63&this.externalFileAttributes),d==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var d=s(this.extraFields[1].value);this.uncompressedSize===a.MAX_VALUE_32BITS&&(this.uncompressedSize=d.readInt(8)),this.compressedSize===a.MAX_VALUE_32BITS&&(this.compressedSize=d.readInt(8)),this.localHeaderOffset===a.MAX_VALUE_32BITS&&(this.localHeaderOffset=d.readInt(8)),this.diskNumberStart===a.MAX_VALUE_32BITS&&(this.diskNumberStart=d.readInt(4))}},readExtraFields:function(d){var g,p,m,y=d.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});d.index+4<y;)g=d.readInt(2),p=d.readInt(2),m=d.readData(p),this.extraFields[g]={id:g,length:p,value:m};d.setIndex(y)},handleUTF8:function(){var d=f.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=l.utf8decode(this.fileName),this.fileCommentStr=l.utf8decode(this.fileComment);else{var g=this.findExtraFieldUnicodePath();if(g!==null)this.fileNameStr=g;else{var p=a.transformTo(d,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(p)}var m=this.findExtraFieldUnicodeComment();if(m!==null)this.fileCommentStr=m;else{var y=a.transformTo(d,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(y)}}},findExtraFieldUnicodePath:function(){var d=this.extraFields[28789];if(d){var g=s(d.value);return g.readInt(1)!==1||c(this.fileName)!==g.readInt(4)?null:l.utf8decode(g.readData(d.length-5))}return null},findExtraFieldUnicodeComment:function(){var d=this.extraFields[25461];if(d){var g=s(d.value);return g.readInt(1)!==1||c(this.fileComment)!==g.readInt(4)?null:l.utf8decode(g.readData(d.length-5))}return null}},n.exports=h},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(r,n,i){function s(g,p,m){this.name=g,this.dir=m.dir,this.date=m.date,this.comment=m.comment,this.unixPermissions=m.unixPermissions,this.dosPermissions=m.dosPermissions,this._data=p,this._dataBinary=m.binary,this.options={compression:m.compression,compressionOptions:m.compressionOptions}}var a=r("./stream/StreamHelper"),o=r("./stream/DataWorker"),c=r("./utf8"),l=r("./compressedObject"),u=r("./stream/GenericWorker");s.prototype={internalStream:function(g){var p=null,m="string";try{if(!g)throw new Error("No output type specified.");var y=(m=g.toLowerCase())==="string"||m==="text";m!=="binarystring"&&m!=="text"||(m="string"),p=this._decompressWorker();var v=!this._dataBinary;v&&!y&&(p=p.pipe(new c.Utf8EncodeWorker)),!v&&y&&(p=p.pipe(new c.Utf8DecodeWorker))}catch(_){(p=new u("error")).error(_)}return new a(p,m,"")},async:function(g,p){return this.internalStream(g).accumulate(p)},nodeStream:function(g,p){return this.internalStream(g||"nodebuffer").toNodejsStream(p)},_compressWorker:function(g,p){if(this._data instanceof l&&this._data.compression.magic===g.magic)return this._data.getCompressedWorker();var m=this._decompressWorker();return this._dataBinary||(m=m.pipe(new c.Utf8EncodeWorker)),l.createWorkerFrom(m,g,p)},_decompressWorker:function(){return this._data instanceof l?this._data.getContentWorker():this._data instanceof u?this._data:new o(this._data)}};for(var f=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],h=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},d=0;d<f.length;d++)s.prototype[f[d]]=h;n.exports=s},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(r,n,i){(function(s){var a,o,c=s.MutationObserver||s.WebKitMutationObserver;if(c){var l=0,u=new c(g),f=s.document.createTextNode("");u.observe(f,{characterData:!0}),a=function(){f.data=l=++l%2}}else if(s.setImmediate||s.MessageChannel===void 0)a="document"in s&&"onreadystatechange"in s.document.createElement("script")?function(){var p=s.document.createElement("script");p.onreadystatechange=function(){g(),p.onreadystatechange=null,p.parentNode.removeChild(p),p=null},s.document.documentElement.appendChild(p)}:function(){setTimeout(g,0)};else{var h=new s.MessageChannel;h.port1.onmessage=g,a=function(){h.port2.postMessage(0)}}var d=[];function g(){var p,m;o=!0;for(var y=d.length;y;){for(m=d,d=[],p=-1;++p<y;)m[p]();y=d.length}o=!1}n.exports=function(p){d.push(p)!==1||o||a()}}).call(this,typeof It<"u"?It:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(r,n,i){var s=r("immediate");function a(){}var o={},c=["REJECTED"],l=["FULFILLED"],u=["PENDING"];function f(y){if(typeof y!="function")throw new TypeError("resolver must be a function");this.state=u,this.queue=[],this.outcome=void 0,y!==a&&p(this,y)}function h(y,v,_){this.promise=y,typeof v=="function"&&(this.onFulfilled=v,this.callFulfilled=this.otherCallFulfilled),typeof _=="function"&&(this.onRejected=_,this.callRejected=this.otherCallRejected)}function d(y,v,_){s(function(){var x;try{x=v(_)}catch(A){return o.reject(y,A)}x===y?o.reject(y,new TypeError("Cannot resolve promise with itself")):o.resolve(y,x)})}function g(y){var v=y&&y.then;if(y&&(typeof y=="object"||typeof y=="function")&&typeof v=="function")return function(){v.apply(y,arguments)}}function p(y,v){var _=!1;function x(R){_||(_=!0,o.reject(y,R))}function A(R){_||(_=!0,o.resolve(y,R))}var C=m(function(){v(A,x)});C.status==="error"&&x(C.value)}function m(y,v){var _={};try{_.value=y(v),_.status="success"}catch(x){_.status="error",_.value=x}return _}(n.exports=f).prototype.finally=function(y){if(typeof y!="function")return this;var v=this.constructor;return this.then(function(_){return v.resolve(y()).then(function(){return _})},function(_){return v.resolve(y()).then(function(){throw _})})},f.prototype.catch=function(y){return this.then(null,y)},f.prototype.then=function(y,v){if(typeof y!="function"&&this.state===l||typeof v!="function"&&this.state===c)return this;var _=new this.constructor(a);return this.state!==u?d(_,this.state===l?y:v,this.outcome):this.queue.push(new h(_,y,v)),_},h.prototype.callFulfilled=function(y){o.resolve(this.promise,y)},h.prototype.otherCallFulfilled=function(y){d(this.promise,this.onFulfilled,y)},h.prototype.callRejected=function(y){o.reject(this.promise,y)},h.prototype.otherCallRejected=function(y){d(this.promise,this.onRejected,y)},o.resolve=function(y,v){var _=m(g,v);if(_.status==="error")return o.reject(y,_.value);var x=_.value;if(x)p(y,x);else{y.state=l,y.outcome=v;for(var A=-1,C=y.queue.length;++A<C;)y.queue[A].callFulfilled(v)}return y},o.reject=function(y,v){y.state=c,y.outcome=v;for(var _=-1,x=y.queue.length;++_<x;)y.queue[_].callRejected(v);return y},f.resolve=function(y){return y instanceof this?y:o.resolve(new this(a),y)},f.reject=function(y){var v=new this(a);return o.reject(v,y)},f.all=function(y){var v=this;if(Object.prototype.toString.call(y)!=="[object Array]")return this.reject(new TypeError("must be an array"));var _=y.length,x=!1;if(!_)return this.resolve([]);for(var A=new Array(_),C=0,R=-1,M=new this(a);++R<_;)N(y[R],R);return M;function N(Y,H){v.resolve(Y).then(function(E){A[H]=E,++C!==_||x||(x=!0,o.resolve(M,A))},function(E){x||(x=!0,o.reject(M,E))})}},f.race=function(y){var v=this;if(Object.prototype.toString.call(y)!=="[object Array]")return this.reject(new TypeError("must be an array"));var _=y.length,x=!1;if(!_)return this.resolve([]);for(var A=-1,C=new this(a);++A<_;)R=y[A],v.resolve(R).then(function(M){x||(x=!0,o.resolve(C,M))},function(M){x||(x=!0,o.reject(C,M))});var R;return C}},{immediate:36}],38:[function(r,n,i){var s={};(0,r("./lib/utils/common").assign)(s,r("./lib/deflate"),r("./lib/inflate"),r("./lib/zlib/constants")),n.exports=s},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(r,n,i){var s=r("./zlib/deflate"),a=r("./utils/common"),o=r("./utils/strings"),c=r("./zlib/messages"),l=r("./zlib/zstream"),u=Object.prototype.toString,f=0,h=-1,d=0,g=8;function p(y){if(!(this instanceof p))return new p(y);this.options=a.assign({level:h,method:g,chunkSize:16384,windowBits:15,memLevel:8,strategy:d,to:""},y||{});var v=this.options;v.raw&&0<v.windowBits?v.windowBits=-v.windowBits:v.gzip&&0<v.windowBits&&v.windowBits<16&&(v.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var _=s.deflateInit2(this.strm,v.level,v.method,v.windowBits,v.memLevel,v.strategy);if(_!==f)throw new Error(c[_]);if(v.header&&s.deflateSetHeader(this.strm,v.header),v.dictionary){var x;if(x=typeof v.dictionary=="string"?o.string2buf(v.dictionary):u.call(v.dictionary)==="[object ArrayBuffer]"?new Uint8Array(v.dictionary):v.dictionary,(_=s.deflateSetDictionary(this.strm,x))!==f)throw new Error(c[_]);this._dict_set=!0}}function m(y,v){var _=new p(v);if(_.push(y,!0),_.err)throw _.msg||c[_.err];return _.result}p.prototype.push=function(y,v){var _,x,A=this.strm,C=this.options.chunkSize;if(this.ended)return!1;x=v===~~v?v:v===!0?4:0,typeof y=="string"?A.input=o.string2buf(y):u.call(y)==="[object ArrayBuffer]"?A.input=new Uint8Array(y):A.input=y,A.next_in=0,A.avail_in=A.input.length;do{if(A.avail_out===0&&(A.output=new a.Buf8(C),A.next_out=0,A.avail_out=C),(_=s.deflate(A,x))!==1&&_!==f)return this.onEnd(_),!(this.ended=!0);A.avail_out!==0&&(A.avail_in!==0||x!==4&&x!==2)||(this.options.to==="string"?this.onData(o.buf2binstring(a.shrinkBuf(A.output,A.next_out))):this.onData(a.shrinkBuf(A.output,A.next_out)))}while((0<A.avail_in||A.avail_out===0)&&_!==1);return x===4?(_=s.deflateEnd(this.strm),this.onEnd(_),this.ended=!0,_===f):x!==2||(this.onEnd(f),!(A.avail_out=0))},p.prototype.onData=function(y){this.chunks.push(y)},p.prototype.onEnd=function(y){y===f&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=y,this.msg=this.strm.msg},i.Deflate=p,i.deflate=m,i.deflateRaw=function(y,v){return(v=v||{}).raw=!0,m(y,v)},i.gzip=function(y,v){return(v=v||{}).gzip=!0,m(y,v)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(r,n,i){var s=r("./zlib/inflate"),a=r("./utils/common"),o=r("./utils/strings"),c=r("./zlib/constants"),l=r("./zlib/messages"),u=r("./zlib/zstream"),f=r("./zlib/gzheader"),h=Object.prototype.toString;function d(p){if(!(this instanceof d))return new d(p);this.options=a.assign({chunkSize:16384,windowBits:0,to:""},p||{});var m=this.options;m.raw&&0<=m.windowBits&&m.windowBits<16&&(m.windowBits=-m.windowBits,m.windowBits===0&&(m.windowBits=-15)),!(0<=m.windowBits&&m.windowBits<16)||p&&p.windowBits||(m.windowBits+=32),15<m.windowBits&&m.windowBits<48&&!(15&m.windowBits)&&(m.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var y=s.inflateInit2(this.strm,m.windowBits);if(y!==c.Z_OK)throw new Error(l[y]);this.header=new f,s.inflateGetHeader(this.strm,this.header)}function g(p,m){var y=new d(m);if(y.push(p,!0),y.err)throw y.msg||l[y.err];return y.result}d.prototype.push=function(p,m){var y,v,_,x,A,C,R=this.strm,M=this.options.chunkSize,N=this.options.dictionary,Y=!1;if(this.ended)return!1;v=m===~~m?m:m===!0?c.Z_FINISH:c.Z_NO_FLUSH,typeof p=="string"?R.input=o.binstring2buf(p):h.call(p)==="[object ArrayBuffer]"?R.input=new Uint8Array(p):R.input=p,R.next_in=0,R.avail_in=R.input.length;do{if(R.avail_out===0&&(R.output=new a.Buf8(M),R.next_out=0,R.avail_out=M),(y=s.inflate(R,c.Z_NO_FLUSH))===c.Z_NEED_DICT&&N&&(C=typeof N=="string"?o.string2buf(N):h.call(N)==="[object ArrayBuffer]"?new Uint8Array(N):N,y=s.inflateSetDictionary(this.strm,C)),y===c.Z_BUF_ERROR&&Y===!0&&(y=c.Z_OK,Y=!1),y!==c.Z_STREAM_END&&y!==c.Z_OK)return this.onEnd(y),!(this.ended=!0);R.next_out&&(R.avail_out!==0&&y!==c.Z_STREAM_END&&(R.avail_in!==0||v!==c.Z_FINISH&&v!==c.Z_SYNC_FLUSH)||(this.options.to==="string"?(_=o.utf8border(R.output,R.next_out),x=R.next_out-_,A=o.buf2string(R.output,_),R.next_out=x,R.avail_out=M-x,x&&a.arraySet(R.output,R.output,_,x,0),this.onData(A)):this.onData(a.shrinkBuf(R.output,R.next_out)))),R.avail_in===0&&R.avail_out===0&&(Y=!0)}while((0<R.avail_in||R.avail_out===0)&&y!==c.Z_STREAM_END);return y===c.Z_STREAM_END&&(v=c.Z_FINISH),v===c.Z_FINISH?(y=s.inflateEnd(this.strm),this.onEnd(y),this.ended=!0,y===c.Z_OK):v!==c.Z_SYNC_FLUSH||(this.onEnd(c.Z_OK),!(R.avail_out=0))},d.prototype.onData=function(p){this.chunks.push(p)},d.prototype.onEnd=function(p){p===c.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=p,this.msg=this.strm.msg},i.Inflate=d,i.inflate=g,i.inflateRaw=function(p,m){return(m=m||{}).raw=!0,g(p,m)},i.ungzip=g},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(r,n,i){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";i.assign=function(c){for(var l=Array.prototype.slice.call(arguments,1);l.length;){var u=l.shift();if(u){if(typeof u!="object")throw new TypeError(u+"must be non-object");for(var f in u)u.hasOwnProperty(f)&&(c[f]=u[f])}}return c},i.shrinkBuf=function(c,l){return c.length===l?c:c.subarray?c.subarray(0,l):(c.length=l,c)};var a={arraySet:function(c,l,u,f,h){if(l.subarray&&c.subarray)c.set(l.subarray(u,u+f),h);else for(var d=0;d<f;d++)c[h+d]=l[u+d]},flattenChunks:function(c){var l,u,f,h,d,g;for(l=f=0,u=c.length;l<u;l++)f+=c[l].length;for(g=new Uint8Array(f),l=h=0,u=c.length;l<u;l++)d=c[l],g.set(d,h),h+=d.length;return g}},o={arraySet:function(c,l,u,f,h){for(var d=0;d<f;d++)c[h+d]=l[u+d]},flattenChunks:function(c){return[].concat.apply([],c)}};i.setTyped=function(c){c?(i.Buf8=Uint8Array,i.Buf16=Uint16Array,i.Buf32=Int32Array,i.assign(i,a)):(i.Buf8=Array,i.Buf16=Array,i.Buf32=Array,i.assign(i,o))},i.setTyped(s)},{}],42:[function(r,n,i){var s=r("./common"),a=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch{a=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{o=!1}for(var c=new s.Buf8(256),l=0;l<256;l++)c[l]=252<=l?6:248<=l?5:240<=l?4:224<=l?3:192<=l?2:1;function u(f,h){if(h<65537&&(f.subarray&&o||!f.subarray&&a))return String.fromCharCode.apply(null,s.shrinkBuf(f,h));for(var d="",g=0;g<h;g++)d+=String.fromCharCode(f[g]);return d}c[254]=c[254]=1,i.string2buf=function(f){var h,d,g,p,m,y=f.length,v=0;for(p=0;p<y;p++)(64512&(d=f.charCodeAt(p)))==55296&&p+1<y&&(64512&(g=f.charCodeAt(p+1)))==56320&&(d=65536+(d-55296<<10)+(g-56320),p++),v+=d<128?1:d<2048?2:d<65536?3:4;for(h=new s.Buf8(v),p=m=0;m<v;p++)(64512&(d=f.charCodeAt(p)))==55296&&p+1<y&&(64512&(g=f.charCodeAt(p+1)))==56320&&(d=65536+(d-55296<<10)+(g-56320),p++),d<128?h[m++]=d:(d<2048?h[m++]=192|d>>>6:(d<65536?h[m++]=224|d>>>12:(h[m++]=240|d>>>18,h[m++]=128|d>>>12&63),h[m++]=128|d>>>6&63),h[m++]=128|63&d);return h},i.buf2binstring=function(f){return u(f,f.length)},i.binstring2buf=function(f){for(var h=new s.Buf8(f.length),d=0,g=h.length;d<g;d++)h[d]=f.charCodeAt(d);return h},i.buf2string=function(f,h){var d,g,p,m,y=h||f.length,v=new Array(2*y);for(d=g=0;d<y;)if((p=f[d++])<128)v[g++]=p;else if(4<(m=c[p]))v[g++]=65533,d+=m-1;else{for(p&=m===2?31:m===3?15:7;1<m&&d<y;)p=p<<6|63&f[d++],m--;1<m?v[g++]=65533:p<65536?v[g++]=p:(p-=65536,v[g++]=55296|p>>10&1023,v[g++]=56320|1023&p)}return u(v,g)},i.utf8border=function(f,h){var d;for((h=h||f.length)>f.length&&(h=f.length),d=h-1;0<=d&&(192&f[d])==128;)d--;return d<0||d===0?h:d+c[f[d]]>h?d:h}},{"./common":41}],43:[function(r,n,i){n.exports=function(s,a,o,c){for(var l=65535&s|0,u=s>>>16&65535|0,f=0;o!==0;){for(o-=f=2e3<o?2e3:o;u=u+(l=l+a[c++]|0)|0,--f;);l%=65521,u%=65521}return l|u<<16|0}},{}],44:[function(r,n,i){n.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(r,n,i){var s=function(){for(var a,o=[],c=0;c<256;c++){a=c;for(var l=0;l<8;l++)a=1&a?3988292384^a>>>1:a>>>1;o[c]=a}return o}();n.exports=function(a,o,c,l){var u=s,f=l+c;a^=-1;for(var h=l;h<f;h++)a=a>>>8^u[255&(a^o[h])];return-1^a}},{}],46:[function(r,n,i){var s,a=r("../utils/common"),o=r("./trees"),c=r("./adler32"),l=r("./crc32"),u=r("./messages"),f=0,h=4,d=0,g=-2,p=-1,m=4,y=2,v=8,_=9,x=286,A=30,C=19,R=2*x+1,M=15,N=3,Y=258,H=Y+N+1,E=42,k=113,w=1,T=2,L=3,I=4;function U(V,oe){return V.msg=u[oe],oe}function O(V){return(V<<1)-(4<V?9:0)}function D(V){for(var oe=V.length;0<=--oe;)V[oe]=0}function P(V){var oe=V.state,he=oe.pending;he>V.avail_out&&(he=V.avail_out),he!==0&&(a.arraySet(V.output,oe.pending_buf,oe.pending_out,he,V.next_out),V.next_out+=he,oe.pending_out+=he,V.total_out+=he,V.avail_out-=he,oe.pending-=he,oe.pending===0&&(oe.pending_out=0))}function B(V,oe){o._tr_flush_block(V,0<=V.block_start?V.block_start:-1,V.strstart-V.block_start,oe),V.block_start=V.strstart,P(V.strm)}function z(V,oe){V.pending_buf[V.pending++]=oe}function F(V,oe){V.pending_buf[V.pending++]=oe>>>8&255,V.pending_buf[V.pending++]=255&oe}function X(V,oe){var he,ne,ie=V.max_chain_length,ce=V.strstart,ve=V.prev_length,Ee=V.nice_match,ge=V.strstart>V.w_size-H?V.strstart-(V.w_size-H):0,Pe=V.window,Ce=V.w_mask,Ie=V.prev,$e=V.strstart+Y,se=Pe[ce+ve-1],Z=Pe[ce+ve];V.prev_length>=V.good_match&&(ie>>=2),Ee>V.lookahead&&(Ee=V.lookahead);do if(Pe[(he=oe)+ve]===Z&&Pe[he+ve-1]===se&&Pe[he]===Pe[ce]&&Pe[++he]===Pe[ce+1]){ce+=2,he++;do;while(Pe[++ce]===Pe[++he]&&Pe[++ce]===Pe[++he]&&Pe[++ce]===Pe[++he]&&Pe[++ce]===Pe[++he]&&Pe[++ce]===Pe[++he]&&Pe[++ce]===Pe[++he]&&Pe[++ce]===Pe[++he]&&Pe[++ce]===Pe[++he]&&ce<$e);if(ne=Y-($e-ce),ce=$e-Y,ve<ne){if(V.match_start=oe,Ee<=(ve=ne))break;se=Pe[ce+ve-1],Z=Pe[ce+ve]}}while((oe=Ie[oe&Ce])>ge&&--ie!=0);return ve<=V.lookahead?ve:V.lookahead}function W(V){var oe,he,ne,ie,ce,ve,Ee,ge,Pe,Ce,Ie=V.w_size;do{if(ie=V.window_size-V.lookahead-V.strstart,V.strstart>=Ie+(Ie-H)){for(a.arraySet(V.window,V.window,Ie,Ie,0),V.match_start-=Ie,V.strstart-=Ie,V.block_start-=Ie,oe=he=V.hash_size;ne=V.head[--oe],V.head[oe]=Ie<=ne?ne-Ie:0,--he;);for(oe=he=Ie;ne=V.prev[--oe],V.prev[oe]=Ie<=ne?ne-Ie:0,--he;);ie+=Ie}if(V.strm.avail_in===0)break;if(ve=V.strm,Ee=V.window,ge=V.strstart+V.lookahead,Pe=ie,Ce=void 0,Ce=ve.avail_in,Pe<Ce&&(Ce=Pe),he=Ce===0?0:(ve.avail_in-=Ce,a.arraySet(Ee,ve.input,ve.next_in,Ce,ge),ve.state.wrap===1?ve.adler=c(ve.adler,Ee,Ce,ge):ve.state.wrap===2&&(ve.adler=l(ve.adler,Ee,Ce,ge)),ve.next_in+=Ce,ve.total_in+=Ce,Ce),V.lookahead+=he,V.lookahead+V.insert>=N)for(ce=V.strstart-V.insert,V.ins_h=V.window[ce],V.ins_h=(V.ins_h<<V.hash_shift^V.window[ce+1])&V.hash_mask;V.insert&&(V.ins_h=(V.ins_h<<V.hash_shift^V.window[ce+N-1])&V.hash_mask,V.prev[ce&V.w_mask]=V.head[V.ins_h],V.head[V.ins_h]=ce,ce++,V.insert--,!(V.lookahead+V.insert<N)););}while(V.lookahead<H&&V.strm.avail_in!==0)}function q(V,oe){for(var he,ne;;){if(V.lookahead<H){if(W(V),V.lookahead<H&&oe===f)return w;if(V.lookahead===0)break}if(he=0,V.lookahead>=N&&(V.ins_h=(V.ins_h<<V.hash_shift^V.window[V.strstart+N-1])&V.hash_mask,he=V.prev[V.strstart&V.w_mask]=V.head[V.ins_h],V.head[V.ins_h]=V.strstart),he!==0&&V.strstart-he<=V.w_size-H&&(V.match_length=X(V,he)),V.match_length>=N)if(ne=o._tr_tally(V,V.strstart-V.match_start,V.match_length-N),V.lookahead-=V.match_length,V.match_length<=V.max_lazy_match&&V.lookahead>=N){for(V.match_length--;V.strstart++,V.ins_h=(V.ins_h<<V.hash_shift^V.window[V.strstart+N-1])&V.hash_mask,he=V.prev[V.strstart&V.w_mask]=V.head[V.ins_h],V.head[V.ins_h]=V.strstart,--V.match_length!=0;);V.strstart++}else V.strstart+=V.match_length,V.match_length=0,V.ins_h=V.window[V.strstart],V.ins_h=(V.ins_h<<V.hash_shift^V.window[V.strstart+1])&V.hash_mask;else ne=o._tr_tally(V,0,V.window[V.strstart]),V.lookahead--,V.strstart++;if(ne&&(B(V,!1),V.strm.avail_out===0))return w}return V.insert=V.strstart<N-1?V.strstart:N-1,oe===h?(B(V,!0),V.strm.avail_out===0?L:I):V.last_lit&&(B(V,!1),V.strm.avail_out===0)?w:T}function G(V,oe){for(var he,ne,ie;;){if(V.lookahead<H){if(W(V),V.lookahead<H&&oe===f)return w;if(V.lookahead===0)break}if(he=0,V.lookahead>=N&&(V.ins_h=(V.ins_h<<V.hash_shift^V.window[V.strstart+N-1])&V.hash_mask,he=V.prev[V.strstart&V.w_mask]=V.head[V.ins_h],V.head[V.ins_h]=V.strstart),V.prev_length=V.match_length,V.prev_match=V.match_start,V.match_length=N-1,he!==0&&V.prev_length<V.max_lazy_match&&V.strstart-he<=V.w_size-H&&(V.match_length=X(V,he),V.match_length<=5&&(V.strategy===1||V.match_length===N&&4096<V.strstart-V.match_start)&&(V.match_length=N-1)),V.prev_length>=N&&V.match_length<=V.prev_length){for(ie=V.strstart+V.lookahead-N,ne=o._tr_tally(V,V.strstart-1-V.prev_match,V.prev_length-N),V.lookahead-=V.prev_length-1,V.prev_length-=2;++V.strstart<=ie&&(V.ins_h=(V.ins_h<<V.hash_shift^V.window[V.strstart+N-1])&V.hash_mask,he=V.prev[V.strstart&V.w_mask]=V.head[V.ins_h],V.head[V.ins_h]=V.strstart),--V.prev_length!=0;);if(V.match_available=0,V.match_length=N-1,V.strstart++,ne&&(B(V,!1),V.strm.avail_out===0))return w}else if(V.match_available){if((ne=o._tr_tally(V,0,V.window[V.strstart-1]))&&B(V,!1),V.strstart++,V.lookahead--,V.strm.avail_out===0)return w}else V.match_available=1,V.strstart++,V.lookahead--}return V.match_available&&(ne=o._tr_tally(V,0,V.window[V.strstart-1]),V.match_available=0),V.insert=V.strstart<N-1?V.strstart:N-1,oe===h?(B(V,!0),V.strm.avail_out===0?L:I):V.last_lit&&(B(V,!1),V.strm.avail_out===0)?w:T}function ee(V,oe,he,ne,ie){this.good_length=V,this.max_lazy=oe,this.nice_length=he,this.max_chain=ne,this.func=ie}function ae(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=v,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new a.Buf16(2*R),this.dyn_dtree=new a.Buf16(2*(2*A+1)),this.bl_tree=new a.Buf16(2*(2*C+1)),D(this.dyn_ltree),D(this.dyn_dtree),D(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new a.Buf16(M+1),this.heap=new a.Buf16(2*x+1),D(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new a.Buf16(2*x+1),D(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function te(V){var oe;return V&&V.state?(V.total_in=V.total_out=0,V.data_type=y,(oe=V.state).pending=0,oe.pending_out=0,oe.wrap<0&&(oe.wrap=-oe.wrap),oe.status=oe.wrap?E:k,V.adler=oe.wrap===2?0:1,oe.last_flush=f,o._tr_init(oe),d):U(V,g)}function K(V){var oe=te(V);return oe===d&&function(he){he.window_size=2*he.w_size,D(he.head),he.max_lazy_match=s[he.level].max_lazy,he.good_match=s[he.level].good_length,he.nice_match=s[he.level].nice_length,he.max_chain_length=s[he.level].max_chain,he.strstart=0,he.block_start=0,he.lookahead=0,he.insert=0,he.match_length=he.prev_length=N-1,he.match_available=0,he.ins_h=0}(V.state),oe}function re(V,oe,he,ne,ie,ce){if(!V)return g;var ve=1;if(oe===p&&(oe=6),ne<0?(ve=0,ne=-ne):15<ne&&(ve=2,ne-=16),ie<1||_<ie||he!==v||ne<8||15<ne||oe<0||9<oe||ce<0||m<ce)return U(V,g);ne===8&&(ne=9);var Ee=new ae;return(V.state=Ee).strm=V,Ee.wrap=ve,Ee.gzhead=null,Ee.w_bits=ne,Ee.w_size=1<<Ee.w_bits,Ee.w_mask=Ee.w_size-1,Ee.hash_bits=ie+7,Ee.hash_size=1<<Ee.hash_bits,Ee.hash_mask=Ee.hash_size-1,Ee.hash_shift=~~((Ee.hash_bits+N-1)/N),Ee.window=new a.Buf8(2*Ee.w_size),Ee.head=new a.Buf16(Ee.hash_size),Ee.prev=new a.Buf16(Ee.w_size),Ee.lit_bufsize=1<<ie+6,Ee.pending_buf_size=4*Ee.lit_bufsize,Ee.pending_buf=new a.Buf8(Ee.pending_buf_size),Ee.d_buf=1*Ee.lit_bufsize,Ee.l_buf=3*Ee.lit_bufsize,Ee.level=oe,Ee.strategy=ce,Ee.method=he,K(V)}s=[new ee(0,0,0,0,function(V,oe){var he=65535;for(he>V.pending_buf_size-5&&(he=V.pending_buf_size-5);;){if(V.lookahead<=1){if(W(V),V.lookahead===0&&oe===f)return w;if(V.lookahead===0)break}V.strstart+=V.lookahead,V.lookahead=0;var ne=V.block_start+he;if((V.strstart===0||V.strstart>=ne)&&(V.lookahead=V.strstart-ne,V.strstart=ne,B(V,!1),V.strm.avail_out===0)||V.strstart-V.block_start>=V.w_size-H&&(B(V,!1),V.strm.avail_out===0))return w}return V.insert=0,oe===h?(B(V,!0),V.strm.avail_out===0?L:I):(V.strstart>V.block_start&&(B(V,!1),V.strm.avail_out),w)}),new ee(4,4,8,4,q),new ee(4,5,16,8,q),new ee(4,6,32,32,q),new ee(4,4,16,16,G),new ee(8,16,32,32,G),new ee(8,16,128,128,G),new ee(8,32,128,256,G),new ee(32,128,258,1024,G),new ee(32,258,258,4096,G)],i.deflateInit=function(V,oe){return re(V,oe,v,15,8,0)},i.deflateInit2=re,i.deflateReset=K,i.deflateResetKeep=te,i.deflateSetHeader=function(V,oe){return V&&V.state?V.state.wrap!==2?g:(V.state.gzhead=oe,d):g},i.deflate=function(V,oe){var he,ne,ie,ce;if(!V||!V.state||5<oe||oe<0)return V?U(V,g):g;if(ne=V.state,!V.output||!V.input&&V.avail_in!==0||ne.status===666&&oe!==h)return U(V,V.avail_out===0?-5:g);if(ne.strm=V,he=ne.last_flush,ne.last_flush=oe,ne.status===E)if(ne.wrap===2)V.adler=0,z(ne,31),z(ne,139),z(ne,8),ne.gzhead?(z(ne,(ne.gzhead.text?1:0)+(ne.gzhead.hcrc?2:0)+(ne.gzhead.extra?4:0)+(ne.gzhead.name?8:0)+(ne.gzhead.comment?16:0)),z(ne,255&ne.gzhead.time),z(ne,ne.gzhead.time>>8&255),z(ne,ne.gzhead.time>>16&255),z(ne,ne.gzhead.time>>24&255),z(ne,ne.level===9?2:2<=ne.strategy||ne.level<2?4:0),z(ne,255&ne.gzhead.os),ne.gzhead.extra&&ne.gzhead.extra.length&&(z(ne,255&ne.gzhead.extra.length),z(ne,ne.gzhead.extra.length>>8&255)),ne.gzhead.hcrc&&(V.adler=l(V.adler,ne.pending_buf,ne.pending,0)),ne.gzindex=0,ne.status=69):(z(ne,0),z(ne,0),z(ne,0),z(ne,0),z(ne,0),z(ne,ne.level===9?2:2<=ne.strategy||ne.level<2?4:0),z(ne,3),ne.status=k);else{var ve=v+(ne.w_bits-8<<4)<<8;ve|=(2<=ne.strategy||ne.level<2?0:ne.level<6?1:ne.level===6?2:3)<<6,ne.strstart!==0&&(ve|=32),ve+=31-ve%31,ne.status=k,F(ne,ve),ne.strstart!==0&&(F(ne,V.adler>>>16),F(ne,65535&V.adler)),V.adler=1}if(ne.status===69)if(ne.gzhead.extra){for(ie=ne.pending;ne.gzindex<(65535&ne.gzhead.extra.length)&&(ne.pending!==ne.pending_buf_size||(ne.gzhead.hcrc&&ne.pending>ie&&(V.adler=l(V.adler,ne.pending_buf,ne.pending-ie,ie)),P(V),ie=ne.pending,ne.pending!==ne.pending_buf_size));)z(ne,255&ne.gzhead.extra[ne.gzindex]),ne.gzindex++;ne.gzhead.hcrc&&ne.pending>ie&&(V.adler=l(V.adler,ne.pending_buf,ne.pending-ie,ie)),ne.gzindex===ne.gzhead.extra.length&&(ne.gzindex=0,ne.status=73)}else ne.status=73;if(ne.status===73)if(ne.gzhead.name){ie=ne.pending;do{if(ne.pending===ne.pending_buf_size&&(ne.gzhead.hcrc&&ne.pending>ie&&(V.adler=l(V.adler,ne.pending_buf,ne.pending-ie,ie)),P(V),ie=ne.pending,ne.pending===ne.pending_buf_size)){ce=1;break}ce=ne.gzindex<ne.gzhead.name.length?255&ne.gzhead.name.charCodeAt(ne.gzindex++):0,z(ne,ce)}while(ce!==0);ne.gzhead.hcrc&&ne.pending>ie&&(V.adler=l(V.adler,ne.pending_buf,ne.pending-ie,ie)),ce===0&&(ne.gzindex=0,ne.status=91)}else ne.status=91;if(ne.status===91)if(ne.gzhead.comment){ie=ne.pending;do{if(ne.pending===ne.pending_buf_size&&(ne.gzhead.hcrc&&ne.pending>ie&&(V.adler=l(V.adler,ne.pending_buf,ne.pending-ie,ie)),P(V),ie=ne.pending,ne.pending===ne.pending_buf_size)){ce=1;break}ce=ne.gzindex<ne.gzhead.comment.length?255&ne.gzhead.comment.charCodeAt(ne.gzindex++):0,z(ne,ce)}while(ce!==0);ne.gzhead.hcrc&&ne.pending>ie&&(V.adler=l(V.adler,ne.pending_buf,ne.pending-ie,ie)),ce===0&&(ne.status=103)}else ne.status=103;if(ne.status===103&&(ne.gzhead.hcrc?(ne.pending+2>ne.pending_buf_size&&P(V),ne.pending+2<=ne.pending_buf_size&&(z(ne,255&V.adler),z(ne,V.adler>>8&255),V.adler=0,ne.status=k)):ne.status=k),ne.pending!==0){if(P(V),V.avail_out===0)return ne.last_flush=-1,d}else if(V.avail_in===0&&O(oe)<=O(he)&&oe!==h)return U(V,-5);if(ne.status===666&&V.avail_in!==0)return U(V,-5);if(V.avail_in!==0||ne.lookahead!==0||oe!==f&&ne.status!==666){var Ee=ne.strategy===2?function(ge,Pe){for(var Ce;;){if(ge.lookahead===0&&(W(ge),ge.lookahead===0)){if(Pe===f)return w;break}if(ge.match_length=0,Ce=o._tr_tally(ge,0,ge.window[ge.strstart]),ge.lookahead--,ge.strstart++,Ce&&(B(ge,!1),ge.strm.avail_out===0))return w}return ge.insert=0,Pe===h?(B(ge,!0),ge.strm.avail_out===0?L:I):ge.last_lit&&(B(ge,!1),ge.strm.avail_out===0)?w:T}(ne,oe):ne.strategy===3?function(ge,Pe){for(var Ce,Ie,$e,se,Z=ge.window;;){if(ge.lookahead<=Y){if(W(ge),ge.lookahead<=Y&&Pe===f)return w;if(ge.lookahead===0)break}if(ge.match_length=0,ge.lookahead>=N&&0<ge.strstart&&(Ie=Z[$e=ge.strstart-1])===Z[++$e]&&Ie===Z[++$e]&&Ie===Z[++$e]){se=ge.strstart+Y;do;while(Ie===Z[++$e]&&Ie===Z[++$e]&&Ie===Z[++$e]&&Ie===Z[++$e]&&Ie===Z[++$e]&&Ie===Z[++$e]&&Ie===Z[++$e]&&Ie===Z[++$e]&&$e<se);ge.match_length=Y-(se-$e),ge.match_length>ge.lookahead&&(ge.match_length=ge.lookahead)}if(ge.match_length>=N?(Ce=o._tr_tally(ge,1,ge.match_length-N),ge.lookahead-=ge.match_length,ge.strstart+=ge.match_length,ge.match_length=0):(Ce=o._tr_tally(ge,0,ge.window[ge.strstart]),ge.lookahead--,ge.strstart++),Ce&&(B(ge,!1),ge.strm.avail_out===0))return w}return ge.insert=0,Pe===h?(B(ge,!0),ge.strm.avail_out===0?L:I):ge.last_lit&&(B(ge,!1),ge.strm.avail_out===0)?w:T}(ne,oe):s[ne.level].func(ne,oe);if(Ee!==L&&Ee!==I||(ne.status=666),Ee===w||Ee===L)return V.avail_out===0&&(ne.last_flush=-1),d;if(Ee===T&&(oe===1?o._tr_align(ne):oe!==5&&(o._tr_stored_block(ne,0,0,!1),oe===3&&(D(ne.head),ne.lookahead===0&&(ne.strstart=0,ne.block_start=0,ne.insert=0))),P(V),V.avail_out===0))return ne.last_flush=-1,d}return oe!==h?d:ne.wrap<=0?1:(ne.wrap===2?(z(ne,255&V.adler),z(ne,V.adler>>8&255),z(ne,V.adler>>16&255),z(ne,V.adler>>24&255),z(ne,255&V.total_in),z(ne,V.total_in>>8&255),z(ne,V.total_in>>16&255),z(ne,V.total_in>>24&255)):(F(ne,V.adler>>>16),F(ne,65535&V.adler)),P(V),0<ne.wrap&&(ne.wrap=-ne.wrap),ne.pending!==0?d:1)},i.deflateEnd=function(V){var oe;return V&&V.state?(oe=V.state.status)!==E&&oe!==69&&oe!==73&&oe!==91&&oe!==103&&oe!==k&&oe!==666?U(V,g):(V.state=null,oe===k?U(V,-3):d):g},i.deflateSetDictionary=function(V,oe){var he,ne,ie,ce,ve,Ee,ge,Pe,Ce=oe.length;if(!V||!V.state||(ce=(he=V.state).wrap)===2||ce===1&&he.status!==E||he.lookahead)return g;for(ce===1&&(V.adler=c(V.adler,oe,Ce,0)),he.wrap=0,Ce>=he.w_size&&(ce===0&&(D(he.head),he.strstart=0,he.block_start=0,he.insert=0),Pe=new a.Buf8(he.w_size),a.arraySet(Pe,oe,Ce-he.w_size,he.w_size,0),oe=Pe,Ce=he.w_size),ve=V.avail_in,Ee=V.next_in,ge=V.input,V.avail_in=Ce,V.next_in=0,V.input=oe,W(he);he.lookahead>=N;){for(ne=he.strstart,ie=he.lookahead-(N-1);he.ins_h=(he.ins_h<<he.hash_shift^he.window[ne+N-1])&he.hash_mask,he.prev[ne&he.w_mask]=he.head[he.ins_h],he.head[he.ins_h]=ne,ne++,--ie;);he.strstart=ne,he.lookahead=N-1,W(he)}return he.strstart+=he.lookahead,he.block_start=he.strstart,he.insert=he.lookahead,he.lookahead=0,he.match_length=he.prev_length=N-1,he.match_available=0,V.next_in=Ee,V.input=ge,V.avail_in=ve,he.wrap=ce,d},i.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(r,n,i){n.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(r,n,i){n.exports=function(s,a){var o,c,l,u,f,h,d,g,p,m,y,v,_,x,A,C,R,M,N,Y,H,E,k,w,T;o=s.state,c=s.next_in,w=s.input,l=c+(s.avail_in-5),u=s.next_out,T=s.output,f=u-(a-s.avail_out),h=u+(s.avail_out-257),d=o.dmax,g=o.wsize,p=o.whave,m=o.wnext,y=o.window,v=o.hold,_=o.bits,x=o.lencode,A=o.distcode,C=(1<<o.lenbits)-1,R=(1<<o.distbits)-1;e:do{_<15&&(v+=w[c++]<<_,_+=8,v+=w[c++]<<_,_+=8),M=x[v&C];t:for(;;){if(v>>>=N=M>>>24,_-=N,(N=M>>>16&255)===0)T[u++]=65535&M;else{if(!(16&N)){if(!(64&N)){M=x[(65535&M)+(v&(1<<N)-1)];continue t}if(32&N){o.mode=12;break e}s.msg="invalid literal/length code",o.mode=30;break e}Y=65535&M,(N&=15)&&(_<N&&(v+=w[c++]<<_,_+=8),Y+=v&(1<<N)-1,v>>>=N,_-=N),_<15&&(v+=w[c++]<<_,_+=8,v+=w[c++]<<_,_+=8),M=A[v&R];r:for(;;){if(v>>>=N=M>>>24,_-=N,!(16&(N=M>>>16&255))){if(!(64&N)){M=A[(65535&M)+(v&(1<<N)-1)];continue r}s.msg="invalid distance code",o.mode=30;break e}if(H=65535&M,_<(N&=15)&&(v+=w[c++]<<_,(_+=8)<N&&(v+=w[c++]<<_,_+=8)),d<(H+=v&(1<<N)-1)){s.msg="invalid distance too far back",o.mode=30;break e}if(v>>>=N,_-=N,(N=u-f)<H){if(p<(N=H-N)&&o.sane){s.msg="invalid distance too far back",o.mode=30;break e}if(k=y,(E=0)===m){if(E+=g-N,N<Y){for(Y-=N;T[u++]=y[E++],--N;);E=u-H,k=T}}else if(m<N){if(E+=g+m-N,(N-=m)<Y){for(Y-=N;T[u++]=y[E++],--N;);if(E=0,m<Y){for(Y-=N=m;T[u++]=y[E++],--N;);E=u-H,k=T}}}else if(E+=m-N,N<Y){for(Y-=N;T[u++]=y[E++],--N;);E=u-H,k=T}for(;2<Y;)T[u++]=k[E++],T[u++]=k[E++],T[u++]=k[E++],Y-=3;Y&&(T[u++]=k[E++],1<Y&&(T[u++]=k[E++]))}else{for(E=u-H;T[u++]=T[E++],T[u++]=T[E++],T[u++]=T[E++],2<(Y-=3););Y&&(T[u++]=T[E++],1<Y&&(T[u++]=T[E++]))}break}}break}}while(c<l&&u<h);c-=Y=_>>3,v&=(1<<(_-=Y<<3))-1,s.next_in=c,s.next_out=u,s.avail_in=c<l?l-c+5:5-(c-l),s.avail_out=u<h?h-u+257:257-(u-h),o.hold=v,o.bits=_}},{}],49:[function(r,n,i){var s=r("../utils/common"),a=r("./adler32"),o=r("./crc32"),c=r("./inffast"),l=r("./inftrees"),u=1,f=2,h=0,d=-2,g=1,p=852,m=592;function y(E){return(E>>>24&255)+(E>>>8&65280)+((65280&E)<<8)+((255&E)<<24)}function v(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new s.Buf16(320),this.work=new s.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function _(E){var k;return E&&E.state?(k=E.state,E.total_in=E.total_out=k.total=0,E.msg="",k.wrap&&(E.adler=1&k.wrap),k.mode=g,k.last=0,k.havedict=0,k.dmax=32768,k.head=null,k.hold=0,k.bits=0,k.lencode=k.lendyn=new s.Buf32(p),k.distcode=k.distdyn=new s.Buf32(m),k.sane=1,k.back=-1,h):d}function x(E){var k;return E&&E.state?((k=E.state).wsize=0,k.whave=0,k.wnext=0,_(E)):d}function A(E,k){var w,T;return E&&E.state?(T=E.state,k<0?(w=0,k=-k):(w=1+(k>>4),k<48&&(k&=15)),k&&(k<8||15<k)?d:(T.window!==null&&T.wbits!==k&&(T.window=null),T.wrap=w,T.wbits=k,x(E))):d}function C(E,k){var w,T;return E?(T=new v,(E.state=T).window=null,(w=A(E,k))!==h&&(E.state=null),w):d}var R,M,N=!0;function Y(E){if(N){var k;for(R=new s.Buf32(512),M=new s.Buf32(32),k=0;k<144;)E.lens[k++]=8;for(;k<256;)E.lens[k++]=9;for(;k<280;)E.lens[k++]=7;for(;k<288;)E.lens[k++]=8;for(l(u,E.lens,0,288,R,0,E.work,{bits:9}),k=0;k<32;)E.lens[k++]=5;l(f,E.lens,0,32,M,0,E.work,{bits:5}),N=!1}E.lencode=R,E.lenbits=9,E.distcode=M,E.distbits=5}function H(E,k,w,T){var L,I=E.state;return I.window===null&&(I.wsize=1<<I.wbits,I.wnext=0,I.whave=0,I.window=new s.Buf8(I.wsize)),T>=I.wsize?(s.arraySet(I.window,k,w-I.wsize,I.wsize,0),I.wnext=0,I.whave=I.wsize):(T<(L=I.wsize-I.wnext)&&(L=T),s.arraySet(I.window,k,w-T,L,I.wnext),(T-=L)?(s.arraySet(I.window,k,w-T,T,0),I.wnext=T,I.whave=I.wsize):(I.wnext+=L,I.wnext===I.wsize&&(I.wnext=0),I.whave<I.wsize&&(I.whave+=L))),0}i.inflateReset=x,i.inflateReset2=A,i.inflateResetKeep=_,i.inflateInit=function(E){return C(E,15)},i.inflateInit2=C,i.inflate=function(E,k){var w,T,L,I,U,O,D,P,B,z,F,X,W,q,G,ee,ae,te,K,re,V,oe,he,ne,ie=0,ce=new s.Buf8(4),ve=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!E||!E.state||!E.output||!E.input&&E.avail_in!==0)return d;(w=E.state).mode===12&&(w.mode=13),U=E.next_out,L=E.output,D=E.avail_out,I=E.next_in,T=E.input,O=E.avail_in,P=w.hold,B=w.bits,z=O,F=D,oe=h;e:for(;;)switch(w.mode){case g:if(w.wrap===0){w.mode=13;break}for(;B<16;){if(O===0)break e;O--,P+=T[I++]<<B,B+=8}if(2&w.wrap&&P===35615){ce[w.check=0]=255&P,ce[1]=P>>>8&255,w.check=o(w.check,ce,2,0),B=P=0,w.mode=2;break}if(w.flags=0,w.head&&(w.head.done=!1),!(1&w.wrap)||(((255&P)<<8)+(P>>8))%31){E.msg="incorrect header check",w.mode=30;break}if((15&P)!=8){E.msg="unknown compression method",w.mode=30;break}if(B-=4,V=8+(15&(P>>>=4)),w.wbits===0)w.wbits=V;else if(V>w.wbits){E.msg="invalid window size",w.mode=30;break}w.dmax=1<<V,E.adler=w.check=1,w.mode=512&P?10:12,B=P=0;break;case 2:for(;B<16;){if(O===0)break e;O--,P+=T[I++]<<B,B+=8}if(w.flags=P,(255&w.flags)!=8){E.msg="unknown compression method",w.mode=30;break}if(57344&w.flags){E.msg="unknown header flags set",w.mode=30;break}w.head&&(w.head.text=P>>8&1),512&w.flags&&(ce[0]=255&P,ce[1]=P>>>8&255,w.check=o(w.check,ce,2,0)),B=P=0,w.mode=3;case 3:for(;B<32;){if(O===0)break e;O--,P+=T[I++]<<B,B+=8}w.head&&(w.head.time=P),512&w.flags&&(ce[0]=255&P,ce[1]=P>>>8&255,ce[2]=P>>>16&255,ce[3]=P>>>24&255,w.check=o(w.check,ce,4,0)),B=P=0,w.mode=4;case 4:for(;B<16;){if(O===0)break e;O--,P+=T[I++]<<B,B+=8}w.head&&(w.head.xflags=255&P,w.head.os=P>>8),512&w.flags&&(ce[0]=255&P,ce[1]=P>>>8&255,w.check=o(w.check,ce,2,0)),B=P=0,w.mode=5;case 5:if(1024&w.flags){for(;B<16;){if(O===0)break e;O--,P+=T[I++]<<B,B+=8}w.length=P,w.head&&(w.head.extra_len=P),512&w.flags&&(ce[0]=255&P,ce[1]=P>>>8&255,w.check=o(w.check,ce,2,0)),B=P=0}else w.head&&(w.head.extra=null);w.mode=6;case 6:if(1024&w.flags&&(O<(X=w.length)&&(X=O),X&&(w.head&&(V=w.head.extra_len-w.length,w.head.extra||(w.head.extra=new Array(w.head.extra_len)),s.arraySet(w.head.extra,T,I,X,V)),512&w.flags&&(w.check=o(w.check,T,X,I)),O-=X,I+=X,w.length-=X),w.length))break e;w.length=0,w.mode=7;case 7:if(2048&w.flags){if(O===0)break e;for(X=0;V=T[I+X++],w.head&&V&&w.length<65536&&(w.head.name+=String.fromCharCode(V)),V&&X<O;);if(512&w.flags&&(w.check=o(w.check,T,X,I)),O-=X,I+=X,V)break e}else w.head&&(w.head.name=null);w.length=0,w.mode=8;case 8:if(4096&w.flags){if(O===0)break e;for(X=0;V=T[I+X++],w.head&&V&&w.length<65536&&(w.head.comment+=String.fromCharCode(V)),V&&X<O;);if(512&w.flags&&(w.check=o(w.check,T,X,I)),O-=X,I+=X,V)break e}else w.head&&(w.head.comment=null);w.mode=9;case 9:if(512&w.flags){for(;B<16;){if(O===0)break e;O--,P+=T[I++]<<B,B+=8}if(P!==(65535&w.check)){E.msg="header crc mismatch",w.mode=30;break}B=P=0}w.head&&(w.head.hcrc=w.flags>>9&1,w.head.done=!0),E.adler=w.check=0,w.mode=12;break;case 10:for(;B<32;){if(O===0)break e;O--,P+=T[I++]<<B,B+=8}E.adler=w.check=y(P),B=P=0,w.mode=11;case 11:if(w.havedict===0)return E.next_out=U,E.avail_out=D,E.next_in=I,E.avail_in=O,w.hold=P,w.bits=B,2;E.adler=w.check=1,w.mode=12;case 12:if(k===5||k===6)break e;case 13:if(w.last){P>>>=7&B,B-=7&B,w.mode=27;break}for(;B<3;){if(O===0)break e;O--,P+=T[I++]<<B,B+=8}switch(w.last=1&P,B-=1,3&(P>>>=1)){case 0:w.mode=14;break;case 1:if(Y(w),w.mode=20,k!==6)break;P>>>=2,B-=2;break e;case 2:w.mode=17;break;case 3:E.msg="invalid block type",w.mode=30}P>>>=2,B-=2;break;case 14:for(P>>>=7&B,B-=7&B;B<32;){if(O===0)break e;O--,P+=T[I++]<<B,B+=8}if((65535&P)!=(P>>>16^65535)){E.msg="invalid stored block lengths",w.mode=30;break}if(w.length=65535&P,B=P=0,w.mode=15,k===6)break e;case 15:w.mode=16;case 16:if(X=w.length){if(O<X&&(X=O),D<X&&(X=D),X===0)break e;s.arraySet(L,T,I,X,U),O-=X,I+=X,D-=X,U+=X,w.length-=X;break}w.mode=12;break;case 17:for(;B<14;){if(O===0)break e;O--,P+=T[I++]<<B,B+=8}if(w.nlen=257+(31&P),P>>>=5,B-=5,w.ndist=1+(31&P),P>>>=5,B-=5,w.ncode=4+(15&P),P>>>=4,B-=4,286<w.nlen||30<w.ndist){E.msg="too many length or distance symbols",w.mode=30;break}w.have=0,w.mode=18;case 18:for(;w.have<w.ncode;){for(;B<3;){if(O===0)break e;O--,P+=T[I++]<<B,B+=8}w.lens[ve[w.have++]]=7&P,P>>>=3,B-=3}for(;w.have<19;)w.lens[ve[w.have++]]=0;if(w.lencode=w.lendyn,w.lenbits=7,he={bits:w.lenbits},oe=l(0,w.lens,0,19,w.lencode,0,w.work,he),w.lenbits=he.bits,oe){E.msg="invalid code lengths set",w.mode=30;break}w.have=0,w.mode=19;case 19:for(;w.have<w.nlen+w.ndist;){for(;ee=(ie=w.lencode[P&(1<<w.lenbits)-1])>>>16&255,ae=65535&ie,!((G=ie>>>24)<=B);){if(O===0)break e;O--,P+=T[I++]<<B,B+=8}if(ae<16)P>>>=G,B-=G,w.lens[w.have++]=ae;else{if(ae===16){for(ne=G+2;B<ne;){if(O===0)break e;O--,P+=T[I++]<<B,B+=8}if(P>>>=G,B-=G,w.have===0){E.msg="invalid bit length repeat",w.mode=30;break}V=w.lens[w.have-1],X=3+(3&P),P>>>=2,B-=2}else if(ae===17){for(ne=G+3;B<ne;){if(O===0)break e;O--,P+=T[I++]<<B,B+=8}B-=G,V=0,X=3+(7&(P>>>=G)),P>>>=3,B-=3}else{for(ne=G+7;B<ne;){if(O===0)break e;O--,P+=T[I++]<<B,B+=8}B-=G,V=0,X=11+(127&(P>>>=G)),P>>>=7,B-=7}if(w.have+X>w.nlen+w.ndist){E.msg="invalid bit length repeat",w.mode=30;break}for(;X--;)w.lens[w.have++]=V}}if(w.mode===30)break;if(w.lens[256]===0){E.msg="invalid code -- missing end-of-block",w.mode=30;break}if(w.lenbits=9,he={bits:w.lenbits},oe=l(u,w.lens,0,w.nlen,w.lencode,0,w.work,he),w.lenbits=he.bits,oe){E.msg="invalid literal/lengths set",w.mode=30;break}if(w.distbits=6,w.distcode=w.distdyn,he={bits:w.distbits},oe=l(f,w.lens,w.nlen,w.ndist,w.distcode,0,w.work,he),w.distbits=he.bits,oe){E.msg="invalid distances set",w.mode=30;break}if(w.mode=20,k===6)break e;case 20:w.mode=21;case 21:if(6<=O&&258<=D){E.next_out=U,E.avail_out=D,E.next_in=I,E.avail_in=O,w.hold=P,w.bits=B,c(E,F),U=E.next_out,L=E.output,D=E.avail_out,I=E.next_in,T=E.input,O=E.avail_in,P=w.hold,B=w.bits,w.mode===12&&(w.back=-1);break}for(w.back=0;ee=(ie=w.lencode[P&(1<<w.lenbits)-1])>>>16&255,ae=65535&ie,!((G=ie>>>24)<=B);){if(O===0)break e;O--,P+=T[I++]<<B,B+=8}if(ee&&!(240&ee)){for(te=G,K=ee,re=ae;ee=(ie=w.lencode[re+((P&(1<<te+K)-1)>>te)])>>>16&255,ae=65535&ie,!(te+(G=ie>>>24)<=B);){if(O===0)break e;O--,P+=T[I++]<<B,B+=8}P>>>=te,B-=te,w.back+=te}if(P>>>=G,B-=G,w.back+=G,w.length=ae,ee===0){w.mode=26;break}if(32&ee){w.back=-1,w.mode=12;break}if(64&ee){E.msg="invalid literal/length code",w.mode=30;break}w.extra=15&ee,w.mode=22;case 22:if(w.extra){for(ne=w.extra;B<ne;){if(O===0)break e;O--,P+=T[I++]<<B,B+=8}w.length+=P&(1<<w.extra)-1,P>>>=w.extra,B-=w.extra,w.back+=w.extra}w.was=w.length,w.mode=23;case 23:for(;ee=(ie=w.distcode[P&(1<<w.distbits)-1])>>>16&255,ae=65535&ie,!((G=ie>>>24)<=B);){if(O===0)break e;O--,P+=T[I++]<<B,B+=8}if(!(240&ee)){for(te=G,K=ee,re=ae;ee=(ie=w.distcode[re+((P&(1<<te+K)-1)>>te)])>>>16&255,ae=65535&ie,!(te+(G=ie>>>24)<=B);){if(O===0)break e;O--,P+=T[I++]<<B,B+=8}P>>>=te,B-=te,w.back+=te}if(P>>>=G,B-=G,w.back+=G,64&ee){E.msg="invalid distance code",w.mode=30;break}w.offset=ae,w.extra=15&ee,w.mode=24;case 24:if(w.extra){for(ne=w.extra;B<ne;){if(O===0)break e;O--,P+=T[I++]<<B,B+=8}w.offset+=P&(1<<w.extra)-1,P>>>=w.extra,B-=w.extra,w.back+=w.extra}if(w.offset>w.dmax){E.msg="invalid distance too far back",w.mode=30;break}w.mode=25;case 25:if(D===0)break e;if(X=F-D,w.offset>X){if((X=w.offset-X)>w.whave&&w.sane){E.msg="invalid distance too far back",w.mode=30;break}W=X>w.wnext?(X-=w.wnext,w.wsize-X):w.wnext-X,X>w.length&&(X=w.length),q=w.window}else q=L,W=U-w.offset,X=w.length;for(D<X&&(X=D),D-=X,w.length-=X;L[U++]=q[W++],--X;);w.length===0&&(w.mode=21);break;case 26:if(D===0)break e;L[U++]=w.length,D--,w.mode=21;break;case 27:if(w.wrap){for(;B<32;){if(O===0)break e;O--,P|=T[I++]<<B,B+=8}if(F-=D,E.total_out+=F,w.total+=F,F&&(E.adler=w.check=w.flags?o(w.check,L,F,U-F):a(w.check,L,F,U-F)),F=D,(w.flags?P:y(P))!==w.check){E.msg="incorrect data check",w.mode=30;break}B=P=0}w.mode=28;case 28:if(w.wrap&&w.flags){for(;B<32;){if(O===0)break e;O--,P+=T[I++]<<B,B+=8}if(P!==(4294967295&w.total)){E.msg="incorrect length check",w.mode=30;break}B=P=0}w.mode=29;case 29:oe=1;break e;case 30:oe=-3;break e;case 31:return-4;case 32:default:return d}return E.next_out=U,E.avail_out=D,E.next_in=I,E.avail_in=O,w.hold=P,w.bits=B,(w.wsize||F!==E.avail_out&&w.mode<30&&(w.mode<27||k!==4))&&H(E,E.output,E.next_out,F-E.avail_out)?(w.mode=31,-4):(z-=E.avail_in,F-=E.avail_out,E.total_in+=z,E.total_out+=F,w.total+=F,w.wrap&&F&&(E.adler=w.check=w.flags?o(w.check,L,F,E.next_out-F):a(w.check,L,F,E.next_out-F)),E.data_type=w.bits+(w.last?64:0)+(w.mode===12?128:0)+(w.mode===20||w.mode===15?256:0),(z==0&&F===0||k===4)&&oe===h&&(oe=-5),oe)},i.inflateEnd=function(E){if(!E||!E.state)return d;var k=E.state;return k.window&&(k.window=null),E.state=null,h},i.inflateGetHeader=function(E,k){var w;return E&&E.state&&2&(w=E.state).wrap?((w.head=k).done=!1,h):d},i.inflateSetDictionary=function(E,k){var w,T=k.length;return E&&E.state?(w=E.state).wrap!==0&&w.mode!==11?d:w.mode===11&&a(1,k,T,0)!==w.check?-3:H(E,k,T,T)?(w.mode=31,-4):(w.havedict=1,h):d},i.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(r,n,i){var s=r("../utils/common"),a=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],c=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],l=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];n.exports=function(u,f,h,d,g,p,m,y){var v,_,x,A,C,R,M,N,Y,H=y.bits,E=0,k=0,w=0,T=0,L=0,I=0,U=0,O=0,D=0,P=0,B=null,z=0,F=new s.Buf16(16),X=new s.Buf16(16),W=null,q=0;for(E=0;E<=15;E++)F[E]=0;for(k=0;k<d;k++)F[f[h+k]]++;for(L=H,T=15;1<=T&&F[T]===0;T--);if(T<L&&(L=T),T===0)return g[p++]=20971520,g[p++]=20971520,y.bits=1,0;for(w=1;w<T&&F[w]===0;w++);for(L<w&&(L=w),E=O=1;E<=15;E++)if(O<<=1,(O-=F[E])<0)return-1;if(0<O&&(u===0||T!==1))return-1;for(X[1]=0,E=1;E<15;E++)X[E+1]=X[E]+F[E];for(k=0;k<d;k++)f[h+k]!==0&&(m[X[f[h+k]]++]=k);if(R=u===0?(B=W=m,19):u===1?(B=a,z-=257,W=o,q-=257,256):(B=c,W=l,-1),E=w,C=p,U=k=P=0,x=-1,A=(D=1<<(I=L))-1,u===1&&852<D||u===2&&592<D)return 1;for(;;){for(M=E-U,Y=m[k]<R?(N=0,m[k]):m[k]>R?(N=W[q+m[k]],B[z+m[k]]):(N=96,0),v=1<<E-U,w=_=1<<I;g[C+(P>>U)+(_-=v)]=M<<24|N<<16|Y|0,_!==0;);for(v=1<<E-1;P&v;)v>>=1;if(v!==0?(P&=v-1,P+=v):P=0,k++,--F[E]==0){if(E===T)break;E=f[h+m[k]]}if(L<E&&(P&A)!==x){for(U===0&&(U=L),C+=w,O=1<<(I=E-U);I+U<T&&!((O-=F[I+U])<=0);)I++,O<<=1;if(D+=1<<I,u===1&&852<D||u===2&&592<D)return 1;g[x=P&A]=L<<24|I<<16|C-p|0}}return P!==0&&(g[C+P]=E-U<<24|64<<16|0),y.bits=L,0}},{"../utils/common":41}],51:[function(r,n,i){n.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(r,n,i){var s=r("../utils/common"),a=0,o=1;function c(ie){for(var ce=ie.length;0<=--ce;)ie[ce]=0}var l=0,u=29,f=256,h=f+1+u,d=30,g=19,p=2*h+1,m=15,y=16,v=7,_=256,x=16,A=17,C=18,R=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],M=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],N=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],Y=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],H=new Array(2*(h+2));c(H);var E=new Array(2*d);c(E);var k=new Array(512);c(k);var w=new Array(256);c(w);var T=new Array(u);c(T);var L,I,U,O=new Array(d);function D(ie,ce,ve,Ee,ge){this.static_tree=ie,this.extra_bits=ce,this.extra_base=ve,this.elems=Ee,this.max_length=ge,this.has_stree=ie&&ie.length}function P(ie,ce){this.dyn_tree=ie,this.max_code=0,this.stat_desc=ce}function B(ie){return ie<256?k[ie]:k[256+(ie>>>7)]}function z(ie,ce){ie.pending_buf[ie.pending++]=255&ce,ie.pending_buf[ie.pending++]=ce>>>8&255}function F(ie,ce,ve){ie.bi_valid>y-ve?(ie.bi_buf|=ce<<ie.bi_valid&65535,z(ie,ie.bi_buf),ie.bi_buf=ce>>y-ie.bi_valid,ie.bi_valid+=ve-y):(ie.bi_buf|=ce<<ie.bi_valid&65535,ie.bi_valid+=ve)}function X(ie,ce,ve){F(ie,ve[2*ce],ve[2*ce+1])}function W(ie,ce){for(var ve=0;ve|=1&ie,ie>>>=1,ve<<=1,0<--ce;);return ve>>>1}function q(ie,ce,ve){var Ee,ge,Pe=new Array(m+1),Ce=0;for(Ee=1;Ee<=m;Ee++)Pe[Ee]=Ce=Ce+ve[Ee-1]<<1;for(ge=0;ge<=ce;ge++){var Ie=ie[2*ge+1];Ie!==0&&(ie[2*ge]=W(Pe[Ie]++,Ie))}}function G(ie){var ce;for(ce=0;ce<h;ce++)ie.dyn_ltree[2*ce]=0;for(ce=0;ce<d;ce++)ie.dyn_dtree[2*ce]=0;for(ce=0;ce<g;ce++)ie.bl_tree[2*ce]=0;ie.dyn_ltree[2*_]=1,ie.opt_len=ie.static_len=0,ie.last_lit=ie.matches=0}function ee(ie){8<ie.bi_valid?z(ie,ie.bi_buf):0<ie.bi_valid&&(ie.pending_buf[ie.pending++]=ie.bi_buf),ie.bi_buf=0,ie.bi_valid=0}function ae(ie,ce,ve,Ee){var ge=2*ce,Pe=2*ve;return ie[ge]<ie[Pe]||ie[ge]===ie[Pe]&&Ee[ce]<=Ee[ve]}function te(ie,ce,ve){for(var Ee=ie.heap[ve],ge=ve<<1;ge<=ie.heap_len&&(ge<ie.heap_len&&ae(ce,ie.heap[ge+1],ie.heap[ge],ie.depth)&&ge++,!ae(ce,Ee,ie.heap[ge],ie.depth));)ie.heap[ve]=ie.heap[ge],ve=ge,ge<<=1;ie.heap[ve]=Ee}function K(ie,ce,ve){var Ee,ge,Pe,Ce,Ie=0;if(ie.last_lit!==0)for(;Ee=ie.pending_buf[ie.d_buf+2*Ie]<<8|ie.pending_buf[ie.d_buf+2*Ie+1],ge=ie.pending_buf[ie.l_buf+Ie],Ie++,Ee===0?X(ie,ge,ce):(X(ie,(Pe=w[ge])+f+1,ce),(Ce=R[Pe])!==0&&F(ie,ge-=T[Pe],Ce),X(ie,Pe=B(--Ee),ve),(Ce=M[Pe])!==0&&F(ie,Ee-=O[Pe],Ce)),Ie<ie.last_lit;);X(ie,_,ce)}function re(ie,ce){var ve,Ee,ge,Pe=ce.dyn_tree,Ce=ce.stat_desc.static_tree,Ie=ce.stat_desc.has_stree,$e=ce.stat_desc.elems,se=-1;for(ie.heap_len=0,ie.heap_max=p,ve=0;ve<$e;ve++)Pe[2*ve]!==0?(ie.heap[++ie.heap_len]=se=ve,ie.depth[ve]=0):Pe[2*ve+1]=0;for(;ie.heap_len<2;)Pe[2*(ge=ie.heap[++ie.heap_len]=se<2?++se:0)]=1,ie.depth[ge]=0,ie.opt_len--,Ie&&(ie.static_len-=Ce[2*ge+1]);for(ce.max_code=se,ve=ie.heap_len>>1;1<=ve;ve--)te(ie,Pe,ve);for(ge=$e;ve=ie.heap[1],ie.heap[1]=ie.heap[ie.heap_len--],te(ie,Pe,1),Ee=ie.heap[1],ie.heap[--ie.heap_max]=ve,ie.heap[--ie.heap_max]=Ee,Pe[2*ge]=Pe[2*ve]+Pe[2*Ee],ie.depth[ge]=(ie.depth[ve]>=ie.depth[Ee]?ie.depth[ve]:ie.depth[Ee])+1,Pe[2*ve+1]=Pe[2*Ee+1]=ge,ie.heap[1]=ge++,te(ie,Pe,1),2<=ie.heap_len;);ie.heap[--ie.heap_max]=ie.heap[1],function(Z,J){var de,Ae,De,Re,bt,$t,ut=J.dyn_tree,Mt=J.max_code,Ft=J.stat_desc.static_tree,lr=J.stat_desc.has_stree,$n=J.stat_desc.extra_bits,On=J.stat_desc.extra_base,er=J.stat_desc.max_length,gn=0;for(Re=0;Re<=m;Re++)Z.bl_count[Re]=0;for(ut[2*Z.heap[Z.heap_max]+1]=0,de=Z.heap_max+1;de<p;de++)er<(Re=ut[2*ut[2*(Ae=Z.heap[de])+1]+1]+1)&&(Re=er,gn++),ut[2*Ae+1]=Re,Mt<Ae||(Z.bl_count[Re]++,bt=0,On<=Ae&&(bt=$n[Ae-On]),$t=ut[2*Ae],Z.opt_len+=$t*(Re+bt),lr&&(Z.static_len+=$t*(Ft[2*Ae+1]+bt)));if(gn!==0){do{for(Re=er-1;Z.bl_count[Re]===0;)Re--;Z.bl_count[Re]--,Z.bl_count[Re+1]+=2,Z.bl_count[er]--,gn-=2}while(0<gn);for(Re=er;Re!==0;Re--)for(Ae=Z.bl_count[Re];Ae!==0;)Mt<(De=Z.heap[--de])||(ut[2*De+1]!==Re&&(Z.opt_len+=(Re-ut[2*De+1])*ut[2*De],ut[2*De+1]=Re),Ae--)}}(ie,ce),q(Pe,se,ie.bl_count)}function V(ie,ce,ve){var Ee,ge,Pe=-1,Ce=ce[1],Ie=0,$e=7,se=4;for(Ce===0&&($e=138,se=3),ce[2*(ve+1)+1]=65535,Ee=0;Ee<=ve;Ee++)ge=Ce,Ce=ce[2*(Ee+1)+1],++Ie<$e&&ge===Ce||(Ie<se?ie.bl_tree[2*ge]+=Ie:ge!==0?(ge!==Pe&&ie.bl_tree[2*ge]++,ie.bl_tree[2*x]++):Ie<=10?ie.bl_tree[2*A]++:ie.bl_tree[2*C]++,Pe=ge,se=(Ie=0)===Ce?($e=138,3):ge===Ce?($e=6,3):($e=7,4))}function oe(ie,ce,ve){var Ee,ge,Pe=-1,Ce=ce[1],Ie=0,$e=7,se=4;for(Ce===0&&($e=138,se=3),Ee=0;Ee<=ve;Ee++)if(ge=Ce,Ce=ce[2*(Ee+1)+1],!(++Ie<$e&&ge===Ce)){if(Ie<se)for(;X(ie,ge,ie.bl_tree),--Ie!=0;);else ge!==0?(ge!==Pe&&(X(ie,ge,ie.bl_tree),Ie--),X(ie,x,ie.bl_tree),F(ie,Ie-3,2)):Ie<=10?(X(ie,A,ie.bl_tree),F(ie,Ie-3,3)):(X(ie,C,ie.bl_tree),F(ie,Ie-11,7));Pe=ge,se=(Ie=0)===Ce?($e=138,3):ge===Ce?($e=6,3):($e=7,4)}}c(O);var he=!1;function ne(ie,ce,ve,Ee){F(ie,(l<<1)+(Ee?1:0),3),function(ge,Pe,Ce,Ie){ee(ge),z(ge,Ce),z(ge,~Ce),s.arraySet(ge.pending_buf,ge.window,Pe,Ce,ge.pending),ge.pending+=Ce}(ie,ce,ve)}i._tr_init=function(ie){he||(function(){var ce,ve,Ee,ge,Pe,Ce=new Array(m+1);for(ge=Ee=0;ge<u-1;ge++)for(T[ge]=Ee,ce=0;ce<1<<R[ge];ce++)w[Ee++]=ge;for(w[Ee-1]=ge,ge=Pe=0;ge<16;ge++)for(O[ge]=Pe,ce=0;ce<1<<M[ge];ce++)k[Pe++]=ge;for(Pe>>=7;ge<d;ge++)for(O[ge]=Pe<<7,ce=0;ce<1<<M[ge]-7;ce++)k[256+Pe++]=ge;for(ve=0;ve<=m;ve++)Ce[ve]=0;for(ce=0;ce<=143;)H[2*ce+1]=8,ce++,Ce[8]++;for(;ce<=255;)H[2*ce+1]=9,ce++,Ce[9]++;for(;ce<=279;)H[2*ce+1]=7,ce++,Ce[7]++;for(;ce<=287;)H[2*ce+1]=8,ce++,Ce[8]++;for(q(H,h+1,Ce),ce=0;ce<d;ce++)E[2*ce+1]=5,E[2*ce]=W(ce,5);L=new D(H,R,f+1,h,m),I=new D(E,M,0,d,m),U=new D(new Array(0),N,0,g,v)}(),he=!0),ie.l_desc=new P(ie.dyn_ltree,L),ie.d_desc=new P(ie.dyn_dtree,I),ie.bl_desc=new P(ie.bl_tree,U),ie.bi_buf=0,ie.bi_valid=0,G(ie)},i._tr_stored_block=ne,i._tr_flush_block=function(ie,ce,ve,Ee){var ge,Pe,Ce=0;0<ie.level?(ie.strm.data_type===2&&(ie.strm.data_type=function(Ie){var $e,se=4093624447;for($e=0;$e<=31;$e++,se>>>=1)if(1&se&&Ie.dyn_ltree[2*$e]!==0)return a;if(Ie.dyn_ltree[18]!==0||Ie.dyn_ltree[20]!==0||Ie.dyn_ltree[26]!==0)return o;for($e=32;$e<f;$e++)if(Ie.dyn_ltree[2*$e]!==0)return o;return a}(ie)),re(ie,ie.l_desc),re(ie,ie.d_desc),Ce=function(Ie){var $e;for(V(Ie,Ie.dyn_ltree,Ie.l_desc.max_code),V(Ie,Ie.dyn_dtree,Ie.d_desc.max_code),re(Ie,Ie.bl_desc),$e=g-1;3<=$e&&Ie.bl_tree[2*Y[$e]+1]===0;$e--);return Ie.opt_len+=3*($e+1)+5+5+4,$e}(ie),ge=ie.opt_len+3+7>>>3,(Pe=ie.static_len+3+7>>>3)<=ge&&(ge=Pe)):ge=Pe=ve+5,ve+4<=ge&&ce!==-1?ne(ie,ce,ve,Ee):ie.strategy===4||Pe===ge?(F(ie,2+(Ee?1:0),3),K(ie,H,E)):(F(ie,4+(Ee?1:0),3),function(Ie,$e,se,Z){var J;for(F(Ie,$e-257,5),F(Ie,se-1,5),F(Ie,Z-4,4),J=0;J<Z;J++)F(Ie,Ie.bl_tree[2*Y[J]+1],3);oe(Ie,Ie.dyn_ltree,$e-1),oe(Ie,Ie.dyn_dtree,se-1)}(ie,ie.l_desc.max_code+1,ie.d_desc.max_code+1,Ce+1),K(ie,ie.dyn_ltree,ie.dyn_dtree)),G(ie),Ee&&ee(ie)},i._tr_tally=function(ie,ce,ve){return ie.pending_buf[ie.d_buf+2*ie.last_lit]=ce>>>8&255,ie.pending_buf[ie.d_buf+2*ie.last_lit+1]=255&ce,ie.pending_buf[ie.l_buf+ie.last_lit]=255&ve,ie.last_lit++,ce===0?ie.dyn_ltree[2*ve]++:(ie.matches++,ce--,ie.dyn_ltree[2*(w[ve]+f+1)]++,ie.dyn_dtree[2*B(ce)]++),ie.last_lit===ie.lit_bufsize-1},i._tr_align=function(ie){F(ie,2,3),X(ie,_,H),function(ce){ce.bi_valid===16?(z(ce,ce.bi_buf),ce.bi_buf=0,ce.bi_valid=0):8<=ce.bi_valid&&(ce.pending_buf[ce.pending++]=255&ce.bi_buf,ce.bi_buf>>=8,ce.bi_valid-=8)}(ie)}},{"../utils/common":41}],53:[function(r,n,i){n.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(r,n,i){(function(s){(function(a,o){if(!a.setImmediate){var c,l,u,f,h=1,d={},g=!1,p=a.document,m=Object.getPrototypeOf&&Object.getPrototypeOf(a);m=m&&m.setTimeout?m:a,c={}.toString.call(a.process)==="[object process]"?function(x){Et.nextTick(function(){v(x)})}:function(){if(a.postMessage&&!a.importScripts){var x=!0,A=a.onmessage;return a.onmessage=function(){x=!1},a.postMessage("","*"),a.onmessage=A,x}}()?(f="setImmediate$"+Math.random()+"$",a.addEventListener?a.addEventListener("message",_,!1):a.attachEvent("onmessage",_),function(x){a.postMessage(f+x,"*")}):a.MessageChannel?((u=new MessageChannel).port1.onmessage=function(x){v(x.data)},function(x){u.port2.postMessage(x)}):p&&"onreadystatechange"in p.createElement("script")?(l=p.documentElement,function(x){var A=p.createElement("script");A.onreadystatechange=function(){v(x),A.onreadystatechange=null,l.removeChild(A),A=null},l.appendChild(A)}):function(x){setTimeout(v,0,x)},m.setImmediate=function(x){typeof x!="function"&&(x=new Function(""+x));for(var A=new Array(arguments.length-1),C=0;C<A.length;C++)A[C]=arguments[C+1];var R={callback:x,args:A};return d[h]=R,c(h),h++},m.clearImmediate=y}function y(x){delete d[x]}function v(x){if(g)setTimeout(v,0,x);else{var A=d[x];if(A){g=!0;try{(function(C){var R=C.callback,M=C.args;switch(M.length){case 0:R();break;case 1:R(M[0]);break;case 2:R(M[0],M[1]);break;case 3:R(M[0],M[1],M[2]);break;default:R.apply(o,M)}})(A)}finally{y(x),g=!1}}}}function _(x){x.source===a&&typeof x.data=="string"&&x.data.indexOf(f)===0&&v(+x.data.slice(f.length))}})(typeof self>"u"?s===void 0?this:s:self)}).call(this,typeof It<"u"?It:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(Yce);var qRe=Yce.exports;const ID=si(qRe),HL=(()=>{if(typeof self>"u")return!1;if("top"in self&&self!==top)try{top.window.document._=0}catch{return!1}return"showOpenFilePicker"in self})();HL?Promise.resolve().then(function(){return YRe}):Promise.resolve().then(function(){return tPe});HL?Promise.resolve().then(function(){return ZRe}):Promise.resolve().then(function(){return nPe});const HRe=HL?Promise.resolve().then(function(){return QRe}):Promise.resolve().then(function(){return sPe});async function WRe(...t){return(await HRe).default(...t)}const KRe=async t=>{const e=await t.getFile();return e.handle=t,e};var GRe=async(t=[{}])=>{Array.isArray(t)||(t=[t]);const e=[];t.forEach((i,s)=>{e[s]={description:i.description||"Files",accept:{}},i.mimeTypes?i.mimeTypes.map(a=>{e[s].accept[a]=i.extensions||[]}):e[s].accept["*/*"]=i.extensions||[]});const r=await window.showOpenFilePicker({id:t[0].id,startIn:t[0].startIn,types:e,multiple:t[0].multiple||!1,excludeAcceptAllOption:t[0].excludeAcceptAllOption||!1}),n=await Promise.all(r.map(KRe));return t[0].multiple?n:n[0]},YRe={__proto__:null,default:GRe};function bx(t){function e(r){if(Object(r)!==r)return Promise.reject(new TypeError(r+" is not an object."));var n=r.done;return Promise.resolve(r.value).then(function(i){return{value:i,done:n}})}return bx=function(r){this.s=r,this.n=r.next},bx.prototype={s:null,n:null,next:function(){return e(this.n.apply(this.s,arguments))},return:function(r){var n=this.s.return;return n===void 0?Promise.resolve({value:r,done:!0}):e(n.apply(this.s,arguments))},throw:function(r){var n=this.s.return;return n===void 0?Promise.reject(r):e(n.apply(this.s,arguments))}},new bx(t)}const Xce=async(t,e,r=t.name,n)=>{const i=[],s=[];var a,o=!1,c=!1;try{for(var l,u=function(f){var h,d,g,p=2;for(typeof Symbol<"u"&&(d=Symbol.asyncIterator,g=Symbol.iterator);p--;){if(d&&(h=f[d])!=null)return h.call(f);if(g&&(h=f[g])!=null)return new bx(h.call(f));d="@@asyncIterator",g="@@iterator"}throw new TypeError("Object is not async iterable")}(t.values());o=!(l=await u.next()).done;o=!1){const f=l.value,h=`${r}/${f.name}`;f.kind==="file"?s.push(f.getFile().then(d=>(d.directoryHandle=t,d.handle=f,Object.defineProperty(d,"webkitRelativePath",{configurable:!0,enumerable:!0,get:()=>h})))):f.kind!=="directory"||!e||n&&n(f)||i.push(Xce(f,e,h,n))}}catch(f){c=!0,a=f}finally{try{o&&u.return!=null&&await u.return()}finally{if(c)throw a}}return[...(await Promise.all(i)).flat(),...await Promise.all(s)]};var XRe=async(t={})=>{t.recursive=t.recursive||!1,t.mode=t.mode||"read";const e=await window.showDirectoryPicker({id:t.id,startIn:t.startIn,mode:t.mode});return(await(await e.values()).next()).done?[e]:Xce(e,t.recursive,void 0,t.skipDirectory)},ZRe={__proto__:null,default:XRe},JRe=async(t,e=[{}],r=null,n=!1,i=null)=>{Array.isArray(e)||(e=[e]),e[0].fileName=e[0].fileName||"Untitled";const s=[];let a=null;if(t instanceof Blob&&t.type?a=t.type:t.headers&&t.headers.get("content-type")&&(a=t.headers.get("content-type")),e.forEach((l,u)=>{s[u]={description:l.description||"Files",accept:{}},l.mimeTypes?(u===0&&a&&l.mimeTypes.push(a),l.mimeTypes.map(f=>{s[u].accept[f]=l.extensions||[]})):a?s[u].accept[a]=l.extensions||[]:s[u].accept["*/*"]=l.extensions||[]}),r)try{await r.getFile()}catch(l){if(r=null,n)throw l}const o=r||await window.showSaveFilePicker({suggestedName:e[0].fileName,id:e[0].id,startIn:e[0].startIn,types:s,excludeAcceptAllOption:e[0].excludeAcceptAllOption||!1});!r&&i&&i(o);const c=await o.createWritable();return"stream"in t?(await t.stream().pipeTo(c),o):"body"in t?(await t.body.pipeTo(c),o):(await c.write(await t),await c.close(),o)},QRe={__proto__:null,default:JRe},ePe=async(t=[{}])=>(Array.isArray(t)||(t=[t]),new Promise((e,r)=>{const n=document.createElement("input");n.type="file";const i=[...t.map(c=>c.mimeTypes||[]),...t.map(c=>c.extensions||[])].join();n.multiple=t[0].multiple||!1,n.accept=i||"",n.style.display="none",document.body.append(n);const s=c=>{typeof a=="function"&&a(),e(c)},a=t[0].legacySetup&&t[0].legacySetup(s,()=>a(r),n),o=()=>{window.removeEventListener("focus",o),n.remove()};n.addEventListener("click",()=>{window.addEventListener("focus",o)}),n.addEventListener("change",()=>{window.removeEventListener("focus",o),n.remove(),s(n.multiple?Array.from(n.files):n.files[0])}),"showPicker"in HTMLInputElement.prototype?n.showPicker():n.click()})),tPe={__proto__:null,default:ePe},rPe=async(t=[{}])=>(Array.isArray(t)||(t=[t]),t[0].recursive=t[0].recursive||!1,new Promise((e,r)=>{const n=document.createElement("input");n.type="file",n.webkitdirectory=!0;const i=a=>{typeof s=="function"&&s(),e(a)},s=t[0].legacySetup&&t[0].legacySetup(i,()=>s(r),n);n.addEventListener("change",()=>{let a=Array.from(n.files);t[0].recursive?t[0].recursive&&t[0].skipDirectory&&(a=a.filter(o=>o.webkitRelativePath.split("/").every(c=>!t[0].skipDirectory({name:c,kind:"directory"})))):a=a.filter(o=>o.webkitRelativePath.split("/").length===2),i(a)}),"showPicker"in HTMLInputElement.prototype?n.showPicker():n.click()})),nPe={__proto__:null,default:rPe},iPe=async(t,e={})=>{Array.isArray(e)&&(e=e[0]);const r=document.createElement("a");let n=t;"body"in t&&(n=await async function(a,o){const c=a.getReader(),l=new ReadableStream({start:h=>async function d(){return c.read().then(({done:g,value:p})=>{if(!g)return h.enqueue(p),d();h.close()})}()}),u=new Response(l),f=await u.blob();return c.releaseLock(),new Blob([f],{type:o})}(t.body,t.headers.get("content-type"))),r.download=e.fileName||"Untitled",r.href=URL.createObjectURL(await n);const i=()=>{typeof s=="function"&&s()},s=e.legacySetup&&e.legacySetup(i,()=>s(),r);return r.addEventListener("click",()=>{setTimeout(()=>URL.revokeObjectURL(r.href),3e4),i()}),r.click(),null},sPe={__proto__:null,default:iPe};function Zce(t,e){for(var r=0,n=t.length-1;n>=0;n--){var i=t[n];i==="."?t.splice(n,1):i===".."?(t.splice(n,1),r++):r&&(t.splice(n,1),r--)}if(e)for(;r--;r)t.unshift("..");return t}var aPe=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,WL=function(t){return aPe.exec(t).slice(1)};function w7(){for(var t="",e=!1,r=arguments.length-1;r>=-1&&!e;r--){var n=r>=0?arguments[r]:"/";if(typeof n!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!n)continue;t=n+"/"+t,e=n.charAt(0)==="/"}return t=Zce(YL(t.split("/"),function(i){return!!i}),!e).join("/"),(e?"/":"")+t||"."}function KL(t){var e=GL(t),r=oPe(t,-1)==="/";return t=Zce(YL(t.split("/"),function(n){return!!n}),!e).join("/"),!t&&!e&&(t="."),t&&r&&(t+="/"),(e?"/":"")+t}function GL(t){return t.charAt(0)==="/"}function Jce(){var t=Array.prototype.slice.call(arguments,0);return KL(YL(t,function(e,r){if(typeof e!="string")throw new TypeError("Arguments to path.join must be strings");return e}).join("/"))}function Qce(t,e){t=w7(t).substr(1),e=w7(e).substr(1);function r(l){for(var u=0;u<l.length&&l[u]==="";u++);for(var f=l.length-1;f>=0&&l[f]==="";f--);return u>f?[]:l.slice(u,f-u+1)}for(var n=r(t.split("/")),i=r(e.split("/")),s=Math.min(n.length,i.length),a=s,o=0;o<s;o++)if(n[o]!==i[o]){a=o;break}for(var c=[],o=a;o<n.length;o++)c.push("..");return c=c.concat(i.slice(a)),c.join("/")}var ele="/",tle=":";function rle(t){var e=WL(t),r=e[0],n=e[1];return!r&&!n?".":(n&&(n=n.substr(0,n.length-1)),r+n)}function nle(t,e){var r=WL(t)[2];return e&&r.substr(-1*e.length)===e&&(r=r.substr(0,r.length-e.length)),r}function ile(t){return WL(t)[3]}const S1={extname:ile,basename:nle,dirname:rle,sep:ele,delimiter:tle,relative:Qce,join:Jce,isAbsolute:GL,normalize:KL,resolve:w7};function YL(t,e){if(t.filter)return t.filter(e);for(var r=[],n=0;n<t.length;n++)e(t[n],n,t)&&r.push(t[n]);return r}var oPe="ab".substr(-1)==="b"?function(t,e,r){return t.substr(e,r)}:function(t,e,r){return e<0&&(e=t.length+e),t.substr(e,r)};const r6=Object.freeze(Object.defineProperty({__proto__:null,basename:nle,default:S1,delimiter:tle,dirname:rle,extname:ile,isAbsolute:GL,join:Jce,normalize:KL,relative:Qce,resolve:w7,sep:ele},Symbol.toStringTag,{value:"Module"}));function cPe(){return!!(typeof window<"u"&&typeof window.process=="object"&&window.process.type==="renderer"||typeof Et<"u"&&typeof Et.versions=="object"&&Et.versions.electron||typeof navigator=="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent.indexOf("Electron")>=0)}var lPe=cPe;const uPe=si(lPe),XL=typeof window=="object"&&typeof document=="object"&&document.nodeType===9,gS=uPe(),n6=XL&&!gS,Oa=gS&&!XL,sle=gS&&XL,Na=typeof globalThis.process<"u"&&typeof globalThis.process.release<"u"&&globalThis.process.release.name==="node"&&!gS,mS=typeof importScripts=="function"&&typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,fPe=typeof navigator<"u"&&navigator.product==="ReactNative";function A1(t,e){const r=e.find(s=>t[s]!==void 0),n=Object.values(t)[0];return r?t[r]:n}async function ale(t,e,r){r.endsWith(".zip")||(r=`${r}.zip`);const n=new ID;for(const s of t)n.file(s.nom,s.octets);const i=n.folder("sfip");for(const s of e)i.file(s.nom,s.octets);await RD({fichierZip:n,nomFichier:r})}async function RD({fichierZip:t,nomFichier:e}){if(Na||Oa){const r=await Ar(()=>Promise.resolve().then(()=>vc),void 0),n=t.generateNodeStream();r.mkdirSync(S1.dirname(e),{recursive:!0});const i=r.createWriteStream(e),s=n.pipe(i);return new Promise(a=>s.on("finish",a))}else{const r=await t.generateAsync({type:"blob"});await WRe(r,{fileName:e})}}function hPe(t,e){if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0}function ZL(t){if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")}function dPe(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<t.length;i++){var s=t.charAt(i),a=s.charCodeAt(0);if(r[a]!==255)throw new TypeError(s+" is ambiguous");r[a]=i}var o=t.length,c=t.charAt(0),l=Math.log(o)/Math.log(256),u=Math.log(256)/Math.log(o);function f(g){if(g instanceof Uint8Array||(ArrayBuffer.isView(g)?g=new Uint8Array(g.buffer,g.byteOffset,g.byteLength):Array.isArray(g)&&(g=Uint8Array.from(g))),!(g instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(g.length===0)return"";for(var p=0,m=0,y=0,v=g.length;y!==v&&g[y]===0;)y++,p++;for(var _=(v-y)*u+1>>>0,x=new Uint8Array(_);y!==v;){for(var A=g[y],C=0,R=_-1;(A!==0||C<m)&&R!==-1;R--,C++)A+=256*x[R]>>>0,x[R]=A%o>>>0,A=A/o>>>0;if(A!==0)throw new Error("Non-zero carry");m=C,y++}for(var M=_-m;M!==_&&x[M]===0;)M++;for(var N=c.repeat(p);M<_;++M)N+=t.charAt(x[M]);return N}function h(g){if(typeof g!="string")throw new TypeError("Expected String");if(g.length===0)return new Uint8Array;var p=0;if(g[p]!==" "){for(var m=0,y=0;g[p]===c;)m++,p++;for(var v=(g.length-p)*l+1>>>0,_=new Uint8Array(v);g[p];){var x=r[g.charCodeAt(p)];if(x===255)return;for(var A=0,C=v-1;(x!==0||A<y)&&C!==-1;C--,A++)x+=o*_[C]>>>0,_[C]=x%256>>>0,x=x/256>>>0;if(x!==0)throw new Error("Non-zero carry");y=A,p++}if(g[p]!==" "){for(var R=v-y;R!==v&&_[R]===0;)R++;for(var M=new Uint8Array(m+(v-R)),N=m;R!==v;)M[N++]=_[R++];return M}}}function d(g){var p=h(g);if(p)return p;throw new Error(`Non-${e} character`)}return{encode:f,decodeUnsafe:h,decode:d}}var pPe=dPe,gPe=pPe;let mPe=class{name;prefix;baseEncode;constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},yPe=class{name;prefix;baseDecode;prefixCodePoint;constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return ole(this,e)}},vPe=class{decoders;constructor(e){this.decoders=e}or(e){return ole(this,e)}decode(e){const r=e[0],n=this.decoders[r];if(n!=null)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};function ole(t,e){return new vPe({...t.decoders??{[t.prefix]:t},...e.decoders??{[e.prefix]:e}})}let bPe=class{name;prefix;baseEncode;baseDecode;encoder;decoder;constructor(e,r,n,i){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=i,this.encoder=new mPe(e,r,n),this.decoder=new yPe(e,r,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};function cle({name:t,prefix:e,encode:r,decode:n}){return new bPe(t,e,r,n)}function lle({name:t,prefix:e,alphabet:r}){const{encode:n,decode:i}=gPe(r,t);return cle({prefix:e,name:t,encode:n,decode:s=>ZL(i(s))})}function wPe(t,e,r,n){const i={};for(let u=0;u<e.length;++u)i[e[u]]=u;let s=t.length;for(;t[s-1]==="=";)--s;const a=new Uint8Array(s*r/8|0);let o=0,c=0,l=0;for(let u=0;u<s;++u){const f=i[t[u]];if(f===void 0)throw new SyntaxError(`Non-${n} character`);c=c<<r|f,o+=r,o>=8&&(o-=8,a[l++]=255&c>>o)}if(o>=r||255&c<<8-o)throw new SyntaxError("Unexpected end of data");return a}function _Pe(t,e,r){const n=e[e.length-1]==="=",i=(1<<r)-1;let s="",a=0,o=0;for(let c=0;c<t.length;++c)for(o=o<<8|t[c],a+=8;a>r;)a-=r,s+=e[i&o>>a];if(a!==0&&(s+=e[i&o<<r-a]),n)for(;s.length*r&7;)s+="=";return s}function i0({name:t,prefix:e,bitsPerChar:r,alphabet:n}){return cle({prefix:e,name:t,encode(i){return _Pe(i,n,r)},decode(i){return wPe(i,n,r,t)}})}const wx=i0({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5});i0({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5});i0({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5});i0({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5});i0({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5});i0({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5});i0({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5});i0({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5});i0({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});const fd=lle({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"});lle({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var xPe=ule,aG=128,EPe=127,SPe=~EPe,APe=Math.pow(2,31);function ule(t,e,r){e=e||[],r=r||0;for(var n=r;t>=APe;)e[r++]=t&255|aG,t/=128;for(;t&SPe;)e[r++]=t&255|aG,t>>>=7;return e[r]=t|0,ule.bytes=r-n+1,e}var TPe=PD,kPe=128,oG=127;function PD(t,n){var r=0,n=n||0,i=0,s=n,a,o=t.length;do{if(s>=o)throw PD.bytes=0,new RangeError("Could not decode varint");a=t[s++],r+=i<28?(a&oG)<<i:(a&oG)*Math.pow(2,i),i+=7}while(a>=kPe);return PD.bytes=s-n,r}var CPe=Math.pow(2,7),IPe=Math.pow(2,14),RPe=Math.pow(2,21),PPe=Math.pow(2,28),BPe=Math.pow(2,35),DPe=Math.pow(2,42),OPe=Math.pow(2,49),NPe=Math.pow(2,56),MPe=Math.pow(2,63),LPe=function(t){return t<CPe?1:t<IPe?2:t<RPe?3:t<PPe?4:t<BPe?5:t<DPe?6:t<OPe?7:t<NPe?8:t<MPe?9:10},FPe={encode:xPe,decode:TPe,encodingLength:LPe},_7=FPe;function BD(t,e=0){return[_7.decode(t,e),_7.decode.bytes]}function x7(t,e,r=0){return _7.encode(t,e,r),e}function E7(t){return _7.encodingLength(t)}function $Pe(t,e){const r=e.byteLength,n=E7(t),i=n+E7(r),s=new Uint8Array(i+r);return x7(t,s,0),x7(r,s,n),s.set(e,i),new JL(t,r,e,s)}function UPe(t){const e=ZL(t),[r,n]=BD(e),[i,s]=BD(e.subarray(n)),a=e.subarray(n+s);if(a.byteLength!==i)throw new Error("Incorrect length");return new JL(r,i,a,e)}function VPe(t,e){if(t===e)return!0;{const r=e;return t.code===r.code&&t.size===r.size&&r.bytes instanceof Uint8Array&&hPe(t.bytes,r.bytes)}}let JL=class{code;size;digest;bytes;constructor(e,r,n,i){this.code=e,this.size=r,this.digest=n,this.bytes=i}};function cG(t,e){const{bytes:r,version:n}=t;switch(n){case 0:return zPe(r,DD(t),e??fd.encoder);default:return qPe(r,DD(t),e??wx.encoder)}}const lG=new WeakMap;function DD(t){const e=lG.get(t);if(e==null){const r=new Map;return lG.set(t,r),r}return e}let fle=class Za{code;version;multihash;bytes;"/";constructor(e,r,n,i){this.code=r,this.version=e,this.multihash=n,this.bytes=i,this["/"]=i}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{const{code:e,multihash:r}=this;if(e!==tw)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(r.code!==HPe)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return Za.createV0(r)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{const{code:e,digest:r}=this.multihash,n=$Pe(e,r);return Za.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(e){return Za.equals(this,e)}static equals(e,r){const n=r;return n!=null&&e.code===n.code&&e.version===n.version&&VPe(e.multihash,n.multihash)}toString(e){return cG(this,e)}toJSON(){return{"/":cG(this)}}link(){return this}[Symbol.toStringTag]="CID";[Symbol.for("nodejs.util.inspect.custom")](){return`CID(${this.toString()})`}static asCID(e){if(e==null)return null;const r=e;if(r instanceof Za)return r;if(r["/"]!=null&&r["/"]===r.bytes||r.asCID===r){const{version:n,code:i,multihash:s,bytes:a}=r;return new Za(n,i,s,a??uG(n,i,s.bytes))}else if(r[WPe]===!0){const{version:n,multihash:i,code:s}=r,a=UPe(i);return Za.create(n,s,a)}else return null}static create(e,r,n){if(typeof r!="number")throw new Error("String codecs are no longer supported");if(!(n.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(e){case 0:{if(r!==tw)throw new Error(`Version 0 CID must use dag-pb (code: ${tw}) block encoding`);return new Za(e,r,n,n.bytes)}case 1:{const i=uG(e,r,n.bytes);return new Za(e,r,n,i)}default:throw new Error("Invalid version")}}static createV0(e){return Za.create(0,tw,e)}static createV1(e,r){return Za.create(1,e,r)}static decode(e){const[r,n]=Za.decodeFirst(e);if(n.length!==0)throw new Error("Incorrect length");return r}static decodeFirst(e){const r=Za.inspectBytes(e),n=r.size-r.multihashSize,i=ZL(e.subarray(n,n+r.multihashSize));if(i.byteLength!==r.multihashSize)throw new Error("Incorrect length");const s=i.subarray(r.multihashSize-r.digestSize),a=new JL(r.multihashCode,r.digestSize,s,i);return[r.version===0?Za.createV0(a):Za.createV1(r.codec,a),e.subarray(r.size)]}static inspectBytes(e){let r=0;const n=()=>{const[f,h]=BD(e.subarray(r));return r+=h,f};let i=n(),s=tw;if(i===18?(i=0,r=0):s=n(),i!==0&&i!==1)throw new RangeError(`Invalid CID version ${i}`);const a=r,o=n(),c=n(),l=r+c,u=l-a;return{version:i,codec:s,multihashCode:o,digestSize:c,multihashSize:u,size:l}}static parse(e,r){const[n,i]=jPe(e,r),s=Za.decode(i);if(s.version===0&&e[0]!=="Q")throw Error("Version 0 CID string must not include multibase prefix");return DD(s).set(n,e),s}};function jPe(t,e){switch(t[0]){case"Q":{const r=e??fd;return[fd.prefix,r.decode(`${fd.prefix}${t}`)]}case fd.prefix:{const r=e??fd;return[fd.prefix,r.decode(t)]}case wx.prefix:{const r=e??wx;return[wx.prefix,r.decode(t)]}default:{if(e==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[t[0],e.decode(t)]}}}function zPe(t,e,r){const{prefix:n}=r;if(n!==fd.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);const i=e.get(n);if(i==null){const s=r.encode(t).slice(1);return e.set(n,s),s}else return i}function qPe(t,e,r){const{prefix:n}=r,i=e.get(n);if(i==null){const s=r.encode(t);return e.set(n,s),s}else return i}const tw=112,HPe=18;function uG(t,e,r){const n=E7(t),i=n+E7(e),s=new Uint8Array(i+r.byteLength);return x7(t,s,0),x7(e,s,n),s.set(r,i),s}const WPe=Symbol.for("@ipld/js-cid/CID");function li(t=0){return new Uint8Array(t)}function go(t=0){return new Uint8Array(t)}function Yi(t,e){e==null&&(e=t.reduce((i,s)=>i+s.length,0));const r=go(e);let n=0;for(const i of t)r.set(i,n),n+=i.length;return r}function hle(t){if(typeof t=="string")try{return fle.parse(t),!0}catch{return!1}return!1}async function KPe(t,e){let r=new Uint8Array(0);for await(const n of t)if(r=Yi([r,n],r.length+n.length),e!==void 0&&r.length>e)return null;return r}var QL={exports:{}},by=typeof Reflect=="object"?Reflect:null,fG=by&&typeof by.apply=="function"?by.apply:function(e,r,n){return Function.prototype.apply.call(e,r,n)},_x;by&&typeof by.ownKeys=="function"?_x=by.ownKeys:Object.getOwnPropertySymbols?_x=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:_x=function(e){return Object.getOwnPropertyNames(e)};function GPe(t){console&&console.warn&&console.warn(t)}var dle=Number.isNaN||function(e){return e!==e};function fi(){fi.init.call(this)}QL.exports=fi;var OD=QL.exports.once=JPe;fi.EventEmitter=fi;fi.prototype._events=void 0;fi.prototype._eventsCount=0;fi.prototype._maxListeners=void 0;var hG=10;function yS(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(fi,"defaultMaxListeners",{enumerable:!0,get:function(){return hG},set:function(t){if(typeof t!="number"||t<0||dle(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");hG=t}});fi.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};fi.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||dle(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function ple(t){return t._maxListeners===void 0?fi.defaultMaxListeners:t._maxListeners}fi.prototype.getMaxListeners=function(){return ple(this)};fi.prototype.emit=function(e){for(var r=[],n=1;n<arguments.length;n++)r.push(arguments[n]);var i=e==="error",s=this._events;if(s!==void 0)i=i&&s.error===void 0;else if(!i)return!1;if(i){var a;if(r.length>0&&(a=r[0]),a instanceof Error)throw a;var o=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw o.context=a,o}var c=s[e];if(c===void 0)return!1;if(typeof c=="function")fG(c,this,r);else for(var l=c.length,u=ble(c,l),n=0;n<l;++n)fG(u[n],this,r);return!0};function gle(t,e,r,n){var i,s,a;if(yS(r),s=t._events,s===void 0?(s=t._events=Object.create(null),t._eventsCount=0):(s.newListener!==void 0&&(t.emit("newListener",e,r.listener?r.listener:r),s=t._events),a=s[e]),a===void 0)a=s[e]=r,++t._eventsCount;else if(typeof a=="function"?a=s[e]=n?[r,a]:[a,r]:n?a.unshift(r):a.push(r),i=ple(t),i>0&&a.length>i&&!a.warned){a.warned=!0;var o=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");o.name="MaxListenersExceededWarning",o.emitter=t,o.type=e,o.count=a.length,GPe(o)}return t}fi.prototype.addListener=function(e,r){return gle(this,e,r,!1)};fi.prototype.on=fi.prototype.addListener;fi.prototype.prependListener=function(e,r){return gle(this,e,r,!0)};function YPe(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function mle(t,e,r){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},i=YPe.bind(n);return i.listener=r,n.wrapFn=i,i}fi.prototype.once=function(e,r){return yS(r),this.on(e,mle(this,e,r)),this};fi.prototype.prependOnceListener=function(e,r){return yS(r),this.prependListener(e,mle(this,e,r)),this};fi.prototype.removeListener=function(e,r){var n,i,s,a,o;if(yS(r),i=this._events,i===void 0)return this;if(n=i[e],n===void 0)return this;if(n===r||n.listener===r)--this._eventsCount===0?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||r));else if(typeof n!="function"){for(s=-1,a=n.length-1;a>=0;a--)if(n[a]===r||n[a].listener===r){o=n[a].listener,s=a;break}if(s<0)return this;s===0?n.shift():XPe(n,s),n.length===1&&(i[e]=n[0]),i.removeListener!==void 0&&this.emit("removeListener",e,o||r)}return this};fi.prototype.off=fi.prototype.removeListener;fi.prototype.removeAllListeners=function(e){var r,n,i;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[e]),this;if(arguments.length===0){var s=Object.keys(n),a;for(i=0;i<s.length;++i)a=s[i],a!=="removeListener"&&this.removeAllListeners(a);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=n[e],typeof r=="function")this.removeListener(e,r);else if(r!==void 0)for(i=r.length-1;i>=0;i--)this.removeListener(e,r[i]);return this};function yle(t,e,r){var n=t._events;if(n===void 0)return[];var i=n[e];return i===void 0?[]:typeof i=="function"?r?[i.listener||i]:[i]:r?ZPe(i):ble(i,i.length)}fi.prototype.listeners=function(e){return yle(this,e,!0)};fi.prototype.rawListeners=function(e){return yle(this,e,!1)};fi.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):vle.call(t,e)};fi.prototype.listenerCount=vle;function vle(t){var e=this._events;if(e!==void 0){var r=e[t];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}fi.prototype.eventNames=function(){return this._eventsCount>0?_x(this._events):[]};function ble(t,e){for(var r=new Array(e),n=0;n<e;++n)r[n]=t[n];return r}function XPe(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function ZPe(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}function JPe(t,e){return new Promise(function(r,n){function i(a){t.removeListener(e,s),n(a)}function s(){typeof t.removeListener=="function"&&t.removeListener("error",i),r([].slice.call(arguments))}wle(t,e,s,{once:!0}),e!=="error"&&QPe(t,i,{once:!0})})}function QPe(t,e,r){typeof t.on=="function"&&wle(t,"error",e,r)}function wle(t,e,r,n){if(typeof t.on=="function")n.once?t.once(e,r):t.on(e,r);else if(typeof t.addEventListener=="function")t.addEventListener(e,function i(s){n.once&&t.removeEventListener(e,i),r(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var qi=QL.exports;const Q1=si(qi);class eBe{constructor(e){this.queue=void 0,this.maxConcurrent=void 0,this.count=void 0,this.queue=[],this.maxConcurrent=e,this.count=0}get canAcquire(){return this.count<this.maxConcurrent}acquire(){return this.canAcquire?(this.count++,Promise.resolve()):new Promise(e=>this.queue.push(e))}release(){const e=this.queue.shift();e?setTimeout(e,0):this.count--}}const df="_default";let kc=class{constructor(e=1){this.semaphoreInstances=void 0,this.maxConcurrent=void 0,this.semaphoreInstances={},this.maxConcurrent=e}hasSemaphoreInstance(e=df){return!!this.semaphoreInstances[e]}getSemaphoreInstance(e=df){return this.hasSemaphoreInstance(e)||(this.semaphoreInstances[e]=new eBe(this.maxConcurrent)),this.semaphoreInstances[e]}tidy(e=df){this.hasSemaphoreInstance(e)&&this.getSemaphoreInstance(e).count===0&&delete this.semaphoreInstances[e]}canAcquire(e=df){return this.getSemaphoreInstance(e).canAcquire}acquire(e=df){return this.getSemaphoreInstance(e).acquire()}release(e=df){this.getSemaphoreInstance(e).release(),this.tidy(e)}count(e=df){return this.hasSemaphoreInstance(e)?this.getSemaphoreInstance(e).count:0}hasTasks(e=df){return this.count(e)>0}async request(e,r=df){try{return await this.acquire(r),await e()}finally{this.release(r)}}async requestIfAvailable(e,r=df){return this.canAcquire(r)?this.request(e,r):null}};var dG=Object.prototype.toString,_le=function(e){var r=dG.call(e),n=r==="[object Arguments]";return n||(n=r!=="[object Array]"&&e!==null&&typeof e=="object"&&typeof e.length=="number"&&e.length>=0&&dG.call(e.callee)==="[object Function]"),n},oC,pG;function tBe(){if(pG)return oC;pG=1;var t;if(!Object.keys){var e=Object.prototype.hasOwnProperty,r=Object.prototype.toString,n=_le,i=Object.prototype.propertyIsEnumerable,s=!i.call({toString:null},"toString"),a=i.call(function(){},"prototype"),o=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],c=function(h){var d=h.constructor;return d&&d.prototype===h},l={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},u=function(){if(typeof window>"u")return!1;for(var h in window)try{if(!l["$"+h]&&e.call(window,h)&&window[h]!==null&&typeof window[h]=="object")try{c(window[h])}catch{return!0}}catch{return!0}return!1}(),f=function(h){if(typeof window>"u"||!u)return c(h);try{return c(h)}catch{return!1}};t=function(d){var g=d!==null&&typeof d=="object",p=r.call(d)==="[object Function]",m=n(d),y=g&&r.call(d)==="[object String]",v=[];if(!g&&!p&&!m)throw new TypeError("Object.keys called on a non-object");var _=a&&p;if(y&&d.length>0&&!e.call(d,0))for(var x=0;x<d.length;++x)v.push(String(x));if(m&&d.length>0)for(var A=0;A<d.length;++A)v.push(String(A));else for(var C in d)!(_&&C==="prototype")&&e.call(d,C)&&v.push(String(C));if(s)for(var R=f(d),M=0;M<o.length;++M)!(R&&o[M]==="constructor")&&e.call(d,o[M])&&v.push(o[M]);return v}}return oC=t,oC}var rBe=Array.prototype.slice,nBe=_le,gG=Object.keys,xx=gG?function(e){return gG(e)}:tBe(),mG=Object.keys;xx.shim=function(){if(Object.keys){var e=function(){var r=Object.keys(arguments);return r&&r.length===arguments.length}(1,2);e||(Object.keys=function(n){return nBe(n)?mG(rBe.call(n)):mG(n)})}else Object.keys=xx;return Object.keys||xx};var eF=xx,iBe=Error,sBe=EvalError,aBe=RangeError,oBe=ReferenceError,xle=SyntaxError,ep=TypeError,cBe=URIError,vS=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},r=Symbol("test"),n=Object(r);if(typeof r=="string"||Object.prototype.toString.call(r)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var i=42;e[r]=i;for(r in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var s=Object.getOwnPropertySymbols(e);if(s.length!==1||s[0]!==r||!Object.prototype.propertyIsEnumerable.call(e,r))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var a=Object.getOwnPropertyDescriptor(e,r);if(a.value!==i||a.enumerable!==!0)return!1}return!0},yG=typeof Symbol<"u"&&Symbol,lBe=vS,tF=function(){return typeof yG!="function"||typeof Symbol!="function"||typeof yG("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:lBe()},cC={__proto__:null,foo:{}},uBe=Object,fBe=function(){return{__proto__:cC}.foo===cC.foo&&!(cC instanceof uBe)},hBe="Function.prototype.bind called on incompatible ",dBe=Object.prototype.toString,pBe=Math.max,gBe="[object Function]",vG=function(e,r){for(var n=[],i=0;i<e.length;i+=1)n[i]=e[i];for(var s=0;s<r.length;s+=1)n[s+e.length]=r[s];return n},mBe=function(e,r){for(var n=[],i=r,s=0;i<e.length;i+=1,s+=1)n[s]=e[i];return n},yBe=function(t,e){for(var r="",n=0;n<t.length;n+=1)r+=t[n],n+1<t.length&&(r+=e);return r},vBe=function(e){var r=this;if(typeof r!="function"||dBe.apply(r)!==gBe)throw new TypeError(hBe+r);for(var n=mBe(arguments,1),i,s=function(){if(this instanceof i){var u=r.apply(this,vG(n,arguments));return Object(u)===u?u:this}return r.apply(e,vG(n,arguments))},a=pBe(0,r.length-n.length),o=[],c=0;c<a;c++)o[c]="$"+c;if(i=Function("binder","return function ("+yBe(o,",")+"){ return binder.apply(this,arguments); }")(s),r.prototype){var l=function(){};l.prototype=r.prototype,i.prototype=new l,l.prototype=null}return i},bBe=vBe,rF=Function.prototype.bind||bBe,wBe=Function.prototype.call,_Be=Object.prototype.hasOwnProperty,xBe=rF,Ele=xBe.call(wBe,_Be),un,EBe=iBe,SBe=sBe,ABe=aBe,TBe=oBe,$y=xle,wy=ep,kBe=cBe,Sle=Function,lC=function(t){try{return Sle('"use strict"; return ('+t+").constructor;")()}catch{}},xg=Object.getOwnPropertyDescriptor;if(xg)try{xg({},"")}catch{xg=null}var uC=function(){throw new wy},CBe=xg?function(){try{return arguments.callee,uC}catch{try{return xg(arguments,"callee").get}catch{return uC}}}():uC,E2=tF(),IBe=fBe(),sa=Object.getPrototypeOf||(IBe?function(t){return t.__proto__}:null),Y2={},RBe=typeof Uint8Array>"u"||!sa?un:sa(Uint8Array),Eg={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?un:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?un:ArrayBuffer,"%ArrayIteratorPrototype%":E2&&sa?sa([][Symbol.iterator]()):un,"%AsyncFromSyncIteratorPrototype%":un,"%AsyncFunction%":Y2,"%AsyncGenerator%":Y2,"%AsyncGeneratorFunction%":Y2,"%AsyncIteratorPrototype%":Y2,"%Atomics%":typeof Atomics>"u"?un:Atomics,"%BigInt%":typeof BigInt>"u"?un:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?un:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?un:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?un:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":EBe,"%eval%":eval,"%EvalError%":SBe,"%Float32Array%":typeof Float32Array>"u"?un:Float32Array,"%Float64Array%":typeof Float64Array>"u"?un:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?un:FinalizationRegistry,"%Function%":Sle,"%GeneratorFunction%":Y2,"%Int8Array%":typeof Int8Array>"u"?un:Int8Array,"%Int16Array%":typeof Int16Array>"u"?un:Int16Array,"%Int32Array%":typeof Int32Array>"u"?un:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":E2&&sa?sa(sa([][Symbol.iterator]())):un,"%JSON%":typeof JSON=="object"?JSON:un,"%Map%":typeof Map>"u"?un:Map,"%MapIteratorPrototype%":typeof Map>"u"||!E2||!sa?un:sa(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?un:Promise,"%Proxy%":typeof Proxy>"u"?un:Proxy,"%RangeError%":ABe,"%ReferenceError%":TBe,"%Reflect%":typeof Reflect>"u"?un:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?un:Set,"%SetIteratorPrototype%":typeof Set>"u"||!E2||!sa?un:sa(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?un:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":E2&&sa?sa(""[Symbol.iterator]()):un,"%Symbol%":E2?Symbol:un,"%SyntaxError%":$y,"%ThrowTypeError%":CBe,"%TypedArray%":RBe,"%TypeError%":wy,"%Uint8Array%":typeof Uint8Array>"u"?un:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?un:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?un:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?un:Uint32Array,"%URIError%":kBe,"%WeakMap%":typeof WeakMap>"u"?un:WeakMap,"%WeakRef%":typeof WeakRef>"u"?un:WeakRef,"%WeakSet%":typeof WeakSet>"u"?un:WeakSet};if(sa)try{null.error}catch(t){var PBe=sa(sa(t));Eg["%Error.prototype%"]=PBe}var BBe=function t(e){var r;if(e==="%AsyncFunction%")r=lC("async function () {}");else if(e==="%GeneratorFunction%")r=lC("function* () {}");else if(e==="%AsyncGeneratorFunction%")r=lC("async function* () {}");else if(e==="%AsyncGenerator%"){var n=t("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if(e==="%AsyncIteratorPrototype%"){var i=t("%AsyncGenerator%");i&&sa&&(r=sa(i.prototype))}return Eg[e]=r,r},bG={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},i6=rF,S7=Ele,DBe=i6.call(Function.call,Array.prototype.concat),OBe=i6.call(Function.apply,Array.prototype.splice),wG=i6.call(Function.call,String.prototype.replace),A7=i6.call(Function.call,String.prototype.slice),NBe=i6.call(Function.call,RegExp.prototype.exec),MBe=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,LBe=/\\(\\)?/g,FBe=function(e){var r=A7(e,0,1),n=A7(e,-1);if(r==="%"&&n!=="%")throw new $y("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&r!=="%")throw new $y("invalid intrinsic syntax, expected opening `%`");var i=[];return wG(e,MBe,function(s,a,o,c){i[i.length]=o?wG(c,LBe,"$1"):a||s}),i},$Be=function(e,r){var n=e,i;if(S7(bG,n)&&(i=bG[n],n="%"+i[0]+"%"),S7(Eg,n)){var s=Eg[n];if(s===Y2&&(s=BBe(n)),typeof s>"u"&&!r)throw new wy("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:i,name:n,value:s}}throw new $y("intrinsic "+e+" does not exist!")},dh=function(e,r){if(typeof e!="string"||e.length===0)throw new wy("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new wy('"allowMissing" argument must be a boolean');if(NBe(/^%?[^%]*%?$/,e)===null)throw new $y("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=FBe(e),i=n.length>0?n[0]:"",s=$Be("%"+i+"%",r),a=s.name,o=s.value,c=!1,l=s.alias;l&&(i=l[0],OBe(n,DBe([0,1],l)));for(var u=1,f=!0;u<n.length;u+=1){var h=n[u],d=A7(h,0,1),g=A7(h,-1);if((d==='"'||d==="'"||d==="`"||g==='"'||g==="'"||g==="`")&&d!==g)throw new $y("property names with quotes must have matching quotes");if((h==="constructor"||!f)&&(c=!0),i+="."+h,a="%"+i+"%",S7(Eg,a))o=Eg[a];else if(o!=null){if(!(h in o)){if(!r)throw new wy("base intrinsic for "+e+" exists, but the property is not available.");return}if(xg&&u+1>=n.length){var p=xg(o,h);f=!!p,f&&"get"in p&&!("originalValue"in p.get)?o=p.get:o=o[h]}else f=S7(o,h),o=o[h];f&&!c&&(Eg[a]=o)}}return o},UBe=dh,Ex=UBe("%Object.defineProperty%",!0)||!1;if(Ex)try{Ex({},"a",{value:1})}catch{Ex=!1}var nF=Ex,VBe=dh,Sx=VBe("%Object.getOwnPropertyDescriptor%",!0);if(Sx)try{Sx([],"length")}catch{Sx=null}var iF=Sx,_G=nF,jBe=xle,S2=ep,xG=iF,sF=function(e,r,n){if(!e||typeof e!="object"&&typeof e!="function")throw new S2("`obj` must be an object or a function`");if(typeof r!="string"&&typeof r!="symbol")throw new S2("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new S2("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new S2("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new S2("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new S2("`loose`, if provided, must be a boolean");var i=arguments.length>3?arguments[3]:null,s=arguments.length>4?arguments[4]:null,a=arguments.length>5?arguments[5]:null,o=arguments.length>6?arguments[6]:!1,c=!!xG&&xG(e,r);if(_G)_G(e,r,{configurable:a===null&&c?c.configurable:!a,enumerable:i===null&&c?c.enumerable:!i,value:n,writable:s===null&&c?c.writable:!s});else if(o||!i&&!s&&!a)e[r]=n;else throw new jBe("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},ND=nF,Ale=function(){return!!ND};Ale.hasArrayLengthDefineBug=function(){if(!ND)return null;try{return ND([],"length",{value:1}).length!==1}catch{return!0}};var aF=Ale,zBe=eF,qBe=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",HBe=Object.prototype.toString,WBe=Array.prototype.concat,EG=sF,KBe=function(t){return typeof t=="function"&&HBe.call(t)==="[object Function]"},Tle=aF(),GBe=function(t,e,r,n){if(e in t){if(n===!0){if(t[e]===r)return}else if(!KBe(n)||!n())return}Tle?EG(t,e,r,!0):EG(t,e,r)},kle=function(t,e){var r=arguments.length>2?arguments[2]:{},n=zBe(e);qBe&&(n=WBe.call(n,Object.getOwnPropertySymbols(e)));for(var i=0;i<n.length;i+=1)GBe(t,n[i],e[n[i]],r[n[i]])};kle.supportsDescriptors=!!Tle;var Cm=kle,Cle={exports:{}},YBe=dh,SG=sF,XBe=aF(),AG=iF,TG=ep,ZBe=YBe("%Math.floor%"),JBe=function(e,r){if(typeof e!="function")throw new TG("`fn` is not a function");if(typeof r!="number"||r<0||r>4294967295||ZBe(r)!==r)throw new TG("`length` must be a positive 32-bit integer");var n=arguments.length>2&&!!arguments[2],i=!0,s=!0;if("length"in e&&AG){var a=AG(e,"length");a&&!a.configurable&&(i=!1),a&&!a.writable&&(s=!1)}return(i||s||!n)&&(XBe?SG(e,"length",r,!0,!0):SG(e,"length",r)),e};(function(t){var e=rF,r=dh,n=JBe,i=ep,s=r("%Function.prototype.apply%"),a=r("%Function.prototype.call%"),o=r("%Reflect.apply%",!0)||e.call(a,s),c=nF,l=r("%Math.max%");t.exports=function(h){if(typeof h!="function")throw new i("a function is required");var d=o(e,a,arguments);return n(d,1+l(0,h.length-(arguments.length-1)),!0)};var u=function(){return o(e,s,arguments)};c?c(t.exports,"apply",{value:u}):t.exports.apply=u})(Cle);var Hv=Cle.exports,Ile=dh,Rle=Hv,QBe=Rle(Ile("String.prototype.indexOf")),Yl=function(e,r){var n=Ile(e,!!r);return typeof n=="function"&&QBe(e,".prototype.")>-1?Rle(n):n},eDe=eF,Ple=vS(),Ble=Yl,kG=Object,tDe=Ble("Array.prototype.push"),CG=Ble("Object.prototype.propertyIsEnumerable"),rDe=Ple?Object.getOwnPropertySymbols:null,Dle=function(e,r){if(e==null)throw new TypeError("target must be an object");var n=kG(e);if(arguments.length===1)return n;for(var i=1;i<arguments.length;++i){var s=kG(arguments[i]),a=eDe(s),o=Ple&&(Object.getOwnPropertySymbols||rDe);if(o)for(var c=o(s),l=0;l<c.length;++l){var u=c[l];CG(s,u)&&tDe(a,u)}for(var f=0;f<a.length;++f){var h=a[f];if(CG(s,h)){var d=s[h];n[h]=d}}}return n},fC=Dle,nDe=function(){if(!Object.assign)return!1;for(var t="abcdefghijklmnopqrst",e=t.split(""),r={},n=0;n<e.length;++n)r[e[n]]=e[n];var i=Object.assign({},r),s="";for(var a in i)s+=a;return t!==s},iDe=function(){if(!Object.assign||!Object.preventExtensions)return!1;var t=Object.preventExtensions({1:2});try{Object.assign(t,"xy")}catch{return t[1]==="y"}return!1},Ole=function(){return!Object.assign||nDe()||iDe()?fC:Object.assign},sDe=Cm,aDe=Ole,oDe=function(){var e=aDe();return sDe(Object,{assign:e},{assign:function(){return Object.assign!==e}}),e},cDe=Cm,lDe=Hv,uDe=Dle,Nle=Ole,fDe=oDe,hDe=lDe.apply(Nle()),Mle=function(e,r){return hDe(Object,arguments)};cDe(Mle,{getPolyfill:Nle,implementation:uDe,shim:fDe});var dDe=Mle,r4=function(){return typeof function(){}.name=="string"},d3=Object.getOwnPropertyDescriptor;if(d3)try{d3([],"length")}catch{d3=null}r4.functionsHaveConfigurableNames=function(){if(!r4()||!d3)return!1;var e=d3(function(){},"name");return!!e&&!!e.configurable};var pDe=Function.prototype.bind;r4.boundFunctionsHaveNames=function(){return r4()&&typeof pDe=="function"&&function(){}.bind().name!==""};var gDe=r4,IG=sF,mDe=aF(),yDe=gDe.functionsHaveConfigurableNames(),vDe=ep,bDe=function(e,r){if(typeof e!="function")throw new vDe("`fn` is not a function");var n=arguments.length>2&&!!arguments[2];return(!n||yDe)&&(mDe?IG(e,"name",r,!0,!0):IG(e,"name",r)),e},wDe=bDe,_De=ep,xDe=Object,Lle=wDe(function(){if(this==null||this!==xDe(this))throw new _De("RegExp.prototype.flags getter called on non-object");var e="";return this.hasIndices&&(e+="d"),this.global&&(e+="g"),this.ignoreCase&&(e+="i"),this.multiline&&(e+="m"),this.dotAll&&(e+="s"),this.unicode&&(e+="u"),this.unicodeSets&&(e+="v"),this.sticky&&(e+="y"),e},"get flags",!0),EDe=Lle,SDe=Cm.supportsDescriptors,ADe=Object.getOwnPropertyDescriptor,Fle=function(){if(SDe&&/a/mig.flags==="gim"){var e=ADe(RegExp.prototype,"flags");if(e&&typeof e.get=="function"&&"dotAll"in RegExp.prototype&&"hasIndices"in RegExp.prototype){var r="",n={};if(Object.defineProperty(n,"hasIndices",{get:function(){r+="d"}}),Object.defineProperty(n,"sticky",{get:function(){r+="y"}}),e.get.call(n),r==="dy")return e.get}}return EDe},TDe=Cm.supportsDescriptors,kDe=Fle,CDe=Object.getOwnPropertyDescriptor,IDe=Object.defineProperty,RDe=TypeError,RG=Object.getPrototypeOf,PDe=/a/,BDe=function(){if(!TDe||!RG)throw new RDe("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");var e=kDe(),r=RG(PDe),n=CDe(r,"flags");return(!n||n.get!==e)&&IDe(r,"flags",{configurable:!0,enumerable:!1,get:e}),e},DDe=Cm,ODe=Hv,NDe=Lle,$le=Fle,MDe=BDe,Ule=ODe($le());DDe(Ule,{getPolyfill:$le,implementation:NDe,shim:MDe});var LDe=Ule,Ax={exports:{}},FDe=vS,tp=function(){return FDe()&&!!Symbol.toStringTag},$De=tp(),UDe=Yl,MD=UDe("Object.prototype.toString"),bS=function(e){return $De&&e&&typeof e=="object"&&Symbol.toStringTag in e?!1:MD(e)==="[object Arguments]"},Vle=function(e){return bS(e)?!0:e!==null&&typeof e=="object"&&typeof e.length=="number"&&e.length>=0&&MD(e)!=="[object Array]"&&MD(e.callee)==="[object Function]"},VDe=function(){return bS(arguments)}();bS.isLegacyArguments=Vle;var oF=VDe?bS:Vle;const X2={},vc=Object.freeze(Object.defineProperty({__proto__:null,default:X2},Symbol.toStringTag,{value:"Module"})),rp=pae(vc);var cF=typeof Map=="function"&&Map.prototype,hC=Object.getOwnPropertyDescriptor&&cF?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,T7=cF&&hC&&typeof hC.get=="function"?hC.get:null,PG=cF&&Map.prototype.forEach,lF=typeof Set=="function"&&Set.prototype,dC=Object.getOwnPropertyDescriptor&&lF?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,k7=lF&&dC&&typeof dC.get=="function"?dC.get:null,BG=lF&&Set.prototype.forEach,jDe=typeof WeakMap=="function"&&WeakMap.prototype,p3=jDe?WeakMap.prototype.has:null,zDe=typeof WeakSet=="function"&&WeakSet.prototype,g3=zDe?WeakSet.prototype.has:null,qDe=typeof WeakRef=="function"&&WeakRef.prototype,DG=qDe?WeakRef.prototype.deref:null,HDe=Boolean.prototype.valueOf,WDe=Object.prototype.toString,KDe=Function.prototype.toString,GDe=String.prototype.match,uF=String.prototype.slice,d1=String.prototype.replace,YDe=String.prototype.toUpperCase,OG=String.prototype.toLowerCase,jle=RegExp.prototype.test,NG=Array.prototype.concat,Df=Array.prototype.join,XDe=Array.prototype.slice,MG=Math.floor,LD=typeof BigInt=="function"?BigInt.prototype.valueOf:null,pC=Object.getOwnPropertySymbols,FD=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,Uy=typeof Symbol=="function"&&typeof Symbol.iterator=="object",mo=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===Uy||!0)?Symbol.toStringTag:null,zle=Object.prototype.propertyIsEnumerable,LG=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(t){return t.__proto__}:null);function FG(t,e){if(t===1/0||t===-1/0||t!==t||t&&t>-1e3&&t<1e3||jle.call(/e/,e))return e;var r=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof t=="number"){var n=t<0?-MG(-t):MG(t);if(n!==t){var i=String(n),s=uF.call(e,i.length+1);return d1.call(i,r,"$&_")+"."+d1.call(d1.call(s,/([0-9]{3})/g,"$&_"),/_$/,"")}}return d1.call(e,r,"$&_")}var $D=rp,$G=$D.custom,UG=Hle($G)?$G:null,ZDe=function t(e,r,n,i){var s=r||{};if(i1(s,"quoteStyle")&&s.quoteStyle!=="single"&&s.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(i1(s,"maxStringLength")&&(typeof s.maxStringLength=="number"?s.maxStringLength<0&&s.maxStringLength!==1/0:s.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var a=i1(s,"customInspect")?s.customInspect:!0;if(typeof a!="boolean"&&a!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(i1(s,"indent")&&s.indent!==null&&s.indent!=="	"&&!(parseInt(s.indent,10)===s.indent&&s.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(i1(s,"numericSeparator")&&typeof s.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var o=s.numericSeparator;if(typeof e>"u")return"undefined";if(e===null)return"null";if(typeof e=="boolean")return e?"true":"false";if(typeof e=="string")return Kle(e,s);if(typeof e=="number"){if(e===0)return 1/0/e>0?"0":"-0";var c=String(e);return o?FG(e,c):c}if(typeof e=="bigint"){var l=String(e)+"n";return o?FG(e,l):l}var u=typeof s.depth>"u"?5:s.depth;if(typeof n>"u"&&(n=0),n>=u&&u>0&&typeof e=="object")return UD(e)?"[Array]":"[Object]";var f=gOe(s,n);if(typeof i>"u")i=[];else if(Wle(i,e)>=0)return"[Circular]";function h(k,w,T){if(w&&(i=XDe.call(i),i.push(w)),T){var L={depth:s.depth};return i1(s,"quoteStyle")&&(L.quoteStyle=s.quoteStyle),t(k,L,n+1,i)}return t(k,s,n+1,i)}if(typeof e=="function"&&!VG(e)){var d=aOe(e),g=k_(e,h);return"[Function"+(d?": "+d:" (anonymous)")+"]"+(g.length>0?" { "+Df.call(g,", ")+" }":"")}if(Hle(e)){var p=Uy?d1.call(String(e),/^(Symbol\(.*\))_[^)]*$/,"$1"):FD.call(e);return typeof e=="object"&&!Uy?rw(p):p}if(hOe(e)){for(var m="<"+OG.call(String(e.nodeName)),y=e.attributes||[],v=0;v<y.length;v++)m+=" "+y[v].name+"="+qle(JDe(y[v].value),"double",s);return m+=">",e.childNodes&&e.childNodes.length&&(m+="..."),m+="</"+OG.call(String(e.nodeName))+">",m}if(UD(e)){if(e.length===0)return"[]";var _=k_(e,h);return f&&!pOe(_)?"["+VD(_,f)+"]":"[ "+Df.call(_,", ")+" ]"}if(eOe(e)){var x=k_(e,h);return!("cause"in Error.prototype)&&"cause"in e&&!zle.call(e,"cause")?"{ ["+String(e)+"] "+Df.call(NG.call("[cause]: "+h(e.cause),x),", ")+" }":x.length===0?"["+String(e)+"]":"{ ["+String(e)+"] "+Df.call(x,", ")+" }"}if(typeof e=="object"&&a){if(UG&&typeof e[UG]=="function"&&$D)return $D(e,{depth:u-n});if(a!=="symbol"&&typeof e.inspect=="function")return e.inspect()}if(oOe(e)){var A=[];return PG&&PG.call(e,function(k,w){A.push(h(w,e,!0)+" => "+h(k,e))}),jG("Map",T7.call(e),A,f)}if(uOe(e)){var C=[];return BG&&BG.call(e,function(k){C.push(h(k,e))}),jG("Set",k7.call(e),C,f)}if(cOe(e))return gC("WeakMap");if(fOe(e))return gC("WeakSet");if(lOe(e))return gC("WeakRef");if(rOe(e))return rw(h(Number(e)));if(iOe(e))return rw(h(LD.call(e)));if(nOe(e))return rw(HDe.call(e));if(tOe(e))return rw(h(String(e)));if(typeof window<"u"&&e===window)return"{ [object Window] }";if(typeof globalThis<"u"&&e===globalThis||typeof It<"u"&&e===It)return"{ [object globalThis] }";if(!QDe(e)&&!VG(e)){var R=k_(e,h),M=LG?LG(e)===Object.prototype:e instanceof Object||e.constructor===Object,N=e instanceof Object?"":"null prototype",Y=!M&&mo&&Object(e)===e&&mo in e?uF.call(np(e),8,-1):N?"Object":"",H=M||typeof e.constructor!="function"?"":e.constructor.name?e.constructor.name+" ":"",E=H+(Y||N?"["+Df.call(NG.call([],Y||[],N||[]),": ")+"] ":"");return R.length===0?E+"{}":f?E+"{"+VD(R,f)+"}":E+"{ "+Df.call(R,", ")+" }"}return String(e)};function qle(t,e,r){var n=(r.quoteStyle||e)==="double"?'"':"'";return n+t+n}function JDe(t){return d1.call(String(t),/"/g,"&quot;")}function UD(t){return np(t)==="[object Array]"&&(!mo||!(typeof t=="object"&&mo in t))}function QDe(t){return np(t)==="[object Date]"&&(!mo||!(typeof t=="object"&&mo in t))}function VG(t){return np(t)==="[object RegExp]"&&(!mo||!(typeof t=="object"&&mo in t))}function eOe(t){return np(t)==="[object Error]"&&(!mo||!(typeof t=="object"&&mo in t))}function tOe(t){return np(t)==="[object String]"&&(!mo||!(typeof t=="object"&&mo in t))}function rOe(t){return np(t)==="[object Number]"&&(!mo||!(typeof t=="object"&&mo in t))}function nOe(t){return np(t)==="[object Boolean]"&&(!mo||!(typeof t=="object"&&mo in t))}function Hle(t){if(Uy)return t&&typeof t=="object"&&t instanceof Symbol;if(typeof t=="symbol")return!0;if(!t||typeof t!="object"||!FD)return!1;try{return FD.call(t),!0}catch{}return!1}function iOe(t){if(!t||typeof t!="object"||!LD)return!1;try{return LD.call(t),!0}catch{}return!1}var sOe=Object.prototype.hasOwnProperty||function(t){return t in this};function i1(t,e){return sOe.call(t,e)}function np(t){return WDe.call(t)}function aOe(t){if(t.name)return t.name;var e=GDe.call(KDe.call(t),/^function\s*([\w$]+)/);return e?e[1]:null}function Wle(t,e){if(t.indexOf)return t.indexOf(e);for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}function oOe(t){if(!T7||!t||typeof t!="object")return!1;try{T7.call(t);try{k7.call(t)}catch{return!0}return t instanceof Map}catch{}return!1}function cOe(t){if(!p3||!t||typeof t!="object")return!1;try{p3.call(t,p3);try{g3.call(t,g3)}catch{return!0}return t instanceof WeakMap}catch{}return!1}function lOe(t){if(!DG||!t||typeof t!="object")return!1;try{return DG.call(t),!0}catch{}return!1}function uOe(t){if(!k7||!t||typeof t!="object")return!1;try{k7.call(t);try{T7.call(t)}catch{return!0}return t instanceof Set}catch{}return!1}function fOe(t){if(!g3||!t||typeof t!="object")return!1;try{g3.call(t,g3);try{p3.call(t,p3)}catch{return!0}return t instanceof WeakSet}catch{}return!1}function hOe(t){return!t||typeof t!="object"?!1:typeof HTMLElement<"u"&&t instanceof HTMLElement?!0:typeof t.nodeName=="string"&&typeof t.getAttribute=="function"}function Kle(t,e){if(t.length>e.maxStringLength){var r=t.length-e.maxStringLength,n="... "+r+" more character"+(r>1?"s":"");return Kle(uF.call(t,0,e.maxStringLength),e)+n}var i=d1.call(d1.call(t,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,dOe);return qle(i,"single",e)}function dOe(t){var e=t.charCodeAt(0),r={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return r?"\\"+r:"\\x"+(e<16?"0":"")+YDe.call(e.toString(16))}function rw(t){return"Object("+t+")"}function gC(t){return t+" { ? }"}function jG(t,e,r,n){var i=n?VD(r,n):Df.call(r,", ");return t+" ("+e+") {"+i+"}"}function pOe(t){for(var e=0;e<t.length;e++)if(Wle(t[e],`
`)>=0)return!1;return!0}function gOe(t,e){var r;if(t.indent==="	")r="	";else if(typeof t.indent=="number"&&t.indent>0)r=Df.call(Array(t.indent+1)," ");else return null;return{base:r,prev:Df.call(Array(e+1),r)}}function VD(t,e){if(t.length===0)return"";var r=`
`+e.prev+e.base;return r+Df.call(t,","+r)+`
`+e.prev}function k_(t,e){var r=UD(t),n=[];if(r){n.length=t.length;for(var i=0;i<t.length;i++)n[i]=i1(t,i)?e(t[i],t):""}var s=typeof pC=="function"?pC(t):[],a;if(Uy){a={};for(var o=0;o<s.length;o++)a["$"+s[o]]=s[o]}for(var c in t)i1(t,c)&&(r&&String(Number(c))===c&&c<t.length||Uy&&a["$"+c]instanceof Symbol||(jle.call(/[^\w$]/,c)?n.push(e(c,t)+": "+e(t[c],t)):n.push(c+": "+e(t[c],t))));if(typeof pC=="function")for(var l=0;l<s.length;l++)zle.call(t,s[l])&&n.push("["+e(s[l])+"]: "+e(t[s[l]],t));return n}var Gle=dh,Wv=Yl,mOe=ZDe,yOe=ep,C_=Gle("%WeakMap%",!0),I_=Gle("%Map%",!0),vOe=Wv("WeakMap.prototype.get",!0),bOe=Wv("WeakMap.prototype.set",!0),wOe=Wv("WeakMap.prototype.has",!0),_Oe=Wv("Map.prototype.get",!0),xOe=Wv("Map.prototype.set",!0),EOe=Wv("Map.prototype.has",!0),fF=function(t,e){for(var r=t,n;(n=r.next)!==null;r=n)if(n.key===e)return r.next=n.next,n.next=t.next,t.next=n,n},SOe=function(t,e){var r=fF(t,e);return r&&r.value},AOe=function(t,e,r){var n=fF(t,e);n?n.value=r:t.next={key:e,next:t.next,value:r}},TOe=function(t,e){return!!fF(t,e)},Yle=function(){var e,r,n,i={assert:function(s){if(!i.has(s))throw new yOe("Side channel does not contain "+mOe(s))},get:function(s){if(C_&&s&&(typeof s=="object"||typeof s=="function")){if(e)return vOe(e,s)}else if(I_){if(r)return _Oe(r,s)}else if(n)return SOe(n,s)},has:function(s){if(C_&&s&&(typeof s=="object"||typeof s=="function")){if(e)return wOe(e,s)}else if(I_){if(r)return EOe(r,s)}else if(n)return TOe(n,s);return!1},set:function(s,a){C_&&s&&(typeof s=="object"||typeof s=="function")?(e||(e=new C_),bOe(e,s,a)):I_?(r||(r=new I_),xOe(r,s,a)):(n||(n={key:{},next:null}),AOe(n,s,a))}};return i},kOe=Ele,nw=Yle(),Vh=ep,hF={assert:function(t,e){if(!t||typeof t!="object"&&typeof t!="function")throw new Vh("`O` is not an object");if(typeof e!="string")throw new Vh("`slot` must be a string");if(nw.assert(t),!hF.has(t,e))throw new Vh("`"+e+"` is not present on `O`")},get:function(t,e){if(!t||typeof t!="object"&&typeof t!="function")throw new Vh("`O` is not an object");if(typeof e!="string")throw new Vh("`slot` must be a string");var r=nw.get(t);return r&&r["$"+e]},has:function(t,e){if(!t||typeof t!="object"&&typeof t!="function")throw new Vh("`O` is not an object");if(typeof e!="string")throw new Vh("`slot` must be a string");var r=nw.get(t);return!!r&&kOe(r,"$"+e)},set:function(t,e,r){if(!t||typeof t!="object"&&typeof t!="function")throw new Vh("`O` is not an object");if(typeof e!="string")throw new Vh("`slot` must be a string");var n=nw.get(t);n||(n={},nw.set(t,n)),n["$"+e]=r}};Object.freeze&&Object.freeze(hF);var COe=hF,iw=COe,IOe=SyntaxError,zG=typeof StopIteration=="object"?StopIteration:null,ROe=function(e){if(!zG)throw new IOe("this environment lacks StopIteration");iw.set(e,"[[Done]]",!1);var r={next:function(){var i=iw.get(this,"[[Iterator]]"),s=iw.get(i,"[[Done]]");try{return{done:s,value:s?void 0:i.next()}}catch(a){if(iw.set(i,"[[Done]]",!0),a!==zG)throw a;return{done:!0,value:void 0}}}};return iw.set(r,"[[Iterator]]",e),r},POe={}.toString,Xle=Array.isArray||function(t){return POe.call(t)=="[object Array]"},BOe=String.prototype.valueOf,DOe=function(e){try{return BOe.call(e),!0}catch{return!1}},OOe=Object.prototype.toString,NOe="[object String]",MOe=tp(),Zle=function(e){return typeof e=="string"?!0:typeof e!="object"?!1:MOe?DOe(e):OOe.call(e)===NOe},dF=typeof Map=="function"&&Map.prototype?Map:null,LOe=typeof Set=="function"&&Set.prototype?Set:null,C7;dF||(C7=function(e){return!1});var Jle=dF?Map.prototype.has:null,qG=LOe?Set.prototype.has:null;!C7&&!Jle&&(C7=function(e){return!1});var Qle=C7||function(e){if(!e||typeof e!="object")return!1;try{if(Jle.call(e),qG)try{qG.call(e)}catch{return!0}return e instanceof dF}catch{}return!1},FOe=typeof Map=="function"&&Map.prototype?Map:null,pF=typeof Set=="function"&&Set.prototype?Set:null,I7;pF||(I7=function(e){return!1});var HG=FOe?Map.prototype.has:null,eue=pF?Set.prototype.has:null;!I7&&!eue&&(I7=function(e){return!1});var tue=I7||function(e){if(!e||typeof e!="object")return!1;try{if(eue.call(e),HG)try{HG.call(e)}catch{return!0}return e instanceof pF}catch{}return!1},WG=oF,KG=ROe;if(tF()||vS()){var mC=Symbol.iterator;Ax.exports=function(e){if(e!=null&&typeof e[mC]<"u")return e[mC]();if(WG(e))return Array.prototype[mC].call(e)}}else{var $Oe=Xle,UOe=Zle,GG=dh,VOe=GG("%Map%",!0),jOe=GG("%Set%",!0),au=Yl,YG=au("Array.prototype.push"),XG=au("String.prototype.charCodeAt"),zOe=au("String.prototype.slice"),qOe=function(e,r){var n=e.length;if(r+1>=n)return r+1;var i=XG(e,r);if(i<55296||i>56319)return r+1;var s=XG(e,r+1);return s<56320||s>57343?r+1:r+2},yC=function(e){var r=0;return{next:function(){var i=r>=e.length,s;return i||(s=e[r],r+=1),{done:i,value:s}}}},ZG=function(e,r){if($Oe(e)||WG(e))return yC(e);if(UOe(e)){var n=0;return{next:function(){var s=qOe(e,n),a=zOe(e,n,s);return n=s,{done:s>e.length,value:a}}}}if(r&&typeof e["_es6-shim iterator_"]<"u")return e["_es6-shim iterator_"]()};if(!VOe&&!jOe)Ax.exports=function(e){if(e!=null)return ZG(e,!0)};else{var HOe=Qle,WOe=tue,JG=au("Map.prototype.forEach",!0),QG=au("Set.prototype.forEach",!0);if(typeof Et>"u"||!Et.versions||!Et.versions.node)var eY=au("Map.prototype.iterator",!0),tY=au("Set.prototype.iterator",!0);var rY=au("Map.prototype.@@iterator",!0)||au("Map.prototype._es6-shim iterator_",!0),nY=au("Set.prototype.@@iterator",!0)||au("Set.prototype._es6-shim iterator_",!0),KOe=function(e){if(HOe(e)){if(eY)return KG(eY(e));if(rY)return rY(e);if(JG){var r=[];return JG(e,function(i,s){YG(r,[s,i])}),yC(r)}}if(WOe(e)){if(tY)return KG(tY(e));if(nY)return nY(e);if(QG){var n=[];return QG(e,function(i){YG(n,i)}),yC(n)}}};Ax.exports=function(e){return KOe(e)||ZG(e)}}}var GOe=Ax.exports,iY=function(t){return t!==t},rue=function(e,r){return e===0&&r===0?1/e===1/r:!!(e===r||iY(e)&&iY(r))},YOe=rue,nue=function(){return typeof Object.is=="function"?Object.is:YOe},XOe=nue,ZOe=Cm,JOe=function(){var e=XOe();return ZOe(Object,{is:e},{is:function(){return Object.is!==e}}),e},QOe=Cm,eNe=Hv,tNe=rue,iue=nue,rNe=JOe,sue=eNe(iue(),Object);QOe(sue,{getPolyfill:iue,implementation:tNe,shim:rNe});var nNe=sue,iNe=Hv,aue=Yl,sNe=dh,jD=sNe("%ArrayBuffer%",!0),Tx=aue("ArrayBuffer.prototype.byteLength",!0),aNe=aue("Object.prototype.toString"),sY=!!jD&&!Tx&&new jD(0).slice,aY=!!sY&&iNe(sY),oue=Tx||aY?function(e){if(!e||typeof e!="object")return!1;try{return Tx?Tx(e):aY(e,0),!0}catch{return!1}}:jD?function(e){return aNe(e)==="[object ArrayBuffer]"}:function(e){return!1},oNe=Date.prototype.getDay,cNe=function(e){try{return oNe.call(e),!0}catch{return!1}},lNe=Object.prototype.toString,uNe="[object Date]",fNe=tp(),hNe=function(e){return typeof e!="object"||e===null?!1:fNe?cNe(e):lNe.call(e)===uNe},zD=Yl,cue=tp(),lue,uue,qD,HD;if(cue){lue=zD("Object.prototype.hasOwnProperty"),uue=zD("RegExp.prototype.exec"),qD={};var vC=function(){throw qD};HD={toString:vC,valueOf:vC},typeof Symbol.toPrimitive=="symbol"&&(HD[Symbol.toPrimitive]=vC)}var dNe=zD("Object.prototype.toString"),pNe=Object.getOwnPropertyDescriptor,gNe="[object RegExp]",mNe=cue?function(e){if(!e||typeof e!="object")return!1;var r=pNe(e,"lastIndex"),n=r&&lue(r,"value");if(!n)return!1;try{uue(e,HD)}catch(i){return i===qD}}:function(e){return!e||typeof e!="object"&&typeof e!="function"?!1:dNe(e)===gNe},yNe=Yl,oY=yNe("SharedArrayBuffer.prototype.byteLength",!0),vNe=oY?function(e){if(!e||typeof e!="object")return!1;try{return oY(e),!0}catch{return!1}}:function(e){return!1},bNe=Number.prototype.toString,wNe=function(e){try{return bNe.call(e),!0}catch{return!1}},_Ne=Object.prototype.toString,xNe="[object Number]",ENe=tp(),SNe=function(e){return typeof e=="number"?!0:typeof e!="object"?!1:ENe?wNe(e):_Ne.call(e)===xNe},fue=Yl,ANe=fue("Boolean.prototype.toString"),TNe=fue("Object.prototype.toString"),kNe=function(e){try{return ANe(e),!0}catch{return!1}},CNe="[object Boolean]",INe=tp(),RNe=function(e){return typeof e=="boolean"?!0:e===null||typeof e!="object"?!1:INe&&Symbol.toStringTag in e?kNe(e):TNe(e)===CNe},WD={exports:{}},PNe=Object.prototype.toString,BNe=tF();if(BNe){var DNe=Symbol.prototype.toString,ONe=/^Symbol\(.*\)$/,NNe=function(e){return typeof e.valueOf()!="symbol"?!1:ONe.test(DNe.call(e))};WD.exports=function(e){if(typeof e=="symbol")return!0;if(PNe.call(e)!=="[object Symbol]")return!1;try{return NNe(e)}catch{return!1}}}else WD.exports=function(e){return!1};var MNe=WD.exports,KD={exports:{}},cY=typeof BigInt<"u"&&BigInt,LNe=function(){return typeof cY=="function"&&typeof BigInt=="function"&&typeof cY(42)=="bigint"&&typeof BigInt(42)=="bigint"},FNe=LNe();if(FNe){var $Ne=BigInt.prototype.valueOf,UNe=function(e){try{return $Ne.call(e),!0}catch{}return!1};KD.exports=function(e){return e===null||typeof e>"u"||typeof e=="boolean"||typeof e=="string"||typeof e=="number"||typeof e=="symbol"||typeof e=="function"?!1:typeof e=="bigint"?!0:UNe(e)}}else KD.exports=function(e){return!1};var VNe=KD.exports,jNe=Zle,zNe=SNe,qNe=RNe,HNe=MNe,WNe=VNe,KNe=function(e){if(e==null||typeof e!="object"&&typeof e!="function")return null;if(jNe(e))return"String";if(zNe(e))return"Number";if(qNe(e))return"Boolean";if(HNe(e))return"Symbol";if(WNe(e))return"BigInt"},R7=typeof WeakMap=="function"&&WeakMap.prototype?WeakMap:null,lY=typeof WeakSet=="function"&&WeakSet.prototype?WeakSet:null,P7;R7||(P7=function(e){return!1});var GD=R7?R7.prototype.has:null,bC=lY?lY.prototype.has:null;!P7&&!GD&&(P7=function(e){return!1});var GNe=P7||function(e){if(!e||typeof e!="object")return!1;try{if(GD.call(e,GD),bC)try{bC.call(e,bC)}catch{return!0}return e instanceof R7}catch{}return!1},YD={exports:{}},YNe=dh,hue=Yl,XNe=YNe("%WeakSet%",!0),wC=hue("WeakSet.prototype.has",!0);if(wC){var _C=hue("WeakMap.prototype.has",!0);YD.exports=function(e){if(!e||typeof e!="object")return!1;try{if(wC(e,wC),_C)try{_C(e,_C)}catch{return!0}return e instanceof XNe}catch{}return!1}}else YD.exports=function(e){return!1};var ZNe=YD.exports,JNe=Qle,QNe=tue,eMe=GNe,tMe=ZNe,rMe=function(e){if(e&&typeof e=="object"){if(JNe(e))return"Map";if(QNe(e))return"Set";if(eMe(e))return"WeakMap";if(tMe(e))return"WeakSet"}return!1},due=Function.prototype.toString,ny=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,XD,kx;if(typeof ny=="function"&&typeof Object.defineProperty=="function")try{XD=Object.defineProperty({},"length",{get:function(){throw kx}}),kx={},ny(function(){throw 42},null,XD)}catch(t){t!==kx&&(ny=null)}else ny=null;var nMe=/^\s*class\b/,ZD=function(e){try{var r=due.call(e);return nMe.test(r)}catch{return!1}},xC=function(e){try{return ZD(e)?!1:(due.call(e),!0)}catch{return!1}},Cx=Object.prototype.toString,iMe="[object Object]",sMe="[object Function]",aMe="[object GeneratorFunction]",oMe="[object HTMLAllCollection]",cMe="[object HTML document.all class]",lMe="[object HTMLCollection]",uMe=typeof Symbol=="function"&&!!Symbol.toStringTag,fMe=!(0 in[,]),JD=function(){return!1};if(typeof document=="object"){var hMe=document.all;Cx.call(hMe)===Cx.call(document.all)&&(JD=function(e){if((fMe||!e)&&(typeof e>"u"||typeof e=="object"))try{var r=Cx.call(e);return(r===oMe||r===cMe||r===lMe||r===iMe)&&e("")==null}catch{}return!1})}var dMe=ny?function(e){if(JD(e))return!0;if(!e||typeof e!="function"&&typeof e!="object")return!1;try{ny(e,null,XD)}catch(r){if(r!==kx)return!1}return!ZD(e)&&xC(e)}:function(e){if(JD(e))return!0;if(!e||typeof e!="function"&&typeof e!="object")return!1;if(uMe)return xC(e);if(ZD(e))return!1;var r=Cx.call(e);return r!==sMe&&r!==aMe&&!/^\[object HTML/.test(r)?!1:xC(e)},pMe=dMe,gMe=Object.prototype.toString,pue=Object.prototype.hasOwnProperty,mMe=function(e,r,n){for(var i=0,s=e.length;i<s;i++)pue.call(e,i)&&(n==null?r(e[i],i,e):r.call(n,e[i],i,e))},yMe=function(e,r,n){for(var i=0,s=e.length;i<s;i++)n==null?r(e.charAt(i),i,e):r.call(n,e.charAt(i),i,e)},vMe=function(e,r,n){for(var i in e)pue.call(e,i)&&(n==null?r(e[i],i,e):r.call(n,e[i],i,e))},bMe=function(e,r,n){if(!pMe(r))throw new TypeError("iterator must be a function");var i;arguments.length>=3&&(i=n),gMe.call(e)==="[object Array]"?mMe(e,r,i):typeof e=="string"?yMe(e,r,i):vMe(e,r,i)},wMe=bMe,_Me=["Float32Array","Float64Array","Int8Array","Int16Array","Int32Array","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array"],EC=_Me,xMe=typeof globalThis>"u"?It:globalThis,EMe=function(){for(var e=[],r=0;r<EC.length;r++)typeof xMe[EC[r]]=="function"&&(e[e.length]=EC[r]);return e},B7=wMe,SMe=EMe,uY=Hv,gF=Yl,Ix=iF,AMe=gF("Object.prototype.toString"),gue=tp(),fY=typeof globalThis>"u"?It:globalThis,QD=SMe(),mF=gF("String.prototype.slice"),SC=Object.getPrototypeOf,TMe=gF("Array.prototype.indexOf",!0)||function(e,r){for(var n=0;n<e.length;n+=1)if(e[n]===r)return n;return-1},D7={__proto__:null};gue&&Ix&&SC?B7(QD,function(t){var e=new fY[t];if(Symbol.toStringTag in e){var r=SC(e),n=Ix(r,Symbol.toStringTag);if(!n){var i=SC(r);n=Ix(i,Symbol.toStringTag)}D7["$"+t]=uY(n.get)}}):B7(QD,function(t){var e=new fY[t],r=e.slice||e.set;r&&(D7["$"+t]=uY(r))});var kMe=function(e){var r=!1;return B7(D7,function(n,i){if(!r)try{"$"+n(e)===i&&(r=mF(i,1))}catch{}}),r},CMe=function(e){var r=!1;return B7(D7,function(n,i){if(!r)try{n(e),r=mF(i,1)}catch{}}),r},yF=function(e){if(!e||typeof e!="object")return!1;if(!gue){var r=mF(AMe(e),8,-1);return TMe(QD,r)>-1?r:r!=="Object"?!1:CMe(e)}return Ix?kMe(e):null},IMe=Yl,hY=IMe("ArrayBuffer.prototype.byteLength",!0),RMe=oue,PMe=function(e){return RMe(e)?hY?hY(e):e.byteLength:NaN},mue=dDe,ph=Yl,dY=LDe,BMe=dh,Vy=GOe,DMe=Yle,pY=nNe,gY=oF,mY=Xle,yY=oue,vY=hNe,bY=mNe,wY=vNe,_Y=eF,xY=KNe,EY=rMe,SY=yF,AY=PMe,TY=ph("SharedArrayBuffer.prototype.byteLength",!0),kY=ph("Date.prototype.getTime"),AC=Object.getPrototypeOf,CY=ph("Object.prototype.toString"),O7=BMe("%Set%",!0),eO=ph("Map.prototype.has",!0),N7=ph("Map.prototype.get",!0),IY=ph("Map.prototype.size",!0),M7=ph("Set.prototype.add",!0),yue=ph("Set.prototype.delete",!0),L7=ph("Set.prototype.has",!0),Rx=ph("Set.prototype.size",!0);function RY(t,e,r,n){for(var i=Vy(t),s;(s=i.next())&&!s.done;)if(Ou(e,s.value,r,n))return yue(t,s.value),!0;return!1}function vue(t){if(typeof t>"u")return null;if(typeof t!="object")return typeof t=="symbol"?!1:typeof t=="string"||typeof t=="number"?+t==+t:!0}function OMe(t,e,r,n,i,s){var a=vue(r);if(a!=null)return a;var o=N7(e,a),c=mue({},i,{strict:!1});return typeof o>"u"&&!eO(e,a)||!Ou(n,o,c,s)?!1:!eO(t,a)&&Ou(n,o,c,s)}function NMe(t,e,r){var n=vue(r);return n??(L7(e,n)&&!L7(t,n))}function PY(t,e,r,n,i,s){for(var a=Vy(t),o,c;(o=a.next())&&!o.done;)if(c=o.value,Ou(r,c,i,s)&&Ou(n,N7(e,c),i,s))return yue(t,c),!0;return!1}function Ou(t,e,r,n){var i=r||{};if(i.strict?pY(t,e):t===e)return!0;var s=xY(t),a=xY(e);if(s!==a)return!1;if(!t||!e||typeof t!="object"&&typeof e!="object")return i.strict?pY(t,e):t==e;var o=n.has(t),c=n.has(e),l;if(o&&c){if(n.get(t)===n.get(e))return!0}else l={};return o||n.set(t,l),c||n.set(e,l),FMe(t,e,i,n)}function BY(t){return!t||typeof t!="object"||typeof t.length!="number"||typeof t.copy!="function"||typeof t.slice!="function"||t.length>0&&typeof t[0]!="number"?!1:!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))}function MMe(t,e,r,n){if(Rx(t)!==Rx(e))return!1;for(var i=Vy(t),s=Vy(e),a,o,c;(a=i.next())&&!a.done;)if(a.value&&typeof a.value=="object")c||(c=new O7),M7(c,a.value);else if(!L7(e,a.value)){if(r.strict||!NMe(t,e,a.value))return!1;c||(c=new O7),M7(c,a.value)}if(c){for(;(o=s.next())&&!o.done;)if(o.value&&typeof o.value=="object"){if(!RY(c,o.value,r.strict,n))return!1}else if(!r.strict&&!L7(t,o.value)&&!RY(c,o.value,r.strict,n))return!1;return Rx(c)===0}return!0}function LMe(t,e,r,n){if(IY(t)!==IY(e))return!1;for(var i=Vy(t),s=Vy(e),a,o,c,l,u,f;(a=i.next())&&!a.done;)if(l=a.value[0],u=a.value[1],l&&typeof l=="object")c||(c=new O7),M7(c,l);else if(f=N7(e,l),typeof f>"u"&&!eO(e,l)||!Ou(u,f,r,n)){if(r.strict||!OMe(t,e,l,u,r,n))return!1;c||(c=new O7),M7(c,l)}if(c){for(;(o=s.next())&&!o.done;)if(l=o.value[0],f=o.value[1],l&&typeof l=="object"){if(!PY(c,t,l,f,r,n))return!1}else if(!r.strict&&(!t.has(l)||!Ou(N7(t,l),f,r,n))&&!PY(c,t,l,f,mue({},r,{strict:!1}),n))return!1;return Rx(c)===0}return!0}function FMe(t,e,r,n){var i,s;if(typeof t!=typeof e||t==null||e==null||CY(t)!==CY(e)||gY(t)!==gY(e))return!1;var a=mY(t),o=mY(e);if(a!==o)return!1;var c=t instanceof Error,l=e instanceof Error;if(c!==l||(c||l)&&(t.name!==e.name||t.message!==e.message))return!1;var u=bY(t),f=bY(e);if(u!==f||(u||f)&&(t.source!==e.source||dY(t)!==dY(e)))return!1;var h=vY(t),d=vY(e);if(h!==d||(h||d)&&kY(t)!==kY(e)||r.strict&&AC&&AC(t)!==AC(e))return!1;var g=SY(t),p=SY(e);if(g!==p)return!1;if(g||p){if(t.length!==e.length)return!1;for(i=0;i<t.length;i++)if(t[i]!==e[i])return!1;return!0}var m=BY(t),y=BY(e);if(m!==y)return!1;if(m||y){if(t.length!==e.length)return!1;for(i=0;i<t.length;i++)if(t[i]!==e[i])return!1;return!0}var v=yY(t),_=yY(e);if(v!==_)return!1;if(v||_)return AY(t)!==AY(e)?!1:typeof Uint8Array=="function"&&Ou(new Uint8Array(t),new Uint8Array(e),r,n);var x=wY(t),A=wY(e);if(x!==A)return!1;if(x||A)return TY(t)!==TY(e)?!1:typeof Uint8Array=="function"&&Ou(new Uint8Array(t),new Uint8Array(e),r,n);if(typeof t!=typeof e)return!1;var C=_Y(t),R=_Y(e);if(C.length!==R.length)return!1;for(C.sort(),R.sort(),i=C.length-1;i>=0;i--)if(C[i]!=R[i])return!1;for(i=C.length-1;i>=0;i--)if(s=C[i],!Ou(t[s],e[s],r,n))return!1;var M=EY(t),N=EY(e);return M!==N?!1:M==="Set"||N==="Set"?MMe(t,e,r,n):M==="Map"?LMe(t,e,r,n):!0}var $Me=function(e,r,n){return Ou(e,r,n,DMe())};const m3=si($Me);class UMe extends qi.EventEmitter{condition;résultatPrêt;fOublier;résultat;f;constructor(e,r){super(),this.condition=r||(()=>!0),this.résultatPrêt=!1,this.f=e,this.initialiser()}async initialiser(){const e=async r=>{await this.condition(r)&&(this.résultat=r,this.résultatPrêt=!0,this.fOublier&&this.lorsquePrêt())};this.fOublier=await this.f(e),this.lorsquePrêt()}lorsquePrêt(){if(this.résultatPrêt){if(!this.fOublier)throw new Error("Fuite !!");this.fOublier&&this.fOublier(),this.emit("fini",this.résultat)}}}const fs=async({fRacine:t,f:e,fSuivre:r})=>{let n,i,s=!0;const a=await t({fSuivreRacine:async o=>{o===void 0&&s&&(s=!1,await e(void 0)),o!==i&&(i=o,n&&await n(),i?n=await r({id:i,fSuivreBd:e}):(await e(void 0),n=void 0))}});return async()=>{await a(),n&&await n()}},Sn=async function(t,e){const r=new UMe(t,e);return(await OD(r,"fini"))[0]},Li=async()=>{},hs=t=>async e=>{if(e!==void 0)return await t(e)},Bo=t=>{let e=!1,r,n=Li;return i=>new Promise(s=>{if(e&&JSON.stringify(i)===r)return;e=!0,n(),r=JSON.stringify(i);const a=setTimeout(()=>s(!0),t);n=()=>{clearTimeout(a),s(!1)}})},bn=async({fListe:t,f:e,fBranche:r,fIdBdDeBranche:n=a=>a,fRéduction:i=a=>[...new Set(a.flat())],fCode:s=a=>a})=>{const a={},o={};let c=!1;const l=async()=>{if(!c||Object.values(a).length&&Object.values(a).every(y=>!y.déjàÉvaluée))return;const p=Object.values(a).map(y=>y.données).filter(y=>y!==void 0),m=i(p);await e(m)},u=new kc,h=await t(async p=>{if(await u.acquire("racine"),p.some(A=>typeof s(A)!="string"))throw console.error("Définir fCode si les éléments ne sont pas en format texte (chaînes)."),new Error("Définir fCode si les éléments ne sont pas en format texte (chaînes).");const m=Object.fromEntries(p.map(A=>[s(A),A])),y=Object.keys(a);let v=Object.keys(m).filter(A=>!y.includes(A));const _=y.filter(A=>!Object.keys(m).includes(A)),x=Object.entries(m).filter(A=>!m3(o[A[0]],A[1])).map(A=>A[0]);v.push(...x),v=[...new Set(v)],await Promise.all(x.map(async A=>{if(a[A]){const C=a[A].fOublier;C&&await C(),delete a[A]}})),await Promise.all(_.map(async A=>{const C=a[A].fOublier;C&&await C(),delete a[A]})),await Promise.all(v.map(async A=>{a[A]={déjàÉvaluée:!1};const C=m[A];o[A]=C;const R=n(C),N=await r(R,async Y=>{a[A].données=Y,a[A].déjàÉvaluée=!0,await l()},C);a[A].fOublier=N})),c=!0,await l(),u.release("racine")});let d;const g=async()=>{await d(),await Promise.all(Object.values(a).map(p=>p.fOublier&&p.fOublier()))};return typeof h=="function"?(d=h,g):(d=h.fOublier,Object.assign({},h,{fOublier:g}))};var bue={};(function(t){const e={};function r(u){return typeof u=="function"}function n(u){return u===Object(u)}function i(u,f){let h=!1;return typeof f=="string"?f=[f]:Object.prototype.toString.call(f)==="[object Array]"?f.length===0&&(h=!0):h=!0,u?f:h}function s(u,f){let h;if(r(e[u])){try{h=e[u](f)}catch(d){h=["Problem with custom definition for "+u+": "+d]}if(typeof result=="string"&&(h=[h]),Object.prototype.toString.call(h)==="[object Array]")return h}return[]}t.define=(u,f)=>u in l&&r(f)?(e[u]=f,!0):!1,t.isPosition=(u,f=!1)=>{let h=[];return Array.isArray(u)?(u.length<=1&&h.push("Position must be at least two elements"),u.forEach((d,g)=>{typeof d!="number"&&h.push("Position must only contain numbers. Item "+d+" at index "+g+" is invalid.")})):h.push("Position must be an array"),h=h.concat(s("Position",u)),i(f,h)},t.isGeoJSONObject=t.valid=(u,f=!1)=>{if(n(u)){let h=[];if("type"in u){if(o[u.type])return o[u.type](u,f);if(c[u.type])return c[u.type](u,f);h.push('type must be one of: "Point", "MultiPoint", "LineString", "MultiLineString", "Polygon", "MultiPolygon", "GeometryCollection", "Feature", or "FeatureCollection"')}else h.push('must have a member with the name "type"');return h=h.concat(s("GeoJSONObject",u)),i(f,h)}else return i(f,["must be a JSON Object"])},t.isGeometryObject=(u,f=!1)=>{if(!n(u))return i(f,["must be a JSON Object"]);let h=[];if("type"in u){if(c[u.type])return c[u.type](u,f);h.push('type must be one of: "Point", "MultiPoint", "LineString", "MultiLineString", "Polygon", "MultiPolygon" or "GeometryCollection"')}else h.push('must have a member with the name "type"');return h=h.concat(s("GeometryObject",u)),i(f,h)},t.isPoint=(u,f=!1)=>{if(!n(u))return i(f,["must be a JSON Object"]);let h=[];if("bbox"in u){const d=t.isBbox(u.bbox,!0);d.length&&(h=h.concat(d))}if("type"in u?u.type!=="Point"&&h.push('type must be "Point"'):h.push('must have a member with the name "type"'),"coordinates"in u){const d=t.isPosition(u.coordinates,!0);d.length&&(h=h.concat(d))}else h.push('must have a member with the name "coordinates"');return h=h.concat(s("Point",u)),i(f,h)},t.isMultiPointCoor=(u,f=!1)=>{let h=[];return Array.isArray(u)?u.forEach((d,g)=>{const p=t.isPosition(d,!0);p.length&&(p[0]="at "+g+": ".concat(p[0]),h=h.concat(p))}):h.push("coordinates must be an array"),i(f,h)},t.isMultiPoint=(u,f=!1)=>{if(!n(u))return i(f,["must be a JSON Object"]);let h=[];if("bbox"in u){const d=t.isBbox(u.bbox,!0);d.length&&(h=h.concat(d))}if("type"in u?u.type!=="MultiPoint"&&h.push('type must be "MultiPoint"'):h.push('must have a member with the name "type"'),"coordinates"in u){const d=t.isMultiPointCoor(u.coordinates,!0);d.length&&(h=h.concat(d))}else h.push('must have a member with the name "coordinates"');return h=h.concat(s("MultiPoint",u)),i(f,h)},t.isLineStringCoor=(u,f=!1)=>{let h=[];return Array.isArray(u)?u.length>1?u.forEach((d,g)=>{const p=t.isPosition(d,!0);p.length&&(p[0]="at "+g+": ".concat(p[0]),h=h.concat(p))}):h.push("coordinates must have at least two elements"):h.push("coordinates must be an array"),i(f,h)},t.isLineString=(u,f=!1)=>{if(!n(u))return i(f,["must be a JSON Object"]);let h=[];if("bbox"in u){const d=t.isBbox(u.bbox,!0);d.length&&(h=h.concat(d))}if("type"in u?u.type!=="LineString"&&h.push('type must be "LineString"'):h.push('must have a member with the name "type"'),"coordinates"in u){const d=t.isLineStringCoor(u.coordinates,!0);d.length&&(h=h.concat(d))}else h.push('must have a member with the name "coordinates"');return h=h.concat(s("LineString",u)),i(f,h)},t.isMultiLineStringCoor=(u,f=!1)=>{let h=[];return Array.isArray(u)?u.forEach((d,g)=>{const p=t.isLineStringCoor(d,!0);p.length&&(p[0]="at "+g+": ".concat(p[0]),h=h.concat(p))}):h.push("coordinates must be an array"),i(f,h)},t.isMultiLineString=(u,f=!1)=>{if(!n(u))return i(f,["must be a JSON Object"]);let h=[];if("bbox"in u){const d=t.isBbox(u.bbox,!0);d.length&&(h=h.concat(d))}if("type"in u?u.type!=="MultiLineString"&&h.push('type must be "MultiLineString"'):h.push('must have a member with the name "type"'),"coordinates"in u){const d=t.isMultiLineStringCoor(u.coordinates,!0);d.length&&(h=h.concat(d))}else h.push('must have a member with the name "coordinates"');return h=h.concat(s("MultiPoint",u)),i(f,h)};function a(u,f){let h=[];return Array.isArray(u)?(u.forEach((d,g)=>{const p=t.isPosition(d,!0);p.length&&(p[0]="at "+g+": ".concat(p[0]),h=h.concat(p))}),u[0].toString()!==u[u.length-1].toString()&&h.push("The first and last positions must be equivalent"),u.length<4&&h.push("coordinates must have at least four positions")):h.push("coordinates must be an array"),i(f,h)}t.isPolygonCoor=(u,f=!1)=>{let h=[];return Array.isArray(u)?u.forEach((d,g)=>{const p=a(d,!0);p.length&&(p[0]="at "+g+": ".concat(p[0]),h=h.concat(p))}):h.push("coordinates must be an array"),i(f,h)},t.isPolygon=(u,f=!1)=>{if(!n(u))return i(f,["must be a JSON Object"]);let h=[];if("bbox"in u){const d=t.isBbox(u.bbox,!0);d.length&&(h=h.concat(d))}if("type"in u?u.type!=="Polygon"&&h.push('type must be "Polygon"'):h.push('must have a member with the name "type"'),"coordinates"in u){const d=t.isPolygonCoor(u.coordinates,!0);d.length&&(h=h.concat(d))}else h.push('must have a member with the name "coordinates"');return h=h.concat(s("Polygon",u)),i(f,h)},t.isMultiPolygonCoor=(u,f=!1)=>{let h=[];return Array.isArray(u)?u.forEach((d,g)=>{const p=t.isPolygonCoor(d,!0);p.length&&(p[0]="at "+g+": ".concat(p[0]),h=h.concat(p))}):h.push("coordinates must be an array"),i(f,h)},t.isMultiPolygon=(u,f=!1)=>{if(!n(u))return i(f,["must be a JSON Object"]);let h=[];if("bbox"in u){const d=t.isBbox(u.bbox,!0);d.length&&(h=h.concat(d))}if("type"in u?u.type!=="MultiPolygon"&&h.push('type must be "MultiPolygon"'):h.push('must have a member with the name "type"'),"coordinates"in u){const d=t.isMultiPolygonCoor(u.coordinates,!0);d.length&&(h=h.concat(d))}else h.push('must have a member with the name "coordinates"');return h=h.concat(s("MultiPolygon",u)),i(f,h)},t.isGeometryCollection=(u,f=!1)=>{if(!n(u))return i(f,["must be a JSON Object"]);let h=[];if("bbox"in u){const d=t.isBbox(u.bbox,!0);d.length&&(h=h.concat(d))}return"type"in u?u.type!=="GeometryCollection"&&h.push('type must be "GeometryCollection"'):h.push('must have a member with the name "type"'),"geometries"in u?Array.isArray(u.geometries)?u.geometries.forEach((d,g)=>{const p=t.isGeometryObject(d,!0);p.length&&(p[0]="at "+g+": ".concat(p[0]),h=h.concat(p))}):h.push('"geometries" must be an array'):h.push('must have a member with the name "geometries"'),h=h.concat(s("GeometryCollection",u)),i(f,h)},t.isFeature=(u,f=!1)=>{if(!n(u))return i(f,["must be a JSON Object"]);let h=[];if("bbox"in u){const d=t.isBbox(u.bbox,!0);d.length&&(h=h.concat(d))}if("type"in u?u.type!=="Feature"&&h.push('type must be "Feature"'):h.push('must have a member with the name "type"'),"properties"in u||h.push('must have a member with the name "properties"'),"geometry"in u){if(u.geometry!==null){const d=t.isGeometryObject(u.geometry,!0);d.length&&(h=h.concat(d))}}else h.push('must have a member with the name "geometry"');return h=h.concat(s("Feature",u)),i(f,h)},t.isFeatureCollection=(u,f=!1)=>{if(!n(u))return i(f,["must be a JSON Object"]);let h=[];if("bbox"in u){const d=t.isBbox(u.bbox,!0);d.length&&(h=d)}return"type"in u?u.type!=="FeatureCollection"&&h.push('type must be "FeatureCollection"'):h.push('must have a member with the name "type"'),"features"in u?Array.isArray(u.features)?u.features.forEach((d,g)=>{const p=t.isFeature(d,!0);p.length&&(p[0]="at "+g+": ".concat(p[0]),h=h.concat(p))}):h.push('"Features" must be an array'):h.push('must have a member with the name "Features"'),h=h.concat(s("FeatureCollection",u)),i(f,h)},t.isBbox=(u,f=!1)=>{let h=[];return Array.isArray(u)?u.length%2!==0&&h.push("bbox, must be a 2*n array"):h.push("bbox must be an array"),h=h.concat(s("Bbox",u)),i(f,h)};const o={Feature:t.isFeature,FeatureCollection:t.isFeatureCollection},c={Point:t.isPoint,MultiPoint:t.isMultiPoint,LineString:t.isLineString,MultiLineString:t.isMultiLineString,Polygon:t.isPolygon,MultiPolygon:t.isMultiPolygon,GeometryCollection:t.isGeometryCollection},l={Feature:t.isFeature,FeatureCollection:t.isFeatureCollection,Point:t.isPoint,MultiPoint:t.isMultiPoint,LineString:t.isLineString,MultiLineString:t.isMultiLineString,Polygon:t.isPolygon,MultiPolygon:t.isMultiPolygon,GeometryCollection:t.isGeometryCollection,Bbox:t.isBbox,Position:t.isPosition,GeoJSON:t.isGeoJSONObject,GeometryObject:t.isGeometryObject};t.allTypes=l})(bue);const VMe=si(bue),jMe=t=>!!t&&typeof t.système=="string"&&typeof t.val=="string";let zMe=class{lireDate(e){const{système:r,val:n}=e;switch(r){case"dateJS":case"grégorien":{const i=new Date(n);if(isNaN(i.valueOf()))throw new Error(n);return i}default:throw new Error(r)}}dateValide(e){if(!jMe(e))return!1;try{return this.lireDate(e),!0}catch{return!1}}};const qMe=new zMe,wue=t=>{if(t=t.toString(),!t.startsWith("/orbitdb")&&!t.startsWith("\\orbitdb"))return!1;t=t.replaceAll("/orbitdb/",""),t=t.replaceAll("\\orbitdb\\",""),t=t.replaceAll("/",""),t=t.replaceAll("\\","");let e;try{e=fle.parse(t,fd)}catch{return!1}return e!==void 0},TC={images:["webp","svg","png","jpg","jpeg","jfif","pjpeg","pjp","gif","avif","apng"],vidéo:["mp4"],audio:["mp3","ogg","m4a"]},DY=t=>{if(["number","string"].includes(typeof t)){const e=new Date(t);return!isNaN(e.valueOf())}else return qMe.dateValide(t)},R_=(t,e)=>{if(typeof t!="string")return!1;let r,n;try{[r,n]=t.split("/")}catch{return!1}if(!n||!hle(r))return!1;if(e){const i=n.split(".").pop();return!!i&&e.includes(i)}return!0},OY=({catégorie:t,val:e})=>{switch(t){case"numérique":return typeof e=="number";case"horoDatage":return DY(e);case"intervaleTemps":return!Array.isArray(e)||e.length!==2?!1:e.every(r=>DY(r));case"chaîne":return typeof e=="string"&&wue(e);case"chaîneNonTraductible":return typeof e=="string";case"booléen":return typeof e=="boolean";case"géojson":return typeof e!="object"?!1:VMe.valid(e);case"vidéo":return R_(e,TC.vidéo);case"audio":return R_(e,TC.audio);case"image":return R_(e,TC.images);case"fichier":return R_(e);default:return!1}};function HMe({val:t,catégorie:e}){return t===void 0?!0:e.type==="simple"?OY({catégorie:e.catégorie,val:t}):Array.isArray(t)?t.every(r=>OY({catégorie:e.catégorie,val:r})):!1}var _ue={exports:{}};(function(t,e){(function(r,n){t.exports=n()})(It,function(){var r=typeof Promise=="function",n=function(R){if(typeof globalThis=="object")return globalThis;Object.defineProperty(R,"typeDetectGlobalObject",{get:function(){return this},configurable:!0});var M=typeDetectGlobalObject;return delete R.typeDetectGlobalObject,M}(Object.prototype),i=typeof Symbol<"u",s=typeof Map<"u",a=typeof Set<"u",o=typeof WeakMap<"u",c=typeof WeakSet<"u",l=typeof DataView<"u",u=i&&typeof Symbol.iterator<"u",f=i&&typeof Symbol.toStringTag<"u",h=a&&typeof Set.prototype.entries=="function",d=s&&typeof Map.prototype.entries=="function",g=h&&Object.getPrototypeOf(new Set().entries()),p=d&&Object.getPrototypeOf(new Map().entries()),m=u&&typeof Array.prototype[Symbol.iterator]=="function",y=m&&Object.getPrototypeOf([][Symbol.iterator]()),v=u&&typeof String.prototype[Symbol.iterator]=="function",_=v&&Object.getPrototypeOf(""[Symbol.iterator]()),x=8,A=-1;function C(R){var M=typeof R;if(M!=="object")return M;if(R===null)return"null";if(R===n)return"global";if(Array.isArray(R)&&(f===!1||!(Symbol.toStringTag in R)))return"Array";if(typeof window=="object"&&window!==null){if(typeof window.location=="object"&&R===window.location)return"Location";if(typeof window.document=="object"&&R===window.document)return"Document";if(typeof window.navigator=="object"){if(typeof window.navigator.mimeTypes=="object"&&R===window.navigator.mimeTypes)return"MimeTypeArray";if(typeof window.navigator.plugins=="object"&&R===window.navigator.plugins)return"PluginArray"}if((typeof window.HTMLElement=="function"||typeof window.HTMLElement=="object")&&R instanceof window.HTMLElement){if(R.tagName==="BLOCKQUOTE")return"HTMLQuoteElement";if(R.tagName==="TD")return"HTMLTableDataCellElement";if(R.tagName==="TH")return"HTMLTableHeaderCellElement"}}var N=f&&R[Symbol.toStringTag];if(typeof N=="string")return N;var Y=Object.getPrototypeOf(R);return Y===RegExp.prototype?"RegExp":Y===Date.prototype?"Date":r&&Y===Promise.prototype?"Promise":a&&Y===Set.prototype?"Set":s&&Y===Map.prototype?"Map":c&&Y===WeakSet.prototype?"WeakSet":o&&Y===WeakMap.prototype?"WeakMap":l&&Y===DataView.prototype?"DataView":s&&Y===p?"Map Iterator":a&&Y===g?"Set Iterator":m&&Y===y?"Array Iterator":v&&Y===_?"String Iterator":Y===null?"Object":Object.prototype.toString.call(R).slice(x,A)}return C})})(_ue);var WMe=_ue.exports;const KMe=si(WMe),vF=typeof Buffer<"u",GMe=vF&&typeof Buffer.from<"u",YMe=vF?function(e){return Buffer.isBuffer(e)}:function(){return!1},XMe=GMe?function(e){return Buffer.from(e)}:vF?function(e){return new Buffer(e)}:function(e){return e};function jy(t){return YMe(t)?"Buffer":KMe(t)}const ZMe=new Set(["Arguments","Array","Map","Object","Set"]);function JMe(t,e,r=null){switch(r||jy(t)){case"Arguments":case"Array":case"Object":return t[e];case"Map":return t.get(e);case"Set":return e}}function tO(t){return ZMe.has(t)}function NY(t,e,r,n=null){switch(n||jy(t)){case"Arguments":case"Array":case"Object":t[e]=r;break;case"Map":t.set(e,r);break;case"Set":t.add(r);break}return t}const QMe=typeof globalThis<"u"&&globalThis!==null&&globalThis.Object===Object&&globalThis,eLe=typeof global<"u"&&global!==null&&global.Object===Object&&global,tLe=typeof self<"u"&&self!==null&&self.Object===Object&&self,kC=QMe||eLe||tLe||Function("return this")();function rLe(t){return t.slice(0)}function nLe(t){return new Boolean(t.valueOf())}function iLe(t){return new DataView(t.buffer)}function sLe(t){return XMe(t)}function aLe(t){return new Date(t.getTime())}function oLe(t){return new Number(t)}function cLe(t){return new RegExp(t.source,t.flags)}function lLe(t){return new String(t)}function jh(t,e){return kC[e].from?kC[e].from(t):new kC[e](t)}function Co(t){return t}function MY(){return[]}function uLe(){return new Map}function fLe(){return{}}function hLe(){return new Set}const dLe=new Map([["ArrayBuffer",rLe],["Boolean",nLe],["Buffer",sLe],["DataView",iLe],["Date",aLe],["Number",oLe],["RegExp",cLe],["String",lLe],["Float32Array",jh],["Float64Array",jh],["Int16Array",jh],["Int32Array",jh],["Int8Array",jh],["Uint16Array",jh],["Uint32Array",jh],["Uint8Array",jh],["Uint8ClampedArray",jh],["Array Iterator",Co],["Map Iterator",Co],["Promise",Co],["Set Iterator",Co],["String Iterator",Co],["function",Co],["global",Co],["WeakMap",Co],["WeakSet",Co],["boolean",Co],["null",Co],["number",Co],["string",Co],["symbol",Co],["undefined",Co],["Arguments",MY],["Array",MY],["Map",uLe],["Object",fLe],["Set",hLe]]);function pLe(){}function rO(t,e=null,r=pLe){arguments.length===2&&typeof e=="function"&&(r=e,e=null);const n=e||jy(t),i=dLe.get(n);if(n==="Object"){const s=r(t,n);if(s!==void 0)return s}return i?i(t,n):t}function bF(t,e={}){typeof e=="function"&&(e={customizer:e});const{customizer:r}=e,n=jy(t);if(!tO(n))return nO(t,null,null,null);const i=rO(t,n,r),s=new WeakMap([[t,i]]),a=new WeakSet([t]);return nO(t,i,s,a)}function nO(t,e,r,n,i){const s=jy(t),a=rO(t,s);if(!tO(s))return a;let o;switch(s){case"Arguments":case"Array":o=Object.keys(t);break;case"Object":o=Object.keys(t),o.push(...Object.getOwnPropertySymbols(t));break;case"Map":case"Set":o=t.keys();break}for(let c of o){const l=JMe(t,c,s);if(n.has(l))NY(e,c,r.get(l),s);else{const u=jy(l),f=rO(l,u);tO(u)&&(r.set(l,f),n.add(l)),NY(e,c,nO(l,f,r,n),s)}}return e}const xue="அங்கீகறிக்கப்பட்ட தரவுகள்",wF="பங்கேற்பாளர்",Eue="/orbitdb/zdpuAunUaEc6CRX8wAjNixNioB6hF5SYvwJytx4ynm5wQx1vH",qg="தேதி",_F="/orbitdb/zdpuAkz4jAZW5EM3rK7huQoZAE6L26dtpoVd4UYGGyaQkDmTx",gLe={அங்கீகார_தத_மீதரவு_சாபி:xue,பங்கேற்பாளர்_நெடுவரிசை_அடையாளம்:wF,பங்கேற்பாளர்_மாறி_அடையாளம்:Eue,தேதி_நெடுவரிசை_அடையாளம்:qg,தேதி_மாறி_அடையாளம்:_F},mLe=t=>(t=bF(t),t.tableaux=t.tableaux.map(e=>({clef:e.clef,cols:e.cols.map(r=>({idColonne:r.idColonne,idVariable:r.idVariable,optionnelle:r.optionnelle}))})),t);class Hg{விண்மீன்;அட்டவணை_சாபி;குழு_அடையாளம்;வார்ப்புரு;மாறிலிகள்;constructor({விண்மீன்:e,அட்டவணை_சாபி:r,குழு_அடையாளம்:n,வார்ப்புரு:i,மாறிலிகள்:s}){this.விண்மீன்=e,this.அட்டவணை_சாபி=r,this.குழு_அடையாளம்=n,i=Hg.வார்ப்புரு_தயாரிப்பு({வார்ப்புரு:i,அட்டவணை_சாபி:r,குழு_அடையாளம்:n,மாறிலிகள்:s}),this.வார்ப்புரு=mLe(i),this.மாறிலிகள்=Object.assign({},gLe,s)}static வார்ப்புரு_தயாரிப்பு({வார்ப்புரு:e,அட்டவணை_சாபி:r,குழு_அடையாளம்:n,மாறிலிகள்:i}){const s=bF(e),a=s.tableaux.find(c=>c.clef===r);if(!a)throw new Error("அட்டவணை சாபி அட்டவணை வார்ப்புரில் கிடைத்ததில்லை.");return a.cols.find(c=>c.idColonne===(i?.தேதி_நெடுவரிசை_அடையாளம்||qg))||(a.cols.push({idVariable:i?.தேதி_மாறி_அடையாளம்||_F,idColonne:i?.தேதி_நெடுவரிசை_அடையாளம்||qg}),s.tableaux=s.tableaux.map(c=>c.clef===r?a:c)),s.nuées||(s.nuées=[]),s.nuées.includes(n)||s.nuées.push(n),s}static async உருவாக்கு({விண்மீன்:e,வார்ப்புரு:r,அட்டவணை_சாபி:n,பேற்றோர்:i,மாறிலிகள்:s}){if(!e.nuées||!e.bds)throw new Error("விண்மீன் தயராரானதில்லை");const a=await e.nuées.créerNuée({nuéeParent:i});r=this.வார்ப்புரு_தயாரிப்பு({வார்ப்புரு:r,அட்டவணை_சாபி:n,குழு_அடையாளம்:a,மாறிலிகள்:s});for(const l of r.tableaux){const u=await e.nuées.ajouterTableauNuée({idNuée:a,clefTableau:l.clef});for(const f of l.cols)await e.nuées.ajouterColonneTableauNuée({idTableau:u,idVariable:f.idVariable,idColonne:f.idColonne}),f.index;r.motsClefs&&await e.nuées.ajouterMotsClefsNuée({idNuée:a,idsMotsClefs:r.motsClefs})}const o={licence:r.licence,motsClefs:r.motsClefs,tableaux:r.tableaux.map(l=>l.clef===n?{clef:l.clef,cols:[...l.cols,{idColonne:s?.பங்கேற்பாளர்_நெடுவரிசை_அடையாளம்||wF,idVariable:s?.பங்கேற்பாளர்_மாறி_அடையாளம்||Eue}]}:l)},c=await e.bds.créerBdDeSchéma({schéma:o});return await e.nuées.sauvegarderMétadonnéeNuée({idNuée:a,clef:xue,valeur:c}),a}async அங்கீகரிக்கப்பட்ட_உறுப்படிகளை_கேள்ளு({செ:e}){return await bn({fListe:async r=>await this.விண்மீன்.nuées.suivreNuéesParents({idNuée:this.குழு_அடையாளம்,f:n=>r([this.குழு_அடையாளம்,...n].reverse())}),f:async r=>await e(r),fBranche:async(r,n)=>await fs({fRacine:async({fSuivreRacine:i})=>await this.அங்கீகார_தரவுத்தள்ளத்தைப்_கேள்ளு({செ:i,அடையாளம்:r}),f:hs(n),fSuivre:async({id:i,fSuivreBd:s})=>await this.விண்மீன்.bds.suivreDonnéesDeTableauParClef({idBd:i,clefTableau:this.அட்டவணை_சாபி,f:s})})})}async பரிந்துரைகளை_கேள்ளு({செ:e,சந்ததி:r=!0}){return await this.விண்மீன்.nuées.suivreDonnéesTableauNuée({idNuée:this.குழு_அடையாளம்,clefTableau:this.அட்டவணை_சாபி,héritage:r?["descendance","ascendance"]:["ascendance"],f:async n=>{await e(n.map(i=>({பங்கேற்பாளர்:i.idCompte,அடையாளம்:i.élément.id,பரிந்துரை:i.élément.données})))},nRésultatsDésirés:1e3})}async என்_பரிந்துரைகளை_கேள்ளு({செ:e}){return await this.விண்மீன்.bds.suivreDonnéesDeTableauUnique({schémaBd:this.வார்ப்புரு,idNuéeUnique:this.குழு_அடையாளம்,clefTableau:this.அட்டவணை_சாபி,f:async r=>{const n=await this.விண்மீன்.obtIdCompte();await e(r.map(i=>({பங்கேற்பாளர்:n,அடையாளம்:i.id,பரிந்துரை:i.données})))}})}async பரிந்துரையு({பரிந்துரை:e}){const r=i=>i[this.மாறிலிகள்.தேதி_நெடுவரிசை_அடையாளம்]?i:{...i,[this.மாறிலிகள்.தேதி_நெடுவரிசை_அடையாளம்]:Date.now()};return(await this.விண்மீன்.bds.ajouterÉlémentÀTableauUnique({schémaBd:this.வார்ப்புரு,idNuéeUnique:this.குழு_அடையாளம்,clefTableau:this.அட்டவணை_சாபி,vals:r(e)}))[0]}async பரிந்துரையை_நீக்கு({அடையாளம்:e}){return await this.விண்மீன்.bds.effacerÉlémentDeTableauUnique({schémaBd:this.வார்ப்புரு,idNuéeUnique:this.குழு_அடையாளம்,clefTableau:this.அட்டவணை_சாபி,idÉlément:e})}async பரிந்துரையை_திருத்து({பரிந்துரை:e,அடையாளம்:r}){await this.விண்மீன்.bds.modifierÉlémentDeTableauUnique({schémaBd:this.வார்ப்புரு,idNuéeUnique:this.குழு_அடையாளம்,clefTableau:this.அட்டவணை_சாபி,vals:e,idÉlément:r})}async அங்கீகார_தரவுத்தள்ளத்தைப்_கேள்ளு({செ:e,அடையாளம்:r}){const n=async i=>{const s=i[this.மாறிலிகள்.அங்கீகார_தத_மீதரவு_சாபி];if(typeof s=="string")return await e(s)};return await this.விண்மீன்.nuées.suivreMétadonnéesNuée({idNuée:r||this.குழு_அடையாளம்,f:n,hériter:!1})}async அங்கீகார_தரவுத்தள்ளத்தைப்_பெறு(){return await Sn(async r=>await this.அங்கீகார_தரவுத்தள்ளத்தைப்_கேள்ளு({செ:r}))}async அங்கீகரி({பரிந்துரை:e}){const r=await this.அங்கீகார_தரவுத்தள்ளத்தைப்_பெறு(),n=Object.assign({},e.பரிந்துரை,{[this.மாறிலிகள்.பங்கேற்பாளர்_நெடுவரிசை_அடையாளம்]:e.பங்கேற்பாளர்}),s=(await Sn(async a=>await this.அங்கீகரிக்கப்பட்ட_உறுப்படிகளை_கேள்ளு({செ:a}))).find(a=>this.குறியீட்டு_நெடுவரிசைகள்_சமம்(a.données,n));return s?(await this.அங்கீகரிக்கப்பட்ட_உறுப்படியை_திருத்து({பரிந்துரை:e,அடையாளம்:s.id}),s.id):(await this.விண்மீன்.bds.ajouterÉlémentÀTableauParClef({idBd:r,clefTableau:this.அட்டவணை_சாபி,vals:n}))[0]}async அங்கீகரிக்கப்பட்ட_உறுப்படியை_நீக்கு({அடையாளம்:e}){const r=await this.அங்கீகார_தரவுத்தள்ளத்தைப்_பெறு();await this.விண்மீன்.bds.effacerÉlémentDeTableauParClef({idBd:r,clefTableau:this.அட்டவணை_சாபி,idÉlément:e})}async அங்கீகரிக்கப்பட்ட_உறுப்படியை_திருத்து({பரிந்துரை:e,அடையாளம்:r}){const n=await this.அங்கீகார_தரவுத்தள்ளத்தைப்_பெறு();await this.விண்மீன்.bds.modifierÉlémentDeTableauParClef({idBd:n,clefTableau:this.அட்டவணை_சாபி,idÉlément:r,vals:{...e.பரிந்துரை,[this.மாறிலிகள்.பங்கேற்பாளர்_நெடுவரிசை_அடையாளம்]:e.பங்கேற்பாளர்}})}குறியீட்டு_நெடுவரிசைகள்_சமம்(e,r){return(this.வார்ப்புரு.tableaux.find(i=>i.clef===this.அட்டவணை_சாபி)?.cols.filter(i=>i.index).map(i=>i.idColonne)||[]).every(i=>e[i]===r[i])}async உறுப்படிகளை_கேள்ளு({செ:e,பரிந்துரைகள்:r="எனது"}){const n={அங்கீகரிக்கப்பட்டவை:[],பந்திருரைக்கப்பட்டவை:[]},i=async()=>{const o=[];for(const c of n.பந்திருரைக்கப்பட்டவை){const l=o.find(u=>this.குறியீட்டு_நெடுவரிசைகள்_சமம்(u,c));if(l){const u=l[this.மாறிலிகள்.தேதி_நெடுவரிசை_அடையாளம்],f=c[this.மாறிலிகள்.தேதி_நெடுவரிசை_அடையாளம்];u&&f&&f>u&&(o.splice(o.indexOf(l),1),o.push(c))}else o.push(c)}for(const c of n.அங்கீகரிக்கப்பட்டவை){const l=o.find(u=>this.குறியீட்டு_நெடுவரிசைகள்_சமம்(u,c));l&&o.splice(o.indexOf(l),1),o.push(c)}return await e(o)},a=[await this.அங்கீகரிக்கப்பட்ட_உறுப்படிகளை_கேள்ளு({செ:async o=>{n.அங்கீகரிக்கப்பட்டவை=o.map(c=>c.données),await i()}})];if(r==="அனைத்தும்"){const o=await this.பரிந்துரைகளை_கேள்ளு({செ:async c=>{n.பந்திருரைக்கப்பட்டவை=c.map(l=>({[this.மாறிலிகள்.பங்கேற்பாளர்_நெடுவரிசை_அடையாளம்]:l.பங்கேற்பாளர்,...l.பரிந்துரை})),await i()}});a.push(o.fOublier)}else if(r==="எனது"){const o=await this.என்_பரிந்துரைகளை_கேள்ளு({செ:async c=>{n.பந்திருரைக்கப்பட்டவை=c.map(l=>({[this.மாறிலிகள்.பங்கேற்பாளர்_நெடுவரிசை_அடையாளம்]:l.பங்கேற்பாளர்,...l.பரிந்துரை})),await i()}});a.push(o)}return async()=>{await Promise.all(a.map(o=>o()))}}}const iO="மொழிபெயர்ப்புகள்",zy="சாபி",s6="மூல்_மொழி",vd="இலக்கு_மொழி",a6="மூல்_உரை",o6="மொழிபெயர்ப்பு",yLe="/orbitdb/zdpuAyiNBJZCMSTWynQrRynKCbfz7uJhv892B5Dy1qnyQfwP6",vLe="/orbitdb/zdpuAviHxRLaTdUCfJeh1Dw8hbiHkcRsmEkiitX2MXQes3XYY",bLe="/orbitdb/zdpuAyCPoNvoFVRt4y5uA97d8LLjcXnqs2CaoS6oVvbZwkSou",wLe="/orbitdb/zdpuB35kfHohXZQnFFAMhwFPt78vH7e1NuquQ6KcNMPGQ3Hgj",_Le="/orbitdb/zdpuAwxQnCrzYK3kXtM4MGYfdWhM3rjSb1cyQx4hMSwjHzgf9",xLe="/orbitdb/zdpuB3HFW5njgmT9kxvJoxNq7wG27iCj8GLf3F3iKtfecw8De",ELe="/orbitdb/zdpuAnASCNyc198pcsxDYCdZoAvfj5EC3iWbeMyK9FRsAaoaS",SLe="/orbitdb/zdpuAzksPz4pdkBfy1Z74LStFLGPS3njxtD6BEvcPEYdSEv8R",LY={motsClefs:[ELe,SLe],licence:"ODbl-1_0",tableaux:[{clef:iO,cols:[{idVariable:vLe,idColonne:zy,index:!0},{idVariable:bLe,idColonne:s6},{idVariable:wLe,idColonne:vd,index:!0},{idVariable:_Le,idColonne:a6},{idVariable:xLe,idColonne:o6},{idVariable:_F,idColonne:qg}]}]},ALe=t=>({சாபி:t.données[zy],தேதி:new Date(t.données[qg]),பங்கேற்பாளர்:t.données[wF],மொழிபெயர்ப்பு:t.données[o6],மூல்_உரை:t.données[a6],மூல்_மொழி:t.données[s6],இலக்கு_மொழி:t.données[vd],கைரேகை:t.id}),FY=t=>({பங்கேற்பாளர்:t.பங்கேற்பாளர்,அடையாளம்:t.அடையாளம்,பரிந்துரை:{சாபி:t.பரிந்துரை[zy],தேதி:new Date(t.பரிந்துரை[qg]),மொழிபெயர்ப்பு:t.பரிந்துரை[o6],மூல்_உரை:t.பரிந்துரை[a6],மூல்_மொழி:t.பரிந்துரை[s6],இலக்கு_மொழி:t.பரிந்துரை[vd]}}),TLe=t=>({பங்கேற்பாளர்:t.பங்கேற்பாளர்,அடையாளம்:t.அடையாளம்,பரிந்துரை:{[zy]:t.பரிந்துரை.சாபி,[qg]:t.பரிந்துரை.தேதி.getTime(),[o6]:t.பரிந்துரை.மொழிபெயர்ப்பு,[a6]:t.பரிந்துரை.மூல்_உரை,[s6]:t.பரிந்துரை.மூல்_மொழி,[vd]:t.பரிந்துரை.இலக்கு_மொழி}}),kLe=t=>{const e=new Set(t.map(n=>n.சாபி)),r={};for(const n of e){r[n]||(r[n]={});const i=t.filter(s=>s.சாபி===n);for(const s of i)r[n][s.இலக்கு_மொழி]=s.மொழிபெயர்ப்பு}return r},CLe=(...t)=>{const e={};for(const r of t)for(const n of Object.keys(r)){e[n]||(e[n]={});for(const[i,s]of Object.entries(r[n]))e[n][i]=s}return e},ILe=t=>{const e={};for(const r in t){const n=r.split(".");for(const i of Object.keys(t[r])){e[i]||(e[i]={});let s=e[i];for(const[a,o]of n.entries())a===n.length-1?s[o]=t[r][i]:((s[o]===void 0||typeof s[o]=="string")&&(s[o]={}),s=s[o])}}return e},Sue=t=>{const e={};function*r({ம:n,முன்:i}){i=i||[];for(const[s,a]of Object.entries(n)){const o=[...i,s];if(typeof a=="string")yield{சாபி:o.join("."),மதிப்பு:a};else for(const{சாபி:c,மதிப்பு:l}of r({ம:a,முன்:o}))yield{சாபி:c,மதிப்பு:l}}}for(const n of Object.keys(t))for(const{சாபி:i,மதிப்பு:s}of r({ம:t[n]}))e[i]||(e[i]={}),e[i][n]=s;return e},sw=async()=>{};class RLe{மூல்_மொழிபெயர்ப்புகள்;தனித்துவமிக்க_அடையாளம்;மூல்_மொழி;கிளி;constructor({விண்மீன்:e,மூல்_மொழிபெயர்ப்புகள்:r,மூல்_மொழி:n,அடையாளம்:i}){if(this.தனித்துவமிக்க_அடையாளம்=$Ie(),i){if(!e)throw new Error;this.கிளி=new Hg({விண்மீன்:e,அட்டவணை_சாபி:iO,குழு_அடையாளம்:i,வார்ப்புரு:LY})}this.மூல்_மொழிபெயர்ப்புகள்=r||{},this.மூல்_மொழி=n}static async உருவாக்கு({விண்மீன்:e,பேற்றோர்:r=yLe}){return await Hg.உருவாக்கு({விண்மீன்:e,பேற்றோர்:r,வார்ப்புரு:LY,அட்டவணை_சாபி:iO})}async சாபிகளை_கேள்ளு({செ:e,பரிந்துரைகள்:r="வேண்டாம்"}){const n={மூல்:Object.keys(this.மூல்_மொழிபெயர்ப்புகள்),அங்கீகரிக்கப்பட்டவை:[],பரிந்துரைகள்:[]},i=async()=>await e([...new Set([...Object.values(n).flat()])]),s=[],a=await this.அங்கீகரிக்கப்பட்ட_மொழிபெயர்ப்புகளை_கேள்ளு({செ:async o=>(n.அங்கீகரிக்கப்பட்டவை=Object.keys(o),await i())});if(s.push(a),r==="எனது"){const o=await this.என்_மொழிபெயர்ப்பு_பரிந்துரைகளை_கேள்ளு({செ:async c=>{n.பரிந்துரைகள்=c.map(l=>l.பரிந்துரை.சாபி),await i()}});s.push(o)}else if(r==="எல்லாம்"){const o=(await this.மொழிபெயர்ப்பு_பரிந்துரைகளை_கேள்ளு({செ:async c=>{n.பரிந்துரைகள்=c.map(l=>l.பரிந்துரை.சாபி),await i()}})).fOublier;s.push(o)}return async()=>{await Promise.all(s.map(o=>o()))}}async மொழிகளை_கேள்ளு({பரிந்துரைகள்:e="எனது",செ:r}){const n={மூல்:Object.values(this.மூல்_மொழிபெயர்ப்புகள்).map(a=>Object.keys(a)).flat()},i=async()=>{await r([...new Set(Object.values(n).flat())])};i();const s=[];if(this.கிளி){const a=await this.கிளி.அங்கீகரிக்கப்பட்ட_உறுப்படிகளை_கேள்ளு({செ:async o=>{n.அங்கீகரிக்கப்பட்டவை=o.map(c=>c.données[vd]),await i()}});s.push(a),e==="எனது"?s.push(await this.என்_மொழிபெயர்ப்பு_பரிந்துரைகளை_கேள்ளு({செ:async o=>{n.பரிந்துரைகள்=o.map(c=>c.பரிந்துரை[vd]),await i()}})):e==="எல்லாம்"&&s.push((await this.மொழிபெயர்ப்பு_பரிந்துரைகளை_கேள்ளு({செ:async o=>{n.பரிந்துரைகள்=o.map(c=>c.பரிந்துரை[vd]),await i()}})).fOublier)}return async()=>{await Promise.all(s.map(a=>a()))}}async அங்கீகரிக்கப்பட்ட_மொழிபெயர்ப்புகளை_கேள்ளு({செ:e}){const r={உறுப்படிகள்:[]},n=async()=>{const i=CLe(kLe(r.உறுப்படிகள்.map(s=>ALe(s))),this.மூல்_மொழிபெயர்ப்புகள்);await e(i)};return await n(),this.கிளி?await this.கிளி.அங்கீகரிக்கப்பட்ட_உறுப்படிகளை_கேள்ளு({செ:async i=>{r.உறுப்படிகள்=i,await n()}}):sw}async மொழிபெயர்ப்புகளை_கேள்ளு({செ:e,பரிந்துரைகள்:r="எனது"}){if(await e(this.மூல்_மொழிபெயர்ப்புகள்),!this.கிளி)return sw;const n={},i=await this.கிளி.விண்மீன்.obtIdCompte(),s=async()=>{const o=[...new Set([...Object.keys(this.மூல்_மொழிபெயர்ப்புகள்),...(n.அங்கீகரிக்கப்பட்டவை||[]).map(l=>l.சாபி)])],c={};for(const l of o){const u=n.அங்கீகரிக்கப்பட்டவை?.filter(g=>g.சாபி===l)||[],f=n.பரிந்துரைகள்?.filter(g=>g.பரிந்துரை.சாபி===l)||[],h=[...new Set([...f.map(g=>g.பரிந்துரை.இலக்கு_மொழி),...u.map(g=>g.இலக்கு_மொழி)])],d={};for(const g of h){const p=f.filter(v=>v.பரிந்துரை.இலக்கு_மொழி===g).sort((v,_)=>v.பங்கேற்பாளர்===i&&_.பங்கேற்பாளர்!==i||v.பரிந்துரை.தேதி.getTime()>_.பரிந்துரை.தேதி.getTime()?-1:1)[0],m=u.find(v=>v.இலக்கு_மொழி===g),y=p?m&&m.தேதி>p.பரிந்துரை.தேதி.getTime()?m:p.பரிந்துரை:m;y&&(d[g]=y.மொழிபெயர்ப்பு)}c[l]=Object.assign({},this.மூல்_மொழிபெயர்ப்புகள்[l]||{},d)}return await e(c)},a=[];if(this.கிளி){const o=await this.கிளி.அங்கீகரிக்கப்பட்ட_உறுப்படிகளை_கேள்ளு({செ:async c=>{n.அங்கீகரிக்கப்பட்டவை=c.map(l=>l.données),await s()}});a.push(o)}return r==="எனது"?a.push(await this.என்_மொழிபெயர்ப்பு_பரிந்துரைகளை_கேள்ளு({செ:async o=>{n.பரிந்துரைகள்=o,await s()}})):r==="எல்லாம்"&&a.push((await this.மொழிபெயர்ப்பு_பரிந்துரைகளை_கேள்ளு({செ:async o=>{n.பரிந்துரைகள்=o,await s()}})).fOublier),async()=>{await Promise.all(a.map(o=>o()))}}async மொழிபெயர்ப்பு_பரிந்துரைகளை_கேள்ளு({சாபி:e,மொழி:r,செ:n}){return this.கிளி?await this.கிளி.பரிந்துரைகளை_கேள்ளு({செ:async i=>await n(i.filter(s=>(!e||s.பரிந்துரை[zy]===e)&&(!r||s.பரிந்துரை[vd]===r)).map(FY))}):{fOublier:sw,fChangerProfondeur:sw}}async என்_மொழிபெயர்ப்பு_பரிந்துரைகளை_கேள்ளு({செ:e}){return this.கிளி?await this.கிளி.என்_பரிந்துரைகளை_கேள்ளு({செ:r=>{e(r.map(n=>FY(n)))}}):sw}async முன்னேற்றத்தை_கேள்ளு({மொழி:e,வகை:r,செ:n}){const i={},s=u=>{const f=[];for(const h of u)f.find(d=>d.பரிந்துரை.சாபி===h.பரிந்துரை.சாபி&&d.பரிந்துரை.இலக்கு_மொழி===h.பரிந்துரை.இலக்கு_மொழி)||f.push(h);return f},a=async()=>{if(i.சாபிகள்)if(r==="சாபி"){const u=i.சாபிகள்.length,f=i.சாபிகள்.filter(d=>i.மொழிபெயர்ப்புகள்?.[d]?.[e]),h=i.பரிந்துரைக்கப்பட்டவை?.filter(d=>d.பரிந்துரை.இலக்கு_மொழி===e&&i.சாபிகள்?.includes(d.பரிந்துரை.சாபி)&&!f.includes(d.பரிந்துரை.சாபி))||[];return await n({மொத்தம்:u,அங்கீகரிக்கப்பட்டவை:f.length,பரிந்துரைக்கப்பட்டவை:s(h).length})}else{if(!i.மொழிபெயர்ப்புகள்||!i.சாபிகள்)return;const u=Object.fromEntries(i.சாபிகள்.map(p=>[p,this.மூல்_மொழி&&i.மொழிபெயர்ப்புகள்?.[p]?.[this.மூல்_மொழி]?.length||(i.மொழிபெயர்ப்புகள்?.[p]?Object.values(i.மொழிபெயர்ப்புகள்?.[p])[0]?.length:0)])),f=Object.values(u).reduce((p,m)=>p+m,0),h=i.சாபிகள்.filter(p=>i.மொழிபெயர்ப்புகள்?.[p]?.[e]),d=Object.entries(i.மொழிபெயர்ப்புகள்).filter(p=>p[1][e]).map(([p,m])=>u[p]).reduce((p,m)=>p+m,0),g=i.பரிந்துரைக்கப்பட்டவை?.filter(p=>p.பரிந்துரை.இலக்கு_மொழி===e&&i.சாபிகள்?.includes(p.பரிந்துரை.சாபி)&&!h.includes(p.பரிந்துரை.சாபி)).map(p=>u[p.பரிந்துரை.சாபி]||0).reduce((p,m)=>p+m,0)||0;return await n({மொத்தம்:f,அங்கீகரிக்கப்பட்டவை:d,பரிந்துரைக்கப்பட்டவை:g})}},o=await Promise.all([this.சாபிகளை_கேள்ளு({செ:async u=>{i.சாபிகள்=u,await a()}}),this.மொழிபெயர்ப்புகளை_கேள்ளு({பரிந்துரைகள்:"வேண்டாம்",செ:async u=>{i.மொழிபெயர்ப்புகள்=u,await a()}})]),c=(await this.மொழிபெயர்ப்பு_பரிந்துரைகளை_கேள்ளு({மொழி:e,செ:async u=>{i.பரிந்துரைக்கப்பட்டவை=u,await a()}})).fOublier;return async()=>{await Promise.all(o.map(u=>u())),await c()}}async மொழிபெயர்ப்பை_பரிந்துரையு({சாபி:e,மொழிபெயர்ப்பு:r,இலக்கு_மொழி:n,மூல்_மொழி:i,மூல்_உரை:s}){if(!this.கிளி)throw new Error;const a={[zy]:e,[o6]:r,[vd]:n};i&&(a[s6]=i),s&&(a[a6]=s),await this.கிளி.பரிந்துரையு({பரிந்துரை:a})}async மொழிபெயர்ப்பு_பரிந்துரையை_நீக்கு({அடையாளம்:e}){if(!this.கிளி)throw new Error;await this.கிளி.பரிந்துரையை_நீக்கு({அடையாளம்:e})}async அங்கீகரி({பரிந்துரை:e}){if(!this.கிளி)throw new Error;return await this.கிளி.அங்கீகரி({பரிந்துரை:TLe(e)})}async அங்கீகரிக்கப்பட்ட_மொழிபெயர்ப்பை_நீக்கு({சாபி:e,இலக்கு_மொழி:r,பொறுமை:n=1e3}){if(!this.கிளி)throw new Error;const i=this.கிளி,s=c=>c.சாபி===e&&c.இலக்கு_மொழி===r,o=(await Sn(async c=>await i.அங்கீகரிக்கப்பட்ட_உறுப்படிகளை_கேள்ளு({செ:async l=>await c(l)}),async c=>!!c?.find(l=>s(l.données))||await Bo(n)(c)))?.find(c=>s(c.données))?.id;if(!o)throw new Error;return await this.கிளி.அங்கீகரிக்கப்பட்ட_உறுப்படியை_நீக்கு({அடையாளம்:o})}async பேசு({சாபி:e,மொழி:r,செ:n,பரிந்துரைகள்:i="எனது"}){const s={},a=async()=>{const o=s.மொழிபெயர்ப்புகள்?.[e]?.[r];return await n(o)};return await this.மொழிபெயர்ப்புகளை_கேள்ளு({பரிந்துரைகள்:i,செ:async o=>{s.மொழிபெயர்ப்புகள்=o,await a()}})}}var Ra=[];for(var CC=0;CC<256;++CC)Ra.push((CC+256).toString(16).slice(1));function PLe(t,e=0){return(Ra[t[e+0]]+Ra[t[e+1]]+Ra[t[e+2]]+Ra[t[e+3]]+"-"+Ra[t[e+4]]+Ra[t[e+5]]+"-"+Ra[t[e+6]]+Ra[t[e+7]]+"-"+Ra[t[e+8]]+Ra[t[e+9]]+"-"+Ra[t[e+10]]+Ra[t[e+11]]+Ra[t[e+12]]+Ra[t[e+13]]+Ra[t[e+14]]+Ra[t[e+15]]).toLowerCase()}var P_,BLe=new Uint8Array(16);function DLe(){if(!P_&&(P_=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!P_))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return P_(BLe)}var OLe=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const $Y={randomUUID:OLe};function rs(t,e,r){if($Y.randomUUID&&!e&&!t)return $Y.randomUUID();t=t||{};var n=t.random||(t.rng||DLe)();return n[6]=n[6]&15|64,n[8]=n[8]&63|128,PLe(n)}var F7={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */F7.exports;(function(t,e){(function(){var r,n="4.17.21",i=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",a="Expected a function",o="Invalid `variable` option passed into `_.template`",c="__lodash_hash_undefined__",l=500,u="__lodash_placeholder__",f=1,h=2,d=4,g=1,p=2,m=1,y=2,v=4,_=8,x=16,A=32,C=64,R=128,M=256,N=512,Y=30,H="...",E=800,k=16,w=1,T=2,L=3,I=1/0,U=9007199254740991,O=17976931348623157e292,D=NaN,P=4294967295,B=P-1,z=P>>>1,F=[["ary",R],["bind",m],["bindKey",y],["curry",_],["curryRight",x],["flip",N],["partial",A],["partialRight",C],["rearg",M]],X="[object Arguments]",W="[object Array]",q="[object AsyncFunction]",G="[object Boolean]",ee="[object Date]",ae="[object DOMException]",te="[object Error]",K="[object Function]",re="[object GeneratorFunction]",V="[object Map]",oe="[object Number]",he="[object Null]",ne="[object Object]",ie="[object Promise]",ce="[object Proxy]",ve="[object RegExp]",Ee="[object Set]",ge="[object String]",Pe="[object Symbol]",Ce="[object Undefined]",Ie="[object WeakMap]",$e="[object WeakSet]",se="[object ArrayBuffer]",Z="[object DataView]",J="[object Float32Array]",de="[object Float64Array]",Ae="[object Int8Array]",De="[object Int16Array]",Re="[object Int32Array]",bt="[object Uint8Array]",$t="[object Uint8ClampedArray]",ut="[object Uint16Array]",Mt="[object Uint32Array]",Ft=/\b__p \+= '';/g,lr=/\b(__p \+=) '' \+/g,$n=/(__e\(.*?\)|\b__t\)) \+\n'';/g,On=/&(?:amp|lt|gt|quot|#39);/g,er=/[&<>"']/g,gn=RegExp(On.source),hi=RegExp(er.source),mr=/<%-([\s\S]+?)%>/g,di=/<%([\s\S]+?)%>/g,ai=/<%=([\s\S]+?)%>/g,yr=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,pi=/^\w*$/,gi=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,hr=/[\\^$.*+?()[\]{}|]/g,Kn=RegExp(hr.source),Gn=/^\s+/,vr=/\s/,mi=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,fe=/\{\n\/\* \[wrapped with (.+)\] \*/,_e=/,? & /,me=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,we=/[()=,{}\[\]\/\s]/,xe=/\\(\\)?/g,Se=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Le=/\w*$/,Ke=/^[-+]0x[0-9a-f]+$/i,Ue=/^0b[01]+$/i,je=/^\[object .+?Constructor\]$/,Ve=/^0o[0-7]+$/i,it=/^(?:0|[1-9]\d*)$/,gt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,xt=/($^)/,at=/['\n\r\u2028\u2029\\]/g,ft="\\ud800-\\udfff",Jt="\\u0300-\\u036f",vn="\\ufe20-\\ufe2f",_n="\\u20d0-\\u20ff",yi=Jt+vn+_n,Ha="\\u2700-\\u27bf",Wa="a-z\\xdf-\\xf6\\xf8-\\xff",Eo="\\xac\\xb1\\xd7\\xf7",xa="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Oc="\\u2000-\\u206f",So=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",i2="A-Z\\xc0-\\xd6\\xd8-\\xde",Xz="\\ufe0e\\ufe0f",Zz=Eo+xa+Oc+So,CT="['’]",p6e="["+ft+"]",Jz="["+Zz+"]",I8="["+yi+"]",Qz="\\d+",g6e="["+Ha+"]",eq="["+Wa+"]",tq="[^"+ft+Zz+Qz+Ha+Wa+i2+"]",IT="\\ud83c[\\udffb-\\udfff]",m6e="(?:"+I8+"|"+IT+")",rq="[^"+ft+"]",RT="(?:\\ud83c[\\udde6-\\uddff]){2}",PT="[\\ud800-\\udbff][\\udc00-\\udfff]",s2="["+i2+"]",nq="\\u200d",iq="(?:"+eq+"|"+tq+")",y6e="(?:"+s2+"|"+tq+")",sq="(?:"+CT+"(?:d|ll|m|re|s|t|ve))?",aq="(?:"+CT+"(?:D|LL|M|RE|S|T|VE))?",oq=m6e+"?",cq="["+Xz+"]?",v6e="(?:"+nq+"(?:"+[rq,RT,PT].join("|")+")"+cq+oq+")*",b6e="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",w6e="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",lq=cq+oq+v6e,_6e="(?:"+[g6e,RT,PT].join("|")+")"+lq,x6e="(?:"+[rq+I8+"?",I8,RT,PT,p6e].join("|")+")",E6e=RegExp(CT,"g"),S6e=RegExp(I8,"g"),BT=RegExp(IT+"(?="+IT+")|"+x6e+lq,"g"),A6e=RegExp([s2+"?"+eq+"+"+sq+"(?="+[Jz,s2,"$"].join("|")+")",y6e+"+"+aq+"(?="+[Jz,s2+iq,"$"].join("|")+")",s2+"?"+iq+"+"+sq,s2+"+"+aq,w6e,b6e,Qz,_6e].join("|"),"g"),T6e=RegExp("["+nq+ft+yi+Xz+"]"),k6e=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,C6e=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],I6e=-1,Oi={};Oi[J]=Oi[de]=Oi[Ae]=Oi[De]=Oi[Re]=Oi[bt]=Oi[$t]=Oi[ut]=Oi[Mt]=!0,Oi[X]=Oi[W]=Oi[se]=Oi[G]=Oi[Z]=Oi[ee]=Oi[te]=Oi[K]=Oi[V]=Oi[oe]=Oi[ne]=Oi[ve]=Oi[Ee]=Oi[ge]=Oi[Ie]=!1;var Ti={};Ti[X]=Ti[W]=Ti[se]=Ti[Z]=Ti[G]=Ti[ee]=Ti[J]=Ti[de]=Ti[Ae]=Ti[De]=Ti[Re]=Ti[V]=Ti[oe]=Ti[ne]=Ti[ve]=Ti[Ee]=Ti[ge]=Ti[Pe]=Ti[bt]=Ti[$t]=Ti[ut]=Ti[Mt]=!0,Ti[te]=Ti[K]=Ti[Ie]=!1;var R6e={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},P6e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},B6e={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},D6e={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},O6e=parseFloat,N6e=parseInt,uq=typeof It=="object"&&It&&It.Object===Object&&It,M6e=typeof self=="object"&&self&&self.Object===Object&&self,Ea=uq||M6e||Function("return this")(),DT=e&&!e.nodeType&&e,yp=DT&&!0&&t&&!t.nodeType&&t,fq=yp&&yp.exports===DT,OT=fq&&uq.process,dl=function(){try{var Me=yp&&yp.require&&yp.require("util").types;return Me||OT&&OT.binding&&OT.binding("util")}catch{}}(),hq=dl&&dl.isArrayBuffer,dq=dl&&dl.isDate,pq=dl&&dl.isMap,gq=dl&&dl.isRegExp,mq=dl&&dl.isSet,yq=dl&&dl.isTypedArray;function Nc(Me,Je,Ye){switch(Ye.length){case 0:return Me.call(Je);case 1:return Me.call(Je,Ye[0]);case 2:return Me.call(Je,Ye[0],Ye[1]);case 3:return Me.call(Je,Ye[0],Ye[1],Ye[2])}return Me.apply(Je,Ye)}function L6e(Me,Je,Ye,Ot){for(var Er=-1,Nn=Me==null?0:Me.length;++Er<Nn;){var Vs=Me[Er];Je(Ot,Vs,Ye(Vs),Me)}return Ot}function pl(Me,Je){for(var Ye=-1,Ot=Me==null?0:Me.length;++Ye<Ot&&Je(Me[Ye],Ye,Me)!==!1;);return Me}function F6e(Me,Je){for(var Ye=Me==null?0:Me.length;Ye--&&Je(Me[Ye],Ye,Me)!==!1;);return Me}function vq(Me,Je){for(var Ye=-1,Ot=Me==null?0:Me.length;++Ye<Ot;)if(!Je(Me[Ye],Ye,Me))return!1;return!0}function w0(Me,Je){for(var Ye=-1,Ot=Me==null?0:Me.length,Er=0,Nn=[];++Ye<Ot;){var Vs=Me[Ye];Je(Vs,Ye,Me)&&(Nn[Er++]=Vs)}return Nn}function R8(Me,Je){var Ye=Me==null?0:Me.length;return!!Ye&&a2(Me,Je,0)>-1}function NT(Me,Je,Ye){for(var Ot=-1,Er=Me==null?0:Me.length;++Ot<Er;)if(Ye(Je,Me[Ot]))return!0;return!1}function Hi(Me,Je){for(var Ye=-1,Ot=Me==null?0:Me.length,Er=Array(Ot);++Ye<Ot;)Er[Ye]=Je(Me[Ye],Ye,Me);return Er}function _0(Me,Je){for(var Ye=-1,Ot=Je.length,Er=Me.length;++Ye<Ot;)Me[Er+Ye]=Je[Ye];return Me}function MT(Me,Je,Ye,Ot){var Er=-1,Nn=Me==null?0:Me.length;for(Ot&&Nn&&(Ye=Me[++Er]);++Er<Nn;)Ye=Je(Ye,Me[Er],Er,Me);return Ye}function $6e(Me,Je,Ye,Ot){var Er=Me==null?0:Me.length;for(Ot&&Er&&(Ye=Me[--Er]);Er--;)Ye=Je(Ye,Me[Er],Er,Me);return Ye}function LT(Me,Je){for(var Ye=-1,Ot=Me==null?0:Me.length;++Ye<Ot;)if(Je(Me[Ye],Ye,Me))return!0;return!1}var U6e=FT("length");function V6e(Me){return Me.split("")}function j6e(Me){return Me.match(me)||[]}function bq(Me,Je,Ye){var Ot;return Ye(Me,function(Er,Nn,Vs){if(Je(Er,Nn,Vs))return Ot=Nn,!1}),Ot}function P8(Me,Je,Ye,Ot){for(var Er=Me.length,Nn=Ye+(Ot?1:-1);Ot?Nn--:++Nn<Er;)if(Je(Me[Nn],Nn,Me))return Nn;return-1}function a2(Me,Je,Ye){return Je===Je?e8e(Me,Je,Ye):P8(Me,wq,Ye)}function z6e(Me,Je,Ye,Ot){for(var Er=Ye-1,Nn=Me.length;++Er<Nn;)if(Ot(Me[Er],Je))return Er;return-1}function wq(Me){return Me!==Me}function _q(Me,Je){var Ye=Me==null?0:Me.length;return Ye?UT(Me,Je)/Ye:D}function FT(Me){return function(Je){return Je==null?r:Je[Me]}}function $T(Me){return function(Je){return Me==null?r:Me[Je]}}function xq(Me,Je,Ye,Ot,Er){return Er(Me,function(Nn,Vs,vi){Ye=Ot?(Ot=!1,Nn):Je(Ye,Nn,Vs,vi)}),Ye}function q6e(Me,Je){var Ye=Me.length;for(Me.sort(Je);Ye--;)Me[Ye]=Me[Ye].value;return Me}function UT(Me,Je){for(var Ye,Ot=-1,Er=Me.length;++Ot<Er;){var Nn=Je(Me[Ot]);Nn!==r&&(Ye=Ye===r?Nn:Ye+Nn)}return Ye}function VT(Me,Je){for(var Ye=-1,Ot=Array(Me);++Ye<Me;)Ot[Ye]=Je(Ye);return Ot}function H6e(Me,Je){return Hi(Je,function(Ye){return[Ye,Me[Ye]]})}function Eq(Me){return Me&&Me.slice(0,kq(Me)+1).replace(Gn,"")}function Mc(Me){return function(Je){return Me(Je)}}function jT(Me,Je){return Hi(Je,function(Ye){return Me[Ye]})}function Mb(Me,Je){return Me.has(Je)}function Sq(Me,Je){for(var Ye=-1,Ot=Me.length;++Ye<Ot&&a2(Je,Me[Ye],0)>-1;);return Ye}function Aq(Me,Je){for(var Ye=Me.length;Ye--&&a2(Je,Me[Ye],0)>-1;);return Ye}function W6e(Me,Je){for(var Ye=Me.length,Ot=0;Ye--;)Me[Ye]===Je&&++Ot;return Ot}var K6e=$T(R6e),G6e=$T(P6e);function Y6e(Me){return"\\"+D6e[Me]}function X6e(Me,Je){return Me==null?r:Me[Je]}function o2(Me){return T6e.test(Me)}function Z6e(Me){return k6e.test(Me)}function J6e(Me){for(var Je,Ye=[];!(Je=Me.next()).done;)Ye.push(Je.value);return Ye}function zT(Me){var Je=-1,Ye=Array(Me.size);return Me.forEach(function(Ot,Er){Ye[++Je]=[Er,Ot]}),Ye}function Tq(Me,Je){return function(Ye){return Me(Je(Ye))}}function x0(Me,Je){for(var Ye=-1,Ot=Me.length,Er=0,Nn=[];++Ye<Ot;){var Vs=Me[Ye];(Vs===Je||Vs===u)&&(Me[Ye]=u,Nn[Er++]=Ye)}return Nn}function B8(Me){var Je=-1,Ye=Array(Me.size);return Me.forEach(function(Ot){Ye[++Je]=Ot}),Ye}function Q6e(Me){var Je=-1,Ye=Array(Me.size);return Me.forEach(function(Ot){Ye[++Je]=[Ot,Ot]}),Ye}function e8e(Me,Je,Ye){for(var Ot=Ye-1,Er=Me.length;++Ot<Er;)if(Me[Ot]===Je)return Ot;return-1}function t8e(Me,Je,Ye){for(var Ot=Ye+1;Ot--;)if(Me[Ot]===Je)return Ot;return Ot}function c2(Me){return o2(Me)?n8e(Me):U6e(Me)}function ru(Me){return o2(Me)?i8e(Me):V6e(Me)}function kq(Me){for(var Je=Me.length;Je--&&vr.test(Me.charAt(Je)););return Je}var r8e=$T(B6e);function n8e(Me){for(var Je=BT.lastIndex=0;BT.test(Me);)++Je;return Je}function i8e(Me){return Me.match(BT)||[]}function s8e(Me){return Me.match(A6e)||[]}var a8e=function Me(Je){Je=Je==null?Ea:l2.defaults(Ea.Object(),Je,l2.pick(Ea,C6e));var Ye=Je.Array,Ot=Je.Date,Er=Je.Error,Nn=Je.Function,Vs=Je.Math,vi=Je.Object,qT=Je.RegExp,o8e=Je.String,gl=Je.TypeError,D8=Ye.prototype,c8e=Nn.prototype,u2=vi.prototype,O8=Je["__core-js_shared__"],N8=c8e.toString,Yn=u2.hasOwnProperty,l8e=0,Cq=function(){var b=/[^.]+$/.exec(O8&&O8.keys&&O8.keys.IE_PROTO||"");return b?"Symbol(src)_1."+b:""}(),M8=u2.toString,u8e=N8.call(vi),f8e=Ea._,h8e=qT("^"+N8.call(Yn).replace(hr,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),L8=fq?Je.Buffer:r,E0=Je.Symbol,F8=Je.Uint8Array,Iq=L8?L8.allocUnsafe:r,$8=Tq(vi.getPrototypeOf,vi),Rq=vi.create,Pq=u2.propertyIsEnumerable,U8=D8.splice,Bq=E0?E0.isConcatSpreadable:r,Lb=E0?E0.iterator:r,vp=E0?E0.toStringTag:r,V8=function(){try{var b=Ep(vi,"defineProperty");return b({},"",{}),b}catch{}}(),d8e=Je.clearTimeout!==Ea.clearTimeout&&Je.clearTimeout,p8e=Ot&&Ot.now!==Ea.Date.now&&Ot.now,g8e=Je.setTimeout!==Ea.setTimeout&&Je.setTimeout,j8=Vs.ceil,z8=Vs.floor,HT=vi.getOwnPropertySymbols,m8e=L8?L8.isBuffer:r,Dq=Je.isFinite,y8e=D8.join,v8e=Tq(vi.keys,vi),js=Vs.max,Ka=Vs.min,b8e=Ot.now,w8e=Je.parseInt,Oq=Vs.random,_8e=D8.reverse,WT=Ep(Je,"DataView"),Fb=Ep(Je,"Map"),KT=Ep(Je,"Promise"),f2=Ep(Je,"Set"),$b=Ep(Je,"WeakMap"),Ub=Ep(vi,"create"),q8=$b&&new $b,h2={},x8e=Sp(WT),E8e=Sp(Fb),S8e=Sp(KT),A8e=Sp(f2),T8e=Sp($b),H8=E0?E0.prototype:r,Vb=H8?H8.valueOf:r,Nq=H8?H8.toString:r;function pe(b){if(cs(b)&&!Tr(b)&&!(b instanceof ln)){if(b instanceof ml)return b;if(Yn.call(b,"__wrapped__"))return MH(b)}return new ml(b)}var d2=function(){function b(){}return function(S){if(!Ji(S))return{};if(Rq)return Rq(S);b.prototype=S;var j=new b;return b.prototype=r,j}}();function W8(){}function ml(b,S){this.__wrapped__=b,this.__actions__=[],this.__chain__=!!S,this.__index__=0,this.__values__=r}pe.templateSettings={escape:mr,evaluate:di,interpolate:ai,variable:"",imports:{_:pe}},pe.prototype=W8.prototype,pe.prototype.constructor=pe,ml.prototype=d2(W8.prototype),ml.prototype.constructor=ml;function ln(b){this.__wrapped__=b,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=P,this.__views__=[]}function k8e(){var b=new ln(this.__wrapped__);return b.__actions__=Qo(this.__actions__),b.__dir__=this.__dir__,b.__filtered__=this.__filtered__,b.__iteratees__=Qo(this.__iteratees__),b.__takeCount__=this.__takeCount__,b.__views__=Qo(this.__views__),b}function C8e(){if(this.__filtered__){var b=new ln(this);b.__dir__=-1,b.__filtered__=!0}else b=this.clone(),b.__dir__*=-1;return b}function I8e(){var b=this.__wrapped__.value(),S=this.__dir__,j=Tr(b),Q=S<0,le=j?b.length:0,be=V_e(0,le,this.__views__),ke=be.start,Be=be.end,Fe=Be-ke,Qe=Q?Be:ke-1,et=this.__iteratees__,st=et.length,Tt=0,Ut=Ka(Fe,this.__takeCount__);if(!j||!Q&&le==Fe&&Ut==Fe)return sH(b,this.__actions__);var sr=[];e:for(;Fe--&&Tt<Ut;){Qe+=S;for(var Vr=-1,ar=b[Qe];++Vr<st;){var an=et[Vr],mn=an.iteratee,$c=an.type,ko=mn(ar);if($c==T)ar=ko;else if(!ko){if($c==w)continue e;break e}}sr[Tt++]=ar}return sr}ln.prototype=d2(W8.prototype),ln.prototype.constructor=ln;function bp(b){var S=-1,j=b==null?0:b.length;for(this.clear();++S<j;){var Q=b[S];this.set(Q[0],Q[1])}}function R8e(){this.__data__=Ub?Ub(null):{},this.size=0}function P8e(b){var S=this.has(b)&&delete this.__data__[b];return this.size-=S?1:0,S}function B8e(b){var S=this.__data__;if(Ub){var j=S[b];return j===c?r:j}return Yn.call(S,b)?S[b]:r}function D8e(b){var S=this.__data__;return Ub?S[b]!==r:Yn.call(S,b)}function O8e(b,S){var j=this.__data__;return this.size+=this.has(b)?0:1,j[b]=Ub&&S===r?c:S,this}bp.prototype.clear=R8e,bp.prototype.delete=P8e,bp.prototype.get=B8e,bp.prototype.has=D8e,bp.prototype.set=O8e;function Rh(b){var S=-1,j=b==null?0:b.length;for(this.clear();++S<j;){var Q=b[S];this.set(Q[0],Q[1])}}function N8e(){this.__data__=[],this.size=0}function M8e(b){var S=this.__data__,j=K8(S,b);if(j<0)return!1;var Q=S.length-1;return j==Q?S.pop():U8.call(S,j,1),--this.size,!0}function L8e(b){var S=this.__data__,j=K8(S,b);return j<0?r:S[j][1]}function F8e(b){return K8(this.__data__,b)>-1}function $8e(b,S){var j=this.__data__,Q=K8(j,b);return Q<0?(++this.size,j.push([b,S])):j[Q][1]=S,this}Rh.prototype.clear=N8e,Rh.prototype.delete=M8e,Rh.prototype.get=L8e,Rh.prototype.has=F8e,Rh.prototype.set=$8e;function Ph(b){var S=-1,j=b==null?0:b.length;for(this.clear();++S<j;){var Q=b[S];this.set(Q[0],Q[1])}}function U8e(){this.size=0,this.__data__={hash:new bp,map:new(Fb||Rh),string:new bp}}function V8e(b){var S=s_(this,b).delete(b);return this.size-=S?1:0,S}function j8e(b){return s_(this,b).get(b)}function z8e(b){return s_(this,b).has(b)}function q8e(b,S){var j=s_(this,b),Q=j.size;return j.set(b,S),this.size+=j.size==Q?0:1,this}Ph.prototype.clear=U8e,Ph.prototype.delete=V8e,Ph.prototype.get=j8e,Ph.prototype.has=z8e,Ph.prototype.set=q8e;function wp(b){var S=-1,j=b==null?0:b.length;for(this.__data__=new Ph;++S<j;)this.add(b[S])}function H8e(b){return this.__data__.set(b,c),this}function W8e(b){return this.__data__.has(b)}wp.prototype.add=wp.prototype.push=H8e,wp.prototype.has=W8e;function nu(b){var S=this.__data__=new Rh(b);this.size=S.size}function K8e(){this.__data__=new Rh,this.size=0}function G8e(b){var S=this.__data__,j=S.delete(b);return this.size=S.size,j}function Y8e(b){return this.__data__.get(b)}function X8e(b){return this.__data__.has(b)}function Z8e(b,S){var j=this.__data__;if(j instanceof Rh){var Q=j.__data__;if(!Fb||Q.length<i-1)return Q.push([b,S]),this.size=++j.size,this;j=this.__data__=new Ph(Q)}return j.set(b,S),this.size=j.size,this}nu.prototype.clear=K8e,nu.prototype.delete=G8e,nu.prototype.get=Y8e,nu.prototype.has=X8e,nu.prototype.set=Z8e;function Mq(b,S){var j=Tr(b),Q=!j&&Ap(b),le=!j&&!Q&&C0(b),be=!j&&!Q&&!le&&y2(b),ke=j||Q||le||be,Be=ke?VT(b.length,o8e):[],Fe=Be.length;for(var Qe in b)(S||Yn.call(b,Qe))&&!(ke&&(Qe=="length"||le&&(Qe=="offset"||Qe=="parent")||be&&(Qe=="buffer"||Qe=="byteLength"||Qe=="byteOffset")||Nh(Qe,Fe)))&&Be.push(Qe);return Be}function Lq(b){var S=b.length;return S?b[ik(0,S-1)]:r}function J8e(b,S){return a_(Qo(b),_p(S,0,b.length))}function Q8e(b){return a_(Qo(b))}function GT(b,S,j){(j!==r&&!iu(b[S],j)||j===r&&!(S in b))&&Bh(b,S,j)}function jb(b,S,j){var Q=b[S];(!(Yn.call(b,S)&&iu(Q,j))||j===r&&!(S in b))&&Bh(b,S,j)}function K8(b,S){for(var j=b.length;j--;)if(iu(b[j][0],S))return j;return-1}function e_e(b,S,j,Q){return S0(b,function(le,be,ke){S(Q,le,j(le),ke)}),Q}function Fq(b,S){return b&&uf(S,na(S),b)}function t_e(b,S){return b&&uf(S,tc(S),b)}function Bh(b,S,j){S=="__proto__"&&V8?V8(b,S,{configurable:!0,enumerable:!0,value:j,writable:!0}):b[S]=j}function YT(b,S){for(var j=-1,Q=S.length,le=Ye(Q),be=b==null;++j<Q;)le[j]=be?r:Ik(b,S[j]);return le}function _p(b,S,j){return b===b&&(j!==r&&(b=b<=j?b:j),S!==r&&(b=b>=S?b:S)),b}function yl(b,S,j,Q,le,be){var ke,Be=S&f,Fe=S&h,Qe=S&d;if(j&&(ke=le?j(b,Q,le,be):j(b)),ke!==r)return ke;if(!Ji(b))return b;var et=Tr(b);if(et){if(ke=z_e(b),!Be)return Qo(b,ke)}else{var st=Ga(b),Tt=st==K||st==re;if(C0(b))return cH(b,Be);if(st==ne||st==X||Tt&&!le){if(ke=Fe||Tt?{}:kH(b),!Be)return Fe?B_e(b,t_e(ke,b)):P_e(b,Fq(ke,b))}else{if(!Ti[st])return le?b:{};ke=q_e(b,st,Be)}}be||(be=new nu);var Ut=be.get(b);if(Ut)return Ut;be.set(b,ke),rW(b)?b.forEach(function(ar){ke.add(yl(ar,S,j,ar,b,be))}):eW(b)&&b.forEach(function(ar,an){ke.set(an,yl(ar,S,j,an,b,be))});var sr=Qe?Fe?gk:pk:Fe?tc:na,Vr=et?r:sr(b);return pl(Vr||b,function(ar,an){Vr&&(an=ar,ar=b[an]),jb(ke,an,yl(ar,S,j,an,b,be))}),ke}function r_e(b){var S=na(b);return function(j){return $q(j,b,S)}}function $q(b,S,j){var Q=j.length;if(b==null)return!Q;for(b=vi(b);Q--;){var le=j[Q],be=S[le],ke=b[le];if(ke===r&&!(le in b)||!be(ke))return!1}return!0}function Uq(b,S,j){if(typeof b!="function")throw new gl(a);return Yb(function(){b.apply(r,j)},S)}function zb(b,S,j,Q){var le=-1,be=R8,ke=!0,Be=b.length,Fe=[],Qe=S.length;if(!Be)return Fe;j&&(S=Hi(S,Mc(j))),Q?(be=NT,ke=!1):S.length>=i&&(be=Mb,ke=!1,S=new wp(S));e:for(;++le<Be;){var et=b[le],st=j==null?et:j(et);if(et=Q||et!==0?et:0,ke&&st===st){for(var Tt=Qe;Tt--;)if(S[Tt]===st)continue e;Fe.push(et)}else be(S,st,Q)||Fe.push(et)}return Fe}var S0=dH(lf),Vq=dH(ZT,!0);function n_e(b,S){var j=!0;return S0(b,function(Q,le,be){return j=!!S(Q,le,be),j}),j}function G8(b,S,j){for(var Q=-1,le=b.length;++Q<le;){var be=b[Q],ke=S(be);if(ke!=null&&(Be===r?ke===ke&&!Fc(ke):j(ke,Be)))var Be=ke,Fe=be}return Fe}function i_e(b,S,j,Q){var le=b.length;for(j=Nr(j),j<0&&(j=-j>le?0:le+j),Q=Q===r||Q>le?le:Nr(Q),Q<0&&(Q+=le),Q=j>Q?0:iW(Q);j<Q;)b[j++]=S;return b}function jq(b,S){var j=[];return S0(b,function(Q,le,be){S(Q,le,be)&&j.push(Q)}),j}function Sa(b,S,j,Q,le){var be=-1,ke=b.length;for(j||(j=W_e),le||(le=[]);++be<ke;){var Be=b[be];S>0&&j(Be)?S>1?Sa(Be,S-1,j,Q,le):_0(le,Be):Q||(le[le.length]=Be)}return le}var XT=pH(),zq=pH(!0);function lf(b,S){return b&&XT(b,S,na)}function ZT(b,S){return b&&zq(b,S,na)}function Y8(b,S){return w0(S,function(j){return Mh(b[j])})}function xp(b,S){S=T0(S,b);for(var j=0,Q=S.length;b!=null&&j<Q;)b=b[ff(S[j++])];return j&&j==Q?b:r}function qq(b,S,j){var Q=S(b);return Tr(b)?Q:_0(Q,j(b))}function Ao(b){return b==null?b===r?Ce:he:vp&&vp in vi(b)?U_e(b):Q_e(b)}function JT(b,S){return b>S}function s_e(b,S){return b!=null&&Yn.call(b,S)}function a_e(b,S){return b!=null&&S in vi(b)}function o_e(b,S,j){return b>=Ka(S,j)&&b<js(S,j)}function QT(b,S,j){for(var Q=j?NT:R8,le=b[0].length,be=b.length,ke=be,Be=Ye(be),Fe=1/0,Qe=[];ke--;){var et=b[ke];ke&&S&&(et=Hi(et,Mc(S))),Fe=Ka(et.length,Fe),Be[ke]=!j&&(S||le>=120&&et.length>=120)?new wp(ke&&et):r}et=b[0];var st=-1,Tt=Be[0];e:for(;++st<le&&Qe.length<Fe;){var Ut=et[st],sr=S?S(Ut):Ut;if(Ut=j||Ut!==0?Ut:0,!(Tt?Mb(Tt,sr):Q(Qe,sr,j))){for(ke=be;--ke;){var Vr=Be[ke];if(!(Vr?Mb(Vr,sr):Q(b[ke],sr,j)))continue e}Tt&&Tt.push(sr),Qe.push(Ut)}}return Qe}function c_e(b,S,j,Q){return lf(b,function(le,be,ke){S(Q,j(le),be,ke)}),Q}function qb(b,S,j){S=T0(S,b),b=PH(b,S);var Q=b==null?b:b[ff(bl(S))];return Q==null?r:Nc(Q,b,j)}function Hq(b){return cs(b)&&Ao(b)==X}function l_e(b){return cs(b)&&Ao(b)==se}function u_e(b){return cs(b)&&Ao(b)==ee}function Hb(b,S,j,Q,le){return b===S?!0:b==null||S==null||!cs(b)&&!cs(S)?b!==b&&S!==S:f_e(b,S,j,Q,Hb,le)}function f_e(b,S,j,Q,le,be){var ke=Tr(b),Be=Tr(S),Fe=ke?W:Ga(b),Qe=Be?W:Ga(S);Fe=Fe==X?ne:Fe,Qe=Qe==X?ne:Qe;var et=Fe==ne,st=Qe==ne,Tt=Fe==Qe;if(Tt&&C0(b)){if(!C0(S))return!1;ke=!0,et=!1}if(Tt&&!et)return be||(be=new nu),ke||y2(b)?SH(b,S,j,Q,le,be):F_e(b,S,Fe,j,Q,le,be);if(!(j&g)){var Ut=et&&Yn.call(b,"__wrapped__"),sr=st&&Yn.call(S,"__wrapped__");if(Ut||sr){var Vr=Ut?b.value():b,ar=sr?S.value():S;return be||(be=new nu),le(Vr,ar,j,Q,be)}}return Tt?(be||(be=new nu),$_e(b,S,j,Q,le,be)):!1}function h_e(b){return cs(b)&&Ga(b)==V}function ek(b,S,j,Q){var le=j.length,be=le,ke=!Q;if(b==null)return!be;for(b=vi(b);le--;){var Be=j[le];if(ke&&Be[2]?Be[1]!==b[Be[0]]:!(Be[0]in b))return!1}for(;++le<be;){Be=j[le];var Fe=Be[0],Qe=b[Fe],et=Be[1];if(ke&&Be[2]){if(Qe===r&&!(Fe in b))return!1}else{var st=new nu;if(Q)var Tt=Q(Qe,et,Fe,b,S,st);if(!(Tt===r?Hb(et,Qe,g|p,Q,st):Tt))return!1}}return!0}function Wq(b){if(!Ji(b)||G_e(b))return!1;var S=Mh(b)?h8e:je;return S.test(Sp(b))}function d_e(b){return cs(b)&&Ao(b)==ve}function p_e(b){return cs(b)&&Ga(b)==Ee}function g_e(b){return cs(b)&&h_(b.length)&&!!Oi[Ao(b)]}function Kq(b){return typeof b=="function"?b:b==null?rc:typeof b=="object"?Tr(b)?Xq(b[0],b[1]):Yq(b):gW(b)}function tk(b){if(!Gb(b))return v8e(b);var S=[];for(var j in vi(b))Yn.call(b,j)&&j!="constructor"&&S.push(j);return S}function m_e(b){if(!Ji(b))return J_e(b);var S=Gb(b),j=[];for(var Q in b)Q=="constructor"&&(S||!Yn.call(b,Q))||j.push(Q);return j}function rk(b,S){return b<S}function Gq(b,S){var j=-1,Q=ec(b)?Ye(b.length):[];return S0(b,function(le,be,ke){Q[++j]=S(le,be,ke)}),Q}function Yq(b){var S=yk(b);return S.length==1&&S[0][2]?IH(S[0][0],S[0][1]):function(j){return j===b||ek(j,b,S)}}function Xq(b,S){return bk(b)&&CH(S)?IH(ff(b),S):function(j){var Q=Ik(j,b);return Q===r&&Q===S?Rk(j,b):Hb(S,Q,g|p)}}function X8(b,S,j,Q,le){b!==S&&XT(S,function(be,ke){if(le||(le=new nu),Ji(be))y_e(b,S,ke,j,X8,Q,le);else{var Be=Q?Q(_k(b,ke),be,ke+"",b,S,le):r;Be===r&&(Be=be),GT(b,ke,Be)}},tc)}function y_e(b,S,j,Q,le,be,ke){var Be=_k(b,j),Fe=_k(S,j),Qe=ke.get(Fe);if(Qe){GT(b,j,Qe);return}var et=be?be(Be,Fe,j+"",b,S,ke):r,st=et===r;if(st){var Tt=Tr(Fe),Ut=!Tt&&C0(Fe),sr=!Tt&&!Ut&&y2(Fe);et=Fe,Tt||Ut||sr?Tr(Be)?et=Be:gs(Be)?et=Qo(Be):Ut?(st=!1,et=cH(Fe,!0)):sr?(st=!1,et=lH(Fe,!0)):et=[]:Xb(Fe)||Ap(Fe)?(et=Be,Ap(Be)?et=sW(Be):(!Ji(Be)||Mh(Be))&&(et=kH(Fe))):st=!1}st&&(ke.set(Fe,et),le(et,Fe,Q,be,ke),ke.delete(Fe)),GT(b,j,et)}function Zq(b,S){var j=b.length;if(j)return S+=S<0?j:0,Nh(S,j)?b[S]:r}function Jq(b,S,j){S.length?S=Hi(S,function(be){return Tr(be)?function(ke){return xp(ke,be.length===1?be[0]:be)}:be}):S=[rc];var Q=-1;S=Hi(S,Mc(ir()));var le=Gq(b,function(be,ke,Be){var Fe=Hi(S,function(Qe){return Qe(be)});return{criteria:Fe,index:++Q,value:be}});return q6e(le,function(be,ke){return R_e(be,ke,j)})}function v_e(b,S){return Qq(b,S,function(j,Q){return Rk(b,Q)})}function Qq(b,S,j){for(var Q=-1,le=S.length,be={};++Q<le;){var ke=S[Q],Be=xp(b,ke);j(Be,ke)&&Wb(be,T0(ke,b),Be)}return be}function b_e(b){return function(S){return xp(S,b)}}function nk(b,S,j,Q){var le=Q?z6e:a2,be=-1,ke=S.length,Be=b;for(b===S&&(S=Qo(S)),j&&(Be=Hi(b,Mc(j)));++be<ke;)for(var Fe=0,Qe=S[be],et=j?j(Qe):Qe;(Fe=le(Be,et,Fe,Q))>-1;)Be!==b&&U8.call(Be,Fe,1),U8.call(b,Fe,1);return b}function eH(b,S){for(var j=b?S.length:0,Q=j-1;j--;){var le=S[j];if(j==Q||le!==be){var be=le;Nh(le)?U8.call(b,le,1):ok(b,le)}}return b}function ik(b,S){return b+z8(Oq()*(S-b+1))}function w_e(b,S,j,Q){for(var le=-1,be=js(j8((S-b)/(j||1)),0),ke=Ye(be);be--;)ke[Q?be:++le]=b,b+=j;return ke}function sk(b,S){var j="";if(!b||S<1||S>U)return j;do S%2&&(j+=b),S=z8(S/2),S&&(b+=b);while(S);return j}function Jr(b,S){return xk(RH(b,S,rc),b+"")}function __e(b){return Lq(v2(b))}function x_e(b,S){var j=v2(b);return a_(j,_p(S,0,j.length))}function Wb(b,S,j,Q){if(!Ji(b))return b;S=T0(S,b);for(var le=-1,be=S.length,ke=be-1,Be=b;Be!=null&&++le<be;){var Fe=ff(S[le]),Qe=j;if(Fe==="__proto__"||Fe==="constructor"||Fe==="prototype")return b;if(le!=ke){var et=Be[Fe];Qe=Q?Q(et,Fe,Be):r,Qe===r&&(Qe=Ji(et)?et:Nh(S[le+1])?[]:{})}jb(Be,Fe,Qe),Be=Be[Fe]}return b}var tH=q8?function(b,S){return q8.set(b,S),b}:rc,E_e=V8?function(b,S){return V8(b,"toString",{configurable:!0,enumerable:!1,value:Bk(S),writable:!0})}:rc;function S_e(b){return a_(v2(b))}function vl(b,S,j){var Q=-1,le=b.length;S<0&&(S=-S>le?0:le+S),j=j>le?le:j,j<0&&(j+=le),le=S>j?0:j-S>>>0,S>>>=0;for(var be=Ye(le);++Q<le;)be[Q]=b[Q+S];return be}function A_e(b,S){var j;return S0(b,function(Q,le,be){return j=S(Q,le,be),!j}),!!j}function Z8(b,S,j){var Q=0,le=b==null?Q:b.length;if(typeof S=="number"&&S===S&&le<=z){for(;Q<le;){var be=Q+le>>>1,ke=b[be];ke!==null&&!Fc(ke)&&(j?ke<=S:ke<S)?Q=be+1:le=be}return le}return ak(b,S,rc,j)}function ak(b,S,j,Q){var le=0,be=b==null?0:b.length;if(be===0)return 0;S=j(S);for(var ke=S!==S,Be=S===null,Fe=Fc(S),Qe=S===r;le<be;){var et=z8((le+be)/2),st=j(b[et]),Tt=st!==r,Ut=st===null,sr=st===st,Vr=Fc(st);if(ke)var ar=Q||sr;else Qe?ar=sr&&(Q||Tt):Be?ar=sr&&Tt&&(Q||!Ut):Fe?ar=sr&&Tt&&!Ut&&(Q||!Vr):Ut||Vr?ar=!1:ar=Q?st<=S:st<S;ar?le=et+1:be=et}return Ka(be,B)}function rH(b,S){for(var j=-1,Q=b.length,le=0,be=[];++j<Q;){var ke=b[j],Be=S?S(ke):ke;if(!j||!iu(Be,Fe)){var Fe=Be;be[le++]=ke===0?0:ke}}return be}function nH(b){return typeof b=="number"?b:Fc(b)?D:+b}function Lc(b){if(typeof b=="string")return b;if(Tr(b))return Hi(b,Lc)+"";if(Fc(b))return Nq?Nq.call(b):"";var S=b+"";return S=="0"&&1/b==-I?"-0":S}function A0(b,S,j){var Q=-1,le=R8,be=b.length,ke=!0,Be=[],Fe=Be;if(j)ke=!1,le=NT;else if(be>=i){var Qe=S?null:M_e(b);if(Qe)return B8(Qe);ke=!1,le=Mb,Fe=new wp}else Fe=S?[]:Be;e:for(;++Q<be;){var et=b[Q],st=S?S(et):et;if(et=j||et!==0?et:0,ke&&st===st){for(var Tt=Fe.length;Tt--;)if(Fe[Tt]===st)continue e;S&&Fe.push(st),Be.push(et)}else le(Fe,st,j)||(Fe!==Be&&Fe.push(st),Be.push(et))}return Be}function ok(b,S){return S=T0(S,b),b=PH(b,S),b==null||delete b[ff(bl(S))]}function iH(b,S,j,Q){return Wb(b,S,j(xp(b,S)),Q)}function J8(b,S,j,Q){for(var le=b.length,be=Q?le:-1;(Q?be--:++be<le)&&S(b[be],be,b););return j?vl(b,Q?0:be,Q?be+1:le):vl(b,Q?be+1:0,Q?le:be)}function sH(b,S){var j=b;return j instanceof ln&&(j=j.value()),MT(S,function(Q,le){return le.func.apply(le.thisArg,_0([Q],le.args))},j)}function ck(b,S,j){var Q=b.length;if(Q<2)return Q?A0(b[0]):[];for(var le=-1,be=Ye(Q);++le<Q;)for(var ke=b[le],Be=-1;++Be<Q;)Be!=le&&(be[le]=zb(be[le]||ke,b[Be],S,j));return A0(Sa(be,1),S,j)}function aH(b,S,j){for(var Q=-1,le=b.length,be=S.length,ke={};++Q<le;){var Be=Q<be?S[Q]:r;j(ke,b[Q],Be)}return ke}function lk(b){return gs(b)?b:[]}function uk(b){return typeof b=="function"?b:rc}function T0(b,S){return Tr(b)?b:bk(b,S)?[b]:NH(Un(b))}var T_e=Jr;function k0(b,S,j){var Q=b.length;return j=j===r?Q:j,!S&&j>=Q?b:vl(b,S,j)}var oH=d8e||function(b){return Ea.clearTimeout(b)};function cH(b,S){if(S)return b.slice();var j=b.length,Q=Iq?Iq(j):new b.constructor(j);return b.copy(Q),Q}function fk(b){var S=new b.constructor(b.byteLength);return new F8(S).set(new F8(b)),S}function k_e(b,S){var j=S?fk(b.buffer):b.buffer;return new b.constructor(j,b.byteOffset,b.byteLength)}function C_e(b){var S=new b.constructor(b.source,Le.exec(b));return S.lastIndex=b.lastIndex,S}function I_e(b){return Vb?vi(Vb.call(b)):{}}function lH(b,S){var j=S?fk(b.buffer):b.buffer;return new b.constructor(j,b.byteOffset,b.length)}function uH(b,S){if(b!==S){var j=b!==r,Q=b===null,le=b===b,be=Fc(b),ke=S!==r,Be=S===null,Fe=S===S,Qe=Fc(S);if(!Be&&!Qe&&!be&&b>S||be&&ke&&Fe&&!Be&&!Qe||Q&&ke&&Fe||!j&&Fe||!le)return 1;if(!Q&&!be&&!Qe&&b<S||Qe&&j&&le&&!Q&&!be||Be&&j&&le||!ke&&le||!Fe)return-1}return 0}function R_e(b,S,j){for(var Q=-1,le=b.criteria,be=S.criteria,ke=le.length,Be=j.length;++Q<ke;){var Fe=uH(le[Q],be[Q]);if(Fe){if(Q>=Be)return Fe;var Qe=j[Q];return Fe*(Qe=="desc"?-1:1)}}return b.index-S.index}function fH(b,S,j,Q){for(var le=-1,be=b.length,ke=j.length,Be=-1,Fe=S.length,Qe=js(be-ke,0),et=Ye(Fe+Qe),st=!Q;++Be<Fe;)et[Be]=S[Be];for(;++le<ke;)(st||le<be)&&(et[j[le]]=b[le]);for(;Qe--;)et[Be++]=b[le++];return et}function hH(b,S,j,Q){for(var le=-1,be=b.length,ke=-1,Be=j.length,Fe=-1,Qe=S.length,et=js(be-Be,0),st=Ye(et+Qe),Tt=!Q;++le<et;)st[le]=b[le];for(var Ut=le;++Fe<Qe;)st[Ut+Fe]=S[Fe];for(;++ke<Be;)(Tt||le<be)&&(st[Ut+j[ke]]=b[le++]);return st}function Qo(b,S){var j=-1,Q=b.length;for(S||(S=Ye(Q));++j<Q;)S[j]=b[j];return S}function uf(b,S,j,Q){var le=!j;j||(j={});for(var be=-1,ke=S.length;++be<ke;){var Be=S[be],Fe=Q?Q(j[Be],b[Be],Be,j,b):r;Fe===r&&(Fe=b[Be]),le?Bh(j,Be,Fe):jb(j,Be,Fe)}return j}function P_e(b,S){return uf(b,vk(b),S)}function B_e(b,S){return uf(b,AH(b),S)}function Q8(b,S){return function(j,Q){var le=Tr(j)?L6e:e_e,be=S?S():{};return le(j,b,ir(Q,2),be)}}function p2(b){return Jr(function(S,j){var Q=-1,le=j.length,be=le>1?j[le-1]:r,ke=le>2?j[2]:r;for(be=b.length>3&&typeof be=="function"?(le--,be):r,ke&&To(j[0],j[1],ke)&&(be=le<3?r:be,le=1),S=vi(S);++Q<le;){var Be=j[Q];Be&&b(S,Be,Q,be)}return S})}function dH(b,S){return function(j,Q){if(j==null)return j;if(!ec(j))return b(j,Q);for(var le=j.length,be=S?le:-1,ke=vi(j);(S?be--:++be<le)&&Q(ke[be],be,ke)!==!1;);return j}}function pH(b){return function(S,j,Q){for(var le=-1,be=vi(S),ke=Q(S),Be=ke.length;Be--;){var Fe=ke[b?Be:++le];if(j(be[Fe],Fe,be)===!1)break}return S}}function D_e(b,S,j){var Q=S&m,le=Kb(b);function be(){var ke=this&&this!==Ea&&this instanceof be?le:b;return ke.apply(Q?j:this,arguments)}return be}function gH(b){return function(S){S=Un(S);var j=o2(S)?ru(S):r,Q=j?j[0]:S.charAt(0),le=j?k0(j,1).join(""):S.slice(1);return Q[b]()+le}}function g2(b){return function(S){return MT(dW(hW(S).replace(E6e,"")),b,"")}}function Kb(b){return function(){var S=arguments;switch(S.length){case 0:return new b;case 1:return new b(S[0]);case 2:return new b(S[0],S[1]);case 3:return new b(S[0],S[1],S[2]);case 4:return new b(S[0],S[1],S[2],S[3]);case 5:return new b(S[0],S[1],S[2],S[3],S[4]);case 6:return new b(S[0],S[1],S[2],S[3],S[4],S[5]);case 7:return new b(S[0],S[1],S[2],S[3],S[4],S[5],S[6])}var j=d2(b.prototype),Q=b.apply(j,S);return Ji(Q)?Q:j}}function O_e(b,S,j){var Q=Kb(b);function le(){for(var be=arguments.length,ke=Ye(be),Be=be,Fe=m2(le);Be--;)ke[Be]=arguments[Be];var Qe=be<3&&ke[0]!==Fe&&ke[be-1]!==Fe?[]:x0(ke,Fe);if(be-=Qe.length,be<j)return wH(b,S,e_,le.placeholder,r,ke,Qe,r,r,j-be);var et=this&&this!==Ea&&this instanceof le?Q:b;return Nc(et,this,ke)}return le}function mH(b){return function(S,j,Q){var le=vi(S);if(!ec(S)){var be=ir(j,3);S=na(S),j=function(Be){return be(le[Be],Be,le)}}var ke=b(S,j,Q);return ke>-1?le[be?S[ke]:ke]:r}}function yH(b){return Oh(function(S){var j=S.length,Q=j,le=ml.prototype.thru;for(b&&S.reverse();Q--;){var be=S[Q];if(typeof be!="function")throw new gl(a);if(le&&!ke&&i_(be)=="wrapper")var ke=new ml([],!0)}for(Q=ke?Q:j;++Q<j;){be=S[Q];var Be=i_(be),Fe=Be=="wrapper"?mk(be):r;Fe&&wk(Fe[0])&&Fe[1]==(R|_|A|M)&&!Fe[4].length&&Fe[9]==1?ke=ke[i_(Fe[0])].apply(ke,Fe[3]):ke=be.length==1&&wk(be)?ke[Be]():ke.thru(be)}return function(){var Qe=arguments,et=Qe[0];if(ke&&Qe.length==1&&Tr(et))return ke.plant(et).value();for(var st=0,Tt=j?S[st].apply(this,Qe):et;++st<j;)Tt=S[st].call(this,Tt);return Tt}})}function e_(b,S,j,Q,le,be,ke,Be,Fe,Qe){var et=S&R,st=S&m,Tt=S&y,Ut=S&(_|x),sr=S&N,Vr=Tt?r:Kb(b);function ar(){for(var an=arguments.length,mn=Ye(an),$c=an;$c--;)mn[$c]=arguments[$c];if(Ut)var ko=m2(ar),Uc=W6e(mn,ko);if(Q&&(mn=fH(mn,Q,le,Ut)),be&&(mn=hH(mn,be,ke,Ut)),an-=Uc,Ut&&an<Qe){var ms=x0(mn,ko);return wH(b,S,e_,ar.placeholder,j,mn,ms,Be,Fe,Qe-an)}var su=st?j:this,Fh=Tt?su[b]:b;return an=mn.length,Be?mn=e5e(mn,Be):sr&&an>1&&mn.reverse(),et&&Fe<an&&(mn.length=Fe),this&&this!==Ea&&this instanceof ar&&(Fh=Vr||Kb(Fh)),Fh.apply(su,mn)}return ar}function vH(b,S){return function(j,Q){return c_e(j,b,S(Q),{})}}function t_(b,S){return function(j,Q){var le;if(j===r&&Q===r)return S;if(j!==r&&(le=j),Q!==r){if(le===r)return Q;typeof j=="string"||typeof Q=="string"?(j=Lc(j),Q=Lc(Q)):(j=nH(j),Q=nH(Q)),le=b(j,Q)}return le}}function hk(b){return Oh(function(S){return S=Hi(S,Mc(ir())),Jr(function(j){var Q=this;return b(S,function(le){return Nc(le,Q,j)})})})}function r_(b,S){S=S===r?" ":Lc(S);var j=S.length;if(j<2)return j?sk(S,b):S;var Q=sk(S,j8(b/c2(S)));return o2(S)?k0(ru(Q),0,b).join(""):Q.slice(0,b)}function N_e(b,S,j,Q){var le=S&m,be=Kb(b);function ke(){for(var Be=-1,Fe=arguments.length,Qe=-1,et=Q.length,st=Ye(et+Fe),Tt=this&&this!==Ea&&this instanceof ke?be:b;++Qe<et;)st[Qe]=Q[Qe];for(;Fe--;)st[Qe++]=arguments[++Be];return Nc(Tt,le?j:this,st)}return ke}function bH(b){return function(S,j,Q){return Q&&typeof Q!="number"&&To(S,j,Q)&&(j=Q=r),S=Lh(S),j===r?(j=S,S=0):j=Lh(j),Q=Q===r?S<j?1:-1:Lh(Q),w_e(S,j,Q,b)}}function n_(b){return function(S,j){return typeof S=="string"&&typeof j=="string"||(S=wl(S),j=wl(j)),b(S,j)}}function wH(b,S,j,Q,le,be,ke,Be,Fe,Qe){var et=S&_,st=et?ke:r,Tt=et?r:ke,Ut=et?be:r,sr=et?r:be;S|=et?A:C,S&=~(et?C:A),S&v||(S&=~(m|y));var Vr=[b,S,le,Ut,st,sr,Tt,Be,Fe,Qe],ar=j.apply(r,Vr);return wk(b)&&BH(ar,Vr),ar.placeholder=Q,DH(ar,b,S)}function dk(b){var S=Vs[b];return function(j,Q){if(j=wl(j),Q=Q==null?0:Ka(Nr(Q),292),Q&&Dq(j)){var le=(Un(j)+"e").split("e"),be=S(le[0]+"e"+(+le[1]+Q));return le=(Un(be)+"e").split("e"),+(le[0]+"e"+(+le[1]-Q))}return S(j)}}var M_e=f2&&1/B8(new f2([,-0]))[1]==I?function(b){return new f2(b)}:Nk;function _H(b){return function(S){var j=Ga(S);return j==V?zT(S):j==Ee?Q6e(S):H6e(S,b(S))}}function Dh(b,S,j,Q,le,be,ke,Be){var Fe=S&y;if(!Fe&&typeof b!="function")throw new gl(a);var Qe=Q?Q.length:0;if(Qe||(S&=~(A|C),Q=le=r),ke=ke===r?ke:js(Nr(ke),0),Be=Be===r?Be:Nr(Be),Qe-=le?le.length:0,S&C){var et=Q,st=le;Q=le=r}var Tt=Fe?r:mk(b),Ut=[b,S,j,Q,le,et,st,be,ke,Be];if(Tt&&Z_e(Ut,Tt),b=Ut[0],S=Ut[1],j=Ut[2],Q=Ut[3],le=Ut[4],Be=Ut[9]=Ut[9]===r?Fe?0:b.length:js(Ut[9]-Qe,0),!Be&&S&(_|x)&&(S&=~(_|x)),!S||S==m)var sr=D_e(b,S,j);else S==_||S==x?sr=O_e(b,S,Be):(S==A||S==(m|A))&&!le.length?sr=N_e(b,S,j,Q):sr=e_.apply(r,Ut);var Vr=Tt?tH:BH;return DH(Vr(sr,Ut),b,S)}function xH(b,S,j,Q){return b===r||iu(b,u2[j])&&!Yn.call(Q,j)?S:b}function EH(b,S,j,Q,le,be){return Ji(b)&&Ji(S)&&(be.set(S,b),X8(b,S,r,EH,be),be.delete(S)),b}function L_e(b){return Xb(b)?r:b}function SH(b,S,j,Q,le,be){var ke=j&g,Be=b.length,Fe=S.length;if(Be!=Fe&&!(ke&&Fe>Be))return!1;var Qe=be.get(b),et=be.get(S);if(Qe&&et)return Qe==S&&et==b;var st=-1,Tt=!0,Ut=j&p?new wp:r;for(be.set(b,S),be.set(S,b);++st<Be;){var sr=b[st],Vr=S[st];if(Q)var ar=ke?Q(Vr,sr,st,S,b,be):Q(sr,Vr,st,b,S,be);if(ar!==r){if(ar)continue;Tt=!1;break}if(Ut){if(!LT(S,function(an,mn){if(!Mb(Ut,mn)&&(sr===an||le(sr,an,j,Q,be)))return Ut.push(mn)})){Tt=!1;break}}else if(!(sr===Vr||le(sr,Vr,j,Q,be))){Tt=!1;break}}return be.delete(b),be.delete(S),Tt}function F_e(b,S,j,Q,le,be,ke){switch(j){case Z:if(b.byteLength!=S.byteLength||b.byteOffset!=S.byteOffset)return!1;b=b.buffer,S=S.buffer;case se:return!(b.byteLength!=S.byteLength||!be(new F8(b),new F8(S)));case G:case ee:case oe:return iu(+b,+S);case te:return b.name==S.name&&b.message==S.message;case ve:case ge:return b==S+"";case V:var Be=zT;case Ee:var Fe=Q&g;if(Be||(Be=B8),b.size!=S.size&&!Fe)return!1;var Qe=ke.get(b);if(Qe)return Qe==S;Q|=p,ke.set(b,S);var et=SH(Be(b),Be(S),Q,le,be,ke);return ke.delete(b),et;case Pe:if(Vb)return Vb.call(b)==Vb.call(S)}return!1}function $_e(b,S,j,Q,le,be){var ke=j&g,Be=pk(b),Fe=Be.length,Qe=pk(S),et=Qe.length;if(Fe!=et&&!ke)return!1;for(var st=Fe;st--;){var Tt=Be[st];if(!(ke?Tt in S:Yn.call(S,Tt)))return!1}var Ut=be.get(b),sr=be.get(S);if(Ut&&sr)return Ut==S&&sr==b;var Vr=!0;be.set(b,S),be.set(S,b);for(var ar=ke;++st<Fe;){Tt=Be[st];var an=b[Tt],mn=S[Tt];if(Q)var $c=ke?Q(mn,an,Tt,S,b,be):Q(an,mn,Tt,b,S,be);if(!($c===r?an===mn||le(an,mn,j,Q,be):$c)){Vr=!1;break}ar||(ar=Tt=="constructor")}if(Vr&&!ar){var ko=b.constructor,Uc=S.constructor;ko!=Uc&&"constructor"in b&&"constructor"in S&&!(typeof ko=="function"&&ko instanceof ko&&typeof Uc=="function"&&Uc instanceof Uc)&&(Vr=!1)}return be.delete(b),be.delete(S),Vr}function Oh(b){return xk(RH(b,r,$H),b+"")}function pk(b){return qq(b,na,vk)}function gk(b){return qq(b,tc,AH)}var mk=q8?function(b){return q8.get(b)}:Nk;function i_(b){for(var S=b.name+"",j=h2[S],Q=Yn.call(h2,S)?j.length:0;Q--;){var le=j[Q],be=le.func;if(be==null||be==b)return le.name}return S}function m2(b){var S=Yn.call(pe,"placeholder")?pe:b;return S.placeholder}function ir(){var b=pe.iteratee||Dk;return b=b===Dk?Kq:b,arguments.length?b(arguments[0],arguments[1]):b}function s_(b,S){var j=b.__data__;return K_e(S)?j[typeof S=="string"?"string":"hash"]:j.map}function yk(b){for(var S=na(b),j=S.length;j--;){var Q=S[j],le=b[Q];S[j]=[Q,le,CH(le)]}return S}function Ep(b,S){var j=X6e(b,S);return Wq(j)?j:r}function U_e(b){var S=Yn.call(b,vp),j=b[vp];try{b[vp]=r;var Q=!0}catch{}var le=M8.call(b);return Q&&(S?b[vp]=j:delete b[vp]),le}var vk=HT?function(b){return b==null?[]:(b=vi(b),w0(HT(b),function(S){return Pq.call(b,S)}))}:Mk,AH=HT?function(b){for(var S=[];b;)_0(S,vk(b)),b=$8(b);return S}:Mk,Ga=Ao;(WT&&Ga(new WT(new ArrayBuffer(1)))!=Z||Fb&&Ga(new Fb)!=V||KT&&Ga(KT.resolve())!=ie||f2&&Ga(new f2)!=Ee||$b&&Ga(new $b)!=Ie)&&(Ga=function(b){var S=Ao(b),j=S==ne?b.constructor:r,Q=j?Sp(j):"";if(Q)switch(Q){case x8e:return Z;case E8e:return V;case S8e:return ie;case A8e:return Ee;case T8e:return Ie}return S});function V_e(b,S,j){for(var Q=-1,le=j.length;++Q<le;){var be=j[Q],ke=be.size;switch(be.type){case"drop":b+=ke;break;case"dropRight":S-=ke;break;case"take":S=Ka(S,b+ke);break;case"takeRight":b=js(b,S-ke);break}}return{start:b,end:S}}function j_e(b){var S=b.match(fe);return S?S[1].split(_e):[]}function TH(b,S,j){S=T0(S,b);for(var Q=-1,le=S.length,be=!1;++Q<le;){var ke=ff(S[Q]);if(!(be=b!=null&&j(b,ke)))break;b=b[ke]}return be||++Q!=le?be:(le=b==null?0:b.length,!!le&&h_(le)&&Nh(ke,le)&&(Tr(b)||Ap(b)))}function z_e(b){var S=b.length,j=new b.constructor(S);return S&&typeof b[0]=="string"&&Yn.call(b,"index")&&(j.index=b.index,j.input=b.input),j}function kH(b){return typeof b.constructor=="function"&&!Gb(b)?d2($8(b)):{}}function q_e(b,S,j){var Q=b.constructor;switch(S){case se:return fk(b);case G:case ee:return new Q(+b);case Z:return k_e(b,j);case J:case de:case Ae:case De:case Re:case bt:case $t:case ut:case Mt:return lH(b,j);case V:return new Q;case oe:case ge:return new Q(b);case ve:return C_e(b);case Ee:return new Q;case Pe:return I_e(b)}}function H_e(b,S){var j=S.length;if(!j)return b;var Q=j-1;return S[Q]=(j>1?"& ":"")+S[Q],S=S.join(j>2?", ":" "),b.replace(mi,`{
/* [wrapped with `+S+`] */
`)}function W_e(b){return Tr(b)||Ap(b)||!!(Bq&&b&&b[Bq])}function Nh(b,S){var j=typeof b;return S=S??U,!!S&&(j=="number"||j!="symbol"&&it.test(b))&&b>-1&&b%1==0&&b<S}function To(b,S,j){if(!Ji(j))return!1;var Q=typeof S;return(Q=="number"?ec(j)&&Nh(S,j.length):Q=="string"&&S in j)?iu(j[S],b):!1}function bk(b,S){if(Tr(b))return!1;var j=typeof b;return j=="number"||j=="symbol"||j=="boolean"||b==null||Fc(b)?!0:pi.test(b)||!yr.test(b)||S!=null&&b in vi(S)}function K_e(b){var S=typeof b;return S=="string"||S=="number"||S=="symbol"||S=="boolean"?b!=="__proto__":b===null}function wk(b){var S=i_(b),j=pe[S];if(typeof j!="function"||!(S in ln.prototype))return!1;if(b===j)return!0;var Q=mk(j);return!!Q&&b===Q[0]}function G_e(b){return!!Cq&&Cq in b}var Y_e=O8?Mh:Lk;function Gb(b){var S=b&&b.constructor,j=typeof S=="function"&&S.prototype||u2;return b===j}function CH(b){return b===b&&!Ji(b)}function IH(b,S){return function(j){return j==null?!1:j[b]===S&&(S!==r||b in vi(j))}}function X_e(b){var S=u_(b,function(Q){return j.size===l&&j.clear(),Q}),j=S.cache;return S}function Z_e(b,S){var j=b[1],Q=S[1],le=j|Q,be=le<(m|y|R),ke=Q==R&&j==_||Q==R&&j==M&&b[7].length<=S[8]||Q==(R|M)&&S[7].length<=S[8]&&j==_;if(!(be||ke))return b;Q&m&&(b[2]=S[2],le|=j&m?0:v);var Be=S[3];if(Be){var Fe=b[3];b[3]=Fe?fH(Fe,Be,S[4]):Be,b[4]=Fe?x0(b[3],u):S[4]}return Be=S[5],Be&&(Fe=b[5],b[5]=Fe?hH(Fe,Be,S[6]):Be,b[6]=Fe?x0(b[5],u):S[6]),Be=S[7],Be&&(b[7]=Be),Q&R&&(b[8]=b[8]==null?S[8]:Ka(b[8],S[8])),b[9]==null&&(b[9]=S[9]),b[0]=S[0],b[1]=le,b}function J_e(b){var S=[];if(b!=null)for(var j in vi(b))S.push(j);return S}function Q_e(b){return M8.call(b)}function RH(b,S,j){return S=js(S===r?b.length-1:S,0),function(){for(var Q=arguments,le=-1,be=js(Q.length-S,0),ke=Ye(be);++le<be;)ke[le]=Q[S+le];le=-1;for(var Be=Ye(S+1);++le<S;)Be[le]=Q[le];return Be[S]=j(ke),Nc(b,this,Be)}}function PH(b,S){return S.length<2?b:xp(b,vl(S,0,-1))}function e5e(b,S){for(var j=b.length,Q=Ka(S.length,j),le=Qo(b);Q--;){var be=S[Q];b[Q]=Nh(be,j)?le[be]:r}return b}function _k(b,S){if(!(S==="constructor"&&typeof b[S]=="function")&&S!="__proto__")return b[S]}var BH=OH(tH),Yb=g8e||function(b,S){return Ea.setTimeout(b,S)},xk=OH(E_e);function DH(b,S,j){var Q=S+"";return xk(b,H_e(Q,t5e(j_e(Q),j)))}function OH(b){var S=0,j=0;return function(){var Q=b8e(),le=k-(Q-j);if(j=Q,le>0){if(++S>=E)return arguments[0]}else S=0;return b.apply(r,arguments)}}function a_(b,S){var j=-1,Q=b.length,le=Q-1;for(S=S===r?Q:S;++j<S;){var be=ik(j,le),ke=b[be];b[be]=b[j],b[j]=ke}return b.length=S,b}var NH=X_e(function(b){var S=[];return b.charCodeAt(0)===46&&S.push(""),b.replace(gi,function(j,Q,le,be){S.push(le?be.replace(xe,"$1"):Q||j)}),S});function ff(b){if(typeof b=="string"||Fc(b))return b;var S=b+"";return S=="0"&&1/b==-I?"-0":S}function Sp(b){if(b!=null){try{return N8.call(b)}catch{}try{return b+""}catch{}}return""}function t5e(b,S){return pl(F,function(j){var Q="_."+j[0];S&j[1]&&!R8(b,Q)&&b.push(Q)}),b.sort()}function MH(b){if(b instanceof ln)return b.clone();var S=new ml(b.__wrapped__,b.__chain__);return S.__actions__=Qo(b.__actions__),S.__index__=b.__index__,S.__values__=b.__values__,S}function r5e(b,S,j){(j?To(b,S,j):S===r)?S=1:S=js(Nr(S),0);var Q=b==null?0:b.length;if(!Q||S<1)return[];for(var le=0,be=0,ke=Ye(j8(Q/S));le<Q;)ke[be++]=vl(b,le,le+=S);return ke}function n5e(b){for(var S=-1,j=b==null?0:b.length,Q=0,le=[];++S<j;){var be=b[S];be&&(le[Q++]=be)}return le}function i5e(){var b=arguments.length;if(!b)return[];for(var S=Ye(b-1),j=arguments[0],Q=b;Q--;)S[Q-1]=arguments[Q];return _0(Tr(j)?Qo(j):[j],Sa(S,1))}var s5e=Jr(function(b,S){return gs(b)?zb(b,Sa(S,1,gs,!0)):[]}),a5e=Jr(function(b,S){var j=bl(S);return gs(j)&&(j=r),gs(b)?zb(b,Sa(S,1,gs,!0),ir(j,2)):[]}),o5e=Jr(function(b,S){var j=bl(S);return gs(j)&&(j=r),gs(b)?zb(b,Sa(S,1,gs,!0),r,j):[]});function c5e(b,S,j){var Q=b==null?0:b.length;return Q?(S=j||S===r?1:Nr(S),vl(b,S<0?0:S,Q)):[]}function l5e(b,S,j){var Q=b==null?0:b.length;return Q?(S=j||S===r?1:Nr(S),S=Q-S,vl(b,0,S<0?0:S)):[]}function u5e(b,S){return b&&b.length?J8(b,ir(S,3),!0,!0):[]}function f5e(b,S){return b&&b.length?J8(b,ir(S,3),!0):[]}function h5e(b,S,j,Q){var le=b==null?0:b.length;return le?(j&&typeof j!="number"&&To(b,S,j)&&(j=0,Q=le),i_e(b,S,j,Q)):[]}function LH(b,S,j){var Q=b==null?0:b.length;if(!Q)return-1;var le=j==null?0:Nr(j);return le<0&&(le=js(Q+le,0)),P8(b,ir(S,3),le)}function FH(b,S,j){var Q=b==null?0:b.length;if(!Q)return-1;var le=Q-1;return j!==r&&(le=Nr(j),le=j<0?js(Q+le,0):Ka(le,Q-1)),P8(b,ir(S,3),le,!0)}function $H(b){var S=b==null?0:b.length;return S?Sa(b,1):[]}function d5e(b){var S=b==null?0:b.length;return S?Sa(b,I):[]}function p5e(b,S){var j=b==null?0:b.length;return j?(S=S===r?1:Nr(S),Sa(b,S)):[]}function g5e(b){for(var S=-1,j=b==null?0:b.length,Q={};++S<j;){var le=b[S];Q[le[0]]=le[1]}return Q}function UH(b){return b&&b.length?b[0]:r}function m5e(b,S,j){var Q=b==null?0:b.length;if(!Q)return-1;var le=j==null?0:Nr(j);return le<0&&(le=js(Q+le,0)),a2(b,S,le)}function y5e(b){var S=b==null?0:b.length;return S?vl(b,0,-1):[]}var v5e=Jr(function(b){var S=Hi(b,lk);return S.length&&S[0]===b[0]?QT(S):[]}),b5e=Jr(function(b){var S=bl(b),j=Hi(b,lk);return S===bl(j)?S=r:j.pop(),j.length&&j[0]===b[0]?QT(j,ir(S,2)):[]}),w5e=Jr(function(b){var S=bl(b),j=Hi(b,lk);return S=typeof S=="function"?S:r,S&&j.pop(),j.length&&j[0]===b[0]?QT(j,r,S):[]});function _5e(b,S){return b==null?"":y8e.call(b,S)}function bl(b){var S=b==null?0:b.length;return S?b[S-1]:r}function x5e(b,S,j){var Q=b==null?0:b.length;if(!Q)return-1;var le=Q;return j!==r&&(le=Nr(j),le=le<0?js(Q+le,0):Ka(le,Q-1)),S===S?t8e(b,S,le):P8(b,wq,le,!0)}function E5e(b,S){return b&&b.length?Zq(b,Nr(S)):r}var S5e=Jr(VH);function VH(b,S){return b&&b.length&&S&&S.length?nk(b,S):b}function A5e(b,S,j){return b&&b.length&&S&&S.length?nk(b,S,ir(j,2)):b}function T5e(b,S,j){return b&&b.length&&S&&S.length?nk(b,S,r,j):b}var k5e=Oh(function(b,S){var j=b==null?0:b.length,Q=YT(b,S);return eH(b,Hi(S,function(le){return Nh(le,j)?+le:le}).sort(uH)),Q});function C5e(b,S){var j=[];if(!(b&&b.length))return j;var Q=-1,le=[],be=b.length;for(S=ir(S,3);++Q<be;){var ke=b[Q];S(ke,Q,b)&&(j.push(ke),le.push(Q))}return eH(b,le),j}function Ek(b){return b==null?b:_8e.call(b)}function I5e(b,S,j){var Q=b==null?0:b.length;return Q?(j&&typeof j!="number"&&To(b,S,j)?(S=0,j=Q):(S=S==null?0:Nr(S),j=j===r?Q:Nr(j)),vl(b,S,j)):[]}function R5e(b,S){return Z8(b,S)}function P5e(b,S,j){return ak(b,S,ir(j,2))}function B5e(b,S){var j=b==null?0:b.length;if(j){var Q=Z8(b,S);if(Q<j&&iu(b[Q],S))return Q}return-1}function D5e(b,S){return Z8(b,S,!0)}function O5e(b,S,j){return ak(b,S,ir(j,2),!0)}function N5e(b,S){var j=b==null?0:b.length;if(j){var Q=Z8(b,S,!0)-1;if(iu(b[Q],S))return Q}return-1}function M5e(b){return b&&b.length?rH(b):[]}function L5e(b,S){return b&&b.length?rH(b,ir(S,2)):[]}function F5e(b){var S=b==null?0:b.length;return S?vl(b,1,S):[]}function $5e(b,S,j){return b&&b.length?(S=j||S===r?1:Nr(S),vl(b,0,S<0?0:S)):[]}function U5e(b,S,j){var Q=b==null?0:b.length;return Q?(S=j||S===r?1:Nr(S),S=Q-S,vl(b,S<0?0:S,Q)):[]}function V5e(b,S){return b&&b.length?J8(b,ir(S,3),!1,!0):[]}function j5e(b,S){return b&&b.length?J8(b,ir(S,3)):[]}var z5e=Jr(function(b){return A0(Sa(b,1,gs,!0))}),q5e=Jr(function(b){var S=bl(b);return gs(S)&&(S=r),A0(Sa(b,1,gs,!0),ir(S,2))}),H5e=Jr(function(b){var S=bl(b);return S=typeof S=="function"?S:r,A0(Sa(b,1,gs,!0),r,S)});function W5e(b){return b&&b.length?A0(b):[]}function K5e(b,S){return b&&b.length?A0(b,ir(S,2)):[]}function G5e(b,S){return S=typeof S=="function"?S:r,b&&b.length?A0(b,r,S):[]}function Sk(b){if(!(b&&b.length))return[];var S=0;return b=w0(b,function(j){if(gs(j))return S=js(j.length,S),!0}),VT(S,function(j){return Hi(b,FT(j))})}function jH(b,S){if(!(b&&b.length))return[];var j=Sk(b);return S==null?j:Hi(j,function(Q){return Nc(S,r,Q)})}var Y5e=Jr(function(b,S){return gs(b)?zb(b,S):[]}),X5e=Jr(function(b){return ck(w0(b,gs))}),Z5e=Jr(function(b){var S=bl(b);return gs(S)&&(S=r),ck(w0(b,gs),ir(S,2))}),J5e=Jr(function(b){var S=bl(b);return S=typeof S=="function"?S:r,ck(w0(b,gs),r,S)}),Q5e=Jr(Sk);function exe(b,S){return aH(b||[],S||[],jb)}function txe(b,S){return aH(b||[],S||[],Wb)}var rxe=Jr(function(b){var S=b.length,j=S>1?b[S-1]:r;return j=typeof j=="function"?(b.pop(),j):r,jH(b,j)});function zH(b){var S=pe(b);return S.__chain__=!0,S}function nxe(b,S){return S(b),b}function o_(b,S){return S(b)}var ixe=Oh(function(b){var S=b.length,j=S?b[0]:0,Q=this.__wrapped__,le=function(be){return YT(be,b)};return S>1||this.__actions__.length||!(Q instanceof ln)||!Nh(j)?this.thru(le):(Q=Q.slice(j,+j+(S?1:0)),Q.__actions__.push({func:o_,args:[le],thisArg:r}),new ml(Q,this.__chain__).thru(function(be){return S&&!be.length&&be.push(r),be}))});function sxe(){return zH(this)}function axe(){return new ml(this.value(),this.__chain__)}function oxe(){this.__values__===r&&(this.__values__=nW(this.value()));var b=this.__index__>=this.__values__.length,S=b?r:this.__values__[this.__index__++];return{done:b,value:S}}function cxe(){return this}function lxe(b){for(var S,j=this;j instanceof W8;){var Q=MH(j);Q.__index__=0,Q.__values__=r,S?le.__wrapped__=Q:S=Q;var le=Q;j=j.__wrapped__}return le.__wrapped__=b,S}function uxe(){var b=this.__wrapped__;if(b instanceof ln){var S=b;return this.__actions__.length&&(S=new ln(this)),S=S.reverse(),S.__actions__.push({func:o_,args:[Ek],thisArg:r}),new ml(S,this.__chain__)}return this.thru(Ek)}function fxe(){return sH(this.__wrapped__,this.__actions__)}var hxe=Q8(function(b,S,j){Yn.call(b,j)?++b[j]:Bh(b,j,1)});function dxe(b,S,j){var Q=Tr(b)?vq:n_e;return j&&To(b,S,j)&&(S=r),Q(b,ir(S,3))}function pxe(b,S){var j=Tr(b)?w0:jq;return j(b,ir(S,3))}var gxe=mH(LH),mxe=mH(FH);function yxe(b,S){return Sa(c_(b,S),1)}function vxe(b,S){return Sa(c_(b,S),I)}function bxe(b,S,j){return j=j===r?1:Nr(j),Sa(c_(b,S),j)}function qH(b,S){var j=Tr(b)?pl:S0;return j(b,ir(S,3))}function HH(b,S){var j=Tr(b)?F6e:Vq;return j(b,ir(S,3))}var wxe=Q8(function(b,S,j){Yn.call(b,j)?b[j].push(S):Bh(b,j,[S])});function _xe(b,S,j,Q){b=ec(b)?b:v2(b),j=j&&!Q?Nr(j):0;var le=b.length;return j<0&&(j=js(le+j,0)),d_(b)?j<=le&&b.indexOf(S,j)>-1:!!le&&a2(b,S,j)>-1}var xxe=Jr(function(b,S,j){var Q=-1,le=typeof S=="function",be=ec(b)?Ye(b.length):[];return S0(b,function(ke){be[++Q]=le?Nc(S,ke,j):qb(ke,S,j)}),be}),Exe=Q8(function(b,S,j){Bh(b,j,S)});function c_(b,S){var j=Tr(b)?Hi:Gq;return j(b,ir(S,3))}function Sxe(b,S,j,Q){return b==null?[]:(Tr(S)||(S=S==null?[]:[S]),j=Q?r:j,Tr(j)||(j=j==null?[]:[j]),Jq(b,S,j))}var Axe=Q8(function(b,S,j){b[j?0:1].push(S)},function(){return[[],[]]});function Txe(b,S,j){var Q=Tr(b)?MT:xq,le=arguments.length<3;return Q(b,ir(S,4),j,le,S0)}function kxe(b,S,j){var Q=Tr(b)?$6e:xq,le=arguments.length<3;return Q(b,ir(S,4),j,le,Vq)}function Cxe(b,S){var j=Tr(b)?w0:jq;return j(b,f_(ir(S,3)))}function Ixe(b){var S=Tr(b)?Lq:__e;return S(b)}function Rxe(b,S,j){(j?To(b,S,j):S===r)?S=1:S=Nr(S);var Q=Tr(b)?J8e:x_e;return Q(b,S)}function Pxe(b){var S=Tr(b)?Q8e:S_e;return S(b)}function Bxe(b){if(b==null)return 0;if(ec(b))return d_(b)?c2(b):b.length;var S=Ga(b);return S==V||S==Ee?b.size:tk(b).length}function Dxe(b,S,j){var Q=Tr(b)?LT:A_e;return j&&To(b,S,j)&&(S=r),Q(b,ir(S,3))}var Oxe=Jr(function(b,S){if(b==null)return[];var j=S.length;return j>1&&To(b,S[0],S[1])?S=[]:j>2&&To(S[0],S[1],S[2])&&(S=[S[0]]),Jq(b,Sa(S,1),[])}),l_=p8e||function(){return Ea.Date.now()};function Nxe(b,S){if(typeof S!="function")throw new gl(a);return b=Nr(b),function(){if(--b<1)return S.apply(this,arguments)}}function WH(b,S,j){return S=j?r:S,S=b&&S==null?b.length:S,Dh(b,R,r,r,r,r,S)}function KH(b,S){var j;if(typeof S!="function")throw new gl(a);return b=Nr(b),function(){return--b>0&&(j=S.apply(this,arguments)),b<=1&&(S=r),j}}var Ak=Jr(function(b,S,j){var Q=m;if(j.length){var le=x0(j,m2(Ak));Q|=A}return Dh(b,Q,S,j,le)}),GH=Jr(function(b,S,j){var Q=m|y;if(j.length){var le=x0(j,m2(GH));Q|=A}return Dh(S,Q,b,j,le)});function YH(b,S,j){S=j?r:S;var Q=Dh(b,_,r,r,r,r,r,S);return Q.placeholder=YH.placeholder,Q}function XH(b,S,j){S=j?r:S;var Q=Dh(b,x,r,r,r,r,r,S);return Q.placeholder=XH.placeholder,Q}function ZH(b,S,j){var Q,le,be,ke,Be,Fe,Qe=0,et=!1,st=!1,Tt=!0;if(typeof b!="function")throw new gl(a);S=wl(S)||0,Ji(j)&&(et=!!j.leading,st="maxWait"in j,be=st?js(wl(j.maxWait)||0,S):be,Tt="trailing"in j?!!j.trailing:Tt);function Ut(ms){var su=Q,Fh=le;return Q=le=r,Qe=ms,ke=b.apply(Fh,su),ke}function sr(ms){return Qe=ms,Be=Yb(an,S),et?Ut(ms):ke}function Vr(ms){var su=ms-Fe,Fh=ms-Qe,mW=S-su;return st?Ka(mW,be-Fh):mW}function ar(ms){var su=ms-Fe,Fh=ms-Qe;return Fe===r||su>=S||su<0||st&&Fh>=be}function an(){var ms=l_();if(ar(ms))return mn(ms);Be=Yb(an,Vr(ms))}function mn(ms){return Be=r,Tt&&Q?Ut(ms):(Q=le=r,ke)}function $c(){Be!==r&&oH(Be),Qe=0,Q=Fe=le=Be=r}function ko(){return Be===r?ke:mn(l_())}function Uc(){var ms=l_(),su=ar(ms);if(Q=arguments,le=this,Fe=ms,su){if(Be===r)return sr(Fe);if(st)return oH(Be),Be=Yb(an,S),Ut(Fe)}return Be===r&&(Be=Yb(an,S)),ke}return Uc.cancel=$c,Uc.flush=ko,Uc}var Mxe=Jr(function(b,S){return Uq(b,1,S)}),Lxe=Jr(function(b,S,j){return Uq(b,wl(S)||0,j)});function Fxe(b){return Dh(b,N)}function u_(b,S){if(typeof b!="function"||S!=null&&typeof S!="function")throw new gl(a);var j=function(){var Q=arguments,le=S?S.apply(this,Q):Q[0],be=j.cache;if(be.has(le))return be.get(le);var ke=b.apply(this,Q);return j.cache=be.set(le,ke)||be,ke};return j.cache=new(u_.Cache||Ph),j}u_.Cache=Ph;function f_(b){if(typeof b!="function")throw new gl(a);return function(){var S=arguments;switch(S.length){case 0:return!b.call(this);case 1:return!b.call(this,S[0]);case 2:return!b.call(this,S[0],S[1]);case 3:return!b.call(this,S[0],S[1],S[2])}return!b.apply(this,S)}}function $xe(b){return KH(2,b)}var Uxe=T_e(function(b,S){S=S.length==1&&Tr(S[0])?Hi(S[0],Mc(ir())):Hi(Sa(S,1),Mc(ir()));var j=S.length;return Jr(function(Q){for(var le=-1,be=Ka(Q.length,j);++le<be;)Q[le]=S[le].call(this,Q[le]);return Nc(b,this,Q)})}),Tk=Jr(function(b,S){var j=x0(S,m2(Tk));return Dh(b,A,r,S,j)}),JH=Jr(function(b,S){var j=x0(S,m2(JH));return Dh(b,C,r,S,j)}),Vxe=Oh(function(b,S){return Dh(b,M,r,r,r,S)});function jxe(b,S){if(typeof b!="function")throw new gl(a);return S=S===r?S:Nr(S),Jr(b,S)}function zxe(b,S){if(typeof b!="function")throw new gl(a);return S=S==null?0:js(Nr(S),0),Jr(function(j){var Q=j[S],le=k0(j,0,S);return Q&&_0(le,Q),Nc(b,this,le)})}function qxe(b,S,j){var Q=!0,le=!0;if(typeof b!="function")throw new gl(a);return Ji(j)&&(Q="leading"in j?!!j.leading:Q,le="trailing"in j?!!j.trailing:le),ZH(b,S,{leading:Q,maxWait:S,trailing:le})}function Hxe(b){return WH(b,1)}function Wxe(b,S){return Tk(uk(S),b)}function Kxe(){if(!arguments.length)return[];var b=arguments[0];return Tr(b)?b:[b]}function Gxe(b){return yl(b,d)}function Yxe(b,S){return S=typeof S=="function"?S:r,yl(b,d,S)}function Xxe(b){return yl(b,f|d)}function Zxe(b,S){return S=typeof S=="function"?S:r,yl(b,f|d,S)}function Jxe(b,S){return S==null||$q(b,S,na(S))}function iu(b,S){return b===S||b!==b&&S!==S}var Qxe=n_(JT),e7e=n_(function(b,S){return b>=S}),Ap=Hq(function(){return arguments}())?Hq:function(b){return cs(b)&&Yn.call(b,"callee")&&!Pq.call(b,"callee")},Tr=Ye.isArray,t7e=hq?Mc(hq):l_e;function ec(b){return b!=null&&h_(b.length)&&!Mh(b)}function gs(b){return cs(b)&&ec(b)}function r7e(b){return b===!0||b===!1||cs(b)&&Ao(b)==G}var C0=m8e||Lk,n7e=dq?Mc(dq):u_e;function i7e(b){return cs(b)&&b.nodeType===1&&!Xb(b)}function s7e(b){if(b==null)return!0;if(ec(b)&&(Tr(b)||typeof b=="string"||typeof b.splice=="function"||C0(b)||y2(b)||Ap(b)))return!b.length;var S=Ga(b);if(S==V||S==Ee)return!b.size;if(Gb(b))return!tk(b).length;for(var j in b)if(Yn.call(b,j))return!1;return!0}function a7e(b,S){return Hb(b,S)}function o7e(b,S,j){j=typeof j=="function"?j:r;var Q=j?j(b,S):r;return Q===r?Hb(b,S,r,j):!!Q}function kk(b){if(!cs(b))return!1;var S=Ao(b);return S==te||S==ae||typeof b.message=="string"&&typeof b.name=="string"&&!Xb(b)}function c7e(b){return typeof b=="number"&&Dq(b)}function Mh(b){if(!Ji(b))return!1;var S=Ao(b);return S==K||S==re||S==q||S==ce}function QH(b){return typeof b=="number"&&b==Nr(b)}function h_(b){return typeof b=="number"&&b>-1&&b%1==0&&b<=U}function Ji(b){var S=typeof b;return b!=null&&(S=="object"||S=="function")}function cs(b){return b!=null&&typeof b=="object"}var eW=pq?Mc(pq):h_e;function l7e(b,S){return b===S||ek(b,S,yk(S))}function u7e(b,S,j){return j=typeof j=="function"?j:r,ek(b,S,yk(S),j)}function f7e(b){return tW(b)&&b!=+b}function h7e(b){if(Y_e(b))throw new Er(s);return Wq(b)}function d7e(b){return b===null}function p7e(b){return b==null}function tW(b){return typeof b=="number"||cs(b)&&Ao(b)==oe}function Xb(b){if(!cs(b)||Ao(b)!=ne)return!1;var S=$8(b);if(S===null)return!0;var j=Yn.call(S,"constructor")&&S.constructor;return typeof j=="function"&&j instanceof j&&N8.call(j)==u8e}var Ck=gq?Mc(gq):d_e;function g7e(b){return QH(b)&&b>=-U&&b<=U}var rW=mq?Mc(mq):p_e;function d_(b){return typeof b=="string"||!Tr(b)&&cs(b)&&Ao(b)==ge}function Fc(b){return typeof b=="symbol"||cs(b)&&Ao(b)==Pe}var y2=yq?Mc(yq):g_e;function m7e(b){return b===r}function y7e(b){return cs(b)&&Ga(b)==Ie}function v7e(b){return cs(b)&&Ao(b)==$e}var b7e=n_(rk),w7e=n_(function(b,S){return b<=S});function nW(b){if(!b)return[];if(ec(b))return d_(b)?ru(b):Qo(b);if(Lb&&b[Lb])return J6e(b[Lb]());var S=Ga(b),j=S==V?zT:S==Ee?B8:v2;return j(b)}function Lh(b){if(!b)return b===0?b:0;if(b=wl(b),b===I||b===-I){var S=b<0?-1:1;return S*O}return b===b?b:0}function Nr(b){var S=Lh(b),j=S%1;return S===S?j?S-j:S:0}function iW(b){return b?_p(Nr(b),0,P):0}function wl(b){if(typeof b=="number")return b;if(Fc(b))return D;if(Ji(b)){var S=typeof b.valueOf=="function"?b.valueOf():b;b=Ji(S)?S+"":S}if(typeof b!="string")return b===0?b:+b;b=Eq(b);var j=Ue.test(b);return j||Ve.test(b)?N6e(b.slice(2),j?2:8):Ke.test(b)?D:+b}function sW(b){return uf(b,tc(b))}function _7e(b){return b?_p(Nr(b),-U,U):b===0?b:0}function Un(b){return b==null?"":Lc(b)}var x7e=p2(function(b,S){if(Gb(S)||ec(S)){uf(S,na(S),b);return}for(var j in S)Yn.call(S,j)&&jb(b,j,S[j])}),aW=p2(function(b,S){uf(S,tc(S),b)}),p_=p2(function(b,S,j,Q){uf(S,tc(S),b,Q)}),E7e=p2(function(b,S,j,Q){uf(S,na(S),b,Q)}),S7e=Oh(YT);function A7e(b,S){var j=d2(b);return S==null?j:Fq(j,S)}var T7e=Jr(function(b,S){b=vi(b);var j=-1,Q=S.length,le=Q>2?S[2]:r;for(le&&To(S[0],S[1],le)&&(Q=1);++j<Q;)for(var be=S[j],ke=tc(be),Be=-1,Fe=ke.length;++Be<Fe;){var Qe=ke[Be],et=b[Qe];(et===r||iu(et,u2[Qe])&&!Yn.call(b,Qe))&&(b[Qe]=be[Qe])}return b}),k7e=Jr(function(b){return b.push(r,EH),Nc(oW,r,b)});function C7e(b,S){return bq(b,ir(S,3),lf)}function I7e(b,S){return bq(b,ir(S,3),ZT)}function R7e(b,S){return b==null?b:XT(b,ir(S,3),tc)}function P7e(b,S){return b==null?b:zq(b,ir(S,3),tc)}function B7e(b,S){return b&&lf(b,ir(S,3))}function D7e(b,S){return b&&ZT(b,ir(S,3))}function O7e(b){return b==null?[]:Y8(b,na(b))}function N7e(b){return b==null?[]:Y8(b,tc(b))}function Ik(b,S,j){var Q=b==null?r:xp(b,S);return Q===r?j:Q}function M7e(b,S){return b!=null&&TH(b,S,s_e)}function Rk(b,S){return b!=null&&TH(b,S,a_e)}var L7e=vH(function(b,S,j){S!=null&&typeof S.toString!="function"&&(S=M8.call(S)),b[S]=j},Bk(rc)),F7e=vH(function(b,S,j){S!=null&&typeof S.toString!="function"&&(S=M8.call(S)),Yn.call(b,S)?b[S].push(j):b[S]=[j]},ir),$7e=Jr(qb);function na(b){return ec(b)?Mq(b):tk(b)}function tc(b){return ec(b)?Mq(b,!0):m_e(b)}function U7e(b,S){var j={};return S=ir(S,3),lf(b,function(Q,le,be){Bh(j,S(Q,le,be),Q)}),j}function V7e(b,S){var j={};return S=ir(S,3),lf(b,function(Q,le,be){Bh(j,le,S(Q,le,be))}),j}var j7e=p2(function(b,S,j){X8(b,S,j)}),oW=p2(function(b,S,j,Q){X8(b,S,j,Q)}),z7e=Oh(function(b,S){var j={};if(b==null)return j;var Q=!1;S=Hi(S,function(be){return be=T0(be,b),Q||(Q=be.length>1),be}),uf(b,gk(b),j),Q&&(j=yl(j,f|h|d,L_e));for(var le=S.length;le--;)ok(j,S[le]);return j});function q7e(b,S){return cW(b,f_(ir(S)))}var H7e=Oh(function(b,S){return b==null?{}:v_e(b,S)});function cW(b,S){if(b==null)return{};var j=Hi(gk(b),function(Q){return[Q]});return S=ir(S),Qq(b,j,function(Q,le){return S(Q,le[0])})}function W7e(b,S,j){S=T0(S,b);var Q=-1,le=S.length;for(le||(le=1,b=r);++Q<le;){var be=b==null?r:b[ff(S[Q])];be===r&&(Q=le,be=j),b=Mh(be)?be.call(b):be}return b}function K7e(b,S,j){return b==null?b:Wb(b,S,j)}function G7e(b,S,j,Q){return Q=typeof Q=="function"?Q:r,b==null?b:Wb(b,S,j,Q)}var lW=_H(na),uW=_H(tc);function Y7e(b,S,j){var Q=Tr(b),le=Q||C0(b)||y2(b);if(S=ir(S,4),j==null){var be=b&&b.constructor;le?j=Q?new be:[]:Ji(b)?j=Mh(be)?d2($8(b)):{}:j={}}return(le?pl:lf)(b,function(ke,Be,Fe){return S(j,ke,Be,Fe)}),j}function X7e(b,S){return b==null?!0:ok(b,S)}function Z7e(b,S,j){return b==null?b:iH(b,S,uk(j))}function J7e(b,S,j,Q){return Q=typeof Q=="function"?Q:r,b==null?b:iH(b,S,uk(j),Q)}function v2(b){return b==null?[]:jT(b,na(b))}function Q7e(b){return b==null?[]:jT(b,tc(b))}function eEe(b,S,j){return j===r&&(j=S,S=r),j!==r&&(j=wl(j),j=j===j?j:0),S!==r&&(S=wl(S),S=S===S?S:0),_p(wl(b),S,j)}function tEe(b,S,j){return S=Lh(S),j===r?(j=S,S=0):j=Lh(j),b=wl(b),o_e(b,S,j)}function rEe(b,S,j){if(j&&typeof j!="boolean"&&To(b,S,j)&&(S=j=r),j===r&&(typeof S=="boolean"?(j=S,S=r):typeof b=="boolean"&&(j=b,b=r)),b===r&&S===r?(b=0,S=1):(b=Lh(b),S===r?(S=b,b=0):S=Lh(S)),b>S){var Q=b;b=S,S=Q}if(j||b%1||S%1){var le=Oq();return Ka(b+le*(S-b+O6e("1e-"+((le+"").length-1))),S)}return ik(b,S)}var nEe=g2(function(b,S,j){return S=S.toLowerCase(),b+(j?fW(S):S)});function fW(b){return Pk(Un(b).toLowerCase())}function hW(b){return b=Un(b),b&&b.replace(gt,K6e).replace(S6e,"")}function iEe(b,S,j){b=Un(b),S=Lc(S);var Q=b.length;j=j===r?Q:_p(Nr(j),0,Q);var le=j;return j-=S.length,j>=0&&b.slice(j,le)==S}function sEe(b){return b=Un(b),b&&hi.test(b)?b.replace(er,G6e):b}function aEe(b){return b=Un(b),b&&Kn.test(b)?b.replace(hr,"\\$&"):b}var oEe=g2(function(b,S,j){return b+(j?"-":"")+S.toLowerCase()}),cEe=g2(function(b,S,j){return b+(j?" ":"")+S.toLowerCase()}),lEe=gH("toLowerCase");function uEe(b,S,j){b=Un(b),S=Nr(S);var Q=S?c2(b):0;if(!S||Q>=S)return b;var le=(S-Q)/2;return r_(z8(le),j)+b+r_(j8(le),j)}function fEe(b,S,j){b=Un(b),S=Nr(S);var Q=S?c2(b):0;return S&&Q<S?b+r_(S-Q,j):b}function hEe(b,S,j){b=Un(b),S=Nr(S);var Q=S?c2(b):0;return S&&Q<S?r_(S-Q,j)+b:b}function dEe(b,S,j){return j||S==null?S=0:S&&(S=+S),w8e(Un(b).replace(Gn,""),S||0)}function pEe(b,S,j){return(j?To(b,S,j):S===r)?S=1:S=Nr(S),sk(Un(b),S)}function gEe(){var b=arguments,S=Un(b[0]);return b.length<3?S:S.replace(b[1],b[2])}var mEe=g2(function(b,S,j){return b+(j?"_":"")+S.toLowerCase()});function yEe(b,S,j){return j&&typeof j!="number"&&To(b,S,j)&&(S=j=r),j=j===r?P:j>>>0,j?(b=Un(b),b&&(typeof S=="string"||S!=null&&!Ck(S))&&(S=Lc(S),!S&&o2(b))?k0(ru(b),0,j):b.split(S,j)):[]}var vEe=g2(function(b,S,j){return b+(j?" ":"")+Pk(S)});function bEe(b,S,j){return b=Un(b),j=j==null?0:_p(Nr(j),0,b.length),S=Lc(S),b.slice(j,j+S.length)==S}function wEe(b,S,j){var Q=pe.templateSettings;j&&To(b,S,j)&&(S=r),b=Un(b),S=p_({},S,Q,xH);var le=p_({},S.imports,Q.imports,xH),be=na(le),ke=jT(le,be),Be,Fe,Qe=0,et=S.interpolate||xt,st="__p += '",Tt=qT((S.escape||xt).source+"|"+et.source+"|"+(et===ai?Se:xt).source+"|"+(S.evaluate||xt).source+"|$","g"),Ut="//# sourceURL="+(Yn.call(S,"sourceURL")?(S.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++I6e+"]")+`
`;b.replace(Tt,function(ar,an,mn,$c,ko,Uc){return mn||(mn=$c),st+=b.slice(Qe,Uc).replace(at,Y6e),an&&(Be=!0,st+=`' +
__e(`+an+`) +
'`),ko&&(Fe=!0,st+=`';
`+ko+`;
__p += '`),mn&&(st+=`' +
((__t = (`+mn+`)) == null ? '' : __t) +
'`),Qe=Uc+ar.length,ar}),st+=`';
`;var sr=Yn.call(S,"variable")&&S.variable;if(!sr)st=`with (obj) {
`+st+`
}
`;else if(we.test(sr))throw new Er(o);st=(Fe?st.replace(Ft,""):st).replace(lr,"$1").replace($n,"$1;"),st="function("+(sr||"obj")+`) {
`+(sr?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(Be?", __e = _.escape":"")+(Fe?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+st+`return __p
}`;var Vr=pW(function(){return Nn(be,Ut+"return "+st).apply(r,ke)});if(Vr.source=st,kk(Vr))throw Vr;return Vr}function _Ee(b){return Un(b).toLowerCase()}function xEe(b){return Un(b).toUpperCase()}function EEe(b,S,j){if(b=Un(b),b&&(j||S===r))return Eq(b);if(!b||!(S=Lc(S)))return b;var Q=ru(b),le=ru(S),be=Sq(Q,le),ke=Aq(Q,le)+1;return k0(Q,be,ke).join("")}function SEe(b,S,j){if(b=Un(b),b&&(j||S===r))return b.slice(0,kq(b)+1);if(!b||!(S=Lc(S)))return b;var Q=ru(b),le=Aq(Q,ru(S))+1;return k0(Q,0,le).join("")}function AEe(b,S,j){if(b=Un(b),b&&(j||S===r))return b.replace(Gn,"");if(!b||!(S=Lc(S)))return b;var Q=ru(b),le=Sq(Q,ru(S));return k0(Q,le).join("")}function TEe(b,S){var j=Y,Q=H;if(Ji(S)){var le="separator"in S?S.separator:le;j="length"in S?Nr(S.length):j,Q="omission"in S?Lc(S.omission):Q}b=Un(b);var be=b.length;if(o2(b)){var ke=ru(b);be=ke.length}if(j>=be)return b;var Be=j-c2(Q);if(Be<1)return Q;var Fe=ke?k0(ke,0,Be).join(""):b.slice(0,Be);if(le===r)return Fe+Q;if(ke&&(Be+=Fe.length-Be),Ck(le)){if(b.slice(Be).search(le)){var Qe,et=Fe;for(le.global||(le=qT(le.source,Un(Le.exec(le))+"g")),le.lastIndex=0;Qe=le.exec(et);)var st=Qe.index;Fe=Fe.slice(0,st===r?Be:st)}}else if(b.indexOf(Lc(le),Be)!=Be){var Tt=Fe.lastIndexOf(le);Tt>-1&&(Fe=Fe.slice(0,Tt))}return Fe+Q}function kEe(b){return b=Un(b),b&&gn.test(b)?b.replace(On,r8e):b}var CEe=g2(function(b,S,j){return b+(j?" ":"")+S.toUpperCase()}),Pk=gH("toUpperCase");function dW(b,S,j){return b=Un(b),S=j?r:S,S===r?Z6e(b)?s8e(b):j6e(b):b.match(S)||[]}var pW=Jr(function(b,S){try{return Nc(b,r,S)}catch(j){return kk(j)?j:new Er(j)}}),IEe=Oh(function(b,S){return pl(S,function(j){j=ff(j),Bh(b,j,Ak(b[j],b))}),b});function REe(b){var S=b==null?0:b.length,j=ir();return b=S?Hi(b,function(Q){if(typeof Q[1]!="function")throw new gl(a);return[j(Q[0]),Q[1]]}):[],Jr(function(Q){for(var le=-1;++le<S;){var be=b[le];if(Nc(be[0],this,Q))return Nc(be[1],this,Q)}})}function PEe(b){return r_e(yl(b,f))}function Bk(b){return function(){return b}}function BEe(b,S){return b==null||b!==b?S:b}var DEe=yH(),OEe=yH(!0);function rc(b){return b}function Dk(b){return Kq(typeof b=="function"?b:yl(b,f))}function NEe(b){return Yq(yl(b,f))}function MEe(b,S){return Xq(b,yl(S,f))}var LEe=Jr(function(b,S){return function(j){return qb(j,b,S)}}),FEe=Jr(function(b,S){return function(j){return qb(b,j,S)}});function Ok(b,S,j){var Q=na(S),le=Y8(S,Q);j==null&&!(Ji(S)&&(le.length||!Q.length))&&(j=S,S=b,b=this,le=Y8(S,na(S)));var be=!(Ji(j)&&"chain"in j)||!!j.chain,ke=Mh(b);return pl(le,function(Be){var Fe=S[Be];b[Be]=Fe,ke&&(b.prototype[Be]=function(){var Qe=this.__chain__;if(be||Qe){var et=b(this.__wrapped__),st=et.__actions__=Qo(this.__actions__);return st.push({func:Fe,args:arguments,thisArg:b}),et.__chain__=Qe,et}return Fe.apply(b,_0([this.value()],arguments))})}),b}function $Ee(){return Ea._===this&&(Ea._=f8e),this}function Nk(){}function UEe(b){return b=Nr(b),Jr(function(S){return Zq(S,b)})}var VEe=hk(Hi),jEe=hk(vq),zEe=hk(LT);function gW(b){return bk(b)?FT(ff(b)):b_e(b)}function qEe(b){return function(S){return b==null?r:xp(b,S)}}var HEe=bH(),WEe=bH(!0);function Mk(){return[]}function Lk(){return!1}function KEe(){return{}}function GEe(){return""}function YEe(){return!0}function XEe(b,S){if(b=Nr(b),b<1||b>U)return[];var j=P,Q=Ka(b,P);S=ir(S),b-=P;for(var le=VT(Q,S);++j<b;)S(j);return le}function ZEe(b){return Tr(b)?Hi(b,ff):Fc(b)?[b]:Qo(NH(Un(b)))}function JEe(b){var S=++l8e;return Un(b)+S}var QEe=t_(function(b,S){return b+S},0),e9e=dk("ceil"),t9e=t_(function(b,S){return b/S},1),r9e=dk("floor");function n9e(b){return b&&b.length?G8(b,rc,JT):r}function i9e(b,S){return b&&b.length?G8(b,ir(S,2),JT):r}function s9e(b){return _q(b,rc)}function a9e(b,S){return _q(b,ir(S,2))}function o9e(b){return b&&b.length?G8(b,rc,rk):r}function c9e(b,S){return b&&b.length?G8(b,ir(S,2),rk):r}var l9e=t_(function(b,S){return b*S},1),u9e=dk("round"),f9e=t_(function(b,S){return b-S},0);function h9e(b){return b&&b.length?UT(b,rc):0}function d9e(b,S){return b&&b.length?UT(b,ir(S,2)):0}return pe.after=Nxe,pe.ary=WH,pe.assign=x7e,pe.assignIn=aW,pe.assignInWith=p_,pe.assignWith=E7e,pe.at=S7e,pe.before=KH,pe.bind=Ak,pe.bindAll=IEe,pe.bindKey=GH,pe.castArray=Kxe,pe.chain=zH,pe.chunk=r5e,pe.compact=n5e,pe.concat=i5e,pe.cond=REe,pe.conforms=PEe,pe.constant=Bk,pe.countBy=hxe,pe.create=A7e,pe.curry=YH,pe.curryRight=XH,pe.debounce=ZH,pe.defaults=T7e,pe.defaultsDeep=k7e,pe.defer=Mxe,pe.delay=Lxe,pe.difference=s5e,pe.differenceBy=a5e,pe.differenceWith=o5e,pe.drop=c5e,pe.dropRight=l5e,pe.dropRightWhile=u5e,pe.dropWhile=f5e,pe.fill=h5e,pe.filter=pxe,pe.flatMap=yxe,pe.flatMapDeep=vxe,pe.flatMapDepth=bxe,pe.flatten=$H,pe.flattenDeep=d5e,pe.flattenDepth=p5e,pe.flip=Fxe,pe.flow=DEe,pe.flowRight=OEe,pe.fromPairs=g5e,pe.functions=O7e,pe.functionsIn=N7e,pe.groupBy=wxe,pe.initial=y5e,pe.intersection=v5e,pe.intersectionBy=b5e,pe.intersectionWith=w5e,pe.invert=L7e,pe.invertBy=F7e,pe.invokeMap=xxe,pe.iteratee=Dk,pe.keyBy=Exe,pe.keys=na,pe.keysIn=tc,pe.map=c_,pe.mapKeys=U7e,pe.mapValues=V7e,pe.matches=NEe,pe.matchesProperty=MEe,pe.memoize=u_,pe.merge=j7e,pe.mergeWith=oW,pe.method=LEe,pe.methodOf=FEe,pe.mixin=Ok,pe.negate=f_,pe.nthArg=UEe,pe.omit=z7e,pe.omitBy=q7e,pe.once=$xe,pe.orderBy=Sxe,pe.over=VEe,pe.overArgs=Uxe,pe.overEvery=jEe,pe.overSome=zEe,pe.partial=Tk,pe.partialRight=JH,pe.partition=Axe,pe.pick=H7e,pe.pickBy=cW,pe.property=gW,pe.propertyOf=qEe,pe.pull=S5e,pe.pullAll=VH,pe.pullAllBy=A5e,pe.pullAllWith=T5e,pe.pullAt=k5e,pe.range=HEe,pe.rangeRight=WEe,pe.rearg=Vxe,pe.reject=Cxe,pe.remove=C5e,pe.rest=jxe,pe.reverse=Ek,pe.sampleSize=Rxe,pe.set=K7e,pe.setWith=G7e,pe.shuffle=Pxe,pe.slice=I5e,pe.sortBy=Oxe,pe.sortedUniq=M5e,pe.sortedUniqBy=L5e,pe.split=yEe,pe.spread=zxe,pe.tail=F5e,pe.take=$5e,pe.takeRight=U5e,pe.takeRightWhile=V5e,pe.takeWhile=j5e,pe.tap=nxe,pe.throttle=qxe,pe.thru=o_,pe.toArray=nW,pe.toPairs=lW,pe.toPairsIn=uW,pe.toPath=ZEe,pe.toPlainObject=sW,pe.transform=Y7e,pe.unary=Hxe,pe.union=z5e,pe.unionBy=q5e,pe.unionWith=H5e,pe.uniq=W5e,pe.uniqBy=K5e,pe.uniqWith=G5e,pe.unset=X7e,pe.unzip=Sk,pe.unzipWith=jH,pe.update=Z7e,pe.updateWith=J7e,pe.values=v2,pe.valuesIn=Q7e,pe.without=Y5e,pe.words=dW,pe.wrap=Wxe,pe.xor=X5e,pe.xorBy=Z5e,pe.xorWith=J5e,pe.zip=Q5e,pe.zipObject=exe,pe.zipObjectDeep=txe,pe.zipWith=rxe,pe.entries=lW,pe.entriesIn=uW,pe.extend=aW,pe.extendWith=p_,Ok(pe,pe),pe.add=QEe,pe.attempt=pW,pe.camelCase=nEe,pe.capitalize=fW,pe.ceil=e9e,pe.clamp=eEe,pe.clone=Gxe,pe.cloneDeep=Xxe,pe.cloneDeepWith=Zxe,pe.cloneWith=Yxe,pe.conformsTo=Jxe,pe.deburr=hW,pe.defaultTo=BEe,pe.divide=t9e,pe.endsWith=iEe,pe.eq=iu,pe.escape=sEe,pe.escapeRegExp=aEe,pe.every=dxe,pe.find=gxe,pe.findIndex=LH,pe.findKey=C7e,pe.findLast=mxe,pe.findLastIndex=FH,pe.findLastKey=I7e,pe.floor=r9e,pe.forEach=qH,pe.forEachRight=HH,pe.forIn=R7e,pe.forInRight=P7e,pe.forOwn=B7e,pe.forOwnRight=D7e,pe.get=Ik,pe.gt=Qxe,pe.gte=e7e,pe.has=M7e,pe.hasIn=Rk,pe.head=UH,pe.identity=rc,pe.includes=_xe,pe.indexOf=m5e,pe.inRange=tEe,pe.invoke=$7e,pe.isArguments=Ap,pe.isArray=Tr,pe.isArrayBuffer=t7e,pe.isArrayLike=ec,pe.isArrayLikeObject=gs,pe.isBoolean=r7e,pe.isBuffer=C0,pe.isDate=n7e,pe.isElement=i7e,pe.isEmpty=s7e,pe.isEqual=a7e,pe.isEqualWith=o7e,pe.isError=kk,pe.isFinite=c7e,pe.isFunction=Mh,pe.isInteger=QH,pe.isLength=h_,pe.isMap=eW,pe.isMatch=l7e,pe.isMatchWith=u7e,pe.isNaN=f7e,pe.isNative=h7e,pe.isNil=p7e,pe.isNull=d7e,pe.isNumber=tW,pe.isObject=Ji,pe.isObjectLike=cs,pe.isPlainObject=Xb,pe.isRegExp=Ck,pe.isSafeInteger=g7e,pe.isSet=rW,pe.isString=d_,pe.isSymbol=Fc,pe.isTypedArray=y2,pe.isUndefined=m7e,pe.isWeakMap=y7e,pe.isWeakSet=v7e,pe.join=_5e,pe.kebabCase=oEe,pe.last=bl,pe.lastIndexOf=x5e,pe.lowerCase=cEe,pe.lowerFirst=lEe,pe.lt=b7e,pe.lte=w7e,pe.max=n9e,pe.maxBy=i9e,pe.mean=s9e,pe.meanBy=a9e,pe.min=o9e,pe.minBy=c9e,pe.stubArray=Mk,pe.stubFalse=Lk,pe.stubObject=KEe,pe.stubString=GEe,pe.stubTrue=YEe,pe.multiply=l9e,pe.nth=E5e,pe.noConflict=$Ee,pe.noop=Nk,pe.now=l_,pe.pad=uEe,pe.padEnd=fEe,pe.padStart=hEe,pe.parseInt=dEe,pe.random=rEe,pe.reduce=Txe,pe.reduceRight=kxe,pe.repeat=pEe,pe.replace=gEe,pe.result=W7e,pe.round=u9e,pe.runInContext=Me,pe.sample=Ixe,pe.size=Bxe,pe.snakeCase=mEe,pe.some=Dxe,pe.sortedIndex=R5e,pe.sortedIndexBy=P5e,pe.sortedIndexOf=B5e,pe.sortedLastIndex=D5e,pe.sortedLastIndexBy=O5e,pe.sortedLastIndexOf=N5e,pe.startCase=vEe,pe.startsWith=bEe,pe.subtract=f9e,pe.sum=h9e,pe.sumBy=d9e,pe.template=wEe,pe.times=XEe,pe.toFinite=Lh,pe.toInteger=Nr,pe.toLength=iW,pe.toLower=_Ee,pe.toNumber=wl,pe.toSafeInteger=_7e,pe.toString=Un,pe.toUpper=xEe,pe.trim=EEe,pe.trimEnd=SEe,pe.trimStart=AEe,pe.truncate=TEe,pe.unescape=kEe,pe.uniqueId=JEe,pe.upperCase=CEe,pe.upperFirst=Pk,pe.each=qH,pe.eachRight=HH,pe.first=UH,Ok(pe,function(){var b={};return lf(pe,function(S,j){Yn.call(pe.prototype,j)||(b[j]=S)}),b}(),{chain:!1}),pe.VERSION=n,pl(["bind","bindKey","curry","curryRight","partial","partialRight"],function(b){pe[b].placeholder=pe}),pl(["drop","take"],function(b,S){ln.prototype[b]=function(j){j=j===r?1:js(Nr(j),0);var Q=this.__filtered__&&!S?new ln(this):this.clone();return Q.__filtered__?Q.__takeCount__=Ka(j,Q.__takeCount__):Q.__views__.push({size:Ka(j,P),type:b+(Q.__dir__<0?"Right":"")}),Q},ln.prototype[b+"Right"]=function(j){return this.reverse()[b](j).reverse()}}),pl(["filter","map","takeWhile"],function(b,S){var j=S+1,Q=j==w||j==L;ln.prototype[b]=function(le){var be=this.clone();return be.__iteratees__.push({iteratee:ir(le,3),type:j}),be.__filtered__=be.__filtered__||Q,be}}),pl(["head","last"],function(b,S){var j="take"+(S?"Right":"");ln.prototype[b]=function(){return this[j](1).value()[0]}}),pl(["initial","tail"],function(b,S){var j="drop"+(S?"":"Right");ln.prototype[b]=function(){return this.__filtered__?new ln(this):this[j](1)}}),ln.prototype.compact=function(){return this.filter(rc)},ln.prototype.find=function(b){return this.filter(b).head()},ln.prototype.findLast=function(b){return this.reverse().find(b)},ln.prototype.invokeMap=Jr(function(b,S){return typeof b=="function"?new ln(this):this.map(function(j){return qb(j,b,S)})}),ln.prototype.reject=function(b){return this.filter(f_(ir(b)))},ln.prototype.slice=function(b,S){b=Nr(b);var j=this;return j.__filtered__&&(b>0||S<0)?new ln(j):(b<0?j=j.takeRight(-b):b&&(j=j.drop(b)),S!==r&&(S=Nr(S),j=S<0?j.dropRight(-S):j.take(S-b)),j)},ln.prototype.takeRightWhile=function(b){return this.reverse().takeWhile(b).reverse()},ln.prototype.toArray=function(){return this.take(P)},lf(ln.prototype,function(b,S){var j=/^(?:filter|find|map|reject)|While$/.test(S),Q=/^(?:head|last)$/.test(S),le=pe[Q?"take"+(S=="last"?"Right":""):S],be=Q||/^find/.test(S);le&&(pe.prototype[S]=function(){var ke=this.__wrapped__,Be=Q?[1]:arguments,Fe=ke instanceof ln,Qe=Be[0],et=Fe||Tr(ke),st=function(an){var mn=le.apply(pe,_0([an],Be));return Q&&Tt?mn[0]:mn};et&&j&&typeof Qe=="function"&&Qe.length!=1&&(Fe=et=!1);var Tt=this.__chain__,Ut=!!this.__actions__.length,sr=be&&!Tt,Vr=Fe&&!Ut;if(!be&&et){ke=Vr?ke:new ln(this);var ar=b.apply(ke,Be);return ar.__actions__.push({func:o_,args:[st],thisArg:r}),new ml(ar,Tt)}return sr&&Vr?b.apply(this,Be):(ar=this.thru(st),sr?Q?ar.value()[0]:ar.value():ar)})}),pl(["pop","push","shift","sort","splice","unshift"],function(b){var S=D8[b],j=/^(?:push|sort|unshift)$/.test(b)?"tap":"thru",Q=/^(?:pop|shift)$/.test(b);pe.prototype[b]=function(){var le=arguments;if(Q&&!this.__chain__){var be=this.value();return S.apply(Tr(be)?be:[],le)}return this[j](function(ke){return S.apply(Tr(ke)?ke:[],le)})}}),lf(ln.prototype,function(b,S){var j=pe[S];if(j){var Q=j.name+"";Yn.call(h2,Q)||(h2[Q]=[]),h2[Q].push({name:S,func:j})}}),h2[e_(r,y).name]=[{name:"wrapper",func:r}],ln.prototype.clone=k8e,ln.prototype.reverse=C8e,ln.prototype.value=I8e,pe.prototype.at=ixe,pe.prototype.chain=sxe,pe.prototype.commit=axe,pe.prototype.next=oxe,pe.prototype.plant=lxe,pe.prototype.reverse=uxe,pe.prototype.toJSON=pe.prototype.valueOf=pe.prototype.value=fxe,pe.prototype.first=pe.prototype.head,Lb&&(pe.prototype[Lb]=cxe),pe},l2=a8e();yp?((yp.exports=l2)._=l2,DT._=l2):Ea._=l2}).call(It)})(F7,F7.exports);var NLe=F7.exports;const MLe=si(NLe),hd=t=>ct(t);var LLe=function(e){return FLe(e)&&!$Le(e)};function FLe(t){return!!t&&typeof t=="object"}function $Le(t){var e=Object.prototype.toString.call(t);return e==="[object RegExp]"||e==="[object Date]"||jLe(t)}var ULe=typeof Symbol=="function"&&Symbol.for,VLe=ULe?Symbol.for("react.element"):60103;function jLe(t){return t.$$typeof===VLe}function zLe(t){return Array.isArray(t)?[]:{}}function n4(t,e){return e.clone!==!1&&e.isMergeableObject(t)?qy(zLe(t),t,e):t}function qLe(t,e,r){return t.concat(e).map(function(n){return n4(n,r)})}function HLe(t,e){if(!e.customMerge)return qy;var r=e.customMerge(t);return typeof r=="function"?r:qy}function WLe(t){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t).filter(function(e){return Object.propertyIsEnumerable.call(t,e)}):[]}function UY(t){return Object.keys(t).concat(WLe(t))}function Aue(t,e){try{return e in t}catch{return!1}}function KLe(t,e){return Aue(t,e)&&!(Object.hasOwnProperty.call(t,e)&&Object.propertyIsEnumerable.call(t,e))}function GLe(t,e,r){var n={};return r.isMergeableObject(t)&&UY(t).forEach(function(i){n[i]=n4(t[i],r)}),UY(e).forEach(function(i){KLe(t,i)||(Aue(t,i)&&r.isMergeableObject(e[i])?n[i]=HLe(i,r)(t[i],e[i],r):n[i]=n4(e[i],r))}),n}function qy(t,e,r){r=r||{},r.arrayMerge=r.arrayMerge||qLe,r.isMergeableObject=r.isMergeableObject||LLe,r.cloneUnlessOtherwiseSpecified=n4;var n=Array.isArray(e),i=Array.isArray(t),s=n===i;return s?n?r.arrayMerge(t,e,r):GLe(t,e,r):n4(e,r)}qy.all=function(e,r){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce(function(n,i){return qy(n,i,r)},{})};var YLe=qy,XLe=YLe;const sO=si(XLe),Tue="chab'äl",kue="tzib'anem",VY="/orbitdb/zdpuB2ZNKMRPnn8kwwL9UDY6VNdXxqxTUiEanjJ4Z6HuxEgWU",ZLe="/orbitdb/zdpuAqGK5ndjkaYFM5wkyEk4S6FpDH5hvpEWLq79edP9MmMpY",Cue="runukChabäl",Iue="rajilanïkChabäl",Rue="rubiChabäl",Pue="rutzibanemChabäl",Bue="gl",Due="i1",Oue="i2",Nue="i3",JLe="/orbitdb/zdpuAqAZSmXwDoEPn4r94LP7yYvaY6kvxofyU2gchbAzkTEjN",QLe="/orbitdb/zdpuAx2asNr8YFLvEy8nP5u16SshcbMAhyHkZQm3hqEX2CEP6",eFe="/orbitdb/zdpuAxRf1zitq3gpB6BnMrSuwcMLeFEUuUUGZZyhCwhjNqUjM",tFe="/orbitdb/zdpuAp5wKQEHAh8L5VGJr4Jdzn5363rX6zZmeFawBS4vRBihV",rFe="/orbitdb/zdpuApxEECg9CrBGKtGqkYMU4zU51q6M1UuRvzz1PhQ5XTQWt",nFe="/orbitdb/zdpuApSr92X1P9KQS5EzJVrWTqA8RZ4rjZnPJwH5DTNmw35CY",iFe="/orbitdb/zdpuAv9jLJJzgo5FafC3ZeG2nGggEWttcb8hMbfwwbRQKW1DS",sFe="/orbitdb/zdpuApqihbDFFCdHudZaM64ahUMDwkpb38fpjw5gqYkP4xGJC",Mue="runukTzib",Lue="rajilanïkTzib",Fue="rubiTzib",$ue="rucholanemTzib",Uue="rutzibTzib",aFe="/orbitdb/zdpuB1o5fEEZFicWiQTL7RE8xv7v7X2SS5A7tNUAXaHQ9c58P",oFe="/orbitdb/zdpuAt4noCPbhfzRAZncCMndUPSCiYS5KnHDCPg17RFqV8qou",cFe="/orbitdb/zdpuApC8sYxrezNAdgNFcLDcrEZhzMi7pv5A7VMZrCCiv2rb6",lFe="/orbitdb/zdpuB14vFuP6aHNaXxoeWZvq1NRyx6HCUReoT4sxSk3kAFdZe",uFe="/orbitdb/zdpuAnXpasEMduNSXHxaeyGdZGmyU4NEwA3SEydj7jCDCY3Kz",jY={licence:"ODbl-1_0",motsClefs:[ZLe],tableaux:[{cols:[{idColonne:Cue,idVariable:JLe,index:!0},{idColonne:Iue,idVariable:QLe},{idColonne:Rue,idVariable:eFe},{idColonne:Pue,idVariable:tFe},{idColonne:Bue,idVariable:rFe},{idColonne:Due,idVariable:nFe},{idColonne:Oue,idVariable:iFe},{idColonne:Nue,idVariable:sFe}],clef:Tue},{cols:[{idColonne:Mue,idVariable:aFe,index:!0},{idColonne:Lue,idVariable:oFe},{idColonne:Fue,idVariable:cFe},{idColonne:$ue,idVariable:lFe},{idColonne:Uue,idVariable:uFe}],clef:kue}]},fFe=({chumil:t})=>{const e=new Hg({விண்மீன்:t,அட்டவணை_சாபி:Tue,வார்ப்புரு:jY,குழு_அடையாளம்:VY}),r=new Hg({விண்மீன்:t,அட்டவணை_சாபி:kue,வார்ப்புரு:jY,குழு_அடையாளம்:VY});return{kelChabäl:e,kelTzibanem:r}},hFe={aj:"Mayab'","rb'":"Kaqchikel",tz:"ltn",rn:{gl:"kaqc1270",i3:"cak"}},dFe={aj:"latin","rb'":"français",tz:"ltn",rn:{gl:"stan1290",i1:"fr",i2:"fra",i3:"fra"}},pFe={aj:"latin","rb'":"castellano",rn:{gl:"stan1288",i1:"es"}},gFe={aj:"latin","rb'":"Nederlands",rn:{gl:"dutc1256",i1:"nl"}},mFe={aj:"latin","rb'":"English",rn:{gl:"stan1293",i1:"en",i3:"eng"}},yFe={"rb'":"Kanyen'ké:ha",ajilanïk:"latin",rn:{}},vFe={aj:"latin","rb'":"Kiswahili",rn:{}},bFe={aj:"latin","rb'":"Yorùbá",rn:{gl:"yoru1245",i1:"yo"}},wFe={"rb'":"Kinyarwanda",rn:{gl:"kiny1244",i1:"rw"},aj:"latin"},_Fe={"rb'":"Deutsch",rn:{i1:"de",gl:"mode1258"},aj:"latin"},xFe={kaq:hFe,fr:dFe,த:{aj:"தமிழ்","rb'":"தமிழ்",tz:"த",rn:{gl:"tami1289",i1:"ta",i2:"tam",i3:"tam"}},cst:pFe,nl:gFe,en:mFe,پن:{aj:"فارسی","rb'":"پنجابی",tz:"فا",rn:{gl:"west2386",i3:"pnb"}},ਪੰ:{aj:"ਪੰਜਾਬੀ","rb'":"ਪੰਜਾਬੀ",tz:"ਪੰ",rn:{gl:"panj1256",i1:"pa"}},हिं:{aj:"देवनागरी","rb'":"हिंदी",rn:{gl:"",i1:"hi"}},ગુ:{aj:"ગુજરાતી","rb'":"ગુજરાતી",rn:{gl:"guja1252",i1:"gu"}},বাং:{aj:"বাংলা","rb'":"বাংলা",rn:{gl:"beng1280",i1:"bn"}},తె:{"rb'":"తెలుగు",rn:{gl:"telu1262",i1:"te"},aj:"తెలుగు"},ଓଡ଼ି:{"rb'":"ଓଡ଼ିଆ",rn:{},aj:"ଓଡ଼ିଆ"},عرب:{"rb'":"العربية",tz:"عرب",rn:{i1:"ar"}},ار:{aj:"فارسی","rb'":"اردو",tz:"فا",rn:{gl:"urdu1245",i1:"ur"}},ខ្មែរ:{aj:"ខ្មែរ","rb'":"ភាសាខ្មែរ",tz:"ខ្មែរ",rn:{gl:"cent1989",i1:"km"}},فا:{aj:"فارسی","rb'":"فارسی",tz:"فا",rn:{gl:"west2369",i1:"fa"}},म:{aj:"देवनागरी","rb'":"मराठी",rn:{gl:"mara1378",i1:"mr"}},മ:{aj:"മലയാളം","rb'":"മലയാളം",rn:{gl:"mala1464",i1:"ml"}},ने:{aj:"देवनागरी","rb'":"नेपाली",rn:{gl:"nepa1254",i1:"ne"}},ಕ:{"rb'":"ಕನ್ನಡ",aj:"ಕನ್ನಡ",rn:{}},"k'i":{aj:"Mayab'","rb'":"K'iche'",rn:{gl:"kich1262",i3:"quc"}},"tz'u":{aj:"Mayab'","rb'":"Tz'utujil",rn:{gl:"tzut1248",i3:"tzj"}},kny:yFe,汉:{aj:"汉语","rb'":"汉语",tz:"汉",rn:{gl:"sini1245",i1:"zh"}},漢:{aj:"汉语","rb'":"漢語",tz:"漢",rn:{gl:"taib1240",i3:"goyu"}},日本:{aj:"汉语","rb'":"日本語",rn:{gl:"nucl1643",i1:"ja"}},sw:vFe,yo:bFe,rw:wFe,de:_Fe},EFe={"rb'":"latin",ch:"→↓",aj:"latin",tz:"[A-Za-zªºÀ-ÖØ-öø-ʸˠ-ˤᴀ-ᴥᴬ-ᵜᵢ-ᵥᵫ-ᵷᵹ-ᶾḀ-ỿⁱⁿₐ-ₜKÅℲⅎⅠ-ↈⱠ-ⱿꜢ-ꞇꞋ-ꟊꟐꟑꟓꟕ-ꟙꟲ-ꟿꬰ-ꭚꭜ-ꭤꭦ-ꭩﬀ-ﬆＡ-Ｚａ-ｚ]|\uD801[\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]"},SFe={ltn:EFe,த:{"rb'":"தமிழ்",ch:"→↓",aj:"தமிழ்",tz:"[ஂஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹா-ூெ-ைொ-்ௐௗ௦-௺]|\uD807[\uDFC0-\uDFF1\uDFFF]"},فا:{"rb'":"فارسی",ch:"←↓",aj:"فارسی",tz:"[؀-؄؆-؋؍-ؚ؜-؞ؠ-ؿف-يٖ-ٯٱ-ۜ۞-ۿݐ-ݿࡰ-ࢎ࢐࢑࢘-ࣣ࣡-ࣿﭐ-﯂ﯓ-ﴽ﵀-ﶏﶒ-ﷇ﷏ﷰ-﷿ﹰ-ﹴﹶ-ﻼ]|\uD803[\uDE60-\uDE7E\uDEFD-\uDEFF]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB\uDEF0\uDEF1]"},عرب:{"rb'":"العربية",ch:"←↓",aj:"عربية",tz:"[؀-؄؆-؋؍-ؚ؜-؞ؠ-ؿف-يٖ-ٯٱ-ۜ۞-ۿݐ-ݿࡰ-ࢎ࢐࢑࢘-ࣣ࣡-ࣿﭐ-﯂ﯓ-ﴽ﵀-ﶏﶒ-ﷇ﷏ﷰ-﷿ﹰ-ﹴﹶ-ﻼ]|\uD803[\uDE60-\uDE7E\uDEFD-\uDEFF]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB\uDEF0\uDEF1]"},ਪੰ:{"rb'":"ਪੰਜਾਬੀ",ch:"→↓",aj:"ਪੰਜਾਬੀ",tz:"[ਁ-ਃਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹ਼ਾ-ੂੇੈੋ-੍ੑਖ਼-ੜਫ਼੦-੶]"},ગુ:{"rb'":"ગુજરાતી",ch:"→↓",aj:"ગુજરાતી",tz:"[ઁ-ઃઅ-ઍએ-ઑઓ-નપ-રલળવ-હ઼-ૅે-ૉો-્ૐૠ-ૣ૦-૱ૹ-૿]"},తె:{"rb'":"తెలుగు",ch:"→↓",aj:"తెలుగు",tz:"[ఀ-ఌఎ-ఐఒ-నప-హ఼-ౄె-ైొ-్ౕౖౘ-ౚౝౠ-ౣ౦-౯౷-౿]"},ব:{"rb'":"বাংলা",ch:"→↓",aj:"বাংলা",tz:"[ঀ-ঃঅ-ঌএঐও-নপ-রলশ-হ়-ৄেৈো-ৎৗড়ঢ়য়-ৣ০-৾]"},ខ្មែរ:{"rb'":"ខ្មែរ",ch:"→↓",aj:"ខ្មែរ",tz:"[ក-៝០-៩៰-៹᧠-᧿]"},देव:{"rb'":"देवनागरी",ch:"→↓",aj:"देवनागरी",tz:"[ऀ-ॐॕ-ॣ०-ॿ꣠-ꣿ]|\uD806[\uDF00-\uDF09]"},汉:{"rb'":"汉子",ch:"↓←",aj:"汉",tz:"[⺀-⺙⺛-⻳⼀-⿕々〇〡-〩〸-〻㐀-䶿一-鿿豈-舘並-龎]|\uD81B[\uDFE2\uDFE3\uDFF0\uDFF1]|[\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF]"},漢:{"rb'":"漢字",ch:"↓←",aj:"汉",tz:"[⺀-⺙⺛-⻳⼀-⿕々〇〡-〩〸-〻㐀-䶿一-鿿豈-舘並-龎]|\uD81B[\uDFE2\uDFE3\uDFF0\uDFF1]|[\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF]"},日本:{"rb'":"日本",ch:"↓←",aj:"汉",tz:"[ぁ-ゖゝ-ゟ]|\uD82C[\uDC01-\uDD1F\uDD32\uDD50-\uDD52]|🈀|[ァ-ヺヽ-ヿㇰ-ㇿ㋐-㋾㌀-㍗ｦ-ｯｱ-ﾝ]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00\uDD20-\uDD22\uDD55\uDD64-\uDD67]|[㐀-䶵一-龯]"}};class AFe{retamabälChabälChumil;retamabälTzibanemChumil;événements;chumil;kelChabäl;kelTzibanem;tamestajKel;constructor({chumil:e}){this.chumil=e,this.retamabälChabälChumil={},this.retamabälTzibanemChumil={},this.événements=new qi.EventEmitter,this._tachojmisajKel()}async _tachojmisajKel(){if(this.chumil){const{kelChabäl:e,kelTzibanem:r}=fFe({chumil:this.chumil});this.kelChabäl=e,this.kelTzibanem=r;const n=await e.அங்கீகரிக்கப்பட்ட_உறுப்படிகளை_கேள்ளு({செ:s=>{this.retamabälChabälChumil=TFe(s),this.xujalRi()}}),i=await r.அங்கீகரிக்கப்பட்ட_உறுப்படிகளை_கேள்ளு({செ:s=>{this.retamabälTzibanemChumil=kFe(s),this.xujalRi()}});this.tamestajKel=async()=>{await Promise.all([n(),i()])}}}xujalRi(){this.événements.emit("xujalRi'")}get retamabälChabäl(){return sO(xFe,this.retamabälChabälChumil)}get retamabälTzibanem(){return sO(SFe,this.retamabälTzibanemChumil)}get konojelChabäl(){return Object.keys(this.retamabälChabäl)}get konojelTzibanem(){return Object.keys(this.retamabälTzibanem)}runukChabäl({chabäl:e,runukulem:r}){const n=Object.keys(this.retamabälChabäl).find(s=>this.retamabälChabäl[s]["rb'"]===e);if(!r||!n)return n;r=r.toLowerCase();const i=this.retamabälChabäl[n].rn;return r==="iso"?[i.i1,i.i2,i.i3].find(s=>s):i[IC[r]||r]}rubiChabäl({runuk:e,runukulem:r}){const n=r?.toLowerCase();let i;return n===void 0?i=this.retamabälChabäl[e]:n==="iso"?i=Object.values(this.retamabälChabäl).find(s=>[s.rn.i1,s.rn.i2,s.rn.i3].some(a=>a===e)):Object.keys(IC).includes(n)&&(i=Object.values(this.retamabälChabäl).find(s=>s.rn[IC[n]]===e)),i?i["rb'"]:void 0}rutzibanemChabäl({runuk:e}){const n=this.retamabälChabäl[e]?.tz;if(n)return n;for(const i in this.konojelTzibanem){const s=this.rutzibTzibanem({runuk:i});if(s&&e.match(new RegExp(s,"g")))return i}}rajilanïkChabäl({runuk:e}){const r=this.retamabälChabäl[e];if(r)return r.aj;const n=this.rutzibanemChabäl({runuk:e});return n?this.rajilanïkTzibanem({runuk:n}):void 0}rubiTzibanem({runuk:e}){const r=this.retamabälTzibanem[e];return r?r["rb'"]:void 0}runukTzibanem({tzibanem:e}){return Object.keys(this.retamabälTzibanem).find(r=>this.retamabälChabäl[r]["rb'"]===e)}rucholanemTzibanem({runuk:e}){return this.retamabälTzibanem[e]?.ch}rutzibTzibanem({runuk:e}){return this.retamabälTzibanem[e]?.tz}rajilanïkTzibanem({runuk:e}){return this.retamabälTzibanem[e]?.aj}tatzeqelbej(e){return this.événements.on("xujalRi'",e),e(),()=>{this.événements.off("xujalRi'",e)}}tatzeqelbejRetamabälChabäl({sm:e}){return this.tatzeqelbej(()=>e(this.retamabälChabäl))}tatzeqelbejRetamabälTzibanem({sm:e}){return this.tatzeqelbej(()=>e(this.retamabälTzibanem))}tatzeqelbejKonojelChabäl({sm:e}){return this.tatzeqelbej(()=>e(this.konojelChabäl))}tatzeqelbejKonojelTzibanem({sm:e}){return this.tatzeqelbej(()=>e(this.konojelTzibanem))}tatzeqelbejRunukChabäl({sm:e,chabäl:r,runukulem:n}){return this.tatzeqelbej(()=>e(this.runukChabäl({chabäl:r,runukulem:n})))}tatzeqelbejRubiChabäl({sm:e,runuk:r,runukulem:n}){return this.tatzeqelbej(()=>e(this.rubiChabäl({runuk:r,runukulem:n})))}tatzeqelbejRutzibanemChabäl({sm:e,runuk:r}){return this.tatzeqelbej(()=>e(this.rutzibanemChabäl({runuk:r})))}tatzeqelbejRajilanïkChabäl({sm:e,runuk:r}){return this.tatzeqelbej(()=>e(this.rajilanïkChabäl({runuk:r})))}tatzeqelbejRubiTzibanem({sm:e,runuk:r}){return this.tatzeqelbej(()=>e(this.rubiTzibanem({runuk:r})))}tatzeqelbejRunukTzibanem({sm:e,tzibanem:r}){return this.tatzeqelbej(()=>e(this.runukTzibanem({tzibanem:r})))}tatzeqelbejRucholanemTzibanem({sm:e,runuk:r}){return this.tatzeqelbej(()=>e(this.rucholanemTzibanem({runuk:r})))}tatzeqelbejRajilanïkTzibanem({sm:e,runuk:r}){return this.tatzeqelbej(()=>e(this.rajilanïkTzibanem({runuk:r})))}async tachilabejTzibanem(e){return await this.kelTzibanem?.பரிந்துரையு({பரிந்துரை:e})}async takulTzibanem(e){return await this.kelTzibanem?.அங்கீகரி({பரிந்துரை:e})}async tachilabejChabäl(e){return await this.kelChabäl?.பரிந்துரையு({பரிந்துரை:e})}async takulChabäl(e){return await this.kelChabäl?.அங்கீகரி({பரிந்துரை:e})}async tatzapij(){this.tamestajKel&&await this.tamestajKel()}}const IC={glottologue:"gl",iso1:"i1",iso2:"i2",iso3:"i3"},TFe=t=>{const e={};for(const r of t)e[r.données[Cue]]={aj:r.données[Iue],"rb'":r.données[Rue],tz:r.données[Pue],rn:{gl:r.données[Bue],i1:r.données[Due],i2:r.données[Oue],i3:r.données[Nue]}};return e},kFe=t=>{const e={};for(const r of t)e[r.données[Mue]]={aj:r.données[Lue],"rb'":r.données[Fue],ch:r.données[$ue],tz:r.données[Uue]};return e},Vue="அமைப்புகள்.மொழிகள்",aO="அமைப்புகள்.எண்ணுரு",jue=()=>{const{தேர்ந்தெடுத்தப்பட்ட_மொழிகள்:t,தேர்ந்தெடுத்தப்பட்ட_எண்ணுரு:e,நினைவிகள்:r}=Rr("விருப்பங்கள்");return Qs(()=>{localStorage.setItem(r?.மொழி||Vue,JSON.stringify(t.value))}),Qs(()=>{e.value?localStorage.setItem(r?.எண்ணுரு||aO,e.value):localStorage.removeItem(r?.எண்ணுரு||aO)}),{தேர்ந்தெடுத்தப்பட்ட_மொழிகள்:t,தேர்ந்தெடுத்தப்பட்ட_எண்ணுரு:e}},CFe=({மொழி:t,மாற்றுமொழிகள்:e=[],நினைவிகள்:r})=>({install:n=>{const i=localStorage.getItem(r?.மொழி||Vue);let s;try{s=i?JSON.parse(i):void 0}catch{}const a=ht(Array.isArray(s)?s:[t,...e]),o=localStorage.getItem(r?.எண்ணுரு||aO),c=ht(o||void 0);n.provide("விருப்பங்கள்",{நினைவிகள்:r,தேர்ந்தெடுத்தப்பட்ட_மொழிகள்:a,தேர்ந்தெடுத்தப்பட்ட_எண்ணுரு:c})}}),xF=()=>{const t=Rr("nuch'ab'äl");if(!t)throw new Error("Nuch'ab'äl கிடைத்ததில்லை.");return t},Kv=()=>{const t=xF(),{தேர்ந்தெடுத்தப்பட்ட_மொழிகள்:e}=jue(),r=Te(()=>e.value[0]),n=Te(()=>e.value.slice(1));return{மொழி:r,மாற்றுமொழிகள்:n,மொழிகளை_தேர்ந்தெடுக்கொள்ளு:o=>{Array.isArray(o)?o.length&&(e.value=o):e.value=[o,...e.value.filter(c=>c!==o)]},அகராதியிலிருந்து_மொழிபெயர்ப்பு:o=>Te(()=>{if(!o.value)return;for(const l of e.value)if(o.value[l])return o.value[l];const c=t?.rutzibanemChabäl({runuk:e.value[0]});if(c){for(const l of e.value)if(c===t?.rutzibanemChabäl({runuk:l}))return o.value[l]}return Object.values(o.value)[0]}),வலதிலிருந்து_இடது_மொழி:o=>Te(()=>{const c=t?.rutzibanemChabäl({runuk:hd(o)||r.value});if(!c)return!1;const l=t?.rucholanemTzibanem({runuk:c});return l?l==="←↓":!1})}},IFe=({மொழி:t,மாற்றுமொழிகள்:e=[],நினைவிகள்:r})=>({install:n=>{const i=n.config.globalProperties.$constl;n.use(CFe({மொழி:t,மாற்றுமொழிகள்:e,நினைவிகள்:r}));const s=new AFe({chumil:i});n.provide("nuch'ab'äl",s),n.config.globalProperties.$nuchabäl=s}}),RFe={வகை:"இடஞ்சார்",ஒருங்குறி:"latn",குறிகள்:"0123456789",அடுக்குக்குறி:"eE",பிரிப்பு:"."},PFe={latin:RFe,"Mayab'":{வகை:"இடஞ்சார்",ஒருங்குறி:null,குறிகள்:"𝋠𝋡𝋢𝋣𝋤𝋥𝋦𝋧𝋨𝋩𝋪𝋫𝋬𝋭𝋮𝋯𝋰𝋱𝋲𝋳"},"𑼒𑼮𑼶":{வகை:"இடஞ்சார்",ஒருங்குறி:null,குறிகள்:"𑽐𑽑𑽒𑽓𑽔𑽕𑽖𑽗𑽘𑽙"},ᑲᒃᑐᕕᒃ:{வகை:"இடஞ்சார்",ஒருங்குறி:null,குறிகள்:"𝋀𝋁𝋂𝋃𝋄𝋅𝋆𝋇𝋈𝋉𝋊𝋋𝋌𝋍𝋎𝋏𝋐𝋑𝋒𝋓"},देवनागरी:{வகை:"இடஞ்சார்",ஒருங்குறி:"deva",அடுக்குக்குறி:"घा",குறிகள்:"०१२३४५६७८९"},ਪੰਜਾਬੀ:{வகை:"இடஞ்சார்",ஒருங்குறி:"guru",அடுக்குக்குறி:"ਘਾ",குறிகள்:"੦੧੨੩੪੫੬੭੮੯"},ગુજરાતી:{வகை:"இடஞ்சார்",ஒருங்குறி:"gujr",குறிகள்:"૦૧૨૩૪૫૬૭૮૯"},"മലയാളം സ്ഥാനിക":{வகை:"இடஞ்சார்",ஒருங்குறி:"mlym",குறிகள்:"൦൧൨൩൪൫൬൭൮൯"},മലയാളം:{வகை:"அடிமானம்",ஒருங்குறி:null,குறிகள்:"൦൧൨൩൪൫൬൭൮൯",அடிமானங்கள்:{"൰":10,"൱":100,"൲":1e3}},தமிழ்:{வகை:"அடிமானம்",ஒருங்குறி:"taml",குறிகள்:"௦௧௨௩௪௫௬௭௮௯",அடுக்குக்குறி:"ப",அடிமானங்கள்:{"௰":10,"௱":100,"௲":1e3}},"தமிழ் இடஞ்சார்":{வகை:"இடஞ்சார்",ஒருங்குறி:"tamldec",அடுக்குக்குறி:"ப",குறிகள்:"௦௧௨௩௪௫௬௭௮௯"},فارسی:{வகை:"இடஞ்சார்",ஒருங்குறி:"arabext",அடுக்குக்குறி:"ت",குறிகள்:"۰۱۲۳۴۵۶۷۸۹",பிரிப்பு:"٫."},عربية:{வகை:"இடஞ்சார்",ஒருங்குறி:"arab",அடுக்குக்குறி:"ر",குறிகள்:"٠١٢٣٤٥٦٧٨٩",பிரிப்பு:"٫."},ଓଡ଼ିଆ:{வகை:"இடஞ்சார்",ஒருங்குறி:"orya",குறிகள்:"୦୧୨୩୪୫୬୭୮୯"},বাংলা:{வகை:"இடஞ்சார்",ஒருங்குறி:"beng",அடுக்குக்குறி:"সূ",குறிகள்:"০১২৩৪৫৬৭৮৯"},ಕನ್ನಡ:{வகை:"இடஞ்சார்",ஒருங்குறி:"knda",குறிகள்:"೦೧೨೩೪೫೬೭೮೯"},తెలుగు:{வகை:"இடஞ்சார்",ஒருங்குறி:"telu",குறிகள்:"౦౧౨౩౪౫౬౭౮౯"},"𑀩𑁆𑀭𑀸𑀳𑀫𑀻":{வகை:"இடஞ்சார்",ஒருங்குறி:"brah",குறிகள்:"𑁦𑁧𑁨𑁩𑁪𑁫𑁬𑁭𑁮𑁯"},"𑄃𑄧𑄏":{வகை:"இடஞ்சார்",ஒருங்குறி:"cakm",குறிகள்:"𑄶𑄷𑄸𑄹𑄺𑄻𑄼𑄽𑄾𑄿"},"ߒߞߏ":{வகை:"இடஞ்சார்",ஒருங்குறி:"nkoo",குறிகள்:"߀߁߂߃߄߅߆߇߈߉"},"ꢱꣃꢬꢵꢰ꣄ꢜ꣄ꢬ":{வகை:"இடஞ்சார்",ஒருங்குறி:"saur",குறிகள்:"꣐꣑꣒꣓꣔꣕꣖꣗꣘꣙"},"ᱚᱞ ᱪᱤᱠᱤ":{வகை:"இடஞ்சார்",ஒருங்குறி:"olck",குறிகள்:"᱐᱑᱒᱓᱔᱕᱖᱗᱘᱙"},"සිංහල ස්ථානීය":{வகை:"இடஞ்சார்",ஒருங்குறி:"sinh",குறிகள்:"෦෧෨෩෪෫෬෭෮෯"},සිංහල:{வகை:"அடிமானம்",ஒருங்குறி:null,குறிகள்:"෦෧෨෩෪෫෬෭෮෯",அடிமானங்கள்:{"𑇫":10,"𑇳":100,"𑇴":1e3}},"ᬩᬮᬶ":{வகை:"இடஞ்சார்",ஒருங்குறி:"bali",குறிகள்:"᭐᭑᭒᭓᭔᭕᭖᭗᭘᭙"},"ꨌꨩꨠ":{வகை:"இடஞ்சார்",ஒருங்குறி:"cham",குறிகள்:"꩐꩑꩒꩓꩔꩕꩖꩗꩘꩙"},"ꦗꦮ":{வகை:"இடஞ்சார்",ஒருங்குறி:"java",குறிகள்:"꧐꧑꧒꧓꧔꧕꧖꧗꧘꧙"},ไทย:{வகை:"இடஞ்சார்",ஒருங்குறி:"thai",அடுக்குக்குறி:"กา",குறிகள்:"๐๑๒๓๔๕๖๗๘๙"},ລາວ:{வகை:"இடஞ்சார்",ஒருங்குறி:"laoo",குறிகள்:"໐໑໒໓໔໕໖໗໘໙"},"བོད་ཡིག":{வகை:"இடஞ்சார்",ஒருங்குறி:"tibt",குறிகள்:"༠༡༢༣༤༥༦༧༨༩"},"လိၵ်ႈတႆး":{வகை:"இடஞ்சார்",ஒருங்குறி:"mymrshan",குறிகள்:"႐႑႒႓႔႕႖႗႘႙"},"တိုင်းလိုင်":{வகை:"இடஞ்சார்",ஒருங்குறி:"mymrtlng",குறிகள்:"꧰꧱꧲꧳꧴꧵꧶꧷꧸꧹"},"မြန်မာ":{வகை:"இடஞ்சார்",ஒருங்குறி:"mymr",குறிகள்:"၀၁၂၃၄၅၆၇၈၉"},"ꤊꤢ꤬ꤛꤢ꤭ ꤜꤟꤤ꤬":{வகை:"இடஞ்சார்",ஒருங்குறி:"kali",குறிகள்:"꤀꤁꤂꤃꤄꤅꤆꤇꤈꤉"},"ᨣᩴᩣᩱᨴᩭ":{வகை:"இடஞ்சார்",ஒருங்குறி:"talu",குறிகள்:"᧐᧑᧒᧓᧔᧕᧖᧗᧘᧙"},"𑜒𑜑𑜪𑜨":{வகை:"இடஞ்சார்",ஒருங்குறி:"ahom",குறிகள்:"𑜰𑜱𑜲𑜳𑜴𑜵𑜶𑜷𑜸𑜹"},"𑰥𑰹𑰎𑰿𑰬𑰲𑰎𑰱":{வகை:"இடஞ்சார்",ஒருங்குறி:"bhks",குறிகள்:"𑱐𑱑𑱒𑱓𑱔𑱕𑱖𑱗𑱘𑱙"},"𑵶𑶓𑶕𑶂𑶋":{வகை:"இடஞ்சார்",ஒருங்குறி:"gong",குறிகள்:"𑶠𑶡𑶢𑶣𑶤𑶥𑶦𑶧𑶨𑶩"},"𖪰𖩵𖪂𖪫𖩸":{வகை:"இடஞ்சார்",குறிகள்:"𖫀𖫁𖫂𖫃𖫄𖫅𖫆𖫇𖫈𖫉"},"𑴎𑴽𑵀𑴘𑴲":{வகை:"இடஞ்சார்",ஒருங்குறி:"gonm",குறிகள்:"𑵐𑵑𑵒𑵓𑵔𑵕𑵖𑵗𑵘𑵙"},"𐴇𐴝𐴕𐴞𐴉𐴞":{வகை:"இடஞ்சார்",ஒருங்குறி:"rohg",குறிகள்:"𐴰𐴱𐴲𐴳𐴴𐴵𐴶𐴷𐴸𐴹"},"𖬖𖬰𖬝𖬵 𖬄𖬶𖬟 𖬌𖬣𖬵":{வகை:"இடஞ்சார்",ஒருங்குறி:"hmng",குறிகள்:"𖭐𖭑𖭒𖭓𖭔𖭕𖭖𖭗𖭘𖭙"},"𞄀𞄩𞄰𞄁𞄦𞄱𞄂𞄤𞄳𞄬𞄃𞄥𞄳":{வகை:"இடஞ்சார்",ஒருங்குறி:"hmng",குறிகள்:"𞅀𞅁𞅂𞅃𞅄𞅅𞅆𞅇𞅈𞅉"},ខ្មែរ:{வகை:"இடஞ்சார்",ஒருங்குறி:"khmr",குறிகள்:"០១២៣៤៥៦៧៨៩"},"ᨲ᩠ᩅᩫᨾᩮᩥᩬᨦ - lek nai tam":{வகை:"இடஞ்சார்",ஒருங்குறி:"lana",குறிகள்:"᪀᪁᪂᪃᪄᪅᪆᪇᪈᪉"},"ᨲ᩠ᩅᩫᨾᩮᩥᩬᨦ - lek hora":{வகை:"இடஞ்சார்",ஒருங்குறி:"lanatham",குறிகள்:"᪐᪑᪒᪓᪔᪕᪖᪗᪘᪙"},"ᰴᰩᰛᰴᰧᰛ":{வகை:"இடஞ்சார்",ஒருங்குறி:"lepc",குறிகள்:"᱀᱁᱂᱃᱄᱅᱆᱇᱈᱉"},"ᤕᤠᤰᤌᤢᤱ ᤐᤠᤴ":{வகை:"இடஞ்சார்",ஒருங்குறி:"limb",குறிகள்:"᥆᥇᥈᥉᥊᥋᥌᥍᥎᥏"},"ᠮᠣᠩᠭᠣᠯ ᠬᠡᠯᠡ":{வகை:"இடஞ்சார்",ஒருங்குறி:"mong",குறிகள்:"᠐᠑᠒᠓᠔᠕᠖᠗᠘᠙"},"ꯃꯤꯇꯩ":{வகை:"இடஞ்சார்",ஒருங்குறி:"mtei",குறிகள்:"꯰꯱꯲꯳꯴꯵꯶꯷꯸꯹"},"ᮞᮥᮔ᮪ᮓ":{வகை:"இடஞ்சார்",ஒருங்குறி:"sund",குறிகள்:"᮰᮱᮲᮳᮴᮵᮶᮷᮸᮹"},"𑋝𑋡𑋟𑋐𑋢":{வகை:"இடஞ்சார்",ஒருங்குறி:"sind",குறிகள்:"𑋰𑋱𑋲𑋳𑋴𑋵𑋶𑋷𑋸𑋹"},"𑘦𑘻𑘚𑘲":{வகை:"இடஞ்சார்",ஒருங்குறி:"modi",குறிகள்:"𑙐𑙑𑙒𑙓𑙔𑙕𑙖𑙗𑙘𑙙"},"𖩃𖩓𖩑":{வகை:"இடஞ்சார்",ஒருங்குறி:"mroo",குறிகள்:"𖩠𖩡𖩢𖩣𖩤𖩥𖩦𖩧𖩨𖩩"},"𑐥𑑂𑐬𑐔𑐮𑐶𑐟 𑐣𑐾𑐥𑐵𑐮":{வகை:"இடஞ்சார்",ஒருங்குறி:"newa",குறிகள்:"𑑐𑑑𑑒𑑓𑑔𑑕𑑖𑑗𑑘𑑙"},"ꕙꔤ":{வகை:"இடஞ்சார்",ஒருங்குறி:"vaii",குறிகள்:"꘠꘡꘢꘣꘤꘥꘦꘧꘨꘩"},"𐒋𐒘𐒈𐒑𐒛𐒒𐒕𐒀":{வகை:"இடஞ்சார்",ஒருங்குறி:"osma",குறிகள்:"𐒠𐒡𐒢𐒣𐒤𐒥𐒦𐒧𐒨𐒩"},"𑆯𑆳𑆫𑆢𑆳":{வகை:"இடஞ்சார்",ஒருங்குறி:"shrd",குறிகள்:"𑇐𑇑𑇒𑇓𑇔𑇕𑇖𑇗𑇘𑇙"},ግዕዝ:{வகை:"அடிமானம்",ஒருங்குறி:"ethi",குறிகள்:"0፩፪፫፬፭፮፯፰፱",அடிமானங்கள்:{"፲":10,"፳":20,"፴":30,"፵":40,"፶":50,"፷":60,"፸":70,"፹":80,"፺":90,"፻":100,"፼":1e4}},"𑃐𑃦𑃝𑃗 𑃐𑃦𑃖𑃛𑃣𑃗":{வகை:"இடஞ்சார்",ஒருங்குறி:"sora",குறிகள்:"𑃰𑃱𑃲𑃳𑃴𑃵𑃶𑃷𑃸𑃹"},"𑚔𑚭𑚊𑚤𑚯":{வகை:"இடஞ்சார்",ஒருங்குறி:"takr",குறிகள்:"𑛀𑛁𑛂𑛃𑛄𑛅𑛆𑛇𑛈𑛉"},"𑒞𑒱𑒩𑒯𑒳𑒞𑒰":{வகை:"இடஞ்சார்",ஒருங்குறி:"tirh",குறிகள்:"𑓐𑓑𑓒𑓓𑓔𑓕𑓖𑓗𑓘𑓙"},"𑢹𑣗𑣁𑣜𑣊 𑣏𑣂𑣕𑣂":{வகை:"இடஞ்சார்",ஒருங்குறி:"wara",குறிகள்:"𑣠𑣡𑣢𑣣𑣤𑣥𑣦𑣧𑣨𑣩"},"ꛀꛣꚧꚳ":{வகை:"இடஞ்சார்",ஒருங்குறி:null,குறிகள்:"ꛯꛦꛧꛨꛩꛪꛫꛬꛭꛮ"},"𞋒𞋀𞋉𞋃𞋕":{வகை:"இடஞ்சார்",ஒருங்குறி:"wcho",குறிகள்:"𞋰𞋱𞋲𞋳𞋴𞋵𞋶𞋷𞋸𞋹"},"𞤀𞤣𞤤𞤥":{வகை:"இடஞ்சார்",ஒருங்குறி:"adlm",குறிகள்:"𞥐𞥑𞥒𞥓𞥔𞥕𞥖𞥗𞥘𞥙"},汉语:{வகை:"அடிமானம்",ஒருங்குறி:"hans",அடுக்குக்குறி:"幂",குறிகள்:"〇一二三四五六七八九",பிரிப்பு:"。.",அடிமானங்கள்:{十:10,百:100,千:1e3,万:1e4,亿:1e8,兆:1e12,京:1e16,垓:1e20,秭:1e24,穰:1e28,溝:1e32,澗:1e36,正:1e40,載:1e44}},进位汉语:{வகை:"இடஞ்சார்",ஒருங்குறி:"hanidec",அடுக்குக்குறி:"幂",குறிகள்:"〇一二三四五六七八九",பிரிப்பு:"。."},花碼:{வகை:"இடஞ்சார்",ஒருங்குறி:null,குறிகள்:"〇〡〢〣〤〥〦〧〨〩"}},zue="முறைமைகள்",BFe="/orbitdb/zdpuB2ZNKMRPnn8kwwL9UDY6VNdXxqxTUiEanjJ4Z6HuxEgWU",DFe="/orbitdb/zdpuAwiHHcXVqXtC5d2zTBC3kP8LkpMxHyp1BjjxVCboH6nPb",que="குறியீடு",Hue="வகை",oO="ஒருங்குறி",cO="குறிகள்",lO="அடுக்குக்குறி",Wue="அடிமானங்கள்",uO="பிரிப்பு",OFe="/orbitdb/zdpuAx2asNr8YFLvEy8nP5u16SshcbMAhyHkZQm3hqEX2CEP6",NFe="/orbitdb/zdpuAmMYvS8f9WH95y3tyxDPgLsWjXu2zoB2bAy78JNsMkCWn",MFe="/orbitdb/zdpuApW3gaGcGNtppzQQyzuzygfKiQ1WVtVpjQa21ALjqRUNo",LFe="/orbitdb/zdpuAzeaU4DA5WCaKBr1B23UA9gtvMoRiUtPgA1PsuRJvtA6k",FFe="/orbitdb/zdpuB2xXUJ3kcsmzqhqbvUDNRrRH63dLoj6jw238Xu85oSVJp",$Fe="/orbitdb/zdpuAq1CqRxiFvcy7sUuB9wLPJ5Ex9Vrp6uFiyP7YB8G3T74s",UFe="/orbitdb/zdpuAwi62CTtS6Tpu8Zf2pBFKEUGo3F27QZXCib4CVGXyBPVa",VFe={licence:"ODbl-1_0",motsClefs:[DFe],tableaux:[{cols:[{idColonne:que,idVariable:OFe,index:!0},{idColonne:Hue,idVariable:NFe},{idColonne:oO,idVariable:MFe},{idColonne:cO,idVariable:LFe},{idColonne:lO,idVariable:FFe},{idColonne:Wue,idVariable:$Fe},{idColonne:uO,idVariable:UFe}],clef:zue}]},jFe=({விண்மீன்:t})=>new Hg({விண்மீன்:t,அட்டவணை_சாபி:zue,வார்ப்புரு:VFe,குழு_அடையாளம்:BFe});class Kue{விண்மீன்_தகவல்கள்;விண்மீன்;கிளி;நடவடிக்கைகள்;கிளியை_மறந்துவிடு;constructor({விண்மீன்:e}){this.விண்மீன்=e,this.விண்மீன்_தகவல்கள்={},this.நடவடிக்கைகள்=new qi.EventEmitter,this._கிளி_தயாரிப்பு()}async கிளியைப்_பெறு(){return this.கிளி||await new Promise(e=>this.நடவடிக்கைகள்.once("கிளி தயார்",e))}async _கிளி_தயாரிப்பு(){this.விண்மீன்&&(this.கிளி=jFe({விண்மீன்:this.விண்மீன்}),this.கிளியை_மறந்துவிடு=await this.கிளி.அங்கீகரிக்கப்பட்ட_உறுப்படிகளை_கேள்ளு({செ:e=>{this.விண்மீன்_தகவல்கள்=zFe(e),this.மாற்றம்_வந்துவிட்டது()}}),this.நடவடிக்கைகள்.emit("கிளி தயார்",this.கிளி))}மாற்றம்_வந்துவிட்டது(){this.நடவடிக்கைகள்.emit("மாற்றம்")}get தகவல்கள்(){return sO(PFe,this.விண்மீன்_தகவல்கள்)}get முறைமைகள்(){return Object.keys(this.தகவல்கள்)}தகவல்களை_பெறு({மொழி:e}){const r=this.தகவல்கள்[e];if(!r)throw Error(`தெரியாத எண்ணுரு முறைமை ${e}`);return r}உரைக்கு_அடிமானம்({எண்:e,தகவல்_மொழி:r}){const{குறிகள்:n,அடிமானங்கள்:i}=r,s=r.பிரிப்பு||".",a=[...n],o=e<0;e=Math.abs(e);const c=e.toString().split(".")[1];let l=this._அடிமானம்_எழுதல்(e,a,i);return l.length===0&&(l=a[0]),o&&(l="-"+l),c&&(l+=s[0]+[...c].map(u=>n[parseInt(u)]).join("")),l}எண்ணுக்கு_அடிமானம்({உரை:e,தகவல்_மொழி:r}){RegExp(`[${r.குறிகள்}${r.பிரிப்பு||"."}]+`,"g").exec(e)?.[0]===e&&this.எண்ணுக்கு_அடிமானம்({உரை:e,தகவல்_மொழி:r});const n=r.அடிமானங்கள்,i=[...r.குறிகள்],s=r.பிரிப்பு||".",a=e[0]==="-";a?e=e.slice(1):e=e.replace(/^\++/,"");const[o,c]=e.split(s[0]);let l=0;if(o){const u=[...o].map(h=>n[h]||i.indexOf(h)).reverse();if(u.some(h=>h<0))throw new Error;const f=h=>{const d=h[0],g=h.slice(1).find(x=>x>d),p=(g?h.slice(1).indexOf(g):h.slice(1).length)+1,m=h.slice(1,p),y=m.length?f(m):1,v=h.slice(p),_=v.length?f(v):0;return d*y+_};l=f(u)}return c!==void 0&&c.length&&(l+=parseFloat("."+[...c].map(u=>i.indexOf(u).toString()).join(""))),a&&(l*=-1),l}உரைக்கு_இடஞ்சார்({எண்:e,தகவல்_மொழி:r}){const n=[...r.குறிகள்],i=n.length,s=(r.பிரிப்பு||".")[0];if(i===10){let u=e.toString();return u.includes(".")&&(u=u.replace(".",s)),Array.prototype.map.call(u,f=>f===s?f:n[parseInt(f)]).join("")}if(e===0)return n[0];const a=e<0;let o=e%1;o=parseFloat(o.toFixed(RC(e))),e=Math.abs(e);let c="";for(;e;)c=n[Math.floor(e%i)]+c,e=Math.floor(e/i);o&&(c+=s);let l;for(;o!==0;)l=RC(o),o*=i,c+=n[Math.floor(o)],o-=Math.floor(o),o=parseFloat(o.toFixed(l));return a&&(c="-"+c),c}எண்ணுக்கு_இடஞ்சார்({உரை:e,மொழி:r,தகவல்_மொழி:n}){const i=[...n.குறிகள்],s=n.அடுக்குக்குறி||"eE",a=i.length,o=n.பிரிப்பு||".";if(e=e.replace(/^\++/,""),s.split("").some(c=>e.includes(c))){const[c,l]=e.split(RegExp(s));return this.எண்ணுக்கு_இடஞ்சார்({உரை:c,மொழி:r,தகவல்_மொழி:n})*a**this.எண்ணுக்கு({உரை:l,மொழி:r})}if(a===10){for(const[c,l]of i.entries())e=e.replace(l,c.toString());for(const c of o.split(""))e=e.replace(c,".");return parseFloat(e)}else{let c=0;const l=e.split(/\./);let u=l[0];const f=l[1],h=u[0]==="-";if(u=u.replace(/^-+/,""),u)for(const d of u){if(c*=a,i.indexOf(d)===-1)throw new Error;c+=i.indexOf(d)}if(f){let d=a;for(const g of f)c+=i.indexOf(g)/d,c=parseFloat(c.toFixed(RC(1/d))),d*=a}return c=h?-c:c,c}}உரைக்கு({எண்:e,மொழி:r}){const n=this.தகவல்களை_பெறு({மொழி:r});return n.வகை==="இடஞ்சார்"?this.உரைக்கு_இடஞ்சார்({எண்:e,தகவல்_மொழி:n}):this.உரைக்கு_அடிமானம்({எண்:e,தகவல்_மொழி:n})}எண்ணுக்கு({உரை:e,மொழி:r}){const n=r?[r]:this.முறைமைகள்;for(const i of n)try{const s=this.தகவல்களை_பெறு({மொழி:i}),a=this.தகவல்களுடன்_எண்ணுக்கு({உரை:e,மொழி:i,தகவல்_மொழி:s});if(!isNaN(a))return a}catch{continue}throw new Error(`${e} என்று எண்ணை படிக்க முடியவில்லை.`)}தகவல்களுடன்_எண்ணுக்கு({உரை:e,மொழி:r,தகவல்_மொழி:n}){const i=n.வகை;if(i==="இடஞ்சார்")return this.எண்ணுக்கு_இடஞ்சார்({உரை:e,மொழி:r,தகவல்_மொழி:n});if(i==="அடிமானம்")return this.எண்ணுக்கு_அடிமானம்({உரை:e,தகவல்_மொழி:n});throw Error(`தெரியாத எண்ணுரு முறைமை வகை ${i}`)}_அடிமானம்_எழுதல்(e,r,n){let i=e,s="";for(const[a,o]of Object.entries(n).sort((c,l)=>l[1]-c[1])){const c=Math.floor(i/o);c&&(i-=c*o,c!==1&&(s+=this._அடிமானம்_எழுதல்(c,r,n)),s+=a)}return i&&(s=s+r[Math.floor(i)]),s}பின்பற்று(e){return this.நடவடிக்கைகள்.on("மாற்றம்",e),e(),()=>{this.நடவடிக்கைகள்.off("மாற்றம்",e)}}முறைமைகளை_பின்பற்று({செ:e}){return this.பின்பற்று(()=>e(this.முறைமைகள்))}உரைக்கு_பின்பற்று({எண்:e,மொழி:r,செ:n}){return this.பின்பற்று(()=>n(this.உரைக்கு({எண்:e,மொழி:r})))}எணுக்கு_பின்பற்று({உரை:e,மொழி:r,செ:n}){return this.பின்பற்று(()=>n(this.எண்ணுக்கு({உரை:e,மொழி:r})))}async பரிந்துரையு(e){return(await this.கிளியைப்_பெறு()).பரிந்துரையு({பரிந்துரை:e})}async அங்கீகரி(e){return(await this.கிளியைப்_பெறு()).அங்கீகரி({பரிந்துரை:e})}async முடி(){this.கிளியை_மறந்துவிடு&&await this.கிளியை_மறந்துவிடு()}}function RC(t){const e=t.toString();if(e.includes("e")){const[r,n]=e.split("e-");return parseInt(n)+r.length}else return e.length}function zFe(t){const e={};for(const r of t){const n=r.données[Hue],i=r.données[que];if(n==="இடஞ்சார்"){const s={வகை:n,குறிகள்:r.données[cO],ஒருங்குறி:r.données[oO],அடுக்குக்குறி:r.données[lO],பிரிப்பு:r.données[uO]};e[i]=s}else if(n==="அடிமானம்"){const s=r.données[Wue];if(!s)throw new Error(`${i} என்று எண்ணுரு முறைமைக்காக அடிமானங்கள் தேவை.`);const a={வகை:n,குறிகள்:r.données[cO],ஒருங்குறி:r.données[oO],அடுக்குக்குறி:r.données[lO],அடிமானங்கள்:JSON.parse(s),பிரிப்பு:r.données[uO]};e[i]=a}}return e}const qFe=()=>{const t=Rr("எண்ணிக்கை");if(!t)throw new Error("எண்ணிக்கை கிடைத்ததில்லை.");return t},wS=()=>{const t=qFe(),e=xF(),{தேர்ந்தெடுத்தப்பட்ட_எண்ணுரு:r}=jue(),{மொழி:n}=Kv(),i=ht(e.rajilanïkChabäl({runuk:n.value}));let s;Qs(()=>{s&&s(),s=e?.tatzeqelbejRajilanïkChabäl({runuk:n.value,sm:h=>i.value=h})}),Yo(()=>{s&&s()});const a=ht(t.முறைமைகள்);let o;Qs(()=>{o=t.முறைமைகளை_பின்பற்று({செ:h=>a.value=h})}),Yo(()=>{o&&o()});const c=Te(()=>r.value||i.value||"தமிழ்");return{தேர்ந்தெடுத்தப்பட்ட_எண்ணுரு:r,எண்ணுரு:c,எண்ணுரு_முறைமைகள்:a,எண்ணை_வடிவூட்டு:(h,d)=>Te(()=>{const p=hd(h);if(p!==void 0)try{return t.உரைக்கு({எண்:p,மொழி:d?hd(d):c.value})}catch{return}}),எண்_எழுத்து_வடிவூட்டு:(h,d)=>Te(()=>[...hd(h)].map(p=>{if([""," ","+","-","(",")"].includes(p))return p;try{const m=t.எண்ணுக்கு({உரை:p});return t.உரைக்கு({எண்:m,மொழி:d?hd(d):c.value})}catch{return p}}).join("")),பதிப்பை_வடிவூட்டு:(h,d)=>Te(()=>hd(h).split(".").map(p=>t.உரைக்கு({எண்:parseInt(p),மொழி:d?hd(d):c.value})).join("."))}},HFe=({மொழி:t,மாற்றுமொழிகள்:e=[],நினைவிகள்:r})=>({install:n=>{const i=n.config.globalProperties.$constl;if(!n.config.globalProperties.$nuchabäl){const o=IFe({மொழி:t,மாற்றுமொழிகள்:e,நினைவிகள்:r});n.use(o)}const a=new Kue({விண்மீன்:i});n.provide("எண்ணிக்கை",a),n.config.globalProperties.$எண்ணிக்கை=a}}),{isEqual:WFe}=MLe,Gv=()=>{const t=Rr("கிளிமூக்கு");if(!t)throw new Error("கிளிமூக்கு கிடைத்ததில்லை.");return t};class KFe{செய்திகள்;பூட்டு;constructor(){this.செய்திகள்={},this.பூட்டு=new kc}அடையாளமத்தைப்_பெறு({கிளி:e,பரிந்துரைகள்:r}){return{கிளி_அடையாளம்:e.தனித்துவமிக்க_அடையாளம்,விருப்பங்களின்_அடையாளம்:e.தனித்துவமிக்க_அடையாளம்+r}}உருவாக்கு({கிளி:e,பரிந்துரைகள்:r}){const{கிளி_அடையாளம்:n,விருப்பங்களின்_அடையாளம்:i}=this.அடையாளமத்தைப்_பெறு({கிளி:e,பரிந்துரைகள்:r});return this.செய்திகள்[n]||(this.செய்திகள்[n]={கிளி:e,விருப்பங்கள்:{}}),this.செய்திகள்[n].விருப்பங்கள்[i]||(this.செய்திகள்[n].விருப்பங்கள்[i]={செய்திகள்:ht({}),கோரிக்கைகள்:new Set,மறந்துவிடு:void 0,விருப்பங்கள்:{பரிந்துரைகள்:r}}),{செய்திகள்:this.செய்திகள்[n].விருப்பங்கள்[i].செய்திகள்,அடையாளம்:{கிளி:n,விருப்பங்கள்:i}}}async கேள்ளு({அடையாளம்:e}){const r=rs(),{கிளி:n}=this.செய்திகள்[e.கிளி],i=JSON.stringify(e);if(await this.பூட்டு.acquire(i),!this.செய்திகள்[e.கிளி]?.விருப்பங்கள்[e.விருப்பங்கள்]?.மறந்துவிடு){const a=this.செய்திகள்[e.கிளி].விருப்பங்கள்[e.விருப்பங்கள்].செய்திகள்,o=await n.மொழிபெயர்ப்புகளை_கேள்ளு({செ:c=>{a.value=ILe(c)},பரிந்துரைகள்:this.செய்திகள்[e.கிளி].விருப்பங்கள்[e.விருப்பங்கள்].விருப்பங்கள்.பரிந்துரைகள்});this.செய்திகள்[e.கிளி].விருப்பங்கள்[e.விருப்பங்கள்].மறந்துவிடு=o}const{கோரிக்கைகள்:s}=this.செய்திகள்[e.கிளி].விருப்பங்கள்[e.விருப்பங்கள்];return s.add(r),this.பூட்டு.release(i),r}async மறந்துவிடு({அடையாளம்:e,கோரிக்கை_அடையாளம்:r}){const n=JSON.stringify(e);await this.பூட்டு.acquire(n);const i=this.செய்திகள்[e.கிளி].விருப்பங்கள்[e.விருப்பங்கள்];i&&(i.கோரிக்கைகள்.delete(r),i.கோரிக்கைகள்.size===0&&(i.மறந்துவிடு&&await i.மறந்துவிடு(),delete this.செய்திகள்[e.கிளி].விருப்பங்கள்[e.விருப்பங்கள்]),Object.keys(this.செய்திகள்[e.கிளி].விருப்பங்கள்).length||delete this.செய்திகள்[e.கிளி]),this.பூட்டு.release(n)}}const GFe=({பரிந்துரைகள்:t="எனது",கிளி:e})=>{e=e||Gv();const r=Rr("செய்திகள்");let n;const{செய்திகள்:i,அடையாளம்:s}=r.உருவாக்கு({கிளி:e,பரிந்துரைகள்:t});return Ai(async()=>{n=await r.கேள்ளு({அடையாளம்:s})}),Yo(async()=>{n&&await r.மறந்துவிடு({அடையாளம்:s,கோரிக்கை_அடையாளம்:n})}),{செய்திகள்:i}},Gue=({பரிந்துரைகள்:t="எனது",கிளி:e}={பரிந்துரைகள்:"எனது"})=>{const{மொழி:r,மாற்றுமொழிகள்:n}=Kv(),{எண்ணை_வடிவூட்டு:i}=wS(),{செய்திகள்:s}=GFe({கிளி:e,பரிந்துரைகள்:t}),{கிடைக்கும்_மொழி_குறியீடுகள்:a}=Yue({பரிந்துரைகள்:t,கிளி:e}),o=ht([]),c=(f,h,d)=>Te(()=>{const g=Sue(s.value||{});if(!g)return o.value.includes(f)||(o.value=[...o.value,f]),f;const p=l.value.find(x=>!!g[f]?.[x]),m=p?g[f][p]:f,y=x=>typeof x=="number"?i(x).value:x.value?x.value:x,v=(x,A)=>{const C=/@:([^\s\p{P}]+(\.[^\s\p{P}]+)*)/gu;x=x.replaceAll(C,function(M,N){const Y=l.value.find(E=>!!g[N]?.[E]);return Y?g[N][Y]:N});const R=/{([^{]+)}/g;return Array.isArray(A)?x.replace(R,function(M,N){return N>=A.length?N:y(A[N])}):typeof A=="object"?x.replace(R,function(M,N){return(N=A[N])==null?"":y(N)||""}):x},_=m.split("|");return _.length<2?v(_[0],typeof h!="number"?h:void 0):v(_[typeof d=="number"?d:typeof h=="number"?h:0]||_[_.length-1],typeof h=="number"?{இ:h,n:h}:h)}),l=Te(()=>[r.value,...n.value,...a.value.filter(f=>f!==r.value&&!n.value.includes(f))]);return{மொ:c,$மொ:(f,h,d)=>c(f,h,d).value,மொழிபெயரப்பில்லாத_சாபிகள்:o}},Yue=({பரிந்துரைகள்:t,கிளி:e}={பரிந்துரைகள்:"எனது"})=>{const r=e||Gv(),n=xF(),i=ht([]);let s;Ai(async()=>{s=await r.மொழிகளை_கேள்ளு({செ:f=>{WFe(f,i.value)||(i.value=f)},பரிந்துரைகள்:t})}),Yo(async()=>{s&&await s()});const a=ht([]);let o;Ai(async()=>{o=n.tatzeqelbejKonojelChabäl({sm:f=>a.value=f})}),Yo(async()=>{o&&o()});const c=Te(()=>[...new Set([...a.value,...i.value])]),l=Te(()=>c.value.map(f=>({குறியீடு:f,மொழி:n.rubiChabäl({runuk:f})})).filter(f=>f.மொழி));return{கிடைக்கும்_மொழி_குறியீடுகள்:c,மொழிகளும்_குறியீடுகளும்:l,மொழியின்_பெயர்:f=>Te(()=>{const h=hd(f);if(h)return l.value.find(d=>d.குறியீடு===h)?.மொழி})}},YFe=({மொழி:t,வகை:e="வார்த்தை",கிளி:r})=>{const n=r||Gv(),i=ht();let s;const a=hd(t);return Ai(async()=>{a&&(s=await n.முன்னேற்றத்தை_கேள்ளு({மொழி:a,வகை:e,செ:o=>i.value=o}))}),Yo(async()=>{s&&await s()}),ji(t)&&Qs(async()=>{s&&s(),t.value?s=await n.முன்னேற்றத்தை_கேள்ளு({மொழி:t.value,வகை:e,செ:o=>i.value=o}):(i.value=void 0,s=void 0)}),{மொழி_முன்னேற்றம்:i}},XFe=({கிளி:t}={})=>{const e=t||Gv(),{மொழிபெயரப்பில்லாத_சாபிகள்:r}=Gue(),n=ht([]);let i;return Ai(async()=>{i=await e.சாபிகளை_கேள்ளு({செ:a=>n.value=a})}),Yo(async()=>{i&&await i()}),{சாபிகள்:Te(()=>[...new Set([...r.value,...n.value])])}},ZFe=({கிளி:t}={})=>{const e=t||Gv(),r=ht({});let n;return Ai(async()=>{n=await e.அங்கீகரிக்கப்பட்ட_மொழிபெயர்ப்புகளை_கேள்ளு({செ:i=>r.value=i})}),Yo(async()=>{n&&await n()}),{அங்கீகரிக்கப்பட்ட_மொழிபெயர்ப்புகள்:r}},JFe=({கிளி:t}={})=>{const e=t||Gv(),r=ht([]);let n;return Ai(async()=>{n=(await e.மொழிபெயர்ப்பு_பரிந்துரைகளை_கேள்ளு({செ:i=>r.value=i})).fOublier}),Yo(async()=>{n&&await n()}),{பரிந்துரைகள்:r}},QFe=({மொழி:t,மாற்றுமொழிகள்:e=[],கிளி:r,நினைவிகள்:n})=>({install:i=>{if(!i.config.globalProperties.$எண்ணிக்கை){const a=HFe({மொழி:t,மாற்றுமொழிகள்:e,நினைவிகள்:n});i.use(a)}i.config.globalProperties.$கிளிமூக்கு=r,i.provide("கிளிமூக்கு",r),i.provide("செய்திகள்",new KFe)}}),s0=()=>({கிடைக்கும்_மொழிகளை_பயன்படுத்து:Yue,மொழி_முன்னேற்றத்தை_பயன்படுத்து:YFe,சாபிகளை_பயன்படுத்து:XFe,பரிந்துரைகளை_பயன்படுத்து:JFe,மொழிபெயர்ப்புகளை_பயன்படுத்து:ZFe,மொழியாக்கம்_பயன்படுத்து:Gue}),e$e=({மொழி:t,மாற்றுமொழிகள்:e=[],மூல்_மொழி:r,மூல்_மொழிபெயர்ப்புகள்:n,அடையாளம்:i,நினைவிகள்:s,விண்மீன்_சொத்து:a="$constl"})=>({install:o=>{const c=o.config.globalProperties[a];if(i&&!c)throw Error("விண்மீன் கிடைக்கதில்லை.");const l=new RLe({விண்மீன்:c,மூல்_மொழி:r,மூல்_மொழிபெயர்ப்புகள்:Sue(n),அடையாளம்:i}),u=QFe({மொழி:t,மாற்றுமொழிகள்:e,கிளி:l,நினைவிகள்:s});o.use(u)}}),ip=_t({border:[Boolean,Number,String]},"border");function sp(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:hh();return{borderClasses:Te(()=>{const n=ji(t)?t.value:t.border,i=[];if(n===!0||n==="")i.push(`${e}--border`);else if(typeof n=="string"||n===0)for(const s of String(n).split(" "))i.push(`border-${s}`);return i})}}const t$e=[null,"default","comfortable","compact"],gh=_t({density:{type:String,default:"default",validator:t=>t$e.includes(t)}},"density");function a0(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:hh();return{densityClasses:Te(()=>`${e}--density-${t.density}`)}}const Im=_t({elevation:{type:[Number,String],validator(t){const e=parseInt(t);return!isNaN(e)&&e>=0&&e<=24}}},"elevation");function Rm(t){return{elevationClasses:Te(()=>{const r=ji(t)?t.value:t.elevation,n=[];return r==null||n.push(`elevation-${r}`),n})}}const Ju=_t({rounded:{type:[Boolean,Number,String],default:void 0},tile:Boolean},"rounded");function Qu(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:hh();return{roundedClasses:Te(()=>{const n=ji(t)?t.value:t.rounded,i=ji(t)?t.value:t.tile,s=[];if(n===!0||n==="")s.push(`${e}--rounded`);else if(typeof n=="string"||n===0)for(const a of String(n).split(" "))s.push(`rounded-${a}`);else(i||n===!1)&&s.push("rounded-0");return s})}}const ps=_t({tag:{type:String,default:"div"}},"tag");function EF(t){return DL(()=>{const e=[],r={};if(t.value.background)if(wD(t.value.background)){if(r.backgroundColor=t.value.background,!t.value.text&&ZTe(t.value.background)){const n=Hf(t.value.background);if(n.a==null||n.a===1){const i=rce(n);r.color=i,r.caretColor=i}}}else e.push(`bg-${t.value.background}`);return t.value.text&&(wD(t.value.text)?(r.color=t.value.text,r.caretColor=t.value.text):e.push(`text-${t.value.text}`)),{colorClasses:e,colorStyles:r}})}function Gd(t,e){const r=Te(()=>({text:ji(t)?t.value:e?t[e]:null})),{colorClasses:n,colorStyles:i}=EF(r);return{textColorClasses:n,textColorStyles:i}}function Od(t,e){const r=Te(()=>({background:ji(t)?t.value:e?t[e]:null})),{colorClasses:n,colorStyles:i}=EF(r);return{backgroundColorClasses:n,backgroundColorStyles:i}}const r$e=["elevated","flat","tonal","outlined","text","plain"];function c6(t,e){return ue(qr,null,[t&&ue("span",{key:"overlay",class:`${e}__overlay`},null),ue("span",{key:"underlay",class:`${e}__underlay`},null)])}const ap=_t({color:String,variant:{type:String,default:"elevated",validator:t=>r$e.includes(t)}},"variant");function l6(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:hh();const r=Te(()=>{const{variant:s}=ct(t);return`${e}--variant-${s}`}),{colorClasses:n,colorStyles:i}=EF(Te(()=>{const{variant:s,color:a}=ct(t);return{[["elevated","flat"].includes(s)?"background":"text"]:a}}));return{colorClasses:n,colorStyles:i,variantClasses:r}}const Xue=_t({baseColor:String,divided:Boolean,...ip(),...Or(),...gh(),...Im(),...Ju(),...ps(),...$s(),...ap()},"VBtnGroup"),zY=Yt()({name:"VBtnGroup",props:Xue(),setup(t,e){let{slots:r}=e;const{themeClasses:n}=va(t),{densityClasses:i}=a0(t),{borderClasses:s}=sp(t),{elevationClasses:a}=Rm(t),{roundedClasses:o}=Qu(t);zv({VBtn:{height:"auto",baseColor:or(t,"baseColor"),color:or(t,"color"),density:or(t,"density"),flat:!0,variant:or(t,"variant")}}),_r(()=>ue(t.tag,{class:["v-btn-group",{"v-btn-group--divided":t.divided},n.value,s.value,i.value,a.value,o.value,t.class],style:t.style},r))}}),SF=_t({modelValue:{type:null,default:void 0},multiple:Boolean,mandatory:[Boolean,String],max:Number,selectedClass:String,disabled:Boolean},"group"),AF=_t({value:null,disabled:Boolean,selectedClass:String},"group-item");function TF(t,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;const n=Fs("useGroupItem");if(!n)throw new Error("[Vuetify] useGroupItem composable must be used inside a component setup function");const i=Zu();ui(Symbol.for(`${e.description}:id`),i);const s=Rr(e,null);if(!s){if(!r)return s;throw new Error(`[Vuetify] Could not find useGroup injection with symbol ${e.description}`)}const a=or(t,"value"),o=Te(()=>!!(s.disabled.value||t.disabled));s.register({id:i,value:a,disabled:o},n),bo(()=>{s.unregister(i)});const c=Te(()=>s.isSelected(i)),l=Te(()=>s.items.value[0].id===i),u=Te(()=>s.items.value[s.items.value.length-1].id===i),f=Te(()=>c.value&&[s.selectedClass.value,t.selectedClass]);return cr(c,h=>{n.emit("group:selected",{value:h})},{flush:"sync"}),{id:i,isSelected:c,isFirst:l,isLast:u,toggle:()=>s.select(i,!c.value),select:h=>s.select(i,h),selectedClass:f,value:a,disabled:o,group:s}}function _S(t,e){let r=!1;const n=Ps([]),i=xs(t,"modelValue",[],h=>h==null?[]:Zue(n,Du(h)),h=>{const d=i$e(n,h);return t.multiple?d:d[0]}),s=Fs("useGroup");function a(h,d){const g=h,p=Symbol.for(`${e.description}:id`),y=ty(p,s?.vnode).indexOf(d);ct(g.value)==null&&(g.value=y,g.useIndexAsValue=!0),y>-1?n.splice(y,0,g):n.push(g)}function o(h){if(r)return;c();const d=n.findIndex(g=>g.id===h);n.splice(d,1)}function c(){const h=n.find(d=>!d.disabled);h&&t.mandatory==="force"&&!i.value.length&&(i.value=[h.id])}Ai(()=>{c()}),bo(()=>{r=!0}),wL(()=>{for(let h=0;h<n.length;h++)n[h].useIndexAsValue&&(n[h].value=h)});function l(h,d){const g=n.find(p=>p.id===h);if(!(d&&g?.disabled))if(t.multiple){const p=i.value.slice(),m=p.findIndex(v=>v===h),y=~m;if(d=d??!y,y&&t.mandatory&&p.length<=1||!y&&t.max!=null&&p.length+1>t.max)return;m<0&&d?p.push(h):m>=0&&!d&&p.splice(m,1),i.value=p}else{const p=i.value.includes(h);if(t.mandatory&&p)return;i.value=d??!p?[h]:[]}}function u(h){if(t.multiple,i.value.length){const d=i.value[0],g=n.findIndex(y=>y.id===d);let p=(g+h)%n.length,m=n[p];for(;m.disabled&&p!==g;)p=(p+h)%n.length,m=n[p];if(m.disabled)return;i.value=[n[p].id]}else{const d=n.find(g=>!g.disabled);d&&(i.value=[d.id])}}const f={register:a,unregister:o,selected:i,select:l,disabled:or(t,"disabled"),prev:()=>u(n.length-1),next:()=>u(1),isSelected:h=>i.value.includes(h),selectedClass:Te(()=>t.selectedClass),items:Te(()=>n),getItemIndex:h=>n$e(n,h)};return ui(e,f),f}function n$e(t,e){const r=Zue(t,[e]);return r.length?t.findIndex(n=>n.id===r[0]):-1}function Zue(t,e){const r=[];return e.forEach(n=>{const i=t.find(a=>Vv(n,a.value)),s=t[n];i?.value!=null?r.push(i.id):s!=null&&r.push(s.id)}),r}function i$e(t,e){const r=[];return e.forEach(n=>{const i=t.findIndex(s=>s.id===n);if(~i){const s=t[i];r.push(s.value!=null?s.value:i)}}),r}const Jue=Symbol.for("vuetify:v-btn-toggle"),s$e=_t({...Xue(),...SF()},"VBtnToggle");Yt()({name:"VBtnToggle",props:s$e(),emits:{"update:modelValue":t=>!0},setup(t,e){let{slots:r}=e;const{isSelected:n,next:i,prev:s,select:a,selected:o}=_S(t,Jue);return _r(()=>{const c=zY.filterProps(t);return ue(zY,gr({class:["v-btn-toggle",t.class]},c,{style:t.style}),{default:()=>[r.default?.({isSelected:n,next:i,prev:s,select:a,selected:o})]})}),{next:i,prev:s,select:a}}});const a$e=_t({defaults:Object,disabled:Boolean,reset:[Number,String],root:[Boolean,String],scoped:Boolean},"VDefaultsProvider"),Xs=Yt(!1)({name:"VDefaultsProvider",props:a$e(),setup(t,e){let{slots:r}=e;const{defaults:n,disabled:i,reset:s,root:a,scoped:o}=mL(t);return zv(n,{reset:s,root:a,scoped:o,disabled:i}),()=>r.default?.()}}),o$e=["x-small","small","default","large","x-large"],u6=_t({size:{type:[String,Number],default:"default"}},"size");function f6(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:hh();return DL(()=>{let r,n;return f7(o$e,t.size)?r=`${e}--size-${t.size}`:t.size&&(n={width:br(t.size),height:br(t.size)}),{sizeClasses:r,sizeStyles:n}})}const c$e=_t({color:String,disabled:Boolean,start:Boolean,end:Boolean,icon:ri,...Or(),...u6(),...ps({tag:"i"}),...$s()},"VIcon"),Fn=Yt()({name:"VIcon",props:c$e(),setup(t,e){let{attrs:r,slots:n}=e;const i=ht(),{themeClasses:s}=va(t),{iconData:a}=bCe(Te(()=>i.value||t.icon)),{sizeClasses:o}=f6(t),{textColorClasses:c,textColorStyles:l}=Gd(or(t,"color"));return _r(()=>{const u=n.default?.();u&&(i.value=Woe(u).filter(h=>h.type===e6&&h.children&&typeof h.children=="string")[0]?.children);const f=!!(r.onClick||r.onClickOnce);return ue(a.value.component,{tag:t.tag,icon:a.value.icon,class:["v-icon","notranslate",s.value,o.value,c.value,{"v-icon--clickable":f,"v-icon--disabled":t.disabled,"v-icon--start":t.start,"v-icon--end":t.end},t.class],style:[o.value?void 0:{fontSize:br(t.size),height:br(t.size),width:br(t.size)},l.value,t.style],role:f?"button":void 0,"aria-hidden":!f,tabindex:f?t.disabled?-1:0:void 0},{default:()=>[u]})}),{}}});function Que(t,e){const r=ht(),n=ur(!1);if(RL){const i=new IntersectionObserver(s=>{n.value=!!s.find(a=>a.isIntersecting)},e);bo(()=>{i.disconnect()}),cr(r,(s,a)=>{a&&(i.unobserve(a),n.value=!1),s&&i.observe(s)},{flush:"post"})}return{intersectionRef:r,isIntersecting:n}}const l$e=_t({bgColor:String,color:String,indeterminate:[Boolean,String],modelValue:{type:[Number,String],default:0},rotate:{type:[Number,String],default:0},width:{type:[Number,String],default:4},...Or(),...u6(),...ps({tag:"div"}),...$s()},"VProgressCircular"),kF=Yt()({name:"VProgressCircular",props:l$e(),setup(t,e){let{slots:r}=e;const n=20,i=2*Math.PI*n,s=ht(),{themeClasses:a}=va(t),{sizeClasses:o,sizeStyles:c}=f6(t),{textColorClasses:l,textColorStyles:u}=Gd(or(t,"color")),{textColorClasses:f,textColorStyles:h}=Gd(or(t,"bgColor")),{intersectionRef:d,isIntersecting:g}=Que(),{resizeRef:p,contentRect:m}=My(),y=Te(()=>Math.max(0,Math.min(100,parseFloat(t.modelValue)))),v=Te(()=>Number(t.width)),_=Te(()=>c.value?Number(t.size):m.value?m.value.width:Math.max(v.value,32)),x=Te(()=>n/(1-v.value/_.value)*2),A=Te(()=>v.value/_.value*x.value),C=Te(()=>br((100-y.value)/100*i));return Qs(()=>{d.value=s.value,p.value=s.value}),_r(()=>ue(t.tag,{ref:s,class:["v-progress-circular",{"v-progress-circular--indeterminate":!!t.indeterminate,"v-progress-circular--visible":g.value,"v-progress-circular--disable-shrink":t.indeterminate==="disable-shrink"},a.value,o.value,l.value,t.class],style:[c.value,u.value,t.style],role:"progressbar","aria-valuemin":"0","aria-valuemax":"100","aria-valuenow":t.indeterminate?void 0:y.value},{default:()=>[ue("svg",{style:{transform:`rotate(calc(-90deg + ${Number(t.rotate)}deg))`},xmlns:"http://www.w3.org/2000/svg",viewBox:`0 0 ${x.value} ${x.value}`},[ue("circle",{class:["v-progress-circular__underlay",f.value],style:h.value,fill:"transparent",cx:"50%",cy:"50%",r:n,"stroke-width":A.value,"stroke-dasharray":i,"stroke-dashoffset":0},null),ue("circle",{class:"v-progress-circular__overlay",fill:"transparent",cx:"50%",cy:"50%",r:n,"stroke-width":A.value,"stroke-dasharray":i,"stroke-dashoffset":C.value},null)]),r.default&&ue("div",{class:"v-progress-circular__content"},[r.default({value:y.value})])]})),{}}}),mh=_t({height:[Number,String],maxHeight:[Number,String],maxWidth:[Number,String],minHeight:[Number,String],minWidth:[Number,String],width:[Number,String]},"dimension");function yh(t){return{dimensionStyles:Te(()=>{const r={},n=br(t.height),i=br(t.maxHeight),s=br(t.maxWidth),a=br(t.minHeight),o=br(t.minWidth),c=br(t.width);return n!=null&&(r.height=n),i!=null&&(r.maxHeight=i),s!=null&&(r.maxWidth=s),a!=null&&(r.minHeight=a),o!=null&&(r.minWidth=o),c!=null&&(r.width=c),r})}}const qY={center:"center",top:"bottom",bottom:"top",left:"right",right:"left"},xS=_t({location:String},"location");function ES(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=arguments.length>2?arguments[2]:void 0;const{isRtl:n}=Gl();return{locationStyles:Te(()=>{if(!t.location)return{};const{side:s,align:a}=bD(t.location.split(" ").length>1?t.location:`${t.location} center`,n.value);function o(l){return r?r(l):0}const c={};return s!=="center"&&(e?c[qY[s]]=`calc(100% - ${o(s)}px)`:c[s]=0),a!=="center"?e?c[qY[a]]=`calc(100% - ${o(a)}px)`:c[a]=0:(s==="center"?c.top=c.left="50%":c[{top:"left",bottom:"left",left:"top",right:"top"}[s]]="50%",c.transform={top:"translateX(-50%)",bottom:"translateX(-50%)",left:"translateY(-50%)",right:"translateY(-50%)",center:"translate(-50%, -50%)"}[s]),c})}}const u$e=_t({absolute:Boolean,active:{type:Boolean,default:!0},bgColor:String,bgOpacity:[Number,String],bufferValue:{type:[Number,String],default:0},bufferColor:String,bufferOpacity:[Number,String],clickable:Boolean,color:String,height:{type:[Number,String],default:4},indeterminate:Boolean,max:{type:[Number,String],default:100},modelValue:{type:[Number,String],default:0},opacity:[Number,String],reverse:Boolean,stream:Boolean,striped:Boolean,roundedBar:Boolean,...Or(),...xS({location:"top"}),...Ju(),...ps(),...$s()},"VProgressLinear"),f$e=Yt()({name:"VProgressLinear",props:u$e(),emits:{"update:modelValue":t=>!0},setup(t,e){let{slots:r}=e;const n=xs(t,"modelValue"),{isRtl:i,rtlClasses:s}=Gl(),{themeClasses:a}=va(t),{locationStyles:o}=ES(t),{textColorClasses:c,textColorStyles:l}=Gd(t,"color"),{backgroundColorClasses:u,backgroundColorStyles:f}=Od(Te(()=>t.bgColor||t.color)),{backgroundColorClasses:h,backgroundColorStyles:d}=Od(Te(()=>t.bufferColor||t.bgColor||t.color)),{backgroundColorClasses:g,backgroundColorStyles:p}=Od(t,"color"),{roundedClasses:m}=Qu(t),{intersectionRef:y,isIntersecting:v}=Que(),_=Te(()=>parseFloat(t.max)),x=Te(()=>parseFloat(t.height)),A=Te(()=>Dd(parseFloat(t.bufferValue)/_.value*100,0,100)),C=Te(()=>Dd(parseFloat(n.value)/_.value*100,0,100)),R=Te(()=>i.value!==t.reverse),M=Te(()=>t.indeterminate?"fade-transition":"slide-x-transition"),N=qn&&window.matchMedia?.("(forced-colors: active)").matches;function Y(H){if(!y.value)return;const{left:E,right:k,width:w}=y.value.getBoundingClientRect(),T=R.value?w-H.clientX+(k-w):H.clientX-E;n.value=Math.round(T/w*_.value)}return _r(()=>ue(t.tag,{ref:y,class:["v-progress-linear",{"v-progress-linear--absolute":t.absolute,"v-progress-linear--active":t.active&&v.value,"v-progress-linear--reverse":R.value,"v-progress-linear--rounded":t.rounded,"v-progress-linear--rounded-bar":t.roundedBar,"v-progress-linear--striped":t.striped},m.value,a.value,s.value,t.class],style:[{bottom:t.location==="bottom"?0:void 0,top:t.location==="top"?0:void 0,height:t.active?br(x.value):0,"--v-progress-linear-height":br(x.value),...t.absolute?o.value:{}},t.style],role:"progressbar","aria-hidden":t.active?"false":"true","aria-valuemin":"0","aria-valuemax":t.max,"aria-valuenow":t.indeterminate?void 0:C.value,onClick:t.clickable&&Y},{default:()=>[t.stream&&ue("div",{key:"stream",class:["v-progress-linear__stream",c.value],style:{...l.value,[R.value?"left":"right"]:br(-x.value),borderTop:`${br(x.value/2)} dotted`,opacity:parseFloat(t.bufferOpacity),top:`calc(50% - ${br(x.value/4)})`,width:br(100-A.value,"%"),"--v-progress-linear-stream-to":br(x.value*(R.value?1:-1))}},null),ue("div",{class:["v-progress-linear__background",N?void 0:u.value],style:[f.value,{opacity:parseFloat(t.bgOpacity),width:t.stream?0:void 0}]},null),ue("div",{class:["v-progress-linear__buffer",N?void 0:h.value],style:[d.value,{opacity:parseFloat(t.bufferOpacity),width:br(A.value,"%")}]},null),ue(L1,{name:M.value},{default:()=>[t.indeterminate?ue("div",{class:"v-progress-linear__indeterminate"},[["long","short"].map(H=>ue("div",{key:H,class:["v-progress-linear__indeterminate",H,N?void 0:g.value],style:p.value},null))]):ue("div",{class:["v-progress-linear__determinate",N?void 0:g.value],style:[p.value,{width:br(C.value,"%")}]},null)]}),r.default&&ue("div",{class:"v-progress-linear__content"},[r.default({value:C.value,buffer:A.value})])]})),{}}}),CF=_t({loading:[Boolean,String]},"loader");function SS(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:hh();return{loaderClasses:Te(()=>({[`${e}--loading`]:t.loading}))}}function IF(t,e){let{slots:r}=e;return ue("div",{class:`${t.name}__loader`},[r.default?.({color:t.color,isActive:t.active})||ue(f$e,{absolute:t.absolute,active:t.active,color:t.color,height:"2",indeterminate:!0},null)])}const h$e=["static","relative","fixed","absolute","sticky"],RF=_t({position:{type:String,validator:t=>h$e.includes(t)}},"position");function PF(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:hh();return{positionClasses:Te(()=>t.position?`${e}--${t.position}`:void 0)}}function d$e(){const t=Fs("useRoute");return Te(()=>t?.proxy?.$route)}function p$e(){return Fs("useRouter")?.proxy?.$router}function AS(t,e){const r=ooe("RouterLink"),n=Te(()=>!!(t.href||t.to)),i=Te(()=>n?.value||cK(e,"click")||cK(t,"click"));if(typeof r=="string"||!("useLink"in r)){const f=or(t,"href");return{isLink:n,isClickable:i,href:f,linkProps:Ps({href:f})}}const s=Te(()=>({...t,to:or(()=>t.to||"")})),a=r.useLink(s.value),o=Te(()=>t.to?a:void 0),c=d$e(),l=Te(()=>o.value?t.exact?c.value?o.value.isExactActive?.value&&Vv(o.value.route.value.query,c.value.query):o.value.isExactActive?.value??!1:o.value.isActive?.value??!1:!1),u=Te(()=>t.to?o.value?.route.value.href:t.href);return{isLink:n,isClickable:i,isActive:l,route:o.value?.route,navigate:o.value?.navigate,href:u,linkProps:Ps({href:u,"aria-current":Te(()=>l.value?"page":void 0)})}}const TS=_t({href:String,replace:Boolean,to:[String,Object],exact:Boolean},"router");let PC=!1;function g$e(t,e){let r=!1,n,i;qn&&(Bi(()=>{window.addEventListener("popstate",s),n=t?.beforeEach((a,o,c)=>{PC?r?e(c):c():setTimeout(()=>r?e(c):c()),PC=!0}),i=t?.afterEach(()=>{PC=!1})}),Pc(()=>{window.removeEventListener("popstate",s),n?.(),i?.()}));function s(a){a.state?.replaced||(r=!0,setTimeout(()=>r=!1))}}function m$e(t,e){cr(()=>t.isActive?.value,r=>{t.isLink.value&&r&&e&&Bi(()=>{e(!0)})},{immediate:!0})}const fO=Symbol("rippleStop"),y$e=80;function HY(t,e){t.style.transform=e,t.style.webkitTransform=e}function hO(t){return t.constructor.name==="TouchEvent"}function efe(t){return t.constructor.name==="KeyboardEvent"}const v$e=function(t,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=0,i=0;if(!efe(t)){const f=e.getBoundingClientRect(),h=hO(t)?t.touches[t.touches.length-1]:t;n=h.clientX-f.left,i=h.clientY-f.top}let s=0,a=.3;e._ripple?.circle?(a=.15,s=e.clientWidth/2,s=r.center?s:s+Math.sqrt((n-s)**2+(i-s)**2)/4):s=Math.sqrt(e.clientWidth**2+e.clientHeight**2)/2;const o=`${(e.clientWidth-s*2)/2}px`,c=`${(e.clientHeight-s*2)/2}px`,l=r.center?o:`${n-s}px`,u=r.center?c:`${i-s}px`;return{radius:s,scale:a,x:l,y:u,centerX:o,centerY:c}},$7={show(t,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!e?._ripple?.enabled)return;const n=document.createElement("span"),i=document.createElement("span");n.appendChild(i),n.className="v-ripple__container",r.class&&(n.className+=` ${r.class}`);const{radius:s,scale:a,x:o,y:c,centerX:l,centerY:u}=v$e(t,e,r),f=`${s*2}px`;i.className="v-ripple__animation",i.style.width=f,i.style.height=f,e.appendChild(n);const h=window.getComputedStyle(e);h&&h.position==="static"&&(e.style.position="relative",e.dataset.previousPosition="static"),i.classList.add("v-ripple__animation--enter"),i.classList.add("v-ripple__animation--visible"),HY(i,`translate(${o}, ${c}) scale3d(${a},${a},${a})`),i.dataset.activated=String(performance.now()),setTimeout(()=>{i.classList.remove("v-ripple__animation--enter"),i.classList.add("v-ripple__animation--in"),HY(i,`translate(${l}, ${u}) scale3d(1,1,1)`)},0)},hide(t){if(!t?._ripple?.enabled)return;const e=t.getElementsByClassName("v-ripple__animation");if(e.length===0)return;const r=e[e.length-1];if(r.dataset.isHiding)return;r.dataset.isHiding="true";const n=performance.now()-Number(r.dataset.activated),i=Math.max(250-n,0);setTimeout(()=>{r.classList.remove("v-ripple__animation--in"),r.classList.add("v-ripple__animation--out"),setTimeout(()=>{t.getElementsByClassName("v-ripple__animation").length===1&&t.dataset.previousPosition&&(t.style.position=t.dataset.previousPosition,delete t.dataset.previousPosition),r.parentNode?.parentNode===t&&t.removeChild(r.parentNode)},300)},i)}};function tfe(t){return typeof t>"u"||!!t}function i4(t){const e={},r=t.currentTarget;if(!(!r?._ripple||r._ripple.touched||t[fO])){if(t[fO]=!0,hO(t))r._ripple.touched=!0,r._ripple.isTouch=!0;else if(r._ripple.isTouch)return;if(e.center=r._ripple.centered||efe(t),r._ripple.class&&(e.class=r._ripple.class),hO(t)){if(r._ripple.showTimerCommit)return;r._ripple.showTimerCommit=()=>{$7.show(t,r,e)},r._ripple.showTimer=window.setTimeout(()=>{r?._ripple?.showTimerCommit&&(r._ripple.showTimerCommit(),r._ripple.showTimerCommit=null)},y$e)}else $7.show(t,r,e)}}function WY(t){t[fO]=!0}function Yc(t){const e=t.currentTarget;if(e?._ripple){if(window.clearTimeout(e._ripple.showTimer),t.type==="touchend"&&e._ripple.showTimerCommit){e._ripple.showTimerCommit(),e._ripple.showTimerCommit=null,e._ripple.showTimer=window.setTimeout(()=>{Yc(t)});return}window.setTimeout(()=>{e._ripple&&(e._ripple.touched=!1)}),$7.hide(e)}}function rfe(t){const e=t.currentTarget;e?._ripple&&(e._ripple.showTimerCommit&&(e._ripple.showTimerCommit=null),window.clearTimeout(e._ripple.showTimer))}let s4=!1;function nfe(t){!s4&&(t.keyCode===iK.enter||t.keyCode===iK.space)&&(s4=!0,i4(t))}function ife(t){s4=!1,Yc(t)}function sfe(t){s4&&(s4=!1,Yc(t))}function afe(t,e,r){const{value:n,modifiers:i}=e,s=tfe(n);if(s||$7.hide(t),t._ripple=t._ripple??{},t._ripple.enabled=s,t._ripple.centered=i.center,t._ripple.circle=i.circle,TTe(n)&&n.class&&(t._ripple.class=n.class),s&&!r){if(i.stop){t.addEventListener("touchstart",WY,{passive:!0}),t.addEventListener("mousedown",WY);return}t.addEventListener("touchstart",i4,{passive:!0}),t.addEventListener("touchend",Yc,{passive:!0}),t.addEventListener("touchmove",rfe,{passive:!0}),t.addEventListener("touchcancel",Yc),t.addEventListener("mousedown",i4),t.addEventListener("mouseup",Yc),t.addEventListener("mouseleave",Yc),t.addEventListener("keydown",nfe),t.addEventListener("keyup",ife),t.addEventListener("blur",sfe),t.addEventListener("dragstart",Yc,{passive:!0})}else!s&&r&&ofe(t)}function ofe(t){t.removeEventListener("mousedown",i4),t.removeEventListener("touchstart",i4),t.removeEventListener("touchend",Yc),t.removeEventListener("touchmove",rfe),t.removeEventListener("touchcancel",Yc),t.removeEventListener("mouseup",Yc),t.removeEventListener("mouseleave",Yc),t.removeEventListener("keydown",nfe),t.removeEventListener("keyup",ife),t.removeEventListener("dragstart",Yc),t.removeEventListener("blur",sfe)}function b$e(t,e){afe(t,e,!1)}function w$e(t){delete t._ripple,ofe(t)}function _$e(t,e){if(e.value===e.oldValue)return;const r=tfe(e.oldValue);afe(t,e,r)}const h6={mounted:b$e,unmounted:w$e,updated:_$e},x$e=_t({active:{type:Boolean,default:void 0},activeColor:String,baseColor:String,symbol:{type:null,default:Jue},flat:Boolean,icon:[Boolean,String,Function,Object],prependIcon:ri,appendIcon:ri,block:Boolean,readonly:Boolean,slim:Boolean,stacked:Boolean,ripple:{type:[Boolean,Object],default:!0},text:String,...ip(),...Or(),...gh(),...mh(),...Im(),...AF(),...CF(),...xS(),...RF(),...Ju(),...TS(),...u6(),...ps({tag:"button"}),...$s(),...ap({variant:"elevated"})},"VBtn"),Jc=Yt()({name:"VBtn",props:x$e(),emits:{"group:selected":t=>!0},setup(t,e){let{attrs:r,slots:n}=e;const{themeClasses:i}=va(t),{borderClasses:s}=sp(t),{densityClasses:a}=a0(t),{dimensionStyles:o}=yh(t),{elevationClasses:c}=Rm(t),{loaderClasses:l}=SS(t),{locationStyles:u}=ES(t),{positionClasses:f}=PF(t),{roundedClasses:h}=Qu(t),{sizeClasses:d,sizeStyles:g}=f6(t),p=TF(t,t.symbol,!1),m=AS(t,r),y=Te(()=>t.active!==void 0?t.active:m.isLink.value?m.isActive?.value:p?.isSelected.value),v=Te(()=>y.value?t.activeColor??t.color:t.color),_=Te(()=>({color:p?.isSelected.value&&(!m.isLink.value||m.isActive?.value)||!p||m.isActive?.value?v.value??t.baseColor:t.baseColor,variant:t.variant})),{colorClasses:x,colorStyles:A,variantClasses:C}=l6(_),R=Te(()=>p?.disabled.value||t.disabled),M=Te(()=>t.variant==="elevated"&&!(t.disabled||t.flat||t.border)),N=Te(()=>{if(!(t.value===void 0||typeof t.value=="symbol"))return Object(t.value)===t.value?JSON.stringify(t.value,null,0):t.value});function Y(H){R.value||m.isLink.value&&(H.metaKey||H.ctrlKey||H.shiftKey||H.button!==0||r.target==="_blank")||(m.navigate?.(H),p?.toggle())}return m$e(m,p?.select),_r(()=>{const H=m.isLink.value?"a":t.tag,E=!!(t.prependIcon||n.prepend),k=!!(t.appendIcon||n.append),w=!!(t.icon&&t.icon!==!0);return $a(ue(H,gr({type:H==="a"?void 0:"button",class:["v-btn",p?.selectedClass.value,{"v-btn--active":y.value,"v-btn--block":t.block,"v-btn--disabled":R.value,"v-btn--elevated":M.value,"v-btn--flat":t.flat,"v-btn--icon":!!t.icon,"v-btn--loading":t.loading,"v-btn--readonly":t.readonly,"v-btn--slim":t.slim,"v-btn--stacked":t.stacked},i.value,s.value,x.value,a.value,c.value,l.value,f.value,h.value,d.value,C.value,t.class],style:[A.value,o.value,u.value,g.value,t.style],"aria-busy":t.loading?!0:void 0,disabled:R.value||void 0,tabindex:t.loading||t.readonly?-1:void 0,onClick:Y,value:N.value},m.linkProps),{default:()=>[c6(!0,"v-btn"),!t.icon&&E&&ue("span",{key:"prepend",class:"v-btn__prepend"},[n.prepend?ue(Xs,{key:"prepend-defaults",disabled:!t.prependIcon,defaults:{VIcon:{icon:t.prependIcon}}},n.prepend):ue(Fn,{key:"prepend-icon",icon:t.prependIcon},null)]),ue("span",{class:"v-btn__content","data-no-activator":""},[!n.default&&w?ue(Fn,{key:"content-icon",icon:t.icon},null):ue(Xs,{key:"content-defaults",disabled:!w,defaults:{VIcon:{icon:t.icon}}},{default:()=>[n.default?.()??t.text]})]),!t.icon&&k&&ue("span",{key:"append",class:"v-btn__append"},[n.append?ue(Xs,{key:"append-defaults",disabled:!t.appendIcon,defaults:{VIcon:{icon:t.appendIcon}}},n.append):ue(Fn,{key:"append-icon",icon:t.appendIcon},null)]),!!t.loading&&ue("span",{key:"loader",class:"v-btn__loader"},[n.loader?.()??ue(kF,{color:typeof t.loading=="boolean"?void 0:t.loading,indeterminate:!0,width:"2"},null)])]}),[[h6,!R.value&&t.ripple,"",{center:!!t.icon}]])}),{group:p}}}),cfe=cS.reduce((t,e)=>(t[e]={type:[Boolean,String,Number],default:!1},t),{}),lfe=cS.reduce((t,e)=>{const r="offset"+t0(e);return t[r]={type:[String,Number],default:null},t},{}),ufe=cS.reduce((t,e)=>{const r="order"+t0(e);return t[r]={type:[String,Number],default:null},t},{}),KY={col:Object.keys(cfe),offset:Object.keys(lfe),order:Object.keys(ufe)};function E$e(t,e,r){let n=t;if(!(r==null||r===!1)){if(e){const i=e.replace(t,"");n+=`-${i}`}return t==="col"&&(n="v-"+n),t==="col"&&(r===""||r===!0)||(n+=`-${r}`),n.toLowerCase()}}const S$e=["auto","start","end","center","baseline","stretch"],A$e=_t({cols:{type:[Boolean,String,Number],default:!1},...cfe,offset:{type:[String,Number],default:null},...lfe,order:{type:[String,Number],default:null},...ufe,alignSelf:{type:String,default:null,validator:t=>S$e.includes(t)},...Or(),...ps()},"VCol"),ua=Yt()({name:"VCol",props:A$e(),setup(t,e){let{slots:r}=e;const n=Te(()=>{const i=[];let s;for(s in KY)KY[s].forEach(o=>{const c=t[o],l=E$e(s,o,c);l&&i.push(l)});const a=i.some(o=>o.startsWith("v-col-"));return i.push({"v-col":!a||!t.cols,[`v-col-${t.cols}`]:t.cols,[`offset-${t.offset}`]:t.offset,[`order-${t.order}`]:t.order,[`align-self-${t.alignSelf}`]:t.alignSelf}),i});return()=>Va(t.tag,{class:[n.value,t.class],style:t.style},r.default?.())}}),BF=["start","end","center"],ffe=["space-between","space-around","space-evenly"];function DF(t,e){return cS.reduce((r,n)=>{const i=t+t0(n);return r[i]=e(),r},{})}const T$e=[...BF,"baseline","stretch"],hfe=t=>T$e.includes(t),dfe=DF("align",()=>({type:String,default:null,validator:hfe})),k$e=[...BF,...ffe],pfe=t=>k$e.includes(t),gfe=DF("justify",()=>({type:String,default:null,validator:pfe})),C$e=[...BF,...ffe,"stretch"],mfe=t=>C$e.includes(t),yfe=DF("alignContent",()=>({type:String,default:null,validator:mfe})),GY={align:Object.keys(dfe),justify:Object.keys(gfe),alignContent:Object.keys(yfe)},I$e={align:"align",justify:"justify",alignContent:"align-content"};function R$e(t,e,r){let n=I$e[t];if(r!=null){if(e){const i=e.replace(t,"");n+=`-${i}`}return n+=`-${r}`,n.toLowerCase()}}const P$e=_t({dense:Boolean,noGutters:Boolean,align:{type:String,default:null,validator:hfe},...dfe,justify:{type:String,default:null,validator:pfe},...gfe,alignContent:{type:String,default:null,validator:mfe},...yfe,...Or(),...ps()},"VRow"),vfe=Yt()({name:"VRow",props:P$e(),setup(t,e){let{slots:r}=e;const n=Te(()=>{const i=[];let s;for(s in GY)GY[s].forEach(a=>{const o=t[a],c=R$e(s,a,o);c&&i.push(c)});return i.push({"v-row--no-gutters":t.noGutters,"v-row--dense":t.dense,[`align-${t.align}`]:t.align,[`justify-${t.justify}`]:t.justify,[`align-content-${t.alignContent}`]:t.alignContent}),i});return()=>Va(t.tag,{class:["v-row",n.value,t.class],style:t.style},r.default?.())}}),B$e=LL("v-spacer","div","VSpacer"),D$e=t=>{const{touchstartX:e,touchendX:r,touchstartY:n,touchendY:i}=t,s=.5,a=16;t.offsetX=r-e,t.offsetY=i-n,Math.abs(t.offsetY)<s*Math.abs(t.offsetX)&&(t.left&&r<e-a&&t.left(t),t.right&&r>e+a&&t.right(t)),Math.abs(t.offsetX)<s*Math.abs(t.offsetY)&&(t.up&&i<n-a&&t.up(t),t.down&&i>n+a&&t.down(t))};function O$e(t,e){const r=t.changedTouches[0];e.touchstartX=r.clientX,e.touchstartY=r.clientY,e.start?.({originalEvent:t,...e})}function N$e(t,e){const r=t.changedTouches[0];e.touchendX=r.clientX,e.touchendY=r.clientY,e.end?.({originalEvent:t,...e}),D$e(e)}function M$e(t,e){const r=t.changedTouches[0];e.touchmoveX=r.clientX,e.touchmoveY=r.clientY,e.move?.({originalEvent:t,...e})}function L$e(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const e={touchstartX:0,touchstartY:0,touchendX:0,touchendY:0,touchmoveX:0,touchmoveY:0,offsetX:0,offsetY:0,left:t.left,right:t.right,up:t.up,down:t.down,start:t.start,move:t.move,end:t.end};return{touchstart:r=>O$e(r,e),touchend:r=>N$e(r,e),touchmove:r=>M$e(r,e)}}function F$e(t,e){const r=e.value,n=r?.parent?t.parentElement:t,i=r?.options??{passive:!0},s=e.instance?.$.uid;if(!n||!s)return;const a=L$e(e.value);n._touchHandlers=n._touchHandlers??Object.create(null),n._touchHandlers[s]=a,zoe(a).forEach(o=>{n.addEventListener(o,a[o],i)})}function $$e(t,e){const r=e.value?.parent?t.parentElement:t,n=e.instance?.$.uid;if(!r?._touchHandlers||!n)return;const i=r._touchHandlers[n];zoe(i).forEach(s=>{r.removeEventListener(s,i[s])}),delete r._touchHandlers[n]}const bfe={mounted:F$e,unmounted:$$e},wfe=Symbol.for("vuetify:v-window"),_fe=Symbol.for("vuetify:v-window-group"),U$e=_t({continuous:Boolean,nextIcon:{type:[Boolean,String,Function,Object],default:"$next"},prevIcon:{type:[Boolean,String,Function,Object],default:"$prev"},reverse:Boolean,showArrows:{type:[Boolean,String],validator:t=>typeof t=="boolean"||t==="hover"},touch:{type:[Object,Boolean],default:void 0},direction:{type:String,default:"horizontal"},modelValue:null,disabled:Boolean,selectedClass:{type:String,default:"v-window-item--active"},mandatory:{type:[Boolean,String],default:"force"},...Or(),...ps(),...$s()},"VWindow"),V$e=Yt()({name:"VWindow",directives:{Touch:bfe},props:U$e(),emits:{"update:modelValue":t=>!0},setup(t,e){let{slots:r}=e;const{themeClasses:n}=va(t),{isRtl:i}=Gl(),{t:s}=aS(),a=_S(t,_fe),o=ht(),c=Te(()=>i.value?!t.reverse:t.reverse),l=ur(!1),u=Te(()=>{const x=t.direction==="vertical"?"y":"x",C=(c.value?!l.value:l.value)?"-reverse":"";return`v-window-${x}${C}-transition`}),f=ur(0),h=ht(void 0),d=Te(()=>a.items.value.findIndex(x=>a.selected.value.includes(x.id)));cr(d,(x,A)=>{const C=a.items.value.length,R=C-1;C<=2?l.value=x<A:x===R&&A===0?l.value=!0:x===0&&A===R?l.value=!1:l.value=x<A}),ui(wfe,{transition:u,isReversed:l,transitionCount:f,transitionHeight:h,rootRef:o});const g=Te(()=>t.continuous||d.value!==0),p=Te(()=>t.continuous||d.value!==a.items.value.length-1);function m(){g.value&&a.prev()}function y(){p.value&&a.next()}const v=Te(()=>{const x=[],A={icon:i.value?t.nextIcon:t.prevIcon,class:`v-window__${c.value?"right":"left"}`,onClick:a.prev,"aria-label":s("$vuetify.carousel.prev")};x.push(g.value?r.prev?r.prev({props:A}):ue(Jc,A,null):ue("div",null,null));const C={icon:i.value?t.prevIcon:t.nextIcon,class:`v-window__${c.value?"left":"right"}`,onClick:a.next,"aria-label":s("$vuetify.carousel.next")};return x.push(p.value?r.next?r.next({props:C}):ue(Jc,C,null):ue("div",null,null)),x}),_=Te(()=>t.touch===!1?t.touch:{...{left:()=>{c.value?m():y()},right:()=>{c.value?y():m()},start:A=>{let{originalEvent:C}=A;C.stopPropagation()}},...t.touch===!0?{}:t.touch});return _r(()=>$a(ue(t.tag,{ref:o,class:["v-window",{"v-window--show-arrows-on-hover":t.showArrows==="hover"},n.value,t.class],style:t.style},{default:()=>[ue("div",{class:"v-window__container",style:{height:h.value}},[r.default?.({group:a}),t.showArrows!==!1&&ue("div",{class:"v-window__controls"},[v.value])]),r.additional?.({group:a})]}),[[J1("touch"),_.value]])),{group:a}}}),xfe=_t({eager:Boolean},"lazy");function Efe(t,e){const r=ur(!1),n=Te(()=>r.value||t.eager||e.value);cr(e,()=>r.value=!0);function i(){t.eager||(r.value=!1)}return{isBooted:r,hasContent:n,onAfterLeave:i}}function OF(){const t=ur(!1);return Ai(()=>{window.requestAnimationFrame(()=>{t.value=!0})}),{ssrBootStyles:Te(()=>t.value?void 0:{transition:"none !important"}),isBooted:J4(t)}}const d6=_t({transition:{type:[Boolean,String,Object],default:"fade-transition",validator:t=>t!==!0}},"transition"),Sd=(t,e)=>{let{slots:r}=e;const{transition:n,disabled:i,group:s,...a}=t,{component:o=s?IL:L1,...c}=typeof n=="object"?n:{};return Va(o,gr(typeof n=="string"?{name:i?"":n}:c,typeof n=="string"?{}:Object.fromEntries(Object.entries({disabled:i,group:s}).filter(l=>{let[u,f]=l;return f!==void 0})),a),r)},j$e=_t({reverseTransition:{type:[Boolean,String],default:void 0},transition:{type:[Boolean,String],default:void 0},...Or(),...AF(),...xfe()},"VWindowItem"),z$e=Yt()({name:"VWindowItem",directives:{Touch:bfe},props:j$e(),emits:{"group:selected":t=>!0},setup(t,e){let{slots:r}=e;const n=Rr(wfe),i=TF(t,_fe),{isBooted:s}=OF();if(!n||!i)throw new Error("[Vuetify] VWindowItem must be used inside VWindow");const a=ur(!1),o=Te(()=>s.value&&(n.isReversed.value?t.reverseTransition!==!1:t.transition!==!1));function c(){!a.value||!n||(a.value=!1,n.transitionCount.value>0&&(n.transitionCount.value-=1,n.transitionCount.value===0&&(n.transitionHeight.value=void 0)))}function l(){a.value||!n||(a.value=!0,n.transitionCount.value===0&&(n.transitionHeight.value=br(n.rootRef.value?.clientHeight)),n.transitionCount.value+=1)}function u(){c()}function f(g){a.value&&Bi(()=>{!o.value||!a.value||!n||(n.transitionHeight.value=br(g.clientHeight))})}const h=Te(()=>{const g=n.isReversed.value?t.reverseTransition:t.transition;return o.value?{name:typeof g!="string"?n.transition.value:g,onBeforeEnter:l,onAfterEnter:c,onEnterCancelled:u,onBeforeLeave:l,onAfterLeave:c,onLeaveCancelled:u,onEnter:f}:!1}),{hasContent:d}=Efe(t,i.isSelected);return _r(()=>ue(Sd,{transition:h.value,disabled:!s.value},{default:()=>[$a(ue("div",{class:["v-window-item",i.selectedClass.value,t.class],style:t.style},[d.value&&r.default?.()]),[[Kd,i.isSelected.value]])]})),{groupItem:i}}}),p6=Di({__name:"ÉtapeCours",props:{nEtapes:{},etape:{}},emits:["retour","avancer"],setup(t,{emit:e}){const r=e;return(n,i)=>(pr(),Qr(z$e,{key:n.etape,style:{height:"100%"}},{default:mt(()=>[ue(vfe,{style:{height:"100%"}},{default:mt(()=>[n.etape>0?(pr(),Qr(ua,{key:0,cols:12,class:"mt-6 text-center"},{default:mt(()=>[ue(Jc,{onClick:i[0]||(i[0]=()=>r("retour")),icon:"mdi-chevron-up"})]),_:1})):qo("",!0),coe(n.$slots,"default"),n.etape<n.nEtapes-1?(pr(),Qr(ua,{key:1,cols:12,class:"mt-auto text-center"},{default:mt(()=>[ue(Jc,{onClick:i[1]||(i[1]=()=>r("avancer")),class:"pa-2",icon:"mdi-chevron-down"})]),_:1})):qo("",!0)]),_:3})]),_:3}))}}),q$e=_t({disabled:Boolean,group:Boolean,hideOnLeave:Boolean,leaveAbsolute:Boolean,mode:String,origin:String},"transition");function ll(t,e,r){return Yt()({name:t,props:q$e({mode:r,origin:e}),setup(n,i){let{slots:s}=i;const a={onBeforeEnter(o){n.origin&&(o.style.transformOrigin=n.origin)},onLeave(o){if(n.leaveAbsolute){const{offsetTop:c,offsetLeft:l,offsetWidth:u,offsetHeight:f}=o;o._transitionInitialStyles={position:o.style.position,top:o.style.top,left:o.style.left,width:o.style.width,height:o.style.height},o.style.position="absolute",o.style.top=`${c}px`,o.style.left=`${l}px`,o.style.width=`${u}px`,o.style.height=`${f}px`}n.hideOnLeave&&o.style.setProperty("display","none","important")},onAfterLeave(o){if(n.leaveAbsolute&&o?._transitionInitialStyles){const{position:c,top:l,left:u,width:f,height:h}=o._transitionInitialStyles;delete o._transitionInitialStyles,o.style.position=c||"",o.style.top=l||"",o.style.left=u||"",o.style.width=f||"",o.style.height=h||""}}};return()=>{const o=n.group?IL:L1;return Va(o,{name:n.disabled?"":t,css:!n.disabled,...n.group?void 0:{mode:n.mode},...n.disabled?{}:a},s.default)}}})}function Sfe(t,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"in-out";return Yt()({name:t,props:{mode:{type:String,default:r},disabled:Boolean,group:Boolean},setup(n,i){let{slots:s}=i;const a=n.group?IL:L1;return()=>Va(a,{name:n.disabled?"":t,css:!n.disabled,...n.disabled?{}:e},s.default)}})}function Afe(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";const r=(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1)?"width":"height",n=Tc(`offset-${r}`);return{onBeforeEnter(a){a._parent=a.parentNode,a._initialStyle={transition:a.style.transition,overflow:a.style.overflow,[r]:a.style[r]}},onEnter(a){const o=a._initialStyle;a.style.setProperty("transition","none","important"),a.style.overflow="hidden";const c=`${a[n]}px`;a.style[r]="0",a.offsetHeight,a.style.transition=o.transition,t&&a._parent&&a._parent.classList.add(t),requestAnimationFrame(()=>{a.style[r]=c})},onAfterEnter:s,onEnterCancelled:s,onLeave(a){a._initialStyle={transition:"",overflow:a.style.overflow,[r]:a.style[r]},a.style.overflow="hidden",a.style[r]=`${a[n]}px`,a.offsetHeight,requestAnimationFrame(()=>a.style[r]="0")},onAfterLeave:i,onLeaveCancelled:i};function i(a){t&&a._parent&&a._parent.classList.remove(t),s(a)}function s(a){const o=a._initialStyle[r];a.style.overflow=a._initialStyle.overflow,o!=null&&(a.style[r]=o),delete a._initialStyle}}const H$e=_t({target:[Object,Array]},"v-dialog-transition"),NF=Yt()({name:"VDialogTransition",props:H$e(),setup(t,e){let{slots:r}=e;const n={onBeforeEnter(i){i.style.pointerEvents="none",i.style.visibility="hidden"},async onEnter(i,s){await new Promise(h=>requestAnimationFrame(h)),await new Promise(h=>requestAnimationFrame(h)),i.style.visibility="";const{x:a,y:o,sx:c,sy:l,speed:u}=XY(t.target,i),f=ry(i,[{transform:`translate(${a}px, ${o}px) scale(${c}, ${l})`,opacity:0},{}],{duration:225*u,easing:lke});YY(i)?.forEach(h=>{ry(h,[{opacity:0},{opacity:0,offset:.33},{}],{duration:225*2*u,easing:p7})}),f.finished.then(()=>s())},onAfterEnter(i){i.style.removeProperty("pointer-events")},onBeforeLeave(i){i.style.pointerEvents="none"},async onLeave(i,s){await new Promise(h=>requestAnimationFrame(h));const{x:a,y:o,sx:c,sy:l,speed:u}=XY(t.target,i);ry(i,[{},{transform:`translate(${a}px, ${o}px) scale(${c}, ${l})`,opacity:0}],{duration:125*u,easing:uke}).finished.then(()=>s()),YY(i)?.forEach(h=>{ry(h,[{},{opacity:0,offset:.2},{opacity:0}],{duration:125*2*u,easing:p7})})},onAfterLeave(i){i.style.removeProperty("pointer-events")}};return()=>t.target?ue(L1,gr({name:"dialog-transition"},n,{css:!1}),r):ue(L1,{name:"dialog-transition"},r)}});function YY(t){const e=t.querySelector(":scope > .v-card, :scope > .v-sheet, :scope > .v-list")?.children;return e&&[...e]}function XY(t,e){const r=Zoe(t),n=OL(e),[i,s]=getComputedStyle(e).transformOrigin.split(" ").map(y=>parseFloat(y)),[a,o]=getComputedStyle(e).getPropertyValue("--v-overlay-anchor-origin").split(" ");let c=r.left+r.width/2;a==="left"||o==="left"?c-=r.width/2:(a==="right"||o==="right")&&(c+=r.width/2);let l=r.top+r.height/2;a==="top"||o==="top"?l-=r.height/2:(a==="bottom"||o==="bottom")&&(l+=r.height/2);const u=r.width/n.width,f=r.height/n.height,h=Math.max(1,u,f),d=u/h||0,g=f/h||0,p=n.width*n.height/(window.innerWidth*window.innerHeight),m=p>.12?Math.min(1.5,(p-.12)*10+1):1;return{x:c-(i+n.left),y:l-(s+n.top),sx:d,sy:g,speed:m}}ll("fab-transition","center center","out-in");ll("dialog-bottom-transition");ll("dialog-top-transition");const ZY=ll("fade-transition"),W$e=ll("scale-transition");ll("scroll-x-transition");ll("scroll-x-reverse-transition");ll("scroll-y-transition");ll("scroll-y-reverse-transition");ll("slide-x-transition");ll("slide-x-reverse-transition");const Tfe=ll("slide-y-transition");ll("slide-y-reverse-transition");const K$e=Sfe("expand-transition",Afe()),kfe=Sfe("expand-x-transition",Afe("",!0)),dO=Symbol.for("vuetify:list");function Cfe(){const t=Rr(dO,{hasPrepend:ur(!1),updateHasPrepend:()=>null}),e={hasPrepend:ur(!1),updateHasPrepend:r=>{r&&(e.hasPrepend.value=r)}};return ui(dO,e),t}function Ife(){return Rr(dO,null)}const MF=t=>{const e={activate:r=>{let{id:n,value:i,activated:s}=r;return n=rr(n),t&&!i&&s.size===1&&s.has(n)||(i?s.add(n):s.delete(n)),s},in:(r,n,i)=>{let s=new Set;if(r!=null)for(const a of Du(r))s=e.activate({id:a,value:!0,activated:new Set(s),children:n,parents:i});return s},out:r=>Array.from(r)};return e},Rfe=t=>{const e=MF(t);return{activate:n=>{let{activated:i,id:s,...a}=n;s=rr(s);const o=i.has(s)?new Set([s]):new Set;return e.activate({...a,id:s,activated:o})},in:(n,i,s)=>{let a=new Set;if(n!=null){const o=Du(n);o.length&&(a=e.in(o.slice(0,1),i,s))}return a},out:(n,i,s)=>e.out(n,i,s)}},G$e=t=>{const e=MF(t);return{activate:n=>{let{id:i,activated:s,children:a,...o}=n;return i=rr(i),a.has(i)?s:e.activate({id:i,activated:s,children:a,...o})},in:e.in,out:e.out}},Y$e=t=>{const e=Rfe(t);return{activate:n=>{let{id:i,activated:s,children:a,...o}=n;return i=rr(i),a.has(i)?s:e.activate({id:i,activated:s,children:a,...o})},in:e.in,out:e.out}},X$e={open:t=>{let{id:e,value:r,opened:n,parents:i}=t;if(r){const s=new Set;s.add(e);let a=i.get(e);for(;a!=null;)s.add(a),a=i.get(a);return s}else return n.delete(e),n},select:()=>null},Pfe={open:t=>{let{id:e,value:r,opened:n,parents:i}=t;if(r){let s=i.get(e);for(n.add(e);s!=null&&s!==e;)n.add(s),s=i.get(s);return n}else n.delete(e);return n},select:()=>null},Z$e={open:Pfe.open,select:t=>{let{id:e,value:r,opened:n,parents:i}=t;if(!r)return n;const s=[];let a=i.get(e);for(;a!=null;)s.push(a),a=i.get(a);return new Set(s)}},LF=t=>{const e={select:r=>{let{id:n,value:i,selected:s}=r;if(n=rr(n),t&&!i){const a=Array.from(s.entries()).reduce((o,c)=>{let[l,u]=c;return u==="on"&&o.push(l),o},[]);if(a.length===1&&a[0]===n)return s}return s.set(n,i?"on":"off"),s},in:(r,n,i)=>{let s=new Map;for(const a of r||[])s=e.select({id:a,value:!0,selected:new Map(s),children:n,parents:i});return s},out:r=>{const n=[];for(const[i,s]of r.entries())s==="on"&&n.push(i);return n}};return e},Bfe=t=>{const e=LF(t);return{select:n=>{let{selected:i,id:s,...a}=n;s=rr(s);const o=i.has(s)?new Map([[s,i.get(s)]]):new Map;return e.select({...a,id:s,selected:o})},in:(n,i,s)=>{let a=new Map;return n?.length&&(a=e.in(n.slice(0,1),i,s)),a},out:(n,i,s)=>e.out(n,i,s)}},J$e=t=>{const e=LF(t);return{select:n=>{let{id:i,selected:s,children:a,...o}=n;return i=rr(i),a.has(i)?s:e.select({id:i,selected:s,children:a,...o})},in:e.in,out:e.out}},Q$e=t=>{const e=Bfe(t);return{select:n=>{let{id:i,selected:s,children:a,...o}=n;return i=rr(i),a.has(i)?s:e.select({id:i,selected:s,children:a,...o})},in:e.in,out:e.out}},eUe=t=>{const e={select:r=>{let{id:n,value:i,selected:s,children:a,parents:o}=r;n=rr(n);const c=new Map(s),l=[n];for(;l.length;){const f=l.shift();s.set(rr(f),i?"on":"off"),a.has(f)&&l.push(...a.get(f))}let u=rr(o.get(n));for(;u;){const f=a.get(u),h=f.every(g=>s.get(rr(g))==="on"),d=f.every(g=>!s.has(rr(g))||s.get(rr(g))==="off");s.set(u,h?"on":d?"off":"indeterminate"),u=rr(o.get(u))}return t&&!i&&Array.from(s.entries()).reduce((h,d)=>{let[g,p]=d;return p==="on"&&h.push(g),h},[]).length===0?c:s},in:(r,n,i)=>{let s=new Map;for(const a of r||[])s=e.select({id:a,value:!0,selected:new Map(s),children:n,parents:i});return s},out:(r,n)=>{const i=[];for(const[s,a]of r.entries())a==="on"&&!n.has(s)&&i.push(s);return i}};return e},a4=Symbol.for("vuetify:nested"),Dfe={id:ur(),root:{register:()=>null,unregister:()=>null,parents:ht(new Map),children:ht(new Map),open:()=>null,openOnSelect:()=>null,activate:()=>null,select:()=>null,activatable:ht(!1),selectable:ht(!1),opened:ht(new Set),activated:ht(new Set),selected:ht(new Map),selectedValues:ht([]),getPath:()=>[]}},tUe=_t({activatable:Boolean,selectable:Boolean,activeStrategy:[String,Function,Object],selectStrategy:[String,Function,Object],openStrategy:[String,Object],opened:null,activated:null,selected:null,mandatory:Boolean},"nested"),rUe=t=>{let e=!1;const r=ht(new Map),n=ht(new Map),i=xs(t,"opened",t.opened,g=>new Set(g),g=>[...g.values()]),s=Te(()=>{if(typeof t.activeStrategy=="object")return t.activeStrategy;if(typeof t.activeStrategy=="function")return t.activeStrategy(t.mandatory);switch(t.activeStrategy){case"leaf":return G$e(t.mandatory);case"single-leaf":return Y$e(t.mandatory);case"independent":return MF(t.mandatory);case"single-independent":default:return Rfe(t.mandatory)}}),a=Te(()=>{if(typeof t.selectStrategy=="object")return t.selectStrategy;if(typeof t.selectStrategy=="function")return t.selectStrategy(t.mandatory);switch(t.selectStrategy){case"single-leaf":return Q$e(t.mandatory);case"leaf":return J$e(t.mandatory);case"independent":return LF(t.mandatory);case"single-independent":return Bfe(t.mandatory);case"classic":default:return eUe(t.mandatory)}}),o=Te(()=>{if(typeof t.openStrategy=="object")return t.openStrategy;switch(t.openStrategy){case"list":return Z$e;case"single":return X$e;case"multiple":default:return Pfe}}),c=xs(t,"activated",t.activated,g=>s.value.in(g,r.value,n.value),g=>s.value.out(g,r.value,n.value)),l=xs(t,"selected",t.selected,g=>a.value.in(g,r.value,n.value),g=>a.value.out(g,r.value,n.value));bo(()=>{e=!0});function u(g){const p=[];let m=g;for(;m!=null;)p.unshift(m),m=n.value.get(m);return p}const f=Fs("nested"),h=new Set,d={id:ur(),root:{opened:i,activatable:or(t,"activatable"),selectable:or(t,"selectable"),activated:c,selected:l,selectedValues:Te(()=>{const g=[];for(const[p,m]of l.value.entries())m==="on"&&g.push(p);return g}),register:(g,p,m)=>{if(h.has(g)){u(g).join(" -> "),u(p).concat(g).join(" -> ");return}else h.add(g);p&&g!==p&&n.value.set(g,p),m&&r.value.set(g,[]),p!=null&&r.value.set(p,[...r.value.get(p)||[],g])},unregister:g=>{if(e)return;h.delete(g),r.value.delete(g);const p=n.value.get(g);if(p){const m=r.value.get(p)??[];r.value.set(p,m.filter(y=>y!==g))}n.value.delete(g)},open:(g,p,m)=>{f.emit("click:open",{id:g,value:p,path:u(g),event:m});const y=o.value.open({id:g,value:p,opened:new Set(i.value),children:r.value,parents:n.value,event:m});y&&(i.value=y)},openOnSelect:(g,p,m)=>{const y=o.value.select({id:g,value:p,selected:new Map(l.value),opened:new Set(i.value),children:r.value,parents:n.value,event:m});y&&(i.value=y)},select:(g,p,m)=>{f.emit("click:select",{id:g,value:p,path:u(g),event:m});const y=a.value.select({id:g,value:p,selected:new Map(l.value),children:r.value,parents:n.value,event:m});y&&(l.value=y),d.root.openOnSelect(g,p,m)},activate:(g,p,m)=>{if(!t.activatable)return d.root.select(g,!0,m);f.emit("click:activate",{id:g,value:p,path:u(g),event:m});const y=s.value.activate({id:g,value:p,activated:new Set(c.value),children:r.value,parents:n.value,event:m});y&&(c.value=y)},children:r,parents:n,getPath:u}};return ui(a4,d),d.root},Ofe=(t,e)=>{const r=Rr(a4,Dfe),n=Symbol(Zu()),i=Te(()=>t.value!==void 0?t.value:n),s={...r,id:i,open:(a,o)=>r.root.open(i.value,a,o),openOnSelect:(a,o)=>r.root.openOnSelect(i.value,a,o),isOpen:Te(()=>r.root.opened.value.has(i.value)),parent:Te(()=>r.root.parents.value.get(i.value)),activate:(a,o)=>r.root.activate(i.value,a,o),isActivated:Te(()=>r.root.activated.value.has(rr(i.value))),select:(a,o)=>r.root.select(i.value,a,o),isSelected:Te(()=>r.root.selected.value.get(rr(i.value))==="on"),isIndeterminate:Te(()=>r.root.selected.value.get(i.value)==="indeterminate"),isLeaf:Te(()=>!r.root.children.value.get(i.value)),isGroupActivator:r.isGroupActivator};return!r.isGroupActivator&&r.root.register(i.value,r.id.value,e),bo(()=>{!r.isGroupActivator&&r.root.unregister(i.value)}),e&&ui(a4,s),s},nUe=()=>{const t=Rr(a4,Dfe);ui(a4,{...t,isGroupActivator:!0})},iUe=qv({name:"VListGroupActivator",setup(t,e){let{slots:r}=e;return nUe(),()=>r.default?.()}}),sUe=_t({activeColor:String,baseColor:String,color:String,collapseIcon:{type:ri,default:"$collapse"},expandIcon:{type:ri,default:"$expand"},prependIcon:ri,appendIcon:ri,fluid:Boolean,subgroup:Boolean,title:String,value:null,...Or(),...ps()},"VListGroup"),JY=Yt()({name:"VListGroup",props:sUe(),setup(t,e){let{slots:r}=e;const{isOpen:n,open:i,id:s}=Ofe(or(t,"value"),!0),a=Te(()=>`v-list-group--id-${String(s.value)}`),o=Ife(),{isBooted:c}=OF();function l(d){d.stopPropagation(),i(!n.value,d)}const u=Te(()=>({onClick:l,class:"v-list-group__header",id:a.value})),f=Te(()=>n.value?t.collapseIcon:t.expandIcon),h=Te(()=>({VListItem:{active:n.value,activeColor:t.activeColor,baseColor:t.baseColor,color:t.color,prependIcon:t.prependIcon||t.subgroup&&f.value,appendIcon:t.appendIcon||!t.subgroup&&f.value,title:t.title,value:t.value}}));return _r(()=>ue(t.tag,{class:["v-list-group",{"v-list-group--prepend":o?.hasPrepend.value,"v-list-group--fluid":t.fluid,"v-list-group--subgroup":t.subgroup,"v-list-group--open":n.value},t.class],style:t.style},{default:()=>[r.activator&&ue(Xs,{defaults:h.value},{default:()=>[ue(iUe,null,{default:()=>[r.activator({props:u.value,isOpen:n.value})]})]}),ue(Sd,{transition:{component:K$e},disabled:!c.value},{default:()=>[$a(ue("div",{class:"v-list-group__items",role:"group","aria-labelledby":a.value},[r.default?.()]),[[Kd,n.value]])]})]})),{isOpen:n}}}),aUe=_t({opacity:[Number,String],...Or(),...ps()},"VListItemSubtitle"),oUe=Yt()({name:"VListItemSubtitle",props:aUe(),setup(t,e){let{slots:r}=e;return _r(()=>ue(t.tag,{class:["v-list-item-subtitle",t.class],style:[{"--v-list-item-subtitle-opacity":t.opacity},t.style]},r)),{}}}),cUe=LL("v-list-item-title");function lUe(t){return{aspectStyles:Te(()=>{const e=Number(t.aspectRatio);return e?{paddingBottom:String(1/e*100)+"%"}:void 0})}}const Nfe=_t({aspectRatio:[String,Number],contentClass:null,inline:Boolean,...Or(),...mh()},"VResponsive"),QY=Yt()({name:"VResponsive",props:Nfe(),setup(t,e){let{slots:r}=e;const{aspectStyles:n}=lUe(t),{dimensionStyles:i}=yh(t);return _r(()=>ue("div",{class:["v-responsive",{"v-responsive--inline":t.inline},t.class],style:[i.value,t.style]},[ue("div",{class:"v-responsive__sizer",style:n.value},null),r.additional?.(),r.default&&ue("div",{class:["v-responsive__content",t.contentClass]},[r.default()])])),{}}});function uUe(t,e){if(!RL)return;const r=e.modifiers||{},n=e.value,{handler:i,options:s}=typeof n=="object"?n:{handler:n,options:{}},a=new IntersectionObserver(function(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],c=arguments.length>1?arguments[1]:void 0;const l=t._observe?.[e.instance.$.uid];if(!l)return;const u=o.some(f=>f.isIntersecting);i&&(!r.quiet||l.init)&&(!r.once||u||l.init)&&i(u,o,c),u&&r.once?Mfe(t,e):l.init=!0},s);t._observe=Object(t._observe),t._observe[e.instance.$.uid]={init:!1,observer:a},a.observe(t)}function Mfe(t,e){const r=t._observe?.[e.instance.$.uid];r&&(r.observer.unobserve(t),delete t._observe[e.instance.$.uid])}const Lfe={mounted:uUe,unmounted:Mfe},fUe=_t({absolute:Boolean,alt:String,cover:Boolean,color:String,draggable:{type:[Boolean,String],default:void 0},eager:Boolean,gradient:String,lazySrc:String,options:{type:Object,default:()=>({root:void 0,rootMargin:void 0,threshold:void 0})},sizes:String,src:{type:[String,Object],default:""},crossorigin:String,referrerpolicy:String,srcset:String,position:String,...Nfe(),...Or(),...Ju(),...d6()},"VImg"),Hy=Yt()({name:"VImg",directives:{intersect:Lfe},props:fUe(),emits:{loadstart:t=>!0,load:t=>!0,error:t=>!0},setup(t,e){let{emit:r,slots:n}=e;const{backgroundColorClasses:i,backgroundColorStyles:s}=Od(or(t,"color")),{roundedClasses:a}=Qu(t),o=Fs("VImg"),c=ur(""),l=ht(),u=ur(t.eager?"loading":"idle"),f=ur(),h=ur(),d=Te(()=>t.src&&typeof t.src=="object"?{src:t.src.src,srcset:t.srcset||t.src.srcset,lazySrc:t.lazySrc||t.src.lazySrc,aspect:Number(t.aspectRatio||t.src.aspect||0)}:{src:t.src,srcset:t.srcset,lazySrc:t.lazySrc,aspect:Number(t.aspectRatio||0)}),g=Te(()=>d.value.aspect||f.value/h.value||0);cr(()=>t.src,()=>{p(u.value!=="idle")}),cr(g,(E,k)=>{!E&&k&&l.value&&x(l.value)}),bL(()=>p());function p(E){if(!(t.eager&&E)&&!(RL&&!E&&!t.eager)){if(u.value="loading",d.value.lazySrc){const k=new Image;k.src=d.value.lazySrc,x(k,null)}d.value.src&&Bi(()=>{r("loadstart",l.value?.currentSrc||d.value.src),setTimeout(()=>{if(!o.isUnmounted)if(l.value?.complete){if(l.value.naturalWidth||y(),u.value==="error")return;g.value||x(l.value,null),u.value==="loading"&&m()}else g.value||x(l.value),v()})})}}function m(){o.isUnmounted||(v(),x(l.value),u.value="loaded",r("load",l.value?.currentSrc||d.value.src))}function y(){o.isUnmounted||(u.value="error",r("error",l.value?.currentSrc||d.value.src))}function v(){const E=l.value;E&&(c.value=E.currentSrc||E.src)}let _=-1;bo(()=>{clearTimeout(_)});function x(E){let k=arguments.length>1&&arguments[1]!==void 0?arguments[1]:100;const w=()=>{if(clearTimeout(_),o.isUnmounted)return;const{naturalHeight:T,naturalWidth:L}=E;T||L?(f.value=L,h.value=T):!E.complete&&u.value==="loading"&&k!=null?_=window.setTimeout(w,k):(E.currentSrc.endsWith(".svg")||E.currentSrc.startsWith("data:image/svg+xml"))&&(f.value=1,h.value=1)};w()}const A=Te(()=>({"v-img__img--cover":t.cover,"v-img__img--contain":!t.cover})),C=()=>{if(!d.value.src||u.value==="idle")return null;const E=ue("img",{class:["v-img__img",A.value],style:{objectPosition:t.position},src:d.value.src,srcset:d.value.srcset,alt:t.alt,crossorigin:t.crossorigin,referrerpolicy:t.referrerpolicy,draggable:t.draggable,sizes:t.sizes,ref:l,onLoad:m,onError:y},null),k=n.sources?.();return ue(Sd,{transition:t.transition,appear:!0},{default:()=>[$a(k?ue("picture",{class:"v-img__picture"},[k,E]):E,[[Kd,u.value==="loaded"]])]})},R=()=>ue(Sd,{transition:t.transition},{default:()=>[d.value.lazySrc&&u.value!=="loaded"&&ue("img",{class:["v-img__img","v-img__img--preload",A.value],style:{objectPosition:t.position},src:d.value.lazySrc,alt:t.alt,crossorigin:t.crossorigin,referrerpolicy:t.referrerpolicy,draggable:t.draggable},null)]}),M=()=>n.placeholder?ue(Sd,{transition:t.transition,appear:!0},{default:()=>[(u.value==="loading"||u.value==="error"&&!n.error)&&ue("div",{class:"v-img__placeholder"},[n.placeholder()])]}):null,N=()=>n.error?ue(Sd,{transition:t.transition,appear:!0},{default:()=>[u.value==="error"&&ue("div",{class:"v-img__error"},[n.error()])]}):null,Y=()=>t.gradient?ue("div",{class:"v-img__gradient",style:{backgroundImage:`linear-gradient(${t.gradient})`}},null):null,H=ur(!1);{const E=cr(g,k=>{k&&(requestAnimationFrame(()=>{requestAnimationFrame(()=>{H.value=!0})}),E())})}return _r(()=>{const E=QY.filterProps(t);return $a(ue(QY,gr({class:["v-img",{"v-img--absolute":t.absolute,"v-img--booting":!H.value},i.value,a.value,t.class],style:[{width:br(t.width==="auto"?f.value:t.width)},s.value,t.style]},E,{aspectRatio:g.value,"aria-label":t.alt,role:t.alt?"img":void 0}),{additional:()=>ue(qr,null,[ue(C,null,null),ue(R,null,null),ue(Y,null,null),ue(M,null,null),ue(N,null,null)]),default:n.default}),[[J1("intersect"),{handler:p,options:t.options},null,{once:!0}]])}),{currentSrc:c,image:l,state:u,naturalWidth:f,naturalHeight:h}}}),hUe=_t({start:Boolean,end:Boolean,icon:ri,image:String,text:String,...ip(),...Or(),...gh(),...Ju(),...u6(),...ps(),...$s(),...ap({variant:"flat"})},"VAvatar"),Wg=Yt()({name:"VAvatar",props:hUe(),setup(t,e){let{slots:r}=e;const{themeClasses:n}=va(t),{borderClasses:i}=sp(t),{colorClasses:s,colorStyles:a,variantClasses:o}=l6(t),{densityClasses:c}=a0(t),{roundedClasses:l}=Qu(t),{sizeClasses:u,sizeStyles:f}=f6(t);return _r(()=>ue(t.tag,{class:["v-avatar",{"v-avatar--start":t.start,"v-avatar--end":t.end},n.value,i.value,s.value,c.value,l.value,u.value,o.value,t.class],style:[a.value,f.value,t.style]},{default:()=>[r.default?ue(Xs,{key:"content-defaults",defaults:{VImg:{cover:!0,src:t.image},VIcon:{icon:t.icon}}},{default:()=>[r.default()]}):t.image?ue(Hy,{key:"image",src:t.image,alt:"",cover:!0},null):t.icon?ue(Fn,{key:"icon",icon:t.icon},null):t.text,c6(!1,"v-avatar")]})),{}}}),dUe=_t({active:{type:Boolean,default:void 0},activeClass:String,activeColor:String,appendAvatar:String,appendIcon:ri,baseColor:String,disabled:Boolean,lines:[Boolean,String],link:{type:Boolean,default:void 0},nav:Boolean,prependAvatar:String,prependIcon:ri,ripple:{type:[Boolean,Object],default:!0},slim:Boolean,subtitle:[String,Number],title:[String,Number],value:null,onClick:_c(),onClickOnce:_c(),...ip(),...Or(),...gh(),...mh(),...Im(),...Ju(),...TS(),...ps(),...$s(),...ap({variant:"text"})},"VListItem"),Uo=Yt()({name:"VListItem",directives:{Ripple:h6},props:dUe(),emits:{click:t=>!0},setup(t,e){let{attrs:r,slots:n,emit:i}=e;const s=AS(t,r),a=Te(()=>t.value===void 0?s.href.value:t.value),{activate:o,isActivated:c,select:l,isOpen:u,isSelected:f,isIndeterminate:h,isGroupActivator:d,root:g,parent:p,openOnSelect:m,id:y}=Ofe(a,!1),v=Ife(),_=Te(()=>t.active!==!1&&(t.active||s.isActive?.value||(g.activatable.value?c.value:f.value))),x=Te(()=>t.link!==!1&&s.isLink.value),A=Te(()=>!t.disabled&&t.link!==!1&&(t.link||s.isClickable.value||!!v&&(g.selectable.value||g.activatable.value||t.value!=null))),C=Te(()=>t.rounded||t.nav),R=Te(()=>t.color??t.activeColor),M=Te(()=>({color:_.value?R.value??t.baseColor:t.baseColor,variant:t.variant}));cr(()=>s.isActive?.value,B=>{B&&p.value!=null&&g.open(p.value,!0),B&&m(B)},{immediate:!0});const{themeClasses:N}=va(t),{borderClasses:Y}=sp(t),{colorClasses:H,colorStyles:E,variantClasses:k}=l6(M),{densityClasses:w}=a0(t),{dimensionStyles:T}=yh(t),{elevationClasses:L}=Rm(t),{roundedClasses:I}=Qu(C),U=Te(()=>t.lines?`v-list-item--${t.lines}-line`:void 0),O=Te(()=>({isActive:_.value,select:l,isOpen:u.value,isSelected:f.value,isIndeterminate:h.value}));function D(B){i("click",B),A.value&&(s.navigate?.(B),!d&&(g.activatable.value?o(!c.value,B):(g.selectable.value||t.value!=null)&&l(!f.value,B)))}function P(B){(B.key==="Enter"||B.key===" ")&&(B.preventDefault(),B.target.dispatchEvent(new MouseEvent("click",B)))}return _r(()=>{const B=x.value?"a":t.tag,z=n.title||t.title!=null,F=n.subtitle||t.subtitle!=null,X=!!(t.appendAvatar||t.appendIcon),W=!!(X||n.append),q=!!(t.prependAvatar||t.prependIcon),G=!!(q||n.prepend);return v?.updateHasPrepend(G),t.activeColor&&qTe("active-color",["color","base-color"]),$a(ue(B,gr({class:["v-list-item",{"v-list-item--active":_.value,"v-list-item--disabled":t.disabled,"v-list-item--link":A.value,"v-list-item--nav":t.nav,"v-list-item--prepend":!G&&v?.hasPrepend.value,"v-list-item--slim":t.slim,[`${t.activeClass}`]:t.activeClass&&_.value},N.value,Y.value,H.value,w.value,L.value,U.value,I.value,k.value,t.class],style:[E.value,T.value,t.style],tabindex:A.value?v?-2:0:void 0,onClick:D,onKeydown:A.value&&!x.value&&P},s.linkProps),{default:()=>[c6(A.value||_.value,"v-list-item"),G&&ue("div",{key:"prepend",class:"v-list-item__prepend"},[n.prepend?ue(Xs,{key:"prepend-defaults",disabled:!q,defaults:{VAvatar:{density:t.density,image:t.prependAvatar},VIcon:{density:t.density,icon:t.prependIcon},VListItemAction:{start:!0}}},{default:()=>[n.prepend?.(O.value)]}):ue(qr,null,[t.prependAvatar&&ue(Wg,{key:"prepend-avatar",density:t.density,image:t.prependAvatar},null),t.prependIcon&&ue(Fn,{key:"prepend-icon",density:t.density,icon:t.prependIcon},null)]),ue("div",{class:"v-list-item__spacer"},null)]),ue("div",{class:"v-list-item__content","data-no-activator":""},[z&&ue(cUe,{key:"title"},{default:()=>[n.title?.({title:t.title})??t.title]}),F&&ue(oUe,{key:"subtitle"},{default:()=>[n.subtitle?.({subtitle:t.subtitle})??t.subtitle]}),n.default?.(O.value)]),W&&ue("div",{key:"append",class:"v-list-item__append"},[n.append?ue(Xs,{key:"append-defaults",disabled:!X,defaults:{VAvatar:{density:t.density,image:t.appendAvatar},VIcon:{density:t.density,icon:t.appendIcon},VListItemAction:{end:!0}}},{default:()=>[n.append?.(O.value)]}):ue(qr,null,[t.appendIcon&&ue(Fn,{key:"append-icon",density:t.density,icon:t.appendIcon},null),t.appendAvatar&&ue(Wg,{key:"append-avatar",density:t.density,image:t.appendAvatar},null)]),ue("div",{class:"v-list-item__spacer"},null)])]}),[[J1("ripple"),A.value&&t.ripple]])}),{activate:o,isActivated:c,isGroupActivator:d,isSelected:f,list:v,select:l,root:g,id:y}}}),pUe=_t({color:String,inset:Boolean,sticky:Boolean,title:String,...Or(),...ps()},"VListSubheader"),Uw=Yt()({name:"VListSubheader",props:pUe(),setup(t,e){let{slots:r}=e;const{textColorClasses:n,textColorStyles:i}=Gd(or(t,"color"));return _r(()=>{const s=!!(r.default||t.title);return ue(t.tag,{class:["v-list-subheader",{"v-list-subheader--inset":t.inset,"v-list-subheader--sticky":t.sticky},n.value,t.class],style:[{textColorStyles:i},t.style]},{default:()=>[s&&ue("div",{class:"v-list-subheader__text"},[r.default?.()??t.title])]})}),{}}}),gUe=_t({color:String,inset:Boolean,length:[Number,String],opacity:[Number,String],thickness:[Number,String],vertical:Boolean,...Or(),...$s()},"VDivider"),Ffe=Yt()({name:"VDivider",props:gUe(),setup(t,e){let{attrs:r,slots:n}=e;const{themeClasses:i}=va(t),{textColorClasses:s,textColorStyles:a}=Gd(or(t,"color")),o=Te(()=>{const c={};return t.length&&(c[t.vertical?"height":"width"]=br(t.length)),t.thickness&&(c[t.vertical?"borderRightWidth":"borderTopWidth"]=br(t.thickness)),c});return _r(()=>{const c=ue("hr",{class:[{"v-divider":!0,"v-divider--inset":t.inset,"v-divider--vertical":t.vertical},i.value,s.value,t.class],style:[o.value,a.value,{"--v-border-opacity":t.opacity},t.style],"aria-orientation":!r.role||r.role==="separator"?t.vertical?"vertical":"horizontal":void 0,role:`${r.role||"separator"}`},null);return n.default?ue("div",{class:["v-divider__wrapper",{"v-divider__wrapper--vertical":t.vertical,"v-divider__wrapper--inset":t.inset}]},[c,ue("div",{class:"v-divider__content"},[n.default()]),c]):c}),{}}}),mUe=_t({items:Array,returnObject:Boolean},"VListChildren"),$fe=Yt()({name:"VListChildren",props:mUe(),setup(t,e){let{slots:r}=e;return Cfe(),()=>r.default?.()??t.items?.map(n=>{let{children:i,props:s,type:a,raw:o}=n;if(a==="divider")return r.divider?.({props:s})??ue(Ffe,s,null);if(a==="subheader")return r.subheader?.({props:s})??ue(Uw,s,null);const c={subtitle:r.subtitle?u=>r.subtitle?.({...u,item:o}):void 0,prepend:r.prepend?u=>r.prepend?.({...u,item:o}):void 0,append:r.append?u=>r.append?.({...u,item:o}):void 0,title:r.title?u=>r.title?.({...u,item:o}):void 0},l=JY.filterProps(s);return i?ue(JY,gr({value:s?.value},l),{activator:u=>{let{props:f}=u;const h={...s,...f,value:t.returnObject?o:s.value};return r.header?r.header({props:h}):ue(Uo,h,c)},default:()=>ue($fe,{items:i,returnObject:t.returnObject},r)}):r.item?r.item({props:s}):ue(Uo,gr(s,{value:t.returnObject?o:s.value}),c)})}}),Ufe=_t({items:{type:Array,default:()=>[]},itemTitle:{type:[String,Array,Function],default:"title"},itemValue:{type:[String,Array,Function],default:"value"},itemChildren:{type:[Boolean,String,Array,Function],default:"children"},itemProps:{type:[Boolean,String,Array,Function],default:"props"},returnObject:Boolean,valueComparator:{type:Function,default:Vv}},"list-items");function pO(t,e){const r=yd(e,t.itemTitle,e),n=yd(e,t.itemValue,r),i=yd(e,t.itemChildren),s=t.itemProps===!0?typeof e=="object"&&e!=null&&!Array.isArray(e)?"children"in e?jv(e,["children"]):e:void 0:yd(e,t.itemProps),a={title:r,value:n,...s};return{title:String(a.title??""),value:a.value,props:a,children:Array.isArray(i)?Vfe(t,i):void 0,raw:e}}function Vfe(t,e){const r=[];for(const n of e)r.push(pO(t,n));return r}function yUe(t){const e=Te(()=>Vfe(t,t.items)),r=Te(()=>e.value.some(s=>s.value===null));function n(s){return r.value||(s=s.filter(a=>a!==null)),s.map(a=>t.returnObject&&typeof a=="string"?pO(t,a):e.value.find(o=>t.valueComparator(a,o.value))||pO(t,a))}function i(s){return t.returnObject?s.map(a=>{let{raw:o}=a;return o}):s.map(a=>{let{value:o}=a;return o})}return{items:e,transformIn:n,transformOut:i}}function vUe(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"}function bUe(t,e){const r=yd(e,t.itemType,"item"),n=vUe(e)?e:yd(e,t.itemTitle),i=yd(e,t.itemValue,void 0),s=yd(e,t.itemChildren),a=t.itemProps===!0?jv(e,["children"]):yd(e,t.itemProps),o={title:n,value:i,...a};return{type:r,title:o.title,value:o.value,props:o,children:r==="item"&&s?jfe(t,s):void 0,raw:e}}function jfe(t,e){const r=[];for(const n of e)r.push(bUe(t,n));return r}function wUe(t){return{items:Te(()=>jfe(t,t.items))}}const _Ue=_t({baseColor:String,activeColor:String,activeClass:String,bgColor:String,disabled:Boolean,expandIcon:String,collapseIcon:String,lines:{type:[Boolean,String],default:"one"},slim:Boolean,nav:Boolean,"onClick:open":_c(),"onClick:select":_c(),"onUpdate:opened":_c(),...tUe({selectStrategy:"single-leaf",openStrategy:"list"}),...ip(),...Or(),...gh(),...mh(),...Im(),itemType:{type:String,default:"type"},...Ufe(),...Ju(),...ps(),...$s(),...ap({variant:"text"})},"VList"),Wy=Yt()({name:"VList",props:_Ue(),emits:{"update:selected":t=>!0,"update:activated":t=>!0,"update:opened":t=>!0,"click:open":t=>!0,"click:activate":t=>!0,"click:select":t=>!0},setup(t,e){let{slots:r}=e;const{items:n}=wUe(t),{themeClasses:i}=va(t),{backgroundColorClasses:s,backgroundColorStyles:a}=Od(or(t,"bgColor")),{borderClasses:o}=sp(t),{densityClasses:c}=a0(t),{dimensionStyles:l}=yh(t),{elevationClasses:u}=Rm(t),{roundedClasses:f}=Qu(t),{children:h,open:d,parents:g,select:p,getPath:m}=rUe(t),y=Te(()=>t.lines?`v-list--${t.lines}-line`:void 0),v=or(t,"activeColor"),_=or(t,"baseColor"),x=or(t,"color");Cfe(),zv({VListGroup:{activeColor:v,baseColor:_,color:x,expandIcon:or(t,"expandIcon"),collapseIcon:or(t,"collapseIcon")},VListItem:{activeClass:or(t,"activeClass"),activeColor:v,baseColor:_,color:x,density:or(t,"density"),disabled:or(t,"disabled"),lines:or(t,"lines"),nav:or(t,"nav"),slim:or(t,"slim"),variant:or(t,"variant")}});const A=ur(!1),C=ht();function R(k){A.value=!0}function M(k){A.value=!1}function N(k){!A.value&&!(k.relatedTarget&&C.value?.contains(k.relatedTarget))&&E()}function Y(k){const w=k.target;if(!(!C.value||["INPUT","TEXTAREA"].includes(w.tagName))){if(k.key==="ArrowDown")E("next");else if(k.key==="ArrowUp")E("prev");else if(k.key==="Home")E("first");else if(k.key==="End")E("last");else return;k.preventDefault()}}function H(k){A.value=!0}function E(k){if(C.value)return u3(C.value,k)}return _r(()=>ue(t.tag,{ref:C,class:["v-list",{"v-list--disabled":t.disabled,"v-list--nav":t.nav,"v-list--slim":t.slim},i.value,s.value,o.value,c.value,u.value,y.value,f.value,t.class],style:[a.value,l.value,t.style],tabindex:t.disabled||A.value?-1:0,role:"listbox","aria-activedescendant":void 0,onFocusin:R,onFocusout:M,onFocus:N,onKeydown:Y,onMousedown:H},{default:()=>[ue($fe,{items:n.value,returnObject:t.returnObject},r)]})),{open:d,select:p,focus:E,children:h,parents:g,getPath:m}}}),xUe=Di({__name:"ItemLangueProgrès",props:{code:{},selectionnee:{type:Boolean}},setup(t){const e=t,{கிடைக்கும்_மொழிகளை_பயன்படுத்து:r,மொழி_முன்னேற்றத்தை_பயன்படுத்து:n}=s0(),{மொழியின்_பெயர்:i}=r({}),{மொழி_முன்னேற்றம்:s}=n({மொழி:e.code,வகை:"வார்த்தை"}),a=Te(()=>(s.value?.அங்கீகரிக்கப்பட்டவை||0)/(s.value?.மொத்தம்||0)),o=i(e.code);return(c,l)=>(pr(),Qr(Uo,null,{prepend:mt(()=>[c.selectionnee?(pr(),Qr(Fn,{key:0,color:"primary"},{default:mt(()=>l[0]||(l[0]=[Mn(" mdi-check-bold ")])),_:1})):qo("",!0)]),title:mt(()=>[Mn(xi(ct(o)||c.code),1)]),append:mt(()=>[a.value===1?(pr(),Qr(Fn,{key:0,color:"primary"},{default:mt(()=>l[1]||(l[1]=[Mn(" mdi-check-circle ")])),_:1})):(pr(),Qr(kF,{key:1,"model-value":a.value*100,size:"20",color:"primary"},null,8,["model-value"]))]),_:1}))}});function BC(t,e){return{x:t.x+e.x,y:t.y+e.y}}function EUe(t,e){return{x:t.x-e.x,y:t.y-e.y}}function eX(t,e){if(t.side==="top"||t.side==="bottom"){const{side:r,align:n}=t,i=n==="left"?0:n==="center"?e.width/2:n==="right"?e.width:n,s=r==="top"?0:r==="bottom"?e.height:r;return BC({x:i,y:s},e)}else if(t.side==="left"||t.side==="right"){const{side:r,align:n}=t,i=r==="left"?0:r==="right"?e.width:r,s=n==="top"?0:n==="center"?e.height/2:n==="bottom"?e.height:n;return BC({x:i,y:s},e)}return BC({x:e.width/2,y:e.height/2},e)}const zfe={static:TUe,connected:CUe},SUe=_t({locationStrategy:{type:[String,Function],default:"static",validator:t=>typeof t=="function"||t in zfe},location:{type:String,default:"bottom"},origin:{type:String,default:"auto"},offset:[Number,String,Array]},"VOverlay-location-strategies");function AUe(t,e){const r=ht({}),n=ht();qn&&zg(()=>!!(e.isActive.value&&t.locationStrategy),s=>{cr(()=>t.locationStrategy,s),Pc(()=>{window.removeEventListener("resize",i),n.value=void 0}),window.addEventListener("resize",i,{passive:!0}),typeof t.locationStrategy=="function"?n.value=t.locationStrategy(e,t,r)?.updateLocation:n.value=zfe[t.locationStrategy](e,t,r)?.updateLocation});function i(s){n.value?.(s)}return{contentStyles:r,updateLocation:n}}function TUe(){}function kUe(t,e){const r=OL(t);return e?r.x+=parseFloat(t.style.right||0):r.x-=parseFloat(t.style.left||0),r.y-=parseFloat(t.style.top||0),r}function CUe(t,e,r){(Array.isArray(t.target.value)||hke(t.target.value))&&Object.assign(r.value,{position:"fixed",top:0,[t.isRtl.value?"right":"left"]:0});const{preferredAnchor:i,preferredOrigin:s}=DL(()=>{const g=bD(e.location,t.isRtl.value),p=e.origin==="overlap"?g:e.origin==="auto"?eC(g):bD(e.origin,t.isRtl.value);return g.side===p.side&&g.align===tC(p).align?{preferredAnchor:fK(g),preferredOrigin:fK(p)}:{preferredAnchor:g,preferredOrigin:p}}),[a,o,c,l]=["minWidth","minHeight","maxWidth","maxHeight"].map(g=>Te(()=>{const p=parseFloat(e[g]);return isNaN(p)?1/0:p})),u=Te(()=>{if(Array.isArray(e.offset))return e.offset;if(typeof e.offset=="string"){const g=e.offset.split(" ").map(parseFloat);return g.length<2&&g.push(0),g}return typeof e.offset=="number"?[e.offset,0]:[0,0]});let f=!1;const h=new ResizeObserver(()=>{f&&d()});cr([t.target,t.contentEl],(g,p)=>{let[m,y]=g,[v,_]=p;v&&!Array.isArray(v)&&h.unobserve(v),m&&!Array.isArray(m)&&h.observe(m),_&&h.unobserve(_),y&&h.observe(y)},{immediate:!0}),Pc(()=>{h.disconnect()});function d(){if(f=!1,requestAnimationFrame(()=>f=!0),!t.target.value||!t.contentEl.value)return;const g=Zoe(t.target.value),p=kUe(t.contentEl.value,t.isRtl.value),m=g7(t.contentEl.value),y=12;m.length||(m.push(document.documentElement),t.contentEl.value.style.top&&t.contentEl.value.style.left||(p.x-=parseFloat(document.documentElement.style.getPropertyValue("--v-body-scroll-x")||0),p.y-=parseFloat(document.documentElement.style.getPropertyValue("--v-body-scroll-y")||0)));const v=m.reduce((H,E)=>{const k=E.getBoundingClientRect(),w=new _g({x:E===document.documentElement?0:k.x,y:E===document.documentElement?0:k.y,width:E.clientWidth,height:E.clientHeight});return H?new _g({x:Math.max(H.left,w.left),y:Math.max(H.top,w.top),width:Math.min(H.right,w.right)-Math.max(H.left,w.left),height:Math.min(H.bottom,w.bottom)-Math.max(H.top,w.top)}):w},void 0);v.x+=y,v.y+=y,v.width-=y*2,v.height-=y*2;let _={anchor:i.value,origin:s.value};function x(H){const E=new _g(p),k=eX(H.anchor,g),w=eX(H.origin,E);let{x:T,y:L}=EUe(k,w);switch(H.anchor.side){case"top":L-=u.value[0];break;case"bottom":L+=u.value[0];break;case"left":T-=u.value[0];break;case"right":T+=u.value[0];break}switch(H.anchor.align){case"top":L-=u.value[1];break;case"bottom":L+=u.value[1];break;case"left":T-=u.value[1];break;case"right":T+=u.value[1];break}return E.x+=T,E.y+=L,E.width=Math.min(E.width,c.value),E.height=Math.min(E.height,l.value),{overflows:dK(E,v),x:T,y:L}}let A=0,C=0;const R={x:0,y:0},M={x:!1,y:!1};let N=-1;for(;!(N++>10);){const{x:H,y:E,overflows:k}=x(_);A+=H,C+=E,p.x+=H,p.y+=E;{const w=hK(_.anchor),T=k.x.before||k.x.after,L=k.y.before||k.y.after;let I=!1;if(["x","y"].forEach(U=>{if(U==="x"&&T&&!M.x||U==="y"&&L&&!M.y){const O={anchor:{..._.anchor},origin:{..._.origin}},D=U==="x"?w==="y"?tC:eC:w==="y"?eC:tC;O.anchor=D(O.anchor),O.origin=D(O.origin);const{overflows:P}=x(O);(P[U].before<=k[U].before&&P[U].after<=k[U].after||P[U].before+P[U].after<(k[U].before+k[U].after)/2)&&(_=O,I=M[U]=!0)}}),I)continue}k.x.before&&(A+=k.x.before,p.x+=k.x.before),k.x.after&&(A-=k.x.after,p.x-=k.x.after),k.y.before&&(C+=k.y.before,p.y+=k.y.before),k.y.after&&(C-=k.y.after,p.y-=k.y.after);{const w=dK(p,v);R.x=v.width-w.x.before-w.x.after,R.y=v.height-w.y.before-w.y.after,A+=w.x.before,p.x+=w.x.before,C+=w.y.before,p.y+=w.y.before}break}const Y=hK(_.anchor);return Object.assign(r.value,{"--v-overlay-anchor-origin":`${_.anchor.side} ${_.anchor.align}`,transformOrigin:`${_.origin.side} ${_.origin.align}`,top:br(DC(C)),left:t.isRtl.value?void 0:br(DC(A)),right:t.isRtl.value?br(DC(-A)):void 0,minWidth:br(Y==="y"?Math.min(a.value,g.width):a.value),maxWidth:br(tX(Dd(R.x,a.value===1/0?0:a.value,c.value))),maxHeight:br(tX(Dd(R.y,o.value===1/0?0:o.value,l.value)))}),{available:R,contentBox:p}}return cr(()=>[i.value,s.value,e.offset,e.minWidth,e.minHeight,e.maxWidth,e.maxHeight],()=>d()),Bi(()=>{const g=d();if(!g)return;const{available:p,contentBox:m}=g;m.height>p.y&&requestAnimationFrame(()=>{d(),requestAnimationFrame(()=>{d()})})}),{updateLocation:d}}function DC(t){return Math.round(t*devicePixelRatio)/devicePixelRatio}function tX(t){return Math.ceil(t*devicePixelRatio)/devicePixelRatio}let gO=!0;const U7=[];function IUe(t){!gO||U7.length?(U7.push(t),mO()):(gO=!1,t(),mO())}let rX=-1;function mO(){cancelAnimationFrame(rX),rX=requestAnimationFrame(()=>{const t=U7.shift();t&&t(),U7.length?mO():gO=!0})}const qfe={none:null,close:BUe,block:DUe,reposition:OUe},RUe=_t({scrollStrategy:{type:[String,Function],default:"block",validator:t=>typeof t=="function"||t in qfe}},"VOverlay-scroll-strategies");function PUe(t,e){if(!qn)return;let r;Qs(async()=>{r?.stop(),e.isActive.value&&t.scrollStrategy&&(r=aL(),await new Promise(n=>setTimeout(n)),r.active&&r.run(()=>{typeof t.scrollStrategy=="function"?t.scrollStrategy(e,t,r):qfe[t.scrollStrategy]?.(e,t,r)}))}),Pc(()=>{r?.stop()})}function BUe(t){function e(r){t.isActive.value=!1}Hfe(t.targetEl.value??t.contentEl.value,e)}function DUe(t,e){const r=t.root.value?.offsetParent,n=[...new Set([...g7(t.targetEl.value,e.contained?r:void 0),...g7(t.contentEl.value,e.contained?r:void 0)])].filter(a=>!a.classList.contains("v-overlay-scroll-blocked")),i=window.innerWidth-document.documentElement.offsetWidth,s=(a=>FL(a)&&a)(r||document.documentElement);s&&t.root.value.classList.add("v-overlay--scroll-blocked"),n.forEach((a,o)=>{a.style.setProperty("--v-body-scroll-x",br(-a.scrollLeft)),a.style.setProperty("--v-body-scroll-y",br(-a.scrollTop)),a!==document.documentElement&&a.style.setProperty("--v-scrollbar-offset",br(i)),a.classList.add("v-overlay-scroll-blocked")}),Pc(()=>{n.forEach((a,o)=>{const c=parseFloat(a.style.getPropertyValue("--v-body-scroll-x")),l=parseFloat(a.style.getPropertyValue("--v-body-scroll-y")),u=a.style.scrollBehavior;a.style.scrollBehavior="auto",a.style.removeProperty("--v-body-scroll-x"),a.style.removeProperty("--v-body-scroll-y"),a.style.removeProperty("--v-scrollbar-offset"),a.classList.remove("v-overlay-scroll-blocked"),a.scrollLeft=-c,a.scrollTop=-l,a.style.scrollBehavior=u}),s&&t.root.value.classList.remove("v-overlay--scroll-blocked")})}function OUe(t,e,r){let n=!1,i=-1,s=-1;function a(o){IUe(()=>{const c=performance.now();t.updateLocation.value?.(o),n=(performance.now()-c)/(1e3/60)>2})}s=(typeof requestIdleCallback>"u"?o=>o():requestIdleCallback)(()=>{r.run(()=>{Hfe(t.targetEl.value??t.contentEl.value,o=>{n?(cancelAnimationFrame(i),i=requestAnimationFrame(()=>{i=requestAnimationFrame(()=>{a(o)})})):a(o)})})}),Pc(()=>{typeof cancelIdleCallback<"u"&&cancelIdleCallback(s),cancelAnimationFrame(i)})}function Hfe(t,e){const r=[document,...g7(t)];r.forEach(n=>{n.addEventListener("scroll",e,{passive:!0})}),Pc(()=>{r.forEach(n=>{n.removeEventListener("scroll",e)})})}const yO=Symbol.for("vuetify:v-menu"),NUe=_t({closeDelay:[Number,String],openDelay:[Number,String]},"delay");function MUe(t,e){let r=()=>{};function n(a){r?.();const o=Number(a?t.openDelay:t.closeDelay);return new Promise(c=>{r=BTe(o,()=>{e?.(a),c(a)})})}function i(){return n(!0)}function s(){return n(!1)}return{clearDelay:r,runOpenDelay:i,runCloseDelay:s}}const LUe=_t({target:[String,Object],activator:[String,Object],activatorProps:{type:Object,default:()=>({})},openOnClick:{type:Boolean,default:void 0},openOnHover:Boolean,openOnFocus:{type:Boolean,default:void 0},closeOnContentClick:Boolean,...NUe()},"VOverlay-activator");function FUe(t,e){let{isActive:r,isTop:n,contentEl:i}=e;const s=Fs("useActivator"),a=ht();let o=!1,c=!1,l=!0;const u=Te(()=>t.openOnFocus||t.openOnFocus==null&&t.openOnHover),f=Te(()=>t.openOnClick||t.openOnClick==null&&!t.openOnHover&&!u.value),{runOpenDelay:h,runCloseDelay:d}=MUe(t,M=>{M===(t.openOnHover&&o||u.value&&c)&&!(t.openOnHover&&r.value&&!n.value)&&(r.value!==M&&(l=!0),r.value=M)}),g=ht(),p={onClick:M=>{M.stopPropagation(),a.value=M.currentTarget||M.target,r.value||(g.value=[M.clientX,M.clientY]),r.value=!r.value},onMouseenter:M=>{M.sourceCapabilities?.firesTouchEvents||(o=!0,a.value=M.currentTarget||M.target,h())},onMouseleave:M=>{o=!1,d()},onFocus:M=>{h7(M.target,":focus-visible")!==!1&&(c=!0,M.stopPropagation(),a.value=M.currentTarget||M.target,h())},onBlur:M=>{c=!1,M.stopPropagation(),d()}},m=Te(()=>{const M={};return f.value&&(M.onClick=p.onClick),t.openOnHover&&(M.onMouseenter=p.onMouseenter,M.onMouseleave=p.onMouseleave),u.value&&(M.onFocus=p.onFocus,M.onBlur=p.onBlur),M}),y=Te(()=>{const M={};if(t.openOnHover&&(M.onMouseenter=()=>{o=!0,h()},M.onMouseleave=()=>{o=!1,d()}),u.value&&(M.onFocusin=()=>{c=!0,h()},M.onFocusout=()=>{c=!1,d()}),t.closeOnContentClick){const N=Rr(yO,null);M.onClick=()=>{r.value=!1,N?.closeParents()}}return M}),v=Te(()=>{const M={};return t.openOnHover&&(M.onMouseenter=()=>{l&&(o=!0,l=!1,h())},M.onMouseleave=()=>{o=!1,d()}),M});cr(n,M=>{M&&(t.openOnHover&&!o&&(!u.value||!c)||u.value&&!c&&(!t.openOnHover||!o))&&!i.value?.contains(document.activeElement)&&(r.value=!1)}),cr(r,M=>{M||setTimeout(()=>{g.value=void 0})},{flush:"post"});const _=vD();Qs(()=>{_.value&&Bi(()=>{a.value=_.el})});const x=vD(),A=Te(()=>t.target==="cursor"&&g.value?g.value:x.value?x.el:Wfe(t.target,s)||a.value),C=Te(()=>Array.isArray(A.value)?void 0:A.value);let R;return cr(()=>!!t.activator,M=>{M&&qn?(R=aL(),R.run(()=>{$Ue(t,s,{activatorEl:a,activatorEvents:m})})):R&&R.stop()},{flush:"post",immediate:!0}),Pc(()=>{R?.stop()}),{activatorEl:a,activatorRef:_,target:A,targetEl:C,targetRef:x,activatorEvents:m,contentEvents:y,scrimEvents:v}}function $Ue(t,e,r){let{activatorEl:n,activatorEvents:i}=r;cr(()=>t.activator,(c,l)=>{if(l&&c!==l){const u=o(l);u&&a(u)}c&&Bi(()=>s())},{immediate:!0}),cr(()=>t.activatorProps,()=>{s()}),Pc(()=>{a()});function s(){let c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:o(),l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t.activatorProps;c&&NTe(c,gr(i.value,l))}function a(){let c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:o(),l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t.activatorProps;c&&MTe(c,gr(i.value,l))}function o(){let c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:t.activator;const l=Wfe(c,e);return n.value=l?.nodeType===Node.ELEMENT_NODE?l:void 0,n.value}}function Wfe(t,e){if(!t)return;let r;if(t==="parent"){let n=e?.proxy?.$el?.parentNode;for(;n?.hasAttribute("data-no-activator");)n=n.parentNode;r=n}else typeof t=="string"?r=document.querySelector(t):"$el"in t?r=t.$el:r=t;return r}function UUe(){if(!qn)return ur(!1);const{ssr:t}=n0();if(t){const e=ur(!1);return Ai(()=>{e.value=!0}),e}else return ur(!0)}function FF(){const e=Fs("useScopeId").vnode.scopeId;return{scopeId:e?{[e]:""}:void 0}}const nX=Symbol.for("vuetify:stack"),aw=Ps([]);function VUe(t,e,r){const n=Fs("useStack"),i=!r,s=Rr(nX,void 0),a=Ps({activeChildren:new Set});ui(nX,a);const o=ur(+e.value);zg(t,()=>{const u=aw.at(-1)?.[1];o.value=u?u+10:+e.value,i&&aw.push([n.uid,o.value]),s?.activeChildren.add(n.uid),Pc(()=>{if(i){const f=rr(aw).findIndex(h=>h[0]===n.uid);aw.splice(f,1)}s?.activeChildren.delete(n.uid)})});const c=ur(!0);i&&Qs(()=>{const u=aw.at(-1)?.[0]===n.uid;setTimeout(()=>c.value=u)});const l=Te(()=>!a.activeChildren.size);return{globalTop:J4(c),localTop:l,stackStyles:Te(()=>({zIndex:o.value}))}}function jUe(t){return{teleportTarget:Te(()=>{const r=t();if(r===!0||!qn)return;const n=r===!1?document.body:typeof r=="string"?document.querySelector(r):r;if(n==null)return;let i=[...n.children].find(s=>s.matches(".v-overlay-container"));return i||(i=document.createElement("div"),i.className="v-overlay-container",n.appendChild(i)),i})}}function zUe(){return!0}function Kfe(t,e,r){if(!t||Gfe(t,r)===!1)return!1;const n=ice(e);if(typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&n.host===t.target)return!1;const i=(typeof r.value=="object"&&r.value.include||(()=>[]))();return i.push(e),!i.some(s=>s?.contains(t.target))}function Gfe(t,e){return(typeof e.value=="object"&&e.value.closeConditional||zUe)(t)}function qUe(t,e,r){const n=typeof r.value=="function"?r.value:r.value.handler;t.shadowTarget=t.target,e._clickOutside.lastMousedownWasOutside&&Kfe(t,e,r)&&setTimeout(()=>{Gfe(t,r)&&n&&n(t)},0)}function iX(t,e){const r=ice(t);e(document),typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&e(r)}const HUe={mounted(t,e){const r=i=>qUe(i,t,e),n=i=>{t._clickOutside.lastMousedownWasOutside=Kfe(i,t,e)};iX(t,i=>{i.addEventListener("click",r,!0),i.addEventListener("mousedown",n,!0)}),t._clickOutside||(t._clickOutside={lastMousedownWasOutside:!1}),t._clickOutside[e.instance.$.uid]={onClick:r,onMousedown:n}},beforeUnmount(t,e){t._clickOutside&&(iX(t,r=>{if(!r||!t._clickOutside?.[e.instance.$.uid])return;const{onClick:n,onMousedown:i}=t._clickOutside[e.instance.$.uid];r.removeEventListener("click",n,!0),r.removeEventListener("mousedown",i,!0)}),delete t._clickOutside[e.instance.$.uid])}};function WUe(t){const{modelValue:e,color:r,...n}=t;return ue(L1,{name:"fade-transition",appear:!0},{default:()=>[t.modelValue&&ue("div",gr({class:["v-overlay__scrim",t.color.backgroundColorClasses.value],style:t.color.backgroundColorStyles.value},n),null)]})}const $F=_t({absolute:Boolean,attach:[Boolean,String,Object],closeOnBack:{type:Boolean,default:!0},contained:Boolean,contentClass:null,contentProps:null,disabled:Boolean,opacity:[Number,String],noClickAnimation:Boolean,modelValue:Boolean,persistent:Boolean,scrim:{type:[Boolean,String],default:!0},zIndex:{type:[Number,String],default:2e3},...LUe(),...Or(),...mh(),...xfe(),...SUe(),...RUe(),...$s(),...d6()},"VOverlay"),V7=Yt()({name:"VOverlay",directives:{ClickOutside:HUe},inheritAttrs:!1,props:{_disableGlobalStack:Boolean,...$F()},emits:{"click:outside":t=>!0,"update:modelValue":t=>!0,afterEnter:()=>!0,afterLeave:()=>!0},setup(t,e){let{slots:r,attrs:n,emit:i}=e;const s=Fs("VOverlay"),a=ht(),o=ht(),c=ht(),l=xs(t,"modelValue"),u=Te({get:()=>l.value,set:W=>{W&&t.disabled||(l.value=W)}}),{themeClasses:f}=va(t),{rtlClasses:h,isRtl:d}=Gl(),{hasContent:g,onAfterLeave:p}=Efe(t,u),m=Od(Te(()=>typeof t.scrim=="string"?t.scrim:null)),{globalTop:y,localTop:v,stackStyles:_}=VUe(u,or(t,"zIndex"),t._disableGlobalStack),{activatorEl:x,activatorRef:A,target:C,targetEl:R,targetRef:M,activatorEvents:N,contentEvents:Y,scrimEvents:H}=FUe(t,{isActive:u,isTop:v,contentEl:c}),{teleportTarget:E}=jUe(()=>{const W=t.attach||t.contained;if(W)return W;const q=x?.value?.getRootNode()||s.proxy?.$el?.getRootNode();return q instanceof ShadowRoot?q:!1}),{dimensionStyles:k}=yh(t),w=UUe(),{scopeId:T}=FF();cr(()=>t.disabled,W=>{W&&(u.value=!1)});const{contentStyles:L,updateLocation:I}=AUe(t,{isRtl:d,contentEl:c,target:C,isActive:u});PUe(t,{root:a,contentEl:c,targetEl:R,isActive:u,updateLocation:I});function U(W){i("click:outside",W),t.persistent?z():u.value=!1}function O(W){return u.value&&y.value&&(!t.scrim||W.target===o.value||W instanceof MouseEvent&&W.shadowTarget===o.value)}qn&&cr(u,W=>{W?window.addEventListener("keydown",D):window.removeEventListener("keydown",D)},{immediate:!0}),bo(()=>{qn&&window.removeEventListener("keydown",D)});function D(W){W.key==="Escape"&&y.value&&(t.persistent?z():(u.value=!1,c.value?.contains(document.activeElement)&&x.value?.focus()))}const P=p$e();zg(()=>t.closeOnBack,()=>{g$e(P,W=>{y.value&&u.value?(W(!1),t.persistent?z():u.value=!1):W()})});const B=ht();cr(()=>u.value&&(t.absolute||t.contained)&&E.value==null,W=>{if(W){const q=sce(a.value);q&&q!==document.scrollingElement&&(B.value=q.scrollTop)}});function z(){t.noClickAnimation||c.value&&ry(c.value,[{transformOrigin:"center"},{transform:"scale(1.03)"},{transformOrigin:"center"}],{duration:150,easing:p7})}function F(){i("afterEnter")}function X(){p(),i("afterLeave")}return _r(()=>ue(qr,null,[r.activator?.({isActive:u.value,targetRef:M,props:gr({ref:A},N.value,t.activatorProps)}),w.value&&g.value&&ue(WSe,{disabled:!E.value,to:E.value},{default:()=>[ue("div",gr({class:["v-overlay",{"v-overlay--absolute":t.absolute||t.contained,"v-overlay--active":u.value,"v-overlay--contained":t.contained},f.value,h.value,t.class],style:[_.value,{"--v-overlay-opacity":t.opacity,top:br(B.value)},t.style],ref:a},T,n),[ue(WUe,gr({color:m,modelValue:u.value&&!!t.scrim,ref:o},H.value),null),ue(Sd,{appear:!0,persisted:!0,transition:t.transition,target:C.value,onAfterEnter:F,onAfterLeave:X},{default:()=>[$a(ue("div",gr({ref:c,class:["v-overlay__content",t.contentClass],style:[k.value,L.value]},Y.value,t.contentProps),[r.default?.({isActive:u})]),[[Kd,u.value],[J1("click-outside"),{handler:U,closeConditional:O,include:()=>[x.value]}]])]})])]})])),{activatorEl:x,scrimEl:o,target:C,animateClick:z,contentEl:c,globalTop:y,localTop:v,updateLocation:I}}}),OC=Symbol("Forwarded refs");function NC(t,e){let r=t;for(;r;){const n=Reflect.getOwnPropertyDescriptor(r,e);if(n)return n;r=Object.getPrototypeOf(r)}}function kS(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];return t[OC]=r,new Proxy(t,{get(i,s){if(Reflect.has(i,s))return Reflect.get(i,s);if(!(typeof s=="symbol"||s.startsWith("$")||s.startsWith("__"))){for(const a of r)if(a.value&&Reflect.has(a.value,s)){const o=Reflect.get(a.value,s);return typeof o=="function"?o.bind(a.value):o}}},has(i,s){if(Reflect.has(i,s))return!0;if(typeof s=="symbol"||s.startsWith("$")||s.startsWith("__"))return!1;for(const a of r)if(a.value&&Reflect.has(a.value,s))return!0;return!1},set(i,s,a){if(Reflect.has(i,s))return Reflect.set(i,s,a);if(typeof s=="symbol"||s.startsWith("$")||s.startsWith("__"))return!1;for(const o of r)if(o.value&&Reflect.has(o.value,s))return Reflect.set(o.value,s,a);return!1},getOwnPropertyDescriptor(i,s){const a=Reflect.getOwnPropertyDescriptor(i,s);if(a)return a;if(!(typeof s=="symbol"||s.startsWith("$")||s.startsWith("__"))){for(const o of r){if(!o.value)continue;const c=NC(o.value,s)??("_"in o.value?NC(o.value._?.setupState,s):void 0);if(c)return c}for(const o of r){const c=o.value&&o.value[OC];if(!c)continue;const l=c.slice();for(;l.length;){const u=l.shift(),f=NC(u.value,s);if(f)return f;const h=u.value&&u.value[OC];h&&l.push(...h)}}}}})}const KUe=_t({id:String,submenu:Boolean,...jv($F({closeDelay:250,closeOnContentClick:!0,locationStrategy:"connected",location:void 0,openDelay:300,scrim:!1,scrollStrategy:"reposition",transition:{component:NF}}),["absolute"])},"VMenu"),j7=Yt()({name:"VMenu",props:KUe(),emits:{"update:modelValue":t=>!0},setup(t,e){let{slots:r}=e;const n=xs(t,"modelValue"),{scopeId:i}=FF(),{isRtl:s}=Gl(),a=Zu(),o=Te(()=>t.id||`v-menu-${a}`),c=ht(),l=Rr(yO,null),u=ur(new Set);ui(yO,{register(){u.value.add(a)},unregister(){u.value.delete(a)},closeParents(m){setTimeout(()=>{!u.value.size&&!t.persistent&&(m==null||c.value?.contentEl&&!DTe(m,c.value.contentEl))&&(n.value=!1,l?.closeParents())},40)}}),bo(()=>l?.unregister()),ioe(()=>n.value=!1);async function f(m){const y=m.relatedTarget,v=m.target;await Bi(),n.value&&y!==v&&c.value?.contentEl&&c.value?.globalTop&&![document,c.value.contentEl].includes(v)&&!c.value.contentEl.contains(v)&&J3(c.value.contentEl)[0]?.focus()}cr(n,m=>{m?(l?.register(),document.addEventListener("focusin",f,{once:!0})):(l?.unregister(),document.removeEventListener("focusin",f))});function h(m){l?.closeParents(m)}function d(m){if(!t.disabled)if(m.key==="Tab"||m.key==="Enter"&&!t.closeOnContentClick){if(m.key==="Enter"&&(m.target instanceof HTMLTextAreaElement||m.target instanceof HTMLInputElement&&m.target.closest("form")))return;m.key==="Enter"&&m.preventDefault(),Goe(J3(c.value?.contentEl,!1),m.shiftKey?"prev":"next",v=>v.tabIndex>=0)||(n.value=!1,c.value?.activatorEl?.focus())}else t.submenu&&m.key===(s.value?"ArrowRight":"ArrowLeft")&&(n.value=!1,c.value?.activatorEl?.focus())}function g(m){if(t.disabled)return;const y=c.value?.contentEl;y&&n.value?m.key==="ArrowDown"?(m.preventDefault(),m.stopImmediatePropagation(),u3(y,"next")):m.key==="ArrowUp"?(m.preventDefault(),m.stopImmediatePropagation(),u3(y,"prev")):t.submenu&&(m.key===(s.value?"ArrowRight":"ArrowLeft")?n.value=!1:m.key===(s.value?"ArrowLeft":"ArrowRight")&&(m.preventDefault(),u3(y,"first"))):(t.submenu?m.key===(s.value?"ArrowLeft":"ArrowRight"):["ArrowDown","ArrowUp"].includes(m.key))&&(n.value=!0,m.preventDefault(),setTimeout(()=>setTimeout(()=>g(m))))}const p=Te(()=>gr({"aria-haspopup":"menu","aria-expanded":String(n.value),"aria-owns":o.value,onKeydown:g},t.activatorProps));return _r(()=>{const m=V7.filterProps(t);return ue(V7,gr({ref:c,id:o.value,class:["v-menu",t.class],style:t.style},m,{modelValue:n.value,"onUpdate:modelValue":y=>n.value=y,absolute:!0,activatorProps:p.value,location:t.location??(t.submenu?"end":"bottom"),"onClick:outside":h,onKeydown:d},i),{activator:r.activator,default:function(){for(var y=arguments.length,v=new Array(y),_=0;_<y;_++)v[_]=arguments[_];return ue(Xs,{root:"VMenu"},{default:()=>[r.default?.(...v)]})}})}),kS({id:o,ΨopenChildren:u},c)}}),GUe=_t({active:Boolean,disabled:Boolean,max:[Number,String],value:{type:[Number,String],default:0},...Or(),...d6({transition:{component:Tfe}})},"VCounter"),YUe=Yt()({name:"VCounter",functional:!0,props:GUe(),setup(t,e){let{slots:r}=e;const n=Te(()=>t.max?`${t.value} / ${t.max}`:String(t.value));return _r(()=>ue(Sd,{transition:t.transition},{default:()=>[$a(ue("div",{class:["v-counter",{"text-error":t.max&&!t.disabled&&parseFloat(t.value)>parseFloat(t.max)},t.class],style:t.style},[r.default?r.default({counter:n.value,max:t.max,value:t.value}):n.value]),[[Kd,t.active]])]})),{}}}),XUe=_t({text:String,onClick:_c(),...Or(),...$s()},"VLabel"),Yfe=Yt()({name:"VLabel",props:XUe(),setup(t,e){let{slots:r}=e;return _r(()=>ue("label",{class:["v-label",{"v-label--clickable":!!t.onClick},t.class],style:t.style,onClick:t.onClick},[t.text,r.default?.()])),{}}}),ZUe=_t({floating:Boolean,...Or()},"VFieldLabel"),B_=Yt()({name:"VFieldLabel",props:ZUe(),setup(t,e){let{slots:r}=e;return _r(()=>ue(Yfe,{class:["v-field-label",{"v-field-label--floating":t.floating},t.class],style:t.style,"aria-hidden":t.floating||void 0},r)),{}}});function Xfe(t){const{t:e}=aS();function r(n){let{name:i}=n;const s={prepend:"prependAction",prependInner:"prependAction",append:"appendAction",appendInner:"appendAction",clear:"clear"}[i],a=t[`onClick:${i}`],o=a&&s?e(`$vuetify.input.${s}`,t.label??""):void 0;return ue(Fn,{icon:t[`${i}Icon`],"aria-label":o,onClick:a},null)}return{InputIcon:r}}const Zfe=_t({focused:Boolean,"onUpdate:focused":_c()},"focus");function UF(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:hh();const r=xs(t,"focused"),n=Te(()=>({[`${e}--focused`]:r.value}));function i(){r.value=!0}function s(){r.value=!1}return{focusClasses:n,isFocused:r,focus:i,blur:s}}const JUe=["underlined","outlined","filled","solo","solo-inverted","solo-filled","plain"],Jfe=_t({appendInnerIcon:ri,bgColor:String,clearable:Boolean,clearIcon:{type:ri,default:"$clear"},active:Boolean,centerAffix:{type:Boolean,default:void 0},color:String,baseColor:String,dirty:Boolean,disabled:{type:Boolean,default:null},error:Boolean,flat:Boolean,label:String,persistentClear:Boolean,prependInnerIcon:ri,reverse:Boolean,singleLine:Boolean,variant:{type:String,default:"filled",validator:t=>JUe.includes(t)},"onClick:clear":_c(),"onClick:appendInner":_c(),"onClick:prependInner":_c(),...Or(),...CF(),...Ju(),...$s()},"VField"),Qfe=Yt()({name:"VField",inheritAttrs:!1,props:{id:String,...Zfe(),...Jfe()},emits:{"update:focused":t=>!0,"update:modelValue":t=>!0},setup(t,e){let{attrs:r,emit:n,slots:i}=e;const{themeClasses:s}=va(t),{loaderClasses:a}=SS(t),{focusClasses:o,isFocused:c,focus:l,blur:u}=UF(t),{InputIcon:f}=Xfe(t),{roundedClasses:h}=Qu(t),{rtlClasses:d}=Gl(),g=Te(()=>t.dirty||t.active),p=Te(()=>!t.singleLine&&!!(t.label||i.label)),m=Zu(),y=Te(()=>t.id||`input-${m}`),v=Te(()=>`${y.value}-messages`),_=ht(),x=ht(),A=ht(),C=Te(()=>["plain","underlined"].includes(t.variant)),{backgroundColorClasses:R,backgroundColorStyles:M}=Od(or(t,"bgColor")),{textColorClasses:N,textColorStyles:Y}=Gd(Te(()=>t.error||t.disabled?void 0:g.value&&c.value?t.color:t.baseColor));cr(g,w=>{if(p.value){const T=_.value.$el,L=x.value.$el;requestAnimationFrame(()=>{const I=OL(T),U=L.getBoundingClientRect(),O=U.x-I.x,D=U.y-I.y-(I.height/2-U.height/2),P=U.width/.75,B=Math.abs(P-I.width)>1?{maxWidth:br(P)}:void 0,z=getComputedStyle(T),F=getComputedStyle(L),X=parseFloat(z.transitionDuration)*1e3||150,W=parseFloat(F.getPropertyValue("--v-field-label-scale")),q=F.getPropertyValue("color");T.style.visibility="visible",L.style.visibility="hidden",ry(T,{transform:`translate(${O}px, ${D}px) scale(${W})`,color:q,...B},{duration:X,easing:p7,direction:w?"normal":"reverse"}).finished.then(()=>{T.style.removeProperty("visibility"),L.style.removeProperty("visibility")})})}},{flush:"post"});const H=Te(()=>({isActive:g,isFocused:c,controlRef:A,blur:u,focus:l}));function E(w){w.target!==document.activeElement&&w.preventDefault()}function k(w){w.key!=="Enter"&&w.key!==" "||(w.preventDefault(),w.stopPropagation(),t["onClick:clear"]?.(new MouseEvent("click")))}return _r(()=>{const w=t.variant==="outlined",T=!!(i["prepend-inner"]||t.prependInnerIcon),L=!!(t.clearable||i.clear),I=!!(i["append-inner"]||t.appendInnerIcon||L),U=()=>i.label?i.label({...H.value,label:t.label,props:{for:y.value}}):t.label;return ue("div",gr({class:["v-field",{"v-field--active":g.value,"v-field--appended":I,"v-field--center-affix":t.centerAffix??!C.value,"v-field--disabled":t.disabled,"v-field--dirty":t.dirty,"v-field--error":t.error,"v-field--flat":t.flat,"v-field--has-background":!!t.bgColor,"v-field--persistent-clear":t.persistentClear,"v-field--prepended":T,"v-field--reverse":t.reverse,"v-field--single-line":t.singleLine,"v-field--no-label":!U(),[`v-field--variant-${t.variant}`]:!0},s.value,R.value,o.value,a.value,h.value,d.value,t.class],style:[M.value,t.style],onClick:E},r),[ue("div",{class:"v-field__overlay"},null),ue(IF,{name:"v-field",active:!!t.loading,color:t.error?"error":typeof t.loading=="string"?t.loading:t.color},{default:i.loader}),T&&ue("div",{key:"prepend",class:"v-field__prepend-inner"},[t.prependInnerIcon&&ue(f,{key:"prepend-icon",name:"prependInner"},null),i["prepend-inner"]?.(H.value)]),ue("div",{class:"v-field__field","data-no-activator":""},[["filled","solo","solo-inverted","solo-filled"].includes(t.variant)&&p.value&&ue(B_,{key:"floating-label",ref:x,class:[N.value],floating:!0,for:y.value,style:Y.value},{default:()=>[U()]}),ue(B_,{ref:_,for:y.value},{default:()=>[U()]}),i.default?.({...H.value,props:{id:y.value,class:"v-field__input","aria-describedby":v.value},focus:l,blur:u})]),L&&ue(kfe,{key:"clear"},{default:()=>[$a(ue("div",{class:"v-field__clearable",onMousedown:O=>{O.preventDefault(),O.stopPropagation()}},[ue(Xs,{defaults:{VIcon:{icon:t.clearIcon}}},{default:()=>[i.clear?i.clear({...H.value,props:{onKeydown:k,onFocus:l,onBlur:u,onClick:t["onClick:clear"]}}):ue(f,{name:"clear",onKeydown:k,onFocus:l,onBlur:u},null)]})]),[[Kd,t.dirty]])]}),I&&ue("div",{key:"append",class:"v-field__append-inner"},[i["append-inner"]?.(H.value),t.appendInnerIcon&&ue(f,{key:"append-icon",name:"appendInner"},null)]),ue("div",{class:["v-field__outline",N.value],style:Y.value},[w&&ue(qr,null,[ue("div",{class:"v-field__outline__start"},null),p.value&&ue("div",{class:"v-field__outline__notch"},[ue(B_,{ref:x,floating:!0,for:y.value},{default:()=>[U()]})]),ue("div",{class:"v-field__outline__end"},null)]),C.value&&p.value&&ue(B_,{ref:x,floating:!0,for:y.value},{default:()=>[U()]})])])}),{controlRef:A}}});function QUe(t){const e=Object.keys(Qfe.props).filter(r=>!PL(r)&&r!=="class"&&r!=="style");return qoe(t,e)}const eVe=_t({active:Boolean,color:String,messages:{type:[Array,String],default:()=>[]},...Or(),...d6({transition:{component:Tfe,leaveAbsolute:!0,group:!0}})},"VMessages"),tVe=Yt()({name:"VMessages",props:eVe(),setup(t,e){let{slots:r}=e;const n=Te(()=>Du(t.messages)),{textColorClasses:i,textColorStyles:s}=Gd(Te(()=>t.color));return _r(()=>ue(Sd,{transition:t.transition,tag:"div",class:["v-messages",i.value,t.class],style:[s.value,t.style],role:"alert","aria-live":"polite"},{default:()=>[t.active&&n.value.map((a,o)=>ue("div",{class:"v-messages__message",key:`${o}-${n.value}`},[r.message?r.message({message:a}):a]))]})),{}}}),rVe=Symbol.for("vuetify:form");function ehe(){return Rr(rVe,null)}const nVe=_t({disabled:{type:Boolean,default:null},error:Boolean,errorMessages:{type:[Array,String],default:()=>[]},maxErrors:{type:[Number,String],default:1},name:String,label:String,readonly:{type:Boolean,default:null},rules:{type:Array,default:()=>[]},modelValue:null,validateOn:String,validationValue:null,...Zfe()},"validation");function iVe(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:hh(),r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Zu();const n=xs(t,"modelValue"),i=Te(()=>t.validationValue===void 0?n.value:t.validationValue),s=ehe(),a=ht([]),o=ur(!0),c=Te(()=>!!(Du(n.value===""?null:n.value).length||Du(i.value===""?null:i.value).length)),l=Te(()=>!!(t.disabled??s?.isDisabled.value)),u=Te(()=>!!(t.readonly??s?.isReadonly.value)),f=Te(()=>t.errorMessages?.length?Du(t.errorMessages).concat(a.value).slice(0,Math.max(0,+t.maxErrors)):a.value),h=Te(()=>{let A=(t.validateOn??s?.validateOn.value)||"input";A==="lazy"&&(A="input lazy"),A==="eager"&&(A="input eager");const C=new Set(A?.split(" ")??[]);return{input:C.has("input"),blur:C.has("blur")||C.has("input")||C.has("invalid-input"),invalidInput:C.has("invalid-input"),lazy:C.has("lazy"),eager:C.has("eager")}}),d=Te(()=>t.error||t.errorMessages?.length?!1:t.rules.length?o.value?a.value.length||h.value.lazy?null:!0:!a.value.length:!0),g=ur(!1),p=Te(()=>({[`${e}--error`]:d.value===!1,[`${e}--dirty`]:c.value,[`${e}--disabled`]:l.value,[`${e}--readonly`]:u.value})),m=Fs("validation"),y=Te(()=>t.name??ct(r));bL(()=>{s?.register({id:y.value,vm:m,validate:x,reset:v,resetValidation:_})}),bo(()=>{s?.unregister(y.value)}),Ai(async()=>{h.value.lazy||await x(!h.value.eager),s?.update(y.value,d.value,f.value)}),zg(()=>h.value.input||h.value.invalidInput&&d.value===!1,()=>{cr(i,()=>{if(i.value!=null)x();else if(t.focused){const A=cr(()=>t.focused,C=>{C||x(),A()})}})}),zg(()=>h.value.blur,()=>{cr(()=>t.focused,A=>{A||x()})}),cr([d,f],()=>{s?.update(y.value,d.value,f.value)});async function v(){n.value=null,await Bi(),await _()}async function _(){o.value=!0,h.value.lazy?a.value=[]:await x(!h.value.eager)}async function x(){let A=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;const C=[];g.value=!0;for(const R of t.rules){if(C.length>=+(t.maxErrors??1))break;const N=await(typeof R=="function"?R:()=>R)(i.value);if(N!==!0){if(N!==!1&&typeof N!="string"){console.warn(`${N} is not a valid value. Rule functions must return boolean true or a string.`);continue}C.push(N||"")}}return a.value=C,g.value=!1,o.value=A,a.value}return{errorMessages:f,isDirty:c,isDisabled:l,isReadonly:u,isPristine:o,isValid:d,isValidating:g,reset:v,resetValidation:_,validate:x,validationClasses:p}}const VF=_t({id:String,appendIcon:ri,centerAffix:{type:Boolean,default:!0},prependIcon:ri,hideDetails:[Boolean,String],hideSpinButtons:Boolean,hint:String,persistentHint:Boolean,messages:{type:[Array,String],default:()=>[]},direction:{type:String,default:"horizontal",validator:t=>["horizontal","vertical"].includes(t)},"onClick:prepend":_c(),"onClick:append":_c(),...Or(),...gh(),...kTe(mh(),["maxWidth","minWidth","width"]),...$s(),...nVe()},"VInput"),z7=Yt()({name:"VInput",props:{...VF()},emits:{"update:modelValue":t=>!0},setup(t,e){let{attrs:r,slots:n,emit:i}=e;const{densityClasses:s}=a0(t),{dimensionStyles:a}=yh(t),{themeClasses:o}=va(t),{rtlClasses:c}=Gl(),{InputIcon:l}=Xfe(t),u=Zu(),f=Te(()=>t.id||`input-${u}`),h=Te(()=>`${f.value}-messages`),{errorMessages:d,isDirty:g,isDisabled:p,isReadonly:m,isPristine:y,isValid:v,isValidating:_,reset:x,resetValidation:A,validate:C,validationClasses:R}=iVe(t,"v-input",f),M=Te(()=>({id:f,messagesId:h,isDirty:g,isDisabled:p,isReadonly:m,isPristine:y,isValid:v,isValidating:_,reset:x,resetValidation:A,validate:C})),N=Te(()=>t.errorMessages?.length||!y.value&&d.value.length?d.value:t.hint&&(t.persistentHint||t.focused)?t.hint:t.messages);return _r(()=>{const Y=!!(n.prepend||t.prependIcon),H=!!(n.append||t.appendIcon),E=N.value.length>0,k=!t.hideDetails||t.hideDetails==="auto"&&(E||!!n.details);return ue("div",{class:["v-input",`v-input--${t.direction}`,{"v-input--center-affix":t.centerAffix,"v-input--hide-spin-buttons":t.hideSpinButtons},s.value,o.value,c.value,R.value,t.class],style:[a.value,t.style]},[Y&&ue("div",{key:"prepend",class:"v-input__prepend"},[n.prepend?.(M.value),t.prependIcon&&ue(l,{key:"prepend-icon",name:"prepend"},null)]),n.default&&ue("div",{class:"v-input__control"},[n.default?.(M.value)]),H&&ue("div",{key:"append",class:"v-input__append"},[t.appendIcon&&ue(l,{key:"append-icon",name:"append"},null),n.append?.(M.value)]),k&&ue("div",{class:"v-input__details"},[ue(tVe,{id:h.value,active:E,messages:N.value},{message:n.message}),n.details?.(M.value)])])}),{reset:x,resetValidation:A,validate:C,isValid:v,errorMessages:d}}}),sVe=["color","file","time","date","datetime-local","week","month"],the=_t({autofocus:Boolean,counter:[Boolean,Number,String],counterValue:[Number,Function],prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,suffix:String,role:String,type:{type:String,default:"text"},modelModifiers:Object,...VF(),...Jfe()},"VTextField"),q7=Yt()({name:"VTextField",directives:{Intersect:Lfe},inheritAttrs:!1,props:the(),emits:{"click:control":t=>!0,"mousedown:control":t=>!0,"update:focused":t=>!0,"update:modelValue":t=>!0},setup(t,e){let{attrs:r,emit:n,slots:i}=e;const s=xs(t,"modelValue"),{isFocused:a,focus:o,blur:c}=UF(t),l=Te(()=>typeof t.counterValue=="function"?t.counterValue(s.value):typeof t.counterValue=="number"?t.counterValue:(s.value??"").toString().length),u=Te(()=>{if(r.maxlength)return r.maxlength;if(!(!t.counter||typeof t.counter!="number"&&typeof t.counter!="string"))return t.counter}),f=Te(()=>["plain","underlined"].includes(t.variant));function h(C,R){!t.autofocus||!C||R[0].target?.focus?.()}const d=ht(),g=ht(),p=ht(),m=Te(()=>sVe.includes(t.type)||t.persistentPlaceholder||a.value||t.active);function y(){p.value!==document.activeElement&&p.value?.focus(),a.value||o()}function v(C){n("mousedown:control",C),C.target!==p.value&&(y(),C.preventDefault())}function _(C){y(),n("click:control",C)}function x(C){C.stopPropagation(),y(),Bi(()=>{s.value=null,PTe(t["onClick:clear"],C)})}function A(C){const R=C.target;if(s.value=R.value,t.modelModifiers?.trim&&["text","search","password","tel","url"].includes(t.type)){const M=[R.selectionStart,R.selectionEnd];Bi(()=>{R.selectionStart=M[0],R.selectionEnd=M[1]})}}return _r(()=>{const C=!!(i.counter||t.counter!==!1&&t.counter!=null),R=!!(C||i.details),[M,N]=BL(r),{modelValue:Y,...H}=z7.filterProps(t),E=QUe(t);return ue(z7,gr({ref:d,modelValue:s.value,"onUpdate:modelValue":k=>s.value=k,class:["v-text-field",{"v-text-field--prefixed":t.prefix,"v-text-field--suffixed":t.suffix,"v-input--plain-underlined":f.value},t.class],style:t.style},M,H,{centerAffix:!f.value,focused:a.value}),{...i,default:k=>{let{id:w,isDisabled:T,isDirty:L,isReadonly:I,isValid:U}=k;return ue(Qfe,gr({ref:g,onMousedown:v,onClick:_,"onClick:clear":x,"onClick:prependInner":t["onClick:prependInner"],"onClick:appendInner":t["onClick:appendInner"],role:t.role},E,{id:w.value,active:m.value||L.value,dirty:L.value||t.dirty,disabled:T.value,focused:a.value,error:U.value===!1}),{...i,default:O=>{let{props:{class:D,...P}}=O;const B=$a(ue("input",gr({ref:p,value:s.value,onInput:A,autofocus:t.autofocus,readonly:I.value,disabled:T.value,name:t.name,placeholder:t.placeholder,size:1,type:t.type,onFocus:y,onBlur:c},P,N),null),[[J1("intersect"),{handler:h},null,{once:!0}]]);return ue(qr,null,[t.prefix&&ue("span",{class:"v-text-field__prefix"},[ue("span",{class:"v-text-field__prefix__text"},[t.prefix])]),i.default?ue("div",{class:D,"data-no-activator":""},[i.default(),B]):Wd(B,{class:D}),t.suffix&&ue("span",{class:"v-text-field__suffix"},[ue("span",{class:"v-text-field__suffix__text"},[t.suffix])])])}})},details:R?k=>ue(qr,null,[i.details?.(k),C&&ue(qr,null,[ue("span",null,null),ue(YUe,{active:t.persistentCounter||a.value,value:l.value,max:u.value,disabled:t.disabled},i.counter)])]):void 0})}),kS({},d,g,p)}}),rhe=Di({__name:"MenuLangues",setup(t){const{கிடைக்கும்_மொழிகளை_பயன்படுத்து:e}=s0(),{மொழிகளும்_குறியீடுகளும்:r}=e(),{isRtl:n}=Gl(),{மொழி:i,மொழிகளை_தேர்ந்தெடுக்கொள்ளு:s}=Kv(),a=ht(),o=Te(()=>r.value.filter(c=>!a.value||c.குறியீடு.includes(a.value)||c.மொழி.includes(a.value)).map(c=>c.குறியீடு));return(c,l)=>(pr(),Qr(j7,{activator:"parent",offset:"10px","min-width":"225",location:ct(n)?"bottom right":"bottom left"},{default:mt(()=>[ue(Wy,null,{default:mt(()=>[ue(q7,{modelValue:a.value,"onUpdate:modelValue":l[0]||(l[0]=u=>a.value=u),density:"compact","prepend-inner-icon":"mdi-magnify",autofocus:"","hide-details":"",onClick:l[1]||(l[1]=bTe(()=>{},["stop"]))},null,8,["modelValue"]),ue(Wy,{class:"overflow-y-auto","max-height":"400px","min-width":"200px"},{default:mt(()=>[(pr(!0),jg(qr,null,a7(o.value,u=>(pr(),Qr(xUe,{key:u,code:u,selectionnee:u===ct(i),onClick:()=>ct(s)(u)},null,8,["code","selectionnee","onClick"]))),128))]),_:1})]),_:1})]),_:1},8,["location"]))}}),nhe=Symbol.for("vuetify:selection-control-group"),ihe=_t({color:String,disabled:{type:Boolean,default:null},defaultsTarget:String,error:Boolean,id:String,inline:Boolean,falseIcon:ri,trueIcon:ri,ripple:{type:[Boolean,Object],default:!0},multiple:{type:Boolean,default:null},name:String,readonly:{type:Boolean,default:null},modelValue:null,type:String,valueComparator:{type:Function,default:Vv},...Or(),...gh(),...$s()},"SelectionControlGroup"),aVe=_t({...ihe({defaultsTarget:"VSelectionControl"})},"VSelectionControlGroup");Yt()({name:"VSelectionControlGroup",props:aVe(),emits:{"update:modelValue":t=>!0},setup(t,e){let{slots:r}=e;const n=xs(t,"modelValue"),i=Zu(),s=Te(()=>t.id||`v-selection-control-group-${i}`),a=Te(()=>t.name||s.value),o=new Set;return ui(nhe,{modelValue:n,forceUpdate:()=>{o.forEach(c=>c())},onForceUpdate:c=>{o.add(c),Pc(()=>{o.delete(c)})}}),zv({[t.defaultsTarget]:{color:or(t,"color"),disabled:or(t,"disabled"),density:or(t,"density"),error:or(t,"error"),inline:or(t,"inline"),modelValue:n,multiple:Te(()=>!!t.multiple||t.multiple==null&&Array.isArray(n.value)),name:a,falseIcon:or(t,"falseIcon"),trueIcon:or(t,"trueIcon"),readonly:or(t,"readonly"),ripple:or(t,"ripple"),type:or(t,"type"),valueComparator:or(t,"valueComparator")}}),_r(()=>ue("div",{class:["v-selection-control-group",{"v-selection-control-group--inline":t.inline},t.class],style:t.style,role:t.type==="radio"?"radiogroup":void 0},[r.default?.()])),{}}});const jF=_t({label:String,baseColor:String,trueValue:null,falseValue:null,value:null,...Or(),...ihe()},"VSelectionControl");function oVe(t){const e=Rr(nhe,void 0),{densityClasses:r}=a0(t),n=xs(t,"modelValue"),i=Te(()=>t.trueValue!==void 0?t.trueValue:t.value!==void 0?t.value:!0),s=Te(()=>t.falseValue!==void 0?t.falseValue:!1),a=Te(()=>!!t.multiple||t.multiple==null&&Array.isArray(n.value)),o=Te({get(){const d=e?e.modelValue.value:n.value;return a.value?Du(d).some(g=>t.valueComparator(g,i.value)):t.valueComparator(d,i.value)},set(d){if(t.readonly)return;const g=d?i.value:s.value;let p=g;a.value&&(p=d?[...Du(n.value),g]:Du(n.value).filter(m=>!t.valueComparator(m,i.value))),e?e.modelValue.value=p:n.value=p}}),{textColorClasses:c,textColorStyles:l}=Gd(Te(()=>{if(!(t.error||t.disabled))return o.value?t.color:t.baseColor})),{backgroundColorClasses:u,backgroundColorStyles:f}=Od(Te(()=>o.value&&!t.error&&!t.disabled?t.color:t.baseColor)),h=Te(()=>o.value?t.trueIcon:t.falseIcon);return{group:e,densityClasses:r,trueValue:i,falseValue:s,model:o,textColorClasses:c,textColorStyles:l,backgroundColorClasses:u,backgroundColorStyles:f,icon:h}}const H7=Yt()({name:"VSelectionControl",directives:{Ripple:h6},inheritAttrs:!1,props:jF(),emits:{"update:modelValue":t=>!0},setup(t,e){let{attrs:r,slots:n}=e;const{group:i,densityClasses:s,icon:a,model:o,textColorClasses:c,textColorStyles:l,backgroundColorClasses:u,backgroundColorStyles:f,trueValue:h}=oVe(t),d=Zu(),g=ur(!1),p=ur(!1),m=ht(),y=Te(()=>t.id||`input-${d}`),v=Te(()=>!t.disabled&&!t.readonly);i?.onForceUpdate(()=>{m.value&&(m.value.checked=o.value)});function _(R){v.value&&(g.value=!0,h7(R.target,":focus-visible")!==!1&&(p.value=!0))}function x(){g.value=!1,p.value=!1}function A(R){R.stopPropagation()}function C(R){if(!v.value){m.value&&(m.value.checked=o.value);return}t.readonly&&i&&Bi(()=>i.forceUpdate()),o.value=R.target.checked}return _r(()=>{const R=n.label?n.label({label:t.label,props:{for:y.value}}):t.label,[M,N]=BL(r),Y=ue("input",gr({ref:m,checked:o.value,disabled:!!t.disabled,id:y.value,onBlur:x,onFocus:_,onInput:C,"aria-disabled":!!t.disabled,"aria-label":t.label,type:t.type,value:h.value,name:t.name,"aria-checked":t.type==="checkbox"?o.value:void 0},N),null);return ue("div",gr({class:["v-selection-control",{"v-selection-control--dirty":o.value,"v-selection-control--disabled":t.disabled,"v-selection-control--error":t.error,"v-selection-control--focused":g.value,"v-selection-control--focus-visible":p.value,"v-selection-control--inline":t.inline},s.value,t.class]},M,{style:t.style}),[ue("div",{class:["v-selection-control__wrapper",c.value],style:l.value},[n.default?.({backgroundColorClasses:u,backgroundColorStyles:f}),$a(ue("div",{class:["v-selection-control__input"]},[n.input?.({model:o,textColorClasses:c,textColorStyles:l,backgroundColorClasses:u,backgroundColorStyles:f,inputNode:Y,icon:a.value,props:{onFocus:_,onBlur:x,id:y.value}})??ue(qr,null,[a.value&&ue(Fn,{key:"icon",icon:a.value},null),Y])]),[[J1("ripple"),t.ripple&&[!t.disabled&&!t.readonly,null,["center","circle"]]]])]),R&&ue(Yfe,{for:y.value,onClick:A},{default:()=>[R]})])}),{isFocused:g,input:m}}}),cVe=_t({indeterminate:Boolean,indeterminateIcon:{type:ri,default:"$checkboxIndeterminate"},...jF({falseIcon:"$checkboxOff",trueIcon:"$checkboxOn"})},"VCheckboxBtn"),lVe=Yt()({name:"VCheckboxBtn",props:cVe(),emits:{"update:modelValue":t=>!0,"update:indeterminate":t=>!0},setup(t,e){let{slots:r}=e;const n=xs(t,"indeterminate"),i=xs(t,"modelValue");function s(c){n.value&&(n.value=!1)}const a=Te(()=>n.value?t.indeterminateIcon:t.falseIcon),o=Te(()=>n.value?t.indeterminateIcon:t.trueIcon);return _r(()=>{const c=jv(H7.filterProps(t),["modelValue"]);return ue(H7,gr(c,{modelValue:i.value,"onUpdate:modelValue":[l=>i.value=l,s],class:["v-checkbox-btn",t.class],style:t.style,type:"checkbox",falseIcon:a.value,trueIcon:o.value,"aria-checked":n.value?"mixed":void 0}),r)}),{}}});function uVe(t){let{selectedElement:e,containerElement:r,isRtl:n,isHorizontal:i}=t;const s=o4(i,r),a=she(i,n,r),o=o4(i,e),c=ahe(i,e),l=o*.4;return a>c?c-l:a+s<c+o?c-s+o+l:a}function fVe(t){let{selectedElement:e,containerElement:r,isHorizontal:n}=t;const i=o4(n,r),s=ahe(n,e),a=o4(n,e);return s-i/2+a/2}function sX(t,e){return e?.[t?"scrollWidth":"scrollHeight"]||0}function hVe(t,e){return e?.[t?"clientWidth":"clientHeight"]||0}function she(t,e,r){if(!r)return 0;const{scrollLeft:n,offsetWidth:i,scrollWidth:s}=r;return t?e?s-i+n:n:r.scrollTop}function o4(t,e){return e?.[t?"offsetWidth":"offsetHeight"]||0}function ahe(t,e){return e?.[t?"offsetLeft":"offsetTop"]||0}const dVe=Symbol.for("vuetify:v-slide-group"),ohe=_t({centerActive:Boolean,direction:{type:String,default:"horizontal"},symbol:{type:null,default:dVe},nextIcon:{type:ri,default:"$next"},prevIcon:{type:ri,default:"$prev"},showArrows:{type:[Boolean,String],validator:t=>typeof t=="boolean"||["always","desktop","mobile"].includes(t)},...Or(),...uCe({mobile:null}),...ps(),...SF({selectedClass:"v-slide-group-item--active"})},"VSlideGroup"),aX=Yt()({name:"VSlideGroup",props:ohe(),emits:{"update:modelValue":t=>!0},setup(t,e){let{slots:r}=e;const{isRtl:n}=Gl(),{displayClasses:i,mobile:s}=n0(t),a=_S(t,t.symbol),o=ur(!1),c=ur(0),l=ur(0),u=ur(0),f=Te(()=>t.direction==="horizontal"),{resizeRef:h,contentRect:d}=My(),{resizeRef:g,contentRect:p}=My(),m=dCe(),y=Te(()=>({container:h.el,duration:200,easing:"easeOutQuart"})),v=Te(()=>a.selected.value.length?a.items.value.findIndex(D=>D.id===a.selected.value[0]):-1),_=Te(()=>a.selected.value.length?a.items.value.findIndex(D=>D.id===a.selected.value[a.selected.value.length-1]):-1);if(qn){let D=-1;cr(()=>[a.selected.value,d.value,p.value,f.value],()=>{cancelAnimationFrame(D),D=requestAnimationFrame(()=>{if(d.value&&p.value){const P=f.value?"width":"height";l.value=d.value[P],u.value=p.value[P],o.value=l.value+1<u.value}if(v.value>=0&&g.el){const P=g.el.children[_.value];A(P,t.centerActive)}})})}const x=ur(!1);function A(D,P){let B=0;P?B=fVe({containerElement:h.el,isHorizontal:f.value,selectedElement:D}):B=uVe({containerElement:h.el,isHorizontal:f.value,isRtl:n.value,selectedElement:D}),C(B)}function C(D){if(!qn||!h.el)return;const P=o4(f.value,h.el),B=she(f.value,n.value,h.el);if(!(sX(f.value,h.el)<=P||Math.abs(D-B)<16)){if(f.value&&n.value&&h.el){const{scrollWidth:F,offsetWidth:X}=h.el;D=F-X-D}f.value?m.horizontal(D,y.value):m(D,y.value)}}function R(D){const{scrollTop:P,scrollLeft:B}=D.target;c.value=f.value?B:P}function M(D){if(x.value=!0,!(!o.value||!g.el)){for(const P of D.composedPath())for(const B of g.el.children)if(B===P){A(B);return}}}function N(D){x.value=!1}let Y=!1;function H(D){!Y&&!x.value&&!(D.relatedTarget&&g.el?.contains(D.relatedTarget))&&w(),Y=!1}function E(){Y=!0}function k(D){if(!g.el)return;function P(B){D.preventDefault(),w(B)}f.value?D.key==="ArrowRight"?P(n.value?"prev":"next"):D.key==="ArrowLeft"&&P(n.value?"next":"prev"):D.key==="ArrowDown"?P("next"):D.key==="ArrowUp"&&P("prev"),D.key==="Home"?P("first"):D.key==="End"&&P("last")}function w(D){if(!g.el)return;let P;if(!D)P=J3(g.el)[0];else if(D==="next"){if(P=g.el.querySelector(":focus")?.nextElementSibling,!P)return w("first")}else if(D==="prev"){if(P=g.el.querySelector(":focus")?.previousElementSibling,!P)return w("last")}else D==="first"?P=g.el.firstElementChild:D==="last"&&(P=g.el.lastElementChild);P&&P.focus({preventScroll:!0})}function T(D){const P=f.value&&n.value?-1:1,B=(D==="prev"?-P:P)*l.value;let z=c.value+B;if(f.value&&n.value&&h.el){const{scrollWidth:F,offsetWidth:X}=h.el;z+=F-X}C(z)}const L=Te(()=>({next:a.next,prev:a.prev,select:a.select,isSelected:a.isSelected})),I=Te(()=>{switch(t.showArrows){case"always":return!0;case"desktop":return!s.value;case!0:return o.value||Math.abs(c.value)>0;case"mobile":return s.value||o.value||Math.abs(c.value)>0;default:return!s.value&&(o.value||Math.abs(c.value)>0)}}),U=Te(()=>Math.abs(c.value)>1),O=Te(()=>{if(!h.value)return!1;const D=sX(f.value,h.el),P=hVe(f.value,h.el);return D-P-Math.abs(c.value)>1});return _r(()=>ue(t.tag,{class:["v-slide-group",{"v-slide-group--vertical":!f.value,"v-slide-group--has-affixes":I.value,"v-slide-group--is-overflowing":o.value},i.value,t.class],style:t.style,tabindex:x.value||a.selected.value.length?-1:0,onFocus:H},{default:()=>[I.value&&ue("div",{key:"prev",class:["v-slide-group__prev",{"v-slide-group__prev--disabled":!U.value}],onMousedown:E,onClick:()=>U.value&&T("prev")},[r.prev?.(L.value)??ue(ZY,null,{default:()=>[ue(Fn,{icon:n.value?t.nextIcon:t.prevIcon},null)]})]),ue("div",{key:"container",ref:h,class:"v-slide-group__container",onScroll:R},[ue("div",{ref:g,class:"v-slide-group__content",onFocusin:M,onFocusout:N,onKeydown:k},[r.default?.(L.value)])]),I.value&&ue("div",{key:"next",class:["v-slide-group__next",{"v-slide-group__next--disabled":!O.value}],onMousedown:E,onClick:()=>O.value&&T("next")},[r.next?.(L.value)??ue(ZY,null,{default:()=>[ue(Fn,{icon:n.value?t.prevIcon:t.nextIcon},null)]})])]})),{selected:a.selected,scrollTo:T,scrollOffset:c,focus:w,hasPrev:U,hasNext:O}}}),che=Symbol.for("vuetify:v-chip-group"),pVe=_t({column:Boolean,filter:Boolean,valueComparator:{type:Function,default:Vv},...ohe(),...Or(),...SF({selectedClass:"v-chip--selected"}),...ps(),...$s(),...ap({variant:"tonal"})},"VChipGroup");Yt()({name:"VChipGroup",props:pVe(),emits:{"update:modelValue":t=>!0},setup(t,e){let{slots:r}=e;const{themeClasses:n}=va(t),{isSelected:i,select:s,next:a,prev:o,selected:c}=_S(t,che);return zv({VChip:{color:or(t,"color"),disabled:or(t,"disabled"),filter:or(t,"filter"),variant:or(t,"variant")}}),_r(()=>{const l=aX.filterProps(t);return ue(aX,gr(l,{class:["v-chip-group",{"v-chip-group--column":t.column},n.value,t.class],style:t.style}),{default:()=>[r.default?.({isSelected:i,select:s,next:a,prev:o,selected:c.value})]})}),{}}});const gVe=_t({activeClass:String,appendAvatar:String,appendIcon:ri,closable:Boolean,closeIcon:{type:ri,default:"$delete"},closeLabel:{type:String,default:"$vuetify.close"},draggable:Boolean,filter:Boolean,filterIcon:{type:String,default:"$complete"},label:Boolean,link:{type:Boolean,default:void 0},pill:Boolean,prependAvatar:String,prependIcon:ri,ripple:{type:[Boolean,Object],default:!0},text:String,modelValue:{type:Boolean,default:!0},onClick:_c(),onClickOnce:_c(),...ip(),...Or(),...gh(),...Im(),...AF(),...Ju(),...TS(),...u6(),...ps({tag:"span"}),...$s(),...ap({variant:"tonal"})},"VChip"),mVe=Yt()({name:"VChip",directives:{Ripple:h6},props:gVe(),emits:{"click:close":t=>!0,"update:modelValue":t=>!0,"group:selected":t=>!0,click:t=>!0},setup(t,e){let{attrs:r,emit:n,slots:i}=e;const{t:s}=aS(),{borderClasses:a}=sp(t),{colorClasses:o,colorStyles:c,variantClasses:l}=l6(t),{densityClasses:u}=a0(t),{elevationClasses:f}=Rm(t),{roundedClasses:h}=Qu(t),{sizeClasses:d}=f6(t),{themeClasses:g}=va(t),p=xs(t,"modelValue"),m=TF(t,che,!1),y=AS(t,r),v=Te(()=>t.link!==!1&&y.isLink.value),_=Te(()=>!t.disabled&&t.link!==!1&&(!!m||t.link||y.isClickable.value)),x=Te(()=>({"aria-label":s(t.closeLabel),onClick(R){R.preventDefault(),R.stopPropagation(),p.value=!1,n("click:close",R)}}));function A(R){n("click",R),_.value&&(y.navigate?.(R),m?.toggle())}function C(R){(R.key==="Enter"||R.key===" ")&&(R.preventDefault(),A(R))}return()=>{const R=y.isLink.value?"a":t.tag,M=!!(t.appendIcon||t.appendAvatar),N=!!(M||i.append),Y=!!(i.close||t.closable),H=!!(i.filter||t.filter)&&m,E=!!(t.prependIcon||t.prependAvatar),k=!!(E||i.prepend),w=!m||m.isSelected.value;return p.value&&$a(ue(R,gr({class:["v-chip",{"v-chip--disabled":t.disabled,"v-chip--label":t.label,"v-chip--link":_.value,"v-chip--filter":H,"v-chip--pill":t.pill},g.value,a.value,w?o.value:void 0,u.value,f.value,h.value,d.value,l.value,m?.selectedClass.value,t.class],style:[w?c.value:void 0,t.style],disabled:t.disabled||void 0,draggable:t.draggable,tabindex:_.value?0:void 0,onClick:A,onKeydown:_.value&&!v.value&&C},y.linkProps),{default:()=>[c6(_.value,"v-chip"),H&&ue(kfe,{key:"filter"},{default:()=>[$a(ue("div",{class:"v-chip__filter"},[i.filter?ue(Xs,{key:"filter-defaults",disabled:!t.filterIcon,defaults:{VIcon:{icon:t.filterIcon}}},i.filter):ue(Fn,{key:"filter-icon",icon:t.filterIcon},null)]),[[Kd,m.isSelected.value]])]}),k&&ue("div",{key:"prepend",class:"v-chip__prepend"},[i.prepend?ue(Xs,{key:"prepend-defaults",disabled:!E,defaults:{VAvatar:{image:t.prependAvatar,start:!0},VIcon:{icon:t.prependIcon,start:!0}}},i.prepend):ue(qr,null,[t.prependIcon&&ue(Fn,{key:"prepend-icon",icon:t.prependIcon,start:!0},null),t.prependAvatar&&ue(Wg,{key:"prepend-avatar",image:t.prependAvatar,start:!0},null)])]),ue("div",{class:"v-chip__content","data-no-activator":""},[i.default?.({isSelected:m?.isSelected.value,selectedClass:m?.selectedClass.value,select:m?.select,toggle:m?.toggle,value:m?.value.value,disabled:t.disabled})??t.text]),N&&ue("div",{key:"append",class:"v-chip__append"},[i.append?ue(Xs,{key:"append-defaults",disabled:!M,defaults:{VAvatar:{end:!0,image:t.appendAvatar},VIcon:{end:!0,icon:t.appendIcon}}},i.append):ue(qr,null,[t.appendIcon&&ue(Fn,{key:"append-icon",end:!0,icon:t.appendIcon},null),t.appendAvatar&&ue(Wg,{key:"append-avatar",end:!0,image:t.appendAvatar},null)])]),Y&&ue("button",gr({key:"close",class:"v-chip__close",type:"button"},x.value),[i.close?ue(Xs,{key:"close-defaults",defaults:{VIcon:{icon:t.closeIcon,size:"x-small"}}},i.close):ue(Fn,{key:"close-icon",icon:t.closeIcon,size:"x-small"},null)])]}),[[J1("ripple"),_.value&&t.ripple,null]])}}}),yVe=_t({renderless:Boolean,...Or()},"VVirtualScrollItem"),vVe=Yt()({name:"VVirtualScrollItem",inheritAttrs:!1,props:yVe(),emits:{"update:height":t=>!0},setup(t,e){let{attrs:r,emit:n,slots:i}=e;const{resizeRef:s,contentRect:a}=My(void 0,"border");cr(()=>a.value?.height,o=>{o!=null&&n("update:height",o)}),_r(()=>t.renderless?ue(qr,null,[i.default?.({itemRef:s})]):ue("div",gr({ref:s,class:["v-virtual-scroll__item",t.class],style:t.style},r),[i.default?.()]))}}),bVe=-1,wVe=1,MC=100,_Ve=_t({itemHeight:{type:[Number,String],default:null},height:[Number,String]},"virtual");function xVe(t,e){const r=n0(),n=ur(0);Qs(()=>{n.value=parseFloat(t.itemHeight||0)});const i=ur(0),s=ur(Math.ceil((parseInt(t.height)||r.height.value)/(n.value||16))||1),a=ur(0),o=ur(0),c=ht(),l=ht();let u=0;const{resizeRef:f,contentRect:h}=My();Qs(()=>{f.value=c.value});const d=Te(()=>c.value===document.documentElement?r.height.value:h.value?.height||parseInt(t.height)||0),g=Te(()=>!!(c.value&&l.value&&d.value&&n.value));let p=Array.from({length:e.value.length}),m=Array.from({length:e.value.length});const y=ur(0);let v=-1;function _(O){return p[O]||n.value}const x=ITe(()=>{const O=performance.now();m[0]=0;const D=e.value.length;for(let P=1;P<=D-1;P++)m[P]=(m[P-1]||0)+_(P-1);y.value=Math.max(y.value,performance.now()-O)},y),A=cr(g,O=>{O&&(A(),u=l.value.offsetTop,x.immediate(),T(),~v&&Bi(()=>{qn&&window.requestAnimationFrame(()=>{I(v),v=-1})}))});Pc(()=>{x.clear()});function C(O,D){const P=p[O],B=n.value;n.value=B?Math.min(n.value,D):D,(P!==D||B!==n.value)&&(p[O]=D,x())}function R(O){return O=Dd(O,0,e.value.length-1),m[O]||0}function M(O){return EVe(m,O)}let N=0,Y=0,H=0;cr(d,(O,D)=>{D&&(T(),O<D&&requestAnimationFrame(()=>{Y=0,T()}))});function E(){if(!c.value||!l.value)return;const O=c.value.scrollTop,D=performance.now();D-H>500?(Y=Math.sign(O-N),u=l.value.offsetTop):Y=O-N,N=O,H=D,T()}function k(){!c.value||!l.value||(Y=0,H=0,T())}let w=-1;function T(){cancelAnimationFrame(w),w=requestAnimationFrame(L)}function L(){if(!c.value||!d.value)return;const O=N-u,D=Math.sign(Y),P=Math.max(0,O-MC),B=Dd(M(P),0,e.value.length),z=O+d.value+MC,F=Dd(M(z)+1,B+1,e.value.length);if((D!==bVe||B<i.value)&&(D!==wVe||F>s.value)){const X=R(i.value)-R(B),W=R(F)-R(s.value);Math.max(X,W)>MC?(i.value=B,s.value=F):(B<=0&&(i.value=B),F>=e.value.length&&(s.value=F))}a.value=R(i.value),o.value=R(e.value.length)-R(s.value)}function I(O){const D=R(O);!c.value||O&&!D?v=O:c.value.scrollTop=D}const U=Te(()=>e.value.slice(i.value,s.value).map((O,D)=>({raw:O,index:D+i.value})));return cr(e,()=>{p=Array.from({length:e.value.length}),m=Array.from({length:e.value.length}),x.immediate(),T()},{deep:!0}),{calculateVisibleItems:T,containerRef:c,markerRef:l,computedItems:U,paddingTop:a,paddingBottom:o,scrollToIndex:I,handleScroll:E,handleScrollend:k,handleItemResize:C}}function EVe(t,e){let r=t.length-1,n=0,i=0,s=null,a=-1;if(t[r]<e)return r;for(;n<=r;)if(i=n+r>>1,s=t[i],s>e)r=i-1;else if(s<e)a=i,n=i+1;else return s===e?i:n;return a}const SVe=_t({items:{type:Array,default:()=>[]},renderless:Boolean,..._Ve(),...Or(),...mh()},"VVirtualScroll"),AVe=Yt()({name:"VVirtualScroll",props:SVe(),setup(t,e){let{slots:r}=e;const n=Fs("VVirtualScroll"),{dimensionStyles:i}=yh(t),{calculateVisibleItems:s,containerRef:a,markerRef:o,handleScroll:c,handleScrollend:l,handleItemResize:u,scrollToIndex:f,paddingTop:h,paddingBottom:d,computedItems:g}=xVe(t,or(t,"items"));return zg(()=>t.renderless,()=>{function p(){const y=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1)?"addEventListener":"removeEventListener";a.value===document.documentElement?(document[y]("scroll",c,{passive:!0}),document[y]("scrollend",l)):(a.value?.[y]("scroll",c,{passive:!0}),a.value?.[y]("scrollend",l))}Ai(()=>{a.value=sce(n.vnode.el,!0),p(!0)}),Pc(p)}),_r(()=>{const p=g.value.map(m=>ue(vVe,{key:m.index,renderless:t.renderless,"onUpdate:height":y=>u(m.index,y)},{default:y=>r.default?.({item:m.raw,index:m.index,...y})}));return t.renderless?ue(qr,null,[ue("div",{ref:o,class:"v-virtual-scroll__spacer",style:{paddingTop:br(h.value)}},null),p,ue("div",{class:"v-virtual-scroll__spacer",style:{paddingBottom:br(d.value)}},null)]):ue("div",{ref:a,class:["v-virtual-scroll",t.class],onScrollPassive:c,onScrollend:l,style:[i.value,t.style]},[ue("div",{ref:o,class:"v-virtual-scroll__container",style:{paddingTop:br(h.value),paddingBottom:br(d.value)}},[p])])}),{calculateVisibleItems:s,scrollToIndex:f}}});function TVe(t,e){const r=ur(!1);let n;function i(o){cancelAnimationFrame(n),r.value=!0,n=requestAnimationFrame(()=>{n=requestAnimationFrame(()=>{r.value=!1})})}async function s(){await new Promise(o=>requestAnimationFrame(o)),await new Promise(o=>requestAnimationFrame(o)),await new Promise(o=>requestAnimationFrame(o)),await new Promise(o=>{if(r.value){const c=cr(r,()=>{c(),o()})}else o()})}async function a(o){if(o.key==="Tab"&&e.value?.focus(),!["PageDown","PageUp","Home","End"].includes(o.key))return;const c=t.value?.$el;if(!c)return;(o.key==="Home"||o.key==="End")&&c.scrollTo({top:o.key==="Home"?0:c.scrollHeight,behavior:"smooth"}),await s();const l=c.querySelectorAll(":scope > :not(.v-virtual-scroll__spacer)");if(o.key==="PageDown"||o.key==="Home"){const u=c.getBoundingClientRect().top;for(const f of l)if(f.getBoundingClientRect().top>=u){f.focus();break}}else{const u=c.getBoundingClientRect().bottom;for(const f of[...l].reverse())if(f.getBoundingClientRect().bottom<=u){f.focus();break}}}return{onScrollPassive:i,onKeydown:a}}const kVe=_t({chips:Boolean,closableChips:Boolean,closeText:{type:String,default:"$vuetify.close"},openText:{type:String,default:"$vuetify.open"},eager:Boolean,hideNoData:Boolean,hideSelected:Boolean,listProps:{type:Object},menu:Boolean,menuIcon:{type:ri,default:"$dropdown"},menuProps:{type:Object},multiple:Boolean,noDataText:{type:String,default:"$vuetify.noDataText"},openOnClear:Boolean,itemColor:String,...Ufe({itemChildren:!1})},"Select"),CVe=_t({...kVe(),...jv(the({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...d6({transition:{component:NF}})},"VSelect"),IVe=Yt()({name:"VSelect",props:CVe(),emits:{"update:focused":t=>!0,"update:modelValue":t=>!0,"update:menu":t=>!0},setup(t,e){let{slots:r}=e;const{t:n}=aS(),i=ht(),s=ht(),a=ht(),o=xs(t,"menu"),c=Te({get:()=>o.value,set:O=>{o.value&&!O&&s.value?.ΨopenChildren.size||(o.value=O)}}),{items:l,transformIn:u,transformOut:f}=yUe(t),h=xs(t,"modelValue",[],O=>u(O===null?[null]:Du(O)),O=>{const D=f(O);return t.multiple?D:D[0]??null}),d=Te(()=>typeof t.counterValue=="function"?t.counterValue(h.value):typeof t.counterValue=="number"?t.counterValue:h.value.length),g=ehe(),p=Te(()=>h.value.map(O=>O.value)),m=ur(!1),y=Te(()=>c.value?t.closeText:t.openText);let v="",_;const x=Te(()=>t.hideSelected?l.value.filter(O=>!h.value.some(D=>t.valueComparator(D,O))):l.value),A=Te(()=>t.hideNoData&&!x.value.length||t.readonly||g?.isReadonly.value),C=Te(()=>({...t.menuProps,activatorProps:{...t.menuProps?.activatorProps||{},"aria-haspopup":"listbox"}})),R=ht(),M=TVe(R,i);function N(O){t.openOnClear&&(c.value=!0)}function Y(){A.value||(c.value=!c.value)}function H(O){lK(O)&&E(O)}function E(O){if(!O.key||t.readonly||g?.isReadonly.value)return;["Enter"," ","ArrowDown","ArrowUp","Home","End"].includes(O.key)&&O.preventDefault(),["Enter","ArrowDown"," "].includes(O.key)&&(c.value=!0),["Escape","Tab"].includes(O.key)&&(c.value=!1),O.key==="Home"?R.value?.focus("first"):O.key==="End"&&R.value?.focus("last");const D=1e3;if(t.multiple||!lK(O))return;const P=performance.now();P-_>D&&(v=""),v+=O.key.toLowerCase(),_=P;const B=l.value.find(z=>z.title.toLowerCase().startsWith(v));if(B!==void 0){h.value=[B];const z=x.value.indexOf(B);qn&&window.requestAnimationFrame(()=>{z>=0&&a.value?.scrollToIndex(z)})}}function k(O){let D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!O.props.disabled)if(t.multiple){const P=h.value.findIndex(z=>t.valueComparator(z.value,O.value)),B=D??!~P;if(~P){const z=B?[...h.value,O]:[...h.value];z.splice(P,1),h.value=z}else B&&(h.value=[...h.value,O])}else{const P=D!==!1;h.value=P?[O]:[],Bi(()=>{c.value=!1})}}function w(O){R.value?.$el.contains(O.relatedTarget)||(c.value=!1)}function T(){t.eager&&a.value?.calculateVisibleItems()}function L(){m.value&&i.value?.focus()}function I(O){m.value=!0}function U(O){if(O==null)h.value=[];else if(h7(i.value,":autofill")||h7(i.value,":-webkit-autofill")){const D=l.value.find(P=>P.title===O);D&&k(D)}else i.value&&(i.value.value="")}return cr(c,()=>{if(!t.hideSelected&&c.value&&h.value.length){const O=x.value.findIndex(D=>h.value.some(P=>t.valueComparator(P.value,D.value)));qn&&window.requestAnimationFrame(()=>{O>=0&&a.value?.scrollToIndex(O)})}}),cr(()=>t.items,(O,D)=>{c.value||m.value&&!D.length&&O.length&&(c.value=!0)}),_r(()=>{const O=!!(t.chips||r.chip),D=!!(!t.hideNoData||x.value.length||r["prepend-item"]||r["append-item"]||r["no-data"]),P=h.value.length>0,B=q7.filterProps(t),z=P||!m.value&&t.label&&!t.persistentPlaceholder?void 0:t.placeholder;return ue(q7,gr({ref:i},B,{modelValue:h.value.map(F=>F.props.value).join(", "),"onUpdate:modelValue":U,focused:m.value,"onUpdate:focused":F=>m.value=F,validationValue:h.externalValue,counterValue:d.value,dirty:P,class:["v-select",{"v-select--active-menu":c.value,"v-select--chips":!!t.chips,[`v-select--${t.multiple?"multiple":"single"}`]:!0,"v-select--selected":h.value.length,"v-select--selection-slot":!!r.selection},t.class],style:t.style,inputmode:"none",placeholder:z,"onClick:clear":N,"onMousedown:control":Y,onBlur:w,onKeydown:E,"aria-label":n(y.value),title:n(y.value)}),{...r,default:()=>ue(qr,null,[ue(j7,gr({ref:s,modelValue:c.value,"onUpdate:modelValue":F=>c.value=F,activator:"parent",contentClass:"v-select__content",disabled:A.value,eager:t.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:t.transition,onAfterEnter:T,onAfterLeave:L},C.value),{default:()=>[D&&ue(Wy,gr({ref:R,selected:p.value,selectStrategy:t.multiple?"independent":"single-independent",onMousedown:F=>F.preventDefault(),onKeydown:H,onFocusin:I,tabindex:"-1","aria-live":"polite",color:t.itemColor??t.color},M,t.listProps),{default:()=>[r["prepend-item"]?.(),!x.value.length&&!t.hideNoData&&(r["no-data"]?.()??ue(Uo,{title:n(t.noDataText)},null)),ue(AVe,{ref:a,renderless:!0,items:x.value},{default:F=>{let{item:X,index:W,itemRef:q}=F;const G=gr(X.props,{ref:q,key:W,onClick:()=>k(X,null)});return r.item?.({item:X,index:W,props:G})??ue(Uo,gr(G,{role:"option"}),{prepend:ee=>{let{isSelected:ae}=ee;return ue(qr,null,[t.multiple&&!t.hideSelected?ue(lVe,{key:X.value,modelValue:ae,ripple:!1,tabindex:"-1"},null):void 0,X.props.prependAvatar&&ue(Wg,{image:X.props.prependAvatar},null),X.props.prependIcon&&ue(Fn,{icon:X.props.prependIcon},null)])}})}}),r["append-item"]?.()]})]}),h.value.map((F,X)=>{function W(ae){ae.stopPropagation(),ae.preventDefault(),k(F,!1)}const q={"onClick:close":W,onKeydown(ae){ae.key!=="Enter"&&ae.key!==" "||(ae.preventDefault(),ae.stopPropagation(),W(ae))},onMousedown(ae){ae.preventDefault(),ae.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},G=O?!!r.chip:!!r.selection,ee=G?Yoe(O?r.chip({item:F,index:X,props:q}):r.selection({item:F,index:X})):void 0;if(!(G&&!ee))return ue("div",{key:F.value,class:"v-select__selection"},[O?r.chip?ue(Xs,{key:"chip-defaults",defaults:{VChip:{closable:t.closableChips,size:"small",text:F.title}}},{default:()=>[ee]}):ue(mVe,gr({key:"chip",closable:t.closableChips,size:"small",text:F.title,disabled:F.props.disabled},q),null):ee??ue("span",{class:"v-select__selection-text"},[F.title,t.multiple&&X<h.value.length-1&&ue("span",{class:"v-select__selection-comma"},[Mn(",")])])])})]),"append-inner":function(){for(var F=arguments.length,X=new Array(F),W=0;W<F;W++)X[W]=arguments[W];return ue(qr,null,[r["append-inner"]?.(...X),t.menuIcon?ue(Fn,{class:"v-select__menu-icon",icon:t.menuIcon},null):void 0])}})}),kS({isFocused:m,menu:c,select:k},i)}}),RVe=Di({__name:"SectionAccueil",props:{nEtapes:{},etape:{}},emits:["retour","avancer"],setup(t,{emit:e}){const r=e,{mdAndUp:n}=n0(),{மொழியாக்கம்_பயன்படுத்து:i}=s0(),{$மொ:s}=i({}),a=[{nom:"nsih24",logo:Ar(()=>import("./logo nsih 2024-D3_acZvx.js"),[])},{nom:"egu24",logo:Ar(()=>import("./logo cours egu24-DTKkpUat.js"),[])}],o=ht(a[0].nom),c=ht();return Qs(async()=>{c.value=(await a.find(l=>l.nom===o.value)?.logo)?.default}),(l,u)=>(pr(),Qr(p6,{"n-etapes":l.nEtapes,etape:l.etape,onRetour:u[1]||(u[1]=()=>r("retour")),onAvancer:u[2]||(u[2]=()=>r("avancer"))},{default:mt(()=>[ue(ua,{cols:ct(n)?4:12,class:"pa-6 my-auto"},{default:mt(()=>[ue(Hy,{height:"250",src:OIe})]),_:1},8,["cols"]),ue(ua,{cols:ct(n)?8:12,class:ku({"my-auto":!0,"text-center":!ct(n),"pt-0":!0})},{default:mt(()=>[ue(Hy,{class:ku({"mx-4":!ct(n)}),src:c.value,height:"150",width:ct(n)?600:void 0},null,8,["class","src","width"]),Bs("div",{class:ku({"text-h4":ct(n),"text-h5":!ct(n),"font-weight-light":!0,"mb-n1":!0,"mx-4":!ct(n)})},[ue(IVe,{modelValue:o.value,"onUpdate:modelValue":u[0]||(u[0]=f=>o.value=f),items:a.map(f=>f.nom),variant:"plain"},{selection:mt(({item:f})=>[Bs("span",{class:ku({"text-h4":ct(n),"text-h5":!ct(n),"font-weight-light":!0})},xi(ct(s)(`accueil.titre.${f.value}`)),3)]),_:1},8,["modelValue","items"])],2),ue(Jc,{"prepend-icon":"mdi-earth",class:"my-6"},{default:mt(()=>[Mn(xi(ct(s)("accueil.changerLangue"))+" ",1),ue(rhe)]),_:1})]),_:1},8,["cols","class"])]),_:1},8,["n-etapes","etape"]))}});function lhe(t,e){return function(){return t.apply(e,arguments)}}const{toString:PVe}=Object.prototype,{getPrototypeOf:zF}=Object,CS=(t=>e=>{const r=PVe.call(e);return t[r]||(t[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),ef=t=>(t=t.toLowerCase(),e=>CS(e)===t),IS=t=>e=>typeof e===t,{isArray:Yv}=Array,c4=IS("undefined");function BVe(t){return t!==null&&!c4(t)&&t.constructor!==null&&!c4(t.constructor)&&tl(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const uhe=ef("ArrayBuffer");function DVe(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&uhe(t.buffer),e}const OVe=IS("string"),tl=IS("function"),fhe=IS("number"),RS=t=>t!==null&&typeof t=="object",NVe=t=>t===!0||t===!1,Px=t=>{if(CS(t)!=="object")return!1;const e=zF(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},MVe=ef("Date"),LVe=ef("File"),FVe=ef("Blob"),$Ve=ef("FileList"),UVe=t=>RS(t)&&tl(t.pipe),VVe=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||tl(t.append)&&((e=CS(t))==="formdata"||e==="object"&&tl(t.toString)&&t.toString()==="[object FormData]"))},jVe=ef("URLSearchParams"),[zVe,qVe,HVe,WVe]=["ReadableStream","Request","Response","Headers"].map(ef),KVe=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function g6(t,e,{allOwnKeys:r=!1}={}){if(t===null||typeof t>"u")return;let n,i;if(typeof t!="object"&&(t=[t]),Yv(t))for(n=0,i=t.length;n<i;n++)e.call(null,t[n],n,t);else{const s=r?Object.getOwnPropertyNames(t):Object.keys(t),a=s.length;let o;for(n=0;n<a;n++)o=s[n],e.call(null,t[o],o,t)}}function hhe(t,e){e=e.toLowerCase();const r=Object.keys(t);let n=r.length,i;for(;n-- >0;)if(i=r[n],e===i.toLowerCase())return i;return null}const hg=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:Wo,dhe=t=>!c4(t)&&t!==hg;function vO(){const{caseless:t}=dhe(this)&&this||{},e={},r=(n,i)=>{const s=t&&hhe(e,i)||i;Px(e[s])&&Px(n)?e[s]=vO(e[s],n):Px(n)?e[s]=vO({},n):Yv(n)?e[s]=n.slice():e[s]=n};for(let n=0,i=arguments.length;n<i;n++)arguments[n]&&g6(arguments[n],r);return e}const GVe=(t,e,r,{allOwnKeys:n}={})=>(g6(e,(i,s)=>{r&&tl(i)?t[s]=lhe(i,r):t[s]=i},{allOwnKeys:n}),t),YVe=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),XVe=(t,e,r,n)=>{t.prototype=Object.create(e.prototype,n),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),r&&Object.assign(t.prototype,r)},ZVe=(t,e,r,n)=>{let i,s,a;const o={};if(e=e||{},t==null)return e;do{for(i=Object.getOwnPropertyNames(t),s=i.length;s-- >0;)a=i[s],(!n||n(a,t,e))&&!o[a]&&(e[a]=t[a],o[a]=!0);t=r!==!1&&zF(t)}while(t&&(!r||r(t,e))&&t!==Object.prototype);return e},JVe=(t,e,r)=>{t=String(t),(r===void 0||r>t.length)&&(r=t.length),r-=e.length;const n=t.indexOf(e,r);return n!==-1&&n===r},QVe=t=>{if(!t)return null;if(Yv(t))return t;let e=t.length;if(!fhe(e))return null;const r=new Array(e);for(;e-- >0;)r[e]=t[e];return r},eje=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&zF(Uint8Array)),tje=(t,e)=>{const n=(t&&t[Symbol.iterator]).call(t);let i;for(;(i=n.next())&&!i.done;){const s=i.value;e.call(t,s[0],s[1])}},rje=(t,e)=>{let r;const n=[];for(;(r=t.exec(e))!==null;)n.push(r);return n},nje=ef("HTMLFormElement"),ije=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,n,i){return n.toUpperCase()+i}),oX=(({hasOwnProperty:t})=>(e,r)=>t.call(e,r))(Object.prototype),sje=ef("RegExp"),phe=(t,e)=>{const r=Object.getOwnPropertyDescriptors(t),n={};g6(r,(i,s)=>{let a;(a=e(i,s,t))!==!1&&(n[s]=a||i)}),Object.defineProperties(t,n)},aje=t=>{phe(t,(e,r)=>{if(tl(t)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const n=t[r];if(tl(n)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},oje=(t,e)=>{const r={},n=i=>{i.forEach(s=>{r[s]=!0})};return Yv(t)?n(t):n(String(t).split(e)),r},cje=()=>{},lje=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e,LC="abcdefghijklmnopqrstuvwxyz",cX="0123456789",ghe={DIGIT:cX,ALPHA:LC,ALPHA_DIGIT:LC+LC.toUpperCase()+cX},uje=(t=16,e=ghe.ALPHA_DIGIT)=>{let r="";const{length:n}=e;for(;t--;)r+=e[Math.random()*n|0];return r};function fje(t){return!!(t&&tl(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const hje=t=>{const e=new Array(10),r=(n,i)=>{if(RS(n)){if(e.indexOf(n)>=0)return;if(!("toJSON"in n)){e[i]=n;const s=Yv(n)?[]:{};return g6(n,(a,o)=>{const c=r(a,i+1);!c4(c)&&(s[o]=c)}),e[i]=void 0,s}}return n};return r(t,0)},dje=ef("AsyncFunction"),pje=t=>t&&(RS(t)||tl(t))&&tl(t.then)&&tl(t.catch),mhe=((t,e)=>t?setImmediate:e?((r,n)=>(hg.addEventListener("message",({source:i,data:s})=>{i===hg&&s===r&&n.length&&n.shift()()},!1),i=>{n.push(i),hg.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",tl(hg.postMessage)),gje=typeof queueMicrotask<"u"?queueMicrotask.bind(hg):typeof Et<"u"&&Et.nextTick||mhe,Xe={isArray:Yv,isArrayBuffer:uhe,isBuffer:BVe,isFormData:VVe,isArrayBufferView:DVe,isString:OVe,isNumber:fhe,isBoolean:NVe,isObject:RS,isPlainObject:Px,isReadableStream:zVe,isRequest:qVe,isResponse:HVe,isHeaders:WVe,isUndefined:c4,isDate:MVe,isFile:LVe,isBlob:FVe,isRegExp:sje,isFunction:tl,isStream:UVe,isURLSearchParams:jVe,isTypedArray:eje,isFileList:$Ve,forEach:g6,merge:vO,extend:GVe,trim:KVe,stripBOM:YVe,inherits:XVe,toFlatObject:ZVe,kindOf:CS,kindOfTest:ef,endsWith:JVe,toArray:QVe,forEachEntry:tje,matchAll:rje,isHTMLForm:nje,hasOwnProperty:oX,hasOwnProp:oX,reduceDescriptors:phe,freezeMethods:aje,toObjectSet:oje,toCamelCase:ije,noop:cje,toFiniteNumber:lje,findKey:hhe,global:hg,isContextDefined:dhe,ALPHABET:ghe,generateString:uje,isSpecCompliantForm:fje,toJSONObject:hje,isAsyncFn:dje,isThenable:pje,setImmediate:mhe,asap:gje};function Pr(t,e,r,n,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),r&&(this.config=r),n&&(this.request=n),i&&(this.response=i,this.status=i.status?i.status:null)}Xe.inherits(Pr,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Xe.toJSONObject(this.config),code:this.code,status:this.status}}});const yhe=Pr.prototype,vhe={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{vhe[t]={value:t}});Object.defineProperties(Pr,vhe);Object.defineProperty(yhe,"isAxiosError",{value:!0});Pr.from=(t,e,r,n,i,s)=>{const a=Object.create(yhe);return Xe.toFlatObject(t,a,function(c){return c!==Error.prototype},o=>o!=="isAxiosError"),Pr.call(a,t.message,e,r,n,i),a.cause=t,a.name=t.name,s&&Object.assign(a,s),a};const mje=null;function bO(t){return Xe.isPlainObject(t)||Xe.isArray(t)}function bhe(t){return Xe.endsWith(t,"[]")?t.slice(0,-2):t}function lX(t,e,r){return t?t.concat(e).map(function(i,s){return i=bhe(i),!r&&s?"["+i+"]":i}).join(r?".":""):e}function yje(t){return Xe.isArray(t)&&!t.some(bO)}const vje=Xe.toFlatObject(Xe,{},null,function(e){return/^is[A-Z]/.test(e)});function PS(t,e,r){if(!Xe.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,r=Xe.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(p,m){return!Xe.isUndefined(m[p])});const n=r.metaTokens,i=r.visitor||u,s=r.dots,a=r.indexes,c=(r.Blob||typeof Blob<"u"&&Blob)&&Xe.isSpecCompliantForm(e);if(!Xe.isFunction(i))throw new TypeError("visitor must be a function");function l(g){if(g===null)return"";if(Xe.isDate(g))return g.toISOString();if(!c&&Xe.isBlob(g))throw new Pr("Blob is not supported. Use a Buffer instead.");return Xe.isArrayBuffer(g)||Xe.isTypedArray(g)?c&&typeof Blob=="function"?new Blob([g]):We.from(g):g}function u(g,p,m){let y=g;if(g&&!m&&typeof g=="object"){if(Xe.endsWith(p,"{}"))p=n?p:p.slice(0,-2),g=JSON.stringify(g);else if(Xe.isArray(g)&&yje(g)||(Xe.isFileList(g)||Xe.endsWith(p,"[]"))&&(y=Xe.toArray(g)))return p=bhe(p),y.forEach(function(_,x){!(Xe.isUndefined(_)||_===null)&&e.append(a===!0?lX([p],x,s):a===null?p:p+"[]",l(_))}),!1}return bO(g)?!0:(e.append(lX(m,p,s),l(g)),!1)}const f=[],h=Object.assign(vje,{defaultVisitor:u,convertValue:l,isVisitable:bO});function d(g,p){if(!Xe.isUndefined(g)){if(f.indexOf(g)!==-1)throw Error("Circular reference detected in "+p.join("."));f.push(g),Xe.forEach(g,function(y,v){(!(Xe.isUndefined(y)||y===null)&&i.call(e,y,Xe.isString(v)?v.trim():v,p,h))===!0&&d(y,p?p.concat(v):[v])}),f.pop()}}if(!Xe.isObject(t))throw new TypeError("data must be an object");return d(t),e}function uX(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(n){return e[n]})}function qF(t,e){this._pairs=[],t&&PS(t,this,e)}const whe=qF.prototype;whe.append=function(e,r){this._pairs.push([e,r])};whe.toString=function(e){const r=e?function(n){return e.call(this,n,uX)}:uX;return this._pairs.map(function(i){return r(i[0])+"="+r(i[1])},"").join("&")};function bje(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function _he(t,e,r){if(!e)return t;const n=r&&r.encode||bje,i=r&&r.serialize;let s;if(i?s=i(e,r):s=Xe.isURLSearchParams(e)?e.toString():new qF(e,r).toString(n),s){const a=t.indexOf("#");a!==-1&&(t=t.slice(0,a)),t+=(t.indexOf("?")===-1?"?":"&")+s}return t}class fX{constructor(){this.handlers=[]}use(e,r,n){return this.handlers.push({fulfilled:e,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Xe.forEach(this.handlers,function(n){n!==null&&e(n)})}}const xhe={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},wje=typeof URLSearchParams<"u"?URLSearchParams:qF,_je=typeof FormData<"u"?FormData:null,xje=typeof Blob<"u"?Blob:null,Eje={isBrowser:!0,classes:{URLSearchParams:wje,FormData:_je,Blob:xje},protocols:["http","https","file","blob","url","data"]},HF=typeof window<"u"&&typeof document<"u",wO=typeof navigator=="object"&&navigator||void 0,Sje=HF&&(!wO||["ReactNative","NativeScript","NS"].indexOf(wO.product)<0),Aje=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Tje=HF&&window.location.href||"http://localhost",kje=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:HF,hasStandardBrowserEnv:Sje,hasStandardBrowserWebWorkerEnv:Aje,navigator:wO,origin:Tje},Symbol.toStringTag,{value:"Module"})),xc={...kje,...Eje};function Cje(t,e){return PS(t,new xc.classes.URLSearchParams,Object.assign({visitor:function(r,n,i,s){return xc.isNode&&Xe.isBuffer(r)?(this.append(n,r.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},e))}function Ije(t){return Xe.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function Rje(t){const e={},r=Object.keys(t);let n;const i=r.length;let s;for(n=0;n<i;n++)s=r[n],e[s]=t[s];return e}function Ehe(t){function e(r,n,i,s){let a=r[s++];if(a==="__proto__")return!0;const o=Number.isFinite(+a),c=s>=r.length;return a=!a&&Xe.isArray(i)?i.length:a,c?(Xe.hasOwnProp(i,a)?i[a]=[i[a],n]:i[a]=n,!o):((!i[a]||!Xe.isObject(i[a]))&&(i[a]=[]),e(r,n,i[a],s)&&Xe.isArray(i[a])&&(i[a]=Rje(i[a])),!o)}if(Xe.isFormData(t)&&Xe.isFunction(t.entries)){const r={};return Xe.forEachEntry(t,(n,i)=>{e(Ije(n),i,r,0)}),r}return null}function Pje(t,e,r){if(Xe.isString(t))try{return(e||JSON.parse)(t),Xe.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(0,JSON.stringify)(t)}const m6={transitional:xhe,adapter:["xhr","http","fetch"],transformRequest:[function(e,r){const n=r.getContentType()||"",i=n.indexOf("application/json")>-1,s=Xe.isObject(e);if(s&&Xe.isHTMLForm(e)&&(e=new FormData(e)),Xe.isFormData(e))return i?JSON.stringify(Ehe(e)):e;if(Xe.isArrayBuffer(e)||Xe.isBuffer(e)||Xe.isStream(e)||Xe.isFile(e)||Xe.isBlob(e)||Xe.isReadableStream(e))return e;if(Xe.isArrayBufferView(e))return e.buffer;if(Xe.isURLSearchParams(e))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let o;if(s){if(n.indexOf("application/x-www-form-urlencoded")>-1)return Cje(e,this.formSerializer).toString();if((o=Xe.isFileList(e))||n.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return PS(o?{"files[]":e}:e,c&&new c,this.formSerializer)}}return s||i?(r.setContentType("application/json",!1),Pje(e)):e}],transformResponse:[function(e){const r=this.transitional||m6.transitional,n=r&&r.forcedJSONParsing,i=this.responseType==="json";if(Xe.isResponse(e)||Xe.isReadableStream(e))return e;if(e&&Xe.isString(e)&&(n&&!this.responseType||i)){const a=!(r&&r.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(o){if(a)throw o.name==="SyntaxError"?Pr.from(o,Pr.ERR_BAD_RESPONSE,this,null,this.response):o}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:xc.classes.FormData,Blob:xc.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Xe.forEach(["delete","get","head","post","put","patch"],t=>{m6.headers[t]={}});const Bje=Xe.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Dje=t=>{const e={};let r,n,i;return t&&t.split(`
`).forEach(function(a){i=a.indexOf(":"),r=a.substring(0,i).trim().toLowerCase(),n=a.substring(i+1).trim(),!(!r||e[r]&&Bje[r])&&(r==="set-cookie"?e[r]?e[r].push(n):e[r]=[n]:e[r]=e[r]?e[r]+", "+n:n)}),e},hX=Symbol("internals");function ow(t){return t&&String(t).trim().toLowerCase()}function Bx(t){return t===!1||t==null?t:Xe.isArray(t)?t.map(Bx):String(t)}function Oje(t){const e=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(t);)e[n[1]]=n[2];return e}const Nje=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function FC(t,e,r,n,i){if(Xe.isFunction(n))return n.call(this,e,r);if(i&&(e=r),!!Xe.isString(e)){if(Xe.isString(n))return e.indexOf(n)!==-1;if(Xe.isRegExp(n))return n.test(e)}}function Mje(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,r,n)=>r.toUpperCase()+n)}function Lje(t,e){const r=Xe.toCamelCase(" "+e);["get","set","has"].forEach(n=>{Object.defineProperty(t,n+r,{value:function(i,s,a){return this[n].call(this,e,i,s,a)},configurable:!0})})}class Ec{constructor(e){e&&this.set(e)}set(e,r,n){const i=this;function s(o,c,l){const u=ow(c);if(!u)throw new Error("header name must be a non-empty string");const f=Xe.findKey(i,u);(!f||i[f]===void 0||l===!0||l===void 0&&i[f]!==!1)&&(i[f||c]=Bx(o))}const a=(o,c)=>Xe.forEach(o,(l,u)=>s(l,u,c));if(Xe.isPlainObject(e)||e instanceof this.constructor)a(e,r);else if(Xe.isString(e)&&(e=e.trim())&&!Nje(e))a(Dje(e),r);else if(Xe.isHeaders(e))for(const[o,c]of e.entries())s(c,o,n);else e!=null&&s(r,e,n);return this}get(e,r){if(e=ow(e),e){const n=Xe.findKey(this,e);if(n){const i=this[n];if(!r)return i;if(r===!0)return Oje(i);if(Xe.isFunction(r))return r.call(this,i,n);if(Xe.isRegExp(r))return r.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,r){if(e=ow(e),e){const n=Xe.findKey(this,e);return!!(n&&this[n]!==void 0&&(!r||FC(this,this[n],n,r)))}return!1}delete(e,r){const n=this;let i=!1;function s(a){if(a=ow(a),a){const o=Xe.findKey(n,a);o&&(!r||FC(n,n[o],o,r))&&(delete n[o],i=!0)}}return Xe.isArray(e)?e.forEach(s):s(e),i}clear(e){const r=Object.keys(this);let n=r.length,i=!1;for(;n--;){const s=r[n];(!e||FC(this,this[s],s,e,!0))&&(delete this[s],i=!0)}return i}normalize(e){const r=this,n={};return Xe.forEach(this,(i,s)=>{const a=Xe.findKey(n,s);if(a){r[a]=Bx(i),delete r[s];return}const o=e?Mje(s):String(s).trim();o!==s&&delete r[s],r[o]=Bx(i),n[o]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const r=Object.create(null);return Xe.forEach(this,(n,i)=>{n!=null&&n!==!1&&(r[i]=e&&Xe.isArray(n)?n.join(", "):n)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,r])=>e+": "+r).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...r){const n=new this(e);return r.forEach(i=>n.set(i)),n}static accessor(e){const n=(this[hX]=this[hX]={accessors:{}}).accessors,i=this.prototype;function s(a){const o=ow(a);n[o]||(Lje(i,a),n[o]=!0)}return Xe.isArray(e)?e.forEach(s):s(e),this}}Ec.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Xe.reduceDescriptors(Ec.prototype,({value:t},e)=>{let r=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(n){this[r]=n}}});Xe.freezeMethods(Ec);function $C(t,e){const r=this||m6,n=e||r,i=Ec.from(n.headers);let s=n.data;return Xe.forEach(t,function(o){s=o.call(r,s,i.normalize(),e?e.status:void 0)}),i.normalize(),s}function She(t){return!!(t&&t.__CANCEL__)}function Xv(t,e,r){Pr.call(this,t??"canceled",Pr.ERR_CANCELED,e,r),this.name="CanceledError"}Xe.inherits(Xv,Pr,{__CANCEL__:!0});function Ahe(t,e,r){const n=r.config.validateStatus;!r.status||!n||n(r.status)?t(r):e(new Pr("Request failed with status code "+r.status,[Pr.ERR_BAD_REQUEST,Pr.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function Fje(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function $je(t,e){t=t||10;const r=new Array(t),n=new Array(t);let i=0,s=0,a;return e=e!==void 0?e:1e3,function(c){const l=Date.now(),u=n[s];a||(a=l),r[i]=c,n[i]=l;let f=s,h=0;for(;f!==i;)h+=r[f++],f=f%t;if(i=(i+1)%t,i===s&&(s=(s+1)%t),l-a<e)return;const d=u&&l-u;return d?Math.round(h*1e3/d):void 0}}function Uje(t,e){let r=0,n=1e3/e,i,s;const a=(l,u=Date.now())=>{r=u,i=null,s&&(clearTimeout(s),s=null),t.apply(null,l)};return[(...l)=>{const u=Date.now(),f=u-r;f>=n?a(l,u):(i=l,s||(s=setTimeout(()=>{s=null,a(i)},n-f)))},()=>i&&a(i)]}const W7=(t,e,r=3)=>{let n=0;const i=$je(50,250);return Uje(s=>{const a=s.loaded,o=s.lengthComputable?s.total:void 0,c=a-n,l=i(c),u=a<=o;n=a;const f={loaded:a,total:o,progress:o?a/o:void 0,bytes:c,rate:l||void 0,estimated:l&&o&&u?(o-a)/l:void 0,event:s,lengthComputable:o!=null,[e?"download":"upload"]:!0};t(f)},r)},dX=(t,e)=>{const r=t!=null;return[n=>e[0]({lengthComputable:r,total:t,loaded:n}),e[1]]},pX=t=>(...e)=>Xe.asap(()=>t(...e)),Vje=xc.hasStandardBrowserEnv?function(){const e=xc.navigator&&/(msie|trident)/i.test(xc.navigator.userAgent),r=document.createElement("a");let n;function i(s){let a=s;return e&&(r.setAttribute("href",a),a=r.href),r.setAttribute("href",a),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:r.pathname.charAt(0)==="/"?r.pathname:"/"+r.pathname}}return n=i(window.location.href),function(a){const o=Xe.isString(a)?i(a):a;return o.protocol===n.protocol&&o.host===n.host}}():function(){return function(){return!0}}(),jje=xc.hasStandardBrowserEnv?{write(t,e,r,n,i,s){const a=[t+"="+encodeURIComponent(e)];Xe.isNumber(r)&&a.push("expires="+new Date(r).toGMTString()),Xe.isString(n)&&a.push("path="+n),Xe.isString(i)&&a.push("domain="+i),s===!0&&a.push("secure"),document.cookie=a.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function zje(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function qje(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function The(t,e){return t&&!zje(e)?qje(t,e):e}const gX=t=>t instanceof Ec?{...t}:t;function Kg(t,e){e=e||{};const r={};function n(l,u,f){return Xe.isPlainObject(l)&&Xe.isPlainObject(u)?Xe.merge.call({caseless:f},l,u):Xe.isPlainObject(u)?Xe.merge({},u):Xe.isArray(u)?u.slice():u}function i(l,u,f){if(Xe.isUndefined(u)){if(!Xe.isUndefined(l))return n(void 0,l,f)}else return n(l,u,f)}function s(l,u){if(!Xe.isUndefined(u))return n(void 0,u)}function a(l,u){if(Xe.isUndefined(u)){if(!Xe.isUndefined(l))return n(void 0,l)}else return n(void 0,u)}function o(l,u,f){if(f in e)return n(l,u);if(f in t)return n(void 0,l)}const c={url:s,method:s,data:s,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:o,headers:(l,u)=>i(gX(l),gX(u),!0)};return Xe.forEach(Object.keys(Object.assign({},t,e)),function(u){const f=c[u]||i,h=f(t[u],e[u],u);Xe.isUndefined(h)&&f!==o||(r[u]=h)}),r}const khe=t=>{const e=Kg({},t);let{data:r,withXSRFToken:n,xsrfHeaderName:i,xsrfCookieName:s,headers:a,auth:o}=e;e.headers=a=Ec.from(a),e.url=_he(The(e.baseURL,e.url),t.params,t.paramsSerializer),o&&a.set("Authorization","Basic "+btoa((o.username||"")+":"+(o.password?unescape(encodeURIComponent(o.password)):"")));let c;if(Xe.isFormData(r)){if(xc.hasStandardBrowserEnv||xc.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if((c=a.getContentType())!==!1){const[l,...u]=c?c.split(";").map(f=>f.trim()).filter(Boolean):[];a.setContentType([l||"multipart/form-data",...u].join("; "))}}if(xc.hasStandardBrowserEnv&&(n&&Xe.isFunction(n)&&(n=n(e)),n||n!==!1&&Vje(e.url))){const l=i&&s&&jje.read(s);l&&a.set(i,l)}return e},Hje=typeof XMLHttpRequest<"u",Wje=Hje&&function(t){return new Promise(function(r,n){const i=khe(t);let s=i.data;const a=Ec.from(i.headers).normalize();let{responseType:o,onUploadProgress:c,onDownloadProgress:l}=i,u,f,h,d,g;function p(){d&&d(),g&&g(),i.cancelToken&&i.cancelToken.unsubscribe(u),i.signal&&i.signal.removeEventListener("abort",u)}let m=new XMLHttpRequest;m.open(i.method.toUpperCase(),i.url,!0),m.timeout=i.timeout;function y(){if(!m)return;const _=Ec.from("getAllResponseHeaders"in m&&m.getAllResponseHeaders()),A={data:!o||o==="text"||o==="json"?m.responseText:m.response,status:m.status,statusText:m.statusText,headers:_,config:t,request:m};Ahe(function(R){r(R),p()},function(R){n(R),p()},A),m=null}"onloadend"in m?m.onloadend=y:m.onreadystatechange=function(){!m||m.readyState!==4||m.status===0&&!(m.responseURL&&m.responseURL.indexOf("file:")===0)||setTimeout(y)},m.onabort=function(){m&&(n(new Pr("Request aborted",Pr.ECONNABORTED,t,m)),m=null)},m.onerror=function(){n(new Pr("Network Error",Pr.ERR_NETWORK,t,m)),m=null},m.ontimeout=function(){let x=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const A=i.transitional||xhe;i.timeoutErrorMessage&&(x=i.timeoutErrorMessage),n(new Pr(x,A.clarifyTimeoutError?Pr.ETIMEDOUT:Pr.ECONNABORTED,t,m)),m=null},s===void 0&&a.setContentType(null),"setRequestHeader"in m&&Xe.forEach(a.toJSON(),function(x,A){m.setRequestHeader(A,x)}),Xe.isUndefined(i.withCredentials)||(m.withCredentials=!!i.withCredentials),o&&o!=="json"&&(m.responseType=i.responseType),l&&([h,g]=W7(l,!0),m.addEventListener("progress",h)),c&&m.upload&&([f,d]=W7(c),m.upload.addEventListener("progress",f),m.upload.addEventListener("loadend",d)),(i.cancelToken||i.signal)&&(u=_=>{m&&(n(!_||_.type?new Xv(null,t,m):_),m.abort(),m=null)},i.cancelToken&&i.cancelToken.subscribe(u),i.signal&&(i.signal.aborted?u():i.signal.addEventListener("abort",u)));const v=Fje(i.url);if(v&&xc.protocols.indexOf(v)===-1){n(new Pr("Unsupported protocol "+v+":",Pr.ERR_BAD_REQUEST,t));return}m.send(s||null)})},Kje=(t,e)=>{const{length:r}=t=t?t.filter(Boolean):[];if(e||r){let n=new AbortController,i;const s=function(l){if(!i){i=!0,o();const u=l instanceof Error?l:this.reason;n.abort(u instanceof Pr?u:new Xv(u instanceof Error?u.message:u))}};let a=e&&setTimeout(()=>{a=null,s(new Pr(`timeout ${e} of ms exceeded`,Pr.ETIMEDOUT))},e);const o=()=>{t&&(a&&clearTimeout(a),a=null,t.forEach(l=>{l.unsubscribe?l.unsubscribe(s):l.removeEventListener("abort",s)}),t=null)};t.forEach(l=>l.addEventListener("abort",s));const{signal:c}=n;return c.unsubscribe=()=>Xe.asap(o),c}},Gje=function*(t,e){let r=t.byteLength;if(r<e){yield t;return}let n=0,i;for(;n<r;)i=n+e,yield t.slice(n,i),n=i},Yje=async function*(t,e){for await(const r of Xje(t))yield*Gje(r,e)},Xje=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:r,value:n}=await e.read();if(r)break;yield n}}finally{await e.cancel()}},mX=(t,e,r,n)=>{const i=Yje(t,e);let s=0,a,o=c=>{a||(a=!0,n&&n(c))};return new ReadableStream({async pull(c){try{const{done:l,value:u}=await i.next();if(l){o(),c.close();return}let f=u.byteLength;if(r){let h=s+=f;r(h)}c.enqueue(new Uint8Array(u))}catch(l){throw o(l),l}},cancel(c){return o(c),i.return()}},{highWaterMark:2})},BS=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",Che=BS&&typeof ReadableStream=="function",Zje=BS&&(typeof TextEncoder=="function"?(t=>e=>t.encode(e))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),Ihe=(t,...e)=>{try{return!!t(...e)}catch{return!1}},Jje=Che&&Ihe(()=>{let t=!1;const e=new Request(xc.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e}),yX=64*1024,_O=Che&&Ihe(()=>Xe.isReadableStream(new Response("").body)),K7={stream:_O&&(t=>t.body)};BS&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!K7[e]&&(K7[e]=Xe.isFunction(t[e])?r=>r[e]():(r,n)=>{throw new Pr(`Response type '${e}' is not supported`,Pr.ERR_NOT_SUPPORT,n)})})})(new Response);const Qje=async t=>{if(t==null)return 0;if(Xe.isBlob(t))return t.size;if(Xe.isSpecCompliantForm(t))return(await new Request(xc.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(Xe.isArrayBufferView(t)||Xe.isArrayBuffer(t))return t.byteLength;if(Xe.isURLSearchParams(t)&&(t=t+""),Xe.isString(t))return(await Zje(t)).byteLength},eze=async(t,e)=>{const r=Xe.toFiniteNumber(t.getContentLength());return r??Qje(e)},tze=BS&&(async t=>{let{url:e,method:r,data:n,signal:i,cancelToken:s,timeout:a,onDownloadProgress:o,onUploadProgress:c,responseType:l,headers:u,withCredentials:f="same-origin",fetchOptions:h}=khe(t);l=l?(l+"").toLowerCase():"text";let d=Kje([i,s&&s.toAbortSignal()],a),g;const p=d&&d.unsubscribe&&(()=>{d.unsubscribe()});let m;try{if(c&&Jje&&r!=="get"&&r!=="head"&&(m=await eze(u,n))!==0){let A=new Request(e,{method:"POST",body:n,duplex:"half"}),C;if(Xe.isFormData(n)&&(C=A.headers.get("content-type"))&&u.setContentType(C),A.body){const[R,M]=dX(m,W7(pX(c)));n=mX(A.body,yX,R,M)}}Xe.isString(f)||(f=f?"include":"omit");const y="credentials"in Request.prototype;g=new Request(e,{...h,signal:d,method:r.toUpperCase(),headers:u.normalize().toJSON(),body:n,duplex:"half",credentials:y?f:void 0});let v=await fetch(g);const _=_O&&(l==="stream"||l==="response");if(_O&&(o||_&&p)){const A={};["status","statusText","headers"].forEach(N=>{A[N]=v[N]});const C=Xe.toFiniteNumber(v.headers.get("content-length")),[R,M]=o&&dX(C,W7(pX(o),!0))||[];v=new Response(mX(v.body,yX,R,()=>{M&&M(),p&&p()}),A)}l=l||"text";let x=await K7[Xe.findKey(K7,l)||"text"](v,t);return!_&&p&&p(),await new Promise((A,C)=>{Ahe(A,C,{data:x,headers:Ec.from(v.headers),status:v.status,statusText:v.statusText,config:t,request:g})})}catch(y){throw p&&p(),y&&y.name==="TypeError"&&/fetch/i.test(y.message)?Object.assign(new Pr("Network Error",Pr.ERR_NETWORK,t,g),{cause:y.cause||y}):Pr.from(y,y&&y.code,t,g)}}),xO={http:mje,xhr:Wje,fetch:tze};Xe.forEach(xO,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const vX=t=>`- ${t}`,rze=t=>Xe.isFunction(t)||t===null||t===!1,Rhe={getAdapter:t=>{t=Xe.isArray(t)?t:[t];const{length:e}=t;let r,n;const i={};for(let s=0;s<e;s++){r=t[s];let a;if(n=r,!rze(r)&&(n=xO[(a=String(r)).toLowerCase()],n===void 0))throw new Pr(`Unknown adapter '${a}'`);if(n)break;i[a||"#"+s]=n}if(!n){const s=Object.entries(i).map(([o,c])=>`adapter ${o} `+(c===!1?"is not supported by the environment":"is not available in the build"));let a=e?s.length>1?`since :
`+s.map(vX).join(`
`):" "+vX(s[0]):"as no adapter specified";throw new Pr("There is no suitable adapter to dispatch the request "+a,"ERR_NOT_SUPPORT")}return n},adapters:xO};function UC(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Xv(null,t)}function bX(t){return UC(t),t.headers=Ec.from(t.headers),t.data=$C.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),Rhe.getAdapter(t.adapter||m6.adapter)(t).then(function(n){return UC(t),n.data=$C.call(t,t.transformResponse,n),n.headers=Ec.from(n.headers),n},function(n){return She(n)||(UC(t),n&&n.response&&(n.response.data=$C.call(t,t.transformResponse,n.response),n.response.headers=Ec.from(n.response.headers))),Promise.reject(n)})}const Phe="1.7.7",WF={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{WF[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});const wX={};WF.transitional=function(e,r,n){function i(s,a){return"[Axios v"+Phe+"] Transitional option '"+s+"'"+a+(n?". "+n:"")}return(s,a,o)=>{if(e===!1)throw new Pr(i(a," has been removed"+(r?" in "+r:"")),Pr.ERR_DEPRECATED);return r&&!wX[a]&&(wX[a]=!0,console.warn(i(a," has been deprecated since v"+r+" and will be removed in the near future"))),e?e(s,a,o):!0}};function nze(t,e,r){if(typeof t!="object")throw new Pr("options must be an object",Pr.ERR_BAD_OPTION_VALUE);const n=Object.keys(t);let i=n.length;for(;i-- >0;){const s=n[i],a=e[s];if(a){const o=t[s],c=o===void 0||a(o,s,t);if(c!==!0)throw new Pr("option "+s+" must be "+c,Pr.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new Pr("Unknown option "+s,Pr.ERR_BAD_OPTION)}}const EO={assertOptions:nze,validators:WF},B0=EO.validators;class Sg{constructor(e){this.defaults=e,this.interceptors={request:new fX,response:new fX}}async request(e,r){try{return await this._request(e,r)}catch(n){if(n instanceof Error){let i;Error.captureStackTrace?Error.captureStackTrace(i={}):i=new Error;const s=i.stack?i.stack.replace(/^.+\n/,""):"";try{n.stack?s&&!String(n.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+s):n.stack=s}catch{}}throw n}}_request(e,r){typeof e=="string"?(r=r||{},r.url=e):r=e||{},r=Kg(this.defaults,r);const{transitional:n,paramsSerializer:i,headers:s}=r;n!==void 0&&EO.assertOptions(n,{silentJSONParsing:B0.transitional(B0.boolean),forcedJSONParsing:B0.transitional(B0.boolean),clarifyTimeoutError:B0.transitional(B0.boolean)},!1),i!=null&&(Xe.isFunction(i)?r.paramsSerializer={serialize:i}:EO.assertOptions(i,{encode:B0.function,serialize:B0.function},!0)),r.method=(r.method||this.defaults.method||"get").toLowerCase();let a=s&&Xe.merge(s.common,s[r.method]);s&&Xe.forEach(["delete","get","head","post","put","patch","common"],g=>{delete s[g]}),r.headers=Ec.concat(a,s);const o=[];let c=!0;this.interceptors.request.forEach(function(p){typeof p.runWhen=="function"&&p.runWhen(r)===!1||(c=c&&p.synchronous,o.unshift(p.fulfilled,p.rejected))});const l=[];this.interceptors.response.forEach(function(p){l.push(p.fulfilled,p.rejected)});let u,f=0,h;if(!c){const g=[bX.bind(this),void 0];for(g.unshift.apply(g,o),g.push.apply(g,l),h=g.length,u=Promise.resolve(r);f<h;)u=u.then(g[f++],g[f++]);return u}h=o.length;let d=r;for(f=0;f<h;){const g=o[f++],p=o[f++];try{d=g(d)}catch(m){p.call(this,m);break}}try{u=bX.call(this,d)}catch(g){return Promise.reject(g)}for(f=0,h=l.length;f<h;)u=u.then(l[f++],l[f++]);return u}getUri(e){e=Kg(this.defaults,e);const r=The(e.baseURL,e.url);return _he(r,e.params,e.paramsSerializer)}}Xe.forEach(["delete","get","head","options"],function(e){Sg.prototype[e]=function(r,n){return this.request(Kg(n||{},{method:e,url:r,data:(n||{}).data}))}});Xe.forEach(["post","put","patch"],function(e){function r(n){return function(s,a,o){return this.request(Kg(o||{},{method:e,headers:n?{"Content-Type":"multipart/form-data"}:{},url:s,data:a}))}}Sg.prototype[e]=r(),Sg.prototype[e+"Form"]=r(!0)});class KF{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(s){r=s});const n=this;this.promise.then(i=>{if(!n._listeners)return;let s=n._listeners.length;for(;s-- >0;)n._listeners[s](i);n._listeners=null}),this.promise.then=i=>{let s;const a=new Promise(o=>{n.subscribe(o),s=o}).then(i);return a.cancel=function(){n.unsubscribe(s)},a},e(function(s,a,o){n.reason||(n.reason=new Xv(s,a,o),r(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const r=this._listeners.indexOf(e);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const e=new AbortController,r=n=>{e.abort(n)};return this.subscribe(r),e.signal.unsubscribe=()=>this.unsubscribe(r),e.signal}static source(){let e;return{token:new KF(function(i){e=i}),cancel:e}}}function ize(t){return function(r){return t.apply(null,r)}}function sze(t){return Xe.isObject(t)&&t.isAxiosError===!0}const SO={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(SO).forEach(([t,e])=>{SO[e]=t});function Bhe(t){const e=new Sg(t),r=lhe(Sg.prototype.request,e);return Xe.extend(r,Sg.prototype,e,{allOwnKeys:!0}),Xe.extend(r,e,null,{allOwnKeys:!0}),r.create=function(i){return Bhe(Kg(t,i))},r}const ns=Bhe(m6);ns.Axios=Sg;ns.CanceledError=Xv;ns.CancelToken=KF;ns.isCancel=She;ns.VERSION=Phe;ns.toFormData=PS;ns.AxiosError=Pr;ns.Cancel=ns.CanceledError;ns.all=function(e){return Promise.all(e)};ns.spread=ize;ns.isAxiosError=sze;ns.mergeConfig=Kg;ns.AxiosHeaders=Ec;ns.formToJSON=t=>Ehe(Xe.isHTMLForm(t)?new FormData(t):t);ns.getAdapter=Rhe.getAdapter;ns.HttpStatusCode=SO;ns.default=ns;var G7={exports:{}};/*!
 * Platform.js v1.3.6
 * Copyright 2014-2020 Benjamin Tan
 * Copyright 2011-2013 John-David Dalton
 * Available under MIT license
 */G7.exports;(function(t,e){(function(){var r={function:!0,object:!0},n=r[typeof window]&&window||this,i=e,s=t&&!t.nodeType&&t,a=i&&s&&typeof It=="object"&&It;a&&(a.global===a||a.window===a||a.self===a)&&(n=a);var o=Math.pow(2,53)-1,c=/\bOpera/,l=Object.prototype,u=l.hasOwnProperty,f=l.toString;function h(M){return M=String(M),M.charAt(0).toUpperCase()+M.slice(1)}function d(M,N,Y){var H={"10.0":"10","6.4":"10 Technical Preview","6.3":"8.1","6.2":"8","6.1":"Server 2008 R2 / 7","6.0":"Server 2008 / Vista","5.2":"Server 2003 / XP 64-bit","5.1":"XP","5.01":"2000 SP1","5.0":"2000","4.0":"NT","4.90":"ME"};return N&&Y&&/^Win/i.test(M)&&!/^Windows Phone /i.test(M)&&(H=H[/[\d.]+$/.exec(M)])&&(M="Windows "+H),M=String(M),N&&Y&&(M=M.replace(RegExp(N,"i"),Y)),M=p(M.replace(/ ce$/i," CE").replace(/\bhpw/i,"web").replace(/\bMacintosh\b/,"Mac OS").replace(/_PowerPC\b/i," OS").replace(/\b(OS X) [^ \d]+/i,"$1").replace(/\bMac (OS X)\b/,"$1").replace(/\/(\d)/," $1").replace(/_/g,".").replace(/(?: BePC|[ .]*fc[ \d.]+)$/i,"").replace(/\bx86\.64\b/gi,"x86_64").replace(/\b(Windows Phone) OS\b/,"$1").replace(/\b(Chrome OS \w+) [\d.]+\b/,"$1").split(" on ")[0]),M}function g(M,N){var Y=-1,H=M?M.length:0;if(typeof H=="number"&&H>-1&&H<=o)for(;++Y<H;)N(M[Y],Y,M);else m(M,N)}function p(M){return M=A(M),/^(?:webOS|i(?:OS|P))/.test(M)?M:h(M)}function m(M,N){for(var Y in M)u.call(M,Y)&&N(M[Y],Y,M)}function y(M){return M==null?h(M):f.call(M).slice(8,-1)}function v(M,N){var Y=M!=null?typeof M[N]:"number";return!/^(?:boolean|number|string|undefined)$/.test(Y)&&(Y=="object"?!!M[N]:!0)}function _(M){return String(M).replace(/([ -])(?!$)/g,"$1?")}function x(M,N){var Y=null;return g(M,function(H,E){Y=N(Y,H,E,M)}),Y}function A(M){return String(M).replace(/^ +| +$/g,"")}function C(M){var N=n,Y=M&&typeof M=="object"&&y(M)!="String";Y&&(N=M,M=null);var H=N.navigator||{},E=H.userAgent||"";M||(M=E);var k=Y?!!H.likeChrome:/\bChrome\b/.test(M)&&!/internal|\n/i.test(f.toString()),w="Object",T=Y?w:"ScriptBridgingProxyObject",L=Y?w:"Environment",I=Y&&N.java?"JavaPackage":y(N.java),U=Y?w:"RuntimeObject",O=/\bJava/.test(I)&&N.java,D=O&&y(N.environment)==L,P=O?"a":"α",B=O?"b":"β",z=N.document||{},F=N.operamini||N.opera,X=c.test(X=Y&&F?F["[[Class]]"]:y(F))?X:F=null,W,q=M,G=[],ee=null,ae=M==E,te=ae&&F&&typeof F.version=="function"&&F.version(),K,re=ie([{label:"EdgeHTML",pattern:"Edge"},"Trident",{label:"WebKit",pattern:"AppleWebKit"},"iCab","Presto","NetFront","Tasman","KHTML","Gecko"]),V=ve(["Adobe AIR","Arora","Avant Browser","Breach","Camino","Electron","Epiphany","Fennec","Flock","Galeon","GreenBrowser","iCab","Iceweasel","K-Meleon","Konqueror","Lunascape","Maxthon",{label:"Microsoft Edge",pattern:"(?:Edge|Edg|EdgA|EdgiOS)"},"Midori","Nook Browser","PaleMoon","PhantomJS","Raven","Rekonq","RockMelt",{label:"Samsung Internet",pattern:"SamsungBrowser"},"SeaMonkey",{label:"Silk",pattern:"(?:Cloud9|Silk-Accelerated)"},"Sleipnir","SlimBrowser",{label:"SRWare Iron",pattern:"Iron"},"Sunrise","Swiftfox","Vivaldi","Waterfox","WebPositive",{label:"Yandex Browser",pattern:"YaBrowser"},{label:"UC Browser",pattern:"UCBrowser"},"Opera Mini",{label:"Opera Mini",pattern:"OPiOS"},"Opera",{label:"Opera",pattern:"OPR"},"Chromium","Chrome",{label:"Chrome",pattern:"(?:HeadlessChrome)"},{label:"Chrome Mobile",pattern:"(?:CriOS|CrMo)"},{label:"Firefox",pattern:"(?:Firefox|Minefield)"},{label:"Firefox for iOS",pattern:"FxiOS"},{label:"IE",pattern:"IEMobile"},{label:"IE",pattern:"MSIE"},"Safari"]),oe=ge([{label:"BlackBerry",pattern:"BB10"},"BlackBerry",{label:"Galaxy S",pattern:"GT-I9000"},{label:"Galaxy S2",pattern:"GT-I9100"},{label:"Galaxy S3",pattern:"GT-I9300"},{label:"Galaxy S4",pattern:"GT-I9500"},{label:"Galaxy S5",pattern:"SM-G900"},{label:"Galaxy S6",pattern:"SM-G920"},{label:"Galaxy S6 Edge",pattern:"SM-G925"},{label:"Galaxy S7",pattern:"SM-G930"},{label:"Galaxy S7 Edge",pattern:"SM-G935"},"Google TV","Lumia","iPad","iPod","iPhone","Kindle",{label:"Kindle Fire",pattern:"(?:Cloud9|Silk-Accelerated)"},"Nexus","Nook","PlayBook","PlayStation Vita","PlayStation","TouchPad","Transformer",{label:"Wii U",pattern:"WiiU"},"Wii","Xbox One",{label:"Xbox 360",pattern:"Xbox"},"Xoom"]),he=ce({Apple:{iPad:1,iPhone:1,iPod:1},Alcatel:{},Archos:{},Amazon:{Kindle:1,"Kindle Fire":1},Asus:{Transformer:1},"Barnes & Noble":{Nook:1},BlackBerry:{PlayBook:1},Google:{"Google TV":1,Nexus:1},HP:{TouchPad:1},HTC:{},Huawei:{},Lenovo:{},LG:{},Microsoft:{Xbox:1,"Xbox One":1},Motorola:{Xoom:1},Nintendo:{"Wii U":1,Wii:1},Nokia:{Lumia:1},Oppo:{},Samsung:{"Galaxy S":1,"Galaxy S2":1,"Galaxy S3":1,"Galaxy S4":1},Sony:{PlayStation:1,"PlayStation Vita":1},Xiaomi:{Mi:1,Redmi:1}}),ne=Ee(["Windows Phone","KaiOS","Android","CentOS",{label:"Chrome OS",pattern:"CrOS"},"Debian",{label:"DragonFly BSD",pattern:"DragonFly"},"Fedora","FreeBSD","Gentoo","Haiku","Kubuntu","Linux Mint","OpenBSD","Red Hat","SuSE","Ubuntu","Xubuntu","Cygwin","Symbian OS","hpwOS","webOS ","webOS","Tablet OS","Tizen","Linux","Mac OS X","Macintosh","Mac","Windows 98;","Windows "]);function ie($e){return x($e,function(se,Z){return se||RegExp("\\b"+(Z.pattern||_(Z))+"\\b","i").exec(M)&&(Z.label||Z)})}function ce($e){return x($e,function(se,Z,J){return se||(Z[oe]||Z[/^[a-z]+(?: +[a-z]+\b)*/i.exec(oe)]||RegExp("\\b"+_(J)+"(?:\\b|\\w*\\d)","i").exec(M))&&J})}function ve($e){return x($e,function(se,Z){return se||RegExp("\\b"+(Z.pattern||_(Z))+"\\b","i").exec(M)&&(Z.label||Z)})}function Ee($e){return x($e,function(se,Z){var J=Z.pattern||_(Z);return!se&&(se=RegExp("\\b"+J+"(?:/[\\d.]+|[ \\w.]*)","i").exec(M))&&(se=d(se,J,Z.label||Z)),se})}function ge($e){return x($e,function(se,Z){var J=Z.pattern||_(Z);return!se&&(se=RegExp("\\b"+J+" *\\d+[.\\w_]*","i").exec(M)||RegExp("\\b"+J+" *\\w+-[\\w]*","i").exec(M)||RegExp("\\b"+J+"(?:; *(?:[a-z]+[_-])?[a-z]+\\d+|[^ ();-]*)","i").exec(M))&&((se=String(Z.label&&!RegExp(J,"i").test(Z.label)?Z.label:se).split("/"))[1]&&!/[\d.]+/.test(se[0])&&(se[0]+=" "+se[1]),Z=Z.label||Z,se=p(se[0].replace(RegExp(J,"i"),Z).replace(RegExp("; *(?:"+Z+"[_-])?","i")," ").replace(RegExp("("+Z+")[-_.]?(\\w)","i"),"$1 $2"))),se})}function Pe($e){return x($e,function(se,Z){return se||(RegExp(Z+"(?:-[\\d.]+/|(?: for [\\w-]+)?[ /-])([\\d.]+[^ ();/_-]*)","i").exec(M)||0)[1]||null})}function Ce(){return this.description||""}if(re&&(re=[re]),/\bAndroid\b/.test(ne)&&!oe&&(W=/\bAndroid[^;]*;(.*?)(?:Build|\) AppleWebKit)\b/i.exec(M))&&(oe=A(W[1]).replace(/^[a-z]{2}-[a-z]{2};\s*/i,"")||null),he&&!oe?oe=ge([he]):he&&oe&&(oe=oe.replace(RegExp("^("+_(he)+")[-_.\\s]","i"),he+" ").replace(RegExp("^("+_(he)+")[-_.]?(\\w)","i"),he+" $2")),(W=/\bGoogle TV\b/.exec(oe))&&(oe=W[0]),/\bSimulator\b/i.test(M)&&(oe=(oe?oe+" ":"")+"Simulator"),V=="Opera Mini"&&/\bOPiOS\b/.test(M)&&G.push("running in Turbo/Uncompressed mode"),V=="IE"&&/\blike iPhone OS\b/.test(M)?(W=C(M.replace(/like iPhone OS/,"")),he=W.manufacturer,oe=W.product):/^iP/.test(oe)?(V||(V="Safari"),ne="iOS"+((W=/ OS ([\d_]+)/i.exec(M))?" "+W[1].replace(/_/g,"."):"")):V=="Konqueror"&&/^Linux\b/i.test(ne)?ne="Kubuntu":he&&he!="Google"&&(/Chrome/.test(V)&&!/\bMobile Safari\b/i.test(M)||/\bVita\b/.test(oe))||/\bAndroid\b/.test(ne)&&/^Chrome/.test(V)&&/\bVersion\//i.test(M)?(V="Android Browser",ne=/\bAndroid\b/.test(ne)?ne:"Android"):V=="Silk"?(/\bMobi/i.test(M)||(ne="Android",G.unshift("desktop mode")),/Accelerated *= *true/i.test(M)&&G.unshift("accelerated")):V=="UC Browser"&&/\bUCWEB\b/.test(M)?G.push("speed mode"):V=="PaleMoon"&&(W=/\bFirefox\/([\d.]+)\b/.exec(M))?G.push("identifying as Firefox "+W[1]):V=="Firefox"&&(W=/\b(Mobile|Tablet|TV)\b/i.exec(M))?(ne||(ne="Firefox OS"),oe||(oe=W[1])):!V||(W=!/\bMinefield\b/i.test(M)&&/\b(?:Firefox|Safari)\b/.exec(V))?(V&&!oe&&/[\/,]|^[^(]+?\)/.test(M.slice(M.indexOf(W+"/")+8))&&(V=null),(W=oe||he||ne)&&(oe||he||/\b(?:Android|Symbian OS|Tablet OS|webOS)\b/.test(ne))&&(V=/[a-z]+(?: Hat)?/i.exec(/\bAndroid\b/.test(ne)?ne:W)+" Browser")):V=="Electron"&&(W=(/\bChrome\/([\d.]+)\b/.exec(M)||0)[1])&&G.push("Chromium "+W),te||(te=Pe(["(?:Cloud9|CriOS|CrMo|Edge|Edg|EdgA|EdgiOS|FxiOS|HeadlessChrome|IEMobile|Iron|Opera ?Mini|OPiOS|OPR|Raven|SamsungBrowser|Silk(?!/[\\d.]+$)|UCBrowser|YaBrowser)","Version",_(V),"(?:Firefox|Minefield|NetFront)"])),(W=re=="iCab"&&parseFloat(te)>3&&"WebKit"||/\bOpera\b/.test(V)&&(/\bOPR\b/.test(M)?"Blink":"Presto")||/\b(?:Midori|Nook|Safari)\b/i.test(M)&&!/^(?:Trident|EdgeHTML)$/.test(re)&&"WebKit"||!re&&/\bMSIE\b/i.test(M)&&(ne=="Mac OS"?"Tasman":"Trident")||re=="WebKit"&&/\bPlayStation\b(?! Vita\b)/i.test(V)&&"NetFront")&&(re=[W]),V=="IE"&&(W=(/; *(?:XBLWP|ZuneWP)(\d+)/i.exec(M)||0)[1])?(V+=" Mobile",ne="Windows Phone "+(/\+$/.test(W)?W:W+".x"),G.unshift("desktop mode")):/\bWPDesktop\b/i.test(M)?(V="IE Mobile",ne="Windows Phone 8.x",G.unshift("desktop mode"),te||(te=(/\brv:([\d.]+)/.exec(M)||0)[1])):V!="IE"&&re=="Trident"&&(W=/\brv:([\d.]+)/.exec(M))&&(V&&G.push("identifying as "+V+(te?" "+te:"")),V="IE",te=W[1]),ae){if(v(N,"global"))if(O&&(W=O.lang.System,q=W.getProperty("os.arch"),ne=ne||W.getProperty("os.name")+" "+W.getProperty("os.version")),D){try{te=N.require("ringo/engine").version.join("."),V="RingoJS"}catch{(W=N.system)&&W.global.system==N.system&&(V="Narwhal",ne||(ne=W[0].os||null))}V||(V="Rhino")}else typeof N.process=="object"&&!N.process.browser&&(W=N.process)&&(typeof W.versions=="object"&&(typeof W.versions.electron=="string"?(G.push("Node "+W.versions.node),V="Electron",te=W.versions.electron):typeof W.versions.nw=="string"&&(G.push("Chromium "+te,"Node "+W.versions.node),V="NW.js",te=W.versions.nw)),V||(V="Node.js",q=W.arch,ne=W.platform,te=/[\d.]+/.exec(W.version),te=te?te[0]:null));else y(W=N.runtime)==T?(V="Adobe AIR",ne=W.flash.system.Capabilities.os):y(W=N.phantom)==U?(V="PhantomJS",te=(W=W.version||null)&&W.major+"."+W.minor+"."+W.patch):typeof z.documentMode=="number"&&(W=/\bTrident\/(\d+)/i.exec(M))?(te=[te,z.documentMode],(W=+W[1]+4)!=te[1]&&(G.push("IE "+te[1]+" mode"),re&&(re[1]=""),te[1]=W),te=V=="IE"?String(te[1].toFixed(1)):te[0]):typeof z.documentMode=="number"&&/^(?:Chrome|Firefox)\b/.test(V)&&(G.push("masking as "+V+" "+te),V="IE",te="11.0",re=["Trident"],ne="Windows");ne=ne&&p(ne)}if(te&&(W=/(?:[ab]|dp|pre|[ab]\d+pre)(?:\d+\+?)?$/i.exec(te)||/(?:alpha|beta)(?: ?\d)?/i.exec(M+";"+(ae&&H.appMinorVersion))||/\bMinefield\b/i.test(M)&&"a")&&(ee=/b/i.test(W)?"beta":"alpha",te=te.replace(RegExp(W+"\\+?$"),"")+(ee=="beta"?B:P)+(/\d+\+?/.exec(W)||"")),V=="Fennec"||V=="Firefox"&&/\b(?:Android|Firefox OS|KaiOS)\b/.test(ne))V="Firefox Mobile";else if(V=="Maxthon"&&te)te=te.replace(/\.[\d.]+/,".x");else if(/\bXbox\b/i.test(oe))oe=="Xbox 360"&&(ne=null),oe=="Xbox 360"&&/\bIEMobile\b/.test(M)&&G.unshift("mobile mode");else if((/^(?:Chrome|IE|Opera)$/.test(V)||V&&!oe&&!/Browser|Mobi/.test(V))&&(ne=="Windows CE"||/Mobi/i.test(M)))V+=" Mobile";else if(V=="IE"&&ae)try{N.external===null&&G.unshift("platform preview")}catch{G.unshift("embedded")}else(/\bBlackBerry\b/.test(oe)||/\bBB10\b/.test(M))&&(W=(RegExp(oe.replace(/ +/g," *")+"/([.\\d]+)","i").exec(M)||0)[1]||te)?(W=[W,/BB10/.test(M)],ne=(W[1]?(oe=null,he="BlackBerry"):"Device Software")+" "+W[0],te=null):this!=m&&oe!="Wii"&&(ae&&F||/Opera/.test(V)&&/\b(?:MSIE|Firefox)\b/i.test(M)||V=="Firefox"&&/\bOS X (?:\d+\.){2,}/.test(ne)||V=="IE"&&(ne&&!/^Win/.test(ne)&&te>5.5||/\bWindows XP\b/.test(ne)&&te>8||te==8&&!/\bTrident\b/.test(M)))&&!c.test(W=C.call(m,M.replace(c,"")+";"))&&W.name&&(W="ing as "+W.name+((W=W.version)?" "+W:""),c.test(V)?(/\bIE\b/.test(W)&&ne=="Mac OS"&&(ne=null),W="identify"+W):(W="mask"+W,X?V=p(X.replace(/([a-z])([A-Z])/g,"$1 $2")):V="Opera",/\bIE\b/.test(W)&&(ne=null),ae||(te=null)),re=["Presto"],G.push(W));(W=(/\bAppleWebKit\/([\d.]+\+?)/i.exec(M)||0)[1])&&(W=[parseFloat(W.replace(/\.(\d)$/,".0$1")),W],V=="Safari"&&W[1].slice(-1)=="+"?(V="WebKit Nightly",ee="alpha",te=W[1].slice(0,-1)):(te==W[1]||te==(W[2]=(/\bSafari\/([\d.]+\+?)/i.exec(M)||0)[1]))&&(te=null),W[1]=(/\b(?:Headless)?Chrome\/([\d.]+)/i.exec(M)||0)[1],W[0]==537.36&&W[2]==537.36&&parseFloat(W[1])>=28&&re=="WebKit"&&(re=["Blink"]),!ae||!k&&!W[1]?(re&&(re[1]="like Safari"),W=(W=W[0],W<400?1:W<500?2:W<526?3:W<533?4:W<534?"4+":W<535?5:W<537?6:W<538?7:W<601?8:W<602?9:W<604?10:W<606?11:W<608?12:"12")):(re&&(re[1]="like Chrome"),W=W[1]||(W=W[0],W<530?1:W<532?2:W<532.05?3:W<533?4:W<534.03?5:W<534.07?6:W<534.1?7:W<534.13?8:W<534.16?9:W<534.24?10:W<534.3?11:W<535.01?12:W<535.02?"13+":W<535.07?15:W<535.11?16:W<535.19?17:W<536.05?18:W<536.1?19:W<537.01?20:W<537.11?"21+":W<537.13?23:W<537.18?24:W<537.24?25:W<537.36?26:re!="Blink"?"27":"28")),re&&(re[1]+=" "+(W+=typeof W=="number"?".x":/[.+]/.test(W)?"":"+")),V=="Safari"&&(!te||parseInt(te)>45)?te=W:V=="Chrome"&&/\bHeadlessChrome/i.test(M)&&G.unshift("headless")),V=="Opera"&&(W=/\bzbov|zvav$/.exec(ne))?(V+=" ",G.unshift("desktop mode"),W=="zvav"?(V+="Mini",te=null):V+="Mobile",ne=ne.replace(RegExp(" *"+W+"$"),"")):V=="Safari"&&/\bChrome\b/.exec(re&&re[1])?(G.unshift("desktop mode"),V="Chrome Mobile",te=null,/\bOS X\b/.test(ne)?(he="Apple",ne="iOS 4.3+"):ne=null):/\bSRWare Iron\b/.test(V)&&!te&&(te=Pe("Chrome")),te&&te.indexOf(W=/[\d.]+$/.exec(ne))==0&&M.indexOf("/"+W+"-")>-1&&(ne=A(ne.replace(W,""))),ne&&ne.indexOf(V)!=-1&&!RegExp(V+" OS").test(ne)&&(ne=ne.replace(RegExp(" *"+_(V)+" *"),"")),re&&!/\b(?:Avant|Nook)\b/.test(V)&&(/Browser|Lunascape|Maxthon/.test(V)||V!="Safari"&&/^iOS/.test(ne)&&/\bSafari\b/.test(re[1])||/^(?:Adobe|Arora|Breach|Midori|Opera|Phantom|Rekonq|Rock|Samsung Internet|Sleipnir|SRWare Iron|Vivaldi|Web)/.test(V)&&re[1])&&(W=re[re.length-1])&&G.push(W),G.length&&(G=["("+G.join("; ")+")"]),he&&oe&&oe.indexOf(he)<0&&G.push("on "+he),oe&&G.push((/^on /.test(G[G.length-1])?"":"on ")+oe),ne&&(W=/ ([\d.+]+)$/.exec(ne),K=W&&ne.charAt(ne.length-W[0].length-1)=="/",ne={architecture:32,family:W&&!K?ne.replace(W[0],""):ne,version:W?W[1]:null,toString:function(){var $e=this.version;return this.family+($e&&!K?" "+$e:"")+(this.architecture==64?" 64-bit":"")}}),(W=/\b(?:AMD|IA|Win|WOW|x86_|x)64\b/i.exec(q))&&!/\bi686\b/i.test(q)?(ne&&(ne.architecture=64,ne.family=ne.family.replace(RegExp(" *"+W),"")),V&&(/\bWOW64\b/i.test(M)||ae&&/\w(?:86|32)$/.test(H.cpuClass||H.platform)&&!/\bWin64; x64\b/i.test(M))&&G.unshift("32-bit")):ne&&/^OS X/.test(ne.family)&&V=="Chrome"&&parseFloat(te)>=39&&(ne.architecture=64),M||(M=null);var Ie={};return Ie.description=M,Ie.layout=re&&re[0],Ie.manufacturer=he,Ie.name=V,Ie.prerelease=ee,Ie.product=oe,Ie.ua=M,Ie.version=V&&te,Ie.os=ne||{architecture:null,family:null,version:null,toString:function(){return"null"}},Ie.parse=C,Ie.toString=Ce,Ie.version&&G.unshift(te),Ie.name&&G.unshift(V),ne&&V&&!(ne==String(ne).split(" ")[0]&&(ne==V.split(" ")[0]||oe))&&G.push(oe?"("+ne+")":"on "+ne),G.length&&(Ie.description=G.join(" ")),Ie}var R=C();i&&s?m(R,function(M,N){i[N]=M}):n.platform=R}).call(It)})(G7,G7.exports);var aze=G7.exports;const _y=si(aze);var AO={exports:{}};const oze="2.0.0",Dhe=256,cze=Number.MAX_SAFE_INTEGER||9007199254740991,lze=16,uze=Dhe-6,fze=["major","premajor","minor","preminor","patch","prepatch","prerelease"];var DS={MAX_LENGTH:Dhe,MAX_SAFE_COMPONENT_LENGTH:lze,MAX_SAFE_BUILD_LENGTH:uze,MAX_SAFE_INTEGER:cze,RELEASE_TYPES:fze,SEMVER_SPEC_VERSION:oze,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},VC={};const hze=typeof Et=="object"&&VC&&VC.NODE_DEBUG&&/\bsemver\b/i.test(VC.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{};var OS=hze;(function(t,e){const{MAX_SAFE_COMPONENT_LENGTH:r,MAX_SAFE_BUILD_LENGTH:n,MAX_LENGTH:i}=DS,s=OS;e=t.exports={};const a=e.re=[],o=e.safeRe=[],c=e.src=[],l=e.t={};let u=0;const f="[a-zA-Z0-9-]",h=[["\\s",1],["\\d",i],[f,n]],d=p=>{for(const[m,y]of h)p=p.split(`${m}*`).join(`${m}{0,${y}}`).split(`${m}+`).join(`${m}{1,${y}}`);return p},g=(p,m,y)=>{const v=d(m),_=u++;s(p,_,m),l[p]=_,c[_]=m,a[_]=new RegExp(m,y?"g":void 0),o[_]=new RegExp(v,y?"g":void 0)};g("NUMERICIDENTIFIER","0|[1-9]\\d*"),g("NUMERICIDENTIFIERLOOSE","\\d+"),g("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${f}*`),g("MAINVERSION",`(${c[l.NUMERICIDENTIFIER]})\\.(${c[l.NUMERICIDENTIFIER]})\\.(${c[l.NUMERICIDENTIFIER]})`),g("MAINVERSIONLOOSE",`(${c[l.NUMERICIDENTIFIERLOOSE]})\\.(${c[l.NUMERICIDENTIFIERLOOSE]})\\.(${c[l.NUMERICIDENTIFIERLOOSE]})`),g("PRERELEASEIDENTIFIER",`(?:${c[l.NUMERICIDENTIFIER]}|${c[l.NONNUMERICIDENTIFIER]})`),g("PRERELEASEIDENTIFIERLOOSE",`(?:${c[l.NUMERICIDENTIFIERLOOSE]}|${c[l.NONNUMERICIDENTIFIER]})`),g("PRERELEASE",`(?:-(${c[l.PRERELEASEIDENTIFIER]}(?:\\.${c[l.PRERELEASEIDENTIFIER]})*))`),g("PRERELEASELOOSE",`(?:-?(${c[l.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${c[l.PRERELEASEIDENTIFIERLOOSE]})*))`),g("BUILDIDENTIFIER",`${f}+`),g("BUILD",`(?:\\+(${c[l.BUILDIDENTIFIER]}(?:\\.${c[l.BUILDIDENTIFIER]})*))`),g("FULLPLAIN",`v?${c[l.MAINVERSION]}${c[l.PRERELEASE]}?${c[l.BUILD]}?`),g("FULL",`^${c[l.FULLPLAIN]}$`),g("LOOSEPLAIN",`[v=\\s]*${c[l.MAINVERSIONLOOSE]}${c[l.PRERELEASELOOSE]}?${c[l.BUILD]}?`),g("LOOSE",`^${c[l.LOOSEPLAIN]}$`),g("GTLT","((?:<|>)?=?)"),g("XRANGEIDENTIFIERLOOSE",`${c[l.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),g("XRANGEIDENTIFIER",`${c[l.NUMERICIDENTIFIER]}|x|X|\\*`),g("XRANGEPLAIN",`[v=\\s]*(${c[l.XRANGEIDENTIFIER]})(?:\\.(${c[l.XRANGEIDENTIFIER]})(?:\\.(${c[l.XRANGEIDENTIFIER]})(?:${c[l.PRERELEASE]})?${c[l.BUILD]}?)?)?`),g("XRANGEPLAINLOOSE",`[v=\\s]*(${c[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${c[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${c[l.XRANGEIDENTIFIERLOOSE]})(?:${c[l.PRERELEASELOOSE]})?${c[l.BUILD]}?)?)?`),g("XRANGE",`^${c[l.GTLT]}\\s*${c[l.XRANGEPLAIN]}$`),g("XRANGELOOSE",`^${c[l.GTLT]}\\s*${c[l.XRANGEPLAINLOOSE]}$`),g("COERCEPLAIN",`(^|[^\\d])(\\d{1,${r}})(?:\\.(\\d{1,${r}}))?(?:\\.(\\d{1,${r}}))?`),g("COERCE",`${c[l.COERCEPLAIN]}(?:$|[^\\d])`),g("COERCEFULL",c[l.COERCEPLAIN]+`(?:${c[l.PRERELEASE]})?(?:${c[l.BUILD]})?(?:$|[^\\d])`),g("COERCERTL",c[l.COERCE],!0),g("COERCERTLFULL",c[l.COERCEFULL],!0),g("LONETILDE","(?:~>?)"),g("TILDETRIM",`(\\s*)${c[l.LONETILDE]}\\s+`,!0),e.tildeTrimReplace="$1~",g("TILDE",`^${c[l.LONETILDE]}${c[l.XRANGEPLAIN]}$`),g("TILDELOOSE",`^${c[l.LONETILDE]}${c[l.XRANGEPLAINLOOSE]}$`),g("LONECARET","(?:\\^)"),g("CARETTRIM",`(\\s*)${c[l.LONECARET]}\\s+`,!0),e.caretTrimReplace="$1^",g("CARET",`^${c[l.LONECARET]}${c[l.XRANGEPLAIN]}$`),g("CARETLOOSE",`^${c[l.LONECARET]}${c[l.XRANGEPLAINLOOSE]}$`),g("COMPARATORLOOSE",`^${c[l.GTLT]}\\s*(${c[l.LOOSEPLAIN]})$|^$`),g("COMPARATOR",`^${c[l.GTLT]}\\s*(${c[l.FULLPLAIN]})$|^$`),g("COMPARATORTRIM",`(\\s*)${c[l.GTLT]}\\s*(${c[l.LOOSEPLAIN]}|${c[l.XRANGEPLAIN]})`,!0),e.comparatorTrimReplace="$1$2$3",g("HYPHENRANGE",`^\\s*(${c[l.XRANGEPLAIN]})\\s+-\\s+(${c[l.XRANGEPLAIN]})\\s*$`),g("HYPHENRANGELOOSE",`^\\s*(${c[l.XRANGEPLAINLOOSE]})\\s+-\\s+(${c[l.XRANGEPLAINLOOSE]})\\s*$`),g("STAR","(<|>)?=?\\s*\\*"),g("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),g("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(AO,AO.exports);var y6=AO.exports;const dze=Object.freeze({loose:!0}),pze=Object.freeze({}),gze=t=>t?typeof t!="object"?dze:t:pze;var GF=gze;const _X=/^[0-9]+$/,Ohe=(t,e)=>{const r=_X.test(t),n=_X.test(e);return r&&n&&(t=+t,e=+e),t===e?0:r&&!n?-1:n&&!r?1:t<e?-1:1},mze=(t,e)=>Ohe(e,t);var Nhe={compareIdentifiers:Ohe,rcompareIdentifiers:mze};const D_=OS,{MAX_LENGTH:xX,MAX_SAFE_INTEGER:O_}=DS,{safeRe:EX,t:SX}=y6,yze=GF,{compareIdentifiers:A2}=Nhe;let vze=class _f{constructor(e,r){if(r=yze(r),e instanceof _f){if(e.loose===!!r.loose&&e.includePrerelease===!!r.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>xX)throw new TypeError(`version is longer than ${xX} characters`);D_("SemVer",e,r),this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease;const n=e.trim().match(r.loose?EX[SX.LOOSE]:EX[SX.FULL]);if(!n)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>O_||this.major<0)throw new TypeError("Invalid major version");if(this.minor>O_||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>O_||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){const s=+i;if(s>=0&&s<O_)return s}return i}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(D_("SemVer.compare",this.version,this.options,e),!(e instanceof _f)){if(typeof e=="string"&&e===this.version)return 0;e=new _f(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof _f||(e=new _f(e,this.options)),A2(this.major,e.major)||A2(this.minor,e.minor)||A2(this.patch,e.patch)}comparePre(e){if(e instanceof _f||(e=new _f(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let r=0;do{const n=this.prerelease[r],i=e.prerelease[r];if(D_("prerelease compare",r,n,i),n===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(n===void 0)return-1;if(n===i)continue;return A2(n,i)}while(++r)}compareBuild(e){e instanceof _f||(e=new _f(e,this.options));let r=0;do{const n=this.build[r],i=e.build[r];if(D_("build compare",r,n,i),n===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(n===void 0)return-1;if(n===i)continue;return A2(n,i)}while(++r)}inc(e,r,n){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",r,n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",r,n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",r,n),this.inc("pre",r,n);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",r,n),this.inc("pre",r,n);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const i=Number(n)?1:0;if(!r&&n===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[i];else{let s=this.prerelease.length;for(;--s>=0;)typeof this.prerelease[s]=="number"&&(this.prerelease[s]++,s=-2);if(s===-1){if(r===this.prerelease.join(".")&&n===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(r){let s=[r,i];n===!1&&(s=[r]),A2(this.prerelease[0],r)===0?isNaN(this.prerelease[1])&&(this.prerelease=s):this.prerelease=s}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};var Jo=vze;const AX=Jo,bze=(t,e,r=!1)=>{if(t instanceof AX)return t;try{return new AX(t,e)}catch(n){if(!r)return null;throw n}};var Zv=bze;const wze=Zv,_ze=(t,e)=>{const r=wze(t,e);return r?r.version:null};var xze=_ze;const Eze=Zv,Sze=(t,e)=>{const r=Eze(t.trim().replace(/^[=v]+/,""),e);return r?r.version:null};var Aze=Sze;const TX=Jo,Tze=(t,e,r,n,i)=>{typeof r=="string"&&(i=n,n=r,r=void 0);try{return new TX(t instanceof TX?t.version:t,r).inc(e,n,i).version}catch{return null}};var kze=Tze;const kX=Zv,Cze=(t,e)=>{const r=kX(t,null,!0),n=kX(e,null,!0),i=r.compare(n);if(i===0)return null;const s=i>0,a=s?r:n,o=s?n:r,c=!!a.prerelease.length;if(!!o.prerelease.length&&!c)return!o.patch&&!o.minor?"major":a.patch?"patch":a.minor?"minor":"major";const u=c?"pre":"";return r.major!==n.major?u+"major":r.minor!==n.minor?u+"minor":r.patch!==n.patch?u+"patch":"prerelease"};var Ize=Cze;const Rze=Jo,Pze=(t,e)=>new Rze(t,e).major;var Bze=Pze;const Dze=Jo,Oze=(t,e)=>new Dze(t,e).minor;var Nze=Oze;const Mze=Jo,Lze=(t,e)=>new Mze(t,e).patch;var Fze=Lze;const $ze=Zv,Uze=(t,e)=>{const r=$ze(t,e);return r&&r.prerelease.length?r.prerelease:null};var Vze=Uze;const CX=Jo,jze=(t,e,r)=>new CX(t,r).compare(new CX(e,r));var tf=jze;const zze=tf,qze=(t,e,r)=>zze(e,t,r);var Hze=qze;const Wze=tf,Kze=(t,e)=>Wze(t,e,!0);var Gze=Kze;const IX=Jo,Yze=(t,e,r)=>{const n=new IX(t,r),i=new IX(e,r);return n.compare(i)||n.compareBuild(i)};var YF=Yze;const Xze=YF,Zze=(t,e)=>t.sort((r,n)=>Xze(r,n,e));var Jze=Zze;const Qze=YF,eqe=(t,e)=>t.sort((r,n)=>Qze(n,r,e));var tqe=eqe;const rqe=tf,nqe=(t,e,r)=>rqe(t,e,r)>0;var NS=nqe;const iqe=tf,sqe=(t,e,r)=>iqe(t,e,r)<0;var XF=sqe;const aqe=tf,oqe=(t,e,r)=>aqe(t,e,r)===0;var Mhe=oqe;const cqe=tf,lqe=(t,e,r)=>cqe(t,e,r)!==0;var Lhe=lqe;const uqe=tf,fqe=(t,e,r)=>uqe(t,e,r)>=0;var ZF=fqe;const hqe=tf,dqe=(t,e,r)=>hqe(t,e,r)<=0;var JF=dqe;const pqe=Mhe,gqe=Lhe,mqe=NS,yqe=ZF,vqe=XF,bqe=JF,wqe=(t,e,r,n)=>{switch(e){case"===":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t===r;case"!==":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t!==r;case"":case"=":case"==":return pqe(t,r,n);case"!=":return gqe(t,r,n);case">":return mqe(t,r,n);case">=":return yqe(t,r,n);case"<":return vqe(t,r,n);case"<=":return bqe(t,r,n);default:throw new TypeError(`Invalid operator: ${e}`)}};var Fhe=wqe;const _qe=Jo,xqe=Zv,{safeRe:N_,t:M_}=y6,Eqe=(t,e)=>{if(t instanceof _qe)return t;if(typeof t=="number"&&(t=String(t)),typeof t!="string")return null;e=e||{};let r=null;if(!e.rtl)r=t.match(e.includePrerelease?N_[M_.COERCEFULL]:N_[M_.COERCE]);else{const c=e.includePrerelease?N_[M_.COERCERTLFULL]:N_[M_.COERCERTL];let l;for(;(l=c.exec(t))&&(!r||r.index+r[0].length!==t.length);)(!r||l.index+l[0].length!==r.index+r[0].length)&&(r=l),c.lastIndex=l.index+l[1].length+l[2].length;c.lastIndex=-1}if(r===null)return null;const n=r[2],i=r[3]||"0",s=r[4]||"0",a=e.includePrerelease&&r[5]?`-${r[5]}`:"",o=e.includePrerelease&&r[6]?`+${r[6]}`:"";return xqe(`${n}.${i}.${s}${a}${o}`,e)};var Sqe=Eqe;class Aqe{constructor(){this.max=1e3,this.map=new Map}get(e){const r=this.map.get(e);if(r!==void 0)return this.map.delete(e),this.map.set(e,r),r}delete(e){return this.map.delete(e)}set(e,r){if(!this.delete(e)&&r!==void 0){if(this.map.size>=this.max){const i=this.map.keys().next().value;this.delete(i)}this.map.set(e,r)}return this}}var Tqe=Aqe,jC,RX;function rf(){if(RX)return jC;RX=1;const t=/\s+/g;class e{constructor(T,L){if(L=i(L),T instanceof e)return T.loose===!!L.loose&&T.includePrerelease===!!L.includePrerelease?T:new e(T.raw,L);if(T instanceof s)return this.raw=T.value,this.set=[[T]],this.formatted=void 0,this;if(this.options=L,this.loose=!!L.loose,this.includePrerelease=!!L.includePrerelease,this.raw=T.trim().replace(t," "),this.set=this.raw.split("||").map(I=>this.parseRange(I.trim())).filter(I=>I.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const I=this.set[0];if(this.set=this.set.filter(U=>!p(U[0])),this.set.length===0)this.set=[I];else if(this.set.length>1){for(const U of this.set)if(U.length===1&&m(U[0])){this.set=[U];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let T=0;T<this.set.length;T++){T>0&&(this.formatted+="||");const L=this.set[T];for(let I=0;I<L.length;I++)I>0&&(this.formatted+=" "),this.formatted+=L[I].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(T){const I=((this.options.includePrerelease&&d)|(this.options.loose&&g))+":"+T,U=n.get(I);if(U)return U;const O=this.options.loose,D=O?c[l.HYPHENRANGELOOSE]:c[l.HYPHENRANGE];T=T.replace(D,E(this.options.includePrerelease)),a("hyphen replace",T),T=T.replace(c[l.COMPARATORTRIM],u),a("comparator trim",T),T=T.replace(c[l.TILDETRIM],f),a("tilde trim",T),T=T.replace(c[l.CARETTRIM],h),a("caret trim",T);let P=T.split(" ").map(X=>v(X,this.options)).join(" ").split(/\s+/).map(X=>H(X,this.options));O&&(P=P.filter(X=>(a("loose invalid filter",X,this.options),!!X.match(c[l.COMPARATORLOOSE])))),a("range list",P);const B=new Map,z=P.map(X=>new s(X,this.options));for(const X of z){if(p(X))return[X];B.set(X.value,X)}B.size>1&&B.has("")&&B.delete("");const F=[...B.values()];return n.set(I,F),F}intersects(T,L){if(!(T instanceof e))throw new TypeError("a Range is required");return this.set.some(I=>y(I,L)&&T.set.some(U=>y(U,L)&&I.every(O=>U.every(D=>O.intersects(D,L)))))}test(T){if(!T)return!1;if(typeof T=="string")try{T=new o(T,this.options)}catch{return!1}for(let L=0;L<this.set.length;L++)if(k(this.set[L],T,this.options))return!0;return!1}}jC=e;const r=Tqe,n=new r,i=GF,s=MS(),a=OS,o=Jo,{safeRe:c,t:l,comparatorTrimReplace:u,tildeTrimReplace:f,caretTrimReplace:h}=y6,{FLAG_INCLUDE_PRERELEASE:d,FLAG_LOOSE:g}=DS,p=w=>w.value==="<0.0.0-0",m=w=>w.value==="",y=(w,T)=>{let L=!0;const I=w.slice();let U=I.pop();for(;L&&I.length;)L=I.every(O=>U.intersects(O,T)),U=I.pop();return L},v=(w,T)=>(a("comp",w,T),w=C(w,T),a("caret",w),w=x(w,T),a("tildes",w),w=M(w,T),a("xrange",w),w=Y(w,T),a("stars",w),w),_=w=>!w||w.toLowerCase()==="x"||w==="*",x=(w,T)=>w.trim().split(/\s+/).map(L=>A(L,T)).join(" "),A=(w,T)=>{const L=T.loose?c[l.TILDELOOSE]:c[l.TILDE];return w.replace(L,(I,U,O,D,P)=>{a("tilde",w,I,U,O,D,P);let B;return _(U)?B="":_(O)?B=`>=${U}.0.0 <${+U+1}.0.0-0`:_(D)?B=`>=${U}.${O}.0 <${U}.${+O+1}.0-0`:P?(a("replaceTilde pr",P),B=`>=${U}.${O}.${D}-${P} <${U}.${+O+1}.0-0`):B=`>=${U}.${O}.${D} <${U}.${+O+1}.0-0`,a("tilde return",B),B})},C=(w,T)=>w.trim().split(/\s+/).map(L=>R(L,T)).join(" "),R=(w,T)=>{a("caret",w,T);const L=T.loose?c[l.CARETLOOSE]:c[l.CARET],I=T.includePrerelease?"-0":"";return w.replace(L,(U,O,D,P,B)=>{a("caret",w,U,O,D,P,B);let z;return _(O)?z="":_(D)?z=`>=${O}.0.0${I} <${+O+1}.0.0-0`:_(P)?O==="0"?z=`>=${O}.${D}.0${I} <${O}.${+D+1}.0-0`:z=`>=${O}.${D}.0${I} <${+O+1}.0.0-0`:B?(a("replaceCaret pr",B),O==="0"?D==="0"?z=`>=${O}.${D}.${P}-${B} <${O}.${D}.${+P+1}-0`:z=`>=${O}.${D}.${P}-${B} <${O}.${+D+1}.0-0`:z=`>=${O}.${D}.${P}-${B} <${+O+1}.0.0-0`):(a("no pr"),O==="0"?D==="0"?z=`>=${O}.${D}.${P}${I} <${O}.${D}.${+P+1}-0`:z=`>=${O}.${D}.${P}${I} <${O}.${+D+1}.0-0`:z=`>=${O}.${D}.${P} <${+O+1}.0.0-0`),a("caret return",z),z})},M=(w,T)=>(a("replaceXRanges",w,T),w.split(/\s+/).map(L=>N(L,T)).join(" ")),N=(w,T)=>{w=w.trim();const L=T.loose?c[l.XRANGELOOSE]:c[l.XRANGE];return w.replace(L,(I,U,O,D,P,B)=>{a("xRange",w,I,U,O,D,P,B);const z=_(O),F=z||_(D),X=F||_(P),W=X;return U==="="&&W&&(U=""),B=T.includePrerelease?"-0":"",z?U===">"||U==="<"?I="<0.0.0-0":I="*":U&&W?(F&&(D=0),P=0,U===">"?(U=">=",F?(O=+O+1,D=0,P=0):(D=+D+1,P=0)):U==="<="&&(U="<",F?O=+O+1:D=+D+1),U==="<"&&(B="-0"),I=`${U+O}.${D}.${P}${B}`):F?I=`>=${O}.0.0${B} <${+O+1}.0.0-0`:X&&(I=`>=${O}.${D}.0${B} <${O}.${+D+1}.0-0`),a("xRange return",I),I})},Y=(w,T)=>(a("replaceStars",w,T),w.trim().replace(c[l.STAR],"")),H=(w,T)=>(a("replaceGTE0",w,T),w.trim().replace(c[T.includePrerelease?l.GTE0PRE:l.GTE0],"")),E=w=>(T,L,I,U,O,D,P,B,z,F,X,W)=>(_(I)?L="":_(U)?L=`>=${I}.0.0${w?"-0":""}`:_(O)?L=`>=${I}.${U}.0${w?"-0":""}`:D?L=`>=${L}`:L=`>=${L}${w?"-0":""}`,_(z)?B="":_(F)?B=`<${+z+1}.0.0-0`:_(X)?B=`<${z}.${+F+1}.0-0`:W?B=`<=${z}.${F}.${X}-${W}`:w?B=`<${z}.${F}.${+X+1}-0`:B=`<=${B}`,`${L} ${B}`.trim()),k=(w,T,L)=>{for(let I=0;I<w.length;I++)if(!w[I].test(T))return!1;if(T.prerelease.length&&!L.includePrerelease){for(let I=0;I<w.length;I++)if(a(w[I].semver),w[I].semver!==s.ANY&&w[I].semver.prerelease.length>0){const U=w[I].semver;if(U.major===T.major&&U.minor===T.minor&&U.patch===T.patch)return!0}return!1}return!0};return jC}var zC,PX;function MS(){if(PX)return zC;PX=1;const t=Symbol("SemVer ANY");class e{static get ANY(){return t}constructor(u,f){if(f=r(f),u instanceof e){if(u.loose===!!f.loose)return u;u=u.value}u=u.trim().split(/\s+/).join(" "),a("comparator",u,f),this.options=f,this.loose=!!f.loose,this.parse(u),this.semver===t?this.value="":this.value=this.operator+this.semver.version,a("comp",this)}parse(u){const f=this.options.loose?n[i.COMPARATORLOOSE]:n[i.COMPARATOR],h=u.match(f);if(!h)throw new TypeError(`Invalid comparator: ${u}`);this.operator=h[1]!==void 0?h[1]:"",this.operator==="="&&(this.operator=""),h[2]?this.semver=new o(h[2],this.options.loose):this.semver=t}toString(){return this.value}test(u){if(a("Comparator.test",u,this.options.loose),this.semver===t||u===t)return!0;if(typeof u=="string")try{u=new o(u,this.options)}catch{return!1}return s(u,this.operator,this.semver,this.options)}intersects(u,f){if(!(u instanceof e))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new c(u.value,f).test(this.value):u.operator===""?u.value===""?!0:new c(this.value,f).test(u.semver):(f=r(f),f.includePrerelease&&(this.value==="<0.0.0-0"||u.value==="<0.0.0-0")||!f.includePrerelease&&(this.value.startsWith("<0.0.0")||u.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&u.operator.startsWith(">")||this.operator.startsWith("<")&&u.operator.startsWith("<")||this.semver.version===u.semver.version&&this.operator.includes("=")&&u.operator.includes("=")||s(this.semver,"<",u.semver,f)&&this.operator.startsWith(">")&&u.operator.startsWith("<")||s(this.semver,">",u.semver,f)&&this.operator.startsWith("<")&&u.operator.startsWith(">")))}}zC=e;const r=GF,{safeRe:n,t:i}=y6,s=Fhe,a=OS,o=Jo,c=rf();return zC}const kqe=rf(),Cqe=(t,e,r)=>{try{e=new kqe(e,r)}catch{return!1}return e.test(t)};var LS=Cqe;const Iqe=rf(),Rqe=(t,e)=>new Iqe(t,e).set.map(r=>r.map(n=>n.value).join(" ").trim().split(" "));var Pqe=Rqe;const Bqe=Jo,Dqe=rf(),Oqe=(t,e,r)=>{let n=null,i=null,s=null;try{s=new Dqe(e,r)}catch{return null}return t.forEach(a=>{s.test(a)&&(!n||i.compare(a)===-1)&&(n=a,i=new Bqe(n,r))}),n};var Nqe=Oqe;const Mqe=Jo,Lqe=rf(),Fqe=(t,e,r)=>{let n=null,i=null,s=null;try{s=new Lqe(e,r)}catch{return null}return t.forEach(a=>{s.test(a)&&(!n||i.compare(a)===1)&&(n=a,i=new Mqe(n,r))}),n};var $qe=Fqe;const qC=Jo,Uqe=rf(),BX=NS,Vqe=(t,e)=>{t=new Uqe(t,e);let r=new qC("0.0.0");if(t.test(r)||(r=new qC("0.0.0-0"),t.test(r)))return r;r=null;for(let n=0;n<t.set.length;++n){const i=t.set[n];let s=null;i.forEach(a=>{const o=new qC(a.semver.version);switch(a.operator){case">":o.prerelease.length===0?o.patch++:o.prerelease.push(0),o.raw=o.format();case"":case">=":(!s||BX(o,s))&&(s=o);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${a.operator}`)}}),s&&(!r||BX(r,s))&&(r=s)}return r&&t.test(r)?r:null};var jqe=Vqe;const zqe=rf(),qqe=(t,e)=>{try{return new zqe(t,e).range||"*"}catch{return null}};var Hqe=qqe;const Wqe=Jo,$he=MS(),{ANY:Kqe}=$he,Gqe=rf(),Yqe=LS,DX=NS,OX=XF,Xqe=JF,Zqe=ZF,Jqe=(t,e,r,n)=>{t=new Wqe(t,n),e=new Gqe(e,n);let i,s,a,o,c;switch(r){case">":i=DX,s=Xqe,a=OX,o=">",c=">=";break;case"<":i=OX,s=Zqe,a=DX,o="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(Yqe(t,e,n))return!1;for(let l=0;l<e.set.length;++l){const u=e.set[l];let f=null,h=null;if(u.forEach(d=>{d.semver===Kqe&&(d=new $he(">=0.0.0")),f=f||d,h=h||d,i(d.semver,f.semver,n)?f=d:a(d.semver,h.semver,n)&&(h=d)}),f.operator===o||f.operator===c||(!h.operator||h.operator===o)&&s(t,h.semver))return!1;if(h.operator===c&&a(t,h.semver))return!1}return!0};var QF=Jqe;const Qqe=QF,eHe=(t,e,r)=>Qqe(t,e,">",r);var tHe=eHe;const rHe=QF,nHe=(t,e,r)=>rHe(t,e,"<",r);var iHe=nHe;const NX=rf(),sHe=(t,e,r)=>(t=new NX(t,r),e=new NX(e,r),t.intersects(e,r));var aHe=sHe;const oHe=LS,cHe=tf;var lHe=(t,e,r)=>{const n=[];let i=null,s=null;const a=t.sort((u,f)=>cHe(u,f,r));for(const u of a)oHe(u,e,r)?(s=u,i||(i=u)):(s&&n.push([i,s]),s=null,i=null);i&&n.push([i,null]);const o=[];for(const[u,f]of n)u===f?o.push(u):!f&&u===a[0]?o.push("*"):f?u===a[0]?o.push(`<=${f}`):o.push(`${u} - ${f}`):o.push(`>=${u}`);const c=o.join(" || "),l=typeof e.raw=="string"?e.raw:String(e);return c.length<l.length?c:e};const MX=rf(),e$=MS(),{ANY:HC}=e$,cw=LS,t$=tf,uHe=(t,e,r={})=>{if(t===e)return!0;t=new MX(t,r),e=new MX(e,r);let n=!1;e:for(const i of t.set){for(const s of e.set){const a=hHe(i,s,r);if(n=n||a!==null,a)continue e}if(n)return!1}return!0},fHe=[new e$(">=0.0.0-0")],LX=[new e$(">=0.0.0")],hHe=(t,e,r)=>{if(t===e)return!0;if(t.length===1&&t[0].semver===HC){if(e.length===1&&e[0].semver===HC)return!0;r.includePrerelease?t=fHe:t=LX}if(e.length===1&&e[0].semver===HC){if(r.includePrerelease)return!0;e=LX}const n=new Set;let i,s;for(const d of t)d.operator===">"||d.operator===">="?i=FX(i,d,r):d.operator==="<"||d.operator==="<="?s=$X(s,d,r):n.add(d.semver);if(n.size>1)return null;let a;if(i&&s){if(a=t$(i.semver,s.semver,r),a>0)return null;if(a===0&&(i.operator!==">="||s.operator!=="<="))return null}for(const d of n){if(i&&!cw(d,String(i),r)||s&&!cw(d,String(s),r))return null;for(const g of e)if(!cw(d,String(g),r))return!1;return!0}let o,c,l,u,f=s&&!r.includePrerelease&&s.semver.prerelease.length?s.semver:!1,h=i&&!r.includePrerelease&&i.semver.prerelease.length?i.semver:!1;f&&f.prerelease.length===1&&s.operator==="<"&&f.prerelease[0]===0&&(f=!1);for(const d of e){if(u=u||d.operator===">"||d.operator===">=",l=l||d.operator==="<"||d.operator==="<=",i){if(h&&d.semver.prerelease&&d.semver.prerelease.length&&d.semver.major===h.major&&d.semver.minor===h.minor&&d.semver.patch===h.patch&&(h=!1),d.operator===">"||d.operator===">="){if(o=FX(i,d,r),o===d&&o!==i)return!1}else if(i.operator===">="&&!cw(i.semver,String(d),r))return!1}if(s){if(f&&d.semver.prerelease&&d.semver.prerelease.length&&d.semver.major===f.major&&d.semver.minor===f.minor&&d.semver.patch===f.patch&&(f=!1),d.operator==="<"||d.operator==="<="){if(c=$X(s,d,r),c===d&&c!==s)return!1}else if(s.operator==="<="&&!cw(s.semver,String(d),r))return!1}if(!d.operator&&(s||i)&&a!==0)return!1}return!(i&&l&&!s&&a!==0||s&&u&&!i&&a!==0||h||f)},FX=(t,e,r)=>{if(!t)return e;const n=t$(t.semver,e.semver,r);return n>0?t:n<0||e.operator===">"&&t.operator===">="?e:t},$X=(t,e,r)=>{if(!t)return e;const n=t$(t.semver,e.semver,r);return n<0?t:n>0||e.operator==="<"&&t.operator==="<="?e:t};var dHe=uHe;const WC=y6,UX=DS,pHe=Jo,VX=Nhe,gHe=Zv,mHe=xze,yHe=Aze,vHe=kze,bHe=Ize,wHe=Bze,_He=Nze,xHe=Fze,EHe=Vze,SHe=tf,AHe=Hze,THe=Gze,kHe=YF,CHe=Jze,IHe=tqe,RHe=NS,PHe=XF,BHe=Mhe,DHe=Lhe,OHe=ZF,NHe=JF,MHe=Fhe,LHe=Sqe,FHe=MS(),$He=rf(),UHe=LS,VHe=Pqe,jHe=Nqe,zHe=$qe,qHe=jqe,HHe=Hqe,WHe=QF,KHe=tHe,GHe=iHe,YHe=aHe,XHe=lHe,ZHe=dHe;var JHe={parse:gHe,valid:mHe,clean:yHe,inc:vHe,diff:bHe,major:wHe,minor:_He,patch:xHe,prerelease:EHe,compare:SHe,rcompare:AHe,compareLoose:THe,compareBuild:kHe,sort:CHe,rsort:IHe,gt:RHe,lt:PHe,eq:BHe,neq:DHe,gte:OHe,lte:NHe,cmp:MHe,coerce:LHe,Comparator:FHe,Range:$He,satisfies:UHe,toComparators:VHe,maxSatisfying:jHe,minSatisfying:zHe,minVersion:qHe,validRange:HHe,outside:WHe,gtr:KHe,ltr:GHe,intersects:YHe,simplifyRange:XHe,subset:ZHe,SemVer:pHe,re:WC.re,src:WC.src,tokens:WC.t,SEMVER_SPEC_VERSION:UX.SEMVER_SPEC_VERSION,RELEASE_TYPES:UX.RELEASE_TYPES,compareIdentifiers:VX.compareIdentifiers,rcompareIdentifiers:VX.rcompareIdentifiers};const QHe=si(JHe),eWe=t=>_y.os?.family?.includes("Ubuntu")?t==="deb":_y.os?.family?.includes("OS X")?t==="dmg":_y.os?.family?.includes("Windows")?t==="exe":!1,Uhe=async()=>{const t=(await ns.get(rWe)).data;let e,r;for(const n of t){const i=n.name;if(!e||QHe.gt(i,e))for(const s of n.assets){const a=s.name.split(".").pop();a&&eWe(a)&&(e=i,r=s.browser_download_url)}}return r},tWe={linux:["deb","AppImage"],mac:["dmg"],windows:["exe"],source:["zip","gz"]};Object.values(tWe).flat();const rWe="https://api.github.com/repos/reseau-constellation/iug/releases",FS=t=>{window.open(t,"_blank")},nWe=Yt()({name:"VCardActions",props:Or(),setup(t,e){let{slots:r}=e;return zv({VBtn:{slim:!0,variant:"text"}}),_r(()=>ue("div",{class:["v-card-actions",t.class],style:t.style},[r.default?.()])),{}}}),iWe=_t({opacity:[Number,String],...Or(),...ps()},"VCardSubtitle"),r$=Yt()({name:"VCardSubtitle",props:iWe(),setup(t,e){let{slots:r}=e;return _r(()=>ue(t.tag,{class:["v-card-subtitle",t.class],style:[{"--v-card-subtitle-opacity":t.opacity},t.style]},r)),{}}}),v6=LL("v-card-title"),sWe=_t({appendAvatar:String,appendIcon:ri,prependAvatar:String,prependIcon:ri,subtitle:[String,Number],title:[String,Number],...Or(),...gh()},"VCardItem"),b6=Yt()({name:"VCardItem",props:sWe(),setup(t,e){let{slots:r}=e;return _r(()=>{const n=!!(t.prependAvatar||t.prependIcon),i=!!(n||r.prepend),s=!!(t.appendAvatar||t.appendIcon),a=!!(s||r.append),o=!!(t.title!=null||r.title),c=!!(t.subtitle!=null||r.subtitle);return ue("div",{class:["v-card-item",t.class],style:t.style},[i&&ue("div",{key:"prepend",class:"v-card-item__prepend"},[r.prepend?ue(Xs,{key:"prepend-defaults",disabled:!n,defaults:{VAvatar:{density:t.density,image:t.prependAvatar},VIcon:{density:t.density,icon:t.prependIcon}}},r.prepend):ue(qr,null,[t.prependAvatar&&ue(Wg,{key:"prepend-avatar",density:t.density,image:t.prependAvatar},null),t.prependIcon&&ue(Fn,{key:"prepend-icon",density:t.density,icon:t.prependIcon},null)])]),ue("div",{class:"v-card-item__content"},[o&&ue(v6,{key:"title"},{default:()=>[r.title?.()??t.title]}),c&&ue(r$,{key:"subtitle"},{default:()=>[r.subtitle?.()??t.subtitle]}),r.default?.()]),a&&ue("div",{key:"append",class:"v-card-item__append"},[r.append?ue(Xs,{key:"append-defaults",disabled:!s,defaults:{VAvatar:{density:t.density,image:t.appendAvatar},VIcon:{density:t.density,icon:t.appendIcon}}},r.append):ue(qr,null,[t.appendIcon&&ue(Fn,{key:"append-icon",density:t.density,icon:t.appendIcon},null),t.appendAvatar&&ue(Wg,{key:"append-avatar",density:t.density,image:t.appendAvatar},null)])])])}),{}}}),aWe=_t({opacity:[Number,String],...Or(),...ps()},"VCardText"),Pm=Yt()({name:"VCardText",props:aWe(),setup(t,e){let{slots:r}=e;return _r(()=>ue(t.tag,{class:["v-card-text",t.class],style:[{"--v-card-text-opacity":t.opacity},t.style]},r)),{}}}),oWe=_t({appendAvatar:String,appendIcon:ri,disabled:Boolean,flat:Boolean,hover:Boolean,image:String,link:{type:Boolean,default:void 0},prependAvatar:String,prependIcon:ri,ripple:{type:[Boolean,Object],default:!0},subtitle:[String,Number],text:[String,Number],title:[String,Number],...ip(),...Or(),...gh(),...mh(),...Im(),...CF(),...xS(),...RF(),...Ju(),...TS(),...ps(),...$s(),...ap({variant:"elevated"})},"VCard"),Gg=Yt()({name:"VCard",directives:{Ripple:h6},props:oWe(),setup(t,e){let{attrs:r,slots:n}=e;const{themeClasses:i}=va(t),{borderClasses:s}=sp(t),{colorClasses:a,colorStyles:o,variantClasses:c}=l6(t),{densityClasses:l}=a0(t),{dimensionStyles:u}=yh(t),{elevationClasses:f}=Rm(t),{loaderClasses:h}=SS(t),{locationStyles:d}=ES(t),{positionClasses:g}=PF(t),{roundedClasses:p}=Qu(t),m=AS(t,r),y=Te(()=>t.link!==!1&&m.isLink.value),v=Te(()=>!t.disabled&&t.link!==!1&&(t.link||m.isClickable.value));return _r(()=>{const _=y.value?"a":t.tag,x=!!(n.title||t.title!=null),A=!!(n.subtitle||t.subtitle!=null),C=x||A,R=!!(n.append||t.appendAvatar||t.appendIcon),M=!!(n.prepend||t.prependAvatar||t.prependIcon),N=!!(n.image||t.image),Y=C||M||R,H=!!(n.text||t.text!=null);return $a(ue(_,gr({class:["v-card",{"v-card--disabled":t.disabled,"v-card--flat":t.flat,"v-card--hover":t.hover&&!(t.disabled||t.flat),"v-card--link":v.value},i.value,s.value,a.value,l.value,f.value,h.value,g.value,p.value,c.value,t.class],style:[o.value,u.value,d.value,t.style],onClick:v.value&&m.navigate,tabindex:t.disabled?-1:void 0},m.linkProps),{default:()=>[N&&ue("div",{key:"image",class:"v-card__image"},[n.image?ue(Xs,{key:"image-defaults",disabled:!t.image,defaults:{VImg:{cover:!0,src:t.image}}},n.image):ue(Hy,{key:"image-img",cover:!0,src:t.image},null)]),ue(IF,{name:"v-card",active:!!t.loading,color:typeof t.loading=="boolean"?void 0:t.loading},{default:n.loader}),Y&&ue(b6,{key:"item",prependAvatar:t.prependAvatar,prependIcon:t.prependIcon,title:t.title,subtitle:t.subtitle,appendAvatar:t.appendAvatar,appendIcon:t.appendIcon},{default:n.item,prepend:n.prepend,title:n.title,subtitle:n.subtitle,append:n.append}),H&&ue(Pm,{key:"text"},{default:()=>[n.text?.()??t.text]}),n.default?.(),n.actions&&ue(nWe,null,{default:n.actions}),c6(v.value,"v-card")]}),[[J1("ripple"),v.value&&t.ripple]])}),{}}}),dg=Di({__name:"CarteLien",props:{lien:{},titre:{},icône:{},emphase:{type:Boolean}},setup(t){return(e,r)=>(pr(),Qr(Gg,{class:"ma-2 pa-2",variant:"outlined",color:e.emphase?"primary":"secondary",onClick:r[0]||(r[0]=()=>ct(FS)(e.lien))},{default:mt(()=>[ue(b6,null,{default:mt(()=>[ue(v6,null,{default:mt(()=>[Mn(xi(e.titre),1)]),_:1})]),_:1}),ue(Pm,{class:"text-center"},{default:mt(()=>[ue(Fn,{icon:e.icône,size:"50"},null,8,["icon"])]),_:1})]),_:1},8,["color"]))}});var cWe={};const jX="julien.malard@mail.mcgill.ca",lWe="https://github.com/reseau-constellation",uWe="https://drive.google.com/drive/folders/1L-nZ2rhkJUtyL0L-mpSxzOT9Y5BdCruj?usp=sharing",fWe="https://docs.google.com/spreadsheets/d/15_Kmiu2MRqCf23ZspeD-Ex9x3cUYlisJM9cc9ynayow/",od=cWe.VITE_ID_NUÉE_DONNÉES||"/orbitdb/zdpuAvWUWrZouLuJ5PVdEhNJ85tAPPuJcmw3hiDQMRsMkqgoy",Z2="11df704f-0b99-41f9-92fb-e8394ab83f88",hWe="/orbitdb/zdpuAwz2z5zKLHzKrdWY5bytWudXc6B2XCdH8x2uKj7HBxoYq",dWe="/orbitdb/zdpuArcD64xg1vnrGutGyMSESiGQomXFxAxy4kPTUP1L6bDzV",pWe="/orbitdb/zdpuAycMzQDbpJt6xvMjWGAHyn2Wya6RS6hQcKdK9QNZispex",gWe="/orbitdb/zdpuAzaZ3u9oPYqF9gukynpSvM2fMxSCD4wLx4qrxcq9R8A8k",mWe="/orbitdb/zdpuB2fu7mWLyhMxxBatYBPsBCiQcMW6xqsggb9HMKHZcnMtt",TO="idObservation",Dx="heureObservation",kO="latitude",CO="longitude",IO="précipitation",L_={licence:"ODbl-1_0",nuées:[od],tableaux:[{clef:Z2,cols:[{idVariable:hWe,idColonne:TO},{idVariable:dWe,idColonne:Dx},{idVariable:pWe,idColonne:kO},{idVariable:gWe,idColonne:CO},{idVariable:mWe,idColonne:IO}]}]},yWe={class:"d-flex justify-center flex-wrap mb-6"},vWe=Di({__name:"SectionObtConstellation",props:{nEtapes:{},etape:{}},emits:["retour","avancer"],setup(t,{emit:e}){const r=e,{மொழியாக்கம்_பயன்படுத்து:n}=s0(),{$மொ:i}=n(),{மொழி:s}=Kv(),{mdAndUp:a}=n0(),o=ht();Ai(async()=>{o.value=await Uhe()});const c=Te(()=>`https://appli.réseau-constellation.ca/?lg=${s.value}`),l=Te(()=>`https://docu.réseau-constellation.ca/${s.value}`);return(u,f)=>(pr(),Qr(p6,{"n-etapes":u.nEtapes,etape:u.etape,onRetour:f[0]||(f[0]=()=>r("retour")),onAvancer:f[1]||(f[1]=()=>r("avancer"))},{default:mt(()=>[ue(ua,{class:ku([ct(a)?"text-h2":"text-h3","text-center"]),cols:12},{default:mt(()=>[Mn(xi(ct(i)("obtConstellation.titre")),1)]),_:1},8,["class"]),ue(ua,{cols:12},{default:mt(()=>[Bs("div",yWe,[o.value?(pr(),Qr(dg,{key:0,titre:ct(i)("obtConstellation.options.télécharger"),icône:"mdi-download-outline",lien:o.value,emphase:""},null,8,["titre","lien"])):qo("",!0),ue(dg,{titre:ct(i)("obtConstellation.options.navig"),icône:"mdi-open-in-new",lien:c.value,emphase:!o.value},null,8,["titre","lien","emphase"]),ue(dg,{titre:ct(i)("obtConstellation.options.docu"),icône:"mdi-book-outline",lien:l.value},null,8,["titre","lien"]),ue(dg,{titre:ct(i)("obtConstellation.options.codeSource"),icône:"mdi-xml",lien:ct(lWe)},null,8,["titre","lien"])])]),_:1})]),_:1},8,["n-etapes","etape"]))}}),bWe={class:"d-flex justify-center flex-wrap mb-6"},wWe="https://climate.meteo.gc.ca",_We=Di({__name:"SectionTéléchargerDonnées",props:{nEtapes:{},etape:{}},emits:["retour","avancer"],setup(t,{emit:e}){const r=e,{mdAndUp:n}=n0(),{மொழியாக்கம்_பயன்படுத்து:i}=s0(),{$மொ:s}=i({});return(a,o)=>(pr(),Qr(p6,{"n-etapes":a.nEtapes,etape:a.etape,onRetour:o[1]||(o[1]=()=>r("retour")),onAvancer:o[2]||(o[2]=()=>r("avancer"))},{default:mt(()=>[ue(ua,{class:ku([ct(n)?"text-h2":"text-h3","text-center"]),cols:12},{default:mt(()=>[Mn(xi(ct(s)("données.titre")),1)]),_:1},8,["class"]),ue(ua,{cols:12},{default:mt(()=>[Bs("div",bWe,[ue(dg,{titre:ct(s)("données.télécharger"),lien:ct(uWe),icône:"mdi-download-outline",emphase:""},null,8,["titre","lien"]),ue(dg,{titre:ct(s)("données.lienDynamique"),lien:ct(fWe),icône:"mdi-link"},null,8,["titre","lien"])])]),_:1}),ue(ua,{cols:12,class:"text-center"},{default:mt(()=>[Bs("span",{class:"text-disabled",onClick:o[0]||(o[0]=()=>ct(FS)("https://climate.meteo.gc.ca"))},[Mn(xi(ct(s)("données.crédits"))+" "+xi(wWe)+" ",1),ue(Fn,{icon:"mdi-open-in-new",size:"small"})])]),_:1})]),_:1},8,["n-etapes","etape"]))}}),zX=(t,e)=>{for(const r of Object.keys(e))t.on(r,e[r])},Vhe=t=>{for(const e of Object.keys(t)){const r=t[e];r&&s1(r.cancel)&&r.cancel()}},xWe=t=>!t||typeof t.charAt!="function"?t:t.charAt(0).toUpperCase()+t.slice(1),s1=t=>typeof t=="function",Bm=(t,e,r)=>{for(const n in r){const i="set"+xWe(n);t[i]?cr(()=>r[n],(s,a)=>{t[i](s,a)}):e[i]&&cr(()=>r[n],s=>{e[i](s)})}},Dm=(t,e,r={})=>{const n={...r};for(const i in t){const s=e[i],a=t[i];s&&(s&&s.custom===!0||a!==void 0&&(n[i]=a))}return n},Jv=t=>{const e={},r={};for(const n in t)if(n.startsWith("on")&&!n.startsWith("onUpdate")&&n!=="onReady"){const i=n.slice(2).toLocaleLowerCase();e[i]=t[n]}else r[n]=t[n];return{listeners:e,attrs:r}},EWe=async t=>{const e=await Promise.all([Ar(()=>import("./marker-icon-2x-D4k_ikNW.js"),[]),Ar(()=>import("./marker-icon-C2eJqgqv.js"),[]),Ar(()=>import("./marker-shadow-DU6CIJ0p.js"),[])]);delete t.Default.prototype._getIconUrl,t.Default.mergeOptions({iconRetinaUrl:e[0].default,iconUrl:e[1].default,shadowUrl:e[2].default})},F_=t=>{const e=ht((...n)=>console.warn(`Method ${t} has been invoked without being replaced`)),r=(...n)=>e.value(...n);return r.wrapped=e,ui(t,r),r},$_=(t,e)=>t.wrapped.value=e,Nd=typeof self=="object"&&self.self===self&&self||typeof Wo=="object"&&Wo.global===Wo&&Wo||globalThis,Nu=t=>{const e=Rr(t);if(e===void 0)throw new Error(`Attempt to inject ${t.description} before it was provided.`);return e},Om=Symbol("useGlobalLeaflet"),w6=Symbol("addLayer"),jhe=Symbol("removeLayer"),zhe=Symbol("registerControl"),SWe=Symbol("registerLayerControl"),qhe=Symbol("canSetParentHtml"),Hhe=Symbol("setParentHtml"),Whe=Symbol("setIcon"),Khe=Symbol("bindPopup"),AWe=Symbol("bindTooltip"),Ghe=Symbol("unbindPopup"),TWe=Symbol("unbindTooltip"),_6={options:{type:Object,default:()=>({}),custom:!0}},x6=t=>({options:t.options,methods:{}}),Qv={..._6,pane:{type:String},attribution:{type:String},name:{type:String,custom:!0},layerType:{type:String,custom:!0},visible:{type:Boolean,custom:!0,default:!0}},Yhe=(t,e,r)=>{const n=Nu(w6),i=Nu(jhe),{options:s,methods:a}=x6(t),o=Dm(t,Qv,s),c=()=>n({leafletObject:e.value}),l=()=>i({leafletObject:e.value}),u={...a,setAttribution(f){l(),e.value.options.attribution=f,t.visible&&c()},setName(){l(),t.visible&&c()},setLayerType(){l(),t.visible&&c()},setVisible(f){e.value&&(f?c():l())},bindPopup(f){if(!e.value||!s1(e.value.bindPopup)){console.warn("Attempt to bind popup before bindPopup method available on layer.");return}e.value.bindPopup(f)},bindTooltip(f){if(!e.value||!s1(e.value.bindTooltip)){console.warn("Attempt to bind tooltip before bindTooltip method available on layer.");return}e.value.bindTooltip(f)},unbindTooltip(){e.value&&(s1(e.value.closeTooltip)&&e.value.closeTooltip(),s1(e.value.unbindTooltip)&&e.value.unbindTooltip())},unbindPopup(){e.value&&(s1(e.value.closePopup)&&e.value.closePopup(),s1(e.value.unbindPopup)&&e.value.unbindPopup())},updateVisibleProp(f){r.emit("update:visible",f)}};return ui(Khe,u.bindPopup),ui(AWe,u.bindTooltip),ui(Ghe,u.unbindPopup),ui(TWe,u.unbindTooltip),Yo(()=>{u.unbindPopup(),u.unbindTooltip(),l()}),{options:o,methods:u}},kWe=(t,e)=>{if(t&&e.default)return Va("div",{style:{display:"none"}},e.default())},CWe={...Qv,interactive:{type:Boolean,default:void 0},bubblingMouseEvents:{type:Boolean,default:void 0}},Xhe={...CWe,stroke:{type:Boolean,default:void 0},color:{type:String},weight:{type:Number},opacity:{type:Number},lineCap:{type:String},lineJoin:{type:String},dashArray:{type:String},dashOffset:{type:String},fill:{type:Boolean,default:void 0},fillColor:{type:String},fillOpacity:{type:Number},fillRule:{type:String},className:{type:String}},IWe={...Xhe,radius:{type:Number},latLng:{type:[Object,Array],required:!0,custom:!0}};({...IWe});const eb={..._6,position:{type:String}},RWe=(t,e)=>{const{options:r,methods:n}=x6(t),i=Dm(t,eb,r),s={...n,setPosition(a){e.value&&e.value.setPosition(a)}};return Yo(()=>{e.value&&e.value.remove()}),{options:i,methods:s}},PWe=t=>t.default?Va("div",{ref:"root"},t.default()):null;({...eb});({...eb});({...eb});({...eb});({...eb});const Zhe={...Qv};({...Zhe});({...Zhe});const n$={...Qv,opacity:{type:Number},zIndex:{type:Number},tileSize:{type:[Number,Array,Object]},noWrap:{type:Boolean,default:void 0},minZoom:{type:Number},maxZoom:{type:Number},className:{type:String}},Jhe=(t,e,r)=>{const{options:n,methods:i}=Yhe(t,e,r),s=Dm(t,n$,n),a={...i,setTileComponent(){var o;(o=e.value)==null||o.redraw()}};return Yo(()=>{e.value.off()}),{options:s,methods:a}},BWe=(t,e,r,n)=>t.extend({initialize(i){this.tileComponents={},this.on("tileunload",this._unloadTile),r.setOptions(this,i)},createTile(i){const s=this._tileCoordsToKey(i);this.tileComponents[s]=e.create("div");const a=Va({setup:n,props:["coords"]},{coords:i});return _Te(a,this.tileComponents[s]),this.tileComponents[s]},_unloadTile(i){const s=this._tileCoordsToKey(i.coords);this.tileComponents[s]&&(this.tileComponents[s].innerHTML="",this.tileComponents[s]=void 0)}});({...n$});const qX={iconUrl:{type:String},iconRetinaUrl:{type:String},iconSize:{type:[Object,Array]},iconAnchor:{type:[Object,Array]},popupAnchor:{type:[Object,Array]},tooltipAnchor:{type:[Object,Array]},shadowUrl:{type:String},shadowRetinaUrl:{type:String},shadowSize:{type:[Object,Array]},shadowAnchor:{type:[Object,Array]},bgPos:{type:[Object,Array]},className:{type:String}};({...qX,..._6});({...Qv});function Qhe(t,e,r){var n,i,s;e===void 0&&(e=50),r===void 0&&(r={});var a=(n=r.isImmediate)!=null&&n,o=(i=r.callback)!=null&&i,c=r.maxWait,l=Date.now(),u=[];function f(){if(c!==void 0){var d=Date.now()-l;if(d+e>=c)return c-d}return e}var h=function(){var d=[].slice.call(arguments),g=this;return new Promise(function(p,m){var y=a&&s===void 0;if(s!==void 0&&clearTimeout(s),s=setTimeout(function(){if(s=void 0,l=Date.now(),!a){var _=t.apply(g,d);o&&o(_),u.forEach(function(x){return(0,x.resolve)(_)}),u=[]}},f()),y){var v=t.apply(g,d);return o&&o(v),p(v)}u.push({resolve:p,reject:m})})};return h.cancel=function(d){s!==void 0&&clearTimeout(s),u.forEach(function(g){return(0,g.reject)(d)}),u=[]},h}const HX={..._6,center:{type:[Object,Array]},bounds:{type:[Array,Object]},maxBounds:{type:[Array,Object]},zoom:{type:Number},minZoom:{type:Number},maxZoom:{type:Number},paddingBottomRight:{type:[Object,Array]},paddingTopLeft:{type:Object},padding:{type:Object},worldCopyJump:{type:Boolean,default:void 0},crs:{type:[String,Object]},maxBoundsViscosity:{type:Number},inertia:{type:Boolean,default:void 0},inertiaDeceleration:{type:Number},inertiaMaxSpeed:{type:Number},easeLinearity:{type:Number},zoomAnimation:{type:Boolean,default:void 0},zoomAnimationThreshold:{type:Number},fadeAnimation:{type:Boolean,default:void 0},markerZoomAnimation:{type:Boolean,default:void 0},noBlockingAnimations:{type:Boolean,default:void 0},useGlobalLeaflet:{type:Boolean,default:!0,custom:!0}},DWe=Di({inheritAttrs:!1,emits:["ready","update:zoom","update:center","update:bounds"],props:HX,setup(t,e){const r=ht(),n=Ps({ready:!1,layersToAdd:[],layersInControl:[]}),{options:i}=x6(t),s=Dm(t,HX,i),{listeners:a,attrs:o}=Jv(e.attrs),c=F_(w6),l=F_(jhe),u=F_(zhe),f=F_(SWe);ui(Om,t.useGlobalLeaflet);const h=Te(()=>{const y={};return t.noBlockingAnimations&&(y.animate=!1),y}),d=Te(()=>{const y=h.value;return t.padding&&(y.padding=t.padding),t.paddingTopLeft&&(y.paddingTopLeft=t.paddingTopLeft),t.paddingBottomRight&&(y.paddingBottomRight=t.paddingBottomRight),y}),g={moveend:Qhe(y=>{n.leafletRef&&(e.emit("update:zoom",n.leafletRef.getZoom()),e.emit("update:center",n.leafletRef.getCenter()),e.emit("update:bounds",n.leafletRef.getBounds()))}),overlayadd(y){const v=n.layersInControl.find(_=>_.name===y.name);v&&v.updateVisibleProp(!0)},overlayremove(y){const v=n.layersInControl.find(_=>_.name===y.name);v&&v.updateVisibleProp(!1)}};Ai(async()=>{t.useGlobalLeaflet&&(Nd.L=Nd.L||await Ar(()=>import("./leaflet-src-icHZyzN0.js").then(N=>N.l),[]));const{map:y,CRS:v,Icon:_,latLngBounds:x,latLng:A,stamp:C}=t.useGlobalLeaflet?Nd.L:await Ar(()=>import("./leaflet-src.esm-HdBnhJze.js"),[]);try{s.beforeMapMount&&await s.beforeMapMount()}catch(N){console.error(`The following error occurred running the provided beforeMapMount hook ${N.message}`)}await EWe(_);const R=typeof s.crs=="string"?v[s.crs]:s.crs;s.crs=R||v.EPSG3857;const M={addLayer(N){N.layerType!==void 0&&(n.layerControl===void 0?n.layersToAdd.push(N):n.layersInControl.find(Y=>C(Y.leafletObject)===C(N.leafletObject))||(n.layerControl.addLayer(N),n.layersInControl.push(N))),N.visible!==!1&&n.leafletRef.addLayer(N.leafletObject)},removeLayer(N){N.layerType!==void 0&&(n.layerControl===void 0?n.layersToAdd=n.layersToAdd.filter(Y=>Y.name!==N.name):(n.layerControl.removeLayer(N.leafletObject),n.layersInControl=n.layersInControl.filter(Y=>C(Y.leafletObject)!==C(N.leafletObject)))),n.leafletRef.removeLayer(N.leafletObject)},registerLayerControl(N){n.layerControl=N,n.layersToAdd.forEach(Y=>{n.layerControl.addLayer(Y)}),n.layersToAdd=[],u(N)},registerControl(N){n.leafletRef.addControl(N.leafletObject)},setZoom(N){const Y=n.leafletRef.getZoom();N!==Y&&n.leafletRef.setZoom(N,h.value)},setCrs(N){const Y=n.leafletRef.getBounds();n.leafletRef.options.crs=N,n.leafletRef.fitBounds(Y,{animate:!1,padding:[0,0]})},fitBounds(N){n.leafletRef.fitBounds(N,d.value)},setBounds(N){if(!N)return;const Y=x(N);Y.isValid()&&!(n.lastSetBounds||n.leafletRef.getBounds()).equals(Y,0)&&(n.lastSetBounds=Y,n.leafletRef.fitBounds(Y))},setCenter(N){if(N==null)return;const Y=A(N),H=n.lastSetCenter||n.leafletRef.getCenter();(H.lat!==Y.lat||H.lng!==Y.lng)&&(n.lastSetCenter=Y,n.leafletRef.panTo(Y,h.value))}};$_(c,M.addLayer),$_(l,M.removeLayer),$_(u,M.registerControl),$_(f,M.registerLayerControl),n.leafletRef=Tm(y(r.value,s)),Bm(M,n.leafletRef,t),zX(n.leafletRef,g),zX(n.leafletRef,a),n.ready=!0,Bi(()=>e.emit("ready",n.leafletRef))}),bo(()=>{Vhe(g),n.leafletRef&&(n.leafletRef.off(),n.leafletRef.remove())});const p=Te(()=>n.leafletRef),m=Te(()=>n.ready);return{root:r,ready:m,leafletObject:p,attrs:o}},render({attrs:t}){return t.style||(t.style={}),t.style.width||(t.style.width="100%"),t.style.height||(t.style.height="100%"),Va("div",{...t,ref:"root"},this.ready&&this.$slots.default?this.$slots.default():{})}}),OWe=["Symbol(Comment)","Symbol(Text)"],NWe=["LTooltip","LPopup"],ede={...Qv,draggable:{type:Boolean,default:void 0},icon:{type:[Object]},zIndexOffset:{type:Number},latLng:{type:[Object,Array],custom:!0,required:!0}},MWe=(t,e,r)=>{const{options:n,methods:i}=Yhe(t,e,r),s=Dm(t,ede,n),a={...i,setDraggable(o){e.value.dragging&&(o?e.value.dragging.enable():e.value.dragging.disable())},latLngSync(o){r.emit("update:latLng",o.latlng),r.emit("update:lat-lng",o.latlng)},setLatLng(o){if(o!=null&&e.value){const c=e.value.getLatLng();(!c||!c.equals(o))&&e.value.setLatLng(o)}}};return{options:s,methods:a}},LWe=(t,e)=>{const r=e.slots.default&&e.slots.default();return r&&r.length&&r.some(FWe)};function FWe(t){return!(OWe.includes(t.type.toString())||NWe.includes(t.type.name))}const $We=Di({name:"LMarker",props:ede,setup(t,e){const r=ht(),n=ht(!1),i=Rr(Om),s=Nu(w6);ui(qhe,()=>{var l;return!!((l=r.value)!=null&&l.getElement())}),ui(Hhe,l=>{var u,f;const h=s1((u=r.value)==null?void 0:u.getElement)&&((f=r.value)==null?void 0:f.getElement());h&&(h.innerHTML=l)}),ui(Whe,l=>{var u;return((u=r.value)==null?void 0:u.setIcon)&&r.value.setIcon(l)});const{options:a,methods:o}=MWe(t,r,e),c={moveHandler:Qhe(o.latLngSync)};return Ai(async()=>{const{marker:l,divIcon:u}=i?Nd.L:await Ar(()=>import("./leaflet-src.esm-HdBnhJze.js"),[]);LWe(a,e)&&(a.icon=u({className:""})),r.value=Tm(l(t.latLng,a));const{listeners:f}=Jv(e.attrs);r.value.on(f),r.value.on("move",c.moveHandler),Bm(o,r.value,t),s({...t,...o,leafletObject:r.value}),n.value=!0,Bi(()=>e.emit("ready",r.value))}),bo(()=>Vhe(c)),{ready:n,leafletObject:r}},render(){return kWe(this.ready,this.$slots)}}),UWe={...Xhe,smoothFactor:{type:Number},noClip:{type:Boolean,default:void 0},latLngs:{type:Array,required:!0,custom:!0}},WX={...UWe},tde={..._6,content:{type:String,default:null}},VWe=(t,e)=>{const{options:r,methods:n}=x6(t),i={...n,setContent(s){e.value&&s!==null&&s!==void 0&&e.value.setContent(s)}};return{options:r,methods:i}},jWe=t=>t.default?Va("div",{ref:"root"},t.default()):null,zWe={...tde,latLng:{type:[Object,Array],default:()=>[]}},qWe=(t,e)=>{const{options:r,methods:n}=VWe(t,e);return{options:r,methods:n}},HWe=Di({name:"LPopup",props:zWe,setup(t,e){const r=ht(),n=ht(null),i=Rr(Om),s=Nu(Khe),a=Nu(Ghe),{options:o,methods:c}=qWe(t,r);return Ai(async()=>{const{popup:l}=i?Nd.L:await Ar(()=>import("./leaflet-src.esm-HdBnhJze.js"),[]);r.value=Tm(l(o)),t.latLng!==void 0&&r.value.setLatLng(t.latLng),Bm(c,r.value,t);const{listeners:u}=Jv(e.attrs);r.value.on(u),r.value.setContent(t.content||n.value||""),s(r.value),Bi(()=>e.emit("ready",r.value))}),bo(()=>{a()}),{root:n,leafletObject:r}},render(){return jWe(this.$slots)}});({...WX,latLngs:{...WX.latLngs}});const i$={...n$,tms:{type:Boolean,default:void 0},subdomains:{type:[String,Array],validator:t=>typeof t=="string"?!0:Array.isArray(t)?t.every(e=>typeof e=="string"):!1},detectRetina:{type:Boolean,default:void 0},url:{type:String,required:!0,custom:!0}},WWe=(t,e,r)=>{const{options:n,methods:i}=Jhe(t,e,r),s=Dm(t,i$,n),a={...i};return{options:s,methods:a}},KWe=Di({props:i$,setup(t,e){const r=ht(),n=Rr(Om),i=Nu(w6),{options:s,methods:a}=WWe(t,r,e);return Ai(async()=>{const{tileLayer:o}=n?Nd.L:await Ar(()=>import("./leaflet-src.esm-HdBnhJze.js"),[]);r.value=Tm(o(t.url,s));const{listeners:c}=Jv(e.attrs);r.value.on(c),Bm(a,r.value,t),i({...t,...a,leafletObject:r.value}),Bi(()=>e.emit("ready",r.value))}),{leafletObject:r}},render(){return null}});({...tde});({...i$});function Ox(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function GWe(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function s$(t){let e,r,n;t.length!==2?(e=Ox,r=(o,c)=>Ox(t(o),c),n=(o,c)=>t(o)-c):(e=t===Ox||t===GWe?t:YWe,r=t,n=t);function i(o,c,l=0,u=o.length){if(l<u){if(e(c,c)!==0)return u;do{const f=l+u>>>1;r(o[f],c)<0?l=f+1:u=f}while(l<u)}return l}function s(o,c,l=0,u=o.length){if(l<u){if(e(c,c)!==0)return u;do{const f=l+u>>>1;r(o[f],c)<=0?l=f+1:u=f}while(l<u)}return l}function a(o,c,l=0,u=o.length){const f=i(o,c,l,u-1);return f>l&&n(o[f-1],c)>-n(o[f],c)?f-1:f}return{left:i,center:a,right:s}}function YWe(){return 0}function XWe(t){return t===null?NaN:+t}const ZWe=s$(Ox),JWe=ZWe.right;s$(XWe).center;function QWe(t,e){let r,n;if(e===void 0)for(const i of t)i!=null&&(r===void 0?i>=i&&(r=n=i):(r>i&&(r=i),n<i&&(n=i)));else{let i=-1;for(let s of t)(s=e(s,++i,t))!=null&&(r===void 0?s>=s&&(r=n=s):(r>s&&(r=s),n<s&&(n=s)))}return[r,n]}const eKe=Math.sqrt(50),tKe=Math.sqrt(10),rKe=Math.sqrt(2);function Y7(t,e,r){const n=(e-t)/Math.max(0,r),i=Math.floor(Math.log10(n)),s=n/Math.pow(10,i),a=s>=eKe?10:s>=tKe?5:s>=rKe?2:1;let o,c,l;return i<0?(l=Math.pow(10,-i)/a,o=Math.round(t*l),c=Math.round(e*l),o/l<t&&++o,c/l>e&&--c,l=-l):(l=Math.pow(10,i)*a,o=Math.round(t/l),c=Math.round(e/l),o*l<t&&++o,c*l>e&&--c),c<o&&.5<=r&&r<2?Y7(t,e,r*2):[o,c,l]}function nKe(t,e,r){if(e=+e,t=+t,r=+r,!(r>0))return[];if(t===e)return[t];const n=e<t,[i,s,a]=n?Y7(e,t,r):Y7(t,e,r);if(!(s>=i))return[];const o=s-i+1,c=new Array(o);if(n)if(a<0)for(let l=0;l<o;++l)c[l]=(s-l)/-a;else for(let l=0;l<o;++l)c[l]=(s-l)*a;else if(a<0)for(let l=0;l<o;++l)c[l]=(i+l)/-a;else for(let l=0;l<o;++l)c[l]=(i+l)*a;return c}function RO(t,e,r){return e=+e,t=+t,r=+r,Y7(t,e,r)[2]}function PO(t,e,r){e=+e,t=+t,r=+r;const n=e<t,i=n?RO(e,t,r):RO(t,e,r);return(n?-1:1)*(i<0?1/-i:i)}function iKe(t,e){let r;if(e===void 0)for(const n of t)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);else{let n=-1;for(let i of t)(i=e(i,++n,t))!=null&&(r<i||r===void 0&&i>=i)&&(r=i)}return r}function sKe(t){return t}var KC=1,GC=2,BO=3,Vw=4,KX=1e-6;function aKe(t){return"translate("+t+",0)"}function oKe(t){return"translate(0,"+t+")"}function cKe(t){return e=>+t(e)}function lKe(t,e){return e=Math.max(0,t.bandwidth()-e*2)/2,t.round()&&(e=Math.round(e)),r=>+t(r)+e}function uKe(){return!this.__axis}function rde(t,e){var r=[],n=null,i=null,s=6,a=6,o=3,c=typeof window<"u"&&window.devicePixelRatio>1?0:.5,l=t===KC||t===Vw?-1:1,u=t===Vw||t===GC?"x":"y",f=t===KC||t===BO?aKe:oKe;function h(d){var g=n??(e.ticks?e.ticks.apply(e,r):e.domain()),p=i??(e.tickFormat?e.tickFormat.apply(e,r):sKe),m=Math.max(s,0)+o,y=e.range(),v=+y[0]+c,_=+y[y.length-1]+c,x=(e.bandwidth?lKe:cKe)(e.copy(),c),A=d.selection?d.selection():d,C=A.selectAll(".domain").data([null]),R=A.selectAll(".tick").data(g,e).order(),M=R.exit(),N=R.enter().append("g").attr("class","tick"),Y=R.select("line"),H=R.select("text");C=C.merge(C.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),R=R.merge(N),Y=Y.merge(N.append("line").attr("stroke","currentColor").attr(u+"2",l*s)),H=H.merge(N.append("text").attr("fill","currentColor").attr(u,l*m).attr("dy",t===KC?"0em":t===BO?"0.71em":"0.32em")),d!==A&&(C=C.transition(d),R=R.transition(d),Y=Y.transition(d),H=H.transition(d),M=M.transition(d).attr("opacity",KX).attr("transform",function(E){return isFinite(E=x(E))?f(E+c):this.getAttribute("transform")}),N.attr("opacity",KX).attr("transform",function(E){var k=this.parentNode.__axis;return f((k&&isFinite(k=k(E))?k:x(E))+c)})),M.remove(),C.attr("d",t===Vw||t===GC?a?"M"+l*a+","+v+"H"+c+"V"+_+"H"+l*a:"M"+c+","+v+"V"+_:a?"M"+v+","+l*a+"V"+c+"H"+_+"V"+l*a:"M"+v+","+c+"H"+_),R.attr("opacity",1).attr("transform",function(E){return f(x(E)+c)}),Y.attr(u+"2",l*s),H.attr(u,l*m).text(p),A.filter(uKe).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===GC?"start":t===Vw?"end":"middle"),A.each(function(){this.__axis=x})}return h.scale=function(d){return arguments.length?(e=d,h):e},h.ticks=function(){return r=Array.from(arguments),h},h.tickArguments=function(d){return arguments.length?(r=d==null?[]:Array.from(d),h):r.slice()},h.tickValues=function(d){return arguments.length?(n=d==null?null:Array.from(d),h):n&&n.slice()},h.tickFormat=function(d){return arguments.length?(i=d,h):i},h.tickSize=function(d){return arguments.length?(s=a=+d,h):s},h.tickSizeInner=function(d){return arguments.length?(s=+d,h):s},h.tickSizeOuter=function(d){return arguments.length?(a=+d,h):a},h.tickPadding=function(d){return arguments.length?(o=+d,h):o},h.offset=function(d){return arguments.length?(c=+d,h):c},h}function fKe(t){return rde(BO,t)}function hKe(t){return rde(Vw,t)}var dKe={value:()=>{}};function nde(){for(var t=0,e=arguments.length,r={},n;t<e;++t){if(!(n=arguments[t]+"")||n in r||/[\s.]/.test(n))throw new Error("illegal type: "+n);r[n]=[]}return new Nx(r)}function Nx(t){this._=t}function pKe(t,e){return t.trim().split(/^|\s+/).map(function(r){var n="",i=r.indexOf(".");if(i>=0&&(n=r.slice(i+1),r=r.slice(0,i)),r&&!e.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:n}})}Nx.prototype=nde.prototype={constructor:Nx,on:function(t,e){var r=this._,n=pKe(t+"",r),i,s=-1,a=n.length;if(arguments.length<2){for(;++s<a;)if((i=(t=n[s]).type)&&(i=gKe(r[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++s<a;)if(i=(t=n[s]).type)r[i]=GX(r[i],t.name,e);else if(e==null)for(i in r)r[i]=GX(r[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var r in e)t[r]=e[r].slice();return new Nx(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var r=new Array(i),n=0,i,s;n<i;++n)r[n]=arguments[n+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=this._[t],n=0,i=s.length;n<i;++n)s[n].value.apply(e,r)},apply:function(t,e,r){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var n=this._[t],i=0,s=n.length;i<s;++i)n[i].value.apply(e,r)}};function gKe(t,e){for(var r=0,n=t.length,i;r<n;++r)if((i=t[r]).name===e)return i.value}function GX(t,e,r){for(var n=0,i=t.length;n<i;++n)if(t[n].name===e){t[n]=dKe,t=t.slice(0,n).concat(t.slice(n+1));break}return r!=null&&t.push({name:e,value:r}),t}var DO="http://www.w3.org/1999/xhtml";const YX={svg:"http://www.w3.org/2000/svg",xhtml:DO,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function $S(t){var e=t+="",r=e.indexOf(":");return r>=0&&(e=t.slice(0,r))!=="xmlns"&&(t=t.slice(r+1)),YX.hasOwnProperty(e)?{space:YX[e],local:t}:t}function mKe(t){return function(){var e=this.ownerDocument,r=this.namespaceURI;return r===DO&&e.documentElement.namespaceURI===DO?e.createElement(t):e.createElementNS(r,t)}}function yKe(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function ide(t){var e=$S(t);return(e.local?yKe:mKe)(e)}function vKe(){}function a$(t){return t==null?vKe:function(){return this.querySelector(t)}}function bKe(t){typeof t!="function"&&(t=a$(t));for(var e=this._groups,r=e.length,n=new Array(r),i=0;i<r;++i)for(var s=e[i],a=s.length,o=n[i]=new Array(a),c,l,u=0;u<a;++u)(c=s[u])&&(l=t.call(c,c.__data__,u,s))&&("__data__"in c&&(l.__data__=c.__data__),o[u]=l);return new nl(n,this._parents)}function wKe(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function _Ke(){return[]}function sde(t){return t==null?_Ke:function(){return this.querySelectorAll(t)}}function xKe(t){return function(){return wKe(t.apply(this,arguments))}}function EKe(t){typeof t=="function"?t=xKe(t):t=sde(t);for(var e=this._groups,r=e.length,n=[],i=[],s=0;s<r;++s)for(var a=e[s],o=a.length,c,l=0;l<o;++l)(c=a[l])&&(n.push(t.call(c,c.__data__,l,a)),i.push(c));return new nl(n,i)}function ade(t){return function(){return this.matches(t)}}function ode(t){return function(e){return e.matches(t)}}var SKe=Array.prototype.find;function AKe(t){return function(){return SKe.call(this.children,t)}}function TKe(){return this.firstElementChild}function kKe(t){return this.select(t==null?TKe:AKe(typeof t=="function"?t:ode(t)))}var CKe=Array.prototype.filter;function IKe(){return Array.from(this.children)}function RKe(t){return function(){return CKe.call(this.children,t)}}function PKe(t){return this.selectAll(t==null?IKe:RKe(typeof t=="function"?t:ode(t)))}function BKe(t){typeof t!="function"&&(t=ade(t));for(var e=this._groups,r=e.length,n=new Array(r),i=0;i<r;++i)for(var s=e[i],a=s.length,o=n[i]=[],c,l=0;l<a;++l)(c=s[l])&&t.call(c,c.__data__,l,s)&&o.push(c);return new nl(n,this._parents)}function cde(t){return new Array(t.length)}function DKe(){return new nl(this._enter||this._groups.map(cde),this._parents)}function X7(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}X7.prototype={constructor:X7,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function OKe(t){return function(){return t}}function NKe(t,e,r,n,i,s){for(var a=0,o,c=e.length,l=s.length;a<l;++a)(o=e[a])?(o.__data__=s[a],n[a]=o):r[a]=new X7(t,s[a]);for(;a<c;++a)(o=e[a])&&(i[a]=o)}function MKe(t,e,r,n,i,s,a){var o,c,l=new Map,u=e.length,f=s.length,h=new Array(u),d;for(o=0;o<u;++o)(c=e[o])&&(h[o]=d=a.call(c,c.__data__,o,e)+"",l.has(d)?i[o]=c:l.set(d,c));for(o=0;o<f;++o)d=a.call(t,s[o],o,s)+"",(c=l.get(d))?(n[o]=c,c.__data__=s[o],l.delete(d)):r[o]=new X7(t,s[o]);for(o=0;o<u;++o)(c=e[o])&&l.get(h[o])===c&&(i[o]=c)}function LKe(t){return t.__data__}function FKe(t,e){if(!arguments.length)return Array.from(this,LKe);var r=e?MKe:NKe,n=this._parents,i=this._groups;typeof t!="function"&&(t=OKe(t));for(var s=i.length,a=new Array(s),o=new Array(s),c=new Array(s),l=0;l<s;++l){var u=n[l],f=i[l],h=f.length,d=$Ke(t.call(u,u&&u.__data__,l,n)),g=d.length,p=o[l]=new Array(g),m=a[l]=new Array(g),y=c[l]=new Array(h);r(u,f,p,m,y,d,e);for(var v=0,_=0,x,A;v<g;++v)if(x=p[v]){for(v>=_&&(_=v+1);!(A=m[_])&&++_<g;);x._next=A||null}}return a=new nl(a,n),a._enter=o,a._exit=c,a}function $Ke(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function UKe(){return new nl(this._exit||this._groups.map(cde),this._parents)}function VKe(t,e,r){var n=this.enter(),i=this,s=this.exit();return typeof t=="function"?(n=t(n),n&&(n=n.selection())):n=n.append(t+""),e!=null&&(i=e(i),i&&(i=i.selection())),r==null?s.remove():r(s),n&&i?n.merge(i).order():i}function jKe(t){for(var e=t.selection?t.selection():t,r=this._groups,n=e._groups,i=r.length,s=n.length,a=Math.min(i,s),o=new Array(i),c=0;c<a;++c)for(var l=r[c],u=n[c],f=l.length,h=o[c]=new Array(f),d,g=0;g<f;++g)(d=l[g]||u[g])&&(h[g]=d);for(;c<i;++c)o[c]=r[c];return new nl(o,this._parents)}function zKe(){for(var t=this._groups,e=-1,r=t.length;++e<r;)for(var n=t[e],i=n.length-1,s=n[i],a;--i>=0;)(a=n[i])&&(s&&a.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(a,s),s=a);return this}function qKe(t){t||(t=HKe);function e(f,h){return f&&h?t(f.__data__,h.__data__):!f-!h}for(var r=this._groups,n=r.length,i=new Array(n),s=0;s<n;++s){for(var a=r[s],o=a.length,c=i[s]=new Array(o),l,u=0;u<o;++u)(l=a[u])&&(c[u]=l);c.sort(e)}return new nl(i,this._parents).order()}function HKe(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function WKe(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function KKe(){return Array.from(this)}function GKe(){for(var t=this._groups,e=0,r=t.length;e<r;++e)for(var n=t[e],i=0,s=n.length;i<s;++i){var a=n[i];if(a)return a}return null}function YKe(){let t=0;for(const e of this)++t;return t}function XKe(){return!this.node()}function ZKe(t){for(var e=this._groups,r=0,n=e.length;r<n;++r)for(var i=e[r],s=0,a=i.length,o;s<a;++s)(o=i[s])&&t.call(o,o.__data__,s,i);return this}function JKe(t){return function(){this.removeAttribute(t)}}function QKe(t){return function(){this.removeAttributeNS(t.space,t.local)}}function eGe(t,e){return function(){this.setAttribute(t,e)}}function tGe(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function rGe(t,e){return function(){var r=e.apply(this,arguments);r==null?this.removeAttribute(t):this.setAttribute(t,r)}}function nGe(t,e){return function(){var r=e.apply(this,arguments);r==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,r)}}function iGe(t,e){var r=$S(t);if(arguments.length<2){var n=this.node();return r.local?n.getAttributeNS(r.space,r.local):n.getAttribute(r)}return this.each((e==null?r.local?QKe:JKe:typeof e=="function"?r.local?nGe:rGe:r.local?tGe:eGe)(r,e))}function lde(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function sGe(t){return function(){this.style.removeProperty(t)}}function aGe(t,e,r){return function(){this.style.setProperty(t,e,r)}}function oGe(t,e,r){return function(){var n=e.apply(this,arguments);n==null?this.style.removeProperty(t):this.style.setProperty(t,n,r)}}function cGe(t,e,r){return arguments.length>1?this.each((e==null?sGe:typeof e=="function"?oGe:aGe)(t,e,r??"")):Ky(this.node(),t)}function Ky(t,e){return t.style.getPropertyValue(e)||lde(t).getComputedStyle(t,null).getPropertyValue(e)}function lGe(t){return function(){delete this[t]}}function uGe(t,e){return function(){this[t]=e}}function fGe(t,e){return function(){var r=e.apply(this,arguments);r==null?delete this[t]:this[t]=r}}function hGe(t,e){return arguments.length>1?this.each((e==null?lGe:typeof e=="function"?fGe:uGe)(t,e)):this.node()[t]}function ude(t){return t.trim().split(/^|\s+/)}function o$(t){return t.classList||new fde(t)}function fde(t){this._node=t,this._names=ude(t.getAttribute("class")||"")}fde.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function hde(t,e){for(var r=o$(t),n=-1,i=e.length;++n<i;)r.add(e[n])}function dde(t,e){for(var r=o$(t),n=-1,i=e.length;++n<i;)r.remove(e[n])}function dGe(t){return function(){hde(this,t)}}function pGe(t){return function(){dde(this,t)}}function gGe(t,e){return function(){(e.apply(this,arguments)?hde:dde)(this,t)}}function mGe(t,e){var r=ude(t+"");if(arguments.length<2){for(var n=o$(this.node()),i=-1,s=r.length;++i<s;)if(!n.contains(r[i]))return!1;return!0}return this.each((typeof e=="function"?gGe:e?dGe:pGe)(r,e))}function yGe(){this.textContent=""}function vGe(t){return function(){this.textContent=t}}function bGe(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function wGe(t){return arguments.length?this.each(t==null?yGe:(typeof t=="function"?bGe:vGe)(t)):this.node().textContent}function _Ge(){this.innerHTML=""}function xGe(t){return function(){this.innerHTML=t}}function EGe(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function SGe(t){return arguments.length?this.each(t==null?_Ge:(typeof t=="function"?EGe:xGe)(t)):this.node().innerHTML}function AGe(){this.nextSibling&&this.parentNode.appendChild(this)}function TGe(){return this.each(AGe)}function kGe(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function CGe(){return this.each(kGe)}function IGe(t){var e=typeof t=="function"?t:ide(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function RGe(){return null}function PGe(t,e){var r=typeof t=="function"?t:ide(t),n=e==null?RGe:typeof e=="function"?e:a$(e);return this.select(function(){return this.insertBefore(r.apply(this,arguments),n.apply(this,arguments)||null)})}function BGe(){var t=this.parentNode;t&&t.removeChild(this)}function DGe(){return this.each(BGe)}function OGe(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function NGe(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function MGe(t){return this.select(t?NGe:OGe)}function LGe(t){return arguments.length?this.property("__data__",t):this.node().__data__}function FGe(t){return function(e){t.call(this,e,this.__data__)}}function $Ge(t){return t.trim().split(/^|\s+/).map(function(e){var r="",n=e.indexOf(".");return n>=0&&(r=e.slice(n+1),e=e.slice(0,n)),{type:e,name:r}})}function UGe(t){return function(){var e=this.__on;if(e){for(var r=0,n=-1,i=e.length,s;r<i;++r)s=e[r],(!t.type||s.type===t.type)&&s.name===t.name?this.removeEventListener(s.type,s.listener,s.options):e[++n]=s;++n?e.length=n:delete this.__on}}}function VGe(t,e,r){return function(){var n=this.__on,i,s=FGe(e);if(n){for(var a=0,o=n.length;a<o;++a)if((i=n[a]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=r),i.value=e;return}}this.addEventListener(t.type,s,r),i={type:t.type,name:t.name,value:e,listener:s,options:r},n?n.push(i):this.__on=[i]}}function jGe(t,e,r){var n=$Ge(t+""),i,s=n.length,a;if(arguments.length<2){var o=this.node().__on;if(o){for(var c=0,l=o.length,u;c<l;++c)for(i=0,u=o[c];i<s;++i)if((a=n[i]).type===u.type&&a.name===u.name)return u.value}return}for(o=e?VGe:UGe,i=0;i<s;++i)this.each(o(n[i],e,r));return this}function pde(t,e,r){var n=lde(t),i=n.CustomEvent;typeof i=="function"?i=new i(e,r):(i=n.document.createEvent("Event"),r?(i.initEvent(e,r.bubbles,r.cancelable),i.detail=r.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function zGe(t,e){return function(){return pde(this,t,e)}}function qGe(t,e){return function(){return pde(this,t,e.apply(this,arguments))}}function HGe(t,e){return this.each((typeof e=="function"?qGe:zGe)(t,e))}function*WGe(){for(var t=this._groups,e=0,r=t.length;e<r;++e)for(var n=t[e],i=0,s=n.length,a;i<s;++i)(a=n[i])&&(yield a)}var gde=[null];function nl(t,e){this._groups=t,this._parents=e}function E6(){return new nl([[document.documentElement]],gde)}function KGe(){return this}nl.prototype=E6.prototype={constructor:nl,select:bKe,selectAll:EKe,selectChild:kKe,selectChildren:PKe,filter:BKe,data:FKe,enter:DKe,exit:UKe,join:VKe,merge:jKe,selection:KGe,order:zKe,sort:qKe,call:WKe,nodes:KKe,node:GKe,size:YKe,empty:XKe,each:ZKe,attr:iGe,style:cGe,property:hGe,classed:mGe,text:wGe,html:SGe,raise:TGe,lower:CGe,append:IGe,insert:PGe,remove:DGe,clone:MGe,datum:LGe,on:jGe,dispatch:HGe,[Symbol.iterator]:WGe};function GGe(t){return typeof t=="string"?new nl([[document.querySelector(t)]],[document.documentElement]):new nl([[t]],gde)}function c$(t,e,r){t.prototype=e.prototype=r,r.constructor=t}function mde(t,e){var r=Object.create(t.prototype);for(var n in e)r[n]=e[n];return r}function S6(){}var l4=.7,Z7=1/l4,xy="\\s*([+-]?\\d+)\\s*",u4="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",eh="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",YGe=/^#([0-9a-f]{3,8})$/,XGe=new RegExp(`^rgb\\(${xy},${xy},${xy}\\)$`),ZGe=new RegExp(`^rgb\\(${eh},${eh},${eh}\\)$`),JGe=new RegExp(`^rgba\\(${xy},${xy},${xy},${u4}\\)$`),QGe=new RegExp(`^rgba\\(${eh},${eh},${eh},${u4}\\)$`),eYe=new RegExp(`^hsl\\(${u4},${eh},${eh}\\)$`),tYe=new RegExp(`^hsla\\(${u4},${eh},${eh},${u4}\\)$`),XX={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};c$(S6,Yg,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:ZX,formatHex:ZX,formatHex8:rYe,formatHsl:nYe,formatRgb:JX,toString:JX});function ZX(){return this.rgb().formatHex()}function rYe(){return this.rgb().formatHex8()}function nYe(){return yde(this).formatHsl()}function JX(){return this.rgb().formatRgb()}function Yg(t){var e,r;return t=(t+"").trim().toLowerCase(),(e=YGe.exec(t))?(r=e[1].length,e=parseInt(e[1],16),r===6?QX(e):r===3?new bc(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):r===8?U_(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):r===4?U_(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=XGe.exec(t))?new bc(e[1],e[2],e[3],1):(e=ZGe.exec(t))?new bc(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=JGe.exec(t))?U_(e[1],e[2],e[3],e[4]):(e=QGe.exec(t))?U_(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=eYe.exec(t))?rZ(e[1],e[2]/100,e[3]/100,1):(e=tYe.exec(t))?rZ(e[1],e[2]/100,e[3]/100,e[4]):XX.hasOwnProperty(t)?QX(XX[t]):t==="transparent"?new bc(NaN,NaN,NaN,0):null}function QX(t){return new bc(t>>16&255,t>>8&255,t&255,1)}function U_(t,e,r,n){return n<=0&&(t=e=r=NaN),new bc(t,e,r,n)}function iYe(t){return t instanceof S6||(t=Yg(t)),t?(t=t.rgb(),new bc(t.r,t.g,t.b,t.opacity)):new bc}function OO(t,e,r,n){return arguments.length===1?iYe(t):new bc(t,e,r,n??1)}function bc(t,e,r,n){this.r=+t,this.g=+e,this.b=+r,this.opacity=+n}c$(bc,OO,mde(S6,{brighter(t){return t=t==null?Z7:Math.pow(Z7,t),new bc(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?l4:Math.pow(l4,t),new bc(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new bc(Ag(this.r),Ag(this.g),Ag(this.b),J7(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:eZ,formatHex:eZ,formatHex8:sYe,formatRgb:tZ,toString:tZ}));function eZ(){return`#${pg(this.r)}${pg(this.g)}${pg(this.b)}`}function sYe(){return`#${pg(this.r)}${pg(this.g)}${pg(this.b)}${pg((isNaN(this.opacity)?1:this.opacity)*255)}`}function tZ(){const t=J7(this.opacity);return`${t===1?"rgb(":"rgba("}${Ag(this.r)}, ${Ag(this.g)}, ${Ag(this.b)}${t===1?")":`, ${t})`}`}function J7(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Ag(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function pg(t){return t=Ag(t),(t<16?"0":"")+t.toString(16)}function rZ(t,e,r,n){return n<=0?t=e=r=NaN:r<=0||r>=1?t=e=NaN:e<=0&&(t=NaN),new Au(t,e,r,n)}function yde(t){if(t instanceof Au)return new Au(t.h,t.s,t.l,t.opacity);if(t instanceof S6||(t=Yg(t)),!t)return new Au;if(t instanceof Au)return t;t=t.rgb();var e=t.r/255,r=t.g/255,n=t.b/255,i=Math.min(e,r,n),s=Math.max(e,r,n),a=NaN,o=s-i,c=(s+i)/2;return o?(e===s?a=(r-n)/o+(r<n)*6:r===s?a=(n-e)/o+2:a=(e-r)/o+4,o/=c<.5?s+i:2-s-i,a*=60):o=c>0&&c<1?0:a,new Au(a,o,c,t.opacity)}function aYe(t,e,r,n){return arguments.length===1?yde(t):new Au(t,e,r,n??1)}function Au(t,e,r,n){this.h=+t,this.s=+e,this.l=+r,this.opacity=+n}c$(Au,aYe,mde(S6,{brighter(t){return t=t==null?Z7:Math.pow(Z7,t),new Au(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?l4:Math.pow(l4,t),new Au(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*e,i=2*r-n;return new bc(YC(t>=240?t-240:t+120,i,n),YC(t,i,n),YC(t<120?t+240:t-120,i,n),this.opacity)},clamp(){return new Au(nZ(this.h),V_(this.s),V_(this.l),J7(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=J7(this.opacity);return`${t===1?"hsl(":"hsla("}${nZ(this.h)}, ${V_(this.s)*100}%, ${V_(this.l)*100}%${t===1?")":`, ${t})`}`}}));function nZ(t){return t=(t||0)%360,t<0?t+360:t}function V_(t){return Math.max(0,Math.min(1,t||0))}function YC(t,e,r){return(t<60?e+(r-e)*t/60:t<180?r:t<240?e+(r-e)*(240-t)/60:e)*255}const l$=t=>()=>t;function oYe(t,e){return function(r){return t+r*e}}function cYe(t,e,r){return t=Math.pow(t,r),e=Math.pow(e,r)-t,r=1/r,function(n){return Math.pow(t+n*e,r)}}function lYe(t){return(t=+t)==1?vde:function(e,r){return r-e?cYe(e,r,t):l$(isNaN(e)?r:e)}}function vde(t,e){var r=e-t;return r?oYe(t,r):l$(isNaN(t)?e:t)}const Q7=function t(e){var r=lYe(e);function n(i,s){var a=r((i=OO(i)).r,(s=OO(s)).r),o=r(i.g,s.g),c=r(i.b,s.b),l=vde(i.opacity,s.opacity);return function(u){return i.r=a(u),i.g=o(u),i.b=c(u),i.opacity=l(u),i+""}}return n.gamma=t,n}(1);function uYe(t,e){e||(e=[]);var r=t?Math.min(e.length,t.length):0,n=e.slice(),i;return function(s){for(i=0;i<r;++i)n[i]=t[i]*(1-s)+e[i]*s;return n}}function fYe(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function hYe(t,e){var r=e?e.length:0,n=t?Math.min(r,t.length):0,i=new Array(n),s=new Array(r),a;for(a=0;a<n;++a)i[a]=u$(t[a],e[a]);for(;a<r;++a)s[a]=e[a];return function(o){for(a=0;a<n;++a)s[a]=i[a](o);return s}}function dYe(t,e){var r=new Date;return t=+t,e=+e,function(n){return r.setTime(t*(1-n)+e*n),r}}function Su(t,e){return t=+t,e=+e,function(r){return t*(1-r)+e*r}}function pYe(t,e){var r={},n={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?r[i]=u$(t[i],e[i]):n[i]=e[i];return function(s){for(i in r)n[i]=r[i](s);return n}}var NO=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,XC=new RegExp(NO.source,"g");function gYe(t){return function(){return t}}function mYe(t){return function(e){return t(e)+""}}function bde(t,e){var r=NO.lastIndex=XC.lastIndex=0,n,i,s,a=-1,o=[],c=[];for(t=t+"",e=e+"";(n=NO.exec(t))&&(i=XC.exec(e));)(s=i.index)>r&&(s=e.slice(r,s),o[a]?o[a]+=s:o[++a]=s),(n=n[0])===(i=i[0])?o[a]?o[a]+=i:o[++a]=i:(o[++a]=null,c.push({i:a,x:Su(n,i)})),r=XC.lastIndex;return r<e.length&&(s=e.slice(r),o[a]?o[a]+=s:o[++a]=s),o.length<2?c[0]?mYe(c[0].x):gYe(e):(e=c.length,function(l){for(var u=0,f;u<e;++u)o[(f=c[u]).i]=f.x(l);return o.join("")})}function u$(t,e){var r=typeof e,n;return e==null||r==="boolean"?l$(e):(r==="number"?Su:r==="string"?(n=Yg(e))?(e=n,Q7):bde:e instanceof Yg?Q7:e instanceof Date?dYe:fYe(e)?uYe:Array.isArray(e)?hYe:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?pYe:Su)(t,e)}function yYe(t,e){return t=+t,e=+e,function(r){return Math.round(t*(1-r)+e*r)}}var iZ=180/Math.PI,MO={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function wde(t,e,r,n,i,s){var a,o,c;return(a=Math.sqrt(t*t+e*e))&&(t/=a,e/=a),(c=t*r+e*n)&&(r-=t*c,n-=e*c),(o=Math.sqrt(r*r+n*n))&&(r/=o,n/=o,c/=o),t*n<e*r&&(t=-t,e=-e,c=-c,a=-a),{translateX:i,translateY:s,rotate:Math.atan2(e,t)*iZ,skewX:Math.atan(c)*iZ,scaleX:a,scaleY:o}}var j_;function vYe(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?MO:wde(e.a,e.b,e.c,e.d,e.e,e.f)}function bYe(t){return t==null||(j_||(j_=document.createElementNS("http://www.w3.org/2000/svg","g")),j_.setAttribute("transform",t),!(t=j_.transform.baseVal.consolidate()))?MO:(t=t.matrix,wde(t.a,t.b,t.c,t.d,t.e,t.f))}function _de(t,e,r,n){function i(l){return l.length?l.pop()+" ":""}function s(l,u,f,h,d,g){if(l!==f||u!==h){var p=d.push("translate(",null,e,null,r);g.push({i:p-4,x:Su(l,f)},{i:p-2,x:Su(u,h)})}else(f||h)&&d.push("translate("+f+e+h+r)}function a(l,u,f,h){l!==u?(l-u>180?u+=360:u-l>180&&(l+=360),h.push({i:f.push(i(f)+"rotate(",null,n)-2,x:Su(l,u)})):u&&f.push(i(f)+"rotate("+u+n)}function o(l,u,f,h){l!==u?h.push({i:f.push(i(f)+"skewX(",null,n)-2,x:Su(l,u)}):u&&f.push(i(f)+"skewX("+u+n)}function c(l,u,f,h,d,g){if(l!==f||u!==h){var p=d.push(i(d)+"scale(",null,",",null,")");g.push({i:p-4,x:Su(l,f)},{i:p-2,x:Su(u,h)})}else(f!==1||h!==1)&&d.push(i(d)+"scale("+f+","+h+")")}return function(l,u){var f=[],h=[];return l=t(l),u=t(u),s(l.translateX,l.translateY,u.translateX,u.translateY,f,h),a(l.rotate,u.rotate,f,h),o(l.skewX,u.skewX,f,h),c(l.scaleX,l.scaleY,u.scaleX,u.scaleY,f,h),l=u=null,function(d){for(var g=-1,p=h.length,m;++g<p;)f[(m=h[g]).i]=m.x(d);return f.join("")}}}var wYe=_de(vYe,"px, ","px)","deg)"),_Ye=_de(bYe,", ",")",")"),Gy=0,jw=0,lw=0,xde=1e3,eE,zw,tE=0,Xg=0,US=0,f4=typeof performance=="object"&&performance.now?performance:Date,Ede=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function f$(){return Xg||(Ede(xYe),Xg=f4.now()+US)}function xYe(){Xg=0}function rE(){this._call=this._time=this._next=null}rE.prototype=Sde.prototype={constructor:rE,restart:function(t,e,r){if(typeof t!="function")throw new TypeError("callback is not a function");r=(r==null?f$():+r)+(e==null?0:+e),!this._next&&zw!==this&&(zw?zw._next=this:eE=this,zw=this),this._call=t,this._time=r,LO()},stop:function(){this._call&&(this._call=null,this._time=1/0,LO())}};function Sde(t,e,r){var n=new rE;return n.restart(t,e,r),n}function EYe(){f$(),++Gy;for(var t=eE,e;t;)(e=Xg-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Gy}function sZ(){Xg=(tE=f4.now())+US,Gy=jw=0;try{EYe()}finally{Gy=0,AYe(),Xg=0}}function SYe(){var t=f4.now(),e=t-tE;e>xde&&(US-=e,tE=t)}function AYe(){for(var t,e=eE,r,n=1/0;e;)e._call?(n>e._time&&(n=e._time),t=e,e=e._next):(r=e._next,e._next=null,e=t?t._next=r:eE=r);zw=t,LO(n)}function LO(t){if(!Gy){jw&&(jw=clearTimeout(jw));var e=t-Xg;e>24?(t<1/0&&(jw=setTimeout(sZ,t-f4.now()-US)),lw&&(lw=clearInterval(lw))):(lw||(tE=f4.now(),lw=setInterval(SYe,xde)),Gy=1,Ede(sZ))}}function aZ(t,e,r){var n=new rE;return e=e==null?0:+e,n.restart(i=>{n.stop(),t(i+e)},e,r),n}var TYe=nde("start","end","cancel","interrupt"),kYe=[],Ade=0,oZ=1,FO=2,Mx=3,cZ=4,$O=5,Lx=6;function VS(t,e,r,n,i,s){var a=t.__transition;if(!a)t.__transition={};else if(r in a)return;CYe(t,r,{name:e,index:n,group:i,on:TYe,tween:kYe,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:Ade})}function h$(t,e){var r=nf(t,e);if(r.state>Ade)throw new Error("too late; already scheduled");return r}function vh(t,e){var r=nf(t,e);if(r.state>Mx)throw new Error("too late; already running");return r}function nf(t,e){var r=t.__transition;if(!r||!(r=r[e]))throw new Error("transition not found");return r}function CYe(t,e,r){var n=t.__transition,i;n[e]=r,r.timer=Sde(s,0,r.time);function s(l){r.state=oZ,r.timer.restart(a,r.delay,r.time),r.delay<=l&&a(l-r.delay)}function a(l){var u,f,h,d;if(r.state!==oZ)return c();for(u in n)if(d=n[u],d.name===r.name){if(d.state===Mx)return aZ(a);d.state===cZ?(d.state=Lx,d.timer.stop(),d.on.call("interrupt",t,t.__data__,d.index,d.group),delete n[u]):+u<e&&(d.state=Lx,d.timer.stop(),d.on.call("cancel",t,t.__data__,d.index,d.group),delete n[u])}if(aZ(function(){r.state===Mx&&(r.state=cZ,r.timer.restart(o,r.delay,r.time),o(l))}),r.state=FO,r.on.call("start",t,t.__data__,r.index,r.group),r.state===FO){for(r.state=Mx,i=new Array(h=r.tween.length),u=0,f=-1;u<h;++u)(d=r.tween[u].value.call(t,t.__data__,r.index,r.group))&&(i[++f]=d);i.length=f+1}}function o(l){for(var u=l<r.duration?r.ease.call(null,l/r.duration):(r.timer.restart(c),r.state=$O,1),f=-1,h=i.length;++f<h;)i[f].call(t,u);r.state===$O&&(r.on.call("end",t,t.__data__,r.index,r.group),c())}function c(){r.state=Lx,r.timer.stop(),delete n[e];for(var l in n)return;delete t.__transition}}function IYe(t,e){var r=t.__transition,n,i,s=!0,a;if(r){e=e==null?null:e+"";for(a in r){if((n=r[a]).name!==e){s=!1;continue}i=n.state>FO&&n.state<$O,n.state=Lx,n.timer.stop(),n.on.call(i?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete r[a]}s&&delete t.__transition}}function RYe(t){return this.each(function(){IYe(this,t)})}function PYe(t,e){var r,n;return function(){var i=vh(this,t),s=i.tween;if(s!==r){n=r=s;for(var a=0,o=n.length;a<o;++a)if(n[a].name===e){n=n.slice(),n.splice(a,1);break}}i.tween=n}}function BYe(t,e,r){var n,i;if(typeof r!="function")throw new Error;return function(){var s=vh(this,t),a=s.tween;if(a!==n){i=(n=a).slice();for(var o={name:e,value:r},c=0,l=i.length;c<l;++c)if(i[c].name===e){i[c]=o;break}c===l&&i.push(o)}s.tween=i}}function DYe(t,e){var r=this._id;if(t+="",arguments.length<2){for(var n=nf(this.node(),r).tween,i=0,s=n.length,a;i<s;++i)if((a=n[i]).name===t)return a.value;return null}return this.each((e==null?PYe:BYe)(r,t,e))}function d$(t,e,r){var n=t._id;return t.each(function(){var i=vh(this,n);(i.value||(i.value={}))[e]=r.apply(this,arguments)}),function(i){return nf(i,n).value[e]}}function Tde(t,e){var r;return(typeof e=="number"?Su:e instanceof Yg?Q7:(r=Yg(e))?(e=r,Q7):bde)(t,e)}function OYe(t){return function(){this.removeAttribute(t)}}function NYe(t){return function(){this.removeAttributeNS(t.space,t.local)}}function MYe(t,e,r){var n,i=r+"",s;return function(){var a=this.getAttribute(t);return a===i?null:a===n?s:s=e(n=a,r)}}function LYe(t,e,r){var n,i=r+"",s;return function(){var a=this.getAttributeNS(t.space,t.local);return a===i?null:a===n?s:s=e(n=a,r)}}function FYe(t,e,r){var n,i,s;return function(){var a,o=r(this),c;return o==null?void this.removeAttribute(t):(a=this.getAttribute(t),c=o+"",a===c?null:a===n&&c===i?s:(i=c,s=e(n=a,o)))}}function $Ye(t,e,r){var n,i,s;return function(){var a,o=r(this),c;return o==null?void this.removeAttributeNS(t.space,t.local):(a=this.getAttributeNS(t.space,t.local),c=o+"",a===c?null:a===n&&c===i?s:(i=c,s=e(n=a,o)))}}function UYe(t,e){var r=$S(t),n=r==="transform"?_Ye:Tde;return this.attrTween(t,typeof e=="function"?(r.local?$Ye:FYe)(r,n,d$(this,"attr."+t,e)):e==null?(r.local?NYe:OYe)(r):(r.local?LYe:MYe)(r,n,e))}function VYe(t,e){return function(r){this.setAttribute(t,e.call(this,r))}}function jYe(t,e){return function(r){this.setAttributeNS(t.space,t.local,e.call(this,r))}}function zYe(t,e){var r,n;function i(){var s=e.apply(this,arguments);return s!==n&&(r=(n=s)&&jYe(t,s)),r}return i._value=e,i}function qYe(t,e){var r,n;function i(){var s=e.apply(this,arguments);return s!==n&&(r=(n=s)&&VYe(t,s)),r}return i._value=e,i}function HYe(t,e){var r="attr."+t;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;var n=$S(t);return this.tween(r,(n.local?zYe:qYe)(n,e))}function WYe(t,e){return function(){h$(this,t).delay=+e.apply(this,arguments)}}function KYe(t,e){return e=+e,function(){h$(this,t).delay=e}}function GYe(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?WYe:KYe)(e,t)):nf(this.node(),e).delay}function YYe(t,e){return function(){vh(this,t).duration=+e.apply(this,arguments)}}function XYe(t,e){return e=+e,function(){vh(this,t).duration=e}}function ZYe(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?YYe:XYe)(e,t)):nf(this.node(),e).duration}function JYe(t,e){if(typeof e!="function")throw new Error;return function(){vh(this,t).ease=e}}function QYe(t){var e=this._id;return arguments.length?this.each(JYe(e,t)):nf(this.node(),e).ease}function eXe(t,e){return function(){var r=e.apply(this,arguments);if(typeof r!="function")throw new Error;vh(this,t).ease=r}}function tXe(t){if(typeof t!="function")throw new Error;return this.each(eXe(this._id,t))}function rXe(t){typeof t!="function"&&(t=ade(t));for(var e=this._groups,r=e.length,n=new Array(r),i=0;i<r;++i)for(var s=e[i],a=s.length,o=n[i]=[],c,l=0;l<a;++l)(c=s[l])&&t.call(c,c.__data__,l,s)&&o.push(c);return new Yd(n,this._parents,this._name,this._id)}function nXe(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,r=t._groups,n=e.length,i=r.length,s=Math.min(n,i),a=new Array(n),o=0;o<s;++o)for(var c=e[o],l=r[o],u=c.length,f=a[o]=new Array(u),h,d=0;d<u;++d)(h=c[d]||l[d])&&(f[d]=h);for(;o<n;++o)a[o]=e[o];return new Yd(a,this._parents,this._name,this._id)}function iXe(t){return(t+"").trim().split(/^|\s+/).every(function(e){var r=e.indexOf(".");return r>=0&&(e=e.slice(0,r)),!e||e==="start"})}function sXe(t,e,r){var n,i,s=iXe(e)?h$:vh;return function(){var a=s(this,t),o=a.on;o!==n&&(i=(n=o).copy()).on(e,r),a.on=i}}function aXe(t,e){var r=this._id;return arguments.length<2?nf(this.node(),r).on.on(t):this.each(sXe(r,t,e))}function oXe(t){return function(){var e=this.parentNode;for(var r in this.__transition)if(+r!==t)return;e&&e.removeChild(this)}}function cXe(){return this.on("end.remove",oXe(this._id))}function lXe(t){var e=this._name,r=this._id;typeof t!="function"&&(t=a$(t));for(var n=this._groups,i=n.length,s=new Array(i),a=0;a<i;++a)for(var o=n[a],c=o.length,l=s[a]=new Array(c),u,f,h=0;h<c;++h)(u=o[h])&&(f=t.call(u,u.__data__,h,o))&&("__data__"in u&&(f.__data__=u.__data__),l[h]=f,VS(l[h],e,r,h,l,nf(u,r)));return new Yd(s,this._parents,e,r)}function uXe(t){var e=this._name,r=this._id;typeof t!="function"&&(t=sde(t));for(var n=this._groups,i=n.length,s=[],a=[],o=0;o<i;++o)for(var c=n[o],l=c.length,u,f=0;f<l;++f)if(u=c[f]){for(var h=t.call(u,u.__data__,f,c),d,g=nf(u,r),p=0,m=h.length;p<m;++p)(d=h[p])&&VS(d,e,r,p,h,g);s.push(h),a.push(u)}return new Yd(s,a,e,r)}var fXe=E6.prototype.constructor;function hXe(){return new fXe(this._groups,this._parents)}function dXe(t,e){var r,n,i;return function(){var s=Ky(this,t),a=(this.style.removeProperty(t),Ky(this,t));return s===a?null:s===r&&a===n?i:i=e(r=s,n=a)}}function kde(t){return function(){this.style.removeProperty(t)}}function pXe(t,e,r){var n,i=r+"",s;return function(){var a=Ky(this,t);return a===i?null:a===n?s:s=e(n=a,r)}}function gXe(t,e,r){var n,i,s;return function(){var a=Ky(this,t),o=r(this),c=o+"";return o==null&&(c=o=(this.style.removeProperty(t),Ky(this,t))),a===c?null:a===n&&c===i?s:(i=c,s=e(n=a,o))}}function mXe(t,e){var r,n,i,s="style."+e,a="end."+s,o;return function(){var c=vh(this,t),l=c.on,u=c.value[s]==null?o||(o=kde(e)):void 0;(l!==r||i!==u)&&(n=(r=l).copy()).on(a,i=u),c.on=n}}function yXe(t,e,r){var n=(t+="")=="transform"?wYe:Tde;return e==null?this.styleTween(t,dXe(t,n)).on("end.style."+t,kde(t)):typeof e=="function"?this.styleTween(t,gXe(t,n,d$(this,"style."+t,e))).each(mXe(this._id,t)):this.styleTween(t,pXe(t,n,e),r).on("end.style."+t,null)}function vXe(t,e,r){return function(n){this.style.setProperty(t,e.call(this,n),r)}}function bXe(t,e,r){var n,i;function s(){var a=e.apply(this,arguments);return a!==i&&(n=(i=a)&&vXe(t,a,r)),n}return s._value=e,s}function wXe(t,e,r){var n="style."+(t+="");if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;return this.tween(n,bXe(t,e,r??""))}function _Xe(t){return function(){this.textContent=t}}function xXe(t){return function(){var e=t(this);this.textContent=e??""}}function EXe(t){return this.tween("text",typeof t=="function"?xXe(d$(this,"text",t)):_Xe(t==null?"":t+""))}function SXe(t){return function(e){this.textContent=t.call(this,e)}}function AXe(t){var e,r;function n(){var i=t.apply(this,arguments);return i!==r&&(e=(r=i)&&SXe(i)),e}return n._value=t,n}function TXe(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,AXe(t))}function kXe(){for(var t=this._name,e=this._id,r=Cde(),n=this._groups,i=n.length,s=0;s<i;++s)for(var a=n[s],o=a.length,c,l=0;l<o;++l)if(c=a[l]){var u=nf(c,e);VS(c,t,r,l,a,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new Yd(n,this._parents,t,r)}function CXe(){var t,e,r=this,n=r._id,i=r.size();return new Promise(function(s,a){var o={value:a},c={value:function(){--i===0&&s()}};r.each(function(){var l=vh(this,n),u=l.on;u!==t&&(e=(t=u).copy(),e._.cancel.push(o),e._.interrupt.push(o),e._.end.push(c)),l.on=e}),i===0&&s()})}var IXe=0;function Yd(t,e,r,n){this._groups=t,this._parents=e,this._name=r,this._id=n}function Cde(){return++IXe}var zh=E6.prototype;Yd.prototype={constructor:Yd,select:lXe,selectAll:uXe,selectChild:zh.selectChild,selectChildren:zh.selectChildren,filter:rXe,merge:nXe,selection:hXe,transition:kXe,call:zh.call,nodes:zh.nodes,node:zh.node,size:zh.size,empty:zh.empty,each:zh.each,on:aXe,attr:UYe,attrTween:HYe,style:yXe,styleTween:wXe,text:EXe,textTween:TXe,remove:cXe,tween:DYe,delay:GYe,duration:ZYe,ease:QYe,easeVarying:tXe,end:CXe,[Symbol.iterator]:zh[Symbol.iterator]};function RXe(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var PXe={time:null,delay:0,duration:250,ease:RXe};function BXe(t,e){for(var r;!(r=t.__transition)||!(r=r[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return r}function DXe(t){var e,r;t instanceof Yd?(e=t._id,t=t._name):(e=Cde(),(r=PXe).time=f$(),t=t==null?null:t+"");for(var n=this._groups,i=n.length,s=0;s<i;++s)for(var a=n[s],o=a.length,c,l=0;l<o;++l)(c=a[l])&&VS(c,t,e,l,a,r||BXe(c,e));return new Yd(n,this._parents,t,e)}E6.prototype.interrupt=RYe;E6.prototype.transition=DXe;const UO=Math.PI,VO=2*UO,Gp=1e-6,OXe=VO-Gp;function Ide(t){this._+=t[0];for(let e=1,r=t.length;e<r;++e)this._+=arguments[e]+t[e]}function NXe(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return Ide;const r=10**e;return function(n){this._+=n[0];for(let i=1,s=n.length;i<s;++i)this._+=Math.round(arguments[i]*r)/r+n[i]}}class MXe{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?Ide:NXe(e)}moveTo(e,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,r){this._append`L${this._x1=+e},${this._y1=+r}`}quadraticCurveTo(e,r,n,i){this._append`Q${+e},${+r},${this._x1=+n},${this._y1=+i}`}bezierCurveTo(e,r,n,i,s,a){this._append`C${+e},${+r},${+n},${+i},${this._x1=+s},${this._y1=+a}`}arcTo(e,r,n,i,s){if(e=+e,r=+r,n=+n,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let a=this._x1,o=this._y1,c=n-e,l=i-r,u=a-e,f=o-r,h=u*u+f*f;if(this._x1===null)this._append`M${this._x1=e},${this._y1=r}`;else if(h>Gp)if(!(Math.abs(f*c-l*u)>Gp)||!s)this._append`L${this._x1=e},${this._y1=r}`;else{let d=n-a,g=i-o,p=c*c+l*l,m=d*d+g*g,y=Math.sqrt(p),v=Math.sqrt(h),_=s*Math.tan((UO-Math.acos((p+h-m)/(2*y*v)))/2),x=_/v,A=_/y;Math.abs(x-1)>Gp&&this._append`L${e+x*u},${r+x*f}`,this._append`A${s},${s},0,0,${+(f*d>u*g)},${this._x1=e+A*c},${this._y1=r+A*l}`}}arc(e,r,n,i,s,a){if(e=+e,r=+r,n=+n,a=!!a,n<0)throw new Error(`negative radius: ${n}`);let o=n*Math.cos(i),c=n*Math.sin(i),l=e+o,u=r+c,f=1^a,h=a?i-s:s-i;this._x1===null?this._append`M${l},${u}`:(Math.abs(this._x1-l)>Gp||Math.abs(this._y1-u)>Gp)&&this._append`L${l},${u}`,n&&(h<0&&(h=h%VO+VO),h>OXe?this._append`A${n},${n},0,1,${f},${e-o},${r-c}A${n},${n},0,1,${f},${this._x1=l},${this._y1=u}`:h>Gp&&this._append`A${n},${n},0,${+(h>=UO)},${f},${this._x1=e+n*Math.cos(s)},${this._y1=r+n*Math.sin(s)}`)}rect(e,r,n,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}h${n=+n}v${+i}h${-n}Z`}toString(){return this._}}function LXe(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function nE(t,e){if((r=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var r,n=t.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+t.slice(r+1)]}function Yy(t){return t=nE(Math.abs(t)),t?t[1]:NaN}function FXe(t,e){return function(r,n){for(var i=r.length,s=[],a=0,o=t[0],c=0;i>0&&o>0&&(c+o+1>n&&(o=Math.max(1,n-c)),s.push(r.substring(i-=o,i+o)),!((c+=o+1)>n));)o=t[a=(a+1)%t.length];return s.reverse().join(e)}}function $Xe(t){return function(e){return e.replace(/[0-9]/g,function(r){return t[+r]})}}var UXe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function iE(t){if(!(e=UXe.exec(t)))throw new Error("invalid format: "+t);var e;return new p$({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}iE.prototype=p$.prototype;function p$(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}p$.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function VXe(t){e:for(var e=t.length,r=1,n=-1,i;r<e;++r)switch(t[r]){case".":n=i=r;break;case"0":n===0&&(n=r),i=r;break;default:if(!+t[r])break e;n>0&&(n=0);break}return n>0?t.slice(0,n)+t.slice(i+1):t}var Rde;function jXe(t,e){var r=nE(t,e);if(!r)return t+"";var n=r[0],i=r[1],s=i-(Rde=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,a=n.length;return s===a?n:s>a?n+new Array(s-a+1).join("0"):s>0?n.slice(0,s)+"."+n.slice(s):"0."+new Array(1-s).join("0")+nE(t,Math.max(0,e+s-1))[0]}function lZ(t,e){var r=nE(t,e);if(!r)return t+"";var n=r[0],i=r[1];return i<0?"0."+new Array(-i).join("0")+n:n.length>i+1?n.slice(0,i+1)+"."+n.slice(i+1):n+new Array(i-n.length+2).join("0")}const uZ={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:LXe,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>lZ(t*100,e),r:lZ,s:jXe,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function fZ(t){return t}var hZ=Array.prototype.map,dZ=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function zXe(t){var e=t.grouping===void 0||t.thousands===void 0?fZ:FXe(hZ.call(t.grouping,Number),t.thousands+""),r=t.currency===void 0?"":t.currency[0]+"",n=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",s=t.numerals===void 0?fZ:$Xe(hZ.call(t.numerals,String)),a=t.percent===void 0?"%":t.percent+"",o=t.minus===void 0?"−":t.minus+"",c=t.nan===void 0?"NaN":t.nan+"";function l(f){f=iE(f);var h=f.fill,d=f.align,g=f.sign,p=f.symbol,m=f.zero,y=f.width,v=f.comma,_=f.precision,x=f.trim,A=f.type;A==="n"?(v=!0,A="g"):uZ[A]||(_===void 0&&(_=12),x=!0,A="g"),(m||h==="0"&&d==="=")&&(m=!0,h="0",d="=");var C=p==="$"?r:p==="#"&&/[boxX]/.test(A)?"0"+A.toLowerCase():"",R=p==="$"?n:/[%p]/.test(A)?a:"",M=uZ[A],N=/[defgprs%]/.test(A);_=_===void 0?6:/[gprs]/.test(A)?Math.max(1,Math.min(21,_)):Math.max(0,Math.min(20,_));function Y(H){var E=C,k=R,w,T,L;if(A==="c")k=M(H)+k,H="";else{H=+H;var I=H<0||1/H<0;if(H=isNaN(H)?c:M(Math.abs(H),_),x&&(H=VXe(H)),I&&+H==0&&g!=="+"&&(I=!1),E=(I?g==="("?g:o:g==="-"||g==="("?"":g)+E,k=(A==="s"?dZ[8+Rde/3]:"")+k+(I&&g==="("?")":""),N){for(w=-1,T=H.length;++w<T;)if(L=H.charCodeAt(w),48>L||L>57){k=(L===46?i+H.slice(w+1):H.slice(w))+k,H=H.slice(0,w);break}}}v&&!m&&(H=e(H,1/0));var U=E.length+H.length+k.length,O=U<y?new Array(y-U+1).join(h):"";switch(v&&m&&(H=e(O+H,O.length?y-k.length:1/0),O=""),d){case"<":H=E+H+k+O;break;case"=":H=E+O+H+k;break;case"^":H=O.slice(0,U=O.length>>1)+E+H+k+O.slice(U);break;default:H=O+E+H+k;break}return s(H)}return Y.toString=function(){return f+""},Y}function u(f,h){var d=l((f=iE(f),f.type="f",f)),g=Math.max(-8,Math.min(8,Math.floor(Yy(h)/3)))*3,p=Math.pow(10,-g),m=dZ[8+g/3];return function(y){return d(p*y)+m}}return{format:l,formatPrefix:u}}var z_,Pde,Bde;qXe({thousands:",",grouping:[3],currency:["$",""]});function qXe(t){return z_=zXe(t),Pde=z_.format,Bde=z_.formatPrefix,z_}function HXe(t){return Math.max(0,-Yy(Math.abs(t)))}function WXe(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Yy(e)/3)))*3-Yy(Math.abs(t)))}function KXe(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Yy(e)-Yy(t))+1}function Dde(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function GXe(t){return function(){return t}}function YXe(t){return+t}var pZ=[0,1];function iy(t){return t}function jO(t,e){return(e-=t=+t)?function(r){return(r-t)/e}:GXe(isNaN(e)?NaN:.5)}function XXe(t,e){var r;return t>e&&(r=t,t=e,e=r),function(n){return Math.max(t,Math.min(e,n))}}function ZXe(t,e,r){var n=t[0],i=t[1],s=e[0],a=e[1];return i<n?(n=jO(i,n),s=r(a,s)):(n=jO(n,i),s=r(s,a)),function(o){return s(n(o))}}function JXe(t,e,r){var n=Math.min(t.length,e.length)-1,i=new Array(n),s=new Array(n),a=-1;for(t[n]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<n;)i[a]=jO(t[a],t[a+1]),s[a]=r(e[a],e[a+1]);return function(o){var c=JWe(t,o,1,n)-1;return s[c](i[c](o))}}function Ode(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function QXe(){var t=pZ,e=pZ,r=u$,n,i,s,a=iy,o,c,l;function u(){var h=Math.min(t.length,e.length);return a!==iy&&(a=XXe(t[0],t[h-1])),o=h>2?JXe:ZXe,c=l=null,f}function f(h){return h==null||isNaN(h=+h)?s:(c||(c=o(t.map(n),e,r)))(n(a(h)))}return f.invert=function(h){return a(i((l||(l=o(e,t.map(n),Su)))(h)))},f.domain=function(h){return arguments.length?(t=Array.from(h,YXe),u()):t.slice()},f.range=function(h){return arguments.length?(e=Array.from(h),u()):e.slice()},f.rangeRound=function(h){return e=Array.from(h),r=yYe,u()},f.clamp=function(h){return arguments.length?(a=h?!0:iy,u()):a!==iy},f.interpolate=function(h){return arguments.length?(r=h,u()):r},f.unknown=function(h){return arguments.length?(s=h,f):s},function(h,d){return n=h,i=d,u()}}function Nde(){return QXe()(iy,iy)}function eZe(t,e,r,n){var i=PO(t,e,r),s;switch(n=iE(n??",f"),n.type){case"s":{var a=Math.max(Math.abs(t),Math.abs(e));return n.precision==null&&!isNaN(s=WXe(i,a))&&(n.precision=s),Bde(n,a)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(s=KXe(i,Math.max(Math.abs(t),Math.abs(e))))&&(n.precision=s-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(s=HXe(i))&&(n.precision=s-(n.type==="%")*2);break}}return Pde(n)}function tZe(t){var e=t.domain;return t.ticks=function(r){var n=e();return nKe(n[0],n[n.length-1],r??10)},t.tickFormat=function(r,n){var i=e();return eZe(i[0],i[i.length-1],r??10,n)},t.nice=function(r){r==null&&(r=10);var n=e(),i=0,s=n.length-1,a=n[i],o=n[s],c,l,u=10;for(o<a&&(l=a,a=o,o=l,l=i,i=s,s=l);u-- >0;){if(l=RO(a,o,r),l===c)return n[i]=a,n[s]=o,e(n);if(l>0)a=Math.floor(a/l)*l,o=Math.ceil(o/l)*l;else if(l<0)a=Math.ceil(a*l)/l,o=Math.floor(o*l)/l;else break;c=l}return t},t}function Mde(){var t=Nde();return t.copy=function(){return Ode(t,Mde())},Dde.apply(t,arguments),tZe(t)}function rZe(t,e){t=t.slice();var r=0,n=t.length-1,i=t[r],s=t[n],a;return s<i&&(a=r,r=n,n=a,a=i,i=s,s=a),t[r]=e.floor(i),t[n]=e.ceil(s),t}const ZC=new Date,JC=new Date;function ra(t,e,r,n){function i(s){return t(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(t(s=new Date(+s)),s),i.ceil=s=>(t(s=new Date(s-1)),e(s,1),t(s),s),i.round=s=>{const a=i(s),o=i.ceil(s);return s-a<o-s?a:o},i.offset=(s,a)=>(e(s=new Date(+s),a==null?1:Math.floor(a)),s),i.range=(s,a,o)=>{const c=[];if(s=i.ceil(s),o=o==null?1:Math.floor(o),!(s<a)||!(o>0))return c;let l;do c.push(l=new Date(+s)),e(s,o),t(s);while(l<s&&s<a);return c},i.filter=s=>ra(a=>{if(a>=a)for(;t(a),!s(a);)a.setTime(a-1)},(a,o)=>{if(a>=a)if(o<0)for(;++o<=0;)for(;e(a,-1),!s(a););else for(;--o>=0;)for(;e(a,1),!s(a););}),r&&(i.count=(s,a)=>(ZC.setTime(+s),JC.setTime(+a),t(ZC),t(JC),Math.floor(r(ZC,JC))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(n?a=>n(a)%s===0:a=>i.count(0,a)%s===0):i)),i}const sE=ra(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);sE.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?ra(e=>{e.setTime(Math.floor(e/t)*t)},(e,r)=>{e.setTime(+e+r*t)},(e,r)=>(r-e)/t):sE);sE.range;const Ad=1e3,Ll=Ad*60,Td=Ll*60,Xd=Td*24,g$=Xd*7,gZ=Xd*30,QC=Xd*365,sy=ra(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*Ad)},(t,e)=>(e-t)/Ad,t=>t.getUTCSeconds());sy.range;const m$=ra(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Ad)},(t,e)=>{t.setTime(+t+e*Ll)},(t,e)=>(e-t)/Ll,t=>t.getMinutes());m$.range;const nZe=ra(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*Ll)},(t,e)=>(e-t)/Ll,t=>t.getUTCMinutes());nZe.range;const y$=ra(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Ad-t.getMinutes()*Ll)},(t,e)=>{t.setTime(+t+e*Td)},(t,e)=>(e-t)/Td,t=>t.getHours());y$.range;const iZe=ra(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*Td)},(t,e)=>(e-t)/Td,t=>t.getUTCHours());iZe.range;const A6=ra(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Ll)/Xd,t=>t.getDate()-1);A6.range;const v$=ra(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Xd,t=>t.getUTCDate()-1);v$.range;const sZe=ra(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Xd,t=>Math.floor(t/Xd));sZe.range;function Nm(t){return ra(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,r)=>{e.setDate(e.getDate()+r*7)},(e,r)=>(r-e-(r.getTimezoneOffset()-e.getTimezoneOffset())*Ll)/g$)}const jS=Nm(0),aE=Nm(1),aZe=Nm(2),oZe=Nm(3),Xy=Nm(4),cZe=Nm(5),lZe=Nm(6);jS.range;aE.range;aZe.range;oZe.range;Xy.range;cZe.range;lZe.range;function Mm(t){return ra(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCDate(e.getUTCDate()+r*7)},(e,r)=>(r-e)/g$)}const Lde=Mm(0),oE=Mm(1),uZe=Mm(2),fZe=Mm(3),Zy=Mm(4),hZe=Mm(5),dZe=Mm(6);Lde.range;oE.range;uZe.range;fZe.range;Zy.range;hZe.range;dZe.range;const b$=ra(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());b$.range;const pZe=ra(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());pZe.range;const Zd=ra(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());Zd.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:ra(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,r)=>{e.setFullYear(e.getFullYear()+r*t)});Zd.range;const Zg=ra(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Zg.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:ra(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCFullYear(e.getUTCFullYear()+r*t)});Zg.range;function gZe(t,e,r,n,i,s){const a=[[sy,1,Ad],[sy,5,5*Ad],[sy,15,15*Ad],[sy,30,30*Ad],[s,1,Ll],[s,5,5*Ll],[s,15,15*Ll],[s,30,30*Ll],[i,1,Td],[i,3,3*Td],[i,6,6*Td],[i,12,12*Td],[n,1,Xd],[n,2,2*Xd],[r,1,g$],[e,1,gZ],[e,3,3*gZ],[t,1,QC]];function o(l,u,f){const h=u<l;h&&([l,u]=[u,l]);const d=f&&typeof f.range=="function"?f:c(l,u,f),g=d?d.range(l,+u+1):[];return h?g.reverse():g}function c(l,u,f){const h=Math.abs(u-l)/f,d=s$(([,,m])=>m).right(a,h);if(d===a.length)return t.every(PO(l/QC,u/QC,f));if(d===0)return sE.every(Math.max(PO(l,u,f),1));const[g,p]=a[h/a[d-1][2]<a[d][2]/h?d-1:d];return g.every(p)}return[o,c]}const[mZe,yZe]=gZe(Zd,b$,jS,A6,y$,m$);function eI(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function tI(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function uw(t,e,r){return{y:t,m:e,d:r,H:0,M:0,S:0,L:0}}function vZe(t){var e=t.dateTime,r=t.date,n=t.time,i=t.periods,s=t.days,a=t.shortDays,o=t.months,c=t.shortMonths,l=fw(i),u=hw(i),f=fw(s),h=hw(s),d=fw(a),g=hw(a),p=fw(o),m=hw(o),y=fw(c),v=hw(c),_={a:I,A:U,b:O,B:D,c:null,d:_Z,e:_Z,f:VZe,g:ZZe,G:QZe,H:FZe,I:$Ze,j:UZe,L:Fde,m:jZe,M:zZe,p:P,q:B,Q:SZ,s:AZ,S:qZe,u:HZe,U:WZe,V:KZe,w:GZe,W:YZe,x:null,X:null,y:XZe,Y:JZe,Z:eJe,"%":EZ},x={a:z,A:F,b:X,B:W,c:null,d:xZ,e:xZ,f:iJe,g:pJe,G:mJe,H:tJe,I:rJe,j:nJe,L:Ude,m:sJe,M:aJe,p:q,q:G,Q:SZ,s:AZ,S:oJe,u:cJe,U:lJe,V:uJe,w:fJe,W:hJe,x:null,X:null,y:dJe,Y:gJe,Z:yJe,"%":EZ},A={a:Y,A:H,b:E,B:k,c:w,d:bZ,e:bZ,f:OZe,g:vZ,G:yZ,H:wZ,I:wZ,j:RZe,L:DZe,m:IZe,M:PZe,p:N,q:CZe,Q:MZe,s:LZe,S:BZe,u:EZe,U:SZe,V:AZe,w:xZe,W:TZe,x:T,X:L,y:vZ,Y:yZ,Z:kZe,"%":NZe};_.x=C(r,_),_.X=C(n,_),_.c=C(e,_),x.x=C(r,x),x.X=C(n,x),x.c=C(e,x);function C(ee,ae){return function(te){var K=[],re=-1,V=0,oe=ee.length,he,ne,ie;for(te instanceof Date||(te=new Date(+te));++re<oe;)ee.charCodeAt(re)===37&&(K.push(ee.slice(V,re)),(ne=mZ[he=ee.charAt(++re)])!=null?he=ee.charAt(++re):ne=he==="e"?" ":"0",(ie=ae[he])&&(he=ie(te,ne)),K.push(he),V=re+1);return K.push(ee.slice(V,re)),K.join("")}}function R(ee,ae){return function(te){var K=uw(1900,void 0,1),re=M(K,ee,te+="",0),V,oe;if(re!=te.length)return null;if("Q"in K)return new Date(K.Q);if("s"in K)return new Date(K.s*1e3+("L"in K?K.L:0));if(ae&&!("Z"in K)&&(K.Z=0),"p"in K&&(K.H=K.H%12+K.p*12),K.m===void 0&&(K.m="q"in K?K.q:0),"V"in K){if(K.V<1||K.V>53)return null;"w"in K||(K.w=1),"Z"in K?(V=tI(uw(K.y,0,1)),oe=V.getUTCDay(),V=oe>4||oe===0?oE.ceil(V):oE(V),V=v$.offset(V,(K.V-1)*7),K.y=V.getUTCFullYear(),K.m=V.getUTCMonth(),K.d=V.getUTCDate()+(K.w+6)%7):(V=eI(uw(K.y,0,1)),oe=V.getDay(),V=oe>4||oe===0?aE.ceil(V):aE(V),V=A6.offset(V,(K.V-1)*7),K.y=V.getFullYear(),K.m=V.getMonth(),K.d=V.getDate()+(K.w+6)%7)}else("W"in K||"U"in K)&&("w"in K||(K.w="u"in K?K.u%7:"W"in K?1:0),oe="Z"in K?tI(uw(K.y,0,1)).getUTCDay():eI(uw(K.y,0,1)).getDay(),K.m=0,K.d="W"in K?(K.w+6)%7+K.W*7-(oe+5)%7:K.w+K.U*7-(oe+6)%7);return"Z"in K?(K.H+=K.Z/100|0,K.M+=K.Z%100,tI(K)):eI(K)}}function M(ee,ae,te,K){for(var re=0,V=ae.length,oe=te.length,he,ne;re<V;){if(K>=oe)return-1;if(he=ae.charCodeAt(re++),he===37){if(he=ae.charAt(re++),ne=A[he in mZ?ae.charAt(re++):he],!ne||(K=ne(ee,te,K))<0)return-1}else if(he!=te.charCodeAt(K++))return-1}return K}function N(ee,ae,te){var K=l.exec(ae.slice(te));return K?(ee.p=u.get(K[0].toLowerCase()),te+K[0].length):-1}function Y(ee,ae,te){var K=d.exec(ae.slice(te));return K?(ee.w=g.get(K[0].toLowerCase()),te+K[0].length):-1}function H(ee,ae,te){var K=f.exec(ae.slice(te));return K?(ee.w=h.get(K[0].toLowerCase()),te+K[0].length):-1}function E(ee,ae,te){var K=y.exec(ae.slice(te));return K?(ee.m=v.get(K[0].toLowerCase()),te+K[0].length):-1}function k(ee,ae,te){var K=p.exec(ae.slice(te));return K?(ee.m=m.get(K[0].toLowerCase()),te+K[0].length):-1}function w(ee,ae,te){return M(ee,e,ae,te)}function T(ee,ae,te){return M(ee,r,ae,te)}function L(ee,ae,te){return M(ee,n,ae,te)}function I(ee){return a[ee.getDay()]}function U(ee){return s[ee.getDay()]}function O(ee){return c[ee.getMonth()]}function D(ee){return o[ee.getMonth()]}function P(ee){return i[+(ee.getHours()>=12)]}function B(ee){return 1+~~(ee.getMonth()/3)}function z(ee){return a[ee.getUTCDay()]}function F(ee){return s[ee.getUTCDay()]}function X(ee){return c[ee.getUTCMonth()]}function W(ee){return o[ee.getUTCMonth()]}function q(ee){return i[+(ee.getUTCHours()>=12)]}function G(ee){return 1+~~(ee.getUTCMonth()/3)}return{format:function(ee){var ae=C(ee+="",_);return ae.toString=function(){return ee},ae},parse:function(ee){var ae=R(ee+="",!1);return ae.toString=function(){return ee},ae},utcFormat:function(ee){var ae=C(ee+="",x);return ae.toString=function(){return ee},ae},utcParse:function(ee){var ae=R(ee+="",!0);return ae.toString=function(){return ee},ae}}}var mZ={"-":"",_:" ",0:"0"},wa=/^\s*\d+/,bZe=/^%/,wZe=/[\\^$*+?|[\]().{}]/g;function Bn(t,e,r){var n=t<0?"-":"",i=(n?-t:t)+"",s=i.length;return n+(s<r?new Array(r-s+1).join(e)+i:i)}function _Ze(t){return t.replace(wZe,"\\$&")}function fw(t){return new RegExp("^(?:"+t.map(_Ze).join("|")+")","i")}function hw(t){return new Map(t.map((e,r)=>[e.toLowerCase(),r]))}function xZe(t,e,r){var n=wa.exec(e.slice(r,r+1));return n?(t.w=+n[0],r+n[0].length):-1}function EZe(t,e,r){var n=wa.exec(e.slice(r,r+1));return n?(t.u=+n[0],r+n[0].length):-1}function SZe(t,e,r){var n=wa.exec(e.slice(r,r+2));return n?(t.U=+n[0],r+n[0].length):-1}function AZe(t,e,r){var n=wa.exec(e.slice(r,r+2));return n?(t.V=+n[0],r+n[0].length):-1}function TZe(t,e,r){var n=wa.exec(e.slice(r,r+2));return n?(t.W=+n[0],r+n[0].length):-1}function yZ(t,e,r){var n=wa.exec(e.slice(r,r+4));return n?(t.y=+n[0],r+n[0].length):-1}function vZ(t,e,r){var n=wa.exec(e.slice(r,r+2));return n?(t.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function kZe(t,e,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(r,r+6));return n?(t.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function CZe(t,e,r){var n=wa.exec(e.slice(r,r+1));return n?(t.q=n[0]*3-3,r+n[0].length):-1}function IZe(t,e,r){var n=wa.exec(e.slice(r,r+2));return n?(t.m=n[0]-1,r+n[0].length):-1}function bZ(t,e,r){var n=wa.exec(e.slice(r,r+2));return n?(t.d=+n[0],r+n[0].length):-1}function RZe(t,e,r){var n=wa.exec(e.slice(r,r+3));return n?(t.m=0,t.d=+n[0],r+n[0].length):-1}function wZ(t,e,r){var n=wa.exec(e.slice(r,r+2));return n?(t.H=+n[0],r+n[0].length):-1}function PZe(t,e,r){var n=wa.exec(e.slice(r,r+2));return n?(t.M=+n[0],r+n[0].length):-1}function BZe(t,e,r){var n=wa.exec(e.slice(r,r+2));return n?(t.S=+n[0],r+n[0].length):-1}function DZe(t,e,r){var n=wa.exec(e.slice(r,r+3));return n?(t.L=+n[0],r+n[0].length):-1}function OZe(t,e,r){var n=wa.exec(e.slice(r,r+6));return n?(t.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function NZe(t,e,r){var n=bZe.exec(e.slice(r,r+1));return n?r+n[0].length:-1}function MZe(t,e,r){var n=wa.exec(e.slice(r));return n?(t.Q=+n[0],r+n[0].length):-1}function LZe(t,e,r){var n=wa.exec(e.slice(r));return n?(t.s=+n[0],r+n[0].length):-1}function _Z(t,e){return Bn(t.getDate(),e,2)}function FZe(t,e){return Bn(t.getHours(),e,2)}function $Ze(t,e){return Bn(t.getHours()%12||12,e,2)}function UZe(t,e){return Bn(1+A6.count(Zd(t),t),e,3)}function Fde(t,e){return Bn(t.getMilliseconds(),e,3)}function VZe(t,e){return Fde(t,e)+"000"}function jZe(t,e){return Bn(t.getMonth()+1,e,2)}function zZe(t,e){return Bn(t.getMinutes(),e,2)}function qZe(t,e){return Bn(t.getSeconds(),e,2)}function HZe(t){var e=t.getDay();return e===0?7:e}function WZe(t,e){return Bn(jS.count(Zd(t)-1,t),e,2)}function $de(t){var e=t.getDay();return e>=4||e===0?Xy(t):Xy.ceil(t)}function KZe(t,e){return t=$de(t),Bn(Xy.count(Zd(t),t)+(Zd(t).getDay()===4),e,2)}function GZe(t){return t.getDay()}function YZe(t,e){return Bn(aE.count(Zd(t)-1,t),e,2)}function XZe(t,e){return Bn(t.getFullYear()%100,e,2)}function ZZe(t,e){return t=$de(t),Bn(t.getFullYear()%100,e,2)}function JZe(t,e){return Bn(t.getFullYear()%1e4,e,4)}function QZe(t,e){var r=t.getDay();return t=r>=4||r===0?Xy(t):Xy.ceil(t),Bn(t.getFullYear()%1e4,e,4)}function eJe(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Bn(e/60|0,"0",2)+Bn(e%60,"0",2)}function xZ(t,e){return Bn(t.getUTCDate(),e,2)}function tJe(t,e){return Bn(t.getUTCHours(),e,2)}function rJe(t,e){return Bn(t.getUTCHours()%12||12,e,2)}function nJe(t,e){return Bn(1+v$.count(Zg(t),t),e,3)}function Ude(t,e){return Bn(t.getUTCMilliseconds(),e,3)}function iJe(t,e){return Ude(t,e)+"000"}function sJe(t,e){return Bn(t.getUTCMonth()+1,e,2)}function aJe(t,e){return Bn(t.getUTCMinutes(),e,2)}function oJe(t,e){return Bn(t.getUTCSeconds(),e,2)}function cJe(t){var e=t.getUTCDay();return e===0?7:e}function lJe(t,e){return Bn(Lde.count(Zg(t)-1,t),e,2)}function Vde(t){var e=t.getUTCDay();return e>=4||e===0?Zy(t):Zy.ceil(t)}function uJe(t,e){return t=Vde(t),Bn(Zy.count(Zg(t),t)+(Zg(t).getUTCDay()===4),e,2)}function fJe(t){return t.getUTCDay()}function hJe(t,e){return Bn(oE.count(Zg(t)-1,t),e,2)}function dJe(t,e){return Bn(t.getUTCFullYear()%100,e,2)}function pJe(t,e){return t=Vde(t),Bn(t.getUTCFullYear()%100,e,2)}function gJe(t,e){return Bn(t.getUTCFullYear()%1e4,e,4)}function mJe(t,e){var r=t.getUTCDay();return t=r>=4||r===0?Zy(t):Zy.ceil(t),Bn(t.getUTCFullYear()%1e4,e,4)}function yJe(){return"+0000"}function EZ(){return"%"}function SZ(t){return+t}function AZ(t){return Math.floor(+t/1e3)}var T2,jde;vJe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function vJe(t){return T2=vZe(t),jde=T2.format,T2.parse,T2.utcFormat,T2.utcParse,T2}function bJe(t){return new Date(t)}function wJe(t){return t instanceof Date?+t:+new Date(+t)}function zde(t,e,r,n,i,s,a,o,c,l){var u=Nde(),f=u.invert,h=u.domain,d=l(".%L"),g=l(":%S"),p=l("%I:%M"),m=l("%I %p"),y=l("%a %d"),v=l("%b %d"),_=l("%B"),x=l("%Y");function A(C){return(c(C)<C?d:o(C)<C?g:a(C)<C?p:s(C)<C?m:n(C)<C?i(C)<C?y:v:r(C)<C?_:x)(C)}return u.invert=function(C){return new Date(f(C))},u.domain=function(C){return arguments.length?h(Array.from(C,wJe)):h().map(bJe)},u.ticks=function(C){var R=h();return t(R[0],R[R.length-1],C??10)},u.tickFormat=function(C,R){return R==null?A:l(R)},u.nice=function(C){var R=h();return(!C||typeof C.range!="function")&&(C=e(R[0],R[R.length-1],C??10)),C?h(rZe(R,C)):u},u.copy=function(){return Ode(u,zde(t,e,r,n,i,s,a,o,c,l))},u}function _Je(){return Dde.apply(zde(mZe,yZe,Zd,b$,jS,A6,y$,m$,sy,jde).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function k2(t){return function(){return t}}function xJe(t){let e=3;return t.digits=function(r){if(!arguments.length)return e;if(r==null)e=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);e=n}return t},()=>new MXe(e)}function EJe(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function qde(t){this._context=t}qde.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function SJe(t){return new qde(t)}function AJe(t){return t[0]}function TJe(t){return t[1]}function kJe(t,e){var r=k2(!0),n=null,i=SJe,s=null,a=xJe(o);t=typeof t=="function"?t:t===void 0?AJe:k2(t),e=typeof e=="function"?e:e===void 0?TJe:k2(e);function o(c){var l,u=(c=EJe(c)).length,f,h=!1,d;for(n==null&&(s=i(d=a())),l=0;l<=u;++l)!(l<u&&r(f=c[l],l,c))===h&&((h=!h)?s.lineStart():s.lineEnd()),h&&s.point(+t(f,l,c),+e(f,l,c));if(d)return s=null,d+""||null}return o.x=function(c){return arguments.length?(t=typeof c=="function"?c:k2(+c),o):t},o.y=function(c){return arguments.length?(e=typeof c=="function"?c:k2(+c),o):e},o.defined=function(c){return arguments.length?(r=typeof c=="function"?c:k2(!!c),o):r},o.curve=function(c){return arguments.length?(i=c,n!=null&&(s=i(n)),o):i},o.context=function(c){return arguments.length?(c==null?n=s=null:s=i(n=c),o):n},o}function qw(t,e,r){this.k=t,this.x=e,this.y=r}qw.prototype={constructor:qw,scale:function(t){return t===1?this:new qw(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new qw(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};qw.prototype;const CJe=_t({color:String,...ip(),...Or(),...mh(),...Im(),...xS(),...RF(),...Ju(),...ps(),...$s()},"VSheet"),IJe=Yt()({name:"VSheet",props:CJe(),setup(t,e){let{slots:r}=e;const{themeClasses:n}=va(t),{backgroundColorClasses:i,backgroundColorStyles:s}=Od(or(t,"color")),{borderClasses:a}=sp(t),{dimensionStyles:o}=yh(t),{elevationClasses:c}=Rm(t),{locationStyles:l}=ES(t),{positionClasses:u}=PF(t),{roundedClasses:f}=Qu(t);return _r(()=>ue(t.tag,{class:["v-sheet",n.value,i.value,a.value,c.value,u.value,f.value,t.class],style:[s.value,o.value,l.value,t.style]},r)),{}}}),RJe={class:"text-center"},PJe={class:"mx-auto text-h6 text-center text-disabled"},BJe=Di({__name:"GraphiqueStation",props:{hauteur:{},vals:{}},setup(t){const e=t,{எண்ணை_வடிவூட்டு:r}=wS(),{மொழியாக்கம்_பயன்படுத்து:n}=s0(),{$மொ:i}=n(),s=Te(()=>(e.vals||[]).map(m=>({date:new Date(m.date),précip:m.précip}))),a=ht(null),o=Te(()=>!!s.value.length),c=(m,y)=>m.getDate()===y.getDate()&&m.getMonth()===y.getMonth()&&m.getFullYear()===y.getFullYear(),l=function(m,y){for(var v=[],_=new Date(m);_<=new Date(y);_.setDate(_.getDate()+1))v.push(new Date(_));return v},u=Te(()=>{const m=[];return l(new Date(Math.min(...s.value.map(v=>v.date.getTime()))),new Date(Math.max(...s.value.map(v=>v.date.getTime())))).forEach(v=>{const _=s.value.filter(x=>c(x.date,v));if(_.length)for(const x of _)m.push({...x,précip:x.précip+(m.length?m[m.length-1].précip:0)});else m.push({date:v,précip:m.length?m[m.length-1].précip:0})}),m}),f={},h=m=>(f[m.toString()]||(f[m.toString()]=r(m)),f[m.toString()].value||m.toString());Ai(()=>{const m=GGe(a.value);Qs(()=>{const{width:y,height:v}=p.dimensions;if(!(y&&v))return;const _=_Je().domain(QWe(s.value,R=>R.date)).range([0,y]),x=Mde().domain([0,iKe(u.value,R=>R.précip)]).range([v,0]);m.selectAll(".line").data([u.value]).join("path").attr("class","line").attr("fill","none").attr("stroke","#69b3a2").attr("stroke-width",1.5).attr("d",kJe().x(R=>_(R.date)).y(R=>x(R.précip))),m.selectAll(".bar").data(s.value).join("rect").attr("class","bar").attr("x",function(R){return _(R.date)}).attr("y",function(R){return x(R.précip)}).attr("width",2).attr("height",function(R){return v-x(R.précip)}).attr("fill","steelblue"),m.selectAll("bar").transition().duration(800).attr("y",function(R){return x(R.précip)}).attr("height",function(R){return v-x(R.précip)}).delay((R,M)=>M*100);const A=fKe(_);m.select(".x-axis").style("transform",`translateY(${v}px)`).call(A).append("text");const C=hKe(x);C.tickFormat(R=>h(R.valueOf())),m.select(".y-axis").call(C)})});const d=()=>{const m=ht(),y=Ps({dimensions:{}}),v=new ResizeObserver(_=>{_.forEach(x=>{y.dimensions=x.contentRect})});return Ai(()=>{y.dimensions=m.value.getBoundingClientRect(),v.observe(m.value)}),bo(()=>{v.unobserve(m.value)}),{resizeState:y,resizeRef:m}},{resizeRef:g,resizeState:p}=d();return(m,y)=>(pr(),Qr(IJe,{width:"100%",height:m.hauteur,class:"text-center mb-2"},{default:mt(()=>[Bs("div",RJe,[$a(Bs("div",{ref_key:"resizeRef",ref:g,class:"ma-6"},[(pr(),jg("svg",{ref_key:"svgRef",ref:a,width:"100%"},y[0]||(y[0]=[Bs("g",{class:"x-axis"},null,-1),Bs("g",{class:"y-axis"},null,-1)]),512))],512),[[Kd,o.value]]),$a(ue(Gg,{class:"d-flex align-center text-center",variant:"flat",height:m.hauteur},{default:mt(()=>[ue(Pm,null,{default:mt(()=>[Bs("div",PJe,xi(ct(i)("démo.graphique.aucuneDonnée")),1)]),_:1})]),_:1},8,["height"]),[[Kd,!o.value]])])]),_:1},8,["height"]))}}),DJe=(t,e)=>{const r=t.__vccOpts||t;for(const[n,i]of e)r[n]=i;return r},OJe=DJe(BJe,[["__scopeId","data-v-7f14c904"]]);var NJe=MJe,TZ="all values passed to `median` must be numeric";function MJe(t){if(Array.isArray(t)||(t=[].slice.call(arguments)),!t.length)throw new Error("no values were passed to `median`");if(t.length==1){if(Number.isFinite(t[0]))return t[0];throw new Error(TZ)}var e=t.sort(function(n,i){if(!Number.isFinite(n))throw new Error(TZ);return n>=i?1:-1}),r=Math.floor(t.length/2);return t.length/2!=r?e[r]:(e[r]+e[r-1])/2}const LJe="/egu24/assets/63f33000-3c5b-4ae1-a471-ff320fdd8379-CkFTv_kn.jpg",FJe="/egu24/assets/b61c5c12-80a0-4792-b2dd-863df41e0036-BamqBV64.jpg",$Je="/egu24/assets/b3cc1b86-e461-4799-adf8-5fbc773ef259-CtnpY-uv.jpg",UJe="/egu24/assets/0fd998f2-1d93-4977-8dfa-8d5e06c5ac66-BPb-konN.jpg",VJe="/egu24/assets/111bb611-4d13-4078-8efe-3dd3ec188023-Bte4qWoZ.jpg",jJe="/egu24/assets/57c27ead-0c8d-430d-bab5-937f4e752655-B5PxNzRd.jpg",zJe="/egu24/assets/354d9aec-847d-4aad-8b03-8b873717295f-rfduqy1g.jpg",qJe="/egu24/assets/54e41355-abe3-4d60-aaae-da2855fbdee9-D74s8Xq4.jpg",HJe="/egu24/assets/3ef4a7d4-b671-4afc-b2b8-edf18985829e-DGis44zM.jpg",WJe="/egu24/assets/fde62246-d40e-49db-830d-5a42a142d676-CtDB5xZv.jpg",KJe="/egu24/assets/7b595502-ea47-451c-a2eb-b8ae000dc38c-CdgnZqW9.jpg",GJe="/egu24/assets/0b875fbb-aab2-46d4-afb5-f2bf8243ab0a-Ds4MXam_.jpg",YJe="/egu24/assets/a6e13eca-69cf-4cae-87ba-1a41d3f4aaad-DRjLarHR.jpg",XJe="/egu24/assets/d48778ee-a7bf-4286-84b3-0a47465fc207-Cieir1Kl.jpg",ZJe="/egu24/assets/daa497ed-32fe-4a2e-9988-6f90edc1f25f-BoJgNGwb.jpg",JJe="/egu24/assets/739bdc0b-4ba4-4c80-949e-bf07ceb163ee-ciTBeehG.jpg",QJe="/egu24/assets/efbf26dc-2984-4406-b6f9-3aba222a66c5-B9uL0lzi.jpg",eQe="/egu24/assets/8af31206-b660-455f-a5db-4bfc5f47f06c-CKSITO_Z.jpg",tQe="/egu24/assets/968020db-99f6-40ca-a012-0e37a81e40f7-Crp4is6-.jpg",rQe="/egu24/assets/c85aa99b-0e7e-4f70-977a-3c7680794163--Ioyqk4t.jpg",nQe="/egu24/assets/91d677dd-e6a6-4ca8-9b4a-89c4ddcb0fa3-B5HRjaqj.jpg",iQe="/egu24/assets/56dd4540-7883-4301-a017-45ac5bac5d92-Br64_Ew0.jpg",sQe="/egu24/assets/b6d1e1c1-3f34-42a5-bdac-d1e394ebe462-CKUxhHV0.jpg",aQe="/egu24/assets/962d99b0-255f-4ba6-994c-521f62cc2f8e-rOU_fhQe.jpg",oQe="/egu24/assets/cb0b9898-f7fc-49bb-8e99-e8111e0e7f98-DsfM0zgs.jpg",cQe="/egu24/assets/0eaefd63-e4da-43c0-8b15-3c8400f84021-CgZbofWN.jpg",lQe="/egu24/assets/4d13176e-272a-4403-913a-785ee36b387a-C15vlNVK.jpg",uQe="/egu24/assets/2965b248-c52d-415b-a1e1-c93c200a195e-BYS-29D3.jpg",fQe="/egu24/assets/7caaf070-680a-47b2-a679-fd315dd39ab9-C8zn8bC8.jpg",hQe="/egu24/assets/1334158a-98be-49c2-ae2d-4099b4c4f12b-ChHdRkF7.jpg",dQe="/egu24/assets/234aba17-250f-412d-b372-c8877b2e4d93-AfSbGPax.jpg",pQe="/egu24/assets/62674979-73f7-4e62-acc3-195a1a685b89-DeLLueeC.jpg",gQe="/egu24/assets/359a050f-82a0-4159-aeb5-07af06413d39-Do93LNez.jpg",mQe="/egu24/assets/46687e4b-6f65-4236-a42e-e05388a21245-DA2t408g.jpg",yQe="/egu24/assets/c8094918-7c33-4268-bd8e-f9db8ca1186c-DCdGGzKv.jpg",vQe="/egu24/assets/33164c8d-8d53-4704-b7c7-9b3205f52d7e-8aOksHiu.jpg",bQe="/egu24/assets/e0e52c25-a3ba-451e-b2bf-c2602b9a8558-BLyLDcWi.jpg",wQe="/egu24/assets/7456682e-e694-439a-9147-9c51e6c1442d-BV1JBNwY.jpg",_Qe="/egu24/assets/2ec972f1-b00c-4545-9a6f-ef193f019d22-9L5ksuLL.jpg",xQe="/egu24/assets/e5841584-b3c2-46ff-ab2c-bf3be04099f7-DW0HNInQ.jpg",EQe="/egu24/assets/afbeb567-60af-4883-9e08-3d6a3c8e4e23-fIJc9Bog.jpg",SQe="/egu24/assets/1781e449-1a2c-4bd0-bcf8-f30b240a64a5-CyAASqp3.jpg",AQe="/egu24/assets/7278d014-23b0-46a7-ad3d-ef0593752139-BVk7zWaY.jpg",TQe="/egu24/assets/53b04bef-82e8-491c-8205-d396a1c1b2f7-CMHzjx-q.jpg",kQe="/egu24/assets/aa31f1a6-157f-4835-88e4-b656d4670106-CRpH29qk.jpg",CQe="/egu24/assets/a58abe66-2b57-46d0-a3df-aa6fc2796c49-D5G54F73.jpg",IQe="/egu24/assets/670c1827-eb27-4aa9-8ae6-e2a2d06d364d-B5IrO48o.jpg",RQe="/egu24/assets/53b80ef5-45c9-4865-9490-4081bb527718-BZwHKu09.jpg",PQe="/egu24/assets/7c47d6ab-d169-4d5c-826a-b927fd9bdc88-B8n_3WEu.jpg",BQe="/egu24/assets/33ae48c3-c504-4293-bf59-f149e735a032-DzHCT77v.jpg",DQe="/egu24/assets/1c6502f8-f6e6-4edc-a10e-11b7e1446fd4-5KyNOJsf.jpg",OQe="/egu24/assets/adaadb10-0680-40fc-a536-757d53b4783c-Byi43dg5.jpg",NQe="/egu24/assets/3fb4d462-505b-423f-b233-9fe2fbf2ab7d-BiU1Af2g.jpg",MQe="/egu24/assets/e81a2f8b-4b7e-41b3-aeac-da5795221688-CSJnv5wW.jpg",LQe="/egu24/assets/945a5da9-d77b-4883-83d0-aa719fada1a3-CRPbUL7D.jpg",FQe="/egu24/assets/668dd4b0-2301-4f97-a61c-c1fc072bd467-DzMeFCrT.jpg",$Qe="/egu24/assets/2e0f097d-aacd-4fc4-8877-f702b8038288-CMZyZeDu.jpg",UQe="/egu24/assets/1bd59cef-8b8c-4597-9fcd-a8f9145452dc-BZZbkjDp.jpg",VQe="/egu24/assets/0484b83e-287d-4795-870f-214a9394e13f-DVoChBtM.jpg",jQe="/egu24/assets/fd05667b-8d79-427a-b777-8c354ae9d3b5-udZ_OUPv.jpg",zQe="/egu24/assets/73eb1d12-b4f7-4495-b523-03a30391fa0f-dllqGDky.jpg",qQe="/egu24/assets/12fc964f-f3b5-4ece-b649-638cb8c4e40a-Ddye5ji5.jpg",HQe="/egu24/assets/77dcba10-d9ff-4f1e-9243-a84e4ef6ec1f-B9S-Ggt1.jpg",WQe="/egu24/assets/db692e2b-d526-4c66-9121-31fd2c84b2b5-BArZOZ7B.jpg",KQe="/egu24/assets/5e0f59ac-0f24-4255-afc3-a8a731adf9bf-DvLMLAv7.jpg",GQe="/egu24/assets/5e4d704e-f9b0-4f13-9b67-03d20880c93c-1Tvx44Xq.jpg",YQe="/egu24/assets/af7ca033-330c-4743-bd33-96a632dc9bcb-DtcATMCZ.jpg",XQe="/egu24/assets/cbe13669-c709-48ab-9a7b-88c144ffc159-BPiYcZ_3.jpg",ZQe="/egu24/assets/2cd87ee2-dba0-43d4-8d05-573933dd0dfd-NyuNKWqJ.jpg",JQe="/egu24/assets/6cd3c7fd-2785-429a-a0c0-38933de143ba-BkRJv3RK.jpg",QQe="/egu24/assets/bf084015-1c47-4666-b5cb-8ebf3d5336a6-CdidfGV4.jpg",eet="/egu24/assets/95bc7992-6a98-4948-9bbe-50255cc6421b-bJFfkFf_.jpg",tet="/egu24/assets/264d90d6-5386-42a9-a02c-7f74c1f5a158-C9wAAN6n.jpg",ret="/egu24/assets/98cab885-01af-4ed7-b809-43554204ad8e-BdpirE2c.jpg",net="/egu24/assets/ca767251-3b63-4c11-ba48-06f3c28e641d-xa4EFVAF.jpg",iet="/egu24/assets/4dc830d7-ed49-4297-b585-ee040e69987c-DO1922AK.jpg",set="/egu24/assets/8f1a194b-4858-4379-99b8-aee921cb9857-CYIavyP2.jpg",aet="/egu24/assets/125dced1-9367-4f36-9380-cc971a2e6765-npAjQV4B.jpg",oet="/egu24/assets/6a64c7fa-ab8f-4432-8bd5-bb1ffddfd211-C8E6T7c2.jpg",cet="/egu24/assets/8b51cf44-9062-4a12-998a-60efd8d4ea63-DiJMF5QD.jpg",uet="/egu24/assets/d9f0d0d0-82aa-4bd1-91f5-6db508dab992-D70ZvbOs.jpg",fet="/egu24/assets/acd44583-6881-4a41-afc0-ebcbebf961f4-C9QoUh_D.jpg",het="/egu24/assets/918d2d6f-dc5a-4d1b-9dd5-2de96cc56ac6-D536Ezj8.jpg",det="/egu24/assets/918d2d6f-dc5a-4d1b-9dd5-2de96cc56ac6-D536Ezj8.jpg",pet="/egu24/assets/1f756bda-953a-4051-be5b-a71bc2396d32-RM-ZDtX5.jpg",get="/egu24/assets/c3ee6e26-d5a6-428d-94df-6f6434c2ac26-Atuek6xN.jpg",met="/egu24/assets/9948d540-759c-43af-8564-9cc3eac65542-BuVSgbkf.jpg",yet="/egu24/assets/c6656497-915d-47e8-a3c1-527dd62e5c66-DlcbY8Xw.jpg",zO=[{id:"PT01072_2887",coords:[27.6461574,85.3402103]},{id:"PT01071_2886",coords:[27.6349734,85.5276167]},{id:"PT00924_2627",coords:[27.6717534,85.3249833]}],rI=[{id:"63f33000-3c5b-4ae1-a471-ff320fdd8379",station:"PT01072_2887",horo:"2023-05-16T03:27:29.293Z",image:LJe},{id:"b61c5c12-80a0-4792-b2dd-863df41e0036",station:"PT01072_2887",horo:"2023-06-28T11:51:23.389Z",image:FJe},{id:"b3cc1b86-e461-4799-adf8-5fbc773ef259",station:"PT01072_2887",horo:"2023-05-15T01:38:17.329Z",image:$Je},{id:"0fd998f2-1d93-4977-8dfa-8d5e06c5ac66",station:"PT01072_2887",horo:"2023-05-26T02:03:44.551Z",image:UJe},{id:"111bb611-4d13-4078-8efe-3dd3ec188023",station:"PT01072_2887",horo:"2023-07-04T08:40:23.464Z",image:VJe},{id:"57c27ead-0c8d-430d-bab5-937f4e752655",station:"PT01072_2887",horo:"2023-06-30T01:39:35.89Z",image:jJe},{id:"354d9aec-847d-4aad-8b03-8b873717295f",station:"PT01072_2887",horo:"2023-07-14T07:24:21.685Z",image:zJe},{id:"54e41355-abe3-4d60-aaae-da2855fbdee9",station:"PT01072_2887",horo:"2023-05-27T02:35:10.237Z",image:qJe},{id:"3ef4a7d4-b671-4afc-b2b8-edf18985829e",station:"PT01072_2887",horo:"2023-06-24T06:25:13.393Z",image:HJe},{id:"fde62246-d40e-49db-830d-5a42a142d676",station:"PT01072_2887",horo:"2023-07-01T03:07:13.718Z",image:WJe},{id:"7b595502-ea47-451c-a2eb-b8ae000dc38c",station:"PT01072_2887",horo:"2023-07-06T03:48:57.647Z",image:KJe},{id:"0b875fbb-aab2-46d4-afb5-f2bf8243ab0a",station:"PT01072_2887",horo:"2023-07-12T02:08:54.191Z",image:GJe},{id:"a6e13eca-69cf-4cae-87ba-1a41d3f4aaad",station:"PT01072_2887",horo:"2023-07-02T08:07:27.909Z",image:YJe},{id:"d48778ee-a7bf-4286-84b3-0a47465fc207",station:"PT01072_2887",horo:"2023-07-05T12:51:42.263Z",image:XJe},{id:"daa497ed-32fe-4a2e-9988-6f90edc1f25f",station:"PT01072_2887",horo:"2023-06-14T02:36:57.735Z",image:ZJe},{id:"739bdc0b-4ba4-4c80-949e-bf07ceb163ee",station:"PT01072_2887",horo:"2023-06-19T02:02:22.466Z",image:JJe},{id:"efbf26dc-2984-4406-b6f9-3aba222a66c5",station:"PT01072_2887",horo:"2023-06-13T02:17:46.985Z",image:QJe},{id:"8af31206-b660-455f-a5db-4bfc5f47f06c",station:"PT01072_2887",horo:"2023-06-26T03:16:19.77Z",image:eQe},{id:"968020db-99f6-40ca-a012-0e37a81e40f7",station:"PT01072_2887",horo:"2023-06-27T08:44:29.492Z",image:tQe},{id:"c85aa99b-0e7e-4f70-977a-3c7680794163",station:"PT01072_2887",horo:"2023-06-29T01:55:00.796Z",image:rQe},{id:"91d677dd-e6a6-4ca8-9b4a-89c4ddcb0fa3",station:"PT01072_2887",horo:"2023-07-03T09:05:04.185Z",image:nQe},{id:"56dd4540-7883-4301-a017-45ac5bac5d92",station:"PT01072_2887",horo:"2023-05-29T12:20:36.323Z",image:iQe},{id:"b6d1e1c1-3f34-42a5-bdac-d1e394ebe462",station:"PT01072_2887",horo:"2023-06-20T01:20:51.542Z",image:sQe},{id:"962d99b0-255f-4ba6-994c-521f62cc2f8e",station:"PT01072_2887",horo:"2023-07-09T02:40:49.651Z",image:aQe},{id:"cb0b9898-f7fc-49bb-8e99-e8111e0e7f98",station:"PT01072_2887",horo:"2023-07-15T10:24:16.289Z",image:oQe},{id:"0eaefd63-e4da-43c0-8b15-3c8400f84021",station:"PT01072_2887",horo:"2023-06-15T14:27:02.02Z",image:cQe},{id:"4d13176e-272a-4403-913a-785ee36b387a",station:"PT01072_2887",horo:"2023-06-09T02:29:19.744Z",image:lQe},{id:"2965b248-c52d-415b-a1e1-c93c200a195e",station:"PT01071_2886",horo:"2023-06-28T12:38:36.326Z",image:uQe},{id:"7caaf070-680a-47b2-a679-fd315dd39ab9",station:"PT01071_2886",horo:"2023-06-19T13:54:33.688Z",image:fQe},{id:"1334158a-98be-49c2-ae2d-4099b4c4f12b",station:"PT01071_2886",horo:"2023-07-03T12:21:10.275Z",image:hQe},{id:"234aba17-250f-412d-b372-c8877b2e4d93",station:"PT01071_2886",horo:"2023-07-27T15:26:23.51Z",image:dQe},{id:"62674979-73f7-4e62-acc3-195a1a685b89",station:"PT01071_2886",horo:"2023-09-10T10:32:34.087Z",image:pQe},{id:"359a050f-82a0-4159-aeb5-07af06413d39",station:"PT01071_2886",horo:"2023-07-07T15:41:26.71Z",image:gQe},{id:"46687e4b-6f65-4236-a42e-e05388a21245",station:"PT01071_2886",horo:"2023-07-14T12:19:41.437Z",image:mQe},{id:"c8094918-7c33-4268-bd8e-f9db8ca1186c",station:"PT01071_2886",horo:"2023-08-09T11:10:28.908Z",image:yQe},{id:"33164c8d-8d53-4704-b7c7-9b3205f52d7e",station:"PT01071_2886",horo:"2023-08-15T11:03:36.47Z",image:vQe},{id:"e0e52c25-a3ba-451e-b2bf-c2602b9a8558",station:"PT01071_2886",horo:"2023-07-12T12:51:24.658Z",image:bQe},{id:"7456682e-e694-439a-9147-9c51e6c1442d",station:"PT01071_2886",horo:"2023-08-25T11:57:39.524Z",image:wQe},{id:"2ec972f1-b00c-4545-9a6f-ef193f019d22",station:"PT01071_2886",horo:"2023-07-01T12:57:53.984Z",image:_Qe},{id:"e5841584-b3c2-46ff-ab2c-bf3be04099f7",station:"PT01071_2886",horo:"2023-08-26T13:08:20.299Z",image:xQe},{id:"afbeb567-60af-4883-9e08-3d6a3c8e4e23",station:"PT01071_2886",horo:"2023-09-08T10:26:42.18Z",image:EQe},{id:"1781e449-1a2c-4bd0-bcf8-f30b240a64a5",station:"PT01071_2886",horo:"2023-07-23T12:14:36.449Z",image:SQe},{id:"7278d014-23b0-46a7-ad3d-ef0593752139",station:"PT01071_2886",horo:"2023-09-12T11:24:21.149Z",image:AQe},{id:"53b04bef-82e8-491c-8205-d396a1c1b2f7",station:"PT01071_2886",horo:"2023-07-30T07:21:41.777Z",image:TQe},{id:"aa31f1a6-157f-4835-88e4-b656d4670106",station:"PT01071_2886",horo:"2023-08-23T10:37:56.597Z",image:kQe},{id:"a58abe66-2b57-46d0-a3df-aa6fc2796c49",station:"PT01071_2886",horo:"2023-07-20T10:55:21.896Z",image:CQe},{id:"670c1827-eb27-4aa9-8ae6-e2a2d06d364d",station:"PT01071_2886",horo:"2023-08-02T10:38:08.199Z",image:IQe},{id:"53b80ef5-45c9-4865-9490-4081bb527718",station:"PT01071_2886",horo:"2023-06-14T13:21:14.906Z",image:RQe},{id:"7c47d6ab-d169-4d5c-826a-b927fd9bdc88",station:"PT01071_2886",horo:"2023-06-15T13:39:12.805Z",image:PQe},{id:"33ae48c3-c504-4293-bf59-f149e735a032",station:"PT01071_2886",horo:"2023-07-05T12:49:53.05Z",image:BQe},{id:"1c6502f8-f6e6-4edc-a10e-11b7e1446fd4",station:"PT01071_2886",horo:"2023-07-13T16:05:58.231Z",image:DQe},{id:"adaadb10-0680-40fc-a536-757d53b4783c",station:"PT01071_2886",horo:"2023-07-17T12:53:52.158Z",image:OQe},{id:"3fb4d462-505b-423f-b233-9fe2fbf2ab7d",station:"PT01071_2886",horo:"2023-07-24T14:11:41.108Z",image:NQe},{id:"e81a2f8b-4b7e-41b3-aeac-da5795221688",station:"PT01071_2886",horo:"2023-06-27T14:08:33.12Z",image:MQe},{id:"945a5da9-d77b-4883-83d0-aa719fada1a3",station:"PT01071_2886",horo:"2023-07-28T12:34:27.247Z",image:LQe},{id:"668dd4b0-2301-4f97-a61c-c1fc072bd467",station:"PT01071_2886",horo:"2023-09-13T15:01:51.163Z",image:FQe},{id:"2e0f097d-aacd-4fc4-8877-f702b8038288",station:"PT01071_2886",horo:"2023-09-29T10:16:17.987Z",image:$Qe},{id:"1bd59cef-8b8c-4597-9fcd-a8f9145452dc",station:"PT01071_2886",horo:"2023-06-20T15:45:11.008Z",image:UQe},{id:"0484b83e-287d-4795-870f-214a9394e13f",station:"PT01071_2886",horo:"2023-07-06T12:45:47.18Z",image:VQe},{id:"fd05667b-8d79-427a-b777-8c354ae9d3b5",station:"PT01071_2886",horo:"2023-06-25T12:48:18.544Z",image:jQe},{id:"73eb1d12-b4f7-4495-b523-03a30391fa0f",station:"PT01071_2886",horo:"2023-08-07T13:43:21.731Z",image:zQe},{id:"12fc964f-f3b5-4ece-b649-638cb8c4e40a",station:"PT01071_2886",horo:"2023-07-25T13:07:31.649Z",image:qQe},{id:"77dcba10-d9ff-4f1e-9243-a84e4ef6ec1f",station:"PT01071_2886",horo:"2023-08-01T10:18:52.581Z",image:HQe},{id:"db692e2b-d526-4c66-9121-31fd2c84b2b5",station:"PT01071_2886",horo:"2023-06-24T12:17:19.301Z",image:WQe},{id:"5e0f59ac-0f24-4255-afc3-a8a731adf9bf",station:"PT01071_2886",horo:"2023-07-04T12:58:42.573Z",image:KQe},{id:"5e4d704e-f9b0-4f13-9b67-03d20880c93c",station:"PT01071_2886",horo:"2023-07-31T10:15:43.933Z",image:GQe},{id:"af7ca033-330c-4743-bd33-96a632dc9bcb",station:"PT01071_2886",horo:"2023-07-30T10:42:00.44Z",image:YQe},{id:"cbe13669-c709-48ab-9a7b-88c144ffc159",station:"PT01071_2886",horo:"2023-08-20T12:28:04.075Z",image:XQe},{id:"2cd87ee2-dba0-43d4-8d05-573933dd0dfd",station:"PT01071_2886",horo:"2023-08-22T13:04:11.47Z",image:ZQe},{id:"6cd3c7fd-2785-429a-a0c0-38933de143ba",station:"PT01071_2886",horo:"2023-09-04T10:17:40.182Z",image:JQe},{id:"bf084015-1c47-4666-b5cb-8ebf3d5336a6",station:"PT01071_2886",horo:"2023-08-13T11:03:44.633Z",image:QQe},{id:"95bc7992-6a98-4948-9bbe-50255cc6421b",station:"PT01071_2886",horo:"2023-10-06T10:21:31.823Z",image:eet},{id:"264d90d6-5386-42a9-a02c-7f74c1f5a158",station:"PT01071_2886",horo:"2023-05-04T10:42:59.801Z",image:tet},{id:"98cab885-01af-4ed7-b809-43554204ad8e",station:"PT01071_2886",horo:"2023-07-15T13:29:38.714Z",image:ret},{id:"ca767251-3b63-4c11-ba48-06f3c28e641d",station:"PT01071_2886",horo:"2023-08-12T10:27:09.541Z",image:net},{id:"4dc830d7-ed49-4297-b585-ee040e69987c",station:"PT01071_2886",horo:"2023-08-06T10:30:54.81Z",image:iet},{id:"8f1a194b-4858-4379-99b8-aee921cb9857",station:"PT01071_2886",horo:"2023-08-08T10:37:08.398Z",image:set},{id:"125dced1-9367-4f36-9380-cc971a2e6765",station:"PT00924_2627",horo:"2023-06-28T11:46:27.024Z",image:aet},{id:"6a64c7fa-ab8f-4432-8bd5-bb1ffddfd211",station:"PT00924_2627",horo:"2023-08-15T02:45:29.529Z",image:oet},{id:"8b51cf44-9062-4a12-998a-60efd8d4ea63",station:"PT00924_2627",horo:"2023-05-05T03:17:58.429Z",image:cet},{id:"d9f0d0d0-82aa-4bd1-91f5-6db508dab992",station:"PT00924_2627",horo:"2023-05-27T06:12:14.237Z",image:uet},{id:"acd44583-6881-4a41-afc0-ebcbebf961f4",station:"PT00924_2627",horo:"2023-05-18T05:00:30.683Z",image:fet},{id:"d2b938eb-d695-4e14-9ee2-dde1cea47e82",station:"PT00924_2627",horo:"2023-06-25T12:18:03.692Z",image:het},{id:"918d2d6f-dc5a-4d1b-9dd5-2de96cc56ac6",station:"PT00924_2627",horo:"2023-07-02T05:26:45.11Z",image:det},{id:"1f756bda-953a-4051-be5b-a71bc2396d32",station:"PT00924_2627",horo:"2023-06-16T11:53:00.382Z",image:pet},{id:"c3ee6e26-d5a6-428d-94df-6f6434c2ac26",station:"PT00924_2627",horo:"2023-06-20T06:17:53Z",image:get},{id:"9948d540-759c-43af-8564-9cc3eac65542",station:"PT00924_2627",horo:"2023-06-14T08:08:32.894Z",image:met},{id:"c6656497-915d-47e8-a3c1-527dd62e5c66",station:"PT00924_2627",horo:"2023-05-15T13:10:30.802Z",image:yet}],w$=()=>{const t=Rr("constl");if(t)return t;throw new Error("Constellation n'est pas trouvable.")},Tg=(t,e={},r)=>{const n=ht(r);let i;const s={...e,f:a=>n.value=a};return Ai(async()=>{const a=await t(s);a instanceof Function?i=a:i=a?.fOublier}),Yo(async()=>{i&&await i()}),Te(()=>n.value)},Hde=()=>{const t=w$(),e=Tg(t.nuées.suivreDonnéesTableauNuée,{idNuée:od,clefTableau:Z2,vérifierAutorisation:!1}),r=Tg(t.nuées.suivreBdsCorrespondantes,{idNuée:od}),n=({idStation:h})=>Te(()=>{if(!e.value)return;const d=i({id:h}),g=d?.coords[0],p=d?.coords[1],m=e.value.filter(x=>x.élément.données[kO]===g&&x.élément.données[CO]===p);return[...new Set(m.map(x=>x.élément.données[Dx]))].map(x=>({date:x,vals:m.filter(A=>A.élément.données[Dx]===x).map(A=>A.élément.données[IO])})).map(x=>({date:x.date,précip:NJe(x.vals)})).toSorted((x,A)=>x.date>A.date?1:-1)}),i=({id:h})=>zO.find(d=>d.id===h),s=async({précip:h,obs:d})=>{const g=i({id:d.station});if(!g)throw new Error(`Station ${d.station} introuvable dans les données.`);return await t.bds.ajouterÉlémentÀTableauUnique({schémaBd:L_,idNuéeUnique:od,clefTableau:Z2,vals:{[TO]:d.id,[Dx]:d.horo,[kO]:g.coords[0],[CO]:g.coords[1],[IO]:h}})},a=Tg(t.bds.suivreDonnéesDeTableauUnique,{schémaBd:L_,idNuéeUnique:od,clefTableau:Z2});return{toutesPhotos:rI,numérisées:e,utiliserDonnéesStation:n,choisirObservationAléatoire:({idStation:h,idPrésente:d}={})=>{const g=rI.filter(p=>!a.value?.find(m=>m.données[TO]===p.id)).filter(p=>!h||p.station===h).filter(p=>p.id!==d);return g[Math.floor(Math.random()*g.length)]},contribuer:s,effacer:async h=>await t.bds.effacerÉlémentDeTableauUnique({schémaBd:L_,idNuéeUnique:od,clefTableau:Z2,idÉlément:h}),imageDeDonnée:h=>rI.find(d=>d.id===h)?.image,mesContributions:a,exporterDonnées:async()=>{await t.nuées.exporterDonnéesNuée({idNuée:od})},bdsCorresp:r,effacerDonnées:async()=>{const h=a.value;h&&await Promise.all(h.map(d=>t.bds.effacerÉlémentDeTableauUnique({schémaBd:L_,idNuéeUnique:od,clefTableau:Z2,idÉlément:d.id})))}}},vet=Di({__name:"MarqueurStation",props:{coords:{},idStation:{}},emits:["prendrePhoto"],setup(t,{emit:e}){const r=t,n=e,{எண்ணை_வடிவூட்டு:i}=wS(),{utiliserDonnéesStation:s,numérisées:a,mesContributions:o,bdsCorresp:c}=Hde(),l=i(Te(()=>Number.parseFloat(r.coords[0].toFixed(4)))),u=i(Te(()=>Number.parseFloat(r.coords[1].toFixed(4)))),f=s({idStation:r.idStation});return(h,d)=>(pr(),Qr(ct($We),{"lat-lng":h.coords},{default:mt(()=>[ue(ct(HWe),null,{default:mt(()=>[ue(Gg,{variant:"flat",width:"250"},{default:mt(()=>[ue(b6,{class:"px-0"},{default:mt(()=>[ue(v6,null,{default:mt(()=>[Mn(xi(h.idStation),1)]),_:1}),ue(r$,null,{default:mt(()=>[Mn(xi(`${ct(l)}, ${ct(u)}`),1)]),_:1})]),_:1}),ue(Pm,{class:"px-0 text-center"},{default:mt(()=>[ue(OJe,{hauteur:150,vals:ct(f)},null,8,["vals"]),ue(Jc,{class:"mt-2",variant:"flat",icon:"mdi-camera-outline",size:"small",onClick:d[0]||(d[0]=()=>n("prendrePhoto"))})]),_:1})]),_:1})]),_:1})]),_:1},8,["lat-lng"]))}}),bet={key:0},kZ=Di({__name:"EntréeDonnée",props:{station:{},observation:{},enSoumission:{type:Boolean}},emits:["soumettre","prendrePhoto"],setup(t,{emit:e}){const r=t,n=e,{mdAndUp:i}=n0(),{மொழியாக்கம்_பயன்படுத்து:s}=s0(),{$மொ:a,மொ:o}=s(),{எண்ணை_வடிவூட்டு:c}=wS(),l=c(Te(()=>Number.parseFloat(r.station.coords[0].toFixed(4)||"0"))),u=c(Te(()=>Number.parseFloat(r.station.coords[1].toFixed(4)||"0"))),f=ht(""),h=Te(()=>{try{const m=parseFloat(f.value);if(!isNaN(m))return!0}catch{return!1}}),d=[m=>m===""||h.value?!0:a("démo.numéroInvalid")],g=()=>{n("soumettre",{précip:parseFloat(f.value)}),f.value=""},p=()=>{n("prendrePhoto")};return(m,y)=>(pr(),Qr(Gg,{variant:"flat",class:"pa-2"},{default:mt(()=>[ue(b6,{class:"px-0 pt-0"},{default:mt(()=>[ue(v6,null,{default:mt(()=>[Mn(xi(m.station.id),1)]),_:1}),ue(r$,null,{default:mt(()=>[ue(Fn,{icon:"mdi-map-marker-outline",start:""}),Mn(xi(`${ct(l)}, ${ct(u)}`)+" ",1),y[3]||(y[3]=Bs("br",null,null,-1)),m.observation?(pr(),jg("span",bet,[ue(Fn,{icon:"mdi-clock-time-three-outline",start:""}),Mn(" "+xi(new Date(m.observation.horo).toLocaleString()),1)])):qo("",!0)]),_:1})]),_:1}),ue(Pm,null,{default:mt(()=>[ct(i)?qo("",!0):(pr(),Qr(Hy,{key:0,class:"pb-6",src:m.observation?.image},null,8,["src"])),ue(q7,{modelValue:f.value,"onUpdate:modelValue":y[0]||(y[0]=v=>f.value=v),variant:"outlined",label:ct(a)("démo.indicePrécip"),rules:d,disabled:m.enSoumission,clearable:""},null,8,["modelValue","label","disabled"]),ue(Jc,{class:"my-2",width:"100%","append-icon":"mdi-check",variant:"outlined",disabled:!f.value,loading:m.enSoumission,onClick:y[1]||(y[1]=()=>g())},{default:mt(()=>[Mn(xi(ct(a)("démo.soumettre")),1)]),_:1},8,["disabled","loading"]),ue(Jc,{class:"my-2",width:"100%","append-icon":"mdi-camera-flip-outline",variant:"outlined",onClick:y[2]||(y[2]=()=>p())},{default:mt(()=>[Mn(xi(ct(a)("démo.nouvellePhoto")),1)]),_:1})]),_:1})]),_:1}))}}),wet=_t({fullscreen:Boolean,retainFocus:{type:Boolean,default:!0},scrollable:Boolean,...$F({origin:"center center",scrollStrategy:"block",transition:{component:NF},zIndex:2400})},"VDialog"),Wde=Yt()({name:"VDialog",props:wet(),emits:{"update:modelValue":t=>!0,afterEnter:()=>!0,afterLeave:()=>!0},setup(t,e){let{emit:r,slots:n}=e;const i=xs(t,"modelValue"),{scopeId:s}=FF(),a=ht();function o(u){const f=u.relatedTarget,h=u.target;if(f!==h&&a.value?.contentEl&&a.value?.globalTop&&![document,a.value.contentEl].includes(h)&&!a.value.contentEl.contains(h)){const d=J3(a.value.contentEl);if(!d.length)return;const g=d[0],p=d[d.length-1];f===g?p.focus():g.focus()}}qn&&cr(()=>i.value&&t.retainFocus,u=>{u?document.addEventListener("focusin",o):document.removeEventListener("focusin",o)},{immediate:!0});function c(){r("afterEnter"),a.value?.contentEl&&!a.value.contentEl.contains(document.activeElement)&&a.value.contentEl.focus({preventScroll:!0})}function l(){r("afterLeave")}return cr(i,async u=>{u||(await Bi(),a.value.activatorEl?.focus({preventScroll:!0}))}),_r(()=>{const u=V7.filterProps(t),f=gr({"aria-haspopup":"dialog"},t.activatorProps),h=gr({tabindex:-1},t.contentProps);return ue(V7,gr({ref:a,class:["v-dialog",{"v-dialog--fullscreen":t.fullscreen,"v-dialog--scrollable":t.scrollable},t.class],style:t.style},u,{modelValue:i.value,"onUpdate:modelValue":d=>i.value=d,"aria-modal":"true",activatorProps:f,contentProps:h,role:"dialog",onAfterEnter:c,onAfterLeave:l},s),{activator:n.activator,default:function(){for(var d=arguments.length,g=new Array(d),p=0;p<d;p++)g[p]=arguments[p];return ue(Xs,{root:"VDialog"},{default:()=>[n.default?.(...g)]})}})}),kS({},a)}}),CZ=Di({__name:"CarteConnexions",setup(t){const e=ht(!1),r=w$(),n=Tg(r.réseau.suivreConnexionsPostesSFIP),i=ht();Qs(async()=>{i.value=(await r.obtIdSFIP()).toString()});const s=Tg(r.suivreIdCompte),a=Tg(r.réseau.suivreConnexionsMembres);return(o,c)=>(pr(),Qr(Wde,{modelValue:e.value,"onUpdate:modelValue":c[0]||(c[0]=l=>e.value=l)},{activator:mt(({props:l})=>[coe(o.$slots,"activator",aSe(koe({props:l})))]),default:mt(()=>[ue(Gg,{class:"mx-auto"},{default:mt(()=>[ue(b6,null,{default:mt(()=>[ue(v6,null,{default:mt(()=>c[1]||(c[1]=[Mn(" Infos ")])),_:1})]),_:1}),ue(Pm,null,{default:mt(()=>[ue(Wy,null,{default:mt(()=>[ue(Uw,null,{default:mt(()=>c[2]||(c[2]=[Mn("Mon Id Constellation")])),_:1}),ue(Uo,null,{default:mt(()=>[Mn(xi(ct(s)),1)]),_:1}),ue(Uw,null,{default:mt(()=>c[3]||(c[3]=[Mn("Connexions Constellation")])),_:1}),(pr(!0),jg(qr,null,a7(ct(a),l=>(pr(),Qr(Uo,{title:l.infoMembre.idCompte,subtitle:l.vuÀ},null,8,["title","subtitle"]))),256)),ue(Uw,null,{default:mt(()=>c[4]||(c[4]=[Mn("Mon Id SFIP")])),_:1}),ue(Uo,null,{default:mt(()=>[Mn(xi(i.value),1)]),_:1}),ue(Uw,null,{default:mt(()=>c[5]||(c[5]=[Mn("Connexions SFIP")])),_:1}),(pr(!0),jg(qr,null,a7(ct(n),l=>(pr(),Qr(Uo,{title:l.pair,subtitle:l.adresses[0]},null,8,["title","subtitle"]))),256))]),_:1})]),_:1})]),_:1})]),_:3},8,["modelValue"]))}}),_et=_t({indeterminate:Boolean,inset:Boolean,flat:Boolean,loading:{type:[Boolean,String],default:!1},...VF(),...jF()},"VSwitch"),PVt=Yt()({name:"VSwitch",inheritAttrs:!1,props:_et(),emits:{"update:focused":t=>!0,"update:modelValue":t=>!0,"update:indeterminate":t=>!0},setup(t,e){let{attrs:r,slots:n}=e;const i=xs(t,"indeterminate"),s=xs(t,"modelValue"),{loaderClasses:a}=SS(t),{isFocused:o,focus:c,blur:l}=UF(t),u=ht(),f=qn&&window.matchMedia("(forced-colors: active)").matches,h=Te(()=>typeof t.loading=="string"&&t.loading!==""?t.loading:t.color),d=Zu(),g=Te(()=>t.id||`switch-${d}`);function p(){i.value&&(i.value=!1)}function m(y){y.stopPropagation(),y.preventDefault(),u.value?.input?.click()}return _r(()=>{const[y,v]=BL(r),_=z7.filterProps(t),x=H7.filterProps(t);return ue(z7,gr({class:["v-switch",{"v-switch--flat":t.flat},{"v-switch--inset":t.inset},{"v-switch--indeterminate":i.value},a.value,t.class]},y,_,{modelValue:s.value,"onUpdate:modelValue":A=>s.value=A,id:g.value,focused:o.value,style:t.style}),{...n,default:A=>{let{id:C,messagesId:R,isDisabled:M,isReadonly:N,isValid:Y}=A;const H={model:s,isValid:Y};return ue(H7,gr({ref:u},x,{modelValue:s.value,"onUpdate:modelValue":[E=>s.value=E,p],id:C.value,"aria-describedby":R.value,type:"checkbox","aria-checked":i.value?"mixed":void 0,disabled:M.value,readonly:N.value,onFocus:c,onBlur:l},v),{...n,default:E=>{let{backgroundColorClasses:k,backgroundColorStyles:w}=E;return ue("div",{class:["v-switch__track",f?void 0:k.value],style:w.value,onClick:m},[n["track-true"]&&ue("div",{key:"prepend",class:"v-switch__track-true"},[n["track-true"](H)]),n["track-false"]&&ue("div",{key:"append",class:"v-switch__track-false"},[n["track-false"](H)])])},input:E=>{let{inputNode:k,icon:w,backgroundColorClasses:T,backgroundColorStyles:L}=E;return ue(qr,null,[k,ue("div",{class:["v-switch__thumb",{"v-switch__thumb--filled":w||t.loading},t.inset||f?void 0:T.value],style:t.inset?void 0:L.value},[n.thumb?ue(Xs,{defaults:{VIcon:{icon:w,size:"x-small"}}},{default:()=>[n.thumb({...H,icon:w})]}):ue(W$e,null,{default:()=>[t.loading?ue(IF,{name:"v-switch",active:!0,color:Y.value===!1?void 0:h.value},{default:I=>n.loader?n.loader(I):ue(kF,{active:I.isActive,color:I.color,indeterminate:!0,size:"16",width:"2"},null)}):w&&ue(Fn,{key:String(w),icon:w,size:"x-small"},null)]})])])}})}})}),{}}}),xet={class:"text-h3"},Eet={class:"text-h5 d-flex"},Aet={key:1,class:"mx-auto my-auto text-h5 text-center text-disabled"},Tet=Di({__name:"SectionDémo",props:{nEtapes:{},etape:{}},emits:["retour","avancer"],setup(t,{emit:e}){const r=e,{mdAndUp:n}=n0(),{மொழியாக்கம்_பயன்படுத்து:i}=s0(),{$மொ:s}=i(),{choisirObservationAléatoire:a,exporterDonnées:o,contribuer:c,effacerDonnées:l}=Hde(),u=ht(!1),f=Te(()=>zO.find(A=>A.id===p.value?.station)),h=ht(!1),d=async()=>{h.value=!0,await o(),h.value=!1},g=ht(!1),p=ht();Qs(()=>{g.value=!!p.value});const m=ht(!1);let y;const v=async({idStation:A}={})=>{y=A;const C=a({idStation:A,idPrésente:p.value?.id});p.value=C,C||(m.value=!0)},_=ht(!1),x=async A=>{if(!p.value)throw new Error("Observation non sélectionnée");_.value=!0,await c({précip:A,obs:p.value}),n.value?v({idStation:y}):p.value=void 0,_.value=!1};return(A,C)=>(pr(),Qr(p6,{"n-etapes":A.nEtapes,etape:A.etape,onRetour:C[13]||(C[13]=()=>r("retour")),onAvancer:C[14]||(C[14]=()=>r("avancer"))},{default:mt(()=>[ue(ua,{cols:12},{default:mt(()=>[ue(Gg,{class:"px-6",variant:"flat"},{default:mt(()=>[Bs("div",xet,xi(ct(s)("démo.titre")),1),ct(n)?qo("",!0):(pr(),Qr(j7,{key:0},{activator:mt(({props:R})=>[ue(Jc,gr(R,{icon:"mdi-cog",variant:"flat"}),null,16)]),default:mt(()=>[ue(Wy,null,{default:mt(()=>[ct(n)?qo("",!0):(pr(),Qr(Uo,{key:0,"prepend-icon":"mdi-download",title:ct(s)("démo.indiceTélécharger"),onClick:C[0]||(C[0]=()=>d())},null,8,["title"])),ue(Uo,{class:"text-error",title:ct(s)("démo.effacerDonnées"),onClick:C[1]||(C[1]=()=>ct(l)())},{prepend:mt(()=>[ue(Fn,{icon:"mdi-delete"})]),_:1},8,["title"]),ue(CZ,null,{activator:mt(({props:R})=>[ue(Uo,gr(R,{title:ct(s)("Networking"),"prepend-icon":"mdi-lan"}),null,16,["title"])]),_:1})]),_:1})]),_:1}))]),_:1}),ue(Ffe,{class:"my-4"})]),_:1}),ct(n)?(pr(),Qr(ua,{key:0,cols:ct(n)?6:12},{default:mt(()=>[ue(Gg,{class:"px-6",variant:"flat",height:"65vh",style:{"overflow-y":"scroll"}},{default:mt(()=>[Bs("div",Eet,[Mn(xi(ct(s)("démo.sousTitre"))+" ",1),ue(B$e),ct(n)?(pr(),Qr(Jc,{key:0,icon:"mdi-download",variant:"flat",loading:h.value,onClick:C[2]||(C[2]=()=>d())},null,8,["loading"])):qo("",!0),qo("",!0),ue(j7,null,{activator:mt(({props:R})=>[ue(Jc,gr(R,{icon:"mdi-cog",variant:"flat"}),null,16)]),default:mt(()=>[ue(Wy,null,{default:mt(()=>[ct(n)?qo("",!0):(pr(),Qr(Uo,{key:0,"prepend-icon":"mdi-download",title:ct(s)("démo.indiceTélécharger"),onClick:C[4]||(C[4]=()=>d())},null,8,["title"])),ue(CZ,null,{activator:mt(({props:R})=>[ue(Uo,gr(R,{title:ct(s)("Networking"),"prepend-icon":"mdi-lan"}),null,16,["title"])]),_:1}),ue(Uo,{class:"text-error",title:ct(s)("démo.effacerDonnées"),onClick:C[5]||(C[5]=()=>ct(l)())},{prepend:mt(()=>[ue(Fn,{icon:"mdi-delete"})]),_:1},8,["title"])]),_:1})]),_:1})]),ue(Pm,{class:"px-0"},{default:mt(()=>[f.value?(pr(),Qr(vfe,{key:0},{default:mt(()=>[ue(ua,{cols:8},{default:mt(()=>[ue(Hy,{src:p.value?.image},null,8,["src"])]),_:1}),ue(ua,{cols:4},{default:mt(()=>[ue(kZ,{station:f.value,observation:p.value,"en-soumission":_.value,onSoumettre:C[6]||(C[6]=R=>x(R.précip)),onPrendrePhoto:C[7]||(C[7]=()=>v())},null,8,["station","observation","en-soumission"])]),_:1})]),_:1})):(pr(),jg("div",Aet,[Mn(xi(ct(s)(m.value?"démo.plusDePhotos":"démo.choisirStation"))+" ",1),C[15]||(C[15]=Bs("br",null,null,-1)),ue(Jc,{icon:"mdi-camera-outline",variant:"flat",onClick:C[8]||(C[8]=()=>v())})]))]),_:1})]),_:1})]),_:1},8,["cols"])):(pr(),Qr(Wde,{key:1,modelValue:g.value,"onUpdate:modelValue":C[11]||(C[11]=R=>g.value=R)},{default:mt(()=>[ue(kZ,{station:f.value,observation:p.value,"en-soumission":_.value,onSoumettre:C[9]||(C[9]=R=>x(R.précip)),onPrendrePhoto:C[10]||(C[10]=()=>v())},null,8,["station","observation","en-soumission"])]),_:1},8,["modelValue"])),ue(ua,{cols:ct(n)?6:12},{default:mt(()=>[Bs("div",{class:"mx-auto",style:Uv({height:ct(n)?"65vh":"60vh",width:ct(n)?"50vw":"100vw"})},[ue(ct(DWe),{ref:"map",zoom:10,center:[27.6461574,85.3402103],useGlobalLeaflet:!1},{default:mt(()=>[ue(ct(KWe),{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png","layer-type":"base",name:"OpenStreetMap"}),(pr(!0),jg(qr,null,a7(ct(zO),R=>(pr(),Qr(vet,{key:R.id,coords:R.coords,"id-station":R.id,onPrendrePhoto:()=>v({idStation:R.id})},null,8,["coords","id-station","onPrendrePhoto"]))),128))]),_:1},512)],4)]),_:1},8,["cols"]),ue(ua,{cols:12,class:"my-0 py-0"},{default:mt(()=>[Bs("div",{class:"px-6 text-disabled",onClick:C[12]||(C[12]=()=>ct(FS)("https://data.smartphones4water.org/"))},[Mn(xi(ct(s)("démo.source"))+" ",1),ue(Fn,{class:"mx-2",size:"small",icon:"mdi-open-in-new"}),Mn(" "+xi(ct(s)("démo.merci"))+" ",1),ue(Fn,{class:"mx-2",icon:"mdi-emoticon-happy-outline",size:"small"})])]),_:1})]),_:1},8,["n-etapes","etape"]))}}),ket={class:"d-flex justify-center flex-wrap mb-6"};const Cet=Di({__name:"SectionCode",props:{nEtapes:{},etape:{}},emits:["retour","avancer"],setup(t,{emit:e}){const r=e,{mdAndUp:n}=n0(),{மொழியாக்கம்_பயன்படுத்து:i}=s0(),{$மொ:s}=i({}),a=w$(),o=Tg(a.bds.rechercherBdsParNuée,{idNuée:od}),c=Te(()=>o.value?`https://appli.réseau-constellation.ca/#/données/bd/${encodeURIComponent(o.value[0])}`:void 0);return(l,u)=>(pr(),Qr(p6,{"n-etapes":l.nEtapes,etape:l.etape,onRetour:u[1]||(u[1]=()=>r("retour")),onAvancer:u[2]||(u[2]=()=>r("avancer"))},{default:mt(()=>[ue(ua,{class:ku([ct(n)?"text-h2":"text-h3","text-center"]),cols:12},{default:mt(()=>[Mn(xi(ct(s)("code.titre")),1)]),_:1},8,["class"]),ue(ua,{cols:12},{default:mt(()=>[Bs("div",ket,[c.value?(pr(),Qr(dg,{key:0,titre:ct(s)("code.options.appli"),icône:"mdi-link",lien:c.value,emphase:""},null,8,["titre","lien"])):qo("",!0),qo("",!0),qo("",!0),qo("",!0)])]),_:1}),ue(ua,{cols:12,class:"text-center text-h6"},{default:mt(()=>[Mn(xi(ct(s)("code.conclusion"))+" ",1),u[3]||(u[3]=Bs("br",null,null,-1)),ue(Fn,{icon:"mdi-email-outline",start:"",onClick:u[0]||(u[0]=()=>ct(FS)(`mailto://${ct(jX)}`))}),Mn(" "+xi(ct(jX)),1)]),_:1})]),_:1},8,["n-etapes","etape"]))}}),dw=5,Iet=Di({__name:"PagePrincipale",setup(t){const e=ht(0),r=ht();return Ai(async()=>{r.value=await Uhe()}),(n,i)=>(pr(),Qr(V$e,{modelValue:e.value,"onUpdate:modelValue":i[10]||(i[10]=s=>e.value=s),direction:"vertical",style:{height:"100%"},disabled:""},{default:mt(()=>[ue(RVe,{"n-etapes":dw,etape:0,onRetour:i[0]||(i[0]=s=>e.value--),onAvancer:i[1]||(i[1]=s=>e.value++)}),ue(Tet,{"n-etapes":dw,etape:1,onRetour:i[2]||(i[2]=s=>e.value--),onAvancer:i[3]||(i[3]=s=>e.value++)}),ue(vWe,{"n-etapes":dw,etape:2,onRetour:i[4]||(i[4]=s=>e.value--),onAvancer:i[5]||(i[5]=s=>e.value++)}),ue(_We,{"n-etapes":dw,etape:3,onRetour:i[6]||(i[6]=s=>e.value--),onAvancer:i[7]||(i[7]=s=>e.value++)}),ue(Cet,{"n-etapes":dw,etape:4,onRetour:i[8]||(i[8]=s=>e.value--),onAvancer:i[9]||(i[9]=s=>e.value++)})]),_:1},8,["modelValue"]))}}),Ret=[{path:"/",component:Iet}],Kde=RIe({history:aIe(),routes:Ret});Kde.afterEach(t=>{const{lg:e}=t.query;if(e&&typeof e=="string"){const{மொழிகளை_தேர்ந்தெடுக்கொள்ளு:r}=Kv();r(e)}});var Gde={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function i(c,l,u){this.fn=c,this.context=l,this.once=u||!1}function s(c,l,u,f,h){if(typeof u!="function")throw new TypeError("The listener must be a function");var d=new i(u,f||c,h),g=r?r+l:l;return c._events[g]?c._events[g].fn?c._events[g]=[c._events[g],d]:c._events[g].push(d):(c._events[g]=d,c._eventsCount++),c}function a(c,l){--c._eventsCount===0?c._events=new n:delete c._events[l]}function o(){this._events=new n,this._eventsCount=0}o.prototype.eventNames=function(){var l=[],u,f;if(this._eventsCount===0)return l;for(f in u=this._events)e.call(u,f)&&l.push(r?f.slice(1):f);return Object.getOwnPropertySymbols?l.concat(Object.getOwnPropertySymbols(u)):l},o.prototype.listeners=function(l){var u=r?r+l:l,f=this._events[u];if(!f)return[];if(f.fn)return[f.fn];for(var h=0,d=f.length,g=new Array(d);h<d;h++)g[h]=f[h].fn;return g},o.prototype.listenerCount=function(l){var u=r?r+l:l,f=this._events[u];return f?f.fn?1:f.length:0},o.prototype.emit=function(l,u,f,h,d,g){var p=r?r+l:l;if(!this._events[p])return!1;var m=this._events[p],y=arguments.length,v,_;if(m.fn){switch(m.once&&this.removeListener(l,m.fn,void 0,!0),y){case 1:return m.fn.call(m.context),!0;case 2:return m.fn.call(m.context,u),!0;case 3:return m.fn.call(m.context,u,f),!0;case 4:return m.fn.call(m.context,u,f,h),!0;case 5:return m.fn.call(m.context,u,f,h,d),!0;case 6:return m.fn.call(m.context,u,f,h,d,g),!0}for(_=1,v=new Array(y-1);_<y;_++)v[_-1]=arguments[_];m.fn.apply(m.context,v)}else{var x=m.length,A;for(_=0;_<x;_++)switch(m[_].once&&this.removeListener(l,m[_].fn,void 0,!0),y){case 1:m[_].fn.call(m[_].context);break;case 2:m[_].fn.call(m[_].context,u);break;case 3:m[_].fn.call(m[_].context,u,f);break;case 4:m[_].fn.call(m[_].context,u,f,h);break;default:if(!v)for(A=1,v=new Array(y-1);A<y;A++)v[A-1]=arguments[A];m[_].fn.apply(m[_].context,v)}}return!0},o.prototype.on=function(l,u,f){return s(this,l,u,f,!1)},o.prototype.once=function(l,u,f){return s(this,l,u,f,!0)},o.prototype.removeListener=function(l,u,f,h){var d=r?r+l:l;if(!this._events[d])return this;if(!u)return a(this,d),this;var g=this._events[d];if(g.fn)g.fn===u&&(!h||g.once)&&(!f||g.context===f)&&a(this,d);else{for(var p=0,m=[],y=g.length;p<y;p++)(g[p].fn!==u||h&&!g[p].once||f&&g[p].context!==f)&&m.push(g[p]);m.length?this._events[d]=m.length===1?m[0]:m:a(this,d)}return this},o.prototype.removeAllListeners=function(l){var u;return l?(u=r?r+l:l,this._events[u]&&a(this,u)):(this._events=new n,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=r,o.EventEmitter=o,t.exports=o})(Gde);var Pet=Gde.exports;const Bet=si(Pet);class _$ extends Error{constructor(e){super(e),this.name="TimeoutError"}}let Det=class extends Error{constructor(e){super(),this.name="AbortError",this.message=e}};const IZ=t=>globalThis.DOMException===void 0?new Det(t):new DOMException(t),RZ=t=>{const e=t.reason===void 0?IZ("This operation was aborted."):t.reason;return e instanceof Error?e:IZ(e)};function T6(t,e){const{milliseconds:r,fallback:n,message:i,customTimers:s={setTimeout,clearTimeout}}=e;let a;const c=new Promise((l,u)=>{if(typeof r!="number"||Math.sign(r)!==1)throw new TypeError(`Expected \`milliseconds\` to be a positive number, got \`${r}\``);if(e.signal){const{signal:h}=e;h.aborted&&u(RZ(h)),h.addEventListener("abort",()=>{u(RZ(h))})}if(r===Number.POSITIVE_INFINITY){t.then(l,u);return}const f=new _$;a=s.setTimeout.call(void 0,()=>{if(n){try{l(n())}catch(h){u(h)}return}typeof t.cancel=="function"&&t.cancel(),i===!1?l():i instanceof Error?u(i):(f.message=i??`Promise timed out after ${r} milliseconds`,u(f))},r),(async()=>{try{l(await t)}catch(h){u(h)}})()}).finally(()=>{c.clear()});return c.clear=()=>{s.clearTimeout.call(void 0,a),a=void 0},c}function Oet(t,e,r){let n=0,i=t.length;for(;i>0;){const s=Math.trunc(i/2);let a=n+s;r(t[a],e)<=0?(n=++a,i-=s+1):i=s}return n}let Net=class{#e=[];enqueue(e,r){r={priority:0,...r};const n={priority:r.priority,run:e};if(this.size&&this.#e[this.size-1].priority>=r.priority){this.#e.push(n);return}const i=Oet(this.#e,n,(s,a)=>a.priority-s.priority);this.#e.splice(i,0,n)}dequeue(){return this.#e.shift()?.run}filter(e){return this.#e.filter(r=>r.priority===e.priority).map(r=>r.run)}get size(){return this.#e.length}};class sh extends Bet{#e;#t;#r=0;#i;#o;#l=0;#s;#u;#n;#g;#a=0;#f;#c;#m;timeout;constructor(e){if(super(),e={carryoverConcurrencyCount:!1,intervalCap:Number.POSITIVE_INFINITY,interval:0,concurrency:Number.POSITIVE_INFINITY,autoStart:!0,queueClass:Net,...e},!(typeof e.intervalCap=="number"&&e.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${e.intervalCap?.toString()??""}\` (${typeof e.intervalCap})`);if(e.interval===void 0||!(Number.isFinite(e.interval)&&e.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${e.interval?.toString()??""}\` (${typeof e.interval})`);this.#e=e.carryoverConcurrencyCount,this.#t=e.intervalCap===Number.POSITIVE_INFINITY||e.interval===0,this.#i=e.intervalCap,this.#o=e.interval,this.#n=new e.queueClass,this.#g=e.queueClass,this.concurrency=e.concurrency,this.timeout=e.timeout,this.#m=e.throwOnTimeout===!0,this.#c=e.autoStart===!1}get#b(){return this.#t||this.#r<this.#i}get#w(){return this.#a<this.#f}#_(){this.#a--,this.#h(),this.emit("next")}#x(){this.#v(),this.#y(),this.#u=void 0}get#E(){const e=Date.now();if(this.#s===void 0){const r=this.#l-e;if(r<0)this.#r=this.#e?this.#a:0;else return this.#u===void 0&&(this.#u=setTimeout(()=>{this.#x()},r)),!0}return!1}#h(){if(this.#n.size===0)return this.#s&&clearInterval(this.#s),this.#s=void 0,this.emit("empty"),this.#a===0&&this.emit("idle"),!1;if(!this.#c){const e=!this.#E;if(this.#b&&this.#w){const r=this.#n.dequeue();return r?(this.emit("active"),r(),e&&this.#y(),!0):!1}}return!1}#y(){this.#t||this.#s!==void 0||(this.#s=setInterval(()=>{this.#v()},this.#o),this.#l=Date.now()+this.#o)}#v(){this.#r===0&&this.#a===0&&this.#s&&(clearInterval(this.#s),this.#s=void 0),this.#r=this.#e?this.#a:0,this.#d()}#d(){for(;this.#h(););}get concurrency(){return this.#f}set concurrency(e){if(!(typeof e=="number"&&e>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${e}\` (${typeof e})`);this.#f=e,this.#d()}async#S(e){return new Promise((r,n)=>{e.addEventListener("abort",()=>{n(e.reason)},{once:!0})})}async add(e,r={}){return r={timeout:this.timeout,throwOnTimeout:this.#m,...r},new Promise((n,i)=>{this.#n.enqueue(async()=>{this.#a++,this.#r++;try{r.signal?.throwIfAborted();let s=e({signal:r.signal});r.timeout&&(s=T6(Promise.resolve(s),{milliseconds:r.timeout})),r.signal&&(s=Promise.race([s,this.#S(r.signal)]));const a=await s;n(a),this.emit("completed",a)}catch(s){if(s instanceof _$&&!r.throwOnTimeout){n();return}i(s),this.emit("error",s)}finally{this.#_()}},r),this.emit("add"),this.#h()})}async addAll(e,r){return Promise.all(e.map(async n=>this.add(n,r)))}start(){return this.#c?(this.#c=!1,this.#d(),this):this}pause(){this.#c=!0}clear(){this.#n=new this.#g}async onEmpty(){this.#n.size!==0&&await this.#p("empty")}async onSizeLessThan(e){this.#n.size<e||await this.#p("next",()=>this.#n.size<e)}async onIdle(){this.#a===0&&this.#n.size===0||await this.#p("idle")}async#p(e,r){return new Promise(n=>{const i=()=>{r&&!r()||(this.off(e,i),n())};this.on(e,i)})}get size(){return this.#n.size}sizeBy(e){return this.#n.filter(e).length}get pending(){return this.#a}get isPaused(){return this.#c}}function fn(){const t={};return t.promise=new Promise((e,r)=>{t.resolve=e,t.reject=r}),t}class PZ{buffer;mask;top;btm;next;constructor(e){if(!(e>0)||e-1&e)throw new Error("Max size for a FixedFIFO should be a power of two");this.buffer=new Array(e),this.mask=e-1,this.top=0,this.btm=0,this.next=null}push(e){return this.buffer[this.top]!==void 0?!1:(this.buffer[this.top]=e,this.top=this.top+1&this.mask,!0)}shift(){const e=this.buffer[this.btm];if(e!==void 0)return this.buffer[this.btm]=void 0,this.btm=this.btm+1&this.mask,e}isEmpty(){return this.buffer[this.btm]===void 0}}class nI{size;hwm;head;tail;constructor(e={}){this.hwm=e.splitLimit??16,this.head=new PZ(this.hwm),this.tail=this.head,this.size=0}calculateSize(e){return e?.byteLength!=null?e.byteLength:1}push(e){if(e?.value!=null&&(this.size+=this.calculateSize(e.value)),!this.head.push(e)){const r=this.head;this.head=r.next=new PZ(2*this.head.buffer.length),this.head.push(e)}}shift(){let e=this.tail.shift();if(e===void 0&&this.tail.next!=null){const r=this.tail.next;this.tail.next=null,this.tail=r,e=this.tail.shift()}return e?.value!=null&&(this.size-=this.calculateSize(e.value)),e}isEmpty(){return this.head.isEmpty()}}let Met=class extends Error{type;code;constructor(e,r){super(e??"The operation was aborted"),this.type="aborted",this.code=r??"ABORT_ERR"}};function qu(t={}){return Let(r=>{const n=r.shift();if(n==null)return{done:!0};if(n.error!=null)throw n.error;return{done:n.done===!0,value:n.value}},t)}function Let(t,e){e=e??{};let r=e.onEnd,n=new nI,i,s,a,o=fn();const c=async()=>{try{return n.isEmpty()?a?{done:!0}:await new Promise((m,y)=>{s=v=>{s=null,n.push(v);try{m(t(n))}catch(_){y(_)}return i}}):t(n)}finally{n.isEmpty()&&queueMicrotask(()=>{o.resolve(),o=fn()})}},l=m=>s!=null?s(m):(n.push(m),i),u=m=>(n=new nI,s!=null?s({error:m}):(n.push({error:m}),i)),f=m=>{if(a)return i;if(e?.objectMode!==!0&&m?.byteLength==null)throw new Error("objectMode was not true but tried to push non-Uint8Array value");return l({done:!1,value:m})},h=m=>a?i:(a=!0,m!=null?u(m):l({done:!0})),d=()=>(n=new nI,h(),{done:!0}),g=m=>(h(m),{done:!0});if(i={[Symbol.asyncIterator](){return this},next:c,return:d,throw:g,push:f,end:h,get readableLength(){return n.size},onEmpty:async m=>{const y=m?.signal;if(y?.throwIfAborted(),n.isEmpty())return;let v,_;y!=null&&(v=new Promise((x,A)=>{_=()=>{A(new Met)},y.addEventListener("abort",_)}));try{await Promise.race([o.promise,v])}finally{_!=null&&y!=null&&y?.removeEventListener("abort",_)}}},r==null)return i;const p=i;return i={[Symbol.asyncIterator](){return this},next(){return p.next()},throw(m){return p.throw(m),r!=null&&(r(m),r=void 0),{done:!0}},return(){return p.return(),r!=null&&(r(),r=void 0),{done:!0}},push:f,end(m){return p.end(m),r!=null&&(r(m),r=void 0),i},get readableLength(){return p.readableLength},onEmpty:m=>p.onEmpty(m)},i}function Fet(t){return t[Symbol.asyncIterator]!=null}function T1(...t){const e=[];for(const r of t)Fet(r)||e.push(r);return e.length===t.length?function*(){for(const r of e)yield*r}():async function*(){const r=qu({objectMode:!0});Promise.resolve().then(async()=>{try{await Promise.all(t.map(async n=>{for await(const i of n)r.push(i)})),r.end()}catch(n){r.end(n)}}),yield*r}()}function is(t,...e){if(t==null)throw new Error("Empty pipeline");if(iI(t)){const n=t;t=()=>n.source}else if(Xde(t)||Yde(t)){const n=t;t=()=>n}const r=[t,...e];if(r.length>1&&iI(r[r.length-1])&&(r[r.length-1]=r[r.length-1].sink),r.length>2)for(let n=1;n<r.length-1;n++)iI(r[n])&&(r[n]=Uet(r[n]));return $et(...r)}const $et=(...t)=>{let e;for(;t.length>0;)e=t.shift()(e);return e},Yde=t=>t?.[Symbol.asyncIterator]!=null,Xde=t=>t?.[Symbol.iterator]!=null,iI=t=>t==null?!1:t.sink!=null&&t.source!=null,Uet=t=>e=>{const r=t.sink(e);if(r?.then!=null){const n=qu({objectMode:!0});r.then(()=>{n.end()},a=>{n.end(a)});let i;const s=t.source;if(Yde(s))i=async function*(){yield*s,n.end()};else if(Xde(s))i=function*(){yield*s,n.end()};else throw new Error("Unknown duplex source type - must be Iterable or AsyncIterable");return T1(n,i())}return t.source};var Vet=function(){return Date.now()};const q_=Vet;class jet{constructor(e,r,n){const i=this;this._started=q_(),this._rescheduled=0,this._scheduled=r,this._args=n,this._triggered=!1,this._timerWrapper=()=>{i._rescheduled>0?(i._scheduled=i._rescheduled-(q_()-i._started),i._schedule(i._scheduled)):(i._triggered=!0,e.apply(null,i._args))},this._timer=setTimeout(this._timerWrapper,r)}reschedule(e){e||(e=this._scheduled);const r=q_();r+e-(this._started+this._scheduled)<0?(clearTimeout(this._timer),this._schedule(e)):this._triggered?this._schedule(e):(this._started=r,this._rescheduled=e)}_schedule(e){this._triggered=!1,this._started=q_(),this._rescheduled=0,this._scheduled=e,this._timer=setTimeout(this._timerWrapper,e)}clear(){clearTimeout(this._timer)}}function zet(){if(typeof arguments[0]!="function")throw new Error("callback needed");if(typeof arguments[1]!="number")throw new Error("timeout needed");let t;if(arguments.length>0){t=new Array(arguments.length-2);for(var e=0;e<t.length;e++)t[e]=arguments[e+2]}return new jet(arguments[0],arguments[1],t)}var qet=zet;const{AbortController:Het}=globalThis,BZ=qet;class x$ extends Het{constructor(e){super(),this._ms=e,this._timer=BZ(()=>this.abort(),e),Object.setPrototypeOf(this,x$.prototype)}abort(){return this._timer.clear(),super.abort()}clear(){this._timer.clear()}reset(){this._timer.clear(),this._timer=BZ(()=>this.abort(),this._ms)}}var qO={TimeoutController:x$};const k1=(...t)=>t.join("/").replace(/((?<=\/)\/+)|(^\.\/)|((?<=\/)\.\/)/g,"")||".",Wet=3e4,Ket=async({ipfs:t,log:e,events:r,onSynced:n,start:i,timeout:s})=>{if(!t)throw new Error("An instance of ipfs is required.");if(!e)throw new Error("An instance of log is required.");const a=t.libp2p,o=t.libp2p.services.pubsub,c=e.id,l=k1("/orbitdb/heads/",c),u=new sh({concurrency:1}),f=new Set;r=r||new qi.EventEmitter,s=s||Wet;let h=!1;const d=async C=>{const R=await e.heads();r.emit("join",C,R)},g=C=>async function*(){const R=await e.heads();for await(const{bytes:M}of R)yield M}(),p=C=>async R=>{for await(const M of R){const N=M.subarray();N&&n&&await n(N)}h&&await d(C)},m=async({connection:C,stream:R})=>{const M=String(C.remotePeer);try{f.add(M),await is(R,p(M),g,R)}catch(N){f.delete(M),r.emit("error",N)}},y=async C=>{const R=async()=>{const{peerId:M,subscriptions:N}=C.detail,Y=String(M),H=N.find(E=>E.topic===c);if(H)if(H.subscribe){if(f.has(Y))return;const E=new qO.TimeoutController(s),{signal:k}=E;try{f.add(Y);const w=await a.dialProtocol(M,l,{signal:k});await is(g,w,p(Y))}catch(w){console.error(w),f.delete(Y),w.code==="ERR_UNSUPPORTED_PROTOCOL"||r.emit("error",w)}finally{E&&E.clear()}}else f.delete(Y),r.emit("leave",Y)};u.add(R)},v=async C=>{const{topic:R,data:M}=C.detail,N=async()=>{try{M&&n&&await n(M)}catch(Y){r.emit("error",Y)}};R===c&&u.add(N)},_=async C=>{h&&await o.publish(c,C.bytes)},x=async()=>{h&&(h=!1,await u.onIdle(),o.removeEventListener("subscription-change",y),o.removeEventListener("message",v),await a.unhandle(l),await o.unsubscribe(c),f.clear())},A=async()=>{h||(await a.handle(l,m),o.addEventListener("subscription-change",y),o.addEventListener("message",v),await o.subscribe(c),h=!0)};return i!==!1&&await A(),{add:_,stop:x,start:A,events:r,peers:f}};var HO={exports:{}};typeof Object.create=="function"?HO.exports=function(e,r){r&&(e.super_=r,e.prototype=Object.create(r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:HO.exports=function(e,r){if(r){e.super_=r;var n=function(){};n.prototype=r.prototype,e.prototype=new n,e.prototype.constructor=e}};var xr=HO.exports,Zde=qi,Get=xr,Yet=il;function il(t){if(!(this instanceof il))return new il(t);typeof t=="number"&&(t={max:t}),t||(t={}),Zde.EventEmitter.call(this),this.cache={},this.head=this.tail=null,this.length=0,this.max=t.max||1e3,this.maxAge=t.maxAge||0}Get(il,Zde.EventEmitter);Object.defineProperty(il.prototype,"keys",{get:function(){return Object.keys(this.cache)}});il.prototype.clear=function(){this.cache={},this.head=this.tail=null,this.length=0};il.prototype.remove=function(t){if(typeof t!="string"&&(t=""+t),!!this.cache.hasOwnProperty(t)){var e=this.cache[t];return delete this.cache[t],this._unlink(t,e.prev,e.next),e.value}};il.prototype._unlink=function(t,e,r){this.length--,this.length===0?this.head=this.tail=null:this.head===t?(this.head=e,this.cache[this.head].next=null):this.tail===t?(this.tail=r,this.cache[this.tail].prev=null):(this.cache[e].next=r,this.cache[r].prev=e)};il.prototype.peek=function(t){if(this.cache.hasOwnProperty(t)){var e=this.cache[t];if(this._checkAge(t,e))return e.value}};il.prototype.set=function(t,e){typeof t!="string"&&(t=""+t);var r;if(this.cache.hasOwnProperty(t)){if(r=this.cache[t],r.value=e,this.maxAge&&(r.modified=Date.now()),t===this.head)return e;this._unlink(t,r.prev,r.next)}else r={value:e,modified:0,next:null,prev:null},this.maxAge&&(r.modified=Date.now()),this.cache[t]=r,this.length===this.max&&this.evict();return this.length++,r.next=null,r.prev=this.head,this.head&&(this.cache[this.head].next=t),this.head=t,this.tail||(this.tail=t),e};il.prototype._checkAge=function(t,e){return this.maxAge&&Date.now()-e.modified>this.maxAge?(this.remove(t),this.emit("evict",{key:t,value:e.value}),!1):!0};il.prototype.get=function(t){if(typeof t!="string"&&(t=""+t),!!this.cache.hasOwnProperty(t)){var e=this.cache[t];if(this._checkAge(t,e))return this.head!==t&&(t===this.tail?(this.tail=e.next,this.cache[this.tail].prev=null):this.cache[e.prev].next=e.next,this.cache[e.next].prev=e.prev,this.cache[this.head].next=t,e.prev=this.head,e.next=null,this.head=t),e.value}};il.prototype.evict=function(){if(this.tail){var t=this.tail,e=this.remove(this.tail);this.emit("evict",{key:t,value:e})}};const WO=si(Yet),Xet=(t,e)=>{const r=t.time-e.time;return r===0&&t.id!==e.id?t.id<e.id?-1:1:r},Zet=t=>zS(t.id,++t.time),zS=(t,e)=>(e=e||0,{id:t,time:e}),Jet=(t,e)=>{if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0},E$=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")};function Qet(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<t.length;i++){var s=t.charAt(i),a=s.charCodeAt(0);if(r[a]!==255)throw new TypeError(s+" is ambiguous");r[a]=i}var o=t.length,c=t.charAt(0),l=Math.log(o)/Math.log(256),u=Math.log(256)/Math.log(o);function f(g){if(g instanceof Uint8Array||(ArrayBuffer.isView(g)?g=new Uint8Array(g.buffer,g.byteOffset,g.byteLength):Array.isArray(g)&&(g=Uint8Array.from(g))),!(g instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(g.length===0)return"";for(var p=0,m=0,y=0,v=g.length;y!==v&&g[y]===0;)y++,p++;for(var _=(v-y)*u+1>>>0,x=new Uint8Array(_);y!==v;){for(var A=g[y],C=0,R=_-1;(A!==0||C<m)&&R!==-1;R--,C++)A+=256*x[R]>>>0,x[R]=A%o>>>0,A=A/o>>>0;if(A!==0)throw new Error("Non-zero carry");m=C,y++}for(var M=_-m;M!==_&&x[M]===0;)M++;for(var N=c.repeat(p);M<_;++M)N+=t.charAt(x[M]);return N}function h(g){if(typeof g!="string")throw new TypeError("Expected String");if(g.length===0)return new Uint8Array;var p=0;if(g[p]!==" "){for(var m=0,y=0;g[p]===c;)m++,p++;for(var v=(g.length-p)*l+1>>>0,_=new Uint8Array(v);g[p];){var x=r[g.charCodeAt(p)];if(x===255)return;for(var A=0,C=v-1;(x!==0||A<y)&&C!==-1;C--,A++)x+=o*_[C]>>>0,_[C]=x%256>>>0,x=x/256>>>0;if(x!==0)throw new Error("Non-zero carry");y=A,p++}if(g[p]!==" "){for(var R=v-y;R!==v&&_[R]===0;)R++;for(var M=new Uint8Array(m+(v-R)),N=m;R!==v;)M[N++]=_[R++];return M}}}function d(g){var p=h(g);if(p)return p;throw new Error(`Non-${e} character`)}return{encode:f,decodeUnsafe:h,decode:d}}var ett=Qet,ttt=ett;let rtt=class{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},ntt=class{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return Jde(this,e)}},itt=class{constructor(e){this.decoders=e}or(e){return Jde(this,e)}decode(e){const r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};const Jde=(t,e)=>new itt({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});let stt=class{constructor(e,r,n,i){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=i,this.encoder=new rtt(e,r,n),this.decoder=new ntt(e,r,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};const Qde=({name:t,prefix:e,encode:r,decode:n})=>new stt(t,e,r,n),e0e=({prefix:t,name:e,alphabet:r})=>{const{encode:n,decode:i}=ttt(r,e);return Qde({prefix:t,name:e,encode:n,decode:s=>E$(i(s))})},att=(t,e,r,n)=>{const i={};for(let u=0;u<e.length;++u)i[e[u]]=u;let s=t.length;for(;t[s-1]==="=";)--s;const a=new Uint8Array(s*r/8|0);let o=0,c=0,l=0;for(let u=0;u<s;++u){const f=i[t[u]];if(f===void 0)throw new SyntaxError(`Non-${n} character`);c=c<<r|f,o+=r,o>=8&&(o-=8,a[l++]=255&c>>o)}if(o>=r||255&c<<8-o)throw new SyntaxError("Unexpected end of data");return a},ott=(t,e,r)=>{const n=e[e.length-1]==="=",i=(1<<r)-1;let s="",a=0,o=0;for(let c=0;c<t.length;++c)for(o=o<<8|t[c],a+=8;a>r;)a-=r,s+=e[i&o>>a];if(a&&(s+=e[i&o<<r-a]),n)for(;s.length*r&7;)s+="=";return s},o0=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>Qde({prefix:e,name:t,encode(i){return ott(i,n,r)},decode(i){return att(i,n,r,t)}}),Fx=o0({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5});o0({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5});o0({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5});o0({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5});o0({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5});o0({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5});o0({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5});o0({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5});o0({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});const Vo=e0e({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"});e0e({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var ctt=t0e,DZ=128,ltt=127,utt=~ltt,ftt=Math.pow(2,31);function t0e(t,e,r){e=e||[],r=r||0;for(var n=r;t>=ftt;)e[r++]=t&255|DZ,t/=128;for(;t&utt;)e[r++]=t&255|DZ,t>>>=7;return e[r]=t|0,t0e.bytes=r-n+1,e}var htt=KO,dtt=128,OZ=127;function KO(t,n){var r=0,n=n||0,i=0,s=n,a,o=t.length;do{if(s>=o)throw KO.bytes=0,new RangeError("Could not decode varint");a=t[s++],r+=i<28?(a&OZ)<<i:(a&OZ)*Math.pow(2,i),i+=7}while(a>=dtt);return KO.bytes=s-n,r}var ptt=Math.pow(2,7),gtt=Math.pow(2,14),mtt=Math.pow(2,21),ytt=Math.pow(2,28),vtt=Math.pow(2,35),btt=Math.pow(2,42),wtt=Math.pow(2,49),_tt=Math.pow(2,56),xtt=Math.pow(2,63),Ett=function(t){return t<ptt?1:t<gtt?2:t<mtt?3:t<ytt?4:t<vtt?5:t<btt?6:t<wtt?7:t<_tt?8:t<xtt?9:10},Stt={encode:ctt,decode:htt,encodingLength:Ett},cE=Stt;const GO=(t,e=0)=>[cE.decode(t,e),cE.decode.bytes],lE=(t,e,r=0)=>(cE.encode(t,e,r),e),uE=t=>cE.encodingLength(t),YO=(t,e)=>{const r=e.byteLength,n=uE(t),i=n+uE(r),s=new Uint8Array(i+r);return lE(t,s,0),lE(r,s,n),s.set(e,i),new S$(t,r,e,s)},Att=t=>{const e=E$(t),[r,n]=GO(e),[i,s]=GO(e.subarray(n)),a=e.subarray(n+s);if(a.byteLength!==i)throw new Error("Incorrect length");return new S$(r,i,a,e)},Ttt=(t,e)=>{if(t===e)return!0;{const r=e;return t.code===r.code&&t.size===r.size&&r.bytes instanceof Uint8Array&&Jet(t.bytes,r.bytes)}};let S$=class{constructor(e,r,n,i){this.code=e,this.size=r,this.digest=n,this.bytes=i}};const NZ=(t,e)=>{const{bytes:r,version:n}=t;switch(n){case 0:return Ctt(r,XO(t),e||Vo.encoder);default:return Itt(r,XO(t),e||Fx.encoder)}},MZ=new WeakMap,XO=t=>{const e=MZ.get(t);if(e==null){const r=new Map;return MZ.set(t,r),r}return e};let Hu=class Ja{constructor(e,r,n,i){this.code=r,this.version=e,this.multihash=n,this.bytes=i,this["/"]=i}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{const{code:e,multihash:r}=this;if(e!==pw)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(r.code!==Rtt)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return Ja.createV0(r)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{const{code:e,digest:r}=this.multihash,n=YO(e,r);return Ja.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(e){return Ja.equals(this,e)}static equals(e,r){const n=r;return n&&e.code===n.code&&e.version===n.version&&Ttt(e.multihash,n.multihash)}toString(e){return NZ(this,e)}toJSON(){return{"/":NZ(this)}}link(){return this}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return`CID(${this.toString()})`}static asCID(e){if(e==null)return null;const r=e;if(r instanceof Ja)return r;if(r["/"]!=null&&r["/"]===r.bytes||r.asCID===r){const{version:n,code:i,multihash:s,bytes:a}=r;return new Ja(n,i,s,a||LZ(n,i,s.bytes))}else if(r[Ptt]===!0){const{version:n,multihash:i,code:s}=r,a=Att(i);return Ja.create(n,s,a)}else return null}static create(e,r,n){if(typeof r!="number")throw new Error("String codecs are no longer supported");if(!(n.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(e){case 0:{if(r!==pw)throw new Error(`Version 0 CID must use dag-pb (code: ${pw}) block encoding`);return new Ja(e,r,n,n.bytes)}case 1:{const i=LZ(e,r,n.bytes);return new Ja(e,r,n,i)}default:throw new Error("Invalid version")}}static createV0(e){return Ja.create(0,pw,e)}static createV1(e,r){return Ja.create(1,e,r)}static decode(e){const[r,n]=Ja.decodeFirst(e);if(n.length)throw new Error("Incorrect length");return r}static decodeFirst(e){const r=Ja.inspectBytes(e),n=r.size-r.multihashSize,i=E$(e.subarray(n,n+r.multihashSize));if(i.byteLength!==r.multihashSize)throw new Error("Incorrect length");const s=i.subarray(r.multihashSize-r.digestSize),a=new S$(r.multihashCode,r.digestSize,s,i);return[r.version===0?Ja.createV0(a):Ja.createV1(r.codec,a),e.subarray(r.size)]}static inspectBytes(e){let r=0;const n=()=>{const[f,h]=GO(e.subarray(r));return r+=h,f};let i=n(),s=pw;if(i===18?(i=0,r=0):s=n(),i!==0&&i!==1)throw new RangeError(`Invalid CID version ${i}`);const a=r,o=n(),c=n(),l=r+c,u=l-a;return{version:i,codec:s,multihashCode:o,digestSize:c,multihashSize:u,size:l}}static parse(e,r){const[n,i]=ktt(e,r),s=Ja.decode(i);if(s.version===0&&e[0]!=="Q")throw Error("Version 0 CID string must not include multibase prefix");return XO(s).set(n,e),s}};const ktt=(t,e)=>{switch(t[0]){case"Q":{const r=e||Vo;return[Vo.prefix,r.decode(`${Vo.prefix}${t}`)]}case Vo.prefix:{const r=e||Vo;return[Vo.prefix,r.decode(t)]}case Fx.prefix:{const r=e||Fx;return[Fx.prefix,r.decode(t)]}default:{if(e==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[t[0],e.decode(t)]}}},Ctt=(t,e,r)=>{const{prefix:n}=r;if(n!==Vo.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);const i=e.get(n);if(i==null){const s=r.encode(t).slice(1);return e.set(n,s),s}else return i},Itt=(t,e,r)=>{const{prefix:n}=r,i=e.get(n);if(i==null){const s=r.encode(t);return e.set(n,s),s}else return i},pw=112,Rtt=18,LZ=(t,e,r)=>{const n=uE(t),i=n+uE(e),s=new Uint8Array(i+r.byteLength);return lE(t,s,0),lE(e,s,n),s.set(r,i),s},Ptt=Symbol.for("@ipld/js-cid/CID"),Btt=({name:t,code:e,encode:r})=>new Dtt(t,e,r);let Dtt=class{constructor(e,r,n){this.name=e,this.code=r,this.encode=n}digest(e){if(e instanceof Uint8Array){const r=this.encode(e);return r instanceof Uint8Array?YO(this.code,r):r.then(n=>YO(this.code,n))}else throw Error("Unknown type, must be binary type")}};function H_({enumerable:t=!0,configurable:e=!1}={}){return{enumerable:t,configurable:e,writable:!1}}function*Ott(t,e){if(e!=null&&typeof e=="object")if(Array.isArray(e))for(const[r,n]of e.entries()){const i=[...t,r],s=Hu.asCID(n);s?yield[i.join("/"),s]:typeof n=="object"&&(yield*ZO(n,i))}else{const r=Hu.asCID(e);r?yield[t.join("/"),r]:yield*ZO(e,t)}}function*ZO(t,e){if(t==null||t instanceof Uint8Array)return;const r=Hu.asCID(t);r&&(yield[e.join("/"),r]);for(const[n,i]of Object.entries(t)){const s=[...e,n];yield*Ott(s,i)}}function*Ntt(t,e){if(Array.isArray(e))for(const[r,n]of e.entries()){const i=[...t,r];yield i.join("/"),typeof n=="object"&&!Hu.asCID(n)&&(yield*JO(n,i))}else yield*JO(e,t)}function*JO(t,e){if(!(t==null||typeof t!="object"))for(const[r,n]of Object.entries(t)){const i=[...e,r];yield i.join("/"),n!=null&&!(n instanceof Uint8Array)&&typeof n=="object"&&!Hu.asCID(n)&&(yield*Ntt(i,n))}}function Mtt(t,e){let r=t;for(const[n,i]of e.entries()){if(r=r[i],r==null)throw new Error(`Object has no property at ${e.slice(0,n+1).map(a=>`[${JSON.stringify(a)}]`).join("")}`);const s=Hu.asCID(r);if(s)return{value:s,remaining:e.slice(n+1).join("/")}}return{value:r}}let r0e=class{constructor({cid:e,bytes:r,value:n}){if(!e||!r||typeof n>"u")throw new Error("Missing required argument");this.cid=e,this.bytes=r,this.value=n,this.asBlock=this,Object.defineProperties(this,{cid:H_(),bytes:H_(),value:H_(),asBlock:H_()})}links(){return ZO(this.value,[])}tree(){return JO(this.value,[])}get(e="/"){return Mtt(this.value,e.split("/").filter(Boolean))}};async function tb({value:t,codec:e,hasher:r}){if(typeof t>"u")throw new Error('Missing required argument "value"');if(!e||!r)throw new Error("Missing required argument: codec or hasher");const n=e.encode(t),i=await r.digest(n),s=Hu.create(1,e.code,i);return new r0e({value:t,bytes:n,cid:s})}async function qS({bytes:t,codec:e,hasher:r}){if(!t)throw new Error('Missing required argument "bytes"');if(!e||!r)throw new Error("Missing required argument: codec or hasher");const n=e.decode(t),i=await r.digest(t),s=Hu.create(1,e.code,i);return new r0e({value:n,bytes:t,cid:s})}const Ltt=["string","number","bigint","symbol"],Ftt=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","HTMLElement","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];function $tt(t){if(t===null)return"null";if(t===void 0)return"undefined";if(t===!0||t===!1)return"boolean";const e=typeof t;if(Ltt.includes(e))return e;if(e==="function")return"Function";if(Array.isArray(t))return"Array";if(Utt(t))return"Buffer";const r=Vtt(t);return r||"Object"}function Utt(t){return t&&t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer.call(null,t)}function Vtt(t){const e=Object.prototype.toString.call(t).slice(8,-1);if(Ftt.includes(e))return e}let ze=class{constructor(e,r,n){this.major=e,this.majorEncoded=e<<5,this.name=r,this.terminal=n}toString(){return`Type[${this.major}].${this.name}`}compare(e){return this.major<e.major?-1:this.major>e.major?1:0}};ze.uint=new ze(0,"uint",!0);ze.negint=new ze(1,"negint",!0);ze.bytes=new ze(2,"bytes",!0);ze.string=new ze(3,"string",!0);ze.array=new ze(4,"array",!1);ze.map=new ze(5,"map",!1);ze.tag=new ze(6,"tag",!1);ze.float=new ze(7,"float",!0);ze.false=new ze(7,"false",!0);ze.true=new ze(7,"true",!0);ze.null=new ze(7,"null",!0);ze.undefined=new ze(7,"undefined",!0);ze.break=new ze(7,"break",!0);class kt{constructor(e,r,n){this.type=e,this.value=r,this.encodedLength=n,this.encodedBytes=void 0,this.byteValue=void 0}toString(){return`Token[${this.type}].${this.value}`}}const rb=globalThis.process&&!globalThis.process.browser&&globalThis.Buffer&&typeof globalThis.Buffer.isBuffer=="function",jtt=new TextDecoder,ztt=new TextEncoder;function fE(t){return rb&&globalThis.Buffer.isBuffer(t)}function A$(t){return t instanceof Uint8Array?fE(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t:Uint8Array.from(t)}const qtt=rb?(t,e,r)=>r-e>64?globalThis.Buffer.from(t.subarray(e,r)).toString("utf8"):$Z(t,e,r):(t,e,r)=>r-e>64?jtt.decode(t.subarray(e,r)):$Z(t,e,r),n0e=rb?t=>t.length>64?globalThis.Buffer.from(t):FZ(t):t=>t.length>64?ztt.encode(t):FZ(t),qh=t=>Uint8Array.from(t),T$=rb?(t,e,r)=>fE(t)?new Uint8Array(t.subarray(e,r)):t.slice(e,r):(t,e,r)=>t.slice(e,r),Htt=rb?(t,e)=>(t=t.map(r=>r instanceof Uint8Array?r:globalThis.Buffer.from(r)),A$(globalThis.Buffer.concat(t,e))):(t,e)=>{const r=new Uint8Array(e);let n=0;for(let i of t)n+i.length>r.length&&(i=i.subarray(0,r.length-n)),r.set(i,n),n+=i.length;return r},Wtt=rb?t=>globalThis.Buffer.allocUnsafe(t):t=>new Uint8Array(t);function Ktt(t,e){if(fE(t)&&fE(e))return t.compare(e);for(let r=0;r<t.length;r++)if(t[r]!==e[r])return t[r]<e[r]?-1:1;return 0}function FZ(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let i=t.charCodeAt(n);i<128?e[r++]=i:i<2048?(e[r++]=i>>6|192,e[r++]=i&63|128):(i&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=i>>18|240,e[r++]=i>>12&63|128,e[r++]=i>>6&63|128,e[r++]=i&63|128):(e[r++]=i>>12|224,e[r++]=i>>6&63|128,e[r++]=i&63|128)}return e}function $Z(t,e,r){const n=[];for(;e<r;){const i=t[e];let s=null,a=i>239?4:i>223?3:i>191?2:1;if(e+a<=r){let o,c,l,u;switch(a){case 1:i<128&&(s=i);break;case 2:o=t[e+1],(o&192)===128&&(u=(i&31)<<6|o&63,u>127&&(s=u));break;case 3:o=t[e+1],c=t[e+2],(o&192)===128&&(c&192)===128&&(u=(i&15)<<12|(o&63)<<6|c&63,u>2047&&(u<55296||u>57343)&&(s=u));break;case 4:o=t[e+1],c=t[e+2],l=t[e+3],(o&192)===128&&(c&192)===128&&(l&192)===128&&(u=(i&15)<<18|(o&63)<<12|(c&63)<<6|l&63,u>65535&&u<1114112&&(s=u))}}s===null?(s=65533,a=1):s>65535&&(s-=65536,n.push(s>>>10&1023|55296),s=56320|s&1023),n.push(s),e+=a}return i0e(n)}const UZ=4096;function i0e(t){const e=t.length;if(e<=UZ)return String.fromCharCode.apply(String,t);let r="",n=0;for(;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=UZ));return r}const Gtt=256;class s0e{constructor(e=Gtt){this.chunkSize=e,this.cursor=0,this.maxCursor=-1,this.chunks=[],this._initReuseChunk=null}reset(){this.cursor=0,this.maxCursor=-1,this.chunks.length&&(this.chunks=[]),this._initReuseChunk!==null&&(this.chunks.push(this._initReuseChunk),this.maxCursor=this._initReuseChunk.length-1)}push(e){let r=this.chunks[this.chunks.length-1];if(this.cursor+e.length<=this.maxCursor+1){const i=r.length-(this.maxCursor-this.cursor)-1;r.set(e,i)}else{if(r){const i=r.length-(this.maxCursor-this.cursor)-1;i<r.length&&(this.chunks[this.chunks.length-1]=r.subarray(0,i),this.maxCursor=this.cursor-1)}e.length<64&&e.length<this.chunkSize?(r=Wtt(this.chunkSize),this.chunks.push(r),this.maxCursor+=r.length,this._initReuseChunk===null&&(this._initReuseChunk=r),r.set(e,0)):(this.chunks.push(e),this.maxCursor+=e.length)}this.cursor+=e.length}toBytes(e=!1){let r;if(this.chunks.length===1){const n=this.chunks[0];e&&this.cursor>n.length/2?(r=this.cursor===n.length?n:n.subarray(0,this.cursor),this._initReuseChunk=null,this.chunks=[]):r=T$(n,0,this.cursor)}else r=Htt(this.chunks,this.cursor);return e&&this.reset(),r}}const Qt="CBOR decode error:",hE="CBOR encode error:";function nb(t,e,r){if(t.length-e<r)throw new Error(`${Qt} not enough data for type`)}const Ma=[24,256,65536,4294967296,BigInt("18446744073709551616")];function Lm(t,e,r){nb(t,e,1);const n=t[e];if(r.strict===!0&&n<Ma[0])throw new Error(`${Qt} integer encoded in more bytes than necessary (strict decode)`);return n}function Fm(t,e,r){nb(t,e,2);const n=t[e]<<8|t[e+1];if(r.strict===!0&&n<Ma[1])throw new Error(`${Qt} integer encoded in more bytes than necessary (strict decode)`);return n}function $m(t,e,r){nb(t,e,4);const n=t[e]*16777216+(t[e+1]<<16)+(t[e+2]<<8)+t[e+3];if(r.strict===!0&&n<Ma[2])throw new Error(`${Qt} integer encoded in more bytes than necessary (strict decode)`);return n}function Um(t,e,r){nb(t,e,8);const n=t[e]*16777216+(t[e+1]<<16)+(t[e+2]<<8)+t[e+3],i=t[e+4]*16777216+(t[e+5]<<16)+(t[e+6]<<8)+t[e+7],s=(BigInt(n)<<BigInt(32))+BigInt(i);if(r.strict===!0&&s<Ma[3])throw new Error(`${Qt} integer encoded in more bytes than necessary (strict decode)`);if(s<=Number.MAX_SAFE_INTEGER)return Number(s);if(r.allowBigInt===!0)return s;throw new Error(`${Qt} integers outside of the safe integer range are not supported`)}function Ytt(t,e,r,n){return new kt(ze.uint,Lm(t,e+1,n),2)}function Xtt(t,e,r,n){return new kt(ze.uint,Fm(t,e+1,n),3)}function Ztt(t,e,r,n){return new kt(ze.uint,$m(t,e+1,n),5)}function Jtt(t,e,r,n){return new kt(ze.uint,Um(t,e+1,n),9)}function Vm(t,e){return Xl(t,0,e.value)}function Xl(t,e,r){if(r<Ma[0]){const n=Number(r);t.push([e|n])}else if(r<Ma[1]){const n=Number(r);t.push([e|24,n])}else if(r<Ma[2]){const n=Number(r);t.push([e|25,n>>>8,n&255])}else if(r<Ma[3]){const n=Number(r);t.push([e|26,n>>>24&255,n>>>16&255,n>>>8&255,n&255])}else{const n=BigInt(r);if(n<Ma[4]){const i=[e|27,0,0,0,0,0,0,0];let s=Number(n&BigInt(4294967295)),a=Number(n>>BigInt(32)&BigInt(4294967295));i[8]=s&255,s=s>>8,i[7]=s&255,s=s>>8,i[6]=s&255,s=s>>8,i[5]=s&255,i[4]=a&255,a=a>>8,i[3]=a&255,a=a>>8,i[2]=a&255,a=a>>8,i[1]=a&255,t.push(i)}else throw new Error(`${Qt} encountered BigInt larger than allowable range`)}}Vm.encodedSize=function(e){return Xl.encodedSize(e.value)};Xl.encodedSize=function(e){return e<Ma[0]?1:e<Ma[1]?2:e<Ma[2]?3:e<Ma[3]?5:9};Vm.compareTokens=function(e,r){return e.value<r.value?-1:e.value>r.value?1:0};function Qtt(t,e,r,n){return new kt(ze.negint,-1-Lm(t,e+1,n),2)}function ert(t,e,r,n){return new kt(ze.negint,-1-Fm(t,e+1,n),3)}function trt(t,e,r,n){return new kt(ze.negint,-1-$m(t,e+1,n),5)}const k$=BigInt(-1),a0e=BigInt(1);function rrt(t,e,r,n){const i=Um(t,e+1,n);if(typeof i!="bigint"){const s=-1-i;if(s>=Number.MIN_SAFE_INTEGER)return new kt(ze.negint,s,9)}if(n.allowBigInt!==!0)throw new Error(`${Qt} integers outside of the safe integer range are not supported`);return new kt(ze.negint,k$-BigInt(i),9)}function C$(t,e){const r=e.value,n=typeof r=="bigint"?r*k$-a0e:r*-1-1;Xl(t,e.type.majorEncoded,n)}C$.encodedSize=function(e){const r=e.value,n=typeof r=="bigint"?r*k$-a0e:r*-1-1;return n<Ma[0]?1:n<Ma[1]?2:n<Ma[2]?3:n<Ma[3]?5:9};C$.compareTokens=function(e,r){return e.value<r.value?1:e.value>r.value?-1:0};function k6(t,e,r,n){nb(t,e,r+n);const i=T$(t,e+r,e+r+n);return new kt(ze.bytes,i,r+n)}function nrt(t,e,r,n){return k6(t,e,1,r)}function irt(t,e,r,n){return k6(t,e,2,Lm(t,e+1,n))}function srt(t,e,r,n){return k6(t,e,3,Fm(t,e+1,n))}function art(t,e,r,n){return k6(t,e,5,$m(t,e+1,n))}function ort(t,e,r,n){const i=Um(t,e+1,n);if(typeof i=="bigint")throw new Error(`${Qt} 64-bit integer bytes lengths not supported`);return k6(t,e,9,i)}function dE(t){return t.encodedBytes===void 0&&(t.encodedBytes=t.type===ze.string?n0e(t.value):t.value),t.encodedBytes}function HS(t,e){const r=dE(e);Xl(t,e.type.majorEncoded,r.length),t.push(r)}HS.encodedSize=function(e){const r=dE(e);return Xl.encodedSize(r.length)+r.length};HS.compareTokens=function(e,r){return crt(dE(e),dE(r))};function crt(t,e){return t.length<e.length?-1:t.length>e.length?1:Ktt(t,e)}function C6(t,e,r,n,i){const s=r+n;nb(t,e,s);const a=new kt(ze.string,qtt(t,e+r,e+s),s);return i.retainStringBytes===!0&&(a.byteValue=T$(t,e+r,e+s)),a}function lrt(t,e,r,n){return C6(t,e,1,r,n)}function urt(t,e,r,n){return C6(t,e,2,Lm(t,e+1,n),n)}function frt(t,e,r,n){return C6(t,e,3,Fm(t,e+1,n),n)}function hrt(t,e,r,n){return C6(t,e,5,$m(t,e+1,n),n)}function drt(t,e,r,n){const i=Um(t,e+1,n);if(typeof i=="bigint")throw new Error(`${Qt} 64-bit integer string lengths not supported`);return C6(t,e,9,i,n)}const prt=HS;function ib(t,e,r,n){return new kt(ze.array,n,r)}function grt(t,e,r,n){return ib(t,e,1,r)}function mrt(t,e,r,n){return ib(t,e,2,Lm(t,e+1,n))}function yrt(t,e,r,n){return ib(t,e,3,Fm(t,e+1,n))}function vrt(t,e,r,n){return ib(t,e,5,$m(t,e+1,n))}function brt(t,e,r,n){const i=Um(t,e+1,n);if(typeof i=="bigint")throw new Error(`${Qt} 64-bit integer array lengths not supported`);return ib(t,e,9,i)}function wrt(t,e,r,n){if(n.allowIndefinite===!1)throw new Error(`${Qt} indefinite length items not allowed`);return ib(t,e,1,1/0)}function I$(t,e){Xl(t,ze.array.majorEncoded,e.value)}I$.compareTokens=Vm.compareTokens;I$.encodedSize=function(e){return Xl.encodedSize(e.value)};function sb(t,e,r,n){return new kt(ze.map,n,r)}function _rt(t,e,r,n){return sb(t,e,1,r)}function xrt(t,e,r,n){return sb(t,e,2,Lm(t,e+1,n))}function Ert(t,e,r,n){return sb(t,e,3,Fm(t,e+1,n))}function Srt(t,e,r,n){return sb(t,e,5,$m(t,e+1,n))}function Art(t,e,r,n){const i=Um(t,e+1,n);if(typeof i=="bigint")throw new Error(`${Qt} 64-bit integer map lengths not supported`);return sb(t,e,9,i)}function Trt(t,e,r,n){if(n.allowIndefinite===!1)throw new Error(`${Qt} indefinite length items not allowed`);return sb(t,e,1,1/0)}function R$(t,e){Xl(t,ze.map.majorEncoded,e.value)}R$.compareTokens=Vm.compareTokens;R$.encodedSize=function(e){return Xl.encodedSize(e.value)};function krt(t,e,r,n){return new kt(ze.tag,r,1)}function Crt(t,e,r,n){return new kt(ze.tag,Lm(t,e+1,n),2)}function Irt(t,e,r,n){return new kt(ze.tag,Fm(t,e+1,n),3)}function Rrt(t,e,r,n){return new kt(ze.tag,$m(t,e+1,n),5)}function Prt(t,e,r,n){return new kt(ze.tag,Um(t,e+1,n),9)}function P$(t,e){Xl(t,ze.tag.majorEncoded,e.value)}P$.compareTokens=Vm.compareTokens;P$.encodedSize=function(e){return Xl.encodedSize(e.value)};const Brt=20,Drt=21,Ort=22,Nrt=23;function Mrt(t,e,r,n){if(n.allowUndefined===!1)throw new Error(`${Qt} undefined values are not supported`);return n.coerceUndefinedToNull===!0?new kt(ze.null,null,1):new kt(ze.undefined,void 0,1)}function Lrt(t,e,r,n){if(n.allowIndefinite===!1)throw new Error(`${Qt} indefinite length items not allowed`);return new kt(ze.break,void 0,1)}function B$(t,e,r){if(r){if(r.allowNaN===!1&&Number.isNaN(t))throw new Error(`${Qt} NaN values are not supported`);if(r.allowInfinity===!1&&(t===1/0||t===-1/0))throw new Error(`${Qt} Infinity values are not supported`)}return new kt(ze.float,t,e)}function Frt(t,e,r,n){return B$(O$(t,e+1),3,n)}function $rt(t,e,r,n){return B$(N$(t,e+1),5,n)}function Urt(t,e,r,n){return B$(u0e(t,e+1),9,n)}function D$(t,e,r){const n=e.value;if(n===!1)t.push([ze.float.majorEncoded|Brt]);else if(n===!0)t.push([ze.float.majorEncoded|Drt]);else if(n===null)t.push([ze.float.majorEncoded|Ort]);else if(n===void 0)t.push([ze.float.majorEncoded|Nrt]);else{let i,s=!1;(!r||r.float64!==!0)&&(c0e(n),i=O$(gu,1),n===i||Number.isNaN(n)?(gu[0]=249,t.push(gu.slice(0,3)),s=!0):(l0e(n),i=N$(gu,1),n===i&&(gu[0]=250,t.push(gu.slice(0,5)),s=!0))),s||(Vrt(n),i=u0e(gu,1),gu[0]=251,t.push(gu.slice(0,9)))}}D$.encodedSize=function(e,r){const n=e.value;if(n===!1||n===!0||n===null||n===void 0)return 1;if(!r||r.float64!==!0){c0e(n);let i=O$(gu,1);if(n===i||Number.isNaN(n))return 3;if(l0e(n),i=N$(gu,1),n===i)return 5}return 9};const o0e=new ArrayBuffer(9),Cl=new DataView(o0e,1),gu=new Uint8Array(o0e,0);function c0e(t){if(t===1/0)Cl.setUint16(0,31744,!1);else if(t===-1/0)Cl.setUint16(0,64512,!1);else if(Number.isNaN(t))Cl.setUint16(0,32256,!1);else{Cl.setFloat32(0,t);const e=Cl.getUint32(0),r=(e&2139095040)>>23,n=e&8388607;if(r===255)Cl.setUint16(0,31744,!1);else if(r===0)Cl.setUint16(0,(t&2147483648)>>16|n>>13,!1);else{const i=r-127;i<-24?Cl.setUint16(0,0):i<-14?Cl.setUint16(0,(e&2147483648)>>16|1<<24+i,!1):Cl.setUint16(0,(e&2147483648)>>16|i+15<<10|n>>13,!1)}}}function O$(t,e){if(t.length-e<2)throw new Error(`${Qt} not enough data for float16`);const r=(t[e]<<8)+t[e+1];if(r===31744)return 1/0;if(r===64512)return-1/0;if(r===32256)return NaN;const n=r>>10&31,i=r&1023;let s;return n===0?s=i*2**-24:n!==31?s=(i+1024)*2**(n-25):s=i===0?1/0:NaN,r&32768?-s:s}function l0e(t){Cl.setFloat32(0,t,!1)}function N$(t,e){if(t.length-e<4)throw new Error(`${Qt} not enough data for float32`);const r=(t.byteOffset||0)+e;return new DataView(t.buffer,r,4).getFloat32(0,!1)}function Vrt(t){Cl.setFloat64(0,t,!1)}function u0e(t,e){if(t.length-e<8)throw new Error(`${Qt} not enough data for float64`);const r=(t.byteOffset||0)+e;return new DataView(t.buffer,r,8).getFloat64(0,!1)}D$.compareTokens=Vm.compareTokens;function Dn(t,e,r){throw new Error(`${Qt} encountered invalid minor (${r}) for major ${t[e]>>>5}`)}function WS(t){return()=>{throw new Error(`${Qt} ${t}`)}}const St=[];for(let t=0;t<=23;t++)St[t]=Dn;St[24]=Ytt;St[25]=Xtt;St[26]=Ztt;St[27]=Jtt;St[28]=Dn;St[29]=Dn;St[30]=Dn;St[31]=Dn;for(let t=32;t<=55;t++)St[t]=Dn;St[56]=Qtt;St[57]=ert;St[58]=trt;St[59]=rrt;St[60]=Dn;St[61]=Dn;St[62]=Dn;St[63]=Dn;for(let t=64;t<=87;t++)St[t]=nrt;St[88]=irt;St[89]=srt;St[90]=art;St[91]=ort;St[92]=Dn;St[93]=Dn;St[94]=Dn;St[95]=WS("indefinite length bytes/strings are not supported");for(let t=96;t<=119;t++)St[t]=lrt;St[120]=urt;St[121]=frt;St[122]=hrt;St[123]=drt;St[124]=Dn;St[125]=Dn;St[126]=Dn;St[127]=WS("indefinite length bytes/strings are not supported");for(let t=128;t<=151;t++)St[t]=grt;St[152]=mrt;St[153]=yrt;St[154]=vrt;St[155]=brt;St[156]=Dn;St[157]=Dn;St[158]=Dn;St[159]=wrt;for(let t=160;t<=183;t++)St[t]=_rt;St[184]=xrt;St[185]=Ert;St[186]=Srt;St[187]=Art;St[188]=Dn;St[189]=Dn;St[190]=Dn;St[191]=Trt;for(let t=192;t<=215;t++)St[t]=krt;St[216]=Crt;St[217]=Irt;St[218]=Rrt;St[219]=Prt;St[220]=Dn;St[221]=Dn;St[222]=Dn;St[223]=Dn;for(let t=224;t<=243;t++)St[t]=WS("simple values are not supported");St[244]=Dn;St[245]=Dn;St[246]=Dn;St[247]=Mrt;St[248]=WS("simple values are not supported");St[249]=Frt;St[250]=$rt;St[251]=Urt;St[252]=Dn;St[253]=Dn;St[254]=Dn;St[255]=Lrt;const bh=[];for(let t=0;t<24;t++)bh[t]=new kt(ze.uint,t,1);for(let t=-1;t>=-24;t--)bh[31-t]=new kt(ze.negint,t,1);bh[64]=new kt(ze.bytes,new Uint8Array(0),1);bh[96]=new kt(ze.string,"",1);bh[128]=new kt(ze.array,0,1);bh[160]=new kt(ze.map,0,1);bh[244]=new kt(ze.false,!1,1);bh[245]=new kt(ze.true,!0,1);bh[246]=new kt(ze.null,null,1);function jrt(t){switch(t.type){case ze.false:return qh([244]);case ze.true:return qh([245]);case ze.null:return qh([246]);case ze.bytes:return t.value.length?void 0:qh([64]);case ze.string:return t.value===""?qh([96]):void 0;case ze.array:return t.value===0?qh([128]):void 0;case ze.map:return t.value===0?qh([160]):void 0;case ze.uint:return t.value<24?qh([Number(t.value)]):void 0;case ze.negint:if(t.value>=-24)return qh([31-Number(t.value)])}}const zrt={float64:!1,mapSorter:Wrt,quickEncodeToken:jrt};function qrt(){const t=[];return t[ze.uint.major]=Vm,t[ze.negint.major]=C$,t[ze.bytes.major]=HS,t[ze.string.major]=prt,t[ze.array.major]=I$,t[ze.map.major]=R$,t[ze.tag.major]=P$,t[ze.float.major]=D$,t}const f0e=qrt(),sI=new s0e;class pE{constructor(e,r){this.obj=e,this.parent=r}includes(e){let r=this;do if(r.obj===e)return!0;while(r=r.parent);return!1}static createCheck(e,r){if(e&&e.includes(r))throw new Error(`${hE} object contains circular references`);return new pE(r,e)}}const D0={null:new kt(ze.null,null),undefined:new kt(ze.undefined,void 0),true:new kt(ze.true,!0),false:new kt(ze.false,!1),emptyArray:new kt(ze.array,0),emptyMap:new kt(ze.map,0)},F1={number(t,e,r,n){return!Number.isInteger(t)||!Number.isSafeInteger(t)?new kt(ze.float,t):t>=0?new kt(ze.uint,t):new kt(ze.negint,t)},bigint(t,e,r,n){return t>=BigInt(0)?new kt(ze.uint,t):new kt(ze.negint,t)},Uint8Array(t,e,r,n){return new kt(ze.bytes,t)},string(t,e,r,n){return new kt(ze.string,t)},boolean(t,e,r,n){return t?D0.true:D0.false},null(t,e,r,n){return D0.null},undefined(t,e,r,n){return D0.undefined},ArrayBuffer(t,e,r,n){return new kt(ze.bytes,new Uint8Array(t))},DataView(t,e,r,n){return new kt(ze.bytes,new Uint8Array(t.buffer,t.byteOffset,t.byteLength))},Array(t,e,r,n){if(!t.length)return r.addBreakTokens===!0?[D0.emptyArray,new kt(ze.break)]:D0.emptyArray;n=pE.createCheck(n,t);const i=[];let s=0;for(const a of t)i[s++]=$x(a,r,n);return r.addBreakTokens?[new kt(ze.array,t.length),i,new kt(ze.break)]:[new kt(ze.array,t.length),i]},Object(t,e,r,n){const i=e!=="Object",s=i?t.keys():Object.keys(t),a=i?t.size:s.length;if(!a)return r.addBreakTokens===!0?[D0.emptyMap,new kt(ze.break)]:D0.emptyMap;n=pE.createCheck(n,t);const o=[];let c=0;for(const l of s)o[c++]=[$x(l,r,n),$x(i?t.get(l):t[l],r,n)];return Hrt(o,r),r.addBreakTokens?[new kt(ze.map,a),o,new kt(ze.break)]:[new kt(ze.map,a),o]}};F1.Map=F1.Object;F1.Buffer=F1.Uint8Array;for(const t of"Uint8Clamped Uint16 Uint32 Int8 Int16 Int32 BigUint64 BigInt64 Float32 Float64".split(" "))F1[`${t}Array`]=F1.DataView;function $x(t,e={},r){const n=$tt(t),i=e&&e.typeEncoders&&e.typeEncoders[n]||F1[n];if(typeof i=="function"){const a=i(t,n,e,r);if(a!=null)return a}const s=F1[n];if(!s)throw new Error(`${hE} unsupported type: ${n}`);return s(t,n,e,r)}function Hrt(t,e){e.mapSorter&&t.sort(e.mapSorter)}function Wrt(t,e){const r=Array.isArray(t[0])?t[0][0]:t[0],n=Array.isArray(e[0])?e[0][0]:e[0];if(r.type!==n.type)return r.type.compare(n.type);const i=r.type.major,s=f0e[i].compareTokens(r,n);return s===0&&console.warn("WARNING: complex key types used, CBOR key sorting guarantees are gone"),s}function h0e(t,e,r,n){if(Array.isArray(e))for(const i of e)h0e(t,i,r,n);else r[e.type.major](t,e,n)}function Krt(t,e,r){const n=$x(t,r);if(!Array.isArray(n)&&r.quickEncodeToken){const i=r.quickEncodeToken(n);if(i)return i;const s=e[n.type.major];if(s.encodedSize){const a=s.encodedSize(n,r),o=new s0e(a);if(s(o,n,r),o.chunks.length!==1)throw new Error(`Unexpected error: pre-calculated length for ${n} was wrong`);return A$(o.chunks[0])}}return sI.reset(),h0e(sI,n,e,r),sI.toBytes(!0)}function QO(t,e){return e=Object.assign({},zrt,e),Krt(t,f0e,e)}const Grt={strict:!1,allowIndefinite:!0,allowUndefined:!0,allowBigInt:!0};class Yrt{constructor(e,r={}){this._pos=0,this.data=e,this.options=r}pos(){return this._pos}done(){return this._pos>=this.data.length}next(){const e=this.data[this._pos];let r=bh[e];if(r===void 0){const n=St[e];if(!n)throw new Error(`${Qt} no decoder for major type ${e>>>5} (byte 0x${e.toString(16).padStart(2,"0")})`);const i=e&31;r=n(this.data,this._pos,i,this.options)}return this._pos+=r.encodedLength,r}}const h4=Symbol.for("DONE"),KS=Symbol.for("BREAK");function Xrt(t,e,r){const n=[];for(let i=0;i<t.value;i++){const s=d4(e,r);if(s===KS){if(t.value===1/0)break;throw new Error(`${Qt} got unexpected break to lengthed array`)}if(s===h4)throw new Error(`${Qt} found array but not enough entries (got ${i}, expected ${t.value})`);n[i]=s}return n}function Zrt(t,e,r){const n=r.useMaps===!0,i=n?void 0:{},s=n?new Map:void 0;for(let a=0;a<t.value;a++){const o=d4(e,r);if(o===KS){if(t.value===1/0)break;throw new Error(`${Qt} got unexpected break to lengthed map`)}if(o===h4)throw new Error(`${Qt} found map but not enough entries (got ${a} [no key], expected ${t.value})`);if(n!==!0&&typeof o!="string")throw new Error(`${Qt} non-string keys not supported (got ${typeof o})`);if(r.rejectDuplicateMapKeys===!0&&(n&&s.has(o)||!n&&o in i))throw new Error(`${Qt} found repeat map key "${o}"`);const c=d4(e,r);if(c===h4)throw new Error(`${Qt} found map but not enough entries (got ${a} [no value], expected ${t.value})`);n?s.set(o,c):i[o]=c}return n?s:i}function d4(t,e){if(t.done())return h4;const r=t.next();if(r.type===ze.break)return KS;if(r.type.terminal)return r.value;if(r.type===ze.array)return Xrt(r,t,e);if(r.type===ze.map)return Zrt(r,t,e);if(r.type===ze.tag){if(e.tags&&typeof e.tags[r.value]=="function"){const n=d4(t,e);return e.tags[r.value](n)}throw new Error(`${Qt} tag not supported (${r.value})`)}throw new Error("unsupported")}function Jrt(t,e){if(!(t instanceof Uint8Array))throw new Error(`${Qt} data to decode must be a Uint8Array`);e=Object.assign({},Grt,e);const r=e.tokenizer||new Yrt(t,e),n=d4(r,e);if(n===h4)throw new Error(`${Qt} did not find any content to decode`);if(n===KS)throw new Error(`${Qt} got unexpected break`);return[n,t.subarray(r.pos())]}function kg(t,e){const[r,n]=Jrt(t,e);if(n.length>0)throw new Error(`${Qt} too many terminals, data makes no sense`);return r}const Qrt=new Uint8Array(0);function ent(t){const e=t.match(/../g);return e!=null?new Uint8Array(e.map(r=>parseInt(r,16))):Qrt}function tnt(t,e){if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0}function ab(t){if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")}function rnt(t){return new TextEncoder().encode(t)}function nnt(t){return new TextDecoder().decode(t)}function int(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<t.length;i++){var s=t.charAt(i),a=s.charCodeAt(0);if(r[a]!==255)throw new TypeError(s+" is ambiguous");r[a]=i}var o=t.length,c=t.charAt(0),l=Math.log(o)/Math.log(256),u=Math.log(256)/Math.log(o);function f(g){if(g instanceof Uint8Array||(ArrayBuffer.isView(g)?g=new Uint8Array(g.buffer,g.byteOffset,g.byteLength):Array.isArray(g)&&(g=Uint8Array.from(g))),!(g instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(g.length===0)return"";for(var p=0,m=0,y=0,v=g.length;y!==v&&g[y]===0;)y++,p++;for(var _=(v-y)*u+1>>>0,x=new Uint8Array(_);y!==v;){for(var A=g[y],C=0,R=_-1;(A!==0||C<m)&&R!==-1;R--,C++)A+=256*x[R]>>>0,x[R]=A%o>>>0,A=A/o>>>0;if(A!==0)throw new Error("Non-zero carry");m=C,y++}for(var M=_-m;M!==_&&x[M]===0;)M++;for(var N=c.repeat(p);M<_;++M)N+=t.charAt(x[M]);return N}function h(g){if(typeof g!="string")throw new TypeError("Expected String");if(g.length===0)return new Uint8Array;var p=0;if(g[p]!==" "){for(var m=0,y=0;g[p]===c;)m++,p++;for(var v=(g.length-p)*l+1>>>0,_=new Uint8Array(v);g[p];){var x=r[g.charCodeAt(p)];if(x===255)return;for(var A=0,C=v-1;(x!==0||A<y)&&C!==-1;C--,A++)x+=o*_[C]>>>0,_[C]=x%256>>>0,x=x/256>>>0;if(x!==0)throw new Error("Non-zero carry");y=A,p++}if(g[p]!==" "){for(var R=v-y;R!==v&&_[R]===0;)R++;for(var M=new Uint8Array(m+(v-R)),N=m;R!==v;)M[N++]=_[R++];return M}}}function d(g){var p=h(g);if(p)return p;throw new Error(`Non-${e} character`)}return{encode:f,decodeUnsafe:h,decode:d}}var snt=int,ant=snt;let ont=class{name;prefix;baseEncode;constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},cnt=class{name;prefix;baseDecode;prefixCodePoint;constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return d0e(this,e)}};class lnt{decoders;constructor(e){this.decoders=e}or(e){return d0e(this,e)}decode(e){const r=e[0],n=this.decoders[r];if(n!=null)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}function d0e(t,e){return new lnt({...t.decoders??{[t.prefix]:t},...e.decoders??{[e.prefix]:e}})}class unt{name;prefix;baseEncode;baseDecode;encoder;decoder;constructor(e,r,n,i){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=i,this.encoder=new ont(e,r,n),this.decoder=new cnt(e,r,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}function GS({name:t,prefix:e,encode:r,decode:n}){return new unt(t,e,r,n)}function I6({name:t,prefix:e,alphabet:r}){const{encode:n,decode:i}=ant(r,t);return GS({prefix:e,name:t,encode:n,decode:s=>ab(i(s))})}function fnt(t,e,r,n){const i={};for(let u=0;u<e.length;++u)i[e[u]]=u;let s=t.length;for(;t[s-1]==="=";)--s;const a=new Uint8Array(s*r/8|0);let o=0,c=0,l=0;for(let u=0;u<s;++u){const f=i[t[u]];if(f===void 0)throw new SyntaxError(`Non-${n} character`);c=c<<r|f,o+=r,o>=8&&(o-=8,a[l++]=255&c>>o)}if(o>=r||255&c<<8-o)throw new SyntaxError("Unexpected end of data");return a}function hnt(t,e,r){const n=e[e.length-1]==="=",i=(1<<r)-1;let s="",a=0,o=0;for(let c=0;c<t.length;++c)for(o=o<<8|t[c],a+=8;a>r;)a-=r,s+=e[i&o>>a];if(a!==0&&(s+=e[i&o<<r-a]),n)for(;s.length*r&7;)s+="=";return s}function ja({name:t,prefix:e,bitsPerChar:r,alphabet:n}){return GS({prefix:e,name:t,encode(i){return hnt(i,n,r)},decode(i){return fnt(i,n,r,t)}})}const Ho=ja({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),p0e=ja({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),dnt=ja({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),pnt=ja({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),gnt=ja({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),mnt=ja({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),ynt=ja({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),vnt=ja({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),bnt=ja({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),wnt=Object.freeze(Object.defineProperty({__proto__:null,base32:Ho,base32hex:gnt,base32hexpad:ynt,base32hexpadupper:vnt,base32hexupper:mnt,base32pad:dnt,base32padupper:pnt,base32upper:p0e,base32z:bnt},Symbol.toStringTag,{value:"Module"})),Md=I6({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),_nt=I6({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),xnt=Object.freeze(Object.defineProperty({__proto__:null,base36:Md,base36upper:_nt},Symbol.toStringTag,{value:"Module"})),Rs=I6({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Ent=I6({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),Snt=Object.freeze(Object.defineProperty({__proto__:null,base58btc:Rs,base58flickr:Ent},Symbol.toStringTag,{value:"Module"}));var Ant=g0e,VZ=128,Tnt=127,knt=~Tnt,Cnt=Math.pow(2,31);function g0e(t,e,r){e=e||[],r=r||0;for(var n=r;t>=Cnt;)e[r++]=t&255|VZ,t/=128;for(;t&knt;)e[r++]=t&255|VZ,t>>>=7;return e[r]=t|0,g0e.bytes=r-n+1,e}var Int=eN,Rnt=128,jZ=127;function eN(t,n){var r=0,n=n||0,i=0,s=n,a,o=t.length;do{if(s>=o)throw eN.bytes=0,new RangeError("Could not decode varint");a=t[s++],r+=i<28?(a&jZ)<<i:(a&jZ)*Math.pow(2,i),i+=7}while(a>=Rnt);return eN.bytes=s-n,r}var Pnt=Math.pow(2,7),Bnt=Math.pow(2,14),Dnt=Math.pow(2,21),Ont=Math.pow(2,28),Nnt=Math.pow(2,35),Mnt=Math.pow(2,42),Lnt=Math.pow(2,49),Fnt=Math.pow(2,56),$nt=Math.pow(2,63),Unt=function(t){return t<Pnt?1:t<Bnt?2:t<Dnt?3:t<Ont?4:t<Nnt?5:t<Mnt?6:t<Lnt?7:t<Fnt?8:t<$nt?9:10},Vnt={encode:Ant,decode:Int,encodingLength:Unt},gE=Vnt;function tN(t,e=0){return[gE.decode(t,e),gE.decode.bytes]}function mE(t,e,r=0){return gE.encode(t,e,r),e}function yE(t){return gE.encodingLength(t)}function Jg(t,e){const r=e.byteLength,n=yE(t),i=n+yE(r),s=new Uint8Array(i+r);return mE(t,s,0),mE(r,s,n),s.set(e,i),new M$(t,r,e,s)}function c0(t){const e=ab(t),[r,n]=tN(e),[i,s]=tN(e.subarray(n)),a=e.subarray(n+s);if(a.byteLength!==i)throw new Error("Incorrect length");return new M$(r,i,a,e)}function jnt(t,e){if(t===e)return!0;{const r=e;return t.code===r.code&&t.size===r.size&&r.bytes instanceof Uint8Array&&tnt(t.bytes,r.bytes)}}class M${code;size;digest;bytes;constructor(e,r,n,i){this.code=e,this.size=r,this.digest=n,this.bytes=i}}function zZ(t,e){const{bytes:r,version:n}=t;switch(n){case 0:return qnt(r,rN(t),e??Rs.encoder);default:return Hnt(r,rN(t),e??Ho.encoder)}}const qZ=new WeakMap;function rN(t){const e=qZ.get(t);if(e==null){const r=new Map;return qZ.set(t,r),r}return e}class Dt{code;version;multihash;bytes;"/";constructor(e,r,n,i){this.code=r,this.version=e,this.multihash=n,this.bytes=i,this["/"]=i}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{const{code:e,multihash:r}=this;if(e!==gw)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(r.code!==Wnt)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return Dt.createV0(r)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{const{code:e,digest:r}=this.multihash,n=Jg(e,r);return Dt.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(e){return Dt.equals(this,e)}static equals(e,r){const n=r;return n!=null&&e.code===n.code&&e.version===n.version&&jnt(e.multihash,n.multihash)}toString(e){return zZ(this,e)}toJSON(){return{"/":zZ(this)}}link(){return this}[Symbol.toStringTag]="CID";[Symbol.for("nodejs.util.inspect.custom")](){return`CID(${this.toString()})`}static asCID(e){if(e==null)return null;const r=e;if(r instanceof Dt)return r;if(r["/"]!=null&&r["/"]===r.bytes||r.asCID===r){const{version:n,code:i,multihash:s,bytes:a}=r;return new Dt(n,i,s,a??HZ(n,i,s.bytes))}else if(r[Knt]===!0){const{version:n,multihash:i,code:s}=r,a=c0(i);return Dt.create(n,s,a)}else return null}static create(e,r,n){if(typeof r!="number")throw new Error("String codecs are no longer supported");if(!(n.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(e){case 0:{if(r!==gw)throw new Error(`Version 0 CID must use dag-pb (code: ${gw}) block encoding`);return new Dt(e,r,n,n.bytes)}case 1:{const i=HZ(e,r,n.bytes);return new Dt(e,r,n,i)}default:throw new Error("Invalid version")}}static createV0(e){return Dt.create(0,gw,e)}static createV1(e,r){return Dt.create(1,e,r)}static decode(e){const[r,n]=Dt.decodeFirst(e);if(n.length!==0)throw new Error("Incorrect length");return r}static decodeFirst(e){const r=Dt.inspectBytes(e),n=r.size-r.multihashSize,i=ab(e.subarray(n,n+r.multihashSize));if(i.byteLength!==r.multihashSize)throw new Error("Incorrect length");const s=i.subarray(r.multihashSize-r.digestSize),a=new M$(r.multihashCode,r.digestSize,s,i);return[r.version===0?Dt.createV0(a):Dt.createV1(r.codec,a),e.subarray(r.size)]}static inspectBytes(e){let r=0;const n=()=>{const[f,h]=tN(e.subarray(r));return r+=h,f};let i=n(),s=gw;if(i===18?(i=0,r=0):s=n(),i!==0&&i!==1)throw new RangeError(`Invalid CID version ${i}`);const a=r,o=n(),c=n(),l=r+c,u=l-a;return{version:i,codec:s,multihashCode:o,digestSize:c,multihashSize:u,size:l}}static parse(e,r){const[n,i]=znt(e,r),s=Dt.decode(i);if(s.version===0&&e[0]!=="Q")throw Error("Version 0 CID string must not include multibase prefix");return rN(s).set(n,e),s}}function znt(t,e){switch(t[0]){case"Q":{const r=e??Rs;return[Rs.prefix,r.decode(`${Rs.prefix}${t}`)]}case Rs.prefix:{const r=e??Rs;return[Rs.prefix,r.decode(t)]}case Ho.prefix:{const r=e??Ho;return[Ho.prefix,r.decode(t)]}case Md.prefix:{const r=e??Md;return[Md.prefix,r.decode(t)]}default:{if(e==null)throw Error("To parse non base32, base36 or base58btc encoded CID multibase decoder must be provided");return[t[0],e.decode(t)]}}}function qnt(t,e,r){const{prefix:n}=r;if(n!==Rs.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);const i=e.get(n);if(i==null){const s=r.encode(t).slice(1);return e.set(n,s),s}else return i}function Hnt(t,e,r){const{prefix:n}=r,i=e.get(n);if(i==null){const s=r.encode(t);return e.set(n,s),s}else return i}const gw=112,Wnt=18;function HZ(t,e,r){const n=yE(t),i=n+yE(e),s=new Uint8Array(i+r.byteLength);return mE(t,s,0),mE(e,s,n),s.set(r,i),s}const Knt=Symbol.for("@ipld/js-cid/CID"),m0e=42;function y0e(t){return t instanceof ArrayBuffer?new Uint8Array(t,0,t.byteLength):t}function Gnt(t){if(t.asCID!==t&&t["/"]!==t.bytes)return null;const e=Dt.asCID(t);if(!e)return null;const r=new Uint8Array(e.bytes.byteLength+1);return r.set(e.bytes,1),[new kt(ze.tag,m0e),new kt(ze.bytes,r)]}function Ynt(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")}function Xnt(t){if(Number.isNaN(t))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(t===1/0||t===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}const nN={float64:!0,typeEncoders:{Object:Gnt,undefined:Ynt,number:Xnt}},Znt={...nN,typeEncoders:{...nN.typeEncoders}};function Jnt(t){if(t[0]!==0)throw new Error("Invalid CID for CBOR tag 42; expected leading 0x00");return Dt.decode(t.subarray(1))}const vE={allowIndefinite:!1,coerceUndefinedToNull:!0,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,rejectDuplicateMapKeys:!0,tags:[]};vE.tags[m0e]=Jnt;const Qnt={...vE,tags:vE.tags.slice()},eit="dag-cbor",L$=113,tit=t=>QO(t,nN),v0e=t=>kg(y0e(t),vE),ob=Object.freeze(Object.defineProperty({__proto__:null,code:L$,decode:v0e,decodeOptions:Qnt,encode:tit,encodeOptions:Znt,name:eit,toByteView:y0e},Symbol.toStringTag,{value:"Module"})),rit=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),YS=Btt({name:"sha2-256",code:18,encode:rit("SHA-256")}),XS=ob,ZS=YS,nit=Vo,iit=async(t,e,r,n=null,i=[],s=[])=>{if(t==null)throw new Error("Identity is required, cannot create entry");if(e==null)throw new Error("Entry requires an id");if(r==null)throw new Error("Entry requires a payload");if(i==null||!Array.isArray(i))throw new Error("'next' argument is not an array");n=n||zS(t.publicKey);const a={id:e,payload:r,next:i,refs:s,clock:n,v:2},{bytes:o}=await tb({value:a,codec:XS,hasher:ZS}),c=await t.sign(t,o);return a.key=t.publicKey,a.identity=t.hash,a.sig=c,F$(a)},sit=async(t,e)=>{if(!t)throw new Error("Identities is required, cannot verify entry");if(!b0e(e))throw new Error("Invalid Log entry");if(!e.key)throw new Error("Entry doesn't have a key");if(!e.sig)throw new Error("Entry doesn't have a signature");const r={id:e.id,payload:e.payload,next:e.next,refs:e.refs,clock:e.clock,v:e.v},{bytes:n}=await tb({value:r,codec:XS,hasher:ZS});return t.verify(e.sig,e.key,n)},b0e=t=>t&&t.id!==void 0&&t.next!==void 0&&t.payload!==void 0&&t.v!==void 0&&t.clock!==void 0&&t.refs!==void 0,ait=(t,e)=>t&&e&&t.hash===e.hash,oit=async t=>{const{value:e}=await qS({bytes:t,codec:XS,hasher:ZS});return F$(e)},F$=async t=>{const{cid:e,bytes:r}=await tb({value:t,codec:XS,hasher:ZS}),n=e.toString(nit),i=zS(t.clock.id,t.clock.time);return{...t,clock:i,hash:n,bytes:r}},Of={create:iit,verify:sit,decode:oit,encode:F$,isEntry:b0e,isEqual:ait},$$=async()=>{let t={};const e=async(c,l)=>{t[c]=l};return{put:e,del:async c=>{delete t[c]},get:async c=>t[c],iterator:async function*(){for await(const[c,l]of Object.entries(t))yield[c,l]},merge:async c=>{if(c)for await(const[l,u]of c.iterator())e(l,u)},clear:async()=>{t={}},close:async()=>{}}},cit=$$,lit=async({storage:t,heads:e})=>{t=t||await cit();const r=async u=>{u=WZ(u);for(const f of u)await t.put(f.hash,f.bytes)},n=async u=>{await t.clear(),await r(u)},i=async u=>{const f=await o();if(f.find(d=>Of.isEqual(d,u)))return;const h=WZ([...f,u]);return await n(h),h},s=async u=>{const h=(await o()).filter(d=>d.hash!==u);await n(h)},a=async function*(){const u=t.iterator();for await(const[,f]of u)yield await Of.decode(f)},o=async()=>{const u=[];for await(const f of a())u.push(f);return u},c=async()=>{await t.clear()},l=async()=>{await t.close()};return await r(e||[]),{put:r,set:n,add:i,remove:s,iterator:a,all:o,clear:c,close:l}},WZ=t=>{t=new Set(t);const e={};for(const n of t)for(const i of n.next)e[i]=n.hash;const r=[];for(const n of t)e[n.hash]||r.push(n);return r};function uit(t,e){const r=(s,a)=>s,n=(s,a)=>_0e(s,a,r);return((s,a)=>w0e(s,a,n))(t,e)}function w0e(t,e,r){const n=Xet(t.clock,e.clock);return n===0?r(t,e):n}function _0e(t,e,r){return t.clock.id===e.clock.id?r(t,e):t.clock.id<e.clock.id?-1:1}function fit(t){const e=`Your log's tiebreaker function, ${t.name}, has returned zero and therefore cannot be`;return(n,i)=>{const s=t(n,i);if(s===0)throw Error(e);return s}}const hit={SortByClocks:w0e,SortByClockId:_0e,LastWriteWins:uit,NoZeroes:fit},{LastWriteWins:dit,NoZeroes:pit}=hit,git=()=>new Date().getTime().toString(),mit=(t,e)=>Math.max(t,e.clock.time),aI=$$,yit=async()=>({canAppend:async t=>!0}),vit=async(t,{logId:e,logHeads:r,access:n,entryStorage:i,headsStorage:s,indexStorage:a,sortFn:o}={})=>{if(t==null)throw new Error("Identity is required");if(r!=null&&!Array.isArray(r))throw new Error("'logHeads' argument must be an array");const c=e||git();n=n||await yit();const l=i||await aI(),u=a||await aI();s=s||await aI();const f=await lit({storage:s,heads:r});o=pit(o||dit);const h=new sh({concurrency:1}),d=new sh({concurrency:1}),g=async()=>{const E=Math.max(0,(await p()).reduce(mit,0));return zS(t.publicKey,E)},p=async()=>(await f.all()).sort(o).reverse(),m=async()=>{const E=[];for await(const k of C())E.unshift(k);return E},y=async E=>{const k=await l.get(E);if(k)return await Of.decode(k)},v=async E=>await u.get(E)!=null,_=async(E,k={referencesCount:0})=>{const w=async()=>{const T=await p(),L=T.map(D=>D.hash),I=await H(T,k.referencesCount+T.length),U=await Of.create(t,c,E,Zet(await g()),L,I);if(!await n.canAppend(U))throw new Error(`Could not append entry:
Key "${t.hash}" is not allowed to write to the log`);return await f.set([U]),await l.put(U.hash,U.bytes),await u.put(U.hash,!0),U};return h.add(w)},x=async E=>{if(!E)throw new Error("Log instance not defined");if(!Y(E))throw new Error("Given argument is not an instance of Log");l.merge&&await l.merge(E.storage);const k=await E.heads();for(const w of k)await A(w)},A=async E=>{const k=async()=>{if(await v(E.hash))return!1;const T=async P=>{if(P.id!==c)throw new Error(`Entry's id (${P.id}) doesn't match the log's id (${c}).`);if(!await n.canAppend(P))throw new Error(`Could not append entry:
Key "${P.identity}" is not allowed to write to the log`);if(!await Of.verify(t,P))throw new Error(`Could not validate signature for entry "${P.hash}"`)};await T(E);const L=(await p()).map(P=>P.hash),I=new Set([E.hash]),U=new Set([...E.next,...E.refs]),O=new Set,D=async()=>{const P=Array.from(U.values()).filter(v).map(y),B=await Promise.all(P);for(const z of B){U.delete(z.hash),await T(z),I.add(z.hash);for(const F of[...z.next,...z.refs])!await v(F)&&!I.has(F)?U.add(F):L.includes(F)&&O.add(F)}U.size>0&&await D()};await D();for(const P of I.values())await u.put(P,!0);for(const P of O.values())await f.remove(P);return await f.add(E),!0};return d.add(k)},C=async function*(E,k,w=!0){k=k||(()=>!1),E=E||await p();let L=E.sort(o);const I={};let U=[];const O={},D=B=>!(I[B]||O[B]);let P;for(;L.length>0;)if(L=L.sort(o),P=L.pop(),P){const{hash:B,next:z,refs:F}=P;if(!I[B]){if(yield P,await k(P)===!0)break;I[B]=!0,O[B]=!0,U=[...U,...z,...w?F:[]].filter(D);const W=G=>{if(!I[G]&&!O[G])return O[G]=!0,y(G)},q=await Promise.all(U.map(W));U=q.filter(G=>G!=null).reduce((G,ee)=>Array.from(new Set([...G,...ee.next,...w?ee.refs:[]])),[]).filter(D),L=[...q,...L]}}},R=async function*({amount:E=-1,gt:k,gte:w,lt:T,lte:L}={}){if(E===0)return;if(typeof L=="string"&&(L=[await y(L)]),typeof T=="string"){const W=await y(T);T=await Promise.all(W.next.map(G=>y(G)))}if(T!=null&&!Array.isArray(T))throw new Error("lt must be a string or an array of Entries");if(L!=null&&!Array.isArray(L))throw new Error("lte must be a string or an array of Entries");const I=(T||L||await p()).filter(W=>W!=null),U=k||w?await y(k||w):null,O=U||E===-1?-1:E;let D=0;const P=async W=>(D++,W?!!(D>=O&&O!==-1||U&&Of.isEqual(W,U)):!1),B=U&&E!==-1&&!T&&!L,z=B?new WO(E+2):null;let F=0;const X=C(I,P);for await(const W of X){const q=T&&Of.isEqual(W,I),G=k&&Of.isEqual(W,U);q||G||(B?z.set(F++,W.hash):yield W)}if(B){const W=z.keys.length,q=W>E?W-E:0,G=z.keys.slice(q,W);for(const ee of G){const ae=z.get(ee);yield await y(ae)}}},M=async()=>{await u.clear(),await f.clear(),await l.clear()},N=async()=>{await u.close(),await f.close(),await l.close()},Y=E=>E&&E.id!==void 0&&E.clock!==void 0&&E.heads!==void 0&&E.values!==void 0&&E.access!==void 0&&E.identity!==void 0&&E.storage!==void 0,H=async(E,k=0)=>{let w=[];const T=async L=>w.length>=k&&k!==-1;for await(const{hash:L}of C(E,T,!1))w.push(L);return w=w.slice(E.length+1,k),w};return{id:c,clock:g,heads:p,values:m,all:m,get:y,has:v,append:_,join:x,joinEntry:A,traverse:C,iterator:R,clear:M,close:N,access:n,identity:t,storage:l}},Ld=async(t,e)=>({put:async(l,u)=>{await t.put(l,u),await e.put(l,u)},get:async l=>{let u=await t.get(l);return u||(u=await e.get(l),u&&await t.put(l,u)),u},del:async l=>{await t.del(l),await e.del(l)},iterator:async function*({amount:l,reverse:u}={}){const f=[],h={amount:l||-1,reverse:u||!1};for(const d of[t,e])for await(const[g,p]of d.iterator(h))f[g]||(f[g]=!0,yield[g,p])},merge:async l=>{await t.merge(l),await e.merge(l),await l.merge(t),await l.merge(e)},clear:async()=>{await t.clear(),await e.clear()},close:async()=>{await t.close(),await e.close()}});function bit(t){return t[Symbol.asyncIterator]!=null}function $1(t){if(bit(t))return(async()=>{for await(const e of t);})();for(const e of t);}const KZ=3e4,cb=async({ipfs:t,pin:e,timeout:r}={})=>{if(!t)throw new Error("An instance of ipfs is required.");return{put:async(u,f)=>{const h=Hu.parse(u,Vo),{signal:d}=new qO.TimeoutController(r||KZ);await t.blockstore.put(h,f,{signal:d}),e&&!await t.pins.isPinned(h)&&await $1(t.pins.add(h))},del:async u=>{},get:async u=>{const f=Hu.parse(u,Vo),{signal:h}=new qO.TimeoutController(r||KZ),d=await t.blockstore.get(f,{signal:h});if(d)return d},iterator:async function*(){},merge:async u=>{},clear:async()=>{},close:async()=>{}}};var x0e={},op={},JS={},E0e={};E0e.supports=function(...e){const r=e.reduce((n,i)=>Object.assign(n,i),{});return Object.assign(r,{snapshots:r.snapshots||!1,permanence:r.permanence||!1,seek:r.seek||!1,clear:r.clear||!1,getMany:r.getMany||!1,keyIterator:r.keyIterator||!1,valueIterator:r.valueIterator||!1,iteratorNextv:r.iteratorNextv||!1,iteratorAll:r.iteratorAll||!1,status:r.status||!1,createIfMissing:r.createIfMissing||!1,errorIfExists:r.errorIfExists||!1,deferredOpen:r.deferredOpen||!1,promises:r.promises||!1,streams:r.streams||!1,encodings:Object.assign({},r.encodings),events:Object.assign({},r.events),additionalMethods:Object.assign({},r.additionalMethods)})};var S0e={},wh=class extends Error{constructor(e,r){super(e||""),typeof r=="object"&&r!==null&&(r.code&&(this.code=String(r.code)),r.expected&&(this.expected=!0),r.transient&&(this.transient=!0),r.cause&&(this.cause=r.cause)),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}},jm={};let oI=null;var A0e=function(){return oI===null&&(oI={textEncoder:new TextEncoder,textDecoder:new TextDecoder}),oI},R6={},U$={};const cI=wh,wit=new Set(["buffer","view","utf8"]);let _it=class{constructor(e){if(this.encode=e.encode||this.encode,this.decode=e.decode||this.decode,this.name=e.name||this.name,this.format=e.format||this.format,typeof this.encode!="function")throw new TypeError("The 'encode' property must be a function");if(typeof this.decode!="function")throw new TypeError("The 'decode' property must be a function");if(this.encode=this.encode.bind(this),this.decode=this.decode.bind(this),typeof this.name!="string"||this.name==="")throw new TypeError("The 'name' property must be a string");if(typeof this.format!="string"||!wit.has(this.format))throw new TypeError("The 'format' property must be one of 'buffer', 'view', 'utf8'");e.createViewTranscoder&&(this.createViewTranscoder=e.createViewTranscoder),e.createBufferTranscoder&&(this.createBufferTranscoder=e.createBufferTranscoder),e.createUTF8Transcoder&&(this.createUTF8Transcoder=e.createUTF8Transcoder)}get commonName(){return this.name.split("+")[0]}createBufferTranscoder(){throw new cI(`Encoding '${this.name}' cannot be transcoded to 'buffer'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}createViewTranscoder(){throw new cI(`Encoding '${this.name}' cannot be transcoded to 'view'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}createUTF8Transcoder(){throw new cI(`Encoding '${this.name}' cannot be transcoded to 'utf8'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}};U$.Encoding=_it;const{Buffer:V$}=Es||{},{Encoding:j$}=U$,xit=A0e;let z$=class extends j${constructor(e){super({...e,format:"buffer"})}createViewTranscoder(){return new q$({encode:this.encode,decode:e=>this.decode(V$.from(e.buffer,e.byteOffset,e.byteLength)),name:`${this.name}+view`})}createBufferTranscoder(){return this}},q$=class extends j${constructor(e){super({...e,format:"view"})}createBufferTranscoder(){return new z$({encode:e=>{const r=this.encode(e);return V$.from(r.buffer,r.byteOffset,r.byteLength)},decode:this.decode,name:`${this.name}+buffer`})}createViewTranscoder(){return this}},Eit=class extends j${constructor(e){super({...e,format:"utf8"})}createBufferTranscoder(){return new z$({encode:e=>V$.from(this.encode(e),"utf8"),decode:e=>this.decode(e.toString("utf8")),name:`${this.name}+buffer`})}createViewTranscoder(){const{textEncoder:e,textDecoder:r}=xit();return new q$({encode:n=>e.encode(this.encode(n)),decode:n=>this.decode(r.decode(n)),name:`${this.name}+view`})}createUTF8Transcoder(){return this}};R6.BufferFormat=z$;R6.ViewFormat=q$;R6.UTF8Format=Eit;const{Buffer:co}=Es||{Buffer:{isBuffer:()=>!1}},{textEncoder:T0e,textDecoder:GZ}=A0e(),{BufferFormat:P6,ViewFormat:H$,UTF8Format:k0e}=R6,bE=t=>t;jm.utf8=new k0e({encode:function(t){return co.isBuffer(t)?t.toString("utf8"):ArrayBuffer.isView(t)?GZ.decode(t):String(t)},decode:bE,name:"utf8",createViewTranscoder(){return new H$({encode:function(t){return ArrayBuffer.isView(t)?t:T0e.encode(t)},decode:function(t){return GZ.decode(t)},name:`${this.name}+view`})},createBufferTranscoder(){return new P6({encode:function(t){return co.isBuffer(t)?t:ArrayBuffer.isView(t)?co.from(t.buffer,t.byteOffset,t.byteLength):co.from(String(t),"utf8")},decode:function(t){return t.toString("utf8")},name:`${this.name}+buffer`})}});jm.json=new k0e({encode:JSON.stringify,decode:JSON.parse,name:"json"});jm.buffer=new P6({encode:function(t){return co.isBuffer(t)?t:ArrayBuffer.isView(t)?co.from(t.buffer,t.byteOffset,t.byteLength):co.from(String(t),"utf8")},decode:bE,name:"buffer",createViewTranscoder(){return new H$({encode:function(t){return ArrayBuffer.isView(t)?t:co.from(String(t),"utf8")},decode:function(t){return co.from(t.buffer,t.byteOffset,t.byteLength)},name:`${this.name}+view`})}});jm.view=new H$({encode:function(t){return ArrayBuffer.isView(t)?t:T0e.encode(t)},decode:bE,name:"view",createBufferTranscoder(){return new P6({encode:function(t){return co.isBuffer(t)?t:ArrayBuffer.isView(t)?co.from(t.buffer,t.byteOffset,t.byteLength):co.from(String(t),"utf8")},decode:bE,name:`${this.name}+buffer`})}});jm.hex=new P6({encode:function(t){return co.isBuffer(t)?t:co.from(String(t),"hex")},decode:function(t){return t.toString("hex")},name:"hex"});jm.base64=new P6({encode:function(t){return co.isBuffer(t)?t:co.from(String(t),"base64")},decode:function(t){return t.toString("base64")},name:"base64"});const YZ=wh,wE=jm,{Encoding:Sit}=U$,{BufferFormat:Ait,ViewFormat:Tit,UTF8Format:kit}=R6,mw=Symbol("formats"),W_=Symbol("encodings"),Cit=new Set(["buffer","view","utf8"]);let Iit=class{constructor(e){if(Array.isArray(e)){if(!e.every(r=>Cit.has(r)))throw new TypeError("Format must be one of 'buffer', 'view', 'utf8'")}else throw new TypeError("The first argument 'formats' must be an array");this[W_]=new Map,this[mw]=new Set(e);for(const r in wE)try{this.encoding(r)}catch(n){if(n.code!=="LEVEL_ENCODING_NOT_SUPPORTED")throw n}}encodings(){return Array.from(new Set(this[W_].values()))}encoding(e){let r=this[W_].get(e);if(r===void 0){if(typeof e=="string"&&e!==""){if(r=Dit[e],!r)throw new YZ(`Encoding '${e}' is not found`,{code:"LEVEL_ENCODING_NOT_FOUND"})}else{if(typeof e!="object"||e===null)throw new TypeError("First argument 'encoding' must be a string or object");r=Rit(e)}const{name:n,format:i}=r;if(!this[mw].has(i))if(this[mw].has("view"))r=r.createViewTranscoder();else if(this[mw].has("buffer"))r=r.createBufferTranscoder();else if(this[mw].has("utf8"))r=r.createUTF8Transcoder();else throw new YZ(`Encoding '${n}' cannot be transcoded`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"});for(const s of[e,n,r.name,r.commonName])this[W_].set(s,r)}return r}};S0e.Transcoder=Iit;function Rit(t){if(t instanceof Sit)return t;const e="type"in t&&typeof t.type=="string"?t.type:void 0,r=t.name||e||`anonymous-${Oit++}`;switch(Pit(t)){case"view":return new Tit({...t,name:r});case"utf8":return new kit({...t,name:r});case"buffer":return new Ait({...t,name:r});default:throw new TypeError("Format must be one of 'buffer', 'view', 'utf8'")}}function Pit(t){return"format"in t&&t.format!==void 0?t.format:"buffer"in t&&typeof t.buffer=="boolean"?t.buffer?"buffer":"utf8":"code"in t&&Number.isInteger(t.code)?"view":"buffer"}const Bit={binary:wE.buffer,"utf-8":wE.utf8},Dit={...wE,...Bit};let Oit=0;var lb={},Nit=typeof queueMicrotask=="function"?queueMicrotask:t=>Promise.resolve().then(t),XZ=Nit;lb.fromCallback=function(t,e){if(t===void 0){var r=new Promise(function(n,i){t=function(s,a){s?i(s):n(a)}});t[e!==void 0?e:"promise"]=r}else if(typeof t!="function")throw new TypeError("Callback must be a function");return t};lb.fromPromise=function(t,e){if(e===void 0)return t;t.then(function(r){XZ(()=>e(null,r))}).catch(function(r){XZ(()=>e(r))})};var _h={},B6={};B6.getCallback=function(t,e){return typeof t=="function"?t:e};B6.getOptions=function(t,e){return typeof t=="object"&&t!==null?t:e!==void 0?e:{}};const{fromCallback:lI}=lb,Hc=wh,{getOptions:uI,getCallback:ZZ}=B6,Rp=Symbol("promise"),C2=Symbol("callback"),pf=Symbol("working"),gg=Symbol("handleOne"),dd=Symbol("handleMany"),fI=Symbol("autoClose"),U1=Symbol("finishWork"),th=Symbol("returnMany"),O0=Symbol("closing"),yw=Symbol("handleClose"),K_=Symbol("closed"),vw=Symbol("closeCallbacks"),C1=Symbol("keyEncoding"),Qg=Symbol("valueEncoding"),hI=Symbol("abortOnClose"),G_=Symbol("legacy"),dI=Symbol("keys"),pI=Symbol("values"),N0=Symbol("limit"),Nl=Symbol("count"),Y_=Object.freeze({}),Mit=()=>{};let JZ=!1;class W${constructor(e,r,n){if(typeof e!="object"||e===null){const i=e===null?"null":typeof e;throw new TypeError(`The first argument must be an abstract-level database, received ${i}`)}if(typeof r!="object"||r===null)throw new TypeError("The second argument must be an options object");this[K_]=!1,this[vw]=[],this[pf]=!1,this[O0]=!1,this[fI]=!1,this[C2]=null,this[gg]=this[gg].bind(this),this[dd]=this[dd].bind(this),this[yw]=this[yw].bind(this),this[C1]=r[C1],this[Qg]=r[Qg],this[G_]=n,this[N0]=Number.isInteger(r.limit)&&r.limit>=0?r.limit:1/0,this[Nl]=0,this[hI]=!!r.abortOnClose,this.db=e,this.db.attachResource(this),this.nextTick=e.nextTick}get count(){return this[Nl]}get limit(){return this[N0]}next(e){let r;if(e===void 0)r=new Promise((n,i)=>{e=(s,a,o)=>{s?i(s):this[G_]?a===void 0&&o===void 0?n():n([a,o]):n(a)}});else if(typeof e!="function")throw new TypeError("Callback must be a function");return this[O0]?this.nextTick(e,new Hc("Iterator is not open: cannot call next() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[pf]?this.nextTick(e,new Hc("Iterator is busy: cannot call next() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(this[pf]=!0,this[C2]=e,this[Nl]>=this[N0]?this.nextTick(this[gg],null):this._next(this[gg])),r}_next(e){this.nextTick(e)}nextv(e,r,n){return n=ZZ(r,n),n=lI(n,Rp),r=uI(r,Y_),Number.isInteger(e)?(this[O0]?this.nextTick(n,new Hc("Iterator is not open: cannot call nextv() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[pf]?this.nextTick(n,new Hc("Iterator is busy: cannot call nextv() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(e<1&&(e=1),this[N0]<1/0&&(e=Math.min(e,this[N0]-this[Nl])),this[pf]=!0,this[C2]=n,e<=0?this.nextTick(this[dd],null,[]):this._nextv(e,r,this[dd])),n[Rp]):(this.nextTick(n,new TypeError("The first argument 'size' must be an integer")),n[Rp])}_nextv(e,r,n){const i=[],s=(a,o,c)=>{if(a)return n(a);if(this[G_]?o===void 0&&c===void 0:o===void 0)return n(null,i);i.push(this[G_]?[o,c]:o),i.length===e?n(null,i):this._next(s)};this._next(s)}all(e,r){return r=ZZ(e,r),r=lI(r,Rp),e=uI(e,Y_),this[O0]?this.nextTick(r,new Hc("Iterator is not open: cannot call all() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[pf]?this.nextTick(r,new Hc("Iterator is busy: cannot call all() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(this[pf]=!0,this[C2]=r,this[fI]=!0,this[Nl]>=this[N0]?this.nextTick(this[dd],null,[]):this._all(e,this[dd])),r[Rp]}_all(e,r){let n=this[Nl];const i=[],s=()=>{const o=this[N0]<1/0?Math.min(1e3,this[N0]-n):1e3;o<=0?this.nextTick(r,null,i):this._nextv(o,Y_,a)},a=(o,c)=>{o?r(o):c.length===0?r(null,i):(i.push.apply(i,c),n+=c.length,s())};s()}[U1](){const e=this[C2];return this[hI]&&e===null?Mit:(this[pf]=!1,this[C2]=null,this[O0]&&this._close(this[yw]),e)}[th](e,r,n){this[fI]?this.close(e.bind(null,r,n)):e(r,n)}seek(e,r){if(r=uI(r,Y_),!this[O0]){if(this[pf])throw new Hc("Iterator is busy: cannot call seek() until next() has completed",{code:"LEVEL_ITERATOR_BUSY"});{const n=this.db.keyEncoding(r.keyEncoding||this[C1]),i=n.format;r.keyEncoding!==i&&(r={...r,keyEncoding:i});const s=this.db.prefixKey(n.encode(e),i);this._seek(s,r)}}}_seek(e,r){throw new Hc("Iterator does not support seek()",{code:"LEVEL_NOT_SUPPORTED"})}close(e){return e=lI(e,Rp),this[K_]?this.nextTick(e):this[O0]?this[vw].push(e):(this[O0]=!0,this[vw].push(e),this[pf]?this[hI]&&this[U1]()(new Hc("Aborted on iterator close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this._close(this[yw])),e[Rp]}_close(e){this.nextTick(e)}[yw](){this[K_]=!0,this.db.detachResource(this);const e=this[vw];this[vw]=[];for(const r of e)r()}async*[Symbol.asyncIterator](){try{let e;for(;(e=await this.next())!==void 0;)yield e}finally{this[K_]||await this.close()}}}let QS=class extends W${constructor(e,r){super(e,r,!0),this[dI]=r.keys!==!1,this[pI]=r.values!==!1}[gg](e,r,n){const i=this[U1]();if(e)return i(e);try{r=this[dI]&&r!==void 0?this[C1].decode(r):void 0,n=this[pI]&&n!==void 0?this[Qg].decode(n):void 0}catch(s){return i(new Jy("entry",s))}r===void 0&&n===void 0||this[Nl]++,i(null,r,n)}[dd](e,r){const n=this[U1]();if(e)return this[th](n,e);try{for(const i of r){const s=i[0],a=i[1];i[0]=this[dI]&&s!==void 0?this[C1].decode(s):void 0,i[1]=this[pI]&&a!==void 0?this[Qg].decode(a):void 0}}catch(i){return this[th](n,new Jy("entries",i))}this[Nl]+=r.length,this[th](n,null,r)}end(e){return!JZ&&typeof console<"u"&&(JZ=!0,console.warn(new Hc("The iterator.end() method was renamed to close() and end() is an alias that will be removed in a future version",{code:"LEVEL_LEGACY"}))),this.close(e)}},Lit=class extends W${constructor(e,r){super(e,r,!1)}[gg](e,r){const n=this[U1]();if(e)return n(e);try{r=r!==void 0?this[C1].decode(r):void 0}catch(i){return n(new Jy("key",i))}r!==void 0&&this[Nl]++,n(null,r)}[dd](e,r){const n=this[U1]();if(e)return this[th](n,e);try{for(let i=0;i<r.length;i++){const s=r[i];r[i]=s!==void 0?this[C1].decode(s):void 0}}catch(i){return this[th](n,new Jy("keys",i))}this[Nl]+=r.length,this[th](n,null,r)}},Fit=class extends W${constructor(e,r){super(e,r,!1)}[gg](e,r){const n=this[U1]();if(e)return n(e);try{r=r!==void 0?this[Qg].decode(r):void 0}catch(i){return n(new Jy("value",i))}r!==void 0&&this[Nl]++,n(null,r)}[dd](e,r){const n=this[U1]();if(e)return this[th](n,e);try{for(let i=0;i<r.length;i++){const s=r[i];r[i]=s!==void 0?this[Qg].decode(s):void 0}}catch(i){return this[th](n,new Jy("values",i))}this[Nl]+=r.length,this[th](n,null,r)}};class Jy extends Hc{constructor(e,r){super(`Iterator could not decode ${e}`,{code:"LEVEL_DECODE_ERROR",cause:r})}}for(const t of["_ended property","_nexting property","_end method"])Object.defineProperty(QS.prototype,t.split(" ")[0],{get(){throw new Hc(`The ${t} has been removed`,{code:"LEVEL_LEGACY"})},set(){throw new Hc(`The ${t} has been removed`,{code:"LEVEL_LEGACY"})}});QS.keyEncoding=C1;QS.valueEncoding=Qg;_h.AbstractIterator=QS;_h.AbstractKeyIterator=Lit;_h.AbstractValueIterator=Fit;var K$={};const{AbstractKeyIterator:$it,AbstractValueIterator:Uit}=_h,Qp=Symbol("iterator"),bw=Symbol("callback"),Qy=Symbol("handleOne"),Cg=Symbol("handleMany");let iN=class extends $it{constructor(e,r){super(e,r),this[Qp]=e.iterator({...r,keys:!0,values:!1}),this[Qy]=this[Qy].bind(this),this[Cg]=this[Cg].bind(this)}},C0e=class extends Uit{constructor(e,r){super(e,r),this[Qp]=e.iterator({...r,keys:!1,values:!0}),this[Qy]=this[Qy].bind(this),this[Cg]=this[Cg].bind(this)}};for(const t of[iN,C0e]){const e=t===iN,r=e?n=>n[0]:n=>n[1];t.prototype._next=function(n){this[bw]=n,this[Qp].next(this[Qy])},t.prototype[Qy]=function(n,i,s){const a=this[bw];n?a(n):a(null,e?i:s)},t.prototype._nextv=function(n,i,s){this[bw]=s,this[Qp].nextv(n,i,this[Cg])},t.prototype._all=function(n,i){this[bw]=i,this[Qp].all(n,this[Cg])},t.prototype[Cg]=function(n,i){const s=this[bw];n?s(n):s(null,i.map(r))},t.prototype._seek=function(n,i){this[Qp].seek(n,i)},t.prototype._close=function(n){this[Qp].close(n)}}K$.DefaultKeyIterator=iN;K$.DefaultValueIterator=C0e;var eA={};const{AbstractIterator:Vit,AbstractKeyIterator:jit,AbstractValueIterator:zit}=_h,gI=wh,ac=Symbol("nut"),tA=Symbol("undefer"),rA=Symbol("factory");let I0e=class extends Vit{constructor(e,r){super(e,r),this[ac]=null,this[rA]=()=>e.iterator(r),this.db.defer(()=>this[tA]())}},R0e=class extends jit{constructor(e,r){super(e,r),this[ac]=null,this[rA]=()=>e.keys(r),this.db.defer(()=>this[tA]())}},P0e=class extends zit{constructor(e,r){super(e,r),this[ac]=null,this[rA]=()=>e.values(r),this.db.defer(()=>this[tA]())}};for(const t of[I0e,R0e,P0e])t.prototype[tA]=function(){this.db.status==="open"&&(this[ac]=this[rA]())},t.prototype._next=function(e){this[ac]!==null?this[ac].next(e):this.db.status==="opening"?this.db.defer(()=>this._next(e)):this.nextTick(e,new gI("Iterator is not open: cannot call next() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},t.prototype._nextv=function(e,r,n){this[ac]!==null?this[ac].nextv(e,r,n):this.db.status==="opening"?this.db.defer(()=>this._nextv(e,r,n)):this.nextTick(n,new gI("Iterator is not open: cannot call nextv() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},t.prototype._all=function(e,r){this[ac]!==null?this[ac].all(r):this.db.status==="opening"?this.db.defer(()=>this._all(e,r)):this.nextTick(r,new gI("Iterator is not open: cannot call all() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},t.prototype._seek=function(e,r){this[ac]!==null?this[ac]._seek(e,r):this.db.status==="opening"&&this.db.defer(()=>this._seek(e,r))},t.prototype._close=function(e){this[ac]!==null?this[ac].close(e):this.db.status==="opening"?this.db.defer(()=>this._close(e)):this.nextTick(e)};eA.DeferredIterator=I0e;eA.DeferredKeyIterator=R0e;eA.DeferredValueIterator=P0e;var B0e={},G$={};const{fromCallback:QZ}=lb,X_=wh,{getCallback:qit,getOptions:Hit}=B6,Z_=Symbol("promise"),xl=Symbol("status"),I2=Symbol("operations"),ww=Symbol("finishClose"),R2=Symbol("closeCallbacks");let Wit=class{constructor(e){if(typeof e!="object"||e===null){const r=e===null?"null":typeof e;throw new TypeError(`The first argument must be an abstract-level database, received ${r}`)}this[I2]=[],this[R2]=[],this[xl]="open",this[ww]=this[ww].bind(this),this.db=e,this.db.attachResource(this),this.nextTick=e.nextTick}get length(){return this[I2].length}put(e,r,n){if(this[xl]!=="open")throw new X_("Batch is not open: cannot call put() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});const i=this.db._checkKey(e)||this.db._checkValue(r);if(i)throw i;const s=n&&n.sublevel!=null?n.sublevel:this.db,a=n,o=s.keyEncoding(n&&n.keyEncoding),c=s.valueEncoding(n&&n.valueEncoding),l=o.format;n={...n,keyEncoding:l,valueEncoding:c.format},s!==this.db&&(n.sublevel=null);const u=s.prefixKey(o.encode(e),l),f=c.encode(r);return this._put(u,f,n),this[I2].push({...a,type:"put",key:e,value:r}),this}_put(e,r,n){}del(e,r){if(this[xl]!=="open")throw new X_("Batch is not open: cannot call del() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});const n=this.db._checkKey(e);if(n)throw n;const i=r&&r.sublevel!=null?r.sublevel:this.db,s=r,a=i.keyEncoding(r&&r.keyEncoding),o=a.format;return r={...r,keyEncoding:o},i!==this.db&&(r.sublevel=null),this._del(i.prefixKey(a.encode(e),o),r),this[I2].push({...s,type:"del",key:e}),this}_del(e,r){}clear(){if(this[xl]!=="open")throw new X_("Batch is not open: cannot call clear() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});return this._clear(),this[I2]=[],this}_clear(){}write(e,r){return r=qit(e,r),r=QZ(r,Z_),e=Hit(e),this[xl]!=="open"?this.nextTick(r,new X_("Batch is not open: cannot call write() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"})):this.length===0?this.close(r):(this[xl]="writing",this._write(e,n=>{this[xl]="closing",this[R2].push(()=>r(n)),n||this.db.emit("batch",this[I2]),this._close(this[ww])})),r[Z_]}_write(e,r){}close(e){return e=QZ(e,Z_),this[xl]==="closing"?this[R2].push(e):this[xl]==="closed"?this.nextTick(e):(this[R2].push(e),this[xl]!=="writing"&&(this[xl]="closing",this._close(this[ww]))),e[Z_]}_close(e){this.nextTick(e)}[ww](){this[xl]="closed",this.db.detachResource(this);const e=this[R2];this[R2]=[];for(const r of e)r()}};G$.AbstractChainedBatch=Wit;const{AbstractChainedBatch:Kit}=G$,Git=wh,P2=Symbol("encoded");let Yit=class extends Kit{constructor(e){super(e),this[P2]=[]}_put(e,r,n){this[P2].push({...n,type:"put",key:e,value:r})}_del(e,r){this[P2].push({...r,type:"del",key:e})}_clear(){this[P2]=[]}_write(e,r){this.db.status==="opening"?this.db.defer(()=>this._write(e,r)):this.db.status==="open"?this[P2].length===0?this.nextTick(r):this.db._batch(this[P2],e,r):this.nextTick(r,new Git("Batch is not open: cannot call write() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"}))}};B0e.DefaultChainedBatch=Yit;const eJ=wh,Xit=Object.prototype.hasOwnProperty,Zit=new Set(["lt","lte","gt","gte"]);var Jit=function(t,e){const r={};for(const n in t)if(Xit.call(t,n)&&!(n==="keyEncoding"||n==="valueEncoding")){if(n==="start"||n==="end")throw new eJ(`The legacy range option '${n}' has been removed`,{code:"LEVEL_LEGACY"});if(n==="encoding")throw new eJ("The levelup-style 'encoding' alias has been removed, use 'valueEncoding' instead",{code:"LEVEL_LEGACY"});Zit.has(n)?r[n]=e.encode(t[n]):r[n]=t[n]}return r.reverse=!!r.reverse,r.limit=Number.isInteger(r.limit)&&r.limit>=0?r.limit:-1,r};/*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */let tJ;var D0e=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window<"u"?window:It):t=>(tJ||(tJ=Promise.resolve())).then(t).catch(e=>setTimeout(()=>{throw e},0)),mI,rJ;function Qit(){if(rJ)return mI;rJ=1;const t=D0e;return mI=function(e,...r){r.length===0?t(e):t(()=>e(...r))},mI}var _w={},nJ;function est(){if(nJ)return _w;nJ=1;const{AbstractIterator:t,AbstractKeyIterator:e,AbstractValueIterator:r}=_h,n=Symbol("unfix"),i=Symbol("iterator"),s=Symbol("handleOne"),a=Symbol("handleMany"),o=Symbol("callback");class c extends t{constructor(h,d,g,p){super(h,d),this[i]=g,this[n]=p,this[s]=this[s].bind(this),this[a]=this[a].bind(this),this[o]=null}[s](h,d,g){const p=this[o];if(h)return p(h);d!==void 0&&(d=this[n](d)),p(h,d,g)}[a](h,d){const g=this[o];if(h)return g(h);for(const p of d){const m=p[0];m!==void 0&&(p[0]=this[n](m))}g(h,d)}}class l extends e{constructor(h,d,g,p){super(h,d),this[i]=g,this[n]=p,this[s]=this[s].bind(this),this[a]=this[a].bind(this),this[o]=null}[s](h,d){const g=this[o];if(h)return g(h);d!==void 0&&(d=this[n](d)),g(h,d)}[a](h,d){const g=this[o];if(h)return g(h);for(let p=0;p<d.length;p++){const m=d[p];m!==void 0&&(d[p]=this[n](m))}g(h,d)}}class u extends r{constructor(h,d,g){super(h,d),this[i]=g}}for(const f of[c,l])f.prototype._next=function(h){this[o]=h,this[i].next(this[s])},f.prototype._nextv=function(h,d,g){this[o]=g,this[i].nextv(h,d,this[a])},f.prototype._all=function(h,d){this[o]=d,this[i].all(h,this[a])};for(const f of[u])f.prototype._next=function(h){this[i].next(h)},f.prototype._nextv=function(h,d,g){this[i].nextv(h,d,g)},f.prototype._all=function(h,d){this[i].all(h,d)};for(const f of[c,l,u])f.prototype._seek=function(h,d){this[i].seek(h,d)},f.prototype._close=function(h){this[i].close(h)};return _w.AbstractSublevelIterator=c,_w.AbstractSublevelKeyIterator=l,_w.AbstractSublevelValueIterator=u,_w}var yI,iJ;function tst(){if(iJ)return yI;iJ=1;const t=wh,{Buffer:e}=Es||{},{AbstractSublevelIterator:r,AbstractSublevelKeyIterator:n,AbstractSublevelValueIterator:i}=est(),s=Symbol("prefix"),a=Symbol("upperBound"),o=Symbol("prefixRange"),c=Symbol("parent"),l=Symbol("unfix"),u=new TextEncoder,f={separator:"!"};yI=function({AbstractLevel:y}){class v extends y{static defaults(x){if(typeof x=="string")throw new t("The subleveldown string shorthand for { separator } has been removed",{code:"LEVEL_LEGACY"});if(x&&x.open)throw new t("The subleveldown open option has been removed",{code:"LEVEL_LEGACY"});return x==null?f:x.separator?x:{...x,separator:"!"}}constructor(x,A,C){const{separator:R,manifest:M,...N}=v.defaults(C);A=m(A,R);const Y=R.charCodeAt(0)+1,H=x[c]||x;if(!u.encode(A).every(w=>w>Y&&w<127))throw new t(`Prefix must use bytes > ${Y} < 127`,{code:"LEVEL_INVALID_PREFIX"});super(h(H,M),N);const E=(x.prefix||"")+R+A+R,k=E.slice(0,-1)+String.fromCharCode(Y);this[c]=H,this[s]=new g(E),this[a]=new g(k),this[l]=new p,this.nextTick=H.nextTick}prefixKey(x,A){if(A==="utf8")return this[s].utf8+x;if(x.byteLength===0)return this[s][A];if(A==="view"){const C=this[s].view,R=new Uint8Array(C.byteLength+x.byteLength);return R.set(C,0),R.set(x,C.byteLength),R}else{const C=this[s].buffer;return e.concat([C,x],C.byteLength+x.byteLength)}}[o](x,A){x.gte!==void 0?x.gte=this.prefixKey(x.gte,A):x.gt!==void 0?x.gt=this.prefixKey(x.gt,A):x.gte=this[s][A],x.lte!==void 0?x.lte=this.prefixKey(x.lte,A):x.lt!==void 0?x.lt=this.prefixKey(x.lt,A):x.lte=this[a][A]}get prefix(){return this[s].utf8}get db(){return this[c]}_open(x,A){this[c].open({passive:!0},A)}_put(x,A,C,R){this[c].put(x,A,C,R)}_get(x,A,C){this[c].get(x,A,C)}_getMany(x,A,C){this[c].getMany(x,A,C)}_del(x,A,C){this[c].del(x,A,C)}_batch(x,A,C){this[c].batch(x,A,C)}_clear(x,A){this[o](x,x.keyEncoding),this[c].clear(x,A)}_iterator(x){this[o](x,x.keyEncoding);const A=this[c].iterator(x),C=this[l].get(this[s].utf8.length,x.keyEncoding);return new r(this,x,A,C)}_keys(x){this[o](x,x.keyEncoding);const A=this[c].keys(x),C=this[l].get(this[s].utf8.length,x.keyEncoding);return new n(this,x,A,C)}_values(x){this[o](x,x.keyEncoding);const A=this[c].values(x);return new i(this,x,A)}}return{AbstractSublevel:v}};const h=function(y,v){return{...y.supports,createIfMissing:!1,errorIfExists:!1,events:{},additionalMethods:{},...v,encodings:{utf8:d(y,"utf8"),buffer:d(y,"buffer"),view:d(y,"view")}}},d=function(y,v){return y.supports.encodings[v]?y.keyEncoding(v).name===v:!1};class g{constructor(v){this.utf8=v,this.view=u.encode(v),this.buffer=e?e.from(this.view.buffer,0,this.view.byteLength):{}}}class p{constructor(){this.cache=new Map}get(v,_){let x=this.cache.get(_);return x===void 0&&(_==="view"?x=function(A,C){return C.subarray(A)}.bind(null,v):x=function(A,C){return C.slice(A)}.bind(null,v),this.cache.set(_,x)),x}}const m=function(y,v){let _=0,x=y.length;for(;_<x&&y[_]===v;)_++;for(;x>_&&y[x-1]===v;)x--;return y.slice(_,x)};return yI}const{supports:rst}=E0e,{Transcoder:nst}=S0e,{EventEmitter:ist}=qi,{fromCallback:M0}=lb,du=wh,{AbstractIterator:Pp}=_h,{DefaultKeyIterator:sst,DefaultValueIterator:ast}=K$,{DeferredIterator:ost,DeferredKeyIterator:cst,DeferredValueIterator:lst}=eA,{DefaultChainedBatch:sJ}=B0e,{getCallback:Bp,getOptions:L0}=B6,J_=Jit,jr=Symbol("promise"),Hh=Symbol("landed"),Dp=Symbol("resources"),vI=Symbol("closeResources"),xw=Symbol("operations"),Ew=Symbol("undefer"),Q_=Symbol("deferOpen"),aJ=Symbol("options"),on=Symbol("status"),Op=Symbol("defaultOptions"),B2=Symbol("transcoder"),e5=Symbol("keyEncoding"),bI=Symbol("valueEncoding"),ust=()=>{};let Y$=class extends ist{constructor(e,r){if(super(),typeof e!="object"||e===null)throw new TypeError("The first argument 'manifest' must be an object");r=L0(r);const{keyEncoding:n,valueEncoding:i,passive:s,...a}=r;this[Dp]=new Set,this[xw]=[],this[Q_]=!0,this[aJ]=a,this[on]="opening",this.supports=rst(e,{status:!0,promises:!0,clear:!0,getMany:!0,deferredOpen:!0,snapshots:e.snapshots!==!1,permanence:e.permanence!==!1,keyIterator:!0,valueIterator:!0,iteratorNextv:!0,iteratorAll:!0,encodings:e.encodings||{},events:Object.assign({},e.events,{opening:!0,open:!0,closing:!0,closed:!0,put:!0,del:!0,batch:!0,clear:!0})}),this[B2]=new nst(fst(this)),this[e5]=this[B2].encoding(n||"utf8"),this[bI]=this[B2].encoding(i||"utf8");for(const o of this[B2].encodings())this.supports.encodings[o.commonName]||(this.supports.encodings[o.commonName]=!0);this[Op]={empty:Object.freeze({}),entry:Object.freeze({keyEncoding:this[e5].commonName,valueEncoding:this[bI].commonName}),key:Object.freeze({keyEncoding:this[e5].commonName})},this.nextTick(()=>{this[Q_]&&this.open({passive:!1},ust)})}get status(){return this[on]}keyEncoding(e){return this[B2].encoding(e??this[e5])}valueEncoding(e){return this[B2].encoding(e??this[bI])}open(e,r){r=Bp(e,r),r=M0(r,jr),e={...this[aJ],...L0(e)},e.createIfMissing=e.createIfMissing!==!1,e.errorIfExists=!!e.errorIfExists;const n=i=>{this[on]==="closing"||this[on]==="opening"?this.once(Hh,i?()=>n(i):n):this[on]!=="open"?r(new du("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN",cause:i})):r()};return e.passive?this[on]==="opening"?this.once(Hh,n):this.nextTick(n):this[on]==="closed"||this[Q_]?(this[Q_]=!1,this[on]="opening",this.emit("opening"),this._open(e,i=>{if(i){this[on]="closed",this[vI](()=>{this.emit(Hh),n(i)}),this[Ew]();return}this[on]="open",this[Ew](),this.emit(Hh),this[on]==="open"&&this.emit("open"),this[on]==="open"&&this.emit("ready"),n()})):this[on]==="open"?this.nextTick(n):this.once(Hh,()=>this.open(e,r)),r[jr]}_open(e,r){this.nextTick(r)}close(e){e=M0(e,jr);const r=n=>{this[on]==="opening"||this[on]==="closing"?this.once(Hh,n?r(n):r):this[on]!=="closed"?e(new du("Database is not closed",{code:"LEVEL_DATABASE_NOT_CLOSED",cause:n})):e()};if(this[on]==="open"){this[on]="closing",this.emit("closing");const n=i=>{this[on]="open",this[Ew](),this.emit(Hh),r(i)};this[vI](()=>{this._close(i=>{if(i)return n(i);this[on]="closed",this[Ew](),this.emit(Hh),this[on]==="closed"&&this.emit("closed"),r()})})}else this[on]==="closed"?this.nextTick(r):this.once(Hh,()=>this.close(e));return e[jr]}[vI](e){if(this[Dp].size===0)return this.nextTick(e);let r=this[Dp].size,n=!0;const i=()=>{--r===0&&(n?this.nextTick(e):e())};for(const s of this[Dp])s.close(i);n=!1,this[Dp].clear()}_close(e){this.nextTick(e)}get(e,r,n){if(n=Bp(r,n),n=M0(n,jr),r=L0(r,this[Op].entry),this[on]==="opening")return this.defer(()=>this.get(e,r,n)),n[jr];if(D2(this,n))return n[jr];const i=this._checkKey(e);if(i)return this.nextTick(n,i),n[jr];const s=this.keyEncoding(r.keyEncoding),a=this.valueEncoding(r.valueEncoding),o=s.format,c=a.format;return(r.keyEncoding!==o||r.valueEncoding!==c)&&(r=Object.assign({},r,{keyEncoding:o,valueEncoding:c})),this._get(this.prefixKey(s.encode(e),o),r,(l,u)=>{if(l)return(l.code==="LEVEL_NOT_FOUND"||l.notFound||/NotFound/i.test(l))&&(l.code||(l.code="LEVEL_NOT_FOUND"),l.notFound||(l.notFound=!0),l.status||(l.status=404)),n(l);try{u=a.decode(u)}catch(f){return n(new du("Could not decode value",{code:"LEVEL_DECODE_ERROR",cause:f}))}n(null,u)}),n[jr]}_get(e,r,n){this.nextTick(n,new Error("NotFound"))}getMany(e,r,n){if(n=Bp(r,n),n=M0(n,jr),r=L0(r,this[Op].entry),this[on]==="opening")return this.defer(()=>this.getMany(e,r,n)),n[jr];if(D2(this,n))return n[jr];if(!Array.isArray(e))return this.nextTick(n,new TypeError("The first argument 'keys' must be an array")),n[jr];if(e.length===0)return this.nextTick(n,null,[]),n[jr];const i=this.keyEncoding(r.keyEncoding),s=this.valueEncoding(r.valueEncoding),a=i.format,o=s.format;(r.keyEncoding!==a||r.valueEncoding!==o)&&(r=Object.assign({},r,{keyEncoding:a,valueEncoding:o}));const c=new Array(e.length);for(let l=0;l<e.length;l++){const u=e[l],f=this._checkKey(u);if(f)return this.nextTick(n,f),n[jr];c[l]=this.prefixKey(i.encode(u),a)}return this._getMany(c,r,(l,u)=>{if(l)return n(l);try{for(let f=0;f<u.length;f++)u[f]!==void 0&&(u[f]=s.decode(u[f]))}catch(f){return n(new du(`Could not decode one or more of ${u.length} value(s)`,{code:"LEVEL_DECODE_ERROR",cause:f}))}n(null,u)}),n[jr]}_getMany(e,r,n){this.nextTick(n,null,new Array(e.length).fill(void 0))}put(e,r,n,i){if(i=Bp(n,i),i=M0(i,jr),n=L0(n,this[Op].entry),this[on]==="opening")return this.defer(()=>this.put(e,r,n,i)),i[jr];if(D2(this,i))return i[jr];const s=this._checkKey(e)||this._checkValue(r);if(s)return this.nextTick(i,s),i[jr];const a=this.keyEncoding(n.keyEncoding),o=this.valueEncoding(n.valueEncoding),c=a.format,l=o.format;(n.keyEncoding!==c||n.valueEncoding!==l)&&(n=Object.assign({},n,{keyEncoding:c,valueEncoding:l}));const u=this.prefixKey(a.encode(e),c),f=o.encode(r);return this._put(u,f,n,h=>{if(h)return i(h);this.emit("put",e,r),i()}),i[jr]}_put(e,r,n,i){this.nextTick(i)}del(e,r,n){if(n=Bp(r,n),n=M0(n,jr),r=L0(r,this[Op].key),this[on]==="opening")return this.defer(()=>this.del(e,r,n)),n[jr];if(D2(this,n))return n[jr];const i=this._checkKey(e);if(i)return this.nextTick(n,i),n[jr];const s=this.keyEncoding(r.keyEncoding),a=s.format;return r.keyEncoding!==a&&(r=Object.assign({},r,{keyEncoding:a})),this._del(this.prefixKey(s.encode(e),a),r,o=>{if(o)return n(o);this.emit("del",e),n()}),n[jr]}_del(e,r,n){this.nextTick(n)}batch(e,r,n){if(!arguments.length){if(this[on]==="opening")return new sJ(this);if(this[on]!=="open")throw new du("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._chainedBatch()}if(typeof e=="function"?n=e:n=Bp(r,n),n=M0(n,jr),r=L0(r,this[Op].empty),this[on]==="opening")return this.defer(()=>this.batch(e,r,n)),n[jr];if(D2(this,n))return n[jr];if(!Array.isArray(e))return this.nextTick(n,new TypeError("The first argument 'operations' must be an array")),n[jr];if(e.length===0)return this.nextTick(n),n[jr];const i=new Array(e.length),{keyEncoding:s,valueEncoding:a,...o}=r;for(let c=0;c<e.length;c++){if(typeof e[c]!="object"||e[c]===null)return this.nextTick(n,new TypeError("A batch operation must be an object")),n[jr];const l=Object.assign({},e[c]);if(l.type!=="put"&&l.type!=="del")return this.nextTick(n,new TypeError("A batch operation must have a type property that is 'put' or 'del'")),n[jr];const u=this._checkKey(l.key);if(u)return this.nextTick(n,u),n[jr];const f=l.sublevel!=null?l.sublevel:this,h=f.keyEncoding(l.keyEncoding||s),d=h.format;if(l.key=f.prefixKey(h.encode(l.key),d),l.keyEncoding=d,l.type==="put"){const g=this._checkValue(l.value);if(g)return this.nextTick(n,g),n[jr];const p=f.valueEncoding(l.valueEncoding||a);l.value=p.encode(l.value),l.valueEncoding=p.format}f!==this&&(l.sublevel=null),i[c]=l}return this._batch(i,o,c=>{if(c)return n(c);this.emit("batch",e),n()}),n[jr]}_batch(e,r,n){this.nextTick(n)}sublevel(e,r){return this._sublevel(e,sN.defaults(r))}_sublevel(e,r){return new sN(this,e,r)}prefixKey(e,r){return e}clear(e,r){if(r=Bp(e,r),r=M0(r,jr),e=L0(e,this[Op].empty),this[on]==="opening")return this.defer(()=>this.clear(e,r)),r[jr];if(D2(this,r))return r[jr];const n=e,i=this.keyEncoding(e.keyEncoding);return e=J_(e,i),e.keyEncoding=i.format,e.limit===0?this.nextTick(r):this._clear(e,s=>{if(s)return r(s);this.emit("clear",n),r()}),r[jr]}_clear(e,r){this.nextTick(r)}iterator(e){const r=this.keyEncoding(e&&e.keyEncoding),n=this.valueEncoding(e&&e.valueEncoding);if(e=J_(e,r),e.keys=e.keys!==!1,e.values=e.values!==!1,e[Pp.keyEncoding]=r,e[Pp.valueEncoding]=n,e.keyEncoding=r.format,e.valueEncoding=n.format,this[on]==="opening")return new ost(this,e);if(this[on]!=="open")throw new du("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._iterator(e)}_iterator(e){return new Pp(this,e)}keys(e){const r=this.keyEncoding(e&&e.keyEncoding),n=this.valueEncoding(e&&e.valueEncoding);if(e=J_(e,r),e[Pp.keyEncoding]=r,e[Pp.valueEncoding]=n,e.keyEncoding=r.format,e.valueEncoding=n.format,this[on]==="opening")return new cst(this,e);if(this[on]!=="open")throw new du("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._keys(e)}_keys(e){return new sst(this,e)}values(e){const r=this.keyEncoding(e&&e.keyEncoding),n=this.valueEncoding(e&&e.valueEncoding);if(e=J_(e,r),e[Pp.keyEncoding]=r,e[Pp.valueEncoding]=n,e.keyEncoding=r.format,e.valueEncoding=n.format,this[on]==="opening")return new lst(this,e);if(this[on]!=="open")throw new du("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._values(e)}_values(e){return new ast(this,e)}defer(e){if(typeof e!="function")throw new TypeError("The first argument must be a function");this[xw].push(e)}[Ew](){if(this[xw].length===0)return;const e=this[xw];this[xw]=[];for(const r of e)r()}attachResource(e){if(typeof e!="object"||e===null||typeof e.close!="function")throw new TypeError("The first argument must be a resource object");this[Dp].add(e)}detachResource(e){this[Dp].delete(e)}_chainedBatch(){return new sJ(this)}_checkKey(e){if(e==null)return new du("Key cannot be null or undefined",{code:"LEVEL_INVALID_KEY"})}_checkValue(e){if(e==null)return new du("Value cannot be null or undefined",{code:"LEVEL_INVALID_VALUE"})}};Y$.prototype.nextTick=Qit();const{AbstractSublevel:sN}=tst()({AbstractLevel:Y$});JS.AbstractLevel=Y$;JS.AbstractSublevel=sN;const D2=function(t,e){return t[on]!=="open"?(t.nextTick(e,new du("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"})),!0):!1},fst=function(t){return Object.keys(t.supports.encodings).filter(e=>!!t.supports.encodings[e])};op.AbstractLevel=JS.AbstractLevel;op.AbstractSublevel=JS.AbstractSublevel;op.AbstractIterator=_h.AbstractIterator;op.AbstractKeyIterator=_h.AbstractKeyIterator;op.AbstractValueIterator=_h.AbstractValueIterator;op.AbstractChainedBatch=G$.AbstractChainedBatch;/*! run-parallel-limit. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var hst=pst;const dst=D0e;function pst(t,e,r){if(typeof e!="number")throw new Error("second argument must be a Number");let n,i,s,a,o,c=!0,l;Array.isArray(t)?(n=[],s=i=t.length):(a=Object.keys(t),n={},s=i=a.length);function u(h){function d(){r&&r(h,n),r=null}c?dst(d):d()}function f(h,d,g){if(n[h]=g,d&&(o=!0),--s===0||d)u(d);else if(!o&&l<i){let p;a?(p=a[l],l+=1,t[p](function(m,y){f(p,m,y)})):(p=l,l+=1,t[p](function(m,y){f(p,m,y)}))}}l=e,s?a?a.some(function(h,d){return t[h](function(g,p){f(h,g,p)}),d===e-1}):t.some(function(h,d){return h(function(g,p){f(d,g,p)}),d===e-1}):u(null),c=!1}var O0e={},N0e=function(e){const r=e.gte!==void 0?e.gte:e.gt!==void 0?e.gt:void 0,n=e.lte!==void 0?e.lte:e.lt!==void 0?e.lt:void 0,i=e.gte===void 0,s=e.lte===void 0;return r!==void 0&&n!==void 0?IDBKeyRange.bound(r,n,i,s):r!==void 0?IDBKeyRange.lowerBound(r,i):n!==void 0?IDBKeyRange.upperBound(n,s):null};const gst=new TextEncoder;var M0e=function(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):gst.encode(t)};const{AbstractIterator:mst}=op,oJ=N0e,t5=M0e,gf=Symbol("cache"),Wh=Symbol("finished"),Vc=Symbol("options"),Kh=Symbol("currentOptions"),Np=Symbol("position"),wI=Symbol("location"),O2=Symbol("first"),cJ={};let yst=class extends mst{constructor(e,r,n){super(e,n),this[gf]=[],this[Wh]=this.limit===0,this[Vc]=n,this[Kh]={...n},this[Np]=void 0,this[wI]=r,this[O2]=!0}_nextv(e,r,n){if(this[O2]=!1,this[Wh])return this.nextTick(n,null,[]);if(this[gf].length>0)return e=Math.min(e,this[gf].length),this.nextTick(n,null,this[gf].splice(0,e));this[Np]!==void 0&&(this[Vc].reverse?(this[Kh].lt=this[Np],this[Kh].lte=void 0):(this[Kh].gt=this[Np],this[Kh].gte=void 0));let i;try{i=oJ(this[Kh])}catch{return this[Wh]=!0,this.nextTick(n,null,[])}const s=this.db.db.transaction([this[wI]],"readonly"),a=s.objectStore(this[wI]),o=[];if(this[Vc].reverse){const c=!this[Vc].values&&a.openKeyCursor?"openKeyCursor":"openCursor";a[c](i,"prev").onsuccess=l=>{const u=l.target.result;if(u){const{key:f,value:h}=u;this[Np]=f,o.push([this[Vc].keys&&f!==void 0?t5(f):void 0,this[Vc].values&&h!==void 0?t5(h):void 0]),o.length<e?u.continue():lJ(s)}else this[Wh]=!0}}else{let c,l;const u=()=>{if(c===void 0||l===void 0)return;const f=Math.max(c.length,l.length);f===0||e===1/0?this[Wh]=!0:this[Np]=c[f-1],o.length=f;for(let h=0;h<f;h++){const d=c[h],g=l[h];o[h]=[this[Vc].keys&&d!==void 0?t5(d):void 0,this[Vc].values&&g!==void 0?t5(g):void 0]}lJ(s)};this[Vc].keys||e<1/0?a.getAllKeys(i,e<1/0?e:void 0).onsuccess=f=>{c=f.target.result,u()}:(c=[],this.nextTick(u)),this[Vc].values?a.getAll(i,e<1/0?e:void 0).onsuccess=f=>{l=f.target.result,u()}:(l=[],this.nextTick(u))}s.onabort=()=>{n(s.error||new Error("aborted by user")),n=null},s.oncomplete=()=>{n(null,o),n=null}}_next(e){if(this[gf].length>0){const[r,n]=this[gf].shift();this.nextTick(e,null,r,n)}else if(this[Wh])this.nextTick(e);else{let r=Math.min(100,this.limit-this.count);this[O2]&&(this[O2]=!1,r=1),this._nextv(r,cJ,(n,i)=>{if(n)return e(n);this[gf]=i,this._next(e)})}}_all(e,r){this[O2]=!1;const n=this[gf].splice(0,this[gf].length),i=this.limit-this.count-n.length;if(i<=0)return this.nextTick(r,null,n);this._nextv(i,cJ,(s,a)=>{if(s)return r(s);n.length>0&&(a=n.concat(a)),r(null,a)})}_seek(e,r){this[O2]=!0,this[gf]=[],this[Wh]=!1,this[Np]=void 0,this[Kh]={...this[Vc]};let n;try{n=oJ(this[Vc])}catch{this[Wh]=!0;return}n!==null&&!n.includes(e)?this[Wh]=!0:this[Vc].reverse?this[Kh].lte=e:this[Kh].gte=e}};O0e.Iterator=yst;function lJ(t){typeof t.commit=="function"&&t.commit()}var vst=function(e,r,n,i,s){if(i.limit===0)return e.nextTick(s);const a=e.db.transaction([r],"readwrite"),o=a.objectStore(r);let c=0;a.oncomplete=function(){s()},a.onabort=function(){s(a.error||new Error("aborted by user"))};const l=o.openKeyCursor?"openKeyCursor":"openCursor",u=i.reverse?"prev":"next";o[l](n,u).onsuccess=function(f){const h=f.target.result;h&&(o.delete(h.key).onsuccess=function(){(i.limit<=0||++c<i.limit)&&h.continue()})}};const{AbstractLevel:bst}=op,uJ=wh,wst=hst,{fromCallback:_st}=lb,{Iterator:xst}=O0e,fJ=M0e,Est=vst,Sst=N0e,L0e="level-js-",Sw=Symbol("idb"),_I=Symbol("namePrefix"),Gh=Symbol("location"),xI=Symbol("version"),Mp=Symbol("store"),Aw=Symbol("onComplete"),hJ=Symbol("promise");class F0e extends bst{constructor(e,r,n){if(typeof r=="function"||typeof n=="function")throw new uJ("The levelup-style callback argument has been removed",{code:"LEVEL_LEGACY"});const{prefix:i,version:s,...a}=r||{};if(super({encodings:{view:!0},snapshots:!1,createIfMissing:!1,errorIfExists:!1,seek:!0},a),typeof e!="string")throw new Error("constructor requires a location string argument");this[Gh]=e,this[_I]=i??L0e,this[xI]=parseInt(s||1,10),this[Sw]=null}get location(){return this[Gh]}get namePrefix(){return this[_I]}get version(){return this[xI]}get db(){return this[Sw]}get type(){return"browser-level"}_open(e,r){const n=indexedDB.open(this[_I]+this[Gh],this[xI]);n.onerror=function(){r(n.error||new Error("unknown error"))},n.onsuccess=()=>{this[Sw]=n.result,r()},n.onupgradeneeded=i=>{const s=i.target.result;s.objectStoreNames.contains(this[Gh])||s.createObjectStore(this[Gh])}}[Mp](e){return this[Sw].transaction([this[Gh]],e).objectStore(this[Gh])}[Aw](e,r){const n=e.transaction;n.onabort=function(){r(n.error||new Error("aborted by user"))},n.oncomplete=function(){r(null,e.result)}}_get(e,r,n){const i=this[Mp]("readonly");let s;try{s=i.get(e)}catch(a){return this.nextTick(n,a)}this[Aw](s,function(a,o){if(a)return n(a);if(o===void 0)return n(new uJ("Entry not found",{code:"LEVEL_NOT_FOUND"}));n(null,fJ(o))})}_getMany(e,r,n){const i=this[Mp]("readonly"),s=e.map(a=>o=>{let c;try{c=i.get(a)}catch(l){return o(l)}c.onsuccess=()=>{const l=c.result;o(null,l===void 0?l:fJ(l))},c.onerror=l=>{l.stopPropagation(),o(c.error)}});wst(s,16,n)}_del(e,r,n){const i=this[Mp]("readwrite");let s;try{s=i.delete(e)}catch(a){return this.nextTick(n,a)}this[Aw](s,n)}_put(e,r,n,i){const s=this[Mp]("readwrite");let a;try{a=s.put(r,e)}catch(o){return this.nextTick(i,o)}this[Aw](a,i)}_iterator(e){return new xst(this,this[Gh],e)}_batch(e,r,n){const i=this[Mp]("readwrite"),s=i.transaction;let a=0,o;s.onabort=function(){n(o||s.error||new Error("aborted by user"))},s.oncomplete=function(){n()};function c(){const l=e[a++],u=l.key;let f;try{f=l.type==="del"?i.delete(u):i.put(l.value,u)}catch(h){o=h,s.abort();return}a<e.length?f.onsuccess=c:typeof s.commit=="function"&&s.commit()}c()}_clear(e,r){let n,i;try{n=Sst(e)}catch{return this.nextTick(r)}if(e.limit>=0)return Est(this,this[Gh],n,e,r);try{const s=this[Mp]("readwrite");i=n?s.delete(n):s.clear()}catch(s){return this.nextTick(r,s)}this[Aw](i,r)}_close(e){this[Sw].close(),this.nextTick(e)}}F0e.destroy=function(t,e,r){typeof e=="function"&&(r=e,e=L0e),r=_st(r,hJ);const n=indexedDB.deleteDatabase(e+t);return n.onsuccess=function(){r()},n.onerror=function(i){r(i)},r[hJ]};x0e.BrowserLevel=F0e;var $0e=x0e.BrowserLevel;const Ast="./level",Tst="view",aN=async({path:t,valueEncoding:e}={})=>{t=t||Ast,e=e||Tst;const r=new $0e(t,{valueEncoding:e,passive:!0});return await r.open(),{put:async(u,f)=>{await r.put(u,f)},del:async u=>{await r.del(u)},get:async u=>{try{const f=await r.get(u);if(f)return f}catch{}},iterator:async function*({amount:u,reverse:f}={}){const h={limit:u||-1,reverse:f||!1};for await(const[d,g]of r.iterator(h))yield[d,g]},merge:async u=>{},clear:async()=>{await r.clear()},close:async()=>{await r.close()}}},dJ=1e6,Mu=async({size:t}={})=>{let e=new WO(t||dJ);return{put:async(l,u)=>{e.set(l,u)},del:async l=>{e.remove(l)},get:async l=>e.get(l),iterator:async function*(){for await(const l of e.keys){const u=e.get(l);yield[l,u]}},merge:async l=>{if(l)for await(const[u,f]of l.iterator())e.set(u,f)},clear:async()=>{e=new WO(t||dJ)},close:async()=>{}}},kst=16,EI=1e3,ub=async({ipfs:t,identity:e,address:r,name:n,access:i,directory:s,meta:a,headsStorage:o,entryStorage:c,indexStorage:l,referencesCount:u,syncAutomatically:f,onUpdate:h})=>{s=k1(s||"./orbitdb",`./${r}/`),a=a||{},u=Number(u)>-1?u:kst,c=c||await Ld(await Mu({size:EI}),await cb({ipfs:t,pin:!0})),o=o||await Ld(await Mu({size:EI}),await aN({path:k1(s,"/log/_heads/")})),l=l||await Ld(await Mu({size:EI}),await aN({path:k1(s,"/log/_index/")}));const d=await vit(e,{logId:r,access:i,entryStorage:c,headsStorage:o,indexStorage:l}),g=new qi.EventEmitter,p=new sh({concurrency:1}),m=async A=>{const C=async()=>{const M=await d.append(A,{referencesCount:u});return await x.add(M),h&&await h(d,M),g.emit("update",M),M.hash},R=await p.add(C);return await p.onIdle(),R},y=async A=>{const C=async()=>{const R=await Of.decode(A);R&&await d.joinEntry(R)&&(h&&await h(d,R),g.emit("update",R))};await p.add(C)},v=async()=>{await x.stop(),await p.onIdle(),await d.close(),i&&i.close&&await i.close(),g.emit("close")},_=async()=>{await p.onIdle(),await d.clear(),i&&i.drop&&await i.drop(),g.emit("drop")},x=await Ket({ipfs:t,log:d,events:g,onSynced:y,start:f});return{address:r,name:n,identity:e,meta:a,close:v,drop:_,addOperation:m,log:d,sync:x,peers:x.peers,events:g,access:i}},U0e="documents",Cst={indexBy:"_id"},V0e=({indexBy:t}=Cst)=>async({ipfs:e,identity:r,address:n,name:i,access:s,directory:a,meta:o,headsStorage:c,entryStorage:l,indexStorage:u,referencesCount:f,syncAutomatically:h,onUpdate:d})=>{const g=await ub({ipfs:e,identity:r,address:n,name:i,access:s,directory:a,meta:o,headsStorage:c,entryStorage:l,indexStorage:u,referencesCount:f,syncAutomatically:h}),{addOperation:p,log:m}=g,y=async R=>{const M=R[t];if(!M)throw new Error(`The provided document doesn't contain field '${t}'`);return p({op:"PUT",key:M,value:R})},v=async R=>{if(!await _(R))throw new Error(`No document with key '${R}' in the database`);return p({op:"DEL",key:R,value:null})},_=async R=>{for await(const M of A())if(R===M.key)return M},x=async R=>{const M=[];for await(const N of A())R(N.value)&&M.push(N.value);return M},A=async function*({amount:R}={}){const M={};let N=0;for await(const Y of m.iterator()){const{op:H,key:E,value:k}=Y.payload;if(H==="PUT"&&!M[E]?(M[E]=!0,N++,yield{hash:Y.hash,key:E,value:k}):H==="DEL"&&!M[E]&&(M[E]=!0),N>=R)break}};return{...g,type:U0e,put:y,del:v,get:_,iterator:A,query:x,indexBy:t,all:async()=>{const R=[];for await(const M of A())R.unshift(M);return R}}};V0e.type=U0e;const j0e="events",z0e=()=>async({ipfs:t,identity:e,address:r,name:n,access:i,directory:s,meta:a,headsStorage:o,entryStorage:c,indexStorage:l,referencesCount:u,syncAutomatically:f,onUpdate:h})=>{const d=await ub({ipfs:t,identity:e,address:r,name:n,access:i,directory:s,meta:a,headsStorage:o,entryStorage:c,indexStorage:l,referencesCount:u,syncAutomatically:f,onUpdate:h}),{addOperation:g,log:p}=d,m=async x=>g({op:"ADD",key:null,value:x}),y=async x=>(await p.get(x)).payload.value,v=async function*({gt:x,gte:A,lt:C,lte:R,amount:M}={}){const N=p.iterator({gt:x,gte:A,lt:C,lte:R,amount:M});for await(const Y of N){const H=Y.hash,E=Y.payload.value;yield{hash:H,value:E}}};return{...d,type:j0e,add:m,get:y,iterator:v,all:async()=>{const x=[];for await(const A of v())x.unshift(A);return x}}};z0e.type=j0e;const q0e="keyvalue",H0e=()=>async({ipfs:t,identity:e,address:r,name:n,access:i,directory:s,meta:a,headsStorage:o,entryStorage:c,indexStorage:l,referencesCount:u,syncAutomatically:f,onUpdate:h})=>{const d=await ub({ipfs:t,identity:e,address:r,name:n,access:i,directory:s,meta:a,headsStorage:o,entryStorage:c,indexStorage:l,referencesCount:u,syncAutomatically:f,onUpdate:h}),{addOperation:g,log:p}=d,m=async(A,C)=>g({op:"PUT",key:A,value:C}),y=async A=>g({op:"DEL",key:A,value:null}),v=async A=>{for await(const C of p.traverse()){const{op:R,key:M,value:N}=C.payload;if(R==="PUT"&&M===A)return N;if(R==="DEL"&&M===A)return}},_=async function*({amount:A}={}){const C={};let R=0;for await(const M of p.traverse()){const{op:N,key:Y,value:H}=M.payload;if(N==="PUT"&&!C[Y]){C[Y]=!0,R++;const E=M.hash;yield{key:Y,value:H,hash:E}}else N==="DEL"&&!C[Y]&&(C[Y]=!0);if(R>=A)break}};return{...d,type:q0e,put:m,set:m,del:y,get:v,iterator:_,all:async()=>{const A=[];for await(const C of _())A.unshift(C);return A}}};H0e.type=q0e;const oN={},fb=t=>{if(!t.type)throw new Error("Database type does not contain required field 'type'.");oN[t.type]=t},Ist=t=>{if(!t)throw new Error("Type not specified");if(!oN[t])throw new Error(`Unsupported database type: '${t}'`);return oN[t]};fb(z0e);fb(V0e);fb(H0e);const Rst=Symbol.for("@libp2p/connection"),ev=Symbol.for("@libp2p/content-routing"),p4=Symbol.for("@libp2p/peer-discovery"),nA=Symbol.for("@libp2p/peer-id");function iA(t){return t!=null&&!!t[nA]}const tv=Symbol.for("@libp2p/peer-routing"),Pst="keep-alive",_E="StrictSign",X$="StrictNoSign";var Ml;(function(t){t.Accept="accept",t.Ignore="ignore",t.Reject="reject"})(Ml||(Ml={}));const D6=Symbol.for("@libp2p/transport");var Ig;(function(t){t[t.FATAL_ALL=0]="FATAL_ALL",t[t.NO_FATAL=1]="NO_FATAL"})(Ig||(Ig={}));let sA=class cN extends Error{code;type;constructor(e="The operation was aborted"){super(e),this.name="AbortError",this.code=cN.code,this.type=cN.type}static code="ABORT_ERR";static type="aborted"},ye=class extends Error{code;props;constructor(e,r,n){super(e),this.code=r,this.name=n?.name??"CodeError",this.props=n??{}}};class Bst extends AggregateError{code;props;constructor(e,r,n,i){super(e,r),this.code=n,this.name=i?.name??"AggregateCodeError",this.props=i??{}}}const rv="ERR_TIMEOUT",Yp="ERR_INVALID_MESSAGE";const Zt=(t,...e)=>{try{[...e]}catch{}};class ea extends EventTarget{#e=new Map;constructor(){super(),Zt(1/0,this)}listenerCount(e){const r=this.#e.get(e);return r==null?0:r.length}addEventListener(e,r,n){super.addEventListener(e,r,n);let i=this.#e.get(e);i==null&&(i=[],this.#e.set(e,i)),i.push({callback:r,once:(n!==!0&&n!==!1&&n?.once)??!1})}removeEventListener(e,r,n){super.removeEventListener(e.toString(),r??null,n);let i=this.#e.get(e);i!=null&&(i=i.filter(({callback:s})=>s!==r),this.#e.set(e,i))}dispatchEvent(e){const r=super.dispatchEvent(e);let n=this.#e.get(e.type);return n==null||(n=n.filter(({once:i})=>!i),this.#e.set(e.type,n)),r}safeDispatchEvent(e,r={}){return this.dispatchEvent(new sf(e,r))}}const sf=globalThis.CustomEvent;function Z$(t){return t!=null&&typeof t.start=="function"&&typeof t.stop=="function"}async function hb(...t){const e=[];for(const r of t)Z$(r)&&e.push(r);await Promise.all(e.map(async r=>{r.beforeStart!=null&&await r.beforeStart()})),await Promise.all(e.map(async r=>{await r.start()})),await Promise.all(e.map(async r=>{r.afterStart!=null&&await r.afterStart()}))}async function db(...t){const e=[];for(const r of t)Z$(r)&&e.push(r);await Promise.all(e.map(async r=>{r.beforeStop!=null&&await r.beforeStop()})),await Promise.all(e.map(async r=>{await r.stop()})),await Promise.all(e.map(async r=>{r.afterStop!=null&&await r.afterStop()}))}const yo=Symbol.for("@libp2p/service-capabilities"),em=Symbol.for("@libp2p/service-dependencies");var as={options:{usePureJavaScript:!1}};const Ko=si(as);var J$={},Dst=J$,pJ={};J$.encode=function(t,e,r){if(typeof e!="string")throw new TypeError('"alphabet" must be a string.');if(r!==void 0&&typeof r!="number")throw new TypeError('"maxline" must be a number.');var n="";if(!(t instanceof Uint8Array))n=Ost(t,e);else{var i=0,s=e.length,a=e.charAt(0),o=[0];for(i=0;i<t.length;++i){for(var c=0,l=t[i];c<o.length;++c)l+=o[c]<<8,o[c]=l%s,l=l/s|0;for(;l>0;)o.push(l%s),l=l/s|0}for(i=0;t[i]===0&&i<t.length-1;++i)n+=a;for(i=o.length-1;i>=0;--i)n+=e[o[i]]}if(r){var u=new RegExp(".{1,"+r+"}","g");n=n.match(u).join(`\r
`)}return n};J$.decode=function(t,e){if(typeof t!="string")throw new TypeError('"input" must be a string.');if(typeof e!="string")throw new TypeError('"alphabet" must be a string.');var r=pJ[e];if(!r){r=pJ[e]=[];for(var n=0;n<e.length;++n)r[e.charCodeAt(n)]=n}t=t.replace(/\s/g,"");for(var i=e.length,s=e.charAt(0),a=[0],n=0;n<t.length;n++){var o=r[t.charCodeAt(n)];if(o===void 0)return;for(var c=0,l=o;c<a.length;++c)l+=a[c]*i,a[c]=l&255,l>>=8;for(;l>0;)a.push(l&255),l>>=8}for(var u=0;t[u]===s&&u<t.length-1;++u)a.push(0);return typeof We<"u"?We.from(a.reverse()):new Uint8Array(a.reverse())};function Ost(t,e){var r=0,n=e.length,i=e.charAt(0),s=[0];for(r=0;r<t.length();++r){for(var a=0,o=t.at(r);a<s.length;++a)o+=s[a]<<8,s[a]=o%n,o=o/n|0;for(;o>0;)s.push(o%n),o=o/n|0}var c="";for(r=0;t.at(r)===0&&r<t.length()-1;++r)c+=i;for(r=s.length-1;r>=0;--r)c+=e[s[r]];return c}var gJ=as,mJ=Dst,Ne=gJ.util=gJ.util||{};(function(){if(typeof Et<"u"&&Et.nextTick&&!Et.browser){Ne.nextTick=Et.nextTick,typeof setImmediate=="function"?Ne.setImmediate=setImmediate:Ne.setImmediate=Ne.nextTick;return}if(typeof setImmediate=="function"){Ne.setImmediate=function(){return setImmediate.apply(void 0,arguments)},Ne.nextTick=function(a){return setImmediate(a)};return}if(Ne.setImmediate=function(a){setTimeout(a,0)},typeof window<"u"&&typeof window.postMessage=="function"){let a=function(o){if(o.source===window&&o.data===t){o.stopPropagation();var c=e.slice();e.length=0,c.forEach(function(l){l()})}};var t="forge.setImmediate",e=[];Ne.setImmediate=function(o){e.push(o),e.length===1&&window.postMessage(t,"*")},window.addEventListener("message",a,!0)}if(typeof MutationObserver<"u"){var r=Date.now(),n=!0,i=document.createElement("div"),e=[];new MutationObserver(function(){var o=e.slice();e.length=0,o.forEach(function(c){c()})}).observe(i,{attributes:!0});var s=Ne.setImmediate;Ne.setImmediate=function(o){Date.now()-r>15?(r=Date.now(),s(o)):(e.push(o),e.length===1&&i.setAttribute("a",n=!n))}}Ne.nextTick=Ne.setImmediate})();Ne.isNodejs=typeof Et<"u"&&Et.versions&&Et.versions.node;Ne.globalScope=function(){return Ne.isNodejs?It:typeof self>"u"?window:self}();Ne.isArray=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"};Ne.isArrayBuffer=function(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer};Ne.isArrayBufferView=function(t){return t&&Ne.isArrayBuffer(t.buffer)&&t.byteLength!==void 0};function O6(t){if(!(t===8||t===16||t===24||t===32))throw new Error("Only 8, 16, 24, or 32 bits supported: "+t)}Ne.ByteBuffer=Q$;function Q$(t){if(this.data="",this.read=0,typeof t=="string")this.data=t;else if(Ne.isArrayBuffer(t)||Ne.isArrayBufferView(t))if(typeof We<"u"&&t instanceof We)this.data=t.toString("binary");else{var e=new Uint8Array(t);try{this.data=String.fromCharCode.apply(null,e)}catch{for(var r=0;r<e.length;++r)this.putByte(e[r])}}else(t instanceof Q$||typeof t=="object"&&typeof t.data=="string"&&typeof t.read=="number")&&(this.data=t.data,this.read=t.read);this._constructedStringLength=0}Ne.ByteStringBuffer=Q$;var Nst=4096;Ne.ByteStringBuffer.prototype._optimizeConstructedString=function(t){this._constructedStringLength+=t,this._constructedStringLength>Nst&&(this.data.substr(0,1),this._constructedStringLength=0)};Ne.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read};Ne.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0};Ne.ByteStringBuffer.prototype.putByte=function(t){return this.putBytes(String.fromCharCode(t))};Ne.ByteStringBuffer.prototype.fillWithByte=function(t,e){t=String.fromCharCode(t);for(var r=this.data;e>0;)e&1&&(r+=t),e>>>=1,e>0&&(t+=t);return this.data=r,this._optimizeConstructedString(e),this};Ne.ByteStringBuffer.prototype.putBytes=function(t){return this.data+=t,this._optimizeConstructedString(t.length),this};Ne.ByteStringBuffer.prototype.putString=function(t){return this.putBytes(Ne.encodeUtf8(t))};Ne.ByteStringBuffer.prototype.putInt16=function(t){return this.putBytes(String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};Ne.ByteStringBuffer.prototype.putInt24=function(t){return this.putBytes(String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};Ne.ByteStringBuffer.prototype.putInt32=function(t){return this.putBytes(String.fromCharCode(t>>24&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};Ne.ByteStringBuffer.prototype.putInt16Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255))};Ne.ByteStringBuffer.prototype.putInt24Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t>>16&255))};Ne.ByteStringBuffer.prototype.putInt32Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>24&255))};Ne.ByteStringBuffer.prototype.putInt=function(t,e){O6(e);var r="";do e-=8,r+=String.fromCharCode(t>>e&255);while(e>0);return this.putBytes(r)};Ne.ByteStringBuffer.prototype.putSignedInt=function(t,e){return t<0&&(t+=2<<e-1),this.putInt(t,e)};Ne.ByteStringBuffer.prototype.putBuffer=function(t){return this.putBytes(t.getBytes())};Ne.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)};Ne.ByteStringBuffer.prototype.getInt16=function(){var t=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,t};Ne.ByteStringBuffer.prototype.getInt24=function(){var t=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,t};Ne.ByteStringBuffer.prototype.getInt32=function(){var t=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,t};Ne.ByteStringBuffer.prototype.getInt16Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,t};Ne.ByteStringBuffer.prototype.getInt24Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,t};Ne.ByteStringBuffer.prototype.getInt32Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,t};Ne.ByteStringBuffer.prototype.getInt=function(t){O6(t);var e=0;do e=(e<<8)+this.data.charCodeAt(this.read++),t-=8;while(t>0);return e};Ne.ByteStringBuffer.prototype.getSignedInt=function(t){var e=this.getInt(t),r=2<<t-2;return e>=r&&(e-=r<<1),e};Ne.ByteStringBuffer.prototype.getBytes=function(t){var e;return t?(t=Math.min(this.length(),t),e=this.data.slice(this.read,this.read+t),this.read+=t):t===0?e="":(e=this.read===0?this.data:this.data.slice(this.read),this.clear()),e};Ne.ByteStringBuffer.prototype.bytes=function(t){return typeof t>"u"?this.data.slice(this.read):this.data.slice(this.read,this.read+t)};Ne.ByteStringBuffer.prototype.at=function(t){return this.data.charCodeAt(this.read+t)};Ne.ByteStringBuffer.prototype.setAt=function(t,e){return this.data=this.data.substr(0,this.read+t)+String.fromCharCode(e)+this.data.substr(this.read+t+1),this};Ne.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)};Ne.ByteStringBuffer.prototype.copy=function(){var t=Ne.createBuffer(this.data);return t.read=this.read,t};Ne.ByteStringBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this};Ne.ByteStringBuffer.prototype.clear=function(){return this.data="",this.read=0,this};Ne.ByteStringBuffer.prototype.truncate=function(t){var e=Math.max(0,this.length()-t);return this.data=this.data.substr(this.read,e),this.read=0,this};Ne.ByteStringBuffer.prototype.toHex=function(){for(var t="",e=this.read;e<this.data.length;++e){var r=this.data.charCodeAt(e);r<16&&(t+="0"),t+=r.toString(16)}return t};Ne.ByteStringBuffer.prototype.toString=function(){return Ne.decodeUtf8(this.bytes())};function Mst(t,e){e=e||{},this.read=e.readOffset||0,this.growSize=e.growSize||1024;var r=Ne.isArrayBuffer(t),n=Ne.isArrayBufferView(t);if(r||n){r?this.data=new DataView(t):this.data=new DataView(t.buffer,t.byteOffset,t.byteLength),this.write="writeOffset"in e?e.writeOffset:this.data.byteLength;return}this.data=new DataView(new ArrayBuffer(0)),this.write=0,t!=null&&this.putBytes(t),"writeOffset"in e&&(this.write=e.writeOffset)}Ne.DataBuffer=Mst;Ne.DataBuffer.prototype.length=function(){return this.write-this.read};Ne.DataBuffer.prototype.isEmpty=function(){return this.length()<=0};Ne.DataBuffer.prototype.accommodate=function(t,e){if(this.length()>=t)return this;e=Math.max(e||this.growSize,t);var r=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),n=new Uint8Array(this.length()+e);return n.set(r),this.data=new DataView(n.buffer),this};Ne.DataBuffer.prototype.putByte=function(t){return this.accommodate(1),this.data.setUint8(this.write++,t),this};Ne.DataBuffer.prototype.fillWithByte=function(t,e){this.accommodate(e);for(var r=0;r<e;++r)this.data.setUint8(t);return this};Ne.DataBuffer.prototype.putBytes=function(t,e){if(Ne.isArrayBufferView(t)){var r=new Uint8Array(t.buffer,t.byteOffset,t.byteLength),n=r.byteLength-r.byteOffset;this.accommodate(n);var i=new Uint8Array(this.data.buffer,this.write);return i.set(r),this.write+=n,this}if(Ne.isArrayBuffer(t)){var r=new Uint8Array(t);this.accommodate(r.byteLength);var i=new Uint8Array(this.data.buffer);return i.set(r,this.write),this.write+=r.byteLength,this}if(t instanceof Ne.DataBuffer||typeof t=="object"&&typeof t.read=="number"&&typeof t.write=="number"&&Ne.isArrayBufferView(t.data)){var r=new Uint8Array(t.data.byteLength,t.read,t.length());this.accommodate(r.byteLength);var i=new Uint8Array(t.data.byteLength,this.write);return i.set(r),this.write+=r.byteLength,this}if(t instanceof Ne.ByteStringBuffer&&(t=t.data,e="binary"),e=e||"binary",typeof t=="string"){var s;if(e==="hex")return this.accommodate(Math.ceil(t.length/2)),s=new Uint8Array(this.data.buffer,this.write),this.write+=Ne.binary.hex.decode(t,s,this.write),this;if(e==="base64")return this.accommodate(Math.ceil(t.length/4)*3),s=new Uint8Array(this.data.buffer,this.write),this.write+=Ne.binary.base64.decode(t,s,this.write),this;if(e==="utf8"&&(t=Ne.encodeUtf8(t),e="binary"),e==="binary"||e==="raw")return this.accommodate(t.length),s=new Uint8Array(this.data.buffer,this.write),this.write+=Ne.binary.raw.decode(s),this;if(e==="utf16")return this.accommodate(t.length*2),s=new Uint16Array(this.data.buffer,this.write),this.write+=Ne.text.utf16.encode(s),this;throw new Error("Invalid encoding: "+e)}throw Error("Invalid parameter: "+t)};Ne.DataBuffer.prototype.putBuffer=function(t){return this.putBytes(t),t.clear(),this};Ne.DataBuffer.prototype.putString=function(t){return this.putBytes(t,"utf16")};Ne.DataBuffer.prototype.putInt16=function(t){return this.accommodate(2),this.data.setInt16(this.write,t),this.write+=2,this};Ne.DataBuffer.prototype.putInt24=function(t){return this.accommodate(3),this.data.setInt16(this.write,t>>8&65535),this.data.setInt8(this.write,t>>16&255),this.write+=3,this};Ne.DataBuffer.prototype.putInt32=function(t){return this.accommodate(4),this.data.setInt32(this.write,t),this.write+=4,this};Ne.DataBuffer.prototype.putInt16Le=function(t){return this.accommodate(2),this.data.setInt16(this.write,t,!0),this.write+=2,this};Ne.DataBuffer.prototype.putInt24Le=function(t){return this.accommodate(3),this.data.setInt8(this.write,t>>16&255),this.data.setInt16(this.write,t>>8&65535,!0),this.write+=3,this};Ne.DataBuffer.prototype.putInt32Le=function(t){return this.accommodate(4),this.data.setInt32(this.write,t,!0),this.write+=4,this};Ne.DataBuffer.prototype.putInt=function(t,e){O6(e),this.accommodate(e/8);do e-=8,this.data.setInt8(this.write++,t>>e&255);while(e>0);return this};Ne.DataBuffer.prototype.putSignedInt=function(t,e){return O6(e),this.accommodate(e/8),t<0&&(t+=2<<e-1),this.putInt(t,e)};Ne.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)};Ne.DataBuffer.prototype.getInt16=function(){var t=this.data.getInt16(this.read);return this.read+=2,t};Ne.DataBuffer.prototype.getInt24=function(){var t=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,t};Ne.DataBuffer.prototype.getInt32=function(){var t=this.data.getInt32(this.read);return this.read+=4,t};Ne.DataBuffer.prototype.getInt16Le=function(){var t=this.data.getInt16(this.read,!0);return this.read+=2,t};Ne.DataBuffer.prototype.getInt24Le=function(){var t=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,t};Ne.DataBuffer.prototype.getInt32Le=function(){var t=this.data.getInt32(this.read,!0);return this.read+=4,t};Ne.DataBuffer.prototype.getInt=function(t){O6(t);var e=0;do e=(e<<8)+this.data.getInt8(this.read++),t-=8;while(t>0);return e};Ne.DataBuffer.prototype.getSignedInt=function(t){var e=this.getInt(t),r=2<<t-2;return e>=r&&(e-=r<<1),e};Ne.DataBuffer.prototype.getBytes=function(t){var e;return t?(t=Math.min(this.length(),t),e=this.data.slice(this.read,this.read+t),this.read+=t):t===0?e="":(e=this.read===0?this.data:this.data.slice(this.read),this.clear()),e};Ne.DataBuffer.prototype.bytes=function(t){return typeof t>"u"?this.data.slice(this.read):this.data.slice(this.read,this.read+t)};Ne.DataBuffer.prototype.at=function(t){return this.data.getUint8(this.read+t)};Ne.DataBuffer.prototype.setAt=function(t,e){return this.data.setUint8(t,e),this};Ne.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)};Ne.DataBuffer.prototype.copy=function(){return new Ne.DataBuffer(this)};Ne.DataBuffer.prototype.compact=function(){if(this.read>0){var t=new Uint8Array(this.data.buffer,this.read),e=new Uint8Array(t.byteLength);e.set(t),this.data=new DataView(e),this.write-=this.read,this.read=0}return this};Ne.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this};Ne.DataBuffer.prototype.truncate=function(t){return this.write=Math.max(0,this.length()-t),this.read=Math.min(this.read,this.write),this};Ne.DataBuffer.prototype.toHex=function(){for(var t="",e=this.read;e<this.data.byteLength;++e){var r=this.data.getUint8(e);r<16&&(t+="0"),t+=r.toString(16)}return t};Ne.DataBuffer.prototype.toString=function(t){var e=new Uint8Array(this.data,this.read,this.length());if(t=t||"utf8",t==="binary"||t==="raw")return Ne.binary.raw.encode(e);if(t==="hex")return Ne.binary.hex.encode(e);if(t==="base64")return Ne.binary.base64.encode(e);if(t==="utf8")return Ne.text.utf8.decode(e);if(t==="utf16")return Ne.text.utf16.decode(e);throw new Error("Invalid encoding: "+t)};Ne.createBuffer=function(t,e){return e=e||"raw",t!==void 0&&e==="utf8"&&(t=Ne.encodeUtf8(t)),new Ne.ByteBuffer(t)};Ne.fillString=function(t,e){for(var r="";e>0;)e&1&&(r+=t),e>>>=1,e>0&&(t+=t);return r};Ne.xorBytes=function(t,e,r){for(var n="",i="",s="",a=0,o=0;r>0;--r,++a)i=t.charCodeAt(a)^e.charCodeAt(a),o>=10&&(n+=s,s="",o=0),s+=String.fromCharCode(i),++o;return n+=s,n};Ne.hexToBytes=function(t){var e="",r=0;for(t.length&!0&&(r=1,e+=String.fromCharCode(parseInt(t[0],16)));r<t.length;r+=2)e+=String.fromCharCode(parseInt(t.substr(r,2),16));return e};Ne.bytesToHex=function(t){return Ne.createBuffer(t).toHex()};Ne.int32ToBytes=function(t){return String.fromCharCode(t>>24&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255)};var p1="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",g1=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],W0e="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";Ne.encode64=function(t,e){for(var r="",n="",i,s,a,o=0;o<t.length;)i=t.charCodeAt(o++),s=t.charCodeAt(o++),a=t.charCodeAt(o++),r+=p1.charAt(i>>2),r+=p1.charAt((i&3)<<4|s>>4),isNaN(s)?r+="==":(r+=p1.charAt((s&15)<<2|a>>6),r+=isNaN(a)?"=":p1.charAt(a&63)),e&&r.length>e&&(n+=r.substr(0,e)+`\r
`,r=r.substr(e));return n+=r,n};Ne.decode64=function(t){t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var e="",r,n,i,s,a=0;a<t.length;)r=g1[t.charCodeAt(a++)-43],n=g1[t.charCodeAt(a++)-43],i=g1[t.charCodeAt(a++)-43],s=g1[t.charCodeAt(a++)-43],e+=String.fromCharCode(r<<2|n>>4),i!==64&&(e+=String.fromCharCode((n&15)<<4|i>>2),s!==64&&(e+=String.fromCharCode((i&3)<<6|s)));return e};Ne.encodeUtf8=function(t){return unescape(encodeURIComponent(t))};Ne.decodeUtf8=function(t){return decodeURIComponent(escape(t))};Ne.binary={raw:{},hex:{},base64:{},base58:{},baseN:{encode:mJ.encode,decode:mJ.decode}};Ne.binary.raw.encode=function(t){return String.fromCharCode.apply(null,t)};Ne.binary.raw.decode=function(t,e,r){var n=e;n||(n=new Uint8Array(t.length)),r=r||0;for(var i=r,s=0;s<t.length;++s)n[i++]=t.charCodeAt(s);return e?i-r:n};Ne.binary.hex.encode=Ne.bytesToHex;Ne.binary.hex.decode=function(t,e,r){var n=e;n||(n=new Uint8Array(Math.ceil(t.length/2))),r=r||0;var i=0,s=r;for(t.length&1&&(i=1,n[s++]=parseInt(t[0],16));i<t.length;i+=2)n[s++]=parseInt(t.substr(i,2),16);return e?s-r:n};Ne.binary.base64.encode=function(t,e){for(var r="",n="",i,s,a,o=0;o<t.byteLength;)i=t[o++],s=t[o++],a=t[o++],r+=p1.charAt(i>>2),r+=p1.charAt((i&3)<<4|s>>4),isNaN(s)?r+="==":(r+=p1.charAt((s&15)<<2|a>>6),r+=isNaN(a)?"=":p1.charAt(a&63)),e&&r.length>e&&(n+=r.substr(0,e)+`\r
`,r=r.substr(e));return n+=r,n};Ne.binary.base64.decode=function(t,e,r){var n=e;n||(n=new Uint8Array(Math.ceil(t.length/4)*3)),t=t.replace(/[^A-Za-z0-9\+\/\=]/g,""),r=r||0;for(var i,s,a,o,c=0,l=r;c<t.length;)i=g1[t.charCodeAt(c++)-43],s=g1[t.charCodeAt(c++)-43],a=g1[t.charCodeAt(c++)-43],o=g1[t.charCodeAt(c++)-43],n[l++]=i<<2|s>>4,a!==64&&(n[l++]=(s&15)<<4|a>>2,o!==64&&(n[l++]=(a&3)<<6|o));return e?l-r:n.subarray(0,l)};Ne.binary.base58.encode=function(t,e){return Ne.binary.baseN.encode(t,W0e,e)};Ne.binary.base58.decode=function(t,e){return Ne.binary.baseN.decode(t,W0e,e)};Ne.text={utf8:{},utf16:{}};Ne.text.utf8.encode=function(t,e,r){t=Ne.encodeUtf8(t);var n=e;n||(n=new Uint8Array(t.length)),r=r||0;for(var i=r,s=0;s<t.length;++s)n[i++]=t.charCodeAt(s);return e?i-r:n};Ne.text.utf8.decode=function(t){return Ne.decodeUtf8(String.fromCharCode.apply(null,t))};Ne.text.utf16.encode=function(t,e,r){var n=e;n||(n=new Uint8Array(t.length*2));var i=new Uint16Array(n.buffer);r=r||0;for(var s=r,a=r,o=0;o<t.length;++o)i[a++]=t.charCodeAt(o),s+=2;return e?s-r:n};Ne.text.utf16.decode=function(t){return String.fromCharCode.apply(null,new Uint16Array(t.buffer))};Ne.deflate=function(t,e,r){if(e=Ne.decode64(t.deflate(Ne.encode64(e)).rval),r){var n=2,i=e.charCodeAt(1);i&32&&(n=6),e=e.substring(n,e.length-4)}return e};Ne.inflate=function(t,e,r){var n=t.inflate(Ne.encode64(e)).rval;return n===null?null:Ne.decode64(n)};var eU=function(t,e,r){if(!t)throw new Error("WebStorage not available.");var n;if(r===null?n=t.removeItem(e):(r=Ne.encode64(JSON.stringify(r)),n=t.setItem(e,r)),typeof n<"u"&&n.rval!==!0){var i=new Error(n.error.message);throw i.id=n.error.id,i.name=n.error.name,i}},tU=function(t,e){if(!t)throw new Error("WebStorage not available.");var r=t.getItem(e);if(t.init)if(r.rval===null){if(r.error){var n=new Error(r.error.message);throw n.id=r.error.id,n.name=r.error.name,n}r=null}else r=r.rval;return r!==null&&(r=JSON.parse(Ne.decode64(r))),r},Lst=function(t,e,r,n){var i=tU(t,e);i===null&&(i={}),i[r]=n,eU(t,e,i)},Fst=function(t,e,r){var n=tU(t,e);return n!==null&&(n=r in n?n[r]:null),n},$st=function(t,e,r){var n=tU(t,e);if(n!==null&&r in n){delete n[r];var i=!0;for(var s in n){i=!1;break}i&&(n=null),eU(t,e,n)}},Ust=function(t,e){eU(t,e,null)},aA=function(t,e,r){var n=null;typeof r>"u"&&(r=["web","flash"]);var i,s=!1,a=null;for(var o in r){i=r[o];try{if(i==="flash"||i==="both"){if(e[0]===null)throw new Error("Flash local storage not available.");n=t.apply(this,e),s=i==="flash"}(i==="web"||i==="both")&&(e[0]=localStorage,n=t.apply(this,e),s=!0)}catch(c){a=c}if(s)break}if(!s)throw a;return n};Ne.setItem=function(t,e,r,n,i){aA(Lst,arguments,i)};Ne.getItem=function(t,e,r,n){return aA(Fst,arguments,n)};Ne.removeItem=function(t,e,r,n){aA($st,arguments,n)};Ne.clearItems=function(t,e,r){aA(Ust,arguments,r)};Ne.isEmpty=function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0};Ne.format=function(t){for(var e=/%./g,r,n,i=0,s=[],a=0;r=e.exec(t);){n=t.substring(a,e.lastIndex-2),n.length>0&&s.push(n),a=e.lastIndex;var o=r[0][1];switch(o){case"s":case"o":i<arguments.length?s.push(arguments[i+++1]):s.push("<?>");break;case"%":s.push("%");break;default:s.push("<%"+o+"?>")}}return s.push(t.substring(a)),s.join("")};Ne.formatNumber=function(t,e,r,n){var i=t,s=isNaN(e=Math.abs(e))?2:e,a=r===void 0?",":r,o=n===void 0?".":n,c=i<0?"-":"",l=parseInt(i=Math.abs(+i||0).toFixed(s),10)+"",u=l.length>3?l.length%3:0;return c+(u?l.substr(0,u)+o:"")+l.substr(u).replace(/(\d{3})(?=\d)/g,"$1"+o)+(s?a+Math.abs(i-l).toFixed(s).slice(2):"")};Ne.formatSize=function(t){return t>=1073741824?t=Ne.formatNumber(t/1073741824,2,".","")+" GiB":t>=1048576?t=Ne.formatNumber(t/1048576,2,".","")+" MiB":t>=1024?t=Ne.formatNumber(t/1024,0)+" KiB":t=Ne.formatNumber(t,0)+" bytes",t};Ne.bytesFromIP=function(t){return t.indexOf(".")!==-1?Ne.bytesFromIPv4(t):t.indexOf(":")!==-1?Ne.bytesFromIPv6(t):null};Ne.bytesFromIPv4=function(t){if(t=t.split("."),t.length!==4)return null;for(var e=Ne.createBuffer(),r=0;r<t.length;++r){var n=parseInt(t[r],10);if(isNaN(n))return null;e.putByte(n)}return e.getBytes()};Ne.bytesFromIPv6=function(t){var e=0;t=t.split(":").filter(function(a){return a.length===0&&++e,!0});for(var r=(8-t.length+e)*2,n=Ne.createBuffer(),i=0;i<8;++i){if(!t[i]||t[i].length===0){n.fillWithByte(0,r),r=0;continue}var s=Ne.hexToBytes(t[i]);s.length<2&&n.putByte(0),n.putBytes(s)}return n.getBytes()};Ne.bytesToIP=function(t){return t.length===4?Ne.bytesToIPv4(t):t.length===16?Ne.bytesToIPv6(t):null};Ne.bytesToIPv4=function(t){if(t.length!==4)return null;for(var e=[],r=0;r<t.length;++r)e.push(t.charCodeAt(r));return e.join(".")};Ne.bytesToIPv6=function(t){if(t.length!==16)return null;for(var e=[],r=[],n=0,i=0;i<t.length;i+=2){for(var s=Ne.bytesToHex(t[i]+t[i+1]);s[0]==="0"&&s!=="0";)s=s.substr(1);if(s==="0"){var a=r[r.length-1],o=e.length;!a||o!==a.end+1?r.push({start:o,end:o}):(a.end=o,a.end-a.start>r[n].end-r[n].start&&(n=r.length-1))}e.push(s)}if(r.length>0){var c=r[n];c.end-c.start>0&&(e.splice(c.start,c.end-c.start+1,""),c.start===0&&e.unshift(""),c.end===7&&e.push(""))}return e.join(":")};Ne.estimateCores=function(t,e){if(typeof t=="function"&&(e=t,t={}),t=t||{},"cores"in Ne&&!t.update)return e(null,Ne.cores);if(typeof navigator<"u"&&"hardwareConcurrency"in navigator&&navigator.hardwareConcurrency>0)return Ne.cores=navigator.hardwareConcurrency,e(null,Ne.cores);if(typeof Worker>"u")return Ne.cores=1,e(null,Ne.cores);if(typeof Blob>"u")return Ne.cores=2,e(null,Ne.cores);var r=URL.createObjectURL(new Blob(["(",function(){self.addEventListener("message",function(a){var o=Date.now(),c=o+4;self.postMessage({st:o,et:c})})}.toString(),")()"],{type:"application/javascript"}));n([],5,16);function n(a,o,c){if(o===0){var l=Math.floor(a.reduce(function(u,f){return u+f},0)/a.length);return Ne.cores=Math.max(1,l),URL.revokeObjectURL(r),e(null,Ne.cores)}i(c,function(u,f){a.push(s(c,f)),n(a,o-1,c)})}function i(a,o){for(var c=[],l=[],u=0;u<a;++u){var f=new Worker(r);f.addEventListener("message",function(h){if(l.push(h.data),l.length===a){for(var d=0;d<a;++d)c[d].terminate();o(null,l)}}),c.push(f)}for(var u=0;u<a;++u)c[u].postMessage(u)}function s(a,o){for(var c=[],l=0;l<a;++l)for(var u=o[l],f=c[l]=[],h=0;h<a;++h)if(l!==h){var d=o[h];(u.st>d.st&&u.st<d.et||d.st>u.st&&d.st<u.et)&&f.push(h)}return c.reduce(function(g,p){return Math.max(g,p.length)},0)}};var ya=as;ya.cipher=ya.cipher||{};ya.cipher.algorithms=ya.cipher.algorithms||{};ya.cipher.createCipher=function(t,e){var r=t;if(typeof r=="string"&&(r=ya.cipher.getAlgorithm(r),r&&(r=r())),!r)throw new Error("Unsupported algorithm: "+t);return new ya.cipher.BlockCipher({algorithm:r,key:e,decrypt:!1})};ya.cipher.createDecipher=function(t,e){var r=t;if(typeof r=="string"&&(r=ya.cipher.getAlgorithm(r),r&&(r=r())),!r)throw new Error("Unsupported algorithm: "+t);return new ya.cipher.BlockCipher({algorithm:r,key:e,decrypt:!0})};ya.cipher.registerAlgorithm=function(t,e){t=t.toUpperCase(),ya.cipher.algorithms[t]=e};ya.cipher.getAlgorithm=function(t){return t=t.toUpperCase(),t in ya.cipher.algorithms?ya.cipher.algorithms[t]:null};var rU=ya.cipher.BlockCipher=function(t){this.algorithm=t.algorithm,this.mode=this.algorithm.mode,this.blockSize=this.mode.blockSize,this._finish=!1,this._input=null,this.output=null,this._op=t.decrypt?this.mode.decrypt:this.mode.encrypt,this._decrypt=t.decrypt,this.algorithm.initialize(t)};rU.prototype.start=function(t){t=t||{};var e={};for(var r in t)e[r]=t[r];e.decrypt=this._decrypt,this._finish=!1,this._input=ya.util.createBuffer(),this.output=t.output||ya.util.createBuffer(),this.mode.start(e)};rU.prototype.update=function(t){for(t&&this._input.putBuffer(t);!this._op.call(this.mode,this._input,this.output,this._finish)&&!this._finish;);this._input.compact()};rU.prototype.finish=function(t){t&&(this.mode.name==="ECB"||this.mode.name==="CBC")&&(this.mode.pad=function(r){return t(this.blockSize,r,!1)},this.mode.unpad=function(r){return t(this.blockSize,r,!0)});var e={};return e.decrypt=this._decrypt,e.overflow=this._input.length()%this.blockSize,!(!this._decrypt&&this.mode.pad&&!this.mode.pad(this._input,e)||(this._finish=!0,this.update(),this._decrypt&&this.mode.unpad&&!this.mode.unpad(this.output,e))||this.mode.afterFinish&&!this.mode.afterFinish(this.output,e))};var da=as;da.cipher=da.cipher||{};var cn=da.cipher.modes=da.cipher.modes||{};cn.ecb=function(t){t=t||{},this.name="ECB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};cn.ecb.prototype.start=function(t){};cn.ecb.prototype.encrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._outBlock[n])};cn.ecb.prototype.decrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._outBlock[n])};cn.ecb.prototype.pad=function(t,e){var r=t.length()===this.blockSize?this.blockSize:this.blockSize-t.length();return t.fillWithByte(r,r),!0};cn.ecb.prototype.unpad=function(t,e){if(e.overflow>0)return!1;var r=t.length(),n=t.at(r-1);return n>this.blockSize<<2?!1:(t.truncate(n),!0)};cn.cbc=function(t){t=t||{},this.name="CBC",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};cn.cbc.prototype.start=function(t){if(t.iv===null){if(!this._prev)throw new Error("Invalid IV parameter.");this._iv=this._prev.slice(0)}else if("iv"in t)this._iv=oA(t.iv,this.blockSize),this._prev=this._iv.slice(0);else throw new Error("Invalid IV parameter.")};cn.cbc.prototype.encrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=this._prev[n]^t.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._outBlock[n]);this._prev=this._outBlock};cn.cbc.prototype.decrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._prev[n]^this._outBlock[n]);this._prev=this._inBlock.slice(0)};cn.cbc.prototype.pad=function(t,e){var r=t.length()===this.blockSize?this.blockSize:this.blockSize-t.length();return t.fillWithByte(r,r),!0};cn.cbc.prototype.unpad=function(t,e){if(e.overflow>0)return!1;var r=t.length(),n=t.at(r-1);return n>this.blockSize<<2?!1:(t.truncate(n),!0)};cn.cfb=function(t){t=t||{},this.name="CFB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialBlock=new Array(this._ints),this._partialOutput=da.util.createBuffer(),this._partialBytes=0};cn.cfb.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=oA(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};cn.cfb.prototype.encrypt=function(t,e,r){var n=t.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)this._inBlock[i]=t.getInt32()^this._outBlock[i],e.putInt32(this._inBlock[i]);return}var s=(this.blockSize-n)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialBlock[i]=t.getInt32()^this._outBlock[i],this._partialOutput.putInt32(this._partialBlock[i]);if(s>0)t.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return e.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};cn.cfb.prototype.decrypt=function(t,e,r){var n=t.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)this._inBlock[i]=t.getInt32(),e.putInt32(this._inBlock[i]^this._outBlock[i]);return}var s=(this.blockSize-n)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialBlock[i]=t.getInt32(),this._partialOutput.putInt32(this._partialBlock[i]^this._outBlock[i]);if(s>0)t.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return e.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};cn.ofb=function(t){t=t||{},this.name="OFB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=da.util.createBuffer(),this._partialBytes=0};cn.ofb.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=oA(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};cn.ofb.prototype.encrypt=function(t,e,r){var n=t.length();if(t.length()===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)e.putInt32(t.getInt32()^this._outBlock[i]),this._inBlock[i]=this._outBlock[i];return}var s=(this.blockSize-n)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(t.getInt32()^this._outBlock[i]);if(s>0)t.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._outBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return e.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};cn.ofb.prototype.decrypt=cn.ofb.prototype.encrypt;cn.ctr=function(t){t=t||{},this.name="CTR",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=da.util.createBuffer(),this._partialBytes=0};cn.ctr.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=oA(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};cn.ctr.prototype.encrypt=function(t,e,r){var n=t.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize)for(var i=0;i<this._ints;++i)e.putInt32(t.getInt32()^this._outBlock[i]);else{var s=(this.blockSize-n)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(t.getInt32()^this._outBlock[i]);if(s>0&&(t.read-=this.blockSize),this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return e.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}cA(this._inBlock)};cn.ctr.prototype.decrypt=cn.ctr.prototype.encrypt;cn.gcm=function(t){t=t||{},this.name="GCM",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints),this._partialOutput=da.util.createBuffer(),this._partialBytes=0,this._R=3774873600};cn.gcm.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");var e=da.util.createBuffer(t.iv);this._cipherLength=0;var r;if("additionalData"in t?r=da.util.createBuffer(t.additionalData):r=da.util.createBuffer(),"tagLength"in t?this._tagLength=t.tagLength:this._tagLength=128,this._tag=null,t.decrypt&&(this._tag=da.util.createBuffer(t.tag).getBytes(),this._tag.length!==this._tagLength/8))throw new Error("Authentication tag does not match tag length.");this._hashBlock=new Array(this._ints),this.tag=null,this._hashSubkey=new Array(this._ints),this.cipher.encrypt([0,0,0,0],this._hashSubkey),this.componentBits=4,this._m=this.generateHashTable(this._hashSubkey,this.componentBits);var n=e.length();if(n===12)this._j0=[e.getInt32(),e.getInt32(),e.getInt32(),1];else{for(this._j0=[0,0,0,0];e.length()>0;)this._j0=this.ghash(this._hashSubkey,this._j0,[e.getInt32(),e.getInt32(),e.getInt32(),e.getInt32()]);this._j0=this.ghash(this._hashSubkey,this._j0,[0,0].concat(lN(n*8)))}this._inBlock=this._j0.slice(0),cA(this._inBlock),this._partialBytes=0,r=da.util.createBuffer(r),this._aDataLength=lN(r.length()*8);var i=r.length()%this.blockSize;for(i&&r.fillWithByte(0,this.blockSize-i),this._s=[0,0,0,0];r.length()>0;)this._s=this.ghash(this._hashSubkey,this._s,[r.getInt32(),r.getInt32(),r.getInt32(),r.getInt32()])};cn.gcm.prototype.encrypt=function(t,e,r){var n=t.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)e.putInt32(this._outBlock[i]^=t.getInt32());this._cipherLength+=this.blockSize}else{var s=(this.blockSize-n)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(t.getInt32()^this._outBlock[i]);if(s<=0||r){if(r){var a=n%this.blockSize;this._cipherLength+=a,this._partialOutput.truncate(this.blockSize-a)}else this._cipherLength+=this.blockSize;for(var i=0;i<this._ints;++i)this._outBlock[i]=this._partialOutput.getInt32();this._partialOutput.read-=this.blockSize}if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return t.read-=this.blockSize,e.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}this._s=this.ghash(this._hashSubkey,this._s,this._outBlock),cA(this._inBlock)};cn.gcm.prototype.decrypt=function(t,e,r){var n=t.length();if(n<this.blockSize&&!(r&&n>0))return!0;this.cipher.encrypt(this._inBlock,this._outBlock),cA(this._inBlock),this._hashBlock[0]=t.getInt32(),this._hashBlock[1]=t.getInt32(),this._hashBlock[2]=t.getInt32(),this._hashBlock[3]=t.getInt32(),this._s=this.ghash(this._hashSubkey,this._s,this._hashBlock);for(var i=0;i<this._ints;++i)e.putInt32(this._outBlock[i]^this._hashBlock[i]);n<this.blockSize?this._cipherLength+=n%this.blockSize:this._cipherLength+=this.blockSize};cn.gcm.prototype.afterFinish=function(t,e){var r=!0;e.decrypt&&e.overflow&&t.truncate(this.blockSize-e.overflow),this.tag=da.util.createBuffer();var n=this._aDataLength.concat(lN(this._cipherLength*8));this._s=this.ghash(this._hashSubkey,this._s,n);var i=[];this.cipher.encrypt(this._j0,i);for(var s=0;s<this._ints;++s)this.tag.putInt32(this._s[s]^i[s]);return this.tag.truncate(this.tag.length()%(this._tagLength/8)),e.decrypt&&this.tag.bytes()!==this._tag&&(r=!1),r};cn.gcm.prototype.multiply=function(t,e){for(var r=[0,0,0,0],n=e.slice(0),i=0;i<128;++i){var s=t[i/32|0]&1<<31-i%32;s&&(r[0]^=n[0],r[1]^=n[1],r[2]^=n[2],r[3]^=n[3]),this.pow(n,n)}return r};cn.gcm.prototype.pow=function(t,e){for(var r=t[3]&1,n=3;n>0;--n)e[n]=t[n]>>>1|(t[n-1]&1)<<31;e[0]=t[0]>>>1,r&&(e[0]^=this._R)};cn.gcm.prototype.tableMultiply=function(t){for(var e=[0,0,0,0],r=0;r<32;++r){var n=r/8|0,i=t[n]>>>(7-r%8)*4&15,s=this._m[r][i];e[0]^=s[0],e[1]^=s[1],e[2]^=s[2],e[3]^=s[3]}return e};cn.gcm.prototype.ghash=function(t,e,r){return e[0]^=r[0],e[1]^=r[1],e[2]^=r[2],e[3]^=r[3],this.tableMultiply(e)};cn.gcm.prototype.generateHashTable=function(t,e){for(var r=8/e,n=4*r,i=16*r,s=new Array(i),a=0;a<i;++a){var o=[0,0,0,0],c=a/n|0,l=(n-1-a%n)*e;o[c]=1<<e-1<<l,s[a]=this.generateSubHashTable(this.multiply(o,t),e)}return s};cn.gcm.prototype.generateSubHashTable=function(t,e){var r=1<<e,n=r>>>1,i=new Array(r);i[n]=t.slice(0);for(var s=n>>>1;s>0;)this.pow(i[2*s],i[s]=[]),s>>=1;for(s=2;s<n;){for(var a=1;a<s;++a){var o=i[s],c=i[a];i[s+a]=[o[0]^c[0],o[1]^c[1],o[2]^c[2],o[3]^c[3]]}s*=2}for(i[0]=[0,0,0,0],s=n+1;s<r;++s){var l=i[s^n];i[s]=[t[0]^l[0],t[1]^l[1],t[2]^l[2],t[3]^l[3]]}return i};function oA(t,e){if(typeof t=="string"&&(t=da.util.createBuffer(t)),da.util.isArray(t)&&t.length>4){var r=t;t=da.util.createBuffer();for(var n=0;n<r.length;++n)t.putByte(r[n])}if(t.length()<e)throw new Error("Invalid IV length; got "+t.length()+" bytes and expected "+e+" bytes.");if(!da.util.isArray(t)){for(var i=[],s=e/4,n=0;n<s;++n)i.push(t.getInt32());t=i}return t}function cA(t){t[t.length-1]=t[t.length-1]+1&4294967295}function lN(t){return[t/4294967296|0,t&4294967295]}var Ii=as;Ii.aes=Ii.aes||{};Ii.aes.startEncrypting=function(t,e,r,n){var i=lA({key:t,output:r,decrypt:!1,mode:n});return i.start(e),i};Ii.aes.createEncryptionCipher=function(t,e){return lA({key:t,output:null,decrypt:!1,mode:e})};Ii.aes.startDecrypting=function(t,e,r,n){var i=lA({key:t,output:r,decrypt:!0,mode:n});return i.start(e),i};Ii.aes.createDecryptionCipher=function(t,e){return lA({key:t,output:null,decrypt:!0,mode:e})};Ii.aes.Algorithm=function(t,e){nU||G0e();var r=this;r.name=t,r.mode=new e({blockSize:16,cipher:{encrypt:function(n,i){return fN(r._w,n,i,!1)},decrypt:function(n,i){return fN(r._w,n,i,!0)}}}),r._init=!1};Ii.aes.Algorithm.prototype.initialize=function(t){if(!this._init){var e=t.key,r;if(typeof e=="string"&&(e.length===16||e.length===24||e.length===32))e=Ii.util.createBuffer(e);else if(Ii.util.isArray(e)&&(e.length===16||e.length===24||e.length===32)){r=e,e=Ii.util.createBuffer();for(var n=0;n<r.length;++n)e.putByte(r[n])}if(!Ii.util.isArray(e)){r=e,e=[];var i=r.length();if(i===16||i===24||i===32){i=i>>>2;for(var n=0;n<i;++n)e.push(r.getInt32())}}if(!Ii.util.isArray(e)||!(e.length===4||e.length===6||e.length===8))throw new Error("Invalid key parameter.");var s=this.mode.name,a=["CFB","OFB","CTR","GCM"].indexOf(s)!==-1;this._w=Y0e(e,t.decrypt&&!a),this._init=!0}};Ii.aes._expandKey=function(t,e){return nU||G0e(),Y0e(t,e)};Ii.aes._updateBlock=fN;pb("AES-ECB",Ii.cipher.modes.ecb);pb("AES-CBC",Ii.cipher.modes.cbc);pb("AES-CFB",Ii.cipher.modes.cfb);pb("AES-OFB",Ii.cipher.modes.ofb);pb("AES-CTR",Ii.cipher.modes.ctr);pb("AES-GCM",Ii.cipher.modes.gcm);function pb(t,e){var r=function(){return new Ii.aes.Algorithm(t,e)};Ii.cipher.registerAlgorithm(t,r)}var nU=!1,N2=4,Po,uN,K0e,mg,Cu;function G0e(){nU=!0,K0e=[0,1,2,4,8,16,32,64,128,27,54];for(var t=new Array(256),e=0;e<128;++e)t[e]=e<<1,t[e+128]=e+128<<1^283;Po=new Array(256),uN=new Array(256),mg=new Array(4),Cu=new Array(4);for(var e=0;e<4;++e)mg[e]=new Array(256),Cu[e]=new Array(256);for(var r=0,n=0,i,s,a,o,c,l,u,e=0;e<256;++e){o=n^n<<1^n<<2^n<<3^n<<4,o=o>>8^o&255^99,Po[r]=o,uN[o]=r,c=t[o],i=t[r],s=t[i],a=t[s],l=c<<24^o<<16^o<<8^(o^c),u=(i^s^a)<<24^(r^a)<<16^(r^s^a)<<8^(r^i^a);for(var f=0;f<4;++f)mg[f][r]=l,Cu[f][o]=u,l=l<<24|l>>>8,u=u<<24|u>>>8;r===0?r=n=1:(r=i^t[t[t[i^a]]],n^=t[t[n]])}}function Y0e(t,e){for(var r=t.slice(0),n,i=1,s=r.length,a=s+6+1,o=N2*a,c=s;c<o;++c)n=r[c-1],c%s===0?(n=Po[n>>>16&255]<<24^Po[n>>>8&255]<<16^Po[n&255]<<8^Po[n>>>24]^K0e[i]<<24,i++):s>6&&c%s===4&&(n=Po[n>>>24]<<24^Po[n>>>16&255]<<16^Po[n>>>8&255]<<8^Po[n&255]),r[c]=r[c-s]^n;if(e){var l,u=Cu[0],f=Cu[1],h=Cu[2],d=Cu[3],g=r.slice(0);o=r.length;for(var c=0,p=o-N2;c<o;c+=N2,p-=N2)if(c===0||c===o-N2)g[c]=r[p],g[c+1]=r[p+3],g[c+2]=r[p+2],g[c+3]=r[p+1];else for(var m=0;m<N2;++m)l=r[p+m],g[c+(3&-m)]=u[Po[l>>>24]]^f[Po[l>>>16&255]]^h[Po[l>>>8&255]]^d[Po[l&255]];r=g}return r}function fN(t,e,r,n){var i=t.length/4-1,s,a,o,c,l;n?(s=Cu[0],a=Cu[1],o=Cu[2],c=Cu[3],l=uN):(s=mg[0],a=mg[1],o=mg[2],c=mg[3],l=Po);var u,f,h,d,g,p,m;u=e[0]^t[0],f=e[n?3:1]^t[1],h=e[2]^t[2],d=e[n?1:3]^t[3];for(var y=3,v=1;v<i;++v)g=s[u>>>24]^a[f>>>16&255]^o[h>>>8&255]^c[d&255]^t[++y],p=s[f>>>24]^a[h>>>16&255]^o[d>>>8&255]^c[u&255]^t[++y],m=s[h>>>24]^a[d>>>16&255]^o[u>>>8&255]^c[f&255]^t[++y],d=s[d>>>24]^a[u>>>16&255]^o[f>>>8&255]^c[h&255]^t[++y],u=g,f=p,h=m;r[0]=l[u>>>24]<<24^l[f>>>16&255]<<16^l[h>>>8&255]<<8^l[d&255]^t[++y],r[n?3:1]=l[f>>>24]<<24^l[h>>>16&255]<<16^l[d>>>8&255]<<8^l[u&255]^t[++y],r[2]=l[h>>>24]<<24^l[d>>>16&255]<<16^l[u>>>8&255]<<8^l[f&255]^t[++y],r[n?1:3]=l[d>>>24]<<24^l[u>>>16&255]<<16^l[f>>>8&255]<<8^l[h&255]^t[++y]}function lA(t){t=t||{};var e=(t.mode||"CBC").toUpperCase(),r="AES-"+e,n;t.decrypt?n=Ii.cipher.createDecipher(r,t.key):n=Ii.cipher.createCipher(r,t.key);var i=n.start;return n.start=function(s,a){var o=null;a instanceof Ii.util.ByteBuffer&&(o=a,a={}),a=a||{},a.output=o,a.iv=s,i.call(n,a)},n}const Vst=I6({prefix:"9",name:"base10",alphabet:"0123456789"}),jst=Object.freeze(Object.defineProperty({__proto__:null,base10:Vst},Symbol.toStringTag,{value:"Module"})),zst=ja({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),qst=ja({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),Hst=Object.freeze(Object.defineProperty({__proto__:null,base16:zst,base16upper:qst},Symbol.toStringTag,{value:"Module"})),Wst=ja({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),Kst=Object.freeze(Object.defineProperty({__proto__:null,base2:Wst},Symbol.toStringTag,{value:"Module"})),X0e=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),Gst=X0e.reduce((t,e,r)=>(t[r]=e,t),[]),Yst=X0e.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function Xst(t){return t.reduce((e,r)=>(e+=Gst[r],e),"")}function Zst(t){const e=[];for(const r of t){const n=Yst[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(n)}return new Uint8Array(e)}const Jst=GS({prefix:"🚀",name:"base256emoji",encode:Xst,decode:Zst}),Qst=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:Jst},Symbol.toStringTag,{value:"Module"})),Sc=ja({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),eat=ja({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Z0e=ja({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),tat=ja({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),rat=Object.freeze(Object.defineProperty({__proto__:null,base64:Sc,base64pad:eat,base64url:Z0e,base64urlpad:tat},Symbol.toStringTag,{value:"Module"})),nat=ja({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),iat=Object.freeze(Object.defineProperty({__proto__:null,base8:nat},Symbol.toStringTag,{value:"Module"})),sat=GS({prefix:"\0",name:"identity",encode:t=>nnt(t),decode:t=>rnt(t)}),aat=Object.freeze(Object.defineProperty({__proto__:null,identity:sat},Symbol.toStringTag,{value:"Module"}));new TextEncoder;const oat=new TextDecoder,J0e=512;function cat(t){return JSON.parse(oat.decode(t))}const lat="raw",Wu=85;function uat(t){return ab(t)}function fat(t){return ab(t)}const hat=Object.freeze(Object.defineProperty({__proto__:null,code:Wu,decode:fat,encode:uat,name:lat},Symbol.toStringTag,{value:"Module"})),Q0e=0,dat="identity",e1e=ab;function pat(t){return Jg(Q0e,e1e(t))}const ah={code:Q0e,name:dat,encode:e1e,digest:pat};function iU({name:t,code:e,encode:r}){return new gat(t,e,r)}class gat{name;code;encode;constructor(e,r,n){this.name=e,this.code=r,this.encode=n}digest(e){if(e instanceof Uint8Array){const r=this.encode(e);return r instanceof Uint8Array?Jg(this.code,r):r.then(n=>Jg(this.code,n))}else throw Error("Unknown type, must be binary type")}}function t1e(t){return async e=>new Uint8Array(await crypto.subtle.digest(t,e))}const wn=iU({name:"sha2-256",code:18,encode:t1e("SHA-256")}),mat=iU({name:"sha2-512",code:19,encode:t1e("SHA-512")}),tm={...aat,...Kst,...iat,...jst,...Hst,...wnt,...xnt,...Snt,...rat,...Qst};function r1e(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}const yJ=r1e("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),SI=r1e("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);const e=go(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),n1e={utf8:yJ,"utf-8":yJ,hex:tm.base16,latin1:SI,ascii:SI,binary:SI,...tm};function pt(t,e="utf8"){const r=n1e[e];if(r==null)throw new Error(`Unsupported encoding "${e}"`);return r.decoder.decode(`${r.prefix}${t}`)}function vt(t,e="utf8"){const r=n1e[e];if(r==null)throw new Error(`Unsupported encoding "${e}"`);return r.encoder.encode(t).substring(1)}const oh={get(t=globalThis){const e=t.crypto;if(e==null||e.subtle==null)throw Object.assign(new Error("Missing Web Crypto API. The most likely cause of this error is that this page is being accessed from an insecure context (i.e. not HTTPS). For more information and possible resolutions see https://github.com/libp2p/js-libp2p/blob/main/packages/crypto/README.md#web-crypto-api"),{code:"ERR_MISSING_WEB_CRYPTO"});return e}};var y3=as;y3.pki=y3.pki||{};var hN=y3.pki.oids=y3.oids=y3.oids||{};function lt(t,e){hN[t]=e,hN[e]=t}function Wn(t,e){hN[t]=e}lt("1.2.840.113549.1.1.1","rsaEncryption");lt("1.2.840.113549.1.1.4","md5WithRSAEncryption");lt("1.2.840.113549.1.1.5","sha1WithRSAEncryption");lt("1.2.840.113549.1.1.7","RSAES-OAEP");lt("1.2.840.113549.1.1.8","mgf1");lt("1.2.840.113549.1.1.9","pSpecified");lt("1.2.840.113549.1.1.10","RSASSA-PSS");lt("1.2.840.113549.1.1.11","sha256WithRSAEncryption");lt("1.2.840.113549.1.1.12","sha384WithRSAEncryption");lt("1.2.840.113549.1.1.13","sha512WithRSAEncryption");lt("1.3.101.112","EdDSA25519");lt("1.2.840.10040.4.3","dsa-with-sha1");lt("1.3.14.3.2.7","desCBC");lt("1.3.14.3.2.26","sha1");lt("1.3.14.3.2.29","sha1WithRSASignature");lt("2.16.840.1.101.3.4.2.1","sha256");lt("2.16.840.1.101.3.4.2.2","sha384");lt("2.16.840.1.101.3.4.2.3","sha512");lt("2.16.840.1.101.3.4.2.4","sha224");lt("2.16.840.1.101.3.4.2.5","sha512-224");lt("2.16.840.1.101.3.4.2.6","sha512-256");lt("1.2.840.113549.2.2","md2");lt("1.2.840.113549.2.5","md5");lt("1.2.840.113549.1.7.1","data");lt("1.2.840.113549.1.7.2","signedData");lt("1.2.840.113549.1.7.3","envelopedData");lt("1.2.840.113549.1.7.4","signedAndEnvelopedData");lt("1.2.840.113549.1.7.5","digestedData");lt("1.2.840.113549.1.7.6","encryptedData");lt("1.2.840.113549.1.9.1","emailAddress");lt("1.2.840.113549.1.9.2","unstructuredName");lt("1.2.840.113549.1.9.3","contentType");lt("1.2.840.113549.1.9.4","messageDigest");lt("1.2.840.113549.1.9.5","signingTime");lt("1.2.840.113549.1.9.6","counterSignature");lt("1.2.840.113549.1.9.7","challengePassword");lt("1.2.840.113549.1.9.8","unstructuredAddress");lt("1.2.840.113549.1.9.14","extensionRequest");lt("1.2.840.113549.1.9.20","friendlyName");lt("1.2.840.113549.1.9.21","localKeyId");lt("1.2.840.113549.1.9.22.1","x509Certificate");lt("1.2.840.113549.1.12.10.1.1","keyBag");lt("1.2.840.113549.1.12.10.1.2","pkcs8ShroudedKeyBag");lt("1.2.840.113549.1.12.10.1.3","certBag");lt("1.2.840.113549.1.12.10.1.4","crlBag");lt("1.2.840.113549.1.12.10.1.5","secretBag");lt("1.2.840.113549.1.12.10.1.6","safeContentsBag");lt("1.2.840.113549.1.5.13","pkcs5PBES2");lt("1.2.840.113549.1.5.12","pkcs5PBKDF2");lt("1.2.840.113549.1.12.1.1","pbeWithSHAAnd128BitRC4");lt("1.2.840.113549.1.12.1.2","pbeWithSHAAnd40BitRC4");lt("1.2.840.113549.1.12.1.3","pbeWithSHAAnd3-KeyTripleDES-CBC");lt("1.2.840.113549.1.12.1.4","pbeWithSHAAnd2-KeyTripleDES-CBC");lt("1.2.840.113549.1.12.1.5","pbeWithSHAAnd128BitRC2-CBC");lt("1.2.840.113549.1.12.1.6","pbewithSHAAnd40BitRC2-CBC");lt("1.2.840.113549.2.7","hmacWithSHA1");lt("1.2.840.113549.2.8","hmacWithSHA224");lt("1.2.840.113549.2.9","hmacWithSHA256");lt("1.2.840.113549.2.10","hmacWithSHA384");lt("1.2.840.113549.2.11","hmacWithSHA512");lt("1.2.840.113549.3.7","des-EDE3-CBC");lt("2.16.840.1.101.3.4.1.2","aes128-CBC");lt("2.16.840.1.101.3.4.1.22","aes192-CBC");lt("2.16.840.1.101.3.4.1.42","aes256-CBC");lt("2.5.4.3","commonName");lt("2.5.4.4","surname");lt("2.5.4.5","serialNumber");lt("2.5.4.6","countryName");lt("2.5.4.7","localityName");lt("2.5.4.8","stateOrProvinceName");lt("2.5.4.9","streetAddress");lt("2.5.4.10","organizationName");lt("2.5.4.11","organizationalUnitName");lt("2.5.4.12","title");lt("2.5.4.13","description");lt("2.5.4.15","businessCategory");lt("2.5.4.17","postalCode");lt("2.5.4.42","givenName");lt("1.3.6.1.4.1.311.60.2.1.2","jurisdictionOfIncorporationStateOrProvinceName");lt("1.3.6.1.4.1.311.60.2.1.3","jurisdictionOfIncorporationCountryName");lt("2.16.840.1.113730.1.1","nsCertType");lt("2.16.840.1.113730.1.13","nsComment");Wn("2.5.29.1","authorityKeyIdentifier");Wn("2.5.29.2","keyAttributes");Wn("2.5.29.3","certificatePolicies");Wn("2.5.29.4","keyUsageRestriction");Wn("2.5.29.5","policyMapping");Wn("2.5.29.6","subtreesConstraint");Wn("2.5.29.7","subjectAltName");Wn("2.5.29.8","issuerAltName");Wn("2.5.29.9","subjectDirectoryAttributes");Wn("2.5.29.10","basicConstraints");Wn("2.5.29.11","nameConstraints");Wn("2.5.29.12","policyConstraints");Wn("2.5.29.13","basicConstraints");lt("2.5.29.14","subjectKeyIdentifier");lt("2.5.29.15","keyUsage");Wn("2.5.29.16","privateKeyUsagePeriod");lt("2.5.29.17","subjectAltName");lt("2.5.29.18","issuerAltName");lt("2.5.29.19","basicConstraints");Wn("2.5.29.20","cRLNumber");Wn("2.5.29.21","cRLReason");Wn("2.5.29.22","expirationDate");Wn("2.5.29.23","instructionCode");Wn("2.5.29.24","invalidityDate");Wn("2.5.29.25","cRLDistributionPoints");Wn("2.5.29.26","issuingDistributionPoint");Wn("2.5.29.27","deltaCRLIndicator");Wn("2.5.29.28","issuingDistributionPoint");Wn("2.5.29.29","certificateIssuer");Wn("2.5.29.30","nameConstraints");lt("2.5.29.31","cRLDistributionPoints");lt("2.5.29.32","certificatePolicies");Wn("2.5.29.33","policyMappings");Wn("2.5.29.34","policyConstraints");lt("2.5.29.35","authorityKeyIdentifier");Wn("2.5.29.36","policyConstraints");lt("2.5.29.37","extKeyUsage");Wn("2.5.29.46","freshestCRL");Wn("2.5.29.54","inhibitAnyPolicy");lt("1.3.6.1.4.1.11129.2.4.2","timestampList");lt("1.3.6.1.5.5.7.1.1","authorityInfoAccess");lt("1.3.6.1.5.5.7.3.1","serverAuth");lt("1.3.6.1.5.5.7.3.2","clientAuth");lt("1.3.6.1.5.5.7.3.3","codeSigning");lt("1.3.6.1.5.5.7.3.4","emailProtection");lt("1.3.6.1.5.5.7.3.8","timeStamping");var Mi=as,Ct=Mi.asn1=Mi.asn1||{};Ct.Class={UNIVERSAL:0,APPLICATION:64,CONTEXT_SPECIFIC:128,PRIVATE:192};Ct.Type={NONE:0,BOOLEAN:1,INTEGER:2,BITSTRING:3,OCTETSTRING:4,NULL:5,OID:6,ODESC:7,EXTERNAL:8,REAL:9,ENUMERATED:10,EMBEDDED:11,UTF8:12,ROID:13,SEQUENCE:16,SET:17,PRINTABLESTRING:19,IA5STRING:22,UTCTIME:23,GENERALIZEDTIME:24,BMPSTRING:30};Ct.create=function(t,e,r,n,i){if(Mi.util.isArray(n)){for(var s=[],a=0;a<n.length;++a)n[a]!==void 0&&s.push(n[a]);n=s}var o={tagClass:t,type:e,constructed:r,composed:r||Mi.util.isArray(n),value:n};return i&&"bitStringContents"in i&&(o.bitStringContents=i.bitStringContents,o.original=Ct.copy(o)),o};Ct.copy=function(t,e){var r;if(Mi.util.isArray(t)){r=[];for(var n=0;n<t.length;++n)r.push(Ct.copy(t[n],e));return r}return typeof t=="string"?t:(r={tagClass:t.tagClass,type:t.type,constructed:t.constructed,composed:t.composed,value:Ct.copy(t.value,e)},e&&!e.excludeBitStringContents&&(r.bitStringContents=t.bitStringContents),r)};Ct.equals=function(t,e,r){if(Mi.util.isArray(t)){if(!Mi.util.isArray(e)||t.length!==e.length)return!1;for(var n=0;n<t.length;++n)if(!Ct.equals(t[n],e[n]))return!1;return!0}if(typeof t!=typeof e)return!1;if(typeof t=="string")return t===e;var i=t.tagClass===e.tagClass&&t.type===e.type&&t.constructed===e.constructed&&t.composed===e.composed&&Ct.equals(t.value,e.value);return r&&r.includeBitStringContents&&(i=i&&t.bitStringContents===e.bitStringContents),i};Ct.getBerValueLength=function(t){var e=t.getByte();if(e!==128){var r,n=e&128;return n?r=t.getInt((e&127)<<3):r=e,r}};function Hw(t,e,r){if(r>e){var n=new Error("Too few bytes to parse DER.");throw n.available=t.length(),n.remaining=e,n.requested=r,n}}var yat=function(t,e){var r=t.getByte();if(e--,r!==128){var n,i=r&128;if(!i)n=r;else{var s=r&127;Hw(t,e,s),n=t.getInt(s<<3)}if(n<0)throw new Error("Negative length: "+n);return n}};Ct.fromDer=function(t,e){e===void 0&&(e={strict:!0,parseAllBytes:!0,decodeBitStrings:!0}),typeof e=="boolean"&&(e={strict:e,parseAllBytes:!0,decodeBitStrings:!0}),"strict"in e||(e.strict=!0),"parseAllBytes"in e||(e.parseAllBytes=!0),"decodeBitStrings"in e||(e.decodeBitStrings=!0),typeof t=="string"&&(t=Mi.util.createBuffer(t));var r=t.length(),n=Ux(t,t.length(),0,e);if(e.parseAllBytes&&t.length()!==0){var i=new Error("Unparsed DER bytes remain after ASN.1 parsing.");throw i.byteCount=r,i.remaining=t.length(),i}return n};function Ux(t,e,r,n){var i;Hw(t,e,2);var s=t.getByte();e--;var a=s&192,o=s&31;i=t.length();var c=yat(t,e);if(e-=i-t.length(),c!==void 0&&c>e){if(n.strict){var l=new Error("Too few bytes to read ASN.1 value.");throw l.available=t.length(),l.remaining=e,l.requested=c,l}c=e}var u,f,h=(s&32)===32;if(h)if(u=[],c===void 0)for(;;){if(Hw(t,e,2),t.bytes(2)==="\0\0"){t.getBytes(2),e-=2;break}i=t.length(),u.push(Ux(t,e,r+1,n)),e-=i-t.length()}else for(;c>0;)i=t.length(),u.push(Ux(t,c,r+1,n)),e-=i-t.length(),c-=i-t.length();if(u===void 0&&a===Ct.Class.UNIVERSAL&&o===Ct.Type.BITSTRING&&(f=t.bytes(c)),u===void 0&&n.decodeBitStrings&&a===Ct.Class.UNIVERSAL&&o===Ct.Type.BITSTRING&&c>1){var d=t.read,g=e,p=0;if(o===Ct.Type.BITSTRING&&(Hw(t,e,1),p=t.getByte(),e--),p===0)try{i=t.length();var m={strict:!0,decodeBitStrings:!0},y=Ux(t,e,r+1,m),v=i-t.length();e-=v,o==Ct.Type.BITSTRING&&v++;var _=y.tagClass;v===c&&(_===Ct.Class.UNIVERSAL||_===Ct.Class.CONTEXT_SPECIFIC)&&(u=[y])}catch{}u===void 0&&(t.read=d,e=g)}if(u===void 0){if(c===void 0){if(n.strict)throw new Error("Non-constructed ASN.1 object of indefinite length.");c=e}if(o===Ct.Type.BMPSTRING)for(u="";c>0;c-=2)Hw(t,e,2),u+=String.fromCharCode(t.getInt16()),e-=2;else u=t.getBytes(c),e-=c}var x=f===void 0?null:{bitStringContents:f};return Ct.create(a,o,h,u,x)}Ct.toDer=function(t){var e=Mi.util.createBuffer(),r=t.tagClass|t.type,n=Mi.util.createBuffer(),i=!1;if("bitStringContents"in t&&(i=!0,t.original&&(i=Ct.equals(t,t.original))),i)n.putBytes(t.bitStringContents);else if(t.composed){t.constructed?r|=32:n.putByte(0);for(var s=0;s<t.value.length;++s)t.value[s]!==void 0&&n.putBuffer(Ct.toDer(t.value[s]))}else if(t.type===Ct.Type.BMPSTRING)for(var s=0;s<t.value.length;++s)n.putInt16(t.value.charCodeAt(s));else t.type===Ct.Type.INTEGER&&t.value.length>1&&(t.value.charCodeAt(0)===0&&!(t.value.charCodeAt(1)&128)||t.value.charCodeAt(0)===255&&(t.value.charCodeAt(1)&128)===128)?n.putBytes(t.value.substr(1)):n.putBytes(t.value);if(e.putByte(r),n.length()<=127)e.putByte(n.length()&127);else{var a=n.length(),o="";do o+=String.fromCharCode(a&255),a=a>>>8;while(a>0);e.putByte(o.length|128);for(var s=o.length-1;s>=0;--s)e.putByte(o.charCodeAt(s))}return e.putBuffer(n),e};Ct.oidToDer=function(t){var e=t.split("."),r=Mi.util.createBuffer();r.putByte(40*parseInt(e[0],10)+parseInt(e[1],10));for(var n,i,s,a,o=2;o<e.length;++o){n=!0,i=[],s=parseInt(e[o],10);do a=s&127,s=s>>>7,n||(a|=128),i.push(a),n=!1;while(s>0);for(var c=i.length-1;c>=0;--c)r.putByte(i[c])}return r};Ct.derToOid=function(t){var e;typeof t=="string"&&(t=Mi.util.createBuffer(t));var r=t.getByte();e=Math.floor(r/40)+"."+r%40;for(var n=0;t.length()>0;)r=t.getByte(),n=n<<7,r&128?n+=r&127:(e+="."+(n+r),n=0);return e};Ct.utcTimeToDate=function(t){var e=new Date,r=parseInt(t.substr(0,2),10);r=r>=50?1900+r:2e3+r;var n=parseInt(t.substr(2,2),10)-1,i=parseInt(t.substr(4,2),10),s=parseInt(t.substr(6,2),10),a=parseInt(t.substr(8,2),10),o=0;if(t.length>11){var c=t.charAt(10),l=10;c!=="+"&&c!=="-"&&(o=parseInt(t.substr(10,2),10),l+=2)}if(e.setUTCFullYear(r,n,i),e.setUTCHours(s,a,o,0),l&&(c=t.charAt(l),c==="+"||c==="-")){var u=parseInt(t.substr(l+1,2),10),f=parseInt(t.substr(l+4,2),10),h=u*60+f;h*=6e4,c==="+"?e.setTime(+e-h):e.setTime(+e+h)}return e};Ct.generalizedTimeToDate=function(t){var e=new Date,r=parseInt(t.substr(0,4),10),n=parseInt(t.substr(4,2),10)-1,i=parseInt(t.substr(6,2),10),s=parseInt(t.substr(8,2),10),a=parseInt(t.substr(10,2),10),o=parseInt(t.substr(12,2),10),c=0,l=0,u=!1;t.charAt(t.length-1)==="Z"&&(u=!0);var f=t.length-5,h=t.charAt(f);if(h==="+"||h==="-"){var d=parseInt(t.substr(f+1,2),10),g=parseInt(t.substr(f+4,2),10);l=d*60+g,l*=6e4,h==="+"&&(l*=-1),u=!0}return t.charAt(14)==="."&&(c=parseFloat(t.substr(14),10)*1e3),u?(e.setUTCFullYear(r,n,i),e.setUTCHours(s,a,o,c),e.setTime(+e+l)):(e.setFullYear(r,n,i),e.setHours(s,a,o,c)),e};Ct.dateToUtcTime=function(t){if(typeof t=="string")return t;var e="",r=[];r.push((""+t.getUTCFullYear()).substr(2)),r.push(""+(t.getUTCMonth()+1)),r.push(""+t.getUTCDate()),r.push(""+t.getUTCHours()),r.push(""+t.getUTCMinutes()),r.push(""+t.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(e+="0"),e+=r[n];return e+="Z",e};Ct.dateToGeneralizedTime=function(t){if(typeof t=="string")return t;var e="",r=[];r.push(""+t.getUTCFullYear()),r.push(""+(t.getUTCMonth()+1)),r.push(""+t.getUTCDate()),r.push(""+t.getUTCHours()),r.push(""+t.getUTCMinutes()),r.push(""+t.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(e+="0"),e+=r[n];return e+="Z",e};Ct.integerToDer=function(t){var e=Mi.util.createBuffer();if(t>=-128&&t<128)return e.putSignedInt(t,8);if(t>=-32768&&t<32768)return e.putSignedInt(t,16);if(t>=-8388608&&t<8388608)return e.putSignedInt(t,24);if(t>=-2147483648&&t<2147483648)return e.putSignedInt(t,32);var r=new Error("Integer too large; max is 32-bits.");throw r.integer=t,r};Ct.derToInteger=function(t){typeof t=="string"&&(t=Mi.util.createBuffer(t));var e=t.length()*8;if(e>32)throw new Error("Integer too large; max is 32-bits.");return t.getSignedInt(e)};Ct.validate=function(t,e,r,n){var i=!1;if((t.tagClass===e.tagClass||typeof e.tagClass>"u")&&(t.type===e.type||typeof e.type>"u"))if(t.constructed===e.constructed||typeof e.constructed>"u"){if(i=!0,e.value&&Mi.util.isArray(e.value))for(var s=0,a=0;i&&a<e.value.length;++a)i=e.value[a].optional||!1,t.value[s]&&(i=Ct.validate(t.value[s],e.value[a],r,n),i?++s:e.value[a].optional&&(i=!0)),!i&&n&&n.push("["+e.name+'] Tag class "'+e.tagClass+'", type "'+e.type+'" expected value length "'+e.value.length+'", got "'+t.value.length+'"');if(i&&r&&(e.capture&&(r[e.capture]=t.value),e.captureAsn1&&(r[e.captureAsn1]=t),e.captureBitStringContents&&"bitStringContents"in t&&(r[e.captureBitStringContents]=t.bitStringContents),e.captureBitStringValue&&"bitStringContents"in t))if(t.bitStringContents.length<2)r[e.captureBitStringValue]="";else{var o=t.bitStringContents.charCodeAt(0);if(o!==0)throw new Error("captureBitStringValue only supported for zero unused bits");r[e.captureBitStringValue]=t.bitStringContents.slice(1)}}else n&&n.push("["+e.name+'] Expected constructed "'+e.constructed+'", got "'+t.constructed+'"');else n&&(t.tagClass!==e.tagClass&&n.push("["+e.name+'] Expected tag class "'+e.tagClass+'", got "'+t.tagClass+'"'),t.type!==e.type&&n.push("["+e.name+'] Expected type "'+e.type+'", got "'+t.type+'"'));return i};var vJ=/[^\\u0000-\\u00ff]/;Ct.prettyPrint=function(t,e,r){var n="";e=e||0,r=r||2,e>0&&(n+=`
`);for(var i="",s=0;s<e*r;++s)i+=" ";switch(n+=i+"Tag: ",t.tagClass){case Ct.Class.UNIVERSAL:n+="Universal:";break;case Ct.Class.APPLICATION:n+="Application:";break;case Ct.Class.CONTEXT_SPECIFIC:n+="Context-Specific:";break;case Ct.Class.PRIVATE:n+="Private:";break}if(t.tagClass===Ct.Class.UNIVERSAL)switch(n+=t.type,t.type){case Ct.Type.NONE:n+=" (None)";break;case Ct.Type.BOOLEAN:n+=" (Boolean)";break;case Ct.Type.INTEGER:n+=" (Integer)";break;case Ct.Type.BITSTRING:n+=" (Bit string)";break;case Ct.Type.OCTETSTRING:n+=" (Octet string)";break;case Ct.Type.NULL:n+=" (Null)";break;case Ct.Type.OID:n+=" (Object Identifier)";break;case Ct.Type.ODESC:n+=" (Object Descriptor)";break;case Ct.Type.EXTERNAL:n+=" (External or Instance of)";break;case Ct.Type.REAL:n+=" (Real)";break;case Ct.Type.ENUMERATED:n+=" (Enumerated)";break;case Ct.Type.EMBEDDED:n+=" (Embedded PDV)";break;case Ct.Type.UTF8:n+=" (UTF8)";break;case Ct.Type.ROID:n+=" (Relative Object Identifier)";break;case Ct.Type.SEQUENCE:n+=" (Sequence)";break;case Ct.Type.SET:n+=" (Set)";break;case Ct.Type.PRINTABLESTRING:n+=" (Printable String)";break;case Ct.Type.IA5String:n+=" (IA5String (ASCII))";break;case Ct.Type.UTCTIME:n+=" (UTC time)";break;case Ct.Type.GENERALIZEDTIME:n+=" (Generalized time)";break;case Ct.Type.BMPSTRING:n+=" (BMP String)";break}else n+=t.type;if(n+=`
`,n+=i+"Constructed: "+t.constructed+`
`,t.composed){for(var a=0,o="",s=0;s<t.value.length;++s)t.value[s]!==void 0&&(a+=1,o+=Ct.prettyPrint(t.value[s],e+1,r),s+1<t.value.length&&(o+=","));n+=i+"Sub values: "+a+o}else{if(n+=i+"Value: ",t.type===Ct.Type.OID){var c=Ct.derToOid(t.value);n+=c,Mi.pki&&Mi.pki.oids&&c in Mi.pki.oids&&(n+=" ("+Mi.pki.oids[c]+") ")}if(t.type===Ct.Type.INTEGER)try{n+=Ct.derToInteger(t.value)}catch{n+="0x"+Mi.util.bytesToHex(t.value)}else if(t.type===Ct.Type.BITSTRING){if(t.value.length>1?n+="0x"+Mi.util.bytesToHex(t.value.slice(1)):n+="(none)",t.value.length>0){var l=t.value.charCodeAt(0);l==1?n+=" (1 unused bit shown)":l>1&&(n+=" ("+l+" unused bits shown)")}}else if(t.type===Ct.Type.OCTETSTRING)vJ.test(t.value)||(n+="("+t.value+") "),n+="0x"+Mi.util.bytesToHex(t.value);else if(t.type===Ct.Type.UTF8)try{n+=Mi.util.decodeUtf8(t.value)}catch(u){if(u.message==="URI malformed")n+="0x"+Mi.util.bytesToHex(t.value)+" (malformed UTF8)";else throw u}else t.type===Ct.Type.PRINTABLESTRING||t.type===Ct.Type.IA5String?n+=t.value:vJ.test(t.value)?n+="0x"+Mi.util.bytesToHex(t.value):t.value.length===0?n+="[null]":n+=t.value}return n};var Wi=as;Wi.des=Wi.des||{};Wi.des.startEncrypting=function(t,e,r,n){var i=uA({key:t,output:r,decrypt:!1,mode:n||(e===null?"ECB":"CBC")});return i.start(e),i};Wi.des.createEncryptionCipher=function(t,e){return uA({key:t,output:null,decrypt:!1,mode:e})};Wi.des.startDecrypting=function(t,e,r,n){var i=uA({key:t,output:r,decrypt:!0,mode:n||(e===null?"ECB":"CBC")});return i.start(e),i};Wi.des.createDecryptionCipher=function(t,e){return uA({key:t,output:null,decrypt:!0,mode:e})};Wi.des.Algorithm=function(t,e){var r=this;r.name=t,r.mode=new e({blockSize:8,cipher:{encrypt:function(n,i){return bJ(r._keys,n,i,!1)},decrypt:function(n,i){return bJ(r._keys,n,i,!0)}}}),r._init=!1};Wi.des.Algorithm.prototype.initialize=function(t){if(!this._init){var e=Wi.util.createBuffer(t.key);if(this.name.indexOf("3DES")===0&&e.length()!==24)throw new Error("Invalid Triple-DES key size: "+e.length()*8);this._keys=Tat(e),this._init=!0}};xh("DES-ECB",Wi.cipher.modes.ecb);xh("DES-CBC",Wi.cipher.modes.cbc);xh("DES-CFB",Wi.cipher.modes.cfb);xh("DES-OFB",Wi.cipher.modes.ofb);xh("DES-CTR",Wi.cipher.modes.ctr);xh("3DES-ECB",Wi.cipher.modes.ecb);xh("3DES-CBC",Wi.cipher.modes.cbc);xh("3DES-CFB",Wi.cipher.modes.cfb);xh("3DES-OFB",Wi.cipher.modes.ofb);xh("3DES-CTR",Wi.cipher.modes.ctr);function xh(t,e){var r=function(){return new Wi.des.Algorithm(t,e)};Wi.cipher.registerAlgorithm(t,r)}var vat=[16843776,0,65536,16843780,16842756,66564,4,65536,1024,16843776,16843780,1024,16778244,16842756,16777216,4,1028,16778240,16778240,66560,66560,16842752,16842752,16778244,65540,16777220,16777220,65540,0,1028,66564,16777216,65536,16843780,4,16842752,16843776,16777216,16777216,1024,16842756,65536,66560,16777220,1024,4,16778244,66564,16843780,65540,16842752,16778244,16777220,1028,66564,16843776,1028,16778240,16778240,0,65540,66560,0,16842756],bat=[-2146402272,-2147450880,32768,1081376,1048576,32,-2146435040,-2147450848,-2147483616,-2146402272,-2146402304,-2147483648,-2147450880,1048576,32,-2146435040,1081344,1048608,-2147450848,0,-2147483648,32768,1081376,-2146435072,1048608,-2147483616,0,1081344,32800,-2146402304,-2146435072,32800,0,1081376,-2146435040,1048576,-2147450848,-2146435072,-2146402304,32768,-2146435072,-2147450880,32,-2146402272,1081376,32,32768,-2147483648,32800,-2146402304,1048576,-2147483616,1048608,-2147450848,-2147483616,1048608,1081344,0,-2147450880,32800,-2147483648,-2146435040,-2146402272,1081344],wat=[520,134349312,0,134348808,134218240,0,131592,134218240,131080,134217736,134217736,131072,134349320,131080,134348800,520,134217728,8,134349312,512,131584,134348800,134348808,131592,134218248,131584,131072,134218248,8,134349320,512,134217728,134349312,134217728,131080,520,131072,134349312,134218240,0,512,131080,134349320,134218240,134217736,512,0,134348808,134218248,131072,134217728,134349320,8,131592,131584,134217736,134348800,134218248,520,134348800,131592,8,134348808,131584],_at=[8396801,8321,8321,128,8396928,8388737,8388609,8193,0,8396800,8396800,8396929,129,0,8388736,8388609,1,8192,8388608,8396801,128,8388608,8193,8320,8388737,1,8320,8388736,8192,8396928,8396929,129,8388736,8388609,8396800,8396929,129,0,0,8396800,8320,8388736,8388737,1,8396801,8321,8321,128,8396929,129,1,8192,8388609,8193,8396928,8388737,8193,8320,8388608,8396801,128,8388608,8192,8396928],xat=[256,34078976,34078720,1107296512,524288,256,1073741824,34078720,1074266368,524288,33554688,1074266368,1107296512,1107820544,524544,1073741824,33554432,1074266112,1074266112,0,1073742080,1107820800,1107820800,33554688,1107820544,1073742080,0,1107296256,34078976,33554432,1107296256,524544,524288,1107296512,256,33554432,1073741824,34078720,1107296512,1074266368,33554688,1073741824,1107820544,34078976,1074266368,256,33554432,1107820544,1107820800,524544,1107296256,1107820800,34078720,0,1074266112,1107296256,524544,33554688,1073742080,524288,0,1074266112,34078976,1073742080],Eat=[536870928,541065216,16384,541081616,541065216,16,541081616,4194304,536887296,4210704,4194304,536870928,4194320,536887296,536870912,16400,0,4194320,536887312,16384,4210688,536887312,16,541065232,541065232,0,4210704,541081600,16400,4210688,541081600,536870912,536887296,16,541065232,4210688,541081616,4194304,16400,536870928,4194304,536887296,536870912,16400,536870928,541081616,4210688,541065216,4210704,541081600,0,541065232,16,16384,541065216,4210704,16384,4194320,536887312,0,541081600,536870912,4194320,536887312],Sat=[2097152,69206018,67110914,0,2048,67110914,2099202,69208064,69208066,2097152,0,67108866,2,67108864,69206018,2050,67110912,2099202,2097154,67110912,67108866,69206016,69208064,2097154,69206016,2048,2050,69208066,2099200,2,67108864,2099200,67108864,2099200,2097152,67110914,67110914,69206018,69206018,2,2097154,67108864,67110912,2097152,69208064,2050,2099202,69208064,2050,67108866,69208066,69206016,2099200,0,2,69208066,0,2099202,69206016,2048,67108866,67110912,2048,2097154],Aat=[268439616,4096,262144,268701760,268435456,268439616,64,268435456,262208,268697600,268701760,266240,268701696,266304,4096,64,268697600,268435520,268439552,4160,266240,262208,268697664,268701696,4160,0,0,268697664,268435520,268439552,266304,262144,266304,262144,268701696,4096,64,268697664,4096,266304,268439552,64,268435520,268697600,268697664,268435456,262144,268439616,0,268701760,262208,268435520,268697600,268439552,268439616,0,268701760,266240,266240,4160,4160,262208,268435456,268701696];function Tat(t){for(var e=[0,4,536870912,536870916,65536,65540,536936448,536936452,512,516,536871424,536871428,66048,66052,536936960,536936964],r=[0,1,1048576,1048577,67108864,67108865,68157440,68157441,256,257,1048832,1048833,67109120,67109121,68157696,68157697],n=[0,8,2048,2056,16777216,16777224,16779264,16779272,0,8,2048,2056,16777216,16777224,16779264,16779272],i=[0,2097152,134217728,136314880,8192,2105344,134225920,136323072,131072,2228224,134348800,136445952,139264,2236416,134356992,136454144],s=[0,262144,16,262160,0,262144,16,262160,4096,266240,4112,266256,4096,266240,4112,266256],a=[0,1024,32,1056,0,1024,32,1056,33554432,33555456,33554464,33555488,33554432,33555456,33554464,33555488],o=[0,268435456,524288,268959744,2,268435458,524290,268959746,0,268435456,524288,268959744,2,268435458,524290,268959746],c=[0,65536,2048,67584,536870912,536936448,536872960,536938496,131072,196608,133120,198656,537001984,537067520,537004032,537069568],l=[0,262144,0,262144,2,262146,2,262146,33554432,33816576,33554432,33816576,33554434,33816578,33554434,33816578],u=[0,268435456,8,268435464,0,268435456,8,268435464,1024,268436480,1032,268436488,1024,268436480,1032,268436488],f=[0,32,0,32,1048576,1048608,1048576,1048608,8192,8224,8192,8224,1056768,1056800,1056768,1056800],h=[0,16777216,512,16777728,2097152,18874368,2097664,18874880,67108864,83886080,67109376,83886592,69206016,85983232,69206528,85983744],d=[0,4096,134217728,134221824,524288,528384,134742016,134746112,16,4112,134217744,134221840,524304,528400,134742032,134746128],g=[0,4,256,260,0,4,256,260,1,5,257,261,1,5,257,261],p=t.length()>8?3:1,m=[],y=[0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0],v=0,_,x=0;x<p;x++){var A=t.getInt32(),C=t.getInt32();_=(A>>>4^C)&252645135,C^=_,A^=_<<4,_=(C>>>-16^A)&65535,A^=_,C^=_<<-16,_=(A>>>2^C)&858993459,C^=_,A^=_<<2,_=(C>>>-16^A)&65535,A^=_,C^=_<<-16,_=(A>>>1^C)&1431655765,C^=_,A^=_<<1,_=(C>>>8^A)&16711935,A^=_,C^=_<<8,_=(A>>>1^C)&1431655765,C^=_,A^=_<<1,_=A<<8|C>>>20&240,A=C<<24|C<<8&16711680|C>>>8&65280|C>>>24&240,C=_;for(var R=0;R<y.length;++R){y[R]?(A=A<<2|A>>>26,C=C<<2|C>>>26):(A=A<<1|A>>>27,C=C<<1|C>>>27),A&=-15,C&=-15;var M=e[A>>>28]|r[A>>>24&15]|n[A>>>20&15]|i[A>>>16&15]|s[A>>>12&15]|a[A>>>8&15]|o[A>>>4&15],N=c[C>>>28]|l[C>>>24&15]|u[C>>>20&15]|f[C>>>16&15]|h[C>>>12&15]|d[C>>>8&15]|g[C>>>4&15];_=(N>>>16^M)&65535,m[v++]=M^_,m[v++]=N^_<<16}}return m}function bJ(t,e,r,n){var i=t.length===32?3:9,s;i===3?s=n?[30,-2,-2]:[0,32,2]:s=n?[94,62,-2,32,64,2,30,-2,-2]:[0,32,2,62,30,-2,64,96,2];var a,o=e[0],c=e[1];a=(o>>>4^c)&252645135,c^=a,o^=a<<4,a=(o>>>16^c)&65535,c^=a,o^=a<<16,a=(c>>>2^o)&858993459,o^=a,c^=a<<2,a=(c>>>8^o)&16711935,o^=a,c^=a<<8,a=(o>>>1^c)&1431655765,c^=a,o^=a<<1,o=o<<1|o>>>31,c=c<<1|c>>>31;for(var l=0;l<i;l+=3){for(var u=s[l+1],f=s[l+2],h=s[l];h!=u;h+=f){var d=c^t[h],g=(c>>>4|c<<28)^t[h+1];a=o,o=c,c=a^(bat[d>>>24&63]|_at[d>>>16&63]|Eat[d>>>8&63]|Aat[d&63]|vat[g>>>24&63]|wat[g>>>16&63]|xat[g>>>8&63]|Sat[g&63])}a=o,o=c,c=a}o=o>>>1|o<<31,c=c>>>1|c<<31,a=(o>>>1^c)&1431655765,c^=a,o^=a<<1,a=(c>>>8^o)&16711935,o^=a,c^=a<<8,a=(c>>>2^o)&858993459,o^=a,c^=a<<2,a=(o>>>16^c)&65535,c^=a,o^=a<<16,a=(o>>>4^c)&252645135,c^=a,o^=a<<4,r[0]=o,r[1]=c}function uA(t){t=t||{};var e=(t.mode||"CBC").toUpperCase(),r="DES-"+e,n;t.decrypt?n=Wi.cipher.createDecipher(r,t.key):n=Wi.cipher.createCipher(r,t.key);var i=n.start;return n.start=function(s,a){var o=null;a instanceof Wi.util.ByteBuffer&&(o=a,a={}),a=a||{},a.output=o,a.iv=s,i.call(n,a)},n}var xE=as;xE.md=xE.md||{};xE.md.algorithms=xE.md.algorithms||{};var cd=as,kat=cd.hmac=cd.hmac||{};kat.create=function(){var t=null,e=null,r=null,n=null,i={};return i.start=function(s,a){if(s!==null)if(typeof s=="string")if(s=s.toLowerCase(),s in cd.md.algorithms)e=cd.md.algorithms[s].create();else throw new Error('Unknown hash algorithm "'+s+'"');else e=s;if(a===null)a=t;else{if(typeof a=="string")a=cd.util.createBuffer(a);else if(cd.util.isArray(a)){var o=a;a=cd.util.createBuffer();for(var c=0;c<o.length;++c)a.putByte(o[c])}var l=a.length();l>e.blockLength&&(e.start(),e.update(a.bytes()),a=e.digest()),r=cd.util.createBuffer(),n=cd.util.createBuffer(),l=a.length();for(var c=0;c<l;++c){var o=a.at(c);r.putByte(54^o),n.putByte(92^o)}if(l<e.blockLength)for(var o=e.blockLength-l,c=0;c<o;++c)r.putByte(54),n.putByte(92);t=a,r=r.bytes(),n=n.bytes()}e.start(),e.update(r)},i.update=function(s){e.update(s)},i.getMac=function(){var s=e.digest().bytes();return e.start(),e.update(n),e.update(s),e.digest()},i.digest=i.getMac,i};var Mr={},r5={exports:{}},n5={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var wJ;function Zr(){return wJ||(wJ=1,function(t,e){var r=Es,n=r.Buffer;function i(a,o){for(var c in a)o[c]=a[c]}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?t.exports=r:(i(r,e),e.Buffer=s);function s(a,o,c){return n(a,o,c)}s.prototype=Object.create(n.prototype),i(n,s),s.from=function(a,o,c){if(typeof a=="number")throw new TypeError("Argument must not be a number");return n(a,o,c)},s.alloc=function(a,o,c){if(typeof a!="number")throw new TypeError("Argument must be a number");var l=n(a);return o!==void 0?typeof c=="string"?l.fill(o,c):l.fill(o):l.fill(0),l},s.allocUnsafe=function(a){if(typeof a!="number")throw new TypeError("Argument must be a number");return n(a)},s.allocUnsafeSlow=function(a){if(typeof a!="number")throw new TypeError("Argument must be a number");return r.SlowBuffer(a)}}(n5,n5.exports)),n5.exports}var _J;function gb(){if(_J)return r5.exports;_J=1;var t=65536,e=4294967295;function r(){throw new Error(`Secure random number generation is not supported by this browser.
Use Chrome, Firefox or Internet Explorer 11`)}var n=Zr().Buffer,i=It.crypto||It.msCrypto;i&&i.getRandomValues?r5.exports=s:r5.exports=r;function s(a,o){if(a>e)throw new RangeError("requested too many random bytes");var c=n.allocUnsafe(a);if(a>0)if(a>t)for(var l=0;l<a;l+=t)i.getRandomValues(c.slice(l,l+t));else i.getRandomValues(c);return typeof o=="function"?Et.nextTick(function(){o(null,c)}):c}return r5.exports}var i5={exports:{}},AI,xJ;function i1e(){return xJ||(xJ=1,AI=qi.EventEmitter),AI}var TI,EJ;function Cat(){if(EJ)return TI;EJ=1;function t(g,p){var m=Object.keys(g);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(g);p&&(y=y.filter(function(v){return Object.getOwnPropertyDescriptor(g,v).enumerable})),m.push.apply(m,y)}return m}function e(g){for(var p=1;p<arguments.length;p++){var m=arguments[p]!=null?arguments[p]:{};p%2?t(Object(m),!0).forEach(function(y){r(g,y,m[y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(m)):t(Object(m)).forEach(function(y){Object.defineProperty(g,y,Object.getOwnPropertyDescriptor(m,y))})}return g}function r(g,p,m){return p=a(p),p in g?Object.defineProperty(g,p,{value:m,enumerable:!0,configurable:!0,writable:!0}):g[p]=m,g}function n(g,p){if(!(g instanceof p))throw new TypeError("Cannot call a class as a function")}function i(g,p){for(var m=0;m<p.length;m++){var y=p[m];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(g,a(y.key),y)}}function s(g,p,m){return p&&i(g.prototype,p),Object.defineProperty(g,"prototype",{writable:!1}),g}function a(g){var p=o(g,"string");return typeof p=="symbol"?p:String(p)}function o(g,p){if(typeof g!="object"||g===null)return g;var m=g[Symbol.toPrimitive];if(m!==void 0){var y=m.call(g,p||"default");if(typeof y!="object")return y;throw new TypeError("@@toPrimitive must return a primitive value.")}return(p==="string"?String:Number)(g)}var c=Es,l=c.Buffer,u=rp,f=u.inspect,h=f&&f.custom||"inspect";function d(g,p,m){l.prototype.copy.call(g,p,m)}return TI=function(){function g(){n(this,g),this.head=null,this.tail=null,this.length=0}return s(g,[{key:"push",value:function(m){var y={data:m,next:null};this.length>0?this.tail.next=y:this.head=y,this.tail=y,++this.length}},{key:"unshift",value:function(m){var y={data:m,next:this.head};this.length===0&&(this.tail=y),this.head=y,++this.length}},{key:"shift",value:function(){if(this.length!==0){var m=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,m}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(m){if(this.length===0)return"";for(var y=this.head,v=""+y.data;y=y.next;)v+=m+y.data;return v}},{key:"concat",value:function(m){if(this.length===0)return l.alloc(0);for(var y=l.allocUnsafe(m>>>0),v=this.head,_=0;v;)d(v.data,y,_),_+=v.data.length,v=v.next;return y}},{key:"consume",value:function(m,y){var v;return m<this.head.data.length?(v=this.head.data.slice(0,m),this.head.data=this.head.data.slice(m)):m===this.head.data.length?v=this.shift():v=y?this._getString(m):this._getBuffer(m),v}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(m){var y=this.head,v=1,_=y.data;for(m-=_.length;y=y.next;){var x=y.data,A=m>x.length?x.length:m;if(A===x.length?_+=x:_+=x.slice(0,m),m-=A,m===0){A===x.length?(++v,y.next?this.head=y.next:this.head=this.tail=null):(this.head=y,y.data=x.slice(A));break}++v}return this.length-=v,_}},{key:"_getBuffer",value:function(m){var y=l.allocUnsafe(m),v=this.head,_=1;for(v.data.copy(y),m-=v.data.length;v=v.next;){var x=v.data,A=m>x.length?x.length:m;if(x.copy(y,y.length-m,0,A),m-=A,m===0){A===x.length?(++_,v.next?this.head=v.next:this.head=this.tail=null):(this.head=v,v.data=x.slice(A));break}++_}return this.length-=_,y}},{key:h,value:function(m,y){return f(this,e(e({},y),{},{depth:0,customInspect:!1}))}}]),g}(),TI}var kI,SJ;function s1e(){if(SJ)return kI;SJ=1;function t(a,o){var c=this,l=this._readableState&&this._readableState.destroyed,u=this._writableState&&this._writableState.destroyed;return l||u?(o?o(a):a&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,Et.nextTick(i,this,a)):Et.nextTick(i,this,a)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(a||null,function(f){!o&&f?c._writableState?c._writableState.errorEmitted?Et.nextTick(r,c):(c._writableState.errorEmitted=!0,Et.nextTick(e,c,f)):Et.nextTick(e,c,f):o?(Et.nextTick(r,c),o(f)):Et.nextTick(r,c)}),this)}function e(a,o){i(a,o),r(a)}function r(a){a._writableState&&!a._writableState.emitClose||a._readableState&&!a._readableState.emitClose||a.emit("close")}function n(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function i(a,o){a.emit("error",o)}function s(a,o){var c=a._readableState,l=a._writableState;c&&c.autoDestroy||l&&l.autoDestroy?a.destroy(o):a.emit("error",o)}return kI={destroy:t,undestroy:n,errorOrDestroy:s},kI}var CI={},AJ;function mb(){if(AJ)return CI;AJ=1;function t(o,c){o.prototype=Object.create(c.prototype),o.prototype.constructor=o,o.__proto__=c}var e={};function r(o,c,l){l||(l=Error);function u(h,d,g){return typeof c=="string"?c:c(h,d,g)}var f=function(h){t(d,h);function d(g,p,m){return h.call(this,u(g,p,m))||this}return d}(l);f.prototype.name=l.name,f.prototype.code=o,e[o]=f}function n(o,c){if(Array.isArray(o)){var l=o.length;return o=o.map(function(u){return String(u)}),l>2?"one of ".concat(c," ").concat(o.slice(0,l-1).join(", "),", or ")+o[l-1]:l===2?"one of ".concat(c," ").concat(o[0]," or ").concat(o[1]):"of ".concat(c," ").concat(o[0])}else return"of ".concat(c," ").concat(String(o))}function i(o,c,l){return o.substr(0,c.length)===c}function s(o,c,l){return(l===void 0||l>o.length)&&(l=o.length),o.substring(l-c.length,l)===c}function a(o,c,l){return typeof l!="number"&&(l=0),l+c.length>o.length?!1:o.indexOf(c,l)!==-1}return r("ERR_INVALID_OPT_VALUE",function(o,c){return'The value "'+c+'" is invalid for option "'+o+'"'},TypeError),r("ERR_INVALID_ARG_TYPE",function(o,c,l){var u;typeof c=="string"&&i(c,"not ")?(u="must not be",c=c.replace(/^not /,"")):u="must be";var f;if(s(o," argument"))f="The ".concat(o," ").concat(u," ").concat(n(c,"type"));else{var h=a(o,".")?"property":"argument";f='The "'.concat(o,'" ').concat(h," ").concat(u," ").concat(n(c,"type"))}return f+=". Received type ".concat(typeof l),f},TypeError),r("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),r("ERR_METHOD_NOT_IMPLEMENTED",function(o){return"The "+o+" method is not implemented"}),r("ERR_STREAM_PREMATURE_CLOSE","Premature close"),r("ERR_STREAM_DESTROYED",function(o){return"Cannot call "+o+" after a stream was destroyed"}),r("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),r("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),r("ERR_STREAM_WRITE_AFTER_END","write after end"),r("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),r("ERR_UNKNOWN_ENCODING",function(o){return"Unknown encoding: "+o},TypeError),r("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),CI.codes=e,CI}var II,TJ;function a1e(){if(TJ)return II;TJ=1;var t=mb().codes.ERR_INVALID_OPT_VALUE;function e(n,i,s){return n.highWaterMark!=null?n.highWaterMark:i?n[s]:null}function r(n,i,s,a){var o=e(i,a,s);if(o!=null){if(!(isFinite(o)&&Math.floor(o)===o)||o<0){var c=a?s:"highWaterMark";throw new t(c,o)}return Math.floor(o)}return n.objectMode?16:16*1024}return II={getHighWaterMark:r},II}var RI,kJ;function o1e(){if(kJ)return RI;kJ=1,RI=t;function t(r,n){if(e("noDeprecation"))return r;var i=!1;function s(){if(!i){if(e("throwDeprecation"))throw new Error(n);e("traceDeprecation")?console.trace(n):console.warn(n),i=!0}return r.apply(this,arguments)}return s}function e(r){try{if(!It.localStorage)return!1}catch{return!1}var n=It.localStorage[r];return n==null?!1:String(n).toLowerCase()==="true"}return RI}var PI,CJ;function c1e(){if(CJ)return PI;CJ=1,PI=M;function t(W){var q=this;this.next=null,this.entry=null,this.finish=function(){X(q,W)}}var e;M.WritableState=C;var r={deprecate:o1e()},n=i1e(),i=Es.Buffer,s=(typeof It<"u"?It:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function a(W){return i.from(W)}function o(W){return i.isBuffer(W)||W instanceof s}var c=s1e(),l=a1e(),u=l.getHighWaterMark,f=mb().codes,h=f.ERR_INVALID_ARG_TYPE,d=f.ERR_METHOD_NOT_IMPLEMENTED,g=f.ERR_MULTIPLE_CALLBACK,p=f.ERR_STREAM_CANNOT_PIPE,m=f.ERR_STREAM_DESTROYED,y=f.ERR_STREAM_NULL_VALUES,v=f.ERR_STREAM_WRITE_AFTER_END,_=f.ERR_UNKNOWN_ENCODING,x=c.errorOrDestroy;xr(M,n);function A(){}function C(W,q,G){e=e||nv(),W=W||{},typeof G!="boolean"&&(G=q instanceof e),this.objectMode=!!W.objectMode,G&&(this.objectMode=this.objectMode||!!W.writableObjectMode),this.highWaterMark=u(this,W,"writableHighWaterMark",G),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var ee=W.decodeStrings===!1;this.decodeStrings=!ee,this.defaultEncoding=W.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(ae){L(q,ae)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=W.emitClose!==!1,this.autoDestroy=!!W.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new t(this)}C.prototype.getBuffer=function(){for(var q=this.bufferedRequest,G=[];q;)G.push(q),q=q.next;return G},function(){try{Object.defineProperty(C.prototype,"buffer",{get:r.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var R;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(R=Function.prototype[Symbol.hasInstance],Object.defineProperty(M,Symbol.hasInstance,{value:function(q){return R.call(this,q)?!0:this!==M?!1:q&&q._writableState instanceof C}})):R=function(q){return q instanceof this};function M(W){e=e||nv();var q=this instanceof e;if(!q&&!R.call(M,this))return new M(W);this._writableState=new C(W,this,q),this.writable=!0,W&&(typeof W.write=="function"&&(this._write=W.write),typeof W.writev=="function"&&(this._writev=W.writev),typeof W.destroy=="function"&&(this._destroy=W.destroy),typeof W.final=="function"&&(this._final=W.final)),n.call(this)}M.prototype.pipe=function(){x(this,new p)};function N(W,q){var G=new v;x(W,G),Et.nextTick(q,G)}function Y(W,q,G,ee){var ae;return G===null?ae=new y:typeof G!="string"&&!q.objectMode&&(ae=new h("chunk",["string","Buffer"],G)),ae?(x(W,ae),Et.nextTick(ee,ae),!1):!0}M.prototype.write=function(W,q,G){var ee=this._writableState,ae=!1,te=!ee.objectMode&&o(W);return te&&!i.isBuffer(W)&&(W=a(W)),typeof q=="function"&&(G=q,q=null),te?q="buffer":q||(q=ee.defaultEncoding),typeof G!="function"&&(G=A),ee.ending?N(this,G):(te||Y(this,ee,W,G))&&(ee.pendingcb++,ae=E(this,ee,te,W,q,G)),ae},M.prototype.cork=function(){this._writableState.corked++},M.prototype.uncork=function(){var W=this._writableState;W.corked&&(W.corked--,!W.writing&&!W.corked&&!W.bufferProcessing&&W.bufferedRequest&&O(this,W))},M.prototype.setDefaultEncoding=function(q){if(typeof q=="string"&&(q=q.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((q+"").toLowerCase())>-1))throw new _(q);return this._writableState.defaultEncoding=q,this},Object.defineProperty(M.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function H(W,q,G){return!W.objectMode&&W.decodeStrings!==!1&&typeof q=="string"&&(q=i.from(q,G)),q}Object.defineProperty(M.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function E(W,q,G,ee,ae,te){if(!G){var K=H(q,ee,ae);ee!==K&&(G=!0,ae="buffer",ee=K)}var re=q.objectMode?1:ee.length;q.length+=re;var V=q.length<q.highWaterMark;if(V||(q.needDrain=!0),q.writing||q.corked){var oe=q.lastBufferedRequest;q.lastBufferedRequest={chunk:ee,encoding:ae,isBuf:G,callback:te,next:null},oe?oe.next=q.lastBufferedRequest:q.bufferedRequest=q.lastBufferedRequest,q.bufferedRequestCount+=1}else k(W,q,!1,re,ee,ae,te);return V}function k(W,q,G,ee,ae,te,K){q.writelen=ee,q.writecb=K,q.writing=!0,q.sync=!0,q.destroyed?q.onwrite(new m("write")):G?W._writev(ae,q.onwrite):W._write(ae,te,q.onwrite),q.sync=!1}function w(W,q,G,ee,ae){--q.pendingcb,G?(Et.nextTick(ae,ee),Et.nextTick(z,W,q),W._writableState.errorEmitted=!0,x(W,ee)):(ae(ee),W._writableState.errorEmitted=!0,x(W,ee),z(W,q))}function T(W){W.writing=!1,W.writecb=null,W.length-=W.writelen,W.writelen=0}function L(W,q){var G=W._writableState,ee=G.sync,ae=G.writecb;if(typeof ae!="function")throw new g;if(T(G),q)w(W,G,ee,q,ae);else{var te=D(G)||W.destroyed;!te&&!G.corked&&!G.bufferProcessing&&G.bufferedRequest&&O(W,G),ee?Et.nextTick(I,W,G,te,ae):I(W,G,te,ae)}}function I(W,q,G,ee){G||U(W,q),q.pendingcb--,ee(),z(W,q)}function U(W,q){q.length===0&&q.needDrain&&(q.needDrain=!1,W.emit("drain"))}function O(W,q){q.bufferProcessing=!0;var G=q.bufferedRequest;if(W._writev&&G&&G.next){var ee=q.bufferedRequestCount,ae=new Array(ee),te=q.corkedRequestsFree;te.entry=G;for(var K=0,re=!0;G;)ae[K]=G,G.isBuf||(re=!1),G=G.next,K+=1;ae.allBuffers=re,k(W,q,!0,q.length,ae,"",te.finish),q.pendingcb++,q.lastBufferedRequest=null,te.next?(q.corkedRequestsFree=te.next,te.next=null):q.corkedRequestsFree=new t(q),q.bufferedRequestCount=0}else{for(;G;){var V=G.chunk,oe=G.encoding,he=G.callback,ne=q.objectMode?1:V.length;if(k(W,q,!1,ne,V,oe,he),G=G.next,q.bufferedRequestCount--,q.writing)break}G===null&&(q.lastBufferedRequest=null)}q.bufferedRequest=G,q.bufferProcessing=!1}M.prototype._write=function(W,q,G){G(new d("_write()"))},M.prototype._writev=null,M.prototype.end=function(W,q,G){var ee=this._writableState;return typeof W=="function"?(G=W,W=null,q=null):typeof q=="function"&&(G=q,q=null),W!=null&&this.write(W,q),ee.corked&&(ee.corked=1,this.uncork()),ee.ending||F(this,ee,G),this},Object.defineProperty(M.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function D(W){return W.ending&&W.length===0&&W.bufferedRequest===null&&!W.finished&&!W.writing}function P(W,q){W._final(function(G){q.pendingcb--,G&&x(W,G),q.prefinished=!0,W.emit("prefinish"),z(W,q)})}function B(W,q){!q.prefinished&&!q.finalCalled&&(typeof W._final=="function"&&!q.destroyed?(q.pendingcb++,q.finalCalled=!0,Et.nextTick(P,W,q)):(q.prefinished=!0,W.emit("prefinish")))}function z(W,q){var G=D(q);if(G&&(B(W,q),q.pendingcb===0&&(q.finished=!0,W.emit("finish"),q.autoDestroy))){var ee=W._readableState;(!ee||ee.autoDestroy&&ee.endEmitted)&&W.destroy()}return G}function F(W,q,G){q.ending=!0,z(W,q),G&&(q.finished?Et.nextTick(G):W.once("finish",G)),q.ended=!0,W.writable=!1}function X(W,q,G){var ee=W.entry;for(W.entry=null;ee;){var ae=ee.callback;q.pendingcb--,ae(G),ee=ee.next}q.corkedRequestsFree.next=W}return Object.defineProperty(M.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(q){this._writableState&&(this._writableState.destroyed=q)}}),M.prototype.destroy=c.destroy,M.prototype._undestroy=c.undestroy,M.prototype._destroy=function(W,q){q(W)},PI}var BI,IJ;function nv(){if(IJ)return BI;IJ=1;var t=Object.keys||function(l){var u=[];for(var f in l)u.push(f);return u};BI=a;var e=l1e(),r=c1e();xr(a,e);for(var n=t(r.prototype),i=0;i<n.length;i++){var s=n[i];a.prototype[s]||(a.prototype[s]=r.prototype[s])}function a(l){if(!(this instanceof a))return new a(l);e.call(this,l),r.call(this,l),this.allowHalfOpen=!0,l&&(l.readable===!1&&(this.readable=!1),l.writable===!1&&(this.writable=!1),l.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",o)))}Object.defineProperty(a.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(a.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(a.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function o(){this._writableState.ended||Et.nextTick(c,this)}function c(l){l.end()}return Object.defineProperty(a.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(u){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=u,this._writableState.destroyed=u)}}),BI}var DI={},RJ;function PJ(){if(RJ)return DI;RJ=1;var t=Zr().Buffer,e=t.isEncoding||function(y){switch(y=""+y,y&&y.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function r(y){if(!y)return"utf8";for(var v;;)switch(y){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return y;default:if(v)return;y=(""+y).toLowerCase(),v=!0}}function n(y){var v=r(y);if(typeof v!="string"&&(t.isEncoding===e||!e(y)))throw new Error("Unknown encoding: "+y);return v||y}DI.StringDecoder=i;function i(y){this.encoding=n(y);var v;switch(this.encoding){case"utf16le":this.text=f,this.end=h,v=4;break;case"utf8":this.fillLast=c,v=4;break;case"base64":this.text=d,this.end=g,v=3;break;default:this.write=p,this.end=m;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=t.allocUnsafe(v)}i.prototype.write=function(y){if(y.length===0)return"";var v,_;if(this.lastNeed){if(v=this.fillLast(y),v===void 0)return"";_=this.lastNeed,this.lastNeed=0}else _=0;return _<y.length?v?v+this.text(y,_):this.text(y,_):v||""},i.prototype.end=u,i.prototype.text=l,i.prototype.fillLast=function(y){if(this.lastNeed<=y.length)return y.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);y.copy(this.lastChar,this.lastTotal-this.lastNeed,0,y.length),this.lastNeed-=y.length};function s(y){return y<=127?0:y>>5===6?2:y>>4===14?3:y>>3===30?4:y>>6===2?-1:-2}function a(y,v,_){var x=v.length-1;if(x<_)return 0;var A=s(v[x]);return A>=0?(A>0&&(y.lastNeed=A-1),A):--x<_||A===-2?0:(A=s(v[x]),A>=0?(A>0&&(y.lastNeed=A-2),A):--x<_||A===-2?0:(A=s(v[x]),A>=0?(A>0&&(A===2?A=0:y.lastNeed=A-3),A):0))}function o(y,v,_){if((v[0]&192)!==128)return y.lastNeed=0,"�";if(y.lastNeed>1&&v.length>1){if((v[1]&192)!==128)return y.lastNeed=1,"�";if(y.lastNeed>2&&v.length>2&&(v[2]&192)!==128)return y.lastNeed=2,"�"}}function c(y){var v=this.lastTotal-this.lastNeed,_=o(this,y);if(_!==void 0)return _;if(this.lastNeed<=y.length)return y.copy(this.lastChar,v,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);y.copy(this.lastChar,v,0,y.length),this.lastNeed-=y.length}function l(y,v){var _=a(this,y,v);if(!this.lastNeed)return y.toString("utf8",v);this.lastTotal=_;var x=y.length-(_-this.lastNeed);return y.copy(this.lastChar,0,x),y.toString("utf8",v,x)}function u(y){var v=y&&y.length?this.write(y):"";return this.lastNeed?v+"�":v}function f(y,v){if((y.length-v)%2===0){var _=y.toString("utf16le",v);if(_){var x=_.charCodeAt(_.length-1);if(x>=55296&&x<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=y[y.length-2],this.lastChar[1]=y[y.length-1],_.slice(0,-1)}return _}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=y[y.length-1],y.toString("utf16le",v,y.length-1)}function h(y){var v=y&&y.length?this.write(y):"";if(this.lastNeed){var _=this.lastTotal-this.lastNeed;return v+this.lastChar.toString("utf16le",0,_)}return v}function d(y,v){var _=(y.length-v)%3;return _===0?y.toString("base64",v):(this.lastNeed=3-_,this.lastTotal=3,_===1?this.lastChar[0]=y[y.length-1]:(this.lastChar[0]=y[y.length-2],this.lastChar[1]=y[y.length-1]),y.toString("base64",v,y.length-_))}function g(y){var v=y&&y.length?this.write(y):"";return this.lastNeed?v+this.lastChar.toString("base64",0,3-this.lastNeed):v}function p(y){return y.toString(this.encoding)}function m(y){return y&&y.length?this.write(y):""}return DI}var OI,BJ;function sU(){if(BJ)return OI;BJ=1;var t=mb().codes.ERR_STREAM_PREMATURE_CLOSE;function e(s){var a=!1;return function(){if(!a){a=!0;for(var o=arguments.length,c=new Array(o),l=0;l<o;l++)c[l]=arguments[l];s.apply(this,c)}}}function r(){}function n(s){return s.setHeader&&typeof s.abort=="function"}function i(s,a,o){if(typeof a=="function")return i(s,null,a);a||(a={}),o=e(o||r);var c=a.readable||a.readable!==!1&&s.readable,l=a.writable||a.writable!==!1&&s.writable,u=function(){s.writable||h()},f=s._writableState&&s._writableState.finished,h=function(){l=!1,f=!0,c||o.call(s)},d=s._readableState&&s._readableState.endEmitted,g=function(){c=!1,d=!0,l||o.call(s)},p=function(_){o.call(s,_)},m=function(){var _;if(c&&!d)return(!s._readableState||!s._readableState.ended)&&(_=new t),o.call(s,_);if(l&&!f)return(!s._writableState||!s._writableState.ended)&&(_=new t),o.call(s,_)},y=function(){s.req.on("finish",h)};return n(s)?(s.on("complete",h),s.on("abort",m),s.req?y():s.on("request",y)):l&&!s._writableState&&(s.on("end",u),s.on("close",u)),s.on("end",g),s.on("finish",h),a.error!==!1&&s.on("error",p),s.on("close",m),function(){s.removeListener("complete",h),s.removeListener("abort",m),s.removeListener("request",y),s.req&&s.req.removeListener("finish",h),s.removeListener("end",u),s.removeListener("close",u),s.removeListener("finish",h),s.removeListener("end",g),s.removeListener("error",p),s.removeListener("close",m)}}return OI=i,OI}var NI,DJ;function Iat(){if(DJ)return NI;DJ=1;var t;function e(_,x,A){return x=r(x),x in _?Object.defineProperty(_,x,{value:A,enumerable:!0,configurable:!0,writable:!0}):_[x]=A,_}function r(_){var x=n(_,"string");return typeof x=="symbol"?x:String(x)}function n(_,x){if(typeof _!="object"||_===null)return _;var A=_[Symbol.toPrimitive];if(A!==void 0){var C=A.call(_,x||"default");if(typeof C!="object")return C;throw new TypeError("@@toPrimitive must return a primitive value.")}return(x==="string"?String:Number)(_)}var i=sU(),s=Symbol("lastResolve"),a=Symbol("lastReject"),o=Symbol("error"),c=Symbol("ended"),l=Symbol("lastPromise"),u=Symbol("handlePromise"),f=Symbol("stream");function h(_,x){return{value:_,done:x}}function d(_){var x=_[s];if(x!==null){var A=_[f].read();A!==null&&(_[l]=null,_[s]=null,_[a]=null,x(h(A,!1)))}}function g(_){Et.nextTick(d,_)}function p(_,x){return function(A,C){_.then(function(){if(x[c]){A(h(void 0,!0));return}x[u](A,C)},C)}}var m=Object.getPrototypeOf(function(){}),y=Object.setPrototypeOf((t={get stream(){return this[f]},next:function(){var x=this,A=this[o];if(A!==null)return Promise.reject(A);if(this[c])return Promise.resolve(h(void 0,!0));if(this[f].destroyed)return new Promise(function(N,Y){Et.nextTick(function(){x[o]?Y(x[o]):N(h(void 0,!0))})});var C=this[l],R;if(C)R=new Promise(p(C,this));else{var M=this[f].read();if(M!==null)return Promise.resolve(h(M,!1));R=new Promise(this[u])}return this[l]=R,R}},e(t,Symbol.asyncIterator,function(){return this}),e(t,"return",function(){var x=this;return new Promise(function(A,C){x[f].destroy(null,function(R){if(R){C(R);return}A(h(void 0,!0))})})}),t),m),v=function(x){var A,C=Object.create(y,(A={},e(A,f,{value:x,writable:!0}),e(A,s,{value:null,writable:!0}),e(A,a,{value:null,writable:!0}),e(A,o,{value:null,writable:!0}),e(A,c,{value:x._readableState.endEmitted,writable:!0}),e(A,u,{value:function(M,N){var Y=C[f].read();Y?(C[l]=null,C[s]=null,C[a]=null,M(h(Y,!1))):(C[s]=M,C[a]=N)},writable:!0}),A));return C[l]=null,i(x,function(R){if(R&&R.code!=="ERR_STREAM_PREMATURE_CLOSE"){var M=C[a];M!==null&&(C[l]=null,C[s]=null,C[a]=null,M(R)),C[o]=R;return}var N=C[s];N!==null&&(C[l]=null,C[s]=null,C[a]=null,N(h(void 0,!0))),C[c]=!0}),x.on("readable",g.bind(null,C)),C};return NI=v,NI}var MI,OJ;function Rat(){return OJ||(OJ=1,MI=function(){throw new Error("Readable.from is not available in the browser")}),MI}var LI,NJ;function l1e(){if(NJ)return LI;NJ=1,LI=N;var t;N.ReadableState=M,qi.EventEmitter;var e=function(K,re){return K.listeners(re).length},r=i1e(),n=Es.Buffer,i=(typeof It<"u"?It:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function s(te){return n.from(te)}function a(te){return n.isBuffer(te)||te instanceof i}var o=rp,c;o&&o.debuglog?c=o.debuglog("stream"):c=function(){};var l=Cat(),u=s1e(),f=a1e(),h=f.getHighWaterMark,d=mb().codes,g=d.ERR_INVALID_ARG_TYPE,p=d.ERR_STREAM_PUSH_AFTER_EOF,m=d.ERR_METHOD_NOT_IMPLEMENTED,y=d.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,v,_,x;xr(N,r);var A=u.errorOrDestroy,C=["error","close","destroy","pause","resume"];function R(te,K,re){if(typeof te.prependListener=="function")return te.prependListener(K,re);!te._events||!te._events[K]?te.on(K,re):Array.isArray(te._events[K])?te._events[K].unshift(re):te._events[K]=[re,te._events[K]]}function M(te,K,re){t=t||nv(),te=te||{},typeof re!="boolean"&&(re=K instanceof t),this.objectMode=!!te.objectMode,re&&(this.objectMode=this.objectMode||!!te.readableObjectMode),this.highWaterMark=h(this,te,"readableHighWaterMark",re),this.buffer=new l,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=te.emitClose!==!1,this.autoDestroy=!!te.autoDestroy,this.destroyed=!1,this.defaultEncoding=te.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,te.encoding&&(v||(v=PJ().StringDecoder),this.decoder=new v(te.encoding),this.encoding=te.encoding)}function N(te){if(t=t||nv(),!(this instanceof N))return new N(te);var K=this instanceof t;this._readableState=new M(te,this,K),this.readable=!0,te&&(typeof te.read=="function"&&(this._read=te.read),typeof te.destroy=="function"&&(this._destroy=te.destroy)),r.call(this)}Object.defineProperty(N.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(K){this._readableState&&(this._readableState.destroyed=K)}}),N.prototype.destroy=u.destroy,N.prototype._undestroy=u.undestroy,N.prototype._destroy=function(te,K){K(te)},N.prototype.push=function(te,K){var re=this._readableState,V;return re.objectMode?V=!0:typeof te=="string"&&(K=K||re.defaultEncoding,K!==re.encoding&&(te=n.from(te,K),K=""),V=!0),Y(this,te,K,!1,V)},N.prototype.unshift=function(te){return Y(this,te,null,!0,!1)};function Y(te,K,re,V,oe){c("readableAddChunk",K);var he=te._readableState;if(K===null)he.reading=!1,L(te,he);else{var ne;if(oe||(ne=E(he,K)),ne)A(te,ne);else if(he.objectMode||K&&K.length>0)if(typeof K!="string"&&!he.objectMode&&Object.getPrototypeOf(K)!==n.prototype&&(K=s(K)),V)he.endEmitted?A(te,new y):H(te,he,K,!0);else if(he.ended)A(te,new p);else{if(he.destroyed)return!1;he.reading=!1,he.decoder&&!re?(K=he.decoder.write(K),he.objectMode||K.length!==0?H(te,he,K,!1):O(te,he)):H(te,he,K,!1)}else V||(he.reading=!1,O(te,he))}return!he.ended&&(he.length<he.highWaterMark||he.length===0)}function H(te,K,re,V){K.flowing&&K.length===0&&!K.sync?(K.awaitDrain=0,te.emit("data",re)):(K.length+=K.objectMode?1:re.length,V?K.buffer.unshift(re):K.buffer.push(re),K.needReadable&&I(te)),O(te,K)}function E(te,K){var re;return!a(K)&&typeof K!="string"&&K!==void 0&&!te.objectMode&&(re=new g("chunk",["string","Buffer","Uint8Array"],K)),re}N.prototype.isPaused=function(){return this._readableState.flowing===!1},N.prototype.setEncoding=function(te){v||(v=PJ().StringDecoder);var K=new v(te);this._readableState.decoder=K,this._readableState.encoding=this._readableState.decoder.encoding;for(var re=this._readableState.buffer.head,V="";re!==null;)V+=K.write(re.data),re=re.next;return this._readableState.buffer.clear(),V!==""&&this._readableState.buffer.push(V),this._readableState.length=V.length,this};var k=1073741824;function w(te){return te>=k?te=k:(te--,te|=te>>>1,te|=te>>>2,te|=te>>>4,te|=te>>>8,te|=te>>>16,te++),te}function T(te,K){return te<=0||K.length===0&&K.ended?0:K.objectMode?1:te!==te?K.flowing&&K.length?K.buffer.head.data.length:K.length:(te>K.highWaterMark&&(K.highWaterMark=w(te)),te<=K.length?te:K.ended?K.length:(K.needReadable=!0,0))}N.prototype.read=function(te){c("read",te),te=parseInt(te,10);var K=this._readableState,re=te;if(te!==0&&(K.emittedReadable=!1),te===0&&K.needReadable&&((K.highWaterMark!==0?K.length>=K.highWaterMark:K.length>0)||K.ended))return c("read: emitReadable",K.length,K.ended),K.length===0&&K.ended?G(this):I(this),null;if(te=T(te,K),te===0&&K.ended)return K.length===0&&G(this),null;var V=K.needReadable;c("need readable",V),(K.length===0||K.length-te<K.highWaterMark)&&(V=!0,c("length less than watermark",V)),K.ended||K.reading?(V=!1,c("reading or ended",V)):V&&(c("do read"),K.reading=!0,K.sync=!0,K.length===0&&(K.needReadable=!0),this._read(K.highWaterMark),K.sync=!1,K.reading||(te=T(re,K)));var oe;return te>0?oe=q(te,K):oe=null,oe===null?(K.needReadable=K.length<=K.highWaterMark,te=0):(K.length-=te,K.awaitDrain=0),K.length===0&&(K.ended||(K.needReadable=!0),re!==te&&K.ended&&G(this)),oe!==null&&this.emit("data",oe),oe};function L(te,K){if(c("onEofChunk"),!K.ended){if(K.decoder){var re=K.decoder.end();re&&re.length&&(K.buffer.push(re),K.length+=K.objectMode?1:re.length)}K.ended=!0,K.sync?I(te):(K.needReadable=!1,K.emittedReadable||(K.emittedReadable=!0,U(te)))}}function I(te){var K=te._readableState;c("emitReadable",K.needReadable,K.emittedReadable),K.needReadable=!1,K.emittedReadable||(c("emitReadable",K.flowing),K.emittedReadable=!0,Et.nextTick(U,te))}function U(te){var K=te._readableState;c("emitReadable_",K.destroyed,K.length,K.ended),!K.destroyed&&(K.length||K.ended)&&(te.emit("readable"),K.emittedReadable=!1),K.needReadable=!K.flowing&&!K.ended&&K.length<=K.highWaterMark,W(te)}function O(te,K){K.readingMore||(K.readingMore=!0,Et.nextTick(D,te,K))}function D(te,K){for(;!K.reading&&!K.ended&&(K.length<K.highWaterMark||K.flowing&&K.length===0);){var re=K.length;if(c("maybeReadMore read 0"),te.read(0),re===K.length)break}K.readingMore=!1}N.prototype._read=function(te){A(this,new m("_read()"))},N.prototype.pipe=function(te,K){var re=this,V=this._readableState;switch(V.pipesCount){case 0:V.pipes=te;break;case 1:V.pipes=[V.pipes,te];break;default:V.pipes.push(te);break}V.pipesCount+=1,c("pipe count=%d opts=%j",V.pipesCount,K);var oe=(!K||K.end!==!1)&&te!==Et.stdout&&te!==Et.stderr,he=oe?ie:$e;V.endEmitted?Et.nextTick(he):re.once("end",he),te.on("unpipe",ne);function ne(se,Z){c("onunpipe"),se===re&&Z&&Z.hasUnpiped===!1&&(Z.hasUnpiped=!0,Ee())}function ie(){c("onend"),te.end()}var ce=P(re);te.on("drain",ce);var ve=!1;function Ee(){c("cleanup"),te.removeListener("close",Ce),te.removeListener("finish",Ie),te.removeListener("drain",ce),te.removeListener("error",Pe),te.removeListener("unpipe",ne),re.removeListener("end",ie),re.removeListener("end",$e),re.removeListener("data",ge),ve=!0,V.awaitDrain&&(!te._writableState||te._writableState.needDrain)&&ce()}re.on("data",ge);function ge(se){c("ondata");var Z=te.write(se);c("dest.write",Z),Z===!1&&((V.pipesCount===1&&V.pipes===te||V.pipesCount>1&&ae(V.pipes,te)!==-1)&&!ve&&(c("false write response, pause",V.awaitDrain),V.awaitDrain++),re.pause())}function Pe(se){c("onerror",se),$e(),te.removeListener("error",Pe),e(te,"error")===0&&A(te,se)}R(te,"error",Pe);function Ce(){te.removeListener("finish",Ie),$e()}te.once("close",Ce);function Ie(){c("onfinish"),te.removeListener("close",Ce),$e()}te.once("finish",Ie);function $e(){c("unpipe"),re.unpipe(te)}return te.emit("pipe",re),V.flowing||(c("pipe resume"),re.resume()),te};function P(te){return function(){var re=te._readableState;c("pipeOnDrain",re.awaitDrain),re.awaitDrain&&re.awaitDrain--,re.awaitDrain===0&&e(te,"data")&&(re.flowing=!0,W(te))}}N.prototype.unpipe=function(te){var K=this._readableState,re={hasUnpiped:!1};if(K.pipesCount===0)return this;if(K.pipesCount===1)return te&&te!==K.pipes?this:(te||(te=K.pipes),K.pipes=null,K.pipesCount=0,K.flowing=!1,te&&te.emit("unpipe",this,re),this);if(!te){var V=K.pipes,oe=K.pipesCount;K.pipes=null,K.pipesCount=0,K.flowing=!1;for(var he=0;he<oe;he++)V[he].emit("unpipe",this,{hasUnpiped:!1});return this}var ne=ae(K.pipes,te);return ne===-1?this:(K.pipes.splice(ne,1),K.pipesCount-=1,K.pipesCount===1&&(K.pipes=K.pipes[0]),te.emit("unpipe",this,re),this)},N.prototype.on=function(te,K){var re=r.prototype.on.call(this,te,K),V=this._readableState;return te==="data"?(V.readableListening=this.listenerCount("readable")>0,V.flowing!==!1&&this.resume()):te==="readable"&&!V.endEmitted&&!V.readableListening&&(V.readableListening=V.needReadable=!0,V.flowing=!1,V.emittedReadable=!1,c("on readable",V.length,V.reading),V.length?I(this):V.reading||Et.nextTick(z,this)),re},N.prototype.addListener=N.prototype.on,N.prototype.removeListener=function(te,K){var re=r.prototype.removeListener.call(this,te,K);return te==="readable"&&Et.nextTick(B,this),re},N.prototype.removeAllListeners=function(te){var K=r.prototype.removeAllListeners.apply(this,arguments);return(te==="readable"||te===void 0)&&Et.nextTick(B,this),K};function B(te){var K=te._readableState;K.readableListening=te.listenerCount("readable")>0,K.resumeScheduled&&!K.paused?K.flowing=!0:te.listenerCount("data")>0&&te.resume()}function z(te){c("readable nexttick read 0"),te.read(0)}N.prototype.resume=function(){var te=this._readableState;return te.flowing||(c("resume"),te.flowing=!te.readableListening,F(this,te)),te.paused=!1,this};function F(te,K){K.resumeScheduled||(K.resumeScheduled=!0,Et.nextTick(X,te,K))}function X(te,K){c("resume",K.reading),K.reading||te.read(0),K.resumeScheduled=!1,te.emit("resume"),W(te),K.flowing&&!K.reading&&te.read(0)}N.prototype.pause=function(){return c("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(c("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function W(te){var K=te._readableState;for(c("flow",K.flowing);K.flowing&&te.read()!==null;);}N.prototype.wrap=function(te){var K=this,re=this._readableState,V=!1;te.on("end",function(){if(c("wrapped end"),re.decoder&&!re.ended){var ne=re.decoder.end();ne&&ne.length&&K.push(ne)}K.push(null)}),te.on("data",function(ne){if(c("wrapped data"),re.decoder&&(ne=re.decoder.write(ne)),!(re.objectMode&&ne==null)&&!(!re.objectMode&&(!ne||!ne.length))){var ie=K.push(ne);ie||(V=!0,te.pause())}});for(var oe in te)this[oe]===void 0&&typeof te[oe]=="function"&&(this[oe]=function(ie){return function(){return te[ie].apply(te,arguments)}}(oe));for(var he=0;he<C.length;he++)te.on(C[he],this.emit.bind(this,C[he]));return this._read=function(ne){c("wrapped _read",ne),V&&(V=!1,te.resume())},this},typeof Symbol=="function"&&(N.prototype[Symbol.asyncIterator]=function(){return _===void 0&&(_=Iat()),_(this)}),Object.defineProperty(N.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(N.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(N.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(K){this._readableState&&(this._readableState.flowing=K)}}),N._fromList=q,Object.defineProperty(N.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function q(te,K){if(K.length===0)return null;var re;return K.objectMode?re=K.buffer.shift():!te||te>=K.length?(K.decoder?re=K.buffer.join(""):K.buffer.length===1?re=K.buffer.first():re=K.buffer.concat(K.length),K.buffer.clear()):re=K.buffer.consume(te,K.decoder),re}function G(te){var K=te._readableState;c("endReadable",K.endEmitted),K.endEmitted||(K.ended=!0,Et.nextTick(ee,K,te))}function ee(te,K){if(c("endReadableNT",te.endEmitted,te.length),!te.endEmitted&&te.length===0&&(te.endEmitted=!0,K.readable=!1,K.emit("end"),te.autoDestroy)){var re=K._writableState;(!re||re.autoDestroy&&re.finished)&&K.destroy()}}typeof Symbol=="function"&&(N.from=function(te,K){return x===void 0&&(x=Rat()),x(N,te,K)});function ae(te,K){for(var re=0,V=te.length;re<V;re++)if(te[re]===K)return re;return-1}return LI}var FI,MJ;function u1e(){if(MJ)return FI;MJ=1,FI=o;var t=mb().codes,e=t.ERR_METHOD_NOT_IMPLEMENTED,r=t.ERR_MULTIPLE_CALLBACK,n=t.ERR_TRANSFORM_ALREADY_TRANSFORMING,i=t.ERR_TRANSFORM_WITH_LENGTH_0,s=nv();xr(o,s);function a(u,f){var h=this._transformState;h.transforming=!1;var d=h.writecb;if(d===null)return this.emit("error",new r);h.writechunk=null,h.writecb=null,f!=null&&this.push(f),d(u);var g=this._readableState;g.reading=!1,(g.needReadable||g.length<g.highWaterMark)&&this._read(g.highWaterMark)}function o(u){if(!(this instanceof o))return new o(u);s.call(this,u),this._transformState={afterTransform:a.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,u&&(typeof u.transform=="function"&&(this._transform=u.transform),typeof u.flush=="function"&&(this._flush=u.flush)),this.on("prefinish",c)}function c(){var u=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(f,h){l(u,f,h)}):l(this,null,null)}o.prototype.push=function(u,f){return this._transformState.needTransform=!1,s.prototype.push.call(this,u,f)},o.prototype._transform=function(u,f,h){h(new e("_transform()"))},o.prototype._write=function(u,f,h){var d=this._transformState;if(d.writecb=h,d.writechunk=u,d.writeencoding=f,!d.transforming){var g=this._readableState;(d.needTransform||g.needReadable||g.length<g.highWaterMark)&&this._read(g.highWaterMark)}},o.prototype._read=function(u){var f=this._transformState;f.writechunk!==null&&!f.transforming?(f.transforming=!0,this._transform(f.writechunk,f.writeencoding,f.afterTransform)):f.needTransform=!0},o.prototype._destroy=function(u,f){s.prototype._destroy.call(this,u,function(h){f(h)})};function l(u,f,h){if(f)return u.emit("error",f);if(h!=null&&u.push(h),u._writableState.length)throw new i;if(u._transformState.transforming)throw new n;return u.push(null)}return FI}var $I,LJ;function Pat(){if(LJ)return $I;LJ=1,$I=e;var t=u1e();xr(e,t);function e(r){if(!(this instanceof e))return new e(r);t.call(this,r)}return e.prototype._transform=function(r,n,i){i(null,r)},$I}var UI,FJ;function Bat(){if(FJ)return UI;FJ=1;var t;function e(h){var d=!1;return function(){d||(d=!0,h.apply(void 0,arguments))}}var r=mb().codes,n=r.ERR_MISSING_ARGS,i=r.ERR_STREAM_DESTROYED;function s(h){if(h)throw h}function a(h){return h.setHeader&&typeof h.abort=="function"}function o(h,d,g,p){p=e(p);var m=!1;h.on("close",function(){m=!0}),t===void 0&&(t=sU()),t(h,{readable:d,writable:g},function(v){if(v)return p(v);m=!0,p()});var y=!1;return function(v){if(!m&&!y){if(y=!0,a(h))return h.abort();if(typeof h.destroy=="function")return h.destroy();p(v||new i("pipe"))}}}function c(h){h()}function l(h,d){return h.pipe(d)}function u(h){return!h.length||typeof h[h.length-1]!="function"?s:h.pop()}function f(){for(var h=arguments.length,d=new Array(h),g=0;g<h;g++)d[g]=arguments[g];var p=u(d);if(Array.isArray(d[0])&&(d=d[0]),d.length<2)throw new n("streams");var m,y=d.map(function(v,_){var x=_<d.length-1,A=_>0;return o(v,x,A,function(C){m||(m=C),C&&y.forEach(c),!x&&(y.forEach(c),p(m))})});return d.reduce(l)}return UI=f,UI}var $J;function Dat(){return $J||($J=1,function(t,e){e=t.exports=l1e(),e.Stream=e,e.Readable=e,e.Writable=c1e(),e.Duplex=nv(),e.Transform=u1e(),e.PassThrough=Pat(),e.finished=sU(),e.pipeline=Bat()}(i5,i5.exports)),i5.exports}var VI,UJ;function f1e(){if(UJ)return VI;UJ=1;var t=Zr().Buffer,e=Dat().Transform,r=xr;function n(s,a){if(!t.isBuffer(s)&&typeof s!="string")throw new TypeError(a+" must be a string or a buffer")}function i(s){e.call(this),this._block=t.allocUnsafe(s),this._blockSize=s,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}return r(i,e),i.prototype._transform=function(s,a,o){var c=null;try{this.update(s,a)}catch(l){c=l}o(c)},i.prototype._flush=function(s){var a=null;try{this.push(this.digest())}catch(o){a=o}s(a)},i.prototype.update=function(s,a){if(n(s,"Data"),this._finalized)throw new Error("Digest already called");t.isBuffer(s)||(s=t.from(s,a));for(var o=this._block,c=0;this._blockOffset+s.length-c>=this._blockSize;){for(var l=this._blockOffset;l<this._blockSize;)o[l++]=s[c++];this._update(),this._blockOffset=0}for(;c<s.length;)o[this._blockOffset++]=s[c++];for(var u=0,f=s.length*8;f>0;++u)this._length[u]+=f,f=this._length[u]/4294967296|0,f>0&&(this._length[u]-=4294967296*f);return this},i.prototype._update=function(){throw new Error("_update is not implemented")},i.prototype.digest=function(s){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var a=this._digest();s!==void 0&&(a=a.toString(s)),this._block.fill(0),this._blockOffset=0;for(var o=0;o<4;++o)this._length[o]=0;return a},i.prototype._digest=function(){throw new Error("_digest is not implemented")},VI=i,VI}var jI,VJ;function aU(){if(VJ)return jI;VJ=1;var t=xr,e=f1e(),r=Zr().Buffer,n=new Array(16);function i(){e.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878}t(i,e),i.prototype._update=function(){for(var u=n,f=0;f<16;++f)u[f]=this._block.readInt32LE(f*4);var h=this._a,d=this._b,g=this._c,p=this._d;h=a(h,d,g,p,u[0],3614090360,7),p=a(p,h,d,g,u[1],3905402710,12),g=a(g,p,h,d,u[2],606105819,17),d=a(d,g,p,h,u[3],3250441966,22),h=a(h,d,g,p,u[4],4118548399,7),p=a(p,h,d,g,u[5],1200080426,12),g=a(g,p,h,d,u[6],2821735955,17),d=a(d,g,p,h,u[7],4249261313,22),h=a(h,d,g,p,u[8],1770035416,7),p=a(p,h,d,g,u[9],2336552879,12),g=a(g,p,h,d,u[10],4294925233,17),d=a(d,g,p,h,u[11],2304563134,22),h=a(h,d,g,p,u[12],1804603682,7),p=a(p,h,d,g,u[13],4254626195,12),g=a(g,p,h,d,u[14],2792965006,17),d=a(d,g,p,h,u[15],1236535329,22),h=o(h,d,g,p,u[1],4129170786,5),p=o(p,h,d,g,u[6],3225465664,9),g=o(g,p,h,d,u[11],643717713,14),d=o(d,g,p,h,u[0],3921069994,20),h=o(h,d,g,p,u[5],3593408605,5),p=o(p,h,d,g,u[10],38016083,9),g=o(g,p,h,d,u[15],3634488961,14),d=o(d,g,p,h,u[4],3889429448,20),h=o(h,d,g,p,u[9],568446438,5),p=o(p,h,d,g,u[14],3275163606,9),g=o(g,p,h,d,u[3],4107603335,14),d=o(d,g,p,h,u[8],1163531501,20),h=o(h,d,g,p,u[13],2850285829,5),p=o(p,h,d,g,u[2],4243563512,9),g=o(g,p,h,d,u[7],1735328473,14),d=o(d,g,p,h,u[12],2368359562,20),h=c(h,d,g,p,u[5],4294588738,4),p=c(p,h,d,g,u[8],2272392833,11),g=c(g,p,h,d,u[11],1839030562,16),d=c(d,g,p,h,u[14],4259657740,23),h=c(h,d,g,p,u[1],2763975236,4),p=c(p,h,d,g,u[4],1272893353,11),g=c(g,p,h,d,u[7],4139469664,16),d=c(d,g,p,h,u[10],3200236656,23),h=c(h,d,g,p,u[13],681279174,4),p=c(p,h,d,g,u[0],3936430074,11),g=c(g,p,h,d,u[3],3572445317,16),d=c(d,g,p,h,u[6],76029189,23),h=c(h,d,g,p,u[9],3654602809,4),p=c(p,h,d,g,u[12],3873151461,11),g=c(g,p,h,d,u[15],530742520,16),d=c(d,g,p,h,u[2],3299628645,23),h=l(h,d,g,p,u[0],4096336452,6),p=l(p,h,d,g,u[7],1126891415,10),g=l(g,p,h,d,u[14],2878612391,15),d=l(d,g,p,h,u[5],4237533241,21),h=l(h,d,g,p,u[12],1700485571,6),p=l(p,h,d,g,u[3],2399980690,10),g=l(g,p,h,d,u[10],4293915773,15),d=l(d,g,p,h,u[1],2240044497,21),h=l(h,d,g,p,u[8],1873313359,6),p=l(p,h,d,g,u[15],4264355552,10),g=l(g,p,h,d,u[6],2734768916,15),d=l(d,g,p,h,u[13],1309151649,21),h=l(h,d,g,p,u[4],4149444226,6),p=l(p,h,d,g,u[11],3174756917,10),g=l(g,p,h,d,u[2],718787259,15),d=l(d,g,p,h,u[9],3951481745,21),this._a=this._a+h|0,this._b=this._b+d|0,this._c=this._c+g|0,this._d=this._d+p|0},i.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var u=r.allocUnsafe(16);return u.writeInt32LE(this._a,0),u.writeInt32LE(this._b,4),u.writeInt32LE(this._c,8),u.writeInt32LE(this._d,12),u};function s(u,f){return u<<f|u>>>32-f}function a(u,f,h,d,g,p,m){return s(u+(f&h|~f&d)+g+p|0,m)+f|0}function o(u,f,h,d,g,p,m){return s(u+(f&d|h&~d)+g+p|0,m)+f|0}function c(u,f,h,d,g,p,m){return s(u+(f^h^d)+g+p|0,m)+f|0}function l(u,f,h,d,g,p,m){return s(u+(h^(f|~d))+g+p|0,m)+f|0}return jI=i,jI}var zI,jJ;function oU(){if(jJ)return zI;jJ=1;var t=Es.Buffer,e=xr,r=f1e(),n=new Array(16),i=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],s=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],a=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],o=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],c=[0,1518500249,1859775393,2400959708,2840853838],l=[1352829926,1548603684,1836072691,2053994217,0];function u(){r.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520}e(u,r),u.prototype._update=function(){for(var y=n,v=0;v<16;++v)y[v]=this._block.readInt32LE(v*4);for(var _=this._a|0,x=this._b|0,A=this._c|0,C=this._d|0,R=this._e|0,M=this._a|0,N=this._b|0,Y=this._c|0,H=this._d|0,E=this._e|0,k=0;k<80;k+=1){var w,T;k<16?(w=h(_,x,A,C,R,y[i[k]],c[0],a[k]),T=m(M,N,Y,H,E,y[s[k]],l[0],o[k])):k<32?(w=d(_,x,A,C,R,y[i[k]],c[1],a[k]),T=p(M,N,Y,H,E,y[s[k]],l[1],o[k])):k<48?(w=g(_,x,A,C,R,y[i[k]],c[2],a[k]),T=g(M,N,Y,H,E,y[s[k]],l[2],o[k])):k<64?(w=p(_,x,A,C,R,y[i[k]],c[3],a[k]),T=d(M,N,Y,H,E,y[s[k]],l[3],o[k])):(w=m(_,x,A,C,R,y[i[k]],c[4],a[k]),T=h(M,N,Y,H,E,y[s[k]],l[4],o[k])),_=R,R=C,C=f(A,10),A=x,x=w,M=E,E=H,H=f(Y,10),Y=N,N=T}var L=this._b+A+H|0;this._b=this._c+C+E|0,this._c=this._d+R+M|0,this._d=this._e+_+N|0,this._e=this._a+x+Y|0,this._a=L},u.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var y=t.alloc?t.alloc(20):new t(20);return y.writeInt32LE(this._a,0),y.writeInt32LE(this._b,4),y.writeInt32LE(this._c,8),y.writeInt32LE(this._d,12),y.writeInt32LE(this._e,16),y};function f(y,v){return y<<v|y>>>32-v}function h(y,v,_,x,A,C,R,M){return f(y+(v^_^x)+C+R|0,M)+A|0}function d(y,v,_,x,A,C,R,M){return f(y+(v&_|~v&x)+C+R|0,M)+A|0}function g(y,v,_,x,A,C,R,M){return f(y+((v|~_)^x)+C+R|0,M)+A|0}function p(y,v,_,x,A,C,R,M){return f(y+(v&x|_&~x)+C+R|0,M)+A|0}function m(y,v,_,x,A,C,R,M){return f(y+(v^(_|~x))+C+R|0,M)+A|0}return zI=u,zI}var qI={exports:{}},HI,zJ;function yb(){if(zJ)return HI;zJ=1;var t=Zr().Buffer;function e(r,n){this._block=t.alloc(r),this._finalSize=n,this._blockSize=r,this._len=0}return e.prototype.update=function(r,n){typeof r=="string"&&(n=n||"utf8",r=t.from(r,n));for(var i=this._block,s=this._blockSize,a=r.length,o=this._len,c=0;c<a;){for(var l=o%s,u=Math.min(a-c,s-l),f=0;f<u;f++)i[l+f]=r[c+f];o+=u,c+=u,o%s===0&&this._update(i)}return this._len+=a,this},e.prototype.digest=function(r){var n=this._len%this._blockSize;this._block[n]=128,this._block.fill(0,n+1),n>=this._finalSize&&(this._update(this._block),this._block.fill(0));var i=this._len*8;if(i<=4294967295)this._block.writeUInt32BE(i,this._blockSize-4);else{var s=(i&4294967295)>>>0,a=(i-s)/4294967296;this._block.writeUInt32BE(a,this._blockSize-8),this._block.writeUInt32BE(s,this._blockSize-4)}this._update(this._block);var o=this._hash();return r?o.toString(r):o},e.prototype._update=function(){throw new Error("_update must be implemented by subclass")},HI=e,HI}var WI,qJ;function Oat(){if(qJ)return WI;qJ=1;var t=xr,e=yb(),r=Zr().Buffer,n=[1518500249,1859775393,-1894007588,-899497514],i=new Array(80);function s(){this.init(),this._w=i,e.call(this,64,56)}t(s,e),s.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function a(l){return l<<5|l>>>27}function o(l){return l<<30|l>>>2}function c(l,u,f,h){return l===0?u&f|~u&h:l===2?u&f|u&h|f&h:u^f^h}return s.prototype._update=function(l){for(var u=this._w,f=this._a|0,h=this._b|0,d=this._c|0,g=this._d|0,p=this._e|0,m=0;m<16;++m)u[m]=l.readInt32BE(m*4);for(;m<80;++m)u[m]=u[m-3]^u[m-8]^u[m-14]^u[m-16];for(var y=0;y<80;++y){var v=~~(y/20),_=a(f)+c(v,h,d,g)+p+u[y]+n[v]|0;p=g,g=d,d=o(h),h=f,f=_}this._a=f+this._a|0,this._b=h+this._b|0,this._c=d+this._c|0,this._d=g+this._d|0,this._e=p+this._e|0},s.prototype._hash=function(){var l=r.allocUnsafe(20);return l.writeInt32BE(this._a|0,0),l.writeInt32BE(this._b|0,4),l.writeInt32BE(this._c|0,8),l.writeInt32BE(this._d|0,12),l.writeInt32BE(this._e|0,16),l},WI=s,WI}var KI,HJ;function Nat(){if(HJ)return KI;HJ=1;var t=xr,e=yb(),r=Zr().Buffer,n=[1518500249,1859775393,-1894007588,-899497514],i=new Array(80);function s(){this.init(),this._w=i,e.call(this,64,56)}t(s,e),s.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function a(u){return u<<1|u>>>31}function o(u){return u<<5|u>>>27}function c(u){return u<<30|u>>>2}function l(u,f,h,d){return u===0?f&h|~f&d:u===2?f&h|f&d|h&d:f^h^d}return s.prototype._update=function(u){for(var f=this._w,h=this._a|0,d=this._b|0,g=this._c|0,p=this._d|0,m=this._e|0,y=0;y<16;++y)f[y]=u.readInt32BE(y*4);for(;y<80;++y)f[y]=a(f[y-3]^f[y-8]^f[y-14]^f[y-16]);for(var v=0;v<80;++v){var _=~~(v/20),x=o(h)+l(_,d,g,p)+m+f[v]+n[_]|0;m=p,p=g,g=c(d),d=h,h=x}this._a=h+this._a|0,this._b=d+this._b|0,this._c=g+this._c|0,this._d=p+this._d|0,this._e=m+this._e|0},s.prototype._hash=function(){var u=r.allocUnsafe(20);return u.writeInt32BE(this._a|0,0),u.writeInt32BE(this._b|0,4),u.writeInt32BE(this._c|0,8),u.writeInt32BE(this._d|0,12),u.writeInt32BE(this._e|0,16),u},KI=s,KI}var GI,WJ;function h1e(){if(WJ)return GI;WJ=1;var t=xr,e=yb(),r=Zr().Buffer,n=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],i=new Array(64);function s(){this.init(),this._w=i,e.call(this,64,56)}t(s,e),s.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this};function a(h,d,g){return g^h&(d^g)}function o(h,d,g){return h&d|g&(h|d)}function c(h){return(h>>>2|h<<30)^(h>>>13|h<<19)^(h>>>22|h<<10)}function l(h){return(h>>>6|h<<26)^(h>>>11|h<<21)^(h>>>25|h<<7)}function u(h){return(h>>>7|h<<25)^(h>>>18|h<<14)^h>>>3}function f(h){return(h>>>17|h<<15)^(h>>>19|h<<13)^h>>>10}return s.prototype._update=function(h){for(var d=this._w,g=this._a|0,p=this._b|0,m=this._c|0,y=this._d|0,v=this._e|0,_=this._f|0,x=this._g|0,A=this._h|0,C=0;C<16;++C)d[C]=h.readInt32BE(C*4);for(;C<64;++C)d[C]=f(d[C-2])+d[C-7]+u(d[C-15])+d[C-16]|0;for(var R=0;R<64;++R){var M=A+l(v)+a(v,_,x)+n[R]+d[R]|0,N=c(g)+o(g,p,m)|0;A=x,x=_,_=v,v=y+M|0,y=m,m=p,p=g,g=M+N|0}this._a=g+this._a|0,this._b=p+this._b|0,this._c=m+this._c|0,this._d=y+this._d|0,this._e=v+this._e|0,this._f=_+this._f|0,this._g=x+this._g|0,this._h=A+this._h|0},s.prototype._hash=function(){var h=r.allocUnsafe(32);return h.writeInt32BE(this._a,0),h.writeInt32BE(this._b,4),h.writeInt32BE(this._c,8),h.writeInt32BE(this._d,12),h.writeInt32BE(this._e,16),h.writeInt32BE(this._f,20),h.writeInt32BE(this._g,24),h.writeInt32BE(this._h,28),h},GI=s,GI}var YI,KJ;function Mat(){if(KJ)return YI;KJ=1;var t=xr,e=h1e(),r=yb(),n=Zr().Buffer,i=new Array(64);function s(){this.init(),this._w=i,r.call(this,64,56)}return t(s,e),s.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this},s.prototype._hash=function(){var a=n.allocUnsafe(28);return a.writeInt32BE(this._a,0),a.writeInt32BE(this._b,4),a.writeInt32BE(this._c,8),a.writeInt32BE(this._d,12),a.writeInt32BE(this._e,16),a.writeInt32BE(this._f,20),a.writeInt32BE(this._g,24),a},YI=s,YI}var XI,GJ;function d1e(){if(GJ)return XI;GJ=1;var t=xr,e=yb(),r=Zr().Buffer,n=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],i=new Array(160);function s(){this.init(),this._w=i,e.call(this,128,112)}t(s,e),s.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this};function a(p,m,y){return y^p&(m^y)}function o(p,m,y){return p&m|y&(p|m)}function c(p,m){return(p>>>28|m<<4)^(m>>>2|p<<30)^(m>>>7|p<<25)}function l(p,m){return(p>>>14|m<<18)^(p>>>18|m<<14)^(m>>>9|p<<23)}function u(p,m){return(p>>>1|m<<31)^(p>>>8|m<<24)^p>>>7}function f(p,m){return(p>>>1|m<<31)^(p>>>8|m<<24)^(p>>>7|m<<25)}function h(p,m){return(p>>>19|m<<13)^(m>>>29|p<<3)^p>>>6}function d(p,m){return(p>>>19|m<<13)^(m>>>29|p<<3)^(p>>>6|m<<26)}function g(p,m){return p>>>0<m>>>0?1:0}return s.prototype._update=function(p){for(var m=this._w,y=this._ah|0,v=this._bh|0,_=this._ch|0,x=this._dh|0,A=this._eh|0,C=this._fh|0,R=this._gh|0,M=this._hh|0,N=this._al|0,Y=this._bl|0,H=this._cl|0,E=this._dl|0,k=this._el|0,w=this._fl|0,T=this._gl|0,L=this._hl|0,I=0;I<32;I+=2)m[I]=p.readInt32BE(I*4),m[I+1]=p.readInt32BE(I*4+4);for(;I<160;I+=2){var U=m[I-30],O=m[I-15*2+1],D=u(U,O),P=f(O,U);U=m[I-2*2],O=m[I-2*2+1];var B=h(U,O),z=d(O,U),F=m[I-7*2],X=m[I-7*2+1],W=m[I-16*2],q=m[I-16*2+1],G=P+X|0,ee=D+F+g(G,P)|0;G=G+z|0,ee=ee+B+g(G,z)|0,G=G+q|0,ee=ee+W+g(G,q)|0,m[I]=ee,m[I+1]=G}for(var ae=0;ae<160;ae+=2){ee=m[ae],G=m[ae+1];var te=o(y,v,_),K=o(N,Y,H),re=c(y,N),V=c(N,y),oe=l(A,k),he=l(k,A),ne=n[ae],ie=n[ae+1],ce=a(A,C,R),ve=a(k,w,T),Ee=L+he|0,ge=M+oe+g(Ee,L)|0;Ee=Ee+ve|0,ge=ge+ce+g(Ee,ve)|0,Ee=Ee+ie|0,ge=ge+ne+g(Ee,ie)|0,Ee=Ee+G|0,ge=ge+ee+g(Ee,G)|0;var Pe=V+K|0,Ce=re+te+g(Pe,V)|0;M=R,L=T,R=C,T=w,C=A,w=k,k=E+Ee|0,A=x+ge+g(k,E)|0,x=_,E=H,_=v,H=Y,v=y,Y=N,N=Ee+Pe|0,y=ge+Ce+g(N,Ee)|0}this._al=this._al+N|0,this._bl=this._bl+Y|0,this._cl=this._cl+H|0,this._dl=this._dl+E|0,this._el=this._el+k|0,this._fl=this._fl+w|0,this._gl=this._gl+T|0,this._hl=this._hl+L|0,this._ah=this._ah+y+g(this._al,N)|0,this._bh=this._bh+v+g(this._bl,Y)|0,this._ch=this._ch+_+g(this._cl,H)|0,this._dh=this._dh+x+g(this._dl,E)|0,this._eh=this._eh+A+g(this._el,k)|0,this._fh=this._fh+C+g(this._fl,w)|0,this._gh=this._gh+R+g(this._gl,T)|0,this._hh=this._hh+M+g(this._hl,L)|0},s.prototype._hash=function(){var p=r.allocUnsafe(64);function m(y,v,_){p.writeInt32BE(y,_),p.writeInt32BE(v,_+4)}return m(this._ah,this._al,0),m(this._bh,this._bl,8),m(this._ch,this._cl,16),m(this._dh,this._dl,24),m(this._eh,this._el,32),m(this._fh,this._fl,40),m(this._gh,this._gl,48),m(this._hh,this._hl,56),p},XI=s,XI}var ZI,YJ;function Lat(){if(YJ)return ZI;YJ=1;var t=xr,e=d1e(),r=yb(),n=Zr().Buffer,i=new Array(160);function s(){this.init(),this._w=i,r.call(this,128,112)}return t(s,e),s.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this},s.prototype._hash=function(){var a=n.allocUnsafe(48);function o(c,l,u){a.writeInt32BE(c,u),a.writeInt32BE(l,u+4)}return o(this._ah,this._al,0),o(this._bh,this._bl,8),o(this._ch,this._cl,16),o(this._dh,this._dl,24),o(this._eh,this._el,32),o(this._fh,this._fl,40),a},ZI=s,ZI}var XJ;function cU(){if(XJ)return qI.exports;XJ=1;var t=qI.exports=function(r){r=r.toLowerCase();var n=t[r];if(!n)throw new Error(r+" is not supported (we accept pull requests)");return new n};return t.sha=Oat(),t.sha1=Nat(),t.sha224=Mat(),t.sha256=h1e(),t.sha384=Lat(),t.sha512=d1e(),qI.exports}var l0={},p1e={},Fat=Object.prototype.toString,$at=Function.prototype.toString,Uat=/^\s*(?:function)?\*/,g1e=tp(),JI=Object.getPrototypeOf,Vat=function(){if(!g1e)return!1;try{return Function("return function*() {}")()}catch{}},QI,jat=function(e){if(typeof e!="function")return!1;if(Uat.test($at.call(e)))return!0;if(!g1e){var r=Fat.call(e);return r==="[object GeneratorFunction]"}if(!JI)return!1;if(typeof QI>"u"){var n=Vat();QI=n?JI(n):!1}return JI(e)===QI},zat=yF,qat=function(e){return!!zat(e)};(function(t){var e=oF,r=jat,n=yF,i=qat;function s(ce){return ce.call.bind(ce)}var a=typeof BigInt<"u",o=typeof Symbol<"u",c=s(Object.prototype.toString),l=s(Number.prototype.valueOf),u=s(String.prototype.valueOf),f=s(Boolean.prototype.valueOf);if(a)var h=s(BigInt.prototype.valueOf);if(o)var d=s(Symbol.prototype.valueOf);function g(ce,ve){if(typeof ce!="object")return!1;try{return ve(ce),!0}catch{return!1}}t.isArgumentsObject=e,t.isGeneratorFunction=r,t.isTypedArray=i;function p(ce){return typeof Promise<"u"&&ce instanceof Promise||ce!==null&&typeof ce=="object"&&typeof ce.then=="function"&&typeof ce.catch=="function"}t.isPromise=p;function m(ce){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(ce):i(ce)||z(ce)}t.isArrayBufferView=m;function y(ce){return n(ce)==="Uint8Array"}t.isUint8Array=y;function v(ce){return n(ce)==="Uint8ClampedArray"}t.isUint8ClampedArray=v;function _(ce){return n(ce)==="Uint16Array"}t.isUint16Array=_;function x(ce){return n(ce)==="Uint32Array"}t.isUint32Array=x;function A(ce){return n(ce)==="Int8Array"}t.isInt8Array=A;function C(ce){return n(ce)==="Int16Array"}t.isInt16Array=C;function R(ce){return n(ce)==="Int32Array"}t.isInt32Array=R;function M(ce){return n(ce)==="Float32Array"}t.isFloat32Array=M;function N(ce){return n(ce)==="Float64Array"}t.isFloat64Array=N;function Y(ce){return n(ce)==="BigInt64Array"}t.isBigInt64Array=Y;function H(ce){return n(ce)==="BigUint64Array"}t.isBigUint64Array=H;function E(ce){return c(ce)==="[object Map]"}E.working=typeof Map<"u"&&E(new Map);function k(ce){return typeof Map>"u"?!1:E.working?E(ce):ce instanceof Map}t.isMap=k;function w(ce){return c(ce)==="[object Set]"}w.working=typeof Set<"u"&&w(new Set);function T(ce){return typeof Set>"u"?!1:w.working?w(ce):ce instanceof Set}t.isSet=T;function L(ce){return c(ce)==="[object WeakMap]"}L.working=typeof WeakMap<"u"&&L(new WeakMap);function I(ce){return typeof WeakMap>"u"?!1:L.working?L(ce):ce instanceof WeakMap}t.isWeakMap=I;function U(ce){return c(ce)==="[object WeakSet]"}U.working=typeof WeakSet<"u"&&U(new WeakSet);function O(ce){return U(ce)}t.isWeakSet=O;function D(ce){return c(ce)==="[object ArrayBuffer]"}D.working=typeof ArrayBuffer<"u"&&D(new ArrayBuffer);function P(ce){return typeof ArrayBuffer>"u"?!1:D.working?D(ce):ce instanceof ArrayBuffer}t.isArrayBuffer=P;function B(ce){return c(ce)==="[object DataView]"}B.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&B(new DataView(new ArrayBuffer(1),0,1));function z(ce){return typeof DataView>"u"?!1:B.working?B(ce):ce instanceof DataView}t.isDataView=z;var F=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:void 0;function X(ce){return c(ce)==="[object SharedArrayBuffer]"}function W(ce){return typeof F>"u"?!1:(typeof X.working>"u"&&(X.working=X(new F)),X.working?X(ce):ce instanceof F)}t.isSharedArrayBuffer=W;function q(ce){return c(ce)==="[object AsyncFunction]"}t.isAsyncFunction=q;function G(ce){return c(ce)==="[object Map Iterator]"}t.isMapIterator=G;function ee(ce){return c(ce)==="[object Set Iterator]"}t.isSetIterator=ee;function ae(ce){return c(ce)==="[object Generator]"}t.isGeneratorObject=ae;function te(ce){return c(ce)==="[object WebAssembly.Module]"}t.isWebAssemblyCompiledModule=te;function K(ce){return g(ce,l)}t.isNumberObject=K;function re(ce){return g(ce,u)}t.isStringObject=re;function V(ce){return g(ce,f)}t.isBooleanObject=V;function oe(ce){return a&&g(ce,h)}t.isBigIntObject=oe;function he(ce){return o&&g(ce,d)}t.isSymbolObject=he;function ne(ce){return K(ce)||re(ce)||V(ce)||oe(ce)||he(ce)}t.isBoxedPrimitive=ne;function ie(ce){return typeof Uint8Array<"u"&&(P(ce)||W(ce))}t.isAnyArrayBuffer=ie,["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(ce){Object.defineProperty(t,ce,{enumerable:!1,value:function(){throw new Error(ce+" is not supported in userland")}})})})(p1e);var Hat=function(e){return e&&typeof e=="object"&&typeof e.copy=="function"&&typeof e.fill=="function"&&typeof e.readUInt8=="function"};(function(t){var e={},r=Object.getOwnPropertyDescriptors||function(F){for(var X=Object.keys(F),W={},q=0;q<X.length;q++)W[X[q]]=Object.getOwnPropertyDescriptor(F,X[q]);return W},n=/%[sdj%]/g;t.format=function(z){if(!C(z)){for(var F=[],X=0;X<arguments.length;X++)F.push(o(arguments[X]));return F.join(" ")}for(var X=1,W=arguments,q=W.length,G=String(z).replace(n,function(ae){if(ae==="%%")return"%";if(X>=q)return ae;switch(ae){case"%s":return String(W[X++]);case"%d":return Number(W[X++]);case"%j":try{return JSON.stringify(W[X++])}catch{return"[Circular]"}default:return ae}}),ee=W[X];X<q;ee=W[++X])_(ee)||!Y(ee)?G+=" "+ee:G+=" "+o(ee);return G},t.deprecate=function(z,F){if(typeof Et<"u"&&Et.noDeprecation===!0)return z;if(typeof Et>"u")return function(){return t.deprecate(z,F).apply(this,arguments)};var X=!1;function W(){if(!X){if(Et.throwDeprecation)throw new Error(F);Et.traceDeprecation?console.trace(F):console.error(F),X=!0}return z.apply(this,arguments)}return W};var i={},s=/^$/;if(e.NODE_DEBUG){var a=e.NODE_DEBUG;a=a.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),s=new RegExp("^"+a+"$","i")}t.debuglog=function(z){if(z=z.toUpperCase(),!i[z])if(s.test(z)){var F=Et.pid;i[z]=function(){var X=t.format.apply(t,arguments);console.error("%s %d: %s",z,F,X)}}else i[z]=function(){};return i[z]};function o(z,F){var X={seen:[],stylize:l};return arguments.length>=3&&(X.depth=arguments[2]),arguments.length>=4&&(X.colors=arguments[3]),v(F)?X.showHidden=F:F&&t._extend(X,F),M(X.showHidden)&&(X.showHidden=!1),M(X.depth)&&(X.depth=2),M(X.colors)&&(X.colors=!1),M(X.customInspect)&&(X.customInspect=!0),X.colors&&(X.stylize=c),f(X,z,X.depth)}t.inspect=o,o.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},o.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function c(z,F){var X=o.styles[F];return X?"\x1B["+o.colors[X][0]+"m"+z+"\x1B["+o.colors[X][1]+"m":z}function l(z,F){return z}function u(z){var F={};return z.forEach(function(X,W){F[X]=!0}),F}function f(z,F,X){if(z.customInspect&&F&&k(F.inspect)&&F.inspect!==t.inspect&&!(F.constructor&&F.constructor.prototype===F)){var W=F.inspect(X,z);return C(W)||(W=f(z,W,X)),W}var q=h(z,F);if(q)return q;var G=Object.keys(F),ee=u(G);if(z.showHidden&&(G=Object.getOwnPropertyNames(F)),E(F)&&(G.indexOf("message")>=0||G.indexOf("description")>=0))return d(F);if(G.length===0){if(k(F)){var ae=F.name?": "+F.name:"";return z.stylize("[Function"+ae+"]","special")}if(N(F))return z.stylize(RegExp.prototype.toString.call(F),"regexp");if(H(F))return z.stylize(Date.prototype.toString.call(F),"date");if(E(F))return d(F)}var te="",K=!1,re=["{","}"];if(y(F)&&(K=!0,re=["[","]"]),k(F)){var V=F.name?": "+F.name:"";te=" [Function"+V+"]"}if(N(F)&&(te=" "+RegExp.prototype.toString.call(F)),H(F)&&(te=" "+Date.prototype.toUTCString.call(F)),E(F)&&(te=" "+d(F)),G.length===0&&(!K||F.length==0))return re[0]+te+re[1];if(X<0)return N(F)?z.stylize(RegExp.prototype.toString.call(F),"regexp"):z.stylize("[Object]","special");z.seen.push(F);var oe;return K?oe=g(z,F,X,ee,G):oe=G.map(function(he){return p(z,F,X,ee,he,K)}),z.seen.pop(),m(oe,te,re)}function h(z,F){if(M(F))return z.stylize("undefined","undefined");if(C(F)){var X="'"+JSON.stringify(F).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return z.stylize(X,"string")}if(A(F))return z.stylize(""+F,"number");if(v(F))return z.stylize(""+F,"boolean");if(_(F))return z.stylize("null","null")}function d(z){return"["+Error.prototype.toString.call(z)+"]"}function g(z,F,X,W,q){for(var G=[],ee=0,ae=F.length;ee<ae;++ee)O(F,String(ee))?G.push(p(z,F,X,W,String(ee),!0)):G.push("");return q.forEach(function(te){te.match(/^\d+$/)||G.push(p(z,F,X,W,te,!0))}),G}function p(z,F,X,W,q,G){var ee,ae,te;if(te=Object.getOwnPropertyDescriptor(F,q)||{value:F[q]},te.get?te.set?ae=z.stylize("[Getter/Setter]","special"):ae=z.stylize("[Getter]","special"):te.set&&(ae=z.stylize("[Setter]","special")),O(W,q)||(ee="["+q+"]"),ae||(z.seen.indexOf(te.value)<0?(_(X)?ae=f(z,te.value,null):ae=f(z,te.value,X-1),ae.indexOf(`
`)>-1&&(G?ae=ae.split(`
`).map(function(K){return"  "+K}).join(`
`).slice(2):ae=`
`+ae.split(`
`).map(function(K){return"   "+K}).join(`
`))):ae=z.stylize("[Circular]","special")),M(ee)){if(G&&q.match(/^\d+$/))return ae;ee=JSON.stringify(""+q),ee.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(ee=ee.slice(1,-1),ee=z.stylize(ee,"name")):(ee=ee.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),ee=z.stylize(ee,"string"))}return ee+": "+ae}function m(z,F,X){var W=z.reduce(function(q,G){return G.indexOf(`
`)>=0,q+G.replace(/\u001b\[\d\d?m/g,"").length+1},0);return W>60?X[0]+(F===""?"":F+`
 `)+" "+z.join(`,
  `)+" "+X[1]:X[0]+F+" "+z.join(", ")+" "+X[1]}t.types=p1e;function y(z){return Array.isArray(z)}t.isArray=y;function v(z){return typeof z=="boolean"}t.isBoolean=v;function _(z){return z===null}t.isNull=_;function x(z){return z==null}t.isNullOrUndefined=x;function A(z){return typeof z=="number"}t.isNumber=A;function C(z){return typeof z=="string"}t.isString=C;function R(z){return typeof z=="symbol"}t.isSymbol=R;function M(z){return z===void 0}t.isUndefined=M;function N(z){return Y(z)&&T(z)==="[object RegExp]"}t.isRegExp=N,t.types.isRegExp=N;function Y(z){return typeof z=="object"&&z!==null}t.isObject=Y;function H(z){return Y(z)&&T(z)==="[object Date]"}t.isDate=H,t.types.isDate=H;function E(z){return Y(z)&&(T(z)==="[object Error]"||z instanceof Error)}t.isError=E,t.types.isNativeError=E;function k(z){return typeof z=="function"}t.isFunction=k;function w(z){return z===null||typeof z=="boolean"||typeof z=="number"||typeof z=="string"||typeof z=="symbol"||typeof z>"u"}t.isPrimitive=w,t.isBuffer=Hat;function T(z){return Object.prototype.toString.call(z)}function L(z){return z<10?"0"+z.toString(10):z.toString(10)}var I=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function U(){var z=new Date,F=[L(z.getHours()),L(z.getMinutes()),L(z.getSeconds())].join(":");return[z.getDate(),I[z.getMonth()],F].join(" ")}t.log=function(){console.log("%s - %s",U(),t.format.apply(t,arguments))},t.inherits=xr,t._extend=function(z,F){if(!F||!Y(F))return z;for(var X=Object.keys(F),W=X.length;W--;)z[X[W]]=F[X[W]];return z};function O(z,F){return Object.prototype.hasOwnProperty.call(z,F)}var D=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;t.promisify=function(F){if(typeof F!="function")throw new TypeError('The "original" argument must be of type Function');if(D&&F[D]){var X=F[D];if(typeof X!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(X,D,{value:X,enumerable:!1,writable:!1,configurable:!0}),X}function X(){for(var W,q,G=new Promise(function(te,K){W=te,q=K}),ee=[],ae=0;ae<arguments.length;ae++)ee.push(arguments[ae]);ee.push(function(te,K){te?q(te):W(K)});try{F.apply(this,ee)}catch(te){q(te)}return G}return Object.setPrototypeOf(X,Object.getPrototypeOf(F)),D&&Object.defineProperty(X,D,{value:X,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(X,r(F))},t.promisify.custom=D;function P(z,F){if(!z){var X=new Error("Promise was rejected with a falsy value");X.reason=z,z=X}return F(z)}function B(z){if(typeof z!="function")throw new TypeError('The "original" argument must be of type Function');function F(){for(var X=[],W=0;W<arguments.length;W++)X.push(arguments[W]);var q=X.pop();if(typeof q!="function")throw new TypeError("The last argument must be of type Function");var G=this,ee=function(){return q.apply(G,arguments)};z.apply(this,X).then(function(ae){Et.nextTick(ee.bind(null,null,ae))},function(ae){Et.nextTick(P.bind(null,ae,ee))})}return Object.setPrototypeOf(F,Object.getPrototypeOf(z)),Object.defineProperties(F,r(z)),F}t.callbackify=B})(l0);function zm(){this.head=null,this.tail=null,this.length=0}zm.prototype.push=function(t){var e={data:t,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length};zm.prototype.unshift=function(t){var e={data:t,next:this.head};this.length===0&&(this.tail=e),this.head=e,++this.length};zm.prototype.shift=function(){if(this.length!==0){var t=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,t}};zm.prototype.clear=function(){this.head=this.tail=null,this.length=0};zm.prototype.join=function(t){if(this.length===0)return"";for(var e=this.head,r=""+e.data;e=e.next;)r+=t+e.data;return r};zm.prototype.concat=function(t){if(this.length===0)return Es.Buffer.alloc(0);if(this.length===1)return this.head.data;for(var e=Es.Buffer.allocUnsafe(t>>>0),r=this.head,n=0;r;)r.data.copy(e,n),n+=r.data.length,r=r.next;return e};var EE={},dN={exports:{}};(function(t,e){var r=Es,n=r.Buffer;function i(a,o){for(var c in a)o[c]=a[c]}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?t.exports=r:(i(r,e),e.Buffer=s);function s(a,o,c){return n(a,o,c)}i(n,s),s.from=function(a,o,c){if(typeof a=="number")throw new TypeError("Argument must not be a number");return n(a,o,c)},s.alloc=function(a,o,c){if(typeof a!="number")throw new TypeError("Argument must be a number");var l=n(a);return o!==void 0?typeof c=="string"?l.fill(o,c):l.fill(o):l.fill(0),l},s.allocUnsafe=function(a){if(typeof a!="number")throw new TypeError("Argument must be a number");return n(a)},s.allocUnsafeSlow=function(a){if(typeof a!="number")throw new TypeError("Argument must be a number");return r.SlowBuffer(a)}})(dN,dN.exports);var fA=dN.exports,lU=fA.Buffer,ZJ=lU.isEncoding||function(t){switch(t=""+t,t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function Wat(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}function Kat(t){var e=Wat(t);if(typeof e!="string"&&(lU.isEncoding===ZJ||!ZJ(t)))throw new Error("Unknown encoding: "+t);return e||t}var m1e=EE.StringDecoder=N6;function N6(t){this.encoding=Kat(t);var e;switch(this.encoding){case"utf16le":this.text=Qat,this.end=eot,e=4;break;case"utf8":this.fillLast=Xat,e=4;break;case"base64":this.text=tot,this.end=rot,e=3;break;default:this.write=not,this.end=iot;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=lU.allocUnsafe(e)}N6.prototype.write=function(t){if(t.length===0)return"";var e,r;if(this.lastNeed){if(e=this.fillLast(t),e===void 0)return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<t.length?e?e+this.text(t,r):this.text(t,r):e||""};N6.prototype.end=Jat;N6.prototype.text=Zat;N6.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length};function eR(t){return t<=127?0:t>>5===6?2:t>>4===14?3:t>>3===30?4:t>>6===2?-1:-2}function Gat(t,e,r){var n=e.length-1;if(n<r)return 0;var i=eR(e[n]);return i>=0?(i>0&&(t.lastNeed=i-1),i):--n<r||i===-2?0:(i=eR(e[n]),i>=0?(i>0&&(t.lastNeed=i-2),i):--n<r||i===-2?0:(i=eR(e[n]),i>=0?(i>0&&(i===2?i=0:t.lastNeed=i-3),i):0))}function Yat(t,e,r){if((e[0]&192)!==128)return t.lastNeed=0,"�";if(t.lastNeed>1&&e.length>1){if((e[1]&192)!==128)return t.lastNeed=1,"�";if(t.lastNeed>2&&e.length>2&&(e[2]&192)!==128)return t.lastNeed=2,"�"}}function Xat(t){var e=this.lastTotal-this.lastNeed,r=Yat(this,t);if(r!==void 0)return r;if(this.lastNeed<=t.length)return t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,e,0,t.length),this.lastNeed-=t.length}function Zat(t,e){var r=Gat(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=r;var n=t.length-(r-this.lastNeed);return t.copy(this.lastChar,0,n),t.toString("utf8",e,n)}function Jat(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"�":e}function Qat(t,e){if((t.length-e)%2===0){var r=t.toString("utf16le",e);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function eot(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,r)}return e}function tot(t,e){var r=(t.length-e)%3;return r===0?t.toString("base64",e):(this.lastNeed=3-r,this.lastTotal=3,r===1?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-r))}function rot(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function not(t){return t.toString(this.encoding)}function iot(t){return t&&t.length?this.write(t):""}ss.ReadableState=y1e;var Jn=l0.debuglog("stream");l0.inherits(ss,Q1);function sot(t,e,r){if(typeof t.prependListener=="function")return t.prependListener(e,r);!t._events||!t._events[e]?t.on(e,r):Array.isArray(t._events[e])?t._events[e].unshift(r):t._events[e]=[r,t._events[e]]}function aot(t,e){return t.listeners(e).length}function y1e(t,e){t=t||{},this.objectMode=!!t.objectMode,e instanceof sl&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var r=t.highWaterMark,n=this.objectMode?16:16*1024;this.highWaterMark=r||r===0?r:n,this.highWaterMark=~~this.highWaterMark,this.buffer=new zm,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(this.decoder=new m1e(t.encoding),this.encoding=t.encoding)}function ss(t){if(!(this instanceof ss))return new ss(t);this._readableState=new y1e(t,this),this.readable=!0,t&&typeof t.read=="function"&&(this._read=t.read),Q1.call(this)}ss.prototype.push=function(t,e){var r=this._readableState;return!r.objectMode&&typeof t=="string"&&(e=e||r.defaultEncoding,e!==r.encoding&&(t=We.from(t,e),e="")),v1e(this,r,t,e,!1)};ss.prototype.unshift=function(t){var e=this._readableState;return v1e(this,e,t,"",!0)};ss.prototype.isPaused=function(){return this._readableState.flowing===!1};function v1e(t,e,r,n,i){var s=lot(e,r);if(s)t.emit("error",s);else if(r===null)e.reading=!1,uot(t,e);else if(e.objectMode||r&&r.length>0)if(e.ended&&!i){var a=new Error("stream.push() after EOF");t.emit("error",a)}else if(e.endEmitted&&i){var o=new Error("stream.unshift() after end event");t.emit("error",o)}else{var c;e.decoder&&!i&&!n&&(r=e.decoder.write(r),c=!e.objectMode&&r.length===0),i||(e.reading=!1),c||(e.flowing&&e.length===0&&!e.sync?(t.emit("data",r),t.read(0)):(e.length+=e.objectMode?1:r.length,i?e.buffer.unshift(r):e.buffer.push(r),e.needReadable&&hA(t))),fot(t,e)}else i||(e.reading=!1);return oot(e)}function oot(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||t.length===0)}ss.prototype.setEncoding=function(t){return this._readableState.decoder=new m1e(t),this._readableState.encoding=t,this};var JJ=8388608;function cot(t){return t>=JJ?t=JJ:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}function QJ(t,e){return t<=0||e.length===0&&e.ended?0:e.objectMode?1:t!==t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=cot(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}ss.prototype.read=function(t){Jn("read",t),t=parseInt(t,10);var e=this._readableState,r=t;if(t!==0&&(e.emittedReadable=!1),t===0&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return Jn("read: emitReadable",e.length,e.ended),e.length===0&&e.ended?tR(this):hA(this),null;if(t=QJ(t,e),t===0&&e.ended)return e.length===0&&tR(this),null;var n=e.needReadable;Jn("need readable",n),(e.length===0||e.length-t<e.highWaterMark)&&(n=!0,Jn("length less than watermark",n)),e.ended||e.reading?(n=!1,Jn("reading or ended",n)):n&&(Jn("do read"),e.reading=!0,e.sync=!0,e.length===0&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=QJ(r,e)));var i;return t>0?i=b1e(t,e):i=null,i===null?(e.needReadable=!0,t=0):e.length-=t,e.length===0&&(e.ended||(e.needReadable=!0),r!==t&&e.ended&&tR(this)),i!==null&&this.emit("data",i),i};function lot(t,e){var r=null;return!We.isBuffer(e)&&typeof e!="string"&&e!==null&&e!==void 0&&!t.objectMode&&(r=new TypeError("Invalid non-string/buffer chunk")),r}function uot(t,e){if(!e.ended){if(e.decoder){var r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length)}e.ended=!0,hA(t)}}function hA(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(Jn("emitReadable",e.flowing),e.emittedReadable=!0,e.sync?cl(eQ,t):eQ(t))}function eQ(t){Jn("emit readable"),t.emit("readable"),uU(t)}function fot(t,e){e.readingMore||(e.readingMore=!0,cl(hot,t,e))}function hot(t,e){for(var r=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(Jn("maybeReadMore read 0"),t.read(0),r!==e.length);)r=e.length;e.readingMore=!1}ss.prototype._read=function(t){this.emit("error",new Error("not implemented"))};ss.prototype.pipe=function(t,e){var r=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=t;break;case 1:n.pipes=[n.pipes,t];break;default:n.pipes.push(t);break}n.pipesCount+=1,Jn("pipe count=%d opts=%j",n.pipesCount,e);var i=!e||e.end!==!1,s=i?o:u;n.endEmitted?cl(s):r.once("end",s),t.on("unpipe",a);function a(y){Jn("onunpipe"),y===r&&u()}function o(){Jn("onend"),t.end()}var c=dot(r);t.on("drain",c);var l=!1;function u(){Jn("cleanup"),t.removeListener("close",g),t.removeListener("finish",p),t.removeListener("drain",c),t.removeListener("error",d),t.removeListener("unpipe",a),r.removeListener("end",o),r.removeListener("end",u),r.removeListener("data",h),l=!0,n.awaitDrain&&(!t._writableState||t._writableState.needDrain)&&c()}var f=!1;r.on("data",h);function h(y){Jn("ondata"),f=!1;var v=t.write(y);v===!1&&!f&&((n.pipesCount===1&&n.pipes===t||n.pipesCount>1&&w1e(n.pipes,t)!==-1)&&!l&&(Jn("false write response, pause",r._readableState.awaitDrain),r._readableState.awaitDrain++,f=!0),r.pause())}function d(y){Jn("onerror",y),m(),t.removeListener("error",d),aot(t,"error")===0&&t.emit("error",y)}sot(t,"error",d);function g(){t.removeListener("finish",p),m()}t.once("close",g);function p(){Jn("onfinish"),t.removeListener("close",g),m()}t.once("finish",p);function m(){Jn("unpipe"),r.unpipe(t)}return t.emit("pipe",r),n.flowing||(Jn("pipe resume"),r.resume()),t};function dot(t){return function(){var e=t._readableState;Jn("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,e.awaitDrain===0&&t.listeners("data").length&&(e.flowing=!0,uU(t))}}ss.prototype.unpipe=function(t){var e=this._readableState;if(e.pipesCount===0)return this;if(e.pipesCount===1)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this),this);if(!t){var r=e.pipes,n=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var i=0;i<n;i++)r[i].emit("unpipe",this);return this}var s=w1e(e.pipes,t);return s===-1?this:(e.pipes.splice(s,1),e.pipesCount-=1,e.pipesCount===1&&(e.pipes=e.pipes[0]),t.emit("unpipe",this),this)};ss.prototype.on=function(t,e){var r=Q1.prototype.on.call(this,t,e);if(t==="data")this._readableState.flowing!==!1&&this.resume();else if(t==="readable"){var n=this._readableState;!n.endEmitted&&!n.readableListening&&(n.readableListening=n.needReadable=!0,n.emittedReadable=!1,n.reading?n.length&&hA(this):cl(pot,this))}return r};ss.prototype.addListener=ss.prototype.on;function pot(t){Jn("readable nexttick read 0"),t.read(0)}ss.prototype.resume=function(){var t=this._readableState;return t.flowing||(Jn("resume"),t.flowing=!0,got(this,t)),this};function got(t,e){e.resumeScheduled||(e.resumeScheduled=!0,cl(mot,t,e))}function mot(t,e){e.reading||(Jn("resume read 0"),t.read(0)),e.resumeScheduled=!1,e.awaitDrain=0,t.emit("resume"),uU(t),e.flowing&&!e.reading&&t.read(0)}ss.prototype.pause=function(){return Jn("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(Jn("pause"),this._readableState.flowing=!1,this.emit("pause")),this};function uU(t){var e=t._readableState;for(Jn("flow",e.flowing);e.flowing&&t.read()!==null;);}ss.prototype.wrap=function(t){var e=this._readableState,r=!1,n=this;t.on("end",function(){if(Jn("wrapped end"),e.decoder&&!e.ended){var a=e.decoder.end();a&&a.length&&n.push(a)}n.push(null)}),t.on("data",function(a){if(Jn("wrapped data"),e.decoder&&(a=e.decoder.write(a)),!(e.objectMode&&a==null)&&!(!e.objectMode&&(!a||!a.length))){var o=n.push(a);o||(r=!0,t.pause())}});for(var i in t)this[i]===void 0&&typeof t[i]=="function"&&(this[i]=function(a){return function(){return t[a].apply(t,arguments)}}(i));var s=["error","close","destroy","pause","resume"];return _ot(s,function(a){t.on(a,n.emit.bind(n,a))}),n._read=function(a){Jn("wrapped _read",a),r&&(r=!1,t.resume())},n};ss._fromList=b1e;function b1e(t,e){if(e.length===0)return null;var r;return e.objectMode?r=e.buffer.shift():!t||t>=e.length?(e.decoder?r=e.buffer.join(""):e.buffer.length===1?r=e.buffer.head.data:r=e.buffer.concat(e.length),e.buffer.clear()):r=yot(t,e.buffer,e.decoder),r}function yot(t,e,r){var n;return t<e.head.data.length?(n=e.head.data.slice(0,t),e.head.data=e.head.data.slice(t)):t===e.head.data.length?n=e.shift():n=r?vot(t,e):bot(t,e),n}function vot(t,e){var r=e.head,n=1,i=r.data;for(t-=i.length;r=r.next;){var s=r.data,a=t>s.length?s.length:t;if(a===s.length?i+=s:i+=s.slice(0,t),t-=a,t===0){a===s.length?(++n,r.next?e.head=r.next:e.head=e.tail=null):(e.head=r,r.data=s.slice(a));break}++n}return e.length-=n,i}function bot(t,e){var r=We.allocUnsafe(t),n=e.head,i=1;for(n.data.copy(r),t-=n.data.length;n=n.next;){var s=n.data,a=t>s.length?s.length:t;if(s.copy(r,r.length-t,0,a),t-=a,t===0){a===s.length?(++i,n.next?e.head=n.next:e.head=e.tail=null):(e.head=n,n.data=s.slice(a));break}++i}return e.length-=i,r}function tR(t){var e=t._readableState;if(e.length>0)throw new Error('"endReadable()" called on non-empty stream');e.endEmitted||(e.ended=!0,cl(wot,e,t))}function wot(t,e){!t.endEmitted&&t.length===0&&(t.endEmitted=!0,e.readable=!1,e.emit("end"))}function _ot(t,e){for(var r=0,n=t.length;r<n;r++)e(t[r],r)}function w1e(t,e){for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}Ua.WritableState=fU;l0.inherits(Ua,qi.EventEmitter);function xot(){}function Eot(t,e,r){this.chunk=t,this.encoding=e,this.callback=r,this.next=null}function fU(t,e){Object.defineProperty(this,"buffer",{get:l0.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.")}),t=t||{},this.objectMode=!!t.objectMode,e instanceof sl&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var r=t.highWaterMark,n=this.objectMode?16:16*1024;this.highWaterMark=r||r===0?r:n,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var i=t.decodeStrings===!1;this.decodeStrings=!i,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(s){Rot(e,s)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new S1e(this)}fU.prototype.getBuffer=function(){for(var e=this.bufferedRequest,r=[];e;)r.push(e),e=e.next;return r};function Ua(t){if(!(this instanceof Ua)&&!(this instanceof sl))return new Ua(t);this._writableState=new fU(t,this),this.writable=!0,t&&(typeof t.write=="function"&&(this._write=t.write),typeof t.writev=="function"&&(this._writev=t.writev)),qi.EventEmitter.call(this)}Ua.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))};function Sot(t,e){var r=new Error("write after end");t.emit("error",r),cl(e,r)}function Aot(t,e,r,n){var i=!0,s=!1;return r===null?s=new TypeError("May not write null values to stream"):!Es.Buffer.isBuffer(r)&&typeof r!="string"&&r!==void 0&&!e.objectMode&&(s=new TypeError("Invalid non-string/buffer chunk")),s&&(t.emit("error",s),cl(n,s),i=!1),i}Ua.prototype.write=function(t,e,r){var n=this._writableState,i=!1;return typeof e=="function"&&(r=e,e=null),Es.Buffer.isBuffer(t)?e="buffer":e||(e=n.defaultEncoding),typeof r!="function"&&(r=xot),n.ended?Sot(this,r):Aot(this,n,t,r)&&(n.pendingcb++,i=kot(this,n,t,e,r)),i};Ua.prototype.cork=function(){var t=this._writableState;t.corked++};Ua.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,!t.writing&&!t.corked&&!t.finished&&!t.bufferProcessing&&t.bufferedRequest&&_1e(this,t))};Ua.prototype.setDefaultEncoding=function(e){if(typeof e=="string"&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this};function Tot(t,e,r){return!t.objectMode&&t.decodeStrings!==!1&&typeof e=="string"&&(e=Es.Buffer.from(e,r)),e}function kot(t,e,r,n,i){r=Tot(e,r,n),Es.Buffer.isBuffer(r)&&(n="buffer");var s=e.objectMode?1:r.length;e.length+=s;var a=e.length<e.highWaterMark;if(a||(e.needDrain=!0),e.writing||e.corked){var o=e.lastBufferedRequest;e.lastBufferedRequest=new Eot(r,n,i),o?o.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else pN(t,e,!1,s,r,n,i);return a}function pN(t,e,r,n,i,s,a){e.writelen=n,e.writecb=a,e.writing=!0,e.sync=!0,r?t._writev(i,e.onwrite):t._write(i,s,e.onwrite),e.sync=!1}function Cot(t,e,r,n,i){--e.pendingcb,r?cl(i,n):i(n),t._writableState.errorEmitted=!0,t.emit("error",n)}function Iot(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}function Rot(t,e){var r=t._writableState,n=r.sync,i=r.writecb;if(Iot(r),e)Cot(t,r,n,e,i);else{var s=x1e(r);!s&&!r.corked&&!r.bufferProcessing&&r.bufferedRequest&&_1e(t,r),n?cl(tQ,t,r,s,i):tQ(t,r,s,i)}}function tQ(t,e,r,n){r||Pot(t,e),e.pendingcb--,n(),E1e(t,e)}function Pot(t,e){e.length===0&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}function _1e(t,e){e.bufferProcessing=!0;var r=e.bufferedRequest;if(t._writev&&r&&r.next){var n=e.bufferedRequestCount,i=new Array(n),s=e.corkedRequestsFree;s.entry=r;for(var a=0;r;)i[a]=r,r=r.next,a+=1;pN(t,e,!0,e.length,i,"",s.finish),e.pendingcb++,e.lastBufferedRequest=null,s.next?(e.corkedRequestsFree=s.next,s.next=null):e.corkedRequestsFree=new S1e(e)}else{for(;r;){var o=r.chunk,c=r.encoding,l=r.callback,u=e.objectMode?1:o.length;if(pN(t,e,!1,u,o,c,l),r=r.next,e.writing)break}r===null&&(e.lastBufferedRequest=null)}e.bufferedRequestCount=0,e.bufferedRequest=r,e.bufferProcessing=!1}Ua.prototype._write=function(t,e,r){r(new Error("not implemented"))};Ua.prototype._writev=null;Ua.prototype.end=function(t,e,r){var n=this._writableState;typeof t=="function"?(r=t,t=null,e=null):typeof e=="function"&&(r=e,e=null),t!=null&&this.write(t,e),n.corked&&(n.corked=1,this.uncork()),!n.ending&&!n.finished&&Bot(this,n,r)};function x1e(t){return t.ending&&t.length===0&&t.bufferedRequest===null&&!t.finished&&!t.writing}function rQ(t,e){e.prefinished||(e.prefinished=!0,t.emit("prefinish"))}function E1e(t,e){var r=x1e(e);return r&&(e.pendingcb===0?(rQ(t,e),e.finished=!0,t.emit("finish")):rQ(t,e)),r}function Bot(t,e,r){e.ending=!0,E1e(t,e),r&&(e.finished?cl(r):t.once("finish",r)),e.ended=!0,t.writable=!1}function S1e(t){var e=this;this.next=null,this.entry=null,this.finish=function(r){var n=e.entry;for(e.entry=null;n;){var i=n.callback;t.pendingcb--,i(r),n=n.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}}l0.inherits(sl,ss);var nQ=Object.keys(Ua.prototype);for(var rR=0;rR<nQ.length;rR++){var nR=nQ[rR];sl.prototype[nR]||(sl.prototype[nR]=Ua.prototype[nR])}function sl(t){if(!(this instanceof sl))return new sl(t);ss.call(this,t),Ua.call(this,t),t&&t.readable===!1&&(this.readable=!1),t&&t.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,t&&t.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",Dot)}function Dot(){this.allowHalfOpen||this._writableState.ended||cl(Oot,this)}function Oot(t){t.end()}l0.inherits(Ku,sl);function Not(t){this.afterTransform=function(e,r){return Mot(t,e,r)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function Mot(t,e,r){var n=t._transformState;n.transforming=!1;var i=n.writecb;if(!i)return t.emit("error",new Error("no writecb in Transform class"));n.writechunk=null,n.writecb=null,r!=null&&t.push(r),i(e);var s=t._readableState;s.reading=!1,(s.needReadable||s.length<s.highWaterMark)&&t._read(s.highWaterMark)}function Ku(t){if(!(this instanceof Ku))return new Ku(t);sl.call(this,t),this._transformState=new Not(this);var e=this;this._readableState.needReadable=!0,this._readableState.sync=!1,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.once("prefinish",function(){typeof this._flush=="function"?this._flush(function(r){iQ(e,r)}):iQ(e)})}Ku.prototype.push=function(t,e){return this._transformState.needTransform=!1,sl.prototype.push.call(this,t,e)};Ku.prototype._transform=function(t,e,r){throw new Error("Not implemented")};Ku.prototype._write=function(t,e,r){var n=this._transformState;if(n.writecb=r,n.writechunk=t,n.writeencoding=e,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}};Ku.prototype._read=function(t){var e=this._transformState;e.writechunk!==null&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0};function iQ(t,e){if(e)return t.emit("error",e);var r=t._writableState,n=t._transformState;if(r.length)throw new Error("Calling transform done when ws.length != 0");if(n.transforming)throw new Error("Calling transform done when still transforming");return t.push(null)}l0.inherits(iv,Ku);function iv(t){if(!(this instanceof iv))return new iv(t);Ku.call(this,t)}iv.prototype._transform=function(t,e,r){r(null,t)};l0.inherits(Gu,Q1);Gu.Readable=ss;Gu.Writable=Ua;Gu.Duplex=sl;Gu.Transform=Ku;Gu.PassThrough=iv;Gu.Stream=Gu;function Gu(){Q1.call(this)}Gu.prototype.pipe=function(t,e){var r=this;function n(u){t.writable&&t.write(u)===!1&&r.pause&&r.pause()}r.on("data",n);function i(){r.readable&&r.resume&&r.resume()}t.on("drain",i),!t._isStdio&&(!e||e.end!==!1)&&(r.on("end",a),r.on("close",o));var s=!1;function a(){s||(s=!0,t.end())}function o(){s||(s=!0,typeof t.destroy=="function"&&t.destroy())}function c(u){if(l(),Q1.listenerCount(this,"error")===0)throw u}r.on("error",c),t.on("error",c);function l(){r.removeListener("data",n),t.removeListener("drain",i),r.removeListener("end",a),r.removeListener("close",o),r.removeListener("error",c),t.removeListener("error",c),r.removeListener("end",l),r.removeListener("close",l),t.removeListener("close",l)}return r.on("end",l),r.on("close",l),t.on("close",l),t.emit("pipe",r),t};const A1e=Object.freeze(Object.defineProperty({__proto__:null,Duplex:sl,PassThrough:iv,Readable:ss,Stream:Gu,Transform:Ku,Writable:Ua,default:Gu},Symbol.toStringTag,{value:"Module"})),hU=pae(A1e);var iR,sQ;function cp(){if(sQ)return iR;sQ=1;var t=Zr().Buffer,e=hU.Transform,r=EE.StringDecoder,n=xr;function i(s){e.call(this),this.hashMode=typeof s=="string",this.hashMode?this[s]=this._finalOrDigest:this.final=this._finalOrDigest,this._final&&(this.__final=this._final,this._final=null),this._decoder=null,this._encoding=null}return n(i,e),i.prototype.update=function(s,a,o){typeof s=="string"&&(s=t.from(s,a));var c=this._update(s);return this.hashMode?this:(o&&(c=this._toString(c,o)),c)},i.prototype.setAutoPadding=function(){},i.prototype.getAuthTag=function(){throw new Error("trying to get auth tag in unsupported state")},i.prototype.setAuthTag=function(){throw new Error("trying to set auth tag in unsupported state")},i.prototype.setAAD=function(){throw new Error("trying to set aad in unsupported state")},i.prototype._transform=function(s,a,o){var c;try{this.hashMode?this._update(s):this.push(this._update(s))}catch(l){c=l}finally{o(c)}},i.prototype._flush=function(s){var a;try{this.push(this.__final())}catch(o){a=o}s(a)},i.prototype._finalOrDigest=function(s){var a=this.__final()||t.alloc(0);return s&&(a=this._toString(a,s,!0)),a},i.prototype._toString=function(s,a,o){if(this._decoder||(this._decoder=new r(a),this._encoding=a),this._encoding!==a)throw new Error("can't switch encodings");var c=this._decoder.write(s);return o&&(c+=this._decoder.end()),c},iR=i,iR}var sR,aQ;function M6(){if(aQ)return sR;aQ=1;var t=xr,e=aU(),r=oU(),n=cU(),i=cp();function s(a){i.call(this,"digest"),this._hash=a}return t(s,i),s.prototype._update=function(a){this._hash.update(a)},s.prototype._final=function(){return this._hash.digest()},sR=function(o){return o=o.toLowerCase(),o==="md5"?new e:o==="rmd160"||o==="ripemd160"?new r:new s(n(o))},sR}var aR,oQ;function Lot(){if(oQ)return aR;oQ=1;var t=xr,e=Zr().Buffer,r=cp(),n=e.alloc(128),i=64;function s(a,o){r.call(this,"digest"),typeof o=="string"&&(o=e.from(o)),this._alg=a,this._key=o,o.length>i?o=a(o):o.length<i&&(o=e.concat([o,n],i));for(var c=this._ipad=e.allocUnsafe(i),l=this._opad=e.allocUnsafe(i),u=0;u<i;u++)c[u]=o[u]^54,l[u]=o[u]^92;this._hash=[c]}return t(s,r),s.prototype._update=function(a){this._hash.push(a)},s.prototype._final=function(){var a=this._alg(e.concat(this._hash));return this._alg(e.concat([this._opad,a]))},aR=s,aR}var oR,cQ;function T1e(){if(cQ)return oR;cQ=1;var t=aU();return oR=function(e){return new t().update(e).digest()},oR}var cR,lQ;function k1e(){if(lQ)return cR;lQ=1;var t=xr,e=Lot(),r=cp(),n=Zr().Buffer,i=T1e(),s=oU(),a=cU(),o=n.alloc(128);function c(l,u){r.call(this,"digest"),typeof u=="string"&&(u=n.from(u));var f=l==="sha512"||l==="sha384"?128:64;if(this._alg=l,this._key=u,u.length>f){var h=l==="rmd160"?new s:a(l);u=h.update(u).digest()}else u.length<f&&(u=n.concat([u,o],f));for(var d=this._ipad=n.allocUnsafe(f),g=this._opad=n.allocUnsafe(f),p=0;p<f;p++)d[p]=u[p]^54,g[p]=u[p]^92;this._hash=l==="rmd160"?new s:a(l),this._hash.update(d)}return t(c,r),c.prototype._update=function(l){this._hash.update(l)},c.prototype._final=function(){var l=this._hash.digest(),u=this._alg==="rmd160"?new s:a(this._alg);return u.update(this._opad).update(l).digest()},cR=function(u,f){return u=u.toLowerCase(),u==="rmd160"||u==="ripemd160"?new c("rmd160",f):u==="md5"?new e(i,f):new c(u,f)},cR}const Fot={sign:"rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},$ot={sign:"rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},Uot={sign:"rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},Vot={sign:"rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},jot={sign:"ecdsa",hash:"sha256",id:""},zot={sign:"ecdsa",hash:"sha224",id:""},qot={sign:"ecdsa",hash:"sha384",id:""},Hot={sign:"ecdsa",hash:"sha512",id:""},Wot={sign:"dsa",hash:"sha1",id:""},Kot={sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},Got={sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"},C1e={sha224WithRSAEncryption:Fot,"RSA-SHA224":{sign:"ecdsa/rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},sha256WithRSAEncryption:$ot,"RSA-SHA256":{sign:"ecdsa/rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},sha384WithRSAEncryption:Uot,"RSA-SHA384":{sign:"ecdsa/rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},sha512WithRSAEncryption:Vot,"RSA-SHA512":{sign:"ecdsa/rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},"RSA-SHA1":{sign:"rsa",hash:"sha1",id:"3021300906052b0e03021a05000414"},"ecdsa-with-SHA1":{sign:"ecdsa",hash:"sha1",id:""},sha256:jot,sha224:zot,sha384:qot,sha512:Hot,"DSA-SHA":{sign:"dsa",hash:"sha1",id:""},"DSA-SHA1":{sign:"dsa",hash:"sha1",id:""},DSA:Wot,"DSA-WITH-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-WITH-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-WITH-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-WITH-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-RIPEMD160":{sign:"dsa",hash:"rmd160",id:""},ripemd160WithRSA:Kot,"RSA-RIPEMD160":{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},md5WithRSAEncryption:Got,"RSA-MD5":{sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"}};var lR,uQ;function Yot(){return uQ||(uQ=1,lR=C1e),lR}var s5={},uR,fQ;function I1e(){if(fQ)return uR;fQ=1;var t=Math.pow(2,30)-1;return uR=function(e,r){if(typeof e!="number")throw new TypeError("Iterations not a number");if(e<0)throw new TypeError("Bad iterations");if(typeof r!="number")throw new TypeError("Key length not a number");if(r<0||r>t||r!==r)throw new TypeError("Bad key length")},uR}var fR,hQ;function R1e(){if(hQ)return fR;hQ=1;var t;if(It.process&&It.process.browser)t="utf-8";else if(It.process&&It.process.version){var e=parseInt(Et.version.split(".")[0].slice(1),10);t=e>=6?"utf-8":"binary"}else t="utf-8";return fR=t,fR}var hR,dQ;function P1e(){if(dQ)return hR;dQ=1;var t=Zr().Buffer;return hR=function(e,r,n){if(t.isBuffer(e))return e;if(typeof e=="string")return t.from(e,r);if(ArrayBuffer.isView(e))return t.from(e.buffer);throw new TypeError(n+" must be a string, a Buffer, a typed array or a DataView")},hR}var dR,pQ;function B1e(){if(pQ)return dR;pQ=1;var t=T1e(),e=oU(),r=cU(),n=Zr().Buffer,i=I1e(),s=R1e(),a=P1e(),o=n.alloc(128),c={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,rmd160:20,ripemd160:20};function l(h,d,g){var p=u(h),m=h==="sha512"||h==="sha384"?128:64;d.length>m?d=p(d):d.length<m&&(d=n.concat([d,o],m));for(var y=n.allocUnsafe(m+c[h]),v=n.allocUnsafe(m+c[h]),_=0;_<m;_++)y[_]=d[_]^54,v[_]=d[_]^92;var x=n.allocUnsafe(m+g+4);y.copy(x,0,0,m),this.ipad1=x,this.ipad2=y,this.opad=v,this.alg=h,this.blocksize=m,this.hash=p,this.size=c[h]}l.prototype.run=function(h,d){h.copy(d,this.blocksize);var g=this.hash(d);return g.copy(this.opad,this.blocksize),this.hash(this.opad)};function u(h){function d(p){return r(h).update(p).digest()}function g(p){return new e().update(p).digest()}return h==="rmd160"||h==="ripemd160"?g:h==="md5"?t:d}function f(h,d,g,p,m){i(g,p),h=a(h,s,"Password"),d=a(d,s,"Salt"),m=m||"sha1";var y=new l(m,h,d.length),v=n.allocUnsafe(p),_=n.allocUnsafe(d.length+4);d.copy(_,0,0,d.length);for(var x=0,A=c[m],C=Math.ceil(p/A),R=1;R<=C;R++){_.writeUInt32BE(R,d.length);for(var M=y.run(_,y.ipad1),N=M,Y=1;Y<g;Y++){N=y.run(N,y.ipad2);for(var H=0;H<A;H++)M[H]^=N[H]}M.copy(v,x),x+=A}return v}return dR=f,dR}var pR,gQ;function Xot(){if(gQ)return pR;gQ=1;var t=Zr().Buffer,e=I1e(),r=R1e(),n=B1e(),i=P1e(),s,a=It.crypto&&It.crypto.subtle,o={sha:"SHA-1","sha-1":"SHA-1",sha1:"SHA-1",sha256:"SHA-256","sha-256":"SHA-256",sha384:"SHA-384","sha-384":"SHA-384","sha-512":"SHA-512",sha512:"SHA-512"},c=[];function l(g){if(It.process&&!It.process.browser||!a||!a.importKey||!a.deriveBits)return Promise.resolve(!1);if(c[g]!==void 0)return c[g];s=s||t.alloc(8);var p=h(s,s,10,128,g).then(function(){return!0}).catch(function(){return!1});return c[g]=p,p}var u;function f(){return u||(It.process&&It.process.nextTick?u=It.process.nextTick:It.queueMicrotask?u=It.queueMicrotask:It.setImmediate?u=It.setImmediate:u=It.setTimeout,u)}function h(g,p,m,y,v){return a.importKey("raw",g,{name:"PBKDF2"},!1,["deriveBits"]).then(function(_){return a.deriveBits({name:"PBKDF2",salt:p,iterations:m,hash:{name:v}},_,y<<3)}).then(function(_){return t.from(_)})}function d(g,p){g.then(function(m){f()(function(){p(null,m)})},function(m){f()(function(){p(m)})})}return pR=function(g,p,m,y,v,_){typeof v=="function"&&(_=v,v=void 0),v=v||"sha1";var x=o[v.toLowerCase()];if(!x||typeof It.Promise!="function"){f()(function(){var A;try{A=n(g,p,m,y,v)}catch(C){return _(C)}_(null,A)});return}if(e(m,y),g=i(g,r,"Password"),p=i(p,r,"Salt"),typeof _!="function")throw new Error("No callback provided to pbkdf2");d(l(x).then(function(A){return A?h(g,p,m,y,x):n(g,p,m,y,v)}),_)},pR}var mQ;function D1e(){return mQ||(mQ=1,s5.pbkdf2=Xot(),s5.pbkdf2Sync=B1e()),s5}var El={},Lp={},jc={},yQ;function O1e(){if(yQ)return jc;yQ=1,jc.readUInt32BE=function(i,s){var a=i[0+s]<<24|i[1+s]<<16|i[2+s]<<8|i[3+s];return a>>>0},jc.writeUInt32BE=function(i,s,a){i[0+a]=s>>>24,i[1+a]=s>>>16&255,i[2+a]=s>>>8&255,i[3+a]=s&255},jc.ip=function(i,s,a,o){for(var c=0,l=0,u=6;u>=0;u-=2){for(var f=0;f<=24;f+=8)c<<=1,c|=s>>>f+u&1;for(var f=0;f<=24;f+=8)c<<=1,c|=i>>>f+u&1}for(var u=6;u>=0;u-=2){for(var f=1;f<=25;f+=8)l<<=1,l|=s>>>f+u&1;for(var f=1;f<=25;f+=8)l<<=1,l|=i>>>f+u&1}a[o+0]=c>>>0,a[o+1]=l>>>0},jc.rip=function(i,s,a,o){for(var c=0,l=0,u=0;u<4;u++)for(var f=24;f>=0;f-=8)c<<=1,c|=s>>>f+u&1,c<<=1,c|=i>>>f+u&1;for(var u=4;u<8;u++)for(var f=24;f>=0;f-=8)l<<=1,l|=s>>>f+u&1,l<<=1,l|=i>>>f+u&1;a[o+0]=c>>>0,a[o+1]=l>>>0},jc.pc1=function(i,s,a,o){for(var c=0,l=0,u=7;u>=5;u--){for(var f=0;f<=24;f+=8)c<<=1,c|=s>>f+u&1;for(var f=0;f<=24;f+=8)c<<=1,c|=i>>f+u&1}for(var f=0;f<=24;f+=8)c<<=1,c|=s>>f+u&1;for(var u=1;u<=3;u++){for(var f=0;f<=24;f+=8)l<<=1,l|=s>>f+u&1;for(var f=0;f<=24;f+=8)l<<=1,l|=i>>f+u&1}for(var f=0;f<=24;f+=8)l<<=1,l|=i>>f+u&1;a[o+0]=c>>>0,a[o+1]=l>>>0},jc.r28shl=function(i,s){return i<<s&268435455|i>>>28-s};var t=[14,11,17,4,27,23,25,0,13,22,7,18,5,9,16,24,2,20,12,21,1,8,15,26,15,4,25,19,9,1,26,16,5,11,23,8,12,7,17,0,22,3,10,14,6,20,27,24];jc.pc2=function(i,s,a,o){for(var c=0,l=0,u=t.length>>>1,f=0;f<u;f++)c<<=1,c|=i>>>t[f]&1;for(var f=u;f<t.length;f++)l<<=1,l|=s>>>t[f]&1;a[o+0]=c>>>0,a[o+1]=l>>>0},jc.expand=function(i,s,a){var o=0,c=0;o=(i&1)<<5|i>>>27;for(var l=23;l>=15;l-=4)o<<=6,o|=i>>>l&63;for(var l=11;l>=3;l-=4)c|=i>>>l&63,c<<=6;c|=(i&31)<<1|i>>>31,s[a+0]=o>>>0,s[a+1]=c>>>0};var e=[14,0,4,15,13,7,1,4,2,14,15,2,11,13,8,1,3,10,10,6,6,12,12,11,5,9,9,5,0,3,7,8,4,15,1,12,14,8,8,2,13,4,6,9,2,1,11,7,15,5,12,11,9,3,7,14,3,10,10,0,5,6,0,13,15,3,1,13,8,4,14,7,6,15,11,2,3,8,4,14,9,12,7,0,2,1,13,10,12,6,0,9,5,11,10,5,0,13,14,8,7,10,11,1,10,3,4,15,13,4,1,2,5,11,8,6,12,7,6,12,9,0,3,5,2,14,15,9,10,13,0,7,9,0,14,9,6,3,3,4,15,6,5,10,1,2,13,8,12,5,7,14,11,12,4,11,2,15,8,1,13,1,6,10,4,13,9,0,8,6,15,9,3,8,0,7,11,4,1,15,2,14,12,3,5,11,10,5,14,2,7,12,7,13,13,8,14,11,3,5,0,6,6,15,9,0,10,3,1,4,2,7,8,2,5,12,11,1,12,10,4,14,15,9,10,3,6,15,9,0,0,6,12,10,11,1,7,13,13,8,15,9,1,4,3,5,14,11,5,12,2,7,8,2,4,14,2,14,12,11,4,2,1,12,7,4,10,7,11,13,6,1,8,5,5,0,3,15,15,10,13,3,0,9,14,8,9,6,4,11,2,8,1,12,11,7,10,1,13,14,7,2,8,13,15,6,9,15,12,0,5,9,6,10,3,4,0,5,14,3,12,10,1,15,10,4,15,2,9,7,2,12,6,9,8,5,0,6,13,1,3,13,4,14,14,0,7,11,5,3,11,8,9,4,14,3,15,2,5,12,2,9,8,5,12,15,3,10,7,11,0,14,4,1,10,7,1,6,13,0,11,8,6,13,4,13,11,0,2,11,14,7,15,4,0,9,8,1,13,10,3,14,12,3,9,5,7,12,5,2,10,15,6,8,1,6,1,6,4,11,11,13,13,8,12,1,3,4,7,10,14,7,10,9,15,5,6,0,8,15,0,14,5,2,9,3,2,12,13,1,2,15,8,13,4,8,6,10,15,3,11,7,1,4,10,12,9,5,3,6,14,11,5,0,0,14,12,9,7,2,7,2,11,1,4,14,1,7,9,4,12,10,14,8,2,13,0,15,6,12,10,9,13,0,15,3,3,5,5,6,8,11];jc.substitute=function(i,s){for(var a=0,o=0;o<4;o++){var c=i>>>18-o*6&63,l=e[o*64+c];a<<=4,a|=l}for(var o=0;o<4;o++){var c=s>>>18-o*6&63,l=e[4*64+o*64+c];a<<=4,a|=l}return a>>>0};var r=[16,25,12,11,3,20,4,15,31,17,9,6,27,14,1,22,30,24,8,18,0,5,29,23,13,19,2,26,10,21,28,7];return jc.permute=function(i){for(var s=0,a=0;a<r.length;a++)s<<=1,s|=i>>>r[a]&1;return s>>>0},jc.padSplit=function(i,s,a){for(var o=i.toString(2);o.length<s;)o="0"+o;for(var c=[],l=0;l<s;l+=a)c.push(o.slice(l,l+a));return c.join(" ")},jc}var gR,vQ;function Zl(){if(vQ)return gR;vQ=1,gR=t;function t(e,r){if(!e)throw new Error(r||"Assertion failed")}return t.equal=function(r,n,i){if(r!=n)throw new Error(i||"Assertion failed: "+r+" != "+n)},gR}var mR,bQ;function dU(){if(bQ)return mR;bQ=1;var t=Zl();function e(r){this.options=r,this.type=this.options.type,this.blockSize=8,this._init(),this.buffer=new Array(this.blockSize),this.bufferOff=0,this.padding=r.padding!==!1}return mR=e,e.prototype._init=function(){},e.prototype.update=function(n){return n.length===0?[]:this.type==="decrypt"?this._updateDecrypt(n):this._updateEncrypt(n)},e.prototype._buffer=function(n,i){for(var s=Math.min(this.buffer.length-this.bufferOff,n.length-i),a=0;a<s;a++)this.buffer[this.bufferOff+a]=n[i+a];return this.bufferOff+=s,s},e.prototype._flushBuffer=function(n,i){return this._update(this.buffer,0,n,i),this.bufferOff=0,this.blockSize},e.prototype._updateEncrypt=function(n){var i=0,s=0,a=(this.bufferOff+n.length)/this.blockSize|0,o=new Array(a*this.blockSize);this.bufferOff!==0&&(i+=this._buffer(n,i),this.bufferOff===this.buffer.length&&(s+=this._flushBuffer(o,s)));for(var c=n.length-(n.length-i)%this.blockSize;i<c;i+=this.blockSize)this._update(n,i,o,s),s+=this.blockSize;for(;i<n.length;i++,this.bufferOff++)this.buffer[this.bufferOff]=n[i];return o},e.prototype._updateDecrypt=function(n){for(var i=0,s=0,a=Math.ceil((this.bufferOff+n.length)/this.blockSize)-1,o=new Array(a*this.blockSize);a>0;a--)i+=this._buffer(n,i),s+=this._flushBuffer(o,s);return i+=this._buffer(n,i),o},e.prototype.final=function(n){var i;n&&(i=this.update(n));var s;return this.type==="encrypt"?s=this._finalEncrypt():s=this._finalDecrypt(),i?i.concat(s):s},e.prototype._pad=function(n,i){if(i===0)return!1;for(;i<n.length;)n[i++]=0;return!0},e.prototype._finalEncrypt=function(){if(!this._pad(this.buffer,this.bufferOff))return[];var n=new Array(this.blockSize);return this._update(this.buffer,0,n,0),n},e.prototype._unpad=function(n){return n},e.prototype._finalDecrypt=function(){t.equal(this.bufferOff,this.blockSize,"Not enough data to decrypt");var n=new Array(this.blockSize);return this._flushBuffer(n,0),this._unpad(n)},mR}var yR,wQ;function N1e(){if(wQ)return yR;wQ=1;var t=Zl(),e=xr,r=O1e(),n=dU();function i(){this.tmp=new Array(2),this.keys=null}function s(o){n.call(this,o);var c=new i;this._desState=c,this.deriveKeys(c,o.key)}e(s,n),yR=s,s.create=function(c){return new s(c)};var a=[1,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1];return s.prototype.deriveKeys=function(c,l){c.keys=new Array(16*2),t.equal(l.length,this.blockSize,"Invalid key length");var u=r.readUInt32BE(l,0),f=r.readUInt32BE(l,4);r.pc1(u,f,c.tmp,0),u=c.tmp[0],f=c.tmp[1];for(var h=0;h<c.keys.length;h+=2){var d=a[h>>>1];u=r.r28shl(u,d),f=r.r28shl(f,d),r.pc2(u,f,c.keys,h)}},s.prototype._update=function(c,l,u,f){var h=this._desState,d=r.readUInt32BE(c,l),g=r.readUInt32BE(c,l+4);r.ip(d,g,h.tmp,0),d=h.tmp[0],g=h.tmp[1],this.type==="encrypt"?this._encrypt(h,d,g,h.tmp,0):this._decrypt(h,d,g,h.tmp,0),d=h.tmp[0],g=h.tmp[1],r.writeUInt32BE(u,d,f),r.writeUInt32BE(u,g,f+4)},s.prototype._pad=function(c,l){if(this.padding===!1)return!1;for(var u=c.length-l,f=l;f<c.length;f++)c[f]=u;return!0},s.prototype._unpad=function(c){if(this.padding===!1)return c;for(var l=c[c.length-1],u=c.length-l;u<c.length;u++)t.equal(c[u],l);return c.slice(0,c.length-l)},s.prototype._encrypt=function(c,l,u,f,h){for(var d=l,g=u,p=0;p<c.keys.length;p+=2){var m=c.keys[p],y=c.keys[p+1];r.expand(g,c.tmp,0),m^=c.tmp[0],y^=c.tmp[1];var v=r.substitute(m,y),_=r.permute(v),x=g;g=(d^_)>>>0,d=x}r.rip(g,d,f,h)},s.prototype._decrypt=function(c,l,u,f,h){for(var d=u,g=l,p=c.keys.length-2;p>=0;p-=2){var m=c.keys[p],y=c.keys[p+1];r.expand(d,c.tmp,0),m^=c.tmp[0],y^=c.tmp[1];var v=r.substitute(m,y),_=r.permute(v),x=d;d=(g^_)>>>0,g=x}r.rip(d,g,f,h)},yR}var vR={},_Q;function Zot(){if(_Q)return vR;_Q=1;var t=Zl(),e=xr,r={};function n(s){t.equal(s.length,8,"Invalid IV length"),this.iv=new Array(8);for(var a=0;a<this.iv.length;a++)this.iv[a]=s[a]}function i(s){function a(u){s.call(this,u),this._cbcInit()}e(a,s);for(var o=Object.keys(r),c=0;c<o.length;c++){var l=o[c];a.prototype[l]=r[l]}return a.create=function(f){return new a(f)},a}return vR.instantiate=i,r._cbcInit=function(){var a=new n(this.options.iv);this._cbcState=a},r._update=function(a,o,c,l){var u=this._cbcState,f=this.constructor.super_.prototype,h=u.iv;if(this.type==="encrypt"){for(var d=0;d<this.blockSize;d++)h[d]^=a[o+d];f._update.call(this,h,0,c,l);for(var d=0;d<this.blockSize;d++)h[d]=c[l+d]}else{f._update.call(this,a,o,c,l);for(var d=0;d<this.blockSize;d++)c[l+d]^=h[d];for(var d=0;d<this.blockSize;d++)h[d]=a[o+d]}},vR}var bR,xQ;function Jot(){if(xQ)return bR;xQ=1;var t=Zl(),e=xr,r=dU(),n=N1e();function i(a,o){t.equal(o.length,24,"Invalid key length");var c=o.slice(0,8),l=o.slice(8,16),u=o.slice(16,24);a==="encrypt"?this.ciphers=[n.create({type:"encrypt",key:c}),n.create({type:"decrypt",key:l}),n.create({type:"encrypt",key:u})]:this.ciphers=[n.create({type:"decrypt",key:u}),n.create({type:"encrypt",key:l}),n.create({type:"decrypt",key:c})]}function s(a){r.call(this,a);var o=new i(this.type,this.options.key);this._edeState=o}return e(s,r),bR=s,s.create=function(o){return new s(o)},s.prototype._update=function(o,c,l,u){var f=this._edeState;f.ciphers[0]._update(o,c,l,u),f.ciphers[1]._update(l,u,l,u),f.ciphers[2]._update(l,u,l,u)},s.prototype._pad=n.prototype._pad,s.prototype._unpad=n.prototype._unpad,bR}var EQ;function Qot(){return EQ||(EQ=1,Lp.utils=O1e(),Lp.Cipher=dU(),Lp.DES=N1e(),Lp.CBC=Zot(),Lp.EDE=Jot()),Lp}var wR,SQ;function ect(){if(SQ)return wR;SQ=1;var t=cp(),e=Qot(),r=xr,n=Zr().Buffer,i={"des-ede3-cbc":e.CBC.instantiate(e.EDE),"des-ede3":e.EDE,"des-ede-cbc":e.CBC.instantiate(e.EDE),"des-ede":e.EDE,"des-cbc":e.CBC.instantiate(e.DES),"des-ecb":e.DES};i.des=i["des-cbc"],i.des3=i["des-ede3-cbc"],wR=s,r(s,t);function s(a){t.call(this);var o=a.mode.toLowerCase(),c=i[o],l;a.decrypt?l="decrypt":l="encrypt";var u=a.key;n.isBuffer(u)||(u=n.from(u)),(o==="des-ede"||o==="des-ede-cbc")&&(u=n.concat([u,u.slice(0,8)]));var f=a.iv;n.isBuffer(f)||(f=n.from(f)),this._des=c.create({key:u,iv:f,type:l})}return s.prototype._update=function(a){return n.from(this._des.update(a))},s.prototype._final=function(){return n.from(this._des.final())},wR}var Sl={},a5={},o5={},AQ;function tct(){return AQ||(AQ=1,o5.encrypt=function(t,e){return t._cipher.encryptBlock(e)},o5.decrypt=function(t,e){return t._cipher.decryptBlock(e)}),o5}var c5={},_R,TQ;function L6(){return TQ||(TQ=1,_R=function(e,r){for(var n=Math.min(e.length,r.length),i=new We(n),s=0;s<n;++s)i[s]=e[s]^r[s];return i}),_R}var kQ;function rct(){if(kQ)return c5;kQ=1;var t=L6();return c5.encrypt=function(e,r){var n=t(r,e._prev);return e._prev=e._cipher.encryptBlock(n),e._prev},c5.decrypt=function(e,r){var n=e._prev;e._prev=r;var i=e._cipher.decryptBlock(r);return t(i,n)},c5}var xR={},CQ;function nct(){if(CQ)return xR;CQ=1;var t=Zr().Buffer,e=L6();function r(n,i,s){var a=i.length,o=e(i,n._cache);return n._cache=n._cache.slice(a),n._prev=t.concat([n._prev,s?i:o]),o}return xR.encrypt=function(n,i,s){for(var a=t.allocUnsafe(0),o;i.length;)if(n._cache.length===0&&(n._cache=n._cipher.encryptBlock(n._prev),n._prev=t.allocUnsafe(0)),n._cache.length<=i.length)o=n._cache.length,a=t.concat([a,r(n,i.slice(0,o),s)]),i=i.slice(o);else{a=t.concat([a,r(n,i,s)]);break}return a},xR}var ER={},IQ;function ict(){if(IQ)return ER;IQ=1;var t=Zr().Buffer;function e(r,n,i){var s=r._cipher.encryptBlock(r._prev),a=s[0]^n;return r._prev=t.concat([r._prev.slice(1),t.from([i?n:a])]),a}return ER.encrypt=function(r,n,i){for(var s=n.length,a=t.allocUnsafe(s),o=-1;++o<s;)a[o]=e(r,n[o],i);return a},ER}var SR={},RQ;function sct(){if(RQ)return SR;RQ=1;var t=Zr().Buffer;function e(n,i,s){for(var a,o=-1,c=8,l=0,u,f;++o<c;)a=n._cipher.encryptBlock(n._prev),u=i&1<<7-o?128:0,f=a[0]^u,l+=(f&128)>>o%8,n._prev=r(n._prev,s?u:f);return l}function r(n,i){var s=n.length,a=-1,o=t.allocUnsafe(n.length);for(n=t.concat([n,t.from([i])]);++a<s;)o[a]=n[a]<<1|n[a+1]>>7;return o}return SR.encrypt=function(n,i,s){for(var a=i.length,o=t.allocUnsafe(a),c=-1;++c<a;)o[c]=e(n,i[c],s);return o},SR}var AR={},PQ;function act(){if(PQ)return AR;PQ=1;var t=L6();function e(r){return r._prev=r._cipher.encryptBlock(r._prev),r._prev}return AR.encrypt=function(r,n){for(;r._cache.length<n.length;)r._cache=We.concat([r._cache,e(r)]);var i=r._cache.slice(0,n.length);return r._cache=r._cache.slice(n.length),t(n,i)},AR}var TR={},kR,BQ;function M1e(){if(BQ)return kR;BQ=1;function t(e){for(var r=e.length,n;r--;)if(n=e.readUInt8(r),n===255)e.writeUInt8(0,r);else{n++,e.writeUInt8(n,r);break}}return kR=t,kR}var DQ;function OQ(){if(DQ)return TR;DQ=1;var t=L6(),e=Zr().Buffer,r=M1e();function n(s){var a=s._cipher.encryptBlockRaw(s._prev);return r(s._prev),a}var i=16;return TR.encrypt=function(s,a){var o=Math.ceil(a.length/i),c=s._cache.length;s._cache=e.concat([s._cache,e.allocUnsafe(o*i)]);for(var l=0;l<o;l++){var u=n(s),f=c+l*i;s._cache.writeUInt32BE(u[0],f+0),s._cache.writeUInt32BE(u[1],f+4),s._cache.writeUInt32BE(u[2],f+8),s._cache.writeUInt32BE(u[3],f+12)}var h=s._cache.slice(0,a.length);return s._cache=s._cache.slice(a.length),t(a,h)},TR}const oct={cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},cct={cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},lct={cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},L1e={"aes-128-ecb":{cipher:"AES",key:128,iv:0,mode:"ECB",type:"block"},"aes-192-ecb":{cipher:"AES",key:192,iv:0,mode:"ECB",type:"block"},"aes-256-ecb":{cipher:"AES",key:256,iv:0,mode:"ECB",type:"block"},"aes-128-cbc":{cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},"aes-192-cbc":{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},"aes-256-cbc":{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},aes128:oct,aes192:cct,aes256:lct,"aes-128-cfb":{cipher:"AES",key:128,iv:16,mode:"CFB",type:"stream"},"aes-192-cfb":{cipher:"AES",key:192,iv:16,mode:"CFB",type:"stream"},"aes-256-cfb":{cipher:"AES",key:256,iv:16,mode:"CFB",type:"stream"},"aes-128-cfb8":{cipher:"AES",key:128,iv:16,mode:"CFB8",type:"stream"},"aes-192-cfb8":{cipher:"AES",key:192,iv:16,mode:"CFB8",type:"stream"},"aes-256-cfb8":{cipher:"AES",key:256,iv:16,mode:"CFB8",type:"stream"},"aes-128-cfb1":{cipher:"AES",key:128,iv:16,mode:"CFB1",type:"stream"},"aes-192-cfb1":{cipher:"AES",key:192,iv:16,mode:"CFB1",type:"stream"},"aes-256-cfb1":{cipher:"AES",key:256,iv:16,mode:"CFB1",type:"stream"},"aes-128-ofb":{cipher:"AES",key:128,iv:16,mode:"OFB",type:"stream"},"aes-192-ofb":{cipher:"AES",key:192,iv:16,mode:"OFB",type:"stream"},"aes-256-ofb":{cipher:"AES",key:256,iv:16,mode:"OFB",type:"stream"},"aes-128-ctr":{cipher:"AES",key:128,iv:16,mode:"CTR",type:"stream"},"aes-192-ctr":{cipher:"AES",key:192,iv:16,mode:"CTR",type:"stream"},"aes-256-ctr":{cipher:"AES",key:256,iv:16,mode:"CTR",type:"stream"},"aes-128-gcm":{cipher:"AES",key:128,iv:12,mode:"GCM",type:"auth"},"aes-192-gcm":{cipher:"AES",key:192,iv:12,mode:"GCM",type:"auth"},"aes-256-gcm":{cipher:"AES",key:256,iv:12,mode:"GCM",type:"auth"}};var CR,NQ;function pU(){if(NQ)return CR;NQ=1;var t={ECB:tct(),CBC:rct(),CFB:nct(),CFB8:ict(),CFB1:sct(),OFB:act(),CTR:OQ(),GCM:OQ()},e=L1e;for(var r in e)e[r].module=t[e[r].mode];return CR=e,CR}var IR={},MQ;function dA(){if(MQ)return IR;MQ=1;var t=Zr().Buffer;function e(o){t.isBuffer(o)||(o=t.from(o));for(var c=o.length/4|0,l=new Array(c),u=0;u<c;u++)l[u]=o.readUInt32BE(u*4);return l}function r(o){for(var c=0;c<o.length;o++)o[c]=0}function n(o,c,l,u,f){for(var h=l[0],d=l[1],g=l[2],p=l[3],m=o[0]^c[0],y=o[1]^c[1],v=o[2]^c[2],_=o[3]^c[3],x,A,C,R,M=4,N=1;N<f;N++)x=h[m>>>24]^d[y>>>16&255]^g[v>>>8&255]^p[_&255]^c[M++],A=h[y>>>24]^d[v>>>16&255]^g[_>>>8&255]^p[m&255]^c[M++],C=h[v>>>24]^d[_>>>16&255]^g[m>>>8&255]^p[y&255]^c[M++],R=h[_>>>24]^d[m>>>16&255]^g[y>>>8&255]^p[v&255]^c[M++],m=x,y=A,v=C,_=R;return x=(u[m>>>24]<<24|u[y>>>16&255]<<16|u[v>>>8&255]<<8|u[_&255])^c[M++],A=(u[y>>>24]<<24|u[v>>>16&255]<<16|u[_>>>8&255]<<8|u[m&255])^c[M++],C=(u[v>>>24]<<24|u[_>>>16&255]<<16|u[m>>>8&255]<<8|u[y&255])^c[M++],R=(u[_>>>24]<<24|u[m>>>16&255]<<16|u[y>>>8&255]<<8|u[v&255])^c[M++],x=x>>>0,A=A>>>0,C=C>>>0,R=R>>>0,[x,A,C,R]}var i=[0,1,2,4,8,16,32,64,128,27,54],s=function(){for(var o=new Array(256),c=0;c<256;c++)c<128?o[c]=c<<1:o[c]=c<<1^283;for(var l=[],u=[],f=[[],[],[],[]],h=[[],[],[],[]],d=0,g=0,p=0;p<256;++p){var m=g^g<<1^g<<2^g<<3^g<<4;m=m>>>8^m&255^99,l[d]=m,u[m]=d;var y=o[d],v=o[y],_=o[v],x=o[m]*257^m*16843008;f[0][d]=x<<24|x>>>8,f[1][d]=x<<16|x>>>16,f[2][d]=x<<8|x>>>24,f[3][d]=x,x=_*16843009^v*65537^y*257^d*16843008,h[0][m]=x<<24|x>>>8,h[1][m]=x<<16|x>>>16,h[2][m]=x<<8|x>>>24,h[3][m]=x,d===0?d=g=1:(d=y^o[o[o[_^y]]],g^=o[o[g]])}return{SBOX:l,INV_SBOX:u,SUB_MIX:f,INV_SUB_MIX:h}}();function a(o){this._key=e(o),this._reset()}return a.blockSize=4*4,a.keySize=256/8,a.prototype.blockSize=a.blockSize,a.prototype.keySize=a.keySize,a.prototype._reset=function(){for(var o=this._key,c=o.length,l=c+6,u=(l+1)*4,f=[],h=0;h<c;h++)f[h]=o[h];for(h=c;h<u;h++){var d=f[h-1];h%c===0?(d=d<<8|d>>>24,d=s.SBOX[d>>>24]<<24|s.SBOX[d>>>16&255]<<16|s.SBOX[d>>>8&255]<<8|s.SBOX[d&255],d^=i[h/c|0]<<24):c>6&&h%c===4&&(d=s.SBOX[d>>>24]<<24|s.SBOX[d>>>16&255]<<16|s.SBOX[d>>>8&255]<<8|s.SBOX[d&255]),f[h]=f[h-c]^d}for(var g=[],p=0;p<u;p++){var m=u-p,y=f[m-(p%4?0:4)];p<4||m<=4?g[p]=y:g[p]=s.INV_SUB_MIX[0][s.SBOX[y>>>24]]^s.INV_SUB_MIX[1][s.SBOX[y>>>16&255]]^s.INV_SUB_MIX[2][s.SBOX[y>>>8&255]]^s.INV_SUB_MIX[3][s.SBOX[y&255]]}this._nRounds=l,this._keySchedule=f,this._invKeySchedule=g},a.prototype.encryptBlockRaw=function(o){return o=e(o),n(o,this._keySchedule,s.SUB_MIX,s.SBOX,this._nRounds)},a.prototype.encryptBlock=function(o){var c=this.encryptBlockRaw(o),l=t.allocUnsafe(16);return l.writeUInt32BE(c[0],0),l.writeUInt32BE(c[1],4),l.writeUInt32BE(c[2],8),l.writeUInt32BE(c[3],12),l},a.prototype.decryptBlock=function(o){o=e(o);var c=o[1];o[1]=o[3],o[3]=c;var l=n(o,this._invKeySchedule,s.INV_SUB_MIX,s.INV_SBOX,this._nRounds),u=t.allocUnsafe(16);return u.writeUInt32BE(l[0],0),u.writeUInt32BE(l[3],4),u.writeUInt32BE(l[2],8),u.writeUInt32BE(l[1],12),u},a.prototype.scrub=function(){r(this._keySchedule),r(this._invKeySchedule),r(this._key)},IR.AES=a,IR}var RR,LQ;function uct(){if(LQ)return RR;LQ=1;var t=Zr().Buffer,e=t.alloc(16,0);function r(s){return[s.readUInt32BE(0),s.readUInt32BE(4),s.readUInt32BE(8),s.readUInt32BE(12)]}function n(s){var a=t.allocUnsafe(16);return a.writeUInt32BE(s[0]>>>0,0),a.writeUInt32BE(s[1]>>>0,4),a.writeUInt32BE(s[2]>>>0,8),a.writeUInt32BE(s[3]>>>0,12),a}function i(s){this.h=s,this.state=t.alloc(16,0),this.cache=t.allocUnsafe(0)}return i.prototype.ghash=function(s){for(var a=-1;++a<s.length;)this.state[a]^=s[a];this._multiply()},i.prototype._multiply=function(){for(var s=r(this.h),a=[0,0,0,0],o,c,l,u=-1;++u<128;){for(c=(this.state[~~(u/8)]&1<<7-u%8)!==0,c&&(a[0]^=s[0],a[1]^=s[1],a[2]^=s[2],a[3]^=s[3]),l=(s[3]&1)!==0,o=3;o>0;o--)s[o]=s[o]>>>1|(s[o-1]&1)<<31;s[0]=s[0]>>>1,l&&(s[0]=s[0]^225<<24)}this.state=n(a)},i.prototype.update=function(s){this.cache=t.concat([this.cache,s]);for(var a;this.cache.length>=16;)a=this.cache.slice(0,16),this.cache=this.cache.slice(16),this.ghash(a)},i.prototype.final=function(s,a){return this.cache.length&&this.ghash(t.concat([this.cache,e],16)),this.ghash(n([0,s,0,a])),this.state},RR=i,RR}var PR,FQ;function F1e(){if(FQ)return PR;FQ=1;var t=dA(),e=Zr().Buffer,r=cp(),n=xr,i=uct(),s=L6(),a=M1e();function o(u,f){var h=0;u.length!==f.length&&h++;for(var d=Math.min(u.length,f.length),g=0;g<d;++g)h+=u[g]^f[g];return h}function c(u,f,h){if(f.length===12)return u._finID=e.concat([f,e.from([0,0,0,1])]),e.concat([f,e.from([0,0,0,2])]);var d=new i(h),g=f.length,p=g%16;d.update(f),p&&(p=16-p,d.update(e.alloc(p,0))),d.update(e.alloc(8,0));var m=g*8,y=e.alloc(8);y.writeUIntBE(m,0,8),d.update(y),u._finID=d.state;var v=e.from(u._finID);return a(v),v}function l(u,f,h,d){r.call(this);var g=e.alloc(4,0);this._cipher=new t.AES(f);var p=this._cipher.encryptBlock(g);this._ghash=new i(p),h=c(this,h,p),this._prev=e.from(h),this._cache=e.allocUnsafe(0),this._secCache=e.allocUnsafe(0),this._decrypt=d,this._alen=0,this._len=0,this._mode=u,this._authTag=null,this._called=!1}return n(l,r),l.prototype._update=function(u){if(!this._called&&this._alen){var f=16-this._alen%16;f<16&&(f=e.alloc(f,0),this._ghash.update(f))}this._called=!0;var h=this._mode.encrypt(this,u);return this._decrypt?this._ghash.update(u):this._ghash.update(h),this._len+=u.length,h},l.prototype._final=function(){if(this._decrypt&&!this._authTag)throw new Error("Unsupported state or unable to authenticate data");var u=s(this._ghash.final(this._alen*8,this._len*8),this._cipher.encryptBlock(this._finID));if(this._decrypt&&o(u,this._authTag))throw new Error("Unsupported state or unable to authenticate data");this._authTag=u,this._cipher.scrub()},l.prototype.getAuthTag=function(){if(this._decrypt||!e.isBuffer(this._authTag))throw new Error("Attempting to get auth tag in unsupported state");return this._authTag},l.prototype.setAuthTag=function(f){if(!this._decrypt)throw new Error("Attempting to set auth tag in unsupported state");this._authTag=f},l.prototype.setAAD=function(f){if(this._called)throw new Error("Attempting to set AAD in unsupported state");this._ghash.update(f),this._alen+=f.length},PR=l,PR}var BR,$Q;function $1e(){if($Q)return BR;$Q=1;var t=dA(),e=Zr().Buffer,r=cp(),n=xr;function i(s,a,o,c){r.call(this),this._cipher=new t.AES(a),this._prev=e.from(o),this._cache=e.allocUnsafe(0),this._secCache=e.allocUnsafe(0),this._decrypt=c,this._mode=s}return n(i,r),i.prototype._update=function(s){return this._mode.encrypt(this,s,this._decrypt)},i.prototype._final=function(){this._cipher.scrub()},BR=i,BR}var DR,UQ;function pA(){if(UQ)return DR;UQ=1;var t=Zr().Buffer,e=aU();function r(n,i,s,a){if(t.isBuffer(n)||(n=t.from(n,"binary")),i&&(t.isBuffer(i)||(i=t.from(i,"binary")),i.length!==8))throw new RangeError("salt should be Buffer with 8 byte length");for(var o=s/8,c=t.alloc(o),l=t.alloc(a||0),u=t.alloc(0);o>0||a>0;){var f=new e;f.update(u),f.update(n),i&&f.update(i),u=f.digest();var h=0;if(o>0){var d=c.length-o;h=Math.min(o,u.length),u.copy(c,d,0,h),o-=h}if(h<u.length&&a>0){var g=l.length-a,p=Math.min(a,u.length-h);u.copy(l,g,h,h+p),a-=p}}return u.fill(0),{key:c,iv:l}}return DR=r,DR}var VQ;function fct(){if(VQ)return a5;VQ=1;var t=pU(),e=F1e(),r=Zr().Buffer,n=$1e(),i=cp(),s=dA(),a=pA(),o=xr;function c(d,g,p){i.call(this),this._cache=new u,this._cipher=new s.AES(g),this._prev=r.from(p),this._mode=d,this._autopadding=!0}o(c,i),c.prototype._update=function(d){this._cache.add(d);for(var g,p,m=[];g=this._cache.get();)p=this._mode.encrypt(this,g),m.push(p);return r.concat(m)};var l=r.alloc(16,16);c.prototype._final=function(){var d=this._cache.flush();if(this._autopadding)return d=this._mode.encrypt(this,d),this._cipher.scrub(),d;if(!d.equals(l))throw this._cipher.scrub(),new Error("data not multiple of block length")},c.prototype.setAutoPadding=function(d){return this._autopadding=!!d,this};function u(){this.cache=r.allocUnsafe(0)}u.prototype.add=function(d){this.cache=r.concat([this.cache,d])},u.prototype.get=function(){if(this.cache.length>15){var d=this.cache.slice(0,16);return this.cache=this.cache.slice(16),d}return null},u.prototype.flush=function(){for(var d=16-this.cache.length,g=r.allocUnsafe(d),p=-1;++p<d;)g.writeUInt8(d,p);return r.concat([this.cache,g])};function f(d,g,p){var m=t[d.toLowerCase()];if(!m)throw new TypeError("invalid suite type");if(typeof g=="string"&&(g=r.from(g)),g.length!==m.key/8)throw new TypeError("invalid key length "+g.length);if(typeof p=="string"&&(p=r.from(p)),m.mode!=="GCM"&&p.length!==m.iv)throw new TypeError("invalid iv length "+p.length);return m.type==="stream"?new n(m.module,g,p):m.type==="auth"?new e(m.module,g,p):new c(m.module,g,p)}function h(d,g){var p=t[d.toLowerCase()];if(!p)throw new TypeError("invalid suite type");var m=a(g,!1,p.key,p.iv);return f(d,m.key,m.iv)}return a5.createCipheriv=f,a5.createCipher=h,a5}var l5={},jQ;function hct(){if(jQ)return l5;jQ=1;var t=F1e(),e=Zr().Buffer,r=pU(),n=$1e(),i=cp(),s=dA(),a=pA(),o=xr;function c(d,g,p){i.call(this),this._cache=new l,this._last=void 0,this._cipher=new s.AES(g),this._prev=e.from(p),this._mode=d,this._autopadding=!0}o(c,i),c.prototype._update=function(d){this._cache.add(d);for(var g,p,m=[];g=this._cache.get(this._autopadding);)p=this._mode.decrypt(this,g),m.push(p);return e.concat(m)},c.prototype._final=function(){var d=this._cache.flush();if(this._autopadding)return u(this._mode.decrypt(this,d));if(d)throw new Error("data not multiple of block length")},c.prototype.setAutoPadding=function(d){return this._autopadding=!!d,this};function l(){this.cache=e.allocUnsafe(0)}l.prototype.add=function(d){this.cache=e.concat([this.cache,d])},l.prototype.get=function(d){var g;if(d){if(this.cache.length>16)return g=this.cache.slice(0,16),this.cache=this.cache.slice(16),g}else if(this.cache.length>=16)return g=this.cache.slice(0,16),this.cache=this.cache.slice(16),g;return null},l.prototype.flush=function(){if(this.cache.length)return this.cache};function u(d){var g=d[15];if(g<1||g>16)throw new Error("unable to decrypt data");for(var p=-1;++p<g;)if(d[p+(16-g)]!==g)throw new Error("unable to decrypt data");if(g!==16)return d.slice(0,16-g)}function f(d,g,p){var m=r[d.toLowerCase()];if(!m)throw new TypeError("invalid suite type");if(typeof p=="string"&&(p=e.from(p)),m.mode!=="GCM"&&p.length!==m.iv)throw new TypeError("invalid iv length "+p.length);if(typeof g=="string"&&(g=e.from(g)),g.length!==m.key/8)throw new TypeError("invalid key length "+g.length);return m.type==="stream"?new n(m.module,g,p,!0):m.type==="auth"?new t(m.module,g,p,!0):new c(m.module,g,p)}function h(d,g){var p=r[d.toLowerCase()];if(!p)throw new TypeError("invalid suite type");var m=a(g,!1,p.key,p.iv);return f(d,m.key,m.iv)}return l5.createDecipher=h,l5.createDecipheriv=f,l5}var zQ;function gU(){if(zQ)return Sl;zQ=1;var t=fct(),e=hct(),r=L1e;function n(){return Object.keys(r)}return Sl.createCipher=Sl.Cipher=t.createCipher,Sl.createCipheriv=Sl.Cipheriv=t.createCipheriv,Sl.createDecipher=Sl.Decipher=e.createDecipher,Sl.createDecipheriv=Sl.Decipheriv=e.createDecipheriv,Sl.listCiphers=Sl.getCiphers=n,Sl}var OR={},qQ;function dct(){return qQ||(qQ=1,function(t){t["des-ecb"]={key:8,iv:0},t["des-cbc"]=t.des={key:8,iv:8},t["des-ede3-cbc"]=t.des3={key:24,iv:8},t["des-ede3"]={key:24,iv:0},t["des-ede-cbc"]={key:16,iv:8},t["des-ede"]={key:16,iv:0}}(OR)),OR}var HQ;function pct(){if(HQ)return El;HQ=1;var t=ect(),e=gU(),r=pU(),n=dct(),i=pA();function s(u,f){u=u.toLowerCase();var h,d;if(r[u])h=r[u].key,d=r[u].iv;else if(n[u])h=n[u].key*8,d=n[u].iv;else throw new TypeError("invalid suite type");var g=i(f,!1,h,d);return o(u,g.key,g.iv)}function a(u,f){u=u.toLowerCase();var h,d;if(r[u])h=r[u].key,d=r[u].iv;else if(n[u])h=n[u].key*8,d=n[u].iv;else throw new TypeError("invalid suite type");var g=i(f,!1,h,d);return c(u,g.key,g.iv)}function o(u,f,h){if(u=u.toLowerCase(),r[u])return e.createCipheriv(u,f,h);if(n[u])return new t({key:f,iv:h,mode:u});throw new TypeError("invalid suite type")}function c(u,f,h){if(u=u.toLowerCase(),r[u])return e.createDecipheriv(u,f,h);if(n[u])return new t({key:f,iv:h,mode:u,decrypt:!0});throw new TypeError("invalid suite type")}function l(){return Object.keys(n).concat(e.getCiphers())}return El.createCipher=El.Cipher=s,El.createCipheriv=El.Cipheriv=o,El.createDecipher=El.Decipher=a,El.createDecipheriv=El.Decipheriv=c,El.listCiphers=El.getCiphers=l,El}var Fp={},Vx={exports:{}};Vx.exports;var WQ;function za(){return WQ||(WQ=1,function(t){(function(e,r){function n(H,E){if(!H)throw new Error(E||"Assertion failed")}function i(H,E){H.super_=E;var k=function(){};k.prototype=E.prototype,H.prototype=new k,H.prototype.constructor=H}function s(H,E,k){if(s.isBN(H))return H;this.negative=0,this.words=null,this.length=0,this.red=null,H!==null&&((E==="le"||E==="be")&&(k=E,E=10),this._init(H||0,E||10,k||"be"))}typeof e=="object"?e.exports=s:r.BN=s,s.BN=s,s.wordSize=26;var a;try{typeof window<"u"&&typeof window.Buffer<"u"?a=window.Buffer:a=rp.Buffer}catch{}s.isBN=function(E){return E instanceof s?!0:E!==null&&typeof E=="object"&&E.constructor.wordSize===s.wordSize&&Array.isArray(E.words)},s.max=function(E,k){return E.cmp(k)>0?E:k},s.min=function(E,k){return E.cmp(k)<0?E:k},s.prototype._init=function(E,k,w){if(typeof E=="number")return this._initNumber(E,k,w);if(typeof E=="object")return this._initArray(E,k,w);k==="hex"&&(k=16),n(k===(k|0)&&k>=2&&k<=36),E=E.toString().replace(/\s+/g,"");var T=0;E[0]==="-"&&(T++,this.negative=1),T<E.length&&(k===16?this._parseHex(E,T,w):(this._parseBase(E,k,T),w==="le"&&this._initArray(this.toArray(),k,w)))},s.prototype._initNumber=function(E,k,w){E<0&&(this.negative=1,E=-E),E<67108864?(this.words=[E&67108863],this.length=1):E<4503599627370496?(this.words=[E&67108863,E/67108864&67108863],this.length=2):(n(E<9007199254740992),this.words=[E&67108863,E/67108864&67108863,1],this.length=3),w==="le"&&this._initArray(this.toArray(),k,w)},s.prototype._initArray=function(E,k,w){if(n(typeof E.length=="number"),E.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(E.length/3),this.words=new Array(this.length);for(var T=0;T<this.length;T++)this.words[T]=0;var L,I,U=0;if(w==="be")for(T=E.length-1,L=0;T>=0;T-=3)I=E[T]|E[T-1]<<8|E[T-2]<<16,this.words[L]|=I<<U&67108863,this.words[L+1]=I>>>26-U&67108863,U+=24,U>=26&&(U-=26,L++);else if(w==="le")for(T=0,L=0;T<E.length;T+=3)I=E[T]|E[T+1]<<8|E[T+2]<<16,this.words[L]|=I<<U&67108863,this.words[L+1]=I>>>26-U&67108863,U+=24,U>=26&&(U-=26,L++);return this.strip()};function o(H,E){var k=H.charCodeAt(E);return k>=65&&k<=70?k-55:k>=97&&k<=102?k-87:k-48&15}function c(H,E,k){var w=o(H,k);return k-1>=E&&(w|=o(H,k-1)<<4),w}s.prototype._parseHex=function(E,k,w){this.length=Math.ceil((E.length-k)/6),this.words=new Array(this.length);for(var T=0;T<this.length;T++)this.words[T]=0;var L=0,I=0,U;if(w==="be")for(T=E.length-1;T>=k;T-=2)U=c(E,k,T)<<L,this.words[I]|=U&67108863,L>=18?(L-=18,I+=1,this.words[I]|=U>>>26):L+=8;else{var O=E.length-k;for(T=O%2===0?k+1:k;T<E.length;T+=2)U=c(E,k,T)<<L,this.words[I]|=U&67108863,L>=18?(L-=18,I+=1,this.words[I]|=U>>>26):L+=8}this.strip()};function l(H,E,k,w){for(var T=0,L=Math.min(H.length,k),I=E;I<L;I++){var U=H.charCodeAt(I)-48;T*=w,U>=49?T+=U-49+10:U>=17?T+=U-17+10:T+=U}return T}s.prototype._parseBase=function(E,k,w){this.words=[0],this.length=1;for(var T=0,L=1;L<=67108863;L*=k)T++;T--,L=L/k|0;for(var I=E.length-w,U=I%T,O=Math.min(I,I-U)+w,D=0,P=w;P<O;P+=T)D=l(E,P,P+T,k),this.imuln(L),this.words[0]+D<67108864?this.words[0]+=D:this._iaddn(D);if(U!==0){var B=1;for(D=l(E,P,E.length,k),P=0;P<U;P++)B*=k;this.imuln(B),this.words[0]+D<67108864?this.words[0]+=D:this._iaddn(D)}this.strip()},s.prototype.copy=function(E){E.words=new Array(this.length);for(var k=0;k<this.length;k++)E.words[k]=this.words[k];E.length=this.length,E.negative=this.negative,E.red=this.red},s.prototype.clone=function(){var E=new s(null);return this.copy(E),E},s.prototype._expand=function(E){for(;this.length<E;)this.words[this.length++]=0;return this},s.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},s.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},s.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var u=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],f=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],h=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function(E,k){E=E||10,k=k|0||1;var w;if(E===16||E==="hex"){w="";for(var T=0,L=0,I=0;I<this.length;I++){var U=this.words[I],O=((U<<T|L)&16777215).toString(16);L=U>>>24-T&16777215,L!==0||I!==this.length-1?w=u[6-O.length]+O+w:w=O+w,T+=2,T>=26&&(T-=26,I--)}for(L!==0&&(w=L.toString(16)+w);w.length%k!==0;)w="0"+w;return this.negative!==0&&(w="-"+w),w}if(E===(E|0)&&E>=2&&E<=36){var D=f[E],P=h[E];w="";var B=this.clone();for(B.negative=0;!B.isZero();){var z=B.modn(P).toString(E);B=B.idivn(P),B.isZero()?w=z+w:w=u[D-z.length]+z+w}for(this.isZero()&&(w="0"+w);w.length%k!==0;)w="0"+w;return this.negative!==0&&(w="-"+w),w}n(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var E=this.words[0];return this.length===2?E+=this.words[1]*67108864:this.length===3&&this.words[2]===1?E+=4503599627370496+this.words[1]*67108864:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-E:E},s.prototype.toJSON=function(){return this.toString(16)},s.prototype.toBuffer=function(E,k){return n(typeof a<"u"),this.toArrayLike(a,E,k)},s.prototype.toArray=function(E,k){return this.toArrayLike(Array,E,k)},s.prototype.toArrayLike=function(E,k,w){var T=this.byteLength(),L=w||Math.max(1,T);n(T<=L,"byte array longer than desired length"),n(L>0,"Requested array length <= 0"),this.strip();var I=k==="le",U=new E(L),O,D,P=this.clone();if(I){for(D=0;!P.isZero();D++)O=P.andln(255),P.iushrn(8),U[D]=O;for(;D<L;D++)U[D]=0}else{for(D=0;D<L-T;D++)U[D]=0;for(D=0;!P.isZero();D++)O=P.andln(255),P.iushrn(8),U[L-D-1]=O}return U},Math.clz32?s.prototype._countBits=function(E){return 32-Math.clz32(E)}:s.prototype._countBits=function(E){var k=E,w=0;return k>=4096&&(w+=13,k>>>=13),k>=64&&(w+=7,k>>>=7),k>=8&&(w+=4,k>>>=4),k>=2&&(w+=2,k>>>=2),w+k},s.prototype._zeroBits=function(E){if(E===0)return 26;var k=E,w=0;return k&8191||(w+=13,k>>>=13),k&127||(w+=7,k>>>=7),k&15||(w+=4,k>>>=4),k&3||(w+=2,k>>>=2),k&1||w++,w},s.prototype.bitLength=function(){var E=this.words[this.length-1],k=this._countBits(E);return(this.length-1)*26+k};function d(H){for(var E=new Array(H.bitLength()),k=0;k<E.length;k++){var w=k/26|0,T=k%26;E[k]=(H.words[w]&1<<T)>>>T}return E}s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var E=0,k=0;k<this.length;k++){var w=this._zeroBits(this.words[k]);if(E+=w,w!==26)break}return E},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(E){return this.negative!==0?this.abs().inotn(E).iaddn(1):this.clone()},s.prototype.fromTwos=function(E){return this.testn(E-1)?this.notn(E).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return this.negative!==0},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(E){for(;this.length<E.length;)this.words[this.length++]=0;for(var k=0;k<E.length;k++)this.words[k]=this.words[k]|E.words[k];return this.strip()},s.prototype.ior=function(E){return n((this.negative|E.negative)===0),this.iuor(E)},s.prototype.or=function(E){return this.length>E.length?this.clone().ior(E):E.clone().ior(this)},s.prototype.uor=function(E){return this.length>E.length?this.clone().iuor(E):E.clone().iuor(this)},s.prototype.iuand=function(E){var k;this.length>E.length?k=E:k=this;for(var w=0;w<k.length;w++)this.words[w]=this.words[w]&E.words[w];return this.length=k.length,this.strip()},s.prototype.iand=function(E){return n((this.negative|E.negative)===0),this.iuand(E)},s.prototype.and=function(E){return this.length>E.length?this.clone().iand(E):E.clone().iand(this)},s.prototype.uand=function(E){return this.length>E.length?this.clone().iuand(E):E.clone().iuand(this)},s.prototype.iuxor=function(E){var k,w;this.length>E.length?(k=this,w=E):(k=E,w=this);for(var T=0;T<w.length;T++)this.words[T]=k.words[T]^w.words[T];if(this!==k)for(;T<k.length;T++)this.words[T]=k.words[T];return this.length=k.length,this.strip()},s.prototype.ixor=function(E){return n((this.negative|E.negative)===0),this.iuxor(E)},s.prototype.xor=function(E){return this.length>E.length?this.clone().ixor(E):E.clone().ixor(this)},s.prototype.uxor=function(E){return this.length>E.length?this.clone().iuxor(E):E.clone().iuxor(this)},s.prototype.inotn=function(E){n(typeof E=="number"&&E>=0);var k=Math.ceil(E/26)|0,w=E%26;this._expand(k),w>0&&k--;for(var T=0;T<k;T++)this.words[T]=~this.words[T]&67108863;return w>0&&(this.words[T]=~this.words[T]&67108863>>26-w),this.strip()},s.prototype.notn=function(E){return this.clone().inotn(E)},s.prototype.setn=function(E,k){n(typeof E=="number"&&E>=0);var w=E/26|0,T=E%26;return this._expand(w+1),k?this.words[w]=this.words[w]|1<<T:this.words[w]=this.words[w]&~(1<<T),this.strip()},s.prototype.iadd=function(E){var k;if(this.negative!==0&&E.negative===0)return this.negative=0,k=this.isub(E),this.negative^=1,this._normSign();if(this.negative===0&&E.negative!==0)return E.negative=0,k=this.isub(E),E.negative=1,k._normSign();var w,T;this.length>E.length?(w=this,T=E):(w=E,T=this);for(var L=0,I=0;I<T.length;I++)k=(w.words[I]|0)+(T.words[I]|0)+L,this.words[I]=k&67108863,L=k>>>26;for(;L!==0&&I<w.length;I++)k=(w.words[I]|0)+L,this.words[I]=k&67108863,L=k>>>26;if(this.length=w.length,L!==0)this.words[this.length]=L,this.length++;else if(w!==this)for(;I<w.length;I++)this.words[I]=w.words[I];return this},s.prototype.add=function(E){var k;return E.negative!==0&&this.negative===0?(E.negative=0,k=this.sub(E),E.negative^=1,k):E.negative===0&&this.negative!==0?(this.negative=0,k=E.sub(this),this.negative=1,k):this.length>E.length?this.clone().iadd(E):E.clone().iadd(this)},s.prototype.isub=function(E){if(E.negative!==0){E.negative=0;var k=this.iadd(E);return E.negative=1,k._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(E),this.negative=1,this._normSign();var w=this.cmp(E);if(w===0)return this.negative=0,this.length=1,this.words[0]=0,this;var T,L;w>0?(T=this,L=E):(T=E,L=this);for(var I=0,U=0;U<L.length;U++)k=(T.words[U]|0)-(L.words[U]|0)+I,I=k>>26,this.words[U]=k&67108863;for(;I!==0&&U<T.length;U++)k=(T.words[U]|0)+I,I=k>>26,this.words[U]=k&67108863;if(I===0&&U<T.length&&T!==this)for(;U<T.length;U++)this.words[U]=T.words[U];return this.length=Math.max(this.length,U),T!==this&&(this.negative=1),this.strip()},s.prototype.sub=function(E){return this.clone().isub(E)};function g(H,E,k){k.negative=E.negative^H.negative;var w=H.length+E.length|0;k.length=w,w=w-1|0;var T=H.words[0]|0,L=E.words[0]|0,I=T*L,U=I&67108863,O=I/67108864|0;k.words[0]=U;for(var D=1;D<w;D++){for(var P=O>>>26,B=O&67108863,z=Math.min(D,E.length-1),F=Math.max(0,D-H.length+1);F<=z;F++){var X=D-F|0;T=H.words[X]|0,L=E.words[F]|0,I=T*L+B,P+=I/67108864|0,B=I&67108863}k.words[D]=B|0,O=P|0}return O!==0?k.words[D]=O|0:k.length--,k.strip()}var p=function(E,k,w){var T=E.words,L=k.words,I=w.words,U=0,O,D,P,B=T[0]|0,z=B&8191,F=B>>>13,X=T[1]|0,W=X&8191,q=X>>>13,G=T[2]|0,ee=G&8191,ae=G>>>13,te=T[3]|0,K=te&8191,re=te>>>13,V=T[4]|0,oe=V&8191,he=V>>>13,ne=T[5]|0,ie=ne&8191,ce=ne>>>13,ve=T[6]|0,Ee=ve&8191,ge=ve>>>13,Pe=T[7]|0,Ce=Pe&8191,Ie=Pe>>>13,$e=T[8]|0,se=$e&8191,Z=$e>>>13,J=T[9]|0,de=J&8191,Ae=J>>>13,De=L[0]|0,Re=De&8191,bt=De>>>13,$t=L[1]|0,ut=$t&8191,Mt=$t>>>13,Ft=L[2]|0,lr=Ft&8191,$n=Ft>>>13,On=L[3]|0,er=On&8191,gn=On>>>13,hi=L[4]|0,mr=hi&8191,di=hi>>>13,ai=L[5]|0,yr=ai&8191,pi=ai>>>13,gi=L[6]|0,hr=gi&8191,Kn=gi>>>13,Gn=L[7]|0,vr=Gn&8191,mi=Gn>>>13,fe=L[8]|0,_e=fe&8191,me=fe>>>13,we=L[9]|0,xe=we&8191,Se=we>>>13;w.negative=E.negative^k.negative,w.length=19,O=Math.imul(z,Re),D=Math.imul(z,bt),D=D+Math.imul(F,Re)|0,P=Math.imul(F,bt);var Le=(U+O|0)+((D&8191)<<13)|0;U=(P+(D>>>13)|0)+(Le>>>26)|0,Le&=67108863,O=Math.imul(W,Re),D=Math.imul(W,bt),D=D+Math.imul(q,Re)|0,P=Math.imul(q,bt),O=O+Math.imul(z,ut)|0,D=D+Math.imul(z,Mt)|0,D=D+Math.imul(F,ut)|0,P=P+Math.imul(F,Mt)|0;var Ke=(U+O|0)+((D&8191)<<13)|0;U=(P+(D>>>13)|0)+(Ke>>>26)|0,Ke&=67108863,O=Math.imul(ee,Re),D=Math.imul(ee,bt),D=D+Math.imul(ae,Re)|0,P=Math.imul(ae,bt),O=O+Math.imul(W,ut)|0,D=D+Math.imul(W,Mt)|0,D=D+Math.imul(q,ut)|0,P=P+Math.imul(q,Mt)|0,O=O+Math.imul(z,lr)|0,D=D+Math.imul(z,$n)|0,D=D+Math.imul(F,lr)|0,P=P+Math.imul(F,$n)|0;var Ue=(U+O|0)+((D&8191)<<13)|0;U=(P+(D>>>13)|0)+(Ue>>>26)|0,Ue&=67108863,O=Math.imul(K,Re),D=Math.imul(K,bt),D=D+Math.imul(re,Re)|0,P=Math.imul(re,bt),O=O+Math.imul(ee,ut)|0,D=D+Math.imul(ee,Mt)|0,D=D+Math.imul(ae,ut)|0,P=P+Math.imul(ae,Mt)|0,O=O+Math.imul(W,lr)|0,D=D+Math.imul(W,$n)|0,D=D+Math.imul(q,lr)|0,P=P+Math.imul(q,$n)|0,O=O+Math.imul(z,er)|0,D=D+Math.imul(z,gn)|0,D=D+Math.imul(F,er)|0,P=P+Math.imul(F,gn)|0;var je=(U+O|0)+((D&8191)<<13)|0;U=(P+(D>>>13)|0)+(je>>>26)|0,je&=67108863,O=Math.imul(oe,Re),D=Math.imul(oe,bt),D=D+Math.imul(he,Re)|0,P=Math.imul(he,bt),O=O+Math.imul(K,ut)|0,D=D+Math.imul(K,Mt)|0,D=D+Math.imul(re,ut)|0,P=P+Math.imul(re,Mt)|0,O=O+Math.imul(ee,lr)|0,D=D+Math.imul(ee,$n)|0,D=D+Math.imul(ae,lr)|0,P=P+Math.imul(ae,$n)|0,O=O+Math.imul(W,er)|0,D=D+Math.imul(W,gn)|0,D=D+Math.imul(q,er)|0,P=P+Math.imul(q,gn)|0,O=O+Math.imul(z,mr)|0,D=D+Math.imul(z,di)|0,D=D+Math.imul(F,mr)|0,P=P+Math.imul(F,di)|0;var Ve=(U+O|0)+((D&8191)<<13)|0;U=(P+(D>>>13)|0)+(Ve>>>26)|0,Ve&=67108863,O=Math.imul(ie,Re),D=Math.imul(ie,bt),D=D+Math.imul(ce,Re)|0,P=Math.imul(ce,bt),O=O+Math.imul(oe,ut)|0,D=D+Math.imul(oe,Mt)|0,D=D+Math.imul(he,ut)|0,P=P+Math.imul(he,Mt)|0,O=O+Math.imul(K,lr)|0,D=D+Math.imul(K,$n)|0,D=D+Math.imul(re,lr)|0,P=P+Math.imul(re,$n)|0,O=O+Math.imul(ee,er)|0,D=D+Math.imul(ee,gn)|0,D=D+Math.imul(ae,er)|0,P=P+Math.imul(ae,gn)|0,O=O+Math.imul(W,mr)|0,D=D+Math.imul(W,di)|0,D=D+Math.imul(q,mr)|0,P=P+Math.imul(q,di)|0,O=O+Math.imul(z,yr)|0,D=D+Math.imul(z,pi)|0,D=D+Math.imul(F,yr)|0,P=P+Math.imul(F,pi)|0;var it=(U+O|0)+((D&8191)<<13)|0;U=(P+(D>>>13)|0)+(it>>>26)|0,it&=67108863,O=Math.imul(Ee,Re),D=Math.imul(Ee,bt),D=D+Math.imul(ge,Re)|0,P=Math.imul(ge,bt),O=O+Math.imul(ie,ut)|0,D=D+Math.imul(ie,Mt)|0,D=D+Math.imul(ce,ut)|0,P=P+Math.imul(ce,Mt)|0,O=O+Math.imul(oe,lr)|0,D=D+Math.imul(oe,$n)|0,D=D+Math.imul(he,lr)|0,P=P+Math.imul(he,$n)|0,O=O+Math.imul(K,er)|0,D=D+Math.imul(K,gn)|0,D=D+Math.imul(re,er)|0,P=P+Math.imul(re,gn)|0,O=O+Math.imul(ee,mr)|0,D=D+Math.imul(ee,di)|0,D=D+Math.imul(ae,mr)|0,P=P+Math.imul(ae,di)|0,O=O+Math.imul(W,yr)|0,D=D+Math.imul(W,pi)|0,D=D+Math.imul(q,yr)|0,P=P+Math.imul(q,pi)|0,O=O+Math.imul(z,hr)|0,D=D+Math.imul(z,Kn)|0,D=D+Math.imul(F,hr)|0,P=P+Math.imul(F,Kn)|0;var gt=(U+O|0)+((D&8191)<<13)|0;U=(P+(D>>>13)|0)+(gt>>>26)|0,gt&=67108863,O=Math.imul(Ce,Re),D=Math.imul(Ce,bt),D=D+Math.imul(Ie,Re)|0,P=Math.imul(Ie,bt),O=O+Math.imul(Ee,ut)|0,D=D+Math.imul(Ee,Mt)|0,D=D+Math.imul(ge,ut)|0,P=P+Math.imul(ge,Mt)|0,O=O+Math.imul(ie,lr)|0,D=D+Math.imul(ie,$n)|0,D=D+Math.imul(ce,lr)|0,P=P+Math.imul(ce,$n)|0,O=O+Math.imul(oe,er)|0,D=D+Math.imul(oe,gn)|0,D=D+Math.imul(he,er)|0,P=P+Math.imul(he,gn)|0,O=O+Math.imul(K,mr)|0,D=D+Math.imul(K,di)|0,D=D+Math.imul(re,mr)|0,P=P+Math.imul(re,di)|0,O=O+Math.imul(ee,yr)|0,D=D+Math.imul(ee,pi)|0,D=D+Math.imul(ae,yr)|0,P=P+Math.imul(ae,pi)|0,O=O+Math.imul(W,hr)|0,D=D+Math.imul(W,Kn)|0,D=D+Math.imul(q,hr)|0,P=P+Math.imul(q,Kn)|0,O=O+Math.imul(z,vr)|0,D=D+Math.imul(z,mi)|0,D=D+Math.imul(F,vr)|0,P=P+Math.imul(F,mi)|0;var xt=(U+O|0)+((D&8191)<<13)|0;U=(P+(D>>>13)|0)+(xt>>>26)|0,xt&=67108863,O=Math.imul(se,Re),D=Math.imul(se,bt),D=D+Math.imul(Z,Re)|0,P=Math.imul(Z,bt),O=O+Math.imul(Ce,ut)|0,D=D+Math.imul(Ce,Mt)|0,D=D+Math.imul(Ie,ut)|0,P=P+Math.imul(Ie,Mt)|0,O=O+Math.imul(Ee,lr)|0,D=D+Math.imul(Ee,$n)|0,D=D+Math.imul(ge,lr)|0,P=P+Math.imul(ge,$n)|0,O=O+Math.imul(ie,er)|0,D=D+Math.imul(ie,gn)|0,D=D+Math.imul(ce,er)|0,P=P+Math.imul(ce,gn)|0,O=O+Math.imul(oe,mr)|0,D=D+Math.imul(oe,di)|0,D=D+Math.imul(he,mr)|0,P=P+Math.imul(he,di)|0,O=O+Math.imul(K,yr)|0,D=D+Math.imul(K,pi)|0,D=D+Math.imul(re,yr)|0,P=P+Math.imul(re,pi)|0,O=O+Math.imul(ee,hr)|0,D=D+Math.imul(ee,Kn)|0,D=D+Math.imul(ae,hr)|0,P=P+Math.imul(ae,Kn)|0,O=O+Math.imul(W,vr)|0,D=D+Math.imul(W,mi)|0,D=D+Math.imul(q,vr)|0,P=P+Math.imul(q,mi)|0,O=O+Math.imul(z,_e)|0,D=D+Math.imul(z,me)|0,D=D+Math.imul(F,_e)|0,P=P+Math.imul(F,me)|0;var at=(U+O|0)+((D&8191)<<13)|0;U=(P+(D>>>13)|0)+(at>>>26)|0,at&=67108863,O=Math.imul(de,Re),D=Math.imul(de,bt),D=D+Math.imul(Ae,Re)|0,P=Math.imul(Ae,bt),O=O+Math.imul(se,ut)|0,D=D+Math.imul(se,Mt)|0,D=D+Math.imul(Z,ut)|0,P=P+Math.imul(Z,Mt)|0,O=O+Math.imul(Ce,lr)|0,D=D+Math.imul(Ce,$n)|0,D=D+Math.imul(Ie,lr)|0,P=P+Math.imul(Ie,$n)|0,O=O+Math.imul(Ee,er)|0,D=D+Math.imul(Ee,gn)|0,D=D+Math.imul(ge,er)|0,P=P+Math.imul(ge,gn)|0,O=O+Math.imul(ie,mr)|0,D=D+Math.imul(ie,di)|0,D=D+Math.imul(ce,mr)|0,P=P+Math.imul(ce,di)|0,O=O+Math.imul(oe,yr)|0,D=D+Math.imul(oe,pi)|0,D=D+Math.imul(he,yr)|0,P=P+Math.imul(he,pi)|0,O=O+Math.imul(K,hr)|0,D=D+Math.imul(K,Kn)|0,D=D+Math.imul(re,hr)|0,P=P+Math.imul(re,Kn)|0,O=O+Math.imul(ee,vr)|0,D=D+Math.imul(ee,mi)|0,D=D+Math.imul(ae,vr)|0,P=P+Math.imul(ae,mi)|0,O=O+Math.imul(W,_e)|0,D=D+Math.imul(W,me)|0,D=D+Math.imul(q,_e)|0,P=P+Math.imul(q,me)|0,O=O+Math.imul(z,xe)|0,D=D+Math.imul(z,Se)|0,D=D+Math.imul(F,xe)|0,P=P+Math.imul(F,Se)|0;var ft=(U+O|0)+((D&8191)<<13)|0;U=(P+(D>>>13)|0)+(ft>>>26)|0,ft&=67108863,O=Math.imul(de,ut),D=Math.imul(de,Mt),D=D+Math.imul(Ae,ut)|0,P=Math.imul(Ae,Mt),O=O+Math.imul(se,lr)|0,D=D+Math.imul(se,$n)|0,D=D+Math.imul(Z,lr)|0,P=P+Math.imul(Z,$n)|0,O=O+Math.imul(Ce,er)|0,D=D+Math.imul(Ce,gn)|0,D=D+Math.imul(Ie,er)|0,P=P+Math.imul(Ie,gn)|0,O=O+Math.imul(Ee,mr)|0,D=D+Math.imul(Ee,di)|0,D=D+Math.imul(ge,mr)|0,P=P+Math.imul(ge,di)|0,O=O+Math.imul(ie,yr)|0,D=D+Math.imul(ie,pi)|0,D=D+Math.imul(ce,yr)|0,P=P+Math.imul(ce,pi)|0,O=O+Math.imul(oe,hr)|0,D=D+Math.imul(oe,Kn)|0,D=D+Math.imul(he,hr)|0,P=P+Math.imul(he,Kn)|0,O=O+Math.imul(K,vr)|0,D=D+Math.imul(K,mi)|0,D=D+Math.imul(re,vr)|0,P=P+Math.imul(re,mi)|0,O=O+Math.imul(ee,_e)|0,D=D+Math.imul(ee,me)|0,D=D+Math.imul(ae,_e)|0,P=P+Math.imul(ae,me)|0,O=O+Math.imul(W,xe)|0,D=D+Math.imul(W,Se)|0,D=D+Math.imul(q,xe)|0,P=P+Math.imul(q,Se)|0;var Jt=(U+O|0)+((D&8191)<<13)|0;U=(P+(D>>>13)|0)+(Jt>>>26)|0,Jt&=67108863,O=Math.imul(de,lr),D=Math.imul(de,$n),D=D+Math.imul(Ae,lr)|0,P=Math.imul(Ae,$n),O=O+Math.imul(se,er)|0,D=D+Math.imul(se,gn)|0,D=D+Math.imul(Z,er)|0,P=P+Math.imul(Z,gn)|0,O=O+Math.imul(Ce,mr)|0,D=D+Math.imul(Ce,di)|0,D=D+Math.imul(Ie,mr)|0,P=P+Math.imul(Ie,di)|0,O=O+Math.imul(Ee,yr)|0,D=D+Math.imul(Ee,pi)|0,D=D+Math.imul(ge,yr)|0,P=P+Math.imul(ge,pi)|0,O=O+Math.imul(ie,hr)|0,D=D+Math.imul(ie,Kn)|0,D=D+Math.imul(ce,hr)|0,P=P+Math.imul(ce,Kn)|0,O=O+Math.imul(oe,vr)|0,D=D+Math.imul(oe,mi)|0,D=D+Math.imul(he,vr)|0,P=P+Math.imul(he,mi)|0,O=O+Math.imul(K,_e)|0,D=D+Math.imul(K,me)|0,D=D+Math.imul(re,_e)|0,P=P+Math.imul(re,me)|0,O=O+Math.imul(ee,xe)|0,D=D+Math.imul(ee,Se)|0,D=D+Math.imul(ae,xe)|0,P=P+Math.imul(ae,Se)|0;var vn=(U+O|0)+((D&8191)<<13)|0;U=(P+(D>>>13)|0)+(vn>>>26)|0,vn&=67108863,O=Math.imul(de,er),D=Math.imul(de,gn),D=D+Math.imul(Ae,er)|0,P=Math.imul(Ae,gn),O=O+Math.imul(se,mr)|0,D=D+Math.imul(se,di)|0,D=D+Math.imul(Z,mr)|0,P=P+Math.imul(Z,di)|0,O=O+Math.imul(Ce,yr)|0,D=D+Math.imul(Ce,pi)|0,D=D+Math.imul(Ie,yr)|0,P=P+Math.imul(Ie,pi)|0,O=O+Math.imul(Ee,hr)|0,D=D+Math.imul(Ee,Kn)|0,D=D+Math.imul(ge,hr)|0,P=P+Math.imul(ge,Kn)|0,O=O+Math.imul(ie,vr)|0,D=D+Math.imul(ie,mi)|0,D=D+Math.imul(ce,vr)|0,P=P+Math.imul(ce,mi)|0,O=O+Math.imul(oe,_e)|0,D=D+Math.imul(oe,me)|0,D=D+Math.imul(he,_e)|0,P=P+Math.imul(he,me)|0,O=O+Math.imul(K,xe)|0,D=D+Math.imul(K,Se)|0,D=D+Math.imul(re,xe)|0,P=P+Math.imul(re,Se)|0;var _n=(U+O|0)+((D&8191)<<13)|0;U=(P+(D>>>13)|0)+(_n>>>26)|0,_n&=67108863,O=Math.imul(de,mr),D=Math.imul(de,di),D=D+Math.imul(Ae,mr)|0,P=Math.imul(Ae,di),O=O+Math.imul(se,yr)|0,D=D+Math.imul(se,pi)|0,D=D+Math.imul(Z,yr)|0,P=P+Math.imul(Z,pi)|0,O=O+Math.imul(Ce,hr)|0,D=D+Math.imul(Ce,Kn)|0,D=D+Math.imul(Ie,hr)|0,P=P+Math.imul(Ie,Kn)|0,O=O+Math.imul(Ee,vr)|0,D=D+Math.imul(Ee,mi)|0,D=D+Math.imul(ge,vr)|0,P=P+Math.imul(ge,mi)|0,O=O+Math.imul(ie,_e)|0,D=D+Math.imul(ie,me)|0,D=D+Math.imul(ce,_e)|0,P=P+Math.imul(ce,me)|0,O=O+Math.imul(oe,xe)|0,D=D+Math.imul(oe,Se)|0,D=D+Math.imul(he,xe)|0,P=P+Math.imul(he,Se)|0;var yi=(U+O|0)+((D&8191)<<13)|0;U=(P+(D>>>13)|0)+(yi>>>26)|0,yi&=67108863,O=Math.imul(de,yr),D=Math.imul(de,pi),D=D+Math.imul(Ae,yr)|0,P=Math.imul(Ae,pi),O=O+Math.imul(se,hr)|0,D=D+Math.imul(se,Kn)|0,D=D+Math.imul(Z,hr)|0,P=P+Math.imul(Z,Kn)|0,O=O+Math.imul(Ce,vr)|0,D=D+Math.imul(Ce,mi)|0,D=D+Math.imul(Ie,vr)|0,P=P+Math.imul(Ie,mi)|0,O=O+Math.imul(Ee,_e)|0,D=D+Math.imul(Ee,me)|0,D=D+Math.imul(ge,_e)|0,P=P+Math.imul(ge,me)|0,O=O+Math.imul(ie,xe)|0,D=D+Math.imul(ie,Se)|0,D=D+Math.imul(ce,xe)|0,P=P+Math.imul(ce,Se)|0;var Ha=(U+O|0)+((D&8191)<<13)|0;U=(P+(D>>>13)|0)+(Ha>>>26)|0,Ha&=67108863,O=Math.imul(de,hr),D=Math.imul(de,Kn),D=D+Math.imul(Ae,hr)|0,P=Math.imul(Ae,Kn),O=O+Math.imul(se,vr)|0,D=D+Math.imul(se,mi)|0,D=D+Math.imul(Z,vr)|0,P=P+Math.imul(Z,mi)|0,O=O+Math.imul(Ce,_e)|0,D=D+Math.imul(Ce,me)|0,D=D+Math.imul(Ie,_e)|0,P=P+Math.imul(Ie,me)|0,O=O+Math.imul(Ee,xe)|0,D=D+Math.imul(Ee,Se)|0,D=D+Math.imul(ge,xe)|0,P=P+Math.imul(ge,Se)|0;var Wa=(U+O|0)+((D&8191)<<13)|0;U=(P+(D>>>13)|0)+(Wa>>>26)|0,Wa&=67108863,O=Math.imul(de,vr),D=Math.imul(de,mi),D=D+Math.imul(Ae,vr)|0,P=Math.imul(Ae,mi),O=O+Math.imul(se,_e)|0,D=D+Math.imul(se,me)|0,D=D+Math.imul(Z,_e)|0,P=P+Math.imul(Z,me)|0,O=O+Math.imul(Ce,xe)|0,D=D+Math.imul(Ce,Se)|0,D=D+Math.imul(Ie,xe)|0,P=P+Math.imul(Ie,Se)|0;var Eo=(U+O|0)+((D&8191)<<13)|0;U=(P+(D>>>13)|0)+(Eo>>>26)|0,Eo&=67108863,O=Math.imul(de,_e),D=Math.imul(de,me),D=D+Math.imul(Ae,_e)|0,P=Math.imul(Ae,me),O=O+Math.imul(se,xe)|0,D=D+Math.imul(se,Se)|0,D=D+Math.imul(Z,xe)|0,P=P+Math.imul(Z,Se)|0;var xa=(U+O|0)+((D&8191)<<13)|0;U=(P+(D>>>13)|0)+(xa>>>26)|0,xa&=67108863,O=Math.imul(de,xe),D=Math.imul(de,Se),D=D+Math.imul(Ae,xe)|0,P=Math.imul(Ae,Se);var Oc=(U+O|0)+((D&8191)<<13)|0;return U=(P+(D>>>13)|0)+(Oc>>>26)|0,Oc&=67108863,I[0]=Le,I[1]=Ke,I[2]=Ue,I[3]=je,I[4]=Ve,I[5]=it,I[6]=gt,I[7]=xt,I[8]=at,I[9]=ft,I[10]=Jt,I[11]=vn,I[12]=_n,I[13]=yi,I[14]=Ha,I[15]=Wa,I[16]=Eo,I[17]=xa,I[18]=Oc,U!==0&&(I[19]=U,w.length++),w};Math.imul||(p=g);function m(H,E,k){k.negative=E.negative^H.negative,k.length=H.length+E.length;for(var w=0,T=0,L=0;L<k.length-1;L++){var I=T;T=0;for(var U=w&67108863,O=Math.min(L,E.length-1),D=Math.max(0,L-H.length+1);D<=O;D++){var P=L-D,B=H.words[P]|0,z=E.words[D]|0,F=B*z,X=F&67108863;I=I+(F/67108864|0)|0,X=X+U|0,U=X&67108863,I=I+(X>>>26)|0,T+=I>>>26,I&=67108863}k.words[L]=U,w=I,I=T}return w!==0?k.words[L]=w:k.length--,k.strip()}function y(H,E,k){var w=new v;return w.mulp(H,E,k)}s.prototype.mulTo=function(E,k){var w,T=this.length+E.length;return this.length===10&&E.length===10?w=p(this,E,k):T<63?w=g(this,E,k):T<1024?w=m(this,E,k):w=y(this,E,k),w};function v(H,E){this.x=H,this.y=E}v.prototype.makeRBT=function(E){for(var k=new Array(E),w=s.prototype._countBits(E)-1,T=0;T<E;T++)k[T]=this.revBin(T,w,E);return k},v.prototype.revBin=function(E,k,w){if(E===0||E===w-1)return E;for(var T=0,L=0;L<k;L++)T|=(E&1)<<k-L-1,E>>=1;return T},v.prototype.permute=function(E,k,w,T,L,I){for(var U=0;U<I;U++)T[U]=k[E[U]],L[U]=w[E[U]]},v.prototype.transform=function(E,k,w,T,L,I){this.permute(I,E,k,w,T,L);for(var U=1;U<L;U<<=1)for(var O=U<<1,D=Math.cos(2*Math.PI/O),P=Math.sin(2*Math.PI/O),B=0;B<L;B+=O)for(var z=D,F=P,X=0;X<U;X++){var W=w[B+X],q=T[B+X],G=w[B+X+U],ee=T[B+X+U],ae=z*G-F*ee;ee=z*ee+F*G,G=ae,w[B+X]=W+G,T[B+X]=q+ee,w[B+X+U]=W-G,T[B+X+U]=q-ee,X!==O&&(ae=D*z-P*F,F=D*F+P*z,z=ae)}},v.prototype.guessLen13b=function(E,k){var w=Math.max(k,E)|1,T=w&1,L=0;for(w=w/2|0;w;w=w>>>1)L++;return 1<<L+1+T},v.prototype.conjugate=function(E,k,w){if(!(w<=1))for(var T=0;T<w/2;T++){var L=E[T];E[T]=E[w-T-1],E[w-T-1]=L,L=k[T],k[T]=-k[w-T-1],k[w-T-1]=-L}},v.prototype.normalize13b=function(E,k){for(var w=0,T=0;T<k/2;T++){var L=Math.round(E[2*T+1]/k)*8192+Math.round(E[2*T]/k)+w;E[T]=L&67108863,L<67108864?w=0:w=L/67108864|0}return E},v.prototype.convert13b=function(E,k,w,T){for(var L=0,I=0;I<k;I++)L=L+(E[I]|0),w[2*I]=L&8191,L=L>>>13,w[2*I+1]=L&8191,L=L>>>13;for(I=2*k;I<T;++I)w[I]=0;n(L===0),n((L&-8192)===0)},v.prototype.stub=function(E){for(var k=new Array(E),w=0;w<E;w++)k[w]=0;return k},v.prototype.mulp=function(E,k,w){var T=2*this.guessLen13b(E.length,k.length),L=this.makeRBT(T),I=this.stub(T),U=new Array(T),O=new Array(T),D=new Array(T),P=new Array(T),B=new Array(T),z=new Array(T),F=w.words;F.length=T,this.convert13b(E.words,E.length,U,T),this.convert13b(k.words,k.length,P,T),this.transform(U,I,O,D,T,L),this.transform(P,I,B,z,T,L);for(var X=0;X<T;X++){var W=O[X]*B[X]-D[X]*z[X];D[X]=O[X]*z[X]+D[X]*B[X],O[X]=W}return this.conjugate(O,D,T),this.transform(O,D,F,I,T,L),this.conjugate(F,I,T),this.normalize13b(F,T),w.negative=E.negative^k.negative,w.length=E.length+k.length,w.strip()},s.prototype.mul=function(E){var k=new s(null);return k.words=new Array(this.length+E.length),this.mulTo(E,k)},s.prototype.mulf=function(E){var k=new s(null);return k.words=new Array(this.length+E.length),y(this,E,k)},s.prototype.imul=function(E){return this.clone().mulTo(E,this)},s.prototype.imuln=function(E){n(typeof E=="number"),n(E<67108864);for(var k=0,w=0;w<this.length;w++){var T=(this.words[w]|0)*E,L=(T&67108863)+(k&67108863);k>>=26,k+=T/67108864|0,k+=L>>>26,this.words[w]=L&67108863}return k!==0&&(this.words[w]=k,this.length++),this},s.prototype.muln=function(E){return this.clone().imuln(E)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(E){var k=d(E);if(k.length===0)return new s(1);for(var w=this,T=0;T<k.length&&k[T]===0;T++,w=w.sqr());if(++T<k.length)for(var L=w.sqr();T<k.length;T++,L=L.sqr())k[T]!==0&&(w=w.mul(L));return w},s.prototype.iushln=function(E){n(typeof E=="number"&&E>=0);var k=E%26,w=(E-k)/26,T=67108863>>>26-k<<26-k,L;if(k!==0){var I=0;for(L=0;L<this.length;L++){var U=this.words[L]&T,O=(this.words[L]|0)-U<<k;this.words[L]=O|I,I=U>>>26-k}I&&(this.words[L]=I,this.length++)}if(w!==0){for(L=this.length-1;L>=0;L--)this.words[L+w]=this.words[L];for(L=0;L<w;L++)this.words[L]=0;this.length+=w}return this.strip()},s.prototype.ishln=function(E){return n(this.negative===0),this.iushln(E)},s.prototype.iushrn=function(E,k,w){n(typeof E=="number"&&E>=0);var T;k?T=(k-k%26)/26:T=0;var L=E%26,I=Math.min((E-L)/26,this.length),U=67108863^67108863>>>L<<L,O=w;if(T-=I,T=Math.max(0,T),O){for(var D=0;D<I;D++)O.words[D]=this.words[D];O.length=I}if(I!==0)if(this.length>I)for(this.length-=I,D=0;D<this.length;D++)this.words[D]=this.words[D+I];else this.words[0]=0,this.length=1;var P=0;for(D=this.length-1;D>=0&&(P!==0||D>=T);D--){var B=this.words[D]|0;this.words[D]=P<<26-L|B>>>L,P=B&U}return O&&P!==0&&(O.words[O.length++]=P),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},s.prototype.ishrn=function(E,k,w){return n(this.negative===0),this.iushrn(E,k,w)},s.prototype.shln=function(E){return this.clone().ishln(E)},s.prototype.ushln=function(E){return this.clone().iushln(E)},s.prototype.shrn=function(E){return this.clone().ishrn(E)},s.prototype.ushrn=function(E){return this.clone().iushrn(E)},s.prototype.testn=function(E){n(typeof E=="number"&&E>=0);var k=E%26,w=(E-k)/26,T=1<<k;if(this.length<=w)return!1;var L=this.words[w];return!!(L&T)},s.prototype.imaskn=function(E){n(typeof E=="number"&&E>=0);var k=E%26,w=(E-k)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=w)return this;if(k!==0&&w++,this.length=Math.min(w,this.length),k!==0){var T=67108863^67108863>>>k<<k;this.words[this.length-1]&=T}return this.strip()},s.prototype.maskn=function(E){return this.clone().imaskn(E)},s.prototype.iaddn=function(E){return n(typeof E=="number"),n(E<67108864),E<0?this.isubn(-E):this.negative!==0?this.length===1&&(this.words[0]|0)<E?(this.words[0]=E-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(E),this.negative=1,this):this._iaddn(E)},s.prototype._iaddn=function(E){this.words[0]+=E;for(var k=0;k<this.length&&this.words[k]>=67108864;k++)this.words[k]-=67108864,k===this.length-1?this.words[k+1]=1:this.words[k+1]++;return this.length=Math.max(this.length,k+1),this},s.prototype.isubn=function(E){if(n(typeof E=="number"),n(E<67108864),E<0)return this.iaddn(-E);if(this.negative!==0)return this.negative=0,this.iaddn(E),this.negative=1,this;if(this.words[0]-=E,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var k=0;k<this.length&&this.words[k]<0;k++)this.words[k]+=67108864,this.words[k+1]-=1;return this.strip()},s.prototype.addn=function(E){return this.clone().iaddn(E)},s.prototype.subn=function(E){return this.clone().isubn(E)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(E,k,w){var T=E.length+w,L;this._expand(T);var I,U=0;for(L=0;L<E.length;L++){I=(this.words[L+w]|0)+U;var O=(E.words[L]|0)*k;I-=O&67108863,U=(I>>26)-(O/67108864|0),this.words[L+w]=I&67108863}for(;L<this.length-w;L++)I=(this.words[L+w]|0)+U,U=I>>26,this.words[L+w]=I&67108863;if(U===0)return this.strip();for(n(U===-1),U=0,L=0;L<this.length;L++)I=-(this.words[L]|0)+U,U=I>>26,this.words[L]=I&67108863;return this.negative=1,this.strip()},s.prototype._wordDiv=function(E,k){var w=this.length-E.length,T=this.clone(),L=E,I=L.words[L.length-1]|0,U=this._countBits(I);w=26-U,w!==0&&(L=L.ushln(w),T.iushln(w),I=L.words[L.length-1]|0);var O=T.length-L.length,D;if(k!=="mod"){D=new s(null),D.length=O+1,D.words=new Array(D.length);for(var P=0;P<D.length;P++)D.words[P]=0}var B=T.clone()._ishlnsubmul(L,1,O);B.negative===0&&(T=B,D&&(D.words[O]=1));for(var z=O-1;z>=0;z--){var F=(T.words[L.length+z]|0)*67108864+(T.words[L.length+z-1]|0);for(F=Math.min(F/I|0,67108863),T._ishlnsubmul(L,F,z);T.negative!==0;)F--,T.negative=0,T._ishlnsubmul(L,1,z),T.isZero()||(T.negative^=1);D&&(D.words[z]=F)}return D&&D.strip(),T.strip(),k!=="div"&&w!==0&&T.iushrn(w),{div:D||null,mod:T}},s.prototype.divmod=function(E,k,w){if(n(!E.isZero()),this.isZero())return{div:new s(0),mod:new s(0)};var T,L,I;return this.negative!==0&&E.negative===0?(I=this.neg().divmod(E,k),k!=="mod"&&(T=I.div.neg()),k!=="div"&&(L=I.mod.neg(),w&&L.negative!==0&&L.iadd(E)),{div:T,mod:L}):this.negative===0&&E.negative!==0?(I=this.divmod(E.neg(),k),k!=="mod"&&(T=I.div.neg()),{div:T,mod:I.mod}):this.negative&E.negative?(I=this.neg().divmod(E.neg(),k),k!=="div"&&(L=I.mod.neg(),w&&L.negative!==0&&L.isub(E)),{div:I.div,mod:L}):E.length>this.length||this.cmp(E)<0?{div:new s(0),mod:this}:E.length===1?k==="div"?{div:this.divn(E.words[0]),mod:null}:k==="mod"?{div:null,mod:new s(this.modn(E.words[0]))}:{div:this.divn(E.words[0]),mod:new s(this.modn(E.words[0]))}:this._wordDiv(E,k)},s.prototype.div=function(E){return this.divmod(E,"div",!1).div},s.prototype.mod=function(E){return this.divmod(E,"mod",!1).mod},s.prototype.umod=function(E){return this.divmod(E,"mod",!0).mod},s.prototype.divRound=function(E){var k=this.divmod(E);if(k.mod.isZero())return k.div;var w=k.div.negative!==0?k.mod.isub(E):k.mod,T=E.ushrn(1),L=E.andln(1),I=w.cmp(T);return I<0||L===1&&I===0?k.div:k.div.negative!==0?k.div.isubn(1):k.div.iaddn(1)},s.prototype.modn=function(E){n(E<=67108863);for(var k=(1<<26)%E,w=0,T=this.length-1;T>=0;T--)w=(k*w+(this.words[T]|0))%E;return w},s.prototype.idivn=function(E){n(E<=67108863);for(var k=0,w=this.length-1;w>=0;w--){var T=(this.words[w]|0)+k*67108864;this.words[w]=T/E|0,k=T%E}return this.strip()},s.prototype.divn=function(E){return this.clone().idivn(E)},s.prototype.egcd=function(E){n(E.negative===0),n(!E.isZero());var k=this,w=E.clone();k.negative!==0?k=k.umod(E):k=k.clone();for(var T=new s(1),L=new s(0),I=new s(0),U=new s(1),O=0;k.isEven()&&w.isEven();)k.iushrn(1),w.iushrn(1),++O;for(var D=w.clone(),P=k.clone();!k.isZero();){for(var B=0,z=1;!(k.words[0]&z)&&B<26;++B,z<<=1);if(B>0)for(k.iushrn(B);B-- >0;)(T.isOdd()||L.isOdd())&&(T.iadd(D),L.isub(P)),T.iushrn(1),L.iushrn(1);for(var F=0,X=1;!(w.words[0]&X)&&F<26;++F,X<<=1);if(F>0)for(w.iushrn(F);F-- >0;)(I.isOdd()||U.isOdd())&&(I.iadd(D),U.isub(P)),I.iushrn(1),U.iushrn(1);k.cmp(w)>=0?(k.isub(w),T.isub(I),L.isub(U)):(w.isub(k),I.isub(T),U.isub(L))}return{a:I,b:U,gcd:w.iushln(O)}},s.prototype._invmp=function(E){n(E.negative===0),n(!E.isZero());var k=this,w=E.clone();k.negative!==0?k=k.umod(E):k=k.clone();for(var T=new s(1),L=new s(0),I=w.clone();k.cmpn(1)>0&&w.cmpn(1)>0;){for(var U=0,O=1;!(k.words[0]&O)&&U<26;++U,O<<=1);if(U>0)for(k.iushrn(U);U-- >0;)T.isOdd()&&T.iadd(I),T.iushrn(1);for(var D=0,P=1;!(w.words[0]&P)&&D<26;++D,P<<=1);if(D>0)for(w.iushrn(D);D-- >0;)L.isOdd()&&L.iadd(I),L.iushrn(1);k.cmp(w)>=0?(k.isub(w),T.isub(L)):(w.isub(k),L.isub(T))}var B;return k.cmpn(1)===0?B=T:B=L,B.cmpn(0)<0&&B.iadd(E),B},s.prototype.gcd=function(E){if(this.isZero())return E.abs();if(E.isZero())return this.abs();var k=this.clone(),w=E.clone();k.negative=0,w.negative=0;for(var T=0;k.isEven()&&w.isEven();T++)k.iushrn(1),w.iushrn(1);do{for(;k.isEven();)k.iushrn(1);for(;w.isEven();)w.iushrn(1);var L=k.cmp(w);if(L<0){var I=k;k=w,w=I}else if(L===0||w.cmpn(1)===0)break;k.isub(w)}while(!0);return w.iushln(T)},s.prototype.invm=function(E){return this.egcd(E).a.umod(E)},s.prototype.isEven=function(){return(this.words[0]&1)===0},s.prototype.isOdd=function(){return(this.words[0]&1)===1},s.prototype.andln=function(E){return this.words[0]&E},s.prototype.bincn=function(E){n(typeof E=="number");var k=E%26,w=(E-k)/26,T=1<<k;if(this.length<=w)return this._expand(w+1),this.words[w]|=T,this;for(var L=T,I=w;L!==0&&I<this.length;I++){var U=this.words[I]|0;U+=L,L=U>>>26,U&=67108863,this.words[I]=U}return L!==0&&(this.words[I]=L,this.length++),this},s.prototype.isZero=function(){return this.length===1&&this.words[0]===0},s.prototype.cmpn=function(E){var k=E<0;if(this.negative!==0&&!k)return-1;if(this.negative===0&&k)return 1;this.strip();var w;if(this.length>1)w=1;else{k&&(E=-E),n(E<=67108863,"Number is too big");var T=this.words[0]|0;w=T===E?0:T<E?-1:1}return this.negative!==0?-w|0:w},s.prototype.cmp=function(E){if(this.negative!==0&&E.negative===0)return-1;if(this.negative===0&&E.negative!==0)return 1;var k=this.ucmp(E);return this.negative!==0?-k|0:k},s.prototype.ucmp=function(E){if(this.length>E.length)return 1;if(this.length<E.length)return-1;for(var k=0,w=this.length-1;w>=0;w--){var T=this.words[w]|0,L=E.words[w]|0;if(T!==L){T<L?k=-1:T>L&&(k=1);break}}return k},s.prototype.gtn=function(E){return this.cmpn(E)===1},s.prototype.gt=function(E){return this.cmp(E)===1},s.prototype.gten=function(E){return this.cmpn(E)>=0},s.prototype.gte=function(E){return this.cmp(E)>=0},s.prototype.ltn=function(E){return this.cmpn(E)===-1},s.prototype.lt=function(E){return this.cmp(E)===-1},s.prototype.lten=function(E){return this.cmpn(E)<=0},s.prototype.lte=function(E){return this.cmp(E)<=0},s.prototype.eqn=function(E){return this.cmpn(E)===0},s.prototype.eq=function(E){return this.cmp(E)===0},s.red=function(E){return new N(E)},s.prototype.toRed=function(E){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),E.convertTo(this)._forceRed(E)},s.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(E){return this.red=E,this},s.prototype.forceRed=function(E){return n(!this.red,"Already a number in reduction context"),this._forceRed(E)},s.prototype.redAdd=function(E){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,E)},s.prototype.redIAdd=function(E){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,E)},s.prototype.redSub=function(E){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,E)},s.prototype.redISub=function(E){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,E)},s.prototype.redShl=function(E){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,E)},s.prototype.redMul=function(E){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,E),this.red.mul(this,E)},s.prototype.redIMul=function(E){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,E),this.red.imul(this,E)},s.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(E){return n(this.red&&!E.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,E)};var _={k256:null,p224:null,p192:null,p25519:null};function x(H,E){this.name=H,this.p=new s(E,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}x.prototype._tmp=function(){var E=new s(null);return E.words=new Array(Math.ceil(this.n/13)),E},x.prototype.ireduce=function(E){var k=E,w;do this.split(k,this.tmp),k=this.imulK(k),k=k.iadd(this.tmp),w=k.bitLength();while(w>this.n);var T=w<this.n?-1:k.ucmp(this.p);return T===0?(k.words[0]=0,k.length=1):T>0?k.isub(this.p):k.strip!==void 0?k.strip():k._strip(),k},x.prototype.split=function(E,k){E.iushrn(this.n,0,k)},x.prototype.imulK=function(E){return E.imul(this.k)};function A(){x.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}i(A,x),A.prototype.split=function(E,k){for(var w=4194303,T=Math.min(E.length,9),L=0;L<T;L++)k.words[L]=E.words[L];if(k.length=T,E.length<=9){E.words[0]=0,E.length=1;return}var I=E.words[9];for(k.words[k.length++]=I&w,L=10;L<E.length;L++){var U=E.words[L]|0;E.words[L-10]=(U&w)<<4|I>>>22,I=U}I>>>=22,E.words[L-10]=I,I===0&&E.length>10?E.length-=10:E.length-=9},A.prototype.imulK=function(E){E.words[E.length]=0,E.words[E.length+1]=0,E.length+=2;for(var k=0,w=0;w<E.length;w++){var T=E.words[w]|0;k+=T*977,E.words[w]=k&67108863,k=T*64+(k/67108864|0)}return E.words[E.length-1]===0&&(E.length--,E.words[E.length-1]===0&&E.length--),E};function C(){x.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}i(C,x);function R(){x.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}i(R,x);function M(){x.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}i(M,x),M.prototype.imulK=function(E){for(var k=0,w=0;w<E.length;w++){var T=(E.words[w]|0)*19+k,L=T&67108863;T>>>=26,E.words[w]=L,k=T}return k!==0&&(E.words[E.length++]=k),E},s._prime=function(E){if(_[E])return _[E];var k;if(E==="k256")k=new A;else if(E==="p224")k=new C;else if(E==="p192")k=new R;else if(E==="p25519")k=new M;else throw new Error("Unknown prime "+E);return _[E]=k,k};function N(H){if(typeof H=="string"){var E=s._prime(H);this.m=E.p,this.prime=E}else n(H.gtn(1),"modulus must be greater than 1"),this.m=H,this.prime=null}N.prototype._verify1=function(E){n(E.negative===0,"red works only with positives"),n(E.red,"red works only with red numbers")},N.prototype._verify2=function(E,k){n((E.negative|k.negative)===0,"red works only with positives"),n(E.red&&E.red===k.red,"red works only with red numbers")},N.prototype.imod=function(E){return this.prime?this.prime.ireduce(E)._forceRed(this):E.umod(this.m)._forceRed(this)},N.prototype.neg=function(E){return E.isZero()?E.clone():this.m.sub(E)._forceRed(this)},N.prototype.add=function(E,k){this._verify2(E,k);var w=E.add(k);return w.cmp(this.m)>=0&&w.isub(this.m),w._forceRed(this)},N.prototype.iadd=function(E,k){this._verify2(E,k);var w=E.iadd(k);return w.cmp(this.m)>=0&&w.isub(this.m),w},N.prototype.sub=function(E,k){this._verify2(E,k);var w=E.sub(k);return w.cmpn(0)<0&&w.iadd(this.m),w._forceRed(this)},N.prototype.isub=function(E,k){this._verify2(E,k);var w=E.isub(k);return w.cmpn(0)<0&&w.iadd(this.m),w},N.prototype.shl=function(E,k){return this._verify1(E),this.imod(E.ushln(k))},N.prototype.imul=function(E,k){return this._verify2(E,k),this.imod(E.imul(k))},N.prototype.mul=function(E,k){return this._verify2(E,k),this.imod(E.mul(k))},N.prototype.isqr=function(E){return this.imul(E,E.clone())},N.prototype.sqr=function(E){return this.mul(E,E)},N.prototype.sqrt=function(E){if(E.isZero())return E.clone();var k=this.m.andln(3);if(n(k%2===1),k===3){var w=this.m.add(new s(1)).iushrn(2);return this.pow(E,w)}for(var T=this.m.subn(1),L=0;!T.isZero()&&T.andln(1)===0;)L++,T.iushrn(1);n(!T.isZero());var I=new s(1).toRed(this),U=I.redNeg(),O=this.m.subn(1).iushrn(1),D=this.m.bitLength();for(D=new s(2*D*D).toRed(this);this.pow(D,O).cmp(U)!==0;)D.redIAdd(U);for(var P=this.pow(D,T),B=this.pow(E,T.addn(1).iushrn(1)),z=this.pow(E,T),F=L;z.cmp(I)!==0;){for(var X=z,W=0;X.cmp(I)!==0;W++)X=X.redSqr();n(W<F);var q=this.pow(P,new s(1).iushln(F-W-1));B=B.redMul(q),P=q.redSqr(),z=z.redMul(P),F=W}return B},N.prototype.invm=function(E){var k=E._invmp(this.m);return k.negative!==0?(k.negative=0,this.imod(k).redNeg()):this.imod(k)},N.prototype.pow=function(E,k){if(k.isZero())return new s(1).toRed(this);if(k.cmpn(1)===0)return E.clone();var w=4,T=new Array(1<<w);T[0]=new s(1).toRed(this),T[1]=E;for(var L=2;L<T.length;L++)T[L]=this.mul(T[L-1],E);var I=T[0],U=0,O=0,D=k.bitLength()%26;for(D===0&&(D=26),L=k.length-1;L>=0;L--){for(var P=k.words[L],B=D-1;B>=0;B--){var z=P>>B&1;if(I!==T[0]&&(I=this.sqr(I)),z===0&&U===0){O=0;continue}U<<=1,U|=z,O++,!(O!==w&&(L!==0||B!==0))&&(I=this.mul(I,T[U]),O=0,U=0)}D=26}return I},N.prototype.convertTo=function(E){var k=E.umod(this.m);return k===E?k.clone():k},N.prototype.convertFrom=function(E){var k=E.clone();return k.red=null,k},s.mont=function(E){return new Y(E)};function Y(H){N.call(this,H),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}i(Y,N),Y.prototype.convertTo=function(E){return this.imod(E.ushln(this.shift))},Y.prototype.convertFrom=function(E){var k=this.imod(E.mul(this.rinv));return k.red=null,k},Y.prototype.imul=function(E,k){if(E.isZero()||k.isZero())return E.words[0]=0,E.length=1,E;var w=E.imul(k),T=w.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),L=w.isub(T).iushrn(this.shift),I=L;return L.cmp(this.m)>=0?I=L.isub(this.m):L.cmpn(0)<0&&(I=L.iadd(this.m)),I._forceRed(this)},Y.prototype.mul=function(E,k){if(E.isZero()||k.isZero())return new s(0)._forceRed(this);var w=E.mul(k),T=w.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),L=w.isub(T).iushrn(this.shift),I=L;return L.cmp(this.m)>=0?I=L.isub(this.m):L.cmpn(0)<0&&(I=L.iadd(this.m)),I._forceRed(this)},Y.prototype.invm=function(E){var k=this.imod(E._invmp(this.m).mul(this.r2));return k._forceRed(this)}})(t,It)}(Vx)),Vx.exports}var u5={exports:{}},KQ;function mU(){if(KQ)return u5.exports;KQ=1;var t;u5.exports=function(i){return t||(t=new e(null)),t.generate(i)};function e(n){this.rand=n}if(u5.exports.Rand=e,e.prototype.generate=function(i){return this._rand(i)},e.prototype._rand=function(i){if(this.rand.getBytes)return this.rand.getBytes(i);for(var s=new Uint8Array(i),a=0;a<s.length;a++)s[a]=this.rand.getByte();return s},typeof self=="object")self.crypto&&self.crypto.getRandomValues?e.prototype._rand=function(i){var s=new Uint8Array(i);return self.crypto.getRandomValues(s),s}:self.msCrypto&&self.msCrypto.getRandomValues?e.prototype._rand=function(i){var s=new Uint8Array(i);return self.msCrypto.getRandomValues(s),s}:typeof window=="object"&&(e.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var r=V6();if(typeof r.randomBytes!="function")throw new Error("Not supported");e.prototype._rand=function(i){return r.randomBytes(i)}}catch{}return u5.exports}var NR,GQ;function U1e(){if(GQ)return NR;GQ=1;var t=za(),e=mU();function r(n){this.rand=n||new e.Rand}return NR=r,r.create=function(i){return new r(i)},r.prototype._randbelow=function(i){var s=i.bitLength(),a=Math.ceil(s/8);do var o=new t(this.rand.generate(a));while(o.cmp(i)>=0);return o},r.prototype._randrange=function(i,s){var a=s.sub(i);return i.add(this._randbelow(a))},r.prototype.test=function(i,s,a){var o=i.bitLength(),c=t.mont(i),l=new t(1).toRed(c);s||(s=Math.max(1,o/48|0));for(var u=i.subn(1),f=0;!u.testn(f);f++);for(var h=i.shrn(f),d=u.toRed(c),g=!0;s>0;s--){var p=this._randrange(new t(2),u);a&&a(p);var m=p.toRed(c).redPow(h);if(!(m.cmp(l)===0||m.cmp(d)===0)){for(var y=1;y<f;y++){if(m=m.redSqr(),m.cmp(l)===0)return!1;if(m.cmp(d)===0)break}if(y===f)return!1}}return g},r.prototype.getDivisor=function(i,s){var a=i.bitLength(),o=t.mont(i),c=new t(1).toRed(o);s||(s=Math.max(1,a/48|0));for(var l=i.subn(1),u=0;!l.testn(u);u++);for(var f=i.shrn(u),h=l.toRed(o);s>0;s--){var d=this._randrange(new t(2),l),g=i.gcd(d);if(g.cmpn(1)!==0)return g;var p=d.toRed(o).redPow(f);if(!(p.cmp(c)===0||p.cmp(h)===0)){for(var m=1;m<u;m++){if(p=p.redSqr(),p.cmp(c)===0)return p.fromRed().subn(1).gcd(i);if(p.cmp(h)===0)break}if(m===u)return p=p.redSqr(),p.fromRed().subn(1).gcd(i)}}return!1},NR}var MR,YQ;function V1e(){if(YQ)return MR;YQ=1;var t=gb();MR=m,m.simpleSieve=g,m.fermatTest=p;var e=za(),r=new e(24),n=U1e(),i=new n,s=new e(1),a=new e(2),o=new e(5);new e(16),new e(8);var c=new e(10),l=new e(3);new e(7);var u=new e(11),f=new e(4);new e(12);var h=null;function d(){if(h!==null)return h;var y=1048576,v=[];v[0]=2;for(var _=1,x=3;x<y;x+=2){for(var A=Math.ceil(Math.sqrt(x)),C=0;C<_&&v[C]<=A&&x%v[C]!==0;C++);_!==C&&v[C]<=A||(v[_++]=x)}return h=v,v}function g(y){for(var v=d(),_=0;_<v.length;_++)if(y.modn(v[_])===0)return y.cmpn(v[_])===0;return!0}function p(y){var v=e.mont(y);return a.toRed(v).redPow(y.subn(1)).fromRed().cmpn(1)===0}function m(y,v){if(y<16)return v===2||v===5?new e([140,123]):new e([140,39]);v=new e(v);for(var _,x;;){for(_=new e(t(Math.ceil(y/8)));_.bitLength()>y;)_.ishrn(1);if(_.isEven()&&_.iadd(s),_.testn(1)||_.iadd(a),v.cmp(a)){if(!v.cmp(o))for(;_.mod(c).cmp(l);)_.iadd(f)}else for(;_.mod(r).cmp(u);)_.iadd(f);if(x=_.shrn(1),g(x)&&g(_)&&p(x)&&p(_)&&i.test(x)&&i.test(_))return _}}return MR}const gct={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a3620ffffffffffffffff"},mct={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece65381ffffffffffffffff"},yct={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca237327ffffffffffffffff"},vct={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aacaa68ffffffffffffffff"},bct={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a93ad2caffffffffffffffff"},wct={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c934063199ffffffffffffffff"},_ct={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dcc4024ffffffffffffffff"},xct={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dbe115974a3926f12fee5e438777cb6a932df8cd8bec4d073b931ba3bc832b68d9dd300741fa7bf8afc47ed2576f6936ba424663aab639c5ae4f5683423b4742bf1c978238f16cbe39d652de3fdb8befc848ad922222e04a4037c0713eb57a81a23f0c73473fc646cea306b4bcbc8862f8385ddfa9d4b7fa2c087e879683303ed5bdd3a062b3cf5b3a278a66d2a13f83f44f82ddf310ee074ab6a364597e899a0255dc164f31cc50846851df9ab48195ded7ea1b1d510bd7ee74d73faf36bc31ecfa268359046f4eb879f924009438b481c6cd7889a002ed5ee382bc9190da6fc026e479558e4475677e9aa9e3050e2765694dfc81f56e880b96e7160c980dd98edd3dfffffffffffffffff"},Ect={modp1:gct,modp2:mct,modp5:yct,modp14:vct,modp15:bct,modp16:wct,modp17:_ct,modp18:xct};var LR,XQ;function Sct(){if(XQ)return LR;XQ=1;var t=za(),e=U1e(),r=new e,n=new t(24),i=new t(11),s=new t(10),a=new t(3),o=new t(7),c=V1e(),l=gb();LR=g;function u(m,y){return y=y||"utf8",We.isBuffer(m)||(m=new We(m,y)),this._pub=new t(m),this}function f(m,y){return y=y||"utf8",We.isBuffer(m)||(m=new We(m,y)),this._priv=new t(m),this}var h={};function d(m,y){var v=y.toString("hex"),_=[v,m.toString(16)].join("_");if(_ in h)return h[_];var x=0;if(m.isEven()||!c.simpleSieve||!c.fermatTest(m)||!r.test(m))return x+=1,v==="02"||v==="05"?x+=8:x+=4,h[_]=x,x;r.test(m.shrn(1))||(x+=2);var A;switch(v){case"02":m.mod(n).cmp(i)&&(x+=8);break;case"05":A=m.mod(s),A.cmp(a)&&A.cmp(o)&&(x+=8);break;default:x+=4}return h[_]=x,x}function g(m,y,v){this.setGenerator(y),this.__prime=new t(m),this._prime=t.mont(this.__prime),this._primeLen=m.length,this._pub=void 0,this._priv=void 0,this._primeCode=void 0,v?(this.setPublicKey=u,this.setPrivateKey=f):this._primeCode=8}Object.defineProperty(g.prototype,"verifyError",{enumerable:!0,get:function(){return typeof this._primeCode!="number"&&(this._primeCode=d(this.__prime,this.__gen)),this._primeCode}}),g.prototype.generateKeys=function(){return this._priv||(this._priv=new t(l(this._primeLen))),this._pub=this._gen.toRed(this._prime).redPow(this._priv).fromRed(),this.getPublicKey()},g.prototype.computeSecret=function(m){m=new t(m),m=m.toRed(this._prime);var y=m.redPow(this._priv).fromRed(),v=new We(y.toArray()),_=this.getPrime();if(v.length<_.length){var x=new We(_.length-v.length);x.fill(0),v=We.concat([x,v])}return v},g.prototype.getPublicKey=function(y){return p(this._pub,y)},g.prototype.getPrivateKey=function(y){return p(this._priv,y)},g.prototype.getPrime=function(m){return p(this.__prime,m)},g.prototype.getGenerator=function(m){return p(this._gen,m)},g.prototype.setGenerator=function(m,y){return y=y||"utf8",We.isBuffer(m)||(m=new We(m,y)),this.__gen=m,this._gen=new t(m),this};function p(m,y){var v=new We(m.toArray());return y?v.toString(y):v}return LR}var ZQ;function Act(){if(ZQ)return Fp;ZQ=1;var t=V1e(),e=Ect,r=Sct();function n(a){var o=new We(e[a].prime,"hex"),c=new We(e[a].gen,"hex");return new r(o,c)}var i={binary:!0,hex:!0,base64:!0};function s(a,o,c,l){return We.isBuffer(o)||i[o]===void 0?s(a,"binary",o,c):(o=o||"binary",l=l||"binary",c=c||new We([2]),We.isBuffer(c)||(c=new We(c,l)),typeof a=="number"?new r(t(a,c),c,!0):(We.isBuffer(a)||(a=new We(a,o)),new r(a,c,!0)))}return Fp.DiffieHellmanGroup=Fp.createDiffieHellmanGroup=Fp.getDiffieHellman=n,Fp.createDiffieHellman=Fp.DiffieHellman=s,Fp}var f5={exports:{}},h5={exports:{}},JQ;function gA(){if(JQ)return h5.exports;JQ=1,typeof Et>"u"||!Et.version||Et.version.indexOf("v0.")===0||Et.version.indexOf("v1.")===0&&Et.version.indexOf("v1.8.")!==0?h5.exports={nextTick:t}:h5.exports=Et;function t(e,r,n,i){if(typeof e!="function")throw new TypeError('"callback" argument must be a function');var s=arguments.length,a,o;switch(s){case 0:case 1:return Et.nextTick(e);case 2:return Et.nextTick(function(){e.call(null,r)});case 3:return Et.nextTick(function(){e.call(null,r,n)});case 4:return Et.nextTick(function(){e.call(null,r,n,i)});default:for(a=new Array(s-1),o=0;o<a.length;)a[o++]=arguments[o];return Et.nextTick(function(){e.apply(null,a)})}}return h5.exports}var FR,QQ;function Tct(){if(QQ)return FR;QQ=1;var t={}.toString;return FR=Array.isArray||function(e){return t.call(e)=="[object Array]"},FR}var $R,eee;function j1e(){return eee||(eee=1,$R=qi.EventEmitter),$R}var Aa={},tee;function F6(){if(tee)return Aa;tee=1;function t(p){return Array.isArray?Array.isArray(p):g(p)==="[object Array]"}Aa.isArray=t;function e(p){return typeof p=="boolean"}Aa.isBoolean=e;function r(p){return p===null}Aa.isNull=r;function n(p){return p==null}Aa.isNullOrUndefined=n;function i(p){return typeof p=="number"}Aa.isNumber=i;function s(p){return typeof p=="string"}Aa.isString=s;function a(p){return typeof p=="symbol"}Aa.isSymbol=a;function o(p){return p===void 0}Aa.isUndefined=o;function c(p){return g(p)==="[object RegExp]"}Aa.isRegExp=c;function l(p){return typeof p=="object"&&p!==null}Aa.isObject=l;function u(p){return g(p)==="[object Date]"}Aa.isDate=u;function f(p){return g(p)==="[object Error]"||p instanceof Error}Aa.isError=f;function h(p){return typeof p=="function"}Aa.isFunction=h;function d(p){return p===null||typeof p=="boolean"||typeof p=="number"||typeof p=="string"||typeof p=="symbol"||typeof p>"u"}Aa.isPrimitive=d,Aa.isBuffer=Es.Buffer.isBuffer;function g(p){return Object.prototype.toString.call(p)}return Aa}var UR={exports:{}},ree;function kct(){return ree||(ree=1,function(t){function e(s,a){if(!(s instanceof a))throw new TypeError("Cannot call a class as a function")}var r=fA.Buffer,n=rp;function i(s,a,o){s.copy(a,o)}t.exports=function(){function s(){e(this,s),this.head=null,this.tail=null,this.length=0}return s.prototype.push=function(o){var c={data:o,next:null};this.length>0?this.tail.next=c:this.head=c,this.tail=c,++this.length},s.prototype.unshift=function(o){var c={data:o,next:this.head};this.length===0&&(this.tail=c),this.head=c,++this.length},s.prototype.shift=function(){if(this.length!==0){var o=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,o}},s.prototype.clear=function(){this.head=this.tail=null,this.length=0},s.prototype.join=function(o){if(this.length===0)return"";for(var c=this.head,l=""+c.data;c=c.next;)l+=o+c.data;return l},s.prototype.concat=function(o){if(this.length===0)return r.alloc(0);for(var c=r.allocUnsafe(o>>>0),l=this.head,u=0;l;)i(l.data,c,u),u+=l.data.length,l=l.next;return c},s}(),n&&n.inspect&&n.inspect.custom&&(t.exports.prototype[n.inspect.custom]=function(){var s=n.inspect({length:this.length});return this.constructor.name+" "+s})}(UR)),UR.exports}var VR,nee;function z1e(){if(nee)return VR;nee=1;var t=gA();function e(i,s){var a=this,o=this._readableState&&this._readableState.destroyed,c=this._writableState&&this._writableState.destroyed;return o||c?(s?s(i):i&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,t.nextTick(n,this,i)):t.nextTick(n,this,i)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(i||null,function(l){!s&&l?a._writableState?a._writableState.errorEmitted||(a._writableState.errorEmitted=!0,t.nextTick(n,a,l)):t.nextTick(n,a,l):s&&s(l)}),this)}function r(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function n(i,s){i.emit("error",s)}return VR={destroy:e,undestroy:r},VR}var jR,iee;function q1e(){if(iee)return jR;iee=1;var t=gA();jR=p;function e(I){var U=this;this.next=null,this.entry=null,this.finish=function(){L(U,I)}}var r=!Et.browser&&["v0.10","v0.9."].indexOf(Et.version.slice(0,5))>-1?setImmediate:t.nextTick,n;p.WritableState=d;var i=Object.create(F6());i.inherits=xr;var s={deprecate:o1e()},a=j1e(),o=fA.Buffer,c=(typeof It<"u"?It:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function l(I){return o.from(I)}function u(I){return o.isBuffer(I)||I instanceof c}var f=z1e();i.inherits(p,a);function h(){}function d(I,U){n=n||sv(),I=I||{};var O=U instanceof n;this.objectMode=!!I.objectMode,O&&(this.objectMode=this.objectMode||!!I.writableObjectMode);var D=I.highWaterMark,P=I.writableHighWaterMark,B=this.objectMode?16:16*1024;D||D===0?this.highWaterMark=D:O&&(P||P===0)?this.highWaterMark=P:this.highWaterMark=B,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var z=I.decodeStrings===!1;this.decodeStrings=!z,this.defaultEncoding=I.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(F){R(U,F)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new e(this)}d.prototype.getBuffer=function(){for(var U=this.bufferedRequest,O=[];U;)O.push(U),U=U.next;return O},function(){try{Object.defineProperty(d.prototype,"buffer",{get:s.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var g;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(g=Function.prototype[Symbol.hasInstance],Object.defineProperty(p,Symbol.hasInstance,{value:function(I){return g.call(this,I)?!0:this!==p?!1:I&&I._writableState instanceof d}})):g=function(I){return I instanceof this};function p(I){if(n=n||sv(),!g.call(p,this)&&!(this instanceof n))return new p(I);this._writableState=new d(I,this),this.writable=!0,I&&(typeof I.write=="function"&&(this._write=I.write),typeof I.writev=="function"&&(this._writev=I.writev),typeof I.destroy=="function"&&(this._destroy=I.destroy),typeof I.final=="function"&&(this._final=I.final)),a.call(this)}p.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))};function m(I,U){var O=new Error("write after end");I.emit("error",O),t.nextTick(U,O)}function y(I,U,O,D){var P=!0,B=!1;return O===null?B=new TypeError("May not write null values to stream"):typeof O!="string"&&O!==void 0&&!U.objectMode&&(B=new TypeError("Invalid non-string/buffer chunk")),B&&(I.emit("error",B),t.nextTick(D,B),P=!1),P}p.prototype.write=function(I,U,O){var D=this._writableState,P=!1,B=!D.objectMode&&u(I);return B&&!o.isBuffer(I)&&(I=l(I)),typeof U=="function"&&(O=U,U=null),B?U="buffer":U||(U=D.defaultEncoding),typeof O!="function"&&(O=h),D.ended?m(this,O):(B||y(this,D,I,O))&&(D.pendingcb++,P=_(this,D,B,I,U,O)),P},p.prototype.cork=function(){var I=this._writableState;I.corked++},p.prototype.uncork=function(){var I=this._writableState;I.corked&&(I.corked--,!I.writing&&!I.corked&&!I.bufferProcessing&&I.bufferedRequest&&Y(this,I))},p.prototype.setDefaultEncoding=function(U){if(typeof U=="string"&&(U=U.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((U+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+U);return this._writableState.defaultEncoding=U,this};function v(I,U,O){return!I.objectMode&&I.decodeStrings!==!1&&typeof U=="string"&&(U=o.from(U,O)),U}Object.defineProperty(p.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function _(I,U,O,D,P,B){if(!O){var z=v(U,D,P);D!==z&&(O=!0,P="buffer",D=z)}var F=U.objectMode?1:D.length;U.length+=F;var X=U.length<U.highWaterMark;if(X||(U.needDrain=!0),U.writing||U.corked){var W=U.lastBufferedRequest;U.lastBufferedRequest={chunk:D,encoding:P,isBuf:O,callback:B,next:null},W?W.next=U.lastBufferedRequest:U.bufferedRequest=U.lastBufferedRequest,U.bufferedRequestCount+=1}else x(I,U,!1,F,D,P,B);return X}function x(I,U,O,D,P,B,z){U.writelen=D,U.writecb=z,U.writing=!0,U.sync=!0,O?I._writev(P,U.onwrite):I._write(P,B,U.onwrite),U.sync=!1}function A(I,U,O,D,P){--U.pendingcb,O?(t.nextTick(P,D),t.nextTick(w,I,U),I._writableState.errorEmitted=!0,I.emit("error",D)):(P(D),I._writableState.errorEmitted=!0,I.emit("error",D),w(I,U))}function C(I){I.writing=!1,I.writecb=null,I.length-=I.writelen,I.writelen=0}function R(I,U){var O=I._writableState,D=O.sync,P=O.writecb;if(C(O),U)A(I,O,D,U,P);else{var B=H(O);!B&&!O.corked&&!O.bufferProcessing&&O.bufferedRequest&&Y(I,O),D?r(M,I,O,B,P):M(I,O,B,P)}}function M(I,U,O,D){O||N(I,U),U.pendingcb--,D(),w(I,U)}function N(I,U){U.length===0&&U.needDrain&&(U.needDrain=!1,I.emit("drain"))}function Y(I,U){U.bufferProcessing=!0;var O=U.bufferedRequest;if(I._writev&&O&&O.next){var D=U.bufferedRequestCount,P=new Array(D),B=U.corkedRequestsFree;B.entry=O;for(var z=0,F=!0;O;)P[z]=O,O.isBuf||(F=!1),O=O.next,z+=1;P.allBuffers=F,x(I,U,!0,U.length,P,"",B.finish),U.pendingcb++,U.lastBufferedRequest=null,B.next?(U.corkedRequestsFree=B.next,B.next=null):U.corkedRequestsFree=new e(U),U.bufferedRequestCount=0}else{for(;O;){var X=O.chunk,W=O.encoding,q=O.callback,G=U.objectMode?1:X.length;if(x(I,U,!1,G,X,W,q),O=O.next,U.bufferedRequestCount--,U.writing)break}O===null&&(U.lastBufferedRequest=null)}U.bufferedRequest=O,U.bufferProcessing=!1}p.prototype._write=function(I,U,O){O(new Error("_write() is not implemented"))},p.prototype._writev=null,p.prototype.end=function(I,U,O){var D=this._writableState;typeof I=="function"?(O=I,I=null,U=null):typeof U=="function"&&(O=U,U=null),I!=null&&this.write(I,U),D.corked&&(D.corked=1,this.uncork()),D.ending||T(this,D,O)};function H(I){return I.ending&&I.length===0&&I.bufferedRequest===null&&!I.finished&&!I.writing}function E(I,U){I._final(function(O){U.pendingcb--,O&&I.emit("error",O),U.prefinished=!0,I.emit("prefinish"),w(I,U)})}function k(I,U){!U.prefinished&&!U.finalCalled&&(typeof I._final=="function"?(U.pendingcb++,U.finalCalled=!0,t.nextTick(E,I,U)):(U.prefinished=!0,I.emit("prefinish")))}function w(I,U){var O=H(U);return O&&(k(I,U),U.pendingcb===0&&(U.finished=!0,I.emit("finish"))),O}function T(I,U,O){U.ending=!0,w(I,U),O&&(U.finished?t.nextTick(O):I.once("finish",O)),U.ended=!0,I.writable=!1}function L(I,U,O){var D=I.entry;for(I.entry=null;D;){var P=D.callback;U.pendingcb--,P(O),D=D.next}U.corkedRequestsFree.next=I}return Object.defineProperty(p.prototype,"destroyed",{get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(I){this._writableState&&(this._writableState.destroyed=I)}}),p.prototype.destroy=f.destroy,p.prototype._undestroy=f.undestroy,p.prototype._destroy=function(I,U){this.end(),U(I)},jR}var zR,see;function sv(){if(see)return zR;see=1;var t=gA(),e=Object.keys||function(f){var h=[];for(var d in f)h.push(d);return h};zR=c;var r=Object.create(F6());r.inherits=xr;var n=H1e(),i=q1e();r.inherits(c,n);for(var s=e(i.prototype),a=0;a<s.length;a++){var o=s[a];c.prototype[o]||(c.prototype[o]=i.prototype[o])}function c(f){if(!(this instanceof c))return new c(f);n.call(this,f),i.call(this,f),f&&f.readable===!1&&(this.readable=!1),f&&f.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,f&&f.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",l)}Object.defineProperty(c.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function l(){this.allowHalfOpen||this._writableState.ended||t.nextTick(u,this)}function u(f){f.end()}return Object.defineProperty(c.prototype,"destroyed",{get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(f){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=f,this._writableState.destroyed=f)}}),c.prototype._destroy=function(f,h){this.push(null),this.end(),t.nextTick(h,f)},zR}var qR,aee;function H1e(){if(aee)return qR;aee=1;var t=gA();qR=v;var e=Tct(),r;v.ReadableState=y,qi.EventEmitter;var n=function(q,G){return q.listeners(G).length},i=j1e(),s=fA.Buffer,a=(typeof It<"u"?It:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function o(q){return s.from(q)}function c(q){return s.isBuffer(q)||q instanceof a}var l=Object.create(F6());l.inherits=xr;var u=rp,f=void 0;u&&u.debuglog?f=u.debuglog("stream"):f=function(){};var h=kct(),d=z1e(),g;l.inherits(v,i);var p=["error","close","destroy","pause","resume"];function m(q,G,ee){if(typeof q.prependListener=="function")return q.prependListener(G,ee);!q._events||!q._events[G]?q.on(G,ee):e(q._events[G])?q._events[G].unshift(ee):q._events[G]=[ee,q._events[G]]}function y(q,G){r=r||sv(),q=q||{};var ee=G instanceof r;this.objectMode=!!q.objectMode,ee&&(this.objectMode=this.objectMode||!!q.readableObjectMode);var ae=q.highWaterMark,te=q.readableHighWaterMark,K=this.objectMode?16:16*1024;ae||ae===0?this.highWaterMark=ae:ee&&(te||te===0)?this.highWaterMark=te:this.highWaterMark=K,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new h,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=q.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,q.encoding&&(g||(g=EE.StringDecoder),this.decoder=new g(q.encoding),this.encoding=q.encoding)}function v(q){if(r=r||sv(),!(this instanceof v))return new v(q);this._readableState=new y(q,this),this.readable=!0,q&&(typeof q.read=="function"&&(this._read=q.read),typeof q.destroy=="function"&&(this._destroy=q.destroy)),i.call(this)}Object.defineProperty(v.prototype,"destroyed",{get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(q){this._readableState&&(this._readableState.destroyed=q)}}),v.prototype.destroy=d.destroy,v.prototype._undestroy=d.undestroy,v.prototype._destroy=function(q,G){this.push(null),G(q)},v.prototype.push=function(q,G){var ee=this._readableState,ae;return ee.objectMode?ae=!0:typeof q=="string"&&(G=G||ee.defaultEncoding,G!==ee.encoding&&(q=s.from(q,G),G=""),ae=!0),_(this,q,G,!1,ae)},v.prototype.unshift=function(q){return _(this,q,null,!0,!1)};function _(q,G,ee,ae,te){var K=q._readableState;if(G===null)K.reading=!1,Y(q,K);else{var re;te||(re=A(K,G)),re?q.emit("error",re):K.objectMode||G&&G.length>0?(typeof G!="string"&&!K.objectMode&&Object.getPrototypeOf(G)!==s.prototype&&(G=o(G)),ae?K.endEmitted?q.emit("error",new Error("stream.unshift() after end event")):x(q,K,G,!0):K.ended?q.emit("error",new Error("stream.push() after EOF")):(K.reading=!1,K.decoder&&!ee?(G=K.decoder.write(G),K.objectMode||G.length!==0?x(q,K,G,!1):k(q,K)):x(q,K,G,!1))):ae||(K.reading=!1)}return C(K)}function x(q,G,ee,ae){G.flowing&&G.length===0&&!G.sync?(q.emit("data",ee),q.read(0)):(G.length+=G.objectMode?1:ee.length,ae?G.buffer.unshift(ee):G.buffer.push(ee),G.needReadable&&H(q)),k(q,G)}function A(q,G){var ee;return!c(G)&&typeof G!="string"&&G!==void 0&&!q.objectMode&&(ee=new TypeError("Invalid non-string/buffer chunk")),ee}function C(q){return!q.ended&&(q.needReadable||q.length<q.highWaterMark||q.length===0)}v.prototype.isPaused=function(){return this._readableState.flowing===!1},v.prototype.setEncoding=function(q){return g||(g=EE.StringDecoder),this._readableState.decoder=new g(q),this._readableState.encoding=q,this};var R=8388608;function M(q){return q>=R?q=R:(q--,q|=q>>>1,q|=q>>>2,q|=q>>>4,q|=q>>>8,q|=q>>>16,q++),q}function N(q,G){return q<=0||G.length===0&&G.ended?0:G.objectMode?1:q!==q?G.flowing&&G.length?G.buffer.head.data.length:G.length:(q>G.highWaterMark&&(G.highWaterMark=M(q)),q<=G.length?q:G.ended?G.length:(G.needReadable=!0,0))}v.prototype.read=function(q){f("read",q),q=parseInt(q,10);var G=this._readableState,ee=q;if(q!==0&&(G.emittedReadable=!1),q===0&&G.needReadable&&(G.length>=G.highWaterMark||G.ended))return f("read: emitReadable",G.length,G.ended),G.length===0&&G.ended?F(this):H(this),null;if(q=N(q,G),q===0&&G.ended)return G.length===0&&F(this),null;var ae=G.needReadable;f("need readable",ae),(G.length===0||G.length-q<G.highWaterMark)&&(ae=!0,f("length less than watermark",ae)),G.ended||G.reading?(ae=!1,f("reading or ended",ae)):ae&&(f("do read"),G.reading=!0,G.sync=!0,G.length===0&&(G.needReadable=!0),this._read(G.highWaterMark),G.sync=!1,G.reading||(q=N(ee,G)));var te;return q>0?te=D(q,G):te=null,te===null?(G.needReadable=!0,q=0):G.length-=q,G.length===0&&(G.ended||(G.needReadable=!0),ee!==q&&G.ended&&F(this)),te!==null&&this.emit("data",te),te};function Y(q,G){if(!G.ended){if(G.decoder){var ee=G.decoder.end();ee&&ee.length&&(G.buffer.push(ee),G.length+=G.objectMode?1:ee.length)}G.ended=!0,H(q)}}function H(q){var G=q._readableState;G.needReadable=!1,G.emittedReadable||(f("emitReadable",G.flowing),G.emittedReadable=!0,G.sync?t.nextTick(E,q):E(q))}function E(q){f("emit readable"),q.emit("readable"),O(q)}function k(q,G){G.readingMore||(G.readingMore=!0,t.nextTick(w,q,G))}function w(q,G){for(var ee=G.length;!G.reading&&!G.flowing&&!G.ended&&G.length<G.highWaterMark&&(f("maybeReadMore read 0"),q.read(0),ee!==G.length);)ee=G.length;G.readingMore=!1}v.prototype._read=function(q){this.emit("error",new Error("_read() is not implemented"))},v.prototype.pipe=function(q,G){var ee=this,ae=this._readableState;switch(ae.pipesCount){case 0:ae.pipes=q;break;case 1:ae.pipes=[ae.pipes,q];break;default:ae.pipes.push(q);break}ae.pipesCount+=1,f("pipe count=%d opts=%j",ae.pipesCount,G);var te=(!G||G.end!==!1)&&q!==Et.stdout&&q!==Et.stderr,K=te?V:Pe;ae.endEmitted?t.nextTick(K):ee.once("end",K),q.on("unpipe",re);function re(Ce,Ie){f("onunpipe"),Ce===ee&&Ie&&Ie.hasUnpiped===!1&&(Ie.hasUnpiped=!0,ne())}function V(){f("onend"),q.end()}var oe=T(ee);q.on("drain",oe);var he=!1;function ne(){f("cleanup"),q.removeListener("close",Ee),q.removeListener("finish",ge),q.removeListener("drain",oe),q.removeListener("error",ve),q.removeListener("unpipe",re),ee.removeListener("end",V),ee.removeListener("end",Pe),ee.removeListener("data",ce),he=!0,ae.awaitDrain&&(!q._writableState||q._writableState.needDrain)&&oe()}var ie=!1;ee.on("data",ce);function ce(Ce){f("ondata"),ie=!1;var Ie=q.write(Ce);Ie===!1&&!ie&&((ae.pipesCount===1&&ae.pipes===q||ae.pipesCount>1&&W(ae.pipes,q)!==-1)&&!he&&(f("false write response, pause",ae.awaitDrain),ae.awaitDrain++,ie=!0),ee.pause())}function ve(Ce){f("onerror",Ce),Pe(),q.removeListener("error",ve),n(q,"error")===0&&q.emit("error",Ce)}m(q,"error",ve);function Ee(){q.removeListener("finish",ge),Pe()}q.once("close",Ee);function ge(){f("onfinish"),q.removeListener("close",Ee),Pe()}q.once("finish",ge);function Pe(){f("unpipe"),ee.unpipe(q)}return q.emit("pipe",ee),ae.flowing||(f("pipe resume"),ee.resume()),q};function T(q){return function(){var G=q._readableState;f("pipeOnDrain",G.awaitDrain),G.awaitDrain&&G.awaitDrain--,G.awaitDrain===0&&n(q,"data")&&(G.flowing=!0,O(q))}}v.prototype.unpipe=function(q){var G=this._readableState,ee={hasUnpiped:!1};if(G.pipesCount===0)return this;if(G.pipesCount===1)return q&&q!==G.pipes?this:(q||(q=G.pipes),G.pipes=null,G.pipesCount=0,G.flowing=!1,q&&q.emit("unpipe",this,ee),this);if(!q){var ae=G.pipes,te=G.pipesCount;G.pipes=null,G.pipesCount=0,G.flowing=!1;for(var K=0;K<te;K++)ae[K].emit("unpipe",this,{hasUnpiped:!1});return this}var re=W(G.pipes,q);return re===-1?this:(G.pipes.splice(re,1),G.pipesCount-=1,G.pipesCount===1&&(G.pipes=G.pipes[0]),q.emit("unpipe",this,ee),this)},v.prototype.on=function(q,G){var ee=i.prototype.on.call(this,q,G);if(q==="data")this._readableState.flowing!==!1&&this.resume();else if(q==="readable"){var ae=this._readableState;!ae.endEmitted&&!ae.readableListening&&(ae.readableListening=ae.needReadable=!0,ae.emittedReadable=!1,ae.reading?ae.length&&H(this):t.nextTick(L,this))}return ee},v.prototype.addListener=v.prototype.on;function L(q){f("readable nexttick read 0"),q.read(0)}v.prototype.resume=function(){var q=this._readableState;return q.flowing||(f("resume"),q.flowing=!0,I(this,q)),this};function I(q,G){G.resumeScheduled||(G.resumeScheduled=!0,t.nextTick(U,q,G))}function U(q,G){G.reading||(f("resume read 0"),q.read(0)),G.resumeScheduled=!1,G.awaitDrain=0,q.emit("resume"),O(q),G.flowing&&!G.reading&&q.read(0)}v.prototype.pause=function(){return f("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(f("pause"),this._readableState.flowing=!1,this.emit("pause")),this};function O(q){var G=q._readableState;for(f("flow",G.flowing);G.flowing&&q.read()!==null;);}v.prototype.wrap=function(q){var G=this,ee=this._readableState,ae=!1;q.on("end",function(){if(f("wrapped end"),ee.decoder&&!ee.ended){var re=ee.decoder.end();re&&re.length&&G.push(re)}G.push(null)}),q.on("data",function(re){if(f("wrapped data"),ee.decoder&&(re=ee.decoder.write(re)),!(ee.objectMode&&re==null)&&!(!ee.objectMode&&(!re||!re.length))){var V=G.push(re);V||(ae=!0,q.pause())}});for(var te in q)this[te]===void 0&&typeof q[te]=="function"&&(this[te]=function(re){return function(){return q[re].apply(q,arguments)}}(te));for(var K=0;K<p.length;K++)q.on(p[K],this.emit.bind(this,p[K]));return this._read=function(re){f("wrapped _read",re),ae&&(ae=!1,q.resume())},this},Object.defineProperty(v.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),v._fromList=D;function D(q,G){if(G.length===0)return null;var ee;return G.objectMode?ee=G.buffer.shift():!q||q>=G.length?(G.decoder?ee=G.buffer.join(""):G.buffer.length===1?ee=G.buffer.head.data:ee=G.buffer.concat(G.length),G.buffer.clear()):ee=P(q,G.buffer,G.decoder),ee}function P(q,G,ee){var ae;return q<G.head.data.length?(ae=G.head.data.slice(0,q),G.head.data=G.head.data.slice(q)):q===G.head.data.length?ae=G.shift():ae=ee?B(q,G):z(q,G),ae}function B(q,G){var ee=G.head,ae=1,te=ee.data;for(q-=te.length;ee=ee.next;){var K=ee.data,re=q>K.length?K.length:q;if(re===K.length?te+=K:te+=K.slice(0,q),q-=re,q===0){re===K.length?(++ae,ee.next?G.head=ee.next:G.head=G.tail=null):(G.head=ee,ee.data=K.slice(re));break}++ae}return G.length-=ae,te}function z(q,G){var ee=s.allocUnsafe(q),ae=G.head,te=1;for(ae.data.copy(ee),q-=ae.data.length;ae=ae.next;){var K=ae.data,re=q>K.length?K.length:q;if(K.copy(ee,ee.length-q,0,re),q-=re,q===0){re===K.length?(++te,ae.next?G.head=ae.next:G.head=G.tail=null):(G.head=ae,ae.data=K.slice(re));break}++te}return G.length-=te,ee}function F(q){var G=q._readableState;if(G.length>0)throw new Error('"endReadable()" called on non-empty stream');G.endEmitted||(G.ended=!0,t.nextTick(X,G,q))}function X(q,G){!q.endEmitted&&q.length===0&&(q.endEmitted=!0,G.readable=!1,G.emit("end"))}function W(q,G){for(var ee=0,ae=q.length;ee<ae;ee++)if(q[ee]===G)return ee;return-1}return qR}var HR,oee;function W1e(){if(oee)return HR;oee=1,HR=n;var t=sv(),e=Object.create(F6());e.inherits=xr,e.inherits(n,t);function r(a,o){var c=this._transformState;c.transforming=!1;var l=c.writecb;if(!l)return this.emit("error",new Error("write callback called multiple times"));c.writechunk=null,c.writecb=null,o!=null&&this.push(o),l(a);var u=this._readableState;u.reading=!1,(u.needReadable||u.length<u.highWaterMark)&&this._read(u.highWaterMark)}function n(a){if(!(this instanceof n))return new n(a);t.call(this,a),this._transformState={afterTransform:r.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,a&&(typeof a.transform=="function"&&(this._transform=a.transform),typeof a.flush=="function"&&(this._flush=a.flush)),this.on("prefinish",i)}function i(){var a=this;typeof this._flush=="function"?this._flush(function(o,c){s(a,o,c)}):s(this,null,null)}n.prototype.push=function(a,o){return this._transformState.needTransform=!1,t.prototype.push.call(this,a,o)},n.prototype._transform=function(a,o,c){throw new Error("_transform() is not implemented")},n.prototype._write=function(a,o,c){var l=this._transformState;if(l.writecb=c,l.writechunk=a,l.writeencoding=o,!l.transforming){var u=this._readableState;(l.needTransform||u.needReadable||u.length<u.highWaterMark)&&this._read(u.highWaterMark)}},n.prototype._read=function(a){var o=this._transformState;o.writechunk!==null&&o.writecb&&!o.transforming?(o.transforming=!0,this._transform(o.writechunk,o.writeencoding,o.afterTransform)):o.needTransform=!0},n.prototype._destroy=function(a,o){var c=this;t.prototype._destroy.call(this,a,function(l){o(l),c.emit("close")})};function s(a,o,c){if(o)return a.emit("error",o);if(c!=null&&a.push(c),a._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(a._transformState.transforming)throw new Error("Calling transform done when still transforming");return a.push(null)}return HR}var WR,cee;function Cct(){if(cee)return WR;cee=1,WR=r;var t=W1e(),e=Object.create(F6());e.inherits=xr,e.inherits(r,t);function r(n){if(!(this instanceof r))return new r(n);t.call(this,n)}return r.prototype._transform=function(n,i,s){s(null,n)},WR}var lee;function Ict(){return lee||(lee=1,function(t,e){e=t.exports=H1e(),e.Stream=e,e.Readable=e,e.Writable=q1e(),e.Duplex=sv(),e.Transform=W1e(),e.PassThrough=Cct()}(f5,f5.exports)),f5.exports}var Tw={exports:{}},jx={exports:{}};jx.exports;var uee;function yU(){return uee||(uee=1,function(t){(function(e,r){function n(k,w){if(!k)throw new Error(w||"Assertion failed")}function i(k,w){k.super_=w;var T=function(){};T.prototype=w.prototype,k.prototype=new T,k.prototype.constructor=k}function s(k,w,T){if(s.isBN(k))return k;this.negative=0,this.words=null,this.length=0,this.red=null,k!==null&&((w==="le"||w==="be")&&(T=w,w=10),this._init(k||0,w||10,T||"be"))}typeof e=="object"?e.exports=s:r.BN=s,s.BN=s,s.wordSize=26;var a;try{typeof window<"u"&&typeof window.Buffer<"u"?a=window.Buffer:a=rp.Buffer}catch{}s.isBN=function(w){return w instanceof s?!0:w!==null&&typeof w=="object"&&w.constructor.wordSize===s.wordSize&&Array.isArray(w.words)},s.max=function(w,T){return w.cmp(T)>0?w:T},s.min=function(w,T){return w.cmp(T)<0?w:T},s.prototype._init=function(w,T,L){if(typeof w=="number")return this._initNumber(w,T,L);if(typeof w=="object")return this._initArray(w,T,L);T==="hex"&&(T=16),n(T===(T|0)&&T>=2&&T<=36),w=w.toString().replace(/\s+/g,"");var I=0;w[0]==="-"&&(I++,this.negative=1),I<w.length&&(T===16?this._parseHex(w,I,L):(this._parseBase(w,T,I),L==="le"&&this._initArray(this.toArray(),T,L)))},s.prototype._initNumber=function(w,T,L){w<0&&(this.negative=1,w=-w),w<67108864?(this.words=[w&67108863],this.length=1):w<4503599627370496?(this.words=[w&67108863,w/67108864&67108863],this.length=2):(n(w<9007199254740992),this.words=[w&67108863,w/67108864&67108863,1],this.length=3),L==="le"&&this._initArray(this.toArray(),T,L)},s.prototype._initArray=function(w,T,L){if(n(typeof w.length=="number"),w.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(w.length/3),this.words=new Array(this.length);for(var I=0;I<this.length;I++)this.words[I]=0;var U,O,D=0;if(L==="be")for(I=w.length-1,U=0;I>=0;I-=3)O=w[I]|w[I-1]<<8|w[I-2]<<16,this.words[U]|=O<<D&67108863,this.words[U+1]=O>>>26-D&67108863,D+=24,D>=26&&(D-=26,U++);else if(L==="le")for(I=0,U=0;I<w.length;I+=3)O=w[I]|w[I+1]<<8|w[I+2]<<16,this.words[U]|=O<<D&67108863,this.words[U+1]=O>>>26-D&67108863,D+=24,D>=26&&(D-=26,U++);return this._strip()};function o(k,w){var T=k.charCodeAt(w);if(T>=48&&T<=57)return T-48;if(T>=65&&T<=70)return T-55;if(T>=97&&T<=102)return T-87;n(!1,"Invalid character in "+k)}function c(k,w,T){var L=o(k,T);return T-1>=w&&(L|=o(k,T-1)<<4),L}s.prototype._parseHex=function(w,T,L){this.length=Math.ceil((w.length-T)/6),this.words=new Array(this.length);for(var I=0;I<this.length;I++)this.words[I]=0;var U=0,O=0,D;if(L==="be")for(I=w.length-1;I>=T;I-=2)D=c(w,T,I)<<U,this.words[O]|=D&67108863,U>=18?(U-=18,O+=1,this.words[O]|=D>>>26):U+=8;else{var P=w.length-T;for(I=P%2===0?T+1:T;I<w.length;I+=2)D=c(w,T,I)<<U,this.words[O]|=D&67108863,U>=18?(U-=18,O+=1,this.words[O]|=D>>>26):U+=8}this._strip()};function l(k,w,T,L){for(var I=0,U=0,O=Math.min(k.length,T),D=w;D<O;D++){var P=k.charCodeAt(D)-48;I*=L,P>=49?U=P-49+10:P>=17?U=P-17+10:U=P,n(P>=0&&U<L,"Invalid character"),I+=U}return I}s.prototype._parseBase=function(w,T,L){this.words=[0],this.length=1;for(var I=0,U=1;U<=67108863;U*=T)I++;I--,U=U/T|0;for(var O=w.length-L,D=O%I,P=Math.min(O,O-D)+L,B=0,z=L;z<P;z+=I)B=l(w,z,z+I,T),this.imuln(U),this.words[0]+B<67108864?this.words[0]+=B:this._iaddn(B);if(D!==0){var F=1;for(B=l(w,z,w.length,T),z=0;z<D;z++)F*=T;this.imuln(F),this.words[0]+B<67108864?this.words[0]+=B:this._iaddn(B)}this._strip()},s.prototype.copy=function(w){w.words=new Array(this.length);for(var T=0;T<this.length;T++)w.words[T]=this.words[T];w.length=this.length,w.negative=this.negative,w.red=this.red};function u(k,w){k.words=w.words,k.length=w.length,k.negative=w.negative,k.red=w.red}if(s.prototype._move=function(w){u(w,this)},s.prototype.clone=function(){var w=new s(null);return this.copy(w),w},s.prototype._expand=function(w){for(;this.length<w;)this.words[this.length++]=0;return this},s.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},s.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{s.prototype[Symbol.for("nodejs.util.inspect.custom")]=f}catch{s.prototype.inspect=f}else s.prototype.inspect=f;function f(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var h=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],d=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],g=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function(w,T){w=w||10,T=T|0||1;var L;if(w===16||w==="hex"){L="";for(var I=0,U=0,O=0;O<this.length;O++){var D=this.words[O],P=((D<<I|U)&16777215).toString(16);U=D>>>24-I&16777215,I+=2,I>=26&&(I-=26,O--),U!==0||O!==this.length-1?L=h[6-P.length]+P+L:L=P+L}for(U!==0&&(L=U.toString(16)+L);L.length%T!==0;)L="0"+L;return this.negative!==0&&(L="-"+L),L}if(w===(w|0)&&w>=2&&w<=36){var B=d[w],z=g[w];L="";var F=this.clone();for(F.negative=0;!F.isZero();){var X=F.modrn(z).toString(w);F=F.idivn(z),F.isZero()?L=X+L:L=h[B-X.length]+X+L}for(this.isZero()&&(L="0"+L);L.length%T!==0;)L="0"+L;return this.negative!==0&&(L="-"+L),L}n(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var w=this.words[0];return this.length===2?w+=this.words[1]*67108864:this.length===3&&this.words[2]===1?w+=4503599627370496+this.words[1]*67108864:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-w:w},s.prototype.toJSON=function(){return this.toString(16,2)},a&&(s.prototype.toBuffer=function(w,T){return this.toArrayLike(a,w,T)}),s.prototype.toArray=function(w,T){return this.toArrayLike(Array,w,T)};var p=function(w,T){return w.allocUnsafe?w.allocUnsafe(T):new w(T)};s.prototype.toArrayLike=function(w,T,L){this._strip();var I=this.byteLength(),U=L||Math.max(1,I);n(I<=U,"byte array longer than desired length"),n(U>0,"Requested array length <= 0");var O=p(w,U),D=T==="le"?"LE":"BE";return this["_toArrayLike"+D](O,I),O},s.prototype._toArrayLikeLE=function(w,T){for(var L=0,I=0,U=0,O=0;U<this.length;U++){var D=this.words[U]<<O|I;w[L++]=D&255,L<w.length&&(w[L++]=D>>8&255),L<w.length&&(w[L++]=D>>16&255),O===6?(L<w.length&&(w[L++]=D>>24&255),I=0,O=0):(I=D>>>24,O+=2)}if(L<w.length)for(w[L++]=I;L<w.length;)w[L++]=0},s.prototype._toArrayLikeBE=function(w,T){for(var L=w.length-1,I=0,U=0,O=0;U<this.length;U++){var D=this.words[U]<<O|I;w[L--]=D&255,L>=0&&(w[L--]=D>>8&255),L>=0&&(w[L--]=D>>16&255),O===6?(L>=0&&(w[L--]=D>>24&255),I=0,O=0):(I=D>>>24,O+=2)}if(L>=0)for(w[L--]=I;L>=0;)w[L--]=0},Math.clz32?s.prototype._countBits=function(w){return 32-Math.clz32(w)}:s.prototype._countBits=function(w){var T=w,L=0;return T>=4096&&(L+=13,T>>>=13),T>=64&&(L+=7,T>>>=7),T>=8&&(L+=4,T>>>=4),T>=2&&(L+=2,T>>>=2),L+T},s.prototype._zeroBits=function(w){if(w===0)return 26;var T=w,L=0;return T&8191||(L+=13,T>>>=13),T&127||(L+=7,T>>>=7),T&15||(L+=4,T>>>=4),T&3||(L+=2,T>>>=2),T&1||L++,L},s.prototype.bitLength=function(){var w=this.words[this.length-1],T=this._countBits(w);return(this.length-1)*26+T};function m(k){for(var w=new Array(k.bitLength()),T=0;T<w.length;T++){var L=T/26|0,I=T%26;w[T]=k.words[L]>>>I&1}return w}s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var w=0,T=0;T<this.length;T++){var L=this._zeroBits(this.words[T]);if(w+=L,L!==26)break}return w},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(w){return this.negative!==0?this.abs().inotn(w).iaddn(1):this.clone()},s.prototype.fromTwos=function(w){return this.testn(w-1)?this.notn(w).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return this.negative!==0},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(w){for(;this.length<w.length;)this.words[this.length++]=0;for(var T=0;T<w.length;T++)this.words[T]=this.words[T]|w.words[T];return this._strip()},s.prototype.ior=function(w){return n((this.negative|w.negative)===0),this.iuor(w)},s.prototype.or=function(w){return this.length>w.length?this.clone().ior(w):w.clone().ior(this)},s.prototype.uor=function(w){return this.length>w.length?this.clone().iuor(w):w.clone().iuor(this)},s.prototype.iuand=function(w){var T;this.length>w.length?T=w:T=this;for(var L=0;L<T.length;L++)this.words[L]=this.words[L]&w.words[L];return this.length=T.length,this._strip()},s.prototype.iand=function(w){return n((this.negative|w.negative)===0),this.iuand(w)},s.prototype.and=function(w){return this.length>w.length?this.clone().iand(w):w.clone().iand(this)},s.prototype.uand=function(w){return this.length>w.length?this.clone().iuand(w):w.clone().iuand(this)},s.prototype.iuxor=function(w){var T,L;this.length>w.length?(T=this,L=w):(T=w,L=this);for(var I=0;I<L.length;I++)this.words[I]=T.words[I]^L.words[I];if(this!==T)for(;I<T.length;I++)this.words[I]=T.words[I];return this.length=T.length,this._strip()},s.prototype.ixor=function(w){return n((this.negative|w.negative)===0),this.iuxor(w)},s.prototype.xor=function(w){return this.length>w.length?this.clone().ixor(w):w.clone().ixor(this)},s.prototype.uxor=function(w){return this.length>w.length?this.clone().iuxor(w):w.clone().iuxor(this)},s.prototype.inotn=function(w){n(typeof w=="number"&&w>=0);var T=Math.ceil(w/26)|0,L=w%26;this._expand(T),L>0&&T--;for(var I=0;I<T;I++)this.words[I]=~this.words[I]&67108863;return L>0&&(this.words[I]=~this.words[I]&67108863>>26-L),this._strip()},s.prototype.notn=function(w){return this.clone().inotn(w)},s.prototype.setn=function(w,T){n(typeof w=="number"&&w>=0);var L=w/26|0,I=w%26;return this._expand(L+1),T?this.words[L]=this.words[L]|1<<I:this.words[L]=this.words[L]&~(1<<I),this._strip()},s.prototype.iadd=function(w){var T;if(this.negative!==0&&w.negative===0)return this.negative=0,T=this.isub(w),this.negative^=1,this._normSign();if(this.negative===0&&w.negative!==0)return w.negative=0,T=this.isub(w),w.negative=1,T._normSign();var L,I;this.length>w.length?(L=this,I=w):(L=w,I=this);for(var U=0,O=0;O<I.length;O++)T=(L.words[O]|0)+(I.words[O]|0)+U,this.words[O]=T&67108863,U=T>>>26;for(;U!==0&&O<L.length;O++)T=(L.words[O]|0)+U,this.words[O]=T&67108863,U=T>>>26;if(this.length=L.length,U!==0)this.words[this.length]=U,this.length++;else if(L!==this)for(;O<L.length;O++)this.words[O]=L.words[O];return this},s.prototype.add=function(w){var T;return w.negative!==0&&this.negative===0?(w.negative=0,T=this.sub(w),w.negative^=1,T):w.negative===0&&this.negative!==0?(this.negative=0,T=w.sub(this),this.negative=1,T):this.length>w.length?this.clone().iadd(w):w.clone().iadd(this)},s.prototype.isub=function(w){if(w.negative!==0){w.negative=0;var T=this.iadd(w);return w.negative=1,T._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(w),this.negative=1,this._normSign();var L=this.cmp(w);if(L===0)return this.negative=0,this.length=1,this.words[0]=0,this;var I,U;L>0?(I=this,U=w):(I=w,U=this);for(var O=0,D=0;D<U.length;D++)T=(I.words[D]|0)-(U.words[D]|0)+O,O=T>>26,this.words[D]=T&67108863;for(;O!==0&&D<I.length;D++)T=(I.words[D]|0)+O,O=T>>26,this.words[D]=T&67108863;if(O===0&&D<I.length&&I!==this)for(;D<I.length;D++)this.words[D]=I.words[D];return this.length=Math.max(this.length,D),I!==this&&(this.negative=1),this._strip()},s.prototype.sub=function(w){return this.clone().isub(w)};function y(k,w,T){T.negative=w.negative^k.negative;var L=k.length+w.length|0;T.length=L,L=L-1|0;var I=k.words[0]|0,U=w.words[0]|0,O=I*U,D=O&67108863,P=O/67108864|0;T.words[0]=D;for(var B=1;B<L;B++){for(var z=P>>>26,F=P&67108863,X=Math.min(B,w.length-1),W=Math.max(0,B-k.length+1);W<=X;W++){var q=B-W|0;I=k.words[q]|0,U=w.words[W]|0,O=I*U+F,z+=O/67108864|0,F=O&67108863}T.words[B]=F|0,P=z|0}return P!==0?T.words[B]=P|0:T.length--,T._strip()}var v=function(w,T,L){var I=w.words,U=T.words,O=L.words,D=0,P,B,z,F=I[0]|0,X=F&8191,W=F>>>13,q=I[1]|0,G=q&8191,ee=q>>>13,ae=I[2]|0,te=ae&8191,K=ae>>>13,re=I[3]|0,V=re&8191,oe=re>>>13,he=I[4]|0,ne=he&8191,ie=he>>>13,ce=I[5]|0,ve=ce&8191,Ee=ce>>>13,ge=I[6]|0,Pe=ge&8191,Ce=ge>>>13,Ie=I[7]|0,$e=Ie&8191,se=Ie>>>13,Z=I[8]|0,J=Z&8191,de=Z>>>13,Ae=I[9]|0,De=Ae&8191,Re=Ae>>>13,bt=U[0]|0,$t=bt&8191,ut=bt>>>13,Mt=U[1]|0,Ft=Mt&8191,lr=Mt>>>13,$n=U[2]|0,On=$n&8191,er=$n>>>13,gn=U[3]|0,hi=gn&8191,mr=gn>>>13,di=U[4]|0,ai=di&8191,yr=di>>>13,pi=U[5]|0,gi=pi&8191,hr=pi>>>13,Kn=U[6]|0,Gn=Kn&8191,vr=Kn>>>13,mi=U[7]|0,fe=mi&8191,_e=mi>>>13,me=U[8]|0,we=me&8191,xe=me>>>13,Se=U[9]|0,Le=Se&8191,Ke=Se>>>13;L.negative=w.negative^T.negative,L.length=19,P=Math.imul(X,$t),B=Math.imul(X,ut),B=B+Math.imul(W,$t)|0,z=Math.imul(W,ut);var Ue=(D+P|0)+((B&8191)<<13)|0;D=(z+(B>>>13)|0)+(Ue>>>26)|0,Ue&=67108863,P=Math.imul(G,$t),B=Math.imul(G,ut),B=B+Math.imul(ee,$t)|0,z=Math.imul(ee,ut),P=P+Math.imul(X,Ft)|0,B=B+Math.imul(X,lr)|0,B=B+Math.imul(W,Ft)|0,z=z+Math.imul(W,lr)|0;var je=(D+P|0)+((B&8191)<<13)|0;D=(z+(B>>>13)|0)+(je>>>26)|0,je&=67108863,P=Math.imul(te,$t),B=Math.imul(te,ut),B=B+Math.imul(K,$t)|0,z=Math.imul(K,ut),P=P+Math.imul(G,Ft)|0,B=B+Math.imul(G,lr)|0,B=B+Math.imul(ee,Ft)|0,z=z+Math.imul(ee,lr)|0,P=P+Math.imul(X,On)|0,B=B+Math.imul(X,er)|0,B=B+Math.imul(W,On)|0,z=z+Math.imul(W,er)|0;var Ve=(D+P|0)+((B&8191)<<13)|0;D=(z+(B>>>13)|0)+(Ve>>>26)|0,Ve&=67108863,P=Math.imul(V,$t),B=Math.imul(V,ut),B=B+Math.imul(oe,$t)|0,z=Math.imul(oe,ut),P=P+Math.imul(te,Ft)|0,B=B+Math.imul(te,lr)|0,B=B+Math.imul(K,Ft)|0,z=z+Math.imul(K,lr)|0,P=P+Math.imul(G,On)|0,B=B+Math.imul(G,er)|0,B=B+Math.imul(ee,On)|0,z=z+Math.imul(ee,er)|0,P=P+Math.imul(X,hi)|0,B=B+Math.imul(X,mr)|0,B=B+Math.imul(W,hi)|0,z=z+Math.imul(W,mr)|0;var it=(D+P|0)+((B&8191)<<13)|0;D=(z+(B>>>13)|0)+(it>>>26)|0,it&=67108863,P=Math.imul(ne,$t),B=Math.imul(ne,ut),B=B+Math.imul(ie,$t)|0,z=Math.imul(ie,ut),P=P+Math.imul(V,Ft)|0,B=B+Math.imul(V,lr)|0,B=B+Math.imul(oe,Ft)|0,z=z+Math.imul(oe,lr)|0,P=P+Math.imul(te,On)|0,B=B+Math.imul(te,er)|0,B=B+Math.imul(K,On)|0,z=z+Math.imul(K,er)|0,P=P+Math.imul(G,hi)|0,B=B+Math.imul(G,mr)|0,B=B+Math.imul(ee,hi)|0,z=z+Math.imul(ee,mr)|0,P=P+Math.imul(X,ai)|0,B=B+Math.imul(X,yr)|0,B=B+Math.imul(W,ai)|0,z=z+Math.imul(W,yr)|0;var gt=(D+P|0)+((B&8191)<<13)|0;D=(z+(B>>>13)|0)+(gt>>>26)|0,gt&=67108863,P=Math.imul(ve,$t),B=Math.imul(ve,ut),B=B+Math.imul(Ee,$t)|0,z=Math.imul(Ee,ut),P=P+Math.imul(ne,Ft)|0,B=B+Math.imul(ne,lr)|0,B=B+Math.imul(ie,Ft)|0,z=z+Math.imul(ie,lr)|0,P=P+Math.imul(V,On)|0,B=B+Math.imul(V,er)|0,B=B+Math.imul(oe,On)|0,z=z+Math.imul(oe,er)|0,P=P+Math.imul(te,hi)|0,B=B+Math.imul(te,mr)|0,B=B+Math.imul(K,hi)|0,z=z+Math.imul(K,mr)|0,P=P+Math.imul(G,ai)|0,B=B+Math.imul(G,yr)|0,B=B+Math.imul(ee,ai)|0,z=z+Math.imul(ee,yr)|0,P=P+Math.imul(X,gi)|0,B=B+Math.imul(X,hr)|0,B=B+Math.imul(W,gi)|0,z=z+Math.imul(W,hr)|0;var xt=(D+P|0)+((B&8191)<<13)|0;D=(z+(B>>>13)|0)+(xt>>>26)|0,xt&=67108863,P=Math.imul(Pe,$t),B=Math.imul(Pe,ut),B=B+Math.imul(Ce,$t)|0,z=Math.imul(Ce,ut),P=P+Math.imul(ve,Ft)|0,B=B+Math.imul(ve,lr)|0,B=B+Math.imul(Ee,Ft)|0,z=z+Math.imul(Ee,lr)|0,P=P+Math.imul(ne,On)|0,B=B+Math.imul(ne,er)|0,B=B+Math.imul(ie,On)|0,z=z+Math.imul(ie,er)|0,P=P+Math.imul(V,hi)|0,B=B+Math.imul(V,mr)|0,B=B+Math.imul(oe,hi)|0,z=z+Math.imul(oe,mr)|0,P=P+Math.imul(te,ai)|0,B=B+Math.imul(te,yr)|0,B=B+Math.imul(K,ai)|0,z=z+Math.imul(K,yr)|0,P=P+Math.imul(G,gi)|0,B=B+Math.imul(G,hr)|0,B=B+Math.imul(ee,gi)|0,z=z+Math.imul(ee,hr)|0,P=P+Math.imul(X,Gn)|0,B=B+Math.imul(X,vr)|0,B=B+Math.imul(W,Gn)|0,z=z+Math.imul(W,vr)|0;var at=(D+P|0)+((B&8191)<<13)|0;D=(z+(B>>>13)|0)+(at>>>26)|0,at&=67108863,P=Math.imul($e,$t),B=Math.imul($e,ut),B=B+Math.imul(se,$t)|0,z=Math.imul(se,ut),P=P+Math.imul(Pe,Ft)|0,B=B+Math.imul(Pe,lr)|0,B=B+Math.imul(Ce,Ft)|0,z=z+Math.imul(Ce,lr)|0,P=P+Math.imul(ve,On)|0,B=B+Math.imul(ve,er)|0,B=B+Math.imul(Ee,On)|0,z=z+Math.imul(Ee,er)|0,P=P+Math.imul(ne,hi)|0,B=B+Math.imul(ne,mr)|0,B=B+Math.imul(ie,hi)|0,z=z+Math.imul(ie,mr)|0,P=P+Math.imul(V,ai)|0,B=B+Math.imul(V,yr)|0,B=B+Math.imul(oe,ai)|0,z=z+Math.imul(oe,yr)|0,P=P+Math.imul(te,gi)|0,B=B+Math.imul(te,hr)|0,B=B+Math.imul(K,gi)|0,z=z+Math.imul(K,hr)|0,P=P+Math.imul(G,Gn)|0,B=B+Math.imul(G,vr)|0,B=B+Math.imul(ee,Gn)|0,z=z+Math.imul(ee,vr)|0,P=P+Math.imul(X,fe)|0,B=B+Math.imul(X,_e)|0,B=B+Math.imul(W,fe)|0,z=z+Math.imul(W,_e)|0;var ft=(D+P|0)+((B&8191)<<13)|0;D=(z+(B>>>13)|0)+(ft>>>26)|0,ft&=67108863,P=Math.imul(J,$t),B=Math.imul(J,ut),B=B+Math.imul(de,$t)|0,z=Math.imul(de,ut),P=P+Math.imul($e,Ft)|0,B=B+Math.imul($e,lr)|0,B=B+Math.imul(se,Ft)|0,z=z+Math.imul(se,lr)|0,P=P+Math.imul(Pe,On)|0,B=B+Math.imul(Pe,er)|0,B=B+Math.imul(Ce,On)|0,z=z+Math.imul(Ce,er)|0,P=P+Math.imul(ve,hi)|0,B=B+Math.imul(ve,mr)|0,B=B+Math.imul(Ee,hi)|0,z=z+Math.imul(Ee,mr)|0,P=P+Math.imul(ne,ai)|0,B=B+Math.imul(ne,yr)|0,B=B+Math.imul(ie,ai)|0,z=z+Math.imul(ie,yr)|0,P=P+Math.imul(V,gi)|0,B=B+Math.imul(V,hr)|0,B=B+Math.imul(oe,gi)|0,z=z+Math.imul(oe,hr)|0,P=P+Math.imul(te,Gn)|0,B=B+Math.imul(te,vr)|0,B=B+Math.imul(K,Gn)|0,z=z+Math.imul(K,vr)|0,P=P+Math.imul(G,fe)|0,B=B+Math.imul(G,_e)|0,B=B+Math.imul(ee,fe)|0,z=z+Math.imul(ee,_e)|0,P=P+Math.imul(X,we)|0,B=B+Math.imul(X,xe)|0,B=B+Math.imul(W,we)|0,z=z+Math.imul(W,xe)|0;var Jt=(D+P|0)+((B&8191)<<13)|0;D=(z+(B>>>13)|0)+(Jt>>>26)|0,Jt&=67108863,P=Math.imul(De,$t),B=Math.imul(De,ut),B=B+Math.imul(Re,$t)|0,z=Math.imul(Re,ut),P=P+Math.imul(J,Ft)|0,B=B+Math.imul(J,lr)|0,B=B+Math.imul(de,Ft)|0,z=z+Math.imul(de,lr)|0,P=P+Math.imul($e,On)|0,B=B+Math.imul($e,er)|0,B=B+Math.imul(se,On)|0,z=z+Math.imul(se,er)|0,P=P+Math.imul(Pe,hi)|0,B=B+Math.imul(Pe,mr)|0,B=B+Math.imul(Ce,hi)|0,z=z+Math.imul(Ce,mr)|0,P=P+Math.imul(ve,ai)|0,B=B+Math.imul(ve,yr)|0,B=B+Math.imul(Ee,ai)|0,z=z+Math.imul(Ee,yr)|0,P=P+Math.imul(ne,gi)|0,B=B+Math.imul(ne,hr)|0,B=B+Math.imul(ie,gi)|0,z=z+Math.imul(ie,hr)|0,P=P+Math.imul(V,Gn)|0,B=B+Math.imul(V,vr)|0,B=B+Math.imul(oe,Gn)|0,z=z+Math.imul(oe,vr)|0,P=P+Math.imul(te,fe)|0,B=B+Math.imul(te,_e)|0,B=B+Math.imul(K,fe)|0,z=z+Math.imul(K,_e)|0,P=P+Math.imul(G,we)|0,B=B+Math.imul(G,xe)|0,B=B+Math.imul(ee,we)|0,z=z+Math.imul(ee,xe)|0,P=P+Math.imul(X,Le)|0,B=B+Math.imul(X,Ke)|0,B=B+Math.imul(W,Le)|0,z=z+Math.imul(W,Ke)|0;var vn=(D+P|0)+((B&8191)<<13)|0;D=(z+(B>>>13)|0)+(vn>>>26)|0,vn&=67108863,P=Math.imul(De,Ft),B=Math.imul(De,lr),B=B+Math.imul(Re,Ft)|0,z=Math.imul(Re,lr),P=P+Math.imul(J,On)|0,B=B+Math.imul(J,er)|0,B=B+Math.imul(de,On)|0,z=z+Math.imul(de,er)|0,P=P+Math.imul($e,hi)|0,B=B+Math.imul($e,mr)|0,B=B+Math.imul(se,hi)|0,z=z+Math.imul(se,mr)|0,P=P+Math.imul(Pe,ai)|0,B=B+Math.imul(Pe,yr)|0,B=B+Math.imul(Ce,ai)|0,z=z+Math.imul(Ce,yr)|0,P=P+Math.imul(ve,gi)|0,B=B+Math.imul(ve,hr)|0,B=B+Math.imul(Ee,gi)|0,z=z+Math.imul(Ee,hr)|0,P=P+Math.imul(ne,Gn)|0,B=B+Math.imul(ne,vr)|0,B=B+Math.imul(ie,Gn)|0,z=z+Math.imul(ie,vr)|0,P=P+Math.imul(V,fe)|0,B=B+Math.imul(V,_e)|0,B=B+Math.imul(oe,fe)|0,z=z+Math.imul(oe,_e)|0,P=P+Math.imul(te,we)|0,B=B+Math.imul(te,xe)|0,B=B+Math.imul(K,we)|0,z=z+Math.imul(K,xe)|0,P=P+Math.imul(G,Le)|0,B=B+Math.imul(G,Ke)|0,B=B+Math.imul(ee,Le)|0,z=z+Math.imul(ee,Ke)|0;var _n=(D+P|0)+((B&8191)<<13)|0;D=(z+(B>>>13)|0)+(_n>>>26)|0,_n&=67108863,P=Math.imul(De,On),B=Math.imul(De,er),B=B+Math.imul(Re,On)|0,z=Math.imul(Re,er),P=P+Math.imul(J,hi)|0,B=B+Math.imul(J,mr)|0,B=B+Math.imul(de,hi)|0,z=z+Math.imul(de,mr)|0,P=P+Math.imul($e,ai)|0,B=B+Math.imul($e,yr)|0,B=B+Math.imul(se,ai)|0,z=z+Math.imul(se,yr)|0,P=P+Math.imul(Pe,gi)|0,B=B+Math.imul(Pe,hr)|0,B=B+Math.imul(Ce,gi)|0,z=z+Math.imul(Ce,hr)|0,P=P+Math.imul(ve,Gn)|0,B=B+Math.imul(ve,vr)|0,B=B+Math.imul(Ee,Gn)|0,z=z+Math.imul(Ee,vr)|0,P=P+Math.imul(ne,fe)|0,B=B+Math.imul(ne,_e)|0,B=B+Math.imul(ie,fe)|0,z=z+Math.imul(ie,_e)|0,P=P+Math.imul(V,we)|0,B=B+Math.imul(V,xe)|0,B=B+Math.imul(oe,we)|0,z=z+Math.imul(oe,xe)|0,P=P+Math.imul(te,Le)|0,B=B+Math.imul(te,Ke)|0,B=B+Math.imul(K,Le)|0,z=z+Math.imul(K,Ke)|0;var yi=(D+P|0)+((B&8191)<<13)|0;D=(z+(B>>>13)|0)+(yi>>>26)|0,yi&=67108863,P=Math.imul(De,hi),B=Math.imul(De,mr),B=B+Math.imul(Re,hi)|0,z=Math.imul(Re,mr),P=P+Math.imul(J,ai)|0,B=B+Math.imul(J,yr)|0,B=B+Math.imul(de,ai)|0,z=z+Math.imul(de,yr)|0,P=P+Math.imul($e,gi)|0,B=B+Math.imul($e,hr)|0,B=B+Math.imul(se,gi)|0,z=z+Math.imul(se,hr)|0,P=P+Math.imul(Pe,Gn)|0,B=B+Math.imul(Pe,vr)|0,B=B+Math.imul(Ce,Gn)|0,z=z+Math.imul(Ce,vr)|0,P=P+Math.imul(ve,fe)|0,B=B+Math.imul(ve,_e)|0,B=B+Math.imul(Ee,fe)|0,z=z+Math.imul(Ee,_e)|0,P=P+Math.imul(ne,we)|0,B=B+Math.imul(ne,xe)|0,B=B+Math.imul(ie,we)|0,z=z+Math.imul(ie,xe)|0,P=P+Math.imul(V,Le)|0,B=B+Math.imul(V,Ke)|0,B=B+Math.imul(oe,Le)|0,z=z+Math.imul(oe,Ke)|0;var Ha=(D+P|0)+((B&8191)<<13)|0;D=(z+(B>>>13)|0)+(Ha>>>26)|0,Ha&=67108863,P=Math.imul(De,ai),B=Math.imul(De,yr),B=B+Math.imul(Re,ai)|0,z=Math.imul(Re,yr),P=P+Math.imul(J,gi)|0,B=B+Math.imul(J,hr)|0,B=B+Math.imul(de,gi)|0,z=z+Math.imul(de,hr)|0,P=P+Math.imul($e,Gn)|0,B=B+Math.imul($e,vr)|0,B=B+Math.imul(se,Gn)|0,z=z+Math.imul(se,vr)|0,P=P+Math.imul(Pe,fe)|0,B=B+Math.imul(Pe,_e)|0,B=B+Math.imul(Ce,fe)|0,z=z+Math.imul(Ce,_e)|0,P=P+Math.imul(ve,we)|0,B=B+Math.imul(ve,xe)|0,B=B+Math.imul(Ee,we)|0,z=z+Math.imul(Ee,xe)|0,P=P+Math.imul(ne,Le)|0,B=B+Math.imul(ne,Ke)|0,B=B+Math.imul(ie,Le)|0,z=z+Math.imul(ie,Ke)|0;var Wa=(D+P|0)+((B&8191)<<13)|0;D=(z+(B>>>13)|0)+(Wa>>>26)|0,Wa&=67108863,P=Math.imul(De,gi),B=Math.imul(De,hr),B=B+Math.imul(Re,gi)|0,z=Math.imul(Re,hr),P=P+Math.imul(J,Gn)|0,B=B+Math.imul(J,vr)|0,B=B+Math.imul(de,Gn)|0,z=z+Math.imul(de,vr)|0,P=P+Math.imul($e,fe)|0,B=B+Math.imul($e,_e)|0,B=B+Math.imul(se,fe)|0,z=z+Math.imul(se,_e)|0,P=P+Math.imul(Pe,we)|0,B=B+Math.imul(Pe,xe)|0,B=B+Math.imul(Ce,we)|0,z=z+Math.imul(Ce,xe)|0,P=P+Math.imul(ve,Le)|0,B=B+Math.imul(ve,Ke)|0,B=B+Math.imul(Ee,Le)|0,z=z+Math.imul(Ee,Ke)|0;var Eo=(D+P|0)+((B&8191)<<13)|0;D=(z+(B>>>13)|0)+(Eo>>>26)|0,Eo&=67108863,P=Math.imul(De,Gn),B=Math.imul(De,vr),B=B+Math.imul(Re,Gn)|0,z=Math.imul(Re,vr),P=P+Math.imul(J,fe)|0,B=B+Math.imul(J,_e)|0,B=B+Math.imul(de,fe)|0,z=z+Math.imul(de,_e)|0,P=P+Math.imul($e,we)|0,B=B+Math.imul($e,xe)|0,B=B+Math.imul(se,we)|0,z=z+Math.imul(se,xe)|0,P=P+Math.imul(Pe,Le)|0,B=B+Math.imul(Pe,Ke)|0,B=B+Math.imul(Ce,Le)|0,z=z+Math.imul(Ce,Ke)|0;var xa=(D+P|0)+((B&8191)<<13)|0;D=(z+(B>>>13)|0)+(xa>>>26)|0,xa&=67108863,P=Math.imul(De,fe),B=Math.imul(De,_e),B=B+Math.imul(Re,fe)|0,z=Math.imul(Re,_e),P=P+Math.imul(J,we)|0,B=B+Math.imul(J,xe)|0,B=B+Math.imul(de,we)|0,z=z+Math.imul(de,xe)|0,P=P+Math.imul($e,Le)|0,B=B+Math.imul($e,Ke)|0,B=B+Math.imul(se,Le)|0,z=z+Math.imul(se,Ke)|0;var Oc=(D+P|0)+((B&8191)<<13)|0;D=(z+(B>>>13)|0)+(Oc>>>26)|0,Oc&=67108863,P=Math.imul(De,we),B=Math.imul(De,xe),B=B+Math.imul(Re,we)|0,z=Math.imul(Re,xe),P=P+Math.imul(J,Le)|0,B=B+Math.imul(J,Ke)|0,B=B+Math.imul(de,Le)|0,z=z+Math.imul(de,Ke)|0;var So=(D+P|0)+((B&8191)<<13)|0;D=(z+(B>>>13)|0)+(So>>>26)|0,So&=67108863,P=Math.imul(De,Le),B=Math.imul(De,Ke),B=B+Math.imul(Re,Le)|0,z=Math.imul(Re,Ke);var i2=(D+P|0)+((B&8191)<<13)|0;return D=(z+(B>>>13)|0)+(i2>>>26)|0,i2&=67108863,O[0]=Ue,O[1]=je,O[2]=Ve,O[3]=it,O[4]=gt,O[5]=xt,O[6]=at,O[7]=ft,O[8]=Jt,O[9]=vn,O[10]=_n,O[11]=yi,O[12]=Ha,O[13]=Wa,O[14]=Eo,O[15]=xa,O[16]=Oc,O[17]=So,O[18]=i2,D!==0&&(O[19]=D,L.length++),L};Math.imul||(v=y);function _(k,w,T){T.negative=w.negative^k.negative,T.length=k.length+w.length;for(var L=0,I=0,U=0;U<T.length-1;U++){var O=I;I=0;for(var D=L&67108863,P=Math.min(U,w.length-1),B=Math.max(0,U-k.length+1);B<=P;B++){var z=U-B,F=k.words[z]|0,X=w.words[B]|0,W=F*X,q=W&67108863;O=O+(W/67108864|0)|0,q=q+D|0,D=q&67108863,O=O+(q>>>26)|0,I+=O>>>26,O&=67108863}T.words[U]=D,L=O,O=I}return L!==0?T.words[U]=L:T.length--,T._strip()}function x(k,w,T){return _(k,w,T)}s.prototype.mulTo=function(w,T){var L,I=this.length+w.length;return this.length===10&&w.length===10?L=v(this,w,T):I<63?L=y(this,w,T):I<1024?L=_(this,w,T):L=x(this,w,T),L},s.prototype.mul=function(w){var T=new s(null);return T.words=new Array(this.length+w.length),this.mulTo(w,T)},s.prototype.mulf=function(w){var T=new s(null);return T.words=new Array(this.length+w.length),x(this,w,T)},s.prototype.imul=function(w){return this.clone().mulTo(w,this)},s.prototype.imuln=function(w){var T=w<0;T&&(w=-w),n(typeof w=="number"),n(w<67108864);for(var L=0,I=0;I<this.length;I++){var U=(this.words[I]|0)*w,O=(U&67108863)+(L&67108863);L>>=26,L+=U/67108864|0,L+=O>>>26,this.words[I]=O&67108863}return L!==0&&(this.words[I]=L,this.length++),T?this.ineg():this},s.prototype.muln=function(w){return this.clone().imuln(w)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(w){var T=m(w);if(T.length===0)return new s(1);for(var L=this,I=0;I<T.length&&T[I]===0;I++,L=L.sqr());if(++I<T.length)for(var U=L.sqr();I<T.length;I++,U=U.sqr())T[I]!==0&&(L=L.mul(U));return L},s.prototype.iushln=function(w){n(typeof w=="number"&&w>=0);var T=w%26,L=(w-T)/26,I=67108863>>>26-T<<26-T,U;if(T!==0){var O=0;for(U=0;U<this.length;U++){var D=this.words[U]&I,P=(this.words[U]|0)-D<<T;this.words[U]=P|O,O=D>>>26-T}O&&(this.words[U]=O,this.length++)}if(L!==0){for(U=this.length-1;U>=0;U--)this.words[U+L]=this.words[U];for(U=0;U<L;U++)this.words[U]=0;this.length+=L}return this._strip()},s.prototype.ishln=function(w){return n(this.negative===0),this.iushln(w)},s.prototype.iushrn=function(w,T,L){n(typeof w=="number"&&w>=0);var I;T?I=(T-T%26)/26:I=0;var U=w%26,O=Math.min((w-U)/26,this.length),D=67108863^67108863>>>U<<U,P=L;if(I-=O,I=Math.max(0,I),P){for(var B=0;B<O;B++)P.words[B]=this.words[B];P.length=O}if(O!==0)if(this.length>O)for(this.length-=O,B=0;B<this.length;B++)this.words[B]=this.words[B+O];else this.words[0]=0,this.length=1;var z=0;for(B=this.length-1;B>=0&&(z!==0||B>=I);B--){var F=this.words[B]|0;this.words[B]=z<<26-U|F>>>U,z=F&D}return P&&z!==0&&(P.words[P.length++]=z),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},s.prototype.ishrn=function(w,T,L){return n(this.negative===0),this.iushrn(w,T,L)},s.prototype.shln=function(w){return this.clone().ishln(w)},s.prototype.ushln=function(w){return this.clone().iushln(w)},s.prototype.shrn=function(w){return this.clone().ishrn(w)},s.prototype.ushrn=function(w){return this.clone().iushrn(w)},s.prototype.testn=function(w){n(typeof w=="number"&&w>=0);var T=w%26,L=(w-T)/26,I=1<<T;if(this.length<=L)return!1;var U=this.words[L];return!!(U&I)},s.prototype.imaskn=function(w){n(typeof w=="number"&&w>=0);var T=w%26,L=(w-T)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=L)return this;if(T!==0&&L++,this.length=Math.min(L,this.length),T!==0){var I=67108863^67108863>>>T<<T;this.words[this.length-1]&=I}return this._strip()},s.prototype.maskn=function(w){return this.clone().imaskn(w)},s.prototype.iaddn=function(w){return n(typeof w=="number"),n(w<67108864),w<0?this.isubn(-w):this.negative!==0?this.length===1&&(this.words[0]|0)<=w?(this.words[0]=w-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(w),this.negative=1,this):this._iaddn(w)},s.prototype._iaddn=function(w){this.words[0]+=w;for(var T=0;T<this.length&&this.words[T]>=67108864;T++)this.words[T]-=67108864,T===this.length-1?this.words[T+1]=1:this.words[T+1]++;return this.length=Math.max(this.length,T+1),this},s.prototype.isubn=function(w){if(n(typeof w=="number"),n(w<67108864),w<0)return this.iaddn(-w);if(this.negative!==0)return this.negative=0,this.iaddn(w),this.negative=1,this;if(this.words[0]-=w,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var T=0;T<this.length&&this.words[T]<0;T++)this.words[T]+=67108864,this.words[T+1]-=1;return this._strip()},s.prototype.addn=function(w){return this.clone().iaddn(w)},s.prototype.subn=function(w){return this.clone().isubn(w)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(w,T,L){var I=w.length+L,U;this._expand(I);var O,D=0;for(U=0;U<w.length;U++){O=(this.words[U+L]|0)+D;var P=(w.words[U]|0)*T;O-=P&67108863,D=(O>>26)-(P/67108864|0),this.words[U+L]=O&67108863}for(;U<this.length-L;U++)O=(this.words[U+L]|0)+D,D=O>>26,this.words[U+L]=O&67108863;if(D===0)return this._strip();for(n(D===-1),D=0,U=0;U<this.length;U++)O=-(this.words[U]|0)+D,D=O>>26,this.words[U]=O&67108863;return this.negative=1,this._strip()},s.prototype._wordDiv=function(w,T){var L=this.length-w.length,I=this.clone(),U=w,O=U.words[U.length-1]|0,D=this._countBits(O);L=26-D,L!==0&&(U=U.ushln(L),I.iushln(L),O=U.words[U.length-1]|0);var P=I.length-U.length,B;if(T!=="mod"){B=new s(null),B.length=P+1,B.words=new Array(B.length);for(var z=0;z<B.length;z++)B.words[z]=0}var F=I.clone()._ishlnsubmul(U,1,P);F.negative===0&&(I=F,B&&(B.words[P]=1));for(var X=P-1;X>=0;X--){var W=(I.words[U.length+X]|0)*67108864+(I.words[U.length+X-1]|0);for(W=Math.min(W/O|0,67108863),I._ishlnsubmul(U,W,X);I.negative!==0;)W--,I.negative=0,I._ishlnsubmul(U,1,X),I.isZero()||(I.negative^=1);B&&(B.words[X]=W)}return B&&B._strip(),I._strip(),T!=="div"&&L!==0&&I.iushrn(L),{div:B||null,mod:I}},s.prototype.divmod=function(w,T,L){if(n(!w.isZero()),this.isZero())return{div:new s(0),mod:new s(0)};var I,U,O;return this.negative!==0&&w.negative===0?(O=this.neg().divmod(w,T),T!=="mod"&&(I=O.div.neg()),T!=="div"&&(U=O.mod.neg(),L&&U.negative!==0&&U.iadd(w)),{div:I,mod:U}):this.negative===0&&w.negative!==0?(O=this.divmod(w.neg(),T),T!=="mod"&&(I=O.div.neg()),{div:I,mod:O.mod}):this.negative&w.negative?(O=this.neg().divmod(w.neg(),T),T!=="div"&&(U=O.mod.neg(),L&&U.negative!==0&&U.isub(w)),{div:O.div,mod:U}):w.length>this.length||this.cmp(w)<0?{div:new s(0),mod:this}:w.length===1?T==="div"?{div:this.divn(w.words[0]),mod:null}:T==="mod"?{div:null,mod:new s(this.modrn(w.words[0]))}:{div:this.divn(w.words[0]),mod:new s(this.modrn(w.words[0]))}:this._wordDiv(w,T)},s.prototype.div=function(w){return this.divmod(w,"div",!1).div},s.prototype.mod=function(w){return this.divmod(w,"mod",!1).mod},s.prototype.umod=function(w){return this.divmod(w,"mod",!0).mod},s.prototype.divRound=function(w){var T=this.divmod(w);if(T.mod.isZero())return T.div;var L=T.div.negative!==0?T.mod.isub(w):T.mod,I=w.ushrn(1),U=w.andln(1),O=L.cmp(I);return O<0||U===1&&O===0?T.div:T.div.negative!==0?T.div.isubn(1):T.div.iaddn(1)},s.prototype.modrn=function(w){var T=w<0;T&&(w=-w),n(w<=67108863);for(var L=(1<<26)%w,I=0,U=this.length-1;U>=0;U--)I=(L*I+(this.words[U]|0))%w;return T?-I:I},s.prototype.modn=function(w){return this.modrn(w)},s.prototype.idivn=function(w){var T=w<0;T&&(w=-w),n(w<=67108863);for(var L=0,I=this.length-1;I>=0;I--){var U=(this.words[I]|0)+L*67108864;this.words[I]=U/w|0,L=U%w}return this._strip(),T?this.ineg():this},s.prototype.divn=function(w){return this.clone().idivn(w)},s.prototype.egcd=function(w){n(w.negative===0),n(!w.isZero());var T=this,L=w.clone();T.negative!==0?T=T.umod(w):T=T.clone();for(var I=new s(1),U=new s(0),O=new s(0),D=new s(1),P=0;T.isEven()&&L.isEven();)T.iushrn(1),L.iushrn(1),++P;for(var B=L.clone(),z=T.clone();!T.isZero();){for(var F=0,X=1;!(T.words[0]&X)&&F<26;++F,X<<=1);if(F>0)for(T.iushrn(F);F-- >0;)(I.isOdd()||U.isOdd())&&(I.iadd(B),U.isub(z)),I.iushrn(1),U.iushrn(1);for(var W=0,q=1;!(L.words[0]&q)&&W<26;++W,q<<=1);if(W>0)for(L.iushrn(W);W-- >0;)(O.isOdd()||D.isOdd())&&(O.iadd(B),D.isub(z)),O.iushrn(1),D.iushrn(1);T.cmp(L)>=0?(T.isub(L),I.isub(O),U.isub(D)):(L.isub(T),O.isub(I),D.isub(U))}return{a:O,b:D,gcd:L.iushln(P)}},s.prototype._invmp=function(w){n(w.negative===0),n(!w.isZero());var T=this,L=w.clone();T.negative!==0?T=T.umod(w):T=T.clone();for(var I=new s(1),U=new s(0),O=L.clone();T.cmpn(1)>0&&L.cmpn(1)>0;){for(var D=0,P=1;!(T.words[0]&P)&&D<26;++D,P<<=1);if(D>0)for(T.iushrn(D);D-- >0;)I.isOdd()&&I.iadd(O),I.iushrn(1);for(var B=0,z=1;!(L.words[0]&z)&&B<26;++B,z<<=1);if(B>0)for(L.iushrn(B);B-- >0;)U.isOdd()&&U.iadd(O),U.iushrn(1);T.cmp(L)>=0?(T.isub(L),I.isub(U)):(L.isub(T),U.isub(I))}var F;return T.cmpn(1)===0?F=I:F=U,F.cmpn(0)<0&&F.iadd(w),F},s.prototype.gcd=function(w){if(this.isZero())return w.abs();if(w.isZero())return this.abs();var T=this.clone(),L=w.clone();T.negative=0,L.negative=0;for(var I=0;T.isEven()&&L.isEven();I++)T.iushrn(1),L.iushrn(1);do{for(;T.isEven();)T.iushrn(1);for(;L.isEven();)L.iushrn(1);var U=T.cmp(L);if(U<0){var O=T;T=L,L=O}else if(U===0||L.cmpn(1)===0)break;T.isub(L)}while(!0);return L.iushln(I)},s.prototype.invm=function(w){return this.egcd(w).a.umod(w)},s.prototype.isEven=function(){return(this.words[0]&1)===0},s.prototype.isOdd=function(){return(this.words[0]&1)===1},s.prototype.andln=function(w){return this.words[0]&w},s.prototype.bincn=function(w){n(typeof w=="number");var T=w%26,L=(w-T)/26,I=1<<T;if(this.length<=L)return this._expand(L+1),this.words[L]|=I,this;for(var U=I,O=L;U!==0&&O<this.length;O++){var D=this.words[O]|0;D+=U,U=D>>>26,D&=67108863,this.words[O]=D}return U!==0&&(this.words[O]=U,this.length++),this},s.prototype.isZero=function(){return this.length===1&&this.words[0]===0},s.prototype.cmpn=function(w){var T=w<0;if(this.negative!==0&&!T)return-1;if(this.negative===0&&T)return 1;this._strip();var L;if(this.length>1)L=1;else{T&&(w=-w),n(w<=67108863,"Number is too big");var I=this.words[0]|0;L=I===w?0:I<w?-1:1}return this.negative!==0?-L|0:L},s.prototype.cmp=function(w){if(this.negative!==0&&w.negative===0)return-1;if(this.negative===0&&w.negative!==0)return 1;var T=this.ucmp(w);return this.negative!==0?-T|0:T},s.prototype.ucmp=function(w){if(this.length>w.length)return 1;if(this.length<w.length)return-1;for(var T=0,L=this.length-1;L>=0;L--){var I=this.words[L]|0,U=w.words[L]|0;if(I!==U){I<U?T=-1:I>U&&(T=1);break}}return T},s.prototype.gtn=function(w){return this.cmpn(w)===1},s.prototype.gt=function(w){return this.cmp(w)===1},s.prototype.gten=function(w){return this.cmpn(w)>=0},s.prototype.gte=function(w){return this.cmp(w)>=0},s.prototype.ltn=function(w){return this.cmpn(w)===-1},s.prototype.lt=function(w){return this.cmp(w)===-1},s.prototype.lten=function(w){return this.cmpn(w)<=0},s.prototype.lte=function(w){return this.cmp(w)<=0},s.prototype.eqn=function(w){return this.cmpn(w)===0},s.prototype.eq=function(w){return this.cmp(w)===0},s.red=function(w){return new H(w)},s.prototype.toRed=function(w){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),w.convertTo(this)._forceRed(w)},s.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(w){return this.red=w,this},s.prototype.forceRed=function(w){return n(!this.red,"Already a number in reduction context"),this._forceRed(w)},s.prototype.redAdd=function(w){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,w)},s.prototype.redIAdd=function(w){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,w)},s.prototype.redSub=function(w){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,w)},s.prototype.redISub=function(w){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,w)},s.prototype.redShl=function(w){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,w)},s.prototype.redMul=function(w){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,w),this.red.mul(this,w)},s.prototype.redIMul=function(w){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,w),this.red.imul(this,w)},s.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(w){return n(this.red&&!w.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,w)};var A={k256:null,p224:null,p192:null,p25519:null};function C(k,w){this.name=k,this.p=new s(w,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}C.prototype._tmp=function(){var w=new s(null);return w.words=new Array(Math.ceil(this.n/13)),w},C.prototype.ireduce=function(w){var T=w,L;do this.split(T,this.tmp),T=this.imulK(T),T=T.iadd(this.tmp),L=T.bitLength();while(L>this.n);var I=L<this.n?-1:T.ucmp(this.p);return I===0?(T.words[0]=0,T.length=1):I>0?T.isub(this.p):T.strip!==void 0?T.strip():T._strip(),T},C.prototype.split=function(w,T){w.iushrn(this.n,0,T)},C.prototype.imulK=function(w){return w.imul(this.k)};function R(){C.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}i(R,C),R.prototype.split=function(w,T){for(var L=4194303,I=Math.min(w.length,9),U=0;U<I;U++)T.words[U]=w.words[U];if(T.length=I,w.length<=9){w.words[0]=0,w.length=1;return}var O=w.words[9];for(T.words[T.length++]=O&L,U=10;U<w.length;U++){var D=w.words[U]|0;w.words[U-10]=(D&L)<<4|O>>>22,O=D}O>>>=22,w.words[U-10]=O,O===0&&w.length>10?w.length-=10:w.length-=9},R.prototype.imulK=function(w){w.words[w.length]=0,w.words[w.length+1]=0,w.length+=2;for(var T=0,L=0;L<w.length;L++){var I=w.words[L]|0;T+=I*977,w.words[L]=T&67108863,T=I*64+(T/67108864|0)}return w.words[w.length-1]===0&&(w.length--,w.words[w.length-1]===0&&w.length--),w};function M(){C.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}i(M,C);function N(){C.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}i(N,C);function Y(){C.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}i(Y,C),Y.prototype.imulK=function(w){for(var T=0,L=0;L<w.length;L++){var I=(w.words[L]|0)*19+T,U=I&67108863;I>>>=26,w.words[L]=U,T=I}return T!==0&&(w.words[w.length++]=T),w},s._prime=function(w){if(A[w])return A[w];var T;if(w==="k256")T=new R;else if(w==="p224")T=new M;else if(w==="p192")T=new N;else if(w==="p25519")T=new Y;else throw new Error("Unknown prime "+w);return A[w]=T,T};function H(k){if(typeof k=="string"){var w=s._prime(k);this.m=w.p,this.prime=w}else n(k.gtn(1),"modulus must be greater than 1"),this.m=k,this.prime=null}H.prototype._verify1=function(w){n(w.negative===0,"red works only with positives"),n(w.red,"red works only with red numbers")},H.prototype._verify2=function(w,T){n((w.negative|T.negative)===0,"red works only with positives"),n(w.red&&w.red===T.red,"red works only with red numbers")},H.prototype.imod=function(w){return this.prime?this.prime.ireduce(w)._forceRed(this):(u(w,w.umod(this.m)._forceRed(this)),w)},H.prototype.neg=function(w){return w.isZero()?w.clone():this.m.sub(w)._forceRed(this)},H.prototype.add=function(w,T){this._verify2(w,T);var L=w.add(T);return L.cmp(this.m)>=0&&L.isub(this.m),L._forceRed(this)},H.prototype.iadd=function(w,T){this._verify2(w,T);var L=w.iadd(T);return L.cmp(this.m)>=0&&L.isub(this.m),L},H.prototype.sub=function(w,T){this._verify2(w,T);var L=w.sub(T);return L.cmpn(0)<0&&L.iadd(this.m),L._forceRed(this)},H.prototype.isub=function(w,T){this._verify2(w,T);var L=w.isub(T);return L.cmpn(0)<0&&L.iadd(this.m),L},H.prototype.shl=function(w,T){return this._verify1(w),this.imod(w.ushln(T))},H.prototype.imul=function(w,T){return this._verify2(w,T),this.imod(w.imul(T))},H.prototype.mul=function(w,T){return this._verify2(w,T),this.imod(w.mul(T))},H.prototype.isqr=function(w){return this.imul(w,w.clone())},H.prototype.sqr=function(w){return this.mul(w,w)},H.prototype.sqrt=function(w){if(w.isZero())return w.clone();var T=this.m.andln(3);if(n(T%2===1),T===3){var L=this.m.add(new s(1)).iushrn(2);return this.pow(w,L)}for(var I=this.m.subn(1),U=0;!I.isZero()&&I.andln(1)===0;)U++,I.iushrn(1);n(!I.isZero());var O=new s(1).toRed(this),D=O.redNeg(),P=this.m.subn(1).iushrn(1),B=this.m.bitLength();for(B=new s(2*B*B).toRed(this);this.pow(B,P).cmp(D)!==0;)B.redIAdd(D);for(var z=this.pow(B,I),F=this.pow(w,I.addn(1).iushrn(1)),X=this.pow(w,I),W=U;X.cmp(O)!==0;){for(var q=X,G=0;q.cmp(O)!==0;G++)q=q.redSqr();n(G<W);var ee=this.pow(z,new s(1).iushln(W-G-1));F=F.redMul(ee),z=ee.redSqr(),X=X.redMul(z),W=G}return F},H.prototype.invm=function(w){var T=w._invmp(this.m);return T.negative!==0?(T.negative=0,this.imod(T).redNeg()):this.imod(T)},H.prototype.pow=function(w,T){if(T.isZero())return new s(1).toRed(this);if(T.cmpn(1)===0)return w.clone();var L=4,I=new Array(1<<L);I[0]=new s(1).toRed(this),I[1]=w;for(var U=2;U<I.length;U++)I[U]=this.mul(I[U-1],w);var O=I[0],D=0,P=0,B=T.bitLength()%26;for(B===0&&(B=26),U=T.length-1;U>=0;U--){for(var z=T.words[U],F=B-1;F>=0;F--){var X=z>>F&1;if(O!==I[0]&&(O=this.sqr(O)),X===0&&D===0){P=0;continue}D<<=1,D|=X,P++,!(P!==L&&(U!==0||F!==0))&&(O=this.mul(O,I[D]),P=0,D=0)}B=26}return O},H.prototype.convertTo=function(w){var T=w.umod(this.m);return T===w?T.clone():T},H.prototype.convertFrom=function(w){var T=w.clone();return T.red=null,T},s.mont=function(w){return new E(w)};function E(k){H.call(this,k),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}i(E,H),E.prototype.convertTo=function(w){return this.imod(w.ushln(this.shift))},E.prototype.convertFrom=function(w){var T=this.imod(w.mul(this.rinv));return T.red=null,T},E.prototype.imul=function(w,T){if(w.isZero()||T.isZero())return w.words[0]=0,w.length=1,w;var L=w.imul(T),I=L.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),U=L.isub(I).iushrn(this.shift),O=U;return U.cmp(this.m)>=0?O=U.isub(this.m):U.cmpn(0)<0&&(O=U.iadd(this.m)),O._forceRed(this)},E.prototype.mul=function(w,T){if(w.isZero()||T.isZero())return new s(0)._forceRed(this);var L=w.mul(T),I=L.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),U=L.isub(I).iushrn(this.shift),O=U;return U.cmp(this.m)>=0?O=U.isub(this.m):U.cmpn(0)<0&&(O=U.iadd(this.m)),O._forceRed(this)},E.prototype.invm=function(w){var T=this.imod(w._invmp(this.m).mul(this.r2));return T._forceRed(this)}})(t,It)}(jx)),jx.exports}var KR,fee;function vU(){if(fee)return KR;fee=1;var t=yU(),e=gb(),r=Zr().Buffer;function n(a){var o=a.modulus.byteLength(),c;do c=new t(e(o));while(c.cmp(a.modulus)>=0||!c.umod(a.prime1)||!c.umod(a.prime2));return c}function i(a){var o=n(a),c=o.toRed(t.mont(a.modulus)).redPow(new t(a.publicExponent)).fromRed();return{blinder:c,unblinder:o.invm(a.modulus)}}function s(a,o){var c=i(o),l=o.modulus.byteLength(),u=new t(a).mul(c.blinder).umod(o.modulus),f=u.toRed(t.mont(o.prime1)),h=u.toRed(t.mont(o.prime2)),d=o.coefficient,g=o.prime1,p=o.prime2,m=f.redPow(o.exponent1).fromRed(),y=h.redPow(o.exponent2).fromRed(),v=m.isub(y).imul(d).umod(g).imul(p);return y.iadd(v).imul(c.unblinder).umod(o.modulus).toArrayLike(r,"be",l)}return s.getr=n,KR=s,KR}var GR={};const Rct="elliptic",Pct="6.5.7",Bct="EC cryptography",Dct="lib/elliptic.js",Oct=["lib"],Nct={lint:"eslint lib test","lint:fix":"npm run lint -- --fix",unit:"istanbul test _mocha --reporter=spec test/index.js",test:"npm run lint && npm run unit",version:"grunt dist && git add dist/"},Mct={type:"git",url:"git@github.com:indutny/elliptic"},Lct=["EC","Elliptic","curve","Cryptography"],Fct="Fedor Indutny <fedor@indutny.com>",$ct="MIT",Uct={url:"https://github.com/indutny/elliptic/issues"},Vct="https://github.com/indutny/elliptic",jct={brfs:"^2.0.2",coveralls:"^3.1.0",eslint:"^7.6.0",grunt:"^1.2.1","grunt-browserify":"^5.3.0","grunt-cli":"^1.3.2","grunt-contrib-connect":"^3.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-uglify":"^5.0.0","grunt-mocha-istanbul":"^5.0.2","grunt-saucelabs":"^9.0.1",istanbul:"^0.4.5",mocha:"^8.0.1"},zct={"bn.js":"^4.11.9",brorand:"^1.1.0","hash.js":"^1.0.0","hmac-drbg":"^1.0.1",inherits:"^2.0.4","minimalistic-assert":"^1.0.1","minimalistic-crypto-utils":"^1.0.1"},qct={name:Rct,version:Pct,description:Bct,main:Dct,files:Oct,scripts:Nct,repository:Mct,keywords:Lct,author:Fct,license:$ct,bugs:Uct,homepage:Vct,devDependencies:jct,dependencies:zct};var YR={},XR={},hee;function K1e(){return hee||(hee=1,function(t){var e=t;function r(s,a){if(Array.isArray(s))return s.slice();if(!s)return[];var o=[];if(typeof s!="string"){for(var c=0;c<s.length;c++)o[c]=s[c]|0;return o}if(a==="hex"){s=s.replace(/[^a-z0-9]+/ig,""),s.length%2!==0&&(s="0"+s);for(var c=0;c<s.length;c+=2)o.push(parseInt(s[c]+s[c+1],16))}else for(var c=0;c<s.length;c++){var l=s.charCodeAt(c),u=l>>8,f=l&255;u?o.push(u,f):o.push(f)}return o}e.toArray=r;function n(s){return s.length===1?"0"+s:s}e.zero2=n;function i(s){for(var a="",o=0;o<s.length;o++)a+=n(s[o].toString(16));return a}e.toHex=i,e.encode=function(a,o){return o==="hex"?i(a):a}}(XR)),XR}var dee;function Jl(){return dee||(dee=1,function(t){var e=t,r=za(),n=Zl(),i=K1e();e.assert=n,e.toArray=i.toArray,e.zero2=i.zero2,e.toHex=i.toHex,e.encode=i.encode;function s(u,f,h){var d=new Array(Math.max(u.bitLength(),h)+1),g;for(g=0;g<d.length;g+=1)d[g]=0;var p=1<<f+1,m=u.clone();for(g=0;g<d.length;g++){var y,v=m.andln(p-1);m.isOdd()?(v>(p>>1)-1?y=(p>>1)-v:y=v,m.isubn(y)):y=0,d[g]=y,m.iushrn(1)}return d}e.getNAF=s;function a(u,f){var h=[[],[]];u=u.clone(),f=f.clone();for(var d=0,g=0,p;u.cmpn(-d)>0||f.cmpn(-g)>0;){var m=u.andln(3)+d&3,y=f.andln(3)+g&3;m===3&&(m=-1),y===3&&(y=-1);var v;m&1?(p=u.andln(7)+d&7,(p===3||p===5)&&y===2?v=-m:v=m):v=0,h[0].push(v);var _;y&1?(p=f.andln(7)+g&7,(p===3||p===5)&&m===2?_=-y:_=y):_=0,h[1].push(_),2*d===v+1&&(d=1-d),2*g===_+1&&(g=1-g),u.iushrn(1),f.iushrn(1)}return h}e.getJSF=a;function o(u,f,h){var d="_"+f;u.prototype[f]=function(){return this[d]!==void 0?this[d]:this[d]=h.call(this)}}e.cachedProperty=o;function c(u){return typeof u=="string"?e.toArray(u,"hex"):u}e.parseBytes=c;function l(u){return new r(u,"hex","le")}e.intFromLE=l}(YR)),YR}var ZR={},JR,pee;function mA(){if(pee)return JR;pee=1;var t=za(),e=Jl(),r=e.getNAF,n=e.getJSF,i=e.assert;function s(o,c){this.type=o,this.p=new t(c.p,16),this.red=c.prime?t.red(c.prime):t.mont(this.p),this.zero=new t(0).toRed(this.red),this.one=new t(1).toRed(this.red),this.two=new t(2).toRed(this.red),this.n=c.n&&new t(c.n,16),this.g=c.g&&this.pointFromJSON(c.g,c.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var l=this.n&&this.p.div(this.n);!l||l.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}JR=s,s.prototype.point=function(){throw new Error("Not implemented")},s.prototype.validate=function(){throw new Error("Not implemented")},s.prototype._fixedNafMul=function(c,l){i(c.precomputed);var u=c._getDoubles(),f=r(l,1,this._bitLength),h=(1<<u.step+1)-(u.step%2===0?2:1);h/=3;var d=[],g,p;for(g=0;g<f.length;g+=u.step){p=0;for(var m=g+u.step-1;m>=g;m--)p=(p<<1)+f[m];d.push(p)}for(var y=this.jpoint(null,null,null),v=this.jpoint(null,null,null),_=h;_>0;_--){for(g=0;g<d.length;g++)p=d[g],p===_?v=v.mixedAdd(u.points[g]):p===-_&&(v=v.mixedAdd(u.points[g].neg()));y=y.add(v)}return y.toP()},s.prototype._wnafMul=function(c,l){var u=4,f=c._getNAFPoints(u);u=f.wnd;for(var h=f.points,d=r(l,u,this._bitLength),g=this.jpoint(null,null,null),p=d.length-1;p>=0;p--){for(var m=0;p>=0&&d[p]===0;p--)m++;if(p>=0&&m++,g=g.dblp(m),p<0)break;var y=d[p];i(y!==0),c.type==="affine"?y>0?g=g.mixedAdd(h[y-1>>1]):g=g.mixedAdd(h[-y-1>>1].neg()):y>0?g=g.add(h[y-1>>1]):g=g.add(h[-y-1>>1].neg())}return c.type==="affine"?g.toP():g},s.prototype._wnafMulAdd=function(c,l,u,f,h){var d=this._wnafT1,g=this._wnafT2,p=this._wnafT3,m=0,y,v,_;for(y=0;y<f;y++){_=l[y];var x=_._getNAFPoints(c);d[y]=x.wnd,g[y]=x.points}for(y=f-1;y>=1;y-=2){var A=y-1,C=y;if(d[A]!==1||d[C]!==1){p[A]=r(u[A],d[A],this._bitLength),p[C]=r(u[C],d[C],this._bitLength),m=Math.max(p[A].length,m),m=Math.max(p[C].length,m);continue}var R=[l[A],null,null,l[C]];l[A].y.cmp(l[C].y)===0?(R[1]=l[A].add(l[C]),R[2]=l[A].toJ().mixedAdd(l[C].neg())):l[A].y.cmp(l[C].y.redNeg())===0?(R[1]=l[A].toJ().mixedAdd(l[C]),R[2]=l[A].add(l[C].neg())):(R[1]=l[A].toJ().mixedAdd(l[C]),R[2]=l[A].toJ().mixedAdd(l[C].neg()));var M=[-3,-1,-5,-7,0,7,5,1,3],N=n(u[A],u[C]);for(m=Math.max(N[0].length,m),p[A]=new Array(m),p[C]=new Array(m),v=0;v<m;v++){var Y=N[0][v]|0,H=N[1][v]|0;p[A][v]=M[(Y+1)*3+(H+1)],p[C][v]=0,g[A]=R}}var E=this.jpoint(null,null,null),k=this._wnafT4;for(y=m;y>=0;y--){for(var w=0;y>=0;){var T=!0;for(v=0;v<f;v++)k[v]=p[v][y]|0,k[v]!==0&&(T=!1);if(!T)break;w++,y--}if(y>=0&&w++,E=E.dblp(w),y<0)break;for(v=0;v<f;v++){var L=k[v];L!==0&&(L>0?_=g[v][L-1>>1]:L<0&&(_=g[v][-L-1>>1].neg()),_.type==="affine"?E=E.mixedAdd(_):E=E.add(_))}}for(y=0;y<f;y++)g[y]=null;return h?E:E.toP()};function a(o,c){this.curve=o,this.type=c,this.precomputed=null}return s.BasePoint=a,a.prototype.eq=function(){throw new Error("Not implemented")},a.prototype.validate=function(){return this.curve.validate(this)},s.prototype.decodePoint=function(c,l){c=e.toArray(c,l);var u=this.p.byteLength();if((c[0]===4||c[0]===6||c[0]===7)&&c.length-1===2*u){c[0]===6?i(c[c.length-1]%2===0):c[0]===7&&i(c[c.length-1]%2===1);var f=this.point(c.slice(1,1+u),c.slice(1+u,1+2*u));return f}else if((c[0]===2||c[0]===3)&&c.length-1===u)return this.pointFromX(c.slice(1,1+u),c[0]===3);throw new Error("Unknown point format")},a.prototype.encodeCompressed=function(c){return this.encode(c,!0)},a.prototype._encode=function(c){var l=this.curve.p.byteLength(),u=this.getX().toArray("be",l);return c?[this.getY().isEven()?2:3].concat(u):[4].concat(u,this.getY().toArray("be",l))},a.prototype.encode=function(c,l){return e.encode(this._encode(l),c)},a.prototype.precompute=function(c){if(this.precomputed)return this;var l={doubles:null,naf:null,beta:null};return l.naf=this._getNAFPoints(8),l.doubles=this._getDoubles(4,c),l.beta=this._getBeta(),this.precomputed=l,this},a.prototype._hasDoubles=function(c){if(!this.precomputed)return!1;var l=this.precomputed.doubles;return l?l.points.length>=Math.ceil((c.bitLength()+1)/l.step):!1},a.prototype._getDoubles=function(c,l){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var u=[this],f=this,h=0;h<l;h+=c){for(var d=0;d<c;d++)f=f.dbl();u.push(f)}return{step:c,points:u}},a.prototype._getNAFPoints=function(c){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var l=[this],u=(1<<c)-1,f=u===1?null:this.dbl(),h=1;h<u;h++)l[h]=l[h-1].add(f);return{wnd:c,points:l}},a.prototype._getBeta=function(){return null},a.prototype.dblp=function(c){for(var l=this,u=0;u<c;u++)l=l.dbl();return l},JR}var QR,gee;function Hct(){if(gee)return QR;gee=1;var t=Jl(),e=za(),r=xr,n=mA(),i=t.assert;function s(c){n.call(this,"short",c),this.a=new e(c.a,16).toRed(this.red),this.b=new e(c.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(c),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}r(s,n),QR=s,s.prototype._getEndomorphism=function(l){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var u,f;if(l.beta)u=new e(l.beta,16).toRed(this.red);else{var h=this._getEndoRoots(this.p);u=h[0].cmp(h[1])<0?h[0]:h[1],u=u.toRed(this.red)}if(l.lambda)f=new e(l.lambda,16);else{var d=this._getEndoRoots(this.n);this.g.mul(d[0]).x.cmp(this.g.x.redMul(u))===0?f=d[0]:(f=d[1],i(this.g.mul(f).x.cmp(this.g.x.redMul(u))===0))}var g;return l.basis?g=l.basis.map(function(p){return{a:new e(p.a,16),b:new e(p.b,16)}}):g=this._getEndoBasis(f),{beta:u,lambda:f,basis:g}}},s.prototype._getEndoRoots=function(l){var u=l===this.p?this.red:e.mont(l),f=new e(2).toRed(u).redInvm(),h=f.redNeg(),d=new e(3).toRed(u).redNeg().redSqrt().redMul(f),g=h.redAdd(d).fromRed(),p=h.redSub(d).fromRed();return[g,p]},s.prototype._getEndoBasis=function(l){for(var u=this.n.ushrn(Math.floor(this.n.bitLength()/2)),f=l,h=this.n.clone(),d=new e(1),g=new e(0),p=new e(0),m=new e(1),y,v,_,x,A,C,R,M=0,N,Y;f.cmpn(0)!==0;){var H=h.div(f);N=h.sub(H.mul(f)),Y=p.sub(H.mul(d));var E=m.sub(H.mul(g));if(!_&&N.cmp(u)<0)y=R.neg(),v=d,_=N.neg(),x=Y;else if(_&&++M===2)break;R=N,h=f,f=N,p=d,d=Y,m=g,g=E}A=N.neg(),C=Y;var k=_.sqr().add(x.sqr()),w=A.sqr().add(C.sqr());return w.cmp(k)>=0&&(A=y,C=v),_.negative&&(_=_.neg(),x=x.neg()),A.negative&&(A=A.neg(),C=C.neg()),[{a:_,b:x},{a:A,b:C}]},s.prototype._endoSplit=function(l){var u=this.endo.basis,f=u[0],h=u[1],d=h.b.mul(l).divRound(this.n),g=f.b.neg().mul(l).divRound(this.n),p=d.mul(f.a),m=g.mul(h.a),y=d.mul(f.b),v=g.mul(h.b),_=l.sub(p).sub(m),x=y.add(v).neg();return{k1:_,k2:x}},s.prototype.pointFromX=function(l,u){l=new e(l,16),l.red||(l=l.toRed(this.red));var f=l.redSqr().redMul(l).redIAdd(l.redMul(this.a)).redIAdd(this.b),h=f.redSqrt();if(h.redSqr().redSub(f).cmp(this.zero)!==0)throw new Error("invalid point");var d=h.fromRed().isOdd();return(u&&!d||!u&&d)&&(h=h.redNeg()),this.point(l,h)},s.prototype.validate=function(l){if(l.inf)return!0;var u=l.x,f=l.y,h=this.a.redMul(u),d=u.redSqr().redMul(u).redIAdd(h).redIAdd(this.b);return f.redSqr().redISub(d).cmpn(0)===0},s.prototype._endoWnafMulAdd=function(l,u,f){for(var h=this._endoWnafT1,d=this._endoWnafT2,g=0;g<l.length;g++){var p=this._endoSplit(u[g]),m=l[g],y=m._getBeta();p.k1.negative&&(p.k1.ineg(),m=m.neg(!0)),p.k2.negative&&(p.k2.ineg(),y=y.neg(!0)),h[g*2]=m,h[g*2+1]=y,d[g*2]=p.k1,d[g*2+1]=p.k2}for(var v=this._wnafMulAdd(1,h,d,g*2,f),_=0;_<g*2;_++)h[_]=null,d[_]=null;return v};function a(c,l,u,f){n.BasePoint.call(this,c,"affine"),l===null&&u===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new e(l,16),this.y=new e(u,16),f&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}r(a,n.BasePoint),s.prototype.point=function(l,u,f){return new a(this,l,u,f)},s.prototype.pointFromJSON=function(l,u){return a.fromJSON(this,l,u)},a.prototype._getBeta=function(){if(this.curve.endo){var l=this.precomputed;if(l&&l.beta)return l.beta;var u=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(l){var f=this.curve,h=function(d){return f.point(d.x.redMul(f.endo.beta),d.y)};l.beta=u,u.precomputed={beta:null,naf:l.naf&&{wnd:l.naf.wnd,points:l.naf.points.map(h)},doubles:l.doubles&&{step:l.doubles.step,points:l.doubles.points.map(h)}}}return u}},a.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},a.fromJSON=function(l,u,f){typeof u=="string"&&(u=JSON.parse(u));var h=l.point(u[0],u[1],f);if(!u[2])return h;function d(p){return l.point(p[0],p[1],f)}var g=u[2];return h.precomputed={beta:null,doubles:g.doubles&&{step:g.doubles.step,points:[h].concat(g.doubles.points.map(d))},naf:g.naf&&{wnd:g.naf.wnd,points:[h].concat(g.naf.points.map(d))}},h},a.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},a.prototype.isInfinity=function(){return this.inf},a.prototype.add=function(l){if(this.inf)return l;if(l.inf)return this;if(this.eq(l))return this.dbl();if(this.neg().eq(l))return this.curve.point(null,null);if(this.x.cmp(l.x)===0)return this.curve.point(null,null);var u=this.y.redSub(l.y);u.cmpn(0)!==0&&(u=u.redMul(this.x.redSub(l.x).redInvm()));var f=u.redSqr().redISub(this.x).redISub(l.x),h=u.redMul(this.x.redSub(f)).redISub(this.y);return this.curve.point(f,h)},a.prototype.dbl=function(){if(this.inf)return this;var l=this.y.redAdd(this.y);if(l.cmpn(0)===0)return this.curve.point(null,null);var u=this.curve.a,f=this.x.redSqr(),h=l.redInvm(),d=f.redAdd(f).redIAdd(f).redIAdd(u).redMul(h),g=d.redSqr().redISub(this.x.redAdd(this.x)),p=d.redMul(this.x.redSub(g)).redISub(this.y);return this.curve.point(g,p)},a.prototype.getX=function(){return this.x.fromRed()},a.prototype.getY=function(){return this.y.fromRed()},a.prototype.mul=function(l){return l=new e(l,16),this.isInfinity()?this:this._hasDoubles(l)?this.curve._fixedNafMul(this,l):this.curve.endo?this.curve._endoWnafMulAdd([this],[l]):this.curve._wnafMul(this,l)},a.prototype.mulAdd=function(l,u,f){var h=[this,u],d=[l,f];return this.curve.endo?this.curve._endoWnafMulAdd(h,d):this.curve._wnafMulAdd(1,h,d,2)},a.prototype.jmulAdd=function(l,u,f){var h=[this,u],d=[l,f];return this.curve.endo?this.curve._endoWnafMulAdd(h,d,!0):this.curve._wnafMulAdd(1,h,d,2,!0)},a.prototype.eq=function(l){return this===l||this.inf===l.inf&&(this.inf||this.x.cmp(l.x)===0&&this.y.cmp(l.y)===0)},a.prototype.neg=function(l){if(this.inf)return this;var u=this.curve.point(this.x,this.y.redNeg());if(l&&this.precomputed){var f=this.precomputed,h=function(d){return d.neg()};u.precomputed={naf:f.naf&&{wnd:f.naf.wnd,points:f.naf.points.map(h)},doubles:f.doubles&&{step:f.doubles.step,points:f.doubles.points.map(h)}}}return u},a.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var l=this.curve.jpoint(this.x,this.y,this.curve.one);return l};function o(c,l,u,f){n.BasePoint.call(this,c,"jacobian"),l===null&&u===null&&f===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new e(0)):(this.x=new e(l,16),this.y=new e(u,16),this.z=new e(f,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}return r(o,n.BasePoint),s.prototype.jpoint=function(l,u,f){return new o(this,l,u,f)},o.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var l=this.z.redInvm(),u=l.redSqr(),f=this.x.redMul(u),h=this.y.redMul(u).redMul(l);return this.curve.point(f,h)},o.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},o.prototype.add=function(l){if(this.isInfinity())return l;if(l.isInfinity())return this;var u=l.z.redSqr(),f=this.z.redSqr(),h=this.x.redMul(u),d=l.x.redMul(f),g=this.y.redMul(u.redMul(l.z)),p=l.y.redMul(f.redMul(this.z)),m=h.redSub(d),y=g.redSub(p);if(m.cmpn(0)===0)return y.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var v=m.redSqr(),_=v.redMul(m),x=h.redMul(v),A=y.redSqr().redIAdd(_).redISub(x).redISub(x),C=y.redMul(x.redISub(A)).redISub(g.redMul(_)),R=this.z.redMul(l.z).redMul(m);return this.curve.jpoint(A,C,R)},o.prototype.mixedAdd=function(l){if(this.isInfinity())return l.toJ();if(l.isInfinity())return this;var u=this.z.redSqr(),f=this.x,h=l.x.redMul(u),d=this.y,g=l.y.redMul(u).redMul(this.z),p=f.redSub(h),m=d.redSub(g);if(p.cmpn(0)===0)return m.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var y=p.redSqr(),v=y.redMul(p),_=f.redMul(y),x=m.redSqr().redIAdd(v).redISub(_).redISub(_),A=m.redMul(_.redISub(x)).redISub(d.redMul(v)),C=this.z.redMul(p);return this.curve.jpoint(x,A,C)},o.prototype.dblp=function(l){if(l===0)return this;if(this.isInfinity())return this;if(!l)return this.dbl();var u;if(this.curve.zeroA||this.curve.threeA){var f=this;for(u=0;u<l;u++)f=f.dbl();return f}var h=this.curve.a,d=this.curve.tinv,g=this.x,p=this.y,m=this.z,y=m.redSqr().redSqr(),v=p.redAdd(p);for(u=0;u<l;u++){var _=g.redSqr(),x=v.redSqr(),A=x.redSqr(),C=_.redAdd(_).redIAdd(_).redIAdd(h.redMul(y)),R=g.redMul(x),M=C.redSqr().redISub(R.redAdd(R)),N=R.redISub(M),Y=C.redMul(N);Y=Y.redIAdd(Y).redISub(A);var H=v.redMul(m);u+1<l&&(y=y.redMul(A)),g=M,m=H,v=Y}return this.curve.jpoint(g,v.redMul(d),m)},o.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},o.prototype._zeroDbl=function(){var l,u,f;if(this.zOne){var h=this.x.redSqr(),d=this.y.redSqr(),g=d.redSqr(),p=this.x.redAdd(d).redSqr().redISub(h).redISub(g);p=p.redIAdd(p);var m=h.redAdd(h).redIAdd(h),y=m.redSqr().redISub(p).redISub(p),v=g.redIAdd(g);v=v.redIAdd(v),v=v.redIAdd(v),l=y,u=m.redMul(p.redISub(y)).redISub(v),f=this.y.redAdd(this.y)}else{var _=this.x.redSqr(),x=this.y.redSqr(),A=x.redSqr(),C=this.x.redAdd(x).redSqr().redISub(_).redISub(A);C=C.redIAdd(C);var R=_.redAdd(_).redIAdd(_),M=R.redSqr(),N=A.redIAdd(A);N=N.redIAdd(N),N=N.redIAdd(N),l=M.redISub(C).redISub(C),u=R.redMul(C.redISub(l)).redISub(N),f=this.y.redMul(this.z),f=f.redIAdd(f)}return this.curve.jpoint(l,u,f)},o.prototype._threeDbl=function(){var l,u,f;if(this.zOne){var h=this.x.redSqr(),d=this.y.redSqr(),g=d.redSqr(),p=this.x.redAdd(d).redSqr().redISub(h).redISub(g);p=p.redIAdd(p);var m=h.redAdd(h).redIAdd(h).redIAdd(this.curve.a),y=m.redSqr().redISub(p).redISub(p);l=y;var v=g.redIAdd(g);v=v.redIAdd(v),v=v.redIAdd(v),u=m.redMul(p.redISub(y)).redISub(v),f=this.y.redAdd(this.y)}else{var _=this.z.redSqr(),x=this.y.redSqr(),A=this.x.redMul(x),C=this.x.redSub(_).redMul(this.x.redAdd(_));C=C.redAdd(C).redIAdd(C);var R=A.redIAdd(A);R=R.redIAdd(R);var M=R.redAdd(R);l=C.redSqr().redISub(M),f=this.y.redAdd(this.z).redSqr().redISub(x).redISub(_);var N=x.redSqr();N=N.redIAdd(N),N=N.redIAdd(N),N=N.redIAdd(N),u=C.redMul(R.redISub(l)).redISub(N)}return this.curve.jpoint(l,u,f)},o.prototype._dbl=function(){var l=this.curve.a,u=this.x,f=this.y,h=this.z,d=h.redSqr().redSqr(),g=u.redSqr(),p=f.redSqr(),m=g.redAdd(g).redIAdd(g).redIAdd(l.redMul(d)),y=u.redAdd(u);y=y.redIAdd(y);var v=y.redMul(p),_=m.redSqr().redISub(v.redAdd(v)),x=v.redISub(_),A=p.redSqr();A=A.redIAdd(A),A=A.redIAdd(A),A=A.redIAdd(A);var C=m.redMul(x).redISub(A),R=f.redAdd(f).redMul(h);return this.curve.jpoint(_,C,R)},o.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var l=this.x.redSqr(),u=this.y.redSqr(),f=this.z.redSqr(),h=u.redSqr(),d=l.redAdd(l).redIAdd(l),g=d.redSqr(),p=this.x.redAdd(u).redSqr().redISub(l).redISub(h);p=p.redIAdd(p),p=p.redAdd(p).redIAdd(p),p=p.redISub(g);var m=p.redSqr(),y=h.redIAdd(h);y=y.redIAdd(y),y=y.redIAdd(y),y=y.redIAdd(y);var v=d.redIAdd(p).redSqr().redISub(g).redISub(m).redISub(y),_=u.redMul(v);_=_.redIAdd(_),_=_.redIAdd(_);var x=this.x.redMul(m).redISub(_);x=x.redIAdd(x),x=x.redIAdd(x);var A=this.y.redMul(v.redMul(y.redISub(v)).redISub(p.redMul(m)));A=A.redIAdd(A),A=A.redIAdd(A),A=A.redIAdd(A);var C=this.z.redAdd(p).redSqr().redISub(f).redISub(m);return this.curve.jpoint(x,A,C)},o.prototype.mul=function(l,u){return l=new e(l,u),this.curve._wnafMul(this,l)},o.prototype.eq=function(l){if(l.type==="affine")return this.eq(l.toJ());if(this===l)return!0;var u=this.z.redSqr(),f=l.z.redSqr();if(this.x.redMul(f).redISub(l.x.redMul(u)).cmpn(0)!==0)return!1;var h=u.redMul(this.z),d=f.redMul(l.z);return this.y.redMul(d).redISub(l.y.redMul(h)).cmpn(0)===0},o.prototype.eqXToP=function(l){var u=this.z.redSqr(),f=l.toRed(this.curve.red).redMul(u);if(this.x.cmp(f)===0)return!0;for(var h=l.clone(),d=this.curve.redN.redMul(u);;){if(h.iadd(this.curve.n),h.cmp(this.curve.p)>=0)return!1;if(f.redIAdd(d),this.x.cmp(f)===0)return!0}},o.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},o.prototype.isInfinity=function(){return this.z.cmpn(0)===0},QR}var eP,mee;function Wct(){if(mee)return eP;mee=1;var t=za(),e=xr,r=mA(),n=Jl();function i(a){r.call(this,"mont",a),this.a=new t(a.a,16).toRed(this.red),this.b=new t(a.b,16).toRed(this.red),this.i4=new t(4).toRed(this.red).redInvm(),this.two=new t(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}e(i,r),eP=i,i.prototype.validate=function(o){var c=o.normalize().x,l=c.redSqr(),u=l.redMul(c).redAdd(l.redMul(this.a)).redAdd(c),f=u.redSqrt();return f.redSqr().cmp(u)===0};function s(a,o,c){r.BasePoint.call(this,a,"projective"),o===null&&c===null?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new t(o,16),this.z=new t(c,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}return e(s,r.BasePoint),i.prototype.decodePoint=function(o,c){return this.point(n.toArray(o,c),1)},i.prototype.point=function(o,c){return new s(this,o,c)},i.prototype.pointFromJSON=function(o){return s.fromJSON(this,o)},s.prototype.precompute=function(){},s.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())},s.fromJSON=function(o,c){return new s(o,c[0],c[1]||o.one)},s.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},s.prototype.isInfinity=function(){return this.z.cmpn(0)===0},s.prototype.dbl=function(){var o=this.x.redAdd(this.z),c=o.redSqr(),l=this.x.redSub(this.z),u=l.redSqr(),f=c.redSub(u),h=c.redMul(u),d=f.redMul(u.redAdd(this.curve.a24.redMul(f)));return this.curve.point(h,d)},s.prototype.add=function(){throw new Error("Not supported on Montgomery curve")},s.prototype.diffAdd=function(o,c){var l=this.x.redAdd(this.z),u=this.x.redSub(this.z),f=o.x.redAdd(o.z),h=o.x.redSub(o.z),d=h.redMul(l),g=f.redMul(u),p=c.z.redMul(d.redAdd(g).redSqr()),m=c.x.redMul(d.redISub(g).redSqr());return this.curve.point(p,m)},s.prototype.mul=function(o){for(var c=o.clone(),l=this,u=this.curve.point(null,null),f=this,h=[];c.cmpn(0)!==0;c.iushrn(1))h.push(c.andln(1));for(var d=h.length-1;d>=0;d--)h[d]===0?(l=l.diffAdd(u,f),u=u.dbl()):(u=l.diffAdd(u,f),l=l.dbl());return u},s.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")},s.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")},s.prototype.eq=function(o){return this.getX().cmp(o.getX())===0},s.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},s.prototype.getX=function(){return this.normalize(),this.x.fromRed()},eP}var tP,yee;function Kct(){if(yee)return tP;yee=1;var t=Jl(),e=za(),r=xr,n=mA(),i=t.assert;function s(o){this.twisted=(o.a|0)!==1,this.mOneA=this.twisted&&(o.a|0)===-1,this.extended=this.mOneA,n.call(this,"edwards",o),this.a=new e(o.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new e(o.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new e(o.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),i(!this.twisted||this.c.fromRed().cmpn(1)===0),this.oneC=(o.c|0)===1}r(s,n),tP=s,s.prototype._mulA=function(c){return this.mOneA?c.redNeg():this.a.redMul(c)},s.prototype._mulC=function(c){return this.oneC?c:this.c.redMul(c)},s.prototype.jpoint=function(c,l,u,f){return this.point(c,l,u,f)},s.prototype.pointFromX=function(c,l){c=new e(c,16),c.red||(c=c.toRed(this.red));var u=c.redSqr(),f=this.c2.redSub(this.a.redMul(u)),h=this.one.redSub(this.c2.redMul(this.d).redMul(u)),d=f.redMul(h.redInvm()),g=d.redSqrt();if(g.redSqr().redSub(d).cmp(this.zero)!==0)throw new Error("invalid point");var p=g.fromRed().isOdd();return(l&&!p||!l&&p)&&(g=g.redNeg()),this.point(c,g)},s.prototype.pointFromY=function(c,l){c=new e(c,16),c.red||(c=c.toRed(this.red));var u=c.redSqr(),f=u.redSub(this.c2),h=u.redMul(this.d).redMul(this.c2).redSub(this.a),d=f.redMul(h.redInvm());if(d.cmp(this.zero)===0){if(l)throw new Error("invalid point");return this.point(this.zero,c)}var g=d.redSqrt();if(g.redSqr().redSub(d).cmp(this.zero)!==0)throw new Error("invalid point");return g.fromRed().isOdd()!==l&&(g=g.redNeg()),this.point(g,c)},s.prototype.validate=function(c){if(c.isInfinity())return!0;c.normalize();var l=c.x.redSqr(),u=c.y.redSqr(),f=l.redMul(this.a).redAdd(u),h=this.c2.redMul(this.one.redAdd(this.d.redMul(l).redMul(u)));return f.cmp(h)===0};function a(o,c,l,u,f){n.BasePoint.call(this,o,"projective"),c===null&&l===null&&u===null?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new e(c,16),this.y=new e(l,16),this.z=u?new e(u,16):this.curve.one,this.t=f&&new e(f,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}return r(a,n.BasePoint),s.prototype.pointFromJSON=function(c){return a.fromJSON(this,c)},s.prototype.point=function(c,l,u,f){return new a(this,c,l,u,f)},a.fromJSON=function(c,l){return new a(c,l[0],l[1],l[2])},a.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},a.prototype.isInfinity=function(){return this.x.cmpn(0)===0&&(this.y.cmp(this.z)===0||this.zOne&&this.y.cmp(this.curve.c)===0)},a.prototype._extDbl=function(){var c=this.x.redSqr(),l=this.y.redSqr(),u=this.z.redSqr();u=u.redIAdd(u);var f=this.curve._mulA(c),h=this.x.redAdd(this.y).redSqr().redISub(c).redISub(l),d=f.redAdd(l),g=d.redSub(u),p=f.redSub(l),m=h.redMul(g),y=d.redMul(p),v=h.redMul(p),_=g.redMul(d);return this.curve.point(m,y,_,v)},a.prototype._projDbl=function(){var c=this.x.redAdd(this.y).redSqr(),l=this.x.redSqr(),u=this.y.redSqr(),f,h,d,g,p,m;if(this.curve.twisted){g=this.curve._mulA(l);var y=g.redAdd(u);this.zOne?(f=c.redSub(l).redSub(u).redMul(y.redSub(this.curve.two)),h=y.redMul(g.redSub(u)),d=y.redSqr().redSub(y).redSub(y)):(p=this.z.redSqr(),m=y.redSub(p).redISub(p),f=c.redSub(l).redISub(u).redMul(m),h=y.redMul(g.redSub(u)),d=y.redMul(m))}else g=l.redAdd(u),p=this.curve._mulC(this.z).redSqr(),m=g.redSub(p).redSub(p),f=this.curve._mulC(c.redISub(g)).redMul(m),h=this.curve._mulC(g).redMul(l.redISub(u)),d=g.redMul(m);return this.curve.point(f,h,d)},a.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},a.prototype._extAdd=function(c){var l=this.y.redSub(this.x).redMul(c.y.redSub(c.x)),u=this.y.redAdd(this.x).redMul(c.y.redAdd(c.x)),f=this.t.redMul(this.curve.dd).redMul(c.t),h=this.z.redMul(c.z.redAdd(c.z)),d=u.redSub(l),g=h.redSub(f),p=h.redAdd(f),m=u.redAdd(l),y=d.redMul(g),v=p.redMul(m),_=d.redMul(m),x=g.redMul(p);return this.curve.point(y,v,x,_)},a.prototype._projAdd=function(c){var l=this.z.redMul(c.z),u=l.redSqr(),f=this.x.redMul(c.x),h=this.y.redMul(c.y),d=this.curve.d.redMul(f).redMul(h),g=u.redSub(d),p=u.redAdd(d),m=this.x.redAdd(this.y).redMul(c.x.redAdd(c.y)).redISub(f).redISub(h),y=l.redMul(g).redMul(m),v,_;return this.curve.twisted?(v=l.redMul(p).redMul(h.redSub(this.curve._mulA(f))),_=g.redMul(p)):(v=l.redMul(p).redMul(h.redSub(f)),_=this.curve._mulC(g).redMul(p)),this.curve.point(y,v,_)},a.prototype.add=function(c){return this.isInfinity()?c:c.isInfinity()?this:this.curve.extended?this._extAdd(c):this._projAdd(c)},a.prototype.mul=function(c){return this._hasDoubles(c)?this.curve._fixedNafMul(this,c):this.curve._wnafMul(this,c)},a.prototype.mulAdd=function(c,l,u){return this.curve._wnafMulAdd(1,[this,l],[c,u],2,!1)},a.prototype.jmulAdd=function(c,l,u){return this.curve._wnafMulAdd(1,[this,l],[c,u],2,!0)},a.prototype.normalize=function(){if(this.zOne)return this;var c=this.z.redInvm();return this.x=this.x.redMul(c),this.y=this.y.redMul(c),this.t&&(this.t=this.t.redMul(c)),this.z=this.curve.one,this.zOne=!0,this},a.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},a.prototype.getX=function(){return this.normalize(),this.x.fromRed()},a.prototype.getY=function(){return this.normalize(),this.y.fromRed()},a.prototype.eq=function(c){return this===c||this.getX().cmp(c.getX())===0&&this.getY().cmp(c.getY())===0},a.prototype.eqXToP=function(c){var l=c.toRed(this.curve.red).redMul(this.z);if(this.x.cmp(l)===0)return!0;for(var u=c.clone(),f=this.curve.redN.redMul(this.z);;){if(u.iadd(this.curve.n),u.cmp(this.curve.p)>=0)return!1;if(l.redIAdd(f),this.x.cmp(l)===0)return!0}},a.prototype.toP=a.prototype.normalize,a.prototype.mixedAdd=a.prototype.add,tP}var vee;function G1e(){return vee||(vee=1,function(t){var e=t;e.base=mA(),e.short=Hct(),e.mont=Wct(),e.edwards=Kct()}(ZR)),ZR}var rP={},nP={},oi={},bee;function Eh(){if(bee)return oi;bee=1;var t=Zl(),e=xr;oi.inherits=e;function r(E,k){return(E.charCodeAt(k)&64512)!==55296||k<0||k+1>=E.length?!1:(E.charCodeAt(k+1)&64512)===56320}function n(E,k){if(Array.isArray(E))return E.slice();if(!E)return[];var w=[];if(typeof E=="string")if(k){if(k==="hex")for(E=E.replace(/[^a-z0-9]+/ig,""),E.length%2!==0&&(E="0"+E),L=0;L<E.length;L+=2)w.push(parseInt(E[L]+E[L+1],16))}else for(var T=0,L=0;L<E.length;L++){var I=E.charCodeAt(L);I<128?w[T++]=I:I<2048?(w[T++]=I>>6|192,w[T++]=I&63|128):r(E,L)?(I=65536+((I&1023)<<10)+(E.charCodeAt(++L)&1023),w[T++]=I>>18|240,w[T++]=I>>12&63|128,w[T++]=I>>6&63|128,w[T++]=I&63|128):(w[T++]=I>>12|224,w[T++]=I>>6&63|128,w[T++]=I&63|128)}else for(L=0;L<E.length;L++)w[L]=E[L]|0;return w}oi.toArray=n;function i(E){for(var k="",w=0;w<E.length;w++)k+=o(E[w].toString(16));return k}oi.toHex=i;function s(E){var k=E>>>24|E>>>8&65280|E<<8&16711680|(E&255)<<24;return k>>>0}oi.htonl=s;function a(E,k){for(var w="",T=0;T<E.length;T++){var L=E[T];k==="little"&&(L=s(L)),w+=c(L.toString(16))}return w}oi.toHex32=a;function o(E){return E.length===1?"0"+E:E}oi.zero2=o;function c(E){return E.length===7?"0"+E:E.length===6?"00"+E:E.length===5?"000"+E:E.length===4?"0000"+E:E.length===3?"00000"+E:E.length===2?"000000"+E:E.length===1?"0000000"+E:E}oi.zero8=c;function l(E,k,w,T){var L=w-k;t(L%4===0);for(var I=new Array(L/4),U=0,O=k;U<I.length;U++,O+=4){var D;T==="big"?D=E[O]<<24|E[O+1]<<16|E[O+2]<<8|E[O+3]:D=E[O+3]<<24|E[O+2]<<16|E[O+1]<<8|E[O],I[U]=D>>>0}return I}oi.join32=l;function u(E,k){for(var w=new Array(E.length*4),T=0,L=0;T<E.length;T++,L+=4){var I=E[T];k==="big"?(w[L]=I>>>24,w[L+1]=I>>>16&255,w[L+2]=I>>>8&255,w[L+3]=I&255):(w[L+3]=I>>>24,w[L+2]=I>>>16&255,w[L+1]=I>>>8&255,w[L]=I&255)}return w}oi.split32=u;function f(E,k){return E>>>k|E<<32-k}oi.rotr32=f;function h(E,k){return E<<k|E>>>32-k}oi.rotl32=h;function d(E,k){return E+k>>>0}oi.sum32=d;function g(E,k,w){return E+k+w>>>0}oi.sum32_3=g;function p(E,k,w,T){return E+k+w+T>>>0}oi.sum32_4=p;function m(E,k,w,T,L){return E+k+w+T+L>>>0}oi.sum32_5=m;function y(E,k,w,T){var L=E[k],I=E[k+1],U=T+I>>>0,O=(U<T?1:0)+w+L;E[k]=O>>>0,E[k+1]=U}oi.sum64=y;function v(E,k,w,T){var L=k+T>>>0,I=(L<k?1:0)+E+w;return I>>>0}oi.sum64_hi=v;function _(E,k,w,T){var L=k+T;return L>>>0}oi.sum64_lo=_;function x(E,k,w,T,L,I,U,O){var D=0,P=k;P=P+T>>>0,D+=P<k?1:0,P=P+I>>>0,D+=P<I?1:0,P=P+O>>>0,D+=P<O?1:0;var B=E+w+L+U+D;return B>>>0}oi.sum64_4_hi=x;function A(E,k,w,T,L,I,U,O){var D=k+T+I+O;return D>>>0}oi.sum64_4_lo=A;function C(E,k,w,T,L,I,U,O,D,P){var B=0,z=k;z=z+T>>>0,B+=z<k?1:0,z=z+I>>>0,B+=z<I?1:0,z=z+O>>>0,B+=z<O?1:0,z=z+P>>>0,B+=z<P?1:0;var F=E+w+L+U+D+B;return F>>>0}oi.sum64_5_hi=C;function R(E,k,w,T,L,I,U,O,D,P){var B=k+T+I+O+P;return B>>>0}oi.sum64_5_lo=R;function M(E,k,w){var T=k<<32-w|E>>>w;return T>>>0}oi.rotr64_hi=M;function N(E,k,w){var T=E<<32-w|k>>>w;return T>>>0}oi.rotr64_lo=N;function Y(E,k,w){return E>>>w}oi.shr64_hi=Y;function H(E,k,w){var T=E<<32-w|k>>>w;return T>>>0}return oi.shr64_lo=H,oi}var iP={},wee;function $6(){if(wee)return iP;wee=1;var t=Eh(),e=Zl();function r(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}return iP.BlockHash=r,r.prototype.update=function(i,s){if(i=t.toArray(i,s),this.pending?this.pending=this.pending.concat(i):this.pending=i,this.pendingTotal+=i.length,this.pending.length>=this._delta8){i=this.pending;var a=i.length%this._delta8;this.pending=i.slice(i.length-a,i.length),this.pending.length===0&&(this.pending=null),i=t.join32(i,0,i.length-a,this.endian);for(var o=0;o<i.length;o+=this._delta32)this._update(i,o,o+this._delta32)}return this},r.prototype.digest=function(i){return this.update(this._pad()),e(this.pending===null),this._digest(i)},r.prototype._pad=function(){var i=this.pendingTotal,s=this._delta8,a=s-(i+this.padLength)%s,o=new Array(a+this.padLength);o[0]=128;for(var c=1;c<a;c++)o[c]=0;if(i<<=3,this.endian==="big"){for(var l=8;l<this.padLength;l++)o[c++]=0;o[c++]=0,o[c++]=0,o[c++]=0,o[c++]=0,o[c++]=i>>>24&255,o[c++]=i>>>16&255,o[c++]=i>>>8&255,o[c++]=i&255}else for(o[c++]=i&255,o[c++]=i>>>8&255,o[c++]=i>>>16&255,o[c++]=i>>>24&255,o[c++]=0,o[c++]=0,o[c++]=0,o[c++]=0,l=8;l<this.padLength;l++)o[c++]=0;return o},iP}var $p={},mf={},_ee;function Y1e(){if(_ee)return mf;_ee=1;var t=Eh(),e=t.rotr32;function r(u,f,h,d){if(u===0)return n(f,h,d);if(u===1||u===3)return s(f,h,d);if(u===2)return i(f,h,d)}mf.ft_1=r;function n(u,f,h){return u&f^~u&h}mf.ch32=n;function i(u,f,h){return u&f^u&h^f&h}mf.maj32=i;function s(u,f,h){return u^f^h}mf.p32=s;function a(u){return e(u,2)^e(u,13)^e(u,22)}mf.s0_256=a;function o(u){return e(u,6)^e(u,11)^e(u,25)}mf.s1_256=o;function c(u){return e(u,7)^e(u,18)^u>>>3}mf.g0_256=c;function l(u){return e(u,17)^e(u,19)^u>>>10}return mf.g1_256=l,mf}var sP,xee;function Gct(){if(xee)return sP;xee=1;var t=Eh(),e=$6(),r=Y1e(),n=t.rotl32,i=t.sum32,s=t.sum32_5,a=r.ft_1,o=e.BlockHash,c=[1518500249,1859775393,2400959708,3395469782];function l(){if(!(this instanceof l))return new l;o.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}return t.inherits(l,o),sP=l,l.blockSize=512,l.outSize=160,l.hmacStrength=80,l.padLength=64,l.prototype._update=function(f,h){for(var d=this.W,g=0;g<16;g++)d[g]=f[h+g];for(;g<d.length;g++)d[g]=n(d[g-3]^d[g-8]^d[g-14]^d[g-16],1);var p=this.h[0],m=this.h[1],y=this.h[2],v=this.h[3],_=this.h[4];for(g=0;g<d.length;g++){var x=~~(g/20),A=s(n(p,5),a(x,m,y,v),_,d[g],c[x]);_=v,v=y,y=n(m,30),m=p,p=A}this.h[0]=i(this.h[0],p),this.h[1]=i(this.h[1],m),this.h[2]=i(this.h[2],y),this.h[3]=i(this.h[3],v),this.h[4]=i(this.h[4],_)},l.prototype._digest=function(f){return f==="hex"?t.toHex32(this.h,"big"):t.split32(this.h,"big")},sP}var aP,Eee;function X1e(){if(Eee)return aP;Eee=1;var t=Eh(),e=$6(),r=Y1e(),n=Zl(),i=t.sum32,s=t.sum32_4,a=t.sum32_5,o=r.ch32,c=r.maj32,l=r.s0_256,u=r.s1_256,f=r.g0_256,h=r.g1_256,d=e.BlockHash,g=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function p(){if(!(this instanceof p))return new p;d.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=g,this.W=new Array(64)}return t.inherits(p,d),aP=p,p.blockSize=512,p.outSize=256,p.hmacStrength=192,p.padLength=64,p.prototype._update=function(y,v){for(var _=this.W,x=0;x<16;x++)_[x]=y[v+x];for(;x<_.length;x++)_[x]=s(h(_[x-2]),_[x-7],f(_[x-15]),_[x-16]);var A=this.h[0],C=this.h[1],R=this.h[2],M=this.h[3],N=this.h[4],Y=this.h[5],H=this.h[6],E=this.h[7];for(n(this.k.length===_.length),x=0;x<_.length;x++){var k=a(E,u(N),o(N,Y,H),this.k[x],_[x]),w=i(l(A),c(A,C,R));E=H,H=Y,Y=N,N=i(M,k),M=R,R=C,C=A,A=i(k,w)}this.h[0]=i(this.h[0],A),this.h[1]=i(this.h[1],C),this.h[2]=i(this.h[2],R),this.h[3]=i(this.h[3],M),this.h[4]=i(this.h[4],N),this.h[5]=i(this.h[5],Y),this.h[6]=i(this.h[6],H),this.h[7]=i(this.h[7],E)},p.prototype._digest=function(y){return y==="hex"?t.toHex32(this.h,"big"):t.split32(this.h,"big")},aP}var oP,See;function Yct(){if(See)return oP;See=1;var t=Eh(),e=X1e();function r(){if(!(this instanceof r))return new r;e.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}return t.inherits(r,e),oP=r,r.blockSize=512,r.outSize=224,r.hmacStrength=192,r.padLength=64,r.prototype._digest=function(i){return i==="hex"?t.toHex32(this.h.slice(0,7),"big"):t.split32(this.h.slice(0,7),"big")},oP}var cP,Aee;function Z1e(){if(Aee)return cP;Aee=1;var t=Eh(),e=$6(),r=Zl(),n=t.rotr64_hi,i=t.rotr64_lo,s=t.shr64_hi,a=t.shr64_lo,o=t.sum64,c=t.sum64_hi,l=t.sum64_lo,u=t.sum64_4_hi,f=t.sum64_4_lo,h=t.sum64_5_hi,d=t.sum64_5_lo,g=e.BlockHash,p=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function m(){if(!(this instanceof m))return new m;g.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=p,this.W=new Array(160)}t.inherits(m,g),cP=m,m.blockSize=1024,m.outSize=512,m.hmacStrength=192,m.padLength=128,m.prototype._prepareBlock=function(w,T){for(var L=this.W,I=0;I<32;I++)L[I]=w[T+I];for(;I<L.length;I+=2){var U=H(L[I-4],L[I-3]),O=E(L[I-4],L[I-3]),D=L[I-14],P=L[I-13],B=N(L[I-30],L[I-29]),z=Y(L[I-30],L[I-29]),F=L[I-32],X=L[I-31];L[I]=u(U,O,D,P,B,z,F,X),L[I+1]=f(U,O,D,P,B,z,F,X)}},m.prototype._update=function(w,T){this._prepareBlock(w,T);var L=this.W,I=this.h[0],U=this.h[1],O=this.h[2],D=this.h[3],P=this.h[4],B=this.h[5],z=this.h[6],F=this.h[7],X=this.h[8],W=this.h[9],q=this.h[10],G=this.h[11],ee=this.h[12],ae=this.h[13],te=this.h[14],K=this.h[15];r(this.k.length===L.length);for(var re=0;re<L.length;re+=2){var V=te,oe=K,he=R(X,W),ne=M(X,W),ie=y(X,W,q,G,ee),ce=v(X,W,q,G,ee,ae),ve=this.k[re],Ee=this.k[re+1],ge=L[re],Pe=L[re+1],Ce=h(V,oe,he,ne,ie,ce,ve,Ee,ge,Pe),Ie=d(V,oe,he,ne,ie,ce,ve,Ee,ge,Pe);V=A(I,U),oe=C(I,U),he=_(I,U,O,D,P),ne=x(I,U,O,D,P,B);var $e=c(V,oe,he,ne),se=l(V,oe,he,ne);te=ee,K=ae,ee=q,ae=G,q=X,G=W,X=c(z,F,Ce,Ie),W=l(F,F,Ce,Ie),z=P,F=B,P=O,B=D,O=I,D=U,I=c(Ce,Ie,$e,se),U=l(Ce,Ie,$e,se)}o(this.h,0,I,U),o(this.h,2,O,D),o(this.h,4,P,B),o(this.h,6,z,F),o(this.h,8,X,W),o(this.h,10,q,G),o(this.h,12,ee,ae),o(this.h,14,te,K)},m.prototype._digest=function(w){return w==="hex"?t.toHex32(this.h,"big"):t.split32(this.h,"big")};function y(k,w,T,L,I){var U=k&T^~k&I;return U<0&&(U+=4294967296),U}function v(k,w,T,L,I,U){var O=w&L^~w&U;return O<0&&(O+=4294967296),O}function _(k,w,T,L,I){var U=k&T^k&I^T&I;return U<0&&(U+=4294967296),U}function x(k,w,T,L,I,U){var O=w&L^w&U^L&U;return O<0&&(O+=4294967296),O}function A(k,w){var T=n(k,w,28),L=n(w,k,2),I=n(w,k,7),U=T^L^I;return U<0&&(U+=4294967296),U}function C(k,w){var T=i(k,w,28),L=i(w,k,2),I=i(w,k,7),U=T^L^I;return U<0&&(U+=4294967296),U}function R(k,w){var T=n(k,w,14),L=n(k,w,18),I=n(w,k,9),U=T^L^I;return U<0&&(U+=4294967296),U}function M(k,w){var T=i(k,w,14),L=i(k,w,18),I=i(w,k,9),U=T^L^I;return U<0&&(U+=4294967296),U}function N(k,w){var T=n(k,w,1),L=n(k,w,8),I=s(k,w,7),U=T^L^I;return U<0&&(U+=4294967296),U}function Y(k,w){var T=i(k,w,1),L=i(k,w,8),I=a(k,w,7),U=T^L^I;return U<0&&(U+=4294967296),U}function H(k,w){var T=n(k,w,19),L=n(w,k,29),I=s(k,w,6),U=T^L^I;return U<0&&(U+=4294967296),U}function E(k,w){var T=i(k,w,19),L=i(w,k,29),I=a(k,w,6),U=T^L^I;return U<0&&(U+=4294967296),U}return cP}var lP,Tee;function Xct(){if(Tee)return lP;Tee=1;var t=Eh(),e=Z1e();function r(){if(!(this instanceof r))return new r;e.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}return t.inherits(r,e),lP=r,r.blockSize=1024,r.outSize=384,r.hmacStrength=192,r.padLength=128,r.prototype._digest=function(i){return i==="hex"?t.toHex32(this.h.slice(0,12),"big"):t.split32(this.h.slice(0,12),"big")},lP}var kee;function Zct(){return kee||(kee=1,$p.sha1=Gct(),$p.sha224=Yct(),$p.sha256=X1e(),$p.sha384=Xct(),$p.sha512=Z1e()),$p}var uP={},Cee;function Jct(){if(Cee)return uP;Cee=1;var t=Eh(),e=$6(),r=t.rotl32,n=t.sum32,i=t.sum32_3,s=t.sum32_4,a=e.BlockHash;function o(){if(!(this instanceof o))return new o;a.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}t.inherits(o,a),uP.ripemd160=o,o.blockSize=512,o.outSize=160,o.hmacStrength=192,o.padLength=64,o.prototype._update=function(m,y){for(var v=this.h[0],_=this.h[1],x=this.h[2],A=this.h[3],C=this.h[4],R=v,M=_,N=x,Y=A,H=C,E=0;E<80;E++){var k=n(r(s(v,c(E,_,x,A),m[f[E]+y],l(E)),d[E]),C);v=C,C=A,A=r(x,10),x=_,_=k,k=n(r(s(R,c(79-E,M,N,Y),m[h[E]+y],u(E)),g[E]),H),R=H,H=Y,Y=r(N,10),N=M,M=k}k=i(this.h[1],x,Y),this.h[1]=i(this.h[2],A,H),this.h[2]=i(this.h[3],C,R),this.h[3]=i(this.h[4],v,M),this.h[4]=i(this.h[0],_,N),this.h[0]=k},o.prototype._digest=function(m){return m==="hex"?t.toHex32(this.h,"little"):t.split32(this.h,"little")};function c(p,m,y,v){return p<=15?m^y^v:p<=31?m&y|~m&v:p<=47?(m|~y)^v:p<=63?m&v|y&~v:m^(y|~v)}function l(p){return p<=15?0:p<=31?1518500249:p<=47?1859775393:p<=63?2400959708:2840853838}function u(p){return p<=15?1352829926:p<=31?1548603684:p<=47?1836072691:p<=63?2053994217:0}var f=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],h=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],d=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],g=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11];return uP}var fP,Iee;function Qct(){if(Iee)return fP;Iee=1;var t=Eh(),e=Zl();function r(n,i,s){if(!(this instanceof r))return new r(n,i,s);this.Hash=n,this.blockSize=n.blockSize/8,this.outSize=n.outSize/8,this.inner=null,this.outer=null,this._init(t.toArray(i,s))}return fP=r,r.prototype._init=function(i){i.length>this.blockSize&&(i=new this.Hash().update(i).digest()),e(i.length<=this.blockSize);for(var s=i.length;s<this.blockSize;s++)i.push(0);for(s=0;s<i.length;s++)i[s]^=54;for(this.inner=new this.Hash().update(i),s=0;s<i.length;s++)i[s]^=106;this.outer=new this.Hash().update(i)},r.prototype.update=function(i,s){return this.inner.update(i,s),this},r.prototype.digest=function(i){return this.outer.update(this.inner.digest()),this.outer.digest(i)},fP}var Ree;function bU(){return Ree||(Ree=1,function(t){var e=t;e.utils=Eh(),e.common=$6(),e.sha=Zct(),e.ripemd=Jct(),e.hmac=Qct(),e.sha1=e.sha.sha1,e.sha256=e.sha.sha256,e.sha224=e.sha.sha224,e.sha384=e.sha.sha384,e.sha512=e.sha.sha512,e.ripemd160=e.ripemd.ripemd160}(nP)),nP}var hP,Pee;function elt(){return Pee||(Pee=1,hP={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}),hP}var Bee;function wU(){return Bee||(Bee=1,function(t){var e=t,r=bU(),n=G1e(),i=Jl(),s=i.assert;function a(l){l.type==="short"?this.curve=new n.short(l):l.type==="edwards"?this.curve=new n.edwards(l):this.curve=new n.mont(l),this.g=this.curve.g,this.n=this.curve.n,this.hash=l.hash,s(this.g.validate(),"Invalid curve"),s(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}e.PresetCurve=a;function o(l,u){Object.defineProperty(e,l,{configurable:!0,enumerable:!0,get:function(){var f=new a(u);return Object.defineProperty(e,l,{configurable:!0,enumerable:!0,value:f}),f}})}o("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:r.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),o("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:r.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),o("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:r.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),o("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:r.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),o("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:r.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),o("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:r.sha256,gRed:!1,g:["9"]}),o("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:r.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var c;try{c=elt()}catch{c=void 0}o("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:r.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",c]})}(rP)),rP}var dP,Dee;function tlt(){if(Dee)return dP;Dee=1;var t=bU(),e=K1e(),r=Zl();function n(i){if(!(this instanceof n))return new n(i);this.hash=i.hash,this.predResist=!!i.predResist,this.outLen=this.hash.outSize,this.minEntropy=i.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var s=e.toArray(i.entropy,i.entropyEnc||"hex"),a=e.toArray(i.nonce,i.nonceEnc||"hex"),o=e.toArray(i.pers,i.persEnc||"hex");r(s.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(s,a,o)}return dP=n,n.prototype._init=function(s,a,o){var c=s.concat(a).concat(o);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var l=0;l<this.V.length;l++)this.K[l]=0,this.V[l]=1;this._update(c),this._reseed=1,this.reseedInterval=281474976710656},n.prototype._hmac=function(){return new t.hmac(this.hash,this.K)},n.prototype._update=function(s){var a=this._hmac().update(this.V).update([0]);s&&(a=a.update(s)),this.K=a.digest(),this.V=this._hmac().update(this.V).digest(),s&&(this.K=this._hmac().update(this.V).update([1]).update(s).digest(),this.V=this._hmac().update(this.V).digest())},n.prototype.reseed=function(s,a,o,c){typeof a!="string"&&(c=o,o=a,a=null),s=e.toArray(s,a),o=e.toArray(o,c),r(s.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(s.concat(o||[])),this._reseed=1},n.prototype.generate=function(s,a,o,c){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof a!="string"&&(c=o,o=a,a=null),o&&(o=e.toArray(o,c||"hex"),this._update(o));for(var l=[];l.length<s;)this.V=this._hmac().update(this.V).digest(),l=l.concat(this.V);var u=l.slice(0,s);return this._update(o),this._reseed++,e.encode(u,a)},dP}var pP,Oee;function rlt(){if(Oee)return pP;Oee=1;var t=za(),e=Jl(),r=e.assert;function n(i,s){this.ec=i,this.priv=null,this.pub=null,s.priv&&this._importPrivate(s.priv,s.privEnc),s.pub&&this._importPublic(s.pub,s.pubEnc)}return pP=n,n.fromPublic=function(s,a,o){return a instanceof n?a:new n(s,{pub:a,pubEnc:o})},n.fromPrivate=function(s,a,o){return a instanceof n?a:new n(s,{priv:a,privEnc:o})},n.prototype.validate=function(){var s=this.getPublic();return s.isInfinity()?{result:!1,reason:"Invalid public key"}:s.validate()?s.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},n.prototype.getPublic=function(s,a){return typeof s=="string"&&(a=s,s=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),a?this.pub.encode(a,s):this.pub},n.prototype.getPrivate=function(s){return s==="hex"?this.priv.toString(16,2):this.priv},n.prototype._importPrivate=function(s,a){this.priv=new t(s,a||16),this.priv=this.priv.umod(this.ec.curve.n)},n.prototype._importPublic=function(s,a){if(s.x||s.y){this.ec.curve.type==="mont"?r(s.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&r(s.x&&s.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(s.x,s.y);return}this.pub=this.ec.curve.decodePoint(s,a)},n.prototype.derive=function(s){return s.validate()||r(s.validate(),"public point not validated"),s.mul(this.priv).getX()},n.prototype.sign=function(s,a,o){return this.ec.sign(s,this,a,o)},n.prototype.verify=function(s,a){return this.ec.verify(s,a,this)},n.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"},pP}var gP,Nee;function nlt(){if(Nee)return gP;Nee=1;var t=za(),e=Jl(),r=e.assert;function n(c,l){if(c instanceof n)return c;this._importDER(c,l)||(r(c.r&&c.s,"Signature without r or s"),this.r=new t(c.r,16),this.s=new t(c.s,16),c.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=c.recoveryParam)}gP=n;function i(){this.place=0}function s(c,l){var u=c[l.place++];if(!(u&128))return u;var f=u&15;if(f===0||f>4||c[l.place]===0)return!1;for(var h=0,d=0,g=l.place;d<f;d++,g++)h<<=8,h|=c[g],h>>>=0;return h<=127?!1:(l.place=g,h)}function a(c){for(var l=0,u=c.length-1;!c[l]&&!(c[l+1]&128)&&l<u;)l++;return l===0?c:c.slice(l)}n.prototype._importDER=function(l,u){l=e.toArray(l,u);var f=new i;if(l[f.place++]!==48)return!1;var h=s(l,f);if(h===!1||h+f.place!==l.length||l[f.place++]!==2)return!1;var d=s(l,f);if(d===!1||l[f.place]&128)return!1;var g=l.slice(f.place,d+f.place);if(f.place+=d,l[f.place++]!==2)return!1;var p=s(l,f);if(p===!1||l.length!==p+f.place||l[f.place]&128)return!1;var m=l.slice(f.place,p+f.place);if(g[0]===0)if(g[1]&128)g=g.slice(1);else return!1;if(m[0]===0)if(m[1]&128)m=m.slice(1);else return!1;return this.r=new t(g),this.s=new t(m),this.recoveryParam=null,!0};function o(c,l){if(l<128){c.push(l);return}var u=1+(Math.log(l)/Math.LN2>>>3);for(c.push(u|128);--u;)c.push(l>>>(u<<3)&255);c.push(l)}return n.prototype.toDER=function(l){var u=this.r.toArray(),f=this.s.toArray();for(u[0]&128&&(u=[0].concat(u)),f[0]&128&&(f=[0].concat(f)),u=a(u),f=a(f);!f[0]&&!(f[1]&128);)f=f.slice(1);var h=[2];o(h,u.length),h=h.concat(u),h.push(2),o(h,f.length);var d=h.concat(f),g=[48];return o(g,d.length),g=g.concat(d),e.encode(g,l)},gP}var mP,Mee;function ilt(){if(Mee)return mP;Mee=1;var t=za(),e=tlt(),r=Jl(),n=wU(),i=mU(),s=r.assert,a=rlt(),o=nlt();function c(l){if(!(this instanceof c))return new c(l);typeof l=="string"&&(s(Object.prototype.hasOwnProperty.call(n,l),"Unknown curve "+l),l=n[l]),l instanceof n.PresetCurve&&(l={curve:l}),this.curve=l.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=l.curve.g,this.g.precompute(l.curve.n.bitLength()+1),this.hash=l.hash||l.curve.hash}return mP=c,c.prototype.keyPair=function(u){return new a(this,u)},c.prototype.keyFromPrivate=function(u,f){return a.fromPrivate(this,u,f)},c.prototype.keyFromPublic=function(u,f){return a.fromPublic(this,u,f)},c.prototype.genKeyPair=function(u){u||(u={});for(var f=new e({hash:this.hash,pers:u.pers,persEnc:u.persEnc||"utf8",entropy:u.entropy||i(this.hash.hmacStrength),entropyEnc:u.entropy&&u.entropyEnc||"utf8",nonce:this.n.toArray()}),h=this.n.byteLength(),d=this.n.sub(new t(2));;){var g=new t(f.generate(h));if(!(g.cmp(d)>0))return g.iaddn(1),this.keyFromPrivate(g)}},c.prototype._truncateToN=function(u,f){var h=u.byteLength()*8-this.n.bitLength();return h>0&&(u=u.ushrn(h)),!f&&u.cmp(this.n)>=0?u.sub(this.n):u},c.prototype.sign=function(u,f,h,d){typeof h=="object"&&(d=h,h=null),d||(d={}),f=this.keyFromPrivate(f,h),u=this._truncateToN(new t(u,16));for(var g=this.n.byteLength(),p=f.getPrivate().toArray("be",g),m=u.toArray("be",g),y=new e({hash:this.hash,entropy:p,nonce:m,pers:d.pers,persEnc:d.persEnc||"utf8"}),v=this.n.sub(new t(1)),_=0;;_++){var x=d.k?d.k(_):new t(y.generate(this.n.byteLength()));if(x=this._truncateToN(x,!0),!(x.cmpn(1)<=0||x.cmp(v)>=0)){var A=this.g.mul(x);if(!A.isInfinity()){var C=A.getX(),R=C.umod(this.n);if(R.cmpn(0)!==0){var M=x.invm(this.n).mul(R.mul(f.getPrivate()).iadd(u));if(M=M.umod(this.n),M.cmpn(0)!==0){var N=(A.getY().isOdd()?1:0)|(C.cmp(R)!==0?2:0);return d.canonical&&M.cmp(this.nh)>0&&(M=this.n.sub(M),N^=1),new o({r:R,s:M,recoveryParam:N})}}}}}},c.prototype.verify=function(u,f,h,d){u=this._truncateToN(new t(u,16)),h=this.keyFromPublic(h,d),f=new o(f,"hex");var g=f.r,p=f.s;if(g.cmpn(1)<0||g.cmp(this.n)>=0||p.cmpn(1)<0||p.cmp(this.n)>=0)return!1;var m=p.invm(this.n),y=m.mul(u).umod(this.n),v=m.mul(g).umod(this.n),_;return this.curve._maxwellTrick?(_=this.g.jmulAdd(y,h.getPublic(),v),_.isInfinity()?!1:_.eqXToP(g)):(_=this.g.mulAdd(y,h.getPublic(),v),_.isInfinity()?!1:_.getX().umod(this.n).cmp(g)===0)},c.prototype.recoverPubKey=function(l,u,f,h){s((3&f)===f,"The recovery param is more than two bits"),u=new o(u,h);var d=this.n,g=new t(l),p=u.r,m=u.s,y=f&1,v=f>>1;if(p.cmp(this.curve.p.umod(this.curve.n))>=0&&v)throw new Error("Unable to find sencond key candinate");v?p=this.curve.pointFromX(p.add(this.curve.n),y):p=this.curve.pointFromX(p,y);var _=u.r.invm(d),x=d.sub(g).mul(_).umod(d),A=m.mul(_).umod(d);return this.g.mulAdd(x,p,A)},c.prototype.getKeyRecoveryParam=function(l,u,f,h){if(u=new o(u,h),u.recoveryParam!==null)return u.recoveryParam;for(var d=0;d<4;d++){var g;try{g=this.recoverPubKey(l,u,d)}catch{continue}if(g.eq(f))return d}throw new Error("Unable to find valid recovery factor")},mP}var yP,Lee;function slt(){if(Lee)return yP;Lee=1;var t=Jl(),e=t.assert,r=t.parseBytes,n=t.cachedProperty;function i(s,a){this.eddsa=s,this._secret=r(a.secret),s.isPoint(a.pub)?this._pub=a.pub:this._pubBytes=r(a.pub)}return i.fromPublic=function(a,o){return o instanceof i?o:new i(a,{pub:o})},i.fromSecret=function(a,o){return o instanceof i?o:new i(a,{secret:o})},i.prototype.secret=function(){return this._secret},n(i,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())}),n(i,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())}),n(i,"privBytes",function(){var a=this.eddsa,o=this.hash(),c=a.encodingLength-1,l=o.slice(0,a.encodingLength);return l[0]&=248,l[c]&=127,l[c]|=64,l}),n(i,"priv",function(){return this.eddsa.decodeInt(this.privBytes())}),n(i,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()}),n(i,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)}),i.prototype.sign=function(a){return e(this._secret,"KeyPair can only verify"),this.eddsa.sign(a,this)},i.prototype.verify=function(a,o){return this.eddsa.verify(a,o,this)},i.prototype.getSecret=function(a){return e(this._secret,"KeyPair is public only"),t.encode(this.secret(),a)},i.prototype.getPublic=function(a){return t.encode(this.pubBytes(),a)},yP=i,yP}var vP,Fee;function alt(){if(Fee)return vP;Fee=1;var t=za(),e=Jl(),r=e.assert,n=e.cachedProperty,i=e.parseBytes;function s(a,o){this.eddsa=a,typeof o!="object"&&(o=i(o)),Array.isArray(o)&&(r(o.length===a.encodingLength*2,"Signature has invalid size"),o={R:o.slice(0,a.encodingLength),S:o.slice(a.encodingLength)}),r(o.R&&o.S,"Signature without R or S"),a.isPoint(o.R)&&(this._R=o.R),o.S instanceof t&&(this._S=o.S),this._Rencoded=Array.isArray(o.R)?o.R:o.Rencoded,this._Sencoded=Array.isArray(o.S)?o.S:o.Sencoded}return n(s,"S",function(){return this.eddsa.decodeInt(this.Sencoded())}),n(s,"R",function(){return this.eddsa.decodePoint(this.Rencoded())}),n(s,"Rencoded",function(){return this.eddsa.encodePoint(this.R())}),n(s,"Sencoded",function(){return this.eddsa.encodeInt(this.S())}),s.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())},s.prototype.toHex=function(){return e.encode(this.toBytes(),"hex").toUpperCase()},vP=s,vP}var bP,$ee;function olt(){if($ee)return bP;$ee=1;var t=bU(),e=wU(),r=Jl(),n=r.assert,i=r.parseBytes,s=slt(),a=alt();function o(c){if(n(c==="ed25519","only tested with ed25519 so far"),!(this instanceof o))return new o(c);c=e[c].curve,this.curve=c,this.g=c.g,this.g.precompute(c.n.bitLength()+1),this.pointClass=c.point().constructor,this.encodingLength=Math.ceil(c.n.bitLength()/8),this.hash=t.sha512}return bP=o,o.prototype.sign=function(l,u){l=i(l);var f=this.keyFromSecret(u),h=this.hashInt(f.messagePrefix(),l),d=this.g.mul(h),g=this.encodePoint(d),p=this.hashInt(g,f.pubBytes(),l).mul(f.priv()),m=h.add(p).umod(this.curve.n);return this.makeSignature({R:d,S:m,Rencoded:g})},o.prototype.verify=function(l,u,f){if(l=i(l),u=this.makeSignature(u),u.S().gte(u.eddsa.curve.n)||u.S().isNeg())return!1;var h=this.keyFromPublic(f),d=this.hashInt(u.Rencoded(),h.pubBytes(),l),g=this.g.mul(u.S()),p=u.R().add(h.pub().mul(d));return p.eq(g)},o.prototype.hashInt=function(){for(var l=this.hash(),u=0;u<arguments.length;u++)l.update(arguments[u]);return r.intFromLE(l.digest()).umod(this.curve.n)},o.prototype.keyFromPublic=function(l){return s.fromPublic(this,l)},o.prototype.keyFromSecret=function(l){return s.fromSecret(this,l)},o.prototype.makeSignature=function(l){return l instanceof a?l:new a(this,l)},o.prototype.encodePoint=function(l){var u=l.getY().toArray("le",this.encodingLength);return u[this.encodingLength-1]|=l.getX().isOdd()?128:0,u},o.prototype.decodePoint=function(l){l=r.parseBytes(l);var u=l.length-1,f=l.slice(0,u).concat(l[u]&-129),h=(l[u]&128)!==0,d=r.intFromLE(f);return this.curve.pointFromY(d,h)},o.prototype.encodeInt=function(l){return l.toArray("le",this.encodingLength)},o.prototype.decodeInt=function(l){return r.intFromLE(l)},o.prototype.isPoint=function(l){return l instanceof this.pointClass},bP}var Uee;function _U(){return Uee||(Uee=1,function(t){var e=t;e.version=qct.version,e.utils=Jl(),e.rand=mU(),e.curve=G1e(),e.curves=wU(),e.ec=ilt(),e.eddsa=olt()}(GR)),GR}var Al={},wP={},_P={},Vee;function clt(){return Vee||(Vee=1,function(t){var e=U6(),r=xr,n=t;n.define=function(a,o){return new i(a,o)};function i(s,a){this.name=s,this.body=a,this.decoders={},this.encoders={}}i.prototype._createNamed=function(a){var o;try{o=rp.runInThisContext("(function "+this.name+`(entity) {
  this._initNamed(entity);
})`)}catch{o=function(l){this._initNamed(l)}}return r(o,a),o.prototype._initNamed=function(l){a.call(this,l)},new o(this)},i.prototype._getDecoder=function(a){return a=a||"der",this.decoders.hasOwnProperty(a)||(this.decoders[a]=this._createNamed(e.decoders[a])),this.decoders[a]},i.prototype.decode=function(a,o,c){return this._getDecoder(o).decode(a,c)},i.prototype._getEncoder=function(a){return a=a||"der",this.encoders.hasOwnProperty(a)||(this.encoders[a]=this._createNamed(e.encoders[a])),this.encoders[a]},i.prototype.encode=function(a,o,c){return this._getEncoder(o).encode(a,c)}}(_P)),_P}var xP={},EP={},jee;function llt(){if(jee)return EP;jee=1;var t=xr;function e(n){this._reporterState={obj:null,path:[],options:n||{},errors:[]}}EP.Reporter=e,e.prototype.isError=function(i){return i instanceof r},e.prototype.save=function(){var i=this._reporterState;return{obj:i.obj,pathLen:i.path.length}},e.prototype.restore=function(i){var s=this._reporterState;s.obj=i.obj,s.path=s.path.slice(0,i.pathLen)},e.prototype.enterKey=function(i){return this._reporterState.path.push(i)},e.prototype.exitKey=function(i){var s=this._reporterState;s.path=s.path.slice(0,i-1)},e.prototype.leaveKey=function(i,s,a){var o=this._reporterState;this.exitKey(i),o.obj!==null&&(o.obj[s]=a)},e.prototype.path=function(){return this._reporterState.path.join("/")},e.prototype.enterObject=function(){var i=this._reporterState,s=i.obj;return i.obj={},s},e.prototype.leaveObject=function(i){var s=this._reporterState,a=s.obj;return s.obj=i,a},e.prototype.error=function(i){var s,a=this._reporterState,o=i instanceof r;if(o?s=i:s=new r(a.path.map(function(c){return"["+JSON.stringify(c)+"]"}).join(""),i.message||i,i.stack),!a.options.partial)throw s;return o||a.errors.push(s),s},e.prototype.wrapResult=function(i){var s=this._reporterState;return s.options.partial?{result:this.isError(i)?null:i,errors:s.errors}:i};function r(n,i){this.path=n,this.rethrow(i)}return t(r,Error),r.prototype.rethrow=function(i){if(this.message=i+" at: "+(this.path||"(shallow)"),Error.captureStackTrace&&Error.captureStackTrace(this,r),!this.stack)try{throw new Error(this.message)}catch(s){this.stack=s.stack}return this},EP}var d5={},zee;function qee(){if(zee)return d5;zee=1;var t=xr,e=v3().Reporter,r=Es.Buffer;function n(s,a){if(e.call(this,a),!r.isBuffer(s)){this.error("Input not Buffer");return}this.base=s,this.offset=0,this.length=s.length}t(n,e),d5.DecoderBuffer=n,n.prototype.save=function(){return{offset:this.offset,reporter:e.prototype.save.call(this)}},n.prototype.restore=function(a){var o=new n(this.base);return o.offset=a.offset,o.length=this.offset,this.offset=a.offset,e.prototype.restore.call(this,a.reporter),o},n.prototype.isEmpty=function(){return this.offset===this.length},n.prototype.readUInt8=function(a){return this.offset+1<=this.length?this.base.readUInt8(this.offset++,!0):this.error(a||"DecoderBuffer overrun")},n.prototype.skip=function(a,o){if(!(this.offset+a<=this.length))return this.error(o||"DecoderBuffer overrun");var c=new n(this.base);return c._reporterState=this._reporterState,c.offset=this.offset,c.length=this.offset+a,this.offset+=a,c},n.prototype.raw=function(a){return this.base.slice(a?a.offset:this.offset,this.length)};function i(s,a){if(Array.isArray(s))this.length=0,this.value=s.map(function(o){return o instanceof i||(o=new i(o,a)),this.length+=o.length,o},this);else if(typeof s=="number"){if(!(0<=s&&s<=255))return a.error("non-byte EncoderBuffer value");this.value=s,this.length=1}else if(typeof s=="string")this.value=s,this.length=r.byteLength(s);else if(r.isBuffer(s))this.value=s,this.length=s.length;else return a.error("Unsupported type: "+typeof s)}return d5.EncoderBuffer=i,i.prototype.join=function(a,o){return a||(a=new r(this.length)),o||(o=0),this.length===0||(Array.isArray(this.value)?this.value.forEach(function(c){c.join(a,o),o+=c.length}):(typeof this.value=="number"?a[o]=this.value:typeof this.value=="string"?a.write(this.value,o):r.isBuffer(this.value)&&this.value.copy(a,o),o+=this.length)),a},d5}var SP,Hee;function ult(){if(Hee)return SP;Hee=1;var t=v3().Reporter,e=v3().EncoderBuffer,r=v3().DecoderBuffer,n=Zl(),i=["seq","seqof","set","setof","objid","bool","gentime","utctime","null_","enum","int","objDesc","bitstr","bmpstr","charstr","genstr","graphstr","ia5str","iso646str","numstr","octstr","printstr","t61str","unistr","utf8str","videostr"],s=["key","obj","use","optional","explicit","implicit","def","choice","any","contains"].concat(i),a=["_peekTag","_decodeTag","_use","_decodeStr","_decodeObjid","_decodeTime","_decodeNull","_decodeInt","_decodeBool","_decodeList","_encodeComposite","_encodeStr","_encodeObjid","_encodeTime","_encodeNull","_encodeInt","_encodeBool"];function o(l,u){var f={};this._baseState=f,f.enc=l,f.parent=u||null,f.children=null,f.tag=null,f.args=null,f.reverseArgs=null,f.choice=null,f.optional=!1,f.any=!1,f.obj=!1,f.use=null,f.useDecoder=null,f.key=null,f.default=null,f.explicit=null,f.implicit=null,f.contains=null,f.parent||(f.children=[],this._wrap())}SP=o;var c=["enc","parent","children","tag","args","reverseArgs","choice","optional","any","obj","use","alteredUse","key","default","explicit","implicit","contains"];return o.prototype.clone=function(){var u=this._baseState,f={};c.forEach(function(d){f[d]=u[d]});var h=new this.constructor(f.parent);return h._baseState=f,h},o.prototype._wrap=function(){var u=this._baseState;s.forEach(function(f){this[f]=function(){var d=new this.constructor(this);return u.children.push(d),d[f].apply(d,arguments)}},this)},o.prototype._init=function(u){var f=this._baseState;n(f.parent===null),u.call(this),f.children=f.children.filter(function(h){return h._baseState.parent===this},this),n.equal(f.children.length,1,"Root node can have only one child")},o.prototype._useArgs=function(u){var f=this._baseState,h=u.filter(function(d){return d instanceof this.constructor},this);u=u.filter(function(d){return!(d instanceof this.constructor)},this),h.length!==0&&(n(f.children===null),f.children=h,h.forEach(function(d){d._baseState.parent=this},this)),u.length!==0&&(n(f.args===null),f.args=u,f.reverseArgs=u.map(function(d){if(typeof d!="object"||d.constructor!==Object)return d;var g={};return Object.keys(d).forEach(function(p){p==(p|0)&&(p|=0);var m=d[p];g[m]=p}),g}))},a.forEach(function(l){o.prototype[l]=function(){var f=this._baseState;throw new Error(l+" not implemented for encoding: "+f.enc)}}),i.forEach(function(l){o.prototype[l]=function(){var f=this._baseState,h=Array.prototype.slice.call(arguments);return n(f.tag===null),f.tag=l,this._useArgs(h),this}}),o.prototype.use=function(u){n(u);var f=this._baseState;return n(f.use===null),f.use=u,this},o.prototype.optional=function(){var u=this._baseState;return u.optional=!0,this},o.prototype.def=function(u){var f=this._baseState;return n(f.default===null),f.default=u,f.optional=!0,this},o.prototype.explicit=function(u){var f=this._baseState;return n(f.explicit===null&&f.implicit===null),f.explicit=u,this},o.prototype.implicit=function(u){var f=this._baseState;return n(f.explicit===null&&f.implicit===null),f.implicit=u,this},o.prototype.obj=function(){var u=this._baseState,f=Array.prototype.slice.call(arguments);return u.obj=!0,f.length!==0&&this._useArgs(f),this},o.prototype.key=function(u){var f=this._baseState;return n(f.key===null),f.key=u,this},o.prototype.any=function(){var u=this._baseState;return u.any=!0,this},o.prototype.choice=function(u){var f=this._baseState;return n(f.choice===null),f.choice=u,this._useArgs(Object.keys(u).map(function(h){return u[h]})),this},o.prototype.contains=function(u){var f=this._baseState;return n(f.use===null),f.contains=u,this},o.prototype._decode=function(u,f){var h=this._baseState;if(h.parent===null)return u.wrapResult(h.children[0]._decode(u,f));var d=h.default,g=!0,p=null;if(h.key!==null&&(p=u.enterKey(h.key)),h.optional){var m=null;if(h.explicit!==null?m=h.explicit:h.implicit!==null?m=h.implicit:h.tag!==null&&(m=h.tag),m===null&&!h.any){var y=u.save();try{h.choice===null?this._decodeGeneric(h.tag,u,f):this._decodeChoice(u,f),g=!0}catch{g=!1}u.restore(y)}else if(g=this._peekTag(u,m,h.any),u.isError(g))return g}var v;if(h.obj&&g&&(v=u.enterObject()),g){if(h.explicit!==null){var _=this._decodeTag(u,h.explicit);if(u.isError(_))return _;u=_}var x=u.offset;if(h.use===null&&h.choice===null){if(h.any)var y=u.save();var A=this._decodeTag(u,h.implicit!==null?h.implicit:h.tag,h.any);if(u.isError(A))return A;h.any?d=u.raw(y):u=A}if(f&&f.track&&h.tag!==null&&f.track(u.path(),x,u.length,"tagged"),f&&f.track&&h.tag!==null&&f.track(u.path(),u.offset,u.length,"content"),h.any?d=d:h.choice===null?d=this._decodeGeneric(h.tag,u,f):d=this._decodeChoice(u,f),u.isError(d))return d;if(!h.any&&h.choice===null&&h.children!==null&&h.children.forEach(function(M){M._decode(u,f)}),h.contains&&(h.tag==="octstr"||h.tag==="bitstr")){var C=new r(d);d=this._getUse(h.contains,u._reporterState.obj)._decode(C,f)}}return h.obj&&g&&(d=u.leaveObject(v)),h.key!==null&&(d!==null||g===!0)?u.leaveKey(p,h.key,d):p!==null&&u.exitKey(p),d},o.prototype._decodeGeneric=function(u,f,h){var d=this._baseState;return u==="seq"||u==="set"?null:u==="seqof"||u==="setof"?this._decodeList(f,u,d.args[0],h):/str$/.test(u)?this._decodeStr(f,u,h):u==="objid"&&d.args?this._decodeObjid(f,d.args[0],d.args[1],h):u==="objid"?this._decodeObjid(f,null,null,h):u==="gentime"||u==="utctime"?this._decodeTime(f,u,h):u==="null_"?this._decodeNull(f,h):u==="bool"?this._decodeBool(f,h):u==="objDesc"?this._decodeStr(f,u,h):u==="int"||u==="enum"?this._decodeInt(f,d.args&&d.args[0],h):d.use!==null?this._getUse(d.use,f._reporterState.obj)._decode(f,h):f.error("unknown tag: "+u)},o.prototype._getUse=function(u,f){var h=this._baseState;return h.useDecoder=this._use(u,f),n(h.useDecoder._baseState.parent===null),h.useDecoder=h.useDecoder._baseState.children[0],h.implicit!==h.useDecoder._baseState.implicit&&(h.useDecoder=h.useDecoder.clone(),h.useDecoder._baseState.implicit=h.implicit),h.useDecoder},o.prototype._decodeChoice=function(u,f){var h=this._baseState,d=null,g=!1;return Object.keys(h.choice).some(function(p){var m=u.save(),y=h.choice[p];try{var v=y._decode(u,f);if(u.isError(v))return!1;d={type:p,value:v},g=!0}catch{return u.restore(m),!1}return!0},this),g?d:u.error("Choice not matched")},o.prototype._createEncoderBuffer=function(u){return new e(u,this.reporter)},o.prototype._encode=function(u,f,h){var d=this._baseState;if(!(d.default!==null&&d.default===u)){var g=this._encodeValue(u,f,h);if(g!==void 0&&!this._skipDefault(g,f,h))return g}},o.prototype._encodeValue=function(u,f,h){var d=this._baseState;if(d.parent===null)return d.children[0]._encode(u,f||new t);var y=null;if(this.reporter=f,d.optional&&u===void 0)if(d.default!==null)u=d.default;else return;var g=null,p=!1;if(d.any)y=this._createEncoderBuffer(u);else if(d.choice)y=this._encodeChoice(u,f);else if(d.contains)g=this._getUse(d.contains,h)._encode(u,f),p=!0;else if(d.children)g=d.children.map(function(x){if(x._baseState.tag==="null_")return x._encode(null,f,u);if(x._baseState.key===null)return f.error("Child should have a key");var A=f.enterKey(x._baseState.key);if(typeof u!="object")return f.error("Child expected, but input is not object");var C=x._encode(u[x._baseState.key],f,u);return f.leaveKey(A),C},this).filter(function(x){return x}),g=this._createEncoderBuffer(g);else if(d.tag==="seqof"||d.tag==="setof"){if(!(d.args&&d.args.length===1))return f.error("Too many args for : "+d.tag);if(!Array.isArray(u))return f.error("seqof/setof, but data is not Array");var m=this.clone();m._baseState.implicit=null,g=this._createEncoderBuffer(u.map(function(x){var A=this._baseState;return this._getUse(A.args[0],u)._encode(x,f)},m))}else d.use!==null?y=this._getUse(d.use,h)._encode(u,f):(g=this._encodePrimitive(d.tag,u),p=!0);var y;if(!d.any&&d.choice===null){var v=d.implicit!==null?d.implicit:d.tag,_=d.implicit===null?"universal":"context";v===null?d.use===null&&f.error("Tag could be omitted only for .use()"):d.use===null&&(y=this._encodeComposite(v,p,_,g))}return d.explicit!==null&&(y=this._encodeComposite(d.explicit,!1,"context",y)),y},o.prototype._encodeChoice=function(u,f){var h=this._baseState,d=h.choice[u.type];return d||n(!1,u.type+" not found in "+JSON.stringify(Object.keys(h.choice))),d._encode(u.value,f)},o.prototype._encodePrimitive=function(u,f){var h=this._baseState;if(/str$/.test(u))return this._encodeStr(f,u);if(u==="objid"&&h.args)return this._encodeObjid(f,h.reverseArgs[0],h.args[1]);if(u==="objid")return this._encodeObjid(f,null,null);if(u==="gentime"||u==="utctime")return this._encodeTime(f,u);if(u==="null_")return this._encodeNull();if(u==="int"||u==="enum")return this._encodeInt(f,h.args&&h.reverseArgs[0]);if(u==="bool")return this._encodeBool(f);if(u==="objDesc")return this._encodeStr(f,u);throw new Error("Unsupported tag: "+u)},o.prototype._isNumstr=function(u){return/^[0-9 ]*$/.test(u)},o.prototype._isPrintstr=function(u){return/^[A-Za-z0-9 '\(\)\+,\-\.\/:=\?]*$/.test(u)},SP}var Wee;function v3(){return Wee||(Wee=1,function(t){var e=t;e.Reporter=llt().Reporter,e.DecoderBuffer=qee().DecoderBuffer,e.EncoderBuffer=qee().EncoderBuffer,e.Node=ult()}(xP)),xP}var AP={},TP={},Kee;function flt(){return Kee||(Kee=1,function(t){var e=J1e();t.tagClass={0:"universal",1:"application",2:"context",3:"private"},t.tagClassByName=e._reverse(t.tagClass),t.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"},t.tagByName=e._reverse(t.tag)}(TP)),TP}var Gee;function J1e(){return Gee||(Gee=1,function(t){var e=t;e._reverse=function(n){var i={};return Object.keys(n).forEach(function(s){(s|0)==s&&(s=s|0);var a=n[s];i[a]=s}),i},e.der=flt()}(AP)),AP}var kP={},CP,Yee;function Q1e(){if(Yee)return CP;Yee=1;var t=xr,e=U6(),r=e.base,n=e.bignum,i=e.constants.der;function s(l){this.enc="der",this.name=l.name,this.entity=l,this.tree=new a,this.tree._init(l.body)}CP=s,s.prototype.decode=function(u,f){return u instanceof r.DecoderBuffer||(u=new r.DecoderBuffer(u,f)),this.tree._decode(u,f)};function a(l){r.Node.call(this,"der",l)}t(a,r.Node),a.prototype._peekTag=function(u,f,h){if(u.isEmpty())return!1;var d=u.save(),g=o(u,'Failed to peek tag: "'+f+'"');return u.isError(g)?g:(u.restore(d),g.tag===f||g.tagStr===f||g.tagStr+"of"===f||h)},a.prototype._decodeTag=function(u,f,h){var d=o(u,'Failed to decode tag of "'+f+'"');if(u.isError(d))return d;var g=c(u,d.primitive,'Failed to get length of "'+f+'"');if(u.isError(g))return g;if(!h&&d.tag!==f&&d.tagStr!==f&&d.tagStr+"of"!==f)return u.error('Failed to match tag: "'+f+'"');if(d.primitive||g!==null)return u.skip(g,'Failed to match body of: "'+f+'"');var p=u.save(),m=this._skipUntilEnd(u,'Failed to skip indefinite length body: "'+this.tag+'"');return u.isError(m)?m:(g=u.offset-p.offset,u.restore(p),u.skip(g,'Failed to match body of: "'+f+'"'))},a.prototype._skipUntilEnd=function(u,f){for(;;){var h=o(u,f);if(u.isError(h))return h;var d=c(u,h.primitive,f);if(u.isError(d))return d;var g;if(h.primitive||d!==null?g=u.skip(d):g=this._skipUntilEnd(u,f),u.isError(g))return g;if(h.tagStr==="end")break}},a.prototype._decodeList=function(u,f,h,d){for(var g=[];!u.isEmpty();){var p=this._peekTag(u,"end");if(u.isError(p))return p;var m=h.decode(u,"der",d);if(u.isError(m)&&p)break;g.push(m)}return g},a.prototype._decodeStr=function(u,f){if(f==="bitstr"){var h=u.readUInt8();return u.isError(h)?h:{unused:h,data:u.raw()}}else if(f==="bmpstr"){var d=u.raw();if(d.length%2===1)return u.error("Decoding of string type: bmpstr length mismatch");for(var g="",p=0;p<d.length/2;p++)g+=String.fromCharCode(d.readUInt16BE(p*2));return g}else if(f==="numstr"){var m=u.raw().toString("ascii");return this._isNumstr(m)?m:u.error("Decoding of string type: numstr unsupported characters")}else{if(f==="octstr")return u.raw();if(f==="objDesc")return u.raw();if(f==="printstr"){var y=u.raw().toString("ascii");return this._isPrintstr(y)?y:u.error("Decoding of string type: printstr unsupported characters")}else return/str$/.test(f)?u.raw().toString():u.error("Decoding of string type: "+f+" unsupported")}},a.prototype._decodeObjid=function(u,f,h){for(var d,g=[],p=0;!u.isEmpty();){var m=u.readUInt8();p<<=7,p|=m&127,m&128||(g.push(p),p=0)}m&128&&g.push(p);var y=g[0]/40|0,v=g[0]%40;if(h?d=g:d=[y,v].concat(g.slice(1)),f){var _=f[d.join(" ")];_===void 0&&(_=f[d.join(".")]),_!==void 0&&(d=_)}return d},a.prototype._decodeTime=function(u,f){var h=u.raw().toString();if(f==="gentime")var d=h.slice(0,4)|0,g=h.slice(4,6)|0,p=h.slice(6,8)|0,m=h.slice(8,10)|0,y=h.slice(10,12)|0,v=h.slice(12,14)|0;else if(f==="utctime"){var d=h.slice(0,2)|0,g=h.slice(2,4)|0,p=h.slice(4,6)|0,m=h.slice(6,8)|0,y=h.slice(8,10)|0,v=h.slice(10,12)|0;d<70?d=2e3+d:d=1900+d}else return u.error("Decoding "+f+" time is not supported yet");return Date.UTC(d,g-1,p,m,y,v,0)},a.prototype._decodeNull=function(u){return null},a.prototype._decodeBool=function(u){var f=u.readUInt8();return u.isError(f)?f:f!==0},a.prototype._decodeInt=function(u,f){var h=u.raw(),d=new n(h);return f&&(d=f[d.toString(10)]||d),d},a.prototype._use=function(u,f){return typeof u=="function"&&(u=u(f)),u._getDecoder("der").tree};function o(l,u){var f=l.readUInt8(u);if(l.isError(f))return f;var h=i.tagClass[f>>6],d=(f&32)===0;if((f&31)===31){var g=f;for(f=0;(g&128)===128;){if(g=l.readUInt8(u),l.isError(g))return g;f<<=7,f|=g&127}}else f&=31;var p=i.tag[f];return{cls:h,primitive:d,tag:f,tagStr:p}}function c(l,u,f){var h=l.readUInt8(f);if(l.isError(h))return h;if(!u&&h===128)return null;if(!(h&128))return h;var d=h&127;if(d>4)return l.error("length octect is too long");h=0;for(var g=0;g<d;g++){h<<=8;var p=l.readUInt8(f);if(l.isError(p))return p;h|=p}return h}return CP}var IP,Xee;function hlt(){if(Xee)return IP;Xee=1;var t=xr,e=Es.Buffer,r=Q1e();function n(i){r.call(this,i),this.enc="pem"}return t(n,r),IP=n,n.prototype.decode=function(s,a){for(var o=s.toString().split(/[\r\n]+/g),c=a.label.toUpperCase(),l=/^-----(BEGIN|END) ([^-]+)-----$/,u=-1,f=-1,h=0;h<o.length;h++){var d=o[h].match(l);if(d!==null&&d[2]===c)if(u===-1){if(d[1]!=="BEGIN")break;u=h}else{if(d[1]!=="END")break;f=h;break}}if(u===-1||f===-1)throw new Error("PEM section not found for: "+c);var g=o.slice(u+1,f).join("");g.replace(/[^a-z0-9\+\/=]+/gi,"");var p=new e(g,"base64");return r.prototype.decode.call(this,p,a)},IP}var Zee;function dlt(){return Zee||(Zee=1,function(t){var e=t;e.der=Q1e(),e.pem=hlt()}(kP)),kP}var RP={},PP,Jee;function epe(){if(Jee)return PP;Jee=1;var t=xr,e=Es.Buffer,r=U6(),n=r.base,i=r.constants.der;function s(l){this.enc="der",this.name=l.name,this.entity=l,this.tree=new a,this.tree._init(l.body)}PP=s,s.prototype.encode=function(u,f){return this.tree._encode(u,f).join()};function a(l){n.Node.call(this,"der",l)}t(a,n.Node),a.prototype._encodeComposite=function(u,f,h,d){var g=c(u,f,h,this.reporter);if(d.length<128){var y=new e(2);return y[0]=g,y[1]=d.length,this._createEncoderBuffer([y,d])}for(var p=1,m=d.length;m>=256;m>>=8)p++;var y=new e(2+p);y[0]=g,y[1]=128|p;for(var m=1+p,v=d.length;v>0;m--,v>>=8)y[m]=v&255;return this._createEncoderBuffer([y,d])},a.prototype._encodeStr=function(u,f){if(f==="bitstr")return this._createEncoderBuffer([u.unused|0,u.data]);if(f==="bmpstr"){for(var h=new e(u.length*2),d=0;d<u.length;d++)h.writeUInt16BE(u.charCodeAt(d),d*2);return this._createEncoderBuffer(h)}else return f==="numstr"?this._isNumstr(u)?this._createEncoderBuffer(u):this.reporter.error("Encoding of string type: numstr supports only digits and space"):f==="printstr"?this._isPrintstr(u)?this._createEncoderBuffer(u):this.reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark"):/str$/.test(f)?this._createEncoderBuffer(u):f==="objDesc"?this._createEncoderBuffer(u):this.reporter.error("Encoding of string type: "+f+" unsupported")},a.prototype._encodeObjid=function(u,f,h){if(typeof u=="string"){if(!f)return this.reporter.error("string objid given, but no values map found");if(!f.hasOwnProperty(u))return this.reporter.error("objid not found in values map");u=f[u].split(/[\s\.]+/g);for(var d=0;d<u.length;d++)u[d]|=0}else if(Array.isArray(u)){u=u.slice();for(var d=0;d<u.length;d++)u[d]|=0}if(!Array.isArray(u))return this.reporter.error("objid() should be either array or string, got: "+JSON.stringify(u));if(!h){if(u[1]>=40)return this.reporter.error("Second objid identifier OOB");u.splice(0,2,u[0]*40+u[1])}for(var g=0,d=0;d<u.length;d++){var p=u[d];for(g++;p>=128;p>>=7)g++}for(var m=new e(g),y=m.length-1,d=u.length-1;d>=0;d--){var p=u[d];for(m[y--]=p&127;(p>>=7)>0;)m[y--]=128|p&127}return this._createEncoderBuffer(m)};function o(l){return l<10?"0"+l:l}a.prototype._encodeTime=function(u,f){var h,d=new Date(u);return f==="gentime"?h=[o(d.getFullYear()),o(d.getUTCMonth()+1),o(d.getUTCDate()),o(d.getUTCHours()),o(d.getUTCMinutes()),o(d.getUTCSeconds()),"Z"].join(""):f==="utctime"?h=[o(d.getFullYear()%100),o(d.getUTCMonth()+1),o(d.getUTCDate()),o(d.getUTCHours()),o(d.getUTCMinutes()),o(d.getUTCSeconds()),"Z"].join(""):this.reporter.error("Encoding "+f+" time is not supported yet"),this._encodeStr(h,"octstr")},a.prototype._encodeNull=function(){return this._createEncoderBuffer("")},a.prototype._encodeInt=function(u,f){if(typeof u=="string"){if(!f)return this.reporter.error("String int or enum given, but no values map");if(!f.hasOwnProperty(u))return this.reporter.error("Values map doesn't contain: "+JSON.stringify(u));u=f[u]}if(typeof u!="number"&&!e.isBuffer(u)){var h=u.toArray();!u.sign&&h[0]&128&&h.unshift(0),u=new e(h)}if(e.isBuffer(u)){var d=u.length;u.length===0&&d++;var p=new e(d);return u.copy(p),u.length===0&&(p[0]=0),this._createEncoderBuffer(p)}if(u<128)return this._createEncoderBuffer(u);if(u<256)return this._createEncoderBuffer([0,u]);for(var d=1,g=u;g>=256;g>>=8)d++;for(var p=new Array(d),g=p.length-1;g>=0;g--)p[g]=u&255,u>>=8;return p[0]&128&&p.unshift(0),this._createEncoderBuffer(new e(p))},a.prototype._encodeBool=function(u){return this._createEncoderBuffer(u?255:0)},a.prototype._use=function(u,f){return typeof u=="function"&&(u=u(f)),u._getEncoder("der").tree},a.prototype._skipDefault=function(u,f,h){var d=this._baseState,g;if(d.default===null)return!1;var p=u.join();if(d.defaultBuffer===void 0&&(d.defaultBuffer=this._encodeValue(d.default,f,h).join()),p.length!==d.defaultBuffer.length)return!1;for(g=0;g<p.length;g++)if(p[g]!==d.defaultBuffer[g])return!1;return!0};function c(l,u,f,h){var d;if(l==="seqof"?l="seq":l==="setof"&&(l="set"),i.tagByName.hasOwnProperty(l))d=i.tagByName[l];else if(typeof l=="number"&&(l|0)===l)d=l;else return h.error("Unknown tag: "+l);return d>=31?h.error("Multi-octet tag encoding unsupported"):(u||(d|=32),d|=i.tagClassByName[f||"universal"]<<6,d)}return PP}var BP,Qee;function plt(){if(Qee)return BP;Qee=1;var t=xr,e=epe();function r(n){e.call(this,n),this.enc="pem"}return t(r,e),BP=r,r.prototype.encode=function(i,s){for(var a=e.prototype.encode.call(this,i),o=a.toString("base64"),c=["-----BEGIN "+s.label+"-----"],l=0;l<o.length;l+=64)c.push(o.slice(l,l+64));return c.push("-----END "+s.label+"-----"),c.join(`
`)},BP}var ete;function glt(){return ete||(ete=1,function(t){var e=t;e.der=epe(),e.pem=plt()}(RP)),RP}var tte;function U6(){return tte||(tte=1,function(t){var e=t;e.bignum=za(),e.define=clt().define,e.base=v3(),e.constants=J1e(),e.decoders=dlt(),e.encoders=glt()}(wP)),wP}var DP,rte;function mlt(){if(rte)return DP;rte=1;var t=U6(),e=t.define("Time",function(){this.choice({utcTime:this.utctime(),generalTime:this.gentime()})}),r=t.define("AttributeTypeValue",function(){this.seq().obj(this.key("type").objid(),this.key("value").any())}),n=t.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional(),this.key("curve").objid().optional())}),i=t.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(n),this.key("subjectPublicKey").bitstr())}),s=t.define("RelativeDistinguishedName",function(){this.setof(r)}),a=t.define("RDNSequence",function(){this.seqof(s)}),o=t.define("Name",function(){this.choice({rdnSequence:this.use(a)})}),c=t.define("Validity",function(){this.seq().obj(this.key("notBefore").use(e),this.key("notAfter").use(e))}),l=t.define("Extension",function(){this.seq().obj(this.key("extnID").objid(),this.key("critical").bool().def(!1),this.key("extnValue").octstr())}),u=t.define("TBSCertificate",function(){this.seq().obj(this.key("version").explicit(0).int().optional(),this.key("serialNumber").int(),this.key("signature").use(n),this.key("issuer").use(o),this.key("validity").use(c),this.key("subject").use(o),this.key("subjectPublicKeyInfo").use(i),this.key("issuerUniqueID").implicit(1).bitstr().optional(),this.key("subjectUniqueID").implicit(2).bitstr().optional(),this.key("extensions").explicit(3).seqof(l).optional())}),f=t.define("X509Certificate",function(){this.seq().obj(this.key("tbsCertificate").use(u),this.key("signatureAlgorithm").use(n),this.key("signatureValue").bitstr())});return DP=f,DP}var nte;function ylt(){if(nte)return Al;nte=1;var t=U6();Al.certificate=mlt();var e=t.define("RSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("modulus").int(),this.key("publicExponent").int(),this.key("privateExponent").int(),this.key("prime1").int(),this.key("prime2").int(),this.key("exponent1").int(),this.key("exponent2").int(),this.key("coefficient").int())});Al.RSAPrivateKey=e;var r=t.define("RSAPublicKey",function(){this.seq().obj(this.key("modulus").int(),this.key("publicExponent").int())});Al.RSAPublicKey=r;var n=t.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("none").null_().optional(),this.key("curve").objid().optional(),this.key("params").seq().obj(this.key("p").int(),this.key("q").int(),this.key("g").int()).optional())}),i=t.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(n),this.key("subjectPublicKey").bitstr())});Al.PublicKey=i;var s=t.define("PrivateKeyInfo",function(){this.seq().obj(this.key("version").int(),this.key("algorithm").use(n),this.key("subjectPrivateKey").octstr())});Al.PrivateKey=s;var a=t.define("EncryptedPrivateKeyInfo",function(){this.seq().obj(this.key("algorithm").seq().obj(this.key("id").objid(),this.key("decrypt").seq().obj(this.key("kde").seq().obj(this.key("id").objid(),this.key("kdeparams").seq().obj(this.key("salt").octstr(),this.key("iters").int())),this.key("cipher").seq().obj(this.key("algo").objid(),this.key("iv").octstr()))),this.key("subjectPrivateKey").octstr())});Al.EncryptedPrivateKey=a;var o=t.define("DSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("p").int(),this.key("q").int(),this.key("g").int(),this.key("pub_key").int(),this.key("priv_key").int())});Al.DSAPrivateKey=o,Al.DSAparam=t.define("DSAparam",function(){this.int()});var c=t.define("ECParameters",function(){this.choice({namedCurve:this.objid()})}),l=t.define("ECPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("privateKey").octstr(),this.key("parameters").optional().explicit(0).use(c),this.key("publicKey").optional().explicit(1).bitstr())});return Al.ECPrivateKey=l,Al.signature=t.define("signature",function(){this.seq().obj(this.key("r").int(),this.key("s").int())}),Al}const vlt={"2.16.840.1.101.3.4.1.1":"aes-128-ecb","2.16.840.1.101.3.4.1.2":"aes-128-cbc","2.16.840.1.101.3.4.1.3":"aes-128-ofb","2.16.840.1.101.3.4.1.4":"aes-128-cfb","2.16.840.1.101.3.4.1.21":"aes-192-ecb","2.16.840.1.101.3.4.1.22":"aes-192-cbc","2.16.840.1.101.3.4.1.23":"aes-192-ofb","2.16.840.1.101.3.4.1.24":"aes-192-cfb","2.16.840.1.101.3.4.1.41":"aes-256-ecb","2.16.840.1.101.3.4.1.42":"aes-256-cbc","2.16.840.1.101.3.4.1.43":"aes-256-ofb","2.16.840.1.101.3.4.1.44":"aes-256-cfb"};var OP,ite;function blt(){if(ite)return OP;ite=1;var t=/Proc-Type: 4,ENCRYPTED[\n\r]+DEK-Info: AES-((?:128)|(?:192)|(?:256))-CBC,([0-9A-H]+)[\n\r]+([0-9A-z\n\r+/=]+)[\n\r]+/m,e=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----/m,r=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----([0-9A-z\n\r+/=]+)-----END \1-----$/m,n=pA(),i=gU(),s=Zr().Buffer;return OP=function(a,o){var c=a.toString(),l=c.match(t),u;if(l){var h="aes"+l[1],d=s.from(l[2],"hex"),g=s.from(l[3].replace(/[\r\n]/g,""),"base64"),p=n(o,d.slice(0,8),parseInt(l[1],10)).key,m=[],y=i.createDecipheriv(h,p,d);m.push(y.update(g)),m.push(y.final()),u=s.concat(m)}else{var f=c.match(r);u=s.from(f[2].replace(/[\r\n]/g,""),"base64")}var v=c.match(e)[1];return{tag:v,data:u}},OP}var NP,ste;function yA(){if(ste)return NP;ste=1;var t=ylt(),e=vlt,r=blt(),n=gU(),i=D1e(),s=Zr().Buffer;function a(c,l){var u=c.algorithm.decrypt.kde.kdeparams.salt,f=parseInt(c.algorithm.decrypt.kde.kdeparams.iters.toString(),10),h=e[c.algorithm.decrypt.cipher.algo.join(".")],d=c.algorithm.decrypt.cipher.iv,g=c.subjectPrivateKey,p=parseInt(h.split("-")[1],10)/8,m=i.pbkdf2Sync(l,u,f,p,"sha1"),y=n.createDecipheriv(h,m,d),v=[];return v.push(y.update(g)),v.push(y.final()),s.concat(v)}function o(c){var l;typeof c=="object"&&!s.isBuffer(c)&&(l=c.passphrase,c=c.key),typeof c=="string"&&(c=s.from(c));var u=r(c,l),f=u.tag,h=u.data,d,g;switch(f){case"CERTIFICATE":g=t.certificate.decode(h,"der").tbsCertificate.subjectPublicKeyInfo;case"PUBLIC KEY":switch(g||(g=t.PublicKey.decode(h,"der")),d=g.algorithm.algorithm.join("."),d){case"1.2.840.113549.1.1.1":return t.RSAPublicKey.decode(g.subjectPublicKey.data,"der");case"1.2.840.10045.2.1":return g.subjectPrivateKey=g.subjectPublicKey,{type:"ec",data:g};case"1.2.840.10040.4.1":return g.algorithm.params.pub_key=t.DSAparam.decode(g.subjectPublicKey.data,"der"),{type:"dsa",data:g.algorithm.params};default:throw new Error("unknown key id "+d)}case"ENCRYPTED PRIVATE KEY":h=t.EncryptedPrivateKey.decode(h,"der"),h=a(h,l);case"PRIVATE KEY":switch(g=t.PrivateKey.decode(h,"der"),d=g.algorithm.algorithm.join("."),d){case"1.2.840.113549.1.1.1":return t.RSAPrivateKey.decode(g.subjectPrivateKey,"der");case"1.2.840.10045.2.1":return{curve:g.algorithm.curve,privateKey:t.ECPrivateKey.decode(g.subjectPrivateKey,"der").privateKey};case"1.2.840.10040.4.1":return g.algorithm.params.priv_key=t.DSAparam.decode(g.subjectPrivateKey,"der"),{type:"dsa",params:g.algorithm.params};default:throw new Error("unknown key id "+d)}case"RSA PUBLIC KEY":return t.RSAPublicKey.decode(h,"der");case"RSA PRIVATE KEY":return t.RSAPrivateKey.decode(h,"der");case"DSA PRIVATE KEY":return{type:"dsa",params:t.DSAPrivateKey.decode(h,"der")};case"EC PRIVATE KEY":return h=t.ECPrivateKey.decode(h,"der"),{curve:h.parameters.value,privateKey:h.privateKey};default:throw new Error("unknown key type "+f)}}return o.signature=t.signature,NP=o,NP}const tpe={"1.3.132.0.10":"secp256k1","1.3.132.0.33":"p224","1.2.840.10045.3.1.1":"p192","1.2.840.10045.3.1.7":"p256","1.3.132.0.34":"p384","1.3.132.0.35":"p521"};var ate;function wlt(){if(ate)return Tw.exports;ate=1;var t=Zr().Buffer,e=k1e(),r=vU(),n=_U().ec,i=yU(),s=yA(),a=tpe,o=1;function c(y,v,_,x,A){var C=s(v);if(C.curve){if(x!=="ecdsa"&&x!=="ecdsa/rsa")throw new Error("wrong private key type");return l(y,C)}else if(C.type==="dsa"){if(x!=="dsa")throw new Error("wrong private key type");return u(y,C,_)}if(x!=="rsa"&&x!=="ecdsa/rsa")throw new Error("wrong private key type");if(v.padding!==void 0&&v.padding!==o)throw new Error("illegal or unsupported padding mode");y=t.concat([A,y]);for(var R=C.modulus.byteLength(),M=[0,1];y.length+M.length+1<R;)M.push(255);M.push(0);for(var N=-1;++N<y.length;)M.push(y[N]);var Y=r(M,C);return Y}function l(y,v){var _=a[v.curve.join(".")];if(!_)throw new Error("unknown curve "+v.curve.join("."));var x=new n(_),A=x.keyFromPrivate(v.privateKey),C=A.sign(y);return t.from(C.toDER())}function u(y,v,_){for(var x=v.params.priv_key,A=v.params.p,C=v.params.q,R=v.params.g,M=new i(0),N,Y=d(y,C).mod(C),H=!1,E=h(x,C,y,_);H===!1;)N=p(C,E,_),M=m(R,N,A,C),H=N.invm(C).imul(Y.add(x.mul(M))).mod(C),H.cmpn(0)===0&&(H=!1,M=new i(0));return f(M,H)}function f(y,v){y=y.toArray(),v=v.toArray(),y[0]&128&&(y=[0].concat(y)),v[0]&128&&(v=[0].concat(v));var _=y.length+v.length+4,x=[48,_,2,y.length];return x=x.concat(y,[2,v.length],v),t.from(x)}function h(y,v,_,x){if(y=t.from(y.toArray()),y.length<v.byteLength()){var A=t.alloc(v.byteLength()-y.length);y=t.concat([A,y])}var C=_.length,R=g(_,v),M=t.alloc(C);M.fill(1);var N=t.alloc(C);return N=e(x,N).update(M).update(t.from([0])).update(y).update(R).digest(),M=e(x,N).update(M).digest(),N=e(x,N).update(M).update(t.from([1])).update(y).update(R).digest(),M=e(x,N).update(M).digest(),{k:N,v:M}}function d(y,v){var _=new i(y),x=(y.length<<3)-v.bitLength();return x>0&&_.ishrn(x),_}function g(y,v){y=d(y,v),y=y.mod(v);var _=t.from(y.toArray());if(_.length<v.byteLength()){var x=t.alloc(v.byteLength()-_.length);_=t.concat([x,_])}return _}function p(y,v,_){var x,A;do{for(x=t.alloc(0);x.length*8<y.bitLength();)v.v=e(_,v.k).update(v.v).digest(),x=t.concat([x,v.v]);A=d(x,y),v.k=e(_,v.k).update(v.v).update(t.from([0])).digest(),v.v=e(_,v.k).update(v.v).digest()}while(A.cmp(y)!==-1);return A}function m(y,v,_,x){return y.toRed(i.mont(_)).redPow(v).fromRed().mod(x)}return Tw.exports=c,Tw.exports.getKey=h,Tw.exports.makeKey=p,Tw.exports}var MP,ote;function _lt(){if(ote)return MP;ote=1;var t=Zr().Buffer,e=yU(),r=_U().ec,n=yA(),i=tpe;function s(l,u,f,h,d){var g=n(f);if(g.type==="ec"){if(h!=="ecdsa"&&h!=="ecdsa/rsa")throw new Error("wrong public key type");return a(l,u,g)}else if(g.type==="dsa"){if(h!=="dsa")throw new Error("wrong public key type");return o(l,u,g)}if(h!=="rsa"&&h!=="ecdsa/rsa")throw new Error("wrong public key type");u=t.concat([d,u]);for(var p=g.modulus.byteLength(),m=[1],y=0;u.length+m.length+2<p;)m.push(255),y+=1;m.push(0);for(var v=-1;++v<u.length;)m.push(u[v]);m=t.from(m);var _=e.mont(g.modulus);l=new e(l).toRed(_),l=l.redPow(new e(g.publicExponent)),l=t.from(l.fromRed().toArray());var x=y<8?1:0;for(p=Math.min(l.length,m.length),l.length!==m.length&&(x=1),v=-1;++v<p;)x|=l[v]^m[v];return x===0}function a(l,u,f){var h=i[f.data.algorithm.curve.join(".")];if(!h)throw new Error("unknown curve "+f.data.algorithm.curve.join("."));var d=new r(h),g=f.data.subjectPrivateKey.data;return d.verify(u,l,g)}function o(l,u,f){var h=f.data.p,d=f.data.q,g=f.data.g,p=f.data.pub_key,m=n.signature.decode(l,"der"),y=m.s,v=m.r;c(y,d),c(v,d);var _=e.mont(h),x=y.invm(d),A=g.toRed(_).redPow(new e(u).mul(x).mod(d)).fromRed().mul(p.toRed(_).redPow(v.mul(x).mod(d)).fromRed()).mod(h).mod(d);return A.cmp(v)===0}function c(l,u){if(l.cmpn(0)<=0)throw new Error("invalid sig");if(l.cmp(u)>=0)throw new Error("invalid sig")}return MP=s,MP}var LP,cte;function xlt(){if(cte)return LP;cte=1;var t=Zr().Buffer,e=M6(),r=Ict(),n=xr,i=wlt(),s=_lt(),a=C1e;Object.keys(a).forEach(function(f){a[f].id=t.from(a[f].id,"hex"),a[f.toLowerCase()]=a[f]});function o(f){r.Writable.call(this);var h=a[f];if(!h)throw new Error("Unknown message digest");this._hashType=h.hash,this._hash=e(h.hash),this._tag=h.id,this._signType=h.sign}n(o,r.Writable),o.prototype._write=function(h,d,g){this._hash.update(h),g()},o.prototype.update=function(h,d){return this._hash.update(typeof h=="string"?t.from(h,d):h),this},o.prototype.sign=function(h,d){this.end();var g=this._hash.digest(),p=i(g,h,this._hashType,this._signType,this._tag);return d?p.toString(d):p};function c(f){r.Writable.call(this);var h=a[f];if(!h)throw new Error("Unknown message digest");this._hash=e(h.hash),this._tag=h.id,this._signType=h.sign}n(c,r.Writable),c.prototype._write=function(h,d,g){this._hash.update(h),g()},c.prototype.update=function(h,d){return this._hash.update(typeof h=="string"?t.from(h,d):h),this},c.prototype.verify=function(h,d,g){var p=typeof d=="string"?t.from(d,g):d;this.end();var m=this._hash.digest();return s(p,m,h,this._signType,this._tag)};function l(f){return new o(f)}function u(f){return new c(f)}return LP={Sign:l,Verify:u,createSign:l,createVerify:u},LP}var FP,lte;function Elt(){if(lte)return FP;lte=1;var t=_U(),e=za();FP=function(a){return new n(a)};var r={secp256k1:{name:"secp256k1",byteLength:32},secp224r1:{name:"p224",byteLength:28},prime256v1:{name:"p256",byteLength:32},prime192v1:{name:"p192",byteLength:24},ed25519:{name:"ed25519",byteLength:32},secp384r1:{name:"p384",byteLength:48},secp521r1:{name:"p521",byteLength:66}};r.p224=r.secp224r1,r.p256=r.secp256r1=r.prime256v1,r.p192=r.secp192r1=r.prime192v1,r.p384=r.secp384r1,r.p521=r.secp521r1;function n(s){this.curveType=r[s],this.curveType||(this.curveType={name:s}),this.curve=new t.ec(this.curveType.name),this.keys=void 0}n.prototype.generateKeys=function(s,a){return this.keys=this.curve.genKeyPair(),this.getPublicKey(s,a)},n.prototype.computeSecret=function(s,a,o){a=a||"utf8",We.isBuffer(s)||(s=new We(s,a));var c=this.curve.keyFromPublic(s).getPublic(),l=c.mul(this.keys.getPrivate()).getX();return i(l,o,this.curveType.byteLength)},n.prototype.getPublicKey=function(s,a){var o=this.keys.getPublic(a==="compressed",!0);return a==="hybrid"&&(o[o.length-1]%2?o[0]=7:o[0]=6),i(o,s)},n.prototype.getPrivateKey=function(s){return i(this.keys.getPrivate(),s)},n.prototype.setPublicKey=function(s,a){return a=a||"utf8",We.isBuffer(s)||(s=new We(s,a)),this.keys._importPublic(s),this},n.prototype.setPrivateKey=function(s,a){a=a||"utf8",We.isBuffer(s)||(s=new We(s,a));var o=new e(s);return o=o.toString(16),this.keys=this.curve.genKeyPair(),this.keys._importPrivate(o),this};function i(s,a,o){Array.isArray(s)||(s=s.toArray());var c=new We(s);if(o&&c.length<o){var l=new We(o-c.length);l.fill(0),c=We.concat([l,c])}return a?c.toString(a):c}return FP}var $P={},UP,ute;function rpe(){if(ute)return UP;ute=1;var t=M6(),e=Zr().Buffer;UP=function(n,i){for(var s=e.alloc(0),a=0,o;s.length<i;)o=r(a++),s=e.concat([s,t("sha1").update(n).update(o).digest()]);return s.slice(0,i)};function r(n){var i=e.allocUnsafe(4);return i.writeUInt32BE(n,0),i}return UP}var VP,fte;function npe(){return fte||(fte=1,VP=function(e,r){for(var n=e.length,i=-1;++i<n;)e[i]^=r[i];return e}),VP}var jP,hte;function ipe(){if(hte)return jP;hte=1;var t=za(),e=Zr().Buffer;function r(n,i){return e.from(n.toRed(t.mont(i.modulus)).redPow(new t(i.publicExponent)).fromRed().toArray())}return jP=r,jP}var zP,dte;function Slt(){if(dte)return zP;dte=1;var t=yA(),e=gb(),r=M6(),n=rpe(),i=npe(),s=za(),a=ipe(),o=vU(),c=Zr().Buffer;zP=function(d,g,p){var m;d.padding?m=d.padding:p?m=1:m=4;var y=t(d),v;if(m===4)v=l(y,g);else if(m===1)v=u(y,g,p);else if(m===3){if(v=new s(g),v.cmp(y.modulus)>=0)throw new Error("data too long for modulus")}else throw new Error("unknown padding");return p?o(v,y):a(v,y)};function l(h,d){var g=h.modulus.byteLength(),p=d.length,m=r("sha1").update(c.alloc(0)).digest(),y=m.length,v=2*y;if(p>g-v-2)throw new Error("message too long");var _=c.alloc(g-p-v-2),x=g-y-1,A=e(y),C=i(c.concat([m,_,c.alloc(1,1),d],x),n(A,x)),R=i(A,n(C,y));return new s(c.concat([c.alloc(1),R,C],g))}function u(h,d,g){var p=d.length,m=h.modulus.byteLength();if(p>m-11)throw new Error("message too long");var y;return g?y=c.alloc(m-p-3,255):y=f(m-p-3),new s(c.concat([c.from([0,g?1:2]),y,c.alloc(1),d],m))}function f(h){for(var d=c.allocUnsafe(h),g=0,p=e(h*2),m=0,y;g<h;)m===p.length&&(p=e(h*2),m=0),y=p[m++],y&&(d[g++]=y);return d}return zP}var qP,pte;function Alt(){if(pte)return qP;pte=1;var t=yA(),e=rpe(),r=npe(),n=za(),i=vU(),s=M6(),a=ipe(),o=Zr().Buffer;qP=function(h,d,g){var p;h.padding?p=h.padding:g?p=1:p=4;var m=t(h),y=m.modulus.byteLength();if(d.length>y||new n(d).cmp(m.modulus)>=0)throw new Error("decryption error");var v;g?v=a(new n(d),m):v=i(d,m);var _=o.alloc(y-v.length);if(v=o.concat([_,v],y),p===4)return c(m,v);if(p===1)return l(m,v,g);if(p===3)return v;throw new Error("unknown padding")};function c(f,h){var d=f.modulus.byteLength(),g=s("sha1").update(o.alloc(0)).digest(),p=g.length;if(h[0]!==0)throw new Error("decryption error");var m=h.slice(1,p+1),y=h.slice(p+1),v=r(m,e(y,p)),_=r(y,e(v,d-p-1));if(u(g,_.slice(0,p)))throw new Error("decryption error");for(var x=p;_[x]===0;)x++;if(_[x++]!==1)throw new Error("decryption error");return _.slice(x)}function l(f,h,d){for(var g=h.slice(0,2),p=2,m=0;h[p++]!==0;)if(p>=h.length){m++;break}var y=h.slice(2,p-1);if((g.toString("hex")!=="0002"&&!d||g.toString("hex")!=="0001"&&d)&&m++,y.length<8&&m++,m)throw new Error("decryption error");return h.slice(p)}function u(f,h){f=o.from(f),h=o.from(h);var d=0,g=f.length;f.length!==h.length&&(d++,g=Math.min(f.length,h.length));for(var p=-1;++p<g;)d+=f[p]^h[p];return d}return qP}var gte;function Tlt(){return gte||(gte=1,function(t){t.publicEncrypt=Slt(),t.privateDecrypt=Alt(),t.privateEncrypt=function(r,n){return t.publicEncrypt(r,n,!0)},t.publicDecrypt=function(r,n){return t.privateDecrypt(r,n,!0)}}($P)),$P}var M2={},mte;function klt(){if(mte)return M2;mte=1;function t(){throw new Error(`secure random number generation not supported by this browser
use chrome, FireFox or Internet Explorer 11`)}var e=Zr(),r=gb(),n=e.Buffer,i=e.kMaxLength,s=It.crypto||It.msCrypto,a=Math.pow(2,32)-1;function o(h,d){if(typeof h!="number"||h!==h)throw new TypeError("offset must be a number");if(h>a||h<0)throw new TypeError("offset must be a uint32");if(h>i||h>d)throw new RangeError("offset out of range")}function c(h,d,g){if(typeof h!="number"||h!==h)throw new TypeError("size must be a number");if(h>a||h<0)throw new TypeError("size must be a uint32");if(h+d>g||h>i)throw new RangeError("buffer too small")}s&&s.getRandomValues||!Et.browser?(M2.randomFill=l,M2.randomFillSync=f):(M2.randomFill=t,M2.randomFillSync=t);function l(h,d,g,p){if(!n.isBuffer(h)&&!(h instanceof It.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');if(typeof d=="function")p=d,d=0,g=h.length;else if(typeof g=="function")p=g,g=h.length-d;else if(typeof p!="function")throw new TypeError('"cb" argument must be a function');return o(d,h.length),c(g,d,h.length),u(h,d,g,p)}function u(h,d,g,p){if(Et.browser){var m=h.buffer,y=new Uint8Array(m,d,g);if(s.getRandomValues(y),p){Et.nextTick(function(){p(null,h)});return}return h}if(p){r(g,function(_,x){if(_)return p(_);x.copy(h,d),p(null,h)});return}var v=r(g);return v.copy(h,d),h}function f(h,d,g){if(typeof d>"u"&&(d=0),!n.isBuffer(h)&&!(h instanceof It.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');return o(d,h.length),g===void 0&&(g=h.length-d),c(g,d,h.length),u(h,d,g)}return M2}var yte;function V6(){if(yte)return Mr;yte=1,Mr.randomBytes=Mr.rng=Mr.pseudoRandomBytes=Mr.prng=gb(),Mr.createHash=Mr.Hash=M6(),Mr.createHmac=Mr.Hmac=k1e();var t=Yot(),e=Object.keys(t),r=["sha1","sha224","sha256","sha384","sha512","md5","rmd160"].concat(e);Mr.getHashes=function(){return r};var n=D1e();Mr.pbkdf2=n.pbkdf2,Mr.pbkdf2Sync=n.pbkdf2Sync;var i=pct();Mr.Cipher=i.Cipher,Mr.createCipher=i.createCipher,Mr.Cipheriv=i.Cipheriv,Mr.createCipheriv=i.createCipheriv,Mr.Decipher=i.Decipher,Mr.createDecipher=i.createDecipher,Mr.Decipheriv=i.Decipheriv,Mr.createDecipheriv=i.createDecipheriv,Mr.getCiphers=i.getCiphers,Mr.listCiphers=i.listCiphers;var s=Act();Mr.DiffieHellmanGroup=s.DiffieHellmanGroup,Mr.createDiffieHellmanGroup=s.createDiffieHellmanGroup,Mr.getDiffieHellman=s.getDiffieHellman,Mr.createDiffieHellman=s.createDiffieHellman,Mr.DiffieHellman=s.DiffieHellman;var a=xlt();Mr.createSign=a.createSign,Mr.Sign=a.Sign,Mr.createVerify=a.createVerify,Mr.Verify=a.Verify,Mr.createECDH=Elt();var o=Tlt();Mr.publicEncrypt=o.publicEncrypt,Mr.privateEncrypt=o.privateEncrypt,Mr.publicDecrypt=o.publicDecrypt,Mr.privateDecrypt=o.privateDecrypt;var c=klt();return Mr.randomFill=c.randomFill,Mr.randomFillSync=c.randomFillSync,Mr.createCredentials=function(){throw new Error(["sorry, createCredentials is not implemented yet","we accept pull requests","https://github.com/crypto-browserify/crypto-browserify"].join(`
`))},Mr.constants={DH_CHECK_P_NOT_SAFE_PRIME:2,DH_CHECK_P_NOT_PRIME:1,DH_UNABLE_TO_CHECK_GENERATOR:4,DH_NOT_SUITABLE_GENERATOR:8,NPN_ENABLED:1,ALPN_ENABLED:1,RSA_PKCS1_PADDING:1,RSA_SSLV23_PADDING:2,RSA_NO_PADDING:3,RSA_PKCS1_OAEP_PADDING:4,RSA_X931_PADDING:5,RSA_PKCS1_PSS_PADDING:6,POINT_CONVERSION_COMPRESSED:2,POINT_CONVERSION_UNCOMPRESSED:4,POINT_CONVERSION_HYBRID:6},Mr}var Do=as,Clt=Do.pkcs5=Do.pkcs5||{},nd;Do.util.isNodejs&&!Do.options.usePureJavaScript&&(nd=V6());Do.pbkdf2=Clt.pbkdf2=function(t,e,r,n,i,s){if(typeof i=="function"&&(s=i,i=null),Do.util.isNodejs&&!Do.options.usePureJavaScript&&nd.pbkdf2&&(i===null||typeof i!="object")&&(nd.pbkdf2Sync.length>4||!i||i==="sha1"))return typeof i!="string"&&(i="sha1"),t=We.from(t,"binary"),e=We.from(e,"binary"),s?nd.pbkdf2Sync.length===4?nd.pbkdf2(t,e,r,n,function(_,x){if(_)return s(_);s(null,x.toString("binary"))}):nd.pbkdf2(t,e,r,n,i,function(_,x){if(_)return s(_);s(null,x.toString("binary"))}):nd.pbkdf2Sync.length===4?nd.pbkdf2Sync(t,e,r,n).toString("binary"):nd.pbkdf2Sync(t,e,r,n,i).toString("binary");if((typeof i>"u"||i===null)&&(i="sha1"),typeof i=="string"){if(!(i in Do.md.algorithms))throw new Error("Unknown hash algorithm: "+i);i=Do.md[i].create()}var a=i.digestLength;if(n>4294967295*a){var o=new Error("Derived key is too long.");if(s)return s(o);throw o}var c=Math.ceil(n/a),l=n-(c-1)*a,u=Do.hmac.create();u.start(i,t);var f="",h,d,g;if(!s){for(var p=1;p<=c;++p){u.start(null,null),u.update(e),u.update(Do.util.int32ToBytes(p)),h=g=u.digest().getBytes();for(var m=2;m<=r;++m)u.start(null,null),u.update(g),d=u.digest().getBytes(),h=Do.util.xorBytes(h,d,a),g=d;f+=p<c?h:h.substr(0,l)}return f}var p=1,m;function y(){if(p>c)return s(null,f);u.start(null,null),u.update(e),u.update(Do.util.int32ToBytes(p)),h=g=u.digest().getBytes(),m=2,v()}function v(){if(m<=r)return u.start(null,null),u.update(g),d=u.digest().getBytes(),h=Do.util.xorBytes(h,d,a),g=d,++m,Do.util.setImmediate(v);f+=p<c?h:h.substr(0,l),++p,y()}y()};var SE=as,spe=SE.pem=SE.pem||{};spe.encode=function(t,e){e=e||{};var r="-----BEGIN "+t.type+`-----\r
`,n;if(t.procType&&(n={name:"Proc-Type",values:[String(t.procType.version),t.procType.type]},r+=p5(n)),t.contentDomain&&(n={name:"Content-Domain",values:[t.contentDomain]},r+=p5(n)),t.dekInfo&&(n={name:"DEK-Info",values:[t.dekInfo.algorithm]},t.dekInfo.parameters&&n.values.push(t.dekInfo.parameters),r+=p5(n)),t.headers)for(var i=0;i<t.headers.length;++i)r+=p5(t.headers[i]);return t.procType&&(r+=`\r
`),r+=SE.util.encode64(t.body,e.maxline||64)+`\r
`,r+="-----END "+t.type+`-----\r
`,r};spe.decode=function(t){for(var e=[],r=/\s*-----BEGIN ([A-Z0-9- ]+)-----\r?\n?([\x21-\x7e\s]+?(?:\r?\n\r?\n))?([:A-Za-z0-9+\/=\s]+?)-----END \1-----/g,n=/([\x21-\x7e]+):\s*([\x21-\x7e\s^:]+)/,i=/\r?\n/,s;s=r.exec(t),!!s;){var a=s[1];a==="NEW CERTIFICATE REQUEST"&&(a="CERTIFICATE REQUEST");var o={type:a,procType:null,contentDomain:null,dekInfo:null,headers:[],body:SE.util.decode64(s[3])};if(e.push(o),!!s[2]){for(var c=s[2].split(i),l=0;s&&l<c.length;){for(var u=c[l].replace(/\s+$/,""),f=l+1;f<c.length;++f){var h=c[f];if(!/\s/.test(h[0]))break;u+=h,l=f}if(s=u.match(n),s){for(var d={name:s[1],values:[]},g=s[2].split(","),p=0;p<g.length;++p)d.values.push(Ilt(g[p]));if(o.procType)if(!o.contentDomain&&d.name==="Content-Domain")o.contentDomain=g[0]||"";else if(!o.dekInfo&&d.name==="DEK-Info"){if(d.values.length===0)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must have at least one subfield.');o.dekInfo={algorithm:g[0],parameters:g[1]||null}}else o.headers.push(d);else{if(d.name!=="Proc-Type")throw new Error('Invalid PEM formatted message. The first encapsulated header must be "Proc-Type".');if(d.values.length!==2)throw new Error('Invalid PEM formatted message. The "Proc-Type" header must have two subfields.');o.procType={version:g[0],type:g[1]}}}++l}if(o.procType==="ENCRYPTED"&&!o.dekInfo)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must be present if "Proc-Type" is "ENCRYPTED".')}}if(e.length===0)throw new Error("Invalid PEM formatted message.");return e};function p5(t){for(var e=t.name+": ",r=[],n=function(c,l){return" "+l},i=0;i<t.values.length;++i)r.push(t.values[i].replace(/^(\S+\r\n)/,n));e+=r.join(",")+`\r
`;for(var s=0,a=-1,i=0;i<e.length;++i,++s)if(s>65&&a!==-1){var o=e[a];o===","?(++a,e=e.substr(0,a)+`\r
 `+e.substr(a)):e=e.substr(0,a)+`\r
`+o+e.substr(a+1),s=i-a-1,a=-1,++i}else(e[i]===" "||e[i]==="	"||e[i]===",")&&(a=i);return e}function Ilt(t){return t.replace(/^\s+/,"")}var Vf=as,ape=Vf.sha256=Vf.sha256||{};Vf.md.sha256=Vf.md.algorithms.sha256=ape;ape.create=function(){ope||Rlt();var t=null,e=Vf.util.createBuffer(),r=new Array(64),n={algorithm:"sha256",blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8};return n.start=function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var i=n.messageLengthSize/4,s=0;s<i;++s)n.fullMessageLength.push(0);return e=Vf.util.createBuffer(),t={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},n},n.start(),n.update=function(i,s){s==="utf8"&&(i=Vf.util.encodeUtf8(i));var a=i.length;n.messageLength+=a,a=[a/4294967296>>>0,a>>>0];for(var o=n.fullMessageLength.length-1;o>=0;--o)n.fullMessageLength[o]+=a[1],a[1]=a[0]+(n.fullMessageLength[o]/4294967296>>>0),n.fullMessageLength[o]=n.fullMessageLength[o]>>>0,a[0]=a[1]/4294967296>>>0;return e.putBytes(i),vte(t,r,e),(e.read>2048||e.length()===0)&&e.compact(),n},n.digest=function(){var i=Vf.util.createBuffer();i.putBytes(e.bytes());var s=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize,a=s&n.blockLength-1;i.putBytes(gN.substr(0,n.blockLength-a));for(var o,c,l=n.fullMessageLength[0]*8,u=0;u<n.fullMessageLength.length-1;++u)o=n.fullMessageLength[u+1]*8,c=o/4294967296>>>0,l+=c,i.putInt32(l>>>0),l=o>>>0;i.putInt32(l);var f={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3,h4:t.h4,h5:t.h5,h6:t.h6,h7:t.h7};vte(f,r,i);var h=Vf.util.createBuffer();return h.putInt32(f.h0),h.putInt32(f.h1),h.putInt32(f.h2),h.putInt32(f.h3),h.putInt32(f.h4),h.putInt32(f.h5),h.putInt32(f.h6),h.putInt32(f.h7),h},n};var gN=null,ope=!1,cpe=null;function Rlt(){gN="",gN+=Vf.util.fillString("\0",64),cpe=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],ope=!0}function vte(t,e,r){for(var n,i,s,a,o,c,l,u,f,h,d,g,p,m,y,v=r.length();v>=64;){for(l=0;l<16;++l)e[l]=r.getInt32();for(;l<64;++l)n=e[l-2],n=(n>>>17|n<<15)^(n>>>19|n<<13)^n>>>10,i=e[l-15],i=(i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3,e[l]=n+e[l-7]+i+e[l-16]|0;for(u=t.h0,f=t.h1,h=t.h2,d=t.h3,g=t.h4,p=t.h5,m=t.h6,y=t.h7,l=0;l<64;++l)a=(g>>>6|g<<26)^(g>>>11|g<<21)^(g>>>25|g<<7),o=m^g&(p^m),s=(u>>>2|u<<30)^(u>>>13|u<<19)^(u>>>22|u<<10),c=u&f|h&(u^f),n=y+a+o+cpe[l]+e[l],i=s+c,y=m,m=p,p=g,g=d+n>>>0,d=h,h=f,f=u,u=n+i>>>0;t.h0=t.h0+u|0,t.h1=t.h1+f|0,t.h2=t.h2+h|0,t.h3=t.h3+d|0,t.h4=t.h4+g|0,t.h5=t.h5+p|0,t.h6=t.h6+m|0,t.h7=t.h7+y|0,v-=64}}var Nf=as,zx=null;Nf.util.isNodejs&&!Nf.options.usePureJavaScript&&!Et.versions["node-webkit"]&&(zx=V6());var Plt=Nf.prng=Nf.prng||{};Plt.create=function(t){for(var e={plugin:t,key:null,seed:null,time:null,reseeds:0,generated:0,keyBytes:""},r=t.md,n=new Array(32),i=0;i<32;++i)n[i]=r.create();e.pools=n,e.pool=0,e.generate=function(l,u){if(!u)return e.generateSync(l);var f=e.plugin.cipher,h=e.plugin.increment,d=e.plugin.formatKey,g=e.plugin.formatSeed,p=Nf.util.createBuffer();e.key=null,m();function m(y){if(y)return u(y);if(p.length()>=l)return u(null,p.getBytes(l));if(e.generated>1048575&&(e.key=null),e.key===null)return Nf.util.nextTick(function(){s(m)});var v=f(e.key,e.seed);e.generated+=v.length,p.putBytes(v),e.key=d(f(e.key,h(e.seed))),e.seed=g(f(e.key,e.seed)),Nf.util.setImmediate(m)}},e.generateSync=function(l){var u=e.plugin.cipher,f=e.plugin.increment,h=e.plugin.formatKey,d=e.plugin.formatSeed;e.key=null;for(var g=Nf.util.createBuffer();g.length()<l;){e.generated>1048575&&(e.key=null),e.key===null&&a();var p=u(e.key,e.seed);e.generated+=p.length,g.putBytes(p),e.key=h(u(e.key,f(e.seed))),e.seed=d(u(e.key,e.seed))}return g.getBytes(l)};function s(l){if(e.pools[0].messageLength>=32)return o(),l();var u=32-e.pools[0].messageLength<<5;e.seedFile(u,function(f,h){if(f)return l(f);e.collect(h),o(),l()})}function a(){if(e.pools[0].messageLength>=32)return o();var l=32-e.pools[0].messageLength<<5;e.collect(e.seedFileSync(l)),o()}function o(){e.reseeds=e.reseeds===4294967295?0:e.reseeds+1;var l=e.plugin.md.create();l.update(e.keyBytes);for(var u=1,f=0;f<32;++f)e.reseeds%u===0&&(l.update(e.pools[f].digest().getBytes()),e.pools[f].start()),u=u<<1;e.keyBytes=l.digest().getBytes(),l.start(),l.update(e.keyBytes);var h=l.digest().getBytes();e.key=e.plugin.formatKey(e.keyBytes),e.seed=e.plugin.formatSeed(h),e.generated=0}function c(l){var u=null,f=Nf.util.globalScope,h=f.crypto||f.msCrypto;h&&h.getRandomValues&&(u=function(A){return h.getRandomValues(A)});var d=Nf.util.createBuffer();if(u)for(;d.length()<l;){var g=Math.max(1,Math.min(l-d.length(),65536)/4),p=new Uint32Array(Math.floor(g));try{u(p);for(var m=0;m<p.length;++m)d.putInt32(p[m])}catch(A){if(!(typeof QuotaExceededError<"u"&&A instanceof QuotaExceededError))throw A}}if(d.length()<l)for(var y,v,_,x=Math.floor(Math.random()*65536);d.length()<l;){v=16807*(x&65535),y=16807*(x>>16),v+=(y&32767)<<16,v+=y>>15,v=(v&2147483647)+(v>>31),x=v&4294967295;for(var m=0;m<3;++m)_=x>>>(m<<3),_^=Math.floor(Math.random()*256),d.putByte(_&255)}return d.getBytes(l)}return zx?(e.seedFile=function(l,u){zx.randomBytes(l,function(f,h){if(f)return u(f);u(null,h.toString())})},e.seedFileSync=function(l){return zx.randomBytes(l).toString()}):(e.seedFile=function(l,u){try{u(null,c(l))}catch(f){u(f)}},e.seedFileSync=c),e.collect=function(l){for(var u=l.length,f=0;f<u;++f)e.pools[e.pool].update(l.substr(f,1)),e.pool=e.pool===31?0:e.pool+1},e.collectInt=function(l,u){for(var f="",h=0;h<u;h+=8)f+=String.fromCharCode(l>>h&255);e.collect(f)},e.registerWorker=function(l){if(l===self)e.seedFile=function(f,h){function d(g){var p=g.data;p.forge&&p.forge.prng&&(self.removeEventListener("message",d),h(p.forge.prng.err,p.forge.prng.bytes))}self.addEventListener("message",d),self.postMessage({forge:{prng:{needed:f}}})};else{var u=function(f){var h=f.data;h.forge&&h.forge.prng&&e.seedFile(h.forge.prng.needed,function(d,g){l.postMessage({forge:{prng:{err:d,bytes:g}}})})};l.addEventListener("message",u)}},e};var ia=as;(function(){if(ia.random&&ia.random.getBytes){ia.random;return}(function(t){var e={},r=new Array(4),n=ia.util.createBuffer();e.formatKey=function(f){var h=ia.util.createBuffer(f);return f=new Array(4),f[0]=h.getInt32(),f[1]=h.getInt32(),f[2]=h.getInt32(),f[3]=h.getInt32(),ia.aes._expandKey(f,!1)},e.formatSeed=function(f){var h=ia.util.createBuffer(f);return f=new Array(4),f[0]=h.getInt32(),f[1]=h.getInt32(),f[2]=h.getInt32(),f[3]=h.getInt32(),f},e.cipher=function(f,h){return ia.aes._updateBlock(f,h,r,!1),n.putInt32(r[0]),n.putInt32(r[1]),n.putInt32(r[2]),n.putInt32(r[3]),n.getBytes()},e.increment=function(f){return++f[3],f},e.md=ia.md.sha256;function i(){var f=ia.prng.create(e);return f.getBytes=function(h,d){return f.generate(h,d)},f.getBytesSync=function(h){return f.generate(h)},f}var s=i(),a=null,o=ia.util.globalScope,c=o.crypto||o.msCrypto;if(c&&c.getRandomValues&&(a=function(f){return c.getRandomValues(f)}),ia.options.usePureJavaScript||!ia.util.isNodejs&&!a){if(s.collectInt(+new Date,32),typeof navigator<"u"){var l="";for(var u in navigator)try{typeof navigator[u]=="string"&&(l+=navigator[u])}catch{}s.collect(l),l=null}t&&(t().mousemove(function(f){s.collectInt(f.clientX,16),s.collectInt(f.clientY,16)}),t().keypress(function(f){s.collectInt(f.charCode,8)}))}if(!ia.random)ia.random=s;else for(var u in s)ia.random[u]=s[u];ia.random.createInstance=i,ia.random})(typeof jQuery<"u"?jQuery:null)})();var wc=as,HP=[217,120,249,196,25,221,181,237,40,233,253,121,74,160,216,157,198,126,55,131,43,118,83,142,98,76,100,136,68,139,251,162,23,154,89,245,135,179,79,19,97,69,109,141,9,129,125,50,189,143,64,235,134,183,123,11,240,149,33,34,92,107,78,130,84,214,101,147,206,96,178,28,115,86,192,20,167,140,241,220,18,117,202,31,59,190,228,209,66,61,212,48,163,60,182,38,111,191,14,218,70,105,7,87,39,242,29,155,188,148,67,3,248,17,199,246,144,239,62,231,6,195,213,47,200,102,30,215,8,232,234,222,128,82,238,247,132,170,114,172,53,77,106,42,150,26,210,113,90,21,73,116,75,159,208,94,4,24,164,236,194,224,65,110,15,81,203,204,36,145,175,80,161,244,112,57,153,124,58,133,35,184,180,122,252,2,54,91,37,85,151,49,45,93,250,152,227,138,146,174,5,223,41,16,103,108,186,201,211,0,230,207,225,158,168,44,99,22,1,63,88,226,137,169,13,56,52,27,171,51,255,176,187,72,12,95,185,177,205,46,197,243,219,71,229,165,156,119,10,166,32,104,254,127,193,173],bte=[1,2,3,5],Blt=function(t,e){return t<<e&65535|(t&65535)>>16-e},Dlt=function(t,e){return(t&65535)>>e|t<<16-e&65535};wc.rc2=wc.rc2||{};wc.rc2.expandKey=function(t,e){typeof t=="string"&&(t=wc.util.createBuffer(t)),e=e||128;var r=t,n=t.length(),i=e,s=Math.ceil(i/8),a=255>>(i&7),o;for(o=n;o<128;o++)r.putByte(HP[r.at(o-1)+r.at(o-n)&255]);for(r.setAt(128-s,HP[r.at(128-s)&a]),o=127-s;o>=0;o--)r.setAt(o,HP[r.at(o+1)^r.at(o+s)]);return r};var lpe=function(t,e,r){var n=!1,i=null,s=null,a=null,o,c,l,u,f=[];for(t=wc.rc2.expandKey(t,e),l=0;l<64;l++)f.push(t.getInt16Le());r?(o=function(g){for(l=0;l<4;l++)g[l]+=f[u]+(g[(l+3)%4]&g[(l+2)%4])+(~g[(l+3)%4]&g[(l+1)%4]),g[l]=Blt(g[l],bte[l]),u++},c=function(g){for(l=0;l<4;l++)g[l]+=f[g[(l+3)%4]&63]}):(o=function(g){for(l=3;l>=0;l--)g[l]=Dlt(g[l],bte[l]),g[l]-=f[u]+(g[(l+3)%4]&g[(l+2)%4])+(~g[(l+3)%4]&g[(l+1)%4]),u--},c=function(g){for(l=3;l>=0;l--)g[l]-=f[g[(l+3)%4]&63]});var h=function(g){var p=[];for(l=0;l<4;l++){var m=i.getInt16Le();a!==null&&(r?m^=a.getInt16Le():a.putInt16Le(m)),p.push(m&65535)}u=r?0:63;for(var y=0;y<g.length;y++)for(var v=0;v<g[y][0];v++)g[y][1](p);for(l=0;l<4;l++)a!==null&&(r?a.putInt16Le(p[l]):p[l]^=a.getInt16Le()),s.putInt16Le(p[l])},d=null;return d={start:function(g,p){g&&typeof g=="string"&&(g=wc.util.createBuffer(g)),n=!1,i=wc.util.createBuffer(),s=p||new wc.util.createBuffer,a=g,d.output=s},update:function(g){for(n||i.putBuffer(g);i.length()>=8;)h([[5,o],[1,c],[6,o],[1,c],[5,o]])},finish:function(g){var p=!0;if(r)if(g)p=g(8,i,!r);else{var m=i.length()===8?8:8-i.length();i.fillWithByte(m,m)}if(p&&(n=!0,d.update()),!r&&(p=i.length()===0,p))if(g)p=g(8,s,!r);else{var y=s.length(),v=s.at(y-1);v>y?p=!1:s.truncate(v)}return p}},d};wc.rc2.startEncrypting=function(t,e,r){var n=wc.rc2.createEncryptionCipher(t,128);return n.start(e,r),n};wc.rc2.createEncryptionCipher=function(t,e){return lpe(t,e,!0)};wc.rc2.startDecrypting=function(t,e,r){var n=wc.rc2.createDecryptionCipher(t,128);return n.start(e,r),n};wc.rc2.createDecryptionCipher=function(t,e){return lpe(t,e,!1)};var mN=as;mN.jsbn=mN.jsbn||{};var kd;function nt(t,e,r){this.data=[],t!=null&&(typeof t=="number"?this.fromNumber(t,e,r):e==null&&typeof t!="string"?this.fromString(t,256):this.fromString(t,e))}mN.jsbn.BigInteger=nt;function Cn(){return new nt(null)}function Olt(t,e,r,n,i,s){for(;--s>=0;){var a=e*this.data[t++]+r.data[n]+i;i=Math.floor(a/67108864),r.data[n++]=a&67108863}return i}function Nlt(t,e,r,n,i,s){for(var a=e&32767,o=e>>15;--s>=0;){var c=this.data[t]&32767,l=this.data[t++]>>15,u=o*c+l*a;c=a*c+((u&32767)<<15)+r.data[n]+(i&1073741823),i=(c>>>30)+(u>>>15)+o*l+(i>>>30),r.data[n++]=c&1073741823}return i}function wte(t,e,r,n,i,s){for(var a=e&16383,o=e>>14;--s>=0;){var c=this.data[t]&16383,l=this.data[t++]>>14,u=o*c+l*a;c=a*c+((u&16383)<<14)+r.data[n]+i,i=(c>>28)+(u>>14)+o*l,r.data[n++]=c&268435455}return i}typeof navigator>"u"?(nt.prototype.am=wte,kd=28):navigator.appName=="Microsoft Internet Explorer"?(nt.prototype.am=Nlt,kd=30):navigator.appName!="Netscape"?(nt.prototype.am=Olt,kd=26):(nt.prototype.am=wte,kd=28);nt.prototype.DB=kd;nt.prototype.DM=(1<<kd)-1;nt.prototype.DV=1<<kd;var xU=52;nt.prototype.FV=Math.pow(2,xU);nt.prototype.F1=xU-kd;nt.prototype.F2=2*kd-xU;var Mlt="0123456789abcdefghijklmnopqrstuvwxyz",vA=new Array,vb,Fl;vb=48;for(Fl=0;Fl<=9;++Fl)vA[vb++]=Fl;vb=97;for(Fl=10;Fl<36;++Fl)vA[vb++]=Fl;vb=65;for(Fl=10;Fl<36;++Fl)vA[vb++]=Fl;function _te(t){return Mlt.charAt(t)}function upe(t,e){var r=vA[t.charCodeAt(e)];return r??-1}function Llt(t){for(var e=this.t-1;e>=0;--e)t.data[e]=this.data[e];t.t=this.t,t.s=this.s}function Flt(t){this.t=1,this.s=t<0?-1:0,t>0?this.data[0]=t:t<-1?this.data[0]=t+this.DV:this.t=0}function m1(t){var e=Cn();return e.fromInt(t),e}function $lt(t,e){var r;if(e==16)r=4;else if(e==8)r=3;else if(e==256)r=8;else if(e==2)r=1;else if(e==32)r=5;else if(e==4)r=2;else{this.fromRadix(t,e);return}this.t=0,this.s=0;for(var n=t.length,i=!1,s=0;--n>=0;){var a=r==8?t[n]&255:upe(t,n);if(a<0){t.charAt(n)=="-"&&(i=!0);continue}i=!1,s==0?this.data[this.t++]=a:s+r>this.DB?(this.data[this.t-1]|=(a&(1<<this.DB-s)-1)<<s,this.data[this.t++]=a>>this.DB-s):this.data[this.t-1]|=a<<s,s+=r,s>=this.DB&&(s-=this.DB)}r==8&&t[0]&128&&(this.s=-1,s>0&&(this.data[this.t-1]|=(1<<this.DB-s)-1<<s)),this.clamp(),i&&nt.ZERO.subTo(this,this)}function Ult(){for(var t=this.s&this.DM;this.t>0&&this.data[this.t-1]==t;)--this.t}function Vlt(t){if(this.s<0)return"-"+this.negate().toString(t);var e;if(t==16)e=4;else if(t==8)e=3;else if(t==2)e=1;else if(t==32)e=5;else if(t==4)e=2;else return this.toRadix(t);var r=(1<<e)-1,n,i=!1,s="",a=this.t,o=this.DB-a*this.DB%e;if(a-- >0)for(o<this.DB&&(n=this.data[a]>>o)>0&&(i=!0,s=_te(n));a>=0;)o<e?(n=(this.data[a]&(1<<o)-1)<<e-o,n|=this.data[--a]>>(o+=this.DB-e)):(n=this.data[a]>>(o-=e)&r,o<=0&&(o+=this.DB,--a)),n>0&&(i=!0),i&&(s+=_te(n));return i?s:"0"}function jlt(){var t=Cn();return nt.ZERO.subTo(this,t),t}function zlt(){return this.s<0?this.negate():this}function qlt(t){var e=this.s-t.s;if(e!=0)return e;var r=this.t;if(e=r-t.t,e!=0)return this.s<0?-e:e;for(;--r>=0;)if((e=this.data[r]-t.data[r])!=0)return e;return 0}function bA(t){var e=1,r;return(r=t>>>16)!=0&&(t=r,e+=16),(r=t>>8)!=0&&(t=r,e+=8),(r=t>>4)!=0&&(t=r,e+=4),(r=t>>2)!=0&&(t=r,e+=2),(r=t>>1)!=0&&(t=r,e+=1),e}function Hlt(){return this.t<=0?0:this.DB*(this.t-1)+bA(this.data[this.t-1]^this.s&this.DM)}function Wlt(t,e){var r;for(r=this.t-1;r>=0;--r)e.data[r+t]=this.data[r];for(r=t-1;r>=0;--r)e.data[r]=0;e.t=this.t+t,e.s=this.s}function Klt(t,e){for(var r=t;r<this.t;++r)e.data[r-t]=this.data[r];e.t=Math.max(this.t-t,0),e.s=this.s}function Glt(t,e){var r=t%this.DB,n=this.DB-r,i=(1<<n)-1,s=Math.floor(t/this.DB),a=this.s<<r&this.DM,o;for(o=this.t-1;o>=0;--o)e.data[o+s+1]=this.data[o]>>n|a,a=(this.data[o]&i)<<r;for(o=s-1;o>=0;--o)e.data[o]=0;e.data[s]=a,e.t=this.t+s+1,e.s=this.s,e.clamp()}function Ylt(t,e){e.s=this.s;var r=Math.floor(t/this.DB);if(r>=this.t){e.t=0;return}var n=t%this.DB,i=this.DB-n,s=(1<<n)-1;e.data[0]=this.data[r]>>n;for(var a=r+1;a<this.t;++a)e.data[a-r-1]|=(this.data[a]&s)<<i,e.data[a-r]=this.data[a]>>n;n>0&&(e.data[this.t-r-1]|=(this.s&s)<<i),e.t=this.t-r,e.clamp()}function Xlt(t,e){for(var r=0,n=0,i=Math.min(t.t,this.t);r<i;)n+=this.data[r]-t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;if(t.t<this.t){for(n-=t.s;r<this.t;)n+=this.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<t.t;)n-=t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n-=t.s}e.s=n<0?-1:0,n<-1?e.data[r++]=this.DV+n:n>0&&(e.data[r++]=n),e.t=r,e.clamp()}function Zlt(t,e){var r=this.abs(),n=t.abs(),i=r.t;for(e.t=i+n.t;--i>=0;)e.data[i]=0;for(i=0;i<n.t;++i)e.data[i+r.t]=r.am(0,n.data[i],e,i,0,r.t);e.s=0,e.clamp(),this.s!=t.s&&nt.ZERO.subTo(e,e)}function Jlt(t){for(var e=this.abs(),r=t.t=2*e.t;--r>=0;)t.data[r]=0;for(r=0;r<e.t-1;++r){var n=e.am(r,e.data[r],t,2*r,0,1);(t.data[r+e.t]+=e.am(r+1,2*e.data[r],t,2*r+1,n,e.t-r-1))>=e.DV&&(t.data[r+e.t]-=e.DV,t.data[r+e.t+1]=1)}t.t>0&&(t.data[t.t-1]+=e.am(r,e.data[r],t,2*r,0,1)),t.s=0,t.clamp()}function Qlt(t,e,r){var n=t.abs();if(!(n.t<=0)){var i=this.abs();if(i.t<n.t){e?.fromInt(0),r!=null&&this.copyTo(r);return}r==null&&(r=Cn());var s=Cn(),a=this.s,o=t.s,c=this.DB-bA(n.data[n.t-1]);c>0?(n.lShiftTo(c,s),i.lShiftTo(c,r)):(n.copyTo(s),i.copyTo(r));var l=s.t,u=s.data[l-1];if(u!=0){var f=u*(1<<this.F1)+(l>1?s.data[l-2]>>this.F2:0),h=this.FV/f,d=(1<<this.F1)/f,g=1<<this.F2,p=r.t,m=p-l,y=e??Cn();for(s.dlShiftTo(m,y),r.compareTo(y)>=0&&(r.data[r.t++]=1,r.subTo(y,r)),nt.ONE.dlShiftTo(l,y),y.subTo(s,s);s.t<l;)s.data[s.t++]=0;for(;--m>=0;){var v=r.data[--p]==u?this.DM:Math.floor(r.data[p]*h+(r.data[p-1]+g)*d);if((r.data[p]+=s.am(0,v,r,m,0,l))<v)for(s.dlShiftTo(m,y),r.subTo(y,r);r.data[p]<--v;)r.subTo(y,r)}e!=null&&(r.drShiftTo(l,e),a!=o&&nt.ZERO.subTo(e,e)),r.t=l,r.clamp(),c>0&&r.rShiftTo(c,r),a<0&&nt.ZERO.subTo(r,r)}}}function eut(t){var e=Cn();return this.abs().divRemTo(t,null,e),this.s<0&&e.compareTo(nt.ZERO)>0&&t.subTo(e,e),e}function qm(t){this.m=t}function tut(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t}function rut(t){return t}function nut(t){t.divRemTo(this.m,null,t)}function iut(t,e,r){t.multiplyTo(e,r),this.reduce(r)}function sut(t,e){t.squareTo(e),this.reduce(e)}qm.prototype.convert=tut;qm.prototype.revert=rut;qm.prototype.reduce=nut;qm.prototype.mulTo=iut;qm.prototype.sqrTo=sut;function aut(){if(this.t<1)return 0;var t=this.data[0];if(!(t&1))return 0;var e=t&3;return e=e*(2-(t&15)*e)&15,e=e*(2-(t&255)*e)&255,e=e*(2-((t&65535)*e&65535))&65535,e=e*(2-t*e%this.DV)%this.DV,e>0?this.DV-e:-e}function Hm(t){this.m=t,this.mp=t.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}function out(t){var e=Cn();return t.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),t.s<0&&e.compareTo(nt.ZERO)>0&&this.m.subTo(e,e),e}function cut(t){var e=Cn();return t.copyTo(e),this.reduce(e),e}function lut(t){for(;t.t<=this.mt2;)t.data[t.t++]=0;for(var e=0;e<this.m.t;++e){var r=t.data[e]&32767,n=r*this.mpl+((r*this.mph+(t.data[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(r=e+this.m.t,t.data[r]+=this.m.am(0,n,t,e,0,this.m.t);t.data[r]>=t.DV;)t.data[r]-=t.DV,t.data[++r]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)}function uut(t,e){t.squareTo(e),this.reduce(e)}function fut(t,e,r){t.multiplyTo(e,r),this.reduce(r)}Hm.prototype.convert=out;Hm.prototype.revert=cut;Hm.prototype.reduce=lut;Hm.prototype.mulTo=fut;Hm.prototype.sqrTo=uut;function hut(){return(this.t>0?this.data[0]&1:this.s)==0}function dut(t,e){if(t>4294967295||t<1)return nt.ONE;var r=Cn(),n=Cn(),i=e.convert(this),s=bA(t)-1;for(i.copyTo(r);--s>=0;)if(e.sqrTo(r,n),(t&1<<s)>0)e.mulTo(n,i,r);else{var a=r;r=n,n=a}return e.revert(r)}function put(t,e){var r;return t<256||e.isEven()?r=new qm(e):r=new Hm(e),this.exp(t,r)}nt.prototype.copyTo=Llt;nt.prototype.fromInt=Flt;nt.prototype.fromString=$lt;nt.prototype.clamp=Ult;nt.prototype.dlShiftTo=Wlt;nt.prototype.drShiftTo=Klt;nt.prototype.lShiftTo=Glt;nt.prototype.rShiftTo=Ylt;nt.prototype.subTo=Xlt;nt.prototype.multiplyTo=Zlt;nt.prototype.squareTo=Jlt;nt.prototype.divRemTo=Qlt;nt.prototype.invDigit=aut;nt.prototype.isEven=hut;nt.prototype.exp=dut;nt.prototype.toString=Vlt;nt.prototype.negate=jlt;nt.prototype.abs=zlt;nt.prototype.compareTo=qlt;nt.prototype.bitLength=Hlt;nt.prototype.mod=eut;nt.prototype.modPowInt=put;nt.ZERO=m1(0);nt.ONE=m1(1);function gut(){var t=Cn();return this.copyTo(t),t}function mut(){if(this.s<0){if(this.t==1)return this.data[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this.data[0];if(this.t==0)return 0}return(this.data[1]&(1<<32-this.DB)-1)<<this.DB|this.data[0]}function yut(){return this.t==0?this.s:this.data[0]<<24>>24}function vut(){return this.t==0?this.s:this.data[0]<<16>>16}function but(t){return Math.floor(Math.LN2*this.DB/Math.log(t))}function wut(){return this.s<0?-1:this.t<=0||this.t==1&&this.data[0]<=0?0:1}function _ut(t){if(t==null&&(t=10),this.signum()==0||t<2||t>36)return"0";var e=this.chunkSize(t),r=Math.pow(t,e),n=m1(r),i=Cn(),s=Cn(),a="";for(this.divRemTo(n,i,s);i.signum()>0;)a=(r+s.intValue()).toString(t).substr(1)+a,i.divRemTo(n,i,s);return s.intValue().toString(t)+a}function xut(t,e){this.fromInt(0),e==null&&(e=10);for(var r=this.chunkSize(e),n=Math.pow(e,r),i=!1,s=0,a=0,o=0;o<t.length;++o){var c=upe(t,o);if(c<0){t.charAt(o)=="-"&&this.signum()==0&&(i=!0);continue}a=e*a+c,++s>=r&&(this.dMultiply(n),this.dAddOffset(a,0),s=0,a=0)}s>0&&(this.dMultiply(Math.pow(e,s)),this.dAddOffset(a,0)),i&&nt.ZERO.subTo(this,this)}function Eut(t,e,r){if(typeof e=="number")if(t<2)this.fromInt(1);else for(this.fromNumber(t,r),this.testBit(t-1)||this.bitwiseTo(nt.ONE.shiftLeft(t-1),EU,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(e);)this.dAddOffset(2,0),this.bitLength()>t&&this.subTo(nt.ONE.shiftLeft(t-1),this);else{var n=new Array,i=t&7;n.length=(t>>3)+1,e.nextBytes(n),i>0?n[0]&=(1<<i)-1:n[0]=0,this.fromString(n,256)}}function Sut(){var t=this.t,e=new Array;e[0]=this.s;var r=this.DB-t*this.DB%8,n,i=0;if(t-- >0)for(r<this.DB&&(n=this.data[t]>>r)!=(this.s&this.DM)>>r&&(e[i++]=n|this.s<<this.DB-r);t>=0;)r<8?(n=(this.data[t]&(1<<r)-1)<<8-r,n|=this.data[--t]>>(r+=this.DB-8)):(n=this.data[t]>>(r-=8)&255,r<=0&&(r+=this.DB,--t)),n&128&&(n|=-256),i==0&&(this.s&128)!=(n&128)&&++i,(i>0||n!=this.s)&&(e[i++]=n);return e}function Aut(t){return this.compareTo(t)==0}function Tut(t){return this.compareTo(t)<0?this:t}function kut(t){return this.compareTo(t)>0?this:t}function Cut(t,e,r){var n,i,s=Math.min(t.t,this.t);for(n=0;n<s;++n)r.data[n]=e(this.data[n],t.data[n]);if(t.t<this.t){for(i=t.s&this.DM,n=s;n<this.t;++n)r.data[n]=e(this.data[n],i);r.t=this.t}else{for(i=this.s&this.DM,n=s;n<t.t;++n)r.data[n]=e(i,t.data[n]);r.t=t.t}r.s=e(this.s,t.s),r.clamp()}function Iut(t,e){return t&e}function Rut(t){var e=Cn();return this.bitwiseTo(t,Iut,e),e}function EU(t,e){return t|e}function Put(t){var e=Cn();return this.bitwiseTo(t,EU,e),e}function fpe(t,e){return t^e}function But(t){var e=Cn();return this.bitwiseTo(t,fpe,e),e}function hpe(t,e){return t&~e}function Dut(t){var e=Cn();return this.bitwiseTo(t,hpe,e),e}function Out(){for(var t=Cn(),e=0;e<this.t;++e)t.data[e]=this.DM&~this.data[e];return t.t=this.t,t.s=~this.s,t}function Nut(t){var e=Cn();return t<0?this.rShiftTo(-t,e):this.lShiftTo(t,e),e}function Mut(t){var e=Cn();return t<0?this.lShiftTo(-t,e):this.rShiftTo(t,e),e}function Lut(t){if(t==0)return-1;var e=0;return t&65535||(t>>=16,e+=16),t&255||(t>>=8,e+=8),t&15||(t>>=4,e+=4),t&3||(t>>=2,e+=2),t&1||++e,e}function Fut(){for(var t=0;t<this.t;++t)if(this.data[t]!=0)return t*this.DB+Lut(this.data[t]);return this.s<0?this.t*this.DB:-1}function $ut(t){for(var e=0;t!=0;)t&=t-1,++e;return e}function Uut(){for(var t=0,e=this.s&this.DM,r=0;r<this.t;++r)t+=$ut(this.data[r]^e);return t}function Vut(t){var e=Math.floor(t/this.DB);return e>=this.t?this.s!=0:(this.data[e]&1<<t%this.DB)!=0}function jut(t,e){var r=nt.ONE.shiftLeft(t);return this.bitwiseTo(r,e,r),r}function zut(t){return this.changeBit(t,EU)}function qut(t){return this.changeBit(t,hpe)}function Hut(t){return this.changeBit(t,fpe)}function Wut(t,e){for(var r=0,n=0,i=Math.min(t.t,this.t);r<i;)n+=this.data[r]+t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;if(t.t<this.t){for(n+=t.s;r<this.t;)n+=this.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<t.t;)n+=t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n+=t.s}e.s=n<0?-1:0,n>0?e.data[r++]=n:n<-1&&(e.data[r++]=this.DV+n),e.t=r,e.clamp()}function Kut(t){var e=Cn();return this.addTo(t,e),e}function Gut(t){var e=Cn();return this.subTo(t,e),e}function Yut(t){var e=Cn();return this.multiplyTo(t,e),e}function Xut(t){var e=Cn();return this.divRemTo(t,e,null),e}function Zut(t){var e=Cn();return this.divRemTo(t,null,e),e}function Jut(t){var e=Cn(),r=Cn();return this.divRemTo(t,e,r),new Array(e,r)}function Qut(t){this.data[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()}function eft(t,e){if(t!=0){for(;this.t<=e;)this.data[this.t++]=0;for(this.data[e]+=t;this.data[e]>=this.DV;)this.data[e]-=this.DV,++e>=this.t&&(this.data[this.t++]=0),++this.data[e]}}function j6(){}function dpe(t){return t}function tft(t,e,r){t.multiplyTo(e,r)}function rft(t,e){t.squareTo(e)}j6.prototype.convert=dpe;j6.prototype.revert=dpe;j6.prototype.mulTo=tft;j6.prototype.sqrTo=rft;function nft(t){return this.exp(t,new j6)}function ift(t,e,r){var n=Math.min(this.t+t.t,e);for(r.s=0,r.t=n;n>0;)r.data[--n]=0;var i;for(i=r.t-this.t;n<i;++n)r.data[n+this.t]=this.am(0,t.data[n],r,n,0,this.t);for(i=Math.min(t.t,e);n<i;++n)this.am(0,t.data[n],r,n,0,e-n);r.clamp()}function sft(t,e,r){--e;var n=r.t=this.t+t.t-e;for(r.s=0;--n>=0;)r.data[n]=0;for(n=Math.max(e-this.t,0);n<t.t;++n)r.data[this.t+n-e]=this.am(e-n,t.data[n],r,0,0,this.t+n-e);r.clamp(),r.drShiftTo(1,r)}function bb(t){this.r2=Cn(),this.q3=Cn(),nt.ONE.dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t),this.m=t}function aft(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var e=Cn();return t.copyTo(e),this.reduce(e),e}function oft(t){return t}function cft(t){for(t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);t.compareTo(this.r2)<0;)t.dAddOffset(1,this.m.t+1);for(t.subTo(this.r2,t);t.compareTo(this.m)>=0;)t.subTo(this.m,t)}function lft(t,e){t.squareTo(e),this.reduce(e)}function uft(t,e,r){t.multiplyTo(e,r),this.reduce(r)}bb.prototype.convert=aft;bb.prototype.revert=oft;bb.prototype.reduce=cft;bb.prototype.mulTo=uft;bb.prototype.sqrTo=lft;function fft(t,e){var r=t.bitLength(),n,i=m1(1),s;if(r<=0)return i;r<18?n=1:r<48?n=3:r<144?n=4:r<768?n=5:n=6,r<8?s=new qm(e):e.isEven()?s=new bb(e):s=new Hm(e);var a=new Array,o=3,c=n-1,l=(1<<n)-1;if(a[1]=s.convert(this),n>1){var u=Cn();for(s.sqrTo(a[1],u);o<=l;)a[o]=Cn(),s.mulTo(u,a[o-2],a[o]),o+=2}var f=t.t-1,h,d=!0,g=Cn(),p;for(r=bA(t.data[f])-1;f>=0;){for(r>=c?h=t.data[f]>>r-c&l:(h=(t.data[f]&(1<<r+1)-1)<<c-r,f>0&&(h|=t.data[f-1]>>this.DB+r-c)),o=n;!(h&1);)h>>=1,--o;if((r-=o)<0&&(r+=this.DB,--f),d)a[h].copyTo(i),d=!1;else{for(;o>1;)s.sqrTo(i,g),s.sqrTo(g,i),o-=2;o>0?s.sqrTo(i,g):(p=i,i=g,g=p),s.mulTo(g,a[h],i)}for(;f>=0&&!(t.data[f]&1<<r);)s.sqrTo(i,g),p=i,i=g,g=p,--r<0&&(r=this.DB-1,--f)}return s.revert(i)}function hft(t){var e=this.s<0?this.negate():this.clone(),r=t.s<0?t.negate():t.clone();if(e.compareTo(r)<0){var n=e;e=r,r=n}var i=e.getLowestSetBit(),s=r.getLowestSetBit();if(s<0)return e;for(i<s&&(s=i),s>0&&(e.rShiftTo(s,e),r.rShiftTo(s,r));e.signum()>0;)(i=e.getLowestSetBit())>0&&e.rShiftTo(i,e),(i=r.getLowestSetBit())>0&&r.rShiftTo(i,r),e.compareTo(r)>=0?(e.subTo(r,e),e.rShiftTo(1,e)):(r.subTo(e,r),r.rShiftTo(1,r));return s>0&&r.lShiftTo(s,r),r}function dft(t){if(t<=0)return 0;var e=this.DV%t,r=this.s<0?t-1:0;if(this.t>0)if(e==0)r=this.data[0]%t;else for(var n=this.t-1;n>=0;--n)r=(e*r+this.data[n])%t;return r}function pft(t){var e=t.isEven();if(this.isEven()&&e||t.signum()==0)return nt.ZERO;for(var r=t.clone(),n=this.clone(),i=m1(1),s=m1(0),a=m1(0),o=m1(1);r.signum()!=0;){for(;r.isEven();)r.rShiftTo(1,r),e?((!i.isEven()||!s.isEven())&&(i.addTo(this,i),s.subTo(t,s)),i.rShiftTo(1,i)):s.isEven()||s.subTo(t,s),s.rShiftTo(1,s);for(;n.isEven();)n.rShiftTo(1,n),e?((!a.isEven()||!o.isEven())&&(a.addTo(this,a),o.subTo(t,o)),a.rShiftTo(1,a)):o.isEven()||o.subTo(t,o),o.rShiftTo(1,o);r.compareTo(n)>=0?(r.subTo(n,r),e&&i.subTo(a,i),s.subTo(o,s)):(n.subTo(r,n),e&&a.subTo(i,a),o.subTo(s,o))}if(n.compareTo(nt.ONE)!=0)return nt.ZERO;if(o.compareTo(t)>=0)return o.subtract(t);if(o.signum()<0)o.addTo(t,o);else return o;return o.signum()<0?o.add(t):o}var mu=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],gft=(1<<26)/mu[mu.length-1];function mft(t){var e,r=this.abs();if(r.t==1&&r.data[0]<=mu[mu.length-1]){for(e=0;e<mu.length;++e)if(r.data[0]==mu[e])return!0;return!1}if(r.isEven())return!1;for(e=1;e<mu.length;){for(var n=mu[e],i=e+1;i<mu.length&&n<gft;)n*=mu[i++];for(n=r.modInt(n);e<i;)if(n%mu[e++]==0)return!1}return r.millerRabin(t)}function yft(t){var e=this.subtract(nt.ONE),r=e.getLowestSetBit();if(r<=0)return!1;for(var n=e.shiftRight(r),i=vft(),s,a=0;a<t;++a){do s=new nt(this.bitLength(),i);while(s.compareTo(nt.ONE)<=0||s.compareTo(e)>=0);var o=s.modPow(n,this);if(o.compareTo(nt.ONE)!=0&&o.compareTo(e)!=0){for(var c=1;c++<r&&o.compareTo(e)!=0;)if(o=o.modPowInt(2,this),o.compareTo(nt.ONE)==0)return!1;if(o.compareTo(e)!=0)return!1}}return!0}function vft(){return{nextBytes:function(t){for(var e=0;e<t.length;++e)t[e]=Math.floor(Math.random()*256)}}}nt.prototype.chunkSize=but;nt.prototype.toRadix=_ut;nt.prototype.fromRadix=xut;nt.prototype.fromNumber=Eut;nt.prototype.bitwiseTo=Cut;nt.prototype.changeBit=jut;nt.prototype.addTo=Wut;nt.prototype.dMultiply=Qut;nt.prototype.dAddOffset=eft;nt.prototype.multiplyLowerTo=ift;nt.prototype.multiplyUpperTo=sft;nt.prototype.modInt=dft;nt.prototype.millerRabin=yft;nt.prototype.clone=gut;nt.prototype.intValue=mut;nt.prototype.byteValue=yut;nt.prototype.shortValue=vut;nt.prototype.signum=wut;nt.prototype.toByteArray=Sut;nt.prototype.equals=Aut;nt.prototype.min=Tut;nt.prototype.max=kut;nt.prototype.and=Rut;nt.prototype.or=Put;nt.prototype.xor=But;nt.prototype.andNot=Dut;nt.prototype.not=Out;nt.prototype.shiftLeft=Nut;nt.prototype.shiftRight=Mut;nt.prototype.getLowestSetBit=Fut;nt.prototype.bitCount=Uut;nt.prototype.testBit=Vut;nt.prototype.setBit=zut;nt.prototype.clearBit=qut;nt.prototype.flipBit=Hut;nt.prototype.add=Kut;nt.prototype.subtract=Gut;nt.prototype.multiply=Yut;nt.prototype.divide=Xut;nt.prototype.remainder=Zut;nt.prototype.divideAndRemainder=Jut;nt.prototype.modPow=fft;nt.prototype.modInverse=pft;nt.prototype.pow=nft;nt.prototype.gcd=hft;nt.prototype.isProbablePrime=mft;var jf=as,ppe=jf.sha1=jf.sha1||{};jf.md.sha1=jf.md.algorithms.sha1=ppe;ppe.create=function(){gpe||bft();var t=null,e=jf.util.createBuffer(),r=new Array(80),n={algorithm:"sha1",blockLength:64,digestLength:20,messageLength:0,fullMessageLength:null,messageLengthSize:8};return n.start=function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var i=n.messageLengthSize/4,s=0;s<i;++s)n.fullMessageLength.push(0);return e=jf.util.createBuffer(),t={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520},n},n.start(),n.update=function(i,s){s==="utf8"&&(i=jf.util.encodeUtf8(i));var a=i.length;n.messageLength+=a,a=[a/4294967296>>>0,a>>>0];for(var o=n.fullMessageLength.length-1;o>=0;--o)n.fullMessageLength[o]+=a[1],a[1]=a[0]+(n.fullMessageLength[o]/4294967296>>>0),n.fullMessageLength[o]=n.fullMessageLength[o]>>>0,a[0]=a[1]/4294967296>>>0;return e.putBytes(i),xte(t,r,e),(e.read>2048||e.length()===0)&&e.compact(),n},n.digest=function(){var i=jf.util.createBuffer();i.putBytes(e.bytes());var s=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize,a=s&n.blockLength-1;i.putBytes(yN.substr(0,n.blockLength-a));for(var o,c,l=n.fullMessageLength[0]*8,u=0;u<n.fullMessageLength.length-1;++u)o=n.fullMessageLength[u+1]*8,c=o/4294967296>>>0,l+=c,i.putInt32(l>>>0),l=o>>>0;i.putInt32(l);var f={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3,h4:t.h4};xte(f,r,i);var h=jf.util.createBuffer();return h.putInt32(f.h0),h.putInt32(f.h1),h.putInt32(f.h2),h.putInt32(f.h3),h.putInt32(f.h4),h},n};var yN=null,gpe=!1;function bft(){yN="",yN+=jf.util.fillString("\0",64),gpe=!0}function xte(t,e,r){for(var n,i,s,a,o,c,l,u,f=r.length();f>=64;){for(i=t.h0,s=t.h1,a=t.h2,o=t.h3,c=t.h4,u=0;u<16;++u)n=r.getInt32(),e[u]=n,l=o^s&(a^o),n=(i<<5|i>>>27)+l+c+1518500249+n,c=o,o=a,a=(s<<30|s>>>2)>>>0,s=i,i=n;for(;u<20;++u)n=e[u-3]^e[u-8]^e[u-14]^e[u-16],n=n<<1|n>>>31,e[u]=n,l=o^s&(a^o),n=(i<<5|i>>>27)+l+c+1518500249+n,c=o,o=a,a=(s<<30|s>>>2)>>>0,s=i,i=n;for(;u<32;++u)n=e[u-3]^e[u-8]^e[u-14]^e[u-16],n=n<<1|n>>>31,e[u]=n,l=s^a^o,n=(i<<5|i>>>27)+l+c+1859775393+n,c=o,o=a,a=(s<<30|s>>>2)>>>0,s=i,i=n;for(;u<40;++u)n=e[u-6]^e[u-16]^e[u-28]^e[u-32],n=n<<2|n>>>30,e[u]=n,l=s^a^o,n=(i<<5|i>>>27)+l+c+1859775393+n,c=o,o=a,a=(s<<30|s>>>2)>>>0,s=i,i=n;for(;u<60;++u)n=e[u-6]^e[u-16]^e[u-28]^e[u-32],n=n<<2|n>>>30,e[u]=n,l=s&a|o&(s^a),n=(i<<5|i>>>27)+l+c+2400959708+n,c=o,o=a,a=(s<<30|s>>>2)>>>0,s=i,i=n;for(;u<80;++u)n=e[u-6]^e[u-16]^e[u-28]^e[u-32],n=n<<2|n>>>30,e[u]=n,l=s^a^o,n=(i<<5|i>>>27)+l+c+3395469782+n,c=o,o=a,a=(s<<30|s>>>2)>>>0,s=i,i=n;t.h0=t.h0+i|0,t.h1=t.h1+s|0,t.h2=t.h2+a|0,t.h3=t.h3+o|0,t.h4=t.h4+c|0,f-=64}}var Wf=as,mpe=Wf.pkcs1=Wf.pkcs1||{};mpe.encode_rsa_oaep=function(t,e,r){var n,i,s,a;typeof r=="string"?(n=r,i=arguments[3]||void 0,s=arguments[4]||void 0):r&&(n=r.label||void 0,i=r.seed||void 0,s=r.md||void 0,r.mgf1&&r.mgf1.md&&(a=r.mgf1.md)),s?s.start():s=Wf.md.sha1.create(),a||(a=s);var o=Math.ceil(t.n.bitLength()/8),c=o-2*s.digestLength-2;if(e.length>c){var l=new Error("RSAES-OAEP input message length is too long.");throw l.length=e.length,l.maxLength=c,l}n||(n=""),s.update(n,"raw");for(var u=s.digest(),f="",h=c-e.length,d=0;d<h;d++)f+="\0";var g=u.getBytes()+f+""+e;if(!i)i=Wf.random.getBytes(s.digestLength);else if(i.length!==s.digestLength){var l=new Error("Invalid RSAES-OAEP seed. The seed length must match the digest length.");throw l.seedLength=i.length,l.digestLength=s.digestLength,l}var p=AE(i,o-s.digestLength-1,a),m=Wf.util.xorBytes(g,p,g.length),y=AE(m,s.digestLength,a),v=Wf.util.xorBytes(i,y,i.length);return"\0"+v+m};mpe.decode_rsa_oaep=function(t,e,r){var n,i,s;typeof r=="string"?(n=r,i=arguments[3]||void 0):r&&(n=r.label||void 0,i=r.md||void 0,r.mgf1&&r.mgf1.md&&(s=r.mgf1.md));var a=Math.ceil(t.n.bitLength()/8);if(e.length!==a){var m=new Error("RSAES-OAEP encoded message length is invalid.");throw m.length=e.length,m.expectedLength=a,m}if(i===void 0?i=Wf.md.sha1.create():i.start(),s||(s=i),a<2*i.digestLength+2)throw new Error("RSAES-OAEP key is too short for the hash function.");n||(n=""),i.update(n,"raw");for(var o=i.digest().getBytes(),c=e.charAt(0),l=e.substring(1,i.digestLength+1),u=e.substring(1+i.digestLength),f=AE(u,i.digestLength,s),h=Wf.util.xorBytes(l,f,l.length),d=AE(h,a-i.digestLength-1,s),g=Wf.util.xorBytes(u,d,u.length),p=g.substring(0,i.digestLength),m=c!=="\0",y=0;y<i.digestLength;++y)m|=o.charAt(y)!==p.charAt(y);for(var v=1,_=i.digestLength,x=i.digestLength;x<g.length;x++){var A=g.charCodeAt(x),C=A&1^1,R=v?65534:0;m|=A&R,v=v&C,_+=v}if(m||g.charCodeAt(_)!==1)throw new Error("Invalid RSAES-OAEP padding.");return g.substring(_+1)};function AE(t,e,r){r||(r=Wf.md.sha1.create());for(var n="",i=Math.ceil(e/r.digestLength),s=0;s<i;++s){var a=String.fromCharCode(s>>24&255,s>>16&255,s>>8&255,s&255);r.start(),r.update(t+a),n+=r.digest().getBytes()}return n.substring(0,e)}var F0=as;(function(){if(F0.prime){F0.prime;return}var t=F0.prime=F0.prime||{},e=F0.jsbn.BigInteger,r=[6,4,2,4,2,4,6,2],n=new e(null);n.fromInt(30);var i=function(f,h){return f|h};t.generateProbablePrime=function(f,h,d){typeof h=="function"&&(d=h,h={}),h=h||{};var g=h.algorithm||"PRIMEINC";typeof g=="string"&&(g={name:g}),g.options=g.options||{};var p=h.prng||F0.random,m={nextBytes:function(y){for(var v=p.getBytesSync(y.length),_=0;_<y.length;++_)y[_]=v.charCodeAt(_)}};if(g.name==="PRIMEINC")return s(f,m,g.options,d);throw new Error("Invalid prime generation algorithm: "+g.name)};function s(f,h,d,g){return"workers"in d?c(f,h,d,g):a(f,h,d,g)}function a(f,h,d,g){var p=l(f,h),m=0,y=u(p.bitLength());"millerRabinTests"in d&&(y=d.millerRabinTests);var v=10;"maxBlockTime"in d&&(v=d.maxBlockTime),o(p,f,h,m,y,v,g)}function o(f,h,d,g,p,m,y){var v=+new Date;do{if(f.bitLength()>h&&(f=l(h,d)),f.isProbablePrime(p))return y(null,f);f.dAddOffset(r[g++%8],0)}while(m<0||+new Date-v<m);F0.util.setImmediate(function(){o(f,h,d,g,p,m,y)})}function c(f,h,d,g){if(typeof Worker>"u")return a(f,h,d,g);var p=l(f,h),m=d.workers,y=d.workLoad||100,v=y*30/8,_=d.workerScript||"forge/prime.worker.js";if(m===-1)return F0.util.estimateCores(function(A,C){A&&(C=2),m=C-1,x()});x();function x(){m=Math.max(1,m);for(var A=[],C=0;C<m;++C)A[C]=new Worker(_);for(var C=0;C<m;++C)A[C].addEventListener("message",M);var R=!1;function M(N){if(!R){var Y=N.data;if(Y.found){for(var H=0;H<A.length;++H)A[H].terminate();return R=!0,g(null,new e(Y.prime,16))}p.bitLength()>f&&(p=l(f,h));var E=p.toString(16);N.target.postMessage({hex:E,workLoad:y}),p.dAddOffset(v,0)}}}}function l(f,h){var d=new e(f,h),g=f-1;return d.testBit(g)||d.bitwiseTo(e.ONE.shiftLeft(g),i,d),d.dAddOffset(31-d.mod(n).byteValue(),0),d}function u(f){return f<=100?27:f<=150?18:f<=200?15:f<=250?12:f<=300?9:f<=350?8:f<=400?7:f<=500?6:f<=600?5:f<=800?4:f<=1250?3:2}})();var Xt=as;if(typeof Tn>"u")var Tn=Xt.jsbn.BigInteger;var vN=Xt.util.isNodejs?V6():null,qe=Xt.asn1,$l=Xt.util;Xt.pki=Xt.pki||{};Xt.pki.rsa=Xt.rsa=Xt.rsa||{};var kr=Xt.pki,wft=[6,4,2,4,2,4,6,2],_ft={name:"PrivateKeyInfo",tagClass:qe.Class.UNIVERSAL,type:qe.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:qe.Class.UNIVERSAL,type:qe.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:qe.Class.UNIVERSAL,type:qe.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:qe.Class.UNIVERSAL,type:qe.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:qe.Class.UNIVERSAL,type:qe.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},xft={name:"RSAPrivateKey",tagClass:qe.Class.UNIVERSAL,type:qe.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPrivateKey.version",tagClass:qe.Class.UNIVERSAL,type:qe.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"RSAPrivateKey.modulus",tagClass:qe.Class.UNIVERSAL,type:qe.Type.INTEGER,constructed:!1,capture:"privateKeyModulus"},{name:"RSAPrivateKey.publicExponent",tagClass:qe.Class.UNIVERSAL,type:qe.Type.INTEGER,constructed:!1,capture:"privateKeyPublicExponent"},{name:"RSAPrivateKey.privateExponent",tagClass:qe.Class.UNIVERSAL,type:qe.Type.INTEGER,constructed:!1,capture:"privateKeyPrivateExponent"},{name:"RSAPrivateKey.prime1",tagClass:qe.Class.UNIVERSAL,type:qe.Type.INTEGER,constructed:!1,capture:"privateKeyPrime1"},{name:"RSAPrivateKey.prime2",tagClass:qe.Class.UNIVERSAL,type:qe.Type.INTEGER,constructed:!1,capture:"privateKeyPrime2"},{name:"RSAPrivateKey.exponent1",tagClass:qe.Class.UNIVERSAL,type:qe.Type.INTEGER,constructed:!1,capture:"privateKeyExponent1"},{name:"RSAPrivateKey.exponent2",tagClass:qe.Class.UNIVERSAL,type:qe.Type.INTEGER,constructed:!1,capture:"privateKeyExponent2"},{name:"RSAPrivateKey.coefficient",tagClass:qe.Class.UNIVERSAL,type:qe.Type.INTEGER,constructed:!1,capture:"privateKeyCoefficient"}]},Eft={name:"RSAPublicKey",tagClass:qe.Class.UNIVERSAL,type:qe.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPublicKey.modulus",tagClass:qe.Class.UNIVERSAL,type:qe.Type.INTEGER,constructed:!1,capture:"publicKeyModulus"},{name:"RSAPublicKey.exponent",tagClass:qe.Class.UNIVERSAL,type:qe.Type.INTEGER,constructed:!1,capture:"publicKeyExponent"}]},Sft=Xt.pki.rsa.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:qe.Class.UNIVERSAL,type:qe.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:qe.Class.UNIVERSAL,type:qe.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:qe.Class.UNIVERSAL,type:qe.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{name:"SubjectPublicKeyInfo.subjectPublicKey",tagClass:qe.Class.UNIVERSAL,type:qe.Type.BITSTRING,constructed:!1,value:[{name:"SubjectPublicKeyInfo.subjectPublicKey.RSAPublicKey",tagClass:qe.Class.UNIVERSAL,type:qe.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"rsaPublicKey"}]}]},Aft={name:"DigestInfo",tagClass:qe.Class.UNIVERSAL,type:qe.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm",tagClass:qe.Class.UNIVERSAL,type:qe.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm.algorithmIdentifier",tagClass:qe.Class.UNIVERSAL,type:qe.Type.OID,constructed:!1,capture:"algorithmIdentifier"},{name:"DigestInfo.DigestAlgorithm.parameters",tagClass:qe.Class.UNIVERSAL,type:qe.Type.NULL,capture:"parameters",optional:!0,constructed:!1}]},{name:"DigestInfo.digest",tagClass:qe.Class.UNIVERSAL,type:qe.Type.OCTETSTRING,constructed:!1,capture:"digest"}]},Tft=function(t){var e;if(t.algorithm in kr.oids)e=kr.oids[t.algorithm];else{var r=new Error("Unknown message digest algorithm.");throw r.algorithm=t.algorithm,r}var n=qe.oidToDer(e).getBytes(),i=qe.create(qe.Class.UNIVERSAL,qe.Type.SEQUENCE,!0,[]),s=qe.create(qe.Class.UNIVERSAL,qe.Type.SEQUENCE,!0,[]);s.value.push(qe.create(qe.Class.UNIVERSAL,qe.Type.OID,!1,n)),s.value.push(qe.create(qe.Class.UNIVERSAL,qe.Type.NULL,!1,""));var a=qe.create(qe.Class.UNIVERSAL,qe.Type.OCTETSTRING,!1,t.digest().getBytes());return i.value.push(s),i.value.push(a),qe.toDer(i).getBytes()},ype=function(t,e,r){if(r)return t.modPow(e.e,e.n);if(!e.p||!e.q)return t.modPow(e.d,e.n);e.dP||(e.dP=e.d.mod(e.p.subtract(Tn.ONE))),e.dQ||(e.dQ=e.d.mod(e.q.subtract(Tn.ONE))),e.qInv||(e.qInv=e.q.modInverse(e.p));var n;do n=new Tn(Xt.util.bytesToHex(Xt.random.getBytes(e.n.bitLength()/8)),16);while(n.compareTo(e.n)>=0||!n.gcd(e.n).equals(Tn.ONE));t=t.multiply(n.modPow(e.e,e.n)).mod(e.n);for(var i=t.mod(e.p).modPow(e.dP,e.p),s=t.mod(e.q).modPow(e.dQ,e.q);i.compareTo(s)<0;)i=i.add(e.p);var a=i.subtract(s).multiply(e.qInv).mod(e.p).multiply(e.q).add(s);return a=a.multiply(n.modInverse(e.n)).mod(e.n),a};kr.rsa.encrypt=function(t,e,r){var n=r,i,s=Math.ceil(e.n.bitLength()/8);r!==!1&&r!==!0?(n=r===2,i=vpe(t,e,r)):(i=Xt.util.createBuffer(),i.putBytes(t));for(var a=new Tn(i.toHex(),16),o=ype(a,e,n),c=o.toString(16),l=Xt.util.createBuffer(),u=s-Math.ceil(c.length/2);u>0;)l.putByte(0),--u;return l.putBytes(Xt.util.hexToBytes(c)),l.getBytes()};kr.rsa.decrypt=function(t,e,r,n){var i=Math.ceil(e.n.bitLength()/8);if(t.length!==i){var s=new Error("Encrypted message length is invalid.");throw s.length=t.length,s.expected=i,s}var a=new Tn(Xt.util.createBuffer(t).toHex(),16);if(a.compareTo(e.n)>=0)throw new Error("Encrypted message is invalid.");for(var o=ype(a,e,r),c=o.toString(16),l=Xt.util.createBuffer(),u=i-Math.ceil(c.length/2);u>0;)l.putByte(0),--u;return l.putBytes(Xt.util.hexToBytes(c)),n!==!1?TE(l.getBytes(),e,r):l.getBytes()};kr.rsa.createKeyPairGenerationState=function(t,e,r){typeof t=="string"&&(t=parseInt(t,10)),t=t||2048,r=r||{};var n=r.prng||Xt.random,i={nextBytes:function(o){for(var c=n.getBytesSync(o.length),l=0;l<o.length;++l)o[l]=c.charCodeAt(l)}},s=r.algorithm||"PRIMEINC",a;if(s==="PRIMEINC")a={algorithm:s,state:0,bits:t,rng:i,eInt:e||65537,e:new Tn(null),p:null,q:null,qBits:t>>1,pBits:t-(t>>1),pqState:0,num:null,keys:null},a.e.fromInt(a.eInt);else throw new Error("Invalid key generation algorithm: "+s);return a};kr.rsa.stepKeyPairGenerationState=function(t,e){"algorithm"in t||(t.algorithm="PRIMEINC");var r=new Tn(null);r.fromInt(30);for(var n=0,i=function(f,h){return f|h},s=+new Date,a,o=0;t.keys===null&&(e<=0||o<e);){if(t.state===0){var c=t.p===null?t.pBits:t.qBits,l=c-1;t.pqState===0?(t.num=new Tn(c,t.rng),t.num.testBit(l)||t.num.bitwiseTo(Tn.ONE.shiftLeft(l),i,t.num),t.num.dAddOffset(31-t.num.mod(r).byteValue(),0),n=0,++t.pqState):t.pqState===1?t.num.bitLength()>c?t.pqState=0:t.num.isProbablePrime(Cft(t.num.bitLength()))?++t.pqState:t.num.dAddOffset(wft[n++%8],0):t.pqState===2?t.pqState=t.num.subtract(Tn.ONE).gcd(t.e).compareTo(Tn.ONE)===0?3:0:t.pqState===3&&(t.pqState=0,t.p===null?t.p=t.num:t.q=t.num,t.p!==null&&t.q!==null&&++t.state,t.num=null)}else if(t.state===1)t.p.compareTo(t.q)<0&&(t.num=t.p,t.p=t.q,t.q=t.num),++t.state;else if(t.state===2)t.p1=t.p.subtract(Tn.ONE),t.q1=t.q.subtract(Tn.ONE),t.phi=t.p1.multiply(t.q1),++t.state;else if(t.state===3)t.phi.gcd(t.e).compareTo(Tn.ONE)===0?++t.state:(t.p=null,t.q=null,t.state=0);else if(t.state===4)t.n=t.p.multiply(t.q),t.n.bitLength()===t.bits?++t.state:(t.q=null,t.state=0);else if(t.state===5){var u=t.e.modInverse(t.phi);t.keys={privateKey:kr.rsa.setPrivateKey(t.n,t.e,u,t.p,t.q,u.mod(t.p1),u.mod(t.q1),t.q.modInverse(t.p)),publicKey:kr.rsa.setPublicKey(t.n,t.e)}}a=+new Date,o+=a-s,s=a}return t.keys!==null};kr.rsa.generateKeyPair=function(t,e,r,n){if(arguments.length===1?typeof t=="object"?(r=t,t=void 0):typeof t=="function"&&(n=t,t=void 0):arguments.length===2?typeof t=="number"?typeof e=="function"?(n=e,e=void 0):typeof e!="number"&&(r=e,e=void 0):(r=t,n=e,t=void 0,e=void 0):arguments.length===3&&(typeof e=="number"?typeof r=="function"&&(n=r,r=void 0):(n=r,r=e,e=void 0)),r=r||{},t===void 0&&(t=r.bits||2048),e===void 0&&(e=r.e||65537),!Xt.options.usePureJavaScript&&!r.prng&&t>=256&&t<=16384&&(e===65537||e===3)){if(n){if(Ete("generateKeyPair"))return vN.generateKeyPair("rsa",{modulusLength:t,publicExponent:e,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}},function(o,c,l){if(o)return n(o);n(null,{privateKey:kr.privateKeyFromPem(l),publicKey:kr.publicKeyFromPem(c)})});if(Ste("generateKey")&&Ste("exportKey"))return $l.globalScope.crypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:Tte(e),hash:{name:"SHA-256"}},!0,["sign","verify"]).then(function(o){return $l.globalScope.crypto.subtle.exportKey("pkcs8",o.privateKey)}).then(void 0,function(o){n(o)}).then(function(o){if(o){var c=kr.privateKeyFromAsn1(qe.fromDer(Xt.util.createBuffer(o)));n(null,{privateKey:c,publicKey:kr.setRsaPublicKey(c.n,c.e)})}});if(Ate("generateKey")&&Ate("exportKey")){var i=$l.globalScope.msCrypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:Tte(e),hash:{name:"SHA-256"}},!0,["sign","verify"]);i.oncomplete=function(o){var c=o.target.result,l=$l.globalScope.msCrypto.subtle.exportKey("pkcs8",c.privateKey);l.oncomplete=function(u){var f=u.target.result,h=kr.privateKeyFromAsn1(qe.fromDer(Xt.util.createBuffer(f)));n(null,{privateKey:h,publicKey:kr.setRsaPublicKey(h.n,h.e)})},l.onerror=function(u){n(u)}},i.onerror=function(o){n(o)};return}}else if(Ete("generateKeyPairSync")){var s=vN.generateKeyPairSync("rsa",{modulusLength:t,publicExponent:e,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}});return{privateKey:kr.privateKeyFromPem(s.privateKey),publicKey:kr.publicKeyFromPem(s.publicKey)}}}var a=kr.rsa.createKeyPairGenerationState(t,e,r);if(!n)return kr.rsa.stepKeyPairGenerationState(a,0),a.keys;kft(a,r,n)};kr.setRsaPublicKey=kr.rsa.setPublicKey=function(t,e){var r={n:t,e};return r.encrypt=function(n,i,s){if(typeof i=="string"?i=i.toUpperCase():i===void 0&&(i="RSAES-PKCS1-V1_5"),i==="RSAES-PKCS1-V1_5")i={encode:function(o,c,l){return vpe(o,c,2).getBytes()}};else if(i==="RSA-OAEP"||i==="RSAES-OAEP")i={encode:function(o,c){return Xt.pkcs1.encode_rsa_oaep(c,o,s)}};else if(["RAW","NONE","NULL",null].indexOf(i)!==-1)i={encode:function(o){return o}};else if(typeof i=="string")throw new Error('Unsupported encryption scheme: "'+i+'".');var a=i.encode(n,r,!0);return kr.rsa.encrypt(a,r,!0)},r.verify=function(n,i,s,a){typeof s=="string"?s=s.toUpperCase():s===void 0&&(s="RSASSA-PKCS1-V1_5"),a===void 0&&(a={_parseAllDigestBytes:!0}),"_parseAllDigestBytes"in a||(a._parseAllDigestBytes=!0),s==="RSASSA-PKCS1-V1_5"?s={verify:function(c,l){l=TE(l,r,!0);var u=qe.fromDer(l,{parseAllBytes:a._parseAllDigestBytes}),f={},h=[];if(!qe.validate(u,Aft,f,h)){var d=new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value.");throw d.errors=h,d}var g=qe.derToOid(f.algorithmIdentifier);if(!(g===Xt.oids.md2||g===Xt.oids.md5||g===Xt.oids.sha1||g===Xt.oids.sha224||g===Xt.oids.sha256||g===Xt.oids.sha384||g===Xt.oids.sha512||g===Xt.oids["sha512-224"]||g===Xt.oids["sha512-256"])){var d=new Error("Unknown RSASSA-PKCS1-v1_5 DigestAlgorithm identifier.");throw d.oid=g,d}if((g===Xt.oids.md2||g===Xt.oids.md5)&&!("parameters"in f))throw new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value. Missing algorithm identifer NULL parameters.");return c===f.digest}}:(s==="NONE"||s==="NULL"||s===null)&&(s={verify:function(c,l){return l=TE(l,r,!0),c===l}});var o=kr.rsa.decrypt(i,r,!0,!1);return s.verify(n,o,r.n.bitLength())},r};kr.setRsaPrivateKey=kr.rsa.setPrivateKey=function(t,e,r,n,i,s,a,o){var c={n:t,e,d:r,p:n,q:i,dP:s,dQ:a,qInv:o};return c.decrypt=function(l,u,f){typeof u=="string"?u=u.toUpperCase():u===void 0&&(u="RSAES-PKCS1-V1_5");var h=kr.rsa.decrypt(l,c,!1,!1);if(u==="RSAES-PKCS1-V1_5")u={decode:TE};else if(u==="RSA-OAEP"||u==="RSAES-OAEP")u={decode:function(d,g){return Xt.pkcs1.decode_rsa_oaep(g,d,f)}};else if(["RAW","NONE","NULL",null].indexOf(u)!==-1)u={decode:function(d){return d}};else throw new Error('Unsupported encryption scheme: "'+u+'".');return u.decode(h,c,!1)},c.sign=function(l,u){var f=!1;typeof u=="string"&&(u=u.toUpperCase()),u===void 0||u==="RSASSA-PKCS1-V1_5"?(u={encode:Tft},f=1):(u==="NONE"||u==="NULL"||u===null)&&(u={encode:function(){return l}},f=1);var h=u.encode(l,c.n.bitLength());return kr.rsa.encrypt(h,c,f)},c};kr.wrapRsaPrivateKey=function(t){return qe.create(qe.Class.UNIVERSAL,qe.Type.SEQUENCE,!0,[qe.create(qe.Class.UNIVERSAL,qe.Type.INTEGER,!1,qe.integerToDer(0).getBytes()),qe.create(qe.Class.UNIVERSAL,qe.Type.SEQUENCE,!0,[qe.create(qe.Class.UNIVERSAL,qe.Type.OID,!1,qe.oidToDer(kr.oids.rsaEncryption).getBytes()),qe.create(qe.Class.UNIVERSAL,qe.Type.NULL,!1,"")]),qe.create(qe.Class.UNIVERSAL,qe.Type.OCTETSTRING,!1,qe.toDer(t).getBytes())])};kr.privateKeyFromAsn1=function(t){var e={},r=[];if(qe.validate(t,_ft,e,r)&&(t=qe.fromDer(Xt.util.createBuffer(e.privateKey))),e={},r=[],!qe.validate(t,xft,e,r)){var n=new Error("Cannot read private key. ASN.1 object does not contain an RSAPrivateKey.");throw n.errors=r,n}var i,s,a,o,c,l,u,f;return i=Xt.util.createBuffer(e.privateKeyModulus).toHex(),s=Xt.util.createBuffer(e.privateKeyPublicExponent).toHex(),a=Xt.util.createBuffer(e.privateKeyPrivateExponent).toHex(),o=Xt.util.createBuffer(e.privateKeyPrime1).toHex(),c=Xt.util.createBuffer(e.privateKeyPrime2).toHex(),l=Xt.util.createBuffer(e.privateKeyExponent1).toHex(),u=Xt.util.createBuffer(e.privateKeyExponent2).toHex(),f=Xt.util.createBuffer(e.privateKeyCoefficient).toHex(),kr.setRsaPrivateKey(new Tn(i,16),new Tn(s,16),new Tn(a,16),new Tn(o,16),new Tn(c,16),new Tn(l,16),new Tn(u,16),new Tn(f,16))};kr.privateKeyToAsn1=kr.privateKeyToRSAPrivateKey=function(t){return qe.create(qe.Class.UNIVERSAL,qe.Type.SEQUENCE,!0,[qe.create(qe.Class.UNIVERSAL,qe.Type.INTEGER,!1,qe.integerToDer(0).getBytes()),qe.create(qe.Class.UNIVERSAL,qe.Type.INTEGER,!1,Af(t.n)),qe.create(qe.Class.UNIVERSAL,qe.Type.INTEGER,!1,Af(t.e)),qe.create(qe.Class.UNIVERSAL,qe.Type.INTEGER,!1,Af(t.d)),qe.create(qe.Class.UNIVERSAL,qe.Type.INTEGER,!1,Af(t.p)),qe.create(qe.Class.UNIVERSAL,qe.Type.INTEGER,!1,Af(t.q)),qe.create(qe.Class.UNIVERSAL,qe.Type.INTEGER,!1,Af(t.dP)),qe.create(qe.Class.UNIVERSAL,qe.Type.INTEGER,!1,Af(t.dQ)),qe.create(qe.Class.UNIVERSAL,qe.Type.INTEGER,!1,Af(t.qInv))])};kr.publicKeyFromAsn1=function(t){var e={},r=[];if(qe.validate(t,Sft,e,r)){var n=qe.derToOid(e.publicKeyOid);if(n!==kr.oids.rsaEncryption){var i=new Error("Cannot read public key. Unknown OID.");throw i.oid=n,i}t=e.rsaPublicKey}if(r=[],!qe.validate(t,Eft,e,r)){var i=new Error("Cannot read public key. ASN.1 object does not contain an RSAPublicKey.");throw i.errors=r,i}var s=Xt.util.createBuffer(e.publicKeyModulus).toHex(),a=Xt.util.createBuffer(e.publicKeyExponent).toHex();return kr.setRsaPublicKey(new Tn(s,16),new Tn(a,16))};kr.publicKeyToAsn1=kr.publicKeyToSubjectPublicKeyInfo=function(t){return qe.create(qe.Class.UNIVERSAL,qe.Type.SEQUENCE,!0,[qe.create(qe.Class.UNIVERSAL,qe.Type.SEQUENCE,!0,[qe.create(qe.Class.UNIVERSAL,qe.Type.OID,!1,qe.oidToDer(kr.oids.rsaEncryption).getBytes()),qe.create(qe.Class.UNIVERSAL,qe.Type.NULL,!1,"")]),qe.create(qe.Class.UNIVERSAL,qe.Type.BITSTRING,!1,[kr.publicKeyToRSAPublicKey(t)])])};kr.publicKeyToRSAPublicKey=function(t){return qe.create(qe.Class.UNIVERSAL,qe.Type.SEQUENCE,!0,[qe.create(qe.Class.UNIVERSAL,qe.Type.INTEGER,!1,Af(t.n)),qe.create(qe.Class.UNIVERSAL,qe.Type.INTEGER,!1,Af(t.e))])};function vpe(t,e,r){var n=Xt.util.createBuffer(),i=Math.ceil(e.n.bitLength()/8);if(t.length>i-11){var s=new Error("Message is too long for PKCS#1 v1.5 padding.");throw s.length=t.length,s.max=i-11,s}n.putByte(0),n.putByte(r);var a=i-3-t.length,o;if(r===0||r===1){o=r===0?0:255;for(var c=0;c<a;++c)n.putByte(o)}else for(;a>0;){for(var l=0,u=Xt.random.getBytes(a),c=0;c<a;++c)o=u.charCodeAt(c),o===0?++l:n.putByte(o);a=l}return n.putByte(0),n.putBytes(t),n}function TE(t,e,r,n){var i=Math.ceil(e.n.bitLength()/8),s=Xt.util.createBuffer(t),a=s.getByte(),o=s.getByte();if(a!==0||r&&o!==0&&o!==1||!r&&o!=2||r&&o===0&&typeof n>"u")throw new Error("Encryption block is invalid.");var c=0;if(o===0){c=i-3-n;for(var l=0;l<c;++l)if(s.getByte()!==0)throw new Error("Encryption block is invalid.")}else if(o===1)for(c=0;s.length()>1;){if(s.getByte()!==255){--s.read;break}++c}else if(o===2)for(c=0;s.length()>1;){if(s.getByte()===0){--s.read;break}++c}var u=s.getByte();if(u!==0||c!==i-3-s.length())throw new Error("Encryption block is invalid.");return s.getBytes()}function kft(t,e,r){typeof e=="function"&&(r=e,e={}),e=e||{};var n={algorithm:{name:e.algorithm||"PRIMEINC",options:{workers:e.workers||2,workLoad:e.workLoad||100,workerScript:e.workerScript}}};"prng"in e&&(n.prng=e.prng),i();function i(){s(t.pBits,function(o,c){if(o)return r(o);if(t.p=c,t.q!==null)return a(o,t.q);s(t.qBits,a)})}function s(o,c){Xt.prime.generateProbablePrime(o,n,c)}function a(o,c){if(o)return r(o);if(t.q=c,t.p.compareTo(t.q)<0){var l=t.p;t.p=t.q,t.q=l}if(t.p.subtract(Tn.ONE).gcd(t.e).compareTo(Tn.ONE)!==0){t.p=null,i();return}if(t.q.subtract(Tn.ONE).gcd(t.e).compareTo(Tn.ONE)!==0){t.q=null,s(t.qBits,a);return}if(t.p1=t.p.subtract(Tn.ONE),t.q1=t.q.subtract(Tn.ONE),t.phi=t.p1.multiply(t.q1),t.phi.gcd(t.e).compareTo(Tn.ONE)!==0){t.p=t.q=null,i();return}if(t.n=t.p.multiply(t.q),t.n.bitLength()!==t.bits){t.q=null,s(t.qBits,a);return}var u=t.e.modInverse(t.phi);t.keys={privateKey:kr.rsa.setPrivateKey(t.n,t.e,u,t.p,t.q,u.mod(t.p1),u.mod(t.q1),t.q.modInverse(t.p)),publicKey:kr.rsa.setPublicKey(t.n,t.e)},r(null,t.keys)}}function Af(t){var e=t.toString(16);e[0]>="8"&&(e="00"+e);var r=Xt.util.hexToBytes(e);return r.length>1&&(r.charCodeAt(0)===0&&!(r.charCodeAt(1)&128)||r.charCodeAt(0)===255&&(r.charCodeAt(1)&128)===128)?r.substr(1):r}function Cft(t){return t<=100?27:t<=150?18:t<=200?15:t<=250?12:t<=300?9:t<=350?8:t<=400?7:t<=500?6:t<=600?5:t<=800?4:t<=1250?3:2}function Ete(t){return Xt.util.isNodejs&&typeof vN[t]=="function"}function Ste(t){return typeof $l.globalScope<"u"&&typeof $l.globalScope.crypto=="object"&&typeof $l.globalScope.crypto.subtle=="object"&&typeof $l.globalScope.crypto.subtle[t]=="function"}function Ate(t){return typeof $l.globalScope<"u"&&typeof $l.globalScope.msCrypto=="object"&&typeof $l.globalScope.msCrypto.subtle=="object"&&typeof $l.globalScope.msCrypto.subtle[t]=="function"}function Tte(t){for(var e=Xt.util.hexToBytes(t.toString(16)),r=new Uint8Array(e.length),n=0;n<e.length;++n)r[n]=e.charCodeAt(n);return r}var Rt=as;if(typeof Ift>"u")var Ift=Rt.jsbn.BigInteger;var Ze=Rt.asn1,Ur=Rt.pki=Rt.pki||{};Ur.pbe=Rt.pbe=Rt.pbe||{};var Up=Ur.oids,Rft={name:"EncryptedPrivateKeyInfo",tagClass:Ze.Class.UNIVERSAL,type:Ze.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedPrivateKeyInfo.encryptionAlgorithm",tagClass:Ze.Class.UNIVERSAL,type:Ze.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:Ze.Class.UNIVERSAL,type:Ze.Type.OID,constructed:!1,capture:"encryptionOid"},{name:"AlgorithmIdentifier.parameters",tagClass:Ze.Class.UNIVERSAL,type:Ze.Type.SEQUENCE,constructed:!0,captureAsn1:"encryptionParams"}]},{name:"EncryptedPrivateKeyInfo.encryptedData",tagClass:Ze.Class.UNIVERSAL,type:Ze.Type.OCTETSTRING,constructed:!1,capture:"encryptedData"}]},Pft={name:"PBES2Algorithms",tagClass:Ze.Class.UNIVERSAL,type:Ze.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc",tagClass:Ze.Class.UNIVERSAL,type:Ze.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc.oid",tagClass:Ze.Class.UNIVERSAL,type:Ze.Type.OID,constructed:!1,capture:"kdfOid"},{name:"PBES2Algorithms.params",tagClass:Ze.Class.UNIVERSAL,type:Ze.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.params.salt",tagClass:Ze.Class.UNIVERSAL,type:Ze.Type.OCTETSTRING,constructed:!1,capture:"kdfSalt"},{name:"PBES2Algorithms.params.iterationCount",tagClass:Ze.Class.UNIVERSAL,type:Ze.Type.INTEGER,constructed:!1,capture:"kdfIterationCount"},{name:"PBES2Algorithms.params.keyLength",tagClass:Ze.Class.UNIVERSAL,type:Ze.Type.INTEGER,constructed:!1,optional:!0,capture:"keyLength"},{name:"PBES2Algorithms.params.prf",tagClass:Ze.Class.UNIVERSAL,type:Ze.Type.SEQUENCE,constructed:!0,optional:!0,value:[{name:"PBES2Algorithms.params.prf.algorithm",tagClass:Ze.Class.UNIVERSAL,type:Ze.Type.OID,constructed:!1,capture:"prfOid"}]}]}]},{name:"PBES2Algorithms.encryptionScheme",tagClass:Ze.Class.UNIVERSAL,type:Ze.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.encryptionScheme.oid",tagClass:Ze.Class.UNIVERSAL,type:Ze.Type.OID,constructed:!1,capture:"encOid"},{name:"PBES2Algorithms.encryptionScheme.iv",tagClass:Ze.Class.UNIVERSAL,type:Ze.Type.OCTETSTRING,constructed:!1,capture:"encIv"}]}]},Bft={name:"pkcs-12PbeParams",tagClass:Ze.Class.UNIVERSAL,type:Ze.Type.SEQUENCE,constructed:!0,value:[{name:"pkcs-12PbeParams.salt",tagClass:Ze.Class.UNIVERSAL,type:Ze.Type.OCTETSTRING,constructed:!1,capture:"salt"},{name:"pkcs-12PbeParams.iterations",tagClass:Ze.Class.UNIVERSAL,type:Ze.Type.INTEGER,constructed:!1,capture:"iterations"}]};Ur.encryptPrivateKeyInfo=function(t,e,r){r=r||{},r.saltSize=r.saltSize||8,r.count=r.count||2048,r.algorithm=r.algorithm||"aes128",r.prfAlgorithm=r.prfAlgorithm||"sha1";var n=Rt.random.getBytesSync(r.saltSize),i=r.count,s=Ze.integerToDer(i),a,o,c;if(r.algorithm.indexOf("aes")===0||r.algorithm==="des"){var l,u,f;switch(r.algorithm){case"aes128":a=16,l=16,u=Up["aes128-CBC"],f=Rt.aes.createEncryptionCipher;break;case"aes192":a=24,l=16,u=Up["aes192-CBC"],f=Rt.aes.createEncryptionCipher;break;case"aes256":a=32,l=16,u=Up["aes256-CBC"],f=Rt.aes.createEncryptionCipher;break;case"des":a=8,l=8,u=Up.desCBC,f=Rt.des.createEncryptionCipher;break;default:var h=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw h.algorithm=r.algorithm,h}var d="hmacWith"+r.prfAlgorithm.toUpperCase(),g=wpe(d),p=Rt.pkcs5.pbkdf2(e,n,i,a,g),m=Rt.random.getBytesSync(l),y=f(p);y.start(m),y.update(Ze.toDer(t)),y.finish(),c=y.output.getBytes();var v=Dft(n,s,a,d);o=Ze.create(Ze.Class.UNIVERSAL,Ze.Type.SEQUENCE,!0,[Ze.create(Ze.Class.UNIVERSAL,Ze.Type.OID,!1,Ze.oidToDer(Up.pkcs5PBES2).getBytes()),Ze.create(Ze.Class.UNIVERSAL,Ze.Type.SEQUENCE,!0,[Ze.create(Ze.Class.UNIVERSAL,Ze.Type.SEQUENCE,!0,[Ze.create(Ze.Class.UNIVERSAL,Ze.Type.OID,!1,Ze.oidToDer(Up.pkcs5PBKDF2).getBytes()),v]),Ze.create(Ze.Class.UNIVERSAL,Ze.Type.SEQUENCE,!0,[Ze.create(Ze.Class.UNIVERSAL,Ze.Type.OID,!1,Ze.oidToDer(u).getBytes()),Ze.create(Ze.Class.UNIVERSAL,Ze.Type.OCTETSTRING,!1,m)])])])}else if(r.algorithm==="3des"){a=24;var _=new Rt.util.ByteBuffer(n),p=Ur.pbe.generatePkcs12Key(e,_,1,i,a),m=Ur.pbe.generatePkcs12Key(e,_,2,i,a),y=Rt.des.createEncryptionCipher(p);y.start(m),y.update(Ze.toDer(t)),y.finish(),c=y.output.getBytes(),o=Ze.create(Ze.Class.UNIVERSAL,Ze.Type.SEQUENCE,!0,[Ze.create(Ze.Class.UNIVERSAL,Ze.Type.OID,!1,Ze.oidToDer(Up["pbeWithSHAAnd3-KeyTripleDES-CBC"]).getBytes()),Ze.create(Ze.Class.UNIVERSAL,Ze.Type.SEQUENCE,!0,[Ze.create(Ze.Class.UNIVERSAL,Ze.Type.OCTETSTRING,!1,n),Ze.create(Ze.Class.UNIVERSAL,Ze.Type.INTEGER,!1,s.getBytes())])])}else{var h=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw h.algorithm=r.algorithm,h}var x=Ze.create(Ze.Class.UNIVERSAL,Ze.Type.SEQUENCE,!0,[o,Ze.create(Ze.Class.UNIVERSAL,Ze.Type.OCTETSTRING,!1,c)]);return x};Ur.decryptPrivateKeyInfo=function(t,e){var r=null,n={},i=[];if(!Ze.validate(t,Rft,n,i)){var s=new Error("Cannot read encrypted private key. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw s.errors=i,s}var a=Ze.derToOid(n.encryptionOid),o=Ur.pbe.getCipher(a,n.encryptionParams,e),c=Rt.util.createBuffer(n.encryptedData);return o.update(c),o.finish()&&(r=Ze.fromDer(o.output)),r};Ur.encryptedPrivateKeyToPem=function(t,e){var r={type:"ENCRYPTED PRIVATE KEY",body:Ze.toDer(t).getBytes()};return Rt.pem.encode(r,{maxline:e})};Ur.encryptedPrivateKeyFromPem=function(t){var e=Rt.pem.decode(t)[0];if(e.type!=="ENCRYPTED PRIVATE KEY"){var r=new Error('Could not convert encrypted private key from PEM; PEM header type is "ENCRYPTED PRIVATE KEY".');throw r.headerType=e.type,r}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert encrypted private key from PEM; PEM is encrypted.");return Ze.fromDer(e.body)};Ur.encryptRsaPrivateKey=function(t,e,r){if(r=r||{},!r.legacy){var n=Ur.wrapRsaPrivateKey(Ur.privateKeyToAsn1(t));return n=Ur.encryptPrivateKeyInfo(n,e,r),Ur.encryptedPrivateKeyToPem(n)}var i,s,a,o;switch(r.algorithm){case"aes128":i="AES-128-CBC",a=16,s=Rt.random.getBytesSync(16),o=Rt.aes.createEncryptionCipher;break;case"aes192":i="AES-192-CBC",a=24,s=Rt.random.getBytesSync(16),o=Rt.aes.createEncryptionCipher;break;case"aes256":i="AES-256-CBC",a=32,s=Rt.random.getBytesSync(16),o=Rt.aes.createEncryptionCipher;break;case"3des":i="DES-EDE3-CBC",a=24,s=Rt.random.getBytesSync(8),o=Rt.des.createEncryptionCipher;break;case"des":i="DES-CBC",a=8,s=Rt.random.getBytesSync(8),o=Rt.des.createEncryptionCipher;break;default:var c=new Error('Could not encrypt RSA private key; unsupported encryption algorithm "'+r.algorithm+'".');throw c.algorithm=r.algorithm,c}var l=Rt.pbe.opensslDeriveBytes(e,s.substr(0,8),a),u=o(l);u.start(s),u.update(Ze.toDer(Ur.privateKeyToAsn1(t))),u.finish();var f={type:"RSA PRIVATE KEY",procType:{version:"4",type:"ENCRYPTED"},dekInfo:{algorithm:i,parameters:Rt.util.bytesToHex(s).toUpperCase()},body:u.output.getBytes()};return Rt.pem.encode(f)};Ur.decryptRsaPrivateKey=function(t,e){var r=null,n=Rt.pem.decode(t)[0];if(n.type!=="ENCRYPTED PRIVATE KEY"&&n.type!=="PRIVATE KEY"&&n.type!=="RSA PRIVATE KEY"){var i=new Error('Could not convert private key from PEM; PEM header type is not "ENCRYPTED PRIVATE KEY", "PRIVATE KEY", or "RSA PRIVATE KEY".');throw i.headerType=i,i}if(n.procType&&n.procType.type==="ENCRYPTED"){var s,a;switch(n.dekInfo.algorithm){case"DES-CBC":s=8,a=Rt.des.createDecryptionCipher;break;case"DES-EDE3-CBC":s=24,a=Rt.des.createDecryptionCipher;break;case"AES-128-CBC":s=16,a=Rt.aes.createDecryptionCipher;break;case"AES-192-CBC":s=24,a=Rt.aes.createDecryptionCipher;break;case"AES-256-CBC":s=32,a=Rt.aes.createDecryptionCipher;break;case"RC2-40-CBC":s=5,a=function(f){return Rt.rc2.createDecryptionCipher(f,40)};break;case"RC2-64-CBC":s=8,a=function(f){return Rt.rc2.createDecryptionCipher(f,64)};break;case"RC2-128-CBC":s=16,a=function(f){return Rt.rc2.createDecryptionCipher(f,128)};break;default:var i=new Error('Could not decrypt private key; unsupported encryption algorithm "'+n.dekInfo.algorithm+'".');throw i.algorithm=n.dekInfo.algorithm,i}var o=Rt.util.hexToBytes(n.dekInfo.parameters),c=Rt.pbe.opensslDeriveBytes(e,o.substr(0,8),s),l=a(c);if(l.start(o),l.update(Rt.util.createBuffer(n.body)),l.finish())r=l.output.getBytes();else return r}else r=n.body;return n.type==="ENCRYPTED PRIVATE KEY"?r=Ur.decryptPrivateKeyInfo(Ze.fromDer(r),e):r=Ze.fromDer(r),r!==null&&(r=Ur.privateKeyFromAsn1(r)),r};Ur.pbe.generatePkcs12Key=function(t,e,r,n,i,s){var a,o;if(typeof s>"u"||s===null){if(!("sha1"in Rt.md))throw new Error('"sha1" hash algorithm unavailable.');s=Rt.md.sha1.create()}var c=s.digestLength,l=s.blockLength,u=new Rt.util.ByteBuffer,f=new Rt.util.ByteBuffer;if(t!=null){for(o=0;o<t.length;o++)f.putInt16(t.charCodeAt(o));f.putInt16(0)}var h=f.length(),d=e.length(),g=new Rt.util.ByteBuffer;g.fillWithByte(r,l);var p=l*Math.ceil(d/l),m=new Rt.util.ByteBuffer;for(o=0;o<p;o++)m.putByte(e.at(o%d));var y=l*Math.ceil(h/l),v=new Rt.util.ByteBuffer;for(o=0;o<y;o++)v.putByte(f.at(o%h));var _=m;_.putBuffer(v);for(var x=Math.ceil(i/c),A=1;A<=x;A++){var C=new Rt.util.ByteBuffer;C.putBytes(g.bytes()),C.putBytes(_.bytes());for(var R=0;R<n;R++)s.start(),s.update(C.getBytes()),C=s.digest();var M=new Rt.util.ByteBuffer;for(o=0;o<l;o++)M.putByte(C.at(o%c));var N=Math.ceil(d/l)+Math.ceil(h/l),Y=new Rt.util.ByteBuffer;for(a=0;a<N;a++){var H=new Rt.util.ByteBuffer(_.getBytes(l)),E=511;for(o=M.length()-1;o>=0;o--)E=E>>8,E+=M.at(o)+H.at(o),H.setAt(o,E&255);Y.putBuffer(H)}_=Y,u.putBuffer(C)}return u.truncate(u.length()-i),u};Ur.pbe.getCipher=function(t,e,r){switch(t){case Ur.oids.pkcs5PBES2:return Ur.pbe.getCipherForPBES2(t,e,r);case Ur.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:case Ur.oids["pbewithSHAAnd40BitRC2-CBC"]:return Ur.pbe.getCipherForPKCS12PBE(t,e,r);default:var n=new Error("Cannot read encrypted PBE data block. Unsupported OID.");throw n.oid=t,n.supportedOids=["pkcs5PBES2","pbeWithSHAAnd3-KeyTripleDES-CBC","pbewithSHAAnd40BitRC2-CBC"],n}};Ur.pbe.getCipherForPBES2=function(t,e,r){var n={},i=[];if(!Ze.validate(e,Pft,n,i)){var s=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw s.errors=i,s}if(t=Ze.derToOid(n.kdfOid),t!==Ur.oids.pkcs5PBKDF2){var s=new Error("Cannot read encrypted private key. Unsupported key derivation function OID.");throw s.oid=t,s.supportedOids=["pkcs5PBKDF2"],s}if(t=Ze.derToOid(n.encOid),t!==Ur.oids["aes128-CBC"]&&t!==Ur.oids["aes192-CBC"]&&t!==Ur.oids["aes256-CBC"]&&t!==Ur.oids["des-EDE3-CBC"]&&t!==Ur.oids.desCBC){var s=new Error("Cannot read encrypted private key. Unsupported encryption scheme OID.");throw s.oid=t,s.supportedOids=["aes128-CBC","aes192-CBC","aes256-CBC","des-EDE3-CBC","desCBC"],s}var a=n.kdfSalt,o=Rt.util.createBuffer(n.kdfIterationCount);o=o.getInt(o.length()<<3);var c,l;switch(Ur.oids[t]){case"aes128-CBC":c=16,l=Rt.aes.createDecryptionCipher;break;case"aes192-CBC":c=24,l=Rt.aes.createDecryptionCipher;break;case"aes256-CBC":c=32,l=Rt.aes.createDecryptionCipher;break;case"des-EDE3-CBC":c=24,l=Rt.des.createDecryptionCipher;break;case"desCBC":c=8,l=Rt.des.createDecryptionCipher;break}var u=bpe(n.prfOid),f=Rt.pkcs5.pbkdf2(r,a,o,c,u),h=n.encIv,d=l(f);return d.start(h),d};Ur.pbe.getCipherForPKCS12PBE=function(t,e,r){var n={},i=[];if(!Ze.validate(e,Bft,n,i)){var s=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw s.errors=i,s}var a=Rt.util.createBuffer(n.salt),o=Rt.util.createBuffer(n.iterations);o=o.getInt(o.length()<<3);var c,l,u;switch(t){case Ur.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:c=24,l=8,u=Rt.des.startDecrypting;break;case Ur.oids["pbewithSHAAnd40BitRC2-CBC"]:c=5,l=8,u=function(p,m){var y=Rt.rc2.createDecryptionCipher(p,40);return y.start(m,null),y};break;default:var s=new Error("Cannot read PKCS #12 PBE data block. Unsupported OID.");throw s.oid=t,s}var f=bpe(n.prfOid),h=Ur.pbe.generatePkcs12Key(r,a,1,o,c,f);f.start();var d=Ur.pbe.generatePkcs12Key(r,a,2,o,l,f);return u(h,d)};Ur.pbe.opensslDeriveBytes=function(t,e,r,n){if(typeof n>"u"||n===null){if(!("md5"in Rt.md))throw new Error('"md5" hash algorithm unavailable.');n=Rt.md.md5.create()}e===null&&(e="");for(var i=[kte(n,t+e)],s=16,a=1;s<r;++a,s+=16)i.push(kte(n,i[a-1]+t+e));return i.join("").substr(0,r)};function kte(t,e){return t.start().update(e).digest().getBytes()}function bpe(t){var e;if(!t)e="hmacWithSHA1";else if(e=Ur.oids[Ze.derToOid(t)],!e){var r=new Error("Unsupported PRF OID.");throw r.oid=t,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}return wpe(e)}function wpe(t){var e=Rt.md;switch(t){case"hmacWithSHA224":e=Rt.md.sha512;case"hmacWithSHA1":case"hmacWithSHA256":case"hmacWithSHA384":case"hmacWithSHA512":t=t.substr(8).toLowerCase();break;default:var r=new Error("Unsupported PRF algorithm.");throw r.algorithm=t,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}if(!e||!(t in e))throw new Error("Unknown hash algorithm: "+t);return e[t].create()}function Dft(t,e,r,n){var i=Ze.create(Ze.Class.UNIVERSAL,Ze.Type.SEQUENCE,!0,[Ze.create(Ze.Class.UNIVERSAL,Ze.Type.OCTETSTRING,!1,t),Ze.create(Ze.Class.UNIVERSAL,Ze.Type.INTEGER,!1,e.getBytes())]);return n!=="hmacWithSHA1"&&i.value.push(Ze.create(Ze.Class.UNIVERSAL,Ze.Type.INTEGER,!1,Rt.util.hexToBytes(r.toString(16))),Ze.create(Ze.Class.UNIVERSAL,Ze.Type.SEQUENCE,!0,[Ze.create(Ze.Class.UNIVERSAL,Ze.Type.OID,!1,Ze.oidToDer(Ur.oids[n]).getBytes()),Ze.create(Ze.Class.UNIVERSAL,Ze.Type.NULL,!1,"")])),i}function Kr(t,e){if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0}function Tf(t,e){let r=Uint8Array.from(t.abs().toByteArray());return r=r[0]===0?r.subarray(1):r,vt(r,"base64url")}function wu(t){const e=Oft(t);return new Ko.jsbn.BigInteger(vt(e,"base16"),16)}function Oft(t,e){return pt(t,"base64urlpad")}function lp(t){return t==null?!1:typeof t.then=="function"&&typeof t.catch=="function"&&typeof t.finally=="function"}function Ey(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`positive integer expected, not ${t}`)}function Nft(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}function wA(t,...e){if(!Nft(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error(`Uint8Array expected of length ${e}, not of length=${t.length}`)}function _A(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Ey(t.outputLen),Ey(t.blockLen)}function kE(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function Mft(t,e){wA(t);const r=e.outputLen;if(t.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}const L2=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const b3=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),yf=(t,e)=>t<<32-e|t>>>e,WP=(t,e)=>t<<e|t>>>32-e>>>0;new Uint8Array(new Uint32Array([287454020]).buffer)[0];const Lft=async()=>{};async function Fft(t,e,r){let n=Date.now();for(let i=0;i<t;i++){r(i);const s=Date.now()-n;s>=0&&s<e||(await Lft(),n+=s)}}function $ft(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function rm(t){return typeof t=="string"&&(t=$ft(t)),wA(t),t}function Uft(...t){let e=0;for(let n=0;n<t.length;n++){const i=t[n];wA(i),e+=i.length}const r=new Uint8Array(e);for(let n=0,i=0;n<t.length;n++){const s=t[n];r.set(s,i),i+=s.length}return r}class _pe{clone(){return this._cloneInto()}}const Vft={}.toString;function jft(t,e){if(e!==void 0&&Vft.call(e)!=="[object Object]")throw new Error("Options should be object or undefined");return Object.assign(t,e)}function SU(t){const e=n=>t().update(rm(n)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function z6(t=32){if(L2&&typeof L2.getRandomValues=="function")return L2.getRandomValues(new Uint8Array(t));if(L2&&typeof L2.randomBytes=="function")return L2.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}function zft(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);const i=BigInt(32),s=BigInt(4294967295),a=Number(r>>i&s),o=Number(r&s),c=n?4:0,l=n?0:4;t.setUint32(e+c,a,n),t.setUint32(e+l,o,n)}const xpe=(t,e,r)=>t&e^~t&r,Epe=(t,e,r)=>t&e^t&r^e&r;class AU extends _pe{constructor(e,r,n,i){super(),this.blockLen=e,this.outputLen=r,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=b3(this.buffer)}update(e){kE(this);const{view:r,buffer:n,blockLen:i}=this;e=rm(e);const s=e.length;for(let a=0;a<s;){const o=Math.min(i-this.pos,s-a);if(o===i){const c=b3(e);for(;i<=s-a;a+=i)this.process(c,a);continue}n.set(e.subarray(a,a+o),this.pos),this.pos+=o,a+=o,this.pos===i&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){kE(this),Mft(e,this),this.finished=!0;const{buffer:r,view:n,blockLen:i,isLE:s}=this;let{pos:a}=this;r[a++]=128,this.buffer.subarray(a).fill(0),this.padOffset>i-a&&(this.process(n,0),a=0);for(let f=a;f<i;f++)r[f]=0;zft(n,i-8,BigInt(this.length*8),s),this.process(n,0);const o=b3(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let f=0;f<l;f++)o.setUint32(4*f,u[f],s)}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:r,buffer:n,length:i,finished:s,destroyed:a,pos:o}=this;return e.length=i,e.pos=o,e.finished=s,e.destroyed=a,i%r&&e.buffer.set(n),e}}const g5=BigInt(2**32-1),bN=BigInt(32);function Spe(t,e=!1){return e?{h:Number(t&g5),l:Number(t>>bN&g5)}:{h:Number(t>>bN&g5)|0,l:Number(t&g5)|0}}function qft(t,e=!1){let r=new Uint32Array(t.length),n=new Uint32Array(t.length);for(let i=0;i<t.length;i++){const{h:s,l:a}=Spe(t[i],e);[r[i],n[i]]=[s,a]}return[r,n]}const Hft=(t,e)=>BigInt(t>>>0)<<bN|BigInt(e>>>0),Wft=(t,e,r)=>t>>>r,Kft=(t,e,r)=>t<<32-r|e>>>r,Gft=(t,e,r)=>t>>>r|e<<32-r,Yft=(t,e,r)=>t<<32-r|e>>>r,Xft=(t,e,r)=>t<<64-r|e>>>r-32,Zft=(t,e,r)=>t>>>r-32|e<<64-r,Jft=(t,e)=>e,Qft=(t,e)=>t,eht=(t,e,r)=>t<<r|e>>>32-r,tht=(t,e,r)=>e<<r|t>>>32-r,rht=(t,e,r)=>e<<r-32|t>>>64-r,nht=(t,e,r)=>t<<r-32|e>>>64-r;function iht(t,e,r,n){const i=(e>>>0)+(n>>>0);return{h:t+r+(i/2**32|0)|0,l:i|0}}const sht=(t,e,r)=>(t>>>0)+(e>>>0)+(r>>>0),aht=(t,e,r,n)=>e+r+n+(t/2**32|0)|0,oht=(t,e,r,n)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0),cht=(t,e,r,n,i)=>e+r+n+i+(t/2**32|0)|0,lht=(t,e,r,n,i)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0)+(i>>>0),uht=(t,e,r,n,i,s)=>e+r+n+i+s+(t/2**32|0)|0,zr={fromBig:Spe,split:qft,toBig:Hft,shrSH:Wft,shrSL:Kft,rotrSH:Gft,rotrSL:Yft,rotrBH:Xft,rotrBL:Zft,rotr32H:Jft,rotr32L:Qft,rotlSH:eht,rotlSL:tht,rotlBH:rht,rotlBL:nht,add:iht,add3L:sht,add3H:aht,add4L:oht,add4H:cht,add5H:uht,add5L:lht},[fht,hht]=zr.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),$0=new Uint32Array(80),U0=new Uint32Array(80);class dht extends AU{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:r,Bh:n,Bl:i,Ch:s,Cl:a,Dh:o,Dl:c,Eh:l,El:u,Fh:f,Fl:h,Gh:d,Gl:g,Hh:p,Hl:m}=this;return[e,r,n,i,s,a,o,c,l,u,f,h,d,g,p,m]}set(e,r,n,i,s,a,o,c,l,u,f,h,d,g,p,m){this.Ah=e|0,this.Al=r|0,this.Bh=n|0,this.Bl=i|0,this.Ch=s|0,this.Cl=a|0,this.Dh=o|0,this.Dl=c|0,this.Eh=l|0,this.El=u|0,this.Fh=f|0,this.Fl=h|0,this.Gh=d|0,this.Gl=g|0,this.Hh=p|0,this.Hl=m|0}process(e,r){for(let _=0;_<16;_++,r+=4)$0[_]=e.getUint32(r),U0[_]=e.getUint32(r+=4);for(let _=16;_<80;_++){const x=$0[_-15]|0,A=U0[_-15]|0,C=zr.rotrSH(x,A,1)^zr.rotrSH(x,A,8)^zr.shrSH(x,A,7),R=zr.rotrSL(x,A,1)^zr.rotrSL(x,A,8)^zr.shrSL(x,A,7),M=$0[_-2]|0,N=U0[_-2]|0,Y=zr.rotrSH(M,N,19)^zr.rotrBH(M,N,61)^zr.shrSH(M,N,6),H=zr.rotrSL(M,N,19)^zr.rotrBL(M,N,61)^zr.shrSL(M,N,6),E=zr.add4L(R,H,U0[_-7],U0[_-16]),k=zr.add4H(E,C,Y,$0[_-7],$0[_-16]);$0[_]=k|0,U0[_]=E|0}let{Ah:n,Al:i,Bh:s,Bl:a,Ch:o,Cl:c,Dh:l,Dl:u,Eh:f,El:h,Fh:d,Fl:g,Gh:p,Gl:m,Hh:y,Hl:v}=this;for(let _=0;_<80;_++){const x=zr.rotrSH(f,h,14)^zr.rotrSH(f,h,18)^zr.rotrBH(f,h,41),A=zr.rotrSL(f,h,14)^zr.rotrSL(f,h,18)^zr.rotrBL(f,h,41),C=f&d^~f&p,R=h&g^~h&m,M=zr.add5L(v,A,R,hht[_],U0[_]),N=zr.add5H(M,y,x,C,fht[_],$0[_]),Y=M|0,H=zr.rotrSH(n,i,28)^zr.rotrBH(n,i,34)^zr.rotrBH(n,i,39),E=zr.rotrSL(n,i,28)^zr.rotrBL(n,i,34)^zr.rotrBL(n,i,39),k=n&s^n&o^s&o,w=i&a^i&c^a&c;y=p|0,v=m|0,p=d|0,m=g|0,d=f|0,g=h|0,{h:f,l:h}=zr.add(l|0,u|0,N|0,Y|0),l=o|0,u=c|0,o=s|0,c=a|0,s=n|0,a=i|0;const T=zr.add3L(Y,E,w);n=zr.add3H(T,N,H,k),i=T|0}({h:n,l:i}=zr.add(this.Ah|0,this.Al|0,n|0,i|0)),{h:s,l:a}=zr.add(this.Bh|0,this.Bl|0,s|0,a|0),{h:o,l:c}=zr.add(this.Ch|0,this.Cl|0,o|0,c|0),{h:l,l:u}=zr.add(this.Dh|0,this.Dl|0,l|0,u|0),{h:f,l:h}=zr.add(this.Eh|0,this.El|0,f|0,h|0),{h:d,l:g}=zr.add(this.Fh|0,this.Fl|0,d|0,g|0),{h:p,l:m}=zr.add(this.Gh|0,this.Gl|0,p|0,m|0),{h:y,l:v}=zr.add(this.Hh|0,this.Hl|0,y|0,v|0),this.set(n,i,s,a,o,c,l,u,f,h,d,g,p,m,y,v)}roundClean(){$0.fill(0),U0.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const xA=SU(()=>new dht);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const TU=BigInt(0),EA=BigInt(1),pht=BigInt(2);function nm(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}function q6(t){if(!nm(t))throw new Error("Uint8Array expected")}function Fd(t,e){if(typeof e!="boolean")throw new Error(`${t} must be valid boolean, got "${e}".`)}const ght=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function im(t){q6(t);let e="";for(let r=0;r<t.length;r++)e+=ght[t[r]];return e}function ay(t){const e=t.toString(16);return e.length&1?`0${e}`:e}function kU(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return BigInt(t===""?"0":`0x${t}`)}const Yh={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function Cte(t){if(t>=Yh._0&&t<=Yh._9)return t-Yh._0;if(t>=Yh._A&&t<=Yh._F)return t-(Yh._A-10);if(t>=Yh._a&&t<=Yh._f)return t-(Yh._a-10)}function av(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,r=e/2;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(r);for(let i=0,s=0;i<r;i++,s+=2){const a=Cte(t.charCodeAt(s)),o=Cte(t.charCodeAt(s+1));if(a===void 0||o===void 0){const c=t[s]+t[s+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+s)}n[i]=a*16+o}return n}function Rg(t){return kU(im(t))}function I1(t){return q6(t),kU(im(Uint8Array.from(t).reverse()))}function ov(t,e){return av(t.toString(16).padStart(e*2,"0"))}function cv(t,e){return ov(t,e).reverse()}function mht(t){return av(ay(t))}function _s(t,e,r){let n;if(typeof e=="string")try{n=av(e)}catch(s){throw new Error(`${t} must be valid hex string, got "${e}". Cause: ${s}`)}else if(nm(e))n=Uint8Array.from(e);else throw new Error(`${t} must be hex string or Uint8Array`);const i=n.length;if(typeof r=="number"&&i!==r)throw new Error(`${t} expected ${r} bytes, got ${i}`);return n}function sm(...t){let e=0;for(let n=0;n<t.length;n++){const i=t[n];q6(i),e+=i.length}const r=new Uint8Array(e);for(let n=0,i=0;n<t.length;n++){const s=t[n];r.set(s,i),i+=s.length}return r}function yht(t,e){if(t.length!==e.length)return!1;let r=0;for(let n=0;n<t.length;n++)r|=t[n]^e[n];return r===0}function vht(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}const KP=t=>typeof t=="bigint"&&TU<=t;function SA(t,e,r){return KP(t)&&KP(e)&&KP(r)&&e<=t&&t<r}function gc(t,e,r,n){if(!SA(e,r,n))throw new Error(`expected valid ${t}: ${r} <= n < ${n}, got ${typeof e} ${e}`)}function Ape(t){let e;for(e=0;t>TU;t>>=EA,e+=1);return e}function bht(t,e){return t>>BigInt(e)&EA}function wht(t,e,r){return t|(r?EA:TU)<<BigInt(e)}const CU=t=>(pht<<BigInt(t-1))-EA,GP=t=>new Uint8Array(t),Ite=t=>Uint8Array.from(t);function Tpe(t,e,r){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof r!="function")throw new Error("hmacFn must be a function");let n=GP(t),i=GP(t),s=0;const a=()=>{n.fill(1),i.fill(0),s=0},o=(...f)=>r(i,n,...f),c=(f=GP())=>{i=o(Ite([0]),f),n=o(),f.length!==0&&(i=o(Ite([1]),f),n=o())},l=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let f=0;const h=[];for(;f<e;){n=o();const d=n.slice();h.push(d),f+=n.length}return sm(...h)};return(f,h)=>{a(),c(f);let d;for(;!(d=h(l()));)c();return a(),d}}const _ht={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||nm(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function Wm(t,e,r={}){const n=(i,s,a)=>{const o=_ht[s];if(typeof o!="function")throw new Error(`Invalid validator "${s}", expected function`);const c=t[i];if(!(a&&c===void 0)&&!o(c,t))throw new Error(`Invalid param ${String(i)}=${c} (${typeof c}), expected ${s}`)};for(const[i,s]of Object.entries(e))n(i,s,!1);for(const[i,s]of Object.entries(r))n(i,s,!0);return t}const xht=()=>{throw new Error("not implemented")};function g4(t){const e=new WeakMap;return(r,...n)=>{const i=e.get(r);if(i!==void 0)return i;const s=t(r,...n);return e.set(r,s),s}}const Eht=Object.freeze(Object.defineProperty({__proto__:null,aInRange:gc,abool:Fd,abytes:q6,bitGet:bht,bitLen:Ape,bitMask:CU,bitSet:wht,bytesToHex:im,bytesToNumberBE:Rg,bytesToNumberLE:I1,concatBytes:sm,createHmacDrbg:Tpe,ensureBytes:_s,equalBytes:yht,hexToBytes:av,hexToNumber:kU,inRange:SA,isBytes:nm,memoized:g4,notImplemented:xht,numberToBytesBE:ov,numberToBytesLE:cv,numberToHexUnpadded:ay,numberToVarBytesBE:mht,utf8ToBytes:vht,validateObject:Wm},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ga=BigInt(0),es=BigInt(1),eg=BigInt(2),Sht=BigInt(3),wN=BigInt(4),Rte=BigInt(5),Pte=BigInt(8);BigInt(9);BigInt(16);function Ci(t,e){const r=t%e;return r>=ga?r:e+r}function kpe(t,e,r){if(r<=ga||e<ga)throw new Error("Expected power/modulo > 0");if(r===es)return ga;let n=es;for(;e>ga;)e&es&&(n=n*t%r),t=t*t%r,e>>=es;return n}function Qi(t,e,r){let n=t;for(;e-- >ga;)n*=n,n%=r;return n}function _N(t,e){if(t===ga||e<=ga)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let r=Ci(t,e),n=e,i=ga,s=es;for(;r!==ga;){const o=n/r,c=n%r,l=i-s*o;n=r,r=c,i=s,s=l}if(n!==es)throw new Error("invert: does not exist");return Ci(i,e)}function Aht(t){const e=(t-es)/eg;let r,n,i;for(r=t-es,n=0;r%eg===ga;r/=eg,n++);for(i=eg;i<t&&kpe(i,e,t)!==t-es;i++);if(n===1){const a=(t+es)/wN;return function(c,l){const u=c.pow(l,a);if(!c.eql(c.sqr(u),l))throw new Error("Cannot find square root");return u}}const s=(r+es)/eg;return function(o,c){if(o.pow(c,e)===o.neg(o.ONE))throw new Error("Cannot find square root");let l=n,u=o.pow(o.mul(o.ONE,i),r),f=o.pow(c,s),h=o.pow(c,r);for(;!o.eql(h,o.ONE);){if(o.eql(h,o.ZERO))return o.ZERO;let d=1;for(let p=o.sqr(h);d<l&&!o.eql(p,o.ONE);d++)p=o.sqr(p);const g=o.pow(u,es<<BigInt(l-d-1));u=o.sqr(g),f=o.mul(f,g),h=o.mul(h,u),l=d}return f}}function Tht(t){if(t%wN===Sht){const e=(t+es)/wN;return function(n,i){const s=n.pow(i,e);if(!n.eql(n.sqr(s),i))throw new Error("Cannot find square root");return s}}if(t%Pte===Rte){const e=(t-Rte)/Pte;return function(n,i){const s=n.mul(i,eg),a=n.pow(s,e),o=n.mul(i,a),c=n.mul(n.mul(o,eg),a),l=n.mul(o,n.sub(c,n.ONE));if(!n.eql(n.sqr(l),i))throw new Error("Cannot find square root");return l}}return Aht(t)}const kht=(t,e)=>(Ci(t,e)&es)===es,Cht=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Iht(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},r=Cht.reduce((n,i)=>(n[i]="function",n),e);return Wm(t,r)}function Rht(t,e,r){if(r<ga)throw new Error("Expected power > 0");if(r===ga)return t.ONE;if(r===es)return e;let n=t.ONE,i=e;for(;r>ga;)r&es&&(n=t.mul(n,i)),i=t.sqr(i),r>>=es;return n}function Pht(t,e){const r=new Array(e.length),n=e.reduce((s,a,o)=>t.is0(a)?s:(r[o]=s,t.mul(s,a)),t.ONE),i=t.inv(n);return e.reduceRight((s,a,o)=>t.is0(a)?s:(r[o]=t.mul(s,r[o]),t.mul(s,a)),i),r}function Cpe(t,e){const r=e!==void 0?e:t.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function AA(t,e,r=!1,n={}){if(t<=ga)throw new Error(`Expected Field ORDER > 0, got ${t}`);const{nBitLength:i,nByteLength:s}=Cpe(t,e);if(s>2048)throw new Error("Field lengths over 2048 bytes are not supported");const a=Tht(t),o=Object.freeze({ORDER:t,BITS:i,BYTES:s,MASK:CU(i),ZERO:ga,ONE:es,create:c=>Ci(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof c}`);return ga<=c&&c<t},is0:c=>c===ga,isOdd:c=>(c&es)===es,neg:c=>Ci(-c,t),eql:(c,l)=>c===l,sqr:c=>Ci(c*c,t),add:(c,l)=>Ci(c+l,t),sub:(c,l)=>Ci(c-l,t),mul:(c,l)=>Ci(c*l,t),pow:(c,l)=>Rht(o,c,l),div:(c,l)=>Ci(c*_N(l,t),t),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>_N(c,t),sqrt:n.sqrt||(c=>a(o,c)),invertBatch:c=>Pht(o,c),cmov:(c,l,u)=>u?l:c,toBytes:c=>r?cv(c,s):ov(c,s),fromBytes:c=>{if(c.length!==s)throw new Error(`Fp.fromBytes: expected ${s}, got ${c.length}`);return r?I1(c):Rg(c)}});return Object.freeze(o)}function Ipe(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function Rpe(t){const e=Ipe(t);return e+Math.ceil(e/2)}function Bht(t,e,r=!1){const n=t.length,i=Ipe(e),s=Rpe(e);if(n<16||n<s||n>1024)throw new Error(`expected ${s}-1024 bytes of input, got ${n}`);const a=r?Rg(t):I1(t),o=Ci(a,e-es)+es;return r?cv(o,i):ov(o,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Dht=BigInt(0),YP=BigInt(1),XP=new WeakMap,Bte=new WeakMap;function Ppe(t,e){const r=(s,a)=>{const o=a.negate();return s?o:a},n=s=>{if(!Number.isSafeInteger(s)||s<=0||s>e)throw new Error(`Wrong window size=${s}, should be [1..${e}]`)},i=s=>{n(s);const a=Math.ceil(e/s)+1,o=2**(s-1);return{windows:a,windowSize:o}};return{constTimeNegate:r,unsafeLadder(s,a){let o=t.ZERO,c=s;for(;a>Dht;)a&YP&&(o=o.add(c)),c=c.double(),a>>=YP;return o},precomputeWindow(s,a){const{windows:o,windowSize:c}=i(a),l=[];let u=s,f=u;for(let h=0;h<o;h++){f=u,l.push(f);for(let d=1;d<c;d++)f=f.add(u),l.push(f);u=f.double()}return l},wNAF(s,a,o){const{windows:c,windowSize:l}=i(s);let u=t.ZERO,f=t.BASE;const h=BigInt(2**s-1),d=2**s,g=BigInt(s);for(let p=0;p<c;p++){const m=p*l;let y=Number(o&h);o>>=g,y>l&&(y-=d,o+=YP);const v=m,_=m+Math.abs(y)-1,x=p%2!==0,A=y<0;y===0?f=f.add(r(x,a[v])):u=u.add(r(A,a[_]))}return{p:u,f}},wNAFCached(s,a,o){const c=Bte.get(s)||1;let l=XP.get(s);return l||(l=this.precomputeWindow(s,c),c!==1&&XP.set(s,o(l))),this.wNAF(c,l,a)},setWindowSize(s,a){n(a),Bte.set(s,a),XP.delete(s)}}}function Bpe(t,e,r,n){if(!Array.isArray(r)||!Array.isArray(n)||n.length!==r.length)throw new Error("arrays of points and scalars must have equal length");n.forEach((u,f)=>{if(!e.isValid(u))throw new Error(`wrong scalar at index ${f}`)}),r.forEach((u,f)=>{if(!(u instanceof t))throw new Error(`wrong point at index ${f}`)});const i=Ape(BigInt(r.length)),s=i>12?i-3:i>4?i-2:i?2:1,a=(1<<s)-1,o=new Array(a+1).fill(t.ZERO),c=Math.floor((e.BITS-1)/s)*s;let l=t.ZERO;for(let u=c;u>=0;u-=s){o.fill(t.ZERO);for(let h=0;h<n.length;h++){const d=n[h],g=Number(d>>BigInt(u)&BigInt(a));o[g]=o[g].add(r[h])}let f=t.ZERO;for(let h=o.length-1,d=t.ZERO;h>0;h--)d=d.add(o[h]),f=f.add(d);if(l=l.add(f),u!==0)for(let h=0;h<s;h++)l=l.double()}return l}function IU(t){return Iht(t.Fp),Wm(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Cpe(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ou=BigInt(0),nc=BigInt(1),m5=BigInt(2),Oht=BigInt(8),Nht={zip215:!0};function Mht(t){const e=IU(t);return Wm(t,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function Lht(t){const e=Mht(t),{Fp:r,n,prehash:i,hash:s,randomBytes:a,nByteLength:o,h:c}=e,l=m5<<BigInt(o*8)-nc,u=r.create,f=AA(e.n,e.nBitLength),h=e.uvRatio||((L,I)=>{try{return{isValid:!0,value:r.sqrt(L*r.inv(I))}}catch{return{isValid:!1,value:ou}}}),d=e.adjustScalarBytes||(L=>L),g=e.domain||((L,I,U)=>{if(Fd("phflag",U),I.length||U)throw new Error("Contexts/pre-hash are not supported");return L});function p(L,I){gc("coordinate "+L,I,ou,l)}function m(L){if(!(L instanceof _))throw new Error("ExtendedPoint expected")}const y=g4((L,I)=>{const{ex:U,ey:O,ez:D}=L,P=L.is0();I==null&&(I=P?Oht:r.inv(D));const B=u(U*I),z=u(O*I),F=u(D*I);if(P)return{x:ou,y:nc};if(F!==nc)throw new Error("invZ was invalid");return{x:B,y:z}}),v=g4(L=>{const{a:I,d:U}=e;if(L.is0())throw new Error("bad point: ZERO");const{ex:O,ey:D,ez:P,et:B}=L,z=u(O*O),F=u(D*D),X=u(P*P),W=u(X*X),q=u(z*I),G=u(X*u(q+F)),ee=u(W+u(U*u(z*F)));if(G!==ee)throw new Error("bad point: equation left != right (1)");const ae=u(O*D),te=u(P*B);if(ae!==te)throw new Error("bad point: equation left != right (2)");return!0});class _{constructor(I,U,O,D){this.ex=I,this.ey=U,this.ez=O,this.et=D,p("x",I),p("y",U),p("z",O),p("t",D),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(I){if(I instanceof _)throw new Error("extended point not allowed");const{x:U,y:O}=I||{};return p("x",U),p("y",O),new _(U,O,nc,u(U*O))}static normalizeZ(I){const U=r.invertBatch(I.map(O=>O.ez));return I.map((O,D)=>O.toAffine(U[D])).map(_.fromAffine)}static msm(I,U){return Bpe(_,f,I,U)}_setWindowSize(I){C.setWindowSize(this,I)}assertValidity(){v(this)}equals(I){m(I);const{ex:U,ey:O,ez:D}=this,{ex:P,ey:B,ez:z}=I,F=u(U*z),X=u(P*D),W=u(O*z),q=u(B*D);return F===X&&W===q}is0(){return this.equals(_.ZERO)}negate(){return new _(u(-this.ex),this.ey,this.ez,u(-this.et))}double(){const{a:I}=e,{ex:U,ey:O,ez:D}=this,P=u(U*U),B=u(O*O),z=u(m5*u(D*D)),F=u(I*P),X=U+O,W=u(u(X*X)-P-B),q=F+B,G=q-z,ee=F-B,ae=u(W*G),te=u(q*ee),K=u(W*ee),re=u(G*q);return new _(ae,te,re,K)}add(I){m(I);const{a:U,d:O}=e,{ex:D,ey:P,ez:B,et:z}=this,{ex:F,ey:X,ez:W,et:q}=I;if(U===BigInt(-1)){const ve=u((P-D)*(X+F)),Ee=u((P+D)*(X-F)),ge=u(Ee-ve);if(ge===ou)return this.double();const Pe=u(B*m5*q),Ce=u(z*m5*W),Ie=Ce+Pe,$e=Ee+ve,se=Ce-Pe,Z=u(Ie*ge),J=u($e*se),de=u(Ie*se),Ae=u(ge*$e);return new _(Z,J,Ae,de)}const G=u(D*F),ee=u(P*X),ae=u(z*O*q),te=u(B*W),K=u((D+P)*(F+X)-G-ee),re=te-ae,V=te+ae,oe=u(ee-U*G),he=u(K*re),ne=u(V*oe),ie=u(K*oe),ce=u(re*V);return new _(he,ne,ce,ie)}subtract(I){return this.add(I.negate())}wNAF(I){return C.wNAFCached(this,I,_.normalizeZ)}multiply(I){const U=I;gc("scalar",U,nc,n);const{p:O,f:D}=this.wNAF(U);return _.normalizeZ([O,D])[0]}multiplyUnsafe(I){const U=I;return gc("scalar",U,ou,n),U===ou?A:this.equals(A)||U===nc?this:this.equals(x)?this.wNAF(U).p:C.unsafeLadder(this,U)}isSmallOrder(){return this.multiplyUnsafe(c).is0()}isTorsionFree(){return C.unsafeLadder(this,n).is0()}toAffine(I){return y(this,I)}clearCofactor(){const{h:I}=e;return I===nc?this:this.multiplyUnsafe(I)}static fromHex(I,U=!1){const{d:O,a:D}=e,P=r.BYTES;I=_s("pointHex",I,P),Fd("zip215",U);const B=I.slice(),z=I[P-1];B[P-1]=z&-129;const F=I1(B),X=U?l:r.ORDER;gc("pointHex.y",F,ou,X);const W=u(F*F),q=u(W-nc),G=u(O*W-D);let{isValid:ee,value:ae}=h(q,G);if(!ee)throw new Error("Point.fromHex: invalid y coordinate");const te=(ae&nc)===nc,K=(z&128)!==0;if(!U&&ae===ou&&K)throw new Error("Point.fromHex: x=0 and x_0=1");return K!==te&&(ae=u(-ae)),_.fromAffine({x:ae,y:F})}static fromPrivateKey(I){return N(I).point}toRawBytes(){const{x:I,y:U}=this.toAffine(),O=cv(U,r.BYTES);return O[O.length-1]|=I&nc?128:0,O}toHex(){return im(this.toRawBytes())}}_.BASE=new _(e.Gx,e.Gy,nc,u(e.Gx*e.Gy)),_.ZERO=new _(ou,nc,nc,ou);const{BASE:x,ZERO:A}=_,C=Ppe(_,o*8);function R(L){return Ci(L,n)}function M(L){return R(I1(L))}function N(L){const I=o;L=_s("private key",L,I);const U=_s("hashed private key",s(L),2*I),O=d(U.slice(0,I)),D=U.slice(I,2*I),P=M(O),B=x.multiply(P),z=B.toRawBytes();return{head:O,prefix:D,scalar:P,point:B,pointBytes:z}}function Y(L){return N(L).pointBytes}function H(L=new Uint8Array,...I){const U=sm(...I);return M(s(g(U,_s("context",L),!!i)))}function E(L,I,U={}){L=_s("message",L),i&&(L=i(L));const{prefix:O,scalar:D,pointBytes:P}=N(I),B=H(U.context,O,L),z=x.multiply(B).toRawBytes(),F=H(U.context,z,P,L),X=R(B+F*D);gc("signature.s",X,ou,n);const W=sm(z,cv(X,r.BYTES));return _s("result",W,o*2)}const k=Nht;function w(L,I,U,O=k){const{context:D,zip215:P}=O,B=r.BYTES;L=_s("signature",L,2*B),I=_s("message",I),P!==void 0&&Fd("zip215",P),i&&(I=i(I));const z=I1(L.slice(B,2*B));let F,X,W;try{F=_.fromHex(U,P),X=_.fromHex(L.slice(0,B),P),W=x.multiplyUnsafe(z)}catch{return!1}if(!P&&F.isSmallOrder())return!1;const q=H(D,X.toRawBytes(),F.toRawBytes(),I);return X.add(F.multiplyUnsafe(q)).subtract(W).clearCofactor().equals(_.ZERO)}return x._setWindowSize(8),{CURVE:e,getPublicKey:Y,sign:E,verify:w,ExtendedPoint:_,utils:{getExtendedPublicKey:N,randomPrivateKey:()=>a(r.BYTES),precompute(L=8,I=_.BASE){return I._setWindowSize(L),I.multiply(BigInt(3)),I}}}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const F2=BigInt(0),ZP=BigInt(1);function Fht(t){return Wm(t,{a:"bigint"},{montgomeryBits:"isSafeInteger",nByteLength:"isSafeInteger",adjustScalarBytes:"function",domain:"function",powPminus2:"function",Gu:"bigint"}),Object.freeze({...t})}function $ht(t){const e=Fht(t),{P:r}=e,n=v=>Ci(v,r),i=e.montgomeryBits,s=Math.ceil(i/8),a=e.nByteLength,o=e.adjustScalarBytes||(v=>v),c=e.powPminus2||(v=>kpe(v,r-BigInt(2),r));function l(v,_,x){const A=n(v*(_-x));return _=n(_-A),x=n(x+A),[_,x]}const u=(e.a-BigInt(2))/BigInt(4);function f(v,_){gc("u",v,F2,r),gc("scalar",_,F2,r);const x=_,A=v;let C=ZP,R=F2,M=v,N=ZP,Y=F2,H;for(let k=BigInt(i-1);k>=F2;k--){const w=x>>k&ZP;Y^=w,H=l(Y,C,M),C=H[0],M=H[1],H=l(Y,R,N),R=H[0],N=H[1],Y=w;const T=C+R,L=n(T*T),I=C-R,U=n(I*I),O=L-U,D=M+N,P=M-N,B=n(P*T),z=n(D*I),F=B+z,X=B-z;M=n(F*F),N=n(A*n(X*X)),C=n(L*U),R=n(O*(L+n(u*O)))}H=l(Y,C,M),C=H[0],M=H[1],H=l(Y,R,N),R=H[0],N=H[1];const E=c(R);return n(C*E)}function h(v){return cv(n(v),s)}function d(v){const _=_s("u coordinate",v,s);return a===32&&(_[31]&=127),I1(_)}function g(v){const _=_s("scalar",v),x=_.length;if(x!==s&&x!==a)throw new Error(`Expected ${s} or ${a} bytes, got ${x}`);return I1(o(_))}function p(v,_){const x=d(_),A=g(v),C=f(x,A);if(C===F2)throw new Error("Invalid private or public key received");return h(C)}const m=h(e.Gu);function y(v){return p(v,m)}return{scalarMult:p,scalarMultBase:y,getSharedSecret:(v,_)=>p(v,_),getPublicKey:v=>y(v),utils:{randomPrivateKey:()=>e.randomBytes(e.nByteLength)},GuBytes:m}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const m4=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),Dte=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const Uht=BigInt(1),Ote=BigInt(2),Vht=BigInt(3),jht=BigInt(5),zht=BigInt(8);function Dpe(t){const e=BigInt(10),r=BigInt(20),n=BigInt(40),i=BigInt(80),s=m4,o=t*t%s*t%s,c=Qi(o,Ote,s)*o%s,l=Qi(c,Uht,s)*t%s,u=Qi(l,jht,s)*l%s,f=Qi(u,e,s)*u%s,h=Qi(f,r,s)*f%s,d=Qi(h,n,s)*h%s,g=Qi(d,i,s)*d%s,p=Qi(g,i,s)*d%s,m=Qi(p,e,s)*u%s;return{pow_p_5_8:Qi(m,Ote,s)*t%s,b2:o}}function Ope(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}function qht(t,e){const r=m4,n=Ci(e*e*e,r),i=Ci(n*n*e,r),s=Dpe(t*i).pow_p_5_8;let a=Ci(t*n*s,r);const o=Ci(e*a*a,r),c=a,l=Ci(a*Dte,r),u=o===t,f=o===Ci(-t,r),h=o===Ci(-t*Dte,r);return u&&(a=c),(f||h)&&(a=l),kht(a,r)&&(a=Ci(-a,r)),{isValid:u||f,value:a}}const Hht=AA(m4,void 0,!0),Wht={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:Hht,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:zht,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:xA,randomBytes:z6,adjustScalarBytes:Ope,uvRatio:qht},ch=Lht(Wht),y5=$ht({P:m4,a:BigInt(486662),montgomeryBits:255,nByteLength:32,Gu:BigInt(9),powPminus2:t=>{const e=m4,{pow_p_5_8:r,b2:n}=Dpe(t);return Ci(Qi(r,Vht,e)*n,e)},adjustScalarBytes:Ope,randomBytes:z6}),y4=32,a1=64,CE=32;function Kht(){const t=ch.utils.randomPrivateKey(),e=ch.getPublicKey(t);return{privateKey:Npe(t,e),publicKey:e}}function Ght(t){if(t.length!==CE)throw new TypeError('"seed" must be 32 bytes in length.');if(!(t instanceof Uint8Array))throw new TypeError('"seed" must be a node.js Buffer, or Uint8Array.');const e=t,r=ch.getPublicKey(e);return{privateKey:Npe(e,r),publicKey:r}}function Yht(t,e){const r=t.subarray(0,CE);return ch.sign(e instanceof Uint8Array?e:e.subarray(),r)}function Xht(t,e,r){return ch.verify(e,r instanceof Uint8Array?r:r.subarray(),t)}function Npe(t,e){const r=new Uint8Array(a1);for(let n=0;n<CE;n++)r[n]=t[n],r[CE+n]=e[n];return r}const JP={alg:"A128GCM",ext:!0,k:"scm9jmO_4BJAgdwWGVulLg",key_ops:["encrypt","decrypt"],kty:"oct"};function Zht(t){const e="AES-GCM";let r=16;const n=12,i="SHA-256",s=16,a=32767,o=oh.get();r*=8;async function c(f,h){const d=o.getRandomValues(new Uint8Array(s)),g=o.getRandomValues(new Uint8Array(n)),p={name:e,iv:g};typeof h=="string"&&(h=pt(h));let m;if(h.length===0){m=await o.subtle.importKey("jwk",JP,{name:"AES-GCM"},!0,["encrypt"]);try{const v={name:"PBKDF2",salt:d,iterations:a,hash:{name:i}},_=await o.subtle.importKey("raw",h,{name:"PBKDF2"},!1,["deriveKey"]);m=await o.subtle.deriveKey(v,_,{name:e,length:r},!0,["encrypt"])}catch{m=await o.subtle.importKey("jwk",JP,{name:"AES-GCM"},!0,["encrypt"])}}else{const v={name:"PBKDF2",salt:d,iterations:a,hash:{name:i}},_=await o.subtle.importKey("raw",h,{name:"PBKDF2"},!1,["deriveKey"]);m=await o.subtle.deriveKey(v,_,{name:e,length:r},!0,["encrypt"])}const y=await o.subtle.encrypt(p,m,f);return Yi([d,p.iv,new Uint8Array(y)])}async function l(f,h){const d=f.subarray(0,s),g=f.subarray(s,s+n),p=f.subarray(s+n),m={name:e,iv:g};typeof h=="string"&&(h=pt(h));let y;if(h.length===0)try{const _={name:"PBKDF2",salt:d,iterations:a,hash:{name:i}},x=await o.subtle.importKey("raw",h,{name:"PBKDF2"},!1,["deriveKey"]);y=await o.subtle.deriveKey(_,x,{name:e,length:r},!0,["decrypt"])}catch{y=await o.subtle.importKey("jwk",JP,{name:"AES-GCM"},!0,["decrypt"])}else{const _={name:"PBKDF2",salt:d,iterations:a,hash:{name:i}},x=await o.subtle.importKey("raw",h,{name:"PBKDF2"},!1,["deriveKey"]);y=await o.subtle.deriveKey(_,x,{name:e,length:r},!0,["decrypt"])}const v=await o.subtle.decrypt(m,y,p);return new Uint8Array(v)}return{encrypt:c,decrypt:l}}async function RU(t,e){const n=await Zht().encrypt(t,e);return Sc.encode(n)}const Jht=Math.pow(2,7),Qht=Math.pow(2,14),edt=Math.pow(2,21),PU=Math.pow(2,28),BU=Math.pow(2,35),DU=Math.pow(2,42),OU=Math.pow(2,49),jn=128,Qa=127;function Ei(t){if(t<Jht)return 1;if(t<Qht)return 2;if(t<edt)return 3;if(t<PU)return 4;if(t<BU)return 5;if(t<DU)return 6;if(t<OU)return 7;if(Number.MAX_SAFE_INTEGER!=null&&t>Number.MAX_SAFE_INTEGER)throw new RangeError("Could not encode varint");return 8}function NU(t,e,r=0){switch(Ei(t)){case 8:e[r++]=t&255|jn,t/=128;case 7:e[r++]=t&255|jn,t/=128;case 6:e[r++]=t&255|jn,t/=128;case 5:e[r++]=t&255|jn,t/=128;case 4:e[r++]=t&255|jn,t>>>=7;case 3:e[r++]=t&255|jn,t>>>=7;case 2:e[r++]=t&255|jn,t>>>=7;case 1:{e[r++]=t&255,t>>>=7;break}default:throw new Error("unreachable")}return e}function tdt(t,e,r=0){switch(Ei(t)){case 8:e.set(r++,t&255|jn),t/=128;case 7:e.set(r++,t&255|jn),t/=128;case 6:e.set(r++,t&255|jn),t/=128;case 5:e.set(r++,t&255|jn),t/=128;case 4:e.set(r++,t&255|jn),t>>>=7;case 3:e.set(r++,t&255|jn),t>>>=7;case 2:e.set(r++,t&255|jn),t>>>=7;case 1:{e.set(r++,t&255),t>>>=7;break}default:throw new Error("unreachable")}return e}function MU(t,e){let r=t[e],n=0;if(n+=r&Qa,r<jn||(r=t[e+1],n+=(r&Qa)<<7,r<jn)||(r=t[e+2],n+=(r&Qa)<<14,r<jn)||(r=t[e+3],n+=(r&Qa)<<21,r<jn)||(r=t[e+4],n+=(r&Qa)*PU,r<jn)||(r=t[e+5],n+=(r&Qa)*BU,r<jn)||(r=t[e+6],n+=(r&Qa)*DU,r<jn)||(r=t[e+7],n+=(r&Qa)*OU,r<jn))return n;throw new RangeError("Could not decode varint")}function rdt(t,e){let r=t.get(e),n=0;if(n+=r&Qa,r<jn||(r=t.get(e+1),n+=(r&Qa)<<7,r<jn)||(r=t.get(e+2),n+=(r&Qa)<<14,r<jn)||(r=t.get(e+3),n+=(r&Qa)<<21,r<jn)||(r=t.get(e+4),n+=(r&Qa)*PU,r<jn)||(r=t.get(e+5),n+=(r&Qa)*BU,r<jn)||(r=t.get(e+6),n+=(r&Qa)*DU,r<jn)||(r=t.get(e+7),n+=(r&Qa)*OU,r<jn))return n;throw new RangeError("Could not decode varint")}function Go(t,e,r=0){return e==null&&(e=go(Ei(t))),e instanceof Uint8Array?NU(t,e,r):tdt(t,e,r)}function u0(t,e=0){return t instanceof Uint8Array?MU(t,e):rdt(t,e)}const LU=new Float32Array([-0]),y1=new Uint8Array(LU.buffer);function ndt(t,e,r){LU[0]=t,e[r]=y1[0],e[r+1]=y1[1],e[r+2]=y1[2],e[r+3]=y1[3]}function idt(t,e){return y1[0]=t[e],y1[1]=t[e+1],y1[2]=t[e+2],y1[3]=t[e+3],LU[0]}const FU=new Float64Array([-0]),eo=new Uint8Array(FU.buffer);function sdt(t,e,r){FU[0]=t,e[r]=eo[0],e[r+1]=eo[1],e[r+2]=eo[2],e[r+3]=eo[3],e[r+4]=eo[4],e[r+5]=eo[5],e[r+6]=eo[6],e[r+7]=eo[7]}function adt(t,e){return eo[0]=t[e],eo[1]=t[e+1],eo[2]=t[e+2],eo[3]=t[e+3],eo[4]=t[e+4],eo[5]=t[e+5],eo[6]=t[e+6],eo[7]=t[e+7],FU[0]}const odt=BigInt(Number.MAX_SAFE_INTEGER),cdt=BigInt(Number.MIN_SAFE_INTEGER);let pd=class Xp{lo;hi;constructor(e,r){this.lo=e|0,this.hi=r|0}toNumber(e=!1){if(!e&&this.hi>>>31>0){const r=~this.lo+1>>>0;let n=~this.hi>>>0;return r===0&&(n=n+1>>>0),-(r+n*4294967296)}return this.lo+this.hi*4294967296}toBigInt(e=!1){if(e)return BigInt(this.lo>>>0)+(BigInt(this.hi>>>0)<<32n);if(this.hi>>>31){const r=~this.lo+1>>>0;let n=~this.hi>>>0;return r===0&&(n=n+1>>>0),-(BigInt(r)+(BigInt(n)<<32n))}return BigInt(this.lo>>>0)+(BigInt(this.hi>>>0)<<32n)}toString(e=!1){return this.toBigInt(e).toString()}zzEncode(){const e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this}zzDecode(){const e=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this}length(){const e=this.lo,r=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return n===0?r===0?e<16384?e<128?1:2:e<2097152?3:4:r<16384?r<128?5:6:r<2097152?7:8:n<128?9:10}static fromBigInt(e){if(e===0n)return Pg;if(e<odt&&e>cdt)return this.fromNumber(Number(e));const r=e<0n;r&&(e=-e);let n=e>>32n,i=e-(n<<32n);return r&&(n=~n|0n,i=~i|0n,++i>Nte&&(i=0n,++n>Nte&&(n=0n))),new Xp(Number(i),Number(n))}static fromNumber(e){if(e===0)return Pg;const r=e<0;r&&(e=-e);let n=e>>>0,i=(e-n)/4294967296>>>0;return r&&(i=~i>>>0,n=~n>>>0,++n>4294967295&&(n=0,++i>4294967295&&(i=0))),new Xp(n,i)}static from(e){return typeof e=="number"?Xp.fromNumber(e):typeof e=="bigint"?Xp.fromBigInt(e):typeof e=="string"?Xp.fromBigInt(BigInt(e)):e.low!=null||e.high!=null?new Xp(e.low>>>0,e.high>>>0):Pg}};const Pg=new pd(0,0);Pg.toBigInt=function(){return 0n};Pg.zzEncode=Pg.zzDecode=function(){return this};Pg.length=function(){return 1};const Nte=4294967296n;function ldt(t){let e=0,r=0;for(let n=0;n<t.length;++n)r=t.charCodeAt(n),r<128?e+=1:r<2048?e+=2:(r&64512)===55296&&(t.charCodeAt(n+1)&64512)===56320?(++n,e+=4):e+=3;return e}function udt(t,e,r){if(r-e<1)return"";let i;const s=[];let a=0,o;for(;e<r;)o=t[e++],o<128?s[a++]=o:o>191&&o<224?s[a++]=(o&31)<<6|t[e++]&63:o>239&&o<365?(o=((o&7)<<18|(t[e++]&63)<<12|(t[e++]&63)<<6|t[e++]&63)-65536,s[a++]=55296+(o>>10),s[a++]=56320+(o&1023)):s[a++]=(o&15)<<12|(t[e++]&63)<<6|t[e++]&63,a>8191&&((i??(i=[])).push(String.fromCharCode.apply(String,s)),a=0);return i!=null?(a>0&&i.push(String.fromCharCode.apply(String,s.slice(0,a))),i.join("")):String.fromCharCode.apply(String,s.slice(0,a))}function Mpe(t,e,r){const n=r;let i,s;for(let a=0;a<t.length;++a)i=t.charCodeAt(a),i<128?e[r++]=i:i<2048?(e[r++]=i>>6|192,e[r++]=i&63|128):(i&64512)===55296&&((s=t.charCodeAt(a+1))&64512)===56320?(i=65536+((i&1023)<<10)+(s&1023),++a,e[r++]=i>>18|240,e[r++]=i>>12&63|128,e[r++]=i>>6&63|128,e[r++]=i&63|128):(e[r++]=i>>12|224,e[r++]=i>>6&63|128,e[r++]=i&63|128);return r-n}function cu(t,e){return RangeError(`index out of range: ${t.pos} + ${e??1} > ${t.len}`)}function v5(t,e){return(t[e-4]|t[e-3]<<8|t[e-2]<<16|t[e-1]<<24)>>>0}let fdt=class{buf;pos;len;_slice=Uint8Array.prototype.subarray;constructor(e){this.buf=e,this.pos=0,this.len=e.length}uint32(){let e=4294967295;if(e=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(e=(e|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return e;if((this.pos+=5)>this.len)throw this.pos=this.len,cu(this,10);return e}int32(){return this.uint32()|0}sint32(){const e=this.uint32();return e>>>1^-(e&1)|0}bool(){return this.uint32()!==0}fixed32(){if(this.pos+4>this.len)throw cu(this,4);return v5(this.buf,this.pos+=4)}sfixed32(){if(this.pos+4>this.len)throw cu(this,4);return v5(this.buf,this.pos+=4)|0}float(){if(this.pos+4>this.len)throw cu(this,4);const e=idt(this.buf,this.pos);return this.pos+=4,e}double(){if(this.pos+8>this.len)throw cu(this,4);const e=adt(this.buf,this.pos);return this.pos+=8,e}bytes(){const e=this.uint32(),r=this.pos,n=this.pos+e;if(n>this.len)throw cu(this,e);return this.pos+=e,r===n?new Uint8Array(0):this.buf.subarray(r,n)}string(){const e=this.bytes();return udt(e,0,e.length)}skip(e){if(typeof e=="number"){if(this.pos+e>this.len)throw cu(this,e);this.pos+=e}else do if(this.pos>=this.len)throw cu(this);while(this.buf[this.pos++]&128);return this}skipType(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(e=this.uint32()&7)!==4;)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error(`invalid wire type ${e} at offset ${this.pos}`)}return this}readLongVarint(){const e=new pd(0,0);let r=0;if(this.len-this.pos>4){for(;r<4;++r)if(e.lo=(e.lo|(this.buf[this.pos]&127)<<r*7)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(this.buf[this.pos]&127)<<28)>>>0,e.hi=(e.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return e;r=0}else{for(;r<3;++r){if(this.pos>=this.len)throw cu(this);if(e.lo=(e.lo|(this.buf[this.pos]&127)<<r*7)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(this.buf[this.pos++]&127)<<r*7)>>>0,e}if(this.len-this.pos>4){for(;r<5;++r)if(e.hi=(e.hi|(this.buf[this.pos]&127)<<r*7+3)>>>0,this.buf[this.pos++]<128)return e}else for(;r<5;++r){if(this.pos>=this.len)throw cu(this);if(e.hi=(e.hi|(this.buf[this.pos]&127)<<r*7+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}readFixed64(){if(this.pos+8>this.len)throw cu(this,8);const e=v5(this.buf,this.pos+=4),r=v5(this.buf,this.pos+=4);return new pd(e,r)}int64(){return this.readLongVarint().toBigInt()}int64Number(){return this.readLongVarint().toNumber()}int64String(){return this.readLongVarint().toString()}uint64(){return this.readLongVarint().toBigInt(!0)}uint64Number(){const e=MU(this.buf,this.pos);return this.pos+=Ei(e),e}uint64String(){return this.readLongVarint().toString(!0)}sint64(){return this.readLongVarint().zzDecode().toBigInt()}sint64Number(){return this.readLongVarint().zzDecode().toNumber()}sint64String(){return this.readLongVarint().zzDecode().toString()}fixed64(){return this.readFixed64().toBigInt()}fixed64Number(){return this.readFixed64().toNumber()}fixed64String(){return this.readFixed64().toString()}sfixed64(){return this.readFixed64().toBigInt()}sfixed64Number(){return this.readFixed64().toNumber()}sfixed64String(){return this.readFixed64().toString()}};function hdt(t){return new fdt(t instanceof Uint8Array?t:t.subarray())}function Gr(t,e,r){const n=hdt(t);return e.decode(n,void 0,r)}function ddt(t){let n,i=8192;return function(a){if(a<1||a>4096)return go(a);i+a>8192&&(n=go(8192),i=0);const o=n.subarray(i,i+=a);return i&7&&(i=(i|7)+1),o}}let Ww=class{fn;len;next;val;constructor(e,r,n){this.fn=e,this.len=r,this.next=void 0,this.val=n}};function QP(){}let pdt=class{head;tail;len;next;constructor(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}};const gdt=ddt();function mdt(t){return globalThis.Buffer!=null?go(t):gdt(t)}let xN=class{len;head;tail;states;constructor(){this.len=0,this.head=new Ww(QP,0,0),this.tail=this.head,this.states=null}_push(e,r,n){return this.tail=this.tail.next=new Ww(e,r,n),this.len+=r,this}uint32(e){return this.len+=(this.tail=this.tail.next=new vdt((e=e>>>0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this}int32(e){return e<0?this._push(b5,10,pd.fromNumber(e)):this.uint32(e)}sint32(e){return this.uint32((e<<1^e>>31)>>>0)}uint64(e){const r=pd.fromBigInt(e);return this._push(b5,r.length(),r)}uint64Number(e){return this._push(NU,Ei(e),e)}uint64String(e){return this.uint64(BigInt(e))}int64(e){return this.uint64(e)}int64Number(e){return this.uint64Number(e)}int64String(e){return this.uint64String(e)}sint64(e){const r=pd.fromBigInt(e).zzEncode();return this._push(b5,r.length(),r)}sint64Number(e){const r=pd.fromNumber(e).zzEncode();return this._push(b5,r.length(),r)}sint64String(e){return this.sint64(BigInt(e))}bool(e){return this._push(eB,1,e?1:0)}fixed32(e){return this._push(kw,4,e>>>0)}sfixed32(e){return this.fixed32(e)}fixed64(e){const r=pd.fromBigInt(e);return this._push(kw,4,r.lo)._push(kw,4,r.hi)}fixed64Number(e){const r=pd.fromNumber(e);return this._push(kw,4,r.lo)._push(kw,4,r.hi)}fixed64String(e){return this.fixed64(BigInt(e))}sfixed64(e){return this.fixed64(e)}sfixed64Number(e){return this.fixed64Number(e)}sfixed64String(e){return this.fixed64String(e)}float(e){return this._push(ndt,4,e)}double(e){return this._push(sdt,8,e)}bytes(e){const r=e.length>>>0;return r===0?this._push(eB,1,0):this.uint32(r)._push(bdt,r,e)}string(e){const r=ldt(e);return r!==0?this.uint32(r)._push(Mpe,r,e):this._push(eB,1,0)}fork(){return this.states=new pdt(this),this.head=this.tail=new Ww(QP,0,0),this.len=0,this}reset(){return this.states!=null?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new Ww(QP,0,0),this.len=0),this}ldelim(){const e=this.head,r=this.tail,n=this.len;return this.reset().uint32(n),n!==0&&(this.tail.next=e.next,this.tail=r,this.len+=n),this}finish(){let e=this.head.next;const r=mdt(this.len);let n=0;for(;e!=null;)e.fn(e.val,r,n),n+=e.len,e=e.next;return r}};function eB(t,e,r){e[r]=t&255}function ydt(t,e,r){for(;t>127;)e[r++]=t&127|128,t>>>=7;e[r]=t}let vdt=class extends Ww{next;constructor(e,r){super(ydt,e,r),this.next=void 0}};function b5(t,e,r){for(;t.hi!==0;)e[r++]=t.lo&127|128,t.lo=(t.lo>>>7|t.hi<<25)>>>0,t.hi>>>=7;for(;t.lo>127;)e[r++]=t.lo&127|128,t.lo=t.lo>>>7;e[r++]=t.lo}function kw(t,e,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24}function bdt(t,e,r){e.set(t,r)}globalThis.Buffer!=null&&(xN.prototype.bytes=function(t){const e=t.length>>>0;return this.uint32(e),e>0&&this._push(wdt,e,t),this},xN.prototype.string=function(t){const e=globalThis.Buffer.byteLength(t);return this.uint32(e),e>0&&this._push(_dt,e,t),this});function wdt(t,e,r){e.set(t,r)}function _dt(t,e,r){t.length<40?Mpe(t,e,r):e.utf8Write!=null?e.utf8Write(t,r):e.set(pt(t),r)}function xdt(){return new xN}function Yr(t,e){const r=xdt();return e.encode(t,r,{lengthDelimited:!1}),r.finish()}var IE;(function(t){t[t.VARINT=0]="VARINT",t[t.BIT64=1]="BIT64",t[t.LENGTH_DELIMITED=2]="LENGTH_DELIMITED",t[t.START_GROUP=3]="START_GROUP",t[t.END_GROUP=4]="END_GROUP",t[t.BIT32=5]="BIT32"})(IE||(IE={}));function Lpe(t,e,r,n){return{name:t,type:e,encode:r,decode:n}}function Xo(t){function e(i){if(t[i.toString()]==null)throw new Error("Invalid enum value");return t[i]}const r=function(s,a){const o=e(s);a.int32(o)},n=function(s){const a=s.int32();return e(a)};return Lpe("enum",IE.VARINT,r,n)}function Xr(t,e){return Lpe("message",IE.LENGTH_DELIMITED,t,e)}let am=class extends Error{code;constructor(e,r){super(e),this.code=r}};var Fa;(function(t){t.RSA="RSA",t.Ed25519="Ed25519",t.Secp256k1="Secp256k1"})(Fa||(Fa={}));var EN;(function(t){t[t.RSA=0]="RSA",t[t.Ed25519=1]="Ed25519",t[t.Secp256k1=2]="Secp256k1"})(EN||(EN={}));(function(t){t.codec=()=>Xo(EN)})(Fa||(Fa={}));var v4;(function(t){let e;t.codec=()=>(e==null&&(e=Xr((r,n,i={})=>{i.lengthDelimited!==!1&&n.fork(),r.Type!=null&&(n.uint32(8),Fa.codec().encode(r.Type,n)),r.Data!=null&&(n.uint32(18),n.bytes(r.Data)),i.lengthDelimited!==!1&&n.ldelim()},(r,n)=>{const i={},s=n==null?r.len:r.pos+n;for(;r.pos<s;){const a=r.uint32();switch(a>>>3){case 1:i.Type=Fa.codec().decode(r);break;case 2:i.Data=r.bytes();break;default:r.skipType(a&7);break}}return i})),e),t.encode=r=>Yr(r,t.codec()),t.decode=r=>Gr(r,t.codec())})(v4||(v4={}));var lv;(function(t){let e;t.codec=()=>(e==null&&(e=Xr((r,n,i={})=>{i.lengthDelimited!==!1&&n.fork(),r.Type!=null&&(n.uint32(8),Fa.codec().encode(r.Type,n)),r.Data!=null&&(n.uint32(18),n.bytes(r.Data)),i.lengthDelimited!==!1&&n.ldelim()},(r,n)=>{const i={},s=n==null?r.len:r.pos+n;for(;r.pos<s;){const a=r.uint32();switch(a>>>3){case 1:i.Type=Fa.codec().decode(r);break;case 2:i.Data=r.bytes();break;default:r.skipType(a&7);break}}return i})),e),t.encode=r=>Yr(r,t.codec()),t.decode=r=>Gr(r,t.codec())})(lv||(lv={}));let $U=class{_key;constructor(e){this._key=uv(e,y4)}verify(e,r){return Xht(this._key,r,e)}marshal(){return this._key}get bytes(){return v4.encode({Type:Fa.Ed25519,Data:this.marshal()}).subarray()}equals(e){return Kr(this.bytes,e.bytes)}hash(){const e=wn.digest(this.bytes);return lp(e)?e.then(({bytes:r})=>r):e.bytes}},b4=class{_key;_publicKey;constructor(e,r){this._key=uv(e,a1),this._publicKey=uv(r,y4)}sign(e){return Yht(this._key,e)}get public(){return new $U(this._publicKey)}marshal(){return this._key}get bytes(){return lv.encode({Type:Fa.Ed25519,Data:this.marshal()}).subarray()}equals(e){return Kr(this.bytes,e.bytes)}async hash(){const e=wn.digest(this.bytes);let r;return lp(e)?{bytes:r}=await e:r=e.bytes,r}async id(){const e=ah.digest(this.public.bytes);return Rs.encode(e.bytes).substring(1)}async export(e,r="libp2p-key"){if(r==="libp2p-key")return RU(this.bytes,e);throw new ye(`export format '${r}' is not supported`,"ERR_INVALID_EXPORT_FORMAT")}};function Edt(t){if(t.length>a1){t=uv(t,a1+y4);const n=t.subarray(0,a1),i=t.subarray(a1,t.length);return new b4(n,i)}t=uv(t,a1);const e=t.subarray(0,a1),r=t.subarray(y4);return new b4(e,r)}function Sdt(t){return t=uv(t,y4),new $U(t)}async function Adt(){const{privateKey:t,publicKey:e}=Kht();return new b4(t,e)}async function Tdt(t){const{privateKey:e,publicKey:r}=Ght(t);return new b4(e,r)}function uv(t,e){if(t=Uint8Array.from(t??[]),t.length!==e)throw new ye(`Key must be a Uint8Array of length ${e}, got ${t.length}`,"ERR_INVALID_KEY_TYPE");return t}const kdt=Object.freeze(Object.defineProperty({__proto__:null,Ed25519PrivateKey:b4,Ed25519PublicKey:$U,generateKeyPair:Adt,generateKeyPairFromSeed:Tdt,unmarshalEd25519PrivateKey:Edt,unmarshalEd25519PublicKey:Sdt},Symbol.toStringTag,{value:"Module"})),Cdt={"P-256":256,"P-384":384,"P-521":521},Idt=Object.keys(Cdt);Idt.join(" / ");var Ui=as,H6=Ui.sha512=Ui.sha512||{};Ui.md.sha512=Ui.md.algorithms.sha512=H6;var Fpe=Ui.sha384=Ui.sha512.sha384=Ui.sha512.sha384||{};Fpe.create=function(){return H6.create("SHA-384")};Ui.md.sha384=Ui.md.algorithms.sha384=Fpe;Ui.sha512.sha256=Ui.sha512.sha256||{create:function(){return H6.create("SHA-512/256")}};Ui.md["sha512/256"]=Ui.md.algorithms["sha512/256"]=Ui.sha512.sha256;Ui.sha512.sha224=Ui.sha512.sha224||{create:function(){return H6.create("SHA-512/224")}};Ui.md["sha512/224"]=Ui.md.algorithms["sha512/224"]=Ui.sha512.sha224;H6.create=function(t){if($pe||Rdt(),typeof t>"u"&&(t="SHA-512"),!(t in tg))throw new Error("Invalid SHA-512 algorithm: "+t);for(var e=tg[t],r=null,n=Ui.util.createBuffer(),i=new Array(80),s=0;s<80;++s)i[s]=new Array(2);var a=64;switch(t){case"SHA-384":a=48;break;case"SHA-512/256":a=32;break;case"SHA-512/224":a=28;break}var o={algorithm:t.replace("-","").toLowerCase(),blockLength:128,digestLength:a,messageLength:0,fullMessageLength:null,messageLengthSize:16};return o.start=function(){o.messageLength=0,o.fullMessageLength=o.messageLength128=[];for(var c=o.messageLengthSize/4,l=0;l<c;++l)o.fullMessageLength.push(0);n=Ui.util.createBuffer(),r=new Array(e.length);for(var l=0;l<e.length;++l)r[l]=e[l].slice(0);return o},o.start(),o.update=function(c,l){l==="utf8"&&(c=Ui.util.encodeUtf8(c));var u=c.length;o.messageLength+=u,u=[u/4294967296>>>0,u>>>0];for(var f=o.fullMessageLength.length-1;f>=0;--f)o.fullMessageLength[f]+=u[1],u[1]=u[0]+(o.fullMessageLength[f]/4294967296>>>0),o.fullMessageLength[f]=o.fullMessageLength[f]>>>0,u[0]=u[1]/4294967296>>>0;return n.putBytes(c),Mte(r,i,n),(n.read>2048||n.length()===0)&&n.compact(),o},o.digest=function(){var c=Ui.util.createBuffer();c.putBytes(n.bytes());var l=o.fullMessageLength[o.fullMessageLength.length-1]+o.messageLengthSize,u=l&o.blockLength-1;c.putBytes(SN.substr(0,o.blockLength-u));for(var f,h,d=o.fullMessageLength[0]*8,g=0;g<o.fullMessageLength.length-1;++g)f=o.fullMessageLength[g+1]*8,h=f/4294967296>>>0,d+=h,c.putInt32(d>>>0),d=f>>>0;c.putInt32(d);for(var p=new Array(r.length),g=0;g<r.length;++g)p[g]=r[g].slice(0);Mte(p,i,c);var m=Ui.util.createBuffer(),y;t==="SHA-512"?y=p.length:t==="SHA-384"?y=p.length-2:y=p.length-4;for(var g=0;g<y;++g)m.putInt32(p[g][0]),(g!==y-1||t!=="SHA-512/224")&&m.putInt32(p[g][1]);return m},o};var SN=null,$pe=!1,AN=null,tg=null;function Rdt(){SN="",SN+=Ui.util.fillString("\0",128),AN=[[1116352408,3609767458],[1899447441,602891725],[3049323471,3964484399],[3921009573,2173295548],[961987163,4081628472],[1508970993,3053834265],[2453635748,2937671579],[2870763221,3664609560],[3624381080,2734883394],[310598401,1164996542],[607225278,1323610764],[1426881987,3590304994],[1925078388,4068182383],[2162078206,991336113],[2614888103,633803317],[3248222580,3479774868],[3835390401,2666613458],[4022224774,944711139],[264347078,2341262773],[604807628,2007800933],[770255983,1495990901],[1249150122,1856431235],[1555081692,3175218132],[1996064986,2198950837],[2554220882,3999719339],[2821834349,766784016],[2952996808,2566594879],[3210313671,3203337956],[3336571891,1034457026],[3584528711,2466948901],[113926993,3758326383],[338241895,168717936],[666307205,1188179964],[773529912,1546045734],[1294757372,1522805485],[1396182291,2643833823],[1695183700,2343527390],[1986661051,1014477480],[2177026350,1206759142],[2456956037,344077627],[2730485921,1290863460],[2820302411,3158454273],[3259730800,3505952657],[3345764771,106217008],[3516065817,3606008344],[3600352804,1432725776],[4094571909,1467031594],[275423344,851169720],[430227734,3100823752],[506948616,1363258195],[659060556,3750685593],[883997877,3785050280],[958139571,3318307427],[1322822218,3812723403],[1537002063,2003034995],[1747873779,3602036899],[1955562222,1575990012],[2024104815,1125592928],[2227730452,2716904306],[2361852424,442776044],[2428436474,593698344],[2756734187,3733110249],[3204031479,2999351573],[3329325298,3815920427],[3391569614,3928383900],[3515267271,566280711],[3940187606,3454069534],[4118630271,4000239992],[116418474,1914138554],[174292421,2731055270],[289380356,3203993006],[460393269,320620315],[685471733,587496836],[852142971,1086792851],[1017036298,365543100],[1126000580,2618297676],[1288033470,3409855158],[1501505948,4234509866],[1607167915,987167468],[1816402316,1246189591]],tg={},tg["SHA-512"]=[[1779033703,4089235720],[3144134277,2227873595],[1013904242,4271175723],[2773480762,1595750129],[1359893119,2917565137],[2600822924,725511199],[528734635,4215389547],[1541459225,327033209]],tg["SHA-384"]=[[3418070365,3238371032],[1654270250,914150663],[2438529370,812702999],[355462360,4144912697],[1731405415,4290775857],[2394180231,1750603025],[3675008525,1694076839],[1203062813,3204075428]],tg["SHA-512/256"]=[[573645204,4230739756],[2673172387,3360449730],[596883563,1867755857],[2520282905,1497426621],[2519219938,2827943907],[3193839141,1401305490],[721525244,746961066],[246885852,2177182882]],tg["SHA-512/224"]=[[2352822216,424955298],[1944164710,2312950998],[502970286,855612546],[1738396948,1479516111],[258812777,2077511080],[2011393907,79989058],[1067287976,1780299464],[286451373,2446758561]],$pe=!0}function Mte(t,e,r){for(var n,i,s,a,o,c,l,u,f,h,d,g,p,m,y,v,_,x,A,C,R,M,N,Y,H,E,k,w,T,L,I,U,O,D,P,B=r.length();B>=128;){for(T=0;T<16;++T)e[T][0]=r.getInt32()>>>0,e[T][1]=r.getInt32()>>>0;for(;T<80;++T)U=e[T-2],L=U[0],I=U[1],n=((L>>>19|I<<13)^(I>>>29|L<<3)^L>>>6)>>>0,i=((L<<13|I>>>19)^(I<<3|L>>>29)^(L<<26|I>>>6))>>>0,D=e[T-15],L=D[0],I=D[1],s=((L>>>1|I<<31)^(L>>>8|I<<24)^L>>>7)>>>0,a=((L<<31|I>>>1)^(L<<24|I>>>8)^(L<<25|I>>>7))>>>0,O=e[T-7],P=e[T-16],I=i+O[1]+a+P[1],e[T][0]=n+O[0]+s+P[0]+(I/4294967296>>>0)>>>0,e[T][1]=I>>>0;for(p=t[0][0],m=t[0][1],y=t[1][0],v=t[1][1],_=t[2][0],x=t[2][1],A=t[3][0],C=t[3][1],R=t[4][0],M=t[4][1],N=t[5][0],Y=t[5][1],H=t[6][0],E=t[6][1],k=t[7][0],w=t[7][1],T=0;T<80;++T)l=((R>>>14|M<<18)^(R>>>18|M<<14)^(M>>>9|R<<23))>>>0,u=((R<<18|M>>>14)^(R<<14|M>>>18)^(M<<23|R>>>9))>>>0,f=(H^R&(N^H))>>>0,h=(E^M&(Y^E))>>>0,o=((p>>>28|m<<4)^(m>>>2|p<<30)^(m>>>7|p<<25))>>>0,c=((p<<4|m>>>28)^(m<<30|p>>>2)^(m<<25|p>>>7))>>>0,d=(p&y|_&(p^y))>>>0,g=(m&v|x&(m^v))>>>0,I=w+u+h+AN[T][1]+e[T][1],n=k+l+f+AN[T][0]+e[T][0]+(I/4294967296>>>0)>>>0,i=I>>>0,I=c+g,s=o+d+(I/4294967296>>>0)>>>0,a=I>>>0,k=H,w=E,H=N,E=Y,N=R,Y=M,I=C+i,R=A+n+(I/4294967296>>>0)>>>0,M=I>>>0,A=_,C=x,_=y,x=v,y=p,v=m,I=i+a,p=n+s+(I/4294967296>>>0)>>>0,m=I>>>0;I=t[0][1]+m,t[0][0]=t[0][0]+p+(I/4294967296>>>0)>>>0,t[0][1]=I>>>0,I=t[1][1]+v,t[1][0]=t[1][0]+y+(I/4294967296>>>0)>>>0,t[1][1]=I>>>0,I=t[2][1]+x,t[2][0]=t[2][0]+_+(I/4294967296>>>0)>>>0,t[2][1]=I>>>0,I=t[3][1]+C,t[3][0]=t[3][0]+A+(I/4294967296>>>0)>>>0,t[3][1]=I>>>0,I=t[4][1]+M,t[4][0]=t[4][0]+R+(I/4294967296>>>0)>>>0,t[4][1]=I>>>0,I=t[5][1]+Y,t[5][0]=t[5][0]+N+(I/4294967296>>>0)>>>0,t[5][1]=I>>>0,I=t[6][1]+E,t[6][0]=t[6][0]+H+(I/4294967296>>>0)>>>0,t[6][1]=I>>>0,I=t[7][1]+w,t[7][0]=t[7][0]+k+(I/4294967296>>>0)>>>0,t[7][1]=I>>>0,B-=128}}function Pdt(t){if(isNaN(t)||t<=0)throw new ye("random bytes length must be a Number bigger than 0","ERR_INVALID_LENGTH");return z6(t)}function Upe(t,e){return e.map(r=>wu(t[r]))}function Bdt(t){return Ko.pki.setRsaPrivateKey(...Upe(t,["n","e","d","p","q","dp","dq","qi"]))}function Ddt(t){return Ko.pki.setRsaPublicKey(...Upe(t,["n","e"]))}function Odt(t){const e=Ko.asn1.fromDer(vt(t,"ascii")),r=Ko.pki.privateKeyFromAsn1(e);return{kty:"RSA",n:Tf(r.n),e:Tf(r.e),d:Tf(r.d),p:Tf(r.p),q:Tf(r.q),dp:Tf(r.dP),dq:Tf(r.dQ),qi:Tf(r.qInv),alg:"RS256"}}function Ndt(t){if(t.n==null||t.e==null||t.d==null||t.p==null||t.q==null||t.dp==null||t.dq==null||t.qi==null)throw new ye("JWK was missing components","ERR_INVALID_PARAMETERS");const e=Ko.pki.privateKeyToAsn1({n:wu(t.n),e:wu(t.e),d:wu(t.d),p:wu(t.p),q:wu(t.q),dP:wu(t.dp),dQ:wu(t.dq),qInv:wu(t.qi)});return pt(Ko.asn1.toDer(e).getBytes(),"ascii")}function Mdt(t){const e=Ko.asn1.fromDer(vt(t,"ascii")),r=Ko.pki.publicKeyFromAsn1(e);return{kty:"RSA",n:Tf(r.n),e:Tf(r.e)}}function Ldt(t){if(t.n==null||t.e==null)throw new ye("JWK was missing components","ERR_INVALID_PARAMETERS");const e=Ko.pki.publicKeyToAsn1({n:wu(t.n),e:wu(t.e)});return pt(Ko.asn1.toDer(e).getBytes(),"ascii")}async function Fdt(t){const e=await oh.get().subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},!0,["sign","verify"]),r=await jpe(e);return{privateKey:r[0],publicKey:r[1]}}async function Vpe(t){const r=[await oh.get().subtle.importKey("jwk",t,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!0,["sign"]),await Vdt(t)],n=await jpe({privateKey:r[0],publicKey:r[1]});return{privateKey:n[0],publicKey:n[1]}}async function $dt(t,e){const r=await oh.get().subtle.importKey("jwk",t,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["sign"]),n=await oh.get().subtle.sign({name:"RSASSA-PKCS1-v1_5"},r,e instanceof Uint8Array?e:e.subarray());return new Uint8Array(n,0,n.byteLength)}async function Udt(t,e,r){const n=await oh.get().subtle.importKey("jwk",t,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["verify"]);return oh.get().subtle.verify({name:"RSASSA-PKCS1-v1_5"},n,e,r instanceof Uint8Array?r:r.subarray())}async function jpe(t){if(t.privateKey==null||t.publicKey==null)throw new ye("Private and public key are required","ERR_INVALID_PARAMETERS");return Promise.all([oh.get().subtle.exportKey("jwk",t.privateKey),oh.get().subtle.exportKey("jwk",t.publicKey)])}async function Vdt(t){return oh.get().subtle.importKey("jwk",{kty:t.kty,n:t.n,e:t.e},{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!0,["verify"])}function zpe(t,e,r,n){const i=e?Ddt(t):Bdt(t),s=vt(r instanceof Uint8Array?r:r.subarray(),"ascii"),a=n(s,i);return pt(a,"ascii")}function jdt(t,e){return zpe(t,!0,e,(r,n)=>n.encrypt(r))}function zdt(t,e){return zpe(t,!1,e,(r,n)=>n.decrypt(r))}function UU(t){if(t.kty!=="RSA")throw new ye("invalid key type","ERR_INVALID_KEY_TYPE");if(t.n==null)throw new ye("invalid key modulus","ERR_INVALID_KEY_MODULUS");return pt(t.n,"base64url").length*8}const W6=8192;let VU=class{_key;constructor(e){this._key=e}verify(e,r){return Udt(this._key,r,e)}marshal(){return Ldt(this._key)}get bytes(){return v4.encode({Type:Fa.RSA,Data:this.marshal()}).subarray()}encrypt(e){return jdt(this._key,e)}equals(e){return Kr(this.bytes,e.bytes)}hash(){const e=wn.digest(this.bytes);return lp(e)?e.then(({bytes:r})=>r):e.bytes}},TA=class{_key;_publicKey;constructor(e,r){this._key=e,this._publicKey=r}genSecret(){return Pdt(16)}sign(e){return $dt(this._key,e)}get public(){if(this._publicKey==null)throw new ye("public key not provided","ERR_PUBKEY_NOT_PROVIDED");return new VU(this._publicKey)}decrypt(e){return zdt(this._key,e)}marshal(){return Ndt(this._key)}get bytes(){return lv.encode({Type:Fa.RSA,Data:this.marshal()}).subarray()}equals(e){return Kr(this.bytes,e.bytes)}hash(){const e=wn.digest(this.bytes);return lp(e)?e.then(({bytes:r})=>r):e.bytes}async id(){const e=await this.public.hash();return vt(e,"base58btc")}async export(e,r="pkcs-8"){if(r==="pkcs-8"){const n=new Ko.util.ByteBuffer(this.marshal()),i=Ko.asn1.fromDer(n),s=Ko.pki.privateKeyFromAsn1(i),a={algorithm:"aes256",count:1e4,saltSize:128/8,prfAlgorithm:"sha512"};return Ko.pki.encryptRsaPrivateKey(s,e,a)}else{if(r==="libp2p-key")return RU(this.bytes,e);throw new ye(`export format '${r}' is not supported`,"ERR_INVALID_EXPORT_FORMAT")}}};async function qdt(t){const e=Odt(t);if(UU(e)>W6)throw new ye("key size is too large","ERR_KEY_SIZE_TOO_LARGE");const r=await Vpe(e);return new TA(r.privateKey,r.publicKey)}function Hdt(t){const e=Mdt(t);if(UU(e)>W6)throw new ye("key size is too large","ERR_KEY_SIZE_TOO_LARGE");return new VU(e)}async function Wdt(t){if(UU(t)>W6)throw new ye("key size is too large","ERR_KEY_SIZE_TOO_LARGE");const e=await Vpe(t);return new TA(e.privateKey,e.publicKey)}async function Kdt(t){if(t>W6)throw new ye("key size is too large","ERR_KEY_SIZE_TOO_LARGE");const e=await Fdt(t);return new TA(e.privateKey,e.publicKey)}const Gdt=Object.freeze(Object.defineProperty({__proto__:null,MAX_KEY_SIZE:W6,RsaPrivateKey:TA,RsaPublicKey:VU,fromJwk:Wdt,generateKeyPair:Kdt,unmarshalRsaPrivateKey:qdt,unmarshalRsaPublicKey:Hdt},Symbol.toStringTag,{value:"Module"})),Ydt=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),V0=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),j0=new Uint32Array(64);class Xdt extends AU{constructor(){super(64,32,8,!1),this.A=V0[0]|0,this.B=V0[1]|0,this.C=V0[2]|0,this.D=V0[3]|0,this.E=V0[4]|0,this.F=V0[5]|0,this.G=V0[6]|0,this.H=V0[7]|0}get(){const{A:e,B:r,C:n,D:i,E:s,F:a,G:o,H:c}=this;return[e,r,n,i,s,a,o,c]}set(e,r,n,i,s,a,o,c){this.A=e|0,this.B=r|0,this.C=n|0,this.D=i|0,this.E=s|0,this.F=a|0,this.G=o|0,this.H=c|0}process(e,r){for(let f=0;f<16;f++,r+=4)j0[f]=e.getUint32(r,!1);for(let f=16;f<64;f++){const h=j0[f-15],d=j0[f-2],g=yf(h,7)^yf(h,18)^h>>>3,p=yf(d,17)^yf(d,19)^d>>>10;j0[f]=p+j0[f-7]+g+j0[f-16]|0}let{A:n,B:i,C:s,D:a,E:o,F:c,G:l,H:u}=this;for(let f=0;f<64;f++){const h=yf(o,6)^yf(o,11)^yf(o,25),d=u+h+xpe(o,c,l)+Ydt[f]+j0[f]|0,p=(yf(n,2)^yf(n,13)^yf(n,22))+Epe(n,i,s)|0;u=l,l=c,c=o,o=a+d|0,a=s,s=i,i=n,n=d+p|0}n=n+this.A|0,i=i+this.B|0,s=s+this.C|0,a=a+this.D|0,o=o+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(n,i,s,a,o,c,l,u)}roundClean(){j0.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const w3=SU(()=>new Xdt);class qpe extends _pe{constructor(e,r){super(),this.finished=!1,this.destroyed=!1,_A(e);const n=rm(r);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(n.length>i?e.create().update(n).digest():n);for(let a=0;a<s.length;a++)s[a]^=54;this.iHash.update(s),this.oHash=e.create();for(let a=0;a<s.length;a++)s[a]^=106;this.oHash.update(s),s.fill(0)}update(e){return kE(this),this.iHash.update(e),this}digestInto(e){kE(this),wA(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:r,iHash:n,finished:i,destroyed:s,blockLen:a,outputLen:o}=this;return e=e,e.finished=i,e.destroyed=s,e.blockLen=a,e.outputLen=o,e.oHash=r._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const K6=(t,e,r)=>new qpe(t,e).update(r).digest();K6.create=(t,e)=>new qpe(t,e);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Lte(t){t.lowS!==void 0&&Fd("lowS",t.lowS),t.prehash!==void 0&&Fd("prehash",t.prehash)}function Zdt(t){const e=IU(t);Wm(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:r,Fp:n,a:i}=e;if(r){if(!n.eql(i,n.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof r!="object"||typeof r.beta!="bigint"||typeof r.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:Jdt,hexToBytes:Qdt}=Eht,gd={Err:class extends Error{constructor(e=""){super(e)}},_tlv:{encode:(t,e)=>{const{Err:r}=gd;if(t<0||t>256)throw new r("tlv.encode: wrong tag");if(e.length&1)throw new r("tlv.encode: unpadded data");const n=e.length/2,i=ay(n);if(i.length/2&128)throw new r("tlv.encode: long form length too big");const s=n>127?ay(i.length/2|128):"";return`${ay(t)}${s}${i}${e}`},decode(t,e){const{Err:r}=gd;let n=0;if(t<0||t>256)throw new r("tlv.encode: wrong tag");if(e.length<2||e[n++]!==t)throw new r("tlv.decode: wrong tlv");const i=e[n++],s=!!(i&128);let a=0;if(!s)a=i;else{const c=i&127;if(!c)throw new r("tlv.decode(long): indefinite length not supported");if(c>4)throw new r("tlv.decode(long): byte length is too big");const l=e.subarray(n,n+c);if(l.length!==c)throw new r("tlv.decode: length bytes not complete");if(l[0]===0)throw new r("tlv.decode(long): zero leftmost byte");for(const u of l)a=a<<8|u;if(n+=c,a<128)throw new r("tlv.decode(long): not minimal encoding")}const o=e.subarray(n,n+a);if(o.length!==a)throw new r("tlv.decode: wrong value length");return{v:o,l:e.subarray(n+a)}}},_int:{encode(t){const{Err:e}=gd;if(t<bd)throw new e("integer: negative integers are not allowed");let r=ay(t);if(Number.parseInt(r[0],16)&8&&(r="00"+r),r.length&1)throw new e("unexpected assertion");return r},decode(t){const{Err:e}=gd;if(t[0]&128)throw new e("Invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("Invalid signature integer: unnecessary leading zero");return Jdt(t)}},toSig(t){const{Err:e,_int:r,_tlv:n}=gd,i=typeof t=="string"?Qdt(t):t;q6(i);const{v:s,l:a}=n.decode(48,i);if(a.length)throw new e("Invalid signature: left bytes after parsing");const{v:o,l:c}=n.decode(2,s),{v:l,l:u}=n.decode(2,c);if(u.length)throw new e("Invalid signature: left bytes after parsing");return{r:r.decode(o),s:r.decode(l)}},hexFromSig(t){const{_tlv:e,_int:r}=gd,n=`${e.encode(2,r.encode(t.r))}${e.encode(2,r.encode(t.s))}`;return e.encode(48,n)}},bd=BigInt(0),aa=BigInt(1);BigInt(2);const Fte=BigInt(3);BigInt(4);function e0t(t){const e=Zdt(t),{Fp:r}=e,n=AA(e.n,e.nBitLength),i=e.toBytes||((p,m,y)=>{const v=m.toAffine();return sm(Uint8Array.from([4]),r.toBytes(v.x),r.toBytes(v.y))}),s=e.fromBytes||(p=>{const m=p.subarray(1),y=r.fromBytes(m.subarray(0,r.BYTES)),v=r.fromBytes(m.subarray(r.BYTES,2*r.BYTES));return{x:y,y:v}});function a(p){const{a:m,b:y}=e,v=r.sqr(p),_=r.mul(v,p);return r.add(r.add(_,r.mul(p,m)),y)}if(!r.eql(r.sqr(e.Gy),a(e.Gx)))throw new Error("bad generator point: equation left != right");function o(p){return SA(p,aa,e.n)}function c(p){const{allowedPrivateKeyLengths:m,nByteLength:y,wrapPrivateKey:v,n:_}=e;if(m&&typeof p!="bigint"){if(nm(p)&&(p=im(p)),typeof p!="string"||!m.includes(p.length))throw new Error("Invalid key");p=p.padStart(y*2,"0")}let x;try{x=typeof p=="bigint"?p:Rg(_s("private key",p,y))}catch{throw new Error(`private key must be ${y} bytes, hex or bigint, not ${typeof p}`)}return v&&(x=Ci(x,_)),gc("private key",x,aa,_),x}function l(p){if(!(p instanceof h))throw new Error("ProjectivePoint expected")}const u=g4((p,m)=>{const{px:y,py:v,pz:_}=p;if(r.eql(_,r.ONE))return{x:y,y:v};const x=p.is0();m==null&&(m=x?r.ONE:r.inv(_));const A=r.mul(y,m),C=r.mul(v,m),R=r.mul(_,m);if(x)return{x:r.ZERO,y:r.ZERO};if(!r.eql(R,r.ONE))throw new Error("invZ was invalid");return{x:A,y:C}}),f=g4(p=>{if(p.is0()){if(e.allowInfinityPoint&&!r.is0(p.py))return;throw new Error("bad point: ZERO")}const{x:m,y}=p.toAffine();if(!r.isValid(m)||!r.isValid(y))throw new Error("bad point: x or y not FE");const v=r.sqr(y),_=a(m);if(!r.eql(v,_))throw new Error("bad point: equation left != right");if(!p.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class h{constructor(m,y,v){if(this.px=m,this.py=y,this.pz=v,m==null||!r.isValid(m))throw new Error("x required");if(y==null||!r.isValid(y))throw new Error("y required");if(v==null||!r.isValid(v))throw new Error("z required");Object.freeze(this)}static fromAffine(m){const{x:y,y:v}=m||{};if(!m||!r.isValid(y)||!r.isValid(v))throw new Error("invalid affine point");if(m instanceof h)throw new Error("projective point not allowed");const _=x=>r.eql(x,r.ZERO);return _(y)&&_(v)?h.ZERO:new h(y,v,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(m){const y=r.invertBatch(m.map(v=>v.pz));return m.map((v,_)=>v.toAffine(y[_])).map(h.fromAffine)}static fromHex(m){const y=h.fromAffine(s(_s("pointHex",m)));return y.assertValidity(),y}static fromPrivateKey(m){return h.BASE.multiply(c(m))}static msm(m,y){return Bpe(h,n,m,y)}_setWindowSize(m){g.setWindowSize(this,m)}assertValidity(){f(this)}hasEvenY(){const{y:m}=this.toAffine();if(r.isOdd)return!r.isOdd(m);throw new Error("Field doesn't support isOdd")}equals(m){l(m);const{px:y,py:v,pz:_}=this,{px:x,py:A,pz:C}=m,R=r.eql(r.mul(y,C),r.mul(x,_)),M=r.eql(r.mul(v,C),r.mul(A,_));return R&&M}negate(){return new h(this.px,r.neg(this.py),this.pz)}double(){const{a:m,b:y}=e,v=r.mul(y,Fte),{px:_,py:x,pz:A}=this;let C=r.ZERO,R=r.ZERO,M=r.ZERO,N=r.mul(_,_),Y=r.mul(x,x),H=r.mul(A,A),E=r.mul(_,x);return E=r.add(E,E),M=r.mul(_,A),M=r.add(M,M),C=r.mul(m,M),R=r.mul(v,H),R=r.add(C,R),C=r.sub(Y,R),R=r.add(Y,R),R=r.mul(C,R),C=r.mul(E,C),M=r.mul(v,M),H=r.mul(m,H),E=r.sub(N,H),E=r.mul(m,E),E=r.add(E,M),M=r.add(N,N),N=r.add(M,N),N=r.add(N,H),N=r.mul(N,E),R=r.add(R,N),H=r.mul(x,A),H=r.add(H,H),N=r.mul(H,E),C=r.sub(C,N),M=r.mul(H,Y),M=r.add(M,M),M=r.add(M,M),new h(C,R,M)}add(m){l(m);const{px:y,py:v,pz:_}=this,{px:x,py:A,pz:C}=m;let R=r.ZERO,M=r.ZERO,N=r.ZERO;const Y=e.a,H=r.mul(e.b,Fte);let E=r.mul(y,x),k=r.mul(v,A),w=r.mul(_,C),T=r.add(y,v),L=r.add(x,A);T=r.mul(T,L),L=r.add(E,k),T=r.sub(T,L),L=r.add(y,_);let I=r.add(x,C);return L=r.mul(L,I),I=r.add(E,w),L=r.sub(L,I),I=r.add(v,_),R=r.add(A,C),I=r.mul(I,R),R=r.add(k,w),I=r.sub(I,R),N=r.mul(Y,L),R=r.mul(H,w),N=r.add(R,N),R=r.sub(k,N),N=r.add(k,N),M=r.mul(R,N),k=r.add(E,E),k=r.add(k,E),w=r.mul(Y,w),L=r.mul(H,L),k=r.add(k,w),w=r.sub(E,w),w=r.mul(Y,w),L=r.add(L,w),E=r.mul(k,L),M=r.add(M,E),E=r.mul(I,L),R=r.mul(T,R),R=r.sub(R,E),E=r.mul(T,k),N=r.mul(I,N),N=r.add(N,E),new h(R,M,N)}subtract(m){return this.add(m.negate())}is0(){return this.equals(h.ZERO)}wNAF(m){return g.wNAFCached(this,m,h.normalizeZ)}multiplyUnsafe(m){gc("scalar",m,bd,e.n);const y=h.ZERO;if(m===bd)return y;if(m===aa)return this;const{endo:v}=e;if(!v)return g.unsafeLadder(this,m);let{k1neg:_,k1:x,k2neg:A,k2:C}=v.splitScalar(m),R=y,M=y,N=this;for(;x>bd||C>bd;)x&aa&&(R=R.add(N)),C&aa&&(M=M.add(N)),N=N.double(),x>>=aa,C>>=aa;return _&&(R=R.negate()),A&&(M=M.negate()),M=new h(r.mul(M.px,v.beta),M.py,M.pz),R.add(M)}multiply(m){const{endo:y,n:v}=e;gc("scalar",m,aa,v);let _,x;if(y){const{k1neg:A,k1:C,k2neg:R,k2:M}=y.splitScalar(m);let{p:N,f:Y}=this.wNAF(C),{p:H,f:E}=this.wNAF(M);N=g.constTimeNegate(A,N),H=g.constTimeNegate(R,H),H=new h(r.mul(H.px,y.beta),H.py,H.pz),_=N.add(H),x=Y.add(E)}else{const{p:A,f:C}=this.wNAF(m);_=A,x=C}return h.normalizeZ([_,x])[0]}multiplyAndAddUnsafe(m,y,v){const _=h.BASE,x=(C,R)=>R===bd||R===aa||!C.equals(_)?C.multiplyUnsafe(R):C.multiply(R),A=x(this,y).add(x(m,v));return A.is0()?void 0:A}toAffine(m){return u(this,m)}isTorsionFree(){const{h:m,isTorsionFree:y}=e;if(m===aa)return!0;if(y)return y(h,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:m,clearCofactor:y}=e;return m===aa?this:y?y(h,this):this.multiplyUnsafe(e.h)}toRawBytes(m=!0){return Fd("isCompressed",m),this.assertValidity(),i(h,this,m)}toHex(m=!0){return Fd("isCompressed",m),im(this.toRawBytes(m))}}h.BASE=new h(e.Gx,e.Gy,r.ONE),h.ZERO=new h(r.ZERO,r.ONE,r.ZERO);const d=e.nBitLength,g=Ppe(h,e.endo?Math.ceil(d/2):d);return{CURVE:e,ProjectivePoint:h,normPrivateKeyToScalar:c,weierstrassEquation:a,isWithinCurveOrder:o}}function t0t(t){const e=IU(t);return Wm(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function r0t(t){const e=t0t(t),{Fp:r,n}=e,i=r.BYTES+1,s=2*r.BYTES+1;function a(w){return Ci(w,n)}function o(w){return _N(w,n)}const{ProjectivePoint:c,normPrivateKeyToScalar:l,weierstrassEquation:u,isWithinCurveOrder:f}=e0t({...e,toBytes(w,T,L){const I=T.toAffine(),U=r.toBytes(I.x),O=sm;return Fd("isCompressed",L),L?O(Uint8Array.from([T.hasEvenY()?2:3]),U):O(Uint8Array.from([4]),U,r.toBytes(I.y))},fromBytes(w){const T=w.length,L=w[0],I=w.subarray(1);if(T===i&&(L===2||L===3)){const U=Rg(I);if(!SA(U,aa,r.ORDER))throw new Error("Point is not on curve");const O=u(U);let D;try{D=r.sqrt(O)}catch(z){const F=z instanceof Error?": "+z.message:"";throw new Error("Point is not on curve"+F)}const P=(D&aa)===aa;return(L&1)===1!==P&&(D=r.neg(D)),{x:U,y:D}}else if(T===s&&L===4){const U=r.fromBytes(I.subarray(0,r.BYTES)),O=r.fromBytes(I.subarray(r.BYTES,2*r.BYTES));return{x:U,y:O}}else throw new Error(`Point of length ${T} was invalid. Expected ${i} compressed bytes or ${s} uncompressed bytes`)}}),h=w=>im(ov(w,e.nByteLength));function d(w){const T=n>>aa;return w>T}function g(w){return d(w)?a(-w):w}const p=(w,T,L)=>Rg(w.slice(T,L));class m{constructor(T,L,I){this.r=T,this.s=L,this.recovery=I,this.assertValidity()}static fromCompact(T){const L=e.nByteLength;return T=_s("compactSignature",T,L*2),new m(p(T,0,L),p(T,L,2*L))}static fromDER(T){const{r:L,s:I}=gd.toSig(_s("DER",T));return new m(L,I)}assertValidity(){gc("r",this.r,aa,n),gc("s",this.s,aa,n)}addRecoveryBit(T){return new m(this.r,this.s,T)}recoverPublicKey(T){const{r:L,s:I,recovery:U}=this,O=C(_s("msgHash",T));if(U==null||![0,1,2,3].includes(U))throw new Error("recovery id invalid");const D=U===2||U===3?L+e.n:L;if(D>=r.ORDER)throw new Error("recovery id 2 or 3 invalid");const P=U&1?"03":"02",B=c.fromHex(P+h(D)),z=o(D),F=a(-O*z),X=a(I*z),W=c.BASE.multiplyAndAddUnsafe(B,F,X);if(!W)throw new Error("point at infinify");return W.assertValidity(),W}hasHighS(){return d(this.s)}normalizeS(){return this.hasHighS()?new m(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return av(this.toDERHex())}toDERHex(){return gd.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return av(this.toCompactHex())}toCompactHex(){return h(this.r)+h(this.s)}}const y={isValidPrivateKey(w){try{return l(w),!0}catch{return!1}},normPrivateKeyToScalar:l,randomPrivateKey:()=>{const w=Rpe(e.n);return Bht(e.randomBytes(w),e.n)},precompute(w=8,T=c.BASE){return T._setWindowSize(w),T.multiply(BigInt(3)),T}};function v(w,T=!0){return c.fromPrivateKey(w).toRawBytes(T)}function _(w){const T=nm(w),L=typeof w=="string",I=(T||L)&&w.length;return T?I===i||I===s:L?I===2*i||I===2*s:w instanceof c}function x(w,T,L=!0){if(_(w))throw new Error("first arg must be private key");if(!_(T))throw new Error("second arg must be public key");return c.fromHex(T).multiply(l(w)).toRawBytes(L)}const A=e.bits2int||function(w){const T=Rg(w),L=w.length*8-e.nBitLength;return L>0?T>>BigInt(L):T},C=e.bits2int_modN||function(w){return a(A(w))},R=CU(e.nBitLength);function M(w){return gc(`num < 2^${e.nBitLength}`,w,bd,R),ov(w,e.nByteLength)}function N(w,T,L=Y){if(["recovered","canonical"].some(G=>G in L))throw new Error("sign() legacy options not supported");const{hash:I,randomBytes:U}=e;let{lowS:O,prehash:D,extraEntropy:P}=L;O==null&&(O=!0),w=_s("msgHash",w),Lte(L),D&&(w=_s("prehashed msgHash",I(w)));const B=C(w),z=l(T),F=[M(z),M(B)];if(P!=null&&P!==!1){const G=P===!0?U(r.BYTES):P;F.push(_s("extraEntropy",G))}const X=sm(...F),W=B;function q(G){const ee=A(G);if(!f(ee))return;const ae=o(ee),te=c.BASE.multiply(ee).toAffine(),K=a(te.x);if(K===bd)return;const re=a(ae*a(W+K*z));if(re===bd)return;let V=(te.x===K?0:2)|Number(te.y&aa),oe=re;return O&&d(re)&&(oe=g(re),V^=1),new m(K,oe,V)}return{seed:X,k2sig:q}}const Y={lowS:e.lowS,prehash:!1},H={lowS:e.lowS,prehash:!1};function E(w,T,L=Y){const{seed:I,k2sig:U}=N(w,T,L),O=e;return Tpe(O.hash.outputLen,O.nByteLength,O.hmac)(I,U)}c.BASE._setWindowSize(8);function k(w,T,L,I=H){const U=w;if(T=_s("msgHash",T),L=_s("publicKey",L),"strict"in I)throw new Error("options.strict was renamed to lowS");Lte(I);const{lowS:O,prehash:D}=I;let P,B;try{if(typeof U=="string"||nm(U))try{P=m.fromDER(U)}catch(te){if(!(te instanceof gd.Err))throw te;P=m.fromCompact(U)}else if(typeof U=="object"&&typeof U.r=="bigint"&&typeof U.s=="bigint"){const{r:te,s:K}=U;P=new m(te,K)}else throw new Error("PARSE");B=c.fromHex(L)}catch(te){if(te.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(O&&P.hasHighS())return!1;D&&(T=e.hash(T));const{r:z,s:F}=P,X=C(T),W=o(F),q=a(X*W),G=a(z*W),ee=c.BASE.multiplyAndAddUnsafe(B,q,G)?.toAffine();return ee?a(ee.x)===z:!1}return{CURVE:e,getPublicKey:v,getSharedSecret:x,sign:E,verify:k,ProjectivePoint:c,Signature:m,utils:y}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function n0t(t){return{hash:t,hmac:(e,...r)=>K6(t,e,Uft(...r)),randomBytes:z6}}function i0t(t,e){const r=n=>r0t({...t,...n0t(n)});return Object.freeze({...r(e),create:r})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Hpe=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),$te=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),s0t=BigInt(1),TN=BigInt(2),Ute=(t,e)=>(t+e/TN)/e;function a0t(t){const e=Hpe,r=BigInt(3),n=BigInt(6),i=BigInt(11),s=BigInt(22),a=BigInt(23),o=BigInt(44),c=BigInt(88),l=t*t*t%e,u=l*l*t%e,f=Qi(u,r,e)*u%e,h=Qi(f,r,e)*u%e,d=Qi(h,TN,e)*l%e,g=Qi(d,i,e)*d%e,p=Qi(g,s,e)*g%e,m=Qi(p,o,e)*p%e,y=Qi(m,c,e)*m%e,v=Qi(y,o,e)*p%e,_=Qi(v,r,e)*u%e,x=Qi(_,a,e)*g%e,A=Qi(x,n,e)*l%e,C=Qi(A,TN,e);if(!kN.eql(kN.sqr(C),t))throw new Error("Cannot find square root");return C}const kN=AA(Hpe,void 0,void 0,{sqrt:a0t}),ta=i0t({a:BigInt(0),b:BigInt(7),Fp:kN,n:$te,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{const e=$te,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-s0t*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=r,a=BigInt("0x100000000000000000000000000000000"),o=Ute(s*t,e),c=Ute(-n*t,e);let l=Ci(t-o*r-c*i,e),u=Ci(-o*n-c*s,e);const f=l>a,h=u>a;if(f&&(l=e-l),h&&(u=e-u),l>a||u>a)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:f,k1:l,k2neg:h,k2:u}}}},w3);BigInt(0);ta.ProjectivePoint;function o0t(){return ta.utils.randomPrivateKey()}function c0t(t,e){const r=wn.digest(e instanceof Uint8Array?e:e.subarray());if(lp(r))return r.then(({digest:n})=>ta.sign(n,t).toDERRawBytes()).catch(n=>{throw new ye(String(n),"ERR_INVALID_INPUT")});try{return ta.sign(r.digest,t).toDERRawBytes()}catch(n){throw new ye(String(n),"ERR_INVALID_INPUT")}}function l0t(t,e,r){const n=wn.digest(r instanceof Uint8Array?r:r.subarray());if(lp(n))return n.then(({digest:i})=>ta.verify(e,i,t)).catch(i=>{throw new ye(String(i),"ERR_INVALID_INPUT")});try{return ta.verify(e,n.digest,t)}catch(i){throw new ye(String(i),"ERR_INVALID_INPUT")}}function u0t(t){return ta.ProjectivePoint.fromHex(t).toRawBytes(!0)}function f0t(t){try{ta.getPublicKey(t,!0)}catch(e){throw new ye(String(e),"ERR_INVALID_PRIVATE_KEY")}}function Wpe(t){try{ta.ProjectivePoint.fromHex(t)}catch(e){throw new ye(String(e),"ERR_INVALID_PUBLIC_KEY")}}function h0t(t){try{return ta.getPublicKey(t,!0)}catch(e){throw new ye(String(e),"ERR_INVALID_PRIVATE_KEY")}}let jU=class{_key;constructor(e){Wpe(e),this._key=e}verify(e,r){return l0t(this._key,r,e)}marshal(){return u0t(this._key)}get bytes(){return v4.encode({Type:Fa.Secp256k1,Data:this.marshal()}).subarray()}equals(e){return Kr(this.bytes,e.bytes)}async hash(){const e=wn.digest(this.bytes);let r;return lp(e)?{bytes:r}=await e:r=e.bytes,r}},zU=class{_key;_publicKey;constructor(e,r){this._key=e,this._publicKey=r??h0t(e),f0t(this._key),Wpe(this._publicKey)}sign(e){return c0t(this._key,e)}get public(){return new jU(this._publicKey)}marshal(){return this._key}get bytes(){return lv.encode({Type:Fa.Secp256k1,Data:this.marshal()}).subarray()}equals(e){return Kr(this.bytes,e.bytes)}hash(){const e=wn.digest(this.bytes);return lp(e)?e.then(({bytes:r})=>r):e.bytes}async id(){const e=await this.public.hash();return vt(e,"base58btc")}async export(e,r="libp2p-key"){if(r==="libp2p-key")return RU(this.bytes,e);throw new ye(`export format '${r}' is not supported`,"ERR_INVALID_EXPORT_FORMAT")}};function d0t(t){return new zU(t)}function p0t(t){return new jU(t)}async function g0t(){const t=o0t();return new zU(t)}const m0t=Object.freeze(Object.defineProperty({__proto__:null,Secp256k1PrivateKey:zU,Secp256k1PublicKey:jU,generateKeyPair:g0t,unmarshalSecp256k1PrivateKey:d0t,unmarshalSecp256k1PublicKey:p0t},Symbol.toStringTag,{value:"Module"})),Bg={rsa:Gdt,ed25519:kdt,secp256k1:m0t};function Kpe(t){const e=Object.keys(Bg).join(" / ");return new ye(`invalid or unsupported key type ${t}. Must be ${e}`,"ERR_UNSUPPORTED_KEY_TYPE")}function y0t(t){if(t=t.toLowerCase(),t==="rsa"||t==="ed25519"||t==="secp256k1")return Bg[t];throw Kpe(t)}async function v0t(t,e){return y0t(t).generateKeyPair(2048)}async function b0t(t){const e=lv.decode(t),r=e.Data??new Uint8Array;switch(e.Type){case Fa.RSA:return Bg.rsa.unmarshalRsaPrivateKey(r);case Fa.Ed25519:return Bg.ed25519.unmarshalEd25519PrivateKey(r);case Fa.Secp256k1:return Bg.secp256k1.unmarshalSecp256k1PrivateKey(r);default:throw Kpe(e.Type??"RSA")}}function w0t(t,e){for(let r=0;r<t.byteLength;r++){if(t[r]<e[r])return-1;if(t[r]>e[r])return 1}return t.byteLength>e.byteLength?1:t.byteLength<e.byteLength?-1:0}const _0t=Bg.secp256k1.unmarshalSecp256k1PrivateKey,x0t=Bg.secp256k1.unmarshalSecp256k1PublicKey,E0t=async(t,e,r)=>{if(!t)throw new Error("No signature given");if(!e)throw new Error("Given publicKey was undefined");if(!r)throw new Error("Given input data was undefined");r instanceof Uint8Array||(r=typeof r=="string"?pt(r):new Uint8Array(r));const n=(s,a,o)=>s.verify(a,o);let i=!1;try{const s=x0t(pt(e,"base16"));i=await n(s,r,pt(t,"base16"))}catch{}return Promise.resolve(i)},CN=async(t,e)=>{if(!t)throw new Error("No signing key given");if(!e)throw new Error("Given input data was undefined");return e instanceof Uint8Array||(e=typeof e=="string"?pt(e):new Uint8Array(e)),vt(await t.sign(e),"base16")},S0t=Mu({size:1e3}),Gpe=async(t,e,r)=>{const n=await S0t,i=await n.get(t);let s=!1;if(i){const a=(o,c)=>c instanceof Uint8Array?w0t(o,c)===0:o.toString()===c.toString();s=i.publicKey===e&&a(i.data,r)}else{const a=await E0t(t,e,r);s=a,a&&await n.put(t,{publicKey:e,data:r})}return s},A0t="./keystore",Ype=async({storage:t,path:e}={})=>{t=t||await Ld(await Mu({size:1e3}),await aN({path:e||A0t}));const r=async()=>{await t.close()},n=async()=>{await t.clear()},i=async l=>{if(!l)throw new Error("id needed to check a key");let u=!1;try{const f=await t.get("private_"+l);u=f!=null}catch{console.error("Error: ENOENT: no such file or directory")}return u},s=async(l,u)=>{await t.put("private_"+l,u.privateKey)};return{clear:n,close:r,hasKey:i,addKey:s,createKey:async l=>{if(!l)throw new Error("id needed to create a key");const u=await v0t("secp256k1"),f=await b0t(u.bytes),d={publicKey:f.public.marshal(),privateKey:f.marshal()};return await s(l,d),f},getKey:async l=>{if(!l)throw new Error("id needed to get a key");let u;try{u=await t.get("private_"+l)}catch{}if(u)return _0t(u)},getPublic:(l,u={})=>{const f=["hex","buffer"],h=u.format||"hex";if(f.indexOf(h)===-1)throw new Error("Supported formats are `hex` and `buffer`");const d=l.public.marshal();return h==="buffer"?d:vt(d,"base16")}}},Xpe=ob,Zpe=YS,T0t=Vo,Jpe=async({id:t,publicKey:e,signatures:r,type:n,sign:i,verify:s}={})=>{if(!t)throw new Error("Identity id is required");if(!e)throw new Error("Invalid public key");if(!r)throw new Error("Signatures object is required");if(!r.id)throw new Error("Signature of id is required");if(!r.publicKey)throw new Error("Signature of publicKey+id is required");if(!n)throw new Error("Identity type is required");r=Object.assign({},r);const a={id:t,publicKey:e,signatures:r,type:n,sign:i,verify:s},{hash:o,bytes:c}=await k0t(a);return a.hash=o,a.bytes=c,a},k0t=async t=>{const{id:e,publicKey:r,signatures:n,type:i}=t,s={id:e,publicKey:r,signatures:n,type:i},{cid:a,bytes:o}=await tb({value:s,codec:Xpe,hasher:Zpe});return{hash:a.toString(T0t),bytes:Uint8Array.from(o)}},C0t=async t=>{const{value:e}=await qS({bytes:t,codec:Xpe,hasher:Zpe});return Jpe({...e})},I0t=t=>!!(t.id&&t.hash&&t.bytes&&t.publicKey&&t.signatures&&t.signatures.id&&t.signatures.publicKey&&t.type),R0t=(t,e)=>t.id===e.id&&t.hash===e.hash&&t.type===e.type&&t.publicKey===e.publicKey&&t.signatures.id===e.signatures.id&&t.signatures.publicKey===e.signatures.publicKey,Qpe="publickey",P0t=async t=>{const{id:e,publicKey:r,signatures:n}=t;return Gpe(n.publicKey,e,r+n.id)},qU=({keystore:t})=>async()=>{if(!t)throw new Error("PublicKeyIdentityProvider requires a keystore parameter");return{type:Qpe,getId:async({id:n}={})=>{if(!n)throw new Error("id is required");const i=await t.getKey(n)||await t.createKey(n);return vt(i.public.marshal(),"base16")},signIdentity:async(n,{id:i}={})=>{if(!i)throw new Error("id is required");const s=await t.getKey(i);if(!s)throw new Error(`Signing key for '${i}' not found`);return CN(s,n)}}};qU.verifyIdentity=P0t;qU.type=Qpe;const HU={},B0t=t=>Object.keys(HU).includes(t),tB=t=>{if(!B0t(t))throw new Error(`IdentityProvider type '${t}' is not supported`);return HU[t]},D0t=t=>{if(!t.type||typeof t.type!="string")throw new Error("Given IdentityProvider doesn't have a field 'type'.");if(!t.verifyIdentity)throw new Error("Given IdentityProvider doesn't have a function 'verifyIdentity'.");HU[t.type]=t};D0t(qU);const O0t=k1("./orbitdb","identities"),N0t=async({keystore:t,path:e,storage:r,ipfs:n}={})=>{t=t||await Ype({path:e||O0t}),r||(r=n?await Ld(await Mu({size:1e3}),await cb({ipfs:n,pin:!0})):await $$());const i=await Mu({size:1e3}),s=async u=>{const f=await r.get(u);if(f)return C0t(f)},a=async(u={})=>{u.keystore=t;const f=tB("publickey"),d=await(u.provider||f({keystore:t}))();if(!tB(d.type))throw new Error("Identity provider is unknown. Use useIdentityProvider(provider) to register the identity provider");const g=await d.getId(u),p=await t.getKey(g)||await t.createKey(g),m=t.getPublic(p),y=await CN(p,g),v=await d.signIdentity(m+y,u),x=await Jpe({id:g,publicKey:m,signatures:{id:y,publicKey:v},type:d.type,sign:c,verify:l});return await r.put(x.hash,x.bytes),x},o=async u=>{if(!I0t(u))return!1;const{id:f,publicKey:h,signatures:d}=u;if(!await l(d.id,h,f))return!1;const p=await i.get(d.id);if(p)return R0t(u,p);const y=await tB(u.type).verifyIdentity(u);return y&&await i.put(d.id,u),y},c=async(u,f)=>{const h=await t.getKey(u.id);if(!h)throw new Error("Private signing key not found from KeyStore");return await CN(h,f)},l=async(u,f,h)=>await Gpe(u,f,h);return{createIdentity:a,verifyIdentity:o,getIdentity:s,sign:c,verify:l,keystore:t}},to=t=>{if(t=t.toString(),!t.startsWith("/orbitdb")&&!t.startsWith("\\orbitdb"))return!1;t=t.replaceAll("/orbitdb/",""),t=t.replaceAll("\\orbitdb\\",""),t=t.replaceAll("/",""),t=t.replaceAll("\\","");let e;try{e=Hu.parse(t,Vo)}catch{return!1}return e!==void 0},Vte=t=>{if(t&&t.protocol==="orbitdb"&&t.hash)return t;const e="orbitdb",r=t.replace("/orbitdb/","").replace("\\orbitdb\\","");return{protocol:e,hash:r,address:t,toString:()=>k1("/",e,r)}},jte=ob,zte=YS,M0t=Vo,L0t=async({ipfs:t,storage:e}={})=>(e=e||await Ld(await Mu({size:1e3}),await cb({ipfs:t,pin:!0})),{get:async s=>{const a=await e.get(s),{value:o}=await qS({bytes:a,codec:jte,hasher:zte});return o},create:async({name:s,type:a,accessController:o,meta:c})=>{if(!s)throw new Error("name is required");if(!a)throw new Error("type is required");if(!o)throw new Error("accessController is required");const l=Object.assign({name:s,type:a,accessController:o},c!==void 0?{meta:c}:{}),{cid:u,bytes:f}=await tb({value:l,codec:jte,hasher:zte}),h=u.toString(M0t);return await e.put(h,f),{hash:h,manifest:l}},close:async()=>{await e.close()}}),ege=async(t=32)=>{const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let r="",n=0;for(;n<t;)r+=e.charAt(Math.floor(Math.random()*e.length)),n+=1;return r},tge=ob,rge=YS,F0t=Vo,$0t=async({storage:t,type:e,params:r})=>{const n={type:e,...r},{cid:i,bytes:s}=await tb({value:n,codec:tge,hasher:rge}),a=i.toString(F0t);return await t.put(a,s),a},qx="ipfs",kA=({write:t,storage:e}={})=>async({orbitdb:r,identities:n,address:i})=>{if(e=e||await Ld(await Mu({size:1e3}),await cb({ipfs:r.ipfs,pin:!0})),t=t||[r.identity.id],i){const a=await e.get(i.replaceAll("/ipfs/","")),{value:o}=await qS({bytes:a,codec:tge,hasher:rge});t=o.write}else i=await $0t({storage:e,type:qx,params:{write:t}}),i=k1("/",qx,i);return{type:qx,address:i,write:t,canAppend:async a=>{const o=await n.getIdentity(a.identity);if(!o)return!1;const{id:c}=o;return t.includes(c)||t.includes("*")?n.verifyIdentity(o):!1}}};kA.type=qx;const nge="orbitdb",ige=({write:t}={})=>async({orbitdb:e,identities:r,address:n,name:i})=>{n=n||i||await ege(64),t=t||[e.identity.id];const s=await e.open(n,{type:"keyvalue",AccessController:kA({write:t})});n=s.address;const a=async g=>{const p=await r.getIdentity(g.identity);if(!p)return!1;const{id:m}=p;return await f("write",m)||await f("admin",m)?r.verifyIdentity(p):!1},o=async()=>{const g=[];for await(const m of s.iterator())g[m.key]=m.value;const p=m=>{const y=m[0];g[y]=new Set([...g[y]||[],...m[1]])};return Object.entries({...g,admin:new Set([...g.admin||[],...s.access.write])}).forEach(p),g},c=async g=>(await o())[g]||new Set([]),l=async()=>{await s.close()},u=async()=>{await s.drop()},f=async(g,p)=>{const m=new Set(await c(g));return m.has(p)||m.has("*")};return{type:nge,address:n,write:t,canAppend:a,capabilities:o,get:c,grant:async(g,p)=>{const m=new Set([...await s.get(g)||[],p]);await s.put(g,Array.from(m.values()))},revoke:async(g,p)=>{const m=new Set(await s.get(g)||[]);m.delete(p),m.size>0?await s.put(g,Array.from(m.values())):await s.del(g)},close:l,drop:u,events:s.events}};ige.type=nge;const IN={},U0t=t=>{if(!IN[t])throw new Error(`AccessController type '${t}' is not supported`);return IN[t]},RE=t=>{if(!t.type)throw new Error("AccessController does not contain required field 'type'.");IN[t.type]=t};RE(kA);RE(ige);const V0t="events",j0t=kA,z0t=async({ipfs:t,id:e,identity:r,identities:n,directory:i}={})=>{if(t==null)throw new Error("IPFS instance is a required argument.");e=e||await ege();const s=t.libp2p.peerId;i=i||"./orbitdb";let a;n?a=n.keystore:(a=await Ype({path:k1(i,"./keystore")}),n=await N0t({ipfs:t,keystore:a})),r?r.provider&&(r=await n.createIdentity({...r})):r=await n.createIdentity({id:e});const o=await L0t({ipfs:t});let c={};const l=async(h,{type:d,meta:g,sync:p,Database:m,AccessController:y,headsStorage:v,entryStorage:_,indexStorage:x,referencesCount:A}={})=>{let C,R,M;if(c[h])return c[h];if(to(h)){const Y=Vte(h);R=await o.get(Y.hash);const H=R.accessController.split("/",2).pop();y=U0t(H)(),M=await y({orbitdb:{open:l,identity:r,ipfs:t},identities:n,address:R.accessController}),C=R.name,d=d||R.type,g=R.meta}else{d=d||V0t,y=y||j0t(),M=await y({orbitdb:{open:l,identity:r,ipfs:t},identities:n,name:h});const Y=await o.create({name:h,type:d,accessController:M.address,meta:g});if(R=Y.manifest,h=Vte(Y.hash),C=R.name,g=R.meta,c[h])return c[h]}if(m=m||Ist(d)(),!m)throw new Error(`Unsupported database type: '${d}'`);h=h.toString();const N=await m({ipfs:t,identity:r,address:h,name:C,access:M,directory:i,meta:g,syncAutomatically:p,headsStorage:v,entryStorage:_,indexStorage:x,referencesCount:A});return N.events.on("close",u(h)),c[h]=N,N},u=h=>()=>{delete c[h]};return{id:e,open:l,stop:async()=>{for(const h of Object.values(c))await h.close();a&&await a.close(),o&&await o.close(),c={}},ipfs:t,directory:i,keystore:a,identity:r,peerId:s}};function w5({enumerable:t=!0,configurable:e=!1}={}){return{enumerable:t,configurable:e,writable:!1}}function*q0t(t,e){if(e!=null&&typeof e=="object")if(Array.isArray(e))for(const[r,n]of e.entries()){const i=[...t,r],s=Dt.asCID(n);s!=null?yield[i.join("/"),s]:typeof n=="object"&&(yield*RN(n,i))}else{const r=Dt.asCID(e);r!=null?yield[t.join("/"),r]:yield*RN(e,t)}}function*RN(t,e){if(t==null||t instanceof Uint8Array)return;const r=Dt.asCID(t);r!=null&&(yield[e.join("/"),r]);for(const[n,i]of Object.entries(t)){const s=[...e,n];yield*q0t(s,i)}}function*H0t(t,e){if(Array.isArray(e))for(const[r,n]of e.entries()){const i=[...t,r];yield i.join("/"),typeof n=="object"&&Dt.asCID(n)==null&&(yield*PN(n,i))}else yield*PN(e,t)}function*PN(t,e){if(!(t==null||typeof t!="object"))for(const[r,n]of Object.entries(t)){const i=[...e,r];yield i.join("/"),n!=null&&!(n instanceof Uint8Array)&&typeof n=="object"&&Dt.asCID(n)==null&&(yield*H0t(i,n))}}function W0t(t,e){let r=t;for(const[n,i]of e.entries()){if(r=r[i],r==null)throw new Error(`Object has no property at ${e.slice(0,n+1).map(a=>`[${JSON.stringify(a)}]`).join("")}`);const s=Dt.asCID(r);if(s!=null)return{value:s,remaining:e.slice(n+1).join("/")}}return{value:r}}let sge=class{cid;bytes;value;asBlock;constructor({cid:e,bytes:r,value:n}){if(e==null||r==null||typeof n>"u")throw new Error("Missing required argument");this.cid=e,this.bytes=r,this.value=n,this.asBlock=this,Object.defineProperties(this,{cid:w5(),bytes:w5(),value:w5(),asBlock:w5()})}links(){return RN(this.value,[])}tree(){return PN(this.value,[])}get(e="/"){return W0t(this.value,e.split("/").filter(Boolean))}};async function age({value:t,codec:e,hasher:r}){if(typeof t>"u")throw new Error('Missing required argument "value"');if(e==null||r==null)throw new Error("Missing required argument: codec or hasher");const n=e.encode(t),i=await r.digest(n),s=Dt.create(1,e.code,i);return new sge({value:t,bytes:n,cid:s})}async function oge({bytes:t,codec:e,hasher:r}){if(t==null)throw new Error('Missing required argument "bytes"');if(e==null||r==null)throw new Error("Missing required argument: codec or hasher");const n=e.decode(t),i=await r.digest(t),s=Dt.create(1,e.code,i);return new sge({value:n,bytes:t,cid:s})}const fa="MODÉRATEUR",Iu="MEMBRE",cge=[fa,Iu],lge="feed",uge=()=>async({ipfs:t,identity:e,address:r,name:n,access:i,directory:s,meta:a,headsStorage:o,entryStorage:c,indexStorage:l,referencesCount:u,syncAutomatically:f,onUpdate:h})=>{const d=await ub({ipfs:t,identity:e,address:r,name:n,access:i,directory:s,meta:a,headsStorage:o,entryStorage:c,indexStorage:l,referencesCount:u,syncAutomatically:f,onUpdate:h}),{addOperation:g,log:p}=d,m=async x=>g({op:"ADD",key:null,value:x}),y=async x=>g({op:"DEL",key:null,value:x}),v=async function*({amount:x}={}){const A={};let C=0;for await(const R of p.traverse()){const{op:M,value:N}=R.payload,{hash:Y}=R;if(M==="ADD"&&!A[Y]){C++;const H=R.hash;A[H]=!0,yield{value:N,hash:H}}else M==="DEL"&&!A[N]&&(A[N]=!0);if(x!==void 0&&C>=x)break}};return{...d,type:lge,add:m,remove:y,iterator:v,all:async()=>{const x=[];for await(const A of v())x.unshift(A);return x}}};uge.type=lge;const K0t=()=>fb(uge),fge="set",hge=()=>async({ipfs:t,identity:e,address:r,name:n,access:i,directory:s,meta:a,headsStorage:o,entryStorage:c,indexStorage:l,referencesCount:u,syncAutomatically:f,onUpdate:h})=>{const d=await ub({ipfs:t,identity:e,address:r,name:n,access:i,directory:s,meta:a,headsStorage:o,entryStorage:c,indexStorage:l,referencesCount:u,syncAutomatically:f,onUpdate:h}),{addOperation:g,log:p}=d,m=async x=>g({op:"ADD",key:null,value:x}),y=async x=>g({op:"DEL",key:null,value:x}),v=async function*({amount:x}={}){const A={};let C=0;for await(const R of p.traverse()){const{op:M,value:N}=R.payload,Y=JSON.stringify(N);if(M==="ADD"&&!A[Y]){A[Y]=!0,C++;const H=R.hash;yield{value:N,hash:H}}else M==="DEL"&&!A[Y]&&(A[Y]=!0);if(x!==void 0&&C>=x)break}};return{...d,type:fge,add:m,del:y,iterator:v,all:async()=>{const x=[];for await(const A of v())x.unshift(A);return x}}};hge.type=fge;const dge=()=>fb(hge),pge="ordered-keyvalue",gge=()=>async({ipfs:t,identity:e,address:r,name:n,access:i,directory:s,meta:a,headsStorage:o,entryStorage:c,indexStorage:l,referencesCount:u,syncAutomatically:f,onUpdate:h})=>{const d=await ub({ipfs:t,identity:e,address:r,name:n,access:i,directory:s,meta:a,headsStorage:o,entryStorage:c,indexStorage:l,referencesCount:u,syncAutomatically:f,onUpdate:h}),{addOperation:g,log:p}=d,m=async(C,R,M)=>{const N={value:R};return M!==void 0&&(N.position=M),g({op:"PUT",key:C,value:N})},y=async(C,R)=>g({op:"MOVE",key:C,value:R}),v=async C=>g({op:"DEL",key:C,value:null}),_=async C=>{for await(const R of p.traverse()){const{op:M,key:N,value:Y}=R.payload;if(M==="PUT"&&N===C)return Y;if(M==="DEL"&&N===C)return}},x=async function*({amount:C}={}){const R={},M={};let N=0;for await(const Y of p.traverse()){const{op:H,key:E,value:k}=Y.payload;if(!E)return;if(H==="PUT"&&!R[E]){R[E]=!0;const w=k,T=Y.hash,L=M[E]!==void 0?M[E]:w.position!==void 0?w.position:0;M[E]=L,N++,yield{key:E,value:w.value,position:L,hash:T}}else H==="MOVE"&&!R[E]?M[E]=k:H==="DEL"&&!R[E]&&(R[E]=!0);if(C!==void 0&&N>=C)break}};return{...d,type:pge,put:m,set:m,del:v,move:y,get:_,iterator:x,all:async()=>{const C=[];for await(const R of x())C.unshift(R);return C.sort((R,M)=>R.position>M.position?1:R.position===M.position?0:-1).map(R=>({key:R.key,value:R.value,hash:R.hash}))}}};gge.type=pge;const G0t=()=>fb(gge);var BN={exports:{}},mge={},Lu={},fv={},G6={},sn={},w4={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.regexpCode=t.getEsmExportName=t.getProperty=t.safeStringify=t.stringify=t.strConcat=t.addCodeArg=t.str=t._=t.nil=t._Code=t.Name=t.IDENTIFIER=t._CodeOrName=void 0;class e{}t._CodeOrName=e,t.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class r extends e{constructor(v){if(super(),!t.IDENTIFIER.test(v))throw new Error("CodeGen: name must be a valid identifier");this.str=v}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}t.Name=r;class n extends e{constructor(v){super(),this._items=typeof v=="string"?[v]:v}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const v=this._items[0];return v===""||v==='""'}get str(){var v;return(v=this._str)!==null&&v!==void 0?v:this._str=this._items.reduce((_,x)=>`${_}${x}`,"")}get names(){var v;return(v=this._names)!==null&&v!==void 0?v:this._names=this._items.reduce((_,x)=>(x instanceof r&&(_[x.str]=(_[x.str]||0)+1),_),{})}}t._Code=n,t.nil=new n("");function i(y,...v){const _=[y[0]];let x=0;for(;x<v.length;)o(_,v[x]),_.push(y[++x]);return new n(_)}t._=i;const s=new n("+");function a(y,...v){const _=[d(y[0])];let x=0;for(;x<v.length;)_.push(s),o(_,v[x]),_.push(s,d(y[++x]));return c(_),new n(_)}t.str=a;function o(y,v){v instanceof n?y.push(...v._items):v instanceof r?y.push(v):y.push(f(v))}t.addCodeArg=o;function c(y){let v=1;for(;v<y.length-1;){if(y[v]===s){const _=l(y[v-1],y[v+1]);if(_!==void 0){y.splice(v-1,3,_);continue}y[v++]="+"}v++}}function l(y,v){if(v==='""')return y;if(y==='""')return v;if(typeof y=="string")return v instanceof r||y[y.length-1]!=='"'?void 0:typeof v!="string"?`${y.slice(0,-1)}${v}"`:v[0]==='"'?y.slice(0,-1)+v.slice(1):void 0;if(typeof v=="string"&&v[0]==='"'&&!(y instanceof r))return`"${y}${v.slice(1)}`}function u(y,v){return v.emptyStr()?y:y.emptyStr()?v:a`${y}${v}`}t.strConcat=u;function f(y){return typeof y=="number"||typeof y=="boolean"||y===null?y:d(Array.isArray(y)?y.join(","):y)}function h(y){return new n(d(y))}t.stringify=h;function d(y){return JSON.stringify(y).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}t.safeStringify=d;function g(y){return typeof y=="string"&&t.IDENTIFIER.test(y)?new n(`.${y}`):i`[${y}]`}t.getProperty=g;function p(y){if(typeof y=="string"&&t.IDENTIFIER.test(y))return new n(`${y}`);throw new Error(`CodeGen: invalid export name: ${y}, use explicit $id name mapping`)}t.getEsmExportName=p;function m(y){return new n(y.toString())}t.regexpCode=m})(w4);var DN={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ValueScope=t.ValueScopeName=t.Scope=t.varKinds=t.UsedValueState=void 0;const e=w4;class r extends Error{constructor(l){super(`CodeGen: "code" for ${l} not defined`),this.value=l.value}}var n;(function(c){c[c.Started=0]="Started",c[c.Completed=1]="Completed"})(n||(t.UsedValueState=n={})),t.varKinds={const:new e.Name("const"),let:new e.Name("let"),var:new e.Name("var")};class i{constructor({prefixes:l,parent:u}={}){this._names={},this._prefixes=l,this._parent=u}toName(l){return l instanceof e.Name?l:this.name(l)}name(l){return new e.Name(this._newName(l))}_newName(l){const u=this._names[l]||this._nameGroup(l);return`${l}${u.index++}`}_nameGroup(l){var u,f;if(!((f=(u=this._parent)===null||u===void 0?void 0:u._prefixes)===null||f===void 0)&&f.has(l)||this._prefixes&&!this._prefixes.has(l))throw new Error(`CodeGen: prefix "${l}" is not allowed in this scope`);return this._names[l]={prefix:l,index:0}}}t.Scope=i;class s extends e.Name{constructor(l,u){super(u),this.prefix=l}setValue(l,{property:u,itemIndex:f}){this.value=l,this.scopePath=(0,e._)`.${new e.Name(u)}[${f}]`}}t.ValueScopeName=s;const a=(0,e._)`\n`;class o extends i{constructor(l){super(l),this._values={},this._scope=l.scope,this.opts={...l,_n:l.lines?a:e.nil}}get(){return this._scope}name(l){return new s(l,this._newName(l))}value(l,u){var f;if(u.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const h=this.toName(l),{prefix:d}=h,g=(f=u.key)!==null&&f!==void 0?f:u.ref;let p=this._values[d];if(p){const v=p.get(g);if(v)return v}else p=this._values[d]=new Map;p.set(g,h);const m=this._scope[d]||(this._scope[d]=[]),y=m.length;return m[y]=u.ref,h.setValue(u,{property:d,itemIndex:y}),h}getValue(l,u){const f=this._values[l];if(f)return f.get(u)}scopeRefs(l,u=this._values){return this._reduceValues(u,f=>{if(f.scopePath===void 0)throw new Error(`CodeGen: name "${f}" has no value`);return(0,e._)`${l}${f.scopePath}`})}scopeCode(l=this._values,u,f){return this._reduceValues(l,h=>{if(h.value===void 0)throw new Error(`CodeGen: name "${h}" has no value`);return h.value.code},u,f)}_reduceValues(l,u,f={},h){let d=e.nil;for(const g in l){const p=l[g];if(!p)continue;const m=f[g]=f[g]||new Map;p.forEach(y=>{if(m.has(y))return;m.set(y,n.Started);let v=u(y);if(v){const _=this.opts.es5?t.varKinds.var:t.varKinds.const;d=(0,e._)`${d}${_} ${y} = ${v};${this.opts._n}`}else if(v=h?.(y))d=(0,e._)`${d}${v}${this.opts._n}`;else throw new r(y);m.set(y,n.Completed)})}return d}}t.ValueScope=o})(DN);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.or=t.and=t.not=t.CodeGen=t.operators=t.varKinds=t.ValueScopeName=t.ValueScope=t.Scope=t.Name=t.regexpCode=t.stringify=t.getProperty=t.nil=t.strConcat=t.str=t._=void 0;const e=w4,r=DN;var n=w4;Object.defineProperty(t,"_",{enumerable:!0,get:function(){return n._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return n.str}}),Object.defineProperty(t,"strConcat",{enumerable:!0,get:function(){return n.strConcat}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return n.nil}}),Object.defineProperty(t,"getProperty",{enumerable:!0,get:function(){return n.getProperty}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return n.stringify}}),Object.defineProperty(t,"regexpCode",{enumerable:!0,get:function(){return n.regexpCode}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return n.Name}});var i=DN;Object.defineProperty(t,"Scope",{enumerable:!0,get:function(){return i.Scope}}),Object.defineProperty(t,"ValueScope",{enumerable:!0,get:function(){return i.ValueScope}}),Object.defineProperty(t,"ValueScopeName",{enumerable:!0,get:function(){return i.ValueScopeName}}),Object.defineProperty(t,"varKinds",{enumerable:!0,get:function(){return i.varKinds}}),t.operators={GT:new e._Code(">"),GTE:new e._Code(">="),LT:new e._Code("<"),LTE:new e._Code("<="),EQ:new e._Code("==="),NEQ:new e._Code("!=="),NOT:new e._Code("!"),OR:new e._Code("||"),AND:new e._Code("&&"),ADD:new e._Code("+")};class s{optimizeNodes(){return this}optimizeNames(F,X){return this}}class a extends s{constructor(F,X,W){super(),this.varKind=F,this.name=X,this.rhs=W}render({es5:F,_n:X}){const W=F?r.varKinds.var:this.varKind,q=this.rhs===void 0?"":` = ${this.rhs}`;return`${W} ${this.name}${q};`+X}optimizeNames(F,X){if(F[this.name.str])return this.rhs&&(this.rhs=w(this.rhs,F,X)),this}get names(){return this.rhs instanceof e._CodeOrName?this.rhs.names:{}}}class o extends s{constructor(F,X,W){super(),this.lhs=F,this.rhs=X,this.sideEffects=W}render({_n:F}){return`${this.lhs} = ${this.rhs};`+F}optimizeNames(F,X){if(!(this.lhs instanceof e.Name&&!F[this.lhs.str]&&!this.sideEffects))return this.rhs=w(this.rhs,F,X),this}get names(){const F=this.lhs instanceof e.Name?{}:{...this.lhs.names};return k(F,this.rhs)}}class c extends o{constructor(F,X,W,q){super(F,W,q),this.op=X}render({_n:F}){return`${this.lhs} ${this.op}= ${this.rhs};`+F}}class l extends s{constructor(F){super(),this.label=F,this.names={}}render({_n:F}){return`${this.label}:`+F}}class u extends s{constructor(F){super(),this.label=F,this.names={}}render({_n:F}){return`break${this.label?` ${this.label}`:""};`+F}}class f extends s{constructor(F){super(),this.error=F}render({_n:F}){return`throw ${this.error};`+F}get names(){return this.error.names}}class h extends s{constructor(F){super(),this.code=F}render({_n:F}){return`${this.code};`+F}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(F,X){return this.code=w(this.code,F,X),this}get names(){return this.code instanceof e._CodeOrName?this.code.names:{}}}class d extends s{constructor(F=[]){super(),this.nodes=F}render(F){return this.nodes.reduce((X,W)=>X+W.render(F),"")}optimizeNodes(){const{nodes:F}=this;let X=F.length;for(;X--;){const W=F[X].optimizeNodes();Array.isArray(W)?F.splice(X,1,...W):W?F[X]=W:F.splice(X,1)}return F.length>0?this:void 0}optimizeNames(F,X){const{nodes:W}=this;let q=W.length;for(;q--;){const G=W[q];G.optimizeNames(F,X)||(T(F,G.names),W.splice(q,1))}return W.length>0?this:void 0}get names(){return this.nodes.reduce((F,X)=>E(F,X.names),{})}}class g extends d{render(F){return"{"+F._n+super.render(F)+"}"+F._n}}class p extends d{}class m extends g{}m.kind="else";class y extends g{constructor(F,X){super(X),this.condition=F}render(F){let X=`if(${this.condition})`+super.render(F);return this.else&&(X+="else "+this.else.render(F)),X}optimizeNodes(){super.optimizeNodes();const F=this.condition;if(F===!0)return this.nodes;let X=this.else;if(X){const W=X.optimizeNodes();X=this.else=Array.isArray(W)?new m(W):W}if(X)return F===!1?X instanceof y?X:X.nodes:this.nodes.length?this:new y(L(F),X instanceof y?[X]:X.nodes);if(!(F===!1||!this.nodes.length))return this}optimizeNames(F,X){var W;if(this.else=(W=this.else)===null||W===void 0?void 0:W.optimizeNames(F,X),!!(super.optimizeNames(F,X)||this.else))return this.condition=w(this.condition,F,X),this}get names(){const F=super.names;return k(F,this.condition),this.else&&E(F,this.else.names),F}}y.kind="if";class v extends g{}v.kind="for";class _ extends v{constructor(F){super(),this.iteration=F}render(F){return`for(${this.iteration})`+super.render(F)}optimizeNames(F,X){if(super.optimizeNames(F,X))return this.iteration=w(this.iteration,F,X),this}get names(){return E(super.names,this.iteration.names)}}class x extends v{constructor(F,X,W,q){super(),this.varKind=F,this.name=X,this.from=W,this.to=q}render(F){const X=F.es5?r.varKinds.var:this.varKind,{name:W,from:q,to:G}=this;return`for(${X} ${W}=${q}; ${W}<${G}; ${W}++)`+super.render(F)}get names(){const F=k(super.names,this.from);return k(F,this.to)}}class A extends v{constructor(F,X,W,q){super(),this.loop=F,this.varKind=X,this.name=W,this.iterable=q}render(F){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(F)}optimizeNames(F,X){if(super.optimizeNames(F,X))return this.iterable=w(this.iterable,F,X),this}get names(){return E(super.names,this.iterable.names)}}class C extends g{constructor(F,X,W){super(),this.name=F,this.args=X,this.async=W}render(F){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(F)}}C.kind="func";class R extends d{render(F){return"return "+super.render(F)}}R.kind="return";class M extends g{render(F){let X="try"+super.render(F);return this.catch&&(X+=this.catch.render(F)),this.finally&&(X+=this.finally.render(F)),X}optimizeNodes(){var F,X;return super.optimizeNodes(),(F=this.catch)===null||F===void 0||F.optimizeNodes(),(X=this.finally)===null||X===void 0||X.optimizeNodes(),this}optimizeNames(F,X){var W,q;return super.optimizeNames(F,X),(W=this.catch)===null||W===void 0||W.optimizeNames(F,X),(q=this.finally)===null||q===void 0||q.optimizeNames(F,X),this}get names(){const F=super.names;return this.catch&&E(F,this.catch.names),this.finally&&E(F,this.finally.names),F}}class N extends g{constructor(F){super(),this.error=F}render(F){return`catch(${this.error})`+super.render(F)}}N.kind="catch";class Y extends g{render(F){return"finally"+super.render(F)}}Y.kind="finally";class H{constructor(F,X={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...X,_n:X.lines?`
`:""},this._extScope=F,this._scope=new r.Scope({parent:F}),this._nodes=[new p]}toString(){return this._root.render(this.opts)}name(F){return this._scope.name(F)}scopeName(F){return this._extScope.name(F)}scopeValue(F,X){const W=this._extScope.value(F,X);return(this._values[W.prefix]||(this._values[W.prefix]=new Set)).add(W),W}getScopeValue(F,X){return this._extScope.getValue(F,X)}scopeRefs(F){return this._extScope.scopeRefs(F,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(F,X,W,q){const G=this._scope.toName(X);return W!==void 0&&q&&(this._constants[G.str]=W),this._leafNode(new a(F,G,W)),G}const(F,X,W){return this._def(r.varKinds.const,F,X,W)}let(F,X,W){return this._def(r.varKinds.let,F,X,W)}var(F,X,W){return this._def(r.varKinds.var,F,X,W)}assign(F,X,W){return this._leafNode(new o(F,X,W))}add(F,X){return this._leafNode(new c(F,t.operators.ADD,X))}code(F){return typeof F=="function"?F():F!==e.nil&&this._leafNode(new h(F)),this}object(...F){const X=["{"];for(const[W,q]of F)X.length>1&&X.push(","),X.push(W),(W!==q||this.opts.es5)&&(X.push(":"),(0,e.addCodeArg)(X,q));return X.push("}"),new e._Code(X)}if(F,X,W){if(this._blockNode(new y(F)),X&&W)this.code(X).else().code(W).endIf();else if(X)this.code(X).endIf();else if(W)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(F){return this._elseNode(new y(F))}else(){return this._elseNode(new m)}endIf(){return this._endBlockNode(y,m)}_for(F,X){return this._blockNode(F),X&&this.code(X).endFor(),this}for(F,X){return this._for(new _(F),X)}forRange(F,X,W,q,G=this.opts.es5?r.varKinds.var:r.varKinds.let){const ee=this._scope.toName(F);return this._for(new x(G,ee,X,W),()=>q(ee))}forOf(F,X,W,q=r.varKinds.const){const G=this._scope.toName(F);if(this.opts.es5){const ee=X instanceof e.Name?X:this.var("_arr",X);return this.forRange("_i",0,(0,e._)`${ee}.length`,ae=>{this.var(G,(0,e._)`${ee}[${ae}]`),W(G)})}return this._for(new A("of",q,G,X),()=>W(G))}forIn(F,X,W,q=this.opts.es5?r.varKinds.var:r.varKinds.const){if(this.opts.ownProperties)return this.forOf(F,(0,e._)`Object.keys(${X})`,W);const G=this._scope.toName(F);return this._for(new A("in",q,G,X),()=>W(G))}endFor(){return this._endBlockNode(v)}label(F){return this._leafNode(new l(F))}break(F){return this._leafNode(new u(F))}return(F){const X=new R;if(this._blockNode(X),this.code(F),X.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(R)}try(F,X,W){if(!X&&!W)throw new Error('CodeGen: "try" without "catch" and "finally"');const q=new M;if(this._blockNode(q),this.code(F),X){const G=this.name("e");this._currNode=q.catch=new N(G),X(G)}return W&&(this._currNode=q.finally=new Y,this.code(W)),this._endBlockNode(N,Y)}throw(F){return this._leafNode(new f(F))}block(F,X){return this._blockStarts.push(this._nodes.length),F&&this.code(F).endBlock(X),this}endBlock(F){const X=this._blockStarts.pop();if(X===void 0)throw new Error("CodeGen: not in self-balancing block");const W=this._nodes.length-X;if(W<0||F!==void 0&&W!==F)throw new Error(`CodeGen: wrong number of nodes: ${W} vs ${F} expected`);return this._nodes.length=X,this}func(F,X=e.nil,W,q){return this._blockNode(new C(F,X,W)),q&&this.code(q).endFunc(),this}endFunc(){return this._endBlockNode(C)}optimize(F=1){for(;F-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(F){return this._currNode.nodes.push(F),this}_blockNode(F){this._currNode.nodes.push(F),this._nodes.push(F)}_endBlockNode(F,X){const W=this._currNode;if(W instanceof F||X&&W instanceof X)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${X?`${F.kind}/${X.kind}`:F.kind}"`)}_elseNode(F){const X=this._currNode;if(!(X instanceof y))throw new Error('CodeGen: "else" without "if"');return this._currNode=X.else=F,this}get _root(){return this._nodes[0]}get _currNode(){const F=this._nodes;return F[F.length-1]}set _currNode(F){const X=this._nodes;X[X.length-1]=F}}t.CodeGen=H;function E(z,F){for(const X in F)z[X]=(z[X]||0)+(F[X]||0);return z}function k(z,F){return F instanceof e._CodeOrName?E(z,F.names):z}function w(z,F,X){if(z instanceof e.Name)return W(z);if(!q(z))return z;return new e._Code(z._items.reduce((G,ee)=>(ee instanceof e.Name&&(ee=W(ee)),ee instanceof e._Code?G.push(...ee._items):G.push(ee),G),[]));function W(G){const ee=X[G.str];return ee===void 0||F[G.str]!==1?G:(delete F[G.str],ee)}function q(G){return G instanceof e._Code&&G._items.some(ee=>ee instanceof e.Name&&F[ee.str]===1&&X[ee.str]!==void 0)}}function T(z,F){for(const X in F)z[X]=(z[X]||0)-(F[X]||0)}function L(z){return typeof z=="boolean"||typeof z=="number"||z===null?!z:(0,e._)`!${B(z)}`}t.not=L;const I=P(t.operators.AND);function U(...z){return z.reduce(I)}t.and=U;const O=P(t.operators.OR);function D(...z){return z.reduce(O)}t.or=D;function P(z){return(F,X)=>F===e.nil?X:X===e.nil?F:(0,e._)`${B(F)} ${z} ${B(X)}`}function B(z){return z instanceof e.Name?z:(0,e._)`(${z})`}})(sn);var Pt={};Object.defineProperty(Pt,"__esModule",{value:!0});Pt.checkStrictMode=Pt.getErrorPath=Pt.Type=Pt.useFunc=Pt.setEvaluated=Pt.evaluatedPropsToName=Pt.mergeEvaluated=Pt.eachItem=Pt.unescapeJsonPointer=Pt.escapeJsonPointer=Pt.escapeFragment=Pt.unescapeFragment=Pt.schemaRefOrVal=Pt.schemaHasRulesButRef=Pt.schemaHasRules=Pt.checkUnknownRules=Pt.alwaysValidSchema=Pt.toHash=void 0;const wi=sn,Y0t=w4;function X0t(t){const e={};for(const r of t)e[r]=!0;return e}Pt.toHash=X0t;function Z0t(t,e){return typeof e=="boolean"?e:Object.keys(e).length===0?!0:(yge(t,e),!vge(e,t.self.RULES.all))}Pt.alwaysValidSchema=Z0t;function yge(t,e=t.schema){const{opts:r,self:n}=t;if(!r.strictSchema||typeof e=="boolean")return;const i=n.RULES.keywords;for(const s in e)i[s]||_ge(t,`unknown keyword: "${s}"`)}Pt.checkUnknownRules=yge;function vge(t,e){if(typeof t=="boolean")return!t;for(const r in t)if(e[r])return!0;return!1}Pt.schemaHasRules=vge;function J0t(t,e){if(typeof t=="boolean")return!t;for(const r in t)if(r!=="$ref"&&e.all[r])return!0;return!1}Pt.schemaHasRulesButRef=J0t;function Q0t({topSchemaRef:t,schemaPath:e},r,n,i){if(!i){if(typeof r=="number"||typeof r=="boolean")return r;if(typeof r=="string")return(0,wi._)`${r}`}return(0,wi._)`${t}${e}${(0,wi.getProperty)(n)}`}Pt.schemaRefOrVal=Q0t;function e1t(t){return bge(decodeURIComponent(t))}Pt.unescapeFragment=e1t;function t1t(t){return encodeURIComponent(WU(t))}Pt.escapeFragment=t1t;function WU(t){return typeof t=="number"?`${t}`:t.replace(/~/g,"~0").replace(/\//g,"~1")}Pt.escapeJsonPointer=WU;function bge(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")}Pt.unescapeJsonPointer=bge;function r1t(t,e){if(Array.isArray(t))for(const r of t)e(r);else e(t)}Pt.eachItem=r1t;function qte({mergeNames:t,mergeToName:e,mergeValues:r,resultToName:n}){return(i,s,a,o)=>{const c=a===void 0?s:a instanceof wi.Name?(s instanceof wi.Name?t(i,s,a):e(i,s,a),a):s instanceof wi.Name?(e(i,a,s),s):r(s,a);return o===wi.Name&&!(c instanceof wi.Name)?n(i,c):c}}Pt.mergeEvaluated={props:qte({mergeNames:(t,e,r)=>t.if((0,wi._)`${r} !== true && ${e} !== undefined`,()=>{t.if((0,wi._)`${e} === true`,()=>t.assign(r,!0),()=>t.assign(r,(0,wi._)`${r} || {}`).code((0,wi._)`Object.assign(${r}, ${e})`))}),mergeToName:(t,e,r)=>t.if((0,wi._)`${r} !== true`,()=>{e===!0?t.assign(r,!0):(t.assign(r,(0,wi._)`${r} || {}`),KU(t,r,e))}),mergeValues:(t,e)=>t===!0?!0:{...t,...e},resultToName:wge}),items:qte({mergeNames:(t,e,r)=>t.if((0,wi._)`${r} !== true && ${e} !== undefined`,()=>t.assign(r,(0,wi._)`${e} === true ? true : ${r} > ${e} ? ${r} : ${e}`)),mergeToName:(t,e,r)=>t.if((0,wi._)`${r} !== true`,()=>t.assign(r,e===!0?!0:(0,wi._)`${r} > ${e} ? ${r} : ${e}`)),mergeValues:(t,e)=>t===!0?!0:Math.max(t,e),resultToName:(t,e)=>t.var("items",e)})};function wge(t,e){if(e===!0)return t.var("props",!0);const r=t.var("props",(0,wi._)`{}`);return e!==void 0&&KU(t,r,e),r}Pt.evaluatedPropsToName=wge;function KU(t,e,r){Object.keys(r).forEach(n=>t.assign((0,wi._)`${e}${(0,wi.getProperty)(n)}`,!0))}Pt.setEvaluated=KU;const Hte={};function n1t(t,e){return t.scopeValue("func",{ref:e,code:Hte[e.code]||(Hte[e.code]=new Y0t._Code(e.code))})}Pt.useFunc=n1t;var ON;(function(t){t[t.Num=0]="Num",t[t.Str=1]="Str"})(ON||(Pt.Type=ON={}));function i1t(t,e,r){if(t instanceof wi.Name){const n=e===ON.Num;return r?n?(0,wi._)`"[" + ${t} + "]"`:(0,wi._)`"['" + ${t} + "']"`:n?(0,wi._)`"/" + ${t}`:(0,wi._)`"/" + ${t}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return r?(0,wi.getProperty)(t).toString():"/"+WU(t)}Pt.getErrorPath=i1t;function _ge(t,e,r=t.opts.strictSchema){if(r){if(e=`strict mode: ${e}`,r===!0)throw new Error(e);t.self.logger.warn(e)}}Pt.checkStrictMode=_ge;var Sh={};Object.defineProperty(Sh,"__esModule",{value:!0});const Ya=sn,s1t={data:new Ya.Name("data"),valCxt:new Ya.Name("valCxt"),instancePath:new Ya.Name("instancePath"),parentData:new Ya.Name("parentData"),parentDataProperty:new Ya.Name("parentDataProperty"),rootData:new Ya.Name("rootData"),dynamicAnchors:new Ya.Name("dynamicAnchors"),vErrors:new Ya.Name("vErrors"),errors:new Ya.Name("errors"),this:new Ya.Name("this"),self:new Ya.Name("self"),scope:new Ya.Name("scope"),json:new Ya.Name("json"),jsonPos:new Ya.Name("jsonPos"),jsonLen:new Ya.Name("jsonLen"),jsonPart:new Ya.Name("jsonPart")};Sh.default=s1t;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.extendErrors=t.resetErrorsCount=t.reportExtraError=t.reportError=t.keyword$DataError=t.keywordError=void 0;const e=sn,r=Pt,n=Sh;t.keywordError={message:({keyword:m})=>(0,e.str)`must pass "${m}" keyword validation`},t.keyword$DataError={message:({keyword:m,schemaType:y})=>y?(0,e.str)`"${m}" keyword must be ${y} ($data)`:(0,e.str)`"${m}" keyword is invalid ($data)`};function i(m,y=t.keywordError,v,_){const{it:x}=m,{gen:A,compositeRule:C,allErrors:R}=x,M=f(m,y,v);_??(C||R)?c(A,M):l(x,(0,e._)`[${M}]`)}t.reportError=i;function s(m,y=t.keywordError,v){const{it:_}=m,{gen:x,compositeRule:A,allErrors:C}=_,R=f(m,y,v);c(x,R),A||C||l(_,n.default.vErrors)}t.reportExtraError=s;function a(m,y){m.assign(n.default.errors,y),m.if((0,e._)`${n.default.vErrors} !== null`,()=>m.if(y,()=>m.assign((0,e._)`${n.default.vErrors}.length`,y),()=>m.assign(n.default.vErrors,null)))}t.resetErrorsCount=a;function o({gen:m,keyword:y,schemaValue:v,data:_,errsCount:x,it:A}){if(x===void 0)throw new Error("ajv implementation error");const C=m.name("err");m.forRange("i",x,n.default.errors,R=>{m.const(C,(0,e._)`${n.default.vErrors}[${R}]`),m.if((0,e._)`${C}.instancePath === undefined`,()=>m.assign((0,e._)`${C}.instancePath`,(0,e.strConcat)(n.default.instancePath,A.errorPath))),m.assign((0,e._)`${C}.schemaPath`,(0,e.str)`${A.errSchemaPath}/${y}`),A.opts.verbose&&(m.assign((0,e._)`${C}.schema`,v),m.assign((0,e._)`${C}.data`,_))})}t.extendErrors=o;function c(m,y){const v=m.const("err",y);m.if((0,e._)`${n.default.vErrors} === null`,()=>m.assign(n.default.vErrors,(0,e._)`[${v}]`),(0,e._)`${n.default.vErrors}.push(${v})`),m.code((0,e._)`${n.default.errors}++`)}function l(m,y){const{gen:v,validateName:_,schemaEnv:x}=m;x.$async?v.throw((0,e._)`new ${m.ValidationError}(${y})`):(v.assign((0,e._)`${_}.errors`,y),v.return(!1))}const u={keyword:new e.Name("keyword"),schemaPath:new e.Name("schemaPath"),params:new e.Name("params"),propertyName:new e.Name("propertyName"),message:new e.Name("message"),schema:new e.Name("schema"),parentSchema:new e.Name("parentSchema")};function f(m,y,v){const{createErrors:_}=m.it;return _===!1?(0,e._)`{}`:h(m,y,v)}function h(m,y,v={}){const{gen:_,it:x}=m,A=[d(x,v),g(m,v)];return p(m,y,A),_.object(...A)}function d({errorPath:m},{instancePath:y}){const v=y?(0,e.str)`${m}${(0,r.getErrorPath)(y,r.Type.Str)}`:m;return[n.default.instancePath,(0,e.strConcat)(n.default.instancePath,v)]}function g({keyword:m,it:{errSchemaPath:y}},{schemaPath:v,parentSchema:_}){let x=_?y:(0,e.str)`${y}/${m}`;return v&&(x=(0,e.str)`${x}${(0,r.getErrorPath)(v,r.Type.Str)}`),[u.schemaPath,x]}function p(m,{params:y,message:v},_){const{keyword:x,data:A,schemaValue:C,it:R}=m,{opts:M,propertyName:N,topSchemaRef:Y,schemaPath:H}=R;_.push([u.keyword,x],[u.params,typeof y=="function"?y(m):y||(0,e._)`{}`]),M.messages&&_.push([u.message,typeof v=="function"?v(m):v]),M.verbose&&_.push([u.schema,C],[u.parentSchema,(0,e._)`${Y}${H}`],[n.default.data,A]),N&&_.push([u.propertyName,N])}})(G6);Object.defineProperty(fv,"__esModule",{value:!0});fv.boolOrEmptySchema=fv.topBoolOrEmptySchema=void 0;const a1t=G6,o1t=sn,c1t=Sh,l1t={message:"boolean schema is false"};function u1t(t){const{gen:e,schema:r,validateName:n}=t;r===!1?xge(t,!1):typeof r=="object"&&r.$async===!0?e.return(c1t.default.data):(e.assign((0,o1t._)`${n}.errors`,null),e.return(!0))}fv.topBoolOrEmptySchema=u1t;function f1t(t,e){const{gen:r,schema:n}=t;n===!1?(r.var(e,!1),xge(t)):r.var(e,!0)}fv.boolOrEmptySchema=f1t;function xge(t,e){const{gen:r,data:n}=t,i={gen:r,keyword:"false schema",data:n,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:t};(0,a1t.reportError)(i,l1t,void 0,e)}var Hs={},om={};Object.defineProperty(om,"__esModule",{value:!0});om.getRules=om.isJSONType=void 0;const h1t=["string","number","integer","boolean","null","object","array"],d1t=new Set(h1t);function p1t(t){return typeof t=="string"&&d1t.has(t)}om.isJSONType=p1t;function g1t(){const t={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...t,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},t.number,t.string,t.array,t.object],post:{rules:[]},all:{},keywords:{}}}om.getRules=g1t;var $d={};Object.defineProperty($d,"__esModule",{value:!0});$d.shouldUseRule=$d.shouldUseGroup=$d.schemaHasRulesForType=void 0;function m1t({schema:t,self:e},r){const n=e.RULES.types[r];return n&&n!==!0&&Ege(t,n)}$d.schemaHasRulesForType=m1t;function Ege(t,e){return e.rules.some(r=>Sge(t,r))}$d.shouldUseGroup=Ege;function Sge(t,e){var r;return t[e.keyword]!==void 0||((r=e.definition.implements)===null||r===void 0?void 0:r.some(n=>t[n]!==void 0))}$d.shouldUseRule=Sge;Object.defineProperty(Hs,"__esModule",{value:!0});Hs.reportTypeError=Hs.checkDataTypes=Hs.checkDataType=Hs.coerceAndCheckDataType=Hs.getJSONTypes=Hs.getSchemaTypes=Hs.DataType=void 0;const y1t=om,v1t=$d,b1t=G6,Lr=sn,Age=Pt;var Sy;(function(t){t[t.Correct=0]="Correct",t[t.Wrong=1]="Wrong"})(Sy||(Hs.DataType=Sy={}));function w1t(t){const e=Tge(t.type);if(e.includes("null")){if(t.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!e.length&&t.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');t.nullable===!0&&e.push("null")}return e}Hs.getSchemaTypes=w1t;function Tge(t){const e=Array.isArray(t)?t:t?[t]:[];if(e.every(y1t.isJSONType))return e;throw new Error("type must be JSONType or JSONType[]: "+e.join(","))}Hs.getJSONTypes=Tge;function _1t(t,e){const{gen:r,data:n,opts:i}=t,s=x1t(e,i.coerceTypes),a=e.length>0&&!(s.length===0&&e.length===1&&(0,v1t.schemaHasRulesForType)(t,e[0]));if(a){const o=GU(e,n,i.strictNumbers,Sy.Wrong);r.if(o,()=>{s.length?E1t(t,e,s):YU(t)})}return a}Hs.coerceAndCheckDataType=_1t;const kge=new Set(["string","number","integer","boolean","null"]);function x1t(t,e){return e?t.filter(r=>kge.has(r)||e==="array"&&r==="array"):[]}function E1t(t,e,r){const{gen:n,data:i,opts:s}=t,a=n.let("dataType",(0,Lr._)`typeof ${i}`),o=n.let("coerced",(0,Lr._)`undefined`);s.coerceTypes==="array"&&n.if((0,Lr._)`${a} == 'object' && Array.isArray(${i}) && ${i}.length == 1`,()=>n.assign(i,(0,Lr._)`${i}[0]`).assign(a,(0,Lr._)`typeof ${i}`).if(GU(e,i,s.strictNumbers),()=>n.assign(o,i))),n.if((0,Lr._)`${o} !== undefined`);for(const l of r)(kge.has(l)||l==="array"&&s.coerceTypes==="array")&&c(l);n.else(),YU(t),n.endIf(),n.if((0,Lr._)`${o} !== undefined`,()=>{n.assign(i,o),S1t(t,o)});function c(l){switch(l){case"string":n.elseIf((0,Lr._)`${a} == "number" || ${a} == "boolean"`).assign(o,(0,Lr._)`"" + ${i}`).elseIf((0,Lr._)`${i} === null`).assign(o,(0,Lr._)`""`);return;case"number":n.elseIf((0,Lr._)`${a} == "boolean" || ${i} === null
              || (${a} == "string" && ${i} && ${i} == +${i})`).assign(o,(0,Lr._)`+${i}`);return;case"integer":n.elseIf((0,Lr._)`${a} === "boolean" || ${i} === null
              || (${a} === "string" && ${i} && ${i} == +${i} && !(${i} % 1))`).assign(o,(0,Lr._)`+${i}`);return;case"boolean":n.elseIf((0,Lr._)`${i} === "false" || ${i} === 0 || ${i} === null`).assign(o,!1).elseIf((0,Lr._)`${i} === "true" || ${i} === 1`).assign(o,!0);return;case"null":n.elseIf((0,Lr._)`${i} === "" || ${i} === 0 || ${i} === false`),n.assign(o,null);return;case"array":n.elseIf((0,Lr._)`${a} === "string" || ${a} === "number"
              || ${a} === "boolean" || ${i} === null`).assign(o,(0,Lr._)`[${i}]`)}}}function S1t({gen:t,parentData:e,parentDataProperty:r},n){t.if((0,Lr._)`${e} !== undefined`,()=>t.assign((0,Lr._)`${e}[${r}]`,n))}function NN(t,e,r,n=Sy.Correct){const i=n===Sy.Correct?Lr.operators.EQ:Lr.operators.NEQ;let s;switch(t){case"null":return(0,Lr._)`${e} ${i} null`;case"array":s=(0,Lr._)`Array.isArray(${e})`;break;case"object":s=(0,Lr._)`${e} && typeof ${e} == "object" && !Array.isArray(${e})`;break;case"integer":s=a((0,Lr._)`!(${e} % 1) && !isNaN(${e})`);break;case"number":s=a();break;default:return(0,Lr._)`typeof ${e} ${i} ${t}`}return n===Sy.Correct?s:(0,Lr.not)(s);function a(o=Lr.nil){return(0,Lr.and)((0,Lr._)`typeof ${e} == "number"`,o,r?(0,Lr._)`isFinite(${e})`:Lr.nil)}}Hs.checkDataType=NN;function GU(t,e,r,n){if(t.length===1)return NN(t[0],e,r,n);let i;const s=(0,Age.toHash)(t);if(s.array&&s.object){const a=(0,Lr._)`typeof ${e} != "object"`;i=s.null?a:(0,Lr._)`!${e} || ${a}`,delete s.null,delete s.array,delete s.object}else i=Lr.nil;s.number&&delete s.integer;for(const a in s)i=(0,Lr.and)(i,NN(a,e,r,n));return i}Hs.checkDataTypes=GU;const A1t={message:({schema:t})=>`must be ${t}`,params:({schema:t,schemaValue:e})=>typeof t=="string"?(0,Lr._)`{type: ${t}}`:(0,Lr._)`{type: ${e}}`};function YU(t){const e=T1t(t);(0,b1t.reportError)(e,A1t)}Hs.reportTypeError=YU;function T1t(t){const{gen:e,data:r,schema:n}=t,i=(0,Age.schemaRefOrVal)(t,n,"type");return{gen:e,keyword:"type",data:r,schema:n.type,schemaCode:i,schemaValue:i,parentSchema:n,params:{},it:t}}var CA={};Object.defineProperty(CA,"__esModule",{value:!0});CA.assignDefaults=void 0;const $2=sn,k1t=Pt;function C1t(t,e){const{properties:r,items:n}=t.schema;if(e==="object"&&r)for(const i in r)Wte(t,i,r[i].default);else e==="array"&&Array.isArray(n)&&n.forEach((i,s)=>Wte(t,s,i.default))}CA.assignDefaults=C1t;function Wte(t,e,r){const{gen:n,compositeRule:i,data:s,opts:a}=t;if(r===void 0)return;const o=(0,$2._)`${s}${(0,$2.getProperty)(e)}`;if(i){(0,k1t.checkStrictMode)(t,`default is ignored for: ${o}`);return}let c=(0,$2._)`${o} === undefined`;a.useDefaults==="empty"&&(c=(0,$2._)`${c} || ${o} === null || ${o} === ""`),n.if(c,(0,$2._)`${o} = ${(0,$2.stringify)(r)}`)}var Kf={},rn={};Object.defineProperty(rn,"__esModule",{value:!0});rn.validateUnion=rn.validateArray=rn.usePattern=rn.callValidateCode=rn.schemaProperties=rn.allSchemaProperties=rn.noPropertyInData=rn.propertyInData=rn.isOwnProperty=rn.hasPropFunc=rn.reportMissingProp=rn.checkMissingProp=rn.checkReportMissingProp=void 0;const Fi=sn,XU=Pt,z0=Sh,I1t=Pt;function R1t(t,e){const{gen:r,data:n,it:i}=t;r.if(JU(r,n,e,i.opts.ownProperties),()=>{t.setParams({missingProperty:(0,Fi._)`${e}`},!0),t.error()})}rn.checkReportMissingProp=R1t;function P1t({gen:t,data:e,it:{opts:r}},n,i){return(0,Fi.or)(...n.map(s=>(0,Fi.and)(JU(t,e,s,r.ownProperties),(0,Fi._)`${i} = ${s}`)))}rn.checkMissingProp=P1t;function B1t(t,e){t.setParams({missingProperty:e},!0),t.error()}rn.reportMissingProp=B1t;function Cge(t){return t.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,Fi._)`Object.prototype.hasOwnProperty`})}rn.hasPropFunc=Cge;function ZU(t,e,r){return(0,Fi._)`${Cge(t)}.call(${e}, ${r})`}rn.isOwnProperty=ZU;function D1t(t,e,r,n){const i=(0,Fi._)`${e}${(0,Fi.getProperty)(r)} !== undefined`;return n?(0,Fi._)`${i} && ${ZU(t,e,r)}`:i}rn.propertyInData=D1t;function JU(t,e,r,n){const i=(0,Fi._)`${e}${(0,Fi.getProperty)(r)} === undefined`;return n?(0,Fi.or)(i,(0,Fi.not)(ZU(t,e,r))):i}rn.noPropertyInData=JU;function Ige(t){return t?Object.keys(t).filter(e=>e!=="__proto__"):[]}rn.allSchemaProperties=Ige;function O1t(t,e){return Ige(e).filter(r=>!(0,XU.alwaysValidSchema)(t,e[r]))}rn.schemaProperties=O1t;function N1t({schemaCode:t,data:e,it:{gen:r,topSchemaRef:n,schemaPath:i,errorPath:s},it:a},o,c,l){const u=l?(0,Fi._)`${t}, ${e}, ${n}${i}`:e,f=[[z0.default.instancePath,(0,Fi.strConcat)(z0.default.instancePath,s)],[z0.default.parentData,a.parentData],[z0.default.parentDataProperty,a.parentDataProperty],[z0.default.rootData,z0.default.rootData]];a.opts.dynamicRef&&f.push([z0.default.dynamicAnchors,z0.default.dynamicAnchors]);const h=(0,Fi._)`${u}, ${r.object(...f)}`;return c!==Fi.nil?(0,Fi._)`${o}.call(${c}, ${h})`:(0,Fi._)`${o}(${h})`}rn.callValidateCode=N1t;const M1t=(0,Fi._)`new RegExp`;function L1t({gen:t,it:{opts:e}},r){const n=e.unicodeRegExp?"u":"",{regExp:i}=e.code,s=i(r,n);return t.scopeValue("pattern",{key:s.toString(),ref:s,code:(0,Fi._)`${i.code==="new RegExp"?M1t:(0,I1t.useFunc)(t,i)}(${r}, ${n})`})}rn.usePattern=L1t;function F1t(t){const{gen:e,data:r,keyword:n,it:i}=t,s=e.name("valid");if(i.allErrors){const o=e.let("valid",!0);return a(()=>e.assign(o,!1)),o}return e.var(s,!0),a(()=>e.break()),s;function a(o){const c=e.const("len",(0,Fi._)`${r}.length`);e.forRange("i",0,c,l=>{t.subschema({keyword:n,dataProp:l,dataPropType:XU.Type.Num},s),e.if((0,Fi.not)(s),o)})}}rn.validateArray=F1t;function $1t(t){const{gen:e,schema:r,keyword:n,it:i}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");if(r.some(c=>(0,XU.alwaysValidSchema)(i,c))&&!i.opts.unevaluated)return;const a=e.let("valid",!1),o=e.name("_valid");e.block(()=>r.forEach((c,l)=>{const u=t.subschema({keyword:n,schemaProp:l,compositeRule:!0},o);e.assign(a,(0,Fi._)`${a} || ${o}`),t.mergeValidEvaluated(u,o)||e.if((0,Fi.not)(a))})),t.result(a,()=>t.reset(),()=>t.error(!0))}rn.validateUnion=$1t;Object.defineProperty(Kf,"__esModule",{value:!0});Kf.validateKeywordUsage=Kf.validSchemaType=Kf.funcKeywordCode=Kf.macroKeywordCode=void 0;const No=sn,rg=Sh,U1t=rn,V1t=G6;function j1t(t,e){const{gen:r,keyword:n,schema:i,parentSchema:s,it:a}=t,o=e.macro.call(a.self,i,s,a),c=Rge(r,n,o);a.opts.validateSchema!==!1&&a.self.validateSchema(o,!0);const l=r.name("valid");t.subschema({schema:o,schemaPath:No.nil,errSchemaPath:`${a.errSchemaPath}/${n}`,topSchemaRef:c,compositeRule:!0},l),t.pass(l,()=>t.error(!0))}Kf.macroKeywordCode=j1t;function z1t(t,e){var r;const{gen:n,keyword:i,schema:s,parentSchema:a,$data:o,it:c}=t;H1t(c,e);const l=!o&&e.compile?e.compile.call(c.self,s,a,c):e.validate,u=Rge(n,i,l),f=n.let("valid");t.block$data(f,h),t.ok((r=e.valid)!==null&&r!==void 0?r:f);function h(){if(e.errors===!1)p(),e.modifying&&Kte(t),m(()=>t.error());else{const y=e.async?d():g();e.modifying&&Kte(t),m(()=>q1t(t,y))}}function d(){const y=n.let("ruleErrs",null);return n.try(()=>p((0,No._)`await `),v=>n.assign(f,!1).if((0,No._)`${v} instanceof ${c.ValidationError}`,()=>n.assign(y,(0,No._)`${v}.errors`),()=>n.throw(v))),y}function g(){const y=(0,No._)`${u}.errors`;return n.assign(y,null),p(No.nil),y}function p(y=e.async?(0,No._)`await `:No.nil){const v=c.opts.passContext?rg.default.this:rg.default.self,_=!("compile"in e&&!o||e.schema===!1);n.assign(f,(0,No._)`${y}${(0,U1t.callValidateCode)(t,u,v,_)}`,e.modifying)}function m(y){var v;n.if((0,No.not)((v=e.valid)!==null&&v!==void 0?v:f),y)}}Kf.funcKeywordCode=z1t;function Kte(t){const{gen:e,data:r,it:n}=t;e.if(n.parentData,()=>e.assign(r,(0,No._)`${n.parentData}[${n.parentDataProperty}]`))}function q1t(t,e){const{gen:r}=t;r.if((0,No._)`Array.isArray(${e})`,()=>{r.assign(rg.default.vErrors,(0,No._)`${rg.default.vErrors} === null ? ${e} : ${rg.default.vErrors}.concat(${e})`).assign(rg.default.errors,(0,No._)`${rg.default.vErrors}.length`),(0,V1t.extendErrors)(t)},()=>t.error())}function H1t({schemaEnv:t},e){if(e.async&&!t.$async)throw new Error("async keyword in sync schema")}function Rge(t,e,r){if(r===void 0)throw new Error(`keyword "${e}" failed to compile`);return t.scopeValue("keyword",typeof r=="function"?{ref:r}:{ref:r,code:(0,No.stringify)(r)})}function W1t(t,e,r=!1){return!e.length||e.some(n=>n==="array"?Array.isArray(t):n==="object"?t&&typeof t=="object"&&!Array.isArray(t):typeof t==n||r&&typeof t>"u")}Kf.validSchemaType=W1t;function K1t({schema:t,opts:e,self:r,errSchemaPath:n},i,s){if(Array.isArray(i.keyword)?!i.keyword.includes(s):i.keyword!==s)throw new Error("ajv implementation error");const a=i.dependencies;if(a?.some(o=>!Object.prototype.hasOwnProperty.call(t,o)))throw new Error(`parent schema must have dependencies of ${s}: ${a.join(",")}`);if(i.validateSchema&&!i.validateSchema(t[s])){const c=`keyword "${s}" value is invalid at path "${n}": `+r.errorsText(i.validateSchema.errors);if(e.validateSchema==="log")r.logger.error(c);else throw new Error(c)}}Kf.validateKeywordUsage=K1t;var R1={};Object.defineProperty(R1,"__esModule",{value:!0});R1.extendSubschemaMode=R1.extendSubschemaData=R1.getSubschema=void 0;const zf=sn,Pge=Pt;function G1t(t,{keyword:e,schemaProp:r,schema:n,schemaPath:i,errSchemaPath:s,topSchemaRef:a}){if(e!==void 0&&n!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(e!==void 0){const o=t.schema[e];return r===void 0?{schema:o,schemaPath:(0,zf._)`${t.schemaPath}${(0,zf.getProperty)(e)}`,errSchemaPath:`${t.errSchemaPath}/${e}`}:{schema:o[r],schemaPath:(0,zf._)`${t.schemaPath}${(0,zf.getProperty)(e)}${(0,zf.getProperty)(r)}`,errSchemaPath:`${t.errSchemaPath}/${e}/${(0,Pge.escapeFragment)(r)}`}}if(n!==void 0){if(i===void 0||s===void 0||a===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:n,schemaPath:i,topSchemaRef:a,errSchemaPath:s}}throw new Error('either "keyword" or "schema" must be passed')}R1.getSubschema=G1t;function Y1t(t,e,{dataProp:r,dataPropType:n,data:i,dataTypes:s,propertyName:a}){if(i!==void 0&&r!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:o}=e;if(r!==void 0){const{errorPath:l,dataPathArr:u,opts:f}=e,h=o.let("data",(0,zf._)`${e.data}${(0,zf.getProperty)(r)}`,!0);c(h),t.errorPath=(0,zf.str)`${l}${(0,Pge.getErrorPath)(r,n,f.jsPropertySyntax)}`,t.parentDataProperty=(0,zf._)`${r}`,t.dataPathArr=[...u,t.parentDataProperty]}if(i!==void 0){const l=i instanceof zf.Name?i:o.let("data",i,!0);c(l),a!==void 0&&(t.propertyName=a)}s&&(t.dataTypes=s);function c(l){t.data=l,t.dataLevel=e.dataLevel+1,t.dataTypes=[],e.definedProperties=new Set,t.parentData=e.data,t.dataNames=[...e.dataNames,l]}}R1.extendSubschemaData=Y1t;function X1t(t,{jtdDiscriminator:e,jtdMetadata:r,compositeRule:n,createErrors:i,allErrors:s}){n!==void 0&&(t.compositeRule=n),i!==void 0&&(t.createErrors=i),s!==void 0&&(t.allErrors=s),t.jtdDiscriminator=e,t.jtdMetadata=r}R1.extendSubschemaMode=X1t;var Ba={},Bge=function t(e,r){if(e===r)return!0;if(e&&r&&typeof e=="object"&&typeof r=="object"){if(e.constructor!==r.constructor)return!1;var n,i,s;if(Array.isArray(e)){if(n=e.length,n!=r.length)return!1;for(i=n;i--!==0;)if(!t(e[i],r[i]))return!1;return!0}if(e.constructor===RegExp)return e.source===r.source&&e.flags===r.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===r.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===r.toString();if(s=Object.keys(e),n=s.length,n!==Object.keys(r).length)return!1;for(i=n;i--!==0;)if(!Object.prototype.hasOwnProperty.call(r,s[i]))return!1;for(i=n;i--!==0;){var a=s[i];if(!t(e[a],r[a]))return!1}return!0}return e!==e&&r!==r},Dge={exports:{}},v1=Dge.exports=function(t,e,r){typeof e=="function"&&(r=e,e={}),r=e.cb||r;var n=typeof r=="function"?r:r.pre||function(){},i=r.post||function(){};Hx(e,n,i,t,"",t)};v1.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};v1.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};v1.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};v1.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function Hx(t,e,r,n,i,s,a,o,c,l){if(n&&typeof n=="object"&&!Array.isArray(n)){e(n,i,s,a,o,c,l);for(var u in n){var f=n[u];if(Array.isArray(f)){if(u in v1.arrayKeywords)for(var h=0;h<f.length;h++)Hx(t,e,r,f[h],i+"/"+u+"/"+h,s,i,u,n,h)}else if(u in v1.propsKeywords){if(f&&typeof f=="object")for(var d in f)Hx(t,e,r,f[d],i+"/"+u+"/"+Z1t(d),s,i,u,n,d)}else(u in v1.keywords||t.allKeys&&!(u in v1.skipKeywords))&&Hx(t,e,r,f,i+"/"+u,s,i,u,n)}r(n,i,s,a,o,c,l)}}function Z1t(t){return t.replace(/~/g,"~0").replace(/\//g,"~1")}var J1t=Dge.exports;Object.defineProperty(Ba,"__esModule",{value:!0});Ba.getSchemaRefs=Ba.resolveUrl=Ba.normalizeId=Ba._getFullPath=Ba.getFullPath=Ba.inlineRef=void 0;const Q1t=Pt,ept=Bge,tpt=J1t,rpt=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function npt(t,e=!0){return typeof t=="boolean"?!0:e===!0?!MN(t):e?Oge(t)<=e:!1}Ba.inlineRef=npt;const ipt=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function MN(t){for(const e in t){if(ipt.has(e))return!0;const r=t[e];if(Array.isArray(r)&&r.some(MN)||typeof r=="object"&&MN(r))return!0}return!1}function Oge(t){let e=0;for(const r in t){if(r==="$ref")return 1/0;if(e++,!rpt.has(r)&&(typeof t[r]=="object"&&(0,Q1t.eachItem)(t[r],n=>e+=Oge(n)),e===1/0))return 1/0}return e}function Nge(t,e="",r){r!==!1&&(e=Ay(e));const n=t.parse(e);return Mge(t,n)}Ba.getFullPath=Nge;function Mge(t,e){return t.serialize(e).split("#")[0]+"#"}Ba._getFullPath=Mge;const spt=/#\/?$/;function Ay(t){return t?t.replace(spt,""):""}Ba.normalizeId=Ay;function apt(t,e,r){return r=Ay(r),t.resolve(e,r)}Ba.resolveUrl=apt;const opt=/^[a-z_][-a-z0-9._]*$/i;function cpt(t,e){if(typeof t=="boolean")return{};const{schemaId:r,uriResolver:n}=this.opts,i=Ay(t[r]||e),s={"":i},a=Nge(n,i,!1),o={},c=new Set;return tpt(t,{allKeys:!0},(f,h,d,g)=>{if(g===void 0)return;const p=a+h;let m=s[g];typeof f[r]=="string"&&(m=y.call(this,f[r])),v.call(this,f.$anchor),v.call(this,f.$dynamicAnchor),s[h]=m;function y(_){const x=this.opts.uriResolver.resolve;if(_=Ay(m?x(m,_):_),c.has(_))throw u(_);c.add(_);let A=this.refs[_];return typeof A=="string"&&(A=this.refs[A]),typeof A=="object"?l(f,A.schema,_):_!==Ay(p)&&(_[0]==="#"?(l(f,o[_],_),o[_]=f):this.refs[_]=p),_}function v(_){if(typeof _=="string"){if(!opt.test(_))throw new Error(`invalid anchor "${_}"`);y.call(this,`#${_}`)}}}),o;function l(f,h,d){if(h!==void 0&&!ept(f,h))throw u(d)}function u(f){return new Error(`reference "${f}" resolves to more than one schema`)}}Ba.getSchemaRefs=cpt;Object.defineProperty(Lu,"__esModule",{value:!0});Lu.getData=Lu.KeywordCxt=Lu.validateFunctionCode=void 0;const Lge=fv,Gte=Hs,QU=$d,PE=Hs,lpt=CA,_3=Kf,rB=R1,jt=sn,dr=Sh,upt=Ba,Ud=Pt,Cw=G6;function fpt(t){if(Uge(t)&&(Vge(t),$ge(t))){ppt(t);return}Fge(t,()=>(0,Lge.topBoolOrEmptySchema)(t))}Lu.validateFunctionCode=fpt;function Fge({gen:t,validateName:e,schema:r,schemaEnv:n,opts:i},s){i.code.es5?t.func(e,(0,jt._)`${dr.default.data}, ${dr.default.valCxt}`,n.$async,()=>{t.code((0,jt._)`"use strict"; ${Yte(r,i)}`),dpt(t,i),t.code(s)}):t.func(e,(0,jt._)`${dr.default.data}, ${hpt(i)}`,n.$async,()=>t.code(Yte(r,i)).code(s))}function hpt(t){return(0,jt._)`{${dr.default.instancePath}="", ${dr.default.parentData}, ${dr.default.parentDataProperty}, ${dr.default.rootData}=${dr.default.data}${t.dynamicRef?(0,jt._)`, ${dr.default.dynamicAnchors}={}`:jt.nil}}={}`}function dpt(t,e){t.if(dr.default.valCxt,()=>{t.var(dr.default.instancePath,(0,jt._)`${dr.default.valCxt}.${dr.default.instancePath}`),t.var(dr.default.parentData,(0,jt._)`${dr.default.valCxt}.${dr.default.parentData}`),t.var(dr.default.parentDataProperty,(0,jt._)`${dr.default.valCxt}.${dr.default.parentDataProperty}`),t.var(dr.default.rootData,(0,jt._)`${dr.default.valCxt}.${dr.default.rootData}`),e.dynamicRef&&t.var(dr.default.dynamicAnchors,(0,jt._)`${dr.default.valCxt}.${dr.default.dynamicAnchors}`)},()=>{t.var(dr.default.instancePath,(0,jt._)`""`),t.var(dr.default.parentData,(0,jt._)`undefined`),t.var(dr.default.parentDataProperty,(0,jt._)`undefined`),t.var(dr.default.rootData,dr.default.data),e.dynamicRef&&t.var(dr.default.dynamicAnchors,(0,jt._)`{}`)})}function ppt(t){const{schema:e,opts:r,gen:n}=t;Fge(t,()=>{r.$comment&&e.$comment&&zge(t),bpt(t),n.let(dr.default.vErrors,null),n.let(dr.default.errors,0),r.unevaluated&&gpt(t),jge(t),xpt(t)})}function gpt(t){const{gen:e,validateName:r}=t;t.evaluated=e.const("evaluated",(0,jt._)`${r}.evaluated`),e.if((0,jt._)`${t.evaluated}.dynamicProps`,()=>e.assign((0,jt._)`${t.evaluated}.props`,(0,jt._)`undefined`)),e.if((0,jt._)`${t.evaluated}.dynamicItems`,()=>e.assign((0,jt._)`${t.evaluated}.items`,(0,jt._)`undefined`))}function Yte(t,e){const r=typeof t=="object"&&t[e.schemaId];return r&&(e.code.source||e.code.process)?(0,jt._)`/*# sourceURL=${r} */`:jt.nil}function mpt(t,e){if(Uge(t)&&(Vge(t),$ge(t))){ypt(t,e);return}(0,Lge.boolOrEmptySchema)(t,e)}function $ge({schema:t,self:e}){if(typeof t=="boolean")return!t;for(const r in t)if(e.RULES.all[r])return!0;return!1}function Uge(t){return typeof t.schema!="boolean"}function ypt(t,e){const{schema:r,gen:n,opts:i}=t;i.$comment&&r.$comment&&zge(t),wpt(t),_pt(t);const s=n.const("_errs",dr.default.errors);jge(t,s),n.var(e,(0,jt._)`${s} === ${dr.default.errors}`)}function Vge(t){(0,Ud.checkUnknownRules)(t),vpt(t)}function jge(t,e){if(t.opts.jtd)return Xte(t,[],!1,e);const r=(0,Gte.getSchemaTypes)(t.schema),n=(0,Gte.coerceAndCheckDataType)(t,r);Xte(t,r,!n,e)}function vpt(t){const{schema:e,errSchemaPath:r,opts:n,self:i}=t;e.$ref&&n.ignoreKeywordsWithRef&&(0,Ud.schemaHasRulesButRef)(e,i.RULES)&&i.logger.warn(`$ref: keywords ignored in schema at path "${r}"`)}function bpt(t){const{schema:e,opts:r}=t;e.default!==void 0&&r.useDefaults&&r.strictSchema&&(0,Ud.checkStrictMode)(t,"default is ignored in the schema root")}function wpt(t){const e=t.schema[t.opts.schemaId];e&&(t.baseId=(0,upt.resolveUrl)(t.opts.uriResolver,t.baseId,e))}function _pt(t){if(t.schema.$async&&!t.schemaEnv.$async)throw new Error("async schema in sync schema")}function zge({gen:t,schemaEnv:e,schema:r,errSchemaPath:n,opts:i}){const s=r.$comment;if(i.$comment===!0)t.code((0,jt._)`${dr.default.self}.logger.log(${s})`);else if(typeof i.$comment=="function"){const a=(0,jt.str)`${n}/$comment`,o=t.scopeValue("root",{ref:e.root});t.code((0,jt._)`${dr.default.self}.opts.$comment(${s}, ${a}, ${o}.schema)`)}}function xpt(t){const{gen:e,schemaEnv:r,validateName:n,ValidationError:i,opts:s}=t;r.$async?e.if((0,jt._)`${dr.default.errors} === 0`,()=>e.return(dr.default.data),()=>e.throw((0,jt._)`new ${i}(${dr.default.vErrors})`)):(e.assign((0,jt._)`${n}.errors`,dr.default.vErrors),s.unevaluated&&Ept(t),e.return((0,jt._)`${dr.default.errors} === 0`))}function Ept({gen:t,evaluated:e,props:r,items:n}){r instanceof jt.Name&&t.assign((0,jt._)`${e}.props`,r),n instanceof jt.Name&&t.assign((0,jt._)`${e}.items`,n)}function Xte(t,e,r,n){const{gen:i,schema:s,data:a,allErrors:o,opts:c,self:l}=t,{RULES:u}=l;if(s.$ref&&(c.ignoreKeywordsWithRef||!(0,Ud.schemaHasRulesButRef)(s,u))){i.block(()=>Wge(t,"$ref",u.all.$ref.definition));return}c.jtd||Spt(t,e),i.block(()=>{for(const h of u.rules)f(h);f(u.post)});function f(h){(0,QU.shouldUseGroup)(s,h)&&(h.type?(i.if((0,PE.checkDataType)(h.type,a,c.strictNumbers)),Zte(t,h),e.length===1&&e[0]===h.type&&r&&(i.else(),(0,PE.reportTypeError)(t)),i.endIf()):Zte(t,h),o||i.if((0,jt._)`${dr.default.errors} === ${n||0}`))}}function Zte(t,e){const{gen:r,schema:n,opts:{useDefaults:i}}=t;i&&(0,lpt.assignDefaults)(t,e.type),r.block(()=>{for(const s of e.rules)(0,QU.shouldUseRule)(n,s)&&Wge(t,s.keyword,s.definition,e.type)})}function Spt(t,e){t.schemaEnv.meta||!t.opts.strictTypes||(Apt(t,e),t.opts.allowUnionTypes||Tpt(t,e),kpt(t,t.dataTypes))}function Apt(t,e){if(e.length){if(!t.dataTypes.length){t.dataTypes=e;return}e.forEach(r=>{qge(t.dataTypes,r)||eV(t,`type "${r}" not allowed by context "${t.dataTypes.join(",")}"`)}),Ipt(t,e)}}function Tpt(t,e){e.length>1&&!(e.length===2&&e.includes("null"))&&eV(t,"use allowUnionTypes to allow union type keyword")}function kpt(t,e){const r=t.self.RULES.all;for(const n in r){const i=r[n];if(typeof i=="object"&&(0,QU.shouldUseRule)(t.schema,i)){const{type:s}=i.definition;s.length&&!s.some(a=>Cpt(e,a))&&eV(t,`missing type "${s.join(",")}" for keyword "${n}"`)}}}function Cpt(t,e){return t.includes(e)||e==="number"&&t.includes("integer")}function qge(t,e){return t.includes(e)||e==="integer"&&t.includes("number")}function Ipt(t,e){const r=[];for(const n of t.dataTypes)qge(e,n)?r.push(n):e.includes("integer")&&n==="number"&&r.push("integer");t.dataTypes=r}function eV(t,e){const r=t.schemaEnv.baseId+t.errSchemaPath;e+=` at "${r}" (strictTypes)`,(0,Ud.checkStrictMode)(t,e,t.opts.strictTypes)}class Hge{constructor(e,r,n){if((0,_3.validateKeywordUsage)(e,r,n),this.gen=e.gen,this.allErrors=e.allErrors,this.keyword=n,this.data=e.data,this.schema=e.schema[n],this.$data=r.$data&&e.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,Ud.schemaRefOrVal)(e,this.schema,n,this.$data),this.schemaType=r.schemaType,this.parentSchema=e.schema,this.params={},this.it=e,this.def=r,this.$data)this.schemaCode=e.gen.const("vSchema",Kge(this.$data,e));else if(this.schemaCode=this.schemaValue,!(0,_3.validSchemaType)(this.schema,r.schemaType,r.allowUndefined))throw new Error(`${n} value must be ${JSON.stringify(r.schemaType)}`);("code"in r?r.trackErrors:r.errors!==!1)&&(this.errsCount=e.gen.const("_errs",dr.default.errors))}result(e,r,n){this.failResult((0,jt.not)(e),r,n)}failResult(e,r,n){this.gen.if(e),n?n():this.error(),r?(this.gen.else(),r(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(e,r){this.failResult((0,jt.not)(e),void 0,r)}fail(e){if(e===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(e),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(e){if(!this.$data)return this.fail(e);const{schemaCode:r}=this;this.fail((0,jt._)`${r} !== undefined && (${(0,jt.or)(this.invalid$data(),e)})`)}error(e,r,n){if(r){this.setParams(r),this._error(e,n),this.setParams({});return}this._error(e,n)}_error(e,r){(e?Cw.reportExtraError:Cw.reportError)(this,this.def.error,r)}$dataError(){(0,Cw.reportError)(this,this.def.$dataError||Cw.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,Cw.resetErrorsCount)(this.gen,this.errsCount)}ok(e){this.allErrors||this.gen.if(e)}setParams(e,r){r?Object.assign(this.params,e):this.params=e}block$data(e,r,n=jt.nil){this.gen.block(()=>{this.check$data(e,n),r()})}check$data(e=jt.nil,r=jt.nil){if(!this.$data)return;const{gen:n,schemaCode:i,schemaType:s,def:a}=this;n.if((0,jt.or)((0,jt._)`${i} === undefined`,r)),e!==jt.nil&&n.assign(e,!0),(s.length||a.validateSchema)&&(n.elseIf(this.invalid$data()),this.$dataError(),e!==jt.nil&&n.assign(e,!1)),n.else()}invalid$data(){const{gen:e,schemaCode:r,schemaType:n,def:i,it:s}=this;return(0,jt.or)(a(),o());function a(){if(n.length){if(!(r instanceof jt.Name))throw new Error("ajv implementation error");const c=Array.isArray(n)?n:[n];return(0,jt._)`${(0,PE.checkDataTypes)(c,r,s.opts.strictNumbers,PE.DataType.Wrong)}`}return jt.nil}function o(){if(i.validateSchema){const c=e.scopeValue("validate$data",{ref:i.validateSchema});return(0,jt._)`!${c}(${r})`}return jt.nil}}subschema(e,r){const n=(0,rB.getSubschema)(this.it,e);(0,rB.extendSubschemaData)(n,this.it,e),(0,rB.extendSubschemaMode)(n,e);const i={...this.it,...n,items:void 0,props:void 0};return mpt(i,r),i}mergeEvaluated(e,r){const{it:n,gen:i}=this;n.opts.unevaluated&&(n.props!==!0&&e.props!==void 0&&(n.props=Ud.mergeEvaluated.props(i,e.props,n.props,r)),n.items!==!0&&e.items!==void 0&&(n.items=Ud.mergeEvaluated.items(i,e.items,n.items,r)))}mergeValidEvaluated(e,r){const{it:n,gen:i}=this;if(n.opts.unevaluated&&(n.props!==!0||n.items!==!0))return i.if(r,()=>this.mergeEvaluated(e,jt.Name)),!0}}Lu.KeywordCxt=Hge;function Wge(t,e,r,n){const i=new Hge(t,r,e);"code"in r?r.code(i,n):i.$data&&r.validate?(0,_3.funcKeywordCode)(i,r):"macro"in r?(0,_3.macroKeywordCode)(i,r):(r.compile||r.validate)&&(0,_3.funcKeywordCode)(i,r)}const Rpt=/^\/(?:[^~]|~0|~1)*$/,Ppt=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function Kge(t,{dataLevel:e,dataNames:r,dataPathArr:n}){let i,s;if(t==="")return dr.default.rootData;if(t[0]==="/"){if(!Rpt.test(t))throw new Error(`Invalid JSON-pointer: ${t}`);i=t,s=dr.default.rootData}else{const l=Ppt.exec(t);if(!l)throw new Error(`Invalid JSON-pointer: ${t}`);const u=+l[1];if(i=l[2],i==="#"){if(u>=e)throw new Error(c("property/index",u));return n[e-u]}if(u>e)throw new Error(c("data",u));if(s=r[e-u],!i)return s}let a=s;const o=i.split("/");for(const l of o)l&&(s=(0,jt._)`${s}${(0,jt.getProperty)((0,Ud.unescapeJsonPointer)(l))}`,a=(0,jt._)`${a} && ${s}`);return a;function c(l,u){return`Cannot access ${l} ${u} levels up, current level is ${e}`}}Lu.getData=Kge;var Y6={};Object.defineProperty(Y6,"__esModule",{value:!0});class Bpt extends Error{constructor(e){super("validation failed"),this.errors=e,this.ajv=this.validation=!0}}Y6.default=Bpt;var wb={};Object.defineProperty(wb,"__esModule",{value:!0});const nB=Ba;class Dpt extends Error{constructor(e,r,n,i){super(i||`can't resolve reference ${n} from id ${r}`),this.missingRef=(0,nB.resolveUrl)(e,r,n),this.missingSchema=(0,nB.normalizeId)((0,nB.getFullPath)(e,this.missingRef))}}wb.default=Dpt;var mc={};Object.defineProperty(mc,"__esModule",{value:!0});mc.resolveSchema=mc.getCompilingSchema=mc.resolveRef=mc.compileSchema=mc.SchemaEnv=void 0;const lu=sn,Opt=Y6,Vp=Sh,Tu=Ba,Jte=Pt,Npt=Lu;class IA{constructor(e){var r;this.refs={},this.dynamicAnchors={};let n;typeof e.schema=="object"&&(n=e.schema),this.schema=e.schema,this.schemaId=e.schemaId,this.root=e.root||this,this.baseId=(r=e.baseId)!==null&&r!==void 0?r:(0,Tu.normalizeId)(n?.[e.schemaId||"$id"]),this.schemaPath=e.schemaPath,this.localRefs=e.localRefs,this.meta=e.meta,this.$async=n?.$async,this.refs={}}}mc.SchemaEnv=IA;function tV(t){const e=Gge.call(this,t);if(e)return e;const r=(0,Tu.getFullPath)(this.opts.uriResolver,t.root.baseId),{es5:n,lines:i}=this.opts.code,{ownProperties:s}=this.opts,a=new lu.CodeGen(this.scope,{es5:n,lines:i,ownProperties:s});let o;t.$async&&(o=a.scopeValue("Error",{ref:Opt.default,code:(0,lu._)`require("ajv/dist/runtime/validation_error").default`}));const c=a.scopeName("validate");t.validateName=c;const l={gen:a,allErrors:this.opts.allErrors,data:Vp.default.data,parentData:Vp.default.parentData,parentDataProperty:Vp.default.parentDataProperty,dataNames:[Vp.default.data],dataPathArr:[lu.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:a.scopeValue("schema",this.opts.code.source===!0?{ref:t.schema,code:(0,lu.stringify)(t.schema)}:{ref:t.schema}),validateName:c,ValidationError:o,schema:t.schema,schemaEnv:t,rootId:r,baseId:t.baseId||r,schemaPath:lu.nil,errSchemaPath:t.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,lu._)`""`,opts:this.opts,self:this};let u;try{this._compilations.add(t),(0,Npt.validateFunctionCode)(l),a.optimize(this.opts.code.optimize);const f=a.toString();u=`${a.scopeRefs(Vp.default.scope)}return ${f}`,this.opts.code.process&&(u=this.opts.code.process(u,t));const d=new Function(`${Vp.default.self}`,`${Vp.default.scope}`,u)(this,this.scope.get());if(this.scope.value(c,{ref:d}),d.errors=null,d.schema=t.schema,d.schemaEnv=t,t.$async&&(d.$async=!0),this.opts.code.source===!0&&(d.source={validateName:c,validateCode:f,scopeValues:a._values}),this.opts.unevaluated){const{props:g,items:p}=l;d.evaluated={props:g instanceof lu.Name?void 0:g,items:p instanceof lu.Name?void 0:p,dynamicProps:g instanceof lu.Name,dynamicItems:p instanceof lu.Name},d.source&&(d.source.evaluated=(0,lu.stringify)(d.evaluated))}return t.validate=d,t}catch(f){throw delete t.validate,delete t.validateName,u&&this.logger.error("Error compiling schema, function code:",u),f}finally{this._compilations.delete(t)}}mc.compileSchema=tV;function Mpt(t,e,r){var n;r=(0,Tu.resolveUrl)(this.opts.uriResolver,e,r);const i=t.refs[r];if(i)return i;let s=$pt.call(this,t,r);if(s===void 0){const a=(n=t.localRefs)===null||n===void 0?void 0:n[r],{schemaId:o}=this.opts;a&&(s=new IA({schema:a,schemaId:o,root:t,baseId:e}))}if(s!==void 0)return t.refs[r]=Lpt.call(this,s)}mc.resolveRef=Mpt;function Lpt(t){return(0,Tu.inlineRef)(t.schema,this.opts.inlineRefs)?t.schema:t.validate?t:tV.call(this,t)}function Gge(t){for(const e of this._compilations)if(Fpt(e,t))return e}mc.getCompilingSchema=Gge;function Fpt(t,e){return t.schema===e.schema&&t.root===e.root&&t.baseId===e.baseId}function $pt(t,e){let r;for(;typeof(r=this.refs[e])=="string";)e=r;return r||this.schemas[e]||RA.call(this,t,e)}function RA(t,e){const r=this.opts.uriResolver.parse(e),n=(0,Tu._getFullPath)(this.opts.uriResolver,r);let i=(0,Tu.getFullPath)(this.opts.uriResolver,t.baseId,void 0);if(Object.keys(t.schema).length>0&&n===i)return iB.call(this,r,t);const s=(0,Tu.normalizeId)(n),a=this.refs[s]||this.schemas[s];if(typeof a=="string"){const o=RA.call(this,t,a);return typeof o?.schema!="object"?void 0:iB.call(this,r,o)}if(typeof a?.schema=="object"){if(a.validate||tV.call(this,a),s===(0,Tu.normalizeId)(e)){const{schema:o}=a,{schemaId:c}=this.opts,l=o[c];return l&&(i=(0,Tu.resolveUrl)(this.opts.uriResolver,i,l)),new IA({schema:o,schemaId:c,root:t,baseId:i})}return iB.call(this,r,a)}}mc.resolveSchema=RA;const Upt=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function iB(t,{baseId:e,schema:r,root:n}){var i;if(((i=t.fragment)===null||i===void 0?void 0:i[0])!=="/")return;for(const o of t.fragment.slice(1).split("/")){if(typeof r=="boolean")return;const c=r[(0,Jte.unescapeFragment)(o)];if(c===void 0)return;r=c;const l=typeof r=="object"&&r[this.opts.schemaId];!Upt.has(o)&&l&&(e=(0,Tu.resolveUrl)(this.opts.uriResolver,e,l))}let s;if(typeof r!="boolean"&&r.$ref&&!(0,Jte.schemaHasRulesButRef)(r,this.RULES)){const o=(0,Tu.resolveUrl)(this.opts.uriResolver,e,r.$ref);s=RA.call(this,n,o)}const{schemaId:a}=this.opts;if(s=s||new IA({schema:r,schemaId:a,root:n,baseId:e}),s.schema!==s.root.schema)return s}const Vpt="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",jpt="Meta-schema for $data reference (JSON AnySchema extension proposal)",zpt="object",qpt=["$data"],Hpt={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},Wpt=!1,Kpt={$id:Vpt,description:jpt,type:zpt,required:qpt,properties:Hpt,additionalProperties:Wpt};var rV={},PA={exports:{}};const Gpt={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};var Ypt={HEX:Gpt};const{HEX:Xpt}=Ypt;function Yge(t){if(Zge(t,".")<3)return{host:t,isIPV4:!1};const e=t.match(/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/u)||[],[r]=e;return r?{host:Jpt(r,"."),isIPV4:!0}:{host:t,isIPV4:!1}}function LN(t,e=!1){let r="",n=!0;for(const i of t){if(Xpt[i]===void 0)return;i!=="0"&&n===!0&&(n=!1),n||(r+=i)}return e&&r.length===0&&(r="0"),r}function Zpt(t){let e=0;const r={error:!1,address:"",zone:""},n=[],i=[];let s=!1,a=!1,o=!1;function c(){if(i.length){if(s===!1){const l=LN(i);if(l!==void 0)n.push(l);else return r.error=!0,!1}i.length=0}return!0}for(let l=0;l<t.length;l++){const u=t[l];if(!(u==="["||u==="]"))if(u===":"){if(a===!0&&(o=!0),!c())break;if(e++,n.push(":"),e>7){r.error=!0;break}l-1>=0&&t[l-1]===":"&&(a=!0);continue}else if(u==="%"){if(!c())break;s=!0}else{i.push(u);continue}}return i.length&&(s?r.zone=i.join(""):o?n.push(i.join("")):n.push(LN(i))),r.address=n.join(""),r}function Xge(t,e={}){if(Zge(t,":")<2)return{host:t,isIPV6:!1};const r=Zpt(t);if(r.error)return{host:t,isIPV6:!1};{let n=r.address,i=r.address;return r.zone&&(n+="%"+r.zone,i+="%25"+r.zone),{host:n,escapedHost:i,isIPV6:!0}}}function Jpt(t,e){let r="",n=!0;const i=t.length;for(let s=0;s<i;s++){const a=t[s];a==="0"&&n?(s+1<=i&&t[s+1]===e||s+1===i)&&(r+=a,n=!1):(a===e?n=!0:n=!1,r+=a)}return r}function Zge(t,e){let r=0;for(let n=0;n<t.length;n++)t[n]===e&&r++;return r}const Qte=/^\.\.?\//u,ere=/^\/\.(?:\/|$)/u,tre=/^\/\.\.(?:\/|$)/u,Qpt=/^\/?(?:.|\n)*?(?=\/|$)/u;function egt(t){const e=[];for(;t.length;)if(t.match(Qte))t=t.replace(Qte,"");else if(t.match(ere))t=t.replace(ere,"/");else if(t.match(tre))t=t.replace(tre,"/"),e.pop();else if(t==="."||t==="..")t="";else{const r=t.match(Qpt);if(r){const n=r[0];t=t.slice(n.length),e.push(n)}else throw new Error("Unexpected dot segment condition")}return e.join("")}function tgt(t,e){const r=e!==!0?escape:unescape;return t.scheme!==void 0&&(t.scheme=r(t.scheme)),t.userinfo!==void 0&&(t.userinfo=r(t.userinfo)),t.host!==void 0&&(t.host=r(t.host)),t.path!==void 0&&(t.path=r(t.path)),t.query!==void 0&&(t.query=r(t.query)),t.fragment!==void 0&&(t.fragment=r(t.fragment)),t}function rgt(t,e){const r=[];if(t.userinfo!==void 0&&(r.push(t.userinfo),r.push("@")),t.host!==void 0){let n=unescape(t.host);const i=Yge(n);if(i.isIPV4)n=i.host;else{const s=Xge(i.host,{isIPV4:!1});s.isIPV6===!0?n=`[${s.escapedHost}]`:n=t.host}r.push(n)}return(typeof t.port=="number"||typeof t.port=="string")&&(r.push(":"),r.push(String(t.port))),r.length?r.join(""):void 0}var ngt={recomposeAuthority:rgt,normalizeComponentEncoding:tgt,removeDotSegments:egt,normalizeIPv4:Yge,normalizeIPv6:Xge,stringArrayToHexStripped:LN};const igt=/^[\da-f]{8}\b-[\da-f]{4}\b-[\da-f]{4}\b-[\da-f]{4}\b-[\da-f]{12}$/iu,sgt=/([\da-z][\d\-a-z]{0,31}):((?:[\w!$'()*+,\-.:;=@]|%[\da-f]{2})+)/iu;function Jge(t){return typeof t.secure=="boolean"?t.secure:String(t.scheme).toLowerCase()==="wss"}function Qge(t){return t.host||(t.error=t.error||"HTTP URIs must have a host."),t}function eme(t){const e=String(t.scheme).toLowerCase()==="https";return(t.port===(e?443:80)||t.port==="")&&(t.port=void 0),t.path||(t.path="/"),t}function agt(t){return t.secure=Jge(t),t.resourceName=(t.path||"/")+(t.query?"?"+t.query:""),t.path=void 0,t.query=void 0,t}function ogt(t){if((t.port===(Jge(t)?443:80)||t.port==="")&&(t.port=void 0),typeof t.secure=="boolean"&&(t.scheme=t.secure?"wss":"ws",t.secure=void 0),t.resourceName){const[e,r]=t.resourceName.split("?");t.path=e&&e!=="/"?e:void 0,t.query=r,t.resourceName=void 0}return t.fragment=void 0,t}function cgt(t,e){if(!t.path)return t.error="URN can not be parsed",t;const r=t.path.match(sgt);if(r){const n=e.scheme||t.scheme||"urn";t.nid=r[1].toLowerCase(),t.nss=r[2];const i=`${n}:${e.nid||t.nid}`,s=nV[i];t.path=void 0,s&&(t=s.parse(t,e))}else t.error=t.error||"URN can not be parsed.";return t}function lgt(t,e){const r=e.scheme||t.scheme||"urn",n=t.nid.toLowerCase(),i=`${r}:${e.nid||n}`,s=nV[i];s&&(t=s.serialize(t,e));const a=t,o=t.nss;return a.path=`${n||e.nid}:${o}`,e.skipEscape=!0,a}function ugt(t,e){const r=t;return r.uuid=r.nss,r.nss=void 0,!e.tolerant&&(!r.uuid||!igt.test(r.uuid))&&(r.error=r.error||"UUID is not valid."),r}function fgt(t){const e=t;return e.nss=(t.uuid||"").toLowerCase(),e}const tme={scheme:"http",domainHost:!0,parse:Qge,serialize:eme},hgt={scheme:"https",domainHost:tme.domainHost,parse:Qge,serialize:eme},Wx={scheme:"ws",domainHost:!0,parse:agt,serialize:ogt},dgt={scheme:"wss",domainHost:Wx.domainHost,parse:Wx.parse,serialize:Wx.serialize},pgt={scheme:"urn",parse:cgt,serialize:lgt,skipNormalize:!0},ggt={scheme:"urn:uuid",parse:ugt,serialize:fgt,skipNormalize:!0},nV={http:tme,https:hgt,ws:Wx,wss:dgt,urn:pgt,"urn:uuid":ggt};var mgt=nV;const{normalizeIPv6:ygt,normalizeIPv4:vgt,removeDotSegments:Kw,recomposeAuthority:bgt,normalizeComponentEncoding:_5}=ngt,iV=mgt;function wgt(t,e){return typeof t=="string"?t=Gf(Jd(t,e),e):typeof t=="object"&&(t=Jd(Gf(t,e),e)),t}function _gt(t,e,r){const n=Object.assign({scheme:"null"},r),i=rme(Jd(t,n),Jd(e,n),n,!0);return Gf(i,{...n,skipEscape:!0})}function rme(t,e,r,n){const i={};return n||(t=Jd(Gf(t,r),r),e=Jd(Gf(e,r),r)),r=r||{},!r.tolerant&&e.scheme?(i.scheme=e.scheme,i.userinfo=e.userinfo,i.host=e.host,i.port=e.port,i.path=Kw(e.path||""),i.query=e.query):(e.userinfo!==void 0||e.host!==void 0||e.port!==void 0?(i.userinfo=e.userinfo,i.host=e.host,i.port=e.port,i.path=Kw(e.path||""),i.query=e.query):(e.path?(e.path.charAt(0)==="/"?i.path=Kw(e.path):((t.userinfo!==void 0||t.host!==void 0||t.port!==void 0)&&!t.path?i.path="/"+e.path:t.path?i.path=t.path.slice(0,t.path.lastIndexOf("/")+1)+e.path:i.path=e.path,i.path=Kw(i.path)),i.query=e.query):(i.path=t.path,e.query!==void 0?i.query=e.query:i.query=t.query),i.userinfo=t.userinfo,i.host=t.host,i.port=t.port),i.scheme=t.scheme),i.fragment=e.fragment,i}function xgt(t,e,r){return typeof t=="string"?(t=unescape(t),t=Gf(_5(Jd(t,r),!0),{...r,skipEscape:!0})):typeof t=="object"&&(t=Gf(_5(t,!0),{...r,skipEscape:!0})),typeof e=="string"?(e=unescape(e),e=Gf(_5(Jd(e,r),!0),{...r,skipEscape:!0})):typeof e=="object"&&(e=Gf(_5(e,!0),{...r,skipEscape:!0})),t.toLowerCase()===e.toLowerCase()}function Gf(t,e){const r={host:t.host,scheme:t.scheme,userinfo:t.userinfo,port:t.port,path:t.path,query:t.query,nid:t.nid,nss:t.nss,uuid:t.uuid,fragment:t.fragment,reference:t.reference,resourceName:t.resourceName,secure:t.secure,error:""},n=Object.assign({},e),i=[],s=iV[(n.scheme||r.scheme||"").toLowerCase()];s&&s.serialize&&s.serialize(r,n),r.path!==void 0&&(n.skipEscape?r.path=unescape(r.path):(r.path=escape(r.path),r.scheme!==void 0&&(r.path=r.path.split("%3A").join(":")))),n.reference!=="suffix"&&r.scheme&&i.push(r.scheme,":");const a=bgt(r,n);if(a!==void 0&&(n.reference!=="suffix"&&i.push("//"),i.push(a),r.path&&r.path.charAt(0)!=="/"&&i.push("/")),r.path!==void 0){let o=r.path;!n.absolutePath&&(!s||!s.absolutePath)&&(o=Kw(o)),a===void 0&&(o=o.replace(/^\/\//u,"/%2F")),i.push(o)}return r.query!==void 0&&i.push("?",r.query),r.fragment!==void 0&&i.push("#",r.fragment),i.join("")}const Egt=Array.from({length:127},(t,e)=>/[^!"$&'()*+,\-.;=_`a-z{}~]/u.test(String.fromCharCode(e)));function Sgt(t){let e=0;for(let r=0,n=t.length;r<n;++r)if(e=t.charCodeAt(r),e>126||Egt[e])return!0;return!1}const Agt=/^(?:([^#/:?]+):)?(?:\/\/((?:([^#/?@]*)@)?(\[[^#/?\]]+\]|[^#/:?]*)(?::(\d*))?))?([^#?]*)(?:\?([^#]*))?(?:#((?:.|[\n\r])*))?/u;function Jd(t,e){const r=Object.assign({},e),n={scheme:void 0,userinfo:void 0,host:"",port:void 0,path:"",query:void 0,fragment:void 0},i=t.indexOf("%")!==-1;let s=!1;r.reference==="suffix"&&(t=(r.scheme?r.scheme+":":"")+"//"+t);const a=t.match(Agt);if(a){if(n.scheme=a[1],n.userinfo=a[3],n.host=a[4],n.port=parseInt(a[5],10),n.path=a[6]||"",n.query=a[7],n.fragment=a[8],isNaN(n.port)&&(n.port=a[5]),n.host){const c=vgt(n.host);if(c.isIPV4===!1){const l=ygt(c.host,{isIPV4:!1});n.host=l.host.toLowerCase(),s=l.isIPV6}else n.host=c.host,s=!0}n.scheme===void 0&&n.userinfo===void 0&&n.host===void 0&&n.port===void 0&&!n.path&&n.query===void 0?n.reference="same-document":n.scheme===void 0?n.reference="relative":n.fragment===void 0?n.reference="absolute":n.reference="uri",r.reference&&r.reference!=="suffix"&&r.reference!==n.reference&&(n.error=n.error||"URI is not a "+r.reference+" reference.");const o=iV[(r.scheme||n.scheme||"").toLowerCase()];if(!r.unicodeSupport&&(!o||!o.unicodeSupport)&&n.host&&(r.domainHost||o&&o.domainHost)&&s===!1&&Sgt(n.host))try{n.host=URL.domainToASCII(n.host.toLowerCase())}catch(c){n.error=n.error||"Host's domain name can not be converted to ASCII: "+c}(!o||o&&!o.skipNormalize)&&(i&&n.scheme!==void 0&&(n.scheme=unescape(n.scheme)),i&&n.host!==void 0&&(n.host=unescape(n.host)),n.path!==void 0&&n.path.length&&(n.path=escape(unescape(n.path))),n.fragment!==void 0&&n.fragment.length&&(n.fragment=encodeURI(decodeURIComponent(n.fragment)))),o&&o.parse&&o.parse(n,r)}else n.error=n.error||"URI can not be parsed.";return n}const sV={SCHEMES:iV,normalize:wgt,resolve:_gt,resolveComponents:rme,equal:xgt,serialize:Gf,parse:Jd};PA.exports=sV;PA.exports.default=sV;PA.exports.fastUri=sV;var Tgt=PA.exports;Object.defineProperty(rV,"__esModule",{value:!0});const nme=Tgt;nme.code='require("ajv/dist/runtime/uri").default';rV.default=nme;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=void 0;var e=Lu;Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return e.KeywordCxt}});var r=sn;Object.defineProperty(t,"_",{enumerable:!0,get:function(){return r._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return r.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return r.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return r.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return r.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return r.CodeGen}});const n=Y6,i=wb,s=om,a=mc,o=sn,c=Ba,l=Hs,u=Pt,f=Kpt,h=rV,d=(D,P)=>new RegExp(D,P);d.code="new RegExp";const g=["removeAdditional","useDefaults","coerceTypes"],p=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),m={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},y={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},v=200;function _(D){var P,B,z,F,X,W,q,G,ee,ae,te,K,re,V,oe,he,ne,ie,ce,ve,Ee,ge,Pe,Ce,Ie;const $e=D.strict,se=(P=D.code)===null||P===void 0?void 0:P.optimize,Z=se===!0||se===void 0?1:se||0,J=(z=(B=D.code)===null||B===void 0?void 0:B.regExp)!==null&&z!==void 0?z:d,de=(F=D.uriResolver)!==null&&F!==void 0?F:h.default;return{strictSchema:(W=(X=D.strictSchema)!==null&&X!==void 0?X:$e)!==null&&W!==void 0?W:!0,strictNumbers:(G=(q=D.strictNumbers)!==null&&q!==void 0?q:$e)!==null&&G!==void 0?G:!0,strictTypes:(ae=(ee=D.strictTypes)!==null&&ee!==void 0?ee:$e)!==null&&ae!==void 0?ae:"log",strictTuples:(K=(te=D.strictTuples)!==null&&te!==void 0?te:$e)!==null&&K!==void 0?K:"log",strictRequired:(V=(re=D.strictRequired)!==null&&re!==void 0?re:$e)!==null&&V!==void 0?V:!1,code:D.code?{...D.code,optimize:Z,regExp:J}:{optimize:Z,regExp:J},loopRequired:(oe=D.loopRequired)!==null&&oe!==void 0?oe:v,loopEnum:(he=D.loopEnum)!==null&&he!==void 0?he:v,meta:(ne=D.meta)!==null&&ne!==void 0?ne:!0,messages:(ie=D.messages)!==null&&ie!==void 0?ie:!0,inlineRefs:(ce=D.inlineRefs)!==null&&ce!==void 0?ce:!0,schemaId:(ve=D.schemaId)!==null&&ve!==void 0?ve:"$id",addUsedSchema:(Ee=D.addUsedSchema)!==null&&Ee!==void 0?Ee:!0,validateSchema:(ge=D.validateSchema)!==null&&ge!==void 0?ge:!0,validateFormats:(Pe=D.validateFormats)!==null&&Pe!==void 0?Pe:!0,unicodeRegExp:(Ce=D.unicodeRegExp)!==null&&Ce!==void 0?Ce:!0,int32range:(Ie=D.int32range)!==null&&Ie!==void 0?Ie:!0,uriResolver:de}}class x{constructor(P={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,P=this.opts={...P,..._(P)};const{es5:B,lines:z}=this.opts.code;this.scope=new o.ValueScope({scope:{},prefixes:p,es5:B,lines:z}),this.logger=E(P.logger);const F=P.validateFormats;P.validateFormats=!1,this.RULES=(0,s.getRules)(),A.call(this,m,P,"NOT SUPPORTED"),A.call(this,y,P,"DEPRECATED","warn"),this._metaOpts=Y.call(this),P.formats&&M.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),P.keywords&&N.call(this,P.keywords),typeof P.meta=="object"&&this.addMetaSchema(P.meta),R.call(this),P.validateFormats=F}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:P,meta:B,schemaId:z}=this.opts;let F=f;z==="id"&&(F={...f},F.id=F.$id,delete F.$id),B&&P&&this.addMetaSchema(F,F[z],!1)}defaultMeta(){const{meta:P,schemaId:B}=this.opts;return this.opts.defaultMeta=typeof P=="object"?P[B]||P:void 0}validate(P,B){let z;if(typeof P=="string"){if(z=this.getSchema(P),!z)throw new Error(`no schema with key or ref "${P}"`)}else z=this.compile(P);const F=z(B);return"$async"in z||(this.errors=z.errors),F}compile(P,B){const z=this._addSchema(P,B);return z.validate||this._compileSchemaEnv(z)}compileAsync(P,B){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:z}=this.opts;return F.call(this,P,B);async function F(ae,te){await X.call(this,ae.$schema);const K=this._addSchema(ae,te);return K.validate||W.call(this,K)}async function X(ae){ae&&!this.getSchema(ae)&&await F.call(this,{$ref:ae},!0)}async function W(ae){try{return this._compileSchemaEnv(ae)}catch(te){if(!(te instanceof i.default))throw te;return q.call(this,te),await G.call(this,te.missingSchema),W.call(this,ae)}}function q({missingSchema:ae,missingRef:te}){if(this.refs[ae])throw new Error(`AnySchema ${ae} is loaded but ${te} cannot be resolved`)}async function G(ae){const te=await ee.call(this,ae);this.refs[ae]||await X.call(this,te.$schema),this.refs[ae]||this.addSchema(te,ae,B)}async function ee(ae){const te=this._loading[ae];if(te)return te;try{return await(this._loading[ae]=z(ae))}finally{delete this._loading[ae]}}}addSchema(P,B,z,F=this.opts.validateSchema){if(Array.isArray(P)){for(const W of P)this.addSchema(W,void 0,z,F);return this}let X;if(typeof P=="object"){const{schemaId:W}=this.opts;if(X=P[W],X!==void 0&&typeof X!="string")throw new Error(`schema ${W} must be string`)}return B=(0,c.normalizeId)(B||X),this._checkUnique(B),this.schemas[B]=this._addSchema(P,z,B,F,!0),this}addMetaSchema(P,B,z=this.opts.validateSchema){return this.addSchema(P,B,!0,z),this}validateSchema(P,B){if(typeof P=="boolean")return!0;let z;if(z=P.$schema,z!==void 0&&typeof z!="string")throw new Error("$schema must be a string");if(z=z||this.opts.defaultMeta||this.defaultMeta(),!z)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const F=this.validate(z,P);if(!F&&B){const X="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(X);else throw new Error(X)}return F}getSchema(P){let B;for(;typeof(B=C.call(this,P))=="string";)P=B;if(B===void 0){const{schemaId:z}=this.opts,F=new a.SchemaEnv({schema:{},schemaId:z});if(B=a.resolveSchema.call(this,F,P),!B)return;this.refs[P]=B}return B.validate||this._compileSchemaEnv(B)}removeSchema(P){if(P instanceof RegExp)return this._removeAllSchemas(this.schemas,P),this._removeAllSchemas(this.refs,P),this;switch(typeof P){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const B=C.call(this,P);return typeof B=="object"&&this._cache.delete(B.schema),delete this.schemas[P],delete this.refs[P],this}case"object":{const B=P;this._cache.delete(B);let z=P[this.opts.schemaId];return z&&(z=(0,c.normalizeId)(z),delete this.schemas[z],delete this.refs[z]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(P){for(const B of P)this.addKeyword(B);return this}addKeyword(P,B){let z;if(typeof P=="string")z=P,typeof B=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),B.keyword=z);else if(typeof P=="object"&&B===void 0){if(B=P,z=B.keyword,Array.isArray(z)&&!z.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(w.call(this,z,B),!B)return(0,u.eachItem)(z,X=>T.call(this,X)),this;I.call(this,B);const F={...B,type:(0,l.getJSONTypes)(B.type),schemaType:(0,l.getJSONTypes)(B.schemaType)};return(0,u.eachItem)(z,F.type.length===0?X=>T.call(this,X,F):X=>F.type.forEach(W=>T.call(this,X,F,W))),this}getKeyword(P){const B=this.RULES.all[P];return typeof B=="object"?B.definition:!!B}removeKeyword(P){const{RULES:B}=this;delete B.keywords[P],delete B.all[P];for(const z of B.rules){const F=z.rules.findIndex(X=>X.keyword===P);F>=0&&z.rules.splice(F,1)}return this}addFormat(P,B){return typeof B=="string"&&(B=new RegExp(B)),this.formats[P]=B,this}errorsText(P=this.errors,{separator:B=", ",dataVar:z="data"}={}){return!P||P.length===0?"No errors":P.map(F=>`${z}${F.instancePath} ${F.message}`).reduce((F,X)=>F+B+X)}$dataMetaSchema(P,B){const z=this.RULES.all;P=JSON.parse(JSON.stringify(P));for(const F of B){const X=F.split("/").slice(1);let W=P;for(const q of X)W=W[q];for(const q in z){const G=z[q];if(typeof G!="object")continue;const{$data:ee}=G.definition,ae=W[q];ee&&ae&&(W[q]=O(ae))}}return P}_removeAllSchemas(P,B){for(const z in P){const F=P[z];(!B||B.test(z))&&(typeof F=="string"?delete P[z]:F&&!F.meta&&(this._cache.delete(F.schema),delete P[z]))}}_addSchema(P,B,z,F=this.opts.validateSchema,X=this.opts.addUsedSchema){let W;const{schemaId:q}=this.opts;if(typeof P=="object")W=P[q];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof P!="boolean")throw new Error("schema must be object or boolean")}let G=this._cache.get(P);if(G!==void 0)return G;z=(0,c.normalizeId)(W||z);const ee=c.getSchemaRefs.call(this,P,z);return G=new a.SchemaEnv({schema:P,schemaId:q,meta:B,baseId:z,localRefs:ee}),this._cache.set(G.schema,G),X&&!z.startsWith("#")&&(z&&this._checkUnique(z),this.refs[z]=G),F&&this.validateSchema(P,!0),G}_checkUnique(P){if(this.schemas[P]||this.refs[P])throw new Error(`schema with key or id "${P}" already exists`)}_compileSchemaEnv(P){if(P.meta?this._compileMetaSchema(P):a.compileSchema.call(this,P),!P.validate)throw new Error("ajv implementation error");return P.validate}_compileMetaSchema(P){const B=this.opts;this.opts=this._metaOpts;try{a.compileSchema.call(this,P)}finally{this.opts=B}}}x.ValidationError=n.default,x.MissingRefError=i.default,t.default=x;function A(D,P,B,z="error"){for(const F in D){const X=F;X in P&&this.logger[z](`${B}: option ${F}. ${D[X]}`)}}function C(D){return D=(0,c.normalizeId)(D),this.schemas[D]||this.refs[D]}function R(){const D=this.opts.schemas;if(D)if(Array.isArray(D))this.addSchema(D);else for(const P in D)this.addSchema(D[P],P)}function M(){for(const D in this.opts.formats){const P=this.opts.formats[D];P&&this.addFormat(D,P)}}function N(D){if(Array.isArray(D)){this.addVocabulary(D);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const P in D){const B=D[P];B.keyword||(B.keyword=P),this.addKeyword(B)}}function Y(){const D={...this.opts};for(const P of g)delete D[P];return D}const H={log(){},warn(){},error(){}};function E(D){if(D===!1)return H;if(D===void 0)return console;if(D.log&&D.warn&&D.error)return D;throw new Error("logger must implement log, warn and error methods")}const k=/^[a-z_$][a-z0-9_$:-]*$/i;function w(D,P){const{RULES:B}=this;if((0,u.eachItem)(D,z=>{if(B.keywords[z])throw new Error(`Keyword ${z} is already defined`);if(!k.test(z))throw new Error(`Keyword ${z} has invalid name`)}),!!P&&P.$data&&!("code"in P||"validate"in P))throw new Error('$data keyword must have "code" or "validate" function')}function T(D,P,B){var z;const F=P?.post;if(B&&F)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:X}=this;let W=F?X.post:X.rules.find(({type:G})=>G===B);if(W||(W={type:B,rules:[]},X.rules.push(W)),X.keywords[D]=!0,!P)return;const q={keyword:D,definition:{...P,type:(0,l.getJSONTypes)(P.type),schemaType:(0,l.getJSONTypes)(P.schemaType)}};P.before?L.call(this,W,q,P.before):W.rules.push(q),X.all[D]=q,(z=P.implements)===null||z===void 0||z.forEach(G=>this.addKeyword(G))}function L(D,P,B){const z=D.rules.findIndex(F=>F.keyword===B);z>=0?D.rules.splice(z,0,P):(D.rules.push(P),this.logger.warn(`rule ${B} is not defined`))}function I(D){let{metaSchema:P}=D;P!==void 0&&(D.$data&&this.opts.$data&&(P=O(P)),D.validateSchema=this.compile(P,!0))}const U={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function O(D){return{anyOf:[D,U]}}})(mge);var aV={},oV={},cV={};Object.defineProperty(cV,"__esModule",{value:!0});const kgt={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};cV.default=kgt;var cm={};Object.defineProperty(cm,"__esModule",{value:!0});cm.callRef=cm.getValidate=void 0;const Cgt=wb,rre=rn,uc=sn,U2=Sh,nre=mc,x5=Pt,Igt={keyword:"$ref",schemaType:"string",code(t){const{gen:e,schema:r,it:n}=t,{baseId:i,schemaEnv:s,validateName:a,opts:o,self:c}=n,{root:l}=s;if((r==="#"||r==="#/")&&i===l.baseId)return f();const u=nre.resolveRef.call(c,l,i,r);if(u===void 0)throw new Cgt.default(n.opts.uriResolver,i,r);if(u instanceof nre.SchemaEnv)return h(u);return d(u);function f(){if(s===l)return Kx(t,a,s,s.$async);const g=e.scopeValue("root",{ref:l});return Kx(t,(0,uc._)`${g}.validate`,l,l.$async)}function h(g){const p=ime(t,g);Kx(t,p,g,g.$async)}function d(g){const p=e.scopeValue("schema",o.code.source===!0?{ref:g,code:(0,uc.stringify)(g)}:{ref:g}),m=e.name("valid"),y=t.subschema({schema:g,dataTypes:[],schemaPath:uc.nil,topSchemaRef:p,errSchemaPath:r},m);t.mergeEvaluated(y),t.ok(m)}}};function ime(t,e){const{gen:r}=t;return e.validate?r.scopeValue("validate",{ref:e.validate}):(0,uc._)`${r.scopeValue("wrapper",{ref:e})}.validate`}cm.getValidate=ime;function Kx(t,e,r,n){const{gen:i,it:s}=t,{allErrors:a,schemaEnv:o,opts:c}=s,l=c.passContext?U2.default.this:uc.nil;n?u():f();function u(){if(!o.$async)throw new Error("async schema referenced by sync schema");const g=i.let("valid");i.try(()=>{i.code((0,uc._)`await ${(0,rre.callValidateCode)(t,e,l)}`),d(e),a||i.assign(g,!0)},p=>{i.if((0,uc._)`!(${p} instanceof ${s.ValidationError})`,()=>i.throw(p)),h(p),a||i.assign(g,!1)}),t.ok(g)}function f(){t.result((0,rre.callValidateCode)(t,e,l),()=>d(e),()=>h(e))}function h(g){const p=(0,uc._)`${g}.errors`;i.assign(U2.default.vErrors,(0,uc._)`${U2.default.vErrors} === null ? ${p} : ${U2.default.vErrors}.concat(${p})`),i.assign(U2.default.errors,(0,uc._)`${U2.default.vErrors}.length`)}function d(g){var p;if(!s.opts.unevaluated)return;const m=(p=r?.validate)===null||p===void 0?void 0:p.evaluated;if(s.props!==!0)if(m&&!m.dynamicProps)m.props!==void 0&&(s.props=x5.mergeEvaluated.props(i,m.props,s.props));else{const y=i.var("props",(0,uc._)`${g}.evaluated.props`);s.props=x5.mergeEvaluated.props(i,y,s.props,uc.Name)}if(s.items!==!0)if(m&&!m.dynamicItems)m.items!==void 0&&(s.items=x5.mergeEvaluated.items(i,m.items,s.items));else{const y=i.var("items",(0,uc._)`${g}.evaluated.items`);s.items=x5.mergeEvaluated.items(i,y,s.items,uc.Name)}}}cm.callRef=Kx;cm.default=Igt;Object.defineProperty(oV,"__esModule",{value:!0});const Rgt=cV,Pgt=cm,Bgt=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",Rgt.default,Pgt.default];oV.default=Bgt;var lV={},uV={};Object.defineProperty(uV,"__esModule",{value:!0});const BE=sn,q0=BE.operators,DE={maximum:{okStr:"<=",ok:q0.LTE,fail:q0.GT},minimum:{okStr:">=",ok:q0.GTE,fail:q0.LT},exclusiveMaximum:{okStr:"<",ok:q0.LT,fail:q0.GTE},exclusiveMinimum:{okStr:">",ok:q0.GT,fail:q0.LTE}},Dgt={message:({keyword:t,schemaCode:e})=>(0,BE.str)`must be ${DE[t].okStr} ${e}`,params:({keyword:t,schemaCode:e})=>(0,BE._)`{comparison: ${DE[t].okStr}, limit: ${e}}`},Ogt={keyword:Object.keys(DE),type:"number",schemaType:"number",$data:!0,error:Dgt,code(t){const{keyword:e,data:r,schemaCode:n}=t;t.fail$data((0,BE._)`${r} ${DE[e].fail} ${n} || isNaN(${r})`)}};uV.default=Ogt;var fV={};Object.defineProperty(fV,"__esModule",{value:!0});const x3=sn,Ngt={message:({schemaCode:t})=>(0,x3.str)`must be multiple of ${t}`,params:({schemaCode:t})=>(0,x3._)`{multipleOf: ${t}}`},Mgt={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:Ngt,code(t){const{gen:e,data:r,schemaCode:n,it:i}=t,s=i.opts.multipleOfPrecision,a=e.let("res"),o=s?(0,x3._)`Math.abs(Math.round(${a}) - ${a}) > 1e-${s}`:(0,x3._)`${a} !== parseInt(${a})`;t.fail$data((0,x3._)`(${n} === 0 || (${a} = ${r}/${n}, ${o}))`)}};fV.default=Mgt;var hV={},dV={};Object.defineProperty(dV,"__esModule",{value:!0});function sme(t){const e=t.length;let r=0,n=0,i;for(;n<e;)r++,i=t.charCodeAt(n++),i>=55296&&i<=56319&&n<e&&(i=t.charCodeAt(n),(i&64512)===56320&&n++);return r}dV.default=sme;sme.code='require("ajv/dist/runtime/ucs2length").default';Object.defineProperty(hV,"__esModule",{value:!0});const ng=sn,Lgt=Pt,Fgt=dV,$gt={message({keyword:t,schemaCode:e}){const r=t==="maxLength"?"more":"fewer";return(0,ng.str)`must NOT have ${r} than ${e} characters`},params:({schemaCode:t})=>(0,ng._)`{limit: ${t}}`},Ugt={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:$gt,code(t){const{keyword:e,data:r,schemaCode:n,it:i}=t,s=e==="maxLength"?ng.operators.GT:ng.operators.LT,a=i.opts.unicode===!1?(0,ng._)`${r}.length`:(0,ng._)`${(0,Lgt.useFunc)(t.gen,Fgt.default)}(${r})`;t.fail$data((0,ng._)`${a} ${s} ${n}`)}};hV.default=Ugt;var pV={};Object.defineProperty(pV,"__esModule",{value:!0});const Vgt=rn,OE=sn,jgt={message:({schemaCode:t})=>(0,OE.str)`must match pattern "${t}"`,params:({schemaCode:t})=>(0,OE._)`{pattern: ${t}}`},zgt={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:jgt,code(t){const{data:e,$data:r,schema:n,schemaCode:i,it:s}=t,a=s.opts.unicodeRegExp?"u":"",o=r?(0,OE._)`(new RegExp(${i}, ${a}))`:(0,Vgt.usePattern)(t,n);t.fail$data((0,OE._)`!${o}.test(${e})`)}};pV.default=zgt;var gV={};Object.defineProperty(gV,"__esModule",{value:!0});const E3=sn,qgt={message({keyword:t,schemaCode:e}){const r=t==="maxProperties"?"more":"fewer";return(0,E3.str)`must NOT have ${r} than ${e} properties`},params:({schemaCode:t})=>(0,E3._)`{limit: ${t}}`},Hgt={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:qgt,code(t){const{keyword:e,data:r,schemaCode:n}=t,i=e==="maxProperties"?E3.operators.GT:E3.operators.LT;t.fail$data((0,E3._)`Object.keys(${r}).length ${i} ${n}`)}};gV.default=Hgt;var mV={};Object.defineProperty(mV,"__esModule",{value:!0});const Iw=rn,S3=sn,Wgt=Pt,Kgt={message:({params:{missingProperty:t}})=>(0,S3.str)`must have required property '${t}'`,params:({params:{missingProperty:t}})=>(0,S3._)`{missingProperty: ${t}}`},Ggt={keyword:"required",type:"object",schemaType:"array",$data:!0,error:Kgt,code(t){const{gen:e,schema:r,schemaCode:n,data:i,$data:s,it:a}=t,{opts:o}=a;if(!s&&r.length===0)return;const c=r.length>=o.loopRequired;if(a.allErrors?l():u(),o.strictRequired){const d=t.parentSchema.properties,{definedProperties:g}=t.it;for(const p of r)if(d?.[p]===void 0&&!g.has(p)){const m=a.schemaEnv.baseId+a.errSchemaPath,y=`required property "${p}" is not defined at "${m}" (strictRequired)`;(0,Wgt.checkStrictMode)(a,y,a.opts.strictRequired)}}function l(){if(c||s)t.block$data(S3.nil,f);else for(const d of r)(0,Iw.checkReportMissingProp)(t,d)}function u(){const d=e.let("missing");if(c||s){const g=e.let("valid",!0);t.block$data(g,()=>h(d,g)),t.ok(g)}else e.if((0,Iw.checkMissingProp)(t,r,d)),(0,Iw.reportMissingProp)(t,d),e.else()}function f(){e.forOf("prop",n,d=>{t.setParams({missingProperty:d}),e.if((0,Iw.noPropertyInData)(e,i,d,o.ownProperties),()=>t.error())})}function h(d,g){t.setParams({missingProperty:d}),e.forOf(d,n,()=>{e.assign(g,(0,Iw.propertyInData)(e,i,d,o.ownProperties)),e.if((0,S3.not)(g),()=>{t.error(),e.break()})},S3.nil)}}};mV.default=Ggt;var yV={};Object.defineProperty(yV,"__esModule",{value:!0});const A3=sn,Ygt={message({keyword:t,schemaCode:e}){const r=t==="maxItems"?"more":"fewer";return(0,A3.str)`must NOT have ${r} than ${e} items`},params:({schemaCode:t})=>(0,A3._)`{limit: ${t}}`},Xgt={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:Ygt,code(t){const{keyword:e,data:r,schemaCode:n}=t,i=e==="maxItems"?A3.operators.GT:A3.operators.LT;t.fail$data((0,A3._)`${r}.length ${i} ${n}`)}};yV.default=Xgt;var vV={},X6={};Object.defineProperty(X6,"__esModule",{value:!0});const ame=Bge;ame.code='require("ajv/dist/runtime/equal").default';X6.default=ame;Object.defineProperty(vV,"__esModule",{value:!0});const sB=Hs,Pa=sn,Zgt=Pt,Jgt=X6,Qgt={message:({params:{i:t,j:e}})=>(0,Pa.str)`must NOT have duplicate items (items ## ${e} and ${t} are identical)`,params:({params:{i:t,j:e}})=>(0,Pa._)`{i: ${t}, j: ${e}}`},emt={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:Qgt,code(t){const{gen:e,data:r,$data:n,schema:i,parentSchema:s,schemaCode:a,it:o}=t;if(!n&&!i)return;const c=e.let("valid"),l=s.items?(0,sB.getSchemaTypes)(s.items):[];t.block$data(c,u,(0,Pa._)`${a} === false`),t.ok(c);function u(){const g=e.let("i",(0,Pa._)`${r}.length`),p=e.let("j");t.setParams({i:g,j:p}),e.assign(c,!0),e.if((0,Pa._)`${g} > 1`,()=>(f()?h:d)(g,p))}function f(){return l.length>0&&!l.some(g=>g==="object"||g==="array")}function h(g,p){const m=e.name("item"),y=(0,sB.checkDataTypes)(l,m,o.opts.strictNumbers,sB.DataType.Wrong),v=e.const("indices",(0,Pa._)`{}`);e.for((0,Pa._)`;${g}--;`,()=>{e.let(m,(0,Pa._)`${r}[${g}]`),e.if(y,(0,Pa._)`continue`),l.length>1&&e.if((0,Pa._)`typeof ${m} == "string"`,(0,Pa._)`${m} += "_"`),e.if((0,Pa._)`typeof ${v}[${m}] == "number"`,()=>{e.assign(p,(0,Pa._)`${v}[${m}]`),t.error(),e.assign(c,!1).break()}).code((0,Pa._)`${v}[${m}] = ${g}`)})}function d(g,p){const m=(0,Zgt.useFunc)(e,Jgt.default),y=e.name("outer");e.label(y).for((0,Pa._)`;${g}--;`,()=>e.for((0,Pa._)`${p} = ${g}; ${p}--;`,()=>e.if((0,Pa._)`${m}(${r}[${g}], ${r}[${p}])`,()=>{t.error(),e.assign(c,!1).break(y)})))}}};vV.default=emt;var bV={};Object.defineProperty(bV,"__esModule",{value:!0});const FN=sn,tmt=Pt,rmt=X6,nmt={message:"must be equal to constant",params:({schemaCode:t})=>(0,FN._)`{allowedValue: ${t}}`},imt={keyword:"const",$data:!0,error:nmt,code(t){const{gen:e,data:r,$data:n,schemaCode:i,schema:s}=t;n||s&&typeof s=="object"?t.fail$data((0,FN._)`!${(0,tmt.useFunc)(e,rmt.default)}(${r}, ${i})`):t.fail((0,FN._)`${s} !== ${r}`)}};bV.default=imt;var wV={};Object.defineProperty(wV,"__esModule",{value:!0});const Gw=sn,smt=Pt,amt=X6,omt={message:"must be equal to one of the allowed values",params:({schemaCode:t})=>(0,Gw._)`{allowedValues: ${t}}`},cmt={keyword:"enum",schemaType:"array",$data:!0,error:omt,code(t){const{gen:e,data:r,$data:n,schema:i,schemaCode:s,it:a}=t;if(!n&&i.length===0)throw new Error("enum must have non-empty array");const o=i.length>=a.opts.loopEnum;let c;const l=()=>c??(c=(0,smt.useFunc)(e,amt.default));let u;if(o||n)u=e.let("valid"),t.block$data(u,f);else{if(!Array.isArray(i))throw new Error("ajv implementation error");const d=e.const("vSchema",s);u=(0,Gw.or)(...i.map((g,p)=>h(d,p)))}t.pass(u);function f(){e.assign(u,!1),e.forOf("v",s,d=>e.if((0,Gw._)`${l()}(${r}, ${d})`,()=>e.assign(u,!0).break()))}function h(d,g){const p=i[g];return typeof p=="object"&&p!==null?(0,Gw._)`${l()}(${r}, ${d}[${g}])`:(0,Gw._)`${r} === ${p}`}}};wV.default=cmt;Object.defineProperty(lV,"__esModule",{value:!0});const lmt=uV,umt=fV,fmt=hV,hmt=pV,dmt=gV,pmt=mV,gmt=yV,mmt=vV,ymt=bV,vmt=wV,bmt=[lmt.default,umt.default,fmt.default,hmt.default,dmt.default,pmt.default,gmt.default,mmt.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},ymt.default,vmt.default];lV.default=bmt;var _V={},_b={};Object.defineProperty(_b,"__esModule",{value:!0});_b.validateAdditionalItems=void 0;const ig=sn,$N=Pt,wmt={message:({params:{len:t}})=>(0,ig.str)`must NOT have more than ${t} items`,params:({params:{len:t}})=>(0,ig._)`{limit: ${t}}`},_mt={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:wmt,code(t){const{parentSchema:e,it:r}=t,{items:n}=e;if(!Array.isArray(n)){(0,$N.checkStrictMode)(r,'"additionalItems" is ignored when "items" is not an array of schemas');return}ome(t,n)}};function ome(t,e){const{gen:r,schema:n,data:i,keyword:s,it:a}=t;a.items=!0;const o=r.const("len",(0,ig._)`${i}.length`);if(n===!1)t.setParams({len:e.length}),t.pass((0,ig._)`${o} <= ${e.length}`);else if(typeof n=="object"&&!(0,$N.alwaysValidSchema)(a,n)){const l=r.var("valid",(0,ig._)`${o} <= ${e.length}`);r.if((0,ig.not)(l),()=>c(l)),t.ok(l)}function c(l){r.forRange("i",e.length,o,u=>{t.subschema({keyword:s,dataProp:u,dataPropType:$N.Type.Num},l),a.allErrors||r.if((0,ig.not)(l),()=>r.break())})}}_b.validateAdditionalItems=ome;_b.default=_mt;var xV={},xb={};Object.defineProperty(xb,"__esModule",{value:!0});xb.validateTuple=void 0;const ire=sn,Gx=Pt,xmt=rn,Emt={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(t){const{schema:e,it:r}=t;if(Array.isArray(e))return cme(t,"additionalItems",e);r.items=!0,!(0,Gx.alwaysValidSchema)(r,e)&&t.ok((0,xmt.validateArray)(t))}};function cme(t,e,r=t.schema){const{gen:n,parentSchema:i,data:s,keyword:a,it:o}=t;u(i),o.opts.unevaluated&&r.length&&o.items!==!0&&(o.items=Gx.mergeEvaluated.items(n,r.length,o.items));const c=n.name("valid"),l=n.const("len",(0,ire._)`${s}.length`);r.forEach((f,h)=>{(0,Gx.alwaysValidSchema)(o,f)||(n.if((0,ire._)`${l} > ${h}`,()=>t.subschema({keyword:a,schemaProp:h,dataProp:h},c)),t.ok(c))});function u(f){const{opts:h,errSchemaPath:d}=o,g=r.length,p=g===f.minItems&&(g===f.maxItems||f[e]===!1);if(h.strictTuples&&!p){const m=`"${a}" is ${g}-tuple, but minItems or maxItems/${e} are not specified or different at path "${d}"`;(0,Gx.checkStrictMode)(o,m,h.strictTuples)}}}xb.validateTuple=cme;xb.default=Emt;Object.defineProperty(xV,"__esModule",{value:!0});const Smt=xb,Amt={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:t=>(0,Smt.validateTuple)(t,"items")};xV.default=Amt;var EV={};Object.defineProperty(EV,"__esModule",{value:!0});const sre=sn,Tmt=Pt,kmt=rn,Cmt=_b,Imt={message:({params:{len:t}})=>(0,sre.str)`must NOT have more than ${t} items`,params:({params:{len:t}})=>(0,sre._)`{limit: ${t}}`},Rmt={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:Imt,code(t){const{schema:e,parentSchema:r,it:n}=t,{prefixItems:i}=r;n.items=!0,!(0,Tmt.alwaysValidSchema)(n,e)&&(i?(0,Cmt.validateAdditionalItems)(t,i):t.ok((0,kmt.validateArray)(t)))}};EV.default=Rmt;var SV={};Object.defineProperty(SV,"__esModule",{value:!0});const Bl=sn,E5=Pt,Pmt={message:({params:{min:t,max:e}})=>e===void 0?(0,Bl.str)`must contain at least ${t} valid item(s)`:(0,Bl.str)`must contain at least ${t} and no more than ${e} valid item(s)`,params:({params:{min:t,max:e}})=>e===void 0?(0,Bl._)`{minContains: ${t}}`:(0,Bl._)`{minContains: ${t}, maxContains: ${e}}`},Bmt={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:Pmt,code(t){const{gen:e,schema:r,parentSchema:n,data:i,it:s}=t;let a,o;const{minContains:c,maxContains:l}=n;s.opts.next?(a=c===void 0?1:c,o=l):a=1;const u=e.const("len",(0,Bl._)`${i}.length`);if(t.setParams({min:a,max:o}),o===void 0&&a===0){(0,E5.checkStrictMode)(s,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(o!==void 0&&a>o){(0,E5.checkStrictMode)(s,'"minContains" > "maxContains" is always invalid'),t.fail();return}if((0,E5.alwaysValidSchema)(s,r)){let p=(0,Bl._)`${u} >= ${a}`;o!==void 0&&(p=(0,Bl._)`${p} && ${u} <= ${o}`),t.pass(p);return}s.items=!0;const f=e.name("valid");o===void 0&&a===1?d(f,()=>e.if(f,()=>e.break())):a===0?(e.let(f,!0),o!==void 0&&e.if((0,Bl._)`${i}.length > 0`,h)):(e.let(f,!1),h()),t.result(f,()=>t.reset());function h(){const p=e.name("_valid"),m=e.let("count",0);d(p,()=>e.if(p,()=>g(m)))}function d(p,m){e.forRange("i",0,u,y=>{t.subschema({keyword:"contains",dataProp:y,dataPropType:E5.Type.Num,compositeRule:!0},p),m()})}function g(p){e.code((0,Bl._)`${p}++`),o===void 0?e.if((0,Bl._)`${p} >= ${a}`,()=>e.assign(f,!0).break()):(e.if((0,Bl._)`${p} > ${o}`,()=>e.assign(f,!1).break()),a===1?e.assign(f,!0):e.if((0,Bl._)`${p} >= ${a}`,()=>e.assign(f,!0)))}}};SV.default=Bmt;var lme={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.validateSchemaDeps=t.validatePropertyDeps=t.error=void 0;const e=sn,r=Pt,n=rn;t.error={message:({params:{property:c,depsCount:l,deps:u}})=>{const f=l===1?"property":"properties";return(0,e.str)`must have ${f} ${u} when property ${c} is present`},params:({params:{property:c,depsCount:l,deps:u,missingProperty:f}})=>(0,e._)`{property: ${c},
    missingProperty: ${f},
    depsCount: ${l},
    deps: ${u}}`};const i={keyword:"dependencies",type:"object",schemaType:"object",error:t.error,code(c){const[l,u]=s(c);a(c,l),o(c,u)}};function s({schema:c}){const l={},u={};for(const f in c){if(f==="__proto__")continue;const h=Array.isArray(c[f])?l:u;h[f]=c[f]}return[l,u]}function a(c,l=c.schema){const{gen:u,data:f,it:h}=c;if(Object.keys(l).length===0)return;const d=u.let("missing");for(const g in l){const p=l[g];if(p.length===0)continue;const m=(0,n.propertyInData)(u,f,g,h.opts.ownProperties);c.setParams({property:g,depsCount:p.length,deps:p.join(", ")}),h.allErrors?u.if(m,()=>{for(const y of p)(0,n.checkReportMissingProp)(c,y)}):(u.if((0,e._)`${m} && (${(0,n.checkMissingProp)(c,p,d)})`),(0,n.reportMissingProp)(c,d),u.else())}}t.validatePropertyDeps=a;function o(c,l=c.schema){const{gen:u,data:f,keyword:h,it:d}=c,g=u.name("valid");for(const p in l)(0,r.alwaysValidSchema)(d,l[p])||(u.if((0,n.propertyInData)(u,f,p,d.opts.ownProperties),()=>{const m=c.subschema({keyword:h,schemaProp:p},g);c.mergeValidEvaluated(m,g)},()=>u.var(g,!0)),c.ok(g))}t.validateSchemaDeps=o,t.default=i})(lme);var AV={};Object.defineProperty(AV,"__esModule",{value:!0});const ume=sn,Dmt=Pt,Omt={message:"property name must be valid",params:({params:t})=>(0,ume._)`{propertyName: ${t.propertyName}}`},Nmt={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:Omt,code(t){const{gen:e,schema:r,data:n,it:i}=t;if((0,Dmt.alwaysValidSchema)(i,r))return;const s=e.name("valid");e.forIn("key",n,a=>{t.setParams({propertyName:a}),t.subschema({keyword:"propertyNames",data:a,dataTypes:["string"],propertyName:a,compositeRule:!0},s),e.if((0,ume.not)(s),()=>{t.error(!0),i.allErrors||e.break()})}),t.ok(s)}};AV.default=Nmt;var BA={};Object.defineProperty(BA,"__esModule",{value:!0});const S5=rn,pu=sn,Mmt=Sh,A5=Pt,Lmt={message:"must NOT have additional properties",params:({params:t})=>(0,pu._)`{additionalProperty: ${t.additionalProperty}}`},Fmt={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:Lmt,code(t){const{gen:e,schema:r,parentSchema:n,data:i,errsCount:s,it:a}=t;if(!s)throw new Error("ajv implementation error");const{allErrors:o,opts:c}=a;if(a.props=!0,c.removeAdditional!=="all"&&(0,A5.alwaysValidSchema)(a,r))return;const l=(0,S5.allSchemaProperties)(n.properties),u=(0,S5.allSchemaProperties)(n.patternProperties);f(),t.ok((0,pu._)`${s} === ${Mmt.default.errors}`);function f(){e.forIn("key",i,m=>{!l.length&&!u.length?g(m):e.if(h(m),()=>g(m))})}function h(m){let y;if(l.length>8){const v=(0,A5.schemaRefOrVal)(a,n.properties,"properties");y=(0,S5.isOwnProperty)(e,v,m)}else l.length?y=(0,pu.or)(...l.map(v=>(0,pu._)`${m} === ${v}`)):y=pu.nil;return u.length&&(y=(0,pu.or)(y,...u.map(v=>(0,pu._)`${(0,S5.usePattern)(t,v)}.test(${m})`))),(0,pu.not)(y)}function d(m){e.code((0,pu._)`delete ${i}[${m}]`)}function g(m){if(c.removeAdditional==="all"||c.removeAdditional&&r===!1){d(m);return}if(r===!1){t.setParams({additionalProperty:m}),t.error(),o||e.break();return}if(typeof r=="object"&&!(0,A5.alwaysValidSchema)(a,r)){const y=e.name("valid");c.removeAdditional==="failing"?(p(m,y,!1),e.if((0,pu.not)(y),()=>{t.reset(),d(m)})):(p(m,y),o||e.if((0,pu.not)(y),()=>e.break()))}}function p(m,y,v){const _={keyword:"additionalProperties",dataProp:m,dataPropType:A5.Type.Str};v===!1&&Object.assign(_,{compositeRule:!0,createErrors:!1,allErrors:!1}),t.subschema(_,y)}}};BA.default=Fmt;var TV={};Object.defineProperty(TV,"__esModule",{value:!0});const $mt=Lu,are=rn,aB=Pt,ore=BA,Umt={keyword:"properties",type:"object",schemaType:"object",code(t){const{gen:e,schema:r,parentSchema:n,data:i,it:s}=t;s.opts.removeAdditional==="all"&&n.additionalProperties===void 0&&ore.default.code(new $mt.KeywordCxt(s,ore.default,"additionalProperties"));const a=(0,are.allSchemaProperties)(r);for(const f of a)s.definedProperties.add(f);s.opts.unevaluated&&a.length&&s.props!==!0&&(s.props=aB.mergeEvaluated.props(e,(0,aB.toHash)(a),s.props));const o=a.filter(f=>!(0,aB.alwaysValidSchema)(s,r[f]));if(o.length===0)return;const c=e.name("valid");for(const f of o)l(f)?u(f):(e.if((0,are.propertyInData)(e,i,f,s.opts.ownProperties)),u(f),s.allErrors||e.else().var(c,!0),e.endIf()),t.it.definedProperties.add(f),t.ok(c);function l(f){return s.opts.useDefaults&&!s.compositeRule&&r[f].default!==void 0}function u(f){t.subschema({keyword:"properties",schemaProp:f,dataProp:f},c)}}};TV.default=Umt;var kV={};Object.defineProperty(kV,"__esModule",{value:!0});const cre=rn,T5=sn,lre=Pt,ure=Pt,Vmt={keyword:"patternProperties",type:"object",schemaType:"object",code(t){const{gen:e,schema:r,data:n,parentSchema:i,it:s}=t,{opts:a}=s,o=(0,cre.allSchemaProperties)(r),c=o.filter(p=>(0,lre.alwaysValidSchema)(s,r[p]));if(o.length===0||c.length===o.length&&(!s.opts.unevaluated||s.props===!0))return;const l=a.strictSchema&&!a.allowMatchingProperties&&i.properties,u=e.name("valid");s.props!==!0&&!(s.props instanceof T5.Name)&&(s.props=(0,ure.evaluatedPropsToName)(e,s.props));const{props:f}=s;h();function h(){for(const p of o)l&&d(p),s.allErrors?g(p):(e.var(u,!0),g(p),e.if(u))}function d(p){for(const m in l)new RegExp(p).test(m)&&(0,lre.checkStrictMode)(s,`property ${m} matches pattern ${p} (use allowMatchingProperties)`)}function g(p){e.forIn("key",n,m=>{e.if((0,T5._)`${(0,cre.usePattern)(t,p)}.test(${m})`,()=>{const y=c.includes(p);y||t.subschema({keyword:"patternProperties",schemaProp:p,dataProp:m,dataPropType:ure.Type.Str},u),s.opts.unevaluated&&f!==!0?e.assign((0,T5._)`${f}[${m}]`,!0):!y&&!s.allErrors&&e.if((0,T5.not)(u),()=>e.break())})})}}};kV.default=Vmt;var CV={};Object.defineProperty(CV,"__esModule",{value:!0});const jmt=Pt,zmt={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(t){const{gen:e,schema:r,it:n}=t;if((0,jmt.alwaysValidSchema)(n,r)){t.fail();return}const i=e.name("valid");t.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},i),t.failResult(i,()=>t.reset(),()=>t.error())},error:{message:"must NOT be valid"}};CV.default=zmt;var IV={};Object.defineProperty(IV,"__esModule",{value:!0});const qmt=rn,Hmt={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:qmt.validateUnion,error:{message:"must match a schema in anyOf"}};IV.default=Hmt;var RV={};Object.defineProperty(RV,"__esModule",{value:!0});const Yx=sn,Wmt=Pt,Kmt={message:"must match exactly one schema in oneOf",params:({params:t})=>(0,Yx._)`{passingSchemas: ${t.passing}}`},Gmt={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:Kmt,code(t){const{gen:e,schema:r,parentSchema:n,it:i}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");if(i.opts.discriminator&&n.discriminator)return;const s=r,a=e.let("valid",!1),o=e.let("passing",null),c=e.name("_valid");t.setParams({passing:o}),e.block(l),t.result(a,()=>t.reset(),()=>t.error(!0));function l(){s.forEach((u,f)=>{let h;(0,Wmt.alwaysValidSchema)(i,u)?e.var(c,!0):h=t.subschema({keyword:"oneOf",schemaProp:f,compositeRule:!0},c),f>0&&e.if((0,Yx._)`${c} && ${a}`).assign(a,!1).assign(o,(0,Yx._)`[${o}, ${f}]`).else(),e.if(c,()=>{e.assign(a,!0),e.assign(o,f),h&&t.mergeEvaluated(h,Yx.Name)})})}}};RV.default=Gmt;var PV={};Object.defineProperty(PV,"__esModule",{value:!0});const Ymt=Pt,Xmt={keyword:"allOf",schemaType:"array",code(t){const{gen:e,schema:r,it:n}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");const i=e.name("valid");r.forEach((s,a)=>{if((0,Ymt.alwaysValidSchema)(n,s))return;const o=t.subschema({keyword:"allOf",schemaProp:a},i);t.ok(i),t.mergeEvaluated(o)})}};PV.default=Xmt;var BV={};Object.defineProperty(BV,"__esModule",{value:!0});const NE=sn,fme=Pt,Zmt={message:({params:t})=>(0,NE.str)`must match "${t.ifClause}" schema`,params:({params:t})=>(0,NE._)`{failingKeyword: ${t.ifClause}}`},Jmt={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:Zmt,code(t){const{gen:e,parentSchema:r,it:n}=t;r.then===void 0&&r.else===void 0&&(0,fme.checkStrictMode)(n,'"if" without "then" and "else" is ignored');const i=fre(n,"then"),s=fre(n,"else");if(!i&&!s)return;const a=e.let("valid",!0),o=e.name("_valid");if(c(),t.reset(),i&&s){const u=e.let("ifClause");t.setParams({ifClause:u}),e.if(o,l("then",u),l("else",u))}else i?e.if(o,l("then")):e.if((0,NE.not)(o),l("else"));t.pass(a,()=>t.error(!0));function c(){const u=t.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},o);t.mergeEvaluated(u)}function l(u,f){return()=>{const h=t.subschema({keyword:u},o);e.assign(a,o),t.mergeValidEvaluated(h,a),f?e.assign(f,(0,NE._)`${u}`):t.setParams({ifClause:u})}}}};function fre(t,e){const r=t.schema[e];return r!==void 0&&!(0,fme.alwaysValidSchema)(t,r)}BV.default=Jmt;var DV={};Object.defineProperty(DV,"__esModule",{value:!0});const Qmt=Pt,e2t={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:t,parentSchema:e,it:r}){e.if===void 0&&(0,Qmt.checkStrictMode)(r,`"${t}" without "if" is ignored`)}};DV.default=e2t;Object.defineProperty(_V,"__esModule",{value:!0});const t2t=_b,r2t=xV,n2t=xb,i2t=EV,s2t=SV,a2t=lme,o2t=AV,c2t=BA,l2t=TV,u2t=kV,f2t=CV,h2t=IV,d2t=RV,p2t=PV,g2t=BV,m2t=DV;function y2t(t=!1){const e=[f2t.default,h2t.default,d2t.default,p2t.default,g2t.default,m2t.default,o2t.default,c2t.default,a2t.default,l2t.default,u2t.default];return t?e.push(r2t.default,i2t.default):e.push(t2t.default,n2t.default),e.push(s2t.default),e}_V.default=y2t;var OV={},NV={};Object.defineProperty(NV,"__esModule",{value:!0});const ys=sn,v2t={message:({schemaCode:t})=>(0,ys.str)`must match format "${t}"`,params:({schemaCode:t})=>(0,ys._)`{format: ${t}}`},b2t={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:v2t,code(t,e){const{gen:r,data:n,$data:i,schema:s,schemaCode:a,it:o}=t,{opts:c,errSchemaPath:l,schemaEnv:u,self:f}=o;if(!c.validateFormats)return;i?h():d();function h(){const g=r.scopeValue("formats",{ref:f.formats,code:c.code.formats}),p=r.const("fDef",(0,ys._)`${g}[${a}]`),m=r.let("fType"),y=r.let("format");r.if((0,ys._)`typeof ${p} == "object" && !(${p} instanceof RegExp)`,()=>r.assign(m,(0,ys._)`${p}.type || "string"`).assign(y,(0,ys._)`${p}.validate`),()=>r.assign(m,(0,ys._)`"string"`).assign(y,p)),t.fail$data((0,ys.or)(v(),_()));function v(){return c.strictSchema===!1?ys.nil:(0,ys._)`${a} && !${y}`}function _(){const x=u.$async?(0,ys._)`(${p}.async ? await ${y}(${n}) : ${y}(${n}))`:(0,ys._)`${y}(${n})`,A=(0,ys._)`(typeof ${y} == "function" ? ${x} : ${y}.test(${n}))`;return(0,ys._)`${y} && ${y} !== true && ${m} === ${e} && !${A}`}}function d(){const g=f.formats[s];if(!g){v();return}if(g===!0)return;const[p,m,y]=_(g);p===e&&t.pass(x());function v(){if(c.strictSchema===!1){f.logger.warn(A());return}throw new Error(A());function A(){return`unknown format "${s}" ignored in schema at path "${l}"`}}function _(A){const C=A instanceof RegExp?(0,ys.regexpCode)(A):c.code.formats?(0,ys._)`${c.code.formats}${(0,ys.getProperty)(s)}`:void 0,R=r.scopeValue("formats",{key:s,ref:A,code:C});return typeof A=="object"&&!(A instanceof RegExp)?[A.type||"string",A.validate,(0,ys._)`${R}.validate`]:["string",A,R]}function x(){if(typeof g=="object"&&!(g instanceof RegExp)&&g.async){if(!u.$async)throw new Error("async format in sync schema");return(0,ys._)`await ${y}(${n})`}return typeof m=="function"?(0,ys._)`${y}(${n})`:(0,ys._)`${y}.test(${n})`}}}};NV.default=b2t;Object.defineProperty(OV,"__esModule",{value:!0});const w2t=NV,_2t=[w2t.default];OV.default=_2t;var hv={};Object.defineProperty(hv,"__esModule",{value:!0});hv.contentVocabulary=hv.metadataVocabulary=void 0;hv.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];hv.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"];Object.defineProperty(aV,"__esModule",{value:!0});const x2t=oV,E2t=lV,S2t=_V,A2t=OV,hre=hv,T2t=[x2t.default,E2t.default,(0,S2t.default)(),A2t.default,hre.metadataVocabulary,hre.contentVocabulary];aV.default=T2t;var MV={},DA={};Object.defineProperty(DA,"__esModule",{value:!0});DA.DiscrError=void 0;var dre;(function(t){t.Tag="tag",t.Mapping="mapping"})(dre||(DA.DiscrError=dre={}));Object.defineProperty(MV,"__esModule",{value:!0});const J2=sn,UN=DA,pre=mc,k2t=wb,C2t=Pt,I2t={message:({params:{discrError:t,tagName:e}})=>t===UN.DiscrError.Tag?`tag "${e}" must be string`:`value of tag "${e}" must be in oneOf`,params:({params:{discrError:t,tag:e,tagName:r}})=>(0,J2._)`{error: ${t}, tag: ${r}, tagValue: ${e}}`},R2t={keyword:"discriminator",type:"object",schemaType:"object",error:I2t,code(t){const{gen:e,data:r,schema:n,parentSchema:i,it:s}=t,{oneOf:a}=i;if(!s.opts.discriminator)throw new Error("discriminator: requires discriminator option");const o=n.propertyName;if(typeof o!="string")throw new Error("discriminator: requires propertyName");if(n.mapping)throw new Error("discriminator: mapping is not supported");if(!a)throw new Error("discriminator: requires oneOf keyword");const c=e.let("valid",!1),l=e.const("tag",(0,J2._)`${r}${(0,J2.getProperty)(o)}`);e.if((0,J2._)`typeof ${l} == "string"`,()=>u(),()=>t.error(!1,{discrError:UN.DiscrError.Tag,tag:l,tagName:o})),t.ok(c);function u(){const d=h();e.if(!1);for(const g in d)e.elseIf((0,J2._)`${l} === ${g}`),e.assign(c,f(d[g]));e.else(),t.error(!1,{discrError:UN.DiscrError.Mapping,tag:l,tagName:o}),e.endIf()}function f(d){const g=e.name("valid"),p=t.subschema({keyword:"oneOf",schemaProp:d},g);return t.mergeEvaluated(p,J2.Name),g}function h(){var d;const g={},p=y(i);let m=!0;for(let x=0;x<a.length;x++){let A=a[x];if(A?.$ref&&!(0,C2t.schemaHasRulesButRef)(A,s.self.RULES)){const R=A.$ref;if(A=pre.resolveRef.call(s.self,s.schemaEnv.root,s.baseId,R),A instanceof pre.SchemaEnv&&(A=A.schema),A===void 0)throw new k2t.default(s.opts.uriResolver,s.baseId,R)}const C=(d=A?.properties)===null||d===void 0?void 0:d[o];if(typeof C!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${o}"`);m=m&&(p||y(A)),v(C,x)}if(!m)throw new Error(`discriminator: "${o}" must be required`);return g;function y({required:x}){return Array.isArray(x)&&x.includes(o)}function v(x,A){if(x.const)_(x.const,A);else if(x.enum)for(const C of x.enum)_(C,A);else throw new Error(`discriminator: "properties/${o}" must have "const" or "enum"`)}function _(x,A){if(typeof x!="string"||x in g)throw new Error(`discriminator: "${o}" values must be unique strings`);g[x]=A}}}};MV.default=R2t;const P2t="http://json-schema.org/draft-07/schema#",B2t="http://json-schema.org/draft-07/schema#",D2t="Core schema meta-schema",O2t={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},N2t=["object","boolean"],M2t={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},L2t={$schema:P2t,$id:B2t,title:D2t,definitions:O2t,type:N2t,properties:M2t,default:!0};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.MissingRefError=e.ValidationError=e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=e.Ajv=void 0;const r=mge,n=aV,i=MV,s=L2t,a=["/properties"],o="http://json-schema.org/draft-07/schema";class c extends r.default{_addVocabularies(){super._addVocabularies(),n.default.forEach(g=>this.addVocabulary(g)),this.opts.discriminator&&this.addKeyword(i.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const g=this.opts.$data?this.$dataMetaSchema(s,a):s;this.addMetaSchema(g,o,!1),this.refs["http://json-schema.org/schema"]=o}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(o)?o:void 0)}}e.Ajv=c,t.exports=e=c,t.exports.Ajv=c,Object.defineProperty(e,"__esModule",{value:!0}),e.default=c;var l=Lu;Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return l.KeywordCxt}});var u=sn;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return u._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return u.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return u.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return u.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return u.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return u.CodeGen}});var f=Y6;Object.defineProperty(e,"ValidationError",{enumerable:!0,get:function(){return f.default}});var h=wb;Object.defineProperty(e,"MissingRefError",{enumerable:!0,get:function(){return h.default}})})(BN,BN.exports);var F2t=BN.exports;const $2t=si(F2t),VN=new $2t({allowUnionTypes:!0}),hme=t=>({validate:VN.compile(t)}),dme=t=>{const e=VN.compile(t),r=c=>c===!0?()=>!0:VN.compile(c),n=Object.fromEntries(Object.entries(t.properties||{}).map(([c,l])=>[c,r(l)])),i=t.additionalProperties?r(t.additionalProperties):()=>!1,s=(c,l)=>a(l)(c),a=c=>n[c]||i;return{validateRoot:e,validateKey:s,getKeyValidator:a,supportedKey:c=>!!n[c]||!!t.additionalProperties}},U2t=({db:t,schema:e})=>{const{validate:r}=hme(e);return new Proxy(t,{get(n,i){return i==="all"?async()=>(await n[i]()).filter(o=>r(o.value)):i==="add"?async s=>{if(r(s))return await n.add(s);throw new Error(s.toString()+JSON.stringify(r.errors,void 0,2))}:n[i]}})},V2t=({db:t,schema:e})=>{const{validateRoot:r,validateKey:n,getKeyValidator:i,supportedKey:s}=dme(e);return new Proxy(t,{get(a,o){return o==="get"?async c=>{if(!s(c))throw new Error(`Unsupported key ${c}.`);const l=await a.get(c);return l===void 0||n(l,c)?l:void 0}:o==="put"||o==="set"?async(c,l)=>{if(!s(c))throw new Error(`Unsupported key ${c}.`);if(n(l,c))return await a.put(c,l);throw new Error(JSON.stringify(i(c).errors,void 0,2))}:o==="all"?async()=>(await a.all()).filter(l=>n(l.value,l.key)):o==="allAsJSON"?async()=>{const c=await a.all(),l=Object.fromEntries(c.map(f=>[f.key,f.value]));if(r(l))return l;throw new Error(JSON.stringify(r.errors,void 0,2))}:a[o]}})},j2t=({db:t,schema:e})=>{const{validateKey:r,getKeyValidator:n,supportedKey:i}=dme(e);return new Proxy(t,{get(s,a){return a==="get"?async o=>{if(!i(o))throw new Error(`Unsupported key ${o}.`);const c=await s.get(o);if(c===void 0)return c;const{value:l,position:u}=c;return r(l,o)?{value:l,position:u}:void 0}:a==="move"?async(o,c)=>{if(!i(o))throw new Error(`Unsupported key ${o}.`);return await s.move(o,c)}:a==="put"||a==="set"?async(o,c,l)=>{if(!i(o))throw new Error(`Unsupported key ${o}.`);if(r(c,o))return await s.put(o,c,l);throw new Error(JSON.stringify(n(o).errors,void 0,2))}:a==="all"?async()=>(await s.all()).filter(c=>r(c.value,c.key)):s[a]}})},z2t=({db:t,schema:e})=>{const{validate:r}=hme(e);return new Proxy(t,{get(n,i){return i==="all"?async()=>(await n[i]()).filter(o=>r(o.value)):i==="add"?async s=>{if(r(s))return await n.add(s);throw new Error(s.toString()+JSON.stringify(r.errors,void 0,2))}:n[i]}})},pme=()=>{K0t(),dge(),G0t(),Z2t()};async function q2t({sfip:t,dossierOrbite:e}){return pme(),await z0t({ipfs:t,id:"constellation",directory:e})}const H2t=({bd:t,schéma:e})=>{switch(t.type){case"feed":return U2t({db:t,schema:e});case"set":return z2t({db:t,schema:e});case"keyvalue":return V2t({db:t,schema:e});case"ordered-keyvalue":return j2t({db:t,schema:e});default:throw new Error("Type de bd non reconnu.")}};class gme{orbite;_bdsOrbite;verrouOuvertureBd;_oublierNettoyageBdsOuvertes;constructor(e){this.orbite=e,this._bdsOrbite={},this.verrouOuvertureBd=new kc,this._oublierNettoyageBdsOuvertes=this.lancerNettoyageBdsOuvertes()}get identity(){return this.orbite.identity}async ouvrirBd({id:e,type:r,options:n}){await this.verrouOuvertureBd.acquire(e);const i=this._bdsOrbite[e],s=rs(),a=async()=>{this._bdsOrbite[e]&&this._bdsOrbite[e].idsRequêtes.delete(s)},o=c=>{const{type:l}=c;return r===void 0?!0:l===r};if(i){if(this._bdsOrbite[e].idsRequêtes.add(s),this.verrouOuvertureBd.release(e),!o(i.bd))throw new Error(`La bd est de type ${i.bd.type}, et non ${r}.`);return{bd:i.bd,fOublier:a}}try{const c=await this.orbite.open(e,{type:r,...n});return this._bdsOrbite[e]={bd:c,idsRequêtes:new Set([s])},this.verrouOuvertureBd.release(e),{bd:c,fOublier:a}}catch(c){throw console.error(c.toString()),c}}async ouvrirBdTypée({id:e,type:r,schéma:n,options:i}){const{bd:s,fOublier:a}=await this.ouvrirBd({id:e,type:r,options:i});return{bd:H2t({bd:s,schéma:n}),fOublier:a}}async créerBdIndépendante({type:e,options:r,nom:n}){const i=await this.orbite.open(n||rs(),{type:e,...r}),{address:s}=i;return this._bdsOrbite[s]={bd:i,idsRequêtes:new Set},s}async effacerBd({id:e}){const{bd:r}=await this.ouvrirBd({id:e});await r.drop(),delete this._bdsOrbite[e]}lancerNettoyageBdsOuvertes(){const r=setInterval(async()=>{await Promise.all(Object.keys(this._bdsOrbite).map(async n=>{const{bd:i,idsRequêtes:s}=this._bdsOrbite[n];s.size||(delete this._bdsOrbite[n],await i.close())}))},3e5);return async()=>clearInterval(r)}async appliquerFonctionBdOrbite({idBd:e,fonction:r,args:n}){const{bd:i,fOublier:s}=await this.ouvrirBd({id:e}),a=await i[r](...n);return await s(),a}async fermer({arrêterOrbite:e}){this._oublierNettoyageBdsOuvertes&&this._oublierNettoyageBdsOuvertes(),e&&await this.orbite.stop()}}class mme{gestionnaires;constructor(){this.gestionnaires={}}obtGestionnaireOrbite({orbite:e}){return this.gestionnaires[e.identity.id]||(this.gestionnaires[e.identity.id]=new gme(e)),this.gestionnaires[e.identity.id]}async fermer({orbite:e,arrêterOrbite:r}){await this.obtGestionnaireOrbite({orbite:e}).fermer({arrêterOrbite:r}),delete this.gestionnaires[e.identity.id]}}const OA=new mme,gre=Object.freeze(Object.defineProperty({__proto__:null,GestionnaireOrbite:gme,GestionnaireOrbiteGénéral:mme,gestionnaireOrbiteGénéral:OA,initOrbite:q2t,préparerOrbite:pme},Symbol.toStringTag,{value:"Module"})),yme=async(t,e)=>{const r=async()=>{const i=await t.all();await e(i.map(s=>s.value))};return t.events.setMaxListeners(100),t.events.on("update",r),await r(),async()=>{t.events.off("update",r)}};class W2t extends qi.EventEmitter{orbite;idBd;idBdAccès;bdAccès;fOublierBd;oublierSuivi;autorisés;accès;idRequête;prêt;constructor(e,r){super(),this.orbite=OA.obtGestionnaireOrbite({orbite:e}),this.idBd=r,this.autorisés=[],this.idRequête=rs(),this.prêt=!1}async initialiser(){const{bd:e,fOublier:r}=await this.orbite.ouvrirBd({id:this.idBd});this.fOublierBd=r,this.accès=e.access,this.bdAccès=this.accès.bd,this.idBdAccès=this.bdAccès?.address,await this._miseÀJour([]),this.oublierSuivi=await yme(this.bdAccès,async n=>{await this._miseÀJour(n)}),this.prêt=!0}async _miseÀJour(e){const r=[];e=[{id:this.accès.write,rôle:fa},...e],e.forEach(n=>{r.push(n.id)}),this.autorisés=r,this.emit("misÀJour")}async fermer(){this.oublierSuivi&&await this.oublierSuivi(),await this.fOublierBd?.()}}class vme extends qi.EventEmitter{_rôles;_rôlesIdOrbite;_rôlesUtilisateurs;_miseÀJourEnCours;orbite;constructor(e){super(),this._rôles={[fa]:[],[Iu]:[]},this._rôlesIdOrbite={[fa]:[],[Iu]:[]},this._rôlesUtilisateurs={[fa]:{},[Iu]:{}},this._miseÀJourEnCours=!1,this.orbite=e}async estUnMembre(e){return this._miseÀJourEnCours&&await OD(this,"misÀJour"),this._rôles[Iu].includes(e)}async estUnModérateur(e){return this._miseÀJourEnCours&&await OD(this,"misÀJour"),this._rôles[fa].includes(e)}async estAutorisé(e){return await this.estUnModérateur(e)||await this.estUnMembre(e)}async ajouterÉléments(e){this._miseÀJourEnCours=!0,await Promise.all(e.map(async r=>{const{rôle:n,id:i}=r;if(to(i)){if(!this._rôlesUtilisateurs[n][i]){const s=new W2t(this.orbite,i);s.on("misÀJour",()=>this._mettreRôlesÀJour()),this._rôlesUtilisateurs[n][i]=s,await s.initialiser()}}else this._rôlesIdOrbite[n].includes(i)||(this._rôlesIdOrbite[n].push(i),this._mettreRôlesÀJour())})),this._miseÀJourEnCours=!1,this._mettreRôlesÀJour(),this.emit("misÀJour")}_mettreRôlesÀJour(){const e={MODÉRATEUR:[],MEMBRE:[]};for(const[r,n]of Object.entries(this._rôlesIdOrbite)){const i=e[r];n.forEach(s=>{i.includes(s)||i.push(s)})}for(const[r,n]of Object.entries(this._rôlesUtilisateurs)){const i=e[r];Object.values(n).forEach(s=>{s.autorisés.forEach(a=>{i.includes(a)||i.push(a)})})}this._rôles=e}async fermer(){const e=Object.values(this._rôlesUtilisateurs).map(r=>Object.values(r)).flat();await Promise.all(e.map(r=>r.fermer()))}}const bme=(...t)=>t.join("/").replace(/((?<=\/)\/+)|(^\.\/)|((?<=\/)\.\/)/g,"")||".",LV=t=>t.type===Yf,Xx="contrôleur-accès-constellation",wme=ob,_me=wn,K2t=Rs,G2t=async({storage:t,type:e,params:r})=>{const n={type:e,...r},{cid:i,bytes:s}=await age({value:n,codec:wme,hasher:_me}),a=i.toString(K2t);return await t.put(a,s),a},FV=({write:t,storage:e}={})=>async({orbitdb:r,identities:n,address:i})=>{e=e||await Ld(await Mu({size:1e3}),await cb({ipfs:r.ipfs,pin:!0})),t=t||r.identity.id;const s=new vme(r);if(i){const c=await e.get(i.replaceAll("/contrôleur-accès-constellation/","")),{value:l}=await oge({bytes:c,codec:wme,hasher:_me});({write:t}=l)}else i=await G2t({storage:e,type:Xx,params:{write:t}}),i=bme("/",Xx,i);await s.ajouterÉléments([{id:t,rôle:fa}]);const a=async c=>{if(c.payload.op!=="ADD"||!c.payload.value)return!1;const{rôle:l,id:u}=c.payload.value,f=cge.includes(l),h=await n.getIdentity(c.identity);if(!h)return!1;const{id:d}=h;return f&&await o(d,c)&&n.verifyIdentity(h)?(l===fa&&await s.ajouterÉléments([{id:u,rôle:fa}]),!0):!1},o=async(c,l)=>{if(await s.estUnModérateur(c))return!0;const u=l.next;for(const f of u){const h=await e?.get(f),d=await Of.decode(h);if(await a(d)&&await s.estUnModérateur(c))return!0}return!1};return{type:Xx,address:i,write:t,canAppend:a}};FV.type=Xx;const Yf="contrôleur-constellation",xme=ob,Eme=wn,Y2t=Rs,mre={type:"object",properties:{rôle:{type:"string"},id:{type:"string"}},required:["rôle","id"]},X2t=async({storage:t,type:e,params:r})=>{const n={type:e,...r},{cid:i,bytes:s}=await age({value:n,codec:xme,hasher:Eme}),a=i.toString(Y2t);return await t.put(a,s),a},$V=({write:t,nom:e,storage:r}={})=>async({orbitdb:n,identities:i,address:s})=>{t=t||n.identity.id,e=e||rs(),r=r||await Ld(await Mu({size:1e3}),await cb({ipfs:n.ipfs,pin:!0}));const a=OA.obtGestionnaireOrbite({orbite:n});let o,c,l;if(s){const M=await r.get(s.replaceAll(`/${Yf}/`,"")),{value:N}=await oge({bytes:M,codec:xme,hasher:Eme});({write:t,nom:e,adresseBdAccès:o}=N),{bd:c,fOublier:l}=await a.ouvrirBdTypée({id:o,type:"set",schéma:mre,options:{syncAutomatically:!0}})}else({bd:c,fOublier:l}=await a.ouvrirBdTypée({id:e,type:"set",schéma:mre,options:{AccessController:FV({write:t,storage:r}),syncAutomatically:!0}})),o=c.address,s=await X2t({storage:r,type:Yf,params:{write:t,nom:e,adresseBdAccès:o}}),s=bme("/",Yf,s);const u=new qi.EventEmitter,f=new vme(n);f.on("misÀJour",()=>u.emit("misÀJour"));const d=await yme(c,async M=>{M=[{rôle:fa,id:t},...M],await f.ajouterÉléments(M)}),g=async M=>await f.estAutorisé(M);return{type:Yf,address:s,adresseBdAccès:o,write:t,grant:async(M,N)=>{if(!cge.includes(M))throw new Error(`Erreur: Le rôle ${M} n'existe pas.`);if(!f._rôles[M].includes(N))try{const Y={rôle:M,id:N};await c.add(Y)}catch(Y){const H=Y;throw H.toString().includes("not append entry")?new Error(`Erreur : Le rôle ${M} ne peut pas être octroyé à ${N}.`):H}},revoke:async(M,N)=>{throw new Error("C'est très difficile à implémenter...avez-vous des idées ?")},canAppend:async M=>{const N=await i.getIdentity(M.identity);if(!N)return!1;const{id:Y}=N;return i.verifyIdentity(N)&&await g(Y)},close:async()=>{await d(),await l(),await f.fermer()},drop:async()=>{},suivreUtilisateursAutorisés:async M=>{const N=async()=>{const H=Object.keys(f._rôlesUtilisateurs[fa]).map(T=>({idCompte:T,rôle:fa})),E=H.map(T=>T.idCompte),k=Object.keys(f._rôlesUtilisateurs[Iu]).map(T=>({idCompte:T,rôle:Iu})).filter(T=>!E.includes(T.idCompte)),w=[...H,...k];await M(w)};return f.on("misÀJour",N),await N(),async()=>{f.off("misÀJour",N)}},suivreIdsOrbiteAutoriséesÉcriture:async M=>{const N=async()=>{await M([...f._rôles.MEMBRE,...f._rôles.MODÉRATEUR])};return f.on("misÀJour",N),await N(),async()=>{f.off("misÀJour",N)}},gestRôles:f,estAutorisé:g,estUnMembre:async M=>await f.estUnMembre(M),estUnModérateur:async M=>await f.estUnModérateur(M),bd:c}};$V.type=Yf;const Z2t=()=>{dge(),RE($V),RE(FV)};/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var ME={};ME.version="0.19.1";var Gs=1200,lm=1252,Br,J2t=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],UV={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},NA=function(t){J2t.indexOf(t)!=-1&&(lm=UV[0]=t)};function Q2t(){NA(1252)}var Ul=function(t){Gs=t,NA(t)};function MA(){Ul(1200),Q2t()}function LE(t){for(var e=[],r=0,n=t.length;r<n;++r)e[r]=t.charCodeAt(r);return e}function Sme(t){for(var e=[],r=0;r<t.length>>1;++r)e[r]=String.fromCharCode(t.charCodeAt(2*r)+(t.charCodeAt(2*r+1)<<8));return e.join("")}function Ame(t){for(var e=[],r=0;r<t.length>>1;++r)e[r]=String.fromCharCode(t.charCodeAt(2*r+1)+(t.charCodeAt(2*r)<<8));return e.join("")}var oy=function(t){var e=t.charCodeAt(0),r=t.charCodeAt(1);return e==255&&r==254?Sme(t.slice(2)):e==254&&r==255?Ame(t.slice(2)):e==65279?t.slice(1):t},Yw=function(e){return String.fromCharCode(e)},jN=function(e){return String.fromCharCode(e)};function eyt(t){Br=t,Ul=function(e){Gs=e,NA(e)},oy=function(e){return e.charCodeAt(0)===255&&e.charCodeAt(1)===254?Br.utils.decode(1200,LE(e.slice(2))):e},Yw=function(r){return Gs===1200?String.fromCharCode(r):Br.utils.decode(Gs,[r&255,r>>8])[0]},jN=function(r){return Br.utils.decode(lm,[r])[0]},t2e()}var tyt=null,Vl="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function FE(t){for(var e="",r=0,n=0,i=0,s=0,a=0,o=0,c=0,l=0;l<t.length;)r=t.charCodeAt(l++),s=r>>2,n=t.charCodeAt(l++),a=(r&3)<<4|n>>4,i=t.charCodeAt(l++),o=(n&15)<<2|i>>6,c=i&63,isNaN(n)?o=c=64:isNaN(i)&&(c=64),e+=Vl.charAt(s)+Vl.charAt(a)+Vl.charAt(o)+Vl.charAt(c);return e}function ryt(t){for(var e="",r=0,n=0,i=0,s=0,a=0,o=0,c=0,l=0;l<t.length;)r=t.charCodeAt(l++),r>255&&(r=95),s=r>>2,n=t.charCodeAt(l++),n>255&&(n=95),a=(r&3)<<4|n>>4,i=t.charCodeAt(l++),i>255&&(i=95),o=(n&15)<<2|i>>6,c=i&63,isNaN(n)?o=c=64:isNaN(i)&&(c=64),e+=Vl.charAt(s)+Vl.charAt(a)+Vl.charAt(o)+Vl.charAt(c);return e}function al(t){var e="",r=0,n=0,i=0,s=0,a=0,o=0,c=0;t=t.replace(/^data:([^\/]+\/[^\/]+)?;base64\,/,"").replace(/[^\w\+\/\=]/g,"");for(var l=0;l<t.length;)s=Vl.indexOf(t.charAt(l++)),a=Vl.indexOf(t.charAt(l++)),r=s<<2|a>>4,e+=String.fromCharCode(r),o=Vl.indexOf(t.charAt(l++)),n=(a&15)<<4|o>>2,o!==64&&(e+=String.fromCharCode(n)),c=Vl.indexOf(t.charAt(l++)),i=(o&3)<<6|c,c!==64&&(e+=String.fromCharCode(i));return e}var tn=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),Ah=function(){if(typeof Buffer<"u"){var t=!Buffer.from;if(!t)try{Buffer.from("foo","utf8")}catch{t=!0}return t?function(e,r){return r?new Buffer(e,r):new Buffer(e)}:Buffer.from.bind(Buffer)}return function(){}}(),_4=function(){if(typeof Buffer>"u")return!1;var t=Ah([65,0]);if(!t)return!1;var e=t.toString("utf16le");return e.length==1}();function V1(t){return tn?Buffer.alloc?Buffer.alloc(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}function yre(t){return tn?Buffer.allocUnsafe?Buffer.allocUnsafe(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}var jo=function(e){return tn?Ah(e,"binary"):e.split("").map(function(r){return r.charCodeAt(0)&255})};function Z6(t){if(typeof ArrayBuffer>"u")return jo(t);for(var e=new ArrayBuffer(t.length),r=new Uint8Array(e),n=0;n!=t.length;++n)r[n]=t.charCodeAt(n)&255;return e}function lh(t){if(Array.isArray(t))return t.map(function(n){return String.fromCharCode(n)}).join("");for(var e=[],r=0;r<t.length;++r)e[r]=String.fromCharCode(t[r]);return e.join("")}function nyt(t){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(t)}function VV(t){if(typeof ArrayBuffer>"u")throw new Error("Unsupported");if(t instanceof ArrayBuffer)return VV(new Uint8Array(t));for(var e=new Array(t.length),r=0;r<t.length;++r)e[r]=t[r];return e}var Ds=tn?function(t){return Buffer.concat(t.map(function(e){return Buffer.isBuffer(e)?e:Ah(e)}))}:function(t){if(typeof Uint8Array<"u"){var e=0,r=0;for(e=0;e<t.length;++e)r+=t[e].length;var n=new Uint8Array(r),i=0;for(e=0,r=0;e<t.length;r+=i,++e)i=t[e].length,t[e]instanceof Uint8Array?n.set(t[e],r):typeof t[e]=="string"?n.set(new Uint8Array(jo(t[e])),r):n.set(new Uint8Array(t[e]),r);return n}return[].concat.apply([],t.map(function(s){return Array.isArray(s)?s:[].slice.call(s)}))};function iyt(t){for(var e=[],r=0,n=t.length+250,i=V1(t.length+255),s=0;s<t.length;++s){var a=t.charCodeAt(s);if(a<128)i[r++]=a;else if(a<2048)i[r++]=192|a>>6&31,i[r++]=128|a&63;else if(a>=55296&&a<57344){a=(a&1023)+64;var o=t.charCodeAt(++s)&1023;i[r++]=240|a>>8&7,i[r++]=128|a>>2&63,i[r++]=128|o>>6&15|(a&3)<<4,i[r++]=128|o&63}else i[r++]=224|a>>12&15,i[r++]=128|a>>6&63,i[r++]=128|a&63;r>n&&(e.push(i.slice(0,r)),r=0,i=V1(65535),n=65530)}return e.push(i.slice(0,r)),Ds(e)}var fo=/\u0000/g,Xw=/[\u0001-\u0006]/g;function Ty(t){for(var e="",r=t.length-1;r>=0;)e+=t.charAt(r--);return e}function Ru(t,e){var r=""+t;return r.length>=e?r:An("0",e-r.length)+r}function jV(t,e){var r=""+t;return r.length>=e?r:An(" ",e-r.length)+r}function $E(t,e){var r=""+t;return r.length>=e?r:r+An(" ",e-r.length)}function syt(t,e){var r=""+Math.round(t);return r.length>=e?r:An("0",e-r.length)+r}function ayt(t,e){var r=""+t;return r.length>=e?r:An("0",e-r.length)+r}var vre=Math.pow(2,32);function V2(t,e){if(t>vre||t<-vre)return syt(t,e);var r=Math.round(t);return ayt(r,e)}function UE(t,e){return e=e||0,t.length>=7+e&&(t.charCodeAt(e)|32)===103&&(t.charCodeAt(e+1)|32)===101&&(t.charCodeAt(e+2)|32)===110&&(t.charCodeAt(e+3)|32)===101&&(t.charCodeAt(e+4)|32)===114&&(t.charCodeAt(e+5)|32)===97&&(t.charCodeAt(e+6)|32)===108}var bre=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],oB=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function oyt(t){return t||(t={}),t[0]="General",t[1]="0",t[2]="0.00",t[3]="#,##0",t[4]="#,##0.00",t[9]="0%",t[10]="0.00%",t[11]="0.00E+00",t[12]="# ?/?",t[13]="# ??/??",t[14]="m/d/yy",t[15]="d-mmm-yy",t[16]="d-mmm",t[17]="mmm-yy",t[18]="h:mm AM/PM",t[19]="h:mm:ss AM/PM",t[20]="h:mm",t[21]="h:mm:ss",t[22]="m/d/yy h:mm",t[37]="#,##0 ;(#,##0)",t[38]="#,##0 ;[Red](#,##0)",t[39]="#,##0.00;(#,##0.00)",t[40]="#,##0.00;[Red](#,##0.00)",t[45]="mm:ss",t[46]="[h]:mm:ss",t[47]="mmss.0",t[48]="##0.0E+0",t[49]="@",t[56]='"上午/下午 "hh"時"mm"分"ss"秒 "',t}var tr={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"上午/下午 "hh"時"mm"分"ss"秒 "'},wre={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},cyt={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function VE(t,e,r){for(var n=t<0?-1:1,i=t*n,s=0,a=1,o=0,c=1,l=0,u=0,f=Math.floor(i);l<e&&(f=Math.floor(i),o=f*a+s,u=f*l+c,!(i-f<5e-8));)i=1/(i-f),s=a,a=o,c=l,l=u;if(u>e&&(l>e?(u=c,o=s):(u=l,o=a)),!r)return[0,n*o,u];var h=Math.floor(n*o/u);return[h,n*o-h*u,u]}function b1(t,e,r){if(t>2958465||t<0)return null;var n=t|0,i=Math.floor(86400*(t-n)),s=0,a=[],o={D:n,T:i,u:86400*(t-n)-i,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(o.u)<1e-6&&(o.u=0),e&&e.date1904&&(n+=1462),o.u>.9999&&(o.u=0,++i==86400&&(o.T=i=0,++n,++o.D)),n===60)a=r?[1317,10,29]:[1900,2,29],s=3;else if(n===0)a=r?[1317,8,29]:[1900,1,0],s=6;else{n>60&&--n;var c=new Date(1900,0,1);c.setDate(c.getDate()+n-1),a=[c.getFullYear(),c.getMonth()+1,c.getDate()],s=c.getDay(),n<60&&(s=(s+6)%7),r&&(s=pyt(c,a))}return o.y=a[0],o.m=a[1],o.d=a[2],o.S=i%60,i=Math.floor(i/60),o.M=i%60,i=Math.floor(i/60),o.H=i,o.q=s,o}var Tme=new Date(1899,11,31,0,0,0),lyt=Tme.getTime(),uyt=new Date(1900,2,1,0,0,0);function kme(t,e){var r=t.getTime();return e?r-=1461*24*60*60*1e3:t>=uyt&&(r+=24*60*60*1e3),(r-(lyt+(t.getTimezoneOffset()-Tme.getTimezoneOffset())*6e4))/(24*60*60*1e3)}function zV(t){return t.indexOf(".")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function fyt(t){return t.indexOf("E")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function hyt(t){var e=t<0?12:11,r=zV(t.toFixed(12));return r.length<=e||(r=t.toPrecision(10),r.length<=e)?r:t.toExponential(5)}function dyt(t){var e=zV(t.toFixed(11));return e.length>(t<0?12:11)||e==="0"||e==="-0"?t.toPrecision(6):e}function x4(t){var e=Math.floor(Math.log(Math.abs(t))*Math.LOG10E),r;return e>=-4&&e<=-1?r=t.toPrecision(10+e):Math.abs(e)<=9?r=hyt(t):e===10?r=t.toFixed(10).substr(0,12):r=dyt(t),zV(fyt(r.toUpperCase()))}function um(t,e){switch(typeof t){case"string":return t;case"boolean":return t?"TRUE":"FALSE";case"number":return(t|0)===t?t.toString(10):x4(t);case"undefined":return"";case"object":if(t==null)return"";if(t instanceof Date)return Cc(14,kme(t,e&&e.date1904),e)}throw new Error("unsupported value in General format: "+t)}function pyt(t,e){e[0]-=581;var r=t.getDay();return t<60&&(r=(r+6)%7),r}function gyt(t,e,r,n){var i="",s=0,a=0,o=r.y,c,l=0;switch(t){case 98:o=r.y+543;case 121:switch(e.length){case 1:case 2:c=o%100,l=2;break;default:c=o%1e4,l=4;break}break;case 109:switch(e.length){case 1:case 2:c=r.m,l=e.length;break;case 3:return oB[r.m-1][1];case 5:return oB[r.m-1][0];default:return oB[r.m-1][2]}break;case 100:switch(e.length){case 1:case 2:c=r.d,l=e.length;break;case 3:return bre[r.q][0];default:return bre[r.q][1]}break;case 104:switch(e.length){case 1:case 2:c=1+(r.H+11)%12,l=e.length;break;default:throw"bad hour format: "+e}break;case 72:switch(e.length){case 1:case 2:c=r.H,l=e.length;break;default:throw"bad hour format: "+e}break;case 77:switch(e.length){case 1:case 2:c=r.M,l=e.length;break;default:throw"bad minute format: "+e}break;case 115:if(e!="s"&&e!="ss"&&e!=".0"&&e!=".00"&&e!=".000")throw"bad second format: "+e;return r.u===0&&(e=="s"||e=="ss")?Ru(r.S,e.length):(n>=2?a=n===3?1e3:100:a=n===1?10:1,s=Math.round(a*(r.S+r.u)),s>=60*a&&(s=0),e==="s"?s===0?"0":""+s/a:(i=Ru(s,2+n),e==="ss"?i.substr(0,2):"."+i.substr(2,e.length-1)));case 90:switch(e){case"[h]":case"[hh]":c=r.D*24+r.H;break;case"[m]":case"[mm]":c=(r.D*24+r.H)*60+r.M;break;case"[s]":case"[ss]":c=((r.D*24+r.H)*60+r.M)*60+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+e}l=e.length===3?1:2;break;case 101:c=o,l=1;break}var u=l>0?Ru(c,l):"";return u}function Cd(t){var e=3;if(t.length<=e)return t;for(var r=t.length%e,n=t.substr(0,r);r!=t.length;r+=e)n+=(n.length>0?",":"")+t.substr(r,e);return n}var Cme=/%/g;function myt(t,e,r){var n=e.replace(Cme,""),i=e.length-n.length;return Vd(t,n,r*Math.pow(10,2*i))+An("%",i)}function yyt(t,e,r){for(var n=e.length-1;e.charCodeAt(n-1)===44;)--n;return Vd(t,e.substr(0,n),r/Math.pow(10,3*(e.length-n)))}function Ime(t,e){var r,n=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+Ime(t,-e);var i=t.indexOf(".");i===-1&&(i=t.indexOf("E"));var s=Math.floor(Math.log(e)*Math.LOG10E)%i;if(s<0&&(s+=i),r=(e/Math.pow(10,s)).toPrecision(n+1+(i+s)%i),r.indexOf("e")===-1){var a=Math.floor(Math.log(e)*Math.LOG10E);for(r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(a-r.length+s):r+="E+"+(a-s);r.substr(0,2)==="0.";)r=r.charAt(0)+r.substr(2,i)+"."+r.substr(2+i),r=r.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,c,l,u){return c+l+u.substr(0,(i+s)%i)+"."+u.substr(s)+"E"})}else r=e.toExponential(n);return t.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),t.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var Rme=/# (\?+)( ?)\/( ?)(\d+)/;function vyt(t,e,r){var n=parseInt(t[4],10),i=Math.round(e*n),s=Math.floor(i/n),a=i-s*n,o=n;return r+(s===0?"":""+s)+" "+(a===0?An(" ",t[1].length+1+t[4].length):jV(a,t[1].length)+t[2]+"/"+t[3]+Ru(o,t[4].length))}function byt(t,e,r){return r+(e===0?"":""+e)+An(" ",t[1].length+2+t[4].length)}var Pme=/^#*0*\.([0#]+)/,Bme=/\).*[0#]/,Dme=/\(###\) ###\\?-####/;function Lo(t){for(var e="",r,n=0;n!=t.length;++n)switch(r=t.charCodeAt(n)){case 35:break;case 63:e+=" ";break;case 48:e+="0";break;default:e+=String.fromCharCode(r)}return e}function _re(t,e){var r=Math.pow(10,e);return""+Math.round(t*r)/r}function xre(t,e){var r=t-Math.floor(t),n=Math.pow(10,e);return e<(""+Math.round(r*n)).length?0:Math.round(r*n)}function wyt(t,e){return e<(""+Math.round((t-Math.floor(t))*Math.pow(10,e))).length?1:0}function _yt(t){return t<2147483647&&t>-2147483648?""+(t>=0?t|0:t-1|0):""+Math.floor(t)}function kl(t,e,r){if(t.charCodeAt(0)===40&&!e.match(Bme)){var n=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?kl("n",n,r):"("+kl("n",n,-r)+")"}if(e.charCodeAt(e.length-1)===44)return yyt(t,e,r);if(e.indexOf("%")!==-1)return myt(t,e,r);if(e.indexOf("E")!==-1)return Ime(e,r);if(e.charCodeAt(0)===36)return"$"+kl(t,e.substr(e.charAt(1)==" "?2:1),r);var i,s,a,o,c=Math.abs(r),l=r<0?"-":"";if(e.match(/^00+$/))return l+V2(c,e.length);if(e.match(/^[#?]+$/))return i=V2(r,0),i==="0"&&(i=""),i.length>e.length?i:Lo(e.substr(0,e.length-i.length))+i;if(s=e.match(Rme))return vyt(s,c,l);if(e.match(/^#+0+$/))return l+V2(c,e.length-e.indexOf("0"));if(s=e.match(Pme))return i=_re(r,s[1].length).replace(/^([^\.]+)$/,"$1."+Lo(s[1])).replace(/\.$/,"."+Lo(s[1])).replace(/\.(\d*)$/,function(g,p){return"."+p+An("0",Lo(s[1]).length-p.length)}),e.indexOf("0.")!==-1?i:i.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),s=e.match(/^(0*)\.(#*)$/))return l+_re(c,s[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=e.match(/^#{1,3},##0(\.?)$/))return l+Cd(V2(c,0));if(s=e.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+kl(t,e,-r):Cd(""+(Math.floor(r)+wyt(r,s[1].length)))+"."+Ru(xre(r,s[1].length),s[1].length);if(s=e.match(/^#,#*,#0/))return kl(t,e.replace(/^#,#*,/,""),r);if(s=e.match(/^([0#]+)(\\?-([0#]+))+$/))return i=Ty(kl(t,e.replace(/[\\-]/g,""),r)),a=0,Ty(Ty(e.replace(/\\/g,"")).replace(/[0#]/g,function(g){return a<i.length?i.charAt(a++):g==="0"?"0":""}));if(e.match(Dme))return i=kl(t,"##########",r),"("+i.substr(0,3)+") "+i.substr(3,3)+"-"+i.substr(6);var u="";if(s=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(s[4].length,7),o=VE(c,Math.pow(10,a)-1,!1),i=""+l,u=Vd("n",s[1],o[1]),u.charAt(u.length-1)==" "&&(u=u.substr(0,u.length-1)+"0"),i+=u+s[2]+"/"+s[3],u=$E(o[2],a),u.length<s[4].length&&(u=Lo(s[4].substr(s[4].length-u.length))+u),i+=u,i;if(s=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(Math.max(s[1].length,s[4].length),7),o=VE(c,Math.pow(10,a)-1,!0),l+(o[0]||(o[1]?"":"0"))+" "+(o[1]?jV(o[1],a)+s[2]+"/"+s[3]+$E(o[2],a):An(" ",2*a+1+s[2].length+s[3].length));if(s=e.match(/^[#0?]+$/))return i=V2(r,0),e.length<=i.length?i:Lo(e.substr(0,e.length-i.length))+i;if(s=e.match(/^([#0?]+)\.([#0]+)$/)){i=""+r.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),a=i.indexOf(".");var f=e.indexOf(".")-a,h=e.length-i.length-f;return Lo(e.substr(0,f)+i+e.substr(e.length-h))}if(s=e.match(/^00,000\.([#0]*0)$/))return a=xre(r,s[1].length),r<0?"-"+kl(t,e,-r):Cd(_yt(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(g){return"00,"+(g.length<3?Ru(0,3-g.length):"")+g})+"."+Ru(a,s[1].length);switch(e){case"###,##0.00":return kl(t,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var d=Cd(V2(c,0));return d!=="0"?l+d:"";case"###,###.00":return kl(t,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return kl(t,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+e+"|")}function xyt(t,e,r){for(var n=e.length-1;e.charCodeAt(n-1)===44;)--n;return Vd(t,e.substr(0,n),r/Math.pow(10,3*(e.length-n)))}function Eyt(t,e,r){var n=e.replace(Cme,""),i=e.length-n.length;return Vd(t,n,r*Math.pow(10,2*i))+An("%",i)}function Ome(t,e){var r,n=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+Ome(t,-e);var i=t.indexOf(".");i===-1&&(i=t.indexOf("E"));var s=Math.floor(Math.log(e)*Math.LOG10E)%i;if(s<0&&(s+=i),r=(e/Math.pow(10,s)).toPrecision(n+1+(i+s)%i),!r.match(/[Ee]/)){var a=Math.floor(Math.log(e)*Math.LOG10E);r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(a-r.length+s):r+="E+"+(a-s),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,c,l,u){return c+l+u.substr(0,(i+s)%i)+"."+u.substr(s)+"E"})}else r=e.toExponential(n);return t.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),t.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function xf(t,e,r){if(t.charCodeAt(0)===40&&!e.match(Bme)){var n=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?xf("n",n,r):"("+xf("n",n,-r)+")"}if(e.charCodeAt(e.length-1)===44)return xyt(t,e,r);if(e.indexOf("%")!==-1)return Eyt(t,e,r);if(e.indexOf("E")!==-1)return Ome(e,r);if(e.charCodeAt(0)===36)return"$"+xf(t,e.substr(e.charAt(1)==" "?2:1),r);var i,s,a,o,c=Math.abs(r),l=r<0?"-":"";if(e.match(/^00+$/))return l+Ru(c,e.length);if(e.match(/^[#?]+$/))return i=""+r,r===0&&(i=""),i.length>e.length?i:Lo(e.substr(0,e.length-i.length))+i;if(s=e.match(Rme))return byt(s,c,l);if(e.match(/^#+0+$/))return l+Ru(c,e.length-e.indexOf("0"));if(s=e.match(Pme))return i=(""+r).replace(/^([^\.]+)$/,"$1."+Lo(s[1])).replace(/\.$/,"."+Lo(s[1])),i=i.replace(/\.(\d*)$/,function(g,p){return"."+p+An("0",Lo(s[1]).length-p.length)}),e.indexOf("0.")!==-1?i:i.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),s=e.match(/^(0*)\.(#*)$/))return l+(""+c).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=e.match(/^#{1,3},##0(\.?)$/))return l+Cd(""+c);if(s=e.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+xf(t,e,-r):Cd(""+r)+"."+An("0",s[1].length);if(s=e.match(/^#,#*,#0/))return xf(t,e.replace(/^#,#*,/,""),r);if(s=e.match(/^([0#]+)(\\?-([0#]+))+$/))return i=Ty(xf(t,e.replace(/[\\-]/g,""),r)),a=0,Ty(Ty(e.replace(/\\/g,"")).replace(/[0#]/g,function(g){return a<i.length?i.charAt(a++):g==="0"?"0":""}));if(e.match(Dme))return i=xf(t,"##########",r),"("+i.substr(0,3)+") "+i.substr(3,3)+"-"+i.substr(6);var u="";if(s=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(s[4].length,7),o=VE(c,Math.pow(10,a)-1,!1),i=""+l,u=Vd("n",s[1],o[1]),u.charAt(u.length-1)==" "&&(u=u.substr(0,u.length-1)+"0"),i+=u+s[2]+"/"+s[3],u=$E(o[2],a),u.length<s[4].length&&(u=Lo(s[4].substr(s[4].length-u.length))+u),i+=u,i;if(s=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(Math.max(s[1].length,s[4].length),7),o=VE(c,Math.pow(10,a)-1,!0),l+(o[0]||(o[1]?"":"0"))+" "+(o[1]?jV(o[1],a)+s[2]+"/"+s[3]+$E(o[2],a):An(" ",2*a+1+s[2].length+s[3].length));if(s=e.match(/^[#0?]+$/))return i=""+r,e.length<=i.length?i:Lo(e.substr(0,e.length-i.length))+i;if(s=e.match(/^([#0]+)\.([#0]+)$/)){i=""+r.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),a=i.indexOf(".");var f=e.indexOf(".")-a,h=e.length-i.length-f;return Lo(e.substr(0,f)+i+e.substr(e.length-h))}if(s=e.match(/^00,000\.([#0]*0)$/))return r<0?"-"+xf(t,e,-r):Cd(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(g){return"00,"+(g.length<3?Ru(0,3-g.length):"")+g})+"."+Ru(0,s[1].length);switch(e){case"###,###":case"##,###":case"#,###":var d=Cd(""+c);return d!=="0"?l+d:"";default:if(e.match(/\.[0#?]*$/))return xf(t,e.slice(0,e.lastIndexOf(".")),r)+Lo(e.slice(e.lastIndexOf(".")))}throw new Error("unsupported format |"+e+"|")}function Vd(t,e,r){return(r|0)===r?xf(t,e,r):kl(t,e,r)}function Syt(t){for(var e=[],r=!1,n=0,i=0;n<t.length;++n)switch(t.charCodeAt(n)){case 34:r=!r;break;case 95:case 42:case 92:++n;break;case 59:e[e.length]=t.substr(i,n-i),i=n+1}if(e[e.length]=t.substr(i),r===!0)throw new Error("Format |"+t+"| unterminated string ");return e}var Nme=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function up(t){for(var e=0,r="",n="";e<t.length;)switch(r=t.charAt(e)){case"G":UE(t,e)&&(e+=6),e++;break;case'"':for(;t.charCodeAt(++e)!==34&&e<t.length;);++e;break;case"\\":e+=2;break;case"_":e+=2;break;case"@":++e;break;case"B":case"b":if(t.charAt(e+1)==="1"||t.charAt(e+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"上":if(t.substr(e,3).toUpperCase()==="A/P"||t.substr(e,5).toUpperCase()==="AM/PM"||t.substr(e,5).toUpperCase()==="上午/下午")return!0;++e;break;case"[":for(n=r;t.charAt(e++)!=="]"&&e<t.length;)n+=t.charAt(e);if(n.match(Nme))return!0;break;case".":case"0":case"#":for(;e<t.length&&("0#?.,E+-%".indexOf(r=t.charAt(++e))>-1||r=="\\"&&t.charAt(e+1)=="-"&&"0#".indexOf(t.charAt(e+2))>-1););break;case"?":for(;t.charAt(++e)===r;);break;case"*":++e,(t.charAt(e)==" "||t.charAt(e)=="*")&&++e;break;case"(":case")":++e;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;e<t.length&&"0123456789".indexOf(t.charAt(++e))>-1;);break;case" ":++e;break;default:++e;break}return!1}function Ayt(t,e,r,n){for(var i=[],s="",a=0,o="",c="t",l,u,f,h="H";a<t.length;)switch(o=t.charAt(a)){case"G":if(!UE(t,a))throw new Error("unrecognized character "+o+" in "+t);i[i.length]={t:"G",v:"General"},a+=7;break;case'"':for(s="";(f=t.charCodeAt(++a))!==34&&a<t.length;)s+=String.fromCharCode(f);i[i.length]={t:"t",v:s},++a;break;case"\\":var d=t.charAt(++a),g=d==="("||d===")"?d:"t";i[i.length]={t:g,v:d},++a;break;case"_":i[i.length]={t:"t",v:" "},a+=2;break;case"@":i[i.length]={t:"T",v:e},++a;break;case"B":case"b":if(t.charAt(a+1)==="1"||t.charAt(a+1)==="2"){if(l==null&&(l=b1(e,r,t.charAt(a+1)==="2"),l==null))return"";i[i.length]={t:"X",v:t.substr(a,2)},c=o,a+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":o=o.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(e<0||l==null&&(l=b1(e,r),l==null))return"";for(s=o;++a<t.length&&t.charAt(a).toLowerCase()===o;)s+=o;o==="m"&&c.toLowerCase()==="h"&&(o="M"),o==="h"&&(o=h),i[i.length]={t:o,v:s},c=o;break;case"A":case"a":case"上":var p={t:o,v:o};if(l==null&&(l=b1(e,r)),t.substr(a,3).toUpperCase()==="A/P"?(l!=null&&(p.v=l.H>=12?t.charAt(a+2):o),p.t="T",h="h",a+=3):t.substr(a,5).toUpperCase()==="AM/PM"?(l!=null&&(p.v=l.H>=12?"PM":"AM"),p.t="T",a+=5,h="h"):t.substr(a,5).toUpperCase()==="上午/下午"?(l!=null&&(p.v=l.H>=12?"下午":"上午"),p.t="T",a+=5,h="h"):(p.t="t",++a),l==null&&p.t==="T")return"";i[i.length]=p,c=o;break;case"[":for(s=o;t.charAt(a++)!=="]"&&a<t.length;)s+=t.charAt(a);if(s.slice(-1)!=="]")throw'unterminated "[" block: |'+s+"|";if(s.match(Nme)){if(l==null&&(l=b1(e,r),l==null))return"";i[i.length]={t:"Z",v:s.toLowerCase()},c=s.charAt(1)}else s.indexOf("$")>-1&&(s=(s.match(/\$([^-\[\]]*)/)||[])[1]||"$",up(t)||(i[i.length]={t:"t",v:s}));break;case".":if(l!=null){for(s=o;++a<t.length&&(o=t.charAt(a))==="0";)s+=o;i[i.length]={t:"s",v:s};break}case"0":case"#":for(s=o;++a<t.length&&"0#?.,E+-%".indexOf(o=t.charAt(a))>-1;)s+=o;i[i.length]={t:"n",v:s};break;case"?":for(s=o;t.charAt(++a)===o;)s+=o;i[i.length]={t:o,v:s},c=o;break;case"*":++a,(t.charAt(a)==" "||t.charAt(a)=="*")&&++a;break;case"(":case")":i[i.length]={t:n===1?"t":o,v:o},++a;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(s=o;a<t.length&&"0123456789".indexOf(t.charAt(++a))>-1;)s+=t.charAt(a);i[i.length]={t:"D",v:s};break;case" ":i[i.length]={t:o,v:o},++a;break;case"$":i[i.length]={t:"t",v:"$"},++a;break;default:if(",$-+/():!^&'~{}<>=€acfijklopqrtuvwxzP".indexOf(o)===-1)throw new Error("unrecognized character "+o+" in "+t);i[i.length]={t:"t",v:o},++a;break}var m=0,y=0,v;for(a=i.length-1,c="t";a>=0;--a)switch(i[a].t){case"h":case"H":i[a].t=h,c="h",m<1&&(m=1);break;case"s":(v=i[a].v.match(/\.0+$/))&&(y=Math.max(y,v[0].length-1)),m<3&&(m=3);case"d":case"y":case"M":case"e":c=i[a].t;break;case"m":c==="s"&&(i[a].t="M",m<2&&(m=2));break;case"X":break;case"Z":m<1&&i[a].v.match(/[Hh]/)&&(m=1),m<2&&i[a].v.match(/[Mm]/)&&(m=2),m<3&&i[a].v.match(/[Ss]/)&&(m=3)}switch(m){case 0:break;case 1:l.u>=.5&&(l.u=0,++l.S),l.S>=60&&(l.S=0,++l.M),l.M>=60&&(l.M=0,++l.H);break;case 2:l.u>=.5&&(l.u=0,++l.S),l.S>=60&&(l.S=0,++l.M);break}var _="",x;for(a=0;a<i.length;++a)switch(i[a].t){case"t":case"T":case" ":case"D":break;case"X":i[a].v="",i[a].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":i[a].v=gyt(i[a].t.charCodeAt(0),i[a].v,l,y),i[a].t="t";break;case"n":case"?":for(x=a+1;i[x]!=null&&((o=i[x].t)==="?"||o==="D"||(o===" "||o==="t")&&i[x+1]!=null&&(i[x+1].t==="?"||i[x+1].t==="t"&&i[x+1].v==="/")||i[a].t==="("&&(o===" "||o==="n"||o===")")||o==="t"&&(i[x].v==="/"||i[x].v===" "&&i[x+1]!=null&&i[x+1].t=="?"));)i[a].v+=i[x].v,i[x]={v:"",t:";"},++x;_+=i[a].v,a=x-1;break;case"G":i[a].t="t",i[a].v=um(e,r);break}var A="",C,R;if(_.length>0){_.charCodeAt(0)==40?(C=e<0&&_.charCodeAt(0)===45?-e:e,R=Vd("n",_,C)):(C=e<0&&n>1?-e:e,R=Vd("n",_,C),C<0&&i[0]&&i[0].t=="t"&&(R=R.substr(1),i[0].v="-"+i[0].v)),x=R.length-1;var M=i.length;for(a=0;a<i.length;++a)if(i[a]!=null&&i[a].t!="t"&&i[a].v.indexOf(".")>-1){M=a;break}var N=i.length;if(M===i.length&&R.indexOf("E")===-1){for(a=i.length-1;a>=0;--a)i[a]==null||"n?".indexOf(i[a].t)===-1||(x>=i[a].v.length-1?(x-=i[a].v.length,i[a].v=R.substr(x+1,i[a].v.length)):x<0?i[a].v="":(i[a].v=R.substr(0,x+1),x=-1),i[a].t="t",N=a);x>=0&&N<i.length&&(i[N].v=R.substr(0,x+1)+i[N].v)}else if(M!==i.length&&R.indexOf("E")===-1){for(x=R.indexOf(".")-1,a=M;a>=0;--a)if(!(i[a]==null||"n?".indexOf(i[a].t)===-1)){for(u=i[a].v.indexOf(".")>-1&&a===M?i[a].v.indexOf(".")-1:i[a].v.length-1,A=i[a].v.substr(u+1);u>=0;--u)x>=0&&(i[a].v.charAt(u)==="0"||i[a].v.charAt(u)==="#")&&(A=R.charAt(x--)+A);i[a].v=A,i[a].t="t",N=a}for(x>=0&&N<i.length&&(i[N].v=R.substr(0,x+1)+i[N].v),x=R.indexOf(".")+1,a=M;a<i.length;++a)if(!(i[a]==null||"n?(".indexOf(i[a].t)===-1&&a!==M)){for(u=i[a].v.indexOf(".")>-1&&a===M?i[a].v.indexOf(".")+1:0,A=i[a].v.substr(0,u);u<i[a].v.length;++u)x<R.length&&(A+=R.charAt(x++));i[a].v=A,i[a].t="t",N=a}}}for(a=0;a<i.length;++a)i[a]!=null&&"n?".indexOf(i[a].t)>-1&&(C=n>1&&e<0&&a>0&&i[a-1].v==="-"?-e:e,i[a].v=Vd(i[a].t,i[a].v,C),i[a].t="t");var Y="";for(a=0;a!==i.length;++a)i[a]!=null&&(Y+=i[a].v);return Y}var Ere=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function Sre(t,e){if(e==null)return!1;var r=parseFloat(e[2]);switch(e[1]){case"=":if(t==r)return!0;break;case">":if(t>r)return!0;break;case"<":if(t<r)return!0;break;case"<>":if(t!=r)return!0;break;case">=":if(t>=r)return!0;break;case"<=":if(t<=r)return!0;break}return!1}function Tyt(t,e){var r=Syt(t),n=r.length,i=r[n-1].indexOf("@");if(n<4&&i>-1&&--n,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if(typeof e!="number")return[4,r.length===4||i>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=i>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=i>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=i>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"];break}var s=e>0?r[0]:e<0?r[1]:r[2];if(r[0].indexOf("[")===-1&&r[1].indexOf("[")===-1)return[n,s];if(r[0].match(/\[[=<>]/)!=null||r[1].match(/\[[=<>]/)!=null){var a=r[0].match(Ere),o=r[1].match(Ere);return Sre(e,a)?[n,r[0]]:Sre(e,o)?[n,r[1]]:[n,r[a!=null&&o!=null?2:1]]}return[n,s]}function Cc(t,e,r){r==null&&(r={});var n="";switch(typeof t){case"string":t=="m/d/yy"&&r.dateNF?n=r.dateNF:n=t;break;case"number":t==14&&r.dateNF?n=r.dateNF:n=(r.table!=null?r.table:tr)[t],n==null&&(n=r.table&&r.table[wre[t]]||tr[wre[t]]),n==null&&(n=cyt[t]||"General");break}if(UE(n,0))return um(e,r);e instanceof Date&&(e=kme(e,r.date1904));var i=Tyt(n,e);if(UE(i[1]))return um(e,r);if(e===!0)e="TRUE";else if(e===!1)e="FALSE";else if(e===""||e==null)return"";return Ayt(i[1],e,r,i[0])}function qV(t,e){if(typeof e!="number"){e=+e||-1;for(var r=0;r<392;++r){if(tr[r]==null){e<0&&(e=r);continue}if(tr[r]==t){e=r;break}}e<0&&(e=391)}return tr[e]=t,e}function J6(t){for(var e=0;e!=392;++e)t[e]!==void 0&&qV(t[e],e)}function Eb(){tr=oyt()}var Mme={format:Cc,load:qV,_table:tr,load_table:J6,parse_date_code:b1,is_date:up,get_table:function(){return Mme._table=tr}},kyt={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},Lme=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function Cyt(t){var e=typeof t=="number"?tr[t]:t;return e=e.replace(Lme,"(\\d+)"),new RegExp("^"+e+"$")}function Iyt(t,e,r){var n=-1,i=-1,s=-1,a=-1,o=-1,c=-1;(e.match(Lme)||[]).forEach(function(f,h){var d=parseInt(r[h+1],10);switch(f.toLowerCase().charAt(0)){case"y":n=d;break;case"d":s=d;break;case"h":a=d;break;case"s":c=d;break;case"m":a>=0?o=d:i=d;break}}),c>=0&&o==-1&&i>=0&&(o=i,i=-1);var l=(""+(n>=0?n:new Date().getFullYear())).slice(-4)+"-"+("00"+(i>=1?i:1)).slice(-2)+"-"+("00"+(s>=1?s:1)).slice(-2);l.length==7&&(l="0"+l),l.length==8&&(l="20"+l);var u=("00"+(a>=0?a:0)).slice(-2)+":"+("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(c>=0?c:0)).slice(-2);return a==-1&&o==-1&&c==-1?l:n==-1&&i==-1&&s==-1?u:l+"T"+u}var Ryt={"d.m":"d\\.m"};function P1(t,e){return qV(Ryt[t]||t,e)}var Are=function(){var t={};t.version="1.2.0";function e(){for(var R=0,M=new Array(256),N=0;N!=256;++N)R=N,R=R&1?-306674912^R>>>1:R>>>1,R=R&1?-306674912^R>>>1:R>>>1,R=R&1?-306674912^R>>>1:R>>>1,R=R&1?-306674912^R>>>1:R>>>1,R=R&1?-306674912^R>>>1:R>>>1,R=R&1?-306674912^R>>>1:R>>>1,R=R&1?-306674912^R>>>1:R>>>1,R=R&1?-306674912^R>>>1:R>>>1,M[N]=R;return typeof Int32Array<"u"?new Int32Array(M):M}var r=e();function n(R){var M=0,N=0,Y=0,H=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(Y=0;Y!=256;++Y)H[Y]=R[Y];for(Y=0;Y!=256;++Y)for(N=R[Y],M=256+Y;M<4096;M+=256)N=H[M]=N>>>8^R[N&255];var E=[];for(Y=1;Y!=16;++Y)E[Y-1]=typeof Int32Array<"u"?H.subarray(Y*256,Y*256+256):H.slice(Y*256,Y*256+256);return E}var i=n(r),s=i[0],a=i[1],o=i[2],c=i[3],l=i[4],u=i[5],f=i[6],h=i[7],d=i[8],g=i[9],p=i[10],m=i[11],y=i[12],v=i[13],_=i[14];function x(R,M){for(var N=M^-1,Y=0,H=R.length;Y<H;)N=N>>>8^r[(N^R.charCodeAt(Y++))&255];return~N}function A(R,M){for(var N=M^-1,Y=R.length-15,H=0;H<Y;)N=_[R[H++]^N&255]^v[R[H++]^N>>8&255]^y[R[H++]^N>>16&255]^m[R[H++]^N>>>24]^p[R[H++]]^g[R[H++]]^d[R[H++]]^h[R[H++]]^f[R[H++]]^u[R[H++]]^l[R[H++]]^c[R[H++]]^o[R[H++]]^a[R[H++]]^s[R[H++]]^r[R[H++]];for(Y+=15;H<Y;)N=N>>>8^r[(N^R[H++])&255];return~N}function C(R,M){for(var N=M^-1,Y=0,H=R.length,E=0,k=0;Y<H;)E=R.charCodeAt(Y++),E<128?N=N>>>8^r[(N^E)&255]:E<2048?(N=N>>>8^r[(N^(192|E>>6&31))&255],N=N>>>8^r[(N^(128|E&63))&255]):E>=55296&&E<57344?(E=(E&1023)+64,k=R.charCodeAt(Y++)&1023,N=N>>>8^r[(N^(240|E>>8&7))&255],N=N>>>8^r[(N^(128|E>>2&63))&255],N=N>>>8^r[(N^(128|k>>6&15|(E&3)<<4))&255],N=N>>>8^r[(N^(128|k&63))&255]):(N=N>>>8^r[(N^(224|E>>12&15))&255],N=N>>>8^r[(N^(128|E>>6&63))&255],N=N>>>8^r[(N^(128|E&63))&255]);return~N}return t.table=r,t.bstr=x,t.buf=A,t.str=C,t}(),Kt=function(){var e={};e.version="1.2.2";function r(fe,_e){for(var me=fe.split("/"),we=_e.split("/"),xe=0,Se=0,Le=Math.min(me.length,we.length);xe<Le;++xe){if(Se=me[xe].length-we[xe].length)return Se;if(me[xe]!=we[xe])return me[xe]<we[xe]?-1:1}return me.length-we.length}function n(fe){if(fe.charAt(fe.length-1)=="/")return fe.slice(0,-1).indexOf("/")===-1?fe:n(fe.slice(0,-1));var _e=fe.lastIndexOf("/");return _e===-1?fe:fe.slice(0,_e+1)}function i(fe){if(fe.charAt(fe.length-1)=="/")return i(fe.slice(0,-1));var _e=fe.lastIndexOf("/");return _e===-1?fe:fe.slice(_e+1)}function s(fe,_e){typeof _e=="string"&&(_e=new Date(_e));var me=_e.getHours();me=me<<6|_e.getMinutes(),me=me<<5|_e.getSeconds()>>>1,fe.write_shift(2,me);var we=_e.getFullYear()-1980;we=we<<4|_e.getMonth()+1,we=we<<5|_e.getDate(),fe.write_shift(2,we)}function a(fe){var _e=fe.read_shift(2)&65535,me=fe.read_shift(2)&65535,we=new Date,xe=me&31;me>>>=5;var Se=me&15;me>>>=4,we.setMilliseconds(0),we.setFullYear(me+1980),we.setMonth(Se-1),we.setDate(xe);var Le=_e&31;_e>>>=5;var Ke=_e&63;return _e>>>=6,we.setHours(_e),we.setMinutes(Ke),we.setSeconds(Le<<1),we}function o(fe){Ws(fe,0);for(var _e={},me=0;fe.l<=fe.length-4;){var we=fe.read_shift(2),xe=fe.read_shift(2),Se=fe.l+xe,Le={};switch(we){case 21589:me=fe.read_shift(1),me&1&&(Le.mtime=fe.read_shift(4)),xe>5&&(me&2&&(Le.atime=fe.read_shift(4)),me&4&&(Le.ctime=fe.read_shift(4))),Le.mtime&&(Le.mt=new Date(Le.mtime*1e3));break;case 1:{var Ke=fe.read_shift(4),Ue=fe.read_shift(4);Le.usz=Ue*Math.pow(2,32)+Ke,Ke=fe.read_shift(4),Ue=fe.read_shift(4),Le.csz=Ue*Math.pow(2,32)+Ke}break}fe.l=Se,_e[we]=Le}return _e}var c;function l(){return c||(c=Id)}function u(fe,_e){if(fe[0]==80&&fe[1]==75)return $n(fe,_e);if((fe[0]|32)==109&&(fe[1]|32)==105)return pi(fe,_e);if(fe.length<512)throw new Error("CFB file size "+fe.length+" < 512");var me=3,we=512,xe=0,Se=0,Le=0,Ke=0,Ue=0,je=[],Ve=fe.slice(0,512);Ws(Ve,0);var it=f(Ve);switch(me=it[0],me){case 3:we=512;break;case 4:we=4096;break;case 0:if(it[1]==0)return $n(fe,_e);default:throw new Error("Major Version: Expected 3 or 4 saw "+me)}we!==512&&(Ve=fe.slice(0,we),Ws(Ve,28));var gt=fe.slice(0,we);h(Ve,me);var xt=Ve.read_shift(4,"i");if(me===3&&xt!==0)throw new Error("# Directory Sectors: Expected 0 saw "+xt);Ve.l+=4,Le=Ve.read_shift(4,"i"),Ve.l+=4,Ve.chk("00100000","Mini Stream Cutoff Size: "),Ke=Ve.read_shift(4,"i"),xe=Ve.read_shift(4,"i"),Ue=Ve.read_shift(4,"i"),Se=Ve.read_shift(4,"i");for(var at=-1,ft=0;ft<109&&(at=Ve.read_shift(4,"i"),!(at<0));++ft)je[ft]=at;var Jt=d(fe,we);m(Ue,Se,Jt,we,je);var vn=v(Jt,Le,je,we);Le<vn.length&&(vn[Le].name="!Directory"),xe>0&&Ke!==k&&(vn[Ke].name="!MiniFAT"),vn[je[0]].name="!FAT",vn.fat_addrs=je,vn.ssz=we;var _n={},yi=[],Ha=[],Wa=[];_(Le,vn,Jt,yi,xe,_n,Ha,Ke),g(Ha,Wa,yi),yi.shift();var Eo={FileIndex:Ha,FullPaths:Wa};return _e&&_e.raw&&(Eo.raw={header:gt,sectors:Jt}),Eo}function f(fe){if(fe[fe.l]==80&&fe[fe.l+1]==75)return[0,0];fe.chk(w,"Header Signature: "),fe.l+=16;var _e=fe.read_shift(2,"u");return[fe.read_shift(2,"u"),_e]}function h(fe,_e){var me=9;switch(fe.l+=2,me=fe.read_shift(2)){case 9:if(_e!=3)throw new Error("Sector Shift: Expected 9 saw "+me);break;case 12:if(_e!=4)throw new Error("Sector Shift: Expected 12 saw "+me);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+me)}fe.chk("0600","Mini Sector Shift: "),fe.chk("000000000000","Reserved: ")}function d(fe,_e){for(var me=Math.ceil(fe.length/_e)-1,we=[],xe=1;xe<me;++xe)we[xe-1]=fe.slice(xe*_e,(xe+1)*_e);return we[me-1]=fe.slice(me*_e),we}function g(fe,_e,me){for(var we=0,xe=0,Se=0,Le=0,Ke=0,Ue=me.length,je=[],Ve=[];we<Ue;++we)je[we]=Ve[we]=we,_e[we]=me[we];for(;Ke<Ve.length;++Ke)we=Ve[Ke],xe=fe[we].L,Se=fe[we].R,Le=fe[we].C,je[we]===we&&(xe!==-1&&je[xe]!==xe&&(je[we]=je[xe]),Se!==-1&&je[Se]!==Se&&(je[we]=je[Se])),Le!==-1&&(je[Le]=we),xe!==-1&&we!=je[we]&&(je[xe]=je[we],Ve.lastIndexOf(xe)<Ke&&Ve.push(xe)),Se!==-1&&we!=je[we]&&(je[Se]=je[we],Ve.lastIndexOf(Se)<Ke&&Ve.push(Se));for(we=1;we<Ue;++we)je[we]===we&&(Se!==-1&&je[Se]!==Se?je[we]=je[Se]:xe!==-1&&je[xe]!==xe&&(je[we]=je[xe]));for(we=1;we<Ue;++we)if(fe[we].type!==0){if(Ke=we,Ke!=je[Ke])do Ke=je[Ke],_e[we]=_e[Ke]+"/"+_e[we];while(Ke!==0&&je[Ke]!==-1&&Ke!=je[Ke]);je[we]=-1}for(_e[0]+="/",we=1;we<Ue;++we)fe[we].type!==2&&(_e[we]+="/")}function p(fe,_e,me){for(var we=fe.start,xe=fe.size,Se=[],Le=we;me&&xe>0&&Le>=0;)Se.push(_e.slice(Le*E,Le*E+E)),xe-=E,Le=sg(me,Le*4);return Se.length===0?Ge(0):Ds(Se).slice(0,fe.size)}function m(fe,_e,me,we,xe){var Se=k;if(fe===k){if(_e!==0)throw new Error("DIFAT chain shorter than expected")}else if(fe!==-1){var Le=me[fe],Ke=(we>>>2)-1;if(!Le)return;for(var Ue=0;Ue<Ke&&(Se=sg(Le,Ue*4))!==k;++Ue)xe.push(Se);_e>=1&&m(sg(Le,we-4),_e-1,me,we,xe)}}function y(fe,_e,me,we,xe){var Se=[],Le=[];xe||(xe=[]);var Ke=we-1,Ue=0,je=0;for(Ue=_e;Ue>=0;){xe[Ue]=!0,Se[Se.length]=Ue,Le.push(fe[Ue]);var Ve=me[Math.floor(Ue*4/we)];if(je=Ue*4&Ke,we<4+je)throw new Error("FAT boundary crossed: "+Ue+" 4 "+we);if(!fe[Ve])break;Ue=sg(fe[Ve],je)}return{nodes:Se,data:Lre([Le])}}function v(fe,_e,me,we){var xe=fe.length,Se=[],Le=[],Ke=[],Ue=[],je=we-1,Ve=0,it=0,gt=0,xt=0;for(Ve=0;Ve<xe;++Ve)if(Ke=[],gt=Ve+_e,gt>=xe&&(gt-=xe),!Le[gt]){Ue=[];var at=[];for(it=gt;it>=0;){at[it]=!0,Le[it]=!0,Ke[Ke.length]=it,Ue.push(fe[it]);var ft=me[Math.floor(it*4/we)];if(xt=it*4&je,we<4+xt)throw new Error("FAT boundary crossed: "+it+" 4 "+we);if(!fe[ft]||(it=sg(fe[ft],xt),at[it]))break}Se[gt]={nodes:Ke,data:Lre([Ue])}}return Se}function _(fe,_e,me,we,xe,Se,Le,Ke){for(var Ue=0,je=we.length?2:0,Ve=_e[fe].data,it=0,gt=0,xt;it<Ve.length;it+=128){var at=Ve.slice(it,it+128);Ws(at,64),gt=at.read_shift(2),xt=VA(at,0,gt-je),we.push(xt);var ft={name:xt,type:at.read_shift(1),color:at.read_shift(1),L:at.read_shift(4,"i"),R:at.read_shift(4,"i"),C:at.read_shift(4,"i"),clsid:at.read_shift(16),state:at.read_shift(4,"i"),start:0,size:0},Jt=at.read_shift(2)+at.read_shift(2)+at.read_shift(2)+at.read_shift(2);Jt!==0&&(ft.ct=x(at,at.l-8));var vn=at.read_shift(2)+at.read_shift(2)+at.read_shift(2)+at.read_shift(2);vn!==0&&(ft.mt=x(at,at.l-8)),ft.start=at.read_shift(4,"i"),ft.size=at.read_shift(4,"i"),ft.size<0&&ft.start<0&&(ft.size=ft.type=0,ft.start=k,ft.name=""),ft.type===5?(Ue=ft.start,xe>0&&Ue!==k&&(_e[Ue].name="!StreamData")):ft.size>=4096?(ft.storage="fat",_e[ft.start]===void 0&&(_e[ft.start]=y(me,ft.start,_e.fat_addrs,_e.ssz)),_e[ft.start].name=ft.name,ft.content=_e[ft.start].data.slice(0,ft.size)):(ft.storage="minifat",ft.size<0?ft.size=0:Ue!==k&&ft.start!==k&&_e[Ue]&&(ft.content=p(ft,_e[Ue].data,(_e[Ke]||{}).data))),ft.content&&Ws(ft.content,0),Se[xt]=ft,Le.push(ft)}}function x(fe,_e){return new Date((ha(fe,_e+4)/1e7*Math.pow(2,32)+ha(fe,_e)/1e7-11644473600)*1e3)}function A(fe,_e){return l(),u(c.readFileSync(fe),_e)}function C(fe,_e){var me=_e&&_e.type;switch(me||tn&&Buffer.isBuffer(fe)&&(me="buffer"),me||"base64"){case"file":return A(fe,_e);case"base64":return u(jo(al(fe)),_e);case"binary":return u(jo(fe),_e)}return u(fe,_e)}function R(fe,_e){var me=_e||{},we=me.root||"Root Entry";if(fe.FullPaths||(fe.FullPaths=[]),fe.FileIndex||(fe.FileIndex=[]),fe.FullPaths.length!==fe.FileIndex.length)throw new Error("inconsistent CFB structure");fe.FullPaths.length===0&&(fe.FullPaths[0]=we+"/",fe.FileIndex[0]={name:we,type:5}),me.CLSID&&(fe.FileIndex[0].clsid=me.CLSID),M(fe)}function M(fe){var _e="Sh33tJ5";if(!Kt.find(fe,"/"+_e)){var me=Ge(4);me[0]=55,me[1]=me[3]=50,me[2]=54,fe.FileIndex.push({name:_e,type:2,content:me,size:4,L:69,R:69,C:69}),fe.FullPaths.push(fe.FullPaths[0]+_e),N(fe)}}function N(fe,_e){R(fe);for(var me=!1,we=!1,xe=fe.FullPaths.length-1;xe>=0;--xe){var Se=fe.FileIndex[xe];switch(Se.type){case 0:we?me=!0:(fe.FileIndex.pop(),fe.FullPaths.pop());break;case 1:case 2:case 5:we=!0,isNaN(Se.R*Se.L*Se.C)&&(me=!0),Se.R>-1&&Se.L>-1&&Se.R==Se.L&&(me=!0);break;default:me=!0;break}}if(!(!me&&!_e)){var Le=new Date(1987,1,19),Ke=0,Ue=Object.create?Object.create(null):{},je=[];for(xe=0;xe<fe.FullPaths.length;++xe)Ue[fe.FullPaths[xe]]=!0,fe.FileIndex[xe].type!==0&&je.push([fe.FullPaths[xe],fe.FileIndex[xe]]);for(xe=0;xe<je.length;++xe){var Ve=n(je[xe][0]);for(we=Ue[Ve];!we;){for(;n(Ve)&&!Ue[n(Ve)];)Ve=n(Ve);je.push([Ve,{name:i(Ve).replace("/",""),type:1,clsid:L,ct:Le,mt:Le,content:null}]),Ue[Ve]=!0,Ve=n(je[xe][0]),we=Ue[Ve]}}for(je.sort(function(xt,at){return r(xt[0],at[0])}),fe.FullPaths=[],fe.FileIndex=[],xe=0;xe<je.length;++xe)fe.FullPaths[xe]=je[xe][0],fe.FileIndex[xe]=je[xe][1];for(xe=0;xe<je.length;++xe){var it=fe.FileIndex[xe],gt=fe.FullPaths[xe];if(it.name=i(gt).replace("/",""),it.L=it.R=it.C=-(it.color=1),it.size=it.content?it.content.length:0,it.start=0,it.clsid=it.clsid||L,xe===0)it.C=je.length>1?1:-1,it.size=0,it.type=5;else if(gt.slice(-1)=="/"){for(Ke=xe+1;Ke<je.length&&n(fe.FullPaths[Ke])!=gt;++Ke);for(it.C=Ke>=je.length?-1:Ke,Ke=xe+1;Ke<je.length&&n(fe.FullPaths[Ke])!=n(gt);++Ke);it.R=Ke>=je.length?-1:Ke,it.type=1}else n(fe.FullPaths[xe+1]||"")==n(gt)&&(it.R=xe+1),it.type=2}}}function Y(fe,_e){var me=_e||{};if(me.fileType=="mad")return gi(fe,me);switch(N(fe),me.fileType){case"zip":return er(fe,me)}var we=function(xt){for(var at=0,ft=0,Jt=0;Jt<xt.FileIndex.length;++Jt){var vn=xt.FileIndex[Jt];if(vn.content){var _n=vn.content.length;_n>0&&(_n<4096?at+=_n+63>>6:ft+=_n+511>>9)}}for(var yi=xt.FullPaths.length+3>>2,Ha=at+7>>3,Wa=at+127>>7,Eo=Ha+ft+yi+Wa,xa=Eo+127>>7,Oc=xa<=109?0:Math.ceil((xa-109)/127);Eo+xa+Oc+127>>7>xa;)Oc=++xa<=109?0:Math.ceil((xa-109)/127);var So=[1,Oc,xa,Wa,yi,ft,at,0];return xt.FileIndex[0].size=at<<6,So[7]=(xt.FileIndex[0].start=So[0]+So[1]+So[2]+So[3]+So[4]+So[5])+(So[6]+7>>3),So}(fe),xe=Ge(we[7]<<9),Se=0,Le=0;{for(Se=0;Se<8;++Se)xe.write_shift(1,T[Se]);for(Se=0;Se<8;++Se)xe.write_shift(2,0);for(xe.write_shift(2,62),xe.write_shift(2,3),xe.write_shift(2,65534),xe.write_shift(2,9),xe.write_shift(2,6),Se=0;Se<3;++Se)xe.write_shift(2,0);for(xe.write_shift(4,0),xe.write_shift(4,we[2]),xe.write_shift(4,we[0]+we[1]+we[2]+we[3]-1),xe.write_shift(4,0),xe.write_shift(4,4096),xe.write_shift(4,we[3]?we[0]+we[1]+we[2]-1:k),xe.write_shift(4,we[3]),xe.write_shift(-4,we[1]?we[0]-1:k),xe.write_shift(4,we[1]),Se=0;Se<109;++Se)xe.write_shift(-4,Se<we[2]?we[1]+Se:-1)}if(we[1])for(Le=0;Le<we[1];++Le){for(;Se<236+Le*127;++Se)xe.write_shift(-4,Se<we[2]?we[1]+Se:-1);xe.write_shift(-4,Le===we[1]-1?k:Le+1)}var Ke=function(xt){for(Le+=xt;Se<Le-1;++Se)xe.write_shift(-4,Se+1);xt&&(++Se,xe.write_shift(-4,k))};for(Le=Se=0,Le+=we[1];Se<Le;++Se)xe.write_shift(-4,I.DIFSECT);for(Le+=we[2];Se<Le;++Se)xe.write_shift(-4,I.FATSECT);Ke(we[3]),Ke(we[4]);for(var Ue=0,je=0,Ve=fe.FileIndex[0];Ue<fe.FileIndex.length;++Ue)Ve=fe.FileIndex[Ue],Ve.content&&(je=Ve.content.length,!(je<4096)&&(Ve.start=Le,Ke(je+511>>9)));for(Ke(we[6]+7>>3);xe.l&511;)xe.write_shift(-4,I.ENDOFCHAIN);for(Le=Se=0,Ue=0;Ue<fe.FileIndex.length;++Ue)Ve=fe.FileIndex[Ue],Ve.content&&(je=Ve.content.length,!(!je||je>=4096)&&(Ve.start=Le,Ke(je+63>>6)));for(;xe.l&511;)xe.write_shift(-4,I.ENDOFCHAIN);for(Se=0;Se<we[4]<<2;++Se){var it=fe.FullPaths[Se];if(!it||it.length===0){for(Ue=0;Ue<17;++Ue)xe.write_shift(4,0);for(Ue=0;Ue<3;++Ue)xe.write_shift(4,-1);for(Ue=0;Ue<12;++Ue)xe.write_shift(4,0);continue}Ve=fe.FileIndex[Se],Se===0&&(Ve.start=Ve.size?Ve.start-1:k);var gt=Se===0&&me.root||Ve.name;if(gt.length>32&&(console.error("Name "+gt+" will be truncated to "+gt.slice(0,32)),gt=gt.slice(0,32)),je=2*(gt.length+1),xe.write_shift(64,gt,"utf16le"),xe.write_shift(2,je),xe.write_shift(1,Ve.type),xe.write_shift(1,Ve.color),xe.write_shift(-4,Ve.L),xe.write_shift(-4,Ve.R),xe.write_shift(-4,Ve.C),Ve.clsid)xe.write_shift(16,Ve.clsid,"hex");else for(Ue=0;Ue<4;++Ue)xe.write_shift(4,0);xe.write_shift(4,Ve.state||0),xe.write_shift(4,0),xe.write_shift(4,0),xe.write_shift(4,0),xe.write_shift(4,0),xe.write_shift(4,Ve.start),xe.write_shift(4,Ve.size),xe.write_shift(4,0)}for(Se=1;Se<fe.FileIndex.length;++Se)if(Ve=fe.FileIndex[Se],Ve.size>=4096)if(xe.l=Ve.start+1<<9,tn&&Buffer.isBuffer(Ve.content))Ve.content.copy(xe,xe.l,0,Ve.size),xe.l+=Ve.size+511&-512;else{for(Ue=0;Ue<Ve.size;++Ue)xe.write_shift(1,Ve.content[Ue]);for(;Ue&511;++Ue)xe.write_shift(1,0)}for(Se=1;Se<fe.FileIndex.length;++Se)if(Ve=fe.FileIndex[Se],Ve.size>0&&Ve.size<4096)if(tn&&Buffer.isBuffer(Ve.content))Ve.content.copy(xe,xe.l,0,Ve.size),xe.l+=Ve.size+63&-64;else{for(Ue=0;Ue<Ve.size;++Ue)xe.write_shift(1,Ve.content[Ue]);for(;Ue&63;++Ue)xe.write_shift(1,0)}if(tn)xe.l=xe.length;else for(;xe.l<xe.length;)xe.write_shift(1,0);return xe}function H(fe,_e){var me=fe.FullPaths.map(function(Ue){return Ue.toUpperCase()}),we=me.map(function(Ue){var je=Ue.split("/");return je[je.length-(Ue.slice(-1)=="/"?2:1)]}),xe=!1;_e.charCodeAt(0)===47?(xe=!0,_e=me[0].slice(0,-1)+_e):xe=_e.indexOf("/")!==-1;var Se=_e.toUpperCase(),Le=xe===!0?me.indexOf(Se):we.indexOf(Se);if(Le!==-1)return fe.FileIndex[Le];var Ke=!Se.match(Xw);for(Se=Se.replace(fo,""),Ke&&(Se=Se.replace(Xw,"!")),Le=0;Le<me.length;++Le)if((Ke?me[Le].replace(Xw,"!"):me[Le]).replace(fo,"")==Se||(Ke?we[Le].replace(Xw,"!"):we[Le]).replace(fo,"")==Se)return fe.FileIndex[Le];return null}var E=64,k=-2,w="d0cf11e0a1b11ae1",T=[208,207,17,224,161,177,26,225],L="00000000000000000000000000000000",I={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:k,FREESECT:-1,HEADER_SIGNATURE:w,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:L,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function U(fe,_e,me){l();var we=Y(fe,me);c.writeFileSync(_e,we)}function O(fe){for(var _e=new Array(fe.length),me=0;me<fe.length;++me)_e[me]=String.fromCharCode(fe[me]);return _e.join("")}function D(fe,_e){var me=Y(fe,_e);switch(_e&&_e.type||"buffer"){case"file":return l(),c.writeFileSync(_e.filename,me),me;case"binary":return typeof me=="string"?me:O(me);case"base64":return FE(typeof me=="string"?me:O(me));case"buffer":if(tn)return Buffer.isBuffer(me)?me:Ah(me);case"array":return typeof me=="string"?jo(me):me}return me}var P;function B(fe){try{var _e=fe.InflateRaw,me=new _e;if(me._processChunk(new Uint8Array([3,0]),me._finishFlushFlag),me.bytesRead)P=fe;else throw new Error("zlib does not expose bytesRead")}catch(we){console.error("cannot use native zlib: "+(we.message||we))}}function z(fe,_e){if(!P)return Ft(fe,_e);var me=P.InflateRaw,we=new me,xe=we._processChunk(fe.slice(fe.l),we._finishFlushFlag);return fe.l+=we.bytesRead,xe}function F(fe){return P?P.deflateRawSync(fe):de(fe)}var X=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],W=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],q=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function G(fe){var _e=(fe<<1|fe<<11)&139536|(fe<<5|fe<<15)&558144;return(_e>>16|_e>>8|_e)&255}for(var ee=typeof Uint8Array<"u",ae=ee?new Uint8Array(256):[],te=0;te<256;++te)ae[te]=G(te);function K(fe,_e){var me=ae[fe&255];return _e<=8?me>>>8-_e:(me=me<<8|ae[fe>>8&255],_e<=16?me>>>16-_e:(me=me<<8|ae[fe>>16&255],me>>>24-_e))}function re(fe,_e){var me=_e&7,we=_e>>>3;return(fe[we]|(me<=6?0:fe[we+1]<<8))>>>me&3}function V(fe,_e){var me=_e&7,we=_e>>>3;return(fe[we]|(me<=5?0:fe[we+1]<<8))>>>me&7}function oe(fe,_e){var me=_e&7,we=_e>>>3;return(fe[we]|(me<=4?0:fe[we+1]<<8))>>>me&15}function he(fe,_e){var me=_e&7,we=_e>>>3;return(fe[we]|(me<=3?0:fe[we+1]<<8))>>>me&31}function ne(fe,_e){var me=_e&7,we=_e>>>3;return(fe[we]|(me<=1?0:fe[we+1]<<8))>>>me&127}function ie(fe,_e,me){var we=_e&7,xe=_e>>>3,Se=(1<<me)-1,Le=fe[xe]>>>we;return me<8-we||(Le|=fe[xe+1]<<8-we,me<16-we)||(Le|=fe[xe+2]<<16-we,me<24-we)||(Le|=fe[xe+3]<<24-we),Le&Se}function ce(fe,_e,me){var we=_e&7,xe=_e>>>3;return we<=5?fe[xe]|=(me&7)<<we:(fe[xe]|=me<<we&255,fe[xe+1]=(me&7)>>8-we),_e+3}function ve(fe,_e,me){var we=_e&7,xe=_e>>>3;return me=(me&1)<<we,fe[xe]|=me,_e+1}function Ee(fe,_e,me){var we=_e&7,xe=_e>>>3;return me<<=we,fe[xe]|=me&255,me>>>=8,fe[xe+1]=me,_e+8}function ge(fe,_e,me){var we=_e&7,xe=_e>>>3;return me<<=we,fe[xe]|=me&255,me>>>=8,fe[xe+1]=me&255,fe[xe+2]=me>>>8,_e+16}function Pe(fe,_e){var me=fe.length,we=2*me>_e?2*me:_e+5,xe=0;if(me>=_e)return fe;if(tn){var Se=yre(we);if(fe.copy)fe.copy(Se);else for(;xe<fe.length;++xe)Se[xe]=fe[xe];return Se}else if(ee){var Le=new Uint8Array(we);if(Le.set)Le.set(fe);else for(;xe<me;++xe)Le[xe]=fe[xe];return Le}return fe.length=we,fe}function Ce(fe){for(var _e=new Array(fe),me=0;me<fe;++me)_e[me]=0;return _e}function Ie(fe,_e,me){var we=1,xe=0,Se=0,Le=0,Ke=0,Ue=fe.length,je=ee?new Uint16Array(32):Ce(32);for(Se=0;Se<32;++Se)je[Se]=0;for(Se=Ue;Se<me;++Se)fe[Se]=0;Ue=fe.length;var Ve=ee?new Uint16Array(Ue):Ce(Ue);for(Se=0;Se<Ue;++Se)je[xe=fe[Se]]++,we<xe&&(we=xe),Ve[Se]=0;for(je[0]=0,Se=1;Se<=we;++Se)je[Se+16]=Ke=Ke+je[Se-1]<<1;for(Se=0;Se<Ue;++Se)Ke=fe[Se],Ke!=0&&(Ve[Se]=je[Ke+16]++);var it=0;for(Se=0;Se<Ue;++Se)if(it=fe[Se],it!=0)for(Ke=K(Ve[Se],we)>>we-it,Le=(1<<we+4-it)-1;Le>=0;--Le)_e[Ke|Le<<it]=it&15|Se<<4;return we}var $e=ee?new Uint16Array(512):Ce(512),se=ee?new Uint16Array(32):Ce(32);if(!ee){for(var Z=0;Z<512;++Z)$e[Z]=0;for(Z=0;Z<32;++Z)se[Z]=0}(function(){for(var fe=[],_e=0;_e<32;_e++)fe.push(5);Ie(fe,se,32);var me=[];for(_e=0;_e<=143;_e++)me.push(8);for(;_e<=255;_e++)me.push(9);for(;_e<=279;_e++)me.push(7);for(;_e<=287;_e++)me.push(8);Ie(me,$e,288)})();var J=function(){for(var _e=ee?new Uint8Array(32768):[],me=0,we=0;me<q.length-1;++me)for(;we<q[me+1];++we)_e[we]=me;for(;we<32768;++we)_e[we]=29;var xe=ee?new Uint8Array(259):[];for(me=0,we=0;me<W.length-1;++me)for(;we<W[me+1];++we)xe[we]=me;function Se(Ke,Ue){for(var je=0;je<Ke.length;){var Ve=Math.min(65535,Ke.length-je),it=je+Ve==Ke.length;for(Ue.write_shift(1,+it),Ue.write_shift(2,Ve),Ue.write_shift(2,~Ve&65535);Ve-- >0;)Ue[Ue.l++]=Ke[je++]}return Ue.l}function Le(Ke,Ue){for(var je=0,Ve=0,it=ee?new Uint16Array(32768):[];Ve<Ke.length;){var gt=Math.min(65535,Ke.length-Ve);if(gt<10){for(je=ce(Ue,je,+(Ve+gt==Ke.length)),je&7&&(je+=8-(je&7)),Ue.l=je/8|0,Ue.write_shift(2,gt),Ue.write_shift(2,~gt&65535);gt-- >0;)Ue[Ue.l++]=Ke[Ve++];je=Ue.l*8;continue}je=ce(Ue,je,+(Ve+gt==Ke.length)+2);for(var xt=0;gt-- >0;){var at=Ke[Ve];xt=(xt<<5^at)&32767;var ft=-1,Jt=0;if((ft=it[xt])&&(ft|=Ve&-32768,ft>Ve&&(ft-=32768),ft<Ve))for(;Ke[ft+Jt]==Ke[Ve+Jt]&&Jt<250;)++Jt;if(Jt>2){at=xe[Jt],at<=22?je=Ee(Ue,je,ae[at+1]>>1)-1:(Ee(Ue,je,3),je+=5,Ee(Ue,je,ae[at-23]>>5),je+=3);var vn=at<8?0:at-4>>2;vn>0&&(ge(Ue,je,Jt-W[at]),je+=vn),at=_e[Ve-ft],je=Ee(Ue,je,ae[at]>>3),je-=3;var _n=at<4?0:at-2>>1;_n>0&&(ge(Ue,je,Ve-ft-q[at]),je+=_n);for(var yi=0;yi<Jt;++yi)it[xt]=Ve&32767,xt=(xt<<5^Ke[Ve])&32767,++Ve;gt-=Jt-1}else at<=143?at=at+48:je=ve(Ue,je,1),je=Ee(Ue,je,ae[at]),it[xt]=Ve&32767,++Ve}je=Ee(Ue,je,0)-1}return Ue.l=(je+7)/8|0,Ue.l}return function(Ue,je){return Ue.length<8?Se(Ue,je):Le(Ue,je)}}();function de(fe){var _e=Ge(50+Math.floor(fe.length*1.1)),me=J(fe,_e);return _e.slice(0,me)}var Ae=ee?new Uint16Array(32768):Ce(32768),De=ee?new Uint16Array(32768):Ce(32768),Re=ee?new Uint16Array(128):Ce(128),bt=1,$t=1;function ut(fe,_e){var me=he(fe,_e)+257;_e+=5;var we=he(fe,_e)+1;_e+=5;var xe=oe(fe,_e)+4;_e+=4;for(var Se=0,Le=ee?new Uint8Array(19):Ce(19),Ke=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],Ue=1,je=ee?new Uint8Array(8):Ce(8),Ve=ee?new Uint8Array(8):Ce(8),it=Le.length,gt=0;gt<xe;++gt)Le[X[gt]]=Se=V(fe,_e),Ue<Se&&(Ue=Se),je[Se]++,_e+=3;var xt=0;for(je[0]=0,gt=1;gt<=Ue;++gt)Ve[gt]=xt=xt+je[gt-1]<<1;for(gt=0;gt<it;++gt)(xt=Le[gt])!=0&&(Ke[gt]=Ve[xt]++);var at=0;for(gt=0;gt<it;++gt)if(at=Le[gt],at!=0){xt=ae[Ke[gt]]>>8-at;for(var ft=(1<<7-at)-1;ft>=0;--ft)Re[xt|ft<<at]=at&7|gt<<3}var Jt=[];for(Ue=1;Jt.length<me+we;)switch(xt=Re[ne(fe,_e)],_e+=xt&7,xt>>>=3){case 16:for(Se=3+re(fe,_e),_e+=2,xt=Jt[Jt.length-1];Se-- >0;)Jt.push(xt);break;case 17:for(Se=3+V(fe,_e),_e+=3;Se-- >0;)Jt.push(0);break;case 18:for(Se=11+ne(fe,_e),_e+=7;Se-- >0;)Jt.push(0);break;default:Jt.push(xt),Ue<xt&&(Ue=xt);break}var vn=Jt.slice(0,me),_n=Jt.slice(me);for(gt=me;gt<286;++gt)vn[gt]=0;for(gt=we;gt<30;++gt)_n[gt]=0;return bt=Ie(vn,Ae,286),$t=Ie(_n,De,30),_e}function Mt(fe,_e){if(fe[0]==3&&!(fe[1]&3))return[V1(_e),2];for(var me=0,we=0,xe=yre(_e||1<<18),Se=0,Le=xe.length>>>0,Ke=0,Ue=0;!(we&1);){if(we=V(fe,me),me+=3,we>>>1)we>>1==1?(Ke=9,Ue=5):(me=ut(fe,me),Ke=bt,Ue=$t);else{me&7&&(me+=8-(me&7));var je=fe[me>>>3]|fe[(me>>>3)+1]<<8;if(me+=32,je>0)for(!_e&&Le<Se+je&&(xe=Pe(xe,Se+je),Le=xe.length);je-- >0;)xe[Se++]=fe[me>>>3],me+=8;continue}for(;;){!_e&&Le<Se+32767&&(xe=Pe(xe,Se+32767),Le=xe.length);var Ve=ie(fe,me,Ke),it=we>>>1==1?$e[Ve]:Ae[Ve];if(me+=it&15,it>>>=4,!(it>>>8&255))xe[Se++]=it;else{if(it==256)break;it-=257;var gt=it<8?0:it-4>>2;gt>5&&(gt=0);var xt=Se+W[it];gt>0&&(xt+=ie(fe,me,gt),me+=gt),Ve=ie(fe,me,Ue),it=we>>>1==1?se[Ve]:De[Ve],me+=it&15,it>>>=4;var at=it<4?0:it-2>>1,ft=q[it];for(at>0&&(ft+=ie(fe,me,at),me+=at),!_e&&Le<xt&&(xe=Pe(xe,xt+100),Le=xe.length);Se<xt;)xe[Se]=xe[Se-ft],++Se}}}return _e?[xe,me+7>>>3]:[xe.slice(0,Se),me+7>>>3]}function Ft(fe,_e){var me=fe.slice(fe.l||0),we=Mt(me,_e);return fe.l+=we[1],we[0]}function lr(fe,_e){if(fe)typeof console<"u"&&console.error(_e);else throw new Error(_e)}function $n(fe,_e){var me=fe;Ws(me,0);var we=[],xe=[],Se={FileIndex:we,FullPaths:xe};R(Se,{root:_e.root});for(var Le=me.length-4;(me[Le]!=80||me[Le+1]!=75||me[Le+2]!=5||me[Le+3]!=6)&&Le>=0;)--Le;me.l=Le+4,me.l+=4;var Ke=me.read_shift(2);me.l+=6;var Ue=me.read_shift(4);for(me.l=Ue,Le=0;Le<Ke;++Le){me.l+=20;var je=me.read_shift(4),Ve=me.read_shift(4),it=me.read_shift(2),gt=me.read_shift(2),xt=me.read_shift(2);me.l+=8;var at=me.read_shift(4),ft=o(me.slice(me.l+it,me.l+it+gt));me.l+=it+gt+xt;var Jt=me.l;me.l=at+4,ft&&ft[1]&&((ft[1]||{}).usz&&(Ve=ft[1].usz),(ft[1]||{}).csz&&(je=ft[1].csz)),On(me,je,Ve,Se,ft),me.l=Jt}return Se}function On(fe,_e,me,we,xe){fe.l+=2;var Se=fe.read_shift(2),Le=fe.read_shift(2),Ke=a(fe);if(Se&8257)throw new Error("Unsupported ZIP encryption");for(var Ue=fe.read_shift(4),je=fe.read_shift(4),Ve=fe.read_shift(4),it=fe.read_shift(2),gt=fe.read_shift(2),xt="",at=0;at<it;++at)xt+=String.fromCharCode(fe[fe.l++]);if(gt){var ft=o(fe.slice(fe.l,fe.l+gt));(ft[21589]||{}).mt&&(Ke=ft[21589].mt),(ft[1]||{}).usz&&(Ve=ft[1].usz),(ft[1]||{}).csz&&(je=ft[1].csz),xe&&((xe[21589]||{}).mt&&(Ke=xe[21589].mt),(xe[1]||{}).usz&&(Ve=ft[1].usz),(xe[1]||{}).csz&&(je=ft[1].csz))}fe.l+=gt;var Jt=fe.slice(fe.l,fe.l+je);switch(Le){case 8:Jt=z(fe,Ve);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+Le)}var vn=!1;Se&8&&(Ue=fe.read_shift(4),Ue==134695760&&(Ue=fe.read_shift(4),vn=!0),je=fe.read_shift(4),Ve=fe.read_shift(4)),je!=_e&&lr(vn,"Bad compressed size: "+_e+" != "+je),Ve!=me&&lr(vn,"Bad uncompressed size: "+me+" != "+Ve),Kn(we,xt,Jt,{unsafe:!0,mt:Ke})}function er(fe,_e){var me=_e||{},we=[],xe=[],Se=Ge(1),Le=me.compression?8:0,Ke=0,Ue=0,je=0,Ve=0,it=0,gt=fe.FullPaths[0],xt=gt,at=fe.FileIndex[0],ft=[],Jt=0;for(Ue=1;Ue<fe.FullPaths.length;++Ue)if(xt=fe.FullPaths[Ue].slice(gt.length),at=fe.FileIndex[Ue],!(!at.size||!at.content||xt=="Sh33tJ5")){var vn=Ve,_n=Ge(xt.length);for(je=0;je<xt.length;++je)_n.write_shift(1,xt.charCodeAt(je)&127);_n=_n.slice(0,_n.l),ft[it]=typeof at.content=="string"?Are.bstr(at.content,0):Are.buf(at.content,0);var yi=typeof at.content=="string"?jo(at.content):at.content;Le==8&&(yi=F(yi)),Se=Ge(30),Se.write_shift(4,67324752),Se.write_shift(2,20),Se.write_shift(2,Ke),Se.write_shift(2,Le),at.mt?s(Se,at.mt):Se.write_shift(4,0),Se.write_shift(-4,ft[it]),Se.write_shift(4,yi.length),Se.write_shift(4,at.content.length),Se.write_shift(2,_n.length),Se.write_shift(2,0),Ve+=Se.length,we.push(Se),Ve+=_n.length,we.push(_n),Ve+=yi.length,we.push(yi),Se=Ge(46),Se.write_shift(4,33639248),Se.write_shift(2,0),Se.write_shift(2,20),Se.write_shift(2,Ke),Se.write_shift(2,Le),Se.write_shift(4,0),Se.write_shift(-4,ft[it]),Se.write_shift(4,yi.length),Se.write_shift(4,at.content.length),Se.write_shift(2,_n.length),Se.write_shift(2,0),Se.write_shift(2,0),Se.write_shift(2,0),Se.write_shift(2,0),Se.write_shift(4,0),Se.write_shift(4,vn),Jt+=Se.l,xe.push(Se),Jt+=_n.length,xe.push(_n),++it}return Se=Ge(22),Se.write_shift(4,101010256),Se.write_shift(2,0),Se.write_shift(2,0),Se.write_shift(2,it),Se.write_shift(2,it),Se.write_shift(4,Jt),Se.write_shift(4,Ve),Se.write_shift(2,0),Ds([Ds(we),Ds(xe),Se])}var gn={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function hi(fe,_e){if(fe.ctype)return fe.ctype;var me=fe.name||"",we=me.match(/\.([^\.]+)$/);return we&&gn[we[1]]||_e&&(we=(me=_e).match(/[\.\\]([^\.\\])+$/),we&&gn[we[1]])?gn[we[1]]:"application/octet-stream"}function mr(fe){for(var _e=FE(fe),me=[],we=0;we<_e.length;we+=76)me.push(_e.slice(we,we+76));return me.join(`\r
`)+`\r
`}function di(fe){var _e=fe.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(je){var Ve=je.charCodeAt(0).toString(16).toUpperCase();return"="+(Ve.length==1?"0"+Ve:Ve)});_e=_e.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),_e.charAt(0)==`
`&&(_e="=0D"+_e.slice(1)),_e=_e.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var me=[],we=_e.split(`\r
`),xe=0;xe<we.length;++xe){var Se=we[xe];if(Se.length==0){me.push("");continue}for(var Le=0;Le<Se.length;){var Ke=76,Ue=Se.slice(Le,Le+Ke);Ue.charAt(Ke-1)=="="?Ke--:Ue.charAt(Ke-2)=="="?Ke-=2:Ue.charAt(Ke-3)=="="&&(Ke-=3),Ue=Se.slice(Le,Le+Ke),Le+=Ke,Le<Se.length&&(Ue+="="),me.push(Ue)}}return me.join(`\r
`)}function ai(fe){for(var _e=[],me=0;me<fe.length;++me){for(var we=fe[me];me<=fe.length&&we.charAt(we.length-1)=="=";)we=we.slice(0,we.length-1)+fe[++me];_e.push(we)}for(var xe=0;xe<_e.length;++xe)_e[xe]=_e[xe].replace(/[=][0-9A-Fa-f]{2}/g,function(Se){return String.fromCharCode(parseInt(Se.slice(1),16))});return jo(_e.join(`\r
`))}function yr(fe,_e,me){for(var we="",xe="",Se="",Le,Ke=0;Ke<10;++Ke){var Ue=_e[Ke];if(!Ue||Ue.match(/^\s*$/))break;var je=Ue.match(/^(.*?):\s*([^\s].*)$/);if(je)switch(je[1].toLowerCase()){case"content-location":we=je[2].trim();break;case"content-type":Se=je[2].trim();break;case"content-transfer-encoding":xe=je[2].trim();break}}switch(++Ke,xe.toLowerCase()){case"base64":Le=jo(al(_e.slice(Ke).join("")));break;case"quoted-printable":Le=ai(_e.slice(Ke));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+xe)}var Ve=Kn(fe,we.slice(me.length),Le,{unsafe:!0});Se&&(Ve.ctype=Se)}function pi(fe,_e){if(O(fe.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var me=_e&&_e.root||"",we=(tn&&Buffer.isBuffer(fe)?fe.toString("binary"):O(fe)).split(`\r
`),xe=0,Se="";for(xe=0;xe<we.length;++xe)if(Se=we[xe],!!/^Content-Location:/i.test(Se)&&(Se=Se.slice(Se.indexOf("file")),me||(me=Se.slice(0,Se.lastIndexOf("/")+1)),Se.slice(0,me.length)!=me))for(;me.length>0&&(me=me.slice(0,me.length-1),me=me.slice(0,me.lastIndexOf("/")+1),Se.slice(0,me.length)!=me););var Le=(we[1]||"").match(/boundary="(.*?)"/);if(!Le)throw new Error("MAD cannot find boundary");var Ke="--"+(Le[1]||""),Ue=[],je=[],Ve={FileIndex:Ue,FullPaths:je};R(Ve);var it,gt=0;for(xe=0;xe<we.length;++xe){var xt=we[xe];xt!==Ke&&xt!==Ke+"--"||(gt++&&yr(Ve,we.slice(it,xe),me),it=xe)}return Ve}function gi(fe,_e){var me=_e||{},we=me.boundary||"SheetJS";we="------="+we;for(var xe=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+we.slice(2)+'"',"","",""],Se=fe.FullPaths[0],Le=Se,Ke=fe.FileIndex[0],Ue=1;Ue<fe.FullPaths.length;++Ue)if(Le=fe.FullPaths[Ue].slice(Se.length),Ke=fe.FileIndex[Ue],!(!Ke.size||!Ke.content||Le=="Sh33tJ5")){Le=Le.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(Jt){return"_x"+Jt.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(Jt){return"_u"+Jt.charCodeAt(0).toString(16)+"_"});for(var je=Ke.content,Ve=tn&&Buffer.isBuffer(je)?je.toString("binary"):O(je),it=0,gt=Math.min(1024,Ve.length),xt=0,at=0;at<=gt;++at)(xt=Ve.charCodeAt(at))>=32&&xt<128&&++it;var ft=it>=gt*4/5;xe.push(we),xe.push("Content-Location: "+(me.root||"file:///C:/SheetJS/")+Le),xe.push("Content-Transfer-Encoding: "+(ft?"quoted-printable":"base64")),xe.push("Content-Type: "+hi(Ke,Le)),xe.push(""),xe.push(ft?di(Ve):mr(Ve))}return xe.push(we+`--\r
`),xe.join(`\r
`)}function hr(fe){var _e={};return R(_e,fe),_e}function Kn(fe,_e,me,we){var xe=we&&we.unsafe;xe||R(fe);var Se=!xe&&Kt.find(fe,_e);if(!Se){var Le=fe.FullPaths[0];_e.slice(0,Le.length)==Le?Le=_e:(Le.slice(-1)!="/"&&(Le+="/"),Le=(Le+_e).replace("//","/")),Se={name:i(_e),type:2},fe.FileIndex.push(Se),fe.FullPaths.push(Le),xe||Kt.utils.cfb_gc(fe)}return Se.content=me,Se.size=me?me.length:0,we&&(we.CLSID&&(Se.clsid=we.CLSID),we.mt&&(Se.mt=we.mt),we.ct&&(Se.ct=we.ct)),Se}function Gn(fe,_e){R(fe);var me=Kt.find(fe,_e);if(me){for(var we=0;we<fe.FileIndex.length;++we)if(fe.FileIndex[we]==me)return fe.FileIndex.splice(we,1),fe.FullPaths.splice(we,1),!0}return!1}function vr(fe,_e,me){R(fe);var we=Kt.find(fe,_e);if(we){for(var xe=0;xe<fe.FileIndex.length;++xe)if(fe.FileIndex[xe]==we)return fe.FileIndex[xe].name=i(me),fe.FullPaths[xe]=me,!0}return!1}function mi(fe){N(fe,!0)}return e.find=H,e.read=C,e.parse=u,e.write=D,e.writeFile=U,e.utils={cfb_new:hr,cfb_add:Kn,cfb_del:Gn,cfb_mov:vr,cfb_gc:mi,ReadShift:T3,CheckField:r2e,prep_blob:Ws,bconcat:Ds,use_zlib:B,_deflateRaw:de,_inflateRaw:Ft,consts:I},e}(),Id;function Fme(t){Id=t}function Pyt(t){return typeof t=="string"?Z6(t):Array.isArray(t)?nyt(t):t}function Q6(t,e,r){if(typeof Id<"u"&&Id.writeFileSync)return r?Id.writeFileSync(t,e,r):Id.writeFileSync(t,e);if(typeof Deno<"u"){if(r&&typeof e=="string")switch(r){case"utf8":e=new TextEncoder(r).encode(e);break;case"binary":e=Z6(e);break;default:throw new Error("Unsupported encoding "+r)}return Deno.writeFileSync(t,e)}var n=r=="utf8"?Xf(e):e;if(typeof IE_SaveFile<"u")return IE_SaveFile(n,t);if(typeof Blob<"u"){var i=new Blob([Pyt(n)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(i,t);if(typeof saveAs<"u")return saveAs(i,t);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var s=URL.createObjectURL(i);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),chrome.downloads.download({url:s,filename:t,saveAs:!0});var a=document.createElement("a");if(a.download!=null)return a.download=t,a.href=s,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),s}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var o=File(t);return o.open("w"),o.encoding="binary",Array.isArray(e)&&(e=lh(e)),o.write(e),o.close(),e}catch(c){if(!c.message||!c.message.match(/onstruct/))throw c}throw new Error("cannot save file "+t)}function Byt(t){if(typeof Id<"u")return Id.readFileSync(t);if(typeof Deno<"u")return Deno.readFileSync(t);if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var e=File(t);e.open("r"),e.encoding="binary";var r=e.read();return e.close(),r}catch(n){if(!n.message||!n.message.match(/onstruct/))throw n}throw new Error("Cannot access file "+t)}function Ki(t){for(var e=Object.keys(t),r=[],n=0;n<e.length;++n)Object.prototype.hasOwnProperty.call(t,e[n])&&r.push(e[n]);return r}function Tre(t,e){for(var r=[],n=Ki(t),i=0;i!==n.length;++i)r[t[n[i]][e]]==null&&(r[t[n[i]][e]]=n[i]);return r}function LA(t){for(var e=[],r=Ki(t),n=0;n!==r.length;++n)e[t[r[n]]]=r[n];return e}function FA(t){for(var e=[],r=Ki(t),n=0;n!==r.length;++n)e[t[r[n]]]=parseInt(r[n],10);return e}function Dyt(t){for(var e=[],r=Ki(t),n=0;n!==r.length;++n)e[t[r[n]]]==null&&(e[t[r[n]]]=[]),e[t[r[n]]].push(r[n]);return e}var jE=new Date(1899,11,30,0,0,0);function Ls(t,e){var r=t.getTime();e&&(r-=1462*24*60*60*1e3);var n=jE.getTime()+(t.getTimezoneOffset()-jE.getTimezoneOffset())*6e4;return(r-n)/(24*60*60*1e3)}var $me=new Date,Oyt=jE.getTime()+($me.getTimezoneOffset()-jE.getTimezoneOffset())*6e4,kre=$me.getTimezoneOffset();function $A(t){var e=new Date;return e.setTime(t*24*60*60*1e3+Oyt),e.getTimezoneOffset()!==kre&&e.setTime(e.getTime()+(e.getTimezoneOffset()-kre)*6e4),e}function Nyt(t){var e=0,r=0,n=!1,i=t.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!i)throw new Error("|"+t+"| is not an ISO8601 Duration");for(var s=1;s!=i.length;++s)if(i[s]){switch(r=1,s>3&&(n=!0),i[s].slice(i[s].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+i[s].slice(i[s].length-1));case"D":r*=24;case"H":r*=60;case"M":if(n)r*=60;else throw new Error("Unsupported ISO Duration Field: M")}e+=r*parseInt(i[s],10)}return e}var Cre=new Date("2017-02-19T19:06:09.000Z"),Ume=isNaN(Cre.getFullYear())?new Date("2/19/17"):Cre,Myt=Ume.getFullYear()==2017;function Xi(t,e){var r=new Date(t);if(Myt)return e>0?r.setTime(r.getTime()+r.getTimezoneOffset()*60*1e3):e<0&&r.setTime(r.getTime()-r.getTimezoneOffset()*60*1e3),r;if(t instanceof Date)return t;if(Ume.getFullYear()==1917&&!isNaN(r.getFullYear())){var n=r.getFullYear();return t.indexOf(""+n)>-1||r.setFullYear(r.getFullYear()+100),r}var i=t.match(/\d+/g)||["2017","2","19","0","0","0"],s=new Date(+i[0],+i[1]-1,+i[2],+i[3]||0,+i[4]||0,+i[5]||0);return t.indexOf("Z")>-1&&(s=new Date(s.getTime()-s.getTimezoneOffset()*60*1e3)),s}function fm(t,e){if(tn&&Buffer.isBuffer(t)){if(e&&_4){if(t[0]==255&&t[1]==254)return Xf(t.slice(2).toString("utf16le"));if(t[1]==254&&t[2]==255)return Xf(Ame(t.slice(2).toString("binary")))}return t.toString("binary")}if(typeof TextDecoder<"u")try{if(e){if(t[0]==255&&t[1]==254)return Xf(new TextDecoder("utf-16le").decode(t.slice(2)));if(t[0]==254&&t[1]==255)return Xf(new TextDecoder("utf-16be").decode(t.slice(2)))}var r={"€":"","‚":"",ƒ:"","„":"","…":"","†":"","‡":"","ˆ":"","‰":"",Š:"","‹":"",Œ:"",Ž:"","‘":"","’":"","“":"","”":"","•":"","–":"","—":"","˜":"","™":"",š:"","›":"",œ:"",ž:"",Ÿ:""};return Array.isArray(t)&&(t=new Uint8Array(t)),new TextDecoder("latin1").decode(t).replace(/[€‚ƒ„…†‡ˆ‰Š‹ŒŽ‘’“”•–—˜™š›œžŸ]/g,function(s){return r[s]||s})}catch{}for(var n=[],i=0;i!=t.length;++i)n.push(String.fromCharCode(t[i]));return n.join("")}function ii(t){if(typeof JSON<"u"&&!Array.isArray(t))return JSON.parse(JSON.stringify(t));if(typeof t!="object"||t==null)return t;if(t instanceof Date)return new Date(t.getTime());var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=ii(t[r]));return e}function An(t,e){for(var r="";r.length<e;)r+=t;return r}function rl(t){var e=Number(t);if(!isNaN(e))return isFinite(e)?e:NaN;if(!/\d/.test(t))return e;var r=1,n=t.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return r*=100,""});return!isNaN(e=Number(n))||(n=n.replace(/[(](.*)[)]/,function(i,s){return r=-r,s}),!isNaN(e=Number(n)))?e/r:e}var Lyt=/^(0?\d|1[0-2])(?:|:([0-5]?\d)(?:|(\.\d+)(?:|:([0-5]?\d))|:([0-5]?\d)(|\.\d+)))\s+([ap])m?$/;function Fyt(t){return t[2]?t[3]?t[4]?new Date(1899,11,30,+t[1]%12+(t[7]=="p"?12:0),+t[2],+t[4],parseFloat(t[3])*1e3):new Date(1899,11,30,t[7]=="p"?12:0,+t[1],+t[2],parseFloat(t[3])*1e3):t[5]?new Date(1899,11,30,+t[1]%12+(t[7]=="p"?12:0),+t[2],+t[5],t[6]?parseFloat(t[6])*1e3:0):new Date(1899,11,30,+t[1]%12+(t[7]=="p"?12:0),+t[2],0,0):new Date(1899,11,30,+t[1]%12+(t[7]=="p"?12:0),0,0,0)}var $yt=["january","february","march","april","may","june","july","august","september","october","november","december"];function dv(t){var e=t.toLowerCase(),r=e.replace(/\s+/g," ").trim(),n=r.match(Lyt);if(n)return Fyt(n);var i=new Date(t),s=new Date(NaN),a=i.getYear();i.getMonth();var o=i.getDate();if(isNaN(o))return s;if(e.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(e=e.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),e.length>3&&$yt.indexOf(e)==-1)return s}else if(e.replace(/[ap]m?/,"").match(/[a-z]/))return s;return a<0||a>8099||t.match(/[^-0-9:,\/\\]/)?s:i}var Uyt=function(){var t="abacaba".split(/(:?b)/i).length==5;return function(r,n,i){if(t||typeof n=="string")return r.split(n);for(var s=r.split(n),a=[s[0]],o=1;o<s.length;++o)a.push(i),a.push(s[o]);return a}}();function Vme(t){return t?t.content&&t.type?fm(t.content,!0):t.data?oy(t.data):t.asNodeBuffer&&tn?oy(t.asNodeBuffer().toString("binary")):t.asBinary?oy(t.asBinary()):t._data&&t._data.getContent?oy(fm(Array.prototype.slice.call(t._data.getContent(),0))):null:null}function jme(t){if(!t)return null;if(t.data)return LE(t.data);if(t.asNodeBuffer&&tn)return t.asNodeBuffer();if(t._data&&t._data.getContent){var e=t._data.getContent();return typeof e=="string"?LE(e):Array.prototype.slice.call(e)}return t.content&&t.type?t.content:null}function Vyt(t){return t&&t.name.slice(-4)===".bin"?jme(t):Vme(t)}function Pl(t,e){for(var r=t.FullPaths||Ki(t.files),n=e.toLowerCase().replace(/[\/]/g,"\\"),i=n.replace(/\\/g,"/"),s=0;s<r.length;++s){var a=r[s].replace(/^Root Entry[\/]/,"").toLowerCase();if(n==a||i==a)return t.files?t.files[r[s]]:t.FileIndex[s]}return null}function HV(t,e){var r=Pl(t,e);if(r==null)throw new Error("Cannot find file "+e+" in zip");return r}function Cs(t,e,r){if(!r)return Vyt(HV(t,e));if(!e)return null;try{return Cs(t,e)}catch{return null}}function yc(t,e,r){if(!r)return Vme(HV(t,e));if(!e)return null;try{return yc(t,e)}catch{return null}}function jyt(t,e,r){return jme(HV(t,e))}function Ire(t){for(var e=t.FullPaths||Ki(t.files),r=[],n=0;n<e.length;++n)e[n].slice(-1)!="/"&&r.push(e[n].replace(/^Root Entry[\/]/,""));return r.sort()}function Fr(t,e,r){if(t.FullPaths){if(typeof r=="string"){var n;return tn?n=Ah(r):n=iyt(r),Kt.utils.cfb_add(t,e,n)}Kt.utils.cfb_add(t,e,r)}else t.file(e,r)}function WV(){return Kt.utils.cfb_new()}function zme(t,e){switch(e.type){case"base64":return Kt.read(t,{type:"base64"});case"binary":return Kt.read(t,{type:"binary"});case"buffer":case"array":return Kt.read(t,{type:"buffer"})}throw new Error("Unrecognized type "+e.type)}function Zw(t,e){if(t.charAt(0)=="/")return t.slice(1);var r=e.split("/");e.slice(-1)!="/"&&r.pop();for(var n=t.split("/");n.length!==0;){var i=n.shift();i===".."?r.pop():i!=="."&&r.push(i)}return r.join("/")}var As=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,zyt=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,Rre=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/mg,qyt=/<[^>]*>/g,wo=As.match(Rre)?Rre:qyt,Hyt=/<\w*:/,Wyt=/<(\/?)\w+:/;function Lt(t,e,r){for(var n={},i=0,s=0;i!==t.length&&!((s=t.charCodeAt(i))===32||s===10||s===13);++i);if(e||(n[0]=t.slice(0,i)),i===t.length)return n;var a=t.match(zyt),o=0,c="",l=0,u="",f="",h=1;if(a)for(l=0;l!=a.length;++l){for(f=a[l],s=0;s!=f.length&&f.charCodeAt(s)!==61;++s);for(u=f.slice(0,s).trim();f.charCodeAt(s+1)==32;)++s;for(h=(i=f.charCodeAt(s+1))==34||i==39?1:0,c=f.slice(s+1+h,f.length-h),o=0;o!=u.length&&u.charCodeAt(o)!==58;++o);if(o===u.length)u.indexOf("_")>0&&(u=u.slice(0,u.indexOf("_"))),n[u]=c,n[u.toLowerCase()]=c;else{var d=(o===5&&u.slice(0,5)==="xmlns"?"xmlns":"")+u.slice(o+1);if(n[d]&&u.slice(o-3,o)=="ext")continue;n[d]=c,n[d.toLowerCase()]=c}}return n}function af(t){return t.replace(Wyt,"<$1")}var qme={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},KV=LA(qme),yn=function(){var t=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/ig,e=/_x([\da-fA-F]{4})_/ig;function r(n){var i=n+"",s=i.indexOf("<![CDATA[");if(s==-1)return i.replace(t,function(o,c){return qme[o]||String.fromCharCode(parseInt(c,o.indexOf("x")>-1?16:10))||o}).replace(e,function(o,c){return String.fromCharCode(parseInt(c,16))});var a=i.indexOf("]]>");return r(i.slice(0,s))+i.slice(s+9,a)+r(i.slice(a+3))}return function(i,s){var a=r(i);return s?a.replace(/\r\n/g,`
`):a}}(),GV=/[&<>'"]/g,Kyt=/[\u0000-\u0008\u000b-\u001f\uFFFE-\uFFFF]/g;function $r(t){var e=t+"";return e.replace(GV,function(r){return KV[r]}).replace(Kyt,function(r){return"_x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+"_"})}function Pre(t){return $r(t).replace(/ /g,"_x0020_")}var Hme=/[\u0000-\u001f]/g;function YV(t){var e=t+"";return e.replace(GV,function(r){return KV[r]}).replace(/\n/g,"<br/>").replace(Hme,function(r){return"&#x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+";"})}function Gyt(t){var e=t+"";return e.replace(GV,function(r){return KV[r]}).replace(Hme,function(r){return"&#x"+r.charCodeAt(0).toString(16).toUpperCase()+";"})}var Bre=function(){var t=/&#(\d+);/g;function e(r,n){return String.fromCharCode(parseInt(n,10))}return function(n){return n.replace(t,e)}}();function Yyt(t){return t.replace(/(\r\n|[\r\n])/g,"&#10;")}function ei(t){switch(t){case 1:case!0:case"1":case"true":return!0;case 0:case!1:case"0":case"false":return!1}return!1}function cB(t){for(var e="",r=0,n=0,i=0,s=0,a=0,o=0;r<t.length;){if(n=t.charCodeAt(r++),n<128){e+=String.fromCharCode(n);continue}if(i=t.charCodeAt(r++),n>191&&n<224){a=(n&31)<<6,a|=i&63,e+=String.fromCharCode(a);continue}if(s=t.charCodeAt(r++),n<240){e+=String.fromCharCode((n&15)<<12|(i&63)<<6|s&63);continue}a=t.charCodeAt(r++),o=((n&7)<<18|(i&63)<<12|(s&63)<<6|a&63)-65536,e+=String.fromCharCode(55296+(o>>>10&1023)),e+=String.fromCharCode(56320+(o&1023))}return e}function Dre(t){var e=V1(2*t.length),r,n,i=1,s=0,a=0,o;for(n=0;n<t.length;n+=i)i=1,(o=t.charCodeAt(n))<128?r=o:o<224?(r=(o&31)*64+(t.charCodeAt(n+1)&63),i=2):o<240?(r=(o&15)*4096+(t.charCodeAt(n+1)&63)*64+(t.charCodeAt(n+2)&63),i=3):(i=4,r=(o&7)*262144+(t.charCodeAt(n+1)&63)*4096+(t.charCodeAt(n+2)&63)*64+(t.charCodeAt(n+3)&63),r-=65536,a=55296+(r>>>10&1023),r=56320+(r&1023)),a!==0&&(e[s++]=a&255,e[s++]=a>>>8,a=0),e[s++]=r%256,e[s++]=r>>>8;return e.slice(0,s).toString("ucs2")}function Ore(t){return Ah(t,"binary").toString("utf8")}var k5="foo bar bazâð£",ni=tn&&(Ore(k5)==cB(k5)&&Ore||Dre(k5)==cB(k5)&&Dre)||cB,Xf=tn?function(t){return Ah(t,"utf8").toString("binary")}:function(t){for(var e=[],r=0,n=0,i=0;r<t.length;)switch(n=t.charCodeAt(r++),!0){case n<128:e.push(String.fromCharCode(n));break;case n<2048:e.push(String.fromCharCode(192+(n>>6))),e.push(String.fromCharCode(128+(n&63)));break;case(n>=55296&&n<57344):n-=55296,i=t.charCodeAt(r++)-56320+(n<<10),e.push(String.fromCharCode(240+(i>>18&7))),e.push(String.fromCharCode(144+(i>>12&63))),e.push(String.fromCharCode(128+(i>>6&63))),e.push(String.fromCharCode(128+(i&63)));break;default:e.push(String.fromCharCode(224+(n>>12))),e.push(String.fromCharCode(128+(n>>6&63))),e.push(String.fromCharCode(128+(n&63)))}return e.join("")},E4=function(){var t={};return function(r,n){var i=r+"|"+(n||"");return t[i]?t[i]:t[i]=new RegExp("<(?:\\w+:)?"+r+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+r+">",n||"")}}(),Wme=function(){var t=[["nbsp"," "],["middot","·"],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(e){return[new RegExp("&"+e[0]+";","ig"),e[1]]});return function(r){for(var n=r.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),i=0;i<t.length;++i)n=n.replace(t[i][0],t[i][1]);return n}}(),Xyt=function(){var t={};return function(r){return t[r]!==void 0?t[r]:t[r]=new RegExp("<(?:vt:)?"+r+">([\\s\\S]*?)</(?:vt:)?"+r+">","g")}}(),Zyt=/<\/?(?:vt:)?variant>/g,Jyt=/<(?:vt:)([^>]*)>([\s\S]*)</;function Nre(t,e){var r=Lt(t),n=t.match(Xyt(r.baseType))||[],i=[];if(n.length!=r.size){if(e.WTF)throw new Error("unexpected vector length "+n.length+" != "+r.size);return i}return n.forEach(function(s){var a=s.replace(Zyt,"").match(Jyt);a&&i.push({v:ni(a[2]),t:a[1]})}),i}var Kme=/(^\s|\s$|\n)/;function La(t,e){return"<"+t+(e.match(Kme)?' xml:space="preserve"':"")+">"+e+"</"+t+">"}function S4(t){return Ki(t).map(function(e){return" "+e+'="'+t[e]+'"'}).join("")}function yt(t,e,r){return"<"+t+(r!=null?S4(r):"")+(e!=null?(e.match(Kme)?' xml:space="preserve"':"")+">"+e+"</"+t:"/")+">"}function zN(t,e){try{return t.toISOString().replace(/\.\d*/,"")}catch(r){if(e)throw r}return""}function Qyt(t,e){switch(typeof t){case"string":var r=yt("vt:lpwstr",$r(t));return r=r.replace(/&quot;/g,"_x0022_"),r;case"number":return yt((t|0)==t?"vt:i4":"vt:r8",$r(String(t)));case"boolean":return yt("vt:bool",t?"true":"false")}if(t instanceof Date)return yt("vt:filetime",zN(t));throw new Error("Unable to serialize "+t)}function UA(t){if(tn&&Buffer.isBuffer(t))return t.toString("utf8");if(typeof t=="string")return t;if(typeof Uint8Array<"u"&&t instanceof Uint8Array)return ni(lh(VV(t)));throw new Error("Bad input format: expected Buffer or string")}var Is=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/](?:[^>=]|="[^"]*?")*)?>/mg,Ys={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",mx:"http://schemas.microsoft.com/office/mac/excel/2008/main",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",sjs:"http://schemas.openxmlformats.org/package/2006/sheetjs/core-properties",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},Km=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],Gc={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function evt(t,e){for(var r=1-2*(t[e+7]>>>7),n=((t[e+7]&127)<<4)+(t[e+6]>>>4&15),i=t[e+6]&15,s=5;s>=0;--s)i=i*256+t[e+s];return n==2047?i==0?r*(1/0):NaN:(n==0?n=-1022:(n-=1023,i+=Math.pow(2,52)),r*Math.pow(2,n-52)*i)}function tvt(t,e,r){var n=(e<0||1/e==-1/0?1:0)<<7,i=0,s=0,a=n?-e:e;isFinite(a)?a==0?i=s=0:(i=Math.floor(Math.log(a)/Math.LN2),s=a*Math.pow(2,52-i),i<=-1023&&(!isFinite(s)||s<Math.pow(2,52))?i=-1022:(s-=Math.pow(2,52),i+=1023)):(i=2047,s=isNaN(e)?26985:0);for(var o=0;o<=5;++o,s/=256)t[r+o]=s&255;t[r+6]=(i&15)<<4|s&15,t[r+7]=i>>4|n}var Mre=function(t){for(var e=[],r=10240,n=0;n<t[0].length;++n)if(t[0][n])for(var i=0,s=t[0][n].length;i<s;i+=r)e.push.apply(e,t[0][n].slice(i,i+r));return e},Lre=tn?function(t){return t[0].length>0&&Buffer.isBuffer(t[0][0])?Buffer.concat(t[0].map(function(e){return Buffer.isBuffer(e)?e:Ah(e)})):Mre(t)}:Mre,Fre=function(t,e,r){for(var n=[],i=e;i<r;i+=2)n.push(String.fromCharCode(Rd(t,i)));return n.join("").replace(fo,"")},VA=tn?function(t,e,r){return!Buffer.isBuffer(t)||!_4?Fre(t,e,r):t.toString("utf16le",e,r).replace(fo,"")}:Fre,$re=function(t,e,r){for(var n=[],i=e;i<e+r;++i)n.push(("0"+t[i].toString(16)).slice(-2));return n.join("")},Gme=tn?function(t,e,r){return Buffer.isBuffer(t)?t.toString("hex",e,e+r):$re(t,e,r)}:$re,Ure=function(t,e,r){for(var n=[],i=e;i<r;i++)n.push(String.fromCharCode(Q2(t,i)));return n.join("")},Sb=tn?function(e,r,n){return Buffer.isBuffer(e)?e.toString("utf8",r,n):Ure(e,r,n)}:Ure,Yme=function(t,e){var r=ha(t,e);return r>0?Sb(t,e+4,e+4+r-1):""},XV=Yme,Xme=function(t,e){var r=ha(t,e);return r>0?Sb(t,e+4,e+4+r-1):""},ZV=Xme,Zme=function(t,e){var r=2*ha(t,e);return r>0?Sb(t,e+4,e+4+r-1):""},JV=Zme,Jme=function(e,r){var n=ha(e,r);return n>0?VA(e,r+4,r+4+n):""},QV=Jme,Qme=function(t,e){var r=ha(t,e);return r>0?Sb(t,e+4,e+4+r):""},ej=Qme,e2e=function(t,e){return evt(t,e)},zE=e2e,tj=function(e){return Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array};tn&&(XV=function(e,r){if(!Buffer.isBuffer(e))return Yme(e,r);var n=e.readUInt32LE(r);return n>0?e.toString("utf8",r+4,r+4+n-1):""},ZV=function(e,r){if(!Buffer.isBuffer(e))return Xme(e,r);var n=e.readUInt32LE(r);return n>0?e.toString("utf8",r+4,r+4+n-1):""},JV=function(e,r){if(!Buffer.isBuffer(e)||!_4)return Zme(e,r);var n=2*e.readUInt32LE(r);return e.toString("utf16le",r+4,r+4+n-1)},QV=function(e,r){if(!Buffer.isBuffer(e)||!_4)return Jme(e,r);var n=e.readUInt32LE(r);return e.toString("utf16le",r+4,r+4+n)},ej=function(e,r){if(!Buffer.isBuffer(e))return Qme(e,r);var n=e.readUInt32LE(r);return e.toString("utf8",r+4,r+4+n)},zE=function(e,r){return Buffer.isBuffer(e)?e.readDoubleLE(r):e2e(e,r)},tj=function(e){return Buffer.isBuffer(e)||Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array});function t2e(){VA=function(t,e,r){return Br.utils.decode(1200,t.slice(e,r)).replace(fo,"")},Sb=function(t,e,r){return Br.utils.decode(65001,t.slice(e,r))},XV=function(t,e){var r=ha(t,e);return r>0?Br.utils.decode(lm,t.slice(e+4,e+4+r-1)):""},ZV=function(t,e){var r=ha(t,e);return r>0?Br.utils.decode(Gs,t.slice(e+4,e+4+r-1)):""},JV=function(t,e){var r=2*ha(t,e);return r>0?Br.utils.decode(1200,t.slice(e+4,e+4+r-1)):""},QV=function(t,e){var r=ha(t,e);return r>0?Br.utils.decode(1200,t.slice(e+4,e+4+r)):""},ej=function(t,e){var r=ha(t,e);return r>0?Br.utils.decode(65001,t.slice(e+4,e+4+r)):""}}typeof Br<"u"&&t2e();var Q2=function(t,e){return t[e]},Rd=function(t,e){return t[e+1]*256+t[e]},rvt=function(t,e){var r=t[e+1]*256+t[e];return r<32768?r:(65535-r+1)*-1},ha=function(t,e){return t[e+3]*(1<<24)+(t[e+2]<<16)+(t[e+1]<<8)+t[e]},sg=function(t,e){return t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e]},nvt=function(t,e){return t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]};function T3(t,e){var r="",n,i,s=[],a,o,c,l;switch(e){case"dbcs":if(l=this.l,tn&&Buffer.isBuffer(this)&&_4)r=this.slice(this.l,this.l+2*t).toString("utf16le");else for(c=0;c<t;++c)r+=String.fromCharCode(Rd(this,l)),l+=2;t*=2;break;case"utf8":r=Sb(this,this.l,this.l+t);break;case"utf16le":t*=2,r=VA(this,this.l,this.l+t);break;case"wstr":if(typeof Br<"u")r=Br.utils.decode(Gs,this.slice(this.l,this.l+2*t));else return T3.call(this,t,"dbcs");t=2*t;break;case"lpstr-ansi":r=XV(this,this.l),t=4+ha(this,this.l);break;case"lpstr-cp":r=ZV(this,this.l),t=4+ha(this,this.l);break;case"lpwstr":r=JV(this,this.l),t=4+2*ha(this,this.l);break;case"lpp4":t=4+ha(this,this.l),r=QV(this,this.l),t&2&&(t+=2);break;case"8lpp4":t=4+ha(this,this.l),r=ej(this,this.l),t&3&&(t+=4-(t&3));break;case"cstr":for(t=0,r="";(a=Q2(this,this.l+t++))!==0;)s.push(Yw(a));r=s.join("");break;case"_wstr":for(t=0,r="";(a=Rd(this,this.l+t))!==0;)s.push(Yw(a)),t+=2;t+=2,r=s.join("");break;case"dbcs-cont":for(r="",l=this.l,c=0;c<t;++c){if(this.lens&&this.lens.indexOf(l)!==-1)return a=Q2(this,l),this.l=l+1,o=T3.call(this,t-c,a?"dbcs-cont":"sbcs-cont"),s.join("")+o;s.push(Yw(Rd(this,l))),l+=2}r=s.join(""),t*=2;break;case"cpstr":if(typeof Br<"u"){r=Br.utils.decode(Gs,this.slice(this.l,this.l+t));break}case"sbcs-cont":for(r="",l=this.l,c=0;c!=t;++c){if(this.lens&&this.lens.indexOf(l)!==-1)return a=Q2(this,l),this.l=l+1,o=T3.call(this,t-c,a?"dbcs-cont":"sbcs-cont"),s.join("")+o;s.push(Yw(Q2(this,l))),l+=1}r=s.join("");break;default:switch(t){case 1:return n=Q2(this,this.l),this.l++,n;case 2:return n=(e==="i"?rvt:Rd)(this,this.l),this.l+=2,n;case 4:case-4:return e==="i"||!(this[this.l+3]&128)?(n=(t>0?sg:nvt)(this,this.l),this.l+=4,n):(i=ha(this,this.l),this.l+=4,i);case 8:case-8:if(e==="f")return t==8?i=zE(this,this.l):i=zE([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,i;t=8;case 16:r=Gme(this,this.l,t);break}}return this.l+=t,r}var ivt=function(t,e,r){t[r]=e&255,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24&255},svt=function(t,e,r){t[r]=e&255,t[r+1]=e>>8&255,t[r+2]=e>>16&255,t[r+3]=e>>24&255},avt=function(t,e,r){t[r]=e&255,t[r+1]=e>>>8&255};function ovt(t,e,r){var n=0,i=0;if(r==="dbcs"){for(i=0;i!=e.length;++i)avt(this,e.charCodeAt(i),this.l+2*i);n=2*e.length}else if(r==="sbcs"||r=="cpstr")if(typeof Br<"u"&&lm==874){for(i=0;i!=e.length;++i){var s=Br.utils.encode(lm,e.charAt(i));this[this.l+i]=s[0]}n=e.length}else if(typeof Br<"u"&&r=="cpstr"){if(s=Br.utils.encode(Gs,e),s.length==e.length)for(i=0;i<e.length;++i)s[i]==0&&e.charCodeAt(i)!=0&&(s[i]=95);if(s.length==2*e.length)for(i=0;i<e.length;++i)s[2*i]==0&&s[2*i+1]==0&&e.charCodeAt(i)!=0&&(s[2*i]=95);for(i=0;i<s.length;++i)this[this.l+i]=s[i];n=s.length}else{for(e=e.replace(/[^\x00-\x7F]/g,"_"),i=0;i!=e.length;++i)this[this.l+i]=e.charCodeAt(i)&255;n=e.length}else if(r==="hex"){for(;i<t;++i)this[this.l++]=parseInt(e.slice(2*i,2*i+2),16)||0;return this}else if(r==="utf16le"){var a=Math.min(this.l+t,this.length);for(i=0;i<Math.min(e.length,t);++i){var o=e.charCodeAt(i);this[this.l++]=o&255,this[this.l++]=o>>8}for(;this.l<a;)this[this.l++]=0;return this}else switch(t){case 1:n=1,this[this.l]=e&255;break;case 2:n=2,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255;break;case 3:n=3,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255,e>>>=8,this[this.l+2]=e&255;break;case 4:n=4,ivt(this,e,this.l);break;case 8:if(n=8,r==="f"){tvt(this,e,this.l);break}case 16:break;case-4:n=4,svt(this,e,this.l);break}return this.l+=n,this}function r2e(t,e){var r=Gme(this,this.l,t.length>>1);if(r!==t)throw new Error(e+"Expected "+t+" saw "+r);this.l+=t.length>>1}function Ws(t,e){t.l=e,t.read_shift=T3,t.chk=r2e,t.write_shift=ovt}function vo(t,e){t.l+=e}function Ge(t){var e=V1(t);return Ws(e,0),e}function f0(t,e,r){if(t){var n,i,s;Ws(t,t.l||0);for(var a=t.length,o=0,c=0;t.l<a;){o=t.read_shift(1),o&128&&(o=(o&127)+((t.read_shift(1)&127)<<7));var l=D4[o]||D4[65535];for(n=t.read_shift(1),s=n&127,i=1;i<4&&n&128;++i)s+=((n=t.read_shift(1))&127)<<7*i;c=t.l+s;var u=l.f&&l.f(t,s,r);if(t.l=c,e(u,l,o))return}}}function Ac(){var t=[],e=tn?256:2048,r=function(l){var u=Ge(l);return Ws(u,0),u},n=r(e),i=function(){n&&(n.l&&(n.length>n.l&&(n=n.slice(0,n.l),n.l=n.length),n.length>0&&t.push(n)),n=null)},s=function(l){return n&&l<n.length-n.l?n:(i(),n=r(Math.max(l+1,e)))},a=function(){return i(),Ds(t)},o=function(l){i(),n=l,n.l==null&&(n.l=n.length),s(e)};return{next:s,push:o,end:a,_bufs:t}}function tt(t,e,r,n){var i=+e,s;if(!isNaN(i)){n||(n=D4[i].p||(r||[]).length||0),s=1+(i>=128?1:0)+1,n>=128&&++s,n>=16384&&++s,n>=2097152&&++s;var a=t.next(s);i<=127?a.write_shift(1,i):(a.write_shift(1,(i&127)+128),a.write_shift(1,i>>7));for(var o=0;o!=4;++o)if(n>=128)a.write_shift(1,(n&127)+128),n>>=7;else{a.write_shift(1,n);break}n>0&&tj(r)&&t.push(r)}}function k3(t,e,r){var n=ii(t);if(e.s?(n.cRel&&(n.c+=e.s.c),n.rRel&&(n.r+=e.s.r)):(n.cRel&&(n.c+=e.c),n.rRel&&(n.r+=e.r)),!r||r.biff<12){for(;n.c>=256;)n.c-=256;for(;n.r>=65536;)n.r-=65536}return n}function Vre(t,e,r){var n=ii(t);return n.s=k3(n.s,e.s,r),n.e=k3(n.e,e.s,r),n}function C3(t,e){if(t.cRel&&t.c<0)for(t=ii(t);t.c<0;)t.c+=e>8?16384:256;if(t.rRel&&t.r<0)for(t=ii(t);t.r<0;)t.r+=e>8?1048576:e>5?65536:16384;var r=en(t);return!t.cRel&&t.cRel!=null&&(r=uvt(r)),!t.rRel&&t.rRel!=null&&(r=cvt(r)),r}function lB(t,e){return t.s.r==0&&!t.s.rRel&&t.e.r==(e.biff>=12?1048575:e.biff>=8?65536:16384)&&!t.e.rRel?(t.s.cRel?"":"$")+Hr(t.s.c)+":"+(t.e.cRel?"":"$")+Hr(t.e.c):t.s.c==0&&!t.s.cRel&&t.e.c==(e.biff>=12?16383:255)&&!t.e.cRel?(t.s.rRel?"":"$")+hn(t.s.r)+":"+(t.e.rRel?"":"$")+hn(t.e.r):C3(t.s,e.biff)+":"+C3(t.e,e.biff)}function rj(t){return parseInt(lvt(t),10)-1}function hn(t){return""+(t+1)}function cvt(t){return t.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function lvt(t){return t.replace(/\$(\d+)$/,"$1")}function nj(t){for(var e=fvt(t),r=0,n=0;n!==e.length;++n)r=26*r+e.charCodeAt(n)-64;return r-1}function Hr(t){if(t<0)throw new Error("invalid column "+t);var e="";for(++t;t;t=Math.floor((t-1)/26))e=String.fromCharCode((t-1)%26+65)+e;return e}function uvt(t){return t.replace(/^([A-Z])/,"$$$1")}function fvt(t){return t.replace(/^\$([A-Z])/,"$1")}function hvt(t){return t.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function Hn(t){for(var e=0,r=0,n=0;n<t.length;++n){var i=t.charCodeAt(n);i>=48&&i<=57?e=10*e+(i-48):i>=65&&i<=90&&(r=26*r+(i-64))}return{c:r-1,r:e-1}}function en(t){for(var e=t.c+1,r="";e;e=(e-1)/26|0)r=String.fromCharCode((e-1)%26+65)+r;return r+(t.r+1)}function Js(t){var e=t.indexOf(":");return e==-1?{s:Hn(t),e:Hn(t)}:{s:Hn(t.slice(0,e)),e:Hn(t.slice(e+1))}}function Ir(t,e){return typeof e>"u"||typeof e=="number"?Ir(t.s,t.e):(typeof t!="string"&&(t=en(t)),typeof e!="string"&&(e=en(e)),t==e?t:t+":"+e)}function A4(t){var e=Js(t);return"$"+Hr(e.s.c)+"$"+hn(e.s.r)+":$"+Hr(e.e.c)+"$"+hn(e.e.r)}function T4(t,e){if(!t&&!(e&&e.biff<=5&&e.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(t)?"'"+t.replace(/'/g,"''")+"'":t}function pn(t){var e={s:{c:0,r:0},e:{c:0,r:0}},r=0,n=0,i=0,s=t.length;for(r=0;n<s&&!((i=t.charCodeAt(n)-64)<1||i>26);++n)r=26*r+i;for(e.s.c=--r,r=0;n<s&&!((i=t.charCodeAt(n)-48)<0||i>9);++n)r=10*r+i;if(e.s.r=--r,n===s||i!=10)return e.e.c=e.s.c,e.e.r=e.s.r,e;for(++n,r=0;n!=s&&!((i=t.charCodeAt(n)-64)<1||i>26);++n)r=26*r+i;for(e.e.c=--r,r=0;n!=s&&!((i=t.charCodeAt(n)-48)<0||i>9);++n)r=10*r+i;return e.e.r=--r,e}function jre(t,e){var r=t.t=="d"&&e instanceof Date;if(t.z!=null)try{return t.w=Cc(t.z,r?Ls(e):e)}catch{}try{return t.w=Cc((t.XF||{}).numFmtId||(r?14:0),r?Ls(e):e)}catch{return""+e}}function uh(t,e,r){return t==null||t.t==null||t.t=="z"?"":t.w!==void 0?t.w:(t.t=="d"&&!t.z&&r&&r.dateNF&&(t.z=r.dateNF),t.t=="e"?h0[t.v]||t.v:e==null?jre(t,t.v):jre(t,e))}function fp(t,e){var r=e&&e.sheet?e.sheet:"Sheet1",n={};return n[r]=t,{SheetNames:[r],Sheets:n}}function n2e(t,e,r){var n=r||{},i=t?t["!data"]!=null:n.dense,s=t||{};i&&!s["!data"]&&(s["!data"]=[]);var a=0,o=0;if(s&&n.origin!=null){if(typeof n.origin=="number")a=n.origin;else{var c=typeof n.origin=="string"?Hn(n.origin):n.origin;a=c.r,o=c.c}s["!ref"]||(s["!ref"]="A1:A1")}var l={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(s["!ref"]){var u=pn(s["!ref"]);l.s.c=u.s.c,l.s.r=u.s.r,l.e.c=Math.max(l.e.c,u.e.c),l.e.r=Math.max(l.e.r,u.e.r),a==-1&&(l.e.r=a=u.e.r+1)}for(var f=[],h=0;h!=e.length;++h)if(e[h]){if(!Array.isArray(e[h]))throw new Error("aoa_to_sheet expects an array of arrays");var d=a+h,g=""+(d+1);i&&(s["!data"][d]||(s["!data"][d]=[]),f=s["!data"][d]);for(var p=0;p!=e[h].length;++p)if(!(typeof e[h][p]>"u")){var m={v:e[h][p]},y=o+p;if(l.s.r>d&&(l.s.r=d),l.s.c>y&&(l.s.c=y),l.e.r<d&&(l.e.r=d),l.e.c<y&&(l.e.c=y),e[h][p]&&typeof e[h][p]=="object"&&!Array.isArray(e[h][p])&&!(e[h][p]instanceof Date))m=e[h][p];else if(Array.isArray(m.v)&&(m.f=e[h][p][1],m.v=m.v[0]),m.v===null)if(m.f)m.t="n";else if(n.nullError)m.t="e",m.v=0;else if(n.sheetStubs)m.t="z";else continue;else typeof m.v=="number"?m.t="n":typeof m.v=="boolean"?m.t="b":m.v instanceof Date?(m.z=n.dateNF||tr[14],n.cellDates?(m.t="d",m.w=Cc(m.z,Ls(m.v,n.date1904))):(m.t="n",m.v=Ls(m.v,n.date1904),m.w=Cc(m.z,m.v))):m.t="s";if(i)f[y]&&f[y].z&&(m.z=f[y].z),f[y]=m;else{var v=Hr(y)+g;s[v]&&s[v].z&&(m.z=s[v].z),s[v]=m}}}return l.s.c<1e7&&(s["!ref"]=Ir(l)),s}function Ab(t,e){return n2e(null,t,e)}function dvt(t){return t.read_shift(4,"i")}function Fu(t,e){return e||(e=Ge(4)),e.write_shift(4,t),e}function ho(t){var e=t.read_shift(4);return e===0?"":t.read_shift(e,"dbcs")}function Zs(t,e){var r=!1;return e==null&&(r=!0,e=Ge(4+2*t.length)),e.write_shift(4,t.length),t.length>0&&e.write_shift(0,t,"dbcs"),r?e.slice(0,e.l):e}function pvt(t){return{ich:t.read_shift(2),ifnt:t.read_shift(2)}}function gvt(t,e){return e||(e=Ge(4)),e.write_shift(2,0),e.write_shift(2,0),e}function ij(t,e){var r=t.l,n=t.read_shift(1),i=ho(t),s=[],a={t:i,h:i};if(n&1){for(var o=t.read_shift(4),c=0;c!=o;++c)s.push(pvt(t));a.r=s}else a.r=[{ich:0,ifnt:0}];return t.l=r+e,a}function mvt(t,e){var r=!1;return e==null&&(r=!0,e=Ge(15+4*t.t.length)),e.write_shift(1,0),Zs(t.t,e),r?e.slice(0,e.l):e}var yvt=ij;function vvt(t,e){var r=!1;return e==null&&(r=!0,e=Ge(23+4*t.t.length)),e.write_shift(1,1),Zs(t.t,e),e.write_shift(4,1),gvt({ich:0,ifnt:0},e),r?e.slice(0,e.l):e}function Ql(t){var e=t.read_shift(4),r=t.read_shift(2);return r+=t.read_shift(1)<<16,t.l++,{c:e,iStyleRef:r}}function Gm(t,e){return e==null&&(e=Ge(8)),e.write_shift(-4,t.c),e.write_shift(3,t.iStyleRef||t.s),e.write_shift(1,0),e}function Ym(t){var e=t.read_shift(2);return e+=t.read_shift(1)<<16,t.l++,{c:-1,iStyleRef:e}}function Xm(t,e){return e==null&&(e=Ge(4)),e.write_shift(3,t.iStyleRef||t.s),e.write_shift(1,0),e}var bvt=ho,i2e=Zs;function sj(t){var e=t.read_shift(4);return e===0||e===4294967295?"":t.read_shift(e,"dbcs")}function k4(t,e){var r=!1;return e==null&&(r=!0,e=Ge(127)),e.write_shift(4,t.length>0?t.length:4294967295),t.length>0&&e.write_shift(0,t,"dbcs"),r?e.slice(0,e.l):e}var wvt=ho,qN=sj,aj=k4;function oj(t){var e=t.slice(t.l,t.l+4),r=e[0]&1,n=e[0]&2;t.l+=4;var i=n===0?zE([0,0,0,0,e[0]&252,e[1],e[2],e[3]],0):sg(e,0)>>2;return r?i/100:i}function s2e(t,e){e==null&&(e=Ge(4));var r=0,n=0,i=t*100;if(t==(t|0)&&t>=-(1<<29)&&t<1<<29?n=1:i==(i|0)&&i>=-(1<<29)&&i<1<<29&&(n=1,r=1),n)e.write_shift(-4,((r?i:t)<<2)+(r+2));else throw new Error("unsupported RkNumber "+t)}function a2e(t){var e={s:{},e:{}};return e.s.r=t.read_shift(4),e.e.r=t.read_shift(4),e.s.c=t.read_shift(4),e.e.c=t.read_shift(4),e}function _vt(t,e){return e||(e=Ge(16)),e.write_shift(4,t.s.r),e.write_shift(4,t.e.r),e.write_shift(4,t.s.c),e.write_shift(4,t.e.c),e}var Zm=a2e,Tb=_vt;function lo(t){if(t.length-t.l<8)throw"XLS Xnum Buffer underflow";return t.read_shift(8,"f")}function hm(t,e){return(e||Ge(8)).write_shift(8,t,"f")}function xvt(t){var e={},r=t.read_shift(1),n=r>>>1,i=t.read_shift(1),s=t.read_shift(2,"i"),a=t.read_shift(1),o=t.read_shift(1),c=t.read_shift(1);switch(t.l++,n){case 0:e.auto=1;break;case 1:e.index=i;var l=Dg[i];l&&(e.rgb=I4(l));break;case 2:e.rgb=I4([a,o,c]);break;case 3:e.theme=i;break}return s!=0&&(e.tint=s>0?s/32767:s/32768),e}function qE(t,e){if(e||(e=Ge(8)),!t||t.auto)return e.write_shift(4,0),e.write_shift(4,0),e;t.index!=null?(e.write_shift(1,2),e.write_shift(1,t.index)):t.theme!=null?(e.write_shift(1,6),e.write_shift(1,t.theme)):(e.write_shift(1,5),e.write_shift(1,0));var r=t.tint||0;if(r>0?r*=32767:r<0&&(r*=32768),e.write_shift(2,r),!t.rgb||t.theme!=null)e.write_shift(2,0),e.write_shift(1,0),e.write_shift(1,0);else{var n=t.rgb||"FFFFFF";typeof n=="number"&&(n=("000000"+n.toString(16)).slice(-6)),e.write_shift(1,parseInt(n.slice(0,2),16)),e.write_shift(1,parseInt(n.slice(2,4),16)),e.write_shift(1,parseInt(n.slice(4,6),16)),e.write_shift(1,255)}return e}function Evt(t){var e=t.read_shift(1);t.l++;var r={fBold:e&1,fItalic:e&2,fUnderline:e&4,fStrikeout:e&8,fOutline:e&16,fShadow:e&32,fCondense:e&64,fExtend:e&128};return r}function Svt(t,e){e||(e=Ge(2));var r=(t.italic?2:0)|(t.strike?8:0)|(t.outline?16:0)|(t.shadow?32:0)|(t.condense?64:0)|(t.extend?128:0);return e.write_shift(1,r),e.write_shift(1,0),e}function o2e(t,e){var r={2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"},n=t.read_shift(4);switch(n){case 0:return"";case 4294967295:case 4294967294:return r[t.read_shift(4)]||""}if(n>400)throw new Error("Unsupported Clipboard: "+n.toString(16));return t.l-=4,t.read_shift(0,e==1?"lpstr":"lpwstr")}function Avt(t){return o2e(t,1)}function Tvt(t){return o2e(t,2)}var cj=2,fc=3,C5=11,zre=12,HE=19,I5=64,kvt=65,Cvt=71,Ivt=4108,Rvt=4126,oa=80,c2e=81,Pvt=[oa,c2e],HN={1:{n:"CodePage",t:cj},2:{n:"Category",t:oa},3:{n:"PresentationFormat",t:oa},4:{n:"ByteCount",t:fc},5:{n:"LineCount",t:fc},6:{n:"ParagraphCount",t:fc},7:{n:"SlideCount",t:fc},8:{n:"NoteCount",t:fc},9:{n:"HiddenCount",t:fc},10:{n:"MultimediaClipCount",t:fc},11:{n:"ScaleCrop",t:C5},12:{n:"HeadingPairs",t:Ivt},13:{n:"TitlesOfParts",t:Rvt},14:{n:"Manager",t:oa},15:{n:"Company",t:oa},16:{n:"LinksUpToDate",t:C5},17:{n:"CharacterCount",t:fc},19:{n:"SharedDoc",t:C5},22:{n:"HyperlinksChanged",t:C5},23:{n:"AppVersion",t:fc,p:"version"},24:{n:"DigSig",t:kvt},26:{n:"ContentType",t:oa},27:{n:"ContentStatus",t:oa},28:{n:"Language",t:oa},29:{n:"Version",t:oa},255:{},2147483648:{n:"Locale",t:HE},2147483651:{n:"Behavior",t:HE},1919054434:{}},WN={1:{n:"CodePage",t:cj},2:{n:"Title",t:oa},3:{n:"Subject",t:oa},4:{n:"Author",t:oa},5:{n:"Keywords",t:oa},6:{n:"Comments",t:oa},7:{n:"Template",t:oa},8:{n:"LastAuthor",t:oa},9:{n:"RevNumber",t:oa},10:{n:"EditTime",t:I5},11:{n:"LastPrinted",t:I5},12:{n:"CreatedDate",t:I5},13:{n:"ModifiedDate",t:I5},14:{n:"PageCount",t:fc},15:{n:"WordCount",t:fc},16:{n:"CharCount",t:fc},17:{n:"Thumbnail",t:Cvt},18:{n:"Application",t:oa},19:{n:"DocSecurity",t:fc},255:{},2147483648:{n:"Locale",t:HE},2147483651:{n:"Behavior",t:HE},1919054434:{}},qre={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},Bvt=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function Dvt(t){return t.map(function(e){return[e>>16&255,e>>8&255,e&255]})}var Ovt=Dvt([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,0,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Dg=ii(Ovt),h0={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},lj={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},uj=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"],KN={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},R5={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function fj(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function Nvt(t){var e=fj();if(!t||!t.match)return e;var r={};if((t.match(wo)||[]).forEach(function(n){var i=Lt(n);switch(i[0].replace(Hyt,"<")){case"<?xml":break;case"<Types":e.xmlns=i["xmlns"+(i[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":r[i.Extension.toLowerCase()]=i.ContentType;break;case"<Override":e[KN[i.ContentType]]!==void 0&&e[KN[i.ContentType]].push(i.PartName);break}}),e.xmlns!==Ys.CT)throw new Error("Unknown Namespace: "+e.xmlns);return e.calcchain=e.calcchains.length>0?e.calcchains[0]:"",e.sst=e.strs.length>0?e.strs[0]:"",e.style=e.styles.length>0?e.styles[0]:"",e.defaults=r,delete e.calcchains,e}function l2e(t,e,r){var n=Dyt(KN),i=[],s;i[i.length]=As,i[i.length]=yt("Types",null,{xmlns:Ys.CT,"xmlns:xsd":Ys.xsd,"xmlns:xsi":Ys.xsi}),i=i.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(l){return yt("Default",null,{Extension:l[0],ContentType:l[1]})}));var a=function(l){t[l]&&t[l].length>0&&(s=t[l][0],i[i.length]=yt("Override",null,{PartName:(s[0]=="/"?"":"/")+s,ContentType:R5[l][e.bookType]||R5[l].xlsx}))},o=function(l){(t[l]||[]).forEach(function(u){i[i.length]=yt("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:R5[l][e.bookType]||R5[l].xlsx})})},c=function(l){(t[l]||[]).forEach(function(u){i[i.length]=yt("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:n[l][0]})})};return a("workbooks"),o("sheets"),o("charts"),c("themes"),["strs","styles"].forEach(a),["coreprops","extprops","custprops"].forEach(c),c("vba"),c("comments"),c("threadedcomments"),c("drawings"),o("metadata"),c("people"),i.length>2&&(i[i.length]="</Types>",i[1]=i[1].replace("/>",">")),i.join("")}var nn={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",CONN:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/connections",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function C4(t){var e=t.lastIndexOf("/");return t.slice(0,e+1)+"_rels/"+t.slice(e+1)+".rels"}function I3(t,e){var r={"!id":{}};if(!t)return r;e.charAt(0)!=="/"&&(e="/"+e);var n={};return(t.match(wo)||[]).forEach(function(i){var s=Lt(i);if(s[0]==="<Relationship"){var a={};a.Type=s.Type,a.Target=s.Target,a.Id=s.Id,s.TargetMode&&(a.TargetMode=s.TargetMode);var o=s.TargetMode==="External"?s.Target:Zw(s.Target,e);r[o]=a,n[s.Id]=a}}),r["!id"]=n,r}function ky(t){var e=[As,yt("Relationships",null,{xmlns:Ys.RELS})];return Ki(t["!id"]).forEach(function(r){e[e.length]=yt("Relationship",null,t["!id"][r])}),e.length>2&&(e[e.length]="</Relationships>",e[1]=e[1].replace("/>",">")),e.join("")}function Zn(t,e,r,n,i,s){if(i||(i={}),t["!id"]||(t["!id"]={}),t["!idx"]||(t["!idx"]=1),e<0)for(e=t["!idx"];t["!id"]["rId"+e];++e);if(t["!idx"]=e+1,i.Id="rId"+e,i.Type=n,i.Target=r,[nn.HLINK,nn.XPATH,nn.XMISS].indexOf(i.Type)>-1&&(i.TargetMode="External"),t["!id"][i.Id])throw new Error("Cannot rewrite rId "+e);return t["!id"][i.Id]=i,t[("/"+i.Target).replace("//","/")]=i,e}var Mvt="application/vnd.oasis.opendocument.spreadsheet";function Lvt(t,e){for(var r=UA(t),n,i;n=Is.exec(r);)switch(n[3]){case"manifest":break;case"file-entry":if(i=Lt(n[0],!1),i.path=="/"&&i.type!==Mvt)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(e&&e.WTF)throw n}}function Fvt(t){var e=[As];e.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),e.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var r=0;r<t.length;++r)e.push('  <manifest:file-entry manifest:full-path="'+t[r][0]+'" manifest:media-type="'+t[r][1]+`"/>
`);return e.push("</manifest:manifest>"),e.join("")}function Hre(t,e,r){return['  <rdf:Description rdf:about="'+t+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(r||"odf")+"#"+e+`"/>
`,`  </rdf:Description>
`].join("")}function $vt(t,e){return['  <rdf:Description rdf:about="'+t+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+e+`"/>
`,`  </rdf:Description>
`].join("")}function Uvt(t){var e=[As];e.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var r=0;r!=t.length;++r)e.push(Hre(t[r][0],t[r][1])),e.push($vt("",t[r][0]));return e.push(Hre("","Document","pkg")),e.push("</rdf:RDF>"),e.join("")}function u2e(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+ME.version+"</meta:generator></office:meta></office:document-meta>"}var ql=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],Vvt=function(){for(var t=new Array(ql.length),e=0;e<ql.length;++e){var r=ql[e],n="(?:"+r[0].slice(0,r[0].indexOf(":"))+":)"+r[0].slice(r[0].indexOf(":")+1);t[e]=new RegExp("<"+n+"[^>]*>([\\s\\S]*?)</"+n+">")}return t}();function f2e(t){var e={};t=ni(t);for(var r=0;r<ql.length;++r){var n=ql[r],i=t.match(Vvt[r]);i!=null&&i.length>0&&(e[n[1]]=yn(i[1])),n[2]==="date"&&e[n[1]]&&(e[n[1]]=Xi(e[n[1]]))}return e}function uB(t,e,r,n,i){i[t]!=null||e==null||e===""||(i[t]=e,e=$r(e),n[n.length]=r?yt(t,e,r):La(t,e))}function h2e(t,e){var r=e||{},n=[As,yt("cp:coreProperties",null,{"xmlns:cp":Ys.CORE_PROPS,"xmlns:dc":Ys.dc,"xmlns:dcterms":Ys.dcterms,"xmlns:dcmitype":Ys.dcmitype,"xmlns:xsi":Ys.xsi})],i={};if(!t&&!r.Props)return n.join("");t&&(t.CreatedDate!=null&&uB("dcterms:created",typeof t.CreatedDate=="string"?t.CreatedDate:zN(t.CreatedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,i),t.ModifiedDate!=null&&uB("dcterms:modified",typeof t.ModifiedDate=="string"?t.ModifiedDate:zN(t.ModifiedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,i));for(var s=0;s!=ql.length;++s){var a=ql[s],o=r.Props&&r.Props[a[1]]!=null?r.Props[a[1]]:t?t[a[1]]:null;o===!0?o="1":o===!1?o="0":typeof o=="number"&&(o=String(o)),o!=null&&uB(a[0],o,null,n,i)}return n.length>2&&(n[n.length]="</cp:coreProperties>",n[1]=n[1].replace("/>",">")),n.join("")}var Og=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],d2e=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function p2e(t,e,r,n){var i=[];if(typeof t=="string")i=Nre(t,n);else for(var s=0;s<t.length;++s)i=i.concat(t[s].map(function(u){return{v:u}}));var a=typeof e=="string"?Nre(e,n).map(function(u){return u.v}):e,o=0,c=0;if(a.length>0)for(var l=0;l!==i.length;l+=2){switch(c=+i[l+1].v,i[l].v){case"Worksheets":case"工作表":case"Листы":case"أوراق العمل":case"ワークシート":case"גליונות עבודה":case"Arbeitsblätter":case"Çalışma Sayfaları":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de cálculo":case"Planilhas":case"Regneark":case"Hojas de cálculo":case"Werkbladen":r.Worksheets=c,r.SheetNames=a.slice(o,o+c);break;case"Named Ranges":case"Rangos con nombre":case"名前付き一覧":case"Benannte Bereiche":case"Navngivne områder":r.NamedRanges=c,r.DefinedNames=a.slice(o,o+c);break;case"Charts":case"Diagramme":r.Chartsheets=c,r.ChartNames=a.slice(o,o+c);break}o+=c}}function jvt(t,e,r){var n={};return e||(e={}),t=ni(t),Og.forEach(function(i){var s=(t.match(E4(i[0]))||[])[1];switch(i[2]){case"string":s&&(e[i[1]]=yn(s));break;case"bool":e[i[1]]=s==="true";break;case"raw":var a=t.match(new RegExp("<"+i[0]+"[^>]*>([\\s\\S]*?)</"+i[0]+">"));a&&a.length>0&&(n[i[1]]=a[1]);break}}),n.HeadingPairs&&n.TitlesOfParts&&p2e(n.HeadingPairs,n.TitlesOfParts,e,r),e}function g2e(t){var e=[],r=yt;return t||(t={}),t.Application="SheetJS",e[e.length]=As,e[e.length]=yt("Properties",null,{xmlns:Ys.EXT_PROPS,"xmlns:vt":Ys.vt}),Og.forEach(function(n){if(t[n[1]]!==void 0){var i;switch(n[2]){case"string":i=$r(String(t[n[1]]));break;case"bool":i=t[n[1]]?"true":"false";break}i!==void 0&&(e[e.length]=r(n[0],i))}}),e[e.length]=r("HeadingPairs",r("vt:vector",r("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+r("vt:variant",r("vt:i4",String(t.Worksheets))),{size:2,baseType:"variant"})),e[e.length]=r("TitlesOfParts",r("vt:vector",t.SheetNames.map(function(n){return"<vt:lpstr>"+$r(n)+"</vt:lpstr>"}).join(""),{size:t.Worksheets,baseType:"lpstr"})),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}var zvt=/<[^>]+>[^<]*/g;function qvt(t,e){var r={},n="",i=t.match(zvt);if(i)for(var s=0;s!=i.length;++s){var a=i[s],o=Lt(a);switch(af(o[0])){case"<?xml":break;case"<Properties":break;case"<property":n=yn(o.name);break;case"</property>":n=null;break;default:if(a.indexOf("<vt:")===0){var c=a.split(">"),l=c[0].slice(4),u=c[1];switch(l){case"lpstr":case"bstr":case"lpwstr":r[n]=yn(u);break;case"bool":r[n]=ei(u);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":r[n]=parseInt(u,10);break;case"r4":case"r8":case"decimal":r[n]=parseFloat(u);break;case"filetime":case"date":r[n]=Xi(u);break;case"cy":case"error":r[n]=yn(u);break;default:if(l.slice(-1)=="/")break;e.WTF&&typeof console<"u"&&console.warn("Unexpected",a,l,c)}}else if(a.slice(0,2)!=="</"){if(e.WTF)throw new Error(a)}}}return r}function m2e(t){var e=[As,yt("Properties",null,{xmlns:Ys.CUST_PROPS,"xmlns:vt":Ys.vt})];if(!t)return e.join("");var r=1;return Ki(t).forEach(function(i){++r,e[e.length]=yt("property",Qyt(t[i]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:r,name:$r(i)})}),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}var GN={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"},fB;function Hvt(t,e,r){fB||(fB=LA(GN)),e=fB[e]||e,t[e]=r}function Wvt(t,e){var r=[];return Ki(GN).map(function(n){for(var i=0;i<ql.length;++i)if(ql[i][1]==n)return ql[i];for(i=0;i<Og.length;++i)if(Og[i][1]==n)return Og[i];throw n}).forEach(function(n){if(t[n[1]]!=null){var i=e&&e.Props&&e.Props[n[1]]!=null?e.Props[n[1]]:t[n[1]];switch(n[2]){case"date":i=new Date(i).toISOString().replace(/\.\d*Z/,"Z");break}typeof i=="number"?i=String(i):i===!0||i===!1?i=i?"1":"0":i instanceof Date&&(i=new Date(i).toISOString().replace(/\.\d*Z/,"")),r.push(La(GN[n[1]]||n[1],i))}}),yt("DocumentProperties",r.join(""),{xmlns:Gc.o})}function Kvt(t,e){var r=["Worksheets","SheetNames"],n="CustomDocumentProperties",i=[];return t&&Ki(t).forEach(function(s){if(Object.prototype.hasOwnProperty.call(t,s)){for(var a=0;a<ql.length;++a)if(s==ql[a][1])return;for(a=0;a<Og.length;++a)if(s==Og[a][1])return;for(a=0;a<r.length;++a)if(s==r[a])return;var o=t[s],c="string";typeof o=="number"?(c="float",o=String(o)):o===!0||o===!1?(c="boolean",o=o?"1":"0"):o=String(o),i.push(yt(Pre(s),o,{"dt:dt":c}))}}),e&&Ki(e).forEach(function(s){if(Object.prototype.hasOwnProperty.call(e,s)&&!(t&&Object.prototype.hasOwnProperty.call(t,s))){var a=e[s],o="string";typeof a=="number"?(o="float",a=String(a)):a===!0||a===!1?(o="boolean",a=a?"1":"0"):a instanceof Date?(o="dateTime.tz",a=a.toISOString()):a=String(a),i.push(yt(Pre(s),a,{"dt:dt":o}))}}),"<"+n+' xmlns="'+Gc.o+'">'+i.join("")+"</"+n+">"}function hj(t){var e=t.read_shift(4),r=t.read_shift(4);return new Date((r/1e7*Math.pow(2,32)+e/1e7-11644473600)*1e3).toISOString().replace(/\.000/,"")}function Gvt(t){var e=typeof t=="string"?new Date(Date.parse(t)):t,r=e.getTime()/1e3+11644473600,n=r%Math.pow(2,32),i=(r-n)/Math.pow(2,32);n*=1e7,i*=1e7;var s=n/Math.pow(2,32)|0;s>0&&(n=n%Math.pow(2,32),i+=s);var a=Ge(8);return a.write_shift(4,n),a.write_shift(4,i),a}function y2e(t,e,r){var n=t.l,i=t.read_shift(0,"lpstr-cp");if(r)for(;t.l-n&3;)++t.l;return i}function v2e(t,e,r){var n=t.read_shift(0,"lpwstr");return n}function b2e(t,e,r){return e===31?v2e(t):y2e(t,e,r)}function YN(t,e,r){return b2e(t,e,r===!1?0:4)}function Yvt(t,e){if(!e)throw new Error("VtUnalignedString must have positive length");return b2e(t,e,0)}function Xvt(t){for(var e=t.read_shift(4),r=[],n=0;n!=e;++n){var i=t.l;r[n]=t.read_shift(0,"lpwstr").replace(fo,""),t.l-i&2&&(t.l+=2)}return r}function Zvt(t){for(var e=t.read_shift(4),r=[],n=0;n!=e;++n)r[n]=t.read_shift(0,"lpstr-cp").replace(fo,"");return r}function Jvt(t){var e=t.l,r=WE(t,c2e);t[t.l]==0&&t[t.l+1]==0&&t.l-e&2&&(t.l+=2);var n=WE(t,fc);return[r,n]}function Qvt(t){for(var e=t.read_shift(4),r=[],n=0;n<e/2;++n)r.push(Jvt(t));return r}function Wre(t,e){for(var r=t.read_shift(4),n={},i=0;i!=r;++i){var s=t.read_shift(4),a=t.read_shift(4);n[s]=t.read_shift(a,e===1200?"utf16le":"utf8").replace(fo,"").replace(Xw,"!"),e===1200&&a%2&&(t.l+=2)}return t.l&3&&(t.l=t.l>>3<<2),n}function w2e(t){var e=t.read_shift(4),r=t.slice(t.l,t.l+e);return t.l+=e,(e&3)>0&&(t.l+=4-(e&3)&3),r}function ebt(t){var e={};return e.Size=t.read_shift(4),t.l+=e.Size+3-(e.Size-1)%4,e}function WE(t,e,r){var n=t.read_shift(2),i,s=r||{};if(t.l+=2,e!==zre&&n!==e&&Pvt.indexOf(e)===-1&&!((e&65534)==4126&&(n&65534)==4126))throw new Error("Expected type "+e+" saw "+n);switch(e===zre?n:e){case 2:return i=t.read_shift(2,"i"),s.raw||(t.l+=2),i;case 3:return i=t.read_shift(4,"i"),i;case 11:return t.read_shift(4)!==0;case 19:return i=t.read_shift(4),i;case 30:return y2e(t,n,4).replace(fo,"");case 31:return v2e(t);case 64:return hj(t);case 65:return w2e(t);case 71:return ebt(t);case 80:return YN(t,n,!s.raw).replace(fo,"");case 81:return Yvt(t,n).replace(fo,"");case 4108:return Qvt(t);case 4126:case 4127:return n==4127?Xvt(t):Zvt(t);default:throw new Error("TypedPropertyValue unrecognized type "+e+" "+n)}}function Kre(t,e){var r=Ge(4),n=Ge(4);switch(r.write_shift(4,t==80?31:t),t){case 3:n.write_shift(-4,e);break;case 5:n=Ge(8),n.write_shift(8,e,"f");break;case 11:n.write_shift(4,e?1:0);break;case 64:n=Gvt(e);break;case 31:case 80:for(n=Ge(4+2*(e.length+1)+(e.length%2?0:2)),n.write_shift(4,e.length+1),n.write_shift(0,e,"dbcs");n.l!=n.length;)n.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+t+" "+e)}return Ds([r,n])}function Gre(t,e){var r=t.l,n=t.read_shift(4),i=t.read_shift(4),s=[],a=0,o=0,c=-1,l={};for(a=0;a!=i;++a){var u=t.read_shift(4),f=t.read_shift(4);s[a]=[u,f+r]}s.sort(function(v,_){return v[1]-_[1]});var h={};for(a=0;a!=i;++a){if(t.l!==s[a][1]){var d=!0;if(a>0&&e)switch(e[s[a-1][0]].t){case 2:t.l+2===s[a][1]&&(t.l+=2,d=!1);break;case 80:t.l<=s[a][1]&&(t.l=s[a][1],d=!1);break;case 4108:t.l<=s[a][1]&&(t.l=s[a][1],d=!1);break}if((!e||a==0)&&t.l<=s[a][1]&&(d=!1,t.l=s[a][1]),d)throw new Error("Read Error: Expected address "+s[a][1]+" at "+t.l+" :"+a)}if(e){if(s[a][0]==0&&s.length>a+1&&s[a][1]==s[a+1][1])continue;var g=e[s[a][0]];if(h[g.n]=WE(t,g.t,{raw:!0}),g.p==="version"&&(h[g.n]=String(h[g.n]>>16)+"."+("0000"+String(h[g.n]&65535)).slice(-4)),g.n=="CodePage")switch(h[g.n]){case 0:h[g.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:Ul(o=h[g.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+h[g.n])}}else if(s[a][0]===1){if(o=h.CodePage=WE(t,cj),Ul(o),c!==-1){var p=t.l;t.l=s[c][1],l=Wre(t,o),t.l=p}}else if(s[a][0]===0){if(o===0){c=a,t.l=s[a+1][1];continue}l=Wre(t,o)}else{var m=l[s[a][0]],y;switch(t[t.l]){case 65:t.l+=4,y=w2e(t);break;case 30:t.l+=4,y=YN(t,t[t.l-4]).replace(/\u0000+$/,"");break;case 31:t.l+=4,y=YN(t,t[t.l-4]).replace(/\u0000+$/,"");break;case 3:t.l+=4,y=t.read_shift(4,"i");break;case 19:t.l+=4,y=t.read_shift(4);break;case 5:t.l+=4,y=t.read_shift(8,"f");break;case 11:t.l+=4,y=vs(t,4);break;case 64:t.l+=4,y=Xi(hj(t));break;default:throw new Error("unparsed value: "+t[t.l])}h[m]=y}}return t.l=r+n,h}var _2e=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function tbt(t){switch(typeof t){case"boolean":return 11;case"number":return(t|0)==t?3:5;case"string":return 31;case"object":if(t instanceof Date)return 64;break}return-1}function Yre(t,e,r){var n=Ge(8),i=[],s=[],a=8,o=0,c=Ge(8),l=Ge(8);if(c.write_shift(4,2),c.write_shift(4,1200),l.write_shift(4,1),s.push(c),i.push(l),a+=8+c.length,!e){l=Ge(8),l.write_shift(4,0),i.unshift(l);var u=[Ge(4)];for(u[0].write_shift(4,t.length),o=0;o<t.length;++o){var f=t[o][0];for(c=Ge(8+2*(f.length+1)+(f.length%2?0:2)),c.write_shift(4,o+2),c.write_shift(4,f.length+1),c.write_shift(0,f,"dbcs");c.l!=c.length;)c.write_shift(1,0);u.push(c)}c=Ds(u),s.unshift(c),a+=8+c.length}for(o=0;o<t.length;++o)if(!(e&&!e[t[o][0]])&&!(_2e.indexOf(t[o][0])>-1||d2e.indexOf(t[o][0])>-1)&&t[o][1]!=null){var h=t[o][1],d=0;if(e){d=+e[t[o][0]];var g=r[d];if(g.p=="version"&&typeof h=="string"){var p=h.split(".");h=(+p[0]<<16)+(+p[1]||0)}c=Kre(g.t,h)}else{var m=tbt(h);m==-1&&(m=31,h=String(h)),c=Kre(m,h)}s.push(c),l=Ge(8),l.write_shift(4,e?d:2+o),i.push(l),a+=8+c.length}var y=8*(s.length+1);for(o=0;o<s.length;++o)i[o].write_shift(4,y),y+=s[o].length;return n.write_shift(4,a),n.write_shift(4,s.length),Ds([n].concat(i).concat(s))}function Xre(t,e,r){var n=t.content;if(!n)return{};Ws(n,0);var i,s,a,o,c=0;n.chk("feff","Byte Order: "),n.read_shift(2);var l=n.read_shift(4),u=n.read_shift(16);if(u!==Kt.utils.consts.HEADER_CLSID&&u!==r)throw new Error("Bad PropertySet CLSID "+u);if(i=n.read_shift(4),i!==1&&i!==2)throw new Error("Unrecognized #Sets: "+i);if(s=n.read_shift(16),o=n.read_shift(4),i===1&&o!==n.l)throw new Error("Length mismatch: "+o+" !== "+n.l);i===2&&(a=n.read_shift(16),c=n.read_shift(4));var f=Gre(n,e),h={SystemIdentifier:l};for(var d in f)h[d]=f[d];if(h.FMTID=s,i===1)return h;if(c-n.l==2&&(n.l+=2),n.l!==c)throw new Error("Length mismatch 2: "+n.l+" !== "+c);var g;try{g=Gre(n,null)}catch{}for(d in g)h[d]=g[d];return h.FMTID=[s,a],h}function Zre(t,e,r,n,i,s){var a=Ge(i?68:48),o=[a];a.write_shift(2,65534),a.write_shift(2,0),a.write_shift(4,842412599),a.write_shift(16,Kt.utils.consts.HEADER_CLSID,"hex"),a.write_shift(4,i?2:1),a.write_shift(16,e,"hex"),a.write_shift(4,i?68:48);var c=Yre(t,r,n);if(o.push(c),i){var l=Yre(i,null,null);a.write_shift(16,s,"hex"),a.write_shift(4,68+c.length),o.push(l)}return Ds(o)}function H0(t,e){return t.read_shift(e),null}function rbt(t,e){e||(e=Ge(t));for(var r=0;r<t;++r)e.write_shift(1,0);return e}function nbt(t,e,r){for(var n=[],i=t.l+e;t.l<i;)n.push(r(t,i-t.l));if(i!==t.l)throw new Error("Slurp error");return n}function vs(t,e){return t.read_shift(e)===1}function Fo(t,e){return e||(e=Ge(2)),e.write_shift(2,+!!t),e}function bs(t){return t.read_shift(2,"u")}function Dl(t,e){return e||(e=Ge(2)),e.write_shift(2,t),e}function x2e(t,e){return nbt(t,e,bs)}function ibt(t){var e=t.read_shift(1),r=t.read_shift(1);return r===1?e:e===1}function E2e(t,e,r){return r||(r=Ge(2)),r.write_shift(1,e=="e"?+t:+!!t),r.write_shift(1,e=="e"?1:0),r}function e8(t,e,r){var n=t.read_shift(r&&r.biff>=12?2:1),i="sbcs-cont",s=Gs;if(r&&r.biff>=8&&(Gs=1200),!r||r.biff==8){var a=t.read_shift(1);a&&(i="dbcs-cont")}else r.biff==12&&(i="wstr");r.biff>=2&&r.biff<=5&&(i="cpstr");var o=n?t.read_shift(n,i):"";return Gs=s,o}function sbt(t){var e=Gs;Gs=1200;var r=t.read_shift(2),n=t.read_shift(1),i=n&4,s=n&8,a=1+(n&1),o=0,c,l={};s&&(o=t.read_shift(2)),i&&(c=t.read_shift(4));var u=a==2?"dbcs-cont":"sbcs-cont",f=r===0?"":t.read_shift(r,u);return s&&(t.l+=4*o),i&&(t.l+=c),l.t=f,s||(l.raw="<t>"+l.t+"</t>",l.r=l.t),Gs=e,l}function abt(t){var e=t.t||"",r=Ge(3);r.write_shift(2,e.length),r.write_shift(1,1);var n=Ge(2*e.length);n.write_shift(2*e.length,e,"utf16le");var i=[r,n];return Ds(i)}function dm(t,e,r){var n;if(r){if(r.biff>=2&&r.biff<=5)return t.read_shift(e,"cpstr");if(r.biff>=12)return t.read_shift(e,"dbcs-cont")}var i=t.read_shift(1);return i===0?n=t.read_shift(e,"sbcs-cont"):n=t.read_shift(e,"dbcs-cont"),n}function t8(t,e,r){var n=t.read_shift(r&&r.biff==2?1:2);return n===0?(t.l++,""):dm(t,n,r)}function Jm(t,e,r){if(r.biff>5)return t8(t,e,r);var n=t.read_shift(1);return n===0?(t.l++,""):t.read_shift(n,r.biff<=4||!t.lens?"cpstr":"sbcs-cont")}function S2e(t,e,r){return r||(r=Ge(3+2*t.length)),r.write_shift(2,t.length),r.write_shift(1,1),r.write_shift(31,t,"utf16le"),r}function obt(t){var e=t.read_shift(1);t.l++;var r=t.read_shift(2);return t.l+=2,[e,r]}function cbt(t){var e=t.read_shift(4),r=t.l,n=!1;e>24&&(t.l+=e-24,t.read_shift(16)==="795881f43b1d7f48af2c825dc4852763"&&(n=!0),t.l=r);var i=t.read_shift((n?e-24:e)>>1,"utf16le").replace(fo,"");return n&&(t.l+=24),i}function lbt(t){for(var e=t.read_shift(2),r="";e-- >0;)r+="../";var n=t.read_shift(0,"lpstr-ansi");if(t.l+=2,t.read_shift(2)!=57005)throw new Error("Bad FileMoniker");var i=t.read_shift(4);if(i===0)return r+n.replace(/\\/g,"/");var s=t.read_shift(4);if(t.read_shift(2)!=3)throw new Error("Bad FileMoniker");var a=t.read_shift(s>>1,"utf16le").replace(fo,"");return r+a}function ubt(t,e){var r=t.read_shift(16);switch(r){case"e0c9ea79f9bace118c8200aa004ba90b":return cbt(t);case"0303000000000000c000000000000046":return lbt(t);default:throw new Error("Unsupported Moniker "+r)}}function P5(t){var e=t.read_shift(4),r=e>0?t.read_shift(e,"utf16le").replace(fo,""):"";return r}function Jre(t,e){e||(e=Ge(6+t.length*2)),e.write_shift(4,1+t.length);for(var r=0;r<t.length;++r)e.write_shift(2,t.charCodeAt(r));return e.write_shift(2,0),e}function fbt(t,e){var r=t.l+e,n=t.read_shift(4);if(n!==2)throw new Error("Unrecognized streamVersion: "+n);var i=t.read_shift(2);t.l+=2;var s,a,o,c,l="",u,f;i&16&&(s=P5(t,r-t.l)),i&128&&(a=P5(t,r-t.l)),(i&257)===257&&(o=P5(t,r-t.l)),(i&257)===1&&(c=ubt(t,r-t.l)),i&8&&(l=P5(t,r-t.l)),i&32&&(u=t.read_shift(16)),i&64&&(f=hj(t)),t.l=r;var h=a||o||c||"";h&&l&&(h+="#"+l),h||(h="#"+l),i&2&&h.charAt(0)=="/"&&h.charAt(1)!="/"&&(h="file://"+h);var d={Target:h};return u&&(d.guid=u),f&&(d.time=f),s&&(d.Tooltip=s),d}function hbt(t){var e=Ge(512),r=0,n=t.Target;n.slice(0,7)=="file://"&&(n=n.slice(7));var i=n.indexOf("#"),s=i>-1?31:23;switch(n.charAt(0)){case"#":s=28;break;case".":s&=-3;break}e.write_shift(4,2),e.write_shift(4,s);var a=[8,6815827,6619237,4849780,83];for(r=0;r<a.length;++r)e.write_shift(4,a[r]);if(s==28)n=n.slice(1),Jre(n,e);else if(s&2){for(a="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),r=0;r<a.length;++r)e.write_shift(1,parseInt(a[r],16));var o=i>-1?n.slice(0,i):n;for(e.write_shift(4,2*(o.length+1)),r=0;r<o.length;++r)e.write_shift(2,o.charCodeAt(r));e.write_shift(2,0),s&8&&Jre(i>-1?n.slice(i+1):"",e)}else{for(a="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),r=0;r<a.length;++r)e.write_shift(1,parseInt(a[r],16));for(var c=0;n.slice(c*3,c*3+3)=="../"||n.slice(c*3,c*3+3)=="..\\";)++c;for(e.write_shift(2,c),e.write_shift(4,n.length-3*c+1),r=0;r<n.length-3*c;++r)e.write_shift(1,n.charCodeAt(r+3*c)&255);for(e.write_shift(1,0),e.write_shift(2,65535),e.write_shift(2,57005),r=0;r<6;++r)e.write_shift(4,0)}return e.slice(0,e.l)}function A2e(t){var e=t.read_shift(1),r=t.read_shift(1),n=t.read_shift(1),i=t.read_shift(1);return[e,r,n,i]}function T2e(t,e){var r=A2e(t);return r[3]=0,r}function Th(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2);return{r:e,c:r,ixfe:n}}function pm(t,e,r,n){return n||(n=Ge(6)),n.write_shift(2,t),n.write_shift(2,e),n.write_shift(2,r||0),n}function dbt(t){var e=t.read_shift(2),r=t.read_shift(2);return t.l+=8,{type:e,flags:r}}function pbt(t,e,r){return e===0?"":Jm(t,e,r)}function gbt(t,e,r){var n=r.biff>8?4:2,i=t.read_shift(n),s=t.read_shift(n,"i"),a=t.read_shift(n,"i");return[i,s,a]}function k2e(t){var e=t.read_shift(2),r=oj(t);return[e,r]}function mbt(t,e,r){t.l+=4,e-=4;var n=t.l+e,i=e8(t,e,r),s=t.read_shift(2);if(n-=t.l,s!==n)throw new Error("Malformed AddinUdf: padding = "+n+" != "+s);return t.l+=s,i}function jA(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2),i=t.read_shift(2);return{s:{c:n,r:e},e:{c:i,r}}}function C2e(t,e){return e||(e=Ge(8)),e.write_shift(2,t.s.r),e.write_shift(2,t.e.r),e.write_shift(2,t.s.c),e.write_shift(2,t.e.c),e}function I2e(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(1),i=t.read_shift(1);return{s:{c:n,r:e},e:{c:i,r}}}var ybt=I2e;function R2e(t){t.l+=4;var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2);return t.l+=12,[r,e,n]}function vbt(t){var e={};return t.l+=4,t.l+=16,e.fSharedNote=t.read_shift(2),t.l+=4,e}function bbt(t){var e={};return t.l+=4,t.cf=t.read_shift(2),e}function Xa(t){t.l+=2,t.l+=t.read_shift(2)}var wbt={0:Xa,4:Xa,5:Xa,6:Xa,7:bbt,8:Xa,9:Xa,10:Xa,11:Xa,12:Xa,13:vbt,14:Xa,15:Xa,16:Xa,17:Xa,18:Xa,19:Xa,20:Xa,21:R2e};function _bt(t,e){for(var r=t.l+e,n=[];t.l<r;){var i=t.read_shift(2);t.l-=2;try{n.push(wbt[i](t,r-t.l))}catch{return t.l=r,n}}return t.l!=r&&(t.l=r),n}function B5(t,e){var r={BIFFVer:0,dt:0};switch(r.BIFFVer=t.read_shift(2),e-=2,e>=2&&(r.dt=t.read_shift(2),t.l-=2),r.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(e>6)throw new Error("Unexpected BIFF Ver "+r.BIFFVer)}return t.read_shift(e),r}function dj(t,e,r){var n=1536,i=16;switch(r.bookType){case"biff8":break;case"biff5":n=1280,i=8;break;case"biff4":n=4,i=6;break;case"biff3":n=3,i=6;break;case"biff2":n=2,i=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var s=Ge(i);return s.write_shift(2,n),s.write_shift(2,e),i>4&&s.write_shift(2,29282),i>6&&s.write_shift(2,1997),i>8&&(s.write_shift(2,49161),s.write_shift(2,1),s.write_shift(2,1798),s.write_shift(2,0)),s}function xbt(t,e){return e===0||t.read_shift(2),1200}function Ebt(t,e,r){if(r.enc)return t.l+=e,"";var n=t.l,i=Jm(t,0,r);return t.read_shift(e+n-t.l),i}function Sbt(t,e){var r=!e||e.biff==8,n=Ge(r?112:54);for(n.write_shift(e.biff==8?2:1,7),r&&n.write_shift(1,0),n.write_shift(4,859007059),n.write_shift(4,5458548|(r?0:536870912));n.l<n.length;)n.write_shift(1,r?0:32);return n}function Abt(t,e,r){var n=r&&r.biff==8||e==2?t.read_shift(2):(t.l+=e,0);return{fDialog:n&16,fBelow:n&64,fRight:n&128}}function Tbt(t,e,r){var n=t.read_shift(4),i=t.read_shift(1)&3,s=t.read_shift(1);switch(s){case 0:s="Worksheet";break;case 1:s="Macrosheet";break;case 2:s="Chartsheet";break;case 6:s="VBAModule";break}var a=e8(t,0,r);return a.length===0&&(a="Sheet1"),{pos:n,hs:i,dt:s,name:a}}function kbt(t,e){var r=!e||e.biff>=8?2:1,n=Ge(8+r*t.name.length);n.write_shift(4,t.pos),n.write_shift(1,t.hs||0),n.write_shift(1,t.dt),n.write_shift(1,t.name.length),e.biff>=8&&n.write_shift(1,1),n.write_shift(r*t.name.length,t.name,e.biff<8?"sbcs":"utf16le");var i=n.slice(0,n.l);return i.l=n.l,i}function Cbt(t,e){for(var r=t.l+e,n=t.read_shift(4),i=t.read_shift(4),s=[],a=0;a!=i&&t.l<r;++a)s.push(sbt(t));return s.Count=n,s.Unique=i,s}function Ibt(t,e){var r=Ge(8);r.write_shift(4,t.Count),r.write_shift(4,t.Unique);for(var n=[],i=0;i<t.length;++i)n[i]=abt(t[i]);var s=Ds([r].concat(n));return s.parts=[r.length].concat(n.map(function(a){return a.length})),s}function Rbt(t,e){var r={};return r.dsst=t.read_shift(2),t.l+=e-2,r}function Pbt(t){var e={};e.r=t.read_shift(2),e.c=t.read_shift(2),e.cnt=t.read_shift(2)-e.c;var r=t.read_shift(2);t.l+=4;var n=t.read_shift(1);return t.l+=3,n&7&&(e.level=n&7),n&32&&(e.hidden=!0),n&64&&(e.hpt=r/20),e}function Bbt(t){var e=dbt(t);if(e.type!=2211)throw new Error("Invalid Future Record "+e.type);var r=t.read_shift(4);return r!==0}function Dbt(t){return t.read_shift(2),t.read_shift(4)}function Qre(t,e,r){var n=0;r&&r.biff==2||(n=t.read_shift(2));var i=t.read_shift(2);r&&r.biff==2&&(n=1-(i>>15),i&=32767);var s={Unsynced:n&1,DyZero:(n&2)>>1,ExAsc:(n&4)>>2,ExDsc:(n&8)>>3};return[s,i]}function Obt(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2),i=t.read_shift(2),s=t.read_shift(2),a=t.read_shift(2),o=t.read_shift(2),c=t.read_shift(2),l=t.read_shift(2);return{Pos:[e,r],Dim:[n,i],Flags:s,CurTab:a,FirstTab:o,Selected:c,TabRatio:l}}function Nbt(){var t=Ge(18);return t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,29280),t.write_shift(2,17600),t.write_shift(2,56),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,1),t.write_shift(2,500),t}function Mbt(t,e,r){if(r&&r.biff>=2&&r.biff<5)return{};var n=t.read_shift(2);return{RTL:n&64}}function Lbt(t){var e=Ge(18),r=1718;return t&&t.RTL&&(r|=64),e.write_shift(2,r),e.write_shift(4,0),e.write_shift(4,64),e.write_shift(4,0),e.write_shift(4,0),e}function Fbt(){}function $bt(t,e,r){var n={dyHeight:t.read_shift(2),fl:t.read_shift(2)};switch(r&&r.biff||8){case 2:break;case 3:case 4:t.l+=2;break;default:t.l+=10;break}return n.name=e8(t,0,r),n}function Ubt(t,e){var r=t.name||"Arial",n=e&&e.biff==5,i=n?15+r.length:16+2*r.length,s=Ge(i);return s.write_shift(2,(t.sz||12)*20),s.write_shift(4,0),s.write_shift(2,400),s.write_shift(4,0),s.write_shift(2,0),s.write_shift(1,r.length),n||s.write_shift(1,1),s.write_shift((n?1:2)*r.length,r,n?"sbcs":"utf16le"),s}function Vbt(t){var e=Th(t);return e.isst=t.read_shift(4),e}function jbt(t,e,r,n){var i=Ge(10);return pm(t,e,n,i),i.write_shift(4,r),i}function zbt(t,e,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=t.l+e,i=Th(t);r.biff==2&&t.l++;var s=t8(t,n-t.l,r);return i.val=s,i}function qbt(t,e,r,n,i){var s=!i||i.biff==8,a=Ge(8+ +s+(1+s)*r.length);return pm(t,e,n,a),a.write_shift(2,r.length),s&&a.write_shift(1,1),a.write_shift((1+s)*r.length,r,s?"utf16le":"sbcs"),a}function Hbt(t,e,r){var n=t.read_shift(2),i=Jm(t,0,r);return[n,i]}function Wbt(t,e,r,n){var i=r&&r.biff==5;n||(n=Ge(i?3+e.length:5+2*e.length)),n.write_shift(2,t),n.write_shift(i?1:2,e.length),i||n.write_shift(1,1),n.write_shift((i?1:2)*e.length,e,i?"sbcs":"utf16le");var s=n.length>n.l?n.slice(0,n.l):n;return s.l==null&&(s.l=s.length),s}var Kbt=Jm;function ene(t,e,r){var n=t.l+e,i=r.biff==8||!r.biff?4:2,s=t.read_shift(i),a=t.read_shift(i),o=t.read_shift(2),c=t.read_shift(2);return t.l=n,{s:{r:s,c:o},e:{r:a,c}}}function Gbt(t,e){var r=e.biff==8||!e.biff?4:2,n=Ge(2*r+6);return n.write_shift(r,t.s.r),n.write_shift(r,t.e.r+1),n.write_shift(2,t.s.c),n.write_shift(2,t.e.c+1),n.write_shift(2,0),n}function Ybt(t){var e=t.read_shift(2),r=t.read_shift(2),n=k2e(t);return{r:e,c:r,ixfe:n[0],rknum:n[1]}}function Xbt(t,e){for(var r=t.l+e-2,n=t.read_shift(2),i=t.read_shift(2),s=[];t.l<r;)s.push(k2e(t));if(t.l!==r)throw new Error("MulRK read error");var a=t.read_shift(2);if(s.length!=a-i+1)throw new Error("MulRK length mismatch");return{r:n,c:i,C:a,rkrec:s}}function Zbt(t,e){for(var r=t.l+e-2,n=t.read_shift(2),i=t.read_shift(2),s=[];t.l<r;)s.push(t.read_shift(2));if(t.l!==r)throw new Error("MulBlank read error");var a=t.read_shift(2);if(s.length!=a-i+1)throw new Error("MulBlank length mismatch");return{r:n,c:i,C:a,ixfe:s}}function Jbt(t,e,r,n){var i={},s=t.read_shift(4),a=t.read_shift(4),o=t.read_shift(4),c=t.read_shift(2);return i.patternType=Bvt[o>>26],n.cellStyles&&(i.alc=s&7,i.fWrap=s>>3&1,i.alcV=s>>4&7,i.fJustLast=s>>7&1,i.trot=s>>8&255,i.cIndent=s>>16&15,i.fShrinkToFit=s>>20&1,i.iReadOrder=s>>22&2,i.fAtrNum=s>>26&1,i.fAtrFnt=s>>27&1,i.fAtrAlc=s>>28&1,i.fAtrBdr=s>>29&1,i.fAtrPat=s>>30&1,i.fAtrProt=s>>31&1,i.dgLeft=a&15,i.dgRight=a>>4&15,i.dgTop=a>>8&15,i.dgBottom=a>>12&15,i.icvLeft=a>>16&127,i.icvRight=a>>23&127,i.grbitDiag=a>>30&3,i.icvTop=o&127,i.icvBottom=o>>7&127,i.icvDiag=o>>14&127,i.dgDiag=o>>21&15,i.icvFore=c&127,i.icvBack=c>>7&127,i.fsxButton=c>>14&1),i}function Qbt(t,e,r){var n={};return n.ifnt=t.read_shift(2),n.numFmtId=t.read_shift(2),n.flags=t.read_shift(2),n.fStyle=n.flags>>2&1,e-=6,n.data=Jbt(t,e,n.fStyle,r),n}function tne(t,e,r,n){var i=r&&r.biff==5;n||(n=Ge(i?16:20)),n.write_shift(2,0),t.style?(n.write_shift(2,t.numFmtId||0),n.write_shift(2,65524)):(n.write_shift(2,t.numFmtId||0),n.write_shift(2,e<<4));var s=0;return t.numFmtId>0&&i&&(s|=1024),n.write_shift(4,s),n.write_shift(4,0),i||n.write_shift(4,0),n.write_shift(2,0),n}function ewt(t){t.l+=4;var e=[t.read_shift(2),t.read_shift(2)];if(e[0]!==0&&e[0]--,e[1]!==0&&e[1]--,e[0]>7||e[1]>7)throw new Error("Bad Gutters: "+e.join("|"));return e}function twt(t){var e=Ge(8);return e.write_shift(4,0),e.write_shift(2,0),e.write_shift(2,0),e}function rne(t,e,r){var n=Th(t);(r.biff==2||e==9)&&++t.l;var i=ibt(t);return n.val=i,n.t=i===!0||i===!1?"b":"e",n}function rwt(t,e,r,n,i,s){var a=Ge(8);return pm(t,e,n,a),E2e(r,s,a),a}function nwt(t,e,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=Th(t),i=lo(t);return n.val=i,n}function iwt(t,e,r,n){var i=Ge(14);return pm(t,e,n,i),hm(r,i),i}var nne=pbt;function swt(t,e,r){var n=t.l+e,i=t.read_shift(2),s=t.read_shift(2);if(r.sbcch=s,s==1025||s==14849)return[s,i];if(s<1||s>255)throw new Error("Unexpected SupBook type: "+s);for(var a=dm(t,s),o=[];n>t.l;)o.push(t8(t));return[s,i,a,o]}function ine(t,e,r){var n=t.read_shift(2),i,s={fBuiltIn:n&1,fWantAdvise:n>>>1&1,fWantPict:n>>>2&1,fOle:n>>>3&1,fOleLink:n>>>4&1,cf:n>>>5&1023,fIcon:n>>>15&1};return r.sbcch===14849&&(i=mbt(t,e-2,r)),s.body=i||t.read_shift(e-2),typeof i=="string"&&(s.Name=i),s}function sne(t,e,r){var n=t.l+e,i=t.read_shift(2),s=t.read_shift(1),a=t.read_shift(1),o=t.read_shift(r&&r.biff==2?1:2),c=0;(!r||r.biff>=5)&&(r.biff!=5&&(t.l+=2),c=t.read_shift(2),r.biff==5&&(t.l+=2),t.l+=4);var l=dm(t,a,r);i&32&&(l=uj[l.charCodeAt(0)]);var u=n-t.l;r&&r.biff==2&&--u;var f=n==t.l||o===0||!(u>0)?[]:I8t(t,u,r,o);return{chKey:s,Name:l,itab:c,rgce:f}}function P2e(t,e,r){if(r.biff<8)return awt(t,e,r);for(var n=[],i=t.l+e,s=t.read_shift(r.biff>8?4:2);s--!==0;)n.push(gbt(t,r.biff>8?12:6,r));if(t.l!=i)throw new Error("Bad ExternSheet: "+t.l+" != "+i);return n}function awt(t,e,r){t[t.l+1]==3&&t[t.l]++;var n=e8(t,e,r);return n.charCodeAt(0)==3?n.slice(1):n}function owt(t,e,r){if(r.biff<8){t.l+=e;return}var n=t.read_shift(2),i=t.read_shift(2),s=dm(t,n,r),a=dm(t,i,r);return[s,a]}function cwt(t,e,r){var n=I2e(t);t.l++;var i=t.read_shift(1);return e-=8,[R8t(t,e,r),i,n]}function ane(t,e,r){var n=ybt(t);switch(r.biff){case 2:t.l++,e-=7;break;case 3:case 4:t.l+=2,e-=8;break;default:t.l+=6,e-=12}return[n,k8t(t,e,r)]}function lwt(t){var e=t.read_shift(4)!==0,r=t.read_shift(4)!==0,n=t.read_shift(4);return[e,r,n]}function uwt(t,e,r){if(!(r.biff<8)){var n=t.read_shift(2),i=t.read_shift(2),s=t.read_shift(2),a=t.read_shift(2),o=Jm(t,0,r);return r.biff<8&&t.read_shift(1),[{r:n,c:i},o,a,s]}}function fwt(t,e,r){return uwt(t,e,r)}function hwt(t,e){for(var r=[],n=t.read_shift(2);n--;)r.push(jA(t));return r}function dwt(t){var e=Ge(2+t.length*8);e.write_shift(2,t.length);for(var r=0;r<t.length;++r)C2e(t[r],e);return e}function pwt(t,e,r){if(r&&r.biff<8)return mwt(t,e,r);var n=R2e(t),i=_bt(t,e-22,n[1]);return{cmo:n,ft:i}}var gwt={8:function(t,e){var r=t.l+e;t.l+=10;var n=t.read_shift(2);t.l+=4,t.l+=2,t.l+=2,t.l+=2,t.l+=4;var i=t.read_shift(1);return t.l+=i,t.l=r,{fmt:n}}};function mwt(t,e,r){t.l+=4;var n=t.read_shift(2),i=t.read_shift(2),s=t.read_shift(2);t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=6,e-=36;var a=[];return a.push((gwt[n]||vo)(t,e,r)),{cmo:[i,n,s],ft:a}}function ywt(t,e,r){var n=t.l,i="";try{t.l+=4;var s=(r.lastobj||{cmo:[0,0]}).cmo[1],a;[0,5,7,11,12,14].indexOf(s)==-1?t.l+=6:a=obt(t,6,r);var o=t.read_shift(2);t.read_shift(2),bs(t,2);var c=t.read_shift(2);t.l+=c;for(var l=1;l<t.lens.length-1;++l){if(t.l-n!=t.lens[l])throw new Error("TxO: bad continue record");var u=t[t.l],f=dm(t,t.lens[l+1]-t.lens[l]-1);if(i+=f,i.length>=(u?o:2*o))break}if(i.length!==o&&i.length!==o*2)throw new Error("cchText: "+o+" != "+i.length);return t.l=n+e,{t:i}}catch{return t.l=n+e,{t:i}}}function vwt(t,e){var r=jA(t);t.l+=16;var n=fbt(t,e-24);return[r,n]}function bwt(t){var e=Ge(24),r=Hn(t[0]);e.write_shift(2,r.r),e.write_shift(2,r.r),e.write_shift(2,r.c),e.write_shift(2,r.c);for(var n="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),i=0;i<16;++i)e.write_shift(1,parseInt(n[i],16));return Ds([e,hbt(t[1])])}function wwt(t,e){t.read_shift(2);var r=jA(t),n=t.read_shift((e-10)/2,"dbcs-cont");return n=n.replace(fo,""),[r,n]}function _wt(t){var e=t[1].Tooltip,r=Ge(10+2*(e.length+1));r.write_shift(2,2048);var n=Hn(t[0]);r.write_shift(2,n.r),r.write_shift(2,n.r),r.write_shift(2,n.c),r.write_shift(2,n.c);for(var i=0;i<e.length;++i)r.write_shift(2,e.charCodeAt(i));return r.write_shift(2,0),r}function xwt(t){var e=[0,0],r;return r=t.read_shift(2),e[0]=qre[r]||r,r=t.read_shift(2),e[1]=qre[r]||r,e}function Ewt(t){return t||(t=Ge(4)),t.write_shift(2,1),t.write_shift(2,1),t}function Swt(t){for(var e=t.read_shift(2),r=[];e-- >0;)r.push(T2e(t));return r}function Awt(t){for(var e=t.read_shift(2),r=[];e-- >0;)r.push(T2e(t));return r}function Twt(t){t.l+=2;var e={cxfs:0,crc:0};return e.cxfs=t.read_shift(2),e.crc=t.read_shift(4),e}function B2e(t,e,r){if(!r.cellStyles)return vo(t,e);var n=r&&r.biff>=12?4:2,i=t.read_shift(n),s=t.read_shift(n),a=t.read_shift(n),o=t.read_shift(n),c=t.read_shift(2);n==2&&(t.l+=2);var l={s:i,e:s,w:a,ixfe:o,flags:c};return(r.biff>=5||!r.biff)&&(l.level=c>>8&7),l}function kwt(t,e){var r=Ge(12);r.write_shift(2,e),r.write_shift(2,e),r.write_shift(2,t.width*256),r.write_shift(2,0);var n=0;return t.hidden&&(n|=1),r.write_shift(1,n),n=t.level||0,r.write_shift(1,n),r.write_shift(2,0),r}function Cwt(t,e){var r={};return e<32||(t.l+=16,r.header=lo(t),r.footer=lo(t),t.l+=2),r}function Iwt(t,e,r){var n={area:!1};if(r.biff!=5)return t.l+=e,n;var i=t.read_shift(1);return t.l+=3,i&16&&(n.area=!0),n}function Rwt(t){for(var e=Ge(2*t),r=0;r<t;++r)e.write_shift(2,r+1);return e}var Pwt=Th,Bwt=x2e,Dwt=t8;function Owt(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(4),i={fmt:e,env:r,len:n,data:t.slice(t.l,t.l+n)};return t.l+=n,i}function Nwt(t,e,r){r.biffguess&&r.biff==5&&(r.biff=2);var n=Th(t);++t.l;var i=Jm(t,e-7,r);return n.t="str",n.val=i,n}function Mwt(t){var e=Th(t);++t.l;var r=lo(t);return e.t="n",e.val=r,e}function Lwt(t,e,r){var n=Ge(15);return s8(n,t,e),n.write_shift(8,r,"f"),n}function Fwt(t){var e=Th(t);++t.l;var r=t.read_shift(2);return e.t="n",e.val=r,e}function $wt(t,e,r){var n=Ge(9);return s8(n,t,e),n.write_shift(2,r),n}function Uwt(t){var e=t.read_shift(1);return e===0?(t.l++,""):t.read_shift(e,"sbcs-cont")}function Vwt(t,e){t.l+=6,t.l+=2,t.l+=1,t.l+=3,t.l+=1,t.l+=e-13}function jwt(t,e,r){var n=t.l+e,i=Th(t),s=t.read_shift(2),a=dm(t,s,r);return t.l=n,i.t="str",i.val=a,i}var zwt=[2,3,48,49,131,139,140,245],XN=function(){var t={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},e=LA({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(o,c){var l=[],u=V1(1);switch(c.type){case"base64":u=jo(al(o));break;case"binary":u=jo(o);break;case"buffer":case"array":u=o;break}Ws(u,0);var f=u.read_shift(1),h=!!(f&136),d=!1,g=!1;switch(f){case 2:break;case 3:break;case 48:d=!0,h=!0;break;case 49:d=!0,h=!0;break;case 131:break;case 139:break;case 140:g=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+f.toString(16))}var p=0,m=521;f==2&&(p=u.read_shift(2)),u.l+=3,f!=2&&(p=u.read_shift(4)),p>1048576&&(p=1e6),f!=2&&(m=u.read_shift(2));var y=u.read_shift(2),v=c.codepage||1252;f!=2&&(u.l+=16,u.read_shift(1),u[u.l]!==0&&(v=t[u[u.l]]),u.l+=1,u.l+=2),g&&(u.l+=36);for(var _=[],x={},A=Math.min(u.length,f==2?521:m-10-(d?264:0)),C=g?32:11;u.l<A&&u[u.l]!=13;)switch(x={},x.name=(typeof Br<"u"?Br.utils.decode(v,u.slice(u.l,u.l+C)):lh(u.slice(u.l,u.l+C))).replace(/[\u0000\r\n].*$/g,""),u.l+=C,x.type=String.fromCharCode(u.read_shift(1)),f!=2&&!g&&(x.offset=u.read_shift(4)),x.len=u.read_shift(1),f==2&&(x.offset=u.read_shift(2)),x.dec=u.read_shift(1),x.name.length&&_.push(x),f!=2&&(u.l+=g?13:14),x.type){case"B":(!d||x.len!=8)&&c.WTF&&console.log("Skipping "+x.name+":"+x.type);break;case"G":case"P":c.WTF&&console.log("Skipping "+x.name+":"+x.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+x.type)}if(u[u.l]!==13&&(u.l=m-1),u.read_shift(1)!==13)throw new Error("DBF Terminator not found "+u.l+" "+u[u.l]);u.l=m;var R=0,M=0;for(l[0]=[],M=0;M!=_.length;++M)l[0][M]=_[M].name;for(;p-- >0;){if(u[u.l]===42){u.l+=y;continue}for(++u.l,l[++R]=[],M=0,M=0;M!=_.length;++M){var N=u.slice(u.l,u.l+_[M].len);u.l+=_[M].len,Ws(N,0);var Y=typeof Br<"u"?Br.utils.decode(v,N):lh(N);switch(_[M].type){case"C":Y.trim().length&&(l[R][M]=Y.replace(/\s+$/,""));break;case"D":Y.length===8?l[R][M]=new Date(+Y.slice(0,4),+Y.slice(4,6)-1,+Y.slice(6,8)):l[R][M]=Y;break;case"F":l[R][M]=parseFloat(Y.trim());break;case"+":case"I":l[R][M]=g?N.read_shift(-4,"i")^2147483648:N.read_shift(4,"i");break;case"L":switch(Y.trim().toUpperCase()){case"Y":case"T":l[R][M]=!0;break;case"N":case"F":l[R][M]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+Y+"|")}break;case"M":if(!h)throw new Error("DBF Unexpected MEMO for type "+f.toString(16));l[R][M]="##MEMO##"+(g?parseInt(Y.trim(),10):N.read_shift(4));break;case"N":Y=Y.replace(/\u0000/g,"").trim(),Y&&Y!="."&&(l[R][M]=+Y||0);break;case"@":l[R][M]=new Date(N.read_shift(-8,"f")-621356832e5);break;case"T":l[R][M]=new Date((N.read_shift(4)-2440588)*864e5+N.read_shift(4));break;case"Y":l[R][M]=N.read_shift(4,"i")/1e4+N.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":l[R][M]=-N.read_shift(-8,"f");break;case"B":if(d&&_[M].len==8){l[R][M]=N.read_shift(8,"f");break}case"G":case"P":N.l+=_[M].len;break;case"0":if(_[M].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+_[M].type)}}}if(f!=2&&u.l<u.length&&u[u.l++]!=26)throw new Error("DBF EOF Marker missing "+(u.l-1)+" of "+u.length+" "+u[u.l-1].toString(16));return c&&c.sheetRows&&(l=l.slice(0,c.sheetRows)),c.DBF=_,l}function n(o,c){var l=c||{};l.dateNF||(l.dateNF="yyyymmdd");var u=Ab(r(o,l),l);return u["!cols"]=l.DBF.map(function(f){return{wch:f.len,DBF:f}}),delete l.DBF,u}function i(o,c){try{var l=fp(n(o,c),c);return l.bookType="dbf",l}catch(u){if(c&&c.WTF)throw u}return{SheetNames:[],Sheets:{}}}var s={B:8,C:250,L:1,D:8,"?":0,"":0};function a(o,c){var l=c||{},u=Gs;if(+l.codepage>=0&&Ul(+l.codepage),l.type=="string")throw new Error("Cannot write DBF to JS string");var f=Ac(),h=YE(o,{header:1,raw:!0,cellDates:!0}),d=h[0],g=h.slice(1),p=o["!cols"]||[],m=0,y=0,v=0,_=1;for(m=0;m<d.length;++m){if(((p[m]||{}).DBF||{}).name){d[m]=p[m].DBF.name,++v;continue}if(d[m]!=null){if(++v,typeof d[m]=="number"&&(d[m]=d[m].toString(10)),typeof d[m]!="string")throw new Error("DBF Invalid column name "+d[m]+" |"+typeof d[m]+"|");if(d.indexOf(d[m])!==m){for(y=0;y<1024;++y)if(d.indexOf(d[m]+"_"+y)==-1){d[m]+="_"+y;break}}}}var x=pn(o["!ref"]),A=[],C=[],R=[];for(m=0;m<=x.e.c-x.s.c;++m){var M="",N="",Y=0,H=[];for(y=0;y<g.length;++y)g[y][m]!=null&&H.push(g[y][m]);if(H.length==0||d[m]==null){A[m]="?";continue}for(y=0;y<H.length;++y){switch(typeof H[y]){case"number":N="B";break;case"string":N="C";break;case"boolean":N="L";break;case"object":N=H[y]instanceof Date?"D":"C";break;default:N="C"}Y=Math.max(Y,(typeof Br<"u"&&typeof H[y]=="string"?Br.utils.encode(lm,H[y]):String(H[y])).length),M=M&&M!=N?"C":N}Y>250&&(Y=250),N=((p[m]||{}).DBF||{}).type,N=="C"&&p[m].DBF.len>Y&&(Y=p[m].DBF.len),M=="B"&&N=="N"&&(M="N",R[m]=p[m].DBF.dec,Y=p[m].DBF.len),C[m]=M=="C"||N=="N"?Y:s[M]||0,_+=C[m],A[m]=M}var E=f.next(32);for(E.write_shift(4,318902576),E.write_shift(4,g.length),E.write_shift(2,296+32*v),E.write_shift(2,_),m=0;m<4;++m)E.write_shift(4,0);var k=+e[Gs]||3;for(E.write_shift(4,0|k<<8),t[k]!=+l.codepage&&(l.codepage&&console.error("DBF Unsupported codepage "+Gs+", using 1252"),Gs=1252),m=0,y=0;m<d.length;++m)if(d[m]!=null){var w=f.next(32),T=(d[m].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);w.write_shift(1,T,"sbcs"),w.write_shift(1,A[m]=="?"?"C":A[m],"sbcs"),w.write_shift(4,y),w.write_shift(1,C[m]||s[A[m]]||0),w.write_shift(1,R[m]||0),w.write_shift(1,2),w.write_shift(4,0),w.write_shift(1,0),w.write_shift(4,0),w.write_shift(4,0),y+=C[m]||s[A[m]]||0}var L=f.next(264);for(L.write_shift(4,13),m=0;m<65;++m)L.write_shift(4,0);for(m=0;m<g.length;++m){var I=f.next(_);for(I.write_shift(1,0),y=0;y<d.length;++y)if(d[y]!=null)switch(A[y]){case"L":I.write_shift(1,g[m][y]==null?63:g[m][y]?84:70);break;case"B":I.write_shift(8,g[m][y]||0,"f");break;case"N":var U="0";for(typeof g[m][y]=="number"&&(U=g[m][y].toFixed(R[y]||0)),U.length>C[y]&&(U=U.slice(0,C[y])),v=0;v<C[y]-U.length;++v)I.write_shift(1,32);I.write_shift(1,U,"sbcs");break;case"D":g[m][y]?(I.write_shift(4,("0000"+g[m][y].getFullYear()).slice(-4),"sbcs"),I.write_shift(2,("00"+(g[m][y].getMonth()+1)).slice(-2),"sbcs"),I.write_shift(2,("00"+g[m][y].getDate()).slice(-2),"sbcs")):I.write_shift(8,"00000000","sbcs");break;case"C":var O=I.l,D=String(g[m][y]!=null?g[m][y]:"").slice(0,C[y]);for(I.write_shift(1,D,"cpstr"),O+=C[y]-I.l,v=0;v<O;++v)I.write_shift(1,32);break}}return Gs=u,f.next(1).write_shift(1,26),f.end()}return{to_workbook:i,to_sheet:n,from_sheet:a}}(),D2e=function(){var t={AA:"À",BA:"Á",CA:"Â",DA:195,HA:"Ä",JA:197,AE:"È",BE:"É",CE:"Ê",HE:"Ë",AI:"Ì",BI:"Í",CI:"Î",HI:"Ï",AO:"Ò",BO:"Ó",CO:"Ô",DO:213,HO:"Ö",AU:"Ù",BU:"Ú",CU:"Û",HU:"Ü",Aa:"à",Ba:"á",Ca:"â",Da:227,Ha:"ä",Ja:229,Ae:"è",Be:"é",Ce:"ê",He:"ë",Ai:"ì",Bi:"í",Ci:"î",Hi:"ï",Ao:"ò",Bo:"ó",Co:"ô",Do:245,Ho:"ö",Au:"ù",Bu:"ú",Cu:"û",Hu:"ü",KC:"Ç",Kc:"ç",q:"æ",z:"œ",a:"Æ",j:"Œ",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},e=new RegExp("\x1BN("+Ki(t).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(f,h){var d=t[h];return typeof d=="number"?jN(d):d},n=function(f,h,d){var g=h.charCodeAt(0)-32<<4|d.charCodeAt(0)-48;return g==59?f:jN(g)};t["|"]=254;function i(f,h){switch(h.type){case"base64":return s(al(f),h);case"binary":return s(f,h);case"buffer":return s(tn&&Buffer.isBuffer(f)?f.toString("binary"):lh(f),h);case"array":return s(fm(f),h)}throw new Error("Unrecognized type "+h.type)}function s(f,h){var d=f.split(/[\n\r]+/),g=-1,p=-1,m=0,y=0,v=[],_=[],x=null,A={},C=[],R=[],M=[],N=0,Y,H={Workbook:{WBProps:{},Names:[]}};for(+h.codepage>=0&&Ul(+h.codepage);m!==d.length;++m){N=0;var E=d[m].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,n).replace(e,r),k=E.replace(/;;/g,"\0").split(";").map(function(G){return G.replace(/\u0000/g,";")}),w=k[0],T;if(E.length>0)switch(w){case"ID":break;case"E":break;case"B":break;case"O":for(y=1;y<k.length;++y)switch(k[y].charAt(0)){case"V":{var L=parseInt(k[y].slice(1),10);L>=1&&L<=4&&(H.Workbook.WBProps.date1904=!0)}break}break;case"W":break;case"P":switch(k[1].charAt(0)){case"P":_.push(E.slice(3).replace(/;;/g,";"));break}break;case"NN":{var I={Sheet:0};for(y=1;y<k.length;++y)switch(k[y].charAt(0)){case"N":I.Name=k[y].slice(1);break;case"E":I.Ref=(h&&h.sheet||"Sheet1")+"!"+Mg(k[y].slice(1));break}H.Workbook.Names.push(I)}break;case"C":var U=!1,O=!1,D=!1,P=!1,B=-1,z=-1,F="",X="z";for(y=1;y<k.length;++y)switch(k[y].charAt(0)){case"A":break;case"X":p=parseInt(k[y].slice(1),10)-1,O=!0;break;case"Y":for(g=parseInt(k[y].slice(1),10)-1,O||(p=0),Y=v.length;Y<=g;++Y)v[Y]=[];break;case"K":T=k[y].slice(1),T.charAt(0)==='"'?(T=T.slice(1,T.length-1),X="s"):T==="TRUE"||T==="FALSE"?(T=T==="TRUE",X="b"):isNaN(rl(T))?isNaN(dv(T).getDate())||(T=Xi(T),X="d",h.cellDates||(X="n",T=Ls(T,H.Workbook.WBProps.date1904))):(T=rl(T),X="n",x!==null&&up(x)&&h.cellDates&&(T=$A(H.Workbook.WBProps.date1904?T+1462:T),X="d")),typeof Br<"u"&&typeof T=="string"&&(h||{}).type!="string"&&(h||{}).codepage&&(T=Br.utils.decode(h.codepage,T)),U=!0;break;case"E":P=!0,F=Mg(k[y].slice(1),{r:g,c:p});break;case"S":D=!0;break;case"G":break;case"R":B=parseInt(k[y].slice(1),10)-1;break;case"C":z=parseInt(k[y].slice(1),10)-1;break;default:if(h&&h.WTF)throw new Error("SYLK bad record "+E)}if(U&&(v[g][p]?(v[g][p].t=X,v[g][p].v=T):v[g][p]={t:X,v:T},x&&(v[g][p].z=x),h.cellText!==!1&&x&&(v[g][p].w=Cc(v[g][p].z,v[g][p].v,{date1904:H.Workbook.WBProps.date1904})),x=null),D){if(P)throw new Error("SYLK shared formula cannot have own formula");var W=B>-1&&v[B][z];if(!W||!W[1])throw new Error("SYLK shared formula cannot find base");F=H2e(W[1],{r:g-B,c:p-z})}F&&(v[g][p]?v[g][p].f=F:v[g][p]={t:"n",f:F});break;case"F":var q=0;for(y=1;y<k.length;++y)switch(k[y].charAt(0)){case"X":p=parseInt(k[y].slice(1),10)-1,++q;break;case"Y":for(g=parseInt(k[y].slice(1),10)-1,Y=v.length;Y<=g;++Y)v[Y]=[];break;case"M":N=parseInt(k[y].slice(1),10)/20;break;case"F":break;case"G":break;case"P":x=_[parseInt(k[y].slice(1),10)];break;case"S":break;case"D":break;case"N":break;case"W":for(M=k[y].slice(1).split(" "),Y=parseInt(M[0],10);Y<=parseInt(M[1],10);++Y)N=parseInt(M[2],10),R[Y-1]=N===0?{hidden:!0}:{wch:N};break;case"C":p=parseInt(k[y].slice(1),10)-1,R[p]||(R[p]={});break;case"R":g=parseInt(k[y].slice(1),10)-1,C[g]||(C[g]={}),N>0?(C[g].hpt=N,C[g].hpx=gv(N)):N===0&&(C[g].hidden=!0);break;default:if(h&&h.WTF)throw new Error("SYLK bad record "+E)}q<1&&(x=null);break;default:if(h&&h.WTF)throw new Error("SYLK bad record "+E)}}return C.length>0&&(A["!rows"]=C),R.length>0&&(A["!cols"]=R),R.forEach(function(G){j1(G)}),h&&h.sheetRows&&(v=v.slice(0,h.sheetRows)),[v,A,H]}function a(f,h){var d=i(f,h),g=d[0],p=d[1],m=d[2],y=ii(h);y.date1904=(((m||{}).Workbook||{}).WBProps||{}).date1904;var v=Ab(g,y);Ki(p).forEach(function(x){v[x]=p[x]});var _=fp(v,h);return Ki(m).forEach(function(x){_[x]=m[x]}),_.bookType="sylk",_}function o(f,h,d,g){var p="C;Y"+(d+1)+";X"+(g+1)+";K";switch(f.t){case"n":p+=f.v||0,f.f&&!f.F&&(p+=";E"+zA(f.f,{r:d,c:g}));break;case"b":p+=f.v?"TRUE":"FALSE";break;case"e":p+=f.w||f.v;break;case"d":p+='"'+(f.w||f.v)+'"';break;case"s":p+='"'+(f.v==null?"":String(f.v)).replace(/"/g,"").replace(/;/g,";;")+'"';break}return p}function c(f,h){h.forEach(function(d,g){var p="F;W"+(g+1)+" "+(g+1)+" ";d.hidden?p+="0":(typeof d.width=="number"&&!d.wpx&&(d.wpx=R4(d.width)),typeof d.wpx=="number"&&!d.wch&&(d.wch=P4(d.wpx)),typeof d.wch=="number"&&(p+=Math.round(d.wch))),p.charAt(p.length-1)!=" "&&f.push(p)})}function l(f,h){h.forEach(function(d,g){var p="F;";d.hidden?p+="M0;":d.hpt?p+="M"+20*d.hpt+";":d.hpx&&(p+="M"+20*B4(d.hpx)+";"),p.length>2&&f.push(p+"R"+(g+1))})}function u(f,h,d){var g=["ID;PSheetJS;N;E"],p=[],m=pn(f["!ref"]),y,v=f["!data"]!=null,_=`\r
`,x=(((d||{}).Workbook||{}).WBProps||{}).date1904;g.push("P;PGeneral"),g.push("F;P0;DG0G8;M255"),f["!cols"]&&c(g,f["!cols"]),f["!rows"]&&l(g,f["!rows"]),g.push("B;Y"+(m.e.r-m.s.r+1)+";X"+(m.e.c-m.s.c+1)+";D"+[m.s.c,m.s.r,m.e.c,m.e.r].join(" ")),g.push("O;L;D;B"+(x?";V4":"")+";K47;G100 0.001");for(var A=m.s.r;A<=m.e.r;++A)if(!(v&&!f["!data"][A])){for(var C=[],R=m.s.c;R<=m.e.c;++R)y=v?f["!data"][A][R]:f[Hr(R)+hn(A)],!(!y||y.v==null&&(!y.f||y.F))&&C.push(o(y,f,A,R));p.push(C.join(_))}return g.join(_)+_+p.join(_)+_+"E"+_}return{to_workbook:a,from_sheet:u}}(),O2e=function(){function t(o,c){switch(c.type){case"base64":return e(al(o),c);case"binary":return e(o,c);case"buffer":return e(tn&&Buffer.isBuffer(o)?o.toString("binary"):lh(o),c);case"array":return e(fm(o),c)}throw new Error("Unrecognized type "+c.type)}function e(o,c){for(var l=o.split(`
`),u=-1,f=-1,h=0,d=[];h!==l.length;++h){if(l[h].trim()==="BOT"){d[++u]=[],f=0;continue}if(!(u<0)){var g=l[h].trim().split(","),p=g[0],m=g[1];++h;for(var y=l[h]||"";(y.match(/["]/g)||[]).length&1&&h<l.length-1;)y+=`
`+l[++h];switch(y=y.trim(),+p){case-1:if(y==="BOT"){d[++u]=[],f=0;continue}else if(y!=="EOD")throw new Error("Unrecognized DIF special command "+y);break;case 0:y==="TRUE"?d[u][f]=!0:y==="FALSE"?d[u][f]=!1:isNaN(rl(m))?isNaN(dv(m).getDate())?d[u][f]=m:d[u][f]=Xi(m):d[u][f]=rl(m),++f;break;case 1:y=y.slice(1,y.length-1),y=y.replace(/""/g,'"'),y&&y.match(/^=".*"$/)&&(y=y.slice(2,-1)),d[u][f++]=y!==""?y:null;break}if(y==="EOD")break}}return c&&c.sheetRows&&(d=d.slice(0,c.sheetRows)),d}function r(o,c){return Ab(t(o,c),c)}function n(o,c){var l=fp(r(o,c),c);return l.bookType="dif",l}function i(o,c){return"0,"+String(o)+`\r
`+c}function s(o){return`1,0\r
"`+o.replace(/"/g,'""')+'"'}function a(o){for(var c=pn(o["!ref"]),l=o["!data"]!=null,u=[`TABLE\r
0,1\r
"sheetjs"\r
`,`VECTORS\r
0,`+(c.e.r-c.s.r+1)+`\r
""\r
`,`TUPLES\r
0,`+(c.e.c-c.s.c+1)+`\r
""\r
`,`DATA\r
0,0\r
""\r
`],f=c.s.r;f<=c.e.r;++f){for(var h=l?o["!data"][f]:[],d=`-1,0\r
BOT\r
`,g=c.s.c;g<=c.e.c;++g){var p=l?h&&h[g]:o[en({r:f,c:g})];if(p==null){d+=`1,0\r
""\r
`;continue}switch(p.t){case"n":p.w!=null?d+="0,"+p.w+`\r
V`:p.v!=null?d+=i(p.v,"V"):p.f!=null&&!p.F?d+=s("="+p.f):d+=`1,0\r
""`;break;case"b":d+=p.v?i(1,"TRUE"):i(0,"FALSE");break;case"s":d+=s(isNaN(+p.v)?p.v:'="'+p.v+'"');break;case"d":p.w||(p.w=Cc(p.z||tr[14],Ls(Xi(p.v)))),d+=i(p.w,"V");break;default:d+=`1,0\r
""`}d+=`\r
`}u.push(d)}return u.join("")+`-1,0\r
EOD`}return{to_workbook:n,to_sheet:r,from_sheet:a}}(),N2e=function(){function t(f){return f.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function e(f){return f.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(f,h){for(var d=f.split(`
`),g=-1,p=-1,m=0,y=[];m!==d.length;++m){var v=d[m].trim().split(":");if(v[0]==="cell"){var _=Hn(v[1]);if(y.length<=_.r)for(g=y.length;g<=_.r;++g)y[g]||(y[g]=[]);switch(g=_.r,p=_.c,v[2]){case"t":y[g][p]=t(v[3]);break;case"v":y[g][p]=+v[3];break;case"vtf":var x=v[v.length-1];case"vtc":switch(v[3]){case"nl":y[g][p]=!!+v[4];break;default:y[g][p]=+v[4];break}v[2]=="vtf"&&(y[g][p]=[y[g][p],x])}}}return h&&h.sheetRows&&(y=y.slice(0,h.sheetRows)),y}function n(f,h){return Ab(r(f,h),h)}function i(f,h){return fp(n(f,h),h)}var s=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),a=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,o=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),c="--SocialCalcSpreadsheetControlSave--";function l(f){if(!f||!f["!ref"])return"";for(var h=[],d=[],g,p="",m=Js(f["!ref"]),y=f["!data"]!=null,v=m.s.r;v<=m.e.r;++v)for(var _=m.s.c;_<=m.e.c;++_)if(p=en({r:v,c:_}),g=y?(f["!data"][v]||[])[_]:f[p],!(!g||g.v==null||g.t==="z")){switch(d=["cell",p,"t"],g.t){case"s":case"str":d.push(e(g.v));break;case"n":g.f?(d[2]="vtf",d[3]="n",d[4]=g.v,d[5]=e(g.f)):(d[2]="v",d[3]=g.v);break;case"b":d[2]="vt"+(g.f?"f":"c"),d[3]="nl",d[4]=g.v?"1":"0",d[5]=e(g.f||(g.v?"TRUE":"FALSE"));break;case"d":var x=Ls(Xi(g.v));d[2]="vtc",d[3]="nd",d[4]=""+x,d[5]=g.w||Cc(g.z||tr[14],x);break;case"e":continue}h.push(d.join(":"))}return h.push("sheet:c:"+(m.e.c-m.s.c+1)+":r:"+(m.e.r-m.s.r+1)+":tvf:1"),h.push("valueformat:1:text-wiki"),h.join(`
`)}function u(f){return[s,a,o,a,l(f),c].join(`
`)}return{to_workbook:i,to_sheet:n,from_sheet:u}}(),pv=function(){function t(u,f,h,d,g){g.raw?f[h][d]=u:u===""||(u==="TRUE"?f[h][d]=!0:u==="FALSE"?f[h][d]=!1:isNaN(rl(u))?isNaN(dv(u).getDate())?f[h][d]=u:f[h][d]=Xi(u):f[h][d]=rl(u))}function e(u,f){var h=f||{},d=[];if(!u||u.length===0)return d;for(var g=u.split(/[\r\n]/),p=g.length-1;p>=0&&g[p].length===0;)--p;for(var m=10,y=0,v=0;v<=p;++v)y=g[v].indexOf(" "),y==-1?y=g[v].length:y++,m=Math.max(m,y);for(v=0;v<=p;++v){d[v]=[];var _=0;for(t(g[v].slice(0,m).trim(),d,v,_,h),_=1;_<=(g[v].length-m)/10+1;++_)t(g[v].slice(m+(_-1)*10,m+_*10).trim(),d,v,_,h)}return h.sheetRows&&(d=d.slice(0,h.sheetRows)),d}var r={44:",",9:"	",59:";",124:"|"},n={44:3,9:2,59:1,124:0};function i(u){for(var f={},h=!1,d=0,g=0;d<u.length;++d)(g=u.charCodeAt(d))==34?h=!h:!h&&g in r&&(f[g]=(f[g]||0)+1);g=[];for(d in f)Object.prototype.hasOwnProperty.call(f,d)&&g.push([f[d],d]);if(!g.length){f=n;for(d in f)Object.prototype.hasOwnProperty.call(f,d)&&g.push([f[d],d])}return g.sort(function(p,m){return p[0]-m[0]||n[p[1]]-n[m[1]]}),r[g.pop()[1]]||44}function s(u,f){var h=f||{},d="",g={};h.dense&&(g["!data"]=[]);var p={s:{c:0,r:0},e:{c:0,r:0}};u.slice(0,4)=="sep="?u.charCodeAt(5)==13&&u.charCodeAt(6)==10?(d=u.charAt(4),u=u.slice(7)):u.charCodeAt(5)==13||u.charCodeAt(5)==10?(d=u.charAt(4),u=u.slice(6)):d=i(u.slice(0,1024)):h&&h.FS?d=h.FS:d=i(u.slice(0,1024));var m=0,y=0,v=0,_=0,x=0,A=d.charCodeAt(0),C=!1,R=0,M=u.charCodeAt(0),N=h.dateNF!=null?Cyt(h.dateNF):null;function Y(){var H=u.slice(_,x);H.slice(-1)=="\r"&&(H=H.slice(0,-1));var E={};if(H.charAt(0)=='"'&&H.charAt(H.length-1)=='"'&&(H=H.slice(1,-1).replace(/""/g,'"')),H.length===0)E.t="z";else if(h.raw)E.t="s",E.v=H;else if(H.trim().length===0)E.t="s",E.v=H;else if(H.charCodeAt(0)==61)H.charCodeAt(1)==34&&H.charCodeAt(H.length-1)==34?(E.t="s",E.v=H.slice(2,-1).replace(/""/g,'"')):d6t(H)?(E.t="n",E.f=H.slice(1)):(E.t="s",E.v=H);else if(H=="TRUE")E.t="b",E.v=!0;else if(H=="FALSE")E.t="b",E.v=!1;else if(!isNaN(v=rl(H)))E.t="n",h.cellText!==!1&&(E.w=H),E.v=v;else if(!isNaN((v=dv(H)).getDate())||N&&H.match(N)){E.z=h.dateNF||tr[14];var k=0;N&&H.match(N)&&(H=Iyt(H,h.dateNF,H.match(N)||[]),k=1,v=Xi(H,k)),h.cellDates?(E.t="d",E.v=v):(E.t="n",E.v=Ls(v)),h.cellText!==!1&&(E.w=Cc(E.z,E.v instanceof Date?Ls(E.v):E.v)),h.cellNF||delete E.z}else E.t="s",E.v=H;if(E.t=="z"||(h.dense?(g["!data"][m]||(g["!data"][m]=[]),g["!data"][m][y]=E):g[en({c:y,r:m})]=E),_=x+1,M=u.charCodeAt(_),p.e.c<y&&(p.e.c=y),p.e.r<m&&(p.e.r=m),R==A)++y;else if(y=0,++m,h.sheetRows&&h.sheetRows<=m)return!0}e:for(;x<u.length;++x)switch(R=u.charCodeAt(x)){case 34:M===34&&(C=!C);break;case 13:if(C)break;u.charCodeAt(x+1)==10&&++x;case A:case 10:if(!C&&Y())break e;break}return x-_>0&&Y(),g["!ref"]=Ir(p),g}function a(u,f){return!(f&&f.PRN)||f.FS||u.slice(0,4)=="sep="||u.indexOf("	")>=0||u.indexOf(",")>=0||u.indexOf(";")>=0?s(u,f):Ab(e(u,f),f)}function o(u,f){var h="",d=f.type=="string"?[0,0,0,0]:Tj(u,f);switch(f.type){case"base64":h=al(u);break;case"binary":h=u;break;case"buffer":f.codepage==65001?h=u.toString("utf8"):f.codepage&&typeof Br<"u"?h=Br.utils.decode(f.codepage,u):h=tn&&Buffer.isBuffer(u)?u.toString("binary"):lh(u);break;case"array":h=fm(u);break;case"string":h=u;break;default:throw new Error("Unrecognized type "+f.type)}return d[0]==239&&d[1]==187&&d[2]==191?h=ni(h.slice(3)):f.type!="string"&&f.type!="buffer"&&f.codepage==65001?h=ni(h):f.type=="binary"&&typeof Br<"u"&&f.codepage&&(h=Br.utils.decode(f.codepage,Br.utils.encode(28591,h))),h.slice(0,19)=="socialcalc:version:"?N2e.to_sheet(f.type=="string"?h:ni(h),f):a(h,f)}function c(u,f){return fp(o(u,f),f)}function l(u){for(var f=[],h=pn(u["!ref"]),d,g=u["!data"]!=null,p=h.s.r;p<=h.e.r;++p){for(var m=[],y=h.s.c;y<=h.e.c;++y){var v=en({r:p,c:y});if(d=g?(u["!data"][p]||[])[y]:u[v],!d||d.v==null){m.push("          ");continue}for(var _=(d.w||(uh(d),d.w)||"").slice(0,10);_.length<10;)_+=" ";m.push(_+(y===0?" ":""))}f.push(m.join(""))}return f.join(`
`)}return{to_workbook:c,to_sheet:o,from_sheet:l}}();function qwt(t,e){var r=e||{},n=!!r.WTF;r.WTF=!0;try{var i=D2e.to_workbook(t,r);return r.WTF=n,i}catch(s){if(r.WTF=n,!s.message.match(/SYLK bad record ID/)&&n)throw s;return pv.to_workbook(t,e)}}var Ng=function(){function t(F,X,W){if(F){Ws(F,F.l||0);for(var q=W.Enum||P;F.l<F.length;){var G=F.read_shift(2),ee=q[G]||q[65535],ae=F.read_shift(2),te=F.l+ae,K=ee.f&&ee.f(F,ae,W);if(F.l=te,X(K,ee,G))return}}}function e(F,X){switch(X.type){case"base64":return r(jo(al(F)),X);case"binary":return r(jo(F),X);case"buffer":case"array":return r(F,X)}throw"Unsupported type "+X.type}function r(F,X){if(!F)return F;var W=X||{},q={},G="Sheet1",ee="",ae=0,te={},K=[],re=[],V=[];W.dense&&(V=q["!data"]=[]);var oe={s:{r:0,c:0},e:{r:0,c:0}},he=W.sheetRows||0;if(F[4]==81&&F[5]==80&&F[6]==87)return z(F,X);if(F[2]==0&&(F[3]==8||F[3]==9)&&F.length>=16&&F[14]==5&&F[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(F[2]==2)W.Enum=P,t(F,function(ve,Ee,ge){switch(ge){case 0:W.vers=ve,ve>=4096&&(W.qpro=!0);break;case 255:W.vers=ve,W.works=!0;break;case 6:oe=ve;break;case 204:ve&&(ee=ve);break;case 222:ee=ve;break;case 15:case 51:(!W.qpro&&!W.works||ge==51)&&ve[1].v.charCodeAt(0)<48&&(ve[1].v=ve[1].v.slice(1)),(W.works||W.works2)&&(ve[1].v=ve[1].v.replace(/\r\n/g,`
`));case 13:case 14:case 16:ge==14&&(ve[2]&112)==112&&(ve[2]&15)>1&&(ve[2]&15)<15&&(ve[1].z=W.dateNF||tr[14],W.cellDates&&(ve[1].t="d",ve[1].v=$A(ve[1].v))),W.qpro&&ve[3]>ae&&(q["!ref"]=Ir(oe),te[G]=q,K.push(G),q={},W.dense&&(V=q["!data"]=[]),oe={s:{r:0,c:0},e:{r:0,c:0}},ae=ve[3],G=ee||"Sheet"+(ae+1),ee="");var Pe=W.dense?(V[ve[0].r]||[])[ve[0].c]:q[en(ve[0])];if(Pe){Pe.t=ve[1].t,Pe.v=ve[1].v,ve[1].z!=null&&(Pe.z=ve[1].z),ve[1].f!=null&&(Pe.f=ve[1].f);break}W.dense?(V[ve[0].r]||(V[ve[0].r]=[]),V[ve[0].r][ve[0].c]=ve[1]):q[en(ve[0])]=ve[1];break;case 21509:W.works2=!0;break}},W);else if(F[2]==26||F[2]==14)W.Enum=B,F[2]==14&&(W.qpro=!0,F.l=0),t(F,function(ve,Ee,ge){switch(ge){case 204:G=ve;break;case 22:ve[1].v.charCodeAt(0)<48&&(ve[1].v=ve[1].v.slice(1)),ve[1].v=ve[1].v.replace(/\x0F./g,function(Pe){return String.fromCharCode(Pe.charCodeAt(1)-32)}).replace(/\r\n/g,`
`);case 23:case 24:case 25:case 37:case 39:case 40:if(ve[3]>ae&&(q["!ref"]=Ir(oe),te[G]=q,K.push(G),q={},W.dense&&(V=q["!data"]=[]),oe={s:{r:0,c:0},e:{r:0,c:0}},ae=ve[3],G="Sheet"+(ae+1)),he>0&&ve[0].r>=he)break;W.dense?(V[ve[0].r]||(V[ve[0].r]=[]),V[ve[0].r][ve[0].c]=ve[1]):q[en(ve[0])]=ve[1],oe.e.c<ve[0].c&&(oe.e.c=ve[0].c),oe.e.r<ve[0].r&&(oe.e.r=ve[0].r);break;case 27:ve[14e3]&&(re[ve[14e3][0]]=ve[14e3][1]);break;case 1537:re[ve[0]]=ve[1],ve[0]==ae&&(G=ve[1]);break}},W);else throw new Error("Unrecognized LOTUS BOF "+F[2]);if(q["!ref"]=Ir(oe),te[ee||G]=q,K.push(ee||G),!re.length)return{SheetNames:K,Sheets:te};for(var ne={},ie=[],ce=0;ce<re.length;++ce)te[K[ce]]?(ie.push(re[ce]||K[ce]),ne[re[ce]]=te[re[ce]]||te[K[ce]]):(ie.push(re[ce]),ne[re[ce]]={"!ref":"A1"});return{SheetNames:ie,Sheets:ne}}function n(F,X){var W=X||{};if(+W.codepage>=0&&Ul(+W.codepage),W.type=="string")throw new Error("Cannot write WK1 to JS string");var q=Ac(),G=pn(F["!ref"]),ee=F["!data"]!=null,ae=[];wt(q,0,s(1030)),wt(q,6,c(G));for(var te=Math.min(G.e.r,8191),K=G.s.c;K<=G.e.c;++K)ae[K]=Hr(K);for(var re=G.s.r;re<=te;++re){var V=hn(re);for(K=G.s.c;K<=G.e.c;++K){var oe=ee?(F["!data"][re]||[])[K]:F[ae[K]+V];if(!(!oe||oe.t=="z"))if(oe.t=="n")(oe.v|0)==oe.v&&oe.v>=-32768&&oe.v<=32767?wt(q,13,g(re,K,oe.v)):wt(q,14,m(re,K,oe.v));else{var he=uh(oe);wt(q,15,f(re,K,he.slice(0,239)))}}}return wt(q,1),q.end()}function i(F,X){var W=X||{};if(+W.codepage>=0&&Ul(+W.codepage),W.type=="string")throw new Error("Cannot write WK3 to JS string");var q=Ac();wt(q,0,a(F));for(var G=0,ee=0;G<F.SheetNames.length;++G)(F.Sheets[F.SheetNames[G]]||{})["!ref"]&&wt(q,27,D(F.SheetNames[G],ee++));var ae=0;for(G=0;G<F.SheetNames.length;++G){var te=F.Sheets[F.SheetNames[G]];if(!(!te||!te["!ref"])){for(var K=pn(te["!ref"]),re=te["!data"]!=null,V=[],oe=Math.min(K.e.r,8191),he=K.s.r;he<=oe;++he)for(var ne=hn(he),ie=K.s.c;ie<=K.e.c;++ie){he===K.s.r&&(V[ie]=Hr(ie));var ce=V[ie]+ne,ve=re?(te["!data"][he]||[])[ie]:te[ce];if(!(!ve||ve.t=="z"))if(ve.t=="n")wt(q,23,H(he,ie,ae,ve.v));else{var Ee=uh(ve);wt(q,22,M(he,ie,ae,Ee.slice(0,239)))}}++ae}}return wt(q,1),q.end()}function s(F){var X=Ge(2);return X.write_shift(2,F),X}function a(F){var X=Ge(26);X.write_shift(2,4096),X.write_shift(2,4),X.write_shift(4,0);for(var W=0,q=0,G=0,ee=0;ee<F.SheetNames.length;++ee){var ae=F.SheetNames[ee],te=F.Sheets[ae];if(!(!te||!te["!ref"])){++G;var K=Js(te["!ref"]);W<K.e.r&&(W=K.e.r),q<K.e.c&&(q=K.e.c)}}return W>8191&&(W=8191),X.write_shift(2,W),X.write_shift(1,G),X.write_shift(1,q),X.write_shift(2,0),X.write_shift(2,0),X.write_shift(1,1),X.write_shift(1,2),X.write_shift(4,0),X.write_shift(4,0),X}function o(F,X,W){var q={s:{c:0,r:0},e:{c:0,r:0}};return X==8&&W.qpro?(q.s.c=F.read_shift(1),F.l++,q.s.r=F.read_shift(2),q.e.c=F.read_shift(1),F.l++,q.e.r=F.read_shift(2),q):(q.s.c=F.read_shift(2),q.s.r=F.read_shift(2),X==12&&W.qpro&&(F.l+=2),q.e.c=F.read_shift(2),q.e.r=F.read_shift(2),X==12&&W.qpro&&(F.l+=2),q.s.c==65535&&(q.s.c=q.e.c=q.s.r=q.e.r=0),q)}function c(F){var X=Ge(8);return X.write_shift(2,F.s.c),X.write_shift(2,F.s.r),X.write_shift(2,F.e.c),X.write_shift(2,F.e.r),X}function l(F,X,W){var q=[{c:0,r:0},{t:"n",v:0},0,0];return W.qpro&&W.vers!=20768?(q[0].c=F.read_shift(1),q[3]=F.read_shift(1),q[0].r=F.read_shift(2),F.l+=2):W.works?(q[0].c=F.read_shift(2),q[0].r=F.read_shift(2),q[2]=F.read_shift(2)):(q[2]=F.read_shift(1),q[0].c=F.read_shift(2),q[0].r=F.read_shift(2)),q}function u(F,X,W){var q=F.l+X,G=l(F,X,W);if(G[1].t="s",W.vers==20768){F.l++;var ee=F.read_shift(1);return G[1].v=F.read_shift(ee,"utf8"),G}return W.qpro&&F.l++,G[1].v=F.read_shift(q-F.l,"cstr"),G}function f(F,X,W){var q=Ge(7+W.length);q.write_shift(1,255),q.write_shift(2,X),q.write_shift(2,F),q.write_shift(1,39);for(var G=0;G<q.length;++G){var ee=W.charCodeAt(G);q.write_shift(1,ee>=128?95:ee)}return q.write_shift(1,0),q}function h(F,X,W){var q=F.l+X,G=l(F,X,W);if(G[1].t="s",W.vers==20768){var ee=F.read_shift(1);return G[1].v=F.read_shift(ee,"utf8"),G}return G[1].v=F.read_shift(q-F.l,"cstr"),G}function d(F,X,W){var q=l(F,X,W);return q[1].v=F.read_shift(2,"i"),q}function g(F,X,W){var q=Ge(7);return q.write_shift(1,255),q.write_shift(2,X),q.write_shift(2,F),q.write_shift(2,W,"i"),q}function p(F,X,W){var q=l(F,X,W);return q[1].v=F.read_shift(8,"f"),q}function m(F,X,W){var q=Ge(13);return q.write_shift(1,255),q.write_shift(2,X),q.write_shift(2,F),q.write_shift(8,W,"f"),q}function y(F,X,W){var q=F.l+X,G=l(F,X,W);if(G[1].v=F.read_shift(8,"f"),W.qpro)F.l=q;else{var ee=F.read_shift(2);A(F.slice(F.l,F.l+ee),G),F.l+=ee}return G}function v(F,X,W){var q=X&32768;return X&=-32769,X=(q?F:0)+(X>=8192?X-16384:X),(q?"":"$")+(W?Hr(X):hn(X))}var _={31:["NA",0],33:["ABS",1],34:["TRUNC",1],35:["SQRT",1],36:["LOG",1],37:["LN",1],38:["PI",0],39:["SIN",1],40:["COS",1],41:["TAN",1],42:["ATAN2",2],43:["ATAN",1],44:["ASIN",1],45:["ACOS",1],46:["EXP",1],47:["MOD",2],49:["ISNA",1],50:["ISERR",1],51:["FALSE",0],52:["TRUE",0],53:["RAND",0],63:["ROUND",2],68:["ISNUMBER",1],69:["ISTEXT",1],70:["LEN",1],71:["VALUE",1],73:["MID",3],74:["CHAR",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],102:["UPPER",1],103:["LOWER",1],107:["PROPER",1],109:["TRIM",1],111:["T",1]},x=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function A(F,X){Ws(F,0);for(var W=[],q=0,G="",ee="",ae="",te="";F.l<F.length;){var K=F[F.l++];switch(K){case 0:W.push(F.read_shift(8,"f"));break;case 1:ee=v(X[0].c,F.read_shift(2),!0),G=v(X[0].r,F.read_shift(2),!1),W.push(ee+G);break;case 2:{var re=v(X[0].c,F.read_shift(2),!0),V=v(X[0].r,F.read_shift(2),!1);ee=v(X[0].c,F.read_shift(2),!0),G=v(X[0].r,F.read_shift(2),!1),W.push(re+V+":"+ee+G)}break;case 3:if(F.l<F.length){console.error("WK1 premature formula end");return}break;case 4:W.push("("+W.pop()+")");break;case 5:W.push(F.read_shift(2));break;case 6:{for(var oe="";K=F[F.l++];)oe+=String.fromCharCode(K);W.push('"'+oe.replace(/"/g,'""')+'"')}break;case 8:W.push("-"+W.pop());break;case 23:W.push("+"+W.pop());break;case 22:W.push("NOT("+W.pop()+")");break;case 20:case 21:te=W.pop(),ae=W.pop(),W.push(["AND","OR"][K-20]+"("+ae+","+te+")");break;default:if(K<32&&x[K])te=W.pop(),ae=W.pop(),W.push(ae+x[K]+te);else if(_[K]){if(q=_[K][1],q==69&&(q=F[F.l++]),q>W.length){console.error("WK1 bad formula parse 0x"+K.toString(16)+":|"+W.join("|")+"|");return}var he=W.slice(-q);W.length-=q,W.push(_[K][0]+"("+he.join(",")+")")}else return K<=7?console.error("WK1 invalid opcode "+K.toString(16)):K<=24?console.error("WK1 unsupported op "+K.toString(16)):K<=30?console.error("WK1 invalid opcode "+K.toString(16)):K<=115?console.error("WK1 unsupported function opcode "+K.toString(16)):console.error("WK1 unrecognized opcode "+K.toString(16))}}W.length==1?X[1].f=""+W[0]:console.error("WK1 bad formula parse |"+W.join("|")+"|")}function C(F){var X=[{c:0,r:0},{t:"n",v:0},0];return X[0].r=F.read_shift(2),X[3]=F[F.l++],X[0].c=F[F.l++],X}function R(F,X){var W=C(F);return W[1].t="s",W[1].v=F.read_shift(X-4,"cstr"),W}function M(F,X,W,q){var G=Ge(6+q.length);G.write_shift(2,F),G.write_shift(1,W),G.write_shift(1,X),G.write_shift(1,39);for(var ee=0;ee<q.length;++ee){var ae=q.charCodeAt(ee);G.write_shift(1,ae>=128?95:ae)}return G.write_shift(1,0),G}function N(F,X){var W=C(F);W[1].v=F.read_shift(2);var q=W[1].v>>1;if(W[1].v&1)switch(q&7){case 0:q=(q>>3)*5e3;break;case 1:q=(q>>3)*500;break;case 2:q=(q>>3)/20;break;case 3:q=(q>>3)/200;break;case 4:q=(q>>3)/2e3;break;case 5:q=(q>>3)/2e4;break;case 6:q=(q>>3)/16;break;case 7:q=(q>>3)/64;break}return W[1].v=q,W}function Y(F,X){var W=C(F),q=F.read_shift(4),G=F.read_shift(4),ee=F.read_shift(2);if(ee==65535)return q===0&&G===3221225472?(W[1].t="e",W[1].v=15):q===0&&G===3489660928?(W[1].t="e",W[1].v=42):W[1].v=0,W;var ae=ee&32768;return ee=(ee&32767)-16446,W[1].v=(1-ae*2)*(G*Math.pow(2,ee+32)+q*Math.pow(2,ee)),W}function H(F,X,W,q){var G=Ge(14);if(G.write_shift(2,F),G.write_shift(1,W),G.write_shift(1,X),q==0)return G.write_shift(4,0),G.write_shift(4,0),G.write_shift(2,65535),G;var ee=0,ae=0,te=0,K=0;return q<0&&(ee=1,q=-q),ae=Math.log2(q)|0,q/=Math.pow(2,ae-31),K=q>>>0,K&2147483648||(q/=2,++ae,K=q>>>0),q-=K,K|=2147483648,K>>>=0,q*=Math.pow(2,32),te=q>>>0,G.write_shift(4,te),G.write_shift(4,K),ae+=16383+(ee?32768:0),G.write_shift(2,ae),G}function E(F,X){var W=Y(F);return F.l+=X-14,W}function k(F,X){var W=C(F),q=F.read_shift(4);return W[1].v=q>>6,W}function w(F,X){var W=C(F),q=F.read_shift(8,"f");return W[1].v=q,W}function T(F,X){var W=w(F);return F.l+=X-12,W}function L(F,X){return F[F.l+X-1]==0?F.read_shift(X,"cstr"):""}function I(F,X){var W=F[F.l++];W>X-1&&(W=X-1);for(var q="";q.length<W;)q+=String.fromCharCode(F[F.l++]);return q}function U(F,X,W){if(!(!W.qpro||X<21)){var q=F.read_shift(1);F.l+=17,F.l+=1,F.l+=2;var G=F.read_shift(X-21,"cstr");return[q,G]}}function O(F,X){for(var W={},q=F.l+X;F.l<q;){var G=F.read_shift(2);if(G==14e3){for(W[G]=[0,""],W[G][0]=F.read_shift(2);F[F.l];)W[G][1]+=String.fromCharCode(F[F.l]),F.l++;F.l++}}return W}function D(F,X){var W=Ge(5+F.length);W.write_shift(2,14e3),W.write_shift(2,X);for(var q=0;q<F.length;++q){var G=F.charCodeAt(q);W[W.l++]=G>127?95:G}return W[W.l++]=0,W}var P={0:{n:"BOF",f:bs},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:o},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:d},14:{n:"NUMBER",f:p},15:{n:"LABEL",f:u},16:{n:"FORMULA",f:y},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:h},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:L},222:{n:"SHEETNAMELP",f:I},255:{n:"BOF",f:bs},65535:{n:""}},B={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:R},23:{n:"NUMBER17",f:Y},24:{n:"NUMBER18",f:N},25:{n:"FORMULA19",f:E},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:O},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:k},38:{n:"??"},39:{n:"NUMBER27",f:w},40:{n:"FORMULA28",f:T},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:L},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:U},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};function z(F,X){Ws(F,0);var W=X||{},q={};W.dense&&(q["!data"]=[]);var G=[],ee="",ae={s:{r:-1,c:-1},e:{r:-1,c:-1}},te=0,K=0,re=0,V=0,oe={SheetNames:[],Sheets:{}};e:for(;F.l<F.length;){var he=F.read_shift(2),ne=F.read_shift(2),ie=F.slice(F.l,F.l+ne);switch(Ws(ie,0),he){case 1:if(ie.read_shift(4)!=962023505)throw"Bad QPW9 BOF!";break;case 2:break e;case 1025:break;case 1026:break;case 1031:for(ie.l+=12;ie.l<ie.length;)te=ie.read_shift(2),K=ie.read_shift(1),G.push(ie.read_shift(te,"cstr"));break;case 1032:break;case 1537:{var ce=ie.read_shift(2);q={},W.dense&&(q["!data"]=[]),ae.s.c=ie.read_shift(2),ae.e.c=ie.read_shift(2),ae.s.r=ie.read_shift(4),ae.e.r=ie.read_shift(4),ie.l+=4,ie.l+2<ie.length&&(te=ie.read_shift(2),K=ie.read_shift(1),ee=te==0?"":ie.read_shift(te,"cstr")),ee||(ee=Hr(ce))}break;case 1538:{if(ae.s.c>255||ae.s.r>999999)break;ae.e.c<ae.s.c&&(ae.e.c=ae.s.c),ae.e.r<ae.s.r&&(ae.e.r=ae.s.r),q["!ref"]=Ir(ae),GA(oe,q,ee)}break;case 2561:re=ie.read_shift(2),ae.e.c<re&&(ae.e.c=re),ae.s.c>re&&(ae.s.c=re),V=ie.read_shift(4),ae.s.r>V&&(ae.s.r=V),V=ie.read_shift(4),ae.e.r<V&&(ae.e.r=V);break;case 3073:{V=ie.read_shift(4),te=ie.read_shift(4),ae.s.r>V&&(ae.s.r=V),ae.e.r<V+te-1&&(ae.e.r=V+te-1);for(var ve=Hr(re);ie.l<ie.length;){var Ee={t:"z"},ge=ie.read_shift(1);ge&128&&(ie.l+=2);var Pe=ge&64?ie.read_shift(2)-1:0;switch(ge&31){case 1:break;case 2:Ee={t:"n",v:ie.read_shift(2)};break;case 3:Ee={t:"n",v:ie.read_shift(2,"i")};break;case 5:Ee={t:"n",v:ie.read_shift(8,"f")};break;case 7:Ee={t:"s",v:G[K=ie.read_shift(4)-1]};break;case 8:Ee={t:"n",v:ie.read_shift(8,"f")},ie.l+=2,ie.l+=4;break;default:throw"Unrecognized QPW cell type "+(ge&31)}var Ce=0;if(ge&32)switch(ge&31){case 2:Ce=ie.read_shift(2);break;case 3:Ce=ie.read_shift(2,"i");break;case 7:Ce=ie.read_shift(2);break;default:throw"Unsupported delta for QPW cell type "+(ge&31)}for(!W.sheetStubs&&Ee.t=="z"||(q["!data"]!=null?(q["!data"][V]||(q["!data"][V]=[]),q["!data"][V][re]=Ee):q[ve+hn(V)]=Ee),++V,--te;Pe-- >0&&te>=0;){if(ge&32)switch(ge&31){case 2:Ee={t:"n",v:Ee.v+Ce&65535};break;case 3:Ee={t:"n",v:Ee.v+Ce&65535},Ee.v>32767&&(Ee.v-=65536);break;case 7:Ee={t:"s",v:G[K=K+Ce>>>0]};break;default:throw"Cannot apply delta for QPW cell type "+(ge&31)}else switch(ge&31){case 1:Ee={t:"z"};break;case 2:Ee={t:"n",v:ie.read_shift(2)};break;case 7:Ee={t:"s",v:G[K=ie.read_shift(4)-1]};break;default:throw"Cannot apply repeat for QPW cell type "+(ge&31)}!W.sheetStubs&&Ee.t=="z"||(q["!data"]!=null?(q["!data"][V]||(q["!data"][V]=[]),q["!data"][V][re]=Ee):q[ve+hn(V)]=Ee),++V,--te}}}break}F.l+=ne}return oe}return{sheet_to_wk1:n,book_to_wk3:i,to_workbook:e}}();function Hwt(t){var e={},r=t.match(wo),n=0,i=!1;if(r)for(;n!=r.length;++n){var s=Lt(r[n]);switch(s[0].replace(/\w*:/g,"")){case"<condense":break;case"<extend":break;case"<shadow":if(!s.val)break;case"<shadow>":case"<shadow/>":e.shadow=1;break;case"</shadow>":break;case"<charset":if(s.val=="1")break;e.cp=UV[parseInt(s.val,10)];break;case"<outline":if(!s.val)break;case"<outline>":case"<outline/>":e.outline=1;break;case"</outline>":break;case"<rFont":e.name=s.val;break;case"<sz":e.sz=s.val;break;case"<strike":if(!s.val)break;case"<strike>":case"<strike/>":e.strike=1;break;case"</strike>":break;case"<u":if(!s.val)break;switch(s.val){case"double":e.uval="double";break;case"singleAccounting":e.uval="single-accounting";break;case"doubleAccounting":e.uval="double-accounting";break}case"<u>":case"<u/>":e.u=1;break;case"</u>":break;case"<b":if(s.val=="0")break;case"<b>":case"<b/>":e.b=1;break;case"</b>":break;case"<i":if(s.val=="0")break;case"<i>":case"<i/>":e.i=1;break;case"</i>":break;case"<color":s.rgb&&(e.color=s.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":e.family=s.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":e.valign=s.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":break;case"<scheme":break;case"<scheme>":case"<scheme/>":case"</scheme>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(s[0].charCodeAt(1)!==47&&!i)throw new Error("Unrecognized rich format "+s[0])}}return e}var Wwt=function(){var t=E4("t"),e=E4("rPr");function r(s){var a=s.match(t);if(!a)return{t:"s",v:""};var o={t:"s",v:yn(a[1])},c=s.match(e);return c&&(o.s=Hwt(c[1])),o}var n=/<(?:\w+:)?r>/g,i=/<\/(?:\w+:)?r>/;return function(a){return a.replace(n,"").split(i).map(r).filter(function(o){return o.v})}}(),Kwt=function(){var e=/(\r\n|\n)/g;function r(i,s,a){var o=[];i.u&&o.push("text-decoration: underline;"),i.uval&&o.push("text-underline-style:"+i.uval+";"),i.sz&&o.push("font-size:"+i.sz+"pt;"),i.outline&&o.push("text-effect: outline;"),i.shadow&&o.push("text-shadow: auto;"),s.push('<span style="'+o.join("")+'">'),i.b&&(s.push("<b>"),a.push("</b>")),i.i&&(s.push("<i>"),a.push("</i>")),i.strike&&(s.push("<s>"),a.push("</s>"));var c=i.valign||"";return c=="superscript"||c=="super"?c="sup":c=="subscript"&&(c="sub"),c!=""&&(s.push("<"+c+">"),a.push("</"+c+">")),a.push("</span>"),i}function n(i){var s=[[],i.v,[]];return i.v?(i.s&&r(i.s,s[0],s[2]),s[0].join("")+s[1].replace(e,"<br/>")+s[2].join("")):""}return function(s){return s.map(n).join("")}}(),Gwt=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,Ywt=/<(?:\w+:)?r>/,Xwt=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function pj(t,e){var r=e?e.cellHTML:!0,n={};return t?(t.match(/^\s*<(?:\w+:)?t[^>]*>/)?(n.t=yn(ni(t.slice(t.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||""),!0),n.r=ni(t),r&&(n.h=YV(n.t))):t.match(Ywt)&&(n.r=ni(t),n.t=yn(ni((t.replace(Xwt,"").match(Gwt)||[]).join("").replace(wo,"")),!0),r&&(n.h=Kwt(Wwt(n.r)))),n):{t:""}}var Zwt=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,Jwt=/<(?:\w+:)?(?:si|sstItem)>/g,Qwt=/<\/(?:\w+:)?(?:si|sstItem)>/;function e3t(t,e){var r=[],n="";if(!t)return r;var i=t.match(Zwt);if(i){n=i[2].replace(Jwt,"").split(Qwt);for(var s=0;s!=n.length;++s){var a=pj(n[s].trim(),e);a!=null&&(r[r.length]=a)}i=Lt(i[1]),r.Count=i.count,r.Unique=i.uniqueCount}return r}var t3t=/^\s|\s$|[\t\n\r]/;function r3t(t,e){if(!e.bookSST)return"";var r=[As];r[r.length]=yt("sst",null,{xmlns:Km[0],count:t.Count,uniqueCount:t.Unique});for(var n=0;n!=t.length;++n)if(t[n]!=null){var i=t[n],s="<si>";i.r?s+=i.r:(s+="<t",i.t||(i.t=""),typeof i.t!="string"&&(i.t=String(i.t)),i.t.match(t3t)&&(s+=' xml:space="preserve"'),s+=">"+$r(i.t)+"</t>"),s+="</si>",r[r.length]=s}return r.length>2&&(r[r.length]="</sst>",r[1]=r[1].replace("/>",">")),r.join("")}function n3t(t){return[t.read_shift(4),t.read_shift(4)]}function i3t(t,e){var r=[],n=!1;return f0(t,function(s,a,o){switch(o){case 159:r.Count=s[0],r.Unique=s[1];break;case 19:r.push(s);break;case 160:return!0;case 35:n=!0;break;case 36:n=!1;break;default:if(a.T,!n||e.WTF)throw new Error("Unexpected record 0x"+o.toString(16))}}),r}function s3t(t,e){return e||(e=Ge(8)),e.write_shift(4,t.Count),e.write_shift(4,t.Unique),e}var a3t=mvt;function o3t(t){var e=Ac();tt(e,159,s3t(t));for(var r=0;r<t.length;++r)tt(e,19,a3t(t[r]));return tt(e,160),e.end()}function M2e(t){if(typeof Br<"u")return Br.utils.encode(lm,t);for(var e=[],r=t.split(""),n=0;n<r.length;++n)e[n]=r[n].charCodeAt(0);return e}function jd(t,e){var r={};return r.Major=t.read_shift(2),r.Minor=t.read_shift(2),e>=4&&(t.l+=e-4),r}function c3t(t){var e={};return e.id=t.read_shift(0,"lpp4"),e.R=jd(t,4),e.U=jd(t,4),e.W=jd(t,4),e}function l3t(t){for(var e=t.read_shift(4),r=t.l+e-4,n={},i=t.read_shift(4),s=[];i-- >0;)s.push({t:t.read_shift(4),v:t.read_shift(0,"lpp4")});if(n.name=t.read_shift(0,"lpp4"),n.comps=s,t.l!=r)throw new Error("Bad DataSpaceMapEntry: "+t.l+" != "+r);return n}function u3t(t){var e=[];t.l+=4;for(var r=t.read_shift(4);r-- >0;)e.push(l3t(t));return e}function f3t(t){var e=[];t.l+=4;for(var r=t.read_shift(4);r-- >0;)e.push(t.read_shift(0,"lpp4"));return e}function h3t(t){var e={};return t.read_shift(4),t.l+=4,e.id=t.read_shift(0,"lpp4"),e.name=t.read_shift(0,"lpp4"),e.R=jd(t,4),e.U=jd(t,4),e.W=jd(t,4),e}function d3t(t){var e=h3t(t);if(e.ename=t.read_shift(0,"8lpp4"),e.blksz=t.read_shift(4),e.cmode=t.read_shift(4),t.read_shift(4)!=4)throw new Error("Bad !Primary record");return e}function L2e(t,e){var r=t.l+e,n={};n.Flags=t.read_shift(4)&63,t.l+=4,n.AlgID=t.read_shift(4);var i=!1;switch(n.AlgID){case 26126:case 26127:case 26128:i=n.Flags==36;break;case 26625:i=n.Flags==4;break;case 0:i=n.Flags==16||n.Flags==4||n.Flags==36;break;default:throw"Unrecognized encryption algorithm: "+n.AlgID}if(!i)throw new Error("Encryption Flags/AlgID mismatch");return n.AlgIDHash=t.read_shift(4),n.KeySize=t.read_shift(4),n.ProviderType=t.read_shift(4),t.l+=8,n.CSPName=t.read_shift(r-t.l>>1,"utf16le"),t.l=r,n}function F2e(t,e){var r={},n=t.l+e;return t.l+=4,r.Salt=t.slice(t.l,t.l+16),t.l+=16,r.Verifier=t.slice(t.l,t.l+16),t.l+=16,t.read_shift(4),r.VerifierHash=t.slice(t.l,n),t.l=n,r}function p3t(t){var e=jd(t);switch(e.Minor){case 2:return[e.Minor,g3t(t)];case 3:return[e.Minor,m3t()];case 4:return[e.Minor,y3t(t)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+e.Minor)}function g3t(t){var e=t.read_shift(4);if((e&63)!=36)throw new Error("EncryptionInfo mismatch");var r=t.read_shift(4),n=L2e(t,r),i=F2e(t,t.length-t.l);return{t:"Std",h:n,v:i}}function m3t(){throw new Error("File is password-protected: ECMA-376 Extensible")}function y3t(t){var e=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];t.l+=4;var r=t.read_shift(t.length-t.l,"utf8"),n={};return r.replace(wo,function(s){var a=Lt(s);switch(af(a[0])){case"<?xml":break;case"<encryption":case"</encryption>":break;case"<keyData":e.forEach(function(o){n[o]=a[o]});break;case"<dataIntegrity":n.encryptedHmacKey=a.encryptedHmacKey,n.encryptedHmacValue=a.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":n.encs=[];break;case"</keyEncryptors>":break;case"<keyEncryptor":n.uri=a.uri;break;case"</keyEncryptor>":break;case"<encryptedKey":n.encs.push(a);break;default:throw a[0]}}),n}function v3t(t,e){var r={},n=r.EncryptionVersionInfo=jd(t,4);if(e-=4,n.Minor!=2)throw new Error("unrecognized minor version code: "+n.Minor);if(n.Major>4||n.Major<2)throw new Error("unrecognized major version code: "+n.Major);r.Flags=t.read_shift(4),e-=4;var i=t.read_shift(4);return e-=4,r.EncryptionHeader=L2e(t,i),e-=i,r.EncryptionVerifier=F2e(t,e),r}function b3t(t){var e={},r=e.EncryptionVersionInfo=jd(t,4);if(r.Major!=1||r.Minor!=1)throw"unrecognized version code "+r.Major+" : "+r.Minor;return e.Salt=t.read_shift(16),e.EncryptedVerifier=t.read_shift(16),e.EncryptedVerifierHash=t.read_shift(16),e}function gj(t){var e=0,r,n=M2e(t),i=n.length+1,s,a,o,c,l;for(r=V1(i),r[0]=n.length,s=1;s!=i;++s)r[s]=n[s-1];for(s=i-1;s>=0;--s)a=r[s],o=e&16384?1:0,c=e<<1&32767,l=o|c,e=l^a;return e^52811}var $2e=function(){var t=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],e=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],r=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],n=function(a){return(a/2|a*128)&255},i=function(a,o){return n(a^o)},s=function(a){for(var o=e[a.length-1],c=104,l=a.length-1;l>=0;--l)for(var u=a[l],f=0;f!=7;++f)u&64&&(o^=r[c]),u*=2,--c;return o};return function(a){for(var o=M2e(a),c=s(o),l=o.length,u=V1(16),f=0;f!=16;++f)u[f]=0;var h,d,g;for((l&1)===1&&(h=c>>8,u[l]=i(t[0],h),--l,h=c&255,d=o[o.length-1],u[l]=i(d,h));l>0;)--l,h=c>>8,u[l]=i(o[l],h),--l,h=c&255,u[l]=i(o[l],h);for(l=15,g=15-o.length;g>0;)h=c>>8,u[l]=i(t[g],h),--l,--g,h=c&255,u[l]=i(o[l],h),--l,--g;return u}}(),w3t=function(t,e,r,n,i){i||(i=e),n||(n=$2e(t));var s,a;for(s=0;s!=e.length;++s)a=e[s],a^=n[r],a=(a>>5|a<<3)&255,i[s]=a,++r;return[i,r,n]},_3t=function(t){var e=0,r=$2e(t);return function(n){var i=w3t("",n,e,r);return e=i[1],i[0]}};function x3t(t,e,r,n){var i={key:bs(t),verificationBytes:bs(t)};return r.password&&(i.verifier=gj(r.password)),n.valid=i.verificationBytes===i.verifier,n.valid&&(n.insitu=_3t(r.password)),i}function E3t(t,e,r){var n=r||{};return n.Info=t.read_shift(2),t.l-=2,n.Info===1?n.Data=b3t(t):n.Data=v3t(t,e),n}function S3t(t,e,r){var n={Type:r.biff>=8?t.read_shift(2):0};return n.Type?E3t(t,e-2,n):x3t(t,r.biff>=8?e:e-2,r,n),n}function A3t(t,e){switch(e.type){case"base64":return D5(al(t),e);case"binary":return D5(t,e);case"buffer":return D5(tn&&Buffer.isBuffer(t)?t.toString("binary"):lh(t),e);case"array":return D5(fm(t),e)}throw new Error("Unrecognized type "+e.type)}function D5(t,e){var r=e||{},n={},i=r.dense;i&&(n["!data"]=[]);var s=t.match(/\\trowd[\s\S]*?\\row\b/g);if(!s)throw new Error("RTF missing table");var a={s:{c:0,r:0},e:{c:0,r:s.length-1}},o=[];return s.forEach(function(c,l){i&&(o=n["!data"][l]=[]);for(var u=/\\[\w\-]+\b/g,f=0,h,d=-1,g=[];(h=u.exec(c))!=null;){var p=c.slice(f,u.lastIndex-h[0].length);switch(p.charCodeAt(0)==32&&(p=p.slice(1)),p.length&&g.push(p),h[0]){case"\\cell":if(++d,g.length){var m={v:g.join(""),t:"s"};m.v=="TRUE"||m.v=="FALSE"?(m.v=m.v=="TRUE",m.t="b"):isNaN(rl(m.v))||(m.t="n",r.cellText!==!1&&(m.w=m.v),m.v=rl(m.v)),i?o[d]=m:n[en({r:l,c:d})]=m}g=[];break;case"\\par":g.push(`
`);break}f=u.lastIndex}d>a.e.c&&(a.e.c=d)}),n["!ref"]=Ir(a),n}function T3t(t,e){var r=fp(A3t(t,e),e);return r.bookType="rtf",r}function k3t(t,e){var r=["{\\rtf1\\ansi"];if(!t["!ref"])return r[0]+"}";for(var n=pn(t["!ref"]),i,s=t["!data"]!=null,a=[],o=n.s.r;o<=n.e.r;++o){r.push("\\trowd\\trautofit1");for(var c=n.s.c;c<=n.e.c;++c)r.push("\\cellx"+(c+1));for(r.push("\\pard\\intbl"),s&&(a=t["!data"][o]||[]),c=n.s.c;c<=n.e.c;++c){var l=en({r:o,c});if(i=s?a[c]:t[l],!i||i.v==null&&(!i.f||i.F)){r.push(" \\cell");continue}r.push(" "+(i.w||(uh(i),i.w)||"").replace(/[\r\n]/g,"\\par ")),r.push("\\cell")}r.push("\\pard\\intbl\\row")}return r.join("")+"}"}function C3t(t){var e=t.slice(t[0]==="#"?1:0).slice(0,6);return[parseInt(e.slice(0,2),16),parseInt(e.slice(2,4),16),parseInt(e.slice(4,6),16)]}function I4(t){for(var e=0,r=1;e!=3;++e)r=r*256+(t[e]>255?255:t[e]<0?0:t[e]);return r.toString(16).toUpperCase().slice(1)}function I3t(t){var e=t[0]/255,r=t[1]/255,n=t[2]/255,i=Math.max(e,r,n),s=Math.min(e,r,n),a=i-s;if(a===0)return[0,0,e];var o=0,c=0,l=i+s;switch(c=a/(l>1?2-l:l),i){case e:o=((r-n)/a+6)%6;break;case r:o=(n-e)/a+2;break;case n:o=(e-r)/a+4;break}return[o/6,c,l/2]}function R3t(t){var e=t[0],r=t[1],n=t[2],i=r*2*(n<.5?n:1-n),s=n-i/2,a=[s,s,s],o=6*e,c;if(r!==0)switch(o|0){case 0:case 6:c=i*o,a[0]+=i,a[1]+=c;break;case 1:c=i*(2-o),a[0]+=c,a[1]+=i;break;case 2:c=i*(o-2),a[1]+=i,a[2]+=c;break;case 3:c=i*(4-o),a[1]+=c,a[2]+=i;break;case 4:c=i*(o-4),a[2]+=i,a[0]+=c;break;case 5:c=i*(6-o),a[2]+=c,a[0]+=i;break}for(var l=0;l!=3;++l)a[l]=Math.round(a[l]*255);return a}function KE(t,e){if(e===0)return t;var r=I3t(C3t(t));return e<0?r[2]=r[2]*(1+e):r[2]=1-(1-r[2])*(1-e),I4(R3t(r))}var U2e=6,P3t=15,B3t=1,so=U2e;function R4(t){return Math.floor((t+Math.round(128/so)/256)*so)}function P4(t){return Math.floor((t-5)/so*100+.5)/100}function GE(t){return Math.round((t*so+5)/so*256)/256}function hB(t){return GE(P4(R4(t)))}function mj(t){var e=Math.abs(t-hB(t)),r=so;if(e>.005)for(so=B3t;so<P3t;++so)Math.abs(t-hB(t))<=e&&(e=Math.abs(t-hB(t)),r=so);so=r}function j1(t){t.width?(t.wpx=R4(t.width),t.wch=P4(t.wpx),t.MDW=so):t.wpx?(t.wch=P4(t.wpx),t.width=GE(t.wch),t.MDW=so):typeof t.wch=="number"&&(t.width=GE(t.wch),t.wpx=R4(t.width),t.MDW=so),t.customWidth&&delete t.customWidth}var D3t=96,V2e=D3t;function B4(t){return t*96/V2e}function gv(t){return t*V2e/96}var O3t={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};function N3t(t,e,r,n){e.Borders=[];var i={},s=!1;(t[0].match(wo)||[]).forEach(function(a){var o=Lt(a);switch(af(o[0])){case"<borders":case"<borders>":case"</borders>":break;case"<border":case"<border>":case"<border/>":i={},o.diagonalUp&&(i.diagonalUp=ei(o.diagonalUp)),o.diagonalDown&&(i.diagonalDown=ei(o.diagonalDown)),e.Borders.push(i);break;case"</border>":break;case"<left/>":break;case"<left":case"<left>":break;case"</left>":break;case"<right/>":break;case"<right":case"<right>":break;case"</right>":break;case"<top/>":break;case"<top":case"<top>":break;case"</top>":break;case"<bottom/>":break;case"<bottom":case"<bottom>":break;case"</bottom>":break;case"<diagonal":case"<diagonal>":case"<diagonal/>":break;case"</diagonal>":break;case"<horizontal":case"<horizontal>":case"<horizontal/>":break;case"</horizontal>":break;case"<vertical":case"<vertical>":case"<vertical/>":break;case"</vertical>":break;case"<start":case"<start>":case"<start/>":break;case"</start>":break;case"<end":case"<end>":case"<end/>":break;case"</end>":break;case"<color":case"<color>":break;case"<color/>":case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(n&&n.WTF&&!s)throw new Error("unrecognized "+o[0]+" in borders")}})}function M3t(t,e,r,n){e.Fills=[];var i={},s=!1;(t[0].match(wo)||[]).forEach(function(a){var o=Lt(a);switch(af(o[0])){case"<fills":case"<fills>":case"</fills>":break;case"<fill>":case"<fill":case"<fill/>":i={},e.Fills.push(i);break;case"</fill>":break;case"<gradientFill>":break;case"<gradientFill":case"</gradientFill>":e.Fills.push(i),i={};break;case"<patternFill":case"<patternFill>":o.patternType&&(i.patternType=o.patternType);break;case"<patternFill/>":case"</patternFill>":break;case"<bgColor":i.bgColor||(i.bgColor={}),o.indexed&&(i.bgColor.indexed=parseInt(o.indexed,10)),o.theme&&(i.bgColor.theme=parseInt(o.theme,10)),o.tint&&(i.bgColor.tint=parseFloat(o.tint)),o.rgb&&(i.bgColor.rgb=o.rgb.slice(-6));break;case"<bgColor/>":case"</bgColor>":break;case"<fgColor":i.fgColor||(i.fgColor={}),o.theme&&(i.fgColor.theme=parseInt(o.theme,10)),o.tint&&(i.fgColor.tint=parseFloat(o.tint)),o.rgb!=null&&(i.fgColor.rgb=o.rgb.slice(-6));break;case"<fgColor/>":case"</fgColor>":break;case"<stop":case"<stop/>":break;case"</stop>":break;case"<color":case"<color/>":break;case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(n&&n.WTF&&!s)throw new Error("unrecognized "+o[0]+" in fills")}})}function L3t(t,e,r,n){e.Fonts=[];var i={},s=!1;(t[0].match(wo)||[]).forEach(function(a){var o=Lt(a);switch(af(o[0])){case"<fonts":case"<fonts>":case"</fonts>":break;case"<font":case"<font>":break;case"</font>":case"<font/>":e.Fonts.push(i),i={};break;case"<name":o.val&&(i.name=ni(o.val));break;case"<name/>":case"</name>":break;case"<b":i.bold=o.val?ei(o.val):1;break;case"<b/>":i.bold=1;break;case"<i":i.italic=o.val?ei(o.val):1;break;case"<i/>":i.italic=1;break;case"<u":switch(o.val){case"none":i.underline=0;break;case"single":i.underline=1;break;case"double":i.underline=2;break;case"singleAccounting":i.underline=33;break;case"doubleAccounting":i.underline=34;break}break;case"<u/>":i.underline=1;break;case"<strike":i.strike=o.val?ei(o.val):1;break;case"<strike/>":i.strike=1;break;case"<outline":i.outline=o.val?ei(o.val):1;break;case"<outline/>":i.outline=1;break;case"<shadow":i.shadow=o.val?ei(o.val):1;break;case"<shadow/>":i.shadow=1;break;case"<condense":i.condense=o.val?ei(o.val):1;break;case"<condense/>":i.condense=1;break;case"<extend":i.extend=o.val?ei(o.val):1;break;case"<extend/>":i.extend=1;break;case"<sz":o.val&&(i.sz=+o.val);break;case"<sz/>":case"</sz>":break;case"<vertAlign":o.val&&(i.vertAlign=o.val);break;case"<vertAlign/>":case"</vertAlign>":break;case"<family":o.val&&(i.family=parseInt(o.val,10));break;case"<family/>":case"</family>":break;case"<scheme":o.val&&(i.scheme=o.val);break;case"<scheme/>":case"</scheme>":break;case"<charset":if(o.val=="1")break;o.codepage=UV[parseInt(o.val,10)];break;case"<color":if(i.color||(i.color={}),o.auto&&(i.color.auto=ei(o.auto)),o.rgb)i.color.rgb=o.rgb.slice(-6);else if(o.indexed){i.color.index=parseInt(o.indexed,10);var c=Dg[i.color.index];i.color.index==81&&(c=Dg[1]),c||(c=Dg[1]),i.color.rgb=c[0].toString(16)+c[1].toString(16)+c[2].toString(16)}else o.theme&&(i.color.theme=parseInt(o.theme,10),o.tint&&(i.color.tint=parseFloat(o.tint)),o.theme&&r.themeElements&&r.themeElements.clrScheme&&(i.color.rgb=KE(r.themeElements.clrScheme[i.color.theme].rgb,i.color.tint||0)));break;case"<color/>":case"</color>":break;case"<AlternateContent":s=!0;break;case"</AlternateContent>":s=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(n&&n.WTF&&!s)throw new Error("unrecognized "+o[0]+" in fonts")}})}function F3t(t,e,r){e.NumberFmt=[];for(var n=Ki(tr),i=0;i<n.length;++i)e.NumberFmt[n[i]]=tr[n[i]];var s=t[0].match(wo);if(s)for(i=0;i<s.length;++i){var a=Lt(s[i]);switch(af(a[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":break;case"<numFmt":{var o=yn(ni(a.formatCode)),c=parseInt(a.numFmtId,10);if(e.NumberFmt[c]=o,c>0){if(c>392){for(c=392;c>60&&e.NumberFmt[c]!=null;--c);e.NumberFmt[c]=o}P1(o,c)}}break;case"</numFmt>":break;default:if(r.WTF)throw new Error("unrecognized "+a[0]+" in numFmts")}}}function $3t(t){var e=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var n=r[0];n<=r[1];++n)t[n]!=null&&(e[e.length]=yt("numFmt",null,{numFmtId:n,formatCode:$r(t[n])}))}),e.length===1?"":(e[e.length]="</numFmts>",e[0]=yt("numFmts",null,{count:e.length-2}).replace("/>",">"),e.join(""))}var O5=["numFmtId","fillId","fontId","borderId","xfId"],N5=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];function U3t(t,e,r){e.CellXf=[];var n,i=!1;(t[0].match(wo)||[]).forEach(function(s){var a=Lt(s),o=0;switch(af(a[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":break;case"<xf":case"<xf/>":for(n=a,delete n[0],o=0;o<O5.length;++o)n[O5[o]]&&(n[O5[o]]=parseInt(n[O5[o]],10));for(o=0;o<N5.length;++o)n[N5[o]]&&(n[N5[o]]=ei(n[N5[o]]));if(e.NumberFmt&&n.numFmtId>392){for(o=392;o>60;--o)if(e.NumberFmt[n.numFmtId]==e.NumberFmt[o]){n.numFmtId=o;break}}e.CellXf.push(n);break;case"</xf>":break;case"<alignment":case"<alignment/>":var c={};a.vertical&&(c.vertical=a.vertical),a.horizontal&&(c.horizontal=a.horizontal),a.textRotation!=null&&(c.textRotation=a.textRotation),a.indent&&(c.indent=a.indent),a.wrapText&&(c.wrapText=ei(a.wrapText)),n.alignment=c;break;case"</alignment>":break;case"<protection":break;case"</protection>":case"<protection/>":break;case"<AlternateContent":i=!0;break;case"</AlternateContent>":i=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(r&&r.WTF&&!i)throw new Error("unrecognized "+a[0]+" in cellXfs")}})}function V3t(t){var e=[];return e[e.length]=yt("cellXfs",null),t.forEach(function(r){e[e.length]=yt("xf",null,r)}),e[e.length]="</cellXfs>",e.length===2?"":(e[0]=yt("cellXfs",null,{count:e.length-2}).replace("/>",">"),e.join(""))}var j3t=function(){var e=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,r=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,n=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,i=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,s=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(o,c,l){var u={};if(!o)return u;o=o.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");var f;return(f=o.match(e))&&F3t(f,u,l),(f=o.match(i))&&L3t(f,u,c,l),(f=o.match(n))&&M3t(f,u,c,l),(f=o.match(s))&&N3t(f,u,c,l),(f=o.match(r))&&U3t(f,u,l),u}}();function z3t(t,e){var r=[As,yt("styleSheet",null,{xmlns:Km[0],"xmlns:vt":Ys.vt})],n;return t.SSF&&(n=$3t(t.SSF))!=null&&(r[r.length]=n),r[r.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',r[r.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',r[r.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',r[r.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(n=V3t(e.cellXfs))&&(r[r.length]=n),r[r.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',r[r.length]='<dxfs count="0"/>',r[r.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',r.length>2&&(r[r.length]="</styleSheet>",r[1]=r[1].replace("/>",">")),r.join("")}function q3t(t,e){var r=t.read_shift(2),n=ho(t);return[r,n]}function H3t(t,e,r){r||(r=Ge(6+4*e.length)),r.write_shift(2,t),Zs(e,r);var n=r.length>r.l?r.slice(0,r.l):r;return r.l==null&&(r.l=r.length),n}function W3t(t,e,r){var n={};n.sz=t.read_shift(2)/20;var i=Evt(t);i.fItalic&&(n.italic=1),i.fCondense&&(n.condense=1),i.fExtend&&(n.extend=1),i.fShadow&&(n.shadow=1),i.fOutline&&(n.outline=1),i.fStrikeout&&(n.strike=1);var s=t.read_shift(2);switch(s===700&&(n.bold=1),t.read_shift(2)){case 1:n.vertAlign="superscript";break;case 2:n.vertAlign="subscript";break}var a=t.read_shift(1);a!=0&&(n.underline=a);var o=t.read_shift(1);o>0&&(n.family=o);var c=t.read_shift(1);switch(c>0&&(n.charset=c),t.l++,n.color=xvt(t),t.read_shift(1)){case 1:n.scheme="major";break;case 2:n.scheme="minor";break}return n.name=ho(t),n}function K3t(t,e){e||(e=Ge(25+4*32)),e.write_shift(2,t.sz*20),Svt(t,e),e.write_shift(2,t.bold?700:400);var r=0;t.vertAlign=="superscript"?r=1:t.vertAlign=="subscript"&&(r=2),e.write_shift(2,r),e.write_shift(1,t.underline||0),e.write_shift(1,t.family||0),e.write_shift(1,t.charset||0),e.write_shift(1,0),qE(t.color,e);var n=0;return t.scheme=="major"&&(n=1),t.scheme=="minor"&&(n=2),e.write_shift(1,n),Zs(t.name,e),e.length>e.l?e.slice(0,e.l):e}var G3t=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],dB,Y3t=vo;function one(t,e){e||(e=Ge(4*3+8*7+16*1)),dB||(dB=LA(G3t));var r=dB[t.patternType];r==null&&(r=40),e.write_shift(4,r);var n=0;if(r!=40)for(qE({auto:1},e),qE({auto:1},e);n<12;++n)e.write_shift(4,0);else{for(;n<4;++n)e.write_shift(4,0);for(;n<12;++n)e.write_shift(4,0)}return e.length>e.l?e.slice(0,e.l):e}function X3t(t,e){var r=t.l+e,n=t.read_shift(2),i=t.read_shift(2);return t.l=r,{ixfe:n,numFmtId:i}}function j2e(t,e,r){r||(r=Ge(16)),r.write_shift(2,e||0),r.write_shift(2,t.numFmtId||0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(1,0),r.write_shift(1,0);var n=0;return r.write_shift(1,n),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(1,0),r}function Rw(t,e){return e||(e=Ge(10)),e.write_shift(1,0),e.write_shift(1,0),e.write_shift(4,0),e.write_shift(4,0),e}var Z3t=vo;function J3t(t,e){return e||(e=Ge(51)),e.write_shift(1,0),Rw(null,e),Rw(null,e),Rw(null,e),Rw(null,e),Rw(null,e),e.length>e.l?e.slice(0,e.l):e}function Q3t(t,e){return e||(e=Ge(12+4*10)),e.write_shift(4,t.xfId),e.write_shift(2,1),e.write_shift(1,+t.builtinId),e.write_shift(1,0),k4(t.name||"",e),e.length>e.l?e.slice(0,e.l):e}function e4t(t,e,r){var n=Ge(2052);return n.write_shift(4,t),k4(e,n),k4(r,n),n.length>n.l?n.slice(0,n.l):n}function t4t(t,e,r){var n={};n.NumberFmt=[];for(var i in tr)n.NumberFmt[i]=tr[i];n.CellXf=[],n.Fonts=[];var s=[],a=!1;return f0(t,function(c,l,u){switch(u){case 44:n.NumberFmt[c[0]]=c[1],P1(c[1],c[0]);break;case 43:n.Fonts.push(c),c.color.theme!=null&&e&&e.themeElements&&e.themeElements.clrScheme&&(c.color.rgb=KE(e.themeElements.clrScheme[c.color.theme].rgb,c.color.tint||0));break;case 1025:break;case 45:break;case 46:break;case 47:s[s.length-1]==617&&n.CellXf.push(c);break;case 48:case 507:case 572:case 475:break;case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 35:a=!0;break;case 36:a=!1;break;case 37:s.push(u),a=!0;break;case 38:s.pop(),a=!1;break;default:if(l.T>0)s.push(u);else if(l.T<0)s.pop();else if(!a||r.WTF&&s[s.length-1]!=37)throw new Error("Unexpected record 0x"+u.toString(16))}}),n}function r4t(t,e){if(e){var r=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var i=n[0];i<=n[1];++i)e[i]!=null&&++r}),r!=0&&(tt(t,615,Fu(r)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var i=n[0];i<=n[1];++i)e[i]!=null&&tt(t,44,H3t(i,e[i]))}),tt(t,616))}}function n4t(t){var e=1;tt(t,611,Fu(e)),tt(t,43,K3t({sz:12,color:{theme:1},name:"Calibri",family:2,scheme:"minor"})),tt(t,612)}function i4t(t){var e=2;tt(t,603,Fu(e)),tt(t,45,one({patternType:"none"})),tt(t,45,one({patternType:"gray125"})),tt(t,604)}function s4t(t){var e=1;tt(t,613,Fu(e)),tt(t,46,J3t()),tt(t,614)}function a4t(t){var e=1;tt(t,626,Fu(e)),tt(t,47,j2e({numFmtId:0,fontId:0,fillId:0,borderId:0},65535)),tt(t,627)}function o4t(t,e){tt(t,617,Fu(e.length)),e.forEach(function(r){tt(t,47,j2e(r,0))}),tt(t,618)}function c4t(t){var e=1;tt(t,619,Fu(e)),tt(t,48,Q3t({xfId:0,builtinId:0,name:"Normal"})),tt(t,620)}function l4t(t){var e=0;tt(t,505,Fu(e)),tt(t,506)}function u4t(t){var e=0;tt(t,508,e4t(e,"TableStyleMedium9","PivotStyleMedium4")),tt(t,509)}function f4t(t,e){var r=Ac();return tt(r,278),r4t(r,t.SSF),n4t(r),i4t(r),s4t(r),a4t(r),o4t(r,e.cellXfs),c4t(r),l4t(r),u4t(r),tt(r,279),r.end()}var h4t=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function d4t(t,e,r){e.themeElements.clrScheme=[];var n={};(t[0].match(wo)||[]).forEach(function(i){var s=Lt(i);switch(s[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":n.rgb=s.val;break;case"<a:sysClr":n.rgb=s.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":s[0].charAt(1)==="/"?(e.themeElements.clrScheme[h4t.indexOf(s[0])]=n,n={}):n.name=s[0].slice(3,s[0].length-1);break;default:if(r&&r.WTF)throw new Error("Unrecognized "+s[0]+" in clrScheme")}})}function p4t(){}function g4t(){}var m4t=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,y4t=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,v4t=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;function b4t(t,e,r){e.themeElements={};var n;[["clrScheme",m4t,d4t],["fontScheme",y4t,p4t],["fmtScheme",v4t,g4t]].forEach(function(i){if(!(n=t.match(i[1])))throw new Error(i[0]+" not found in themeElements");i[2](n,e,r)})}var w4t=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function z2e(t,e){(!t||t.length===0)&&(t=yj());var r,n={};if(!(r=t.match(w4t)))throw new Error("themeElements not found in theme");return b4t(r[0],n,e),n.raw=t,n}function yj(t,e){if(e&&e.themeXLSX)return e.themeXLSX;if(t&&typeof t.raw=="string")return t.raw;var r=[As];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface="ＭＳ Ｐゴシック"/>',r[r.length]='<a:font script="Hang" typeface="맑은 고딕"/>',r[r.length]='<a:font script="Hans" typeface="宋体"/>',r[r.length]='<a:font script="Hant" typeface="新細明體"/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface="ＭＳ Ｐゴシック"/>',r[r.length]='<a:font script="Hang" typeface="맑은 고딕"/>',r[r.length]='<a:font script="Hans" typeface="宋体"/>',r[r.length]='<a:font script="Hant" typeface="新細明體"/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function _4t(t,e,r){var n=t.l+e,i=t.read_shift(4);if(i!==124226){if(!r.cellStyles){t.l=n;return}var s=t.slice(t.l);t.l=n;var a;try{a=zme(s,{type:"array"})}catch{return}var o=yc(a,"theme/theme/theme1.xml",!0);if(o)return z2e(o,r)}}function x4t(t){return t.read_shift(4)}function E4t(t){var e={};switch(e.xclrType=t.read_shift(2),e.nTintShade=t.read_shift(2),e.xclrType){case 0:t.l+=4;break;case 1:e.xclrValue=S4t(t,4);break;case 2:e.xclrValue=A2e(t);break;case 3:e.xclrValue=x4t(t);break;case 4:t.l+=4;break}return t.l+=8,e}function S4t(t,e){return vo(t,e)}function A4t(t,e){return vo(t,e)}function T4t(t){var e=t.read_shift(2),r=t.read_shift(2)-4,n=[e];switch(e){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:n[1]=E4t(t);break;case 6:n[1]=A4t(t,r);break;case 14:case 15:n[1]=t.read_shift(r===1?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+e+" "+r)}return n}function k4t(t,e){var r=t.l+e;t.l+=2;var n=t.read_shift(2);t.l+=2;for(var i=t.read_shift(2),s=[];i-- >0;)s.push(T4t(t,r-t.l));return{ixfe:n,ext:s}}function C4t(t,e){e.forEach(function(r){switch(r[0]){}})}function I4t(t,e){return{flags:t.read_shift(4),version:t.read_shift(4),name:ho(t)}}function R4t(t){var e=Ge(12+2*t.name.length);return e.write_shift(4,t.flags),e.write_shift(4,t.version),Zs(t.name,e),e.slice(0,e.l)}function P4t(t){for(var e=[],r=t.read_shift(4);r-- >0;)e.push([t.read_shift(4),t.read_shift(4)]);return e}function B4t(t){var e=Ge(4+8*t.length);e.write_shift(4,t.length);for(var r=0;r<t.length;++r)e.write_shift(4,t[r][0]),e.write_shift(4,t[r][1]);return e}function D4t(t,e){var r=Ge(8+2*e.length);return r.write_shift(4,t),Zs(e,r),r.slice(0,r.l)}function O4t(t){return t.l+=4,t.read_shift(4)!=0}function N4t(t,e){var r=Ge(8);return r.write_shift(4,t),r.write_shift(4,1),r}function M4t(t,e,r){var n={Types:[],Cell:[],Value:[]},i=r||{},s=[],a=!1,o=2;return f0(t,function(c,l,u){switch(u){case 335:n.Types.push({name:c.name});break;case 51:c.forEach(function(f){o==1?n.Cell.push({type:n.Types[f[0]-1].name,index:f[1]}):o==0&&n.Value.push({type:n.Types[f[0]-1].name,index:f[1]})});break;case 337:o=c?1:0;break;case 338:o=2;break;case 35:s.push(u),a=!0;break;case 36:s.pop(),a=!1;break;default:if(!l.T){if(!a||i.WTF&&s[s.length-1]!=35)throw new Error("Unexpected record 0x"+u.toString(16))}}}),n}function L4t(){var t=Ac();return tt(t,332),tt(t,334,Fu(1)),tt(t,335,R4t({name:"XLDAPR",version:12e4,flags:3496657072})),tt(t,336),tt(t,339,D4t(1,"XLDAPR")),tt(t,52),tt(t,35,Fu(514)),tt(t,4096,Fu(0)),tt(t,4097,Dl(1)),tt(t,36),tt(t,53),tt(t,340),tt(t,337,N4t(1)),tt(t,51,B4t([[1,0]])),tt(t,338),tt(t,333),t.end()}function F4t(t,e,r){var n={Types:[],Cell:[],Value:[]};if(!t)return n;var i=!1,s=2,a;return t.replace(wo,function(o){var c=Lt(o);switch(af(c[0])){case"<?xml":break;case"<metadata":case"</metadata>":break;case"<metadataTypes":case"</metadataTypes>":break;case"<metadataType":n.Types.push({name:c.name});break;case"</metadataType>":break;case"<futureMetadata":for(var l=0;l<n.Types.length;++l)n.Types[l].name==c.name&&(a=n.Types[l]);break;case"</futureMetadata>":break;case"<bk>":break;case"</bk>":break;case"<rc":s==1?n.Cell.push({type:n.Types[c.t-1].name,index:+c.v}):s==0&&n.Value.push({type:n.Types[c.t-1].name,index:+c.v});break;case"</rc>":break;case"<cellMetadata":s=1;break;case"</cellMetadata>":s=2;break;case"<valueMetadata":s=0;break;case"</valueMetadata>":s=2;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;case"<rvb":if(!a)break;a.offsets||(a.offsets=[]),a.offsets.push(+c.i);break;default:if(!i&&r?.WTF)throw new Error("unrecognized "+c[0]+" in metadata")}return o}),n}function $4t(){var t=[As];return t.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),t.join("")}function U4t(t){var e=[];if(!t)return e;var r=1;return(t.match(wo)||[]).forEach(function(n){var i=Lt(n);switch(i[0]){case"<?xml":break;case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete i[0],i.i?r=i.i:i.i=r,e.push(i);break}}),e}function V4t(t){var e={};e.i=t.read_shift(4);var r={};r.r=t.read_shift(4),r.c=t.read_shift(4),e.r=en(r);var n=t.read_shift(1);return n&2&&(e.l="1"),n&8&&(e.a="1"),e}function j4t(t,e,r){var n=[];return f0(t,function(s,a,o){switch(o){case 63:n.push(s);break;default:if(!a.T)throw new Error("Unexpected record 0x"+o.toString(16))}}),n}function z4t(t,e,r,n){if(!t)return t;var i=n||{},s=!1;f0(t,function(o,c,l){switch(l){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:s=!0;break;case 36:s=!1;break;default:if(!c.T){if(!s||i.WTF)throw new Error("Unexpected record 0x"+l.toString(16))}}},i)}function q4t(t,e){if(!t)return"??";var r=(t.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return e["!id"][r].Target}function q2e(t,e){var r=[21600,21600],n=["m0,0l0",r[1],r[0],r[1],r[0],"0xe"].join(","),i=[yt("xml",null,{"xmlns:v":Gc.v,"xmlns:o":Gc.o,"xmlns:x":Gc.x,"xmlns:mv":Gc.mv}).replace(/\/>/,">"),yt("o:shapelayout",yt("o:idmap",null,{"v:ext":"edit",data:t}),{"v:ext":"edit"})],s=65536*t,a=e||[];return a.length>0&&i.push(yt("v:shapetype",[yt("v:stroke",null,{joinstyle:"miter"}),yt("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202",coordsize:r.join(","),"o:spt":202,path:n})),a.forEach(function(o){++s,i.push(H4t(o,s))}),i.push("</xml>"),i.join("")}function H4t(t,e){var r=Hn(t[0]),n={color2:"#BEFF82",type:"gradient"};n.type=="gradient"&&(n.angle="-180");var i=n.type=="gradient"?yt("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,s=yt("v:fill",i,n),a={on:"t",obscured:"t"};return["<v:shape"+S4({id:"_x0000_s"+e,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(t[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",s,yt("v:shadow",null,a),yt("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",La("x:Anchor",[r.c+1,0,r.r+1,0,r.c+3,20,r.r+5,20].join(",")),La("x:AutoFill","False"),La("x:Row",String(r.r)),La("x:Column",String(r.c)),t[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"].join("")}function cne(t,e,r,n){var i=t["!data"]!=null,s;e.forEach(function(a){var o=Hn(a.ref);if(i?(t["!data"][o.r]||(t["!data"][o.r]=[]),s=t["!data"][o.r][o.c]):s=t[a.ref],!s){s={t:"z"},i?t["!data"][o.r][o.c]=s:t[a.ref]=s;var c=pn(t["!ref"]||"BDWGO1000001:A1");c.s.r>o.r&&(c.s.r=o.r),c.e.r<o.r&&(c.e.r=o.r),c.s.c>o.c&&(c.s.c=o.c),c.e.c<o.c&&(c.e.c=o.c);var l=Ir(c);t["!ref"]=l}s.c||(s.c=[]);var u={a:a.author,t:a.t,r:a.r,T:r};a.h&&(u.h=a.h);for(var f=s.c.length-1;f>=0;--f){if(!r&&s.c[f].T)return;r&&!s.c[f].T&&s.c.splice(f,1)}if(r&&n){for(f=0;f<n.length;++f)if(u.a==n[f].id){u.a=n[f].name||u.a;break}}s.c.push(u)})}function W4t(t,e){if(t.match(/<(?:\w+:)?comments *\/>/))return[];var r=[],n=[],i=t.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);i&&i[1]&&i[1].split(/<\/\w*:?author>/).forEach(function(a){if(!(a===""||a.trim()==="")){var o=a.match(/<(?:\w+:)?author[^>]*>(.*)/);o&&r.push(o[1])}});var s=t.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return s&&s[1]&&s[1].split(/<\/\w*:?comment>/).forEach(function(a){if(!(a===""||a.trim()==="")){var o=a.match(/<(?:\w+:)?comment[^>]*>/);if(o){var c=Lt(o[0]),l={author:c.authorId&&r[c.authorId]||"sheetjsghost",ref:c.ref,guid:c.guid},u=Hn(c.ref);if(!(e.sheetRows&&e.sheetRows<=u.r)){var f=a.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),h=!!f&&!!f[1]&&pj(f[1])||{r:"",t:"",h:""};l.r=h.r,h.r=="<t></t>"&&(h.t=h.h=""),l.t=(h.t||"").replace(/\r\n/g,`
`).replace(/\r/g,`
`),e.cellHTML&&(l.h=h.h),n.push(l)}}}}),n}function K4t(t){var e=[As,yt("comments",null,{xmlns:Km[0]})],r=[];return e.push("<authors>"),t.forEach(function(n){n[1].forEach(function(i){var s=$r(i.a);r.indexOf(s)==-1&&(r.push(s),e.push("<author>"+s+"</author>")),i.T&&i.ID&&r.indexOf("tc="+i.ID)==-1&&(r.push("tc="+i.ID),e.push("<author>tc="+i.ID+"</author>"))})}),r.length==0&&(r.push("SheetJ5"),e.push("<author>SheetJ5</author>")),e.push("</authors>"),e.push("<commentList>"),t.forEach(function(n){var i=0,s=[],a=0;if(n[1][0]&&n[1][0].T&&n[1][0].ID&&(i=r.indexOf("tc="+n[1][0].ID)),n[1].forEach(function(l){l.a&&(i=r.indexOf($r(l.a))),l.T&&++a,s.push(l.t==null?"":$r(l.t))}),a===0)n[1].forEach(function(l){e.push('<comment ref="'+n[0]+'" authorId="'+r.indexOf($r(l.a))+'"><text>'),e.push(La("t",l.t==null?"":$r(l.t))),e.push("</text></comment>")});else{e.push('<comment ref="'+n[0]+'" authorId="'+i+'"><text>');for(var o=`Comment:
    `+s[0]+`
`,c=1;c<s.length;++c)o+=`Reply:
    `+s[c]+`
`;e.push(La("t",$r(o))),e.push("</text></comment>")}}),e.push("</commentList>"),e.length>2&&(e[e.length]="</comments>",e[1]=e[1].replace("/>",">")),e.join("")}function G4t(t,e){var r=[],n=!1,i={},s=0;return t.replace(wo,function(o,c){var l=Lt(o);switch(af(l[0])){case"<?xml":break;case"<ThreadedComments":break;case"</ThreadedComments>":break;case"<threadedComment":i={author:l.personId,guid:l.id,ref:l.ref,T:1};break;case"</threadedComment>":i.t!=null&&r.push(i);break;case"<text>":case"<text":s=c+o.length;break;case"</text>":i.t=t.slice(s,c).replace(/\r\n/g,`
`).replace(/\r/g,`
`);break;case"<mentions":case"<mentions>":n=!0;break;case"</mentions>":n=!1;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&e.WTF)throw new Error("unrecognized "+l[0]+" in threaded comments")}return o}),r}function Y4t(t,e,r){var n=[As,yt("ThreadedComments",null,{xmlns:Ys.TCMNT}).replace(/[\/]>/,">")];return t.forEach(function(i){var s="";(i[1]||[]).forEach(function(a,o){if(!a.T){delete a.ID;return}a.a&&e.indexOf(a.a)==-1&&e.push(a.a);var c={ref:i[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+r.tcid++).slice(-12)+"}"};o==0?s=c.id:c.parentId=s,a.ID=c.id,a.a&&(c.personId="{54EE7950-7262-4200-6969-"+("000000000000"+e.indexOf(a.a)).slice(-12)+"}"),n.push(yt("threadedComment",La("text",a.t||""),c))})}),n.push("</ThreadedComments>"),n.join("")}function X4t(t,e){var r=[],n=!1;return t.replace(wo,function(s){var a=Lt(s);switch(af(a[0])){case"<?xml":break;case"<personList":break;case"</personList>":break;case"<person":r.push({name:a.displayname,id:a.id});break;case"</person>":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&e.WTF)throw new Error("unrecognized "+a[0]+" in threaded comments")}return s}),r}function Z4t(t){var e=[As,yt("personList",null,{xmlns:Ys.TCMNT,"xmlns:x":Km[0]}).replace(/[\/]>/,">")];return t.forEach(function(r,n){e.push(yt("person",null,{displayName:r,id:"{54EE7950-7262-4200-6969-"+("000000000000"+n).slice(-12)+"}",userId:r,providerId:"None"}))}),e.push("</personList>"),e.join("")}function J4t(t){var e={};e.iauthor=t.read_shift(4);var r=Zm(t);return e.rfx=r.s,e.ref=en(r.s),t.l+=16,e}function Q4t(t,e){return e==null&&(e=Ge(36)),e.write_shift(4,t[1].iauthor),Tb(t[0],e),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e}var e6t=ho;function t6t(t){return Zs(t.slice(0,54))}function r6t(t,e){var r=[],n=[],i={},s=!1;return f0(t,function(o,c,l){switch(l){case 632:n.push(o);break;case 635:i=o;break;case 637:i.t=o.t,i.h=o.h,i.r=o.r;break;case 636:if(i.author=n[i.iauthor],delete i.iauthor,e.sheetRows&&i.rfx&&e.sheetRows<=i.rfx.r)break;i.t||(i.t=""),delete i.rfx,r.push(i);break;case 3072:break;case 35:s=!0;break;case 36:s=!1;break;case 37:break;case 38:break;default:if(!c.T){if(!s||e.WTF)throw new Error("Unexpected record 0x"+l.toString(16))}}}),r}function n6t(t){var e=Ac(),r=[];return tt(e,628),tt(e,630),t.forEach(function(n){n[1].forEach(function(i){r.indexOf(i.a)>-1||(r.push(i.a.slice(0,54)),tt(e,632,t6t(i.a)))})}),tt(e,631),tt(e,633),t.forEach(function(n){n[1].forEach(function(i){i.iauthor=r.indexOf(i.a);var s={s:Hn(n[0]),e:Hn(n[0])};tt(e,635,Q4t([s,i])),i.t&&i.t.length>0&&tt(e,637,vvt(i)),tt(e,636),delete i.iauthor})}),tt(e,634),tt(e,629),e.end()}var i6t="application/vnd.ms-office.vbaProject";function s6t(t){var e=Kt.utils.cfb_new({root:"R"});return t.FullPaths.forEach(function(r,n){if(!(r.slice(-1)==="/"||!r.match(/_VBA_PROJECT_CUR/))){var i=r.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");Kt.utils.cfb_add(e,i,t.FileIndex[n].content)}}),Kt.write(e)}function a6t(t,e){e.FullPaths.forEach(function(r,n){if(n!=0){var i=r.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");i.slice(-1)!=="/"&&Kt.utils.cfb_add(t,i,e.FileIndex[n].content)}})}var o6t=["xlsb","xlsm","xlam","biff8","xla"];function c6t(){return{"!type":"dialog"}}function l6t(){return{"!type":"dialog"}}function u6t(){return{"!type":"macro"}}function f6t(){return{"!type":"macro"}}var Mg=function(){var t=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,e={r:0,c:0};function r(n,i,s,a){var o=!1,c=!1;s.length==0?c=!0:s.charAt(0)=="["&&(c=!0,s=s.slice(1,-1)),a.length==0?o=!0:a.charAt(0)=="["&&(o=!0,a=a.slice(1,-1));var l=s.length>0?parseInt(s,10)|0:0,u=a.length>0?parseInt(a,10)|0:0;return o?u+=e.c:--u,c?l+=e.r:--l,i+(o?"":"$")+Hr(u)+(c?"":"$")+hn(l)}return function(i,s){return e=s,i.replace(t,r)}}(),vj=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,zA=function(){return function(e,r){return e.replace(vj,function(n,i,s,a,o,c){var l=nj(a)-(s?0:r.c),u=rj(c)-(o?0:r.r),f=o=="$"?u+1:u==0?"":"["+u+"]",h=s=="$"?l+1:l==0?"":"["+l+"]";return i+"R"+f+"C"+h})}}();function H2e(t,e){return t.replace(vj,function(r,n,i,s,a,o){return n+(i=="$"?i+s:Hr(nj(s)+e.c))+(a=="$"?a+o:hn(rj(o)+e.r))})}function h6t(t,e,r){var n=Js(e),i=n.s,s=Hn(r),a={r:s.r-i.r,c:s.c-i.c};return H2e(t,a)}function d6t(t){return t.length!=1}function lne(t){return t.replace(/_xlfn\./g,"")}function Ts(t){t.l+=1}function z1(t,e){var r=t.read_shift(2);return[r&16383,r>>14&1,r>>15&1]}function W2e(t,e,r){var n=2;if(r){if(r.biff>=2&&r.biff<=5)return K2e(t);r.biff==12&&(n=4)}var i=t.read_shift(n),s=t.read_shift(n),a=z1(t),o=z1(t);return{s:{r:i,c:a[0],cRel:a[1],rRel:a[2]},e:{r:s,c:o[0],cRel:o[1],rRel:o[2]}}}function K2e(t){var e=z1(t),r=z1(t),n=t.read_shift(1),i=t.read_shift(1);return{s:{r:e[0],c:n,cRel:e[1],rRel:e[2]},e:{r:r[0],c:i,cRel:r[1],rRel:r[2]}}}function p6t(t,e,r){if(r.biff<8)return K2e(t);var n=t.read_shift(r.biff==12?4:2),i=t.read_shift(r.biff==12?4:2),s=z1(t),a=z1(t);return{s:{r:n,c:s[0],cRel:s[1],rRel:s[2]},e:{r:i,c:a[0],cRel:a[1],rRel:a[2]}}}function G2e(t,e,r){if(r&&r.biff>=2&&r.biff<=5)return g6t(t);var n=t.read_shift(r&&r.biff==12?4:2),i=z1(t);return{r:n,c:i[0],cRel:i[1],rRel:i[2]}}function g6t(t){var e=z1(t),r=t.read_shift(1);return{r:e[0],c:r,cRel:e[1],rRel:e[2]}}function m6t(t){var e=t.read_shift(2),r=t.read_shift(2);return{r:e,c:r&255,fQuoted:!!(r&16384),cRel:r>>15,rRel:r>>15}}function y6t(t,e,r){var n=r&&r.biff?r.biff:8;if(n>=2&&n<=5)return v6t(t);var i=t.read_shift(n>=12?4:2),s=t.read_shift(2),a=(s&16384)>>14,o=(s&32768)>>15;if(s&=16383,o==1)for(;i>524287;)i-=1048576;if(a==1)for(;s>8191;)s=s-16384;return{r:i,c:s,cRel:a,rRel:o}}function v6t(t){var e=t.read_shift(2),r=t.read_shift(1),n=(e&32768)>>15,i=(e&16384)>>14;return e&=16383,n==1&&e>=8192&&(e=e-16384),i==1&&r>=128&&(r=r-256),{r:e,c:r,cRel:i,rRel:n}}function b6t(t,e,r){var n=(t[t.l++]&96)>>5,i=W2e(t,r.biff>=2&&r.biff<=5?6:8,r);return[n,i]}function w6t(t,e,r){var n=(t[t.l++]&96)>>5,i=t.read_shift(2,"i"),s=8;if(r)switch(r.biff){case 5:t.l+=12,s=6;break;case 12:s=12;break}var a=W2e(t,s,r);return[n,i,a]}function _6t(t,e,r){var n=(t[t.l++]&96)>>5;return t.l+=r&&r.biff>8?12:r.biff<8?6:8,[n]}function x6t(t,e,r){var n=(t[t.l++]&96)>>5,i=t.read_shift(2),s=8;if(r)switch(r.biff){case 5:t.l+=12,s=6;break;case 12:s=12;break}return t.l+=s,[n,i]}function E6t(t,e,r){var n=(t[t.l++]&96)>>5,i=p6t(t,e-1,r);return[n,i]}function S6t(t,e,r){var n=(t[t.l++]&96)>>5;return t.l+=r.biff==2?6:r.biff==12?14:7,[n]}function une(t){var e=t[t.l+1]&1,r=1;return t.l+=4,[e,r]}function A6t(t,e,r){t.l+=2;for(var n=t.read_shift(r&&r.biff==2?1:2),i=[],s=0;s<=n;++s)i.push(t.read_shift(r&&r.biff==2?1:2));return i}function T6t(t,e,r){var n=t[t.l+1]&255?1:0;return t.l+=2,[n,t.read_shift(r&&r.biff==2?1:2)]}function k6t(t,e,r){var n=t[t.l+1]&255?1:0;return t.l+=2,[n,t.read_shift(r&&r.biff==2?1:2)]}function C6t(t){var e=t[t.l+1]&255?1:0;return t.l+=2,[e,t.read_shift(2)]}function I6t(t,e,r){var n=t[t.l+1]&255?1:0;return t.l+=r&&r.biff==2?3:4,[n]}function Y2e(t){var e=t.read_shift(1),r=t.read_shift(1);return[e,r]}function R6t(t){return t.read_shift(2),Y2e(t)}function P6t(t){return t.read_shift(2),Y2e(t)}function B6t(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var i=G2e(t,0,r);return[n,i]}function D6t(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var i=y6t(t,0,r);return[n,i]}function O6t(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var i=t.read_shift(2);r&&r.biff==5&&(t.l+=12);var s=G2e(t,0,r);return[n,i,s]}function N6t(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var i=t.read_shift(r&&r.biff<=3?1:2);return[Y8t[i],J2e[i],n]}function M6t(t,e,r){var n=t[t.l++],i=t.read_shift(1),s=r&&r.biff<=3?[n==88?-1:0,t.read_shift(1)]:L6t(t);return[i,(s[0]===0?J2e:G8t)[s[1]]]}function L6t(t){return[t[t.l+1]>>7,t.read_shift(2)&32767]}function F6t(t,e,r){t.l+=r&&r.biff==2?3:4}function $6t(t,e,r){if(t.l++,r&&r.biff==12)return[t.read_shift(4,"i"),0];var n=t.read_shift(2),i=t.read_shift(r&&r.biff==2?1:2);return[n,i]}function U6t(t){return t.l++,h0[t.read_shift(1)]}function V6t(t){return t.l++,t.read_shift(2)}function j6t(t){return t.l++,t.read_shift(1)!==0}function z6t(t){return t.l++,lo(t)}function q6t(t,e,r){return t.l++,e8(t,e-1,r)}function H6t(t,e){var r=[t.read_shift(1)];if(e==12)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2;break}switch(r[0]){case 4:r[1]=vs(t,1)?"TRUE":"FALSE",e!=12&&(t.l+=7);break;case 37:case 16:r[1]=h0[t[t.l]],t.l+=e==12?4:8;break;case 0:t.l+=8;break;case 1:r[1]=lo(t);break;case 2:r[1]=Jm(t,0,{biff:e>0&&e<8?2:e});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function W6t(t,e,r){for(var n=t.read_shift(r.biff==12?4:2),i=[],s=0;s!=n;++s)i.push((r.biff==12?Zm:jA)(t));return i}function K6t(t,e,r){var n=0,i=0;r.biff==12?(n=t.read_shift(4),i=t.read_shift(4)):(i=1+t.read_shift(1),n=1+t.read_shift(2)),r.biff>=2&&r.biff<8&&(--n,--i==0&&(i=256));for(var s=0,a=[];s!=n&&(a[s]=[]);++s)for(var o=0;o!=i;++o)a[s][o]=H6t(t,r.biff);return a}function G6t(t,e,r){var n=t.read_shift(1)>>>5&3,i=!r||r.biff>=8?4:2,s=t.read_shift(i);switch(r.biff){case 2:t.l+=5;break;case 3:case 4:t.l+=8;break;case 5:t.l+=12;break}return[n,0,s]}function Y6t(t,e,r){if(r.biff==5)return X6t(t);var n=t.read_shift(1)>>>5&3,i=t.read_shift(2),s=t.read_shift(4);return[n,i,s]}function X6t(t){var e=t.read_shift(1)>>>5&3,r=t.read_shift(2,"i");t.l+=8;var n=t.read_shift(2);return t.l+=12,[e,r,n]}function Z6t(t,e,r){var n=t.read_shift(1)>>>5&3;t.l+=r&&r.biff==2?3:4;var i=t.read_shift(r&&r.biff==2?1:2);return[n,i]}function J6t(t,e,r){var n=t.read_shift(1)>>>5&3,i=t.read_shift(r&&r.biff==2?1:2);return[n,i]}function Q6t(t,e,r){var n=t.read_shift(1)>>>5&3;return t.l+=4,r.biff<8&&t.l--,r.biff==12&&(t.l+=2),[n]}function e8t(t,e,r){var n=(t[t.l++]&96)>>5,i=t.read_shift(2),s=4;if(r)switch(r.biff){case 5:s=15;break;case 12:s=6;break}return t.l+=s,[n,i]}var t8t=vo,r8t=vo,n8t=vo;function r8(t,e,r){return t.l+=2,[m6t(t)]}function bj(t){return t.l+=6,[]}var i8t=r8,s8t=bj,a8t=bj,o8t=r8;function X2e(t){return t.l+=2,[bs(t),t.read_shift(2)&1]}var c8t=r8,l8t=X2e,u8t=bj,f8t=r8,h8t=r8,d8t=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function p8t(t){t.l+=2;var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(4),i=t.read_shift(2),s=t.read_shift(2),a=d8t[r>>2&31];return{ixti:e,coltype:r&3,rt:a,idx:n,c:i,C:s}}function g8t(t){return t.l+=2,[t.read_shift(4)]}function m8t(t,e,r){return t.l+=5,t.l+=2,t.l+=r.biff==2?1:4,["PTGSHEET"]}function y8t(t,e,r){return t.l+=r.biff==2?4:5,["PTGENDSHEET"]}function v8t(t){var e=t.read_shift(1)>>>5&3,r=t.read_shift(2);return[e,r]}function b8t(t){var e=t.read_shift(1)>>>5&3,r=t.read_shift(2);return[e,r]}function w8t(t){return t.l+=4,[0,0]}var fne={1:{n:"PtgExp",f:$6t},2:{n:"PtgTbl",f:n8t},3:{n:"PtgAdd",f:Ts},4:{n:"PtgSub",f:Ts},5:{n:"PtgMul",f:Ts},6:{n:"PtgDiv",f:Ts},7:{n:"PtgPower",f:Ts},8:{n:"PtgConcat",f:Ts},9:{n:"PtgLt",f:Ts},10:{n:"PtgLe",f:Ts},11:{n:"PtgEq",f:Ts},12:{n:"PtgGe",f:Ts},13:{n:"PtgGt",f:Ts},14:{n:"PtgNe",f:Ts},15:{n:"PtgIsect",f:Ts},16:{n:"PtgUnion",f:Ts},17:{n:"PtgRange",f:Ts},18:{n:"PtgUplus",f:Ts},19:{n:"PtgUminus",f:Ts},20:{n:"PtgPercent",f:Ts},21:{n:"PtgParen",f:Ts},22:{n:"PtgMissArg",f:Ts},23:{n:"PtgStr",f:q6t},26:{n:"PtgSheet",f:m8t},27:{n:"PtgEndSheet",f:y8t},28:{n:"PtgErr",f:U6t},29:{n:"PtgBool",f:j6t},30:{n:"PtgInt",f:V6t},31:{n:"PtgNum",f:z6t},32:{n:"PtgArray",f:S6t},33:{n:"PtgFunc",f:N6t},34:{n:"PtgFuncVar",f:M6t},35:{n:"PtgName",f:G6t},36:{n:"PtgRef",f:B6t},37:{n:"PtgArea",f:b6t},38:{n:"PtgMemArea",f:Z6t},39:{n:"PtgMemErr",f:t8t},40:{n:"PtgMemNoMem",f:r8t},41:{n:"PtgMemFunc",f:J6t},42:{n:"PtgRefErr",f:Q6t},43:{n:"PtgAreaErr",f:_6t},44:{n:"PtgRefN",f:D6t},45:{n:"PtgAreaN",f:E6t},46:{n:"PtgMemAreaN",f:v8t},47:{n:"PtgMemNoMemN",f:b8t},57:{n:"PtgNameX",f:Y6t},58:{n:"PtgRef3d",f:O6t},59:{n:"PtgArea3d",f:w6t},60:{n:"PtgRefErr3d",f:e8t},61:{n:"PtgAreaErr3d",f:x6t},255:{}},_8t={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},x8t={1:{n:"PtgElfLel",f:X2e},2:{n:"PtgElfRw",f:f8t},3:{n:"PtgElfCol",f:i8t},6:{n:"PtgElfRwV",f:h8t},7:{n:"PtgElfColV",f:o8t},10:{n:"PtgElfRadical",f:c8t},11:{n:"PtgElfRadicalS",f:u8t},13:{n:"PtgElfColS",f:s8t},15:{n:"PtgElfColSV",f:a8t},16:{n:"PtgElfRadicalLel",f:l8t},25:{n:"PtgList",f:p8t},29:{n:"PtgSxName",f:g8t},255:{}},E8t={0:{n:"PtgAttrNoop",f:w8t},1:{n:"PtgAttrSemi",f:I6t},2:{n:"PtgAttrIf",f:k6t},4:{n:"PtgAttrChoose",f:A6t},8:{n:"PtgAttrGoto",f:T6t},16:{n:"PtgAttrSum",f:F6t},32:{n:"PtgAttrBaxcel",f:une},33:{n:"PtgAttrBaxcel",f:une},64:{n:"PtgAttrSpace",f:R6t},65:{n:"PtgAttrSpaceSemi",f:P6t},128:{n:"PtgAttrIfError",f:C6t},255:{}};function n8(t,e,r,n){if(n.biff<8)return vo(t,e);for(var i=t.l+e,s=[],a=0;a!==r.length;++a)switch(r[a][0]){case"PtgArray":r[a][1]=K6t(t,0,n),s.push(r[a][1]);break;case"PtgMemArea":r[a][2]=W6t(t,r[a][1],n),s.push(r[a][2]);break;case"PtgExp":n&&n.biff==12&&(r[a][1][1]=t.read_shift(4),s.push(r[a][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[a][0]}return e=i-t.l,e!==0&&s.push(vo(t,e)),s}function i8(t,e,r){for(var n=t.l+e,i,s,a=[];n!=t.l;)e=n-t.l,s=t[t.l],i=fne[s]||fne[_8t[s]],(s===24||s===25)&&(i=(s===24?x8t:E8t)[t[t.l+1]]),!i||!i.f?vo(t,e):a.push([i.n,i.f(t,e,r)]);return a}function S8t(t){for(var e=[],r=0;r<t.length;++r){for(var n=t[r],i=[],s=0;s<n.length;++s){var a=n[s];if(a)switch(a[0]){case 2:i.push('"'+a[1].replace(/"/g,'""')+'"');break;default:i.push(a[1])}else i.push("")}e.push(i.join(","))}return e.join(";")}var A8t={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function T8t(t,e){var r=t.lastIndexOf("!"),n=e.lastIndexOf("!");return r==-1&&n==-1?t+":"+e:r>0&&n>0&&t.slice(0,r).toLowerCase()==e.slice(0,n).toLowerCase()?t+":"+e.slice(n+1):(console.error("Cannot hydrate range",t,e),t+":"+e)}function Z2e(t,e,r){if(!t)return"SH33TJSERR0";if(r.biff>8&&(!t.XTI||!t.XTI[e]))return t.SheetNames[e];if(!t.XTI)return"SH33TJSERR6";var n=t.XTI[e];if(r.biff<8)return e>1e4&&(e-=65536),e<0&&(e=-e),e==0?"":t.XTI[e-1];if(!n)return"SH33TJSERR1";var i="";if(r.biff>8)switch(t[n[0]][0]){case 357:return i=n[1]==-1?"#REF":t.SheetNames[n[1]],n[1]==n[2]?i:i+":"+t.SheetNames[n[2]];case 358:return r.SID!=null?t.SheetNames[r.SID]:"SH33TJSSAME"+t[n[0]][0];case 355:default:return"SH33TJSSRC"+t[n[0]][0]}switch(t[n[0]][0][0]){case 1025:return i=n[1]==-1?"#REF":t.SheetNames[n[1]]||"SH33TJSERR3",n[1]==n[2]?i:i+":"+t.SheetNames[n[2]];case 14849:return t[n[0]].slice(1).map(function(s){return s.Name}).join(";;");default:return t[n[0]][0][3]?(i=n[1]==-1?"#REF":t[n[0]][0][3][n[1]]||"SH33TJSERR4",n[1]==n[2]?i:i+":"+t[n[0]][0][3][n[2]]):"SH33TJSERR2"}}function hne(t,e,r){var n=Z2e(t,e,r);return n=="#REF"?n:T4(n,r)}function no(t,e,r,n,i){var s=i&&i.biff||8,a={s:{c:0,r:0},e:{c:0,r:0}},o=[],c,l,u,f=0,h=0,d,g="";if(!t[0]||!t[0][0])return"";for(var p=-1,m="",y=0,v=t[0].length;y<v;++y){var _=t[0][y];switch(_[0]){case"PtgUminus":o.push("-"+o.pop());break;case"PtgUplus":o.push("+"+o.pop());break;case"PtgPercent":o.push(o.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(c=o.pop(),l=o.pop(),p>=0){switch(t[0][p][1][0]){case 0:m=An(" ",t[0][p][1][1]);break;case 1:m=An("\r",t[0][p][1][1]);break;default:if(m="",i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][p][1][0])}l=l+m,p=-1}o.push(l+A8t[_[0]]+c);break;case"PtgIsect":c=o.pop(),l=o.pop(),o.push(l+" "+c);break;case"PtgUnion":c=o.pop(),l=o.pop(),o.push(l+","+c);break;case"PtgRange":c=o.pop(),l=o.pop(),o.push(T8t(l,c));break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":u=k3(_[1][1],a,i),o.push(C3(u,s));break;case"PtgRefN":u=r?k3(_[1][1],r,i):_[1][1],o.push(C3(u,s));break;case"PtgRef3d":f=_[1][1],u=k3(_[1][2],a,i),g=hne(n,f,i),o.push(g+"!"+C3(u,s));break;case"PtgFunc":case"PtgFuncVar":var x=_[1][0],A=_[1][1];x||(x=0),x&=127;var C=x==0?[]:o.slice(-x);o.length-=x,A==="User"&&(A=C.shift()),o.push(A+"("+C.join(",")+")");break;case"PtgBool":o.push(_[1]?"TRUE":"FALSE");break;case"PtgInt":o.push(_[1]);break;case"PtgNum":o.push(String(_[1]));break;case"PtgStr":o.push('"'+_[1].replace(/"/g,'""')+'"');break;case"PtgErr":o.push(_[1]);break;case"PtgAreaN":d=Vre(_[1][1],r?{s:r}:a,i),o.push(lB(d,i));break;case"PtgArea":d=Vre(_[1][1],a,i),o.push(lB(d,i));break;case"PtgArea3d":f=_[1][1],d=_[1][2],g=hne(n,f,i),o.push(g+"!"+lB(d,i));break;case"PtgAttrSum":o.push("SUM("+o.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":h=_[1][2];var R=(n.names||[])[h-1]||(n[0]||[])[h],M=R?R.Name:"SH33TJSNAME"+String(h);M&&M.slice(0,6)=="_xlfn."&&!i.xlfn&&(M=M.slice(6)),o.push(M);break;case"PtgNameX":var N=_[1][1];h=_[1][2];var Y;if(i.biff<=5)N<0&&(N=-N),n[N]&&(Y=n[N][h]);else{var H="";if(((n[N]||[])[0]||[])[0]==14849||(((n[N]||[])[0]||[])[0]==1025?n[N][h]&&n[N][h].itab>0&&(H=n.SheetNames[n[N][h].itab-1]+"!"):H=n.SheetNames[h-1]+"!"),n[N]&&n[N][h])H+=n[N][h].Name;else if(n[0]&&n[0][h])H+=n[0][h].Name;else{var E=(Z2e(n,N,i)||"").split(";;");E[h-1]?H=E[h-1]:H+="SH33TJSERRX"}o.push(H);break}Y||(Y={Name:"SH33TJSERRY"}),o.push(Y.Name);break;case"PtgParen":var k="(",w=")";if(p>=0){switch(m="",t[0][p][1][0]){case 2:k=An(" ",t[0][p][1][1])+k;break;case 3:k=An("\r",t[0][p][1][1])+k;break;case 4:w=An(" ",t[0][p][1][1])+w;break;case 5:w=An("\r",t[0][p][1][1])+w;break;default:if(i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][p][1][0])}p=-1}o.push(k+o.pop()+w);break;case"PtgRefErr":o.push("#REF!");break;case"PtgRefErr3d":o.push("#REF!");break;case"PtgExp":u={c:_[1][1],r:_[1][0]};var T={c:r.c,r:r.r};if(n.sharedf[en(u)]){var L=n.sharedf[en(u)];o.push(no(L,a,T,n,i))}else{var I=!1;for(c=0;c!=n.arrayf.length;++c)if(l=n.arrayf[c],!(u.c<l[0].s.c||u.c>l[0].e.c)&&!(u.r<l[0].s.r||u.r>l[0].e.r)){o.push(no(l[1],a,T,n,i)),I=!0;break}I||o.push(_[1])}break;case"PtgArray":o.push("{"+S8t(_[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":p=y;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":o.push("");break;case"PtgAreaErr":o.push("#REF!");break;case"PtgAreaErr3d":o.push("#REF!");break;case"PtgList":o.push("Table"+_[1].idx+"[#"+_[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(_));default:throw new Error("Unrecognized Formula Token: "+String(_))}var U=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(i.biff!=3&&p>=0&&U.indexOf(t[0][y][0])==-1){_=t[0][p];var O=!0;switch(_[1][0]){case 4:O=!1;case 0:m=An(" ",_[1][1]);break;case 5:O=!1;case 1:m=An("\r",_[1][1]);break;default:if(m="",i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+_[1][0])}o.push((O?m:"")+o.pop()+(O?"":m)),p=-1}}if(o.length>1&&i.WTF)throw new Error("bad formula stack");return o[0]=="TRUE"?!0:o[0]=="FALSE"?!1:o[0]}function k8t(t,e,r){var n=t.l+e,i=r.biff==2?1:2,s,a=t.read_shift(i);if(a==65535)return[[],vo(t,e-2)];var o=i8(t,a,r);return e!==a+i&&(s=n8(t,e-a-i,o,r)),t.l=n,[o,s]}function C8t(t,e,r){var n=t.l+e,i=r.biff==2?1:2,s,a=t.read_shift(i);if(a==65535)return[[],vo(t,e-2)];var o=i8(t,a,r);return e!==a+i&&(s=n8(t,e-a-i,o,r)),t.l=n,[o,s]}function I8t(t,e,r,n){var i=t.l+e,s=i8(t,n,r),a;return i!==t.l&&(a=n8(t,i-t.l,s,r)),[s,a]}function R8t(t,e,r){var n=t.l+e,i,s=t.read_shift(2),a=i8(t,s,r);return s==65535?[[],vo(t,e-2)]:(e!==s+2&&(i=n8(t,n-s-2,a,r)),[a,i])}function P8t(t){var e;if(Rd(t,t.l+6)!==65535)return[lo(t),"n"];switch(t[t.l]){case 0:return t.l+=8,["String","s"];case 1:return e=t[t.l+2]===1,t.l+=8,[e,"b"];case 2:return e=t[t.l+2],t.l+=8,[e,"e"];case 3:return t.l+=8,["","s"]}return[]}function B8t(t){if(t==null){var e=Ge(8);return e.write_shift(1,3),e.write_shift(1,0),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,65535),e}else if(typeof t=="number")return hm(t);return hm(0)}function pB(t,e,r){var n=t.l+e,i=Th(t);r.biff==2&&++t.l;var s=P8t(t),a=t.read_shift(1);r.biff!=2&&(t.read_shift(1),r.biff>=5&&t.read_shift(4));var o=C8t(t,n-t.l,r);return{cell:i,val:s[0],formula:o,shared:a>>3&1,tt:s[1]}}function D8t(t,e,r,n,i){var s=pm(e,r,i),a=B8t(t.v),o=Ge(6),c=33;o.write_shift(2,c),o.write_shift(4,0);for(var l=Ge(t.bf.length),u=0;u<t.bf.length;++u)l[u]=t.bf[u];var f=Ds([s,a,o,l]);return f}function qA(t,e,r){var n=t.read_shift(4),i=i8(t,n,r),s=t.read_shift(4),a=s>0?n8(t,s,i,r):null;return[i,a]}var O8t=qA,HA=qA,N8t=qA,M8t=qA;function dne(t){if((t|0)==t&&t<Math.pow(2,16)&&t>=0){var e=Ge(11);return e.write_shift(4,3),e.write_shift(1,30),e.write_shift(2,t),e.write_shift(4,0),e}var r=Ge(17);return r.write_shift(4,11),r.write_shift(1,31),r.write_shift(8,t),r.write_shift(4,0),r}function L8t(t){var e=Ge(10);return e.write_shift(4,2),e.write_shift(1,28),e.write_shift(1,t),e.write_shift(4,0),e}function F8t(t){var e=Ge(10);return e.write_shift(4,2),e.write_shift(1,29),e.write_shift(1,t?1:0),e.write_shift(4,0),e}function $8t(t){var e=Ge(7);e.write_shift(4,3+2*t.length),e.write_shift(1,23),e.write_shift(2,t.length);var r=Ge(2*t.length);r.write_shift(2*t.length,t,"utf16le");var n=Ge(4);return n.write_shift(4,0),Ds([e,r,n])}function U8t(t){var e=Hn(t),r=Ge(15);return r.write_shift(4,7),r.write_shift(1,36),r.write_shift(4,e.r),r.write_shift(2,e.c|(t.charAt(0)=="$"?0:1)<<14|(t.match(/\$\d/)?0:1)<<15),r.write_shift(4,0),r}function V8t(t,e){var r=t.lastIndexOf("!"),n=t.slice(0,r);t=t.slice(r+1);var i=Hn(t);n.charAt(0)=="'"&&(n=n.slice(1,-1).replace(/''/g,"'"));var s=Ge(17);return s.write_shift(4,9),s.write_shift(1,58),s.write_shift(2,2+e.SheetNames.map(function(a){return a.toLowerCase()}).indexOf(n.toLowerCase())),s.write_shift(4,i.r),s.write_shift(2,i.c|(t.charAt(0)=="$"?0:1)<<14|(t.match(/\$\d/)?0:1)<<15),s.write_shift(4,0),s}function j8t(t,e){var r=t.lastIndexOf("!"),n=t.slice(0,r);t=t.slice(r+1),n.charAt(0)=="'"&&(n=n.slice(1,-1).replace(/''/g,"'"));var i=Ge(17);return i.write_shift(4,9),i.write_shift(1,60),i.write_shift(2,2+e.SheetNames.map(function(s){return s.toLowerCase()}).indexOf(n.toLowerCase())),i.write_shift(4,0),i.write_shift(2,0),i.write_shift(4,0),i}function z8t(t){var e=t.split(":"),r=e[0],n=Ge(23);n.write_shift(4,15),r=e[0];var i=Hn(r);return n.write_shift(1,36),n.write_shift(4,i.r),n.write_shift(2,i.c|(r.charAt(0)=="$"?0:1)<<14|(r.match(/\$\d/)?0:1)<<15),n.write_shift(4,0),r=e[1],i=Hn(r),n.write_shift(1,36),n.write_shift(4,i.r),n.write_shift(2,i.c|(r.charAt(0)=="$"?0:1)<<14|(r.match(/\$\d/)?0:1)<<15),n.write_shift(4,0),n.write_shift(1,17),n.write_shift(4,0),n}function q8t(t,e){var r=t.lastIndexOf("!"),n=t.slice(0,r);t=t.slice(r+1),n.charAt(0)=="'"&&(n=n.slice(1,-1).replace(/''/g,"'"));var i=t.split(":");a=i[0];var s=Ge(27);s.write_shift(4,19);var a=i[0],o=Hn(a);return s.write_shift(1,58),s.write_shift(2,2+e.SheetNames.map(function(c){return c.toLowerCase()}).indexOf(n.toLowerCase())),s.write_shift(4,o.r),s.write_shift(2,o.c|(a.charAt(0)=="$"?0:1)<<14|(a.match(/\$\d/)?0:1)<<15),a=i[1],o=Hn(a),s.write_shift(1,58),s.write_shift(2,2+e.SheetNames.map(function(c){return c.toLowerCase()}).indexOf(n.toLowerCase())),s.write_shift(4,o.r),s.write_shift(2,o.c|(a.charAt(0)=="$"?0:1)<<14|(a.match(/\$\d/)?0:1)<<15),s.write_shift(1,17),s.write_shift(4,0),s}function H8t(t,e){var r=t.lastIndexOf("!"),n=t.slice(0,r);t=t.slice(r+1),n.charAt(0)=="'"&&(n=n.slice(1,-1).replace(/''/g,"'"));var i=Js(t),s=Ge(23);return s.write_shift(4,15),s.write_shift(1,59),s.write_shift(2,2+e.SheetNames.map(function(a){return a.toLowerCase()}).indexOf(n.toLowerCase())),s.write_shift(4,i.s.r),s.write_shift(4,i.e.r),s.write_shift(2,i.s.c),s.write_shift(2,i.e.c),s.write_shift(4,0),s}function W8t(t,e){if(typeof t=="number")return dne(t);if(typeof t=="boolean")return F8t(t);if(/^#(DIV\/0!|GETTING_DATA|N\/A|NAME\?|NULL!|NUM!|REF!|VALUE!)$/.test(t))return L8t(+lj[t]);if(t.match(/^\$?(?:[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D]|[A-Z]{1,2})\$?(?:10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})$/))return U8t(t);if(t.match(/^\$?(?:[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D]|[A-Z]{1,2})\$?(?:10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5}):\$?(?:[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D]|[A-Z]{1,2})\$?(?:10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})$/))return z8t(t);if(t.match(/^#REF!\$?(?:[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D]|[A-Z]{1,2})\$?(?:10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5}):\$?(?:[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D]|[A-Z]{1,2})\$?(?:10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})$/))return H8t(t,e);if(t.match(/^(?:'[^\\\/?*\[\]:]*'|[^'][^\\\/?*\[\]:'`~!@#$%^()\-=+{}|;,<.>]*)!\$?(?:[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D]|[A-Z]{1,2})\$?(?:10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})$/))return V8t(t,e);if(t.match(/^(?:'[^\\\/?*\[\]:]*'|[^'][^\\\/?*\[\]:'`~!@#$%^()\-=+{}|;,<.>]*)!\$?(?:[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D]|[A-Z]{1,2})\$?(?:10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5}):\$?(?:[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D]|[A-Z]{1,2})\$?(?:10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})$/))return q8t(t,e);if(/^(?:'[^\\\/?*\[\]:]*'|[^'][^\\\/?*\[\]:'`~!@#$%^()\-=+{}|;,<.>]*)!#REF!$/.test(t))return j8t(t,e);if(/^".*"$/.test(t))return $8t(t);if(/^[+-]\d+$/.test(t))return dne(parseInt(t,10));throw"Formula |"+t+"| not supported for XLSB"}var K8t=W8t,G8t={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},J2e={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},Y8t={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function pne(t){return t.slice(0,3)=="of:"&&(t=t.slice(3)),t.charCodeAt(0)==61&&(t=t.slice(1),t.charCodeAt(0)==61&&(t=t.slice(1))),t=t.replace(/COM\.MICROSOFT\./g,""),t=t.replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,function(e,r){return r.replace(/\./g,"")}),t=t.replace(/\$'([^']|'')+'/g,function(e){return e.slice(1)}),t=t.replace(/\$([^\]\. #$]+)/g,function(e,r){return r.match(/^([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])?(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})?$/)?e:r}),t=t.replace(/\[.(#[A-Z]*[?!])\]/g,"$1"),t.replace(/[;~]/g,",").replace(/\|/g,";")}function X8t(t){var e="of:="+t.replace(vj,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return e.replace(/;/g,"|").replace(/,/g,";")}function gB(t){t=t.replace(/\$'([^']|'')+'/g,function(n){return n.slice(1)}),t=t.replace(/\$([^\]\. #$]+)/g,function(n,i){return i.match(/^([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])?(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})?$/)?n:i});var e=t.split(":"),r=e[0].split(".")[0];return[r,e[0].split(".")[1]+(e.length>1?":"+(e[1].split(".")[1]||e[1].split(".")[0]):"")]}function Q2e(t){return t.replace(/!/,".")}var R3={},Cy={},P3=typeof Map<"u";function wj(t,e,r){var n=0,i=t.length;if(r){if(P3?r.has(e):Object.prototype.hasOwnProperty.call(r,e)){for(var s=P3?r.get(e):r[e];n<s.length;++n)if(t[s[n]].t===e)return t.Count++,s[n]}}else for(;n<i;++n)if(t[n].t===e)return t.Count++,n;return t[i]={t:e},t.Count++,t.Unique++,r&&(P3?(r.has(e)||r.set(e,[]),r.get(e).push(i)):(Object.prototype.hasOwnProperty.call(r,e)||(r[e]=[]),r[e].push(i))),i}function WA(t,e){var r={min:t+1,max:t+1},n=-1;return e.MDW&&(so=e.MDW),e.width!=null?r.customWidth=1:e.wpx!=null?n=P4(e.wpx):e.wch!=null&&(n=e.wch),n>-1?(r.width=GE(n),r.customWidth=1):e.width!=null&&(r.width=e.width),e.hidden&&(r.hidden=!0),e.level!=null&&(r.outlineLevel=r.level=e.level),r}function Lg(t,e){if(t){var r=[.7,.7,.75,.75,.3,.3];e=="xlml"&&(r=[1,1,1,1,.5,.5]),t.left==null&&(t.left=r[0]),t.right==null&&(t.right=r[1]),t.top==null&&(t.top=r[2]),t.bottom==null&&(t.bottom=r[3]),t.header==null&&(t.header=r[4]),t.footer==null&&(t.footer=r[5])}}function hp(t,e,r){var n=r.revssf[e.z!=null?e.z:"General"],i=60,s=t.length;if(n==null&&r.ssf){for(;i<392;++i)if(r.ssf[i]==null){P1(e.z,i),r.ssf[i]=e.z,r.revssf[e.z]=n=i;break}}for(i=0;i!=s;++i)if(t[i].numFmtId===n)return i;return t[s]={numFmtId:n,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},s}function eye(t,e,r,n,i,s){try{n.cellNF&&(t.z=tr[e])}catch(o){if(n.WTF)throw o}if(!(t.t==="z"&&!n.cellStyles)){if(t.t==="d"&&typeof t.v=="string"&&(t.v=Xi(t.v)),(!n||n.cellText!==!1)&&t.t!=="z")try{if(tr[e]==null&&P1(kyt[e]||"General",e),t.t==="e")t.w=t.w||h0[t.v];else if(e===0)if(t.t==="n")(t.v|0)===t.v?t.w=t.v.toString(10):t.w=x4(t.v);else if(t.t==="d"){var a=Ls(t.v);(a|0)===a?t.w=a.toString(10):t.w=x4(a)}else{if(t.v===void 0)return"";t.w=um(t.v,Cy)}else t.t==="d"?t.w=Cc(e,Ls(t.v),Cy):t.w=Cc(e,t.v,Cy)}catch(o){if(n.WTF)throw o}if(n.cellStyles&&r!=null)try{t.s=s.Fills[r],t.s.fgColor&&t.s.fgColor.theme&&!t.s.fgColor.rgb&&(t.s.fgColor.rgb=KE(i.themeElements.clrScheme[t.s.fgColor.theme].rgb,t.s.fgColor.tint||0),n.WTF&&(t.s.fgColor.raw_rgb=i.themeElements.clrScheme[t.s.fgColor.theme].rgb)),t.s.bgColor&&t.s.bgColor.theme&&(t.s.bgColor.rgb=KE(i.themeElements.clrScheme[t.s.bgColor.theme].rgb,t.s.bgColor.tint||0),n.WTF&&(t.s.bgColor.raw_rgb=i.themeElements.clrScheme[t.s.bgColor.theme].rgb))}catch(o){if(n.WTF&&s.Fills)throw o}}}function Z8t(t,e,r){if(t&&t["!ref"]){var n=pn(t["!ref"]);if(n.e.c<n.s.c||n.e.r<n.s.r)throw new Error("Bad range ("+r+"): "+t["!ref"])}}function J8t(t,e){var r=pn(e);r.s.r<=r.e.r&&r.s.c<=r.e.c&&r.s.r>=0&&r.s.c>=0&&(t["!ref"]=Ir(r))}var Q8t=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,e_t=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,t_t=/<(?:\w:)?hyperlink [^>]*>/mg,r_t=/"(\w*:\w*)"/,n_t=/<(?:\w:)?col\b[^>]*[\/]?>/g,i_t=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,s_t=/<(?:\w:)?pageMargins[^>]*\/>/g,tye=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,a_t=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,o_t=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function c_t(t,e,r,n,i,s,a){if(!t)return t;n||(n={"!id":{}});var o={};e.dense&&(o["!data"]=[]);var c={s:{r:2e6,c:2e6},e:{r:0,c:0}},l="",u="",f=t.match(e_t);f?(l=t.slice(0,f.index),u=t.slice(f.index+f[0].length)):l=u=t;var h=l.match(tye);h?_j(h[0],o,i,r):(h=l.match(a_t))&&u_t(h[0],h[1]||"",o,i,r);var d=(l.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(d>0){var g=l.slice(d,d+50).match(r_t);g&&!(e&&e.nodim)&&J8t(o,g[1])}var p=l.match(o_t);p&&p[1]&&E_t(p[1],i);var m=[];if(e.cellStyles){var y=l.match(n_t);y&&v_t(m,y)}f&&T_t(f[1],o,e,c,s,a);var v=u.match(i_t);v&&(o["!autofilter"]=w_t(v[0]));var _=[],x=u.match(Q8t);if(x)for(d=0;d!=x.length;++d)_[d]=pn(x[d].slice(x[d].indexOf('"')+1));var A=u.match(t_t);A&&g_t(o,A,n);var C=u.match(s_t);if(C&&(o["!margins"]=m_t(Lt(C[0]))),e&&e.nodim&&(c.s.c=c.s.r=0),!o["!ref"]&&c.e.c>=c.s.c&&c.e.r>=c.s.r&&(o["!ref"]=Ir(c)),e.sheetRows>0&&o["!ref"]){var R=pn(o["!ref"]);e.sheetRows<=+R.e.r&&(R.e.r=e.sheetRows-1,R.e.r>c.e.r&&(R.e.r=c.e.r),R.e.r<R.s.r&&(R.s.r=R.e.r),R.e.c>c.e.c&&(R.e.c=c.e.c),R.e.c<R.s.c&&(R.s.c=R.e.c),o["!fullref"]=o["!ref"],o["!ref"]=Ir(R))}return m.length>0&&(o["!cols"]=m),_.length>0&&(o["!merges"]=_),o}function l_t(t){if(t.length===0)return"";for(var e='<mergeCells count="'+t.length+'">',r=0;r!=t.length;++r)e+='<mergeCell ref="'+Ir(t[r])+'"/>';return e+"</mergeCells>"}function _j(t,e,r,n){var i=Lt(t);r.Sheets[n]||(r.Sheets[n]={}),i.codeName&&(r.Sheets[n].CodeName=yn(ni(i.codeName)))}function u_t(t,e,r,n,i){_j(t.slice(0,t.indexOf(">")),r,n,i)}function f_t(t,e,r,n,i){var s=!1,a={},o=null;if(n.bookType!=="xlsx"&&e.vbaraw){var c=e.SheetNames[r];try{e.Workbook&&(c=e.Workbook.Sheets[r].CodeName||c)}catch{}s=!0,a.codeName=Xf($r(c))}if(t&&t["!outline"]){var l={summaryBelow:1,summaryRight:1};t["!outline"].above&&(l.summaryBelow=0),t["!outline"].left&&(l.summaryRight=0),o=(o||"")+yt("outlinePr",null,l)}!s&&!o||(i[i.length]=yt("sheetPr",o,a))}var h_t=["objects","scenarios","selectLockedCells","selectUnlockedCells"],d_t=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function p_t(t){var e={sheet:1};return h_t.forEach(function(r){t[r]!=null&&t[r]&&(e[r]="1")}),d_t.forEach(function(r){t[r]!=null&&!t[r]&&(e[r]="0")}),t.password&&(e.password=gj(t.password).toString(16).toUpperCase()),yt("sheetProtection",null,e)}function g_t(t,e,r){for(var n=t["!data"]!=null,i=0;i!=e.length;++i){var s=Lt(ni(e[i]),!0);if(!s.ref)return;var a=((r||{})["!id"]||[])[s.id];a?(s.Target=a.Target,s.location&&(s.Target+="#"+yn(s.location))):(s.Target="#"+yn(s.location),a={Target:s.Target,TargetMode:"Internal"}),s.Rel=a,s.tooltip&&(s.Tooltip=s.tooltip,delete s.tooltip);for(var o=pn(s.ref),c=o.s.r;c<=o.e.r;++c)for(var l=o.s.c;l<=o.e.c;++l){var u=Hr(l)+hn(c);n?(t["!data"][c]||(t["!data"][c]=[]),t["!data"][c][l]||(t["!data"][c][l]={t:"z",v:void 0}),t["!data"][c][l].l=s):(t[u]||(t[u]={t:"z",v:void 0}),t[u].l=s)}}}function m_t(t){var e={};return["left","right","top","bottom","header","footer"].forEach(function(r){t[r]&&(e[r]=parseFloat(t[r]))}),e}function y_t(t){return Lg(t),yt("pageMargins",null,t)}function v_t(t,e){for(var r=!1,n=0;n!=e.length;++n){var i=Lt(e[n],!0);i.hidden&&(i.hidden=ei(i.hidden));var s=parseInt(i.min,10)-1,a=parseInt(i.max,10)-1;for(i.outlineLevel&&(i.level=+i.outlineLevel||0),delete i.min,delete i.max,i.width=+i.width,!r&&i.width&&(r=!0,mj(i.width)),j1(i);s<=a;)t[s++]=ii(i)}}function b_t(t,e){for(var r=["<cols>"],n,i=0;i!=e.length;++i)(n=e[i])&&(r[r.length]=yt("col",null,WA(i,n)));return r[r.length]="</cols>",r.join("")}function w_t(t){var e={ref:(t.match(/ref="([^"]*)"/)||[])[1]};return e}function __t(t,e,r,n){var i=typeof t.ref=="string"?t.ref:Ir(t.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var s=r.Workbook.Names,a=Js(i);a.s.r==a.e.r&&(a.e.r=Js(e["!ref"]).e.r,i=Ir(a));for(var o=0;o<s.length;++o){var c=s[o];if(c.Name=="_xlnm._FilterDatabase"&&c.Sheet==n){c.Ref=T4(r.SheetNames[n])+"!"+A4(i);break}}return o==s.length&&s.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+i}),yt("autoFilter",null,{ref:i})}var x_t=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/g;function E_t(t,e){e.Views||(e.Views=[{}]),(t.match(x_t)||[]).forEach(function(r,n){var i=Lt(r);e.Views[n]||(e.Views[n]={}),+i.zoomScale&&(e.Views[n].zoom=+i.zoomScale),i.rightToLeft&&ei(i.rightToLeft)&&(e.Views[n].RTL=!0)})}function S_t(t,e,r,n){var i={workbookViewId:"0"};return(((n||{}).Workbook||{}).Views||[])[0]&&(i.rightToLeft=n.Workbook.Views[0].RTL?"1":"0"),yt("sheetViews",yt("sheetView",null,i),{})}function A_t(t,e,r,n){if(t.c&&r["!comments"].push([e,t.c]),(t.v===void 0||t.t==="z"&&!(n||{}).sheetStubs)&&typeof t.f!="string"&&typeof t.z>"u")return"";var i="",s=t.t,a=t.v;if(t.t!=="z")switch(t.t){case"b":i=t.v?"1":"0";break;case"n":i=""+t.v;break;case"e":i=h0[t.v];break;case"d":n&&n.cellDates?i=Xi(t.v,-1).toISOString():(t=ii(t),t.t="n",i=""+(t.v=Ls(Xi(t.v)))),typeof t.z>"u"&&(t.z=tr[14]);break;default:i=t.v;break}var o=t.t=="z"||t.v==null?"":La("v",$r(i)),c={r:e},l=hp(n.cellXfs,t,n);switch(l!==0&&(c.s=l),t.t){case"n":break;case"d":c.t="d";break;case"b":c.t="b";break;case"e":c.t="e";break;case"z":break;default:if(t.v==null){delete t.t;break}if(t.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(n&&n.bookSST){o=La("v",""+wj(n.Strings,t.v,n.revStrings)),c.t="s";break}else c.t="str";break}if(t.t!=s&&(t.t=s,t.v=a),typeof t.f=="string"&&t.f){var u=t.F&&t.F.slice(0,e.length)==e?{t:"array",ref:t.F}:null;o=yt("f",$r(t.f),u)+(t.v!=null?o:"")}return t.l&&(t.l.display=$r(i),r["!links"].push([e,t.l])),t.D&&(c.cm=1),yt("c",o,c)}var T_t=function(){var t=/<(?:\w+:)?c[ \/>]/,e=/<\/(?:\w+:)?row>/,r=/r=["']([^"']*)["']/,n=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,i=/ref=["']([^"']*)["']/,s=E4("v"),a=E4("f");return function(c,l,u,f,h,d){for(var g=0,p="",m=[],y=[],v=0,_=0,x=0,A="",C,R,M=0,N=0,Y,H,E=0,k=0,w=Array.isArray(d.CellXf),T,L=[],I=[],U=l["!data"]!=null,O=[],D={},P=!1,B=!!u.sheetStubs,z=c.split(e),F=0,X=z.length;F!=X;++F){p=z[F].trim();var W=p.length;if(W!==0){var q=0;e:for(g=0;g<W;++g)switch(p[g]){case">":if(p[g-1]!="/"){++g;break e}if(u&&u.cellStyles){if(R=Lt(p.slice(q,g),!0),M=R.r!=null?parseInt(R.r,10):M+1,N=-1,u.sheetRows&&u.sheetRows<M)continue;D={},P=!1,R.ht&&(P=!0,D.hpt=parseFloat(R.ht),D.hpx=gv(D.hpt)),R.hidden&&ei(R.hidden)&&(P=!0,D.hidden=!0),R.outlineLevel!=null&&(P=!0,D.level=+R.outlineLevel),P&&(O[M-1]=D)}break;case"<":q=g;break}if(q>=g)break;if(R=Lt(p.slice(q,g),!0),M=R.r!=null?parseInt(R.r,10):M+1,N=-1,!(u.sheetRows&&u.sheetRows<M)){u.nodim||(f.s.r>M-1&&(f.s.r=M-1),f.e.r<M-1&&(f.e.r=M-1)),u&&u.cellStyles&&(D={},P=!1,R.ht&&(P=!0,D.hpt=parseFloat(R.ht),D.hpx=gv(D.hpt)),R.hidden&&ei(R.hidden)&&(P=!0,D.hidden=!0),R.outlineLevel!=null&&(P=!0,D.level=+R.outlineLevel),P&&(O[M-1]=D)),m=p.slice(g).split(t);for(var G=0;G!=m.length&&m[G].trim().charAt(0)=="<";++G);for(m=m.slice(G),g=0;g!=m.length;++g)if(p=m[g].trim(),p.length!==0){if(y=p.match(r),v=g,_=0,x=0,p="<c "+(p.slice(0,1)=="<"?">":"")+p,y!=null&&y.length===2){for(v=0,A=y[1],_=0;_!=A.length&&!((x=A.charCodeAt(_)-64)<1||x>26);++_)v=26*v+x;--v,N=v}else++N;for(_=0;_!=p.length&&p.charCodeAt(_)!==62;++_);if(++_,R=Lt(p.slice(0,_),!0),R.r||(R.r=en({r:M-1,c:N})),A=p.slice(_),C={t:""},(y=A.match(s))!=null&&y[1]!==""&&(C.v=yn(y[1])),u.cellFormula){if((y=A.match(a))!=null&&y[1]!==""){if(C.f=yn(ni(y[1]),!0),u.xlfn||(C.f=lne(C.f)),y[0].indexOf('t="array"')>-1)C.F=(A.match(i)||[])[1],C.F.indexOf(":")>-1&&L.push([pn(C.F),C.F]);else if(y[0].indexOf('t="shared"')>-1){H=Lt(y[0]);var ee=yn(ni(y[1]));u.xlfn||(ee=lne(ee)),I[parseInt(H.si,10)]=[H,ee,R.r]}}else(y=A.match(/<f[^>]*\/>/))&&(H=Lt(y[0]),I[H.si]&&(C.f=h6t(I[H.si][1],I[H.si][2],R.r)));var ae=Hn(R.r);for(_=0;_<L.length;++_)ae.r>=L[_][0].s.r&&ae.r<=L[_][0].e.r&&ae.c>=L[_][0].s.c&&ae.c<=L[_][0].e.c&&(C.F=L[_][1])}if(R.t==null&&C.v===void 0)if(C.f||C.F)C.v=0,C.t="n";else if(B)C.t="z";else continue;else C.t=R.t||"n";switch(f.s.c>N&&(f.s.c=N),f.e.c<N&&(f.e.c=N),C.t){case"n":if(C.v==""||C.v==null){if(!B)continue;C.t="z"}else C.v=parseFloat(C.v);break;case"s":if(typeof C.v>"u"){if(!B)continue;C.t="z"}else Y=R3[parseInt(C.v,10)],C.v=Y.t,C.r=Y.r,u.cellHTML&&(C.h=Y.h);break;case"str":C.t="s",C.v=C.v!=null?yn(ni(C.v),!0):"",u.cellHTML&&(C.h=YV(C.v));break;case"inlineStr":y=A.match(n),C.t="s",y!=null&&(Y=pj(y[1]))?(C.v=Y.t,u.cellHTML&&(C.h=Y.h)):C.v="";break;case"b":C.v=ei(C.v);break;case"d":u.cellDates?C.v=Xi(C.v,1):(C.v=Ls(Xi(C.v,1)),C.t="n");break;case"e":(!u||u.cellText!==!1)&&(C.w=C.v),C.v=lj[C.v];break}if(E=k=0,T=null,w&&R.s!==void 0&&(T=d.CellXf[R.s],T!=null&&(T.numFmtId!=null&&(E=T.numFmtId),u.cellStyles&&T.fillId!=null&&(k=T.fillId))),eye(C,E,k,u,h,d),u.cellDates&&w&&C.t=="n"&&up(tr[E])&&(C.t="d",C.v=$A(C.v)),R.cm&&u.xlmeta){var te=(u.xlmeta.Cell||[])[+R.cm-1];te&&te.type=="XLDAPR"&&(C.D=!0)}var K;u.nodim&&(K=Hn(R.r),f.s.r>K.r&&(f.s.r=K.r),f.e.r<K.r&&(f.e.r=K.r)),U?(K=Hn(R.r),l["!data"][K.r]||(l["!data"][K.r]=[]),l["!data"][K.r][K.c]=C):l[R.r]=C}}}}O.length>0&&(l["!rows"]=O)}}();function k_t(t,e,r,n){var i=[],s=[],a=pn(t["!ref"]),o="",c,l="",u=[],f=0,h=0,d=t["!rows"],g=t["!data"]!=null,p={r:l},m,y=-1;for(h=a.s.c;h<=a.e.c;++h)u[h]=Hr(h);for(f=a.s.r;f<=a.e.r;++f){for(s=[],l=hn(f),h=a.s.c;h<=a.e.c;++h){c=u[h]+l;var v=g?(t["!data"][f]||[])[h]:t[c];v!==void 0&&(o=A_t(v,c,t,e))!=null&&s.push(o)}(s.length>0||d&&d[f])&&(p={r:l},d&&d[f]&&(m=d[f],m.hidden&&(p.hidden=1),y=-1,m.hpx?y=B4(m.hpx):m.hpt&&(y=m.hpt),y>-1&&(p.ht=y,p.customHeight=1),m.level&&(p.outlineLevel=m.level)),i[i.length]=yt("row",s.join(""),p))}if(d)for(;f<d.length;++f)d&&d[f]&&(p={r:f+1},m=d[f],m.hidden&&(p.hidden=1),y=-1,m.hpx?y=B4(m.hpx):m.hpt&&(y=m.hpt),y>-1&&(p.ht=y,p.customHeight=1),m.level&&(p.outlineLevel=m.level),i[i.length]=yt("row","",p));return i.join("")}function C_t(t,e,r,n){var i=[As,yt("worksheet",null,{xmlns:Km[0],"xmlns:r":Ys.r})],s=r.SheetNames[t],a=0,o="",c=r.Sheets[s];c==null&&(c={});var l=c["!ref"]||"A1",u=pn(l);if(u.e.c>16383||u.e.r>1048575){if(e.WTF)throw new Error("Range "+l+" exceeds format limit A1:XFD1048576");u.e.c=Math.min(u.e.c,16383),u.e.r=Math.min(u.e.c,1048575),l=Ir(u)}n||(n={}),c["!comments"]=[];var f=[];f_t(c,r,t,e,i),i[i.length]=yt("dimension",null,{ref:l}),i[i.length]=S_t(c,e,t,r),e.sheetFormat&&(i[i.length]=yt("sheetFormatPr",null,{defaultRowHeight:e.sheetFormat.defaultRowHeight||"16",baseColWidth:e.sheetFormat.baseColWidth||"10",outlineLevelRow:e.sheetFormat.outlineLevelRow||"7"})),c["!cols"]!=null&&c["!cols"].length>0&&(i[i.length]=b_t(c,c["!cols"])),i[a=i.length]="<sheetData/>",c["!links"]=[],c["!ref"]!=null&&(o=k_t(c,e),o.length>0&&(i[i.length]=o)),i.length>a+1&&(i[i.length]="</sheetData>",i[a]=i[a].replace("/>",">")),c["!protect"]&&(i[i.length]=p_t(c["!protect"])),c["!autofilter"]!=null&&(i[i.length]=__t(c["!autofilter"],c,r,t)),c["!merges"]!=null&&c["!merges"].length>0&&(i[i.length]=l_t(c["!merges"]));var h=-1,d,g=-1;return c["!links"].length>0&&(i[i.length]="<hyperlinks>",c["!links"].forEach(function(p){p[1].Target&&(d={ref:p[0]},p[1].Target.charAt(0)!="#"&&(g=Zn(n,-1,$r(p[1].Target).replace(/#.*$/,""),nn.HLINK),d["r:id"]="rId"+g),(h=p[1].Target.indexOf("#"))>-1&&(d.location=$r(p[1].Target.slice(h+1))),p[1].Tooltip&&(d.tooltip=$r(p[1].Tooltip)),d.display=p[1].display,i[i.length]=yt("hyperlink",null,d))}),i[i.length]="</hyperlinks>"),delete c["!links"],c["!margins"]!=null&&(i[i.length]=y_t(c["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&(i[i.length]=La("ignoredErrors",yt("ignoredError",null,{numberStoredAsText:1,sqref:l}))),f.length>0&&(g=Zn(n,-1,"../drawings/drawing"+(t+1)+".xml",nn.DRAW),i[i.length]=yt("drawing",null,{"r:id":"rId"+g}),c["!drawing"]=f),c["!comments"].length>0&&(g=Zn(n,-1,"../drawings/vmlDrawing"+(t+1)+".vml",nn.VML),i[i.length]=yt("legacyDrawing",null,{"r:id":"rId"+g}),c["!legacy"]=g),i.length>1&&(i[i.length]="</worksheet>",i[1]=i[1].replace("/>",">")),i.join("")}function I_t(t,e){var r={},n=t.l+e;r.r=t.read_shift(4),t.l+=4;var i=t.read_shift(2);t.l+=1;var s=t.read_shift(1);return t.l=n,s&7&&(r.level=s&7),s&16&&(r.hidden=!0),s&32&&(r.hpt=i/20),r}function R_t(t,e,r){var n=Ge(145),i=(r["!rows"]||[])[t]||{};n.write_shift(4,t),n.write_shift(4,0);var s=320;i.hpx?s=B4(i.hpx)*20:i.hpt&&(s=i.hpt*20),n.write_shift(2,s),n.write_shift(1,0);var a=0;i.level&&(a|=i.level),i.hidden&&(a|=16),(i.hpx||i.hpt)&&(a|=32),n.write_shift(1,a),n.write_shift(1,0);var o=0,c=n.l;n.l+=4;for(var l={r:t,c:0},u=r["!data"]!=null,f=0;f<16;++f)if(!(e.s.c>f+1<<10||e.e.c<f<<10)){for(var h=-1,d=-1,g=f<<10;g<f+1<<10;++g){l.c=g;var p=u?(r["!data"][l.r]||[])[l.c]:r[en(l)];p&&(h<0&&(h=g),d=g)}h<0||(++o,n.write_shift(4,h),n.write_shift(4,d))}var m=n.l;return n.l=c,n.write_shift(4,o),n.l=m,n.length>n.l?n.slice(0,n.l):n}function P_t(t,e,r,n){var i=R_t(n,r,e);(i.length>17||(e["!rows"]||[])[n])&&tt(t,0,i)}var B_t=Zm,D_t=Tb;function O_t(){}function N_t(t,e){var r={},n=t[t.l];return++t.l,r.above=!(n&64),r.left=!(n&128),t.l+=18,r.name=bvt(t),r}function M_t(t,e,r){r==null&&(r=Ge(84+4*t.length));var n=192;e&&(e.above&&(n&=-65),e.left&&(n&=-129)),r.write_shift(1,n);for(var i=1;i<3;++i)r.write_shift(1,0);return qE({auto:1},r),r.write_shift(-4,-1),r.write_shift(-4,-1),i2e(t,r),r.slice(0,r.l)}function L_t(t){var e=Ql(t);return[e]}function F_t(t,e,r){return r==null&&(r=Ge(8)),Gm(e,r)}function $_t(t){var e=Ym(t);return[e]}function U_t(t,e,r){return r==null&&(r=Ge(4)),Xm(e,r)}function V_t(t){var e=Ql(t),r=t.read_shift(1);return[e,r,"b"]}function j_t(t,e,r){return r==null&&(r=Ge(9)),Gm(e,r),r.write_shift(1,t.v?1:0),r}function z_t(t){var e=Ym(t),r=t.read_shift(1);return[e,r,"b"]}function q_t(t,e,r){return r==null&&(r=Ge(5)),Xm(e,r),r.write_shift(1,t.v?1:0),r}function H_t(t){var e=Ql(t),r=t.read_shift(1);return[e,r,"e"]}function W_t(t,e,r){return r==null&&(r=Ge(9)),Gm(e,r),r.write_shift(1,t.v),r}function K_t(t){var e=Ym(t),r=t.read_shift(1);return[e,r,"e"]}function G_t(t,e,r){return r==null&&(r=Ge(8)),Xm(e,r),r.write_shift(1,t.v),r.write_shift(2,0),r.write_shift(1,0),r}function Y_t(t){var e=Ql(t),r=t.read_shift(4);return[e,r,"s"]}function X_t(t,e,r){return r==null&&(r=Ge(12)),Gm(e,r),r.write_shift(4,e.v),r}function Z_t(t){var e=Ym(t),r=t.read_shift(4);return[e,r,"s"]}function J_t(t,e,r){return r==null&&(r=Ge(8)),Xm(e,r),r.write_shift(4,e.v),r}function Q_t(t){var e=Ql(t),r=lo(t);return[e,r,"n"]}function e5t(t,e,r){return r==null&&(r=Ge(16)),Gm(e,r),hm(t.v,r),r}function rye(t){var e=Ym(t),r=lo(t);return[e,r,"n"]}function t5t(t,e,r){return r==null&&(r=Ge(12)),Xm(e,r),hm(t.v,r),r}function r5t(t){var e=Ql(t),r=oj(t);return[e,r,"n"]}function n5t(t,e,r){return r==null&&(r=Ge(12)),Gm(e,r),s2e(t.v,r),r}function i5t(t){var e=Ym(t),r=oj(t);return[e,r,"n"]}function s5t(t,e,r){return r==null&&(r=Ge(8)),Xm(e,r),s2e(t.v,r),r}function a5t(t){var e=Ql(t),r=ij(t);return[e,r,"is"]}function o5t(t){var e=Ql(t),r=ho(t);return[e,r,"str"]}function c5t(t,e,r){var n=t.v==null?"":String(t.v);return r==null&&(r=Ge(12+4*t.v.length)),Gm(e,r),Zs(n,r),r.length>r.l?r.slice(0,r.l):r}function l5t(t){var e=Ym(t),r=ho(t);return[e,r,"str"]}function u5t(t,e,r){var n=t.v==null?"":String(t.v);return r==null&&(r=Ge(8+4*n.length)),Xm(e,r),Zs(n,r),r.length>r.l?r.slice(0,r.l):r}function f5t(t,e,r){var n=t.l+e,i=Ql(t);i.r=r["!row"];var s=t.read_shift(1),a=[i,s,"b"];if(r.cellFormula){t.l+=2;var o=HA(t,n-t.l,r);a[3]=no(o,null,i,r.supbooks,r)}else t.l=n;return a}function h5t(t,e,r){var n=t.l+e,i=Ql(t);i.r=r["!row"];var s=t.read_shift(1),a=[i,s,"e"];if(r.cellFormula){t.l+=2;var o=HA(t,n-t.l,r);a[3]=no(o,null,i,r.supbooks,r)}else t.l=n;return a}function d5t(t,e,r){var n=t.l+e,i=Ql(t);i.r=r["!row"];var s=lo(t),a=[i,s,"n"];if(r.cellFormula){t.l+=2;var o=HA(t,n-t.l,r);a[3]=no(o,null,i,r.supbooks,r)}else t.l=n;return a}function p5t(t,e,r){var n=t.l+e,i=Ql(t);i.r=r["!row"];var s=ho(t),a=[i,s,"str"];if(r.cellFormula){t.l+=2;var o=HA(t,n-t.l,r);a[3]=no(o,null,i,r.supbooks,r)}else t.l=n;return a}var g5t=Zm,m5t=Tb;function y5t(t,e){return e==null&&(e=Ge(4)),e.write_shift(4,t),e}function v5t(t,e){var r=t.l+e,n=Zm(t),i=sj(t),s=ho(t),a=ho(t),o=ho(t);t.l=r;var c={rfx:n,relId:i,loc:s,display:o};return a&&(c.Tooltip=a),c}function b5t(t,e){var r=Ge(50+4*(t[1].Target.length+(t[1].Tooltip||"").length));Tb({s:Hn(t[0]),e:Hn(t[0])},r),aj("rId"+e,r);var n=t[1].Target.indexOf("#"),i=n==-1?"":t[1].Target.slice(n+1);return Zs(i||"",r),Zs(t[1].Tooltip||"",r),Zs("",r),r.slice(0,r.l)}function w5t(){}function _5t(t,e,r){var n=t.l+e,i=a2e(t),s=t.read_shift(1),a=[i];if(a[2]=s,r.cellFormula){var o=O8t(t,n-t.l,r);a[1]=o}else t.l=n;return a}function x5t(t,e,r){var n=t.l+e,i=Zm(t),s=[i];if(r.cellFormula){var a=M8t(t,n-t.l,r);s[1]=a,t.l=n}else t.l=n;return s}function E5t(t,e,r){r==null&&(r=Ge(18));var n=WA(t,e);r.write_shift(-4,t),r.write_shift(-4,t),r.write_shift(4,(n.width||10)*256),r.write_shift(4,0);var i=0;return e.hidden&&(i|=1),typeof n.width=="number"&&(i|=2),e.level&&(i|=e.level<<8),r.write_shift(2,i),r}var nye=["left","right","top","bottom","header","footer"];function S5t(t){var e={};return nye.forEach(function(r){e[r]=lo(t)}),e}function A5t(t,e){return e==null&&(e=Ge(6*8)),Lg(t),nye.forEach(function(r){hm(t[r],e)}),e}function T5t(t){var e=t.read_shift(2);return t.l+=28,{RTL:e&32}}function k5t(t,e,r){r==null&&(r=Ge(30));var n=924;return(((e||{}).Views||[])[0]||{}).RTL&&(n|=32),r.write_shift(2,n),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(2,0),r.write_shift(2,100),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(4,0),r}function C5t(t){var e=Ge(24);return e.write_shift(4,4),e.write_shift(4,1),Tb(t,e),e}function I5t(t,e){return e==null&&(e=Ge(16*4+2)),e.write_shift(2,t.password?gj(t.password):0),e.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(r){r[1]?e.write_shift(4,t[r[0]]!=null&&!t[r[0]]?1:0):e.write_shift(4,t[r[0]]!=null&&t[r[0]]?0:1)}),e}function R5t(){}function P5t(){}function B5t(t,e,r,n,i,s,a){if(!t)return t;var o=e||{};n||(n={"!id":{}});var c={};o.dense&&(c["!data"]=[]);var l,u={s:{r:2e6,c:2e6},e:{r:0,c:0}},f=!1,h=!1,d,g,p,m,y,v,_,x,A,C=[];o.biff=12,o["!row"]=0;var R=0,M=!1,N=[],Y={},H=o.supbooks||i.supbooks||[[]];if(H.sharedf=Y,H.arrayf=N,H.SheetNames=i.SheetNames||i.Sheets.map(function(U){return U.name}),!o.supbooks&&(o.supbooks=H,i.Names))for(var E=0;E<i.Names.length;++E)H[0][E+1]=i.Names[E];var k=[],w=[],T=!1;D4[16]={n:"BrtShortReal",f:rye};var L;if(f0(t,function(O,D,P){if(!h)switch(P){case 148:l=O;break;case 0:d=O,o.sheetRows&&o.sheetRows<=d.r&&(h=!0),x=hn(m=d.r),o["!row"]=d.r,(O.hidden||O.hpt||O.level!=null)&&(O.hpt&&(O.hpx=gv(O.hpt)),w[O.r]=O);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(g={t:O[2]},O[2]){case"n":g.v=O[1];break;case"s":_=R3[O[1]],g.v=_.t,g.r=_.r;break;case"b":g.v=!!O[1];break;case"e":g.v=O[1],o.cellText!==!1&&(g.w=h0[g.v]);break;case"str":g.t="s",g.v=O[1];break;case"is":g.t="s",g.v=O[1].t;break}if((p=a.CellXf[O[0].iStyleRef])&&eye(g,p.numFmtId,null,o,s,a),y=O[0].c==-1?y+1:O[0].c,o.dense?(c["!data"][m]||(c["!data"][m]=[]),c["!data"][m][y]=g):c[Hr(y)+x]=g,o.cellFormula){for(M=!1,R=0;R<N.length;++R){var B=N[R];d.r>=B[0].s.r&&d.r<=B[0].e.r&&y>=B[0].s.c&&y<=B[0].e.c&&(g.F=Ir(B[0]),M=!0)}!M&&O.length>3&&(g.f=O[3])}if(u.s.r>d.r&&(u.s.r=d.r),u.s.c>y&&(u.s.c=y),u.e.r<d.r&&(u.e.r=d.r),u.e.c<y&&(u.e.c=y),o.cellDates&&p&&g.t=="n"&&up(tr[p.numFmtId])){var z=b1(g.v);z&&(g.t="d",g.v=new Date(z.y,z.m-1,z.d,z.H,z.M,z.S,z.u))}L&&(L.type=="XLDAPR"&&(g.D=!0),L=void 0);break;case 1:case 12:if(!o.sheetStubs||f)break;g={t:"z",v:void 0},y=O[0].c==-1?y+1:O[0].c,o.dense?(c["!data"][m]||(c["!data"][m]=[]),c["!data"][m][y]=g):c[Hr(y)+x]=g,u.s.r>d.r&&(u.s.r=d.r),u.s.c>y&&(u.s.c=y),u.e.r<d.r&&(u.e.r=d.r),u.e.c<y&&(u.e.c=y),L&&(L.type=="XLDAPR"&&(g.D=!0),L=void 0);break;case 176:C.push(O);break;case 49:L=((o.xlmeta||{}).Cell||[])[O-1];break;case 494:var F=n["!id"][O.relId];for(F?(O.Target=F.Target,O.loc&&(O.Target+="#"+O.loc),O.Rel=F):O.relId==""&&(O.Target="#"+O.loc),m=O.rfx.s.r;m<=O.rfx.e.r;++m)for(y=O.rfx.s.c;y<=O.rfx.e.c;++y)o.dense?(c["!data"][m]||(c["!data"][m]=[]),c["!data"][m][y]||(c["!data"][m][y]={t:"z",v:void 0}),c["!data"][m][y].l=O):(v=Hr(y)+hn(m),c[v]||(c[v]={t:"z",v:void 0}),c[v].l=O);break;case 426:if(!o.cellFormula)break;N.push(O),A=o.dense?c["!data"][m][y]:c[Hr(y)+x],A.f=no(O[1],u,{r:d.r,c:y},H,o),A.F=Ir(O[0]);break;case 427:if(!o.cellFormula)break;Y[en(O[0].s)]=O[1],A=o.dense?c["!data"][m][y]:c[Hr(y)+x],A.f=no(O[1],u,{r:d.r,c:y},H,o);break;case 60:if(!o.cellStyles)break;for(;O.e>=O.s;)k[O.e--]={width:O.w/256,hidden:!!(O.flags&1),level:O.level},T||(T=!0,mj(O.w/256)),j1(k[O.e+1]);break;case 161:c["!autofilter"]={ref:Ir(O)};break;case 476:c["!margins"]=O;break;case 147:i.Sheets[r]||(i.Sheets[r]={}),O.name&&(i.Sheets[r].CodeName=O.name),(O.above||O.left)&&(c["!outline"]={above:O.above,left:O.left});break;case 137:i.Views||(i.Views=[{}]),i.Views[0]||(i.Views[0]={}),O.RTL&&(i.Views[0].RTL=!0);break;case 485:break;case 64:case 1053:break;case 151:break;case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:f=!0;break;case 36:f=!1;break;case 37:f=!0;break;case 38:f=!1;break;default:if(!D.T){if(!f||o.WTF)throw new Error("Unexpected record 0x"+P.toString(16))}}},o),delete o.supbooks,delete o["!row"],!c["!ref"]&&(u.s.r<2e6||l&&(l.e.r>0||l.e.c>0||l.s.r>0||l.s.c>0))&&(c["!ref"]=Ir(l||u)),o.sheetRows&&c["!ref"]){var I=pn(c["!ref"]);o.sheetRows<=+I.e.r&&(I.e.r=o.sheetRows-1,I.e.r>u.e.r&&(I.e.r=u.e.r),I.e.r<I.s.r&&(I.s.r=I.e.r),I.e.c>u.e.c&&(I.e.c=u.e.c),I.e.c<I.s.c&&(I.s.c=I.e.c),c["!fullref"]=c["!ref"],c["!ref"]=Ir(I))}return C.length>0&&(c["!merges"]=C),k.length>0&&(c["!cols"]=k),w.length>0&&(c["!rows"]=w),c}function D5t(t,e,r,n,i,s,a){var o={r,c:n};if(e.c&&s["!comments"].push([en(o),e.c]),e.v===void 0)return!1;var c="";switch(e.t){case"b":c=e.v?"1":"0";break;case"d":e=ii(e),e.z=e.z||tr[14],e.v=Ls(Xi(e.v)),e.t="n";break;case"n":case"e":c=""+e.v;break;default:c=e.v;break}switch(o.s=hp(i.cellXfs,e,i),e.l&&s["!links"].push([en(o),e.l]),e.t){case"s":case"str":return i.bookSST?(c=wj(i.Strings,e.v==null?"":String(e.v),i.revStrings),o.t="s",o.v=c,a?tt(t,18,J_t(e,o)):tt(t,7,X_t(e,o))):(o.t="str",a?tt(t,17,u5t(e,o)):tt(t,6,c5t(e,o))),!0;case"n":return e.v==(e.v|0)&&e.v>-1e3&&e.v<1e3?a?tt(t,13,s5t(e,o)):tt(t,2,n5t(e,o)):a?tt(t,16,t5t(e,o)):tt(t,5,e5t(e,o)),!0;case"b":return o.t="b",a?tt(t,15,q_t(e,o)):tt(t,4,j_t(e,o)),!0;case"e":return o.t="e",a?tt(t,14,G_t(e,o)):tt(t,3,W_t(e,o)),!0}return a?tt(t,12,U_t(e,o)):tt(t,1,F_t(e,o)),!0}function O5t(t,e,r,n){var i=pn(e["!ref"]||"A1"),s,a="",o=[];tt(t,145);var c=e["!data"]!=null,l=i.e.r;e["!rows"]&&(l=Math.max(i.e.r,e["!rows"].length-1));for(var u=i.s.r;u<=l;++u){a=hn(u),P_t(t,e,i,u);var f=!1;if(u<=i.e.r)for(var h=i.s.c;h<=i.e.c;++h){u===i.s.r&&(o[h]=Hr(h)),s=o[h]+a;var d=c?(e["!data"][u]||[])[h]:e[s];if(!d){f=!1;continue}f=D5t(t,d,u,h,n,e,f)}}tt(t,146)}function N5t(t,e){!e||!e["!merges"]||(tt(t,177,y5t(e["!merges"].length)),e["!merges"].forEach(function(r){tt(t,176,m5t(r))}),tt(t,178))}function M5t(t,e){!e||!e["!cols"]||(tt(t,390),e["!cols"].forEach(function(r,n){r&&tt(t,60,E5t(n,r))}),tt(t,391))}function L5t(t,e){!e||!e["!ref"]||(tt(t,648),tt(t,649,C5t(pn(e["!ref"]))),tt(t,650))}function F5t(t,e,r){e["!links"].forEach(function(n){if(n[1].Target){var i=Zn(r,-1,n[1].Target.replace(/#.*$/,""),nn.HLINK);tt(t,494,b5t(n,i))}}),delete e["!links"]}function $5t(t,e,r,n){if(e["!comments"].length>0){var i=Zn(n,-1,"../drawings/vmlDrawing"+(r+1)+".vml",nn.VML);tt(t,551,aj("rId"+i)),e["!legacy"]=i}}function U5t(t,e,r,n){if(e["!autofilter"]){var i=e["!autofilter"],s=typeof i.ref=="string"?i.ref:Ir(i.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var a=r.Workbook.Names,o=Js(s);o.s.r==o.e.r&&(o.e.r=Js(e["!ref"]).e.r,s=Ir(o));for(var c=0;c<a.length;++c){var l=a[c];if(l.Name=="_xlnm._FilterDatabase"&&l.Sheet==n){l.Ref=T4(r.SheetNames[n])+"!"+A4(s);break}}c==a.length&&a.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:T4(r.SheetNames[n])+"!"+A4(s)}),tt(t,161,Tb(pn(s))),tt(t,162)}}function V5t(t,e,r){tt(t,133),tt(t,137,k5t(e,r)),tt(t,138),tt(t,134)}function j5t(t,e){e["!protect"]&&tt(t,535,I5t(e["!protect"]))}function z5t(t,e,r,n){var i=Ac(),s=r.SheetNames[t],a=r.Sheets[s]||{},o=s;try{r&&r.Workbook&&(o=r.Workbook.Sheets[t].CodeName||o)}catch{}var c=pn(a["!ref"]||"A1");if(c.e.c>16383||c.e.r>1048575){if(e.WTF)throw new Error("Range "+(a["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");c.e.c=Math.min(c.e.c,16383),c.e.r=Math.min(c.e.c,1048575)}return a["!links"]=[],a["!comments"]=[],tt(i,129),(r.vbaraw||a["!outline"])&&tt(i,147,M_t(o,a["!outline"])),tt(i,148,D_t(c)),V5t(i,a,r.Workbook),M5t(i,a),O5t(i,a,t,e),j5t(i,a),U5t(i,a,r,t),N5t(i,a),F5t(i,a,n),a["!margins"]&&tt(i,476,A5t(a["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&L5t(i,a),$5t(i,a,t,n),tt(i,130),i.end()}function q5t(t){var e=[],r=t.match(/^<c:numCache>/),n;(t.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/mg)||[]).forEach(function(s){var a=s.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);a&&(e[+a[1]]=r?+a[2]:a[2])});var i=yn((t.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(t.match(/<c:f>(.*?)<\/c:f>/mg)||[]).forEach(function(s){n=s.replace(/<.*?>/g,"")}),[e,i,n]}function H5t(t,e,r,n,i,s){var a=s||{"!type":"chart"};if(!t)return s;var o=0,c=0,l="A",u={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(t.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach(function(f){var h=q5t(f);u.s.r=u.s.c=0,u.e.c=o,l=Hr(o),h[0].forEach(function(d,g){a["!data"]?(a["!data"][g]||(a["!data"][g]=[]),a["!data"][g][o]={t:"n",v:d,z:h[1]}):a[l+hn(g)]={t:"n",v:d,z:h[1]},c=g}),u.e.r<c&&(u.e.r=c),++o}),o>0&&(a["!ref"]=Ir(u)),a}function W5t(t,e,r,n,i){if(!t)return t;n||(n={"!id":{}});var s={"!type":"chart","!drawel":null,"!rel":""},a,o=t.match(tye);return o&&_j(o[0],s,i,r),(a=t.match(/drawing r:id="(.*?)"/))&&(s["!rel"]=a[1]),n["!id"][s["!rel"]]&&(s["!drawel"]=n["!id"][s["!rel"]]),s}function K5t(t,e){t.l+=10;var r=ho(t);return{name:r}}function G5t(t,e,r,n,i){if(!t)return t;n||(n={"!id":{}});var s={"!type":"chart","!drawel":null,"!rel":""},a=!1;return f0(t,function(c,l,u){switch(u){case 550:s["!rel"]=c;break;case 651:i.Sheets[r]||(i.Sheets[r]={}),c.name&&(i.Sheets[r].CodeName=c.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:a=!0;break;case 36:a=!1;break;case 37:break;case 38:break;default:if(!(l.T>0)){if(!(l.T<0)){if(!a||e.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}}},e),n["!id"][s["!rel"]]&&(s["!drawel"]=n["!id"][s["!rel"]]),s}var xj=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],Y5t=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],X5t=[],Z5t=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function gne(t,e){for(var r=0;r!=t.length;++r)for(var n=t[r],i=0;i!=e.length;++i){var s=e[i];if(n[s[0]]==null)n[s[0]]=s[1];else switch(s[2]){case"bool":typeof n[s[0]]=="string"&&(n[s[0]]=ei(n[s[0]]));break;case"int":typeof n[s[0]]=="string"&&(n[s[0]]=parseInt(n[s[0]],10));break}}}function mne(t,e){for(var r=0;r!=e.length;++r){var n=e[r];if(t[n[0]]==null)t[n[0]]=n[1];else switch(n[2]){case"bool":typeof t[n[0]]=="string"&&(t[n[0]]=ei(t[n[0]]));break;case"int":typeof t[n[0]]=="string"&&(t[n[0]]=parseInt(t[n[0]],10));break}}}function iye(t){mne(t.WBProps,xj),mne(t.CalcPr,Z5t),gne(t.WBView,Y5t),gne(t.Sheets,X5t),Cy.date1904=ei(t.WBProps.date1904)}function J5t(t){return!t.Workbook||!t.Workbook.WBProps?"false":ei(t.Workbook.WBProps.date1904)?"true":"false"}var Q5t=":][*?/\\".split("");function sye(t,e){if(t.length>31)throw new Error("Sheet names cannot exceed 31 chars");var r=!0;return Q5t.forEach(function(n){if(t.indexOf(n)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),r}function ext(t,e,r){t.forEach(function(n,i){sye(n);for(var s=0;s<i;++s)if(n==t[s])throw new Error("Duplicate Sheet Name: "+n);if(r){var a=e&&e[i]&&e[i].CodeName||n;if(a.charCodeAt(0)==95&&a.length>22)throw new Error("Bad Code Name: Worksheet"+a)}})}function aye(t){if(!t||!t.SheetNames||!t.Sheets)throw new Error("Invalid Workbook");if(!t.SheetNames.length)throw new Error("Workbook is empty");var e=t.Workbook&&t.Workbook.Sheets||[];ext(t.SheetNames,e,!!t.vbaraw);for(var r=0;r<t.SheetNames.length;++r)Z8t(t.Sheets[t.SheetNames[r]],t.SheetNames[r],r);t.SheetNames.forEach(function(n,i){var s=t.Sheets[n];if(!(!s||!s["!autofilter"])){var a;t.Workbook||(t.Workbook={}),t.Workbook.Names||(t.Workbook.Names=[]),t.Workbook.Names.forEach(function(c){c.Name=="_xlnm._FilterDatabase"&&c.Sheet==i&&(a=c)});var o=T4(n)+"!"+A4(s["!autofilter"].ref);a?a.Ref=o:t.Workbook.Names.push({Name:"_xlnm._FilterDatabase",Sheet:i,Ref:o})}})}var txt=/<\w+:workbook/;function rxt(t,e){if(!t)throw new Error("Could not find file");var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},n=!1,i="xmlns",s={},a=0;if(t.replace(wo,function(c,l){var u=Lt(c);switch(af(u[0])){case"<?xml":break;case"<workbook":c.match(txt)&&(i="xmlns"+c.match(/<(\w+):/)[1]),r.xmlns=u[i];break;case"</workbook>":break;case"<fileVersion":delete u[0],r.AppVersion=u;break;case"<fileVersion/>":case"</fileVersion>":break;case"<fileSharing":break;case"<fileSharing/>":break;case"<workbookPr":case"<workbookPr/>":xj.forEach(function(f){if(u[f[0]]!=null)switch(f[2]){case"bool":r.WBProps[f[0]]=ei(u[f[0]]);break;case"int":r.WBProps[f[0]]=parseInt(u[f[0]],10);break;default:r.WBProps[f[0]]=u[f[0]]}}),u.codeName&&(r.WBProps.CodeName=ni(u.codeName));break;case"</workbookPr>":break;case"<workbookProtection":break;case"<workbookProtection/>":break;case"<bookViews":case"<bookViews>":case"</bookViews>":break;case"<workbookView":case"<workbookView/>":delete u[0],r.WBView.push(u);break;case"</workbookView>":break;case"<sheets":case"<sheets>":case"</sheets>":break;case"<sheet":switch(u.state){case"hidden":u.Hidden=1;break;case"veryHidden":u.Hidden=2;break;default:u.Hidden=0}delete u.state,u.name=yn(ni(u.name)),delete u[0],r.Sheets.push(u);break;case"</sheet>":break;case"<functionGroups":case"<functionGroups/>":break;case"<functionGroup":break;case"<externalReferences":case"</externalReferences>":case"<externalReferences>":break;case"<externalReference":break;case"<definedNames/>":break;case"<definedNames>":case"<definedNames":n=!0;break;case"</definedNames>":n=!1;break;case"<definedName":s={},s.Name=ni(u.name),u.comment&&(s.Comment=u.comment),u.localSheetId&&(s.Sheet=+u.localSheetId),ei(u.hidden||"0")&&(s.Hidden=!0),a=l+c.length;break;case"</definedName>":s.Ref=yn(ni(t.slice(a,l))),r.Names.push(s);break;case"<definedName/>":break;case"<calcPr":delete u[0],r.CalcPr=u;break;case"<calcPr/>":delete u[0],r.CalcPr=u;break;case"</calcPr>":break;case"<oleSize":break;case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":break;case"<customWorkbookView":case"</customWorkbookView>":break;case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":break;case"<pivotCache":break;case"<smartTagPr":case"<smartTagPr/>":break;case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":break;case"<smartTagType":break;case"<webPublishing":case"<webPublishing/>":break;case"<fileRecoveryPr":case"<fileRecoveryPr/>":break;case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":break;case"<webPublishObject":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;case"<ArchID":break;case"<AlternateContent":case"<AlternateContent>":n=!0;break;case"</AlternateContent>":n=!1;break;case"<revisionPtr":break;default:if(!n&&e.WTF)throw new Error("unrecognized "+u[0]+" in workbook")}return c}),Km.indexOf(r.xmlns)===-1)throw new Error("Unknown Namespace: "+r.xmlns);return iye(r),r}function nxt(t){var e=[As];e[e.length]=yt("workbook",null,{xmlns:Km[0],"xmlns:r":Ys.r});var r=t.Workbook&&(t.Workbook.Names||[]).length>0,n={codeName:"ThisWorkbook"};t.Workbook&&t.Workbook.WBProps&&(xj.forEach(function(o){t.Workbook.WBProps[o[0]]!=null&&t.Workbook.WBProps[o[0]]!=o[1]&&(n[o[0]]=t.Workbook.WBProps[o[0]])}),t.Workbook.WBProps.CodeName&&(n.codeName=t.Workbook.WBProps.CodeName,delete n.CodeName)),e[e.length]=yt("workbookPr",null,n);var i=t.Workbook&&t.Workbook.Sheets||[],s=0;if(i&&i[0]&&i[0].Hidden){for(e[e.length]="<bookViews>",s=0;s!=t.SheetNames.length&&!(!i[s]||!i[s].Hidden);++s);s==t.SheetNames.length&&(s=0),e[e.length]='<workbookView firstSheet="'+s+'" activeTab="'+s+'"/>',e[e.length]="</bookViews>"}for(e[e.length]="<sheets>",s=0;s!=t.SheetNames.length;++s){var a={name:$r(t.SheetNames[s].slice(0,31))};if(a.sheetId=""+(s+1),a["r:id"]="rId"+(s+1),i[s])switch(i[s].Hidden){case 1:a.state="hidden";break;case 2:a.state="veryHidden";break}e[e.length]=yt("sheet",null,a)}return e[e.length]="</sheets>",r&&(e[e.length]="<definedNames>",t.Workbook&&t.Workbook.Names&&t.Workbook.Names.forEach(function(o){var c={name:o.Name};o.Comment&&(c.comment=o.Comment),o.Sheet!=null&&(c.localSheetId=""+o.Sheet),o.Hidden&&(c.hidden="1"),o.Ref&&(e[e.length]=yt("definedName",$r(o.Ref),c))}),e[e.length]="</definedNames>"),e.length>2&&(e[e.length]="</workbook>",e[1]=e[1].replace("/>",">")),e.join("")}function ixt(t,e){var r={};return r.Hidden=t.read_shift(4),r.iTabID=t.read_shift(4),r.strRelID=qN(t),r.name=ho(t),r}function sxt(t,e){return e||(e=Ge(127)),e.write_shift(4,t.Hidden),e.write_shift(4,t.iTabID),aj(t.strRelID,e),Zs(t.name.slice(0,31),e),e.length>e.l?e.slice(0,e.l):e}function axt(t,e){var r={},n=t.read_shift(4);r.defaultThemeVersion=t.read_shift(4);var i=e>8?ho(t):"";return i.length>0&&(r.CodeName=i),r.autoCompressPictures=!!(n&65536),r.backupFile=!!(n&64),r.checkCompatibility=!!(n&4096),r.date1904=!!(n&1),r.filterPrivacy=!!(n&8),r.hidePivotFieldList=!!(n&1024),r.promptedSolutions=!!(n&16),r.publishItems=!!(n&2048),r.refreshAllConnections=!!(n&262144),r.saveExternalLinkValues=!!(n&128),r.showBorderUnselectedTables=!!(n&4),r.showInkAnnotation=!!(n&32),r.showObjects=["all","placeholders","none"][n>>13&3],r.showPivotChartFilter=!!(n&32768),r.updateLinks=["userSet","never","always"][n>>8&3],r}function oxt(t,e){e||(e=Ge(72));var r=0;return t&&(t.date1904&&(r|=1),t.filterPrivacy&&(r|=8)),e.write_shift(4,r),e.write_shift(4,0),i2e(t&&t.CodeName||"ThisWorkbook",e),e.slice(0,e.l)}function cxt(t,e){var r={};return t.read_shift(4),r.ArchID=t.read_shift(4),t.l+=e-8,r}function lxt(t,e,r){var n=t.l+e,i=t.read_shift(4);t.l+=1;var s=t.read_shift(4),a=wvt(t),o=N8t(t,0,r),c=sj(t);i&32&&(a="_xlnm."+a),t.l=n;var l={Name:a,Ptg:o,Flags:i};return s<268435455&&(l.Sheet=s),c&&(l.Comment=c),l}function uxt(t,e){var r=Ge(9),n=0,i=t.Name;uj.indexOf(i)>-1&&(n|=32,i=i.slice(6)),r.write_shift(4,n),r.write_shift(1,0),r.write_shift(4,t.Sheet==null?4294967295:t.Sheet);var s=[r,Zs(i),K8t(t.Ref,e)];if(t.Comment)s.push(k4(t.Comment));else{var a=Ge(4);a.write_shift(4,4294967295),s.push(a)}return Ds(s)}function fxt(t,e){var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},n=[],i=!1;e||(e={}),e.biff=12;var s=[],a=[[]];return a.SheetNames=[],a.XTI=[],D4[16]={n:"BrtFRTArchID$",f:cxt},f0(t,function(c,l,u){switch(u){case 156:a.SheetNames.push(c.name),r.Sheets.push(c);break;case 153:r.WBProps=c;break;case 39:c.Sheet!=null&&(e.SID=c.Sheet),c.Ref=no(c.Ptg,null,null,a,e),delete e.SID,delete c.Ptg,s.push(c);break;case 1036:break;case 357:case 358:case 355:case 667:a[0].length?a.push([u,c]):a[0]=[u,c],a[a.length-1].XTI=[];break;case 362:a.length===0&&(a[0]=[],a[0].XTI=[]),a[a.length-1].XTI=a[a.length-1].XTI.concat(c),a.XTI=a.XTI.concat(c);break;case 361:break;case 2071:case 158:case 143:case 664:case 353:break;case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:break;case 35:n.push(u),i=!0;break;case 36:n.pop(),i=!1;break;case 37:n.push(u),i=!0;break;case 38:n.pop(),i=!1;break;case 16:break;default:if(!l.T){if(!i||e.WTF&&n[n.length-1]!=37&&n[n.length-1]!=35)throw new Error("Unexpected record 0x"+u.toString(16))}}},e),iye(r),r.Names=s,r.supbooks=a,r}function hxt(t,e){tt(t,143);for(var r=0;r!=e.SheetNames.length;++r){var n=e.Workbook&&e.Workbook.Sheets&&e.Workbook.Sheets[r]&&e.Workbook.Sheets[r].Hidden||0,i={Hidden:n,iTabID:r+1,strRelID:"rId"+(r+1),name:e.SheetNames[r]};tt(t,156,sxt(i))}tt(t,144)}function dxt(t,e){e||(e=Ge(127));for(var r=0;r!=4;++r)e.write_shift(4,0);return Zs("SheetJS",e),Zs(ME.version,e),Zs(ME.version,e),Zs("7262",e),e.length>e.l?e.slice(0,e.l):e}function pxt(t,e){e||(e=Ge(29)),e.write_shift(-4,0),e.write_shift(-4,460),e.write_shift(4,28800),e.write_shift(4,17600),e.write_shift(4,500),e.write_shift(4,t),e.write_shift(4,t);var r=120;return e.write_shift(1,r),e.length>e.l?e.slice(0,e.l):e}function gxt(t,e){if(!(!e.Workbook||!e.Workbook.Sheets)){for(var r=e.Workbook.Sheets,n=0,i=-1,s=-1;n<r.length;++n)!r[n]||!r[n].Hidden&&i==-1?i=n:r[n].Hidden==1&&s==-1&&(s=n);s>i||(tt(t,135),tt(t,158,pxt(i)),tt(t,136))}}function mxt(t,e){!e.Workbook||!e.Workbook.Names||e.Workbook.Names.forEach(function(r){try{if(r.Flags&14)return;tt(t,39,uxt(r,e))}catch{console.error("Could not serialize defined name "+JSON.stringify(r))}})}function yxt(t){var e=t.SheetNames.length,r=Ge(12*e+28);r.write_shift(4,e+2),r.write_shift(4,0),r.write_shift(4,-2),r.write_shift(4,-2),r.write_shift(4,0),r.write_shift(4,-1),r.write_shift(4,-1);for(var n=0;n<e;++n)r.write_shift(4,0),r.write_shift(4,n),r.write_shift(4,n);return r}function vxt(t,e){tt(t,353),tt(t,357),tt(t,362,yxt(e)),tt(t,354)}function bxt(t,e){var r=Ac();return tt(r,131),tt(r,128,dxt()),tt(r,153,oxt(t.Workbook&&t.Workbook.WBProps||null)),gxt(r,t),hxt(r,t),vxt(r,t),(t.Workbook||{}).Names&&mxt(r,t),tt(r,132),r.end()}function wxt(t,e,r){return e.slice(-4)===".bin"?fxt(t,r):rxt(t,r)}function _xt(t,e,r,n,i,s,a,o){return e.slice(-4)===".bin"?B5t(t,n,r,i,s,a,o):c_t(t,n,r,i,s,a,o)}function xxt(t,e,r,n,i,s,a,o){return e.slice(-4)===".bin"?G5t(t,n,r,i,s):W5t(t,n,r,i,s)}function Ext(t,e,r,n,i,s,a,o){return e.slice(-4)===".bin"?u6t():f6t()}function Sxt(t,e,r,n,i,s,a,o){return e.slice(-4)===".bin"?c6t():l6t()}function Axt(t,e,r,n){return e.slice(-4)===".bin"?t4t(t,r,n):j3t(t,r,n)}function Txt(t,e,r){return e.slice(-4)===".bin"?i3t(t,r):e3t(t,r)}function kxt(t,e,r){return e.slice(-4)===".bin"?r6t(t,r):W4t(t,r)}function Cxt(t,e,r){return e.slice(-4)===".bin"?j4t(t):U4t(t)}function Ixt(t,e,r,n){return r.slice(-4)===".bin"?z4t(t,e,r,n):void 0}function Rxt(t,e,r){return e.slice(-4)===".bin"?M4t(t,e,r):F4t(t,e,r)}var oye=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,cye=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function uu(t,e){var r=t.split(/\s+/),n=[];if(n[0]=r[0],r.length===1)return n;var i=t.match(oye),s,a,o,c;if(i)for(c=0;c!=i.length;++c)s=i[c].match(cye),(a=s[1].indexOf(":"))===-1?n[s[1]]=s[2].slice(1,s[2].length-1):(s[1].slice(0,6)==="xmlns:"?o="xmlns"+s[1].slice(6):o=s[1].slice(a+1),n[o]=s[2].slice(1,s[2].length-1));return n}function Pxt(t){var e=t.split(/\s+/),r={};if(e.length===1)return r;var n=t.match(oye),i,s,a,o;if(n)for(o=0;o!=n.length;++o)i=n[o].match(cye),(s=i[1].indexOf(":"))===-1?r[i[1]]=i[2].slice(1,i[2].length-1):(i[1].slice(0,6)==="xmlns:"?a="xmlns"+i[1].slice(6):a=i[1].slice(s+1),r[a]=i[2].slice(1,i[2].length-1));return r}var B3;function Bxt(t,e){var r=B3[t]||yn(t);return r==="General"?um(e):Cc(r,e)}function Dxt(t,e,r,n){var i=n;switch((r[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":i=ei(n);break;case"i2":case"int":i=parseInt(n,10);break;case"r4":case"float":i=parseFloat(n);break;case"date":case"dateTime.tz":i=Xi(n);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+r[0])}t[yn(e)]=i}function Oxt(t,e,r){if(t.t!=="z"){if(!r||r.cellText!==!1)try{t.t==="e"?t.w=t.w||h0[t.v]:e==="General"?t.t==="n"?(t.v|0)===t.v?t.w=t.v.toString(10):t.w=x4(t.v):t.w=um(t.v):t.w=Bxt(e||"General",t.v)}catch(s){if(r.WTF)throw s}try{var n=B3[e]||e||"General";if(r.cellNF&&(t.z=n),r.cellDates&&t.t=="n"&&up(n)){var i=b1(t.v);i&&(t.t="d",t.v=new Date(i.y,i.m-1,i.d,i.H,i.M,i.S,i.u))}}catch(s){if(r.WTF)throw s}}}function Nxt(t,e,r){if(r.cellStyles&&e.Interior){var n=e.Interior;n.Pattern&&(n.patternType=O3t[n.Pattern]||n.Pattern)}t[e.ID]=e}function Mxt(t,e,r,n,i,s,a,o,c,l){var u="General",f=n.StyleID,h={};l=l||{};var d=[],g=0;for(f===void 0&&o&&(f=o.StyleID),f===void 0&&a&&(f=a.StyleID);s[f]!==void 0&&(s[f].nf&&(u=s[f].nf),s[f].Interior&&d.push(s[f].Interior),!!s[f].Parent);)f=s[f].Parent;switch(r.Type){case"Boolean":n.t="b",n.v=ei(t);break;case"String":n.t="s",n.r=Bre(yn(t)),n.v=t.indexOf("<")>-1?yn(e||t).replace(/<.*?>/g,""):n.r;break;case"DateTime":t.slice(-1)!="Z"&&(t+="Z"),n.v=(Xi(t)-new Date(Date.UTC(1899,11,30)))/(24*60*60*1e3),n.v!==n.v?n.v=yn(t):n.v<60&&(n.v=n.v-1),(!u||u=="General")&&(u="yyyy-mm-dd");case"Number":n.v===void 0&&(n.v=+t),n.t||(n.t="n");break;case"Error":n.t="e",n.v=lj[t],l.cellText!==!1&&(n.w=t);break;default:t==""&&e==""?n.t="z":(n.t="s",n.v=Bre(e||t));break}if(Oxt(n,u,l),l.cellFormula!==!1)if(n.Formula){var p=yn(n.Formula);p.charCodeAt(0)==61&&(p=p.slice(1)),n.f=Mg(p,i),delete n.Formula,n.ArrayRange=="RC"?n.F=Mg("RC:RC",i):n.ArrayRange&&(n.F=Mg(n.ArrayRange,i),c.push([pn(n.F),n.F]))}else for(g=0;g<c.length;++g)i.r>=c[g][0].s.r&&i.r<=c[g][0].e.r&&i.c>=c[g][0].s.c&&i.c<=c[g][0].e.c&&(n.F=c[g][1]);l.cellStyles&&(d.forEach(function(m){!h.patternType&&m.patternType&&(h.patternType=m.patternType)}),n.s=h),n.StyleID!==void 0&&(n.ixfe=n.StyleID)}function Lxt(t){return uj.indexOf("_xlnm."+t)>-1?"_xlnm."+t:t}function Fxt(t){t.t=t.v||"",t.t=t.t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),t.v=t.w=t.ixfe=void 0}function mB(t,e){var r=e||{};Eb();var n=oy(UA(t));(r.type=="binary"||r.type=="array"||r.type=="base64")&&(typeof Br<"u"?n=Br.utils.decode(65001,LE(n)):n=ni(n));var i=n.slice(0,1024).toLowerCase(),s=!1;if(i=i.replace(/".*?"/g,""),(i.indexOf(">")&1023)>Math.min(i.indexOf(",")&1023,i.indexOf(";")&1023)){var a=ii(r);return a.type="string",pv.to_workbook(n,a)}if(i.indexOf("<?xml")==-1&&["html","table","head","meta","script","style","div"].forEach(function(ie){i.indexOf("<"+ie)>=0&&(s=!0)}),s)return w7t(n,r);B3={"General Number":"General","General Date":tr[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":tr[15],"Short Date":tr[14],"Long Time":tr[19],"Medium Time":tr[18],"Short Time":tr[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:tr[2],Standard:tr[4],Percent:tr[10],Scientific:tr[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var o,c=[],l,u={},f=[],h={},d="";r.dense&&(h["!data"]=[]);var g={},p={},m=uu('<Data ss:Type="String">'),y=0,v=0,_=0,x={s:{r:2e6,c:2e6},e:{r:0,c:0}},A={},C={},R="",M=0,N=[],Y={},H={},E=0,k=[],w=[],T={},L=[],I,U=!1,O=[],D=[],P={},B=0,z=0,F={Sheets:[],WBProps:{date1904:!1}},X={};Is.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"");for(var W="";o=Is.exec(n);)switch(o[3]=(W=o[3]).toLowerCase()){case"data":if(W=="data"){if(o[1]==="/"){if((l=c.pop())[0]!==o[3])throw new Error("Bad state: "+l.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&c.push([o[3],!0]);break}if(c[c.length-1][1])break;o[1]==="/"?Mxt(n.slice(y,o.index),R,m,c[c.length-1][0]=="comment"?T:g,{c:v,r:_},A,L[v],p,O,r):(R="",m=uu(o[0]),y=o.index+o[0].length);break;case"cell":if(o[1]==="/")if(w.length>0&&(g.c=w),(!r.sheetRows||r.sheetRows>_)&&g.v!==void 0&&(r.dense?(h["!data"][_]||(h["!data"][_]=[]),h["!data"][_][v]=g):h[Hr(v)+hn(_)]=g),g.HRef&&(g.l={Target:yn(g.HRef)},g.HRefScreenTip&&(g.l.Tooltip=g.HRefScreenTip),delete g.HRef,delete g.HRefScreenTip),(g.MergeAcross||g.MergeDown)&&(B=v+(parseInt(g.MergeAcross,10)|0),z=_+(parseInt(g.MergeDown,10)|0),(B>v||z>_)&&N.push({s:{c:v,r:_},e:{c:B,r:z}})),!r.sheetStubs)g.MergeAcross?v=B+1:++v;else if(g.MergeAcross||g.MergeDown){for(var q=v;q<=B;++q)for(var G=_;G<=z;++G)(q>v||G>_)&&(r.dense?(h["!data"][G]||(h["!data"][G]=[]),h["!data"][G][q]={t:"z"}):h[Hr(q)+hn(G)]={t:"z"});v=B+1}else++v;else g=Pxt(o[0]),g.Index&&(v=+g.Index-1),v<x.s.c&&(x.s.c=v),v>x.e.c&&(x.e.c=v),o[0].slice(-2)==="/>"&&++v,w=[];break;case"row":o[1]==="/"||o[0].slice(-2)==="/>"?(_<x.s.r&&(x.s.r=_),_>x.e.r&&(x.e.r=_),o[0].slice(-2)==="/>"&&(p=uu(o[0]),p.Index&&(_=+p.Index-1)),v=0,++_):(p=uu(o[0]),p.Index&&(_=+p.Index-1),P={},(p.AutoFitHeight=="0"||p.Height)&&(P.hpx=parseInt(p.Height,10),P.hpt=B4(P.hpx),D[_]=P),p.Hidden=="1"&&(P.hidden=!0,D[_]=P));break;case"worksheet":if(o[1]==="/"){if((l=c.pop())[0]!==o[3])throw new Error("Bad state: "+l.join("|"));f.push(d),x.s.r<=x.e.r&&x.s.c<=x.e.c&&(h["!ref"]=Ir(x),r.sheetRows&&r.sheetRows<=x.e.r&&(h["!fullref"]=h["!ref"],x.e.r=r.sheetRows-1,h["!ref"]=Ir(x))),N.length&&(h["!merges"]=N),L.length>0&&(h["!cols"]=L),D.length>0&&(h["!rows"]=D),u[d]=h}else x={s:{r:2e6,c:2e6},e:{r:0,c:0}},_=v=0,c.push([o[3],!1]),l=uu(o[0]),d=yn(l.Name),h={},r.dense&&(h["!data"]=[]),N=[],O=[],D=[],X={name:d,Hidden:0},F.Sheets.push(X);break;case"table":if(o[1]==="/"){if((l=c.pop())[0]!==o[3])throw new Error("Bad state: "+l.join("|"))}else{if(o[0].slice(-2)=="/>")break;c.push([o[3],!1]),L=[],U=!1}break;case"style":o[1]==="/"?Nxt(A,C,r):C=uu(o[0]);break;case"numberformat":C.nf=yn(uu(o[0]).Format||"General"),B3[C.nf]&&(C.nf=B3[C.nf]);for(var ee=0;ee!=392&&tr[ee]!=C.nf;++ee);if(ee==392){for(ee=57;ee!=392;++ee)if(tr[ee]==null){P1(C.nf,ee);break}}break;case"column":if(c[c.length-1][0]!=="table"||o[1]==="/")break;if(I=uu(o[0]),I.Hidden&&(I.hidden=!0,delete I.Hidden),I.Width&&(I.wpx=parseInt(I.Width,10)),!U&&I.wpx>10){U=!0,so=U2e;for(var ae=0;ae<L.length;++ae)L[ae]&&j1(L[ae])}U&&j1(I),L[I.Index-1||L.length]=I;for(var te=0;te<+I.Span;++te)L[L.length]=ii(I);break;case"namedrange":if(o[1]==="/")break;F.Names||(F.Names=[]);var K=Lt(o[0]),re={Name:Lxt(K.Name),Ref:Mg(K.RefersTo.slice(1),{r:0,c:0})};F.Sheets.length>0&&(re.Sheet=F.Sheets.length-1),F.Names.push(re);break;case"namedcell":break;case"b":break;case"i":break;case"u":break;case"s":break;case"em":break;case"h2":break;case"h3":break;case"sub":break;case"sup":break;case"span":break;case"alignment":break;case"borders":break;case"border":break;case"font":if(o[0].slice(-2)==="/>")break;o[1]==="/"?R+=n.slice(M,o.index):M=o.index+o[0].length;break;case"interior":if(!r.cellStyles)break;C.Interior=uu(o[0]);break;case"protection":break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if(o[0].slice(-2)==="/>")break;o[1]==="/"?Hvt(Y,W,n.slice(E,o.index)):E=o.index+o[0].length;break;case"paragraphs":break;case"styles":case"workbook":if(o[1]==="/"){if((l=c.pop())[0]!==o[3])throw new Error("Bad state: "+l.join("|"))}else c.push([o[3],!1]);break;case"comment":if(o[1]==="/"){if((l=c.pop())[0]!==o[3])throw new Error("Bad state: "+l.join("|"));Fxt(T),w.push(T)}else c.push([o[3],!1]),l=uu(o[0]),T={a:l.Author};break;case"autofilter":if(o[1]==="/"){if((l=c.pop())[0]!==o[3])throw new Error("Bad state: "+l.join("|"))}else if(o[0].charAt(o[0].length-2)!=="/"){var V=uu(o[0]);h["!autofilter"]={ref:Mg(V.Range).replace(/\$/g,"")},c.push([o[3],!0])}break;case"name":break;case"datavalidation":if(o[1]==="/"){if((l=c.pop())[0]!==o[3])throw new Error("Bad state: "+l.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&c.push([o[3],!0]);break;case"pixelsperinch":break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if(o[1]==="/"){if((l=c.pop())[0]!==o[3])throw new Error("Bad state: "+l.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&c.push([o[3],!0]);break;case"null":break;default:if(c.length==0&&o[3]=="document"||c.length==0&&o[3]=="uof")return wne(n,r);var oe=!0;switch(c[c.length-1][0]){case"officedocumentsettings":switch(o[3]){case"allowpng":break;case"removepersonalinformation":break;case"downloadcomponents":break;case"locationofcomponents":break;case"colors":break;case"color":break;case"index":break;case"rgb":break;case"targetscreensize":break;case"readonlyrecommended":break;default:oe=!1}break;case"componentoptions":switch(o[3]){case"toolbar":break;case"hideofficelogo":break;case"spreadsheetautofit":break;case"label":break;case"caption":break;case"maxheight":break;case"maxwidth":break;case"nextsheetnumber":break;default:oe=!1}break;case"excelworkbook":switch(o[3]){case"date1904":F.WBProps.date1904=!0;break;case"windowheight":break;case"windowwidth":break;case"windowtopx":break;case"windowtopy":break;case"tabratio":break;case"protectstructure":break;case"protectwindow":break;case"protectwindows":break;case"activesheet":break;case"displayinknotes":break;case"firstvisiblesheet":break;case"supbook":break;case"sheetname":break;case"sheetindex":break;case"sheetindexfirst":break;case"sheetindexlast":break;case"dll":break;case"acceptlabelsinformulas":break;case"donotsavelinkvalues":break;case"iteration":break;case"maxiterations":break;case"maxchange":break;case"path":break;case"xct":break;case"count":break;case"selectedsheets":break;case"calculation":break;case"uncalced":break;case"startupprompt":break;case"crn":break;case"externname":break;case"formula":break;case"colfirst":break;case"collast":break;case"wantadvise":break;case"boolean":break;case"error":break;case"text":break;case"ole":break;case"noautorecover":break;case"publishobjects":break;case"donotcalculatebeforesave":break;case"number":break;case"refmoder1c1":break;case"embedsavesmarttags":break;default:oe=!1}break;case"workbookoptions":switch(o[3]){case"owcversion":break;case"height":break;case"width":break;default:oe=!1}break;case"worksheetoptions":switch(o[3]){case"visible":if(o[0].slice(-2)!=="/>")if(o[1]==="/")switch(n.slice(E,o.index)){case"SheetHidden":X.Hidden=1;break;case"SheetVeryHidden":X.Hidden=2;break}else E=o.index+o[0].length;break;case"header":h["!margins"]||Lg(h["!margins"]={},"xlml"),isNaN(+Lt(o[0]).Margin)||(h["!margins"].header=+Lt(o[0]).Margin);break;case"footer":h["!margins"]||Lg(h["!margins"]={},"xlml"),isNaN(+Lt(o[0]).Margin)||(h["!margins"].footer=+Lt(o[0]).Margin);break;case"pagemargins":var he=Lt(o[0]);h["!margins"]||Lg(h["!margins"]={},"xlml"),isNaN(+he.Top)||(h["!margins"].top=+he.Top),isNaN(+he.Left)||(h["!margins"].left=+he.Left),isNaN(+he.Right)||(h["!margins"].right=+he.Right),isNaN(+he.Bottom)||(h["!margins"].bottom=+he.Bottom);break;case"displayrighttoleft":F.Views||(F.Views=[]),F.Views[0]||(F.Views[0]={}),F.Views[0].RTL=!0;break;case"freezepanes":break;case"frozennosplit":break;case"splithorizontal":case"splitvertical":break;case"donotdisplaygridlines":break;case"activerow":break;case"activecol":break;case"toprowbottompane":break;case"leftcolumnrightpane":break;case"unsynced":break;case"print":break;case"printerrors":break;case"panes":break;case"scale":break;case"pane":break;case"number":break;case"layout":break;case"pagesetup":break;case"selected":break;case"protectobjects":break;case"enableselection":break;case"protectscenarios":break;case"validprinterinfo":break;case"horizontalresolution":break;case"verticalresolution":break;case"numberofcopies":break;case"activepane":break;case"toprowvisible":break;case"leftcolumnvisible":break;case"fittopage":break;case"rangeselection":break;case"papersizeindex":break;case"pagelayoutzoom":break;case"pagebreakzoom":break;case"filteron":break;case"fitwidth":break;case"fitheight":break;case"commentslayout":break;case"zoom":break;case"lefttoright":break;case"gridlines":break;case"allowsort":break;case"allowfilter":break;case"allowinsertrows":break;case"allowdeleterows":break;case"allowinsertcols":break;case"allowdeletecols":break;case"allowinserthyperlinks":break;case"allowformatcells":break;case"allowsizecols":break;case"allowsizerows":break;case"nosummaryrowsbelowdetail":h["!outline"]||(h["!outline"]={}),h["!outline"].above=!0;break;case"tabcolorindex":break;case"donotdisplayheadings":break;case"showpagelayoutzoom":break;case"nosummarycolumnsrightdetail":h["!outline"]||(h["!outline"]={}),h["!outline"].left=!0;break;case"blackandwhite":break;case"donotdisplayzeros":break;case"displaypagebreak":break;case"rowcolheadings":break;case"donotdisplayoutline":break;case"noorientation":break;case"allowusepivottables":break;case"zeroheight":break;case"viewablerange":break;case"selection":break;case"protectcontents":break;default:oe=!1}break;case"pivottable":case"pivotcache":switch(o[3]){case"immediateitemsondrop":break;case"showpagemultipleitemlabel":break;case"compactrowindent":break;case"location":break;case"pivotfield":break;case"orientation":break;case"layoutform":break;case"layoutsubtotallocation":break;case"layoutcompactrow":break;case"position":break;case"pivotitem":break;case"datatype":break;case"datafield":break;case"sourcename":break;case"parentfield":break;case"ptlineitems":break;case"ptlineitem":break;case"countofsameitems":break;case"item":break;case"itemtype":break;case"ptsource":break;case"cacheindex":break;case"consolidationreference":break;case"filename":break;case"reference":break;case"nocolumngrand":break;case"norowgrand":break;case"blanklineafteritems":break;case"hidden":break;case"subtotal":break;case"basefield":break;case"mapchilditems":break;case"function":break;case"refreshonfileopen":break;case"printsettitles":break;case"mergelabels":break;case"defaultversion":break;case"refreshname":break;case"refreshdate":break;case"refreshdatecopy":break;case"versionlastrefresh":break;case"versionlastupdate":break;case"versionupdateablemin":break;case"versionrefreshablemin":break;case"calculation":break;default:oe=!1}break;case"pagebreaks":switch(o[3]){case"colbreaks":break;case"colbreak":break;case"rowbreaks":break;case"rowbreak":break;case"colstart":break;case"colend":break;case"rowend":break;default:oe=!1}break;case"autofilter":switch(o[3]){case"autofiltercolumn":break;case"autofiltercondition":break;case"autofilterand":break;case"autofilteror":break;default:oe=!1}break;case"querytable":switch(o[3]){case"id":break;case"autoformatfont":break;case"autoformatpattern":break;case"querysource":break;case"querytype":break;case"enableredirections":break;case"refreshedinxl9":break;case"urlstring":break;case"htmltables":break;case"connection":break;case"commandtext":break;case"refreshinfo":break;case"notitles":break;case"nextid":break;case"columninfo":break;case"overwritecells":break;case"donotpromptforfile":break;case"textwizardsettings":break;case"source":break;case"number":break;case"decimal":break;case"thousandseparator":break;case"trailingminusnumbers":break;case"formatsettings":break;case"fieldtype":break;case"delimiters":break;case"tab":break;case"comma":break;case"autoformatname":break;case"versionlastedit":break;case"versionlastrefresh":break;default:oe=!1}break;case"datavalidation":switch(o[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;case"cellrangelist":break;default:oe=!1}break;case"sorting":case"conditionalformatting":switch(o[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"cellrangelist":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;default:oe=!1}break;case"mapinfo":case"schema":case"data":switch(o[3]){case"map":break;case"entry":break;case"range":break;case"xpath":break;case"field":break;case"xsdtype":break;case"filteron":break;case"aggregate":break;case"elementtype":break;case"attributetype":break;case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":break;case"row":break;default:oe=!1}break;case"smarttags":break;default:oe=!1;break}if(oe||o[3].match(/!\[CDATA/))break;if(!c[c.length-1][1])throw"Unrecognized tag: "+o[3]+"|"+c.join("|");if(c[c.length-1][0]==="customdocumentproperties"){if(o[0].slice(-2)==="/>")break;o[1]==="/"?Dxt(H,W,k,n.slice(E,o.index)):(k=o,E=o.index+o[0].length);break}if(r.WTF)throw"Unrecognized tag: "+o[3]+"|"+c.join("|")}var ne={};return!r.bookSheets&&!r.bookProps&&(ne.Sheets=u),ne.SheetNames=f,ne.Workbook=F,ne.SSF=ii(tr),ne.Props=Y,ne.Custprops=H,ne.bookType="xlml",ne}function ZN(t,e){switch(Sj(e=e||{}),e.type||"base64"){case"base64":return mB(al(t),e);case"binary":case"buffer":case"file":return mB(t,e);case"array":return mB(lh(t),e)}}function $xt(t,e){var r=[];return t.Props&&r.push(Wvt(t.Props,e)),t.Custprops&&r.push(Kvt(t.Props,t.Custprops)),r.join("")}function Uxt(t){return(((t||{}).Workbook||{}).WBProps||{}).date1904?'<ExcelWorkbook xmlns="urn:schemas-microsoft-com:office:excel"><Date1904/></ExcelWorkbook>':""}function Vxt(t,e){var r=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return e.cellXfs.forEach(function(n,i){var s=[];s.push(yt("NumberFormat",null,{"ss:Format":$r(tr[n.numFmtId])}));var a={"ss:ID":"s"+(21+i)};r.push(yt("Style",s.join(""),a))}),yt("Styles",r.join(""))}function lye(t){return yt("NamedRange",null,{"ss:Name":t.Name.slice(0,6)=="_xlnm."?t.Name.slice(6):t.Name,"ss:RefersTo":"="+zA(t.Ref,{r:0,c:0})})}function jxt(t){if(!((t||{}).Workbook||{}).Names)return"";for(var e=t.Workbook.Names,r=[],n=0;n<e.length;++n){var i=e[n];i.Sheet==null&&(i.Name.match(/^_xlfn\./)||r.push(lye(i)))}return yt("Names",r.join(""))}function zxt(t,e,r,n){if(!t||!((n||{}).Workbook||{}).Names)return"";for(var i=n.Workbook.Names,s=[],a=0;a<i.length;++a){var o=i[a];o.Sheet==r&&(o.Name.match(/^_xlfn\./)||s.push(lye(o)))}return s.join("")}function qxt(t,e,r,n){if(!t)return"";var i=[];if(t["!margins"]&&(i.push("<PageSetup>"),t["!margins"].header&&i.push(yt("Header",null,{"x:Margin":t["!margins"].header})),t["!margins"].footer&&i.push(yt("Footer",null,{"x:Margin":t["!margins"].footer})),i.push(yt("PageMargins",null,{"x:Bottom":t["!margins"].bottom||"0.75","x:Left":t["!margins"].left||"0.7","x:Right":t["!margins"].right||"0.7","x:Top":t["!margins"].top||"0.75"})),i.push("</PageSetup>")),n&&n.Workbook&&n.Workbook.Sheets&&n.Workbook.Sheets[r])if(n.Workbook.Sheets[r].Hidden)i.push(yt("Visible",n.Workbook.Sheets[r].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var s=0;s<r&&!(n.Workbook.Sheets[s]&&!n.Workbook.Sheets[s].Hidden);++s);s==r&&i.push("<Selected/>")}return((((n||{}).Workbook||{}).Views||[])[0]||{}).RTL&&i.push("<DisplayRightToLeft/>"),t["!protect"]&&(i.push(La("ProtectContents","True")),t["!protect"].objects&&i.push(La("ProtectObjects","True")),t["!protect"].scenarios&&i.push(La("ProtectScenarios","True")),t["!protect"].selectLockedCells!=null&&!t["!protect"].selectLockedCells?i.push(La("EnableSelection","NoSelection")):t["!protect"].selectUnlockedCells!=null&&!t["!protect"].selectUnlockedCells&&i.push(La("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(a){t["!protect"][a[0]]&&i.push("<"+a[1]+"/>")})),i.length==0?"":yt("WorksheetOptions",i.join(""),{xmlns:Gc.x})}function Hxt(t){return t.map(function(e){var r=Yyt(e.t||""),n=yt("ss:Data",r,{xmlns:"http://www.w3.org/TR/REC-html40"});return yt("Comment",n,{"ss:Author":e.a})}).join("")}function Wxt(t,e,r,n,i,s,a){if(!t||t.v==null&&t.f==null)return"";var o={};if(t.f&&(o["ss:Formula"]="="+$r(zA(t.f,a))),t.F&&t.F.slice(0,e.length)==e){var c=Hn(t.F.slice(e.length+1));o["ss:ArrayRange"]="RC:R"+(c.r==a.r?"":"["+(c.r-a.r)+"]")+"C"+(c.c==a.c?"":"["+(c.c-a.c)+"]")}if(t.l&&t.l.Target&&(o["ss:HRef"]=$r(t.l.Target),t.l.Tooltip&&(o["x:HRefScreenTip"]=$r(t.l.Tooltip))),r["!merges"])for(var l=r["!merges"],u=0;u!=l.length;++u)l[u].s.c!=a.c||l[u].s.r!=a.r||(l[u].e.c>l[u].s.c&&(o["ss:MergeAcross"]=l[u].e.c-l[u].s.c),l[u].e.r>l[u].s.r&&(o["ss:MergeDown"]=l[u].e.r-l[u].s.r));var f="",h="";switch(t.t){case"z":if(!n.sheetStubs)return"";break;case"n":f="Number",h=String(t.v);break;case"b":f="Boolean",h=t.v?"1":"0";break;case"e":f="Error",h=h0[t.v];break;case"d":f="DateTime",h=new Date(t.v).toISOString(),t.z==null&&(t.z=t.z||tr[14]);break;case"s":f="String",h=Gyt(t.v||"");break}var d=hp(n.cellXfs,t,n);o["ss:StyleID"]="s"+(21+d),o["ss:Index"]=a.c+1;var g=t.v!=null?h:"",p=t.t=="z"?"":'<Data ss:Type="'+f+'">'+g+"</Data>";return(t.c||[]).length>0&&(p+=Hxt(t.c)),yt("Cell",p,o)}function Kxt(t,e){var r='<Row ss:Index="'+(t+1)+'"';return e&&(e.hpt&&!e.hpx&&(e.hpx=gv(e.hpt)),e.hpx&&(r+=' ss:AutoFitHeight="0" ss:Height="'+e.hpx+'"'),e.hidden&&(r+=' ss:Hidden="1"')),r+">"}function Gxt(t,e,r,n){if(!t["!ref"])return"";var i=pn(t["!ref"]),s=t["!merges"]||[],a=0,o=[];t["!cols"]&&t["!cols"].forEach(function(m,y){j1(m);var v=!!m.width,_=WA(y,m),x={"ss:Index":y+1};v&&(x["ss:Width"]=R4(_.width)),m.hidden&&(x["ss:Hidden"]="1"),o.push(yt("Column",null,x))});for(var c=t["!data"]!=null,l=i.s.r;l<=i.e.r;++l){for(var u=[Kxt(l,(t["!rows"]||[])[l])],f=i.s.c;f<=i.e.c;++f){var h=!1;for(a=0;a!=s.length;++a)if(!(s[a].s.c>f)&&!(s[a].s.r>l)&&!(s[a].e.c<f)&&!(s[a].e.r<l)){(s[a].s.c!=f||s[a].s.r!=l)&&(h=!0);break}if(!h){var d={r:l,c:f},g=Hr(f)+hn(l),p=c?(t["!data"][l]||[])[f]:t[g];u.push(Wxt(p,g,t,e,r,n,d))}}u.push("</Row>"),u.length>2&&o.push(u.join(""))}return o.join("")}function Yxt(t,e,r){var n=[],i=r.SheetNames[t],s=r.Sheets[i],a=s?zxt(s,e,t,r):"";return a.length>0&&n.push("<Names>"+a+"</Names>"),a=s?Gxt(s,e,t,r):"",a.length>0&&n.push("<Table>"+a+"</Table>"),n.push(qxt(s,e,t,r)),s["!autofilter"]&&n.push('<AutoFilter x:Range="'+zA(A4(s["!autofilter"].ref),{r:0,c:0})+'" xmlns="urn:schemas-microsoft-com:office:excel"></AutoFilter>'),n.join("")}function Xxt(t,e){e||(e={}),t.SSF||(t.SSF=ii(tr)),t.SSF&&(Eb(),J6(t.SSF),e.revssf=FA(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF,e.cellXfs=[],hp(e.cellXfs,{},{revssf:{General:0}}));var r=[];r.push($xt(t,e)),r.push(Uxt(t)),r.push(""),r.push("");for(var n=0;n<t.SheetNames.length;++n)r.push(yt("Worksheet",Yxt(n,e,t),{"ss:Name":$r(t.SheetNames[n])}));return r[2]=Vxt(t,e),r[3]=jxt(t),As+yt("Workbook",r.join(""),{xmlns:Gc.ss,"xmlns:o":Gc.o,"xmlns:x":Gc.x,"xmlns:ss":Gc.ss,"xmlns:dt":Gc.dt,"xmlns:html":Gc.html})}function Zxt(t){var e={},r=t.content;if(r.l=28,e.AnsiUserType=r.read_shift(0,"lpstr-ansi"),e.AnsiClipboardFormat=Avt(r),r.length-r.l<=4)return e;var n=r.read_shift(4);if(n==0||n>40||(r.l-=4,e.Reserved1=r.read_shift(0,"lpstr-ansi"),r.length-r.l<=4)||(n=r.read_shift(4),n!==1907505652)||(e.UnicodeClipboardFormat=Tvt(r),n=r.read_shift(4),n==0||n>40))return e;r.l-=4,e.Reserved2=r.read_shift(0,"lpwstr")}var Jxt=[60,1084,2066,2165,2175];function Qxt(t,e,r,n,i){var s=n,a=[],o=r.slice(r.l,r.l+s);if(i&&i.enc&&i.enc.insitu&&o.length>0)switch(t){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:break;case 133:break;default:i.enc.insitu(o)}a.push(o),r.l+=s;for(var c=Rd(r,r.l),l=JN[c],u=0;l!=null&&Jxt.indexOf(c)>-1;)s=Rd(r,r.l+2),u=r.l+4,c==2066?u+=4:(c==2165||c==2175)&&(u+=12),o=r.slice(u,r.l+4+s),a.push(o),r.l+=4+s,l=JN[c=Rd(r,r.l)];var f=Ds(a);Ws(f,0);var h=0;f.lens=[];for(var d=0;d<a.length;++d)f.lens.push(h),h+=a[d].length;if(f.length<n)throw"XLS Record 0x"+t.toString(16)+" Truncated: "+f.length+" < "+n;return e.f(f,f.length,i)}function vf(t,e,r){if(t.t!=="z"&&t.XF){var n=0;try{n=t.z||t.XF.numFmtId||0,e.cellNF&&(t.z=tr[n])}catch(s){if(e.WTF)throw s}if(!e||e.cellText!==!1)try{t.t==="e"?t.w=t.w||h0[t.v]:n===0||n=="General"?t.t==="n"?(t.v|0)===t.v?t.w=t.v.toString(10):t.w=x4(t.v):t.w=um(t.v):t.w=Cc(n,t.v,{date1904:!!r,dateNF:e&&e.dateNF})}catch(s){if(e.WTF)throw s}if(e.cellDates&&n&&t.t=="n"&&up(tr[n]||String(n))){var i=b1(t.v);i&&(t.t="d",t.v=new Date(i.y,i.m-1,i.d,i.H,i.M,i.S,i.u))}}}function M5(t,e,r){return{v:t,ixfe:e,t:r}}function e7t(t,e){var r={opts:{}},n={},i={};e.dense&&(i["!data"]=[]);var s={},a={},o=null,c=[],l="",u={},f,h="",d,g,p,m,y={},v=[],_,x,A=[],C=[],R={Sheets:[],WBProps:{date1904:!1},Views:[{}]},M={},N=function(de){return de<8?Dg[de]:de<64&&C[de-8]||Dg[de]},Y=function(de,Ae,De){var Re=Ae.XF.data;if(!(!Re||!Re.patternType||!De||!De.cellStyles)){Ae.s={},Ae.s.patternType=Re.patternType;var bt;(bt=I4(N(Re.icvFore)))&&(Ae.s.fgColor={rgb:bt}),(bt=I4(N(Re.icvBack)))&&(Ae.s.bgColor={rgb:bt})}},H=function(de,Ae,De){if(!(P>1)&&!(De.sheetRows&&de.r>=De.sheetRows)){if(De.cellStyles&&Ae.XF&&Ae.XF.data&&Y(de,Ae,De),delete Ae.ixfe,delete Ae.XF,f=de,h=en(de),(!a||!a.s||!a.e)&&(a={s:{r:0,c:0},e:{r:0,c:0}}),de.r<a.s.r&&(a.s.r=de.r),de.c<a.s.c&&(a.s.c=de.c),de.r+1>a.e.r&&(a.e.r=de.r+1),de.c+1>a.e.c&&(a.e.c=de.c+1),De.cellFormula&&Ae.f){for(var Re=0;Re<v.length;++Re)if(!(v[Re][0].s.c>de.c||v[Re][0].s.r>de.r)&&!(v[Re][0].e.c<de.c||v[Re][0].e.r<de.r)){Ae.F=Ir(v[Re][0]),(v[Re][0].s.c!=de.c||v[Re][0].s.r!=de.r)&&delete Ae.f,Ae.f&&(Ae.f=""+no(v[Re][1],a,de,O,E));break}}De.dense?(i["!data"][de.r]||(i["!data"][de.r]=[]),i["!data"][de.r][de.c]=Ae):i[h]=Ae}},E={enc:!1,sbcch:0,snames:[],sharedf:y,arrayf:v,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!e&&!!e.cellStyles,WTF:!!e&&!!e.wtf};e.password&&(E.password=e.password);var k,w=[],T=[],L=[],I=[],U=!1,O=[];O.SheetNames=E.snames,O.sharedf=E.sharedf,O.arrayf=E.arrayf,O.names=[],O.XTI=[];var D=0,P=0,B=0,z=[],F=[],X;E.codepage=1200,Ul(1200);for(var W=!1;t.l<t.length-1;){var q=t.l,G=t.read_shift(2);if(G===0&&D===10)break;var ee=t.l===t.length?0:t.read_shift(2),ae=JN[G];if(P==0&&[9,521,1033,2057].indexOf(G)==-1)break;if(ae&&ae.f){if(e.bookSheets&&D===133&&G!==133)break;if(D=G,ae.r===2||ae.r==12){var te=t.read_shift(2);if(ee-=2,!E.enc&&te!==G&&((te&255)<<8|te>>8)!==G)throw new Error("rt mismatch: "+te+"!="+G);ae.r==12&&(t.l+=10,ee-=10)}var K={};if(G===10?K=ae.f(t,ee,E):K=Qxt(G,ae,t,ee,E),P==0&&[9,521,1033,2057].indexOf(D)===-1)continue;switch(G){case 34:r.opts.Date1904=R.WBProps.date1904=K;break;case 134:r.opts.WriteProtect=!0;break;case 47:if(E.enc||(t.l=0),E.enc=K,!e.password)throw new Error("File is password-protected");if(K.valid==null)throw new Error("Encryption scheme unsupported");if(!K.valid)throw new Error("Password is incorrect");break;case 92:E.lastuser=K;break;case 66:var re=Number(K);switch(re){case 21010:re=1200;break;case 32768:re=1e4;break;case 32769:re=1252;break}Ul(E.codepage=re),W=!0;break;case 317:E.rrtabid=K;break;case 25:E.winlocked=K;break;case 439:r.opts.RefreshAll=K;break;case 12:r.opts.CalcCount=K;break;case 16:r.opts.CalcDelta=K;break;case 17:r.opts.CalcIter=K;break;case 13:r.opts.CalcMode=K;break;case 14:r.opts.CalcPrecision=K;break;case 95:r.opts.CalcSaveRecalc=K;break;case 15:E.CalcRefMode=K;break;case 2211:r.opts.FullCalc=K;break;case 129:K.fDialog&&(i["!type"]="dialog"),K.fBelow||((i["!outline"]||(i["!outline"]={})).above=!0),K.fRight||((i["!outline"]||(i["!outline"]={})).left=!0);break;case 224:A.push(K);break;case 430:O.push([K]),O[O.length-1].XTI=[];break;case 35:case 547:O[O.length-1].push(K);break;case 24:case 536:X={Name:K.Name,Ref:no(K.rgce,a,null,O,E)},K.itab>0&&(X.Sheet=K.itab-1),O.names.push(X),O[0]||(O[0]=[],O[0].XTI=[]),O[O.length-1].push(K),K.Name=="_xlnm._FilterDatabase"&&K.itab>0&&K.rgce&&K.rgce[0]&&K.rgce[0][0]&&K.rgce[0][0][0]=="PtgArea3d"&&(F[K.itab-1]={ref:Ir(K.rgce[0][0][1][2])});break;case 22:E.ExternCount=K;break;case 23:O.length==0&&(O[0]=[],O[0].XTI=[]),O[O.length-1].XTI=O[O.length-1].XTI.concat(K),O.XTI=O.XTI.concat(K);break;case 2196:if(E.biff<8)break;X!=null&&(X.Comment=K[1]);break;case 18:i["!protect"]=K;break;case 19:K!==0&&E.WTF&&console.error("Password verifier: "+K);break;case 133:s[K.pos]=K,E.snames.push(K.name);break;case 10:{if(--P)break;if(a.e){if(a.e.r>0&&a.e.c>0){if(a.e.r--,a.e.c--,i["!ref"]=Ir(a),e.sheetRows&&e.sheetRows<=a.e.r){var V=a.e.r;a.e.r=e.sheetRows-1,i["!fullref"]=i["!ref"],i["!ref"]=Ir(a),a.e.r=V}a.e.r++,a.e.c++}w.length>0&&(i["!merges"]=w),T.length>0&&(i["!objects"]=T),L.length>0&&(i["!cols"]=L),I.length>0&&(i["!rows"]=I),R.Sheets.push(M)}l===""?u=i:n[l]=i,i={},e.dense&&(i["!data"]=[])}break;case 9:case 521:case 1033:case 2057:{if(E.biff===8&&(E.biff={9:2,521:3,1033:4}[G]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[K.BIFFVer]||8),E.biffguess=K.BIFFVer==0,K.BIFFVer==0&&K.dt==4096&&(E.biff=5,W=!0,Ul(E.codepage=28591)),E.biff==8&&K.BIFFVer==0&&K.dt==16&&(E.biff=2),P++)break;if(i={},e.dense&&(i["!data"]=[]),E.biff<8&&!W&&(W=!0,Ul(E.codepage=e.codepage||1252)),E.biff<5||K.BIFFVer==0&&K.dt==4096){l===""&&(l="Sheet1"),a={s:{r:0,c:0},e:{r:0,c:0}};var oe={pos:t.l-ee,name:l};s[oe.pos]=oe,E.snames.push(l)}else l=(s[q]||{name:""}).name;K.dt==32&&(i["!type"]="chart"),K.dt==64&&(i["!type"]="macro"),w=[],T=[],E.arrayf=v=[],L=[],I=[],U=!1,M={Hidden:(s[q]||{hs:0}).hs,name:l}}break;case 515:case 3:case 2:i["!type"]=="chart"&&(e.dense?(i["!data"][K.r]||[])[K.c]:i[Hr(K.c)+hn(K.r)])&&++K.c,_={ixfe:K.ixfe,XF:A[K.ixfe]||{},v:K.val,t:"n"},B>0&&(_.z=z[_.ixfe>>8&63]),vf(_,e,r.opts.Date1904),H({c:K.c,r:K.r},_,e);break;case 5:case 517:_={ixfe:K.ixfe,XF:A[K.ixfe],v:K.val,t:K.t},B>0&&(_.z=z[_.ixfe>>8&63]),vf(_,e,r.opts.Date1904),H({c:K.c,r:K.r},_,e);break;case 638:_={ixfe:K.ixfe,XF:A[K.ixfe],v:K.rknum,t:"n"},B>0&&(_.z=z[_.ixfe>>8&63]),vf(_,e,r.opts.Date1904),H({c:K.c,r:K.r},_,e);break;case 189:for(var he=K.c;he<=K.C;++he){var ne=K.rkrec[he-K.c][0];_={ixfe:ne,XF:A[ne],v:K.rkrec[he-K.c][1],t:"n"},B>0&&(_.z=z[_.ixfe>>8&63]),vf(_,e,r.opts.Date1904),H({c:he,r:K.r},_,e)}break;case 6:case 518:case 1030:{if(K.val=="String"){o=K;break}if(_=M5(K.val,K.cell.ixfe,K.tt),_.XF=A[_.ixfe],e.cellFormula){var ie=K.formula;if(ie&&ie[0]&&ie[0][0]&&ie[0][0][0]=="PtgExp"){var ce=ie[0][0][1][0],ve=ie[0][0][1][1],Ee=en({r:ce,c:ve});y[Ee]?_.f=""+no(K.formula,a,K.cell,O,E):_.F=((e.dense?(i["!data"][ce]||[])[ve]:i[Ee])||{}).F}else _.f=""+no(K.formula,a,K.cell,O,E)}B>0&&(_.z=z[_.ixfe>>8&63]),vf(_,e,r.opts.Date1904),H(K.cell,_,e),o=K}break;case 7:case 519:if(o)o.val=K,_=M5(K,o.cell.ixfe,"s"),_.XF=A[_.ixfe],e.cellFormula&&(_.f=""+no(o.formula,a,o.cell,O,E)),B>0&&(_.z=z[_.ixfe>>8&63]),vf(_,e,r.opts.Date1904),H(o.cell,_,e),o=null;else throw new Error("String record expects Formula");break;case 33:case 545:{v.push(K);var ge=en(K[0].s);if(d=e.dense?(i["!data"][K[0].s.r]||[])[K[0].s.c]:i[ge],e.cellFormula&&d){if(!o||!ge||!d)break;d.f=""+no(K[1],a,K[0],O,E),d.F=Ir(K[0])}}break;case 1212:{if(!e.cellFormula)break;if(h){if(!o)break;y[en(o.cell)]=K[0],d=e.dense?(i["!data"][o.cell.r]||[])[o.cell.c]:i[en(o.cell)],(d||{}).f=""+no(K[0],a,f,O,E)}}break;case 253:_=M5(c[K.isst].t,K.ixfe,"s"),c[K.isst].h&&(_.h=c[K.isst].h),_.XF=A[_.ixfe],B>0&&(_.z=z[_.ixfe>>8&63]),vf(_,e,r.opts.Date1904),H({c:K.c,r:K.r},_,e);break;case 513:e.sheetStubs&&(_={ixfe:K.ixfe,XF:A[K.ixfe],t:"z"},B>0&&(_.z=z[_.ixfe>>8&63]),vf(_,e,r.opts.Date1904),H({c:K.c,r:K.r},_,e));break;case 190:if(e.sheetStubs)for(var Pe=K.c;Pe<=K.C;++Pe){var Ce=K.ixfe[Pe-K.c];_={ixfe:Ce,XF:A[Ce],t:"z"},B>0&&(_.z=z[_.ixfe>>8&63]),vf(_,e,r.opts.Date1904),H({c:Pe,r:K.r},_,e)}break;case 214:case 516:case 4:_=M5(K.val,K.ixfe,"s"),_.XF=A[_.ixfe],B>0&&(_.z=z[_.ixfe>>8&63]),vf(_,e,r.opts.Date1904),H({c:K.c,r:K.r},_,e);break;case 0:case 512:P===1&&(a=K);break;case 252:c=K;break;case 1054:if(E.biff==4){z[B++]=K[1];for(var Ie=0;Ie<B+163&&tr[Ie]!=K[1];++Ie);Ie>=163&&P1(K[1],B+163)}else P1(K[1],K[0]);break;case 30:{z[B++]=K;for(var $e=0;$e<B+163&&tr[$e]!=K;++$e);$e>=163&&P1(K,B+163)}break;case 229:w=w.concat(K);break;case 93:T[K.cmo[0]]=E.lastobj=K;break;case 438:E.lastobj.TxO=K;break;case 127:E.lastobj.ImData=K;break;case 440:for(m=K[0].s.r;m<=K[0].e.r;++m)for(p=K[0].s.c;p<=K[0].e.c;++p)d=e.dense?(i["!data"][m]||[])[p]:i[en({c:p,r:m})],d&&(d.l=K[1]);break;case 2048:for(m=K[0].s.r;m<=K[0].e.r;++m)for(p=K[0].s.c;p<=K[0].e.c;++p)d=e.dense?(i["!data"][m]||[])[p]:i[en({c:p,r:m})],d&&d.l&&(d.l.Tooltip=K[1]);break;case 28:{if(E.biff<=5&&E.biff>=2)break;d=e.dense?(i["!data"][K[0].r]||[])[K[0].c]:i[en(K[0])];var se=T[K[2]];d||(e.dense?(i["!data"][K[0].r]||(i["!data"][K[0].r]=[]),d=i["!data"][K[0].r][K[0].c]={t:"z"}):d=i[en(K[0])]={t:"z"},a.e.r=Math.max(a.e.r,K[0].r),a.s.r=Math.min(a.s.r,K[0].r),a.e.c=Math.max(a.e.c,K[0].c),a.s.c=Math.min(a.s.c,K[0].c)),d.c||(d.c=[]),g={a:K[1],t:se.TxO.t},d.c.push(g)}break;case 2173:C4t(A[K.ixfe],K.ext);break;case 125:{if(!E.cellStyles)break;for(;K.e>=K.s;)L[K.e--]={width:K.w/256,level:K.level||0,hidden:!!(K.flags&1)},U||(U=!0,mj(K.w/256)),j1(L[K.e+1])}break;case 520:{var Z={};K.level!=null&&(I[K.r]=Z,Z.level=K.level),K.hidden&&(I[K.r]=Z,Z.hidden=!0),K.hpt&&(I[K.r]=Z,Z.hpt=K.hpt,Z.hpx=gv(K.hpt))}break;case 38:case 39:case 40:case 41:i["!margins"]||Lg(i["!margins"]={}),i["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[G]]=K;break;case 161:i["!margins"]||Lg(i["!margins"]={}),i["!margins"].header=K.header,i["!margins"].footer=K.footer;break;case 574:K.RTL&&(R.Views[0].RTL=!0);break;case 146:C=K;break;case 2198:k=K;break;case 140:x=K;break;case 442:l?M.CodeName=K||M.name:R.WBProps.CodeName=K||"ThisWorkbook";break}}else ae||console.error("Missing Info for XLS Record 0x"+G.toString(16)),t.l+=ee}return r.SheetNames=Ki(s).sort(function(J,de){return Number(J)-Number(de)}).map(function(J){return s[J].name}),e.bookSheets||(r.Sheets=n),!r.SheetNames.length&&u["!ref"]?(r.SheetNames.push("Sheet1"),r.Sheets&&(r.Sheets.Sheet1=u)):r.Preamble=u,r.Sheets&&F.forEach(function(J,de){r.Sheets[r.SheetNames[de]]["!autofilter"]=J}),r.Strings=c,r.SSF=ii(tr),E.enc&&(r.Encryption=E.enc),k&&(r.Themes=k),r.Metadata={},x!==void 0&&(r.Metadata.Country=x),O.names.length>0&&(R.Names=O.names),r.Workbook=R,r}var D3={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function t7t(t,e,r){var n=Kt.find(t,"/!DocumentSummaryInformation");if(n&&n.size>0)try{var i=Xre(n,HN,D3.DSI);for(var s in i)e[s]=i[s]}catch(l){if(r.WTF)throw l}var a=Kt.find(t,"/!SummaryInformation");if(a&&a.size>0)try{var o=Xre(a,WN,D3.SI);for(var c in o)e[c]==null&&(e[c]=o[c])}catch(l){if(r.WTF)throw l}e.HeadingPairs&&e.TitlesOfParts&&(p2e(e.HeadingPairs,e.TitlesOfParts,e,r),delete e.HeadingPairs,delete e.TitlesOfParts)}function r7t(t,e){var r=[],n=[],i=[],s=0,a,o=Tre(HN,"n"),c=Tre(WN,"n");if(t.Props)for(a=Ki(t.Props),s=0;s<a.length;++s)(Object.prototype.hasOwnProperty.call(o,a[s])?r:Object.prototype.hasOwnProperty.call(c,a[s])?n:i).push([a[s],t.Props[a[s]]]);if(t.Custprops)for(a=Ki(t.Custprops),s=0;s<a.length;++s)Object.prototype.hasOwnProperty.call(t.Props||{},a[s])||(Object.prototype.hasOwnProperty.call(o,a[s])?r:Object.prototype.hasOwnProperty.call(c,a[s])?n:i).push([a[s],t.Custprops[a[s]]]);var l=[];for(s=0;s<i.length;++s)_2e.indexOf(i[s][0])>-1||d2e.indexOf(i[s][0])>-1||i[s][1]!=null&&l.push(i[s]);n.length&&Kt.utils.cfb_add(e,"/SummaryInformation",Zre(n,D3.SI,c,WN)),(r.length||l.length)&&Kt.utils.cfb_add(e,"/DocumentSummaryInformation",Zre(r,D3.DSI,o,HN,l.length?l:null,D3.UDI))}function Ej(t,e){e||(e={}),Sj(e),MA(),e.codepage&&NA(e.codepage);var r,n;if(t.FullPaths){if(Kt.find(t,"/encryption"))throw new Error("File is password-protected");r=Kt.find(t,"!CompObj"),n=Kt.find(t,"/Workbook")||Kt.find(t,"/Book")}else{switch(e.type){case"base64":t=jo(al(t));break;case"binary":t=jo(t);break;case"buffer":break;case"array":Array.isArray(t)||(t=Array.prototype.slice.call(t));break}Ws(t,0),n={content:t}}var i,s;if(r&&Zxt(r),e.bookProps&&!e.bookSheets)i={};else{var a=tn?"buffer":"array";if(n&&n.content)i=e7t(n.content,e);else if((s=Kt.find(t,"PerfectOffice_MAIN"))&&s.content)i=Ng.to_workbook(s.content,(e.type=a,e));else if((s=Kt.find(t,"NativeContent_MAIN"))&&s.content)i=Ng.to_workbook(s.content,(e.type=a,e));else throw(s=Kt.find(t,"MN0"))&&s.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");e.bookVBA&&t.FullPaths&&Kt.find(t,"/_VBA_PROJECT_CUR/VBA/dir")&&(i.vbaraw=s6t(t))}var o={};return t.FullPaths&&t7t(t,o,e),i.Props=i.Custprops=o,e.bookFiles&&(i.cfb=t),i}function n7t(t,e){var r=e||{},n=Kt.utils.cfb_new({root:"R"}),i="/Workbook";switch(r.bookType||"xls"){case"xls":r.bookType="biff8";case"xla":r.bookType||(r.bookType="xla");case"biff8":i="/Workbook",r.biff=8;break;case"biff5":i="/Book",r.biff=5;break;default:throw new Error("invalid type "+r.bookType+" for XLS CFB")}return Kt.utils.cfb_add(n,i,uye(t,r)),r.biff==8&&(t.Props||t.Custprops)&&r7t(t,n),r.biff==8&&t.vbaraw&&a6t(n,Kt.read(t.vbaraw,{type:typeof t.vbaraw=="string"?"binary":"buffer"})),n}var D4={0:{f:I_t},1:{f:L_t},2:{f:r5t},3:{f:H_t},4:{f:V_t},5:{f:Q_t},6:{f:o5t},7:{f:Y_t},8:{f:p5t},9:{f:d5t},10:{f:f5t},11:{f:h5t},12:{f:$_t},13:{f:i5t},14:{f:K_t},15:{f:z_t},16:{f:rye},17:{f:l5t},18:{f:Z_t},19:{f:ij},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:lxt},40:{},42:{},43:{f:W3t},44:{f:q3t},45:{f:Y3t},46:{f:Z3t},47:{f:X3t},48:{},49:{f:dvt},50:{},51:{f:P4t},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:B2e},62:{f:a5t},63:{f:V4t},64:{f:R5t},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:vo,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:T5t},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:N_t},148:{f:B_t,p:16},151:{f:w5t},152:{},153:{f:axt},154:{},155:{},156:{f:ixt},157:{},158:{},159:{T:1,f:n3t},160:{T:-1},161:{T:1,f:Zm},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:g5t},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:I4t},336:{T:-1},337:{f:O4t,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:qN},357:{},358:{},359:{},360:{T:1},361:{},362:{f:P2e},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:_5t},427:{f:x5t},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:S5t},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:O_t},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:v5t},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:qN},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:e6t},633:{T:1},634:{T:-1},635:{T:1,f:J4t},636:{T:-1},637:{f:yvt},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:K5t},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:P5t},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},JN={6:{f:pB},10:{f:H0},12:{f:bs},13:{f:bs},14:{f:vs},15:{f:vs},16:{f:lo},17:{f:vs},18:{f:vs},19:{f:bs},20:{f:nne},21:{f:nne},23:{f:P2e},24:{f:sne},25:{f:vs},26:{},27:{},28:{f:fwt},29:{},34:{f:vs},35:{f:ine},38:{f:lo},39:{f:lo},40:{f:lo},41:{f:lo},42:{f:vs},43:{f:vs},47:{f:S3t},49:{f:$bt},51:{f:bs},60:{},61:{f:Obt},64:{f:vs},65:{f:Fbt},66:{f:bs},77:{},80:{},81:{},82:{},85:{f:bs},89:{},90:{},91:{},92:{f:Ebt},93:{f:pwt},94:{},95:{f:vs},96:{},97:{},99:{f:vs},125:{f:B2e},128:{f:ewt},129:{f:Abt},130:{f:bs},131:{f:vs},132:{f:vs},133:{f:Tbt},134:{},140:{f:xwt},141:{f:bs},144:{},146:{f:Awt},151:{},152:{},153:{},154:{},155:{},156:{f:bs},157:{},158:{},160:{f:Bwt},161:{f:Cwt},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:Xbt},190:{f:Zbt},193:{f:H0},197:{},198:{},199:{},200:{},201:{},202:{f:vs},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:bs},220:{},221:{f:vs},222:{},224:{f:Qbt},225:{f:xbt},226:{f:H0},227:{},229:{f:hwt},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:Cbt},253:{f:Vbt},255:{f:Rbt},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:x2e},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:vs},353:{f:H0},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:swt},431:{f:vs},432:{},433:{},434:{},437:{},438:{f:ywt},439:{f:vs},440:{f:vwt},441:{},442:{f:t8},443:{},444:{f:bs},445:{},446:{},448:{f:H0},449:{f:Dbt,r:2},450:{f:H0},512:{f:ene},513:{f:Pwt},515:{f:nwt},516:{f:zbt},517:{f:rne},519:{f:Dwt},520:{f:Pbt},523:{},545:{f:ane},549:{f:Qre},566:{},574:{f:Mbt},638:{f:Ybt},659:{},1048:{},1054:{f:Hbt},1084:{},1212:{f:cwt},2048:{f:wwt},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:B5},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:H0},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:Twt,r:12},2173:{f:k4t,r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:vs,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:owt,r:12},2197:{},2198:{f:_4t,r:12},2199:{},2200:{},2201:{},2202:{f:lwt,r:12},2203:{f:H0},2204:{},2205:{},2206:{},2207:{},2211:{f:Bbt},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:bs},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:Iwt},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:Swt},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:ene},1:{},2:{f:Fwt},3:{f:Mwt},4:{f:Nwt},5:{f:rne},7:{f:Uwt},8:{},9:{f:B5},11:{},22:{f:bs},30:{f:Kbt},31:{},32:{},33:{f:ane},36:{},37:{f:Qre},50:{f:Vwt},62:{},52:{},67:{},68:{f:bs},69:{},86:{},126:{},127:{f:Owt},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:jwt},223:{},234:{},354:{},421:{},518:{f:pB},521:{f:B5},536:{f:sne},547:{f:ine},561:{},579:{},1030:{f:pB},1033:{f:B5},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},101:{},102:{},105:{},106:{},107:{},109:{},112:{},114:{},29282:{}};function wt(t,e,r,n){var i=e;if(!isNaN(i)){var s=n||(r||[]).length||0,a=t.next(4);a.write_shift(2,i),a.write_shift(2,s),s>0&&tj(r)&&t.push(r)}}function i7t(t,e,r,n){var i=(r||[]).length||0;if(i<=8224)return wt(t,e,r,i);var s=e;if(!isNaN(s)){for(var a=r.parts||[],o=0,c=0,l=0;l+(a[o]||8224)<=8224;)l+=a[o]||8224,o++;var u=t.next(4);for(u.write_shift(2,s),u.write_shift(2,l),t.push(r.slice(c,c+l)),c+=l;c<i;){for(u=t.next(4),u.write_shift(2,60),l=0;l+(a[o]||8224)<=8224;)l+=a[o]||8224,o++;u.write_shift(2,l),t.push(r.slice(c,c+l)),c+=l}}}function s8(t,e,r){return t||(t=Ge(7)),t.write_shift(2,e),t.write_shift(2,r),t.write_shift(2,0),t.write_shift(1,0),t}function s7t(t,e,r,n){var i=Ge(9);return s8(i,t,e),E2e(r,n||"b",i),i}function a7t(t,e,r){var n=Ge(8+2*r.length);return s8(n,t,e),n.write_shift(1,r.length),n.write_shift(r.length,r,"sbcs"),n.l<n.length?n.slice(0,n.l):n}function o7t(t,e,r,n){if(e.v!=null)switch(e.t){case"d":case"n":var i=e.t=="d"?Ls(Xi(e.v)):e.v;i==(i|0)&&i>=0&&i<65536?wt(t,2,$wt(r,n,i)):wt(t,3,Lwt(r,n,i));return;case"b":case"e":wt(t,5,s7t(r,n,e.v,e.t));return;case"s":case"str":wt(t,4,a7t(r,n,e.v==null?"":String(e.v).slice(0,255)));return}wt(t,1,s8(null,r,n))}function c7t(t,e,r,n){var i=e["!data"]!=null,s=pn(e["!ref"]||"A1"),a="",o=[];if(s.e.c>255||s.e.r>16383){if(n.WTF)throw new Error("Range "+(e["!ref"]||"A1")+" exceeds format limit A1:IV16384");s.e.c=Math.min(s.e.c,255),s.e.r=Math.min(s.e.c,16383)}for(var c=[],l=s.s.c;l<=s.e.c;++l)o[l]=Hr(l);for(var u=s.s.r;u<=s.e.r;++u)for(i&&(c=e["!data"][u]||[]),a=hn(u),l=s.s.c;l<=s.e.c;++l){var f=i?c[l]:e[o[l]+a];f&&o7t(t,f,u,l)}}function l7t(t,e){for(var r=e||{},n=Ac(),i=0,s=0;s<t.SheetNames.length;++s)t.SheetNames[s]==r.sheet&&(i=s);if(i==0&&r.sheet&&t.SheetNames[0]!=r.sheet)throw new Error("Sheet not found: "+r.sheet);return wt(n,r.biff==4?1033:r.biff==3?521:9,dj(t,16,r)),c7t(n,t.Sheets[t.SheetNames[i]],i,r),wt(n,10),n.end()}function u7t(t,e,r){wt(t,49,Ubt({sz:12,color:{theme:1},name:"Arial",family:2,scheme:"minor"},r))}function f7t(t,e,r){e&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var i=n[0];i<=n[1];++i)e[i]!=null&&wt(t,1054,Wbt(i,e[i],r))})}function h7t(t,e){var r=Ge(19);r.write_shift(4,2151),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,1),r.write_shift(4,0),wt(t,2151,r),r=Ge(39),r.write_shift(4,2152),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,0),r.write_shift(4,0),r.write_shift(2,1),r.write_shift(4,4),r.write_shift(2,0),C2e(pn(e["!ref"]||"A1"),r),r.write_shift(4,4),wt(t,2152,r)}function d7t(t,e){for(var r=0;r<16;++r)wt(t,224,tne({numFmtId:0,style:!0},0,e));e.cellXfs.forEach(function(n){wt(t,224,tne(n,0,e))})}function p7t(t,e){for(var r=0;r<e["!links"].length;++r){var n=e["!links"][r];wt(t,440,bwt(n)),n[1].Tooltip&&wt(t,2048,_wt(n))}delete e["!links"]}function g7t(t,e){if(e){var r=0;e.forEach(function(n,i){++r<=256&&n&&wt(t,125,kwt(WA(i,n),i))})}}function m7t(t,e,r,n,i){var s=16+hp(i.cellXfs,e,i);if(e.v==null&&!e.bf){wt(t,513,pm(r,n,s));return}if(e.bf)wt(t,6,D8t(e,r,n,i,s));else switch(e.t){case"d":case"n":var a=e.t=="d"?Ls(Xi(e.v)):e.v;wt(t,515,iwt(r,n,a,s));break;case"b":case"e":wt(t,517,rwt(r,n,e.v,s,i,e.t));break;case"s":case"str":if(i.bookSST){var o=wj(i.Strings,e.v==null?"":String(e.v),i.revStrings);wt(t,253,jbt(r,n,o,s))}else wt(t,516,qbt(r,n,(e.v==null?"":String(e.v)).slice(0,255),s,i));break;default:wt(t,513,pm(r,n,s))}}function y7t(t,e,r){var n=Ac(),i=r.SheetNames[t],s=r.Sheets[i]||{},a=(r||{}).Workbook||{},o=(a.Sheets||[])[t]||{},c=s["!data"]!=null,l=e.biff==8,u,f="",h=[],d=pn(s["!ref"]||"A1"),g=l?65536:16384;if(d.e.c>255||d.e.r>=g){if(e.WTF)throw new Error("Range "+(s["!ref"]||"A1")+" exceeds format limit A1:IV16384");d.e.c=Math.min(d.e.c,255),d.e.r=Math.min(d.e.c,g-1)}wt(n,2057,dj(r,16,e)),wt(n,13,Dl(1)),wt(n,12,Dl(100)),wt(n,15,Fo(!0)),wt(n,17,Fo(!1)),wt(n,16,hm(.001)),wt(n,95,Fo(!0)),wt(n,42,Fo(!1)),wt(n,43,Fo(!1)),wt(n,130,Dl(1)),wt(n,128,twt()),wt(n,131,Fo(!1)),wt(n,132,Fo(!1)),l&&g7t(n,s["!cols"]),wt(n,512,Gbt(d,e)),l&&(s["!links"]=[]);for(var p=[],m=[],y=d.s.c;y<=d.e.c;++y)h[y]=Hr(y);for(var v=d.s.r;v<=d.e.r;++v)for(c&&(m=s["!data"][v]||[]),f=hn(v),y=d.s.c;y<=d.e.c;++y){u=h[y]+f;var _=c?m[y]:s[u];_&&(m7t(n,_,v,y,e),l&&_.l&&s["!links"].push([u,_.l]),l&&_.c&&p.push([u,_.c]))}var x=o.CodeName||o.name||i;return l&&wt(n,574,Lbt((a.Views||[])[0])),l&&(s["!merges"]||[]).length&&wt(n,229,dwt(s["!merges"])),l&&p7t(n,s),wt(n,442,S2e(x)),l&&h7t(n,s),wt(n,10),n.end()}function v7t(t,e,r){var n=Ac(),i=(t||{}).Workbook||{},s=i.Sheets||[],a=i.WBProps||{},o=r.biff==8,c=r.biff==5;if(wt(n,2057,dj(t,5,r)),r.bookType=="xla"&&wt(n,135),wt(n,225,o?Dl(1200):null),wt(n,193,rbt(2)),c&&wt(n,191),c&&wt(n,192),wt(n,226),wt(n,92,Sbt("SheetJS",r)),wt(n,66,Dl(o?1200:1252)),o&&wt(n,353,Dl(0)),o&&wt(n,448),wt(n,317,Rwt(t.SheetNames.length)),o&&t.vbaraw&&wt(n,211),o&&t.vbaraw){var l=a.CodeName||"ThisWorkbook";wt(n,442,S2e(l))}wt(n,156,Dl(17)),wt(n,25,Fo(!1)),wt(n,18,Fo(!1)),wt(n,19,Dl(0)),o&&wt(n,431,Fo(!1)),o&&wt(n,444,Dl(0)),wt(n,61,Nbt()),wt(n,64,Fo(!1)),wt(n,141,Dl(0)),wt(n,34,Fo(J5t(t)=="true")),wt(n,14,Fo(!0)),o&&wt(n,439,Fo(!1)),wt(n,218,Dl(0)),u7t(n,t,r),f7t(n,t.SSF,r),d7t(n,r),o&&wt(n,352,Fo(!1));var u=n.end(),f=Ac();o&&wt(f,140,Ewt()),o&&r.Strings&&i7t(f,252,Ibt(r.Strings)),wt(f,10);var h=f.end(),d=Ac(),g=0,p=0;for(p=0;p<t.SheetNames.length;++p)g+=(o?12:11)+(o?2:1)*t.SheetNames[p].length;var m=u.length+g+h.length;for(p=0;p<t.SheetNames.length;++p){var y=s[p]||{};wt(d,133,kbt({pos:m,hs:y.Hidden||0,dt:0,name:t.SheetNames[p]},r)),m+=e[p].length}var v=d.end();if(g!=v.length)throw new Error("BS8 "+g+" != "+v.length);var _=[];return u.length&&_.push(u),v.length&&_.push(v),h.length&&_.push(h),Ds(_)}function b7t(t,e){var r=e||{},n=[];t&&!t.SSF&&(t.SSF=ii(tr)),t&&t.SSF&&(Eb(),J6(t.SSF),r.revssf=FA(t.SSF),r.revssf[t.SSF[65535]]=0,r.ssf=t.SSF),r.Strings=[],r.Strings.Count=0,r.Strings.Unique=0,Aj(r),r.cellXfs=[],hp(r.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={});for(var i=0;i<t.SheetNames.length;++i)n[n.length]=y7t(i,r,t);return n.unshift(v7t(t,n,r)),Ds(n)}function uye(t,e){for(var r=0;r<=t.SheetNames.length;++r){var n=t.Sheets[t.SheetNames[r]];if(!(!n||!n["!ref"])){var i=Js(n["!ref"]);i.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+t.SheetNames[r]+"' extends beyond column IV (255).  Data may be lost.")}}var s=e||{};switch(s.biff||2){case 8:case 5:return b7t(t,e);case 4:case 3:case 2:return l7t(t,e)}throw new Error("invalid type "+s.bookType+" for BIFF")}function yne(t,e){var r=e||{},n=r.dense!=null?r.dense:tyt,i={};n&&(i["!data"]=[]),t=t.replace(/<!--.*?-->/g,"");var s=t.match(/<table/i);if(!s)throw new Error("Invalid HTML: could not find <table>");var a=t.match(/<\/table/i),o=s.index,c=a&&a.index||t.length,l=Uyt(t.slice(o,c),/(:?<tr[^>]*>)/i,"<tr>"),u=-1,f=0,h=0,d=0,g={s:{r:1e7,c:1e7},e:{r:0,c:0}},p=[];for(o=0;o<l.length;++o){var m=l[o].trim(),y=m.slice(0,3).toLowerCase();if(y=="<tr"){if(++u,r.sheetRows&&r.sheetRows<=u){--u;break}f=0;continue}if(!(y!="<td"&&y!="<th")){var v=m.split(/<\/t[dh]>/i);for(c=0;c<v.length;++c){var _=v[c].trim();if(_.match(/<t[dh]/i)){for(var x=_,A=0;x.charAt(0)=="<"&&(A=x.indexOf(">"))>-1;)x=x.slice(A+1);for(var C=0;C<p.length;++C){var R=p[C];R.s.c==f&&R.s.r<u&&u<=R.e.r&&(f=R.e.c+1,C=-1)}var M=Lt(_.slice(0,_.indexOf(">")));d=M.colspan?+M.colspan:1,((h=+M.rowspan)>1||d>1)&&p.push({s:{r:u,c:f},e:{r:u+(h||1)-1,c:f+d-1}});var N=M.t||M["data-t"]||"";if(!x.length){f+=d;continue}if(x=Wme(x),g.s.r>u&&(g.s.r=u),g.e.r<u&&(g.e.r=u),g.s.c>f&&(g.s.c=f),g.e.c<f&&(g.e.c=f),!x.length){f+=d;continue}var Y={t:"s",v:x};r.raw||!x.trim().length||N=="s"||(x==="TRUE"?Y={t:"b",v:!0}:x==="FALSE"?Y={t:"b",v:!1}:isNaN(rl(x))?isNaN(dv(x).getDate())||(Y={t:"d",v:Xi(x)},r.cellDates||(Y={t:"n",v:Ls(Y.v)}),Y.z=r.dateNF||tr[14]):Y={t:"n",v:rl(x)}),n?(i["!data"][u]||(i["!data"][u]=[]),i["!data"][u][f]=Y):i[en({r:u,c:f})]=Y,f+=d}}}}return i["!ref"]=Ir(g),p.length&&(i["!merges"]=p),i}function fye(t,e,r,n){for(var i=t["!merges"]||[],s=[],a={},o=t["!data"]!=null,c=e.s.c;c<=e.e.c;++c){for(var l=0,u=0,f=0;f<i.length;++f)if(!(i[f].s.r>r||i[f].s.c>c)&&!(i[f].e.r<r||i[f].e.c<c)){if(i[f].s.r<r||i[f].s.c<c){l=-1;break}l=i[f].e.r-i[f].s.r+1,u=i[f].e.c-i[f].s.c+1;break}if(!(l<0)){var h=Hr(c)+hn(r),d=o?(t["!data"][r]||[])[c]:t[h],g=d&&d.v!=null&&(d.h||YV(d.w||(uh(d),d.w)||""))||"";a={},l>1&&(a.rowspan=l),u>1&&(a.colspan=u),n.editable?g='<span contenteditable="true">'+g+"</span>":d&&(a["data-t"]=d&&d.t||"z",d.v!=null&&(a["data-v"]=d.v),d.z!=null&&(a["data-z"]=d.z),d.l&&(d.l.Target||"#").charAt(0)!="#"&&(g='<a href="'+d.l.Target+'">'+g+"</a>")),a.id=(n.id||"sjs")+"-"+h,s.push(yt("td",g,a))}}var p="<tr>";return p+s.join("")+"</tr>"}var hye='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',dye="</body></html>";function w7t(t,e){var r=t.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!r||r.length==0)throw new Error("Invalid HTML: could not find <table>");if(r.length==1){var n=fp(yne(r[0],e),e);return n.bookType="html",n}var i=Rj();return r.forEach(function(s,a){GA(i,yne(s,e),"Sheet"+(a+1))}),i.bookType="html",i}function pye(t,e,r){var n=[];return n.join("")+"<table"+(r&&r.id?' id="'+r.id+'"':"")+">"}function gye(t,e){var r=e||{},n=r.header!=null?r.header:hye,i=r.footer!=null?r.footer:dye,s=[n],a=Js(t["!ref"]);s.push(pye(t,a,r));for(var o=a.s.r;o<=a.e.r;++o)s.push(fye(t,a,o,r));return s.push("</table>"+i),s.join("")}function mye(t,e,r){var n=e.rows;if(!n)throw"Unsupported origin when "+e.tagName+" is not a TABLE";var i=r||{},s=t["!data"]!=null,a=0,o=0;if(i.origin!=null)if(typeof i.origin=="number")a=i.origin;else{var c=typeof i.origin=="string"?Hn(i.origin):i.origin;a=c.r,o=c.c}var l=Math.min(i.sheetRows||1e7,n.length),u={s:{r:0,c:0},e:{r:a,c:o}};if(t["!ref"]){var f=Js(t["!ref"]);u.s.r=Math.min(u.s.r,f.s.r),u.s.c=Math.min(u.s.c,f.s.c),u.e.r=Math.max(u.e.r,f.e.r),u.e.c=Math.max(u.e.c,f.e.c),a==-1&&(u.e.r=a=f.e.r+1)}var h=[],d=0,g=t["!rows"]||(t["!rows"]=[]),p=0,m=0,y=0,v=0,_=0,x=0;for(t["!cols"]||(t["!cols"]=[]);p<n.length&&m<l;++p){var A=n[p];if(vne(A)){if(i.display)continue;g[m]={hidden:!0}}var C=A.cells;for(y=v=0;y<C.length;++y){var R=C[y];if(!(i.display&&vne(R))){var M=R.hasAttribute("data-v")?R.getAttribute("data-v"):R.hasAttribute("v")?R.getAttribute("v"):Wme(R.innerHTML),N=R.getAttribute("data-z")||R.getAttribute("z");for(d=0;d<h.length;++d){var Y=h[d];Y.s.c==v+o&&Y.s.r<m+a&&m+a<=Y.e.r&&(v=Y.e.c+1-o,d=-1)}x=+R.getAttribute("colspan")||1,((_=+R.getAttribute("rowspan")||1)>1||x>1)&&h.push({s:{r:m+a,c:v+o},e:{r:m+a+(_||1)-1,c:v+o+(x||1)-1}});var H={t:"s",v:M},E=R.getAttribute("data-t")||R.getAttribute("t")||"";M!=null&&(M.length==0?H.t=E||"z":i.raw||M.trim().length==0||E=="s"||(M==="TRUE"?H={t:"b",v:!0}:M==="FALSE"?H={t:"b",v:!1}:isNaN(rl(M))?isNaN(dv(M).getDate())||(H={t:"d",v:Xi(M)},i.cellDates||(H={t:"n",v:Ls(H.v)}),H.z=i.dateNF||tr[14]):H={t:"n",v:rl(M)})),H.z===void 0&&N!=null&&(H.z=N);var k="",w=R.getElementsByTagName("A");if(w&&w.length)for(var T=0;T<w.length&&!(w[T].hasAttribute("href")&&(k=w[T].getAttribute("href"),k.charAt(0)!="#"));++T);k&&k.charAt(0)!="#"&&k.slice(0,11).toLowerCase()!="javascript:"&&(H.l={Target:k}),s?(t["!data"][m+a]||(t["!data"][m+a]=[]),t["!data"][m+a][v+o]=H):t[en({c:v+o,r:m+a})]=H,u.e.c<v+o&&(u.e.c=v+o),v+=x}}++m}return h.length&&(t["!merges"]=(t["!merges"]||[]).concat(h)),u.e.r=Math.max(u.e.r,m-1+a),t["!ref"]=Ir(u),m>=l&&(t["!fullref"]=Ir((u.e.r=n.length-p+m-1+a,u))),t}function yye(t,e){var r=e||{},n={};return r.dense&&(n["!data"]=[]),mye(n,t,e)}function _7t(t,e){var r=fp(yye(t,e),e);return r}function vne(t){var e="",r=x7t(t);return r&&(e=r(t).getPropertyValue("display")),e||(e=t.style&&t.style.display),e==="none"}function x7t(t){return t.ownerDocument.defaultView&&typeof t.ownerDocument.defaultView.getComputedStyle=="function"?t.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}function E7t(t){var e=t.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,function(n,i){return Array(parseInt(i,10)+1).join(" ")}).replace(/<text:tab[^>]*\/>/g,"	").replace(/<text:line-break\/>/g,`
`),r=yn(e.replace(/<[^>]*>/g,""));return[r]}function vye(t,e,r){var n=r||{},i=UA(t);Is.lastIndex=0,i=i.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");for(var s,a,o="",c="",l,u=0,f=-1,h="";s=Is.exec(i);)switch(s[3]=s[3].replace(/_.*$/,"")){case"number-style":case"currency-style":case"percentage-style":case"date-style":case"time-style":case"text-style":s[1]==="/"?(a["truncate-on-overflow"]=="false"&&(o.match(/h/)?o=o.replace(/h+/,"[$&]"):o.match(/m/)?o=o.replace(/m+/,"[$&]"):o.match(/s/)&&(o=o.replace(/s+/,"[$&]"))),n[a.name]=o,o=""):s[0].charAt(s[0].length-2)!=="/"&&(o="",a=Lt(s[0],!1));break;case"boolean-style":s[1]==="/"?(n[a.name]="General",o=""):s[0].charAt(s[0].length-2)!=="/"&&(o="",a=Lt(s[0],!1));break;case"boolean":o+="General";break;case"text":s[1]==="/"?(h=i.slice(f,Is.lastIndex-s[0].length),h=="%"&&a[0]=="<number:percentage-style"?o+="%":o+='"'+h.replace(/"/g,'""')+'"'):s[0].charAt(s[0].length-2)!=="/"&&(f=Is.lastIndex);break;case"day":switch(l=Lt(s[0],!1),l.style){case"short":o+="d";break;case"long":o+="dd";break;default:o+="dd";break}break;case"day-of-week":switch(l=Lt(s[0],!1),l.style){case"short":o+="ddd";break;case"long":o+="dddd";break;default:o+="ddd";break}break;case"era":switch(l=Lt(s[0],!1),l.style){case"short":o+="ee";break;case"long":o+="eeee";break;default:o+="eeee";break}break;case"hours":switch(l=Lt(s[0],!1),l.style){case"short":o+="h";break;case"long":o+="hh";break;default:o+="hh";break}break;case"minutes":switch(l=Lt(s[0],!1),l.style){case"short":o+="m";break;case"long":o+="mm";break;default:o+="mm";break}break;case"month":switch(l=Lt(s[0],!1),l.textual&&(o+="mm"),l.style){case"short":o+="m";break;case"long":o+="mm";break;default:o+="m";break}break;case"seconds":{switch(l=Lt(s[0],!1),l.style){case"short":o+="s";break;case"long":o+="ss";break;default:o+="ss";break}l["decimal-places"]&&(o+="."+An("0",+l["decimal-places"]))}break;case"year":switch(l=Lt(s[0],!1),l.style){case"short":o+="yy";break;case"long":o+="yyyy";break;default:o+="yy";break}break;case"am-pm":o+="AM/PM";break;case"week-of-year":case"quarter":console.error("Excel does not support ODS format token "+s[3]);break;case"fill-character":s[1]==="/"?(h=i.slice(f,Is.lastIndex-s[0].length),o+='"'+h.replace(/"/g,'""')+'"*'):s[0].charAt(s[0].length-2)!=="/"&&(f=Is.lastIndex);break;case"scientific-number":l=Lt(s[0],!1),o+="0."+An("0",+l["min-decimal-places"]||+l["decimal-places"]||2)+An("?",+l["decimal-places"]-+l["min-decimal-places"]||0)+"E"+(ei(l["forced-exponent-sign"])?"+":"")+An("0",+l["min-exponent-digits"]||2);break;case"fraction":l=Lt(s[0],!1),+l["min-integer-digits"]?o+=An("0",+l["min-integer-digits"]):o+="#",o+=" ",o+=An("?",+l["min-numerator-digits"]||1),o+="/",+l["denominator-value"]?o+=l["denominator-value"]:o+=An("?",+l["min-denominator-digits"]||1);break;case"currency-symbol":s[1]==="/"?o+='"'+i.slice(f,Is.lastIndex-s[0].length).replace(/"/g,'""')+'"':s[0].charAt(s[0].length-2)!=="/"?f=Is.lastIndex:o+="$";break;case"text-properties":switch(l=Lt(s[0],!1),(l.color||"").toLowerCase().replace("#","")){case"ff0000":case"red":o="[Red]"+o;break}break;case"text-content":o+="@";break;case"map":l=Lt(s[0],!1),yn(l.condition)=="value()>=0"?o=n[l["apply-style-name"]]+";"+o:console.error("ODS number format may be incorrect: "+l.condition);break;case"number":if(s[1]==="/")break;l=Lt(s[0],!1),c="",c+=An("0",+l["min-integer-digits"]||1),ei(l.grouping)&&(c=Cd(An("#",Math.max(0,4-c.length))+c)),(+l["min-decimal-places"]||+l["decimal-places"])&&(c+="."),+l["min-decimal-places"]&&(c+=An("0",+l["min-decimal-places"]||1)),+l["decimal-places"]-(+l["min-decimal-places"]||0)&&(c+=An("0",+l["decimal-places"]-(+l["min-decimal-places"]||0))),o+=c;break;case"embedded-text":s[1]==="/"?u==0?o+='"'+i.slice(f,Is.lastIndex-s[0].length).replace(/"/g,'""')+'"':o=o.slice(0,u)+'"'+i.slice(f,Is.lastIndex-s[0].length).replace(/"/g,'""')+'"'+o.slice(u):s[0].charAt(s[0].length-2)!=="/"&&(f=Is.lastIndex,u=-+Lt(s[0],!1).position||0);break}return n}function bye(t,e,r){var n=e||{},i=UA(t),s=[],a,o,c,l="",u=0,f,h,d={},g=[],p={};n.dense&&(p["!data"]=[]);var m,y,v={value:""},_="",x=0,A=[],C=-1,R=-1,M={s:{r:1e6,c:1e7},e:{r:0,c:0}},N=0,Y=r||{},H={},E=[],k={},w=0,T=0,L=[],I=1,U=1,O=[],D={Names:[],WBProps:{}},P={},B=["",""],z=[],F={},X="",W=0,q=!1,G=!1,ee=0,ae=0;for(Is.lastIndex=0,i=i.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");m=Is.exec(i);)switch(m[3]=m[3].replace(/_.*$/,"")){case"table":case"工作表":m[1]==="/"?(M.e.c>=M.s.c&&M.e.r>=M.s.r?p["!ref"]=Ir(M):p["!ref"]="A1:A1",n.sheetRows>0&&n.sheetRows<=M.e.r&&(p["!fullref"]=p["!ref"],M.e.r=n.sheetRows-1,p["!ref"]=Ir(M)),E.length&&(p["!merges"]=E),L.length&&(p["!rows"]=L),f.name=f.名称||f.name,typeof JSON<"u"&&JSON.stringify(f),g.push(f.name),d[f.name]=p,G=!1):m[0].charAt(m[0].length-2)!=="/"&&(f=Lt(m[0],!1),C=R=-1,M.s.r=M.s.c=1e7,M.e.r=M.e.c=0,p={},n.dense&&(p["!data"]=[]),E=[],L=[],G=!0);break;case"table-row-group":m[1]==="/"?--N:++N;break;case"table-row":case"行":if(m[1]==="/"){C+=I,I=1;break}if(h=Lt(m[0],!1),h.行号?C=h.行号-1:C==-1&&(C=0),I=+h["number-rows-repeated"]||1,I<10)for(ee=0;ee<I;++ee)N>0&&(L[C+ee]={level:N});R=-1;break;case"covered-table-cell":m[1]!=="/"&&++R,n.sheetStubs&&(n.dense?(p["!data"][C]||(p["!data"][C]=[]),p["!data"][C][R]={t:"z"}):p[en({r:C,c:R})]={t:"z"}),_="",A=[];break;case"table-cell":case"数据":if(m[0].charAt(m[0].length-2)==="/")++R,v=Lt(m[0],!1),U=parseInt(v["number-columns-repeated"]||"1",10),y={t:"z",v:null},v.formula&&n.cellFormula!=!1&&(y.f=pne(yn(v.formula))),v["style-name"]&&H[v["style-name"]]&&(y.z=H[v["style-name"]]),(v.数据类型||v["value-type"])=="string"&&(y.t="s",y.v=yn(v["string-value"]||""),n.dense?(p["!data"][C]||(p["!data"][C]=[]),p["!data"][C][R]=y):p[Hr(R)+hn(C)]=y),R+=U-1;else if(m[1]!=="/"){++R,_="",x=0,A=[],U=1;var te=I?C+I-1:C;if(R>M.e.c&&(M.e.c=R),R<M.s.c&&(M.s.c=R),C<M.s.r&&(M.s.r=C),te>M.e.r&&(M.e.r=te),v=Lt(m[0],!1),z=[],F={},y={t:v.数据类型||v["value-type"],v:null},v["style-name"]&&H[v["style-name"]]&&(y.z=H[v["style-name"]]),n.cellFormula)if(v.formula&&(v.formula=yn(v.formula)),v["number-matrix-columns-spanned"]&&v["number-matrix-rows-spanned"]&&(w=parseInt(v["number-matrix-rows-spanned"],10)||0,T=parseInt(v["number-matrix-columns-spanned"],10)||0,k={s:{r:C,c:R},e:{r:C+w-1,c:R+T-1}},y.F=Ir(k),O.push([k,y.F])),v.formula)y.f=pne(v.formula);else for(ee=0;ee<O.length;++ee)C>=O[ee][0].s.r&&C<=O[ee][0].e.r&&R>=O[ee][0].s.c&&R<=O[ee][0].e.c&&(y.F=O[ee][1]);switch((v["number-columns-spanned"]||v["number-rows-spanned"])&&(w=parseInt(v["number-rows-spanned"],10)||0,T=parseInt(v["number-columns-spanned"],10)||0,k={s:{r:C,c:R},e:{r:C+w-1,c:R+T-1}},E.push(k)),v["number-columns-repeated"]&&(U=parseInt(v["number-columns-repeated"],10)),y.t){case"boolean":y.t="b",y.v=ei(v["boolean-value"])||+v["boolean-value"]>=1;break;case"float":y.t="n",y.v=parseFloat(v.value);break;case"percentage":y.t="n",y.v=parseFloat(v.value);break;case"currency":y.t="n",y.v=parseFloat(v.value);break;case"date":y.t="d",y.v=Xi(v["date-value"]),n.cellDates||(y.t="n",y.v=Ls(y.v,D.WBProps.date1904)-ae),y.z||(y.z="m/d/yy");break;case"time":y.t="n",y.v=Nyt(v["time-value"])/86400,n.cellDates&&(y.t="d",y.v=$A(y.v)),y.z||(y.z="HH:MM:SS");break;case"number":y.t="n",y.v=parseFloat(v.数据数值);break;default:if(y.t==="string"||y.t==="text"||!y.t)y.t="s",v["string-value"]!=null&&(_=yn(v["string-value"]),A=[]);else throw new Error("Unsupported value type "+y.t)}}else{if(q=!1,y.t==="s"&&(y.v=_||"",A.length&&(y.R=A),q=x==0),P.Target&&(y.l=P),z.length>0&&(y.c=z,z=[]),_&&n.cellText!==!1&&(y.w=_),q&&(y.t="z",delete y.v),(!q||n.sheetStubs)&&!(n.sheetRows&&n.sheetRows<=C))for(var K=0;K<I;++K){if(U=parseInt(v["number-columns-repeated"]||"1",10),n.dense)for(p["!data"][C+K]||(p["!data"][C+K]=[]),p["!data"][C+K][R]=K==0?y:ii(y);--U>0;)p["!data"][C+K][R+U]=ii(y);else for(p[en({r:C+K,c:R})]=y;--U>0;)p[en({r:C+K,c:R+U})]=ii(y);M.e.c<=R&&(M.e.c=R)}U=parseInt(v["number-columns-repeated"]||"1",10),R+=U-1,U=0,y={},_="",A=[]}P={};break;case"document":case"document-content":case"电子表格文档":case"spreadsheet":case"主体":case"scripts":case"styles":case"font-face-decls":case"master-styles":if(m[1]==="/"){if((a=s.pop())[0]!==m[3])throw"Bad state: "+a}else m[0].charAt(m[0].length-2)!=="/"&&s.push([m[3],!0]);break;case"annotation":if(m[1]==="/"){if((a=s.pop())[0]!==m[3])throw"Bad state: "+a;F.t=_,A.length&&(F.R=A),F.a=X,z.push(F)}else m[0].charAt(m[0].length-2)!=="/"&&s.push([m[3],!1]);X="",W=0,_="",x=0,A=[];break;case"creator":m[1]==="/"?X=i.slice(W,m.index):W=m.index+m[0].length;break;case"meta":case"元数据":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if(m[1]==="/"){if((a=s.pop())[0]!==m[3])throw"Bad state: "+a}else m[0].charAt(m[0].length-2)!=="/"&&s.push([m[3],!1]);_="",x=0,A=[];break;case"scientific-number":case"currency-symbol":case"fill-character":break;case"text-style":case"boolean-style":case"number-style":case"currency-style":case"percentage-style":case"date-style":case"time-style":if(m[1]==="/"){var re=Is.lastIndex;vye(i.slice(c,Is.lastIndex),e,Y),Is.lastIndex=re}else m[0].charAt(m[0].length-2)!=="/"&&(c=Is.lastIndex-m[0].length);break;case"script":break;case"libraries":break;case"automatic-styles":break;case"default-style":case"page-layout":break;case"style":{var V=Lt(m[0],!1);V.family=="table-cell"&&Y[V["data-style-name"]]&&(H[V.name]=Y[V["data-style-name"]])}break;case"map":break;case"font-face":break;case"paragraph-properties":break;case"table-properties":break;case"table-column-properties":break;case"table-row-properties":break;case"table-cell-properties":break;case"number":break;case"fraction":break;case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":break;case"boolean":break;case"text":if(m[0].slice(-2)==="/>")break;if(m[1]==="/")switch(s[s.length-1][0]){case"number-style":case"date-style":case"time-style":l+=i.slice(u,m.index);break}else u=m.index+m[0].length;break;case"named-range":o=Lt(m[0],!1),B=gB(o["cell-range-address"]);var oe={Name:o.name,Ref:B[0]+"!"+B[1]};G&&(oe.Sheet=g.length),D.Names.push(oe);break;case"text-content":break;case"text-properties":break;case"embedded-text":break;case"body":case"电子表格":break;case"forms":break;case"table-column":break;case"table-header-rows":break;case"table-rows":break;case"table-column-group":break;case"table-header-columns":break;case"table-columns":break;case"null-date":switch(o=Lt(m[0],!1),o["date-value"]){case"1904-01-01":D.WBProps.date1904=!0;case"1900-01-01":ae=0}break;case"graphic-properties":break;case"calculation-settings":break;case"named-expressions":break;case"label-range":break;case"label-ranges":break;case"named-expression":break;case"sort":break;case"sort-by":break;case"sort-groups":break;case"tab":break;case"line-break":break;case"span":break;case"p":case"文本串":if(["master-styles"].indexOf(s[s.length-1][0])>-1)break;if(m[1]==="/"&&(!v||!v["string-value"])){var he=E7t(i.slice(x,m.index));_=(_.length>0?_+`
`:"")+he[0]}else Lt(m[0],!1),x=m.index+m[0].length;break;case"s":break;case"database-range":if(m[1]==="/")break;try{B=gB(Lt(m[0])["target-range-address"]),d[B[0]]["!autofilter"]={ref:B[1]}}catch{}break;case"date":break;case"object":break;case"title":case"标题":break;case"desc":break;case"binary-data":break;case"table-source":break;case"scenario":break;case"iteration":break;case"content-validations":break;case"content-validation":break;case"help-message":break;case"error-message":break;case"database-ranges":break;case"filter":break;case"filter-and":break;case"filter-or":break;case"filter-condition":break;case"list-level-style-bullet":break;case"list-level-style-number":break;case"list-level-properties":break;case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":break;case"event-listener":break;case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":break;case"config-item":break;case"page-number":break;case"page-count":break;case"time":break;case"cell-range-source":break;case"detective":break;case"operation":break;case"highlighted-range":break;case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":break;case"rect":break;case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":break;case"properties":break;case"property":break;case"a":if(m[1]!=="/"){if(P=Lt(m[0],!1),!P.href)break;P.Target=yn(P.href),delete P.href,P.Target.charAt(0)=="#"&&P.Target.indexOf(".")>-1?(B=gB(P.Target.slice(1)),P.Target="#"+B[0]+"!"+B[1]):P.Target.match(/^\.\.[\\\/]/)&&(P.Target=P.Target.slice(3))}break;case"table-protection":break;case"data-pilot-grand-total":break;case"office-document-common-attrs":break;default:switch(m[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case"表:":case"字:":break;default:if(n.WTF)throw new Error(m)}}var ne={Sheets:d,SheetNames:g,Workbook:D};return n.bookSheets&&delete ne.Sheets,ne}function bne(t,e){e=e||{},Pl(t,"META-INF/manifest.xml")&&Lvt(Cs(t,"META-INF/manifest.xml"),e);var r=yc(t,"styles.xml"),n=r&&vye(ni(r)),i=yc(t,"content.xml");if(!i)throw new Error("Missing content.xml in ODS / UOF file");var s=bye(ni(i),e,n);return Pl(t,"meta.xml")&&(s.Props=f2e(Cs(t,"meta.xml"))),s.bookType="ods",s}function wne(t,e){var r=bye(t,e);return r.bookType="fods",r}var S7t=function(){var t=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),e="<office:document-styles "+S4({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+t+"</office:document-styles>";return function(){return As+e}}();function A7t(t,e){var r="number",n="",i={"style:name":e},s="",a=0;t=t.replace(/"[$]"/g,"$");e:{if(t.indexOf(";")>-1&&(console.error("Unsupported ODS Style Map exported.  Using first branch of "+t),t=t.slice(0,t.indexOf(";"))),t=="@"){r="text",n="<number:text-content/>";break e}if(t.indexOf(/\$/)>-1&&(r="currency"),t[a]=='"'){for(s="";t[++a]!='"'||t[++a]=='"';)s+=t[a];--a,t[a+1]=="*"?(a++,n+="<number:fill-character>"+$r(s.replace(/""/g,'"'))+"</number:fill-character>"):n+="<number:text>"+$r(s.replace(/""/g,'"'))+"</number:text>",t=t.slice(a+1),a=0}var o=t.match(/# (\?+)\/(\?+)/);if(o){n+=yt("number:fraction",null,{"number:min-integer-digits":0,"number:min-numerator-digits":o[1].length,"number:max-denominator-value":Math.max(+o[1].replace(/./g,"9"),+o[2].replace(/./g,"9"))});break e}if(o=t.match(/# (\?+)\/(\d+)/)){n+=yt("number:fraction",null,{"number:min-integer-digits":0,"number:min-numerator-digits":o[1].length,"number:denominator-value":+o[2]});break e}if(o=t.match(/(\d+)(|\.\d+)%/)){r="percentage",n+=yt("number:number",null,{"number:decimal-places":o[2]&&o.length-1||0,"number:min-decimal-places":o[2]&&o.length-1||0,"number:min-integer-digits":o[1].length})+"<number:text>%</number:text>";break e}var c=!1;if(["y","m","d"].indexOf(t[0])>-1){r="date";t:for(;a<t.length;++a)switch(s=t[a].toLowerCase()){case"h":case"s":c=!0,--a;break t;case"m":r:for(var l=a+1;l<t.length;++l)switch(t[l]){case"y":case"d":break r;case"h":case"s":c=!0,--a;break t}case"y":case"d":for(;(t[++a]||"").toLowerCase()==s[0];)s+=s[0];switch(--a,s){case"y":case"yy":n+="<number:year/>";break;case"yyy":case"yyyy":n+='<number:year number:style="long"/>';break;case"mmmmm":console.error("ODS has no equivalent of format |mmmmm|");case"m":case"mm":case"mmm":case"mmmm":n+='<number:month number:style="'+(s.length%2?"short":"long")+'" number:textual="'+(s.length>=3?"true":"false")+'"/>';break;case"d":case"dd":n+='<number:day number:style="'+(s.length%2?"short":"long")+'"/>';break;case"ddd":case"dddd":n+='<number:day-of-week number:style="'+(s.length%2?"short":"long")+'"/>';break}break;case'"':for(;t[++a]!='"'||t[++a]=='"';)s+=t[a];--a,n+="<number:text>"+$r(s.slice(1).replace(/""/g,'"'))+"</number:text>";break;case"/":n+="<number:text>"+$r(s)+"</number:text>";break;default:console.error("unrecognized character "+s+" in ODF format "+t)}if(!c)break e;t=t.slice(a+1),a=0}if(t.match(/^\[?[hms]/)){for(r=="number"&&(r="time"),t.match(/\[/)&&(t=t.replace(/[\[\]]/g,""),i["number:truncate-on-overflow"]="false");a<t.length;++a)switch(s=t[a].toLowerCase()){case"h":case"m":case"s":for(;(t[++a]||"").toLowerCase()==s[0];)s+=s[0];switch(--a,s){case"h":case"hh":n+='<number:hours number:style="'+(s.length%2?"short":"long")+'"/>';break;case"m":case"mm":n+='<number:minutes number:style="'+(s.length%2?"short":"long")+'"/>';break;case"s":case"ss":if(t[a+1]==".")do s+=t[a+1],++a;while(t[a+1]=="0");n+='<number:seconds number:style="'+(s.match("ss")?"long":"short")+'"'+(s.match(/\./)?' number:decimal-places="'+(s.match(/0+/)||[""])[0].length+'"':"")+"/>";break}break;case'"':for(;t[++a]!='"'||t[++a]=='"';)s+=t[a];--a,n+="<number:text>"+$r(s.slice(1).replace(/""/g,'"'))+"</number:text>";break;case"/":n+="<number:text>"+$r(s)+"</number:text>";break;case"a":if(t.slice(a,a+3).toLowerCase()=="a/p"){n+="<number:am-pm/>",a+=2;break}if(t.slice(a,a+5).toLowerCase()=="am/pm"){n+="<number:am-pm/>",a+=4;break}default:console.error("unrecognized character "+s+" in ODF format "+t)}break e}if(t.indexOf(/\$/)>-1&&(r="currency"),t[0]=="$"&&(n+='<number:currency-symbol number:language="en" number:country="US">$</number:currency-symbol>',t=t.slice(1),a=0),a=0,t[a]=='"'){for(;t[++a]!='"'||t[++a]=='"';)s+=t[a];--a,t[a+1]=="*"?(a++,n+="<number:fill-character>"+$r(s.replace(/""/g,'"'))+"</number:fill-character>"):n+="<number:text>"+$r(s.replace(/""/g,'"'))+"</number:text>",t=t.slice(a+1),a=0}var u=t.match(/([#0][0#,]*)(\.[0#]*|)(E[+]?0*|)/i);if(!u||!u[0])console.error("Could not find numeric part of "+t);else{var f=u[1].replace(/,/g,"");n+="<number:"+(u[3]?"scientific-":"")+'number number:min-integer-digits="'+(f.indexOf("0")==-1?"0":f.length-f.indexOf("0"))+'"'+(u[0].indexOf(",")>-1?' number:grouping="true"':"")+(u[2]&&' number:decimal-places="'+(u[2].length-1)+'"'||' number:decimal-places="0"')+(u[3]&&u[3].indexOf("+")>-1?' number:forced-exponent-sign="true"':"")+(u[3]?' number:min-exponent-digits="'+u[3].match(/0+/)[0].length+'"':"")+"></number:"+(u[3]?"scientific-":"")+"number>",a=u.index+u[0].length}if(t[a]=='"'){for(s="";t[++a]!='"'||t[++a]=='"';)s+=t[a];--a,n+="<number:text>"+$r(s.replace(/""/g,'"'))+"</number:text>"}}return n?yt("number:"+r+"-style",n,i):(console.error("Could not generate ODS number format for |"+t+"|"),"")}function _ne(t,e,r){var n=t.filter(function(i){return i.Sheet==(r==-1?null:r)});return n.length?`      <table:named-expressions>
`+n.map(function(i){var s=Q2e(i.Ref);return"        "+yt("table:named-range",null,{"table:name":i.Name,"table:cell-range-address":s,"table:base-cell-address":s.replace(/[\.]?[^\.]*$/,".$A$1")})}).join(`
`)+`
      </table:named-expressions>
`:""}var xne=function(){var t=function(s){return $r(s).replace(/  +/g,function(a){return'<text:s text:c="'+a.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},e=`          <table:table-cell />
`,r=`          <table:covered-table-cell/>
`,n=function(s,a,o,c,l){var u=[];u.push('      <table:table table:name="'+$r(a.SheetNames[o])+`" table:style-name="ta1">
`);var f=0,h=0,d=Js(s["!ref"]||"A1"),g=s["!merges"]||[],p=0,m=s["!data"]!=null;if(s["!cols"])for(h=0;h<=d.e.c;++h)u.push("        <table:table-column"+(s["!cols"][h]?' table:style-name="co'+s["!cols"][h].ods+'"':"")+`></table:table-column>
`);var y="",v=s["!rows"]||[];for(f=0;f<d.s.r;++f)y=v[f]?' table:style-name="ro'+v[f].ods+'"':"",u.push("        <table:table-row"+y+`></table:table-row>
`);for(;f<=d.e.r;++f){for(y=v[f]?' table:style-name="ro'+v[f].ods+'"':"",u.push("        <table:table-row"+y+`>
`),h=0;h<d.s.c;++h)u.push(e);for(;h<=d.e.c;++h){var _=!1,x={},A="";for(p=0;p!=g.length;++p)if(!(g[p].s.c>h)&&!(g[p].s.r>f)&&!(g[p].e.c<h)&&!(g[p].e.r<f)){(g[p].s.c!=h||g[p].s.r!=f)&&(_=!0),x["table:number-columns-spanned"]=g[p].e.c-g[p].s.c+1,x["table:number-rows-spanned"]=g[p].e.r-g[p].s.r+1;break}if(_){u.push(r);continue}var C=en({r:f,c:h}),R=m?(s["!data"][f]||[])[h]:s[C];if(R&&R.f&&(x["table:formula"]=$r(X8t(R.f)),R.F&&R.F.slice(0,C.length)==C)){var M=Js(R.F);x["table:number-matrix-columns-spanned"]=M.e.c-M.s.c+1,x["table:number-matrix-rows-spanned"]=M.e.r-M.s.r+1}if(!R){u.push(e);continue}switch(R.t){case"b":A=R.v?"TRUE":"FALSE",x["office:value-type"]="boolean",x["office:boolean-value"]=R.v?"true":"false";break;case"n":A=R.w||String(R.v||0),x["office:value-type"]="float",x["office:value"]=R.v||0;break;case"s":case"str":A=R.v==null?"":R.v,x["office:value-type"]="string";break;case"d":A=R.w||Xi(R.v).toISOString(),x["office:value-type"]="date",x["office:date-value"]=Xi(R.v).toISOString(),x["table:style-name"]="ce1";break;default:u.push(e);continue}var N=t(A);if(R.l&&R.l.Target){var Y=R.l.Target;Y=Y.charAt(0)=="#"?"#"+Q2e(Y.slice(1)):Y,Y.charAt(0)!="#"&&!Y.match(/^\w+:/)&&(Y="../"+Y),N=yt("text:a",N,{"xlink:href":Y.replace(/&/g,"&amp;")})}l[R.z]&&(x["table:style-name"]="ce"+l[R.z].slice(1)),u.push("          "+yt("table:table-cell",yt("text:p",N,{}),x)+`
`)}u.push(`        </table:table-row>
`)}return(a.Workbook||{}).Names&&u.push(_ne(a.Workbook.Names,a.SheetNames,o)),u.push(`      </table:table>
`),u.join("")},i=function(s,a){s.push(` <office:automatic-styles>
`);var o=0;a.SheetNames.map(function(f){return a.Sheets[f]}).forEach(function(f){if(f&&f["!cols"]){for(var h=0;h<f["!cols"].length;++h)if(f["!cols"][h]){var d=f["!cols"][h];if(d.width==null&&d.wpx==null&&d.wch==null)continue;j1(d),d.ods=o;var g=f["!cols"][h].wpx+"px";s.push('  <style:style style:name="co'+o+`" style:family="table-column">
`),s.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+g+`"/>
`),s.push(`  </style:style>
`),++o}}});var c=0;a.SheetNames.map(function(f){return a.Sheets[f]}).forEach(function(f){if(f&&f["!rows"]){for(var h=0;h<f["!rows"].length;++h)if(f["!rows"][h]){f["!rows"][h].ods=c;var d=f["!rows"][h].hpx+"px";s.push('  <style:style style:name="ro'+c+`" style:family="table-row">
`),s.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+d+`"/>
`),s.push(`  </style:style>
`),++c}}}),s.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),s.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),s.push(`  </style:style>
`),s.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),s.push(`   <number:month number:style="long"/>
`),s.push(`   <number:text>/</number:text>
`),s.push(`   <number:day number:style="long"/>
`),s.push(`   <number:text>/</number:text>
`),s.push(`   <number:year/>
`),s.push(`  </number:date-style>
`);var l={},u=69;return a.SheetNames.map(function(f){return a.Sheets[f]}).forEach(function(f){if(f)for(var h=f["!data"]!=null,d=Js(f["!ref"]),g=0;g<=d.e.r;++g)for(var p=0;p<=d.e.c;++p){var m=h?(f["!data"][g]||[])[p]:f[en({r:g,c:p})];if(!(!m||!m.z||m.z.toLowerCase()=="general")&&!l[m.z]){var y=A7t(m.z,"N"+u);y&&(l[m.z]="N"+u,++u,s.push(y+`
`))}}}),s.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),Ki(l).forEach(function(f){s.push('<style:style style:name="ce'+l[f].slice(1)+'" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="'+l[f]+`"/>
`)}),s.push(` </office:automatic-styles>
`),l};return function(a,o){var c=[As],l=S4({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),u=S4({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});o.bookType=="fods"?(c.push("<office:document"+l+u+`>
`),c.push(u2e().replace(/<office:document-meta.*?>/,"").replace(/<\/office:document-meta>/,"")+`
`)):c.push("<office:document-content"+l+`>
`);var f=i(c,a);c.push(`  <office:body>
`),c.push(`    <office:spreadsheet>
`),((a.Workbook||{}).WBProps||{}).date1904&&c.push(`      <table:calculation-settings table:case-sensitive="false" table:search-criteria-must-apply-to-whole-cell="true" table:use-wildcards="true" table:use-regular-expressions="false" table:automatic-find-labels="false">
        <table:null-date table:date-value="1904-01-01"/>
      </table:calculation-settings>
`);for(var h=0;h!=a.SheetNames.length;++h)c.push(n(a.Sheets[a.SheetNames[h]],a,h,o,f));return(a.Workbook||{}).Names&&c.push(_ne(a.Workbook.Names,a.SheetNames,-1)),c.push(`    </office:spreadsheet>
`),c.push(`  </office:body>
`),o.bookType=="fods"?c.push("</office:document>"):c.push("</office:document-content>"),c.join("")}}();function wye(t,e){if(e.bookType=="fods")return xne(t,e);var r=WV(),n="",i=[],s=[];return n="mimetype",Fr(r,n,"application/vnd.oasis.opendocument.spreadsheet"),n="content.xml",Fr(r,n,xne(t,e)),i.push([n,"text/xml"]),s.push([n,"ContentFile"]),n="styles.xml",Fr(r,n,S7t(t,e)),i.push([n,"text/xml"]),s.push([n,"StylesFile"]),n="meta.xml",Fr(r,n,As+u2e()),i.push([n,"text/xml"]),s.push([n,"MetadataFile"]),n="manifest.rdf",Fr(r,n,Uvt(s)),i.push([n,"application/rdf+xml"]),n="META-INF/manifest.xml",Fr(r,n,Fvt(i)),r}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */var Os=function(){try{return typeof Uint8Array>"u"||typeof Uint8Array.prototype.subarray>"u"?"slice":typeof Buffer<"u"?typeof Buffer.prototype.subarray>"u"?"slice":(typeof Buffer.from=="function"?Buffer.from([72,62]):new Buffer([72,62]))instanceof Uint8Array?"subarray":"slice":"subarray"}catch{return"slice"}}();function Qd(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function ca(t){return typeof TextDecoder<"u"?new TextDecoder().decode(t):ni(lh(t))}function _u(t){return typeof TextEncoder<"u"?new TextEncoder().encode(t):jo(Xf(t))}function q1(t){for(var e=0,r=0;r<t.length;++r)e+=t[r].length;var n=new Uint8Array(e),i=0;for(r=0;r<t.length;++r){var s=t[r],a=s.length;if(a<250)for(var o=0;o<a;++o)n[i++]=s[o];else n.set(s,i),i+=a}return n}function QN(t){return t-=t>>1&1431655765,t=(t&858993459)+(t>>2&858993459),(t+(t>>4)&252645135)*16843009>>>24}function T7t(t,e){for(var r=(t[e+15]&127)<<7|t[e+14]>>1,n=t[e+14]&1,i=e+13;i>=e;--i)n=n*256+t[i];return(t[e+15]&128?-n:n)*Math.pow(10,r-6176)}function k7t(t,e,r){var n=Math.floor(r==0?0:Math.LOG10E*Math.log(Math.abs(r)))+6176-16,i=r/Math.pow(10,n-6176);t[e+15]|=n>>7,t[e+14]|=(n&127)<<1;for(var s=0;i>=1;++s,i/=256)t[e+s]=i&255;t[e+15]|=r>=0?0:128}function O4(t,e){var r=e.l,n=t[r]&127;e:if(t[r++]>=128&&(n|=(t[r]&127)<<7,t[r++]<128||(n|=(t[r]&127)<<14,t[r++]<128)||(n|=(t[r]&127)<<21,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,28),++r,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,35),++r,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,42),++r,t[r++]<128)))break e;return e.l=r,n}function Vt(t){var e=new Uint8Array(7);e[0]=t&127;var r=1;e:if(t>127){if(e[r-1]|=128,e[r]=t>>7&127,++r,t<=16383||(e[r-1]|=128,e[r]=t>>14&127,++r,t<=2097151)||(e[r-1]|=128,e[r]=t>>21&127,++r,t<=268435455)||(e[r-1]|=128,e[r]=t/256>>>21&127,++r,t<=34359738367)||(e[r-1]|=128,e[r]=t/65536>>>21&127,++r,t<=4398046511103))break e;e[r-1]|=128,e[r]=t/16777216>>>21&127,++r}return e[Os](0,r)}function _ye(t){for(var e={l:0},r=[];e.l<t.length;)r.push(O4(t,e));return r}function xye(t){return q1(t.map(function(e){return Vt(e)}))}function dn(t){var e=0,r=t[e]&127;e:if(t[e++]>=128){if(r|=(t[e]&127)<<7,t[e++]<128||(r|=(t[e]&127)<<14,t[e++]<128)||(r|=(t[e]&127)<<21,t[e++]<128))break e;r|=(t[e]&127)<<28}return r}function At(t){for(var e=[],r={l:0};r.l<t.length;){var n=r.l,i=O4(t,r),s=i&7;i=i/8|0;var a,o=r.l;switch(s){case 0:{for(;t[o++]>=128;);a=t[Os](r.l,o),r.l=o}break;case 1:a=t[Os](o,o+8),r.l=o+8;break;case 2:{var c=O4(t,r);a=t[Os](r.l,r.l+c),r.l+=c}break;case 5:a=t[Os](o,o+4),r.l=o+4;break;default:throw new Error("PB Type ".concat(s," for Field ").concat(i," at offset ").concat(n))}var l={data:a,type:s};e[i]==null&&(e[i]=[]),e[i].push(l)}return e}function Wt(t){var e=[];return t.forEach(function(r,n){n!=0&&r.forEach(function(i){i.data&&(e.push(Vt(n*8+i.type)),i.type==2&&e.push(Vt(i.data.length)),e.push(i.data))})}),q1(e)}function gm(t,e){return t?.map(function(r){return e(r.data)})||[]}function N4(t){for(var e,r=[],n={l:0};n.l<t.length;){var i=O4(t,n),s=At(t[Os](n.l,n.l+i));n.l+=i;var a={id:dn(s[1][0].data),messages:[]};s[2].forEach(function(o){var c=At(o.data),l=dn(c[3][0].data);a.messages.push({meta:c,data:t[Os](n.l,n.l+l)}),n.l+=l}),(e=s[3])!=null&&e[0]&&(a.merge=dn(s[3][0].data)>>>0>0),r.push(a)}return r}function O3(t){var e=[];return t.forEach(function(r){var n=[[],[{data:Vt(r.id),type:0}],[]];r.merge!=null&&(n[3]=[{data:Vt(+!!r.merge),type:0}]);var i=[];r.messages.forEach(function(a){i.push(a.data),a.meta[3]=[{type:0,data:Vt(a.data.length)}],n[2].push({data:Wt(a.meta),type:2})});var s=Wt(n);e.push(Vt(s.length)),e.push(s),i.forEach(function(a){return e.push(a)})}),q1(e)}function C7t(t,e){if(t!=0)throw new Error("Unexpected Snappy chunk type ".concat(t));for(var r={l:0},n=O4(e,r),i=[],s=r.l;s<e.length;){var a=e[s]&3;if(a==0){var o=e[s++]>>2;if(o<60)++o;else{var c=o-59;o=e[s],c>1&&(o|=e[s+1]<<8),c>2&&(o|=e[s+2]<<16),c>3&&(o|=e[s+3]<<24),o>>>=0,o++,s+=c}i.push(e[Os](s,s+o)),s+=o;continue}else{var l=0,u=0;if(a==1?(u=(e[s]>>2&7)+4,l=(e[s++]&224)<<3,l|=e[s++]):(u=(e[s++]>>2)+1,a==2?(l=e[s]|e[s+1]<<8,s+=2):(l=(e[s]|e[s+1]<<8|e[s+2]<<16|e[s+3]<<24)>>>0,s+=4)),l==0)throw new Error("Invalid offset 0");for(var f=i.length-1,h=l;f>=0&&h>=i[f].length;)h-=i[f].length,--f;if(f<0)if(h==0)h=i[f=0].length;else throw new Error("Invalid offset beyond length");if(u<h)i.push(i[f][Os](i[f].length-h,i[f].length-h+u));else{for(h>0&&(i.push(i[f][Os](i[f].length-h)),u-=h),++f;u>=i[f].length;)i.push(i[f]),u-=i[f].length,++f;u&&i.push(i[f][Os](0,u))}i.length>25&&(i=[q1(i)])}}for(var d=0,g=0;g<i.length;++g)d+=i[g].length;if(d!=n)throw new Error("Unexpected length: ".concat(d," != ").concat(n));return i}function M4(t){Array.isArray(t)&&(t=new Uint8Array(t));for(var e=[],r=0;r<t.length;){var n=t[r++],i=t[r]|t[r+1]<<8|t[r+2]<<16;r+=3,e.push.apply(e,C7t(n,t[Os](r,r+i))),r+=i}if(r!==t.length)throw new Error("data is not a valid framed stream!");return e.length==1?e[0]:q1(e)}function N3(t){for(var e=[],r=0;r<t.length;){var n=Math.min(t.length-r,268435455),i=new Uint8Array(4);e.push(i);var s=Vt(n),a=s.length;e.push(s),n<=60?(a++,e.push(new Uint8Array([n-1<<2]))):n<=256?(a+=2,e.push(new Uint8Array([240,n-1&255]))):n<=65536?(a+=3,e.push(new Uint8Array([244,n-1&255,n-1>>8&255]))):n<=16777216?(a+=4,e.push(new Uint8Array([248,n-1&255,n-1>>8&255,n-1>>16&255]))):n<=4294967296&&(a+=5,e.push(new Uint8Array([252,n-1&255,n-1>>8&255,n-1>>16&255,n-1>>>24&255]))),e.push(t[Os](r,r+n)),a+=n,i[0]=0,i[1]=a&255,i[2]=a>>8&255,i[3]=a>>16&255,r+=n}return q1(e)}var I7t=function(){return{sst:[],rsst:[],ofmt:[],nfmt:[]}};function Eye(t,e,r,n,i){var s,a,o,c,l=e&255,u=e>>8,f=u>=5?i:n;e:if(r&(u>4?8:4)&&t.t=="n"&&l==7){var h=(s=f[7])!=null&&s[0]?dn(f[7][0].data):-1;if(h==-1)break e;var d=(a=f[15])!=null&&a[0]?dn(f[15][0].data):-1,g=(o=f[16])!=null&&o[0]?dn(f[16][0].data):-1,p=(c=f[40])!=null&&c[0]?dn(f[40][0].data):-1,m=t.v,y=m;t:if(p){if(m==0){d=g=2;break t}m>=604800?d=1:m>=86400?d=2:m>=3600?d=4:m>=60?d=8:m>=1?d=16:d=32,Math.floor(m)!=m?g=32:m%60?g=16:m%3600?g=8:m%86400?g=4:m%604800&&(g=2),g<d&&(g=d)}if(d==-1||g==-1)break e;var v=[],_=[];d==1&&(y=m/604800,g==1?_.push('d"d"'):(y|=0,m-=604800*y),v.push(y+(h==2?" week"+(y==1?"":"s"):h==1?"w":""))),d<=2&&g>=2&&(y=m/86400,g>2&&(y|=0,m-=86400*y),_.push('d"d"'),v.push(y+(h==2?" day"+(y==1?"":"s"):h==1?"d":""))),d<=4&&g>=4&&(y=m/3600,g>4&&(y|=0,m-=3600*y),_.push((d>=4?"[h]":"h")+'"h"'),v.push(y+(h==2?" hour"+(y==1?"":"s"):h==1?"h":""))),d<=8&&g>=8&&(y=m/60,g>8&&(y|=0,m-=60*y),_.push((d>=8?"[m]":"m")+'"m"'),h==0?v.push((d==8&&g==8||y>=10?"":"0")+y):v.push(y+(h==2?" minute"+(y==1?"":"s"):h==1?"m":""))),d<=16&&g>=16&&(y=m,g>16&&(y|=0,m-=y),_.push((d>=16?"[s]":"s")+'"s"'),h==0?v.push((g==16&&d==16||y>=10?"":"0")+y):v.push(y+(h==2?" second"+(y==1?"":"s"):h==1?"s":""))),g>=32&&(y=Math.round(1e3*m),d<32&&_.push('.000"ms"'),h==0?v.push((y>=100?"":y>=10?"0":"00")+y):v.push(y+(h==2?" millisecond"+(y==1?"":"s"):h==1?"ms":""))),t.w=v.join(h==0?":":" "),t.z=_.join(h==0?'":"':" "),h==0&&(t.w=t.w.replace(/:(\d\d\d)$/,".$1"))}}function R7t(t,e,r){var n=Qd(t),i=n.getUint32(4,!0),s=-1,a=-1,o=-1,c=NaN,l=new Date(2001,0,1),u=r>1?12:8;i&2&&(o=n.getUint32(u,!0),u+=4),u+=QN(i&(r>1?3468:396))*4,i&512&&(s=n.getUint32(u,!0),u+=4),u+=QN(i&(r>1?12288:4096))*4,i&16&&(a=n.getUint32(u,!0),u+=4),i&32&&(c=n.getFloat64(u,!0),u+=8),i&64&&(l.setTime(l.getTime()+n.getFloat64(u,!0)*1e3),u+=8),r>1&&(i=n.getUint32(8,!0)>>>16,i&255&&(o==-1&&(o=n.getUint32(u,!0)),u+=4));var f,h=t[r>=4?1:2];switch(h){case 0:return;case 2:f={t:"n",v:c};break;case 3:f={t:"s",v:e.sst[a]};break;case 5:f={t:"d",v:l};break;case 6:f={t:"b",v:c>0};break;case 7:f={t:"n",v:c};break;case 8:f={t:"e",v:0};break;case 9:if(s>-1)f={t:"s",v:e.rsst[s]};else throw new Error("Unsupported cell type ".concat(t[Os](0,4)));break;default:throw new Error("Unsupported cell type ".concat(t[Os](0,4)))}return o>-1&&Eye(f,h|r<<8,i,e.ofmt[o],e.nfmt[o]),h==7&&(f.v/=86400),f}function P7t(t,e){var r=Qd(t);r.getUint32(4,!0);var n=r.getUint32(8,!0),i=12,s=-1,a=-1,o=-1,c=NaN,l=NaN,u=new Date(2001,0,1);n&1&&(c=T7t(t,i),i+=16),n&2&&(l=r.getFloat64(i,!0),i+=8),n&4&&(u.setTime(u.getTime()+r.getFloat64(i,!0)*1e3),i+=8),n&8&&(a=r.getUint32(i,!0),i+=4),n&16&&(s=r.getUint32(i,!0),i+=4);var f,h=t[1];switch(h){case 0:return;case 2:f={t:"n",v:c};break;case 3:f={t:"s",v:e.sst[a]};break;case 5:f={t:"d",v:u};break;case 6:f={t:"b",v:l>0};break;case 7:f={t:"n",v:l};break;case 8:f={t:"e",v:0};break;case 9:f={t:"s",v:e.rsst[s]};break;case 10:f={t:"n",v:c};break;default:throw new Error("Unsupported cell type ".concat(t[1]," : ").concat(n&31," : ").concat(t[Os](0,4)))}return i+=QN(n&8160)*4,n&516096&&(o==-1&&(o=r.getUint32(i,!0)),i+=4),o>-1&&Eye(f,h|1280,n>>13,e.ofmt[o],e.nfmt[o]),h==7&&(f.v/=86400),f}function L5(t,e){var r=new Uint8Array(32),n=Qd(r),i=12,s=0;switch(r[0]=5,t.t){case"n":r[1]=2,k7t(r,i,t.v),s|=1,i+=16;break;case"b":r[1]=6,n.setFloat64(i,t.v?1:0,!0),s|=2,i+=8;break;case"s":var a=t.v==null?"":String(t.v),o=e.indexOf(a);o==-1&&(e[o=e.length]=a),r[1]=3,n.setUint32(i,o,!0),s|=8,i+=4;break;default:throw"unsupported cell type "+t.t}return n.setUint32(8,s,!0),r[Os](0,i)}function F5(t,e){var r=new Uint8Array(32),n=Qd(r),i=12,s=0;switch(r[0]=4,t.t){case"n":r[2]=2,n.setFloat64(i,t.v,!0),s|=32,i+=8;break;case"b":r[2]=6,n.setFloat64(i,t.v?1:0,!0),s|=32,i+=8;break;case"s":var a=t.v==null?"":String(t.v),o=e.indexOf(a);o==-1&&(e[o=e.length]=a),r[2]=3,n.setUint32(i,o,!0),s|=16,i+=4;break;default:throw"unsupported cell type "+t.t}return n.setUint32(8,s,!0),r[Os](0,i)}function B7t(t,e){switch(t[0]){case 0:case 1:case 2:case 3:case 4:return R7t(t,e,t[0]);case 5:return P7t(t,e);default:throw new Error("Unsupported payload version ".concat(t[0]))}}function Qn(t){var e=At(t);return dn(e[1][0].data)}function ld(t){return Wt([[],[{type:0,data:Vt(t)}]])}function o1(t,e){var r,n=(r=t.messages[0].meta[5])!=null&&r[0]?_ye(t.messages[0].meta[5][0].data):[],i=n.indexOf(e);i==-1&&(n.push(e),t.messages[0].meta[5]=[{type:2,data:xye(n)}])}function id(t,e){var r,n=(r=t.messages[0].meta[5])!=null&&r[0]?_ye(t.messages[0].meta[5][0].data):[];t.messages[0].meta[5]=[{type:2,data:xye(n.filter(function(i){return i!=e}))}]}function $5(t,e){var r=At(e.data),n=dn(r[1][0].data),i=r[3],s=[];return(i||[]).forEach(function(a){var o=At(a.data);if(o[1]){var c=dn(o[1][0].data)>>>0;switch(n){case 1:s[c]=ca(o[3][0].data);break;case 8:{var l=t[Qn(o[9][0].data)][0],u=At(l.data),f=t[Qn(u[1][0].data)][0],h=dn(f.meta[1][0].data);if(h!=2001)throw new Error("2000 unexpected reference to ".concat(h));var d=At(f.data);s[c]=d[3].map(function(g){return ca(g.data)}).join("")}break;case 2:s[c]=At(o[6][0].data);break;default:throw n}}}),s}function D7t(t,e){var r,n,i,s,a,o,c,l,u,f,h,d,g,p,m=At(t),y=dn(m[1][0].data)>>>0,v=dn(m[2][0].data)>>>0,_=((n=(r=m[8])==null?void 0:r[0])==null?void 0:n.data)&&dn(m[8][0].data)>0||!1,x,A;if((s=(i=m[7])==null?void 0:i[0])!=null&&s.data&&e!=0)x=(o=(a=m[7])==null?void 0:a[0])==null?void 0:o.data,A=(l=(c=m[6])==null?void 0:c[0])==null?void 0:l.data;else if((f=(u=m[4])==null?void 0:u[0])!=null&&f.data&&e!=1)x=(d=(h=m[4])==null?void 0:h[0])==null?void 0:d.data,A=(p=(g=m[3])==null?void 0:g[0])==null?void 0:p.data;else throw"NUMBERS Tile missing ".concat(e," cell storage");for(var C=_?4:1,R=Qd(x),M=[],N=0;N<x.length/2;++N){var Y=R.getUint16(N*2,!0);Y<65535&&M.push([N,Y])}if(M.length!=v)throw"Expected ".concat(v," cells, found ").concat(M.length);var H=[];for(N=0;N<M.length-1;++N)H[M[N][0]]=A[Os](M[N][1]*C,M[N+1][1]*C);return M.length>=1&&(H[M[M.length-1][0]]=A[Os](M[M.length-1][1]*C)),{R:y,cells:H}}function O7t(t,e){var r,n=At(e.data),i=-1;(r=n?.[7])!=null&&r[0]&&(dn(n[7][0].data)>>>0?i=1:i=0);var s=gm(n[5],function(a){return D7t(a,i)});return{nrows:dn(n[4][0].data)>>>0,data:s.reduce(function(a,o){return a[o.R]||(a[o.R]=[]),o.cells.forEach(function(c,l){if(a[o.R][l])throw new Error("Duplicate cell r=".concat(o.R," c=").concat(l));a[o.R][l]=c}),a},[])}}function N7t(t,e,r){var n,i,s,a,o,c,l=At(e.data),u={s:{r:0,c:0},e:{r:0,c:0}};if(u.e.r=(dn(l[6][0].data)>>>0)-1,u.e.r<0)throw new Error("Invalid row varint ".concat(l[6][0].data));if(u.e.c=(dn(l[7][0].data)>>>0)-1,u.e.c<0)throw new Error("Invalid col varint ".concat(l[7][0].data));r["!ref"]=Ir(u);var f=r["!data"]!=null,h=r,d=At(l[4][0].data),g=I7t();(n=d[4])!=null&&n[0]&&(g.sst=$5(t,t[Qn(d[4][0].data)][0])),(i=d[11])!=null&&i[0]&&(g.ofmt=$5(t,t[Qn(d[11][0].data)][0])),(s=d[17])!=null&&s[0]&&(g.rsst=$5(t,t[Qn(d[17][0].data)][0])),(a=d[22])!=null&&a[0]&&(g.nfmt=$5(t,t[Qn(d[22][0].data)][0]));var p=At(d[3][0].data),m=0;if(p[1].forEach(function(_){var x=At(_.data),A=t[Qn(x[2][0].data)][0],C=dn(A.meta[1][0].data);if(C!=6002)throw new Error("6001 unexpected reference to ".concat(C));var R=O7t(t,A);R.data.forEach(function(M,N){M.forEach(function(Y,H){var E=B7t(Y,g);E&&(f?(h["!data"][m+N]||(h["!data"][m+N]=[]),h["!data"][m+N][H]=E):r[Hr(H)+hn(m+N)]=E)})}),m+=R.nrows}),(o=d[13])!=null&&o[0]){var y=t[Qn(d[13][0].data)][0],v=dn(y.meta[1][0].data);if(v!=6144)throw new Error("Expected merge type 6144, found ".concat(v));r["!merges"]=(c=At(y.data))==null?void 0:c[1].map(function(_){var x=At(_.data),A=Qd(At(x[1][0].data)[1][0].data),C=Qd(At(x[2][0].data)[1][0].data);return{s:{r:A.getUint16(0,!0),c:A.getUint16(2,!0)},e:{r:A.getUint16(0,!0)+C.getUint16(0,!0)-1,c:A.getUint16(2,!0)+C.getUint16(2,!0)-1}}})}}function M7t(t,e,r){var n=At(e.data),i={"!ref":"A1"};r?.dense&&(i["!data"]=[]);var s=t[Qn(n[2][0].data)],a=dn(s[0].meta[1][0].data);if(a!=6001)throw new Error("6000 unexpected reference to ".concat(a));return N7t(t,s[0],i),i}function L7t(t,e,r){var n,i=At(e.data),s={name:(n=i[1])!=null&&n[0]?ca(i[1][0].data):"",sheets:[]},a=gm(i[2],Qn);return a.forEach(function(o){t[o].forEach(function(c){var l=dn(c.meta[1][0].data);l==6e3&&s.sheets.push(M7t(t,c,r))})}),s}function F7t(t,e,r){var n,i=Rj(),s=At(e.data);if((n=s[2])!=null&&n[0])throw new Error("Keynote presentations are not supported");var a=gm(s[1],Qn);if(a.forEach(function(o){t[o].forEach(function(c){var l=dn(c.meta[1][0].data);if(l==2){var u=L7t(t,c,r);u.sheets.forEach(function(f,h){GA(i,f,h==0?u.name:u.name+"_"+h,!0)})}})}),i.SheetNames.length==0)throw new Error("Empty NUMBERS file");return i.bookType="numbers",i}function yB(t,e){var r,n,i,s,a,o,c,l={},u=[];if(t.FullPaths.forEach(function(h){if(h.match(/\.iwpv2/))throw new Error("Unsupported password protection")}),t.FileIndex.forEach(function(h){if(h.name.match(/\.iwa$/)&&h.content[0]==0){var d;try{d=M4(h.content)}catch(p){return console.log("?? "+h.content.length+" "+(p.message||p))}var g;try{g=N4(d)}catch(p){return console.log("## "+(p.message||p))}g.forEach(function(p){l[p.id]=p.messages,u.push(p.id)})}}),!u.length)throw new Error("File has no messages");if((i=(n=(r=l?.[1])==null?void 0:r[0].meta)==null?void 0:n[1])!=null&&i[0].data&&dn(l[1][0].meta[1][0].data)==1e4)throw new Error("Pages documents are not supported");var f=((c=(o=(a=(s=l?.[1])==null?void 0:s[0])==null?void 0:a.meta)==null?void 0:o[1])==null?void 0:c[0].data)&&dn(l[1][0].meta[1][0].data)==1&&l[1][0];if(f||u.forEach(function(h){l[h].forEach(function(d){var g=dn(d.meta[1][0].data)>>>0;if(g==1)if(!f)f=d;else throw new Error("Document has multiple roots")})}),!f)throw new Error("Cannot find Document root");return F7t(l,f,e)}function $7t(t,e,r){var n,i,s=[[],[{type:0,data:Vt(0)}],[{type:0,data:Vt(0)}],[{type:2,data:new Uint8Array([])}],[{type:2,data:new Uint8Array(Array.from({length:510},function(){return 255}))}],[{type:0,data:Vt(5)}],[{type:2,data:new Uint8Array([])}],[{type:2,data:new Uint8Array(Array.from({length:510},function(){return 255}))}],[{type:0,data:Vt(1)}]];if(!((n=s[6])!=null&&n[0])||!((i=s[7])!=null&&i[0]))throw"Mutation only works on post-BNC storages!";var a=0;if(s[7][0].data.length<2*t.length){var o=new Uint8Array(2*t.length);o.set(s[7][0].data),s[7][0].data=o}if(s[4][0].data.length<2*t.length){var c=new Uint8Array(2*t.length);c.set(s[4][0].data),s[4][0].data=c}for(var l=Qd(s[7][0].data),u=0,f=[],h=Qd(s[4][0].data),d=0,g=[],p=4,m=0;m<t.length;++m){if(t[m]==null){l.setUint16(m*2,65535,!0),h.setUint16(m*2,65535);continue}l.setUint16(m*2,u/p,!0),h.setUint16(m*2,d/p,!0);var y,v;switch(typeof t[m]){case"string":y=L5({t:"s",v:t[m]},e),v=F5({t:"s",v:t[m]},e);break;case"number":y=L5({t:"n",v:t[m]},e),v=F5({t:"n",v:t[m]},e);break;case"boolean":y=L5({t:"b",v:t[m]},e),v=F5({t:"b",v:t[m]},e);break;default:if(t[m]instanceof Date){y=L5({t:"s",v:t[m].toISOString()},e),v=F5({t:"s",v:t[m].toISOString()},e);break}throw new Error("Unsupported value "+t[m])}f.push(y),u+=y.length,g.push(v),d+=v.length,++a}for(s[2][0].data=Vt(a),s[5][0].data=Vt(5);m<s[7][0].data.length/2;++m)l.setUint16(m*2,65535,!0),h.setUint16(m*2,65535,!0);return s[6][0].data=q1(f),s[3][0].data=q1(g),s[8]=[{type:0,data:Vt(1)}],s}function Ene(t,e){return{meta:[[],[{type:0,data:Vt(t)}]],data:e}}function c1(t,e){e.last||(e.last=927262);for(var r=e.last;r<2e6;++r)if(!e[r])return e[e.last=r]=t,r;throw new Error("Too many messages")}function U7t(t){var e={},r=[];return t.FileIndex.map(function(n,i){return[n,t.FullPaths[i]]}).forEach(function(n){var i=n[0],s=n[1];i.type==2&&i.name.match(/\.iwa/)&&i.content[0]==0&&N4(M4(i.content)).forEach(function(a){r.push(a.id),e[a.id]={deps:[],location:s,type:dn(a.messages[0].meta[1][0].data)}})}),t.FileIndex.forEach(function(n){n.name.match(/\.iwa/)&&n.content[0]==0&&N4(M4(n.content)).forEach(function(i){i.messages.forEach(function(s){[5,6].forEach(function(a){s.meta[a]&&s.meta[a].forEach(function(o){e[i.id].deps.push(dn(o.data))})})})})}),e}function V7t(t,e){if(!e||!e.numbers)throw new Error("Must pass a `numbers` option -- check the README");var r=Kt.read(e.numbers,{type:"base64"}),n=U7t(r),i=Mf(r,n,1);if(i==null)throw"Could not find message ".concat(1," in Numbers template");var s=gm(At(i.messages[0].data)[1],Qn);if(s.length>1)throw new Error("Template NUMBERS file must have exactly one sheet");return t.SheetNames.forEach(function(a,o){o>=1&&(j7t(r,n,o+1),i=Mf(r,n,1),s=gm(At(i.messages[0].data)[1],Qn)),z7t(r,n,t.Sheets[a],a,o,s[o])}),r}function qs(t,e,r,n){var i=Kt.find(t,e[r].location);if(!i)throw"Could not find ".concat(e[r].location," in Numbers template");var s=N4(M4(i.content)),a=s.find(function(o){return o.id==r});n(a,s),i.content=N3(O3(s)),i.size=i.content.length}function Mf(t,e,r){var n=Kt.find(t,e[r].location);if(!n)throw"Could not find ".concat(e[r].location," in Numbers template");var i=N4(M4(n.content)),s=i.find(function(a){return a.id==r});return s}function j7t(t,e,r){var n=-1,i=-1,s={};qs(t,e,1,function(l,u){var f=At(l.messages[0].data);n=Qn(At(l.messages[0].data)[1][0].data),i=c1({deps:[1],location:e[n].location,type:2},e),s[n]=i,o1(l,i),f[1].push({type:2,data:ld(i)});var h=Mf(t,e,n);h.id=i,e[1].location==e[i].location?u.push(h):qs(t,e,i,function(d,g){return g.push(h)}),l.messages[0].data=Wt(f)});var a=-1;qs(t,e,i,function(l,u){for(var f=At(l.messages[0].data),h=3;h<=69;++h)delete f[h];var d=gm(f[2],Qn);d.forEach(function(m){return id(l,m)}),a=c1({deps:[i],location:e[d[0]].location,type:e[d[0]].type},e),o1(l,a),s[d[0]]=a,f[2]=[{type:2,data:ld(a)}];var g=Mf(t,e,d[0]);if(g.id=a,e[d[0]].location==e[i].location)u.push(g);else{var p=e[i].location;p=p.replace(/^Root Entry\//,""),p=p.replace(/^Index\//,"").replace(/\.iwa$/,""),qs(t,e,2,function(m){var y=At(m.messages[0].data),v=y[3].findIndex(function(x){var A,C,R=At(x.data);return(A=R[3])!=null&&A[0]?ca(R[3][0].data)==p:!!((C=R[2])!=null&&C[0]&&ca(R[2][0].data)==p)}),_=At(y[3][v].data);_[6]||(_[6]=[]),_[6].push({type:2,data:Wt([[],[{type:0,data:Vt(a)}]])}),y[3][v].data=Wt(_),m.messages[0].data=Wt(y)}),qs(t,e,a,function(m,y){return y.push(g)})}l.messages[0].data=Wt(f)});var o=-1;qs(t,e,a,function(l,u){for(var f=At(l.messages[0].data),h=At(f[1][0].data),d=3;d<=69;++d)delete h[d];var g=Qn(h[2][0].data);h[2][0].data=ld(s[g]),f[1][0].data=Wt(h);var p=Qn(f[2][0].data);id(l,p),o=c1({deps:[a],location:e[p].location,type:e[p].type},e),o1(l,o),s[p]=o,f[2][0].data=ld(o);var m=Mf(t,e,p);m.id=o,e[a].location==e[o].location?u.push(m):qs(t,e,o,function(y,v){return v.push(m)}),l.messages[0].data=Wt(f)});var c=e[o].location;c=c.replace(/^Root Entry\//,""),c=c.replace(/^Index\//,"").replace(/\.iwa$/,""),qs(t,e,o,function(l,u){var f,h,d=At(l.messages[0].data),g=ca(d[1][0].data),p=g.replace(/-[A-Z0-9]*/,"-".concat(r.toString(16).padStart(4,"0")));if(d[1][0].data=_u(p),[12,13,29,31,32,33,39,44,47,81,82,84].forEach(function(C){return delete d[C]}),d[45]){var m=At(d[45][0].data),y=Qn(m[1][0].data);id(l,y),delete d[45]}if(d[70]){var v=At(d[70][0].data);(f=v[2])==null||f.forEach(function(C){var R=At(C.data);[2,3].map(function(M){return R[M][0]}).forEach(function(M){var N=At(M.data);if(N[8]){var Y=Qn(N[8][0].data);id(l,Y)}})}),delete d[70]}[46,30,34,35,36,38,48,49,60,61,62,63,64,71,72,73,74,75,85,86,87,88,89].forEach(function(C){if(d[C]){var R=Qn(d[C][0].data);delete d[C],id(l,R)}});var _=At(d[4][0].data);{[2,4,5,6,11,12,13,15,16,17,18,19,20,21,22].forEach(function(C){var R;if((R=_[C])!=null&&R[0]){var M=Qn(_[C][0].data),N=c1({deps:[o],location:e[M].location,type:e[M].type},e);id(l,M),o1(l,N),s[M]=N;var Y=Mf(t,e,M);if(Y.id=N,e[M].location==e[o].location)u.push(Y);else{e[N].location=e[M].location.replace(M.toString(),N.toString()),e[N].location==e[M].location&&(e[N].location=e[N].location.replace(/\.iwa/,"-".concat(N,".iwa"))),Kt.utils.cfb_add(t,e[N].location,N3(O3([Y])));var H=e[N].location;H=H.replace(/^Root Entry\//,""),H=H.replace(/^Index\//,"").replace(/\.iwa$/,""),qs(t,e,2,function(E){var k=At(E.messages[0].data);k[3].push({type:2,data:Wt([[],[{type:0,data:Vt(N)}],[{type:2,data:_u(H.replace(/-.*$/,""))}],[{type:2,data:_u(H)}],[{type:2,data:new Uint8Array([2,0,0])}],[{type:2,data:new Uint8Array([2,0,0])}],[],[],[],[],[{type:0,data:Vt(0)}],[],[{type:0,data:Vt(0)}]])}),k[1]=[{type:0,data:Vt(Math.max(N+1,dn(k[1][0].data)))}];var w=k[3].findIndex(function(L){var I,U,O=At(L.data);return(I=O[3])!=null&&I[0]?ca(O[3][0].data)==c:!!((U=O[2])!=null&&U[0]&&ca(O[2][0].data)==c)}),T=At(k[3][w].data);T[6]||(T[6]=[]),T[6].push({type:2,data:Wt([[],[{type:0,data:Vt(N)}]])}),k[3][w].data=Wt(T),E.messages[0].data=Wt(k)})}_[C][0].data=ld(N)}});var x=At(_[1][0].data);(h=x[2])==null||h.forEach(function(C){var R=Qn(C.data),M=c1({deps:[o],location:e[R].location,type:e[R].type},e);id(l,R),o1(l,M),s[R]=M;var N=Mf(t,e,R);if(N.id=M,e[R].location==e[o].location)u.push(N);else{e[M].location=e[R].location.replace(R.toString(),M.toString()),e[M].location==e[R].location&&(e[M].location=e[M].location.replace(/\.iwa/,"-".concat(M,".iwa"))),Kt.utils.cfb_add(t,e[M].location,N3(O3([N])));var Y=e[M].location;Y=Y.replace(/^Root Entry\//,""),Y=Y.replace(/^Index\//,"").replace(/\.iwa$/,""),qs(t,e,2,function(H){var E=At(H.messages[0].data);E[3].push({type:2,data:Wt([[],[{type:0,data:Vt(M)}],[{type:2,data:_u(Y.replace(/-.*$/,""))}],[{type:2,data:_u(Y)}],[{type:2,data:new Uint8Array([2,0,0])}],[{type:2,data:new Uint8Array([2,0,0])}],[],[],[],[],[{type:0,data:Vt(0)}],[],[{type:0,data:Vt(0)}]])}),E[1]=[{type:0,data:Vt(Math.max(M+1,dn(E[1][0].data)))}];var k=E[3].findIndex(function(T){var L,I,U=At(T.data);return(L=U[3])!=null&&L[0]?ca(U[3][0].data)==c:!!((I=U[2])!=null&&I[0]&&ca(U[2][0].data)==c)}),w=At(E[3][k].data);w[6]||(w[6]=[]),w[6].push({type:2,data:Wt([[],[{type:0,data:Vt(M)}]])}),E[3][k].data=Wt(w),H.messages[0].data=Wt(E)})}C.data=ld(M)}),_[1][0].data=Wt(x);var A=At(_[3][0].data);A[1].forEach(function(C){var R=At(C.data),M=Qn(R[2][0].data),N=s[M];if(!s[M]){N=c1({deps:[o],location:"",type:e[M].type},e),e[N].location="Root Entry/Index/Tables/Tile-".concat(N,".iwa"),s[M]=N;var Y=Mf(t,e,M);Y.id=N,id(l,M),o1(l,N),Kt.utils.cfb_add(t,"/Index/Tables/Tile-".concat(N,".iwa"),N3(O3([Y]))),qs(t,e,2,function(H){var E=At(H.messages[0].data);E[3].push({type:2,data:Wt([[],[{type:0,data:Vt(N)}],[{type:2,data:_u("Tables/Tile")}],[{type:2,data:_u("Tables/Tile-".concat(N))}],[{type:2,data:new Uint8Array([2,0,0])}],[{type:2,data:new Uint8Array([2,0,0])}],[],[],[],[],[{type:0,data:Vt(0)}],[],[{type:0,data:Vt(0)}]])}),E[1]=[{type:0,data:Vt(Math.max(N+1,dn(E[1][0].data)))}];var k=E[3].findIndex(function(T){var L,I,U=At(T.data);return(L=U[3])!=null&&L[0]?ca(U[3][0].data)==c:!!((I=U[2])!=null&&I[0]&&ca(U[2][0].data)==c)}),w=At(E[3][k].data);w[6]||(w[6]=[]),w[6].push({type:2,data:Wt([[],[{type:0,data:Vt(N)}]])}),E[3][k].data=Wt(w),H.messages[0].data=Wt(E)})}R[2][0].data=ld(N),C.data=Wt(R)}),_[3][0].data=Wt(A)}d[4][0].data=Wt(_),l.messages[0].data=Wt(d)})}function z7t(t,e,r,n,i,s){var a=[];qs(t,e,s,function(l){var u=At(l.messages[0].data);u[1]=[{type:2,data:_u(n)}],a=gm(u[2],Qn),l.messages[0].data=Wt(u)});var o=Mf(t,e,a[0]),c=Qn(At(o.messages[0].data)[2][0].data);qs(t,e,c,function(l,u){return q7t(t,e,r,l,u,c)})}function q7t(t,e,r,n,i,s){var a=Js(r["!ref"]);a.s.r=a.s.c=0;var o=!1;a.e.c>999&&(o=!0,a.e.c=999),a.e.r>999999&&(o=!0,a.e.r=999999),o&&console.error("Truncating to ".concat(Ir(a)));var c=YE(r,{range:a,header:1}),l=["~Sh33tJ5~"],u=e[s].location;u=u.replace(/^Root Entry\//,""),u=u.replace(/^Index\//,"").replace(/\.iwa$/,"");var f=At(n.messages[0].data);{f[6][0].data=Vt(a.e.r+1),f[7][0].data=Vt(a.e.c+1),delete f[46];var h=At(f[4][0].data);{var d=Qn(At(h[1][0].data)[2][0].data);qs(t,e,d,function(w,T){var L,I=At(w.messages[0].data);if((L=I?.[2])!=null&&L[0])for(var U=0;U<c.length;++U){var O=At(I[2][0].data);O[1][0].data=Vt(U),O[4][0].data=Vt(c[U].length),I[2][U]={type:I[2][0].type,data:Wt(O)}}w.messages[0].data=Wt(I)});var g=Qn(h[2][0].data);qs(t,e,g,function(w,T){for(var L=At(w.messages[0].data),I=0;I<=a.e.c;++I){var U=At(L[2][0].data);U[1][0].data=Vt(I),U[4][0].data=Vt(a.e.r+1),L[2][I]={type:L[2][0].type,data:Wt(U)}}w.messages[0].data=Wt(L)});var p=At(h[9][0].data);p[1]=[];var m=At(h[3][0].data);{var y=256;m[2]=[{type:0,data:Vt(y)}];var v=Qn(At(m[1][0].data)[2][0].data),_=function(){var w=Mf(t,e,2),T=At(w.messages[0].data),L=T[3].filter(function(I){return dn(At(I.data)[1][0].data)==v});return L?.length?dn(At(L[0].data)[12][0].data):0}();Kt.utils.cfb_del(t,e[v].location),qs(t,e,2,function(w){var T=At(w.messages[0].data);T[3]=T[3].filter(function(U){return dn(At(U.data)[1][0].data)!=v});var L=T[3].findIndex(function(U){var O,D,P=At(U.data);return(O=P[3])!=null&&O[0]?ca(P[3][0].data)==u:!!((D=P[2])!=null&&D[0]&&ca(P[2][0].data)==u)}),I=At(T[3][L].data);I[6]||(I[6]=[]),I[6]=I[6].filter(function(U){return dn(At(U.data)[1][0].data)!=v}),T[3][L].data=Wt(I),w.messages[0].data=Wt(T)}),id(n,v),m[1]=[];for(var x=Math.ceil((a.e.r+1)/y),A=0;A<x;++A){var C=c1({deps:[],location:"",type:6002},e);e[C].location="Root Entry/Index/Tables/Tile-".concat(C,".iwa");for(var R=[[],[{type:0,data:Vt(0)}],[{type:0,data:Vt(Math.min(a.e.r+1,(A+1)*y))}],[{type:0,data:Vt(0)}],[{type:0,data:Vt(Math.min((A+1)*y,a.e.r+1)-A*y)}],[],[{type:0,data:Vt(5)}],[{type:0,data:Vt(1)}],[{type:0,data:Vt(1)}]],M=A*y;M<=Math.min(a.e.r,(A+1)*y-1);++M){var N=$7t(c[M],l);N[1][0].data=Vt(M-A*y),R[5].push({data:Wt(N),type:2})}m[1].push({type:2,data:Wt([[],[{type:0,data:Vt(A)}],[{type:2,data:ld(C)}]])});var Y={id:C,messages:[Ene(6002,Wt(R))]},H=N3(O3([Y]));Kt.utils.cfb_add(t,"/Index/Tables/Tile-".concat(C,".iwa"),H),qs(t,e,2,function(w){var T=At(w.messages[0].data);T[3].push({type:2,data:Wt([[],[{type:0,data:Vt(C)}],[{type:2,data:_u("Tables/Tile")}],[{type:2,data:_u("Tables/Tile-".concat(C))}],[{type:2,data:new Uint8Array([2,0,0])}],[{type:2,data:new Uint8Array([2,0,0])}],[],[],[],[],[{type:0,data:Vt(0)}],[],[{type:0,data:Vt(_)}]])}),T[1]=[{type:0,data:Vt(Math.max(C+1,dn(T[1][0].data)))}];var L=T[3].findIndex(function(U){var O,D,P=At(U.data);return(O=P[3])!=null&&O[0]?ca(P[3][0].data)==u:!!((D=P[2])!=null&&D[0]&&ca(P[2][0].data)==u)}),I=At(T[3][L].data);I[6]||(I[6]=[]),I[6].push({type:2,data:Wt([[],[{type:0,data:Vt(C)}]])}),T[3][L].data=Wt(I),w.messages[0].data=Wt(T)}),o1(n,C),p[1].push({type:2,data:Wt([[],[{type:0,data:Vt(A*y)}],[{type:0,data:Vt(A)}]])})}}if(h[3][0].data=Wt(m),h[9][0].data=Wt(p),h[10]=[{type:2,data:new Uint8Array([])}],r["!merges"]){var E=c1({type:6144,deps:[s],location:e[s].location},e);i.push({id:E,messages:[Ene(6144,Wt([[],r["!merges"].map(function(w){return{type:2,data:Wt([[],[{type:2,data:Wt([[],[{type:5,data:new Uint8Array(new Uint16Array([w.s.r,w.s.c]).buffer)}]])}],[{type:2,data:Wt([[],[{type:5,data:new Uint8Array(new Uint16Array([w.e.r-w.s.r+1,w.e.c-w.s.c+1]).buffer)}]])}]])}})]))]}),h[13]=[{type:2,data:ld(E)}],qs(t,e,2,function(w){var T=At(w.messages[0].data),L=T[3].findIndex(function(U){var O,D,P=At(U.data);return(O=P[3])!=null&&O[0]?ca(P[3][0].data)==u:!!((D=P[2])!=null&&D[0]&&ca(P[2][0].data)==u)}),I=At(T[3][L].data);I[6]||(I[6]=[]),I[6].push({type:2,data:Wt([[],[{type:0,data:Vt(E)}]])}),T[3][L].data=Wt(I),w.messages[0].data=Wt(T)}),o1(n,E)}else delete h[13];var k=Qn(h[4][0].data);qs(t,e,k,function(w){var T=At(w.messages[0].data);T[3]=[],l.forEach(function(L,I){I!=0&&T[3].push({type:2,data:Wt([[],[{type:0,data:Vt(I)}],[{type:0,data:Vt(1)}],[{type:2,data:_u(L)}]])})}),w.messages[0].data=Wt(T)})}f[4][0].data=Wt(h)}n.messages[0].data=Wt(f)}function Sye(t){return function(r){for(var n=0;n!=t.length;++n){var i=t[n];r[i[0]]===void 0&&(r[i[0]]=i[1]),i[2]==="n"&&(r[i[0]]=Number(r[i[0]]))}}}function Sj(t){Sye([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(t)}function Aj(t){Sye([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(t)}function H7t(t){return nn.WS.indexOf(t)>-1?"sheet":t==nn.CS?"chart":t==nn.DS?"dialog":t==nn.MS?"macro":t&&t.length?t:"sheet"}function W7t(t,e){if(!t)return 0;try{t=e.map(function(n){return n.id||(n.id=n.strRelID),[n.name,t["!id"][n.id].Target,H7t(t["!id"][n.id].Type)]})}catch{return null}return!t||t.length===0?null:t}function K7t(t,e,r,n,i,s,a,o,c,l,u,f){try{s[n]=I3(yc(t,r,!0),e);var h=Cs(t,e),d;switch(o){case"sheet":d=_xt(h,e,i,c,s[n],l,u,f);break;case"chart":if(d=xxt(h,e,i,c,s[n],l,u,f),!d||!d["!drawel"])break;var g=Zw(d["!drawel"].Target,e),p=C4(g),m=q4t(yc(t,g,!0),I3(yc(t,p,!0),g)),y=Zw(m,g),v=C4(y);d=H5t(yc(t,y,!0),y,c,I3(yc(t,v,!0),y),l,d);break;case"macro":d=Ext(h,e,i,c,s[n],l,u,f);break;case"dialog":d=Sxt(h,e,i,c,s[n],l,u,f);break;default:throw new Error("Unrecognized sheet type "+o)}a[n]=d;var _=[],x=[];s&&s[n]&&Ki(s[n]).forEach(function(A){var C="";if(s[n][A].Type==nn.CMNT){if(C=Zw(s[n][A].Target,e),_=kxt(Cs(t,C,!0),C,c),!_||!_.length)return;cne(d,_,!1)}s[n][A].Type==nn.TCMNT&&(C=Zw(s[n][A].Target,e),x=x.concat(G4t(Cs(t,C,!0),c)))}),x&&x.length&&cne(d,x,!0,c.people||[])}catch(A){if(c.WTF)throw A}}function Tl(t){return t.charAt(0)=="/"?t.slice(1):t}function Aye(t,e){if(Eb(),e=e||{},Sj(e),Pl(t,"META-INF/manifest.xml")||Pl(t,"objectdata.xml"))return bne(t,e);if(Pl(t,"Index/Document.iwa")){if(typeof Uint8Array>"u")throw new Error("NUMBERS file parsing requires Uint8Array support");if(typeof yB<"u"){if(t.FileIndex)return yB(t,e);var r=Kt.utils.cfb_new();return Ire(t).forEach(function(T){Fr(r,T,jyt(t,T))}),yB(r,e)}throw new Error("Unsupported NUMBERS file")}if(!Pl(t,"[Content_Types].xml")){if(Pl(t,"index.xml.gz"))throw new Error("Unsupported NUMBERS 08 file");if(Pl(t,"index.xml"))throw new Error("Unsupported NUMBERS 09 file");var n=Kt.find(t,"Index.zip");if(n)return e=ii(e),delete e.type,typeof n.content=="string"&&(e.type="binary"),typeof Bun<"u"&&Buffer.isBuffer(n.content)?mm(new Uint8Array(n.content),e):mm(n.content,e);throw new Error("Unsupported ZIP file")}var i=Ire(t),s=Nvt(yc(t,"[Content_Types].xml")),a=!1,o,c;if(s.workbooks.length===0&&(c="xl/workbook.xml",Cs(t,c,!0)&&s.workbooks.push(c)),s.workbooks.length===0){if(c="xl/workbook.bin",!Cs(t,c,!0))throw new Error("Could not find workbook");s.workbooks.push(c),a=!0}s.workbooks[0].slice(-3)=="bin"&&(a=!0);var l={},u={};if(!e.bookSheets&&!e.bookProps){if(R3=[],s.sst)try{R3=Txt(Cs(t,Tl(s.sst)),s.sst,e)}catch(T){if(e.WTF)throw T}e.cellStyles&&s.themes.length&&(l=z2e(yc(t,s.themes[0].replace(/^\//,""),!0)||"",e)),s.style&&(u=Axt(Cs(t,Tl(s.style)),s.style,l,e))}s.links.map(function(T){try{var L=I3(yc(t,C4(Tl(T))),T);return Ixt(Cs(t,Tl(T)),L,T,e)}catch{}});var f=wxt(Cs(t,Tl(s.workbooks[0])),s.workbooks[0],e),h={},d="";s.coreprops.length&&(d=Cs(t,Tl(s.coreprops[0]),!0),d&&(h=f2e(d)),s.extprops.length!==0&&(d=Cs(t,Tl(s.extprops[0]),!0),d&&jvt(d,h,e)));var g={};(!e.bookSheets||e.bookProps)&&s.custprops.length!==0&&(d=yc(t,Tl(s.custprops[0]),!0),d&&(g=qvt(d,e)));var p={};if((e.bookSheets||e.bookProps)&&(f.Sheets?o=f.Sheets.map(function(L){return L.name}):h.Worksheets&&h.SheetNames.length>0&&(o=h.SheetNames),e.bookProps&&(p.Props=h,p.Custprops=g),e.bookSheets&&typeof o<"u"&&(p.SheetNames=o),e.bookSheets?p.SheetNames:e.bookProps))return p;o={};var m={};e.bookDeps&&s.calcchain&&(m=Cxt(Cs(t,Tl(s.calcchain)),s.calcchain));var y=0,v={},_,x;{var A=f.Sheets;h.Worksheets=A.length,h.SheetNames=[];for(var C=0;C!=A.length;++C)h.SheetNames[C]=A[C].name}var R=a?"bin":"xml",M=s.workbooks[0].lastIndexOf("/"),N=(s.workbooks[0].slice(0,M+1)+"_rels/"+s.workbooks[0].slice(M+1)+".rels").replace(/^\//,"");Pl(t,N)||(N="xl/_rels/workbook."+R+".rels");var Y=I3(yc(t,N,!0),N.replace(/_rels.*/,"s5s"));(s.metadata||[]).length>=1&&(e.xlmeta=Rxt(Cs(t,Tl(s.metadata[0])),s.metadata[0],e)),(s.people||[]).length>=1&&(e.people=X4t(Cs(t,Tl(s.people[0])),e)),Y&&(Y=W7t(Y,f.Sheets));var H=Cs(t,"xl/worksheets/sheet.xml",!0)?1:0;e:for(y=0;y!=h.Worksheets;++y){var E="sheet";if(Y&&Y[y]?(_="xl/"+Y[y][1].replace(/[\/]?xl\//,""),Pl(t,_)||(_=Y[y][1]),Pl(t,_)||(_=N.replace(/_rels\/.*$/,"")+Y[y][1]),E=Y[y][2]):(_="xl/worksheets/sheet"+(y+1-H)+"."+R,_=_.replace(/sheet0\./,"sheet.")),x=_.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),e&&e.sheets!=null)switch(typeof e.sheets){case"number":if(y!=e.sheets)continue e;break;case"string":if(h.SheetNames[y].toLowerCase()!=e.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(e.sheets)){for(var k=!1,w=0;w!=e.sheets.length;++w)typeof e.sheets[w]=="number"&&e.sheets[w]==y&&(k=1),typeof e.sheets[w]=="string"&&e.sheets[w].toLowerCase()==h.SheetNames[y].toLowerCase()&&(k=1);if(!k)continue e}}K7t(t,_,x,h.SheetNames[y],y,v,o,E,e,f,l,u)}return p={Directory:s,Workbook:f,Props:h,Custprops:g,Deps:m,Sheets:o,SheetNames:h.SheetNames,Strings:R3,Styles:u,Themes:l,SSF:ii(tr)},e&&e.bookFiles&&(t.files?(p.keys=i,p.files=t.files):(p.keys=[],p.files={},t.FullPaths.forEach(function(T,L){T=T.replace(/^Root Entry[\/]/,""),p.keys.push(T),p.files[T]=t.FileIndex[L]}))),e&&e.bookVBA&&(s.vba.length>0?p.vbaraw=Cs(t,Tl(s.vba[0]),!0):s.defaults&&s.defaults.bin===i6t&&(p.vbaraw=Cs(t,"xl/vbaProject.bin",!0))),p.bookType=a?"xlsb":"xlsx",p}function G7t(t,e){var r=e||{},n="Workbook",i=Kt.find(t,n);try{if(n="/!DataSpaces/Version",i=Kt.find(t,n),!i||!i.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(c3t(i.content),n="/!DataSpaces/DataSpaceMap",i=Kt.find(t,n),!i||!i.content)throw new Error("ECMA-376 Encrypted file missing "+n);var s=u3t(i.content);if(s.length!==1||s[0].comps.length!==1||s[0].comps[0].t!==0||s[0].name!=="StrongEncryptionDataSpace"||s[0].comps[0].v!=="EncryptedPackage")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",i=Kt.find(t,n),!i||!i.content)throw new Error("ECMA-376 Encrypted file missing "+n);var a=f3t(i.content);if(a.length!=1||a[0]!="StrongEncryptionTransform")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",i=Kt.find(t,n),!i||!i.content)throw new Error("ECMA-376 Encrypted file missing "+n);d3t(i.content)}catch{}if(n="/EncryptionInfo",i=Kt.find(t,n),!i||!i.content)throw new Error("ECMA-376 Encrypted file missing "+n);var o=p3t(i.content);if(n="/EncryptedPackage",i=Kt.find(t,n),!i||!i.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(o[0]==4&&typeof decrypt_agile<"u")return decrypt_agile(o[1],i.content,r.password||"",r);if(o[0]==2&&typeof decrypt_std76<"u")return decrypt_std76(o[1],i.content,r.password||"",r);throw new Error("File is password-protected")}function Y7t(t,e){t&&!t.SSF&&(t.SSF=ii(tr)),t&&t.SSF&&(Eb(),J6(t.SSF),e.revssf=FA(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,P3?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var r="bin",n=!0,i=fj();Aj(e=e||{});var s=WV(),a="",o=0;if(e.cellXfs=[],hp(e.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={}),a="docProps/core.xml",Fr(s,a,h2e(t.Props,e)),i.coreprops.push(a),Zn(e.rels,2,a,nn.CORE_PROPS),a="docProps/app.xml",!(t.Props&&t.Props.SheetNames))if(!t.Workbook||!t.Workbook.Sheets)t.Props.SheetNames=t.SheetNames;else{for(var c=[],l=0;l<t.SheetNames.length;++l)(t.Workbook.Sheets[l]||{}).Hidden!=2&&c.push(t.SheetNames[l]);t.Props.SheetNames=c}for(t.Props.Worksheets=t.Props.SheetNames.length,Fr(s,a,g2e(t.Props)),i.extprops.push(a),Zn(e.rels,3,a,nn.EXT_PROPS),t.Custprops!==t.Props&&Ki(t.Custprops||{}).length>0&&(a="docProps/custom.xml",Fr(s,a,m2e(t.Custprops)),i.custprops.push(a),Zn(e.rels,4,a,nn.CUST_PROPS)),o=1;o<=t.SheetNames.length;++o){var u={"!id":{}},f=t.Sheets[t.SheetNames[o-1]],h=(f||{})["!type"]||"sheet";switch(h){case"chart":default:a="xl/worksheets/sheet"+o+"."+r,Fr(s,a,z5t(o-1,e,t,u)),i.sheets.push(a),Zn(e.wbrels,-1,"worksheets/sheet"+o+"."+r,nn.WS[0])}if(f){var d=f["!comments"],g=!1,p="";d&&d.length>0&&(p="xl/comments"+o+"."+r,Fr(s,p,n6t(d)),i.comments.push(p),Zn(u,-1,"../comments"+o+"."+r,nn.CMNT),g=!0),f["!legacy"]&&g&&Fr(s,"xl/drawings/vmlDrawing"+o+".vml",q2e(o,f["!comments"])),delete f["!comments"],delete f["!legacy"]}u["!id"].rId1&&Fr(s,C4(a),ky(u))}e.Strings!=null&&e.Strings.length>0&&(a="xl/sharedStrings."+r,Fr(s,a,o3t(e.Strings)),i.strs.push(a),Zn(e.wbrels,-1,"sharedStrings."+r,nn.SST)),a="xl/workbook."+r,Fr(s,a,bxt(t)),i.workbooks.push(a),Zn(e.rels,1,a,nn.WB),a="xl/theme/theme1.xml";var m=yj(t.Themes,e);return Fr(s,a,m),i.themes.push(a),Zn(e.wbrels,-1,"theme/theme1.xml",nn.THEME),a="xl/styles."+r,Fr(s,a,f4t(t,e)),i.styles.push(a),Zn(e.wbrels,-1,"styles."+r,nn.STY),t.vbaraw&&n&&(a="xl/vbaProject.bin",Fr(s,a,t.vbaraw),i.vba.push(a),Zn(e.wbrels,-1,"vbaProject.bin",nn.VBA)),a="xl/metadata."+r,Fr(s,a,L4t()),i.metadata.push(a),Zn(e.wbrels,-1,"metadata."+r,nn.XLMETA),Fr(s,"[Content_Types].xml",l2e(i,e)),Fr(s,"_rels/.rels",ky(e.rels)),Fr(s,"xl/_rels/workbook."+r+".rels",ky(e.wbrels)),delete e.revssf,delete e.ssf,s}function Tye(t,e){t&&!t.SSF&&(t.SSF=ii(tr)),t&&t.SSF&&(Eb(),J6(t.SSF),e.revssf=FA(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,P3?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var r="xml",n=o6t.indexOf(e.bookType)>-1,i=fj();Aj(e=e||{});var s=WV(),a="",o=0;if(e.cellXfs=[],hp(e.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={}),a="docProps/core.xml",Fr(s,a,h2e(t.Props,e)),i.coreprops.push(a),Zn(e.rels,2,a,nn.CORE_PROPS),a="docProps/app.xml",!(t.Props&&t.Props.SheetNames))if(!t.Workbook||!t.Workbook.Sheets)t.Props.SheetNames=t.SheetNames;else{for(var c=[],l=0;l<t.SheetNames.length;++l)(t.Workbook.Sheets[l]||{}).Hidden!=2&&c.push(t.SheetNames[l]);t.Props.SheetNames=c}t.Props.Worksheets=t.Props.SheetNames.length,Fr(s,a,g2e(t.Props)),i.extprops.push(a),Zn(e.rels,3,a,nn.EXT_PROPS),t.Custprops!==t.Props&&Ki(t.Custprops||{}).length>0&&(a="docProps/custom.xml",Fr(s,a,m2e(t.Custprops)),i.custprops.push(a),Zn(e.rels,4,a,nn.CUST_PROPS));var u=["SheetJ5"];for(e.tcid=0,o=1;o<=t.SheetNames.length;++o){var f={"!id":{}},h=t.Sheets[t.SheetNames[o-1]],d=(h||{})["!type"]||"sheet";switch(d){case"chart":default:a="xl/worksheets/sheet"+o+"."+r,Fr(s,a,C_t(o-1,e,t,f)),i.sheets.push(a),Zn(e.wbrels,-1,"worksheets/sheet"+o+"."+r,nn.WS[0])}if(h){var g=h["!comments"],p=!1,m="";if(g&&g.length>0){var y=!1;g.forEach(function(v){v[1].forEach(function(_){_.T==!0&&(y=!0)})}),y&&(m="xl/threadedComments/threadedComment"+o+".xml",Fr(s,m,Y4t(g,u,e)),i.threadedcomments.push(m),Zn(f,-1,"../threadedComments/threadedComment"+o+".xml",nn.TCMNT)),m="xl/comments"+o+"."+r,Fr(s,m,K4t(g)),i.comments.push(m),Zn(f,-1,"../comments"+o+"."+r,nn.CMNT),p=!0}h["!legacy"]&&p&&Fr(s,"xl/drawings/vmlDrawing"+o+".vml",q2e(o,h["!comments"])),delete h["!comments"],delete h["!legacy"]}f["!id"].rId1&&Fr(s,C4(a),ky(f))}return e.Strings!=null&&e.Strings.length>0&&(a="xl/sharedStrings."+r,Fr(s,a,r3t(e.Strings,e)),i.strs.push(a),Zn(e.wbrels,-1,"sharedStrings."+r,nn.SST)),a="xl/workbook."+r,Fr(s,a,nxt(t)),i.workbooks.push(a),Zn(e.rels,1,a,nn.WB),a="xl/theme/theme1.xml",Fr(s,a,yj(t.Themes,e)),i.themes.push(a),Zn(e.wbrels,-1,"theme/theme1.xml",nn.THEME),a="xl/styles."+r,Fr(s,a,z3t(t,e)),i.styles.push(a),Zn(e.wbrels,-1,"styles."+r,nn.STY),t.vbaraw&&n&&(a="xl/vbaProject.bin",Fr(s,a,t.vbaraw),i.vba.push(a),Zn(e.wbrels,-1,"vbaProject.bin",nn.VBA)),a="xl/metadata."+r,Fr(s,a,$4t()),i.metadata.push(a),Zn(e.wbrels,-1,"metadata."+r,nn.XLMETA),u.length>1&&(a="xl/persons/person.xml",Fr(s,a,Z4t(u)),i.people.push(a),Zn(e.wbrels,-1,"persons/person.xml",nn.PEOPLE)),Fr(s,"[Content_Types].xml",l2e(i,e)),Fr(s,"_rels/.rels",ky(e.rels)),Fr(s,"xl/_rels/workbook."+r+".rels",ky(e.wbrels)),delete e.revssf,delete e.ssf,s}function Tj(t,e){var r="";switch((e||{}).type||"base64"){case"buffer":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];case"base64":r=al(t.slice(0,12));break;case"binary":r=t;break;case"array":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];default:throw new Error("Unrecognized type "+(e&&e.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function X7t(t,e){return Kt.find(t,"EncryptedPackage")?G7t(t,e):Ej(t,e)}function Z7t(t,e){var r,n=t,i=e||{};return i.type||(i.type=tn&&Buffer.isBuffer(t)?"buffer":"base64"),r=zme(n,i),Aye(r,i)}function kye(t,e){var r=0;e:for(;r<t.length;)switch(t.charCodeAt(r)){case 10:case 13:case 32:++r;break;case 60:return ZN(t.slice(r),e);default:break e}return pv.to_workbook(t,e)}function J7t(t,e){var r="",n=Tj(t,e);switch(e.type){case"base64":r=al(t);break;case"binary":r=t;break;case"buffer":r=t.toString("binary");break;case"array":r=fm(t);break;default:throw new Error("Unrecognized type "+e.type)}return n[0]==239&&n[1]==187&&n[2]==191&&(r=ni(r)),e.type="binary",kye(r,e)}function Q7t(t,e){var r=t;return e.type=="base64"&&(r=al(r)),r=typeof Br<"u"?Br.utils.decode(1200,r.slice(2),"str"):Sme(r.slice(2)),e.type="binary",kye(r,e)}function eEt(t){return t.match(/[^\x00-\x7F]/)?Xf(t):t}function vB(t,e,r,n){return n?(r.type="string",pv.to_workbook(t,r)):pv.to_workbook(e,r)}function mm(t,e){MA();var r=e||{};if(r.codepage&&typeof Br>"u"&&console.error("Codepage tables are not loaded.  Non-ASCII characters may not give expected results"),typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer)return mm(new Uint8Array(t),(r=ii(r),r.type="array",r));typeof Uint8Array<"u"&&t instanceof Uint8Array&&!r.type&&(r.type=typeof Deno<"u"?"buffer":"array");var n=t,i=[0,0,0,0],s=!1;if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),Cy={},r.dateNF&&(Cy.dateNF=r.dateNF),r.type||(r.type=tn&&Buffer.isBuffer(t)?"buffer":"base64"),r.type=="file"&&(r.type=tn?"buffer":"binary",n=Byt(t),typeof Uint8Array<"u"&&!tn&&(r.type="array")),r.type=="string"&&(s=!0,r.type="binary",r.codepage=65001,n=eEt(t)),r.type=="array"&&typeof Uint8Array<"u"&&t instanceof Uint8Array&&typeof ArrayBuffer<"u"){var a=new ArrayBuffer(3),o=new Uint8Array(a);if(o.foo="bar",!o.foo)return r=ii(r),r.type="array",mm(VV(n),r)}switch((i=Tj(n,r))[0]){case 208:if(i[1]===207&&i[2]===17&&i[3]===224&&i[4]===161&&i[5]===177&&i[6]===26&&i[7]===225)return X7t(Kt.read(n,r),r);break;case 9:if(i[1]<=8)return Ej(n,r);break;case 60:return ZN(n,r);case 73:if(i[1]===73&&i[2]===42&&i[3]===0)throw new Error("TIFF Image File is not a spreadsheet");if(i[1]===68)return qwt(n,r);break;case 84:if(i[1]===65&&i[2]===66&&i[3]===76)return O2e.to_workbook(n,r);break;case 80:return i[1]===75&&i[2]<9&&i[3]<9?Z7t(n,r):vB(t,n,r,s);case 239:return i[3]===60?ZN(n,r):vB(t,n,r,s);case 255:if(i[1]===254)return Q7t(n,r);if(i[1]===0&&i[2]===2&&i[3]===0)return Ng.to_workbook(n,r);break;case 0:if(i[1]===0&&(i[2]>=2&&i[3]===0||i[2]===0&&(i[3]===8||i[3]===9)))return Ng.to_workbook(n,r);break;case 3:case 131:case 139:case 140:return XN.to_workbook(n,r);case 123:if(i[1]===92&&i[2]===114&&i[3]===116)return T3t(n,r);break;case 10:case 13:case 32:return J7t(n,r);case 137:if(i[1]===80&&i[2]===78&&i[3]===71)throw new Error("PNG Image File is not a spreadsheet");break;case 8:if(i[1]===231)throw new Error("Unsupported Multiplan 1.x file!");break;case 12:if(i[1]===236)throw new Error("Unsupported Multiplan 2.x file!");if(i[1]===237)throw new Error("Unsupported Multiplan 3.x file!");break}return zwt.indexOf(i[0])>-1&&i[2]<=12&&i[3]<=31?XN.to_workbook(n,r):vB(t,n,r,s)}function eM(t,e){var r=e||{};return r.type="file",mm(t,r)}function Cye(t,e){switch(e.type){case"base64":case"binary":break;case"buffer":case"array":e.type="";break;case"file":return Q6(e.file,Kt.write(t,{type:tn?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");default:throw new Error("Unrecognized type "+e.type)}return Kt.write(t,e)}function tEt(t,e){switch(e.bookType){case"ods":return wye(t,e);case"numbers":return V7t(t,e);case"xlsb":return Y7t(t,e);default:return Tye(t,e)}}function rEt(t,e){var r=ii(e||{}),n=tEt(t,r);return Iye(n,r)}function nEt(t,e){var r=ii(e||{}),n=Tye(t,r);return Iye(n,r)}function Iye(t,e){var r={},n=tn?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(e.compression&&(r.compression="DEFLATE"),e.password)r.type=n;else switch(e.type){case"base64":r.type="base64";break;case"binary":r.type="string";break;case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");case"buffer":case"file":r.type=n;break;default:throw new Error("Unrecognized type "+e.type)}var i=t.FullPaths?Kt.write(t,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[r.type]||r.type,compression:!!e.compression}):t.generate(r);if(typeof Deno<"u"&&typeof i=="string"){if(e.type=="binary"||e.type=="base64")return i;i=new Uint8Array(Z6(i))}return e.password&&typeof encrypt_agile<"u"?Cye(encrypt_agile(i,e.password),e):e.type==="file"?Q6(e.file,i):e.type=="string"?ni(i):i}function iEt(t,e){var r=e||{},n=n7t(t,r);return Cye(n,r)}function Ef(t,e,r){r||(r="");var n=r+t;switch(e.type){case"base64":return FE(Xf(n));case"binary":return Xf(n);case"string":return t;case"file":return Q6(e.file,n,"utf8");case"buffer":return tn?Ah(n,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(n):Ef(n,{type:"binary"}).split("").map(function(i){return i.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function sEt(t,e){switch(e.type){case"base64":return ryt(t);case"binary":return t;case"string":return t;case"file":return Q6(e.file,t,"binary");case"buffer":return tn?Ah(t,"binary"):t.split("").map(function(r){return r.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function U5(t,e){switch(e.type){case"string":case"base64":case"binary":for(var r="",n=0;n<t.length;++n)r+=String.fromCharCode(t[n]);return e.type=="base64"?FE(r):e.type=="string"?ni(r):r;case"file":return Q6(e.file,t);case"buffer":return t;default:throw new Error("Unrecognized type "+e.type)}}function kj(t,e){MA(),aye(t);var r=ii(e||{});if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),r.type=="array"){r.type="binary";var n=kj(t,r);return r.type="array",Z6(n)}return nEt(t,r)}function KA(t,e){MA(),aye(t);var r=ii(e||{});if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),r.type=="array"){r.type="binary";var n=KA(t,r);return r.type="array",Z6(n)}var i=0;if(r.sheet&&(typeof r.sheet=="number"?i=r.sheet:i=t.SheetNames.indexOf(r.sheet),!t.SheetNames[i]))throw new Error("Sheet not found: "+r.sheet+" : "+typeof r.sheet);switch(r.bookType||"xlsb"){case"xml":case"xlml":return Ef(Xxt(t,r),r);case"slk":case"sylk":return Ef(D2e.from_sheet(t.Sheets[t.SheetNames[i]],r,t),r);case"htm":case"html":return Ef(gye(t.Sheets[t.SheetNames[i]],r),r);case"txt":return sEt(Bye(t.Sheets[t.SheetNames[i]],r),r);case"csv":return Ef(Ij(t.Sheets[t.SheetNames[i]],r),r,"\uFEFF");case"dif":return Ef(O2e.from_sheet(t.Sheets[t.SheetNames[i]],r),r);case"dbf":return U5(XN.from_sheet(t.Sheets[t.SheetNames[i]],r),r);case"prn":return Ef(pv.from_sheet(t.Sheets[t.SheetNames[i]],r),r);case"rtf":return Ef(k3t(t.Sheets[t.SheetNames[i]]),r);case"eth":return Ef(N2e.from_sheet(t.Sheets[t.SheetNames[i]],r),r);case"fods":return Ef(wye(t,r),r);case"wk1":return U5(Ng.sheet_to_wk1(t.Sheets[t.SheetNames[i]],r),r);case"wk3":return U5(Ng.book_to_wk3(t,r),r);case"biff2":r.biff||(r.biff=2);case"biff3":r.biff||(r.biff=3);case"biff4":return r.biff||(r.biff=4),U5(uye(t,r),r);case"biff5":r.biff||(r.biff=5);case"biff8":case"xla":case"xls":return r.biff||(r.biff=8),iEt(t,r);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return rEt(t,r);default:throw new Error("Unrecognized bookType |"+r.bookType+"|")}}function Cj(t){if(!t.bookType){var e={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},r=t.file.slice(t.file.lastIndexOf(".")).toLowerCase();r.match(/^\.[a-z]+$/)&&(t.bookType=r.slice(1)),t.bookType=e[t.bookType]||t.bookType}}function Sne(t,e,r){var n=r||{};return n.type="file",n.file=e,Cj(n),KA(t,n)}function aEt(t,e,r){var n=r||{};return n.type="file",n.file=e,Cj(n),kj(t,n)}function oEt(t,e,r,n){var i=r||{};i.type="file",i.file=t,Cj(i),i.type="buffer";var s=n;return s instanceof Function||(s=r),Id.writeFile(t,KA(e,i),s)}function Rye(t,e,r,n,i,s,a){var o=hn(r),c=a.defval,l=a.raw||!Object.prototype.hasOwnProperty.call(a,"raw"),u=!0,f=t["!data"]!=null,h=i===1?[]:{};if(i!==1)if(Object.defineProperty)try{Object.defineProperty(h,"__rowNum__",{value:r,enumerable:!1})}catch{h.__rowNum__=r}else h.__rowNum__=r;if(!f||t["!data"][r])for(var d=e.s.c;d<=e.e.c;++d){var g=f?(t["!data"][r]||[])[d]:t[n[d]+o];if(g===void 0||g.t===void 0){if(c===void 0)continue;s[d]!=null&&(h[s[d]]=c);continue}var p=g.v;switch(g.t){case"z":if(p==null)break;continue;case"e":p=p==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+g.t)}if(s[d]!=null){if(p==null)if(g.t=="e"&&p===null)h[s[d]]=null;else if(c!==void 0)h[s[d]]=c;else if(l&&p===null)h[s[d]]=null;else continue;else h[s[d]]=l&&(g.t!=="n"||g.t==="n"&&a.rawNumbers!==!1)?p:uh(g,p,a);p!=null&&(u=!1)}}return{row:h,isempty:u}}function YE(t,e){if(t==null||t["!ref"]==null)return[];var r={t:"n",v:0},n=0,i=1,s=[],a=0,o="",c={s:{r:0,c:0},e:{r:0,c:0}},l=e||{},u=l.range!=null?l.range:t["!ref"];switch(l.header===1?n=1:l.header==="A"?n=2:Array.isArray(l.header)?n=3:l.header==null&&(n=0),typeof u){case"string":c=pn(u);break;case"number":c=pn(t["!ref"]),c.s.r=u;break;default:c=u}n>0&&(i=0);var f=hn(c.s.r),h=[],d=[],g=0,p=0,m=t["!data"]!=null,y=c.s.r,v=0,_={};m&&!t["!data"][y]&&(t["!data"][y]=[]);var x=l.skipHidden&&t["!cols"]||[],A=l.skipHidden&&t["!rows"]||[];for(v=c.s.c;v<=c.e.c;++v)if(!(x[v]||{}).hidden)switch(h[v]=Hr(v),r=m?t["!data"][y][v]:t[h[v]+f],n){case 1:s[v]=v-c.s.c;break;case 2:s[v]=h[v];break;case 3:s[v]=l.header[v-c.s.c];break;default:if(r==null&&(r={w:"__EMPTY",t:"s"}),o=a=uh(r,null,l),p=_[a]||0,!p)_[a]=1;else{do o=a+"_"+p++;while(_[o]);_[a]=p,_[o]=1}s[v]=o}for(y=c.s.r+i;y<=c.e.r;++y)if(!(A[y]||{}).hidden){var C=Rye(t,c,y,h,n,s,l);(C.isempty===!1||(n===1?l.blankrows!==!1:l.blankrows))&&(d[g++]=C.row)}return d.length=g,d}var Ane=/"/g;function Pye(t,e,r,n,i,s,a,o){for(var c=!0,l=[],u="",f=hn(r),h=t["!data"]!=null,d=h&&t["!data"][r]||[],g=e.s.c;g<=e.e.c;++g)if(n[g]){var p=h?d[g]:t[n[g]+f];if(p==null)u="";else if(p.v!=null){c=!1,u=""+(o.rawNumbers&&p.t=="n"?p.v:uh(p,null,o));for(var m=0,y=0;m!==u.length;++m)if((y=u.charCodeAt(m))===i||y===s||y===34||o.forceQuotes){u='"'+u.replace(Ane,'""')+'"';break}u=="ID"&&(u='"ID"')}else p.f!=null&&!p.F?(c=!1,u="="+p.f,u.indexOf(",")>=0&&(u='"'+u.replace(Ane,'""')+'"')):u="";l.push(u)}return o.blankrows===!1&&c?null:l.join(a)}function Ij(t,e){var r=[],n=e??{};if(t==null||t["!ref"]==null)return"";for(var i=pn(t["!ref"]),s=n.FS!==void 0?n.FS:",",a=s.charCodeAt(0),o=n.RS!==void 0?n.RS:`
`,c=o.charCodeAt(0),l=new RegExp((s=="|"?"\\|":s)+"+$"),u="",f=[],h=n.skipHidden&&t["!cols"]||[],d=n.skipHidden&&t["!rows"]||[],g=i.s.c;g<=i.e.c;++g)(h[g]||{}).hidden||(f[g]=Hr(g));for(var p=0,m=i.s.r;m<=i.e.r;++m)(d[m]||{}).hidden||(u=Pye(t,i,m,f,a,c,s,n),u!=null&&(n.strip&&(u=u.replace(l,"")),(u||n.blankrows!==!1)&&r.push((p++?o:"")+u)));return r.join("")}function Bye(t,e){e||(e={}),e.FS="	",e.RS=`
`;var r=Ij(t,e);if(typeof Br>"u"||e.type=="string")return r;var n=Br.utils.encode(1200,r,"str");return"ÿþ"+n}function cEt(t){var e="",r,n="";if(t==null||t["!ref"]==null)return[];var i=pn(t["!ref"]),s="",a=[],o,c=[],l=t["!data"]!=null;for(o=i.s.c;o<=i.e.c;++o)a[o]=Hr(o);for(var u=i.s.r;u<=i.e.r;++u)for(s=hn(u),o=i.s.c;o<=i.e.c;++o)if(e=a[o]+s,r=l?(t["!data"][u]||[])[o]:t[e],n="",r!==void 0){if(r.F!=null){if(e=r.F,!r.f)continue;n=r.f,e.indexOf(":")==-1&&(e=e+":"+e)}if(r.f!=null)n=r.f;else{if(r.t=="z")continue;if(r.t=="n"&&r.v!=null)n=""+r.v;else if(r.t=="b")n=r.v?"TRUE":"FALSE";else if(r.w!==void 0)n="'"+r.w;else{if(r.v===void 0)continue;r.t=="s"?n="'"+r.v:n=""+r.v}}c[c.length]=e+"="+n}return c}function Dye(t,e,r){var n=r||{},i=t?t["!data"]!=null:n.dense,s=+!n.skipHeader,a=t||{};!t&&i&&(a["!data"]=[]);var o=0,c=0;if(a&&n.origin!=null)if(typeof n.origin=="number")o=n.origin;else{var l=typeof n.origin=="string"?Hn(n.origin):n.origin;o=l.r,c=l.c}var u={s:{c:0,r:0},e:{c,r:o+e.length-1+s}};if(a["!ref"]){var f=pn(a["!ref"]);u.e.c=Math.max(u.e.c,f.e.c),u.e.r=Math.max(u.e.r,f.e.r),o==-1&&(o=f.e.r+1,u.e.r=o+e.length-1+s)}else o==-1&&(o=0,u.e.r=e.length-1+s);var h=n.header||[],d=0,g=[];e.forEach(function(m,y){i&&!a["!data"][o+y+s]&&(a["!data"][o+y+s]=[]),i&&(g=a["!data"][o+y+s]),Ki(m).forEach(function(v){(d=h.indexOf(v))==-1&&(h[d=h.length]=v);var _=m[v],x="z",A="",C=i?"":Hr(c+d)+hn(o+y+s),R=i?g[c+d]:a[C];_&&typeof _=="object"&&!(_ instanceof Date)?i?g[c+d]=_:a[C]=_:(typeof _=="number"?x="n":typeof _=="boolean"?x="b":typeof _=="string"?x="s":_ instanceof Date?(x="d",n.cellDates||(x="n",_=Ls(_)),A=R!=null&&R.z&&up(R.z)?R.z:n.dateNF||tr[14]):_===null&&n.nullError&&(x="e",_=0),R?(R.t=x,R.v=_,delete R.w,delete R.R,A&&(R.z=A)):i?g[c+d]=R={t:x,v:_}:a[C]=R={t:x,v:_},A&&(R.z=A))})}),u.e.c=Math.max(u.e.c,c+h.length-1);var p=hn(o);if(i&&!a["!data"][o]&&(a["!data"][o]=[]),s)for(d=0;d<h.length;++d)i?a["!data"][o][d+c]={t:"s",v:h[d]}:a[Hr(d+c)+p]={t:"s",v:h[d]};return a["!ref"]=Ir(u),a}function lEt(t,e){return Dye(null,t,e)}function XE(t,e,r){if(typeof e=="string"){if(t["!data"]!=null){var n=Hn(e);return t["!data"][n.r]||(t["!data"][n.r]=[]),t["!data"][n.r][n.c]||(t["!data"][n.r][n.c]={t:"z"})}return t[e]||(t[e]={t:"z"})}return typeof e!="number"?XE(t,en(e)):XE(t,Hr(r||0)+hn(e))}function uEt(t,e){if(typeof e=="number"){if(e>=0&&t.SheetNames.length>e)return e;throw new Error("Cannot find sheet # "+e)}else if(typeof e=="string"){var r=t.SheetNames.indexOf(e);if(r>-1)return r;throw new Error("Cannot find sheet name |"+e+"|")}else throw new Error("Cannot find sheet |"+e+"|")}function Rj(){return{SheetNames:[],Sheets:{}}}function GA(t,e,r,n){var i=1;if(!r)for(;i<=65535&&t.SheetNames.indexOf(r="Sheet"+i)!=-1;++i,r=void 0);if(!r||t.SheetNames.length>=65535)throw new Error("Too many worksheets");if(n&&t.SheetNames.indexOf(r)>=0){var s=r.match(/(^.*?)(\d+)$/);i=s&&+s[2]||0;var a=s&&s[1]||r;for(++i;i<=65535&&t.SheetNames.indexOf(r=a+i)!=-1;++i);}if(sye(r),t.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return t.SheetNames.push(r),t.Sheets[r]=e,r}function fEt(t,e,r){t.Workbook||(t.Workbook={}),t.Workbook.Sheets||(t.Workbook.Sheets=[]);var n=uEt(t,e);switch(t.Workbook.Sheets[n]||(t.Workbook.Sheets[n]={}),r){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+r)}t.Workbook.Sheets[n].Hidden=r}function hEt(t,e){return t.z=e,t}function Oye(t,e,r){return e?(t.l={Target:e},r&&(t.l.Tooltip=r)):delete t.l,t}function dEt(t,e,r){return Oye(t,"#"+e,r)}function pEt(t,e,r){t.c||(t.c=[]),t.c.push({t:e,a:r||"SheetJS"})}function gEt(t,e,r,n){for(var i=typeof e!="string"?e:pn(e),s=typeof e=="string"?e:Ir(e),a=i.s.r;a<=i.e.r;++a)for(var o=i.s.c;o<=i.e.c;++o){var c=XE(t,a,o);c.t="n",c.F=s,delete c.v,a==i.s.r&&o==i.s.c&&(c.f=r,n&&(c.D=!0))}var l=Js(t["!ref"]);return l.s.r>i.s.r&&(l.s.r=i.s.r),l.s.c>i.s.c&&(l.s.c=i.s.c),l.e.r<i.e.r&&(l.e.r=i.e.r),l.e.c<i.e.c&&(l.e.c=i.e.c),t["!ref"]=Ir(l),t}var zd={encode_col:Hr,encode_row:hn,encode_cell:en,encode_range:Ir,decode_col:nj,decode_row:rj,split_cell:hvt,decode_cell:Hn,decode_range:Js,format_cell:uh,sheet_add_aoa:n2e,sheet_add_json:Dye,sheet_add_dom:mye,aoa_to_sheet:Ab,json_to_sheet:lEt,table_to_sheet:yye,table_to_book:_7t,sheet_to_csv:Ij,sheet_to_txt:Bye,sheet_to_json:YE,sheet_to_html:gye,sheet_to_formulae:cEt,sheet_to_row_object_array:YE,sheet_get_cell:XE,book_new:Rj,book_append_sheet:GA,book_set_sheet_visibility:fEt,cell_set_number_format:hEt,cell_set_hyperlink:Oye,cell_set_internal_link:dEt,cell_add_comment:pEt,sheet_set_array_formula:gEt,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}},YA;function mEt(t){YA=t}function yEt(t,e){var r=YA(),n=e??{};if(t==null||t["!ref"]==null)return r.push(null),r;for(var i=pn(t["!ref"]),s=n.FS!==void 0?n.FS:",",a=s.charCodeAt(0),o=n.RS!==void 0?n.RS:`
`,c=o.charCodeAt(0),l=new RegExp((s=="|"?"\\|":s)+"+$"),u="",f=[],h=n.skipHidden&&t["!cols"]||[],d=n.skipHidden&&t["!rows"]||[],g=i.s.c;g<=i.e.c;++g)(h[g]||{}).hidden||(f[g]=Hr(g));var p=i.s.r,m=!1,y=0;return r._read=function(){if(!m)return m=!0,r.push("\uFEFF");for(;p<=i.e.r;)if(++p,!(d[p-1]||{}).hidden&&(u=Pye(t,i,p-1,f,a,c,s,n),u!=null&&(n.strip&&(u=u.replace(l,"")),u||n.blankrows!==!1)))return r.push((y++?o:"")+u);return r.push(null)},r}function vEt(t,e){var r=YA(),n=e||{},i=n.header!=null?n.header:hye,s=n.footer!=null?n.footer:dye;r.push(i);var a=Js(t["!ref"]);r.push(pye(t,a,n));var o=a.s.r,c=!1;return r._read=function(){if(o>a.e.r)return c||(c=!0,r.push("</table>"+s)),r.push(null);for(;o<=a.e.r;){r.push(fye(t,a,o,n)),++o;break}},r}function bEt(t,e){var r=YA({objectMode:!0});if(t==null||t["!ref"]==null)return r.push(null),r;var n={t:"n",v:0},i=0,s=1,a=[],o=0,c="",l={s:{r:0,c:0},e:{r:0,c:0}},u=e||{},f=u.range!=null?u.range:t["!ref"];switch(u.header===1?i=1:u.header==="A"?i=2:Array.isArray(u.header)&&(i=3),typeof f){case"string":l=pn(f);break;case"number":l=pn(t["!ref"]),l.s.r=f;break;default:l=f}i>0&&(s=0);var h=hn(l.s.r),d=[],g=0,p=t["!data"]!=null,m=l.s.r,y=0,v={};p&&!t["!data"][m]&&(t["!data"][m]=[]);var _=u.skipHidden&&t["!cols"]||[],x=u.skipHidden&&t["!rows"]||[];for(y=l.s.c;y<=l.e.c;++y)if(!(_[y]||{}).hidden)switch(d[y]=Hr(y),n=p?t["!data"][m][y]:t[d[y]+h],i){case 1:a[y]=y-l.s.c;break;case 2:a[y]=d[y];break;case 3:a[y]=u.header[y-l.s.c];break;default:if(n==null&&(n={w:"__EMPTY",t:"s"}),c=o=uh(n,null,u),g=v[o]||0,!g)v[o]=1;else{do c=o+"_"+g++;while(v[c]);v[o]=g,v[c]=1}a[y]=c}return m=l.s.r+s,r._read=function(){for(;m<=l.e.r;)if(!(x[m-1]||{}).hidden){var A=Rye(t,l,m,d,i,a,u);if(++m,A.isempty===!1||(i===1?u.blankrows!==!1:u.blankrows)){r.push(A.row);return}}return r.push(null)},r}var Nye={to_json:bEt,to_html:vEt,to_csv:yEt,set_readable:mEt};const Lf={parse_xlscfb:Ej,parse_zip:Aye,read:mm,readFile:eM,readFileSync:eM,write:KA,writeFile:Sne,writeFileSync:Sne,writeFileAsync:oEt,writeXLSX:kj,writeFileXLSX:aEt,utils:zd,set_fs:Fme,set_cptable:eyt,stream:Nye,SSF:Mme,CFB:Kt};async function wEt(t){return await(await ns.get(t)).data}async function _Et(t,e){const n=(await ns.get(t,{responseType:"arraybuffer"})).data,s=Object.assign({type:"buffer",cellDates:!0},e||{});return mm(n,s)}const xEt="messageInconnu",EEt="formatArguments",tM="nomFonctionManquant",SEt="multiplesFonctions",Mye="pasUneFonction",yg="exécutionIpa",Jw="initIpa",rM="initIpaDéjàLancé",Tne=async(t,e)=>new Promise(r=>t.once(e,r));class AEt extends Function{constructor(){return Object.setPrototypeOf(function(){},new.target.prototype)}}class TEt extends AEt{dernièreErreur;événements;événementsInternes;tâches;constructor(){super(),this.événements=new qi.EventEmitter,this.événementsInternes=new qi.EventEmitter,this.tâches={}}__call__(e,r={}){typeof r!="object"&&this.erreur({code:EEt,erreur:`La fonction ${e.join(".")} fut appelée avec arguments ${r}. 
      Toute fonction mandataire Constellation doit être appelée avec un seul argument en format d'objet (dictionnaire).`});const n=rs(),i=Object.entries(r).find(s=>typeof s[1]=="function")?.[0];return i?this.appelerFonctionSuivre(n,e,r,i):this.appelerFonctionAction(n,e,r)}async appelerFonctionSuivre(e,r,n,i){const s=n[i],a=Object.fromEntries(Object.entries(n).filter(d=>typeof d[1]!="function"));s===void 0&&this.erreur({code:tM,erreur:"Aucun argument de nom "+i+" n'a été donnée pour "+r.join("."),idRequête:e}),Object.keys(n).length>Object.keys(a).length+1?this.erreur({code:SEt,erreur:"Plus d'un argument pour "+r.join(".")+" est une fonction : "+JSON.stringify(n),idRequête:e}):typeof s!="function"&&this.erreur({code:Mye,erreur:"Argument "+i+"n'est pas une fonction : ",idRequête:e});const o={type:"suivre",idRequête:e,fonction:r,args:a,nomArgFonction:i},l={idRequête:e,fSuivre:s,fRetour:async(d,g)=>{const p={type:"retour",idRequête:e,fonction:d,args:g};this.envoyerMessageÀIpa(p)}};this.tâches[e]=l;const u=async()=>{await this.oublierTâche(e)},f=Tne(this.événementsInternes,e);this.envoyerMessageÀIpa(o);const h=await f;if(h.type==="erreur"&&this.erreur({erreur:h.erreur,idRequête:e,code:h.codeErreur||yg}),h.type==="suivrePrêt"){const{fonctions:d}=h;if(d&&d[0]){const g={fOublier:u};for(const p of d)g[p]=async(...m)=>{await this.tâches[e]?.fRetour(p,m)};return g}}return u}async appelerFonctionAction(e,r,n){const i={type:"action",idRequête:e,fonction:r,args:n},s=Tne(this.événementsInternes,e);this.envoyerMessageÀIpa(i);const a=await s;if(a.type==="action")return a.résultat;throw a.type==="erreur"?this.erreur({erreur:a.erreur,idRequête:e,code:a.codeErreur||yg}):this.erreur({erreur:`Type de retour ${a} non reconnu.`,idRequête:e,code:yg}),new Error("On ne devrait jamais arriver ici.")}erreur({erreur:e,code:r,idRequête:n}){throw this.dernièreErreur?.code!==Jw&&this.dernièreErreur?.code!==rM&&(this.dernièreErreur={erreur:e,idRequête:n,code:r}),this.événements.emit("erreur",{idRequête:n,...this.dernièreErreur}),new Error(JSON.stringify({idRequête:n,...this.dernièreErreur}))}async oublierTâche(e){const r=this.tâches[e];r&&await r.fRetour("fOublier"),delete this.tâches[e]}async recevoirMessageDIpa(e){const{type:r}=e;switch(r){case"suivre":{const{idRequête:n,données:i}=e;if(!this.tâches[n])return;const{fSuivre:s}=this.tâches[n];s(i);break}case"action":case"suivrePrêt":case"erreur":{if(e.type==="erreur"&&!e.idRequête){this.erreur({erreur:e.erreur,code:e.erreur||yg});break}this.événementsInternes.emit(e.idRequête,e);break}default:this.erreur({code:xEt,erreur:`Type inconnu ${r} du message ${e}.`,idRequête:e.idRequête})}}suivreErreurs({f:e}){return this.événements.on("erreur",e),e(this.dernièreErreur),async()=>{this.événements.off("erreur",e)}}}class Pj{listeAtributs;constructor(e){this.listeAtributs=e||[]}get(e,r){if(["suivreErreurs"].includes(r))return e[r].bind(e);{const i=[...this.listeAtributs,r],s=new Pj(i);return new Proxy(e,s)}}apply(e,r,n){return e.__call__(this.listeAtributs,n[0])}}const kEt=t=>{const e=new Pj;return new Proxy(t,e)};function He(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var o=t.length-1;o>=0;o--)(a=t[o])&&(s=(i<3?a(s):i>3?a(e,r,s):a(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s}function CEt(t){return t[Symbol.asyncIterator]!=null}function mv(t){if(CEt(t))return(async()=>{for await(const e of t)return e})();for(const e of t)return e}function IEt(t){return t[Symbol.asyncIterator]!=null}function Lye(t,e=1){return e=Number(e),IEt(t)?async function*(){let r=[];if(e<1&&(e=1),e!==Math.round(e))throw new Error("Batch size must be an integer");for await(const n of t)for(r.push(n);r.length>=e;)yield r.slice(0,e),r=r.slice(e);for(;r.length>0;)yield r.slice(0,e),r=r.slice(e)}():function*(){let r=[];if(e<1&&(e=1),e!==Math.round(e))throw new Error("Batch size must be an integer");for(const n of t)for(r.push(n);r.length>=e;)yield r.slice(0,e),r=r.slice(e);for(;r.length>0;)yield r.slice(0,e),r=r.slice(e)}()}async function*Fye(t,e=1){for await(const r of Lye(t,e)){const n=r.map(async i=>i().then(s=>({ok:!0,value:s}),s=>({ok:!1,err:s})));for(let i=0;i<n.length;i++){const s=await n[i];if(s.ok)yield s.value;else throw s.err}}}const $ye=Symbol.for("@achingbrain/uint8arraylist");function kne(t,e){if(e==null||e<0)throw new RangeError("index is out of bounds");let r=0;for(const n of t){const i=r+n.byteLength;if(e<i)return{buf:n,index:e-r};r=i}throw new RangeError("index is out of bounds")}function V5(t){return!!t?.[$ye]}class Pn{bufs;length;[$ye]=!0;constructor(...e){this.bufs=[],this.length=0,e.length>0&&this.appendAll(e)}*[Symbol.iterator](){yield*this.bufs}get byteLength(){return this.length}append(...e){this.appendAll(e)}appendAll(e){let r=0;for(const n of e)if(n instanceof Uint8Array)r+=n.byteLength,this.bufs.push(n);else if(V5(n))r+=n.byteLength,this.bufs.push(...n.bufs);else throw new Error("Could not append value, must be an Uint8Array or a Uint8ArrayList");this.length+=r}prepend(...e){this.prependAll(e)}prependAll(e){let r=0;for(const n of e.reverse())if(n instanceof Uint8Array)r+=n.byteLength,this.bufs.unshift(n);else if(V5(n))r+=n.byteLength,this.bufs.unshift(...n.bufs);else throw new Error("Could not prepend value, must be an Uint8Array or a Uint8ArrayList");this.length+=r}get(e){const r=kne(this.bufs,e);return r.buf[r.index]}set(e,r){const n=kne(this.bufs,e);n.buf[n.index]=r}write(e,r=0){if(e instanceof Uint8Array)for(let n=0;n<e.length;n++)this.set(r+n,e[n]);else if(V5(e))for(let n=0;n<e.length;n++)this.set(r+n,e.get(n));else throw new Error("Could not write value, must be an Uint8Array or a Uint8ArrayList")}consume(e){if(e=Math.trunc(e),!(Number.isNaN(e)||e<=0)){if(e===this.byteLength){this.bufs=[],this.length=0;return}for(;this.bufs.length>0;)if(e>=this.bufs[0].byteLength)e-=this.bufs[0].byteLength,this.length-=this.bufs[0].byteLength,this.bufs.shift();else{this.bufs[0]=this.bufs[0].subarray(e),this.length-=e;break}}}slice(e,r){const{bufs:n,length:i}=this._subList(e,r);return Yi(n,i)}subarray(e,r){const{bufs:n,length:i}=this._subList(e,r);return n.length===1?n[0]:Yi(n,i)}sublist(e,r){const{bufs:n,length:i}=this._subList(e,r),s=new Pn;return s.length=i,s.bufs=[...n],s}_subList(e,r){if(e=e??0,r=r??this.length,e<0&&(e=this.length+e),r<0&&(r=this.length+r),e<0||r>this.length)throw new RangeError("index is out of bounds");if(e===r)return{bufs:[],length:0};if(e===0&&r===this.length)return{bufs:this.bufs,length:this.length};const n=[];let i=0;for(let s=0;s<this.bufs.length;s++){const a=this.bufs[s],o=i,c=o+a.byteLength;if(i=c,e>=c)continue;const l=e>=o&&e<c,u=r>o&&r<=c;if(l&&u){if(e===o&&r===c){n.push(a);break}const f=e-o;n.push(a.subarray(f,f+(r-e)));break}if(l){if(e===0){n.push(a);continue}n.push(a.subarray(e-o));continue}if(u){if(r===c){n.push(a);break}n.push(a.subarray(0,r-o));break}n.push(a)}return{bufs:n,length:r-e}}indexOf(e,r=0){if(!V5(e)&&!(e instanceof Uint8Array))throw new TypeError('The "value" argument must be a Uint8ArrayList or Uint8Array');const n=e instanceof Uint8Array?e:e.subarray();if(r=Number(r??0),isNaN(r)&&(r=0),r<0&&(r=this.length+r),r<0&&(r=0),e.length===0)return r>this.length?this.length:r;const i=n.byteLength;if(i===0)throw new TypeError("search must be at least 1 byte long");const s=256,a=new Int32Array(s);for(let f=0;f<s;f++)a[f]=-1;for(let f=0;f<i;f++)a[n[f]]=f;const o=a,c=this.byteLength-n.byteLength,l=n.byteLength-1;let u;for(let f=r;f<=c;f+=u){u=0;for(let h=l;h>=0;h--){const d=this.get(f+h);if(n[h]!==d){u=Math.max(1,h-o[d]);break}}if(u===0)return f}return-1}getInt8(e){const r=this.subarray(e,e+1);return new DataView(r.buffer,r.byteOffset,r.byteLength).getInt8(0)}setInt8(e,r){const n=go(1);new DataView(n.buffer,n.byteOffset,n.byteLength).setInt8(0,r),this.write(n,e)}getInt16(e,r){const n=this.subarray(e,e+2);return new DataView(n.buffer,n.byteOffset,n.byteLength).getInt16(0,r)}setInt16(e,r,n){const i=li(2);new DataView(i.buffer,i.byteOffset,i.byteLength).setInt16(0,r,n),this.write(i,e)}getInt32(e,r){const n=this.subarray(e,e+4);return new DataView(n.buffer,n.byteOffset,n.byteLength).getInt32(0,r)}setInt32(e,r,n){const i=li(4);new DataView(i.buffer,i.byteOffset,i.byteLength).setInt32(0,r,n),this.write(i,e)}getBigInt64(e,r){const n=this.subarray(e,e+8);return new DataView(n.buffer,n.byteOffset,n.byteLength).getBigInt64(0,r)}setBigInt64(e,r,n){const i=li(8);new DataView(i.buffer,i.byteOffset,i.byteLength).setBigInt64(0,r,n),this.write(i,e)}getUint8(e){const r=this.subarray(e,e+1);return new DataView(r.buffer,r.byteOffset,r.byteLength).getUint8(0)}setUint8(e,r){const n=go(1);new DataView(n.buffer,n.byteOffset,n.byteLength).setUint8(0,r),this.write(n,e)}getUint16(e,r){const n=this.subarray(e,e+2);return new DataView(n.buffer,n.byteOffset,n.byteLength).getUint16(0,r)}setUint16(e,r,n){const i=li(2);new DataView(i.buffer,i.byteOffset,i.byteLength).setUint16(0,r,n),this.write(i,e)}getUint32(e,r){const n=this.subarray(e,e+4);return new DataView(n.buffer,n.byteOffset,n.byteLength).getUint32(0,r)}setUint32(e,r,n){const i=li(4);new DataView(i.buffer,i.byteOffset,i.byteLength).setUint32(0,r,n),this.write(i,e)}getBigUint64(e,r){const n=this.subarray(e,e+8);return new DataView(n.buffer,n.byteOffset,n.byteLength).getBigUint64(0,r)}setBigUint64(e,r,n){const i=li(8);new DataView(i.buffer,i.byteOffset,i.byteLength).setBigUint64(0,r,n),this.write(i,e)}getFloat32(e,r){const n=this.subarray(e,e+4);return new DataView(n.buffer,n.byteOffset,n.byteLength).getFloat32(0,r)}setFloat32(e,r,n){const i=li(4);new DataView(i.buffer,i.byteOffset,i.byteLength).setFloat32(0,r,n),this.write(i,e)}getFloat64(e,r){const n=this.subarray(e,e+8);return new DataView(n.buffer,n.byteOffset,n.byteLength).getFloat64(0,r)}setFloat64(e,r,n){const i=li(8);new DataView(i.buffer,i.byteOffset,i.byteLength).setFloat64(0,r,n),this.write(i,e)}equals(e){if(e==null||!(e instanceof Pn)||e.bufs.length!==this.bufs.length)return!1;for(let r=0;r<this.bufs.length;r++)if(!Kr(this.bufs[r],e.bufs[r]))return!1;return!0}static fromUint8Arrays(e,r){const n=new Pn;return n.bufs=e,r==null&&(r=e.reduce((i,s)=>i+s.byteLength,0)),n.length=r,n}}const REt=262144,Uye=(t={})=>{const e=t.chunkSize??REt;return async function*(n){let i=new Pn,s=0,a=!1;for await(const o of n)for(i.append(o),s+=o.length;s>=e;)if(yield i.slice(0,e),a=!0,e===i.length)i=new Pn,s=0;else{const c=new Pn;c.append(i.sublist(e)),i=c,s-=e}(!a||s>0)&&(yield i.subarray(0,s))}},PEt=new TextDecoder;function Bj(t,e){let r=0;for(let n=0;;n+=7){if(n>=64)throw new Error("protobuf: varint overflow");if(e>=t.length)throw new Error("protobuf: unexpected end of data");const i=t[e++];if(r+=n<28?(i&127)<<n:(i&127)*2**n,i<128)break}return[r,e]}function ZE(t,e){let r;[r,e]=Bj(t,e);const n=e+r;if(r<0||n<0)throw new Error("protobuf: invalid length");if(n>t.length)throw new Error("protobuf: unexpected end of data");return[t.subarray(e,n),n]}function Vye(t,e){let r;return[r,e]=Bj(t,e),[r&7,r>>3,e]}function BEt(t){const e={},r=t.length;let n=0;for(;n<r;){let i,s;if([i,s,n]=Vye(t,n),s===1){if(e.Hash)throw new Error("protobuf: (PBLink) duplicate Hash section");if(i!==2)throw new Error(`protobuf: (PBLink) wrong wireType (${i}) for Hash`);if(e.Name!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Name before Hash");if(e.Tsize!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Hash");[e.Hash,n]=ZE(t,n)}else if(s===2){if(e.Name!==void 0)throw new Error("protobuf: (PBLink) duplicate Name section");if(i!==2)throw new Error(`protobuf: (PBLink) wrong wireType (${i}) for Name`);if(e.Tsize!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Name");let a;[a,n]=ZE(t,n),e.Name=PEt.decode(a)}else if(s===3){if(e.Tsize!==void 0)throw new Error("protobuf: (PBLink) duplicate Tsize section");if(i!==0)throw new Error(`protobuf: (PBLink) wrong wireType (${i}) for Tsize`);[e.Tsize,n]=Bj(t,n)}else throw new Error(`protobuf: (PBLink) invalid fieldNumber, expected 1, 2 or 3, got ${s}`)}if(n>r)throw new Error("protobuf: (PBLink) unexpected end of data");return e}function DEt(t){const e=t.length;let r=0,n,i=!1,s;for(;r<e;){let o,c;if([o,c,r]=Vye(t,r),o!==2)throw new Error(`protobuf: (PBNode) invalid wireType, expected 2, got ${o}`);if(c===1){if(s)throw new Error("protobuf: (PBNode) duplicate Data section");[s,r]=ZE(t,r),n&&(i=!0)}else if(c===2){if(i)throw new Error("protobuf: (PBNode) duplicate Links section");n||(n=[]);let l;[l,r]=ZE(t,r),n.push(BEt(l))}else throw new Error(`protobuf: (PBNode) invalid fieldNumber, expected 1 or 2, got ${c}`)}if(r>e)throw new Error("protobuf: (PBNode) unexpected end of data");const a={};return s&&(a.Data=s),a.Links=n||[],a}const jye=new TextEncoder,Cne=2**32,OEt=2**31;function NEt(t,e){let r=e.length;if(typeof t.Tsize=="number"){if(t.Tsize<0)throw new Error("Tsize cannot be negative");if(!Number.isSafeInteger(t.Tsize))throw new Error("Tsize too large for encoding");r=M3(e,r,t.Tsize)-1,e[r]=24}if(typeof t.Name=="string"){const n=jye.encode(t.Name);r-=n.length,e.set(n,r),r=M3(e,r,n.length)-1,e[r]=18}return t.Hash&&(r-=t.Hash.length,e.set(t.Hash,r),r=M3(e,r,t.Hash.length)-1,e[r]=10),e.length-r}function MEt(t){const e=FEt(t),r=new Uint8Array(e);let n=e;if(t.Data&&(n-=t.Data.length,r.set(t.Data,n),n=M3(r,n,t.Data.length)-1,r[n]=10),t.Links)for(let i=t.Links.length-1;i>=0;i--){const s=NEt(t.Links[i],r.subarray(0,n));n-=s,n=M3(r,n,s)-1,r[n]=18}return r}function LEt(t){let e=0;if(t.Hash){const r=t.Hash.length;e+=1+r+Iy(r)}if(typeof t.Name=="string"){const r=jye.encode(t.Name).length;e+=1+r+Iy(r)}return typeof t.Tsize=="number"&&(e+=1+Iy(t.Tsize)),e}function FEt(t){let e=0;if(t.Data){const r=t.Data.length;e+=1+r+Iy(r)}if(t.Links)for(const r of t.Links){const n=LEt(r);e+=1+n+Iy(n)}return e}function M3(t,e,r){e-=Iy(r);const n=e;for(;r>=OEt;)t[e++]=r&127|128,r/=128;for(;r>=128;)t[e++]=r&127|128,r>>>=7;return t[e]=r,n}function Iy(t){return t%2===0&&t++,Math.floor(($Et(t)+6)/7)}function $Et(t){let e=0;return t>=Cne&&(t=Math.floor(t/Cne),e=32),t>=65536&&(t>>>=16,e+=16),t>=256&&(t>>>=8,e+=8),e+UEt[t]}const UEt=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8],VEt=["Data","Links"],jEt=["Hash","Name","Tsize"],nM=new TextEncoder;function zye(t,e){if(t===e)return 0;const r=t.Name?nM.encode(t.Name):[],n=e.Name?nM.encode(e.Name):[];let i=r.length,s=n.length;for(let a=0,o=Math.min(i,s);a<o;++a)if(r[a]!==n[a]){i=r[a],s=n[a];break}return i<s?-1:s<i?1:0}function Ine(t,e){return!Object.keys(t).some(r=>!e.includes(r))}function qye(t){if(typeof t.asCID=="object"){const r=Dt.asCID(t);if(!r)throw new TypeError("Invalid DAG-PB form");return{Hash:r}}if(typeof t!="object"||Array.isArray(t))throw new TypeError("Invalid DAG-PB form");const e={};if(t.Hash){let r=Dt.asCID(t.Hash);try{r||(typeof t.Hash=="string"?r=Dt.parse(t.Hash):t.Hash instanceof Uint8Array&&(r=Dt.decode(t.Hash)))}catch(n){throw new TypeError(`Invalid DAG-PB form: ${n.message}`)}r&&(e.Hash=r)}if(!e.Hash)throw new TypeError("Invalid DAG-PB form");return typeof t.Name=="string"&&(e.Name=t.Name),typeof t.Tsize=="number"&&(e.Tsize=t.Tsize),e}function ol(t){if((t instanceof Uint8Array||typeof t=="string")&&(t={Data:t}),typeof t!="object"||Array.isArray(t))throw new TypeError("Invalid DAG-PB form");const e={};if(t.Data!==void 0)if(typeof t.Data=="string")e.Data=nM.encode(t.Data);else if(t.Data instanceof Uint8Array)e.Data=t.Data;else throw new TypeError("Invalid DAG-PB form");if(t.Links!==void 0)if(Array.isArray(t.Links))e.Links=t.Links.map(qye),e.Links.sort(zye);else throw new TypeError("Invalid DAG-PB form");else e.Links=[];return e}function Hye(t){if(!t||typeof t!="object"||Array.isArray(t)||t instanceof Uint8Array||t["/"]&&t["/"]===t.bytes)throw new TypeError("Invalid DAG-PB form");if(!Ine(t,VEt))throw new TypeError("Invalid DAG-PB form (extraneous properties)");if(t.Data!==void 0&&!(t.Data instanceof Uint8Array))throw new TypeError("Invalid DAG-PB form (Data must be bytes)");if(!Array.isArray(t.Links))throw new TypeError("Invalid DAG-PB form (Links must be a list)");for(let e=0;e<t.Links.length;e++){const r=t.Links[e];if(!r||typeof r!="object"||Array.isArray(r)||r instanceof Uint8Array||r["/"]&&r["/"]===r.bytes)throw new TypeError("Invalid DAG-PB form (bad link)");if(!Ine(r,jEt))throw new TypeError("Invalid DAG-PB form (extraneous properties on link)");if(r.Hash===void 0)throw new TypeError("Invalid DAG-PB form (link must have a Hash)");if(r.Hash==null||!r.Hash["/"]||r.Hash["/"]!==r.Hash.bytes)throw new TypeError("Invalid DAG-PB form (link Hash must be a CID)");if(r.Name!==void 0&&typeof r.Name!="string")throw new TypeError("Invalid DAG-PB form (link Name must be a string)");if(r.Tsize!==void 0){if(typeof r.Tsize!="number"||r.Tsize%1!==0)throw new TypeError("Invalid DAG-PB form (link Tsize must be an integer)");if(r.Tsize<0)throw new TypeError("Invalid DAG-PB form (link Tsize cannot be negative)")}if(e>0&&zye(r,t.Links[e-1])===-1)throw new TypeError("Invalid DAG-PB form (links must be sorted by Name bytes)")}}function zEt(t,e=[]){return ol({Data:t,Links:e})}function qEt(t,e,r){return qye({Hash:r,Name:t,Tsize:e})}function HEt(t){return t instanceof ArrayBuffer?new Uint8Array(t,0,t.byteLength):t}const WEt="dag-pb",kh=112;function Ss(t){Hye(t);const e={};return t.Links&&(e.Links=t.Links.map(r=>{const n={};return r.Hash&&(n.Hash=r.Hash.bytes),r.Name!==void 0&&(n.Name=r.Name),r.Tsize!==void 0&&(n.Tsize=r.Tsize),n})),t.Data&&(e.Data=t.Data),MEt(e)}function eu(t){const e=HEt(t),r=DEt(e),n={};return r.Data&&(n.Data=r.Data),r.Links&&(n.Links=r.Links.map(i=>{const s={};try{s.Hash=Dt.decode(i.Hash)}catch{}if(!s.Hash)throw new Error("Invalid Hash field found in link, expected CID");return i.Name!==void 0&&(s.Name=i.Name),i.Tsize!==void 0&&(s.Tsize=i.Tsize),s})),n}const XA=Object.freeze(Object.defineProperty({__proto__:null,code:kh,createLink:qEt,createNode:zEt,decode:eu,encode:Ss,name:WEt,prepare:ol,validate:Hye},Symbol.toStringTag,{value:"Module"}));class L4 extends Error{static name="InvalidTypeError";static code="ERR_INVALID_TYPE";name=L4.name;code=L4.code;constructor(e="Invalid type"){super(e)}}var kf;(function(t){(function(n){n.Raw="Raw",n.Directory="Directory",n.File="File",n.Metadata="Metadata",n.Symlink="Symlink",n.HAMTShard="HAMTShard"})(t.DataType||(t.DataType={}));let e;(function(n){n[n.Raw=0]="Raw",n[n.Directory=1]="Directory",n[n.File=2]="File",n[n.Metadata=3]="Metadata",n[n.Symlink=4]="Symlink",n[n.HAMTShard=5]="HAMTShard"})(e||(e={})),function(n){n.codec=()=>Xo(e)}(t.DataType||(t.DataType={}));let r;t.codec=()=>(r==null&&(r=Xr((n,i,s={})=>{if(s.lengthDelimited!==!1&&i.fork(),n.Type!=null&&(i.uint32(8),t.DataType.codec().encode(n.Type,i)),n.Data!=null&&(i.uint32(18),i.bytes(n.Data)),n.filesize!=null&&(i.uint32(24),i.uint64(n.filesize)),n.blocksizes!=null)for(const a of n.blocksizes)i.uint32(32),i.uint64(a);n.hashType!=null&&(i.uint32(40),i.uint64(n.hashType)),n.fanout!=null&&(i.uint32(48),i.uint64(n.fanout)),n.mode!=null&&(i.uint32(56),i.uint32(n.mode)),n.mtime!=null&&(i.uint32(66),JE.codec().encode(n.mtime,i)),s.lengthDelimited!==!1&&i.ldelim()},(n,i)=>{const s={blocksizes:[]},a=i==null?n.len:n.pos+i;for(;n.pos<a;){const o=n.uint32();switch(o>>>3){case 1:s.Type=t.DataType.codec().decode(n);break;case 2:s.Data=n.bytes();break;case 3:s.filesize=n.uint64();break;case 4:s.blocksizes.push(n.uint64());break;case 5:s.hashType=n.uint64();break;case 6:s.fanout=n.uint64();break;case 7:s.mode=n.uint32();break;case 8:s.mtime=JE.codec().decode(n,n.uint32());break;default:n.skipType(o&7);break}}return s})),r),t.encode=n=>Yr(n,t.codec()),t.decode=n=>Gr(n,t.codec())})(kf||(kf={}));var JE;(function(t){let e;t.codec=()=>(e==null&&(e=Xr((r,n,i={})=>{i.lengthDelimited!==!1&&n.fork(),r.Seconds!=null&&(n.uint32(8),n.int64(r.Seconds)),r.FractionalNanoseconds!=null&&(n.uint32(21),n.fixed32(r.FractionalNanoseconds)),i.lengthDelimited!==!1&&n.ldelim()},(r,n)=>{const i={},s=n==null?r.len:r.pos+n;for(;r.pos<s;){const a=r.uint32();switch(a>>>3){case 1:i.Seconds=r.int64();break;case 2:i.FractionalNanoseconds=r.fixed32();break;default:r.skipType(a&7);break}}return i})),e),t.encode=r=>Yr(r,t.codec()),t.decode=r=>Gr(r,t.codec())})(JE||(JE={}));var Rne;(function(t){let e;t.codec=()=>(e==null&&(e=Xr((r,n,i={})=>{i.lengthDelimited!==!1&&n.fork(),r.MimeType!=null&&(n.uint32(10),n.string(r.MimeType)),i.lengthDelimited!==!1&&n.ldelim()},(r,n)=>{const i={},s=n==null?r.len:r.pos+n;for(;r.pos<s;){const a=r.uint32();switch(a>>>3){case 1:i.MimeType=r.string();break;default:r.skipType(a&7);break}}return i})),e),t.encode=r=>Yr(r,t.codec()),t.decode=r=>Gr(r,t.codec())})(Rne||(Rne={}));const Pne={Raw:"raw",Directory:"directory",File:"file",Metadata:"metadata",Symlink:"symlink",HAMTShard:"hamt-sharded-directory"},KEt=["directory","hamt-sharded-directory"],Bne=parseInt("0644",8),Dne=parseInt("0755",8);let kn=class Wye{static unmarshal(e){const r=kf.decode(e),n=new Wye({type:Pne[r.Type!=null?r.Type.toString():"File"],data:r.Data,blockSizes:r.blocksizes,mode:r.mode,mtime:r.mtime!=null?{secs:r.mtime.Seconds??0n,nsecs:r.mtime.FractionalNanoseconds}:void 0,fanout:r.fanout});return n._originalMode=r.mode??0,n}type;data;blockSizes;hashType;fanout;mtime;_mode;_originalMode;constructor(e={type:"file"}){const{type:r,data:n,blockSizes:i,hashType:s,fanout:a,mtime:o,mode:c}=e;if(r!=null&&!Object.values(Pne).includes(r))throw new L4("Type: "+r+" is not valid");this.type=r??"file",this.data=n,this.hashType=s,this.fanout=a,this.blockSizes=i??[],this._originalMode=0,this.mode=c,this.mtime=o}set mode(e){e==null?this._mode=this.isDirectory()?Dne:Bne:this._mode=e&4095}get mode(){return this._mode}isDirectory(){return KEt.includes(this.type)}addBlockSize(e){this.blockSizes.push(e)}removeBlockSize(e){this.blockSizes.splice(e,1)}fileSize(){if(this.isDirectory())return 0n;let e=0n;return this.blockSizes.forEach(r=>{e+=r}),this.data!=null&&(e+=BigInt(this.data.length)),e}marshal(){let e;switch(this.type){case"raw":e=kf.DataType.Raw;break;case"directory":e=kf.DataType.Directory;break;case"file":e=kf.DataType.File;break;case"metadata":e=kf.DataType.Metadata;break;case"symlink":e=kf.DataType.Symlink;break;case"hamt-sharded-directory":e=kf.DataType.HAMTShard;break;default:throw new L4(`Type: ${e} is not valid`)}let r=this.data;(this.data==null||this.data.length===0)&&(r=void 0);let n;this.mode!=null&&(n=this._originalMode&4294963200|(this.mode??0),n===Bne&&!this.isDirectory()&&(n=void 0),n===Dne&&this.isDirectory()&&(n=void 0));let i;return this.mtime!=null&&(i={Seconds:this.mtime.secs,FractionalNanoseconds:this.mtime.nsecs}),kf.encode({Type:e,Data:r,filesize:this.isDirectory()?void 0:this.fileSize(),blocksizes:this.blockSizes,hashType:this.hashType,fanout:this.fanout,mode:n,mtime:i})}};class Bt extends Event{type;detail;constructor(e,r){super(e),this.type=e,this.detail=r}}const yv=async(t,e,r)=>{r.codec==null&&(r.codec=XA);const n=await wn.digest(t),i=Dt.create(r.cidVersion,r.codec.code,n);return await e.put(i,t,r),i};function GEt(t){return async function*(r,n){let i=0n;for await(let s of r.content)yield async()=>{let a;const o={codec:XA,cidVersion:t.cidVersion,onProgress:t.onProgress};t.rawLeaves?(o.codec=hat,o.cidVersion=1):(a=new kn({type:t.leafType,data:s}),s=Ss({Data:a.marshal(),Links:[]}));const c=await yv(s,n,o);return i+=BigInt(s.byteLength),t.onProgress?.(new Bt("unixfs:importer:progress:file:write",{bytesWritten:i,cid:c,path:r.path})),{cid:c,unixfs:a,size:BigInt(s.length),block:s}}}}let Kye=class iM extends Error{static name="InvalidParametersError";static code="ERR_INVALID_PARAMS";name=iM.name;code=iM.code;constructor(e="Invalid parameters"){super(e)}};class ym extends Error{static name="InvalidContentError";static code="ERR_INVALID_CONTENT";name=ym.name;code=ym.code;constructor(e="Invalid content"){super(e)}}const YEt=async(t,e,r)=>{const n=new kn({type:"directory",mtime:t.mtime,mode:t.mode}),i=Ss(ol({Data:n.marshal()})),s=await yv(i,e,r),a=t.path;return{cid:s,path:a,unixfs:n,size:BigInt(i.length),originalPath:t.originalPath,block:i}};async function*XEt(t,e,r){let n=-1,i;for await(const s of Fye(r.bufferImporter(t,e),r.blockWriteConcurrency)){if(n++,n===0){i={...s,single:!0};continue}else n===1&&i!=null&&(yield{...i,block:void 0,single:void 0},i=void 0);yield{...s,block:void 0}}i!=null&&(yield i)}function One(t){return t.single===!0}const ZEt=(t,e,r)=>async function(i){if(i.length===1&&One(i[0])&&r.reduceSingleLeafToSelf){const u=i[0];let f=u.block;return One(u)&&(t.mtime!==void 0||t.mode!==void 0)&&(u.unixfs=new kn({type:"file",mtime:t.mtime,mode:t.mode,data:u.block}),f={Data:u.unixfs.marshal(),Links:[]},u.block=Ss(ol(f)),u.cid=await yv(u.block,e,{...r,cidVersion:r.cidVersion}),u.size=BigInt(u.block.length)),r.onProgress?.(new Bt("unixfs:importer:progress:file:layout",{cid:u.cid,path:u.originalPath})),{cid:u.cid,path:t.path,unixfs:u.unixfs,size:u.size,originalPath:u.originalPath}}const s=new kn({type:"file",mtime:t.mtime,mode:t.mode}),a=i.filter(u=>u.cid.code===Wu&&u.size>0||u.unixfs!=null&&u.unixfs.data==null&&u.unixfs.fileSize()>0n?!0:!!u.unixfs?.data?.length).map(u=>u.cid.code===Wu?(s.addBlockSize(u.size),{Name:"",Tsize:Number(u.size),Hash:u.cid}):(u.unixfs?.data==null?s.addBlockSize(u.unixfs?.fileSize()??0n):s.addBlockSize(BigInt(u.unixfs.data.length)),{Name:"",Tsize:Number(u.size),Hash:u.cid})),o={Data:s.marshal(),Links:a},c=Ss(ol(o)),l=await yv(c,e,r);return r.onProgress?.(new Bt("unixfs:importer:progress:file:layout",{cid:l,path:t.originalPath})),{cid:l,path:t.path,unixfs:s,size:BigInt(c.length+o.Links.reduce((u,f)=>u+(f.Tsize??0),0)),originalPath:t.originalPath,block:c}},JEt=async(t,e,r)=>r.layout(XEt(t,e,r),ZEt(t,e,r));function QEt(t){return Symbol.iterator in t}function e9t(t){return Symbol.asyncIterator in t}function t9t(t){try{if(t instanceof Uint8Array)return async function*(){yield t}();if(QEt(t))return async function*(){yield*t}();if(e9t(t))return t}catch{throw new ym("Content was invalid")}throw new ym("Content was invalid")}function r9t(t){return async function*(r,n){for await(const i of r){let s;if(i.path!=null&&(s=i.path,i.path=i.path.split("/").filter(a=>a!=null&&a!==".").join("/")),n9t(i)){const a={path:i.path,mtime:i.mtime,mode:i.mode,content:async function*(){let o=0n;for await(const c of t.chunker(t.chunkValidator(t9t(i.content)))){const l=BigInt(c.byteLength);o+=l,t.onProgress?.(new Bt("unixfs:importer:progress:file:read",{bytesRead:o,chunkSize:l,path:i.path})),yield c}}(),originalPath:s};yield async()=>JEt(a,n,t)}else if(i.path!=null){const a={path:i.path,mtime:i.mtime,mode:i.mode,originalPath:s};yield async()=>YEt(a,n,t)}else throw new Error("Import candidate must have content or path or both")}}}function n9t(t){return t.content!=null}const i9t=()=>async function*(e){for await(const r of e){if(r.length===void 0)throw new ym("Content was invalid");if(typeof r=="string"||r instanceof String)yield pt(r.toString());else if(Array.isArray(r))yield Uint8Array.from(r);else if(r instanceof Uint8Array)yield r;else throw new ym("Content was invalid")}},s9t=174;function Gye(t){const e=t?.maxChildrenPerNode??s9t;return async function r(n,i){const s=[];for await(const a of Lye(n,e))s.push(await i(a));return s.length>1?r(s,i):s[0]}}function a9t(t){return t[Symbol.asyncIterator]!=null}function QE(t){if(a9t(t))return(async()=>{const r=[];for await(const n of t)r.push(n);return r})();const e=[];for(const r of t)e.push(r);return e}let F4=class{options;root;dir;path;dirty;flat;parent;parentKey;unixfs;mode;mtime;cid;size;nodeSize;constructor(e,r){this.options=r??{},this.root=e.root,this.dir=e.dir,this.path=e.path,this.dirty=e.dirty,this.flat=e.flat,this.parent=e.parent,this.parentKey=e.parentKey,this.unixfs=e.unixfs,this.mode=e.mode,this.mtime=e.mtime}};const sM=Dt.parse("QmUNLLsPACCz1vLxQVkXqqLX5R1X345qqfHbsf67hvA3Nn"),aM=Dt.parse("zdj7WbTaiJT1fgatdet9Ei9iDB5hdCxkbVyhyh8YTUnXMiwYi");class Dj extends F4{_children;constructor(e,r){super(e,r),this._children=new Map}async put(e,r){this.cid=void 0,this.size=void 0,this.nodeSize=void 0,this._children.set(e,r)}async get(e){return Promise.resolve(this._children.get(e))}childCount(){return this._children.size}directChildrenCount(){return this.childCount()}onlyChild(){return this._children.values().next().value}async*eachChildSeries(){for(const[e,r]of this._children.entries())yield{key:e,child:r}}estimateNodeSize(){if(this.nodeSize!==void 0)return this.nodeSize;this.nodeSize=0;for(const[e,r]of this._children.entries())r.size!=null&&r.cid!=null&&(this.nodeSize+=e.length+(this.options.cidVersion===1?aM.bytes.byteLength:sM.bytes.byteLength));return this.nodeSize}async*flush(e){const r=[];for(const[c,l]of this._children.entries()){let u=l;if(l instanceof F4)for await(const f of l.flush(e))u=f,yield f;u.size!=null&&u.cid!=null&&r.push({Name:c,Tsize:Number(u.size),Hash:u.cid})}const n=new kn({type:"directory",mtime:this.mtime,mode:this.mode}),i={Data:n.marshal(),Links:r},s=Ss(ol(i)),a=await yv(s,e,this.options),o=s.length+i.Links.reduce((c,l)=>c+(l.Tsize??0),0);this.cid=a,this.size=o,yield{cid:a,unixfs:n,path:this.path,size:BigInt(o)}}}var oM={exports:{}};(function(t,e){(function(r,n){var i={version:"3.0.0",x86:{},x64:{},inputValidation:!0};function s(p){if(!Array.isArray(p)&&!ArrayBuffer.isView(p))return!1;for(var m=0;m<p.length;m++)if(!Number.isInteger(p[m])||p[m]<0||p[m]>255)return!1;return!0}function a(p,m){return(p&65535)*m+(((p>>>16)*m&65535)<<16)}function o(p,m){return p<<m|p>>>32-m}function c(p){return p^=p>>>16,p=a(p,2246822507),p^=p>>>13,p=a(p,3266489909),p^=p>>>16,p}function l(p,m){p=[p[0]>>>16,p[0]&65535,p[1]>>>16,p[1]&65535],m=[m[0]>>>16,m[0]&65535,m[1]>>>16,m[1]&65535];var y=[0,0,0,0];return y[3]+=p[3]+m[3],y[2]+=y[3]>>>16,y[3]&=65535,y[2]+=p[2]+m[2],y[1]+=y[2]>>>16,y[2]&=65535,y[1]+=p[1]+m[1],y[0]+=y[1]>>>16,y[1]&=65535,y[0]+=p[0]+m[0],y[0]&=65535,[y[0]<<16|y[1],y[2]<<16|y[3]]}function u(p,m){p=[p[0]>>>16,p[0]&65535,p[1]>>>16,p[1]&65535],m=[m[0]>>>16,m[0]&65535,m[1]>>>16,m[1]&65535];var y=[0,0,0,0];return y[3]+=p[3]*m[3],y[2]+=y[3]>>>16,y[3]&=65535,y[2]+=p[2]*m[3],y[1]+=y[2]>>>16,y[2]&=65535,y[2]+=p[3]*m[2],y[1]+=y[2]>>>16,y[2]&=65535,y[1]+=p[1]*m[3],y[0]+=y[1]>>>16,y[1]&=65535,y[1]+=p[2]*m[2],y[0]+=y[1]>>>16,y[1]&=65535,y[1]+=p[3]*m[1],y[0]+=y[1]>>>16,y[1]&=65535,y[0]+=p[0]*m[3]+p[1]*m[2]+p[2]*m[1]+p[3]*m[0],y[0]&=65535,[y[0]<<16|y[1],y[2]<<16|y[3]]}function f(p,m){return m%=64,m===32?[p[1],p[0]]:m<32?[p[0]<<m|p[1]>>>32-m,p[1]<<m|p[0]>>>32-m]:(m-=32,[p[1]<<m|p[0]>>>32-m,p[0]<<m|p[1]>>>32-m])}function h(p,m){return m%=64,m===0?p:m<32?[p[0]<<m|p[1]>>>32-m,p[1]<<m]:[p[1]<<m-32,0]}function d(p,m){return[p[0]^m[0],p[1]^m[1]]}function g(p){return p=d(p,[0,p[0]>>>1]),p=u(p,[4283543511,3981806797]),p=d(p,[0,p[0]>>>1]),p=u(p,[3301882366,444984403]),p=d(p,[0,p[0]>>>1]),p}i.x86.hash32=function(p,m){if(i.inputValidation&&!s(p))return n;m=m||0;for(var y=p.length%4,v=p.length-y,_=m,x=0,A=3432918353,C=461845907,R=0;R<v;R=R+4)x=p[R]|p[R+1]<<8|p[R+2]<<16|p[R+3]<<24,x=a(x,A),x=o(x,15),x=a(x,C),_^=x,_=o(_,13),_=a(_,5)+3864292196;switch(x=0,y){case 3:x^=p[R+2]<<16;case 2:x^=p[R+1]<<8;case 1:x^=p[R],x=a(x,A),x=o(x,15),x=a(x,C),_^=x}return _^=p.length,_=c(_),_>>>0},i.x86.hash128=function(p,m){if(i.inputValidation&&!s(p))return n;m=m||0;for(var y=p.length%16,v=p.length-y,_=m,x=m,A=m,C=m,R=0,M=0,N=0,Y=0,H=597399067,E=2869860233,k=951274213,w=2716044179,T=0;T<v;T=T+16)R=p[T]|p[T+1]<<8|p[T+2]<<16|p[T+3]<<24,M=p[T+4]|p[T+5]<<8|p[T+6]<<16|p[T+7]<<24,N=p[T+8]|p[T+9]<<8|p[T+10]<<16|p[T+11]<<24,Y=p[T+12]|p[T+13]<<8|p[T+14]<<16|p[T+15]<<24,R=a(R,H),R=o(R,15),R=a(R,E),_^=R,_=o(_,19),_+=x,_=a(_,5)+1444728091,M=a(M,E),M=o(M,16),M=a(M,k),x^=M,x=o(x,17),x+=A,x=a(x,5)+197830471,N=a(N,k),N=o(N,17),N=a(N,w),A^=N,A=o(A,15),A+=C,A=a(A,5)+2530024501,Y=a(Y,w),Y=o(Y,18),Y=a(Y,H),C^=Y,C=o(C,13),C+=_,C=a(C,5)+850148119;switch(R=0,M=0,N=0,Y=0,y){case 15:Y^=p[T+14]<<16;case 14:Y^=p[T+13]<<8;case 13:Y^=p[T+12],Y=a(Y,w),Y=o(Y,18),Y=a(Y,H),C^=Y;case 12:N^=p[T+11]<<24;case 11:N^=p[T+10]<<16;case 10:N^=p[T+9]<<8;case 9:N^=p[T+8],N=a(N,k),N=o(N,17),N=a(N,w),A^=N;case 8:M^=p[T+7]<<24;case 7:M^=p[T+6]<<16;case 6:M^=p[T+5]<<8;case 5:M^=p[T+4],M=a(M,E),M=o(M,16),M=a(M,k),x^=M;case 4:R^=p[T+3]<<24;case 3:R^=p[T+2]<<16;case 2:R^=p[T+1]<<8;case 1:R^=p[T],R=a(R,H),R=o(R,15),R=a(R,E),_^=R}return _^=p.length,x^=p.length,A^=p.length,C^=p.length,_+=x,_+=A,_+=C,x+=_,A+=_,C+=_,_=c(_),x=c(x),A=c(A),C=c(C),_+=x,_+=A,_+=C,x+=_,A+=_,C+=_,("00000000"+(_>>>0).toString(16)).slice(-8)+("00000000"+(x>>>0).toString(16)).slice(-8)+("00000000"+(A>>>0).toString(16)).slice(-8)+("00000000"+(C>>>0).toString(16)).slice(-8)},i.x64.hash128=function(p,m){if(i.inputValidation&&!s(p))return n;m=m||0;for(var y=p.length%16,v=p.length-y,_=[0,m],x=[0,m],A=[0,0],C=[0,0],R=[2277735313,289559509],M=[1291169091,658871167],N=0;N<v;N=N+16)A=[p[N+4]|p[N+5]<<8|p[N+6]<<16|p[N+7]<<24,p[N]|p[N+1]<<8|p[N+2]<<16|p[N+3]<<24],C=[p[N+12]|p[N+13]<<8|p[N+14]<<16|p[N+15]<<24,p[N+8]|p[N+9]<<8|p[N+10]<<16|p[N+11]<<24],A=u(A,R),A=f(A,31),A=u(A,M),_=d(_,A),_=f(_,27),_=l(_,x),_=l(u(_,[0,5]),[0,1390208809]),C=u(C,M),C=f(C,33),C=u(C,R),x=d(x,C),x=f(x,31),x=l(x,_),x=l(u(x,[0,5]),[0,944331445]);switch(A=[0,0],C=[0,0],y){case 15:C=d(C,h([0,p[N+14]],48));case 14:C=d(C,h([0,p[N+13]],40));case 13:C=d(C,h([0,p[N+12]],32));case 12:C=d(C,h([0,p[N+11]],24));case 11:C=d(C,h([0,p[N+10]],16));case 10:C=d(C,h([0,p[N+9]],8));case 9:C=d(C,[0,p[N+8]]),C=u(C,M),C=f(C,33),C=u(C,R),x=d(x,C);case 8:A=d(A,h([0,p[N+7]],56));case 7:A=d(A,h([0,p[N+6]],48));case 6:A=d(A,h([0,p[N+5]],40));case 5:A=d(A,h([0,p[N+4]],32));case 4:A=d(A,h([0,p[N+3]],24));case 3:A=d(A,h([0,p[N+2]],16));case 2:A=d(A,h([0,p[N+1]],8));case 1:A=d(A,[0,p[N]]),A=u(A,R),A=f(A,31),A=u(A,M),_=d(_,A)}return _=d(_,[0,p.length]),x=d(x,[0,p.length]),_=l(_,x),x=l(x,_),_=g(_),x=g(x),_=l(_,x),x=l(x,_),("00000000"+(_[0]>>>0).toString(16)).slice(-8)+("00000000"+(_[1]>>>0).toString(16)).slice(-8)+("00000000"+(x[0]>>>0).toString(16)).slice(-8)+("00000000"+(x[1]>>>0).toString(16)).slice(-8)},t.exports&&(e=t.exports=i),e.murmurHash3=i})()})(oM,oM.exports);var o9t=oM.exports,c9t=o9t;const $4=si(c9t),ZA=iU({name:"murmur3-128",code:34,encode:t=>ent($4.x64.hash128(t))}),j5=7;var l9t=class{constructor(){this._bitArrays=[],this._data=[],this._length=0,this._changedLength=!1,this._changedData=!1}set(e,r){let n=this._internalPositionFor(e,!1);if(r===void 0)n!==-1&&(this._unsetInternalPos(n),this._unsetBit(e),this._changedLength=!0,this._changedData=!0);else{let i=!1;n===-1?(n=this._data.length,this._setBit(e),this._changedData=!0):i=!0,this._setInternalPos(n,e,r,i),this._changedLength=!0}}unset(e){this.set(e,void 0)}get(e){this._sortData();const r=this._internalPositionFor(e,!0);if(r!==-1)return this._data[r][1]}push(e){return this.set(this.length,e),this.length}get length(){if(this._sortData(),this._changedLength){const e=this._data[this._data.length-1];this._length=e?e[0]+1:0,this._changedLength=!1}return this._length}forEach(e){let r=0;for(;r<this.length;)e(this.get(r),r,this),r++}map(e){let r=0,n=new Array(this.length);for(;r<this.length;)n[r]=e(this.get(r),r,this),r++;return n}reduce(e,r){let n=0,i=r;for(;n<this.length;){const s=this.get(n);i=e(i,s,n),n++}return i}find(e){let r=0,n,i;for(;r<this.length&&!n;)i=this.get(r),n=e(i),r++;return n?i:void 0}_internalPositionFor(e,r){const n=this._bytePosFor(e,r);if(n>=this._bitArrays.length)return-1;const i=this._bitArrays[n],s=e-n*j5;if(!((i&1<<s)>0))return-1;const o=this._bitArrays.slice(0,n).reduce(u9t,0),c=~(4294967295<<s+1),l=Yye(i&c);return o+l-1}_bytePosFor(e,r){const n=Math.floor(e/j5),i=n+1;for(;!r&&this._bitArrays.length<i;)this._bitArrays.push(0);return n}_setBit(e){const r=this._bytePosFor(e,!1);this._bitArrays[r]|=1<<e-r*j5}_unsetBit(e){const r=this._bytePosFor(e,!1);this._bitArrays[r]&=~(1<<e-r*j5)}_setInternalPos(e,r,n,i){const s=this._data,a=[r,n];if(i)this._sortData(),s[e]=a;else{if(s.length)if(s[s.length-1][0]>=r)s.push(a);else if(s[0][0]<=r)s.unshift(a);else{const o=Math.round(s.length/2);this._data=s.slice(0,o).concat(a).concat(s.slice(o))}else this._data.push(a);this._changedData=!0,this._changedLength=!0}}_unsetInternalPos(e){this._data.splice(e,1)}_sortData(){this._changedData&&this._data.sort(f9t),this._changedData=!1}bitField(){const e=[];let r=8,n=0,i=0,s;const a=this._bitArrays.slice();for(;a.length||n;){n===0&&(s=a.shift(),n=7);const c=Math.min(n,r),l=~(255<<c),u=s&l;i|=u<<8-r,s=s>>>c,n-=c,r-=c,(!r||!n&&!a.length)&&(e.push(i),i=0,r=8)}for(var o=e.length-1;o>0&&e[o]===0;o--)e.pop();return e}compactArray(){return this._sortData(),this._data.map(h9t)}};function u9t(t,e){return t+Yye(e)}function Yye(t){let e=t;return e=e-(e>>1&1431655765),e=(e&858993459)+(e>>2&858993459),(e+(e>>4)&252645135)*16843009>>24}function f9t(t,e){return t[0]-e[0]}function h9t(t){return t[1]}const e9=si(l9t);let Qm=class Q0{_options;_popCount;_parent;_posAtParent;_children;key;constructor(e,r,n=0){this._options=e,this._popCount=0,this._parent=r,this._posAtParent=n,this._children=new e9,this.key=null}async put(e,r){const n=await this._findNewBucketAndPos(e);n.bucket._putAt(n,e,r)}async get(e){const r=await this._findChild(e);if(r!=null)return r.value}async del(e){const r=await this._findPlace(e),n=r.bucket._at(r.pos);n!=null&&n.key===e&&r.bucket._delAt(r.pos)}leafCount(){return this._children.compactArray().reduce((r,n)=>n instanceof Q0?r+n.leafCount():r+1,0)}childrenCount(){return this._children.length}onlyChild(){return this._children.get(0)}*eachLeafSeries(){const e=this._children.compactArray();for(const r of e)r instanceof Q0?yield*r.eachLeafSeries():yield r}serialize(e,r){const n=[];return r(this._children.reduce((i,s,a)=>(s!=null&&(s instanceof Q0?i.push(s.serialize(e,r)):i.push(e(s,a))),i),n))}async asyncTransform(e,r){return Xye(this,e,r)}toJSON(){return this.serialize(p9t,g9t)}prettyPrint(){return JSON.stringify(this.toJSON(),null,"  ")}tableSize(){return Math.pow(2,this._options.bits)}async _findChild(e){const r=await this._findPlace(e),n=r.bucket._at(r.pos);if(!(n instanceof Q0)&&n!=null&&n.key===e)return n}async _findPlace(e){const r=this._options.hash(typeof e=="string"?pt(e):e),n=await r.take(this._options.bits),i=this._children.get(n);return i instanceof Q0?i._findPlace(r):{bucket:this,pos:n,hash:r,existingChild:i}}async _findNewBucketAndPos(e){const r=await this._findPlace(e);if(r.existingChild!=null&&r.existingChild.key!==e){const n=new Q0(this._options,r.bucket,r.pos);r.bucket._putObjectAt(r.pos,n);const i=await n._findPlace(r.existingChild.hash);return i.bucket._putAt(i,r.existingChild.key,r.existingChild.value),n._findNewBucketAndPos(r.hash)}return r}_putAt(e,r,n){this._putObjectAt(e.pos,{key:r,value:n,hash:e.hash})}_putObjectAt(e,r){this._children.get(e)==null&&this._popCount++,this._children.set(e,r)}_delAt(e){if(e===-1)throw new Error("Invalid position");this._children.get(e)!=null&&this._popCount--,this._children.unset(e),this._level()}_level(){if(this._parent!=null&&this._popCount<=1)if(this._popCount===1){const e=this._children.find(d9t);if(e!=null&&!(e instanceof Q0)){const r=e.hash;r.untake(this._options.bits);const n={pos:this._posAtParent,hash:r,bucket:this._parent};this._parent._putAt(n,e.key,e.value)}}else this._parent._delAt(this._posAtParent)}_at(e){return this._children.get(e)}};function d9t(t){return!!t}function p9t(t,e){return t.key}function g9t(t){return t}async function Xye(t,e,r){const n=[];for(const i of t._children.compactArray())if(i instanceof Qm)await Xye(i,e,r);else{const s=await e(i);n.push({bitField:t._children.bitField(),children:s})}return r(n)}const m9t=[255,254,252,248,240,224,192,128],y9t=[1,3,7,15,31,63,127,255];let v9t=class{_value;_currentBytePos;_currentBitPos;constructor(e){this._value=e,this._currentBytePos=e.length-1,this._currentBitPos=7}availableBits(){return this._currentBitPos+1+this._currentBytePos*8}totalBits(){return this._value.length*8}take(e){let r=e,n=0;for(;r>0&&this._haveBits();){const i=this._value[this._currentBytePos],s=this._currentBitPos+1,a=Math.min(s,r),o=b9t(i,s-a,a);n=(n<<a)+o,r-=a,this._currentBitPos-=a,this._currentBitPos<0&&(this._currentBitPos=7,this._currentBytePos--)}return n}untake(e){for(this._currentBitPos+=e;this._currentBitPos>7;)this._currentBitPos-=8,this._currentBytePos+=1}_haveBits(){return this._currentBytePos>=0}};function b9t(t,e,r){const n=w9t(e,r);return(t&n)>>>e}function w9t(t,e){return m9t[t]&y9t[Math.min(e+t-1,7)]}function _9t(t){function e(r){return r instanceof Nne?r:new Nne(r,t)}return e}let Nne=class{_value;_hashFn;_depth;_availableBits;_currentBufferIndex;_buffers;constructor(e,r){if(!(e instanceof Uint8Array))throw new Error("can only hash Uint8Arrays");this._value=e,this._hashFn=r,this._depth=-1,this._availableBits=0,this._currentBufferIndex=0,this._buffers=[]}async take(e){let r=e;for(;this._availableBits<r;)await this._produceMoreBits();let n=0;for(;r>0;){const i=this._buffers[this._currentBufferIndex],s=Math.min(i.availableBits(),r),a=i.take(s);n=(n<<s)+a,r-=s,this._availableBits-=s,i.availableBits()===0&&this._currentBufferIndex++}return n}untake(e){let r=e;for(;r>0;){const n=this._buffers[this._currentBufferIndex],i=Math.min(n.totalBits()-n.availableBits(),r);n.untake(i),r-=i,this._availableBits+=i,this._currentBufferIndex>0&&n.totalBits()===n.availableBits()&&(this._depth--,this._currentBufferIndex--)}}async _produceMoreBits(){this._depth++;const e=this._depth>0?Yi([this._value,Uint8Array.from([this._depth])]):this._value,r=await this._hashFn(e),n=new v9t(r);this._buffers.push(n),this._availableBits+=n.availableBits()}};function Oj(t){if(t==null||t.hashFn==null)throw new Error("please define an options.hashFn");const e={bits:t.bits??8,hash:_9t(t.hashFn)};return new Qm(e)}async function x9t(t){return(await ZA.encode(t)).slice(0,8).reverse()}const Zye=BigInt(34),E9t=8;let S9t=class extends F4{_bucket;constructor(e,r){super(e,r),this._bucket=Oj({hashFn:x9t,bits:r.shardFanoutBits??E9t})}async put(e,r){this.cid=void 0,this.size=void 0,this.nodeSize=void 0,await this._bucket.put(e,r)}async get(e){return this._bucket.get(e)}childCount(){return this._bucket.leafCount()}directChildrenCount(){return this._bucket.childrenCount()}onlyChild(){return this._bucket.onlyChild()}async*eachChildSeries(){for await(const{key:e,value:r}of this._bucket.eachLeafSeries())yield{key:e,child:r}}estimateNodeSize(){return this.nodeSize!==void 0?this.nodeSize:(this.nodeSize=Qye(this._bucket,this,this.options),this.nodeSize)}async*flush(e){for await(const r of Jye(this._bucket,e,this,this.options))yield{...r,path:this.path}}};async function*Jye(t,e,r,n){const i=t._children,s=(t.tableSize()-1).toString(16).length,a=[];let o=0n;for(let g=0;g<i.length;g++){const p=i.get(g);if(p==null)continue;const m=g.toString(16).toUpperCase().padStart(s,"0");if(p instanceof Qm){let y;for await(const v of Jye(p,e,null,n))y=v;if(y==null)throw new Error("Could not flush sharded directory, no subshard found");a.push({Name:m,Tsize:Number(y.size),Hash:y.cid}),o+=y.size}else if(A9t(p.value)){const y=p.value;let v;for await(const x of y.flush(e))v=x,yield v;if(v==null)throw new Error("Did not flush dir");const _=m+p.key;a.push({Name:_,Tsize:Number(v.size),Hash:v.cid}),o+=v.size}else{const y=p.value;if(y.cid==null)continue;const v=m+p.key,_=y.size;a.push({Name:v,Tsize:Number(_),Hash:y.cid}),o+=BigInt(_??0)}}const c=Uint8Array.from(i.bitField().reverse()),l=new kn({type:"hamt-sharded-directory",data:c,fanout:BigInt(t.tableSize()),hashType:Zye,mtime:r?.mtime,mode:r?.mode}),u={Data:l.marshal(),Links:a},f=Ss(ol(u)),h=await yv(f,e,n),d=BigInt(f.byteLength)+o;yield{cid:h,unixfs:l,size:d}}function A9t(t){return typeof t.flush=="function"}function Qye(t,e,r){const n=t._children,i=(t.tableSize()-1).toString(16).length,s=[];for(let l=0;l<n.length;l++){const u=n.get(l);if(u==null)continue;const f=l.toString(16).toUpperCase().padStart(i,"0");if(u instanceof Qm){const h=Qye(u,null,r);s.push({Name:f,Tsize:Number(h),Hash:r.cidVersion===0?sM:aM})}else if(typeof u.value.flush=="function"){const d=u.value.nodeSize();s.push({Name:f+u.key,Tsize:Number(d),Hash:r.cidVersion===0?sM:aM})}else{const h=u.value;if(h.cid==null)continue;const d=f+u.key,g=h.size;s.push({Name:d,Tsize:Number(g),Hash:h.cid})}}const a=Uint8Array.from(n.bitField().reverse()),o=new kn({type:"hamt-sharded-directory",data:a,fanout:BigInt(t.tableSize()),hashType:Zye,mtime:e?.mtime,mode:e?.mode});return Ss(ol({Data:o.marshal(),Links:s})).length}async function eve(t,e,r,n){let i=e;e instanceof Dj&&e.estimateNodeSize()>r&&(i=await T9t(e,n));const s=i.parent;if(s!=null){if(i!==e){if(t!=null&&(t.parent=i),i.parentKey==null)throw new Error("No parent key found");await s.put(i.parentKey,i)}return eve(i,s,r,n)}return i}async function T9t(t,e){const r=new S9t({root:t.root,dir:!0,parent:t.parent,parentKey:t.parentKey,path:t.path,dirty:t.dirty,flat:!1,mtime:t.mtime,mode:t.mode},e);for await(const{key:n,child:i}of t.eachChildSeries())await r.put(n,i);return r}const k9t=(t="")=>t.split(/(?<!\\)\//).filter(Boolean);async function C9t(t,e,r){const n=k9t(t.path??""),i=n.length-1;let s=e,a="";for(let o=0;o<n.length;o++){const c=n[o];a+=`${a!==""?"/":""}${c}`;const l=o===i;if(s.dirty=!0,s.cid=void 0,s.size=void 0,l)await s.put(c,t),e=await eve(null,s,r.shardSplitThresholdBytes,r);else{let u=await s.get(c);(u==null||!(u instanceof F4))&&(u=new Dj({root:!1,dir:!0,parent:s,parentKey:c,path:a,dirty:!0,flat:!0,mtime:u?.unixfs?.mtime,mode:u?.unixfs?.mode},r)),await s.put(c,u),s=u}}return e}async function*Mne(t,e){if(!(t instanceof F4)){t.unixfs?.isDirectory()===!0&&(yield t);return}yield*t.flush(e)}function I9t(t){return async function*(r,n){let i=new Dj({root:!0,dir:!0,path:"",dirty:!0,flat:!0},t),s,a=!1;for await(const o of r){if(o==null)continue;const c=`${o.originalPath??""}`.split("/")[0];c!=null&&c!==""&&(s==null?(s=c,a=!0):s!==c&&(a=!1)),i=await C9t(o,i,t),o.unixfs?.isDirectory()!==!0&&(yield o)}if(t.wrapWithDirectory||a&&i.childCount()>1)yield*Mne(i,n);else for await(const o of i.eachChildSeries())o!=null&&(yield*Mne(o.child,n))}}async function*a8(t,e,r={}){let n;Symbol.asyncIterator in t||Symbol.iterator in t?n=t:n=[t];const i=r.wrapWithDirectory??!1,s=r.shardSplitThresholdBytes??262144,a=r.shardFanoutBits??8,o=r.cidVersion??1,c=r.rawLeaves??!0,l=r.leafType??"file",u=r.fileImportConcurrency??50,f=r.blockWriteConcurrency??10,h=r.reduceSingleLeafToSelf??!0,d=r.chunker??Uye(),g=r.chunkValidator??i9t(),p=r.dagBuilder??r9t({chunker:d,chunkValidator:g,wrapWithDirectory:i,layout:r.layout??Gye(),bufferImporter:r.bufferImporter??GEt({cidVersion:o,rawLeaves:c,leafType:l,onProgress:r.onProgress}),blockWriteConcurrency:f,reduceSingleLeafToSelf:h,cidVersion:o,onProgress:r.onProgress}),m=r.treeBuilder??I9t({wrapWithDirectory:i,shardSplitThresholdBytes:s,shardFanoutBits:a,cidVersion:o,onProgress:r.onProgress});for await(const y of m(Fye(p(n,e),u),e))yield{cid:y.cid,path:y.path,unixfs:y.unixfs,size:y.size}}async function Nj(t,e,r={}){const n=await mv(a8([t],e,r));if(n==null)throw new Kye("Nothing imported");return n}async function R9t(t,e,r={}){const n=await mv(a8([t],e,r));if(n==null)throw new Kye("Nothing imported");return n}async function P9t(t,e,r={}){return Nj({content:t},e,r)}async function B9t(t,e,r={}){return Nj({content:t},e,r)}const o8={cidVersion:1,rawLeaves:!0,layout:Gye({maxChildrenPerNode:1024}),chunker:Uye({chunkSize:1048576})};async function*D9t(t,e,r={}){yield*a8(t,e,{...o8,...r})}async function O9t(t,e,r={}){const{cid:n}=await P9t(t,e,{...o8,...r});return n}async function N9t(t,e,r={}){const{cid:n}=await B9t(t,e,{...o8,...r});return n}async function M9t(t,e,r={}){const{cid:n}=await Nj(t,e,{...o8,...r});return n}async function L9t(t,e,r={}){const{cid:n}=await R9t({...t,path:t.path??"-"},e,{...o8,...r});return n}function F9t(t){return t[Symbol.asyncIterator]!=null}function JA(t){if(F9t(t))return(async()=>{let r;for await(const n of t)r=n;return r})();let e;for(const r of t)e=r;return e}class t9 extends Error{static name="BadPathError";static code="ERR_BAD_PATH";name=t9.name;code=t9.code;constructor(e="Bad path"){super(e)}}let vv=class cM extends Error{static name="NotFoundError";static code="ERR_NOT_FOUND";name=cM.name;code=cM.code;constructor(e="Not found"){super(e)}};class r9 extends Error{static name="NoResolverError";static code="ERR_NO_RESOLVER";name=r9.name;code=r9.code;constructor(e="No resolver"){super(e)}}let Qc=class lM extends Error{static name="NotUnixFSError";static code="ERR_NOT_UNIXFS";name=lM.name;code=lM.code;constructor(e="Not UnixFS"){super(e)}};class n9 extends Error{static name="OverReadError";static code="ERR_OVER_READ";name=n9.name;code=n9.code;constructor(e="Over read"){super(e)}}class i9 extends Error{static name="UnderReadError";static code="ERR_UNDER_READ";name=i9.name;code=i9.code;constructor(e="Under read"){super(e)}}class s9 extends Error{static name="NoPropError";static code="ERR_NO_PROP";name=s9.name;code=s9.code;constructor(e="No Property found"){super(e)}}let z5=class uM extends Error{static name="InvalidParametersError";static code="ERR_INVALID_PARAMS";name=uM.name;code=uM.code;constructor(e="Invalid parameters"){super(e)}};class Ijt extends Array{constructor(){super(),this.inRecursive=[]}prefix(e){const r=this.inRecursive[this.inRecursive.length-1];r&&(r.type===ze.array&&(r.elements++,r.elements!==1&&e.push([44])),r.type===ze.map&&(r.elements++,r.elements!==1&&(r.elements%2===1?e.push([44]):e.push([58]))))}[ze.uint.major](e,r){this.prefix(e);const n=String(r.value),i=[];for(let s=0;s<n.length;s++)i[s]=n.charCodeAt(s);e.push(i)}[ze.negint.major](e,r){this[ze.uint.major](e,r)}[ze.bytes.major](e,r){throw new Error(`${hE} unsupported type: Uint8Array`)}[ze.string.major](e,r){this.prefix(e);const n=n0e(JSON.stringify(r.value));e.push(n.length>32?A$(n):n)}[ze.array.major](e,r){this.prefix(e),this.inRecursive.push({type:ze.array,elements:0}),e.push([91])}[ze.map.major](e,r){this.prefix(e),this.inRecursive.push({type:ze.map,elements:0}),e.push([123])}[ze.tag.major](e,r){}[ze.float.major](e,r){if(r.type.name==="break"){const a=this.inRecursive.pop();if(a){if(a.type===ze.array)e.push([93]);else if(a.type===ze.map)e.push([125]);else throw new Error("Unexpected recursive type; this should not happen!");return}throw new Error("Unexpected break; this should not happen!")}if(r.value===void 0)throw new Error(`${hE} unsupported type: undefined`);if(this.prefix(e),r.type.name==="true"){e.push([116,114,117,101]);return}else if(r.type.name==="false"){e.push([102,97,108,115,101]);return}else if(r.type.name==="null"){e.push([110,117,108,108]);return}const n=String(r.value),i=[];let s=!1;for(let a=0;a<n.length;a++)i[a]=n.charCodeAt(a),!s&&(i[a]===46||i[a]===101||i[a]===69)&&(s=!0);s||(i.push(46),i.push(48)),e.push(i)}}class Mj{constructor(e,r={}){this._pos=0,this.data=e,this.options=r,this.modeStack=["value"],this.lastToken=""}pos(){return this._pos}done(){return this._pos>=this.data.length}ch(){return this.data[this._pos]}currentMode(){return this.modeStack[this.modeStack.length-1]}skipWhitespace(){let e=this.ch();for(;e===32||e===9||e===13||e===10;)e=this.data[++this._pos]}expect(e){if(this.data.length-this._pos<e.length)throw new Error(`${Qt} unexpected end of input at position ${this._pos}`);for(let r=0;r<e.length;r++)if(this.data[this._pos++]!==e[r])throw new Error(`${Qt} unexpected token at position ${this._pos}, expected to find '${String.fromCharCode(...e)}'`)}parseNumber(){const e=this._pos;let r=!1,n=!1;const i=o=>{for(;!this.done();){const c=this.ch();if(o.includes(c))this._pos++;else break}};if(this.ch()===45&&(r=!0,this._pos++),this.ch()===48)if(this._pos++,this.ch()===46)this._pos++,n=!0;else return new kt(ze.uint,0,this._pos-e);if(i([48,49,50,51,52,53,54,55,56,57]),r&&this._pos===e+1)throw new Error(`${Qt} unexpected token at position ${this._pos}`);if(!this.done()&&this.ch()===46){if(n)throw new Error(`${Qt} unexpected token at position ${this._pos}`);n=!0,this._pos++,i([48,49,50,51,52,53,54,55,56,57])}!this.done()&&(this.ch()===101||this.ch()===69)&&(n=!0,this._pos++,!this.done()&&(this.ch()===43||this.ch()===45)&&this._pos++,i([48,49,50,51,52,53,54,55,56,57]));const s=String.fromCharCode.apply(null,this.data.subarray(e,this._pos)),a=parseFloat(s);return n?new kt(ze.float,a,this._pos-e):this.options.allowBigInt!==!0||Number.isSafeInteger(a)?new kt(a>=0?ze.uint:ze.negint,a,this._pos-e):new kt(a>=0?ze.uint:ze.negint,BigInt(s),this._pos-e)}parseString(){if(this.ch()!==34)throw new Error(`${Qt} unexpected character at position ${this._pos}; this shouldn't happen`);this._pos++;for(let s=this._pos,a=0;s<this.data.length&&a<65536;s++,a++){const o=this.data[s];if(o===92||o<32||o>=128)break;if(o===34){const c=String.fromCharCode.apply(null,this.data.subarray(this._pos,s));return this._pos=s+1,new kt(ze.string,c,a)}}const e=this._pos,r=[],n=()=>{if(this._pos+4>=this.data.length)throw new Error(`${Qt} unexpected end of unicode escape sequence at position ${this._pos}`);let s=0;for(let a=0;a<4;a++){let o=this.ch();if(o>=48&&o<=57)o-=48;else if(o>=97&&o<=102)o=o-97+10;else if(o>=65&&o<=70)o=o-65+10;else throw new Error(`${Qt} unexpected unicode escape character at position ${this._pos}`);s=s*16+o,this._pos++}return s},i=()=>{const s=this.ch();let a=null,o=s>239?4:s>223?3:s>191?2:1;if(this._pos+o>this.data.length)throw new Error(`${Qt} unexpected unicode sequence at position ${this._pos}`);let c,l,u,f;switch(o){case 1:s<128&&(a=s);break;case 2:c=this.data[this._pos+1],(c&192)===128&&(f=(s&31)<<6|c&63,f>127&&(a=f));break;case 3:c=this.data[this._pos+1],l=this.data[this._pos+2],(c&192)===128&&(l&192)===128&&(f=(s&15)<<12|(c&63)<<6|l&63,f>2047&&(f<55296||f>57343)&&(a=f));break;case 4:c=this.data[this._pos+1],l=this.data[this._pos+2],u=this.data[this._pos+3],(c&192)===128&&(l&192)===128&&(u&192)===128&&(f=(s&15)<<18|(c&63)<<12|(l&63)<<6|u&63,f>65535&&f<1114112&&(a=f))}a===null?(a=65533,o=1):a>65535&&(a-=65536,r.push(a>>>10&1023|55296),a=56320|a&1023),r.push(a),this._pos+=o};for(;!this.done();){const s=this.ch();let a;switch(s){case 92:if(this._pos++,this.done())throw new Error(`${Qt} unexpected string termination at position ${this._pos}`);switch(a=this.ch(),this._pos++,a){case 34:case 39:case 92:case 47:r.push(a);break;case 98:r.push(8);break;case 116:r.push(9);break;case 110:r.push(10);break;case 102:r.push(12);break;case 114:r.push(13);break;case 117:r.push(n());break;default:throw new Error(`${Qt} unexpected string escape character at position ${this._pos}`)}break;case 34:return this._pos++,new kt(ze.string,i0e(r),this._pos-e);default:if(s<32)throw new Error(`${Qt} invalid control character at position ${this._pos}`);s<128?(r.push(s),this._pos++):i()}}throw new Error(`${Qt} unexpected end of string at position ${this._pos}`)}parseValue(){switch(this.ch()){case 123:return this.modeStack.push("obj-start"),this._pos++,new kt(ze.map,1/0,1);case 91:return this.modeStack.push("array-start"),this._pos++,new kt(ze.array,1/0,1);case 34:return this.parseString();case 110:return this.expect([110,117,108,108]),new kt(ze.null,null,4);case 102:return this.expect([102,97,108,115,101]),new kt(ze.false,!1,5);case 116:return this.expect([116,114,117,101]),new kt(ze.true,!0,4);case 45:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.parseNumber();default:throw new Error(`${Qt} unexpected character at position ${this._pos}`)}}next(){switch(this.skipWhitespace(),this.currentMode()){case"value":return this.modeStack.pop(),this.parseValue();case"array-value":{if(this.modeStack.pop(),this.ch()===93)return this._pos++,this.skipWhitespace(),new kt(ze.break,void 0,1);if(this.ch()!==44)throw new Error(`${Qt} unexpected character at position ${this._pos}, was expecting array delimiter but found '${String.fromCharCode(this.ch())}'`);return this._pos++,this.modeStack.push("array-value"),this.skipWhitespace(),this.parseValue()}case"array-start":return this.modeStack.pop(),this.ch()===93?(this._pos++,this.skipWhitespace(),new kt(ze.break,void 0,1)):(this.modeStack.push("array-value"),this.skipWhitespace(),this.parseValue());case"obj-key":if(this.ch()===125)return this.modeStack.pop(),this._pos++,this.skipWhitespace(),new kt(ze.break,void 0,1);if(this.ch()!==44)throw new Error(`${Qt} unexpected character at position ${this._pos}, was expecting object delimiter but found '${String.fromCharCode(this.ch())}'`);this._pos++,this.skipWhitespace();case"obj-start":{if(this.modeStack.pop(),this.ch()===125)return this._pos++,this.skipWhitespace(),new kt(ze.break,void 0,1);const e=this.parseString();if(this.skipWhitespace(),this.ch()!==58)throw new Error(`${Qt} unexpected character at position ${this._pos}, was expecting key/value delimiter ':' but found '${String.fromCharCode(this.ch())}'`);return this._pos++,this.modeStack.push("obj-value"),e}case"obj-value":return this.modeStack.pop(),this.modeStack.push("obj-key"),this.skipWhitespace(),this.parseValue();default:throw new Error(`${Qt} unexpected parse state at position ${this._pos}; this shouldn't happen`)}}}function tve(t,e){return e=Object.assign({tokenizer:new Mj(t,e)},e),kg(t,e)}function $9t(t){return t instanceof ArrayBuffer?new Uint8Array(t,0,t.byteLength):t}let U9t=class extends Mj{constructor(e,r){super(e,r),this.tokenBuffer=[]}done(){return this.tokenBuffer.length===0&&super.done()}_next(){return this.tokenBuffer.length>0?this.tokenBuffer.pop():super.next()}next(){const e=this._next();if(e.type===ze.map){const r=this._next();if(r.type===ze.string&&r.value==="/"){const n=this._next();if(n.type===ze.string){if(this._next().type!==ze.break)throw new Error("Invalid encoded CID form");return this.tokenBuffer.push(n),new kt(ze.tag,42,0)}if(n.type===ze.map){const i=this._next();if(i.type===ze.string&&i.value==="bytes"){const s=this._next();if(s.type===ze.string){for(let o=0;o<2;o++)if(this._next().type!==ze.break)throw new Error("Invalid encoded Bytes form");const a=Sc.decode(`m${s.value}`);return new kt(ze.bytes,a,s.value.length)}this.tokenBuffer.push(s)}this.tokenBuffer.push(i)}this.tokenBuffer.push(n)}this.tokenBuffer.push(r)}return e}};const fM={allowIndefinite:!1,allowUndefined:!1,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,rejectDuplicateMapKeys:!0,tags:[]};fM.tags[42]=Dt.parse;const rve=297,V9t=t=>{const e=$9t(t),r=Object.assign(fM,{tokenizer:new U9t(e,fM)});return tve(e,r)};new TextDecoder;new TextEncoder;function Lj(t,e,r,n,i,s,a){let o=t,c=i;for(;s.length>0;){const l=s[0];if(l in o){s.shift(),c=`${c}/${l}`;const u=Dt.asCID(o[l]);if(u!=null)return{entry:{type:"object",name:n,path:i,cid:r,node:e,depth:a,size:BigInt(e.length),content:async function*(){yield t}},next:{cid:u,name:l,path:c,toResolve:s}};o=o[l]}else throw new s9(`No property named ${l} found in node ${r}`)}return{entry:{type:"object",name:n,path:i,cid:r,node:e,depth:a,size:BigInt(e.length),content:async function*(){yield t}}}}const j9t=async(t,e,r,n,i,s,a,o)=>{const c=await a.get(t,o),l=v0e(c);return Lj(l,c,t,e,r,n,s)},z9t=async(t,e,r,n,i,s,a,o)=>{const c=await a.get(t,o),l=V9t(c);return Lj(l,c,t,e,r,n,s)};function a9(t,e,r,n){const i=BigInt(t.length),s=BigInt(e+i);return r>=s||n<e?new Uint8Array(0):(n>=e&&n<s&&(t=t.subarray(0,Number(n-e))),r>=e&&r<s&&(t=t.subarray(Number(r-e))),t)}const Fj=(t,e=0,r=t)=>{const n=BigInt(t),i=BigInt(e??0);let s=BigInt(r);if(s!==n&&(s=i+s),s>n&&(s=n),i<0n)throw new z5("Offset must be greater than or equal to 0");if(i>n)throw new z5("Offset must be less than the file size");if(s<0n)throw new z5("Length must be greater than or equal to 0");if(s>n)throw new z5("Length must be less than the file size");return{start:i,end:s}},q9t=t=>{async function*e(r={}){const{start:n,end:i}=Fj(t.length,r.offset,r.length),s=a9(t,0n,n,i);r.onProgress?.(new Bt("unixfs:exporter:progress:identity",{bytesRead:BigInt(s.byteLength),totalBytes:i-n,fileSize:BigInt(t.byteLength)})),yield s}return e},H9t=async(t,e,r,n,i,s,a,o)=>{if(n.length>0)throw new vv(`No link named ${r} found in raw node ${t}`);const c=c0(t.multihash.bytes);return{entry:{type:"identity",name:e,path:r,cid:t,content:q9t(c.digest),depth:s,size:BigInt(c.digest.length),node:c.digest}}},W9t=async(t,e,r,n,i,s,a,o)=>{const c=await a.get(t,o),l=cat(c);return Lj(l,c,t,e,r,n,s)},K9t=t=>{async function*e(r={}){const{start:n,end:i}=Fj(t.length,r.offset,r.length),s=a9(t,0n,n,i);r.onProgress?.(new Bt("unixfs:exporter:progress:raw",{bytesRead:BigInt(s.byteLength),totalBytes:i-n,fileSize:BigInt(t.byteLength)})),yield s}return e},G9t=async(t,e,r,n,i,s,a,o)=>{if(n.length>0)throw new vv(`No link named ${r} found in raw node ${t}`);const c=await a.get(t,o);return{entry:{type:"raw",name:e,path:r,cid:t,content:K9t(c),depth:s,size:BigInt(c.length),node:c}}},Y9t=async function(t){return(await ZA.encode(t)).slice(0,8).reverse()},X9t=async(t,e,r)=>{const n=(e.tableSize()-1).toString(16).length;await Promise.all(t.map(async i=>{if(i.Name==null)throw new Error("Unexpected Link without a Name");if(i.Name.length===n){const s=parseInt(i.Name,16);e._putObjectAt(s,new Qm({hash:r._options.hash,bits:r._options.bits},e,s));return}await r.put(i.Name.substring(2),!0)}))},Lne=(t,e)=>t.toString(16).toUpperCase().padStart(e,"0").substring(0,e),Z9t=t=>{let e=t.bucket;const r=[];for(;e._parent!=null;)r.push(e),e=e._parent;return r.push(e),r.reverse()},nve=async(t,e,r,n,i)=>{if(n==null){if(t.Data==null)throw new Qc("no data in PBNode");let f;try{f=kn.unmarshal(t.Data)}catch(d){throw new Qc(d.message)}if(f.type!=="hamt-sharded-directory")throw new Qc("not a HAMT");if(f.fanout==null)throw new Qc("missing fanout");const h=Oj({hashFn:Y9t,bits:Math.log2(Number(f.fanout))});n={rootBucket:h,hamtDepth:1,lastBucket:h}}const s=(n.lastBucket.tableSize()-1).toString(16).length;await X9t(t.Links,n.lastBucket,n.rootBucket);const a=await n.rootBucket._findNewBucketAndPos(e);let o=Lne(a.pos,s);const c=Z9t(a);c.length>n.hamtDepth&&(n.lastBucket=c[n.hamtDepth],o=Lne(n.lastBucket._posAtParent,s));const l=t.Links.find(f=>{if(f.Name==null)return!1;const h=f.Name.substring(0,s),d=f.Name.substring(s);return!(h!==o||d!==""&&d!==e)});if(l==null)return;if(l.Name!=null&&l.Name.substring(s)===e)return l.Hash;n.hamtDepth++;const u=await r.get(l.Hash,i);return t=eu(u),nve(t,e,r,n,i)};function $j(t){const[e,r]=t[Symbol.asyncIterator]!=null?[t[Symbol.asyncIterator](),Symbol.asyncIterator]:[t[Symbol.iterator](),Symbol.iterator],n=[];return{peek:()=>e.next(),push:i=>{n.push(i)},next:()=>n.length>0?{done:!1,value:n.shift()}:e.next(),[r](){return this}}}function J9t(t){return t[Symbol.asyncIterator]!=null}function l1(t,e){let r=0;if(J9t(t))return async function*(){for await(const c of t)await e(c,r++)&&(yield c)}();const n=$j(t),{value:i,done:s}=n.next();if(s===!0)return function*(){}();const a=e(i,r++);if(typeof a.then=="function")return async function*(){await a&&(yield i);for await(const c of n)await e(c,r++)&&(yield c)}();const o=e;return function*(){a===!0&&(yield i);for(const c of n)o(c,r++)&&(yield c)}()}function Q9t(t){return t[Symbol.asyncIterator]!=null}function d0(t,e){let r=0;if(Q9t(t))return async function*(){for await(const c of t)yield e(c,r++)}();const n=$j(t),{value:i,done:s}=n.next();if(s===!0)return function*(){}();const a=e(i,r++);if(typeof a.then=="function")return async function*(){yield await a;for await(const c of n)yield e(c,r++)}();const o=e;return function*(){yield a;for(const c of n)yield o(c,r++)}()}const q5=globalThis.CustomEvent??Event;async function*dp(t,e={}){let r=e.concurrency??1/0;r<1&&(r=1/0);const n=e.ordered==null?!1:e.ordered,i=new EventTarget,s=[];let a=fn(),o=fn(),c=!1,l,u=!1;i.addEventListener("task-complete",()=>{o.resolve()}),Promise.resolve().then(async()=>{try{for await(const g of t){if(s.length===r&&(a=fn(),await a.promise),u)break;const p={done:!1};s.push(p),g().then(m=>{p.done=!0,p.ok=!0,p.value=m,i.dispatchEvent(new q5("task-complete"))},m=>{p.done=!0,p.err=m,i.dispatchEvent(new q5("task-complete"))})}c=!0,i.dispatchEvent(new q5("task-complete"))}catch(g){l=g,i.dispatchEvent(new q5("task-complete"))}});function f(){return n?s[0]?.done:!!s.find(g=>g.done)}function*h(){for(;s.length>0&&s[0].done;){const g=s[0];if(s.shift(),g.ok)yield g.value;else throw u=!0,a.resolve(),g.err;a.resolve()}}function*d(){for(;f();)for(let g=0;g<s.length;g++)if(s[g].done){const p=s[g];if(s.splice(g,1),g--,p.ok)yield p.value;else throw u=!0,a.resolve(),p.err;a.resolve()}}for(;;){if(f()||(o=fn(),await o.promise),l!=null)throw l;if(n?yield*h():yield*d(),c&&s.length===0)break}}const eSt=(t,e,r,n,i,s,a)=>{async function*o(c={}){const l=c.offset??0,u=c.length??e.Links.length,f=e.Links.slice(l,u);c.onProgress?.(new Bt("unixfs:exporter:walk:directory",{cid:t})),yield*is(f,h=>d0(h,d=>async()=>{const g=d.Name??"",p=`${n}/${g}`;return(await i(d.Hash,g,p,[],s+1,a,c)).entry}),h=>dp(h,{ordered:!0,concurrency:c.blockReadConcurrency}),h=>l1(h,d=>d!=null))}return o};async function ive(t,e,r,n,i,s,a){if(e instanceof Uint8Array){const l=a9(e,n,i,s);r.push(l);return}if(e.Data==null)throw new Qc("no data in PBNode");let o;try{o=kn.unmarshal(e.Data)}catch(l){throw new Qc(l.message)}if(o.data!=null){const l=o.data,u=a9(l,n,i,s);r.push(u),n+=BigInt(u.byteLength)}const c=[];if(e.Links.length!==o.blockSizes.length)throw new Qc("Inconsistent block sizes and dag links");for(let l=0;l<e.Links.length;l++){const u=e.Links[l],f=n,h=f+o.blockSizes[l];if((i>=f&&i<h||s>=f&&s<=h||i<f&&s>h)&&c.push({link:u,blockStart:n}),n=h,n>s)break}await is(c,l=>d0(l,u=>async()=>{const f=await t.get(u.link.Hash,a);return{...u,block:f}}),l=>dp(l,{ordered:!0,concurrency:a.blockReadConcurrency}),async l=>{for await(const{link:u,block:f,blockStart:h}of l){let d;switch(u.Hash.code){case kh:d=eu(f);break;case Wu:d=f;break;default:r.end(new Qc(`Unsupported codec: ${u.Hash.code}`));return}const g=new sh({concurrency:1});g.on("error",p=>{r.end(p)}),g.add(async()=>{a.onProgress?.(new Bt("unixfs:exporter:walk:file",{cid:u.Hash})),await ive(t,d,r,h,i,s,a)}),await g.onIdle()}}),n>=s&&r.end()}const Fne=(t,e,r,n,i,s,a)=>{async function*o(c={}){const l=r.fileSize();if(l===void 0)throw new Error("File was a directory");const{start:u,end:f}=Fj(l,c.offset,c.length);if(f===0n)return;let h=0n;const d=f-u,g=qu();c.onProgress?.(new Bt("unixfs:exporter:walk:file",{cid:t})),ive(a,e,g,0n,u,f,c).catch(p=>{g.end(p)});for await(const p of g)if(p!=null){if(h+=BigInt(p.byteLength),h>d)throw g.end(),new n9("Read too many bytes - the file size reported by the UnixFS data in the root node may be incorrect");h===d&&g.end(),c.onProgress?.(new Bt("unixfs:exporter:progress:unixfs:file",{bytesRead:h,totalBytes:d,fileSize:l})),yield p}if(h<d)throw new i9("Traversed entire DAG but did not read enough bytes")}return o},tSt=(t,e,r,n,i,s,a)=>{function o(c={}){return c.onProgress?.(new Bt("unixfs:exporter:walk:hamt-sharded-directory",{cid:t})),sve(e,n,i,s,a,c)}return o};async function*sve(t,e,r,n,i,s){const a=t.Links;if(t.Data==null)throw new Qc("no data in PBNode");let o;try{o=kn.unmarshal(t.Data)}catch(u){throw new Qc(u.message)}if(o.fanout==null)throw new Qc("missing fanout");const c=(o.fanout-1n).toString(16).length,l=is(a,u=>d0(u,f=>async()=>{const h=f.Name!=null?f.Name.substring(c):null;if(h!=null&&h!==""){const d=await r(f.Hash,h,`${e}/${h}`,[],n+1,i,s);return{entries:d.entry==null?[]:[d.entry]}}else{const d=await i.get(f.Hash,s);return t=eu(d),s.onProgress?.(new Bt("unixfs:exporter:walk:hamt-sharded-directory",{cid:f.Hash})),{entries:sve(t,e,r,n,i,s)}}}),u=>dp(u,{ordered:!0,concurrency:s.blockReadConcurrency}));for await(const{entries:u}of l)yield*u}const rSt=(t,e)=>t.Links.find(n=>n.Name===e)?.Hash,nSt={raw:Fne,file:Fne,directory:eSt,"hamt-sharded-directory":tSt,metadata:(t,e,r,n,i,s,a)=>()=>[],symlink:(t,e,r,n,i,s,a)=>()=>[]},iSt=async(t,e,r,n,i,s,a,o)=>{const c=await a.get(t,o),l=eu(c);let u,f;if(e==null&&(e=t.toString()),l.Data==null)throw new Qc("no data in PBNode");try{u=kn.unmarshal(l.Data)}catch(d){throw new Qc(d.message)}if(r==null&&(r=e),n.length>0){let d;if(u?.type==="hamt-sharded-directory"?d=await nve(l,n[0],a):d=rSt(l,n[0]),d==null)throw new vv("file does not exist");const g=n.shift(),p=`${r}/${g}`;f={cid:d,toResolve:n,name:g??"",path:p}}const h=nSt[u.type](t,l,u,r,i,s,a);if(h==null)throw new vv("could not find content exporter");return u.isDirectory()?{entry:{type:"directory",name:e,path:r,cid:t,content:h,unixfs:u,depth:s,node:l,size:u.fileSize()},next:f}:{entry:{type:"file",name:e,path:r,cid:t,content:h,unixfs:u,depth:s,node:l,size:u.fileSize()},next:f}},sSt={[kh]:iSt,[Wu]:G9t,[L$]:j9t,[rve]:z9t,[ah.code]:H9t,[J0e]:W9t},ave=async(t,e,r,n,i,s,a)=>{const o=sSt[t.code];if(o==null)throw new r9(`No resolver for code ${t.code}`);return o(t,e,r,n,ave,i,s,a)},aSt=(t="")=>(t.trim().match(/([^\\^/]|\\\/)+/g)??[]).filter(Boolean),oSt=t=>{if(t instanceof Uint8Array)return{cid:Dt.decode(t),toResolve:[]};const e=Dt.asCID(t);if(e!=null)return{cid:e,toResolve:[]};if(typeof t=="string"){t.indexOf("/ipfs/")===0&&(t=t.substring(6));const r=aSt(t);return{cid:Dt.parse(r[0]),toResolve:r.slice(1)}}throw new t9(`Unknown path type ${t}`)};async function*ove(t,e,r={}){let{cid:n,toResolve:i}=oSt(t),s=n.toString(),a=s;const o=i.length;for(;;){const c=await ave(n,s,a,i,o,e,r);if(c.entry==null&&c.next==null)throw new vv(`Could not resolve ${t}`);if(c.entry!=null&&(yield c.entry),c.next==null)return;i=c.next.toResolve,n=c.next.cid,s=c.next.name,a=c.next.path}}async function pp(t,e,r={}){const n=await JA(ove(t,e,r));if(n==null)throw new vv(`Could not resolve ${t}`);return n}async function*cve(t,e,r={}){const n=await pp(t,e,r);if(n==null)return;if(yield n,n.type==="directory")for await(const s of i(n,r))yield s;async function*i(s,a){for await(const o of s.content(a))yield o,!(o instanceof Uint8Array)&&o.type==="directory"&&(yield*i(o,a))}}var cSt=t=>{if(Object.prototype.toString.call(t)!=="[object Object]")return!1;const e=Object.getPrototypeOf(t);return e===null||e===Object.prototype};const o9=cSt,{hasOwnProperty:lve}=Object.prototype,{propertyIsEnumerable:lSt}=Object,bv=(t,e,r)=>Object.defineProperty(t,e,{value:r,writable:!0,enumerable:!0,configurable:!0}),uSt=It,$ne={concatArrays:!1,ignoreUndefined:!1},QA=t=>{const e=[];for(const r in t)lve.call(t,r)&&e.push(r);if(Object.getOwnPropertySymbols){const r=Object.getOwnPropertySymbols(t);for(const n of r)lSt.call(t,n)&&e.push(n)}return e};function kb(t){return Array.isArray(t)?fSt(t):o9(t)?hSt(t):t}function fSt(t){const e=t.slice(0,0);return QA(t).forEach(r=>{bv(e,r,kb(t[r]))}),e}function hSt(t){const e=Object.getPrototypeOf(t)===null?Object.create(null):{};return QA(t).forEach(r=>{bv(e,r,kb(t[r]))}),e}const uve=(t,e,r,n)=>(r.forEach(i=>{typeof e[i]>"u"&&n.ignoreUndefined||(i in t&&t[i]!==Object.getPrototypeOf(t)?bv(t,i,hM(t[i],e[i],n)):bv(t,i,kb(e[i])))}),t),dSt=(t,e,r)=>{let n=t.slice(0,0),i=0;return[t,e].forEach(s=>{const a=[];for(let o=0;o<s.length;o++)lve.call(s,o)&&(a.push(String(o)),s===t?bv(n,i++,s[o]):bv(n,i++,kb(s[o])));n=uve(n,s,QA(s).filter(o=>!a.includes(o)),r)}),n};function hM(t,e,r){return r.concatArrays&&Array.isArray(t)&&Array.isArray(e)?dSt(t,e,r):!o9(e)||!o9(t)?kb(e):uve(t,e,QA(e),r)}var pSt=function(...t){const e=hM(kb($ne),this!==uSt&&this||{},$ne);let r={_:{}};for(const n of t)if(n!==void 0){if(!o9(n))throw new TypeError("`"+n+"` is not an Option Object");r=hM(r,{_:n},e)}return r._};const tu=si(pSt);class p0 extends Error{name;code;constructor(e,r,n){super(e),this.name=r,this.code=n}}class eT extends p0{constructor(e="not a Unixfs node"){super(e,"NotUnixFSError","ERR_NOT_UNIXFS")}}class H1 extends p0{constructor(e="invalid PBNode"){super(e,"InvalidPBNodeError","ERR_INVALID_PBNODE")}}class Uj extends p0{constructor(e="unknown error"){super(e,"InvalidPBNodeError","ERR_UNKNOWN_ERROR")}}class fve extends p0{constructor(e="path already exists"){super(e,"AlreadyExistsError","ERR_ALREADY_EXISTS")}}class gSt extends p0{constructor(e="path does not exist"){super(e,"DoesNotExistError","ERR_DOES_NOT_EXIST")}}class hve extends p0{constructor(e="no content"){super(e,"NoContentError","ERR_NO_CONTENT")}}class mSt extends p0{constructor(e="not a file"){super(e,"NotAFileError","ERR_NOT_A_FILE")}}class Vj extends p0{constructor(e="not a directory"){super(e,"NotADirectoryError","ERR_NOT_A_DIRECTORY")}}class Cb extends p0{constructor(e="invalid parameters"){super(e,"InvalidParametersError","ERR_INVALID_PARAMETERS")}}const wv=1e3,_v=wv*60,xv=_v*60,vm=xv*24,ySt=vm*7,vSt=vm*365.25;function dve(t,e){try{if(typeof t=="string"&&t.length>0)return bSt(t);if(typeof t=="number"&&isFinite(t))return e?.long?_St(t):wSt(t);throw new Error("Value is not a string or number.")}catch(r){const n=xSt(r)?`${r.message}. value=${JSON.stringify(t)}`:"An unknown error has occured.";throw new Error(n)}}function bSt(t){if(t=String(t),t.length>100)throw new Error("Value exceeds the maximum length of 100 characters.");const e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(!e)return NaN;const r=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*vSt;case"weeks":case"week":case"w":return r*ySt;case"days":case"day":case"d":return r*vm;case"hours":case"hour":case"hrs":case"hr":case"h":return r*xv;case"minutes":case"minute":case"mins":case"min":case"m":return r*_v;case"seconds":case"second":case"secs":case"sec":case"s":return r*wv;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:throw new Error(`The unit ${n} was matched, but no matching case exists.`)}}function wSt(t){const e=Math.abs(t);return e>=vm?`${Math.round(t/vm)}d`:e>=xv?`${Math.round(t/xv)}h`:e>=_v?`${Math.round(t/_v)}m`:e>=wv?`${Math.round(t/wv)}s`:`${t}ms`}function _St(t){const e=Math.abs(t);return e>=vm?H5(t,e,vm,"day"):e>=xv?H5(t,e,xv,"hour"):e>=_v?H5(t,e,_v,"minute"):e>=wv?H5(t,e,wv,"second"):`${t} ms`}function H5(t,e,r,n){const i=e>=r*1.5;return`${Math.round(t/r)} ${n}${i?"s":""}`}function xSt(t){return typeof t=="object"&&t!==null&&"message"in t}function ESt(t){r.debug=r,r.default=r,r.coerce=c,r.disable=s,r.enable=i,r.enabled=a,r.humanize=dve,r.destroy=l,Object.keys(t).forEach(u=>{r[u]=t[u]}),r.names=[],r.skips=[],r.formatters={};function e(u){let f=0;for(let h=0;h<u.length;h++)f=(f<<5)-f+u.charCodeAt(h),f|=0;return r.colors[Math.abs(f)%r.colors.length]}r.selectColor=e;function r(u){let f,h=null,d,g;function p(...m){if(!p.enabled)return;const y=p,v=Number(new Date),_=v-(f||v);y.diff=_,y.prev=f,y.curr=v,f=v,m[0]=r.coerce(m[0]),typeof m[0]!="string"&&m.unshift("%O");let x=0;m[0]=m[0].replace(/%([a-zA-Z%])/g,(C,R)=>{if(C==="%%")return"%";x++;const M=r.formatters[R];if(typeof M=="function"){const N=m[x];C=M.call(y,N),m.splice(x,1),x--}return C}),r.formatArgs.call(y,m),(y.log||r.log).apply(y,m)}return p.namespace=u,p.useColors=r.useColors(),p.color=r.selectColor(u),p.extend=n,p.destroy=r.destroy,Object.defineProperty(p,"enabled",{enumerable:!0,configurable:!1,get:()=>h!==null?h:(d!==r.namespaces&&(d=r.namespaces,g=r.enabled(u)),g),set:m=>{h=m}}),typeof r.init=="function"&&r.init(p),p}function n(u,f){const h=r(this.namespace+(typeof f>"u"?":":f)+u);return h.log=this.log,h}function i(u){r.save(u),r.namespaces=u,r.names=[],r.skips=[];let f;const h=(typeof u=="string"?u:"").split(/[\s,]+/),d=h.length;for(f=0;f<d;f++)h[f]&&(u=h[f].replace(/\*/g,".*?"),u[0]==="-"?r.skips.push(new RegExp("^"+u.substr(1)+"$")):r.names.push(new RegExp("^"+u+"$")))}function s(){const u=[...r.names.map(o),...r.skips.map(o).map(f=>"-"+f)].join(",");return r.enable(""),u}function a(u){if(u[u.length-1]==="*")return!0;let f,h;for(f=0,h=r.skips.length;f<h;f++)if(r.skips[f].test(u))return!1;for(f=0,h=r.names.length;f<h;f++)if(r.names[f].test(u))return!0;return!1}function o(u){return u.toString().substring(2,u.toString().length-2).replace(/\.\*\?$/,"*")}function c(u){return u instanceof Error?u.stack??u.message:u}function l(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.setupFormatters(r.formatters),r.enable(r.load()),r}var SSt={};const c9=PSt(),ASt=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function TSt(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent?.toLowerCase().match(/(edge|trident)\/(\d+)/)!=null?!1:typeof document<"u"&&document.documentElement?.style?.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent?.toLowerCase().match(/firefox\/(\d+)/)!=null&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent?.toLowerCase().match(/applewebkit\/(\d+)/)}function kSt(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+dve(this.diff),!this.useColors)return;const e="color: "+this.color;t.splice(1,0,e,"color: inherit");let r=0,n=0;t[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(r++,i==="%c"&&(n=r))}),t.splice(n,0,e)}const CSt=console.debug??console.log??(()=>{});function ISt(t){try{t?c9?.setItem("debug",t):c9?.removeItem("debug")}catch{}}function RSt(){let t;try{t=c9?.getItem("debug")}catch{}return!t&&typeof globalThis.process<"u"&&"env"in globalThis.process&&(t=SSt.DEBUG),t}function PSt(){try{return localStorage}catch{}}function BSt(t){t.j=function(e){try{return JSON.stringify(e)}catch(r){return"[UnexpectedJSONParseError]: "+r.message}}}const Vi=ESt({formatArgs:kSt,save:ISt,load:RSt,useColors:TSt,setupFormatters:BSt,colors:ASt,storage:c9,log:CSt});Vi.formatters.b=t=>t==null?"undefined":Rs.baseEncode(t);Vi.formatters.t=t=>t==null?"undefined":Ho.baseEncode(t);Vi.formatters.m=t=>t==null?"undefined":Sc.baseEncode(t);Vi.formatters.p=t=>t==null?"undefined":t.toString();Vi.formatters.c=t=>t==null?"undefined":t.toString();Vi.formatters.k=t=>t==null?"undefined":t.toString();Vi.formatters.a=t=>t==null?"undefined":t.toString();function DSt(t){const e=()=>{};return e.enabled=!1,e.color="",e.diff=0,e.log=()=>{},e.namespace=t,e.destroy=()=>!0,e.extend=()=>e,e}function tT(){return{forComponent(t){return _o(t)}}}function _o(t){let e=DSt(`${t}:trace`);return Vi.enabled(`${t}:trace`)&&Vi.names.map(r=>r.toString()).find(r=>r.includes(":trace"))!=null&&(e=Vi(`${t}:trace`)),Object.assign(Vi(t),{error:Vi(`${t}:error`),trace:e})}function pve(t){function e(r){return r instanceof Une?r:new Une(r,t)}return e}class Une{_value;_hashFn;_depth;_availableBits;_currentBufferIndex;_buffers;constructor(e,r){if(!(e instanceof Uint8Array))throw new Error("can only hash Uint8Arrays");this._value=e,this._hashFn=r,this._depth=-1,this._availableBits=0,this._currentBufferIndex=0,this._buffers=[]}async take(e){let r=e;for(;this._availableBits<r;)await this._produceMoreBits();let n=0;for(;r>0;){const i=this._buffers[this._currentBufferIndex],s=Math.min(i.availableBits(),r),a=i.take(s);n=(n<<s)+a,r-=s,this._availableBits-=s,i.availableBits()===0&&this._currentBufferIndex++}return n}untake(e){let r=e;for(;r>0;){const n=this._buffers[this._currentBufferIndex],i=Math.min(n.totalBits()-n.availableBits(),r);n.untake(i),r-=i,this._availableBits+=i,this._currentBufferIndex>0&&n.totalBits()===n.availableBits()&&(this._depth--,this._currentBufferIndex--)}}async _produceMoreBits(){this._depth++;const e=this._depth>0?Yi([this._value,Uint8Array.from([this._depth])]):this._value,r=await this._hashFn(e),n=new MSt(r);this._buffers.push(n),this._availableBits+=n.availableBits()}}const OSt=[255,254,252,248,240,224,192,128],NSt=[1,3,7,15,31,63,127,255];class MSt{_value;_currentBytePos;_currentBitPos;constructor(e){this._value=e,this._currentBytePos=e.length-1,this._currentBitPos=7}availableBits(){return this._currentBitPos+1+this._currentBytePos*8}totalBits(){return this._value.length*8}take(e){let r=e,n=0;for(;r>0&&this._haveBits();){const i=this._value[this._currentBytePos],s=this._currentBitPos+1,a=Math.min(s,r),o=LSt(i,s-a,a);n=(n<<a)+o,r-=a,this._currentBitPos-=a,this._currentBitPos<0&&(this._currentBitPos=7,this._currentBytePos--)}return n}untake(e){for(this._currentBitPos+=e;this._currentBitPos>7;)this._currentBitPos-=8,this._currentBytePos+=1}_haveBits(){return this._currentBytePos>=0}}function LSt(t,e,r){const n=FSt(e,r);return(t&n)>>>e}function FSt(t,e){return OSt[t]&NSt[Math.min(e+t-1,7)]}const jj=BigInt(ZA.code),L3=8;async function zj(t){return(await ZA.encode(t)).subarray(0,8).reverse()}const Ib=async(t,e,r)=>{r.codec==null&&(r.codec=XA);const n=await wn.digest(t),i=Dt.create(r.cidVersion,r.codec.code,n);return await e.put(i,t,{...r,signal:r.signal}),i};class $St{options;root;dir;path;dirty;flat;parent;parentKey;unixfs;mode;mtime;cid;size;nodeSize;constructor(e,r){this.options=r??{},this.root=e.root,this.dir=e.dir,this.path=e.path,this.dirty=e.dirty,this.flat=e.flat,this.parent=e.parent,this.parentKey=e.parentKey,this.unixfs=e.unixfs,this.mode=e.mode,this.mtime=e.mtime}}class USt extends $St{_bucket;constructor(e,r){super(e,r),this._bucket=Oj({hashFn:zj,bits:8})}async put(e,r){this.cid=void 0,this.size=void 0,this.nodeSize=void 0,await this._bucket.put(e,r)}async get(e){return this._bucket.get(e)}childCount(){return this._bucket.leafCount()}directChildrenCount(){return this._bucket.childrenCount()}onlyChild(){return this._bucket.onlyChild()}async*eachChildSeries(){for await(const{key:e,value:r}of this._bucket.eachLeafSeries())yield{key:e,child:r}}estimateNodeSize(){return this.nodeSize!==void 0?this.nodeSize:(this.nodeSize=mve(this._bucket,this,this.options),this.nodeSize)}async*flush(e){for await(const r of gve(this._bucket,e,this,this.options))yield{...r,path:this.path}}}async function*gve(t,e,r,n){const i=t._children,s=[];let a=0n;for(let d=0;d<i.length;d++){const g=i.get(d);if(g==null)continue;const p=d.toString(16).toUpperCase().padStart(2,"0");if(g instanceof Qm){let m;for await(const y of gve(g,e,null,n))m=y;if(m==null)throw new Error("Could not flush sharded directory, no subshard found");s.push({Name:p,Tsize:Number(m.size),Hash:m.cid}),a+=m.size}else if(VSt(g.value)){const m=g.value;let y;for await(const _ of m.flush(e))y=_,yield y;if(y==null)throw new Error("Did not flush dir");const v=p+g.key;s.push({Name:v,Tsize:Number(y.size),Hash:y.cid}),a+=y.size}else{const m=g.value;if(m.cid==null)continue;const y=p+g.key,v=m.size;s.push({Name:y,Tsize:Number(v),Hash:m.cid}),a+=BigInt(v??0)}}const o=Uint8Array.from(i.bitField().reverse()),c=new kn({type:"hamt-sharded-directory",data:o,fanout:BigInt(t.tableSize()),hashType:jj,mtime:r?.mtime,mode:r?.mode}),l={Data:c.marshal(),Links:s},u=Ss(ol(l)),f=await Ib(u,e,n),h=BigInt(u.byteLength)+a;yield{cid:f,unixfs:c,size:h}}function VSt(t){return typeof t.flush=="function"}function mve(t,e,r){const n=t._children,i=[];for(let c=0;c<n.length;c++){const l=n.get(c);if(l==null)continue;const u=c.toString(16).toUpperCase().padStart(2,"0");if(l instanceof Qm){const f=mve(l,null,r);i.push({Name:u,Tsize:Number(f),Hash:r.cidVersion===0?dM:pM})}else if(typeof l.value.flush=="function"){const h=l.value.nodeSize();i.push({Name:u+l.key,Tsize:Number(h),Hash:r.cidVersion===0?dM:pM})}else{const f=l.value;if(f.cid==null)continue;const h=u+l.key,d=f.size;i.push({Name:h,Tsize:Number(d),Hash:f.cid})}}const s=Uint8Array.from(n.bitField().reverse()),a=new kn({type:"hamt-sharded-directory",data:s,fanout:BigInt(t.tableSize()),hashType:jj,mtime:e?.mtime,mode:e?.mode});return Ss(ol({Data:a.marshal(),Links:i})).length}const dM=Dt.parse("QmUNLLsPACCz1vLxQVkXqqLX5R1X345qqfHbsf67hvA3Nn"),pM=Dt.parse("zdj7WbTaiJT1fgatdet9Ei9iDB5hdCxkbVyhyh8YTUnXMiwYi"),gM=_o("helia:unixfs:commands:utils:hamt-utils"),mM=t=>t.toString(16).toUpperCase().padStart(2,"0").substring(0,2),jSt=async(t,e,r)=>{const n=new USt({root:!0,dir:!0,parent:void 0,parentKey:void 0,path:"",dirty:!0,flat:!1,mtime:r.mtime,mode:r.mode},r);for(let s=0;s<e.length;s++)await n._bucket.put(e[s].name,{size:e[s].size,cid:e[s].cid});const i=await JA(n.flush(t));if(i==null)throw new Error("Flushing shard yielded no result");return i},yve=async(t,e,r)=>{const n=kn.unmarshal(t[0].node.Data??new Uint8Array(0)),i=BigInt(Math.pow(2,L3));t.reverse();let s,a;for(let o=0;o<t.length;o++){const c=o===t.length-1,l=t[o],u=Uint8Array.from(l.children.bitField().reverse()),f=new kn({type:"hamt-sharded-directory",data:u,fanout:i,hashType:jj});c&&(f.mtime=n.mtime,f.mode=n.mode),a={Data:f.marshal(),Links:l.node.Links};const h=Ss(ol(a));if(s=await Ib(h,e,r),!c){const d=t[o+1];if(d==null)throw new Error("Was not operating on shard root but also had no parent?");gM("updating link in parent sub-shard with prefix %s",d.prefix),d.node.Links=d.node.Links.filter(g=>g.Name!==d.prefix),d.node.Links.push({Name:d.prefix,Hash:s,Tsize:l.node.Links.reduce((g,p)=>g+(p.Tsize??0),h.byteLength)})}}if(s==null||a==null)throw new Error("Noting persisted");return{cid:s,node:a}},vve=async(t,e,r,n)=>{const s=pve(zj)(pt(e)),a=[];for(;;){const o=await r.get(t,n),c=eu(o),l=new e9,u=await s.take(L3),f=mM(u);a.push({prefix:f,children:l,node:c});let h;for(const g of c.Links){const p=g.Name??"";if(p.length<2)throw new Error("Invalid HAMT - link name was too short");const m=parseInt(p.substring(0,2),16);l.set(m,!0),p.startsWith(f)&&(h=g)}if(h==null){gM("no link found with prefix %s for %s",f,e);break}const d=h.Name??"";if(d.length<2)throw new Error("Invalid HAMT - link name was too short");if(d.length===2){t=h.Hash,gM("descend into sub-shard with prefix %s",d);continue}break}return{path:a,hash:s}};async function bve(t,e,r,n){if(t.Data==null)throw new Error("DagPB node had no data");const i=kn.unmarshal(t.Data);let s;if(i.type==="directory")s=zSt(t);else if(i.type==="hamt-sharded-directory")s=await wve(t,0,r,e,n);else throw new Error("Can only estimate the size of directories or shards");return s>r}function zSt(t){let e=0;for(const r of t.Links)e+=(r.Name??"").length,e+=r.Hash.version===1?pM.bytes.byteLength:dM.bytes.byteLength;return e}async function wve(t,e,r,n,i){if(e>r)return r;if(t.Data==null||!kn.unmarshal(t.Data).isDirectory())return e;for(const a of t.Links){let o=a.Name??"";if(o=o.substring(2),e+=o.length,e+=a.Hash.bytes.byteLength,a.Hash.code===kh){const c=await n.get(a.Hash,i),l=eu(c);e+=await wve(l,e,r,n,i)}}return e}const Ff=_o("helia:unixfs:components:utils:add-link");async function qj(t,e,r,n){if(t.node.Data==null)throw new Cb("Invalid parent passed to addLink");if(kn.unmarshal(t.node.Data).type==="hamt-sharded-directory")return Ff("adding link to sharded directory"),WSt(t,e,r,n);Ff(`adding ${e.Name} (${e.Hash}) to regular directory`);const s=await HSt(t,e,r,n);if(await bve(s.node,r,n.shardSplitThresholdBytes,n)){Ff("converting directory to sharded directory");const a=await qSt(s,r);s.cid=a.cid,s.node=eu(await r.get(a.cid,n))}return s}const qSt=async(t,e)=>{if(t.node.Data==null)throw new Cb("Invalid parent passed to convertToShardedDirectory");const r=kn.unmarshal(t.node.Data),n=await jSt(e,t.node.Links.map(i=>({name:i.Name??"",size:BigInt(i.Tsize??0),cid:i.Hash})),{mode:r.mode,mtime:r.mtime,cidVersion:t.cid.version});return Ff(`converted directory to sharded directory ${n.cid}`),n},HSt=async(t,e,r,n)=>{const i=t.node.Links.filter(u=>{const f=u.Name===e.Name;if(f&&!n.allowOverwriting)throw new fve;return!f});if(i.push(e),t.node.Data==null)throw new H1("Parent node with no data passed to addToDirectory");const s=kn.unmarshal(t.node.Data);let a;if(s.mtime!=null){const u=Date.now(),f=Math.floor(u/1e3);s.mtime={secs:BigInt(f),nsecs:(u-f*1e3)*1e3},a=s.marshal()}else a=t.node.Data;t.node=ol({Data:a,Links:i});const o=Ss(t.node),c=await wn.digest(o),l=Dt.create(t.cid.version,kh,c);return await r.put(l,o),{node:t.node,cid:l}},WSt=async(t,e,r,n)=>{const{path:i,hash:s}=await vve(t.cid,e.Name,r,n),a=i[i.length-1];if(a==null)throw new Error("Invalid HAMT, could not generate path");const o=a.prefix,c=parseInt(o,16);Ff("next prefix for %s is %s",e.Name,o);const l=`${o}${e.Name}`,u=a.node.Links.find(f=>(f.Name??"").startsWith(o));if(u!=null)if(Ff("link %s was present in shard",l),u.Name===l){if(!n.allowOverwriting)throw new fve;Ff("overwriting %s in subshard",e.Name),a.node.Links=a.node.Links.filter(f=>f.Name!==l),a.node.Links.push({Name:l,Hash:e.Hash,Tsize:e.Tsize})}else{if(u.Name?.length===2)throw new Error("Existing link was subshard?!");{Ff("prefix %s already exists, creating new subshard",o);const f=a.node.Links.findIndex(m=>m.Name?.startsWith(o)),h=a.node.Links.splice(f,1)[0],d=(h.Name??"").substring(2),p=pve(zj)(pt(d));for(let m=0;m<i.length;m++)await p.take(L3);for(;;){const m=await p.take(L3),y=mM(m);h.Name=`${y}${d}`;const v=await s.take(L3),_=mM(v);if(y===_){const A=new e9;A.set(v,!0),i.push({prefix:_,children:A,node:{Links:[]}});continue}const x=new e9;x.set(v,!0),x.set(m,!0),i.push({prefix:o,children:x,node:{Links:[h,{Name:`${_}${e.Name}`,Hash:e.Hash,Tsize:e.Tsize}]}});break}}}else Ff("link %s was not present in sub-shard",l),e.Name=l,a.node.Links.push(e),a.children.set(c,!0),Ff("adding %s to existing sub-shard",l);return yve(i,r,n)};async function rT(t,e,r={}){const n=await pp(t,e,r);if(n.type!=="directory")throw new Vj(`${t.toString()} was not a UnixFS directory`);return{cid:t,node:n.node}}async function Hj(t,e,r,n){const i=await pp(t,r,n);if(i.type!=="directory"&&i.type!=="file"&&i.type!=="raw")throw new eT(`${t.toString()} was not a UnixFS node`);return{Name:e,Tsize:i.node instanceof Uint8Array?i.node.byteLength:KSt(i.node),Hash:t}}function KSt(t){const e=t.Links.reduce((r,n)=>r+(n.Tsize??0),0);return Ss(t).byteLength+e}const GSt=_o("helia:unixfs:components:utils:resolve");async function c8(t,e,r,n){if(e==null||e==="")return{cid:t};const i=`/ipfs/${t}${e==null?"":`/${e}`}`,s=await QE(ove(i,r,n));if(s.length===0)throw new gSt("Could not find path in directory");return GSt("resolved %s to %c",e,t),{cid:s[s.length-1].cid,path:e,segments:s}}async function l9(t,e,r,n){if(e.segments==null||e.segments.length===0)return t;let i=e.segments.pop();if(i==null)throw new Error("Insufficient segments");i.cid=t,e.segments.reverse();for(const s of e.segments){const[a,o]=await Promise.all([rT(s.cid,r,n),Hj(i.cid,i.name,r,n)]);t=(await qj(a,o,r,{...n,allowOverwriting:!0,cidVersion:t.version})).cid,s.cid=t,i=s}return t}const YSt=tu.bind({ignoreUndefined:!0}),XSt={};async function*ZSt(t,e,r={}){const n=YSt(XSt,r),i=await c8(t,n.path,e,n),s=await pp(i.cid,e,n);if(s.type!=="file"&&s.type!=="raw")throw new mSt;if(s.content==null)throw new hve;yield*s.content(n)}const l8=262144,JSt=tu.bind({ignoreUndefined:!0}),QSt=_o("helia:unixfs:chmod"),eAt={recursive:!1,shardSplitThresholdBytes:l8};async function tAt(t,e,r,n={}){const i=JSt(eAt,n),s=await c8(t,i.path,r,n);if(QSt("chmod %c %d",s.cid,e),i.recursive){const h=await is(async function*(){for await(const d of cve(s.cid,r,n)){let g,p=[];if(d.type==="raw")g=new kn({type:"file",data:d.node});else if(d.type==="file"||d.type==="directory")g=d.unixfs,p=d.node.Links;else throw new eT;g.mode=e;const m={Data:g.marshal(),Links:p};yield{path:d.path,content:m}}},d=>a8(d,r,{...i,dagBuilder:async function*(g,p){for await(const m of g)yield async function(){const y=m.content,v=Ss(y),_=await Ib(v,p,{...i,cidVersion:t.version});if(y.Data==null)throw new H1(`${_} had no data`);const x=kn.unmarshal(y.Data);return{cid:_,size:BigInt(v.length),path:m.path,unixfs:x}}}}),async d=>JA(d));if(h==null)throw new Uj(`Could not chmod ${s.cid.toString()}`);return l9(h.cid,s,r,i)}const a=await r.get(s.cid,n);let o,c=[];if(s.cid.code===Wu)o=new kn({type:"file",data:a});else{const h=eu(a);if(h.Data==null)throw new H1(`${s.cid.toString()} had no data`);c=h.Links,o=kn.unmarshal(h.Data)}o.mode=e;const l=Ss({Data:o.marshal(),Links:c}),u=await wn.digest(l),f=Dt.create(s.cid.version,kh,u);return await r.put(f,l),l9(f,s,r,i)}const rAt=tu.bind({ignoreUndefined:!0}),nAt=_o("helia:unixfs:cp"),iAt={force:!1,shardSplitThresholdBytes:l8};async function sAt(t,e,r,n,i={}){const s=rAt(iAt,i);if(r.includes("/"))throw new Cb("Name must not have slashes");const[a,o]=await Promise.all([rT(e,n,s),Hj(t,r,n,s)]);return nAt('Adding %c as "%s" to %c',t,r,e),(await qj(a,o,n,{allowOverwriting:s.force,cidVersion:e.version,...s})).cid}const aAt=tu.bind({ignoreUndefined:!0}),oAt={};async function*cAt(t,e,r={}){const n=aAt(oAt,r),i=await c8(t,n.path,e,n),s=await pp(i.cid,e);if(s.type==="file"||s.type==="raw"){yield s;return}if(s.content==null)throw new hve;if(s.type!=="directory")throw new Vj;yield*s.content({offset:r.offset,length:r.length})}const lAt=tu.bind({ignoreUndefined:!0}),Vne=_o("helia:unixfs:mkdir"),uAt={cidVersion:1,force:!1,shardSplitThresholdBytes:l8};async function fAt(t,e,r,n={}){const i=lAt(uAt,n);if(e.includes("/"))throw new Cb("Path must not have slashes");if((await pp(t,r,n)).type!=="directory")throw new Vj(`${t.toString()} was not a UnixFS directory`);Vne("creating %s",e);const o={Data:new kn({type:"directory",mode:i.mode,mtime:i.mtime}).marshal(),Links:[]},c=Ss(o),l=await wn.digest(c),u=Dt.create(i.cidVersion,kh,l);await r.put(u,c);const[f,h]=await Promise.all([rT(t,r,i),Hj(u,e,r,i)]);return Vne("adding empty dir called %s to %c",e,t),(await qj(f,h,r,{...i,allowOverwriting:i.force})).cid}const Zx=_o("helia:unixfs:utils:remove-link");async function hAt(t,e,r,n){if(t.node.Data==null)throw new H1("Parent node had no data");if(kn.unmarshal(t.node.Data).type==="hamt-sharded-directory"){Zx(`removing ${e} from sharded directory`);const s=await pAt(t,e,r,n);return await bve(s.node,r,n.shardSplitThresholdBytes,n)?s:(Zx("converting shard to flat directory %c",t.cid),gAt(s,r,n))}return Zx(`removing link ${e} regular directory`),dAt(t,e,r,n)}const dAt=async(t,e,r,n)=>{t.node.Links=t.node.Links.filter(a=>a.Name!==e);const i=Ss(t.node),s=await Ib(i,r,{...n,cidVersion:t.cid.version});return Zx(`Updated regular directory ${s}`),{node:t.node,cid:s}},pAt=async(t,e,r,n)=>{const{path:i}=await vve(t.cid,e,r,n),s=i[i.length-1];if(s==null)throw new Error("Invalid HAMT, could not generate path");const a=s.node.Links.filter(l=>(l.Name??"").substring(2)===e).map(l=>l.Name).pop();if(a==null)throw new Error("File not found");const o=a.substring(0,2),c=parseInt(o,16);if(s.node.Links=s.node.Links.filter(l=>l.Name!==a),s.children.unset(c),s.node.Links.length===1)for(;i.length!==1;){const l=i[i.length-1];if(l==null||l.node.Links.length>1)break;i.pop();const u=i[i.length-1];if(u==null)break;const f=l.node.Links[0];u.node.Links=u.node.Links.filter(h=>!(h.Name??"").startsWith(u.prefix)),u.node.Links.push({Hash:f.Hash,Name:`${u.prefix}${(f.Name??"").substring(2)}`,Tsize:f.Tsize})}return yve(i,r,n)},gAt=async(t,e,r)=>{if(t.node.Data==null)throw new Cb("Invalid parent passed to convertToFlatDirectory");const n={Links:[]},i=await pp(t.cid,e);if(i.type!=="directory")throw new Error("Unexpected node type");for await(const c of i.content()){let l=0;c.node instanceof Uint8Array?l=c.node.byteLength:l=Ss(c.node).length,n.Links.push({Hash:c.cid,Name:c.name,Tsize:l})}const s=kn.unmarshal(t.node.Data);n.Data=new kn({type:"directory",mode:s.mode,mtime:s.mtime}).marshal();const a=Ss(ol(n));return{cid:await Ib(a,e,{codec:XA,cidVersion:t.cid.version,signal:r.signal}),node:n}},mAt=tu.bind({ignoreUndefined:!0}),yAt=_o("helia:unixfs:rm"),vAt={shardSplitThresholdBytes:l8};async function bAt(t,e,r,n={}){const i=mAt(vAt,n);if(e.includes("/"))throw new Cb("Name must not have slashes");const s=await rT(t,r,i);return yAt("Removing %s from %c",e,t),(await hAt(s,e,r,{...i,cidVersion:t.version})).cid}const wAt=tu.bind({ignoreUndefined:!0}),_At=_o("helia:unixfs:stat"),xAt={};async function EAt(t,e,r={}){const n=wAt(xAt,r),i=await c8(t,r.path,e,n);_At("stat %c",i.cid);const s=await pp(i.cid,e,n);if(s.type!=="file"&&s.type!=="directory"&&s.type!=="raw")throw new eT;let a=0n,o=0n,c=0n,l=0n,u=0,f,h;const d=s.type;let g;if(s.type==="raw"&&(a=BigInt(s.node.byteLength),o=BigInt(s.node.byteLength),c=BigInt(s.node.byteLength),l=BigInt(s.node.byteLength),u=1),s.type==="directory"&&(a=0n,o=BigInt(s.unixfs.marshal().byteLength),c=0n,l=o,u=1,f=s.unixfs.mode,h=s.unixfs.mtime,g=s.unixfs),s.type==="file"){const p=await _ve(i.cid,e,n);a=s.unixfs.fileSize(),o=BigInt((s.node.Data?.byteLength??0)+s.node.Links.reduce((m,y)=>m+(y.Tsize??0),0)),c=BigInt(p.localFileSize),l=BigInt(p.localDagSize),u=p.blocks,f=s.unixfs.mode,h=s.unixfs.mtime,g=s.unixfs}return{cid:i.cid,mode:f,mtime:h,fileSize:a,dagSize:o,localFileSize:c,localDagSize:l,blocks:u,type:d,unixfs:g}}async function _ve(t,e,r){const n={localFileSize:0,localDagSize:0,blocks:0};if(await e.has(t,r)){const i=await e.get(t,r);if(n.blocks++,n.localDagSize+=i.byteLength,t.code===Wu)n.localFileSize+=i.byteLength;else if(t.code===kh){const s=eu(i);if(s.Links.length>0)for(const a of s.Links){const o=await _ve(a.Hash,e,r);n.localFileSize+=o.localFileSize,n.localDagSize+=o.localDagSize,n.blocks+=o.blocks}else{if(s.Data==null)throw new H1(`PBNode ${t.toString()} had no data`);const a=kn.unmarshal(s.Data);if(a.data==null)throw new H1(`UnixFS node ${t.toString()} had no data`);n.localFileSize+=a.data.byteLength??0}}else throw new Uj(`${t.toString()} was neither DAG_PB nor RAW`)}return n}const SAt=tu.bind({ignoreUndefined:!0}),AAt=_o("helia:unixfs:touch"),TAt={recursive:!1,shardSplitThresholdBytes:l8};async function kAt(t,e,r={}){const n=SAt(TAt,r),i=await c8(t,n.path,e,n),s=n.mtime??{secs:BigInt(Math.round(Date.now()/1e3)),nsecs:0};if(AAt("touch %c %o",i.cid,s),n.recursive){const h=await is(async function*(){for await(const d of cve(i.cid,e)){let g,p;if(d.type==="raw")g=new kn({data:d.node}),p=[];else if(d.type==="file"||d.type==="directory")g=d.unixfs,p=d.node.Links;else throw new eT;g.mtime=s;const m={Data:g.marshal(),Links:p};yield{path:d.path,content:m}}},d=>a8(d,e,{...n,dagBuilder:async function*(g,p){for await(const m of g)yield async function(){const y=m.content,v=Ss(y),_=await Ib(v,p,{...n,cidVersion:t.version});if(y.Data==null)throw new H1(`${_} had no data`);const x=kn.unmarshal(y.Data);return{cid:_,size:BigInt(v.length),path:m.path,unixfs:x}}}}),async d=>JA(d));if(h==null)throw new Uj(`Could not chmod ${i.cid.toString()}`);return l9(h.cid,i,e,n)}const a=await e.get(i.cid,r);let o,c=[];if(i.cid.code===Wu)o=new kn({data:a});else{const h=eu(a);if(c=h.Links,h.Data==null)throw new H1(`${i.cid.toString()} had no data`);o=kn.unmarshal(h.Data)}o.mtime=s;const l=Ss({Data:o.marshal(),Links:c}),u=await wn.digest(l),f=Dt.create(i.cid.version,kh,u);return await e.put(f,l),l9(f,i,e,n)}class CAt{components;constructor(e){this.components=e}async*addAll(e,r={}){yield*D9t(e,this.components.blockstore,r)}async addBytes(e,r={}){return O9t(e,this.components.blockstore,r)}async addByteStream(e,r={}){return N9t(e,this.components.blockstore,r)}async addFile(e,r={}){return M9t(e,this.components.blockstore,r)}async addDirectory(e={},r={}){return L9t(e,this.components.blockstore,r)}async*cat(e,r={}){yield*ZSt(e,this.components.blockstore,r)}async chmod(e,r,n={}){return tAt(e,r,this.components.blockstore,n)}async cp(e,r,n,i={}){return sAt(e,r,n,this.components.blockstore,i)}async*ls(e,r={}){yield*cAt(e,this.components.blockstore,r)}async mkdir(e,r,n={}){return fAt(e,r,this.components.blockstore,n)}async rm(e,r,n={}){return bAt(e,r,this.components.blockstore,n)}async stat(e,r={}){return EAt(e,this.components.blockstore,r)}async touch(e,r={}){return kAt(e,this.components.blockstore,r)}}function jne(t){return new CAt(t)}var xve={},Wj={},IAt=It&&It.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(Wj,"__esModule",{value:!0});var RAt=hU,PAt=function(t){IAt(e,t);function e(r){var n=t.call(this,{objectMode:!0})||this,i=indexedDB.open(r.databaseName,r.databaseVersion);return i.addEventListener("success",function(s){var a;try{var o=s.target.result.transaction([r.objectStoreName]).objectStore(r.objectStoreName);r.indexName&&(o=o.index(r.indexName)),a=o.openCursor(r.range,r.cursorDirection)}catch(c){return n.emit("error",c)}a.addEventListener("success",function(c){if(c.target.result)return n.push(c.target.result.value),c.target.result.continue();n.push(null)}),a.addEventListener("error",function(c){n.emit("error",c.target.result)})}),i.addEventListener("error",function(s){n.emit("error",s.target.result)}),n}return e.prototype._read=function(){},e}(RAt.Readable);Wj.IndexedDbReadStream=PAt;var Kj={},BAt=It&&It.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(Kj,"__esModule",{value:!0});var DAt=hU,OAt=function(t){BAt(e,t);function e(r){var n=t.call(this,{objectMode:!0})||this;return n.options=r,n}return e.prototype._write=function(r,n,i){var s=this,a=indexedDB.open(this.options.databaseName,this.options.databaseVersion);a.addEventListener("success",function(o){var c;try{c=o.target.result.transaction([s.options.objectStoreName],"readwrite").objectStore(s.options.objectStoreName).add(r)}catch(l){s.emit("error",l);return}c.addEventListener("success",function(){i()}),c.addEventListener("error",function(l){s.emit("error",l.target.error)})}),a.addEventListener("error",function(o){s.emit("error",o.target.error)})},e}(DAt.Writable);Kj.IndexedDbWriteStream=OAt;(function(t){function e(r){for(var n in r)t.hasOwnProperty(n)||(t[n]=r[n])}Object.defineProperty(t,"__esModule",{value:!0}),e(Wj),e(Kj)})(xve);const NAt=si(xve);var Eve={exports:{}},bB={exports:{}},zne;function Gj(){return zne||(zne=1,function(t,e){(function(r,n){t.exports=n()})(It,function(){var r=r||function(n,i){var s;if(typeof window<"u"&&window.crypto&&(s=window.crypto),typeof self<"u"&&self.crypto&&(s=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(s=globalThis.crypto),!s&&typeof window<"u"&&window.msCrypto&&(s=window.msCrypto),!s&&typeof It<"u"&&It.crypto&&(s=It.crypto),!s&&typeof $w=="function")try{s=V6()}catch{}var a=function(){if(s){if(typeof s.getRandomValues=="function")try{return s.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof s.randomBytes=="function")try{return s.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},o=Object.create||function(){function v(){}return function(_){var x;return v.prototype=_,x=new v,v.prototype=null,x}}(),c={},l=c.lib={},u=l.Base=function(){return{extend:function(v){var _=o(this);return v&&_.mixIn(v),(!_.hasOwnProperty("init")||this.init===_.init)&&(_.init=function(){_.$super.init.apply(this,arguments)}),_.init.prototype=_,_.$super=this,_},create:function(){var v=this.extend();return v.init.apply(v,arguments),v},init:function(){},mixIn:function(v){for(var _ in v)v.hasOwnProperty(_)&&(this[_]=v[_]);v.hasOwnProperty("toString")&&(this.toString=v.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),f=l.WordArray=u.extend({init:function(v,_){v=this.words=v||[],_!=i?this.sigBytes=_:this.sigBytes=v.length*4},toString:function(v){return(v||d).stringify(this)},concat:function(v){var _=this.words,x=v.words,A=this.sigBytes,C=v.sigBytes;if(this.clamp(),A%4)for(var R=0;R<C;R++){var M=x[R>>>2]>>>24-R%4*8&255;_[A+R>>>2]|=M<<24-(A+R)%4*8}else for(var N=0;N<C;N+=4)_[A+N>>>2]=x[N>>>2];return this.sigBytes+=C,this},clamp:function(){var v=this.words,_=this.sigBytes;v[_>>>2]&=4294967295<<32-_%4*8,v.length=n.ceil(_/4)},clone:function(){var v=u.clone.call(this);return v.words=this.words.slice(0),v},random:function(v){for(var _=[],x=0;x<v;x+=4)_.push(a());return new f.init(_,v)}}),h=c.enc={},d=h.Hex={stringify:function(v){for(var _=v.words,x=v.sigBytes,A=[],C=0;C<x;C++){var R=_[C>>>2]>>>24-C%4*8&255;A.push((R>>>4).toString(16)),A.push((R&15).toString(16))}return A.join("")},parse:function(v){for(var _=v.length,x=[],A=0;A<_;A+=2)x[A>>>3]|=parseInt(v.substr(A,2),16)<<24-A%8*4;return new f.init(x,_/2)}},g=h.Latin1={stringify:function(v){for(var _=v.words,x=v.sigBytes,A=[],C=0;C<x;C++){var R=_[C>>>2]>>>24-C%4*8&255;A.push(String.fromCharCode(R))}return A.join("")},parse:function(v){for(var _=v.length,x=[],A=0;A<_;A++)x[A>>>2]|=(v.charCodeAt(A)&255)<<24-A%4*8;return new f.init(x,_)}},p=h.Utf8={stringify:function(v){try{return decodeURIComponent(escape(g.stringify(v)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(v){return g.parse(unescape(encodeURIComponent(v)))}},m=l.BufferedBlockAlgorithm=u.extend({reset:function(){this._data=new f.init,this._nDataBytes=0},_append:function(v){typeof v=="string"&&(v=p.parse(v)),this._data.concat(v),this._nDataBytes+=v.sigBytes},_process:function(v){var _,x=this._data,A=x.words,C=x.sigBytes,R=this.blockSize,M=R*4,N=C/M;v?N=n.ceil(N):N=n.max((N|0)-this._minBufferSize,0);var Y=N*R,H=n.min(Y*4,C);if(Y){for(var E=0;E<Y;E+=R)this._doProcessBlock(A,E);_=A.splice(0,Y),x.sigBytes-=H}return new f.init(_,H)},clone:function(){var v=u.clone.call(this);return v._data=this._data.clone(),v},_minBufferSize:0});l.Hasher=m.extend({cfg:u.extend(),init:function(v){this.cfg=this.cfg.extend(v),this.reset()},reset:function(){m.reset.call(this),this._doReset()},update:function(v){return this._append(v),this._process(),this},finalize:function(v){v&&this._append(v);var _=this._doFinalize();return _},blockSize:16,_createHelper:function(v){return function(_,x){return new v.init(x).finalize(_)}},_createHmacHelper:function(v){return function(_,x){return new y.HMAC.init(v,x).finalize(_)}}});var y=c.algo={};return c}(Math);return r})}(bB)),bB.exports}(function(t,e){(function(r,n){t.exports=n(Gj())})(It,function(r){return function(n){var i=r,s=i.lib,a=s.WordArray,o=s.Hasher,c=i.algo,l=[];(function(){for(var p=0;p<64;p++)l[p]=n.abs(n.sin(p+1))*4294967296|0})();var u=c.MD5=o.extend({_doReset:function(){this._hash=new a.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(p,m){for(var y=0;y<16;y++){var v=m+y,_=p[v];p[v]=(_<<8|_>>>24)&16711935|(_<<24|_>>>8)&4278255360}var x=this._hash.words,A=p[m+0],C=p[m+1],R=p[m+2],M=p[m+3],N=p[m+4],Y=p[m+5],H=p[m+6],E=p[m+7],k=p[m+8],w=p[m+9],T=p[m+10],L=p[m+11],I=p[m+12],U=p[m+13],O=p[m+14],D=p[m+15],P=x[0],B=x[1],z=x[2],F=x[3];P=f(P,B,z,F,A,7,l[0]),F=f(F,P,B,z,C,12,l[1]),z=f(z,F,P,B,R,17,l[2]),B=f(B,z,F,P,M,22,l[3]),P=f(P,B,z,F,N,7,l[4]),F=f(F,P,B,z,Y,12,l[5]),z=f(z,F,P,B,H,17,l[6]),B=f(B,z,F,P,E,22,l[7]),P=f(P,B,z,F,k,7,l[8]),F=f(F,P,B,z,w,12,l[9]),z=f(z,F,P,B,T,17,l[10]),B=f(B,z,F,P,L,22,l[11]),P=f(P,B,z,F,I,7,l[12]),F=f(F,P,B,z,U,12,l[13]),z=f(z,F,P,B,O,17,l[14]),B=f(B,z,F,P,D,22,l[15]),P=h(P,B,z,F,C,5,l[16]),F=h(F,P,B,z,H,9,l[17]),z=h(z,F,P,B,L,14,l[18]),B=h(B,z,F,P,A,20,l[19]),P=h(P,B,z,F,Y,5,l[20]),F=h(F,P,B,z,T,9,l[21]),z=h(z,F,P,B,D,14,l[22]),B=h(B,z,F,P,N,20,l[23]),P=h(P,B,z,F,w,5,l[24]),F=h(F,P,B,z,O,9,l[25]),z=h(z,F,P,B,M,14,l[26]),B=h(B,z,F,P,k,20,l[27]),P=h(P,B,z,F,U,5,l[28]),F=h(F,P,B,z,R,9,l[29]),z=h(z,F,P,B,E,14,l[30]),B=h(B,z,F,P,I,20,l[31]),P=d(P,B,z,F,Y,4,l[32]),F=d(F,P,B,z,k,11,l[33]),z=d(z,F,P,B,L,16,l[34]),B=d(B,z,F,P,O,23,l[35]),P=d(P,B,z,F,C,4,l[36]),F=d(F,P,B,z,N,11,l[37]),z=d(z,F,P,B,E,16,l[38]),B=d(B,z,F,P,T,23,l[39]),P=d(P,B,z,F,U,4,l[40]),F=d(F,P,B,z,A,11,l[41]),z=d(z,F,P,B,M,16,l[42]),B=d(B,z,F,P,H,23,l[43]),P=d(P,B,z,F,w,4,l[44]),F=d(F,P,B,z,I,11,l[45]),z=d(z,F,P,B,D,16,l[46]),B=d(B,z,F,P,R,23,l[47]),P=g(P,B,z,F,A,6,l[48]),F=g(F,P,B,z,E,10,l[49]),z=g(z,F,P,B,O,15,l[50]),B=g(B,z,F,P,Y,21,l[51]),P=g(P,B,z,F,I,6,l[52]),F=g(F,P,B,z,M,10,l[53]),z=g(z,F,P,B,T,15,l[54]),B=g(B,z,F,P,C,21,l[55]),P=g(P,B,z,F,k,6,l[56]),F=g(F,P,B,z,D,10,l[57]),z=g(z,F,P,B,H,15,l[58]),B=g(B,z,F,P,U,21,l[59]),P=g(P,B,z,F,N,6,l[60]),F=g(F,P,B,z,L,10,l[61]),z=g(z,F,P,B,R,15,l[62]),B=g(B,z,F,P,w,21,l[63]),x[0]=x[0]+P|0,x[1]=x[1]+B|0,x[2]=x[2]+z|0,x[3]=x[3]+F|0},_doFinalize:function(){var p=this._data,m=p.words,y=this._nDataBytes*8,v=p.sigBytes*8;m[v>>>5]|=128<<24-v%32;var _=n.floor(y/4294967296),x=y;m[(v+64>>>9<<4)+15]=(_<<8|_>>>24)&16711935|(_<<24|_>>>8)&4278255360,m[(v+64>>>9<<4)+14]=(x<<8|x>>>24)&16711935|(x<<24|x>>>8)&4278255360,p.sigBytes=(m.length+1)*4,this._process();for(var A=this._hash,C=A.words,R=0;R<4;R++){var M=C[R];C[R]=(M<<8|M>>>24)&16711935|(M<<24|M>>>8)&4278255360}return A},clone:function(){var p=o.clone.call(this);return p._hash=this._hash.clone(),p}});function f(p,m,y,v,_,x,A){var C=p+(m&y|~m&v)+_+A;return(C<<x|C>>>32-x)+m}function h(p,m,y,v,_,x,A){var C=p+(m&v|y&~v)+_+A;return(C<<x|C>>>32-x)+m}function d(p,m,y,v,_,x,A){var C=p+(m^y^v)+_+A;return(C<<x|C>>>32-x)+m}function g(p,m,y,v,_,x,A){var C=p+(y^(m|~v))+_+A;return(C<<x|C>>>32-x)+m}i.MD5=o._createHelper(u),i.HmacMD5=o._createHmacHelper(u)}(Math),r.MD5})})(Eve);var MAt=Eve.exports;const nT=si(MAt);var Sve={exports:{}};(function(t,e){(function(r,n){t.exports=n(Gj())})(It,function(r){return function(){var n=r,i=n.lib,s=i.WordArray,a=n.enc;a.Base64={stringify:function(c){var l=c.words,u=c.sigBytes,f=this._map;c.clamp();for(var h=[],d=0;d<u;d+=3)for(var g=l[d>>>2]>>>24-d%4*8&255,p=l[d+1>>>2]>>>24-(d+1)%4*8&255,m=l[d+2>>>2]>>>24-(d+2)%4*8&255,y=g<<16|p<<8|m,v=0;v<4&&d+v*.75<u;v++)h.push(f.charAt(y>>>6*(3-v)&63));var _=f.charAt(64);if(_)for(;h.length%4;)h.push(_);return h.join("")},parse:function(c){var l=c.length,u=this._map,f=this._reverseMap;if(!f){f=this._reverseMap=[];for(var h=0;h<u.length;h++)f[u.charCodeAt(h)]=h}var d=u.charAt(64);if(d){var g=c.indexOf(d);g!==-1&&(l=g)}return o(c,l,f)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function o(c,l,u){for(var f=[],h=0,d=0;d<l;d++)if(d%4){var g=u[c.charCodeAt(d-1)]<<d%4*2,p=u[c.charCodeAt(d)]>>>6-d%4*2,m=g|p;f[h>>>2]|=m<<24-h%4*8,h++}return s.create(f,h)}}(),r.enc.Base64})})(Sve);var LAt=Sve.exports;const U4=si(LAt);class FAt{verrou;_cacheSuivi;_cacheRecherche;constructor(){this.verrou=new kc,this._cacheSuivi={},this._cacheRecherche={}}async suivre({adresseFonction:e,idClient:r,fOriginale:n,args:i,ceciOriginal:s}){const a=Object.entries(i).find(h=>typeof h[1]=="function")?.[0];if(!a)throw new Error("Aucun argument n'est une fonction.");const o=i[a],c=Object.fromEntries(Object.entries(i).filter(h=>typeof h[1]!="function"));if(Object.keys(i).length!==Object.keys(c).length+1)throw new Error("Plus d'un argument pour "+e+" est une fonction : "+JSON.stringify(i));const l=this.générerCodeCache({adresseFonction:e,idClient:r,argsClefs:c}),u=rs();if(await this.verrou.acquire(l),this._cacheSuivi[l])this.verrou.release(l),this._cacheSuivi[l].requêtes[u]=o,Object.keys(this._cacheSuivi[l]).includes("val")&&await o(this._cacheSuivi[l].val);else{this._cacheSuivi[l]={requêtes:{[u]:o}};const h=async p=>{if(!this._cacheSuivi[l]||Object.keys(this._cacheSuivi[l]).includes("val")&&m3(this._cacheSuivi[l].val,p,{strict:!0}))return;this._cacheSuivi[l].val=p;const m=Object.values(this._cacheSuivi[l].requêtes);await Promise.all(m.map(y=>y(p)))},d={...c,[a]:h},g=await n.apply(s,[d]);this._cacheSuivi[l].fOublier=g,this.verrou.release(l)}return async()=>{await this.oublierSuivi({codeCache:l,idRequête:u})}}async suivreRecherche({adresseFonction:e,nomArgTaille:r,idClient:n,fOriginale:i,args:s,ceciOriginal:a,par:o}){const c=Object.entries(s).find(v=>typeof v[1]=="function")?.[0];if(!c)throw new Error("Aucun argument n'est une fonction.");const l=s[c],u=Object.fromEntries(Object.entries(s).filter(v=>typeof v[1]!="function"));if(Object.keys(s).length!==Object.keys(u).length+1)throw new Error("Plus d'un argument pour "+e+" est une fonction : "+JSON.stringify(s));const f=Object.fromEntries(Object.entries(s).filter(v=>v[0]!==r));let h=s[r];if(h===void 0&&(h=1/0),typeof h!="number")throw new Error(`Argument ${r} n'est pas un nombre dans la fonction ${e}.`);const d=this.générerCodeCache({adresseFonction:e,idClient:n,argsClefs:f}),g=rs();await this.verrou.acquire(d);const p=v=>{if(!this._cacheRecherche[d])return;this._cacheRecherche[d].val=v;const _=Object.values(this._cacheRecherche[d].requêtes);o==="profondeur"?_.forEach(x=>x.f(v.filter(A=>A.profondeur<=x.taille))):_.forEach(x=>x.f(v.slice(0,x.taille)))};if(this._cacheRecherche[d]){if(this._cacheRecherche[d].requêtes[g]={f:l,taille:h},Object.keys(this._cacheRecherche[d]).includes("val")){const{val:v}=this._cacheRecherche[d];v&&p(v)}}else{this._cacheRecherche[d]={requêtes:{[g]:{f:l,taille:h}},taillePrésente:h};const v={...f,[c]:p,[r]:h};if(o==="profondeur"){const{fOublier:_,fChangerProfondeur:x}=await i.apply(a,[v]);this._cacheRecherche[d].fs={fOublier:_,fChangerTaille:x}}else{const{fOublier:_,fChangerN:x}=await i.apply(a,[v]);this._cacheRecherche[d].fs={fOublier:_,fChangerTaille:x}}}const m=async()=>{await this.oublierRecherche({codeCache:d,idRequête:g})},y=v=>{const _=this._cacheRecherche[d].requêtes[g].taille;if(v===_)return;this._cacheRecherche[d].requêtes[g].taille=v;const{val:x}=this._cacheRecherche[d];x&&p(x);const A=Math.max(...Object.values(this._cacheRecherche[d].requêtes).map(M=>M.taille)),{taillePrésente:C}=this._cacheRecherche[d],{fChangerTaille:R}=this._cacheRecherche[d].fs;A!==C&&(this._cacheRecherche[d].taillePrésente=A,R(A))};return this.verrou.release(d),{fOublier:m,[o==="profondeur"?"fChangerProfondeur":"fChangerN"]:y}}async oublierSuivi({codeCache:e,idRequête:r}){if(await this.verrou.acquire(e),this._cacheSuivi[e]===void 0)return;const{requêtes:n,fOublier:i}=this._cacheSuivi[e];delete n[r],Object.keys(n).length||(await i?.(),delete this._cacheSuivi[e]),this.verrou.release(e)}async oublierRecherche({codeCache:e,idRequête:r}){if(await this.verrou.acquire(e),this._cacheRecherche[e]===void 0)return;const{requêtes:n,fs:i}=this._cacheRecherche[e];delete n[r],Object.keys(n).length||(await i?.fOublier(),delete this._cacheRecherche[e]),this.verrou.release(e)}générerCodeCache({adresseFonction:e,idClient:r,argsClefs:n}){const i=e+"-"+r+"-"+JSON.stringify(n);return U4.stringify(nT(i))}}const ot=(t,e,r)=>Yj({nom:e,descripteur:r}),Ht=(t,e,r)=>Yj({nom:e,descripteur:r,recherche:"nRésultats"}),Ave=(t,e,r)=>Yj({nom:e,descripteur:r,recherche:"profondeur"}),Yj=({nom:t,descripteur:e,recherche:r,nomArgTaille:n})=>{const i=e.value;if(typeof i=="function")e.value=function(...s){if(s.length>1)throw new Error("Args trop longs");const a=this.client?this.client:this;try{return r?(n=n||(r==="profondeur"?"profondeur":"nRésultatsDésirés"),qne.suivreRecherche({adresseFonction:this.constructor.name+"."+t,idClient:a.idCompte,fOriginale:i,args:s[0],ceciOriginal:this,par:r,nomArgTaille:n})):qne.suivre({adresseFonction:this.constructor.name+"."+t,idClient:a.idCompte,fOriginale:i,args:s[0],ceciOriginal:this})}catch(o){throw console.error(`Erreur: ${o}`),o}};else throw new Error("L'objet décoré n'est pas une fonction");return e},qne=new FAt,dt={ATTR:"attribution",ÉGAL:"partageÉgal",INCL:"inclureDroitDauteur",CHNG:"indiquerChangements",SRCE:"partagerCodeSource",USGR:"usagereseau"},Oe={PRTG:"partager",ADPT:"adapter",CMRC:"usageComercial",PRV:"usagePrivé",BREV:"usageBrevets"},rt={RSP:"aucuneResponsabilité",GRNT:"aucuneGarantie",MRCM:"marqueCommerce",BREV:"brevetExclu",SOUS:"sousLicence"},Sr={BD:"basesDeDonnées",ART:"artistique",CODE:"codeInformatique",AUTRE:"autre"},$At={"ODbl-1_0":{droits:[Oe.CMRC,Oe.PRTG,Oe.PRV,Oe.ADPT],conditions:[dt.ATTR,dt.ÉGAL,dt.INCL],limitations:[rt.RSP,rt.BREV,rt.MRCM,rt.GRNT],catégorie:Sr.BD},"ODC-BY-1_0":{droits:[Oe.CMRC,Oe.PRTG,Oe.PRV,Oe.ADPT],conditions:[dt.ATTR,dt.INCL],limitations:[rt.RSP,rt.GRNT,rt.MRCM,rt.BREV],catégorie:Sr.BD},PDDL:{droits:[Oe.CMRC,Oe.PRTG,Oe.ADPT,Oe.PRV],conditions:[],limitations:[rt.RSP,rt.GRNT,rt.MRCM,rt.BREV],catégorie:Sr.BD},"rvca-open":{droits:[Oe.PRV,Oe.CMRC,Oe.ADPT,Oe.PRTG],conditions:[dt.INCL,dt.ATTR],limitations:[rt.SOUS,rt.RSP],catégorie:Sr.BD,spécialisée:!0},"CC-BY-SA-4_0":{droits:[Oe.PRTG,Oe.ADPT,Oe.CMRC,Oe.PRV],conditions:[dt.INCL,dt.CHNG,dt.ÉGAL],limitations:[rt.RSP,rt.MRCM,rt.BREV,rt.GRNT],catégorie:Sr.ART},"CC-BY-4_0":{droits:[Oe.CMRC,Oe.PRTG,Oe.ADPT,Oe.PRV],conditions:[dt.ATTR,dt.CHNG],limitations:[rt.RSP,rt.MRCM,rt.BREV,rt.GRNT],catégorie:Sr.ART},"CC-0-1_0":{droits:[Oe.PRTG,Oe.ADPT,Oe.CMRC,Oe.PRV],conditions:[],limitations:[rt.RSP,rt.MRCM,rt.BREV,rt.GRNT],catégorie:Sr.ART},"0bsd":{droits:[Oe.CMRC,Oe.PRTG,Oe.ADPT,Oe.PRV],conditions:[],limitations:[],catégorie:Sr.CODE},"afl-3_0":{droits:[Oe.CMRC,Oe.PRTG,Oe.ADPT,Oe.PRV,Oe.BREV],conditions:[dt.INCL,dt.CHNG],limitations:[rt.MRCM,rt.RSP,rt.GRNT],catégorie:Sr.CODE},"agpl-3_0":{droits:[Oe.CMRC,Oe.ADPT,Oe.PRTG,Oe.BREV,Oe.PRV],conditions:[dt.INCL,dt.CHNG,dt.SRCE,dt.USGR,dt.ÉGAL],limitations:[rt.RSP,rt.GRNT],catégorie:Sr.CODE},"apache-2_0":{droits:[Oe.CMRC,Oe.ADPT,Oe.PRTG,Oe.BREV,Oe.PRV],conditions:[dt.INCL,dt.CHNG],limitations:[rt.MRCM,rt.RSP,rt.GRNT],catégorie:Sr.CODE},"artistic-2_0":{droits:[Oe.CMRC,Oe.ADPT,Oe.PRTG,Oe.BREV,Oe.PRV],conditions:[dt.INCL,dt.CHNG],limitations:[rt.RSP,rt.MRCM,rt.GRNT],catégorie:Sr.CODE},"bsd-2-clause":{droits:[Oe.CMRC,Oe.ADPT,Oe.PRTG,Oe.PRV],conditions:[dt.INCL],limitations:[rt.RSP,rt.GRNT],catégorie:Sr.CODE},"bsd-3-clause-clear":{droits:[Oe.CMRC,Oe.ADPT,Oe.PRTG,Oe.PRV],conditions:[dt.INCL],limitations:[rt.RSP,rt.BREV,rt.GRNT],catégorie:Sr.CODE},"bsd-3-clause":{droits:[Oe.CMRC,Oe.ADPT,Oe.PRTG,Oe.PRV],conditions:[dt.INCL],limitations:[rt.RSP,rt.GRNT],catégorie:Sr.CODE},"bsd-4-clause":{droits:[Oe.CMRC,Oe.ADPT,Oe.PRTG,Oe.PRV],conditions:[dt.INCL],limitations:[rt.RSP,rt.GRNT],catégorie:Sr.CODE},"bsl-1_0":{droits:[Oe.CMRC,Oe.ADPT,Oe.PRTG,Oe.PRV],conditions:[dt.INCL],limitations:[rt.RSP,rt.GRNT],catégorie:Sr.CODE},"cecill-2_1":{droits:[Oe.CMRC,Oe.ADPT,Oe.PRTG,Oe.PRV,Oe.BREV],conditions:[dt.INCL,dt.SRCE,dt.ÉGAL],limitations:[rt.RSP,rt.GRNT],catégorie:Sr.CODE},"ecl-2_0":{droits:[Oe.CMRC,Oe.ADPT,Oe.PRTG,Oe.BREV,Oe.PRV],conditions:[dt.INCL,dt.CHNG],limitations:[rt.BREV,rt.RSP,rt.GRNT],catégorie:Sr.CODE},"epl-1_0":{droits:[Oe.CMRC,Oe.PRTG,Oe.ADPT,Oe.BREV,Oe.PRV],conditions:[dt.SRCE,dt.INCL,dt.ÉGAL],limitations:[rt.RSP,rt.GRNT],catégorie:Sr.CODE},"epl-2_0":{droits:[Oe.CMRC,Oe.PRTG,Oe.ADPT,Oe.BREV,Oe.PRV],conditions:[dt.SRCE,dt.INCL,dt.ÉGAL],limitations:[rt.RSP,rt.GRNT],catégorie:Sr.CODE},"eupl-1_0":{droits:[Oe.CMRC,Oe.ADPT,Oe.PRTG,Oe.BREV,Oe.PRV],conditions:[dt.INCL,dt.SRCE,dt.CHNG,dt.USGR,dt.ÉGAL],limitations:[rt.RSP,rt.MRCM,rt.GRNT],catégorie:Sr.CODE},"eupl-1_2":{droits:[Oe.CMRC,Oe.ADPT,Oe.PRTG,Oe.BREV,Oe.PRV],conditions:[dt.INCL,dt.SRCE,dt.CHNG,dt.USGR,dt.ÉGAL],limitations:[rt.RSP,rt.MRCM,rt.GRNT],catégorie:Sr.CODE},"gpl-2_0":{droits:[Oe.CMRC,Oe.ADPT,Oe.PRTG,Oe.PRV],conditions:[dt.INCL,dt.CHNG,dt.SRCE,dt.ÉGAL],limitations:[rt.RSP,rt.GRNT],catégorie:Sr.CODE},"gpl-3_0":{droits:[Oe.CMRC,Oe.ADPT,Oe.PRV,Oe.BREV,Oe.PRV],conditions:[dt.INCL,dt.CHNG,dt.SRCE,dt.ÉGAL],limitations:[rt.RSP,rt.GRNT],catégorie:Sr.CODE},isc:{droits:[Oe.CMRC,Oe.PRTG,Oe.ADPT,Oe.PRV],conditions:[dt.INCL],limitations:[rt.RSP,rt.GRNT],catégorie:Sr.CODE},"lgpl-2_1":{droits:[Oe.CMRC,Oe.ADPT,Oe.PRTG,Oe.PRV],conditions:[dt.INCL,dt.SRCE,dt.CHNG,dt.ÉGAL],limitations:[rt.RSP,rt.GRNT],catégorie:Sr.CODE},"lgpl-3_0":{droits:[Oe.CMRC,Oe.ADPT,Oe.PRTG,Oe.BREV,Oe.PRV],conditions:[dt.INCL,dt.SRCE,dt.CHNG,dt.ÉGAL],limitations:[rt.RSP,rt.GRNT],catégorie:Sr.CODE},"lppl-1_3c":{droits:[Oe.CMRC,Oe.ADPT,Oe.PRTG,Oe.PRV],conditions:[dt.INCL,dt.CHNG,dt.SRCE],limitations:[rt.RSP,rt.GRNT],catégorie:Sr.CODE},"mit-0":{droits:[Oe.CMRC,Oe.ADPT,Oe.PRTG,Oe.PRV],conditions:[],limitations:[rt.RSP,rt.GRNT],catégorie:Sr.CODE},mit:{droits:[Oe.CMRC,Oe.ADPT,Oe.PRTG,Oe.PRV],conditions:[dt.INCL],limitations:[rt.RSP,rt.GRNT],catégorie:Sr.CODE},"mpl-2_0":{droits:[Oe.CMRC,Oe.ADPT,Oe.PRTG,Oe.BREV,Oe.PRV],conditions:[dt.SRCE,dt.INCL,dt.ÉGAL],limitations:[rt.RSP,rt.MRCM,rt.GRNT],catégorie:Sr.CODE},"ms-pl":{droits:[Oe.CMRC,Oe.ADPT,Oe.PRTG,Oe.BREV,Oe.PRV],conditions:[dt.INCL],limitations:[rt.GRNT,rt.MRCM],catégorie:Sr.CODE},"ms-rl":{droits:[Oe.CMRC,Oe.ADPT,Oe.PRTG,Oe.BREV,Oe.PRV],conditions:[dt.SRCE,dt.INCL,dt.ÉGAL],limitations:[rt.GRNT,rt.MRCM],catégorie:Sr.CODE},"mulanpsl-2_0":{droits:[Oe.CMRC,Oe.ADPT,Oe.PRTG,Oe.BREV,Oe.PRV],conditions:[dt.INCL],limitations:[rt.RSP,rt.MRCM,rt.GRNT],catégorie:Sr.CODE},ncsa:{droits:[Oe.CMRC,Oe.ADPT,Oe.PRTG,Oe.PRV],conditions:[dt.INCL],limitations:[rt.RSP,rt.GRNT],catégorie:Sr.CODE},"osl-3_0":{droits:[Oe.CMRC,Oe.PRTG,Oe.ADPT,Oe.BREV,Oe.PRV],conditions:[dt.INCL,dt.SRCE,dt.CHNG,dt.USGR,dt.ÉGAL],limitations:[rt.MRCM,rt.RSP,rt.GRNT],catégorie:Sr.CODE},postgresql:{droits:[Oe.CMRC,Oe.ADPT,Oe.PRTG,Oe.PRV],conditions:[dt.INCL],limitations:[rt.RSP,rt.GRNT],catégorie:Sr.CODE},unlicence:{droits:[Oe.PRV,Oe.CMRC,Oe.ADPT,Oe.PRTG],conditions:[],limitations:[rt.RSP,rt.GRNT],catégorie:Sr.CODE},"upl-1_0":{droits:[Oe.CMRC,Oe.ADPT,Oe.PRTG,Oe.BREV,Oe.PRV],conditions:[dt.INCL],limitations:[rt.RSP,rt.GRNT],catégorie:Sr.CODE},vim:{droits:[Oe.CMRC,Oe.ADPT,Oe.PRTG,Oe.PRV],conditions:[dt.INCL,dt.CHNG,dt.SRCE,dt.ÉGAL],limitations:[],catégorie:Sr.CODE},wtfpl:{droits:[Oe.CMRC,Oe.ADPT,Oe.PRTG,Oe.PRV],conditions:[],limitations:[],catégorie:Sr.CODE},zlib:{droits:[Oe.CMRC,Oe.ADPT,Oe.PRTG,Oe.PRV],conditions:[dt.INCL,dt.CHNG],limitations:[rt.RSP,rt.GRNT],catégorie:Sr.CODE},"ofl-1_1":{droits:[Oe.PRV,Oe.CMRC,Oe.ADPT,Oe.PRTG],conditions:[dt.INCL,dt.ÉGAL],limitations:[rt.RSP,rt.GRNT],catégorie:Sr.AUTRE}};class Tve{client;événements;prêt;perroquet;constructor({client:e}){this.client=e,this.prêt=!1,this.événements=new Q1,this.initialiser()}async initialiser(){this.prêt=!0,this.événements.emit("prêt")}async attendrePrêt(){if(!this.prêt)return new Promise(e=>{const r=()=>{e(),this.événements.off("prêt",r)};this.événements.on("prêt",r)})}async suivreLicences({f:e}){if(await e($At),await this.attendrePrêt(),this.perroquet){const r=async n=>await e(Object.fromEntries(n.map(i=>[i.code,i])));return await this.perroquet.உறுப்படிகளை_கேள்ளு({செ:r,பரிந்துரைகள்:"எனது"})}return Li}async suggérerLicence({code:e,infoLicence:r}){await this.attendrePrêt(),this.perroquet&&await this.perroquet.பரிந்துரையு({பரிந்துரை:{code:e,...r}})}async effacerSuggestionLicence({idÉlément:e}){await this.attendrePrêt(),this.perroquet&&await this.perroquet.பரிந்துரையை_நீக்கு({அடையாளம்:e})}async suivreSuggestionsLicences({f:e}){return await this.attendrePrêt(),this.perroquet?await this.perroquet.பரிந்துரைகளை_கேள்ளு({செ:e}):{fOublier:Li,fChangerProfondeur:Li}}async approuverLicence({suggestion:e}){await this.attendrePrêt(),this.perroquet&&await this.perroquet.அங்கீகரி({பரிந்துரை:e})}}He([ot],Tve.prototype,"suivreLicences",null);const kve=t=>{let e,r;try{[e,r]=t.split("/")}catch{return!1}return!r||!hle(e)?!1:{cid:e,fichier:r}};class UAt{client;requêtes;fsOublier;événements;constructor({client:e}){this.client=e,this.requêtes=[],this.fsOublier={},this.événements=new qi.EventEmitter}async épinglerBd({id:e,récursif:r=!1,fichiers:n=!0}){await this.directementÉpinglée({id:e})||this._épingler({id:e,récursif:r,fichiers:n})}async désépinglerBd({id:e}){await Promise.all(this.requêtes.filter(n=>n.id===e).map(async n=>await n.fOublier()));const r=this.requêtes.filter(n=>n.parent===e);this.requêtes=this.requêtes.filter(n=>n.id!==e),this.requêtes=this.requêtes.filter(n=>n.parent!==e),await Promise.all(r.map(async n=>{this.requêtes.filter(i=>i.id===n.id&&i.parent!==e).length||await this.désépinglerBd({id:n.id})})),this.événements.emit("changement épingles")}async épinglée({id:e}){return this.requêtes.some(r=>r.id===e)}async épingléeParParent({id:e,parent:r}){return this.requêtes.some(n=>n.id===e&&n.parent===r)}async directementÉpinglée({id:e}){return await this.épingléeParParent({id:e})}async épingles(){return new Set(this.requêtes.map(e=>e.id))}async suivreÉpingles({f:e}){const r=async()=>{const n=await this.épingles();return await e(n)};return this.événements.on("changement épingles",r),async()=>{this.événements.off("changement épingles",r)}}async _épingler({id:e,récursif:r,fichiers:n,parent:i}){if(await this.épingléeParParent({id:e,parent:i}))return;const{bd:s,fOublier:a}=await this.client.ouvrirBd({id:e});if(this.requêtes.push({id:e,parent:i,fOublier:a}),this.événements.emit("changement épingles"),r){const o=async c=>{let l=[];typeof c=="object"?(l=Object.values(c).filter(f=>typeof f=="string"),l.push(...Object.keys(c).filter(f=>typeof f=="string"))):Array.isArray(c)?l=c:typeof c=="string"&&(l=[c]);const u=l.filter(f=>to(f));if(n){const f=l.filter(d=>kve(d)&&!u.includes(d)),{sfip:h}=await this.client.attendreSfipEtOrbite();f.forEach(async d=>{for await(const p of h.pins.add(Dt.parse(d.split("/")[0])));const g=async()=>{try{await h.pins.rm(Dt.parse(d))}catch{}};this.requêtes.push({id:d,parent:e,fOublier:g}),this.événements.emit("changement épingles")})}await Promise.all(u.map(async f=>await this._épingler({id:f,récursif:r,fichiers:n,parent:e})))};if(s.type==="keyvalue"){const c=await this.client.suivreBdDic({id:e,f:o});this.fsOublier[e]=c}else if(s.type==="ordered-keyvalue"){const c=await this.client.suivreBdDicOrdonnée({id:e,f:o});this.fsOublier[e]=c}else if(s.type==="set"){const c=await this.client.suivreBdListe({id:e,f:o});this.fsOublier[e]=c}}}async toutDésépingler(){const e=await this.épingles();await Promise.all([...e].map(async r=>{await this.désépinglerBd({id:r})}))}async fermer(){await Promise.all(Object.values(this.fsOublier).map(e=>e()))}}const zt={type:"object",additionalProperties:{type:"string"},required:[]},qf={type:"object",additionalProperties:!0,required:[]};class Cve{client;clef;typeBd;constructor({client:e,clef:r,typeBd:n}){this.client=e,this.clef=r,this.typeBd=n}async obtIdBd(){const{idCompte:e}=await this.client.attendreInitialisée(),r=await this.client.obtIdBd({nom:this.clef,racine:e,type:this.typeBd});if(!r)throw new Error("Mal initialisé");return r}}class g0 extends Cve{schémaBdPrincipale;constructor({client:e,clef:r,schémaBdPrincipale:n}){super({client:e,clef:r,typeBd:"keyvalue"}),this.schémaBdPrincipale=n}async obtBd(){const e=await this.obtIdBd();return await this.client.ouvrirBdTypée({id:e,type:"keyvalue",schéma:this.schémaBdPrincipale})}async suivreBdPrincipale({idCompte:e,f:r}){return await fs({fRacine:async({fSuivreRacine:n})=>await this.suivreIdBd({f:n,idCompte:e}),f:hs(r),fSuivre:async({id:n,fSuivreBd:i})=>await this.client.suivreBdDic({id:n,schéma:this.schémaBdPrincipale,f:i})})}async suivreSousBdDic({idCompte:e,clef:r,schéma:n,f:i}){return await fs({fRacine:async({fSuivreRacine:s})=>await this.suivreIdBd({f:s,idCompte:e}),f:hs(i),fSuivre:async({id:s,fSuivreBd:a})=>await this.client.suivreBdDicDeClef({id:s,clef:r,schéma:n,f:a})})}async suivreSousBdListe({idCompte:e,clef:r,schéma:n,f:i}){return await fs({fRacine:async({fSuivreRacine:s})=>await this.suivreIdBd({f:s,idCompte:e}),f:hs(i),fSuivre:async({id:s,fSuivreBd:a})=>await this.client.suivreBdListeDeClef({id:s,clef:r,f:a,schéma:n,renvoyerValeur:!0})})}async suivreIdBd({f:e,idCompte:r}){return await fs({fRacine:async({fSuivreRacine:n})=>r?(await n(r),Li):await this.client.suivreIdCompte({f:n}),f:hs(e),fSuivre:async({id:n,fSuivreBd:i})=>await this.client.suivreBd({id:n,type:"keyvalue",f:async s=>{const a=await this.client.obtIdBd({nom:this.clef,racine:s,type:"keyvalue"});return await i(a)}})})}}He([ot],g0.prototype,"suivreBdPrincipale",null);He([ot],g0.prototype,"suivreSousBdDic",null);He([ot],g0.prototype,"suivreSousBdListe",null);He([ot],g0.prototype,"suivreIdBd",null);class e2 extends Cve{schémaBdPrincipale;constructor({client:e,clef:r,schémaBdPrincipale:n}){super({client:e,clef:r,typeBd:"set"}),this.schémaBdPrincipale=n}async obtBd(){const e=await this.obtIdBd();return await this.client.ouvrirBdTypée({id:e,type:"set",schéma:this.schémaBdPrincipale})}async suivreBdPrincipale({idCompte:e,f:r}){return await fs({fRacine:async({fSuivreRacine:n})=>await this.suivreIdBd({f:n,idCompte:e}),f:hs(r),fSuivre:async({id:n,fSuivreBd:i})=>await this.client.suivreBdListe({id:n,f:i,schéma:this.schémaBdPrincipale,renvoyerValeur:!0})})}async suivreIdBd({f:e,idCompte:r}){return await fs({fRacine:async({fSuivreRacine:n})=>r?(await n(r),Li):await this.client.suivreIdCompte({f:n}),f:hs(e),fSuivre:async({id:n,fSuivreBd:i})=>await this.client.suivreBd({id:n,type:"keyvalue",schéma:K9,f:async()=>{const s=await this.client.obtIdBd({nom:this.clef,racine:n,type:"set"});return await i(s)}})})}}He([ot],e2.prototype,"suivreBdPrincipale",null);He([ot],e2.prototype,"suivreIdBd",null);const VAt=500*1e3,jAt=1500*1e3,wB={type:"object",properties:{initialisé:{type:"boolean",nullable:!0},image:{type:"string",nullable:!0},contacts:{type:"string",nullable:!0},noms:{type:"string",nullable:!0}},required:[]},_B={type:"object",properties:{type:{type:"string"},contact:{type:"string"}},required:["contact","type"]};class u8 extends g0{constructor({client:e}){super({client:e,clef:"profil",schémaBdPrincipale:wB})}async épingler(){const e=await this.obtIdBd();await this.client.épingles.épinglerBd({id:e,récursif:!0,fichiers:!0})}async initialiser(){const e=await this.obtIdBd(),{bd:r,fOublier:n}=await this.client.ouvrirBdTypée({id:e,type:"keyvalue",schéma:wB});await r.set("initialisé",!0),await n()}async suivreInitialisé({f:e,idCompte:r}){return await this.suivreBdPrincipale({idCompte:r,f:async n=>await e(!!n.initialisé)})}async suivreCourriel({f:e,idCompte:r}){return await this.suivreContacts({idCompte:r,f:async n=>await e(n.find(i=>i.type=="courriel")?.contact||null)})}async sauvegarderCourriel({courriel:e}){await this.sauvegarderContact({type:"courriel",contact:e})}async effacerCourriel(){await this.effacerContact({type:"courriel"})}async suivreContacts({f:e,idCompte:r}){return await this.suivreSousBdListe({idCompte:r,clef:"contacts",schéma:_B,f:e})}async sauvegarderContact({type:e,contact:r}){const n=await this.obtIdBd(),i=await this.client.obtIdBd({nom:"contacts",racine:n,type:"set"});if(!i)throw new Error(`Permission de modification refusée pour BD ${n}.`);const{bd:s,fOublier:a}=await this.client.ouvrirBdTypée({id:i,type:"set",schéma:_B});await s.add({type:e,contact:r}),await a()}async effacerContact({type:e,contact:r}){const n=await this.obtIdBd(),i=await this.client.obtIdBd({nom:"contacts",racine:n,type:"set"});if(!i)throw new Error(`Permission de modification refusée pour BD ${n}.`);const{bd:s,fOublier:a}=await this.client.ouvrirBdTypée({id:i,type:"set",schéma:_B}),c=(await s.all()).filter(l=>l.value.type===e&&(r===void 0||l.value.contact===r));await Promise.all(c.map(async l=>await s.del(l.value))),await a()}async suivreNoms({f:e,idCompte:r}){return await this.suivreSousBdDic({idCompte:r,clef:"noms",schéma:zt,f:e})}async sauvegarderNom({langue:e,nom:r}){return await this.sauvegarderNoms({noms:{[e]:r}})}async sauvegarderNoms({noms:e}){const r=await this.obtIdBd(),n=await this.client.obtIdBd({nom:"noms",racine:r,type:"keyvalue"});if(!n)throw new Error(`Permission de modification refusée pour BD ${r}.`);const{bd:i,fOublier:s}=await this.client.ouvrirBdTypée({id:n,type:"keyvalue",schéma:zt});for(const[a,o]of Object.entries(e))await i.set(a,o);await s()}async effacerNom({langue:e}){const r=await this.obtIdBd(),n=await this.client.obtIdBd({nom:"noms",racine:r,type:"keyvalue"});if(!n)throw new Error(`Permission de modification refusée pour BD ${r}.`);const{bd:i,fOublier:s}=await this.client.ouvrirBdTypée({id:n,type:"keyvalue",schéma:zt});await i.del(e),await s()}async sauvegarderImage({image:e}){if(e.contenu.byteLength>VAt)throw new Error("Taille maximale excédée");const r=await this.client.ajouterÀSFIP(e),{bd:n,fOublier:i}=await this.obtBd();await n.set("image",r),await i()}async effacerImage(){const{bd:e,fOublier:r}=await this.obtBd();await e.del("image"),await r()}async suivreImage({f:e,idCompte:r}){return await fs({fRacine:async({fSuivreRacine:n})=>await this.suivreIdBd({f:n,idCompte:r}),f:hs(e),fSuivre:async({id:n,fSuivreBd:i})=>await this.client.suivreBd({id:n,type:"keyvalue",schéma:wB,f:async s=>{const a=await s.get("image");if(a){const o=await this.client.obtFichierSFIP({id:a,max:jAt});return await i(o)}else return await i(null)}})})}}He([ot],u8.prototype,"suivreCourriel",null);He([ot],u8.prototype,"suivreContacts",null);He([ot],u8.prototype,"suivreNoms",null);He([ot],u8.prototype,"suivreImage",null);function zAt(t){return t[Symbol.asyncIterator]!=null}function Ive(t){if(zAt(t))return(async()=>{let n=new Uint8Array(0);for await(const i of t)n=Yi([n,i],n.length+i.length);return n})();const e=[];let r=0;for(const n of t)e.push(n),r+=n.byteLength;return Yi(e,r)}var Rve={exports:{}};(function(t,e){(function(r,n){n()})(It,function(){function r(l,u){return typeof u>"u"?u={autoBom:!1}:typeof u!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),u={autoBom:!u}),u.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(l.type)?new Blob(["\uFEFF",l],{type:l.type}):l}function n(l,u,f){var h=new XMLHttpRequest;h.open("GET",l),h.responseType="blob",h.onload=function(){c(h.response,u,f)},h.onerror=function(){console.error("could not download file")},h.send()}function i(l){var u=new XMLHttpRequest;u.open("HEAD",l,!1);try{u.send()}catch{}return 200<=u.status&&299>=u.status}function s(l){try{l.dispatchEvent(new MouseEvent("click"))}catch{var u=document.createEvent("MouseEvents");u.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),l.dispatchEvent(u)}}var a=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof It=="object"&&It.global===It?It:void 0,o=a.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),c=a.saveAs||(typeof window!="object"||window!==a?function(){}:"download"in HTMLAnchorElement.prototype&&!o?function(l,u,f){var h=a.URL||a.webkitURL,d=document.createElement("a");u=u||l.name||"download",d.download=u,d.rel="noopener",typeof l=="string"?(d.href=l,d.origin===location.origin?s(d):i(d.href)?n(l,u,f):s(d,d.target="_blank")):(d.href=h.createObjectURL(l),setTimeout(function(){h.revokeObjectURL(d.href)},4e4),setTimeout(function(){s(d)},0))}:"msSaveOrOpenBlob"in navigator?function(l,u,f){if(u=u||l.name||"download",typeof l!="string")navigator.msSaveOrOpenBlob(r(l,f),u);else if(i(l))n(l,u,f);else{var h=document.createElement("a");h.href=l,h.target="_blank",setTimeout(function(){s(h)})}}:function(l,u,f,h){if(h=h||open("","_blank"),h&&(h.document.title=h.document.body.innerText="downloading..."),typeof l=="string")return n(l,u,f);var d=l.type==="application/octet-stream",g=/constructor/i.test(a.HTMLElement)||a.safari,p=/CriOS\/[\d]+/.test(navigator.userAgent);if((p||d&&g||o)&&typeof FileReader<"u"){var m=new FileReader;m.onloadend=function(){var _=m.result;_=p?_:_.replace(/^data:[^;]*;/,"data:attachment/file;"),h?h.location.href=_:location=_,h=null},m.readAsDataURL(l)}else{var y=a.URL||a.webkitURL,v=y.createObjectURL(l);h?h.location=v:location.href=v,h=null,setTimeout(function(){y.revokeObjectURL(v)},4e4)}});a.saveAs=c.saveAs=c,t.exports=c})})(Rve);var qAt=Rve.exports;const HAt=si(qAt),{saveAs:WAt}=HAt,Ta={type:"object",properties:{type:{type:"string"},métadonnées:{type:"string",nullable:!0},licence:{type:"string"},licenceContenu:{type:"string",nullable:!0},image:{type:"string",nullable:!0},noms:{type:"string"},descriptions:{type:"string"},tableaux:{type:"string"},motsClefs:{type:"string"},nuées:{type:"string"},statut:{type:"object",properties:{statut:{type:"string"},idNouvelle:{type:"string",nullable:!0}},required:["statut"]},copiéDe:{type:"object",properties:{id:{type:"string"}},required:["id"]}},required:["type","licence","noms","descriptions","tableaux","motsClefs","nuées","statut","copiéDe"]},KAt={type:"object",properties:{clef:{type:"string"}},required:["clef"]},Wc={type:"object",additionalProperties:KAt,required:[]},Pw={type:"string"},xB={type:"string"},EB={type:"string"},GAt=500*1e3,YAt=1500*1e3;class Zi extends e2{verrouBdUnique;constructor({client:e}){super({client:e,clef:"bds",schémaBdPrincipale:Pw}),this.verrouBdUnique=new kc}async épingler(){await this.client.épingles.épinglerBd({id:await this.obtIdBd(),récursif:!1,fichiers:!1})}async suivreBds({f:e,idCompte:r}){return await this.suivreBdPrincipale({idCompte:r,f:e})}async créerBd({licence:e,licenceContenu:r,épingler:n=!0}){const i=await this.client.créerBdIndépendante({type:"keyvalue",optionsAccès:{address:void 0,write:await this.client.obtIdCompte()}});n&&await this.client.favoris.épinglerFavori({idObjet:i});const{bd:s,fOublier:a}=await this.client.ouvrirBdTypée({id:i,type:"keyvalue",schéma:Ta});await s.set("type","bd"),await s.set("licence",e),r&&await s.set("licenceContenu",r);const c={address:s.access.address},l=await this.client.créerBdIndépendante({type:"keyvalue",optionsAccès:c});await s.set("métadonnées",l);const u=await this.client.créerBdIndépendante({type:"keyvalue",optionsAccès:c});await s.set("noms",u);const f=await this.client.créerBdIndépendante({type:"keyvalue",optionsAccès:c});await s.set("descriptions",f);const h=await this.client.créerBdIndépendante({type:"ordered-keyvalue",optionsAccès:c});await s.set("tableaux",h);const d=await this.client.créerBdIndépendante({type:"set",optionsAccès:c});await s.set("motsClefs",d);const g=await this.client.créerBdIndépendante({type:"set",optionsAccès:c});await s.set("nuées",g),await s.set("statut",{statut:"active"});const{bd:p,fOublier:m}=await this.client.ouvrirBdTypée({id:await this.obtIdBd(),type:"set",schéma:Pw});return await p.add(i),m(),await a(),i}async ajouterÀMesBds({idBd:e}){const{bd:r,fOublier:n}=await this.client.ouvrirBdTypée({id:await this.obtIdBd(),type:"set",schéma:Pw});await r.add(e),await n()}async enleverDeMesBds({idBd:e}){const{bd:r,fOublier:n}=await this.client.ouvrirBdTypée({id:await this.obtIdBd(),type:"set",schéma:Pw});await r.del(e),await n()}async copierBd({idBd:e,copierDonnées:r=!0}){const{bd:n,fOublier:i}=await this.client.ouvrirBdTypée({id:e,type:"keyvalue",schéma:Ta}),s=await n.get("licence"),a=await n.get("licenceContenu");if(!s)throw new Error(`Aucune licence trouvée sur la BD source ${e}.`);const o=await this.créerBd({licence:s,licenceContenu:a}),{bd:c,fOublier:l}=await this.client.ouvrirBdTypée({id:o,type:"keyvalue",schéma:Ta}),u=await n.get("métadonnées");if(u){const{bd:A,fOublier:C}=await this.client.ouvrirBdTypée({id:u,type:"keyvalue",schéma:qf}),R=await A.allAsJSON();await C(),await this.sauvegarderMétadonnéesBd({idBd:o,métadonnées:R})}const f=await n.get("noms");if(f){const{bd:A,fOublier:C}=await this.client.ouvrirBdTypée({id:f,type:"keyvalue",schéma:zt}),R=await A.allAsJSON();await C(),await this.sauvegarderNomsBd({idBd:o,noms:R})}const h=await n.get("descriptions");if(h){const{bd:A,fOublier:C}=await this.client.ouvrirBdTypée({id:h,type:"keyvalue",schéma:zt}),R=await A.allAsJSON();await C(),await this.sauvegarderDescriptionsBd({idBd:o,descriptions:R})}const d=await n.get("motsClefs");if(d){const{bd:A,fOublier:C}=await this.client.ouvrirBdTypée({id:d,type:"set",schéma:xB}),R=(await A.all()).map(M=>M.value);await C(),await this.ajouterMotsClefsBd({idBd:o,idsMotsClefs:R})}const g=await n.get("nuées");if(g){const{bd:A,fOublier:C}=await this.client.ouvrirBdTypée({id:g,type:"set",schéma:EB}),R=(await A.all()).map(M=>M.value);await C(),await this.rejoindreNuées({idBd:o,idsNuées:R})}const p=await n.get("tableaux"),m=await c.get("tableaux");if(!m)throw new Error("Erreur d'initialisation.");const{bd:y,fOublier:v}=await this.client.ouvrirBdTypée({id:m,type:"ordered-keyvalue",schéma:Wc});if(p){const{bd:A,fOublier:C}=await this.client.ouvrirBdTypée({id:p,type:"ordered-keyvalue",schéma:Wc}),R=await A.all();await C();for(const{key:M,value:N}of R){const Y=await this.client.tableaux.copierTableau({id:M,idBd:o,copierDonnées:r});await y.set(Y,N)}}const _=await n.get("statut")||{statut:"active"};await c.set("statut",_);const x=await n.get("image");return x&&await c.set("image",x),await c.set("copiéDe",{id:e}),await Promise.all([i(),v(),l()]),o}async créerBdDeSchéma({schéma:e}){const{tableaux:r,motsClefs:n,nuées:i,licence:s,licenceContenu:a,statut:o}=e,c=await this.créerBd({licence:s,licenceContenu:a});n&&await this.ajouterMotsClefsBd({idBd:c,idsMotsClefs:n}),i&&await this.rejoindreNuées({idBd:c,idsNuées:i}),o&&await this.changerStatutBd({idBd:c,statut:o});for(const l of r){const{cols:u,clef:f}=l,h=await this.ajouterTableauBd({idBd:c,clefTableau:f});for(const d of u){const{idColonne:g,idVariable:p,index:m,optionnelle:y}=d;if(await this.client.tableaux.ajouterColonneTableau({idTableau:h,idVariable:p,idColonne:g}),m&&await this.client.tableaux.changerColIndex({idTableau:h,idColonne:g,val:!0}),!y){const v={typeRègle:"existe",détails:{}};await this.client.tableaux.ajouterRègleTableau({idTableau:h,idColonne:g,règle:v})}}}return c}async suivreParent({idBd:e,f:r}){return await this.client.suivreBd({id:e,f:async n=>{const i=await n.get("copiéDe");await r(i)},type:"keyvalue",schéma:Ta})}async suivreNuéesBd({idBd:e,f:r}){return await this.client.suivreBdListeDeClef({id:e,clef:"nuées",schéma:{type:"string"},f:r})}async rechercherBdsParMotsClefs({motsClefs:e,f:r,idCompte:n}){const i=async a=>await this.suivreBds({f:a,idCompte:n}),s=async(a,o)=>{const c=l=>{const u=e.every(f=>l.includes(f));o(u)};return await this.suivreMotsClefsBd({idBd:a,f:c})};return await this.client.suivreBdsSelonCondition({fListe:i,fCondition:s,f:r})}async rechercherBdsParNuée({idNuée:e,f:r,idCompte:n}){const i=async a=>await this.suivreBds({f:a,idCompte:n}),s=async(a,o)=>{const c=async l=>{o(!!l&&l.includes(e))};return await this.suivreNuéesBd({idBd:a,f:c})};return await this.client.suivreBdsSelonCondition({fListe:i,fCondition:s,f:r})}async combinerBds({idBdBase:e,idBd2:r}){const n=async a=>await Sn(async o=>await this.suivreTableauxBd({idBd:a,f:o})),i=await n(e),s=await n(r);for(const a of s){const{id:o,clef:c}=a;if(c){const l=i.find(u=>u.clef===c)?.id;l&&await this.client.tableaux.combinerDonnées({idTableauBase:l,idTableau2:o})}}}async suivreIdTableauParClef({idBd:e,clef:r,f:n}){const i=async s=>{const a=s.find(o=>o.clef===r);await n(a?.id)};return await this.suivreTableauxBd({idBd:e,f:i})}async suivreBdUnique({schéma:e,idNuéeUnique:r,f:n}){const i="bdUnique: "+r,s=new Set,a=async c=>{let l;await this.verrouBdUnique.acquire(r);const u=await this.client.obtDeStockageLocal({clef:i});switch(c.length){case 0:{u?l=u:(l=await this.créerBdDeSchéma({schéma:e}),await this.client.sauvegarderAuStockageLocal({clef:i,val:l}));break}case 1:{l=c[0],await this.client.sauvegarderAuStockageLocal({clef:i,val:l}),u&&l!==u&&(await this.combinerBds({idBdBase:l,idBd2:u}),await this.effacerBd({idBd:u}));break}default:{u&&(c=[...new Set([...c,u])]),l=c.sort()[0],await this.client.sauvegarderAuStockageLocal({clef:i,val:l});for(const f of c.slice(1))s.has(f)||(s.add(f),await this.combinerBds({idBdBase:l,idBd2:f}),await this.effacerBd({idBd:f}));break}}this.verrouBdUnique.release(r),await n(l)};return await this.rechercherBdsParNuée({idNuée:r,f:a})}async suivreIdTableauParClefDeBdUnique({schémaBd:e,idNuéeUnique:r,clefTableau:n,f:i}){return await fs({fRacine:async({fSuivreRacine:o})=>await this.suivreBdUnique({schéma:e,idNuéeUnique:r,f:o}),f:i,fSuivre:async({id:o,fSuivreBd:c})=>await this.suivreIdTableauParClef({idBd:o,clef:n,f:c})})}async suivreDonnéesDeTableauUnique({schémaBd:e,idNuéeUnique:r,clefTableau:n,f:i}){return await fs({fRacine:async({fSuivreRacine:c})=>await this.suivreIdTableauParClefDeBdUnique({schémaBd:e,idNuéeUnique:r,clefTableau:n,f:async l=>{l&&await c(l)}}),f:async c=>await i(c||[]),fSuivre:async({id:c,fSuivreBd:l})=>await this.client.tableaux.suivreDonnées({idTableau:c,f:l})})}async ajouterÉlémentÀTableauUnique({schémaBd:e,idNuéeUnique:r,clefTableau:n,vals:i}){const s=await Sn(async a=>await this.suivreIdTableauParClefDeBdUnique({schémaBd:e,idNuéeUnique:r,clefTableau:n,f:hs(a)}));return await this.client.tableaux.ajouterÉlément({idTableau:s,vals:i})}async modifierÉlémentDeTableauUnique({vals:e,schémaBd:r,idNuéeUnique:n,clefTableau:i,idÉlément:s}){const a=await Sn(async o=>await this.suivreIdTableauParClefDeBdUnique({schémaBd:r,idNuéeUnique:n,clefTableau:i,f:c=>{c&&o(c)}}),o=>!!o);return await this.client.tableaux.modifierÉlément({idTableau:a,vals:e,idÉlément:s})}async effacerÉlémentDeTableauUnique({schémaBd:e,idNuéeUnique:r,clefTableau:n,idÉlément:i}){const s=await Sn(async a=>await this.suivreIdTableauParClefDeBdUnique({schémaBd:e,idNuéeUnique:r,clefTableau:n,f:o=>{o&&a(o)}}),a=>!!a);return await this.client.tableaux.effacerÉlément({idTableau:s,idÉlément:i})}async suivreDonnéesDeTableauParClef({idBd:e,clefTableau:r,f:n}){const i=await Sn(async s=>await this.suivreIdTableauParClef({idBd:e,clef:r,f:hs(s)}),s=>!!s);return await this.client.tableaux.suivreDonnées({idTableau:i,f:n})}async ajouterÉlémentÀTableauParClef({idBd:e,clefTableau:r,vals:n}){const i=await Sn(async s=>await this.suivreIdTableauParClef({idBd:e,clef:r,f:hs(s)}));return await this.client.tableaux.ajouterÉlément({idTableau:i,vals:n})}async modifierÉlémentDeTableauParClef({idBd:e,clefTableau:r,idÉlément:n,vals:i}){const s=await Sn(async a=>await this.suivreIdTableauParClef({idBd:e,clef:r,f:hs(a)}));return await this.client.tableaux.modifierÉlément({idTableau:s,vals:i,idÉlément:n})}async effacerÉlémentDeTableauParClef({idBd:e,clefTableau:r,idÉlément:n}){const i=await Sn(async s=>await this.suivreIdTableauParClef({idBd:e,clef:r,f:hs(s)}));this.client.tableaux.effacerÉlément({idTableau:i,idÉlément:n})}async sauvegarderMétadonnéesBd({idBd:e,métadonnées:r}){const n=await this.client.obtIdBd({nom:"métadonnées",racine:e,type:"keyvalue"});if(!n)throw new Error(`Permission de modification refusée pour BD ${e}.`);const{bd:i,fOublier:s}=await this.client.ouvrirBdTypée({id:n,type:"keyvalue",schéma:qf});for(const a in r)await i.set(a,r[a]);await s()}async sauvegarderMétadonnéeBd({idBd:e,clef:r,métadonnée:n}){const i=await this.client.obtIdBd({nom:"métadonnées",racine:e,type:"keyvalue"});if(!i)throw new Error(`Permission de modification refusée pour BD ${e}.`);const{bd:s,fOublier:a}=await this.client.ouvrirBdTypée({id:i,type:"keyvalue",schéma:qf});await s.set(r,n),await a()}async effacerMétadonnéeBd({idBd:e,clef:r}){const n=await this.client.obtIdBd({nom:"métadonnées",racine:e,type:"keyvalue"});if(!n)throw new Error(`Permission de modification refusée pour BD ${e}.`);const{bd:i,fOublier:s}=await this.client.ouvrirBdTypée({id:n,type:"keyvalue",schéma:qf});await i.del(r),await s()}async suivreMétadonnéesBd({idBd:e,f:r}){return await this.client.suivreBdDicDeClef({id:e,clef:"métadonnées",schéma:qf,f:r})}async sauvegarderNomsBd({idBd:e,noms:r}){const n=await this.client.obtIdBd({nom:"noms",racine:e,type:"keyvalue"});if(!n)throw new Error(`Permission de modification refusée pour BD ${e}.`);const{bd:i,fOublier:s}=await this.client.ouvrirBdTypée({id:n,type:"keyvalue",schéma:zt});for(const a in r)await i.set(a,r[a]);await s()}async sauvegarderNomBd({idBd:e,langue:r,nom:n}){const i=await this.client.obtIdBd({nom:"noms",racine:e,type:"keyvalue"});if(!i)throw new Error(`Permission de modification refusée pour BD ${e}.`);const{bd:s,fOublier:a}=await this.client.ouvrirBdTypée({id:i,type:"keyvalue",schéma:zt});await s.set(r,n),await a()}async effacerNomBd({idBd:e,langue:r}){const n=await this.client.obtIdBd({nom:"noms",racine:e,type:"keyvalue"});if(!n)throw new Error(`Permission de modification refusée pour BD ${e}.`);const{bd:i,fOublier:s}=await this.client.ouvrirBdTypée({id:n,type:"keyvalue",schéma:zt});await i.del(r),await s()}async sauvegarderDescriptionsBd({idBd:e,descriptions:r}){const n=await this.client.obtIdBd({nom:"descriptions",racine:e,type:"keyvalue"});if(!n)throw new Error(`Permission de modification refusée pour BD ${e}.`);const{bd:i,fOublier:s}=await this.client.ouvrirBdTypée({id:n,type:"keyvalue",schéma:zt});for(const a in r)await i.set(a,r[a]);await s()}async sauvegarderDescriptionBd({idBd:e,langue:r,description:n}){const i=await this.client.obtIdBd({nom:"descriptions",racine:e,type:"keyvalue"});if(!i)throw new Error(`Permission de modification refusée pour BD ${e}.`);const{bd:s,fOublier:a}=await this.client.ouvrirBdTypée({id:i,type:"keyvalue",schéma:zt});await s.set(r,n),await a()}async effacerDescriptionBd({idBd:e,langue:r}){const n=await this.client.obtIdBd({nom:"descriptions",racine:e,type:"keyvalue"});if(!n)throw new Error(`Permission de modification refusée pour BD ${e}.`);const{bd:i,fOublier:s}=await this.client.ouvrirBdTypée({id:n,type:"keyvalue",schéma:zt});await i.del(r),await s()}async changerLicenceBd({idBd:e,licence:r}){const{bd:n,fOublier:i}=await this.client.ouvrirBdTypée({id:e,type:"keyvalue",schéma:Ta});await n.set("licence",r),await i()}async changerLicenceContenuBd({idBd:e,licenceContenu:r}){const{bd:n,fOublier:i}=await this.client.ouvrirBdTypée({id:e,type:"keyvalue",schéma:Ta});r?await n.set("licenceContenu",r):await n.del("licenceContenu"),await i()}async ajouterMotsClefsBd({idBd:e,idsMotsClefs:r}){Array.isArray(r)||(r=[r]);const n=await this.client.obtIdBd({nom:"motsClefs",racine:e,type:"set"});if(!n)throw new Error(`Permission de modification refusée pour BD ${e}.`);const{bd:i,fOublier:s}=await this.client.ouvrirBdTypée({id:n,type:"set",schéma:xB});for(const a of r)(await i.all()).map(c=>c.value).includes(a)||await i.add(a);await s()}async effacerMotClefBd({idBd:e,idMotClef:r}){const n=await this.client.obtIdBd({nom:"motsClefs",racine:e,type:"set"});if(!n)throw new Error(`Permission de modification refusée pour BD ${e}.`);const{bd:i,fOublier:s}=await this.client.ouvrirBdTypée({id:n,type:"set",schéma:xB});await i.del(r),await s()}async rejoindreNuées({idBd:e,idsNuées:r}){Array.isArray(r)||(r=[r]);const n=await this.client.obtIdBd({nom:"nuées",racine:e,type:"set"});if(!n)throw new Error(`Permission de modification refusée pour BD ${e}.`);const{bd:i,fOublier:s}=await this.client.ouvrirBdTypée({id:n,type:"set",schéma:EB});for(const a of r)(await i.all()).map(c=>c.value).includes(a)||await i.add(a);await s()}async quitterNuée({idBd:e,idNuée:r}){const n=await this.client.obtIdBd({nom:"nuée",racine:e,type:"set"});if(!n)throw new Error(`Permission de modification refusée pour BD ${e}.`);const{bd:i,fOublier:s}=await this.client.ouvrirBdTypée({id:n,type:"set",schéma:EB});await i.del(r),await s()}async ajouterTableauBd({idBd:e,clefTableau:r}){const n=await this.client.obtIdBd({nom:"tableaux",racine:e,type:"ordered-keyvalue"});if(!n)throw new Error(`Permission de modification refusée pour BD ${e}.`);const{bd:i,fOublier:s}=await this.client.ouvrirBdTypée({id:n,type:"ordered-keyvalue",schéma:Wc});r=r||rs();const a=await this.client.tableaux.créerTableau({idBd:e});return await i.set(a,{clef:r}),await s(),a}async effacerTableauBd({idBd:e,idTableau:r}){const n=await this.client.obtIdBd({nom:"tableaux",racine:e,type:"ordered-keyvalue"});if(!n)throw new Error(`Permission de modification refusée pour BD ${e}.`);const{bd:i,fOublier:s}=await this.client.ouvrirBdTypée({id:n,type:"ordered-keyvalue",schéma:Wc});await i.del(r),await s(),await this.client.tableaux.effacerTableau({idTableau:r})}async spécifierClefTableau({idBd:e,idTableau:r,clef:n}){const i=await this.client.obtIdBd({nom:"tableaux",racine:e,type:"ordered-keyvalue"});if(!i)throw new Error("Id Bd Tableau non obtenable.");const{bd:s,fOublier:a}=await this.client.ouvrirBdTypée({id:i,type:"ordered-keyvalue",schéma:Wc}),o=await s.get(r);o&&(o.value.clef=n,s.set(r,o.value)),await a()}async changerStatutBd({idBd:e,statut:r}){const{bd:n,fOublier:i}=await this.client.ouvrirBdTypée({id:e,type:"keyvalue",schéma:Ta});n.set("statut",r),await i()}async suivreStatutBd({idBd:e,f:r}){return await this.client.suivreBdDic({id:e,schéma:Ta,f:async n=>{if(n.statut)return await r(n.statut)}})}async marquerObsolète({idBd:e,idNouvelle:r}){const{bd:n,fOublier:i}=await this.client.ouvrirBdTypée({id:e,type:"keyvalue",schéma:Ta});n.set("statut",{statut:"obsolète",idNouvelle:r}),await i()}async marquerActive({idBd:e}){const{bd:r,fOublier:n}=await this.client.ouvrirBdTypée({id:e,type:"keyvalue",schéma:Ta});r.set("statut",{statut:"active"}),await n()}async marquerJouet({idBd:e}){const{bd:r,fOublier:n}=await this.client.ouvrirBdTypée({id:e,type:"keyvalue",schéma:Ta});r.set("statut",{statut:"jouet"}),await n()}async marquerInterne({idBd:e}){const{bd:r,fOublier:n}=await this.client.ouvrirBdTypée({id:e,type:"keyvalue",schéma:Ta});r.set("statut",{statut:"interne"}),await n()}async suivreLicenceBd({idBd:e,f:r}){return await this.client.suivreBd({id:e,type:"keyvalue",schéma:Ta,f:async n=>{const i=await n.get("licence");i&&await r(i)}})}async suivreLicenceContenuBd({idBd:e,f:r}){return await this.client.suivreBd({id:e,type:"keyvalue",schéma:Ta,f:async n=>{const i=await n.get("licenceContenu");await r(i)}})}async inviterAuteur({idBd:e,idCompteAuteur:r,rôle:n}){await this.client.donnerAccès({idBd:e,identité:r,rôle:n})}async sauvegarderImage({idBd:e,image:r}){if(r.contenu.byteLength>GAt)throw new Error("Taille maximale excédée");const n=await this.client.ajouterÀSFIP(r),{bd:i,fOublier:s}=await this.client.ouvrirBdTypée({id:e,type:"keyvalue",schéma:Ta});await i.set("image",n),await s()}async effacerImage({idBd:e}){const{bd:r,fOublier:n}=await this.client.ouvrirBdTypée({id:e,type:"keyvalue",schéma:Ta});await r.del("image"),await n()}async suivreImage({idBd:e,f:r}){return await this.client.suivreBd({id:e,type:"keyvalue",schéma:Ta,f:async n=>{const i=await n.get("image");if(!i)await r(null);else{const s=await this.client.obtFichierSFIP({id:i,max:YAt});await r(s)}}})}async suivreNomsBd({idBd:e,f:r}){return await this.client.suivreBdDicDeClef({id:e,clef:"noms",schéma:zt,f:r})}async suivreDescriptionsBd({idBd:e,f:r}){return await this.client.suivreBdDicDeClef({id:e,clef:"descriptions",schéma:zt,f:r})}async suivreMotsClefsBd({idBd:e,f:r}){return await this.client.suivreBdListeDeClef({id:e,clef:"motsClefs",schéma:{type:"string"},f:r})}async suivreTableauxBd({idBd:e,f:r}){const n=async i=>{const s=i.map(a=>({id:a.key,...a.value}));await r(s)};return await this.client.suivreBdDicOrdonnéeDeClef({id:e,clef:"tableaux",schéma:Wc,f:n})}async suivreScoreAccèsBd({idBd:e,f:r}){return r(Number.parseInt(e)),Li}async suivreScoreCouvertureBd({idBd:e,f:r}){return await bn({fListe:async a=>await this.suivreTableauxBd({idBd:e,f:o=>a(o.map(c=>c.id))}),f:async a=>{const o=a.reduce((l,u)=>l+u.numérateur,0),c=a.reduce((l,u)=>l+u.dénominateur,0);await r(c===0?void 0:o/c)},fBranche:async(a,o)=>{const c={},l=async()=>{const{cols:h,règles:d}=c;if(h!==void 0&&d!==void 0){const g=h.filter(y=>y.catégorie&&["numérique","catégorique"].includes(y.catégorie.catégorie)),p=g.length,m=g.filter(y=>d.some(v=>v.règle.règle.typeRègle!=="catégorie"&&v.colonne===y.id)).length;await o({numérateur:m,dénominateur:p})}},u=await this.client.tableaux.suivreColonnesTableau({idTableau:a,f:async h=>{c.cols=h,await l()},catégories:!0}),f=await this.client.tableaux.suivreRègles({idTableau:a,f:async h=>{c.règles=h,await l()}});return async()=>{await u(),await f()}}})}async suivreScoreValideBd({idBd:e,f:r}){return await bn({fListe:async a=>await this.suivreTableauxBd({idBd:e,f:o=>a(o.map(c=>c.id))}),f:async a=>{const o=a.reduce((l,u)=>l+u.numérateur,0),c=a.reduce((l,u)=>l+u.dénominateur,0);await r(c===0?void 0:o/c)},fBranche:async(a,o)=>{const c={},l=()=>{const{données:d,erreurs:g,cols:p}=c;if(d!==void 0&&g!==void 0&&p!==void 0){const m=p.filter(A=>A.catégorie&&["numérique","catégorique"].includes(A.catégorie.catégorie)),y=[],v=g.map(A=>({id:A.id,idColonne:A.erreur.règle.colonne})).filter(A=>y.find(R=>R.id===A.id&&R.idColonne===A.idColonne)?!1:(y.push(A),!0)).length,_=d.map(A=>m.filter(C=>A.données[C.id]!==void 0).length).reduce((A,C)=>A+C,0),x=_-v;o({numérateur:x,dénominateur:_})}},u=await this.client.tableaux.suivreDonnées({idTableau:a,f:d=>{c.données=d,l()}}),f=await this.client.tableaux.suivreValidDonnées({idTableau:a,f:d=>{c.erreurs=d,l()}}),h=await this.client.tableaux.suivreColonnesTableau({idTableau:a,f:d=>{c.cols=d,l()},catégories:!0});return async()=>{await u(),await f(),await h()}}})}async suivreQualitéBd({idBd:e,f:r}){const n={},i=async()=>{const{accès:l,couverture:u,valide:f,licence:h}=n,d={total:h?((l||0)+(u||0)+(f||0))/3:0,accès:l,couverture:u,valide:f,licence:h};await r(d)},s=await this.suivreScoreAccèsBd({idBd:e,f:async l=>{n.accès=l,await i()}}),a=await this.suivreScoreCouvertureBd({idBd:e,f:async l=>{n.couverture=l,await i()}}),o=await this.suivreScoreValideBd({idBd:e,f:async l=>{n.valide=l,await i()}}),c=await this.suivreLicenceBd({idBd:e,f:async l=>{n.licence=l?1:0,await i()}});return async()=>{await Promise.all([s,a,o,c])}}async suivreVariablesBd({idBd:e,f:r}){return await bn({fListe:async a=>await this.suivreTableauxBd({idBd:e,f:o=>a(o.map(c=>c.id))}),f:async a=>await r(a||[]),fBranche:async(a,o)=>await this.client.tableaux.suivreVariables({idTableau:a,f:o})})}async suivreDonnéesExportation({idBd:e,langues:r,f:n}){const i={},s=[],a=async()=>{const{nomsBd:c,données:l}=i;if(!l)return;const u=e.split("/").pop(),f=c&&r&&A1(c,r)||u;await n({nomBd:f,tableaux:l})},o=await bn({fListe:async c=>await this.suivreTableauxBd({idBd:e,f:c}),f:async c=>{i.données=c,await a()},fBranche:async(c,l)=>await this.client.tableaux.suivreDonnéesExportation({idTableau:c,langues:r,f:async u=>await l(u)}),fIdBdDeBranche:c=>c.id,fCode:c=>c.id});if(s.push(o),r){const c=await this.suivreNomsBd({idBd:e,f:async l=>{i.nomsBd=l,await a()}});s.push(c)}return async()=>{await Promise.all(s.map(c=>c()))}}async exporterDonnées({idBd:e,langues:r,nomFichier:n,patience:i=500}){const s=Lf.utils.book_new(),a=await Sn(async c=>await this.suivreDonnéesExportation({idBd:e,langues:r,f:c}),Bo(i));n=n||a.nomBd;const o=new Set;for(const c of a.tableaux){c.fichiersSFIP.forEach(u=>o.add(u));const l=Lf.utils.json_to_sheet(c.données);Lf.utils.book_append_sheet(s,l,c.nomTableau.slice(0,30))}return{doc:s,fichiersSFIP:o,nomFichier:n}}async exporterDocumentDonnées({données:e,formatDoc:r,dossier:n="",inclureFichiersSFIP:i=!0}){const{doc:s,fichiersSFIP:a,nomFichier:o}=e,l={xls:"biff8"}[r]||r,u=S1.join(n,`${o}.${r}`);if(!(n6||mS)){const f=await Ar(()=>Promise.resolve().then(()=>vc),void 0);f.existsSync(n)||f.mkdirSync(n,{recursive:!0})}if(i){const f={octets:Lf.write(s,{bookType:l,type:"buffer"}),nom:`${o}.${r}`},h=await Promise.all([...a].map(async d=>({nom:d.replace("/","-"),octets:await Ive(await this.client.obtItérableAsyncSFIP({id:d}))})));return await ale([f],h,S1.join(n,o)),S1.join(n,`${o}.zip`)}else{if(Na||Oa)Lf.writeFile(s,u,{bookType:l});else{const f=Lf.write(s,{bookType:l,type:"buffer"});WAt(new Blob([new Uint8Array(f)]),`${o}.${r}`)}return u}}async effacerBd({idBd:e}){const{bd:r,fOublier:n}=await this.client.ouvrirBdTypée({id:await this.obtIdBd(),type:"set",schéma:Pw});await r.del(e),await n();for(const s of["noms","descriptions","motsClefs"]){const a=await this.client.obtIdBd({nom:s,racine:e});a&&await this.client.effacerBd({id:a})}const i=await this.client.obtIdBd({nom:"tableaux",racine:e,type:"ordered-keyvalue"});if(i){const{bd:s,fOublier:a}=await this.client.ouvrirBdTypée({id:i,type:"ordered-keyvalue",schéma:Wc}),o=Object.keys(s.all);for(const c of o)await this.client.tableaux.effacerTableau({idTableau:c});a(),await this.client.effacerBd({id:i})}await this.enleverDeMesBds({idBd:e}),await this.client.favoris.désépinglerFavori({idObjet:e}),await this.client.effacerBd({id:e})}}He([ot],Zi.prototype,"suivreBds",null);He([ot],Zi.prototype,"suivreParent",null);He([ot],Zi.prototype,"suivreNuéesBd",null);He([ot],Zi.prototype,"rechercherBdsParMotsClefs",null);He([ot],Zi.prototype,"rechercherBdsParNuée",null);He([ot],Zi.prototype,"suivreIdTableauParClef",null);He([ot],Zi.prototype,"suivreBdUnique",null);He([ot],Zi.prototype,"suivreIdTableauParClefDeBdUnique",null);He([ot],Zi.prototype,"suivreDonnéesDeTableauUnique",null);He([ot],Zi.prototype,"suivreDonnéesDeTableauParClef",null);He([ot],Zi.prototype,"suivreMétadonnéesBd",null);He([ot],Zi.prototype,"suivreLicenceBd",null);He([ot],Zi.prototype,"suivreLicenceContenuBd",null);He([ot],Zi.prototype,"suivreImage",null);He([ot],Zi.prototype,"suivreNomsBd",null);He([ot],Zi.prototype,"suivreDescriptionsBd",null);He([ot],Zi.prototype,"suivreMotsClefsBd",null);He([ot],Zi.prototype,"suivreTableauxBd",null);He([ot],Zi.prototype,"suivreScoreAccèsBd",null);He([ot],Zi.prototype,"suivreScoreCouvertureBd",null);He([ot],Zi.prototype,"suivreScoreValideBd",null);He([ot],Zi.prototype,"suivreQualitéBd",null);He([ot],Zi.prototype,"suivreVariablesBd",null);function XAt({règle:t,varsÀColonnes:e,donnéesCatégorie:r}){const n=t.règle,{colonne:i}=t,{typeRègle:s}=n.règle;switch(s){case"existe":return a=>a.filter(c=>c.données[i]===void 0).map(c=>{const{id:l}=c;return{id:l,erreur:{règle:t}}});case"catégorie":return a=>{const o=n.règle.détails.catégorie;return a.filter(l=>!HMe({val:l.données[i],catégorie:o})).map(l=>{const{id:u}=l;return{id:u,erreur:{règle:t}}})};case"bornes":{const a=n;let o,c;const{val:l,op:u,type:f}=a.règle.détails,h=(d,g)=>d===void 0||g===void 0;switch(u){case">":c=(d,g)=>h(d,g)||d>g;break;case"<":c=(d,g)=>h(d,g)||d<g;break;case"≥":case">=":c=(d,g)=>h(d,g)||d>=g;break;case"≤":case"<=":c=(d,g)=>h(d,g)||d<=g;break}return f==="fixe"?o=d=>{const g=d.données[i];return Array.isArray(g)?g.every(p=>c(p,l)):c(g,l)}:o=d=>{const g=d.données[i],p=f==="dynamiqueVariable"?d.données[e[l]]:d.données[l];return Array.isArray(g)?g.every(m=>c(m,p)):c(g,p)},d=>d.filter(p=>!ZAt({val:p,fComp:o})).map(p=>{const{id:m}=p;return{id:m,erreur:{règle:t}}})}case"valeurCatégorique":{const a=n.règle,o=a.détails.type==="fixe"?a.détails.options:r;if(!o)throw new Error("Options non spécifiées");return c=>c.filter(u=>u.données[i]!==void 0&&!o.includes(u.données[i])).map(u=>{const{id:f}=u;return{id:f,colonne:i,erreur:{règle:t}}})}default:throw Error(`Catégorie ${s} inconnue.`)}}const ZAt=({val:t,fComp:e})=>Array.isArray(t)?t.every(r=>e(r)):e(t),JAt=t=>!!t&&typeof t.système=="string"&&typeof t.val=="string";class QAt{lireDate(e){const{système:r,val:n}=e;switch(r){case"dateJS":case"grégorien":{const i=new Date(n);if(isNaN(i.valueOf()))throw new Error(n);return i}default:throw new Error(r)}}dateValide(e){if(!JAt(e))return!1;try{return this.lireDate(e),!0}catch{return!1}}}const eTt=new QAt,j2={type:"object",additionalProperties:{type:"object",properties:{catégorie:{type:"object",nullable:!0,properties:{catégorie:{type:"string"},type:{type:"string"}},required:["catégorie","type"]},id:{type:"string"},variable:{type:"string"},index:{type:"boolean",nullable:!0}},required:["id","variable"]},required:[]},Bw={type:"object",additionalProperties:{type:"object",additionalProperties:!0,required:[]},required:[]},W5={type:"object",additionalProperties:{type:"object",properties:{colonne:{type:"string"},source:{type:"object",properties:{id:{type:"string"},type:{type:"string"}},required:["id","type"]},règle:{type:"object",properties:{id:{type:"string"},règle:{type:"object",properties:{détails:{type:"object",required:[]},typeRègle:{type:"string"}},required:["détails","typeRègle"]}},required:["id","règle"]}},required:["colonne","règle","source"]},required:[]};function SB(t,e){const r=Object.keys(t).filter(i=>i!=="id"),n=Object.keys(e).filter(i=>i!=="id");return!(!r.every(i=>t[i]===e[i])||!n.every(i=>t[i]===e[i]))}function tTt(t,e,r){return!!r.every(n=>t[n]===e[n])}const AB={type:"object",properties:{type:{type:"string"},noms:{type:"string"},données:{type:"string"},colonnes:{type:"string"},règles:{type:"string"}},required:["données","colonnes","noms","règles","type"]};class Ch{client;constructor({client:e}){this.client=e}async créerTableau({idBd:e}){const r=await this.client.obtOpsAccès({idBd:e}),n=await this.client.créerBdIndépendante({type:"keyvalue",optionsAccès:r}),{bd:i,fOublier:s}=await this.client.ouvrirBdTypée({id:n,type:"keyvalue",schéma:AB}),a=async()=>i.set("type","tableau"),o=async()=>{const f=await this.client.créerBdIndépendante({type:"keyvalue",optionsAccès:r});await i.set("noms",f)},c=async()=>{const f=await this.client.créerBdIndépendante({type:"keyvalue",optionsAccès:r});await i.set("données",f)},l=async()=>{const f=await this.client.créerBdIndépendante({type:"keyvalue",optionsAccès:r});await i.set("colonnes",f)},u=async()=>{const f=await this.client.créerBdIndépendante({type:"keyvalue",optionsAccès:r});await i.set("règles",f)};return await Promise.all([a(),o(),c(),l(),u()]),await s(),n}async copierTableau({id:e,idBd:r,copierDonnées:n=!0}){const{bd:i,fOublier:s}=await this.client.ouvrirBdTypée({id:e,type:"keyvalue",schéma:AB}),a=await this.créerTableau({idBd:r}),{bd:o,fOublier:c}=await this.client.ouvrirBdTypée({id:a,type:"keyvalue",schéma:AB}),l=await i.get("noms");if(l){const{bd:u,fOublier:f}=await this.client.ouvrirBdTypée({id:l,type:"keyvalue",schéma:zt}),h=await u.allAsJSON();await f(),await this.sauvegarderNomsTableau({idTableau:a,noms:h})}return await this.client.copierContenuBdDic({bdBase:i,nouvelleBd:o,clef:"colonnes",schéma:j2}),await this.client.copierContenuBdDic({bdBase:i,nouvelleBd:o,clef:"règles",schéma:W5}),n&&await this.client.copierContenuBdDic({bdBase:i,nouvelleBd:o,clef:"données",schéma:Bw}),await Promise.all([s(),c()]),a}async suivreDifférencesAvecTableau({idTableau:e,idTableauRéf:r,f:n}){const i={},s=async()=>{if(!i.colonnesTableau||!i.colonnesTableauRéf)return;const c=[];for(const l of i.colonnesTableauRéf){const u=i.colonnesTableau.find(f=>f.id===l.id);if(u){if(u.variable!==l.variable){const f={type:"variableColonne",sévère:!0,idCol:u.id,varColTableau:u.variable,varColTableauLiée:l.variable};c.push(f)}if(u.index!==l.index){const f={type:"indexColonne",sévère:!0,idCol:u.id,colTableauIndexée:!!u.index};c.push(f)}}else{const f={type:"colonneManquante",sévère:!0,idManquante:l.id};c.push(f)}}for(const l of i.colonnesTableau)if(!i.colonnesTableauRéf.find(f=>f.id===l.id)){const f={type:"colonneSupplémentaire",sévère:!1,idExtra:l.id};c.push(f)}await n(c)},a=await this.suivreColonnesTableau({idTableau:e,f:async c=>{i.colonnesTableau=c,await s()},catégories:!1}),o=await this.suivreColonnesTableau({idTableau:r,f:async c=>{i.colonnesTableauRéf=c,await s()},catégories:!1});return async()=>{await Promise.all([a,o])}}async changerColIndex({idTableau:e,idColonne:r,val:n}){const i=await this.client.obtIdBd({nom:"colonnes",racine:e,type:"keyvalue"});if(!i)throw new Error(`Permission de modification refusée pour BD ${e}.`);const{bd:s,fOublier:a}=await this.client.ouvrirBdTypée({id:i,type:"keyvalue",schéma:j2}),c=(await s.all()).find(l=>l.value.id===r);if(c&&!!c.value.index!==n){const{value:l}=c,u=Object.assign(l,{index:n});await s.put(r,u)}await a()}async suivreIndex({idTableau:e,f:r}){const n=async i=>{const s=i.filter(a=>a.index).map(a=>a.id);await r(s)};return await this.suivreColonnesTableau({idTableau:e,f:n,catégories:!1})}async suivreDonnées({idTableau:e,f:r,clefsSelonVariables:n=!1}){const i={},s=async()=>{const{données:u,colonnes:f}=i;if(u&&f){const h=Object.entries(u).map(([d,g])=>({données:n?Object.keys(g).reduce((m,y)=>{const v=y==="id"?"id":f[y];return m[v]=g[y],m},{}):g,id:d}));await r(h)}},a=async u=>{i.colonnes=Object.fromEntries(u.map(f=>[f.id,f.variable])),await s()},o=await this.suivreColonnesTableau({idTableau:e,f:a,catégories:!1}),c=async u=>{i.données=u,await s()},l=await this.client.suivreBdDicDeClef({id:e,clef:"données",f:c,schéma:Bw});return async()=>{await l(),await o()}}async formaterÉlément({é:e,colonnes:r,fichiersSFIP:n,langues:i}){const s=async({adresseBdTrads:c,langues:l})=>{const u=await Sn(f=>this.client.suivreBdDic({id:c,f}));return A1(u,l||[])||c},a={},o=async(c,l)=>{switch(typeof c){case"object":return JSON.stringify(c);case"boolean":return c.toString();case"number":return c;case"string":return["audio","image","vidéo","fichier"].includes(l)?(n.add(c),c):l==="chaîne"&&to(c)?await s({adresseBdTrads:c,langues:i}):c;default:return}};for(const c of Object.keys(e)){const l=r.find(d=>d.id===c);if(!l)continue;const{catégorie:u}=l;let f;const h=e[c];u?.type==="simple"?f=await o(h,u.catégorie):u?.type==="liste"&&Array.isArray(h)&&(f=JSON.stringify(await Promise.all(h.map(d=>o(d,u.catégorie))))),f!==void 0&&(a[c]=f)}return a}async suivreDonnéesExportation({idTableau:e,langues:r,f:n}){const i={},s=[],a=async()=>{const{colonnes:l,données:u,nomsTableau:f,nomsVariables:h}=i;if(l&&u&&(!r||f&&h)){const d=new Set;let g=await Promise.all(u.map(y=>this.formaterÉlément({é:y.données,fichiersSFIP:d,colonnes:l,langues:r})));g=g.map(y=>Object.keys(y).reduce((v,_)=>{const x=l.find(C=>C.id===_)?.variable;if(!x)throw new Error(`Colonnne avec id ${_} non trouvée parmis les colonnnes :
${JSON.stringify(l,void 0,2)}.`);const A=r&&h?.[x]&&A1(h[x],r)||_;return v[A]=y[_],v},{}));const p=e.split("/").pop(),m=r&&f&&A1(f,r)||p;return await n({nomTableau:m,données:g,fichiersSFIP:d})}};if(r){const l=await this.suivreNomsTableau({idTableau:e,f:async f=>{i.nomsTableau=f,await a()}});s.push(l);const u=await bn({fListe:async f=>this.suivreVariables({idTableau:e,f}),f:async f=>{i.nomsVariables=Object.fromEntries(f.map(h=>[h.idVar,h.noms])),await a()},fBranche:async(f,h)=>await this.client.variables.suivreNomsVariable({idVariable:f,f:async d=>await h({idVar:f,noms:d})})});s.push(u)}const o=await this.suivreColonnesTableau({idTableau:e,f:async l=>{i.colonnes=l,await a()},catégories:!0});s.push(o);const c=await this.suivreDonnées({idTableau:e,f:async l=>{i.données=l,await a()}});return s.push(c),async()=>{Promise.all(s.map(l=>l()))}}async exporterDonnées({idTableau:e,langues:r,doc:n,nomFichier:i,patience:s=500}){n=n||zd.book_new();const a=await Sn(async c=>await this.suivreDonnéesExportation({idTableau:e,langues:r,f:c}),Bo(s)),o=zd.json_to_sheet(a.données);return zd.book_append_sheet(n,o,a.nomTableau.slice(0,30)),i=i||a.nomTableau,{doc:n,fichiersSFIP:a.fichiersSFIP,nomFichier:i}}async ajouterÉlément({idTableau:e,vals:r}){Array.isArray(r)||(r=[r]);const n=await this.client.obtIdBd({nom:"données",racine:e,type:"keyvalue"});if(!n)throw new Error(`Permission de modification refusée pour BD ${e}.`);const{bd:i,fOublier:s}=await this.client.ouvrirBdTypée({id:n,type:"keyvalue",schéma:Bw}),a=(await Sn(l=>this.suivreColonnesTableau({idTableau:e,f:l,catégories:!1}))).filter(l=>l.index).map(l=>l.id),o=l=>{const u=Object.fromEntries(Object.entries(l).filter(f=>a.includes(f[0])));return U4.stringify(nT(JSON.stringify(u)))},c=[];for(const l of r){const u=a.length?o(l):rs();await i.put(u,l),c.push(u)}return await s(),c}async modifierÉlément({idTableau:e,vals:r,idÉlément:n}){const i=await this.client.obtIdBd({nom:"données",racine:e,type:"keyvalue"});if(!i)throw new Error(`Permission de modification refusée pour BD ${e}.`);const{bd:s,fOublier:a}=await this.client.ouvrirBdTypée({id:i,type:"keyvalue",schéma:Bw}),o=await s.get(n);if(!o)throw new Error(`Id élément ${n} n'existe pas.`);const c=Object.assign({},o,r);Object.keys(r).map(l=>{r[l]===void 0&&delete c[l]}),SB(c,o)||await s.put(n,c),await a()}async vérifierClefsÉlément({idTableau:e,élément:r}){const n=await this.client.obtIdBd({nom:"colonnes",racine:e,type:"keyvalue"});if(!n)throw new Error(`Permission de modification refusée pour BD ${e}.`);const{bd:i,fOublier:s}=await this.client.ouvrirBdTypée({id:n,type:"keyvalue",schéma:j2}),o=[...(await i.all()).map(l=>l.value.id),"id"],c=Object.keys(r).filter(l=>o.includes(l));return await s(),Object.fromEntries(c.map(l=>[l,r[l]]))}async effacerÉlément({idTableau:e,idÉlément:r}){const n=await this.client.obtIdBd({nom:"données",racine:e,type:"keyvalue"});if(!n)throw new Error(`Permission de modification refusée pour BD ${e}.`);const{bd:i,fOublier:s}=await this.client.ouvrirBdTypée({id:n,type:"keyvalue",schéma:Bw});await i.del(r),await s()}async combinerDonnées({idTableauBase:e,idTableau2:r}){const n=await Sn(async o=>await this.suivreDonnées({idTableau:e,f:o})),i=await Sn(async o=>await this.suivreColonnesTableau({idTableau:e,f:o,catégories:!1}),o=>o!==void 0&&[...new Set(n.map(c=>Object.keys(c.données).filter(l=>l!=="id")).flat())].length<=o.length),s=await Sn(async o=>await this.suivreDonnées({idTableau:r,f:o})),a=i.filter(o=>o.index).map(o=>o.id);for(const o of s){const c=n.find(l=>tTt(l.données,o.données,a));if(c){const l={};for(const u of i)c.données[u.id]===void 0&&o.données[u.id]!==void 0&&(l[u.id]=o.données[u.id]);Object.keys(l).length&&(await this.effacerÉlément({idTableau:e,idÉlément:c.id}),await this.ajouterÉlément({idTableau:e,vals:Object.assign({},c.données,l)}))}else await this.ajouterÉlément({idTableau:e,vals:o.données})}}async convertirDonnées({idTableau:e,données:r,conversions:n={},importerFichiers:i,cheminBaseFichiers:s,donnéesExistantes:a}){const o=await Sn(async p=>await this.suivreColonnesTableau({idTableau:e,f:p,catégories:!0})),c=new Set(a?.map(p=>o.filter(m=>m.catégorie?.catégorie==="chaîne").map(m=>m.catégorie?.type==="simple"?[p[m.id]]:p[m.id]).flat().filter(m=>typeof m=="string")).flat()||[]),l={},u=async({chemin:p})=>{try{if(new URL(p),l[p])return l[p];const m=(await ns.get(p)).data,y=p.split("/"),v=y.pop()||y.pop();if(!v)throw new Error("Nom de fichier manquant.");const _=await this.client.ajouterÀSFIP({nomFichier:v,contenu:m});l[p]=_}catch{}if(Na||Oa){const m=await Ar(()=>Promise.resolve().then(()=>vc),void 0),y=await Ar(()=>Promise.resolve().then(()=>r6),void 0),v=s?y.resolve(s,p):p;if(!m.existsSync(v))return;if(l[v])return l[v];const _=m.readFileSync(v),x=await this.client.ajouterÀSFIP({nomFichier:y.basename(v),contenu:_});return l[p]=x,x}},f={},h=async({val:p,langue:m})=>{if(f[m]?.[p])return f[m][p];for(const y of c){const{bd:v,fOublier:_}=await this.client.ouvrirBdTypée({id:y,type:"keyvalue",schéma:zt}),x=await v.get(m);if(await _(),x===p)return f[m]||(f[m]={}),f[m][p]=y,y}},d=async({val:p,langue:m})=>{const{bd:y,fOublier:v}=await this.client.ouvrirBdTypée({id:e,type:"keyvalue",schéma:zt}),x={address:y.access.address};await v();const A=await this.client.créerBdIndépendante({type:"keyvalue",optionsAccès:x}),{bd:C,fOublier:R}=await this.client.ouvrirBdTypée({id:A,type:"keyvalue",schéma:zt});return await C.set(m,p),await R(),c.add(A),A},g=async({val:p,catégorie:m,conversion:y})=>{switch(m){case"audio":case"image":case"vidéo":case"fichier":return typeof p=="string"&&i?kve(p)?p:await u({chemin:p})||p:p;case"booléen":return typeof p=="string"?p.toLowerCase()==="true":p;case"numérique":{let v,_;y?.type==="numérique"&&({opération:v,systèmeNumération:_}=y);const x=({val:C,ops:R})=>{if(!R)return C;let M=C;for(const N of R)switch(N.op){case"+":M=C+N.val;break;case"-":M=C-N.val;break;case"*":M=C*N.val;break;case"/":M=C/N.val;break;case"^":M=C**N.val;break;default:throw new Error(N.op)}return M};let A;if(typeof p=="string")try{A=this.client.ennikkai.எண்ணுக்கு({உரை:p,மொழி:_})}catch{}else typeof p=="number"&&(A=p);return A!==void 0?x({val:A,ops:Array.isArray(v)||typeof v>"u"?v:[v]}):p}case"horoDatage":if(y?.type==="horoDatage"&&typeof p=="string"){const{système:v,format:_}=y;return{système:"dateJS",val:eTt.lireDate({système:v,val:p,format:_}).valueOf()}}else{if(["number","string"].includes(typeof p)){const v=new Date(p);return isNaN(v.valueOf())?p:{système:"dateJS",val:v.valueOf()}}return p}case"intervaleTemps":{const v=typeof p=="string"?JSON.parse(p):p;return Array.isArray(v)?await Promise.all(v.map(async _=>await g({val:_,catégorie:"horoDatage",conversion:y}))):v}case"chaîneNonTraductible":return p;case"chaîne":{if(typeof p!="string"||to(p))return p;if(y?.type==="chaîne"){const{langue:v}=y;return await h({val:p,langue:v})||await d({val:p,langue:v})}return p}case"géojson":return typeof p=="string"?JSON.parse(p):p;default:return p}};for(const p of r)for(const m of o)if(m.catégorie){const{type:y,catégorie:v}=m.catégorie,_=p[m.id];if(_===void 0)continue;const x=n[m.id];if(y==="simple")p[m.id]=await g({val:_,catégorie:v,conversion:x});else{const A=typeof _=="string"?JSON.parse(_):_;p[m.id]=Array.isArray(A)?await Promise.all(A.map(async C=>await g({val:C,catégorie:v,conversion:x}))):[await g({val:A,catégorie:v,conversion:x})]}}return r}async importerDonnées({idTableau:e,données:r,conversions:n={},cheminBaseFichiers:i}){const s=await Sn(async l=>await this.suivreDonnées({idTableau:e,f:l})),a=await this.convertirDonnées({idTableau:e,données:r,conversions:n,importerFichiers:!0,cheminBaseFichiers:i,donnéesExistantes:s.map(l=>l.données)}),o=[];for(const l of a)s.some(u=>SB(u.données,l))||o.push(l);const c=[];for(const l of s)a.some(u=>SB(u,l.données))||c.push(l.id);for(const l of c)await this.effacerÉlément({idTableau:e,idÉlément:l});for(const l of o)await this.ajouterÉlément({idTableau:e,vals:l})}async sauvegarderNomsTableau({idTableau:e,noms:r}){const n=await this.client.obtIdBd({nom:"noms",racine:e,type:"keyvalue"});if(!n)throw new Error(`Permission de modification refusée pour BD ${e}.`);const{bd:i,fOublier:s}=await this.client.ouvrirBdTypée({id:n,type:"keyvalue",schéma:zt});for(const a in r)await i.set(a,r[a]);await s()}async sauvegarderNomTableau({idTableau:e,langue:r,nom:n}){const i=await this.client.obtIdBd({nom:"noms",racine:e,type:"keyvalue"});if(!i)throw new Error(`Permission de modification refusée pour BD ${e}.`);const{bd:s,fOublier:a}=await this.client.ouvrirBdTypée({id:i,type:"keyvalue",schéma:zt});await s.set(r,n),await a()}async effacerNomTableau({idTableau:e,langue:r}){const n=await this.client.obtIdBd({nom:"noms",racine:e,type:"keyvalue"});if(!n)throw new Error(`Permission de modification refusée pour BD ${e}.`);const{bd:i,fOublier:s}=await this.client.ouvrirBdTypée({id:n,type:"keyvalue",schéma:zt});await i.del(r),await s()}async suivreNomsTableau({idTableau:e,f:r}){return await this.client.suivreBdDicDeClef({id:e,clef:"noms",schéma:zt,f:r})}async ajouterColonneTableau({idTableau:e,idVariable:r,idColonne:n}){const i=await this.client.obtIdBd({nom:"colonnes",racine:e,type:"keyvalue"});if(!i)throw new Error(`Permission de modification refusée pour BD ${e}.`);const{bd:s,fOublier:a}=await this.client.ouvrirBdTypée({id:i,type:"keyvalue",schéma:j2});n=n||rs();const o={id:n,variable:r};return await s.put(n,o),await a(),n}async effacerColonneTableau({idTableau:e,idColonne:r}){const n=await this.client.obtIdBd({nom:"colonnes",racine:e,type:"keyvalue"});if(!n)throw new Error(`Permission de modification refusée pour BD ${e}.`);const{bd:i,fOublier:s}=await this.client.ouvrirBdTypée({id:n,type:"keyvalue",schéma:j2});await i.del(r),await s()}async suivreColonnesTableau({idTableau:e,f:r,catégories:n=!1}){const i=async l=>{if(l)return await r(l)},s=async(l,u,f)=>l?await this.client.variables.suivreCatégorieVariable({idVariable:l,f:async h=>{const d=Object.assign({catégorie:h},f);await u(d)}}):Li,a=l=>l.variable,o=l=>l.id,c=async({id:l,fSuivreBd:u})=>await this.client.suivreBdsDeBdDic({id:l,f:u,fBranche:s,fIdBdDeBranche:a,fCode:o});return n?await this.client.suivreBdDeClef({id:e,clef:"colonnes",f:i,fSuivre:c}):await this.client.suivreBdDicDeClef({id:e,clef:"colonnes",schéma:j2,f:async l=>i(Object.values(l))})}async suivreVariables({idTableau:e,f:r}){const n=async s=>{await r((s||[]).filter(a=>a&&to(a)))},i=async({id:s,fSuivreBd:a})=>await this.client.suivreBdListe({id:s,f:o=>a(o.map(c=>c.variable))});return await this.client.suivreBdDeClef({id:e,clef:"colonnes",f:n,fSuivre:i})}async ajouterRègleTableau({idTableau:e,idColonne:r,règle:n}){const i=await this.client.obtIdBd({nom:"règles",racine:e,type:"keyvalue"});if(!i)throw new Error(`Permission de modification refusée pour tableau ${e}.`);const{bd:s,fOublier:a}=await this.client.ouvrirBdTypée({id:i,type:"keyvalue",schéma:W5}),o=rs(),l={règle:{id:o,règle:n},source:{type:"tableau",id:e},colonne:r};return await s.put(o,l),await a(),o}async effacerRègleTableau({idTableau:e,idRègle:r}){const n=await this.client.obtIdBd({nom:"règles",racine:e,type:"keyvalue"});if(!n)throw new Error(`Permission de modification refusée pour tableau ${e}.`);const{bd:i,fOublier:s}=await this.client.ouvrirBdTypée({id:n,type:"keyvalue",schéma:W5});await i.del(r),await s()}async suivreRègles({idTableau:e,f:r}){const n={},i=async()=>{if(!(!n.tableau||!n.variable))return await r([...n.tableau,...n.variable])},s=async g=>(n.tableau=Object.values(g),await i()),a=await this.client.suivreBdDicDeClef({id:e,clef:"règles",schéma:W5,f:s}),h=await bn({fListe:async g=>await this.suivreColonnesTableau({idTableau:e,f:g,catégories:!1}),f:async g=>(n.variable=g,await i()),fBranche:async(g,p,m)=>{const y=v=>{const _=v.map(x=>({règle:x,source:{type:"variable",id:g},colonne:m.id}));return p(_)};return await this.client.variables.suivreRèglesVariable({idVariable:g,f:y})},fIdBdDeBranche:g=>g.variable,fCode:g=>g.id});return async()=>{await a(),await h()}}async suivreValidDonnées({idTableau:e,f:r}){const n={},i=async()=>{if(!n.données||!n.règles)return;let p=[];for(const m of n.règles){const y=m(n.données);p=[...p,...y.flat()]}await r(p)},s=async p=>{n.varsÀColonnes&&(n.règles=p.map(m=>XAt({règle:m.règle,varsÀColonnes:n.varsÀColonnes,donnéesCatégorie:m.donnéesCatégorie})),await i())},a=async p=>{n.données=p,await i()},o=await this.suivreColonnesTableau({idTableau:e,f:async p=>{const m=p.reduce((y,v)=>({...y,[v.variable]:v.id}),{});n.varsÀColonnes=m,await i()},catégories:!1}),h=await bn({fListe:async p=>await this.suivreRègles({idTableau:e,f:p}),f:s,fBranche:async(p,m,y)=>{if(y.règle.règle.typeRègle==="valeurCatégorique"&&y.règle.règle.détails.type==="dynamique"){const{tableau:v,colonne:_}=y.règle.règle.détails;return await this.suivreDonnées({idTableau:v,f:async x=>await m({règle:y,donnéesCatégorie:x.map(A=>A.données[_])})})}else return await m({règle:y}),Li},fIdBdDeBranche:p=>p.règle.id,fCode:p=>p.règle.id}),d=await this.suivreDonnées({idTableau:e,f:a});return async()=>{await h(),await d(),await o()}}async suivreValidRègles({idTableau:e,f:r}){const n={},i=async()=>{if(!n.colonnes||!n.règles)return;const d=[],g=n.règles.map(v=>v.règle).filter(v=>v.règle.règle.typeRègle==="bornes"),p=g.filter(v=>v.règle.règle.détails.type==="dynamiqueColonne"),m=g.filter(v=>v.règle.règle.détails.type==="dynamiqueVariable"),y=n.règles.filter(v=>v.règle.règle.règle.typeRègle==="valeurCatégorique"&&v.règle.règle.règle.détails.type==="dynamique");for(const v of p)if(!n.colonnes.find(x=>x.id===v.règle.règle.détails.val)){const x={règle:v,détails:"colonneBornesInexistante"};d.push(x)}for(const v of m)if(!n.colonnes.find(x=>x.variable===v.règle.règle.détails.val)){const x={règle:v,détails:"variableBornesNonPrésente"};d.push(x)}for(const v of y)if(!v.colsTableauRéf?.find(x=>x.id===v.règle.règle.règle.détails.colonne)){const x={règle:v.règle,détails:"colonneCatégInexistante"};d.push(x)}await r(d)},s=async d=>(n.règles=d,await i()),a=await this.suivreColonnesTableau({idTableau:e,f:async d=>(n.colonnes=d,await i()),catégories:!1}),f=await bn({fListe:async d=>await this.suivreRègles({idTableau:e,f:d}),f:s,fBranche:async(d,g,p)=>{if(p.règle.règle.typeRègle==="valeurCatégorique"&&p.règle.règle.détails.type==="dynamique"){const{tableau:m}=p.règle.règle.détails;return await this.suivreColonnesTableau({idTableau:m,f:y=>g({règle:p,colsTableauRéf:y}),catégories:!1})}else return await g({règle:p}),Li},fIdBdDeBranche:d=>d.règle.id,fCode:d=>d.règle.id});return async()=>{await f(),await a()}}async effacerTableau({idTableau:e}){for(const r of["noms","données","colonnes","règles"]){const n=await this.client.obtIdBd({nom:r,racine:e});n&&await this.client.effacerBd({id:n})}await this.client.effacerBd({id:e})}}He([ot],Ch.prototype,"suivreDifférencesAvecTableau",null);He([ot],Ch.prototype,"suivreIndex",null);He([ot],Ch.prototype,"suivreDonnées",null);He([ot],Ch.prototype,"suivreNomsTableau",null);He([ot],Ch.prototype,"suivreColonnesTableau",null);He([ot],Ch.prototype,"suivreVariables",null);He([ot],Ch.prototype,"suivreRègles",null);He([ot],Ch.prototype,"suivreValidDonnées",null);He([ot],Ch.prototype,"suivreValidRègles",null);const rTt={type:"string"},Xh={type:"object",properties:{type:{type:"string",nullable:!0},catégorie:{type:"object",properties:{catégorie:{type:"string",nullable:!0},type:{type:"string",nullable:!0}},required:[],nullable:!0},noms:{type:"string",nullable:!0},descriptions:{type:"string",nullable:!0},unités:{type:"string",nullable:!0},règles:{type:"string",nullable:!0},statut:{type:"object",properties:{idNouvelle:{type:"string",nullable:!0},statut:{type:"string",nullable:!0}},required:[],nullable:!0}},required:[]},K5={type:"object",additionalProperties:{type:"object",properties:{typeRègle:{type:"string"},détails:{type:"object",required:[],additionalProperties:!0}},required:["détails","typeRègle"]},required:[]};class gp extends e2{constructor({client:e}){super({client:e,clef:"variables",schémaBdPrincipale:rTt})}async épingler(){await this.client.épingles.épinglerBd({id:await this.obtIdBd(),récursif:!1,fichiers:!1})}async suivreVariables({f:e,idCompte:r}){return await this.suivreBdPrincipale({idCompte:r,f:e})}async créerVariable({catégorie:e,épingler:r=!0}){const n=await this.client.créerBdIndépendante({type:"keyvalue",optionsAccès:{address:void 0,write:await this.client.obtIdCompte()}});await this.ajouterÀMesVariables({idVariable:n}),r&&await this.client.favoris.épinglerFavori({idObjet:n});const{bd:i,fOublier:s}=await this.client.ouvrirBdTypée({id:n,type:"keyvalue",schéma:Xh}),a=i.access;if(!LV(a))throw Error("Contrôleur de type non reconnu.");const o={address:a.address};await i.set("type","variable");const c=await this.client.créerBdIndépendante({type:"keyvalue",optionsAccès:o});await i.set("noms",c);const l=await this.client.créerBdIndépendante({type:"keyvalue",optionsAccès:o});await i.set("descriptions",l);const u=await this.client.créerBdIndépendante({type:"keyvalue",optionsAccès:o});return await i.set("règles",u),await i.set("catégorie",this.standardiserCatégorieVariable(e)),await this.établirStatut({id:n,statut:{statut:"active"}}),s(),n}async ajouterÀMesVariables({idVariable:e}){const{bd:r,fOublier:n}=await this.obtBd();await r.add(e),await n()}async enleverDeMesVariables({idVariable:e}){const{bd:r,fOublier:n}=await this.obtBd();await r.del(e),await n()}async copierVariable({idVariable:e}){const{bd:r,fOublier:n}=await this.client.ouvrirBdTypée({id:e,type:"keyvalue",schéma:Xh}),i=await r.get("catégorie"),s=await this.créerVariable({catégorie:i}),{bd:a,fOublier:o}=await this.client.ouvrirBdTypée({id:s,type:"keyvalue",schéma:Xh}),c=await r.get("noms");if(c){const{bd:d,fOublier:g}=await this.client.ouvrirBdTypée({id:c,type:"keyvalue",schéma:zt}),p=await d.allAsJSON();await g(),await this.sauvegarderNomsVariable({idVariable:s,noms:p})}const l=await r.get("descriptions");if(l){const{bd:d,fOublier:g}=await this.client.ouvrirBdTypée({id:l,type:"keyvalue",schéma:zt}),p=await d.allAsJSON();await g(),await this.sauvegarderDescriptionsVariable({idVariable:s,descriptions:p})}const u=await r.get("unités");u&&await a.put("unités",u);const f=await r.get("règles");if(f){const{bd:d,fOublier:g}=await this.client.ouvrirBdTypée({id:f,type:"keyvalue",schéma:K5}),p=await d.allAsJSON();await g(),await Promise.all(Object.entries(p).map(async([m,y])=>{await this.ajouterRègleVariable({idVariable:s,règle:y,idRègle:m})}))}const h=await r.get("statut")||{statut:"active"};return await this.établirStatut({id:s,statut:h}),await Promise.all([n(),o()]),s}async inviterAuteur({idVariable:e,idCompteAuteur:r,rôle:n}){await this.client.donnerAccès({idBd:e,identité:r,rôle:n})}async sauvegarderNomsVariable({idVariable:e,noms:r}){const n=await this.client.obtIdBd({nom:"noms",racine:e,type:"keyvalue"});if(!n)throw new Error(`Permission de modification refusée pour Variable ${e}.`);const{bd:i,fOublier:s}=await this.client.ouvrirBdTypée({id:n,type:"keyvalue",schéma:zt});for(const a in r)await i.set(a,r[a]);await s()}async sauvegarderNomVariable({idVariable:e,langue:r,nom:n}){const i=await this.client.obtIdBd({nom:"noms",racine:e,type:"keyvalue"});if(!i)throw new Error(`Permission de modification refusée pour variable ${e}.`);const{bd:s,fOublier:a}=await this.client.ouvrirBdTypée({id:i,type:"keyvalue",schéma:zt});await s.set(r,n),await a()}async effacerNomVariable({idVariable:e,langue:r}){const n=await this.client.obtIdBd({nom:"noms",racine:e,type:"keyvalue"});if(!n)throw new Error(`Permission de modification refusée pour Variable ${e}.`);const{bd:i,fOublier:s}=await this.client.ouvrirBdTypée({id:n,type:"keyvalue",schéma:zt});await i.del(r),await s()}async sauvegarderDescriptionsVariable({idVariable:e,descriptions:r}){const n=await this.client.obtIdBd({nom:"descriptions",racine:e,type:"keyvalue"});if(!n)throw new Error(`Permission de modification refusée pour Variable ${e}.`);const{bd:i,fOublier:s}=await this.client.ouvrirBdTypée({id:n,type:"keyvalue",schéma:zt});for(const a in r)await i.set(a,r[a]);await s()}async sauvegarderDescriptionVariable({idVariable:e,langue:r,description:n}){const i=await this.client.obtIdBd({nom:"descriptions",racine:e,type:"keyvalue"});if(!i)throw new Error(`Permission de modification refusée pour Variable ${e}.`);const{bd:s,fOublier:a}=await this.client.ouvrirBdTypée({id:i,type:"keyvalue",schéma:zt});await s.set(r,n),await a()}async effacerDescriptionVariable({idVariable:e,langue:r}){const n=await this.client.obtIdBd({nom:"descriptions",racine:e,type:"keyvalue"});if(!n)throw new Error(`Permission de modification refusée pour Variable ${e}.`);const{bd:i,fOublier:s}=await this.client.ouvrirBdTypée({id:n,type:"keyvalue",schéma:zt});await i.del(r),await s()}async sauvegarderCatégorieVariable({idVariable:e,catégorie:r}){const{bd:n,fOublier:i}=await this.client.ouvrirBdTypée({id:e,type:"keyvalue",schéma:Xh});await n.set("catégorie",this.standardiserCatégorieVariable(r)),await i()}standardiserCatégorieVariable(e){return typeof e=="string"?{type:"simple",catégorie:e}:e}async sauvegarderUnitésVariable({idVariable:e,idUnité:r}){const{bd:n,fOublier:i}=await this.client.ouvrirBdTypée({id:e,type:"keyvalue",schéma:Xh});await n.set("unités",r),await i()}async ajouterRègleVariable({idVariable:e,règle:r,idRègle:n}){const i=await this.client.obtIdBd({nom:"règles",racine:e,type:"keyvalue"});if(!i)throw new Error(`Permission de modification refusée pour variable ${e}.`);n=n||rs();const{bd:s,fOublier:a}=await this.client.ouvrirBdTypée({id:i,type:"keyvalue",schéma:K5});return await s.put(n,r),await a(),n}async effacerRègleVariable({idVariable:e,idRègle:r}){const n=await this.client.obtIdBd({nom:"règles",racine:e,type:"keyvalue"});if(!n)throw new Error(`Permission de modification refusée pour variable ${e}.`);const{bd:i,fOublier:s}=await this.client.ouvrirBdTypée({id:n,type:"keyvalue",schéma:K5});await i.del(r),await s()}async modifierRègleVariable({idVariable:e,règleModifiée:r,idRègle:n}){await this.effacerRègleVariable({idVariable:e,idRègle:n}),await this.ajouterRègleVariable({idVariable:e,règle:r,idRègle:n})}async suivreNomsVariable({idVariable:e,f:r}){return await this.client.suivreBdDicDeClef({id:e,clef:"noms",schéma:zt,f:r})}async suivreDescriptionsVariable({idVariable:e,f:r}){return await this.client.suivreBdDicDeClef({id:e,clef:"descriptions",schéma:zt,f:r})}async suivreCatégorieVariable({idVariable:e,f:r}){return await this.client.suivreBd({id:e,type:"keyvalue",schéma:Xh,f:async n=>{const i=await n.get("catégorie");i&&i.catégorie&&i.type&&await r(this.standardiserCatégorieVariable(i))}})}async suivreUnitésVariable({idVariable:e,f:r}){return await this.client.suivreBd({id:e,type:"keyvalue",schéma:Xh,f:async n=>{const i=await n.get("unités");await r(i||null)}})}async suivreRèglesVariable({idVariable:e,f:r}){const n={catégorie:{},propres:{}},i=async()=>{await r(Object.entries(Object.assign({},n.catégorie,n.propres)).map(([u,f])=>({id:u,règle:f})))},s=async u=>{const f={[rs()]:{typeRègle:"catégorie",détails:{catégorie:u}}};n.catégorie=f,await i()},a=await this.suivreCatégorieVariable({idVariable:e,f:s}),o=async u=>{n.propres=u,await i()},c=await this.client.suivreBdDicDeClef({id:e,clef:"règles",schéma:K5,f:o});return async()=>{await a(),await c()}}async suivreQualitéVariable({idVariable:e,f:r}){const n={noms:{},descr:{},règles:[]},i=async()=>{const f=[Object.keys(n.noms).length?1:0,Object.keys(n.descr).length?1:0];n.catégorie?.catégorie==="numérique"&&f.push(n.unités?1:0),n.catégorie?.catégorie==="numérique"&&f.push(n.règles.length>=1?1:0);const h=f.reduce((d,g)=>d+g,0)/f.length;await r(h)},s=await this.suivreNomsVariable({idVariable:e,f:async f=>{n.noms=f,await i()}}),a=await this.suivreDescriptionsVariable({idVariable:e,f:async f=>{n.descr=f,await i()}}),o=await this.suivreUnitésVariable({idVariable:e,f:async f=>{n.unités=f,await i()}}),c=await this.suivreCatégorieVariable({idVariable:e,f:async f=>{n.catégorie=f,await i()}}),l=await this.suivreRèglesVariable({idVariable:e,f:async f=>{n.règles=f,await i()}});return async()=>{await Promise.all([s(),a(),o(),c(),l()])}}async établirStatut({id:e,statut:r}){const{bd:n,fOublier:i}=await this.client.ouvrirBdTypée({id:e,type:"keyvalue",schéma:Xh});await n.set("statut",r),await i()}async marquerObsolète({id:e,idNouvelle:r}){const{bd:n,fOublier:i}=await this.client.ouvrirBdTypée({id:e,type:"keyvalue",schéma:Xh});n.set("statut",{statut:"obsolète",idNouvelle:r}),await i()}async effacerVariable({idVariable:e}){await this.enleverDeMesVariables({idVariable:e}),await this.client.favoris.désépinglerFavori({idObjet:e});for(const r of["noms","descriptions","règles"]){const n=await this.client.obtIdBd({nom:r,racine:e});n&&await this.client.effacerBd({id:n})}await this.client.effacerBd({id:e})}}He([ot],gp.prototype,"suivreVariables",null);He([ot],gp.prototype,"suivreNomsVariable",null);He([ot],gp.prototype,"suivreDescriptionsVariable",null);He([ot],gp.prototype,"suivreCatégorieVariable",null);He([ot],gp.prototype,"suivreUnitésVariable",null);He([ot],gp.prototype,"suivreRèglesVariable",null);He([ot],gp.prototype,"suivreQualitéVariable",null);function nTt(t,e){for(var r,n=-1,i=t.length;++n<i;){var s=e(t[n]);s!==void 0&&(r=r===void 0?s:r+s)}return r}var iTt=nTt;function sTt(t){return t}var aTt=sTt,oTt=iTt,cTt=aTt;function lTt(t){return t&&t.length?oTt(t,cTt):0}var uTt=lTt;const Hne=si(uTt);var Xj=function(e){return e.reduce(fTt,0)/e.length};function fTt(t,e){return t+e}var hTt=Xj,dTt=function(e){var r=hTt(e);function n(i,s){var a=s-r;return i+a*a}return e.reduce(n,0)/e.length},TB=Xj,pTt=function(e,r){for(var n=e.length,i=0,s=TB(e),a=TB(r),o=[];i<n;i+=1){var c=e[i]-s,l=r[i]-a;o.push(c*l)}return TB(o)},Wne=Xj,G5=dTt,gTt=pTt,mTt=function(e,r,n){n=n||{};var i="K1"in n?n.K1:.01,s="K2"in n?n.K2:.03,a="L"in n?n.L:255,o="alpha"in n?n.alpha:1,c="beta"in n?n.beta:1,l="gamma"in n?n.gamma:1,u=i*a*(i*a),f=s*a*(s*a),h=f/2;function d(_,x){var A=Wne(_),C=Wne(x);return(2*A*C+u)/(A*A+C*C+u)}function g(_,x){var A=G5(_),C=G5(x),R=Math.sqrt(A),M=Math.sqrt(C);return(2*R*M+f)/(A+C+f)}function p(_,x){var A=Math.sqrt(G5(_)),C=Math.sqrt(G5(x)),R=gTt(_,x);return(R+h)/(A*C+h)}var m=Math.pow(d(e,r),o),y=Math.pow(g(e,r),c),v=Math.pow(p(e,r),l);return m*y*v};const yTt=si(mTt);function Kne(t){return t.split("").reverse().join("")}function vTt(t,e,r){const n=Kne(e);return r.map(i=>{const s=Math.max(0,i.end-e.length-i.errors),a=Kne(t.slice(s,i.end));return{start:Pve(a,n,i.errors).reduce((c,l)=>i.end-l.end<c?i.end-l.end:c,i.end),end:i.end,errors:i.errors}})}function kB(t){return(t|-t)>>31&1}function Gne(t,e,r,n){let i=t.P[r],s=t.M[r];const a=n>>>31,o=e[r]|a,c=o|s,l=(o&i)+i^i|o;let u=s|~(l|i),f=i&l;const h=kB(u&t.lastRowMask[r])-kB(f&t.lastRowMask[r]);return u<<=1,f<<=1,f|=a,u|=kB(n)-a,i=f|~(c|u),s=u&c,t.P[r]=i,t.M[r]=s,h}function Pve(t,e,r){if(e.length===0)return[];r=Math.min(r,e.length);const n=[],i=32,s=Math.ceil(e.length/i)-1,a={P:new Uint32Array(s+1),M:new Uint32Array(s+1),lastRowMask:new Uint32Array(s+1)};a.lastRowMask.fill(1<<31),a.lastRowMask[s]=1<<(e.length-1)%i;const o=new Uint32Array(s+1),c=new Map,l=[];for(let h=0;h<256;h++)l.push(o);for(let h=0;h<e.length;h+=1){const d=e.charCodeAt(h);if(c.has(d))continue;const g=new Uint32Array(s+1);c.set(d,g),d<l.length&&(l[d]=g);for(let p=0;p<=s;p+=1){g[p]=0;for(let m=0;m<i;m+=1){const y=p*i+m;if(y>=e.length)continue;e.charCodeAt(y)===d&&(g[p]|=1<<m)}}}let u=Math.max(0,Math.ceil(r/i)-1);const f=new Uint32Array(s+1);for(let h=0;h<=u;h+=1)f[h]=(h+1)*i;f[s]=e.length;for(let h=0;h<=u;h+=1)a.P[h]=-1,a.M[h]=0;for(let h=0;h<t.length;h+=1){const d=t.charCodeAt(h);let g;d<l.length?g=l[d]:(g=c.get(d),typeof g>"u"&&(g=o));let p=0;for(let m=0;m<=u;m+=1)p=Gne(a,g,m,p),f[m]+=p;if(f[u]-p<=r&&u<s&&(g[u+1]&1||p<0)){u+=1,a.P[u]=-1,a.M[u]=0;let m;if(u===s){const y=e.length%i;m=y===0?i:y}else m=i;f[u]=f[u-1]+m-p+Gne(a,g,u,p)}else for(;u>0&&f[u]>=r+i;)u-=1;u===s&&f[u]<=r&&(f[u]<r&&n.splice(0,n.length),n.push({start:-1,end:h+1,errors:f[u]}),r=f[u])}return n}function bTt(t,e,r){const n=Pve(t,e,r);return vTt(t,e,n)}const Zj=(t,e)=>{const n=bTt(e,t,Math.ceil(t.length/4)).sort((i,s)=>i.errors>s.errors?1:-1)[0];if(n)return{type:"texte",score:1/(n.errors+1),début:n.start,fin:n.end}},of=(t,e)=>(Array.isArray(e)&&(e=Object.fromEntries(e.map(i=>[i,i]))),Object.entries(e).map(([i,s])=>{const a=Zj(t,s);if(a){const{score:o,début:c,fin:l}=a;return{type:"résultat",score:o,clef:i,info:{type:"texte",texte:s,début:c,fin:l}}}}).filter(i=>i).sort((i,s)=>i.score>s.score?-1:1)[0]),wTt=(t,e)=>{if(!e)return 0;const{mssim:r}=yTt(t,e);return r},Ih=async(t,e,r,n)=>{const i=[],s=Object.fromEntries(Object.keys(t).map(o=>[o,void 0])),a=()=>{const o=Object.values(s).filter(c=>c).sort((c,l)=>Bve(c,l)?-1:1)[0];n(o)};return await Promise.all(Object.entries(t).map(async([o,c])=>{const l=async u=>{s[o]=u,a()};i.push(await c(e,r,l))})),async()=>{await Promise.all(i.map(o=>o()))}},xo=async(t,e,r,n,i)=>await bn({fListe:e,f:async c=>{const l=_Tt(c);if(l){const u={type:"résultat",de:t,clef:l.id,score:l.résultat.score,info:{type:"résultat",de:l.résultat.de,info:l.résultat.info}};l.résultat.clef&&(u.info.clef=l.résultat.clef),await i(u)}},fBranche:async(c,l)=>await r(n,c,async u=>{u&&l({id:c,résultat:u})})}),Bve=(t,e)=>{const r=(i,s)=>{for(;i.type==="résultat";)i=i.info;for(;s.type==="résultat";)s=s.info;const a=["vide","texte"],o=a.indexOf(i.type),c=a.indexOf(s.type);return o>c},n=(i,s)=>{for(;i.type==="résultat";)i=i.info;for(;s.type==="résultat";)s=s.info;switch(i.type){case"texte":return s.type==="texte"?i.fin-i.début>s.fin-s.début:!1;default:return!1}};return t.score>e.score?!0:t.score<e.score?!1:n(t.info,e.info)?!0:r(t.info,e.info)},_Tt=t=>Object.values(t).filter(r=>r).sort((r,n)=>Bve(r.résultat,n.résultat)?-1:1)[0],Ks=t=>async(e,r,n)=>{const i=Zj(t,r);if(i){const{score:s,début:a,fin:o}=i;await n({score:s,type:"résultat",de:"id",info:{type:"texte",début:a,fin:o,texte:r}})}else await n();return Li},Yne=()=>async(t,e,r)=>(await r({type:"résultat",score:1,de:"*",info:{type:"vide"}}),Li),Rb=t=>async(e,r,n)=>(t===""&&await n({type:"résultat",score:1,de:"*",info:{type:"vide"}}),Li),Dve=()=>async(t,e,r)=>{const n={noms:void 0,image:void 0,courriel:void 0},i=()=>({type:"résultat",score:[Object.keys(n.noms||{}).length>0,n.image,n.courriel].filter(Boolean).length/3,de:"activité",info:{type:"vide"}}),s=h=>{n.noms=h,r(i())},a=h=>{n.image=h,r(i())},o=h=>{n.courriel=h,r(i())},c=await t.profil.suivreNoms({idCompte:e,f:s}),l=await t.profil.suivreImage({idCompte:e,f:a}),u=await t.profil.suivreCourriel({idCompte:e,f:o});return async()=>{await Promise.all([c(),l(),u()])}},Ove=t=>async(e,r,n)=>{const i=a=>{const o=of(t,a);if(o){const{score:c,clef:l,info:u}=o;n({type:"résultat",score:c,clef:l,info:u,de:"nom"})}else n()};return await e.profil.suivreNoms({idCompte:r,f:i})},Nve=t=>async(e,r,n)=>{const i=a=>{const o=a?Zj(t,a):void 0;if(o&&a){const{score:c,début:l,fin:u}=o;n({type:"résultat",score:c,de:"courriel",info:{type:"texte",début:l,fin:u,texte:a}})}else n()};return await e.profil.suivreCourriel({idCompte:r,f:i})},xTt=t=>async(e,r,n)=>{const i=Ove(t),s=Nve(t),a=Ks(t),o=Rb(t);return await Ih({noms:i,courriel:s,id:a,vide:o},e,r,n)},ETt=t=>async(e,r,n)=>{const i=a=>{const o=wTt(t,a);n({type:"résultat",score:o,de:"image",info:{type:"vide"}})};return await e.profil.suivreImage({idCompte:r,f:i})},Xne={type:"object",additionalProperties:{type:"string"},required:[]},Zne=1e3*10,STt=.8,ATt=.9,Y5=.9,TTt=.7,kTt=1e3*60*60*24*30,CTt=50;class Us extends g0{client;bloquésPrivés;_fermé;dispositifsEnLigne;fsOublier;événements;constructor({client:e}){super({client:e,clef:"réseau",schémaBdPrincipale:Xne}),this.client=e,this.bloquésPrivés=new Set,this.dispositifsEnLigne={},this.fsOublier=[],this._fermé=!1,this.événements=new qi.EventEmitter}async initialiser(){const{sfip:e}=await this.client.attendreSfipEtOrbite(),r={},n=e.libp2p.services.pubsub;n.subscribe(this.client.sujet_réseau);const i=l=>{const u=l.detail.msg,f=rs();if(u.topic===this.client.sujet_réseau)try{const h=this.messageReçu({msg:JSON.parse(new TextDecoder().decode(u.data))});r[f]=h,h.then(()=>{delete r[f]})}catch(h){console.error(h.toString()),console.error(h.stack.toString())}};n.addEventListener("gossipsub:message",i),this.fsOublier.push(async()=>{n.isStarted()&&n.unsubscribe(this.client.sujet_réseau),n.removeEventListener("gossipsub:message",i),await Promise.all(Object.values(r))});const s=e.libp2p,a=()=>{this.événements.emit("changementConnexions")},o=["peer:discovery","peer:connect","peer:disconnect"];for(const l of o)s.addEventListener(l,a);this.fsOublier.push(...o.map(l=>async()=>s.removeEventListener(l,a)));const c=setInterval(()=>{this.direSalut({})},Zne);this.fsOublier.unshift(async()=>clearInterval(c)),await this.direSalut({})}async épingler(){await this.client.épingles.épinglerBd({id:await this.obtIdBd(),récursif:!1,fichiers:!1})}async envoyerMessageAuDispositif({msg:e,idSFIP:r}){r&&(e.destinataire=r);const n=this.client.sujet_réseau,{sfip:i}=await this.client.attendreSfipEtOrbite(),s=i.libp2p.services.pubsub,a=new TextEncoder().encode(JSON.stringify(e));await s.publish(n,We.from(a))}async envoyerMessageAuMembre({msg:e,idCompte:r,encrypté:n=!0}){const s={signature:await this.client.signer({message:JSON.stringify(e)}),valeur:e},a=Date.now(),o=Object.values(this.dispositifsEnLigne).filter(c=>c.infoDispositif.idCompte===r).filter(c=>c.vuÀ&&a-c.vuÀ<Zne+1e3*30);if(!o.length)throw new Error(`Aucun dispositif présentement en ligne pour membre ${r}`);await Promise.all(o.map(async c=>{const{idSFIP:l,encryption:u}=c.infoDispositif;if(n){if(u?.type!==this.client.encryption.nom)return;const f=await this.client.encryption.encrypter({message:JSON.stringify(s),clefPubliqueDestinataire:u.clefPublique}),{publique:h}=await this.client.encryption.obtClefs(),d={encrypté:!0,clefPubliqueExpéditeur:h,données:f};await this.envoyerMessageAuDispositif({msg:d,idSFIP:l})}else{const f={encrypté:!1,données:s};await this.envoyerMessageAuDispositif({msg:f,idSFIP:l})}}))}async direSalut({à:e}){const r={type:"Salut !",contenu:{idSFIP:(await this.client.obtIdSFIP()).toString(),idDispositif:this.client.orbite.identity.id,clefPublique:this.client.orbite.identity.publicKey,signatures:this.client.orbite.identity.signatures,idCompte:await this.client.obtIdCompte()}},{publique:n}=await this.client.encryption.obtClefs();this.client.encryption&&(r.contenu.encryption={type:this.client.encryption.nom,clefPublique:n});const s={encrypté:!1,données:{signature:await this.client.signer({message:JSON.stringify(r)}),valeur:r}};try{await this.envoyerMessageAuDispositif({msg:s,idSFIP:e})}catch(a){if(!a.toString().includes("PublishError.InsufficientPeers"))throw a}}async envoyerDemandeRejoindreCompte({idCompte:e,codeSecret:r}){const n=await this.client.obtIdDispositif(),i={type:"Je veux rejoindre ce compte",contenu:{idDispositif:n,empreinteVérification:this.client.empreinteInvitation({idDispositif:n,codeSecret:r})}};await this.envoyerMessageAuMembre({msg:i,idCompte:e})}async messageReçu({msg:e}){if(this._fermé)return;const{encrypté:r,destinataire:n}=e;if(n&&n!==(await this.client.obtIdSFIP()).toString())return;const i=r?JSON.parse(await this.client.encryption.décrypter({message:e.données,clefPubliqueExpéditeur:e.clefPubliqueExpéditeur})):e.données;let s,a;try{({valeur:s,signature:a}=i)}catch{return}const{orbite:o}=await this.client.attendreSfipEtOrbite();if(a.clefPublique===o.identity.publicKey&&s.type!=="Salut !"||!await this.client.vérifierSignature({signature:a,message:JSON.stringify(s)}))return;const l=s.contenu;switch(s.type){case"Salut !":{const u=l,{clefPublique:f}=u;if(f!==a.clefPublique)return;await this.recevoirSalut({message:u}),n||await this.direSalut({à:u.idSFIP});break}case"Je veux rejoindre ce compte":{const u=l;await this.client.considérerRequêteRejoindreCompte({requête:u});break}}}async recevoirSalut({message:e}){await this._validerInfoMembre({info:e})&&(this.dispositifsEnLigne[e.idDispositif]={infoDispositif:e,vuÀ:e.idDispositif===await this.client.obtIdDispositif()?void 0:new Date().getTime()},this.événements.emit("membreVu"),await this._sauvegarderDispositifsEnLigne())}_nettoyerDispositifsEnLigne(){const e=new Date().getTime(),r=Object.values(this.dispositifsEnLigne).filter(s=>e-(s.vuÀ||0)>kTt).sort((s,a)=>(s.vuÀ||0)<(a.vuÀ||0)?-1:1).map(s=>s.infoDispositif.idDispositif),n=Object.keys(this.dispositifsEnLigne).length-CTt;r.slice(r.length-n).forEach(s=>delete this.dispositifsEnLigne[s])}async _sauvegarderDispositifsEnLigne(){this._nettoyerDispositifsEnLigne(),await this.client.sauvegarderAuStockageLocal({clef:"dispositifsEnLigne",val:JSON.stringify(this.dispositifsEnLigne)})}async _validerInfoMembre({info:e}){const{idCompte:r,signatures:n,clefPublique:i,idDispositif:s}=e;if(!(r&&n&&i&&s))return!1;const a=await this.client.vérifierSignature({signature:{signature:n.id,clefPublique:i},message:s}),o=await this.client.vérifierSignature({signature:{signature:n.publicKey,clefPublique:s},message:i+n.id});if(!to(r))return!1;const{bd:c,fOublier:l}=await this.client.orbite.ouvrirBd({id:r});if(!LV(c.access))return!1;const u=c.access.estAutorisé(s);return await l(),a&&o&&u}async faireConfianceAuMembre({idCompte:e}){const{bd:r,fOublier:n}=await this.obtBd();await r.set(e,"FIABLE"),await n()}async nePlusFaireConfianceAuMembre({idCompte:e}){const{bd:r,fOublier:n}=await this.obtBd();Object.keys(await r.allAsJSON()).includes(e)&&await r.get(e)==="FIABLE"&&await r.del(e),await n()}async suivreFiables({f:e,idCompte:r}){const n=async i=>{const s=Object.keys(i).filter(a=>i[a]==="FIABLE");return await e(s)};return await this.suivreBdPrincipale({idCompte:r,f:n})}async _initaliserBloquésPrivés(){const e=await this.client.obtDeStockageLocal({clef:"membresBloqués"});e&&(JSON.parse(e).forEach(r=>this.bloquésPrivés.add(r)),this.événements.emit("changementMembresBloqués"))}async _sauvegarderBloquésPrivés(){const e=[...this.bloquésPrivés];this.client.sauvegarderAuStockageLocal({clef:"membresBloqués",val:JSON.stringify(e)})}async bloquerMembre({idCompte:e,privé:r=!1}){if(r)await this.débloquerMembre({idCompte:e}),this.bloquésPrivés.add(e),await this._sauvegarderBloquésPrivés();else{const{bd:n,fOublier:i}=await this.obtBd();await this.débloquerMembre({idCompte:e}),await n.set(e,"BLOQUÉ"),await i()}this.événements.emit("changementMembresBloqués")}async débloquerMembre({idCompte:e}){const{bd:r,fOublier:n}=await this.obtBd();Object.keys(await r.allAsJSON()).includes(e)&&await r.get(e)==="BLOQUÉ"&&await r.del(e),await n(),this.bloquésPrivés.has(e)&&(this.bloquésPrivés.delete(e),await this._sauvegarderBloquésPrivés()),this.événements.emit("changementMembresBloqués")}async suivreBloquésPubliques({f:e,idCompte:r}){const n=async i=>{const s=Object.keys(i).filter(a=>i[a]==="BLOQUÉ");return await e(s)};return await this.suivreBdPrincipale({idCompte:r,f:n})}async suivreBloqués({f:e,idCompte:r}){const n=[];let i=[];const s=async()=>{const a=[...new Set([...[...this.bloquésPrivés].map(o=>({idCompte:o,privé:!0})),...i.map(o=>({idCompte:o,privé:!1}))])];return await e(a)};return n.push(await this.suivreBloquésPubliques({f:async a=>(i=a,await s()),idCompte:r})),(r===void 0||r===this.client.idCompte)&&(await this._initaliserBloquésPrivés(),this.événements.on("changementMembresBloqués",s),n.push(async()=>{this.événements.off("changementMembresBloqués",s)}),await s()),async()=>{await Promise.all(n.map(a=>a()))}}async suivreRelationsImmédiates({f:e,idCompte:r}){r=r||this.client.idCompte;const n=[],i={suivis:[],favoris:[],coauteursBds:[],coauteursProjets:[],coauteursVariables:[],coauteursMotsClefs:[]};let s=[];const a=async()=>{const d=[...i.suivis,...i.favoris,...i.coauteursBds,...i.coauteursProjets,...i.coauteursVariables,...i.coauteursMotsClefs,...s.map(m=>({idCompte:m,confiance:-1}))],p=[...new Set(d)].map(m=>{const{idCompte:y}=m;if(s.includes(y))return{idCompte:y,confiance:-1};const _=1-d.filter(x=>x.idCompte===y).map(x=>x.confiance).map(x=>1-x).reduce((x,A)=>A*x,1);return{idCompte:y,confiance:_}});return await e(p)};n.push(await this.suivreBloqués({f:async d=>{s=d.map(g=>g.idCompte),await a()},idCompte:r})),n.push(await this.client.suivreBdDicDeClef({id:r,clef:"réseau",schéma:Xne,f:async d=>(i.suivis=Object.entries(d).filter(([g,p])=>p==="FIABLE").map(([g,p])=>({idCompte:g,confiance:1})),await a())}));const o=async(d,g,p)=>{n.push(await bn({fListe:d,f:async m=>(i[g]=m.map(y=>({idCompte:y,confiance:p})),await a()),fBranche:async(m,y)=>await this.client.suivreAccèsBd({id:m,f:v=>y(v.map(_=>_.idCompte).filter(_=>_!==r))})}))};return await o(async d=>await this.suivreFavorisMembre({idCompte:r,f:g=>d((g||[]).map(p=>p.idObjet))}),"favoris",TTt),await o(async d=>await this.suivreBdsMembre({idCompte:r,f:g=>d(g||[])}),"coauteursBds",Y5),await o(async d=>await this.suivreProjetsMembre({idCompte:r,f:g=>d(g||[])}),"coauteursProjets",Y5),await o(async d=>await this.suivreVariablesMembre({idCompte:r,f:g=>d(g||[])}),"coauteursVariables",Y5),await o(async d=>await this.suivreMotsClefsMembre({idCompte:r,f:g=>d(g||[])}),"coauteursMotsClefs",Y5),async()=>{await Promise.all(n.map(d=>d()))}}async suivreRelationsConfiance({f:e,profondeur:r=1/0,idCompteDébut:n}){const i=n||await this.client.obtIdCompte(),s={},a={},o=new kc;let c=!1;const l=y=>Object.entries(s).filter(([v,_])=>_.relations.map(x=>x.idCompte).includes(y)).map(([v,_])=>v),u=y=>{if(y===i)return 0;const v=({ids:_,p:x=1,déjàVues:A=new Set})=>{const C=_.map(R=>l(R).filter(M=>!A.has(M))).flat();return C.includes(i)?x:C.length?(A=new Set(...A,...C),v({ids:C,p:x+1,déjàVues:A})):1/0};return v({ids:[y]})},f=async()=>{const y=[];for(const[v,_]of Object.entries(s))for(const x of _.relations){const A=u(v)+1;y.push({de:v,pour:x.idCompte,confiance:x.confiance,profondeur:A})}return await e(y)},h=async y=>{s[y]={relations:[]};const v=await this.suivreRelationsImmédiates({f:_=>{s[y]&&(s[y].relations=_,g())},idCompte:y});a[y]=v},d=async y=>{await a[y](),delete a[y],delete s[y]},g=async()=>{if(c)return;await o.acquire("modification");const y=Object.keys(s).filter(_=>u(_)>=r),v=[...new Set(Object.entries(s).filter(([_,x])=>u(_)+1<r).map(([_,x])=>x.relations.map(A=>A.idCompte)).flat())].filter(_=>!Object.keys(s).includes(_));await Promise.all(y.map(_=>d(_))),await Promise.all(v.map(_=>h(_))),await f(),o.release("modification")};return await h(i),{fOublier:async()=>{c=!0,await Promise.all(Object.values(a).map(y=>y()))},fChangerProfondeur:async y=>{r=y,await g()}}}async suivreComptesRéseau({f:e,profondeur:r,idCompteDébut:n}){const i=async s=>{s.push({de:this.client.idCompte,pour:this.client.idCompte,confiance:1,profondeur:0});const a={};s.forEach(c=>{Object.keys(a).includes(c.pour)||(a[c.pour]=[]),a[c.pour].push(c)});const o=Object.entries(a).map(([c,l])=>{const u=l.find(m=>m.de===this.client.idCompte);if(u?.confiance===1||u?.confiance===-1)return{idCompte:c,profondeur:u.pour===this.client.idCompte?0:1,confiance:u.confiance};const f=Math.min(...l.map(m=>m.profondeur)),h=l.filter(m=>m.confiance>=0),g=1-l.filter(m=>m.confiance<0).map(m=>1+m.confiance*Math.pow(ATt,m.profondeur-1)).reduce((m,y)=>y*m,1),p=1-h.map(m=>1-m.confiance*Math.pow(STt,m.profondeur-1)).reduce((m,y)=>y*m,1)-g;return{idCompte:c,profondeur:f,confiance:p}});return await e(o)};return await this.suivreRelationsConfiance({f:i,profondeur:r,idCompteDébut:n})}async suivreComptesRéseauEtEnLigne({f:e,profondeur:r,idCompteDébut:n}){const i={réseau:[],enLigne:[]},s=async()=>{const f=[...i.réseau];return i.enLigne.forEach(h=>{f.find(d=>d.idCompte===h.idCompte)||f.push(h)}),await e(f)},a=await this.suivreConnexionsMembres({f:async f=>{const h=f.filter(d=>d.infoMembre.idCompte!==this.client.idCompte).map(d=>({idCompte:d.infoMembre.idCompte,profondeur:1/0,confiance:0}));return i.enLigne=h,await s()}}),o=async f=>(i.réseau=f,await s()),{fOublier:c,fChangerProfondeur:l}=await this.suivreComptesRéseau({f:o,profondeur:r,idCompteDébut:n});return{fOublier:async()=>{await a(),await c()},fChangerProfondeur:l}}async suivreConfianceMonRéseauPourMembre({idCompte:e,f:r,profondeur:n,idCompteRéférence:i}){const s=i||await this.client.obtIdCompte(),a=async o=>{const c=o.find(l=>l.idCompte===e);return await r(c?.confiance||0)};return await this.suivreComptesRéseau({f:a,profondeur:n,idCompteDébut:s})}async suivreConnexionsPostesSFIP({f:e}){const r=async()=>{const{sfip:i}=await this.client.attendreSfipEtOrbite(),s=i.libp2p.getPeers(),a=i.libp2p.getConnections();return await e(s.map(o=>{const c=o.toString(),l=a.filter(u=>u.remotePeer.toString()===c).map(u=>u.remoteAddr.toString());return{pair:c,adresses:l}}))};return this.événements.on("changementConnexions",r),await r(),async()=>{this.événements.off("changementConnexions",r)}}async suivreConnexionsDispositifs({f:e}){const r={infoDispositif:{idSFIP:(await this.client.obtIdSFIP()).toString(),idDispositif:await this.client.obtIdDispositif(),idCompte:await this.client.obtIdCompte(),clefPublique:(await this.client.obtIdentitéOrbite()).publicKey,encryption:{type:await this.client.encryption.obtNom(),clefPublique:(await this.client.encryption.obtClefs()).publique},signatures:(await this.client.obtIdentitéOrbite()).signatures}},n=async()=>await e([...Object.values(this.dispositifsEnLigne),r]);return this.événements.on("membreVu",n),await n(),async()=>{this.événements.off("membreVu",n)}}async suivreConnexionsMembres({f:e}){return await bn({fListe:async i=>{const s=async a=>{const o={};for(const c of a){const{idCompte:l}=c.infoDispositif;o[l]||(o[l]={infoMembre:{idCompte:l,dispositifs:[]}});const{infoMembre:u,vuÀ:f}=o[l];u.dispositifs.push(c.infoDispositif),o[l].vuÀ=f?c.vuÀ?Math.max(f,c.vuÀ):f:c.vuÀ}return await i(Object.values(o))};return await this.suivreConnexionsDispositifs({f:s})},f:e,fBranche:async(i,s,a)=>await this.suivreProtocolesMembre({idCompte:i,f:o=>{s({infoMembre:{...a.infoMembre,protocoles:Object.values(o).flat()},vuÀ:a.vuÀ})}}),fIdBdDeBranche:i=>i.infoMembre.idCompte,fCode:i=>i.infoMembre.idCompte})}async suivreProtocolesMembre({f:e,idCompte:r}){return await this.client.suivreBdDicDeClef({id:r||await this.client.obtIdCompte(),clef:"protocoles",schéma:K9,f:e})}async suivreProtocolesDispositif({idDispositif:e,f:r}){const n=e||await this.client.obtIdDispositif();return await fs({fRacine:async({fSuivreRacine:o})=>await this.suivreConnexionsDispositifs({f:async c=>{const l=c.find(u=>u.infoDispositif.idDispositif===n);if(l){const{idCompte:u}=l.infoDispositif;return await o(u)}else return await o(void 0)}}),f:async o=>{if(o)return await r(o[n])},fSuivre:async({id:o,fSuivreBd:c})=>await this.suivreProtocolesMembre({f:c,idCompte:o})})}async rechercher({f:e,nRésultatsDésirés:r=1/0,fRecherche:n,fConfiance:i,fQualité:s,fObjectif:a,fScore:o}){o||(o=N=>(N.confiance+N.qualité+N.objectif.score)/3),a=a||Yne();const c={},l={},u=3e3;let f,h=3,d=!1;const g=async N=>{h=N,A&&await A(N),f&&clearTimeout(f)},p=(N=u)=>{if(d)return;f&&clearTimeout(f);const Y=Object.values(c).map(U=>U.résultats).flat().map(U=>U.résultatObjectif.score),H=Y.length>=r?Math.min(...Y.slice(0,r)):0,E=Object.values(c).reduce(function(U,O){return U[String(O.membre.profondeur)]=U[String(O.membre.profondeur)]||[],U[String(O.membre.profondeur)].push(...O.résultats),U},{}),w=Object.entries(E).sort((U,O)=>Number(U[0])<Number(O[0])?-1:1).map(U=>U[1]).map(U=>U.filter(O=>O.résultatObjectif.score>=H).length),T=w.slice(w.length-3),L=w.slice(w.length-4),I=Math.max(3,Hne(T)?h+1:Hne(L)?h:h-1);I>h?f=setTimeout(()=>g(I),N):I<h&&g(I)},m=async()=>{const Y=Object.values(c).map(H=>H.résultats).flat().sort((H,E)=>H.résultatObjectif.score<E.résultatObjectif.score?1:-1);await e(Y.slice(0,r)),p()},y=async N=>{const{idCompte:Y}=N,H=async T=>await n({idCompte:N.idCompte,fSuivi:async L=>await T(L||[])}),E=async T=>(c[Y].résultats=T,await m()),k=async(T,L)=>{const I={id:T},U=async()=>{const{objectif:W,confiance:q,qualité:G}=I;if(W&&q!==void 0&&G!==void 0){const ee={id:T,résultatObjectif:{...W,score:o(I)}};return await L(ee)}else return await L(void 0)},O=async W=>(I.objectif=W,await U()),D=await a(this.client,T,O),B=await i(T,async W=>(I.confiance=W,await U())),F=await s(T,async W=>(I.qualité=W,await U()));return async()=>{await Promise.all([D(),B(),F()])}};c[Y]={résultats:[],membre:N,mettreÀJour:m};const w=await bn({fListe:H,f:E,fBranche:k});l[Y]=w},v=async N=>{await l[N](),delete c[N],delete l[N],await m()},_=new kc,x=async N=>{await _.acquire("rechercher"),N=N.filter(k=>k.confiance>=0);const Y=N.filter(k=>!c[k.idCompte]),H=Object.keys(c).filter(k=>!N.find(w=>w.idCompte===k)),E=N.filter(k=>{const w=c[k.idCompte];return w&&(k.confiance!==w.membre.confiance||k.profondeur!==w.membre.profondeur)});await Promise.all(Y.map(y)),await Promise.all(E.map(async k=>await c[k.idCompte].mettreÀJour(k))),await Promise.all(H.map(k=>v(k))),_.release("rechercher")},{fChangerProfondeur:A,fOublier:C}=await this.suivreComptesRéseauEtEnLigne({f:x,profondeur:h});return{fChangerN:async(N=1/0)=>{const Y=r;r=N,N!==Y&&(await m(),p(0))},fOublier:async()=>{d=!0,f&&clearTimeout(f),await C(),await Promise.all(Object.values(l).map(N=>N()))}}}async rechercherMembres({f:e,nRésultatsDésirés:r,fObjectif:n}){const i=async(o,c)=>{const{fOublier:l}=await this.suivreConfianceMonRéseauPourMembre({idCompte:o,f:c,profondeur:4});return l},s=async({idCompte:o,fSuivi:c})=>(await c([o]),Li),a=async(o,c)=>await Dve()(this.client,o,async u=>{await c(u?.score||0)});return await this.rechercher({f:e,nRésultatsDésirés:r,fRecherche:s,fConfiance:i,fQualité:a,fObjectif:n})}async suivreConfianceAuteurs({idItem:e,clef:r,f:n}){return await bn({fListe:async c=>await this.suivreAuteursObjet({idObjet:e,clef:r,f:async l=>{const u=l.filter(f=>f.accepté).map(f=>f.idCompte);return await c(u)}}),f:async c=>{const l=c.reduce((u,f)=>u+f,0);await n(l)},fBranche:async(c,l)=>{const{fOublier:u}=await this.suivreConfianceMonRéseauPourMembre({idCompte:c,f:l,profondeur:4});return u},fRéduction:c=>c.flat()})}async rechercherObjets({f:e,clef:r,nRésultatsDésirés:n,fRecherche:i,fRechercheLesMiens:s,fQualité:a,fObjectif:o,toutLeRéseau:c=!0}){if(!c){const f=o||Yne();return await bn({fListe:async h=>({fOublier:await s(h),fChangerN:()=>Promise.resolve()}),f:e,fBranche:async(h,d)=>await f(this.client,h,async g=>{if(g)return await d({id:h,résultatObjectif:g})})})}const l=async({idCompte:f,fSuivi:h})=>{const d={propres:[],favoris:[]},g=async()=>{const v=[...new Set([...d.propres,...d.favoris])];await h(v)},p=await i({idCompte:f,f:async v=>{d.propres=v||[],await g()}}),m=v=>{switch(v){case"bds":return"bd";case"motsClefs":return"motClef";case"nuées":return"nuée";case"projets":return"projet";case"variables":return"variable";default:return}},y=await this.client.suivreBdsSelonCondition({fListe:async v=>await this.suivreFavorisMembre({idCompte:f,f:async _=>v(_.map(x=>x.idObjet))}),fCondition:async(v,_)=>await this.client.suivreTypeObjet({idObjet:v,f:async x=>await _(x===m(r))}),f:async v=>{d.favoris=v||[],await g()}});return async()=>{await p(),await y()}},u=async(f,h)=>await this.suivreConfianceAuteurs({idItem:f,clef:r,f:h});return await this.rechercher({f:e,nRésultatsDésirés:n,fRecherche:l,fConfiance:u,fQualité:a,fObjectif:o})}async rechercherNuées({f:e,nRésultatsDésirés:r,fObjectif:n,toutLeRéseau:i=!0}){const s=this.suivreNuéesMembre.bind(this),a=async(c,l)=>await this.client.nuées.suivreQualitéNuée({idNuée:c,f:l}),o=async c=>await this.client.nuées.suivreNuées({f:c});return await this.rechercherObjets({f:e,clef:"nuées",nRésultatsDésirés:r,fRecherche:s,fRechercheLesMiens:o,fQualité:a,fObjectif:n,toutLeRéseau:i})}async rechercherBds({f:e,nRésultatsDésirés:r,fObjectif:n,toutLeRéseau:i=!0}){const s=this.suivreBdsMembre.bind(this),a=async(c,l)=>{const u=async f=>await l(f.total);return await this.client.bds.suivreQualitéBd({idBd:c,f:u})},o=async c=>await this.client.bds.suivreBds({f:c});return await this.rechercherObjets({f:e,clef:"bds",nRésultatsDésirés:r,fRecherche:s,fRechercheLesMiens:o,fQualité:a,fObjectif:n,toutLeRéseau:i})}async rechercherVariables({f:e,nRésultatsDésirés:r,fObjectif:n,toutLeRéseau:i=!0}){const s=this.suivreVariablesMembre.bind(this),a=async(c,l)=>await this.client.variables.suivreQualitéVariable({idVariable:c,f:l}),o=async c=>await this.client.variables.suivreVariables({f:c});return await this.rechercherObjets({f:e,clef:"variables",nRésultatsDésirés:r,fRecherche:s,fRechercheLesMiens:o,fQualité:a,fObjectif:n,toutLeRéseau:i})}async rechercherMotsClefs({f:e,nRésultatsDésirés:r,fObjectif:n,toutLeRéseau:i=!0}){const s=this.suivreMotsClefsMembre.bind(this),a=async(c,l)=>await this.client.motsClefs.suivreQualitéMotClef({idMotClef:c,f:l}),o=async c=>await this.client.motsClefs.suivreMotsClefs({f:c});return await this.rechercherObjets({f:e,clef:"motsClefs",nRésultatsDésirés:r,fRecherche:s,fRechercheLesMiens:o,fQualité:a,fObjectif:n,toutLeRéseau:i})}async rechercherProjets({f:e,nRésultatsDésirés:r,fObjectif:n,toutLeRéseau:i=!0}){const s=this.suivreProjetsMembre.bind(this),a=async(c,l)=>await this.client.projets.suivreQualitéProjet({idProjet:c,f:l}),o=async c=>await this.client.projets.suivreProjets({f:c});return await this.rechercherObjets({f:e,clef:"projets",nRésultatsDésirés:r,fRecherche:s,fRechercheLesMiens:o,fQualité:a,fObjectif:n,toutLeRéseau:i})}async suivreAuteursObjet({idObjet:e,clef:r,f:n}){return await bn({fListe:async l=>await this.client.suivreAccèsBd({id:e,f:l}),f:n,fBranche:async(l,u,f)=>{const h=async g=>(g=g||[],u([{idCompte:f.idCompte,rôle:f.rôle,accepté:g.includes(e)}]));let d;switch(r){case"motsClefs":d=await this.client.motsClefs.suivreMotsClefs({f:h,idCompte:l});break;case"variables":d=await this.client.variables.suivreVariables({f:h,idCompte:l});break;case"bds":d=await this.client.bds.suivreBds({f:h,idCompte:l});break;case"nuées":d=await this.client.nuées.suivreNuées({f:h,idCompte:l});break;case"projets":d=await this.client.projets.suivreProjets({f:h,idCompte:l});break;default:throw new Error(r)}return d},fIdBdDeBranche:l=>l.idCompte,fCode:l=>l.idCompte})}async suivreAuteursMotClef({idMotClef:e,f:r}){return await this.suivreAuteursObjet({idObjet:e,clef:"motsClefs",f:r})}async suivreAuteursVariable({idVariable:e,f:r}){return await this.suivreAuteursObjet({idObjet:e,clef:"variables",f:r})}async suivreAuteursBd({idBd:e,f:r}){return await this.suivreAuteursObjet({idObjet:e,clef:"bds",f:r})}async suivreAuteursProjet({idProjet:e,f:r}){return await this.suivreAuteursObjet({idObjet:e,clef:"projets",f:r})}async suivreAuteursNuée({idNuée:e,f:r}){return await this.suivreAuteursObjet({idObjet:e,clef:"nuées",f:r})}async suivreObjetsMembre({idCompte:e,fListeObjets:r,fSuivi:n}){return await this.client.suivreBdsSelonCondition({fListe:r,fCondition:async(i,s)=>await this.client.suivreAccèsBd({id:i,f:a=>s(a.map(o=>o.idCompte).includes(e))}),f:n})}async suivreBdsMembre({idCompte:e,f:r}){return await this.suivreObjetsMembre({idCompte:e,fListeObjets:async n=>await this.client.bds.suivreBds({f:n,idCompte:e}),fSuivi:r})}async suivreProjetsMembre({idCompte:e,f:r}){return await this.suivreObjetsMembre({idCompte:e,fListeObjets:async n=>await this.client.projets.suivreProjets({f:n,idCompte:e}),fSuivi:r})}async suivreFavorisMembre({idCompte:e,f:r}){return await this.client.favoris.suivreFavoris({f:r,idCompte:e})}async suivreVariablesMembre({idCompte:e,f:r}){return await this.suivreObjetsMembre({idCompte:e,fListeObjets:async n=>await this.client.variables.suivreVariables({f:n,idCompte:e}),fSuivi:r})}async suivreMotsClefsMembre({idCompte:e,f:r}){return await this.suivreObjetsMembre({idCompte:e,fListeObjets:async n=>await this.client.motsClefs.suivreMotsClefs({f:n,idCompte:e}),fSuivi:r})}async suivreNuéesMembre({idCompte:e,f:r}){return await this.suivreObjetsMembre({idCompte:e,fListeObjets:async n=>await this.client.nuées.suivreNuées({f:n,idCompte:e}),fSuivi:r})}async suivreFavorisObjet({idObjet:e,f:r,profondeur:n}){const i=async o=>{const c=o.filter(l=>l.idObjet===e);await r(c)},s=async o=>{const c=async l=>await o([this.client.idCompte,...l.map(u=>u.idCompte)]);return await this.suivreComptesRéseauEtEnLigne({f:c,profondeur:n,idCompteDébut:this.client.idCompte})},a=async(o,c)=>await this.suivreFavorisMembre({idCompte:o,f:l=>c(l?l.map(u=>({idCompte:o,...u})):void 0)});return await this.client.suivreBdsDeFonctionRecherche({fListe:s,f:i,fBranche:a})}async suivreRéplications({idObjet:e,f:r,profondeur:n}){const i={connexionsMembres:[],connexionsDispositifs:[],favoris:[]},s=async()=>{const{connexionsMembres:m,favoris:y}=i,v=y.map(C=>C.favoris.idCompte),_=m.filter(C=>v.includes(C.infoMembre.idCompte)),x=(await Promise.all(y.map(async C=>{const{favoris:R,dispositifs:M}=C;return await Promise.all(M.map(async N=>{const Y=i.connexionsDispositifs.find(k=>k.infoDispositif.idDispositif===N)?.vuÀ,H=i.connexionsDispositifs.find(k=>k.infoDispositif.idDispositif===N)?.infoDispositif.idCompte;return{idObjet:e,idDispositif:N,idCompte:H,bd:await this.client.favoris.estÉpingléSurDispositif({dispositifs:R.dispositifs,idDispositif:N}),fichiers:await this.client.favoris.estÉpingléSurDispositif({dispositifs:R.dispositifsFichiers,idDispositif:N}),récursif:R.récursif,vuÀ:Y}}))}))).flat();return await r({membres:_,dispositifs:x})},a=await this.suivreConnexionsMembres({f:async m=>(i.connexionsMembres=m,await s())}),o=await this.suivreConnexionsDispositifs({f:async m=>(i.connexionsDispositifs=m,await s())}),c=async m=>(i.favoris=m,await s()),l=async m=>await this.suivreFavorisObjet({idObjet:e,f:m,profondeur:n}),u=async(m,y,v)=>{const _=async A=>await y({favoris:v,dispositifs:A}),x=await this.client.suivreDispositifs({f:_,idCompte:m});return async()=>{await x()}},f=m=>m.idCompte,h=m=>m.idCompte,{fOublier:d,fChangerProfondeur:g}=await this.client.suivreBdsDeFonctionRecherche({fListe:l,f:c,fBranche:u,fIdBdDeBranche:f,fCode:h});return{fOublier:async()=>{await d(),await a(),await o()},fChangerProfondeur:g}}async suivreBdsDeNuée({idNuée:e,f:r,nRésultatsDésirés:n}){const i=async(a,o)=>await this.client.bds.rechercherBdsParNuée({idNuée:e,f:o,idCompte:a}),s=async a=>await this.suivreComptesRéseauEtEnLigne({f:async o=>await a(o.map(c=>c.idCompte)),profondeur:n});return await this.client.suivreBdsDeFonctionRecherche({fListe:s,f:r,fBranche:i})}async suivreÉlémentsDeTableauxUniques({idNuéeUnique:e,clef:r,f:n,nBds:i=100}){const s=async l=>{const u=async h=>await this.suivreBdsDeNuée({idNuée:e,f:h,nRésultatsDésirés:i}),f=async(h,d)=>await this.suivreAuteursBd({idBd:h,f:async g=>{const p=g.find(y=>y.accepté)?.idCompte;return await d(p?{bd:h,idCompte:p}:void 0)}});return await this.client.suivreBdsDeFonctionRecherche({fListe:u,f:l,fBranche:f})},a=async(l,u,f)=>{const{idCompte:h}=f;return await fs({fRacine:async({fSuivreRacine:m})=>await this.client.bds.suivreIdTableauParClef({idBd:l,clef:r,f:y=>{y&&m(y)}}),f:async m=>await u(m||[]),fSuivre:async({id:m,fSuivreBd:y})=>{const v=async _=>{const x=_.map(A=>({idCompte:h,élément:A}));return await y(x)};return await this.client.tableaux.suivreDonnées({idTableau:m,f:v})}})},o=l=>l.bd,c=l=>l.bd;return await this.client.suivreBdsDeFonctionRecherche({fListe:s,f:n,fBranche:a,fIdBdDeBranche:o,fCode:c})}async fermer(){this._fermé=!0,await Promise.all(this.fsOublier.map(e=>e()))}}He([ot],Us.prototype,"suivreFiables",null);He([ot],Us.prototype,"suivreBloquésPubliques",null);He([ot],Us.prototype,"suivreBloqués",null);He([ot],Us.prototype,"suivreRelationsImmédiates",null);He([Ave],Us.prototype,"suivreRelationsConfiance",null);He([Ave],Us.prototype,"suivreComptesRéseau",null);He([ot],Us.prototype,"suivreConnexionsPostesSFIP",null);He([ot],Us.prototype,"suivreConnexionsDispositifs",null);He([ot],Us.prototype,"suivreConnexionsMembres",null);He([ot],Us.prototype,"suivreProtocolesMembre",null);He([ot],Us.prototype,"suivreProtocolesDispositif",null);He([ot],Us.prototype,"suivreAuteursObjet",null);He([ot],Us.prototype,"suivreBdsMembre",null);He([ot],Us.prototype,"suivreProjetsMembre",null);He([ot],Us.prototype,"suivreFavorisMembre",null);He([ot],Us.prototype,"suivreVariablesMembre",null);He([ot],Us.prototype,"suivreMotsClefsMembre",null);He([ot],Us.prototype,"suivreNuéesMembre",null);He([Ht],Us.prototype,"suivreBdsDeNuée",null);const ITt=Ar(()=>import("./index-CvnvGlql.js"),__vite__mapDeps([0,1])),RTt=Ar(()=>import("./index-Mt4U8GHL.js").then(t=>t.y),[]),u9=new kc;let CB;const IB=async()=>(await u9.acquire("auth"),CB||(CB=await ITt),u9.release("auth"),CB);let RB;const PTt=async()=>(await u9.acquire("crypto"),RB||(RB=await RTt),u9.release("crypto"),RB);class BTt{événements;clefs;nom="local-first-auth";constructor(){this.événements=new Q1,IB().then(({asymmetric:e})=>{const{publicKey:r,secretKey:n}=e.keyPair();this.clefs={secrète:n,publique:r},this.événements.emit("clefs",this.clefs)})}async obtClefs(){return this.clefs||await new Promise(r=>{this.événements.once("clefs",r)})}async encrypter({message:e,clefPubliqueDestinataire:r}){const{asymmetric:n}=await IB(),i=await this.obtClefs();return n.encrypt({secret:e,recipientPublicKey:r,senderSecretKey:i.secrète}).toString()}async décrypter({message:e,clefPubliqueExpéditeur:r}){const{asymmetric:n}=await IB(),i=await this.obtClefs();return n.decrypt({cipher:e,recipientSecretKey:i.secrète,senderPublicKey:r})}async clefAléatoire(e=6){const{randomKey:r}=await PTt();return r(e)}async obtNom(){return this.nom}}const DTt={type:"object",additionalProperties:{type:"object",properties:{dispositifs:{anyOf:[{type:"array",items:{type:"string"}},{type:"string"}]},dispositifsFichiers:{type:["array","string"],anyOf:[{type:"array",items:{type:"string"},nullable:!0},{type:"string",nullable:!0}],nullable:!0},récursif:{type:"boolean"}},required:["dispositifs","récursif"]},required:[]};class iT extends g0{_promesseInit;oublierÉpingler;constructor({client:e}){super({client:e,clef:"favoris",schémaBdPrincipale:DTt}),this._promesseInit=this._épinglerFavoris()}async épingler(){await this.client.épingles.épinglerBd({id:await this.obtIdBd(),récursif:!1,fichiers:!1})}async _épinglerFavoris(){let e=[];const r=async i=>{const s=[];await Promise.all(Object.entries(i).map(async([o,c])=>{if(await this.estÉpingléSurDispositif({dispositifs:c.dispositifs})){const u=await this.estÉpingléSurDispositif({dispositifs:c.dispositifsFichiers});await this.client.épingles.épinglerBd({id:o,récursif:c.récursif,fichiers:u})}s.push(o)}));const a=e.filter(o=>!s.includes(o));await Promise.all(a.map(async o=>await this.client.épingles.désépinglerBd({id:o}))),e=s},n=await this.suivreBdPrincipale({f:r});this.oublierÉpingler=n}async suivreFavoris({f:e,idCompte:r}){const n=async i=>{const s=Object.entries(i).map(([a,o])=>({idObjet:a,...o}));await e(s)};return await this.suivreBdPrincipale({idCompte:r,f:n})}async épinglerFavori({idObjet:e,dispositifs:r="TOUS",dispositifsFichiers:n="INSTALLÉ",récursif:i=!0}){const{bd:s,fOublier:a}=await this.obtBd(),o={récursif:i,dispositifs:r};n&&(o.dispositifsFichiers=n),await s.put(e,o),await a()}async désépinglerFavori({idObjet:e}){const{bd:r,fOublier:n}=await this.obtBd();await r.del(e),await n()}async suivreÉtatFavori({idObjet:e,f:r}){return await this.suivreBdPrincipale({f:n=>r(n[e])})}async suivreEstÉpingléSurDispositif({idObjet:e,f:r,idDispositif:n}){const i=async s=>{const a=await this.estÉpingléSurDispositif({dispositifs:s?.dispositifs,idDispositif:n}),o=await this.estÉpingléSurDispositif({dispositifs:s?.dispositifsFichiers,idDispositif:n});return await r({idObjet:e,bd:a,fichiers:o,récursif:s?.récursif||!1})};return await this.suivreÉtatFavori({idObjet:e,f:i})}async estÉpingléSurDispositif({dispositifs:e,idDispositif:r}){return r=r||await this.client.obtIdDispositif(),e===void 0?!1:e==="TOUS"?!0:e==="INSTALLÉ"?r===await this.client.obtIdDispositif()?Na||Oa:!1:typeof e=="string"?e===r:e.includes(r)}async fermer(){await this._promesseInit,this.oublierÉpingler&&await this.oublierÉpingler()}}He([ot],iT.prototype,"suivreFavoris",null);He([ot],iT.prototype,"suivreÉtatFavori",null);He([ot],iT.prototype,"suivreEstÉpingléSurDispositif",null);const PB={type:"string"},OTt={type:"string"},NTt=500*1e3,MTt=1500*1e3,X5={type:"string"},fu={type:"object",properties:{type:{type:"string"},noms:{type:"string"},descriptions:{type:"string"},bds:{type:"string"},image:{type:"string",nullable:!0},motsClefs:{type:"string"},statut:{type:"object",properties:{statut:{type:"string"},idNouvelle:{type:"string",nullable:!0}},required:["statut"]},copiéDe:{type:"object",properties:{id:{type:"string"}},required:["id"]}},required:["noms","descriptions","statut","type","bds","copiéDe"]};class m0 extends e2{constructor({client:e}){super({client:e,clef:"projets",schémaBdPrincipale:X5})}async épingler(){await this.client.épingles.épinglerBd({id:await this.obtIdBd(),récursif:!1,fichiers:!1})}async suivreProjets({f:e,idCompte:r}){return await this.suivreBdPrincipale({idCompte:r,f:e})}async créerProjet({épingler:e=!0}={}){const{bd:r,fOublier:n}=await this.client.ouvrirBdTypée({id:await this.obtIdBd(),type:"set",schéma:X5}),i=await this.client.créerBdIndépendante({type:"keyvalue",optionsAccès:{address:void 0,write:await this.client.obtIdCompte()}}),{bd:s,fOublier:a}=await this.client.ouvrirBdTypée({id:i,type:"keyvalue",schéma:fu}),o=s.access;if(!LV(o))throw Error("Contrôleur de type non reconnu.");const c={address:o.address};await s.set("type","projet");const l=await this.client.créerBdIndépendante({type:"keyvalue",optionsAccès:c});await s.set("noms",l);const u=await this.client.créerBdIndépendante({type:"keyvalue",optionsAccès:c});await s.set("descriptions",u);const f=await this.client.créerBdIndépendante({type:"set",optionsAccès:c});await s.set("bds",f);const h=await this.client.créerBdIndépendante({type:"set",optionsAccès:c});return await s.set("motsClefs",h),await s.set("statut",{statut:"active"}),await r.add(i),e&&await this.client.favoris.épinglerFavori({idObjet:i}),await Promise.all([n(),a()]),i}async copierProjet({idProjet:e}){const{bd:r,fOublier:n}=await this.client.ouvrirBdTypée({id:e,type:"keyvalue",schéma:fu}),i=await this.créerProjet(),{bd:s,fOublier:a}=await this.client.ouvrirBdTypée({id:i,type:"keyvalue",schéma:fu}),o=await r.get("noms");if(o){const{bd:d,fOublier:g}=await this.client.ouvrirBdTypée({id:o,type:"keyvalue",schéma:zt}),p=await d.allAsJSON();await g(),await this.sauvegarderNomsProjet({idProjet:i,noms:p})}const c=await r.get("descriptions");if(c){const{bd:d,fOublier:g}=await this.client.ouvrirBdTypée({id:c,type:"keyvalue",schéma:zt}),p=await d.allAsJSON();await g(),await this.sauvegarderDescriptionsProjet({idProjet:i,descriptions:p})}const l=await r.get("motsClefs");if(l){const{bd:d,fOublier:g}=await this.client.ouvrirBdTypée({id:l,type:"set",schéma:PB}),p=(await d.all()).map(m=>m.value);await g(),await this.ajouterMotsClefsProjet({idProjet:i,idsMotsClefs:p})}const u=await r.get("bds");if(u){const{bd:d,fOublier:g}=await this.client.ouvrirBdTypée({id:u,type:"set",schéma:OTt}),p=(await d.all()).map(m=>m.value);await g(),await Promise.all(p.map(async m=>{await this.ajouterBdProjet({idProjet:i,idBd:m})}))}const f=await r.get("statut")||{statut:"active"};await s.set("statut",f);const h=await r.get("image");return h&&await s.set("image",h),await s.set("copiéDe",{id:e}),await Promise.all([n(),a()]),i}async ajouterÀMesProjets({idProjet:e}){const{bd:r,fOublier:n}=await this.client.ouvrirBdTypée({id:await this.obtIdBd(),type:"set",schéma:X5});await r.add(e),await n()}async enleverDeMesProjets({idProjet:e}){const{bd:r,fOublier:n}=await this.client.ouvrirBdTypée({id:await this.obtIdBd(),type:"set",schéma:X5});await r.del(e),await n()}async inviterAuteur({idProjet:e,idCompteAuteur:r,rôle:n}){await this.client.donnerAccès({idBd:e,identité:r,rôle:n})}async _obtBdNoms({idProjet:e}){const r=await this.client.obtIdBd({nom:"noms",racine:e,type:"keyvalue"});if(!r)throw new Error(`Permission de modification refusée pour Projet ${e}.`);return await this.client.ouvrirBdTypée({id:r,type:"keyvalue",schéma:zt})}async sauvegarderNomsProjet({idProjet:e,noms:r}){const{bd:n,fOublier:i}=await this._obtBdNoms({idProjet:e});for(const s in r)await n.set(s,r[s]);await i()}async sauvegarderNomProjet({idProjet:e,langue:r,nom:n}){const{bd:i,fOublier:s}=await this._obtBdNoms({idProjet:e});await i.set(r,n),await s()}async effacerNomProjet({idProjet:e,langue:r}){const{bd:n,fOublier:i}=await this._obtBdNoms({idProjet:e});await n.del(r),await i()}async _obtBdDescr({idProjet:e}){const r=await this.client.obtIdBd({nom:"descriptions",racine:e,type:"keyvalue"});if(!r)throw new Error(`Permission de modification refusée pour Projet ${e}.`);return await this.client.ouvrirBdTypée({id:r,type:"keyvalue",schéma:zt})}async sauvegarderDescriptionsProjet({idProjet:e,descriptions:r}){const{bd:n,fOublier:i}=await this._obtBdDescr({idProjet:e});for(const s in r)await n.set(s,r[s]);await i()}async sauvegarderDescriptionProjet({idProjet:e,langue:r,description:n}){const{bd:i,fOublier:s}=await this._obtBdDescr({idProjet:e});await i.set(r,n),await s()}async effacerDescriptionProjet({idProjet:e,langue:r}){const{bd:n,fOublier:i}=await this._obtBdDescr({idProjet:e});await n.del(r),await i()}async _obtBdMotsClefs({idProjet:e}){const r=await this.client.obtIdBd({nom:"motsClefs",racine:e,type:"set"});if(!r)throw new Error(`Permission de modification refusée pour projet ${e}.`);return await this.client.ouvrirBdTypée({id:r,type:"set",schéma:PB})}async ajouterMotsClefsProjet({idProjet:e,idsMotsClefs:r}){Array.isArray(r)||(r=[r]);const{bd:n,fOublier:i}=await this._obtBdMotsClefs({idProjet:e});await Promise.all(r.map(async s=>{(await n.all()).map(o=>o.value).includes(s)||await n.add(s)})),await i()}async effacerMotClefProjet({idProjet:e,idMotClef:r}){const{bd:n,fOublier:i}=await this._obtBdMotsClefs({idProjet:e});await n.del(r),await i()}async _obtBdBds({idProjet:e}){const r=await this.client.obtIdBd({nom:"bds",racine:e,type:"set"});if(!r)throw new Error(`Permission de modification refusée pour Projet ${e}.`);return await this.client.ouvrirBdTypée({id:r,type:"set",schéma:PB})}async ajouterBdProjet({idProjet:e,idBd:r}){const{bd:n,fOublier:i}=await this._obtBdBds({idProjet:e});await n.add(r),await i()}async effacerBdProjet({idProjet:e,idBd:r}){const{bd:n,fOublier:i}=await this._obtBdBds({idProjet:e});await n.del(r),await i()}async marquerObsolète({idProjet:e,idNouvelle:r}){const{bd:n,fOublier:i}=await this.client.ouvrirBdTypée({id:e,type:"keyvalue",schéma:fu});n.set("statut",{statut:"obsolète",idNouvelle:r}),await i()}async changerStatutProjet({idProjet:e,statut:r}){const{bd:n,fOublier:i}=await this.client.ouvrirBdTypée({id:e,type:"keyvalue",schéma:fu});n.set("statut",r),await i()}async marquerActif({idProjet:e}){const{bd:r,fOublier:n}=await this.client.ouvrirBdTypée({id:e,type:"keyvalue",schéma:fu});r.set("statut",{statut:"active"}),await n()}async marquerJouet({idProjet:e}){const{bd:r,fOublier:n}=await this.client.ouvrirBdTypée({id:e,type:"keyvalue",schéma:fu});r.set("statut",{statut:"jouet"}),await n()}async marquerInterne({idProjet:e}){const{bd:r,fOublier:n}=await this.client.ouvrirBdTypée({id:e,type:"keyvalue",schéma:fu});r.set("statut",{statut:"interne"}),await n()}async sauvegarderImage({idProjet:e,image:r}){if(r.contenu.byteLength>NTt)throw new Error("Taille maximale excédée");const n=await this.client.ajouterÀSFIP(r),{bd:i,fOublier:s}=await this.client.ouvrirBdTypée({id:e,type:"keyvalue",schéma:fu});await i.set("image",n),await s()}async effacerImage({idProjet:e}){const{bd:r,fOublier:n}=await this.client.ouvrirBdTypée({id:e,type:"keyvalue",schéma:fu});await r.del("image"),await n()}async suivreImage({idProjet:e,f:r}){return await this.client.suivreBd({id:e,type:"keyvalue",schéma:fu,f:async n=>{const i=await n.get("image");if(i){const s=await this.client.obtFichierSFIP({id:i,max:MTt});return await r(s)}else return await r(null)}})}async suivreNomsProjet({idProjet:e,f:r}){return await this.client.suivreBdDicDeClef({id:e,clef:"noms",schéma:zt,f:r})}async suivreDescriptionsProjet({idProjet:e,f:r}){return await this.client.suivreBdDicDeClef({id:e,clef:"descriptions",schéma:zt,f:r})}async suivreMotsClefsProjet({idProjet:e,f:r}){const n={},i=async()=>{if(n.propres&&n.bds){const f=[...n.propres.map(h=>({idMotClef:h,source:"projet"})),...n.bds.map(h=>({idMotClef:h,source:"bds"}))];return await r(f)}},s=async f=>(n.propres=f,await i()),a=await this.client.suivreBdListeDeClef({id:e,clef:"motsClefs",schéma:{type:"string"},f:s}),u=await bn({fListe:async f=>await this.suivreBdsProjet({idProjet:e,f}),f:async f=>(n.bds=f,await i()),fBranche:async(f,h)=>await this.client.bds.suivreMotsClefsBd({idBd:f,f:h})});return async()=>{await a(),await u()}}async suivreBdsProjet({idProjet:e,f:r}){return await this.client.suivreBdListeDeClef({id:e,clef:"bds",schéma:{type:"string"},f:r})}async suivreVariablesProjet({idProjet:e,f:r}){const n=async a=>await r(a||[]),i=async(a,o)=>await this.client.bds.suivreVariablesBd({idBd:a,f:o}),s=async({id:a,fSuivreBd:o})=>await this.client.suivreBdsDeBdListe({id:a,f:o,fBranche:i});return await this.client.suivreBdDeClef({id:e,clef:"bds",f:n,fSuivre:s})}async suivreQualitéProjet({idProjet:e,f:r}){return await bn({fListe:async o=>await this.suivreBdsProjet({idProjet:e,f:o}),f:async o=>await r(o.length?o.reduce((c,l)=>c+l,0)/o.length:0),fBranche:async(o,c)=>await this.client.bds.suivreQualitéBd({idBd:o,f:l=>c(l.total)}),fRéduction:o=>o.flat()})}async suivreDonnéesExportation({idProjet:e,langues:r,f:n}){const i={},s=[],a=async()=>{const{nomsProjet:c,données:l}=i;if(!l)return;const u=e.split("/").pop(),f=c&&r&&A1(c,r)||u;return await n({nomProjet:f,bds:l})},o=await bn({fListe:async c=>await this.suivreBdsProjet({idProjet:e,f:c}),f:async c=>{i.données=c,await a()},fBranche:async(c,l)=>await this.client.bds.suivreDonnéesExportation({idBd:c,langues:r,f:l})});if(s.push(o),r){const c=await this.suivreNomsProjet({idProjet:e,f:async l=>{i.nomsProjet=l,await a()}});s.push(c)}return async()=>{await Promise.all(s.map(c=>c()))}}async exporterDonnées({idProjet:e,langues:r,nomFichier:n,patience:i=500}){const s=await Sn(async o=>await this.suivreDonnéesExportation({idProjet:e,langues:r,f:o}),Bo(i));n=n||s.nomProjet;const a=new Set;return s.bds.forEach(o=>{o.tableaux.forEach(c=>c.fichiersSFIP.forEach(l=>a.add(l)))}),{docs:s.bds.map(o=>{const c=Lf.utils.book_new();for(const l of o.tableaux){const u=Lf.utils.json_to_sheet(l.données);Lf.utils.book_append_sheet(c,u,l.nomTableau.slice(0,30))}return{doc:c,nom:o.nomBd}}),fichiersSFIP:a,nomFichier:n}}async exporterDocumentDonnées({données:e,formatDoc:r,dossier:n="",inclureFichiersSFIP:i=!0}){const{docs:s,fichiersSFIP:a,nomFichier:o}=e,l={xls:"biff8"}[r]||r,u=s.map(h=>({nom:`${h.nom}.${r}`,octets:Lf.write(h.doc,{bookType:l,type:"buffer"})})),f=i?await Promise.all([...a].map(async h=>({nom:h.replace("/","-"),octets:await Ive(await this.client.obtItérableAsyncSFIP({id:h}))}))):[];await ale(u,f,S1.join(n,o))}async effacerProjet({idProjet:e}){await this.enleverDeMesProjets({idProjet:e}),await this.client.favoris.désépinglerFavori({idObjet:e});for(const r of["noms","descriptions","motsClefs","bds"]){const n=await this.client.obtIdBd({nom:r,racine:e});n&&await this.client.effacerBd({id:n})}await this.client.effacerBd({id:e})}}He([ot],m0.prototype,"suivreProjets",null);He([ot],m0.prototype,"suivreImage",null);He([ot],m0.prototype,"suivreNomsProjet",null);He([ot],m0.prototype,"suivreDescriptionsProjet",null);He([ot],m0.prototype,"suivreMotsClefsProjet",null);He([ot],m0.prototype,"suivreBdsProjet",null);He([ot],m0.prototype,"suivreVariablesProjet",null);He([ot],m0.prototype,"suivreQualitéProjet",null);const LTt={type:"string"},Jne={type:"object",properties:{type:{type:"string",nullable:!0},noms:{type:"string",nullable:!0},descriptions:{type:"string",nullable:!0}},required:[]};class f8 extends e2{constructor({client:e}){super({client:e,clef:"motsClefs",schémaBdPrincipale:LTt})}async épingler(){const e=await this.obtIdBd();await this.client.épingles.épinglerBd({id:e,récursif:!1,fichiers:!1})}async suivreMotsClefs({f:e,idCompte:r}){return await this.suivreBdPrincipale({idCompte:r,f:e})}async créerMotClef({épingler:e=!0}={}){const r=await this.client.créerBdIndépendante({type:"keyvalue",optionsAccès:{address:void 0,write:await this.client.obtIdCompte()}});await this.ajouterÀMesMotsClefs({idMotClef:r}),e&&await this.client.favoris.épinglerFavori({idObjet:r});const{bd:n,fOublier:i}=await this.client.ouvrirBdTypée({id:r,type:"keyvalue",schéma:Jne}),a={address:n.access.address};await n.set("type","motClef");const o=await this.client.créerBdIndépendante({type:"keyvalue",optionsAccès:a});await n.set("noms",o);const c=await this.client.créerBdIndépendante({type:"keyvalue",optionsAccès:a});return await n.set("descriptions",c),await i(),r}async ajouterÀMesMotsClefs({idMotClef:e}){const{bd:r,fOublier:n}=await this.obtBd();await r.add(e),await n()}async enleverDeMesMotsClefs({idMotClef:e}){const{bd:r,fOublier:n}=await this.obtBd();await r.del(e),await n()}async copierMotClef({idMotClef:e}){const{bd:r,fOublier:n}=await this.client.ouvrirBdTypée({id:e,type:"keyvalue",schéma:Jne}),i=await this.créerMotClef(),s=await r.get("noms");if(s){const{bd:o,fOublier:c}=await this.client.ouvrirBdTypée({id:s,type:"keyvalue",schéma:zt}),l=await o.allAsJSON();await this.sauvegarderNomsMotClef({idMotClef:i,noms:l}),await c()}const a=await r.get("descriptions");if(a){const{bd:o,fOublier:c}=await this.client.ouvrirBdTypée({id:a,type:"keyvalue",schéma:zt}),l=await o.allAsJSON();await this.sauvegarderDescriptionsMotClef({idMotClef:i,descriptions:l}),await c()}return await n(),i}async inviterAuteur({idMotClef:e,idCompteAuteur:r,rôle:n}){await this.client.donnerAccès({idBd:e,identité:r,rôle:n})}async sauvegarderNomsMotClef({idMotClef:e,noms:r}){const n=await this.client.obtIdBd({nom:"noms",racine:e,type:"keyvalue"});if(!n)throw new Error(`Permission de modification refusée pour mot clef ${e}.`);const{bd:i,fOublier:s}=await this.client.ouvrirBdTypée({id:n,type:"keyvalue",schéma:zt});for(const a in r)await i.set(a,r[a]);await s()}async sauvegarderNomMotClef({idMotClef:e,langue:r,nom:n}){const i=await this.client.obtIdBd({nom:"noms",racine:e,type:"keyvalue"});if(!i)throw new Error(`Permission de modification refusée pour mot clef ${e}.`);const{bd:s,fOublier:a}=await this.client.ouvrirBdTypée({id:i,type:"keyvalue",schéma:zt});await s.set(r,n),await a()}async effacerNomMotClef({idMotClef:e,langue:r}){const n=await this.client.obtIdBd({nom:"noms",racine:e,type:"keyvalue"});if(!n)throw new Error(`Permission de modification refusée pour mot clef ${e}.`);const{bd:i,fOublier:s}=await this.client.ouvrirBdTypée({id:n,type:"keyvalue",schéma:zt});await i.del(r),await s()}async suivreNomsMotClef({idMotClef:e,f:r}){return await this.client.suivreBdDicDeClef({id:e,clef:"noms",schéma:zt,f:r})}async sauvegarderDescriptionsMotClef({idMotClef:e,descriptions:r}){const n=await this.client.obtIdBd({nom:"descriptions",racine:e,type:"keyvalue"});if(!n)throw new Error(`Permission de modification refusée pour mot clef ${e}.`);const{bd:i,fOublier:s}=await this.client.ouvrirBdTypée({id:n,type:"keyvalue",schéma:zt});for(const a in r)await i.set(a,r[a]);await s()}async sauvegarderDescriptionMotClef({idMotClef:e,langue:r,description:n}){const i=await this.client.obtIdBd({nom:"descriptions",racine:e,type:"keyvalue"});if(!i)throw new Error(`Permission de modification refusée pour mot clef ${e}.`);const{bd:s,fOublier:a}=await this.client.ouvrirBdTypée({id:i,type:"keyvalue",schéma:zt});await s.set(r,n),await a()}async effacerDescriptionMotClef({id:e,langue:r}){const n=await this.client.obtIdBd({nom:"descriptions",racine:e,type:"keyvalue"});if(!n)throw new Error(`Permission de modification refusée pour mot clef ${e}.`);const{bd:i,fOublier:s}=await this.client.ouvrirBdTypée({id:n,type:"keyvalue",schéma:zt});await i.del(r),await s()}async suivreDescriptionsMotClef({idMotClef:e,f:r}){return await this.client.suivreBdDicDeClef({id:e,clef:"descriptions",schéma:zt,f:r})}async effacerMotClef({idMotClef:e}){await this.enleverDeMesMotsClefs({idMotClef:e}),await this.client.favoris.désépinglerFavori({idObjet:e});for(const r of["noms"]){const n=await this.client.obtIdBd({nom:r,racine:e});n&&await this.client.effacerBd({id:n})}await this.client.effacerBd({id:e})}async suivreQualitéMotClef({idMotClef:e,f:r}){return await this.suivreNomsMotClef({idMotClef:e,f:n=>r(Object.keys(n).length?1:0)})}}He([ot],f8.prototype,"suivreMotsClefs",null);He([ot],f8.prototype,"suivreNomsMotClef",null);He([ot],f8.prototype,"suivreDescriptionsMotClef",null);He([ot],f8.prototype,"suivreQualitéMotClef",null);const FTt=500*1e3,$Tt=1500*1e3,BB={type:"object",additionalProperties:{type:"string"},required:[]},ka={type:"object",properties:{type:{type:"string",nullable:!0},métadonnées:{type:"string",nullable:!0},noms:{type:"string",nullable:!0},descriptions:{type:"string",nullable:!0},motsClefs:{type:"string",nullable:!0},image:{type:"string",nullable:!0},tableaux:{type:"string",nullable:!0},autorisation:{type:"string",nullable:!0},statut:{type:"object",properties:{idNouvelle:{type:"string",nullable:!0},statut:{type:"string",nullable:!0}},required:[],nullable:!0},parent:{type:"string",nullable:!0},copiéDe:{type:"string",nullable:!0}},required:[]},DB={type:"object",properties:{philosophie:{type:"string",nullable:!0},membres:{type:"string",nullable:!0}},required:[]},OB={type:"string"};class qa extends e2{constructor({client:e}){super({client:e,clef:"nuées",schémaBdPrincipale:{type:"string"}})}async épingler(){await this.client.épingles.épinglerBd({id:await this.obtIdBd(),récursif:!1,fichiers:!1})}async créerNuée({nuéeParent:e,autorisation:r="IJPC",épingler:n=!0}={}){const i=await this.client.créerBdIndépendante({type:"keyvalue",optionsAccès:{address:void 0,write:await this.client.obtIdCompte()}});await this.ajouterÀMesNuées({idNuée:i}),n&&await this.client.favoris.épinglerFavori({idObjet:i});const{bd:s,fOublier:a}=await this.client.ouvrirBdTypée({id:i,type:"keyvalue",schéma:ka}),c={address:s.access.address};await s.set("type","nuée");let l;if(to(r))l=r;else if(r==="CJPI"||r==="IJPC")l=await this.générerGestionnaireAutorisations({philosophie:r});else throw new Error(`Autorisation non valide : ${r}`);await s.set("autorisation",l),r==="CJPI"&&await this.accepterMembreNuée({idNuée:i,idCompte:await this.client.obtIdCompte()});const u=await this.client.créerBdIndépendante({type:"keyvalue",optionsAccès:c});await s.set("noms",u);const f=await this.client.créerBdIndépendante({type:"keyvalue",optionsAccès:c});await s.set("descriptions",f);const h=await this.client.créerBdIndépendante({type:"ordered-keyvalue",optionsAccès:c});await s.set("tableaux",h);const d=await this.client.créerBdIndépendante({type:"keyvalue",optionsAccès:c});await s.set("métadonnées",d);const g=await this.client.créerBdIndépendante({type:"set",optionsAccès:c});return await s.set("motsClefs",g),await s.set("statut",{statut:"active"}),e&&await s.set("parent",e),a(),i}async ajouterÀMesNuées({idNuée:e}){const{bd:r,fOublier:n}=await this.obtBd();await r.add(e),await n()}async enleverDeMesNuées({idNuée:e}){const{bd:r,fOublier:n}=await this.obtBd();await r.del(e),await n()}async copierNuée({idNuée:e}){const{bd:r,fOublier:n}=await this.client.ouvrirBdTypée({id:e,type:"keyvalue",schéma:ka}),i=await r.get("parent"),s=await this.créerNuée({nuéeParent:i}),{bd:a,fOublier:o}=await this.client.ouvrirBdTypée({id:s,type:"keyvalue",schéma:ka}),c=await r.get("métadonnées");if(c){const{bd:m,fOublier:y}=await this.client.ouvrirBdTypée({id:c,type:"keyvalue",schéma:zt}),v=await m.allAsJSON();await y(),await this.sauvegarderMétadonnéesNuée({idNuée:s,métadonnées:v})}const l=await r.get("noms");if(l){const{bd:m,fOublier:y}=await this.client.ouvrirBdTypée({id:l,type:"keyvalue",schéma:zt}),v=await m.allAsJSON();await y(),await this.sauvegarderNomsNuée({idNuée:s,noms:v})}const u=await r.get("descriptions");if(u){const{bd:m,fOublier:y}=await this.client.ouvrirBdTypée({id:u,type:"keyvalue",schéma:zt}),v=await m.allAsJSON();await y(),await this.sauvegarderDescriptionsNuée({idNuée:s,descriptions:v})}const f=await r.get("motsClefs");if(f){const{bd:m,fOublier:y}=await this.client.ouvrirBdTypée({id:f,type:"set",schéma:OB}),v=(await m.all()).map(_=>_.value);await y(),await this.ajouterMotsClefsNuée({idNuée:s,idsMotsClefs:v})}const h=await r.get("tableaux"),d=await a.get("tableaux");if(!d)throw new Error("Erreur initialisation.");if(h){const{bd:m,fOublier:y}=await this.client.ouvrirBdTypée({id:d,type:"ordered-keyvalue",schéma:Wc}),{bd:v,fOublier:_}=await this.client.ouvrirBdTypée({id:h,type:"ordered-keyvalue",schéma:Wc}),x=await v.all();await _();for(const A of x){const C=await this.client.tableaux.copierTableau({id:A.key,idBd:s,copierDonnées:!1});await m.set(C,A.value)}await y()}const g=await r.get("statut")||{statut:"active"};await a.set("statut",g);const p=await r.get("image");return p&&await a.set("image",p),await a.set("copiéDe",e),await Promise.all([n(),o()]),s}async suivreNuées({f:e,idCompte:r}){return await this.suivreBdPrincipale({f:e,idCompte:r})}async suivreDeParents({idNuée:e,f:r,fParents:n}){return await bn({fListe:async i=>await this.suivreNuéesParents({idNuée:e,f:s=>i([e,...s].reverse())}),f:r,fBranche:n,fRéduction:i=>i})}async sauvegarderMétadonnéeNuée({idNuée:e,clef:r,valeur:n}){const i=await this.client.obtIdBd({nom:"métadonnées",racine:e,type:"keyvalue"});if(!i)throw new Error(`Permission de modification refusée pour Nuée ${e}.`);const{bd:s,fOublier:a}=await this.client.ouvrirBdTypée({id:i,type:"keyvalue",schéma:qf});await s.set(r,n),await a()}async sauvegarderMétadonnéesNuée({idNuée:e,métadonnées:r}){const n=await this.client.obtIdBd({nom:"métadonnées",racine:e,type:"keyvalue"});if(!n)throw new Error(`Permission de modification refusée pour Nuée ${e}.`);const{bd:i,fOublier:s}=await this.client.ouvrirBdTypée({id:n,type:"keyvalue",schéma:qf});for(const a in r)await i.set(a,r[a]);await s()}async effacerMétadonnéeNuée({idNuée:e,clef:r}){const n=await this.client.obtIdBd({nom:"métadonnées",racine:e,type:"keyvalue"});if(!n)throw new Error(`Permission de modification refusée pour Nuée ${e}.`);const{bd:i,fOublier:s}=await this.client.ouvrirBdTypée({id:n,type:"keyvalue",schéma:qf});await i.del(r),await s()}async suivreMétadonnéesNuée({idNuée:e,f:r,hériter:n=!0}){if(n){const i=async s=>{await r(Object.assign({},...s))};return await this.suivreDeParents({idNuée:e,f:i,fParents:async(s,a)=>await this.client.suivreBdDicDeClef({id:s,clef:"métadonnées",schéma:qf,f:a})})}else return await this.client.suivreBdDicDeClef({id:e,clef:"métadonnées",schéma:qf,f:r})}async sauvegarderNomNuée({idNuée:e,langue:r,nom:n}){const i=await this.client.obtIdBd({nom:"noms",racine:e,type:"keyvalue"});if(!i)throw new Error(`Permission de modification refusée pour Nuée ${e}.`);const{bd:s,fOublier:a}=await this.client.ouvrirBdTypée({id:i,type:"keyvalue",schéma:zt});await s.set(r,n),await a()}async sauvegarderNomsNuée({idNuée:e,noms:r}){const n=await this.client.obtIdBd({nom:"noms",racine:e,type:"keyvalue"});if(!n)throw new Error(`Permission de modification refusée pour Nuée ${e}.`);const{bd:i,fOublier:s}=await this.client.ouvrirBdTypée({id:n,type:"keyvalue",schéma:zt});for(const a in r)await i.set(a,r[a]);await s()}async effacerNomNuée({idNuée:e,langue:r}){const n=await this.client.obtIdBd({nom:"noms",racine:e,type:"keyvalue"});if(!n)throw new Error(`Permission de modification refusée pour Nuée ${e}.`);const{bd:i,fOublier:s}=await this.client.ouvrirBdTypée({id:n,type:"keyvalue",schéma:zt});await i.del(r),await s()}async suivreNomsNuée({idNuée:e,f:r}){const n=async i=>{await r(Object.assign({},...i))};return await this.suivreDeParents({idNuée:e,f:n,fParents:async(i,s)=>await this.client.suivreBdDicDeClef({id:i,clef:"noms",schéma:zt,f:s})})}async sauvegarderDescriptionNuée({idNuée:e,langue:r,description:n}){const i=await this.client.obtIdBd({nom:"descriptions",racine:e,type:"keyvalue"});if(!i)throw new Error(`Permission de modification refusée pour Nuée ${e}.`);const{bd:s,fOublier:a}=await this.client.ouvrirBdTypée({id:i,type:"keyvalue",schéma:zt});await s.set(r,n),await a()}async sauvegarderDescriptionsNuée({idNuée:e,descriptions:r}){const n=await this.client.obtIdBd({nom:"descriptions",racine:e,type:"keyvalue"});if(!n)throw new Error(`Permission de modification refusée pour BD ${e}.`);const{bd:i,fOublier:s}=await this.client.ouvrirBdTypée({id:n,type:"keyvalue",schéma:zt});for(const a in r)await i.set(a,r[a]);await s()}async effacerDescriptionNuée({idNuée:e,langue:r}){const n=await this.client.obtIdBd({nom:"descriptions",racine:e,type:"keyvalue"});if(!n)throw new Error(`Permission de modification refusée pour BD ${e}.`);const{bd:i,fOublier:s}=await this.client.ouvrirBdTypée({id:n,type:"keyvalue",schéma:zt});await i.del(r),await s()}async suivreDescriptionsNuée({idNuée:e,f:r}){const n=async i=>{await r(Object.assign({},...i))};return await this.suivreDeParents({idNuée:e,f:n,fParents:async(i,s)=>await this.client.suivreBdDicDeClef({id:i,clef:"descriptions",schéma:zt,f:s})})}async sauvegarderImage({idNuée:e,image:r}){if(r.contenu.byteLength>FTt)throw new Error("Taille maximale excédée");const n=await this.client.ajouterÀSFIP(r),{bd:i,fOublier:s}=await this.client.ouvrirBdTypée({id:e,type:"keyvalue",schéma:ka});await i.set("image",n),await s()}async effacerImage({idNuée:e}){const{bd:r,fOublier:n}=await this.client.ouvrirBdTypée({id:e,type:"keyvalue",schéma:ka});await r.del("image"),await n()}async suivreImage({idNuée:e,f:r}){return await this.client.suivreBd({id:e,type:"keyvalue",schéma:ka,f:async n=>{const i=await n.get("image");if(!i)await r(null);else{const s=await this.client.obtFichierSFIP({id:i,max:$Tt});await r(s)}}})}async ajouterMotsClefsNuée({idNuée:e,idsMotsClefs:r}){Array.isArray(r)||(r=[r]);const n=await this.client.obtIdBd({nom:"motsClefs",racine:e,type:"set"});if(!n)throw new Error(`Permission de modification refusée pour BD ${e}.`);const{bd:i,fOublier:s}=await this.client.ouvrirBdTypée({id:n,type:"set",schéma:OB});for(const a of r)(await i.all()).map(c=>c.value).includes(a)||await i.add(a);await s()}async effacerMotClefNuée({idNuée:e,idMotClef:r}){const n=await this.client.obtIdBd({nom:"motsClefs",racine:e,type:"set"});if(!n)throw new Error(`Permission de modification refusée pour BD ${e}.`);const{bd:i,fOublier:s}=await this.client.ouvrirBdTypée({id:n,type:"set",schéma:OB});await i.del(r),await s()}async suivreMotsClefsNuée({idNuée:e,f:r}){const n=async i=>{await r([...new Set(i.flat())])};return await this.suivreDeParents({idNuée:e,f:n,fParents:async(i,s)=>await this.client.suivreBdListeDeClef({id:i,clef:"motsClefs",schéma:{type:"string"},f:s})})}async changerStatutNuée({idNuée:e,statut:r}){const{bd:n,fOublier:i}=await this.client.ouvrirBdTypée({id:e,type:"keyvalue",schéma:ka});n.set("statut",r),await i()}async suivreStatutNuée({idNuée:e,f:r}){return await this.client.suivreBdDic({id:e,f:async n=>{if(n.statut)return await r(n.statut)},schéma:ka})}async marquerObsolète({idNuée:e,idNouvelle:r}){const{bd:n,fOublier:i}=await this.client.ouvrirBdTypée({id:e,type:"keyvalue",schéma:ka});n.set("statut",{statut:"obsolète",idNouvelle:r}),await i()}async marquerActive({idNuée:e}){const{bd:r,fOublier:n}=await this.client.ouvrirBdTypée({id:e,type:"keyvalue",schéma:ka});r.set("statut",{statut:"active"}),await n()}async marquerJouet({idNuée:e}){const{bd:r,fOublier:n}=await this.client.ouvrirBdTypée({id:e,type:"keyvalue",schéma:ka});r.set("statut",{statut:"jouet"}),await n()}async marquerInterne({idNuée:e}){const{bd:r,fOublier:n}=await this.client.ouvrirBdTypée({id:e,type:"keyvalue",schéma:ka});r.set("statut",{statut:"interne"}),await n()}async inviterAuteur({idNuée:e,idCompteAuteur:r,rôle:n}){await this.client.donnerAccès({idBd:e,identité:r,rôle:n})}async générerGestionnaireAutorisations({philosophie:e="IJPC"}){const r=await this.client.créerBdIndépendante({type:"keyvalue",optionsAccès:{write:await this.client.obtIdCompte()}}),{bd:n,fOublier:i}=await this.client.ouvrirBdTypée({id:r,type:"keyvalue",schéma:DB});await n.set("philosophie",e);const a={address:n.access.address},o=await this.client.créerBdIndépendante({type:"keyvalue",optionsAccès:a});return await n.set("membres",o),i(),r}async changerPhisolophieAutorisation({idAutorisation:e,philosophie:r}){const{bd:n,fOublier:i}=await this.client.ouvrirBdTypée({id:e,type:"keyvalue",schéma:DB});await n.set("philosophie",r),i()}async suivrePhilosophieAutorisation({idNuée:e,f:r}){return await fs({fRacine:async({fSuivreRacine:a})=>await this.suivreGestionnaireAutorisations({idNuée:e,f:a}),f:async a=>{if(!a)return;const o=await a.get("philosophie");o&&["IJPC","CJPI"].includes(o)&&await r(o)},fSuivre:async({id:a,fSuivreBd:o})=>await this.client.suivreBd({id:a,type:"keyvalue",schéma:DB,f:o})})}async accepterMembreAutorisation({idAutorisation:e,idCompte:r}){const n=await this.client.obtIdBd({nom:"membres",racine:e,type:"keyvalue"});if(!n)throw new Error(`Permission de modification refusée pour groupe d'autorisation ${e}.`);const{bd:i,fOublier:s}=await this.client.ouvrirBdTypée({id:n,type:"keyvalue",schéma:BB});await i.set(r,"accepté"),s()}async accepterMembreNuée({idNuée:e,idCompte:r}){const n=await this.obtGestionnaireAutorisationsDeNuée({idNuée:e});return await this.accepterMembreAutorisation({idAutorisation:n,idCompte:r})}async exclureMembreAutorisation({idAutorisation:e,idCompte:r}){const n=await this.client.obtIdBd({nom:"membres",racine:e,type:"keyvalue"});if(!n)throw new Error(`Permission de modification refusée pour groupe d'autorisation ${e}.`);const{bd:i,fOublier:s}=await this.client.ouvrirBdTypée({id:n,type:"keyvalue",schéma:BB});await i.set(r,"exclus"),s()}async exclureMembreDeNuée({idNuée:e,idCompte:r}){const n=await this.obtGestionnaireAutorisationsDeNuée({idNuée:e});return await this.exclureMembreAutorisation({idAutorisation:n,idCompte:r})}async suivreGestionnaireAutorisations({idNuée:e,f:r}){return await this.client.suivreBd({id:e,type:"keyvalue",schéma:ka,f:async n=>{const i=await n.get("autorisation");await r(i)}})}async changerGestionnaireAutorisations({idNuée:e,idAutorisation:r}){const{bd:n,fOublier:i}=await this.client.ouvrirBdTypée({id:e,type:"keyvalue",schéma:ka});await n.set("autorisation",r),i()}async obtGestionnaireAutorisationsDeNuée({idNuée:e}){return await Sn(async r=>await this.suivreGestionnaireAutorisations({idNuée:e,f:hs(r)}))}async suivreAutorisationsMembresDeGestionnaire({idAutorisation:e,f:r}){const n=async i=>{const s=Object.entries(i).map(([a,o])=>({idCompte:a,statut:o}));await r(s)};return await this.client.suivreBdDicDeClef({id:e,clef:"membres",schéma:BB,f:n})}async suivreAutorisationsMembresDeNuée({idNuée:e,f:r}){const n=async({fSuivreRacine:s})=>await this.suivreGestionnaireAutorisations({idNuée:e,f:s}),i=async({id:s,fSuivreBd:a})=>await this.suivreAutorisationsMembresDeGestionnaire({idAutorisation:s,f:a});return await fs({fRacine:n,f:hs(r),fSuivre:i})}async ajouterTableauNuée({idNuée:e,clefTableau:r}){const n=await this.client.obtIdBd({nom:"tableaux",racine:e,type:"ordered-keyvalue"});if(!n)throw new Error(`Permission de modification refusée pour Nuée ${e}.`);const{bd:i,fOublier:s}=await this.client.ouvrirBdTypée({id:n,type:"ordered-keyvalue",schéma:Wc});r=r||rs();const a=await this.client.tableaux.créerTableau({idBd:e});return await i.set(a,{clef:r}),await s(),a}async effacerTableauNuée({idNuée:e,idTableau:r}){const n=await this.client.obtIdBd({nom:"tableaux",racine:e,type:"ordered-keyvalue"});if(!n)throw new Error(`Permission de modification refusée pour Nuée ${e}.`);const{bd:i,fOublier:s}=await this.client.ouvrirBdTypée({id:n,type:"ordered-keyvalue",schéma:Wc});await i.del(r),await s(),await this.client.tableaux.effacerTableau({idTableau:r})}async suivreTableauxNuée({idNuée:e,f:r}){const n=async s=>{await r(s.flat())},i=async(s,a)=>{const o=c=>{const l=c.map(u=>({id:u.key,...u.value}));a(l)};return await this.client.suivreBdDicOrdonnéeDeClef({id:s,clef:"tableaux",schéma:Wc,f:o})};return await this.suivreDeParents({idNuée:e,f:n,fParents:i})}async sauvegarderNomsTableauNuée({idTableau:e,noms:r}){return await this.client.tableaux.sauvegarderNomsTableau({idTableau:e,noms:r})}async effacerNomsTableauNuée({idTableau:e,langue:r}){return await this.client.tableaux.effacerNomTableau({idTableau:e,langue:r})}async suivreNomsTableauNuée({idNuée:e,clefTableau:r,f:n}){const i=async a=>{await n(Object.assign({},...a))},s=async(a,o)=>await fs({fRacine:async({fSuivreRacine:c})=>await this.client.bds.suivreIdTableauParClef({idBd:a,clef:r,f:c}),f:hs(o),fSuivre:async({id:c,fSuivreBd:l})=>await this.client.tableaux.suivreNomsTableau({idTableau:c,f:l})});return await this.suivreDeParents({idNuée:e,f:i,fParents:s})}async ajouterColonneTableauNuée({idTableau:e,idVariable:r,idColonne:n,index:i}){const s=await this.client.tableaux.ajouterColonneTableau({idTableau:e,idVariable:r,idColonne:n});return i&&await this.changerColIndexTableauNuée({idTableau:e,idColonne:s,val:!0}),s}async effacerColonneTableauNuée({idTableau:e,idColonne:r}){return await this.client.tableaux.effacerColonneTableau({idTableau:e,idColonne:r})}async changerColIndexTableauNuée({idTableau:e,idColonne:r,val:n}){return await this.client.tableaux.changerColIndex({idTableau:e,idColonne:r,val:n})}async suivreColonnesTableauNuée({idNuée:e,clefTableau:r,f:n,catégories:i=!0}){const s=async o=>{await n(o.flat())},a=async(o,c)=>await fs({fRacine:async({fSuivreRacine:l})=>await this.client.bds.suivreIdTableauParClef({idBd:o,clef:r,f:l}),f:hs(c),fSuivre:async({id:l,fSuivreBd:u})=>await this.client.tableaux.suivreColonnesTableau({idTableau:l,f:u,catégories:i})});return await this.suivreDeParents({idNuée:e,f:s,fParents:a})}async ajouterRègleTableauNuée({idTableau:e,idColonne:r,règle:n}){return await this.client.tableaux.ajouterRègleTableau({idTableau:e,idColonne:r,règle:n})}async effacerRègleTableauNuée({idTableau:e,idRègle:r}){return await this.client.tableaux.effacerRègleTableau({idTableau:e,idRègle:r})}async suivreRèglesTableauNuée({idNuée:e,clefTableau:r,f:n}){const i=async a=>{await n(a.flat())},s=async(a,o)=>await fs({fRacine:async({fSuivreRacine:c})=>await this.client.bds.suivreIdTableauParClef({idBd:a,clef:r,f:c}),f:hs(o),fSuivre:async({id:c,fSuivreBd:l})=>await this.client.tableaux.suivreRègles({idTableau:c,f:l})});return await this.suivreDeParents({idNuée:e,f:i,fParents:s})}async suivreVariablesNuée({idNuée:e,f:r}){return await bn({fListe:async a=>await this.suivreTableauxNuée({idNuée:e,f:o=>a(o.map(c=>c.id))}),f:async a=>await r(a||[]),fBranche:async(a,o)=>await this.client.tableaux.suivreVariables({idTableau:a,f:o})})}async suivreQualitéNuée({idNuée:e,f:r}){const n={noms:{},descr:{}},i=async()=>{const c=[Object.keys(n.noms).length?1:0,Object.keys(n.descr).length?1:0],l=c.reduce((u,f)=>u+f,0)/c.length;await r(l)},s=await this.suivreNomsNuée({idNuée:e,f:c=>{n.noms=c,i()}}),a=await this.suivreDescriptionsNuée({idNuée:e,f:c=>{n.descr=c,i()}});return async()=>{await s(),await a()}}async suivreDifférencesNuéeEtTableau({idNuée:e,clefTableau:r,idTableau:n,f:i,stricte:s=!0}){const a=async l=>{const u=l.filter(f=>s||f.sévère);await i(u)},o=async({fSuivreRacine:l})=>await this.client.bds.suivreIdTableauParClef({idBd:e,clef:r,f:l}),c=async({id:l,fSuivreBd:u})=>await this.client.tableaux.suivreDifférencesAvecTableau({idTableau:n,idTableauRéf:l,f:u});return await fs({fRacine:o,f:hs(a),fSuivre:c})}async suivreDifférencesNuéeEtBd({idNuée:e,idBd:r,f:n}){const i={},s=async()=>{const c=[];if(i.tableauxNuée&&i.tableauxBd){for(const l of i.tableauxNuée)if(!i.tableauxNuée.find(f=>f.clef===l.clef)){const f={type:"tableauManquant",sévère:!0,clefManquante:l.clef};c.push(f)}for(const l of i.tableauxBd)if(!i.tableauxNuée.find(f=>f.clef===l.clef)){const f={type:"tableauSupplémentaire",sévère:!1,clefExtra:l.clef};c.push(f)}}await n(c)},a=await this.client.bds.suivreTableauxBd({idBd:r,f:c=>{i.tableauxBd=c,s()}}),o=await this.suivreTableauxNuée({idNuée:e,f:c=>{i.tableauxNuée=c,s()}});return async()=>{await a(),await o()}}async suivreCorrespondanceBd({idBd:e,f:r}){return await bn({fListe:async s=>await this.client.bds.suivreNuéesBd({idBd:e,f:s}),f:r,fBranche:async(s,a)=>{const o={différencesBds:[],différencesTableaux:[]},c=async()=>{a([...o.différencesBds,...o.différencesTableaux])},l=await this.suivreDifférencesNuéeEtBd({idNuée:s,idBd:e,f:async h=>{o.différencesBds=h,await c()}}),f=await bn({fListe:async h=>await this.client.bds.suivreTableauxBd({idBd:e,f:h}),f:async h=>{o.différencesTableaux=h,await c()},fBranche:async(h,d,g)=>await this.suivreDifférencesNuéeEtTableau({idNuée:s,clefTableau:g.clef,idTableau:h,f:async p=>{await d(p.map(m=>({type:"tableau",sévère:m.sévère,idTableau:h,différence:m})))}}),fCode:h=>h.id,fIdBdDeBranche:h=>h.id});return async()=>{await Promise.all([l,f])}}})}async rechercherNuéesDéscendantes({idNuée:e,f:r,nRésultatsDésirés:n,toutLeRéseau:i=!0}){const s=async a=>{r(a.map(o=>o.id))};return await this.client.réseau.rechercherNuées({f:s,fObjectif:async(a,o,c)=>await a.nuées.suivreNuéesParents({idNuée:o,f:l=>{l.includes(e)&&c({type:"résultat",score:1,de:"*",info:{type:"vide"}})}}),nRésultatsDésirés:n,toutLeRéseau:i})}async préciserParent({idNuée:e,idNuéeParent:r}){const{bd:n,fOublier:i}=await this.client.ouvrirBdTypée({id:e,type:"keyvalue",schéma:ka});n.set("parent",r),await i()}async enleverParent({idNuée:e}){const{bd:r,fOublier:n}=await this.client.ouvrirBdTypée({id:e,type:"keyvalue",schéma:ka});r.del("parent"),await n()}async suivreNuéesParents({idNuée:e,f:r}){let n=!1;const i={},s=async()=>{await r(Object.values(Object.values(i).map(c=>c.parent)))},a=async({id:c})=>await this.client.suivreBd({id:c,type:"keyvalue",schéma:ka,f:async l=>{if(n)return;const u=await l.get("parent");if(i[c]?.parent===u){u||await s();return}if(await i[c]?.fOublier(),u){const f=await a({id:u});i[c]={parent:u,fOublier:async()=>{await f(),await i[u]?.fOublier(),delete i[c],await s()}}}else delete i[c];await s()}}),o=await a({id:e});return async()=>{n=!0,await o(),await Promise.all(Object.values(i).map(c=>c.fOublier()))}}async suivreBdsCorrespondantesDUneNuée({idNuée:e,f:r,nRésultatsDésirés:n,vérifierAutorisation:i=!0,toujoursInclureLesMiennes:s=!0}){if(i){const a={},o=async()=>{const{philoAutorisation:m,membres:y,bds:v}=a;if(!v)return;if(!m)return s?await r(v.filter(A=>A.auteurs.some(C=>C===this.client.idCompte)).map(A=>A.idBd)):void 0;if(!y)return;const _=await this.client.obtIdCompte();return await r((A=>{if(m==="CJPI"){const C=y.filter(R=>R.statut==="accepté").map(R=>R.idCompte);return A.filter(R=>R.auteurs.some(M=>C.includes(M))||s&&R.auteurs.includes(_)).map(R=>R.idBd)}else if(m==="IJPC"){const C=y.filter(R=>R.statut==="exclus").map(R=>R.idCompte);return A.filter(R=>!R.auteurs.some(M=>C.includes(M))).map(R=>R.idBd)}else throw new Error(m)})(v))},c=await this.suivrePhilosophieAutorisation({idNuée:e,f:async m=>{a.philoAutorisation=m,await o()}}),l=await this.suivreAutorisationsMembresDeNuée({idNuée:e,f:async m=>{a.membres=m,await o()}}),u=async m=>{a.bds=m,await o()},f=async m=>await this.client.réseau.suivreBdsDeNuée({idNuée:e,f:m,nRésultatsDésirés:n}),h=async(m,y)=>{const v=async _=>await y({idBd:m,auteurs:_.filter(x=>x.accepté).map(x=>x.idCompte)});return await this.client.réseau.suivreAuteursBd({idBd:m,f:v})},{fOublier:d,fChangerProfondeur:g}=await bn({fListe:f,f:u,fBranche:h});return{fOublier:async()=>{await Promise.all([d,l,c].map(m=>m()))},fChangerProfondeur:g}}else return await this.client.réseau.suivreBdsDeNuée({idNuée:e,f:r,nRésultatsDésirés:n})}async suivreBdsCorrespondantes({idNuée:e,f:r,nRésultatsDésirés:n,héritage:i,vérifierAutorisation:s=!0,toujoursInclureLesMiennes:a=!0}){const o={},c=[],l=async()=>{if(!o.directes)return;const h=[...new Set([...o.ascendance||[],...o.descendance||[],...o.directes])];return await r(h)};if(i&&i.includes("ascendance")){const h=await this.suivreDeParents({idNuée:e,f:async d=>{const g=[];d.forEach(p=>p.forEach(m=>{g.includes(m)||g.push(m)})),o.ascendance=g,await l()},fParents:async(d,g)=>(await this.suivreBdsCorrespondantesDUneNuée({idNuée:d,f:g,nRésultatsDésirés:n,vérifierAutorisation:s,toujoursInclureLesMiennes:a})).fOublier});c.push(h)}if(i&&i.includes("descendance")){const{fOublier:h}=await bn({fListe:async d=>await this.rechercherNuéesDéscendantes({idNuée:e,f:g=>d([e,...g].reverse())}),f:async d=>{o.descendance=d,await l()},fBranche:async(d,g)=>(await this.suivreBdsCorrespondantesDUneNuée({idNuée:d,f:g,nRésultatsDésirés:n,vérifierAutorisation:s,toujoursInclureLesMiennes:a})).fOublier});c.push(h)}const{fOublier:u,fChangerProfondeur:f}=await this.suivreBdsCorrespondantesDUneNuée({idNuée:e,f:async h=>{o.directes=h,await l()},nRésultatsDésirés:n,vérifierAutorisation:s,toujoursInclureLesMiennes:a});return c.push(u),{fOublier:async()=>{await Promise.all(c.map(h=>h()))},fChangerProfondeur:f}}async suivreEmpreinteTêtesBdsNuée({idNuée:e,f:r,héritage:n}){return await bn({fListe:async i=>{const{fOublier:s}=await this.suivreBdsCorrespondantes({idNuée:e,f:async a=>i([e,...a]),héritage:n});return s},f:async i=>{const s=U4.stringify(nT(i.join(":")));return await r(s)},fBranche:async(i,s)=>await this.client.suivreEmpreinteTêtesBdRécursive({idBd:i,f:s})})}async suivreDonnéesTableauNuée({idNuée:e,clefTableau:r,f:n,nRésultatsDésirés:i,héritage:s,ignorerErreursFormatBd:a=!0,ignorerErreursFormatTableau:o=!1,ignorerErreursDonnéesTableau:c=!0,licencesPermises:l=void 0,toujoursInclureLesMiennes:u=!0,clefsSelonVariables:f=!1,vérifierAutorisation:h=!0}){const d=async y=>{const v=y.flat();await n(v)},g=async y=>await this.suivreBdsCorrespondantes({idNuée:e,f:async v=>await y(v),nRésultatsDésirés:i,héritage:s,toujoursInclureLesMiennes:u,vérifierAutorisation:h});return await bn({fListe:async y=>{const v=async(_,x)=>{const A={licence:!1,formatBd:!0},C=[],R=async()=>{const M=Object.values(A).every(N=>N);await x(M)};if(l){const M=await this.client.bds.suivreLicenceBd({idBd:_,f:async N=>(A.licence=l.includes(N),await R())});C.push(M)}else A.licence=!0;if(a)A.formatBd=!0;else{const M=await this.suivreDifférencesNuéeEtBd({idBd:_,idNuée:e,f:async N=>(A.formatBd=!N.length,await R())});C.push(M)}return await R(),async()=>{await Promise.all(C.map(M=>M()))}};return await this.client.suivreBdsSelonCondition({fListe:g,fCondition:v,f:y})},f:d,fBranche:async(y,v)=>{const _={},x=async()=>{const{données:M,erreursÉléments:N,auteurs:Y}=_;if(M&&N&&Y&&Y.length){const H=Y.find(k=>k.accepté)?.idCompte;if(!H)return;const E=M.map(k=>({idCompte:H,élément:k,valid:N.filter(w=>w.id==k.id)})).filter(k=>c||!k.valid.length);await v(E)}},C=await fs({fRacine:async({fSuivreRacine:M})=>await this.client.suivreBdSelonCondition({fRacine:async N=>await this.client.bds.suivreIdTableauParClef({idBd:y,clef:r,f:hs(N)}),fCondition:async(N,Y)=>o?(await Y(!0),Li):(await Y(!0),await this.suivreDifférencesNuéeEtTableau({idNuée:e,clefTableau:r,idTableau:N,f:async H=>await Y(!H.length),stricte:!1})),f:M}),f:async M=>{_.données=M?.données,_.erreursÉléments=M?.erreurs,await x()},fSuivre:async({id:M,fSuivreBd:N})=>{const Y={},H=[],E=async()=>{const{données:T,erreurs:L}=Y;T&&await N({données:T,erreurs:L||[]})},k=await this.client.tableaux.suivreDonnées({idTableau:M,f:async T=>{Y.données=T,await E()},clefsSelonVariables:f});H.push(k);const w=await this.client.tableaux.suivreValidDonnées({idTableau:M,f:async T=>{Y.erreurs=T,await E()}});return H.push(w),async()=>{await Promise.all(H.map(T=>T()))}}}),R=await this.client.réseau.suivreAuteursBd({idBd:y,f:async M=>{_.auteurs=M,await x()}});return async()=>{await Promise.all([C,R])}}})}async suivreDonnéesExportationTableau({clefTableau:e,idNuée:r,langues:n,f:i,nRésultatsDésirés:s,héritage:a}){const o={},c=[],l=async()=>{const{colonnes:h,données:d,nomsTableau:g,nomsVariables:p}=o;if(h&&d&&(!n||g&&p)){const m=new Set;let y=await Promise.all(d.map(async x=>({...await this.client.tableaux.formaterÉlément({é:x.élément.données,colonnes:h,fichiersSFIP:m,langues:n}),auteur:x.idCompte})));y=y.map(x=>Object.keys(x).reduce((A,C)=>{if(C==="auteur")A[C]=x[C];else{const R=h.find(N=>N.id===C)?.variable;if(!R)throw new Error(`Colonnne avec id ${C} non trouvée parmis les colonnnes :
${JSON.stringify(h,void 0,2)}.`);const M=n&&p?.[R]&&A1(p[R],n)||C;A[M]=x[C]}return A},{}));const v=e.split("/").pop(),_=n&&g&&A1(g,n)||v;return await i({nomTableau:_,données:y,fichiersSFIP:m})}};if(n){const h=await this.suivreNomsTableauNuée({idNuée:r,clefTableau:e,f:async g=>{o.nomsTableau=g,await l()}});c.push(h);const d=await bn({fListe:async g=>this.suivreVariablesNuée({idNuée:r,f:g}),f:async g=>{o.nomsVariables=Object.fromEntries(g.map(p=>[p.idVar,p.noms])),await l()},fBranche:async(g,p)=>await this.client.variables.suivreNomsVariable({idVariable:g,f:async m=>await p({idVar:g,noms:m})})});c.push(d)}const u=await this.suivreColonnesTableauNuée({idNuée:r,clefTableau:e,f:async h=>{o.colonnes=h,await l()},catégories:!0});c.push(u);const{fOublier:f}=await this.suivreDonnéesTableauNuée({idNuée:r,clefTableau:e,nRésultatsDésirés:s,héritage:a,f:async h=>{o.données=h,await l()}});return c.push(f),async()=>{Promise.all(c.map(h=>h()))}}async suivreDonnéesExportation({idNuée:e,langues:r,f:n,nRésultatsDésirés:i,héritage:s}){const a={},o=[],c=async()=>{const{nomsNuée:f,données:h}=a;if(!h)return;const d=e.split("/").pop(),g=f&&r&&A1(f,r)||d;await n({nomNuée:g,tableaux:h})},l=await bn({fListe:async f=>await this.suivreTableauxNuée({idNuée:e,f}),f:async f=>{a.données=f,await c()},fBranche:async(f,h)=>await this.suivreDonnéesExportationTableau({idNuée:e,clefTableau:f,langues:r,nRésultatsDésirés:i,héritage:s,f:async d=>await h(d)}),fIdBdDeBranche:f=>f.clef,fCode:f=>f.clef});if(o.push(l),r){const f=await this.suivreNomsNuée({idNuée:e,f:async h=>{a.nomsNuée=h,await c()}});o.push(f)}return async()=>{await Promise.all(o.map(f=>f()))}}async exporterDonnéesNuée({idNuée:e,langues:r,nomFichier:n,nRésultatsDésirés:i,héritage:s,patience:a=500}){const o=zd.book_new(),c=new Set,l=await Sn(async u=>await this.suivreDonnéesExportation({idNuée:e,langues:r,f:u,héritage:s,nRésultatsDésirés:i}),Bo(a));n=n||l.nomNuée;for(const u of l.tableaux){u.fichiersSFIP.forEach(h=>c.add(h));const f=zd.json_to_sheet(u.données);zd.book_append_sheet(o,f,u.nomTableau.slice(0,30))}return{doc:o,fichiersSFIP:c,nomFichier:n}}async générerDeBd({idBd:e,patience:r=500}){const n=await this.créerNuée({}),[i,s,a,o]=await Promise.all([Sn(async c=>await this.client.bds.suivreNomsBd({idBd:e,f:c}),Bo(r)),Sn(async c=>await this.client.bds.suivreDescriptionsBd({idBd:e,f:c}),Bo(r)),Sn(async c=>await this.client.bds.suivreMotsClefsBd({idBd:e,f:c}),Bo(r)),Sn(async c=>await this.client.bds.suivreTableauxBd({idBd:e,f:c}),Bo(r))]);return await Promise.all([this.sauvegarderNomsNuée({idNuée:n,noms:i}),await this.sauvegarderDescriptionsNuée({idNuée:n,descriptions:s}),await this.ajouterMotsClefsNuée({idNuée:n,idsMotsClefs:a})]),await Promise.all(o.map(async c=>{const l=c.id,u=await this.ajouterTableauNuée({idNuée:n,clefTableau:c.clef}),f=await Sn(async h=>await this.client.tableaux.suivreColonnesTableau({idTableau:l,f:h,catégories:!1}),Bo(r));for(const h of f){await this.ajouterColonneTableauNuée({idTableau:u,idVariable:h.variable,idColonne:h.id,index:h.index}),await this.changerColIndexTableauNuée({idTableau:u,idColonne:h.id,val:!!h.index});const d=await Sn(async g=>await this.client.tableaux.suivreRègles({idTableau:l,f:g}),Bo(r));for(const g of d)g.source.type==="tableau"&&await this.ajouterRègleTableauNuée({idTableau:u,idColonne:h.id,règle:g.règle.règle})}})),n}async générerSchémaBdNuée({idNuée:e,licence:r,patience:n=500}){const[i,s]=await Promise.all([Sn(async l=>await this.suivreMotsClefsNuée({idNuée:e,f:l}),Bo(n)),Sn(async l=>await this.suivreTableauxNuée({idNuée:e,f:l}),Bo(n))]),a=async l=>await Sn(async u=>await this.suivreRèglesTableauNuée({idNuée:e,clefTableau:l,f:u}),Bo(n)),o=async l=>await Sn(async u=>await this.suivreColonnesTableauNuée({idNuée:e,clefTableau:l,f:u,catégories:!1}),Bo(n));return{licence:r,nuées:[e],motsClefs:i,tableaux:await Promise.all(s.map(async l=>{const[u,f]=await Promise.all([o(l.clef),a(l.clef)]);return{cols:u.map(h=>{const d=f.some(g=>g.colonne===h.id&&g.règle.règle.typeRègle==="existe");return{idColonne:h.id,idVariable:h.variable,index:!!h.index,optionnelle:!d}}),clef:l.clef}}))}}async effacerNuée({idNuée:e}){const{bd:r,fOublier:n}=await this.obtBd();await r.del(e),await n();for(const s of["noms","descriptions","motsClefs"]){const a=await this.client.obtIdBd({nom:s,racine:e});a&&await this.client.effacerBd({id:a})}const i=await this.client.obtIdBd({nom:"tableaux",racine:e,type:"ordered-keyvalue"});if(i){const{bd:s,fOublier:a}=await this.client.ouvrirBdTypée({id:i,type:"ordered-keyvalue",schéma:Wc}),o=Object.keys(s.all);for(const c of o)await this.client.tableaux.effacerTableau({idTableau:c});a(),await this.client.effacerBd({id:i})}await this.enleverDeMesNuées({idNuée:e}),await this.client.favoris.désépinglerFavori({idObjet:e}),await this.client.effacerBd({id:e})}}He([ot],qa.prototype,"suivreDescriptionsNuée",null);He([ot],qa.prototype,"suivreImage",null);He([ot],qa.prototype,"suivreMotsClefsNuée",null);He([ot],qa.prototype,"suivreNomsTableauNuée",null);He([ot],qa.prototype,"suivreColonnesTableauNuée",null);He([ot],qa.prototype,"suivreRèglesTableauNuée",null);He([ot],qa.prototype,"suivreQualitéNuée",null);He([ot],qa.prototype,"suivreDifférencesNuéeEtTableau",null);He([ot],qa.prototype,"suivreDifférencesNuéeEtBd",null);He([ot],qa.prototype,"suivreCorrespondanceBd",null);He([Ht],qa.prototype,"rechercherNuéesDéscendantes",null);He([ot],qa.prototype,"suivreNuéesParents",null);He([Ht],qa.prototype,"suivreBdsCorrespondantesDUneNuée",null);He([Ht],qa.prototype,"suivreBdsCorrespondantes",null);He([ot],qa.prototype,"suivreEmpreinteTêtesBdsNuée",null);He([Ht],qa.prototype,"suivreDonnéesTableauNuée",null);const h8=t=>async(e,r,n)=>{const i=async a=>{const o=of(t,a);if(o){const{score:c,clef:l,info:u}=o;return await n({type:"résultat",score:c,de:"nom",clef:l,info:u})}else return await n()};return await e.variables.suivreNomsVariable({idVariable:r,f:i})},Mve=t=>async(e,r,n)=>{const i=async a=>{const o=of(t,a);if(o){const{score:c,clef:l,info:u}=o;return await n({type:"résultat",score:c,de:"descr",clef:l,info:u})}else return await n()};return await e.variables.suivreDescriptionsVariable({idVariable:r,f:i})},Lve=t=>async(e,r,n)=>{const i=h8(t),s=Mve(t),a=Ks(t),o=Rb(t);return await Ih({noms:i,descr:s,id:a,vide:o},e,r,n)},d8=t=>async(e,r,n)=>{const i=async a=>{const o=of(t,a);if(o){const{score:c,clef:l,info:u}=o;return await n({type:"résultat",score:c,clef:l,info:u,de:"nom"})}else return await n()};return await e.motsClefs.suivreNomsMotClef({idMotClef:r,f:i})},Fve=t=>async(e,r,n)=>{const i=async a=>{const o=of(t,a);if(o){const{score:c,clef:l,info:u}=o;return await n({type:"résultat",score:c,clef:l,info:u,de:"descr"})}else return await n()};return await e.motsClefs.suivreDescriptionsMotClef({idMotClef:r,f:i})},$ve=t=>async(e,r,n)=>{const i=d8(t),s=Fve(t),a=Ks(t),o=Rb(t);return await Ih({noms:i,id:a,descr:s,vide:o},e,r,n)},Uve=t=>async(e,r,n)=>{const i=async a=>{const o=of(t,a);if(o){const{score:c,clef:l,info:u}=o;return await n({type:"résultat",score:c,clef:l,info:u,de:"nom"})}else return await n()};return await e.bds.suivreNomsBd({idBd:r,f:i})},Vve=t=>async(e,r,n)=>{const i=async a=>{const o=of(t,a);if(o){const{score:c,clef:l,info:u}=o;return await n({type:"résultat",score:c,clef:l,info:u,de:"descr"})}else return await n()};return await e.bds.suivreDescriptionsBd({idBd:r,f:i})},jve=t=>async(e,r,n)=>{const i=async a=>await e.bds.suivreVariablesBd({idBd:r,f:a}),s=Ks(t);return await xo("variable",i,s,e,n)},zve=t=>async(e,r,n)=>{const i=async a=>await e.bds.suivreVariablesBd({idBd:r,f:a}),s=h8(t);return await xo("variable",i,s,e,n)},qve=t=>async(e,r,n)=>await Ih({id:jve(t),nom:zve(t)},e,r,n),Hve=t=>async(e,r,n)=>{const i=async a=>await e.bds.suivreMotsClefsBd({idBd:r,f:a}),s=Ks(t);return await xo("motClef",i,s,e,n)},Wve=t=>async(e,r,n)=>{const i=async a=>await e.bds.suivreMotsClefsBd({idBd:r,f:a}),s=d8(t);return await xo("motClef",i,s,e,n)},Kve=t=>async(e,r,n)=>await Ih({id:Hve(t),nom:Wve(t)},e,r,n),Gve=t=>async(e,r,n)=>await Ih({nom:Uve(t),descr:Vve(t),variables:qve(t),motsClefs:Kve(t),id:Ks(t),vide:Rb(t)},e,r,n),Yve=t=>async(e,r,n)=>{const i=a=>{const o=of(t,a);if(o){const{score:c,clef:l,info:u}=o;n({type:"résultat",score:c,clef:l,info:u,de:"nom"})}else n()};return await e.projets.suivreNomsProjet({idProjet:r,f:i})},Xve=t=>async(e,r,n)=>{const i=a=>{const o=of(t,a);if(o){const{score:c,clef:l,info:u}=o;n({type:"résultat",score:c,clef:l,info:u,de:"descr"})}else n()};return await e.projets.suivreDescriptionsProjet({idProjet:r,f:i})},UTt=t=>async(e,r,n)=>{const i=async a=>await e.projets.suivreBdsProjet({idProjet:r,f:a}),s=Ks(t);return await xo("bd",i,s,e,n)},Zve=t=>async(e,r,n)=>{const i=async a=>await e.projets.suivreBdsProjet({idProjet:r,f:a}),s=Gve(t);return await xo("bd",i,s,e,n)},VTt=t=>async(e,r,n)=>{const i=async a=>await e.projets.suivreVariablesProjet({idProjet:r,f:a}),s=Ks(t);return await xo("variable",i,s,e,n)},jTt=t=>async(e,r,n)=>{const i=async a=>await e.projets.suivreVariablesProjet({idProjet:r,f:a}),s=h8(t);return await xo("variable",i,s,e,n)},Jve=t=>async(e,r,n)=>{const i=async a=>await e.projets.suivreVariablesProjet({idProjet:r,f:a}),s=Lve(t);return await xo("variable",i,s,e,n)},zTt=t=>async(e,r,n)=>{const i=async a=>await e.projets.suivreMotsClefsProjet({idProjet:r,f:o=>a(o.map(c=>c.idMotClef))}),s=Ks(t);return await xo("motClef",i,s,e,n)},qTt=t=>async(e,r,n)=>{const i=async a=>await e.projets.suivreMotsClefsProjet({idProjet:r,f:o=>a(o.map(c=>c.idMotClef))}),s=d8(t);return await xo("motClef",i,s,e,n)},Qve=t=>async(e,r,n)=>{const i=async a=>await e.projets.suivreMotsClefsProjet({idProjet:r,f:o=>a(o.map(c=>c.idMotClef))}),s=$ve(t);return await xo("motClef",i,s,e,n)},HTt=t=>async(e,r,n)=>{const i=Yve(t),s=Xve(t),a=Zve(t),o=Jve(t),c=Qve(t),l=Ks(t),u=Rb(t);return await Ih({noms:i,descr:s,bd:a,variable:o,motClef:c,id:l,tous:u},e,r,n)},ebe=t=>async(e,r,n)=>{const i=a=>{const o=of(t,a);if(o){const{score:c,clef:l,info:u}=o;n({type:"résultat",score:c,clef:l,info:u,de:"nom"})}else n()};return await e.nuées.suivreNomsNuée({idNuée:r,f:i})},tbe=t=>async(e,r,n)=>{const i=a=>{const o=of(t,a);if(o){const{score:c,clef:l,info:u}=o;n({type:"résultat",score:c,clef:l,info:u,de:"descr"})}else n()};return await e.nuées.suivreDescriptionsNuée({idNuée:r,f:i})},rbe=t=>async(e,r,n)=>{const i=async a=>await e.nuées.suivreVariablesNuée({idNuée:r,f:a}),s=Ks(t);return await xo("variable",i,s,e,n)},nbe=t=>async(e,r,n)=>{const i=async a=>await e.nuées.suivreVariablesNuée({idNuée:r,f:a}),s=h8(t);return await xo("variable",i,s,e,n)},ibe=t=>async(e,r,n)=>await Ih({id:rbe(t),nom:nbe(t)},e,r,n),sbe=t=>async(e,r,n)=>{const i=async a=>await e.nuées.suivreMotsClefsNuée({idNuée:r,f:a}),s=Ks(t);return await xo("motClef",i,s,e,n)},abe=t=>async(e,r,n)=>{const i=async a=>await e.nuées.suivreMotsClefsNuée({idNuée:r,f:a}),s=d8(t);return await xo("motClef",i,s,e,n)},obe=t=>async(e,r,n)=>await Ih({id:sbe(t),nom:abe(t)},e,r,n),WTt=t=>async(e,r,n)=>await Ih({nom:ebe(t),descr:tbe(t),variables:ibe(t),motsClefs:obe(t),id:Ks(t),tous:Rb(t)},e,r,n);class nr{client;constructor({client:e}){this.client=e}async rechercherVariables({f:e,nRésultatsDésirés:r,toutLeRéseau:n=!0}){return await this.client.réseau.rechercherVariables({f:e,nRésultatsDésirés:r,toutLeRéseau:n})}async rechercherVariablesSelonId({idVariable:e,f:r,nRésultatsDésirés:n,toutLeRéseau:i=!0}){const s=Ks(e);return await this.client.réseau.rechercherVariables({f:r,nRésultatsDésirés:n,fObjectif:s,toutLeRéseau:i})}async rechercherVariablesSelonNom({nomVariable:e,f:r,nRésultatsDésirés:n,toutLeRéseau:i=!0}){const s=h8(e);return await this.client.réseau.rechercherVariables({f:r,nRésultatsDésirés:n,fObjectif:s,toutLeRéseau:i})}async rechercherVariablesSelonDescr({descrVariable:e,f:r,nRésultatsDésirés:n,toutLeRéseau:i=!0}){const s=Mve(e);return await this.client.réseau.rechercherVariables({f:r,nRésultatsDésirés:n,fObjectif:s,toutLeRéseau:i})}async rechercherVariablesSelonTexte({texte:e,f:r,nRésultatsDésirés:n,toutLeRéseau:i=!0}){const s=Lve(e);return await this.client.réseau.rechercherVariables({f:r,nRésultatsDésirés:n,fObjectif:s,toutLeRéseau:i})}async rechercherMotsClefs({f:e,nRésultatsDésirés:r,toutLeRéseau:n=!0}){return await this.client.réseau.rechercherMotsClefs({f:e,nRésultatsDésirés:r,toutLeRéseau:n})}async rechercherMotsClefsSelonId({idMotClef:e,f:r,nRésultatsDésirés:n,toutLeRéseau:i=!0}){const s=Ks(e);return await this.client.réseau.rechercherMotsClefs({f:r,nRésultatsDésirés:n,fObjectif:s,toutLeRéseau:i})}async rechercherMotsClefsSelonNom({nomMotClef:e,f:r,nRésultatsDésirés:n,toutLeRéseau:i=!0}){const s=d8(e);return await this.client.réseau.rechercherMotsClefs({f:r,nRésultatsDésirés:n,fObjectif:s,toutLeRéseau:i})}async rechercherMotsClefsSelonDescr({descrMotClef:e,f:r,nRésultatsDésirés:n,toutLeRéseau:i=!0}){const s=Fve(e);return await this.client.réseau.rechercherMotsClefs({f:r,nRésultatsDésirés:n,fObjectif:s,toutLeRéseau:i})}async rechercherMotsClefsSelonTexte({texte:e,f:r,nRésultatsDésirés:n,toutLeRéseau:i=!0}){const s=$ve(e);return await this.client.réseau.rechercherMotsClefs({f:r,nRésultatsDésirés:n,fObjectif:s,toutLeRéseau:i})}async rechercherBds({f:e,nRésultatsDésirés:r,toutLeRéseau:n=!0}){return await this.client.réseau.rechercherBds({f:e,nRésultatsDésirés:r,toutLeRéseau:n})}async rechercherBdsSelonId({idBd:e,f:r,nRésultatsDésirés:n,toutLeRéseau:i=!0}){const s=Ks(e);return await this.client.réseau.rechercherBds({f:r,nRésultatsDésirés:n,fObjectif:s,toutLeRéseau:i})}async rechercherBdsSelonNom({nomBd:e,f:r,nRésultatsDésirés:n,toutLeRéseau:i=!0}){const s=Uve(e);return await this.client.réseau.rechercherBds({f:r,nRésultatsDésirés:n,fObjectif:s,toutLeRéseau:i})}async rechercherBdsSelonDescr({descrBd:e,f:r,nRésultatsDésirés:n,toutLeRéseau:i=!0}){const s=Vve(e);return await this.client.réseau.rechercherBds({f:r,nRésultatsDésirés:n,fObjectif:s,toutLeRéseau:i})}async rechercherBdsSelonIdMotClef({idMotClef:e,f:r,nRésultatsDésirés:n,toutLeRéseau:i=!0}){const s=Hve(e);return await this.client.réseau.rechercherBds({f:r,nRésultatsDésirés:n,fObjectif:s,toutLeRéseau:i})}async rechercherBdsSelonIdVariable({idVariable:e,f:r,nRésultatsDésirés:n,toutLeRéseau:i=!0}){const s=jve(e);return await this.client.réseau.rechercherBds({f:r,nRésultatsDésirés:n,fObjectif:s,toutLeRéseau:i})}async rechercherBdsSelonNomMotClef({nomMotClef:e,f:r,nRésultatsDésirés:n,toutLeRéseau:i=!0}){const s=Wve(e);return await this.client.réseau.rechercherBds({f:r,nRésultatsDésirés:n,fObjectif:s,toutLeRéseau:i})}async rechercherBdsSelonNomVariable({nomVariable:e,f:r,nRésultatsDésirés:n,toutLeRéseau:i=!0}){const s=zve(e);return await this.client.réseau.rechercherBds({f:r,nRésultatsDésirés:n,fObjectif:s,toutLeRéseau:i})}async rechercherBdsSelonMotClef({texte:e,f:r,nRésultatsDésirés:n,toutLeRéseau:i=!0}){const s=Kve(e);return await this.client.réseau.rechercherBds({f:r,nRésultatsDésirés:n,fObjectif:s,toutLeRéseau:i})}async rechercherBdsSelonVariable({texte:e,f:r,nRésultatsDésirés:n,toutLeRéseau:i=!0}){const s=qve(e);return await this.client.réseau.rechercherBds({f:r,nRésultatsDésirés:n,fObjectif:s,toutLeRéseau:i})}async rechercherBdsSelonTexte({texte:e,f:r,nRésultatsDésirés:n,toutLeRéseau:i=!0}){const s=Gve(e);return await this.client.réseau.rechercherBds({f:r,nRésultatsDésirés:n,fObjectif:s,toutLeRéseau:i})}async rechercherProfilsSelonId({idCompte:e,f:r,nRésultatsDésirés:n}){const i=Ks(e);return await this.client.réseau.rechercherMembres({f:r,nRésultatsDésirés:n,fObjectif:i})}async rechercherProfilsSelonNom({nom:e,f:r,nRésultatsDésirés:n}){const i=Ove(e);return await this.client.réseau.rechercherMembres({f:r,nRésultatsDésirés:n,fObjectif:i})}async rechercherProfilsSelonImage({image:e,f:r,nRésultatsDésirés:n}){const i=ETt(e);return await this.client.réseau.rechercherMembres({f:r,nRésultatsDésirés:n,fObjectif:i})}async rechercherProfilsSelonActivité({f:e,nRésultatsDésirés:r}){const n=Dve();return await this.client.réseau.rechercherMembres({f:e,nRésultatsDésirés:r,fObjectif:n})}async rechercherProfilsSelonCourriel({courriel:e,f:r,nRésultatsDésirés:n}){const i=Nve(e);return await this.client.réseau.rechercherMembres({f:r,nRésultatsDésirés:n,fObjectif:i})}async rechercherProfilsSelonTexte({texte:e,f:r,nRésultatsDésirés:n}){const i=xTt(e);return await this.client.réseau.rechercherMembres({f:r,nRésultatsDésirés:n,fObjectif:i})}async rechercherProjets({f:e,nRésultatsDésirés:r,toutLeRéseau:n=!0}){return await this.client.réseau.rechercherProjets({f:e,nRésultatsDésirés:r,toutLeRéseau:n})}async rechercherProjetsSelonId({idProjet:e,f:r,nRésultatsDésirés:n,toutLeRéseau:i=!0}){const s=Ks(e);return await this.client.réseau.rechercherProjets({f:r,nRésultatsDésirés:n,fObjectif:s,toutLeRéseau:i})}async rechercherProjetsSelonNom({nomProjet:e,f:r,nRésultatsDésirés:n,toutLeRéseau:i=!0}){const s=Yve(e);return await this.client.réseau.rechercherProjets({f:r,nRésultatsDésirés:n,fObjectif:s,toutLeRéseau:i})}async rechercherProjetsSelonDescr({descrProjet:e,f:r,nRésultatsDésirés:n,toutLeRéseau:i=!0}){const s=Xve(e);return await this.client.réseau.rechercherProjets({f:r,nRésultatsDésirés:n,fObjectif:s,toutLeRéseau:i})}async rechercherProjetsSelonIdVariable({idVariable:e,f:r,nRésultatsDésirés:n,toutLeRéseau:i=!0}){const s=VTt(e);return await this.client.réseau.rechercherProjets({f:r,nRésultatsDésirés:n,fObjectif:s,toutLeRéseau:i})}async rechercherProjetsSelonNomVariable({nomVariable:e,f:r,nRésultatsDésirés:n,toutLeRéseau:i=!0}){const s=jTt(e);return await this.client.réseau.rechercherProjets({f:r,nRésultatsDésirés:n,fObjectif:s,toutLeRéseau:i})}async rechercherProjetsSelonVariable({texte:e,f:r,nRésultatsDésirés:n,toutLeRéseau:i=!0}){const s=Jve(e);return await this.client.réseau.rechercherProjets({f:r,nRésultatsDésirés:n,fObjectif:s,toutLeRéseau:i})}async rechercherProjetsSelonIdMotClef({idMotClef:e,f:r,nRésultatsDésirés:n,toutLeRéseau:i=!0}){const s=zTt(e);return await this.client.réseau.rechercherProjets({f:r,nRésultatsDésirés:n,fObjectif:s,toutLeRéseau:i})}async rechercherProjetsSelonNomMotClef({nomMotClef:e,f:r,nRésultatsDésirés:n,toutLeRéseau:i=!0}){const s=qTt(e);return await this.client.réseau.rechercherProjets({f:r,nRésultatsDésirés:n,fObjectif:s,toutLeRéseau:i})}async rechercherProjetsSelonMotClef({texte:e,f:r,nRésultatsDésirés:n,toutLeRéseau:i=!0}){const s=Qve(e);return await this.client.réseau.rechercherProjets({f:r,nRésultatsDésirés:n,fObjectif:s,toutLeRéseau:i})}async rechercherProjetsSelonIdBd({idBd:e,f:r,nRésultatsDésirés:n,toutLeRéseau:i=!0}){const s=UTt(e);return await this.client.réseau.rechercherProjets({f:r,nRésultatsDésirés:n,fObjectif:s,toutLeRéseau:i})}async rechercherProjetsSelonBd({texte:e,f:r,nRésultatsDésirés:n,toutLeRéseau:i=!0}){const s=Zve(e);return await this.client.réseau.rechercherProjets({f:r,nRésultatsDésirés:n,fObjectif:s,toutLeRéseau:i})}async rechercherProjetsSelonTexte({texte:e,f:r,nRésultatsDésirés:n,toutLeRéseau:i=!0}){const s=HTt(e);return await this.client.réseau.rechercherProjets({f:r,nRésultatsDésirés:n,fObjectif:s,toutLeRéseau:i})}async rechercherNuées({f:e,nRésultatsDésirés:r,toutLeRéseau:n=!0}){return await this.client.réseau.rechercherNuées({f:e,nRésultatsDésirés:r,toutLeRéseau:n})}async rechercherNuéesSelonId({idNuée:e,f:r,nRésultatsDésirés:n,toutLeRéseau:i=!0}){const s=Ks(e);return await this.client.réseau.rechercherNuées({f:r,nRésultatsDésirés:n,fObjectif:s,toutLeRéseau:i})}async rechercherNuéesSelonNom({nomNuée:e,f:r,nRésultatsDésirés:n,toutLeRéseau:i=!0}){const s=ebe(e);return await this.client.réseau.rechercherNuées({f:r,nRésultatsDésirés:n,fObjectif:s,toutLeRéseau:i})}async rechercherNuéesSelonDescr({descrNuée:e,f:r,nRésultatsDésirés:n,toutLeRéseau:i=!0}){const s=tbe(e);return await this.client.réseau.rechercherNuées({f:r,nRésultatsDésirés:n,fObjectif:s,toutLeRéseau:i})}async rechercherNuéesSelonIdMotClef({idMotClef:e,f:r,nRésultatsDésirés:n,toutLeRéseau:i=!0}){const s=sbe(e);return await this.client.réseau.rechercherNuées({f:r,nRésultatsDésirés:n,fObjectif:s,toutLeRéseau:i})}async rechercherNuéesSelonIdVariable({idVariable:e,f:r,nRésultatsDésirés:n,toutLeRéseau:i=!0}){const s=rbe(e);return await this.client.réseau.rechercherNuées({f:r,nRésultatsDésirés:n,fObjectif:s,toutLeRéseau:i})}async rechercherNuéesSelonNomMotClef({nomMotClef:e,f:r,nRésultatsDésirés:n,toutLeRéseau:i=!0}){const s=abe(e);return await this.client.réseau.rechercherNuées({f:r,nRésultatsDésirés:n,fObjectif:s,toutLeRéseau:i})}async rechercherNuéesSelonNomVariable({nomVariable:e,f:r,nRésultatsDésirés:n,toutLeRéseau:i=!0}){const s=nbe(e);return await this.client.réseau.rechercherNuées({f:r,nRésultatsDésirés:n,fObjectif:s,toutLeRéseau:i})}async rechercherNuéesSelonMotClef({texte:e,f:r,nRésultatsDésirés:n,toutLeRéseau:i=!0}){const s=obe(e);return await this.client.réseau.rechercherNuées({f:r,nRésultatsDésirés:n,fObjectif:s,toutLeRéseau:i})}async rechercherNuéesSelonVariable({texte:e,f:r,nRésultatsDésirés:n,toutLeRéseau:i=!0}){const s=ibe(e);return await this.client.réseau.rechercherNuées({f:r,nRésultatsDésirés:n,fObjectif:s,toutLeRéseau:i})}async rechercherNuéesSelonTexte({texte:e,f:r,nRésultatsDésirés:n,toutLeRéseau:i=!0}){const s=WTt(e);return await this.client.réseau.rechercherNuées({f:r,nRésultatsDésirés:n,fObjectif:s,toutLeRéseau:i})}}He([Ht],nr.prototype,"rechercherVariables",null);He([Ht],nr.prototype,"rechercherVariablesSelonId",null);He([Ht],nr.prototype,"rechercherVariablesSelonNom",null);He([Ht],nr.prototype,"rechercherVariablesSelonDescr",null);He([Ht],nr.prototype,"rechercherVariablesSelonTexte",null);He([Ht],nr.prototype,"rechercherMotsClefs",null);He([Ht],nr.prototype,"rechercherMotsClefsSelonId",null);He([Ht],nr.prototype,"rechercherMotsClefsSelonNom",null);He([Ht],nr.prototype,"rechercherMotsClefsSelonDescr",null);He([Ht],nr.prototype,"rechercherMotsClefsSelonTexte",null);He([Ht],nr.prototype,"rechercherBds",null);He([Ht],nr.prototype,"rechercherBdsSelonId",null);He([Ht],nr.prototype,"rechercherBdsSelonNom",null);He([Ht],nr.prototype,"rechercherBdsSelonDescr",null);He([Ht],nr.prototype,"rechercherBdsSelonIdMotClef",null);He([Ht],nr.prototype,"rechercherBdsSelonIdVariable",null);He([Ht],nr.prototype,"rechercherBdsSelonNomMotClef",null);He([Ht],nr.prototype,"rechercherBdsSelonNomVariable",null);He([Ht],nr.prototype,"rechercherBdsSelonMotClef",null);He([Ht],nr.prototype,"rechercherBdsSelonVariable",null);He([Ht],nr.prototype,"rechercherBdsSelonTexte",null);He([Ht],nr.prototype,"rechercherProfilsSelonId",null);He([Ht],nr.prototype,"rechercherProfilsSelonNom",null);He([Ht],nr.prototype,"rechercherProfilsSelonImage",null);He([Ht],nr.prototype,"rechercherProfilsSelonActivité",null);He([Ht],nr.prototype,"rechercherProfilsSelonCourriel",null);He([Ht],nr.prototype,"rechercherProfilsSelonTexte",null);He([Ht],nr.prototype,"rechercherProjets",null);He([Ht],nr.prototype,"rechercherProjetsSelonId",null);He([Ht],nr.prototype,"rechercherProjetsSelonNom",null);He([Ht],nr.prototype,"rechercherProjetsSelonDescr",null);He([Ht],nr.prototype,"rechercherProjetsSelonIdVariable",null);He([Ht],nr.prototype,"rechercherProjetsSelonNomVariable",null);He([Ht],nr.prototype,"rechercherProjetsSelonVariable",null);He([Ht],nr.prototype,"rechercherProjetsSelonIdMotClef",null);He([Ht],nr.prototype,"rechercherProjetsSelonNomMotClef",null);He([Ht],nr.prototype,"rechercherProjetsSelonMotClef",null);He([Ht],nr.prototype,"rechercherProjetsSelonIdBd",null);He([Ht],nr.prototype,"rechercherProjetsSelonBd",null);He([Ht],nr.prototype,"rechercherProjetsSelonTexte",null);He([Ht],nr.prototype,"rechercherNuées",null);He([Ht],nr.prototype,"rechercherNuéesSelonId",null);He([Ht],nr.prototype,"rechercherNuéesSelonNom",null);He([Ht],nr.prototype,"rechercherNuéesSelonDescr",null);He([Ht],nr.prototype,"rechercherNuéesSelonIdMotClef",null);He([Ht],nr.prototype,"rechercherNuéesSelonIdVariable",null);He([Ht],nr.prototype,"rechercherNuéesSelonNomMotClef",null);He([Ht],nr.prototype,"rechercherNuéesSelonNomVariable",null);He([Ht],nr.prototype,"rechercherNuéesSelonMotClef",null);He([Ht],nr.prototype,"rechercherNuéesSelonVariable",null);He([Ht],nr.prototype,"rechercherNuéesSelonTexte",null);class Qne{doc;constructor(e){this.doc=e}obtNomsTableaux(){return this.doc.SheetNames}obtColsTableau(e){const r=this.doc.Sheets[e];return(zd.sheet_to_json(r,{header:1})[0]||[]).map(i=>i.toString())}obtDonnées(e,r){const n=this.doc.Sheets[e],i=zd.sheet_to_json(n);if(Array.isArray(r))return i.map(s=>Object.fromEntries(Object.keys(s).filter(a=>r.includes(a)).map(a=>[a,s[a]])));{const s=Object.fromEntries(Object.entries(r).map(([a,o])=>[o,a]));return i.map(a=>Object.fromEntries(Object.keys(a).filter(o=>Object.keys(s).includes(o)).map(o=>[s[o],a[o]])))}}}const KTt=t=>JSON.parse(JSON.stringify(t)),F3=t=>typeof t=="object"&&!Array.isArray(t),f9=t=>Array.isArray(t),GTt=(t,e)=>{let r;if(!e.length)return r=F3(t)?Object.values(t):t,{base:{},branches:r};const n=h9(t,e.slice(0,e.length-1)),i=e[e.length-1];let s;if(typeof i=="number")if(f9(n)){const a=n[i];if(typeof a!="object")throw new Error(a.toString());s=a,delete n[i]}else throw new Error(`${i} ne peut pas indexer une liste.`);else if(typeof i=="string")if(F3(n)){const a=n[i];if(typeof a!="object")throw new Error(a.toString());s=a,delete n[i]}else throw new Error(`${i} ne peut pas indexer un objet.`);else throw new Error(`${i} n'est pas une clef valide.`);if(F3(s))r=Object.values(s);else if(f9(s))r=s;else throw Error(JSON.stringify(s));return{base:t,branches:r}},YTt=(t,e,r)=>{if(!e.length)Object.assign(t,r);else{const n=e.slice(1,e.length),i=h9(t,n),s=e[e.length-1];if(typeof s=="number")if(f9(i))i[s]=r;else throw new Error(`${s} ne peut pas indexer une liste.`);else if(typeof s=="string")if(F3(i))i[s]=r;else throw new Error(`${s} ne peut pas indexer un objet.`);else throw new Error(`${s} n'est pas une clef valide.`)}},cbe=(t,e=[],r,n=[])=>{e[e.length-1]!==-1&&e.push(-1);const i=e.indexOf(-1),s=e.slice(0,i),a=e.slice(i+1,e.length),{base:o,branches:c}=GTt(t,s);for(const l of c){if(typeof l!="object")throw new Error(l.toString());const u=KTt(o);YTt(u,s,l),a.length?cbe(l,a,u,n):n.push(u)}return n},h9=(t,e)=>{let r=t;for(const n of e)if(typeof n=="number")if(f9(r))r=r[n];else throw new Error(`${n} ne peut pas indexer une liste.`);else if(typeof n=="string")if(F3(r))r=r[n];else throw new Error(`${n} ne peut pas indexer un objet.`);else throw new Error(`Clef de type non indexable : ${n}`);return r};class eie{donnéesJSON;constructor(e){this.donnéesJSON=e}obtDonnées(e,r,n){let i=[],s=h9(this.donnéesJSON,e);if(typeof s!="object")throw new Error(`Type de données erroné : ${s.toString()}`);s=cbe(s,r);for(const a of s){if(typeof a!="object")throw new Error(`Élément de type non supporté : ${a}`);i=[Object.fromEntries(Object.keys(n).map(c=>{const l=n[c];let u;try{u=h9(a,l)}catch{u=void 0}return[c,u]}).filter(c=>c[1]!==void 0)),...i]}return i}}(Oa||Na)&&(Ar(()=>Promise.resolve().then(()=>vc),void 0).then(t=>Fme(t)),Ar(()=>Promise.resolve().then(()=>A1e),void 0).then(t=>Nye.set_readable(t.Readable)));const lbe="L'automatisation de l'importation des fichiers locaux n'est pas disponible sur la version apli internet de Constellation.",XTt={type:"object",additionalProperties:{type:"object",anyOf:[{type:"object",properties:{type:{type:"string"},id:{type:"string"},fréquence:{type:"object",properties:{type:{type:"string"},détails:{type:"object",properties:{n:{type:"number"},unités:{type:"string"}},nullable:!0}}},idObjet:{type:"string"},typeObjet:{type:"string"},formatDoc:{type:"string"},dossier:{type:"string",nullable:!0},langues:{type:"array",items:{type:"string"},nullable:!0},dispositifs:{type:"array",items:{type:"string"}},inclureFichiersSFIP:{type:"boolean"},nRésultatsDésirésNuée:{type:"integer",nullable:!0}},required:["type","idObjet","typeObjet","formatDoc","dispositifs","fréquence","inclureFichiersSFIP"]},{type:"object",properties:{id:{type:"string"},fréquence:{type:"object",properties:{type:{type:"string"},détails:{type:"object",properties:{n:{type:"number"},unités:{type:"string"}},nullable:!0}}},idTableau:{type:"string"},dispositif:{type:"string"},source:{type:"object",properties:{typeSource:{type:"string"},adresseFichier:{type:"string",nullable:!0},info:{type:"object",additionalProperties:!0,required:[]}},required:["info","typeSource"]},conversions:{type:"object",nullable:!0,additionalProperties:!0,required:[]}},required:["id","idTableau","dispositif","source"]}],required:["id","type"]},required:[]},ube=t=>{const{n:e,unités:r}=t.détails;switch(r){case"années":return e*365.25*24*60*60*1e3;case"mois":return e*30*24*60*60*1e3;case"semaines":return e*7*24*60*60*1e3;case"jours":return e*24*60*60*1e3;case"heures":return e*60*60*1e3;case"minutes":return e*60*1e3;case"secondes":return e*1e3;case"millisecondes":return e;default:throw new Error(r)}},ZTt=(t,e)=>async()=>{const r=await Ar(()=>import("./os-hmDTIVL1.js").then(u=>u.o),[]),n=await Ar(()=>Promise.resolve().then(()=>r6),void 0),i=await Ar(()=>Promise.resolve().then(()=>vc),void 0),s=t.dossier?await e.automatisations.résoudreAdressePrivéeFichier({clef:t.dossier}):n.join(r.homedir(),"constellation");if(!s)throw new Error("Dossier introuvable");let a;const o=u=>{const f=u.split(".");return`${f[0]}-${Date.now()}.${f[1]}`};switch(t.typeObjet){case"tableau":{const u=await e.tableaux.exporterDonnées({idTableau:t.idObjet,langues:t.langues});a=u.nomFichier,t.copies&&(a=o(a)),await e.bds.exporterDocumentDonnées({données:u,formatDoc:t.formatDoc,dossier:s,inclureFichiersSFIP:t.inclureFichiersSFIP});break}case"bd":{const u=await e.bds.exporterDonnées({idBd:t.idObjet,langues:t.langues});a=u.nomFichier,t.copies&&(a=o(a)),await e.bds.exporterDocumentDonnées({données:u,formatDoc:t.formatDoc,dossier:s,inclureFichiersSFIP:t.inclureFichiersSFIP});break}case"projet":{const u=await e.projets.exporterDonnées({idProjet:t.idObjet,langues:t.langues});a=u.nomFichier,t.copies&&(a=o(a)),await e.projets.exporterDocumentDonnées({données:u,formatDoc:t.formatDoc,dossier:s,inclureFichiersSFIP:t.inclureFichiersSFIP});break}case"nuée":{const u=await e.nuées.exporterDonnéesNuée({idNuée:t.idObjet,langues:t.langues,nRésultatsDésirés:t.nRésultatsDésirésNuée||1e3,héritage:t.héritage});a=u.nomFichier,t.copies&&(a=o(a)),await e.bds.exporterDocumentDonnées({données:u,formatDoc:t.formatDoc,dossier:s,inclureFichiersSFIP:t.inclureFichiersSFIP});break}default:throw new Error(t.typeObjet)}const c=i.readdirSync(s).filter(u=>{try{return i.statSync(u).isFile()&&l(n.basename(u),a)}catch{return!1}}),l=(u,f)=>{const h=u.split(".").pop()||"";return`${u.slice(0,-(h?.length+1)).split("-").slice(0,-1).join("")}.${h}`===f};if(t.copies){if(t.copies.type==="n"){const u=t.copies.n-c.length;u>0&&c.map(g=>({temps:new Date(i.statSync(g).mtime).valueOf(),fichier:g})).sort((g,p)=>g.temps>p.temps?1:-1).slice(u).map(g=>g.fichier).forEach(g=>i.rmSync(g))}else if(t.copies.type==="temps"){const u=Date.now(),{temps:f}=t.copies;c.filter(d=>{const g=new Date(i.statSync(d).mtime).valueOf();return u-g<ube(f)}).forEach(d=>i.rmSync(d))}}},JTt=(t,e)=>{switch(t.type){case"importation":return async()=>{const r=async a=>await e.automatisations.résoudreAdressePrivéeFichier({clef:a})||void 0,n=await e.automatisations.obtDonnéesImportation(t,r),i=await Ar(()=>Promise.resolve().then(()=>r6),void 0);let s;if(t.source.typeSource==="fichier"&&t.source.adresseFichier){const a=await r(t.source.adresseFichier);a&&(s=i.dirname(a))}await e.tableaux.importerDonnées({idTableau:t.idTableau,données:n,conversions:t.conversions,cheminBaseFichiers:s})};case"exportation":return ZTt(t,e);default:throw new Error(t)}},QTt=async({spéc:t,idSpéc:e,client:r,fÉtat:n})=>{const i=JTt(t,r),s=`auto: ${e}`,a=t.fréquence?.type==="fixe"?ube(t.fréquence):void 0,o=new kc;let c="";const l=await r.obtDeStockageLocal({clef:s}),u=new Set([l]),f=async d=>{if(u.has(d))return;if(c=d,await o.acquire("opération"),d!==c||u.has(d)){o.release("opération");return}await r.sauvegarderAuStockageLocal({clef:s,val:d}),u.add(d);const g={type:"sync",depuis:new Date().getTime()};n(g);try{if(await i(),a){const p={type:"programmée",à:Date.now()+a};n(p)}else n({type:"écoute"})}catch(p){const m={type:"erreur",erreur:JSON.stringify({nom:p.name,message:p.message,pile:p.stack,cause:p.cause},void 0,2),prochaineProgramméeÀ:a?Date.now()+a:void 0};n(m)}o.release("opération")},h=async()=>await f(rs());if(t.fréquence.type==="fixe"){n({type:"programmée",à:a});const g={},p=async()=>{const C=new Date().getTime();await f(C.toString());const R=setTimeout(p,a);g.f=async()=>clearTimeout(R)},m=new Date().getTime(),y=await r.obtDeStockageLocal({clef:s}),v=y?parseInt(y):-1/0,_=m-v,x=setTimeout(p,Math.max(a-_,0));return g.f=async()=>clearTimeout(x),{fOublier:async()=>{g.f&&await g.f()},fLancer:h}}else if(t.fréquence.type==="dynamique")switch(n({type:"écoute"}),t.type){case"exportation":return t.typeObjet==="nuée"?{fOublier:await r.nuées.suivreEmpreinteTêtesBdsNuée({idNuée:t.idObjet,f}),fLancer:h}:{fOublier:await r.suivreEmpreinteTêtesBdRécursive({idBd:t.idObjet,f}),fLancer:h};case"importation":switch(t.source.typeSource){case"fichier":{if(!Na&&!Oa)throw new Error(lbe);const g=await Ar(()=>import("chokidar"),[]),p=await Ar(()=>Promise.resolve().then(()=>vc),void 0),{adresseFichier:m}=t.source,y=await r.automatisations.résoudreAdressePrivéeFichier({clef:m});if(!y||!p.existsSync(y))throw new Error(`Fichier ${m} introuvable.`);const v=g.watch(y);v.on("change",async()=>{const R=new Date().getTime().toString();f(R)});const _=p.statSync(y).mtime.getTime(),x=await r.obtDeStockageLocal({clef:s});if(x?_>parseInt(x):!0){const R=new Date().getTime().toString();f(R)}return{fOublier:async()=>await v.close(),fLancer:h}}case"url":return n({type:"erreur",erreur:"La fréquence d'une automatisation d'importation d'URL doit être spécifiée.",prochaineProgramméeÀ:void 0}),{fOublier:Li,fLancer:Li};default:throw new Error(t.source)}default:throw new Error(t)}else{if(t.fréquence.type==="manuelle")return{fOublier:Li,fLancer:h};throw new Error(t.fréquence)}};class ekt extends qi.EventEmitter{client;état;fOublier;fLancer;constructor(e,r,n){super(),this.client=n,QTt({spéc:e,idSpéc:r,client:this.client,fÉtat:i=>{this.état=i,this.emit("misÀJour")}}).then(({fOublier:i,fLancer:s})=>{this.fOublier=i,this.fLancer=s,this.emit("prêt")})}async relancer(){this.fOublier||await new Promise(e=>{this.once("prêt",()=>{e()})}),await this.fLancer?.()}async fermer(){this.fOublier||await new Promise(e=>{this.once("prêt",()=>{e()})}),await this.fOublier?.()}}const tkt=(t,e)=>{switch(t.type){case"importation":return t.dispositif===e;case"exportation":return t.dispositifs.includes(e);default:throw new Error(t)}},tie=new kc;class rkt extends g0{automatisations;événements;fOublier;constructor({client:e}){super({client:e,clef:"automatisations",schémaBdPrincipale:XTt}),this.automatisations={},this.événements=new qi.EventEmitter,this.initialiser()}async initialiser(){this.fOublier=await this.suivreBdPrincipale({f:e=>this.mettreAutosÀJour(Object.values(e))})}async épingler(){await this.client.épingles.épinglerBd({id:await this.obtIdBd(),récursif:!1,fichiers:!1})}async mettreAutosÀJour(e){await tie.acquire("miseÀJour");const r=Object.keys(this.automatisations);for(const i of r)e.find(s=>s.id===i)||await this.fermerAuto(i);const n=await this.client.obtIdDispositif();for(const i of e)if(tkt(i,n)){if(!Object.keys(this.automatisations).includes(i.id)){const s=new ekt(i,i.id,this.client);s.on("misÀJour",()=>this.événements.emit("misÀJour")),this.automatisations[i.id]=s}}else this.automatisations[i.id]&&await this.fermerAuto(i.id);tie.release("miseÀJour")}async obtDonnéesImportation(e,r=async n=>n){const{typeSource:n}=e.source,{formatDonnées:i}=e.source.info;switch(n){case"url":{const{url:s}=e.source;switch(i){case"json":{const{clefsRacine:a,clefsÉléments:o,cols:c}=e.source.info,l=await wEt(s);return new eie(l).obtDonnées(a,o,c)}case"feuilleCalcul":{const{nomTableau:a,cols:o,optionsXLSX:c}=e.source.info,l=await _Et(s,c);return new Qne(l).obtDonnées(a,o)}default:throw new Error(i)}}case"fichier":{if(!Oa&&!Na)throw new Error(lbe);const s=await Ar(()=>Promise.resolve().then(()=>vc),void 0),{adresseFichier:a}=e.source,o=await r(a);if(!o||!s.existsSync(o))throw new Error(`Fichier ${o} introuvable.`);switch(i){case"json":{const{clefsRacine:c,clefsÉléments:l,cols:u}=e.source.info,f=await s.promises.readFile(o),h=JSON.parse(f.toString());return new eie(h).obtDonnées(c,l,u)}case"feuilleCalcul":{const{nomTableau:c,cols:l}=e.source.info,u=eM(o);return new Qne(u).obtDonnées(c,l)}default:throw new Error(i)}}default:throw new Error(n)}}async ajouterAutomatisationExporter({id:e,typeObjet:r,formatDoc:n,inclureFichiersSFIP:i,dossier:s,langues:a,fréquence:o,dispositifs:c,nRésultatsDésirésNuée:l,héritage:u,copies:f}){const{orbite:h}=await this.client.attendreSfipEtOrbite();c=c||[h.identity.id];const d=rs(),g=await this.sauvegarderAdressePrivéeFichier({fichier:s}),p={type:"exportation",id:d,idObjet:e,typeObjet:r,dispositifs:c,fréquence:o,formatDoc:n,langues:a,inclureFichiersSFIP:i,dossier:g,nRésultatsDésirésNuée:l,héritage:u,copies:f};Object.keys(p).forEach(v=>{p[v]===void 0&&delete p[v]});const{bd:m,fOublier:y}=await this.obtBd();return await m.put(d,p),await y(),d}async ajouterAutomatisationImporter({idTableau:e,source:r,fréquence:n,dispositif:i}){const{bd:s,fOublier:a}=await this.obtBd(),{orbite:o}=await this.client.attendreSfipEtOrbite();i=i||o.identity.id;const c=rs();r.typeSource==="fichier"&&(r.adresseFichier=await this.sauvegarderAdressePrivéeFichier({fichier:r.adresseFichier}));const l={type:"importation",id:c,idTableau:e,dispositif:i,fréquence:n,source:r};return Object.keys(l).forEach(u=>{l[u]===void 0&&delete l[u]}),await s.put(c,l),await a(),c}async annulerAutomatisation({id:e}){const{bd:r,fOublier:n}=await this.obtBd();await r.del(e),await n()}async résoudreAdressePrivéeFichier({clef:e}){return e?await this.client.obtDeStockageLocal({clef:e}):null}async sauvegarderAdressePrivéeFichier({fichier:e}){const r="dossier."+rs();return await this.client.sauvegarderAuStockageLocal({clef:r,val:e}),r}async suivreAutomatisations({f:e,idCompte:r}){const n=async i=>{const s=await Promise.all(Object.values(i).map(async a=>{const o=bF(a);if(o.type==="importation"&&o.source.typeSource==="fichier"){const{adresseFichier:c}=o.source;if(c){const l=await this.résoudreAdressePrivéeFichier({clef:c});l?o.source.adresseFichier=l:delete o.source.adresseFichier}}else if(o.type==="exportation"){const{dossier:c}=o;if(c){const l=await this.résoudreAdressePrivéeFichier({clef:c});l?o.dossier=l:delete o.dossier}}return o}));await e(s)};return await this.suivreBdPrincipale({idCompte:r,f:n})}async suivreÉtatAutomatisations({f:e}){const r=async()=>{const n=Object.fromEntries(Object.keys(this.automatisations).map(i=>[i,this.automatisations[i].état]).filter(i=>i[1]));await e(n)};return this.événements.on("misÀJour",r),async()=>{this.événements.off("misÀJour",r)}}async lancerManuellement({id:e}){await this.automatisations[e]?.relancer()}async fermerAuto(e){await this.automatisations[e].fermer(),delete this.automatisations[e]}async fermer(){await Promise.all(Object.keys(this.automatisations).map(e=>{this.fermerAuto(e)})),await this.fOublier?.()}}const NB={};class fbe{fichier;_données;_événements;_idRequêteSauvegarde;verrou;fOublier;constructor(e){this.fichier=S1.join(e,"données.json"),this._événements=new qi.EventEmitter,this.verrou=new kc,X2.existsSync(e)||X2.mkdirSync(e,{recursive:!0});try{this._données=JSON.parse(X2.readFileSync(this.fichier).toString())}catch{this._données={}}const r=()=>{const n=rs();this._idRequêteSauvegarde=n,this.sauvegarder(n)};this._événements.on("sauvegarder",r),this.fOublier=()=>this._événements.off("sauvegarder",r)}getItem(e){return this._données[e]}setItem(e,r){this._données[e]=r,this.demanderSauvegarde()}demanderSauvegarde(){this._événements.emit("sauvegarder")}removeItem(e){delete this._données[e],this.demanderSauvegarde()}clear(){this._données={},X2.rmSync(this.fichier)}async sauvegarder(e){if(await this.verrou.acquire("sauvegarder"),this._idRequêteSauvegarde!==e){this.verrou.release("sauvegarder");return}await X2.promises.writeFile(this.fichier,JSON.stringify(this._données)),this.verrou.release("sauvegarder")}async fermer(){await this.verrou.acquire("sauvegarder"),this.fOublier?.(),this.verrou.release("sauvegarder")}}const ey=async t=>{if(typeof localStorage>"u"||localStorage===null){const e=S1.join(t,"stockageLocal");return NB[e]||(NB[e]=new fbe(e)),NB[e]}else return localStorage},nkt=async t=>{const e=await ey(t);return e instanceof fbe?JSON.stringify(e._données):JSON.stringify(e)};var hbe={exports:{}};(function(t,e){(function(r,n){t.exports=n(Gj())})(It,function(r){return function(n){var i=r,s=i.lib,a=s.WordArray,o=s.Hasher,c=i.algo,l=[],u=[];(function(){function d(y){for(var v=n.sqrt(y),_=2;_<=v;_++)if(!(y%_))return!1;return!0}function g(y){return(y-(y|0))*4294967296|0}for(var p=2,m=0;m<64;)d(p)&&(m<8&&(l[m]=g(n.pow(p,1/2))),u[m]=g(n.pow(p,1/3)),m++),p++})();var f=[],h=c.SHA256=o.extend({_doReset:function(){this._hash=new a.init(l.slice(0))},_doProcessBlock:function(d,g){for(var p=this._hash.words,m=p[0],y=p[1],v=p[2],_=p[3],x=p[4],A=p[5],C=p[6],R=p[7],M=0;M<64;M++){if(M<16)f[M]=d[g+M]|0;else{var N=f[M-15],Y=(N<<25|N>>>7)^(N<<14|N>>>18)^N>>>3,H=f[M-2],E=(H<<15|H>>>17)^(H<<13|H>>>19)^H>>>10;f[M]=Y+f[M-7]+E+f[M-16]}var k=x&A^~x&C,w=m&y^m&v^y&v,T=(m<<30|m>>>2)^(m<<19|m>>>13)^(m<<10|m>>>22),L=(x<<26|x>>>6)^(x<<21|x>>>11)^(x<<7|x>>>25),I=R+L+k+u[M]+f[M],U=T+w;R=C,C=A,A=x,x=_+I|0,_=v,v=y,y=m,m=I+U|0}p[0]=p[0]+m|0,p[1]=p[1]+y|0,p[2]=p[2]+v|0,p[3]=p[3]+_|0,p[4]=p[4]+x|0,p[5]=p[5]+A|0,p[6]=p[6]+C|0,p[7]=p[7]+R|0},_doFinalize:function(){var d=this._data,g=d.words,p=this._nDataBytes*8,m=d.sigBytes*8;return g[m>>>5]|=128<<24-m%32,g[(m+64>>>9<<4)+14]=n.floor(p/4294967296),g[(m+64>>>9<<4)+15]=p,d.sigBytes=g.length*4,this._process(),this._hash},clone:function(){var d=o.clone.call(this);return d._hash=this._hash.clone(),d}});i.SHA256=o._createHelper(h),i.HmacSHA256=o._createHmacHelper(h)}(Math),r.SHA256})})(hbe);var ikt=hbe.exports;const skt=si(ikt),akt={type:"object",additionalProperties:{type:"array",items:{type:"string"}},required:[]};class dbe extends g0{constructor({client:e}){super({client:e,clef:"protocoles",schémaBdPrincipale:akt})}async établirProtocoles({protocoles:e,idDispositif:r}){r=r||await this.client.obtIdDispositif();const{bd:n,fOublier:i}=await this.obtBd(),s=(await n.allAsJSON())[r]||[];e?(e.some(a=>!s.includes(a))||s.some(a=>!e.includes(a)))&&await n.put(r,e):s.length&&await n.del(r),await i()}async suivreProtocoles({f:e,idCompte:r}){return await this.suivreBdPrincipale({idCompte:r,f:e})}}He([ot],dbe.prototype,"suivreProtocoles",null);function us(t){const e=new globalThis.AbortController;function r(){e.abort();for(const s of t)s?.removeEventListener!=null&&s.removeEventListener("abort",r)}for(const s of t){if(s?.aborted===!0){r();break}s?.addEventListener!=null&&s.addEventListener("abort",r)}function n(){for(const s of t)s?.removeEventListener!=null&&s.removeEventListener("abort",r)}const i=e.signal;return i.clear=n,i}let okt=class extends Error{type;code;constructor(e,r){super(e??"The operation was aborted"),this.type="aborted",this.name="AbortError",this.code=r??"ABORT_ERR"}};async function Pd(t,e,r,n){const i=new okt(n?.errorMessage,n?.errorCode);return r?.aborted===!0?Promise.reject(i):new Promise((s,a)=>{function o(){r?.removeEventListener("abort",u),t.removeEventListener(e,c),n?.errorEvent!=null&&t.removeEventListener(n.errorEvent,l)}const c=f=>{try{if(n?.filter?.(f)===!1)return}catch(h){o(),a(h);return}o(),s(f)},l=f=>{o(),a(f.detail)},u=()=>{o(),a(i)};r?.addEventListener("abort",u),t.addEventListener(e,c),n?.errorEvent!=null&&t.addEventListener(n.errorEvent,l)})}let rie=class extends Error{type;code;constructor(e,r,n){super(e??"The operation was aborted"),this.type="aborted",this.name=n??"AbortError",this.code=r??"ABORT_ERR"}};async function ma(t,e,r){if(e==null)return t;if(e.aborted)return Promise.reject(new rie(r?.errorMessage,r?.errorCode,r?.errorName));let n;const i=new rie(r?.errorMessage,r?.errorCode,r?.errorName);try{return await Promise.race([t,new Promise((s,a)=>{n=()=>{a(i)},e.addEventListener("abort",n)})])}finally{n!=null&&e.removeEventListener("abort",n)}}class ckt{deferred;signal;constructor(e){this.signal=e,this.deferred=fn(),this.onAbort=this.onAbort.bind(this),this.signal?.addEventListener("abort",this.onAbort)}onAbort(){this.deferred.reject(this.signal?.reason??new sA)}cleanup(){this.signal?.removeEventListener("abort",this.onAbort)}}function lkt(){return`${parseInt(String(Math.random()*1e9),10).toString()}${Date.now()}`}class ukt{id;fn;options;recipients;status;timeline;controller;constructor(e,r){this.id=lkt(),this.status="queued",this.fn=e,this.options=r,this.recipients=[],this.timeline={created:Date.now()},this.controller=new AbortController,Zt(1/0,this.controller.signal),this.onAbort=this.onAbort.bind(this)}abort(e){this.controller.abort(e)}onAbort(){this.recipients.reduce((r,n)=>r&&n.signal?.aborted===!0,!0)&&(this.controller.abort(new sA),this.cleanup())}async join(e={}){const r=new ckt(e.signal);return this.recipients.push(r),e.signal?.addEventListener("abort",this.onAbort),r.deferred.promise}async run(){this.status="running",this.timeline.started=Date.now();try{this.controller.signal.throwIfAborted();const e=await ma(this.fn({...this.options??{},signal:this.controller.signal}),this.controller.signal);this.recipients.forEach(r=>{r.deferred.resolve(e)}),this.status="complete"}catch(e){this.recipients.forEach(r=>{r.deferred.reject(e)}),this.status="errored"}finally{this.timeline.finished=Date.now(),this.cleanup()}}cleanup(){this.recipients.forEach(e=>{e.cleanup(),e.signal?.removeEventListener("abort",this.onAbort)})}}class Ev extends ea{concurrency;queue;pending;sort;constructor(e={}){super(),this.concurrency=e.concurrency??Number.POSITIVE_INFINITY,this.pending=0,e.metricName!=null&&e.metrics?.registerMetricGroup(e.metricName,{calculate:()=>({size:this.queue.length,running:this.pending,queued:this.queue.length-this.pending})}),this.sort=e.sort,this.queue=[]}tryToStartAnother(){if(this.size===0)return queueMicrotask(()=>{this.safeDispatchEvent("empty")}),this.running===0&&queueMicrotask(()=>{this.safeDispatchEvent("idle")}),!1;if(this.pending<this.concurrency){let e;for(const r of this.queue)if(r.status==="queued"){e=r;break}return e==null?!1:(this.safeDispatchEvent("active"),this.pending++,e.run().finally(()=>{for(let r=0;r<this.queue.length;r++)if(this.queue[r]===e){this.queue.splice(r,1);break}this.pending--,this.tryToStartAnother(),this.safeDispatchEvent("next")}),!0)}return!1}enqueue(e){this.queue.push(e),this.sort!=null&&this.queue.sort(this.sort)}async add(e,r){r?.signal?.throwIfAborted();const n=new ukt(e,r);return this.enqueue(n),this.safeDispatchEvent("add"),this.tryToStartAnother(),n.join(r).then(i=>(this.safeDispatchEvent("completed",{detail:i}),this.safeDispatchEvent("success",{detail:{job:n,result:i}}),i)).catch(i=>{if(n.status==="queued"){for(let s=0;s<this.queue.length;s++)if(this.queue[s]===n){this.queue.splice(s,1);break}}throw this.safeDispatchEvent("error",{detail:i}),this.safeDispatchEvent("failure",{detail:{job:n,error:i}}),i})}clear(){this.queue.splice(0,this.queue.length)}abort(){this.queue.forEach(e=>{e.abort(new sA)}),this.clear()}async onEmpty(e){this.size!==0&&await Pd(this,"empty",e?.signal)}async onSizeLessThan(e,r){this.size<e||await Pd(this,"next",r?.signal,{filter:()=>this.size<e})}async onIdle(e){this.pending===0&&this.size===0||await Pd(this,"idle",e?.signal)}get size(){return this.queue.length}get queued(){return this.queue.length-this.pending}get running(){return this.pending}async*toGenerator(e){e?.signal?.throwIfAborted();const r=qu({objectMode:!0}),n=c=>{c!=null?this.abort():this.clear(),r.end(c)},i=c=>{c.detail!=null&&r.push(c.detail)},s=c=>{n(c.detail)},a=()=>{n()},o=()=>{n(new ye("Queue aborted","ERR_QUEUE_ABORTED"))};this.addEventListener("completed",i),this.addEventListener("error",s),this.addEventListener("idle",a),e?.signal?.addEventListener("abort",o);try{yield*r}finally{this.removeEventListener("completed",i),this.removeEventListener("error",s),this.removeEventListener("idle",a),e?.signal?.removeEventListener("abort",o),n()}}}class Pb extends Ev{has(e){return this.find(e)!=null}find(e){return this.queue.find(r=>e.equals(r.options.peerId))}}function pbe(t){return t[Symbol.asyncIterator]!=null}const sT=t=>{const e=Ei(t),r=go(e);return Go(t,r),sT.bytes=e,r};sT.bytes=0;function fh(t,e){e=e??{};const r=e.lengthEncoder??sT;function*n(i){const s=r(i.byteLength);s instanceof Uint8Array?yield s:yield*s,i instanceof Uint8Array?yield i:yield*i}return pbe(t)?async function*(){for await(const i of t)yield*n(i)}():function*(){for(const i of t)yield*n(i)}()}fh.single=(t,e)=>{e=e??{};const r=e.lengthEncoder??sT;return new Pn(r(t.byteLength),t)};let fkt=class extends Error{name="InvalidMessageLengthError";code="ERR_INVALID_MSG_LENGTH"},hkt=class extends Error{name="InvalidDataLengthError";code="ERR_MSG_DATA_TOO_LONG"},dkt=class extends Error{name="InvalidDataLengthLengthError";code="ERR_MSG_LENGTH_TOO_LONG"},nie=class extends Error{name="UnexpectedEOFError";code="ERR_UNEXPECTED_EOF"};const pkt=8,gkt=1024*1024*4;var ag;(function(t){t[t.LENGTH=0]="LENGTH",t[t.DATA=1]="DATA"})(ag||(ag={}));const Jj=t=>{const e=u0(t);return Jj.bytes=Ei(e),e};Jj.bytes=0;function e0(t,e){const r=new Pn;let n=ag.LENGTH,i=-1;const s=e?.lengthDecoder??Jj,a=e?.maxLengthLength??pkt,o=e?.maxDataLength??gkt;function*c(){for(;r.byteLength>0;){if(n===ag.LENGTH)try{if(i=s(r),i<0)throw new fkt("Invalid message length");if(i>o)throw new hkt("Message length too long");const l=s.bytes;r.consume(l),e?.onLength!=null&&e.onLength(i),n=ag.DATA}catch(l){if(l instanceof RangeError){if(r.byteLength>a)throw new dkt("Message length length too long");break}throw l}if(n===ag.DATA){if(r.byteLength<i)break;const l=r.sublist(0,i);r.consume(i),e?.onData!=null&&e.onData(l),yield l,n=ag.LENGTH}}}return pbe(t)?async function*(){for await(const l of t)r.append(l),yield*c();if(r.byteLength>0)throw new nie("Unexpected end of input")}():function*(){for(const l of t)r.append(l),yield*c();if(r.byteLength>0)throw new nie("Unexpected end of input")}()}e0.fromReader=(t,e)=>{let r=1;const n=async function*(){for(;;)try{const{done:s,value:a}=await t.next(r);if(s===!0)return;a!=null&&(yield a)}catch(s){if(s.code==="ERR_UNDER_READ")return{done:!0,value:null};throw s}finally{r=1}}();return e0(n,{...e??{},onLength:s=>{r=s}})};function mkt(t){return t[Symbol.asyncIterator]!=null}function d9(t,e){return mkt(t)?async function*(){let r=0;if(!(e<1)){for await(const n of t)if(yield n,r++,r===e)return}}():function*(){let r=0;if(!(e<1)){for(const n of t)if(yield n,r++,r===e)return}}()}const Z5="/ipfs/bitswap/1.2.0",ykt=1024,vkt=1024,bkt=1024,wkt=5e3,_kt=10,xkt=50,Ekt=!1,Skt=3,gbe=1024*1024*4,Akt=gbe;var la;(function(t){t.WantBlock="WantBlock",t.WantHave="WantHave"})(la||(la={}));var yM;(function(t){t[t.WantBlock=0]="WantBlock",t[t.WantHave=1]="WantHave"})(yM||(yM={}));(function(t){t.codec=()=>Xo(yM)})(la||(la={}));var V4;(function(t){let e;t.codec=()=>(e==null&&(e=Xr((r,n,i={})=>{i.lengthDelimited!==!1&&n.fork(),r.cid!=null&&r.cid.byteLength>0&&(n.uint32(10),n.bytes(r.cid)),r.priority!=null&&r.priority!==0&&(n.uint32(16),n.int32(r.priority)),r.cancel!=null&&(n.uint32(24),n.bool(r.cancel)),r.wantType!=null&&(n.uint32(32),la.codec().encode(r.wantType,n)),r.sendDontHave!=null&&(n.uint32(40),n.bool(r.sendDontHave)),i.lengthDelimited!==!1&&n.ldelim()},(r,n,i={})=>{const s={cid:li(0),priority:0},a=n==null?r.len:r.pos+n;for(;r.pos<a;){const o=r.uint32();switch(o>>>3){case 1:{s.cid=r.bytes();break}case 2:{s.priority=r.int32();break}case 3:{s.cancel=r.bool();break}case 4:{s.wantType=la.codec().decode(r);break}case 5:{s.sendDontHave=r.bool();break}default:{r.skipType(o&7);break}}}return s})),e),t.encode=r=>Yr(r,t.codec()),t.decode=(r,n)=>Gr(r,t.codec(),n)})(V4||(V4={}));var p9;(function(t){let e;t.codec=()=>(e==null&&(e=Xr((r,n,i={})=>{if(i.lengthDelimited!==!1&&n.fork(),r.entries!=null)for(const s of r.entries)n.uint32(10),V4.codec().encode(s,n);r.full!=null&&(n.uint32(16),n.bool(r.full)),i.lengthDelimited!==!1&&n.ldelim()},(r,n,i={})=>{const s={entries:[]},a=n==null?r.len:r.pos+n;for(;r.pos<a;){const o=r.uint32();switch(o>>>3){case 1:{if(i.limits?.entries!=null&&s.entries.length===i.limits.entries)throw new am('decode error - map field "entries" had too many elements',"ERR_MAX_LENGTH");s.entries.push(V4.codec().decode(r,r.uint32(),{limits:i.limits?.entries$}));break}case 2:{s.full=r.bool();break}default:{r.skipType(o&7);break}}}return s})),e),t.encode=r=>Yr(r,t.codec()),t.decode=(r,n)=>Gr(r,t.codec(),n)})(p9||(p9={}));var j4;(function(t){let e;t.codec=()=>(e==null&&(e=Xr((r,n,i={})=>{i.lengthDelimited!==!1&&n.fork(),r.prefix!=null&&r.prefix.byteLength>0&&(n.uint32(10),n.bytes(r.prefix)),r.data!=null&&r.data.byteLength>0&&(n.uint32(18),n.bytes(r.data)),i.lengthDelimited!==!1&&n.ldelim()},(r,n,i={})=>{const s={prefix:li(0),data:li(0)},a=n==null?r.len:r.pos+n;for(;r.pos<a;){const o=r.uint32();switch(o>>>3){case 1:{s.prefix=r.bytes();break}case 2:{s.data=r.bytes();break}default:{r.skipType(o&7);break}}}return s})),e),t.encode=r=>Yr(r,t.codec()),t.decode=(r,n)=>Gr(r,t.codec(),n)})(j4||(j4={}));var rh;(function(t){t.HaveBlock="HaveBlock",t.DontHaveBlock="DontHaveBlock"})(rh||(rh={}));var g9;(function(t){t[t.HaveBlock=0]="HaveBlock",t[t.DontHaveBlock=1]="DontHaveBlock"})(g9||(g9={}));(function(t){t.codec=()=>Xo(g9)})(rh||(rh={}));var z4;(function(t){let e;t.codec=()=>(e==null&&(e=Xr((r,n,i={})=>{i.lengthDelimited!==!1&&n.fork(),r.cid!=null&&r.cid.byteLength>0&&(n.uint32(10),n.bytes(r.cid)),r.type!=null&&g9[r.type]!==0&&(n.uint32(16),rh.codec().encode(r.type,n)),i.lengthDelimited!==!1&&n.ldelim()},(r,n,i={})=>{const s={cid:li(0),type:rh.HaveBlock},a=n==null?r.len:r.pos+n;for(;r.pos<a;){const o=r.uint32();switch(o>>>3){case 1:{s.cid=r.bytes();break}case 2:{s.type=rh.codec().decode(r);break}default:{r.skipType(o&7);break}}}return s})),e),t.encode=r=>Yr(r,t.codec()),t.decode=(r,n)=>Gr(r,t.codec(),n)})(z4||(z4={}));var q4;(function(t){let e;t.codec=()=>(e==null&&(e=Xr((r,n,i={})=>{if(i.lengthDelimited!==!1&&n.fork(),r.wantlist!=null&&(n.uint32(10),p9.codec().encode(r.wantlist,n)),r.blocks!=null)for(const s of r.blocks)n.uint32(26),j4.codec().encode(s,n);if(r.blockPresences!=null)for(const s of r.blockPresences)n.uint32(34),z4.codec().encode(s,n);r.pendingBytes!=null&&r.pendingBytes!==0&&(n.uint32(40),n.int32(r.pendingBytes)),i.lengthDelimited!==!1&&n.ldelim()},(r,n,i={})=>{const s={blocks:[],blockPresences:[],pendingBytes:0},a=n==null?r.len:r.pos+n;for(;r.pos<a;){const o=r.uint32();switch(o>>>3){case 1:{s.wantlist=p9.codec().decode(r,r.uint32(),{limits:i.limits?.wantlist});break}case 3:{if(i.limits?.blocks!=null&&s.blocks.length===i.limits.blocks)throw new am('decode error - map field "blocks" had too many elements',"ERR_MAX_LENGTH");s.blocks.push(j4.codec().decode(r,r.uint32(),{limits:i.limits?.blocks$}));break}case 4:{if(i.limits?.blockPresences!=null&&s.blockPresences.length===i.limits.blockPresences)throw new am('decode error - map field "blockPresences" had too many elements',"ERR_MAX_LENGTH");s.blockPresences.push(z4.codec().decode(r,r.uint32(),{limits:i.limits?.blockPresences$}));break}case 5:{s.pendingBytes=r.int32();break}default:{r.skipType(o&7);break}}}return s})),e),t.encode=r=>Yr(r,t.codec()),t.decode=(r,n)=>Gr(r,t.codec(),n)})(q4||(q4={}));function Tkt(t,e){for(const[r,n]of e.wantlist.entries()){const i=t.wantlist.get(r);i!=null&&(i.priority>n.priority&&(n.priority=i.priority),n.cancel=n.cancel??i.cancel,n.wantType=n.wantType??i.wantType,n.sendDontHave=n.sendDontHave??i.sendDontHave),t.wantlist.set(r,n)}for(const[r,n]of e.blockPresences.entries())t.blockPresences.set(r,n);for(const[r,n]of e.blocks.entries())t.blocks.set(r,n);return e.full&&!t.full&&(t.full=!0),t}const kkt=4193648,Ckt=kkt+16;function*Ikt(t,e){const r=[...t.wantlist.values()],n=[...t.blockPresences.values()],i=[...t.blocks.values()];let s=0,a=0,o=0,c=!1;for(;;){const l={wantlist:{full:t.full??!1,entries:[]},blockPresences:[],blocks:[],pendingBytes:0};let u=q4.encode(l).byteLength,{added:f,hasMore:h,newSize:d}=MB(i,l.blocks,o,e,u,Rkt);o+=f,u=d;const g=h;({added:f,hasMore:h,newSize:d}=MB(n,l.blockPresences,a,e,u,Pkt)),a+=f,u=d;const p=h;if({added:f,hasMore:h,newSize:d}=MB(r,l.wantlist.entries,s,e,u,Bkt),s+=f,u=d,c=!g&&!p&&!h,c||(l.wantlist.full=!1),yield q4.encode(l),c)break}}function MB(t,e,r,n,i,s){let a=0,o=!1;for(let c=r;c<t.length;c++){const l=t[c],u=s(l);if(u>Ckt)throw new ye("Cannot send block as after encoding it is over the max message size","ERR_BLOCK_TOO_LARGE");const f=i+u;if(f>n){o=!0;break}e.push(l),a++,i=f}return{hasMore:o,added:a,newSize:i}}function Rkt(t){return Qj(3,j4.encode(t))}function Pkt(t){return Qj(4,z4.encode(t))}function Bkt(t){return Qj(1,V4.encode(t))}function Qj(t,e){const r=Ei(t),n=Ei(e.byteLength);return r+n+e.byteLength}let Dkt=class extends ea{log;libp2p;routing;protocols;running;maxInboundStreams;maxOutboundStreams;messageReceiveTimeout;registrarIds;metrics;sendQueue;runOnTransientConnections;maxOutgoingMessageSize;maxIncomingMessageSize;constructor(e,r={}){super(),this.log=e.logger.forComponent("helia:bitswap:network"),this.libp2p=e.libp2p,this.routing=e.routing,this.protocols=r.protocols??[Z5],this.registrarIds=[],this.running=!1,this._onStream=this._onStream.bind(this),this.maxInboundStreams=r.maxInboundStreams??vkt,this.maxOutboundStreams=r.maxOutboundStreams??bkt,this.messageReceiveTimeout=r.messageReceiveTimeout??wkt,this.runOnTransientConnections=r.runOnTransientConnections??Ekt,this.maxIncomingMessageSize=r.maxIncomingMessageSize??gbe,this.maxOutgoingMessageSize=r.maxOutgoingMessageSize??r.maxIncomingMessageSize??Akt,this.metrics={blocksSent:e.metrics?.registerCounter("helia_bitswap_sent_blocks_total"),dataSent:e.metrics?.registerCounter("helia_bitswap_sent_data_bytes_total")},this.sendQueue=new Pb({concurrency:r.messageSendConcurrency??xkt,metrics:e.metrics,metricName:"helia_bitswap_message_send_queue"}),this.sendQueue.addEventListener("error",n=>{this.log.error("error sending wantlist to peer",n.detail)})}async start(){if(this.running)return;this.running=!0,await this.libp2p.handle(this.protocols,this._onStream,{maxInboundStreams:this.maxInboundStreams,maxOutboundStreams:this.maxOutboundStreams,runOnTransientConnection:this.runOnTransientConnections});const e={onConnect:r=>{this.safeDispatchEvent("peer:connected",{detail:r})},onDisconnect:r=>{this.safeDispatchEvent("peer:disconnected",{detail:r})}};this.registrarIds=[];for(const r of this.protocols)this.registrarIds.push(await this.libp2p.register(r,e));this.libp2p.getConnections().forEach(r=>{this.safeDispatchEvent("peer:connected",{detail:r.remotePeer})})}async stop(){if(this.running=!1,await this.libp2p.unhandle(this.protocols),this.registrarIds!=null){for(const e of this.registrarIds)this.libp2p.unregister(e);this.registrarIds=[]}}_onStream(e){if(!this.running)return;const{stream:r,connection:n}=e;Promise.resolve().then(async()=>{this.log("incoming new bitswap %s stream from %p",r.protocol,n.remotePeer);const i=()=>{r.status==="open"?r.abort(new ye(`Incoming Bitswap stream timed out after ${this.messageReceiveTimeout}ms`,"ERR_TIMEOUT")):this.log("stream aborted with status %s",r.status)};let s=AbortSignal.timeout(this.messageReceiveTimeout);Zt(1/0,s),s.addEventListener("abort",i),await r.closeWrite(),await is(r,a=>e0(a,{maxDataLength:this.maxIncomingMessageSize}),async a=>{for await(const o of a)try{const c=q4.decode(o);this.log("incoming new bitswap %s message from %p on stream",r.protocol,n.remotePeer,r.id),this.safeDispatchEvent("bitswap:message",{detail:{peer:n.remotePeer,message:c}}),s.removeEventListener("abort",i),s=AbortSignal.timeout(this.messageReceiveTimeout),Zt(1/0,s),s.addEventListener("abort",i)}catch(c){this.log.error("error reading incoming bitswap message from %p on stream",n.remotePeer,r.id,c),r.abort(c);break}})}).catch(i=>{this.log.error("error handling incoming stream from %p",n.remotePeer,i),r.abort(i)})}async*findProviders(e,r){r?.onProgress?.(new Bt("bitswap:network:find-providers",e));for await(const n of this.routing.findProviders(e,r))await this.libp2p.isDialable(n.multiaddrs,{runOnTransientConnection:this.runOnTransientConnections})&&(yield n)}async findAndConnect(e,r){await $1(d0(d9(this.findProviders(e,r),r?.maxProviders??Skt),async n=>this.connectTo(n.id,r))).catch(n=>{this.log.error(n)})}async sendMessage(e,r,n){if(!this.running)throw new Error("network isn't running");const i=this.sendQueue.queue.find(s=>e.equals(s.options.peerId)&&s.status==="queued");if(i!=null){i.options.message=Tkt(i.options.message,r),await i.join({signal:n?.signal});return}await this.sendQueue.add(async s=>{const a=s?.message;if(a==null)throw new ye("No message to send","ERR_NO_MESSAGE");this.log("sendMessage to %p",e),s?.onProgress?.(new Bt("bitswap:network:send-wantlist",e));const o=await this.libp2p.dialProtocol(e,Z5,s);await o.closeRead();try{await is(Ikt(a,this.maxOutgoingMessageSize),c=>fh(c),o),await o.close(s)}catch(c){s?.onProgress?.(new Bt("bitswap:network:send-wantlist:error",{peer:e,error:c})),this.log.error("error sending message to %p",e,c),o.abort(c)}this._updateSentStats(a.blocks)},{peerId:e,signal:n?.signal,message:r})}async connectTo(e,r){if(!this.running)throw new ye("Network isn't running","ERR_NOT_STARTED");r?.onProgress?.(new Bt("bitswap:network:dial",e));const[n]=await Promise.all([this.libp2p.dial(e,r),Pd(this.libp2p,"peer:identify",r?.signal,{filter:i=>{if(!i.detail.peerId.equals(e))return!1;if(i.detail.protocols.includes(Z5))return!0;throw new ye(`${e} did not support ${Z5}`,"ERR_BITSWAP_UNSUPPORTED_BY_PEER")}})]);return n}_updateSentStats(e){let r=0;for(const n of e.values())r+=n.data.byteLength;this.metrics.dataSent?.increment(r),this.metrics.blocksSent?.increment(e.size)}};const mbe=Symbol.for("nodejs.util.inspect.custom"),Okt=Object.values(tm).map(t=>t.decoder).reduce((t,e)=>t.or(e),tm.identity.decoder),ybe=114,ez=36,tz=37;class rz{type;multihash;privateKey;publicKey;string;constructor(e){this.type=e.type,this.multihash=e.multihash,this.privateKey=e.privateKey,Object.defineProperty(this,"string",{enumerable:!1,writable:!0})}get[Symbol.toStringTag](){return`PeerId(${this.toString()})`}[nA]=!0;toString(){return this.string==null&&(this.string=Rs.encode(this.multihash.bytes).slice(1)),this.string}toCID(){return Dt.createV1(ybe,this.multihash)}toBytes(){return this.multihash.bytes}toJSON(){return this.toString()}equals(e){if(e==null)return!1;if(e instanceof Uint8Array)return Kr(this.multihash.bytes,e);if(typeof e=="string")return ti(e).equals(this);if(e?.multihash?.bytes!=null)return Kr(this.multihash.bytes,e.multihash.bytes);throw new Error("not valid Id")}[mbe](){return`PeerId(${this.toString()})`}}class p8 extends rz{type="RSA";publicKey;constructor(e){super({...e,type:"RSA"}),this.publicKey=e.publicKey}}class g8 extends rz{type="Ed25519";publicKey;constructor(e){super({...e,type:"Ed25519"}),this.publicKey=e.multihash.digest}}class m8 extends rz{type="secp256k1";publicKey;constructor(e){super({...e,type:"secp256k1"}),this.publicKey=e.multihash.digest}}const vM=2336;class Nkt{type="url";multihash;privateKey;publicKey;url;constructor(e){this.url=e.toString(),this.multihash=ah.digest(pt(this.url))}[mbe](){return`PeerId(${this.url})`}[nA]=!0;toString(){return this.toCID().toString()}toCID(){return Dt.createV1(vM,this.multihash)}toBytes(){return this.toCID().bytes}equals(e){return e==null?!1:(e instanceof Uint8Array&&(e=vt(e)),e.toString()===this.toString())}}function Mkt(t){if(t.type==="RSA")return new p8(t);if(t.type==="Ed25519")return new g8(t);if(t.type==="secp256k1")return new m8(t);throw new ye("Not a PeerId","ERR_INVALID_PARAMETERS")}function ti(t,e){if(t.charAt(0)==="1"||t.charAt(0)==="Q"){const r=c0(Rs.decode(`z${t}`));return t.startsWith("12D")?new g8({multihash:r}):t.startsWith("16U")?new m8({multihash:r}):new p8({multihash:r})}return ul(Okt.decode(t))}function ul(t){try{const e=c0(t);if(e.code===ah.code){if(e.digest.length===ez)return new g8({multihash:e});if(e.digest.length===tz)return new m8({multihash:e})}if(e.code===wn.code)return new p8({multihash:e})}catch{return Lkt(Dt.decode(t))}throw new Error("Supplied PeerID CID is invalid")}function Lkt(t){if(t?.multihash==null||t.version==null||t.version===1&&t.code!==ybe&&t.code!==vM)throw new Error("Supplied PeerID CID is invalid");if(t.code===vM){const r=vt(t.multihash.digest);return new Nkt(new URL(r))}const e=t.multihash;if(e.code===wn.code)return new p8({multihash:t.multihash});if(e.code===ah.code){if(e.digest.length===ez)return new g8({multihash:t.multihash});if(e.digest.length===tz)return new m8({multihash:t.multihash})}throw new Error("Supplied PeerID CID is invalid")}async function Yu(t,e){return t.length===ez?new g8({multihash:Jg(ah.code,t),privateKey:e}):t.length===tz?new m8({multihash:Jg(ah.code,t),privateKey:e}):new p8({multihash:await wn.digest(t),publicKey:t,privateKey:e})}function m9(t,e){const r={[Symbol.iterator]:()=>r,next:()=>{const n=t.next(),i=n.value;return n.done===!0||i==null?{done:!0,value:void 0}:{done:!1,value:e(i)}}};return r}class y0{map;constructor(e){if(this.map=new Map,e!=null)for(const[r,n]of e.entries())this.map.set(r.toString(),n)}[Symbol.iterator](){return this.entries()}clear(){this.map.clear()}delete(e){return this.map.delete(e.toString())}entries(){return m9(this.map.entries(),e=>[ti(e[0]),e[1]])}forEach(e){this.map.forEach((r,n)=>{e(r,ti(n),this)})}get(e){return this.map.get(e.toString())}has(e){return this.map.has(e.toString())}set(e,r){this.map.set(e.toString(),r)}keys(){return m9(this.map.keys(),e=>ti(e))}values(){return this.map.values()}get size(){return this.map.size}}class $u{set;constructor(e){if(this.set=new Set,e!=null)for(const r of e)this.set.add(r.toString())}get size(){return this.set.size}[Symbol.iterator](){return this.values()}add(e){this.set.add(e.toString())}clear(){this.set.clear()}delete(e){this.set.delete(e.toString())}entries(){return m9(this.set.entries(),e=>{const r=ti(e[0]);return[r,r]})}forEach(e){this.set.forEach(r=>{const n=ti(r);e(n,n,this)})}has(e){return this.set.has(e.toString())}values(){return m9(this.set.values(),e=>ti(e))}intersection(e){const r=new $u;for(const n of e)this.has(n)&&r.add(n);return r}difference(e){const r=new $u;for(const n of this)e.has(n)||r.add(n);return r}union(e){const r=new $u;for(const n of e)r.add(n);for(const n of this)r.add(n);return r}}const Kl={get(t=globalThis){const e=t.crypto;if(e?.subtle==null)throw Object.assign(new Error("Missing Web Crypto API. The most likely cause of this error is that this page is being accessed from an insecure context (i.e. not HTTPS). For more information and possible resolutions see https://github.com/libp2p/js-libp2p/blob/main/packages/crypto/README.md#web-crypto-api"),{code:"ERR_MISSING_WEB_CRYPTO"});return e}};function mp(t){return t==null?!1:typeof t.then=="function"&&typeof t.catch=="function"&&typeof t.finally=="function"}const H4=32,u1=64,y9=32;function Fkt(){const t=ch.utils.randomPrivateKey(),e=ch.getPublicKey(t);return{privateKey:vbe(t,e),publicKey:e}}function $kt(t){if(t.length!==y9)throw new TypeError('"seed" must be 32 bytes in length.');if(!(t instanceof Uint8Array))throw new TypeError('"seed" must be a node.js Buffer, or Uint8Array.');const e=t,r=ch.getPublicKey(e);return{privateKey:vbe(e,r),publicKey:r}}function Ukt(t,e){const r=t.subarray(0,y9);return ch.sign(e instanceof Uint8Array?e:e.subarray(),r)}function Vkt(t,e,r){return ch.verify(e,r instanceof Uint8Array?r:r.subarray(),t)}function vbe(t,e){const r=new Uint8Array(u1);for(let n=0;n<y9;n++)r[n]=t[n],r[y9+n]=e[n];return r}const LB={alg:"A128GCM",ext:!0,k:"scm9jmO_4BJAgdwWGVulLg",key_ops:["encrypt","decrypt"],kty:"oct"};function bbe(t){const e="AES-GCM";let r=16;const n=12,i="SHA-256",s=16,a=32767,o=Kl.get();r*=8;async function c(f,h){const d=o.getRandomValues(new Uint8Array(s)),g=o.getRandomValues(new Uint8Array(n)),p={name:e,iv:g};typeof h=="string"&&(h=pt(h));let m;if(h.length===0){m=await o.subtle.importKey("jwk",LB,{name:"AES-GCM"},!0,["encrypt"]);try{const v={name:"PBKDF2",salt:d,iterations:a,hash:{name:i}},_=await o.subtle.importKey("raw",h,{name:"PBKDF2"},!1,["deriveKey"]);m=await o.subtle.deriveKey(v,_,{name:e,length:r},!0,["encrypt"])}catch{m=await o.subtle.importKey("jwk",LB,{name:"AES-GCM"},!0,["encrypt"])}}else{const v={name:"PBKDF2",salt:d,iterations:a,hash:{name:i}},_=await o.subtle.importKey("raw",h,{name:"PBKDF2"},!1,["deriveKey"]);m=await o.subtle.deriveKey(v,_,{name:e,length:r},!0,["encrypt"])}const y=await o.subtle.encrypt(p,m,f);return Yi([d,p.iv,new Uint8Array(y)])}async function l(f,h){const d=f.subarray(0,s),g=f.subarray(s,s+n),p=f.subarray(s+n),m={name:e,iv:g};typeof h=="string"&&(h=pt(h));let y;if(h.length===0)try{const _={name:"PBKDF2",salt:d,iterations:a,hash:{name:i}},x=await o.subtle.importKey("raw",h,{name:"PBKDF2"},!1,["deriveKey"]);y=await o.subtle.deriveKey(_,x,{name:e,length:r},!0,["decrypt"])}catch{y=await o.subtle.importKey("jwk",LB,{name:"AES-GCM"},!0,["decrypt"])}else{const _={name:"PBKDF2",salt:d,iterations:a,hash:{name:i}},x=await o.subtle.importKey("raw",h,{name:"PBKDF2"},!1,["deriveKey"]);y=await o.subtle.deriveKey(_,x,{name:e,length:r},!0,["decrypt"])}const v=await o.subtle.decrypt(m,y,p);return new Uint8Array(v)}return{encrypt:c,decrypt:l}}async function nz(t,e){const n=await bbe().encrypt(t,e);return Sc.encode(n)}const iz=new Float32Array([-0]),w1=new Uint8Array(iz.buffer);function jkt(t,e,r){iz[0]=t,e[r]=w1[0],e[r+1]=w1[1],e[r+2]=w1[2],e[r+3]=w1[3]}function zkt(t,e){return w1[0]=t[e],w1[1]=t[e+1],w1[2]=t[e+2],w1[3]=t[e+3],iz[0]}const sz=new Float64Array([-0]),ro=new Uint8Array(sz.buffer);function qkt(t,e,r){sz[0]=t,e[r]=ro[0],e[r+1]=ro[1],e[r+2]=ro[2],e[r+3]=ro[3],e[r+4]=ro[4],e[r+5]=ro[5],e[r+6]=ro[6],e[r+7]=ro[7]}function Hkt(t,e){return ro[0]=t[e],ro[1]=t[e+1],ro[2]=t[e+2],ro[3]=t[e+3],ro[4]=t[e+4],ro[5]=t[e+5],ro[6]=t[e+6],ro[7]=t[e+7],sz[0]}const Wkt=BigInt(Number.MAX_SAFE_INTEGER),Kkt=BigInt(Number.MIN_SAFE_INTEGER);class ao{lo;hi;constructor(e,r){this.lo=e|0,this.hi=r|0}toNumber(e=!1){if(!e&&this.hi>>>31>0){const r=~this.lo+1>>>0;let n=~this.hi>>>0;return r===0&&(n=n+1>>>0),-(r+n*4294967296)}return this.lo+this.hi*4294967296}toBigInt(e=!1){if(e)return BigInt(this.lo>>>0)+(BigInt(this.hi>>>0)<<32n);if(this.hi>>>31){const r=~this.lo+1>>>0;let n=~this.hi>>>0;return r===0&&(n=n+1>>>0),-(BigInt(r)+(BigInt(n)<<32n))}return BigInt(this.lo>>>0)+(BigInt(this.hi>>>0)<<32n)}toString(e=!1){return this.toBigInt(e).toString()}zzEncode(){const e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this}zzDecode(){const e=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this}length(){const e=this.lo,r=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return n===0?r===0?e<16384?e<128?1:2:e<2097152?3:4:r<16384?r<128?5:6:r<2097152?7:8:n<128?9:10}static fromBigInt(e){if(e===0n)return Fg;if(e<Wkt&&e>Kkt)return this.fromNumber(Number(e));const r=e<0n;r&&(e=-e);let n=e>>32n,i=e-(n<<32n);return r&&(n=~n|0n,i=~i|0n,++i>iie&&(i=0n,++n>iie&&(n=0n))),new ao(Number(i),Number(n))}static fromNumber(e){if(e===0)return Fg;const r=e<0;r&&(e=-e);let n=e>>>0,i=(e-n)/4294967296>>>0;return r&&(i=~i>>>0,n=~n>>>0,++n>4294967295&&(n=0,++i>4294967295&&(i=0))),new ao(n,i)}static from(e){return typeof e=="number"?ao.fromNumber(e):typeof e=="bigint"?ao.fromBigInt(e):typeof e=="string"?ao.fromBigInt(BigInt(e)):e.low!=null||e.high!=null?new ao(e.low>>>0,e.high>>>0):Fg}}const Fg=new ao(0,0);Fg.toBigInt=function(){return 0n};Fg.zzEncode=Fg.zzDecode=function(){return this};Fg.length=function(){return 1};const iie=4294967296n;function Gkt(t){let e=0,r=0;for(let n=0;n<t.length;++n)r=t.charCodeAt(n),r<128?e+=1:r<2048?e+=2:(r&64512)===55296&&(t.charCodeAt(n+1)&64512)===56320?(++n,e+=4):e+=3;return e}function Ykt(t,e,r){if(r-e<1)return"";let i;const s=[];let a=0,o;for(;e<r;)o=t[e++],o<128?s[a++]=o:o>191&&o<224?s[a++]=(o&31)<<6|t[e++]&63:o>239&&o<365?(o=((o&7)<<18|(t[e++]&63)<<12|(t[e++]&63)<<6|t[e++]&63)-65536,s[a++]=55296+(o>>10),s[a++]=56320+(o&1023)):s[a++]=(o&15)<<12|(t[e++]&63)<<6|t[e++]&63,a>8191&&((i??(i=[])).push(String.fromCharCode.apply(String,s)),a=0);return i!=null?(a>0&&i.push(String.fromCharCode.apply(String,s.slice(0,a))),i.join("")):String.fromCharCode.apply(String,s.slice(0,a))}function wbe(t,e,r){const n=r;let i,s;for(let a=0;a<t.length;++a)i=t.charCodeAt(a),i<128?e[r++]=i:i<2048?(e[r++]=i>>6|192,e[r++]=i&63|128):(i&64512)===55296&&((s=t.charCodeAt(a+1))&64512)===56320?(i=65536+((i&1023)<<10)+(s&1023),++a,e[r++]=i>>18|240,e[r++]=i>>12&63|128,e[r++]=i>>6&63|128,e[r++]=i&63|128):(e[r++]=i>>12|224,e[r++]=i>>6&63|128,e[r++]=i&63|128);return r-n}function hu(t,e){return RangeError(`index out of range: ${t.pos} + ${e??1} > ${t.len}`)}function J5(t,e){return(t[e-4]|t[e-3]<<8|t[e-2]<<16|t[e-1]<<24)>>>0}class Xkt{buf;pos;len;_slice=Uint8Array.prototype.subarray;constructor(e){this.buf=e,this.pos=0,this.len=e.length}uint32(){let e=4294967295;if(e=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(e=(e|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return e;if((this.pos+=5)>this.len)throw this.pos=this.len,hu(this,10);return e}int32(){return this.uint32()|0}sint32(){const e=this.uint32();return e>>>1^-(e&1)|0}bool(){return this.uint32()!==0}fixed32(){if(this.pos+4>this.len)throw hu(this,4);return J5(this.buf,this.pos+=4)}sfixed32(){if(this.pos+4>this.len)throw hu(this,4);return J5(this.buf,this.pos+=4)|0}float(){if(this.pos+4>this.len)throw hu(this,4);const e=zkt(this.buf,this.pos);return this.pos+=4,e}double(){if(this.pos+8>this.len)throw hu(this,4);const e=Hkt(this.buf,this.pos);return this.pos+=8,e}bytes(){const e=this.uint32(),r=this.pos,n=this.pos+e;if(n>this.len)throw hu(this,e);return this.pos+=e,r===n?new Uint8Array(0):this.buf.subarray(r,n)}string(){const e=this.bytes();return Ykt(e,0,e.length)}skip(e){if(typeof e=="number"){if(this.pos+e>this.len)throw hu(this,e);this.pos+=e}else do if(this.pos>=this.len)throw hu(this);while(this.buf[this.pos++]&128);return this}skipType(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(e=this.uint32()&7)!==4;)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error(`invalid wire type ${e} at offset ${this.pos}`)}return this}readLongVarint(){const e=new ao(0,0);let r=0;if(this.len-this.pos>4){for(;r<4;++r)if(e.lo=(e.lo|(this.buf[this.pos]&127)<<r*7)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(this.buf[this.pos]&127)<<28)>>>0,e.hi=(e.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return e;r=0}else{for(;r<3;++r){if(this.pos>=this.len)throw hu(this);if(e.lo=(e.lo|(this.buf[this.pos]&127)<<r*7)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(this.buf[this.pos++]&127)<<r*7)>>>0,e}if(this.len-this.pos>4){for(;r<5;++r)if(e.hi=(e.hi|(this.buf[this.pos]&127)<<r*7+3)>>>0,this.buf[this.pos++]<128)return e}else for(;r<5;++r){if(this.pos>=this.len)throw hu(this);if(e.hi=(e.hi|(this.buf[this.pos]&127)<<r*7+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}readFixed64(){if(this.pos+8>this.len)throw hu(this,8);const e=J5(this.buf,this.pos+=4),r=J5(this.buf,this.pos+=4);return new ao(e,r)}int64(){return this.readLongVarint().toBigInt()}int64Number(){return this.readLongVarint().toNumber()}int64String(){return this.readLongVarint().toString()}uint64(){return this.readLongVarint().toBigInt(!0)}uint64Number(){const e=MU(this.buf,this.pos);return this.pos+=Ei(e),e}uint64String(){return this.readLongVarint().toString(!0)}sint64(){return this.readLongVarint().zzDecode().toBigInt()}sint64Number(){return this.readLongVarint().zzDecode().toNumber()}sint64String(){return this.readLongVarint().zzDecode().toString()}fixed64(){return this.readFixed64().toBigInt()}fixed64Number(){return this.readFixed64().toNumber()}fixed64String(){return this.readFixed64().toString()}sfixed64(){return this.readFixed64().toBigInt()}sfixed64Number(){return this.readFixed64().toNumber()}sfixed64String(){return this.readFixed64().toString()}}function Zkt(t){return new Xkt(t instanceof Uint8Array?t:t.subarray())}function yu(t,e,r){const n=Zkt(t);return e.decode(n,void 0,r)}function Jkt(t){let n,i=8192;return function(a){if(a<1||a>4096)return go(a);i+a>8192&&(n=go(8192),i=0);const o=n.subarray(i,i+=a);return i&7&&(i=(i|7)+1),o}}class Qw{fn;len;next;val;constructor(e,r,n){this.fn=e,this.len=r,this.next=void 0,this.val=n}}function FB(){}class Qkt{head;tail;len;next;constructor(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}}const eCt=Jkt();function tCt(t){return globalThis.Buffer!=null?go(t):eCt(t)}class bM{len;head;tail;states;constructor(){this.len=0,this.head=new Qw(FB,0,0),this.tail=this.head,this.states=null}_push(e,r,n){return this.tail=this.tail.next=new Qw(e,r,n),this.len+=r,this}uint32(e){return this.len+=(this.tail=this.tail.next=new nCt((e=e>>>0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this}int32(e){return e<0?this._push(Q5,10,ao.fromNumber(e)):this.uint32(e)}sint32(e){return this.uint32((e<<1^e>>31)>>>0)}uint64(e){const r=ao.fromBigInt(e);return this._push(Q5,r.length(),r)}uint64Number(e){return this._push(NU,Ei(e),e)}uint64String(e){return this.uint64(BigInt(e))}int64(e){return this.uint64(e)}int64Number(e){return this.uint64Number(e)}int64String(e){return this.uint64String(e)}sint64(e){const r=ao.fromBigInt(e).zzEncode();return this._push(Q5,r.length(),r)}sint64Number(e){const r=ao.fromNumber(e).zzEncode();return this._push(Q5,r.length(),r)}sint64String(e){return this.sint64(BigInt(e))}bool(e){return this._push($B,1,e?1:0)}fixed32(e){return this._push(Dw,4,e>>>0)}sfixed32(e){return this.fixed32(e)}fixed64(e){const r=ao.fromBigInt(e);return this._push(Dw,4,r.lo)._push(Dw,4,r.hi)}fixed64Number(e){const r=ao.fromNumber(e);return this._push(Dw,4,r.lo)._push(Dw,4,r.hi)}fixed64String(e){return this.fixed64(BigInt(e))}sfixed64(e){return this.fixed64(e)}sfixed64Number(e){return this.fixed64Number(e)}sfixed64String(e){return this.fixed64String(e)}float(e){return this._push(jkt,4,e)}double(e){return this._push(qkt,8,e)}bytes(e){const r=e.length>>>0;return r===0?this._push($B,1,0):this.uint32(r)._push(iCt,r,e)}string(e){const r=Gkt(e);return r!==0?this.uint32(r)._push(wbe,r,e):this._push($B,1,0)}fork(){return this.states=new Qkt(this),this.head=this.tail=new Qw(FB,0,0),this.len=0,this}reset(){return this.states!=null?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new Qw(FB,0,0),this.len=0),this}ldelim(){const e=this.head,r=this.tail,n=this.len;return this.reset().uint32(n),n!==0&&(this.tail.next=e.next,this.tail=r,this.len+=n),this}finish(){let e=this.head.next;const r=tCt(this.len);let n=0;for(;e!=null;)e.fn(e.val,r,n),n+=e.len,e=e.next;return r}}function $B(t,e,r){e[r]=t&255}function rCt(t,e,r){for(;t>127;)e[r++]=t&127|128,t>>>=7;e[r]=t}class nCt extends Qw{next;constructor(e,r){super(rCt,e,r),this.next=void 0}}function Q5(t,e,r){for(;t.hi!==0;)e[r++]=t.lo&127|128,t.lo=(t.lo>>>7|t.hi<<25)>>>0,t.hi>>>=7;for(;t.lo>127;)e[r++]=t.lo&127|128,t.lo=t.lo>>>7;e[r++]=t.lo}function Dw(t,e,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24}function iCt(t,e,r){e.set(t,r)}globalThis.Buffer!=null&&(bM.prototype.bytes=function(t){const e=t.length>>>0;return this.uint32(e),e>0&&this._push(sCt,e,t),this},bM.prototype.string=function(t){const e=globalThis.Buffer.byteLength(t);return this.uint32(e),e>0&&this._push(aCt,e,t),this});function sCt(t,e,r){e.set(t,r)}function aCt(t,e,r){t.length<40?wbe(t,e,r):e.utf8Write!=null?e.utf8Write(t,r):e.set(pt(t),r)}function oCt(){return new bM}function vu(t,e){const r=oCt();return e.encode(t,r,{lengthDelimited:!1}),r.finish()}var v9;(function(t){t[t.VARINT=0]="VARINT",t[t.BIT64=1]="BIT64",t[t.LENGTH_DELIMITED=2]="LENGTH_DELIMITED",t[t.START_GROUP=3]="START_GROUP",t[t.END_GROUP=4]="END_GROUP",t[t.BIT32=5]="BIT32"})(v9||(v9={}));function _be(t,e,r,n){return{name:t,type:e,encode:r,decode:n}}function cCt(t){function e(i){if(t[i.toString()]==null)throw new Error("Invalid enum value");return t[i]}const r=function(s,a){const o=e(s);a.int32(o)},n=function(s){const a=s.int32();return e(a)};return _be("enum",v9.VARINT,r,n)}function bu(t,e){return _be("message",v9.LENGTH_DELIMITED,t,e)}let Zh=class extends Error{code;constructor(e,r,n){super(e,n),this.code=r}};var Ns;(function(t){t.RSA="RSA",t.Ed25519="Ed25519",t.Secp256k1="Secp256k1"})(Ns||(Ns={}));var wM;(function(t){t[t.RSA=0]="RSA",t[t.Ed25519=1]="Ed25519",t[t.Secp256k1=2]="Secp256k1"})(wM||(wM={}));(function(t){t.codec=()=>cCt(wM)})(Ns||(Ns={}));var Sv;(function(t){let e;t.codec=()=>(e==null&&(e=bu((r,n,i={})=>{i.lengthDelimited!==!1&&n.fork(),r.Type!=null&&(n.uint32(8),Ns.codec().encode(r.Type,n)),r.Data!=null&&(n.uint32(18),n.bytes(r.Data)),i.lengthDelimited!==!1&&n.ldelim()},(r,n)=>{const i={},s=n==null?r.len:r.pos+n;for(;r.pos<s;){const a=r.uint32();switch(a>>>3){case 1:i.Type=Ns.codec().decode(r);break;case 2:i.Data=r.bytes();break;default:r.skipType(a&7);break}}return i})),e),t.encode=r=>vu(r,t.codec()),t.decode=r=>yu(r,t.codec())})(Sv||(Sv={}));var Av;(function(t){let e;t.codec=()=>(e==null&&(e=bu((r,n,i={})=>{i.lengthDelimited!==!1&&n.fork(),r.Type!=null&&(n.uint32(8),Ns.codec().encode(r.Type,n)),r.Data!=null&&(n.uint32(18),n.bytes(r.Data)),i.lengthDelimited!==!1&&n.ldelim()},(r,n)=>{const i={},s=n==null?r.len:r.pos+n;for(;r.pos<s;){const a=r.uint32();switch(a>>>3){case 1:i.Type=Ns.codec().decode(r);break;case 2:i.Data=r.bytes();break;default:r.skipType(a&7);break}}return i})),e),t.encode=r=>vu(r,t.codec()),t.decode=r=>yu(r,t.codec())})(Av||(Av={}));class az{_key;constructor(e){this._key=Tv(e,H4)}verify(e,r){return Vkt(this._key,r,e)}marshal(){return this._key}get bytes(){return Sv.encode({Type:Ns.Ed25519,Data:this.marshal()}).subarray()}equals(e){return Kr(this.bytes,e.bytes)}hash(){const e=wn.digest(this.bytes);return mp(e)?e.then(({bytes:r})=>r):e.bytes}}class W4{_key;_publicKey;constructor(e,r){this._key=Tv(e,u1),this._publicKey=Tv(r,H4)}sign(e){return Ukt(this._key,e)}get public(){return new az(this._publicKey)}marshal(){return this._key}get bytes(){return Av.encode({Type:Ns.Ed25519,Data:this.marshal()}).subarray()}equals(e){return Kr(this.bytes,e.bytes)}async hash(){const e=wn.digest(this.bytes);let r;return mp(e)?{bytes:r}=await e:r=e.bytes,r}async id(){const e=ah.digest(this.public.bytes);return Rs.encode(e.bytes).substring(1)}async export(e,r="libp2p-key"){if(r==="libp2p-key")return nz(this.bytes,e);throw new ye(`export format '${r}' is not supported`,"ERR_INVALID_EXPORT_FORMAT")}}function lCt(t){if(t.length>u1){t=Tv(t,u1+H4);const n=t.subarray(0,u1),i=t.subarray(u1,t.length);return new W4(n,i)}t=Tv(t,u1);const e=t.subarray(0,u1),r=t.subarray(H4);return new W4(e,r)}function uCt(t){return t=Tv(t,H4),new az(t)}async function fCt(){const{privateKey:t,publicKey:e}=Fkt();return new W4(t,e)}async function hCt(t){const{privateKey:e,publicKey:r}=$kt(t);return new W4(e,r)}function Tv(t,e){if(t=Uint8Array.from(t??[]),t.length!==e)throw new ye(`Key must be a Uint8Array of length ${e}, got ${t.length}`,"ERR_INVALID_KEY_TYPE");return t}const dCt=Object.freeze(Object.defineProperty({__proto__:null,Ed25519PrivateKey:W4,Ed25519PublicKey:az,generateKeyPair:fCt,generateKeyPairFromSeed:hCt,unmarshalEd25519PrivateKey:lCt,unmarshalEd25519PublicKey:uCt},Symbol.toStringTag,{value:"Module"}));async function pCt(t,e){const r=Sc.decode(t);return bbe().decrypt(r,e)}function Xu(t){if(isNaN(t)||t<=0)throw new ye("random bytes length must be a Number bigger than 0","ERR_INVALID_LENGTH");return z6(t)}function xbe(t,e,r,n){_A(t);const i=jft({dkLen:32,asyncTick:10},n),{c:s,dkLen:a,asyncTick:o}=i;if(Ey(s),Ey(a),Ey(o),s<1)throw new Error("PBKDF2: iterations (c) should be >= 1");const c=rm(e),l=rm(r),u=new Uint8Array(a),f=K6.create(t,c),h=f._cloneInto().update(l);return{c:s,dkLen:a,asyncTick:o,DK:u,PRF:f,PRFSalt:h}}function Ebe(t,e,r,n,i){return t.destroy(),e.destroy(),n&&n.destroy(),i.fill(0),r}function gCt(t,e,r,n){const{c:i,dkLen:s,DK:a,PRF:o,PRFSalt:c}=xbe(t,e,r,n);let l;const u=new Uint8Array(4),f=b3(u),h=new Uint8Array(o.outputLen);for(let d=1,g=0;g<s;d++,g+=o.outputLen){const p=a.subarray(g,g+o.outputLen);f.setInt32(0,d,!1),(l=c._cloneInto(l)).update(u).digestInto(h),p.set(h.subarray(0,p.length));for(let m=1;m<i;m++){o._cloneInto(l).update(h).digestInto(h);for(let y=0;y<p.length;y++)p[y]^=h[y]}}return Ebe(o,c,a,l,h)}async function Sbe(t,e,r,n){const{c:i,dkLen:s,asyncTick:a,DK:o,PRF:c,PRFSalt:l}=xbe(t,e,r,n);let u;const f=new Uint8Array(4),h=b3(f),d=new Uint8Array(c.outputLen);for(let g=1,p=0;p<s;g++,p+=c.outputLen){const m=o.subarray(p,p+c.outputLen);h.setInt32(0,g,!1),(u=l._cloneInto(u)).update(f).digestInto(d),m.set(d.subarray(0,m.length)),await Fft(i-1,a,()=>{c._cloneInto(u).update(d).digestInto(d);for(let y=0;y<m.length;y++)m[y]^=d[y]})}return Ebe(c,l,o,u,d)}/*!
 * MIT License
 * 
 * Copyright (c) 2017-2022 Peculiar Ventures, LLC
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 * 
 */const mCt="[object ArrayBuffer]";class Si{static isArrayBuffer(e){return Object.prototype.toString.call(e)===mCt}static toArrayBuffer(e){return this.isArrayBuffer(e)?e:e.byteLength===e.buffer.byteLength||e.byteOffset===0&&e.byteLength===e.buffer.byteLength?e.buffer:this.toUint8Array(e.buffer).slice(e.byteOffset,e.byteOffset+e.byteLength).buffer}static toUint8Array(e){return this.toView(e,Uint8Array)}static toView(e,r){if(e.constructor===r)return e;if(this.isArrayBuffer(e))return new r(e);if(this.isArrayBufferView(e))return new r(e.buffer,e.byteOffset,e.byteLength);throw new TypeError("The provided value is not of type '(ArrayBuffer or ArrayBufferView)'")}static isBufferSource(e){return this.isArrayBufferView(e)||this.isArrayBuffer(e)}static isArrayBufferView(e){return ArrayBuffer.isView(e)||e&&this.isArrayBuffer(e.buffer)}static isEqual(e,r){const n=Si.toUint8Array(e),i=Si.toUint8Array(r);if(n.length!==i.byteLength)return!1;for(let s=0;s<n.length;s++)if(n[s]!==i[s])return!1;return!0}static concat(...e){let r;Array.isArray(e[0])&&!(e[1]instanceof Function)||Array.isArray(e[0])&&e[1]instanceof Function?r=e[0]:e[e.length-1]instanceof Function?r=e.slice(0,e.length-1):r=e;let n=0;for(const a of r)n+=a.byteLength;const i=new Uint8Array(n);let s=0;for(const a of r){const o=this.toUint8Array(a);i.set(o,s),s+=o.length}return e[e.length-1]instanceof Function?this.toView(i,e[e.length-1]):i.buffer}}const UB="string",yCt=/^[0-9a-f]+$/i,vCt=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/,bCt=/^[a-zA-Z0-9-_]+$/;class sie{static fromString(e){const r=unescape(encodeURIComponent(e)),n=new Uint8Array(r.length);for(let i=0;i<r.length;i++)n[i]=r.charCodeAt(i);return n.buffer}static toString(e){const r=Si.toUint8Array(e);let n="";for(let s=0;s<r.length;s++)n+=String.fromCharCode(r[s]);return decodeURIComponent(escape(n))}}class bf{static toString(e,r=!1){const n=Si.toArrayBuffer(e),i=new DataView(n);let s="";for(let a=0;a<n.byteLength;a+=2){const o=i.getUint16(a,r);s+=String.fromCharCode(o)}return s}static fromString(e,r=!1){const n=new ArrayBuffer(e.length*2),i=new DataView(n);for(let s=0;s<e.length;s++)i.setUint16(s*2,e.charCodeAt(s),r);return n}}class ds{static isHex(e){return typeof e===UB&&yCt.test(e)}static isBase64(e){return typeof e===UB&&vCt.test(e)}static isBase64Url(e){return typeof e===UB&&bCt.test(e)}static ToString(e,r="utf8"){const n=Si.toUint8Array(e);switch(r.toLowerCase()){case"utf8":return this.ToUtf8String(n);case"binary":return this.ToBinary(n);case"hex":return this.ToHex(n);case"base64":return this.ToBase64(n);case"base64url":return this.ToBase64Url(n);case"utf16le":return bf.toString(n,!0);case"utf16":case"utf16be":return bf.toString(n);default:throw new Error(`Unknown type of encoding '${r}'`)}}static FromString(e,r="utf8"){if(!e)return new ArrayBuffer(0);switch(r.toLowerCase()){case"utf8":return this.FromUtf8String(e);case"binary":return this.FromBinary(e);case"hex":return this.FromHex(e);case"base64":return this.FromBase64(e);case"base64url":return this.FromBase64Url(e);case"utf16le":return bf.fromString(e,!0);case"utf16":case"utf16be":return bf.fromString(e);default:throw new Error(`Unknown type of encoding '${r}'`)}}static ToBase64(e){const r=Si.toUint8Array(e);if(typeof btoa<"u"){const n=this.ToString(r,"binary");return btoa(n)}else return We.from(r).toString("base64")}static FromBase64(e){const r=this.formatString(e);if(!r)return new ArrayBuffer(0);if(!ds.isBase64(r))throw new TypeError("Argument 'base64Text' is not Base64 encoded");return typeof atob<"u"?this.FromBinary(atob(r)):new Uint8Array(We.from(r,"base64")).buffer}static FromBase64Url(e){const r=this.formatString(e);if(!r)return new ArrayBuffer(0);if(!ds.isBase64Url(r))throw new TypeError("Argument 'base64url' is not Base64Url encoded");return this.FromBase64(this.Base64Padding(r.replace(/\-/g,"+").replace(/\_/g,"/")))}static ToBase64Url(e){return this.ToBase64(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"")}static FromUtf8String(e,r=ds.DEFAULT_UTF8_ENCODING){switch(r){case"ascii":return this.FromBinary(e);case"utf8":return sie.fromString(e);case"utf16":case"utf16be":return bf.fromString(e);case"utf16le":case"usc2":return bf.fromString(e,!0);default:throw new Error(`Unknown type of encoding '${r}'`)}}static ToUtf8String(e,r=ds.DEFAULT_UTF8_ENCODING){switch(r){case"ascii":return this.ToBinary(e);case"utf8":return sie.toString(e);case"utf16":case"utf16be":return bf.toString(e);case"utf16le":case"usc2":return bf.toString(e,!0);default:throw new Error(`Unknown type of encoding '${r}'`)}}static FromBinary(e){const r=e.length,n=new Uint8Array(r);for(let i=0;i<r;i++)n[i]=e.charCodeAt(i);return n.buffer}static ToBinary(e){const r=Si.toUint8Array(e);let n="";for(let i=0;i<r.length;i++)n+=String.fromCharCode(r[i]);return n}static ToHex(e){const r=Si.toUint8Array(e);let n="";const i=r.length;for(let s=0;s<i;s++){const a=r[s];a<16&&(n+="0"),n+=a.toString(16)}return n}static FromHex(e){let r=this.formatString(e);if(!r)return new ArrayBuffer(0);if(!ds.isHex(r))throw new TypeError("Argument 'hexString' is not HEX encoded");r.length%2&&(r=`0${r}`);const n=new Uint8Array(r.length/2);for(let i=0;i<r.length;i=i+2){const s=r.slice(i,i+2);n[i/2]=parseInt(s,16)}return n.buffer}static ToUtf16String(e,r=!1){return bf.toString(e,r)}static FromUtf16String(e,r=!1){return bf.fromString(e,r)}static Base64Padding(e){const r=4-e.length%4;if(r<4)for(let n=0;n<r;n++)e+="=";return e}static formatString(e){return e?.replace(/[\n\r\t ]/g,"")||""}}ds.DEFAULT_UTF8_ENCODING="utf8";/*!
 Copyright (c) Peculiar Ventures, LLC
*/function kv(t,e){let r=0;if(t.length===1)return t[0];for(let n=t.length-1;n>=0;n--)r+=t[t.length-1-n]*Math.pow(2,e*n);return r}function bm(t,e,r=-1){const n=r;let i=t,s=0,a=Math.pow(2,e);for(let o=1;o<8;o++){if(t<a){let c;if(n<0)c=new ArrayBuffer(o),s=o;else{if(n<o)return new ArrayBuffer(0);c=new ArrayBuffer(n),s=n}const l=new Uint8Array(c);for(let u=o-1;u>=0;u--){const f=Math.pow(2,u*e);l[s-u-1]=Math.floor(i/f),i-=l[s-u-1]*f}return c}a*=Math.pow(2,e)}return new ArrayBuffer(0)}function _M(...t){let e=0,r=0;for(const s of t)e+=s.length;const n=new ArrayBuffer(e),i=new Uint8Array(n);for(const s of t)i.set(s,r),r+=s.length;return i}function Abe(){const t=new Uint8Array(this.valueHex);if(this.valueHex.byteLength>=2){const o=t[0]===255&&t[1]&128,c=t[0]===0&&(t[1]&128)===0;(o||c)&&this.warnings.push("Needlessly long format")}const e=new ArrayBuffer(this.valueHex.byteLength),r=new Uint8Array(e);for(let o=0;o<this.valueHex.byteLength;o++)r[o]=0;r[0]=t[0]&128;const n=kv(r,8),i=new ArrayBuffer(this.valueHex.byteLength),s=new Uint8Array(i);for(let o=0;o<this.valueHex.byteLength;o++)s[o]=t[o];return s[0]&=127,kv(s,8)-n}function wCt(t){const e=t<0?t*-1:t;let r=128;for(let n=1;n<8;n++){if(e<=r){if(t<0){const a=r-e,o=bm(a,8,n),c=new Uint8Array(o);return c[0]|=128,o}let i=bm(e,8,n),s=new Uint8Array(i);if(s[0]&128){const a=i.slice(0),o=new Uint8Array(a);i=new ArrayBuffer(i.byteLength+1),s=new Uint8Array(i);for(let c=0;c<a.byteLength;c++)s[c+1]=o[c];s[0]=0}return i}r*=Math.pow(2,8)}return new ArrayBuffer(0)}function _Ct(t,e){if(t.byteLength!==e.byteLength)return!1;const r=new Uint8Array(t),n=new Uint8Array(e);for(let i=0;i<r.length;i++)if(r[i]!==n[i])return!1;return!0}function Kc(t,e){const r=t.toString(10);if(e<r.length)return"";const n=e-r.length,i=new Array(n);for(let a=0;a<n;a++)i[a]="0";return i.join("").concat(r)}/*!
 * Copyright (c) 2014, GMO GlobalSign
 * Copyright (c) 2015-2022, Peculiar Ventures
 * All rights reserved.
 * 
 * Author 2014-2019, Yury Strozhevsky
 * 
 * Redistribution and use in source and binary forms, with or without modification,
 * are permitted provided that the following conditions are met:
 * 
 * * Redistributions of source code must retain the above copyright notice, this
 *   list of conditions and the following disclaimer.
 * 
 * * Redistributions in binary form must reproduce the above copyright notice, this
 *   list of conditions and the following disclaimer in the documentation and/or
 *   other materials provided with the distribution.
 * 
 * * Neither the name of the copyright holder nor the names of its
 *   contributors may be used to endorse or promote products derived from
 *   this software without specific prior written permission.
 * 
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR
 * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON
 * ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 * 
 */function b9(){if(typeof BigInt>"u")throw new Error("BigInt is not defined. Your environment doesn't implement BigInt.")}function oz(t){let e=0,r=0;for(let i=0;i<t.length;i++){const s=t[i];e+=s.byteLength}const n=new Uint8Array(e);for(let i=0;i<t.length;i++){const s=t[i];n.set(new Uint8Array(s),r),r+=s.byteLength}return n.buffer}function v0(t,e,r,n){return e instanceof Uint8Array?e.byteLength?r<0?(t.error="Wrong parameter: inputOffset less than zero",!1):n<0?(t.error="Wrong parameter: inputLength less than zero",!1):e.byteLength-r-n<0?(t.error="End of input reached before message was fully decoded (inconsistent offset and length values)",!1):!0:(t.error="Wrong parameter: inputBuffer has zero length",!1):(t.error="Wrong parameter: inputBuffer must be 'Uint8Array'",!1)}class cz{constructor(){this.items=[]}write(e){this.items.push(e)}final(){return oz(this.items)}}const Ow=[new Uint8Array([1])],aie="0123456789",Bb="",cf=new ArrayBuffer(0),lz=new Uint8Array(0),K4="EndOfContent",Tbe="OCTET STRING",kbe="BIT STRING";function b0(t){var e;return e=class extends t{constructor(...n){var i;super(...n);const s=n[0]||{};this.isHexOnly=(i=s.isHexOnly)!==null&&i!==void 0?i:!1,this.valueHexView=s.valueHex?Si.toUint8Array(s.valueHex):lz}get valueHex(){return this.valueHexView.slice().buffer}set valueHex(n){this.valueHexView=new Uint8Array(n)}fromBER(n,i,s){const a=n instanceof ArrayBuffer?new Uint8Array(n):n;if(!v0(this,a,i,s))return-1;const o=i+s;return this.valueHexView=a.subarray(i,o),this.valueHexView.length?(this.blockLength=s,o):(this.warnings.push("Zero buffer length"),i)}toBER(n=!1){return this.isHexOnly?n?new ArrayBuffer(this.valueHexView.byteLength):this.valueHexView.byteLength===this.valueHexView.buffer.byteLength?this.valueHexView.buffer:this.valueHexView.slice().buffer:(this.error="Flag 'isHexOnly' is not set, abort",cf)}toJSON(){return{...super.toJSON(),isHexOnly:this.isHexOnly,valueHex:ds.ToHex(this.valueHexView)}}},e.NAME="hexBlock",e}class t2{constructor({blockLength:e=0,error:r=Bb,warnings:n=[],valueBeforeDecode:i=lz}={}){this.blockLength=e,this.error=r,this.warnings=n,this.valueBeforeDecodeView=Si.toUint8Array(i)}static blockName(){return this.NAME}get valueBeforeDecode(){return this.valueBeforeDecodeView.slice().buffer}set valueBeforeDecode(e){this.valueBeforeDecodeView=new Uint8Array(e)}toJSON(){return{blockName:this.constructor.NAME,blockLength:this.blockLength,error:this.error,warnings:this.warnings,valueBeforeDecode:ds.ToHex(this.valueBeforeDecodeView)}}}t2.NAME="baseBlock";class Dc extends t2{fromBER(e,r,n){throw TypeError("User need to make a specific function in a class which extends 'ValueBlock'")}toBER(e,r){throw TypeError("User need to make a specific function in a class which extends 'ValueBlock'")}}Dc.NAME="valueBlock";class Cbe extends b0(t2){constructor({idBlock:e={}}={}){var r,n,i,s;super(),e?(this.isHexOnly=(r=e.isHexOnly)!==null&&r!==void 0?r:!1,this.valueHexView=e.valueHex?Si.toUint8Array(e.valueHex):lz,this.tagClass=(n=e.tagClass)!==null&&n!==void 0?n:-1,this.tagNumber=(i=e.tagNumber)!==null&&i!==void 0?i:-1,this.isConstructed=(s=e.isConstructed)!==null&&s!==void 0?s:!1):(this.tagClass=-1,this.tagNumber=-1,this.isConstructed=!1)}toBER(e=!1){let r=0;switch(this.tagClass){case 1:r|=0;break;case 2:r|=64;break;case 3:r|=128;break;case 4:r|=192;break;default:return this.error="Unknown tag class",cf}if(this.isConstructed&&(r|=32),this.tagNumber<31&&!this.isHexOnly){const i=new Uint8Array(1);if(!e){let s=this.tagNumber;s&=31,r|=s,i[0]=r}return i.buffer}if(!this.isHexOnly){const i=bm(this.tagNumber,7),s=new Uint8Array(i),a=i.byteLength,o=new Uint8Array(a+1);if(o[0]=r|31,!e){for(let c=0;c<a-1;c++)o[c+1]=s[c]|128;o[a]=s[a-1]}return o.buffer}const n=new Uint8Array(this.valueHexView.byteLength+1);if(n[0]=r|31,!e){const i=this.valueHexView;for(let s=0;s<i.length-1;s++)n[s+1]=i[s]|128;n[this.valueHexView.byteLength]=i[i.length-1]}return n.buffer}fromBER(e,r,n){const i=Si.toUint8Array(e);if(!v0(this,i,r,n))return-1;const s=i.subarray(r,r+n);if(s.length===0)return this.error="Zero buffer length",-1;switch(s[0]&192){case 0:this.tagClass=1;break;case 64:this.tagClass=2;break;case 128:this.tagClass=3;break;case 192:this.tagClass=4;break;default:return this.error="Unknown tag class",-1}this.isConstructed=(s[0]&32)===32,this.isHexOnly=!1;const o=s[0]&31;if(o!==31)this.tagNumber=o,this.blockLength=1;else{let c=1,l=this.valueHexView=new Uint8Array(255),u=255;for(;s[c]&128;){if(l[c-1]=s[c]&127,c++,c>=s.length)return this.error="End of input reached before message was fully decoded",-1;if(c===u){u+=255;const h=new Uint8Array(u);for(let d=0;d<l.length;d++)h[d]=l[d];l=this.valueHexView=new Uint8Array(u)}}this.blockLength=c+1,l[c-1]=s[c]&127;const f=new Uint8Array(c);for(let h=0;h<c;h++)f[h]=l[h];l=this.valueHexView=new Uint8Array(c),l.set(f),this.blockLength<=9?this.tagNumber=kv(l,7):(this.isHexOnly=!0,this.warnings.push("Tag too long, represented as hex-coded"))}if(this.tagClass===1&&this.isConstructed)switch(this.tagNumber){case 1:case 2:case 5:case 6:case 9:case 13:case 14:case 23:case 24:case 31:case 32:case 33:case 34:return this.error="Constructed encoding used for primitive type",-1}return r+this.blockLength}toJSON(){return{...super.toJSON(),tagClass:this.tagClass,tagNumber:this.tagNumber,isConstructed:this.isConstructed}}}Cbe.NAME="identificationBlock";class Ibe extends t2{constructor({lenBlock:e={}}={}){var r,n,i;super(),this.isIndefiniteForm=(r=e.isIndefiniteForm)!==null&&r!==void 0?r:!1,this.longFormUsed=(n=e.longFormUsed)!==null&&n!==void 0?n:!1,this.length=(i=e.length)!==null&&i!==void 0?i:0}fromBER(e,r,n){const i=Si.toUint8Array(e);if(!v0(this,i,r,n))return-1;const s=i.subarray(r,r+n);if(s.length===0)return this.error="Zero buffer length",-1;if(s[0]===255)return this.error="Length block 0xFF is reserved by standard",-1;if(this.isIndefiniteForm=s[0]===128,this.isIndefiniteForm)return this.blockLength=1,r+this.blockLength;if(this.longFormUsed=!!(s[0]&128),this.longFormUsed===!1)return this.length=s[0],this.blockLength=1,r+this.blockLength;const a=s[0]&127;if(a>8)return this.error="Too big integer",-1;if(a+1>s.length)return this.error="End of input reached before message was fully decoded",-1;const o=r+1,c=i.subarray(o,o+a);return c[a-1]===0&&this.warnings.push("Needlessly long encoded length"),this.length=kv(c,8),this.longFormUsed&&this.length<=127&&this.warnings.push("Unnecessary usage of long length form"),this.blockLength=a+1,r+this.blockLength}toBER(e=!1){let r,n;if(this.length>127&&(this.longFormUsed=!0),this.isIndefiniteForm)return r=new ArrayBuffer(1),e===!1&&(n=new Uint8Array(r),n[0]=128),r;if(this.longFormUsed){const i=bm(this.length,8);if(i.byteLength>127)return this.error="Too big length",cf;if(r=new ArrayBuffer(i.byteLength+1),e)return r;const s=new Uint8Array(i);n=new Uint8Array(r),n[0]=i.byteLength|128;for(let a=0;a<i.byteLength;a++)n[a+1]=s[a];return r}return r=new ArrayBuffer(1),e===!1&&(n=new Uint8Array(r),n[0]=this.length),r}toJSON(){return{...super.toJSON(),isIndefiniteForm:this.isIndefiniteForm,longFormUsed:this.longFormUsed,length:this.length}}}Ibe.NAME="lengthBlock";const Nt={};class Zo extends t2{constructor({name:e=Bb,optional:r=!1,primitiveSchema:n,...i}={},s){super(i),this.name=e,this.optional=r,n&&(this.primitiveSchema=n),this.idBlock=new Cbe(i),this.lenBlock=new Ibe(i),this.valueBlock=s?new s(i):new Dc(i)}fromBER(e,r,n){const i=this.valueBlock.fromBER(e,r,this.lenBlock.isIndefiniteForm?n:this.lenBlock.length);return i===-1?(this.error=this.valueBlock.error,i):(this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.valueBlock.error.length||(this.blockLength+=this.valueBlock.blockLength),i)}toBER(e,r){const n=r||new cz;r||Rbe(this);const i=this.idBlock.toBER(e);if(n.write(i),this.lenBlock.isIndefiniteForm)n.write(new Uint8Array([128]).buffer),this.valueBlock.toBER(e,n),n.write(new ArrayBuffer(2));else{const s=this.valueBlock.toBER(e);this.lenBlock.length=s.byteLength;const a=this.lenBlock.toBER(e);n.write(a),n.write(s)}return r?cf:n.final()}toJSON(){const e={...super.toJSON(),idBlock:this.idBlock.toJSON(),lenBlock:this.lenBlock.toJSON(),valueBlock:this.valueBlock.toJSON(),name:this.name,optional:this.optional};return this.primitiveSchema&&(e.primitiveSchema=this.primitiveSchema.toJSON()),e}toString(e="ascii"){return e==="ascii"?this.onAsciiEncoding():ds.ToHex(this.toBER())}onAsciiEncoding(){return`${this.constructor.NAME} : ${ds.ToHex(this.valueBlock.valueBeforeDecodeView)}`}isEqual(e){if(this===e)return!0;if(!(e instanceof this.constructor))return!1;const r=this.toBER(),n=e.toBER();return _Ct(r,n)}}Zo.NAME="BaseBlock";function Rbe(t){if(t instanceof Nt.Constructed)for(const e of t.valueBlock.value)Rbe(e)&&(t.lenBlock.isIndefiniteForm=!0);return!!t.lenBlock.isIndefiniteForm}class Pbe extends Zo{constructor({value:e=Bb,...r}={},n){super(r,n),e&&this.fromString(e)}getValue(){return this.valueBlock.value}setValue(e){this.valueBlock.value=e}fromBER(e,r,n){const i=this.valueBlock.fromBER(e,r,this.lenBlock.isIndefiniteForm?n:this.lenBlock.length);return i===-1?(this.error=this.valueBlock.error,i):(this.fromBuffer(this.valueBlock.valueHexView),this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.valueBlock.error.length||(this.blockLength+=this.valueBlock.blockLength),i)}onAsciiEncoding(){return`${this.constructor.NAME} : '${this.valueBlock.value}'`}}Pbe.NAME="BaseStringBlock";class Bbe extends b0(Dc){constructor({isHexOnly:e=!0,...r}={}){super(r),this.isHexOnly=e}}Bbe.NAME="PrimitiveValueBlock";var Dbe;class Obe extends Zo{constructor(e={}){super(e,Bbe),this.idBlock.isConstructed=!1}}Dbe=Obe;Nt.Primitive=Dbe;Obe.NAME="PRIMITIVE";function xCt(t,e){if(t instanceof e)return t;const r=new e;return r.idBlock=t.idBlock,r.lenBlock=t.lenBlock,r.warnings=t.warnings,r.valueBeforeDecodeView=t.valueBeforeDecodeView,r}function aT(t,e=0,r=t.length){const n=e;let i=new Zo({},Dc);const s=new t2;if(!v0(s,t,e,r))return i.error=s.error,{offset:-1,result:i};if(!t.subarray(e,e+r).length)return i.error="Zero buffer length",{offset:-1,result:i};let o=i.idBlock.fromBER(t,e,r);if(i.idBlock.warnings.length&&i.warnings.concat(i.idBlock.warnings),o===-1)return i.error=i.idBlock.error,{offset:-1,result:i};if(e=o,r-=i.idBlock.blockLength,o=i.lenBlock.fromBER(t,e,r),i.lenBlock.warnings.length&&i.warnings.concat(i.lenBlock.warnings),o===-1)return i.error=i.lenBlock.error,{offset:-1,result:i};if(e=o,r-=i.lenBlock.blockLength,!i.idBlock.isConstructed&&i.lenBlock.isIndefiniteForm)return i.error="Indefinite length form used for primitive encoding form",{offset:-1,result:i};let c=Zo;switch(i.idBlock.tagClass){case 1:if(i.idBlock.tagNumber>=37&&i.idBlock.isHexOnly===!1)return i.error="UNIVERSAL 37 and upper tags are reserved by ASN.1 standard",{offset:-1,result:i};switch(i.idBlock.tagNumber){case 0:if(i.idBlock.isConstructed&&i.lenBlock.length>0)return i.error="Type [UNIVERSAL 0] is reserved",{offset:-1,result:i};c=Nt.EndOfContent;break;case 1:c=Nt.Boolean;break;case 2:c=Nt.Integer;break;case 3:c=Nt.BitString;break;case 4:c=Nt.OctetString;break;case 5:c=Nt.Null;break;case 6:c=Nt.ObjectIdentifier;break;case 10:c=Nt.Enumerated;break;case 12:c=Nt.Utf8String;break;case 13:c=Nt.RelativeObjectIdentifier;break;case 14:c=Nt.TIME;break;case 15:return i.error="[UNIVERSAL 15] is reserved by ASN.1 standard",{offset:-1,result:i};case 16:c=Nt.Sequence;break;case 17:c=Nt.Set;break;case 18:c=Nt.NumericString;break;case 19:c=Nt.PrintableString;break;case 20:c=Nt.TeletexString;break;case 21:c=Nt.VideotexString;break;case 22:c=Nt.IA5String;break;case 23:c=Nt.UTCTime;break;case 24:c=Nt.GeneralizedTime;break;case 25:c=Nt.GraphicString;break;case 26:c=Nt.VisibleString;break;case 27:c=Nt.GeneralString;break;case 28:c=Nt.UniversalString;break;case 29:c=Nt.CharacterString;break;case 30:c=Nt.BmpString;break;case 31:c=Nt.DATE;break;case 32:c=Nt.TimeOfDay;break;case 33:c=Nt.DateTime;break;case 34:c=Nt.Duration;break;default:{const l=i.idBlock.isConstructed?new Nt.Constructed:new Nt.Primitive;l.idBlock=i.idBlock,l.lenBlock=i.lenBlock,l.warnings=i.warnings,i=l}}break;case 2:case 3:case 4:default:c=i.idBlock.isConstructed?Nt.Constructed:Nt.Primitive}return i=xCt(i,c),o=i.fromBER(t,e,i.lenBlock.isIndefiniteForm?r:i.lenBlock.length),i.valueBeforeDecodeView=t.subarray(n,n+i.blockLength),{offset:o,result:i}}function $3(t){if(!t.byteLength){const e=new Zo({},Dc);return e.error="Input buffer has zero length",{offset:-1,result:e}}return aT(Si.toUint8Array(t).slice(),0,t.byteLength)}function ECt(t,e){return t?1:e}class B1 extends Dc{constructor({value:e=[],isIndefiniteForm:r=!1,...n}={}){super(n),this.value=e,this.isIndefiniteForm=r}fromBER(e,r,n){const i=Si.toUint8Array(e);if(!v0(this,i,r,n))return-1;if(this.valueBeforeDecodeView=i.subarray(r,r+n),this.valueBeforeDecodeView.length===0)return this.warnings.push("Zero buffer length"),r;let s=r;for(;ECt(this.isIndefiniteForm,n)>0;){const a=aT(i,s,n);if(a.offset===-1)return this.error=a.result.error,this.warnings.concat(a.result.warnings),-1;if(s=a.offset,this.blockLength+=a.result.blockLength,n-=a.result.blockLength,this.value.push(a.result),this.isIndefiniteForm&&a.result.constructor.NAME===K4)break}return this.isIndefiniteForm&&(this.value[this.value.length-1].constructor.NAME===K4?this.value.pop():this.warnings.push("No EndOfContent block encoded")),s}toBER(e,r){const n=r||new cz;for(let i=0;i<this.value.length;i++)this.value[i].toBER(e,n);return r?cf:n.final()}toJSON(){const e={...super.toJSON(),isIndefiniteForm:this.isIndefiniteForm,value:[]};for(const r of this.value)e.value.push(r.toJSON());return e}}B1.NAME="ConstructedValueBlock";var Nbe;class Db extends Zo{constructor(e={}){super(e,B1),this.idBlock.isConstructed=!0}fromBER(e,r,n){this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm;const i=this.valueBlock.fromBER(e,r,this.lenBlock.isIndefiniteForm?n:this.lenBlock.length);return i===-1?(this.error=this.valueBlock.error,i):(this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.valueBlock.error.length||(this.blockLength+=this.valueBlock.blockLength),i)}onAsciiEncoding(){const e=[];for(const n of this.valueBlock.value)e.push(n.toString("ascii").split(`
`).map(i=>`  ${i}`).join(`
`));const r=this.idBlock.tagClass===3?`[${this.idBlock.tagNumber}]`:this.constructor.NAME;return e.length?`${r} :
${e.join(`
`)}`:`${r} :`}}Nbe=Db;Nt.Constructed=Nbe;Db.NAME="CONSTRUCTED";class Mbe extends Dc{fromBER(e,r,n){return r}toBER(e){return cf}}Mbe.override="EndOfContentValueBlock";var Lbe;class Fbe extends Zo{constructor(e={}){super(e,Mbe),this.idBlock.tagClass=1,this.idBlock.tagNumber=0}}Lbe=Fbe;Nt.EndOfContent=Lbe;Fbe.NAME=K4;var $be;class G4 extends Zo{constructor(e={}){super(e,Dc),this.idBlock.tagClass=1,this.idBlock.tagNumber=5}fromBER(e,r,n){return this.lenBlock.length>0&&this.warnings.push("Non-zero length of value block for Null type"),this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.blockLength+=n,r+n>e.byteLength?(this.error="End of input reached before message was fully decoded (inconsistent offset and length values)",-1):r+n}toBER(e,r){const n=new ArrayBuffer(2);if(!e){const i=new Uint8Array(n);i[0]=5,i[1]=0}return r&&r.write(n),n}onAsciiEncoding(){return`${this.constructor.NAME}`}}$be=G4;Nt.Null=$be;G4.NAME="NULL";class Ube extends b0(Dc){constructor({value:e,...r}={}){super(r),r.valueHex?this.valueHexView=Si.toUint8Array(r.valueHex):this.valueHexView=new Uint8Array(1),e&&(this.value=e)}get value(){for(const e of this.valueHexView)if(e>0)return!0;return!1}set value(e){this.valueHexView[0]=e?255:0}fromBER(e,r,n){const i=Si.toUint8Array(e);return v0(this,i,r,n)?(this.valueHexView=i.subarray(r,r+n),n>1&&this.warnings.push("Boolean value encoded in more then 1 octet"),this.isHexOnly=!0,Abe.call(this),this.blockLength=n,r+n):-1}toBER(){return this.valueHexView.slice()}toJSON(){return{...super.toJSON(),value:this.value}}}Ube.NAME="BooleanValueBlock";var Vbe;let jbe=class extends Zo{constructor(e={}){super(e,Ube),this.idBlock.tagClass=1,this.idBlock.tagNumber=1}getValue(){return this.valueBlock.value}setValue(e){this.valueBlock.value=e}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.getValue}`}};Vbe=jbe;Nt.Boolean=Vbe;jbe.NAME="BOOLEAN";class zbe extends b0(B1){constructor({isConstructed:e=!1,...r}={}){super(r),this.isConstructed=e}fromBER(e,r,n){let i=0;if(this.isConstructed){if(this.isHexOnly=!1,i=B1.prototype.fromBER.call(this,e,r,n),i===-1)return i;for(let s=0;s<this.value.length;s++){const a=this.value[s].constructor.NAME;if(a===K4){if(this.isIndefiniteForm)break;return this.error="EndOfContent is unexpected, OCTET STRING may consists of OCTET STRINGs only",-1}if(a!==Tbe)return this.error="OCTET STRING may consists of OCTET STRINGs only",-1}}else this.isHexOnly=!0,i=super.fromBER(e,r,n),this.blockLength=n;return i}toBER(e,r){return this.isConstructed?B1.prototype.toBER.call(this,e,r):e?new ArrayBuffer(this.valueHexView.byteLength):this.valueHexView.slice().buffer}toJSON(){return{...super.toJSON(),isConstructed:this.isConstructed}}}zbe.NAME="OctetStringValueBlock";var qbe;class _1 extends Zo{constructor({idBlock:e={},lenBlock:r={},...n}={}){var i,s;(i=n.isConstructed)!==null&&i!==void 0||(n.isConstructed=!!(!((s=n.value)===null||s===void 0)&&s.length)),super({idBlock:{isConstructed:n.isConstructed,...e},lenBlock:{...r,isIndefiniteForm:!!n.isIndefiniteForm},...n},zbe),this.idBlock.tagClass=1,this.idBlock.tagNumber=4}fromBER(e,r,n){if(this.valueBlock.isConstructed=this.idBlock.isConstructed,this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm,n===0)return this.idBlock.error.length===0&&(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length===0&&(this.blockLength+=this.lenBlock.blockLength),r;if(!this.valueBlock.isConstructed){const s=(e instanceof ArrayBuffer?new Uint8Array(e):e).subarray(r,r+n);try{if(s.byteLength){const a=aT(s,0,s.byteLength);a.offset!==-1&&a.offset===n&&(this.valueBlock.value=[a.result])}}catch{}}return super.fromBER(e,r,n)}onAsciiEncoding(){return this.valueBlock.isConstructed||this.valueBlock.value&&this.valueBlock.value.length?Db.prototype.onAsciiEncoding.call(this):`${this.constructor.NAME} : ${ds.ToHex(this.valueBlock.valueHexView)}`}getValue(){if(!this.idBlock.isConstructed)return this.valueBlock.valueHexView.slice().buffer;const e=[];for(const r of this.valueBlock.value)r instanceof _1&&e.push(r.valueBlock.valueHexView);return Si.concat(e)}}qbe=_1;Nt.OctetString=qbe;_1.NAME=Tbe;class Hbe extends b0(B1){constructor({unusedBits:e=0,isConstructed:r=!1,...n}={}){super(n),this.unusedBits=e,this.isConstructed=r,this.blockLength=this.valueHexView.byteLength}fromBER(e,r,n){if(!n)return r;let i=-1;if(this.isConstructed){if(i=B1.prototype.fromBER.call(this,e,r,n),i===-1)return i;for(const o of this.value){const c=o.constructor.NAME;if(c===K4){if(this.isIndefiniteForm)break;return this.error="EndOfContent is unexpected, BIT STRING may consists of BIT STRINGs only",-1}if(c!==kbe)return this.error="BIT STRING may consists of BIT STRINGs only",-1;const l=o.valueBlock;if(this.unusedBits>0&&l.unusedBits>0)return this.error='Using of "unused bits" inside constructive BIT STRING allowed for least one only',-1;this.unusedBits=l.unusedBits}return i}const s=Si.toUint8Array(e);if(!v0(this,s,r,n))return-1;const a=s.subarray(r,r+n);if(this.unusedBits=a[0],this.unusedBits>7)return this.error="Unused bits for BitString must be in range 0-7",-1;if(!this.unusedBits){const o=a.subarray(1);try{if(o.byteLength){const c=aT(o,0,o.byteLength);c.offset!==-1&&c.offset===n-1&&(this.value=[c.result])}}catch{}}return this.valueHexView=a.subarray(1),this.blockLength=a.length,r+n}toBER(e,r){if(this.isConstructed)return B1.prototype.toBER.call(this,e,r);if(e)return new ArrayBuffer(this.valueHexView.byteLength+1);if(!this.valueHexView.byteLength)return cf;const n=new Uint8Array(this.valueHexView.length+1);return n[0]=this.unusedBits,n.set(this.valueHexView,1),n.buffer}toJSON(){return{...super.toJSON(),unusedBits:this.unusedBits,isConstructed:this.isConstructed}}}Hbe.NAME="BitStringValueBlock";var Wbe;class uz extends Zo{constructor({idBlock:e={},lenBlock:r={},...n}={}){var i,s;(i=n.isConstructed)!==null&&i!==void 0||(n.isConstructed=!!(!((s=n.value)===null||s===void 0)&&s.length)),super({idBlock:{isConstructed:n.isConstructed,...e},lenBlock:{...r,isIndefiniteForm:!!n.isIndefiniteForm},...n},Hbe),this.idBlock.tagClass=1,this.idBlock.tagNumber=3}fromBER(e,r,n){return this.valueBlock.isConstructed=this.idBlock.isConstructed,this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm,super.fromBER(e,r,n)}onAsciiEncoding(){if(this.valueBlock.isConstructed||this.valueBlock.value&&this.valueBlock.value.length)return Db.prototype.onAsciiEncoding.call(this);{const e=[],r=this.valueBlock.valueHexView;for(const i of r)e.push(i.toString(2).padStart(8,"0"));const n=e.join("");return`${this.constructor.NAME} : ${n.substring(0,n.length-this.valueBlock.unusedBits)}`}}}Wbe=uz;Nt.BitString=Wbe;uz.NAME=kbe;var Kbe;function SCt(t,e){const r=new Uint8Array([0]),n=new Uint8Array(t),i=new Uint8Array(e);let s=n.slice(0);const a=s.length-1,o=i.slice(0),c=o.length-1;let l=0;const u=c<a?a:c;let f=0;for(let h=u;h>=0;h--,f++){switch(!0){case f<o.length:l=s[a-f]+o[c-f]+r[0];break;default:l=s[a-f]+r[0]}switch(r[0]=l/10,!0){case f>=s.length:s=_M(new Uint8Array([l%10]),s);break;default:s[a-f]=l%10}}return r[0]>0&&(s=_M(r,s)),s}function oie(t){if(t>=Ow.length)for(let e=Ow.length;e<=t;e++){const r=new Uint8Array([0]);let n=Ow[e-1].slice(0);for(let i=n.length-1;i>=0;i--){const s=new Uint8Array([(n[i]<<1)+r[0]]);r[0]=s[0]/10,n[i]=s[0]%10}r[0]>0&&(n=_M(r,n)),Ow.push(n)}return Ow[t]}function ACt(t,e){let r=0;const n=new Uint8Array(t),i=new Uint8Array(e),s=n.slice(0),a=s.length-1,o=i.slice(0),c=o.length-1;let l,u=0;for(let f=c;f>=0;f--,u++)switch(l=s[a-u]-o[c-u]-r,!0){case l<0:r=1,s[a-u]=l+10;break;default:r=0,s[a-u]=l}if(r>0)for(let f=a-c+1;f>=0;f--,u++)if(l=s[a-u]-r,l<0)r=1,s[a-u]=l+10;else{r=0,s[a-u]=l;break}return s.slice()}class fz extends b0(Dc){constructor({value:e,...r}={}){super(r),this._valueDec=0,r.valueHex&&this.setValueHex(),e!==void 0&&(this.valueDec=e)}setValueHex(){this.valueHexView.length>=4?(this.warnings.push("Too big Integer for decoding, hex only"),this.isHexOnly=!0,this._valueDec=0):(this.isHexOnly=!1,this.valueHexView.length>0&&(this._valueDec=Abe.call(this)))}set valueDec(e){this._valueDec=e,this.isHexOnly=!1,this.valueHexView=new Uint8Array(wCt(e))}get valueDec(){return this._valueDec}fromDER(e,r,n,i=0){const s=this.fromBER(e,r,n);if(s===-1)return s;const a=this.valueHexView;return a[0]===0&&a[1]&128?this.valueHexView=a.subarray(1):i!==0&&a.length<i&&(i-a.length>1&&(i=a.length+1),this.valueHexView=a.subarray(i-a.length)),s}toDER(e=!1){const r=this.valueHexView;switch(!0){case(r[0]&128)!==0:{const n=new Uint8Array(this.valueHexView.length+1);n[0]=0,n.set(r,1),this.valueHexView=n}break;case(r[0]===0&&(r[1]&128)===0):this.valueHexView=this.valueHexView.subarray(1);break}return this.toBER(e)}fromBER(e,r,n){const i=super.fromBER(e,r,n);return i===-1||this.setValueHex(),i}toBER(e){return e?new ArrayBuffer(this.valueHexView.length):this.valueHexView.slice().buffer}toJSON(){return{...super.toJSON(),valueDec:this.valueDec}}toString(){const e=this.valueHexView.length*8-1;let r=new Uint8Array(this.valueHexView.length*8/3),n=0,i;const s=this.valueHexView;let a="",o=!1;for(let c=s.byteLength-1;c>=0;c--){i=s[c];for(let l=0;l<8;l++){if((i&1)===1)switch(n){case e:r=ACt(oie(n),r),a="-";break;default:r=SCt(r,oie(n))}n++,i>>=1}}for(let c=0;c<r.length;c++)r[c]&&(o=!0),o&&(a+=aie.charAt(r[c]));return o===!1&&(a+=aie.charAt(0)),a}}Kbe=fz;fz.NAME="IntegerValueBlock";Object.defineProperty(Kbe.prototype,"valueHex",{set:function(t){this.valueHexView=new Uint8Array(t),this.setValueHex()},get:function(){return this.valueHexView.slice().buffer}});var Gbe;class ws extends Zo{constructor(e={}){super(e,fz),this.idBlock.tagClass=1,this.idBlock.tagNumber=2}toBigInt(){return b9(),BigInt(this.valueBlock.toString())}static fromBigInt(e){b9();const r=BigInt(e),n=new cz,i=r.toString(16).replace(/^-/,""),s=new Uint8Array(ds.FromHex(i));if(r<0){const o=new Uint8Array(s.length+(s[0]&128?1:0));o[0]|=128;const l=BigInt(`0x${ds.ToHex(o)}`)+r,u=Si.toUint8Array(ds.FromHex(l.toString(16)));u[0]|=128,n.write(u)}else s[0]&128&&n.write(new Uint8Array([0])),n.write(s);return new ws({valueHex:n.final()})}convertToDER(){const e=new ws({valueHex:this.valueBlock.valueHexView});return e.valueBlock.toDER(),e}convertFromDER(){return new ws({valueHex:this.valueBlock.valueHexView[0]===0?this.valueBlock.valueHexView.subarray(1):this.valueBlock.valueHexView})}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.valueBlock.toString()}`}}Gbe=ws;Nt.Integer=Gbe;ws.NAME="INTEGER";var Ybe;class Xbe extends ws{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=10}}Ybe=Xbe;Nt.Enumerated=Ybe;Xbe.NAME="ENUMERATED";class xM extends b0(Dc){constructor({valueDec:e=-1,isFirstSid:r=!1,...n}={}){super(n),this.valueDec=e,this.isFirstSid=r}fromBER(e,r,n){if(!n)return r;const i=Si.toUint8Array(e);if(!v0(this,i,r,n))return-1;const s=i.subarray(r,r+n);this.valueHexView=new Uint8Array(n);for(let o=0;o<n&&(this.valueHexView[o]=s[o]&127,this.blockLength++,!!(s[o]&128));o++);const a=new Uint8Array(this.blockLength);for(let o=0;o<this.blockLength;o++)a[o]=this.valueHexView[o];return this.valueHexView=a,s[this.blockLength-1]&128?(this.error="End of input reached before message was fully decoded",-1):(this.valueHexView[0]===0&&this.warnings.push("Needlessly long format of SID encoding"),this.blockLength<=8?this.valueDec=kv(this.valueHexView,7):(this.isHexOnly=!0,this.warnings.push("Too big SID for decoding, hex only")),r+this.blockLength)}set valueBigInt(e){b9();let r=BigInt(e).toString(2);for(;r.length%7;)r="0"+r;const n=new Uint8Array(r.length/7);for(let i=0;i<n.length;i++)n[i]=parseInt(r.slice(i*7,i*7+7),2)+(i+1<n.length?128:0);this.fromBER(n.buffer,0,n.length)}toBER(e){if(this.isHexOnly){if(e)return new ArrayBuffer(this.valueHexView.byteLength);const i=this.valueHexView,s=new Uint8Array(this.blockLength);for(let a=0;a<this.blockLength-1;a++)s[a]=i[a]|128;return s[this.blockLength-1]=i[this.blockLength-1],s.buffer}const r=bm(this.valueDec,7);if(r.byteLength===0)return this.error="Error during encoding SID value",cf;const n=new Uint8Array(r.byteLength);if(!e){const i=new Uint8Array(r),s=r.byteLength-1;for(let a=0;a<s;a++)n[a]=i[a]|128;n[s]=i[s]}return n}toString(){let e="";if(this.isHexOnly)e=ds.ToHex(this.valueHexView);else if(this.isFirstSid){let r=this.valueDec;this.valueDec<=39?e="0.":this.valueDec<=79?(e="1.",r-=40):(e="2.",r-=80),e+=r.toString()}else e=this.valueDec.toString();return e}toJSON(){return{...super.toJSON(),valueDec:this.valueDec,isFirstSid:this.isFirstSid}}}xM.NAME="sidBlock";class Zbe extends Dc{constructor({value:e=Bb,...r}={}){super(r),this.value=[],e&&this.fromString(e)}fromBER(e,r,n){let i=r;for(;n>0;){const s=new xM;if(i=s.fromBER(e,i,n),i===-1)return this.blockLength=0,this.error=s.error,i;this.value.length===0&&(s.isFirstSid=!0),this.blockLength+=s.blockLength,n-=s.blockLength,this.value.push(s)}return i}toBER(e){const r=[];for(let n=0;n<this.value.length;n++){const i=this.value[n].toBER(e);if(i.byteLength===0)return this.error=this.value[n].error,cf;r.push(i)}return oz(r)}fromString(e){this.value=[];let r=0,n=0,i="",s=!1;do if(n=e.indexOf(".",r),n===-1?i=e.substring(r):i=e.substring(r,n),r=n+1,s){const a=this.value[0];let o=0;switch(a.valueDec){case 0:break;case 1:o=40;break;case 2:o=80;break;default:this.value=[];return}const c=parseInt(i,10);if(isNaN(c))return;a.valueDec=c+o,s=!1}else{const a=new xM;if(i>Number.MAX_SAFE_INTEGER){b9();const o=BigInt(i);a.valueBigInt=o}else if(a.valueDec=parseInt(i,10),isNaN(a.valueDec))return;this.value.length||(a.isFirstSid=!0,s=!0),this.value.push(a)}while(n!==-1)}toString(){let e="",r=!1;for(let n=0;n<this.value.length;n++){r=this.value[n].isHexOnly;let i=this.value[n].toString();n!==0&&(e=`${e}.`),r?(i=`{${i}}`,this.value[n].isFirstSid?e=`2.{${i} - 80}`:e+=i):e+=i}return e}toJSON(){const e={...super.toJSON(),value:this.toString(),sidArray:[]};for(let r=0;r<this.value.length;r++)e.sidArray.push(this.value[r].toJSON());return e}}Zbe.NAME="ObjectIdentifierValueBlock";var Jbe;class f1 extends Zo{constructor(e={}){super(e,Zbe),this.idBlock.tagClass=1,this.idBlock.tagNumber=6}getValue(){return this.valueBlock.toString()}setValue(e){this.valueBlock.fromString(e)}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.valueBlock.toString()||"empty"}`}toJSON(){return{...super.toJSON(),value:this.getValue()}}}Jbe=f1;Nt.ObjectIdentifier=Jbe;f1.NAME="OBJECT IDENTIFIER";class EM extends b0(t2){constructor({valueDec:e=0,...r}={}){super(r),this.valueDec=e}fromBER(e,r,n){if(n===0)return r;const i=Si.toUint8Array(e);if(!v0(this,i,r,n))return-1;const s=i.subarray(r,r+n);this.valueHexView=new Uint8Array(n);for(let o=0;o<n&&(this.valueHexView[o]=s[o]&127,this.blockLength++,!!(s[o]&128));o++);const a=new Uint8Array(this.blockLength);for(let o=0;o<this.blockLength;o++)a[o]=this.valueHexView[o];return this.valueHexView=a,s[this.blockLength-1]&128?(this.error="End of input reached before message was fully decoded",-1):(this.valueHexView[0]===0&&this.warnings.push("Needlessly long format of SID encoding"),this.blockLength<=8?this.valueDec=kv(this.valueHexView,7):(this.isHexOnly=!0,this.warnings.push("Too big SID for decoding, hex only")),r+this.blockLength)}toBER(e){if(this.isHexOnly){if(e)return new ArrayBuffer(this.valueHexView.byteLength);const i=this.valueHexView,s=new Uint8Array(this.blockLength);for(let a=0;a<this.blockLength-1;a++)s[a]=i[a]|128;return s[this.blockLength-1]=i[this.blockLength-1],s.buffer}const r=bm(this.valueDec,7);if(r.byteLength===0)return this.error="Error during encoding SID value",cf;const n=new Uint8Array(r.byteLength);if(!e){const i=new Uint8Array(r),s=r.byteLength-1;for(let a=0;a<s;a++)n[a]=i[a]|128;n[s]=i[s]}return n.buffer}toString(){let e="";return this.isHexOnly?e=ds.ToHex(this.valueHexView):e=this.valueDec.toString(),e}toJSON(){return{...super.toJSON(),valueDec:this.valueDec}}}EM.NAME="relativeSidBlock";class Qbe extends Dc{constructor({value:e=Bb,...r}={}){super(r),this.value=[],e&&this.fromString(e)}fromBER(e,r,n){let i=r;for(;n>0;){const s=new EM;if(i=s.fromBER(e,i,n),i===-1)return this.blockLength=0,this.error=s.error,i;this.blockLength+=s.blockLength,n-=s.blockLength,this.value.push(s)}return i}toBER(e,r){const n=[];for(let i=0;i<this.value.length;i++){const s=this.value[i].toBER(e);if(s.byteLength===0)return this.error=this.value[i].error,cf;n.push(s)}return oz(n)}fromString(e){this.value=[];let r=0,n=0,i="";do{n=e.indexOf(".",r),n===-1?i=e.substring(r):i=e.substring(r,n),r=n+1;const s=new EM;if(s.valueDec=parseInt(i,10),isNaN(s.valueDec))return!0;this.value.push(s)}while(n!==-1);return!0}toString(){let e="",r=!1;for(let n=0;n<this.value.length;n++){r=this.value[n].isHexOnly;let i=this.value[n].toString();n!==0&&(e=`${e}.`),r&&(i=`{${i}}`),e+=i}return e}toJSON(){const e={...super.toJSON(),value:this.toString(),sidArray:[]};for(let r=0;r<this.value.length;r++)e.sidArray.push(this.value[r].toJSON());return e}}Qbe.NAME="RelativeObjectIdentifierValueBlock";var ewe;class twe extends Zo{constructor(e={}){super(e,Qbe),this.idBlock.tagClass=1,this.idBlock.tagNumber=13}getValue(){return this.valueBlock.toString()}setValue(e){this.valueBlock.fromString(e)}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.valueBlock.toString()||"empty"}`}toJSON(){return{...super.toJSON(),value:this.getValue()}}}ewe=twe;Nt.RelativeObjectIdentifier=ewe;twe.NAME="RelativeObjectIdentifier";var rwe;class Mo extends Db{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=16}}rwe=Mo;Nt.Sequence=rwe;Mo.NAME="SEQUENCE";var nwe;let iwe=class extends Db{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=17}};nwe=iwe;Nt.Set=nwe;iwe.NAME="SET";class swe extends b0(Dc){constructor({...e}={}){super(e),this.isHexOnly=!0,this.value=Bb}toJSON(){return{...super.toJSON(),value:this.value}}}swe.NAME="StringValueBlock";class awe extends swe{}awe.NAME="SimpleStringValueBlock";class fl extends Pbe{constructor({...e}={}){super(e,awe)}fromBuffer(e){this.valueBlock.value=String.fromCharCode.apply(null,Si.toUint8Array(e))}fromString(e){const r=e.length,n=this.valueBlock.valueHexView=new Uint8Array(r);for(let i=0;i<r;i++)n[i]=e.charCodeAt(i);this.valueBlock.value=e}}fl.NAME="SIMPLE STRING";class owe extends fl{fromBuffer(e){this.valueBlock.valueHexView=Si.toUint8Array(e);try{this.valueBlock.value=ds.ToUtf8String(e)}catch(r){this.warnings.push(`Error during "decodeURIComponent": ${r}, using raw string`),this.valueBlock.value=ds.ToBinary(e)}}fromString(e){this.valueBlock.valueHexView=new Uint8Array(ds.FromUtf8String(e)),this.valueBlock.value=e}}owe.NAME="Utf8StringValueBlock";var cwe;class r2 extends owe{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=12}}cwe=r2;Nt.Utf8String=cwe;r2.NAME="UTF8String";class lwe extends fl{fromBuffer(e){this.valueBlock.value=ds.ToUtf16String(e),this.valueBlock.valueHexView=Si.toUint8Array(e)}fromString(e){this.valueBlock.value=e,this.valueBlock.valueHexView=new Uint8Array(ds.FromUtf16String(e))}}lwe.NAME="BmpStringValueBlock";var uwe;class fwe extends lwe{constructor({...e}={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=30}}uwe=fwe;Nt.BmpString=uwe;fwe.NAME="BMPString";class hwe extends fl{fromBuffer(e){const r=ArrayBuffer.isView(e)?e.slice().buffer:e.slice(0),n=new Uint8Array(r);for(let i=0;i<n.length;i+=4)n[i]=n[i+3],n[i+1]=n[i+2],n[i+2]=0,n[i+3]=0;this.valueBlock.value=String.fromCharCode.apply(null,new Uint32Array(r))}fromString(e){const r=e.length,n=this.valueBlock.valueHexView=new Uint8Array(r*4);for(let i=0;i<r;i++){const s=bm(e.charCodeAt(i),8),a=new Uint8Array(s);if(a.length>4)continue;const o=4-a.length;for(let c=a.length-1;c>=0;c--)n[i*4+c+o]=a[c]}this.valueBlock.value=e}}hwe.NAME="UniversalStringValueBlock";var dwe;class pwe extends hwe{constructor({...e}={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=28}}dwe=pwe;Nt.UniversalString=dwe;pwe.NAME="UniversalString";var gwe;class mwe extends fl{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=18}}gwe=mwe;Nt.NumericString=gwe;mwe.NAME="NumericString";var ywe;class vwe extends fl{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=19}}ywe=vwe;Nt.PrintableString=ywe;vwe.NAME="PrintableString";var bwe;class wwe extends fl{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=20}}bwe=wwe;Nt.TeletexString=bwe;wwe.NAME="TeletexString";var _we;class xwe extends fl{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=21}}_we=xwe;Nt.VideotexString=_we;xwe.NAME="VideotexString";var Ewe;class Swe extends fl{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=22}}Ewe=Swe;Nt.IA5String=Ewe;Swe.NAME="IA5String";var Awe;class Twe extends fl{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=25}}Awe=Twe;Nt.GraphicString=Awe;Twe.NAME="GraphicString";var kwe;class hz extends fl{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=26}}kwe=hz;Nt.VisibleString=kwe;hz.NAME="VisibleString";var Cwe;class Iwe extends fl{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=27}}Cwe=Iwe;Nt.GeneralString=Cwe;Iwe.NAME="GeneralString";var Rwe;class Pwe extends fl{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=29}}Rwe=Pwe;Nt.CharacterString=Rwe;Pwe.NAME="CharacterString";var Bwe;class dz extends hz{constructor({value:e,valueDate:r,...n}={}){if(super(n),this.year=0,this.month=0,this.day=0,this.hour=0,this.minute=0,this.second=0,e){this.fromString(e),this.valueBlock.valueHexView=new Uint8Array(e.length);for(let i=0;i<e.length;i++)this.valueBlock.valueHexView[i]=e.charCodeAt(i)}r&&(this.fromDate(r),this.valueBlock.valueHexView=new Uint8Array(this.toBuffer())),this.idBlock.tagClass=1,this.idBlock.tagNumber=23}fromBuffer(e){this.fromString(String.fromCharCode.apply(null,Si.toUint8Array(e)))}toBuffer(){const e=this.toString(),r=new ArrayBuffer(e.length),n=new Uint8Array(r);for(let i=0;i<e.length;i++)n[i]=e.charCodeAt(i);return r}fromDate(e){this.year=e.getUTCFullYear(),this.month=e.getUTCMonth()+1,this.day=e.getUTCDate(),this.hour=e.getUTCHours(),this.minute=e.getUTCMinutes(),this.second=e.getUTCSeconds()}toDate(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second))}fromString(e){const n=/(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})Z/ig.exec(e);if(n===null){this.error="Wrong input string for conversion";return}const i=parseInt(n[1],10);i>=50?this.year=1900+i:this.year=2e3+i,this.month=parseInt(n[2],10),this.day=parseInt(n[3],10),this.hour=parseInt(n[4],10),this.minute=parseInt(n[5],10),this.second=parseInt(n[6],10)}toString(e="iso"){if(e==="iso"){const r=new Array(7);return r[0]=Kc(this.year<2e3?this.year-1900:this.year-2e3,2),r[1]=Kc(this.month,2),r[2]=Kc(this.day,2),r[3]=Kc(this.hour,2),r[4]=Kc(this.minute,2),r[5]=Kc(this.second,2),r[6]="Z",r.join("")}return super.toString(e)}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.toDate().toISOString()}`}toJSON(){return{...super.toJSON(),year:this.year,month:this.month,day:this.day,hour:this.hour,minute:this.minute,second:this.second}}}Bwe=dz;Nt.UTCTime=Bwe;dz.NAME="UTCTime";var Dwe;class Owe extends dz{constructor(e={}){var r;super(e),(r=this.millisecond)!==null&&r!==void 0||(this.millisecond=0),this.idBlock.tagClass=1,this.idBlock.tagNumber=24}fromDate(e){super.fromDate(e),this.millisecond=e.getUTCMilliseconds()}toDate(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second,this.millisecond))}fromString(e){let r=!1,n="",i="",s=0,a,o=0,c=0;if(e[e.length-1]==="Z")n=e.substring(0,e.length-1),r=!0;else{const f=new Number(e[e.length-1]);if(isNaN(f.valueOf()))throw new Error("Wrong input string for conversion");n=e}if(r){if(n.indexOf("+")!==-1)throw new Error("Wrong input string for conversion");if(n.indexOf("-")!==-1)throw new Error("Wrong input string for conversion")}else{let f=1,h=n.indexOf("+"),d="";if(h===-1&&(h=n.indexOf("-"),f=-1),h!==-1){if(d=n.substring(h+1),n=n.substring(0,h),d.length!==2&&d.length!==4)throw new Error("Wrong input string for conversion");let g=parseInt(d.substring(0,2),10);if(isNaN(g.valueOf()))throw new Error("Wrong input string for conversion");if(o=f*g,d.length===4){if(g=parseInt(d.substring(2,4),10),isNaN(g.valueOf()))throw new Error("Wrong input string for conversion");c=f*g}}}let l=n.indexOf(".");if(l===-1&&(l=n.indexOf(",")),l!==-1){const f=new Number(`0${n.substring(l)}`);if(isNaN(f.valueOf()))throw new Error("Wrong input string for conversion");s=f.valueOf(),i=n.substring(0,l)}else i=n;switch(!0){case i.length===8:if(a=/(\d{4})(\d{2})(\d{2})/ig,l!==-1)throw new Error("Wrong input string for conversion");break;case i.length===10:if(a=/(\d{4})(\d{2})(\d{2})(\d{2})/ig,l!==-1){let f=60*s;this.minute=Math.floor(f),f=60*(f-this.minute),this.second=Math.floor(f),f=1e3*(f-this.second),this.millisecond=Math.floor(f)}break;case i.length===12:if(a=/(\d{4})(\d{2})(\d{2})(\d{2})(\d{2})/ig,l!==-1){let f=60*s;this.second=Math.floor(f),f=1e3*(f-this.second),this.millisecond=Math.floor(f)}break;case i.length===14:if(a=/(\d{4})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})/ig,l!==-1){const f=1e3*s;this.millisecond=Math.floor(f)}break;default:throw new Error("Wrong input string for conversion")}const u=a.exec(i);if(u===null)throw new Error("Wrong input string for conversion");for(let f=1;f<u.length;f++)switch(f){case 1:this.year=parseInt(u[f],10);break;case 2:this.month=parseInt(u[f],10);break;case 3:this.day=parseInt(u[f],10);break;case 4:this.hour=parseInt(u[f],10)+o;break;case 5:this.minute=parseInt(u[f],10)+c;break;case 6:this.second=parseInt(u[f],10);break;default:throw new Error("Wrong input string for conversion")}if(r===!1){const f=new Date(this.year,this.month,this.day,this.hour,this.minute,this.second,this.millisecond);this.year=f.getUTCFullYear(),this.month=f.getUTCMonth(),this.day=f.getUTCDay(),this.hour=f.getUTCHours(),this.minute=f.getUTCMinutes(),this.second=f.getUTCSeconds(),this.millisecond=f.getUTCMilliseconds()}}toString(e="iso"){if(e==="iso"){const r=[];return r.push(Kc(this.year,4)),r.push(Kc(this.month,2)),r.push(Kc(this.day,2)),r.push(Kc(this.hour,2)),r.push(Kc(this.minute,2)),r.push(Kc(this.second,2)),this.millisecond!==0&&(r.push("."),r.push(Kc(this.millisecond,3))),r.push("Z"),r.join("")}return super.toString(e)}toJSON(){return{...super.toJSON(),millisecond:this.millisecond}}}Dwe=Owe;Nt.GeneralizedTime=Dwe;Owe.NAME="GeneralizedTime";var Nwe;class Mwe extends r2{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=31}}Nwe=Mwe;Nt.DATE=Nwe;Mwe.NAME="DATE";var Lwe;class Fwe extends r2{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=32}}Lwe=Fwe;Nt.TimeOfDay=Lwe;Fwe.NAME="TimeOfDay";var $we;class Uwe extends r2{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=33}}$we=Uwe;Nt.DateTime=$we;Uwe.NAME="DateTime";var Vwe;class jwe extends r2{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=34}}Vwe=jwe;Nt.Duration=Vwe;jwe.NAME="Duration";var zwe;class qwe extends r2{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=14}}zwe=qwe;Nt.TIME=zwe;qwe.NAME="TIME";function TCt(t){const{result:e}=$3(t),r=e.valueBlock.value;return{n:vt(Cf(r[1].toBigInt()),"base64url"),e:vt(Cf(r[2].toBigInt()),"base64url"),d:vt(Cf(r[3].toBigInt()),"base64url"),p:vt(Cf(r[4].toBigInt()),"base64url"),q:vt(Cf(r[5].toBigInt()),"base64url"),dp:vt(Cf(r[6].toBigInt()),"base64url"),dq:vt(Cf(r[7].toBigInt()),"base64url"),qi:vt(Cf(r[8].toBigInt()),"base64url"),kty:"RSA",alg:"RS256"}}function kCt(t){if(t.n==null||t.e==null||t.d==null||t.p==null||t.q==null||t.dp==null||t.dq==null||t.qi==null)throw new ye("JWK was missing components","ERR_INVALID_PARAMETERS");const r=new Mo({value:[new ws({value:0}),ws.fromBigInt(If(pt(t.n,"base64url"))),ws.fromBigInt(If(pt(t.e,"base64url"))),ws.fromBigInt(If(pt(t.d,"base64url"))),ws.fromBigInt(If(pt(t.p,"base64url"))),ws.fromBigInt(If(pt(t.q,"base64url"))),ws.fromBigInt(If(pt(t.dp,"base64url"))),ws.fromBigInt(If(pt(t.dq,"base64url"))),ws.fromBigInt(If(pt(t.qi,"base64url")))]}).toBER();return new Uint8Array(r,0,r.byteLength)}function CCt(t){const{result:e}=$3(t),r=e.valueBlock.value[1].valueBlock.value[0].valueBlock.value;return{kty:"RSA",n:vt(Cf(r[0].toBigInt()),"base64url"),e:vt(Cf(r[1].toBigInt()),"base64url")}}function ICt(t){if(t.n==null||t.e==null)throw new ye("JWK was missing components","ERR_INVALID_PARAMETERS");const r=new Mo({value:[new Mo({value:[new f1({value:"1.2.840.113549.1.1.1"}),new G4]}),new uz({valueHex:new Mo({value:[ws.fromBigInt(If(pt(t.n,"base64url"))),ws.fromBigInt(If(pt(t.e,"base64url")))]}).toBER()})]}).toBER();return new Uint8Array(r,0,r.byteLength)}function Cf(t){let e=t.toString(16);e.length%2>0&&(e=`0${e}`);const r=e.length/2,n=new Uint8Array(r);let i=0,s=0;for(;i<r;)n[i]=parseInt(e.slice(s,s+2),16),i+=1,s+=2;return n}function If(t){const e=[];return t.forEach(function(r){let n=r.toString(16);n.length%2>0&&(n=`0${n}`),e.push(n)}),BigInt("0x"+e.join(""))}const RCt=16,SM=32,AM=1e4;async function PCt(t,e){const r=Kl.get(),i=new Mo({value:[new ws({value:0}),new Mo({value:[new f1({value:"1.2.840.113549.1.1.1"}),new G4]}),new _1({valueHex:t.marshal()})]}).toBER(),s=new Uint8Array(i,0,i.byteLength),a=Xu(RCt),o=await Sbe(xA,e,a,{c:AM,dkLen:SM}),c=Xu(16),l=await r.subtle.importKey("raw",o,"AES-CBC",!1,["encrypt"]),u=await r.subtle.encrypt({name:"AES-CBC",iv:c},l,s),f=new Mo({value:[new _1({valueHex:a}),new ws({value:AM}),new ws({value:SM}),new Mo({value:[new f1({value:"1.2.840.113549.2.11"}),new G4]})]}),h=new Mo({value:[new f1({value:"1.2.840.113549.1.5.13"}),new Mo({value:[new Mo({value:[new f1({value:"1.2.840.113549.1.5.12"}),f]}),new Mo({value:[new f1({value:"2.16.840.1.101.3.4.1.42"}),new _1({valueHex:c})]})]})]}),g=new Mo({value:[h,new _1({valueHex:u})]}).toBER(),p=new Uint8Array(g,0,g.byteLength);return["-----BEGIN ENCRYPTED PRIVATE KEY-----",...vt(p,"base64pad").split(/(.{64})/).filter(Boolean),"-----END ENCRYPTED PRIVATE KEY-----"].join(`
`)}async function BCt(t,e){const r=Kl.get();let n;if(t.includes("-----BEGIN ENCRYPTED PRIVATE KEY-----")){const i=pt(t.replace("-----BEGIN ENCRYPTED PRIVATE KEY-----","").replace("-----END ENCRYPTED PRIVATE KEY-----","").replace(/\n/g,"").trim(),"base64pad"),{result:s}=$3(i),{iv:a,salt:o,iterations:c,keySize:l,cipherText:u}=DCt(s),f=await Sbe(xA,e,o,{c,dkLen:l}),h=await r.subtle.importKey("raw",f,"AES-CBC",!1,["decrypt"]),d=U3(await r.subtle.decrypt({name:"AES-CBC",iv:a},h,u)),{result:g}=$3(d);n=cie(g)}else if(t.includes("-----BEGIN PRIVATE KEY-----")){const i=pt(t.replace("-----BEGIN PRIVATE KEY-----","").replace("-----END PRIVATE KEY-----","").replace(/\n/g,"").trim(),"base64pad"),{result:s}=$3(i);n=cie(s)}else throw new ye("Could not parse private key from PEM data","ERR_INVALID_PARAMETERS");return Kwe(n)}function DCt(t){const e=t.valueBlock.value[0];if(e.valueBlock.value[0].toString()!=="OBJECT IDENTIFIER : 1.2.840.113549.1.5.13")throw new ye("Only pkcs5PBES2 encrypted private keys are supported","ERR_INVALID_PARAMS");const n=e.valueBlock.value[1].valueBlock.value[0];if(n.valueBlock.value[0].toString()!=="OBJECT IDENTIFIER : 1.2.840.113549.1.5.12")throw new ye("Only pkcs5PBKDF2 key derivation functions are supported","ERR_INVALID_PARAMS");const s=n.valueBlock.value[1],a=U3(s.valueBlock.value[0].getValue());let o=AM,c=SM;if(s.valueBlock.value.length===3)o=Number(s.valueBlock.value[1].toBigInt()),c=Number(s.valueBlock.value[2].toBigInt());else if(s.valueBlock.value.length===2)throw new ye("Could not derive key size and iterations from PEM file - please use @libp2p/rsa to re-import your key","ERR_INVALID_PARAMS");const l=e.valueBlock.value[1].valueBlock.value[1],u=l.valueBlock.value[0].toString();if(u!=="OBJECT IDENTIFIER : 1.2.840.113549.3.7"){if(u!=="OBJECT IDENTIFIER : 1.3.14.3.2.7"){if(u!=="OBJECT IDENTIFIER : 2.16.840.1.101.3.4.1.2"){if(u!=="OBJECT IDENTIFIER : 2.16.840.1.101.3.4.1.22"){if(u!=="OBJECT IDENTIFIER : 2.16.840.1.101.3.4.1.42")throw new ye("Only AES-CBC encryption schemes are supported","ERR_INVALID_PARAMS")}}}}const f=U3(l.valueBlock.value[1].getValue());return{cipherText:U3(t.valueBlock.value[1].getValue()),salt:a,iterations:o,keySize:c,iv:f}}function cie(t){return U3(t.valueBlock.value[2].getValue())}function U3(t){return new Uint8Array(t,0,t.byteLength)}async function OCt(t){const e=await Kl.get().subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},!0,["sign","verify"]),r=await Wwe(e);return{privateKey:r[0],publicKey:r[1]}}async function Hwe(t){const r=[await Kl.get().subtle.importKey("jwk",t,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!0,["sign"]),await LCt(t)],n=await Wwe({privateKey:r[0],publicKey:r[1]});return{privateKey:n[0],publicKey:n[1]}}async function NCt(t,e){const r=await Kl.get().subtle.importKey("jwk",t,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["sign"]),n=await Kl.get().subtle.sign({name:"RSASSA-PKCS1-v1_5"},r,e instanceof Uint8Array?e:e.subarray());return new Uint8Array(n,0,n.byteLength)}async function MCt(t,e,r){const n=await Kl.get().subtle.importKey("jwk",t,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["verify"]);return Kl.get().subtle.verify({name:"RSASSA-PKCS1-v1_5"},n,e,r instanceof Uint8Array?r:r.subarray())}async function Wwe(t){if(t.privateKey==null||t.publicKey==null)throw new ye("Private and public key are required","ERR_INVALID_PARAMETERS");return Promise.all([Kl.get().subtle.exportKey("jwk",t.privateKey),Kl.get().subtle.exportKey("jwk",t.publicKey)])}async function LCt(t){return Kl.get().subtle.importKey("jwk",{kty:t.kty,n:t.n,e:t.e},{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!0,["verify"])}function pz(t){if(t.kty!=="RSA")throw new ye("invalid key type","ERR_INVALID_KEY_TYPE");if(t.n==null)throw new ye("invalid key modulus","ERR_INVALID_KEY_MODULUS");return pt(t.n,"base64url").length*8}const y8=8192;class gz{_key;constructor(e){this._key=e}verify(e,r){return MCt(this._key,r,e)}marshal(){return ICt(this._key)}get bytes(){return Sv.encode({Type:Ns.RSA,Data:this.marshal()}).subarray()}equals(e){return Kr(this.bytes,e.bytes)}hash(){const e=wn.digest(this.bytes);return mp(e)?e.then(({bytes:r})=>r):e.bytes}}class oT{_key;_publicKey;constructor(e,r){this._key=e,this._publicKey=r}genSecret(){return Xu(16)}sign(e){return NCt(this._key,e)}get public(){if(this._publicKey==null)throw new ye("public key not provided","ERR_PUBKEY_NOT_PROVIDED");return new gz(this._publicKey)}marshal(){return kCt(this._key)}get bytes(){return Av.encode({Type:Ns.RSA,Data:this.marshal()}).subarray()}equals(e){return Kr(this.bytes,e.bytes)}hash(){const e=wn.digest(this.bytes);return mp(e)?e.then(({bytes:r})=>r):e.bytes}async id(){const e=await this.public.hash();return vt(e,"base58btc")}async export(e,r="pkcs-8"){if(r==="pkcs-8")return PCt(this,e);if(r==="libp2p-key")return nz(this.bytes,e);throw new ye(`export format '${r}' is not supported`,"ERR_INVALID_EXPORT_FORMAT")}}async function Kwe(t){const e=TCt(t);if(pz(e)>y8)throw new ye("key size is too large","ERR_KEY_SIZE_TOO_LARGE");const r=await Hwe(e);return new oT(r.privateKey,r.publicKey)}function FCt(t){const e=CCt(t);if(pz(e)>y8)throw new ye("key size is too large","ERR_KEY_SIZE_TOO_LARGE");return new gz(e)}async function $Ct(t){if(pz(t)>y8)throw new ye("key size is too large","ERR_KEY_SIZE_TOO_LARGE");const e=await Hwe(t);return new oT(e.privateKey,e.publicKey)}async function UCt(t){if(t>y8)throw new ye("key size is too large","ERR_KEY_SIZE_TOO_LARGE");const e=await OCt(t);return new oT(e.privateKey,e.publicKey)}const VCt=Object.freeze(Object.defineProperty({__proto__:null,MAX_RSA_KEY_SIZE:y8,RsaPrivateKey:oT,RsaPublicKey:gz,fromJwk:$Ct,generateKeyPair:UCt,unmarshalRsaPrivateKey:Kwe,unmarshalRsaPublicKey:FCt},Symbol.toStringTag,{value:"Module"}));function jCt(){return ta.utils.randomPrivateKey()}function zCt(t,e){const r=wn.digest(e instanceof Uint8Array?e:e.subarray());if(mp(r))return r.then(({digest:n})=>ta.sign(n,t).toDERRawBytes()).catch(n=>{throw new ye(String(n),"ERR_INVALID_INPUT")});try{return ta.sign(r.digest,t).toDERRawBytes()}catch(n){throw new ye(String(n),"ERR_INVALID_INPUT")}}function qCt(t,e,r){const n=wn.digest(r instanceof Uint8Array?r:r.subarray());if(mp(n))return n.then(({digest:i})=>ta.verify(e,i,t)).catch(i=>{throw new ye(String(i),"ERR_INVALID_INPUT")});try{return ta.verify(e,n.digest,t)}catch(i){throw new ye(String(i),"ERR_INVALID_INPUT")}}function HCt(t){return ta.ProjectivePoint.fromHex(t).toRawBytes(!0)}function WCt(t){try{ta.getPublicKey(t,!0)}catch(e){throw new ye(String(e),"ERR_INVALID_PRIVATE_KEY")}}function Gwe(t){try{ta.ProjectivePoint.fromHex(t)}catch(e){throw new ye(String(e),"ERR_INVALID_PUBLIC_KEY")}}function KCt(t){try{return ta.getPublicKey(t,!0)}catch(e){throw new ye(String(e),"ERR_INVALID_PRIVATE_KEY")}}class mz{_key;constructor(e){Gwe(e),this._key=e}verify(e,r){return qCt(this._key,r,e)}marshal(){return HCt(this._key)}get bytes(){return Sv.encode({Type:Ns.Secp256k1,Data:this.marshal()}).subarray()}equals(e){return Kr(this.bytes,e.bytes)}async hash(){const e=wn.digest(this.bytes);let r;return mp(e)?{bytes:r}=await e:r=e.bytes,r}}class yz{_key;_publicKey;constructor(e,r){this._key=e,this._publicKey=r??KCt(e),WCt(this._key),Gwe(this._publicKey)}sign(e){return zCt(this._key,e)}get public(){return new mz(this._publicKey)}marshal(){return this._key}get bytes(){return Av.encode({Type:Ns.Secp256k1,Data:this.marshal()}).subarray()}equals(e){return Kr(this.bytes,e.bytes)}hash(){const e=wn.digest(this.bytes);return mp(e)?e.then(({bytes:r})=>r):e.bytes}async id(){const e=await this.public.hash();return vt(e,"base58btc")}async export(e,r="libp2p-key"){if(r==="libp2p-key")return nz(this.bytes,e);throw new ye(`export format '${r}' is not supported`,"ERR_INVALID_EXPORT_FORMAT")}}function GCt(t){return new yz(t)}function YCt(t){return new mz(t)}async function XCt(){const t=jCt();return new yz(t)}const ZCt=Object.freeze(Object.defineProperty({__proto__:null,Secp256k1PrivateKey:yz,Secp256k1PublicKey:mz,generateKeyPair:XCt,unmarshalSecp256k1PrivateKey:GCt,unmarshalSecp256k1PublicKey:YCt},Symbol.toStringTag,{value:"Module"})),D1={rsa:VCt,ed25519:dCt,secp256k1:ZCt};function vz(t){const e=Object.keys(D1).join(" / ");return new ye(`invalid or unsupported key type ${t}. Must be ${e}`,"ERR_UNSUPPORTED_KEY_TYPE")}function bz(t){if(t=t.toLowerCase(),t==="rsa"||t==="ed25519"||t==="secp256k1")return D1[t];throw vz(t)}async function Ywe(t,e){return bz(t).generateKeyPair(e??2048)}function wm(t){const e=Sv.decode(t),r=e.Data??new Uint8Array;switch(e.Type){case Ns.RSA:return D1.rsa.unmarshalRsaPublicKey(r);case Ns.Ed25519:return D1.ed25519.unmarshalEd25519PublicKey(r);case Ns.Secp256k1:return D1.secp256k1.unmarshalSecp256k1PublicKey(r);default:throw vz(e.Type??"unknown")}}function wz(t,e){return e=(e??"rsa").toLowerCase(),bz(e),t.bytes}async function _m(t){const e=Av.decode(t),r=e.Data??new Uint8Array;switch(e.Type){case Ns.RSA:return D1.rsa.unmarshalRsaPrivateKey(r);case Ns.Ed25519:return D1.ed25519.unmarshalEd25519PrivateKey(r);case Ns.Secp256k1:return D1.secp256k1.unmarshalSecp256k1PrivateKey(r);default:throw vz(e.Type??"RSA")}}function JCt(t,e){return e=(e??"rsa").toLowerCase(),bz(e),t.bytes}async function ex(t,e){try{const r=await pCt(t,e);return await _m(r)}catch{}if(!t.includes("BEGIN"))throw new ye("Encrypted key was not a libp2p-key or a PEM file","ERR_INVALID_IMPORT_FORMAT");return BCt(t,e)}const Nw=new Uint32Array([1732584193,4023233417,2562383102,271733878,3285377520]),W0=new Uint32Array(80);class QCt extends AU{constructor(){super(64,20,8,!1),this.A=Nw[0]|0,this.B=Nw[1]|0,this.C=Nw[2]|0,this.D=Nw[3]|0,this.E=Nw[4]|0}get(){const{A:e,B:r,C:n,D:i,E:s}=this;return[e,r,n,i,s]}set(e,r,n,i,s){this.A=e|0,this.B=r|0,this.C=n|0,this.D=i|0,this.E=s|0}process(e,r){for(let c=0;c<16;c++,r+=4)W0[c]=e.getUint32(r,!1);for(let c=16;c<80;c++)W0[c]=WP(W0[c-3]^W0[c-8]^W0[c-14]^W0[c-16],1);let{A:n,B:i,C:s,D:a,E:o}=this;for(let c=0;c<80;c++){let l,u;c<20?(l=xpe(i,s,a),u=1518500249):c<40?(l=i^s^a,u=1859775393):c<60?(l=Epe(i,s,a),u=2400959708):(l=i^s^a,u=3395469782);const f=WP(n,5)+l+o+u+W0[c]|0;o=a,a=s,s=WP(i,30),i=n,n=f}n=n+this.A|0,i=i+this.B|0,s=s+this.C|0,a=a+this.D|0,o=o+this.E|0,this.set(n,i,s,a,o)}roundClean(){W0.fill(0)}destroy(){this.set(0,0,0,0,0),this.buffer.fill(0)}}const eIt=SU(()=>new QCt),lie={sha1:eIt,"sha2-256":w3,"sha2-512":xA};function uie(t,e,r,n,i){if(i!=="sha1"&&i!=="sha2-256"&&i!=="sha2-512"){const o=Object.keys(lie).join(" / ");throw new ye(`Hash '${i}' is unknown or not supported. Must be ${o}`,"ERR_UNSUPPORTED_HASH_TYPE")}const s=lie[i],a=gCt(s,t,e,{c:r,dkLen:n});return Sc.encode(a).substring(1)}const tIt=Math.LN2*Math.LN2;let rIt=class{seeds;bits;buffer;constructor(e={}){e.seeds!=null?this.seeds=e.seeds:this.seeds=sIt(e.hashes??8),this.bits=e.bits??1024,this.buffer=li(Math.ceil(this.bits/8))}add(e){typeof e=="string"&&(e=pt(e));for(let r=0;r<this.seeds.length;r++){const i=$4.x86.hash32(e,this.seeds[r])%this.bits;this.setbit(i)}}has(e){typeof e=="string"&&(e=pt(e));for(let r=0;r<this.seeds.length;r++){const i=$4.x86.hash32(e,this.seeds[r])%this.bits;if(!this.getbit(i))return!1}return!0}clear(){this.buffer.fill(0)}setbit(e){let r=0,n=e;for(;n>7;)r++,n-=8;let i=this.buffer[r];i|=1<<n,this.buffer[r]=i}getbit(e){let r=0,n=e;for(;n>7;)r++,n-=8;return(this.buffer[r]&1<<n)!==0}};function nIt(t,e=.005){const r=iIt(t,e);return new rIt(r)}function iIt(t,e=.005){const r=Math.round(-1*t*Math.log(e)/tIt),n=Math.round(r/t*Math.LN2);return{bits:r,hashes:n}}function sIt(t){let e,r;const n=[];for(let i=0;i<t;i++)for(e=new Pn(Xu(4)),n[i]=e.getUint32(0,!0),r=0;r<i;r++)if(n[i]===n[r]){i--;break}return n}const Xwe=64;class vg{fp;h;seed;constructor(e,r,n,i=2){if(i>Xwe)throw new TypeError("Invalid Fingerprint Size");const s=r.hashV(e,n),a=li(i);for(let o=0;o<a.length;o++)a[o]=s[o];a.length===0&&(a[0]=7),this.fp=a,this.h=r,this.seed=n}hash(){return this.h.hash(this.fp,this.seed)}equals(e){return e?.fp instanceof Uint8Array?Kr(this.fp,e.fp):!1}}function w9(t,e){return Math.floor(Math.random()*(e-t))+t}class tx{contents;constructor(e){this.contents=new Array(e).fill(null)}has(e){if(!(e instanceof vg))throw new TypeError("Invalid Fingerprint");return this.contents.some(r=>e.equals(r))}add(e){if(!(e instanceof vg))throw new TypeError("Invalid Fingerprint");for(let r=0;r<this.contents.length;r++)if(this.contents[r]==null)return this.contents[r]=e,!0;return!0}swap(e){if(!(e instanceof vg))throw new TypeError("Invalid Fingerprint");const r=w9(0,this.contents.length-1),n=this.contents[r];return this.contents[r]=e,n}remove(e){if(!(e instanceof vg))throw new TypeError("Invalid Fingerprint");const r=this.contents.findIndex(n=>e.equals(n));return r>-1?(this.contents[r]=null,!0):!1}}const _z={32:16777619n,64:1099511628211n,128:309485009821345068724781371n,256:374144419156711147060143317175368453031918731002211n,512:35835915874844867368919076489095108449946327955754392558399825615420669938882575126094039892345713852759n,1024:5016456510113118655434598811035278955030765345404790744303017523831112055108147451509157692220295382716162651878526895249385292291816524375083746691371804094271873160484737966720260389217684476157468082573n},Zwe={32:2166136261n,64:14695981039346656037n,128:144066263297769815596495629667062367629n,256:100029257958052580907070968620625704837092796014241193945225284501741471925557n,512:9659303129496669498009435400716310466090418745672637896108374329434462657994582932197716438449813051892206539805784495328239340083876191928701583869517785n,1024:14197795064947621068722070641403218320880622795441933960878474914617582723252296732303717722150864096521202355549365628174669108571814760471015076148029755969804077320157692458563003215304957150157403644460363550505412711285966361610267868082893823963790439336411086884584107735010676915n},Jwe=new globalThis.TextEncoder;function aIt(t,e){const r=_z[e];let n=Zwe[e];for(let i=0;i<t.length;i++)n^=BigInt(t[i]),n=BigInt.asUintN(e,n*r);return n}function oIt(t,e,r){if(r.length===0)throw new Error("The `utf8Buffer` option must have a length greater than zero");const n=_z[e];let i=Zwe[e],s=t;for(;s.length>0;){const a=Jwe.encodeInto(s,r);s=s.slice(a.read);for(let o=0;o<a.written;o++)i^=BigInt(r[o]),i=BigInt.asUintN(e,i*n)}return i}function cIt(t,{size:e=32,utf8Buffer:r}={}){if(!_z[e])throw new Error("The `size` option must be one of 32, 64, 128, 256, 512, or 1024");if(typeof t=="string"){if(r)return oIt(t,e,r);t=Jwe.encode(t)}return aIt(t,e)}const xz={hash:t=>Number(cIt(t,{size:32})),hashV:(t,e)=>lIt(xz.hash(t,e))};function lIt(t){let e=t.toString(16);return e.length%2===1&&(e=`0${e}`),pt(e,"base16")}const uIt=500;class fie{bucketSize;filterSize;fingerprintSize;buckets;count;hash;seed;constructor(e){this.filterSize=e.filterSize,this.bucketSize=e.bucketSize??4,this.fingerprintSize=e.fingerprintSize??2,this.count=0,this.buckets=[],this.hash=e.hash??xz,this.seed=e.seed??w9(0,Math.pow(2,10))}add(e){typeof e=="string"&&(e=pt(e));const r=new vg(e,this.hash,this.seed,this.fingerprintSize),n=this.hash.hash(e,this.seed)%this.filterSize,i=(n^r.hash())%this.filterSize;if(this.buckets[n]==null&&(this.buckets[n]=new tx(this.bucketSize)),this.buckets[i]==null&&(this.buckets[i]=new tx(this.bucketSize)),this.buckets[n].add(r)||this.buckets[i].add(r))return this.count++,!0;const s=[n,i];let a=s[w9(0,s.length-1)];this.buckets[a]==null&&(this.buckets[a]=new tx(this.bucketSize));for(let o=0;o<uIt;o++){const c=this.buckets[a].swap(r);if(c!=null&&(a=(a^c.hash())%this.filterSize,this.buckets[a]==null&&(this.buckets[a]=new tx(this.bucketSize)),this.buckets[a].add(c)))return this.count++,!0}return!1}has(e){typeof e=="string"&&(e=pt(e));const r=new vg(e,this.hash,this.seed,this.fingerprintSize),n=this.hash.hash(e,this.seed)%this.filterSize,i=this.buckets[n]?.has(r)??!1;if(i)return i;const s=(n^r.hash())%this.filterSize;return this.buckets[s]?.has(r)??!1}remove(e){typeof e=="string"&&(e=pt(e));const r=new vg(e,this.hash,this.seed,this.fingerprintSize),n=this.hash.hash(e,this.seed)%this.filterSize,i=this.buckets[n]?.remove(r)??!1;if(i)return this.count--,i;const s=(n^r.hash())%this.filterSize,a=this.buckets[s]?.remove(r)??!1;return a&&this.count--,a}get reliable(){return Math.floor(100*(this.count/this.filterSize))<=90}}const fIt={1:.5,2:.84,4:.95,8:.98};function hIt(t=.001){return t>.002?2:t>1e-5?4:8}function dIt(t,e=.001){const r=hIt(e),n=fIt[r],i=Math.round(t/n),s=Math.min(Math.ceil(Math.log2(1/e)+Math.log2(2*r)),Xwe);return{filterSize:i,bucketSize:r,fingerprintSize:s}}class pIt{filterSize;bucketSize;fingerprintSize;scale;filterSeries;hash;seed;constructor(e){this.bucketSize=e.bucketSize??4,this.filterSize=e.filterSize??(1<<18)/this.bucketSize,this.fingerprintSize=e.fingerprintSize??2,this.scale=e.scale??2,this.hash=e.hash??xz,this.seed=e.seed??w9(0,Math.pow(2,10)),this.filterSeries=[new fie({filterSize:this.filterSize,bucketSize:this.bucketSize,fingerprintSize:this.fingerprintSize,hash:this.hash,seed:this.seed})]}add(e){if(typeof e=="string"&&(e=pt(e)),this.has(e))return!0;let r=this.filterSeries.find(n=>n.reliable);if(r==null){const n=this.filterSize*Math.pow(this.scale,this.filterSeries.length);r=new fie({filterSize:n,bucketSize:this.bucketSize,fingerprintSize:this.fingerprintSize,hash:this.hash,seed:this.seed}),this.filterSeries.push(r)}return r.add(e)}has(e){typeof e=="string"&&(e=pt(e));for(let r=0;r<this.filterSeries.length;r++)if(this.filterSeries[r].has(e))return!0;return!1}remove(e){typeof e=="string"&&(e=pt(e));for(let r=0;r<this.filterSeries.length;r++)if(this.filterSeries[r].remove(e))return!0;return!1}get count(){return this.filterSeries.reduce((e,r)=>e+r.count,0)}}function Qwe(t,e=.001,r){return new pIt({...dIt(t,e)})}class gIt{filter;constructor(e,r){this.filter=Qwe(e,r)}has(e){return this.filter.has(e.toBytes())}add(e){this.filter.add(e.toBytes())}remove(e){this.filter.remove?.(e.toBytes())}}function mIt(t,e=.001){return new gIt(t,e)}class yIt extends y0{metric;constructor(e){super();const{name:r,metrics:n}=e;this.metric=n.registerMetric(r),this.updateComponentMetric()}set(e,r){return super.set(e,r),this.updateComponentMetric(),this}delete(e){const r=super.delete(e);return this.updateComponentMetric(),r}clear(){super.clear(),this.updateComponentMetric()}updateComponentMetric(){this.metric.update(this.size)}}function e3e(t){const{name:e,metrics:r}=t;let n;return r!=null?n=new yIt({name:e,metrics:r}):n=new y0,n}class e3{full;pendingBytes;wantlist;blocks;blockPresences;constructor(e=!1,r=0){this.full=e,this.wantlist=new Map,this.blocks=new Map,this.blockPresences=new Map,this.pendingBytes=0}addWantlistEntry(e,r){const n=Sc.encode(e.multihash.bytes);this.wantlist.set(n,r)}addBlockPresence(e,r){const n=Sc.encode(e.multihash.bytes);this.blockPresences.set(n,r)}addBlock(e,r){const n=Sc.encode(e.multihash.bytes);this.blocks.set(n,r)}}function vIt(t){let e=new Uint8Array(t.reduce((n,i)=>n+Ei(i),0)),r=0;for(const n of t)e=Go(n,e,r),r+=Ei(n);return e}function hie(t){return vIt([t.version,t.code,t.multihash.code,t.multihash.digest.byteLength])}class bIt{peerId;blockstore;network;wants;exchangeCount;bytesSent;bytesReceived;lastExchange;maxSizeReplaceHasWithBlock;log;constructor(e,r){this.peerId=e.peerId,this.blockstore=e.blockstore,this.network=e.network,this.wants=new Map,this.log=e.logger.forComponent(`helia:bitswap:ledger:${e.peerId}`),this.exchangeCount=0,this.bytesSent=0,this.bytesReceived=0,this.maxSizeReplaceHasWithBlock=r.maxSizeReplaceHasWithBlock??ykt}sentBytes(e){this.exchangeCount++,this.lastExchange=new Date().getTime(),this.bytesSent+=e}receivedBytes(e){this.exchangeCount++,this.lastExchange=new Date().getTime(),this.bytesReceived+=e}debtRatio(){return this.bytesSent/(this.bytesReceived+1)}async sendBlocksToPeer(e){const r=new e3,n=new Set;for(const[i,s]of this.wants.entries())try{const a=await this.blockstore.get(s.cid,e);s.wantType===la.WantHave?a.byteLength<this.maxSizeReplaceHasWithBlock?(this.log("sending have and block for %c",s.cid),n.add(i),r.addBlock(s.cid,{data:a,prefix:hie(s.cid)})):(this.log("sending have for %c",s.cid),r.addBlockPresence(s.cid,{cid:s.cid.bytes,type:rh.HaveBlock})):(this.log("sending block for %c",s.cid),n.add(i),r.addBlock(s.cid,{data:a,prefix:hie(s.cid)}))}catch(a){if(a.code!=="ERR_NOT_FOUND")throw a;if(this.log("do not have block for %c",s.cid),!s.sendDontHave||s.sentDontHave===!0)continue;s.sentDontHave=!0,r.addBlockPresence(s.cid,{cid:s.cid.bytes,type:rh.DontHaveBlock})}if(r.blocks.size>0||r.blockPresences.size>0){this.log("sending message"),await this.network.sendMessage(this.peerId,r,e),this.log("sent message"),this.sentBytes([...r.blocks.values()].reduce((i,s)=>i+s.data.byteLength,0));for(const i of n)this.wants.delete(i)}}}class wIt{blockstore;network;ledgerMap;maxSizeReplaceHasWithBlock;log;logger;constructor(e,r={}){this.blockstore=e.blockstore,this.network=e.network,this.maxSizeReplaceHasWithBlock=r.maxSizeReplaceHasWithBlock,this.log=e.logger.forComponent("helia:bitswap:peer-want-lists"),this.logger=e.logger,this.ledgerMap=e3e({name:"helia_bitswap_ledger_map",metrics:e.metrics}),this.network.addEventListener("bitswap:message",n=>{this.receiveMessage(n.detail.peer,n.detail.message).catch(i=>{this.log.error("error receiving bitswap message from %p",n.detail.peer,i)})}),this.network.addEventListener("peer:disconnected",n=>{this.peerDisconnected(n.detail)})}ledgerForPeer(e){const r=this.ledgerMap.get(e);if(r!=null)return{peer:r.peerId,value:r.debtRatio(),sent:r.bytesSent,received:r.bytesReceived,exchanged:r.exchangeCount}}wantListForPeer(e){const r=this.ledgerMap.get(e);if(r!=null)return[...r.wants.values()]}peers(){return Array.from(this.ledgerMap.values()).map(e=>e.peerId)}async receiveMessage(e,r){let n=this.ledgerMap.get(e);if(n==null&&(n=new bIt({peerId:e,blockstore:this.blockstore,network:this.network,logger:this.logger},{maxSizeReplaceHasWithBlock:this.maxSizeReplaceHasWithBlock}),this.ledgerMap.set(e,n)),n.receivedBytes(r.blocks?.reduce((i,s)=>i+s.data.byteLength,0)??0),r.wantlist!=null){r.wantlist.full===!0&&n.wants.clear();for(const i of r.wantlist.entries){const s=Dt.decode(i.cid),a=vt(s.multihash.bytes,"base64");i.cancel===!0?(this.log("peer %p cancelled want of block for %c",e,s),n.wants.delete(a)):(i.wantType===la.WantHave?this.log("peer %p wanted block presence for %c",e,s):this.log("peer %p wanted block for %c",e,s),n.wants.set(a,{cid:s,priority:i.priority,wantType:i.wantType??la.WantBlock,sendDontHave:i.sendDontHave??!1}))}}this.log("send blocks to peer"),await n.sendBlocksToPeer()}async receivedBlock(e,r){const n=vt(e.multihash.bytes,"base64"),i=[];for(const s of this.ledgerMap.values())s.wants.has(n)&&i.push(s);await Promise.all(i.map(async s=>s.sendBlocksToPeer(r)))}peerDisconnected(e){this.ledgerMap.delete(e)}}function t3e(t){const e=[W1.A];return t==null?e:Array.isArray(t)?t.length===0?e:t:[t]}const r3e=60;function n3e(t){return{Status:t.Status??0,TC:t.TC??t.flag_tc??!1,RD:t.RD??t.flag_rd??!1,RA:t.RA??t.flag_ra??!1,AD:t.AD??t.flag_ad??!1,CD:t.CD??t.flag_cd??!1,Question:(t.Question??t.questions??[]).map(e=>({name:e.name,type:W1[e.type]})),Answer:(t.Answer??t.answers??[]).map(e=>({name:e.name,type:W1[e.type],TTL:e.TTL??e.ttl??r3e,data:e.data instanceof Uint8Array?vt(e.data):e.data}))}}const _It=4;function die(t,e={}){const r=new sh({concurrency:e.queryConcurrency??_It});return async(n,i={})=>{const s=new URLSearchParams;s.set("name",n),t3e(i.types).forEach(o=>{s.append("type",W1[o])}),i.onProgress?.(new Bt("dns:query",{detail:n}));const a=await r.add(async()=>{const o=await fetch(`${t}?${s}`,{headers:{accept:"application/dns-json"},signal:i?.signal});if(o.status!==200)throw new Error(`Unexpected HTTP status: ${o.status} - ${o.statusText}`);const c=n3e(await o.json());return i.onProgress?.(new Bt("dns:response",{detail:c})),c},{signal:i.signal});if(a==null)throw new Error("No DNS response received");return a}}function xIt(){return[die("https://cloudflare-dns.com/dns-query"),die("https://dns.google/resolve")]}var EIt=function(t){if(!t)throw Error("hashlru must have a max value, of type number, greater than 0");var e=0,r=Object.create(null),n=Object.create(null);function i(s,a){r[s]=a,e++,e>=t&&(e=0,n=r,r=Object.create(null))}return{has:function(s){return r[s]!==void 0||n[s]!==void 0},remove:function(s){r[s]!==void 0&&(r[s]=void 0),n[s]!==void 0&&(n[s]=void 0)},get:function(s){var a=r[s];if(a!==void 0)return a;if((a=n[s])!==void 0)return i(s,a),a},set:function(s,a){r[s]!==void 0?r[s]=a:i(s,a)},clear:function(){r=Object.create(null),n=Object.create(null)}}};const i3e=si(EIt);class SIt{lru;constructor(e){this.lru=i3e(e)}get(e,r){let n=!0;const i=[];for(const s of r){const a=this.getAnswers(e,s);if(a.length===0){n=!1;break}i.push(...a)}if(n)return n3e({answers:i})}getAnswers(e,r){const n=`${e.toLowerCase()}-${r}`,i=this.lru.get(n);if(i!=null){const s=i.filter(a=>a.expires>Date.now()).map(({expires:a,value:o})=>({...o,TTL:Math.round((a-Date.now())/1e3),type:W1[o.type]}));return s.length===0&&this.lru.remove(n),s}return[]}add(e,r){const n=`${e.toLowerCase()}-${r.type}`,i=this.lru.get(n)??[];i.push({expires:Date.now()+(r.TTL??r3e)*1e3,value:r}),this.lru.set(n,i)}remove(e,r){const n=`${e.toLowerCase()}-${r}`;this.lru.remove(n)}clear(){this.lru.clear()}}function AIt(t){return new SIt(t)}const TIt=1e3;let kIt=class{resolvers;cache;constructor(e){this.resolvers={},this.cache=AIt(e.cacheSize??TIt),Object.entries(e.resolvers??{}).forEach(([r,n])=>{Array.isArray(n)||(n=[n]),r.endsWith(".")||(r=`${r}.`),this.resolvers[r]=n}),this.resolvers["."]==null&&(this.resolvers["."]=xIt())}async query(e,r={}){const n=t3e(r.types),i=r.cached!==!1?this.cache.get(e,n):void 0;if(i!=null)return r.onProgress?.(new Bt("dns:cache",{detail:i})),i;const s=`${e.split(".").pop()}.`,a=(this.resolvers[s]??this.resolvers["."]).sort(()=>Math.random()>.5?-1:1),o=[];for(const c of a){if(r.signal?.aborted===!0)break;try{const l=await c(e,{...r,types:n});for(const u of l.Answer)this.cache.add(e,u);return l}catch(l){o.push(l),r.onProgress?.(new Bt("dns:error",{detail:l}))}}throw o.length===1?o[0]:new AggregateError(o,`DNS lookup of ${e} ${n} failed`)}};var W1;(function(t){t[t.A=1]="A",t[t.CNAME=5]="CNAME",t[t.TXT=16]="TXT",t[t.AAAA=28]="AAAA"})(W1||(W1={}));function s3e(t={}){return new kIt(t)}const sd="/",a3e=new TextEncoder().encode(sd),rx=a3e[0];class Ni{_buf;constructor(e,r){if(typeof e=="string")this._buf=pt(e);else if(e instanceof Uint8Array)this._buf=e;else throw new Error("Invalid key, should be String of Uint8Array");if(r==null&&(r=!0),r&&this.clean(),this._buf.byteLength===0||this._buf[0]!==rx)throw new Error("Invalid key")}toString(e="utf8"){return vt(this._buf,e)}uint8Array(){return this._buf}get[Symbol.toStringTag](){return`Key(${this.toString()})`}static withNamespaces(e){return new Ni(e.join(sd))}static random(){return new Ni(Math.random().toString().substring(2))}static asKey(e){return e instanceof Uint8Array||typeof e=="string"?new Ni(e):typeof e.uint8Array=="function"?new Ni(e.uint8Array()):null}clean(){if((this._buf==null||this._buf.byteLength===0)&&(this._buf=a3e),this._buf[0]!==rx){const e=new Uint8Array(this._buf.byteLength+1);e.fill(rx,0,1),e.set(this._buf,1),this._buf=e}for(;this._buf.byteLength>1&&this._buf[this._buf.byteLength-1]===rx;)this._buf=this._buf.subarray(0,-1)}less(e){const r=this.list(),n=e.list();for(let i=0;i<r.length;i++){if(n.length<i+1)return!1;const s=r[i],a=n[i];if(s<a)return!0;if(s>a)return!1}return r.length<n.length}reverse(){return Ni.withNamespaces(this.list().slice().reverse())}namespaces(){return this.list()}baseNamespace(){const e=this.namespaces();return e[e.length-1]}list(){return this.toString().split(sd).slice(1)}type(){return CIt(this.baseNamespace())}name(){return IIt(this.baseNamespace())}instance(e){return new Ni(this.toString()+":"+e)}path(){let e=this.parent().toString();return e.endsWith(sd)||(e+=sd),e+=this.type(),new Ni(e)}parent(){const e=this.list();return e.length===1?new Ni(sd):new Ni(e.slice(0,-1).join(sd))}child(e){return this.toString()===sd?e:e.toString()===sd?this:new Ni(this.toString()+e.toString(),!1)}isAncestorOf(e){return e.toString()===this.toString()?!1:e.toString().startsWith(this.toString())}isDecendantOf(e){return e.toString()===this.toString()?!1:this.toString().startsWith(e.toString())}isTopLevel(){return this.list().length===1}concat(...e){return Ni.withNamespaces([...this.namespaces(),...RIt(e.map(r=>r.namespaces()))])}}function CIt(t){const e=t.split(":");return e.length<2?"":e.slice(0,-1).join(":")}function IIt(t){const e=t.split(":");return e[e.length-1]}function RIt(t){return[].concat(...t)}const o3e="/pin/",pie="/pinned-block/",TM=Md,gie=1;function mie(t){return t.version===0&&(t=t.toV1()),new Ni(`${o3e}${t.toString(TM)}`)}class PIt{datastore;blockstore;dagWalkers;constructor(e,r,n){this.datastore=e,this.blockstore=r,this.dagWalkers=n}async*add(e,r={}){const n=mie(e);if(await this.datastore.has(n))throw new Error("Already pinned");const i=Math.round(r.depth??1/0);if(i<0)throw new Error("Depth must be greater than or equal to 0");const s=new Ev({concurrency:gie});for await(const o of this.#e(e,s,{...r,depth:i}))await this.#t(o,c=>c.pinnedBy.find(l=>Kr(l,e.bytes))!=null?!1:(c.pinCount++,c.pinnedBy.push(e.bytes),!0),r),yield o;const a={depth:i,metadata:r.metadata??{}};await this.datastore.put(n,QO(a),r)}async*#e(e,r,n){if(n.depth===-1)return;const i=this.dagWalkers[e.code];if(i==null)throw new Error(`No dag walker found for cid codec ${e.code}`);const s=await this.blockstore.get(e,n);yield e;for await(const a of i.walk(s))yield*await r.add(async()=>this.#e(a,r,{...n,depth:n.depth-1}))}async#t(e,r,n){const i=new Ni(`${pie}${TM.encode(e.multihash.bytes)}`);let s={pinCount:0,pinnedBy:[]};try{s=kg(await this.datastore.get(i,n))}catch(o){if(o.code!=="ERR_NOT_FOUND")throw o}if(r(s)){if(s.pinCount===0&&await this.datastore.has(i)){await this.datastore.delete(i);return}await this.datastore.put(i,QO(s),n),n.onProgress?.(new Bt("helia:pin:add",e))}}async*rm(e,r={}){const n=mie(e),i=await this.datastore.get(n,r),s=kg(i);await this.datastore.delete(n,r);const a=new Ev({concurrency:gie});for await(const o of this.#e(e,a,{...r,depth:s.depth}))await this.#t(o,c=>(c.pinCount--,c.pinnedBy=c.pinnedBy.filter(l=>Kr(l,e.bytes)),!0),{...r,depth:s.depth}),yield o}async*ls(e={}){for await(const{key:r,value:n}of this.datastore.query({prefix:o3e+(e.cid!=null?`${e.cid.toString(Md)}`:"")},e)){const i=Dt.parse(r.toString().substring(5),Md),s=kg(n);yield{cid:i,...s}}}async isPinned(e,r={}){const n=new Ni(`${pie}${TM.encode(e.multihash.bytes)}`);return this.datastore.has(n,r)}}const BIt=5;class DIt{log;routers;providerLookupConcurrency;constructor(e,r){this.log=e.logger.forComponent("helia:routing"),this.routers=r.routers??[],this.providerLookupConcurrency=r.providerLookupConcurrency??BIt}async start(){await hb(...this.routers)}async stop(){await db(...this.routers)}async*findProviders(e,r={}){if(this.routers.length===0)throw new ye("No content routers available","ERR_NO_ROUTERS_AVAILABLE");const n=new Pb({concurrency:this.providerLookupConcurrency});n.addEventListener("error",()=>{});for await(const i of T1(n.toGenerator(),...z2(this.routers,"findProviders").map(s=>s.findProviders(e,r))))if(i!=null){if(i.multiaddrs.length===0){if(n.find(i.id)!=null)continue;n.add(async()=>{try{const s=await this.findPeer(i.id,r);return s.multiaddrs.length===0?null:s}catch(s){return this.log.error("could not load multiaddrs for peer %p",i.id,s),null}},{peerId:i.id,signal:r.signal}).catch(s=>{this.log.error("could not load multiaddrs for peer %p",i.id,s)})}yield i}}async provide(e,r={}){if(this.routers.length===0)throw new ye("No content routers available","ERR_NO_ROUTERS_AVAILABLE");await Promise.all(z2(this.routers,"provide").map(async n=>{await n.provide(e,r)}))}async put(e,r,n){await Promise.all(z2(this.routers,"put").map(async i=>{await i.put(e,r,n)}))}async get(e,r){return Promise.any(z2(this.routers,"get").map(async n=>n.get(e,r)))}async findPeer(e,r){if(this.routers.length===0)throw new ye("No peer routers available","ERR_NO_ROUTERS_AVAILABLE");const n=this,i=T1(...z2(this.routers,"findPeer").map(s=>async function*(){try{yield await s.findPeer(e,r)}catch(a){n.log.error(a)}}()));for await(const s of i)if(s!=null)return s;throw new ye("Could not find peer in routing","ERR_NOT_FOUND")}async*getClosestPeers(e,r={}){if(this.routers.length===0)throw new ye("No peer routers available","ERR_NO_ROUTERS_AVAILABLE");for await(const n of T1(...z2(this.routers,"getClosestPeers").map(i=>i.getClosestPeers(e,r))))n!=null&&(yield n)}}function z2(t,e){return t.filter(r=>r[e]!=null)}const O1={},xm=t=>{t.addEventListener("message",e=>{xm.dispatchEvent("message",t,e)}),t.port!=null&&t.port.addEventListener("message",e=>{xm.dispatchEvent("message",t,e)})};xm.addEventListener=(t,e)=>{O1[t]==null&&(O1[t]=[]),O1[t].push(e)};xm.removeEventListener=(t,e)=>{O1[t]!=null&&(O1[t]=O1[t].filter(r=>r===e))};xm.dispatchEvent=function(t,e,r){O1[t]!=null&&O1[t].forEach(n=>n(e,r))};const yie="lock:worker:request-read",vie="lock:worker:release-read",bie="lock:master:grant-read",wie="lock:worker:request-write",_ie="lock:worker:release-write",xie="lock:master:grant-write",OIt=(t=21)=>Math.random().toString().substring(2),Eie=(t,e,r,n,i)=>(s,a)=>{if(a.data.type!==r)return;const o={type:a.data.type,name:a.data.name,identifier:a.data.identifier};t.dispatchEvent(new MessageEvent(e,{data:{name:o.name,handler:async()=>{s.postMessage({type:i,name:o.name,identifier:o.identifier}),await new Promise(c=>{const l=u=>{if(u==null||u.data==null)return;const f={type:u.data.type,name:u.data.name,identifier:u.data.identifier};f.type===n&&f.identifier===o.identifier&&(s.removeEventListener("message",l),c())};s.addEventListener("message",l)})}}}))},Sie=(t,e,r,n)=>async()=>{const i=OIt();return globalThis.postMessage({type:e,identifier:i,name:t}),new Promise(s=>{const a=o=>{if(o==null||o.data==null)return;const c={type:o.data.type,identifier:o.data.identifier};c.type===r&&c.identifier===i&&(globalThis.removeEventListener("message",a),s(()=>{globalThis.postMessage({type:n,identifier:i,name:t})}))};globalThis.addEventListener("message",a)})},NIt={singleProcess:!1},MIt=t=>{if(t=Object.assign({},NIt,t),!!globalThis.document||t.singleProcess){const r=new EventTarget;return xm.addEventListener("message",Eie(r,"requestReadLock",yie,vie,bie)),xm.addEventListener("message",Eie(r,"requestWriteLock",wie,_ie,xie)),r}return{isWorker:!0,readLock:r=>Sie(r,yie,bie,vie),writeLock:r=>Sie(r,wie,xie,_ie)}},jp={};let h1;async function VB(t,e){let r;const n=new Promise(i=>{r=i});return t.add(async()=>T6((async()=>{await new Promise(i=>{r(()=>{i()})})})(),{milliseconds:e.timeout})),n}const LIt=(t,e)=>{if(h1.isWorker===!0)return{readLock:h1.readLock(t,e),writeLock:h1.writeLock(t,e)};const r=new sh({concurrency:1});let n;return{async readLock(){if(n!=null)return VB(n,e);n=new sh({concurrency:e.concurrency,autoStart:!1});const i=n,s=VB(n,e);return r.add(async()=>{i.start(),await i.onIdle().then(()=>{n===i&&(n=null)})}),s},async writeLock(){return n=null,VB(r,e)}}},FIt={name:"lock",concurrency:1/0,timeout:846e5,singleProcess:!1};function c3e(t){const e=Object.assign({},FIt,t);return h1==null&&(h1=MIt(e),h1.isWorker!==!0&&(h1.addEventListener("requestReadLock",r=>{jp[r.data.name]!=null&&jp[r.data.name].readLock().then(async n=>r.data.handler().finally(()=>{n()}))}),h1.addEventListener("requestWriteLock",async r=>{jp[r.data.name]!=null&&jp[r.data.name].writeLock().then(async n=>r.data.handler().finally(()=>{n()}))}))),jp[e.name]==null&&(jp[e.name]=LIt(e.name,e)),jp[e.name]}class $It{lock;child;pins;started;constructor(e,r,n={}){this.child=e,this.pins=r,this.lock=c3e({singleProcess:n.holdGcLock}),this.started=!1}isStarted(){return this.started}async start(){await hb(this.child),this.started=!0}async stop(){await db(this.child),this.started=!1}unwrap(){return this.child}async put(e,r,n={}){n?.signal?.throwIfAborted();const i=await this.lock.readLock();try{return await this.child.put(e,r,n)}finally{i()}}async*putMany(e,r={}){r?.signal?.throwIfAborted();const n=await this.lock.readLock();try{yield*this.child.putMany(e,r)}finally{n()}}async get(e,r={}){r?.signal?.throwIfAborted();const n=await this.lock.readLock();try{return await this.child.get(e,r)}finally{n()}}async*getMany(e,r={}){r?.signal?.throwIfAborted();const n=await this.lock.readLock();try{yield*this.child.getMany(e,r)}finally{n()}}async delete(e,r={}){r?.signal?.throwIfAborted();const n=await this.lock.writeLock();try{if(await this.pins.isPinned(e))throw new Error("CID was pinned");await this.child.delete(e,r)}finally{n()}}async*deleteMany(e,r={}){r?.signal?.throwIfAborted();const n=await this.lock.writeLock();try{const i=this;yield*this.child.deleteMany(async function*(){for await(const s of e){if(await i.pins.isPinned(s))throw new Error("CID was pinned");yield s}}(),r)}finally{n()}}async has(e,r={}){r?.signal?.throwIfAborted();const n=await this.lock.readLock();try{return await this.child.has(e,r)}finally{n()}}async*getAll(e={}){e?.signal?.throwIfAborted();const r=await this.lock.readLock();try{yield*this.child.getAll(e)}finally{r()}}createSession(e,r){return r?.signal?.throwIfAborted(),this.child.createSession(e,r)}}const UIt={codec:kh,*walk(t){yield*eu(t).Links.map(r=>r.Hash)}},VIt={codec:Wu,*walk(){}},l3e=42,jIt={codec:L$,*walk(t){const e=[],r=[];r[l3e]=n=>{if(n[0]!==0)throw new Error("Invalid CID for CBOR tag 42; expected leading 0x00");const i=Dt.decode(n.subarray(1));return e.push(i),i},kg(t,{tags:r}),yield*e}};class zIt extends Mj{tokenBuffer;constructor(e,r){super(e,r),this.tokenBuffer=[]}done(){return this.tokenBuffer.length===0&&super.done()}_next(){return this.tokenBuffer.length>0?this.tokenBuffer.pop():super.next()}next(){const e=this._next();if(e.type===ze.map){const r=this._next();if(r.type===ze.string&&r.value==="/"){const n=this._next();if(n.type===ze.string){if(this._next().type!==ze.break)throw new Error("Invalid encoded CID form");return this.tokenBuffer.push(n),new kt(ze.tag,42,0)}if(n.type===ze.map){const i=this._next();if(i.type===ze.string&&i.value==="bytes"){const s=this._next();if(s.type===ze.string){for(let o=0;o<2;o++)if(this._next().type!==ze.break)throw new Error("Invalid encoded Bytes form");const a=Sc.decode(`m${s.value}`);return new kt(ze.bytes,a,s.value.length)}this.tokenBuffer.push(s)}this.tokenBuffer.push(i)}this.tokenBuffer.push(n)}this.tokenBuffer.push(r)}return e}}const qIt={codec:rve,*walk(t){const e=[],r=[];r[l3e]=n=>{const i=Dt.parse(n);return e.push(i),i},tve(t,{tags:r,tokenizer:new zIt(t,{tags:r,allowIndefinite:!0,allowUndefined:!0,allowNaN:!0,allowInfinity:!0,allowBigInt:!0,strict:!1,rejectDuplicateMapKeys:!1})}),yield*e}},HIt={codec:J0e,*walk(){}};function WIt(t=[]){const e={};return[UIt,VIt,jIt,qIt,HIt,...t].forEach(r=>{e[r.codec]=r}),e}const jB=new Ni("/version"),Aie=1;async function KIt(t){if(!await t.has(jB)){await t.put(jB,pt(`${Aie}`));return}const e=await t.get(jB),r=vt(e);if(parseInt(r,10)!==Aie)throw new Error("Unknown datastore version, a datastore migration may be required")}function GIt(t=[]){const e={};return[wn,mat,ah,...t].forEach(r=>{e[r.code]=r}),e}let u3e=class{has(e,r){return Promise.reject(new Error(".has is not implemented"))}put(e,r,n){return Promise.reject(new Error(".put is not implemented"))}async*putMany(e,r){for await(const{cid:n,block:i}of e)await this.put(n,i,r),yield n}get(e,r){return Promise.reject(new Error(".get is not implemented"))}async*getMany(e,r){for await(const n of e)yield{cid:n,block:await this.get(n,r)}}delete(e,r){return Promise.reject(new Error(".delete is not implemented"))}async*deleteMany(e,r){for await(const n of e)await this.delete(n,r),yield n}async*getAll(e){throw new Error(".getAll is not implemented")}};function Tie(t,e){for(const r in e)Object.defineProperty(t,r,{value:e[r],enumerable:!0,configurable:!0});return t}function YIt(t,e,r){if(!t||typeof t=="string")throw new TypeError("Please pass an Error to err-code");r||(r={}),typeof e=="object"&&(r=e,e=""),e&&(r.code=e);try{return Tie(t,r)}catch{r.message=t.message,r.stack=t.stack;const i=function(){};return i.prototype=Object.create(Object.getPrototypeOf(t)),Tie(new i,r)}}var XIt=YIt;const $i=si(XIt);function ZIt(t){return t=t??new Error("Open failed"),$i(t,"ERR_OPEN_FAILED")}function JIt(t){return t=t??new Error("Close failed"),$i(t,"ERR_CLOSE_FAILED")}function QIt(t){return t=t??new Error("Put failed"),$i(t,"ERR_PUT_FAILED")}function eRt(t){return t=t??new Error("Get failed"),$i(t,"ERR_GET_FAILED")}function tRt(t){return t=t??new Error("Delete failed"),$i(t,"ERR_DELETE_FAILED")}function rRt(t){return t=t??new Error("Has failed"),$i(t,"ERR_HAS_FAILED")}function f3e(t){return t=t??new Error("Not Found"),$i(t,"ERR_NOT_FOUND")}function nRt(t){return t=t??new Error("Aborted"),$i(t,"ERR_ABORTED")}const iRt=Object.freeze(Object.defineProperty({__proto__:null,abortedError:nRt,closeFailedError:JIt,deleteFailedError:tRt,getFailedError:eRt,hasFailedError:rRt,notFoundError:f3e,openFailedError:ZIt,putFailedError:QIt},Symbol.toStringTag,{value:"Module"}));class sRt extends u3e{data;constructor(){super(),this.data=new Map}put(e,r){return this.data.set(Ho.encode(e.multihash.bytes),r),e}get(e){const r=this.data.get(Ho.encode(e.multihash.bytes));if(r==null)throw f3e();return r}has(e){return this.data.has(Ho.encode(e.multihash.bytes))}async delete(e){this.data.delete(Ho.encode(e.multihash.bytes))}async*getAll(){for(const[e,r]of this.data.entries())yield{cid:Dt.createV1(Wu,c0(Ho.decode(e))),block:r}}}_o("blockstore:core:tiered");const aRt={...iRt},nx=0;class oRt extends u3e{child;constructor(e){super(),this.child=e}put(e,r){return e.multihash.code===nx||this.child==null?e:this.child.put(e,r)}get(e){if(e.multihash.code===nx)return e.multihash.digest;if(this.child==null)throw aRt.notFoundError();return this.child.get(e)}has(e){return e.multihash.code===nx?!0:this.child==null?!1:this.child.has(e)}delete(e){if(e.code!==nx&&this.child!=null)return this.child.delete(e)}getAll(e){return this.child!=null?this.child.getAll(e):[]}}function cRt(t){return t[Symbol.asyncIterator]!=null}function kie(t){return t?.then!=null}function kM(t,e){let r=0;if(cRt(t))return async function*(){for await(const c of t){const l=e(c,r++);kie(l)&&await l,yield c}}();const n=$j(t),{value:i,done:s}=n.next();if(s===!0)return function*(){}();if(typeof e(i,r++)?.then=="function")return async function*(){yield i;for await(const c of n){const l=e(c,r++);kie(l)&&await l,yield c}}();const o=e;return function*(){yield i;for(const c of n)o(c,r++),yield c}()}class h3e{child;hashers;log;logger;components;constructor(e){this.log=e.logger.forComponent("helia:networked-storage"),this.logger=e.logger,this.components=e,this.child=new oRt(e.blockstore),this.hashers=e.hashers??{}}async put(e,r,n={}){return await this.child.has(e,n)?(n.onProgress?.(new Bt("blocks:put:duplicate",e)),e):(n.onProgress?.(new Bt("blocks:put:providers:notify",e)),await Promise.all(this.components.blockBrokers.map(async i=>i.announce?.(e,r,n))),n.onProgress?.(new Bt("blocks:put:blockstore:put",e)),this.child.put(e,r,n))}async*putMany(e,r={}){const n=l1(e,async({cid:s})=>{const a=await this.child.has(s,r);return a&&r.onProgress?.(new Bt("blocks:put-many:duplicate",s)),!a}),i=kM(n,async({cid:s,block:a})=>{r.onProgress?.(new Bt("blocks:put-many:providers:notify",s)),await Promise.all(this.components.blockBrokers.map(async o=>o.announce?.(s,a,r)))});r.onProgress?.(new Bt("blocks:put-many:blockstore:put-many")),yield*this.child.putMany(i,r)}async get(e,r={}){if(r.offline!==!0&&!await this.child.has(e,r)){r.onProgress?.(new Bt("blocks:get:providers:get",e));const n=await Cie(e,this.components.blockBrokers,this.hashers[e.multihash.code],{...r,log:this.log});return r.onProgress?.(new Bt("blocks:get:blockstore:put",e)),await this.child.put(e,n,r),r.onProgress?.(new Bt("blocks:get:providers:notify",e)),await Promise.all(this.components.blockBrokers.map(async i=>i.announce?.(e,n,r))),n}return r.onProgress?.(new Bt("blocks:get:blockstore:get",e)),this.child.get(e,r)}async*getMany(e,r={}){r.onProgress?.(new Bt("blocks:get-many:blockstore:get-many")),yield*this.child.getMany(kM(e,async n=>{if(r.offline!==!0&&!await this.child.has(n,r)){r.onProgress?.(new Bt("blocks:get-many:providers:get",n));const i=await Cie(n,this.components.blockBrokers,this.hashers[n.multihash.code],{...r,log:this.log});r.onProgress?.(new Bt("blocks:get-many:blockstore:put",n)),await this.child.put(n,i,r),r.onProgress?.(new Bt("blocks:get-many:providers:notify",n)),await Promise.all(this.components.blockBrokers.map(async s=>s.announce?.(n,i,r)))}}))}async delete(e,r={}){r.onProgress?.(new Bt("blocks:delete:blockstore:delete",e)),await this.child.delete(e,r)}async*deleteMany(e,r={}){r.onProgress?.(new Bt("blocks:delete-many:blockstore:delete-many")),yield*this.child.deleteMany(async function*(){for await(const n of e)yield n}(),r)}async has(e,r={}){return this.child.has(e,r)}async*getAll(e={}){e.onProgress?.(new Bt("blocks:get-all:blockstore:get-many")),yield*this.child.getAll(e)}}class lRt extends h3e{started;constructor(e){super(e),this.started=!1}isStarted(){return this.started}async start(){await hb(this.child,...this.components.blockBrokers),this.started=!0}async stop(){await db(this.child,...this.components.blockBrokers),this.started=!1}unwrap(){return this.child}createSession(e,r){const n=this.components.blockBrokers.map(i=>i.createSession==null?i:i.createSession(r));return new uRt({blockstore:this.child,blockBrokers:n,hashers:this.hashers,logger:this.logger},{root:e})}}class uRt extends h3e{closeController;constructor(e,r){super(e),this.closeController=new AbortController,Zt(1/0,this.closeController.signal),this.log=e.logger.forComponent(`helia:session-storage:${r.root}`)}close(){this.closeController.abort()}async put(e,r,n={}){const i=us([this.closeController.signal,n.signal]);Zt(1/0,i);try{return await super.put(e,r,{...n,signal:i})}finally{i.clear()}}async*putMany(e,r={}){const n=us([this.closeController.signal,r.signal]);Zt(1/0,n);try{yield*super.putMany(e,{...r,signal:n})}finally{n.clear()}}async get(e,r={}){const n=us([this.closeController.signal,r.signal]);Zt(1/0,n);try{return await super.get(e,{...r,signal:n})}finally{n.clear()}}async*getMany(e,r={}){const n=us([this.closeController.signal,r.signal]);Zt(1/0,n);try{yield*super.getMany(e,{...r,signal:n})}finally{n.clear()}}async delete(e,r={}){const n=us([this.closeController.signal,r.signal]);Zt(1/0,n);try{await super.delete(e,{...r,signal:n})}finally{n.clear()}}async*deleteMany(e,r={}){const n=us([this.closeController.signal,r.signal]);Zt(1/0,n);try{yield*super.deleteMany(e,{...r,signal:n})}finally{n.clear()}}async has(e,r={}){const n=us([this.closeController.signal,r.signal]);Zt(1/0,n);try{return await super.has(e,{...r,signal:n})}finally{n.clear()}}async*getAll(e={}){const r=us([this.closeController.signal,e.signal]);Zt(1/0,r);try{yield*super.getAll({...e,signal:r})}finally{r.clear()}}}function fRt(t){return typeof t.retrieve=="function"}const hRt=(t,e)=>{if(e==null)throw new ye(`No hasher configured for multihash code 0x${t.multihash.code.toString(16)}, please configure one. You can look up which hash this is at https://github.com/multiformats/multicodec/blob/master/table.csv`,"ERR_UNKNOWN_HASH_ALG");return async r=>{const n=await e.digest(r);if(!Kr(n.digest,t.multihash.digest))throw new ye("Hash of downloaded block did not match multihash from passed CID","ERR_HASH_MISMATCH")}};async function Cie(t,e,r,n){const i=hRt(t,r),s=new AbortController,a=us([s.signal,n.signal]);Zt(1/0,s.signal,a);const o=[];for(const c of e)fRt(c)&&o.push(c);try{return await Promise.any(o.map(async c=>{try{let l=!1;const u=await c.retrieve(t,{...n,signal:a,validateFn:async f=>{await i(f),l=!0}});return l||await i(u),u}catch(l){throw n.log.error("could not retrieve verified block for %c",t,l),l}}))}finally{s.abort(),a.clear()}}const dRt=1,pRt=5,gRt=Math.LN2*Math.LN2;class Ez{static create(e,r=.005){const n=mRt(e,r);return new Ez(n)}seeds;bits;buffer;constructor(e={}){e.seeds!=null?this.seeds=e.seeds:this.seeds=yRt(e.hashes??8),this.bits=e.bits??1024,this.buffer=li(Math.ceil(this.bits/8))}add(e){typeof e=="string"&&(e=pt(e));for(let r=0;r<this.seeds.length;r++){const i=$4.x86.hash32(e,this.seeds[r])%this.bits;this.setbit(i)}}has(e){typeof e=="string"&&(e=pt(e));for(let r=0;r<this.seeds.length;r++){const i=$4.x86.hash32(e,this.seeds[r])%this.bits;if(!this.getbit(i))return!1}return!0}clear(){this.buffer.fill(0)}setbit(e){let r=0,n=e;for(;n>7;)r++,n-=8;let i=this.buffer[r];i|=1<<n,this.buffer[r]=i}getbit(e){let r=0,n=e;for(;n>7;)r++,n-=8;return(this.buffer[r]&1<<n)!==0}}function mRt(t,e=.005){const r=Math.round(-1*t*Math.log(e)/gRt),n=Math.round(r/t*Math.LN2);return{bits:r,hashes:n}}function yRt(t){let e,r;const n=[];for(let i=0;i<t;i++)for(e=new Pn(Xu(4)),n[i]=e.getUint32(0,!0),r=0;r<i;r++)if(n[i]===n[r]){i--;break}return n}class d3e extends ea{intialPeerSearchComplete;requests;name;log;logger;minProviders;maxProviders;providers;evictionFilter;constructor(e,r){super(),Zt(1/0,this),this.name=r.name,this.logger=e.logger,this.log=e.logger.forComponent(this.name),this.requests=new Map,this.minProviders=r.minProviders??dRt,this.maxProviders=r.maxProviders??pRt,this.providers=[],this.evictionFilter=Ez.create(this.maxProviders)}async retrieve(e,r={}){const n=Sc.encode(e.multihash.bytes),i=this.requests.get(n);if(i!=null)return this.log("join existing request for %c",e),i;const s=fn();if(this.requests.set(n,s.promise),this.providers.length===0){let l=!1;this.intialPeerSearchComplete==null&&(l=!0,this.log=this.logger.forComponent(`${this.name}:${e}`),this.intialPeerSearchComplete=this.findProviders(e,this.minProviders,r)),await this.intialPeerSearchComplete,l&&this.log("found initial session peers for %c",e)}let a=!1;const o=new Ev({concurrency:this.maxProviders});o.addEventListener("error",()=>{}),o.addEventListener("failure",l=>{this.log.error("error querying provider %o, evicting from session",l.detail.job.options.provider,l.detail.error),this.evict(l.detail.job.options.provider)}),o.addEventListener("success",l=>{a=!0,s.resolve(l.detail.result)}),o.addEventListener("idle",()=>{a||r.signal?.aborted===!0||Promise.resolve().then(async()=>{this.log("no session peers had block for for %c, finding new providers",e);for(let l=0;l<this.minProviders&&this.providers.length!==0;l++){const u=this.providers[Math.floor(Math.random()*this.providers.length)];this.evict(u)}await this.findProviders(e,this.minProviders,r),this.log("found new providers re-retrieving %c",e),this.requests.delete(n),s.resolve(await this.retrieve(e,r))}).catch(l=>{this.log.error("could not find new providers for %c",e,l),s.reject(l)})});const c=l=>{o.add(async()=>this.queryProvider(e,l.detail,r),{provider:l.detail}).catch(u=>{r.signal?.aborted!==!0&&this.log.error("error retrieving session block for %c",e,u)})};this.addEventListener("provider",c),Promise.all([...this.providers].map(async l=>o.add(async()=>this.queryProvider(e,l,r),{provider:l}))).catch(l=>{r.signal?.aborted!==!0&&this.log.error("error retrieving session block for %c",e,l)});try{return await s.promise}finally{this.removeEventListener("provider",c),o.clear(),this.requests.delete(n)}}evict(e){this.evictionFilter.add(this.toEvictionKey(e));const r=this.providers.findIndex(n=>this.equals(n,e));r!==-1&&this.providers.splice(r,1)}isEvicted(e){return this.evictionFilter.has(this.toEvictionKey(e))}hasProvider(e){return!!(this.providers.find(r=>this.equals(r,e))!=null||this.isEvicted(e))}async findProviders(e,r,n){const i=fn();let s=0;return Promise.resolve().then(async()=>{this.log("finding %d-%d new provider(s) for %c",r,this.maxProviders,e);for await(const a of this.findNewProviders(e,n)){if(s===this.maxProviders||n.signal?.aborted===!0)break;if(!this.hasProvider(a)&&(this.log("found %d/%d new providers",s,this.maxProviders),this.providers.push(a),this.safeDispatchEvent("provider",{detail:a}),s++,s===r&&(this.log("session is ready"),i.resolve()),this.providers.length===this.maxProviders)){this.log("found max session peers",s);break}}if(this.log("found %d/%d new session peers",s,this.maxProviders),s<r)throw new ye(`Found ${s} of ${r} ${this.name} providers for ${e}`,"ERR_INSUFFICIENT_PROVIDERS_FOUND")}).catch(a=>{this.log.error("error searching routing for potential session peers for %c",e,a.errors??a),i.reject(a)}),i.promise}}class vRt{blockstore;datastore;pins;logger;routing;dagWalkers;hashers;dns;metrics;log;constructor(e){this.logger=e.logger??tT(),this.log=this.logger.forComponent("helia"),this.hashers=GIt(e.hashers),this.dagWalkers=WIt(e.dagWalkers),this.dns=e.dns??s3e(),this.metrics=e.metrics;const r={blockstore:e.blockstore,datastore:e.datastore,hashers:this.hashers,dagWalkers:this.dagWalkers,logger:this.logger,blockBrokers:[],dns:this.dns,metrics:this.metrics,...e.components??{}};this.routing=r.routing=new DIt(r,{routers:(e.routers??[]).flatMap(i=>{const s=[i];return i[ev]!=null&&s.push(i[ev]),i[tv]!=null&&s.push(i[tv]),s}),providerLookupConcurrency:e.providerLookupConcurrency});const n=new lRt(r);this.pins=new PIt(e.datastore,n,this.dagWalkers),this.blockstore=new $It(n,this.pins,{holdGcLock:e.holdGcLock??!0}),this.datastore=e.datastore,r.blockBrokers=e.blockBrokers.map(i=>i(r))}async start(){await KIt(this.datastore),await hb(this.blockstore,this.datastore,this.routing)}async stop(){await db(this.blockstore,this.datastore,this.routing)}async gc(e={}){const r=await this.blockstore.lock.writeLock();try{const n=this,i=this.blockstore.unwrap();this.log("gc start"),await $1(i.deleteMany(async function*(){for await(const{cid:s}of i.getAll())try{if(await n.pins.isPinned(s,e))continue;yield s,e.onProgress?.(new Bt("helia:gc:deleted",s))}catch(a){n.log.error("Error during gc",a),e.onProgress?.(new Bt("helia:gc:error",a))}}()))}finally{r()}this.log("gc finished")}}class bRt extends d3e{wantList;network;constructor(e,r){super(e,{...r,name:"helia:bitswap:session"}),this.wantList=e.wantList,this.network=e.network}async queryProvider(e,r,n){this.log("sending WANT-BLOCK for %c to %p",e,r);const i=await this.wantList.wantSessionBlock(e,r,n);if(this.log("%p %s %c",r,i.has?"has":"does not have",e),i.has&&i.block!=null)return i.block;throw new Error("Provider did not have block")}async*findNewProviders(e,r={}){for await(const n of this.network.findProviders(e,r))yield n.id}toEvictionKey(e){return e.toBytes()}equals(e,r){return e.equals(r)}}function wRt(t,e){return new bRt(t,e)}class _Rt{blocksReceived;duplicateBlocksReceived;dataReceived;duplicateDataReceived;constructor(e){this.blocksReceived=e.metrics?.registerMetricGroup("helia_bitswap_received_blocks"),this.duplicateBlocksReceived=e.metrics?.registerMetricGroup("helia_bitswap_duplicate_received_blocks"),this.dataReceived=e.metrics?.registerMetricGroup("helia_bitswap_data_received_bytes"),this.duplicateDataReceived=e.metrics?.registerMetricGroup("helia_bitswap_duplicate_data_received_bytes")}updateBlocksReceived(e=1,r){const n={global:e};r!=null&&(n[r.toString()]=e),this.blocksReceived?.increment(n)}updateDuplicateBlocksReceived(e=1,r){const n={global:e};r!=null&&(n[r.toString()]=e),this.duplicateBlocksReceived?.increment(n)}updateDataReceived(e,r){const n={global:e};r!=null&&(n[r.toString()]=e),this.dataReceived?.increment(n)}updateDuplicateDataReceived(e,r){const n={global:e};r!=null&&(n[r.toString()]=e),this.duplicateDataReceived?.increment(n)}}class xRt extends Map{metric;constructor(e){super();const{name:r,metrics:n}=e;this.metric=n.registerMetric(r),this.updateComponentMetric()}set(e,r){return super.set(e,r),this.updateComponentMetric(),this}delete(e){const r=super.delete(e);return this.updateComponentMetric(),r}clear(){super.clear(),this.updateComponentMetric()}updateComponentMetric(){this.metric.update(this.size)}}function p3e(t){const{name:e,metrics:r}=t;let n;return r!=null?n=new xRt({name:e,metrics:r}):n=new Map,n}function ERt(t){if(!(t instanceof Uint8Array))throw new Error("arg needs to be a Uint8Array");const e=[];for(;t.length>0;){const r=u0(t);e.push(r),t=t.slice(Ei(r))}return e}class SRt extends ea{peers;wants;network;log;sendMessagesDelay;sendMessagesTimeout;hashLoader;sendingMessages;constructor(e,r={}){super(),Zt(1/0,this),this.peers=e3e({name:"helia_bitswap_peers",metrics:e.metrics}),this.wants=p3e({name:"helia_bitswap_wantlist",metrics:e.metrics}),this.network=e.network,this.sendMessagesDelay=r.sendMessagesDelay??_kt,this.log=e.logger.forComponent("helia:bitswap:wantlist"),this.hashLoader=r.hashLoader,this.network.addEventListener("bitswap:message",n=>{this.receiveMessage(n.detail.peer,n.detail.message).catch(i=>{this.log.error("error receiving bitswap message from %p",n.detail.peer,i)})}),this.network.addEventListener("peer:connected",n=>{this.peerConnected(n.detail).catch(i=>{this.log.error("error processing newly connected bitswap peer %p",n.detail,i)})}),this.network.addEventListener("peer:disconnected",n=>{this.peerDisconnected(n.detail)})}async addEntry(e,r){const n=vt(e.multihash.bytes,"base64");let i=this.wants.get(n);i==null&&(i={cid:e,priority:r.priority??1,wantType:r.wantType??la.WantBlock,cancel:!1,sendDontHave:!0},this.wants.set(n,i)),i.wantType===la.WantHave&&r.wantType===la.WantBlock&&(i.wantType=la.WantBlock),await this.sendMessagesDebounced();try{return r.wantType===la.WantBlock?(await Pd(this,"block",r?.signal,{filter:o=>Kr(e.multihash.digest,o.detail.cid.multihash.digest),errorMessage:"Want was aborted"})).detail:(await Pd(this,"presence",r?.signal,{filter:a=>Kr(e.multihash.digest,a.detail.cid.multihash.digest),errorMessage:"Want was aborted"})).detail}finally{r.signal?.aborted===!0&&(this.log("want for %c was aborted, cancelling want",e),i.cancel=!0,await this.sendMessagesDebounced())}}async sendMessagesDebounced(){await this.sendingMessages?.promise,clearTimeout(this.sendMessagesTimeout),this.sendMessagesTimeout=setTimeout(()=>{this.sendMessages().catch(e=>{this.log("error sending messages to peers",e)})},this.sendMessagesDelay)}async sendMessages(){this.sendingMessages=fn(),await Promise.all([...this.peers.entries()].map(async([e,r])=>{const n=new Set,i=new e3;for(const[s,a]of this.wants.entries())r.has(s)||a.cancel||(n.add(s),i.addWantlistEntry(a.cid,{cid:a.cid.bytes,priority:a.priority,wantType:a.wantType,cancel:a.cancel,sendDontHave:a.sendDontHave}));if(i.wantlist.size!==0)try{await this.network.sendMessage(e,i);for(const s of n)r.add(s)}catch(s){this.log.error("error sending full wantlist to new peer",s)}})).catch(e=>{this.log.error("error sending messages",e)});for(const[e,r]of this.wants)if(r.cancel){this.wants.delete(e);for(const n of this.peers.values())n.delete(e)}this.sendingMessages.resolve()}has(e){const r=vt(e.multihash.bytes,"base64");return this.wants.has(r)}async wantSessionPresence(e,r,n={}){const i=new e3;return i.addWantlistEntry(e,{cid:e.bytes,sendDontHave:!0,wantType:la.WantHave,priority:1}),await this.network.sendMessage(r,i),(await Pd(this,"presence",n.signal,{filter:a=>r.equals(a.detail.sender)&&Kr(e.multihash.digest,a.detail.cid.multihash.digest)})).detail}async wantBlock(e,r={}){return this.addEntry(e,{...r,wantType:la.WantBlock})}async wantSessionBlock(e,r,n={}){const i=new e3;return i.addWantlistEntry(e,{cid:e.bytes,sendDontHave:!0,wantType:la.WantBlock,priority:1}),await this.network.sendMessage(r,i),(await Pd(this,"presence",n.signal,{filter:a=>r.equals(a.detail.sender)&&Kr(e.multihash.digest,a.detail.cid.multihash.digest)})).detail}async receivedBlock(e,r){const n=vt(e.multihash.bytes,"base64"),i=this.wants.get(n);i!=null&&(i.cancel=!0,await this.sendMessagesDebounced())}async receiveMessage(e,r){this.log("received message from %p with %d blocks",e,r.blocks.length);let n=!1;for(const i of r.blocks){if(i.prefix==null||i.data==null)continue;const s=ERt(i.prefix),a=s[0],o=s[1],c=s[2],l=c===wn.code?wn:await this.hashLoader?.getHasher(c);if(l==null){this.log.error("unknown hash algorithm",c);continue}let u=l.digest(i.data);u.then!=null&&(u=await u);const f=Dt.create(a===0?0:1,o,u);this.log("received block from %p for %c",e,f),this.safeDispatchEvent("block",{detail:{sender:e,cid:f,block:i.data}}),this.safeDispatchEvent("presence",{detail:{sender:e,cid:f,has:!0,block:i.data}});const h=vt(f.multihash.bytes,"base64"),d=this.wants.get(h);d!=null&&(d.cancel=!0,n=!0)}for(const{cid:i,type:s}of r.blockPresences){const a=Dt.decode(i);this.log("received %s from %p for %c",s,e,a),this.safeDispatchEvent("presence",{detail:{sender:e,cid:a,has:s===rh.HaveBlock}})}n&&await this.sendMessagesDebounced()}async peerConnected(e){const r=new Set,n=new e3(!0);for(const[i,s]of this.wants.entries())s.cancel||(r.add(i),n.addWantlistEntry(s.cid,{cid:s.cid.bytes,priority:1,wantType:la.WantBlock,cancel:!1,sendDontHave:!1}));if(n.wantlist.size===0){this.peers.set(e,r);return}try{await this.network.sendMessage(e,n),this.peers.set(e,r)}catch(i){this.log.error("error sending full wantlist to new peer %p",e,i)}}peerDisconnected(e){this.peers.delete(e)}start(){}stop(){this.peers.clear(),clearTimeout(this.sendMessagesTimeout)}}class ARt{log;logger;stats;network;blockstore;peerWantLists;wantList;constructor(e,r={}){this.logger=e.logger,this.log=e.logger.forComponent("helia:bitswap"),this.blockstore=e.blockstore,this.stats=new _Rt(e),this.network=new Dkt(e,r),this.peerWantLists=new wIt({...e,network:this.network},r),this.wantList=new SRt({...e,network:this.network},r)}createSession(e={}){return wRt({wantList:this.wantList,network:this.network,logger:this.logger},e)}async want(e,r={}){const n=new AbortController,i=us([n.signal,r.signal]);Zt(1/0,n.signal,i),this.network.findAndConnect(e,{...r,signal:i}).catch(s=>{n.signal.aborted||this.log.error("error during finding and connect for cid %c",e,s)});try{return(await this.wantList.wantBlock(e,{...r,signal:i})).block}finally{n.abort(),i.clear()}}async notify(e,r,n={}){await Promise.all([this.peerWantLists.receivedBlock(e,n),this.wantList.receivedBlock(e,n)])}getWantlist(){return[...this.wantList.wants.values()].filter(e=>!e.cancel).map(e=>({cid:e.cid,priority:e.priority,wantType:e.wantType}))}getPeerWantlist(e){return this.peerWantLists.wantListForPeer(e)}async start(){this.wantList.start(),await this.network.start()}async stop(){this.wantList.stop(),await this.network.stop()}}const TRt=(t,e={})=>new ARt(t,e);class kRt{bitswap;started;constructor(e,r={}){const{hashers:n}=e;this.bitswap=TRt(e,{hashLoader:{getHasher:async i=>{let s;if(typeof i=="string"?s=Object.values(n).find(a=>a.name===i):s=n[i],s!=null)return s;throw new Error(`Could not load hasher for code/name "${i}"`)}},...r}),this.started=!1}isStarted(){return this.started}async start(){await this.bitswap.start(),this.started=!0}async stop(){await this.bitswap.stop(),this.started=!1}async announce(e,r,n){await this.bitswap.notify(e,r,n)}async retrieve(e,r={}){return this.bitswap.want(e,r)}createSession(e){const r=this.bitswap.createSession(e);return{announce:async(n,i,s)=>{await this.bitswap.notify(n,i,s)},retrieve:async(n,i)=>r.retrieve(n,i)}}}function g3e(t={}){return e=>new kRt(e,t)}class CRt{index=0;input="";new(e){return this.index=0,this.input=e,this}readAtomically(e){const r=this.index,n=e();return n===void 0&&(this.index=r),n}parseWith(e){const r=e();if(this.index===this.input.length)return r}peekChar(){if(!(this.index>=this.input.length))return this.input[this.index]}readChar(){if(!(this.index>=this.input.length))return this.input[this.index++]}readGivenChar(e){return this.readAtomically(()=>{const r=this.readChar();if(r===e)return r})}readSeparator(e,r,n){return this.readAtomically(()=>{if(!(r>0&&this.readGivenChar(e)===void 0))return n()})}readNumber(e,r,n,i){return this.readAtomically(()=>{let s=0,a=0;const o=this.peekChar();if(o===void 0)return;const c=o==="0",l=2**(8*i)-1;for(;;){const u=this.readAtomically(()=>{const f=this.readChar();if(f===void 0)return;const h=Number.parseInt(f,e);if(!Number.isNaN(h))return h});if(u===void 0)break;if(s*=e,s+=u,s>l||(a+=1,r!==void 0&&a>r))return}if(a!==0)return!n&&c&&a>1?void 0:s})}readIPv4Addr(){return this.readAtomically(()=>{const e=new Uint8Array(4);for(let r=0;r<e.length;r++){const n=this.readSeparator(".",r,()=>this.readNumber(10,3,!1,1));if(n===void 0)return;e[r]=n}return e})}readIPv6Addr(){const e=r=>{for(let n=0;n<r.length/2;n++){const i=n*2;if(n<r.length-3){const a=this.readSeparator(":",n,()=>this.readIPv4Addr());if(a!==void 0)return r[i]=a[0],r[i+1]=a[1],r[i+2]=a[2],r[i+3]=a[3],[i+4,!0]}const s=this.readSeparator(":",n,()=>this.readNumber(16,4,!0,2));if(s===void 0)return[i,!1];r[i]=s>>8,r[i+1]=s&255}return[r.length,!1]};return this.readAtomically(()=>{const r=new Uint8Array(16),[n,i]=e(r);if(n===16)return r;if(i||this.readGivenChar(":")===void 0||this.readGivenChar(":")===void 0)return;const s=new Uint8Array(14),a=16-(n+2),[o]=e(s.subarray(0,a));return r.set(s.subarray(0,o),16-o),r})}readIPAddr(){return this.readIPv4Addr()??this.readIPv6Addr()}}const m3e=45,IRt=15,Cv=new CRt;function RRt(t){if(!(t.length>IRt))return Cv.new(t).parseWith(()=>Cv.readIPv4Addr())}function PRt(t){if(t.includes("%")&&(t=t.split("%")[0]),!(t.length>m3e))return Cv.new(t).parseWith(()=>Cv.readIPv6Addr())}function BRt(t){if(t.includes("%")&&(t=t.split("%")[0]),!(t.length>m3e))return Cv.new(t).parseWith(()=>Cv.readIPAddr())}function Sz(t){return!!RRt(t)}function Az(t){return!!PRt(t)}function y3e(t){return!!BRt(t)}var v3e;(function(){var t,e,r,n,i,s,a,o;o=function(c){var l,u,f,h;return l=(c&255<<24)>>>24,u=(c&255<<16)>>>16,f=(c&65280)>>>8,h=c&255,[l,u,f,h].join(".")},a=function(c){var l,u,f,h,d,g;for(l=[],f=h=0;h<=3&&c.length!==0;f=++h){if(f>0){if(c[0]!==".")throw new Error("Invalid IP");c=c.substring(1)}g=e(c),d=g[0],u=g[1],c=c.substring(u),l.push(d)}if(c.length!==0)throw new Error("Invalid IP");switch(l.length){case 1:if(l[0]>4294967295)throw new Error("Invalid IP");return l[0]>>>0;case 2:if(l[0]>255||l[1]>16777215)throw new Error("Invalid IP");return(l[0]<<24|l[1])>>>0;case 3:if(l[0]>255||l[1]>255||l[2]>65535)throw new Error("Invalid IP");return(l[0]<<24|l[1]<<16|l[2])>>>0;case 4:if(l[0]>255||l[1]>255||l[2]>255||l[3]>255)throw new Error("Invalid IP");return(l[0]<<24|l[1]<<16|l[2]<<8|l[3])>>>0;default:throw new Error("Invalid IP")}},r=function(c){return c.charCodeAt(0)},n=r("0"),s=r("a"),i=r("A"),e=function(c){var l,u,f,h,d;for(h=0,l=10,u="9",f=0,c.length>1&&c[f]==="0"&&(c[f+1]==="x"||c[f+1]==="X"?(f+=2,l=16):"0"<=c[f+1]&&c[f+1]<="9"&&(f++,l=8,u="7")),d=f;f<c.length;){if("0"<=c[f]&&c[f]<=u)h=h*l+(r(c[f])-n)>>>0;else if(l===16)if("a"<=c[f]&&c[f]<="f")h=h*l+(10+r(c[f])-s)>>>0;else if("A"<=c[f]&&c[f]<="F")h=h*l+(10+r(c[f])-i)>>>0;else break;else break;if(h>4294967295)throw new Error("too large");f++}if(f===d)throw new Error("empty octet");return[h,f]},t=function(){function c(l,u){var f,h,d;if(typeof l!="string")throw new Error("Missing `net' parameter");if(u||(d=l.split("/",2),l=d[0],u=d[1]),u||(u=32),typeof u=="string"&&u.indexOf(".")>-1){try{this.maskLong=a(u)}catch{throw new Error("Invalid mask: "+u)}for(f=h=32;h>=0;f=--h)if(this.maskLong===4294967295<<32-f>>>0){this.bitmask=f;break}}else if(u||u===0)this.bitmask=parseInt(u,10),this.maskLong=0,this.bitmask>0&&(this.maskLong=4294967295<<32-this.bitmask>>>0);else throw new Error("Invalid mask: empty");try{this.netLong=(a(l)&this.maskLong)>>>0}catch{throw new Error("Invalid net address: "+l)}if(!(this.bitmask<=32))throw new Error("Invalid mask for ip4: "+u);this.size=Math.pow(2,32-this.bitmask),this.base=o(this.netLong),this.mask=o(this.maskLong),this.hostmask=o(~this.maskLong),this.first=this.bitmask<=30?o(this.netLong+1):this.base,this.last=this.bitmask<=30?o(this.netLong+this.size-2):o(this.netLong+this.size-1),this.broadcast=this.bitmask<=30?o(this.netLong+this.size-1):void 0}return c.prototype.contains=function(l){return typeof l=="string"&&(l.indexOf("/")>0||l.split(".").length!==4)&&(l=new c(l)),l instanceof c?this.contains(l.base)&&this.contains(l.broadcast||l.last):(a(l)&this.maskLong)>>>0===(this.netLong&this.maskLong)>>>0},c.prototype.next=function(l){return l==null&&(l=1),new c(o(this.netLong+this.size*l),this.mask)},c.prototype.forEach=function(l){var u,f,h;for(h=a(this.first),f=a(this.last),u=0;h<=f;)l(o(h),h,u),u++,h++},c.prototype.toString=function(){return this.base+"/"+this.bitmask},c}(),v3e=t}).call(It);const DRt=["0.0.0.0/8","10.0.0.0/8","100.64.0.0/10","127.0.0.0/8","169.254.0.0/16","172.16.0.0/12","192.0.0.0/24","192.0.0.0/29","192.0.0.8/32","192.0.0.9/32","192.0.0.10/32","192.0.0.170/32","192.0.0.171/32","192.0.2.0/24","192.31.196.0/24","192.52.193.0/24","192.88.99.0/24","192.168.0.0/16","192.175.48.0/24","198.18.0.0/15","198.51.100.0/24","203.0.113.0/24","240.0.0.0/4","255.255.255.255/32"],ORt=DRt.map(t=>new v3e(t));function Tz(t){for(const e of ORt)if(e.contains(t))return!0;return!1}function NRt(t){return/^::ffff:([0-9a-fA-F]{1,4}):([0-9a-fA-F]{1,4})$/.test(t)}function MRt(t){const e=t.split(":");if(e.length<2)return!1;const r=e[e.length-1].padStart(4,"0"),n=e[e.length-2].padStart(4,"0"),i=`${parseInt(n.substring(0,2),16)}.${parseInt(n.substring(2),16)}.${parseInt(r.substring(0,2),16)}.${parseInt(r.substring(2),16)}`;return Tz(i)}function LRt(t){return/^::ffff:([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/.test(t)}function FRt(t){const e=t.split(":"),r=e[e.length-1];return Tz(r)}function $Rt(t){return/^::$/.test(t)||/^::1$/.test(t)||/^64:ff9b::([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/.test(t)||/^100::([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(t)||/^2001::([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(t)||/^2001:2[0-9a-fA-F]:([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(t)||/^2001:db8:([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(t)||/^2002:([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(t)||/^f[c-d]([0-9a-fA-F]{2,2}):/i.test(t)||/^fe[8-9a-bA-B][0-9a-fA-F]:/i.test(t)||/^ff([0-9a-fA-F]{2,2}):/i.test(t)}function K1(t){return Sz(t)?Tz(t):NRt(t)?MRt(t):LRt(t)?FRt(t):Az(t)?$Rt(t):void 0}const Iie=Sz,URt=Az,b3e=function(t){let e=0;if(t=t.toString().trim(),Iie(t)){const r=new Uint8Array(e+4);return t.split(/\./g).forEach(n=>{r[e++]=parseInt(n,10)&255}),r}if(URt(t)){const r=t.split(":",8);let n;for(n=0;n<r.length;n++){const s=Iie(r[n]);let a;s&&(a=b3e(r[n]),r[n]=vt(a.slice(0,2),"base16")),a!=null&&++n<8&&r.splice(n,0,vt(a.slice(2,4),"base16"))}if(r[0]==="")for(;r.length<8;)r.unshift("0");else if(r[r.length-1]==="")for(;r.length<8;)r.push("0");else if(r.length<8){for(n=0;n<r.length&&r[n]!=="";n++);const s=[n,1];for(n=9-r.length;n>0;n--)s.push("0");r.splice.apply(r,s)}const i=new Uint8Array(e+16);for(n=0;n<r.length;n++){const s=parseInt(r[n],16);i[e++]=s>>8&255,i[e++]=s&255}return i}throw new Error("invalid ip address")},VRt=function(t,e=0,r){e=~~e,r=r??t.length-e;const n=new DataView(t.buffer);if(r===4){const i=[];for(let s=0;s<r;s++)i.push(t[e+s]);return i.join(".")}if(r===16){const i=[];for(let s=0;s<r;s+=2)i.push(n.getUint16(e+s).toString(16));return i.join(":").replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3").replace(/:{3,4}/,"::")}return""},zc=-1,Y4={},CM={},jRt=[[4,32,"ip4"],[6,16,"tcp"],[33,16,"dccp"],[41,128,"ip6"],[42,zc,"ip6zone"],[43,8,"ipcidr"],[53,zc,"dns",!0],[54,zc,"dns4",!0],[55,zc,"dns6",!0],[56,zc,"dnsaddr",!0],[132,16,"sctp"],[273,16,"udp"],[275,0,"p2p-webrtc-star"],[276,0,"p2p-webrtc-direct"],[277,0,"p2p-stardust"],[280,0,"webrtc-direct"],[281,0,"webrtc"],[290,0,"p2p-circuit"],[301,0,"udt"],[302,0,"utp"],[400,zc,"unix",!1,!0],[421,zc,"ipfs"],[421,zc,"p2p"],[443,0,"https"],[444,96,"onion"],[445,296,"onion3"],[446,zc,"garlic64"],[448,0,"tls"],[449,zc,"sni"],[460,0,"quic"],[461,0,"quic-v1"],[465,0,"webtransport"],[466,zc,"certhash"],[477,0,"ws"],[478,0,"wss"],[479,0,"p2p-websocket-star"],[480,0,"http"],[481,zc,"http-path"],[777,zc,"memory"]];jRt.forEach(t=>{const e=zRt(...t);CM[e.code]=e,Y4[e.name]=e});function zRt(t,e,r,n,i){return{code:t,size:e,name:r,resolvable:!!n,path:!!i}}function Cr(t){if(typeof t=="number"){if(CM[t]!=null)return CM[t];throw new Error(`no protocol with code: ${t}`)}else if(typeof t=="string"){if(Y4[t]!=null)return Y4[t];throw new Error(`no protocol with name: ${t}`)}throw new Error(`invalid protocol id type: ${typeof t}`)}Cr("ip4");Cr("ip6");Cr("ipcidr");function kz(t,e){switch(Cr(t).code){case 4:case 41:return HRt(e);case 42:return HB(e);case 6:case 273:case 33:case 132:return w3e(e).toString();case 53:case 54:case 55:case 56:case 400:case 449:case 777:return HB(e);case 421:return YRt(e);case 444:return Bie(e);case 445:return Bie(e);case 466:return GRt(e);case 481:return globalThis.encodeURIComponent(HB(e));default:return vt(e,"base16")}}function Rie(t,e){switch(Cr(t).code){case 4:return Pie(e);case 41:return Pie(e);case 42:return qB(e);case 6:case 273:case 33:case 132:return Cz(parseInt(e,10));case 53:case 54:case 55:case 56:case 400:case 449:case 777:return qB(e);case 421:return WRt(e);case 444:return XRt(e);case 445:return ZRt(e);case 466:return KRt(e);case 481:return qB(globalThis.decodeURIComponent(e));default:return pt(e,"base16")}}const zB=Object.values(tm).map(t=>t.decoder),qRt=function(){let t=zB[0].or(zB[1]);return zB.slice(2).forEach(e=>t=t.or(e)),t}();function Pie(t){if(!y3e(t))throw new Error("invalid ip address");return b3e(t)}function HRt(t){const e=VRt(t,0,t.length);if(e==null)throw new Error("ipBuff is required");if(!y3e(e))throw new Error("invalid ip address");return e}function Cz(t){const e=new ArrayBuffer(2);return new DataView(e).setUint16(0,t),new Uint8Array(e)}function w3e(t){return new DataView(t.buffer).getUint16(t.byteOffset)}function qB(t){const e=pt(t),r=Uint8Array.from(Go(e.length));return Yi([r,e],r.length+e.length)}function HB(t){const e=u0(t);if(t=t.slice(Ei(e)),t.length!==e)throw new Error("inconsistent lengths");return vt(t)}function WRt(t){let e;t[0]==="Q"||t[0]==="1"?e=c0(Rs.decode(`z${t}`)).bytes:e=Dt.parse(t).multihash.bytes;const r=Uint8Array.from(Go(e.length));return Yi([r,e],r.length+e.length)}function KRt(t){const e=qRt.decode(t),r=Uint8Array.from(Go(e.length));return Yi([r,e],r.length+e.length)}function GRt(t){const e=u0(t),r=t.slice(Ei(e));if(r.length!==e)throw new Error("inconsistent lengths");return"u"+vt(r,"base64url")}function YRt(t){const e=u0(t),r=t.slice(Ei(e));if(r.length!==e)throw new Error("inconsistent lengths");return vt(r,"base58btc")}function XRt(t){const e=t.split(":");if(e.length!==2)throw new Error(`failed to parse onion addr: ["'${e.join('", "')}'"]' does not contain a port number`);if(e[0].length!==16)throw new Error(`failed to parse onion addr: ${e[0]} not a Tor onion address.`);const r=Ho.decode("b"+e[0]),n=parseInt(e[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");const i=Cz(n);return Yi([r,i],r.length+i.length)}function ZRt(t){const e=t.split(":");if(e.length!==2)throw new Error(`failed to parse onion addr: ["'${e.join('", "')}'"]' does not contain a port number`);if(e[0].length!==56)throw new Error(`failed to parse onion addr: ${e[0]} not a Tor onion3 address.`);const r=Ho.decode(`b${e[0]}`),n=parseInt(e[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");const i=Cz(n);return Yi([r,i],r.length+i.length)}function Bie(t){const e=t.slice(0,t.length-2),r=t.slice(t.length-2),n=vt(e,"base32"),i=w3e(r);return`${n}:${i}`}function JRt(t){t=IM(t);const e=[],r=[];let n=null;const i=t.split("/").slice(1);if(i.length===1&&i[0]==="")return{bytes:new Uint8Array,string:"/",tuples:[],stringTuples:[],path:null};for(let s=0;s<i.length;s++){const a=i[s],o=Cr(a);if(o.size===0){e.push([o.code]),r.push([o.code]);continue}if(s++,s>=i.length)throw E3e("invalid address: "+t);if(o.path===!0){n=IM(i.slice(s).join("/")),e.push([o.code,Rie(o.code,n)]),r.push([o.code,n]);break}const c=Rie(o.code,i[s]);e.push([o.code,c]),r.push([o.code,kz(o.code,c)])}return{string:_3e(r),bytes:x3e(e),tuples:e,stringTuples:r,path:n}}function Die(t){const e=[],r=[];let n=null,i=0;for(;i<t.length;){const s=u0(t,i),a=Ei(s),o=Cr(s),c=QRt(o,t.slice(i+a));if(c===0){e.push([s]),r.push([s]),i+=a;continue}const l=t.slice(i+a,i+a+c);if(i+=c+a,i>t.length)throw E3e("Invalid address Uint8Array: "+vt(t,"base16"));e.push([s,l]);const u=kz(s,l);if(r.push([s,u]),o.path===!0){n=u;break}}return{bytes:Uint8Array.from(t),string:_3e(r),tuples:e,stringTuples:r,path:n}}function _3e(t){const e=[];return t.map(r=>{const n=Cr(r[0]);return e.push(n.name),r.length>1&&r[1]!=null&&e.push(r[1]),null}),IM(e.join("/"))}function x3e(t){return Yi(t.map(e=>{const r=Cr(e[0]);let n=Uint8Array.from(Go(r.code));return e.length>1&&e[1]!=null&&(n=Yi([n,e[1]])),n}))}function QRt(t,e){if(t.size>0)return t.size/8;if(t.size===0)return 0;{const r=u0(e instanceof Uint8Array?e:Uint8Array.from(e));return r+Ei(r)}}function IM(t){return"/"+t.trim().split("/").filter(e=>e).join("/")}function E3e(t){return new Error("Error parsing address: "+t)}const ePt=Symbol.for("nodejs.util.inspect.custom"),S3e=Symbol.for("@multiformats/js-multiaddr/multiaddr"),tPt=[Cr("dns").code,Cr("dns4").code,Cr("dns6").code,Cr("dnsaddr").code];class rPt extends Error{constructor(e="No available resolver"){super(e),this.name="NoAvailableResolverError"}}class cy{bytes;#e;#t;#r;#i;[S3e]=!0;constructor(e){e==null&&(e="");let r;if(e instanceof Uint8Array)r=Die(e);else if(typeof e=="string"){if(e.length>0&&e.charAt(0)!=="/")throw new Error(`multiaddr "${e}" must start with a "/"`);r=JRt(e)}else if(cT(e))r=Die(e.bytes);else throw new Error("addr must be a string, Buffer, or another Multiaddr");this.bytes=r.bytes,this.#e=r.string,this.#t=r.tuples,this.#r=r.stringTuples,this.#i=r.path}toString(){return this.#e}toJSON(){return this.toString()}toOptions(){let e,r,n,i,s="";const a=Cr("tcp"),o=Cr("udp"),c=Cr("ip4"),l=Cr("ip6"),u=Cr("dns6"),f=Cr("ip6zone");for(const[d,g]of this.stringTuples())d===f.code&&(s=`%${g??""}`),tPt.includes(d)&&(r=a.name,i=443,n=`${g??""}${s}`,e=d===u.code?6:4),(d===a.code||d===o.code)&&(r=Cr(d).name,i=parseInt(g??"")),(d===c.code||d===l.code)&&(r=Cr(d).name,n=`${g??""}${s}`,e=d===l.code?6:4);if(e==null||r==null||n==null||i==null)throw new Error('multiaddr must have a valid format: "/{ip4, ip6, dns4, dns6, dnsaddr}/{address}/{tcp, udp}/{port}".');return{family:e,host:n,transport:r,port:i}}protos(){return this.#t.map(([e])=>Object.assign({},Cr(e)))}protoCodes(){return this.#t.map(([e])=>e)}protoNames(){return this.#t.map(([e])=>Cr(e).name)}tuples(){return this.#t}stringTuples(){return this.#r}encapsulate(e){return e=new cy(e),new cy(this.toString()+e.toString())}decapsulate(e){const r=e.toString(),n=this.toString(),i=n.lastIndexOf(r);if(i<0)throw new Error(`Address ${this.toString()} does not contain subaddress: ${e.toString()}`);return new cy(n.slice(0,i))}decapsulateCode(e){const r=this.tuples();for(let n=r.length-1;n>=0;n--)if(r[n][0]===e)return new cy(x3e(r.slice(0,n)));return this}getPeerId(){try{let e=[];this.stringTuples().forEach(([n,i])=>{n===Y4.p2p.code&&e.push([n,i]),n===Y4["p2p-circuit"].code&&(e=[])});const r=e.pop();if(r?.[1]!=null){const n=r[1];return n[0]==="Q"||n[0]==="1"?vt(Rs.decode(`z${n}`),"base58btc"):vt(Dt.parse(n).multihash.bytes,"base58btc")}return null}catch{return null}}getPath(){return this.#i}equals(e){return Kr(this.bytes,e.bytes)}async resolve(e){const r=this.protos().find(s=>s.resolvable);if(r==null)return[this];const n=Iz.get(r.name);if(n==null)throw new rPt(`no available resolver for ${r.name}`);return(await n(this,e)).map(s=>Wr(s))}nodeAddress(){const e=this.toOptions();if(e.transport!=="tcp"&&e.transport!=="udp")throw new Error(`multiaddr must have a valid format - no protocol with name: "${e.transport}". Must have a valid transport protocol: "{tcp, udp}"`);return{family:e.family,address:e.host,port:e.port}}isThinWaistAddress(e){const r=(e??this).protos();return!(r.length!==2||r[0].code!==4&&r[0].code!==41||r[1].code!==6&&r[1].code!==273)}[ePt](){return`Multiaddr(${this.#e})`}}const Iz=new Map;function cT(t){return!!t?.[S3e]}function Wr(t){return new cy(t)}const nPt=t=>t.toString().split("/").slice(1),v8=t=>({match:e=>e.length<1?!1:t(e[0])?e.slice(1):!1,pattern:"fn"}),Ln=t=>({match:e=>v8(r=>r===t).match(e),pattern:t}),lT=()=>({match:t=>v8(e=>typeof e=="string").match(t),pattern:"{string}"}),uT=()=>({match:t=>v8(e=>!isNaN(parseInt(e))).match(t),pattern:"{number}"}),ts=()=>({match:t=>{if(t.length<2||t[0]!=="p2p"&&t[0]!=="ipfs")return!1;if(t[1].startsWith("Q")||t[1].startsWith("1"))try{Rs.decode(`z${t[1]}`)}catch{return!1}else return!1;return t.slice(2)},pattern:"/p2p/{peerid}"}),_9=()=>({match:t=>{if(t.length<2||t[0]!=="certhash")return!1;try{Z0e.decode(t[1])}catch{return!1}return t.slice(2)},pattern:"/certhash/{certhash}"}),zi=t=>({match:e=>{const r=t.match(e);return r===!1?e:r},pattern:`optional(${t.pattern})`}),Ic=(...t)=>({match:e=>{let r;for(const n of t){const i=n.match(e);i!==!1&&(r==null||i.length<r.length)&&(r=i)}return r??!1},pattern:`or(${t.map(e=>e.pattern).join(", ")})`}),zn=(...t)=>({match:e=>{for(const r of t){const n=r.match(e);if(n===!1)return!1;e=n}return e},pattern:`and(${t.map(e=>e.pattern).join(", ")})`});function hl(...t){function e(i){let s=nPt(i);for(const a of t){const o=a.match(s);if(o===!1)return!1;s=o}return s}function r(i){return e(i)!==!1}function n(i){const s=e(i);return s===!1?!1:s.length===0}return{matches:r,exactMatch:n}}const fT=zn(Ln("dns4"),lT()),hT=zn(Ln("dns6"),lT()),dT=zn(Ln("dnsaddr"),lT()),Rz=zn(Ln("dns"),lT());hl(fT,zi(ts()));hl(hT,zi(ts()));hl(dT,zi(ts()));const A3e=hl(Ic(Rz,dT,fT,hT),zi(ts())),iPt=zn(Ln("ip4"),v8(Sz)),sPt=zn(Ln("ip6"),v8(Az)),Pz=Ic(iPt,sPt),qd=Ic(Pz,Rz,fT,hT,dT),aPt=hl(Ic(Pz,zn(Ic(Rz,dT,fT,hT),zi(ts())))),oPt=hl(Pz),Bz=zn(qd,Ln("tcp"),uT()),pT=zn(qd,Ln("udp"),uT());hl(zn(Bz,zi(ts())));const T3e=zn(pT,Ln("quic")),Dz=zn(pT,Ln("quic-v1")),cPt=Ic(T3e,Dz),RM=Ic(qd,Bz,pT,T3e,Dz),lPt=Ic(zn(RM,Ln("ws"),zi(ts()))),uPt=Ic(zn(RM,Ln("wss"),zi(ts())),zn(RM,Ln("tls"),Ln("ws"),zi(ts()))),k3e=zn(pT,Ln("webrtc-direct"),zi(_9()),zi(_9()),zi(ts())),fPt=hl(k3e),C3e=zn(Dz,Ln("webtransport"),zi(_9()),zi(_9()),zi(ts())),I3e=hl(C3e),PM=Ic(lPt,uPt,zn(Bz,zi(ts())),zn(cPt,zi(ts())),zn(qd,zi(ts())),k3e,C3e,ts()),hPt=zn(PM,Ln("p2p-circuit"),ts()),x9=hl(hPt),dPt=Ic(zn(PM,Ln("p2p-circuit"),Ln("webrtc"),zi(ts())),zn(PM,Ln("webrtc"),zi(ts())),Ln("webrtc")),pPt=hl(dPt),gPt=Ic(zn(qd,Ln("tcp"),uT(),Ln("http"),zi(ts())),zn(qd,Ln("http"),zi(ts()))),mPt=hl(gPt),yPt=Ic(zn(qd,Ln("tcp"),Ic(zn(Ln("443"),Ln("http")),zn(uT(),Ln("https"))),zi(ts())),zn(qd,Ln("tls"),Ln("http"),zi(ts())),zn(qd,Ln("https"),zi(ts()))),vPt=hl(yPt),bPt=[Cr("tcp").code,Cr("dns").code,Cr("dnsaddr").code,Cr("dns4").code,Cr("dns6").code];function Oie(t){let e;try{e=Cr("sni").code}catch{return null}for(const[r,n]of t)if(r===e&&n!==void 0)return n;return null}function Nie(t){return t.some(([e,r])=>e===Cr("tls").code)}function ic(t,e,r){const n=R3e[Cr(t).name];if(n===void 0)throw new Error(`Can't interpret protocol ${Cr(t).name}`);const i=n(e,r);return t===Cr("ip6").code?`[${i}]`:i}const R3e={ip4:(t,e)=>t,ip6:(t,e)=>e.length===0?t:`[${t}]`,tcp:(t,e)=>{const r=e.pop();if(r===void 0)throw new Error("Unexpected end of multiaddr");return`tcp://${ic(r[0],r[1]??"",e)}:${t}`},udp:(t,e)=>{const r=e.pop();if(r===void 0)throw new Error("Unexpected end of multiaddr");return`udp://${ic(r[0],r[1]??"",e)}:${t}`},dnsaddr:(t,e)=>t,dns4:(t,e)=>t,dns6:(t,e)=>t,dns:(t,e)=>t,ipfs:(t,e)=>{const r=e.pop();if(r===void 0)throw new Error("Unexpected end of multiaddr");return`${ic(r[0],r[1]??"",e)}/ipfs/${t}`},p2p:(t,e)=>{const r=e.pop();if(r===void 0)throw new Error("Unexpected end of multiaddr");return`${ic(r[0],r[1]??"",e)}/p2p/${t}`},http:(t,e)=>{const r=Nie(e),n=Oie(e);if(r&&n!==null)return`https://${n}`;const i=r?"https://":"http://",s=e.pop();if(s===void 0)throw new Error("Unexpected end of multiaddr");let a=ic(s[0],s[1]??"",e);return a=a.replace("tcp://",""),`${i}${a}`},"http-path":(t,e)=>{const r=e.pop();if(r===void 0)throw new Error("Unexpected end of multiaddr");const n=ic(r[0],r[1]??"",e),i=decodeURIComponent(t);return`${n}/${i}`},tls:(t,e)=>{const r=e.pop();if(r===void 0)throw new Error("Unexpected end of multiaddr");return ic(r[0],r[1]??"",e)},sni:(t,e)=>{const r=e.pop();if(r===void 0)throw new Error("Unexpected end of multiaddr");return ic(r[0],r[1]??"",e)},https:(t,e)=>{const r=e.pop();if(r===void 0)throw new Error("Unexpected end of multiaddr");let n=ic(r[0],r[1]??"",e);return n=n.replace("tcp://",""),`https://${n}`},ws:(t,e)=>{const r=Nie(e),n=Oie(e);if(r&&n!==null)return`wss://${n}`;const i=r?"wss://":"ws://",s=e.pop();if(s===void 0)throw new Error("Unexpected end of multiaddr");let a=ic(s[0],s[1]??"",e);return a=a.replace("tcp://",""),`${i}${a}`},wss:(t,e)=>{const r=e.pop();if(r===void 0)throw new Error("Unexpected end of multiaddr");let n=ic(r[0],r[1]??"",e);return n=n.replace("tcp://",""),`wss://${n}`},"p2p-websocket-star":(t,e)=>{const r=e.pop();if(r===void 0)throw new Error("Unexpected end of multiaddr");return`${ic(r[0],r[1]??"",e)}/p2p-websocket-star`},"p2p-webrtc-star":(t,e)=>{const r=e.pop();if(r===void 0)throw new Error("Unexpected end of multiaddr");return`${ic(r[0],r[1]??"",e)}/p2p-webrtc-star`},"p2p-webrtc-direct":(t,e)=>{const r=e.pop();if(r===void 0)throw new Error("Unexpected end of multiaddr");return`${ic(r[0],r[1]??"",e)}/p2p-webrtc-direct`}};function P3e(t,e){const n=Wr(t).stringTuples(),i=n.pop();if(i===void 0)throw new Error("Unexpected end of multiaddr");const s=Cr(i[0]),a=R3e[s.name];if(a==null)throw new Error(`No interpreter found for ${s.name}`);let o=a(i[1]??"",n);return bPt.includes(i[0])&&(o=o.replace(/^.*:\/\//,""),i[1]==="443"?o=`https://${o}`:o=`http://${o}`),(o.startsWith("http://")||o.startsWith("https://"))&&(o=new URL(o).toString(),o.endsWith("/")&&(o=o.substring(0,o.length-1))),o}class wPt{url;#e=0;#t=0;#r=0;#i=0;#o=new Map;log;constructor(e,r){this.url=e instanceof URL?e:new URL(e),this.log=r.forComponent(`helia:trustless-gateway-block-broker:${this.url.hostname}`)}#l(e){const r=e.multihash.bytes;return Sc.encode(r)}async getRawBlock(e,r){const n=new URL(this.url.toString());if(n.pathname=`/ipfs/${e.toString()}`,n.search="?format=raw",r?.aborted===!0)throw new Error(`Signal to fetch raw block for CID ${e} from gateway ${this.url} was aborted prior to fetch`);const i=this.#l(e),s=new AbortController,a=()=>{s.abort()};r?.addEventListener("abort",a);try{let o=this.#o.get(i);return o==null&&(this.#e++,o=fetch(n.toString(),{signal:s.signal,headers:{Accept:"application/vnd.ipld.raw"},cache:"force-cache"}).then(async c=>{if(this.log("GET %s %d",n,c.status),!c.ok)throw this.#t++,new Error(`unable to fetch raw block for CID ${e} from gateway ${this.url}`);return this.#i++,new Uint8Array(await c.arrayBuffer())}),this.#o.set(i,o)),await o}catch{throw r?.aborted===!0?new Error(`fetching raw block for CID ${e} from gateway ${this.url} was aborted`):(this.#t++,new Error(`unable to fetch raw block for CID ${e}`))}finally{r?.removeEventListener("abort",a),this.#o.delete(i)}}reliability(){return this.#e===0?1:this.#r>0?-1/0:this.#i/(this.#e+this.#t*3)}incrementInvalidBlocks(){this.#r++}getStats(){return{attempts:this.#e,errors:this.#t,invalidBlocks:this.#r,successes:this.#i,pendingResponses:this.#o.size}}}function _Pt(t,e,r){return t.filter(n=>{if(vPt.matches(n)||e&&mPt.matches(n))return r||A3e.matches(n)?!0:K1(n.toOptions().host)===!1;if(!e&&r){const{host:i}=n.toOptions();if(i==="127.0.0.1"||i==="localhost"||i.endsWith(".localhost"))return!0}return!1})}async function*B3e(t,e,r,n,i,s){for await(const a of e.findProviders(t,s)){const o=_Pt(a.multiaddrs,n,i);if(o.length===0)continue;const c=P3e(o[0]);yield new wPt(c,r)}}class xPt extends d3e{routing;allowInsecure;allowLocal;constructor(e,r){super(e,{...r,name:"helia:trustless-gateway:session"}),this.routing=e.routing,this.allowInsecure=r.allowInsecure??D3e,this.allowLocal=r.allowLocal??O3e}async queryProvider(e,r,n){this.log("fetching BLOCK for %c from %s",e,r.url);const i=await r.getRawBlock(e,n.signal);return this.log.trace("got block for %c from %s",e,r.url),await n.validateFn?.(i),i}async*findNewProviders(e,r={}){yield*B3e(e,this.routing,this.logger,this.allowInsecure,this.allowLocal,r)}toEvictionKey(e){return e.url.toString()}equals(e,r){return e.url.toString()===r.url.toString()}}function EPt(t,e){return new xPt(t,e)}class SPt{allowInsecure;allowLocal;routing;log;logger;constructor(e,r={}){this.log=e.logger.forComponent("helia:trustless-gateway-block-broker"),this.logger=e.logger,this.routing=e.routing,this.allowInsecure=r.allowInsecure??D3e,this.allowLocal=r.allowLocal??O3e}async retrieve(e,r={}){const n=[];for await(const i of B3e(e,this.routing,this.logger,this.allowInsecure,this.allowLocal,r)){this.log("getting block for %c from %s",e,i.url);try{const s=await i.getRawBlock(e,r.signal);this.log.trace("got block for %c from %s",e,i.url);try{await r.validateFn?.(s)}catch(a){this.log.error("failed to validate block for %c from %s",e,i.url,a);continue}return s}catch(s){if(this.log.error("failed to get block for %c from %s",e,i.url,s),s instanceof Error?n.push(s):n.push(new Error(`Unable to fetch raw block for CID ${e} from gateway ${i.url}`)),r.signal?.aborted===!0){this.log.trace("request aborted while fetching raw block for CID %c from gateway %s",e,i.url);break}}}throw n.length>0?new AggregateError(n,`Unable to fetch raw block for CID ${e} from any gateway`):new Error(`Unable to fetch raw block for CID ${e} from any gateway`)}createSession(e={}){return EPt({logger:this.logger,routing:this.routing},{...e,allowLocal:this.allowLocal,allowInsecure:this.allowInsecure})}}const D3e=!1,O3e=!1;function APt(t={}){return e=>new SPt(e,t)}async function*Mie(t,e={}){const r=t.getReader();try{for(;;){const n=await r.read();if(n.done)return;yield n.value}}finally{e.preventCancel!==!0&&await r.cancel(),r.releaseLock()}}var N3e={exports:{}};(function(t){(function(){t.exports=m;var e=86400,r=3200,n=146097*r/400,i=e*n,s=1e3*i,a=864e13,o=4294967296,c=1e6,l="000000000",u=Math.trunc||function(N){var Y=N-N%1;return Y==0&&(N<0||N===0&&1/N!=1/0)?-0:Y},f=m.prototype,h=(m.fromDate=function(N){return new m(+N)},m.fromInt64BE=A(0,1,2,3,0,4),m.fromInt64LE=A(3,2,1,0,4,0),m.fromString=function(E){var Y,H=new m,E=(E+="").replace(/^\s*[+\-]?\d+/,function(w){var w=+w,T=1970+(w-1970)%400;return H.year=w-T,T}).replace(/(?:Z|([+\-]\d{2}):?(\d{2}))$/,function(k,w,T){return w<0&&(T*=-1),Y=6e4*(60*+w+ +T),""}).replace(/\.\d+$/,function(k){return H.nano=+(k+l).substr(1,9),""}).split(/\D+/);if(1<E.length?E[1]--:E[1]=0,H.time=Y=Date.UTC.apply(Date,E)-(Y||0),isNaN(Y))throw new TypeError("Invalid Date");return y(H)},m.fromTimeT=function(N){return _(N,0)},f.year=0,f.time=0,f.nano=0,f.addNano=function(N){return this.nano+=+N||0,this},f.getNano=function(){var N=y(this);return(N.time%1e3*c+ +N.nano+1e9)%1e9},f.getTimeT=function(){var Y=y(this),N=Math.floor(Y.time/1e3),Y=Y.year;return Y&&(N+=Y*n*e/r),N},f.getYear=function(){return this.toDate().getUTCFullYear()+this.year},f.toDate=function(){return v(y(this).time)},f.toJSON=function(){return this.toString().replace(/0{1,6}Z$/,"Z")},f.toString=function(N){var Y=this,H=Y.toDate(),E={H:function(){return R(H.getUTCHours())},L:function(){return M(H.getUTCMilliseconds(),3)},M:function(){return R(H.getUTCMinutes())},N:function(){return M(Y.getNano(),9)},S:function(){return R(H.getUTCSeconds())},Y:function(){var k=Y.getYear();return 999999<k?"+"+k:9999<k?"+"+M(k,6):0<=k?M(k,4):-999999<=k?"-"+M(-k,6):k},a:function(){return g[H.getUTCDay()]},b:function(){return d[H.getUTCMonth()]},d:function(){return R(H.getUTCDate())},e:function(){return function(k){return(9<k?"":" ")+(0|k)}(H.getUTCDate())},m:function(){return R(H.getUTCMonth()+1)}};return function k(w){return w.replace(/%./g,function(T){var I=T[1],L=p[I],I=E[I];return L?k(L):I?I():T})}(N||h)},f.writeInt64BE=x(0,1,2,3,0,4),f.writeInt64LE=x(3,2,1,0,4,0),"%Y-%m-%dT%H:%M:%S.%NZ"),d=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],g=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],p={"%":"%",F:"%Y-%m-%d",n:`
`,R:"%H:%M",T:"%H:%M:%S",t:"	",X:"%T",Z:"GMT",z:"+0000"};return m;function m(N,Y,H){var E=this;if(!(E instanceof m))return new m(N,Y,H);E.time=+N||0,E.nano=+Y||0,E.year=+H||0,y(E)}function y(N){var Y,H,E,k=N.year,w=N.time,T=N.nano,L=((T<0||c<=T)&&(T-=(H=Math.floor(T/c))*c,w+=H,H=1),k%r);return(w<-a||a<w||L)&&((Y=u(w/s))&&(k+=Y*r,w-=Y*s),(E=v(w)).setUTCFullYear(L+E.getUTCFullYear()),E=(w=+E)+(Y=u((k-=L)/r))*s,Y&&-a<=E&&E<=a&&(k-=Y*r,w=E),H=1),H&&(N.year=k,N.time=w,N.nano=T),N}function v(N){var Y=new Date(0);return Y.setTime(N),Y}function _(k,E){k=+k||0;var H=u((E=(E|0)*o)/i)+u(k/i),E=E%i+k%i,k=u(E/i);return k&&(H+=k,E-=k*i),new m(1e3*E,0,H*r)}function x(N,Y,H,E,k,w){return function(L,I){var O=y(this);L=L||new Array(8),C(L,I|=0);var D=Math.floor(O.time/1e3),O=O.year*(n*e/r),U=u(O/o)+u(D/o),O=O%o+D%o,D=Math.floor(O/o);return D&&(U+=D,O-=D*o),T(L,I+k,U),T(L,I+w,O),L};function T(L,I,U){L[I+N]=U>>24&255,L[I+Y]=U>>16&255,L[I+H]=U>>8&255,L[I+E]=255&U}}function A(N,Y,H,E,k,w){return function(L,I){C(L,I|=0);var U=T(L,I+k);return _(T(L,I+w),U)};function T(L,I){return 16777216*L[I+N]+(L[I+Y]<<16|L[I+H]<<8|L[I+E])}}function C(N,Y){if(N=N&&N.length,N==null)throw new TypeError("Invalid Buffer");if(N<Y+8)throw new RangeError("Out of range")}function R(N){return(9<N?"":"0")+(0|N)}function M(N,Y){return(l+(0|N)).substr(-Y)}})()})(N3e);var TPt=N3e.exports;const BM=si(TPt),kPt="ERR_IPNS_EXPIRED_RECORD",M3e="ERR_UNRECOGNIZED_VALIDITY",og="ERR_SIGNATURE_VERIFICATION",Lie="ERR_UNDEFINED_PARAMETER",CPt="ERR_INVALID_RECORD_DATA",IPt="ERR_INVALID_VALUE",RPt="ERR_INVALID_EMBEDDED_KEY",PPt="ERR_RECORD_TOO_LARGE";var Uu;(function(t){(function(n){n.EOL="EOL"})(t.ValidityType||(t.ValidityType={}));let e;(function(n){n[n.EOL=0]="EOL"})(e||(e={})),function(n){n.codec=()=>Xo(e)}(t.ValidityType||(t.ValidityType={}));let r;t.codec=()=>(r==null&&(r=Xr((n,i,s={})=>{s.lengthDelimited!==!1&&i.fork(),n.value!=null&&(i.uint32(10),i.bytes(n.value)),n.signatureV1!=null&&(i.uint32(18),i.bytes(n.signatureV1)),n.validityType!=null&&(i.uint32(24),t.ValidityType.codec().encode(n.validityType,i)),n.validity!=null&&(i.uint32(34),i.bytes(n.validity)),n.sequence!=null&&(i.uint32(40),i.uint64(n.sequence)),n.ttl!=null&&(i.uint32(48),i.uint64(n.ttl)),n.pubKey!=null&&(i.uint32(58),i.bytes(n.pubKey)),n.signatureV2!=null&&(i.uint32(66),i.bytes(n.signatureV2)),n.data!=null&&(i.uint32(74),i.bytes(n.data)),s.lengthDelimited!==!1&&i.ldelim()},(n,i)=>{const s={},a=i==null?n.len:n.pos+i;for(;n.pos<a;){const o=n.uint32();switch(o>>>3){case 1:s.value=n.bytes();break;case 2:s.signatureV1=n.bytes();break;case 3:s.validityType=t.ValidityType.codec().decode(n);break;case 4:s.validity=n.bytes();break;case 5:s.sequence=n.uint64();break;case 6:s.ttl=n.uint64();break;case 7:s.pubKey=n.bytes();break;case 8:s.signatureV2=n.bytes();break;case 9:s.data=n.bytes();break;default:n.skipType(o&7);break}}return s})),r),t.encode=n=>Yr(n,t.codec()),t.decode=n=>Gr(n,t.codec())})(Uu||(Uu={}));const Fie=_o("ipns:utils"),L3e=pt("/ipns/"),BPt=114,DPt=async(t,e)=>{if(e==null||t==null){const n=new Error("one or more of the provided parameters are not defined");throw Fie.error(n),$i(n,Lie)}let r;if(e.pubKey!=null){try{r=wm(e.pubKey)}catch(i){throw Fie.error(i),i}if(!(await Yu(e.pubKey)).equals(t))throw $i(new Error("Embedded public key did not match PeerID"),RPt)}else t.publicKey!=null&&(r=wm(t.publicKey));if(r!=null)return r;throw $i(new Error("no public key is available"),Lie)},OPt=t=>{const e=pt("ipns-signature:");return Yi([e,t])},F3e=t=>"signatureV1"in t?Uu.encode({value:pt(t.value),signatureV1:t.signatureV1,validityType:t.validityType,validity:pt(t.validity),sequence:t.sequence,ttl:t.ttl,pubKey:t.pubKey,signatureV2:t.signatureV2,data:t.data}):Uu.encode({pubKey:t.pubKey,signatureV2:t.signatureV2,data:t.data});function b8(t){const e=Uu.decode(t);if(e.sequence!=null&&(e.sequence=BigInt(e.sequence)),e.ttl!=null&&(e.ttl=BigInt(e.ttl)),e.signatureV2==null||e.data==null)throw $i(new Error("missing data or signatureV2"),og);const r=$3e(e.data),n=LPt(r.Value),i=vt(r.Validity);if(e.value!=null&&e.signatureV1!=null)return FPt(e),{value:n,validityType:Uu.ValidityType.EOL,validity:i,sequence:r.Sequence,ttl:r.TTL,pubKey:e.pubKey,signatureV1:e.signatureV1,signatureV2:e.signatureV2,data:e.data};if(e.signatureV2!=null)return{value:n,validityType:Uu.ValidityType.EOL,validity:i,sequence:r.Sequence,ttl:r.TTL,pubKey:e.pubKey,signatureV2:e.signatureV2,data:e.data};throw new Error("invalid record: does not include signatureV1 or signatureV2")}const NPt=t=>Yi([L3e,t.toBytes()]),MPt=t=>ul(t.slice(L3e.length)),$3e=t=>{const e=kg(t);if(e.ValidityType===0)e.ValidityType=Uu.ValidityType.EOL;else throw $i(new Error("Unknown validity type"),M3e);return Number.isInteger(e.Sequence)&&(e.Sequence=BigInt(e.Sequence)),Number.isInteger(e.TTL)&&(e.TTL=BigInt(e.TTL)),e},LPt=t=>{if(t!=null){if(iA(t))return`/ipns/${t.toCID().toString(Md)}`;if(t instanceof Uint8Array){const n=vt(t);n.startsWith("/")&&(t=n)}const e=t.toString().trim();if(e.startsWith("/")&&e.length>1)return e;const r=Dt.asCID(t);if(r!=null)return r.code===BPt?`/ipns/${r.toString(Md)}`:`/ipfs/${r.toV1().toString()}`;try{return t instanceof Uint8Array?`/ipfs/${Dt.decode(t).toV1().toString()}`:`/ipfs/${Dt.parse(e).toV1().toString()}`}catch{}}throw $i(new Error("Value must be a valid content path starting with /"),IPt)},FPt=t=>{if(t.data==null)throw $i(new Error("Record data is missing"),CPt);const e=$3e(t.data);if(!Kr(e.Value,t.value??new Uint8Array(0)))throw $i(new Error('Field "value" did not match between protobuf and CBOR'),og);if(!Kr(e.Validity,t.validity??new Uint8Array(0)))throw $i(new Error('Field "validity" did not match between protobuf and CBOR'),og);if(e.ValidityType!==t.validityType)throw $i(new Error('Field "validityType" did not match between protobuf and CBOR'),og);if(e.Sequence!==t.sequence)throw $i(new Error('Field "sequence" did not match between protobuf and CBOR'),og);if(e.TTL!==t.ttl)throw $i(new Error('Field "ttl" did not match between protobuf and CBOR'),og)},ix=_o("ipns:validator"),$Pt=1024*10,UPt=async(t,e)=>{const r=b8(e);let n;try{const i=OPt(r.data);n=await t.verify(i,r.signatureV2)}catch{n=!1}if(!n)throw ix.error("record signature verification failed"),$i(new Error("record signature verification failed"),og);if(r.validityType===Uu.ValidityType.EOL){if(BM.fromString(r.validity).toDate().getTime()<Date.now())throw ix.error("record has expired"),$i(new Error("record has expired"),kPt)}else if(r.validityType!=null)throw ix.error("unrecognized validity type"),$i(new Error("unrecognized validity type"),M3e);ix("ipns record for %s is valid",r.value)};async function U3e(t,e){if(e.byteLength>$Pt)throw $i(new Error("record too large"),PPt);const r=MPt(t),n=b8(e),i=await DPt(r,n);await UPt(i,e)}async function*$ie(t){const e=/\r?\n/,r=new TextDecoder("utf8");let n="";for await(let i of t){typeof i=="string"&&(i=new TextEncoder().encode(i)),n+=r.decode(i,{stream:!0});const s=n.split(e);n=s.pop()??"";for(let a=0;a<s.length;a++)yield JSON.parse(s[a])}n+=r.decode(),n!==""&&(yield JSON.parse(n))}const DM=pt("/ipns/");function Uie(t){return Kr(t.subarray(0,DM.byteLength),DM)}const Vie=t=>ul(t.slice(DM.length));class VPt{client;constructor(e){this.client=e}async*findProviders(e,r={}){yield*d0(this.client.getProviders(e,r),n=>({id:n.ID,multiaddrs:n.Addrs??[]}))}async provide(){}async put(e,r,n){if(!Uie(e))return;const i=Vie(e),s=b8(r);await this.client.putIPNS(i,s,n)}async get(e,r){if(!Uie(e))throw new ye("Not found","ERR_NOT_FOUND");const n=Vie(e);try{const i=await this.client.getIPNS(n,r);return F3e(i)}catch(i){throw i.code==="ERR_BAD_RESPONSE"?new ye("Not found","ERR_NOT_FOUND"):i}}}class jPt{client;constructor(e){this.client=e}async findPeer(e,r={}){const n=await mv(this.client.getPeers(e,r));if(n!=null)return{id:n.ID,multiaddrs:n.Addrs??[]};throw new ye("Not found","ERR_NOT_FOUND")}async*getClosestPeers(e,r={}){}}const Io=_o("delegated-routing-v1-http-api-client"),jie={concurrentRequests:4,timeout:3e4};class zPt{started;httpQueue;shutDownController;clientUrl;timeout;contentRouting;peerRouting;constructor(e,r={}){this.started=!1,this.shutDownController=new AbortController,Zt(1/0,this.shutDownController.signal),this.httpQueue=new sh({concurrency:r.concurrentRequests??jie.concurrentRequests}),this.clientUrl=e instanceof URL?e:new URL(e),this.timeout=r.timeout??jie.timeout,this.contentRouting=new VPt(this),this.peerRouting=new jPt(this)}get[ev](){return this.contentRouting}get[tv](){return this.peerRouting}isStarted(){return this.started}start(){this.started=!0}stop(){this.httpQueue.clear(),this.shutDownController.abort(),this.started=!1}async*getProviders(e,r={}){Io("getProviders starts: %c",e);const n=AbortSignal.timeout(this.timeout),i=us([this.shutDownController.signal,n,r.signal]);Zt(1/0,n,i);const s=fn(),a=fn();this.httpQueue.add(async()=>(s.resolve(),a.promise));try{await s.promise;const o=`${this.clientUrl}routing/v1/providers/${e.toString()}`,l=await fetch(o,{headers:{Accept:"application/x-ndjson"},signal:i});if(l.status===404)throw new ye("No matching records found.","ERR_NOT_FOUND");if(l.status===422)throw new ye("Request does not conform to schema or semantic constraints.","ERR_INVALID_REQUEST");if(l.body==null)throw new ye("Routing response had no body","ERR_BAD_RESPONSE");if(l.headers.get("Content-Type")==="application/json"){const f=await l.json();for(const h of f.Providers){const d=this.#e(h);d!=null&&(yield d)}}else for await(const f of $ie(Mie(l.body))){const h=this.#e(f);h!=null&&(yield h)}}catch(o){Io.error("getProviders errored:",o)}finally{i.clear(),a.resolve(),Io("getProviders finished: %c",e)}}async*getPeers(e,r={}){Io("getPeers starts: %c",e);const n=AbortSignal.timeout(this.timeout),i=us([this.shutDownController.signal,n,r.signal]);Zt(1/0,n,i);const s=fn(),a=fn();this.httpQueue.add(async()=>(s.resolve(),a.promise));try{await s.promise;const o=`${this.clientUrl}routing/v1/peers/${e.toCID().toString()}`,l=await fetch(o,{headers:{Accept:"application/x-ndjson"},signal:i});if(l.status===404)throw new ye("No matching records found.","ERR_NOT_FOUND");if(l.status===422)throw new ye("Request does not conform to schema or semantic constraints.","ERR_INVALID_REQUEST");if(l.body==null)throw new ye("Routing response had no body","ERR_BAD_RESPONSE");if(l.headers.get("Content-Type")==="application/json"){const f=await l.json();for(const h of f.Peers){const d=this.#e(h);d!=null&&(yield d)}}else for await(const f of $ie(Mie(l.body))){const h=this.#e(f);h!=null&&(yield h)}}catch(o){Io.error("getPeers errored:",o)}finally{i.clear(),a.resolve(),Io("getPeers finished: %c",e)}}async getIPNS(e,r={}){Io("getIPNS starts: %c",e);const n=AbortSignal.timeout(this.timeout),i=us([this.shutDownController.signal,n,r.signal]);Zt(1/0,n,i);const s=fn(),a=fn();this.httpQueue.add(async()=>(s.resolve(),a.promise));const o=`${this.clientUrl}routing/v1/ipns/${e.toCID().toString()}`;try{await s.promise;const l=await fetch(o,{headers:{Accept:"application/vnd.ipfs.ipns-record"},signal:i});if(Io("getIPNS GET %s %d",o,l.status),l.status===404)throw new ye("No matching records found.","ERR_NOT_FOUND");if(l.status===422)throw new ye("Request does not conform to schema or semantic constraints.","ERR_INVALID_REQUEST");if(l.body==null)throw new ye("GET ipns response had no body","ERR_BAD_RESPONSE");const u=await l.arrayBuffer(),f=new Uint8Array(u,0,u.byteLength);return r.validate!==!1&&await U3e(NPt(e),f),b8(f)}catch(c){throw Io.error("getIPNS GET %s error:",o,c),c}finally{i.clear(),a.resolve(),Io("getIPNS finished: %c",e)}}async putIPNS(e,r,n={}){Io("putIPNS starts: %c",e);const i=AbortSignal.timeout(this.timeout),s=us([this.shutDownController.signal,i,n.signal]);Zt(1/0,i,s);const a=fn(),o=fn();this.httpQueue.add(async()=>(a.resolve(),o.promise));const c=`${this.clientUrl}routing/v1/ipns/${e.toCID().toString()}`;try{await a.promise;const l=F3e(r),f=await fetch(c,{method:"PUT",headers:{"Content-Type":"application/vnd.ipfs.ipns-record"},body:l,signal:s});if(Io("putIPNS PUT %s %d",c,f.status),f.status!==200)throw new ye("PUT ipns response had status other than 200","ERR_BAD_RESPONSE")}catch(l){throw Io.error("putIPNS PUT %s error:",c,l.stack),l}finally{s.clear(),o.resolve(),Io("putIPNS finished: %c",e)}}#e(e){try{const r=[],n=e.Addrs?.map(Wr)??[];return e.Protocols!=null&&r.push(...e.Protocols),e.Protocol!=null&&(r.push(e.Protocol),delete e.Protocol),{...e,Schema:"peer",ID:ti(e.ID),Addrs:n,Protocols:r}}catch(r){Io.error("could not conform record to peer schema",r)}}}function qPt(t,e={}){return new zPt(new URL(t),e)}const zie="[a-fA-F\\d:]",x1=t=>t&&t.includeBoundaries?`(?:(?<=\\s|^)(?=${zie})|(?<=${zie})(?=\\s|$))`:"",xu="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",ks="[a-fA-F\\d]{1,4}",gT=`
(?:
(?:${ks}:){7}(?:${ks}|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8
(?:${ks}:){6}(?:${xu}|:${ks}|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4
(?:${ks}:){5}(?::${xu}|(?::${ks}){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4
(?:${ks}:){4}(?:(?::${ks}){0,1}:${xu}|(?::${ks}){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4
(?:${ks}:){3}(?:(?::${ks}){0,2}:${xu}|(?::${ks}){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4
(?:${ks}:){2}(?:(?::${ks}){0,3}:${xu}|(?::${ks}){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4
(?:${ks}:){1}(?:(?::${ks}){0,4}:${xu}|(?::${ks}){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4
(?::(?:(?::${ks}){0,5}:${xu}|(?::${ks}){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4
)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1
`.replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),HPt=new RegExp(`(?:^${xu}$)|(?:^${gT}$)`),WPt=new RegExp(`^${xu}$`),KPt=new RegExp(`^${gT}$`),mT=t=>t&&t.exact?HPt:new RegExp(`(?:${x1(t)}${xu}${x1(t)})|(?:${x1(t)}${gT}${x1(t)})`,"g");mT.v4=t=>t&&t.exact?WPt:new RegExp(`${x1(t)}${xu}${x1(t)}`,"g");mT.v6=t=>t&&t.exact?KPt:new RegExp(`${x1(t)}${gT}${x1(t)}`,"g");function GPt(t){const e=(...r)=>t(...r);return Object.defineProperty(e,"name",{value:`functionTimeout(${t.name||"<anonymous>"})`,configurable:!0}),e}const{toString:YPt}=Object.prototype;function XPt(t){return YPt.call(t)==="[object RegExp]"}const qie={global:"g",ignoreCase:"i",multiline:"m",dotAll:"s",sticky:"y",unicode:"u"};function ZPt(t,e={}){if(!XPt(t))throw new TypeError("Expected a RegExp instance");const r=Object.keys(qie).map(i=>(typeof e[i]=="boolean"?e[i]:t[i])?qie[i]:"").join(""),n=new RegExp(e.source||t.source,r);return n.lastIndex=typeof e.lastIndex=="number"?e.lastIndex:t.lastIndex,n}function V3e(t,e,{timeout:r}={}){try{return GPt(()=>ZPt(t).test(e),{timeout:r})()}catch(n){throw n}}const JPt=15,QPt=45,j3e={timeout:400};function Hie(t){return t.length>QPt?!1:V3e(mT.v6({exact:!0}),t,j3e)}function eBt(t){return t.length>JPt?!1:V3e(mT.v4({exact:!0}),t,j3e)}const Wie={http:"80",https:"443",ws:"80",wss:"443"},tBt=["http","https","ws","wss"];function rBt(t,e){e=e??{};const r=e.defaultDnsType??"dns4",{scheme:n,hostname:i,port:s}=nBt(t),o="/"+[iBt(i,r),sBt(s,n),aBt(n)].filter(c=>!!c).reduce((c,l)=>c.concat(l),[]).join("/");return Wr(o)}function nBt(t){const[e]=t.split(":");tBt.includes(e)||(t="http"+t.substring(e.length));let{protocol:r,hostname:n,port:i}=new URL(t);if(i==null||i===""){const s=oBt(e);s!=null&&(i=s),s==null&&r==="http:"&&(i="80")}return{scheme:e,hostname:n,port:i}}function iBt(t,e){if(!(t==null||t==="")){if(eBt(t))return["ip4",t];if(Hie(t))return["ip6",t];if(t[0]==="["){const r=t.substring(1,t.length-1);if(Hie(r))return["ip6",r]}return[e,t]}}function sBt(t,e){if(!(t==null||t===""))return e==="udp"?["udp",t]:["tcp",t]}function aBt(t){if(t.match(/^tcp$|^udp$/)==null)return[t]}function oBt(t){if(!(t==null||t===""||Wie[t]==null))return Wie[t]}const cBt=["https://trustless-gateway.link","https://4everland.io"],lBt=2336,uBt=Symbol.for("nodejs.util.inspect.custom");class fBt{type="url";multihash;privateKey;publicKey;url;constructor(e){this.url=e.toString(),this.multihash=ah.digest(pt(this.url))}[uBt](){return`PeerId(${this.url})`}[nA]=!0;toString(){return this.toCID().toString()}toCID(){return Dt.createV1(lBt,this.multihash)}toBytes(){return this.toCID().bytes}equals(e){return e==null?!1:(e instanceof Uint8Array&&(e=vt(e)),e.toString()===this.toString())}}function hBt(t){return t=t.toString(),{id:new fBt(new URL(t)),multiaddrs:[rBt(t)]}}class dBt{gateways;constructor(e={}){this.gateways=(e.gateways??cBt).map(r=>hBt(r))}async*findProviders(e,r){yield*this.gateways.toSorted(()=>Math.random()>.5?1:-1).map(n=>({...n,protocols:["transport-ipfs-gateway-http"]}))}}function pBt(t={}){return new dBt(t)}class gBt{libp2p;constructor(e){this.libp2p=e}async provide(e,r){await this.libp2p.contentRouting.provide(e,r)}async*findProviders(e,r){yield*this.libp2p.contentRouting.findProviders(e,r)}async put(e,r,n){await this.libp2p.contentRouting.put(e,r,n)}async get(e,r){return this.libp2p.contentRouting.get(e,r)}async findPeer(e,r){return this.libp2p.peerRouting.findPeer(e,r)}async*getClosestPeers(e,r){yield*this.libp2p.peerRouting.getClosestPeers(e,r)}}function mBt(t){return new gBt(t)}function yBt(t){return t=t??new Error("Not Found"),$i(t,"ERR_NOT_FOUND")}const vBt="SHARDING";function bBt(t){return t[Symbol.asyncIterator]!=null}function Kie(t,e){return bBt(t)?async function*(){yield*(await QE(t)).sort(e)}():function*(){yield*QE(t).sort(e)}()}class wBt{put(e,r,n){return Promise.reject(new Error(".put is not implemented"))}get(e,r){return Promise.reject(new Error(".get is not implemented"))}has(e,r){return Promise.reject(new Error(".has is not implemented"))}delete(e,r){return Promise.reject(new Error(".delete is not implemented"))}async*putMany(e,r={}){for await(const{key:n,value:i}of e)await this.put(n,i,r),yield n}async*getMany(e,r={}){for await(const n of e)yield{key:n,value:await this.get(n,r)}}async*deleteMany(e,r={}){for await(const n of e)await this.delete(n,r),yield n}batch(){let e=[],r=[];return{put(n,i){e.push({key:n,value:i})},delete(n){r.push(n)},commit:async n=>{await $1(this.putMany(e,n)),e=[],await $1(this.deleteMany(r,n)),r=[]}}}async*_all(e,r){throw new Error("._all is not implemented")}async*_allKeys(e,r){throw new Error("._allKeys is not implemented")}query(e,r){let n=this._all(e,r);if(e.prefix!=null){const i=e.prefix;n=l1(n,s=>s.key.toString().startsWith(i))}if(Array.isArray(e.filters)&&(n=e.filters.reduce((i,s)=>l1(i,s),n)),Array.isArray(e.orders)&&(n=e.orders.reduce((i,s)=>Kie(i,s),n)),e.offset!=null){let i=0;const s=e.offset;n=l1(n,()=>i++>=s)}return e.limit!=null&&(n=d9(n,e.limit)),n}queryKeys(e,r){let n=this._allKeys(e,r);if(e.prefix!=null){const i=e.prefix;n=l1(n,s=>s.toString().startsWith(i))}if(Array.isArray(e.filters)&&(n=e.filters.reduce((i,s)=>l1(i,s),n)),Array.isArray(e.orders)&&(n=e.orders.reduce((i,s)=>Kie(i,s),n)),e.offset!=null){const i=e.offset;let s=0;n=l1(n,()=>s++>=i)}return e.limit!=null&&(n=d9(n,e.limit)),n}}class z3e extends wBt{data;constructor(){super(),this.data=new Map}put(e,r){return this.data.set(e.toString(),r),e}get(e){const r=this.data.get(e.toString());if(r==null)throw yBt();return r}has(e){return this.data.has(e.toString())}delete(e){this.data.delete(e.toString())}*_all(){for(const[e,r]of this.data.entries())yield{key:new Ni(e),value:r}}*_allKeys(){for(const e of this.data.keys())yield new Ni(e)}}new Ni(vBt);_o("datastore:core:tiered");class _Bt extends vRt{libp2p;constructor(e){super({...e,components:{libp2p:e.libp2p}}),this.libp2p=e.libp2p}async start(){await super.start(),await this.libp2p.start()}async stop(){await super.stop(),await this.libp2p.stop()}}class xBt{readNext;haveNext;ended;nextResult;constructor(){this.ended=!1,this.readNext=fn(),this.haveNext=fn()}[Symbol.asyncIterator](){return this}async next(){if(this.nextResult==null&&await this.haveNext.promise,this.nextResult==null)throw new Error("HaveNext promise resolved but nextResult was undefined");const e=this.nextResult;return this.nextResult=void 0,this.readNext.resolve(),this.readNext=fn(),e}async throw(e){return this.ended=!0,e!=null&&(this.haveNext.promise.catch(()=>{}),this.haveNext.reject(e)),{done:!0,value:void 0}}async return(){const e={done:!0,value:void 0};return await this._push(void 0),e}async push(e,r){await this._push(e,r)}async end(e,r){e!=null?await this.throw(e):await this._push(void 0,r)}async _push(e,r){if(e!=null&&this.ended)throw new Error("Cannot push value onto an ended pushable");for(;this.nextResult!=null;)await this.readNext.promise;e!=null?this.nextResult={done:!1,value:e}:(this.ended=!0,this.nextResult={done:!0,value:void 0}),this.haveNext.resolve(),this.haveNext=fn(),await ma(this.readNext.promise,r?.signal,r)}}function EBt(){return new xBt}class SBt extends Error{name="UnexpectedEOFError";code="ERR_UNEXPECTED_EOF"}class ABt extends Error{code;constructor(e,r){super(e),this.code=r}}class TBt extends ABt{type;constructor(e){super(e,"ABORT_ERR"),this.type="aborted",this.name="AbortError"}}function q3e(t,e){const r=EBt();t.sink(r).catch(async a=>{await r.end(a)}),t.sink=async a=>{for await(const o of a)await r.push(o);await r.end()};let n=t.source;t.source[Symbol.iterator]!=null?n=t.source[Symbol.iterator]():t.source[Symbol.asyncIterator]!=null&&(n=t.source[Symbol.asyncIterator]());const i=new Pn;return{read:async(a,o)=>{o?.signal?.throwIfAborted();let c;const l=new Promise((u,f)=>{c=()=>{f(new TBt("Read aborted"))},o?.signal?.addEventListener("abort",c)});try{if(a==null){const{done:f,value:h}=await Promise.race([n.next(),l]);return f===!0?new Pn:h}for(;i.byteLength<a;){const{value:f,done:h}=await Promise.race([n.next(),l]);if(h===!0)throw new SBt("unexpected end of input");i.append(f)}const u=i.sublist(0,a);return i.consume(a),u}finally{c!=null&&o?.signal?.removeEventListener("abort",c)}},write:async(a,o)=>{o?.signal?.throwIfAborted(),a instanceof Uint8Array?await r.push(a,o):await r.push(a.subarray(),o)},unwrap:()=>{if(i.byteLength>0){const a=t.source;t.source=async function*(){e?.yieldBytes===!1?yield i:yield*i,yield*a}()}return t}}}class kBt extends Error{name="InvalidMessageLengthError";code="ERR_INVALID_MSG_LENGTH"}class CBt extends Error{name="InvalidDataLengthError";code="ERR_MSG_DATA_TOO_LONG"}class IBt extends Error{name="InvalidDataLengthLengthError";code="ERR_MSG_LENGTH_TOO_LONG"}function Iv(t,e={}){const r=q3e(t,e);e.maxDataLength!=null&&e.maxLengthLength==null&&(e.maxLengthLength=Ei(e.maxDataLength));const n=e?.lengthDecoder??u0,i=e?.lengthEncoder??Go;return{read:async a=>{let o=-1;const c=new Pn;for(;;){c.append(await r.read(1,a));try{o=n(c)}catch(l){if(l instanceof RangeError)continue;throw l}if(o<0)throw new kBt("Invalid message length");if(e?.maxLengthLength!=null&&c.byteLength>e.maxLengthLength)throw new IBt("message length length too long");if(o>-1)break}if(e?.maxDataLength!=null&&o>e.maxDataLength)throw new CBt("message length too long");return r.read(o,a)},write:async(a,o)=>{await r.write(new Pn(i(a.byteLength),a),o)},writeV:async(a,o)=>{const c=new Pn(...a.flatMap(l=>[i(l.byteLength),l]));await r.write(c,o)},unwrap:()=>r.unwrap()}}function Gie(){const t=fn();let e=!1;return{sink:async r=>{if(e)throw new Error("already piped");e=!0,t.resolve(r)},source:async function*(){yield*await t.promise}()}}function RBt(){const t=Gie(),e=Gie();return[{source:t.source,sink:e.sink},{source:e.source,sink:t.sink}]}const X4=65535,Yie=X4-16,w8=!!globalThis.process?.env?.DUMP_SESSION_KEYS;function WB(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`positive integer expected, not ${t}`)}function Xie(t){if(typeof t!="boolean")throw new Error(`boolean expected, not ${t}`)}function H3e(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}function Zf(t,...e){if(!H3e(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error(`Uint8Array expected of length ${e}, not of length=${t.length}`)}function Zie(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function PBt(t,e){Zf(t);const r=e.outputLen;if(t.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}/*! noble-ciphers - MIT License (c) 2023 Paul Miller (paulmillr.com) */const N1=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4)),BBt=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),DBt=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!DBt)throw new Error("Non little-endian hardware is not supported");function OBt(t){if(typeof t!="string")throw new Error(`string expected, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function OM(t){if(typeof t=="string")t=OBt(t);else if(H3e(t))t=NM(t);else throw new Error(`Uint8Array expected, got ${typeof t}`);return t}function NBt(t,e){if(e==null||typeof e!="object")throw new Error("options must be defined");return Object.assign(t,e)}function MBt(t,e){if(t.length!==e.length)return!1;let r=0;for(let n=0;n<t.length;n++)r|=t[n]^e[n];return r===0}const LBt=(t,e)=>(Object.assign(e,t),e);function Jie(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);const i=BigInt(32),s=BigInt(4294967295),a=Number(r>>i&s),o=Number(r&s),c=4,l=0;t.setUint32(e+c,a,n),t.setUint32(e+l,o,n)}function NM(t){return Uint8Array.from(t)}function Rv(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}const W3e=t=>Uint8Array.from(t.split("").map(e=>e.charCodeAt(0))),FBt=W3e("expand 16-byte k"),$Bt=W3e("expand 32-byte k"),UBt=N1(FBt),K3e=N1($Bt);K3e.slice();function In(t,e){return t<<e|t>>>32-e}function MM(t){return t.byteOffset%4===0}const sx=64,VBt=16,G3e=2**32-1,Qie=new Uint32Array;function jBt(t,e,r,n,i,s,a,o){const c=i.length,l=new Uint8Array(sx),u=N1(l),f=MM(i)&&MM(s),h=f?N1(i):Qie,d=f?N1(s):Qie;for(let g=0;g<c;a++){if(t(e,r,n,u,a,o),a>=G3e)throw new Error("arx: counter overflow");const p=Math.min(sx,c-g);if(f&&p===sx){const m=g/4;if(g%4!==0)throw new Error("arx: invalid block position");for(let y=0,v;y<VBt;y++)v=m+y,d[v]=h[v]^u[y];g+=sx;continue}for(let m=0,y;m<p;m++)y=g+m,s[y]=i[y]^l[m];g+=p}}function zBt(t,e){const{allowShortKeys:r,extendNonceFn:n,counterLength:i,counterRight:s,rounds:a}=NBt({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},e);if(typeof t!="function")throw new Error("core must be a function");return WB(i),WB(a),Xie(s),Xie(r),(o,c,l,u,f=0)=>{Zf(o),Zf(c),Zf(l);const h=l.length;if(u===void 0&&(u=new Uint8Array(h)),Zf(u),WB(f),f<0||f>=G3e)throw new Error("arx: counter overflow");if(u.length<h)throw new Error(`arx: output (${u.length}) is shorter than data (${h})`);const d=[];let g=o.length,p,m;if(g===32)d.push(p=NM(o)),m=K3e;else if(g===16&&r)p=new Uint8Array(32),p.set(o),p.set(o,16),m=UBt,d.push(p);else throw new Error(`arx: invalid 32-byte key, got length=${g}`);MM(c)||d.push(c=NM(c));const y=N1(p);if(n){if(c.length!==24)throw new Error("arx: extended nonce must be 24 bytes");n(m,y,N1(c.subarray(0,16)),y),c=c.subarray(16)}const v=16-i;if(v!==c.length)throw new Error(`arx: nonce must be ${v} or 16 bytes`);if(v!==12){const x=new Uint8Array(12);x.set(c,s?0:12-c.length),c=x,d.push(c)}const _=N1(c);return jBt(t,m,y,_,l,u,f,a),Rv(...d),u}}const Ca=(t,e)=>t[e++]&255|(t[e++]&255)<<8;class qBt{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,e=OM(e),Zf(e,32);const r=Ca(e,0),n=Ca(e,2),i=Ca(e,4),s=Ca(e,6),a=Ca(e,8),o=Ca(e,10),c=Ca(e,12),l=Ca(e,14);this.r[0]=r&8191,this.r[1]=(r>>>13|n<<3)&8191,this.r[2]=(n>>>10|i<<6)&7939,this.r[3]=(i>>>7|s<<9)&8191,this.r[4]=(s>>>4|a<<12)&255,this.r[5]=a>>>1&8190,this.r[6]=(a>>>14|o<<2)&8191,this.r[7]=(o>>>11|c<<5)&8065,this.r[8]=(c>>>8|l<<8)&8191,this.r[9]=l>>>5&127;for(let u=0;u<8;u++)this.pad[u]=Ca(e,16+2*u)}process(e,r,n=!1){const i=n?0:2048,{h:s,r:a}=this,o=a[0],c=a[1],l=a[2],u=a[3],f=a[4],h=a[5],d=a[6],g=a[7],p=a[8],m=a[9],y=Ca(e,r+0),v=Ca(e,r+2),_=Ca(e,r+4),x=Ca(e,r+6),A=Ca(e,r+8),C=Ca(e,r+10),R=Ca(e,r+12),M=Ca(e,r+14);let N=s[0]+(y&8191),Y=s[1]+((y>>>13|v<<3)&8191),H=s[2]+((v>>>10|_<<6)&8191),E=s[3]+((_>>>7|x<<9)&8191),k=s[4]+((x>>>4|A<<12)&8191),w=s[5]+(A>>>1&8191),T=s[6]+((A>>>14|C<<2)&8191),L=s[7]+((C>>>11|R<<5)&8191),I=s[8]+((R>>>8|M<<8)&8191),U=s[9]+(M>>>5|i),O=0,D=O+N*o+Y*(5*m)+H*(5*p)+E*(5*g)+k*(5*d);O=D>>>13,D&=8191,D+=w*(5*h)+T*(5*f)+L*(5*u)+I*(5*l)+U*(5*c),O+=D>>>13,D&=8191;let P=O+N*c+Y*o+H*(5*m)+E*(5*p)+k*(5*g);O=P>>>13,P&=8191,P+=w*(5*d)+T*(5*h)+L*(5*f)+I*(5*u)+U*(5*l),O+=P>>>13,P&=8191;let B=O+N*l+Y*c+H*o+E*(5*m)+k*(5*p);O=B>>>13,B&=8191,B+=w*(5*g)+T*(5*d)+L*(5*h)+I*(5*f)+U*(5*u),O+=B>>>13,B&=8191;let z=O+N*u+Y*l+H*c+E*o+k*(5*m);O=z>>>13,z&=8191,z+=w*(5*p)+T*(5*g)+L*(5*d)+I*(5*h)+U*(5*f),O+=z>>>13,z&=8191;let F=O+N*f+Y*u+H*l+E*c+k*o;O=F>>>13,F&=8191,F+=w*(5*m)+T*(5*p)+L*(5*g)+I*(5*d)+U*(5*h),O+=F>>>13,F&=8191;let X=O+N*h+Y*f+H*u+E*l+k*c;O=X>>>13,X&=8191,X+=w*o+T*(5*m)+L*(5*p)+I*(5*g)+U*(5*d),O+=X>>>13,X&=8191;let W=O+N*d+Y*h+H*f+E*u+k*l;O=W>>>13,W&=8191,W+=w*c+T*o+L*(5*m)+I*(5*p)+U*(5*g),O+=W>>>13,W&=8191;let q=O+N*g+Y*d+H*h+E*f+k*u;O=q>>>13,q&=8191,q+=w*l+T*c+L*o+I*(5*m)+U*(5*p),O+=q>>>13,q&=8191;let G=O+N*p+Y*g+H*d+E*h+k*f;O=G>>>13,G&=8191,G+=w*u+T*l+L*c+I*o+U*(5*m),O+=G>>>13,G&=8191;let ee=O+N*m+Y*p+H*g+E*d+k*h;O=ee>>>13,ee&=8191,ee+=w*f+T*u+L*l+I*c+U*o,O+=ee>>>13,ee&=8191,O=(O<<2)+O|0,O=O+D|0,D=O&8191,O=O>>>13,P+=O,s[0]=D,s[1]=P,s[2]=B,s[3]=z,s[4]=F,s[5]=X,s[6]=W,s[7]=q,s[8]=G,s[9]=ee}finalize(){const{h:e,pad:r}=this,n=new Uint16Array(10);let i=e[1]>>>13;e[1]&=8191;for(let o=2;o<10;o++)e[o]+=i,i=e[o]>>>13,e[o]&=8191;e[0]+=i*5,i=e[0]>>>13,e[0]&=8191,e[1]+=i,i=e[1]>>>13,e[1]&=8191,e[2]+=i,n[0]=e[0]+5,i=n[0]>>>13,n[0]&=8191;for(let o=1;o<10;o++)n[o]=e[o]+i,i=n[o]>>>13,n[o]&=8191;n[9]-=8192;let s=(i^1)-1;for(let o=0;o<10;o++)n[o]&=s;s=~s;for(let o=0;o<10;o++)e[o]=e[o]&s|n[o];e[0]=(e[0]|e[1]<<13)&65535,e[1]=(e[1]>>>3|e[2]<<10)&65535,e[2]=(e[2]>>>6|e[3]<<7)&65535,e[3]=(e[3]>>>9|e[4]<<4)&65535,e[4]=(e[4]>>>12|e[5]<<1|e[6]<<14)&65535,e[5]=(e[6]>>>2|e[7]<<11)&65535,e[6]=(e[7]>>>5|e[8]<<8)&65535,e[7]=(e[8]>>>8|e[9]<<5)&65535;let a=e[0]+r[0];e[0]=a&65535;for(let o=1;o<8;o++)a=(e[o]+r[o]|0)+(a>>>16)|0,e[o]=a&65535;Rv(n)}update(e){Zie(this);const{buffer:r,blockLen:n}=this;e=OM(e);const i=e.length;for(let s=0;s<i;){const a=Math.min(n-this.pos,i-s);if(a===n){for(;n<=i-s;s+=n)this.process(e,s);continue}r.set(e.subarray(s,s+a),this.pos),this.pos+=a,s+=a,this.pos===n&&(this.process(r,0,!1),this.pos=0)}return this}destroy(){Rv(this.h,this.r,this.buffer,this.pad)}digestInto(e){Zie(this),PBt(e,this),this.finished=!0;const{buffer:r,h:n}=this;let{pos:i}=this;if(i){for(r[i++]=1;i<16;i++)r[i]=0;this.process(r,0,!0)}this.finalize();let s=0;for(let a=0;a<8;a++)e[s++]=n[a]>>>0,e[s++]=n[a]>>>8;return e}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const n=e.slice(0,r);return this.destroy(),n}}function HBt(t){const e=(n,i)=>t(i).update(OM(n)).digest(),r=t(new Uint8Array(32));return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=n=>t(n),e}const WBt=HBt(t=>new qBt(t));function KBt(t,e,r,n,i,s=20){let a=t[0],o=t[1],c=t[2],l=t[3],u=e[0],f=e[1],h=e[2],d=e[3],g=e[4],p=e[5],m=e[6],y=e[7],v=i,_=r[0],x=r[1],A=r[2],C=a,R=o,M=c,N=l,Y=u,H=f,E=h,k=d,w=g,T=p,L=m,I=y,U=v,O=_,D=x,P=A;for(let z=0;z<s;z+=2)C=C+Y|0,U=In(U^C,16),w=w+U|0,Y=In(Y^w,12),C=C+Y|0,U=In(U^C,8),w=w+U|0,Y=In(Y^w,7),R=R+H|0,O=In(O^R,16),T=T+O|0,H=In(H^T,12),R=R+H|0,O=In(O^R,8),T=T+O|0,H=In(H^T,7),M=M+E|0,D=In(D^M,16),L=L+D|0,E=In(E^L,12),M=M+E|0,D=In(D^M,8),L=L+D|0,E=In(E^L,7),N=N+k|0,P=In(P^N,16),I=I+P|0,k=In(k^I,12),N=N+k|0,P=In(P^N,8),I=I+P|0,k=In(k^I,7),C=C+H|0,P=In(P^C,16),L=L+P|0,H=In(H^L,12),C=C+H|0,P=In(P^C,8),L=L+P|0,H=In(H^L,7),R=R+E|0,U=In(U^R,16),I=I+U|0,E=In(E^I,12),R=R+E|0,U=In(U^R,8),I=I+U|0,E=In(E^I,7),M=M+k|0,O=In(O^M,16),w=w+O|0,k=In(k^w,12),M=M+k|0,O=In(O^M,8),w=w+O|0,k=In(k^w,7),N=N+Y|0,D=In(D^N,16),T=T+D|0,Y=In(Y^T,12),N=N+Y|0,D=In(D^N,8),T=T+D|0,Y=In(Y^T,7);let B=0;n[B++]=a+C|0,n[B++]=o+R|0,n[B++]=c+M|0,n[B++]=l+N|0,n[B++]=u+Y|0,n[B++]=f+H|0,n[B++]=h+E|0,n[B++]=d+k|0,n[B++]=g+w|0,n[B++]=p+T|0,n[B++]=m+L|0,n[B++]=y+I|0,n[B++]=v+U|0,n[B++]=_+O|0,n[B++]=x+D|0,n[B++]=A+P|0}const GBt=zBt(KBt,{counterRight:!1,counterLength:4,allowShortKeys:!1}),YBt=new Uint8Array(16),ese=(t,e)=>{t.update(e);const r=e.length%16;r&&t.update(YBt.subarray(r))},XBt=new Uint8Array(32);function tse(t,e,r,n,i){const s=t(e,r,XBt),a=WBt.create(s);i&&ese(a,i),ese(a,n);const o=new Uint8Array(16),c=BBt(o);Jie(c,0,BigInt(i?i.length:0),!0),Jie(c,8,BigInt(n.length),!0),a.update(o);const l=a.digest();return Rv(s,o),l}const ZBt=t=>(e,r,n)=>(Zf(e,32),Zf(r),{encrypt(s,a){const o=s.length,c=o+16;a?Zf(a,c):a=new Uint8Array(c),t(e,r,s,a,1);const l=tse(t,e,r,a.subarray(0,-16),n);return a.set(l,o),Rv(l),a},decrypt(s,a){const o=s.length,c=o-16;if(o<16)throw new Error("encrypted data must be at least 16 bytes");a?Zf(a,c):a=new Uint8Array(c);const l=s.subarray(0,-16),u=s.subarray(-16),f=tse(t,e,r,l,n);if(!MBt(u,f))throw new Error("invalid tag");return t(e,r,l,a,1),Rv(f),a}}),rse=LBt({blockSize:64,nonceLength:12,tagLength:16},ZBt(GBt));function JBt(t,e,r){return _A(t),r===void 0&&(r=new Uint8Array(t.outputLen)),K6(t,rm(r),rm(e))}const KB=new Uint8Array([0]),nse=new Uint8Array;function QBt(t,e,r,n=32){if(_A(t),Ey(n),n>255*t.outputLen)throw new Error("Length should be <= 255*HashLen");const i=Math.ceil(n/t.outputLen);r===void 0&&(r=nse);const s=new Uint8Array(i*t.outputLen),a=K6.create(t,e),o=a._cloneInto(),c=new Uint8Array(a.outputLen);for(let l=0;l<i;l++)KB[0]=l+1,o.update(l===0?nse:c).update(r).update(KB).digestInto(c),s.set(c,t.outputLen*l),a._cloneInto(o);return a.destroy(),o.destroy(),c.fill(0),KB.fill(0),s.slice(0,n)}const eDt={hashSHA256(t){return w3(t.subarray())},getHKDF(t,e){const r=JBt(w3,e,t),i=QBt(w3,r,void 0,96),s=i.subarray(0,32),a=i.subarray(32,64),o=i.subarray(64,96);return[s,a,o]},generateX25519KeyPair(){const t=y5.utils.randomPrivateKey();return{publicKey:y5.getPublicKey(t),privateKey:t}},generateX25519KeyPairFromSeed(t){return{publicKey:y5.getPublicKey(t),privateKey:t}},generateX25519SharedKey(t,e){return y5.getSharedSecret(t.subarray(),e.subarray())},chaCha20Poly1305Encrypt(t,e,r,n){return rse(n,e,r).encrypt(t.subarray())},chaCha20Poly1305Decrypt(t,e,r,n,i){return rse(n,e,r).decrypt(t.subarray(),i)}},tDt=eDt;function rDt(t){return{generateKeypair:t.generateX25519KeyPair,dh:(e,r)=>t.generateX25519SharedKey(e.privateKey,r).subarray(0,32),encrypt:t.chaCha20Poly1305Encrypt,decrypt:t.chaCha20Poly1305Decrypt,hash:t.hashSHA256,hkdf:t.getHKDF}}const E9=t=>{const e=go(2);return e[0]=t>>8,e[1]=t,e};E9.bytes=2;const Jx=t=>{if(t.length<2)throw RangeError("Could not decode int16BE");if(t instanceof Uint8Array){let e=0;return e+=t[0]<<8,e+=t[1],e}return t.getUint16(0)};Jx.bytes=2;function nDt(t){return{xxHandshakeSuccesses:t.registerCounter("libp2p_noise_xxhandshake_successes_total",{help:"Total count of noise xxHandshakes successes_"}),xxHandshakeErrors:t.registerCounter("libp2p_noise_xxhandshake_error_total",{help:"Total count of noise xxHandshakes errors"}),encryptedPackets:t.registerCounter("libp2p_noise_encrypted_packets_total",{help:"Total count of noise encrypted packets successfully"}),decryptedPackets:t.registerCounter("libp2p_noise_decrypted_packets_total",{help:"Total count of noise decrypted packets"}),decryptErrors:t.registerCounter("libp2p_noise_decrypt_errors_total",{help:"Total count of noise decrypt errors"})}}function Y3e(t,e){!e.enabled||!w8||(t?(e(`LOCAL_STATIC_PUBLIC_KEY ${vt(t.publicKey,"hex")}`),e(`LOCAL_STATIC_PRIVATE_KEY ${vt(t.privateKey,"hex")}`)):e("Missing local static keys."))}function X3e(t,e){!e.enabled||!w8||(t?(e(`LOCAL_PUBLIC_EPHEMERAL_KEY ${vt(t.publicKey,"hex")}`),e(`LOCAL_PRIVATE_EPHEMERAL_KEY ${vt(t.privateKey,"hex")}`)):e("Missing local ephemeral keys."))}function iDt(t,e){!e.enabled||!w8||e(t?`REMOTE_STATIC_PUBLIC_KEY ${vt(t.subarray(),"hex")}`:"Missing remote static public key.")}function Z3e(t,e){!e.enabled||!w8||e(t?`REMOTE_EPHEMERAL_PUBLIC_KEY ${vt(t.subarray(),"hex")}`:"Missing remote ephemeral keys.")}function J3e(t,e,r){!r.enabled||!w8||(r(`CIPHER_STATE_1 ${t.n.getUint64()} ${t.k&&vt(t.k,"hex")}`),r(`CIPHER_STATE_2 ${e.n.getUint64()} ${e.k&&vt(e.k,"hex")}`))}function Pv(t,e){if(t.length!==e.length)throw new Error("Inputs should have the same length");const r=go(t.length);for(let n=0;n<t.length;n++)r[n]=t[n]^e[n];return r}class Oz extends Error{code;constructor(e="Unexpected Peer"){super(e),this.code=Oz.code}static code="ERR_UNEXPECTED_PEER"}class V3 extends Error{code;constructor(e="Invalid crypto exchange"){super(e),this.code=V3.code}static code="ERR_INVALID_CRYPTO_EXCHANGE"}const sDt=0,aDt=4294967295,oDt="Cipherstate has reached maximum n, a new handshake must be performed";class cDt{n;bytes;view;constructor(e=sDt){this.n=e,this.bytes=li(12),this.view=new DataView(this.bytes.buffer,this.bytes.byteOffset,this.bytes.byteLength),this.view.setUint32(4,e,!0)}increment(){this.n++,this.view.setUint32(4,this.n,!0)}getBytes(){return this.bytes}getUint64(){return this.n}assertValue(){if(this.n>aDt)throw new Error(oDt)}}const Ry=li(0);class ax{k;n;crypto;constructor(e,r=void 0,n=0){this.crypto=e,this.k=r,this.n=new cDt(n)}hasKey(){return!!this.k}encryptWithAd(e,r){if(!this.hasKey())return r;this.n.assertValue();const n=this.crypto.encrypt(r,this.n.getBytes(),e,this.k);return this.n.increment(),n}decryptWithAd(e,r,n){if(!this.hasKey())return r;this.n.assertValue();const i=this.crypto.decrypt(r,this.n.getBytes(),e,this.k,n);return this.n.increment(),i}}class lDt{cs;ck;h;crypto;constructor(e,r){this.crypto=e;const n=pt(r,"utf-8");this.h=fDt(e,n),this.ck=this.h,this.cs=new ax(e)}mixKey(e){const[r,n]=this.crypto.hkdf(this.ck,e);this.ck=r,this.cs=new ax(this.crypto,n)}mixHash(e){this.h=this.crypto.hash(new Pn(this.h,e))}encryptAndHash(e){const r=this.cs.encryptWithAd(this.h,e);return this.mixHash(r),r}decryptAndHash(e){const r=this.cs.decryptWithAd(this.h,e);return this.mixHash(e),r}split(){const[e,r]=this.crypto.hkdf(this.ck,Ry);return[new ax(this.crypto,e),new ax(this.crypto,r)]}}class uDt{ss;s;e;rs;re;initiator;crypto;constructor(e){const{crypto:r,protocolName:n,prologue:i,initiator:s,s:a,e:o,rs:c,re:l}=e;this.crypto=r,this.ss=new lDt(r,n),this.ss.mixHash(i),this.initiator=s,this.s=a,this.e=o,this.rs=c,this.re=l}writeE(){if(this.e)throw new Error("ephemeral keypair is already set");const e=this.crypto.generateKeypair();return this.ss.mixHash(e.publicKey),this.e=e,e.publicKey}writeS(){if(!this.s)throw new Error("static keypair is not set");return this.ss.encryptAndHash(this.s.publicKey)}writeEE(){if(!this.e)throw new Error("ephemeral keypair is not set");if(!this.re)throw new Error("remote ephemeral public key is not set");this.ss.mixKey(this.crypto.dh(this.e,this.re))}writeES(){if(this.initiator){if(!this.e)throw new Error("ephemeral keypair is not set");if(!this.rs)throw new Error("remote static public key is not set");this.ss.mixKey(this.crypto.dh(this.e,this.rs))}else{if(!this.s)throw new Error("static keypair is not set");if(!this.re)throw new Error("remote ephemeral public key is not set");this.ss.mixKey(this.crypto.dh(this.s,this.re))}}writeSE(){if(this.initiator){if(!this.s)throw new Error("static keypair is not set");if(!this.re)throw new Error("remote ephemeral public key is not set");this.ss.mixKey(this.crypto.dh(this.s,this.re))}else{if(!this.e)throw new Error("ephemeral keypair is not set");if(!this.rs)throw new Error("remote static public key is not set");this.ss.mixKey(this.crypto.dh(this.e,this.rs))}}readE(e,r=0){if(this.re)throw new Error("remote ephemeral public key is already set");if(e.byteLength<r+32)throw new Error("message is not long enough");this.re=e.sublist(r,r+32),this.ss.mixHash(this.re)}readS(e,r=0){if(this.rs)throw new Error("remote static public key is already set");const n=32+(this.ss.cs.hasKey()?16:0);if(e.byteLength<r+n)throw new Error("message is not long enough");const i=e.sublist(r,r+n);return this.rs=this.ss.decryptAndHash(i),n}readEE(){this.writeEE()}readES(){this.writeES()}readSE(){this.writeSE()}}class Q3e extends uDt{writeMessageA(e){return new Pn(this.writeE(),this.ss.encryptAndHash(e))}writeMessageB(e){const r=this.writeE();this.writeEE();const n=this.writeS();return this.writeES(),new Pn(r,n,this.ss.encryptAndHash(e))}writeMessageC(e){const r=this.writeS();return this.writeSE(),new Pn(r,this.ss.encryptAndHash(e))}readMessageA(e){try{return this.readE(e),this.ss.decryptAndHash(e.sublist(32))}catch(r){throw new V3(`handshake stage 0 validation fail: ${r.message}`)}}readMessageB(e){try{this.readE(e),this.readEE();const r=this.readS(e,32);return this.readES(),this.ss.decryptAndHash(e.sublist(32+r))}catch(r){throw new V3(`handshake stage 1 validation fail: ${r.message}`)}}readMessageC(e){try{const r=this.readS(e);return this.readSE(),this.ss.decryptAndHash(e.sublist(r))}catch(r){throw new V3(`handshake stage 2 validation fail: ${r.message}`)}}}function fDt(t,e){if(e.length<=32){const r=li(32);return r.set(e),r}else return t.hash(e)}var S9;(function(t){let e;t.codec=()=>(e==null&&(e=Xr((r,n,i={})=>{if(i.lengthDelimited!==!1&&n.fork(),r.webtransportCerthashes!=null)for(const s of r.webtransportCerthashes)n.uint32(10),n.bytes(s);i.lengthDelimited!==!1&&n.ldelim()},(r,n)=>{const i={webtransportCerthashes:[]},s=n==null?r.len:r.pos+n;for(;r.pos<s;){const a=r.uint32();switch(a>>>3){case 1:{i.webtransportCerthashes.push(r.bytes());break}default:{r.skipType(a&7);break}}}return i})),e),t.encode=r=>Yr(r,t.codec()),t.decode=r=>Gr(r,t.codec())})(S9||(S9={}));var A9;(function(t){let e;t.codec=()=>(e==null&&(e=Xr((r,n,i={})=>{i.lengthDelimited!==!1&&n.fork(),r.identityKey!=null&&r.identityKey.byteLength>0&&(n.uint32(10),n.bytes(r.identityKey)),r.identitySig!=null&&r.identitySig.byteLength>0&&(n.uint32(18),n.bytes(r.identitySig)),r.extensions!=null&&(n.uint32(34),S9.codec().encode(r.extensions,n)),i.lengthDelimited!==!1&&n.ldelim()},(r,n)=>{const i={identityKey:li(0),identitySig:li(0)},s=n==null?r.len:r.pos+n;for(;r.pos<s;){const a=r.uint32();switch(a>>>3){case 1:{i.identityKey=r.bytes();break}case 2:{i.identitySig=r.bytes();break}case 4:{i.extensions=S9.codec().decode(r,r.uint32());break}default:{r.skipType(a&7);break}}}return i})),e),t.encode=r=>Yr(r,t.codec()),t.decode=r=>Gr(r,t.codec())})(A9||(A9={}));async function e4e(t,e,r){const n=await t.sign(r4e(e));return A9.encode({identityKey:t.public.bytes,identitySig:n,extensions:r})}async function t4e(t,e,r){try{const n=A9.decode(t);if(r){const a=r.subarray();if(!Kr(a,n.identityKey))throw new Error(`Payload identity key ${vt(n.identityKey,"hex")} does not match expected remote identity key ${vt(a,"hex")}`)}if(!e)throw new Error("Remote static does not exist");const i=r4e(e);if(!await wm(n.identityKey).verify(i,n.identitySig))throw new Error("Invalid payload signature");return n}catch(n){throw new Oz(n.message)}}function r4e(t){const e=pt("noise-libp2p-static-key:");return t instanceof Uint8Array?Yi([e,t],e.length+t.length):(t.prepend(e),t)}async function hDt(t,e){const{log:r,connection:n,crypto:i,privateKey:s,prologue:a,s:o,remoteIdentityKey:c,extensions:l}=t,u=await e4e(s,o.publicKey,l),f=new Q3e({crypto:i,protocolName:"Noise_XX_25519_ChaChaPoly_SHA256",initiator:!0,prologue:a,s:o});Y3e(f.s,r),r.trace("Stage 0 - Initiator starting to send first message."),await n.write(f.writeMessageA(Ry),e),r.trace("Stage 0 - Initiator finished sending first message."),X3e(f.e,r),r.trace("Stage 1 - Initiator waiting to receive first message from responder...");const h=f.readMessageB(await n.read(e));r.trace("Stage 1 - Initiator received the message."),Z3e(f.re,r),iDt(f.rs,r),r.trace("Initiator going to check remote's signature...");const d=await t4e(h,f.rs,c);r.trace("All good with the signature!"),r.trace("Stage 2 - Initiator sending third handshake message."),await n.write(f.writeMessageC(u),e),r.trace("Stage 2 - Initiator sent message with signed payload.");const[g,p]=f.ss.split();return J3e(g,p,r),{payload:d,encrypt:m=>g.encryptWithAd(Ry,m),decrypt:(m,y)=>p.decryptWithAd(Ry,m,y)}}async function dDt(t,e){const{log:r,connection:n,crypto:i,privateKey:s,prologue:a,s:o,remoteIdentityKey:c,extensions:l}=t,u=await e4e(s,o.publicKey,l),f=new Q3e({crypto:i,protocolName:"Noise_XX_25519_ChaChaPoly_SHA256",initiator:!1,prologue:a,s:o});Y3e(f.s,r),r.trace("Stage 0 - Responder waiting to receive first message."),f.readMessageA(await n.read(e)),r.trace("Stage 0 - Responder received first message."),Z3e(f.re,r),r.trace("Stage 1 - Responder sending out first message with signed payload and static key."),await n.write(f.writeMessageB(u),e),r.trace("Stage 1 - Responder sent the second handshake message with signed payload."),X3e(f.e,r),r.trace("Stage 2 - Responder waiting for third handshake message...");const h=f.readMessageC(await n.read(e));r.trace("Stage 2 - Responder received the message, finished handshake.");const d=await t4e(h,f.rs,c),[g,p]=f.ss.split();return J3e(g,p,r),{payload:d,encrypt:m=>p.encryptWithAd(Ry,m),decrypt:(m,y)=>g.decryptWithAd(Ry,m,y)}}const ise=16;function pDt(t,e){return async function*(r){for await(const n of r)for(let i=0;i<n.length;i+=Yie){let s=i+Yie;s>n.length&&(s=n.length);let a;n instanceof Uint8Array?a=t.encrypt(n.subarray(i,s)):a=t.encrypt(n.sublist(i,s)),e?.encryptedPackets.increment(),yield new Pn(E9(a.byteLength),a)}}}function gDt(t,e){return async function*(r){for await(const n of r)for(let i=0;i<n.length;i+=X4){let s=i+X4;if(s>n.length&&(s=n.length),s-ise<i)throw new Error("Invalid chunk");const a=n.sublist(i,s),o=n.subarray(i,s-ise);try{const c=t.decrypt(a,o);e?.decryptedPackets.increment(),yield c}catch(c){throw e?.decryptErrors.increment(),c}}}}class mDt{protocol="/noise";crypto;prologue;staticKey;extensions;metrics;components;constructor(e,r={}){const{staticNoiseKey:n,extensions:i,crypto:s,prologueBytes:a}=r,{metrics:o}=e;this.components=e;const c=s??tDt;this.crypto=rDt(c),this.extensions=i,this.metrics=o?nDt(o):void 0,n?this.staticKey=c.generateX25519KeyPairFromSeed(n):this.staticKey=c.generateX25519KeyPair(),this.prologue=a??li(0)}[Symbol.toStringTag]="@chainsafe/libp2p-noise";[yo]=["@libp2p/connection-encryption","@chainsafe/libp2p-noise"];async secureOutbound(...e){const{localPeer:r,connection:n,remotePeer:i,signal:s}=this.parseArgs(e),a=Iv(n,{lengthEncoder:E9,lengthDecoder:Jx,maxDataLength:X4});if(!r.privateKey)throw new ye("local peerId does not contain private key","ERR_NO_PRIVATE_KEY");const o=await _m(r.privateKey),c=i?.publicKey,l=await this.performHandshakeInitiator(a,o,c,{signal:s}),u=await this.createSecureConnection(a,l);return n.source=u.source,n.sink=u.sink,{conn:n,remoteExtensions:l.payload.extensions,remotePeer:await Yu(l.payload.identityKey)}}async secureInbound(...e){const{localPeer:r,connection:n,remotePeer:i,signal:s}=this.parseArgs(e),a=Iv(n,{lengthEncoder:E9,lengthDecoder:Jx,maxDataLength:X4});if(!r.privateKey)throw new ye("local peerId does not contain private key","ERR_NO_PRIVATE_KEY");const o=await _m(r.privateKey),c=i?.publicKey,l=await this.performHandshakeResponder(a,o,c,{signal:s}),u=await this.createSecureConnection(a,l);return n.source=u.source,n.sink=u.sink,{conn:n,remoteExtensions:l.payload.extensions,remotePeer:await Yu(l.payload.identityKey)}}async performHandshakeInitiator(e,r,n,i){let s;try{s=await hDt({connection:e,privateKey:r,remoteIdentityKey:n,log:this.components.logger.forComponent("libp2p:noise:xxhandshake"),crypto:this.crypto,prologue:this.prologue,s:this.staticKey,extensions:this.extensions},i),this.metrics?.xxHandshakeSuccesses.increment()}catch(a){throw this.metrics?.xxHandshakeErrors.increment(),a}return s}async performHandshakeResponder(e,r,n,i){let s;try{s=await dDt({connection:e,privateKey:r,remoteIdentityKey:n,log:this.components.logger.forComponent("libp2p:noise:xxhandshake"),crypto:this.crypto,prologue:this.prologue,s:this.staticKey,extensions:this.extensions},i),this.metrics?.xxHandshakeSuccesses.increment()}catch(a){throw this.metrics?.xxHandshakeErrors.increment(),a}return s}async createSecureConnection(e,r){const[n,i]=RBt(),s=e.unwrap();return await is(n,pDt(r,this.metrics),s,a=>e0(a,{lengthDecoder:Jx}),gDt(r,this.metrics),n),i}parseArgs(e){return iA(e[0])?{localPeer:e[0],connection:e[1],remotePeer:e[2]}:{localPeer:this.components.peerId,connection:e[0],remotePeer:e[1]?.remotePeer,signal:e[1]?.signal}}}function n2(t={}){return e=>new mDt(e,t)}function n4e(t){if(t!=null){if(typeof t[Symbol.iterator]=="function")return t[Symbol.iterator]();if(typeof t[Symbol.asyncIterator]=="function")return t[Symbol.asyncIterator]();if(typeof t.next=="function")return t}throw new Error("argument is not an iterator or iterable")}const t3="ERR_INVALID_FRAME",i4e="ERR_UNREQUESTED_PING",s4e="ERR_NOT_MATCHING_PING",a4e="ERR_STREAM_ALREADY_EXISTS",o4e="ERR_DECODE_INVALID_VERSION",c4e="ERR_BOTH_CLIENTS",l4e="ERR_RECV_WINDOW_EXCEEDED",yDt=new Set([t3,i4e,s4e,a4e,o4e,c4e,l4e]),zp="ERR_INVALID_CONFIG",GB="ERR_MUXER_LOCAL_CLOSED",sse="ERR_MUXER_REMOTE_CLOSED",vDt="ERR_STREAM_ABORT",bDt="ERROR_MAX_OUTBOUND_STREAMS_EXCEEDED",wDt="ERR_DECODE_IN_PROGRESS",Nz=256*1024,_Dt=16*1024*1024,xDt={enableKeepAlive:!0,keepAliveInterval:3e4,maxInboundStreams:1e3,maxOutboundStreams:1e3,initialStreamWindowSize:Nz,maxStreamWindowSize:_Dt,maxMessageSize:64*1024};function EDt(t){if(t.keepAliveInterval<=0)throw new ye("keep-alive interval must be positive",zp);if(t.maxInboundStreams<0)throw new ye("max inbound streams must be larger or equal 0",zp);if(t.maxOutboundStreams<0)throw new ye("max outbound streams must be larger or equal 0",zp);if(t.initialStreamWindowSize<Nz)throw new ye("InitialStreamWindowSize must be larger or equal 256 kB",zp);if(t.maxStreamWindowSize<t.initialStreamWindowSize)throw new ye("MaxStreamWindowSize must be larger than the InitialStreamWindowSize",zp);if(t.maxStreamWindowSize>2**32-1)throw new ye("MaxStreamWindowSize must be less than equal MAX_UINT32",zp);if(t.maxMessageSize<1024)throw new ye("MaxMessageSize must be greater than a kilobyte",zp)}var zs;(function(t){t[t.Data=0]="Data",t[t.WindowUpdate=1]="WindowUpdate",t[t.Ping=2]="Ping",t[t.GoAway=3]="GoAway"})(zs||(zs={}));var ls;(function(t){t[t.SYN=1]="SYN",t[t.ACK=2]="ACK",t[t.FIN=4]="FIN",t[t.RST=8]="RST"})(ls||(ls={}));Object.values(ls).filter(t=>typeof t!="string");const SDt=0;var Rf;(function(t){t[t.NormalTermination=0]="NormalTermination",t[t.ProtocolError=1]="ProtocolError",t[t.InternalError=2]="InternalError"})(Rf||(Rf={}));const j3=12,ase=2**24;function ADt(t){if(t[0]!==SDt)throw new ye("Invalid frame version",o4e);return{type:t[1],flag:(t[2]<<8)+t[3],streamID:t[4]*ase+(t[5]<<16)+(t[6]<<8)+t[7],length:t[8]*ase+(t[9]<<16)+(t[10]<<8)+t[11]}}let TDt=class{source;buffer;frameInProgress;constructor(e){this.source=kDt(e),this.buffer=new Pn,this.frameInProgress=!1}async*emitFrames(){for await(const e of this.source)for(this.buffer.append(e);;){const r=this.readHeader();if(r===void 0)break;const{type:n,length:i}=r;n===zs.Data?(this.frameInProgress=!0,yield{header:r,readData:this.readBytes.bind(this,i)}):yield{header:r}}}readHeader(){if(this.frameInProgress)throw new ye("decoding frame already in progress",wDt);if(this.buffer.length<j3)return;const e=ADt(this.buffer.subarray(0,j3));return this.buffer.consume(j3),e}async readBytes(e){if(this.buffer.length<e){for await(const n of this.source)if(this.buffer.append(n),this.buffer.length>=e)break}const r=this.buffer.sublist(0,e);return this.buffer.consume(e),this.frameInProgress=!1,r}};function kDt(t){if(t[Symbol.iterator]!==void 0){const e=t[Symbol.iterator]();return e.return=void 0,{[Symbol.iterator](){return e}}}else if(t[Symbol.asyncIterator]!==void 0){const e=t[Symbol.asyncIterator]();return e.return=void 0,{[Symbol.asyncIterator](){return e}}}else throw new Error("a source must be either an iterable or an async iterable")}function ose(t){const e=new Uint8Array(j3);return e[1]=t.type,e[2]=t.flag>>>8,e[3]=t.flag,e[4]=t.streamID>>>24,e[5]=t.streamID>>>16,e[6]=t.streamID>>>8,e[7]=t.streamID,e[8]=t.length>>>24,e[9]=t.length>>>16,e[10]=t.length>>>8,e[11]=t.length,e}function CDt(t){return t==null?!1:typeof t.then=="function"&&typeof t.catch=="function"&&typeof t.finally=="function"}function u4e(t,e){const r=n4e(t).return?.();CDt(r)&&r.catch(n=>{e.error("could not cause iterator to return",n)})}const IDt="ERR_STREAM_RESET",RDt="ERR_SINK_INVALID_STATE",PDt=5e3;function YB(t){return t==null?!1:typeof t.then=="function"&&typeof t.catch=="function"&&typeof t.finally=="function"}class yT{id;direction;timeline;protocol;metadata;source;status;readStatus;writeStatus;log;sinkController;sinkEnd;closed;endErr;streamSource;onEnd;onCloseRead;onCloseWrite;onReset;onAbort;sendCloseWriteTimeout;sendingData;constructor(e){this.sinkController=new AbortController,this.sinkEnd=fn(),this.closed=fn(),this.log=e.log,this.status="open",this.readStatus="ready",this.writeStatus="ready",this.id=e.id,this.metadata=e.metadata??{},this.direction=e.direction,this.timeline={open:Date.now()},this.sendCloseWriteTimeout=e.sendCloseWriteTimeout??PDt,this.onEnd=e.onEnd,this.onCloseRead=e?.onCloseRead,this.onCloseWrite=e?.onCloseWrite,this.onReset=e?.onReset,this.onAbort=e?.onAbort,this.source=this.streamSource=qu({onEnd:r=>{r!=null?this.log.trace("source ended with error",r):this.log.trace("source ended"),this.onSourceEnd(r)}}),this.sink=this.sink.bind(this)}async sink(e){if(this.writeStatus!=="ready")throw new ye(`writable end state is "${this.writeStatus}" not "ready"`,RDt);try{this.writeStatus="writing";const r={signal:this.sinkController.signal};if(this.direction==="outbound"){const i=this.sendNewStream(r);YB(i)&&await i}const n=()=>{u4e(e,this.log)};try{this.sinkController.signal.addEventListener("abort",n),this.log.trace("sink reading from source");for await(let i of e){i=i instanceof Uint8Array?new Pn(i):i;const s=this.sendData(i,r);YB(s)&&(this.sendingData=fn(),await s,this.sendingData.resolve(),this.sendingData=void 0)}}finally{this.sinkController.signal.removeEventListener("abort",n)}this.log.trace('sink finished reading from source, write status is "%s"',this.writeStatus),this.writeStatus==="writing"&&(this.writeStatus="closing",this.log.trace("send close write to remote"),await this.sendCloseWrite({signal:AbortSignal.timeout(this.sendCloseWriteTimeout)}),this.writeStatus="closed"),this.onSinkEnd()}catch(r){throw this.log.trace("sink ended with error, calling abort with error",r),this.abort(r),r}finally{this.log.trace("resolve sink end"),this.sinkEnd.resolve()}}onSourceEnd(e){this.timeline.closeRead==null&&(this.timeline.closeRead=Date.now(),this.readStatus="closed",e!=null&&this.endErr==null&&(this.endErr=e),this.onCloseRead?.(),this.timeline.closeWrite!=null?(this.log.trace("source and sink ended"),this.timeline.close=Date.now(),this.status!=="aborted"&&this.status!=="reset"&&(this.status="closed"),this.onEnd!=null&&this.onEnd(this.endErr),this.closed.resolve()):this.log.trace("source ended, waiting for sink to end"))}onSinkEnd(e){this.timeline.closeWrite==null&&(this.timeline.closeWrite=Date.now(),this.writeStatus="closed",e!=null&&this.endErr==null&&(this.endErr=e),this.onCloseWrite?.(),this.timeline.closeRead!=null?(this.log.trace("sink and source ended"),this.timeline.close=Date.now(),this.status!=="aborted"&&this.status!=="reset"&&(this.status="closed"),this.onEnd!=null&&this.onEnd(this.endErr),this.closed.resolve()):this.log.trace("sink ended, waiting for source to end"))}async close(e){this.log.trace("closing gracefully"),this.status="closing",await ma(Promise.all([this.closeWrite(e),this.closeRead(e),this.closed.promise]),e?.signal),this.status="closed",this.log.trace("closed gracefully")}async closeRead(e={}){if(this.readStatus==="closing"||this.readStatus==="closed")return;this.log.trace('closing readable end of stream with starting read status "%s"',this.readStatus);const r=this.readStatus;this.readStatus="closing",this.status!=="reset"&&this.status!=="aborted"&&this.timeline.closeRead==null&&(this.log.trace("send close read to remote"),await this.sendCloseRead(e)),r==="ready"&&(this.log.trace("ending internal source queue with %d queued bytes",this.streamSource.readableLength),this.streamSource.end()),this.log.trace("closed readable end of stream")}async closeWrite(e={}){this.writeStatus==="closing"||this.writeStatus==="closed"||(this.log.trace('closing writable end of stream with starting write status "%s"',this.writeStatus),this.writeStatus==="ready"&&(this.log.trace("sink was never sunk, sink an empty array"),await ma(this.sink([]),e.signal)),this.writeStatus==="writing"&&(this.sendingData!=null&&await ma(this.sendingData.promise,e.signal),this.log.trace("aborting source passed to .sink"),this.sinkController.abort(),await ma(this.sinkEnd.promise,e.signal)),this.writeStatus="closed",this.log.trace("closed writable end of stream"))}abort(e){if(this.status==="closed"||this.status==="aborted"||this.status==="reset")return;this.log("abort with error",e),this.log("try to send reset to remote");const r=this.sendReset();YB(r)&&r.catch(n=>{this.log.error("error sending reset message",n)}),this.status="aborted",this.timeline.abort=Date.now(),this._closeSinkAndSource(e),this.onAbort?.(e)}reset(){if(this.status==="closed"||this.status==="aborted"||this.status==="reset")return;const e=new ye("stream reset",IDt);this.status="reset",this.timeline.reset=Date.now(),this._closeSinkAndSource(e),this.onReset?.()}_closeSinkAndSource(e){this._closeSink(e),this._closeSource(e)}_closeSink(e){this.writeStatus==="writing"&&(this.log.trace("end sink source"),this.sinkController.abort()),this.onSinkEnd(e)}_closeSource(e){this.readStatus!=="closing"&&this.readStatus!=="closed"&&(this.log.trace("ending source with %d bytes to be read by consumer",this.streamSource.readableLength),this.readStatus="closing",this.streamSource.end(e))}remoteCloseWrite(){if(this.readStatus==="closing"||this.readStatus==="closed"){this.log("received remote close write but local source is already closed");return}this.log.trace("remote close write"),this._closeSource()}remoteCloseRead(){if(this.writeStatus==="closing"||this.writeStatus==="closed"){this.log("received remote close read but local sink is already closed");return}this.log.trace("remote close read"),this._closeSink()}destroy(){if(this.status==="closed"||this.status==="aborted"||this.status==="reset"){this.log("received destroy but we are already closed");return}this.log.trace("stream destroyed"),this._closeSinkAndSource()}sourcePush(e){this.streamSource.push(e)}sourceReadableLength(){return this.streamSource.readableLength}}var Eu;(function(t){t[t.Init=0]="Init",t[t.SYNSent=1]="SYNSent",t[t.SYNReceived=2]="SYNReceived",t[t.Established=3]="Established",t[t.Finished=4]="Finished"})(Eu||(Eu={}));class BDt extends yT{name;state;config;_id;sendWindowCapacity;sendWindowCapacityUpdate;recvWindow;recvWindowCapacity;epochStart;getRTT;sendFrame;constructor(e){super({...e,onEnd:r=>{this.state=Eu.Finished,e.onEnd?.(r)}}),this.config=e.config,this._id=parseInt(e.id,10),this.name=e.name,this.state=e.state,this.sendWindowCapacity=Nz,this.recvWindow=this.config.initialStreamWindowSize,this.recvWindowCapacity=this.recvWindow,this.epochStart=Date.now(),this.getRTT=e.getRTT,this.sendFrame=e.sendFrame,this.source=kM(this.source,()=>{this.sendWindowUpdate()})}async sendNewStream(){}async sendData(e,r={}){for(e=e.sublist();e.byteLength!==0;){if(this.sendWindowCapacity===0&&(this.log?.trace("wait for send window capacity, status %s",this.status),await this.waitForSendWindowCapacity(r),this.status==="closed"||this.status==="aborted"||this.status==="reset")){this.log?.trace("%s while waiting for send window capacity",this.status);return}const n=Math.min(this.sendWindowCapacity,this.config.maxMessageSize-j3,e.length),i=this.getSendFlags();this.sendFrame({type:zs.Data,flag:i,streamID:this._id,length:n},e.sublist(0,n)),this.sendWindowCapacity-=n,e.consume(n)}}async sendReset(){this.sendFrame({type:zs.WindowUpdate,flag:ls.RST,streamID:this._id,length:0})}async sendCloseWrite(){const e=this.getSendFlags()|ls.FIN;this.sendFrame({type:zs.WindowUpdate,flag:e,streamID:this._id,length:0})}async sendCloseRead(){}async waitForSendWindowCapacity(e={}){if(this.sendWindowCapacity>0)return;let r,n;const i=()=>{this.status==="open"||this.status==="closing"?n(new ye("stream aborted",vDt)):r()};e.signal?.addEventListener("abort",i);try{await new Promise((s,a)=>{this.sendWindowCapacityUpdate=()=>{s()},n=a,r=s})}finally{e.signal?.removeEventListener("abort",i)}}handleWindowUpdate(e){this.log?.trace("stream received window update id=%s",this._id),this.processFlags(e.flag);const r=this.sendWindowCapacity;this.sendWindowCapacity+=e.length,r===0&&e.length>0&&this.sendWindowCapacityUpdate?.()}async handleData(e,r){if(this.log?.trace("stream received data id=%s",this._id),this.processFlags(e.flag),this.recvWindowCapacity<e.length)throw new ye("receive window exceeded",l4e,{available:this.recvWindowCapacity,recv:e.length});const n=await r();this.recvWindowCapacity-=e.length,this.sourcePush(n)}processFlags(e){(e&ls.ACK)===ls.ACK&&this.state===Eu.SYNSent&&(this.state=Eu.Established),(e&ls.FIN)===ls.FIN&&this.remoteCloseWrite(),(e&ls.RST)===ls.RST&&this.reset()}getSendFlags(){switch(this.state){case Eu.Init:return this.state=Eu.SYNSent,ls.SYN;case Eu.SYNReceived:return this.state=Eu.Established,ls.ACK;default:return 0}}sendWindowUpdate(){const e=this.getSendFlags(),r=Date.now(),n=this.getRTT();if(e===0&&n>-1&&r-this.epochStart<n*4&&(this.recvWindow=Math.min(this.recvWindow*2,this.config.maxStreamWindowSize)),this.recvWindowCapacity>=this.recvWindow&&e===0)return;const i=this.recvWindow-this.recvWindowCapacity;this.recvWindowCapacity=this.recvWindow,this.epochStart=r,this.sendFrame({type:zs.WindowUpdate,flag:e,streamID:this._id,length:i})}}const f4e="/yamux/1.0.0",DDt=500;class ODt{protocol=f4e;_components;_init;constructor(e,r={}){this._components=e,this._init=r}createStreamMuxer(e){return new NDt(this._components,{...this._init,...e})}}class NDt{protocol=f4e;source;sink;config;log;logger;closeController;nextStreamID;_streams;nextPingID;activePing;rtt;client;localGoAway;remoteGoAway;numInboundStreams;numOutboundStreams;onIncomingStream;onStreamEnd;constructor(e,r){this.client=r.direction==="outbound",this.config={...xDt,...r},this.logger=e.logger,this.log=this.logger.forComponent("libp2p:yamux"),EDt(this.config),this.closeController=new AbortController,Zt(1/0,this.closeController.signal),this.onIncomingStream=r.onIncomingStream,this.onStreamEnd=r.onStreamEnd,this._streams=new Map,this.source=qu({onEnd:()=>{this.log?.trace("muxer source ended"),this._streams.forEach(n=>{n.destroy()})}}),this.sink=async n=>{const i=()=>{const o=n4e(n);if(o.return!=null){const c=o.return();MDt(c)&&c.catch(l=>{this.log?.("could not cause sink source to return",l)})}};let s,a;try{const o=new TDt(n);try{this.closeController.signal.addEventListener("abort",i);for await(const c of o.emitFrames())await this.handleFrame(c.header,c.readData)}finally{this.closeController.signal.removeEventListener("abort",i)}s=Rf.NormalTermination}catch(o){const c=o.code;yDt.has(c)?(this.log?.error("protocol error in sink",o),s=Rf.ProtocolError):(this.log?.error("internal error in sink",o),s=Rf.InternalError),a=o}this.log?.trace("muxer sink ended"),a!=null?this.abort(a,s):await this.close({reason:s})},this.numInboundStreams=0,this.numOutboundStreams=0,this.nextStreamID=this.client?1:2,this.nextPingID=0,this.rtt=-1,this.log?.trace("muxer created"),this.config.enableKeepAlive&&this.keepAliveLoop().catch(n=>this.log?.error("keepalive error: %s",n)),this.ping().catch(n=>this.log?.error("ping error: %s",n))}get streams(){return Array.from(this._streams.values())}newStream(e){if(this.remoteGoAway!==void 0)throw new ye("muxer closed remotely",sse);if(this.localGoAway!==void 0)throw new ye("muxer closed locally",GB);const r=this.nextStreamID;if(this.nextStreamID+=2,this.numOutboundStreams>=this.config.maxOutboundStreams)throw new ye("max outbound streams exceeded",bDt);this.log?.trace("new outgoing stream id=%s",r);const n=this._newStream(r,e,Eu.Init,"outbound");return this._streams.set(r,n),this.numOutboundStreams++,n.sendWindowUpdate(),n}async ping(){if(this.remoteGoAway!==void 0)throw new ye("muxer closed remotely",sse);if(this.localGoAway!==void 0)throw new ye("muxer closed locally",GB);if(this.activePing===void 0){let e=()=>{};this.activePing={id:this.nextPingID++,promise:new Promise((i,s)=>{const a=()=>{s(new ye("muxer closed locally",GB))};this.closeController.signal.addEventListener("abort",a,{once:!0}),e=()=>{this.closeController.signal.removeEventListener("abort",a),i()}}),resolve:e};const r=Date.now();this.sendPing(this.activePing.id);try{await this.activePing.promise}finally{delete this.activePing}const n=Date.now();this.rtt=n-r}else await this.activePing.promise;return this.rtt}getRTT(){return this.rtt}async close(e={}){if(this.closeController.signal.aborted)return;const r=e?.reason??Rf.NormalTermination;if(this.log?.trace("muxer close reason=%s",r),e.signal==null){const n=AbortSignal.timeout(DDt);Zt(1/0,n),e={...e,signal:n}}try{await Promise.all([...this._streams.values()].map(async n=>n.close(e))),this.sendGoAway(r),this._closeMuxer()}catch(n){this.abort(n)}}abort(e,r){if(!this.closeController.signal.aborted){r=r??Rf.InternalError,this.log?.error("muxer abort reason=%s error=%s",r,e);for(const n of this._streams.values())n.abort(e);this.sendGoAway(r),this._closeMuxer()}}isClosed(){return this.closeController.signal.aborted}_closeMuxer(){this.closeController.abort(),this.source.end()}_newStream(e,r,n,i){if(this._streams.get(e)!=null)throw new ye("Stream already exists",a4e,{id:e});const s=new BDt({id:e.toString(),name:r,state:n,direction:i,sendFrame:this.sendFrame.bind(this),onEnd:()=>{this.closeStream(e),this.onStreamEnd?.(s)},log:this.logger.forComponent(`libp2p:yamux:${i}:${e}`),config:this.config,getRTT:this.getRTT.bind(this)});return s}closeStream(e){this.client===(e%2===0)?this.numInboundStreams--:this.numOutboundStreams--,this._streams.delete(e)}async keepAliveLoop(){const e=new Promise((r,n)=>{this.closeController.signal.addEventListener("abort",n,{once:!0})});for(this.log?.trace("muxer keepalive enabled interval=%s",this.config.keepAliveInterval);;){let r;try{await Promise.race([e,new Promise(n=>{r=setTimeout(n,this.config.keepAliveInterval)})]),this.ping().catch(n=>this.log?.error("ping error: %s",n))}catch{clearInterval(r);return}}}async handleFrame(e,r){const{streamID:n,type:i,length:s}=e;if(this.log?.trace("received frame %o",e),n===0)switch(i){case zs.Ping:{this.handlePing(e);return}case zs.GoAway:{this.handleGoAway(s);return}default:throw new ye("Invalid frame type",t3,{header:e})}else switch(e.type){case zs.Data:case zs.WindowUpdate:{await this.handleStreamMessage(e,r);return}default:throw new ye("Invalid frame type",t3,{header:e})}}handlePing(e){if(e.flag===ls.SYN)this.log?.trace("received ping request pingId=%s",e.length),this.sendPing(e.length,ls.ACK);else if(e.flag===ls.ACK)this.log?.trace("received ping response pingId=%s",e.length),this.handlePingResponse(e.length);else throw new ye("Invalid frame flag",t3,{header:e})}handlePingResponse(e){if(this.activePing===void 0)throw new ye("ping not requested",i4e);if(this.activePing.id!==e)throw new ye("ping doesn't match our id",s4e);this.activePing.resolve()}handleGoAway(e){this.log?.trace("received GoAway reason=%s",Rf[e]??"unknown"),this.remoteGoAway=e;for(const r of this._streams.values())r.reset();this._closeMuxer()}async handleStreamMessage(e,r){const{streamID:n,flag:i,type:s}=e;(i&ls.SYN)===ls.SYN&&this.incomingStream(n);const a=this._streams.get(n);if(a===void 0){if(s===zs.Data){if(this.log?.("discarding data for stream id=%s",n),r===void 0)throw new Error("unreachable");await r()}else this.log?.("frame for missing stream id=%s",n);return}switch(s){case zs.WindowUpdate:{a.handleWindowUpdate(e);return}case zs.Data:{if(r===void 0)throw new Error("unreachable");await a.handleData(e,r);return}default:throw new Error("unreachable")}}incomingStream(e){if(this.client!==(e%2===0))throw new ye("both endpoints are clients",c4e);if(this._streams.has(e))return;if(this.log?.trace("new incoming stream id=%s",e),this.localGoAway!==void 0){this.sendFrame({type:zs.WindowUpdate,flag:ls.RST,streamID:e,length:0});return}if(this.numInboundStreams>=this.config.maxInboundStreams){this.log?.("maxIncomingStreams exceeded, forcing stream reset"),this.sendFrame({type:zs.WindowUpdate,flag:ls.RST,streamID:e,length:0});return}const r=this._newStream(e,void 0,Eu.SYNReceived,"inbound");this.numInboundStreams++,this._streams.set(e,r),this.onIncomingStream?.(r)}sendFrame(e,r){if(this.log?.trace("sending frame %o",e),e.type===zs.Data){if(r===void 0)throw new ye("invalid frame",t3);this.source.push(new Pn(ose(e),r))}else this.source.push(ose(e))}sendPing(e,r=ls.SYN){r===ls.SYN?this.log?.trace("sending ping request pingId=%s",e):this.log?.trace("sending ping response pingId=%s",e),this.sendFrame({type:zs.Ping,flag:r,streamID:0,length:e})}sendGoAway(e=Rf.NormalTermination){this.log?.("sending GoAway reason=%s",Rf[e]),this.localGoAway=e,this.sendFrame({type:zs.GoAway,flag:0,streamID:0,length:e})}}function MDt(t){return t!=null&&typeof t.then=="function"}function _8(t={}){return e=>new ODt(e,t)}const LDt="libp2p",FDt="autonat",$Dt="1.0.0",UDt=3e4,VDt=5e3,jDt=6e4,zDt=1,qDt=1;var xn;(function(t){(function(i){i.DIAL="DIAL",i.DIAL_RESPONSE="DIAL_RESPONSE"})(t.MessageType||(t.MessageType={}));let e;(function(i){i[i.DIAL=0]="DIAL",i[i.DIAL_RESPONSE=1]="DIAL_RESPONSE"})(e||(e={})),function(i){i.codec=()=>Xo(e)}(t.MessageType||(t.MessageType={})),function(i){i.OK="OK",i.E_DIAL_ERROR="E_DIAL_ERROR",i.E_DIAL_REFUSED="E_DIAL_REFUSED",i.E_BAD_REQUEST="E_BAD_REQUEST",i.E_INTERNAL_ERROR="E_INTERNAL_ERROR"}(t.ResponseStatus||(t.ResponseStatus={}));let r;(function(i){i[i.OK=0]="OK",i[i.E_DIAL_ERROR=100]="E_DIAL_ERROR",i[i.E_DIAL_REFUSED=101]="E_DIAL_REFUSED",i[i.E_BAD_REQUEST=200]="E_BAD_REQUEST",i[i.E_INTERNAL_ERROR=300]="E_INTERNAL_ERROR"})(r||(r={})),function(i){i.codec=()=>Xo(r)}(t.ResponseStatus||(t.ResponseStatus={})),function(i){let s;i.codec=()=>(s==null&&(s=Xr((a,o,c={})=>{if(c.lengthDelimited!==!1&&o.fork(),a.id!=null&&(o.uint32(10),o.bytes(a.id)),a.addrs!=null)for(const l of a.addrs)o.uint32(18),o.bytes(l);c.lengthDelimited!==!1&&o.ldelim()},(a,o)=>{const c={addrs:[]},l=o==null?a.len:a.pos+o;for(;a.pos<l;){const u=a.uint32();switch(u>>>3){case 1:c.id=a.bytes();break;case 2:c.addrs.push(a.bytes());break;default:a.skipType(u&7);break}}return c})),s),i.encode=a=>Yr(a,i.codec()),i.decode=a=>Gr(a,i.codec())}(t.PeerInfo||(t.PeerInfo={})),function(i){let s;i.codec=()=>(s==null&&(s=Xr((a,o,c={})=>{c.lengthDelimited!==!1&&o.fork(),a.peer!=null&&(o.uint32(10),t.PeerInfo.codec().encode(a.peer,o)),c.lengthDelimited!==!1&&o.ldelim()},(a,o)=>{const c={},l=o==null?a.len:a.pos+o;for(;a.pos<l;){const u=a.uint32();switch(u>>>3){case 1:c.peer=t.PeerInfo.codec().decode(a,a.uint32());break;default:a.skipType(u&7);break}}return c})),s),i.encode=a=>Yr(a,i.codec()),i.decode=a=>Gr(a,i.codec())}(t.Dial||(t.Dial={})),function(i){let s;i.codec=()=>(s==null&&(s=Xr((a,o,c={})=>{c.lengthDelimited!==!1&&o.fork(),a.status!=null&&(o.uint32(8),t.ResponseStatus.codec().encode(a.status,o)),a.statusText!=null&&(o.uint32(18),o.string(a.statusText)),a.addr!=null&&(o.uint32(26),o.bytes(a.addr)),c.lengthDelimited!==!1&&o.ldelim()},(a,o)=>{const c={},l=o==null?a.len:a.pos+o;for(;a.pos<l;){const u=a.uint32();switch(u>>>3){case 1:c.status=t.ResponseStatus.codec().decode(a);break;case 2:c.statusText=a.string();break;case 3:c.addr=a.bytes();break;default:a.skipType(u&7);break}}return c})),s),i.encode=a=>Yr(a,i.codec()),i.decode=a=>Gr(a,i.codec())}(t.DialResponse||(t.DialResponse={}));let n;t.codec=()=>(n==null&&(n=Xr((i,s,a={})=>{a.lengthDelimited!==!1&&s.fork(),i.type!=null&&(s.uint32(8),t.MessageType.codec().encode(i.type,s)),i.dial!=null&&(s.uint32(18),t.Dial.codec().encode(i.dial,s)),i.dialResponse!=null&&(s.uint32(26),t.DialResponse.codec().encode(i.dialResponse,s)),a.lengthDelimited!==!1&&s.ldelim()},(i,s)=>{const a={},o=s==null?i.len:i.pos+s;for(;i.pos<o;){const c=i.uint32();switch(c>>>3){case 1:a.type=t.MessageType.codec().decode(i);break;case 2:a.dial=t.Dial.codec().decode(i,i.uint32());break;case 3:a.dialResponse=t.DialResponse.codec().decode(i,i.uint32());break;default:i.skipType(c&7);break}}return a})),n),t.encode=i=>Yr(i,t.codec()),t.decode=i=>Gr(i,t.codec())})(xn||(xn={}));const XB=4;class HDt{components;startupDelay;refreshInterval;protocol;timeout;maxInboundStreams;maxOutboundStreams;verifyAddressTimeout;started;log;constructor(e,r){this.components=e,this.log=e.logger.forComponent("libp2p:autonat"),this.started=!1,this.protocol=`/${r.protocolPrefix??LDt}/${FDt}/${$Dt}`,this.timeout=r.timeout??UDt,this.maxInboundStreams=r.maxInboundStreams??zDt,this.maxOutboundStreams=r.maxOutboundStreams??qDt,this.startupDelay=r.startupDelay??VDt,this.refreshInterval=r.refreshInterval??jDt,this._verifyExternalAddresses=this._verifyExternalAddresses.bind(this)}[Symbol.toStringTag]="@libp2p/autonat";isStarted(){return this.started}async start(){this.started||(await this.components.registrar.handle(this.protocol,e=>{this.handleIncomingAutonatStream(e).catch(r=>{this.log.error("error handling incoming autonat stream",r)})},{maxInboundStreams:this.maxInboundStreams,maxOutboundStreams:this.maxOutboundStreams}),this.verifyAddressTimeout=setTimeout(this._verifyExternalAddresses,this.startupDelay),this.started=!0)}async stop(){await this.components.registrar.unhandle(this.protocol),clearTimeout(this.verifyAddressTimeout),this.started=!1}async handleIncomingAutonatStream(e){const r=AbortSignal.timeout(this.timeout),n=()=>{e.stream.abort(new ye("handleIncomingAutonatStream timeout",rv))};r.addEventListener("abort",n,{once:!0}),Zt(1/0,r);try{const i=this;await is(e.stream,s=>e0(s),async function*(s){const a=await mv(s);if(a==null){i.log("no message received"),yield xn.encode({type:xn.MessageType.DIAL_RESPONSE,dialResponse:{status:xn.ResponseStatus.E_BAD_REQUEST,statusText:"No message was sent"}});return}let o;try{o=xn.decode(a)}catch(c){i.log.error("could not decode message",c),yield xn.encode({type:xn.MessageType.DIAL_RESPONSE,dialResponse:{status:xn.ResponseStatus.E_BAD_REQUEST,statusText:"Could not decode message"}});return}yield xn.encode(await i.handleAutonatMessage(o,e.connection,{signal:r}))},s=>fh(s),e.stream)}catch(i){this.log.error("error handling incoming autonat stream",i)}finally{r.removeEventListener("abort",n)}}_verifyExternalAddresses(){this.verifyExternalAddresses().catch(e=>{this.log.error("error verifying external address",e)})}async handleAutonatMessage(e,r,n){const i=this.components.addressManager.getAddresses().map(f=>f.toOptions().host),s=e.dial;if(s==null)return this.log.error("dial was missing from message"),{type:xn.MessageType.DIAL_RESPONSE,dialResponse:{status:xn.ResponseStatus.E_BAD_REQUEST,statusText:"No Dial message found in message"}};let a;const o=s.peer;if(o?.id==null)return this.log.error("PeerId missing from message"),{type:xn.MessageType.DIAL_RESPONSE,dialResponse:{status:xn.ResponseStatus.E_BAD_REQUEST,statusText:"missing peer info"}};try{a=ul(o.id)}catch(f){return this.log.error("invalid PeerId",f),{type:xn.MessageType.DIAL_RESPONSE,dialResponse:{status:xn.ResponseStatus.E_BAD_REQUEST,statusText:"bad peer id"}}}if(this.log("incoming request from %p",a),!r.remotePeer.equals(a))return this.log("target peer %p did not equal sending peer %p",a,r.remotePeer),{type:xn.MessageType.DIAL_RESPONSE,dialResponse:{status:xn.ResponseStatus.E_BAD_REQUEST,statusText:"peer id mismatch"}};const c=o.addrs.map(f=>Wr(f)).filter(f=>{const h=f.toOptions().host===r.remoteAddr.toOptions().host;return this.log.trace("request to dial %a was sent from %a is same host %s",f,r.remoteAddr,h),h}).filter(f=>{const h=f.toOptions().host,d=!(K1(h)??!1);return this.log.trace("host %s was public %s",h,d),d}).filter(f=>{const h=f.toOptions().host,d=!i.includes(h);return this.log.trace("host %s was not our host %s",h,d),d}).filter(f=>{const h=!!this.components.transportManager.dialTransportForMultiaddr(f);return this.log.trace("transport for %a is supported %s",f,h),h}).map(f=>(f.getPeerId()==null&&(f=f.encapsulate(`/p2p/${a.toString()}`)),f));if(c.length===0)return this.log("no valid multiaddrs for %p in message",a),{type:xn.MessageType.DIAL_RESPONSE,dialResponse:{status:xn.ResponseStatus.E_DIAL_REFUSED,statusText:"no dialable addresses"}};this.log("dial multiaddrs %s for peer %p",c.map(f=>f.toString()).join(", "),a);let l="",u=c[0];for await(const f of c){let h;u=f;try{if(h=await this.components.connectionManager.openConnection(f,n),!h.remoteAddr.equals(f))throw this.log.error("tried to dial %a but dialed %a",f,h.remoteAddr),new Error("Unexpected remote address");return this.log("Success %p",a),{type:xn.MessageType.DIAL_RESPONSE,dialResponse:{status:xn.ResponseStatus.OK,addr:h.remoteAddr.decapsulateCode(Cr("p2p").code).bytes}}}catch(d){this.log("could not dial %p",a,d),l=d.message}finally{h!=null&&await h.close()}}return{type:xn.MessageType.DIAL_RESPONSE,dialResponse:{status:xn.ResponseStatus.E_DIAL_ERROR,statusText:l,addr:u.bytes}}}async verifyExternalAddresses(){if(clearTimeout(this.verifyAddressTimeout),!this.isStarted())return;const e=this.components.addressManager,r=e.getObservedAddrs().filter(s=>{const a=s.toOptions();return!(K1(a.host)??!1)});if(r.length===0){this.log("no public addresses found, not requesting verification"),this.verifyAddressTimeout=setTimeout(this._verifyExternalAddresses,this.refreshInterval);return}const n=AbortSignal.timeout(this.timeout);Zt(1/0,n);const i=this;try{this.log("verify multiaddrs %s",r.map(l=>l.toString()).join(", "));const s=xn.encode({type:xn.MessageType.DIAL,dial:{peer:{id:this.components.peerId.toBytes(),addrs:r.map(l=>l.bytes)}}}),a={},o=[],c=async l=>{let u=()=>{};try{this.log("asking %p to verify multiaddr",l.id);const f=await i.components.connectionManager.openConnection(l.id,{signal:n}),h=await f.newStream(this.protocol,{signal:n});u=()=>{h.abort(new ye("verifyAddress timeout",rv))},n.addEventListener("abort",u,{once:!0});const d=await is([s],p=>fh(p),h,p=>e0(p),async p=>mv(p));if(d==null){this.log("no response received from %p",f.remotePeer);return}const g=xn.decode(d);if(g.type!==xn.MessageType.DIAL_RESPONSE||g.dialResponse==null){this.log("invalid autonat response from %p",f.remotePeer);return}if(g.dialResponse.status===xn.ResponseStatus.OK){const p=f.remoteAddr.toOptions();let m;if(p.family===4)m=p.host.split(".")[0];else if(p.family===6)m=p.host.split(":")[0];else{this.log('remote address "%s" was not IP4 or IP6?',p.host);return}if(o.includes(m)){this.log("already have response from network segment %d - %s",m,p.host);return}o.push(m)}return g.dialResponse}catch(f){this.log.error("error asking remote to verify multiaddr",f)}finally{n.removeEventListener("abort",u)}};for await(const l of dp(d0(this.components.randomWalk.walk({signal:n}),u=>async()=>c(u)),{concurrency:XB}))try{if(l==null)continue;const u=l.addr==null?r[0]:Wr(l.addr);if(this.log("autonat response for %a is %s",u,l.status),l.status===xn.ResponseStatus.E_BAD_REQUEST||l.status===xn.ResponseStatus.E_DIAL_REFUSED||l.addr==null&&r.length>1)continue;if(!r.some(h=>h.equals(u))){this.log("peer reported %a as %s but it was not in our observed address list",u,l.status);continue}const f=u.toString();if(a[f]==null&&(a[f]={success:0,failure:0}),l.status===xn.ResponseStatus.OK?a[f].success++:l.status===xn.ResponseStatus.E_DIAL_ERROR&&a[f].failure++,a[f].success===XB){this.log("%a is externally dialable",u),e.confirmObservedAddr(u);return}if(a[f].failure===XB){this.log("%a is not externally dialable",u),e.removeObservedAddr(u);return}}catch(u){this.log.error("could not verify external address",u)}}finally{this.verifyAddressTimeout=setTimeout(this._verifyExternalAddresses,this.refreshInterval)}}}function vT(t={}){return e=>new HDt(e,t)}const WDt=Gt("dns4"),KDt=Gt("dns6"),GDt=Gt("dnsaddr"),Em=_a(Gt("dns"),GDt,WDt,KDt),bT=_a(Gt("ip4"),Gt("ip6")),Bv=_a(Dr(bT,Gt("tcp")),Dr(Em,Gt("tcp"))),wT=Dr(bT,Gt("udp")),YDt=Dr(wT,Gt("utp")),XDt=Dr(wT,Gt("quic")),ZDt=Dr(wT,Gt("quic-v1")),LM=_a(Dr(Bv,Gt("ws")),Dr(Em,Gt("ws"))),FM=_a(Dr(LM,Gt("p2p")),LM),$M=_a(Dr(Bv,Gt("wss")),Dr(Em,Gt("wss")),Dr(Bv,Gt("tls"),Gt("ws")),Dr(Em,Gt("tls"),Gt("ws"))),T9=_a(Dr($M,Gt("p2p")),$M),UM=_a(Dr(Bv,Gt("http")),Dr(bT,Gt("http")),Dr(Em,Gt("http"))),VM=_a(Dr(Bv,Gt("https")),Dr(bT,Gt("https")),Dr(Em,Gt("https"))),cse=Dr(wT,Gt("webrtc-direct"),Gt("certhash")),h4e=_a(Dr(cse,Gt("p2p")),cse),lse=Dr(ZDt,Gt("webtransport"),Gt("certhash"),Gt("certhash")),d4e=_a(Dr(lse,Gt("p2p")),lse),p4e=_a(Dr(FM,Gt("p2p-webrtc-star"),Gt("p2p")),Dr(T9,Gt("p2p-webrtc-star"),Gt("p2p")),Dr(FM,Gt("p2p-webrtc-star")),Dr(T9,Gt("p2p-webrtc-star"))),g4e=_a(Dr(UM,Gt("p2p-webrtc-direct"),Gt("p2p")),Dr(VM,Gt("p2p-webrtc-direct"),Gt("p2p")),Dr(UM,Gt("p2p-webrtc-direct")),Dr(VM,Gt("p2p-webrtc-direct"))),jM=_a(LM,$M,UM,VM,p4e,g4e,Bv,YDt,XDt,Em,h4e,d4e),E1=_a(Dr(jM,Gt("p2p")),p4e,g4e,h4e,d4e,Gt("p2p")),use=_a(Dr(E1,Gt("p2p-circuit"),E1),Dr(E1,Gt("p2p-circuit")),Dr(Gt("p2p-circuit"),E1),Dr(jM,Gt("p2p-circuit")),Dr(Gt("p2p-circuit"),jM),Gt("p2p-circuit")),m4e=()=>_a(Dr(use,m4e),use),cg=m4e(),JDt=_a(Dr(cg,E1,cg),Dr(E1,cg),Dr(cg,E1),cg,E1);function y4e(t){function e(r){let n;try{n=Wr(r)}catch{return!1}const i=t(n.protoNames());return i===null?!1:i===!0||i===!1?i:i.length===0}return e}function Dr(...t){function e(r){if(r.length<t.length)return null;let n=r;return t.some(i=>(n=typeof i=="function"?i().partialMatch(r):i.partialMatch(r),Array.isArray(n)&&(r=n),n===null)),n}return{toString:function(){return"{ "+t.join(" ")+" }"},input:t,matches:y4e(e),partialMatch:e}}function _a(...t){function e(n){let i=null;return t.some(s=>{const a=typeof s=="function"?s().partialMatch(n):s.partialMatch(n);return a!=null?(i=a,!0):!1}),i}return{toString:function(){return"{ "+t.join(" ")+" }"},input:t,matches:y4e(e),partialMatch:e}}function Gt(t){const e=t;function r(i){let s;try{s=Wr(i)}catch{return!1}const a=s.protoNames();return a.length===1&&a[0]===e}function n(i){return i.length===0?null:i[0]===e?i.slice(1):null}return{toString:function(){return e},matches:r,partialMatch:n}}const QDt="bootstrap",eOt=50,tOt=12e4,rOt=1e3;class nOt extends ea{static tag="bootstrap";log;timer;list;timeout;components;_init;constructor(e,r={list:[]}){if(r.list==null||r.list.length===0)throw new Error("Bootstrap requires a list of peer addresses");super(),this.components=e,this.log=e.logger.forComponent("libp2p:bootstrap"),this.timeout=r.timeout??rOt,this.list=[];for(const n of r.list){if(!JDt.matches(n)){this.log.error("Invalid multiaddr");continue}const i=Wr(n),s=i.getPeerId();if(s==null){this.log.error("Invalid bootstrap multiaddr without peer id");continue}const a={id:ti(s),multiaddrs:[i]};this.list.push(a)}this._init=r}[p4]=this;[Symbol.toStringTag]="@libp2p/bootstrap";[yo]=["@libp2p/peer-discovery"];isStarted(){return!!this.timer}start(){this.isStarted()||(this.log("Starting bootstrap node discovery, discovering peers after %s ms",this.timeout),this.timer=setTimeout(()=>{this._discoverBootstrapPeers().catch(e=>{this.log.error(e)})},this.timeout))}async _discoverBootstrapPeers(){if(this.timer!=null)for(const e of this.list){if(await this.components.peerStore.merge(e.id,{tags:{[this._init.tagName??QDt]:{value:this._init.tagValue??eOt,ttl:this._init.tagTTL??tOt}}}),this.timer==null)return;this.safeDispatchEvent("peer",{detail:e})}}stop(){this.timer!=null&&clearTimeout(this.timer),this.timer=void 0}}function x8(t){return e=>new nOt(e,t)}const iOt={ERR_SIGNATURE_NOT_VALID:"ERR_SIGNATURE_NOT_VALID"};var k9;(function(t){let e;t.codec=()=>(e==null&&(e=Xr((r,n,i={})=>{i.lengthDelimited!==!1&&n.fork(),r.publicKey!=null&&r.publicKey.byteLength>0&&(n.uint32(10),n.bytes(r.publicKey)),r.payloadType!=null&&r.payloadType.byteLength>0&&(n.uint32(18),n.bytes(r.payloadType)),r.payload!=null&&r.payload.byteLength>0&&(n.uint32(26),n.bytes(r.payload)),r.signature!=null&&r.signature.byteLength>0&&(n.uint32(42),n.bytes(r.signature)),i.lengthDelimited!==!1&&n.ldelim()},(r,n)=>{const i={publicKey:new Uint8Array(0),payloadType:new Uint8Array(0),payload:new Uint8Array(0),signature:new Uint8Array(0)},s=n==null?r.len:r.pos+n;for(;r.pos<s;){const a=r.uint32();switch(a>>>3){case 1:i.publicKey=r.bytes();break;case 2:i.payloadType=r.bytes();break;case 3:i.payload=r.bytes();break;case 5:i.signature=r.bytes();break;default:r.skipType(a&7);break}}return i})),e),t.encode=r=>Yr(r,t.codec()),t.decode=r=>Gr(r,t.codec())})(k9||(k9={}));class nh{static createFromProtobuf=async e=>{const r=k9.decode(e),n=await Yu(r.publicKey);return new nh({peerId:n,payloadType:r.payloadType,payload:r.payload,signature:r.signature})};static seal=async(e,r)=>{if(r.privateKey==null)throw new Error("Missing private key");const n=e.domain,i=e.codec,s=e.marshal(),a=fse(n,i,s),c=await(await _m(r.privateKey)).sign(a.subarray());return new nh({peerId:r,payloadType:i,payload:s,signature:c})};static openAndCertify=async(e,r)=>{const n=await nh.createFromProtobuf(e);if(!await n.validate(r))throw new ye("envelope signature is not valid for the given domain",iOt.ERR_SIGNATURE_NOT_VALID);return n};peerId;payloadType;payload;signature;marshaled;constructor(e){const{peerId:r,payloadType:n,payload:i,signature:s}=e;this.peerId=r,this.payloadType=n,this.payload=i,this.signature=s}marshal(){if(this.peerId.publicKey==null)throw new Error("Missing public key");return this.marshaled==null&&(this.marshaled=k9.encode({publicKey:this.peerId.publicKey,payloadType:this.payloadType,payload:this.payload.subarray(),signature:this.signature})),this.marshaled}equals(e){return Kr(this.marshal(),e.marshal())}async validate(e){const r=fse(e,this.payloadType,this.payload);if(this.peerId.publicKey==null)throw new Error("Missing public key");return wm(this.peerId.publicKey).verify(r.subarray(),this.signature)}}const fse=(t,e,r)=>{const n=pt(t),i=Go(n.byteLength),s=Go(e.length),a=Go(r.length);return new Pn(i,n,s,e,a,r)};function sOt(t,e){const r=(n,i)=>n.toString().localeCompare(i.toString());return t.length!==e.length?!1:(e.sort(r),t.sort(r).every((n,i)=>e[i].equals(n)))}const aOt="libp2p-peer-record",oOt=Uint8Array.from([3,1]);var C9;(function(t){(function(r){let n;r.codec=()=>(n==null&&(n=Xr((i,s,a={})=>{a.lengthDelimited!==!1&&s.fork(),i.multiaddr!=null&&i.multiaddr.byteLength>0&&(s.uint32(10),s.bytes(i.multiaddr)),a.lengthDelimited!==!1&&s.ldelim()},(i,s)=>{const a={multiaddr:new Uint8Array(0)},o=s==null?i.len:i.pos+s;for(;i.pos<o;){const c=i.uint32();switch(c>>>3){case 1:a.multiaddr=i.bytes();break;default:i.skipType(c&7);break}}return a})),n),r.encode=i=>Yr(i,r.codec()),r.decode=i=>Gr(i,r.codec())})(t.AddressInfo||(t.AddressInfo={}));let e;t.codec=()=>(e==null&&(e=Xr((r,n,i={})=>{if(i.lengthDelimited!==!1&&n.fork(),r.peerId!=null&&r.peerId.byteLength>0&&(n.uint32(10),n.bytes(r.peerId)),r.seq!=null&&r.seq!==0n&&(n.uint32(16),n.uint64(r.seq)),r.addresses!=null)for(const s of r.addresses)n.uint32(26),t.AddressInfo.codec().encode(s,n);i.lengthDelimited!==!1&&n.ldelim()},(r,n)=>{const i={peerId:new Uint8Array(0),seq:0n,addresses:[]},s=n==null?r.len:r.pos+n;for(;r.pos<s;){const a=r.uint32();switch(a>>>3){case 1:i.peerId=r.bytes();break;case 2:i.seq=r.uint64();break;case 3:i.addresses.push(t.AddressInfo.codec().decode(r,r.uint32()));break;default:r.skipType(a&7);break}}return i})),e),t.encode=r=>Yr(r,t.codec()),t.decode=r=>Gr(r,t.codec())})(C9||(C9={}));class el{static createFromProtobuf=e=>{const r=C9.decode(e),n=ul(r.peerId),i=(r.addresses??[]).map(a=>Wr(a.multiaddr)),s=r.seq;return new el({peerId:n,multiaddrs:i,seqNumber:s})};static DOMAIN=aOt;static CODEC=oOt;peerId;multiaddrs;seqNumber;domain=el.DOMAIN;codec=el.CODEC;marshaled;constructor(e){const{peerId:r,multiaddrs:n,seqNumber:i}=e;this.peerId=r,this.multiaddrs=n??[],this.seqNumber=i??BigInt(Date.now())}marshal(){return this.marshaled==null&&(this.marshaled=C9.encode({peerId:this.peerId.toBytes(),seq:BigInt(this.seqNumber),addresses:this.multiaddrs.map(e=>({multiaddr:e.bytes}))})),this.marshaled}equals(e){return!(!(e instanceof el)||!this.peerId.equals(e.peerId)||this.seqNumber!==e.seqNumber||!sOt(this.multiaddrs,e.multiaddrs))}}function Rc(t,e){const r=Iv(t,e),n={read:async(i,s)=>{const a=await r.read(s);return i.decode(a)},write:async(i,s,a)=>{await r.write(s.encode(i),a)},writeV:async(i,s,a)=>{await r.writeV(i.map(o=>s.encode(o)),a)},pb:i=>({read:async s=>n.read(i,s),write:async(s,a)=>n.write(s,i,a),writeV:async(s,a)=>n.writeV(s,i,a),unwrap:()=>n}),unwrap:()=>r.unwrap()};return n}const cOt=290,lOt=1,uOt=1e3,fOt=100,hOt="circuit-relay-relay";BigInt(1<<17);const I9="/libp2p/circuit/relay/0.2.0/hop",hse="/libp2p/circuit/relay/0.2.0/stop",dse=300,pse="ERR_RELAYED_DIAL",dOt="ERR_HOP_REQUEST_FAILED",pOt=4096,gOt=.001;var Dv;(function(t){(function(n){n.RESERVE="RESERVE",n.CONNECT="CONNECT",n.STATUS="STATUS"})(t.Type||(t.Type={}));let e;(function(n){n[n.RESERVE=0]="RESERVE",n[n.CONNECT=1]="CONNECT",n[n.STATUS=2]="STATUS"})(e||(e={})),function(n){n.codec=()=>Xo(e)}(t.Type||(t.Type={}));let r;t.codec=()=>(r==null&&(r=Xr((n,i,s={})=>{s.lengthDelimited!==!1&&i.fork(),n.type!=null&&(i.uint32(8),t.Type.codec().encode(n.type,i)),n.peer!=null&&(i.uint32(18),Ov.codec().encode(n.peer,i)),n.reservation!=null&&(i.uint32(26),R9.codec().encode(n.reservation,i)),n.limit!=null&&(i.uint32(34),Nv.codec().encode(n.limit,i)),n.status!=null&&(i.uint32(40),zo.codec().encode(n.status,i)),s.lengthDelimited!==!1&&i.ldelim()},(n,i,s={})=>{const a={},o=i==null?n.len:n.pos+i;for(;n.pos<o;){const c=n.uint32();switch(c>>>3){case 1:{a.type=t.Type.codec().decode(n);break}case 2:{a.peer=Ov.codec().decode(n,n.uint32(),{limits:s.limits?.peer});break}case 3:{a.reservation=R9.codec().decode(n,n.uint32(),{limits:s.limits?.reservation});break}case 4:{a.limit=Nv.codec().decode(n,n.uint32(),{limits:s.limits?.limit});break}case 5:{a.status=zo.codec().decode(n);break}default:{n.skipType(c&7);break}}}return a})),r),t.encode=n=>Yr(n,t.codec()),t.decode=(n,i)=>Gr(n,t.codec(),i)})(Dv||(Dv={}));var ud;(function(t){(function(n){n.CONNECT="CONNECT",n.STATUS="STATUS"})(t.Type||(t.Type={}));let e;(function(n){n[n.CONNECT=0]="CONNECT",n[n.STATUS=1]="STATUS"})(e||(e={})),function(n){n.codec=()=>Xo(e)}(t.Type||(t.Type={}));let r;t.codec=()=>(r==null&&(r=Xr((n,i,s={})=>{s.lengthDelimited!==!1&&i.fork(),n.type!=null&&(i.uint32(8),t.Type.codec().encode(n.type,i)),n.peer!=null&&(i.uint32(18),Ov.codec().encode(n.peer,i)),n.limit!=null&&(i.uint32(26),Nv.codec().encode(n.limit,i)),n.status!=null&&(i.uint32(32),zo.codec().encode(n.status,i)),s.lengthDelimited!==!1&&i.ldelim()},(n,i,s={})=>{const a={},o=i==null?n.len:n.pos+i;for(;n.pos<o;){const c=n.uint32();switch(c>>>3){case 1:{a.type=t.Type.codec().decode(n);break}case 2:{a.peer=Ov.codec().decode(n,n.uint32(),{limits:s.limits?.peer});break}case 3:{a.limit=Nv.codec().decode(n,n.uint32(),{limits:s.limits?.limit});break}case 4:{a.status=zo.codec().decode(n);break}default:{n.skipType(c&7);break}}}return a})),r),t.encode=n=>Yr(n,t.codec()),t.decode=(n,i)=>Gr(n,t.codec(),i)})(ud||(ud={}));var Ov;(function(t){let e;t.codec=()=>(e==null&&(e=Xr((r,n,i={})=>{if(i.lengthDelimited!==!1&&n.fork(),r.id!=null&&r.id.byteLength>0&&(n.uint32(10),n.bytes(r.id)),r.addrs!=null)for(const s of r.addrs)n.uint32(18),n.bytes(s);i.lengthDelimited!==!1&&n.ldelim()},(r,n,i={})=>{const s={id:li(0),addrs:[]},a=n==null?r.len:r.pos+n;for(;r.pos<a;){const o=r.uint32();switch(o>>>3){case 1:{s.id=r.bytes();break}case 2:{if(i.limits?.addrs!=null&&s.addrs.length===i.limits.addrs)throw new am('decode error - map field "addrs" had too many elements',"ERR_MAX_LENGTH");s.addrs.push(r.bytes());break}default:{r.skipType(o&7);break}}}return s})),e),t.encode=r=>Yr(r,t.codec()),t.decode=(r,n)=>Gr(r,t.codec(),n)})(Ov||(Ov={}));var R9;(function(t){let e;t.codec=()=>(e==null&&(e=Xr((r,n,i={})=>{if(i.lengthDelimited!==!1&&n.fork(),r.expire!=null&&r.expire!==0n&&(n.uint32(8),n.uint64(r.expire)),r.addrs!=null)for(const s of r.addrs)n.uint32(18),n.bytes(s);r.voucher!=null&&(n.uint32(26),n.bytes(r.voucher)),i.lengthDelimited!==!1&&n.ldelim()},(r,n,i={})=>{const s={expire:0n,addrs:[]},a=n==null?r.len:r.pos+n;for(;r.pos<a;){const o=r.uint32();switch(o>>>3){case 1:{s.expire=r.uint64();break}case 2:{if(i.limits?.addrs!=null&&s.addrs.length===i.limits.addrs)throw new am('decode error - map field "addrs" had too many elements',"ERR_MAX_LENGTH");s.addrs.push(r.bytes());break}case 3:{s.voucher=r.bytes();break}default:{r.skipType(o&7);break}}}return s})),e),t.encode=r=>Yr(r,t.codec()),t.decode=(r,n)=>Gr(r,t.codec(),n)})(R9||(R9={}));var Nv;(function(t){let e;t.codec=()=>(e==null&&(e=Xr((r,n,i={})=>{i.lengthDelimited!==!1&&n.fork(),r.duration!=null&&(n.uint32(8),n.uint32(r.duration)),r.data!=null&&(n.uint32(16),n.uint64(r.data)),i.lengthDelimited!==!1&&n.ldelim()},(r,n,i={})=>{const s={},a=n==null?r.len:r.pos+n;for(;r.pos<a;){const o=r.uint32();switch(o>>>3){case 1:{s.duration=r.uint32();break}case 2:{s.data=r.uint64();break}default:{r.skipType(o&7);break}}}return s})),e),t.encode=r=>Yr(r,t.codec()),t.decode=(r,n)=>Gr(r,t.codec(),n)})(Nv||(Nv={}));var zo;(function(t){t.UNUSED="UNUSED",t.OK="OK",t.RESERVATION_REFUSED="RESERVATION_REFUSED",t.RESOURCE_LIMIT_EXCEEDED="RESOURCE_LIMIT_EXCEEDED",t.PERMISSION_DENIED="PERMISSION_DENIED",t.CONNECTION_FAILED="CONNECTION_FAILED",t.NO_RESERVATION="NO_RESERVATION",t.MALFORMED_MESSAGE="MALFORMED_MESSAGE",t.UNEXPECTED_MESSAGE="UNEXPECTED_MESSAGE"})(zo||(zo={}));var zM;(function(t){t[t.UNUSED=0]="UNUSED",t[t.OK=100]="OK",t[t.RESERVATION_REFUSED=200]="RESERVATION_REFUSED",t[t.RESOURCE_LIMIT_EXCEEDED=201]="RESOURCE_LIMIT_EXCEEDED",t[t.PERMISSION_DENIED=202]="PERMISSION_DENIED",t[t.CONNECTION_FAILED=203]="CONNECTION_FAILED",t[t.NO_RESERVATION=204]="NO_RESERVATION",t[t.MALFORMED_MESSAGE=400]="MALFORMED_MESSAGE",t[t.UNEXPECTED_MESSAGE=401]="UNEXPECTED_MESSAGE"})(zM||(zM={}));(function(t){t.codec=()=>Xo(zM)})(zo||(zo={}));var gse;(function(t){let e;t.codec=()=>(e==null&&(e=Xr((r,n,i={})=>{i.lengthDelimited!==!1&&n.fork(),r.relay!=null&&r.relay.byteLength>0&&(n.uint32(10),n.bytes(r.relay)),r.peer!=null&&r.peer.byteLength>0&&(n.uint32(18),n.bytes(r.peer)),r.expiration!=null&&r.expiration!==0n&&(n.uint32(24),n.uint64(r.expiration)),i.lengthDelimited!==!1&&n.ldelim()},(r,n,i={})=>{const s={relay:li(0),peer:li(0),expiration:0n},a=n==null?r.len:r.pos+n;for(;r.pos<a;){const o=r.uint32();switch(o>>>3){case 1:{s.relay=r.bytes();break}case 2:{s.peer=r.bytes();break}case 3:{s.expiration=r.uint64();break}default:{r.skipType(o&7);break}}}return s})),e),t.encode=r=>Yr(r,t.codec()),t.decode=(r,n)=>Gr(r,t.codec(),n)})(gse||(gse={}));function mse(t){const e=t*BigInt(1e3),r=new Date().getTime();return Number(e-BigInt(r))}function yse(t){const{stream:e,remoteAddr:r,logger:n}=t,i=n.forComponent("libp2p:stream:converter");let s=!1,a=!1;const o=e.close.bind(e);e.close=async h=>{await o(h),f(!0)};const c=e.abort.bind(e);e.abort=h=>{c(h),f(!0)};const l=e.sink.bind(e);e.sink=async h=>{try{await l(h)}catch(d){d.type!=="aborted"&&i.error("%s error in sink",r,d)}finally{a=!0,f()}};const u={log:i,sink:e.sink,source:async function*(){try{for await(const h of e.source)h instanceof Uint8Array?yield h:yield*h}finally{s=!0,f()}}(),remoteAddr:r,timeline:{open:Date.now(),close:void 0},close:e.close,abort:e.abort};function f(h){h===!0&&(s=!0,a=!0),s&&a&&u.timeline.close==null&&(u.timeline.close=Date.now())}return u}class mOt extends ea{peerStore;registrar;connectionManager;randomWalk;started;running;topologyId;log;discoveryController;filter;constructor(e,r={}){super(),this.log=e.logger.forComponent("libp2p:circuit-relay:discover-relays"),this.started=!1,this.running=!1,this.peerStore=e.peerStore,this.registrar=e.registrar,this.connectionManager=e.connectionManager,this.randomWalk=e.randomWalk,this.filter=r.filter,this.discoveryController=new AbortController,Zt(1/0,this.discoveryController.signal)}isStarted(){return this.started}async start(){this.topologyId=await this.registrar.register(I9,{filter:this.filter,onConnect:e=>{this.log("discovered relay %p",e),this.safeDispatchEvent("relay:discover",{detail:e})}}),this.started=!0}stop(){this.topologyId!=null&&this.registrar.unregister(this.topologyId),this.discoveryController?.abort(),this.started=!1}startDiscovery(){this.running||(this.log("start discovery"),this.running=!0,this.discoveryController=new AbortController,Zt(1/0,this.discoveryController.signal),Promise.resolve().then(async()=>{this.log("searching peer store for relays");const e=await this.peerStore.all({filters:[n=>n.protocols.includes(I9)],orders:[()=>Math.random()<.5?1:-1]});for(const n of e)this.log.trace("found relay peer %p in peer store",n.id),this.safeDispatchEvent("relay:discover",{detail:n.id});this.log("found %d relay peers in peer store",e.length);const r=new Pb({concurrency:5});this.log("start random walk");for await(const n of this.randomWalk.walk({signal:this.discoveryController.signal})){if(this.log.trace("found random peer %p",n.id),r.has(n.id)){this.log.trace("random peer %p was already in queue",n.id);continue}if(this.connectionManager.getConnections(n.id)?.length>0){this.log.trace("random peer %p was already connected",n.id);continue}if(!await this.connectionManager.isDialable(n.multiaddrs)){this.log.trace("random peer %p was not dialable",n.id,n.multiaddrs.map(i=>i.toString()));continue}this.log.trace("wait for space in queue for %p",n.id),await ma(r.onSizeLessThan(10),this.discoveryController.signal),this.log("adding random peer %p to dial queue (length: %d)",n.id,r.size),r.add(async()=>{const i=us([this.discoveryController.signal,AbortSignal.timeout(5e3)]);Zt(1/0,i);try{await this.connectionManager.openConnection(n.id,{signal:i})}finally{i.clear()}},{peerId:n.id,signal:this.discoveryController.signal}).catch(i=>{this.log.error("error opening connection to random peer %p",n.id,i)})}await r.onIdle()}).catch(e=>{this.discoveryController.signal.aborted||this.log.error("failed when finding relays on the network",e)}))}stopDiscovery(){this.log("stop discovery"),this.running=!1,this.discoveryController?.abort()}}class yOt extends ea{connectionManager;relayStore;listeningAddrs;log;constructor(e){super(),this.log=e.logger.forComponent("libp2p:circuit-relay:transport:listener"),this.connectionManager=e.connectionManager,this.relayStore=e.relayStore,this.listeningAddrs=new y0,this.relayStore.addEventListener("relay:removed",this._onRemoveRelayPeer)}_onRemoveRelayPeer=e=>{this.#e(e.detail)};async listen(e){this.log("listen on %a",e);const r=e.decapsulate("/p2p-circuit"),n=await this.connectionManager.openConnection(r);if(!this.relayStore.hasReservation(n.remotePeer)){this.log("making reservation on peer %p",n.remotePeer),await this.relayStore.addRelay(n.remotePeer,"configured");return}const i=this.relayStore.getReservation(n.remotePeer);if(i==null)throw new ye("Did not have reservation after making reservation","ERR_NO_RESERVATION");if(this.listeningAddrs.has(n.remotePeer)){this.log("already listening on relay %p",n.remotePeer);return}this.listeningAddrs.set(n.remotePeer,i.addrs.map(s=>Wr(s).encapsulate("/p2p-circuit"))),this.safeDispatchEvent("listening",{})}getAddrs(){return[...this.listeningAddrs.values()].flat()}async close(){}#e(e){const r=this.listeningAddrs.has(e);this.log("relay peer removed %p - had reservation",e,r),this.listeningAddrs.delete(e),r&&(this.log.trace("removing relay event listener for peer %p",e),this.relayStore.removeEventListener("relay:removed",this._onRemoveRelayPeer),this.safeDispatchEvent("close",{}))}}function vOt(t){return new yOt(t)}const bOt=60*1e3*10,wOt=60*1e3*5,_Ot=30*1e3;class xOt extends ea{peerId;connectionManager;transportManager;peerStore;events;reserveQueue;reservations;maxDiscoveredRelays;maxReservationQueueLength;reservationCompletionTimeout;started;log;relayFilter;constructor(e,r){super(),this.log=e.logger.forComponent("libp2p:circuit-relay:transport:reservation-store"),this.peerId=e.peerId,this.connectionManager=e.connectionManager,this.transportManager=e.transportManager,this.peerStore=e.peerStore,this.events=e.events,this.reservations=new y0,this.maxDiscoveredRelays=r?.discoverRelays??0,this.maxReservationQueueLength=r?.maxReservationQueueLength??fOt,this.reservationCompletionTimeout=r?.reservationCompletionTimeout??uOt,this.started=!1,this.relayFilter=nIt(100),this.reserveQueue=new Pb({concurrency:r?.reservationConcurrency??lOt,metricName:"libp2p_relay_reservation_queue",metrics:e.metrics}),this.events.addEventListener("peer:disconnect",n=>{this.#t(n.detail)})}isStarted(){return this.started}start(){this.started=!0}afterStart(){this.reservations.size<this.maxDiscoveredRelays&&(this.log("not enough relays %d/%d",this.reservations.size,this.maxDiscoveredRelays),this.safeDispatchEvent("relay:not-enough-relays",{}))}stop(){this.reserveQueue.clear(),this.reservations.forEach(({timeout:e})=>{clearTimeout(e)}),this.reservations.clear(),this.started=!1}async addRelay(e,r){if(this.peerId.equals(e)){this.log("not trying to use self as relay");return}if(this.reserveQueue.size>this.maxReservationQueueLength){this.log("not adding potential relay peer %p as the queue is full",e);return}if(this.reserveQueue.has(e)){this.log("potential relay peer %p is already in the reservation queue",e);return}if(this.relayFilter.has(e.toBytes())){this.log("potential relay peer %p has failed previously, not trying again",e);return}this.log("try to reserve relay slot with %p",e),await this.reserveQueue.add(async()=>{const n=Date.now();try{const i=this.reservations.get(e);if(i!=null){if(mse(i.reservation.expire)>bOt){this.log("already have reservation on relay peer %p and it expires in more than 10 minutes",e);return}clearTimeout(i.timeout),this.reservations.delete(e)}if(r==="discovered"&&[...this.reservations.values()].reduce((f,h)=>(h.type==="discovered"&&f++,f),0)>=this.maxDiscoveredRelays){this.log("already have enough discovered relays");return}const s=AbortSignal.timeout(this.reservationCompletionTimeout);Zt(1/0,s);const a=await this.connectionManager.openConnection(e,{signal:s});if(a.remoteAddr.protoNames().includes("p2p-circuit")){this.log("not creating reservation over relayed connection");return}const o=await this.#e(a,{signal:s});this.log("created reservation on relay peer %p",e);const c=mse(o.expire),l=Math.min(Math.max(c-wOt,_Ot),Math.pow(2,31)-1),u=setTimeout(()=>{this.addRelay(e,r).catch(f=>{this.log.error("could not refresh reservation to relay %p",e,f)})},l);this.reservations.set(e,{timeout:u,reservation:o,type:r}),await this.peerStore.merge(e,{tags:{[hOt]:{value:1,ttl:c}}}),await this.transportManager.listen([Wr(`/p2p/${e.toString()}/p2p-circuit`)]),this.safeDispatchEvent("relay:created-reservation",{detail:e})}catch(i){this.log.error("could not reserve slot on %p after %dms",e,Date.now()-n,i);const s=this.reservations.get(e);s!=null&&clearTimeout(s.timeout),this.reservations.delete(e),this.relayFilter.add(e.toBytes())}},{peerId:e})}hasReservation(e){return this.reservations.has(e)}getReservation(e){return this.reservations.get(e)?.reservation}reservationCount(){return this.reservations.size}async#e(e,r){r.signal?.throwIfAborted(),this.log("requesting reservation from %p",e.remotePeer);const n=await e.newStream(I9,r),s=Rc(n).pb(Dv);await s.write({type:Dv.Type.RESERVE},r);let a;try{a=await s.read(r)}catch(c){throw n.abort(c),c}finally{n.status!=="closed"&&await n.close(r)}if(a.status===zo.OK&&a.reservation!=null){let c=!1;const l=e.remoteAddr.bytes;for(const u of a.reservation.addrs)if(Kr(l,u)){c=!0;break}return c||a.reservation.addrs.push(l),a.reservation}const o=`reservation failed with status ${a.status??"undefined"}`;throw this.log.error(o),new Error(o)}#t(e){const r=this.reservations.get(e);r!=null&&(this.log("connection to relay %p closed, removing reservation from local store",e),clearTimeout(r.timeout),this.reservations.delete(e),this.safeDispatchEvent("relay:removed",{detail:e}),this.reservations.size<this.maxDiscoveredRelays&&(this.log("not enough relays %d/%d",this.reservations.size,this.maxDiscoveredRelays),this.safeDispatchEvent("relay:not-enough-relays",{})))}}const EOt=t=>{if(t.peer==null)return!1;try{t.peer.addrs.forEach(Wr)}catch{return!1}return!0},ZB={maxInboundStopStreams:dse,maxOutboundStopStreams:dse,stopTimeout:3e4};class SOt{discovery;registrar;peerStore;connectionManager;transportManager;peerId;upgrader;addressManager;connectionGater;reservationStore;logger;maxInboundStopStreams;maxOutboundStopStreams;stopTimeout;started;log;constructor(e,r){this.log=e.logger.forComponent("libp2p:circuit-relay:transport"),this.registrar=e.registrar,this.peerStore=e.peerStore,this.connectionManager=e.connectionManager,this.transportManager=e.transportManager,this.logger=e.logger,this.peerId=e.peerId,this.upgrader=e.upgrader,this.addressManager=e.addressManager,this.connectionGater=e.connectionGater,this.maxInboundStopStreams=r.maxInboundStopStreams??ZB.maxInboundStopStreams,this.maxOutboundStopStreams=r.maxOutboundStopStreams??ZB.maxOutboundStopStreams,this.stopTimeout=r.stopTimeout??ZB.stopTimeout;const n=r.discoverRelays??0;n>0&&(this.discovery=new mOt(e,{filter:r.discoveryFilter??mIt(pOt,gOt)}),this.discovery.addEventListener("relay:discover",i=>{this.reservationStore.addRelay(i.detail,"discovered").catch(s=>{this.log.error("could not add discovered relay %p",i.detail,s)})})),this.reservationStore=new xOt(e,r),this.reservationStore.addEventListener("relay:not-enough-relays",()=>{this.discovery?.startDiscovery()}),this.reservationStore.addEventListener("relay:created-reservation",()=>{this.reservationStore.reservationCount()>=n&&this.discovery?.stopDiscovery()}),this.started=!1}[Symbol.toStringTag]="@libp2p/circuit-relay-v2-transport";[yo]=["@libp2p/transport","@libp2p/circuit-relay-v2-transport"];get[em](){return this.discovery!=null?["@libp2p/identify"]:[]}[D6]=!0;isStarted(){return this.started}async start(){await this.registrar.handle(hse,e=>{this.onStop(e).catch(r=>{this.log.error("error while handling STOP protocol",r),e.stream.abort(r)})},{maxInboundStreams:this.maxInboundStopStreams,maxOutboundStreams:this.maxOutboundStopStreams,runOnTransientConnection:!0}),await hb(this.discovery,this.reservationStore),this.started=!0}async stop(){await db(this.discovery,this.reservationStore),await this.registrar.unhandle(hse),this.started=!1}async dial(e,r){if(e.protoCodes().filter(g=>g===cOt).length!==1){const g="Invalid circuit relay address";throw this.log.error(g,e),new ye(g,pse)}const n=e.toString().split("/p2p-circuit"),i=Wr(n[0]),s=Wr(n[n.length-1]),a=i.getPeerId(),o=s.getPeerId();if(a==null||o==null){const g=`Circuit relay dial to ${e.toString()} failed as address did not have peer ids`;throw this.log.error(g),new ye(g,pse)}const c=ti(a),l=ti(o);let u=!1,h=this.connectionManager.getConnections(c)[0];h==null?(await this.peerStore.merge(c,{multiaddrs:[i]}),r.onProgress?.(new Bt("circuit-relay:open-connection")),h=await this.connectionManager.openConnection(c,r),u=!0):r.onProgress?.(new Bt("circuit-relay:reuse-connection"));let d;try{return r.onProgress?.(new Bt("circuit-relay:open-hop-stream")),d=await h.newStream(I9),await this.connectV2({stream:d,connection:h,destinationPeer:l,destinationAddr:s,relayAddr:i,ma:e,disconnectOnFailure:u,onProgress:r.onProgress})}catch(g){throw this.log.error("circuit relay dial to destination %p via relay %p failed",l,c,g),d?.abort(g),u&&await h.close(),g}}async connectV2({stream:e,connection:r,destinationPeer:n,destinationAddr:i,relayAddr:s,ma:a,disconnectOnFailure:o,onProgress:c}){try{const l=Rc(e),u=l.pb(Dv);c?.(new Bt("circuit-relay:write-connect-message")),await u.write({type:Dv.Type.CONNECT,peer:{id:n.toBytes(),addrs:[Wr(i).bytes]}}),c?.(new Bt("circuit-relay:read-connect-response"));const f=await u.read();if(f.status!==zo.OK)throw new ye(`failed to connect via relay with status ${f?.status?.toString()??"undefined"}`,dOt);const h=yse({stream:l.unwrap(),remoteAddr:a,localAddr:s.encapsulate(`/p2p-circuit/p2p/${this.peerId.toString()}`),logger:this.logger});return this.log("new outbound relayed connection %a",h.remoteAddr),await this.upgrader.upgradeOutbound(h,{transient:f.limit!=null,onProgress:c})}catch(l){throw this.log.error(`Circuit relay dial to destination ${n.toString()} via relay ${r.remotePeer.toString()} failed`,l),o&&await r.close(),l}}createListener(e){return vOt({connectionManager:this.connectionManager,relayStore:this.reservationStore,logger:this.logger})}listenFilter(e){return e=Array.isArray(e)?e:[e],e.filter(r=>cg.matches(r))}dialFilter(e){return this.listenFilter(e)}async onStop({connection:e,stream:r}){if(!this.reservationStore.hasReservation(e.remotePeer))try{this.log("dialed via relay we did not have a reservation on, start listening on that relay address"),await this.transportManager.listen([e.remoteAddr.encapsulate("/p2p-circuit")])}catch(u){this.log.error("failed to listen on a relay peer we were dialed via but did not have a reservation on",u)}const n=AbortSignal.timeout(this.stopTimeout),i=Rc(r).pb(ud),s=await i.read({signal:n});if(this.log("new circuit relay v2 stop stream from %p with type %s",e.remotePeer,s.type),s?.type===void 0){this.log.error("type was missing from circuit v2 stop protocol request from %s",e.remotePeer),await i.write({type:ud.Type.STATUS,status:zo.MALFORMED_MESSAGE},{signal:n}),await r.close();return}if(s.type!==ud.Type.CONNECT){this.log.error("invalid stop connect request via peer %p",e.remotePeer),await i.write({type:ud.Type.STATUS,status:zo.UNEXPECTED_MESSAGE},{signal:n}),await r.close();return}if(!EOt(s)){this.log.error("invalid stop connect request via peer %p",e.remotePeer),await i.write({type:ud.Type.STATUS,status:zo.MALFORMED_MESSAGE},{signal:n}),await r.close();return}const a=ul(s.peer.id);if(await this.connectionGater.denyInboundRelayedConnection?.(e.remotePeer,a)===!0){this.log.error("connection gater denied inbound relayed connection from %p",e.remotePeer),await i.write({type:ud.Type.STATUS,status:zo.PERMISSION_DENIED},{signal:n}),await r.close();return}this.log.trace("sending success response to %p",e.remotePeer),await i.write({type:ud.Type.STATUS,status:zo.OK},{signal:n});const o=e.remoteAddr.encapsulate(`/p2p-circuit/p2p/${a.toString()}`),c=this.addressManager.getAddresses()[0],l=yse({stream:i.unwrap().unwrap(),remoteAddr:o,localAddr:c,logger:this.logger});this.log("new inbound relayed connection %a",l.remoteAddr),await this.upgrader.upgradeInbound(l,{transient:s.limit!=null}),this.log("%s connection %a upgraded","inbound",l.remoteAddr)}}function E8(t={}){return e=>new SOt(e,t)}const vse=()=>{const t=new Error("Delay aborted");return t.name="AbortError",t},AOt=new WeakMap;function TOt({clearTimeout:t,setTimeout:e}={}){return(r,{value:n,signal:i}={})=>{if(i?.aborted)return Promise.reject(vse());let s,a,o;const c=t??clearTimeout,l=()=>{c(s),o(vse())},u=()=>{i&&i.removeEventListener("abort",l)},f=new Promise((h,d)=>{a=()=>{u(),h(n)},o=d,s=(e??setTimeout)(a,r)});return i&&i.addEventListener("abort",l,{once:!0}),AOt.set(f,()=>{c(s),s=null,a()}),f}}const v4e=TOt();var Pf;(function(t){(function(n){n.UNUSED="UNUSED",n.CONNECT="CONNECT",n.SYNC="SYNC"})(t.Type||(t.Type={}));let e;(function(n){n[n.UNUSED=0]="UNUSED",n[n.CONNECT=100]="CONNECT",n[n.SYNC=300]="SYNC"})(e||(e={})),function(n){n.codec=()=>Xo(e)}(t.Type||(t.Type={}));let r;t.codec=()=>(r==null&&(r=Xr((n,i,s={})=>{if(s.lengthDelimited!==!1&&i.fork(),n.type!=null&&(i.uint32(8),t.Type.codec().encode(n.type,i)),n.observedAddresses!=null)for(const a of n.observedAddresses)i.uint32(18),i.bytes(a);s.lengthDelimited!==!1&&i.ldelim()},(n,i)=>{const s={observedAddresses:[]},a=i==null?n.len:n.pos+i;for(;n.pos<a;){const o=n.uint32();switch(o>>>3){case 1:s.type=t.Type.codec().decode(n);break;case 2:s.observedAddresses.push(n.bytes());break;default:n.skipType(o&7);break}}return s})),r),t.encode=n=>Yr(n,t.codec()),t.decode=n=>Gr(n,t.codec())})(Pf||(Pf={}));function bse(t,e){return x9.matches(t)||e.dialTransportForMultiaddr(t)==null?!1:A3e.matches(t)?!0:oPt.matches(t)?K1(t.toOptions().host)===!1:!1}const wse=1024*4,_se=100,ox={timeout:5e3,retries:3,maxInboundStreams:1,maxOutboundStreams:1};class kOt{started;timeout;retries;maxInboundStreams;maxOutboundStreams;peerStore;registrar;connectionManager;addressManager;transportManager;topologyId;log;constructor(e,r){this.log=e.logger.forComponent("libp2p:dcutr"),this.started=!1,this.peerStore=e.peerStore,this.registrar=e.registrar,this.addressManager=e.addressManager,this.connectionManager=e.connectionManager,this.transportManager=e.transportManager,this.timeout=r.timeout??ox.timeout,this.retries=r.retries??ox.retries,this.maxInboundStreams=r.maxInboundStreams??ox.maxInboundStreams,this.maxOutboundStreams=r.maxOutboundStreams??ox.maxOutboundStreams}[Symbol.toStringTag]="@libp2p/dcutr";[em]=["@libp2p/identify"];isStarted(){return this.started}async start(){this.started||(this.topologyId=await this.registrar.register(cx,{notifyOnTransient:!0,onConnect:(e,r)=>{r.transient&&r.direction==="inbound"&&this.upgradeInbound(r).catch(n=>{this.log.error("error during outgoing DCUtR attempt",n)})}}),await this.registrar.handle(cx,e=>{this.handleIncomingUpgrade(e.stream,e.connection).catch(r=>{this.log.error("error during incoming DCUtR attempt",r),e.stream.abort(r)})},{maxInboundStreams:this.maxInboundStreams,maxOutboundStreams:this.maxOutboundStreams,runOnTransientConnection:!0}),this.started=!0)}async stop(){await this.registrar.unhandle(cx),this.topologyId!=null&&this.registrar.unregister(this.topologyId),this.started=!1}async upgradeInbound(e){if(await this.attemptUnilateralConnectionUpgrade(e))return;let r;for(let n=0;n<this.retries;n++){const i={signal:AbortSignal.timeout(this.timeout)};try{r=await e.newStream([cx],{signal:i.signal,runOnTransientConnection:!0});const s=Rc(r,{maxDataLength:wse}).pb(Pf);this.log("B sending connect to %p",e.remotePeer);const a=Date.now();await s.write({type:Pf.Type.CONNECT,observedAddresses:this.addressManager.getAddresses().map(f=>f.bytes)},i),this.log("B receiving connect from %p",e.remotePeer);const o=await s.read(i);if(o.type!==Pf.Type.CONNECT)throw this.log("A sent wrong message type"),new ye("DCUtR message type was incorrect",Yp);const c=this.getDialableMultiaddrs(o.observedAddresses);if(c.length===0)throw this.log("A did not have any dialable multiaddrs"),new ye("DCUtR connect message had no multiaddrs",Yp);const l=Date.now()-a;this.log("A sending sync, rtt %dms",l),await s.write({type:Pf.Type.SYNC,observedAddresses:[]},i),this.log("A waiting for half RTT"),await v4e(l/2),this.log("B dialing",c);const u=await this.connectionManager.openConnection(c,{signal:i.signal,priority:_se});this.log("DCUtR to %p succeeded to address %a, closing relayed connection",e.remotePeer,u.remoteAddr),await e.close(i);break}catch(s){if(this.log.error("error while attempting DCUtR on attempt %d of %d",n+1,this.retries,s),r?.abort(s),n===this.retries)throw s}finally{r!=null&&await r.close(i)}}}async attemptUnilateralConnectionUpgrade(e){const n=(await this.peerStore.get(e.remotePeer)).addresses.map(i=>{const s=i.multiaddr;return s.getPeerId()==null?s.encapsulate(`/p2p/${e.remotePeer}`):s}).filter(i=>bse(i,this.transportManager));if(n.length>0){const i=AbortSignal.timeout(this.timeout);try{this.log("attempting unilateral connection upgrade to %a",n);const s=await this.connectionManager.openConnection(n,{signal:i,force:!0});if(s.transient)throw new Error("Could not open a new, non-transient, connection");return this.log("unilateral connection upgrade to %p succeeded via %a, closing relayed connection",e.remotePeer,s.remoteAddr),await e.close({signal:i}),!0}catch(s){this.log.error("unilateral connection upgrade to %p on addresses %a failed",e.remotePeer,n,s)}}else this.log("peer %p has no public addresses, not attempting unilateral connection upgrade",e.remotePeer);return!1}async handleIncomingUpgrade(e,r){const n={signal:AbortSignal.timeout(this.timeout)};try{const i=Rc(e,{maxDataLength:wse}).pb(Pf);this.log("A receiving connect");const s=await i.read(n);if(s.type!==Pf.Type.CONNECT)throw this.log("B sent wrong message type"),new ye("DCUtR message type was incorrect",Yp);if(s.observedAddresses.length===0)throw this.log("B sent no multiaddrs"),new ye("DCUtR connect message had no multiaddrs",Yp);const a=this.getDialableMultiaddrs(s.observedAddresses);if(a.length===0)throw this.log("B had no dialable multiaddrs"),new ye("DCUtR connect message had no dialable multiaddrs",Yp);if(this.log("A sending connect"),await i.write({type:Pf.Type.CONNECT,observedAddresses:this.addressManager.getAddresses().map(l=>l.bytes)}),this.log("A receiving sync"),(await i.read(n)).type!==Pf.Type.SYNC)throw new ye("DCUtR message type was incorrect",Yp);this.log("A dialing",a);const c=await this.connectionManager.openConnection(a,{signal:n.signal,priority:_se,force:!0});this.log("DCUtR to %p succeeded via %a, closing relayed connection",r.remotePeer,c.remoteAddr),await r.close(n)}catch(i){this.log.error("incoming DCUtR from %p failed",r.remotePeer,i),e.abort(i)}finally{await e.close(n)}}getDialableMultiaddrs(e){const r=[];for(const n of e)if(!(n==null||n.length===0))try{const i=Wr(n);if(!bse(i,this.transportManager))continue;r.push(i)}catch{}return r}}const cx="/libp2p/dcutr";function _T(t={}){return e=>new kOt(e,t)}const COt="0.1.0",IOt="id",ROt="id/push",POt="1.0.0",BOt="1.0.0",DOt=1024*8,OOt=32;var Mv;(function(t){let e;t.codec=()=>(e==null&&(e=Xr((r,n,i={})=>{if(i.lengthDelimited!==!1&&n.fork(),r.protocolVersion!=null&&(n.uint32(42),n.string(r.protocolVersion)),r.agentVersion!=null&&(n.uint32(50),n.string(r.agentVersion)),r.publicKey!=null&&(n.uint32(10),n.bytes(r.publicKey)),r.listenAddrs!=null)for(const s of r.listenAddrs)n.uint32(18),n.bytes(s);if(r.observedAddr!=null&&(n.uint32(34),n.bytes(r.observedAddr)),r.protocols!=null)for(const s of r.protocols)n.uint32(26),n.string(s);r.signedPeerRecord!=null&&(n.uint32(66),n.bytes(r.signedPeerRecord)),i.lengthDelimited!==!1&&n.ldelim()},(r,n)=>{const i={listenAddrs:[],protocols:[]},s=n==null?r.len:r.pos+n;for(;r.pos<s;){const a=r.uint32();switch(a>>>3){case 5:i.protocolVersion=r.string();break;case 6:i.agentVersion=r.string();break;case 1:i.publicKey=r.bytes();break;case 2:i.listenAddrs.push(r.bytes());break;case 4:i.observedAddr=r.bytes();break;case 3:i.protocols.push(r.string());break;case 8:i.signedPeerRecord=r.bytes();break;default:r.skipType(a&7);break}}return i})),e),t.encode=r=>Yr(r,t.codec()),t.decode=r=>Gr(r,t.codec())})(Mv||(Mv={}));const Ol={protocolPrefix:"ipfs",timeout:5e3,maxInboundStreams:1,maxOutboundStreams:1,maxObservedAddresses:10,maxMessageSize:DOt,runOnConnectionOpen:!0,runOnSelfUpdate:!0,runOnTransientConnection:!0,concurrency:OOt};function NOt(t){if(t!=null&&t.length>0)try{return Wr(t)}catch{}}function MOt(t,e){return e!=null||(e=`${t.name}/${t.version}`,Na||Oa?e+=` UserAgent=${globalThis.process.version}`:(n6||mS||sle||fPe)&&(e+=` UserAgent=${globalThis.navigator.userAgent}`)),e}async function b4e(t,e,r,n,i){if(r("received identify from %p",n.remotePeer),i==null)throw new ye("message was null or undefined","ERR_INVALID_MESSAGE");const s={};if(i.listenAddrs.length>0&&(s.addresses=i.listenAddrs.map(c=>({isCertified:!1,multiaddr:Wr(c)}))),i.protocols.length>0&&(s.protocols=i.protocols),i.publicKey!=null&&(s.publicKey=i.publicKey,!(await Yu(i.publicKey)).equals(n.remotePeer)))throw new ye("public key did not match remote PeerId","ERR_INVALID_PUBLIC_KEY");let a;if(i.signedPeerRecord!=null){r("received signedPeerRecord from %p",n.remotePeer);let c=i.signedPeerRecord;const l=await nh.openAndCertify(c,el.DOMAIN);let u=el.createFromProtobuf(l.payload);if(!u.peerId.equals(l.peerId))throw new ye("signing key does not match PeerId in the PeerRecord","ERR_INVALID_SIGNING_KEY");if(!n.remotePeer.equals(u.peerId))throw new ye("signing key does not match remote PeerId","ERR_INVALID_PEER_RECORD_KEY");let f;try{f=await t.get(u.peerId)}catch(h){if(h.code!=="ERR_NOT_FOUND")throw h}if(f!=null&&(s.metadata=f.metadata,f.peerRecordEnvelope!=null)){const h=await nh.createFromProtobuf(f.peerRecordEnvelope),d=el.createFromProtobuf(h.payload);d.seqNumber>=u.seqNumber&&(r("sequence number was lower or equal to existing sequence number - stored: %d received: %d",d.seqNumber,u.seqNumber),u=d,c=f.peerRecordEnvelope)}s.peerRecordEnvelope=c,s.addresses=u.multiaddrs.map(h=>({isCertified:!0,multiaddr:h})),a={seq:u.seqNumber,addresses:u.multiaddrs}}else r("%p did not send a signed peer record",n.remotePeer);if(r("patching %p with",n.remotePeer,s),await t.patch(n.remotePeer,s),i.agentVersion!=null||i.protocolVersion!=null){const c={};i.agentVersion!=null&&(c.AgentVersion=pt(i.agentVersion)),i.protocolVersion!=null&&(c.ProtocolVersion=pt(i.protocolVersion)),r("merging %p metadata",n.remotePeer,c),await t.merge(n.remotePeer,{metadata:c})}const o={peerId:n.remotePeer,protocolVersion:i.protocolVersion,agentVersion:i.agentVersion,publicKey:i.publicKey,listenAddrs:i.listenAddrs.map(c=>Wr(c)),observedAddr:i.observedAddr==null?void 0:Wr(i.observedAddr),protocols:i.protocols,signedPeerRecord:a,connection:n};return e.safeDispatchEvent("peer:identify",{detail:o}),o}class w4e{host;protocol;started;timeout;peerId;peerStore;registrar;addressManager;maxInboundStreams;maxOutboundStreams;maxMessageSize;maxObservedAddresses;events;runOnTransientConnection;log;constructor(e,r){this.protocol=r.protocol,this.started=!1,this.peerId=e.peerId,this.peerStore=e.peerStore,this.registrar=e.registrar,this.addressManager=e.addressManager,this.events=e.events,this.log=r.log,this.timeout=r.timeout??Ol.timeout,this.maxInboundStreams=r.maxInboundStreams??Ol.maxInboundStreams,this.maxOutboundStreams=r.maxOutboundStreams??Ol.maxOutboundStreams,this.maxMessageSize=r.maxMessageSize??Ol.maxMessageSize,this.maxObservedAddresses=r.maxObservedAddresses??Ol.maxObservedAddresses,this.runOnTransientConnection=r.runOnTransientConnection??Ol.runOnTransientConnection,this.host={protocolVersion:`${r.protocolPrefix??Ol.protocolPrefix}/${COt}`,agentVersion:MOt(e.nodeInfo,r.agentVersion)}}isStarted(){return this.started}async start(){this.started||(await this.peerStore.merge(this.peerId,{metadata:{AgentVersion:pt(this.host.agentVersion),ProtocolVersion:pt(this.host.protocolVersion)}}),await this.registrar.handle(this.protocol,e=>{this.handleProtocol(e).catch(r=>{this.log.error(r)})},{maxInboundStreams:this.maxInboundStreams,maxOutboundStreams:this.maxOutboundStreams,runOnTransientConnection:this.runOnTransientConnection}),this.started=!0)}async stop(){await this.registrar.unhandle(this.protocol),this.started=!1}}class LOt extends w4e{connectionManager;concurrency;constructor(e,r={}){super(e,{...r,protocol:`/${r.protocolPrefix??Ol.protocolPrefix}/${ROt}/${BOt}`,log:e.logger.forComponent("libp2p:identify-push")}),this.connectionManager=e.connectionManager,this.concurrency=r.concurrency??Ol.concurrency,(r.runOnSelfUpdate??Ol.runOnSelfUpdate)&&e.events.addEventListener("self:peer:update",n=>{this.push().catch(i=>{this.log.error(i)})})}[yo]=["@libp2p/identify-push"];async push(){if(!this.isStarted())return;const e=this.addressManager.getAddresses().map(u=>u.decapsulateCode(Cr("p2p").code)),r=new el({peerId:this.peerId,multiaddrs:e}),n=await nh.seal(r,this.peerId),i=this.registrar.getProtocols(),s=await this.peerStore.get(this.peerId),a=vt(s.metadata.get("AgentVersion")??pt(this.host.agentVersion)),o=vt(s.metadata.get("ProtocolVersion")??pt(this.host.protocolVersion)),c=this;async function*l(){for(const u of c.connectionManager.getConnections())(await c.peerStore.get(u.remotePeer)).protocols.includes(c.protocol)&&(yield async()=>{let h;const d=AbortSignal.timeout(c.timeout);Zt(1/0,d);try{h=await u.newStream(c.protocol,{signal:d,runOnTransientConnection:c.runOnTransientConnection}),await Rc(h,{maxDataLength:c.maxMessageSize}).pb(Mv).write({listenAddrs:e.map(p=>p.bytes),signedPeerRecord:n.marshal(),protocols:i,agentVersion:a,protocolVersion:o},{signal:d}),await h.close({signal:d})}catch(g){c.log.error("could not push identify update to peer",g),h?.abort(g)}})}await $1(dp(l(),{concurrency:this.concurrency}))}async handleProtocol(e){const{connection:r,stream:n}=e;try{if(this.peerId.equals(r.remotePeer))throw new Error("received push from ourselves?");const i={signal:AbortSignal.timeout(this.timeout)},a=await Rc(n,{maxDataLength:this.maxMessageSize}).pb(Mv).read(i);await n.close(i),await b4e(this.peerStore,this.events,this.log,r,a)}catch(i){this.log.error("received invalid message",i),n.abort(i);return}this.log("handled push from %p",r.remotePeer)}}class FOt extends w4e{constructor(e,r={}){super(e,{...r,protocol:`/${r.protocolPrefix??Ol.protocolPrefix}/${IOt}/${POt}`,log:e.logger.forComponent("libp2p:identify")}),(r.runOnConnectionOpen??Ol.runOnConnectionOpen)&&e.events.addEventListener("connection:open",n=>{const i=n.detail;this.identify(i).catch(s=>{this.log.error("error during identify trigged by connection:open",s)})})}[yo]=["@libp2p/identify"];async _identify(e,r={}){let n;if(r.signal==null){const i=AbortSignal.timeout(this.timeout);Zt(1/0,i),r={...r,signal:i}}try{n=await e.newStream(this.protocol,{...r,runOnTransientConnection:this.runOnTransientConnection});const s=await Rc(n,{maxDataLength:this.maxMessageSize}).pb(Mv).read(r);return await n.close(r),s}catch(i){throw this.log.error("error while reading identify message",i),n?.abort(i),i}}async identify(e,r={}){const n=await this._identify(e,r),{publicKey:i,protocols:s,observedAddr:a}=n;if(i==null)throw new ye("public key was missing from identify message","ERR_MISSING_PUBLIC_KEY");const o=await Yu(i);if(!e.remotePeer.equals(o))throw new ye("identified peer does not match the expected peer","ERR_INVALID_PEER");if(this.peerId.equals(o))throw new ye("identified peer is our own peer id?","ERR_INVALID_PEER");const c=NOt(a);return this.log("identify completed for peer %p and protocols %o",o,s),this.log("our observed address is %a",c),c!=null&&this.addressManager.getObservedAddrs().length<(this.maxObservedAddresses??1/0)&&(this.log("storing our observed address %a",c),this.addressManager.addObservedAddr(c)),b4e(this.peerStore,this.events,this.log,e,n)}async handleProtocol(e){const{connection:r,stream:n}=e,i=AbortSignal.timeout(this.timeout);Zt(1/0,i);try{const s=this.peerId.publicKey??new Uint8Array(0),a=await this.peerStore.get(this.peerId),o=this.addressManager.getAddresses().map(f=>f.decapsulateCode(Cr("p2p").code));let c=a.peerRecordEnvelope;if(o.length>0&&c==null){const f=new el({peerId:this.peerId,multiaddrs:o});c=(await nh.seal(f,this.peerId)).marshal().subarray()}let l=r.remoteAddr.bytes;aPt.matches(r.remoteAddr)||(l=void 0),await Rc(n).pb(Mv).write({protocolVersion:this.host.protocolVersion,agentVersion:this.host.agentVersion,publicKey:s,listenAddrs:o.map(f=>f.bytes),signedPeerRecord:c,observedAddr:l,protocols:a.protocols},{signal:i}),await n.close({signal:i})}catch(s){this.log.error("could not respond to identify request",s),n.abort(s)}}}function S8(t={}){return e=>new FOt(e,t)}function $Ot(t={}){return e=>new LOt(e,t)}const A8=1e3,Mz=60*A8,Lz=60*Mz,UOt=36*Lz,VOt="/ipfs/kad/1.0.0",jOt="/dht/record",_4e="/dht/provider",zOt=256,qOt=24*Lz,HOt=Lz,qM=20,P9=3,WOt=5*Mz,KOt=A8,GOt=5*A8,YOt=5*Mz,XOt=30*A8,ZOt=180*A8;var B9;(function(t){let e;t.codec=()=>(e==null&&(e=Xr((r,n,i={})=>{i.lengthDelimited!==!1&&n.fork(),r.key!=null&&r.key.byteLength>0&&(n.uint32(10),n.bytes(r.key)),r.value!=null&&r.value.byteLength>0&&(n.uint32(18),n.bytes(r.value)),r.timeReceived!=null&&r.timeReceived!==""&&(n.uint32(42),n.string(r.timeReceived)),i.lengthDelimited!==!1&&n.ldelim()},(r,n,i={})=>{const s={key:li(0),value:li(0),timeReceived:""},a=n==null?r.len:r.pos+n;for(;r.pos<a;){const o=r.uint32();switch(o>>>3){case 1:{s.key=r.bytes();break}case 2:{s.value=r.bytes();break}case 5:{s.timeReceived=r.string();break}default:{r.skipType(o&7);break}}}return s})),e),t.encode=r=>Yr(r,t.codec()),t.decode=(r,n)=>Gr(r,t.codec(),n)})(B9||(B9={}));function JOt(t){const e=t.getUTCFullYear(),r=String(t.getUTCMonth()+1).padStart(2,"0"),n=String(t.getUTCDate()).padStart(2,"0"),i=String(t.getUTCHours()).padStart(2,"0"),s=String(t.getUTCMinutes()).padStart(2,"0"),a=String(t.getUTCSeconds()).padStart(2,"0"),o=t.getUTCMilliseconds(),c=String(o*1e3*1e3).padStart(9,"0");return`${e}-${r}-${n}T${i}:${s}:${a}.${c}Z`}function QOt(t){const e=new RegExp("(\\d{4})-(\\d{2})-(\\d{2})T(\\d{2}):(\\d{2}):(\\d{2})\\.(\\d+)Z"),r=String(t).trim().match(e);if(r==null)throw new Error("Invalid format");const n=parseInt(r[1],10),i=parseInt(r[2],10)-1,s=parseInt(r[3],10),a=parseInt(r[4],10),o=parseInt(r[5],10),c=parseInt(r[6],10),l=parseInt(r[7].slice(0,-6),10);return new Date(Date.UTC(n,i,s,a,o,c,l))}class Hl{key;value;timeReceived;constructor(e,r,n){if(!(e instanceof Uint8Array))throw new Error("key must be a Uint8Array");if(!(r instanceof Uint8Array))throw new Error("value must be a Uint8Array");this.key=e,this.value=r,this.timeReceived=n}serialize(){return B9.encode(this.prepareSerialize())}prepareSerialize(){return{key:this.key,value:this.value,timeReceived:JOt(this.timeReceived)}}static deserialize(e){const r=B9.decode(e);return new Hl(r.key,r.value,new Date(r.timeReceived))}static fromDeserialized(e){const r=QOt(e.timeReceived);if(e.key==null)throw new Error("key missing from deserialized object");if(e.value==null)throw new Error("value missing from deserialized object");return new Hl(e.key,e.value,r)}}var xse;(function(t){let e;t.codec=()=>(e==null&&(e=Xr((r,n,i={})=>{i.lengthDelimited!==!1&&n.fork(),r.key!=null&&(n.uint32(10),n.bytes(r.key)),r.value!=null&&(n.uint32(18),n.bytes(r.value)),r.author!=null&&(n.uint32(26),n.bytes(r.author)),r.signature!=null&&(n.uint32(34),n.bytes(r.signature)),r.timeReceived!=null&&(n.uint32(42),n.string(r.timeReceived)),i.lengthDelimited!==!1&&n.ldelim()},(r,n)=>{const i={},s=n==null?r.len:r.pos+n;for(;r.pos<s;){const a=r.uint32();switch(a>>>3){case 1:{i.key=r.bytes();break}case 2:{i.value=r.bytes();break}case 3:{i.author=r.bytes();break}case 4:{i.signature=r.bytes();break}case 5:{i.timeReceived=r.string();break}default:{r.skipType(a&7);break}}}return i})),e),t.encode=r=>Yr(r,t.codec()),t.decode=r=>Gr(r,t.codec())})(xse||(xse={}));var Ri;(function(t){t.PUT_VALUE="PUT_VALUE",t.GET_VALUE="GET_VALUE",t.ADD_PROVIDER="ADD_PROVIDER",t.GET_PROVIDERS="GET_PROVIDERS",t.FIND_NODE="FIND_NODE",t.PING="PING"})(Ri||(Ri={}));var D9;(function(t){t[t.PUT_VALUE=0]="PUT_VALUE",t[t.GET_VALUE=1]="GET_VALUE",t[t.ADD_PROVIDER=2]="ADD_PROVIDER",t[t.GET_PROVIDERS=3]="GET_PROVIDERS",t[t.FIND_NODE=4]="FIND_NODE",t[t.PING=5]="PING"})(D9||(D9={}));(function(t){t.codec=()=>Xo(D9)})(Ri||(Ri={}));var Lv;(function(t){t.NOT_CONNECTED="NOT_CONNECTED",t.CONNECTED="CONNECTED",t.CAN_CONNECT="CAN_CONNECT",t.CANNOT_CONNECT="CANNOT_CONNECT"})(Lv||(Lv={}));var HM;(function(t){t[t.NOT_CONNECTED=0]="NOT_CONNECTED",t[t.CONNECTED=1]="CONNECTED",t[t.CAN_CONNECT=2]="CAN_CONNECT",t[t.CANNOT_CONNECT=3]="CANNOT_CONNECT"})(HM||(HM={}));(function(t){t.codec=()=>Xo(HM)})(Lv||(Lv={}));var ly;(function(t){let e;t.codec=()=>(e==null&&(e=Xr((r,n,i={})=>{if(i.lengthDelimited!==!1&&n.fork(),r.id!=null&&r.id.byteLength>0&&(n.uint32(10),n.bytes(r.id)),r.multiaddrs!=null)for(const s of r.multiaddrs)n.uint32(18),n.bytes(s);r.connection!=null&&(n.uint32(24),Lv.codec().encode(r.connection,n)),i.lengthDelimited!==!1&&n.ldelim()},(r,n)=>{const i={id:li(0),multiaddrs:[]},s=n==null?r.len:r.pos+n;for(;r.pos<s;){const a=r.uint32();switch(a>>>3){case 1:{i.id=r.bytes();break}case 2:{i.multiaddrs.push(r.bytes());break}case 3:{i.connection=Lv.codec().decode(r);break}default:{r.skipType(a&7);break}}}return i})),e),t.encode=r=>Yr(r,t.codec()),t.decode=r=>Gr(r,t.codec())})(ly||(ly={}));var Hd;(function(t){let e;t.codec=()=>(e==null&&(e=Xr((r,n,i={})=>{if(i.lengthDelimited!==!1&&n.fork(),r.type!=null&&D9[r.type]!==0&&(n.uint32(8),Ri.codec().encode(r.type,n)),r.clusterLevel!=null&&(n.uint32(80),n.int32(r.clusterLevel)),r.key!=null&&(n.uint32(18),n.bytes(r.key)),r.record!=null&&(n.uint32(26),n.bytes(r.record)),r.closer!=null)for(const s of r.closer)n.uint32(66),ly.codec().encode(s,n);if(r.providers!=null)for(const s of r.providers)n.uint32(74),ly.codec().encode(s,n);i.lengthDelimited!==!1&&n.ldelim()},(r,n)=>{const i={type:Ri.PUT_VALUE,closer:[],providers:[]},s=n==null?r.len:r.pos+n;for(;r.pos<s;){const a=r.uint32();switch(a>>>3){case 1:{i.type=Ri.codec().decode(r);break}case 10:{i.clusterLevel=r.int32();break}case 2:{i.key=r.bytes();break}case 3:{i.record=r.bytes();break}case 8:{i.closer.push(ly.codec().decode(r,r.uint32()));break}case 9:{i.providers.push(ly.codec().decode(r,r.uint32()));break}default:{r.skipType(a&7);break}}}return i})),e),t.encode=r=>Yr(r,t.codec()),t.decode=r=>Gr(r,t.codec())})(Hd||(Hd={}));function Ese(t,e={}){const r={...t,name:"SEND_QUERY",type:0,messageName:t.type,messageType:t.type};return e.onProgress?.(new sf("kad-dht:query:send-query",{detail:r})),r}function WM(t,e={}){const r={...t,name:"PEER_RESPONSE",type:1,messageName:t.messageType,closer:t.closer??[],providers:t.providers??[]};return e.onProgress?.(new sf("kad-dht:query:peer-response",{detail:r})),r}function JB(t,e={}){const r={...t,name:"FINAL_PEER",type:2};return e.onProgress?.(new sf("kad-dht:query:final-peer",{detail:r})),r}function G1(t,e={}){const r={...t,name:"QUERY_ERROR",type:3};return e.onProgress?.(new sf("kad-dht:query:query-error",{detail:r})),r}function Sse(t,e={}){const r={...t,name:"PROVIDER",type:4};return e.onProgress?.(new sf("kad-dht:query:provider",{detail:r})),r}function KM(t,e={}){const r={...t,name:"VALUE",type:5};return e.onProgress?.(new sf("kad-dht:query:value",{detail:r})),r}function Ase(t,e={}){const r={...t,name:"DIAL_PEER",type:7};return e.onProgress?.(new sf("kad-dht:query:dial-peer",{detail:r})),r}function eNt(t,e,r){if(r.length===0){const a="No records given";throw new ye(a,"ERR_NO_RECORDS_RECEIVED")}const i=vt(e).split("/");if(i.length<3){const a="Record key does not have a selector function";throw new ye(a,"ERR_NO_SELECTOR_FUNCTION_FOR_RECORD_KEY")}const s=t[i[1].toString()];if(s==null){const a=`No selector function configured for key type "${i[1]}"`;throw new ye(a,"ERR_UNRECOGNIZED_KEY_PREFIX")}return r.length===1?0:s(e,r)}function tNt(t,e){return 0}const rNt={pk:tNt};async function Fz(t,e){const r=e.key,i=vt(r).split("/");if(i.length<3)return;const s=t[i[1].toString()];if(s==null){const a=`No validator available for key type "${i[1]}"`;throw new ye(a,"ERR_INVALID_RECORD_KEY_TYPE")}await s(r,e.value)}const nNt=async(t,e)=>{if(!(t instanceof Uint8Array))throw new ye('"key" must be a Uint8Array',"ERR_INVALID_RECORD_KEY_NOT_BUFFER");if(t.byteLength<5)throw new ye("invalid public key record","ERR_INVALID_RECORD_KEY_TOO_SHORT");if(vt(t.subarray(0,4))!=="/pk/")throw new ye("key was not prefixed with /pk/","ERR_INVALID_RECORD_KEY_BAD_PREFIX");const n=t.slice(4),i=await wn.digest(e);if(!Kr(n,i.bytes))throw new ye("public key does not match passed in key","ERR_INVALID_RECORD_HASH_MISMATCH")},iNt={pk:nNt},sNt=pt("/pk/");function aNt(t){return{...t,multiaddrs:t.multiaddrs.filter(e=>{const[[r,n]]=e.stringTuples();if(r===53||r===54||r===55)return n!=="localhost";if(r!==4&&r!==6||n==null)return!1;const i=K1(n);return i==null?!0:!i})}}async function Z4(t){return(await wn.digest(t)).digest}async function wd(t){return Z4(t.toBytes())}function z3(t){return new Ni(`${jOt}/${vt(t,"base32")}`,!1)}function oNt(t){return Yi([sNt,t.toBytes()])}function cNt(t){return vt(t.subarray(0,4))==="/pk/"}function lNt(t){return ul(t.subarray(4))}function Tse(t,e){const r=new Date;return new Hl(t,e,r).serialize()}function uNt(t,e=100){let r;return()=>{clearTimeout(r),r=setTimeout(()=>{t()},e)}}const fNt=290,hNt=54,dNt=55,pNt=56,gNt=4,mNt=41;function yNt(t){const e=t.stringTuples();for(const r of e)if(r[0]===fNt)return!1;if(e[0][0]===hNt||e[0][0]===dNt||e[0][0]===pNt)return!0;if(e[0][0]===gNt||e[0][0]===mNt){const r=K1(`${e[0][1]}`);return r==null||!r}return!1}class vNt{log;components;validators;selectors;peerRouting;queryManager;network;constructor(e,r){const{validators:n,selectors:i,peerRouting:s,queryManager:a,network:o,logPrefix:c}=r;this.components=e,this.log=e.logger.forComponent(`${c}:content-fetching`),this.validators=n,this.selectors=i,this.peerRouting=s,this.queryManager=a,this.network=o}async getLocal(e){this.log("getLocal %b",e);const r=z3(e);this.log("fetching record for key %k",r);const n=await this.components.datastore.get(r);this.log("found %k in local datastore",r);const i=Hl.deserialize(n);return await Fz(this.validators,i),i}async*sendCorrectionRecord(e,r,n,i={}){this.log("sendCorrection for %b",e);const s=Tse(e,n);for(const{value:a,from:o}of r){if(Kr(a,n)){this.log("record was ok");continue}if(this.components.peerId.equals(o)){try{const u=z3(e);this.log(`Storing corrected record for key ${u.toString()}`),await this.components.datastore.put(u,s.subarray())}catch(u){this.log.error("Failed error correcting self",u)}continue}let c=!1;const l={type:Ri.PUT_VALUE,key:e,record:s};for await(const u of this.network.sendRequest(o,l,i))u.name==="PEER_RESPONSE"&&u.record!=null&&Kr(u.record.value,Hl.deserialize(s).value)&&(c=!0),yield u;c||(yield G1({from:o,error:new ye("value not put correctly","ERR_PUT_VALUE_INVALID")},i)),this.log.error("Failed error correcting entry")}}async*put(e,r,n={}){this.log("put key %b value %b",e,r);const i=Tse(e,r),s=z3(e);this.log(`storing record for key ${s.toString()}`),await this.components.datastore.put(s,i.subarray()),yield*is(this.peerRouting.getClosestPeers(e,{signal:n.signal}),a=>d0(a,o=>async()=>{if(o.name!=="FINAL_PEER")return[o];const c=[],l={type:Ri.PUT_VALUE,key:e,record:i};this.log("send put to %p",o.peer.id);for await(const u of this.network.sendRequest(o.peer.id,l,n))c.push(u),u.name==="PEER_RESPONSE"&&(u.record!=null&&Kr(u.record.value,Hl.deserialize(i).value)||c.push(G1({from:o.peer.id,error:new ye("value not put correctly","ERR_PUT_VALUE_INVALID")},n)));return c}),a=>dp(a,{ordered:!1,concurrency:P9}),async function*(a){for await(const o of a)yield*o})}async*get(e,r={}){this.log("get %b",e);const n=[];for await(const o of this.getMany(e,r))o.name==="VALUE"&&n.push(o),yield o;if(n.length===0)return;const i=n.map(o=>o.value);let s=0;try{s=eNt(this.selectors,e,i)}catch(o){if(o.code!=="ERR_NO_SELECTOR_FUNCTION_FOR_RECORD_KEY")throw o}const a=i[s];if(this.log("GetValue %b %b",e,a),a==null)throw new ye("best value was not found","ERR_NOT_FOUND");yield*this.sendCorrectionRecord(e,n,a,r),yield n[s]}async*getMany(e,r={}){this.log("getMany values for %b",e);try{const s=await this.getLocal(e);yield KM({value:s.value,from:this.components.peerId},r)}catch(s){this.log("error getting local value for %b",e,s)}const n=this,i=async function*({peer:s,signal:a}){for await(const o of n.peerRouting.getValueOrPeers(s,e,{signal:a}))yield o,o.name==="PEER_RESPONSE"&&o.record!=null&&(yield KM({from:s,value:o.record.value},r))};yield*this.queryManager.run(e,i,r)}}function bNt(t,e){return{id:t.id.toBytes(),multiaddrs:(t.multiaddrs??[]).map(n=>n.bytes),connection:e}}function lx(t){if(t.id==null)throw new Error("Invalid peer in message");return{id:ul(t.id),multiaddrs:(t.multiaddrs??[]).map(e=>Wr(e))}}class wNt{log;components;network;peerRouting;queryManager;routingTable;providers;constructor(e,r){const{network:n,peerRouting:i,queryManager:s,routingTable:a,providers:o,logPrefix:c}=r;this.components=e,this.log=e.logger.forComponent(`${c}:content-routing`),this.network=n,this.peerRouting=i,this.queryManager=s,this.routingTable=a,this.providers=o}async*provide(e,r,n={}){this.log("provide %s",e);const i=e.multihash.bytes;await this.providers.addProvider(e,this.components.peerId);const s={type:Ri.ADD_PROVIDER,key:i,providers:[bNt({id:this.components.peerId,multiaddrs:r})]};let a=0;const o=c=>async()=>{if(c.name!=="FINAL_PEER")return[c];const l=[];this.log("putProvider %s to %p",e,c.peer.id);try{this.log("sending provider record for %s to %p",e,c.peer.id);for await(const u of this.network.sendMessage(c.peer.id,s,n))u.name==="PEER_RESPONSE"&&(this.log("sent provider record for %s to %p",e,c.peer.id),a++),l.push(u)}catch(u){this.log.error("error sending provide record to peer %p",c.peer.id,u),l.push(G1({from:c.peer.id,error:u},n))}return l};yield*is(this.peerRouting.getClosestPeers(i,n),c=>d0(c,l=>o(l)),c=>dp(c,{ordered:!1,concurrency:P9}),async function*(c){for await(const l of c)yield*l}),this.log("sent provider records to %d peers",a)}async*findProviders(e,r){const n=this.routingTable.kBucketSize;let i=0;const s=e.multihash.bytes,a=this;this.log("findProviders %c",e);const o=await this.providers.getProviders(e);if(o.length>0){const u=[];for(const f of o.slice(0,n))try{const h=await this.components.peerStore.get(f);u.push({id:f,multiaddrs:h.addresses.map(({multiaddr:d})=>d)})}catch(h){if(h.code!=="ERR_NOT_FOUND")throw h;this.log("no peer store entry for %p",f)}if(yield WM({from:this.components.peerId,messageType:Ri.GET_PROVIDERS,providers:u},r),yield Sse({from:this.components.peerId,providers:u},r),i+=u.length,i>=n)return}const c=async function*({peer:u,signal:f}){const h={type:Ri.GET_PROVIDERS,key:s};yield*a.network.sendRequest(u,h,{...r,signal:f})},l=new $u(o);for await(const u of this.queryManager.run(s,c,r))if(yield u,u.name==="PEER_RESPONSE"){this.log("Found %d provider entries for %c and %d closer peers",u.providers.length,e,u.closer.length);const f=[];for(const h of u.providers)l.has(h.id)||(l.add(h.id),f.push(h));if(f.length>0&&(yield Sse({from:u.from,providers:f},r),i+=f.length,i>=n))return}}}class QB{movingAverage;variance;deviation;forecast;timespan;previousTime;constructor(e){this.timespan=e,this.movingAverage=0,this.variance=0,this.deviation=0,this.forecast=0}alpha(e,r){return 1-Math.exp(-(e-r)/this.timespan)}push(e,r=Date.now()){if(this.previousTime!=null){const n=this.alpha(r,this.previousTime),i=e-this.movingAverage,s=n*i;this.movingAverage=n*e+(1-n)*this.movingAverage,this.variance=(1-n)*(this.variance+i*s),this.deviation=Math.sqrt(this.variance),this.forecast=this.movingAverage+n*i}else this.movingAverage=e;this.previousTime=r}}const _Nt=1.2,xNt=2,ENt=2e3;class x4e{success;failure;next;metric;timeoutMultiplier;failureMultiplier;minTimeout;constructor(e={}){this.success=new QB(e.interval??5e3),this.failure=new QB(e.interval??5e3),this.next=new QB(e.interval??5e3),this.failureMultiplier=e.failureMultiplier??xNt,this.timeoutMultiplier=e.timeoutMultiplier??_Nt,this.minTimeout=e.minTimeout??ENt,e.metricName!=null&&(this.metric=e.metrics?.registerMetricGroup(e.metricName))}getTimeoutSignal(e={}){const r=Math.max(Math.round(this.next.movingAverage*(e.timeoutFactor??this.timeoutMultiplier)),this.minTimeout),n=AbortSignal.timeout(r),i=us([e.signal,n]);return Zt(1/0,i,n),i.start=Date.now(),i.timeout=r,i}cleanUp(e){const r=Date.now()-e.start;e.aborted?(this.failure.push(r),this.next.push(r*this.failureMultiplier),this.metric?.update({failureMovingAverage:this.failure.movingAverage,failureDeviation:this.failure.deviation,failureForecast:this.failure.forecast,failureVariance:this.failure.variance,failure:r})):(this.success.push(r),this.next.push(r),this.metric?.update({successMovingAverage:this.success.movingAverage,successDeviation:this.success.deviation,successForecast:this.success.forecast,successVariance:this.success.variance,success:r}))}}class SNt extends ea{log;protocol;running;components;timeout;constructor(e,r){super();const{protocol:n}=r;this.components=e,this.log=e.logger.forComponent(`${r.logPrefix}:network`),this.running=!1,this.protocol=n,this.timeout=new x4e({...r.timeout??{},metrics:e.metrics,metricName:`${r.logPrefix.replaceAll(":","_")}_network_message_send_times_milliseconds`})}async start(){this.running||(this.running=!0)}async stop(){this.running=!1}isStarted(){return this.running}async*sendRequest(e,r,n={}){if(!this.running)return;const i=r.type;if(i==null)throw new am("Message type was missing","ERR_INVALID_PARAMETERS");this.log("sending %s to %p",r.type,e),yield Ase({peer:e},n),yield Ese({to:e,type:i},n);let s;const a=this.timeout.getTimeoutSignal(n);n={...n,signal:a};try{s=await(await this.components.connectionManager.openConnection(e,n)).newStream(this.protocol,n);const c=await this._writeReadMessage(s,r,n);s.close(n).catch(l=>{this.log.error("error closing stream to %p",e,l),s?.abort(l)}),yield WM({from:e,messageType:c.type,closer:c.closer.map(lx),providers:c.providers.map(lx),record:c.record==null?void 0:Hl.deserialize(c.record)},n)}catch(o){s?.abort(o),this.log.error("could not send %s to %p",r.type,e,o),yield G1({from:e,error:o},n)}finally{this.timeout.cleanUp(a)}}async*sendMessage(e,r,n={}){if(!this.running)return;const i=r.type;if(i==null)throw new am("Message type was missing","ERR_INVALID_PARAMETERS");this.log("sending %s to %p",r.type,e),yield Ase({peer:e},n),yield Ese({to:e,type:i},n);let s;const a=this.timeout.getTimeoutSignal(n);n={...n,signal:a};try{s=await(await this.components.connectionManager.openConnection(e,n)).newStream(this.protocol,n),await this._writeMessage(s,r,n),s.close(n).catch(c=>{this.log.error("error closing stream to %p",e,c),s?.abort(c)}),yield WM({from:e,messageType:i},n)}catch(o){s?.abort(o),yield G1({from:e,error:o},n)}finally{this.timeout.cleanUp(a)}}async _writeMessage(e,r,n){const i=Rc(e);await i.write(r,Hd,n),await i.unwrap().close(n)}async _writeReadMessage(e,r,n){const i=Rc(e);await i.write(r,Hd,n);const s=await i.read(Hd,n);return await i.unwrap().close(n),s.closer.forEach(a=>{this.safeDispatchEvent("peer",{detail:lx(a)})}),s.providers.forEach(a=>{this.safeDispatchEvent("peer",{detail:lx(a)})}),s}}function O9(t,e){if(t.byteLength!==e.byteLength)throw new Error("Inputs should have the same length");for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return t[r]<e[r]?-1:1;return 0}class E4e{originDhtKey;capacity;peerDistances;constructor(e,r){this.originDhtKey=e,this.capacity=r,this.peerDistances=[]}get length(){return this.peerDistances.length}get peers(){return this.peerDistances.map(e=>e.peer)}async add(e){const r=await wd(e.id);this.addWitKadId(e,r)}addWitKadId(e,r){if(this.peerDistances.find(i=>i.peer.id.equals(e.id))!=null)return;const n={peer:e,distance:Pv(this.originDhtKey,r)};this.peerDistances.push(n),this.peerDistances.sort((i,s)=>O9(i.distance,s.distance)),this.peerDistances=this.peerDistances.slice(0,this.capacity)}async isCloser(e){if(this.length===0)return!0;const r=await wd(e),n=Pv(r,this.originDhtKey),i=this.peerDistances[this.peerDistances.length-1].distance;return O9(n,i)===-1}async anyCloser(e){return e.length===0?!1:Promise.any(e.map(async r=>this.isCloser(r)))}}class ANt{log;routingTable;network;validators;queryManager;peerStore;peerId;constructor(e,r){const{routingTable:n,network:i,validators:s,queryManager:a,logPrefix:o}=r;this.routingTable=n,this.network=i,this.validators=s,this.queryManager=a,this.peerStore=e.peerStore,this.peerId=e.peerId,this.log=e.logger.forComponent(`${o}:peer-routing`)}async findPeerLocal(e){let r;const n=await this.routingTable.find(e);if(n!=null){this.log("findPeerLocal found %p in routing table",e);try{r=await this.peerStore.get(n)}catch(i){if(i.code!=="ERR_NOT_FOUND")throw i}}if(r==null)try{r=await this.peerStore.get(e)}catch(i){if(i.code!=="ERR_NOT_FOUND")throw i}if(r!=null)return this.log("findPeerLocal found %p in peer store",e),{id:r.id,multiaddrs:r.addresses.map(i=>i.multiaddr)}}async*_getValueSingle(e,r,n={}){const i={type:Ri.GET_VALUE,key:r};yield*this.network.sendRequest(e,i,n)}async*getPublicKeyFromNode(e,r={}){const n=oNt(e);for await(const i of this._getValueSingle(e,n,r))if(yield i,i.name==="PEER_RESPONSE"&&i.record!=null){const s=await Yu(wz({bytes:i.record.value}));if(!s.equals(e))throw new ye("public key does not match id","ERR_PUBLIC_KEY_DOES_NOT_MATCH_ID");if(s.publicKey==null)throw new ye("public key missing","ERR_PUBLIC_KEY_MISSING");yield KM({from:e,value:s.publicKey},r)}throw new ye(`Node not responding with its public key: ${e.toString()}`,"ERR_INVALID_RECORD")}async*findPeer(e,r={}){if(this.log("findPeer %p",e),r.useCache!==!1){const i=await this.findPeerLocal(e);if(i!=null){this.log("found local"),yield JB({from:this.peerId,peer:i},r);return}}let n=!1;if(r.useNetwork!==!1){const i=this,s=async function*({peer:a,signal:o}){const c={type:Ri.FIND_NODE,key:e.toBytes()};for await(const l of i.network.sendRequest(a,c,{...r,signal:o}))if(yield l,l.name==="PEER_RESPONSE"){const u=l.closer.find(f=>f.id.equals(e));u!=null&&(yield JB({from:l.from,peer:u},r))}};for await(const a of this.queryManager.run(e.toBytes(),s,r))a.name==="FINAL_PEER"&&(n=!0),yield a}n||(yield G1({from:this.peerId,error:new ye("Not found","ERR_NOT_FOUND")},r))}async*getClosestPeers(e,r={}){this.log("getClosestPeers to %b",e);const n=await Z4(e),i=this.routingTable.closestPeers(n),s=this,a=new E4e(n,this.routingTable.kBucketSize);await Promise.all(i.map(async c=>{await a.add({id:c,multiaddrs:[]})}));const o=async function*({peer:c,signal:l}){s.log("closerPeersSingle %s from %p",vt(e,"base32"),c);const u={type:Ri.FIND_NODE,key:e};yield*s.network.sendRequest(c,u,{...r,signal:l})};for await(const c of this.queryManager.run(e,o,r))c.name==="PEER_RESPONSE"&&await Promise.all(c.closer.map(async l=>{await a.add(l)})),yield c;this.log("found %d peers close to %b",a.length,e);for(const c of a.peers)yield JB({from:this.peerId,peer:c},r)}async*getValueOrPeers(e,r,n={}){for await(const i of this._getValueSingle(e,r,n)){if(i.name==="PEER_RESPONSE"&&i.record!=null)try{await this._verifyRecordOnline(i.record)}catch{const a="invalid record received, discarded";this.log(a),yield G1({from:i.from,error:new ye(a,"ERR_INVALID_RECORD")},n);continue}yield i}}async _verifyRecordOnline(e){if(e.timeReceived==null)throw new ye("invalid record received","ERR_INVALID_RECORD");await Fz(this.validators,new Hl(e.key,e.value,e.timeReceived))}async getCloserPeersOffline(e,r){const n=await Z4(e),i=this.routingTable.closestPeers(n),s=[];for(const a of i)if(!a.equals(r))try{const o=await this.peerStore.get(a);s.push({id:a,multiaddrs:o.addresses.map(({multiaddr:c})=>c)})}catch(o){if(o.code!=="ERR_NOT_FOUND")throw o}return s.length>0?this.log("getCloserPeersOffline found %d peer(s) closer to %b than %p",s.length,e,r):this.log("getCloserPeersOffline could not find peer closer to %b than %p with %d peers in the routing table",e,r,this.routingTable.size),s}}class TNt{log;datastore;cache;cleanupInterval;provideValidity;syncQueue;started;cleaner;constructor(e,r={}){const{cacheSize:n,cleanupInterval:i,provideValidity:s}=r;this.log=e.logger.forComponent("libp2p:kad-dht:providers"),this.datastore=e.datastore,this.cleanupInterval=i??HOt,this.provideValidity=s??qOt,this.cache=i3e(n??zOt),this.syncQueue=new sh({concurrency:1}),this.started=!1}isStarted(){return this.started}async start(){this.started||(this.started=!0,this.cleaner=setInterval(()=>{this._cleanup().catch(e=>{this.log.error(e)})},this.cleanupInterval))}async stop(){this.started=!1,this.cleaner!=null&&(clearInterval(this.cleaner),this.cleaner=void 0)}async _cleanup(){await this.syncQueue.add(async()=>{const e=Date.now();let r=0,n=0;const i=new Map,s=this.datastore.batch(),a=this.datastore.query({prefix:_4e});for await(const o of a)try{const{cid:c,peerId:l}=S4e(o.key),u=A4e(o.value).getTime(),f=Date.now(),h=f-u,d=h>this.provideValidity;if(this.log("comparing: %d - %d = %d > %d %s",f,u,h,this.provideValidity,d?"(expired)":""),d){n++,s.delete(o.key);const g=i.get(c)??new Set;g.add(l),i.set(c,g)}r++}catch(c){this.log.error(c.message)}i.size>0?(this.log("deleting %d / %d entries",n,r),await s.commit()):this.log("nothing to delete");for(const[o,c]of i){const l=q3(o),u=this.cache.get(l);if(u!=null){for(const f of c)u.delete(f);u.size===0?this.cache.remove(l):this.cache.set(l,u)}}this.log("Cleanup successful (%dms)",Date.now()-e)})}async _getProvidersMap(e){const r=q3(e);let n=this.cache.get(r);return n==null&&(n=await CNt(this.datastore,e),this.cache.set(r,n)),n}async addProvider(e,r){await this.syncQueue.add(async()=>{this.log("%p provides %s",r,e);const n=await this._getProvidersMap(e);this.log("loaded %s provs",n.size);const i=new Date;n.set(r.toString(),i);const s=q3(e);this.cache.set(s,n),await kNt(this.datastore,e,r,i)})}async getProviders(e){return this.syncQueue.add(async()=>(this.log("get providers for %s",e),[...(await this._getProvidersMap(e)).keys()].map(n=>ti(n))),{throwOnTimeout:!0})}}function q3(t){const e=typeof t=="string"?t:vt(t.multihash.bytes,"base32");return`${_4e}/${e}`}async function kNt(t,e,r,n){const i=[q3(e),"/",r.toString()].join(""),s=new Ni(i),a=Go(n.getTime());await t.put(s,a)}function S4e(t){const e=t.toString().split("/");if(e.length!==5)throw new Error(`incorrectly formatted provider entry key in datastore: ${t.toString()}`);return{cid:e[3],peerId:e[4]}}async function CNt(t,e){const r=new Map,n=t.query({prefix:q3(e)});for await(const i of n){const{peerId:s}=S4e(i.key);r.set(s,A4e(i.value))}return r}function A4e(t){return new Date(u0(t))}async function*INt(t){const{key:e,startingPeer:r,ourPeerId:n,signal:i,query:s,alpha:a,pathIndex:o,numPaths:c,queryFuncTimeout:l,log:u,peersSeen:f,connectionManager:h}=t,d=new Ev({concurrency:a,sort:(m,y)=>O9(m.options.distance,y.options.distance)}),g=await Z4(e);function p(m,y){if(m==null)return;f.add(m);const v=Pv(y,g);d.add(async()=>{const _=[i];l!=null&&_.push(AbortSignal.timeout(l));const x=us(_);Zt(1/0,x);try{for await(const A of s({key:e,peer:m,signal:x,pathIndex:o,numPaths:c})){if(x.aborted)return;if(A.name==="PEER_RESPONSE")for(const C of A.closer){if(f.has(C.id)){u("already seen %p in query",C.id);continue}if(n.equals(C.id)){u("not querying ourselves");continue}if(!await h.isDialable(C.multiaddrs)){u("not querying undialable peer");continue}const R=await wd(C.id),M=Pv(R,g);if(O9(M,v)!==-1){u("skipping %p as they are not closer to %b than %p",C.id,e,m);continue}u("querying closer peer %p",C.id),p(C.id,R)}d.safeDispatchEvent("completed",{detail:A})}}catch(A){if(!i.aborted)return G1({from:m,error:A},t)}finally{x.clear()}},{distance:v}).catch(_=>{u.error(_)})}p(r,await wd(r));try{for await(const m of d.toGenerator({signal:i}))m!=null&&(yield m)}catch(m){throw i.aborted?new ye("Query aborted","ERR_QUERY_ABORTED"):m}}class RNt{disjointPaths;alpha;shutDownController;running;queries;logger;peerId;connectionManager;routingTable;initialQuerySelfHasRun;logPrefix;metrics;constructor(e,r){const{disjointPaths:n=qM,alpha:i=P9,logPrefix:s}=r;this.logPrefix=s,this.disjointPaths=n??qM,this.running=!1,this.alpha=i??P9,this.queries=0,this.initialQuerySelfHasRun=r.initialQuerySelfHasRun,this.routingTable=r.routingTable,this.logger=e.logger,this.peerId=e.peerId,this.connectionManager=e.connectionManager,e.metrics!=null&&(this.metrics={runningQueries:e.metrics.registerMetric(`${s.replaceAll(":","_")}_running_queries`),queryTime:e.metrics.registerMetric(`${s.replaceAll(":","_")}_query_time_seconds`)}),this.shutDownController=new AbortController,Zt(1/0,this.shutDownController.signal)}isStarted(){return this.running}async start(){this.running=!0,this.shutDownController=new AbortController,Zt(1/0,this.shutDownController.signal)}async stop(){this.running=!1,this.shutDownController.abort()}async*run(e,r,n={}){if(!this.running)throw new Error("QueryManager not started");const i=this.metrics?.queryTime.timer();if(n.signal==null){const u=AbortSignal.timeout(ZOt);Zt(1/0,u),n={...n,signal:u}}const s=new AbortController,a=us([this.shutDownController.signal,s.signal,n.signal]);Zt(1/0,a,s.signal);const o=this.logger.forComponent(`${this.logPrefix}:query:`+vt(e,"base58btc")),c=Date.now();let l=!1;try{n.isSelfQuery!==!0&&this.initialQuerySelfHasRun!=null&&(o("waiting for initial query-self query before continuing"),await ma(this.initialQuerySelfHasRun.promise,a),this.initialQuerySelfHasRun=void 0),o("query:start"),this.queries++,this.metrics?.runningQueries.update(this.queries);const u=await Z4(e),f=this.routingTable.closestPeers(u),h=f.slice(0,Math.min(this.disjointPaths,f.length));if(f.length===0){o.error("Running query with no peers");return}const d=new $u,g=h.map((p,m)=>INt({key:e,startingPeer:p,ourPeerId:this.peerId,signal:a,query:r,pathIndex:m,numPaths:h.length,alpha:this.alpha,queryFuncTimeout:n.queryFuncTimeout,log:o,peersSeen:d,onProgress:n.onProgress,connectionManager:this.connectionManager}));for await(const p of T1(...g)){if(p.name==="QUERY_ERROR"&&o.error("query error",p.error),p.name==="PEER_RESPONSE")for(const m of[...p.closer,...p.providers])await this.connectionManager.isDialable(m.multiaddrs)&&await this.routingTable.add(m.id);yield p}l=!0}catch(u){if(!(!this.running&&u.code==="ERR_QUERY_ABORTED"))throw u}finally{l||(o("query exited early"),s.abort()),a.clear(),this.queries--,this.metrics?.runningQueries.update(this.queries),i?.(),o("query:done in %dms",Date.now()-c)}}}function PNt(t){return t[Symbol.asyncIterator]!=null}function T4e(t){if(PNt(t))return(async()=>{let e=0;for await(const r of t)e++;return e})();{let e=0;for(const r of t)e++;return e}}const BNt=t=>{const e=t.addEventListener||t.on||t.addListener,r=t.removeEventListener||t.off||t.removeListener;if(!e||!r)throw new TypeError("Emitter is not compatible");return{addListener:e.bind(t),removeListener:r.bind(t)}};function DNt(t,e,r){let n;const i=new Promise((s,a)=>{if(r={rejectionEvents:["error"],multiArgs:!1,resolveImmediately:!1,...r},!(r.count>=0&&(r.count===Number.POSITIVE_INFINITY||Number.isInteger(r.count))))throw new TypeError("The `count` option should be at least 0 or more");r.signal?.throwIfAborted();const o=[e].flat(),c=[],{addListener:l,removeListener:u}=BNt(t),f=(...d)=>{const g=r.multiArgs?d:d[0];r.filter&&!r.filter(g)||(c.push(g),r.count===c.length&&(n(),s(c)))},h=d=>{n(),a(d)};n=()=>{for(const d of o)u(d,f);for(const d of r.rejectionEvents)u(d,h)};for(const d of o)l(d,f);for(const d of r.rejectionEvents)l(d,h);r.signal&&r.signal.addEventListener("abort",()=>{h(r.signal.reason)},{once:!0}),r.resolveImmediately&&s(c)});if(i.cancel=n,typeof r.timeout=="number"){const s=T6(i,{milliseconds:r.timeout});return s.cancel=n,s}return i}function GM(t,e,r){typeof r=="function"&&(r={filter:r}),r={...r,count:1,resolveImmediately:!1};const n=DNt(t,e,r),i=n.then(s=>s[0]);return i.cancel=n.cancel,i}class ONt{log;peerId;peerRouting;routingTable;count;interval;initialInterval;queryTimeout;started;timeoutId;controller;initialQuerySelfHasRun;querySelfPromise;constructor(e,r){const{peerRouting:n,logPrefix:i,count:s,interval:a,queryTimeout:o,routingTable:c}=r;this.peerId=e.peerId,this.log=e.logger.forComponent(`${i}:query-self`),this.started=!1,this.peerRouting=n,this.routingTable=c,this.count=s??qM,this.interval=a??WOt,this.initialInterval=r.initialInterval??KOt,this.queryTimeout=o??GOt,this.initialQuerySelfHasRun=r.initialQuerySelfHasRun}isStarted(){return this.started}start(){this.started||(this.started=!0,clearTimeout(this.timeoutId),this.timeoutId=setTimeout(()=>{this.querySelf().catch(e=>{this.log.error("error running self-query",e)})},this.initialInterval))}stop(){this.started=!1,this.timeoutId!=null&&clearTimeout(this.timeoutId),this.controller!=null&&this.controller.abort()}async querySelf(){if(!this.started){this.log("skip self-query because we are not started");return}if(this.querySelfPromise!=null)return this.log("joining existing self query"),this.querySelfPromise.promise;if(this.querySelfPromise=fn(),this.started){this.controller=new AbortController;const e=AbortSignal.timeout(this.queryTimeout),r=us([this.controller.signal,e]);Zt(1/0,r,this.controller.signal,e);try{this.routingTable.size===0&&(this.log("routing table was empty, waiting for some peers before running query"),await GM(this.routingTable,"peer:add",{signal:r})),this.log("run self-query, look for %d peers timing out after %dms",this.count,this.queryTimeout);const n=Date.now(),i=await is(this.peerRouting.getClosestPeers(this.peerId.toBytes(),{signal:r,isSelfQuery:!0}),s=>d9(s,this.count),async s=>T4e(s));this.log("self-query found %d peers in %dms",i,Date.now()-n)}catch(n){this.log.error("self-query error",n)}finally{r.clear(),this.initialQuerySelfHasRun!=null&&(this.initialQuerySelfHasRun.resolve(),this.initialQuerySelfHasRun=void 0)}}this.querySelfPromise.resolve(),this.querySelfPromise=void 0,this.started&&(this.timeoutId=setTimeout(()=>{this.querySelf().catch(e=>{this.log.error("error running self-query",e)})},this.interval))}}function NNt(t,e){if(t===e)return!0;if(t.length!==e.length)return!1;for(let r=0,n=t.length;r<n;++r)if(t[r]!==e[r])return!1;return!0}function kse(t,e){if(!(e instanceof Uint8Array))throw new TypeError(t+" is not a Uint8Array");if(e.byteLength!==32)throw new TypeError(t+" had incorrect length")}function Qx(t){return Array.isArray(t?.peers)}class MNt extends ea{root;localPeer;prefixLength;splitThreshold;kBucketSize;numberOfNodesToPing;constructor(e){super(),this.localPeer=e.localPeer,this.prefixLength=e.prefixLength,this.kBucketSize=e.kBucketSize??e7,this.splitThreshold=e.splitThreshold??this.kBucketSize,this.numberOfNodesToPing=e.numberOfNodesToPing??3,kse("options.localPeer.kadId",e.localPeer.kadId),this.root={prefix:"",depth:0,peers:[]}}add(e){kse("peer.kadId",e?.kadId);const r=this._determineBucket(e.kadId);if(!(this._indexOf(r,e.kadId)>-1)){if(r.peers.length===this.splitThreshold&&r.depth<this.prefixLength){this._split(r),this.add(e);return}if(r.peers.length<this.kBucketSize){r.peers.push(e),this.safeDispatchEvent("added",{detail:e});return}this.safeDispatchEvent("ping",{detail:{oldContacts:r.peers.slice(0,this.numberOfNodesToPing),newContact:e}})}}*closest(e,r=this.kBucketSize){const n=new E4e(e,r);for(const i of this.toIterable())n.addWitKadId({id:i.peerId,multiaddrs:[]},i.kadId);yield*d0(n.peers,i=>i.id)}count(){function e(r){if(Qx(r))return r.peers.length;let n=0;return r.left!=null&&(n+=e(r.left)),r.right!=null&&(n+=e(r.right)),n}return e(this.root)}get(e){const r=this._determineBucket(e),n=this._indexOf(r,e);return r.peers[n]}remove(e){const r=this._determineBucket(e),n=this._indexOf(r,e);if(n>-1){const i=r.peers.splice(n,1)[0];this.safeDispatchEvent("removed",{detail:i})}}*toIterable(){function*e(r){if(Qx(r)){yield*r.peers;return}yield*e(r.left),yield*e(r.right)}yield*e(this.root)}distance(e,r){return BigInt("0x"+vt(Pv(e,r),"base16"))}_determineBucket(e){const n=vt(e,"base2").substring(0,this.prefixLength);function i(s,a=0){return Qx(s)?s:n[a]==="0"?i(s.left,a+1):i(s.right,a+1)}return i(this.root)}_indexOf(e,r){return e.peers.findIndex(n=>NNt(n.kadId,r))}_split(e){const r=e.depth+1,n={prefix:"0",depth:r,peers:[]},i={prefix:"1",depth:r,peers:[]};for(const s of e.peers)vt(s.kadId,"base2")[r]==="0"?n.peers.push(s):i.peers.push(s);delete e.peers,e.left=n,e.right=i}}const LNt="kad-close",FNt=50,e7=20,$Nt=32,UNt=1e4,VNt=10;class jNt extends ea{kBucketSize;kb;pingQueue;log;components;prefixLength;splitThreshold;pingTimeout;pingConcurrency;running;protocol;tagName;tagValue;metrics;constructor(e,r){super(),this.components=e,this.log=e.logger.forComponent(`${r.logPrefix}:routing-table`),this.kBucketSize=r.kBucketSize??e7,this.pingTimeout=r.pingTimeout??UNt,this.pingConcurrency=r.pingConcurrency??VNt,this.running=!1,this.protocol=r.protocol,this.tagName=r.tagName??LNt,this.tagValue=r.tagValue??FNt,this.prefixLength=r.prefixLength??$Nt,this.splitThreshold=r.splitThreshold??e7,this.pingQueue=new Pb({concurrency:this.pingConcurrency,metricName:`${r.logPrefix.replaceAll(":","_")}_ping_queue`,metrics:this.components.metrics}),this.pingQueue.addEventListener("error",n=>{this.log.error("error pinging peer",n.detail)}),this.components.metrics!=null&&(this.metrics={routingTableSize:this.components.metrics.registerMetric(`${r.logPrefix.replaceAll(":","_")}_routing_table_size`),routingTableKadBucketTotal:this.components.metrics.registerMetric(`${r.logPrefix.replaceAll(":","_")}_routing_table_kad_bucket_total`),routingTableKadBucketAverageOccupancy:this.components.metrics.registerMetric(`${r.logPrefix.replaceAll(":","_")}_routing_table_kad_bucket_average_occupancy`),routingTableKadBucketMaxDepth:this.components.metrics.registerMetric(`${r.logPrefix.replaceAll(":","_")}_routing_table_kad_bucket_max_depth`)})}isStarted(){return this.running}async start(){this.running=!0;const e=new MNt({localPeer:{kadId:await wd(this.components.peerId),peerId:this.components.peerId},kBucketSize:this.kBucketSize,prefixLength:this.prefixLength,splitThreshold:this.splitThreshold,numberOfNodesToPing:1});this.kb=e,e.addEventListener("ping",n=>{this._onPing(n).catch(i=>{this.log.error("could not process k-bucket ping event",i)})});let r=0;for(const n of await this.components.peerStore.all())if(n.protocols.includes(this.protocol)){const i=await wd(n.id);this.kb.add({kadId:i,peerId:n.id}),r++}this.log("added %d peer store peers to the routing table",r),this._tagPeers(e)}async stop(){this.running=!1,this.pingQueue.clear(),this.kb=void 0}_tagPeers(e){let r=new $u;const n=uNt(()=>{const i=new $u(e.closest(e.localPeer.kadId,e7)),s=i.difference(r),a=r.difference(i);Promise.resolve().then(async()=>{for(const o of s)await this.components.peerStore.merge(o,{tags:{[this.tagName]:{value:this.tagValue}}});for(const o of a)await this.components.peerStore.merge(o,{tags:{[this.tagName]:void 0}})}).catch(o=>{this.log.error("Could not update peer tags",o)}),r=i});e.addEventListener("added",i=>{n(),this.safeDispatchEvent("peer:add",{detail:i.detail.peerId})}),e.addEventListener("removed",i=>{n(),this.safeDispatchEvent("peer:remove",{detail:i.detail.peerId})})}async _onPing(e){if(!this.running)return;const{oldContacts:r,newContact:n}=e.detail,s=(await Promise.all(r.map(async a=>{const o=this.pingQueue.find(a.peerId);return o!=null?o.join():this.pingQueue.add(async()=>{let c;try{const l={signal:AbortSignal.timeout(this.pingTimeout)};this.log("pinging old contact %p",a.peerId),c=await(await this.components.connectionManager.openConnection(a.peerId,l)).newStream(this.protocol,l);const f=Rc(c);await f.write({type:Ri.PING},Hd,l);const h=await f.read(Hd,l);if(await f.unwrap().close(),h.type!==Ri.PING)throw new ye(`Incorrect message type received, expected PING got ${h.type}`,"ERR_BAD_PING_RESPONSE");return!0}catch(l){return this.running&&this.kb!=null&&(this.log.error("could not ping peer %p",a.peerId,l),this.log("evicting old contact after ping failed %p",a.peerId),this.kb.remove(a.kadId)),c?.abort(l),!1}finally{this.metrics?.routingTableSize.update(this.size)}},{peerId:a.peerId})}))).filter(a=>a).length;this.running&&s<r.length&&this.kb!=null&&(this.log("adding new contact %p",n.peerId),this.kb.add(n))}get size(){return this.kb==null?0:this.kb.count()}async find(e){const r=await wd(e);return this.kb?.get(r)?.peerId}closestPeer(e){const r=this.closestPeers(e,1);if(r.length>0)return r[0]}closestPeers(e,r=this.kBucketSize){return this.kb==null?[]:[...this.kb.closest(e,r)]}async add(e){if(this.kb==null)throw new Error("RoutingTable is not started");const r=await wd(e);this.kb.add({kadId:r,peerId:e}),this.log("added %p with kad id %b",e,r),this.updateMetrics()}async remove(e){if(this.kb==null)throw new Error("RoutingTable is not started");const r=await wd(e);this.kb.remove(r),this.updateMetrics()}updateMetrics(){if(this.metrics==null||this.kb==null)return;let e=0,r=0,n=0;function i(s){if(Qx(s)){s.depth>n&&(n=s.depth),r++,e+=s.peers.length;return}i(s.left),i(s.right)}i(this.kb.root),this.metrics.routingTableSize.update(e),this.metrics.routingTableKadBucketTotal.update(r),this.metrics.routingTableKadBucketAverageOccupancy.update(Math.round(e/r)),this.metrics.routingTableKadBucketMaxDepth.update(n)}}const zNt=[77591,22417,43971,28421,740,29829,71467,228973,196661,78537,27689,36431,44415,14362,19456,106025,96308,2882,49509,21149,87173,131409,75844,23676,121838,30291,17492,2953,7564,110620,129477,127283,53113,72417,165166,109690,21200,102125,24049,71504,90342,25307,72039,26812,26715,32264,133800,71161,88956,171987,51779,24425,16671,30251,186294,247761,14202,2121,8465,35024,4876,85917,169730,3638,256836,96184,943,18678,6583,52907,35807,112254,214097,18796,11595,9243,23554,887,268203,382004,24590,111335,11625,16619,29039,102425,69006,97976,92362,32552,63717,41433,128974,137630,59943,10019,13986,35430,33665,108037,43799,43280,38195,29078,58629,18265,14425,46832,235538,40830,77881,110717,58937,3463,325358,51300,47623,117252,19007,10170,20540,91237,294813,4951,79841,56232,36270,128547,69209,66275,100156,32063,73531,34439,80937,28892,44466,88595,216307,32583,49620,16605,82127,45807,21630,78726,20235,40163,111007,96926,5567,72083,21665,58844,39419,179767,48328,42662,51550,5251,37811,49608,81056,50854,55513,20922,18891,197409,164656,32593,71449,220474,58919,85682,67854,13758,35066,3565,61905,214793,119572,141419,21504,10302,27354,67003,46131,32668,15165,64871,34450,17821,2757,11452,34189,5160,12257,85523,560,53385,65887,119549,135620,312353,115979,122356,10867,193231,124537,54783,90675,120791,4715,142253,50943,17271,43358,25331,4917,120566,34580,12878,33786,160528,32523,4869,301307,104817,81491,23276,8832,97911,31265,52065,7998,49622,9715,43998,34091,84587,20664,69041,29419,53205,10838,58288,116145,6185,5154,141795,35924,21307,144738,43730,12085,8279,10002,119,133779,199668,72938,31768,39176,67875,38453,9700,44144,4121,116048,41733,12868,82669,92308,128,34262,11332,7712,90764,36141,13553,71312,77470,117314,96549,49135,23602,54468,28605,6327,62308,17171,67531,21319,14105,894,107722,46157,8503,51069,100472,45138,15246,14577,35609,191464,1757,13364,161349,32067,91705,81144,52339,5408,91066,21983,14157,100545,4372,26630,129112,1423,29676,213626,4397,88436,99190,6877,49958,26122,114348,60661,29818,293118,50042,179738,16400,163423,89627,31040,43973,36638,45952,5153,1894,109322,1898,134021,12402,112077,68309,190269,69866,31938,107383,11522,105232,11248,14868,39852,71707,186525,16530,38162,106212,11700,5130,16608,26998,59586,108399,230033,43683,48135,82179,2073,5015,196684,189293,16378,23452,8301,35640,11632,214551,29240,57644,33137,91949,55157,52384,117313,5090,17717,89668,49363,82238,241035,66216,29066,184088,97206,62820,26595,4241,135635,173672,8202,459,71355,146294,29587,3008,135385,141203,14803,6634,45094,69362,50925,546,51884,62011,83296,234584,44515,56050,89476,87751,19373,12691,149923,19794,13833,35846,87557,58339,2884,19145,25647,12224,11024,77338,64608,122297,53025,7205,36189,36294,170779,21750,7739,173883,75192,35664,224240,113121,30181,26267,27036,117827,92015,106516,55628,203549,67949,60462,60844,35911,20457,1820,920,19773,8738,73173,181993,38521,98254,76257,46008,92796,5384,26868,151566,22124,2411,15919,186872,180021,28099,152961,78811,80237,62352,102653,74259,184890,16792,123702,224945,29940,19512,75283,14059,112691,92811,233329,20411,138569,53341,109802,50600,134528,66747,5529,166531,31578,64732,67189,1596,126357,967,167999,206598,109752,119431,207825,78791,91938,10301,27311,24233,252343,28831,32812,66002,112267,90895,8786,8095,16824,22866,21813,60507,174833,19549,130985,117051,52110,6938,81923,123864,38061,919,18680,53534,46739,112893,161529,85429,26761,11900,81121,91968,15390,217947,56524,1713,6654,37089,85630,138866,61850,16491,75577,16884,98296,73523,6140,44645,6062,36366,29844,57946,37932,42472,5266,20834,19309,33753,127182,134259,35810,41805,45878,312001,14881,47757,49251,120050,44252,3708,25856,107864,120347,1228,36550,41682,34496,47025,8393,173365,246526,12894,161607,35670,90785,126572,2095,124731,157033,58694,554,12786,9642,4817,16136,47864,174698,66992,4639,69284,10625,40710,27763,51738,30404,264105,137904,109882,52487,42824,57514,2740,10479,146799,107390,16586,88038,174951,9410,16185,44158,5568,40658,46108,12763,97385,26175,108859,664,230732,67470,46663,14395,50750,141320,93140,15361,47997,55784,6791,307840,118569,107326,18056,58281,260415,54691,8790,73332,45633,7511,45674,143373,14031,11799,94491,35646,96544,14560,26049,32983,25791,83814,42094,231370,63955,139212,2359,169908,3108,183486,105867,28197,32941,124968,26402,88267,149768,23053,3078,19091,52924,25383,19209,111548,97361,3959,24880,235061,9099,24921,161254,151405,20508,7159,34381,20133,11434,74036,19974,34769,36585,1076,22454,17354,38727,235160,111547,96454,117448,156940,91330,37299,7310,26915,117060,51369,22620,61861,322264,106850,111694,15091,2624,40345,300446,177064,1707,27389,54792,327783,132669,183543,59003,17744,20603,151134,106923,53084,71803,279424,319816,11579,21946,16728,38274,72711,5085,83391,88646,40159,25027,34680,10752,12988,54126,30365,18338,100445,230674,44874,84974,143877,123253,139372,28082,91477,144002,13096,219729,46016,50029,42377,14601,6660,58244,58978,23918,88206,113611,64452,17541,41032,10942,12021,49189,10978,40175,37156,10947,71709,106894,112538,57007,137486,150608,152719,40615,7746,279716,13101,19524,28708,40578,72320,1096,182051,94527,51275,22833,45164,81917,77519,48508,5421,140302,37845,149830,5587,27579,5357,428725,248187,6326,206760,39814,32585,89923,44341,288753,284443,96368,31201,94189,119504,20359,52073,103216,179,27934,32801,96035,34111,34309,101326,18198,20704,210266,37643,27880,141873,106e3,19414,56614,167714,66483,107885,86602,4379,20796,75467,4987,5017,118857,26003,34308,114428,29198,6686,29697,73632,3739,69795,16798,41504,7207,30722,21436,36735,28067,28545,3239,11221,36031,41889,100010,19247,317673,29495,174554,6424,129725,53845,94986,7955,59676,2604,191497,19735,102214,62954,23844,11872,179525,261436,34492,428,78404,142035,16747,17246,27578,37021,33672,57944,26056,135760,2369,61674,122066,31327,19374,157065,40553,130982,69619,71290,38855,72100,92903,95940,51422,165999,65713,57873,50726,7288,20272,2081,42326,22624,81120,57914,79352,19447,1684,72302,11774,302559,161481,96396,13692,414988,3721,79066,56627,46883,21150,11747,12184,5856,113458,176117,84416,52079,27933,3354,59765,141359,2212,216309,2555,23458,196722,142463,45701,44548,28798,19418,215,29916,9396,10574,114226,84475,13520,18694,34056,4524,90302,62930,13539,19407,77209,7728,38088,9535,2263,23875,183945,17750,26274,67172,10585,28042,22199,7478,51331,66030,26774,192929,31434,25850,50197,52926,178158,4679,181256,70184,229600,9959,105594,72158,73974,2726,35085,78087,23284,35568,51713,155676,5401,27254,11966,17569,223253,71993,103357,111477,55722,30504,26034,46774,35392,36285,214814,41143,163465,1051,16094,81044,6636,76489,179102,20712,39178,35683,125177,54219,30617,52994,25324,50123,2543,87529,58995,10688,125199,12388,60158,125481,131646,7642,133350,65874,3438,97277,101450,10075,56344,116821,50778,60547,98016,106135,13859,14255,16300,77373,173521,8285,45932,37426,4054,114295,55947,7703,39114,52,51119,128135,19714,60715,9554,50492,88180,2823,118271,52993,122625,97919,23859,37895,25040,33614,32102,20431,3577,9275,15686,43031,157741,110358,1884,40291,125391,13736,5008,64881,87336,77381,70711,43032,49155,118587,70494,4318,10168,30126,12580,10524,280104,104001,145413,2862,84140,6603,106005,13566,12780,11251,42830,571,179910,82443,13146,469,42714,32591,265217,424024,92553,54721,134100,6007,15242,114681,59030,16718,85465,200214,85982,55174,165013,23493,56964,82529,109150,32706,27568,82442,5350,14976,13165,44890,60021,21343,33978,17264,4655,22328,27819,75730,16567,55483,14510,17926,45827,150609,3704,7385,272531,161543,76904,122163,52405,2039,19165,41623,14423,228354,3369,176360,85491,7122,35789,303724,4465,13628,2233,55311,118771,20713,10006,221519,45115,71021,35650,29775,7337,10864,20665,21142,1746,15080,1624,32449,10905,105743,229797,7701,3940,22997,178467,57208,389057,39683,59403,63344,63125,54847,69691,18336,56448,3362,37202,18282,29648,138224,35867,10495,5911,28814,26653,31514,176702,26550,45621,11734,4525,40543,73944,121080,27858,155561,14887,44670,30742,8796,107455,113472,56369,75581,183777,240095,133699,153299,8768,160464,26058,49078,103971,21875,71486,44888,17156,9678,89541,123019,102337,3972,83930,21245,87852,109660,287918,183019,686,10100,39177,283941,11274,24736,26793,26214,25995,77011,141580,4070,23742,46285,46632,30700,26669,19056,35951,115575,174034,56097,35463,87425,24575,44245,38701,82317,85922,281616,100333,147697,61503,7730,84330,8530,59917,61597,17173,9092,32658,90288,193136,39023,20381,56654,31132,7779,1919,1375,117128,30819,11169,40938,23935,115201,101155,151034,4835,11231,74550,89388,59951,91704,107312,167882,115062,12732,72738,88703,464019,158267,57995,60496,737,14371,123867,4174,243339,159946,7568,16025,134556,110916,38103,191,80226,88794,29688,27230,10454,76308,57647,77409,113483,66864,14745,19808,12023,46583,84805,16015,17102,2231,20611,3547,95740,250131,34559,108894,8498,15853,159169,148920,20942,2813,93160,45188,210613,45531,52587,149062,39782,28194,57849,60965,84954,89766,84453,100927,16501,27658,165311,103841,54192,207341,19558,20084,319622,5672,205467,98462,61849,36279,13609,147177,24726,165015,209489,59591,31157,6551,117580,75060,141146,277310,21072,22023,106474,63041,137443,122965,68371,5383,42146,98961,113467,30863,23794,4843,99630,30392,82679,13699,241612,33601,93146,24319,18643,32155,95669,40440,15333,34089,67799,142144,58245,38633,114531,117400,77861,188726,5507,2568,8853,10987,107222,2663,2421,11530,13345,30075,41785,118661,104786,17459,12490,16281,71936,193555,17431,5944,71758,26485,77317,20803,367167,158,7362,93430,11735,172445,46002,11532,54482,930,62911,2235,23004,179236,4764,101859,208113,22477,55163,95579,14098,67320,162556,90709,156949,3826,57492,4025,34092,87442,104565,6718,186015,28214,14209,10039,107186,233912,58877,81637,55265,39828,6194,145813,50831,105849,4974,88319,122296,10272,197216,95714,51540,72418,23324,91555,8743,140452,250249,51666,34124,7229,38592,129641,78169,174242,22464,149964,51450,14034,10026,95376,26190,120062,14401,8700,265,31386,143573,7203,229889,61567,4227,140981,2466,72052,10787,10062,30958,6099,38471,30103,23202,208101,70847,467,58934,32271,32984,36637,24107,30771,17109,73353,13650,2098,157040,67366,66904,106018,265380,107238,18535,44025,32681,144983,62505,91295,56120,3082,77508,10322,63023,36700,81885,224127,16721,45023,239261,111272,13852,7866,149243,204199,32309,22084,42029,38316,126644,104973,14406,43454,67322,61310,15789,40285,24026,181047,6301,70927,23319,115823,27248,66693,115875,278566,63007,146844,56841,59007,87368,180001,22370,42114,80605,12022,10374,308,25079,14689,12618,63368,7936,264973,212291,136713,95999,105801,18965,32075,48700,52230,35119,96912,32992,8586,16606,101333,101812,14969,39930,759,193090,27387,42914,12937,5058,62646,64528,38624,25743,37502,3716,4435,30352,178687,26461,132611,42002,138442,35833,59582,16345,8048,60319,49349,309,47800,49739,90482,26405,34470,63786,32479,85028,39866,47846,11649,23934,29466,2816,42864,31828,7410,74885,49632,47629,111801,90749,19536,18767,105764,59606,21223,10746,76298,22220,39408,7190,79654,64856,11602,82156,272765,17079,70089,245473,51813,184407,384678,1576,122249,5064,27481,6188,25790,74361,27541,318284,45430,31488,620,93579,45723,192118,22670,51913,4162,70244,35966,26397,16199,50899,209613,121702,287507,2993,36101,132229,67345,33062,76295,118628,78705,52316,34375,107083,107454,44863,127561,33964,3073,154010,190914,55967,39074,6272,31047,5550,41123,26154,98638,47110,19998,148091,50229,31329,59900,195442,19106,61347,73497,70015,682,45850,25776,38022,148951,6288,37411,232526,109277,27286,32342,9262,5220,16651,23175,46740,129438,78614,121925,66914,88710,127952,5563,21500,34521,10739,14863,191006,62956,17359,16749,67027,56284,69134,43301,35039,58883,54466,60823,404451,75743,59856,86979,7923,34273,83785,32142,7693,268986,197428,282681,17049,22346,22990,92245,107180,3357,37104,96724,49153,7683,31197,43267,82231,164276,23696,20848,188364,22309,24821,158707,1018,22514,70922,27792,45589,59709,10765,736,35218,63479,51987,24275,63588,55361,92929,81964,4658,20122,12330,44058,13065,311456,72224,8337,211229,38979,22590,138478,52757,32595,133600,8838,31549,94412,43391,90056,1585,94802,127271,6223,31889,137038,132910,2165,57616,230152,6080,10748,36737,74579,134062,50525,180532,119270,34556,76155,82394,52595,29258,31435,87820,67996,26943,183878,38007,2410,13526,180297,69856,3503,187396,167700,7838,16701,9199,56267,3661,37407,65994,23767,5708,62508,221700,67088,86978,46776,84434,32088,5612,9149,88244,21685,95151,46750,189612,2979,506311,2594,3628,40074,105039,78243,28523,6651,38058,71999,30992,12764,68261,108991,6165,26450,61961,13400,22426,7490,60890,109623,2070,12958,50355,67979,257096,7213,42578,52121,35716,65461,7516,124758,39268,302,64712,14977,1467,219452,2840,34229,11121,21602,19270,63574,8024,1532,17331,79839,78885,52029,180767,57957,6069,91265,61380,55767,8927,32881,287603,22149,35029,68876,6428,199567,46926,13412,104132,21434,366616,45060,110046,81924,128910,45886,52821,130416,29416,77342,21762,67329,121432,79924,11724,38625,81006,102033,28338,13326,3250,82056,82526,38212,21112,12382,111495,3263,7414,86274,93490,40844,30224,45212,24019,48411,71367,24941,76729,57776,3769,38114,202019,197745,31953,237533,33270,201580,255648,100798,44741,32241,98468,106931,10085,15090,170358,33154,66787,18819,69760,25061,234005,82660,6295,131975,16874,9076,4094,25005,17740,40908,19533,220019,44330,99792,50040,19619,13950,55228,24423,31253,95308,103177,184795,28590,82285,5059,3210,75525,49894,70007,56178,10580,36051,139681,21617,98736,3555,106306,164189,37352,63915,47824,24883,145530,61904,28444,11483,19837,145446,30420,112972,85939,11835,191233,2262,20705,58630,1753,148334,1197,144714,6887,11223,107667,60879,77914,4151,57417,81594,96681,169430,1784,20444,95138,254041,27038,596,7117,72808,13759,3353,126776,21074,55322,27081,36942,39547,139830,179275,4453,713,8722,71399,19204,25785,22794,23923,104114,11291,25458,102309,88396,75288,230440,206396,104551,58447,130857,37247,94734,31548,176529,226077,65159,20104,10096,66881,94191,237909,27109,37404,1520,27421,25220,113003,23423,24884,50585,6286,231877,150800,11789,3226,90004,60642,5053,202400,61442,132531,175329,57138,30116,103847,9973,75367,16452,32360,59119,21246,10191,164804,23305,61051,37348,154530,13214,5468,50403,66754,130976,50559,80515,14436,155492,84017,5472,43107,41240,2890,90431,70188,382,76234,48040,50211,281038,237007,32115,142178,1536,22761,96429,1811,31243,1679,49143,55209,17402,235054,61494,7462,77030,34925,87609,78002,9499,9027,73289,201078,101379,63544,27666,5469,10642,30029,49816,132979,95620,58086,351930,116300,2110,2043,30845,6154,11279,16727,4122,2277,27281,4971,3650,39060,61970,65951,39674,75686,38151,11370,130809,177895,32665,63725,122267,7857,39618,118483,44792,157755,178624,136994,24260,41308,22471,12404,21707,12486,30473,52781,50246,20247,39065,909,56825,103158,128603,31542,1089,41935,32744,12428,37963,84420,33134,72921,208449,42622,168151,127335,147107,46699,38216,12591,94342,85814,31423,24944,2605,87542,67473,192551,4496,56321,91819,17630,6300,256183,114569,202090,33209,35289,34897,24967,40520,43470,5344,10199,34810,14283,10381,10017,62923,49924,23233,64539,13051,35686,19698,11570,135555,120868,44924,87065,52318,52335,47586,140906,245885,109834,78668,9065,46990,25258,72022,61243,40838,4545,146387,10537,11557,17470,36930,68104,46711,24264,79401,81043,18225,120488,24746,84338,81652,28266,13776,21878,46973,1047,230465,73357,95777,24973,210160,62210,58404,110633,169651,6937,41870,9909,26822,191062,76553,27519,96256,239070,2478,205678,67955,58532,20601,50120,19148,78501,195724,110740,8249,109665,27446,30568,57631,31425,49752,32820,65504,50079,3663,102256,219898,23849,211315,14645,4359,91767,9528,12449,49366,7941,49763,107848,8930,27086,50686,9744,10447,81935,39513,46514,1670,29229,6172,22312,137280,97759,9806,14445,22976,56458,73391,34983,93760,174219,52573,33149,59747,2429,136277,75123,165263,91040,7446,57632,48633,97140,246081,84766,151684,79918,93268,120346,54059,54875,77858,32996,103590,45276,11968,19600,25849,17159,132907,42828,16817,4913,99462,103303,27395,5737,74184,20749,21160,14377,77062,131403,158735,10999,27799,77785,9320,34366,51593,61070,33746,47048,29268,36675,30262,53297,9832,82e3,20188,122292,39917,7331,18160,68301,185935,134830,15031,4935,10004,165845,185534,46923,30109,44134,122631,18874,22903,112790,26561,18549,348902,82871,140345,255565,135390,63556,103747,145055,179600,145662,296111,61661,211987,23952,52342,126343,48450,32919,44277,82185,9591,62139,205363,376969,394874,108461,18040,120885,14798,39863,16571,16794,58271,81025,55206,14640,118656,6361,44092,85970,6262,153863,108244,180200,72264,79947,38044,10050,5735,61221,80712,5471,115689,11391,11661,184257,20010,60116,30320,19327,134598,45455,27542,18004,125092,452272,1549,91523,46567,180063,156026,2608,11174,58848,37788,65907,80194,30490,5786,40775,119519,106241,11323,156297,8425,61495,2617,29675,2425,59886,112582,49142,59618,4863,50597,86710,50650,168632,27693,85641,83643,18993,25768,84284,28090,93592,36627,312804,43381,9887,9402,100931,97165,3311,173330,66805,28935,4963,184460,3201,78102,19126,21607,37496,24938,22615,16153,32862,134792,153318,61120,6067,2812,12826,12792,23825,37559,64662,202250,102694,155488,85881,149193,46233,65383,15521,106982,11358,176786,25752,39717,34208,24510,32464,77742,39371,72028,138229,60688,71386,102834,132477,2208,11548,63670,271279,28351,30338,38620,32491,99845,143885,152266,13252,2825,178663,108097,1775,78201,14897,113573,163346,62292,171129,22183,96598,38733,64971,166776,117445,9968,146393,44677,74867,20908,97328,12761,25656,26785,9148,112344,26115,99176,110121,22437,49547,6180,79320,5835,31392,43328,33377,75870,119860,69497,80273,7325,155219,43167,111173,28347,20222,3763,71752,55041,47252,14618,28088,15012,97805,194698,54636,2036,41349,6173,96604,61530,51859,43782,13361,24334,22668,24792,7070,23441,16789,3209,36211,208475,26242,32880,122181,182407,21444,31060,88459,29929,77907,12716,10934,97005,20599,31690,8403,58445,30303,22700,10336,86731,103115,337709,72556,46788,112566,47684,67089,53548,36874,56487,41387,125985,26893,40071,106683,73712,18787,40105,72992,67246,137276,50802,36790,70328,138827,22466,39263,183295,29858,50975,9322,57397,10654,24364,30383,55799,41600,23584,127295,296610,129078,143558,244131,86397,36049,1085,80677,3820,108139,5476,34767,24683,7758,13060,7239,131671,250593,59556,103392,29810,4188,252323,39404,116877,7651,43600,40338,13554,157253,39196,25978,144387,61211,234,50104,6129,10449,93777,9240,356378,274148,4439,72970,3724,147770,78680,62570,115877,40027,40547,36817,224392,64609,34795,165027,67440,2477,37206,23431,50754,164797,46018,94995,170982,27051,7957,22767,3674,27900,56419,18930,60701,41302,2692,84749,339721,61996,111094,80221,50129,1045,8153,62945,19202,8250,37208,37418,32560,79477,41106,88569,33963,36693,5892,30570,1581,66471,49647,11922,160717,29442,5643,114865,82962,95982,132098,22633,22838,94726,54556,28566,205039,162340,33216,16849,35847,221339,94851,26533,71469,1805,3804,12935,45483,71020,36310,65381,192960,34240,35165,59773,1248,46954,155332,96864,4246,388800,16129,57133,74592,44807,442014,38203,42574,80818,91592,26377,36424,65760,977,77387,22628,147610,28018,30561,98454,6969,119628,63648,18170,36854,26601,64018,22027,37279,51395,152934,21153,9430,58760,194742,5330,55115,34158,28917,174111,13171,122326,1526,43896,66094,25325,4234,148354,11450,275,18999,112191,44365,22723,68409,8733,57746,96565,75007,14196,108844,29475,88599,177563,100792,106156,86323,93726,14248,135341,194131,40126,47099,14779,8272,39597,95983,171398,65882,28052,10393,47213,40689,22120,72212,106829,34964,109146,753,648,21660,30047,17527,181025,5619,145357,4085,216883,9359,186951,24779,53931,24545,36197,223296,62628,168101,4243,107313,30321,26642,13049,51059,31027,107912,807,73550,26551,84369,122422,165872,49754,74213,234264,33151,52014,33100,87183,22365,52500,40013,23302,5652,72723,21404,26107,48434,587,94049,168493,96418,32871,70860,31709,25128,443,71597,166253,15670,70994,26341,133675,28280,75491,54756,47955,56028,26182,11952,113272,472197,64640,110753,17919,337,50642,22576,142,87371,53391,93210,126694,15285,19642,85667,14148,1506,42092,52962,33243,11970,20734,135843,57044,58880,13002,219134,22876,64754,232519,4257,43120,321573,24799,64526,124728,52579,81472,70831,276848,17403,74359,23021,182101,74597,23744,148267,12055,7976,5349,11772,67540,167347,65318,18720,127832,108238,22828,90233,9987,259080,118185,73209,79270,13775,90100,137742,90799,70569,15699,19961,9087,67475,57872,39731,8810,134897,131868,146849,19898,3334,2281,167061,91073,60356,467742,74712,188,53179,137679,92769,29241,9537,132595,80119,1041,88962,5976,40171,44911,102859,139059,104558,98987,47761,19272,71472,113864,175377,73338,10857,23402,23758,1591,139864,5644,4076,118760,16427,134198,18853,20291,100849,37423,22038,36677,19071,195521,57445,11069,31869,55718,66882,148490,44,41296,75242,49704,166810,9906,20943,122258,49112,105667,15969,10344,6408,187694,21399,72742,58970,14867,14376,81889,41856,23225,15042,56993,16074,131389,74276,72407,53875,383108,53597,37363,68993,44854,122548,430927,198279,38430,80409,12245,2981,628,2818,17760,37437,238229,7968,46892,2200,3730,34190,65983,37959,112291,87850,70827,6522,20750,73913,111621,41652,19587,2780,58668,25916,85259,18200,168962,95781,42445,102050,7776,57662,103313,47742,96358,41964,66174,100396,29069,204735,19679,27978,7479,40264,22534,61183,36081,107436,58223,14680,23002,101311,24716,124108,12908,5646,31750,40380,14215,232799,102772,14122,96775,61398,50917,12096,149880,67833,598749,124194,155871,49216,790,14677,65319,56917,7440,145744,95701,12206,49405,129269,76199,45732,9767,11058,9047,210885,11051,7392,26307,2130,8132,147526,20802,232698,115660,50060,59789,57344,107623,80343,112676,23291,9866,160971,34032,118291,15719,59730,164911,28975,2659,58046,78480,21854,66209,53863,109085,116045,29021,46481,107552,22130,18764,70254,31272,11300,52460,43933,84738,20721,53869,190840,79673,105300,7561,321817,66924,13940,33281,101046,183181,32176,71878,5678,62924,79535,56646,40303,19559,27703,93042,73368,42187,3670,37376,46440,7023,36816,109628,20680,5940,276440,275233,170848,112093,136996,14984,20226,111441,77693,112960,48577,39370,55707,50314,123404,26570,54281,61372,123391,4857,35928,246740,132507,106646,44241,7196,92258,9825,37688,51197,303141,5590,15476,132986,10955,85782,34486,26696,7991,28813,18858,39546,11703,11365,38185,5716,93555,11925,40121,60002,6985,10976,171384,3887,43394,13337,56346,6381,252336,39573,75042,53711,1028,31781,44295,95925,131713,7214,68125,43571,70954,213234,1628,8760,13391,65485,17320,56038,1710,25248,60803,57399,19839,3870,326,281556,50945,72400,21460,316244,75619,56246,98775,481,13513,55765,50427,7388,123519,32929,57908,27124,61316,101097,57467,30228,48792,10788,20402,37318,50526,155730,34456,158065,145305,17832,43733,64052,4506,35072,205355,177028,184004,187081,68616,35938,83703,10367,36892,93186,260137,51934,89970,4985,23445,26755,21558,7948,78741,23376,124405,85594,68596,57536,49351,12619,56593,132668,99924,109728,71844,71935,196018,65464,17617,14987,89701,143773,33997,8687,22701,33258,2914,4436,72108,85610,9671,49067,2327,82988,1361,1672,44033,35777,30269,24057,10605,82236,616,15793,13919,47249,112086,116698,9484,80207,90574,33304,68624,93127,56101,42210,160929,4827,38995,38095,4701,125119,5027,33680,9236,231236,14135,87837,23318,70261,78893,30151,81482,14332,1084,74256,27532,46644,79185,3148,62615,6981,55672,31668,36825,1849,14536,37446,14738,23779,43058,162749,72199,1168,21346,5592,85932,85302,9668,18351,57135,150360,2080,228015,77953,34670,119302,151751,31009,106725,84265,45214,59289,74178,113071,263206,111009,4021,44449,188119,192629,123592,392506,292847,114487,12831,205858,9852,20780,79648,75767,357014,97721,18166,21005,67950,33226,204009,16536,2987,11335,66717,144910,47950,17262,55060,15063,2934,51038,26775,178497,66008,3427,49433,128592,20036,157553,63861,3089,23015,51210,28696,35933,49942,71135,231518,99620,17248,21835,176536,20676,16944,38700,165831,233253,295625,36723,13023,52745,10907,19423,67972,125868,95473,82875,1183,108455,52685,33417,64095,21433,52438,33191,127809,44505,211823,7810,2752,95548,162031,7185,91196,47563,61721,33359,17897,23682,42806,178101,22874,49707,199897,75419,82456,8618,11171,79712,116847,18783,44190,46564,5346,59046,95032,7893,14916,3214,26800,24172,121453,34362,10250,17408,18888,4840,68696,22831,13162,36005,32512,14800,62357,41723,45046,27247,37486,5372,2564,34261,298500,66509,133920,89138,31305,117697,19097,108304,81386,84106,23802,46411,63304,946,51417,41777,41041,19501,115864,60743,294354,37955,94165,18116,1156,17937,20645,57114,90804,58042,48643,92288,9861,2557,88546,61333,101008,12853,5148,87856,4152,144503,73841,18718,9789,147565,10846,42085,12789,30223,8993,56352,67203,2448,28215,6052,23540,126319,75933,36689,80235,23231,23561,21383,38800,77548,102798,21234,31468,158608,46188,63960,191679,8051,67014,11185,170078,42186,28827,34777,41930,212079,12421,34750,24111,110344,73918,45171,70826,141949,40063,23979,24254,37309,26724,27179,24718,83648,54938,14591,17425,29525,102675,48975,48654,12316,8929,60640,41709,50168,63264,89812,50716,48632,38755,138583,160123,55579,71829,24230,233277,46322,39650,166388,34718,24108,98252,7031,106695,62498,18258,35062,217827,78731,34824,33354,19520,60852,2432,60224,8587,2836,62955,702,20227,42285,40560,95592,62486,11094,53035,143291,18842,46177,77994,1770,9657,107422,172915,32655,128716,25886,25164,156740,119928,165875,85817,11007,89110,33956,12652,65156,180266,8494,36889,19958,20955,96,1264,118288,135769,44754,86671,5632,19026,168220,289120,33569,93821,66144,70635,7687,5642,2714,55445,56636,71545,184182,93133,7332,37389,12643,52315,22729,11014,158742,17050,152889,50178,34601,41945,52136,9948,26914,63548,95721,115951,40759,8960,158258,38938,49232,48325,42234,81523,253019,66128,40978,20048,238048,38760,62928,122560,118532,43687,137472,163689,26680,9878,17448,51035,16211,60834,36749,29178,14241,59868,150086,2305,26477,42422,34342,165341,83279,33894,14257,29928,12743,13957,125571,89134,66712,10952,16507,147839,30146,7249,16565,45399,39874,114565,215780,31990,230881,171477,102,196546,44538,10880,84948,281705,86651,10617,31395,2342,453658,43569,60561,132901,21845,17727,58556,258242,22262,58728,4008,77997,11806,37431,30599,81375,109137,185787,114085,217292,97453,169085,30593,60212,11544,102056,65580,2384,91655,4855,95725,7295,157994,16228,20669,53276,141590,105246,17334,25440,76067,17967,39321,38911,11362,28559,63807,21627,26468,85816,40120,1025,15234,58319,69516,66512,124548,75845,78873,22137,46681,51242,85683,32909,76747,35555,43396,101465,1765,73094,1077,2962,39028,66777,57831,42048,15828,13962,36041,63657,52412,5242,58846,2141,5506,219012,134451,3936,182230,17558,17153,152237,22621,49377,170216,35257,68233,65374,6510,11126,212151,7184,2480,22517,3437,33073,30156,16557,3768,55067,86829,91e3,12350,148650,66017,79424,70885,49066,28250,21369,51213,34533,11510,3258,18176,18465,84413,6315,36411,163765,4346,356,107618,598,13727,285026,162695,8749,14583,7132,63521,184253,32378,25991,5604,30961,53675,4874,84693,5086,34811,26978,56564,7904,33519,51221,113942,69253,6664,125563,22055,220680,102008,742,51930,19494,176108,44424,35123,13025,75685,11759,74335,22250,181453,131147,16984,132115,154311,11991,76452,52609,85351,196,30969,9198,74919,2529,56838,71779,29187,116304,3504,62330,41190,86153,28393,254926,104228,105189,13264,84359,3574,12415,8534,57147,10175,188174,59504,60932,66318,16407,107921,17638,99103,49278,28403,39786,145865,8462,3558,43406,142271,29139,21989,36552,93955,72365,7176,13556,106185,37957,321774,17782,129017,51154,27938,24952,1935,39366,2791,33489,41582,56078,24558,9311,5449,218786,27808,190429,68013,36020,86003,29735,3404,87348,119357,115714,2324,86796,81973,40992,43376,93621,28784,16808,36367,2517,2909,191926,24978,55303,53308,205724,60068,3098,21375,64784,23949,26579,63121,12319,80145,39967,97861,6757,70143,67642,37082,34698,69140,122883,46151,62187,80934,429,19437,135071,137885,222647,13331,154065,327,61778,74257,40116,37493,14855,85079,237641,42342,102164,199965,71204,4662,29368,5042,113914,122214,8955,13149,102503,43173,5659,163787,69003,307084,63392,171080,21390,81918,86666,36622,24126,28887,5736,28054,207170,163428,79891,346467,95363,38980,111806,80828,9200,19288,294896,114468,87405,111715,141705,7015,72754,68463,48738,243147,33397,101210,37051,98801,82847,20397,4940,185559,18716,54718,83491,11725,40803,1128,12128,23060,5174,7745,67007,46701,1571,27807,180186,256996,18975,16837,7877,212758,250379,15440,87954,57755,24719,124057,83461,258,50864,8874,29038,71289,31627,15429,9005,4061,113851,107716,82819,13651,79656,117851,17539,111446,12938,39724,190787,4352,15402,21070,62708,8539,23777,73853,13552,38810,86117,16285,56400,1718,75342,142863,29033,378,110113,180321,32586,23606,26393,160984,207987,23783,8406,16904,24596,47274,11693,46539,60524,78595,48423,31718,20170,9009,146268,15183,191060,172765,1349,138436,37365,10970,40509,225817,20021,70394,152138,21541,66559,66544,89352,2725,17258,91345,7313,3815,115868,8660,40362,4071,103524,39388,118275,21950,6549,38226,32754,209574,29201,43495,18028,20296,40597,18370,47520,202450,24134,2219,8195,69545,38041,136934,46374,19041,159811,84865,58620,846,98749,13569,30714,97246,32186,4479,27355,92973,35214,151491,75963,37631,1561,27200,238083,23182,60756,12291,25766,39355,102333,87362,65741,59906,19538,201575,48772,102938,24438,292580,39964,66366,9004,61379,50548,37622,38732,28379,68180,76622,17488,69849,5963,7219,48143,43413,55358,540,58691,29506,19245,52193,48621,5518,13048,118625,44755,191081,42061,89197,2259,60665,66994,71210,51232,3585,142096,55024,7892,8345,58653,463307,65658,64319,137941,136323,53499,12746,43492,6978,95163,29925,60175,5128,7352,41463,184756,121146,20473,18426,4598,5309,54580,14277,121151,10691,56711,43880,63409,76682,11830,172218,264898,32632,66536,81062,31649,25788,92774,60222,11100,63159,9432,224657,25240,53613,152,138620,163829,2397,85345,12501,37507,64932,38575,43522,65789,80198,78796,35226,3851,108891,73311,3060,28391,93671,39663,46142,30982,66041,37281,68157,26553,71872,81142,211527,39747,118119,22695,2859,11066,20232,168911,7933,197005,17066,111071,44434,133994,120798,12766,227798,45756,132852,29917,36076,55352,65281,129800,41958,18944,84678,18580,168093,132621,39997,54092,27740,32354,3770,114118,103242,43918,15899,18574,145944,3190,123469,219903,24169,100571,62403,16776,92779,14535,17168,16475,14304,37231,1712,28218,242754,61688,28980,1318,51359,222657,99200,67989,31772,23932,35351,201251,49041,27306,19128,40135,3986,77333,19649,120683,151927,21081,7076,78375,77501,101599,8011,89585,96715,58179,5378,102138,106793,26051,217276,4197,16297,27014,46721,13322,22806,5278,29629,70632,9647,71519,58818,40603,128530,8903,36770,56900,31483,26935,43845,34265,34920,87658,6114,84767,64250,47318,50720,19264,162514,33357,13117,6705,46696,75032,71054,87004,42035,69138,11903,99854,102328,19611,34525,69312,6431,49842,101600,133178,108751,41829,89939,225664,48916,99556,9195,130387,5960,36857,116724,53518,94002,39077,53996,6945,22261,64291,8314,152785,57588,16522,9091,5048,87671,35441,39509,1945,12423,158923,178413,37549,14095,1475,73188,62878,4819,24012,68534,42606,4010,120809,57497,59564,101758,103718,32701,80116,12345,95834,46918,21468,53213,15665,31200,3867,5140,96013,250744,21016,10069,13968,35449,180829,27683,39704,59956,22893,3115,26293,32785,75934,62445,141162,62720,2018,83638,19949,114012,95006,3330,99829,130935,309272,9565,55874,121727,37017,23586,319858,40970,27602,8625,112329,61060,100088,118525,25922,16232,1907,60671,51583,44553,80993,5262,94679,8676,940,20736,11823,3020,16476,12340,152600,97416,3703,25744,66826,16245,16876,46446,84798,74227,176020,45192,61955,75496,23946,23626,40372,26036,6149,11822,30582,16541,41914,82385,232823,40921,80773,14930,3631,7517,39619,4348,36180,126106,138939,62611,1477,113512,47321,25052,14546,118881,29060,23589,128322,36795,18401,137921,104699,267929,36194,172791,18113,4766,188215,30083,332586,94089,5805,77909,22194,68234,154976,43220,40660,70001,184893,138095,11128,103010,22663,5108,212615,8485,5565,49222,54614,26530,42639,16319,55062,152662,105595,21114,22216,10294,68158,10436,86950,7206,62115,3977,3657,59874,456,118617,18156,106663,112229,80992,17442,8217,55551,5133,34344,251927,51153,39364,201321,7816,66803,23057,156724,145664,14276,95705,979,2796,6875,13429,212525,50602,26276,28284,3424,19465,52397,46963,31420,51399,206476,92317,48851,637,100820,83349,10317,60227,21972,6908,282439,32857,224767,95629,83882,42106,87338,69757,29840,68709,37665,45244,114577,49188,175943,54009,186746,106158,70168,3358,234002,50555,9221,129338,9562,20118,32923,78479,118280,65752,4977,10474,102174,60947,129006,10570,83451,8598,8078,159367,123785,80438,16742,5905,5281,181513,42402,6977,163136,93179,42191,14968,50421,112401,105440,33456,57347,121611,4221,94954,36517,24046,27796,6255,33394,72990,135408,116627,1233,57874,25654,95419,68156,401399,313338,55208,45573,93124,119251,47200,38196,11909,130667,45391,73904,64964,167846,4137,115606,52036,62214,7969,160925,7187,1132,134835,40309,73195,64494,80472,444841,61111,26500,45323,40743,53625,52797,22659,15631,29739,36706,28841,39147,102836,26794,10536,14845,87305,45874,12241,127587,83833,57183,79722,30844,41304,84655,20825,92500,3722,25655,27811,10157,81634,31362,34088,92487,70123,22190,185100,72658,139035,192523,88241,2078,230490,44528,85638,100198,22088,29982,291233,241062,13865,4445,137791,37835,107218,31726,19718,38234,72528,23046,19177,66695,5109,17251,28077,5617,21554,47839,72425,133825,1486,73065,181275,141508,21768,62971,63082,2512,34200,9904,120309,6392,91243,68416,268253,41199,116757,138551,185526,41246,28986,4093,19057,17295,4148,245766,122360,35356,112075,20301,75441,10998,7977,19769,62922,937,63547,100196,26427,157820,20983,236696,22935,8140,90315,156004,47204,140973,7726,45097,52725,22636,23436,257282,105247,522,88389,216031,202204,46812,211666,19693,68828,81691,45925,11256,30292,372,5236,167826,88328,232776,151611,5360,82104,18841,80393,25465,18285,20320,72377,31730,33160,45803,38715,27705,37379,24163,18360,103586,4015,32305,269494,91252,20080,36567,54650,7797,57073,12650,31164,42209,6375,261663,105528,81661,106002,2800,5375,17247,43151,4442,15727,194619,100855,144898,62320,78465,39929,16454,1967,28311,61363,17219,9395,8745,121445,76939,80385,162380,22009,54191,44248,16299,122830,48151,74429,78291,64755,14238,44966,2511,17712,67954,93583,829,105899,49935,84750,11591,33185,85447,42717,27409,208542,28965,62052,52525,5597,25694,65594,16343,63224,276188,12475,9331,127507,38522,57287,24128,133161,79723,105548,133695,48917,27558,43278,46520,13778,141954,110785,83366,17715,46317,105763,66298,147013,41086,94180,16478,220447,44611,730,19722,78975,117889,125643,26254,16574,18480,65006,15806,38549,246418,46052,36056,8440,34984,30170,3163,59800,4458,115442,4283,41970,33507,104078,1653,22,121158,276486,3655,6338,24048,133421,23641,2161,24422,36006,8086,10675,181474,12307,29514,59143,14729,52509,87128,122470,19446,80852,33314,24573,119864,14237,9652,57779,6612,51851,15284,98871,90581,124466,156831,21190,22015,71380,161906,87247,69201,18392,17908,108470,72962,40719,14338,17911,95260,43339,20610,78916,20710,72451,11315,31448,17263,58853,178878,48111,116002,45497,80506,82605,85880,36300,121755,25215,36118,301929,88728,405223,276136,553,34704,212438,49970,78329,922,20711,25036,257130,38295,145369,18128,15385,30829,55656,48345,8012,3561,28004,122041,192900,58338,112508,41085,29976,87040,47117,23905,4336,92061,138880,97407,42083,172121,6256,25192,172671,5,93568,1420,12677,31605,56743,40620,6015,78415,231077,31298,80026,13902,19048,24924,170586,32955,176119,87859,36731,6773,27711,24658,26475,115216,133207,93250,95820,88522,8317,5714,124047,55219,86860,19677,23961,22928,162209,8904,225992,359835,56084,96201,29392,96558,86071,93643,55114,13347,8183,95129,82012,2017,123336,34219,115554,157159,47747,101684,41008,18735,193781,104151,226906,7552,179874,124113,31159,21162,44010,14771,51268,166128,31382,73124,77438,92830,205709,12113,1292,38937,13114,1334,2118,15597,69581,14449,21934,76618,48728,67038,14967,51495,24243,87736,147249,26720,11119,46063,43749,5843,44147,152629,133428,65703,14269,45604,57982,28672,55616,45957,8438,95433,37698,220862,132034,39456,61870,4161,26501,73560,56418,9845,4654,20916,10456,88920,119358,9015,65931,96507,48029,38534,21676,109081,43078,34943,25089,6131,28766,23665,5477,10255,16695,67,45778,42443,42770,29534,23733,100513,62617,42630,48746,14191,43753,50295,26007,8792,57243,43119,54725,164253,58250,112304,131796,25165,4651,3188,24831,47748,3705,19540,13211,102095,5593,18699,23666,32005,117571,33541,60584,74573,86311,99443,25172,27222,168938,7143,11853,53560,18834,19960,86522,28217,53266,117700,72989,34323,18721,66450,34346,74056,47217,202002,46269,9429,68582,75458,37823,82843,96652,32549,145144,27958,19820,158086,31955,201406,135379,31207,192545,12950,51704,9094,248263,76147,64028,110009,79407,89345,99284,223492,47966,26848,15359,201137,2861,110507,71231,72297,31851,118777,71039,151051,240855,16333,50766,14727,7939,4149,80908,418780,88378,59276,1327,7284,38576,79814,65820,42199,84860,49574,62596,12396,70598,40117,8648,7994,16836,7630,14047,359699,106878,525,29037,28064,13380,11675,50669,74216,103539,180314,27449,56299,172344,19274,7301,246099,32043,19422,36506,129317,6806,30140,4614,46639,66926,932,86600,6322,27847,233103,10541,39025,34887,3517,12972,26220,2031,66561,115015,48658,47596,12714,33845,3893,16165,35237,89983,14769,11962,147224,47018,29977,27979,5552,82338,86023,131368,1218,24853,237840,132193,15455,40873,3668,65351,53388,15229,59889,272245,47934,11858,34347,18038,90853,86981,300602,19343,114181,29362,84921,6095,106059,79472,38015,1206,48741,6208,8e4,21916,17423,6002,108083,24479,34931,56661,9511,26995,100694,163853,35997,81254,58321,18919,171890,86877,91341,74503,70477,53412,7027,59281,39892,131302,5864,15947,61301,67466,162369,47956,27874,35624,282324,21270,111847,102548,41482,30955,116737,28264,8592,55458,22301,75090,29821,30697,51709,3041,19208,8038,24634,30467,87509,126428,19389,18814,152686,20701,83474,45832,80891,105808,11378,153223,120770,98186,150633,49838,9141,12755,30962,5260,74490,21256,31678,65062,33326,289838,187831,20595,89768,2805,58535,10844,70085,12090,2451,138068,98544,24461,4511,6754,41684,28203,3383,65355,82833,30161,83924,234361,128424,28921,222594,33975,125491,34069,11508,67464,144226,41850,98703,34371,7901,21254,38398,65651,23549,53883,213340,123269,12028,71764,177701,28758,2623,68395,11549,15232,68603,9660,63116,36079,57093,31198,20475,48467,89984,35619,186847,107469,31389,43631,73867,41949,68841,114250,1605,30564,63403,17588,27680,99533,12641,70325,50428,73426,78379,11855,91651,72081,91720,60198,15743,12065,83398,140046,6761,46598,45900,5068,886,62448,148968,37347,19405,9680,15819,43496,63370,75667,163700,37639,3633,22774,34341,183131,134335,37200,23915,7054,14194,12970,26438,13350,285521,25594,8219,104410,91039,168804,138480,149734,15907,33818,61132,60082,4622,110187,56736,13551,73571,3945,73463,65498,17758,263266,17593,2710,27585,54469,38200,45367,63754,28881,3473,12791,98287,31895,65787,4463,94536,24951,36332,59901,28803,52130,86403,7668,181822,74831,18977,9850,177206,145485,109798,7292,31421,26280,77211,58511,12507,127004,11113,147,8729,56208,43066,79926,129937,31345,83947,39915,46146,98763,42566,1337,13192,18323,105163,80570,117753,16555,72883,11077,159438,40764,70933,83329,26066,12276,72059,21655,173836,126713,69454,153482,91585,70644,102558,110483,6764,127864,190133,3961,101798,20945,71138,82402,90884,69669,44753,923,16939,59700,164258,25969,27082,31399,43846,6306,246093,51342,6153,151581,202801,182731,56475,162188,89426,141356,14355,121815,27536,28023,65257,77523,106668,127314,24947,12790,38796,169698,23555,10725,44573,183083,42088,62716,43265,105958,32050,44067,50118,1668,3874,6243,318411,16599,1691,94999,52378,28671,216728,123258,2059,34969,69225,5913,136280,171443,141515,91662,22175,135282,80020,92270,1663,4808,4482,3495,34691,5226,109830,108512,17342,107488,11606,123190,100247,29666,146527,113014,15794,30894,13224,39585,243192,22351,9903,7836,47699,11078,25468,122291,48821,26780,122679,75521,81450,630,4895,92900,55074,74293,17441,3563,111657,103102,51613,12318,52370,36191,68245,34269,40445,41354,122901,168604,182500,62012,42557,11259,24428,115113,86345,12362,3909,78430,86852,134602,20459,47853,93879,22577,7659,3688,38555,13349,17381,56715,91639,12493,10895,92438,3142,37057,28928,2004,36427,32268,34222,209974,10432,67436,41989,173518,107930,27079,62729,30908,55558,5828,45031,14902,53546,8204,144263,60255,14520,88212,86582,109589,69356,8064,47449,8505,66558,16886,4844,52817,111260,215129,12941,91118,650,20770,6273,73089,40618,62790,2873,35002,14023,97208,19386,102646,36993,143736,135457,35385,113601,17893,32627,84439,100619,56016,6581,57264,172160,45452,111710,203627,70131,24100,322787,1996,35665,70078,22358,90922,83658,4097,63200,58499,14542,99153,52159,6615,12414,63415,31986,16823,1579,65405,137809,8841,16898,48082,259,33014,42375,12260,179850,73667,91389,98882,29532,17311,326251,41092,5928,20742,44964,48019,43505,9317,49265,6643,192712,48424,163487,19861,20113,70848,31928,105333,23685,78563,14638,54755,7158,24142,44018,20774,125255,20331,24280,10163,1285,2336,39851,4299,117269,46714,63816,87779,159624,11731,9971,990,137317,108831,50994,74554,162680,23640,131597,146962,170620,34829,91205,21184,1913,63616,18427,93136,156592,17519,67565,115882,138220,78622,88535,18115,2711,33554,109492,54298,971,24914,25863,36363,45715,27099,194995,14299,178181,111488,72395,322385,157719,130787,11897,81843,83999,11369,49280,118604,40922,61332,110343,53407,75639,40582,300440,54722,25637,13694,48248,48278,194521,56203,52779,48783,72627,10953,376,16733,280238,26351,230789,15132,25168,137270,3588,63704,73376,94031,74284,19443,159557,9697,39901,13351,119050,15406,146455,3460,29556,75195,37673,102524,92329,47289,98413,15311,100684,56345,7116,95480,11590,7200,167,23610,58426,17730,136656,27944,53151,2701,8824,103124,3017,90744,113588,53216,79736,65940,26931,498,29568,80540,143543,21292,1740,59268,16561,180816,42323,50174,40890,52866,10703,57169,4700,17191,4424,93511,49698,166650,26972,48631,165169,82879,69326,202970,4007,2376,231325,139592,22119,62851,37504,68816,58345,67398,186643,43331,277416,53749,15746,23102,17432,4793,151138,48822,54265,48203,198688,14305,54287,2291,18018,113378,123260,7180,97549,87027,120085,2920,76080,8190,102005,5641,64580,14955,59802,54028,58884,19367,81779,412567,85957,97053,103637,78871,29364,27637,141728,4767,30686,112738,130146,42745,12730,105040,14844,232,210944,36581,152317,135543,29744,3129,55647,58149,46319,27265,17499,28005,59948,7170,34138,5702,293047,110892,408,91760,218674,18469,46095,81403,14389,4610,35672,73060,11006,74848,104820,118143,190357,20043,105358,141735,5115,27093,45924,123073,52599,29433,9616,238350,78610,24851,58858,26769,31969,24613,18294,4982,32735,39639,143563,112073,202205,12567,4873,88601,44897,81503,101648,81362,34662,85277,17574,48173,21435,221188,40215,39576,80786,26544,64668,81841,10731,37733,247986,149188,127703,495,18382,54388,72446,43071,30974,198723,89608,41360,190,33045,8386,31658,19992,237838,119015,137622,50890,100913,6460,116233,267230,26621,104129,65114,14190,41542,14888,85962,23342,23041,26453,43725,71809,45186,4770,46452,53894,56616,221286,18973,9038,109299,55365,19366,26863,18808,60909,69353,41738,83463,12100,68561,72860,3980,13796,49340,12332,31311,27418,4255,53430,18976,45523,510,14224,30477,26581,4530,3651,101663,139840,22709,150861,31996,63923,120623,262522,3076,10528,2929,14672,130238,18087,9816,121894,100308,25085,55111,14565,18952,53293,2042,369988,23674,61789,133529,28783,108293,35477,47119,36448,71049,40015,33055,78598,198442,1833,159937,40654,77444,189245,113153,8621,18599,38553,35223,166072,2375,11659,21786,89523,6032,12116,63046,159398,18454,3678,32521,47626,11411,103527,38896,42946,15696,26370,10185,8413,37080,165583,4331,63555,14907,72220,50056,6623,62236,36565,49783,10049,17503,100581,55951,146244,24724,9626,17969,25524,109300,173965,99994,101056,46459,43647,53737,277968,8347,123521,74858,33829,44762,77574,877,81377,222525,123532,30602,43881,53145,2973,16284,81940,61281,127044,63620,9875,14756,114829,19032,9202,52759,119141,23928,120551,19607,3599,33401,76821,73233,117430,39968,36539,7071,5446,121735,194059,15206,45283,6706,15603,65615,1207,165723,92275,34773,104447,8396,32353,205240,164323,13600,60555,79205,25532,22907,33410,57480,107111,69630,32137,47832,70913,33161,20321,2371,117348,10714,86246,1625,11763,17900,268,78457,99175,97940,101092,86660,32221,14041,128504,125080,53744,124263,31017,13897,403,31859,21964,5633,111630,5547,77329,17961,18241,84995,25984,12983,67491,62168,47262,5241,297,51191,7351,8967,147212,82060,16821,782,11033,82431,62957,5026,43459,77963,203477,53528,6247,191852,87774,74164,215654,13467,1522,219964,28589,244104,16242,117821,67725,72570,156792,17186,15979,26990,44128,193014,35276,57125,16212,166451,68017,6905,77608,16364,53777,75921,76426,37975,26203,269296,64099,84122,12077,38533,830,4407,20139,963,43028,38902,42911,37503,83343,85045,16979,1165,60835,137387,58380,86990,110066,134540,56331,193845,81238,17922,163093,38744,110641,12502,56404,34862,26865,125964,12965,111648,25547,7771,27196,136980,9555,29551,107158,57885,18831,37705,35505,101742,13970,102109,62548,124657,23328,11124,89592,146376,248050,6241,22033,18337,80685,29898,11908,216623,67721,106162,146610,21377,15085,91552,42041,62560,122532,125336,102365,121537,142559,29693,223919,11515,110495,18776,22494,5895,185059,103592,229351,51220,100102,37027,257855,29359,54123,36066,106493,12244,79258,32002,432,56205,94836,90182,6726,14762,29391,48938,26864,38083,60364,3310,60192,14766,205567,57504,110760,22649,24666,46333,21517,3430,13135,28873,27052,158809,11597,20529,6695,23138,22960,37137,45574,6545,305877,43423,26153,24769,59844,14501,10430,134352,56169,13213,103432,49523,35181,13435,12408,129475,64620,230854,77390,51990,15653,83248,33466,44571,117828,51481,2187,10559,68019,18021,54895,48247,18354,33737,4554,108595,37288,39767,116707,9175,3726,108877,21616,83684,49862,1938,8543,276466,20134,108498,48770,102254,31914,131520,185291,100559,51890,209,19526,76471,50544,71814,99351,8172,198526,28816,20419,9109,98389,136777,76479,75596,30635,165417,48216,120220,25955,211071,39314,24308,32164,2559,146280,43403,9233,17947,90585,1786,86920,125662,2457,64741,32152,32918,122882,78538,44001,31723,56426,23375,103172,88177,145697,52506,49319,68016,31664,41488,18486,110400,7030,28241,986,109199,19900,42147,56864,65287,49183,7858,24e3,30453,840,16673,25907,68916,89927,6309,158335,36407,199737,130464,13137,59603,201778,195292,21015,42466,179062,172561,89492,11075,180407,31868,72493,20998,60217,9865,19530,39274,130266,54539,21623,12535,13505,40641,73375,4087,85633,2153,3117,70680,55788,92096,47509,98493,37490,271936,151475,3032,16171,96642,34106,78425,125761,19591,3366,19316,54508,24183,50786,194248,91528,33253,34622,108355,41741,705,3814,3883,108929,13203,67831,10142,59754,68208,29128,84820,56880,38794,24972,48571,40821,40476,18137,164254,24064,236309,79181,11282,395,39169,2013,51587,28551,9645,701,109513,115899,113566,12762,62045,58322,103726,41343,40866,244102,143816,2490,70346,40973,52618,15412,30720,104315,38917,42027,93676,17513,107418,20706,123890,13399,97727,24044,87962,65606,44250,98044,65276,74790,101473,19350,91570,1326,87790,172042,7577,100813,86896,85891,41512,108130,27794,14875,71431,12835,156250,58135,3759,22476,42176,115873,34686,56523,73643,108505,51491,20838,12721,32863,45700,29496,13700,34294,55360,29206,155942,123812,7706,163234,203,132720,49358,144431,8130,175788,35818,3270,76832,25710,54095,97274,28779,94621,74396,19092,128242,58067,20885,14670,93255,15107,63291,23654,126900,129421,59294,262659,9798,3251,67344,28600,44629,50672,29072,26999,31526,23183,49175,165843,175455,17282,175411,32022,45989,30298,90690,78118,83156,23749,35636,31317,7069,80381,94561,133756,14960,97404,6138,41065,78041,32843,16601,34123,9559,146529,123377,96395,54441,42012,84257,123541,10745,22139,106459,11720,150883,172651,154996,110538,4728,53447,25704,2009,71152,119354,21166,66604,1429,216162,8637,122250,63520,27180,29172,36124,276428,107787,77184,4680,14952,104903,24418,14793,51561,52931,8371,26342,48526,7118,92066,67280,40653,8847,34597,105438,14198,50163,61188,146286,50315,41205,170829,161496,585,197359,95056,1687,365794,91349,48507,5804,49263,5146,104902,96365,117343,132222,46084,96919,16875,8073,262381,79982,52663,13928,16056,153908,15145,109256,132308,18763,24904,167644,13618,40750,18686,147124,114709,150038,52849,2938,12568,48617,8778,5459,44202,44591,74914,17183,248689,13878,7822,80060,23116,194037,18487,2067,7798,43077,33678,244028,31320,74273,2794,19466,8218,36280,183997,48124,19416,29656,19280,98734,7715,18311,30701,133602,150307,126956,7378,2933,79903,13178,12593,86571,26604,92446,13574,44205,65699,427599,21118,8245,14407,27877,47936,33542,7916,26460,117762,21596,37818,2249,127359,209394,60044,47677,308089,36791,154971,31417,6998,150042,174360,12255,43009,29335,48739,3912,101398,53340,2580,146939,151295,45360,125275,15273,45383,27456,48761,23314,8750,60801,85823,104759,27894,123685,66968,39480,26917,55290,83305,2696,98390,57569,145853,340733,4919,20024,52268,30884,7413,203685,70989,112855,4129,50536,349518,68205,332641,159581,135361,236026,37563,176404,64899,6578,122033,63871,1850,85234,82089,66124,74145,121098,107351,12687,36881,117334,13136,14698,85933,93866,18047,32620,310,15094,46e3,88451,23632,36645,27940,87618,80520,58892,20976,27702,140090,96075,67841,103292,238964,87778,107338,17019,83427,67522,7302,8261,47570,116787,8730,80484,61772,174422,56005,131193,52875,14588,28471,59817,9586,15720,158155,51307,109734,15196,11025,59331,3884,52626,102602,84797,25158,27314,4437,20488,76214,189248,35023,114952,157376,2827,62439,102878,129749,36405,10329,109339,108633,36662,1254,13267,5470,87105,58004,15397,10434,159667,21864,52022,179464,3013,32147,31496,116832,18494,105502,129227,107267,50033,13481,9954,24267,22141,16257,116154,36185,950,115685,11305,176708,2048,178671,112573,287867,162328,497663,95170,50979,193861,50987,30368,136257,31830,46549,15119,169876,23788,17462,249887,57377,1949,35448,14791,43769,210091,3783,34612,282103,88380,245190,5457,20491,98908,11402,86899,117916,16028,162584,60644,320177,156096,31065,55876,22e3,77655,9992,23397,13757,317623,63978,215255,2443,17648,93231,27388,104529,93807,55505,140477,12046,112040,70887,40152,94365,112353,25063,114679,266061,71248,119555,15589,2244,617,14129,211431,70110,100652,7777,4383,85911,89221,21010,120615,58357,86405,37554,41647,18,15143,69662,60491,14714,186134,148344,42347,5410,168175,44535,42449,343894,129417,99682,20659,27272,140483,63455,222159,17536,13722,42637,62324,11976,114691,148109,2283,32057,182393,4295,147364,33705,2075,44303,30274,28331,63740,69740,29148,10346,44862,33716,73937,153333,12930,38784,247159,2515,41053,20256,83368,256189,54639,115240,5096,24661,175419,153552,26516,141,138176,63885,34115,47222,55709,2765,28479,38875,236608,12229,22921,77291,54426,45388,2860,57787,114579,295139,105782,17826,71066,19119,54364,69385,16568,12323,28057,33346,34919,124763,155533,101386,31644,8627,49001,303600,29868,63213,9103,77280,71333,9696,138789,37059,24823,5057,21352,32368,114208,56803,19424,10445,58514,8661,209508,26187,171838,10460,63454,14016,122504,41328,21329,46618,32493,38225,7855,31763,7945,29876,8734,6438,24205,97490,139977,130740,47323,33195,85390,57194,13813,60600,21313,96251,7699,27584,170521,139271,1363,4402,336738,129223,84983,69150,13147,3590,163929,207225,155260,55916,20288,4503,8398,98490,11773,27512,37113,84976,86558,28365,11756,116005,182148,13733,115313,47644,67208,85069,9347,14995,226141,14704,101835,41159,35314,13113,63526,214039,29978,50446,83339,17440,129441,72522,118641,97816,24907,73844,15717,118884,167255,96509,162793,30847,36849,51297,78974,77793,10427,1873,2972,9999,35074,28190,64297,146836,46298,60038,163007,108919,61219,2403,75022,127339,4233,110389,69022,9833,128097,88016,79390,222936,22570,94657,28462,56956,38803,81536,30474,152794,19566,16481,147408,74574,81895,20731,1918,1366,76367,187321,54494,24366,21690,61696,33283,107477,77499,31112,414383,74362,18463,218441,120929,59848,258629,201924,69269,454,19989,13054,59894,3623,58908,20681,35723,78523,102680,38988,184112,108087,50944,132704,52966,21699,18860,96349,201411,82697,85395,95658,5093,6427,177894,44191,32755,26961,155739,6249,31310,81030,26574,84311,120155,86730,113535,7424,48888,13516,45747,98098,20077,183995,81945,43210,26704,40420,75831,45648,11180,6855,57927,65528,124096,34851,2598,156633,107572,127352,38169,123845,60142,62722,105584,232364,23211,68120,1601,22169,89299,747,258039,80572,7258,152249,11862,101204,8834,121434,33761,19175,133142,46343,40178,48723,3589,41977,30210,38868,62257,10087,82658,87827,90646,16415,47552,351723,28298,72225,91146,272760,1701,11295,1652,109651,300747,51863,198800,29446,11794,32345,37538,22356,33102,37590,113544,37970,11478,179743,25454,103417,59905,221970,105196,145604,7817,164809,102360,16974,75840,255333,56902,6659,1954,645,59400,67769,7689,18675,5215,13793,20536,27852,3387,29523,259718,16860,94625,43143,29245,15848,233581,22685,63631,78557,22836,133302,84513,1348,51826,47129,98836,58284,1830,1749,94642,10933,6145,12506,10975,13879,103781,144434,10268,28409,32346,52968,121567,107374,77268,23686,35097,10501,155275,15303,47136,21102,168741,55332,90385,15996,84817,681,137803,25054,142275,6163,38175,8056,124296,240642,65621,4934,178205,16101,62803,60964,18230,100622,76465,44689,14545,9543,47514,16852,93380,28048,12047,107106,37575,101485,77047,57326,34819,96137,76916,6469,46264,115983,75768,87668,69942,13027,165,8373,114231,26434,52844,42799,182044,23580,146254,38081,43236,33883,146220,382894,14606,46035,36481,166621,35417,95382,2957,59384,60428,36358,66343,75378,22267,22950,83528,17577,56474,25285,4619,179691,75355,95836,53295,34588,171410,4487,14679,84208,44015,18562,109133,54101,11531,86052,174479,303157,28095,9953,35642,14564,39802,16145,77606,117406,53038,121117,53624,22062,1212,7632,127157,237292,189087,10478,127345,102515,181997,86752,87623,10966,121602,68783,68681,83042,114380,138349,191305,67176,50085,39016,1427,42384,1412,67118,122616,72389,25260,2237,13576,137346,19938,20304,2191,68759,5373,61364,238507,75814,23931,69565,38993,131741,38364,12528,87762,5679,129853,5310,186831,32653,90338,260176,389531,108118,26843,43985,50175,30563,25106,56965,18130,140428,4542,165503,117991,24219,229605,1819,129663,1240,3797,76093,18398,71339,51919,93043,27175,47060,216257,6483,35051,1217,16512,80798,129064,13225,69339,8548,237079,72298,2575,34280,51379,117910,55671,53345,247552,29486,39328,140821,34681,57045,60177,5004,90269,78522,2479,322607,48474,61296,13057,31558,4678,59271,6699,27044,31988,35944,12503,83480,4389,136508,3781,114121,70279,4488,155829,42214,2898,68191,75695,305850,45041,74344,106509,30087,17429,93292,12477,290,23080,114802,35714,18751,26554,105424,17775,2144,2412,100610,65192,113975,52975,180272,135050,129815,76238,106483,21440,63186,4260,46189,9711,28249,4169,23429,23390,8324,141585,63809,67668,38457,38063,39226,59972,1189,203916,62368,14403,16949,61767,85801,1739,40147,35049,76757,33124,62102,15780,103593,103009,53484,22952,67973,114645,6566,5245,50462,7601,8288,3513,194571,80276,1908,54592,5124,58571,2513,6800,273997,193904,1119,17991,117245,2508,129156,82366,26278,71465,63341,56943,39662,106116,94966,156875,9736,2204,122308,94418,27134,1280,24539,49022,45314,3764,50904,46424,30699,28087,293839,9400,33646,40165,822,147499,50263,116179,29085,11863,31314,5578,17797,5104,12454,1604,15342,219206,10232,67800,94261,25872,13565,90339,78971,75377,26649,41184,47695,11514,35369,20767,14227,41953,309396,148270,147938,33074,14453,27499,109019,39018,25738,240196,158931,52820,8612,95853,21524,137010,84901,70869,70021,116794,48404,38771,6732,1070,70990,187297,49140,5238,576,3564,253975,16027,16483,2811,37775,19034,25259,4053,2e3,70083,95774,19713,33431,92703,91314,42381,288770,48194,95985,3991,77418,13406,241328,245086,56533,35275,62725,9246,51924,70181,95331,16163,31410,79016,39312,120878,119371,275987,80124,27712,9186,220,23598,146167,85209,68238,282190,57048,31273,30555,80913,17594,75779,59160,135002,101219,189377,29225,96735,60126,62522,104e3,27620,86814,17240,147533,11001,5425,43682,410,49460,87270,69480,46315,59448,1816,76201,9431,11788,87960,29063,65539,47347,11678,33846,7008,196704,9895,6753,8633,120892,59970,572824,115934,6646,202559,892,48351,37611,251282,57823,67263,57750,26527,34485,90747,7685,88370,6144,64182,1709,41969,21458,62327,181657,49247,225330,122600,114574,107124,85361,111833,63243,71420,15655,191178,72430,18063,51425,54002,12364,53225,86557,18193,97580,41232,138398,67821,128724,8944,233212,101353,52099,42127,14006,120107,32789,32132,3498,18123,33758,56058,5779,128760,59888,98869,18445,84702,51911,13234,218379,20093,39031,8074,70195,20708,23462,24355,131384,60189,26390,10403,41060,7140,10781,49410,42261,87202,82566,41663,43105,60276,2768,5733,74176,28329,2297,145430,131632,83615,122915,105441,655,224102,5284,136426,67763,16294,188511,32538,61049,27893,3394,13951,159099,28542,17930,145360,9492,190122,32285,78855,26440,13570,58648,73908,4239,124561,2444,74172,53131,11468,10794,73566,11623,35343,64710,30481,4163,10328,38309,29901,10538,154377,76132,92405,24839,11679,3465,13449,11637,7824,2337,57754,1260,14458,41118,19878,38661,13416,159180,37074,163164,54137,28627,52134,184900,8520,40385,29546,30502,22386,66527,107458,6850,24022,47983,30603,35083,8934,304066,39500,9,28261,33026,77251,9374,44833,116312,34990,29236,63563,125639,135405,165398,159055,55690,88141,69643,236964,31983,25572,20436,36746,60896,31850,16179,11828,5888,3043,66368,9750,31167,7915,53111,36430,1333,64344,93659,20061,60596,180191,51630,6792,30244,43509,101058,22409,420,44210,109783,43223,27030,72477,72831,32679,29235,7675,47556,12258,39907,149412,84926,118247,24692,71717,105038,86009,45941,41189,89453,29856,52543,30627,226798,67303,59230,67415,34408,1367,99685,16867,128419,52147,4111,125381,117881,16173,44093,102224,31575,23234,24870,83790,127407,239098,3200,994,1255,100903,242275,117266,55116,38205,16140,29662,11307,40414,208793,123355,56470,4862,75600,30119,58218,70828,24075,26974,7802,192353,4851,5475,78720,66596,3409,28573,64396,30381,30690,59859,88256,5406,99945,103064,34463,37727,24238,86643,60088,4057,23741,5967,162904,38240,28356,93858,25510,122879,6897,3278,7057,11971,4400,35461,211413,21395,59615,39471,87233,55795,128426,3051,22470,41950,14705,3974,180108,80476,78442,204996,91987,15634,67610,139015,142373,35611,51134,10387,4353,153456,57749,181039,14183,68447,151532,21107,36452,20551,3186,46247,46383,129666,88736,140662,146243,2066,8360,7978,64818,106963,17896,47801,10723,114821,223295,74192,3293,3393,16987,74064,11277,91622,4270,29828,27951,387869,103235,1374,61988,120083,477,145892,128378,11779,211263,61354,18221,17869,46530,83061,108538,157981,90608,67199,95080,49064,195814,12302,66307,10348,231346,160732,112859,63633,146558,21271,31037,198802,47622,12862,95710,3910,77850,73961,85585,34752,61e3,4082,24595,103679,71107,8208,79568,150019,16615,24961,139857,32664,197366,4559,54735,32696,4126,162019,75698,13916,70108,159638,19834,9349,24675,175560,49643,18206,52459,27992,10809,88865,401975,133172,29e3,34558,30915,3658,25834,42430,36562,125265,18182,10155,40149,97082,208980,19575,60853,90529,66545,9600,789,46420,2317,88593,55595,98980,115302,5742,169155,1073,177901,3472,11189,63711,78643,65472,50459,127979,93,42202,67053,21720,157650,11145,141378,42033,22824,85705,79114,35584,15974,1510,54172,28562,12451,104226,19190,97151,73024,20948,5151,81741,21499,29006,84183,198074,54003,45120,170125,26240,35177,28389,64863,79974,60778,176915,232183,45342,2038,80253,41564,40703,32689,5430,100689,5366,23007,134279,14266,26712,73993,24934,64242,52113,102887,61801,46415,201049,54251,62133,122757,164883,30815,139966,2319,30842,766,13362,10287,134518,86111,81665,82440,28333,43019,18963,8804,161944,23439,102144,101145,80029,39052,248708,30350,117340,11878,128467,974,138625,63961,5237,74778,61834,67040,43814,13690,65947,33809,232476,115258,181745,28824,94013,9510,10246,93722,81976,7217,114383,3493,16014,69045,72692,12145,80981,9507,6692,1620,60820,330444,35474,33962,4797,7053,295463,46445,27026,12491,77988,49524,35675,90947,29114,166705,101385,133782,32704,6186,84595,176031,185623,45966,151302,63069,1699,107491,947,15458,74452,196212,6046,10498,12163,10239,35191,243951,9277,9090,29539,54460,22820,26514,112549,60372,51753,48756,21812,70861,260326,41,44222,10441,16961,48148,138771,216194,5914,52153,53400,212036,56519,26245,10117,45888,15294,138019,90913,26368,43842,42111,23348,6082,194845,161089,156206,51546,11647,30759,302912,262094,8635,78876,26535,35283,54183,31183,85484,147873,12989,5197,6356,72894,65347,20150,27370,73787,1493,45918,12366,190217,20724,13858,10981,67449,81213,7553,14115,72242,271517,11842,48310,88743,143726,22177,3290,243231,58452,62937,12592,1654,40066,33477,13751,9921,128442,15868,7106,75236,83773,10775,36938,10482,170465,17368,17469,161508,32752,98340,800,19824,264456,3901,87319,2867,26782,9630,113102,185815,24197,44584,86366,40224,3636,140916,31731,267731,9567,53678,72984,29389,27963,17106,50282,284911,60170,8322,12608,23374,89652,5268,39044,229766,8869,151350,31436,177342,12269,183212,120418,116270,2843,78888,69192,7865,184099,1086,129897,18383,70508,20242,18508,229924,124569,35749,50589,55626,9884,83115,40971,30671,18135,14452,38861,17844,201826,5549,26413,17189,13561,38539,10679,143331,3314,36785,171194,49685,187713,67506,4618,104039,17060,195080,50648,33159,19238,67559,134840,28599,157523,17130,38064,117398,94355,31918,13575,34538,40326,13997,3494,348283,62481,26862,3603,104426,244363,153709,112487,304612,199674,41239,35545,54869,293005,28223,26277,26899,4533,18518,15492,38587,80488,70485,160395,263,60162,11382,222152,4696,250751,51921,182609,10707,48463,46243,1227,49111,111564,46502,33342,56846,68541,63559,858,139927,16654,229375,76759,26478,33205,95828,23399,92945,2637,35630,28470,143992,50214,14174,21456,166191,65665,1711,21594,78019,97599,111701,36,147151,110246,189022,43021,30397,40757,131935,42065,73335,48039,26596,28984,15102,2361,7421,202167,69744,43766,52826,3642,83304,33873,75140,63169,192389,36551,92748,13039,123959,233220,21738,84447,77230,20228,187852,19095,25799,92136,108774,29237,53947,2299,118106,2687,8830,42331,202924,33667,2023,73763,30704,19363,19779,16737,35629,48081,24068,101013,162338,291912,13749,24745,328289,167679,70086,48299,23306,16732,17801,43322,54589,3586,63653,43624,53474,925,109177,251316,43805,13082,19511,86565,142182,92461,17117,101033,103319,64589,4022,4351,235897,5352,82705,107142,46391,156084,5860,61365,10558,13045,7717,18357,33922,12590,33065,6928,46993,783,46937,67846,8952,26295,6107,119656,18799,17458,50747,4229,179559,112727,118080,20683,41464,125468,51560,49749,44231,7359,35339,62988,136487,67015,5208,29150,24956,105186,48858,6143,18097,6972,16404,73489,58742,97196,36357,164616,5834,32267,13746,147733,15113,132091,34127,106298,39729,106426,22294,9780,15602,36213,71502,42808,66802,599,60755,5851,39120,67363,108623,126368,72770,91263,32486,30596,151717,7951,52002,43103,11768,68942,40901,39344,24037,127500,116890,48403,16926,86750,17745,48648,159545,34460,58419,5634,114317,67865,31462,23352,24010,98185,125708,69686,68337,13610,26271,70691,2980,4768,27225,102402,75453,28106,8104,6931,1176,6274,6475,112635,22498,6176,238686,26832,28893,90319,14441,15682,15087,39517,45270,109134,104440,45965,47645,81772,7876,52683,87720,12898,4505,185665,2769,113401,15664,57592,105229,137381,97059,119268,6876,43309,33886,128363,35476,144249,67013,143587,83367,25703,91436,59347,53236,2289,16519,19844,46309,58558,99834,23313,218816,231303,36388,51333,183535,109792,139277,54306,90139,18235,8275,32710,37677,82464,86025,92204,88842,117723,37570,128723,234242,76350,73795,34896,148247,58424,11105,11744,45746,63372,17118,49772,199520,81902,38004,22911,33752,3125,1995,53792,4689,26909,108150,146062,69674,41811,161444,84855,8999,28561,16731,93937,3189,21967,24890,22943,1356,145300,51569,28802,517,118679,31703,40607,48098,108854,25003,10233,73969,177495,5248,24516,215347,146192,48712,60626,69188,40735,5866,586,101541,6509,47590,52129,5969,222045,110933,25733,24223,65339,62812,2414,155418,35819,16022,78423,43138,20995,128255,240673,46745,236093,72176,57085,97841,61248,107,36068,193177,105427,55726,215229,20446,47228,100420,87091,14429,121708,23605,21157,187721,21880,2997,203976,99166,95068,25877,7724,98925,83401,4829,13182,18229,13718,239662,38653,116505,153497,30589,89029,38962,181302,43853,78872,180301,4786,248240,7401,106136,112590,77745,19731,60880,77789,125748,135487,5975,48627,34084,12419,215770,47557,254582,10364,106495,21856,67539,88981,38805,21428,48732,42316,12149,16078,52808,25327,51322,33850,51147,12253,122354,46077,56483,254553,115417,81834,150991,94662,86668,7381,12841,100650,18218,15741,22372,68294,50705,15535,84660,61887,22553,72299,31361,24824,17743,46820,64288,31582,77006,111674,116384,30760,80920,86149,77192,51979,79691,60342,122805,103800,240873,160744,233114,78962,54920,8608,3484,316104,72548,24337,5088,230040,21926,10172,36838,26,86221,83458,102176,12062,17571,41929,41170,28428,68239,41750,103930,2634,18313,53019,34825,97837,63115,24606,73157,152474,14715,91439,37033,109806,140259,30668,174760,380,135597,95673,136073,65073,134249,13829,17279,122305,4420,46444,10237,64848,203623,70728,10349,182885,65075,24519,25783,40318,34139,22222,63394,55266,102764,41422,20126,65100,90408,53640,35128,48932,11192,38935,96839,34782,39492,19396,41332,6250,5511,19492,51304,25936,104466,54099,73771,86115,5080,7669,30891,111700,13931,25276,72289,135447,14820,258641,25265,31005,281179,75286,393,95359,14623,13584,6680,101227,80173,44933,76666,54542,13244,39348,458,25379,109451,134348,81143,6959,65554,12027,51311,8716,57589,140731,28467,23316,17272,30458,25980,55229,77197,83798,28302,114784,7428,34548,26241,14712,39336,103304,18928,54080,12870,334,87722,15208,16895,142098,114262,39820,83913,57817,28682,7721,14900,108672,11250,62246,42849,415188,1724,26555,24549,25505,26443,107450,145899,61035,43528,6901,60726,65906,267741,21338,147590,42079,18924,73017,135236,15393,5206,4026,84185,1531,5988,113890,82647,303391,7386,69844,71611,189865,76523,31877,13315,19314,198575,32821,1928,67641,25913,104475,103489,3297,70391,18406,15446,113347,19295,93790,27856,1792,167471,116449,8541,4408,41757,63233,25765,86680,64501,27034,24816,34975,6079,4486,49693,36229,16917,21581,62426,27862,11612,54284,35702,194034,355,24277,48262,87411,70504,310164,118018,12516,47559,43502,57433,107139,9290,66533,80863,14634,34312,91725,28606,21342,67241,72355,43244,375789,37402,174015,105070,8342,44167,67494,1890,16365,11723,271002,1865,47918,8350,45564,27742,25110,125803,8553,49504,81925,62211,4534,15491,19011,80373,206920,667,102405,128623,245524,5553,113309,192739,65766,19567,22832,261958,29679,21293,71134,20962,105123,24721,860,21752,33448,18372,157167,94822,35770,173224,232737,75729,28937,46828,28062,25453,5207,140366,36665,30652,6169,67920,150458,92040,23186,184604,92330,20891,176492,49427,27828,38305,42495,143982,49560,25503,90043,29747,65328,47830,12932,11068,77721,9003,25213,94205,140426,46090,89945,138173,192691,33329,112232,129905,35709,27514,1841,19957,31411,127476,53572,17497,173549,55063,175135,19841,69314,5192,237921,117660,150697,4060,273045,50414,98940,65348,153665,164423,58804,156695,48994,213928,86036,28608,8355,39574,34540,16927,135680,18374,151587,10830,53805,16878,16623,4282,48030,8537,14986,46102,13062,72897,72,33050,108227,39451,45935,651,113320,40535,95176,57450,48843,5003,19019,10407,211163,3848,1068,4988,32091,30095,41692,15099,43602,107434,50744,7627,171349,16313,150832,352665,207750,33937,38256,51091,156e3,87889,90663,84175,24908,114900,50365,31494,83829,5398,169342,47521,54818,18935,8356,43094,41212,174536,10082,92550,6678,60614,23355,69721,14796,34149,128830,58187,3179,208,40325,28399,225029,401412,51150,31580,207268,6657,10993,69818,64282,289845,23308,12961,38447,6681,52944,31855,2572,47646,120728,179148,37240,45196,218274,4816,3695,21961,50084,35209,18073,51452,27004,6100,33941,1377,84831,171214,85,141510,9078,99227,32610,6417,11718,49868,65579,87902,73018,49062,46280,61742,21512,40862,107733,15941,29168,157765,144919,14487,5767,158014,140070,7241,573,71584,16921,223566,40331,179473,35081,47926,140885,41508,52104,59180,42310,32811,29048,123517,102413,80208,10104,14746,12649,153641,126022,37965,113017,4171,83,142592,2809,6362,50416,71323,116894,260776,16204,1524,5760,30351,12658,20703,54403,36083,45408,74772,4946,14485,50759,111222,10890,2195,167147,92962,130534,16283,177256,35016,15472,210156,151187,73922,117691,43250,52051,37392,24811,24358,30830,5775,818,21969,1476,127322,151783,58392,31021,106913,65215,89407,90802,28531,11690,20234,95249,44602,37256,18707,11928,5161,4410,26571,51903,49768,22008,25252,65780,209499,68769,203726,13249,137363,48845,86823,6658,5674,31881,1083,1823,108676,34518,166752,13791,14287,91576,91429,8665,11529,26401,16191,91972,30964,5254,28486,54697,79613,66520,18447,22870,45203,194466,22822,51703,12278,76716,44595,73455,33546,12235,144843,36154,51247,11116,33040,3180,225753,60864,1972,28469,12891,28879,10338,144157,56294,353058,38302,41447,87532,110616,27065,168438,6557,1213,50804,144643,24817,2390,136531,38174,247513,16190,4059,122791,131994,137430,39506,57650,16305,5188,54309,106128,20628,88071,67394,395446,250285,66176,91254,1399,114196,43915,60230,44853,27206,106353,43013,18733,345105,226453,51202,16607,57106,117175,35492,10476,89598,127439,15187,39624,13688,61570,10615,31111,59370,6238,175252,32143,224492,41388,95408,34384,148238,78307,38959,9340,160091,61443,15737,11216,41244,170,38299,102443,113097,26382,14027,33707,3957,76300,66160,19431,18900,6952,1717,108656,82206,188021,257335,27295,43999,41210,31777,46956,57457,12657,11489,15697,48060,204748,53583,82422,284790,30503,137341,8120,19615,220311,15991,10217,63424,9808,67431,70976,98221,4491,15177,28535,144789,751,13230,2394,1504,33977,132104,30316,22230,931,97193,185240,24826,22687,174322,15307,22988,1390,188745,180325,29580,59068,74903,18994,29195,79,15436,7622,38462,11566,138710,44828,45774,37768,99236,68137,84083,19282,22698,17134,74807,126662,173497,46248,16938,119735,3212,28292,213652,49013,9975,32180,45660,86250,4801,68788,95490,77482,113751,11994,44624,94452,46839,128497,100316,5798,58588,73184,202987,65417,37790,88524,1606,43156,97964,105717,34947,11203,100060,37742,130074,93653,107799,94311,196106,41347,8035,10780,16390,27883,118236,167395,1979,25006,19375,31628,18916,144723,78502,114047,103107,86492,107686,5844,20934,206963,23556,22591,16562,146333,20167,10471,117434,33085,2863,9740,36669,41849,37271,22790,18209,28979,8231,12952,54408,21731,25130,45208,55748,138120,75826,414,29593,9925,292865,25999,683,123149,7036,92159,86055,61827,103680,23176,54918,58466,57578,13305,5709,86479,16697,31064,17660,200919,10770,49793,33423,32370,52047,16488,62555,6459,8426,83493,7763,59725,82812,18628,67760,79405,68557,9612,7673,28102,56517,69620,171797,32458,29541,15870,81109,32080,207644,71495,21202,11039,91036,61230,2810,130800,32260,4613,60590,37112,75214,33979,126402,155062,30642,63875,12810,194463,82799,47664,16725,36685,43367,61099,449,172150,102867,21691,301838,36745,7130,18671,57316,34852,38034,54182,35578,65900,99486,19771,3456,2658,16914,99866,28390,28109,8262,21147,34353,20006,4228,137085,1675,203023,283196,198286,214375,163329,290603,152574,40471,83506,30068,14730,23177,131539,34759,27668,32178,71896,104799,116305,85430,119262,42860,25160,8911,23428,49437,105322,6519,16203,6349,74711,1230,38045,8540,75165,44736,25909,51026,317034,4984,32281,91312,27060,44431,17817,45363,155937,239085,35697,59784,91993,29531,126740,213757,76560,167776,285273,24262,8237,65030,41160,74437,48804,118916,13159,37842,1031,75349,1478,11655,108777,23435,277425,101734,67469,70231,124711,43532,28514,65526,54956,1e3,21882,17728,25302,40952,52214,149632,1999,2111,3259,63362,89961,220561,39777,26335,9063,10572,12416,34551,34623,38604,24723,5947,15588,69927,66252,119177,69173,46629,28714,70715,212408,20521,406913,74380,11716,50659,50862,37009,88460,130101,7210,53853,538,65120,151950,55806,163748,52837,13153,21100,16674,64536,6091,138201,44837,58547,3723,163,2177,32288,85454,34033,8497,14282,25742,10535,10741,79559,117493,243787,49337,100718,79495,40139,42956,7551,55433,15421,31509,23034,45081,547,61176,53434,328001,8470,36263,30145,4519,74173,53935,11845,73774,60211,78025,3,4102,73782,109293,315332,48412,26683,13714,6865,20128,18490,104141,325,39470,171970,115860,15707,7268,73301,74336,31370,2368,111827,107757,136231,142844,97138,96638,84053,38691,23801,1588,10573,122098,77039,240,186135,146101,11996,18143,112963,46171,155836,348769,47795,121213,116266,132515,3344,144804,31286,99187,255838,129694,35894,48779,55235,148582,71967,65282,15174,13920,47080,6147,108242,157593,125025,7136,1286,28957,127956,28402,98813,20805,7532,109417,40610,5041,32958,15142,18408,108596,33543,50517,27748,80114,233434,91447,487,37094,100048,30541,43477,10639,89862,155868,37667,8726,60684,237903,73408,99589,12190,38739,97348,3914,13594,2680,149016,13907,30171,28343,23530,115225,61104,35821,147679,14337,4297,244282,24085,326976,56428,7851,21303,131620,71446,83253,68692,111870,5224,15813,38197,49026,45057,13660,3306,76345,40671,27905,91072,996,68527,62085,91351,122634,55109,168209,2024,27560,112707,17352,8306,167115,169921,166958,5031,46020,11844,67284,19130,76185,6920,32849,5450,14610,22451,21002,17392,31872,66682,84796,13709,40210,59898,12029,8719,53564,21462,91884,21647,88379,194428,12754,37797,132826,160016,22567,54383,53186,77611,31107,8339,4694,19185,90355,23597,17222,140675,28442,23668,55977,9128,61555,28774,155229,17658,9390,24379,69357,15752,127381,239631,62460,93181,55913,45133,140155,18676,25249,33164,29581,82837,67223,22362,29975,7317,52813,1943,29613,20012,207130,49617,49651,5636,15334,36313,29226,28084,95247,72072,19e3,224932,15811,114,32127,38097,37508,88507,37225,27359,91626,12193,69279,20608,11055,88156,92808,2152,57259,55275,72789,24475,104414,1708,9882,3818,48661,66897,1631,34806,227930,85815,87753,18321,250664,72733,25107,206797,50891,8082,196411,92596,96764,152823,65514,22819,387277,62176,51225,40329,15563,189,3659,73670,64357,51793,275136,33482,86653,74615,67058,11318,125720,15388,22388,8267,1730,102663,170910,40784,7144,85373,13040,7088,94309,583,44224,140424,77439,18496,164026,36578,4722,9151,5824,63365,26510,35199,40500,79277,32495,44614,35233,9566,203293,152144,7097,2330,183480,98629,13423,330887,44130,68600,30939,97829,31012,345465,56747,94879,4939,160027,149761,99423,46099,32251,15332,8761,96094,128555,5763,235318,222223,55729,30241,55420,201746,3987,81382,8259,49325,23287,7719,24633,251100,92311,18591,110533,64759,170260,393860,7175,21144,132887,3593,75346,101277,91109,16387,259187,11627,57459,173829,44694,55780,49797,89192,120443,62622,3904,14814,23887,1027,112258,64955,99800,11132,66353,36202,48624,18158,88481,96882,43059,11040,2455,7077,21651,181159,99126,100434,61388,68186,19161,110468,120052,8819,55324,41494,7014,37689,3618,87729,92615,207943,9823,128657,12587,15857,6379,67628,51216,71775,157617,63244,1503,3864,218754,110864,5769,21492,7243,1192,87921,85529,31512,18537,42698,35350,73510,84474,34301,8991,21013,35034,566,38832,19838,35586,37216,39413,55006,12178,59742,856,84563,6900,25632,17437,49786,30723,13847,70845,4044,7843,23944,235976,55530,48942,6518,20939,73769,192653,52936,95207,23895,132542,142982,22632,87452,48042,54018,178468,10728,26230,23559,363,81269,142012,5718,346258,31456,84333,246476,51018,66692,101804,120570,39962,30373,70593,2864,60541,19425,54209,104092,7201,31545,48018,25865,15442,46257,40443,8328,6451,111782,47527,97754,33046,470,245116,31095,39,91934,87208,73470,36708,36521,12801,70624,36272,8892,79768,12427,55454,103756,5908,52390,62962,22720,141138,94634,41689,128402,126390,6628,106394,35527,134394,82727,254651,194502,148064,89549,3202,28359,957,21954,27906,49840,142747,8307,24206,48978,1186,71728,133038,71474,91306,6333,110959,74600,70387,18983,62609,56057,22970,1147,135850,1321,28834,3578,59715,102227,32827,81415,99952,55636,257598,390,22702,35701,85872,402916,39216,189795,14929,19467,10112,144422,61514,5279,63421,134686,41436,8424,51925,10598,132295,124416,4604,194739,210929,57866,31829,51626,50007,9976,91878,61906,56168,81906,60918,61859,40017,23059,16887,40927,62064,12785,32893,32913,21782,93965,20169,44387,79084,38463,11457,93950,27127,157050,2697,337088,5116,54128,48255,33279,8821,27352,25515,124022,65710,28906,38557,33390,1722,104435,72215,38551,12094,30978,25113,6671,37355,175109,42862,98024,65406,221276,59624,118012,64637,78760,86697,21426,1639,40350,12584,67193,84144,31396,7863,143011,69629,63112,9454,28666,65798,46372,134721,6314,51402,30837,151922,2847,38676,38008,92823,136245,17540,5504,109295,205242,37606,5211,214892,1586,20670,208711,137743,19328,40652,16995,20023,14657,154919,34422,12996,13918,38221,47690,16398,2959,37680,89122,6721,198469,91876,172043,83898,101992,26084,94570,3635,76958,22853,76497,38266,176590,168403,44464,142840,79180,184594,1984,41806,83147,11985,6546,366068,59732,24533,271505,8736,39084,222992,93429,28962,58985,86665,8432,30028,14548,32439,54424,165029,55175,27458,69046,121277,46168,33732,20661,24581,135574,123110,37556,79260,72611,16957,12939,46162,58238,44907,72936,253758,41324,32518,96480,11949,124438,65280,43256,34107,53533,43531,37037,28366,45970,32741,173438,6121,194202,62969,26355,30314,58370,28455,1848,50519,82830,90393,21761,295490,10936,256940,133568,44050,20269,4089,27457,21610,219460,36743,14821,101388,52005,13124,30979,140816,167362,26054,18458,60789,34917,40447,26606,33422,9066,3452,83614,5761,20263,137238,25038,91310,101,52322,74548,42572,38084,214054,186568,31802,17665,30620,141936,37730,14420,4265,187218,49640,188208,51441,55388,96452,66659,40869,42039,60967,221027,19234,178581,29105,96050,9165,196118,157335,3738,40354,117436,2965,34136,59659,15570,50843,230035,31444,71260,43886,18316,5387,38500,168508,17406,32174,8828,103373,143806,90367,3560,18719,122310,16508,26719,2541,105429,6645,37998,73190,10591,235916,49737,87112,233941,53188,32193,79154,4544,52905,126477,7580,63501,57314,3216,31337,6541,103083,60846,49,9756,15481,1355,43840,14319,13743,27486,10222,73114,230718,418644,16706,6674,279748,23058,45273,295831,86306,2743,5535,88773,21829,35253,120938,31153,3169,16839,42847,8751,80974,33942,36867,35514,16485,26474,77775,56877,5391,48346,3882,108713,31403,27804,55248,26235,43821,136104,40118,175507,28034,203908,18732,1788,34030,106427,36958,54359,7251,44936,15356,69139,455,157915,22173,140291,50348,43275,82066,49621,54952,15216,36226,96695,66855,6936,1987,8227,196087,4631,68827,99004,47541,110265,17953,147605,110242,58520,31312,38724,329975,642,3155,34497,75937,6207,73843,6120,17249,51429,117746,3218,910,68961,319671,14938,29555,34700,1649,66673,72268,9655,76800,153087,6941,210168,27130,35398,1780,73242,3135,56689,19556,165307,8765,35967,121458,13333,70453,17350,117253,22265,13340,44265,39869,441,3742,135025,23581,33309,16543,17731,13291,157637,283005,21408,101360,63887,52312,83873,5338,233779,23759,186949,34531,177320,38069,156465,91004,19353,59852,68160,14891,1338,1072,29823,1950,28901,81407,313445,73038,84807,162348,240257,37162,138934,16111,58013,41253,102951,16457,96056,19541,56402,67217,41638,94381,89674,29481,37456,80815,151579,13937,13683,132537,19699,134545,67020,29816,222341,141235,427578,48868,129557,233342,23077,87871,16213,18728,16184,9469,37913,19680,2798,171356,178328,13216,50049,72690,71904,124644,55455,7504,29052,41036,266546,19899,30391,188755,8659,59469,16,104298,112943,53865,76203,138226,68857,139953,14125,107625,119795,173133,4398,50273,48808,54390,16466,122086,31835,67035,50971,48859,7508,46427,66477,73021,84615,39985,83076,46779,201569,53336,36443,60865,168164,143810,51393,25548,169307,32896,24485,38424,21837,29087,275813,51674,6714,64883,46169,187369,55186,76192,12852,12018,62134,31067,118303,16542,12125,10579,4928,26291,43854,7091,10946,253716,109062,39283,17261,113012,258512,47764,125126,32646,55892,80279,201623,149872,3192,385,1208,48750,5376,58738,22335,5427,82416,47811,32435,143086,38930,94128,59975,156037,37977,38224,62485,7698,50405,71027,16462,21559,136153,34131,107506,162069,63703,3101,215029,40407,4178,3774,9187,80019,17880,97926,67579,2600,18405,8351,47924,86638,70820,92206,86453,29610,42241,119200,3198,15466,67813,57863,35454,4779,99518,4649,104641,144269,33730,38073,65864,6838,109456,193298,154007,5623,45741,30846,182578,25573,157224,1543,58575,138703,146140,44971,49356,18275,59064,20300,13122,11848,24453,11973,9797,86843,2919,25530,49210,1130,161220,76788,75373,85604,34926,36014,17777,17255,51533,11676,92226,51845,119859,21525,5936,18507,28050,1140,31418,14857,34207,47859,10750,36382,32079,106909,59426,87757,38393,110042,15965,97104,33757,35344,97993,53979,33651,45407,41884,82515,173089,7177,58371,35365,47543,51927,35587,10670,23544,29306,84233,39976,76076,62097,9007,8668,28119,78281,120790,19835,143020,54968,18670,64959,20649,34469,42570,33001,136570,87796,120044,1106,58700,63951,127623,12805,83057,40212,31773,49850,7361,54336,347524,101314,23751,19569,48791,29174,49369,20467,7465,75842,38281,623,112457,60210,28849,51003,94720,6426,90047,85560,43761,3579,85105,34607,90410,118528,7224,42907,111163,18168,6960,161135,191298,5247,100584,127552,171568,20121,91173,12636,54615,20199,63730,98105,2396,40387,14438,125012,4765,33235,12865,45299,37728,82098,77872,114037,59253,19675,24838,398016,102561,11446,17069,57508,178277,65836,99941,26114,2585,271882,136866,50126,11027,155648,118367,14585,8910,123015,335383,40434,41016,53021,14439,87098,176860,201543,121888,2358,9286,5739,22666,54270,37884,169381,33984,93859,16124,89364,72207,51639,76366,99029,65812,2198,12147,174891,194289,6986,30252,88822,21284,11445,288337,160821,33034,100869,43852,25761,52882,1144,103809,1924,84458,86079,43411,13542,139276,18141,34978,41298,7276,26481,173800,33210,17951,142652,33616,33677,2210,19941,98568,2486,192414,80136,12058,235883,50963,249638,29572,27221,47034,6124,72107,63346,97620,158513,299699,40388,23235,37176,224244,198386,121323,67992,23827,63170,17838,106622,158590,26807,5345,23489,91891,55474,74834,37981,13058,5977,72552,34706,26828,145172,19904,21367,34043,960,77092,91381,4733,47446,7680,41697,5170,16960,14741,46101,13656,473,51842,37433,11103,11551,121951,13191,97536,165932,50397,51628,129028,9069,44885,6590,59195,47045,32940,225472,90345,21833,13303,29407,96615,141951,5198,6028,18395,7181,3861,14966,156358,167182,36529,55253,25942,173153,30959,27261,50691,150176,162201,38467,48462,80602,42163,118482,168,108756,26011,17166,54149,456538,22512,91374,13816,90358,131615,18132,226707,1824,28139,26860,42253,93877,77351,65575,8980,80574,22020,27948,40422,91324,76376,13528,39281,91685,82215,122541,144066,1983,193851,17283,26320,2739,194978,4790,26845,42627,61300,65815,174612,55133,4200,191130,79771,158321,52280,166796,221620,62461,11278,4067,88152,83409,31717,121367,13522,47325,37945,10406,174348,249321,154101,64912,29938,51775,17220,15776,166138,78890,84425,54121,42861,16368,24572,291647,10197,32073,22651,11677,97509,26952,35787,18424,41910,71614,94977,72318,41594,70024,275419,37702,60199,7335,39107,61315,18271,18394,33768,87884,104277,123724,7277,56288,71981,189803,49320,3352,6798,14240,8954,69220,94433,57372,28620,68863,193727,85575,42309,41667,67689,42081,22543,44824,12719,28540,114236,101553,27638,27296,4300,5353,4663,19379,94098,3758,95888,95144,80344,87320,28447,259518,12718,71391,152731,37063,24132,31911,104896,15672,103782,1521,4945,72541,23717,122632,15619,87175,206120,29428,189780,61416,28350,44457,972,1175,47233,198738,95789,41907,21953,97034,59341,22864,53713,16873,32971,20693,20954,31336,21477,16169,38370,16412,9019,3841,24599,21938,17085,6484,81198,76413,5849,72514,12320,65247,276175,37234,59796,52642,16312,57349,198507,94148,46134,18958,125552,1747,18725,151873,14901,5490,68287,29470,3689,64794,40814,26018,25692,54450,2703,88278,124886,173087,174e3,24159,179477,24276,46004,201876,209202,445,52876,31948,30206,157610,39180,18439,44124,50469,5774,96278,222758,200216,50290,45486,20435,46986,46276,140133,142326,15569,13363,47522,92583,2182,7135,16853,22998,30272,4952,63263,35623,39096,53789,44864,20053,110392,124213,4630,16087,28221,127787,25839,77481,44693,13464,113146,6983,27069,55717,50102,4760,7107,26186,66507,59145,36032,104182,71328,29425,64317,50781,47465,94298,69706,74899,22754,120756,25108,93077,56834,73286,39928,16218,41699,176763,7555,70819,50083,26895,23315,26014,16773,123079,41712,5719,31516,90427,158540,85051,183128,40864,27505,55392,9058,45224,96857,30901,136622,96557,56304,120061,11501,151448,5773,89743,7769,86069,2935,18471,41628,10114,33660,110170,49479,26745,92846,33221,26731,18795,87076,8550,2100,29972,120289,3077,72490,33784,2630,208722,50861,63483,79029,6419,39467,14302,45286,64207,9686,67513,44170,1050,77246,59266,17055,53801,7150,11111,42432,4278,94579,362117,36175,42902,41933,39002,98489,22913,74161,84773,57036,17556,162288,74485,178760,93867,73635,128860,50362,261,67455,80001,46080,35662,4368,25247,19230,74393,22588,1822,27682,235324,13798,85998,13194,235067,23514,71669,147632,23191,134748,214683,105101,1518,25489,247114,7380,54842,26922,3971,26361,20844,68642,170517,77339,123255,8963,77818,150998,48466,36806,2732,23261,11741,236162,18243,126216,28690,50546,16385,92760,197383,246558,201295,88255,67588,71687,176076,172653,169058,33906,63747,24835,157621,43338,30050,46152,132741,2770,51371,94835,6614,15112,11749,56936,1250,19027,399017,58036,100215,23388,55815,308768,124152,94803,9521,64186,8971,28,30427,62163,7616,103838,35079,29203,131235,7743,17389,10882,37420,61460,228512,85363,41581,131077,62822,119647,10130,54445,26925,19968,29016,24446,74028,24176,61448,67185,9254,8563,119129,9771,99184,37716,39514,10532,221512,258753,218630,55980,23394,32141,61924,66749,32411,3741,36475,26678,77010,44946,91203,128749,116953,20476,49625,53116,13735,102335,29376,51946,83407,67892,59212,34685,21083,1546,112982,32972,74397,1078,190545,16082,86140,58591,89611,101531,10061,105104,76319,20035,17551,52611,169061,190842,100780,23907,90413,115619,9675,34710,193435,49443,129734,11183,258877,16318,136182,126808,44635,27304,192375,2599,125648,47051,12091,23814,721,58800,40137,66726,97930,60877,74487,7942,54326,9841,41428,13762,8211,85383,6950,99177,79806,201786,296464,124087,13144,29741,41721,47634,55088,254286,106408,17041,99064,12942,64086,45233,14005,2612,55827,255,7984,13980,38574,12776,46654,73499,249951,2101,26676,25996,132326,116415,119062,50449,31033,23038,11589,179252,20007,14860,129270,21143,17796,144715,60106,70758,69842,34674,282133,44014,16774,57268,38528,24053,46373,201667,28327,471023,51889,102667,21193,114909,84132,69317,96723,67969,16134,68145,15058,28765,32035,2524,101089,98664,25045,76571,14957,86040,118506,262428,154764,81573,39681,283900,73287,127825,544,80448,52347,38512,175971,15180,45467,33086,46552,48894,81107,43213,36672,54025,76703,8053,7608,13299,56619,20752,238099,54164,105133,1444,32942,953,37564,8e3,66316,119463,106817,404,13667,149108,128597,31267,10269,49836,106150,1484,52330,76965,160486,171648,38456,31263,22424,37738,66245,67467,143369,60471,75610,20895,115528,86070,60854,40796,49347,18989,15030,11371,37578,15779,79867,10187,86462,46402,155626,93200,40229,7090,57547,108053,99598,11088,47505,41218,206017,2173,20988,30219,22919,80563,57566,42369,93141,41675,2407,182519,120495,27154,16702,29456,14349,7958,16688,117177,140375,42467,261919,74916,153569,10836,34742,49526,7621,105997,12212,2270,392377,7755,17959,25086,232152,138791,33847,13860,35316,5811,1344,71259,50452,207539,92635,50359,5821,33674,30255,2086,2587,96264,17543,42,6029,9580,43007,139248,82831,12917,29607,25786,51467,42137,85161,100698,31561,88989,121990,278500,3602,109344,37982,15279,116442,28936,30880,87894,58079,128661,126731,67392,28051,146885,4861,16216,97344,42827,147561,153948,22684,21335,47685,1853,43349,15185,59642,10229,25520,187921,108972,5579,98037,24945,6697,19193,63734,137934,75056,89740,19767,224268,56138,63643,151661,39313,70618,84031,89723,84074,13703,85626,35460,8867,64845,3439,57906,99776,63968,49270,81130,34356,16210,23547,36446,34090,140028,72439,2221,22163,57058,363492,113754,18913,95451,48663,54464,54037,176097,68425,3023,34906,29482,117389,341780,80431,58330,16753,92616,60907,94846,147486,4498,48646,7773,46801,7778,18946,464978,47558,33223,177444,7328,15626,63337,94700,11743,9351,255024,39098,16447,42647,96230,39769,58840,10068,63439,35800,65843,58823,413844,9156,51258,7434,61791,85018,6872,3692,28096,7121,33024,6009,75532,31997,192535,9661,3304,9547,14753,31987,25314,55689,15896,20430,39472,31340,99744,25398,115569,54883,28719,205423,23071,57855,64638,149867,25671,82403,37616,20668,39989,77996,74948,140555,175248,64810,36515,46595,4958,248773,24045,28728,136673,168704,20804,114833,100325,27135,21205,96151,153134,45992,7093,13992,76047,1980,19432,145001,75159,87462,17710,1013,45556,34297,144882,20648,26061,11319,129567,108555,18872,464580,33386,22717,65948,167189,5603,135042,79542,8801,202632,18114,91882,5973,5239,67315,4431,60916,47819,71693,32597,32606,18183,45072,80329,76385,24749,51305,40314,156514,14693,130345,13168,66214,18029,12858,34801,27628,14544,10823,40522,40185,33739,148694,23548,9923,61012,28859,17933,19442,34364,99849,164107,141167,30629,21054,6744,36491,8096,42474,41706,155060,30650,10600,163442,1143,96655,61390,52359,7559,51568,64256,203854,4467,22453,14504,436398,7878,6980,8293,63610,293747,16167,35763,19627,147603,15419,18032,110744,51346,33681,54571,40472,48615,39073,21604,13754,173027,92560,11083,47299,63062,11813,52007,29883,9734,139722,15953,1550,20651,13616,49306,16113,90089,92326,7584,30712,72424,164858,6831,152871,55746,197721,34167,196442,6022,112107,55215,7538,123381,4920,43539,77165,8939,50392,34192,20225,79762,22505,58667,40770,29788,97180,82835,4568,8579,13273,363569,35898,49983,436,36598,3237,131691,62418,35591,8101,4073,379438,65218,76072,33887,2968,27573,212619,288680,68278,72851,150504,217896,6913,121339,22017,35340,51072,43616,75043,31437,10833,81487,4364,22968,41454,106687,85446,19863,109625,149241,524,141850,214404,54376,657,237023,9401,108137,53800,32474,49712,53334,126876,27337,45552,177696,8269,15036,12097,42240,2328,125374,119295,99715,2500,19624,39441,27220,102691,60957,94543,39101,18566,67362,13975,78230,25017,34017,239007,90027,39351,41681,35354,43822,1043,916,58587,141983,94818,38799,75459,41114,67432,16195,36606,59568,22272,126769,31424,68659,12287,134302,257977,5756,207285,95637,47248,117689,19583,77451,22373,12200,54993,117118,34244,29386,34562,53819,71267,64172,77665,49368,7716,59301,25749,45426,194789,17297,2650,1766,32501,45198,20403,20984,6600,14171,94604,19037,5402,29896,9938,59935,109708,88081,145182,44844,39167,352626,164173,35374,45982,6122,154,73419,220487,53834,53601,17992,8609,229321,5610,68098,66815,71012,95069,140968,27396,8957,134489,24656,86659,56598,134852,17316,123838,255436,6613,41610,138033,81452,32023,32396,123687,63398,8693,29712,30407,19296,121188,3551,36099,20032,111948,56624,16547,27453,35916,15378,52039,56849,13489,22214,73177,53097,277349,2157,14029,187886,10260,141743,246460,91880,50869,3788,49486,133566,54950,33120,129337,53768,18333,9525,26902,312251,10297,9020,70759,16647,112432,59260,84609,9818,82766,73569,468,46001,75780,55028,52106,11498,43645,108069,17150,17753,29417,16705,31799,9606,289,122254,115975,8620,6133,255357,56908,14456,133464,43554,79224,11247,29630,160,12756,25464,65960,350428,62521,321796,100359,67358,35169,46172,113128,48988,88868,31094,33266,6847,60887,98188,49659,69117,92977,220228,13947,80181,35103,62170,97351,13475,2440,199768,19498,36597,46971,25234,67806,62881,84717,73648,181966,10488,94149,21550,26655,63436,48375,14405,165650,9621,24439,28043,42735,4490,29963,56674,45373,1934,262446,50855,67098,26898,5261,52696,40644,33900,9440,180286,87162,22940,19704,26936,69769,10254,101759,27406,12243,48e3,73926,113215,54935,5726,192787,4312,106216,9366,11550,52949,23457,212271,277152,133895,108374,6191,96477,29980,218916,58024,54696,40853,91124,65894,91170,65908,252552,6793,29212,15389,44516,122515,52617,35058,9017,103536,39510,49136,19242,130652,662077,74699,47024,31422,8517,73351,24399,13867,128360,4810,4434,61779,111983,61036,17798,110240,59722,102960,39688,10001,23803,23039,176498,56659,44814,134295,17188,77577,74466,226175,102472,154333,63900,111747,18062,41171,79669,32773,408933,42562,28931,30907,107388,43487,2946,240310,23938,24354,319,184983,7927,6488,1422,10790,68809,68209,64775,4361,202,17123,59634,51200,44391,18188,17843,2619,74278,3230,9540,47187,21702,36274,56894,43907,16310,34790,16866,6150,5561,13587,107545,108873,126867,86986,28640,33427,19017,5762,80637,17430,46903,2047,131055,25958,13558,5444,47152,13900,44563,122857,45348,70863,39593,54332,38068,33637,318,40310,143467,18502,24520,11377,62013,28942,27246,28269,83545,17999,59015,90707,30065,15161,34720,1263,37008,2012,6060,98575,92933,5721,299,199555,24578,29223,2985,743,115825,109523,136657,47454,26378,53586,3733,174945,93340,244456,5693,37386,28782,89767,27545,23573,18798,136425,34320,84778,20041,48453,38215,7477,71958,40621,8773,5874,187927,105965,51100,43533,18083,8443,10180,43597,2003,183999,69689,12216,129696,146188,62389,34044,68410,12765,43273,26949,266807,3345,34477,79197,5688,47539,213110,21634,22257,50092,32222,42346,39530,63668,98,134978,74022,5152,59088,174145,37220,9934,9545,118937,5724,87240,19875,15784,40143,23263,87513,181654,285152,37881,263241,4966,43934,10433,186657,6470,74416,225854,25908,142677,246262,32280,6192,75890,45546,143264,135305,29742,47013,77787,11732,126658,8763,37950,21806,57557,113464,89465,108995,164574,23894,22996,23169,15369,23117,17642,130607,40503,36239,280990,44666,9981,40427,147487,26869,168452,32886,32991,46798,240839,15111,70502,65697,88548,44145,28701,48767,31139,206777,35659,181164,166262,14554,171445,31786,66523,76607,17956,6507,31279,90476,116611,167918,6560,1243,115324,80128,41867,55897,187323,37069,32596,189444,145931,13390,105530,65709,26805,6999,55714,41300,22915,68951,22138,21120,22264,10058,19945,33635,56123,99085,10032,5818,6016,46649,57476,35264,94413,112522,262288,93686,83038,14341,23204,28807,66084,77987,6101,126673,7133,38126,5923,122091,170240,97772,46874,215746,43948,41622,3272,55596,8332,146411,251315,13533,8561,81521,115449,48616,175175,2063,186556,3036,134537,75772,29728,82360,22973,186559,86348,89100,38388,82297,45610,2613,87082,9986,177812,57884,23591,47485,42543,33582,44713,74439,257444,252451,31825,35631,38540,33066,5147,13973,4343,51830,70378,22827,26448,95560,36896,241741,48067,203953,298860,61620,20450,3220,67272,6586,107662,100160,108684,6929,57226,4762,7457,1320,40404,77204,99309,62750,208653,59977,44e3,74315,34332,5819,172217,64904,114077,18147,84012,1791,98456,90930,21446,116669,103938,7422,85140,59713,5768,326211,16239,75411,13229,29398,10758,236107,1539,112472,95979,152154,151294,306,21196,38146,10700,6891,84282,109646,56492,40539,6589,119491,51354,30685,140209,136906,29622,73617,49553,70525,51671,166869,139616,74395,37439,49595,45678,11959,33211,86560,52434,9282,62690,112155,130810,5243,108261,99970,265613,72551,80049,6391,33365,90721,66737,69872,87011,1860,9032,112544,60905,37371,89015,140351,19076,850,373531,2802,36725,218795,72062,28990,16550,24614,7815,6187,26336,33373,32162,42791,73555,32062,23386,10244,56392,49442,27076,136262,12412,14883,1134,33675,97153,199281,15608,100152,74072,47942,254301,36451,16026,10687,65067,56708,254030,30290,50490,13864,57941,259331,35588,23485,43486,24869,21620,92971,22072,88645,1048,182050,13343,32452,14825,19509,3325,216938,45740,99716,189082,53740,78245,25609,24311,176777,47340,308354,40669,66085,14102,125339,9225,128709,97207,1271,200933,78439,113451,88975,18324,46521,11819,18570,141756,72512,170020,52754,63550,118515,103073,93330,32736,50499,14722,31600,68452,398867,29316,172786,18417,104924,2606,5670,84818,16288,67106,59580,82929,607401,291,85829,359,15897,35830,50696,65630,52672,22115,356968,29895,40837,231192,34024,38957,26722,406,23335,124952,72068,68804,13268,147101,164740,276569,162596,66943,11569,26654,66358,4777,23229,102127,5848,978,2921,59666,5371,28212,90108,42938,39320,2499,4271,108792,33510,125072,71653,65239,38250,66357,38577,13964,86251,35708,50755,36010,29448,12209,3844,38222,206337,100876,67827,137088,14167,252225,84163,195270,1306,5703,54198,779,46802,22028,51124,86759,70560,113164,35685,162145,45471,34561,422,2611,6464,47486,19223,38246,9191,18331,89942,243642,212364,15893,17518,22617,6409,30046,126182,59716,36560,104428,18846,26592,19458,50793,147333,30826,1388,27647,10922,14495,33545,19269,135828,39727,41601,46931,233379,49169,131130,182112,16276,82381,118209,142445,128310,19672,28740,82907,33436,3118,102206,28723,24819,41937,38854,5157,3881,111491,1142,9776,421673,152241,29309,14961,87854,6054,15424,3796,82656,54996,2108,55367,239450,154525,9643,118103,106041,64601,68549,48707,30266,25772,18740,9462,229669,91798,112152,191327,14493,72828,8175,66636,236474,25817,87351,129027,76653,20422,22983,71240,27846,44661,12399,46158,77704,53101,35032,11072,17300,109294,33638,24408,1895,11241,760,17584,82479,125877,63150,141075,34259,23274,81698,15732,43577,48340,91584,14688,16379,24481,150280,96420,262050,48635,43727,61819,56268,72003,88178,17281,79912,13218,122519,125295,166396,11811,2171,118930,67746,17636,178278,174656,95661,173039,83845,79689,17473,98555,127696,203415,54730,22925,232239,9309,12136,175026,20740,180188,10747,39816,314017,266131,10040,175732,112550,220651,31974,37393,888,23008,86799,4303,64905,148467,75337,251,3284,370102,50264,9835,5438,23655,4481,29851,329,12855,7162,64931,78141,12804,42372,296771,83547,18624,34874,86271,3360,48665,77735,88767,11463,63527,28889,22258,29140,194315,113924,25499,6406,31334,1845,4802,49184,43455,35469,127594,92970,61038,115005,38840,87761,106838,8811,20572,55637,11162,96721,132425,108925,2948,125457,36356,3502,75270,27622,127192,2561,123095,49394,61155,16897,110064,9699,89448,53356,19628,220310,21622,83036,9885,112214,6087,26713,17901,161912,91492,3440,68594,9266,92238,8087,6866,150194,72175,80701,13459,31836,43243,239700,95846,44749,50647,21945,230538,120612,132371,244604,5193,105637,34661,41341,68775,85393,1874,8771,33718,49672,77403,595452,99507,6490,58895,128742,7704,39239,73217,43816,62824,37804,199976,22361,80005,87514,94832,14089,4574,139975,59142,75523,100268,43906,53442,15152,2547,186002,17011,19513,204282,3343,60568,128318,119250,4298,51871,41336,71759,21921,45074,98169,145889,99427,11350,1237,5520,28799,7803,53702,21026,136352,38293,128690,12158,90132,44600,10184,26957,39459,126025,78904,82999,59373,39301,150198,120529,153042,20177,50089,14764,271571,30530,123161,38975,101562,22941,5648,124654,109243,69817,71675,49162,106884,21241,107795,30258,16572,188262,141456,7688,60718,8271,11044,32440,104608,103419,236109,93156,43293,128929,42107,67180,25201,115254,185488,130954,72813,167547,20537,39969,38432,22582,184022,1139,27199,5655,17767,97412,122606,209377,27070,35871,326617,188954,42680,73512,80911,22629,3011,95021,315242,157737,383,41821,41808,19335,27950,15674,25677,110950,35375,76835,59108,57370,35262,16569,160415,37706,78086,32041,49691,137143,9782,172080,50148,77917,6323,10110,69172,17711,21795,59511,76184,135114,31046,132319,59105,157578,20549,80778,57649,158421,65143,4575,72235,21899,10797,92745,34035,106079,80159,4508,78304,25350,75457,46458,32937,25623,47,8531,104751,84953,8138,36508,187199,66310,115274,13253,32461,38536,1916,42007,187160,35055,26325,84394,35963,94216,45590,97782],ux=15;class qNt{log;peerRouting;routingTable;refreshInterval;refreshQueryTimeout;commonPrefixLengthRefreshedAt;refreshTimeoutId;constructor(e,r){const{peerRouting:n,routingTable:i,refreshInterval:s,refreshQueryTimeout:a,logPrefix:o}=r;this.log=e.logger.forComponent(`${o}:routing-table:refresh`),this.peerRouting=n,this.routingTable=i,this.refreshInterval=s??YOt,this.refreshQueryTimeout=a??XOt,this.commonPrefixLengthRefreshedAt=[],this.refreshTable=this.refreshTable.bind(this)}async afterStart(){this.log(`refreshing routing table every ${this.refreshInterval}ms`),this.refreshTable(!0)}async stop(){this.refreshTimeoutId!=null&&clearTimeout(this.refreshTimeoutId)}refreshTable(e=!1){this.log("refreshing routing table");const r=this._maxCommonPrefix(),n=this._getTrackedCommonPrefixLengthsForRefresh(r);this.log(`max common prefix length ${r}`),this.log(`tracked CPLs [ ${n.map(i=>i.toISOString()).join(", ")} ]`),Promise.all(n.map(async(i,s)=>{try{if(await this._refreshCommonPrefixLength(s,i,e),this._numPeersForCpl(r)===0){const a=Math.min(2*(s+1),n.length-1);for(let o=s+1;o<a+1;o++)try{await this._refreshCommonPrefixLength(o,i,e)}catch(c){this.log.error(c)}}}catch(a){this.log.error(a)}})).catch(i=>{this.log.error(i)}).then(()=>{this.refreshTimeoutId=setTimeout(this.refreshTable,this.refreshInterval),this.refreshTimeoutId.unref!=null&&this.refreshTimeoutId.unref()}).catch(i=>{this.log.error(i)})}async _refreshCommonPrefixLength(e,r,n){if(!n&&r.getTime()>Date.now()-this.refreshInterval){this.log("not running refresh for cpl %s as time since last refresh not above interval",e);return}const i=await this._generateRandomPeerId(e);this.log("starting refreshing cpl %s with key %p (routing table size was %s)",e,i,this.routingTable.size);const s=AbortSignal.timeout(this.refreshQueryTimeout);Zt(1/0,s);const a=await T4e(this.peerRouting.getClosestPeers(i.toBytes(),{signal:s}));this.log(`found ${a} peers that were close to imaginary peer %p`,i),this.log("finished refreshing cpl %s with key %p (routing table size is now %s)",e,i,this.routingTable.size)}_getTrackedCommonPrefixLengthsForRefresh(e){e>ux&&(e=ux);const r=[];for(let n=0;n<=e;n++)r[n]=this.commonPrefixLengthRefreshedAt[n]??new Date;return r}async _generateRandomPeerId(e){if(this.routingTable.kb==null)throw new Error("Routing table not started");const r=Xu(2),n=(r[1]<<8)+r[0],i=await this._makePeerId(this.routingTable.kb.localPeer.kadId,n,e);return ul(i)}async _makePeerId(e,r,n){if(n>ux)throw new Error(`Cannot generate peer ID for common prefix length greater than ${ux}`);const a=new DataView(e.buffer,e.byteOffset,e.byteLength).getUint16(0,!1)^32768>>n,o=65535<<16-(n+1),c=a&o|r&~o,l=zNt[c],u=new ArrayBuffer(34),f=new DataView(u,0,u.byteLength);return f.setUint8(0,wn.code),f.setUint8(1,32),f.setUint32(2,l,!1),new Uint8Array(f.buffer,f.byteOffset,f.byteLength)}_maxCommonPrefix(){let e=0;for(const r of this._prefixLengths())r>e&&(e=r);return e}_numPeersForCpl(e){let r=0;for(const n of this._prefixLengths())n===e&&r++;return r}*_prefixLengths(){if(this.routingTable.kb!=null)for(const{kadId:e}of this.routingTable.kb.toIterable()){const r=Pv(this.routingTable.kb.localPeer.kadId,e);let n=0;for(const i of r)if(i===0)n++;else break;yield n}}}class HNt{providers;log;constructor(e,r){this.log=e.logger.forComponent(`${r.logPrefix}:rpc:handlers:add-provider`),this.providers=r.providers}async handle(e,r){if(this.log("start"),r.key==null||r.key.length===0)throw new ye("Missing key","ERR_MISSING_KEY");let n;try{n=Dt.decode(r.key)}catch{throw new ye("Invalid CID","ERR_INVALID_CID")}(r.providers==null||r.providers.length===0)&&this.log.error("no providers found in message"),await Promise.all(r.providers.map(async i=>{if(!e.equals(i.id)){this.log("invalid provider peer %p from %p",i.id,e);return}if(i.multiaddrs.length<1){this.log("no valid addresses for provider %p. Ignore",e);return}this.log("received provider %p for %s (addrs %s)",e,n,i.multiaddrs.map(s=>Wr(s).toString())),await this.providers.addProvider(n,ul(i.id))}))}}class WNt{peerRouting;peerInfoMapper;peerId;addressManager;log;constructor(e,r){const{peerRouting:n,logPrefix:i}=r;this.log=e.logger.forComponent(`${i}:rpc:handlers:find-node`),this.peerId=e.peerId,this.addressManager=e.addressManager,this.peerRouting=n,this.peerInfoMapper=r.peerInfoMapper}async handle(e,r){if(this.log("incoming request from %p for peers closer to %b",e,r.key),r.key==null)throw new ye("Invalid FIND_NODE message received - key was missing","ERR_INVALID_MESSAGE");const n=await this.peerRouting.getCloserPeersOffline(r.key,e);Kr(this.peerId.toBytes(),r.key)&&n.push({id:this.peerId,multiaddrs:this.addressManager.getAddresses().map(s=>s.decapsulateCode(Cr("p2p").code))});const i={type:Ri.FIND_NODE,clusterLevel:r.clusterLevel,closer:n.map(this.peerInfoMapper).filter(({multiaddrs:s})=>s.length).map(s=>({id:s.id.toBytes(),multiaddrs:s.multiaddrs.map(a=>a.bytes)})),providers:[]};return i.closer.length===0&&this.log("could not find any peers closer to %b than %p",r.key,e),i}}class KNt{peerRouting;providers;peerStore;peerInfoMapper;log;constructor(e,r){const{peerRouting:n,providers:i,logPrefix:s}=r;this.log=e.logger.forComponent(`${s}:rpc:handlers:get-providers`),this.peerStore=e.peerStore,this.peerRouting=n,this.providers=i,this.peerInfoMapper=r.peerInfoMapper}async handle(e,r){if(r.key==null)throw new ye("Invalid GET_PROVIDERS message received - key was missing","ERR_INVALID_MESSAGE");let n;try{n=Dt.decode(r.key)}catch{throw new ye("Invalid CID","ERR_INVALID_CID")}this.log("%p asking for providers for %s",e,n);const[i,s]=await Promise.all([this.providers.getProviders(n),this.peerRouting.getCloserPeersOffline(r.key,e)]),a=await this._getPeers(i),o=await this._getPeers(s.map(({id:l})=>l)),c={type:Ri.GET_PROVIDERS,key:r.key,clusterLevel:r.clusterLevel,closer:o.map(this.peerInfoMapper).filter(({multiaddrs:l})=>l.length).map(l=>({id:l.id.toBytes(),multiaddrs:l.multiaddrs.map(u=>u.bytes)})),providers:a.map(this.peerInfoMapper).filter(({multiaddrs:l})=>l.length).map(l=>({id:l.id.toBytes(),multiaddrs:l.multiaddrs.map(u=>u.bytes)}))};return this.log("got %s providers %s closerPeers",c.providers.length,c.closer.length),c}async _getAddresses(e){return[]}async _getPeers(e){const r=[];for(const n of e)try{const i=await this.peerStore.get(n),s=this.peerInfoMapper({id:n,multiaddrs:i.addresses.map(({multiaddr:a})=>a)});s.multiaddrs.length>0&&r.push(s)}catch(i){if(i.code!=="ERR_NOT_FOUND")throw i}return r}}class GNt{peerStore;datastore;peerRouting;log;constructor(e,r){this.log=e.logger.forComponent(`${r.logPrefix}:rpc:handlers:get-value`),this.peerStore=e.peerStore,this.datastore=e.datastore,this.peerRouting=r.peerRouting}async handle(e,r){const n=r.key;if(this.log("%p asked for key %b",e,n),n==null||n.length===0)throw new ye("Invalid key","ERR_INVALID_KEY");const i={type:Ri.GET_VALUE,key:n,clusterLevel:r.clusterLevel,closer:[],providers:[]};if(cNt(n)){this.log("is public key");const o=lNt(n);let c;try{const l=await this.peerStore.get(o);if(l.id.publicKey==null)throw new ye("No public key found in key book","ERR_NOT_FOUND");c=l.id.publicKey}catch(l){if(l.code!=="ERR_NOT_FOUND")throw l}if(c!=null)return this.log("returning found public key"),i.record=new Hl(n,c,new Date).serialize(),i}const[s,a]=await Promise.all([this._checkLocalDatastore(n),this.peerRouting.getCloserPeersOffline(n,e)]);return s!=null&&(this.log("had record for %b in local datastore",n),i.record=s.serialize()),a.length>0&&(this.log("had %s closer peers in routing table",a.length),i.closer=a.map(o=>({id:o.id.toBytes(),multiaddrs:o.multiaddrs.map(c=>c.bytes)}))),i}async _checkLocalDatastore(e){this.log("checkLocalDatastore looking for %b",e);const r=z3(e);let n;try{n=await this.datastore.get(r)}catch(s){if(s.code==="ERR_NOT_FOUND")return;throw s}const i=Hl.deserialize(n);if(i==null)throw new ye("Invalid record","ERR_INVALID_RECORD");if(i.timeReceived==null||Date.now()-i.timeReceived.getTime()>UOt){await this.datastore.delete(r);return}return i}}class YNt{log;constructor(e,r){this.log=e.logger.forComponent(`${r.logPrefix}:rpc:handlers:ping`)}async handle(e,r){return this.log("ping from %p",e),r}}class XNt{components;validators;log;constructor(e,r){const{validators:n}=r;this.components=e,this.log=e.logger.forComponent(`${r.logPrefix}:rpc:handlers:put-value`),this.validators=n}async handle(e,r){const n=r.key;if(this.log("%p asked us to store value for key %b",e,n),r.record==null){const i=`Empty record from: ${e.toString()}`;throw this.log.error(i),new ye(i,"ERR_EMPTY_RECORD")}try{const i=Hl.deserialize(r.record);await Fz(this.validators,i),i.timeReceived=new Date;const s=z3(i.key);await this.components.datastore.put(s,i.serialize().subarray()),this.log("put record for %b into datastore under key %k",n,s)}catch(i){this.log("did not put record for key %b into datastore %o",n,i)}return r}}let ZNt=class{handlers;routingTable;log;constructor(e,r){const{providers:n,peerRouting:i,validators:s,logPrefix:a,peerInfoMapper:o}=r;this.log=e.logger.forComponent(`${a}:rpc`),this.routingTable=r.routingTable,this.handlers={[Ri.GET_VALUE.toString()]:new GNt(e,{peerRouting:i,logPrefix:a}),[Ri.PUT_VALUE.toString()]:new XNt(e,{validators:s,logPrefix:a}),[Ri.FIND_NODE.toString()]:new WNt(e,{peerRouting:i,logPrefix:a,peerInfoMapper:o}),[Ri.ADD_PROVIDER.toString()]:new HNt(e,{providers:n,logPrefix:a}),[Ri.GET_PROVIDERS.toString()]:new KNt(e,{peerRouting:i,providers:n,logPrefix:a,peerInfoMapper:o}),[Ri.PING.toString()]:new YNt(e,{logPrefix:a})}}async handleMessage(e,r){try{await this.routingTable.add(e)}catch(i){this.log.error("Failed to update the kbucket store",i)}const n=this.handlers[r.type];if(n==null){this.log.error(`no handler found for message type: ${r.type}`);return}return n.handle(e,r)}onIncomingStream(e){Promise.resolve().then(async()=>{const{stream:r,connection:n}=e,i=n.remotePeer;try{await this.routingTable.add(i)}catch(a){this.log.error(a)}const s=this;await is(r,a=>e0(a),async function*(a){for await(const o of a){const c=Hd.decode(o);s.log("incoming %s from %p",c.type,i);const l=await s.handleMessage(i,c);l!=null&&(yield Hd.encode(l))}},a=>fh(a),r)}).catch(r=>{this.log.error(r)})}};class JNt extends ea{log;components;protocol;running;registrarId;constructor(e,r){super();const{protocol:n,logPrefix:i}=r;this.components=e,this.log=e.logger.forComponent(`${i}:topology-listener`),this.running=!1,this.protocol=n}isStarted(){return this.running}async start(){this.running||(this.running=!0,this.registrarId=await this.components.registrar.register(this.protocol,{onConnect:e=>{this.log("observed peer %p with protocol %s",e,this.protocol),this.dispatchEvent(new sf("peer",{detail:e}))}}))}async stop(){this.running=!1,this.registrarId!=null&&(this.components.registrar.unregister(this.registrarId),this.registrarId=void 0)}}class QNt{dht;constructor(e){this.dht=e}async provide(e,r={}){await $1(this.dht.provide(e,r))}async*findProviders(e,r={}){for await(const n of this.dht.findProviders(e,r))n.name==="PROVIDER"&&(yield*n.providers)}async put(e,r,n){await $1(this.dht.put(e,r,n))}async get(e,r){for await(const n of this.dht.get(e,r))if(n.name==="VALUE")return n.value;throw new ye("Not found","ERR_NOT_FOUND")}}class eMt{dht;constructor(e){this.dht=e}async findPeer(e,r={}){for await(const n of this.dht.findPeer(e,r))if(n.name==="FINAL_PEER")return n.peer;throw new ye("Not found","ERR_NOT_FOUND")}async*getClosestPeers(e,r={}){for await(const n of this.dht.getClosestPeers(e,r))n.name==="FINAL_PEER"&&(yield n.peer)}}const tMt=32,rMt=64;class nMt extends ea{protocol;routingTable;providers;network;peerRouting;components;log;running;kBucketSize;clientMode;validators;selectors;queryManager;contentFetching;contentRouting;routingTableRefresh;rpc;topologyListener;querySelf;maxInboundStreams;maxOutboundStreams;dhtContentRouting;dhtPeerRouting;peerInfoMapper;constructor(e,r={}){super();const{kBucketSize:n,clientMode:i,validators:s,selectors:a,querySelfInterval:o,protocol:c,logPrefix:l,pingTimeout:u,pingConcurrency:f,maxInboundStreams:h,maxOutboundStreams:d,providers:g}=r,p=l??"libp2p:kad-dht";this.running=!1,this.components=e,this.log=e.logger.forComponent(p),this.protocol=c??VOt,this.kBucketSize=n??20,this.clientMode=i??!0,this.maxInboundStreams=h??tMt,this.maxOutboundStreams=d??rMt,this.peerInfoMapper=r.peerInfoMapper??aNt,this.routingTable=new jNt(e,{kBucketSize:n,pingTimeout:u,pingConcurrency:f,protocol:this.protocol,logPrefix:p}),this.providers=new TNt(e,g??{}),this.validators={...iNt,...s},this.selectors={...rNt,...a},this.network=new SNt(e,{protocol:this.protocol,logPrefix:p});const m=fn();r.allowQueryWithZeroPeers===!0&&m.resolve(),this.queryManager=new RNt(e,{disjointPaths:Math.ceil(this.kBucketSize/2),logPrefix:p,initialQuerySelfHasRun:m,routingTable:this.routingTable}),this.peerRouting=new ANt(e,{routingTable:this.routingTable,network:this.network,validators:this.validators,queryManager:this.queryManager,logPrefix:p}),this.contentFetching=new vNt(e,{validators:this.validators,selectors:this.selectors,peerRouting:this.peerRouting,queryManager:this.queryManager,network:this.network,logPrefix:p}),this.contentRouting=new wNt(e,{network:this.network,peerRouting:this.peerRouting,queryManager:this.queryManager,routingTable:this.routingTable,providers:this.providers,logPrefix:p}),this.routingTableRefresh=new qNt(e,{peerRouting:this.peerRouting,routingTable:this.routingTable,logPrefix:p}),this.rpc=new ZNt(e,{routingTable:this.routingTable,providers:this.providers,peerRouting:this.peerRouting,validators:this.validators,logPrefix:p,peerInfoMapper:this.peerInfoMapper}),this.topologyListener=new JNt(e,{protocol:this.protocol,logPrefix:p}),this.querySelf=new ONt(e,{peerRouting:this.peerRouting,interval:o,initialInterval:r.initialQuerySelfInterval,logPrefix:p,initialQuerySelfHasRun:m,routingTable:this.routingTable}),this.network.addEventListener("peer",y=>{const v=y.detail;this.onPeerConnect(v).catch(_=>{this.log.error("could not add %p to routing table",v.id,_)}),this.dispatchEvent(new sf("peer",{detail:v}))}),this.topologyListener.addEventListener("peer",y=>{const v=y.detail;Promise.resolve().then(async()=>{const _=await this.components.peerStore.get(v),x={id:v,multiaddrs:_.addresses.map(({multiaddr:A})=>A),protocols:_.protocols};await this.onPeerConnect(x)}).catch(_=>{this.log.error("could not add %p to routing table",v,_)})}),this.dhtPeerRouting=new eMt(this),this.dhtContentRouting=new QNt(this),r.clientMode==null&&e.events.addEventListener("self:peer:update",y=>{this.log("received update of self-peer info"),Promise.resolve().then(async()=>{const v=y.detail.peer.addresses.some(({multiaddr:x})=>yNt(x)),_=this.getMode();v&&_==="client"?await this.setMode("server"):_==="server"&&!v&&await this.setMode("client")}).catch(v=>{this.log.error("error setting dht server mode",v)})})}[Symbol.toStringTag]="@libp2p/kad-dht";[yo]=["@libp2p/content-routing","@libp2p/peer-routing","@libp2p/peer-discovery"];[em]=["@libp2p/identify"];get[ev](){return this.dhtContentRouting}get[tv](){return this.dhtPeerRouting}get[p4](){return this}async onPeerConnect(e){if(this.log("peer %p connected",e.id),e=this.peerInfoMapper(e),e.multiaddrs.length===0){this.log("ignoring %p as there were no valid addresses in %s after filtering",e.id,e.multiaddrs.map(r=>r.toString()));return}try{await this.routingTable.add(e.id)}catch(r){this.log.error("could not add %p to routing table",e.id,r)}}isStarted(){return this.running}getMode(){return this.clientMode?"client":"server"}async setMode(e){await this.components.registrar.unhandle(this.protocol),e==="client"?(this.log("enabling client mode"),this.clientMode=!0):(this.log("enabling server mode"),this.clientMode=!1,await this.components.registrar.handle(this.protocol,this.rpc.onIncomingStream.bind(this.rpc),{maxInboundStreams:this.maxInboundStreams,maxOutboundStreams:this.maxOutboundStreams}))}async start(){this.running=!0,await this.setMode(this.clientMode?"client":"server"),await hb(this.querySelf,this.providers,this.queryManager,this.network,this.routingTable,this.topologyListener,this.routingTableRefresh)}async stop(){this.running=!1,await db(this.querySelf,this.providers,this.queryManager,this.network,this.routingTable,this.routingTableRefresh,this.topologyListener)}async*put(e,r,n={}){yield*this.contentFetching.put(e,r,n)}async*get(e,r={}){yield*this.contentFetching.get(e,r)}async*provide(e,r={}){yield*this.contentRouting.provide(e,this.components.addressManager.getAddresses(),r)}async*findProviders(e,r={}){yield*this.contentRouting.findProviders(e,r)}async*findPeer(e,r={}){yield*this.peerRouting.findPeer(e,r)}async*getClosestPeers(e,r={}){yield*this.peerRouting.getClosestPeers(e,r)}async refreshRoutingTable(){this.routingTableRefresh.refreshTable(!0)}}var Cse;(function(t){t[t.SEND_QUERY=0]="SEND_QUERY",t[t.PEER_RESPONSE=1]="PEER_RESPONSE",t[t.FINAL_PEER=2]="FINAL_PEER",t[t.QUERY_ERROR=3]="QUERY_ERROR",t[t.PROVIDER=4]="PROVIDER",t[t.VALUE=5]="VALUE",t[t.ADD_PEER=6]="ADD_PEER",t[t.DIAL_PEER=7]="DIAL_PEER"})(Cse||(Cse={}));function $z(t={}){return e=>new nMt(e,t)}function iMt(t){return t>=55296&&t<=56319}function sMt(t){return t>=56320&&t<=57343}var aMt=function(e,r,n){if(typeof r!="string")throw new Error("Input must be string");for(var i=r.length,s=0,a,o,c=0;c<i;c+=1){if(a=r.charCodeAt(c),o=r[c],iMt(a)&&sMt(r.charCodeAt(c+1))&&(c+=1,o+=r[c]),s+=e(o),s===n)return r.slice(0,c+1);if(s>n)return r.slice(0,c-o.length+1)}return r};function oMt(t){return t>=55296&&t<=56319}function cMt(t){return t>=56320&&t<=57343}var lMt=function(e){if(typeof e!="string")throw new Error("Input must be string");for(var r=e.length,n=0,i=null,s=null,a=0;a<r;a++)i=e.charCodeAt(a),cMt(i)?s!=null&&oMt(s)?n+=1:n+=3:i<=127?n+=1:i>=128&&i<=2047?n+=2:i>=2048&&i<=65535&&(n+=3),s=i;return n},uMt=aMt,fMt=lMt,hMt=uMt.bind(null,fMt),dMt=hMt,pMt=/[\/\?<>\\:\*\|"]/g,gMt=/[\x00-\x1f\x80-\x9f]/g,mMt=/^\.+$/,yMt=/^(con|prn|aux|nul|com[0-9]|lpt[0-9])(\..*)?$/i,vMt=/[\. ]+$/;function Ise(t,e){if(typeof t!="string")throw new Error("Input must be string");var r=t.replace(pMt,e).replace(gMt,e).replace(mMt,e).replace(yMt,e).replace(vMt,e);return dMt(r,255)}var bMt=function(t,e){var r=e&&e.replacement||"",n=Ise(t,r);return r===""?n:Ise(n,"")};const wMt=si(bMt);var En;(function(t){t.ERR_INVALID_PARAMETERS="ERR_INVALID_PARAMETERS",t.ERR_INVALID_KEY_NAME="ERR_INVALID_KEY_NAME",t.ERR_INVALID_KEY_TYPE="ERR_INVALID_KEY_TYPE",t.ERR_KEY_ALREADY_EXISTS="ERR_KEY_ALREADY_EXISTS",t.ERR_INVALID_KEY_SIZE="ERR_INVALID_KEY_SIZE",t.ERR_KEY_NOT_FOUND="ERR_KEY_NOT_FOUND",t.ERR_OLD_KEY_NAME_INVALID="ERR_OLD_KEY_NAME_INVALID",t.ERR_NEW_KEY_NAME_INVALID="ERR_NEW_KEY_NAME_INVALID",t.ERR_PASSWORD_REQUIRED="ERR_PASSWORD_REQUIRED",t.ERR_PEM_REQUIRED="ERR_PEM_REQUIRED",t.ERR_CANNOT_READ_KEY="ERR_CANNOT_READ_KEY",t.ERR_MISSING_PRIVATE_KEY="ERR_MISSING_PRIVATE_KEY",t.ERR_INVALID_OLD_PASS_TYPE="ERR_INVALID_OLD_PASS_TYPE",t.ERR_INVALID_NEW_PASS_TYPE="ERR_INVALID_NEW_PASS_TYPE",t.ERR_INVALID_PASS_LENGTH="ERR_INVALID_PASS_LENGTH"})(En||(En={}));const _Mt="/pkcs8/",k4e="/info/",qp=new WeakMap,Hp={minKeyLength:112/8,minSaltLength:128/8,minIterationCount:1e3},eD={dek:{keyLength:512/8,iterationCount:1e4,salt:"you should override this value with a crypto secure random number",hash:"sha2-512"}};function Jh(t){return t==null||typeof t!="string"?!1:t===wMt(t.trim())&&t.length>0}async function ci(){const r=Math.random()*800+200;await new Promise(n=>setTimeout(n,r))}function wf(t){return new Ni(_Mt+t)}function K0(t){return new Ni(k4e+t)}class xMt{components;init;log;constructor(e,r){if(this.components=e,this.log=e.logger.forComponent("libp2p:keychain"),this.init=tu(eD,r),this.init.pass!=null&&this.init.pass?.length<20)throw new Error("pass must be least 20 characters");if(this.init.dek?.keyLength!=null&&this.init.dek.keyLength<Hp.minKeyLength)throw new Error(`dek.keyLength must be least ${Hp.minKeyLength} bytes`);if(this.init.dek?.salt?.length!=null&&this.init.dek.salt.length<Hp.minSaltLength)throw new Error(`dek.saltLength must be least ${Hp.minSaltLength} bytes`);if(this.init.dek?.iterationCount!=null&&this.init.dek.iterationCount<Hp.minIterationCount)throw new Error(`dek.iterationCount must be least ${Hp.minIterationCount}`);const n=this.init.pass!=null&&this.init.dek?.salt!=null?uie(this.init.pass,this.init.dek?.salt,this.init.dek?.iterationCount,this.init.dek?.keyLength,this.init.dek?.hash):"";qp.set(this,{dek:n})}[Symbol.toStringTag]="@libp2p/keychain";[yo]=["@libp2p/keychain"];static generateOptions(){const e=Object.assign({},eD),r=Math.ceil(Hp.minSaltLength/3)*3;return e.dek.salt=vt(Xu(r),"base64"),e}static get options(){return eD}async createKey(e,r,n=2048){if(!Jh(e)||e==="self")throw await ci(),new ye("Invalid key name",En.ERR_INVALID_KEY_NAME);if(typeof r!="string")throw await ci(),new ye("Invalid key type",En.ERR_INVALID_KEY_TYPE);const i=wf(e);if(await this.components.datastore.has(i))throw await ci(),new ye("Key name already exists",En.ERR_KEY_ALREADY_EXISTS);switch(r.toLowerCase()){case"rsa":if(!Number.isSafeInteger(n)||n<2048)throw await ci(),new ye("Invalid RSA key size",En.ERR_INVALID_KEY_SIZE);break}let a;try{const o=await Ywe(r,n),c=await o.id(),l=qp.get(this);if(l==null)throw new ye("dek missing",En.ERR_INVALID_PARAMETERS);const u=l.dek,f=await o.export(u);a={name:e,id:c};const h=this.components.datastore.batch();h.put(i,pt(f)),h.put(K0(e),pt(JSON.stringify(a))),await h.commit()}catch(o){throw await ci(),o}return a}async listKeys(){const e={prefix:k4e},r=[];for await(const n of this.components.datastore.query(e))r.push(JSON.parse(vt(n.value)));return r}async findKeyById(e){try{const n=(await this.listKeys()).find(i=>i.id===e);if(n==null)throw new ye(`Key with id '${e}' does not exist.`,En.ERR_KEY_NOT_FOUND);return n}catch(r){throw await ci(),r}}async findKeyByName(e){if(!Jh(e))throw await ci(),new ye(`Invalid key name '${e}'`,En.ERR_INVALID_KEY_NAME);const r=K0(e);try{const n=await this.components.datastore.get(r);return JSON.parse(vt(n))}catch(n){throw await ci(),this.log.error(n),new ye(`Key '${e}' does not exist.`,En.ERR_KEY_NOT_FOUND)}}async removeKey(e){if(!Jh(e)||e==="self")throw await ci(),new ye(`Invalid key name '${e}'`,En.ERR_INVALID_KEY_NAME);const r=wf(e),n=await this.findKeyByName(e),i=this.components.datastore.batch();return i.delete(r),i.delete(K0(e)),await i.commit(),n}async renameKey(e,r){if(!Jh(e)||e==="self")throw await ci(),new ye(`Invalid old key name '${e}'`,En.ERR_OLD_KEY_NAME_INVALID);if(!Jh(r)||r==="self")throw await ci(),new ye(`Invalid new key name '${r}'`,En.ERR_NEW_KEY_NAME_INVALID);const n=wf(e),i=wf(r),s=K0(e),a=K0(r);if(await this.components.datastore.has(i))throw await ci(),new ye(`Key '${r}' already exists`,En.ERR_KEY_ALREADY_EXISTS);try{const c=await this.components.datastore.get(n),l=await this.components.datastore.get(s),u=JSON.parse(vt(l));u.name=r;const f=this.components.datastore.batch();return f.put(i,c),f.put(a,pt(JSON.stringify(u))),f.delete(n),f.delete(s),await f.commit(),u}catch(c){throw await ci(),c}}async exportKey(e,r){if(!Jh(e))throw await ci(),new ye(`Invalid key name '${e}'`,En.ERR_INVALID_KEY_NAME);if(r==null)throw await ci(),new ye("Password is required",En.ERR_PASSWORD_REQUIRED);const n=wf(e);try{const i=await this.components.datastore.get(n),s=vt(i),a=qp.get(this);if(a==null)throw new ye("dek missing",En.ERR_INVALID_PARAMETERS);const o=a.dek;return await(await ex(s,o)).export(r)}catch(i){throw await ci(),i}}async exportPeerId(e){const r="temporary-password",n=await this.exportKey(e,r),i=await ex(n,r);return Yu(i.public.bytes,i.bytes)}async importKey(e,r,n){if(!Jh(e)||e==="self")throw await ci(),new ye(`Invalid key name '${e}'`,En.ERR_INVALID_KEY_NAME);if(r==null)throw await ci(),new ye("PEM encoded key is required",En.ERR_PEM_REQUIRED);const i=wf(e);if(await this.components.datastore.has(i))throw await ci(),new ye(`Key '${e}' already exists`,En.ERR_KEY_ALREADY_EXISTS);let a;try{a=await ex(r,n)}catch{throw await ci(),new ye("Cannot read the key, most likely the password is wrong",En.ERR_CANNOT_READ_KEY)}let o;try{o=await a.id();const u=qp.get(this);if(u==null)throw new ye("dek missing",En.ERR_INVALID_PARAMETERS);const f=u.dek;r=await a.export(f)}catch(u){throw await ci(),u}const c={name:e,id:o},l=this.components.datastore.batch();return l.put(i,pt(r)),l.put(K0(e),pt(JSON.stringify(c))),await l.commit(),c}async importPeer(e,r){try{if(!Jh(e))throw new ye(`Invalid key name '${e}'`,En.ERR_INVALID_KEY_NAME);if(r==null)throw new ye("PeerId is required",En.ERR_MISSING_PRIVATE_KEY);if(r.privateKey==null)throw new ye("PeerId.privKey is required",En.ERR_MISSING_PRIVATE_KEY);const n=await _m(r.privateKey),i=wf(e);if(await this.components.datastore.has(i))throw await ci(),new ye(`Key '${e}' already exists`,En.ERR_KEY_ALREADY_EXISTS);const a=qp.get(this);if(a==null)throw new ye("dek missing",En.ERR_INVALID_PARAMETERS);const o=a.dek,c=await n.export(o),l={name:e,id:r.toString()},u=this.components.datastore.batch();return u.put(i,pt(c)),u.put(K0(e),pt(JSON.stringify(l))),await u.commit(),l}catch(n){throw await ci(),n}}async getPrivateKey(e){if(!Jh(e))throw await ci(),new ye(`Invalid key name '${e}'`,En.ERR_INVALID_KEY_NAME);try{const r=wf(e),n=await this.components.datastore.get(r);return vt(n)}catch(r){throw await ci(),this.log.error(r),new ye(`Key '${e}' does not exist.`,En.ERR_KEY_NOT_FOUND)}}async rotateKeychainPass(e,r){if(typeof e!="string")throw await ci(),new ye(`Invalid old pass type '${typeof e}'`,En.ERR_INVALID_OLD_PASS_TYPE);if(typeof r!="string")throw await ci(),new ye(`Invalid new pass type '${typeof r}'`,En.ERR_INVALID_NEW_PASS_TYPE);if(r.length<20)throw await ci(),new ye(`Invalid pass length ${r.length}`,En.ERR_INVALID_PASS_LENGTH);this.log("recreating keychain");const n=qp.get(this);if(n==null)throw new ye("dek missing",En.ERR_INVALID_PARAMETERS);const i=n.dek;this.init.pass=r;const s=r!=null&&this.init.dek?.salt!=null?uie(r,this.init.dek.salt,this.init.dek?.iterationCount,this.init.dek?.keyLength,this.init.dek?.hash):"";qp.set(this,{dek:s});const a=await this.listKeys();for(const o of a){const c=await this.components.datastore.get(wf(o.name)),l=vt(c),u=await ex(l,i),f=s.toString(),h=await u.export(f),d=this.components.datastore.batch(),g={name:o.name,id:o.id};d.put(wf(o.name),pt(h)),d.put(K0(o.name),pt(JSON.stringify(g))),await d.commit()}this.log("keychain reconstructed")}}function C4e(t={}){return e=>new xMt(e,t)}class I4e{memoryStorage;points;duration;blockDuration;execEvenly;execEvenlyMinDelayMs;keyPrefix;constructor(e={}){this.points=e.points??4,this.duration=e.duration??1,this.blockDuration=e.blockDuration??0,this.execEvenly=e.execEvenly??!1,this.execEvenlyMinDelayMs=e.execEvenlyMinDelayMs??this.duration*1e3/this.points,this.keyPrefix=e.keyPrefix??"rlflx",this.memoryStorage=new EMt}async consume(e,r=1,n={}){const i=this.getKey(e),s=this._getKeySecDuration(n);let a=this.memoryStorage.incrby(i,r,s);if(a.remainingPoints=Math.max(this.points-a.consumedPoints,0),a.consumedPoints>this.points)throw this.blockDuration>0&&a.consumedPoints<=this.points+r&&(a=this.memoryStorage.set(i,a.consumedPoints,this.blockDuration)),new ye("Rate limit exceeded","ERR_RATE_LIMIT_EXCEEDED",a);if(this.execEvenly&&a.msBeforeNext>0&&!a.isFirstInDuration){let o=Math.ceil(a.msBeforeNext/(a.remainingPoints+2));o<this.execEvenlyMinDelayMs&&(o=a.consumedPoints*this.execEvenlyMinDelayMs),await v4e(o)}return a}penalty(e,r=1,n={}){const i=this.getKey(e),s=this._getKeySecDuration(n),a=this.memoryStorage.incrby(i,r,s);return a.remainingPoints=Math.max(this.points-a.consumedPoints,0),a}reward(e,r=1,n={}){const i=this.getKey(e),s=this._getKeySecDuration(n),a=this.memoryStorage.incrby(i,-r,s);return a.remainingPoints=Math.max(this.points-a.consumedPoints,0),a}block(e,r){const n=r*1e3,i=this.points+1;return this.memoryStorage.set(this.getKey(e),i,r),{remainingPoints:0,msBeforeNext:n===0?-1:n,consumedPoints:i,isFirstInDuration:!1}}set(e,r,n=0){const i=(n>=0?n:this.duration)*1e3;return this.memoryStorage.set(this.getKey(e),r,n),{remainingPoints:0,msBeforeNext:i===0?-1:i,consumedPoints:r,isFirstInDuration:!1}}get(e){const r=this.memoryStorage.get(this.getKey(e));return r!=null&&(r.remainingPoints=Math.max(this.points-r.consumedPoints,0)),r}delete(e){this.memoryStorage.delete(this.getKey(e))}_getKeySecDuration(e){return e?.customDuration!=null&&e.customDuration>=0?e.customDuration:this.duration}getKey(e){return this.keyPrefix.length>0?`${this.keyPrefix}:${e}`:e}parseKey(e){return e.substring(this.keyPrefix.length)}}class EMt{storage;constructor(){this.storage=new Map}incrby(e,r,n){const i=this.storage.get(e);if(i!=null){const s=i.expiresAt!=null?i.expiresAt.getTime()-new Date().getTime():-1;return i.expiresAt==null||s>0?(i.value+=r,{remainingPoints:0,msBeforeNext:s,consumedPoints:i.value,isFirstInDuration:!1}):this.set(e,r,n)}return this.set(e,r,n)}set(e,r,n){const i=n*1e3,s=this.storage.get(e);s!=null&&clearTimeout(s.timeoutId);const a={value:r,expiresAt:i>0?new Date(Date.now()+i):void 0};return this.storage.set(e,a),i>0&&(a.timeoutId=setTimeout(()=>{this.storage.delete(e)},i),a.timeoutId.unref!=null&&a.timeoutId.unref()),{remainingPoints:0,msBeforeNext:i===0?-1:i,consumedPoints:a.value,isFirstInDuration:!0}}get(e){const r=this.storage.get(e);if(r!=null)return{remainingPoints:0,msBeforeNext:r.expiresAt!=null?r.expiresAt.getTime()-new Date().getTime():-1,consumedPoints:r.value,isFirstInDuration:!1}}delete(e){const r=this.storage.get(e);return r!=null?(r.timeoutId!=null&&clearTimeout(r.timeoutId),this.storage.delete(e),!0):!1}}var Rn;(function(t){t[t.NEW_STREAM=0]="NEW_STREAM",t[t.MESSAGE_RECEIVER=1]="MESSAGE_RECEIVER",t[t.MESSAGE_INITIATOR=2]="MESSAGE_INITIATOR",t[t.CLOSE_RECEIVER=3]="CLOSE_RECEIVER",t[t.CLOSE_INITIATOR=4]="CLOSE_INITIATOR",t[t.RESET_RECEIVER=5]="RESET_RECEIVER",t[t.RESET_INITIATOR=6]="RESET_INITIATOR"})(Rn||(Rn={}));const Uz=Object.freeze({0:"NEW_STREAM",1:"MESSAGE_RECEIVER",2:"MESSAGE_INITIATOR",3:"CLOSE_RECEIVER",4:"CLOSE_INITIATOR",5:"RESET_RECEIVER",6:"RESET_INITIATOR"}),Rse=Object.freeze({NEW_STREAM:Rn.NEW_STREAM,MESSAGE:Rn.MESSAGE_INITIATOR,CLOSE:Rn.CLOSE_INITIATOR,RESET:Rn.RESET_INITIATOR}),SMt=Object.freeze({MESSAGE:Rn.MESSAGE_RECEIVER,CLOSE:Rn.CLOSE_RECEIVER,RESET:Rn.RESET_RECEIVER}),R4e=1<<20,AMt=4<<20;class TMt{_buffer;_headerInfo;_maxMessageSize;_maxUnprocessedMessageQueueSize;constructor(e=R4e,r=AMt){this._buffer=new Pn,this._headerInfo=null,this._maxMessageSize=e,this._maxUnprocessedMessageQueueSize=r}write(e){if(e==null||e.length===0)return[];if(this._buffer.append(e),this._buffer.byteLength>this._maxUnprocessedMessageQueueSize)throw Object.assign(new Error("unprocessed message queue size too large!"),{code:"ERR_MSG_QUEUE_TOO_BIG"});const r=[];for(;this._buffer.length!==0;){if(this._headerInfo==null)try{this._headerInfo=this._decodeHeader(this._buffer)}catch(l){if(l.code==="ERR_MSG_TOO_BIG")throw l;break}const{id:n,type:i,length:s,offset:a}=this._headerInfo;if(this._buffer.length-a<s)break;const c={id:n,type:i};(i===Rn.NEW_STREAM||i===Rn.MESSAGE_INITIATOR||i===Rn.MESSAGE_RECEIVER)&&(c.data=this._buffer.sublist(a,a+s)),r.push(c),this._buffer.consume(a+s),this._headerInfo=null}return r}_decodeHeader(e){const{value:r,offset:n}=Bse(e),{value:i,offset:s}=Bse(e,n),a=r&7;if(Uz[a]==null)throw new Error(`Invalid type received: ${a}`);if(i>this._maxMessageSize)throw Object.assign(new Error("message size too large!"),{code:"ERR_MSG_TOO_BIG"});return{id:r>>3,type:a,offset:n+s,length:i}}}const kMt=128,Pse=127;function Bse(t,e=0){let r=0,n=0,i=e,s;const a=t.length;do{if(i>=a||n>49)throw e=0,new RangeError("Could not decode varint");s=t.get(i++),r+=n<28?(s&Pse)<<n:(s&Pse)*Math.pow(2,n),n+=7}while(s>=kMt);return e=i-e,{value:r,offset:e}}const tD=10*1024;class CMt{_pool;_poolOffset;constructor(){this._pool=go(tD),this._poolOffset=0}write(e,r){const n=this._pool;let i=this._poolOffset;Go(e.id<<3|e.type,n,i),i+=Ei(e.id<<3|e.type),(e.type===Rn.NEW_STREAM||e.type===Rn.MESSAGE_INITIATOR||e.type===Rn.MESSAGE_RECEIVER)&&e.data!=null?(Go(e.data.length,n,i),i+=Ei(e.data.length)):(Go(0,n,i),i+=Ei(0));const s=n.subarray(this._poolOffset,i);tD-i<100?(this._pool=go(tD),this._poolOffset=0):this._poolOffset=i,r.append(s),(e.type===Rn.NEW_STREAM||e.type===Rn.MESSAGE_INITIATOR||e.type===Rn.MESSAGE_RECEIVER)&&e.data!=null&&r.append(e.data)}}const IMt=new CMt;async function*RMt(t){for await(const e of t){const r=new Pn;IMt.write(e,r),yield r}}class PMt extends yT{name;streamId;send;types;maxDataSize;constructor(e){super(e),this.types=e.direction==="outbound"?Rse:SMt,this.send=e.send,this.name=e.name,this.streamId=e.streamId,this.maxDataSize=e.maxDataSize}async sendNewStream(){await this.send({id:this.streamId,type:Rse.NEW_STREAM,data:new Pn(pt(this.name))})}async sendData(e){for(e=e.sublist();e.byteLength>0;){const r=Math.min(e.byteLength,this.maxDataSize);await this.send({id:this.streamId,type:this.types.MESSAGE,data:e.sublist(0,r)}),e.consume(r)}}async sendReset(){await this.send({id:this.streamId,type:this.types.RESET})}async sendCloseWrite(){await this.send({id:this.streamId,type:this.types.CLOSE})}async sendCloseRead(){}}function BMt(t){const{id:e,name:r,send:n,onEnd:i,type:s="initiator",maxMsgSize:a=R4e}=t;return new PMt({id:s==="initiator"?`i${e}`:`r${e}`,streamId:e,name:`${r??e}`,direction:s==="initiator"?"outbound":"inbound",maxDataSize:a,onEnd:i,send:n,log:t.logger.forComponent(`libp2p:mplex:stream:${s}:${e}`)})}const DMt=1024,OMt=1024,NMt=1024*1024*4,MMt=5,LMt=500;function Dse(t){const e={...t,type:`${Uz[t.type]} (${t.type})`};return t.type===Rn.NEW_STREAM&&(e.data=vt(t.data instanceof Uint8Array?t.data:t.data.subarray())),(t.type===Rn.MESSAGE_INITIATOR||t.type===Rn.MESSAGE_RECEIVER)&&(e.data=vt(t.data instanceof Uint8Array?t.data:t.data.subarray(),"base16")),e}class FMt{protocol="/mplex/6.7.0";sink;source;log;_streamId;_streams;_init;_source;closeController;rateLimiter;closeTimeout;logger;constructor(e,r){r=r??{},this.log=e.logger.forComponent("libp2p:mplex"),this.logger=e.logger,this._streamId=0,this._streams={initiators:new Map,receivers:new Map},this._init=r,this.closeTimeout=r.closeTimeout??LMt,this.sink=this._createSink(),this._source=qu({objectMode:!0,onEnd:()=>{for(const n of this._streams.initiators.values())n.destroy();for(const n of this._streams.receivers.values())n.destroy()}}),this.source=is(this._source,n=>RMt(n)),this.closeController=new AbortController,this.rateLimiter=new I4e({points:r.disconnectThreshold??MMt,duration:1})}get streams(){const e=[];for(const r of this._streams.initiators.values())e.push(r);for(const r of this._streams.receivers.values())e.push(r);return e}newStream(e){if(this.closeController.signal.aborted)throw new Error("Muxer already closed");const r=this._streamId++;e=e==null?r.toString():e.toString();const n=this._streams.initiators;return this._newStream({id:r,name:e,type:"initiator",registry:n})}async close(e){if(this.closeController.signal.aborted)return;const r=e?.signal??AbortSignal.timeout(this.closeTimeout);try{await Promise.all(this.streams.map(async n=>n.close({signal:r}))),this._source.end(),await this._source.onEmpty({signal:r}),this.closeController.abort()}catch(n){this.abort(n)}}abort(e){this.closeController.signal.aborted||(this.streams.forEach(r=>{r.abort(e)}),this.closeController.abort(e))}_newReceiverStream(e){const{id:r,name:n}=e,i=this._streams.receivers;return this._newStream({id:r,name:n,type:"receiver",registry:i})}_newStream(e){const{id:r,name:n,type:i,registry:s}=e;if(this.log("new %s stream %s",i,r),i==="initiator"&&this._streams.initiators.size===(this._init.maxOutboundStreams??OMt))throw new ye("Too many outbound streams open","ERR_TOO_MANY_OUTBOUND_STREAMS");if(s.has(r))throw new Error(`${i} stream ${r} already exists!`);const c=BMt({id:r,name:n,send:async l=>{this.log.enabled&&this.log.trace("%s stream %s send",i,r,Dse(l)),this._source.push(l)},type:i,onEnd:()=>{this.log("%s stream with id %s and protocol %s ended",i,r,c.protocol),s.delete(r),this._init.onStreamEnd!=null&&this._init.onStreamEnd(c)},maxMsgSize:this._init.maxMsgSize,logger:this.logger});return s.set(r,c),c}_createSink(){return async r=>{const n=()=>{u4e(r,this.log)};this.closeController.signal.addEventListener("abort",n);try{const i=new TMt(this._init.maxMsgSize,this._init.maxUnprocessedMessageQueueSize);for await(const s of r)for(const a of i.write(s))await this._handleIncoming(a);this._source.end()}catch(i){this.log("error in sink",i),this._source.end(i)}finally{this.closeController.signal.removeEventListener("abort",n)}}}async _handleIncoming(e){const{id:r,type:n}=e;if(this.log.enabled&&this.log.trace("incoming message",Dse(e)),e.type===Rn.NEW_STREAM){if(this._streams.receivers.size===(this._init.maxInboundStreams??DMt)){this.log("too many inbound streams open"),this._source.push({id:r,type:Rn.RESET_RECEIVER});try{await this.rateLimiter.consume("new-stream",1)}catch{this.log("rate limit hit when opening too many new streams over the inbound stream limit - closing remote connection"),this.abort(new Error("Too many open streams"));return}return}const o=this._newReceiverStream({id:r,name:vt(e.data instanceof Uint8Array?e.data:e.data.subarray())});this._init.onIncomingStream!=null&&this._init.onIncomingStream(o);return}const s=((n&1)===1?this._streams.initiators:this._streams.receivers).get(r);if(s==null){this.log("missing stream %s for message type %s",r,Uz[n]);try{await this.rateLimiter.consume("missing-stream",1)}catch{this.log("rate limit hit when receiving messages for streams that do not exist - closing remote connection"),this.abort(new Error("Too many messages for missing streams"));return}return}const a=this._init.maxStreamBufferSize??NMt;try{switch(n){case Rn.MESSAGE_INITIATOR:case Rn.MESSAGE_RECEIVER:if(s.sourceReadableLength()>a)throw this._source.push({id:e.id,type:n===Rn.MESSAGE_INITIATOR?Rn.RESET_RECEIVER:Rn.RESET_INITIATOR}),new ye("Input buffer full - increase Mplex maxBufferSize to accommodate slow consumers","ERR_STREAM_INPUT_BUFFER_FULL");s.sourcePush(e.data);break;case Rn.CLOSE_INITIATOR:case Rn.CLOSE_RECEIVER:s.remoteCloseWrite();break;case Rn.RESET_INITIATOR:case Rn.RESET_RECEIVER:s.reset();break;default:this.log("unknown message type %s",n)}}catch(o){this.log.error("error while processing message",o),s.abort(o)}}}class $Mt{protocol="/mplex/6.7.0";_init;components;constructor(e,r={}){this.components=e,this._init=r}[Symbol.toStringTag]="@libp2p/mplex";[yo]=["@libp2p/stream-multiplexing"];createStreamMuxer(e={}){return new FMt(this.components,{...e,...this._init})}}function UMt(t={}){return e=>new $Mt(e,t)}const Ose=32,VMt="1.0.0",jMt="ping",zMt="ipfs",qMt=1e4,HMt=2,WMt=1,Nse="ERR_WRONG_PING_ACK";class KMt{protocol;components;started;timeout;maxInboundStreams;maxOutboundStreams;runOnTransientConnection;log;constructor(e,r={}){this.components=e,this.log=e.logger.forComponent("libp2p:ping"),this.started=!1,this.protocol=`/${r.protocolPrefix??zMt}/${jMt}/${VMt}`,this.timeout=r.timeout??qMt,this.maxInboundStreams=r.maxInboundStreams??HMt,this.maxOutboundStreams=r.maxOutboundStreams??WMt,this.runOnTransientConnection=r.runOnTransientConnection??!0,this.handleMessage=this.handleMessage.bind(this)}[Symbol.toStringTag]="@libp2p/ping";async start(){await this.components.registrar.handle(this.protocol,this.handleMessage,{maxInboundStreams:this.maxInboundStreams,maxOutboundStreams:this.maxOutboundStreams,runOnTransientConnection:this.runOnTransientConnection}),this.started=!0}async stop(){await this.components.registrar.unhandle(this.protocol),this.started=!1}isStarted(){return this.started}handleMessage(e){this.log("incoming ping from %p",e.connection.remotePeer);const{stream:r}=e,n=Date.now();AbortSignal.timeout(this.timeout).addEventListener("abort",()=>{r?.abort(new ye("ping timeout",rv))}),is(r,async function*(s){let a=0;for await(const o of s){if(a+=o.byteLength,a>Ose){r?.abort(new ye("Too much data received",Yp));return}yield o}},r).catch(s=>{this.log.error("incoming ping from %p failed with error",e.connection.remotePeer,s),r?.abort(s)}).finally(()=>{const s=Date.now()-n;this.log("incoming ping from %p complete in %dms",e.connection.remotePeer,s)})}async ping(e,r={}){this.log("pinging %p",e);const n=Date.now(),i=Xu(Ose),s=await this.components.connectionManager.openConnection(e,r);let a,o=()=>{};if(r.signal==null){const c=AbortSignal.timeout(this.timeout);r={...r,signal:c}}try{a=await s.newStream(this.protocol,{...r,runOnTransientConnection:this.runOnTransientConnection}),o=()=>{a?.abort(new ye("ping timeout",rv))},r.signal?.addEventListener("abort",o,{once:!0});const c=await is([i],a,async u=>mv(u)),l=Date.now()-n;if(c==null)throw new ye(`Did not receive a ping ack after ${l}ms`,Nse);if(!Kr(i,c.subarray()))throw new ye(`Received wrong ping ack after ${l}ms`,Nse);return this.log("ping %p complete in %dms",s.remotePeer,l),l}catch(c){throw this.log.error("error while pinging %p",s.remotePeer,c),a?.abort(c),c}finally{r.signal?.removeEventListener("abort",o),a!=null&&await a.close()}}}function GMt(t={}){return e=>new KMt(e,t)}var jl;(function(t){t.ERR_ALREADY_ABORTED="ERR_ALREADY_ABORTED",t.ERR_DATA_CHANNEL="ERR_DATA_CHANNEL",t.ERR_CONNECTION_CLOSED="ERR_CONNECTION_CLOSED",t.ERR_HASH_NOT_SUPPORTED="ERR_HASH_NOT_SUPPORTED",t.ERR_INVALID_MULTIADDR="ERR_INVALID_MULTIADDR",t.ERR_INVALID_FINGERPRINT="ERR_INVALID_FINGERPRINT",t.ERR_INVALID_PARAMETERS="ERR_INVALID_PARAMETERS",t.ERR_NOT_IMPLEMENTED="ERR_NOT_IMPLEMENTED",t.ERR_TOO_MANY_INBOUND_PROTOCOL_STREAMS="ERR_TOO_MANY_INBOUND_PROTOCOL_STREAMS",t.ERR_TOO_MANY_OUTBOUND_PROTOCOL_STREAMS="ERR_TOO_MANY_OUTBOUND_PROTOCOL_STREAMS"})(jl||(jl={}));class Ob extends ye{constructor(e,r){super(`WebRTC transport error: ${e}`,r??""),this.name="WebRTCTransportError"}}class YMt extends Ob{constructor(e,r){super(`[stream: ${e}] data channel error: ${r}`,jl.ERR_DATA_CHANNEL),this.name="WebRTC/DataChannelError"}}function Mse(t,e){return new YMt(t,e)}class XMt extends Ob{constructor(e){super(`There was a problem with the Multiaddr which was passed in: ${e}`,jl.ERR_INVALID_MULTIADDR),this.name="WebRTC/InappropriateMultiaddrError"}}function P4e(t){return new XMt(t)}class ZMt extends Ob{constructor(e){super(`There was a problem with a provided argument: ${e}`,jl.ERR_INVALID_PARAMETERS),this.name="WebRTC/InvalidArgumentError"}}function YM(t){return new ZMt(t)}class JMt extends Ob{constructor(e,r){super(`Invalid fingerprint "${e}" within ${r}`,jl.ERR_INVALID_FINGERPRINT),this.name="WebRTC/InvalidFingerprintError"}}function B4e(t,e){return new JMt(t,e)}class QMt extends Ob{constructor(e){super(`A method (${e}) was called though it has been intentionally left unimplemented.`,jl.ERR_NOT_IMPLEMENTED),this.name="WebRTC/UnimplementedError"}}function eLt(t){return new QMt(t)}class tLt extends Ob{constructor(e){super(`unsupported hash algorithm code: ${e} please see the codes at https://github.com/multiformats/multicodec/blob/master/table.csv `,jl.ERR_HASH_NOT_SUPPORTED),this.name="WebRTC/UnsupportedHashAlgorithmError"}}function rLt(t){return new tLt(t)}var Lse=function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,s;n<i;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return t.concat(s||Array.prototype.slice.call(e))},nLt=function(){function t(e,r,n){this.name=e,this.version=r,this.os=n,this.type="browser"}return t}(),iLt=function(){function t(e){this.version=e,this.type="node",this.name="node",this.os=Et.platform}return t}(),sLt=function(){function t(e,r,n,i){this.name=e,this.version=r,this.os=n,this.bot=i,this.type="bot-device"}return t}(),aLt=function(){function t(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return t}(),oLt=function(){function t(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return t}(),cLt=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,lLt=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,Fse=3,uLt=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",cLt]],$se=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function fLt(t){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new oLt:typeof navigator<"u"?dLt(navigator.userAgent):gLt()}function hLt(t){return t!==""&&uLt.reduce(function(e,r){var n=r[0],i=r[1];if(e)return e;var s=i.exec(t);return!!s&&[n,s]},!1)}function dLt(t){var e=hLt(t);if(!e)return null;var r=e[0],n=e[1];if(r==="searchbot")return new aLt;var i=n[1]&&n[1].split(".").join("_").split("_").slice(0,3);i?i.length<Fse&&(i=Lse(Lse([],i,!0),mLt(Fse-i.length),!0)):i=[];var s=i.join("."),a=pLt(t),o=lLt.exec(t);return o&&o[1]?new sLt(r,s,a,o[1]):new nLt(r,s,a)}function pLt(t){for(var e=0,r=$se.length;e<r;e++){var n=$se[e],i=n[0],s=n[1],a=s.exec(t);if(a)return i}return null}function gLt(){var t=typeof Et<"u"&&Et.version;return t?new iLt(Et.version.slice(1)):null}function mLt(t){for(var e=[],r=0;r<t;r++)e.push("0");return e}const yLt=["stun:stun.l.google.com:19302","stun:global.stun.twilio.com:3478","stun:stun.cloudflare.com:3478","stun:stun.services.mozilla.com:3478"],Use=fLt(),Vz=Use!=null&&Use.name==="firefox",D4e=async function*(){},O4e=async t=>{},vLt=30*1e3;function bLt(t,e,r=vLt,n){t.readyState==="open"&&Promise.resolve().then(async()=>{if(t.bufferedAmount>0){n.log("%s drain channel with %d buffered bytes",e,t.bufferedAmount);const i=fn();let s=!1;t.bufferedAmountLowThreshold=0;const a=()=>{s||(n.log("%s drain channel closed before drain",e),i.resolve())};t.addEventListener("close",a,{once:!0}),t.addEventListener("bufferedamountlow",()=>{s=!0,t.removeEventListener("close",a),i.resolve()}),await T6(i.promise,{milliseconds:r})}}).then(async()=>{t.readyState==="open"&&t.close()}).catch(i=>{n.log.error("error closing outbound stream",i)})}async function XM(t){return t=t??{},typeof t=="function"&&(t=await t()),t.iceServers=t.iceServers??yLt.map(e=>({urls:[e]})),t}class ZM{log;peerConnection;remoteAddr;timeline;metrics;source=D4e();sink=O4e;constructor(e,r){this.log=e.logger.forComponent("libp2p:webrtc:maconn"),this.remoteAddr=r.remoteAddr,this.timeline=r.timeline,this.peerConnection=r.peerConnection;const n=this.peerConnection.connectionState;this.peerConnection.onconnectionstatechange=()=>{this.log.trace("peer connection state change",this.peerConnection.connectionState,"initial state",n),(this.peerConnection.connectionState==="disconnected"||this.peerConnection.connectionState==="failed"||this.peerConnection.connectionState==="closed")&&(this.timeline.close=Date.now())}}async close(e){this.log.trace("closing connection"),this.peerConnection.close(),this.timeline.close=Date.now(),this.metrics?.increment({close:!0})}abort(e){this.log.error("closing connection due to error",e),this.peerConnection.close(),this.timeline.close=Date.now(),this.metrics?.increment({abort:!0})}}var oc;(function(t){(function(n){n.FIN="FIN",n.STOP_SENDING="STOP_SENDING",n.RESET="RESET",n.FIN_ACK="FIN_ACK"})(t.Flag||(t.Flag={}));let e;(function(n){n[n.FIN=0]="FIN",n[n.STOP_SENDING=1]="STOP_SENDING",n[n.RESET=2]="RESET",n[n.FIN_ACK=3]="FIN_ACK"})(e||(e={})),function(n){n.codec=()=>Xo(e)}(t.Flag||(t.Flag={}));let r;t.codec=()=>(r==null&&(r=Xr((n,i,s={})=>{s.lengthDelimited!==!1&&i.fork(),n.flag!=null&&(i.uint32(8),t.Flag.codec().encode(n.flag,i)),n.message!=null&&(i.uint32(18),i.bytes(n.message)),s.lengthDelimited!==!1&&i.ldelim()},(n,i)=>{const s={},a=i==null?n.len:n.pos+i;for(;n.pos<a;){const o=n.uint32();switch(o>>>3){case 1:s.flag=t.Flag.codec().decode(n);break;case 2:s.message=n.bytes();break;default:n.skipType(o&7);break}}return s})),r),t.encode=n=>Yr(n,t.codec()),t.decode=n=>Gr(n,t.codec())})(oc||(oc={}));const wLt=2*1024*1024,_Lt=30*1e3,jz=16*1024;function xLt(t=jz){const e=Ei(t-Ei(t)),r=1+Ei(Object.keys(oc.Flag).length-1),n=1,i=t-e-r-n,s=Ei(i);return e+r+n+s}const ELt=xLt(),SLt=5e3,ALt=5e3;class TLt extends yT{channel;incomingData;maxBufferedAmount;bufferedAmountLowEventTimeout;maxMessageSize;receiveFinAck;finAckTimeout;openTimeout;constructor(e){const r=e.onEnd;switch(e.onEnd=i=>{this.log.trace("readable and writeable ends closed",this.status),Promise.resolve(async()=>{if(!(this.timeline.abort!=null||this.timeline.reset!==null))try{await T6(this.receiveFinAck.promise,{milliseconds:this.finAckTimeout})}catch(s){this.log.error("error receiving FIN_ACK",s)}}).then(()=>{this.incomingData.end(),r?.(i)}).catch(s=>{this.log.error("error ending stream",s)})},super(e),this.channel=e.channel,this.channel.binaryType="arraybuffer",this.incomingData=qu(),this.bufferedAmountLowEventTimeout=e.bufferedAmountLowEventTimeout??_Lt,this.maxBufferedAmount=e.maxBufferedAmount??wLt,this.maxMessageSize=(e.maxMessageSize??jz)-ELt,this.receiveFinAck=fn(),this.finAckTimeout=e.closeTimeout??SLt,this.openTimeout=e.openTimeout??ALt,this.channel.readyState){case"open":this.timeline.open=new Date().getTime();break;case"closed":case"closing":(this.timeline.close===void 0||this.timeline.close===0)&&(this.timeline.close=Date.now());break;case"connecting":break;default:throw this.log.error("unknown datachannel state %s",this.channel.readyState),new ye("Unknown datachannel state","ERR_INVALID_STATE")}this.channel.onopen=i=>{this.timeline.open=new Date().getTime()},this.channel.onclose=i=>{this.receiveFinAck.resolve(),this.close().catch(s=>{this.log.error("error closing stream after channel closed",s)})},this.channel.onerror=i=>{const s=i.error;this.abort(s)},this.channel.onmessage=async i=>{const{data:s}=i;s===null||s.byteLength===0||this.incomingData.push(new Uint8Array(s,0,s.byteLength))};const n=this;Promise.resolve().then(async()=>{for await(const i of e0(this.incomingData)){const s=n.processIncomingProtobuf(i);s!=null&&n.sourcePush(new Pn(s))}}).catch(i=>{this.log.error("error processing incoming data channel messages",i)})}sendNewStream(){}async _sendMessage(e,r=!0){if(r&&this.channel.bufferedAmount>this.maxBufferedAmount)try{this.log('channel buffer is %d, wait for "bufferedamountlow" event',this.channel.bufferedAmount),await GM(this.channel,"bufferedamountlow",{timeout:this.bufferedAmountLowEventTimeout})}catch(n){throw n instanceof _$?new ye(`Timed out waiting for DataChannel buffer to clear after ${this.bufferedAmountLowEventTimeout}ms`,"ERR_BUFFER_CLEAR_TIMEOUT"):n}if(this.channel.readyState==="closed"||this.channel.readyState==="closing")throw new ye(`Invalid datachannel state - ${this.channel.readyState}`,"ERR_INVALID_STATE");this.channel.readyState!=="open"&&(this.log('channel state is "%s" and not "open", waiting for "open" event before sending data',this.channel.readyState),await GM(this.channel,"open",{timeout:this.openTimeout}),this.log('channel state is now "%s", sending data',this.channel.readyState)),this.channel.send(e.subarray())}async sendData(e){for(e=e.sublist();e.byteLength>0;){const r=Math.min(e.byteLength,this.maxMessageSize),n=e.subarray(0,r),i=oc.encode({message:n}),s=fh.single(i);await this._sendMessage(s),e.consume(r)}}async sendReset(){await this._sendFlag(oc.Flag.RESET)}async sendCloseWrite(e){if(await this._sendFlag(oc.Flag.FIN)){this.log.trace("awaiting FIN_ACK");try{await ma(this.receiveFinAck.promise,e?.signal,{errorMessage:"sending close-write was aborted before FIN_ACK was received",errorCode:"ERR_FIN_ACK_NOT_RECEIVED"})}catch(n){this.log.error("failed to await FIN_ACK",n)}}else this.log.trace("sending FIN failed, not awaiting FIN_ACK");this.receiveFinAck.resolve()}async sendCloseRead(){await this._sendFlag(oc.Flag.STOP_SENDING)}processIncomingProtobuf(e){const r=oc.decode(e);if(r.flag!==void 0&&(this.log.trace('incoming flag %s, write status "%s", read status "%s"',r.flag,this.writeStatus,this.readStatus),r.flag===oc.Flag.FIN&&(this.remoteCloseWrite(),this.log.trace("sending FIN_ACK"),this._sendFlag(oc.Flag.FIN_ACK).catch(n=>{this.log.error("error sending FIN_ACK immediately",n)})),r.flag===oc.Flag.RESET&&this.reset(),r.flag===oc.Flag.STOP_SENDING&&this.remoteCloseRead(),r.flag===oc.Flag.FIN_ACK&&(this.log.trace("received FIN_ACK"),this.receiveFinAck.resolve())),this.readStatus==="ready")return r.message}async _sendFlag(e){if(this.channel.readyState!=="open")return this.log.trace('not sending flag %s because channel is "%s" and not "open"',this.channel.readyState,e.toString()),!1;this.log.trace("sending flag %s",e.toString());const r=oc.encode({flag:e}),n=fh.single(r);try{return await this._sendMessage(n,!1),!0}catch(i){this.log.error("could not send flag %s",e.toString(),i)}return!1}}function N9(t){const{channel:e,direction:r}=t;return new TLt({id:r==="inbound"?`i${e.id}`:`r${e.id}`,log:t.logger.forComponent(`libp2p:webrtc:stream:${r}:${e.id}`),...t})}const N4e="/webrtc";class zz{protocol;peerConnection;bufferedStreams=[];metrics;dataChannelOptions;components;log;constructor(e,r){this.components=e,this.peerConnection=r.peerConnection,this.metrics=r.metrics,this.protocol=r.protocol??N4e,this.dataChannelOptions=r.dataChannelOptions??{},this.log=e.logger.forComponent("libp2p:webrtc:datachannelmuxerfactory"),this.peerConnection.ondatachannel=({channel:n})=>{if(this.log.trace('incoming early datachannel with channel id %d and label "%s"',n.id),n.label==="init"){this.log.trace("closing early init channel"),n.close();return}const i={},s=N9({channel:n,direction:"inbound",onEnd:a=>{i.onEnd(a)},logger:e.logger,...this.dataChannelOptions});i.stream=s,i.channel=n,i.onEnd=()=>{this.bufferedStreams=this.bufferedStreams.filter(a=>a.stream.id!==s.id)},this.bufferedStreams.push(i)}}createStreamMuxer(e){return new kLt(this.components,{...e,peerConnection:this.peerConnection,dataChannelOptions:this.dataChannelOptions,metrics:this.metrics,streams:this.bufferedStreams,protocol:this.protocol})}}class kLt{init;streams;protocol;log;peerConnection;dataChannelOptions;metrics;logger;constructor(e,r){this.init=r,this.log=e.logger.forComponent("libp2p:webrtc:muxer"),this.logger=e.logger,this.streams=r.streams.map(n=>n.stream),this.peerConnection=r.peerConnection,this.protocol=r.protocol??N4e,this.metrics=r.metrics,this.dataChannelOptions=r.dataChannelOptions??{},this.peerConnection.ondatachannel=({channel:n})=>{if(this.log.trace("incoming datachannel with channel id %d",n.id),n.label==="init"){this.log.trace("closing init channel"),n.close();return}const i=N9({channel:n,direction:"inbound",onEnd:()=>{this.log("incoming channel %s ended with state %s",n.id,n.readyState),this.#e(i,n)},logger:this.logger,...this.dataChannelOptions});this.streams.push(i),this.metrics?.increment({incoming_stream:!0}),r?.onIncomingStream?.(i)},this.init.streams.length>0&&queueMicrotask(()=>{this.init.streams.forEach(n=>{n.onEnd=()=>{this.log("incoming early channel %s ended with state %s",n.channel.id,n.channel.readyState),this.#e(n.stream,n.channel)},this.metrics?.increment({incoming_stream:!0}),this.init?.onIncomingStream?.(n.stream)})})}#e(e,r){this.log.trace("stream %s %s %s onEnd",e.direction,e.id,e.protocol),bLt(r,`${e.direction} ${e.id} ${e.protocol}`,this.dataChannelOptions.drainTimeout,{log:this.log}),this.streams=this.streams.filter(n=>n.id!==e.id),this.metrics?.increment({stream_end:!0}),this.init?.onStreamEnd?.(e)}async close(e){try{await Promise.all(this.streams.map(async r=>r.close(e)))}catch(r){this.abort(r)}}abort(e){for(const r of this.streams)r.abort(e)}source=D4e();sink=O4e;newStream(){const e=this.peerConnection.createDataChannel("");this.log.trace("opened outgoing datachannel with channel id %s",e.id);const r=N9({channel:e,direction:"outbound",onEnd:()=>{this.log("outgoing channel %s ended with state %s",e.id,e.readyState),this.#e(r,e)},logger:this.logger,...this.dataChannelOptions});return this.streams.push(r),this.metrics?.increment({outgoing_stream:!0}),r}}const M9=globalThis.RTCPeerConnection,M4e=globalThis.RTCSessionDescription,CLt=globalThis.RTCIceCandidate;var Pu;(function(t){(function(n){n.SDP_OFFER="SDP_OFFER",n.SDP_ANSWER="SDP_ANSWER",n.ICE_CANDIDATE="ICE_CANDIDATE"})(t.Type||(t.Type={}));let e;(function(n){n[n.SDP_OFFER=0]="SDP_OFFER",n[n.SDP_ANSWER=1]="SDP_ANSWER",n[n.ICE_CANDIDATE=2]="ICE_CANDIDATE"})(e||(e={})),function(n){n.codec=()=>Xo(e)}(t.Type||(t.Type={}));let r;t.codec=()=>(r==null&&(r=Xr((n,i,s={})=>{s.lengthDelimited!==!1&&i.fork(),n.type!=null&&(i.uint32(8),t.Type.codec().encode(n.type,i)),n.data!=null&&(i.uint32(18),i.string(n.data)),s.lengthDelimited!==!1&&i.ldelim()},(n,i)=>{const s={},a=i==null?n.len:n.pos+i;for(;n.pos<a;){const o=n.uint32();switch(o>>>3){case 1:s.type=t.Type.codec().decode(n);break;case 2:s.data=n.string();break;default:n.skipType(o&7);break}}return s})),r),t.encode=n=>Yr(n,t.codec()),t.decode=n=>Gr(n,t.codec())})(Pu||(Pu={}));const L4e=async(t,e,r)=>{try{const n=fn();for(RLt(t,n);;){const i=await Promise.race([n.promise,e.read({signal:r.signal}).catch(()=>{})]);if(i==null){r.signal?.throwIfAborted();break}if(i.type!==Pu.Type.ICE_CANDIDATE)throw new ye("ICE candidate message expected","ERR_NOT_ICE_CANDIDATE");const s=JSON.parse(i.data??"null");if(s===""||s===null){r.onProgress?.(new Bt("webrtc:end-of-ice-candidates")),r.log.trace("end-of-candidates received");continue}const a=new CLt(s);r.log.trace("%s received new ICE candidate %o",r.direction,s);try{r.onProgress?.(new Bt("webrtc:add-ice-candidate",a.candidate)),await t.addIceCandidate(a)}catch(o){r.log.error("%s bad candidate received",r.direction,s,o)}}}catch(n){if(r.log.error("%s error parsing ICE candidate",r.direction,n),r.signal?.aborted===!0)throw n}};function ILt(t){return Vz?t.iceConnectionState:t.connectionState}function RLt(t,e){t[Vz?"oniceconnectionstatechange":"onconnectionstatechange"]=r=>{switch(ILt(t)){case"connected":e.resolve();break;case"failed":case"disconnected":case"closed":e.reject(new ye("RTCPeerConnection was closed","ERR_CONNECTION_CLOSED_BEFORE_CONNECTED"));break}}}async function PLt({rtcConfiguration:t,dataChannel:e,signal:r,metrics:n,multiaddr:i,connectionManager:s,transportManager:a,log:o,logger:c,onProgress:l}){const{baseAddr:u}=FLt(i);n?.dialerEvents.increment({open:!0}),o.trace("dialing base address: %a",u);const f=u.getPeerId();if(f==null)throw new ye("Relay peer was missing","ERR_INVALID_ADDRESS");const h=s.getConnections(ti(f));let d,g=!1;h.length===0?(l?.(new Bt("webrtc:dial-relay")),d=await a.dial(u,{signal:r,onProgress:l}),g=!0):(l?.(new Bt("webrtc:reuse-relay-connection")),d=h[0]);try{l?.(new Bt("webrtc:open-signaling-stream"));const p=await d.newStream(JM,{signal:r,runOnTransientConnection:!0}),m=Rc(p).pb(Pu),y=new M9(t),v=new zz({logger:c},{peerConnection:y,dataChannelOptions:e});try{const _=y.createDataChannel("init");y.onicecandidate=({candidate:R})=>{const M=JSON.stringify(R?.toJSON()??null);o.trace("initiator sending ICE candidate %o",R),m.write({type:Pu.Type.ICE_CANDIDATE,data:M},{signal:r}).catch(N=>{o.error("error sending ICE candidate",N)})},y.onicecandidateerror=R=>{o.error("initiator ICE candidate error",R)};const x=await y.createOffer().catch(R=>{throw o.error("could not execute createOffer",R),new ye("Failed to set createOffer","ERR_SDP_HANDSHAKE_FAILED")});o.trace("initiator send SDP offer %s",x.sdp),l?.(new Bt("webrtc:send-sdp-offer")),await m.write({type:Pu.Type.SDP_OFFER,data:x.sdp},{signal:r}),await y.setLocalDescription(x).catch(R=>{throw o.error("could not execute setLocalDescription",R),new ye("Failed to set localDescription","ERR_SDP_HANDSHAKE_FAILED")}),l?.(new Bt("webrtc:read-sdp-answer"));const A=await m.read({signal:r});if(A.type!==Pu.Type.SDP_ANSWER)throw new ye("Remote should send an SDP answer","ERR_SDP_HANDSHAKE_FAILED");o.trace("initiator receive SDP answer %s",A.data);const C=new M4e({type:"answer",sdp:A.data});return await y.setRemoteDescription(C).catch(R=>{throw o.error("could not execute setRemoteDescription",R),new ye("Failed to set remoteDescription","ERR_SDP_HANDSHAKE_FAILED")}),o.trace("initiator read candidates until connected"),l?.(new Bt("webrtc:read-ice-candidates")),await L4e(y,m,{direction:"initiator",signal:r,log:o,onProgress:l}),o.trace("initiator connected, closing init channel"),_.close(),l?.(new Bt("webrtc:close-signaling-stream")),o.trace("closing signaling channel"),await p.close({signal:r}),o.trace("initiator connected to remote address %s",i),{remoteAddress:i,peerConnection:y,muxerFactory:v}}catch(_){throw o.error("outgoing signaling error",_),y.close(),p.abort(_),_}finally{y.onicecandidate=null,y.onicecandidateerror=null}}finally{if(g)try{await d.close({signal:r})}catch(p){d.abort(p)}}}class BLt extends ea{peerId;transportManager;shutdownController;constructor(e,r){super(),this.peerId=e.peerId,this.transportManager=e.transportManager,this.shutdownController=r.shutdownController}async listen(){this.safeDispatchEvent("listening",{})}getAddrs(){return this.transportManager.getListeners().filter(e=>e!==this).map(e=>e.getAddrs().filter(r=>cg.matches(r)).map(r=>r.encapsulate(`/webrtc/p2p/${this.peerId}`))).flat()}async close(){this.shutdownController.abort(),this.safeDispatchEvent("close",{})}}async function DLt({peerConnection:t,stream:e,signal:r,connection:n,log:i}){i.trace("new inbound signaling stream");const s=Rc(e).pb(Pu);try{t.onicecandidate=({candidate:u})=>{const f=JSON.stringify(u?.toJSON()??null);i.trace("recipient sending ICE candidate %s",f),s.write({type:Pu.Type.ICE_CANDIDATE,data:f},{signal:r}).catch(h=>{i.error("error sending ICE candidate",h)})};const o=await s.read({signal:r});if(o.type!==Pu.Type.SDP_OFFER)throw new ye(`expected message type SDP_OFFER, received: ${o.type??"undefined"} `,"ERR_SDP_HANDSHAKE_FAILED");i.trace("recipient receive SDP offer %s",o.data);const c=new M4e({type:"offer",sdp:o.data});await t.setRemoteDescription(c).catch(u=>{throw i.error("could not execute setRemoteDescription",u),new ye("Failed to set remoteDescription","ERR_SDP_HANDSHAKE_FAILED")});const l=await t.createAnswer().catch(u=>{throw i.error("could not execute createAnswer",u),new ye("Failed to create answer","ERR_SDP_HANDSHAKE_FAILED")});i.trace("recipient send SDP answer %s",l.sdp),await s.write({type:Pu.Type.SDP_ANSWER,data:l.sdp},{signal:r}),await t.setLocalDescription(l).catch(u=>{throw i.error("could not execute setLocalDescription",u),new ye("Failed to set localDescription","ERR_SDP_HANDSHAKE_FAILED")}),i.trace("recipient read candidates until connected"),await L4e(t,s,{direction:"recipient",signal:r,log:i})}catch(o){if(t.connectionState!=="connected")throw i.error("error while handling signaling stream from peer %a",n.remoteAddr,o),t.close(),o;i("error while handling signaling stream from peer %a, ignoring as the RTCPeerConnection is already connected",n.remoteAddr,o)}const a=Wr(`/webrtc/p2p/${n.remoteAddr.getPeerId()}`);return i.trace("recipient connected to remote address %s",a),{remoteAddress:a}}const OLt="/webrtc",NLt="/p2p-circuit",JM="/webrtc-signaling/0.0.1",MLt=30*1e3;class LLt{components;init;log;_started=!1;metrics;shutdownController;constructor(e,r={}){this.components=e,this.init=r,this.log=e.logger.forComponent("libp2p:webrtc"),this.shutdownController=new AbortController,Zt(1/0,this.shutdownController.signal),e.metrics!=null&&(this.metrics={dialerEvents:e.metrics.registerCounterGroup("libp2p_webrtc_dialer_events_total",{label:"event",help:"Total count of WebRTC dialer events by type"}),listenerEvents:e.metrics.registerCounterGroup("libp2p_webrtc_listener_events_total",{label:"event",help:"Total count of WebRTC listener events by type"})})}[D6]=!0;[Symbol.toStringTag]="@libp2p/webrtc";[yo]=["@libp2p/transport"];[em]=["@libp2p/identify","@libp2p/circuit-relay-v2-transport"];isStarted(){return this._started}async start(){await this.components.registrar.handle(JM,e=>{this._onProtocol(e).catch(r=>{this.log.error("failed to handle incoming connect from %p",e.connection.remotePeer,r)})},{runOnTransientConnection:!0}),this._started=!0}async stop(){await this.components.registrar.unhandle(JM),this._started=!1}createListener(e){return new BLt(this.components,{shutdownController:this.shutdownController})}listenFilter(e){return e.filter(pPt.exactMatch)}dialFilter(e){return this.listenFilter(e)}async dial(e,r){this.log.trace("dialing address: %a",e);const{remoteAddress:n,peerConnection:i,muxerFactory:s}=await PLt({rtcConfiguration:await XM(this.init.rtcConfiguration),dataChannel:this.init.dataChannel,multiaddr:e,dataChannelOptions:this.init.dataChannel,signal:r.signal,connectionManager:this.components.connectionManager,transportManager:this.components.transportManager,log:this.log,logger:this.components.logger,onProgress:r.onProgress}),a=new ZM(this.components,{peerConnection:i,timeline:{open:Date.now()},remoteAddr:n,metrics:this.metrics?.dialerEvents}),o=await r.upgrader.upgradeOutbound(a,{skipProtection:!0,skipEncryption:!0,muxerFactory:s,onProgress:r.onProgress});return this._closeOnShutdown(i,a),o}async _onProtocol({connection:e,stream:r}){const n=AbortSignal.timeout(this.init.inboundConnectionTimeout??MLt),i=new M9(await XM(this.init.rtcConfiguration)),s=new zz(this.components,{peerConnection:i,dataChannelOptions:this.init.dataChannel});try{const{remoteAddress:a}=await DLt({peerConnection:i,connection:e,stream:r,signal:n,log:this.log});await r.close({signal:n});const o=new ZM(this.components,{peerConnection:i,timeline:{open:new Date().getTime()},remoteAddr:a,metrics:this.metrics?.listenerEvents});await this.components.upgrader.upgradeInbound(o,{skipEncryption:!0,skipProtection:!0,muxerFactory:s}),this._closeOnShutdown(i,o)}catch(a){throw this.log.error("incoming signaling error",a),i.close(),r.abort(a),a}}_closeOnShutdown(e,r){const n=()=>{r.close().catch(i=>{this.log.error("could not close WebRTCMultiaddrConnection",i)})};this.shutdownController.signal.addEventListener("abort",n),e.addEventListener("close",()=>{this.shutdownController.signal.removeEventListener("abort",n)})}}function FLt(t){const e=t.toString().split(OLt+"/");if(e.length!==2)throw new ye("webrtc protocol was not present in multiaddr",jl.ERR_INVALID_MULTIADDR);if(!e[0].includes(NLt))throw new ye("p2p-circuit protocol was not present in multiaddr",jl.ERR_INVALID_MULTIADDR);let r=Wr(e[0]);const i=Wr("/"+e[1]).getPeerId();if(i==null)throw new ye("destination peer id was missing",jl.ERR_INVALID_MULTIADDR);const s=r.protos().pop();if(s===void 0)throw new ye("invalid multiaddr",jl.ERR_INVALID_MULTIADDR);return s.name!=="p2p"&&(r=r.encapsulate(`/p2p/${i}`)),{baseAddr:r,peerId:ti(i)}}const F4e=Object.values(tm).map(t=>t.decoder).reduce((t,e)=>t.or(e));function $Lt(t,e){const r=t.getConfiguration().certificates?.at(0);if(r?.getFingerprints==null){e.log.trace("fetching fingerprint from local SDP");const i=t.localDescription;return i==null?void 0:VLt(i.sdp)}if(e.log.trace("fetching fingerprint from local certificate"),r.getFingerprints().length===0)return;const n=r.getFingerprints()[0].value;if(n==null)throw B4e("","no fingerprint on local certificate");return n}const ULt=/^a=fingerprint:(?:\w+-[0-9]+)\s(?<fingerprint>(:?[0-9a-fA-F]{2})+)$/m;function VLt(t){return t.match(ULt)?.groups?.fingerprint}function jLt(t){for(const e of t.protoNames())if(e.startsWith("ip"))return e.toUpperCase();return"IP6"}function QM(t){const r=t.stringTuples().filter(n=>n[0]===YLt).map(n=>n[1])[0];if(r===void 0||r==="")throw P4e(`Couldn't find a certhash component of multiaddr: ${t.toString()}`);return r}function $4e(t){return c0(F4e.decode(t))}function zLt(t){const e=$4e(QM(t)),r=U4e(e.code),n=e.digest.reduce((s,a)=>s+a.toString(16).padStart(2,"0"),""),i=n.match(/.{1,2}/g);if(i==null)throw B4e(n,t.toString());return[`${r} ${i.join(":").toUpperCase()}`,n]}function U4e(t){switch(t){case 17:return"SHA-1";case 18:return"SHA-256";case 19:return"SHA-512";default:throw rLt(t)}}function qLt(t,e){const{host:r,port:n}=t.toOptions(),i=jLt(t),[s]=zLt(t);return`v=0
o=- 0 0 IN ${i} ${r}
s=-
c=IN ${i} ${r}
t=0 0
a=ice-lite
m=application ${n} UDP/DTLS/SCTP webrtc-datachannel
a=mid:0
a=setup:passive
a=ice-ufrag:${e}
a=ice-pwd:${e}
a=fingerprint:${s}
a=sctp-port:5000
a=max-message-size:${jz}
a=candidate:1467250027 1 UDP 1467250027 ${r} ${n} typ host\r
`}function HLt(t,e){return{type:"answer",sdp:qLt(t,e)}}function WLt(t,e){if(t.sdp===void 0)throw YM("Can't munge a missing SDP");return t.sdp=t.sdp.replace(/\na=ice-ufrag:[^\n]*\n/,`
a=ice-ufrag:`+e+`
`).replace(/\na=ice-pwd:[^\n]*\n/,`
a=ice-pwd:`+e+`
`),t}const Vse=Array.from("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),KLt=t=>[...Array(t)].map(()=>Vse.at(Math.floor(Math.random()*Vse.length))).join(""),GLt=1e4;Cr("webrtc-direct").code;const YLt=Cr("certhash").code;class XLt{log;metrics;components;init;constructor(e,r={}){this.log=e.logger.forComponent("libp2p:webrtc-direct"),this.components=e,this.init=r,e.metrics!=null&&(this.metrics={dialerEvents:e.metrics.registerCounterGroup("libp2p_webrtc-direct_dialer_events_total",{label:"event",help:"Total count of WebRTC-direct dial events by type"})})}[D6]=!0;[Symbol.toStringTag]="@libp2p/webrtc-direct";[yo]=["@libp2p/transport"];async dial(e,r){const n=await this._connect(e,r);return this.log("dialing address: %a",e),n}createListener(e){throw eLt("WebRTCTransport.createListener")}listenFilter(e){return e.filter(fPt.exactMatch)}dialFilter(e){return this.listenFilter(e)}async _connect(e,r){const n=new AbortController,i=n.signal,s=e.getPeerId();if(s===null)throw P4e("we need to have the remote's PeerId");const a=ti(s),o=$4e(QM(e)),c=await M9.generateCertificate({name:"ECDSA",namedCurve:"P-256",hash:U4e(o.code)}),l=new M9({...await XM(this.init.rtcConfiguration),certificates:[c]});try{const u=new Promise((M,N)=>{const Y=l.createDataChannel("",{negotiated:!0,id:0}),H=setTimeout(()=>{const E=`Data channel was never opened: state: ${Y.readyState}`;this.log.error(E),this.metrics?.dialerEvents.increment({open_error:!0}),N(Mse("data",E))},GLt);Y.onopen=E=>{clearTimeout(H),M(Y)},Y.onerror=E=>{clearTimeout(H);const w=`Error opening a data channel for handshaking: ${E.target?.toString()??"not specified"}`;this.log.error(w),this.metrics?.dialerEvents.increment({unknown_error:!0}),N(Mse("data",w))}}),f="libp2p+webrtc+v1/"+KLt(32),h=await l.createOffer(),d=WLt(h,f);await l.setLocalDescription(d);const g=HLt(e,f);await l.setRemoteDescription(g);const p=await u,m=this.components.peerId,y=this.generateNoisePrologue(l,o.code,e),v=n2({prologueBytes:y})(this.components),_=N9({channel:p,direction:"inbound",logger:this.components.logger,...this.init.dataChannel??{}}),x={..._,sink:_.sink.bind(_),source:async function*(){for await(const M of _.source)for(const N of M)yield N}()},A=new ZM(this.components,{peerConnection:l,remoteAddr:e,timeline:{open:Date.now()},metrics:this.metrics?.dialerEvents}),C=Vz?"iceconnectionstatechange":"connectionstatechange";l.addEventListener(C,()=>{switch(l.connectionState){case"failed":case"disconnected":case"closed":A.close().catch(M=>{this.log.error("error closing connection",M)}).finally(()=>{n.abort()});break;default:break}},{signal:i}),this.metrics?.dialerEvents.increment({peer_connection:!0});const R=new zz(this.components,{peerConnection:l,metrics:this.metrics?.dialerEvents,dataChannelOptions:this.init.dataChannel});return await v.secureInbound(m,x,a),await r.upgrader.upgradeOutbound(A,{skipProtection:!0,skipEncryption:!0,muxerFactory:R})}catch(u){throw l.close(),u}}generateNoisePrologue(e,r,n){if(e.getConfiguration().certificates?.length===0)throw YM("no local certificate");const i=$Lt(e,{log:this.log});if(i==null)throw YM("no local fingerprint found");const s=i.trim().toLowerCase().replaceAll(":",""),a=pt(s,"hex"),o=Jg(r,a),c=F4e.decode(QM(n)),l=pt("libp2p-webrtc-noise:");return Yi([l,o.bytes,c])}}function xT(t){return e=>new XLt(e,t)}function ET(t){return e=>new LLt(e,t)}const ZLt=async t=>{if(t.readyState>=2)throw new Error("socket closed");t.readyState!==1&&await new Promise((e,r)=>{function n(){t.removeEventListener("open",i),t.removeEventListener("error",s)}function i(){n(),e()}function s(a){n(),r(a.error??new Error(`connect ECONNREFUSED ${t.url}`))}t.addEventListener("open",i),t.addEventListener("error",s)})},JLt=(t,e)=>(e=e??{},e.closeOnEnd=e.closeOnEnd!==!1,async n=>{for await(const i of n){try{await ZLt(t)}catch(s){if(s.message==="socket closed")break;throw s}if(t.readyState===t.CLOSING||t.readyState===t.CLOSED)break;t.send(i)}e.closeOnEnd!=null&&t.readyState<=1&&await new Promise((i,s)=>{t.addEventListener("close",a=>{if(a.wasClean||a.code===1006)i();else{const o=Object.assign(new Error("ws error"),{event:a});s(o)}}),setTimeout(()=>{t.close()})})});var ST={},AT={};Object.defineProperty(AT,"__esModule",{value:!0});class QLt{constructor(){this.pullQueue=[],this.pushQueue=[],this.eventHandlers={},this.isPaused=!1,this.isStopped=!1}push(e){if(this.isStopped)return;const r={value:e,done:!1};if(this.pullQueue.length){const n=this.pullQueue.shift();n&&n.resolve(r)}else this.pushQueue.push(Promise.resolve(r)),this.highWaterMark!==void 0&&this.pushQueue.length>=this.highWaterMark&&!this.isPaused&&(this.isPaused=!0,this.eventHandlers.highWater?this.eventHandlers.highWater():console&&console.warn(`EventIterator queue reached ${this.pushQueue.length} items`))}stop(){if(!this.isStopped){this.isStopped=!0,this.remove();for(const e of this.pullQueue)e.resolve({value:void 0,done:!0});this.pullQueue.length=0}}fail(e){if(!this.isStopped)if(this.isStopped=!0,this.remove(),this.pullQueue.length){for(const r of this.pullQueue)r.reject(e);this.pullQueue.length=0}else{const r=Promise.reject(e);r.catch(()=>{}),this.pushQueue.push(r)}}remove(){Promise.resolve().then(()=>{this.removeCallback&&this.removeCallback()})}[Symbol.asyncIterator](){return{next:e=>{const r=this.pushQueue.shift();return r?(this.lowWaterMark!==void 0&&this.pushQueue.length<=this.lowWaterMark&&this.isPaused&&(this.isPaused=!1,this.eventHandlers.lowWater&&this.eventHandlers.lowWater()),r):this.isStopped?Promise.resolve({value:void 0,done:!0}):new Promise((n,i)=>{this.pullQueue.push({resolve:n,reject:i})})},return:()=>(this.isStopped=!0,this.pushQueue.length=0,this.remove(),Promise.resolve({value:void 0,done:!0}))}}}let V4e=class{constructor(e,{highWaterMark:r=100,lowWaterMark:n=1}={}){const i=new QLt;i.highWaterMark=r,i.lowWaterMark=n,i.removeCallback=e({push:s=>i.push(s),stop:()=>i.stop(),fail:s=>i.fail(s),on:(s,a)=>{i.eventHandlers[s]=a}})||(()=>{}),this[Symbol.asyncIterator]=()=>i[Symbol.asyncIterator](),Object.freeze(this)}};AT.EventIterator=V4e;AT.default=V4e;Object.defineProperty(ST,"__esModule",{value:!0});const qz=AT;var eFt=ST.EventIterator=qz.EventIterator;function tFt(t,e,r){return new qz.EventIterator(({push:n})=>(this.addEventListener(t,n,e),()=>this.removeEventListener(t,n,e)),r)}ST.subscribe=tFt;ST.default=qz.EventIterator;function jse(t){return t instanceof ArrayBuffer||t?.constructor?.name==="ArrayBuffer"&&typeof t?.byteLength=="number"}const rFt=t=>{t.binaryType="arraybuffer";const e=async()=>{await new Promise((s,a)=>{if(n){s();return}if(i!=null){a(i);return}const o=u=>{t.removeEventListener("open",c),t.removeEventListener("error",l),u()},c=()=>{o(s)},l=u=>{o(()=>{a(u.error??new Error(`connect ECONNREFUSED ${t.url}`))})};t.addEventListener("open",c),t.addEventListener("error",l)})},r=async function*(){const s=new eFt(({push:a,stop:o,fail:c})=>{const l=f=>{let h=null;typeof f.data=="string"&&(h=pt(f.data)),jse(f.data)&&(h=new Uint8Array(f.data)),f.data instanceof Uint8Array&&(h=f.data),h!=null&&a(h)},u=f=>{c(f.error??new Error("Socket error"))};return t.addEventListener("message",l),t.addEventListener("error",u),t.addEventListener("close",o),()=>{t.removeEventListener("message",l),t.removeEventListener("error",u),t.removeEventListener("close",o)}},{highWaterMark:1/0});await e();for await(const a of s)yield jse(a)?new Uint8Array(a):a}();let n=t.readyState===1,i;return t.addEventListener("open",()=>{n=!0,i=null}),t.addEventListener("close",()=>{n=!1,i=null}),t.addEventListener("error",s=>{n||(i=s.error??new Error(`connect ECONNREFUSED ${t.url}`))}),Object.assign(r,{connected:e})},nFt=(t,e)=>{e=e??{};const r=rFt(t);let n=e.remoteAddress,i=e.remotePort;if(t.url!=null)try{const a=new URL(t.url);n=a.hostname,i=parseInt(a.port,10)}catch{}if(n==null||i==null)throw new Error("Remote connection did not have address and/or port");return{sink:JLt(t,e),source:r,connected:async()=>{await r.connected()},close:async()=>{(t.readyState===t.CONNECTING||t.readyState===t.OPEN)&&await new Promise(a=>{t.addEventListener("close",()=>{a()}),t.close()})},destroy:()=>{t.terminate!=null?t.terminate():t.close()},remoteAddress:n,remotePort:i,socket:t}},iFt=WebSocket,sFt={"http:":"ws:","https:":"wss:"},zse="ws:",aFt=(t,e)=>{if(t.startsWith("//")&&(t=`${e?.protocol??zse}${t}`),t.startsWith("/")&&e!=null){const n=e.protocol??zse,i=e.host,s=e.port!=null&&i?.endsWith(`:${e.port}`)!==!0?`:${e.port}`:"";t=`${n}//${i}${s}${t}`}const r=new URL(t);for(const[n,i]of Object.entries(sFt))r.protocol===n&&(r.protocol=i);return r};function oFt(t,e){const r=typeof window>"u"?void 0:window.location;e=e??{};const n=aFt(t,r),i=new iFt(n.toString(),e.websocket);return nFt(i,e)}const j4e=421,z4e=290,cFt=500;function T8(t){return t.filter(e=>{if(e.protoCodes().includes(z4e))return!1;const r=e.decapsulateCode(j4e);return FM.matches(r)||T9.matches(r)})}function lFt(t){return t.filter(e=>{if(e.protoCodes().includes(z4e))return!1;const r=e.decapsulateCode(j4e);return T9.matches(r)})}function uFt(){throw new Error("WebSocket Servers can not be created in the browser!")}function fFt(t,e,r){const n=r.logger.forComponent("libp2p:websockets:maconn"),i=r.metrics,s=r.metricPrefix??"",a={log:n,async sink(o){try{await t.sink(async function*(){for await(const c of o)c instanceof Uint8Array?yield c:yield c.subarray()}())}catch(c){c.type!=="aborted"&&n.error(c)}},source:t.source,remoteAddr:e,timeline:{open:Date.now()},async close(o={}){const c=Date.now();if(o.signal==null){const u=AbortSignal.timeout(cFt);o={...o,signal:u}}const l=()=>{const{host:u,port:f}=a.remoteAddr.toOptions();n("timeout closing stream to %s:%s after %dms, destroying it manually",u,f,Date.now()-c),this.abort(new ye("Socket close timeout","ERR_SOCKET_CLOSE_TIMEOUT"))};o.signal?.addEventListener("abort",l);try{await t.close()}catch(u){n.error("error closing WebSocket gracefully",u),this.abort(u)}finally{o.signal?.removeEventListener("abort",l),a.timeline.close=Date.now()}},abort(o){const{host:c,port:l}=a.remoteAddr.toOptions();n("timeout closing stream to %s:%s due to error",c,l,o),t.destroy(),a.timeline.close=Date.now(),i?.increment({[`${s}error`]:!0})}};return t.socket.addEventListener("close",()=>{i?.increment({[`${s}close`]:!0}),a.timeline.close==null&&(a.timeline.close=Date.now())},{once:!0}),a}class hFt{log;init;logger;metrics;components;constructor(e,r){this.log=e.logger.forComponent("libp2p:websockets"),this.logger=e.logger,this.components=e,this.init=r,e.metrics!=null&&(this.metrics={dialerEvents:e.metrics.registerCounterGroup("libp2p_websockets_dialer_events_total",{label:"event",help:"Total count of WebSockets dialer events by type"})})}[D6]=!0;[Symbol.toStringTag]="@libp2p/websockets";[yo]=["@libp2p/transport"];async dial(e,r){this.log("dialing %s",e),r=r??{};const n=await this._connect(e,r),i=fFt(n,e,{logger:this.logger,metrics:this.metrics?.dialerEvents});this.log("new outbound connection %s",i.remoteAddr);const s=await r.upgrader.upgradeOutbound(i,r);return this.log("outbound connection %s upgraded",i.remoteAddr),s}async _connect(e,r){r?.signal?.throwIfAborted();const n=e.toOptions();this.log("dialing %s:%s",n.host,n.port);const i=fn(),s=oFt(P3e(e),this.init);s.socket.addEventListener("error",()=>{const a=new ye(`Could not connect to ${e.toString()}`,"ERR_CONNECTION_FAILED");this.log.error("connection error:",a),this.metrics?.dialerEvents.increment({error:!0}),i.reject(a)});try{r.onProgress?.(new Bt("websockets:open-connection")),await ma(Promise.race([s.connected(),i.promise]),r.signal)}catch(a){throw r.signal?.aborted===!0&&this.metrics?.dialerEvents.increment({abort:!0}),s.close().catch(o=>{this.log.error("error closing raw socket",o)}),a}return this.log("connected %s",e),this.metrics?.dialerEvents.increment({connect:!0}),s}createListener(e){return uFt({logger:this.logger,metrics:this.components.metrics},{...this.init,...e})}listenFilter(e){return e=Array.isArray(e)?e:[e],this.init?.filter!=null?this.init?.filter(e):n6||mS?lFt(e):T8(e)}dialFilter(e){return this.listenFilter(e)}}function k8(t={}){return e=>new hFt(e,t)}function dFt(t){throw new Error("Not implemented")}class pFt extends yT{writer;reader;constructor(e){super(e),this.writer=e.bidiStream.writable.getWriter(),this.reader=e.bidiStream.readable.getReader(),Promise.resolve().then(async()=>{for(;;){const r=await this.reader.read();if(r.done){e.log("remote closed write");return}r.value!=null&&this.sourcePush(new Pn(r.value))}}).catch(r=>{e.log.error("error reading from stream",r),this.abort(r)}).finally(()=>{this.remoteCloseWrite()}),this.writer.closed.then(()=>{e.log("writer closed")}).catch(r=>{e.log("writer close promise rejected",r)}).finally(()=>{this.remoteCloseRead()})}sendNewStream(e){}async sendData(e,r){for await(const n of e)this.log("sendData waiting for writer to be ready"),await ma(this.writer.ready,r?.signal),this.writer.write(n).catch(i=>{this.log.error("error sending stream data",i)})}async sendReset(e){this.log("sendReset aborting writer"),await ma(this.writer.abort(),e?.signal),this.log("sendReset aborted writer")}async sendCloseWrite(e){this.log("sendCloseWrite closing writer"),await ma(this.writer.close(),e?.signal),this.log("sendCloseWrite closed writer")}async sendCloseRead(e){this.log("sendCloseRead cancelling reader"),await ma(this.reader.cancel(),e?.signal),this.log("sendCloseRead cancelled reader")}}async function qse(t,e,r,n,i,s){const a=s.forComponent(`libp2p:webtransport:stream:${r}:${e}`),o=new pFt({bidiStream:t,id:e,direction:r,log:a,onEnd:()=>{const c=n.findIndex(l=>l===o);c!==-1&&n.splice(c,1),i?.(o)}});return o}function q4e(){return{source:{[Symbol.asyncIterator](){return{async next(){return new Promise(()=>{})}}}},sink:async t=>new Promise(()=>{})}}function gFt(t,e,r,n){let i=0;const s=r.forComponent("libp2p:webtransport:muxer");return{protocol:"webtransport",createStreamMuxer:a=>{typeof a=="function"&&(a={onIncomingStream:a});const o=[];Promise.resolve().then(async()=>{//! TODO unclear how to add backpressure here?
for(;;){const{done:l,value:u}=await e.read();if(l)break;if(o.length>=n.maxInboundStreams)s(`too many inbound streams open - ${o.length}/${n.maxInboundStreams}, closing new incoming stream`),u.writable.close().catch(f=>{s.error(`failed to close inbound stream that crossed our maxInboundStream limit: ${f.message}`)}),u.readable.cancel().catch(f=>{s.error(`failed to close inbound stream that crossed our maxInboundStream limit: ${f.message}`)});else{const f=await qse(u,String(i++),"inbound",o,a?.onStreamEnd,r);o.push(f),a?.onIncomingStream?.(f)}}}).catch(l=>{s.error("could not create a new stream",l)});const c={protocol:"webtransport",streams:o,newStream:async l=>{s("new outgoing stream",l);const u=await t.createBidirectionalStream(),f=await qse(u,String(i++),a?.direction??"outbound",o,a?.onStreamEnd,r);return o.push(f),f},close:async()=>{s("closing webtransport muxer gracefully");try{t.close()}catch(l){c.abort(l)}},abort:l=>{s("closing webtransport muxer with err:",l);try{t.close()}catch(u){s.error("webtransport session threw error during close",u)}},...q4e()};return c}}}function mFt(t,e){return e.filter(n=>!!t.find(i=>Kr(n,i))).length===e.length}const yFt=Object.values(tm).map(t=>t.decoder).reduce((t,e)=>t.or(e));function vFt(t){return c0(yFt.decode(t))}function Hse(t){if(!I3e.matches(t))throw new ye("Invalid multiaddr, was not a WebTransport address","ERR_INVALID_MULTIADDR");const e=t.stringTuples(),r=e.filter(([a,o])=>a===Cr("certhash").code).map(([a,o])=>vFt(o??"")),n=e.filter(([a,o])=>a===Cr("p2p").code).map(([a,o])=>ti(o??""))[0],i=t.toOptions();let s=i.host;return i.family===6&&s?.includes(":")&&(s=`[${s}]`),{url:`https://${s}:${i.port}`,certhashes:r,remotePeer:n}}const bFt=globalThis.WebTransport;class wFt{log;components;config;metrics;constructor(e,r={}){this.log=e.logger.forComponent("libp2p:webtransport"),this.components=e,this.config={...r,maxInboundStreams:r.maxInboundStreams??1e3,certificates:r.certificates??[]},e.metrics!=null&&(this.metrics={dialerEvents:e.metrics.registerCounterGroup("libp2p_webtransport_dialer_events_total",{label:"event",help:"Total count of WebTransport dialer events by type"})})}[Symbol.toStringTag]="@libp2p/webtransport";[D6]=!0;[yo]=["@libp2p/transport"];async dial(e,r){if(r?.signal?.aborted===!0)throw new sA;this.log("dialing %s",e);const n=this.components.peerId;if(n===void 0)throw new ye("Need a local peerid","ERR_INVALID_PARAMETERS");r=r??{};const{url:i,certhashes:s,remotePeer:a}=Hse(e);let o,c,l=()=>{},u=!1,f=!1,h=!1;try{this.metrics?.dialerEvents.increment({pending:!0});const d=new bFt(`${i}/.well-known/libp2p-webtransport?type=noise`,{serverCertificateHashes:s.map(g=>({algorithm:"sha-256",value:g.digest}))});if(l=g=>{if(!u)try{this.metrics?.dialerEvents.increment({[g]:!0}),d.close()}catch(p){this.log.error("error closing wt session",p)}finally{c!=null&&(c.timeline.close=Date.now()),u=!0}},o=()=>{l(f?"noise_timeout":"ready_timeout")},r.signal?.addEventListener("abort",o,{once:!0}),this.log("wait for session to be ready"),r.onProgress?.(new Bt("webtransport:wait-for-session")),await Promise.race([d.closed,d.ready]),this.log("session became ready"),f=!0,this.metrics?.dialerEvents.increment({ready:!0}),d.closed.catch(g=>{this.log.error("error on remote wt session close",g)}).finally(()=>{l("remote_close")}),h=await ma(this.authenticateWebTransport({wt:d,localPeer:n,remotePeer:a,certhashes:s,...r}),r.signal),!h)throw new ye("Failed to authenticate webtransport","ERR_AUTHENTICATION_FAILED");return this.metrics?.dialerEvents.increment({open:!0}),c={close:async()=>{this.log("closing webtransport"),l("close")},abort:g=>{this.log("aborting webtransport due to passed err",g),l("abort")},remoteAddr:e,timeline:{open:Date.now()},log:this.components.logger.forComponent("libp2p:webtransport:maconn"),...q4e()},await r.upgrader.upgradeOutbound(c,{skipEncryption:!0,muxerFactory:gFt(d,d.incomingBidirectionalStreams.getReader(),this.components.logger,this.config),skipProtection:!0,onProgress:r.onProgress})}catch(d){throw this.log.error("caught wt session err",d),l(h?"upgrade_error":f?"noise_error":"ready_error"),d}finally{o!=null&&r.signal?.removeEventListener("abort",o)}}async authenticateWebTransport({wt:e,localPeer:r,remotePeer:n,certhashes:i,onProgress:s,signal:a}){a?.throwIfAborted(),s?.(new Bt("webtransport:open-authentication-stream"));const o=await e.createBidirectionalStream(),c=o.writable.getWriter(),l=o.readable.getReader(),u={source:async function*(){for(;;){const d=await l.read();if(d.value!=null&&(yield d.value),d.done)break}}(),sink:async d=>{for await(const g of d){await ma(c.ready,a);const p=g instanceof Uint8Array?g:g.subarray();c.write(p).catch(m=>{this.log.error("could not write chunk during authentication of WebTransport stream",m)})}}},f=n2()(this.components);s?.(new Bt("webtransport:secure-outbound-connection"));const{remoteExtensions:h}=await f.secureOutbound(r,u,n);if(s?.(new Bt("webtransport:close-authentication-stream")),c.close().catch(d=>{this.log.error(`Failed to close authentication stream writer: ${d.message}`)}),l.cancel().catch(d=>{this.log.error(`Failed to close authentication stream reader: ${d.message}`)}),!mFt(h?.webtransportCerthashes??[],i.map(d=>d.bytes)))throw new Error("Our certhashes are not a subset of the remote's reported certhashes");return!0}createListener(e){return dFt(this.components,{...e,certificates:this.config.certificates,maxInboundStreams:this.config.maxInboundStreams})}listenFilter(){return[]}dialFilter(e){return globalThis.WebTransport==null?[]:e.filter(r=>{if(!I3e.exactMatch(r))return!1;const{url:n,certhashes:i}=Hse(r);return n!=null&&i.length>0})}}function C8(t={}){return e=>new wFt(e,t)}function _Ft(t,e){const r=e.map((n,i)=>({record:b8(n),index:i}));return r.sort((n,i)=>{const s=n.record.sequence,a=i.record.sequence;if(s>a)return-1;if(s<a)return 1;if(n.record.validityType===Uu.ValidityType.EOL&&i.record.validityType===Uu.ValidityType.EOL){const o=BM.fromString(n.record.validity).toDate(),c=BM.fromString(i.record.validity).toDate();if(o.getTime()>c.getTime())return-1;if(o.getTime()<c.getTime())return 1}return 0}),r[0].index}const H4e="1.9.4",W4e="libp2p",xFt="4.2.6",EFt="helia",SFt={list:["/dnsaddr/bootstrap.libp2p.io/p2p/QmNnooDu7bfjPFoTZYxMNLWUQJyrVwtbZg5gBMjTezGAJN","/dnsaddr/bootstrap.libp2p.io/p2p/QmbLHAnMoJPWSCR5Zhtx6BHJX9KiKNN6tpvbUcqanj75Nb","/dnsaddr/bootstrap.libp2p.io/p2p/QmcZf59bWwK5XFi76CZX8cbJ4BhTzzA3gU1ZjYZcYW3dwt","/ip4/104.131.131.82/tcp/4001/p2p/QmaCpDMGvV2BGHeYERUEnRQAwe3N8SzbUtfsmvsqQLuvuJ"]};function AFt(t={}){const e=`${EFt}/${xFt} ${W4e}/${H4e} UserAgent=${globalThis.navigator.userAgent}`;return{peerId:t.peerId,dns:t.dns,addresses:{listen:["/webrtc"]},transports:[E8({discoverRelays:1}),ET(),xT(),C8(),k8()],connectionEncryption:[n2()],streamMuxers:[_8(),UMt()],peerDiscovery:[x8(SFt)],services:{autoNAT:vT(),dcutr:_T(),delegatedRouting:()=>qPt("https://delegated-ipfs.dev"),dht:$z({clientMode:!0,validators:{ipns:U3e},selectors:{ipns:_Ft}}),identify:S8({agentVersion:e}),identifyPush:$Ot({agentVersion:e}),keychain:C4e(t.keychain),ping:GMt()}}}const TFt=async()=>{const t=await Ywe("Ed25519"),e=await kFt(t);if(e.type==="Ed25519")return e;throw new Error(`Generated unexpected PeerId type "${e.type}"`)};async function kFt(t){return Yu(wz(t.public),JCt(t))}const Xc={ERR_INVALID_PARAMETERS:"ERR_INVALID_PARAMETERS"};var L9;(function(t){(function(r){let n;r.codec=()=>(n==null&&(n=Xr((i,s,a={})=>{a.lengthDelimited!==!1&&s.fork(),i.key!=null&&i.key!==""&&(s.uint32(10),s.string(i.key)),i.value!=null&&i.value.byteLength>0&&(s.uint32(18),s.bytes(i.value)),a.lengthDelimited!==!1&&s.ldelim()},(i,s)=>{const a={key:"",value:new Uint8Array(0)},o=s==null?i.len:i.pos+s;for(;i.pos<o;){const c=i.uint32();switch(c>>>3){case 1:a.key=i.string();break;case 2:a.value=i.bytes();break;default:i.skipType(c&7);break}}return a})),n),r.encode=i=>Yr(i,r.codec()),r.decode=i=>Gr(i,r.codec())})(t.Peer$metadataEntry||(t.Peer$metadataEntry={})),function(r){let n;r.codec=()=>(n==null&&(n=Xr((i,s,a={})=>{a.lengthDelimited!==!1&&s.fork(),i.key!=null&&i.key!==""&&(s.uint32(10),s.string(i.key)),i.value!=null&&(s.uint32(18),$9.codec().encode(i.value,s)),a.lengthDelimited!==!1&&s.ldelim()},(i,s)=>{const a={key:""},o=s==null?i.len:i.pos+s;for(;i.pos<o;){const c=i.uint32();switch(c>>>3){case 1:a.key=i.string();break;case 2:a.value=$9.codec().decode(i,i.uint32());break;default:i.skipType(c&7);break}}return a})),n),r.encode=i=>Yr(i,r.codec()),r.decode=i=>Gr(i,r.codec())}(t.Peer$tagsEntry||(t.Peer$tagsEntry={}));let e;t.codec=()=>(e==null&&(e=Xr((r,n,i={})=>{if(i.lengthDelimited!==!1&&n.fork(),r.addresses!=null)for(const s of r.addresses)n.uint32(10),F9.codec().encode(s,n);if(r.protocols!=null)for(const s of r.protocols)n.uint32(18),n.string(s);if(r.publicKey!=null&&(n.uint32(34),n.bytes(r.publicKey)),r.peerRecordEnvelope!=null&&(n.uint32(42),n.bytes(r.peerRecordEnvelope)),r.metadata!=null&&r.metadata.size!==0)for(const[s,a]of r.metadata.entries())n.uint32(50),t.Peer$metadataEntry.codec().encode({key:s,value:a},n);if(r.tags!=null&&r.tags.size!==0)for(const[s,a]of r.tags.entries())n.uint32(58),t.Peer$tagsEntry.codec().encode({key:s,value:a},n);i.lengthDelimited!==!1&&n.ldelim()},(r,n)=>{const i={addresses:[],protocols:[],metadata:new Map,tags:new Map},s=n==null?r.len:r.pos+n;for(;r.pos<s;){const a=r.uint32();switch(a>>>3){case 1:i.addresses.push(F9.codec().decode(r,r.uint32()));break;case 2:i.protocols.push(r.string());break;case 4:i.publicKey=r.bytes();break;case 5:i.peerRecordEnvelope=r.bytes();break;case 6:{const o=t.Peer$metadataEntry.codec().decode(r,r.uint32());i.metadata.set(o.key,o.value);break}case 7:{const o=t.Peer$tagsEntry.codec().decode(r,r.uint32());i.tags.set(o.key,o.value);break}default:r.skipType(a&7);break}}return i})),e),t.encode=r=>Yr(r,t.codec()),t.decode=r=>Gr(r,t.codec())})(L9||(L9={}));var F9;(function(t){let e;t.codec=()=>(e==null&&(e=Xr((r,n,i={})=>{i.lengthDelimited!==!1&&n.fork(),r.multiaddr!=null&&r.multiaddr.byteLength>0&&(n.uint32(10),n.bytes(r.multiaddr)),r.isCertified!=null&&(n.uint32(16),n.bool(r.isCertified)),i.lengthDelimited!==!1&&n.ldelim()},(r,n)=>{const i={multiaddr:new Uint8Array(0)},s=n==null?r.len:r.pos+n;for(;r.pos<s;){const a=r.uint32();switch(a>>>3){case 1:i.multiaddr=r.bytes();break;case 2:i.isCertified=r.bool();break;default:r.skipType(a&7);break}}return i})),e),t.encode=r=>Yr(r,t.codec()),t.decode=r=>Gr(r,t.codec())})(F9||(F9={}));var $9;(function(t){let e;t.codec=()=>(e==null&&(e=Xr((r,n,i={})=>{i.lengthDelimited!==!1&&n.fork(),r.value!=null&&r.value!==0&&(n.uint32(8),n.uint32(r.value)),r.expiry!=null&&(n.uint32(16),n.uint64(r.expiry)),i.lengthDelimited!==!1&&n.ldelim()},(r,n)=>{const i={value:0},s=n==null?r.len:r.pos+n;for(;r.pos<s;){const a=r.uint32();switch(a>>>3){case 1:i.value=r.uint32();break;case 2:i.expiry=r.uint64();break;default:r.skipType(a&7);break}}return i})),e),t.encode=r=>Yr(r,t.codec()),t.decode=r=>Gr(r,t.codec())})($9||($9={}));function r3(t,e){const r=L9.decode(e);r.publicKey!=null&&t.publicKey==null&&(t=Mkt({...t,publicKey:t.publicKey}));const n=new Map,i=BigInt(Date.now());for(const[s,a]of r.tags.entries())a.expiry!=null&&a.expiry<i||n.set(s,a);return{...r,id:t,addresses:r.addresses.map(({multiaddr:s,isCertified:a})=>({multiaddr:Wr(s),isCertified:a??!1})),metadata:r.metadata,peerRecordEnvelope:r.peerRecordEnvelope??void 0,tags:n}}const K4e="/peers/";function Mw(t){if(!iA(t)||t.type==null)throw new ye("Invalid PeerId",Xc.ERR_INVALID_PARAMETERS);const e=t.toCID().toString();return new Ni(`${K4e}${e}`)}async function CFt(t,e,r){const n=new Map;for(const i of r){if(i==null)continue;if(i.multiaddr instanceof Uint8Array&&(i.multiaddr=Wr(i.multiaddr)),!cT(i.multiaddr))throw new ye("Multiaddr was invalid",Xc.ERR_INVALID_PARAMETERS);if(!await e(t,i.multiaddr))continue;const s=i.isCertified??!1,a=i.multiaddr.toString(),o=n.get(a);o!=null?i.isCertified=o.isCertified||s:n.set(a,{multiaddr:i.multiaddr,isCertified:s})}return[...n.values()].sort((i,s)=>i.multiaddr.toString().localeCompare(s.multiaddr.toString())).map(({isCertified:i,multiaddr:s})=>({isCertified:i,multiaddr:s.bytes}))}async function rD(t,e,r,n){if(e==null)throw new ye("Invalid PeerData",Xc.ERR_INVALID_PARAMETERS);if(e.publicKey!=null&&t.publicKey!=null&&!Kr(e.publicKey,t.publicKey))throw new ye("publicKey bytes do not match peer id publicKey bytes",Xc.ERR_INVALID_PARAMETERS);const i=n.existingPeer;if(i!=null&&!t.equals(i.id))throw new ye("peer id did not match existing peer id",Xc.ERR_INVALID_PARAMETERS);let s=i?.addresses??[],a=new Set(i?.protocols??[]),o=i?.metadata??new Map,c=i?.tags??new Map,l=i?.peerRecordEnvelope;if(r==="patch"){if((e.multiaddrs!=null||e.addresses!=null)&&(s=[],e.multiaddrs!=null&&s.push(...e.multiaddrs.map(f=>({isCertified:!1,multiaddr:f}))),e.addresses!=null&&s.push(...e.addresses)),e.protocols!=null&&(a=new Set(e.protocols)),e.metadata!=null){const f=e.metadata instanceof Map?[...e.metadata.entries()]:Object.entries(e.metadata);o=fx(f,{validate:Wse})}if(e.tags!=null){const f=e.tags instanceof Map?[...e.tags.entries()]:Object.entries(e.tags);c=fx(f,{validate:Kse,map:Gse})}e.peerRecordEnvelope!=null&&(l=e.peerRecordEnvelope)}if(r==="merge"){if(e.multiaddrs!=null&&s.push(...e.multiaddrs.map(f=>({isCertified:!1,multiaddr:f}))),e.addresses!=null&&s.push(...e.addresses),e.protocols!=null&&(a=new Set([...a,...e.protocols])),e.metadata!=null){const f=e.metadata instanceof Map?[...e.metadata.entries()]:Object.entries(e.metadata);for(const[h,d]of f)d==null?o.delete(h):o.set(h,d);o=fx([...o.entries()],{validate:Wse})}if(e.tags!=null){const f=e.tags instanceof Map?[...e.tags.entries()]:Object.entries(e.tags),h=new Map(c);for(const[d,g]of f)g==null?h.delete(d):h.set(d,g);c=fx([...h.entries()],{validate:Kse,map:Gse})}e.peerRecordEnvelope!=null&&(l=e.peerRecordEnvelope)}const u={addresses:await CFt(t,n.addressFilter??(async()=>!0),s),protocols:[...a.values()].sort((f,h)=>f.localeCompare(h)),metadata:o,tags:c,publicKey:i?.id.publicKey??e.publicKey??t.publicKey,peerRecordEnvelope:l};return t.type!=="RSA"&&delete u.publicKey,u}function fx(t,e){const r=new Map;for(const[n,i]of t)i!=null&&e.validate(n,i);for(const[n,i]of t.sort(([s],[a])=>s.localeCompare(a)))i!=null&&r.set(n,e.map?.(n,i)??i);return r}function Wse(t,e){if(typeof t!="string")throw new ye("Metadata key must be a string",Xc.ERR_INVALID_PARAMETERS);if(!(e instanceof Uint8Array))throw new ye("Metadata value must be a Uint8Array",Xc.ERR_INVALID_PARAMETERS)}function Kse(t,e){if(typeof t!="string")throw new ye("Tag name must be a string",Xc.ERR_INVALID_PARAMETERS);if(e.value!=null){if(parseInt(`${e.value}`,10)!==e.value)throw new ye("Tag value must be an integer",Xc.ERR_INVALID_PARAMETERS);if(e.value<0||e.value>100)throw new ye("Tag value must be between 0-100",Xc.ERR_INVALID_PARAMETERS)}if(e.ttl!=null){if(parseInt(`${e.ttl}`,10)!==e.ttl)throw new ye("Tag ttl must be an integer",Xc.ERR_INVALID_PARAMETERS);if(e.ttl<0)throw new ye("Tag ttl must be between greater than 0",Xc.ERR_INVALID_PARAMETERS)}}function Gse(t,e){let r;return e.expiry!=null&&(r=e.expiry),e.ttl!=null&&(r=BigInt(Date.now()+Number(e.ttl))),{value:e.value??0,expiry:r}}function t7(t,e,r){const n=t.toString().split("/")[2],i=Ho.decode(n),s=ul(i),a=r.get(s);if(a!=null)return a;const o=r3(s,e);return r.set(s,o),o}function IFt(t,e){return t==null?{}:{prefix:K4e,filters:(t.filters??[]).map(r=>({key:n,value:i})=>r(t7(n,i,e))),orders:(t.orders??[]).map(r=>(n,i)=>r(t7(n.key,n.value,e),t7(i.key,i.value,e)))}}class RFt{peerId;datastore;lock;addressFilter;constructor(e,r={}){this.peerId=e.peerId,this.datastore=e.datastore,this.addressFilter=r.addressFilter,this.lock=c3e({name:"peer-store",singleProcess:!0})}async has(e){return this.datastore.has(Mw(e))}async delete(e){if(this.peerId.equals(e))throw new ye("Cannot delete self peer",Xc.ERR_INVALID_PARAMETERS);await this.datastore.delete(Mw(e))}async load(e){const r=await this.datastore.get(Mw(e));return r3(e,r)}async save(e,r){const{existingBuf:n,existingPeer:i}=await this.#e(e),s=await rD(e,r,"patch",{addressFilter:this.addressFilter});return this.#t(e,s,n,i)}async patch(e,r){const{existingBuf:n,existingPeer:i}=await this.#e(e),s=await rD(e,r,"patch",{addressFilter:this.addressFilter,existingPeer:i});return this.#t(e,s,n,i)}async merge(e,r){const{existingBuf:n,existingPeer:i}=await this.#e(e),s=await rD(e,r,"merge",{addressFilter:this.addressFilter,existingPeer:i});return this.#t(e,s,n,i)}async*all(e){const r=new y0;for await(const{key:n,value:i}of this.datastore.query(IFt(e??{},r))){const s=t7(n,i,r);s.id.equals(this.peerId)||(yield s)}}async#e(e){try{const r=await this.datastore.get(Mw(e)),n=r3(e,r);return{existingBuf:r,existingPeer:n}}catch(r){if(r.code!=="ERR_NOT_FOUND")throw r}return{}}async#t(e,r,n,i){const s=L9.encode(r);return n!=null&&Kr(s,n)?{peer:r3(e,s),previous:i,updated:!1}:(await this.datastore.put(Mw(e),s),{peer:r3(e,s),previous:i,updated:!0})}}class PFt{store;events;peerId;log;constructor(e,r={}){this.log=e.logger.forComponent("libp2p:peer-store"),this.events=e.events,this.peerId=e.peerId,this.store=new RFt(e,r)}[Symbol.toStringTag]="@libp2p/peer-store";async forEach(e,r){this.log.trace("forEach await read lock");const n=await this.store.lock.readLock();this.log.trace("forEach got read lock");try{for await(const i of this.store.all(r))e(i)}finally{this.log.trace("forEach release read lock"),n()}}async all(e){this.log.trace("all await read lock");const r=await this.store.lock.readLock();this.log.trace("all got read lock");try{return await QE(this.store.all(e))}finally{this.log.trace("all release read lock"),r()}}async delete(e){this.log.trace("delete await write lock");const r=await this.store.lock.writeLock();this.log.trace("delete got write lock");try{await this.store.delete(e)}finally{this.log.trace("delete release write lock"),r()}}async has(e){this.log.trace("has await read lock");const r=await this.store.lock.readLock();this.log.trace("has got read lock");try{return await this.store.has(e)}finally{this.log.trace("has release read lock"),r()}}async get(e){this.log.trace("get await read lock");const r=await this.store.lock.readLock();this.log.trace("get got read lock");try{return await this.store.load(e)}finally{this.log.trace("get release read lock"),r()}}async save(e,r){this.log.trace("save await write lock");const n=await this.store.lock.writeLock();this.log.trace("save got write lock");try{const i=await this.store.save(e,r);return this.#e(e,i),i.peer}finally{this.log.trace("save release write lock"),n()}}async patch(e,r){this.log.trace("patch await write lock");const n=await this.store.lock.writeLock();this.log.trace("patch got write lock");try{const i=await this.store.patch(e,r);return this.#e(e,i),i.peer}finally{this.log.trace("patch release write lock"),n()}}async merge(e,r){this.log.trace("merge await write lock");const n=await this.store.lock.writeLock();this.log.trace("merge got write lock");try{const i=await this.store.merge(e,r);return this.#e(e,i),i.peer}finally{this.log.trace("merge release write lock"),n()}}async consumePeerRecord(e,r){const n=await nh.openAndCertify(e,el.DOMAIN);if(r?.equals(n.peerId)===!1)return this.log("envelope peer id was not the expected peer id - expected: %p received: %p",r,n.peerId),!1;const i=el.createFromProtobuf(n.payload);let s;try{s=await this.get(n.peerId)}catch(a){if(a.code!=="ERR_NOT_FOUND")throw a}if(s?.peerRecordEnvelope!=null){const a=await nh.createFromProtobuf(s.peerRecordEnvelope),o=el.createFromProtobuf(a.payload);if(o.seqNumber>=i.seqNumber)return this.log("sequence number was lower or equal to existing sequence number - stored: %d received: %d",o.seqNumber,i.seqNumber),!1}return await this.patch(i.peerId,{peerRecordEnvelope:e,addresses:i.multiaddrs.map(a=>({isCertified:!0,multiaddr:a}))}),!0}#e(e,r){r.updated&&(this.peerId.equals(e)?this.events.safeDispatchEvent("self:peer:update",{detail:r}):this.events.safeDispatchEvent("peer:update",{detail:r}))}}function BFt(t,e){let r;return function(){const n=function(){r=void 0,t()};clearTimeout(r),r=setTimeout(n,e)}}const DFt=t=>t;function nD(t,e){const r=t.getPeerId();return r!=null&&ti(r).equals(e)&&(t=t.decapsulate(Wr(`/p2p/${e.toString()}`))),t}class OFt{log;components;listen;announce;observed;announceFilter;constructor(e,r={}){const{listen:n=[],announce:i=[]}=r;this.components=e,this.log=e.logger.forComponent("libp2p:address-manager"),this.listen=n.map(s=>s.toString()),this.announce=new Set(i.map(s=>s.toString())),this.observed=new Map,this.announceFilter=r.announceFilter??DFt,this._updatePeerStoreAddresses=BFt(this._updatePeerStoreAddresses.bind(this),1e3),e.events.addEventListener("transport:listening",()=>{this._updatePeerStoreAddresses()}),e.events.addEventListener("transport:close",()=>{this._updatePeerStoreAddresses()})}[Symbol.toStringTag]="@libp2p/address-manager";_updatePeerStoreAddresses(){const e=this.getAnnounceAddrs().concat(this.components.transportManager.getAddrs()).concat([...this.observed.entries()].filter(([r,n])=>n.confident).map(([r])=>Wr(r))).map(r=>r.getPeerId()===this.components.peerId.toString()?r.decapsulate(`/p2p/${this.components.peerId.toString()}`):r);this.components.peerStore.patch(this.components.peerId,{multiaddrs:e}).catch(r=>{this.log.error("error updating addresses",r)})}getListenAddrs(){return Array.from(this.listen).map(e=>Wr(e))}getAnnounceAddrs(){return Array.from(this.announce).map(e=>Wr(e))}getObservedAddrs(){return Array.from(this.observed).map(([e])=>Wr(e))}addObservedAddr(e){e=nD(e,this.components.peerId);const r=e.toString();this.observed.has(r)||this.observed.set(r,{confident:!1})}confirmObservedAddr(e){e=nD(e,this.components.peerId);const r=e.toString(),i=(this.observed.get(r)??{confident:!1}).confident;this.observed.set(r,{confident:!0}),i||this._updatePeerStoreAddresses()}removeObservedAddr(e){e=nD(e,this.components.peerId);const r=e.toString();this.observed.delete(r)}getAddresses(){let e=this.getAnnounceAddrs().map(n=>n.toString());e.length===0&&(e=this.components.transportManager.getAddrs().map(n=>n.toString())),e=e.concat(Array.from(this.observed).filter(([n,i])=>i.confident).map(([n])=>n));const r=new Set(e);return this.announceFilter(Array.from(r).map(n=>Wr(n))).map(n=>n.protos().pop()?.path===!0||n.getPeerId()===this.components.peerId.toString()?n:n.encapsulate(`/p2p/${this.components.peerId.toString()}`))}}class NFt{components={};_started=!1;constructor(e={}){this.components={};for(const[r,n]of Object.entries(e))this.components[r]=n;this.components.logger==null&&(this.components.logger=tT())}isStarted(){return this._started}async _invokeStartableMethod(e){await Promise.all(Object.values(this.components).filter(r=>Z$(r)).map(async r=>{await r[e]?.()}))}async beforeStart(){await this._invokeStartableMethod("beforeStart")}async start(){await this._invokeStartableMethod("start"),this._started=!0}async afterStart(){await this._invokeStartableMethod("afterStart")}async beforeStop(){await this._invokeStartableMethod("beforeStop")}async stop(){await this._invokeStartableMethod("stop"),this._started=!1}async afterStop(){await this._invokeStartableMethod("afterStop")}}const MFt=["metrics","connectionProtector","dns"],LFt=["components","isStarted","beforeStart","start","afterStart","beforeStop","stop","afterStop","then","_invokeStartableMethod"];function FFt(t={}){const e=new NFt(t);return new Proxy(e,{get(n,i,s){if(typeof i=="string"&&!LFt.includes(i)){const a=e.components[i];if(a==null&&!MFt.includes(i))throw new ye(`${i} not set`,"ERR_SERVICE_MISSING");return a}return Reflect.get(n,i,s)},set(n,i,s){return typeof i=="string"?e.components[i]=s:Reflect.set(n,i,s),!0}})}function $Ft(t){const e={};for(const r of Object.values(t.components))for(const n of UFt(r))e[n]=!0;for(const r of Object.values(t.components))for(const n of VFt(r))if(e[n]!==!0)throw new ye(`Service "${jFt(r)}" required capability "${n}" but it was not provided by any component, you may need to add additional configuration when creating your node.`,"ERR_UNMET_SERVICE_DEPENDENCIES")}function UFt(t){return Array.isArray(t?.[yo])?t[yo]:[]}function VFt(t){return Array.isArray(t?.[em])?t[em]:[]}function jFt(t){return t?.[Symbol.toStringTag]??t?.toString()??"unknown"}function zFt(t={}){return{denyDialPeer:async()=>!1,denyDialMultiaddr:async e=>{const r=e.stringTuples();return r[0][0]===4||r[0][0]===41?!!K1(`${r[0][1]}`):!1},denyInboundConnection:async()=>!1,denyOutboundConnection:async()=>!1,denyInboundEncryptedConnection:async()=>!1,denyOutboundEncryptedConnection:async()=>!1,denyInboundUpgradedConnection:async()=>!1,denyOutboundUpgradedConnection:async()=>!1,filterMultiaddrForPeer:async()=>!0,...t}}function Yse(t){try{const{address:e}=t.nodeAddress();return!!K1(e)}catch{return!0}}function qFt(t,e){const r=Yse(t.multiaddr),n=Yse(e.multiaddr);return r&&!n?1:!r&&n?-1:0}function HFt(t,e){return t.isCertified&&!e.isCertified?-1:!t.isCertified&&e.isCertified?1:0}function WFt(t,e){const r=x9.exactMatch(t.multiaddr),n=x9.exactMatch(e.multiaddr);return r&&!n?1:!r&&n?-1:0}function Hz(t,e){const r=qFt(t,e);if(r!==0)return r;const n=WFt(t,e);return n!==0?n:HFt(t,e)}const KFt=32,{code:GFt}=Cr("dnsaddr");class YFt extends Error{constructor(e="Max recursive depth reached"){super(e),this.name="RecursionLimitError"}}const Wz=async function(e,r={}){const n=r.maxRecursiveDepth??KFt;if(n===0)throw new YFt("Max recursive depth reached");const[,i]=e.stringTuples().find(([l])=>l===GFt)??[],a=await(r?.dns??s3e()).query(`_dnsaddr.${i}`,{signal:r?.signal,types:[W1.TXT]}),o=e.getPeerId(),c=[];for(const l of a.Answer){const u=l.data.replace(/["']/g,"").trim().split("=")[1];if(u==null||o!=null&&!u.includes(o))continue;const f=Wr(u);if(u.startsWith("/dnsaddr")){const h=await f.resolve({...r,maxRecursiveDepth:n-1});c.push(...h.map(d=>d.toString()))}else c.push(f.toString())}return c};var Fv;(function(t){t.NOT_STARTED_YET="The libp2p node is not started yet",t.ERR_PROTECTOR_REQUIRED="Private network is enforced, but no protector was provided",t.NOT_FOUND="Not found"})(Fv||(Fv={}));var qt;(function(t){t.ERR_PROTECTOR_REQUIRED="ERR_PROTECTOR_REQUIRED",t.ERR_PEER_DIAL_INTERCEPTED="ERR_PEER_DIAL_INTERCEPTED",t.ERR_CONNECTION_INTERCEPTED="ERR_CONNECTION_INTERCEPTED",t.ERR_INVALID_PROTOCOLS_FOR_STREAM="ERR_INVALID_PROTOCOLS_FOR_STREAM",t.ERR_CONNECTION_ENDED="ERR_CONNECTION_ENDED",t.ERR_CONNECTION_FAILED="ERR_CONNECTION_FAILED",t.ERR_NODE_NOT_STARTED="ERR_NODE_NOT_STARTED",t.ERR_ALREADY_ABORTED="ERR_ALREADY_ABORTED",t.ERR_TOO_MANY_ADDRESSES="ERR_TOO_MANY_ADDRESSES",t.ERR_NO_VALID_ADDRESSES="ERR_NO_VALID_ADDRESSES",t.ERR_RELAYED_DIAL="ERR_RELAYED_DIAL",t.ERR_DIALED_SELF="ERR_DIALED_SELF",t.ERR_DISCOVERED_SELF="ERR_DISCOVERED_SELF",t.ERR_DUPLICATE_TRANSPORT="ERR_DUPLICATE_TRANSPORT",t.ERR_ENCRYPTION_FAILED="ERR_ENCRYPTION_FAILED",t.ERR_HOP_REQUEST_FAILED="ERR_HOP_REQUEST_FAILED",t.ERR_INVALID_KEY="ERR_INVALID_KEY",t.ERR_INVALID_MESSAGE="ERR_INVALID_MESSAGE",t.ERR_INVALID_PARAMETERS="ERR_INVALID_PARAMETERS",t.ERR_INVALID_PEER="ERR_INVALID_PEER",t.ERR_MUXER_UNAVAILABLE="ERR_MUXER_UNAVAILABLE",t.ERR_NOT_FOUND="ERR_NOT_FOUND",t.ERR_TRANSPORT_UNAVAILABLE="ERR_TRANSPORT_UNAVAILABLE",t.ERR_TRANSPORT_DIAL_FAILED="ERR_TRANSPORT_DIAL_FAILED",t.ERR_UNSUPPORTED_PROTOCOL="ERR_UNSUPPORTED_PROTOCOL",t.ERR_PROTOCOL_HANDLER_ALREADY_REGISTERED="ERR_PROTOCOL_HANDLER_ALREADY_REGISTERED",t.ERR_INVALID_MULTIADDR="ERR_INVALID_MULTIADDR",t.ERR_SIGNATURE_NOT_VALID="ERR_SIGNATURE_NOT_VALID",t.ERR_FIND_SELF="ERR_FIND_SELF",t.ERR_NO_ROUTERS_AVAILABLE="ERR_NO_ROUTERS_AVAILABLE",t.ERR_CONNECTION_NOT_MULTIPLEXED="ERR_CONNECTION_NOT_MULTIPLEXED",t.ERR_NO_DIAL_TOKENS="ERR_NO_DIAL_TOKENS",t.ERR_INVALID_CMS="ERR_INVALID_CMS",t.ERR_MISSING_KEYS="ERR_MISSING_KEYS",t.ERR_NO_KEY="ERR_NO_KEY",t.ERR_INVALID_KEY_NAME="ERR_INVALID_KEY_NAME",t.ERR_INVALID_KEY_TYPE="ERR_INVALID_KEY_TYPE",t.ERR_KEY_ALREADY_EXISTS="ERR_KEY_ALREADY_EXISTS",t.ERR_INVALID_KEY_SIZE="ERR_INVALID_KEY_SIZE",t.ERR_KEY_NOT_FOUND="ERR_KEY_NOT_FOUND",t.ERR_OLD_KEY_NAME_INVALID="ERR_OLD_KEY_NAME_INVALID",t.ERR_NEW_KEY_NAME_INVALID="ERR_NEW_KEY_NAME_INVALID",t.ERR_PASSWORD_REQUIRED="ERR_PASSWORD_REQUIRED",t.ERR_PEM_REQUIRED="ERR_PEM_REQUIRED",t.ERR_CANNOT_READ_KEY="ERR_CANNOT_READ_KEY",t.ERR_MISSING_PRIVATE_KEY="ERR_MISSING_PRIVATE_KEY",t.ERR_MISSING_PUBLIC_KEY="ERR_MISSING_PUBLIC_KEY",t.ERR_INVALID_OLD_PASS_TYPE="ERR_INVALID_OLD_PASS_TYPE",t.ERR_INVALID_NEW_PASS_TYPE="ERR_INVALID_NEW_PASS_TYPE",t.ERR_INVALID_PASS_LENGTH="ERR_INVALID_PASS_LENGTH",t.ERR_NOT_IMPLEMENTED="ERR_NOT_IMPLEMENTED",t.ERR_WRONG_PING_ACK="ERR_WRONG_PING_ACK",t.ERR_INVALID_RECORD="ERR_INVALID_RECORD",t.ERR_ALREADY_SUCCEEDED="ERR_ALREADY_SUCCEEDED",t.ERR_NO_HANDLER_FOR_PROTOCOL="ERR_NO_HANDLER_FOR_PROTOCOL",t.ERR_TOO_MANY_OUTBOUND_PROTOCOL_STREAMS="ERR_TOO_MANY_OUTBOUND_PROTOCOL_STREAMS",t.ERR_TOO_MANY_INBOUND_PROTOCOL_STREAMS="ERR_TOO_MANY_INBOUND_PROTOCOL_STREAMS",t.ERR_CONNECTION_DENIED="ERR_CONNECTION_DENIED",t.ERR_TRANSFER_LIMIT_EXCEEDED="ERR_TRANSFER_LIMIT_EXCEEDED"})(qt||(qt={}));const XFt={addresses:{listen:[],announce:[],noAnnounce:[],announceFilter:t=>t},connectionManager:{resolvers:{dnsaddr:Wz},addressSorter:Hz},transportManager:{faultTolerance:Ig.FATAL_ALL}};async function ZFt(t){const e=tu(XFt,t);if(e.connectionProtector===null&&globalThis.process?.env?.LIBP2P_FORCE_PNET!=null)throw new ye(Fv.ERR_PROTECTOR_REQUIRED,qt.ERR_PROTECTOR_REQUIRED);if(e.privateKey!=null&&!(await Yu(e.privateKey.public.bytes,e.privateKey.bytes)).equals(e.peerId))throw new ye("Private key doesn't match peer id",qt.ERR_INVALID_KEY);return e}function G4e(t){if(iA(t))return{peerId:t,multiaddrs:[]};Array.isArray(t)||(t=[t]);let e;if(t.length>0){const r=t[0].getPeerId();e=r==null?void 0:ti(r),t.forEach(n=>{if(!cT(n))throw new ye("Invalid Multiaddr",qt.ERR_INVALID_MULTIADDR);const i=n.getPeerId();if(i==null){if(e!=null)throw new ye("Multiaddrs must all have the same peer id or have no peer id",qt.ERR_INVALID_PARAMETERS)}else{const s=ti(i);if(e?.equals(s)!==!0)throw new ye("Multiaddrs must all have the same peer id or have no peer id",qt.ERR_INVALID_PARAMETERS)}})}return{peerId:e,multiaddrs:t}}const Y4e=5e3,JFt=2e3,X4e=25,QFt=5e3,Z4e=25,J4e=0,Q4e=100,e6e=10,e$t=5,t$t=10,t6e="last-dial-failure",r6e=500,n6e=5,i6e=100,s6e=50,a6e=1e3*60*7,Wp={minConnections:n6e,maxQueueLength:Q4e,autoDialConcurrency:Z4e,autoDialPriority:J4e,autoDialInterval:QFt,autoDialPeerRetryThreshold:a6e,autoDialDiscoveredPeersDebounce:e6e};class r$t{connectionManager;peerStore;queue;minConnections;autoDialPriority;autoDialIntervalMs;autoDialMaxQueueLength;autoDialPeerRetryThresholdMs;autoDialDiscoveredPeersDebounce;autoDialInterval;started;running;log;constructor(e,r){this.connectionManager=e.connectionManager,this.peerStore=e.peerStore,this.minConnections=r.minConnections??Wp.minConnections,this.autoDialPriority=r.autoDialPriority??Wp.autoDialPriority,this.autoDialIntervalMs=r.autoDialInterval??Wp.autoDialInterval,this.autoDialMaxQueueLength=r.maxQueueLength??Wp.maxQueueLength,this.autoDialPeerRetryThresholdMs=r.autoDialPeerRetryThreshold??Wp.autoDialPeerRetryThreshold,this.autoDialDiscoveredPeersDebounce=r.autoDialDiscoveredPeersDebounce??Wp.autoDialDiscoveredPeersDebounce,this.log=e.logger.forComponent("libp2p:connection-manager:auto-dial"),this.started=!1,this.running=!1,this.queue=new Pb({concurrency:r.autoDialConcurrency??Wp.autoDialConcurrency,metricName:"libp2p_autodial_queue",metrics:e.metrics}),this.queue.addEventListener("error",i=>{this.log.error("error during auto-dial",i.detail)}),e.events.addEventListener("connection:close",()=>{this.autoDial().catch(i=>{this.log.error(i)})});let n;e.events.addEventListener("peer:discovery",()=>{clearTimeout(n),n=setTimeout(()=>{this.autoDial().catch(i=>{this.log.error(i)})},this.autoDialDiscoveredPeersDebounce)})}isStarted(){return this.started}start(){this.started=!0}afterStart(){this.autoDial().catch(e=>{this.log.error("error while autodialing",e)})}stop(){this.queue.clear(),clearTimeout(this.autoDialInterval),this.started=!1,this.running=!1}async autoDial(){if(!this.started||this.running)return;const e=this.connectionManager.getConnectionsMap(),r=e.size;if(r>=this.minConnections){this.minConnections>0&&this.log.trace("have enough connections %d/%d",r,this.minConnections);return}if(this.queue.size>this.autoDialMaxQueueLength){this.log("not enough connections %d/%d but auto dial queue is full",r,this.minConnections),this.sheduleNextAutodial();return}this.running=!0,this.log("not enough connections %d/%d - will dial peers to increase the number of connections",r,this.minConnections);const n=new $u(this.connectionManager.getDialQueue().map(l=>l.peerId).filter(Boolean)),i=await this.peerStore.all({filters:[l=>l.addresses.length===0?(this.log.trace("not autodialing %p because they have no addresses",l.id),!1):e.has(l.id)?(this.log.trace("not autodialing %p because they are already connected",l.id),!1):n.has(l.id)?(this.log.trace("not autodialing %p because they are already being dialed",l.id),!1):this.queue.has(l.id)?(this.log.trace("not autodialing %p because they are already being autodialed",l.id),!1):!0]}),s=i.sort(()=>Math.random()>.5?1:-1),a=new y0;for(const l of s)a.has(l.id)||a.set(l.id,[...l.tags.values()].reduce((u,f)=>u+f.value,0));const c=s.sort((l,u)=>{const f=a.get(l.id)??0,h=a.get(u.id)??0;return f>h?-1:f<h?1:0}).filter(l=>{const u=l.metadata.get(t6e);if(u==null)return!0;const f=parseInt(vt(u));return isNaN(f)?!0:Date.now()-f>this.autoDialPeerRetryThresholdMs});this.log("selected %d/%d peers to dial",c.length,i.length);for(const l of c)this.queue.add(async()=>{const u=this.connectionManager.getConnectionsMap().size;if(u>=this.minConnections){this.log("got enough connections now %d/%d",u,this.minConnections),this.queue.clear();return}this.log("connecting to a peerStore stored peer %p",l.id),await this.connectionManager.openConnection(l.id,{priority:this.autoDialPriority})},{peerId:l.id}).catch(u=>{this.log.error("could not connect to peerStore stored peer",u)});this.running=!1,this.sheduleNextAutodial()}sheduleNextAutodial(){this.started&&(this.autoDialInterval=setTimeout(()=>{this.autoDial().catch(e=>{this.log.error("error while autodialing",e)})},this.autoDialIntervalMs))}}const n$t=["/ipfs/id/1.0.0","/ipfs/id/push/1.0.0","/libp2p/autonat/1.0.0","/libp2p/dcutr"];async function i$t(t,e){const r=t?.streams?.map(i=>i.protocol)??[],n=e?.closableProtocols??n$t;if(!(r.filter(i=>i!=null&&!n.includes(i)).length>0))try{await t?.close(e)}catch(i){t?.abort(i)}}const Xse={maxConnections:i6e,allow:[]};class s$t{maxConnections;connectionManager;peerStore;allow;events;log;constructor(e,r={}){this.maxConnections=r.maxConnections??Xse.maxConnections,this.allow=r.allow??Xse.allow,this.connectionManager=e.connectionManager,this.peerStore=e.peerStore,this.events=e.events,this.log=e.logger.forComponent("libp2p:connection-manager:connection-pruner"),e.events.addEventListener("connection:open",()=>{this.maybePruneConnections().catch(n=>{this.log.error(n)})})}async maybePruneConnections(){const e=this.connectionManager.getConnections(),r=e.length;if(this.log("checking max connections limit %d/%d",r,this.maxConnections),r<=this.maxConnections)return;const n=new y0;for(const o of e){const c=o.remotePeer;if(!n.has(c)){n.set(c,0);try{const l=await this.peerStore.get(c);n.set(c,[...l.tags.values()].reduce((u,f)=>u+f.value,0))}catch(l){l.code!=="ERR_NOT_FOUND"&&this.log.error("error loading peer tags",l)}}}const i=this.sortConnections(e,n),s=Math.max(r-this.maxConnections,0),a=[];for(const o of i)if(this.log("too many connections open - closing a connection to %p",o.remotePeer),this.allow.some(l=>o.remoteAddr.toString().startsWith(l.toString()))||a.push(o),a.length===s)break;await Promise.all(a.map(async o=>{await i$t(o,{signal:AbortSignal.timeout(1e3)})})),this.events.safeDispatchEvent("connection:prune",{detail:a})}sortConnections(e,r){return e.sort((n,i)=>{const s=n.timeline.open,a=i.timeline.open;return s<a?1:s>a?-1:0}).sort((n,i)=>n.direction==="outbound"&&i.direction==="inbound"?1:n.direction==="inbound"&&i.direction==="outbound"?-1:0).sort((n,i)=>n.streams.length>i.streams.length?1:n.streams.length<i.streams.length?-1:0).sort((n,i)=>{const s=r.get(n.remotePeer)??0,a=r.get(i.remotePeer)??0;return s>a?1:s<a?-1:0})}}class a$t extends Ev{constructor(e={}){super({...e,sort:(r,n)=>r.options.priority>n.options.priority?-1:r.options.priority<n.options.priority?1:0})}}async function o$t(t,e){let r=!1;for(const i of Iz.keys())if(r=t.protoNames().includes(i),r)break;if(!r)return[t];const n=await t.resolve(e);return e.log("resolved %s to",t,n.map(i=>i.toString())),n}const Lw={addressSorter:Hz,maxParallelDials:s6e,maxDialQueueLength:r6e,maxPeerAddrsToDial:X4e,dialTimeout:Y4e,resolvers:{dnsaddr:Wz}};class c$t{queue;components;addressSorter;maxPeerAddrsToDial;maxDialQueueLength;dialTimeout;shutDownController;connections;log;constructor(e,r={}){this.addressSorter=r.addressSorter??Lw.addressSorter,this.maxPeerAddrsToDial=r.maxPeerAddrsToDial??Lw.maxPeerAddrsToDial,this.maxDialQueueLength=r.maxDialQueueLength??Lw.maxDialQueueLength,this.dialTimeout=r.dialTimeout??Lw.dialTimeout,this.connections=r.connections??new y0,this.log=e.logger.forComponent("libp2p:connection-manager:dial-queue"),this.components=e,this.shutDownController=new AbortController,Zt(1/0,this.shutDownController.signal);for(const[n,i]of Object.entries(r.resolvers??{}))Iz.set(n,i);this.queue=new a$t({concurrency:r.maxParallelDials??Lw.maxParallelDials,metricName:"libp2p_dial_queue",metrics:e.metrics}),this.queue.addEventListener("error",n=>{this.log.error("error in dial queue",n.detail)})}start(){this.shutDownController=new AbortController,Zt(1/0,this.shutDownController.signal)}stop(){this.shutDownController.abort(),this.queue.abort()}async dial(e,r={}){const{peerId:n,multiaddrs:i}=G4e(e),s=Array.from(this.connections.values()).flat().find(o=>r.force===!0?!1:o.remotePeer.equals(n)?!0:i.find(c=>c.equals(o.remoteAddr)));if(s!=null)return this.log("already connected to %a",s.remoteAddr),r.onProgress?.(new Bt("dial-queue:already-connected")),s;const a=this.queue.queue.find(o=>{if(n?.equals(o.options.peerId)===!0)return!0;const c=o.options.multiaddrs;if(c==null)return!1;for(const l of i)if(c.has(l.toString()))return!0;return!1});if(a!=null){this.log("joining existing dial target for %p",n);for(const o of i)a.options.multiaddrs.add(o.toString());return r.onProgress?.(new Bt("dial-queue:already-in-dial-queue")),a.join(r)}if(this.queue.size>=this.maxDialQueueLength)throw new ye("Dial queue is full","ERR_DIAL_QUEUE_FULL");return this.log("creating dial target for %p",n,i.map(o=>o.toString())),r.onProgress?.(new Bt("dial-queue:add-to-dial-queue")),this.queue.add(async o=>{o?.onProgress?.(new Bt("dial-queue:start-dial"));const c=this.createDialAbortController(o?.signal);let l;try{l=await this.calculateMultiaddrs(n,o?.multiaddrs,{...o,signal:c}),o?.onProgress?.(new Bt("dial-queue:calculated-addresses",l)),l.map(({multiaddr:u})=>u.toString()).forEach(u=>{o?.multiaddrs.add(u)})}catch(u){throw c.clear(),u}try{let u=0;const f=[];for(const h of l){if(u===this.maxPeerAddrsToDial)throw this.log("dialed maxPeerAddrsToDial (%d) addresses for %p, not trying any others",u,n),new ye("Peer had more than maxPeerAddrsToDial",qt.ERR_TOO_MANY_ADDRESSES);u++;try{const d=await this.components.transportManager.dial(h.multiaddr,{...o,signal:c});return this.log("dial to %a succeeded",h.multiaddr),d}catch(d){if(this.log.error("dial failed to %a",h.multiaddr,d),n!=null)try{await this.components.peerStore.patch(n,{metadata:{[t6e]:pt(Date.now().toString())}})}catch(g){this.log.error("could not update last dial failure key for %p",n,g)}if(c.aborted)throw new ye(d.message,rv);f.push(d)}}throw f.length===1?f[0]:new Bst(f,"All multiaddr dials failed",qt.ERR_TRANSPORT_DIAL_FAILED)}finally{c.clear()}},{peerId:n,priority:r.priority??o6e,multiaddrs:new Set(i.map(o=>o.toString())),signal:r.signal,onProgress:r.onProgress})}createDialAbortController(e){const r=us([AbortSignal.timeout(this.dialTimeout),this.shutDownController.signal,e]);return Zt(1/0,r),r}async calculateMultiaddrs(e,r=new Set,n={}){const i=[...r].map(f=>({multiaddr:Wr(f),isCertified:!1}));if(e!=null){if(this.components.peerId.equals(e))throw new ye("Tried to dial self",qt.ERR_DIALED_SELF);if(await this.components.connectionGater.denyDialPeer?.(e)===!0)throw new ye("The dial request is blocked by gater.allowDialPeer",qt.ERR_PEER_DIAL_INTERCEPTED);if(i.length===0){this.log("loading multiaddrs for %p",e);try{const f=await this.components.peerStore.get(e);i.push(...f.addresses),this.log("loaded multiaddrs for %p",e,i.map(({multiaddr:h})=>h.toString()))}catch(f){if(f.code!==qt.ERR_NOT_FOUND)throw f}}if(i.length===0){this.log("looking up multiaddrs for %p in the peer routing",e);try{const f=await this.components.peerRouting.findPeer(e);this.log("found multiaddrs for %p in the peer routing",e,i.map(({multiaddr:h})=>h.toString())),i.push(...f.multiaddrs.map(h=>({multiaddr:h,isCertified:!1})))}catch(f){f.code!==qt.ERR_NO_ROUTERS_AVAILABLE&&this.log.error("looking up multiaddrs for %p in the peer routing failed",e,f)}}}let s=(await Promise.all(i.map(async f=>{const h=await o$t(f.multiaddr,{dns:this.components.dns,...n,log:this.log});return h.length===1&&h[0].equals(f.multiaddr)?f:h.map(d=>({multiaddr:d,isCertified:!1}))}))).flat();if(e!=null){const f=`/p2p/${e.toString()}`;s=s.map(h=>h.multiaddr.protos().pop()?.path===!0?h:h.multiaddr.getPeerId()==null?{multiaddr:h.multiaddr.encapsulate(f),isCertified:h.isCertified}:h)}const a=s.filter(f=>{if(this.components.transportManager.dialTransportForMultiaddr(f.multiaddr)==null)return!1;const h=f.multiaddr.getPeerId();return e!=null&&h!=null?e.equals(h):!0}),o=new Map;for(const f of a){const h=f.multiaddr.toString(),d=o.get(h);if(d!=null){d.isCertified=d.isCertified||f.isCertified||!1;continue}o.set(h,f)}const c=[...o.values()];if(c.length===0)throw new ye("The dial request has no valid addresses",qt.ERR_NO_VALID_ADDRESSES);const l=[];for(const f of c)this.components.connectionGater.denyDialMultiaddr!=null&&await this.components.connectionGater.denyDialMultiaddr(f.multiaddr)||l.push(f);const u=l.sort(this.addressSorter);if(u.length===0)throw new ye("The connection gater denied all addresses in the dial request",qt.ERR_NO_VALID_ADDRESSES);return this.log.trace("addresses for %p before filtering",e??"unknown peer",s.map(({multiaddr:f})=>f.toString())),this.log.trace("addresses for %p after filtering",e??"unknown peer",u.map(({multiaddr:f})=>f.toString())),u}async isDialable(e,r={}){Array.isArray(e)||(e=[e]);try{const n=await this.calculateMultiaddrs(void 0,new Set(e.map(i=>i.toString())),r);return r.runOnTransientConnection===!1?n.find(i=>!x9.matches(i.multiaddr))!=null:!0}catch(n){this.log.trace("error calculating if multiaddr(s) were dialable",n)}return!1}}const o6e=50,Qh={minConnections:n6e,maxConnections:i6e,inboundConnectionThreshold:e$t,maxIncomingPendingConnections:t$t,autoDialConcurrency:Z4e,autoDialPriority:J4e,autoDialMaxQueueLength:Q4e,autoDialPeerRetryThreshold:a6e,autoDialDiscoveredPeersDebounce:e6e};class l$t{started;connections;allow;deny;maxIncomingPendingConnections;incomingPendingConnections;maxConnections;dialQueue;autoDial;connectionPruner;inboundConnectionRateLimiter;peerStore;metrics;events;log;constructor(e,r={}){this.maxConnections=r.maxConnections??Qh.maxConnections;const n=r.minConnections??Qh.minConnections;if(this.maxConnections<n)throw new ye("Connection Manager maxConnections must be greater than minConnections",qt.ERR_INVALID_PARAMETERS);this.connections=new y0,this.started=!1,this.peerStore=e.peerStore,this.metrics=e.metrics,this.events=e.events,this.log=e.logger.forComponent("libp2p:connection-manager"),this.onConnect=this.onConnect.bind(this),this.onDisconnect=this.onDisconnect.bind(this),this.events.addEventListener("connection:open",this.onConnect),this.events.addEventListener("connection:close",this.onDisconnect),this.allow=(r.allow??[]).map(i=>Wr(i)),this.deny=(r.deny??[]).map(i=>Wr(i)),this.incomingPendingConnections=0,this.maxIncomingPendingConnections=r.maxIncomingPendingConnections??Qh.maxIncomingPendingConnections,this.inboundConnectionRateLimiter=new I4e({points:r.inboundConnectionThreshold??Qh.inboundConnectionThreshold,duration:1}),this.autoDial=new r$t({connectionManager:this,peerStore:e.peerStore,events:e.events,logger:e.logger},{minConnections:n,autoDialConcurrency:r.autoDialConcurrency??Qh.autoDialConcurrency,autoDialPriority:r.autoDialPriority??Qh.autoDialPriority,autoDialPeerRetryThreshold:r.autoDialPeerRetryThreshold??Qh.autoDialPeerRetryThreshold,autoDialDiscoveredPeersDebounce:r.autoDialDiscoveredPeersDebounce??Qh.autoDialDiscoveredPeersDebounce,maxQueueLength:r.autoDialMaxQueueLength??Qh.autoDialMaxQueueLength}),this.connectionPruner=new s$t({connectionManager:this,peerStore:e.peerStore,events:e.events,logger:e.logger},{maxConnections:this.maxConnections,allow:this.allow}),this.dialQueue=new c$t(e,{addressSorter:r.addressSorter??Hz,maxParallelDials:r.maxParallelDials??s6e,maxDialQueueLength:r.maxDialQueueLength??r6e,maxPeerAddrsToDial:r.maxPeerAddrsToDial??X4e,dialTimeout:r.dialTimeout??Y4e,resolvers:r.resolvers??{dnsaddr:Wz},connections:this.connections})}[Symbol.toStringTag]="@libp2p/connection-manager";isStarted(){return this.started}async start(){this.metrics?.registerMetricGroup("libp2p_connection_manager_connections",{calculate:()=>{const e={inbound:0,outbound:0};for(const r of this.connections.values())for(const n of r)n.direction==="inbound"?e.inbound++:e.outbound++;return e}}),this.metrics?.registerMetricGroup("libp2p_protocol_streams_total",{label:"protocol",calculate:()=>{const e={};for(const r of this.connections.values())for(const n of r)for(const i of n.streams){const s=`${i.direction} ${i.protocol??"unnegotiated"}`;e[s]=(e[s]??0)+1}return e}}),this.metrics?.registerMetricGroup("libp2p_connection_manager_protocol_streams_per_connection_90th_percentile",{label:"protocol",calculate:()=>{const e={};for(const n of this.connections.values())for(const i of n){const s={};for(const a of i.streams){const o=`${a.direction} ${a.protocol??"unnegotiated"}`;s[o]=(s[o]??0)+1}for(const[a,o]of Object.entries(s))e[a]=e[a]??[],e[a].push(o)}const r={};for(let[n,i]of Object.entries(e)){i=i.sort((a,o)=>a-o);const s=Math.floor(i.length*.9);r[n]=i[s]}return r}}),this.dialQueue.start(),this.autoDial.start(),this.started=!0,this.log("started")}async afterStart(){Promise.resolve().then(async()=>{const e=await this.peerStore.all({filters:[r=>r.tags.has(Pst)]});await Promise.all(e.map(async r=>{await this.openConnection(r.id).catch(n=>{this.log.error(n)})}))}).catch(e=>{this.log.error(e)}),this.autoDial.afterStart()}async stop(){this.dialQueue.stop(),this.autoDial.stop();const e=[];for(const r of this.connections.values())for(const n of r)e.push((async()=>{try{await n.close()}catch(i){this.log.error(i)}})());this.log("closing %d connections",e.length),await Promise.all(e),this.connections.clear(),this.log("stopped")}onConnect(e){this._onConnect(e).catch(r=>{this.log.error(r)})}async _onConnect(e){const{detail:r}=e;if(!this.started){await r.close();return}const n=r.remotePeer,i=this.connections.get(n);let s=!1;i!=null?i.push(r):(s=!0,this.connections.set(n,[r])),n.publicKey!=null&&n.type==="RSA"&&await this.peerStore.patch(n,{publicKey:n.publicKey}),s&&this.events.safeDispatchEvent("peer:connect",{detail:r.remotePeer})}onDisconnect(e){const{detail:r}=e;if(!this.started)return;const n=r.remotePeer;let i=this.connections.get(n);i!=null&&i.length>1?(i=i.filter(s=>s.id!==r.id),this.connections.set(n,i)):i!=null&&(this.connections.delete(n),this.events.safeDispatchEvent("peer:disconnect",{detail:r.remotePeer}))}getConnections(e){if(e!=null)return this.connections.get(e)??[];let r=[];for(const n of this.connections.values())r=r.concat(n);return r}getConnectionsMap(){return this.connections}async openConnection(e,r={}){if(!this.isStarted())throw new ye("Not started",qt.ERR_NODE_NOT_STARTED);r.signal?.throwIfAborted();const{peerId:n}=G4e(e);if(n!=null&&r.force!==!0){this.log("dial %p",n);const o=this.getConnections(n).find(c=>!c.transient);if(o!=null)return this.log("had an existing non-transient connection to %p",n),r.onProgress?.(new Bt("dial-queue:already-connected")),o}const i=await this.dialQueue.dial(e,{...r,priority:r.priority??o6e});let s=this.connections.get(i.remotePeer);s==null&&(s=[],this.connections.set(i.remotePeer,s));let a=!1;for(const o of s)o.id===i.id&&(a=!0);return a||s.push(i),i}async closeConnections(e,r={}){const n=this.connections.get(e)??[];await Promise.all(n.map(async i=>{try{await i.close(r)}catch(s){i.abort(s)}}))}async acceptIncomingConnection(e){if(this.deny.some(i=>e.remoteAddr.toString().startsWith(i.toString())))return this.log("connection from %a refused - connection remote address was in deny list",e.remoteAddr),!1;if(this.allow.some(i=>e.remoteAddr.toString().startsWith(i.toString())))return this.incomingPendingConnections++,!0;if(this.incomingPendingConnections===this.maxIncomingPendingConnections)return this.log("connection from %a refused - incomingPendingConnections exceeded by host",e.remoteAddr),!1;if(e.remoteAddr.isThinWaistAddress()){const i=e.remoteAddr.nodeAddress().address;try{await this.inboundConnectionRateLimiter.consume(i,1)}catch{return this.log("connection from %a refused - inboundConnectionThreshold exceeded by host %s",e.remoteAddr,i),!1}}return this.getConnections().length<this.maxConnections?(this.incomingPendingConnections++,!0):(this.log("connection from %a refused - maxConnections exceeded",e.remoteAddr),!1)}afterUpgradeInbound(){this.incomingPendingConnections--}getDialQueue(){const e={queued:"queued",running:"active",errored:"error",complete:"success"};return this.dialQueue.queue.queue.map(r=>({id:r.id,status:e[r.status],peerId:r.options.peerId,multiaddrs:[...r.options.multiaddrs].map(n=>Wr(n))}))}async isDialable(e,r={}){return this.dialQueue.isDialable(e,r)}}const u$t=1e4,f$t="1.0.0",h$t="ping",d$t="ipfs",Zse=32;class p$t{protocol;components;log;heartbeatInterval;pingIntervalMs;abortController;timeout;constructor(e,r={}){this.components=e,this.protocol=`/${r.protocolPrefix??d$t}/${h$t}/${f$t}`,this.log=e.logger.forComponent("libp2p:connection-monitor"),this.pingIntervalMs=r.pingInterval??u$t,this.timeout=new x4e({...r.pingTimeout??{},metrics:e.metrics,metricName:"libp2p_connection_monitor_ping_time_milliseconds"})}[Symbol.toStringTag]="@libp2p/connection-monitor";[yo]=["@libp2p/connection-monitor"];start(){this.abortController=new AbortController,this.heartbeatInterval=setInterval(()=>{this.components.connectionManager.getConnections().forEach(e=>{Promise.resolve().then(async()=>{let r=Date.now();try{const n=this.timeout.getTimeoutSignal({signal:this.abortController?.signal}),i=await e.newStream(this.protocol,{signal:n,runOnTransientConnection:!0}),s=q3e(i);r=Date.now(),await Promise.all([s.write(Xu(Zse),{signal:n}),s.read(Zse,{signal:n})]),e.rtt=Date.now()-r,await s.unwrap().close({signal:n})}catch(n){if(n.code!=="ERR_UNSUPPORTED_PROTOCOL")throw n;e.rtt=(Date.now()-r)/2}}).catch(r=>{this.log.error("error during heartbeat, aborting connection",r),e.abort(r)})})},this.pingIntervalMs)}stop(){this.abortController?.abort(),this.heartbeatInterval!=null&&clearInterval(this.heartbeatInterval)}}class g$t{routers;started;components;constructor(e,r){this.routers=r.routers??[],this.started=!1,this.components=e}[Symbol.toStringTag]="@libp2p/content-routing";isStarted(){return this.started}async start(){this.started=!0}async stop(){this.started=!1}async*findProviders(e,r={}){if(this.routers.length===0)throw new ye("No content routers available",qt.ERR_NO_ROUTERS_AVAILABLE);const n=this,i=new $u;for await(const s of T1(...n.routers.map(a=>a.findProviders(e,r))))s!=null&&(s.multiaddrs.length>0&&await this.components.peerStore.merge(s.id,{multiaddrs:s.multiaddrs}),!i.has(s.id)&&(i.add(s.id),yield s))}async provide(e,r={}){if(this.routers.length===0)throw new ye("No content routers available",qt.ERR_NO_ROUTERS_AVAILABLE);await Promise.all(this.routers.map(async n=>{await n.provide(e,r)}))}async put(e,r,n){if(!this.isStarted())throw new ye(Fv.NOT_STARTED_YET,qt.ERR_NODE_NOT_STARTED);await Promise.all(this.routers.map(async i=>{await i.put(e,r,n)}))}async get(e,r){if(!this.isStarted())throw new ye(Fv.NOT_STARTED_YET,qt.ERR_NODE_NOT_STARTED);return Promise.any(this.routers.map(async n=>n.get(e,r)))}}class m$t{log;peerId;peerStore;routers;constructor(e,r={}){this.log=e.logger.forComponent("libp2p:peer-routing"),this.peerId=e.peerId,this.peerStore=e.peerStore,this.routers=r.routers??[]}[Symbol.toStringTag]="@libp2p/peer-routing";async findPeer(e,r){if(this.routers.length===0)throw new ye("No peer routers available",qt.ERR_NO_ROUTERS_AVAILABLE);if(e.toString()===this.peerId.toString())throw new ye("Should not try to find self",qt.ERR_FIND_SELF);const n=this,i=T1(...this.routers.map(s=>async function*(){try{yield await s.findPeer(e,r)}catch(a){n.log.error(a)}}()));for await(const s of i)if(s!=null)return s.multiaddrs.length>0&&await this.peerStore.merge(s.id,{multiaddrs:s.multiaddrs}),s;throw new ye(Fv.NOT_FOUND,qt.ERR_NOT_FOUND)}async*getClosestPeers(e,r={}){if(this.routers.length===0)throw new ye("No peer routers available",qt.ERR_NO_ROUTERS_AVAILABLE);const n=this,i=Qwe(1024);for await(const s of dp(async function*(){const a=T1(...n.routers.map(o=>o.getClosestPeers(e,r)));for await(let o of a)yield async()=>{if(o.multiaddrs.length===0)try{o=await n.findPeer(o.id,{...r,useCache:!1})}catch(c){n.log.error("could not find peer multiaddrs",c);return}return o}}()))s!=null&&(s.multiaddrs.length>0&&await this.peerStore.merge(s.id,{multiaddrs:s.multiaddrs}),!i.has(s.id.toBytes())&&(i.add(s.id.toBytes()),yield s))}}class y$t extends ea{peerRouting;log;walking;walkers;shutdownController;walkController;needNext;constructor(e){super(),this.log=e.logger.forComponent("libp2p:random-walk"),this.peerRouting=e.peerRouting,this.walkers=0,this.walking=!1,this.shutdownController=new AbortController,Zt(1/0,this.shutdownController.signal)}[Symbol.toStringTag]="@libp2p/random-walk";start(){this.shutdownController=new AbortController,Zt(1/0,this.shutdownController.signal)}stop(){this.shutdownController.abort()}async*walk(e){this.walking||this.startWalk(),this.walkers++;const r=us([this.shutdownController.signal,e?.signal]);Zt(1/0,r);try{for(;;)this.needNext?.resolve(),this.needNext=fn(),yield(await Pd(this,"walk:peer",r,{errorEvent:"walk:error"})).detail}finally{r.clear(),this.walkers--,this.walkers===0&&(this.walkController?.abort(),this.walkController=void 0)}}startWalk(){this.walking=!0,this.walkController=new AbortController,Zt(1/0,this.walkController.signal);const e=us([this.walkController.signal,this.shutdownController.signal]);Zt(1/0,e);const r=Date.now();let n=0;Promise.resolve().then(async()=>{for(this.log("start walk");this.walkers>0;)try{const i=Xu(32);let s=Date.now();for await(const a of this.peerRouting.getClosestPeers(i,{signal:e}))e.aborted&&this.log("aborting walk"),e.throwIfAborted(),this.log("found peer %p after %dms for %d walkers",a.id,Date.now()-s,this.walkers),n++,this.safeDispatchEvent("walk:peer",{detail:a}),this.walkers===1&&this.needNext!=null&&(this.log("wait for need next"),await ma(this.needNext.promise,e)),s=Date.now();this.log("walk iteration for %b and %d walkers finished, found %d peers",i,this.walkers,n)}catch(i){this.log.error("randomwalk errored",i),this.safeDispatchEvent("walk:error",{detail:i})}this.log("no walkers left, ended walk")}).catch(i=>{this.log.error("randomwalk errored",i)}).finally(()=>{this.log("finished walk, found %d peers after %dms",n,Date.now()-r),this.walking=!1})}}const c6e=32,l6e=64;class v$t{log;topologies;handlers;components;constructor(e){this.log=e.logger.forComponent("libp2p:registrar"),this.topologies=new Map,this.handlers=new Map,this.components=e,this._onDisconnect=this._onDisconnect.bind(this),this._onPeerUpdate=this._onPeerUpdate.bind(this),this._onPeerIdentify=this._onPeerIdentify.bind(this),this.components.events.addEventListener("peer:disconnect",this._onDisconnect),this.components.events.addEventListener("peer:update",this._onPeerUpdate),this.components.events.addEventListener("peer:identify",this._onPeerIdentify)}[Symbol.toStringTag]="@libp2p/registrar";getProtocols(){return Array.from(new Set([...this.handlers.keys()])).sort()}getHandler(e){const r=this.handlers.get(e);if(r==null)throw new ye(`No handler registered for protocol ${e}`,qt.ERR_NO_HANDLER_FOR_PROTOCOL);return r}getTopologies(e){const r=this.topologies.get(e);return r==null?[]:[...r.values()]}async handle(e,r,n){if(this.handlers.has(e))throw new ye(`Handler already registered for protocol ${e}`,qt.ERR_PROTOCOL_HANDLER_ALREADY_REGISTERED);const i=tu.bind({ignoreUndefined:!0})({maxInboundStreams:c6e,maxOutboundStreams:l6e},n);this.handlers.set(e,{handler:r,options:i}),await this.components.peerStore.merge(this.components.peerId,{protocols:[e]})}async unhandle(e){(Array.isArray(e)?e:[e]).forEach(n=>{this.handlers.delete(n)}),await this.components.peerStore.patch(this.components.peerId,{protocols:this.getProtocols()})}async register(e,r){if(r==null)throw new ye("invalid topology",qt.ERR_INVALID_PARAMETERS);const n=`${(Math.random()*1e9).toString(36)}${Date.now()}`;let i=this.topologies.get(e);return i==null&&(i=new Map,this.topologies.set(e,i)),i.set(n,r),n}unregister(e){for(const[r,n]of this.topologies.entries())n.has(e)&&(n.delete(e),n.size===0&&this.topologies.delete(r))}_onDisconnect(e){const r=e.detail;this.components.peerStore.get(r).then(n=>{for(const i of n.protocols){const s=this.topologies.get(i);if(s!=null)for(const a of s.values())a.filter?.has(r)!==!1&&(a.filter?.remove(r),a.onDisconnect?.(r))}}).catch(n=>{n.code!==qt.ERR_NOT_FOUND&&this.log.error("could not inform topologies of disconnecting peer %p",r,n)})}_onPeerUpdate(e){const{peer:r,previous:n}=e.detail,i=(n?.protocols??[]).filter(s=>!r.protocols.includes(s));for(const s of i){const a=this.topologies.get(s);if(a!=null)for(const o of a.values())o.filter?.has(r.id)!==!1&&(o.filter?.remove(r.id),o.onDisconnect?.(r.id))}}_onPeerIdentify(e){const r=e.detail.protocols,n=e.detail.connection,i=e.detail.peerId;for(const s of r){const a=this.topologies.get(s);if(a!=null)for(const o of a.values())n.transient&&o.notifyOnTransient!==!0||o.filter?.has(i)!==!0&&(o.filter?.add(i),o.onConnect?.(i,n))}}}class b$t{log;components;transports;listeners;faultTolerance;started;constructor(e,r={}){this.log=e.logger.forComponent("libp2p:transports"),this.components=e,this.started=!1,this.transports=new Map,this.listeners=p3e({name:"libp2p_transport_manager_listeners",metrics:this.components.metrics}),this.faultTolerance=r.faultTolerance??Ig.FATAL_ALL}[Symbol.toStringTag]="@libp2p/transport-manager";add(e){const r=e[Symbol.toStringTag];if(r==null)throw new ye("Transport must have a valid tag",qt.ERR_INVALID_KEY);if(this.transports.has(r))throw new ye(`There is already a transport with the tag ${r}`,qt.ERR_DUPLICATE_TRANSPORT);this.log("adding transport %s",r),this.transports.set(r,e),this.listeners.has(r)||this.listeners.set(r,[])}isStarted(){return this.started}start(){this.started=!0}async afterStart(){const e=this.components.addressManager.getListenAddrs();await this.listen(e)}async stop(){const e=[];for(const[r,n]of this.listeners)for(this.log("closing listeners for %s",r);n.length>0;){const i=n.pop();i!=null&&e.push(i.close())}await Promise.all(e),this.log("all listeners closed");for(const r of this.listeners.keys())this.listeners.set(r,[]);this.started=!1}async dial(e,r){const n=this.dialTransportForMultiaddr(e);if(n==null)throw new ye(`No transport available for address ${String(e)}`,qt.ERR_TRANSPORT_UNAVAILABLE);r?.onProgress?.(new Bt("transport-manager:selected-transport",n[Symbol.toStringTag]));try{return await n.dial(e,{...r,upgrader:this.components.upgrader})}catch(i){throw i.code==null&&(i.code=qt.ERR_TRANSPORT_DIAL_FAILED),i}}getAddrs(){let e=[];for(const r of this.listeners.values())for(const n of r)e=[...e,...n.getAddrs()];return e}getTransports(){return Array.of(...this.transports.values())}getListeners(){return Array.of(...this.listeners.values()).flat()}dialTransportForMultiaddr(e){for(const r of this.transports.values())if(r.dialFilter([e]).length>0)return r}listenTransportForMultiaddr(e){for(const r of this.transports.values())if(r.listenFilter([e]).length>0)return r}async listen(e){if(!this.isStarted())throw new ye("Not started",qt.ERR_NODE_NOT_STARTED);if(e==null||e.length===0){this.log("no addresses were provided for listening, this node is dial only");return}const r=[];for(const[n,i]of this.transports.entries()){const s=i.listenFilter(e),a=[];for(const l of s){this.log("creating listener for %s on %a",n,l);const u=i.createListener({upgrader:this.components.upgrader});let f=this.listeners.get(n)??[];f==null&&(f=[],this.listeners.set(n,f)),f.push(u),u.addEventListener("listening",()=>{this.components.events.safeDispatchEvent("transport:listening",{detail:u})}),u.addEventListener("close",()=>{const h=f.findIndex(d=>d===u);f.splice(h,1),this.components.events.safeDispatchEvent("transport:close",{detail:u})}),a.push(u.listen(l))}if(a.length===0){r.push(n);continue}if((await Promise.allSettled(a)).find(l=>l.status==="fulfilled")==null&&this.faultTolerance!==Ig.NO_FATAL)throw new ye(`Transport (${n}) could not listen on any available address`,qt.ERR_NO_VALID_ADDRESSES)}if(r.length===this.transports.size){const n=`no valid addresses were provided for transports [${r.join(", ")}]`;if(this.faultTolerance===Ig.FATAL_ALL)throw new ye(n,qt.ERR_NO_VALID_ADDRESSES);this.log(`libp2p in dial mode only: ${n}`)}}async remove(e){const r=this.listeners.get(e)??[];this.log.trace("removing transport %s",e);const n=[];for(this.log.trace("closing listeners for %s",e);r.length>0;){const i=r.pop();i!=null&&n.push(i.close())}await Promise.all(n),this.transports.delete(e),this.listeners.delete(e)}async removeAll(){const e=[];for(const r of this.transports.keys())e.push(this.remove(r));await Promise.all(e)}}const dc="/multistream/1.0.0",Kz=1024,w$t=pt(`
`);async function n3(t,e,r){await t.write(e,r)}async function _$t(t,e,r){await t.writeV(e,r)}async function x$t(t,e){const r=await t.read(e);if(r.byteLength===0||r.get(r.byteLength-1)!==w$t[0])throw e.log.error("Invalid mss message - missing newline",r),new ye("missing newline","ERR_INVALID_MULTISTREAM_SELECT_MESSAGE");return r.sublist(0,-1)}async function Py(t,e){const r=await x$t(t,e);return vt(r.subarray())}async function iD(t,e,r){if(e=Array.isArray(e)?[...e]:[e],e.length===1&&r.negotiateFully===!1)return E$t(t,e[0],r);const n=Iv(t,{...r,maxDataLength:Kz}),i=e.shift();if(i==null)throw new Error("At least one protocol must be specified");r.log.trace('select: write ["%s", "%s"]',dc,i);const s=pt(`${dc}
`),a=pt(`${i}
`);await _$t(n,[s,a],r),r.log.trace("select: reading multistream-select header");let o=await Py(n,r);if(r.log.trace('select: read "%s"',o),o===dc&&(r.log.trace("select: reading protocol response"),o=await Py(n,r),r.log.trace('select: read "%s"',o)),o===i)return{stream:n.unwrap(),protocol:i};for(const c of e){r.log.trace('select: write "%s"',c),await n3(n,pt(`${c}
`),r),r.log.trace("select: reading protocol response");const l=await Py(n,r);if(r.log.trace('select: read "%s" for "%s"',l,c),l===c)return{stream:n.unwrap(),protocol:c}}throw new ye("protocol selection failed","ERR_UNSUPPORTED_PROTOCOL")}function E$t(t,e,r){const n=t.sink.bind(t),i=t.source;let s=!1,a=!1;const o=fn();let c=!1,l=!1;const u=fn();let f=!1,h=!1;const d=fn(),g=Iv({sink:n,source:i},{...r,maxDataLength:Kz});t.sink=async v=>{const{sink:_}=g.unwrap();await _(async function*(){let x=!1;for await(const A of v){if(l&&await u.promise,c)yield A;else{l=!0,r.log.trace('optimistic: write ["%s", "%s", data(%d)] in sink',dc,e,A.byteLength);const C=`${e}
`;yield new Pn(Uint8Array.from([19]),pt(`${dc}
`),Go(C.length),pt(C),A).subarray(),r.log.trace('optimistic: wrote ["%s", "%s", data(%d)] in sink',dc,e,A.byteLength),c=!0,l=!1,u.resolve(),p().catch(R=>{r.log.error("could not finish optimistic protocol negotiation of %s",e,R)})}x=!0}x||await p()}())};async function p(){if(a){r.log.trace("optimistic: already negotiating %s stream",e),await o.promise;return}a=!0;try{c||(r.log.trace("optimistic: doing send protocol for %s stream",e),await m()),f||(r.log.trace("optimistic: doing read protocol for %s stream",e),await y())}finally{a=!1,s=!0,o.resolve()}}async function m(){if(l){await u.promise;return}l=!0;try{r.log.trace('optimistic: write ["%s", "%s", data] in source',dc,e),await g.writeV([pt(`${dc}
`),pt(`${e}
`)]),r.log.trace('optimistic: wrote ["%s", "%s", data] in source',dc,e)}finally{c=!0,l=!1,u.resolve()}}async function y(){if(h){await d.promise;return}h=!0;try{r.log.trace("optimistic: reading multistream select header");let v=await Py(g,r);if(r.log.trace('optimistic: read multistream select header "%s"',v),v===dc&&(v=await Py(g,r)),r.log.trace('optimistic: read protocol "%s", expecting "%s"',v,e),v!==e)throw new ye("protocol selection failed","ERR_UNSUPPORTED_PROTOCOL")}finally{f=!0,h=!1,d.resolve()}}if(t.source=async function*(){await p(),r.log.trace('optimistic: reading data from "%s" stream',e),yield*g.unwrap().source}(),t.closeRead!=null){const v=t.closeRead.bind(t);t.closeRead=async _=>{s||await p().catch(x=>{r.log.error("could not negotiate protocol before close read",x)}),await v(_)}}if(t.closeWrite!=null){const v=t.closeWrite.bind(t);t.closeWrite=async _=>{s||await p().catch(x=>{r.log.error("could not negotiate protocol before close write",x)}),await v(_)}}if(t.close!=null){const v=t.close.bind(t);t.close=async _=>{const x=[];l&&x.push(u.promise),h&&x.push(d.promise),x.length>0?await ma(Promise.all(x),_?.signal):(s=!0,a=!1,o.resolve()),await v(_)}}return{stream:t,protocol:e}}async function sD(t,e,r){e=Array.isArray(e)?e:[e],r.log.trace("handle: available protocols %s",e);const n=Iv(t,{...r,maxDataLength:Kz,maxLengthLength:2});for(;;){r.log.trace("handle: reading incoming string");const i=await Py(n,r);if(r.log.trace('handle: read "%s"',i),i===dc){r.log.trace('handle: respond with "%s" for "%s"',dc,i),await n3(n,pt(`${dc}
`),r),r.log.trace('handle: responded with "%s" for "%s"',dc,i);continue}if(e.includes(i))return r.log.trace('handle: respond with "%s" for "%s"',i,i),await n3(n,pt(`${i}
`),r),r.log.trace('handle: responded with "%s" for "%s"',i,i),{stream:n.unwrap(),protocol:i};if(i==="ls"){const s=new Pn(...e.map(a=>fh.single(pt(`${a}
`))),pt(`
`));r.log.trace('handle: respond with "%s" for %s',e,i),await n3(n,s,r),r.log.trace('handle: responded with "%s" for %s',e,i);continue}r.log('handle: respond with "na" for "%s"',i),await n3(n,pt(`na
`),r),r.log('handle: responded with "na" for "%s"',i)}}const S$t=500;class A$t{id;remoteAddr;remotePeer;direction;timeline;multiplexer;encryption;status;transient;log;tags;_newStream;_close;_abort;_getStreams;constructor(e){const{remoteAddr:r,remotePeer:n,newStream:i,close:s,abort:a,getStreams:o}=e;this.id=`${parseInt(String(Math.random()*1e9)).toString(36)}${Date.now()}`,this.remoteAddr=r,this.remotePeer=n,this.direction=e.direction,this.status="open",this.timeline=e.timeline,this.multiplexer=e.multiplexer,this.encryption=e.encryption,this.transient=e.transient??!1,this.log=e.logger.forComponent(`libp2p:connection:${this.direction}:${this.id}`),this.remoteAddr.getPeerId()==null&&(this.remoteAddr=this.remoteAddr.encapsulate(`/p2p/${this.remotePeer}`)),this._newStream=i,this._close=s,this._abort=a,this._getStreams=o,this.tags=[]}[Symbol.toStringTag]="Connection";[Rst]=!0;get streams(){return this._getStreams()}async newStream(e,r){if(this.status==="closing")throw new ye("the connection is being closed","ERR_CONNECTION_BEING_CLOSED");if(this.status==="closed")throw new ye("the connection is closed","ERR_CONNECTION_CLOSED");if(Array.isArray(e)||(e=[e]),this.transient&&r?.runOnTransientConnection!==!0)throw new ye("Cannot open protocol stream on transient connection","ERR_TRANSIENT_CONNECTION");const n=await this._newStream(e,r);return n.direction="outbound",n}async close(e={}){if(!(this.status==="closed"||this.status==="closing")){if(this.log("closing connection to %a",this.remoteAddr),this.status="closing",e.signal==null){const r=AbortSignal.timeout(S$t);Zt(1/0,r),e={...e,signal:r}}try{this.log.trace("closing all streams"),await Promise.all(this.streams.map(async r=>r.close(e))),this.log.trace("closing underlying transport"),await this._close(e),this.log.trace("updating timeline with close time"),this.status="closed",this.timeline.close=Date.now()}catch(r){this.log.error("error encountered during graceful close of connection to %a",this.remoteAddr,r),this.abort(r)}}}abort(e){this.log.error("aborting connection to %a due to error",this.remoteAddr,e),this.status="closing",this.streams.forEach(r=>{r.abort(e)}),this.log.error("all streams aborted",this.streams.length),this._abort(e),this.timeline.close=Date.now(),this.status="closed"}}function T$t(t){return new A$t(t)}const k$t=3e4;function C$t(t,e){try{const{options:r}=e.getHandler(t);return r.maxInboundStreams}catch(r){if(r.code!==qt.ERR_NO_HANDLER_FOR_PROTOCOL)throw r}return c6e}function I$t(t,e,r={}){try{const{options:n}=e.getHandler(t);if(n.maxOutboundStreams!=null)return n.maxOutboundStreams}catch(n){if(n.code!==qt.ERR_NO_HANDLER_FOR_PROTOCOL)throw n}return r.maxOutboundStreams??l6e}function Jse(t,e,r){let n=0;return r.streams.forEach(i=>{i.direction===e&&i.protocol===t&&n++}),n}class R$t{components;connectionEncryption;muxers;inboundUpgradeTimeout;events;constructor(e,r){this.components=e,this.connectionEncryption=new Map,r.connectionEncryption.forEach(n=>{this.connectionEncryption.set(n.protocol,n)}),this.muxers=new Map,r.muxers.forEach(n=>{this.muxers.set(n.protocol,n)}),this.inboundUpgradeTimeout=r.inboundUpgradeTimeout??JFt,this.events=e.events}[Symbol.toStringTag]="@libp2p/upgrader";async shouldBlockConnection(e,r,n){const i=this.components.connectionGater[n];if(i!==void 0&&await i(e,r))throw new ye(`The multiaddr connection is blocked by gater.${n}`,qt.ERR_CONNECTION_INTERCEPTED)}async upgradeInbound(e,r){if(!await this.components.connectionManager.acceptIncomingConnection(e))throw new ye("connection denied",qt.ERR_CONNECTION_DENIED);let i,s,a,o,c;const l=AbortSignal.timeout(this.inboundUpgradeTimeout),u=()=>{e.abort(new ye("inbound upgrade timeout",rv))};l.addEventListener("abort",u,{once:!0}),Zt(1/0,l);try{if(await this.components.connectionGater.denyInboundConnection?.(e)===!0)throw new ye("The multiaddr connection is blocked by gater.acceptConnection",qt.ERR_CONNECTION_INTERCEPTED);this.components.metrics?.trackMultiaddrConnection(e),e.log("starting the inbound connection upgrade");let f=e;if(r?.skipProtection!==!0){const h=this.components.connectionProtector;h!=null&&(e.log("protecting the inbound connection"),f=await h.protect(e))}try{if(i=f,r?.skipEncryption!==!0){r?.onProgress?.(new Bt("upgrader:encrypt-inbound-connection")),{conn:i,remotePeer:s,protocol:c}=await this._encryptInbound(f);const h={...f,...i};await this.shouldBlockConnection(s,h,"denyInboundEncryptedConnection")}else{const h=e.remoteAddr.getPeerId();if(h==null)throw new ye("inbound connection that skipped encryption must have a peer id",qt.ERR_INVALID_MULTIADDR);const d=ti(h);c="native",s=d}if(a=i,r?.muxerFactory!=null)o=r.muxerFactory;else if(this.muxers.size>0){r?.onProgress?.(new Bt("upgrader:multiplex-inbound-connection"));const h=await this._multiplexInbound({...f,...i},this.muxers);o=h.muxerFactory,a=h.stream}}catch(h){throw e.log.error("failed to upgrade inbound connection",h),h}return await this.shouldBlockConnection(s,e,"denyInboundUpgradedConnection"),e.log("successfully upgraded inbound connection"),this._createConnection({cryptoProtocol:c,direction:"inbound",maConn:e,upgradedConn:a,muxerFactory:o,remotePeer:s,transient:r?.transient})}finally{l.removeEventListener("abort",u),this.components.connectionManager.afterUpgradeInbound()}}async upgradeOutbound(e,r){const n=e.remoteAddr.getPeerId();let i;n!=null&&(i=ti(n),await this.shouldBlockConnection(i,e,"denyOutboundConnection"));let s,a,o,c,l;this.components.metrics?.trackMultiaddrConnection(e),e.log("starting the outbound connection upgrade");let u=e;if(r?.skipProtection!==!0){const f=this.components.connectionProtector;f!=null&&(u=await f.protect(e))}try{if(s=u,r?.skipEncryption!==!0){({conn:s,remotePeer:a,protocol:c}=await this._encryptOutbound(u,i));const f={...u,...s};await this.shouldBlockConnection(a,f,"denyOutboundEncryptedConnection")}else{if(i==null)throw new ye("Encryption was skipped but no peer id was passed",qt.ERR_INVALID_PEER);c="native",a=i}if(o=s,r?.muxerFactory!=null)l=r.muxerFactory;else if(this.muxers.size>0){const f=await this._multiplexOutbound({...u,...s},this.muxers);l=f.muxerFactory,o=f.stream}}catch(f){throw e.log.error("failed to upgrade outbound connection",f),await e.close(f),f}return await this.shouldBlockConnection(a,e,"denyOutboundUpgradedConnection"),e.log("successfully upgraded outbound connection"),this._createConnection({cryptoProtocol:c,direction:"outbound",maConn:e,upgradedConn:o,muxerFactory:l,remotePeer:a,transient:r?.transient})}_createConnection(e){const{cryptoProtocol:r,direction:n,maConn:i,upgradedConn:s,remotePeer:a,muxerFactory:o,transient:c}=e;let l,u,f;o!=null&&(l=o.createStreamMuxer({direction:n,onIncomingStream:g=>{f!=null&&Promise.resolve().then(async()=>{const p=this.components.registrar.getProtocols(),{stream:m,protocol:y}=await sD(g,p,{log:g.log,yieldBytes:!1});if(f==null)return;f.log("incoming stream opened on %s",y);const v=C$t(y,this.components.registrar);if(Jse(y,"inbound",f)===v){const x=new ye(`Too many inbound protocol streams for protocol "${y}" - limit ${v}`,qt.ERR_TOO_MANY_INBOUND_PROTOCOL_STREAMS);throw g.abort(x),x}g.source=m.source,g.sink=m.sink,g.protocol=y,m.closeWrite!=null&&(g.closeWrite=m.closeWrite),m.closeRead!=null&&(g.closeRead=m.closeRead),m.close!=null&&(g.close=m.close),await this.components.peerStore.merge(a,{protocols:[y]}),this.components.metrics?.trackProtocolStream(g,f),this._onStream({connection:f,stream:g,protocol:y})}).catch(async p=>{f.log.error("error handling incoming stream id %s",g.id,p.message,p.code,p.stack),g.timeline.close==null&&await g.close()})}}),u=async(g,p={})=>{if(l==null)throw new ye("Stream is not multiplexed",qt.ERR_MUXER_UNAVAILABLE);f.log("starting new stream for protocols %s",g);const m=await l.newStream();f.log.trace("started new stream %s for protocols %s",m.id,g);try{if(p.signal==null){m.log("no abort signal was passed while trying to negotiate protocols %s falling back to default timeout",g);const A=AbortSignal.timeout(k$t);Zt(1/0,A),p={...p,signal:A}}m.log.trace("selecting protocol from protocols %s",g);const{stream:y,protocol:v}=await iD(m,g,{...p,log:m.log,yieldBytes:!0});m.log("selected protocol %s",v);const _=I$t(v,this.components.registrar,p),x=Jse(v,"outbound",f);if(x>=_){const A=new ye(`Too many outbound protocol streams for protocol "${v}" - ${x}/${_}`,qt.ERR_TOO_MANY_OUTBOUND_PROTOCOL_STREAMS);throw m.abort(A),A}return await this.components.peerStore.merge(a,{protocols:[v]}),m.source=y.source,m.sink=y.sink,m.protocol=v,y.closeWrite!=null&&(m.closeWrite=y.closeWrite),y.closeRead!=null&&(m.closeRead=y.closeRead),y.close!=null&&(m.close=y.close),this.components.metrics?.trackProtocolStream(m,f),m}catch(y){throw f.log.error("could not create new stream for protocols %s",g,y),m.timeline.close==null&&m.abort(y),y.code!=null?y:new ye(String(y),qt.ERR_UNSUPPORTED_PROTOCOL)}},Promise.all([l.sink(s.source),s.sink(l.source)]).catch(g=>{f.log.error("error piping data through muxer",g)}));const h=i.timeline;i.timeline=new Proxy(h,{set:(...g)=>(f!=null&&g[1]==="close"&&g[2]!=null&&h.close==null&&(async()=>{try{f.status==="open"&&await f.close()}catch(p){f.log.error("error closing connection after timeline close",p)}finally{this.events.safeDispatchEvent("connection:close",{detail:f})}})().catch(p=>{f.log.error("error thrown while dispatching connection:close event",p)}),Reflect.set(...g))}),i.timeline.upgraded=Date.now();const d=()=>{throw new ye("connection is not multiplexed",qt.ERR_CONNECTION_NOT_MULTIPLEXED)};return f=T$t({remoteAddr:i.remoteAddr,remotePeer:a,status:"open",direction:n,timeline:i.timeline,multiplexer:l?.protocol,encryption:r,transient:c,logger:this.components.logger,newStream:u??d,getStreams:()=>l!=null?l.streams:[],close:async g=>{l!=null&&(f.log.trace("close muxer"),await l.close(g)),f.log.trace("close maconn"),await i.close(g),f.log.trace("closed maconn")},abort:g=>{i.abort(g),l?.abort(g)}}),this.events.safeDispatchEvent("connection:open",{detail:f}),f}_onStream(e){const{connection:r,stream:n,protocol:i}=e,{handler:s,options:a}=this.components.registrar.getHandler(i);if(r.transient&&a.runOnTransientConnection!==!0)throw new ye("Cannot open protocol stream on transient connection","ERR_TRANSIENT_CONNECTION");s({connection:r,stream:n})}async _encryptInbound(e){const r=Array.from(this.connectionEncryption.keys());e.log("handling inbound crypto protocol selection",r);try{const{stream:n,protocol:i}=await sD(e,r,{log:e.log}),s=this.connectionEncryption.get(i);if(s==null)throw new Error(`no crypto module found for ${i}`);return e.log("encrypting inbound connection using",i),{...await s.secureInbound(this.components.peerId,n),protocol:i}}catch(n){throw e.log.error("encrypting inbound connection failed",n),new ye(n.message,qt.ERR_ENCRYPTION_FAILED)}}async _encryptOutbound(e,r){const n=Array.from(this.connectionEncryption.keys());e.log("selecting outbound crypto protocol",n);try{e.log.trace("selecting encrypter from %s",n);const{stream:i,protocol:s}=await iD(e,n,{log:e.log,yieldBytes:!0}),a=this.connectionEncryption.get(s);if(a==null)throw new Error(`no crypto module found for ${s}`);return e.log("encrypting outbound connection to %p using %s",r,a),{...await a.secureOutbound(this.components.peerId,i,r),protocol:s}}catch(i){throw e.log.error("encrypting outbound connection to %p failed",r,i),new ye(i.message,qt.ERR_ENCRYPTION_FAILED)}}async _multiplexOutbound(e,r){const n=Array.from(r.keys());e.log("outbound selecting muxer %s",n);try{e.log.trace("selecting stream muxer from %s",n);const{stream:i,protocol:s}=await iD(e,n,{log:e.log,yieldBytes:!0});e.log("selected %s as muxer protocol",s);const a=r.get(s);return{stream:i,muxerFactory:a}}catch(i){throw e.log.error("error multiplexing outbound connection",i),new ye(String(i),qt.ERR_MUXER_UNAVAILABLE)}}async _multiplexInbound(e,r){const n=Array.from(r.keys());e.log("inbound handling muxers %s",n);try{const{stream:i,protocol:s}=await sD(e,n,{log:e.log}),a=r.get(s);return{stream:i,muxerFactory:a}}catch(i){throw e.log.error("error multiplexing inbound connection",i),new ye(String(i),qt.ERR_MUXER_UNAVAILABLE)}}}class P$t extends ea{peerId;peerStore;contentRouting;peerRouting;metrics;services;logger;status;components;log;constructor(e){super(),this.status="stopped";const r=new ea,n=r.dispatchEvent.bind(r);r.dispatchEvent=o=>{const c=n(o),l=this.dispatchEvent(new sf(o.type,{detail:o.detail}));return c||l},Zt(1/0,r),this.peerId=e.peerId,this.logger=e.logger??tT(),this.log=this.logger.forComponent("libp2p"),this.services={};const i=this.components=FFt({peerId:e.peerId,privateKey:e.privateKey,nodeInfo:e.nodeInfo??{name:W4e,version:H4e},logger:this.logger,events:r,datastore:e.datastore??new z3e,connectionGater:zFt(e.connectionGater),dns:e.dns});this.peerStore=this.configureComponent("peerStore",new PFt(i,{addressFilter:this.components.connectionGater.filterMultiaddrForPeer,...e.peerStore})),e.metrics!=null&&(this.metrics=this.configureComponent("metrics",e.metrics(this.components))),i.events.addEventListener("peer:update",o=>{if(o.detail.previous==null){const c={id:o.detail.peer.id,multiaddrs:o.detail.peer.addresses.map(l=>l.multiaddr)};i.events.safeDispatchEvent("peer:discovery",{detail:c})}}),e.connectionProtector!=null&&this.configureComponent("connectionProtector",e.connectionProtector(i)),this.components.upgrader=new R$t(this.components,{connectionEncryption:(e.connectionEncryption??[]).map((o,c)=>this.configureComponent(`connection-encryption-${c}`,o(this.components))),muxers:(e.streamMuxers??[]).map((o,c)=>this.configureComponent(`stream-muxers-${c}`,o(this.components))),inboundUpgradeTimeout:e.connectionManager?.inboundUpgradeTimeout}),this.configureComponent("transportManager",new b$t(this.components,e.transportManager)),this.configureComponent("connectionManager",new l$t(this.components,e.connectionManager)),e.connectionMonitor?.enabled!==!1&&this.configureComponent("connectionMonitor",new p$t(this.components,e.connectionMonitor)),this.configureComponent("registrar",new v$t(this.components)),this.configureComponent("addressManager",new OFt(this.components,e.addresses));const s=(e.peerRouters??[]).map((o,c)=>this.configureComponent(`peer-router-${c}`,o(this.components)));this.peerRouting=this.components.peerRouting=this.configureComponent("peerRouting",new m$t(this.components,{routers:s}));const a=(e.contentRouters??[]).map((o,c)=>this.configureComponent(`content-router-${c}`,o(this.components)));if(this.contentRouting=this.components.contentRouting=this.configureComponent("contentRouting",new g$t(this.components,{routers:a})),this.configureComponent("randomWalk",new y$t(this.components)),(e.peerDiscovery??[]).forEach((o,c)=>{this.configureComponent(`peer-discovery-${c}`,o(this.components)).addEventListener("peer",u=>{this.#e(u)})}),e.transports?.forEach((o,c)=>{this.components.transportManager.add(this.configureComponent(`transport-${c}`,o(this.components)))}),e.services!=null)for(const o of Object.keys(e.services)){const c=e.services[o],l=c(this.components);if(l==null){this.log.error("service factory %s returned null or undefined instance",o);continue}this.services[o]=l,this.configureComponent(o,l),l[ev]!=null&&(this.log("registering service %s for content routing",o),a.push(l[ev])),l[tv]!=null&&(this.log("registering service %s for peer routing",o),s.push(l[tv])),l[p4]!=null&&(this.log("registering service %s for peer discovery",o),l[p4].addEventListener?.("peer",u=>{this.#e(u)}))}$Ft(i)}configureComponent(e,r){return r==null&&this.log.error("component %s was null or undefined",e),this.components[e]=r,r}async start(){if(this.status==="stopped"){this.status="starting",this.log("libp2p is starting");try{await this.components.beforeStart?.(),await this.components.start(),await this.components.afterStart?.(),this.status="started",this.safeDispatchEvent("start",{detail:this}),this.log("libp2p has started")}catch(e){throw this.log.error("An error occurred starting libp2p",e),this.status="started",await this.stop(),e}}}async stop(){this.status==="started"&&(this.log("libp2p is stopping"),this.status="stopping",await this.components.beforeStop?.(),await this.components.stop(),await this.components.afterStop?.(),this.status="stopped",this.safeDispatchEvent("stop",{detail:this}),this.log("libp2p has stopped"))}getConnections(e){return this.components.connectionManager.getConnections(e)}getDialQueue(){return this.components.connectionManager.getDialQueue()}getPeers(){const e=new $u;for(const r of this.components.connectionManager.getConnections())e.add(r.remotePeer);return Array.from(e)}async dial(e,r={}){return this.components.connectionManager.openConnection(e,{priority:75,...r})}async dialProtocol(e,r,n={}){if(r==null)throw new ye("no protocols were provided to open a stream",qt.ERR_INVALID_PROTOCOLS_FOR_STREAM);if(r=Array.isArray(r)?r:[r],r.length===0)throw new ye("no protocols were provided to open a stream",qt.ERR_INVALID_PROTOCOLS_FOR_STREAM);return(await this.dial(e,n)).newStream(r,n)}getMultiaddrs(){return this.components.addressManager.getAddresses()}getProtocols(){return this.components.registrar.getProtocols()}async hangUp(e,r={}){cT(e)&&(e=ti(e.getPeerId()??"")),await this.components.connectionManager.closeConnections(e,r)}async getPublicKey(e,r={}){if(this.log("getPublicKey %p",e),e.publicKey!=null)return e.publicKey;try{const s=await this.peerStore.get(e);if(s.id.publicKey!=null)return s.id.publicKey}catch(s){if(s.code!==qt.ERR_NOT_FOUND)throw s}const n=Yi([pt("/pk/"),e.multihash.digest]),i=await this.contentRouting.get(n,r);return wm(i),await this.peerStore.patch(e,{publicKey:i}),i}async handle(e,r,n){Array.isArray(e)||(e=[e]),await Promise.all(e.map(async i=>{await this.components.registrar.handle(i,r,n)}))}async unhandle(e){Array.isArray(e)||(e=[e]),await Promise.all(e.map(async r=>{await this.components.registrar.unhandle(r)}))}async register(e,r){return this.components.registrar.register(e,r)}unregister(e){this.components.registrar.unregister(e)}async isDialable(e,r={}){return this.components.connectionManager.isDialable(e,r)}#e(e){const{detail:r}=e;if(r.id.toString()===this.peerId.toString()){this.log.error(new Error(qt.ERR_DISCOVERED_SELF));return}this.components.peerStore.merge(r.id,{multiaddrs:r.multiaddrs}).catch(n=>{this.log.error(n)})}}async function B$t(t={}){const e=t.peerId??=await TFt();if(e.privateKey==null)throw new ye("peer id was missing private key","ERR_MISSING_PRIVATE_KEY");return t.privateKey??=await _m(e.privateKey),new P$t(await ZFt(t))}async function u6e(t={}){const e=await B$t(t);return t.start!==!1&&await e.start(),e}async function D$t(t){const e=t.libp2p?.peerId,r=t.logger??tT(),n=new Ni("/pkcs8/self");let i;e==null&&t.datastore!=null&&(i=C4e(t.keychain)({datastore:t.datastore,logger:r}),await t.datastore.has(n)&&(t.libp2p=t.libp2p??{},t.libp2p.peerId=await i.exportPeerId("self")));const s=AFt(t);s.datastore=s.datastore??t.datastore,t=t??{};const a=await u6e({...s,...t.libp2p,start:!1});return e==null&&i!=null&&!await t.datastore.has(n)&&await i.importPeer("self",a.peerId),a}async function O$t(t={}){const e=t.datastore??new z3e,r=t.blockstore??new sRt;let n;N$t(t.libp2p)?n=t.libp2p:n=await D$t({...t,libp2p:{dns:t.dns,...t.libp2p,start:void 0},datastore:e});const i=new _Bt({...t,libp2p:n,datastore:e,blockstore:r,blockBrokers:t.blockBrokers??[APt(),g3e()],routers:[mBt(n),pBt()],metrics:n.metrics});return t.start!==!1&&await i.start(),i}function N$t(t){return t==null?!1:["dial","dialProtocol","hangUp","handle","unhandle","getMultiaddrs","getProtocols"].every(r=>typeof t[r]=="function")}class M$t{has(e,r){return Promise.reject(new Error(".has is not implemented"))}put(e,r,n){return Promise.reject(new Error(".put is not implemented"))}async*putMany(e,r){for await(const{cid:n,block:i}of e)await this.put(n,i,r),yield n}get(e,r){return Promise.reject(new Error(".get is not implemented"))}async*getMany(e,r){for await(const n of e)yield{cid:n,block:await this.get(n,r)}}delete(e,r){return Promise.reject(new Error(".delete is not implemented"))}async*deleteMany(e,r){for await(const n of e)await this.delete(n,r),yield n}async*getAll(e){throw new Error(".getAll is not implemented")}}class U9 extends Error{static name="OpenFailedError";static code="ERR_OPEN_FAILED";name=U9.name;code=U9.code;constructor(e="Open failed"){super(e)}}class V9 extends Error{static name="PutFailedError";static code="ERR_PUT_FAILED";name=V9.name;code=V9.code;constructor(e="Put failed"){super(e)}}class j9 extends Error{static name="GetFailedError";static code="ERR_GET_FAILED";name=j9.name;code=j9.code;constructor(e="Get failed"){super(e)}}class z9 extends Error{static name="DeleteFailedError";static code="ERR_DELETE_FAILED";name=z9.name;code=z9.code;constructor(e="Delete failed"){super(e)}}class q9 extends Error{static name="NotFoundError";static code="ERR_NOT_FOUND";name=q9.name;code=q9.code;constructor(e="Not Found"){super(e)}}Vi.formatters.b=t=>t==null?"undefined":Rs.baseEncode(t);Vi.formatters.t=t=>t==null?"undefined":Ho.baseEncode(t);Vi.formatters.m=t=>t==null?"undefined":Sc.baseEncode(t);Vi.formatters.p=t=>t==null?"undefined":t.toString();Vi.formatters.c=t=>t==null?"undefined":t.toString();Vi.formatters.k=t=>t==null?"undefined":t.toString();Vi.formatters.a=t=>t==null?"undefined":t.toString();Vi.formatters.e=t=>t==null?"undefined":t.stack??t.message;function L$t(t){const e=()=>{};return e.enabled=!1,e.color="",e.diff=0,e.log=()=>{},e.namespace=t,e.destroy=()=>!0,e.extend=()=>e,e}function F$t(t){let e=L$t(`${t}:trace`);return Vi.enabled(`${t}:trace`)&&Vi.names.map(r=>r.toString()).find(r=>r.includes(":trace"))!=null&&(e=Vi(`${t}:trace`)),Object.assign(Vi(t),{error:Vi(`${t}:error`),trace:e})}F$t("blockstore:core:tiered");class $$t extends M$t{db;opts;base;constructor(e,r={}){super(),this.db=typeof e=="string"?new $0e(e,{...r,keyEncoding:"utf8",valueEncoding:"view"}):e,this.opts={createIfMissing:!0,compression:!1,...r},this.base=r.base??p0e}#e(e){return`/${this.base.encoder.encode(e.multihash.bytes)}`}#t(e){return Dt.createV1(Wu,c0(this.base.decoder.decode(e.substring(1))))}async open(){try{await this.db.open(this.opts)}catch(e){throw new U9(String(e))}}async put(e,r){try{return await this.db.put(this.#e(e),r),e}catch(n){throw new V9(String(n))}}async get(e){let r;try{r=await this.db.get(this.#e(e))}catch(n){throw n.notFound!=null?new q9(String(n)):new j9(String(n))}return r}async has(e){try{await this.db.get(this.#e(e))}catch(r){if(r.notFound!=null)return!1;throw r}return!0}async delete(e){try{await this.db.del(this.#e(e))}catch(r){throw new z9(String(r))}}async close(){await this.db.close()}async*getAll(e){for await(const{key:r,value:n}of this.#r({values:!0}))yield{cid:this.#t(r),block:n}}async*#r(e){const r={keys:!0,keyEncoding:"buffer",values:e.values};if(e.prefix!=null){const i=e.prefix.toString();r.gte=i,r.lt=i+"ÿ"}const n=this.db.iterator(r);try{for await(const[i,s]of n)yield{key:new TextDecoder().decode(i),value:s}}finally{await n.close()}}}const Nb=1e3,Gz=60*Nb,Qse="/floodsub/1.0.0",eae="/meshsub/1.0.0",tae="/meshsub/1.1.0",U$t=6,V$t=4,j$t=12,z$t=4,q$t=2,H$t=5,W$t=3,K$t=6,G$t=.25,Y$t=3,rae=100,X$t=Nb,Z$t=Gz,J$t=16,Q$t=Gz,eUt=10*Nb,tUt=15,rUt=300,nUt=Nb,iUt=60,sUt=2,aUt=10*Nb,q2=5e3,oUt=10,cUt=3*Nb,lUt=2*Gz,uUt=120*1e3,fUt="ERR_TOPIC_VALIDATOR_REJECT",hUt="ERR_TOPIC_VALIDATOR_IGNORE",dUt=0,pUt=128,gUt=1e3,mUt=1e3,yUt=1,vUt={maxSubscriptions:1/0,maxMessages:1/0,maxIhaveMessageIDs:1/0,maxIwantMessageIDs:1/0,maxControlMessages:1/0,maxPeerInfos:1/0};var $g;(function(t){(function(r){let n;r.codec=()=>(n==null&&(n=bu((i,s,a={})=>{a.lengthDelimited!==!1&&s.fork(),i.subscribe!=null&&(s.uint32(8),s.bool(i.subscribe)),i.topic!=null&&(s.uint32(18),s.string(i.topic)),a.lengthDelimited!==!1&&s.ldelim()},(i,s,a={})=>{const o={},c=s==null?i.len:i.pos+s;for(;i.pos<c;){const l=i.uint32();switch(l>>>3){case 1:{o.subscribe=i.bool();break}case 2:{o.topic=i.string();break}default:{i.skipType(l&7);break}}}return o})),n),r.encode=i=>vu(i,r.codec()),r.decode=(i,s)=>yu(i,r.codec(),s)})(t.SubOpts||(t.SubOpts={})),function(r){let n;r.codec=()=>(n==null&&(n=bu((i,s,a={})=>{a.lengthDelimited!==!1&&s.fork(),i.from!=null&&(s.uint32(10),s.bytes(i.from)),i.data!=null&&(s.uint32(18),s.bytes(i.data)),i.seqno!=null&&(s.uint32(26),s.bytes(i.seqno)),i.topic!=null&&i.topic!==""&&(s.uint32(34),s.string(i.topic)),i.signature!=null&&(s.uint32(42),s.bytes(i.signature)),i.key!=null&&(s.uint32(50),s.bytes(i.key)),a.lengthDelimited!==!1&&s.ldelim()},(i,s,a={})=>{const o={topic:""},c=s==null?i.len:i.pos+s;for(;i.pos<c;){const l=i.uint32();switch(l>>>3){case 1:{o.from=i.bytes();break}case 2:{o.data=i.bytes();break}case 3:{o.seqno=i.bytes();break}case 4:{o.topic=i.string();break}case 5:{o.signature=i.bytes();break}case 6:{o.key=i.bytes();break}default:{i.skipType(l&7);break}}}return o})),n),r.encode=i=>vu(i,r.codec()),r.decode=(i,s)=>yu(i,r.codec(),s)}(t.Message||(t.Message={})),function(r){let n;r.codec=()=>(n==null&&(n=bu((i,s,a={})=>{if(a.lengthDelimited!==!1&&s.fork(),i.ihave!=null)for(const o of i.ihave)s.uint32(10),t.ControlIHave.codec().encode(o,s);if(i.iwant!=null)for(const o of i.iwant)s.uint32(18),t.ControlIWant.codec().encode(o,s);if(i.graft!=null)for(const o of i.graft)s.uint32(26),t.ControlGraft.codec().encode(o,s);if(i.prune!=null)for(const o of i.prune)s.uint32(34),t.ControlPrune.codec().encode(o,s);a.lengthDelimited!==!1&&s.ldelim()},(i,s,a={})=>{const o={ihave:[],iwant:[],graft:[],prune:[]},c=s==null?i.len:i.pos+s;for(;i.pos<c;){const l=i.uint32();switch(l>>>3){case 1:{if(a.limits?.ihave!=null&&o.ihave.length===a.limits.ihave)throw new Zh('decode error - map field "ihave" had too many elements',"ERR_MAX_LENGTH");o.ihave.push(t.ControlIHave.codec().decode(i,i.uint32()));break}case 2:{if(a.limits?.iwant!=null&&o.iwant.length===a.limits.iwant)throw new Zh('decode error - map field "iwant" had too many elements',"ERR_MAX_LENGTH");o.iwant.push(t.ControlIWant.codec().decode(i,i.uint32()));break}case 3:{if(a.limits?.graft!=null&&o.graft.length===a.limits.graft)throw new Zh('decode error - map field "graft" had too many elements',"ERR_MAX_LENGTH");o.graft.push(t.ControlGraft.codec().decode(i,i.uint32()));break}case 4:{if(a.limits?.prune!=null&&o.prune.length===a.limits.prune)throw new Zh('decode error - map field "prune" had too many elements',"ERR_MAX_LENGTH");o.prune.push(t.ControlPrune.codec().decode(i,i.uint32()));break}default:{i.skipType(l&7);break}}}return o})),n),r.encode=i=>vu(i,r.codec()),r.decode=(i,s)=>yu(i,r.codec(),s)}(t.ControlMessage||(t.ControlMessage={})),function(r){let n;r.codec=()=>(n==null&&(n=bu((i,s,a={})=>{if(a.lengthDelimited!==!1&&s.fork(),i.topicID!=null&&(s.uint32(10),s.string(i.topicID)),i.messageIDs!=null)for(const o of i.messageIDs)s.uint32(18),s.bytes(o);a.lengthDelimited!==!1&&s.ldelim()},(i,s,a={})=>{const o={messageIDs:[]},c=s==null?i.len:i.pos+s;for(;i.pos<c;){const l=i.uint32();switch(l>>>3){case 1:{o.topicID=i.string();break}case 2:{if(a.limits?.messageIDs!=null&&o.messageIDs.length===a.limits.messageIDs)throw new Zh('decode error - map field "messageIDs" had too many elements',"ERR_MAX_LENGTH");o.messageIDs.push(i.bytes());break}default:{i.skipType(l&7);break}}}return o})),n),r.encode=i=>vu(i,r.codec()),r.decode=(i,s)=>yu(i,r.codec(),s)}(t.ControlIHave||(t.ControlIHave={})),function(r){let n;r.codec=()=>(n==null&&(n=bu((i,s,a={})=>{if(a.lengthDelimited!==!1&&s.fork(),i.messageIDs!=null)for(const o of i.messageIDs)s.uint32(10),s.bytes(o);a.lengthDelimited!==!1&&s.ldelim()},(i,s,a={})=>{const o={messageIDs:[]},c=s==null?i.len:i.pos+s;for(;i.pos<c;){const l=i.uint32();switch(l>>>3){case 1:{if(a.limits?.messageIDs!=null&&o.messageIDs.length===a.limits.messageIDs)throw new Zh('decode error - map field "messageIDs" had too many elements',"ERR_MAX_LENGTH");o.messageIDs.push(i.bytes());break}default:{i.skipType(l&7);break}}}return o})),n),r.encode=i=>vu(i,r.codec()),r.decode=(i,s)=>yu(i,r.codec(),s)}(t.ControlIWant||(t.ControlIWant={})),function(r){let n;r.codec=()=>(n==null&&(n=bu((i,s,a={})=>{a.lengthDelimited!==!1&&s.fork(),i.topicID!=null&&(s.uint32(10),s.string(i.topicID)),a.lengthDelimited!==!1&&s.ldelim()},(i,s,a={})=>{const o={},c=s==null?i.len:i.pos+s;for(;i.pos<c;){const l=i.uint32();switch(l>>>3){case 1:{o.topicID=i.string();break}default:{i.skipType(l&7);break}}}return o})),n),r.encode=i=>vu(i,r.codec()),r.decode=(i,s)=>yu(i,r.codec(),s)}(t.ControlGraft||(t.ControlGraft={})),function(r){let n;r.codec=()=>(n==null&&(n=bu((i,s,a={})=>{if(a.lengthDelimited!==!1&&s.fork(),i.topicID!=null&&(s.uint32(10),s.string(i.topicID)),i.peers!=null)for(const o of i.peers)s.uint32(18),t.PeerInfo.codec().encode(o,s);i.backoff!=null&&(s.uint32(24),s.uint64Number(i.backoff)),a.lengthDelimited!==!1&&s.ldelim()},(i,s,a={})=>{const o={peers:[]},c=s==null?i.len:i.pos+s;for(;i.pos<c;){const l=i.uint32();switch(l>>>3){case 1:{o.topicID=i.string();break}case 2:{if(a.limits?.peers!=null&&o.peers.length===a.limits.peers)throw new Zh('decode error - map field "peers" had too many elements',"ERR_MAX_LENGTH");o.peers.push(t.PeerInfo.codec().decode(i,i.uint32()));break}case 3:{o.backoff=i.uint64Number();break}default:{i.skipType(l&7);break}}}return o})),n),r.encode=i=>vu(i,r.codec()),r.decode=(i,s)=>yu(i,r.codec(),s)}(t.ControlPrune||(t.ControlPrune={})),function(r){let n;r.codec=()=>(n==null&&(n=bu((i,s,a={})=>{a.lengthDelimited!==!1&&s.fork(),i.peerID!=null&&(s.uint32(10),s.bytes(i.peerID)),i.signedPeerRecord!=null&&(s.uint32(18),s.bytes(i.signedPeerRecord)),a.lengthDelimited!==!1&&s.ldelim()},(i,s,a={})=>{const o={},c=s==null?i.len:i.pos+s;for(;i.pos<c;){const l=i.uint32();switch(l>>>3){case 1:{o.peerID=i.bytes();break}case 2:{o.signedPeerRecord=i.bytes();break}default:{i.skipType(l&7);break}}}return o})),n),r.encode=i=>vu(i,r.codec()),r.decode=(i,s)=>yu(i,r.codec(),s)}(t.PeerInfo||(t.PeerInfo={}));let e;t.codec=()=>(e==null&&(e=bu((r,n,i={})=>{if(i.lengthDelimited!==!1&&n.fork(),r.subscriptions!=null)for(const s of r.subscriptions)n.uint32(10),t.SubOpts.codec().encode(s,n);if(r.messages!=null)for(const s of r.messages)n.uint32(18),t.Message.codec().encode(s,n);r.control!=null&&(n.uint32(26),t.ControlMessage.codec().encode(r.control,n)),i.lengthDelimited!==!1&&n.ldelim()},(r,n,i={})=>{const s={subscriptions:[],messages:[]},a=n==null?r.len:r.pos+n;for(;r.pos<a;){const o=r.uint32();switch(o>>>3){case 1:{if(i.limits?.subscriptions!=null&&s.subscriptions.length===i.limits.subscriptions)throw new Zh('decode error - map field "subscriptions" had too many elements',"ERR_MAX_LENGTH");s.subscriptions.push(t.SubOpts.codec().decode(r,r.uint32()));break}case 2:{if(i.limits?.messages!=null&&s.messages.length===i.limits.messages)throw new Zh('decode error - map field "messages" had too many elements',"ERR_MAX_LENGTH");s.messages.push(t.Message.codec().decode(r,r.uint32()));break}case 3:{s.control=t.ControlMessage.codec().decode(r,r.uint32());break}default:{r.skipType(o&7);break}}}return s})),e),t.encode=r=>vu(r,t.codec()),t.decode=(r,n)=>yu(r,t.codec(),n)})($g||($g={}));class bUt{gossip;msgs=new Map;msgIdToStrFn;history=[];notValidatedCount=0;constructor(e,r,n){this.gossip=e,this.msgIdToStrFn=n;for(let i=0;i<r;i++)this.history[i]=[]}get size(){return this.msgs.size}put(e,r,n=!1){const{msgIdStr:i}=e;return this.msgs.has(i)?!1:(this.msgs.set(i,{message:r,validated:n,originatingPeers:new Set,iwantCounts:new Map}),this.history[0].push({...e,topic:r.topic}),n||this.notValidatedCount++,!0)}observeDuplicate(e,r){const n=this.msgs.get(e);n!=null&&!n.validated&&n.originatingPeers.add(r)}get(e){return this.msgs.get(this.msgIdToStrFn(e))?.message}getWithIWantCount(e,r){const n=this.msgs.get(e);if(n==null)return null;const i=(n.iwantCounts.get(r)??0)+1;return n.iwantCounts.set(r,i),{msg:n.message,count:i}}getGossipIDs(e){const r=new Map;for(let n=0;n<this.gossip;n++)this.history[n].forEach(i=>{if((this.msgs.get(i.msgIdStr)?.validated??!1)&&e.has(i.topic)){let a=r.get(i.topic);a==null&&(a=[],r.set(i.topic,a)),a.push(i.msgId)}});return r}validate(e){const r=this.msgs.get(e);if(r==null)return null;r.validated||this.notValidatedCount--;const{message:n,originatingPeers:i}=r;return r.validated=!0,r.originatingPeers=new Set,{message:n,originatingPeers:i}}shift(){this.history[this.history.length-1].forEach(r=>{const n=this.msgs.get(r.msgIdStr);n!=null&&(this.msgs.delete(r.msgIdStr),n.validated||this.notValidatedCount--)}),this.history.pop(),this.history.unshift([])}remove(e){const r=this.msgs.get(e);return r==null?null:(this.msgs.delete(e),r)}}var nae;(function(t){t.StrictSign="StrictSign",t.StrictNoSign="StrictNoSign"})(nae||(nae={}));var $v;(function(t){t[t.Signing=0]="Signing",t[t.Anonymous=1]="Anonymous"})($v||($v={}));var Vu;(function(t){t.Error="error",t.Ignore="ignore",t.Reject="reject",t.Blacklisted="blacklisted"})(Vu||(Vu={}));var cc;(function(t){t.InvalidSignature="invalid_signature",t.InvalidSeqno="invalid_seqno",t.InvalidPeerId="invalid_peerid",t.SignaturePresent="signature_present",t.SeqnoPresent="seqno_present",t.FromPresent="from_present",t.TransformFailed="transform_failed"})(cc||(cc={}));var hc;(function(t){t.duplicate="duplicate",t.invalid="invalid",t.valid="valid"})(hc||(hc={}));function iae(t){switch(t){case Ml.Ignore:return Vu.Ignore;case Ml.Reject:return Vu.Reject;default:throw new Error("Unreachable")}}var sae;(function(t){t.forward="forward",t.publish="publish"})(sae||(sae={}));var pc;(function(t){t.Fanout="fanout",t.Random="random",t.Subscribed="subscribed",t.Outbound="outbound",t.NotEnough="not_enough",t.Opportunistic="opportunistic"})(pc||(pc={}));var Jf;(function(t){t.Dc="disconnected",t.BadScore="bad_score",t.Prune="prune",t.Excess="excess"})(Jf||(Jf={}));var H3;(function(t){t.GraftBackoff="graft_backoff",t.BrokenPromise="broken_promise",t.MessageDeficit="message_deficit",t.IPColocation="IP_colocation"})(H3||(H3={}));var W3;(function(t){t.LowScore="low_score",t.MaxIhave="max_ihave",t.MaxIasked="max_iasked"})(W3||(W3={}));var uy;(function(t){t.graylist="graylist",t.publish="publish",t.gossip="gossip",t.mesh="mesh"})(uy||(uy={}));function wUt(t,e,r){return{protocolsEnabled:t.gauge({name:"gossipsub_protocol",help:"Status of enabled protocols",labelNames:["protocol"]}),topicSubscriptionStatus:t.gauge({name:"gossipsub_topic_subscription_status",help:"Status of our subscription to this topic",labelNames:["topicStr"]}),topicPeersCount:t.gauge({name:"gossipsub_topic_peer_count",help:"Number of peers subscribed to each topic",labelNames:["topicStr"]}),meshPeerCounts:t.gauge({name:"gossipsub_mesh_peer_count",help:"Number of peers in our mesh",labelNames:["topicStr"]}),meshPeerInclusionEventsFanout:t.gauge({name:"gossipsub_mesh_peer_inclusion_events_fanout_total",help:"Number of times we include peers in a topic mesh for fanout reasons",labelNames:["topic"]}),meshPeerInclusionEventsRandom:t.gauge({name:"gossipsub_mesh_peer_inclusion_events_random_total",help:"Number of times we include peers in a topic mesh for random reasons",labelNames:["topic"]}),meshPeerInclusionEventsSubscribed:t.gauge({name:"gossipsub_mesh_peer_inclusion_events_subscribed_total",help:"Number of times we include peers in a topic mesh for subscribed reasons",labelNames:["topic"]}),meshPeerInclusionEventsOutbound:t.gauge({name:"gossipsub_mesh_peer_inclusion_events_outbound_total",help:"Number of times we include peers in a topic mesh for outbound reasons",labelNames:["topic"]}),meshPeerInclusionEventsNotEnough:t.gauge({name:"gossipsub_mesh_peer_inclusion_events_not_enough_total",help:"Number of times we include peers in a topic mesh for not_enough reasons",labelNames:["topic"]}),meshPeerInclusionEventsOpportunistic:t.gauge({name:"gossipsub_mesh_peer_inclusion_events_opportunistic_total",help:"Number of times we include peers in a topic mesh for opportunistic reasons",labelNames:["topic"]}),meshPeerInclusionEventsUnknown:t.gauge({name:"gossipsub_mesh_peer_inclusion_events_unknown_total",help:"Number of times we include peers in a topic mesh for unknown reasons",labelNames:["topic"]}),meshPeerChurnEventsDisconnected:t.gauge({name:"gossipsub_peer_churn_events_disconnected_total",help:"Number of times we remove peers in a topic mesh for disconnected reasons",labelNames:["topic"]}),meshPeerChurnEventsBadScore:t.gauge({name:"gossipsub_peer_churn_events_bad_score_total",help:"Number of times we remove peers in a topic mesh for bad_score reasons",labelNames:["topic"]}),meshPeerChurnEventsPrune:t.gauge({name:"gossipsub_peer_churn_events_prune_total",help:"Number of times we remove peers in a topic mesh for prune reasons",labelNames:["topic"]}),meshPeerChurnEventsExcess:t.gauge({name:"gossipsub_peer_churn_events_excess_total",help:"Number of times we remove peers in a topic mesh for excess reasons",labelNames:["topic"]}),meshPeerChurnEventsUnknown:t.gauge({name:"gossipsub_peer_churn_events_unknown_total",help:"Number of times we remove peers in a topic mesh for unknown reasons",labelNames:["topic"]}),peersPerProtocol:t.gauge({name:"gossipsub_peers_per_protocol_count",help:"Peers connected for each topic",labelNames:["protocol"]}),heartbeatDuration:t.histogram({name:"gossipsub_heartbeat_duration_seconds",help:"The time it takes to complete one iteration of the heartbeat",buckets:[.01,.1,1]}),heartbeatSkipped:t.gauge({name:"gossipsub_heartbeat_skipped",help:"Heartbeat run took longer than heartbeat interval so next is skipped"}),acceptedMessagesTotal:t.gauge({name:"gossipsub_accepted_messages_total",help:"Total accepted messages for each topic",labelNames:["topic"]}),ignoredMessagesTotal:t.gauge({name:"gossipsub_ignored_messages_total",help:"Total ignored messages for each topic",labelNames:["topic"]}),rejectedMessagesTotal:t.gauge({name:"gossipsub_rejected_messages_total",help:"Total rejected messages for each topic",labelNames:["topic"]}),unknownValidationResultsTotal:t.gauge({name:"gossipsub_unknown_validation_results_total",help:"Total unknown validation results for each topic",labelNames:["topic"]}),asyncValidationMcacheHit:t.gauge({name:"gossipsub_async_validation_mcache_hit_total",help:"Async validation result reported by the user layer",labelNames:["hit"]}),asyncValidationDelayFromFirstSeenSec:t.histogram({name:"gossipsub_async_validation_delay_from_first_seen",help:"Async validation report delay from first seen in second",buckets:[.01,.03,.1,.3,1,3,10]}),asyncValidationUnknownFirstSeen:t.gauge({name:"gossipsub_async_validation_unknown_first_seen_count_total",help:"Async validation report unknown first seen value for message"}),peerReadStreamError:t.gauge({name:"gossipsub_peer_read_stream_err_count_total",help:"Peer read stream error"}),rpcRecvBytes:t.gauge({name:"gossipsub_rpc_recv_bytes_total",help:"RPC recv"}),rpcRecvCount:t.gauge({name:"gossipsub_rpc_recv_count_total",help:"RPC recv"}),rpcRecvSubscription:t.gauge({name:"gossipsub_rpc_recv_subscription_total",help:"RPC recv"}),rpcRecvMessage:t.gauge({name:"gossipsub_rpc_recv_message_total",help:"RPC recv"}),rpcRecvControl:t.gauge({name:"gossipsub_rpc_recv_control_total",help:"RPC recv"}),rpcRecvIHave:t.gauge({name:"gossipsub_rpc_recv_ihave_total",help:"RPC recv"}),rpcRecvIWant:t.gauge({name:"gossipsub_rpc_recv_iwant_total",help:"RPC recv"}),rpcRecvGraft:t.gauge({name:"gossipsub_rpc_recv_graft_total",help:"RPC recv"}),rpcRecvPrune:t.gauge({name:"gossipsub_rpc_recv_prune_total",help:"RPC recv"}),rpcDataError:t.gauge({name:"gossipsub_rpc_data_err_count_total",help:"RPC data error"}),rpcRecvError:t.gauge({name:"gossipsub_rpc_recv_err_count_total",help:"RPC recv error"}),rpcRecvNotAccepted:t.gauge({name:"gossipsub_rpc_rcv_not_accepted_total",help:"Total count of RPC dropped because acceptFrom() == false"}),rpcSentBytes:t.gauge({name:"gossipsub_rpc_sent_bytes_total",help:"RPC sent"}),rpcSentCount:t.gauge({name:"gossipsub_rpc_sent_count_total",help:"RPC sent"}),rpcSentSubscription:t.gauge({name:"gossipsub_rpc_sent_subscription_total",help:"RPC sent"}),rpcSentMessage:t.gauge({name:"gossipsub_rpc_sent_message_total",help:"RPC sent"}),rpcSentControl:t.gauge({name:"gossipsub_rpc_sent_control_total",help:"RPC sent"}),rpcSentIHave:t.gauge({name:"gossipsub_rpc_sent_ihave_total",help:"RPC sent"}),rpcSentIWant:t.gauge({name:"gossipsub_rpc_sent_iwant_total",help:"RPC sent"}),rpcSentGraft:t.gauge({name:"gossipsub_rpc_sent_graft_total",help:"RPC sent"}),rpcSentPrune:t.gauge({name:"gossipsub_rpc_sent_prune_total",help:"RPC sent"}),msgPublishCount:t.gauge({name:"gossipsub_msg_publish_count_total",help:"Total count of msg published by topic",labelNames:["topic"]}),msgPublishPeersByTopic:t.gauge({name:"gossipsub_msg_publish_peers_total",help:"Total count of peers that we publish a msg to",labelNames:["topic"]}),directPeersPublishedTotal:t.gauge({name:"gossipsub_direct_peers_published_total",help:"Total direct peers that we publish a msg to",labelNames:["topic"]}),floodsubPeersPublishedTotal:t.gauge({name:"gossipsub_floodsub_peers_published_total",help:"Total floodsub peers that we publish a msg to",labelNames:["topic"]}),meshPeersPublishedTotal:t.gauge({name:"gossipsub_mesh_peers_published_total",help:"Total mesh peers that we publish a msg to",labelNames:["topic"]}),fanoutPeersPublishedTotal:t.gauge({name:"gossipsub_fanout_peers_published_total",help:"Total fanout peers that we publish a msg to",labelNames:["topic"]}),msgPublishBytes:t.gauge({name:"gossipsub_msg_publish_bytes_total",help:"Total count of msg publish data.length bytes",labelNames:["topic"]}),msgPublishTime:t.histogram({name:"gossipsub_msg_publish_seconds",help:"Total time in seconds to publish a message",buckets:[.001,.002,.005,.01,.1,.5,1],labelNames:["topic"]}),msgForwardCount:t.gauge({name:"gossipsub_msg_forward_count_total",help:"Total count of msg forwarded by topic",labelNames:["topic"]}),msgForwardPeers:t.gauge({name:"gossipsub_msg_forward_peers_total",help:"Total count of peers that we forward a msg to",labelNames:["topic"]}),msgReceivedPreValidation:t.gauge({name:"gossipsub_msg_received_prevalidation_total",help:"Total count of recv msgs before any validation",labelNames:["topic"]}),msgReceivedError:t.gauge({name:"gossipsub_msg_received_error_total",help:"Total count of recv msgs error",labelNames:["topic"]}),prevalidationInvalidTotal:t.gauge({name:"gossipsub_pre_validation_invalid_total",help:"Total count of invalid messages received",labelNames:["topic"]}),prevalidationValidTotal:t.gauge({name:"gossipsub_pre_validation_valid_total",help:"Total count of valid messages received",labelNames:["topic"]}),prevalidationDuplicateTotal:t.gauge({name:"gossipsub_pre_validation_duplicate_total",help:"Total count of duplicate messages received",labelNames:["topic"]}),prevalidationUnknownTotal:t.gauge({name:"gossipsub_pre_validation_unknown_status_total",help:"Total count of unknown_status messages received",labelNames:["topic"]}),msgReceivedInvalid:t.gauge({name:"gossipsub_msg_received_invalid_total",help:"Tracks specific reason of invalid",labelNames:["error"]}),msgReceivedInvalidByTopic:t.gauge({name:"gossipsub_msg_received_invalid_by_topic_total",help:"Tracks specific invalid message by topic",labelNames:["topic"]}),duplicateMsgDeliveryDelay:t.histogram({name:"gossisub_duplicate_msg_delivery_delay_seconds",help:"Time since the 1st duplicated message validated",labelNames:["topic"],buckets:[.25*r.maxMeshMessageDeliveriesWindowSec,.5*r.maxMeshMessageDeliveriesWindowSec,Number(r.maxMeshMessageDeliveriesWindowSec),2*r.maxMeshMessageDeliveriesWindowSec,4*r.maxMeshMessageDeliveriesWindowSec]}),duplicateMsgLateDelivery:t.gauge({name:"gossisub_duplicate_msg_late_delivery_total",help:"Total count of late duplicate message delivery by topic, which triggers P3 penalty",labelNames:["topic"]}),duplicateMsgIgnored:t.gauge({name:"gossisub_ignored_published_duplicate_msgs_total",help:"Total count of published duplicate message ignored by topic",labelNames:["topic"]}),scoreFnCalls:t.gauge({name:"gossipsub_score_fn_calls_total",help:"Total times score() is called"}),scoreFnRuns:t.gauge({name:"gossipsub_score_fn_runs_total",help:"Total times score() call actually computed computeScore(), no cache"}),scoreCachedDelta:t.histogram({name:"gossipsub_score_cache_delta",help:"Delta of score between cached values that expired",buckets:[10,100,1e3]}),peersByScoreThreshold:t.gauge({name:"gossipsub_peers_by_score_threshold_count",help:"Current count of peers by score threshold",labelNames:["threshold"]}),score:t.avgMinMax({name:"gossipsub_score",help:"Avg min max of gossip scores"}),scoreWeights:t.avgMinMax({name:"gossipsub_score_weights",help:"Separate score weights",labelNames:["topic","p"]}),scorePerMesh:t.avgMinMax({name:"gossipsub_score_per_mesh",help:"Histogram of the scores for each mesh topic",labelNames:["topic"]}),scoringPenalties:t.gauge({name:"gossipsub_scoring_penalties_total",help:"A counter of the kind of penalties being applied to peers",labelNames:["penalty"]}),behaviourPenalty:t.histogram({name:"gossipsub_peer_stat_behaviour_penalty",help:"Current peer stat behaviour_penalty at each scrape",buckets:[.25*r.behaviourPenaltyThreshold,.5*r.behaviourPenaltyThreshold,Number(r.behaviourPenaltyThreshold),2*r.behaviourPenaltyThreshold,4*r.behaviourPenaltyThreshold]}),ihaveRcvIgnored:t.gauge({name:"gossipsub_ihave_rcv_ignored_total",help:"Total received IHAVE messages that we ignore for some reason",labelNames:["reason"]}),ihaveRcvMsgids:t.gauge({name:"gossipsub_ihave_rcv_msgids_total",help:"Total received IHAVE messages by topic",labelNames:["topic"]}),ihaveRcvNotSeenMsgids:t.gauge({name:"gossipsub_ihave_rcv_not_seen_msgids_total",help:"Total messages per topic we do not have, not actual requests",labelNames:["topic"]}),iwantRcvMsgids:t.gauge({name:"gossipsub_iwant_rcv_msgids_total",help:"Total received IWANT messages by topic",labelNames:["topic"]}),iwantRcvDonthaveMsgids:t.gauge({name:"gossipsub_iwant_rcv_dont_have_msgids_total",help:"Total requested messageIDs that we do not have"}),iwantPromiseStarted:t.gauge({name:"gossipsub_iwant_promise_sent_total",help:"Total count of started IWANT promises"}),iwantPromiseResolved:t.gauge({name:"gossipsub_iwant_promise_resolved_total",help:"Total count of resolved IWANT promises"}),iwantPromiseResolvedFromDuplicate:t.gauge({name:"gossipsub_iwant_promise_resolved_from_duplicate_total",help:"Total count of resolved IWANT promises from duplicate messages"}),iwantPromiseResolvedPeers:t.gauge({name:"gossipsub_iwant_promise_resolved_peers",help:"Total count of peers we have asked IWANT promises that are resolved"}),iwantPromiseBroken:t.gauge({name:"gossipsub_iwant_promise_broken",help:"Total count of broken IWANT promises"}),iwantMessagePruned:t.gauge({name:"gossipsub_iwant_message_pruned",help:"Total count of pruned IWANT messages"}),iwantPromiseDeliveryTime:t.histogram({name:"gossipsub_iwant_promise_delivery_seconds",help:"Histogram of delivery time of resolved IWANT promises",buckets:[.5*r.gossipPromiseExpireSec,Number(r.gossipPromiseExpireSec),2*r.gossipPromiseExpireSec,4*r.gossipPromiseExpireSec]}),iwantPromiseUntracked:t.gauge({name:"gossip_iwant_promise_untracked",help:"Total count of untracked IWANT promise"}),connectedPeersBackoffSec:t.histogram({name:"gossipsub_connected_peers_backoff_seconds",help:"Backoff time in seconds",buckets:[1,2,4,10,20,60,120]}),cacheSize:t.gauge({name:"gossipsub_cache_size",help:"Unbounded cache sizes",labelNames:["cache"]}),mcacheSize:t.gauge({name:"gossipsub_mcache_size",help:"Current mcache msg count"}),mcacheNotValidatedCount:t.gauge({name:"gossipsub_mcache_not_validated_count",help:"Current mcache msg count not validated"}),fastMsgIdCacheCollision:t.gauge({name:"gossipsub_fastmsgid_cache_collision_total",help:"Total count of key collisions on fastmsgid cache put"}),newConnectionCount:t.gauge({name:"gossipsub_new_connection_total",help:"Total new connection by status",labelNames:["status"]}),topicStrToLabel:e,toTopic(n){return this.topicStrToLabel.get(n)??n},onJoin(n){this.topicSubscriptionStatus.set({topicStr:n},1),this.meshPeerCounts.set({topicStr:n},0)},onLeave(n){this.topicSubscriptionStatus.set({topicStr:n},0),this.meshPeerCounts.set({topicStr:n},0)},onAddToMesh(n,i,s){const a=this.toTopic(n);switch(i){case pc.Fanout:this.meshPeerInclusionEventsFanout.inc({topic:a},s);break;case pc.Random:this.meshPeerInclusionEventsRandom.inc({topic:a},s);break;case pc.Subscribed:this.meshPeerInclusionEventsSubscribed.inc({topic:a},s);break;case pc.Outbound:this.meshPeerInclusionEventsOutbound.inc({topic:a},s);break;case pc.NotEnough:this.meshPeerInclusionEventsNotEnough.inc({topic:a},s);break;case pc.Opportunistic:this.meshPeerInclusionEventsOpportunistic.inc({topic:a},s);break;default:this.meshPeerInclusionEventsUnknown.inc({topic:a},s);break}},onRemoveFromMesh(n,i,s){const a=this.toTopic(n);switch(i){case Jf.Dc:this.meshPeerChurnEventsDisconnected.inc({topic:a},s);break;case Jf.BadScore:this.meshPeerChurnEventsBadScore.inc({topic:a},s);break;case Jf.Prune:this.meshPeerChurnEventsPrune.inc({topic:a},s);break;case Jf.Excess:this.meshPeerChurnEventsExcess.inc({topic:a},s);break;default:this.meshPeerChurnEventsUnknown.inc({topic:a},s);break}},onReportValidation(n,i,s){if(this.asyncValidationMcacheHit.inc({hit:n!=null?"hit":"miss"}),n!=null){const a=this.toTopic(n.message.topic);switch(i){case Ml.Accept:this.acceptedMessagesTotal.inc({topic:a});break;case Ml.Ignore:this.ignoredMessagesTotal.inc({topic:a});break;case Ml.Reject:this.rejectedMessagesTotal.inc({topic:a});break;default:this.unknownValidationResultsTotal.inc({topic:a});break}}s!=null?this.asyncValidationDelayFromFirstSeenSec.observe((Date.now()-s)/1e3):this.asyncValidationUnknownFirstSeen.inc()},onScorePenalty(n){this.scoringPenalties.inc({penalty:n},1)},onIhaveRcv(n,i,s){const a=this.toTopic(n);this.ihaveRcvMsgids.inc({topic:a},i),this.ihaveRcvNotSeenMsgids.inc({topic:a},s)},onIwantRcv(n,i){for(const[s,a]of n){const o=this.toTopic(s);this.iwantRcvMsgids.inc({topic:o},a)}this.iwantRcvDonthaveMsgids.inc(i)},onForwardMsg(n,i){const s=this.toTopic(n);this.msgForwardCount.inc({topic:s},1),this.msgForwardPeers.inc({topic:s},i)},onPublishMsg(n,i,s,a,o){const c=this.toTopic(n);this.msgPublishCount.inc({topic:c},1),this.msgPublishBytes.inc({topic:c},s*a),this.msgPublishPeersByTopic.inc({topic:c},s),this.directPeersPublishedTotal.inc({topic:c},i.direct),this.floodsubPeersPublishedTotal.inc({topic:c},i.floodsub),this.meshPeersPublishedTotal.inc({topic:c},i.mesh),this.fanoutPeersPublishedTotal.inc({topic:c},i.fanout),this.msgPublishTime.observe({topic:c},o/1e3)},onMsgRecvPreValidation(n){const i=this.toTopic(n);this.msgReceivedPreValidation.inc({topic:i},1)},onMsgRecvError(n){const i=this.toTopic(n);this.msgReceivedError.inc({topic:i},1)},onPrevalidationResult(n,i){const s=this.toTopic(n);switch(i){case hc.duplicate:this.prevalidationDuplicateTotal.inc({topic:s});break;case hc.invalid:this.prevalidationInvalidTotal.inc({topic:s});break;case hc.valid:this.prevalidationValidTotal.inc({topic:s});break;default:this.prevalidationUnknownTotal.inc({topic:s});break}},onMsgRecvInvalid(n,i){const s=this.toTopic(n),a=i.reason===Vu.Error?i.error:i.reason;this.msgReceivedInvalid.inc({error:a},1),this.msgReceivedInvalidByTopic.inc({topic:s},1)},onDuplicateMsgDelivery(n,i,s){const a=this.toTopic(n);this.duplicateMsgDeliveryDelay.observe({topic:a},i/1e3),s&&this.duplicateMsgLateDelivery.inc({topic:a},1)},onPublishDuplicateMsg(n){const i=this.toTopic(n);this.duplicateMsgIgnored.inc({topic:i},1)},onPeerReadStreamError(){this.peerReadStreamError.inc(1)},onRpcRecvError(){this.rpcRecvError.inc(1)},onRpcDataError(){this.rpcDataError.inc(1)},onRpcRecv(n,i){this.rpcRecvBytes.inc(i),this.rpcRecvCount.inc(1),n.subscriptions!=null&&this.rpcRecvSubscription.inc(n.subscriptions.length),n.messages!=null&&this.rpcRecvMessage.inc(n.messages.length),n.control!=null&&(this.rpcRecvControl.inc(1),n.control.ihave!=null&&this.rpcRecvIHave.inc(n.control.ihave.length),n.control.iwant!=null&&this.rpcRecvIWant.inc(n.control.iwant.length),n.control.graft!=null&&this.rpcRecvGraft.inc(n.control.graft.length),n.control.prune!=null&&this.rpcRecvPrune.inc(n.control.prune.length))},onRpcSent(n,i){if(this.rpcSentBytes.inc(i),this.rpcSentCount.inc(1),n.subscriptions!=null&&this.rpcSentSubscription.inc(n.subscriptions.length),n.messages!=null&&this.rpcSentMessage.inc(n.messages.length),n.control!=null){const s=n.control.ihave?.length??0,a=n.control.iwant?.length??0,o=n.control.graft?.length??0,c=n.control.prune?.length??0;s>0&&this.rpcSentIHave.inc(s),a>0&&this.rpcSentIWant.inc(a),o>0&&this.rpcSentGraft.inc(o),c>0&&this.rpcSentPrune.inc(c),(s>0||a>0||o>0||c>0)&&this.rpcSentControl.inc(1)}},registerScores(n,i){let s=0,a=0,o=0,c=0;for(const l of n)l>=i.graylistThreshold&&s++,l>=i.publishThreshold&&a++,l>=i.gossipThreshold&&o++,l>=0&&c++;this.peersByScoreThreshold.set({threshold:uy.graylist},s),this.peersByScoreThreshold.set({threshold:uy.publish},a),this.peersByScoreThreshold.set({threshold:uy.gossip},o),this.peersByScoreThreshold.set({threshold:uy.mesh},c),this.score.set(n)},registerScoreWeights(n){for(const[i,s]of n.byTopic)this.scoreWeights.set({topic:i,p:"p1"},s.p1w),this.scoreWeights.set({topic:i,p:"p2"},s.p2w),this.scoreWeights.set({topic:i,p:"p3"},s.p3w),this.scoreWeights.set({topic:i,p:"p3b"},s.p3bw),this.scoreWeights.set({topic:i,p:"p4"},s.p4w);this.scoreWeights.set({p:"p5"},n.p5w),this.scoreWeights.set({p:"p6"},n.p6w),this.scoreWeights.set({p:"p7"},n.p7w)},registerScorePerMesh(n,i){const s=new Map;n.forEach((a,o)=>{const c=this.topicStrToLabel.get(o)??"unknown";let l=s.get(c);l==null&&(l=new Set,s.set(c,l)),a.forEach(u=>l?.add(u))});for(const[a,o]of s){const c=[];o.forEach(l=>{c.push(i.get(l)??0)}),this.scorePerMesh.set({topic:a},c)}}}}const bi="ERR_INVALID_PEER_SCORE_PARAMS",_Ut={topics:{},topicScoreCap:10,appSpecificScore:()=>0,appSpecificWeight:10,IPColocationFactorWeight:-5,IPColocationFactorThreshold:10,IPColocationFactorWhitelist:new Set,behaviourPenaltyWeight:-10,behaviourPenaltyThreshold:0,behaviourPenaltyDecay:.2,decayInterval:1e3,decayToZero:.1,retainScore:3600*1e3},xUt={topicWeight:.5,timeInMeshWeight:1,timeInMeshQuantum:1,timeInMeshCap:3600,firstMessageDeliveriesWeight:1,firstMessageDeliveriesDecay:.5,firstMessageDeliveriesCap:2e3,meshMessageDeliveriesWeight:-1,meshMessageDeliveriesDecay:.5,meshMessageDeliveriesCap:100,meshMessageDeliveriesThreshold:20,meshMessageDeliveriesWindow:10,meshMessageDeliveriesActivation:5e3,meshFailurePenaltyWeight:-1,meshFailurePenaltyDecay:.5,invalidMessageDeliveriesWeight:-1,invalidMessageDeliveriesDecay:.3};function EUt(t={}){return{..._Ut,...t,topics:t.topics!=null?Object.entries(t.topics).reduce((e,[r,n])=>(e[r]=SUt(n),e),{}):{}}}function SUt(t={}){return{...xUt,...t}}function AUt(t){for(const[e,r]of Object.entries(t.topics))try{TUt(r)}catch(n){throw new ye(`invalid score parameters for topic ${e}: ${n.message}`,bi)}if(t.topicScoreCap<0)throw new ye("invalid topic score cap; must be positive (or 0 for no cap)",bi);if(t.appSpecificScore===null||t.appSpecificScore===void 0)throw new ye("missing application specific score function",bi);if(t.IPColocationFactorWeight>0)throw new ye("invalid IPColocationFactorWeight; must be negative (or 0 to disable)",bi);if(t.IPColocationFactorWeight!==0&&t.IPColocationFactorThreshold<1)throw new ye("invalid IPColocationFactorThreshold; must be at least 1",bi);if(t.behaviourPenaltyWeight>0)throw new ye("invalid BehaviourPenaltyWeight; must be negative (or 0 to disable)",bi);if(t.behaviourPenaltyWeight!==0&&(t.behaviourPenaltyDecay<=0||t.behaviourPenaltyDecay>=1))throw new ye("invalid BehaviourPenaltyDecay; must be between 0 and 1",bi);if(t.decayInterval<1e3)throw new ye("invalid DecayInterval; must be at least 1s",bi);if(t.decayToZero<=0||t.decayToZero>=1)throw new ye("invalid DecayToZero; must be between 0 and 1",bi)}function TUt(t){if(t.topicWeight<0)throw new ye("invalid topic weight; must be >= 0",bi);if(t.timeInMeshQuantum===0)throw new ye("invalid TimeInMeshQuantum; must be non zero",bi);if(t.timeInMeshWeight<0)throw new ye("invalid TimeInMeshWeight; must be positive (or 0 to disable)",bi);if(t.timeInMeshWeight!==0&&t.timeInMeshQuantum<=0)throw new ye("invalid TimeInMeshQuantum; must be positive",bi);if(t.timeInMeshWeight!==0&&t.timeInMeshCap<=0)throw new ye("invalid TimeInMeshCap; must be positive",bi);if(t.firstMessageDeliveriesWeight<0)throw new ye("invallid FirstMessageDeliveriesWeight; must be positive (or 0 to disable)",bi);if(t.firstMessageDeliveriesWeight!==0&&(t.firstMessageDeliveriesDecay<=0||t.firstMessageDeliveriesDecay>=1))throw new ye("invalid FirstMessageDeliveriesDecay; must be between 0 and 1",bi);if(t.firstMessageDeliveriesWeight!==0&&t.firstMessageDeliveriesCap<=0)throw new ye("invalid FirstMessageDeliveriesCap; must be positive",bi);if(t.meshMessageDeliveriesWeight>0)throw new ye("invalid MeshMessageDeliveriesWeight; must be negative (or 0 to disable)",bi);if(t.meshMessageDeliveriesWeight!==0&&(t.meshMessageDeliveriesDecay<=0||t.meshMessageDeliveriesDecay>=1))throw new ye("invalid MeshMessageDeliveriesDecay; must be between 0 and 1",bi);if(t.meshMessageDeliveriesWeight!==0&&t.meshMessageDeliveriesCap<=0)throw new ye("invalid MeshMessageDeliveriesCap; must be positive",bi);if(t.meshMessageDeliveriesWeight!==0&&t.meshMessageDeliveriesThreshold<=0)throw new ye("invalid MeshMessageDeliveriesThreshold; must be positive",bi);if(t.meshMessageDeliveriesWindow<0)throw new ye("invalid MeshMessageDeliveriesWindow; must be non-negative",bi);if(t.meshMessageDeliveriesWeight!==0&&t.meshMessageDeliveriesActivation<1e3)throw new ye("invalid MeshMessageDeliveriesActivation; must be at least 1s",bi);if(t.meshFailurePenaltyWeight>0)throw new ye("invalid MeshFailurePenaltyWeight; must be negative (or 0 to disable)",bi);if(t.meshFailurePenaltyWeight!==0&&(t.meshFailurePenaltyDecay<=0||t.meshFailurePenaltyDecay>=1))throw new ye("invalid MeshFailurePenaltyDecay; must be between 0 and 1",bi);if(t.invalidMessageDeliveriesWeight>0)throw new ye("invalid InvalidMessageDeliveriesWeight; must be negative (or 0 to disable)",bi);if(t.invalidMessageDeliveriesDecay<=0||t.invalidMessageDeliveriesDecay>=1)throw new ye("invalid InvalidMessageDeliveriesDecay; must be between 0 and 1",bi)}const kUt={gossipThreshold:-10,publishThreshold:-50,graylistThreshold:-80,acceptPXThreshold:10,opportunisticGraftThreshold:20};function CUt(t={}){return{...kUt,...t}}function eL(t,e,r=()=>!0){const n=new Set;if(e<=0)return n;for(const i of t){if(n.size>=e)break;r(i)&&(n.add(i),t.delete(i))}return n}function IUt(t,e){return eL(t,e,()=>!0)}class RUt extends Map{getDefault;constructor(e){super(),this.getDefault=e}getOrDefault(e){let r=super.get(e);return r===void 0&&(r=this.getDefault(),this.set(e,r)),r}}function PUt(t,e,r,n){let i=0;Object.entries(e.topics).forEach(([a,o])=>{const c=r.topics[a];if(c===void 0)return;let l=0;if(o.inMesh){let d=o.meshTime/c.timeInMeshQuantum;d>c.timeInMeshCap&&(d=c.timeInMeshCap),l+=d*c.timeInMeshWeight}let u=o.firstMessageDeliveries;if(u>c.firstMessageDeliveriesCap&&(u=c.firstMessageDeliveriesCap),l+=u*c.firstMessageDeliveriesWeight,o.meshMessageDeliveriesActive&&o.meshMessageDeliveries<c.meshMessageDeliveriesThreshold){const d=c.meshMessageDeliveriesThreshold-o.meshMessageDeliveries,g=d*d;l+=g*c.meshMessageDeliveriesWeight}const f=o.meshFailurePenalty;l+=f*c.meshFailurePenaltyWeight;const h=o.invalidMessageDeliveries*o.invalidMessageDeliveries;l+=h*c.invalidMessageDeliveriesWeight,i+=l*c.topicWeight}),r.topicScoreCap>0&&i>r.topicScoreCap&&(i=r.topicScoreCap);const s=r.appSpecificScore(t);if(i+=s*r.appSpecificWeight,e.knownIPs.forEach(a=>{if(r.IPColocationFactorWhitelist.has(a))return;const o=n.get(a),c=o!=null?o.size:0;if(c>r.IPColocationFactorThreshold){const l=c-r.IPColocationFactorThreshold,u=l*l;i+=u*r.IPColocationFactorWeight}}),e.behaviourPenalty>r.behaviourPenaltyThreshold){const a=e.behaviourPenalty-r.behaviourPenaltyThreshold,o=a*a;i+=o*r.behaviourPenaltyWeight}return i}function os(t,r){var r=r||{};this._capacity=r.capacity,this._head=0,this._tail=0,Array.isArray(t)?this._fromArray(t):(this._capacityMask=3,this._list=new Array(4))}os.prototype.peekAt=function(e){var r=e;if(r===(r|0)){var n=this.size();if(!(r>=n||r<-n))return r<0&&(r+=n),r=this._head+r&this._capacityMask,this._list[r]}};os.prototype.get=function(e){return this.peekAt(e)};os.prototype.peek=function(){if(this._head!==this._tail)return this._list[this._head]};os.prototype.peekFront=function(){return this.peek()};os.prototype.peekBack=function(){return this.peekAt(-1)};Object.defineProperty(os.prototype,"length",{get:function(){return this.size()}});os.prototype.size=function(){return this._head===this._tail?0:this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)};os.prototype.unshift=function(e){if(arguments.length===0)return this.size();var r=this._list.length;return this._head=this._head-1+r&this._capacityMask,this._list[this._head]=e,this._tail===this._head&&this._growArray(),this._capacity&&this.size()>this._capacity&&this.pop(),this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)};os.prototype.shift=function(){var e=this._head;if(e!==this._tail){var r=this._list[e];return this._list[e]=void 0,this._head=e+1&this._capacityMask,e<2&&this._tail>1e4&&this._tail<=this._list.length>>>2&&this._shrinkArray(),r}};os.prototype.push=function(e){if(arguments.length===0)return this.size();var r=this._tail;return this._list[r]=e,this._tail=r+1&this._capacityMask,this._tail===this._head&&this._growArray(),this._capacity&&this.size()>this._capacity&&this.shift(),this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)};os.prototype.pop=function(){var e=this._tail;if(e!==this._head){var r=this._list.length;this._tail=e-1+r&this._capacityMask;var n=this._list[this._tail];return this._list[this._tail]=void 0,this._head<2&&e>1e4&&e<=r>>>2&&this._shrinkArray(),n}};os.prototype.removeOne=function(e){var r=e;if(r===(r|0)&&this._head!==this._tail){var n=this.size(),i=this._list.length;if(!(r>=n||r<-n)){r<0&&(r+=n),r=this._head+r&this._capacityMask;var s=this._list[r],a;if(e<n/2){for(a=e;a>0;a--)this._list[r]=this._list[r=r-1+i&this._capacityMask];this._list[r]=void 0,this._head=this._head+1+i&this._capacityMask}else{for(a=n-1-e;a>0;a--)this._list[r]=this._list[r=r+1+i&this._capacityMask];this._list[r]=void 0,this._tail=this._tail-1+i&this._capacityMask}return s}}};os.prototype.remove=function(e,r){var n=e,i,s=r;if(n===(n|0)&&this._head!==this._tail){var a=this.size(),o=this._list.length;if(!(n>=a||n<-a||r<1)){if(n<0&&(n+=a),r===1||!r)return i=new Array(1),i[0]=this.removeOne(n),i;if(n===0&&n+r>=a)return i=this.toArray(),this.clear(),i;n+r>a&&(r=a-n);var c;for(i=new Array(r),c=0;c<r;c++)i[c]=this._list[this._head+n+c&this._capacityMask];if(n=this._head+n&this._capacityMask,e+r===a){for(this._tail=this._tail-r+o&this._capacityMask,c=r;c>0;c--)this._list[n=n+1+o&this._capacityMask]=void 0;return i}if(e===0){for(this._head=this._head+r+o&this._capacityMask,c=r-1;c>0;c--)this._list[n=n+1+o&this._capacityMask]=void 0;return i}if(n<a/2){for(this._head=this._head+e+r+o&this._capacityMask,c=e;c>0;c--)this.unshift(this._list[n=n-1+o&this._capacityMask]);for(n=this._head-1+o&this._capacityMask;s>0;)this._list[n=n-1+o&this._capacityMask]=void 0,s--;e<0&&(this._tail=n)}else{for(this._tail=n,n=n+r+o&this._capacityMask,c=a-(r+e);c>0;c--)this.push(this._list[n++]);for(n=this._tail;s>0;)this._list[n=n+1+o&this._capacityMask]=void 0,s--}return this._head<2&&this._tail>1e4&&this._tail<=o>>>2&&this._shrinkArray(),i}}};os.prototype.splice=function(e,r){var n=e;if(n===(n|0)){var i=this.size();if(n<0&&(n+=i),!(n>i))if(arguments.length>2){var s,a,o,c=arguments.length,l=this._list.length,u=2;if(!i||n<i/2){for(a=new Array(n),s=0;s<n;s++)a[s]=this._list[this._head+s&this._capacityMask];for(r===0?(o=[],n>0&&(this._head=this._head+n+l&this._capacityMask)):(o=this.remove(n,r),this._head=this._head+n+l&this._capacityMask);c>u;)this.unshift(arguments[--c]);for(s=n;s>0;s--)this.unshift(a[s-1])}else{a=new Array(i-(n+r));var f=a.length;for(s=0;s<f;s++)a[s]=this._list[this._head+n+r+s&this._capacityMask];for(r===0?(o=[],n!=i&&(this._tail=this._head+n+l&this._capacityMask)):(o=this.remove(n,r),this._tail=this._tail-f+l&this._capacityMask);u<c;)this.push(arguments[u++]);for(s=0;s<f;s++)this.push(a[s])}return o}else return this.remove(n,r)}};os.prototype.clear=function(){this._list=new Array(this._list.length),this._head=0,this._tail=0};os.prototype.isEmpty=function(){return this._head===this._tail};os.prototype.toArray=function(){return this._copyArray(!1)};os.prototype._fromArray=function(e){var r=e.length,n=this._nextPowerOf2(r);this._list=new Array(n),this._capacityMask=n-1,this._tail=r;for(var i=0;i<r;i++)this._list[i]=e[i]};os.prototype._copyArray=function(e,r){var n=this._list,i=n.length,s=this.length;if(r=r|s,r==s&&this._head<this._tail)return this._list.slice(this._head,this._tail);var a=new Array(r),o=0,c;if(e||this._head>this._tail){for(c=this._head;c<i;c++)a[o++]=n[c];for(c=0;c<this._tail;c++)a[o++]=n[c]}else for(c=this._head;c<this._tail;c++)a[o++]=n[c];return a};os.prototype._growArray=function(){if(this._head!=0){var e=this._copyArray(!0,this._list.length<<1);this._tail=this._list.length,this._head=0,this._list=e}else this._tail=this._list.length,this._list.length<<=1;this._capacityMask=this._capacityMask<<1|1};os.prototype._shrinkArray=function(){this._list.length>>>=1,this._capacityMask>>>=1};os.prototype._nextPowerOf2=function(e){var r=Math.log(e)/Math.log(2),n=1<<r+1;return Math.max(n,4)};var BUt=os;const DUt=si(BUt);var lc;(function(t){t[t.unknown=0]="unknown",t[t.valid=1]="valid",t[t.invalid=2]="invalid",t[t.ignored=3]="ignored"})(lc||(lc={}));class OUt{records;queue;constructor(){this.records=new Map,this.queue=new DUt}getRecord(e){return this.records.get(e)}ensureRecord(e){let r=this.records.get(e);if(r!=null)return r;r={status:lc.unknown,firstSeenTsMs:Date.now(),validated:0,peers:new Set},this.records.set(e,r);const n={msgId:e,expire:Date.now()+uUt};return this.queue.push(n),r}gc(){const e=Date.now();let r=this.queue.peekFront();for(;r!=null&&r.expire<e;)this.records.delete(r.msgId),this.queue.shift(),r=this.queue.peekFront()}clear(){this.records.clear(),this.queue.clear()}}class NUt{params;metrics;peerStats=new Map;peerIPs=new RUt(()=>new Set);scoreCache=new Map;deliveryRecords=new OUt;_backgroundInterval;scoreCacheValidityMs;computeScore;log;constructor(e,r,n,i){this.params=e,this.metrics=r,AUt(e),this.scoreCacheValidityMs=i.scoreCacheValidityMs,this.computeScore=i.computeScore??PUt,this.log=n.forComponent("libp2p:gossipsub:score")}get size(){return this.peerStats.size}start(){if(this._backgroundInterval!=null){this.log("Peer score already running");return}this._backgroundInterval=setInterval(()=>{this.background()},this.params.decayInterval),this.log("started")}stop(){if(this._backgroundInterval==null){this.log("Peer score already stopped");return}clearInterval(this._backgroundInterval),delete this._backgroundInterval,this.peerIPs.clear(),this.peerStats.clear(),this.deliveryRecords.clear(),this.log("stopped")}background(){this.refreshScores(),this.deliveryRecords.gc()}dumpPeerScoreStats(){return Object.fromEntries(Array.from(this.peerStats.entries()).map(([e,r])=>[e,r]))}messageFirstSeenTimestampMs(e){const r=this.deliveryRecords.getRecord(e);return r!=null?r.firstSeenTsMs:null}refreshScores(){const e=Date.now(),r=this.params.decayToZero;this.peerStats.forEach((n,i)=>{if(!n.connected){e>n.expire&&(this.removeIPsForPeer(i,n.knownIPs),this.peerStats.delete(i),this.scoreCache.delete(i));return}Object.entries(n.topics).forEach(([s,a])=>{const o=this.params.topics[s];o!==void 0&&(a.firstMessageDeliveries*=o.firstMessageDeliveriesDecay,a.firstMessageDeliveries<r&&(a.firstMessageDeliveries=0),a.meshMessageDeliveries*=o.meshMessageDeliveriesDecay,a.meshMessageDeliveries<r&&(a.meshMessageDeliveries=0),a.meshFailurePenalty*=o.meshFailurePenaltyDecay,a.meshFailurePenalty<r&&(a.meshFailurePenalty=0),a.invalidMessageDeliveries*=o.invalidMessageDeliveriesDecay,a.invalidMessageDeliveries<r&&(a.invalidMessageDeliveries=0),a.inMesh&&(a.meshTime=e-a.graftTime,a.meshTime>o.meshMessageDeliveriesActivation&&(a.meshMessageDeliveriesActive=!0)))}),n.behaviourPenalty*=this.params.behaviourPenaltyDecay,n.behaviourPenalty<r&&(n.behaviourPenalty=0)})}score(e){this.metrics?.scoreFnCalls.inc();const r=this.peerStats.get(e);if(r==null)return 0;const n=Date.now(),i=this.scoreCache.get(e);if(i!=null&&i.cacheUntil>n)return i.score;this.metrics?.scoreFnRuns.inc();const s=this.computeScore(e,r,this.params,this.peerIPs),a=n+this.scoreCacheValidityMs;return i!=null?(this.metrics?.scoreCachedDelta.observe(Math.abs(s-i.score)),i.score=s,i.cacheUntil=a):this.scoreCache.set(e,{score:s,cacheUntil:a}),s}addPenalty(e,r,n){const i=this.peerStats.get(e);i!=null&&(i.behaviourPenalty+=r,this.metrics?.onScorePenalty(n))}addPeer(e){const r={connected:!0,expire:0,topics:{},knownIPs:new Set,behaviourPenalty:0};this.peerStats.set(e,r)}addIP(e,r){const n=this.peerStats.get(e);n?.knownIPs.add(r),this.peerIPs.getOrDefault(r).add(e)}removeIP(e,r){const n=this.peerStats.get(e);n?.knownIPs.delete(r);const i=this.peerIPs.get(r);i!=null&&(i.delete(e),i.size===0&&this.peerIPs.delete(r))}removePeer(e){const r=this.peerStats.get(e);if(r!=null){if(this.score(e)>0){this.removeIPsForPeer(e,r.knownIPs),this.peerStats.delete(e);return}Object.entries(r.topics).forEach(([n,i])=>{i.firstMessageDeliveries=0;const s=this.params.topics[n].meshMessageDeliveriesThreshold;if(i.inMesh&&i.meshMessageDeliveriesActive&&i.meshMessageDeliveries<s){const a=s-i.meshMessageDeliveries;i.meshFailurePenalty+=a*a}i.inMesh=!1,i.meshMessageDeliveriesActive=!1}),r.connected=!1,r.expire=Date.now()+this.params.retainScore}}graft(e,r){const n=this.peerStats.get(e);if(n!=null){const i=this.getPtopicStats(n,r);i!=null&&(i.inMesh=!0,i.graftTime=Date.now(),i.meshTime=0,i.meshMessageDeliveriesActive=!1)}}prune(e,r){const n=this.peerStats.get(e);if(n!=null){const i=this.getPtopicStats(n,r);if(i!=null){const s=this.params.topics[r].meshMessageDeliveriesThreshold;if(i.meshMessageDeliveriesActive&&i.meshMessageDeliveries<s){const a=s-i.meshMessageDeliveries;i.meshFailurePenalty+=a*a}i.meshMessageDeliveriesActive=!1,i.inMesh=!1}}}validateMessage(e){this.deliveryRecords.ensureRecord(e)}deliverMessage(e,r,n){this.markFirstMessageDelivery(e,n);const i=this.deliveryRecords.ensureRecord(r),s=Date.now();if(i.status!==lc.unknown){this.log("unexpected delivery: message from %s was first seen %s ago and has delivery status %s",e,s-i.firstSeenTsMs,lc[i.status]);return}i.status=lc.valid,i.validated=s,i.peers.forEach(a=>{a!==e.toString()&&this.markDuplicateMessageDelivery(a,n)})}rejectInvalidMessage(e,r){this.markInvalidMessageDelivery(e,r)}rejectMessage(e,r,n,i){switch(i){case Vu.Error:this.markInvalidMessageDelivery(e,n);return;case Vu.Blacklisted:return}const s=this.deliveryRecords.ensureRecord(r);if(s.status!==lc.unknown){this.log("unexpected rejection: message from %s was first seen %s ago and has delivery status %d",e,Date.now()-s.firstSeenTsMs,lc[s.status]);return}if(i===Vu.Ignore){s.status=lc.ignored,s.peers.clear();return}s.status=lc.invalid,this.markInvalidMessageDelivery(e,n),s.peers.forEach(a=>{this.markInvalidMessageDelivery(a,n)}),s.peers.clear()}duplicateMessage(e,r,n){const i=this.deliveryRecords.ensureRecord(r);if(!i.peers.has(e))switch(i.status){case lc.unknown:i.peers.add(e);break;case lc.valid:i.peers.add(e),this.markDuplicateMessageDelivery(e,n,i.validated);break;case lc.invalid:this.markInvalidMessageDelivery(e,n);break;case lc.ignored:break}}markInvalidMessageDelivery(e,r){const n=this.peerStats.get(e);if(n!=null){const i=this.getPtopicStats(n,r);i!=null&&(i.invalidMessageDeliveries+=1)}}markFirstMessageDelivery(e,r){const n=this.peerStats.get(e);if(n!=null){const i=this.getPtopicStats(n,r);if(i!=null){let s=this.params.topics[r].firstMessageDeliveriesCap;i.firstMessageDeliveries=Math.min(s,i.firstMessageDeliveries+1),i.inMesh&&(s=this.params.topics[r].meshMessageDeliveriesCap,i.meshMessageDeliveries=Math.min(s,i.meshMessageDeliveries+1))}}}markDuplicateMessageDelivery(e,r,n){const i=this.peerStats.get(e);if(i!=null){const s=n!==void 0?Date.now():0,a=this.getPtopicStats(i,r);if(a!=null&&a.inMesh){const o=this.params.topics[r];if(n!==void 0){const l=s-n,u=l>o.meshMessageDeliveriesWindow;if(this.metrics?.onDuplicateMsgDelivery(r,l,u),u)return}const c=o.meshMessageDeliveriesCap;a.meshMessageDeliveries=Math.min(c,a.meshMessageDeliveries+1)}}}removeIPsForPeer(e,r){for(const n of r){const i=this.peerIPs.get(n);i!=null&&(i.delete(e),i.size===0&&this.peerIPs.delete(n))}}getPtopicStats(e,r){let n=e.topics[r];return n!==void 0?n:this.params.topics[r]!==void 0?(n={inMesh:!1,graftTime:0,meshTime:0,firstMessageDeliveries:0,meshMessageDeliveries:0,meshMessageDeliveriesActive:!1,meshFailurePenalty:0,invalidMessageDeliveries:0},e.topics[r]=n,n):null}}function MUt(t,e,r,n,i){let s=0;const a=new Map;if(Object.entries(e.topics).forEach(([h,d])=>{const g=i.get(h)??"unknown",p=r.topics[h];if(p===void 0)return;let m=a.get(g);m==null&&(m={p1w:0,p2w:0,p3w:0,p3bw:0,p4w:0},a.set(g,m));let y=0,v=0,_=0,x=0,A=0;if(d.inMesh){const N=Math.max(d.meshTime/p.timeInMeshQuantum,p.timeInMeshCap);y+=N*p.timeInMeshWeight}let C=d.firstMessageDeliveries;if(C>p.firstMessageDeliveriesCap&&(C=p.firstMessageDeliveriesCap),v+=C*p.firstMessageDeliveriesWeight,d.meshMessageDeliveriesActive&&d.meshMessageDeliveries<p.meshMessageDeliveriesThreshold){const N=p.meshMessageDeliveriesThreshold-d.meshMessageDeliveries,Y=N*N;_+=Y*p.meshMessageDeliveriesWeight}const R=d.meshFailurePenalty;x+=R*p.meshFailurePenaltyWeight;const M=d.invalidMessageDeliveries*d.invalidMessageDeliveries;A+=M*p.invalidMessageDeliveriesWeight,s+=(y+v+_+x+A)*p.topicWeight,m.p1w+=y,m.p2w+=v,m.p3w+=_,m.p3bw+=x,m.p4w+=A}),r.topicScoreCap>0&&s>r.topicScoreCap){s=r.topicScoreCap;const h=r.topicScoreCap/s;for(const d of a.values())d.p1w*=h,d.p2w*=h,d.p3w*=h,d.p3bw*=h,d.p4w*=h}let o=0,c=0,l=0;const u=r.appSpecificScore(t);o+=u*r.appSpecificWeight,e.knownIPs.forEach(h=>{if(r.IPColocationFactorWhitelist.has(h))return;const d=n.get(h),g=d!=null?d.size:0;if(g>r.IPColocationFactorThreshold){const p=g-r.IPColocationFactorThreshold,m=p*p;c+=m*r.IPColocationFactorWeight}});const f=e.behaviourPenalty*e.behaviourPenalty;return l+=f*r.behaviourPenaltyWeight,s+=o+c+l,{byTopic:a,p5w:o,p6w:c,p7w:l,score:s}}function LUt(t,e,r,n,i){const s={byTopic:new Map,p5w:[],p6w:[],p7w:[],score:[]};for(const a of t){const o=e.get(a);if(o!=null){const c=MUt(a,o,r,n,i);for(const[l,u]of c.byTopic){let f=s.byTopic.get(l);f==null&&(f={p1w:[],p2w:[],p3w:[],p3bw:[],p4w:[]},s.byTopic.set(l,f)),f.p1w.push(u.p1w),f.p2w.push(u.p2w),f.p3w.push(u.p3w),f.p3bw.push(u.p3bw),f.p4w.push(u.p4w)}s.p5w.push(c.p5w),s.p6w.push(c.p6w),s.p7w.push(c.p7w),s.score.push(c.score)}else s.p5w.push(0),s.p6w.push(0),s.p7w.push(0),s.score.push(0)}return s}class FUt{rawStream;pushable;closeController;maxBufferSize;constructor(e,r,n){this.rawStream=e,this.pushable=qu(),this.closeController=new AbortController,this.maxBufferSize=n.maxBufferSize??1/0,this.closeController.signal.addEventListener("abort",()=>{e.close().catch(i=>{e.abort(i)})}),is(this.pushable,this.rawStream).catch(r)}get protocol(){return this.rawStream.protocol}push(e){if(this.pushable.readableLength>this.maxBufferSize)throw Error(`OutboundStream buffer full, size > ${this.maxBufferSize}`);this.pushable.push(fh.single(e))}pushPrefixed(e){if(this.pushable.readableLength>this.maxBufferSize)throw Error(`OutboundStream buffer full, size > ${this.maxBufferSize}`);this.pushable.push(e)}async close(){this.closeController.abort(),await this.pushable.return()}}class $Ut{source;rawStream;closeController;constructor(e,r={}){this.rawStream=e,this.closeController=new AbortController,this.closeController.signal.addEventListener("abort",()=>{e.close().catch(n=>{e.abort(n)})}),this.source=is(this.rawStream,n=>e0(n,r))}async close(){this.closeController.abort()}}class UUt{gossipsubIWantFollowupMs;msgIdToStrFn;metrics;promises=new Map;requestMsByMsg=new Map;requestMsByMsgExpire;constructor(e,r,n){this.gossipsubIWantFollowupMs=e,this.msgIdToStrFn=r,this.metrics=n,this.requestMsByMsgExpire=10*e}get size(){return this.promises.size}get requestMsByMsgSize(){return this.requestMsByMsg.size}addPromise(e,r){const n=Math.floor(Math.random()*r.length),i=r[n],s=this.msgIdToStrFn(i);let a=this.promises.get(s);a==null&&(a=new Map,this.promises.set(s,a));const o=Date.now();a.has(e)||(a.set(e,o+this.gossipsubIWantFollowupMs),this.metrics!=null&&(this.metrics.iwantPromiseStarted.inc(1),this.requestMsByMsg.has(s)||this.requestMsByMsg.set(s,o)))}getBrokenPromises(){const e=Date.now(),r=new Map;let n=0;return this.promises.forEach((i,s)=>{i.forEach((a,o)=>{a<e&&(r.set(o,(r.get(o)??0)+1),i.delete(o),n++)}),i.size===0&&this.promises.delete(s)}),this.metrics?.iwantPromiseBroken.inc(n),r}deliverMessage(e,r=!1){this.trackMessage(e);const n=this.promises.get(e);n!=null&&(this.promises.delete(e),this.metrics!=null&&(this.metrics.iwantPromiseResolved.inc(1),r&&this.metrics.iwantPromiseResolvedFromDuplicate.inc(1),this.metrics.iwantPromiseResolvedPeers.inc(n.size)))}rejectMessage(e,r){switch(this.trackMessage(e),r){case Vu.Error:return}this.promises.delete(e)}clear(){this.promises.clear()}prune(){const e=Date.now()-this.requestMsByMsgExpire;let r=0;for(const[n,i]of this.requestMsByMsg.entries())if(i<e)this.requestMsByMsg.delete(n),r++;else break;this.metrics?.iwantMessagePruned.inc(r)}trackMessage(e){if(this.metrics!=null){const r=this.requestMsByMsg.get(e);r!==void 0&&(this.metrics.iwantPromiseDeliveryTime.observe((Date.now()-r)/1e3),this.requestMsByMsg.delete(e))}}}const f6e=pt("libp2p-pubsub:");async function VUt(t,e,r,n){switch(t.type){case $v.Signing:{const i={from:t.author.toBytes(),data:n,seqno:Xu(8),topic:e,signature:void 0,key:void 0},s=Yi([f6e,$g.Message.encode(i)]);i.signature=await t.privateKey.sign(s),i.key=t.key;const a={type:"signed",from:t.author,data:r,sequenceNumber:BigInt(`0x${vt(i.seqno,"base16")}`),topic:e,signature:i.signature,key:i.key};return{raw:i,msg:a}}case $v.Anonymous:return{raw:{from:void 0,data:n,seqno:void 0,topic:e,signature:void 0,key:void 0},msg:{type:"unsigned",data:r,topic:e}};default:throw new Error("Unreachable")}}async function jUt(t,e){switch(t){case X$:return e.signature!=null?{valid:!1,error:cc.SignaturePresent}:e.seqno!=null?{valid:!1,error:cc.SeqnoPresent}:e.key!=null?{valid:!1,error:cc.FromPresent}:{valid:!0,message:{type:"unsigned",topic:e.topic,data:e.data??new Uint8Array(0)}};case _E:{if(e.seqno==null)return{valid:!1,error:cc.InvalidSeqno};if(e.seqno.length!==8)return{valid:!1,error:cc.InvalidSeqno};if(e.signature==null)return{valid:!1,error:cc.InvalidSignature};if(e.from==null)return{valid:!1,error:cc.InvalidPeerId};let r;try{r=ul(e.from)}catch{return{valid:!1,error:cc.InvalidPeerId}}let n;if(e.key!=null){if(n=wm(e.key),r.publicKey!==void 0&&!Kr(n.bytes,r.publicKey))return{valid:!1,error:cc.InvalidPeerId}}else{if(r.publicKey==null)return{valid:!1,error:cc.InvalidPeerId};n=wm(r.publicKey)}const i={from:e.from,data:e.data,seqno:e.seqno,topic:e.topic,signature:void 0,key:void 0},s=Yi([f6e,$g.Message.encode(i)]);return await n.verify(s,e.signature)?{valid:!0,message:{type:"signed",from:r,data:e.data??new Uint8Array(0),sequenceNumber:BigInt(`0x${vt(e.seqno,"base16")}`),topic:e.topic,signature:e.signature,key:e.key??wz(n)}}:{valid:!1,error:cc.InvalidSignature}}default:throw new Error("Unreachable")}}function ed(t=[],e){return{subscriptions:[],messages:t,control:e!==void 0?{graft:e.graft??[],prune:e.prune??[],ihave:e.ihave??[],iwant:e.iwant??[]}:void 0}}function aae(t){return t.control===void 0&&(t.control={graft:[],prune:[],ihave:[],iwant:[]}),t}function td(t){if(t.length<=1)return t;const e=()=>Math.floor(Math.random()*Math.floor(t.length));for(let r=0;r<t.length;r++){const n=e(),i=t[r];t[r]=t[n],t[n]=i}return t}function zUt(t){return vt(t,"base64")}async function qUt(t,e){switch(t){case _E:{if(e==null)throw Error("Must provide PeerId");if(e.privateKey==null)throw Error("Cannot sign message, no private key present");if(e.publicKey==null)throw Error("Cannot sign message, no public key present");const r=await _m(e.privateKey);return{type:$v.Signing,author:e,key:e.publicKey,privateKey:r}}case X$:return{type:$v.Anonymous};default:throw new Error(`Unknown signature policy "${t}"`)}}const HUt=(t,e)=>{const r=pt(e.toString(16).padStart(16,"0"),"base16"),n=new Uint8Array(t.length+r.length);return n.set(t,0),n.set(r,t.length),n};function WUt(t){if(t.type!=="signed")throw new Error("expected signed message type");if(t.sequenceNumber==null)throw Error("missing seqno field");return HUt(t.from.toBytes(),t.sequenceNumber)}async function KUt(t){return wn.encode(t.data)}var H9;(function(t){t[t.ip4=4]="ip4",t[t.ip6=41]="ip6"})(H9||(H9={}));function GUt(t){for(const e of t.tuples())switch(e[0]){case H9.ip4:case H9.ip6:return kz(e[0],e[1])}return null}class aD{entries=new Map;validityMs;constructor(e){this.validityMs=e.validityMs}get size(){return this.entries.size}put(e,r){return this.entries.has(e)?!0:(this.entries.set(e,{value:r,validUntilMs:Date.now()+this.validityMs}),!1)}prune(){const e=Date.now();for(const[r,n]of this.entries.entries())if(n.validUntilMs<e)this.entries.delete(r);else break}has(e){return this.entries.has(e)}get(e){const r=this.entries.get(e);return r!=null&&r.validUntilMs>=Date.now()?r.value:void 0}clear(){this.entries.clear()}}var qc;(function(t){t[t.started=0]="started",t[t.stopped=1]="stopped"})(qc||(qc={}));class YUt extends ea{globalSignaturePolicy;multicodecs=[tae,eae];publishConfig;dataTransform;peers=new Set;streamsInbound=new Map;streamsOutbound=new Map;outboundInflightQueue=qu({objectMode:!0});direct=new Set;floodsubPeers=new Set;seenCache;acceptFromWhitelist=new Map;topics=new Map;subscriptions=new Set;mesh=new Map;fanout=new Map;fanoutLastpub=new Map;gossip=new Map;control=new Map;peerhave=new Map;iasked=new Map;backoff=new Map;outbound=new Map;msgIdFn;fastMsgIdFn;msgIdToStrFn;fastMsgIdCache;publishedMessageIds;mcache;score;topicValidators=new Map;log;heartbeatTicks=0;gossipTracer;components;directPeerInitial=null;static multicodec=tae;opts;decodeRpcLimits;metrics;status={code:qc.stopped};maxInboundStreams;maxOutboundStreams;runOnTransientConnection;allowedTopics;heartbeatTimer=null;constructor(e,r={}){super();const n={fallbackToFloodsub:!0,floodPublish:!0,batchPublish:!1,tagMeshPeers:!0,doPX:!1,directPeers:[],D:U$t,Dlo:V$t,Dhi:j$t,Dscore:z$t,Dout:q$t,Dlazy:K$t,heartbeatInterval:X$t,fanoutTTL:Z$t,mcacheLength:H$t,mcacheGossip:W$t,seenTTL:lUt,gossipsubIWantFollowupMs:cUt,prunePeers:J$t,pruneBackoff:Q$t,unsubcribeBackoff:eUt,graftFloodThreshold:aUt,opportunisticGraftPeers:sUt,opportunisticGraftTicks:iUt,directConnectTicks:rUt,gossipFactor:G$t,...r,scoreParams:EUt(r.scoreParams),scoreThresholds:CUt(r.scoreThresholds)};if(this.components=e,this.decodeRpcLimits=n.decodeRpcLimits??vUt,this.globalSignaturePolicy=n.globalSignaturePolicy??_E,n.fallbackToFloodsub&&this.multicodecs.push(Qse),this.log=e.logger.forComponent(n.debugName??"libp2p:gossipsub"),this.opts=n,this.direct=new Set(n.directPeers.map(i=>i.id.toString())),this.seenCache=new aD({validityMs:n.seenTTL}),this.publishedMessageIds=new aD({validityMs:n.seenTTL}),r.msgIdFn!=null)this.msgIdFn=r.msgIdFn;else switch(this.globalSignaturePolicy){case _E:this.msgIdFn=WUt;break;case X$:this.msgIdFn=KUt;break;default:throw new Error(`Invalid globalSignaturePolicy: ${this.globalSignaturePolicy}`)}if(r.fastMsgIdFn!=null&&(this.fastMsgIdFn=r.fastMsgIdFn,this.fastMsgIdCache=new aD({validityMs:n.seenTTL})),this.msgIdToStrFn=r.msgIdToStrFn??zUt,this.mcache=r.messageCache??new bUt(n.mcacheGossip,n.mcacheLength,this.msgIdToStrFn),r.dataTransform!=null&&(this.dataTransform=r.dataTransform),r.metricsRegister!=null){if(r.metricsTopicStrToLabel==null)throw Error("Must set metricsTopicStrToLabel with metrics");const i=Math.max(...Object.values(n.scoreParams.topics).map(a=>a.meshMessageDeliveriesWindow),mUt),s=wUt(r.metricsRegister,r.metricsTopicStrToLabel,{gossipPromiseExpireSec:this.opts.gossipsubIWantFollowupMs/1e3,behaviourPenaltyThreshold:n.scoreParams.behaviourPenaltyThreshold,maxMeshMessageDeliveriesWindowSec:i/1e3});s.mcacheSize.addCollect(()=>{this.onScrapeMetrics(s)});for(const a of this.multicodecs)s.protocolsEnabled.set({protocol:a},1);this.metrics=s}else this.metrics=null;this.gossipTracer=new UUt(this.opts.gossipsubIWantFollowupMs,this.msgIdToStrFn,this.metrics),this.score=new NUt(this.opts.scoreParams,this.metrics,this.components.logger,{scoreCacheValidityMs:n.heartbeatInterval}),this.maxInboundStreams=r.maxInboundStreams,this.maxOutboundStreams=r.maxOutboundStreams,this.runOnTransientConnection=r.runOnTransientConnection,this.allowedTopics=n.allowedTopics!=null?new Set(n.allowedTopics):null}[Symbol.toStringTag]="@chainsafe/libp2p-gossipsub";[yo]=["@libp2p/pubsub"];[em]=["@libp2p/identify"];getPeers(){return[...this.peers.keys()].map(e=>ti(e))}isStarted(){return this.status.code===qc.started}async start(){if(this.isStarted())return;this.log("starting"),this.publishConfig=await qUt(this.globalSignaturePolicy,this.components.peerId),this.outboundInflightQueue=qu({objectMode:!0}),is(this.outboundInflightQueue,async s=>{for await(const{peerId:a,connection:o}of s)await this.createOutboundStream(a,o)}).catch(s=>{this.log.error("outbound inflight queue error",s)}),await Promise.all(this.opts.directPeers.map(async s=>{await this.components.peerStore.merge(s.id,{multiaddrs:s.addrs})}));const e=this.components.registrar;await Promise.all(this.multicodecs.map(async s=>e.handle(s,this.onIncomingStream.bind(this),{maxInboundStreams:this.maxInboundStreams,maxOutboundStreams:this.maxOutboundStreams,runOnTransientConnection:this.runOnTransientConnection})));const r={onConnect:this.onPeerConnected.bind(this),onDisconnect:this.onPeerDisconnected.bind(this),notifyOnTransient:this.runOnTransientConnection},n=await Promise.all(this.multicodecs.map(async s=>e.register(s,r))),i=setTimeout(this.runHeartbeat,rae);this.status={code:qc.started,registrarTopologyIds:n,heartbeatTimeout:i,hearbeatStartMs:Date.now()+rae},this.score.start(),this.directPeerInitial=setTimeout(()=>{Promise.resolve().then(async()=>{await Promise.all(Array.from(this.direct).map(async s=>this.connect(s)))}).catch(s=>{this.log(s)})},nUt),this.opts.tagMeshPeers&&(this.addEventListener("gossipsub:graft",this.tagMeshPeer),this.addEventListener("gossipsub:prune",this.untagMeshPeer)),this.log("started")}async stop(){if(this.log("stopping"),this.status.code!==qc.started)return;const{registrarTopologyIds:e}=this.status;this.status={code:qc.stopped},this.opts.tagMeshPeers&&(this.removeEventListener("gossipsub:graft",this.tagMeshPeer),this.removeEventListener("gossipsub:prune",this.untagMeshPeer));const r=this.components.registrar;await Promise.all(this.multicodecs.map(async i=>r.unhandle(i))),e.forEach(i=>{r.unregister(i)}),this.outboundInflightQueue.end();const n=[];for(const i of this.streamsOutbound.values())n.push(i.close());this.streamsOutbound.clear();for(const i of this.streamsInbound.values())n.push(i.close());this.streamsInbound.clear(),await Promise.all(n),this.peers.clear(),this.subscriptions.clear(),this.heartbeatTimer!=null&&(this.heartbeatTimer.cancel(),this.heartbeatTimer=null),this.score.stop(),this.mesh.clear(),this.fanout.clear(),this.fanoutLastpub.clear(),this.gossip.clear(),this.control.clear(),this.peerhave.clear(),this.iasked.clear(),this.backoff.clear(),this.outbound.clear(),this.gossipTracer.clear(),this.seenCache.clear(),this.fastMsgIdCache!=null&&this.fastMsgIdCache.clear(),this.directPeerInitial!=null&&clearTimeout(this.directPeerInitial),this.log("stopped")}dumpPeerScoreStats(){return this.score.dumpPeerScoreStats()}onIncomingStream({stream:e,connection:r}){if(!this.isStarted())return;const n=r.remotePeer;this.addPeer(n,r.direction,r.remoteAddr),this.createInboundStream(n,e),this.outboundInflightQueue.push({peerId:n,connection:r})}onPeerConnected(e,r){this.metrics?.newConnectionCount.inc({status:r.status}),!(!this.isStarted()||r.status!=="open")&&(this.addPeer(e,r.direction,r.remoteAddr),this.outboundInflightQueue.push({peerId:e,connection:r}))}onPeerDisconnected(e){this.log("connection ended %p",e),this.removePeer(e)}async createOutboundStream(e,r){if(!this.isStarted())return;const n=e.toString();if(this.peers.has(n)&&!this.streamsOutbound.has(n))try{const i=new FUt(await r.newStream(this.multicodecs,{runOnTransientConnection:this.runOnTransientConnection}),a=>{this.log.error("outbound pipe error",a)},{maxBufferSize:this.opts.maxOutboundBufferSize});this.log("create outbound stream %p",e),this.streamsOutbound.set(n,i);const s=i.protocol;s===Qse&&this.floodsubPeers.add(n),this.metrics?.peersPerProtocol.inc({protocol:s},1),this.subscriptions.size>0&&(this.log("send subscriptions to",n),this.sendSubscriptions(n,Array.from(this.subscriptions),!0))}catch(i){this.log.error("createOutboundStream error",i)}}createInboundStream(e,r){if(!this.isStarted())return;const n=e.toString();if(!this.peers.has(n))return;const i=this.streamsInbound.get(n);i!==void 0&&(this.log("replacing existing inbound steam %s",n),i.close().catch(a=>{this.log.error(a)})),this.log("create inbound stream %s",n);const s=new $Ut(r,{maxDataLength:this.opts.maxInboundDataLength});this.streamsInbound.set(n,s),this.pipePeerReadStream(e,s.source).catch(a=>{this.log(a)})}addPeer(e,r,n){const i=e.toString();if(!this.peers.has(i)){this.log("new peer %p",e),this.peers.add(i),this.score.addPeer(i);const s=GUt(n);s!==null?this.score.addIP(i,s):this.log("Added peer has no IP in current address %s %s",i,n.toString()),this.outbound.has(i)||this.outbound.set(i,r==="outbound")}}removePeer(e){const r=e.toString();if(!this.peers.has(r))return;this.log("delete peer %p",e),this.peers.delete(r);const n=this.streamsOutbound.get(r),i=this.streamsInbound.get(r);n!=null&&this.metrics?.peersPerProtocol.inc({protocol:n.protocol},-1),n?.close().catch(s=>{this.log.error(s)}),i?.close().catch(s=>{this.log.error(s)}),this.streamsOutbound.delete(r),this.streamsInbound.delete(r);for(const s of this.topics.values())s.delete(r);for(const[s,a]of this.mesh)a.delete(r)&&this.metrics?.onRemoveFromMesh(s,Jf.Dc,1);for(const s of this.fanout.values())s.delete(r);this.floodsubPeers.delete(r),this.gossip.delete(r),this.control.delete(r),this.outbound.delete(r),this.score.removePeer(r),this.acceptFromWhitelist.delete(r)}get started(){return this.status.code===qc.started}getMeshPeers(e){const r=this.mesh.get(e);return r!=null?Array.from(r):[]}getSubscribers(e){const r=this.topics.get(e);return(r!=null?Array.from(r):[]).map(n=>ti(n))}getTopics(){return Array.from(this.subscriptions)}async pipePeerReadStream(e,r){try{await is(r,async n=>{for await(const i of n)try{const s=i.subarray(),a=$g.decode(s,{limits:{subscriptions:this.decodeRpcLimits.maxSubscriptions,messages:this.decodeRpcLimits.maxMessages,control$:{ihave:this.decodeRpcLimits.maxIhaveMessageIDs,iwant:this.decodeRpcLimits.maxIwantMessageIDs,graft:this.decodeRpcLimits.maxControlMessages,prune:this.decodeRpcLimits.maxControlMessages,prune$:{peers:this.decodeRpcLimits.maxPeerInfos}}}});if(this.metrics?.onRpcRecv(a,s.length),this.opts.awaitRpcHandler)try{await this.handleReceivedRpc(e,a)}catch(o){this.metrics?.onRpcRecvError(),this.log(o)}else this.handleReceivedRpc(e,a).catch(o=>{this.metrics?.onRpcRecvError(),this.log(o)})}catch(s){this.metrics?.onRpcDataError(),this.log(s)}})}catch(n){this.metrics?.onPeerReadStreamError(),this.handlePeerReadStreamError(n,e)}}handlePeerReadStreamError(e,r){this.log.error(e),this.onPeerDisconnected(r)}async handleReceivedRpc(e,r){if(!this.acceptFrom(e.toString())){this.log("received message from unacceptable peer %p",e),this.metrics?.rpcRecvNotAccepted.inc();return}const n=r.subscriptions!=null?r.subscriptions.length:0,i=r.messages!=null?r.messages.length:0;let s=0,a=0,o=0,c=0;if(r.control!=null&&(r.control.ihave!=null&&(s=r.control.ihave.length),r.control.iwant!=null&&(a=r.control.iwant.length),r.control.graft!=null&&(o=r.control.graft.length),r.control.prune!=null&&(c=r.control.prune.length)),this.log(`rpc.from ${e.toString()} subscriptions ${n} messages ${i} ihave ${s} iwant ${a} graft ${o} prune ${c}`),r.subscriptions!=null&&r.subscriptions.length>0){const l=[];r.subscriptions.forEach(u=>{const f=u.topic,h=u.subscribe===!0;if(f!=null){if(this.allowedTopics!=null&&!this.allowedTopics.has(f))return;this.handleReceivedSubscription(e,f,h),l.push({topic:f,subscribe:h})}}),this.safeDispatchEvent("subscription-change",{detail:{peerId:e,subscriptions:l}})}for(const l of r.messages){if(this.allowedTopics!=null&&!this.allowedTopics.has(l.topic))continue;const u=this.handleReceivedMessage(e,l).catch(f=>{this.metrics?.onMsgRecvError(l.topic),this.log(f)});this.opts.awaitRpcMessageHandler&&await u}r.control!=null&&await this.handleControlMessage(e.toString(),r.control)}handleReceivedSubscription(e,r,n){this.log("subscription update from %p topic %s",e,r);let i=this.topics.get(r);i==null&&(i=new Set,this.topics.set(r,i)),n?i.add(e.toString()):i.delete(e.toString())}async handleReceivedMessage(e,r){this.metrics?.onMsgRecvPreValidation(r.topic);const n=await this.validateReceivedMessage(e,r);this.metrics?.onPrevalidationResult(r.topic,n.code);const i=n.code;switch(i){case hc.duplicate:this.score.duplicateMessage(e.toString(),n.msgIdStr,r.topic),this.gossipTracer.deliverMessage(n.msgIdStr,!0),this.mcache.observeDuplicate(n.msgIdStr,e.toString());return;case hc.invalid:if(n.msgIdStr!=null){const s=n.msgIdStr;this.score.rejectMessage(e.toString(),s,r.topic,n.reason),this.gossipTracer.rejectMessage(s,n.reason)}else this.score.rejectInvalidMessage(e.toString(),r.topic);this.metrics?.onMsgRecvInvalid(r.topic,n);return;case hc.valid:this.score.validateMessage(n.messageId.msgIdStr),this.gossipTracer.deliverMessage(n.messageId.msgIdStr),this.mcache.put(n.messageId,r,!this.opts.asyncValidation),this.subscriptions.has(r.topic)&&(!this.components.peerId.equals(e)||this.opts.emitSelf)&&(super.dispatchEvent(new CustomEvent("gossipsub:message",{detail:{propagationSource:e,msgId:n.messageId.msgIdStr,msg:n.msg}})),super.dispatchEvent(new CustomEvent("message",{detail:n.msg}))),this.opts.asyncValidation||this.forwardMessage(n.messageId.msgIdStr,r,e.toString());break;default:throw new Error(`Invalid validation result: ${i}`)}}async validateReceivedMessage(e,r){const n=this.fastMsgIdFn?.(r),i=n!==void 0?this.fastMsgIdCache?.get(n):void 0;if(i!=null)return{code:hc.duplicate,msgIdStr:i};const s=await jUt(this.globalSignaturePolicy,r);if(!s.valid)return{code:hc.invalid,reason:Vu.Error,error:s.error};const a=s.message;try{this.dataTransform!=null&&(a.data=this.dataTransform.inboundTransform(r.topic,a.data))}catch(f){return this.log("Invalid message, transform failed",f),{code:hc.invalid,reason:Vu.Error,error:cc.TransformFailed}}const o=await this.msgIdFn(a),c=this.msgIdToStrFn(o),l={msgId:o,msgIdStr:c};if(n!==void 0&&this.fastMsgIdCache!=null&&this.fastMsgIdCache.put(n,c)&&this.metrics?.fastMsgIdCacheCollision.inc(),this.seenCache.has(c))return{code:hc.duplicate,msgIdStr:c};this.seenCache.put(c);const u=this.topicValidators.get(r.topic);if(u!=null){let f;try{f=await u(e,a)}catch(h){const d=h.code;d===hUt&&(f=Ml.Ignore),d===fUt?f=Ml.Reject:f=Ml.Ignore}if(f!==Ml.Accept)return{code:hc.invalid,reason:iae(f),msgIdStr:c}}return{code:hc.valid,messageId:l,msg:a}}getScore(e){return this.score.score(e)}sendSubscriptions(e,r,n){this.sendRpc(e,{subscriptions:r.map(i=>({topic:i,subscribe:n})),messages:[]})}async handleControlMessage(e,r){if(r===void 0)return;const n=r.ihave!=null?this.handleIHave(e,r.ihave):[],i=r.iwant!=null?this.handleIWant(e,r.iwant):[],s=r.graft!=null?await this.handleGraft(e,r.graft):[];if(r.prune!=null&&await this.handlePrune(e,r.prune),n.length===0&&i.length===0&&s.length===0)return;const a=this.sendRpc(e,ed(i,{iwant:n,prune:s})),o=n[0]?.messageIDs;o!=null&&(a?this.gossipTracer.addPromise(e,o):this.metrics?.iwantPromiseUntracked.inc(1))}acceptFrom(e){if(this.direct.has(e))return!0;const r=Date.now(),n=this.acceptFromWhitelist.get(e);if(n!=null&&n.messagesAccepted<pUt&&n.acceptUntil>=r)return n.messagesAccepted+=1,!0;const i=this.score.score(e);return i>=dUt?this.acceptFromWhitelist.set(e,{messagesAccepted:0,acceptUntil:r+gUt}):this.acceptFromWhitelist.delete(e),i>=this.opts.scoreThresholds.graylistThreshold}handleIHave(e,r){if(r.length===0)return[];const n=this.score.score(e);if(n<this.opts.scoreThresholds.gossipThreshold)return this.log("IHAVE: ignoring peer %s with score below threshold [ score = %d ]",e,n),this.metrics?.ihaveRcvIgnored.inc({reason:W3.LowScore}),[];const i=(this.peerhave.get(e)??0)+1;if(this.peerhave.set(e,i),i>oUt)return this.log("IHAVE: peer %s has advertised too many times (%d) within this heartbeat interval; ignoring",e,i),this.metrics?.ihaveRcvIgnored.inc({reason:W3.MaxIhave}),[];const s=this.iasked.get(e)??0;if(s>=q2)return this.log("IHAVE: peer %s has already advertised too many messages (%d); ignoring",e,s),this.metrics?.ihaveRcvIgnored.inc({reason:W3.MaxIasked}),[];const a=new Map;if(r.forEach(({topicID:l,messageIDs:u})=>{if(l==null||u==null||!this.mesh.has(l))return;let f=0;u.forEach(h=>{const d=this.msgIdToStrFn(h);this.seenCache.has(d)||(a.set(d,h),f++)}),this.metrics?.onIhaveRcv(l,u.length,f)}),a.size===0)return[];let o=a.size;o+s>q2&&(o=q2-s),this.log("IHAVE: Asking for %d out of %d messages from %s",o,a.size,e);let c=Array.from(a.values());return td(c),c=c.slice(0,o),this.iasked.set(e,s+o),[{messageIDs:c}]}handleIWant(e,r){if(r.length===0)return[];const n=this.score.score(e);if(n<this.opts.scoreThresholds.gossipThreshold)return this.log("IWANT: ignoring peer %s with score below threshold [score = %d]",e,n),[];const i=new Map,s=new Map;let a=0;return r.forEach(({messageIDs:o})=>{o?.forEach(c=>{const l=this.msgIdToStrFn(c),u=this.mcache.getWithIWantCount(l,e);if(u==null){a++;return}if(s.set(u.msg.topic,1+(s.get(u.msg.topic)??0)),u.count>Y$t){this.log("IWANT: Peer %s has asked for message %s too many times: ignoring request",e,c);return}i.set(l,u.msg)})}),this.metrics?.onIwantRcv(s,a),i.size===0?(this.log("IWANT: Could not provide any wanted messages to %s",e),[]):(this.log("IWANT: Sending %d messages to %s",i.size,e),Array.from(i.values()))}async handleGraft(e,r){const n=[],i=this.score.score(e),s=Date.now();let a=this.opts.doPX;if(r.forEach(({topicID:c})=>{if(c==null)return;const l=this.mesh.get(c);if(l==null){a=!1;return}if(l.has(e))return;const u=this.backoff.get(c)?.get(e);if(this.direct.has(e))this.log("GRAFT: ignoring request from direct peer %s",e),n.push(c),a=!1;else if(typeof u=="number"&&s<u){this.log("GRAFT: ignoring backed off peer %s",e),this.score.addPenalty(e,1,H3.GraftBackoff),a=!1;const f=u+this.opts.graftFloodThreshold-this.opts.pruneBackoff;s<f&&this.score.addPenalty(e,1,H3.GraftBackoff),this.addBackoff(e,c),n.push(c)}else i<0?(this.log("GRAFT: ignoring peer %s with negative score: score=%d, topic=%s",e,i,c),n.push(c),a=!1,this.addBackoff(e,c)):l.size>=this.opts.Dhi&&!(this.outbound.get(e)??!1)?(n.push(c),this.addBackoff(e,c)):(this.log("GRAFT: Add mesh link from %s in %s",e,c),this.score.graft(e,c),l.add(e),this.metrics?.onAddToMesh(c,pc.Subscribed,1));this.safeDispatchEvent("gossipsub:graft",{detail:{peerId:e,topic:c,direction:"inbound"}})}),n.length===0)return[];const o=!1;return Promise.all(n.map(async c=>this.makePrune(e,c,a,o)))}async handlePrune(e,r){const n=this.score.score(e);for(const{topicID:i,backoff:s,peers:a}of r){if(i==null)continue;const o=this.mesh.get(i);if(o==null)return;this.log("PRUNE: Remove mesh link to %s in %s",e,i),this.score.prune(e,i),o.has(e)&&(o.delete(e),this.metrics?.onRemoveFromMesh(i,Jf.Prune,1)),typeof s=="number"&&s>0?this.doAddBackoff(e,i,s*1e3):this.addBackoff(e,i),a!=null&&a.length>0&&(n<this.opts.scoreThresholds.acceptPXThreshold?this.log("PRUNE: ignoring PX from peer %s with insufficient score [score = %d, topic = %s]",e,n,i):await this.pxConnect(a)),this.safeDispatchEvent("gossipsub:prune",{detail:{peerId:e,topic:i,direction:"inbound"}})}}addBackoff(e,r){this.doAddBackoff(e,r,this.opts.pruneBackoff)}doAddBackoff(e,r,n){let i=this.backoff.get(r);i==null&&(i=new Map,this.backoff.set(r,i));const s=Date.now()+n;(i.get(e)??0)<s&&i.set(e,s)}applyIwantPenalties(){this.gossipTracer.getBrokenPromises().forEach((e,r)=>{this.log("peer %s didn't follow up in %d IWANT requests; adding penalty",r,e),this.score.addPenalty(r,e,H3.BrokenPromise)})}clearBackoff(){if(this.heartbeatTicks%tUt!==0)return;const e=Date.now();this.backoff.forEach((r,n)=>{r.forEach((i,s)=>{i+yUt*this.opts.heartbeatInterval<e&&r.delete(s)}),r.size===0&&this.backoff.delete(n)})}async directConnect(){const e=[];this.direct.forEach(r=>{this.streamsOutbound.has(r)||e.push(r)}),await Promise.all(e.map(async r=>this.connect(r)))}async pxConnect(e){e.length>this.opts.prunePeers&&(td(e),e=e.slice(0,this.opts.prunePeers));const r=[];await Promise.all(e.map(async n=>{if(n.peerID==null)return;const i=ul(n.peerID),s=i.toString();if(!this.peers.has(s)){if(n.signedPeerRecord==null){r.push(s);return}try{if(!await this.components.peerStore.consumePeerRecord(n.signedPeerRecord,i)){this.log("bogus peer record obtained through px: could not add peer record to address book");return}r.push(s)}catch{this.log("bogus peer record obtained through px: invalid signature or not a peer record")}}})),r.length!==0&&await Promise.all(r.map(async n=>this.connect(n)))}async connect(e){this.log("Initiating connection with %s",e);const r=ti(e),n=await this.components.connectionManager.openConnection(r);for(const i of this.multicodecs)for(const s of this.components.registrar.getTopologies(i))s.onConnect?.(r,n)}subscribe(e){if(this.status.code!==qc.started)throw new Error("Pubsub has not started");if(!this.subscriptions.has(e)){this.subscriptions.add(e);for(const r of this.peers.keys())this.sendSubscriptions(r,[e],!0)}this.join(e)}unsubscribe(e){if(this.status.code!==qc.started)throw new Error("Pubsub is not started");const r=this.subscriptions.delete(e);if(this.log("unsubscribe from %s - am subscribed %s",e,r),r)for(const n of this.peers.keys())this.sendSubscriptions(n,[e],!1);this.leave(e)}join(e){if(this.status.code!==qc.started)throw new Error("Gossipsub has not started");if(this.mesh.has(e))return;this.log("JOIN %s",e),this.metrics?.onJoin(e);const r=new Set,n=this.backoff.get(e),i=this.fanout.get(e);if(i!=null&&(this.fanout.delete(e),this.fanoutLastpub.delete(e),i.forEach(s=>{!this.direct.has(s)&&this.score.score(s)>=0&&(n==null||!n.has(s))&&r.add(s)}),this.metrics?.onAddToMesh(e,pc.Fanout,r.size)),r.size<this.opts.D){const s=r.size;this.getRandomGossipPeers(e,this.opts.D,o=>!r.has(o)&&!this.direct.has(o)&&this.score.score(o)>=0&&(n==null||!n.has(o))).forEach(o=>{r.add(o)}),this.metrics?.onAddToMesh(e,pc.Random,r.size-s)}this.mesh.set(e,r),r.forEach(s=>{this.log("JOIN: Add mesh link to %s in %s",s,e),this.sendGraft(s,e)})}leave(e){if(this.status.code!==qc.started)throw new Error("Gossipsub has not started");this.log("LEAVE %s",e),this.metrics?.onLeave(e);const r=this.mesh.get(e);r!=null&&(Promise.all(Array.from(r).map(async n=>{this.log("LEAVE: Remove mesh link to %s in %s",n,e),await this.sendPrune(n,e)})).catch(n=>{this.log("Error sending prunes to mesh peers",n)}),this.mesh.delete(e))}selectPeersToForward(e,r,n){const i=new Set,s=this.topics.get(e);s!=null&&(this.direct.forEach(o=>{s.has(o)&&r!==o&&!(n?.has(o)??!1)&&i.add(o)}),this.floodsubPeers.forEach(o=>{s.has(o)&&r!==o&&!(n?.has(o)??!1)&&this.score.score(o)>=this.opts.scoreThresholds.publishThreshold&&i.add(o)}));const a=this.mesh.get(e);return a!=null&&a.size>0&&a.forEach(o=>{r!==o&&!(n?.has(o)??!1)&&i.add(o)}),i}selectPeersToPublish(e){const r=new Set,n={direct:0,floodsub:0,mesh:0,fanout:0},i=this.topics.get(e);if(i!=null)if(this.opts.floodPublish)i.forEach(s=>{this.direct.has(s)?(r.add(s),n.direct++):this.score.score(s)>=this.opts.scoreThresholds.publishThreshold&&(r.add(s),n.floodsub++)});else{this.direct.forEach(a=>{i.has(a)&&(r.add(a),n.direct++)}),this.floodsubPeers.forEach(a=>{i.has(a)&&this.score.score(a)>=this.opts.scoreThresholds.publishThreshold&&(r.add(a),n.floodsub++)});const s=this.mesh.get(e);if(s!=null&&s.size>0)s.forEach(a=>{r.add(a),n.mesh++}),s.size<this.opts.D&&this.getRandomGossipPeers(e,this.opts.D-s.size,o=>!s.has(o)&&!this.direct.has(o)&&!this.floodsubPeers.has(o)&&this.score.score(o)>=this.opts.scoreThresholds.publishThreshold).forEach(o=>{r.add(o),n.mesh++});else{const a=this.fanout.get(e);if(a!=null&&a.size>0)a.forEach(o=>{r.add(o),n.fanout++});else{const o=this.getRandomGossipPeers(e,this.opts.D,c=>this.score.score(c)>=this.opts.scoreThresholds.publishThreshold);o.size>0&&(this.fanout.set(e,o),o.forEach(c=>{r.add(c),n.fanout++}))}this.fanoutLastpub.set(e,Date.now())}}return{tosend:r,tosendCount:n}}forwardMessage(e,r,n,i){n!=null&&this.score.deliverMessage(n,e,r.topic);const s=this.selectPeersToForward(r.topic,n,i);s.forEach(a=>{this.sendRpc(a,ed([r]))}),this.metrics?.onForwardMsg(r.topic,s.size)}async publish(e,r,n){const i=Date.now(),s=this.dataTransform!=null?this.dataTransform.outboundTransform(e,r):r;if(this.publishConfig==null)throw Error("PublishError.Uninitialized");const{raw:a,msg:o}=await VUt(this.publishConfig,e,r,s),c=await this.msgIdFn(o),l=this.msgIdToStrFn(c),u=n?.ignoreDuplicatePublishError??this.opts.ignoreDuplicatePublishError;if(this.seenCache.has(l)){if(u)return this.metrics?.onPublishDuplicateMsg(e),{recipients:[]};throw Error("PublishError.Duplicate")}const{tosend:f,tosendCount:h}=this.selectPeersToPublish(e),d=this.opts.emitSelf&&this.subscriptions.has(e),g=n?.allowPublishToZeroTopicPeers??this.opts.allowPublishToZeroTopicPeers;if(f.size===0&&!g&&!d)throw Error("PublishError.NoPeersSubscribedToTopic");this.seenCache.put(l),this.mcache.put({msgId:c,msgIdStr:l},a,!0),this.publishedMessageIds.put(l);const p=n?.batchPublish??this.opts.batchPublish,m=ed([a]);if(p)this.sendRpcInBatch(f,m);else for(const v of f)this.sendRpc(v,m)||f.delete(v);const y=Date.now()-i;return this.metrics?.onPublishMsg(e,h,f.size,a.data!=null?a.data.length:0,y),d&&(f.add(this.components.peerId.toString()),super.dispatchEvent(new CustomEvent("gossipsub:message",{detail:{propagationSource:this.components.peerId,msgId:l,msg:o}})),super.dispatchEvent(new CustomEvent("message",{detail:o}))),{recipients:Array.from(f.values()).map(v=>ti(v))}}sendRpcInBatch(e,r){const n=$g.encode(r),i=fh.single(n);for(const s of e){const a=this.streamsOutbound.get(s);if(a==null){this.log(`Cannot send RPC to ${s} as there is no open stream to it available`),e.delete(s);continue}try{a.pushPrefixed(i)}catch(o){e.delete(s),this.log.error(`Cannot send rpc to ${s}`,o)}this.metrics?.onRpcSent(r,n.length)}}reportMessageValidationResult(e,r,n){let i;if(n===Ml.Accept){if(i=this.mcache.validate(e),i!=null){const{message:a,originatingPeers:o}=i;this.score.deliverMessage(r,e,a.topic),this.forwardMessage(e,i.message,r,o)}}else if(i=this.mcache.remove(e),i!=null){const a=iae(n),{message:o,originatingPeers:c}=i;this.score.rejectMessage(r,e,o.topic,a);for(const l of c)this.score.rejectMessage(l,e,o.topic,a)}const s=this.score.messageFirstSeenTimestampMs(e);this.metrics?.onReportValidation(i,n,s)}sendGraft(e,r){const i=ed([],{graft:[{topicID:r}]});this.sendRpc(e,i)}async sendPrune(e,r){const i=[await this.makePrune(e,r,this.opts.doPX,!0)],s=ed([],{prune:i});this.sendRpc(e,s)}sendRpc(e,r){const n=this.streamsOutbound.get(e);if(n==null)return this.log(`Cannot send RPC to ${e} as there is no open stream to it available`),!1;const i=this.control.get(e);i!=null&&(this.piggybackControl(e,r,i),this.control.delete(e));const s=this.gossip.get(e);s!=null&&(this.piggybackGossip(e,r,s),this.gossip.delete(e));const a=$g.encode(r);try{n.push(a)}catch(o){return this.log.error(`Cannot send rpc to ${e}`,o),i!=null&&this.control.set(e,i),s!=null&&this.gossip.set(e,s),!1}if(this.metrics?.onRpcSent(r,a.length),r.control?.graft!=null)for(const o of r.control?.graft)o.topicID!=null&&this.safeDispatchEvent("gossipsub:graft",{detail:{peerId:e,topic:o.topicID,direction:"outbound"}});if(r.control?.prune!=null)for(const o of r.control?.prune)o.topicID!=null&&this.safeDispatchEvent("gossipsub:prune",{detail:{peerId:e,topic:o.topicID,direction:"outbound"}});return!0}piggybackControl(e,r,n){const i=aae(r);for(const s of n.graft)s.topicID!=null&&(this.mesh.get(s.topicID)?.has(e)??!1)&&i.control.graft.push(s);for(const s of n.prune)s.topicID!=null&&!(this.mesh.get(s.topicID)?.has(e)??!1)&&i.control.prune.push(s)}piggybackGossip(e,r,n){const i=aae(r);i.control.ihave=n}async sendGraftPrune(e,r,n){const i=this.opts.doPX,s=!1;for(const[a,o]of e){const c=o.map(f=>({topicID:f}));let l=[];const u=r.get(a);u!=null&&(l=await Promise.all(u.map(async f=>this.makePrune(a,f,i&&!(n.get(a)??!1),s))),r.delete(a)),this.sendRpc(a,ed([],{graft:c,prune:l}))}for(const[a,o]of r){const c=await Promise.all(o.map(async l=>this.makePrune(a,l,i&&!(n.get(a)??!1),s)));this.sendRpc(a,ed([],{prune:c}))}}emitGossip(e){const r=this.mcache.getGossipIDs(new Set(e.keys()));for(const[n,i]of e)this.doEmitGossip(n,i,r.get(n)??[])}doEmitGossip(e,r,n){if(n.length===0||(td(n),n.length>q2&&this.log("too many messages for gossip; will truncate IHAVE list (%d messages)",n.length),r.size===0))return;let i=this.opts.Dlazy;const a=this.opts.gossipFactor*r.size;let o=r;a>i&&(i=a),i>o.size?i=o.size:o=td(Array.from(o)).slice(0,i),o.forEach(c=>{let l=n;n.length>q2&&(l=td(l.slice()).slice(0,q2)),this.pushGossip(c,{topicID:e,messageIDs:l})})}flush(){for(const[e,r]of this.gossip.entries())this.gossip.delete(e),this.sendRpc(e,ed([],{ihave:r}));for(const[e,r]of this.control.entries()){this.control.delete(e);const n=ed([],{graft:r.graft,prune:r.prune});this.sendRpc(e,n)}}pushGossip(e,r){this.log("Add gossip to %s",e);const n=this.gossip.get(e)??[];this.gossip.set(e,n.concat(r))}async makePrune(e,r,n,i){if(this.score.prune(e,r),this.streamsOutbound.get(e)?.protocol===eae)return{topicID:r,peers:[]};const s=i?this.opts.unsubcribeBackoff:this.opts.pruneBackoff,a=s/1e3;if(this.doAddBackoff(e,r,s),!n)return{topicID:r,peers:[],backoff:a};const o=this.getRandomGossipPeers(r,this.opts.prunePeers,l=>l!==e&&this.score.score(l)>=0),c=await Promise.all(Array.from(o).map(async l=>{const u=ti(l);let f;try{f=await this.components.peerStore.get(u)}catch(h){if(h.code!=="ERR_NOT_FOUND")throw h}return{peerID:u.toBytes(),signedPeerRecord:f?.peerRecordEnvelope}}));return{topicID:r,peers:c,backoff:a}}runHeartbeat=()=>{const e=this.metrics?.heartbeatDuration.startTimer();this.heartbeat().catch(r=>{this.log("Error running heartbeat",r)}).finally(()=>{if(e?.(),this.status.code===qc.started){clearTimeout(this.status.heartbeatTimeout);let r=this.opts.heartbeatInterval-(Date.now()-this.status.hearbeatStartMs)%this.opts.heartbeatInterval;r<this.opts.heartbeatInterval*.25&&(r+=this.opts.heartbeatInterval,this.metrics?.heartbeatSkipped.inc()),this.status.heartbeatTimeout=setTimeout(this.runHeartbeat,r)}})};async heartbeat(){const{D:e,Dlo:r,Dhi:n,Dscore:i,Dout:s,fanoutTTL:a}=this.opts;this.heartbeatTicks++;const o=new Map,c=g=>{let p=o.get(g);return p===void 0&&(p=this.score.score(g),o.set(g,p)),p},l=new Map,u=new Map,f=new Map;this.clearBackoff(),this.peerhave.clear(),this.metrics?.cacheSize.set({cache:"iasked"},this.iasked.size),this.iasked.clear(),this.applyIwantPenalties(),this.heartbeatTicks%this.opts.directConnectTicks===0&&await this.directConnect(),this.fastMsgIdCache?.prune(),this.seenCache.prune(),this.gossipTracer.prune(),this.publishedMessageIds.prune();const h=new Map;this.mesh.forEach((g,p)=>{const m=this.topics.get(p),y=new Set,v=new Set;if(h.set(p,v),m!=null){const A=td(Array.from(m)),C=this.backoff.get(p);for(const R of A){const M=this.streamsOutbound.get(R);if(M!=null&&this.multicodecs.includes(M.protocol)&&!g.has(R)&&!this.direct.has(R)){const N=c(R);(C==null||!C.has(R))&&N>=0&&y.add(R),N>=this.opts.scoreThresholds.gossipThreshold&&v.add(R)}}}const _=(A,C)=>{this.log("HEARTBEAT: Remove mesh link to %s in %s",A,p),this.addBackoff(A,p),g.delete(A),c(A)>=this.opts.scoreThresholds.gossipThreshold&&v.add(A),this.metrics?.onRemoveFromMesh(p,C,1);const R=u.get(A);R==null?u.set(A,[p]):R.push(p)},x=(A,C)=>{this.log("HEARTBEAT: Add mesh link to %s in %s",A,p),this.score.graft(A,p),g.add(A),v.delete(A),this.metrics?.onAddToMesh(p,C,1);const R=l.get(A);R==null?l.set(A,[p]):R.push(p)};if(g.forEach(A=>{const C=c(A);C<0&&(this.log("HEARTBEAT: Prune peer %s with negative score: score=%d, topic=%s",A,C,p),_(A,Jf.BadScore),f.set(A,!0))}),g.size<r){const A=e-g.size;IUt(y,A).forEach(R=>{x(R,pc.NotEnough)})}if(g.size>n){let A=Array.from(g);A.sort((R,M)=>c(M)-c(R)),A=A.slice(0,i).concat(td(A.slice(i)));let C=0;if(A.slice(0,e).forEach(R=>{(this.outbound.get(R)??!1)&&C++}),C<s){const R=N=>{const Y=A[N];for(let H=N;H>0;H--)A[H]=A[H-1];A[0]=Y};if(C>0){let N=C;for(let Y=1;Y<e&&N>0;Y++)(this.outbound.get(A[Y])??!1)&&(R(Y),N--)}let M=e-C;for(let N=e;N<A.length&&M>0;N++)(this.outbound.get(A[N])??!1)&&(R(N),M--)}A.slice(e).forEach(R=>{_(R,Jf.Excess)})}if(g.size>=r){let A=0;if(g.forEach(C=>{(this.outbound.get(C)??!1)&&A++}),A<s){const C=s-A;eL(y,C,M=>this.outbound.get(M)===!0).forEach(M=>{x(M,pc.Outbound)})}}if(this.heartbeatTicks%this.opts.opportunisticGraftTicks===0&&g.size>1){const A=Array.from(g).sort((M,N)=>c(M)-c(N)),C=Math.floor(g.size/2),R=c(A[C]);if(R<this.opts.scoreThresholds.opportunisticGraftThreshold){const M=this.opts.opportunisticGraftPeers,N=eL(y,M,Y=>c(Y)>R);for(const Y of N)this.log("HEARTBEAT: Opportunistically graft peer %s on topic %s",Y,p),x(Y,pc.Opportunistic)}}});const d=Date.now();this.fanoutLastpub.forEach((g,p)=>{g+a<d&&(this.fanout.delete(p),this.fanoutLastpub.delete(p))}),this.fanout.forEach((g,p)=>{const m=this.topics.get(p);g.forEach(x=>{(!(m?.has(x)??!1)||c(x)<this.opts.scoreThresholds.publishThreshold)&&g.delete(x)});const y=this.topics.get(p),v=[],_=new Set;if(h.set(p,_),y!=null){const x=td(Array.from(y));for(const A of x){const C=this.streamsOutbound.get(A);if(C!=null&&this.multicodecs.includes(C.protocol)&&!g.has(A)&&!this.direct.has(A)){const R=c(A);R>=this.opts.scoreThresholds.publishThreshold&&v.push(A),R>=this.opts.scoreThresholds.gossipThreshold&&_.add(A)}}}if(g.size<e){const x=e-g.size;v.slice(0,x).forEach(A=>{g.add(A),_?.delete(A)})}}),this.emitGossip(h),await this.sendGraftPrune(l,u,f),this.flush(),this.mcache.shift(),this.dispatchEvent(new CustomEvent("gossipsub:heartbeat"))}getRandomGossipPeers(e,r,n=()=>!0){const i=this.topics.get(e);if(i==null)return new Set;let s=[];return i.forEach(a=>{const o=this.streamsOutbound.get(a);o!=null&&this.multicodecs.includes(o.protocol)&&n(a)&&s.push(a)}),s=td(s),r>0&&s.length>r&&(s=s.slice(0,r)),new Set(s)}onScrapeMetrics(e){e.mcacheSize.set(this.mcache.size),e.mcacheNotValidatedCount.set(this.mcache.notValidatedCount),e.cacheSize.set({cache:"direct"},this.direct.size),e.cacheSize.set({cache:"seenCache"},this.seenCache.size),e.cacheSize.set({cache:"fastMsgIdCache"},this.fastMsgIdCache?.size??0),e.cacheSize.set({cache:"publishedMessageIds"},this.publishedMessageIds.size),e.cacheSize.set({cache:"mcache"},this.mcache.size),e.cacheSize.set({cache:"score"},this.score.size),e.cacheSize.set({cache:"gossipTracer.promises"},this.gossipTracer.size),e.cacheSize.set({cache:"gossipTracer.requests"},this.gossipTracer.requestMsByMsgSize),e.cacheSize.set({cache:"topics"},this.topics.size),e.cacheSize.set({cache:"subscriptions"},this.subscriptions.size),e.cacheSize.set({cache:"mesh"},this.mesh.size),e.cacheSize.set({cache:"fanout"},this.fanout.size),e.cacheSize.set({cache:"peers"},this.peers.size),e.cacheSize.set({cache:"streamsOutbound"},this.streamsOutbound.size),e.cacheSize.set({cache:"streamsInbound"},this.streamsInbound.size),e.cacheSize.set({cache:"acceptFromWhitelist"},this.acceptFromWhitelist.size),e.cacheSize.set({cache:"gossip"},this.gossip.size),e.cacheSize.set({cache:"control"},this.control.size),e.cacheSize.set({cache:"peerhave"},this.peerhave.size),e.cacheSize.set({cache:"outbound"},this.outbound.size);let r=0;const n=Date.now();e.connectedPeersBackoffSec.reset();for(const o of this.backoff.values()){r+=o.size;for(const[c,l]of o.entries())this.peers.has(c)&&e.connectedPeersBackoffSec.observe(Math.max(0,l-n)/1e3)}e.cacheSize.set({cache:"backoff"},r);for(const[o,c]of this.topics)e.topicPeersCount.set({topicStr:o},c.size);for(const[o,c]of this.mesh)e.meshPeerCounts.set({topicStr:o},c.size);const i=[],s=new Map;e.behaviourPenalty.reset();for(const o of this.peers.keys()){const c=this.score.score(o);i.push(c),s.set(o,c),e.behaviourPenalty.observe(this.score.peerStats.get(o)?.behaviourPenalty??0)}e.registerScores(i,this.opts.scoreThresholds),e.registerScorePerMesh(this.mesh,s);const a=LUt(this.peers.keys(),this.score.peerStats,this.score.params,this.score.peerIPs,e.topicStrToLabel);e.registerScoreWeights(a)}tagMeshPeer=e=>{const{peerId:r,topic:n}=e.detail;this.components.peerStore.merge(ti(r),{tags:{[n]:{value:100}}}).catch(i=>{this.log.error("Error tagging peer %s with topic %s",r,n,i)})};untagMeshPeer=e=>{const{peerId:r,topic:n}=e.detail;this.components.peerStore.merge(ti(r),{tags:{[n]:void 0}}).catch(i=>{this.log.error("Error untagging peer %s with topic %s",r,n,i)})}}function TT(t={}){return e=>new YUt(e,t)}var W9;(function(t){let e;t.codec=()=>(e==null&&(e=Xr((r,n,i={})=>{if(i.lengthDelimited!==!1&&n.fork(),r.publicKey!=null&&r.publicKey.byteLength>0&&(n.uint32(10),n.bytes(r.publicKey)),r.addrs!=null)for(const s of r.addrs)n.uint32(18),n.bytes(s);i.lengthDelimited!==!1&&n.ldelim()},(r,n)=>{const i={publicKey:li(0),addrs:[]},s=n==null?r.len:r.pos+n;for(;r.pos<s;){const a=r.uint32();switch(a>>>3){case 1:{i.publicKey=r.bytes();break}case 2:{i.addrs.push(r.bytes());break}default:{r.skipType(a&7);break}}}return i})),e),t.encode=r=>Yr(r,t.codec()),t.decode=r=>Gr(r,t.codec())})(W9||(W9={}));const XUt="_peer-discovery._p2p._pubsub";class ZUt extends ea{[p4]=!0;[Symbol.toStringTag]="@libp2p/pubsub-peer-discovery";interval;listenOnly;topics;intervalId;components;log;constructor(e,r={}){super();const{interval:n,topics:i,listenOnly:s}=r;this.components=e,this.interval=n??1e4,this.listenOnly=s??!1,this.log=e.logger.forComponent("libp2p:discovery:pubsub"),Array.isArray(i)&&i.length>0?this.topics=i:this.topics=[XUt],this._onMessage=this._onMessage.bind(this)}isStarted(){return this.intervalId!=null}start(){}afterStart(){if(this.intervalId!=null)return;const e=this.components.pubsub;if(e==null)throw new Error("PubSub not configured");for(const r of this.topics)e.subscribe(r),e.addEventListener("message",this._onMessage);this.listenOnly||(this._broadcast(),this.intervalId=setInterval(()=>{this._broadcast()},this.interval))}beforeStop(){const e=this.components.pubsub;if(e==null)throw new Error("PubSub not configured");for(const r of this.topics)e.unsubscribe(r),e.removeEventListener("message",this._onMessage)}stop(){this.intervalId!=null&&(clearInterval(this.intervalId),this.intervalId=void 0)}_broadcast(){const e=this.components.peerId;if(e.publicKey==null)throw new Error("PeerId was missing public key");const r={publicKey:e.publicKey,addrs:this.components.addressManager.getAddresses().map(s=>s.bytes)},n=W9.encode(r),i=this.components.pubsub;if(i==null)throw new Error("PubSub not configured");for(const s of this.topics){if(i.getSubscribers(s).length===0){this.log("skipping broadcasting our peer data on topic %s because there are no peers present",s);continue}this.log("broadcasting our peer data on topic %s",s),i.publish(s,n)}}_onMessage(e){if(!this.isStarted())return;const r=e.detail;if(!this.topics.includes(r.topic))return;const n=W9.decode(r.data);Yu(n.publicKey).then(i=>{i.equals(this.components.peerId)||(this.log("discovered peer %p on %s",i,r.topic),this.safeDispatchEvent("peer",{detail:{id:i,multiaddrs:n.addrs.map(s=>Wr(s))}}))}).catch(i=>{this.log.error(i)})}}function Yz(t={}){return e=>new ZUt(e,t)}const kT=["/dnsaddr/bootstrap.libp2p.io/p2p/QmNnooDu7bfjPFoTZYxMNLWUQJyrVwtbZg5gBMjTezGAJN","/dnsaddr/bootstrap.libp2p.io/p2p/QmQCU2EcMqAqQPR2i9bChDtGNJchTbq5TbXJJ16u19uLTa","/dnsaddr/bootstrap.libp2p.io/p2p/QmbLHAnMoJPWSCR5Zhtx6BHJX9KiKNN6tpvbUcqanj75Nb","/dnsaddr/bootstrap.libp2p.io/p2p/QmcZf59bWwK5XFi76CZX8cbJ4BhTzzA3gU1ZjYZcYW3dwt","/ip4/164.90.222.145/udp/9090/webrtc-direct/certhash/uEiAJOkKT64u6jmXV5YxncCoER5WXSO2HYE23Xpap651xMw/p2p/12D3KooWJ7P1yeoxB5mq3TwQh8YgmVhankjtT4rsVGZPUyf617aR","/ip4/164.90.222.145/udp/9091/quic-v1/p2p/12D3KooWJ7P1yeoxB5mq3TwQh8YgmVhankjtT4rsVGZPUyf617aR","/ip4/164.90.222.145/tcp/9092/p2p/12D3KooWJ7P1yeoxB5mq3TwQh8YgmVhankjtT4rsVGZPUyf617aR","/dns4/relai-ws-libp2p.xn--rseau-constellation-bzb.ca/tcp/443/wss/p2p/12D3KooWJDZ7mbpWWGbM9YfjRBqWfraZsvBYFNfZZSvfvxkYoNF3","/dns4/relai-ws-libp2p.xn--rseau-constellation-bzb.ca/tcp/80/ws/p2p/12D3KooWJDZ7mbpWWGbM9YfjRBqWfraZsvBYFNfZZSvfvxkYoNF3"],JUt=async()=>{const{tcp:t}=await Ar(async()=>{const{tcp:r}=await import("./index-BtowmXRC.js");return{tcp:r}},[]),{mdns:e}=await Ar(async()=>{const{mdns:r}=await import("./index-DJDjVLsi.js");return{mdns:r}},__vite__mapDeps([2,3]));return{addresses:{listen:["/ip4/0.0.0.0/tcp/0/ws","/webrtc","/webtransport","/webrtc-direct"]},transportManager:{faultTolerance:Ig.NO_FATAL},transports:[k8({filter:T8}),ET({rtcConfiguration:{iceServers:[{urls:["stun:stun.l.google.com:19302","stun:global.stun.twilio.com:3478"]}]}}),C8(),xT(),t(),E8({discoverRelays:2})],connectionEncryption:[n2()],streamMuxers:[_8()],connectionManager:{maxConnections:1/0,minConnections:10},connectionGater:{denyDialMultiaddr:()=>!1},peerDiscovery:[e(),x8({list:kT,timeout:0}),Yz({interval:1e3,topics:["constellation._peer-discovery._p2p._pubsub"],listenOnly:!1})],services:{identify:S8(),autoNAT:vT(),dcutr:_T(),pubsub:TT({allowPublishToZeroTopicPeers:!0,runOnTransientConnection:!0,canRelayMessage:!0}),dht:$z({clientMode:!1})}}},QUt=async()=>{const{tcp:t}=await Ar(async()=>{const{tcp:r}=await import("./index-BtowmXRC.js");return{tcp:r}},[]),{mdns:e}=await Ar(async()=>{const{mdns:r}=await import("./index-DJDjVLsi.js");return{mdns:r}},__vite__mapDeps([2,3]));return{addresses:{listen:["/ip4/0.0.0.0/tcp/0/ws","/webrtc","/webtransport"]},transports:[k8({filter:T8}),ET({rtcConfiguration:{iceServers:[{urls:["stun:stun.l.google.com:19302","stun:global.stun.twilio.com:3478"]}]}}),C8(),xT(),t(),E8({discoverRelays:1})],connectionEncryption:[n2()],streamMuxers:[_8()],connectionManager:{maxConnections:1/0,minConnections:10},connectionGater:{denyDialMultiaddr:()=>!1},peerDiscovery:[e(),x8({list:kT,timeout:0}),Yz({interval:1e3,topics:["constellation._peer-discovery._p2p._pubsub"],listenOnly:!1})],services:{identify:S8(),autoNAT:vT(),dcutr:_T(),pubsub:TT({allowPublishToZeroTopicPeers:!0,runOnTransientConnection:!0,canRelayMessage:!0}),dht:$z({clientMode:!0})}}},oae=async()=>({addresses:{listen:["/webrtc","/webtransport"]},transports:[k8({filter:T8}),ET({rtcConfiguration:{iceServers:[{urls:["stun:stun.l.google.com:19302","stun:global.stun.twilio.com:3478"]}]}}),xT(),C8(),E8({discoverRelays:2})],connectionEncryption:[n2()],streamMuxers:[_8()],connectionManager:{maxConnections:1/0,minConnections:10},connectionGater:{denyDialMultiaddr:()=>!1},peerDiscovery:[x8({list:kT,timeout:0}),Yz({interval:1e3,topics:["constellation._peer-discovery._p2p._pubsub"],listenOnly:!1})],services:{identify:S8(),autoNAT:vT(),dcutr:_T(),pubsub:TT({allowPublishToZeroTopicPeers:!0,runOnTransientConnection:!0,canRelayMessage:!0})}}),eVt=async()=>({addresses:{listen:["/webrtc"]},transports:[k8({filter:T8}),C8(),E8({discoverRelays:1})],connectionEncryption:[n2()],streamMuxers:[_8()],connectionGater:{denyDialMultiaddr:()=>!1},peerDiscovery:[x8({list:kT,timeout:0})],services:{identify:S8(),pubsub:TT({allowPublishToZeroTopicPeers:!0})}}),tVt=async()=>{let t;return n6||sle?t=await oae():mS?t=await eVt():Oa?t=await QUt():Na?t=await JUt():(console.warn("Plateforme non reconnue. On utilisera la configuration navigateur."),t=await oae()),t};async function h6e({dossier:t,configLibp2p:e={}}){const r=await tVt(),n=await u6e(tu(e,{...r})),s={blockstore:new $$t(`${t}/blocks`),libp2p:n,blockBrokers:[g3e()]};return await O$t({...s})}const rVt=Object.freeze(Object.defineProperty({__proto__:null,initSFIP:h6e},Symbol.toStringTag,{value:"Module"})),nVt=t=>{if(!t)return!1;const e=t;return e.id&&typeof e.open=="function"&&typeof e.stop=="function"&&e.ipfs},K9={type:"object",properties:{protocoles:{type:"string",nullable:!0},profil:{type:"string",nullable:!0},motsClefs:{type:"string",nullable:!0},variables:{type:"string",nullable:!0},bds:{type:"string",nullable:!0},projets:{type:"string",nullable:!0},nuées:{type:"string",nullable:!0},favoris:{type:"string",nullable:!0},réseau:{type:"string",nullable:!0},automatisations:{type:"string",nullable:!0}},required:[]},cae={type:"object",additionalProperties:{type:"object",properties:{nom:{type:"string",nullable:!0},type:{type:"string",nullable:!0}}},required:[]},iVt=1e3*60*5,sVt=async t=>{if(t.dossier&&t.dossier!=="dév"){if(Na||Oa){const e=await Ar(()=>Promise.resolve().then(()=>vc),void 0);e.existsSync(t.dossier)||e.mkdirSync(t.dossier,{recursive:!0})}return t.dossier}if(Na||Oa){const e=await Ar(()=>Promise.resolve().then(()=>vc),void 0),r=(await Ar(async()=>{const{default:s}=await import("env-paths");return{default:s}},[])).default,n=r("constl",{suffix:""}),i=await Zp(n.data,t.dossier==="dév"?"constl-dév":"constl");return e.existsSync(i)||e.mkdirSync(i,{recursive:!0}),i}else return"./constl"},Zp=async(...t)=>{if(Na||Oa){const{join:e}=await Ar(async()=>{const{join:r}=await Promise.resolve().then(()=>r6);return{join:r}},void 0);return e(...t)}else return t.join("/")};class Wl{_opts;événements;orbite;sfip;épingles;profil;bds;tableaux;variables;réseau;favoris;projets;recherche;motsClefs;automatisations;nuées;licences;protocoles;erreurInitialisation;_orbiteExterne;_sfipExterne;idCompte;encryption;sujet_réseau;motsDePasseRejoindreCompte;ennikkai;verrouObtIdBd;_intervaleVerrou;constructor(e={}){this._opts=e,this.événements=new qi.EventEmitter,this.sujet_réseau=e.sujetRéseau||"réseau-constellation",this.motsDePasseRejoindreCompte={},this.verrouObtIdBd=new kc,this._orbiteExterne=this._sfipExterne=!1,this.encryption=new BTt,this.ennikkai=new Kue({}),this.épingles=new UAt({client:this}),this.profil=new u8({client:this}),this.motsClefs=new f8({client:this}),this.tableaux=new Ch({client:this}),this.variables=new gp({client:this}),this.bds=new Zi({client:this}),this.projets=new m0({client:this}),this.nuées=new qa({client:this}),this.favoris=new iT({client:this}),this.automatisations=new rkt({client:this}),this.recherche=new nr({client:this}),this.licences=new Tve({client:this}),this.réseau=new Us({client:this}),this.protocoles=new dbe({client:this}),this._initialiser()}async dossier(){return await sVt(this._opts)}async _initialiser(){try{await this.verrouillerDossier({message:this._opts.messageVerrou})}catch(i){this.erreurInitialisation=i,this.événements.emit("erreurInitialisation",i)}const{sfip:e,orbite:r}=await this._générerSFIPetOrbite();this.sfip=e,this.orbite=OA.obtGestionnaireOrbite({orbite:r}),this.événements.emit("sfipEtOrbitePrêts",{sfip:e,orbite:this.orbite});const n={type:Yf,write:this.orbite.identity.id,nom:"racine"};this.idCompte=await this.obtDeStockageLocal({clef:"idCompte",parCompte:!1})||void 0,this.idCompte||(this.idCompte=await this.créerBdIndépendante({type:"keyvalue",optionsAccès:n,nom:"racine"}),await this.nommerDispositif({type:this.détecterTypeDispositif()}),await this.sauvegarderAuStockageLocal({clef:"idCompte",val:this.idCompte,parCompte:!1})),await this.réseau.initialiser(),await this.protocoles.établirProtocoles({protocoles:this._opts.protocoles}),await this.épingler(),this.événements.emit("comptePrêt",{idCompte:this.idCompte})}détecterTypeDispositif(){if(Oa)return"ordinateur";if(Na)return"serveur";if(n6)return["Pad","Kindle","Nexus","Nook","PlayBook"].find(e=>_y.product?.includes(e))?"tablette":_y.name?.includes("Mobile")||["Phone","Android","iOS"].find(e=>_y.os?.family?.includes(e))?"téléphone":"navigateur"}async attendreSfipEtOrbite(){return this.sfip&&this.orbite?{sfip:this.sfip,orbite:this.orbite}:new Promise(e=>{this.événements.once("sfipEtOrbitePrêts",e)})}async attendreInitialisée(){if(this.erreurInitialisation)throw this.erreurInitialisation;return this.idCompte?{idCompte:this.idCompte}:new Promise((e,r)=>{this.événements.once("comptePrêt",e),this.événements.once("erreurInitialisation",r)})}async verrouillerDossier({message:e}){if(Oa||Na){const n=await Ar(()=>Promise.resolve().then(()=>vc),void 0),i=await Zp(await this.dossier(),"VERROU"),s=new Date;if(!n.existsSync(i))n.writeFileSync(i,e||"");else{const o=n.statSync(i).mtime,c=()=>{if(s.getTime()-o.getTime()>5e3)n.writeFileSync(i,e||"");else{const l=new TextDecoder().decode(n.readFileSync(i));try{const f=JSON.parse(l);if(f.port){const h=new Error(`Ce compte est déjà ouvert en Constellation, et le serveur local est disponible sur le port ${f.port}. Vous pouvez soit vous connecter sur ce port, soit fermer les instances de Constellation qui ouvertes et puis vous ressayer.`);throw h.name=rM,h}}catch{}const u=new Error("Constellation est déjà lancée.");throw u.name=rM,u}};try{c()}catch{await new Promise(l=>setTimeout(l,5e3)),c()}}this._intervaleVerrou=setInterval(()=>{try{n.utimesSync(i,s,s)}catch{}},5e3)}}async effacerVerrou(){(Oa||Na)&&(this._intervaleVerrou&&clearInterval(this._intervaleVerrou),(await Ar(()=>Promise.resolve().then(()=>vc),void 0)).rmSync(await Zp(await this.dossier(),"VERROU")))}async _générerSFIPetOrbite(){const e=await this.dossier(),{orbite:r}=this._opts;let n,i;if(r)if(nVt(r))this._sfipExterne=this._orbiteExterne=!0,n=r.ipfs,i=r;else{const{initOrbite:s}=await Ar(async()=>{const{initOrbite:a}=await Promise.resolve().then(()=>gre);return{initOrbite:a}},void 0);r.ipfs?(this._sfipExterne=!0,n=r.ipfs):n=await h6e({dossier:await Zp(e,"sfip")}),i=await s({sfip:n,dossierOrbite:r.directory||await Zp(e,"orbite")}),n=i.ipfs}else{const{initSFIP:s}=await Ar(async()=>{const{initSFIP:o}=await Promise.resolve().then(()=>rVt);return{initSFIP:o}},void 0);n=await s({dossier:await Zp(await this.dossier(),"sfip")});const{initOrbite:a}=await Ar(async()=>{const{initOrbite:o}=await Promise.resolve().then(()=>gre);return{initOrbite:o}},void 0);i=await a({sfip:n,dossierOrbite:await Zp(await this.dossier(),"orbite")})}return{sfip:n,orbite:i}}async obtOptionsAccès(){return{write:await this.obtIdCompte()}}async épingler(){await this.épingles.épinglerBd({id:await this.obtIdCompte()}),await Promise.all([this.profil,this.automatisations,this.bds,this.variables,this.projets,this.nuées,this.motsClefs,this.réseau,this.favoris].map(async e=>e&&await e.épingler()))}async ouvrirBd({id:e,type:r,options:n}){const{orbite:i}=await this.attendreSfipEtOrbite();return await i.ouvrirBd({id:e,type:r,options:n})}async ouvrirBdTypée({id:e,type:r,schéma:n,options:i}){const{orbite:s}=await this.attendreSfipEtOrbite();return await s.ouvrirBdTypée({id:e,type:r,schéma:n,options:i})}async signer({message:e}){const{orbite:r}=await this.attendreSfipEtOrbite(),n=r.identity,i=await r.identity.sign(n,e),s=r.identity.publicKey;return{signature:i,clefPublique:s}}async vérifierSignature({signature:e,message:r}){if(!e||!e.clefPublique||!e.signature)return!1;const{orbite:n}=await this.attendreSfipEtOrbite();return await n.identity.verify(e.signature,e.clefPublique,r)}async suivreDispositifs({f:e,idCompte:r}){const n=async({id:i})=>{const{orbite:s}=await this.attendreSfipEtOrbite(),{bd:a,fOublier:o}=await s.ouvrirBdTypée({id:i,type:"keyvalue",schéma:K9}),c=a.access,l=c.type;if(l==="ipfs")return await e(c.write),await o(),Li;if(l==="contrôleur-constellation"){const u=c,f=async()=>{const h=u.gestRôles._rôles[fa];await e(h)};return u.gestRôles.on("misÀJour",f),f(),async()=>{u.gestRôles.off("misÀJour",f),await o()}}else return await o(),Li};return await fs({fRacine:async({fSuivreRacine:i})=>r?(await i(r),Li):await this.suivreIdCompte({f:i}),f:hs(e),fSuivre:n})}async nommerDispositif({idDispositif:e,nom:r,type:n}){const i=e||await this.obtIdDispositif(),s=await this.obtIdBd({nom:"nomsDispositifs",racine:await this.obtIdCompte(),type:"keyvalue"}),{bd:a,fOublier:o}=await this.ouvrirBdTypée({id:s,type:"keyvalue",schéma:cae});if(r||n){const c={};r&&(c.nom=r),n&&(c.type=n),await a.set(i,c)}else await a.del(i);await o()}async suivreNomsDispositifs({idCompte:e,f:r}){const n=e||await this.obtIdCompte();return await this.suivreBdDicDeClef({id:n,schéma:cae,clef:"nomsDispositifs",f:r})}async suivreNomDispositif({idCompte:e,idDispositif:r,f:n}){return await this.suivreNomsDispositifs({idCompte:e,f:async i=>{const s=i[r];if(s)return await n(s)}})}async générerInvitationRejoindreCompte(){const e=await this.obtIdCompte(),r=await this.encryption.clefAléatoire();return this.motsDePasseRejoindreCompte[r]=Date.now(),{idCompte:e,codeSecret:r}}async révoquerInvitationRejoindreCompte({codeSecret:e}){e?delete this.motsDePasseRejoindreCompte[e]:this.motsDePasseRejoindreCompte={}}async considérerRequêteRejoindreCompte({requête:e}){const{idDispositif:r,empreinteVérification:n}=e,i=Date.now();for(const s of Object.keys(this.motsDePasseRejoindreCompte)){const a=this.motsDePasseRejoindreCompte[s];i-a<iVt&&this.empreinteInvitation({idDispositif:r,codeSecret:s})===n&&(delete this.motsDePasseRejoindreCompte[s],await this.ajouterDispositif({idDispositif:r}))}}empreinteInvitation({idDispositif:e,codeSecret:r}){return U4.stringify(skt(e+r))}async demanderEtPuisRejoindreCompte({idCompte:e,codeSecret:r}){await this.réseau.envoyerDemandeRejoindreCompte({idCompte:e,codeSecret:r}),await this.rejoindreCompte({idCompte:e})}async ajouterDispositif({idDispositif:e}){const{idCompte:r}=await this.attendreInitialisée(),{bd:n,fOublier:i}=await this.ouvrirBd({id:r});n.access.grant(fa,e),await i()}async enleverDispositif({idDispositif:e}){const{idCompte:r}=await this.attendreInitialisée(),{bd:n,fOublier:i}=await this.ouvrirBd({id:r});await n.access.revoke(fa,e),await i()}async rejoindreCompte({idCompte:e}){if(!to(e))throw new Error(`Adresse compte "${e}" non valide`);let r;const{bd:n,fOublier:i}=await this.ouvrirBdTypée({id:e,type:"keyvalue",schéma:K9}),s=n.access,a=await this.obtIdDispositif(),o=await s.suivreIdsOrbiteAutoriséesÉcriture(c=>r=c.includes(a));await new Promise(c=>{const l=async()=>{r&&(clearInterval(u),await o(),await i(),c())},u=setInterval(()=>{l()},10);l()}),this.idCompte=e,await this.sauvegarderAuStockageLocal({clef:"idCompte",val:e,parCompte:!1}),this.événements.emit("comptePrêt",{idCompte:e})}async donnerAccès({idBd:e,identité:r,rôle:n=Iu}){if(!to(r))throw new Error(`Identité "${r}" non valide.`);const{bd:i,fOublier:s}=await this.ouvrirBd({id:e}),a=i.access;a.type===Yf&&a.grant(n,r),await s()}async suivreIdCompte({f:e}){const r=async({idCompte:n})=>{await e(n)};return this.événements.on("comptePrêt",r),this.idCompte&&await r({idCompte:this.idCompte}),async()=>{this.événements.off("comptePrêt",r)}}async obtIdSFIP(){const{sfip:e}=await this.attendreSfipEtOrbite();return e.libp2p.peerId}async obtIdDispositif(){const{orbite:e}=await this.attendreSfipEtOrbite();return e.identity.id}async obtIdentitéOrbite(){const{orbite:e}=await this.attendreSfipEtOrbite();return e.identity}async obtIdCompte(){const{idCompte:e}=await this.attendreInitialisée();return e}async copierContenuBdDic({bdBase:e,nouvelleBd:r,clef:n,schéma:i}){const s=await e.get(n);if(typeof s!="string")return;const{bd:a,fOublier:o}=await this.ouvrirBdTypée({id:s,type:"keyvalue",schéma:i}),c=await r.get(n);if(!c)throw new Error("La nouvelle BD n'existait pas.");if(typeof c!="string")throw new Error(`${c} n'est pas une adresse Orbite.`);const{bd:l,fOublier:u}=await this.ouvrirBdTypée({id:c,type:"keyvalue",schéma:i}),f=await a.all();await Promise.all(f.map(async h=>{await l.put(h.key,h.value)})),o(),u()}async combinerBds({idBdBase:e,idBd2:r}){const{bd:n,fOublier:i}=await this.ouvrirBd({id:e}),s=n.type;switch(await i(),s){case"keyvalue":{const{bd:a,fOublier:o}=await this.ouvrirBd({id:e,type:"keyvalue"}),{bd:c,fOublier:l}=await this.ouvrirBd({id:r,type:"keyvalue"});await this.combinerBdsDict({bdBase:a,bd2:c}),await o(),await l();break}case"set":{const{bd:a,fOublier:o}=await this.ouvrirBd({id:e,type:"set"}),{bd:c,fOublier:l}=await this.ouvrirBd({id:r,type:"set"});await this.combinerBdsEnsemble({bdBase:a,bd2:c}),await o(),await l();break}default:throw new Error(`Type de BD ${s} non supporté.`)}}async combinerBdsDict({bdBase:e,bd2:r}){const n=Object.fromEntries((await r.all()).map(i=>[i.key,i.value]));for(const[i,s]of Object.entries(n)){const a=await e.get(i);a!==s&&(a===void 0?await e.put(i,s):to(a)&&to(s)&&await this.combinerBds({idBdBase:a,idBd2:s}))}}async combinerBdsEnsemble({bdBase:e,bd2:r,index:n}){const i=await e.all(),s=await r.all();for(const a of s){const o=a.value;if(n){if(typeof o!="object")throw new Error(`Erreur combinaison ensembles : ${typeof o}`);const c=i.find(l=>typeof l.value=="object"&&n.every(u=>l.value[u]===o[u]));if(!c)await e.add(o);else{const l=c.value;if(!m3(l,o)){const u=Object.assign({},l);for(const[f,h]of Object.entries(o))u[f]===void 0?u[f]=h:m3(u[f],h)||to(u[f])&&to(h)&&await this.combinerBds({idBdBase:u[f],idBd2:h});await e.del(c.value),await e.add(u)}}}else i.some(c=>m3(c.value,o))||await e.add(o)}}async suivreBd({id:e,f:r,type:n,schéma:i}){if(!to(e))throw new Error(`Adresse "${e}" non valide.`);const s=[],a={};let o=!1;const c=()=>{(i?n==="set"?this.ouvrirBdTypée({id:e,type:n,schéma:i}):n==="keyvalue"?this.ouvrirBdTypée({id:e,type:n,schéma:i}):n==="ordered-keyvalue"?this.ouvrirBdTypée({id:e,type:n,schéma:i}):this.ouvrirBd({id:e,type:n}):this.ouvrirBd({id:e})).then(({bd:f,fOublier:h})=>{s.push(h);const d=()=>{const g=rs(),p=r(f);(y=>!!y&&!!y.then)(p)&&(a[g]=p,p.then(()=>{delete a[g]}))};f.events.on("update",d),s.push(async()=>{f.events.off("update",d)}),d()}).catch(f=>{if(!o)if(String(f).includes("ipfs unable to find")||String(f).includes("aborted")||String(f).includes("No Promise in Promise.any was resolved"))c();else throw console.error(f),new Error(f)})};return c(),async()=>{o=!0,await Promise.all(s.map(u=>u())),await Promise.all(Object.values(a))}}async suivreBdDeClef({id:e,clef:r,f:n,fSuivre:i}){return await fs({fRacine:async({fSuivreRacine:a})=>{const o=async c=>{const l=await c.get(r);return await a(l)};return await this.suivreBd({id:e,f:o,type:"keyvalue"})},f:n,fSuivre:i})}async suivreBdDic({id:e,schéma:r,f:n}){const i=async s=>{const a=s?Object.fromEntries((await s.all()).map(o=>[o.key,o.value])):{};await n(a)};return await this.suivreBd({id:e,type:"keyvalue",schéma:r,f:i})}async suivreBdDicOrdonnée({id:e,schéma:r,f:n}){const i=async s=>{const a=await s.all();await n(a)};return await this.suivreBd({id:e,type:"ordered-keyvalue",schéma:r,f:i})}async suivreBdDicDeClef({id:e,clef:r,schéma:n,f:i}){const s=async o=>{await i(o||{})},a=async({id:o,fSuivreBd:c})=>await this.suivreBdDic({id:o,schéma:n,f:c});return await this.suivreBdDeClef({id:e,clef:r,f:s,fSuivre:a})}async suivreBdDicOrdonnéeDeClef({id:e,clef:r,schéma:n,f:i}){const s=async o=>{await i(o||[])},a=async({id:o,fSuivreBd:c})=>await this.suivreBdDicOrdonnée({id:o,schéma:n,f:c});return await this.suivreBdDeClef({id:e,clef:r,f:s,fSuivre:a})}async suivreBdListeDeClef({id:e,clef:r,f:n,schéma:i,renvoyerValeur:s=!0}){if(s){const a=async c=>{await n(c||[])},o=async({id:c,fSuivreBd:l})=>await this.suivreBdListe({id:c,f:l,schéma:i,renvoyerValeur:s});return await this.suivreBdDeClef({id:e,clef:r,f:a,fSuivre:o})}else{const a=async c=>{await n(c||[])},o=async({id:c,fSuivreBd:l})=>await this.suivreBdListe({id:c,f:l,schéma:i,renvoyerValeur:!1});return await this.suivreBdDeClef({id:e,clef:r,f:a,fSuivre:o})}}async suivreBdListe({id:e,f:r,schéma:n,renvoyerValeur:i=!0}){return await this.suivreBd({id:e,type:"set",schéma:n,f:async s=>{const a=i?(await s.all()).map(o=>o.value):await s.all();await r(a)}})}async suivreTypeObjet({idObjet:e,f:r}){const n=async a=>{let o;const{type:c}=a;c?o=["motClef","variable","bd","projet","nuée"].includes(c)?c:void 0:a.bds?o="projet":a.tableaux?o="bd":a.catégorie?o="variable":a.nom&&(o="motClef"),await r(o)},i={type:"object",properties:{type:{type:"string",nullable:!0}},additionalProperties:!0};return await this.suivreBdDic({id:e,schéma:i,f:n})}async suivreEmpreinteTêtesBdRécursive({idBd:e,f:r}){const n=async c=>{const l=await c.log.heads();return l[l.length-1]?.hash||""},i=c=>U4.stringify(nT(c));return await bn({fListe:async c=>await this.suivreBdsRécursives({idBd:e,f:async l=>await c(l)}),f:async c=>{await r(i(c.sort().join()))},fBranche:async(c,l)=>await this.suivreBd({id:c,f:async u=>{const f=await n(u);await l(f)}})})}async suivreBdsDeBdListe({id:e,f:r,fBranche:n,fIdBdDeBranche:i=o=>o,fRéduction:s=o=>[...new Set(o.flat())],fCode:a=o=>o}){return await bn({fListe:async c=>await this.suivreBdListe({id:e,f:c}),f:r,fBranche:n,fIdBdDeBranche:i,fRéduction:s,fCode:a})}async suivreBdsDeBdDic({id:e,f:r,fBranche:n,fIdBdDeBranche:i=o=>o,fRéduction:s=o=>[...new Set(o.flat())],fCode:a=o=>o}){return await bn({fListe:async c=>await this.suivreBd({id:e,f:async l=>await c((await l.all()).map(u=>u.value))}),f:r,fBranche:n,fIdBdDeBranche:i,fRéduction:s,fCode:a})}async suivreBdsDeFonctionRecherche({fListe:e,f:r,fBranche:n,fIdBdDeBranche:i=o=>o,fRéduction:s=o=>[...new Set(o.flat())],fCode:a=o=>o}){let o;const c=async f=>{o&&await o(f)};return{fOublier:await bn({fListe:async f=>{const{fOublier:h,fChangerProfondeur:d}=await e(f);return o=d,h},f:r,fBranche:n,fIdBdDeBranche:i,fRéduction:s,fCode:a}),fChangerProfondeur:c}}async suivreBdSelonCondition({fRacine:e,fCondition:r,f:n}){const i=async({id:s,fSuivreBd:a})=>await r(s,async o=>{a(o?s:void 0)});return await fs({fRacine:async({fSuivreRacine:s})=>await e(s),f:hs(n),fSuivre:i})}async suivreBdsSelonCondition({fListe:e,fCondition:r,f:n}){return await bn({fListe:e,f:async a=>{const o=a.filter(c=>c.état).map(c=>c.id);return await n(o)},fBranche:async(a,o)=>await r(a,async l=>await o({id:a,état:l}))})}async obtFichierSFIP({id:e,max:r}){return await KPe(await this.obtItérableAsyncSFIP({id:e}),r)}async obtItérableAsyncSFIP({id:e}){const{sfip:r}=await this.attendreSfipEtOrbite(),n=jne(r),i=e.split("/")[0];return n.cat(Dt.parse(i))}async ajouterÀSFIP({contenu:e,nomFichier:r}){const{sfip:n}=await this.attendreSfipEtOrbite();return(await jne(n).addFile({content:e})).toString()+"/"+r}obtClefStockageClient({clef:e,parCompte:r=!0}){return r?`${this.idCompte.slice(this.idCompte.length-23,this.idCompte.length-8)} : ${e}`:e}async obtDeStockageLocal({clef:e,parCompte:r=!0}){const n=this.obtClefStockageClient({clef:e,parCompte:r});return(await ey(await this.dossier())).getItem(n)}async sauvegarderAuStockageLocal({clef:e,val:r,parCompte:n=!0}){const i=this.obtClefStockageClient({clef:e,parCompte:n});return(await ey(await this.dossier())).setItem(i,r)}async effacerDeStockageLocal({clef:e,parCompte:r=!0}){const n=this.obtClefStockageClient({clef:e,parCompte:r});return(await ey(await this.dossier())).removeItem(n)}async obtIdBd({nom:e,racine:r,type:n}){const i={type:"object",properties:{[e]:{type:"string"}},additionalProperties:!0,required:[]};if(typeof r=="string"&&!wue(r))throw new Error(`Adresse ${r} non valide.`);const{bd:s,fOublier:a}=typeof r=="string"?await this.ouvrirBdTypée({id:r,type:"keyvalue",schéma:i}):{bd:r,fOublier:Li},o=s.address+":"+e;await this.verrouObtIdBd.acquire(o);let c=await s.get(e);const l=await this.obtDeStockageLocal({clef:o});if(typeof c=="string"&&l&&c!==l)try{await this.combinerBds({idBdBase:c,idBd2:l}),await this.effacerBd({id:l}),await this.sauvegarderAuStockageLocal({clef:o,val:c})}catch{}if(typeof c=="string"&&n)try{const{fOublier:u}=await this.ouvrirBd({id:c,type:n});return await u(),this.verrouObtIdBd.release(o),c}catch{throw this.verrouObtIdBd.release(o),new Error("Bd n'existe pas : "+e+" "+c)}if(!c&&n){const u=s.access,{orbite:f}=await this.attendreSfipEtOrbite();if(await u.estAutorisé(f.identity.id)){const d=await this.obtOpsAccès({idBd:s.address});if(c=await this.créerBdIndépendante({type:n,optionsAccès:d}),!c)throw new Error("Bd non générée");await s.set(e,c)}}return typeof c=="string"&&await this.sauvegarderAuStockageLocal({clef:o,val:c}),a&&await a(),this.verrouObtIdBd.release(o),typeof c=="string"?c:void 0}async créerBdIndépendante({type:e,optionsAccès:r,nom:n}){const{orbite:i}=await this.attendreSfipEtOrbite();return r=r||await this.obtOptionsAccès(),await i.créerBdIndépendante({type:e,nom:n,options:{AccessController:$V(r)}})}async effacerBd({id:e}){return await this.orbite?.effacerBd({id:e})}async obtOpsAccès({idBd:e}){const{bd:r,fOublier:n}=await this.ouvrirBd({id:e}),i=r.access;return await n(),{address:i.bd.address,write:i.write}}async suivrePermission({idObjet:e,f:r}){const{bd:n,fOublier:i}=await this.ouvrirBd({id:e}),s=n.access,a=s.type;if(a==="ipfs"){const o=await this.obtIdDispositif();return await r(s.write.includes(o)?Iu:void 0),await i(),Li}else if(a===Yf){const o=async l=>{const u=l.filter(h=>h.idCompte===this.idCompte).map(h=>h.rôle),f=u.includes(fa)?fa:u.includes(Iu)?Iu:void 0;await r(f)},c=await s.suivreUtilisateursAutorisés(o);return async()=>{await c(),await i()}}else throw new Error(`Type d'accès ${a} non reconnu.`)}async suivrePermissionÉcrire({id:e,f:r}){const n=async i=>{await r(i!==void 0)};return await this.suivrePermission({idObjet:e,f:n})}async suivreAccèsBd({id:e,f:r}){const n=async i=>{const s=i.access,a=s.type;if(a==="ipfs"){const o=s.write.map(c=>({idCompte:c,rôle:fa}));await r(o)}else if(a===Yf)return await s.suivreUtilisateursAutorisés(r);return Li};return await this.suivreBd({id:e,f:n})}async suivreBdsRécursives({idBd:e,f:r}){const n={},i=async()=>{await r(Object.keys(n))},s=new kc,a=async u=>{delete n[u],await Promise.all(Object.keys(n).map(async f=>{n[f]&&(n[f].requêtes.delete(u),n[f].requêtes.size||await n[f].fOublier())}))},o=["copiéDe"],c=async(u,f)=>{const h=v=>v.map(_=>typeof _=="string"?[_]:Array.isArray(_)?_:typeof _=="object"?Object.values(_):[]).flat().filter(_=>to(_)),d=async v=>{let _=[];typeof v=="object"?(_=h(Object.entries(v).filter(C=>!o.includes(C[0])).map(C=>C[1])),_.push(...h(Object.keys(v)))):Array.isArray(v)?_=h(v):typeof v=="string"&&(_=[v]);const x=_.filter(C=>!n[u].sousBds.includes(C)),A=n[u].sousBds.filter(C=>!_.includes(C));n[u].sousBds=_,await Promise.all(A.map(async C=>{n[C]?.requêtes.delete(u),n[C]?.requêtes.size||await n[C]?.fOublier()})),await Promise.all(x.map(async C=>await c(C,u))),i()};if(await s.acquire(u),n[u]){n[u].requêtes.add(f);return}const{bd:g,fOublier:p}=await this.ouvrirBd({id:u}),{type:m}=g;await p(),n[u]={requêtes:new Set([f]),sousBds:[],fOublier:async()=>{await y(),await a(u)}};let y;m==="keyvalue"?y=await this.suivreBdDic({id:u,f:d}):m==="ordered-keyvalue"?y=await this.suivreBdDicOrdonnée({id:u,f:d}):m==="set"?y=await this.suivreBdListe({id:u,f:d}):y=Li,s.release(u),i()};return await c(e,""),async()=>{await Promise.all(Object.values(n).map(u=>u.fOublier()))}}async fermerCompte(){this.réseau&&await this.réseau.fermer(),this.favoris&&await this.favoris.fermer(),this.automatisations&&await this.automatisations.fermer()}async fermer(){await this.attendreInitialisée();const{orbite:e}=await this.attendreSfipEtOrbite();await(await ey(await this.dossier())).fermer?.(),await this.fermerCompte(),await this.épingles.fermer(),await e.fermer({arrêterOrbite:!this._orbiteExterne}),this.sfip&&!this._sfipExterne&&await this.sfip.stop(),await this.effacerVerrou()}async effacerDispositif(){if(await this.fermer(),indexedDB)if(indexedDB.databases){const e=await indexedDB.databases();await Promise.all(e.map(r=>{r.name&&indexedDB.deleteDatabase(r.name)}))}else console.warn("On a pas pu tout effacer.");else{const e=await Ar(()=>Promise.resolve().then(()=>vc),void 0);(await ey(await this.dossier())).clear(),e.rmdirSync(await this.dossier())}}async exporterDispositif({nomFichier:e}){if(Na||Oa){const r=await Ar(()=>Promise.resolve().then(()=>vc),void 0),n=await Ar(()=>Promise.resolve().then(()=>r6),void 0),i=({dossier:a,zip:o})=>{r.readdirSync(a).map(l=>{if(r.statSync(l)?.isDirectory())i({dossier:n.join(a,l),zip:o.folder(l)});else{const f=r.createReadStream(n.join(a,l));o.file(l,f)}})},s=new ID;i({dossier:await this.dossier(),zip:s}),await RD({fichierZip:s,nomFichier:e})}else if(indexedDB?.databases){const r=({bd:a,zip:o})=>{const{name:c}=a;if(c){const l=o.folder(c);if(!l)throw new Error(c);const f=indexedDB.open(c).result.objectStoreNames;[...Array(f.length).keys()].map(d=>f.item(d)).filter(d=>!!d).map(d=>l.file(d,new NAt.IndexedDbReadStream({databaseName:c,objectStoreName:d})))}},n=new ID,i=await indexedDB.databases(),s=n.folder("bdIndexe");if(!s)throw new Error("Erreur Bd Indexe...");i.forEach(a=>{r({bd:a,zip:s})}),n.file("stockageLocal",JSON.stringify(await nkt(await this.dossier()))),await RD({fichierZip:n,nomFichier:e})}else throw new Error("Sauvegarde non implémentée.")}async rétablirDispositif(){throw await this.effacerDispositif(),Na||Oa?new Error("Non implémenté"):new Error("Non implémenté")}static async créer(e={}){const r=new Wl(e);return await r.attendreInitialisée(),r}}He([ot],Wl.prototype,"suivreDispositifs",null);He([ot],Wl.prototype,"suivreIdCompte",null);He([ot],Wl.prototype,"suivreEmpreinteTêtesBdRécursive",null);He([ot],Wl.prototype,"suivrePermission",null);He([ot],Wl.prototype,"suivrePermissionÉcrire",null);He([ot],Wl.prototype,"suivreAccèsBd",null);He([ot],Wl.prototype,"suivreBdsRécursives",null);class aVt{ipa;_messagesEnAttente;prêt;dicFRetourSuivi;opts;fsMessages;fsErreurs;_verrou;constructor(e,r,n={}){this.fsMessages={},this.fsErreurs={},this.connecterÉcouteurs({fMessage:e,fErreur:r}),this.opts=n instanceof Wl?{}:n,n instanceof Wl&&(this.ipa=n),this.dicFRetourSuivi={},this.prêt=!1,this._messagesEnAttente=[],this._verrou=new kc,this.init()}fMessage(e){Object.values(this.fsMessages).forEach(r=>r(e))}fErreur({erreur:e,idRequête:r,code:n}){Object.values(this.fsErreurs).forEach(i=>i({erreur:e,idRequête:r,code:n}))}async init(){if(await this._verrou.acquire("init"),this.ipa)return this._verrou.release("init"),this.ipa;try{this.ipa=await Wl.créer(this.opts)}catch(e){throw this.fErreur({erreur:e.toString(),code:e.name==="Error"?Jw:e.name}),this._messagesEnAttente.forEach(r=>this.fErreur({erreur:e.toString(),idRequête:r.idRequête,code:e.name==="Error"?Jw:e.name})),e}return this._messagesEnAttente.forEach(e=>this._gérerMessage(e)),this.prêt=!0,this._verrou.release("init"),this.ipa}async gérerMessage(e){this.prêt?await this._gérerMessage(e):this.ipa?.erreurInitialisation?this.fErreur({erreur:this.ipa.erreurInitialisation.toString(),idRequête:e.idRequête,code:this.ipa.erreurInitialisation.name==="Error"?Jw:this.ipa.erreurInitialisation.name}):this._messagesEnAttente.unshift(e)}async _gérerMessage(e){if(!this.ipa){this.fErreur({erreur:"IPA non initialisé",idRequête:e.idRequête,code:Jw});return}const{type:r}=e;switch(r){case"suivre":{const{idRequête:n,fonction:i,args:s,nomArgFonction:a}=e,o=this.extraireFonctionIPA(i,n);if(!o)return;const c=l=>{const u={type:"suivre",idRequête:n,données:l};this.fMessage(u)};s[a]=c;try{const l=await o(s),u=typeof l=="function"?{fOublier:l}:l;this.dicFRetourSuivi[n]=u;const f={type:"suivrePrêt",idRequête:n};typeof l!="function"&&(f.fonctions=Object.keys(l)),this.fMessage(f)}catch(l){const u=(l instanceof AggregateError?l.errors:[l]).map(f=>f.toString()+f.stack.toString()).join(`
`);this.fErreur({erreur:u,idRequête:n,code:yg})}break}case"action":{const{idRequête:n,fonction:i,args:s}=e,a=this.extraireFonctionIPA(i,n);if(!a)return;try{const o=await a(s),c={type:"action",idRequête:n,résultat:o};this.fMessage(c)}catch(o){const c=(o instanceof AggregateError?o.errors:[o]).map(l=>l.toString()+l.stack.toString()).join(`
`);this.fErreur({erreur:c,idRequête:n,code:yg})}break}case"retour":{const{idRequête:n,fonction:i,args:s}=e,a=this.dicFRetourSuivi[n];a&&await a[i](s),i==="fOublier"&&delete this.dicFRetourSuivi[n];break}default:{this.fErreur({erreur:`Type de requête ${r} non reconnu dans message ${e}`,idRequête:e.idRequête,code:yg});break}}}extraireFonctionIPA(e,r){const n=`Fonction Constellation.${e.join(".")} n'existe pas ou n'est pas une fonction.`;let i=this.ipa;for(const[s,a]of e.entries()){if(typeof i=="object"&&a in i&&i[a])s===e.length-1?i=i[a].bind(i):i=i[a];else{this.fErreur({erreur:n,idRequête:r,code:tM});return}if(!i){this.fErreur({erreur:n,idRequête:r,code:tM});return}}if(typeof i!="function"){this.fErreur({erreur:n,idRequête:r,code:Mye});return}return i}connecterÉcouteurs({fMessage:e,fErreur:r}){const n=rs();return this.fsMessages[n]=e,this.fsErreurs[n]=r,()=>{delete this.fsMessages[n],delete this.fsErreurs[n]}}async fermer(){await(await this.init()).fermer()}}class oVt extends TEt{ipa;constructor(e={}){super(),this.ipa=new aVt(r=>this.recevoirMessageDIpa(r),({erreur:r,idRequête:n,code:i})=>{const s={type:"erreur",idRequête:n,erreur:r,codeErreur:i};this.recevoirMessageDIpa(s)},e)}envoyerMessageÀIpa(e){this.ipa.gérerMessage(e)}}const cVt=(t={})=>kEt(new oVt(t)),lVt={install:t=>{const e=cVt();t.config.globalProperties.$constl=e,t.provide("constl",e)}},uVt={accueil:{titre:{egu24:"SC6.8: Using distributed databases in your citizen science research",nsih24:"Hands-on Session III : Using Constellation distributed data software in your own citizen science projects"},changerLangue:"Change language"},obtConstellation:{titre:"Get Constellation",options:{télécharger:"Download",navig:"Browser app",docu:"Read docs",codeSource:"Source code"}},données:{titre:"Download sample data",télécharger:"Download data",lienDynamique:"Copy link",crédits:"Data source:"},démo:{titre:"Live demo!",sousTitre:"You are now a citizen scientist",choisirStation:"Choose a station on the map, or else take a picture",plusDePhotos:"No more photos to analyse",effacerDonnées:"Clear my data",indicePrécip:"Input rainfall (mm)",indiceTélécharger:"Download data",nouvellePhoto:"New photo",soumettre:"Submit",numéroInvalid:"Invalid number",graphique:{aucuneDonnée:"No data yet"},source:"Data from SmartPhones4Water.",merci:"Thank you!"},code:{titre:"Dynamic data access",options:{appli:"Access in app",python:"Python Code",r:"R Code",julia:"Julia Code"},conclusion:"The Constellation team hopes to hear from you!",contact:"julien.malard@mail.mcgill.ca"}},fVt={accueil:{titre:{egu24:"SC6.8: Comment incorporer les données distribuées à vos projets de science citoyenne",nsih24:"Cours III : Utilisation de Constellation dans vos projets de science citoyenne"},changerLangue:"Choisir la langue"},obtConstellation:{titre:"Obtenir Constellation",options:{télécharger:"Télécharger",navig:"Appli navigateur",docu:"Lire la documenation",codeSource:"Code source"}},données:{titre:"Obtenir les données test",télécharger:"Télécharger les données",lienDynamique:"Copier le lien",crédits:"Source des données :"},démo:{titre:"Exemple en directe !",sousTitre:"Vous êtes maintenant un citoyen scientifique",choisirStation:"Choisissez un station sur la carte, ou bien prenez une photo",plusDePhotos:"Il n'y a plus de données à analyser",effacerDonnées:"Effacer mes données",indicePrécip:"Saisir la précipitation (mm)",indiceTélécharger:"Télécharger les données",nouvellePhoto:"Nouvelle photo",soumettre:"Soumettre",numéroInvalid:"Valeur invalide",graphique:{aucuneDonnée:"Aucune donnée pour l'instant"},source:"Données provenant de SmartPhones4Water.",merci:"Merci !"},code:{titre:"Accès dynamique aux données",options:{appli:"Accéder dans l'appli",python:"Code Python",r:"Code R",julia:"Code Julia"},conclusion:"L'équipe Constellation aimerait bien entendre votre opinion !",contact:"julien.malard@mail.mcgill.ca"}},hVt={en:uVt,हिं:{accueil:{titre:{egu24:"कक्षा ६॰८ - आपके नागरिक विज्ञान के कार्यक्रमों में वितरित आँकड़े",nsih24:"प्रशिक्षण ३ - आपके नागरिक विज्ञान के कार्यक्रमों में तारामंडल नाम का वित्तरित आँकड़ों की प्रणाली का प्रयोग"},changerLangue:"भाषा चुनना"},obtConstellation:{titre:"तारामंडल पाना",options:{télécharger:"अधोभारण करना",navig:"विचरक का अनुप्रयोग",docu:"प्रलेखण पढ़ना",codeSource:"संंकेत"}},données:{titre:"उदाहरण आँकड़ों पाना",télécharger:"आँकड़ों का अधोभारण",lienDynamique:"संबंध की प्रतिलिपि",crédits:"आँकड़ों पर अधिकार -"},démo:{titre:"तारामंडल का उदाहरण",sousTitre:"अब से आप नागरिक वैज्ञानिक हैंं।",choisirStation:"नक्षा मेंं एक स्तिथि चुन लीजिये अथवा एक चित्र खिंचीये।",plusDePhotos:"विश्लेषण के लिये अन्य चित्र नहीं है।",effacerDonnées:"मेरे आँकड़ों को मिटाना",indicePrécip:"बारिश (मि॰ मी॰)",indiceTélécharger:"अधोभारण",nouvellePhoto:"नई चित्र",soumettre:"प्रस्तुत करें",numéroInvalid:"गलत संख्या",graphique:{aucuneDonnée:"अब तक कोई आँकड़ा है नहीं"},source:"यह आँकड़े पानीकेलियेदूर्भाष योगदान द्वारा प्रदान किये गए।",merci:"धन्यवाद"},code:{titre:"सीधे आँकड़ो पर पहुंच",options:{appli:"अनुप्रयोग में पहुंच",python:"पैथान संकेत",r:"आर संकेत",julia:"जूलीया संकेत"},conclusion:"हम आपकी राय सुनने चाहते हैं",contact:"julien.malard@mail.mcgill.ca"}},த:{accueil:{titre:{egu24:"குறு வகுப்பு ௬.௮: உங்கள் குடிமக்கள் அறிவியலுக்காக விநியோகிக்கப்பட்டத் தரவுத்தளங்கள்"},changerLangue:"மொழியை மாறு"},obtConstellation:{titre:"விண்மீனைப் பெறு",options:{télécharger:"பதிவிறக்கம் செய்யு",navig:"உலாவி செயலி",docu:"ஆவணங்களைப் படி",codeSource:"மூல் குறியீடு"}},données:{titre:"உதாரண தரவு பதிவிறக்கம்",télécharger:"தரவு பதிவிறக்கம்",lienDynamique:"இணைப்பை நகலெடு",crédits:"தரவுகளின் உரிமை:"},démo:{titre:"விண்மீனின் உதாரணம்",sousTitre:"இனிமேல் நீங்கள் குடியரசு அறிவியலாளர் தான்!",choisirStation:"வரைப்படத்தில் ஒரு இடத்தைத் தேர்ந்தெடு கொள்ளுங்கள், அல்லது ஒரு புகைப்படத்தை எடுத்து கொள்ளுங்கள்",plusDePhotos:"பகுப்பாய்வு செய்ய வேண்டிய புகைப்படம் வேறு ஒன்றும் இல்லை",effacerDonnées:"எனது தரவுகளை நீக்கு",indicePrécip:"மழை அளவு (மி. மீ.)",indiceTélécharger:"பதிவிறக்கம்",nouvellePhoto:"புதிய படம்",soumettre:"உள்ளிடு",numéroInvalid:"தவரான எண்",graphique:{aucuneDonnée:"இன்னும் தரவுகள் எதும் இல்லை"},source:"இந்த தரவுகள் நீருக்காகதிறன்பேசி என்று திட்டத்தால் வழங்கப்பட்டன.",merci:"நன்றி!"},code:{titre:"நேரடி தரவு அணுகல்",options:{appli:"செயலியில் அணுகல்",python:"பைத்தான் குறியீடு",r:"ஆர் குறியீடு",julia:"ஜூலீயா குறியீடு"},conclusion:"நம்ம விண்மீன் ஆராய்ச்சியாளர் குழுவை தொடர்பு கொள்ள தயங்காதீர்கள்",contact:"julien.malard@mail.mcgill.ca"}},fr:fVt},dVt=e$e({மொழி:"हिं",மூல்_மொழி:"fr",மூல்_மொழிபெயர்ப்புகள்:hVt});function pVt(t){t.use(CCe),t.use(Kde),t.use(lVt),t.use(dVt)}const gVt=Di({__name:"BtnMenuLangues",setup(t){const{isRtl:e}=Gl();return(r,n)=>(pr(),Qr(Jc,{style:Uv(["position: absolute;"+(ct(e)?"left:":"right:")+"20px; top: 20px",{"z-index":"100"}]),icon:"mdi-earth",size:"small"},{default:mt(()=>[ue(Fn,{size:"large"}),ue(rhe)]),_:1},8,["style"]))}}),mVt=_t({...Or(),...ECe({fullHeight:!0}),...$s()},"VApp"),yVt=Yt()({name:"VApp",props:mVt(),setup(t,e){let{slots:r}=e;const n=va(t),{layoutClasses:i,getLayoutItem:s,items:a,layoutRef:o}=TCe(t),{rtlClasses:c}=Gl();return _r(()=>ue("div",{ref:o,class:["v-application",n.themeClasses.value,i.value,c.value,t.class],style:[t.style]},[ue("div",{class:"v-application__wrap"},[r.default?.()])])),{getLayoutItem:s,items:a,theme:n}}}),vVt=_t({locale:String,fallbackLocale:String,messages:Object,rtl:{type:Boolean,default:void 0},...Or()},"VLocaleProvider"),bVt=Yt()({name:"VLocaleProvider",props:vVt(),setup(t,e){let{slots:r}=e;const{rtlClasses:n}=yke(t);return _r(()=>ue("div",{class:["v-locale-provider",n.value,t.class],style:t.style},[r.default?.()])),{}}}),wVt=_t({scrollable:Boolean,...Or(),...mh(),...ps({tag:"main"})},"VMain"),_Vt=Yt()({name:"VMain",props:wVt(),setup(t,e){let{slots:r}=e;const{dimensionStyles:n}=yh(t),{mainStyles:i}=SCe(),{ssrBootStyles:s}=OF();return _r(()=>ue(t.tag,{class:["v-main",{"v-main--scrollable":t.scrollable},t.class],style:[i.value,s.value,n.value,t.style]},{default:()=>[t.scrollable?ue("div",{class:"v-main__scroller"},[r.default?.()]):r.default?.()]})),{}}}),xVt=Di({__name:"App",setup(t){const{வலதிலிருந்து_இடது_மொழி:e}=Kv(),r=e();return(n,i)=>{const s=gVt,a=nAe("router-view");return pr(),Qr(yVt,null,{default:mt(()=>[ue(bVt,{rtl:ct(r)},{default:mt(()=>[ue(_Vt,null,{default:mt(()=>[ue(s),ue(a,null,{default:mt(({Component:o})=>[ue(L1,{name:"fade"},{default:mt(()=>[(pr(),Qr(ooe(o)))]),_:2},1024)]),_:1})]),_:1})]),_:1},8,["rtl"])]),_:1})}}}),d6e=xTe(xVt);pVt(d6e);d6e.mount("#app");export{We as B,sf as C,ea as T,pae as a,Et as b,It as c,V6 as d,si as e,Es as f,Wo as g,qi as h,ti as i,Cr as j,Yse as k,p4 as l,Wr as m,r6 as p,rp as r,yo as s,D6 as t};
